(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00b4":function(e,t,i){"use strict";i("ac1f");var n=i("23e7"),r=i("da84"),o=i("c65b"),s=i("e330"),a=i("1626"),c=i("861d"),l=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),u=r.Error,d=s(/./.test);n({target:"RegExp",proto:!0,forced:!l},{test:function(e){var t=this.exec;if(!a(t))return d(this,e);var i=o(t,this,e);if(null!==i&&!c(i))throw new u("RegExp exec method returned something other than an Object or null");return!!i}})},"00d8":function(e,t){(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&i.rotl(e,8)|4278255360&i.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=i.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],i=0,n=0;i<e.length;i++,n+=8)t[n>>>5]|=e[i]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],i=0;i<32*e.length;i+=8)t.push(e[i>>>5]>>>24-i%32&255);return t},bytesToHex:function(e){for(var t=[],i=0;i<e.length;i++)t.push((e[i]>>>4).toString(16)),t.push((15&e[i]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(parseInt(e.substr(i,2),16));return t},bytesToBase64:function(e){for(var i=[],n=0;n<e.length;n+=3)for(var r=e[n]<<16|e[n+1]<<8|e[n+2],o=0;o<4;o++)8*n+6*o<=8*e.length?i.push(t.charAt(r>>>6*(3-o)&63)):i.push("=");return i.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var i=[],n=0,r=0;n<e.length;r=++n%4)0!=r&&i.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|t.indexOf(e.charAt(n))>>>6-2*r);return i}};e.exports=i})()},"00ee":function(e,t,i){var n=i("b622"),r=n("toStringTag"),o={};o[r]="z",e.exports="[object z]"===String(o)},"01b4":function(e,t){var i=function(){this.head=null,this.tail=null};i.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=i},"0366":function(e,t,i){var n=i("e330"),r=i("59ed"),o=i("40d5"),s=n(n.bind);e.exports=function(e,t){return r(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},"03d6":function(e,t,i){var n=i("9c0e"),r=i("6ca1"),o=i("39ad")(!1),s=i("5a94")("IE_PROTO");e.exports=function(e,t){var i,a=r(e),c=0,l=[];for(i in a)i!=s&&n(a,i)&&l.push(i);while(t.length>c)n(a,i=t[c++])&&(~o(l,i)||l.push(i));return l}},"044b":function(e,t){function i(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function n(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&i(e.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(i(e)||n(e)||!!e._isBuffer)}},"04d1":function(e,t,i){var n=i("342f"),r=n.match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},"051b":function(e,t,i){var n=i("1a14"),r=i("10db");e.exports=i("0bad")?function(e,t,i){return n.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},"0538":function(e,t,i){"use strict";var n=i("da84"),r=i("e330"),o=i("59ed"),s=i("861d"),a=i("1a2d"),c=i("f36a"),l=i("40d5"),u=n.Function,d=r([].concat),h=r([].join),p={},f=function(e,t,i){if(!a(p,t)){for(var n=[],r=0;r<t;r++)n[r]="a["+r+"]";p[t]=u("C,a","return new C("+h(n,",")+")")}return p[t](e,i)};e.exports=l?u.bind:function(e){var t=o(this),i=t.prototype,n=c(arguments,1),r=function(){var i=d(n,c(arguments));return this instanceof r?f(t,i.length,i):t.apply(e,i)};return s(i)&&(r.prototype=i),r}},"057f":function(e,t,i){var n=i("c6b6"),r=i("fc6a"),o=i("241c").f,s=i("4dae"),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(e){try{return o(e)}catch(t){return s(a)}};e.exports.f=function(e){return a&&"Window"==n(e)?c(e):o(r(e))}},"05f5":function(e,t,i){var n=i("7a41"),r=i("ef08").document,o=n(r)&&n(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},"06cf":function(e,t,i){var n=i("83ab"),r=i("c65b"),o=i("d1e7"),s=i("5c6c"),a=i("fc6a"),c=i("a04b"),l=i("1a2d"),u=i("0cfb"),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=a(e),t=c(t),u)try{return d(e,t)}catch(i){}if(l(e,t))return s(!r(o.f,e,t),e[t])}},"072d":function(e,t,i){"use strict";var n=i("0bad"),r=i("9876"),o=i("fed5"),s=i("1917"),a=i("0983"),c=i("9fbb"),l=Object.assign;e.exports=!l||i("4b8b")((function(){var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach((function(e){t[e]=e})),7!=l({},e)[i]||Object.keys(l({},t)).join("")!=n}))?function(e,t){var i=a(e),l=arguments.length,u=1,d=o.f,h=s.f;while(l>u){var p,f=c(arguments[u++]),g=d?r(f).concat(d(f)):r(f),m=g.length,_=0;while(m>_)p=g[_++],n&&!h.call(f,p)||(i[p]=f[p])}return i}:l},"07ac":function(e,t,i){var n=i("23e7"),r=i("6f53").values;n({target:"Object",stat:!0},{values:function(e){return r(e)}})},"07fa":function(e,t,i){var n=i("50c4");e.exports=function(e){return n(e.length)}},"0983":function(e,t,i){var n=i("c901");e.exports=function(e){return Object(n(e))}},"0a06":function(e,t,i){"use strict";var n=i("c532"),r=i("30b5"),o=i("f6b4"),s=i("5270"),a=i("4a7b"),c=i("848b"),l=c.validators;function u(e){this.defaults=e,this.interceptors={request:new o,response:new o}}u.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=a(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var i=[],n=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(n=n&&t.synchronous,i.unshift(t.fulfilled,t.rejected))}));var r,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!n){var u=[s,void 0];Array.prototype.unshift.apply(u,i),u=u.concat(o),r=Promise.resolve(e);while(u.length)r=r.then(u.shift(),u.shift());return r}var d=e;while(i.length){var h=i.shift(),p=i.shift();try{d=h(d)}catch(f){p(f);break}}try{r=s(d)}catch(f){return Promise.reject(f)}while(o.length)r=r.then(o.shift(),o.shift());return r},u.prototype.getUri=function(e){return e=a(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,i){return this.request(a(i||{},{method:e,url:t,data:(i||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,i,n){return this.request(a(n||{},{method:e,url:t,data:i}))}})),e.exports=u},"0ae2":function(e,t,i){var n=i("9876"),r=i("fed5"),o=i("1917");e.exports=function(e){var t=n(e),i=r.f;if(i){var s,a=i(e),c=o.f,l=0;while(a.length>l)c.call(e,s=a[l++])&&t.push(s)}return t}},"0b25":function(e,t,i){var n=i("da84"),r=i("5926"),o=i("50c4"),s=n.RangeError;e.exports=function(e){if(void 0===e)return 0;var t=r(e),i=o(t);if(t!==i)throw s("Wrong length or index");return i}},"0b42":function(e,t,i){var n=i("da84"),r=i("e8b5"),o=i("68ee"),s=i("861d"),a=i("b622"),c=a("species"),l=n.Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,o(t)&&(t===l||r(t.prototype))?t=void 0:s(t)&&(t=t[c],null===t&&(t=void 0))),void 0===t?l:t}},"0b99":function(e,t,i){"use strict";var n=i("19fa")(!0);i("393a")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})}))},"0bad":function(e,t,i){e.exports=!i("4b8b")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"0cb2":function(e,t,i){var n=i("e330"),r=i("7b0b"),o=Math.floor,s=n("".charAt),a=n("".replace),c=n("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,i,n,d,h){var p=i+e.length,f=n.length,g=u;return void 0!==d&&(d=r(d),g=l),a(h,g,(function(r,a){var l;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,i);case"'":return c(t,p);case"<":l=d[c(a,1,-1)];break;default:var u=+a;if(0===u)return r;if(u>f){var h=o(u/10);return 0===h?r:h<=f?void 0===n[h-1]?s(a,1):n[h-1]+s(a,1):r}l=n[u-1]}return void 0===l?"":l}))}},"0cfb":function(e,t,i){var n=i("83ab"),r=i("d039"),o=i("cc12");e.exports=!n&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0d3b":function(e,t,i){var n=i("d039"),r=i("b622"),o=i("c430"),s=r("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,i="";return e.pathname="c%20d",t.forEach((function(e,n){t["delete"]("b"),i+=n+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host}))},"0d51":function(e,t,i){var n=i("da84"),r=n.String;e.exports=function(e){try{return r(e)}catch(t){return"Object"}}},"0df6":function(e,t,i){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},"0e15":function(e,t,i){var n=i("597f");e.exports=function(e,t,i){return void 0===i?n(e,t,!1):n(e,i,!1!==t)}},"0fae":function(e,t,i){},"107c":function(e,t,i){var n=i("d039"),r=i("da84"),o=r.RegExp;e.exports=n((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},1098:function(e,t,i){"use strict";t.__esModule=!0;var n=i("17ed"),r=c(n),o=i("f893"),s=c(o),a="function"===typeof s.default&&"symbol"===typeof r.default?function(e){return typeof e}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};function c(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof s.default&&"symbol"===a(r.default)?function(e){return"undefined"===typeof e?"undefined":a(e)}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"===typeof e?"undefined":a(e)}},"10db":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},1276:function(e,t,i){"use strict";var n=i("2ba4"),r=i("c65b"),o=i("e330"),s=i("d784"),a=i("44e7"),c=i("825a"),l=i("1d80"),u=i("4840"),d=i("8aa5"),h=i("50c4"),p=i("577e"),f=i("dc4a"),g=i("4dae"),m=i("14c3"),_=i("9263"),v=i("9f7f"),E=i("d039"),A=v.UNSUPPORTED_Y,y=4294967295,S=Math.min,C=[].push,b=o(/./.exec),T=o(C),I=o("".slice),R=!E((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));s("split",(function(e,t,i){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var o=p(l(this)),s=void 0===i?y:i>>>0;if(0===s)return[];if(void 0===e)return[o];if(!a(e))return r(t,o,e,s);var c,u,d,h=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,v=new RegExp(e.source,f+"g");while(c=r(_,v,o)){if(u=v.lastIndex,u>m&&(T(h,I(o,m,c.index)),c.length>1&&c.index<o.length&&n(C,h,g(c,1)),d=c[0].length,m=u,h.length>=s))break;v.lastIndex===c.index&&v.lastIndex++}return m===o.length?!d&&b(v,"")||T(h,""):T(h,I(o,m)),h.length>s?g(h,0,s):h}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:r(t,this,e,i)}:t,[function(t,i){var n=l(this),s=void 0==t?void 0:f(t,e);return s?r(s,t,n,i):r(o,p(n),t,i)},function(e,n){var r=c(this),s=p(e),a=i(o,r,s,n,o!==t);if(a.done)return a.value;var l=u(r,RegExp),f=r.unicode,g=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(A?"g":"y"),_=new l(A?"^(?:"+r.source+")":r,g),v=void 0===n?y:n>>>0;if(0===v)return[];if(0===s.length)return null===m(_,s)?[s]:[];var E=0,C=0,b=[];while(C<s.length){_.lastIndex=A?0:C;var R,w=m(_,A?I(s,C):s);if(null===w||(R=S(h(_.lastIndex+(A?C:0)),s.length))===E)C=d(s,C,f);else{if(T(b,I(s,E,C)),b.length===v)return b;for(var O=1;O<=w.length-1;O++)if(T(b,w[O]),b.length===v)return b;C=E=R}}return T(b,I(s,E)),b}]}),!R,A)},"12f2":function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e){return{methods:{focus:function(){this.$refs[e].focus()}}}}},"143c":function(e,t,i){var n=i("74e8");n("Int32",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},1448:function(e,t,i){var n=i("dfb9"),r=i("b6b7");e.exports=function(e,t){return n(r(e),t)}},"145e":function(e,t,i){"use strict";var n=i("7b0b"),r=i("23cb"),o=i("07fa"),s=Math.min;e.exports=[].copyWithin||function(e,t){var i=n(this),a=o(i),c=r(e,a),l=r(t,a),u=arguments.length>2?arguments[2]:void 0,d=s((void 0===u?a:r(u,a))-l,a-c),h=1;l<c&&c<l+d&&(h=-1,l+=d-1,c+=d-1);while(d-- >0)l in i?i[c]=i[l]:delete i[c],c+=h,l+=h;return i}},"14c3":function(e,t,i){var n=i("da84"),r=i("c65b"),o=i("825a"),s=i("1626"),a=i("c6b6"),c=i("9263"),l=n.TypeError;e.exports=function(e,t){var i=e.exec;if(s(i)){var n=r(i,e,t);return null!==n&&o(n),n}if("RegExp"===a(e))return r(c,e,t);throw l("RegExp#exec called on incompatible receiver")}},"14e9":function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=132)}({132:function(e,t,i){"use strict";i.r(t);var n=i(16),r=i(38),o=i.n(r),s=i(3),a=i(2),c={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function l(e){var t=e.move,i=e.size,n=e.bar,r={},o="translate"+n.axis+"("+t+"%)";return r[n.size]=i,r.transform=o,r.msTransform=o,r.webkitTransform=o,r}var u={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return c[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(e){var t=this.size,i=this.move,n=this.bar;return e("div",{class:["el-scrollbar__bar","is-"+n.key],on:{mousedown:this.clickTrackHandler}},[e("div",{ref:"thumb",class:"el-scrollbar__thumb",on:{mousedown:this.clickThumbHandler},style:l({size:t,move:i,bar:n})})])},methods:{clickThumbHandler:function(e){e.ctrlKey||2===e.button||(this.startDrag(e),this[this.bar.axis]=e.currentTarget[this.bar.offset]-(e[this.bar.client]-e.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(e){var t=Math.abs(e.target.getBoundingClientRect()[this.bar.direction]-e[this.bar.client]),i=this.$refs.thumb[this.bar.offset]/2,n=100*(t-i)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=n*this.wrap[this.bar.scrollSize]/100},startDrag:function(e){e.stopImmediatePropagation(),this.cursorDown=!0,Object(a["on"])(document,"mousemove",this.mouseMoveDocumentHandler),Object(a["on"])(document,"mouseup",this.mouseUpDocumentHandler),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(e){if(!1!==this.cursorDown){var t=this[this.bar.axis];if(t){var i=-1*(this.$el.getBoundingClientRect()[this.bar.direction]-e[this.bar.client]),n=this.$refs.thumb[this.bar.offset]-t,r=100*(i-n)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=r*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(e){this.cursorDown=!1,this[this.bar.axis]=0,Object(a["off"])(document,"mousemove",this.mouseMoveDocumentHandler),document.onselectstart=null}},destroyed:function(){Object(a["off"])(document,"mouseup",this.mouseUpDocumentHandler)}},d={name:"ElScrollbar",components:{Bar:u},props:{native:Boolean,wrapStyle:{},wrapClass:{},viewClass:{},viewStyle:{},noresize:Boolean,tag:{type:String,default:"div"}},data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},render:function(e){var t=o()(),i=this.wrapStyle;if(t){var n="-"+t+"px",r="margin-bottom: "+n+"; margin-right: "+n+";";Array.isArray(this.wrapStyle)?(i=Object(s["toObject"])(this.wrapStyle),i.marginRight=i.marginBottom=n):"string"===typeof this.wrapStyle?i+=r:i=r}var a=e(this.tag,{class:["el-scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default),c=e("div",{ref:"wrap",style:i,on:{scroll:this.handleScroll},class:[this.wrapClass,"el-scrollbar__wrap",t?"":"el-scrollbar__wrap--hidden-default"]},[[a]]),l=void 0;return l=this.native?[e("div",{ref:"wrap",class:[this.wrapClass,"el-scrollbar__wrap"],style:i},[[a]])]:[c,e(u,{attrs:{move:this.moveX,size:this.sizeWidth}}),e(u,{attrs:{vertical:!0,move:this.moveY,size:this.sizeHeight}})],e("div",{class:"el-scrollbar"},l)},methods:{handleScroll:function(){var e=this.wrap;this.moveY=100*e.scrollTop/e.clientHeight,this.moveX=100*e.scrollLeft/e.clientWidth},update:function(){var e=void 0,t=void 0,i=this.wrap;i&&(e=100*i.clientHeight/i.scrollHeight,t=100*i.clientWidth/i.scrollWidth,this.sizeHeight=e<100?e+"%":"",this.sizeWidth=t<100?t+"%":"")}},mounted:function(){this.native||(this.$nextTick(this.update),!this.noresize&&Object(n["addResizeListener"])(this.$refs.resize,this.update))},beforeDestroy:function(){this.native||!this.noresize&&Object(n["removeResizeListener"])(this.$refs.resize,this.update)},install:function(e){e.component(d.name,d)}};t["default"]=d},16:function(e,t){e.exports=i("4010")},2:function(e,t){e.exports=i("5924")},3:function(e,t){e.exports=i("8122")},38:function(e,t){e.exports=i("e62d")}})},"159b":function(e,t,i){var n=i("da84"),r=i("fdbc"),o=i("785a"),s=i("17c2"),a=i("9112"),c=function(e){if(e&&e.forEach!==s)try{a(e,"forEach",s)}catch(t){e.forEach=s}};for(var l in r)r[l]&&c(n[l]&&n[l].prototype);c(o)},1609:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},1626:function(e,t){e.exports=function(e){return"function"==typeof e}},"170b":function(e,t,i){"use strict";var n=i("ebb5"),r=i("50c4"),o=i("23cb"),s=i("b6b7"),a=n.aTypedArray,c=n.exportTypedArrayMethod;c("subarray",(function(e,t){var i=a(this),n=i.length,c=o(e,n),l=s(i);return new l(i.buffer,i.byteOffset+c*i.BYTES_PER_ELEMENT,r((void 0===t?n:o(t,n))-c))}))},"17c2":function(e,t,i){"use strict";var n=i("b727").forEach,r=i("a640"),o=r("forEach");e.exports=o?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"17ed":function(e,t,i){e.exports={default:i("511f"),__esModule:!0}},"182d":function(e,t,i){var n=i("da84"),r=i("f8cd"),o=n.RangeError;e.exports=function(e,t){var i=r(e);if(i%t)throw o("Wrong offset");return i}},1836:function(e,t,i){var n=i("6ca1"),r=i("6438").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return r(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):r(n(e))}},1917:function(e,t){t.f={}.propertyIsEnumerable},"19aa":function(e,t,i){var n=i("da84"),r=i("3a9b"),o=n.TypeError;e.exports=function(e,t){if(r(t,e))return e;throw o("Incorrect invocation")}},"19fa":function(e,t,i){var n=i("fc5e"),r=i("c901");e.exports=function(e){return function(t,i){var o,s,a=String(r(t)),c=n(i),l=a.length;return c<0||c>=l?e?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===l||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):o:e?a.slice(c,c+2):s-56320+(o-55296<<10)+65536)}}},"1a14":function(e,t,i){var n=i("77e9"),r=i("faf5"),o=i("3397"),s=Object.defineProperty;t.f=i("0bad")?Object.defineProperty:function(e,t,i){if(n(e),t=o(t,!0),n(i),r)try{return s(e,t,i)}catch(a){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},"1a2d":function(e,t,i){var n=i("e330"),r=i("7b0b"),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(r(e),t)}},"1b40":function(e,t,i){"use strict";i.d(t,"a",(function(){return C})),i.d(t,"d",(function(){return n["default"]})),i.d(t,"b",(function(){return I})),i.d(t,"c",(function(){return R})),i.d(t,"e",(function(){return w}));var n=i("2b0e");
/**
  * vue-class-component v7.2.6
  * (c) 2015-present Evan You
  * @license MIT
  */function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e){return a(e)||c(e)||l()}function a(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(){return"undefined"!==typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function d(e,t){h(e,t),Object.getOwnPropertyNames(t.prototype).forEach((function(i){h(e.prototype,t.prototype,i)})),Object.getOwnPropertyNames(t).forEach((function(i){h(e,t,i)}))}function h(e,t,i){var n=i?Reflect.getOwnMetadataKeys(t,i):Reflect.getOwnMetadataKeys(t);n.forEach((function(n){var r=i?Reflect.getOwnMetadata(n,t,i):Reflect.getOwnMetadata(n,t);i?Reflect.defineMetadata(n,r,e,i):Reflect.defineMetadata(n,r,e)}))}var p={__proto__:[]},f=p instanceof Array;function g(e){return function(t,i,n){var r="function"===typeof t?t:t.constructor;r.__decorators__||(r.__decorators__=[]),"number"!==typeof n&&(n=void 0),r.__decorators__.push((function(t){return e(t,i,n)}))}}function m(e){var t=r(e);return null==e||"object"!==t&&"function"!==t}function _(e,t){var i=t.prototype._init;t.prototype._init=function(){var t=this,i=Object.getOwnPropertyNames(e);if(e.$options.props)for(var n in e.$options.props)e.hasOwnProperty(n)||i.push(n);i.forEach((function(i){Object.defineProperty(t,i,{get:function(){return e[i]},set:function(t){e[i]=t},configurable:!0})}))};var n=new t;t.prototype._init=i;var r={};return Object.keys(n).forEach((function(e){void 0!==n[e]&&(r[e]=n[e])})),r}var v=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.name=t.name||e._componentTag||e.name;var i=e.prototype;Object.getOwnPropertyNames(i).forEach((function(e){if("constructor"!==e)if(v.indexOf(e)>-1)t[e]=i[e];else{var n=Object.getOwnPropertyDescriptor(i,e);void 0!==n.value?"function"===typeof n.value?(t.methods||(t.methods={}))[e]=n.value:(t.mixins||(t.mixins=[])).push({data:function(){return o({},e,n.value)}}):(n.get||n.set)&&((t.computed||(t.computed={}))[e]={get:n.get,set:n.set})}})),(t.mixins||(t.mixins=[])).push({data:function(){return _(this,e)}});var r=e.__decorators__;r&&(r.forEach((function(e){return e(t)})),delete e.__decorators__);var s=Object.getPrototypeOf(e.prototype),a=s instanceof n["default"]?s.constructor:n["default"],c=a.extend(t);return y(c,e,a),u()&&d(c,e),c}var A={prototype:!0,arguments:!0,callee:!0,caller:!0};function y(e,t,i){Object.getOwnPropertyNames(t).forEach((function(n){if(!A[n]){var r=Object.getOwnPropertyDescriptor(e,n);if(!r||r.configurable){var o=Object.getOwnPropertyDescriptor(t,n);if(!f){if("cid"===n)return;var s=Object.getOwnPropertyDescriptor(i,n);if(!m(o.value)&&s&&s.value===o.value)return}0,Object.defineProperty(e,n,o)}}}))}function S(e){return"function"===typeof e?E(e):function(t){return E(t,e)}}S.registerHooks=function(e){v.push.apply(v,s(e))};var C=S;var b="undefined"!==typeof Reflect&&"undefined"!==typeof Reflect.getMetadata;function T(e,t,i){if(b&&!Array.isArray(e)&&"function"!==typeof e&&!e.hasOwnProperty("type")&&"undefined"===typeof e.type){var n=Reflect.getMetadata("design:type",t,i);n!==Object&&(e.type=n)}}function I(e){return void 0===e&&(e={}),function(t,i){T(e,t,i),g((function(t,i){(t.props||(t.props={}))[i]=e}))(t,i)}}function R(e){return g((function(t,i){t.computed=t.computed||{},t.computed[i]={cache:!1,get:function(){return this.$refs[e||i]}}}))}function w(e,t){void 0===t&&(t={});var i=t.deep,n=void 0!==i&&i,r=t.immediate,o=void 0!==r&&r;return g((function(t,i){"object"!==typeof t.watch&&(t.watch=Object.create(null));var r=t.watch;"object"!==typeof r[e]||Array.isArray(r[e])?"undefined"===typeof r[e]&&(r[e]=[]):r[e]=[r[e]],r[e].push({handler:i,deep:n,immediate:o})}))}},"1be4":function(e,t,i){var n=i("d066");e.exports=n("document","documentElement")},"1bf2":function(e,t,i){var n=i("23e7"),r=i("56ef");n({target:"Reflect",stat:!0},{ownKeys:r})},"1c7e":function(e,t,i){var n=i("b622"),r=n("iterator"),o=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!o)return!1;var i=!1;try{var n={};n[r]=function(){return{next:function(){return{done:i=!0}}}},e(n)}catch(c){}return i}},"1cdc":function(e,t,i){var n=i("342f");e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},"1d2b":function(e,t,i){"use strict";e.exports=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}}},"1d80":function(e,t,i){var n=i("da84"),r=n.TypeError;e.exports=function(e){if(void 0==e)throw r("Can't call method on "+e);return e}},"1da1":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));i("d3b7");function n(e,t,i,n,r,o,s){try{var a=e[o](s),c=a.value}catch(l){return void i(l)}a.done?t(c):Promise.resolve(c).then(n,r)}function r(e){return function(){var t=this,i=arguments;return new Promise((function(r,o){var s=e.apply(t,i);function a(e){n(s,r,o,a,c,"next",e)}function c(e){n(s,r,o,a,c,"throw",e)}a(void 0)}))}}},"1dde":function(e,t,i){var n=i("d039"),r=i("b622"),o=i("2d00"),s=r("species");e.exports=function(e){return o>=51||!n((function(){var t=[],i=t.constructor={};return i[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"1fb5":function(e,t,i){"use strict";t.byteLength=u,t.toByteArray=h,t.fromByteArray=g;for(var n=[],r=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)n[a]=s[a],r[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");-1===i&&(i=t);var n=i===t?0:4-i%4;return[i,n]}function u(e){var t=l(e),i=t[0],n=t[1];return 3*(i+n)/4-n}function d(e,t,i){return 3*(t+i)/4-i}function h(e){var t,i,n=l(e),s=n[0],a=n[1],c=new o(d(e,s,a)),u=0,h=a>0?s-4:s;for(i=0;i<h;i+=4)t=r[e.charCodeAt(i)]<<18|r[e.charCodeAt(i+1)]<<12|r[e.charCodeAt(i+2)]<<6|r[e.charCodeAt(i+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===a&&(t=r[e.charCodeAt(i)]<<2|r[e.charCodeAt(i+1)]>>4,c[u++]=255&t),1===a&&(t=r[e.charCodeAt(i)]<<10|r[e.charCodeAt(i+1)]<<4|r[e.charCodeAt(i+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c}function p(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function f(e,t,i){for(var n,r=[],o=t;o<i;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),r.push(p(n));return r.join("")}function g(e){for(var t,i=e.length,r=i%3,o=[],s=16383,a=0,c=i-r;a<c;a+=s)o.push(f(e,a,a+s>c?c:a+s));return 1===r?(t=e[i-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[i-2]<<8)+e[i-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},"219c":function(e,t,i){"use strict";var n=i("da84"),r=i("e330"),o=i("d039"),s=i("59ed"),a=i("addb"),c=i("ebb5"),l=i("04d1"),u=i("d998"),d=i("2d00"),h=i("512ce"),p=n.Array,f=c.aTypedArray,g=c.exportTypedArrayMethod,m=n.Uint16Array,_=m&&r(m.prototype.sort),v=!!_&&!(o((function(){_(new m(2),null)}))&&o((function(){_(new m(2),{})}))),E=!!_&&!o((function(){if(d)return d<74;if(l)return l<67;if(u)return!0;if(h)return h<602;var e,t,i=new m(516),n=p(516);for(e=0;e<516;e++)t=e%4,i[e]=515-e,n[e]=e-2*t+3;for(_(i,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(i[e]!==n[e])return!0})),A=function(e){return function(t,i){return void 0!==e?+e(t,i)||0:i!==i?-1:t!==t?1:0===t&&0===i?1/t>0&&1/i<0?1:-1:t>i}};g("sort",(function(e){return void 0!==e&&s(e),E?_(this,e):a(f(this),A(e))}),!E||v)},2266:function(e,t,i){var n=i("da84"),r=i("0366"),o=i("c65b"),s=i("825a"),a=i("0d51"),c=i("e95a"),l=i("07fa"),u=i("3a9b"),d=i("9a1f"),h=i("35a1"),p=i("2a62"),f=n.TypeError,g=function(e,t){this.stopped=e,this.result=t},m=g.prototype;e.exports=function(e,t,i){var n,_,v,E,A,y,S,C=i&&i.that,b=!(!i||!i.AS_ENTRIES),T=!(!i||!i.IS_ITERATOR),I=!(!i||!i.INTERRUPTED),R=r(t,C),w=function(e){return n&&p(n,"normal",e),new g(!0,e)},O=function(e){return b?(s(e),I?R(e[0],e[1],w):R(e[0],e[1])):I?R(e,w):R(e)};if(T)n=e;else{if(_=h(e),!_)throw f(a(e)+" is not iterable");if(c(_)){for(v=0,E=l(e);E>v;v++)if(A=O(e[v]),A&&u(m,A))return A;return new g(!1)}n=d(e,_)}y=n.next;while(!(S=o(y,n)).done){try{A=O(S.value)}catch(k){p(n,"throw",k)}if("object"==typeof A&&A&&u(m,A))return A}return new g(!1)}},"23cb":function(e,t,i){var n=i("5926"),r=Math.max,o=Math.min;e.exports=function(e,t){var i=n(e);return i<0?r(i+t,0):o(i,t)}},"23e7":function(e,t,i){var n=i("da84"),r=i("06cf").f,o=i("9112"),s=i("6eeb"),a=i("ce4e"),c=i("e893"),l=i("94ca");e.exports=function(e,t){var i,u,d,h,p,f,g=e.target,m=e.global,_=e.stat;if(u=m?n:_?n[g]||a(g,{}):(n[g]||{}).prototype,u)for(d in t){if(p=t[d],e.noTargetGet?(f=r(u,d),h=f&&f.value):h=u[d],i=l(m?d:g+(_?".":"#")+d,e.forced),!i&&void 0!==h){if(typeof p==typeof h)continue;c(p,h)}(e.sham||h&&h.sham)&&o(p,"sham",!0),s(u,d,p,e)}}},"241c":function(e,t,i){var n=i("ca84"),r=i("7839"),o=r.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},2444:function(e,t,i){"use strict";(function(t){var n=i("c532"),r=i("c8af"),o=i("387f"),s={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function c(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=i("b50d")),e}function l(e,t,i){if(n.isString(e))try{return(t||JSON.parse)(e),n.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(i||JSON.stringify)(e)}var u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:c(),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)||t&&"application/json"===t["Content-Type"]?(a(t,"application/json"),l(e)):e}],transformResponse:[function(e){var t=this.transitional||u.transitional,i=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,s=!i&&"json"===this.responseType;if(s||r&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(s){if("SyntaxError"===a.name)throw o(a,this,"E_JSON_PARSE");throw a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){u.headers[e]=n.merge(s)})),e.exports=u}).call(this,i("4362"))},2532:function(e,t,i){"use strict";var n=i("23e7"),r=i("e330"),o=i("5a34"),s=i("1d80"),a=i("577e"),c=i("ab13"),l=r("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~l(a(s(this)),a(o(e)),arguments.length>1?arguments[1]:void 0)}})},"25a1":function(e,t,i){"use strict";var n=i("ebb5"),r=i("d58f").right,o=n.aTypedArray,s=n.exportTypedArrayMethod;s("reduceRight",(function(e){var t=arguments.length;return r(o(this),e,t,t>1?arguments[1]:void 0)}))},"25eb":function(e,t,i){var n=i("23e7"),r=i("c20d");n({target:"Number",stat:!0,forced:Number.parseInt!=r},{parseInt:r})},"25f0":function(e,t,i){"use strict";var n=i("e330"),r=i("5e77").PROPER,o=i("6eeb"),s=i("825a"),a=i("3a9b"),c=i("577e"),l=i("d039"),u=i("ad6d"),d="toString",h=RegExp.prototype,p=h[d],f=n(u),g=l((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),m=r&&p.name!=d;(g||m)&&o(RegExp.prototype,d,(function(){var e=s(this),t=c(e.source),i=e.flags,n=c(void 0===i&&a(h,e)&&!("flags"in h)?f(e):i);return"/"+t+"/"+n}),{unsafe:!0})},2626:function(e,t,i){"use strict";var n=i("d066"),r=i("9bf2"),o=i("b622"),s=i("83ab"),a=o("species");e.exports=function(e){var t=n(e),i=r.f;s&&t&&!t[a]&&i(t,a,{configurable:!0,get:function(){return this}})}},"262e":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));i("d9e2");function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}},"26dd":function(e,t,i){"use strict";var n=i("6f4f"),r=i("10db"),o=i("92f0"),s={};i("051b")(s,i("cc15")("iterator"),(function(){return this})),e.exports=function(e,t,i){e.prototype=n(s,{next:r(1,i)}),o(e,t+" Iterator")}},2877:function(e,t,i){"use strict";function n(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},2954:function(e,t,i){"use strict";var n=i("ebb5"),r=i("b6b7"),o=i("d039"),s=i("f36a"),a=n.aTypedArray,c=n.exportTypedArrayMethod,l=o((function(){new Int8Array(1).slice()}));c("slice",(function(e,t){var i=s(a(this),e,t),n=r(this),o=0,c=i.length,l=new n(c);while(c>o)l[o]=i[o++];return l}),l)},"299c":function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=140)}({140:function(e,t,i){"use strict";i.r(t);var n=i(5),r=i.n(n),o=i(18),s=i.n(o),a=i(2),c=i(3),l=i(7),u=i.n(l),d={name:"ElTooltip",mixins:[r.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0},tabindex:{type:Number,default:0}},data:function(){return{tooltipId:"el-tooltip-"+Object(c["generateId"])(),timeoutPending:null,focusing:!1}},beforeCreate:function(){var e=this;this.$isServer||(this.popperVM=new u.a({data:{node:""},render:function(e){return this.node}}).$mount(),this.debounceClose=s()(200,(function(){return e.handleClosePopper()})))},render:function(e){var t=this;this.popperVM&&(this.popperVM.node=e("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[e("div",{on:{mouseleave:function(){t.setExpectedState(!1),t.debounceClose()},mouseenter:function(){t.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])]));var i=this.getFirstElement();if(!i)return null;var n=i.data=i.data||{};return n.staticClass=this.addTooltipClass(n.staticClass),i},mounted:function(){var e=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",this.tabindex),Object(a["on"])(this.referenceElm,"mouseenter",this.show),Object(a["on"])(this.referenceElm,"mouseleave",this.hide),Object(a["on"])(this.referenceElm,"focus",(function(){if(e.$slots.default&&e.$slots.default.length){var t=e.$slots.default[0].componentInstance;t&&t.focus?t.focus():e.handleFocus()}else e.handleFocus()})),Object(a["on"])(this.referenceElm,"blur",this.handleBlur),Object(a["on"])(this.referenceElm,"click",this.removeFocusing)),this.value&&this.popperVM&&this.popperVM.$nextTick((function(){e.value&&e.updatePopper()}))},watch:{focusing:function(e){e?Object(a["addClass"])(this.referenceElm,"focusing"):Object(a["removeClass"])(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},addTooltipClass:function(e){return e?"el-tooltip "+e.replace("el-tooltip",""):"el-tooltip"},handleShowPopper:function(){var e=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.showPopper=!0}),this.openDelay),this.hideAfter>0&&(this.timeoutPending=setTimeout((function(){e.showPopper=!1}),this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(e){!1===e&&clearTimeout(this.timeoutPending),this.expectedState=e},getFirstElement:function(){var e=this.$slots.default;if(!Array.isArray(e))return null;for(var t=null,i=0;i<e.length;i++)e[i]&&e[i].tag&&(t=e[i]);return t}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var e=this.referenceElm;1===e.nodeType&&(Object(a["off"])(e,"mouseenter",this.show),Object(a["off"])(e,"mouseleave",this.hide),Object(a["off"])(e,"focus",this.handleFocus),Object(a["off"])(e,"blur",this.handleBlur),Object(a["off"])(e,"click",this.removeFocusing))},install:function(e){e.component(d.name,d)}};t["default"]=d},18:function(e,t){e.exports=i("0e15")},2:function(e,t){e.exports=i("5924")},3:function(e,t){e.exports=i("8122")},5:function(e,t){e.exports=i("e974")},7:function(e,t){e.exports=i("2b0e")}})},"2a5e":function(e,t,i){"use strict";t.__esModule=!0,t.default=s;var n=i("2b0e"),r=o(n);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!r.default.prototype.$isServer)if(t){var i=[],n=t.offsetParent;while(n&&e!==n&&e.contains(n))i.push(n),n=n.offsetParent;var o=t.offsetTop+i.reduce((function(e,t){return e+t.offsetTop}),0),s=o+t.offsetHeight,a=e.scrollTop,c=a+e.clientHeight;o<a?e.scrollTop=o:s>c&&(e.scrollTop=s-e.clientHeight)}else e.scrollTop=0}},"2a62":function(e,t,i){var n=i("c65b"),r=i("825a"),o=i("dc4a");e.exports=function(e,t,i){var s,a;r(e);try{if(s=o(e,"return"),!s){if("throw"===t)throw i;return i}s=n(s,e)}catch(c){a=!0,s=c}if("throw"===t)throw i;if(a)throw s;return r(s),i}},"2b0e":function(e,t,i){"use strict";i.r(t),function(e){
/*!
 * Vue.js v2.6.14
 * (c) 2014-2021 Evan You
 * Released under the MIT License.
 */
var i=Object.freeze({});function n(e){return void 0===e||null===e}function r(e){return void 0!==e&&null!==e}function o(e){return!0===e}function s(e){return!1===e}function a(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function c(e){return null!==e&&"object"===typeof e}var l=Object.prototype.toString;function u(e){return"[object Object]"===l.call(e)}function d(e){return"[object RegExp]"===l.call(e)}function h(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function p(e){return r(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function f(e){return null==e?"":Array.isArray(e)||u(e)&&e.toString===l?JSON.stringify(e,null,2):String(e)}function g(e){var t=parseFloat(e);return isNaN(t)?e:t}function m(e,t){for(var i=Object.create(null),n=e.split(","),r=0;r<n.length;r++)i[n[r]]=!0;return t?function(e){return i[e.toLowerCase()]}:function(e){return i[e]}}m("slot,component",!0);var _=m("key,ref,slot,slot-scope,is");function v(e,t){if(e.length){var i=e.indexOf(t);if(i>-1)return e.splice(i,1)}}var E=Object.prototype.hasOwnProperty;function A(e,t){return E.call(e,t)}function y(e){var t=Object.create(null);return function(i){var n=t[i];return n||(t[i]=e(i))}}var S=/-(\w)/g,C=y((function(e){return e.replace(S,(function(e,t){return t?t.toUpperCase():""}))})),b=y((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),T=/\B([A-Z])/g,I=y((function(e){return e.replace(T,"-$1").toLowerCase()}));function R(e,t){function i(i){var n=arguments.length;return n?n>1?e.apply(t,arguments):e.call(t,i):e.call(t)}return i._length=e.length,i}function w(e,t){return e.bind(t)}var O=Function.prototype.bind?w:R;function k(e,t){t=t||0;var i=e.length-t,n=new Array(i);while(i--)n[i]=e[i+t];return n}function N(e,t){for(var i in t)e[i]=t[i];return e}function L(e){for(var t={},i=0;i<e.length;i++)e[i]&&N(t,e[i]);return t}function P(e,t,i){}var D=function(e,t,i){return!1},M=function(e){return e};function x(e,t){if(e===t)return!0;var i=c(e),n=c(t);if(!i||!n)return!i&&!n&&String(e)===String(t);try{var r=Array.isArray(e),o=Array.isArray(t);if(r&&o)return e.length===t.length&&e.every((function(e,i){return x(e,t[i])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(r||o)return!1;var s=Object.keys(e),a=Object.keys(t);return s.length===a.length&&s.every((function(i){return x(e[i],t[i])}))}catch(l){return!1}}function B(e,t){for(var i=0;i<e.length;i++)if(x(e[i],t))return i;return-1}function U(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var F="data-server-rendered",V=["component","directive","filter"],j=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],G={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:D,isReservedAttr:D,isUnknownElement:D,getTagNamespace:P,parsePlatformTagName:M,mustUseProp:D,async:!0,_lifecycleHooks:j},H=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function Q(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function W(e,t,i,n){Object.defineProperty(e,t,{value:i,enumerable:!!n,writable:!0,configurable:!0})}var q=new RegExp("[^"+H.source+".$_\\d]");function $(e){if(!q.test(e)){var t=e.split(".");return function(e){for(var i=0;i<t.length;i++){if(!e)return;e=e[t[i]]}return e}}}var z,Z="__proto__"in{},Y="undefined"!==typeof window,K="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,J=K&&WXEnvironment.platform.toLowerCase(),X=Y&&window.navigator.userAgent.toLowerCase(),ee=X&&/msie|trident/.test(X),te=X&&X.indexOf("msie 9.0")>0,ie=X&&X.indexOf("edge/")>0,ne=(X&&X.indexOf("android"),X&&/iphone|ipad|ipod|ios/.test(X)||"ios"===J),re=(X&&/chrome\/\d+/.test(X),X&&/phantomjs/.test(X),X&&X.match(/firefox\/(\d+)/)),oe={}.watch,se=!1;if(Y)try{var ae={};Object.defineProperty(ae,"passive",{get:function(){se=!0}}),window.addEventListener("test-passive",null,ae)}catch(bs){}var ce=function(){return void 0===z&&(z=!Y&&!K&&"undefined"!==typeof e&&(e["process"]&&"server"===e["process"].env.VUE_ENV)),z},le=Y&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ue(e){return"function"===typeof e&&/native code/.test(e.toString())}var de,he="undefined"!==typeof Symbol&&ue(Symbol)&&"undefined"!==typeof Reflect&&ue(Reflect.ownKeys);de="undefined"!==typeof Set&&ue(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var pe=P,fe=0,ge=function(){this.id=fe++,this.subs=[]};ge.prototype.addSub=function(e){this.subs.push(e)},ge.prototype.removeSub=function(e){v(this.subs,e)},ge.prototype.depend=function(){ge.target&&ge.target.addDep(this)},ge.prototype.notify=function(){var e=this.subs.slice();for(var t=0,i=e.length;t<i;t++)e[t].update()},ge.target=null;var me=[];function _e(e){me.push(e),ge.target=e}function ve(){me.pop(),ge.target=me[me.length-1]}var Ee=function(e,t,i,n,r,o,s,a){this.tag=e,this.data=t,this.children=i,this.text=n,this.elm=r,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Ae={child:{configurable:!0}};Ae.child.get=function(){return this.componentInstance},Object.defineProperties(Ee.prototype,Ae);var ye=function(e){void 0===e&&(e="");var t=new Ee;return t.text=e,t.isComment=!0,t};function Se(e){return new Ee(void 0,void 0,void 0,String(e))}function Ce(e){var t=new Ee(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var be=Array.prototype,Te=Object.create(be),Ie=["push","pop","shift","unshift","splice","sort","reverse"];Ie.forEach((function(e){var t=be[e];W(Te,e,(function(){var i=[],n=arguments.length;while(n--)i[n]=arguments[n];var r,o=t.apply(this,i),s=this.__ob__;switch(e){case"push":case"unshift":r=i;break;case"splice":r=i.slice(2);break}return r&&s.observeArray(r),s.dep.notify(),o}))}));var Re=Object.getOwnPropertyNames(Te),we=!0;function Oe(e){we=e}var ke=function(e){this.value=e,this.dep=new ge,this.vmCount=0,W(e,"__ob__",this),Array.isArray(e)?(Z?Ne(e,Te):Le(e,Te,Re),this.observeArray(e)):this.walk(e)};function Ne(e,t){e.__proto__=t}function Le(e,t,i){for(var n=0,r=i.length;n<r;n++){var o=i[n];W(e,o,t[o])}}function Pe(e,t){var i;if(c(e)&&!(e instanceof Ee))return A(e,"__ob__")&&e.__ob__ instanceof ke?i=e.__ob__:we&&!ce()&&(Array.isArray(e)||u(e))&&Object.isExtensible(e)&&!e._isVue&&(i=new ke(e)),t&&i&&i.vmCount++,i}function De(e,t,i,n,r){var o=new ge,s=Object.getOwnPropertyDescriptor(e,t);if(!s||!1!==s.configurable){var a=s&&s.get,c=s&&s.set;a&&!c||2!==arguments.length||(i=e[t]);var l=!r&&Pe(i);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=a?a.call(e):i;return ge.target&&(o.depend(),l&&(l.dep.depend(),Array.isArray(t)&&Be(t))),t},set:function(t){var n=a?a.call(e):i;t===n||t!==t&&n!==n||a&&!c||(c?c.call(e,t):i=t,l=!r&&Pe(t),o.notify())}})}}function Me(e,t,i){if(Array.isArray(e)&&h(t))return e.length=Math.max(e.length,t),e.splice(t,1,i),i;if(t in e&&!(t in Object.prototype))return e[t]=i,i;var n=e.__ob__;return e._isVue||n&&n.vmCount?i:n?(De(n.value,t,i),n.dep.notify(),i):(e[t]=i,i)}function xe(e,t){if(Array.isArray(e)&&h(t))e.splice(t,1);else{var i=e.__ob__;e._isVue||i&&i.vmCount||A(e,t)&&(delete e[t],i&&i.dep.notify())}}function Be(e){for(var t=void 0,i=0,n=e.length;i<n;i++)t=e[i],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Be(t)}ke.prototype.walk=function(e){for(var t=Object.keys(e),i=0;i<t.length;i++)De(e,t[i])},ke.prototype.observeArray=function(e){for(var t=0,i=e.length;t<i;t++)Pe(e[t])};var Ue=G.optionMergeStrategies;function Fe(e,t){if(!t)return e;for(var i,n,r,o=he?Reflect.ownKeys(t):Object.keys(t),s=0;s<o.length;s++)i=o[s],"__ob__"!==i&&(n=e[i],r=t[i],A(e,i)?n!==r&&u(n)&&u(r)&&Fe(n,r):Me(e,i,r));return e}function Ve(e,t,i){return i?function(){var n="function"===typeof t?t.call(i,i):t,r="function"===typeof e?e.call(i,i):e;return n?Fe(n,r):r}:t?e?function(){return Fe("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function je(e,t){var i=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return i?Ge(i):i}function Ge(e){for(var t=[],i=0;i<e.length;i++)-1===t.indexOf(e[i])&&t.push(e[i]);return t}function He(e,t,i,n){var r=Object.create(e||null);return t?N(r,t):r}Ue.data=function(e,t,i){return i?Ve(e,t,i):t&&"function"!==typeof t?e:Ve(e,t)},j.forEach((function(e){Ue[e]=je})),V.forEach((function(e){Ue[e+"s"]=He})),Ue.watch=function(e,t,i,n){if(e===oe&&(e=void 0),t===oe&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var r={};for(var o in N(r,e),t){var s=r[o],a=t[o];s&&!Array.isArray(s)&&(s=[s]),r[o]=s?s.concat(a):Array.isArray(a)?a:[a]}return r},Ue.props=Ue.methods=Ue.inject=Ue.computed=function(e,t,i,n){if(!e)return t;var r=Object.create(null);return N(r,e),t&&N(r,t),r},Ue.provide=Ve;var Qe=function(e,t){return void 0===t?e:t};function We(e,t){var i=e.props;if(i){var n,r,o,s={};if(Array.isArray(i)){n=i.length;while(n--)r=i[n],"string"===typeof r&&(o=C(r),s[o]={type:null})}else if(u(i))for(var a in i)r=i[a],o=C(a),s[o]=u(r)?r:{type:r};else 0;e.props=s}}function qe(e,t){var i=e.inject;if(i){var n=e.inject={};if(Array.isArray(i))for(var r=0;r<i.length;r++)n[i[r]]={from:i[r]};else if(u(i))for(var o in i){var s=i[o];n[o]=u(s)?N({from:o},s):{from:s}}else 0}}function $e(e){var t=e.directives;if(t)for(var i in t){var n=t[i];"function"===typeof n&&(t[i]={bind:n,update:n})}}function ze(e,t,i){if("function"===typeof t&&(t=t.options),We(t,i),qe(t,i),$e(t),!t._base&&(t.extends&&(e=ze(e,t.extends,i)),t.mixins))for(var n=0,r=t.mixins.length;n<r;n++)e=ze(e,t.mixins[n],i);var o,s={};for(o in e)a(o);for(o in t)A(e,o)||a(o);function a(n){var r=Ue[n]||Qe;s[n]=r(e[n],t[n],i,n)}return s}function Ze(e,t,i,n){if("string"===typeof i){var r=e[t];if(A(r,i))return r[i];var o=C(i);if(A(r,o))return r[o];var s=b(o);if(A(r,s))return r[s];var a=r[i]||r[o]||r[s];return a}}function Ye(e,t,i,n){var r=t[e],o=!A(i,e),s=i[e],a=tt(Boolean,r.type);if(a>-1)if(o&&!A(r,"default"))s=!1;else if(""===s||s===I(e)){var c=tt(String,r.type);(c<0||a<c)&&(s=!0)}if(void 0===s){s=Ke(n,r,e);var l=we;Oe(!0),Pe(s),Oe(l)}return s}function Ke(e,t,i){if(A(t,"default")){var n=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[i]&&void 0!==e._props[i]?e._props[i]:"function"===typeof n&&"Function"!==Xe(t.type)?n.call(e):n}}var Je=/^\s*function (\w+)/;function Xe(e){var t=e&&e.toString().match(Je);return t?t[1]:""}function et(e,t){return Xe(e)===Xe(t)}function tt(e,t){if(!Array.isArray(t))return et(t,e)?0:-1;for(var i=0,n=t.length;i<n;i++)if(et(t[i],e))return i;return-1}function it(e,t,i){_e();try{if(t){var n=t;while(n=n.$parent){var r=n.$options.errorCaptured;if(r)for(var o=0;o<r.length;o++)try{var s=!1===r[o].call(n,e,t,i);if(s)return}catch(bs){rt(bs,n,"errorCaptured hook")}}}rt(e,t,i)}finally{ve()}}function nt(e,t,i,n,r){var o;try{o=i?e.apply(t,i):e.call(t),o&&!o._isVue&&p(o)&&!o._handled&&(o.catch((function(e){return it(e,n,r+" (Promise/async)")})),o._handled=!0)}catch(bs){it(bs,n,r)}return o}function rt(e,t,i){if(G.errorHandler)try{return G.errorHandler.call(null,e,t,i)}catch(bs){bs!==e&&ot(bs,null,"config.errorHandler")}ot(e,t,i)}function ot(e,t,i){if(!Y&&!K||"undefined"===typeof console)throw e;console.error(e)}var st,at=!1,ct=[],lt=!1;function ut(){lt=!1;var e=ct.slice(0);ct.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&ue(Promise)){var dt=Promise.resolve();st=function(){dt.then(ut),ne&&setTimeout(P)},at=!0}else if(ee||"undefined"===typeof MutationObserver||!ue(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())st="undefined"!==typeof setImmediate&&ue(setImmediate)?function(){setImmediate(ut)}:function(){setTimeout(ut,0)};else{var ht=1,pt=new MutationObserver(ut),ft=document.createTextNode(String(ht));pt.observe(ft,{characterData:!0}),st=function(){ht=(ht+1)%2,ft.data=String(ht)},at=!0}function gt(e,t){var i;if(ct.push((function(){if(e)try{e.call(t)}catch(bs){it(bs,t,"nextTick")}else i&&i(t)})),lt||(lt=!0,st()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){i=e}))}var mt=new de;function _t(e){vt(e,mt),mt.clear()}function vt(e,t){var i,n,r=Array.isArray(e);if(!(!r&&!c(e)||Object.isFrozen(e)||e instanceof Ee)){if(e.__ob__){var o=e.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(r){i=e.length;while(i--)vt(e[i],t)}else{n=Object.keys(e),i=n.length;while(i--)vt(e[n[i]],t)}}}var Et=y((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var i="~"===e.charAt(0);e=i?e.slice(1):e;var n="!"===e.charAt(0);return e=n?e.slice(1):e,{name:e,once:i,capture:n,passive:t}}));function At(e,t){function i(){var e=arguments,n=i.fns;if(!Array.isArray(n))return nt(n,null,arguments,t,"v-on handler");for(var r=n.slice(),o=0;o<r.length;o++)nt(r[o],null,e,t,"v-on handler")}return i.fns=e,i}function yt(e,t,i,r,s,a){var c,l,u,d;for(c in e)l=e[c],u=t[c],d=Et(c),n(l)||(n(u)?(n(l.fns)&&(l=e[c]=At(l,a)),o(d.once)&&(l=e[c]=s(d.name,l,d.capture)),i(d.name,l,d.capture,d.passive,d.params)):l!==u&&(u.fns=l,e[c]=u));for(c in t)n(e[c])&&(d=Et(c),r(d.name,t[c],d.capture))}function St(e,t,i){var s;e instanceof Ee&&(e=e.data.hook||(e.data.hook={}));var a=e[t];function c(){i.apply(this,arguments),v(s.fns,c)}n(a)?s=At([c]):r(a.fns)&&o(a.merged)?(s=a,s.fns.push(c)):s=At([a,c]),s.merged=!0,e[t]=s}function Ct(e,t,i){var o=t.options.props;if(!n(o)){var s={},a=e.attrs,c=e.props;if(r(a)||r(c))for(var l in o){var u=I(l);bt(s,c,l,u,!0)||bt(s,a,l,u,!1)}return s}}function bt(e,t,i,n,o){if(r(t)){if(A(t,i))return e[i]=t[i],o||delete t[i],!0;if(A(t,n))return e[i]=t[n],o||delete t[n],!0}return!1}function Tt(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function It(e){return a(e)?[Se(e)]:Array.isArray(e)?wt(e):void 0}function Rt(e){return r(e)&&r(e.text)&&s(e.isComment)}function wt(e,t){var i,s,c,l,u=[];for(i=0;i<e.length;i++)s=e[i],n(s)||"boolean"===typeof s||(c=u.length-1,l=u[c],Array.isArray(s)?s.length>0&&(s=wt(s,(t||"")+"_"+i),Rt(s[0])&&Rt(l)&&(u[c]=Se(l.text+s[0].text),s.shift()),u.push.apply(u,s)):a(s)?Rt(l)?u[c]=Se(l.text+s):""!==s&&u.push(Se(s)):Rt(s)&&Rt(l)?u[c]=Se(l.text+s.text):(o(e._isVList)&&r(s.tag)&&n(s.key)&&r(t)&&(s.key="__vlist"+t+"_"+i+"__"),u.push(s)));return u}function Ot(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function kt(e){var t=Nt(e.$options.inject,e);t&&(Oe(!1),Object.keys(t).forEach((function(i){De(e,i,t[i])})),Oe(!0))}function Nt(e,t){if(e){for(var i=Object.create(null),n=he?Reflect.ownKeys(e):Object.keys(e),r=0;r<n.length;r++){var o=n[r];if("__ob__"!==o){var s=e[o].from,a=t;while(a){if(a._provided&&A(a._provided,s)){i[o]=a._provided[s];break}a=a.$parent}if(!a)if("default"in e[o]){var c=e[o].default;i[o]="function"===typeof c?c.call(t):c}else 0}}return i}}function Lt(e,t){if(!e||!e.length)return{};for(var i={},n=0,r=e.length;n<r;n++){var o=e[n],s=o.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,o.context!==t&&o.fnContext!==t||!s||null==s.slot)(i.default||(i.default=[])).push(o);else{var a=s.slot,c=i[a]||(i[a]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var l in i)i[l].every(Pt)&&delete i[l];return i}function Pt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Dt(e){return e.isComment&&e.asyncFactory}function Mt(e,t,n){var r,o=Object.keys(t).length>0,s=e?!!e.$stable:!o,a=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&n&&n!==i&&a===n.$key&&!o&&!n.$hasNormal)return n;for(var c in r={},e)e[c]&&"$"!==c[0]&&(r[c]=xt(t,c,e[c]))}else r={};for(var l in t)l in r||(r[l]=Bt(t,l));return e&&Object.isExtensible(e)&&(e._normalized=r),W(r,"$stable",s),W(r,"$key",a),W(r,"$hasNormal",o),r}function xt(e,t,i){var n=function(){var e=arguments.length?i.apply(null,arguments):i({});e=e&&"object"===typeof e&&!Array.isArray(e)?[e]:It(e);var t=e&&e[0];return e&&(!t||1===e.length&&t.isComment&&!Dt(t))?void 0:e};return i.proxy&&Object.defineProperty(e,t,{get:n,enumerable:!0,configurable:!0}),n}function Bt(e,t){return function(){return e[t]}}function Ut(e,t){var i,n,o,s,a;if(Array.isArray(e)||"string"===typeof e)for(i=new Array(e.length),n=0,o=e.length;n<o;n++)i[n]=t(e[n],n);else if("number"===typeof e)for(i=new Array(e),n=0;n<e;n++)i[n]=t(n+1,n);else if(c(e))if(he&&e[Symbol.iterator]){i=[];var l=e[Symbol.iterator](),u=l.next();while(!u.done)i.push(t(u.value,i.length)),u=l.next()}else for(s=Object.keys(e),i=new Array(s.length),n=0,o=s.length;n<o;n++)a=s[n],i[n]=t(e[a],a,n);return r(i)||(i=[]),i._isVList=!0,i}function Ft(e,t,i,n){var r,o=this.$scopedSlots[e];o?(i=i||{},n&&(i=N(N({},n),i)),r=o(i)||("function"===typeof t?t():t)):r=this.$slots[e]||("function"===typeof t?t():t);var s=i&&i.slot;return s?this.$createElement("template",{slot:s},r):r}function Vt(e){return Ze(this.$options,"filters",e,!0)||M}function jt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Gt(e,t,i,n,r){var o=G.keyCodes[t]||i;return r&&n&&!G.keyCodes[t]?jt(r,n):o?jt(o,e):n?I(n)!==t:void 0===e}function Ht(e,t,i,n,r){if(i)if(c(i)){var o;Array.isArray(i)&&(i=L(i));var s=function(s){if("class"===s||"style"===s||_(s))o=e;else{var a=e.attrs&&e.attrs.type;o=n||G.mustUseProp(t,a,s)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=C(s),l=I(s);if(!(c in o)&&!(l in o)&&(o[s]=i[s],r)){var u=e.on||(e.on={});u["update:"+s]=function(e){i[s]=e}}};for(var a in i)s(a)}else;return e}function Qt(e,t){var i=this._staticTrees||(this._staticTrees=[]),n=i[e];return n&&!t||(n=i[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),qt(n,"__static__"+e,!1)),n}function Wt(e,t,i){return qt(e,"__once__"+t+(i?"_"+i:""),!0),e}function qt(e,t,i){if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]&&"string"!==typeof e[n]&&$t(e[n],t+"_"+n,i);else $t(e,t,i)}function $t(e,t,i){e.isStatic=!0,e.key=t,e.isOnce=i}function zt(e,t){if(t)if(u(t)){var i=e.on=e.on?N({},e.on):{};for(var n in t){var r=i[n],o=t[n];i[n]=r?[].concat(r,o):o}}else;return e}function Zt(e,t,i,n){t=t||{$stable:!i};for(var r=0;r<e.length;r++){var o=e[r];Array.isArray(o)?Zt(o,t,i):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return n&&(t.$key=n),t}function Yt(e,t){for(var i=0;i<t.length;i+=2){var n=t[i];"string"===typeof n&&n&&(e[t[i]]=t[i+1])}return e}function Kt(e,t){return"string"===typeof e?t+e:e}function Jt(e){e._o=Wt,e._n=g,e._s=f,e._l=Ut,e._t=Ft,e._q=x,e._i=B,e._m=Qt,e._f=Vt,e._k=Gt,e._b=Ht,e._v=Se,e._e=ye,e._u=Zt,e._g=zt,e._d=Yt,e._p=Kt}function Xt(e,t,n,r,s){var a,c=this,l=s.options;A(r,"_uid")?(a=Object.create(r),a._original=r):(a=r,r=r._original);var u=o(l._compiled),d=!u;this.data=e,this.props=t,this.children=n,this.parent=r,this.listeners=e.on||i,this.injections=Nt(l.inject,r),this.slots=function(){return c.$slots||Mt(e.scopedSlots,c.$slots=Lt(n,r)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Mt(e.scopedSlots,this.slots())}}),u&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=Mt(e.scopedSlots,this.$slots)),l._scopeId?this._c=function(e,t,i,n){var o=hi(a,e,t,i,n,d);return o&&!Array.isArray(o)&&(o.fnScopeId=l._scopeId,o.fnContext=r),o}:this._c=function(e,t,i,n){return hi(a,e,t,i,n,d)}}function ei(e,t,n,o,s){var a=e.options,c={},l=a.props;if(r(l))for(var u in l)c[u]=Ye(u,l,t||i);else r(n.attrs)&&ii(c,n.attrs),r(n.props)&&ii(c,n.props);var d=new Xt(n,c,s,o,e),h=a.render.call(null,d._c,d);if(h instanceof Ee)return ti(h,n,d.parent,a,d);if(Array.isArray(h)){for(var p=It(h)||[],f=new Array(p.length),g=0;g<p.length;g++)f[g]=ti(p[g],n,d.parent,a,d);return f}}function ti(e,t,i,n,r){var o=Ce(e);return o.fnContext=i,o.fnOptions=n,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function ii(e,t){for(var i in t)e[C(i)]=t[i]}Jt(Xt.prototype);var ni={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var i=e;ni.prepatch(i,i)}else{var n=e.componentInstance=si(e,ki);n.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var i=t.componentOptions,n=t.componentInstance=e.componentInstance;Mi(n,i.propsData,i.listeners,t,i.children)},insert:function(e){var t=e.context,i=e.componentInstance;i._isMounted||(i._isMounted=!0,Fi(i,"mounted")),e.data.keepAlive&&(t._isMounted?Ji(i):Bi(i,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Ui(t,!0):t.$destroy())}},ri=Object.keys(ni);function oi(e,t,i,s,a){if(!n(e)){var l=i.$options._base;if(c(e)&&(e=l.extend(e)),"function"===typeof e){var u;if(n(e.cid)&&(u=e,e=Si(u,l),void 0===e))return yi(u,t,i,s,a);t=t||{},Sn(e),r(t.model)&&li(e.options,t);var d=Ct(t,e,a);if(o(e.options.functional))return ei(e,d,t,i,s);var h=t.on;if(t.on=t.nativeOn,o(e.options.abstract)){var p=t.slot;t={},p&&(t.slot=p)}ai(t);var f=e.options.name||a,g=new Ee("vue-component-"+e.cid+(f?"-"+f:""),t,void 0,void 0,void 0,i,{Ctor:e,propsData:d,listeners:h,tag:a,children:s},u);return g}}}function si(e,t){var i={_isComponent:!0,_parentVnode:e,parent:t},n=e.data.inlineTemplate;return r(n)&&(i.render=n.render,i.staticRenderFns=n.staticRenderFns),new e.componentOptions.Ctor(i)}function ai(e){for(var t=e.hook||(e.hook={}),i=0;i<ri.length;i++){var n=ri[i],r=t[n],o=ni[n];r===o||r&&r._merged||(t[n]=r?ci(o,r):o)}}function ci(e,t){var i=function(i,n){e(i,n),t(i,n)};return i._merged=!0,i}function li(e,t){var i=e.model&&e.model.prop||"value",n=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[i]=t.model.value;var o=t.on||(t.on={}),s=o[n],a=t.model.callback;r(s)?(Array.isArray(s)?-1===s.indexOf(a):s!==a)&&(o[n]=[a].concat(s)):o[n]=a}var ui=1,di=2;function hi(e,t,i,n,r,s){return(Array.isArray(i)||a(i))&&(r=n,n=i,i=void 0),o(s)&&(r=di),pi(e,t,i,n,r)}function pi(e,t,i,n,o){if(r(i)&&r(i.__ob__))return ye();if(r(i)&&r(i.is)&&(t=i.is),!t)return ye();var s,a,c;(Array.isArray(n)&&"function"===typeof n[0]&&(i=i||{},i.scopedSlots={default:n[0]},n.length=0),o===di?n=It(n):o===ui&&(n=Tt(n)),"string"===typeof t)?(a=e.$vnode&&e.$vnode.ns||G.getTagNamespace(t),s=G.isReservedTag(t)?new Ee(G.parsePlatformTagName(t),i,n,void 0,void 0,e):i&&i.pre||!r(c=Ze(e.$options,"components",t))?new Ee(t,i,n,void 0,void 0,e):oi(c,i,e,n,t)):s=oi(t,i,e,n);return Array.isArray(s)?s:r(s)?(r(a)&&fi(s,a),r(i)&&gi(i),s):ye()}function fi(e,t,i){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,i=!0),r(e.children))for(var s=0,a=e.children.length;s<a;s++){var c=e.children[s];r(c.tag)&&(n(c.ns)||o(i)&&"svg"!==c.tag)&&fi(c,t,i)}}function gi(e){c(e.style)&&_t(e.style),c(e.class)&&_t(e.class)}function mi(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,r=n&&n.context;e.$slots=Lt(t._renderChildren,r),e.$scopedSlots=i,e._c=function(t,i,n,r){return hi(e,t,i,n,r,!1)},e.$createElement=function(t,i,n,r){return hi(e,t,i,n,r,!0)};var o=n&&n.data;De(e,"$attrs",o&&o.attrs||i,null,!0),De(e,"$listeners",t._parentListeners||i,null,!0)}var _i,vi=null;function Ei(e){Jt(e.prototype),e.prototype.$nextTick=function(e){return gt(e,this)},e.prototype._render=function(){var e,t=this,i=t.$options,n=i.render,r=i._parentVnode;r&&(t.$scopedSlots=Mt(r.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=r;try{vi=t,e=n.call(t._renderProxy,t.$createElement)}catch(bs){it(bs,t,"render"),e=t._vnode}finally{vi=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof Ee||(e=ye()),e.parent=r,e}}function Ai(e,t){return(e.__esModule||he&&"Module"===e[Symbol.toStringTag])&&(e=e.default),c(e)?t.extend(e):e}function yi(e,t,i,n,r){var o=ye();return o.asyncFactory=e,o.asyncMeta={data:t,context:i,children:n,tag:r},o}function Si(e,t){if(o(e.error)&&r(e.errorComp))return e.errorComp;if(r(e.resolved))return e.resolved;var i=vi;if(i&&r(e.owners)&&-1===e.owners.indexOf(i)&&e.owners.push(i),o(e.loading)&&r(e.loadingComp))return e.loadingComp;if(i&&!r(e.owners)){var s=e.owners=[i],a=!0,l=null,u=null;i.$on("hook:destroyed",(function(){return v(s,i)}));var d=function(e){for(var t=0,i=s.length;t<i;t++)s[t].$forceUpdate();e&&(s.length=0,null!==l&&(clearTimeout(l),l=null),null!==u&&(clearTimeout(u),u=null))},h=U((function(i){e.resolved=Ai(i,t),a?s.length=0:d(!0)})),f=U((function(t){r(e.errorComp)&&(e.error=!0,d(!0))})),g=e(h,f);return c(g)&&(p(g)?n(e.resolved)&&g.then(h,f):p(g.component)&&(g.component.then(h,f),r(g.error)&&(e.errorComp=Ai(g.error,t)),r(g.loading)&&(e.loadingComp=Ai(g.loading,t),0===g.delay?e.loading=!0:l=setTimeout((function(){l=null,n(e.resolved)&&n(e.error)&&(e.loading=!0,d(!1))}),g.delay||200)),r(g.timeout)&&(u=setTimeout((function(){u=null,n(e.resolved)&&f(null)}),g.timeout)))),a=!1,e.loading?e.loadingComp:e.resolved}}function Ci(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var i=e[t];if(r(i)&&(r(i.componentOptions)||Dt(i)))return i}}function bi(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&wi(e,t)}function Ti(e,t){_i.$on(e,t)}function Ii(e,t){_i.$off(e,t)}function Ri(e,t){var i=_i;return function n(){var r=t.apply(null,arguments);null!==r&&i.$off(e,n)}}function wi(e,t,i){_i=e,yt(t,i||{},Ti,Ii,Ri,e),_i=void 0}function Oi(e){var t=/^hook:/;e.prototype.$on=function(e,i){var n=this;if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++)n.$on(e[r],i);else(n._events[e]||(n._events[e]=[])).push(i),t.test(e)&&(n._hasHookEvent=!0);return n},e.prototype.$once=function(e,t){var i=this;function n(){i.$off(e,n),t.apply(i,arguments)}return n.fn=t,i.$on(e,n),i},e.prototype.$off=function(e,t){var i=this;if(!arguments.length)return i._events=Object.create(null),i;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)i.$off(e[n],t);return i}var o,s=i._events[e];if(!s)return i;if(!t)return i._events[e]=null,i;var a=s.length;while(a--)if(o=s[a],o===t||o.fn===t){s.splice(a,1);break}return i},e.prototype.$emit=function(e){var t=this,i=t._events[e];if(i){i=i.length>1?k(i):i;for(var n=k(arguments,1),r='event handler for "'+e+'"',o=0,s=i.length;o<s;o++)nt(i[o],t,n,t,r)}return t}}var ki=null;function Ni(e){var t=ki;return ki=e,function(){ki=t}}function Li(e){var t=e.$options,i=t.parent;if(i&&!t.abstract){while(i.$options.abstract&&i.$parent)i=i.$parent;i.$children.push(e)}e.$parent=i,e.$root=i?i.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Pi(e){e.prototype._update=function(e,t){var i=this,n=i.$el,r=i._vnode,o=Ni(i);i._vnode=e,i.$el=r?i.__patch__(r,e):i.__patch__(i.$el,e,t,!1),o(),n&&(n.__vue__=null),i.$el&&(i.$el.__vue__=i),i.$vnode&&i.$parent&&i.$vnode===i.$parent._vnode&&(i.$parent.$el=i.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Fi(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||v(t.$children,e),e._watcher&&e._watcher.teardown();var i=e._watchers.length;while(i--)e._watchers[i].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Fi(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Di(e,t,i){var n;return e.$el=t,e.$options.render||(e.$options.render=ye),Fi(e,"beforeMount"),n=function(){e._update(e._render(),i)},new nn(e,n,P,{before:function(){e._isMounted&&!e._isDestroyed&&Fi(e,"beforeUpdate")}},!0),i=!1,null==e.$vnode&&(e._isMounted=!0,Fi(e,"mounted")),e}function Mi(e,t,n,r,o){var s=r.data.scopedSlots,a=e.$scopedSlots,c=!!(s&&!s.$stable||a!==i&&!a.$stable||s&&e.$scopedSlots.$key!==s.$key||!s&&e.$scopedSlots.$key),l=!!(o||e.$options._renderChildren||c);if(e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r),e.$options._renderChildren=o,e.$attrs=r.data.attrs||i,e.$listeners=n||i,t&&e.$options.props){Oe(!1);for(var u=e._props,d=e.$options._propKeys||[],h=0;h<d.length;h++){var p=d[h],f=e.$options.props;u[p]=Ye(p,f,t,e)}Oe(!0),e.$options.propsData=t}n=n||i;var g=e.$options._parentListeners;e.$options._parentListeners=n,wi(e,n,g),l&&(e.$slots=Lt(o,r.context),e.$forceUpdate())}function xi(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Bi(e,t){if(t){if(e._directInactive=!1,xi(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var i=0;i<e.$children.length;i++)Bi(e.$children[i]);Fi(e,"activated")}}function Ui(e,t){if((!t||(e._directInactive=!0,!xi(e)))&&!e._inactive){e._inactive=!0;for(var i=0;i<e.$children.length;i++)Ui(e.$children[i]);Fi(e,"deactivated")}}function Fi(e,t){_e();var i=e.$options[t],n=t+" hook";if(i)for(var r=0,o=i.length;r<o;r++)nt(i[r],e,null,e,n);e._hasHookEvent&&e.$emit("hook:"+t),ve()}var Vi=[],ji=[],Gi={},Hi=!1,Qi=!1,Wi=0;function qi(){Wi=Vi.length=ji.length=0,Gi={},Hi=Qi=!1}var $i=0,zi=Date.now;if(Y&&!ee){var Zi=window.performance;Zi&&"function"===typeof Zi.now&&zi()>document.createEvent("Event").timeStamp&&(zi=function(){return Zi.now()})}function Yi(){var e,t;for($i=zi(),Qi=!0,Vi.sort((function(e,t){return e.id-t.id})),Wi=0;Wi<Vi.length;Wi++)e=Vi[Wi],e.before&&e.before(),t=e.id,Gi[t]=null,e.run();var i=ji.slice(),n=Vi.slice();qi(),Xi(i),Ki(n),le&&G.devtools&&le.emit("flush")}function Ki(e){var t=e.length;while(t--){var i=e[t],n=i.vm;n._watcher===i&&n._isMounted&&!n._isDestroyed&&Fi(n,"updated")}}function Ji(e){e._inactive=!1,ji.push(e)}function Xi(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Bi(e[t],!0)}function en(e){var t=e.id;if(null==Gi[t]){if(Gi[t]=!0,Qi){var i=Vi.length-1;while(i>Wi&&Vi[i].id>e.id)i--;Vi.splice(i+1,0,e)}else Vi.push(e);Hi||(Hi=!0,gt(Yi))}}var tn=0,nn=function(e,t,i,n,r){this.vm=e,r&&(e._watcher=this),e._watchers.push(this),n?(this.deep=!!n.deep,this.user=!!n.user,this.lazy=!!n.lazy,this.sync=!!n.sync,this.before=n.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=i,this.id=++tn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new de,this.newDepIds=new de,this.expression="","function"===typeof t?this.getter=t:(this.getter=$(t),this.getter||(this.getter=P)),this.value=this.lazy?void 0:this.get()};nn.prototype.get=function(){var e;_e(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(bs){if(!this.user)throw bs;it(bs,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&_t(e),ve(),this.cleanupDeps()}return e},nn.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},nn.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var i=this.depIds;this.depIds=this.newDepIds,this.newDepIds=i,this.newDepIds.clear(),i=this.deps,this.deps=this.newDeps,this.newDeps=i,this.newDeps.length=0},nn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():en(this)},nn.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||c(e)||this.deep){var t=this.value;if(this.value=e,this.user){var i='callback for watcher "'+this.expression+'"';nt(this.cb,this.vm,[e,t],this.vm,i)}else this.cb.call(this.vm,e,t)}}},nn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},nn.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},nn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||v(this.vm._watchers,this);var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1}};var rn={enumerable:!0,configurable:!0,get:P,set:P};function on(e,t,i){rn.get=function(){return this[t][i]},rn.set=function(e){this[t][i]=e},Object.defineProperty(e,i,rn)}function sn(e){e._watchers=[];var t=e.$options;t.props&&an(e,t.props),t.methods&&gn(e,t.methods),t.data?cn(e):Pe(e._data={},!0),t.computed&&dn(e,t.computed),t.watch&&t.watch!==oe&&mn(e,t.watch)}function an(e,t){var i=e.$options.propsData||{},n=e._props={},r=e.$options._propKeys=[],o=!e.$parent;o||Oe(!1);var s=function(o){r.push(o);var s=Ye(o,t,i,e);De(n,o,s),o in e||on(e,"_props",o)};for(var a in t)s(a);Oe(!0)}function cn(e){var t=e.$options.data;t=e._data="function"===typeof t?ln(t,e):t||{},u(t)||(t={});var i=Object.keys(t),n=e.$options.props,r=(e.$options.methods,i.length);while(r--){var o=i[r];0,n&&A(n,o)||Q(o)||on(e,"_data",o)}Pe(t,!0)}function ln(e,t){_e();try{return e.call(t,t)}catch(bs){return it(bs,t,"data()"),{}}finally{ve()}}var un={lazy:!0};function dn(e,t){var i=e._computedWatchers=Object.create(null),n=ce();for(var r in t){var o=t[r],s="function"===typeof o?o:o.get;0,n||(i[r]=new nn(e,s||P,P,un)),r in e||hn(e,r,o)}}function hn(e,t,i){var n=!ce();"function"===typeof i?(rn.get=n?pn(t):fn(i),rn.set=P):(rn.get=i.get?n&&!1!==i.cache?pn(t):fn(i.get):P,rn.set=i.set||P),Object.defineProperty(e,t,rn)}function pn(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),ge.target&&t.depend(),t.value}}function fn(e){return function(){return e.call(this,this)}}function gn(e,t){e.$options.props;for(var i in t)e[i]="function"!==typeof t[i]?P:O(t[i],e)}function mn(e,t){for(var i in t){var n=t[i];if(Array.isArray(n))for(var r=0;r<n.length;r++)_n(e,i,n[r]);else _n(e,i,n)}}function _n(e,t,i,n){return u(i)&&(n=i,i=i.handler),"string"===typeof i&&(i=e[i]),e.$watch(t,i,n)}function vn(e){var t={get:function(){return this._data}},i={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",i),e.prototype.$set=Me,e.prototype.$delete=xe,e.prototype.$watch=function(e,t,i){var n=this;if(u(t))return _n(n,e,t,i);i=i||{},i.user=!0;var r=new nn(n,e,t,i);if(i.immediate){var o='callback for immediate watcher "'+r.expression+'"';_e(),nt(t,n,[r.value],n,o),ve()}return function(){r.teardown()}}}var En=0;function An(e){e.prototype._init=function(e){var t=this;t._uid=En++,t._isVue=!0,e&&e._isComponent?yn(t,e):t.$options=ze(Sn(t.constructor),e||{},t),t._renderProxy=t,t._self=t,Li(t),bi(t),mi(t),Fi(t,"beforeCreate"),kt(t),sn(t),Ot(t),Fi(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function yn(e,t){var i=e.$options=Object.create(e.constructor.options),n=t._parentVnode;i.parent=t.parent,i._parentVnode=n;var r=n.componentOptions;i.propsData=r.propsData,i._parentListeners=r.listeners,i._renderChildren=r.children,i._componentTag=r.tag,t.render&&(i.render=t.render,i.staticRenderFns=t.staticRenderFns)}function Sn(e){var t=e.options;if(e.super){var i=Sn(e.super),n=e.superOptions;if(i!==n){e.superOptions=i;var r=Cn(e);r&&N(e.extendOptions,r),t=e.options=ze(i,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function Cn(e){var t,i=e.options,n=e.sealedOptions;for(var r in i)i[r]!==n[r]&&(t||(t={}),t[r]=i[r]);return t}function bn(e){this._init(e)}function Tn(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var i=k(arguments,1);return i.unshift(this),"function"===typeof e.install?e.install.apply(e,i):"function"===typeof e&&e.apply(null,i),t.push(e),this}}function In(e){e.mixin=function(e){return this.options=ze(this.options,e),this}}function Rn(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var i=this,n=i.cid,r=e._Ctor||(e._Ctor={});if(r[n])return r[n];var o=e.name||i.options.name;var s=function(e){this._init(e)};return s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.cid=t++,s.options=ze(i.options,e),s["super"]=i,s.options.props&&wn(s),s.options.computed&&On(s),s.extend=i.extend,s.mixin=i.mixin,s.use=i.use,V.forEach((function(e){s[e]=i[e]})),o&&(s.options.components[o]=s),s.superOptions=i.options,s.extendOptions=e,s.sealedOptions=N({},s.options),r[n]=s,s}}function wn(e){var t=e.options.props;for(var i in t)on(e.prototype,"_props",i)}function On(e){var t=e.options.computed;for(var i in t)hn(e.prototype,i,t[i])}function kn(e){V.forEach((function(t){e[t]=function(e,i){return i?("component"===t&&u(i)&&(i.name=i.name||e,i=this.options._base.extend(i)),"directive"===t&&"function"===typeof i&&(i={bind:i,update:i}),this.options[t+"s"][e]=i,i):this.options[t+"s"][e]}}))}function Nn(e){return e&&(e.Ctor.options.name||e.tag)}function Ln(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!d(e)&&e.test(t)}function Pn(e,t){var i=e.cache,n=e.keys,r=e._vnode;for(var o in i){var s=i[o];if(s){var a=s.name;a&&!t(a)&&Dn(i,o,n,r)}}}function Dn(e,t,i,n){var r=e[t];!r||n&&r.tag===n.tag||r.componentInstance.$destroy(),e[t]=null,v(i,t)}An(bn),vn(bn),Oi(bn),Pi(bn),Ei(bn);var Mn=[String,RegExp,Array],xn={name:"keep-alive",abstract:!0,props:{include:Mn,exclude:Mn,max:[String,Number]},methods:{cacheVNode:function(){var e=this,t=e.cache,i=e.keys,n=e.vnodeToCache,r=e.keyToCache;if(n){var o=n.tag,s=n.componentInstance,a=n.componentOptions;t[r]={name:Nn(a),tag:o,componentInstance:s},i.push(r),this.max&&i.length>parseInt(this.max)&&Dn(t,i[0],i,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Dn(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){Pn(e,(function(e){return Ln(t,e)}))})),this.$watch("exclude",(function(t){Pn(e,(function(e){return!Ln(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=Ci(e),i=t&&t.componentOptions;if(i){var n=Nn(i),r=this,o=r.include,s=r.exclude;if(o&&(!n||!Ln(o,n))||s&&n&&Ln(s,n))return t;var a=this,c=a.cache,l=a.keys,u=null==t.key?i.Ctor.cid+(i.tag?"::"+i.tag:""):t.key;c[u]?(t.componentInstance=c[u].componentInstance,v(l,u),l.push(u)):(this.vnodeToCache=t,this.keyToCache=u),t.data.keepAlive=!0}return t||e&&e[0]}},Bn={KeepAlive:xn};function Un(e){var t={get:function(){return G}};Object.defineProperty(e,"config",t),e.util={warn:pe,extend:N,mergeOptions:ze,defineReactive:De},e.set=Me,e.delete=xe,e.nextTick=gt,e.observable=function(e){return Pe(e),e},e.options=Object.create(null),V.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,N(e.options.components,Bn),Tn(e),In(e),Rn(e),kn(e)}Un(bn),Object.defineProperty(bn.prototype,"$isServer",{get:ce}),Object.defineProperty(bn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(bn,"FunctionalRenderContext",{value:Xt}),bn.version="2.6.14";var Fn=m("style,class"),Vn=m("input,textarea,option,select,progress"),jn=function(e,t,i){return"value"===i&&Vn(e)&&"button"!==t||"selected"===i&&"option"===e||"checked"===i&&"input"===e||"muted"===i&&"video"===e},Gn=m("contenteditable,draggable,spellcheck"),Hn=m("events,caret,typing,plaintext-only"),Qn=function(e,t){return Zn(t)||"false"===t?"false":"contenteditable"===e&&Hn(t)?t:"true"},Wn=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),qn="http://www.w3.org/1999/xlink",$n=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},zn=function(e){return $n(e)?e.slice(6,e.length):""},Zn=function(e){return null==e||!1===e};function Yn(e){var t=e.data,i=e,n=e;while(r(n.componentInstance))n=n.componentInstance._vnode,n&&n.data&&(t=Kn(n.data,t));while(r(i=i.parent))i&&i.data&&(t=Kn(t,i.data));return Jn(t.staticClass,t.class)}function Kn(e,t){return{staticClass:Xn(e.staticClass,t.staticClass),class:r(e.class)?[e.class,t.class]:t.class}}function Jn(e,t){return r(e)||r(t)?Xn(e,er(t)):""}function Xn(e,t){return e?t?e+" "+t:e:t||""}function er(e){return Array.isArray(e)?tr(e):c(e)?ir(e):"string"===typeof e?e:""}function tr(e){for(var t,i="",n=0,o=e.length;n<o;n++)r(t=er(e[n]))&&""!==t&&(i&&(i+=" "),i+=t);return i}function ir(e){var t="";for(var i in e)e[i]&&(t&&(t+=" "),t+=i);return t}var nr={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},rr=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),or=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),sr=function(e){return rr(e)||or(e)};function ar(e){return or(e)?"svg":"math"===e?"math":void 0}var cr=Object.create(null);function lr(e){if(!Y)return!0;if(sr(e))return!1;if(e=e.toLowerCase(),null!=cr[e])return cr[e];var t=document.createElement(e);return e.indexOf("-")>-1?cr[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:cr[e]=/HTMLUnknownElement/.test(t.toString())}var ur=m("text,number,password,search,email,tel,url");function dr(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function hr(e,t){var i=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&i.setAttribute("multiple","multiple"),i}function pr(e,t){return document.createElementNS(nr[e],t)}function fr(e){return document.createTextNode(e)}function gr(e){return document.createComment(e)}function mr(e,t,i){e.insertBefore(t,i)}function _r(e,t){e.removeChild(t)}function vr(e,t){e.appendChild(t)}function Er(e){return e.parentNode}function Ar(e){return e.nextSibling}function yr(e){return e.tagName}function Sr(e,t){e.textContent=t}function Cr(e,t){e.setAttribute(t,"")}var br=Object.freeze({createElement:hr,createElementNS:pr,createTextNode:fr,createComment:gr,insertBefore:mr,removeChild:_r,appendChild:vr,parentNode:Er,nextSibling:Ar,tagName:yr,setTextContent:Sr,setStyleScope:Cr}),Tr={create:function(e,t){Ir(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Ir(e,!0),Ir(t))},destroy:function(e){Ir(e,!0)}};function Ir(e,t){var i=e.data.ref;if(r(i)){var n=e.context,o=e.componentInstance||e.elm,s=n.$refs;t?Array.isArray(s[i])?v(s[i],o):s[i]===o&&(s[i]=void 0):e.data.refInFor?Array.isArray(s[i])?s[i].indexOf(o)<0&&s[i].push(o):s[i]=[o]:s[i]=o}}var Rr=new Ee("",{},[]),wr=["create","activate","update","remove","destroy"];function Or(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&r(e.data)===r(t.data)&&kr(e,t)||o(e.isAsyncPlaceholder)&&n(t.asyncFactory.error))}function kr(e,t){if("input"!==e.tag)return!0;var i,n=r(i=e.data)&&r(i=i.attrs)&&i.type,o=r(i=t.data)&&r(i=i.attrs)&&i.type;return n===o||ur(n)&&ur(o)}function Nr(e,t,i){var n,o,s={};for(n=t;n<=i;++n)o=e[n].key,r(o)&&(s[o]=n);return s}function Lr(e){var t,i,s={},c=e.modules,l=e.nodeOps;for(t=0;t<wr.length;++t)for(s[wr[t]]=[],i=0;i<c.length;++i)r(c[i][wr[t]])&&s[wr[t]].push(c[i][wr[t]]);function u(e){return new Ee(l.tagName(e).toLowerCase(),{},[],void 0,e)}function d(e,t){function i(){0===--i.listeners&&h(e)}return i.listeners=t,i}function h(e){var t=l.parentNode(e);r(t)&&l.removeChild(t,e)}function p(e,t,i,n,s,a,c){if(r(e.elm)&&r(a)&&(e=a[c]=Ce(e)),e.isRootInsert=!s,!f(e,t,i,n)){var u=e.data,d=e.children,h=e.tag;r(h)?(e.elm=e.ns?l.createElementNS(e.ns,h):l.createElement(h,e),S(e),E(e,d,t),r(u)&&y(e,t),v(i,e.elm,n)):o(e.isComment)?(e.elm=l.createComment(e.text),v(i,e.elm,n)):(e.elm=l.createTextNode(e.text),v(i,e.elm,n))}}function f(e,t,i,n){var s=e.data;if(r(s)){var a=r(e.componentInstance)&&s.keepAlive;if(r(s=s.hook)&&r(s=s.init)&&s(e,!1),r(e.componentInstance))return g(e,t),v(i,e.elm,n),o(a)&&_(e,t,i,n),!0}}function g(e,t){r(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,A(e)?(y(e,t),S(e)):(Ir(e),t.push(e))}function _(e,t,i,n){var o,a=e;while(a.componentInstance)if(a=a.componentInstance._vnode,r(o=a.data)&&r(o=o.transition)){for(o=0;o<s.activate.length;++o)s.activate[o](Rr,a);t.push(a);break}v(i,e.elm,n)}function v(e,t,i){r(e)&&(r(i)?l.parentNode(i)===e&&l.insertBefore(e,t,i):l.appendChild(e,t))}function E(e,t,i){if(Array.isArray(t)){0;for(var n=0;n<t.length;++n)p(t[n],i,e.elm,null,!0,t,n)}else a(e.text)&&l.appendChild(e.elm,l.createTextNode(String(e.text)))}function A(e){while(e.componentInstance)e=e.componentInstance._vnode;return r(e.tag)}function y(e,i){for(var n=0;n<s.create.length;++n)s.create[n](Rr,e);t=e.data.hook,r(t)&&(r(t.create)&&t.create(Rr,e),r(t.insert)&&i.push(e))}function S(e){var t;if(r(t=e.fnScopeId))l.setStyleScope(e.elm,t);else{var i=e;while(i)r(t=i.context)&&r(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t),i=i.parent}r(t=ki)&&t!==e.context&&t!==e.fnContext&&r(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t)}function C(e,t,i,n,r,o){for(;n<=r;++n)p(i[n],o,e,t,!1,i,n)}function b(e){var t,i,n=e.data;if(r(n))for(r(t=n.hook)&&r(t=t.destroy)&&t(e),t=0;t<s.destroy.length;++t)s.destroy[t](e);if(r(t=e.children))for(i=0;i<e.children.length;++i)b(e.children[i])}function T(e,t,i){for(;t<=i;++t){var n=e[t];r(n)&&(r(n.tag)?(I(n),b(n)):h(n.elm))}}function I(e,t){if(r(t)||r(e.data)){var i,n=s.remove.length+1;for(r(t)?t.listeners+=n:t=d(e.elm,n),r(i=e.componentInstance)&&r(i=i._vnode)&&r(i.data)&&I(i,t),i=0;i<s.remove.length;++i)s.remove[i](e,t);r(i=e.data.hook)&&r(i=i.remove)?i(e,t):t()}else h(e.elm)}function R(e,t,i,o,s){var a,c,u,d,h=0,f=0,g=t.length-1,m=t[0],_=t[g],v=i.length-1,E=i[0],A=i[v],y=!s;while(h<=g&&f<=v)n(m)?m=t[++h]:n(_)?_=t[--g]:Or(m,E)?(O(m,E,o,i,f),m=t[++h],E=i[++f]):Or(_,A)?(O(_,A,o,i,v),_=t[--g],A=i[--v]):Or(m,A)?(O(m,A,o,i,v),y&&l.insertBefore(e,m.elm,l.nextSibling(_.elm)),m=t[++h],A=i[--v]):Or(_,E)?(O(_,E,o,i,f),y&&l.insertBefore(e,_.elm,m.elm),_=t[--g],E=i[++f]):(n(a)&&(a=Nr(t,h,g)),c=r(E.key)?a[E.key]:w(E,t,h,g),n(c)?p(E,o,e,m.elm,!1,i,f):(u=t[c],Or(u,E)?(O(u,E,o,i,f),t[c]=void 0,y&&l.insertBefore(e,u.elm,m.elm)):p(E,o,e,m.elm,!1,i,f)),E=i[++f]);h>g?(d=n(i[v+1])?null:i[v+1].elm,C(e,d,i,f,v,o)):f>v&&T(t,h,g)}function w(e,t,i,n){for(var o=i;o<n;o++){var s=t[o];if(r(s)&&Or(e,s))return o}}function O(e,t,i,a,c,u){if(e!==t){r(t.elm)&&r(a)&&(t=a[c]=Ce(t));var d=t.elm=e.elm;if(o(e.isAsyncPlaceholder))r(t.asyncFactory.resolved)?L(e.elm,t,i):t.isAsyncPlaceholder=!0;else if(o(t.isStatic)&&o(e.isStatic)&&t.key===e.key&&(o(t.isCloned)||o(t.isOnce)))t.componentInstance=e.componentInstance;else{var h,p=t.data;r(p)&&r(h=p.hook)&&r(h=h.prepatch)&&h(e,t);var f=e.children,g=t.children;if(r(p)&&A(t)){for(h=0;h<s.update.length;++h)s.update[h](e,t);r(h=p.hook)&&r(h=h.update)&&h(e,t)}n(t.text)?r(f)&&r(g)?f!==g&&R(d,f,g,i,u):r(g)?(r(e.text)&&l.setTextContent(d,""),C(d,null,g,0,g.length-1,i)):r(f)?T(f,0,f.length-1):r(e.text)&&l.setTextContent(d,""):e.text!==t.text&&l.setTextContent(d,t.text),r(p)&&r(h=p.hook)&&r(h=h.postpatch)&&h(e,t)}}}function k(e,t,i){if(o(i)&&r(e.parent))e.parent.data.pendingInsert=t;else for(var n=0;n<t.length;++n)t[n].data.hook.insert(t[n])}var N=m("attrs,class,staticClass,staticStyle,key");function L(e,t,i,n){var s,a=t.tag,c=t.data,l=t.children;if(n=n||c&&c.pre,t.elm=e,o(t.isComment)&&r(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(r(c)&&(r(s=c.hook)&&r(s=s.init)&&s(t,!0),r(s=t.componentInstance)))return g(t,i),!0;if(r(a)){if(r(l))if(e.hasChildNodes())if(r(s=c)&&r(s=s.domProps)&&r(s=s.innerHTML)){if(s!==e.innerHTML)return!1}else{for(var u=!0,d=e.firstChild,h=0;h<l.length;h++){if(!d||!L(d,l[h],i,n)){u=!1;break}d=d.nextSibling}if(!u||d)return!1}else E(t,l,i);if(r(c)){var p=!1;for(var f in c)if(!N(f)){p=!0,y(t,i);break}!p&&c["class"]&&_t(c["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,i,a){if(!n(t)){var c=!1,d=[];if(n(e))c=!0,p(t,d);else{var h=r(e.nodeType);if(!h&&Or(e,t))O(e,t,d,null,null,a);else{if(h){if(1===e.nodeType&&e.hasAttribute(F)&&(e.removeAttribute(F),i=!0),o(i)&&L(e,t,d))return k(t,d,!0),e;e=u(e)}var f=e.elm,g=l.parentNode(f);if(p(t,d,f._leaveCb?null:g,l.nextSibling(f)),r(t.parent)){var m=t.parent,_=A(t);while(m){for(var v=0;v<s.destroy.length;++v)s.destroy[v](m);if(m.elm=t.elm,_){for(var E=0;E<s.create.length;++E)s.create[E](Rr,m);var y=m.data.hook.insert;if(y.merged)for(var S=1;S<y.fns.length;S++)y.fns[S]()}else Ir(m);m=m.parent}}r(g)?T([e],0,0):r(e.tag)&&b(e)}}return k(t,d,c),t.elm}r(e)&&b(e)}}var Pr={create:Dr,update:Dr,destroy:function(e){Dr(e,Rr)}};function Dr(e,t){(e.data.directives||t.data.directives)&&Mr(e,t)}function Mr(e,t){var i,n,r,o=e===Rr,s=t===Rr,a=Br(e.data.directives,e.context),c=Br(t.data.directives,t.context),l=[],u=[];for(i in c)n=a[i],r=c[i],n?(r.oldValue=n.value,r.oldArg=n.arg,Fr(r,"update",t,e),r.def&&r.def.componentUpdated&&u.push(r)):(Fr(r,"bind",t,e),r.def&&r.def.inserted&&l.push(r));if(l.length){var d=function(){for(var i=0;i<l.length;i++)Fr(l[i],"inserted",t,e)};o?St(t,"insert",d):d()}if(u.length&&St(t,"postpatch",(function(){for(var i=0;i<u.length;i++)Fr(u[i],"componentUpdated",t,e)})),!o)for(i in a)c[i]||Fr(a[i],"unbind",e,e,s)}var xr=Object.create(null);function Br(e,t){var i,n,r=Object.create(null);if(!e)return r;for(i=0;i<e.length;i++)n=e[i],n.modifiers||(n.modifiers=xr),r[Ur(n)]=n,n.def=Ze(t.$options,"directives",n.name,!0);return r}function Ur(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Fr(e,t,i,n,r){var o=e.def&&e.def[t];if(o)try{o(i.elm,e,i,n,r)}catch(bs){it(bs,i.context,"directive "+e.name+" "+t+" hook")}}var Vr=[Tr,Pr];function jr(e,t){var i=t.componentOptions;if((!r(i)||!1!==i.Ctor.options.inheritAttrs)&&(!n(e.data.attrs)||!n(t.data.attrs))){var o,s,a,c=t.elm,l=e.data.attrs||{},u=t.data.attrs||{};for(o in r(u.__ob__)&&(u=t.data.attrs=N({},u)),u)s=u[o],a=l[o],a!==s&&Gr(c,o,s,t.data.pre);for(o in(ee||ie)&&u.value!==l.value&&Gr(c,"value",u.value),l)n(u[o])&&($n(o)?c.removeAttributeNS(qn,zn(o)):Gn(o)||c.removeAttribute(o))}}function Gr(e,t,i,n){n||e.tagName.indexOf("-")>-1?Hr(e,t,i):Wn(t)?Zn(i)?e.removeAttribute(t):(i="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,i)):Gn(t)?e.setAttribute(t,Qn(t,i)):$n(t)?Zn(i)?e.removeAttributeNS(qn,zn(t)):e.setAttributeNS(qn,t,i):Hr(e,t,i)}function Hr(e,t,i){if(Zn(i))e.removeAttribute(t);else{if(ee&&!te&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==i&&!e.__ieph){var n=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",n)};e.addEventListener("input",n),e.__ieph=!0}e.setAttribute(t,i)}}var Qr={create:jr,update:jr};function Wr(e,t){var i=t.elm,o=t.data,s=e.data;if(!(n(o.staticClass)&&n(o.class)&&(n(s)||n(s.staticClass)&&n(s.class)))){var a=Yn(t),c=i._transitionClasses;r(c)&&(a=Xn(a,er(c))),a!==i._prevClass&&(i.setAttribute("class",a),i._prevClass=a)}}var qr,$r={create:Wr,update:Wr},zr="__r",Zr="__c";function Yr(e){if(r(e[zr])){var t=ee?"change":"input";e[t]=[].concat(e[zr],e[t]||[]),delete e[zr]}r(e[Zr])&&(e.change=[].concat(e[Zr],e.change||[]),delete e[Zr])}function Kr(e,t,i){var n=qr;return function r(){var o=t.apply(null,arguments);null!==o&&eo(e,r,i,n)}}var Jr=at&&!(re&&Number(re[1])<=53);function Xr(e,t,i,n){if(Jr){var r=$i,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=r||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}qr.addEventListener(e,t,se?{capture:i,passive:n}:i)}function eo(e,t,i,n){(n||qr).removeEventListener(e,t._wrapper||t,i)}function to(e,t){if(!n(e.data.on)||!n(t.data.on)){var i=t.data.on||{},r=e.data.on||{};qr=t.elm,Yr(i),yt(i,r,Xr,eo,Kr,t.context),qr=void 0}}var io,no={create:to,update:to};function ro(e,t){if(!n(e.data.domProps)||!n(t.data.domProps)){var i,o,s=t.elm,a=e.data.domProps||{},c=t.data.domProps||{};for(i in r(c.__ob__)&&(c=t.data.domProps=N({},c)),a)i in c||(s[i]="");for(i in c){if(o=c[i],"textContent"===i||"innerHTML"===i){if(t.children&&(t.children.length=0),o===a[i])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===i&&"PROGRESS"!==s.tagName){s._value=o;var l=n(o)?"":String(o);oo(s,l)&&(s.value=l)}else if("innerHTML"===i&&or(s.tagName)&&n(s.innerHTML)){io=io||document.createElement("div"),io.innerHTML="<svg>"+o+"</svg>";var u=io.firstChild;while(s.firstChild)s.removeChild(s.firstChild);while(u.firstChild)s.appendChild(u.firstChild)}else if(o!==a[i])try{s[i]=o}catch(bs){}}}}function oo(e,t){return!e.composing&&("OPTION"===e.tagName||so(e,t)||ao(e,t))}function so(e,t){var i=!0;try{i=document.activeElement!==e}catch(bs){}return i&&e.value!==t}function ao(e,t){var i=e.value,n=e._vModifiers;if(r(n)){if(n.number)return g(i)!==g(t);if(n.trim)return i.trim()!==t.trim()}return i!==t}var co={create:ro,update:ro},lo=y((function(e){var t={},i=/;(?![^(]*\))/g,n=/:(.+)/;return e.split(i).forEach((function(e){if(e){var i=e.split(n);i.length>1&&(t[i[0].trim()]=i[1].trim())}})),t}));function uo(e){var t=ho(e.style);return e.staticStyle?N(e.staticStyle,t):t}function ho(e){return Array.isArray(e)?L(e):"string"===typeof e?lo(e):e}function po(e,t){var i,n={};if(t){var r=e;while(r.componentInstance)r=r.componentInstance._vnode,r&&r.data&&(i=uo(r.data))&&N(n,i)}(i=uo(e.data))&&N(n,i);var o=e;while(o=o.parent)o.data&&(i=uo(o.data))&&N(n,i);return n}var fo,go=/^--/,mo=/\s*!important$/,_o=function(e,t,i){if(go.test(t))e.style.setProperty(t,i);else if(mo.test(i))e.style.setProperty(I(t),i.replace(mo,""),"important");else{var n=Eo(t);if(Array.isArray(i))for(var r=0,o=i.length;r<o;r++)e.style[n]=i[r];else e.style[n]=i}},vo=["Webkit","Moz","ms"],Eo=y((function(e){if(fo=fo||document.createElement("div").style,e=C(e),"filter"!==e&&e in fo)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<vo.length;i++){var n=vo[i]+t;if(n in fo)return n}}));function Ao(e,t){var i=t.data,o=e.data;if(!(n(i.staticStyle)&&n(i.style)&&n(o.staticStyle)&&n(o.style))){var s,a,c=t.elm,l=o.staticStyle,u=o.normalizedStyle||o.style||{},d=l||u,h=ho(t.data.style)||{};t.data.normalizedStyle=r(h.__ob__)?N({},h):h;var p=po(t,!0);for(a in d)n(p[a])&&_o(c,a,"");for(a in p)s=p[a],s!==d[a]&&_o(c,a,null==s?"":s)}}var yo={create:Ao,update:Ao},So=/\s+/;function Co(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(So).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var i=" "+(e.getAttribute("class")||"")+" ";i.indexOf(" "+t+" ")<0&&e.setAttribute("class",(i+t).trim())}}function bo(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(So).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var i=" "+(e.getAttribute("class")||"")+" ",n=" "+t+" ";while(i.indexOf(n)>=0)i=i.replace(n," ");i=i.trim(),i?e.setAttribute("class",i):e.removeAttribute("class")}}function To(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&N(t,Io(e.name||"v")),N(t,e),t}return"string"===typeof e?Io(e):void 0}}var Io=y((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),Ro=Y&&!te,wo="transition",Oo="animation",ko="transition",No="transitionend",Lo="animation",Po="animationend";Ro&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ko="WebkitTransition",No="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Lo="WebkitAnimation",Po="webkitAnimationEnd"));var Do=Y?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Mo(e){Do((function(){Do(e)}))}function xo(e,t){var i=e._transitionClasses||(e._transitionClasses=[]);i.indexOf(t)<0&&(i.push(t),Co(e,t))}function Bo(e,t){e._transitionClasses&&v(e._transitionClasses,t),bo(e,t)}function Uo(e,t,i){var n=Vo(e,t),r=n.type,o=n.timeout,s=n.propCount;if(!r)return i();var a=r===wo?No:Po,c=0,l=function(){e.removeEventListener(a,u),i()},u=function(t){t.target===e&&++c>=s&&l()};setTimeout((function(){c<s&&l()}),o+1),e.addEventListener(a,u)}var Fo=/\b(transform|all)(,|$)/;function Vo(e,t){var i,n=window.getComputedStyle(e),r=(n[ko+"Delay"]||"").split(", "),o=(n[ko+"Duration"]||"").split(", "),s=jo(r,o),a=(n[Lo+"Delay"]||"").split(", "),c=(n[Lo+"Duration"]||"").split(", "),l=jo(a,c),u=0,d=0;t===wo?s>0&&(i=wo,u=s,d=o.length):t===Oo?l>0&&(i=Oo,u=l,d=c.length):(u=Math.max(s,l),i=u>0?s>l?wo:Oo:null,d=i?i===wo?o.length:c.length:0);var h=i===wo&&Fo.test(n[ko+"Property"]);return{type:i,timeout:u,propCount:d,hasTransform:h}}function jo(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,i){return Go(t)+Go(e[i])})))}function Go(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Ho(e,t){var i=e.elm;r(i._leaveCb)&&(i._leaveCb.cancelled=!0,i._leaveCb());var o=To(e.data.transition);if(!n(o)&&!r(i._enterCb)&&1===i.nodeType){var s=o.css,a=o.type,l=o.enterClass,u=o.enterToClass,d=o.enterActiveClass,h=o.appearClass,p=o.appearToClass,f=o.appearActiveClass,m=o.beforeEnter,_=o.enter,v=o.afterEnter,E=o.enterCancelled,A=o.beforeAppear,y=o.appear,S=o.afterAppear,C=o.appearCancelled,b=o.duration,T=ki,I=ki.$vnode;while(I&&I.parent)T=I.context,I=I.parent;var R=!T._isMounted||!e.isRootInsert;if(!R||y||""===y){var w=R&&h?h:l,O=R&&f?f:d,k=R&&p?p:u,N=R&&A||m,L=R&&"function"===typeof y?y:_,P=R&&S||v,D=R&&C||E,M=g(c(b)?b.enter:b);0;var x=!1!==s&&!te,B=qo(L),F=i._enterCb=U((function(){x&&(Bo(i,k),Bo(i,O)),F.cancelled?(x&&Bo(i,w),D&&D(i)):P&&P(i),i._enterCb=null}));e.data.show||St(e,"insert",(function(){var t=i.parentNode,n=t&&t._pending&&t._pending[e.key];n&&n.tag===e.tag&&n.elm._leaveCb&&n.elm._leaveCb(),L&&L(i,F)})),N&&N(i),x&&(xo(i,w),xo(i,O),Mo((function(){Bo(i,w),F.cancelled||(xo(i,k),B||(Wo(M)?setTimeout(F,M):Uo(i,a,F)))}))),e.data.show&&(t&&t(),L&&L(i,F)),x||B||F()}}}function Qo(e,t){var i=e.elm;r(i._enterCb)&&(i._enterCb.cancelled=!0,i._enterCb());var o=To(e.data.transition);if(n(o)||1!==i.nodeType)return t();if(!r(i._leaveCb)){var s=o.css,a=o.type,l=o.leaveClass,u=o.leaveToClass,d=o.leaveActiveClass,h=o.beforeLeave,p=o.leave,f=o.afterLeave,m=o.leaveCancelled,_=o.delayLeave,v=o.duration,E=!1!==s&&!te,A=qo(p),y=g(c(v)?v.leave:v);0;var S=i._leaveCb=U((function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[e.key]=null),E&&(Bo(i,u),Bo(i,d)),S.cancelled?(E&&Bo(i,l),m&&m(i)):(t(),f&&f(i)),i._leaveCb=null}));_?_(C):C()}function C(){S.cancelled||(!e.data.show&&i.parentNode&&((i.parentNode._pending||(i.parentNode._pending={}))[e.key]=e),h&&h(i),E&&(xo(i,l),xo(i,d),Mo((function(){Bo(i,l),S.cancelled||(xo(i,u),A||(Wo(y)?setTimeout(S,y):Uo(i,a,S)))}))),p&&p(i,S),E||A||S())}}function Wo(e){return"number"===typeof e&&!isNaN(e)}function qo(e){if(n(e))return!1;var t=e.fns;return r(t)?qo(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function $o(e,t){!0!==t.data.show&&Ho(t)}var zo=Y?{create:$o,activate:$o,remove:function(e,t){!0!==e.data.show?Qo(e,t):t()}}:{},Zo=[Qr,$r,no,co,yo,zo],Yo=Zo.concat(Vr),Ko=Lr({nodeOps:br,modules:Yo});te&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&os(e,"input")}));var Jo={inserted:function(e,t,i,n){"select"===i.tag?(n.elm&&!n.elm._vOptions?St(i,"postpatch",(function(){Jo.componentUpdated(e,t,i)})):Xo(e,t,i.context),e._vOptions=[].map.call(e.options,is)):("textarea"===i.tag||ur(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",ns),e.addEventListener("compositionend",rs),e.addEventListener("change",rs),te&&(e.vmodel=!0)))},componentUpdated:function(e,t,i){if("select"===i.tag){Xo(e,t,i.context);var n=e._vOptions,r=e._vOptions=[].map.call(e.options,is);if(r.some((function(e,t){return!x(e,n[t])}))){var o=e.multiple?t.value.some((function(e){return ts(e,r)})):t.value!==t.oldValue&&ts(t.value,r);o&&os(e,"change")}}}};function Xo(e,t,i){es(e,t,i),(ee||ie)&&setTimeout((function(){es(e,t,i)}),0)}function es(e,t,i){var n=t.value,r=e.multiple;if(!r||Array.isArray(n)){for(var o,s,a=0,c=e.options.length;a<c;a++)if(s=e.options[a],r)o=B(n,is(s))>-1,s.selected!==o&&(s.selected=o);else if(x(is(s),n))return void(e.selectedIndex!==a&&(e.selectedIndex=a));r||(e.selectedIndex=-1)}}function ts(e,t){return t.every((function(t){return!x(t,e)}))}function is(e){return"_value"in e?e._value:e.value}function ns(e){e.target.composing=!0}function rs(e){e.target.composing&&(e.target.composing=!1,os(e.target,"input"))}function os(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),e.dispatchEvent(i)}function ss(e){return!e.componentInstance||e.data&&e.data.transition?e:ss(e.componentInstance._vnode)}var as={bind:function(e,t,i){var n=t.value;i=ss(i);var r=i.data&&i.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;n&&r?(i.data.show=!0,Ho(i,(function(){e.style.display=o}))):e.style.display=n?o:"none"},update:function(e,t,i){var n=t.value,r=t.oldValue;if(!n!==!r){i=ss(i);var o=i.data&&i.data.transition;o?(i.data.show=!0,n?Ho(i,(function(){e.style.display=e.__vOriginalDisplay})):Qo(i,(function(){e.style.display="none"}))):e.style.display=n?e.__vOriginalDisplay:"none"}},unbind:function(e,t,i,n,r){r||(e.style.display=e.__vOriginalDisplay)}},cs={model:Jo,show:as},ls={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function us(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?us(Ci(t.children)):e}function ds(e){var t={},i=e.$options;for(var n in i.propsData)t[n]=e[n];var r=i._parentListeners;for(var o in r)t[C(o)]=r[o];return t}function hs(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function ps(e){while(e=e.parent)if(e.data.transition)return!0}function fs(e,t){return t.key===e.key&&t.tag===e.tag}var gs=function(e){return e.tag||Dt(e)},ms=function(e){return"show"===e.name},_s={name:"transition",props:ls,abstract:!0,render:function(e){var t=this,i=this.$slots.default;if(i&&(i=i.filter(gs),i.length)){0;var n=this.mode;0;var r=i[0];if(ps(this.$vnode))return r;var o=us(r);if(!o)return r;if(this._leaving)return hs(e,r);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:a(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var c=(o.data||(o.data={})).transition=ds(this),l=this._vnode,u=us(l);if(o.data.directives&&o.data.directives.some(ms)&&(o.data.show=!0),u&&u.data&&!fs(o,u)&&!Dt(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var d=u.data.transition=N({},c);if("out-in"===n)return this._leaving=!0,St(d,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),hs(e,r);if("in-out"===n){if(Dt(o))return l;var h,p=function(){h()};St(c,"afterEnter",p),St(c,"enterCancelled",p),St(d,"delayLeave",(function(e){h=e}))}}return r}}},vs=N({tag:String,moveClass:String},ls);delete vs.mode;var Es={props:vs,beforeMount:function(){var e=this,t=this._update;this._update=function(i,n){var r=Ni(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,r(),t.call(e,i,n)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",i=Object.create(null),n=this.prevChildren=this.children,r=this.$slots.default||[],o=this.children=[],s=ds(this),a=0;a<r.length;a++){var c=r[a];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),i[c.key]=c,(c.data||(c.data={})).transition=s;else;}if(n){for(var l=[],u=[],d=0;d<n.length;d++){var h=n[d];h.data.transition=s,h.data.pos=h.elm.getBoundingClientRect(),i[h.key]?l.push(h):u.push(h)}this.kept=e(t,null,l),this.removed=u}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(As),e.forEach(ys),e.forEach(Ss),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var i=e.elm,n=i.style;xo(i,t),n.transform=n.WebkitTransform=n.transitionDuration="",i.addEventListener(No,i._moveCb=function e(n){n&&n.target!==i||n&&!/transform$/.test(n.propertyName)||(i.removeEventListener(No,e),i._moveCb=null,Bo(i,t))})}})))},methods:{hasMove:function(e,t){if(!Ro)return!1;if(this._hasMove)return this._hasMove;var i=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){bo(i,e)})),Co(i,t),i.style.display="none",this.$el.appendChild(i);var n=Vo(i);return this.$el.removeChild(i),this._hasMove=n.hasTransform}}};function As(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function ys(e){e.data.newPos=e.elm.getBoundingClientRect()}function Ss(e){var t=e.data.pos,i=e.data.newPos,n=t.left-i.left,r=t.top-i.top;if(n||r){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+n+"px,"+r+"px)",o.transitionDuration="0s"}}var Cs={Transition:_s,TransitionGroup:Es};bn.config.mustUseProp=jn,bn.config.isReservedTag=sr,bn.config.isReservedAttr=Fn,bn.config.getTagNamespace=ar,bn.config.isUnknownElement=lr,N(bn.options.directives,cs),N(bn.options.components,Cs),bn.prototype.__patch__=Y?Ko:P,bn.prototype.$mount=function(e,t){return e=e&&Y?dr(e):void 0,Di(this,e,t)},Y&&setTimeout((function(){G.devtools&&le&&le.emit("init",bn)}),0),t["default"]=bn}.call(this,i("c8ba"))},"2b3d":function(e,t,i){"use strict";i("3ca3");var n,r=i("23e7"),o=i("83ab"),s=i("0d3b"),a=i("da84"),c=i("0366"),l=i("e330"),u=i("37e8").f,d=i("6eeb"),h=i("19aa"),p=i("1a2d"),f=i("60da"),g=i("4df4"),m=i("4dae"),_=i("6547").codeAt,v=i("5fb2"),E=i("577e"),A=i("d44e"),y=i("9861"),S=i("69f3"),C=S.set,b=S.getterFor("URL"),T=y.URLSearchParams,I=y.getState,R=a.URL,w=a.TypeError,O=a.parseInt,k=Math.floor,N=Math.pow,L=l("".charAt),P=l(/./.exec),D=l([].join),M=l(1..toString),x=l([].pop),B=l([].push),U=l("".replace),F=l([].shift),V=l("".split),j=l("".slice),G=l("".toLowerCase),H=l([].unshift),Q="Invalid authority",W="Invalid scheme",q="Invalid host",$="Invalid port",z=/[a-z]/i,Z=/[\d+-.a-z]/i,Y=/\d/,K=/^0x/i,J=/^[0-7]+$/,X=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ie=/[\0\t\n\r #/:<>?@[\\\]^|]/,ne=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,re=/[\t\n\r]/g,oe=function(e){var t,i,n,r,o,s,a,c=V(e,".");if(c.length&&""==c[c.length-1]&&c.length--,t=c.length,t>4)return e;for(i=[],n=0;n<t;n++){if(r=c[n],""==r)return e;if(o=10,r.length>1&&"0"==L(r,0)&&(o=P(K,r)?16:8,r=j(r,8==o?1:2)),""===r)s=0;else{if(!P(10==o?X:8==o?J:ee,r))return e;s=O(r,o)}B(i,s)}for(n=0;n<t;n++)if(s=i[n],n==t-1){if(s>=N(256,5-t))return null}else if(s>255)return null;for(a=x(i),n=0;n<i.length;n++)a+=i[n]*N(256,3-n);return a},se=function(e){var t,i,n,r,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,h=function(){return L(e,d)};if(":"==h()){if(":"!=L(e,1))return;d+=2,l++,u=l}while(h()){if(8==l)return;if(":"!=h()){t=i=0;while(i<4&&P(ee,h()))t=16*t+O(h(),16),d++,i++;if("."==h()){if(0==i)return;if(d-=i,l>6)return;n=0;while(h()){if(r=null,n>0){if(!("."==h()&&n<4))return;d++}if(!P(Y,h()))return;while(P(Y,h())){if(o=O(h(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;d++}c[l]=256*c[l]+r,n++,2!=n&&4!=n||l++}if(4!=n)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;c[l++]=t}else{if(null!==u)return;d++,l++,u=l}}if(null!==u){s=l-u,l=7;while(0!=l&&s>0)a=c[l],c[l--]=c[u+s-1],c[u+--s]=a}else if(8!=l)return;return c},ae=function(e){for(var t=null,i=1,n=null,r=0,o=0;o<8;o++)0!==e[o]?(r>i&&(t=n,i=r),n=null,r=0):(null===n&&(n=o),++r);return r>i&&(t=n,i=r),t},ce=function(e){var t,i,n,r;if("number"==typeof e){for(t=[],i=0;i<4;i++)H(t,e%256),e=k(e/256);return D(t,".")}if("object"==typeof e){for(t="",n=ae(e),i=0;i<8;i++)r&&0===e[i]||(r&&(r=!1),n===i?(t+=i?":":"::",r=!0):(t+=M(e[i],16),i<7&&(t+=":")));return"["+t+"]"}return e},le={},ue=f({},le,{" ":1,'"':1,"<":1,">":1,"`":1}),de=f({},ue,{"#":1,"?":1,"{":1,"}":1}),he=f({},de,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),pe=function(e,t){var i=_(e,0);return i>32&&i<127&&!p(t,e)?e:encodeURIComponent(e)},fe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ge=function(e,t){var i;return 2==e.length&&P(z,L(e,0))&&(":"==(i=L(e,1))||!t&&"|"==i)},me=function(e){var t;return e.length>1&&ge(j(e,0,2))&&(2==e.length||"/"===(t=L(e,2))||"\\"===t||"?"===t||"#"===t)},_e=function(e){return"."===e||"%2e"===G(e)},ve=function(e){return e=G(e),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},Ee={},Ae={},ye={},Se={},Ce={},be={},Te={},Ie={},Re={},we={},Oe={},ke={},Ne={},Le={},Pe={},De={},Me={},xe={},Be={},Ue={},Fe={},Ve=function(e,t,i){var n,r,o,s=E(e);if(t){if(r=this.parse(s),r)throw w(r);this.searchParams=null}else{if(void 0!==i&&(n=new Ve(i,!0)),r=this.parse(s,null,n),r)throw w(r);o=I(new T),o.bindURL(this),this.searchParams=o}};Ve.prototype={type:"URL",parse:function(e,t,i){var r,o,s,a,c=this,l=t||Ee,u=0,d="",h=!1,f=!1,_=!1;e=E(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=U(e,ne,"")),e=U(e,re,""),r=g(e);while(u<=r.length){switch(o=r[u],l){case Ee:if(!o||!P(z,o)){if(t)return W;l=ye;continue}d+=G(o),l=Ae;break;case Ae:if(o&&(P(Z,o)||"+"==o||"-"==o||"."==o))d+=G(o);else{if(":"!=o){if(t)return W;d="",l=ye,u=0;continue}if(t&&(c.isSpecial()!=p(fe,d)||"file"==d&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=d,t)return void(c.isSpecial()&&fe[c.scheme]==c.port&&(c.port=null));d="","file"==c.scheme?l=Le:c.isSpecial()&&i&&i.scheme==c.scheme?l=Se:c.isSpecial()?l=Ie:"/"==r[u+1]?(l=Ce,u++):(c.cannotBeABaseURL=!0,B(c.path,""),l=Be)}break;case ye:if(!i||i.cannotBeABaseURL&&"#"!=o)return W;if(i.cannotBeABaseURL&&"#"==o){c.scheme=i.scheme,c.path=m(i.path),c.query=i.query,c.fragment="",c.cannotBeABaseURL=!0,l=Fe;break}l="file"==i.scheme?Le:be;continue;case Se:if("/"!=o||"/"!=r[u+1]){l=be;continue}l=Re,u++;break;case Ce:if("/"==o){l=we;break}l=xe;continue;case be:if(c.scheme=i.scheme,o==n)c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=m(i.path),c.query=i.query;else if("/"==o||"\\"==o&&c.isSpecial())l=Te;else if("?"==o)c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=m(i.path),c.query="",l=Ue;else{if("#"!=o){c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=m(i.path),c.path.length--,l=xe;continue}c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,c.path=m(i.path),c.query=i.query,c.fragment="",l=Fe}break;case Te:if(!c.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){c.username=i.username,c.password=i.password,c.host=i.host,c.port=i.port,l=xe;continue}l=we}else l=Re;break;case Ie:if(l=Re,"/"!=o||"/"!=L(d,u+1))continue;u++;break;case Re:if("/"!=o&&"\\"!=o){l=we;continue}break;case we:if("@"==o){h&&(d="%40"+d),h=!0,s=g(d);for(var v=0;v<s.length;v++){var A=s[v];if(":"!=A||_){var y=pe(A,he);_?c.password+=y:c.username+=y}else _=!0}d=""}else if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(h&&""==d)return Q;u-=g(d).length+1,d="",l=Oe}else d+=o;break;case Oe:case ke:if(t&&"file"==c.scheme){l=De;continue}if(":"!=o||f){if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(c.isSpecial()&&""==d)return q;if(t&&""==d&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(d),a)return a;if(d="",l=Me,t)return;continue}"["==o?f=!0:"]"==o&&(f=!1),d+=o}else{if(""==d)return q;if(a=c.parseHost(d),a)return a;if(d="",l=Ne,t==ke)return}break;case Ne:if(!P(Y,o)){if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()||t){if(""!=d){var S=O(d,10);if(S>65535)return $;c.port=c.isSpecial()&&S===fe[c.scheme]?null:S,d=""}if(t)return;l=Me;continue}return $}d+=o;break;case Le:if(c.scheme="file","/"==o||"\\"==o)l=Pe;else{if(!i||"file"!=i.scheme){l=xe;continue}if(o==n)c.host=i.host,c.path=m(i.path),c.query=i.query;else if("?"==o)c.host=i.host,c.path=m(i.path),c.query="",l=Ue;else{if("#"!=o){me(D(m(r,u),""))||(c.host=i.host,c.path=m(i.path),c.shortenPath()),l=xe;continue}c.host=i.host,c.path=m(i.path),c.query=i.query,c.fragment="",l=Fe}}break;case Pe:if("/"==o||"\\"==o){l=De;break}i&&"file"==i.scheme&&!me(D(m(r,u),""))&&(ge(i.path[0],!0)?B(c.path,i.path[0]):c.host=i.host),l=xe;continue;case De:if(o==n||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&ge(d))l=xe;else if(""==d){if(c.host="",t)return;l=Me}else{if(a=c.parseHost(d),a)return a;if("localhost"==c.host&&(c.host=""),t)return;d="",l=Me}continue}d+=o;break;case Me:if(c.isSpecial()){if(l=xe,"/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=n&&(l=xe,"/"!=o))continue}else c.fragment="",l=Fe;else c.query="",l=Ue;break;case xe:if(o==n||"/"==o||"\\"==o&&c.isSpecial()||!t&&("?"==o||"#"==o)){if(ve(d)?(c.shortenPath(),"/"==o||"\\"==o&&c.isSpecial()||B(c.path,"")):_e(d)?"/"==o||"\\"==o&&c.isSpecial()||B(c.path,""):("file"==c.scheme&&!c.path.length&&ge(d)&&(c.host&&(c.host=""),d=L(d,0)+":"),B(c.path,d)),d="","file"==c.scheme&&(o==n||"?"==o||"#"==o))while(c.path.length>1&&""===c.path[0])F(c.path);"?"==o?(c.query="",l=Ue):"#"==o&&(c.fragment="",l=Fe)}else d+=pe(o,de);break;case Be:"?"==o?(c.query="",l=Ue):"#"==o?(c.fragment="",l=Fe):o!=n&&(c.path[0]+=pe(o,le));break;case Ue:t||"#"!=o?o!=n&&("'"==o&&c.isSpecial()?c.query+="%27":c.query+="#"==o?"%23":pe(o,le)):(c.fragment="",l=Fe);break;case Fe:o!=n&&(c.fragment+=pe(o,ue));break}u++}},parseHost:function(e){var t,i,n;if("["==L(e,0)){if("]"!=L(e,e.length-1))return q;if(t=se(j(e,1,-1)),!t)return q;this.host=t}else if(this.isSpecial()){if(e=v(e),P(te,e))return q;if(t=oe(e),null===t)return q;this.host=t}else{if(P(ie,e))return q;for(t="",i=g(e),n=0;n<i.length;n++)t+=pe(i[n],le);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return p(fe,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&ge(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,i=e.username,n=e.password,r=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,l=t+":";return null!==r?(l+="//",e.includesCredentials()&&(l+=i+(n?":"+n:"")+"@"),l+=ce(r),null!==o&&(l+=":"+o)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+D(s,"/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw w(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new je(e.path[0]).origin}catch(i){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+ce(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(E(e)+":",Ee)},getUsername:function(){return this.username},setUsername:function(e){var t=g(E(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<t.length;i++)this.username+=pe(t[i],he)}},getPassword:function(){return this.password},setPassword:function(e){var t=g(E(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<t.length;i++)this.password+=pe(t[i],he)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?ce(e):ce(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Oe)},getHostname:function(){var e=this.host;return null===e?"":ce(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,ke)},getPort:function(){var e=this.port;return null===e?"":E(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=E(e),""==e?this.port=null:this.parse(e,Ne))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+D(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Me))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=E(e),""==e?this.query=null:("?"==L(e,0)&&(e=j(e,1)),this.query="",this.parse(e,Ue)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){e=E(e),""!=e?("#"==L(e,0)&&(e=j(e,1)),this.fragment="",this.parse(e,Fe)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var je=function(e){var t=h(this,Ge),i=arguments.length>1?arguments[1]:void 0,n=C(t,new Ve(e,!1,i));o||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},Ge=je.prototype,He=function(e,t){return{get:function(){return b(this)[e]()},set:t&&function(e){return b(this)[t](e)},configurable:!0,enumerable:!0}};if(o&&u(Ge,{href:He("serialize","setHref"),origin:He("getOrigin"),protocol:He("getProtocol","setProtocol"),username:He("getUsername","setUsername"),password:He("getPassword","setPassword"),host:He("getHost","setHost"),hostname:He("getHostname","setHostname"),port:He("getPort","setPort"),pathname:He("getPathname","setPathname"),search:He("getSearch","setSearch"),searchParams:He("getSearchParams"),hash:He("getHash","setHash")}),d(Ge,"toJSON",(function(){return b(this).serialize()}),{enumerable:!0}),d(Ge,"toString",(function(){return b(this).serialize()}),{enumerable:!0}),R){var Qe=R.createObjectURL,We=R.revokeObjectURL;Qe&&d(je,"createObjectURL",c(Qe,R)),We&&d(je,"revokeObjectURL",c(We,R))}A(je,"URL"),r({global:!0,forced:!s,sham:!o},{URL:je})},"2ba4":function(e,t,i){var n=i("40d5"),r=Function.prototype,o=r.apply,s=r.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(o):function(){return s.apply(o,arguments)})},"2bb5":function(e,t,i){"use strict";t.__esModule=!0;i("8122");t.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},"2c3e":function(e,t,i){var n=i("da84"),r=i("83ab"),o=i("9f7f").MISSED_STICKY,s=i("c6b6"),a=i("9bf2").f,c=i("69f3").get,l=RegExp.prototype,u=n.TypeError;r&&o&&a(l,"sticky",{configurable:!0,get:function(){if(this!==l){if("RegExp"===s(this))return!!c(this).sticky;throw u("Incompatible receiver, RegExp required")}}})},"2caf":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));i("4ae1"),i("d3b7"),i("f8c9"),i("3410");function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}i("d9e2"),i("a4d3"),i("e01a"),i("d28b"),i("3ca3"),i("ddb0");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){if(t&&("object"===o(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function c(e){var t=r();return function(){var i,r=n(e);if(t){var o=n(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return a(this,i)}}},"2cf4":function(e,t,i){var n,r,o,s,a=i("da84"),c=i("2ba4"),l=i("0366"),u=i("1626"),d=i("1a2d"),h=i("d039"),p=i("1be4"),f=i("f36a"),g=i("cc12"),m=i("1cdc"),_=i("605d"),v=a.setImmediate,E=a.clearImmediate,A=a.process,y=a.Dispatch,S=a.Function,C=a.MessageChannel,b=a.String,T=0,I={},R="onreadystatechange";try{n=a.location}catch(L){}var w=function(e){if(d(I,e)){var t=I[e];delete I[e],t()}},O=function(e){return function(){w(e)}},k=function(e){w(e.data)},N=function(e){a.postMessage(b(e),n.protocol+"//"+n.host)};v&&E||(v=function(e){var t=f(arguments,1);return I[++T]=function(){c(u(e)?e:S(e),void 0,t)},r(T),T},E=function(e){delete I[e]},_?r=function(e){A.nextTick(O(e))}:y&&y.now?r=function(e){y.now(O(e))}:C&&!m?(o=new C,s=o.port2,o.port1.onmessage=k,r=l(s.postMessage,s)):a.addEventListener&&u(a.postMessage)&&!a.importScripts&&n&&"file:"!==n.protocol&&!h(N)?(r=N,a.addEventListener("message",k,!1)):r=R in g("script")?function(e){p.appendChild(g("script"))[R]=function(){p.removeChild(this),w(e)}}:function(e){setTimeout(O(e),0)}),e.exports={set:v,clear:E}},"2d00":function(e,t,i){var n,r,o=i("da84"),s=i("342f"),a=o.process,c=o.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(n=u.split("."),r=n[0]>0&&n[0]<4?1:+(n[0]+n[1])),!r&&s&&(n=s.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/),n&&(r=+n[1]))),e.exports=r},"2d83":function(e,t,i){"use strict";var n=i("387f");e.exports=function(e,t,i,r,o){var s=new Error(e);return n(s,t,i,r,o)}},"2e67":function(e,t,i){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"2f62":function(e,t,i){"use strict";(function(e){
/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */
function i(e){var t=Number(e.version.split(".")[0]);if(t>=2)e.mixin({beforeCreate:n});else{var i=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[n].concat(e.init):n,i.call(this,e)}}function n(){var e=this.$options;e.store?this.$store="function"===typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}var n="undefined"!==typeof window?window:"undefined"!==typeof e?e:{},r=n.__VUE_DEVTOOLS_GLOBAL_HOOK__;function o(e){r&&(e._devtoolHook=r,r.emit("vuex:init",e),r.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){r.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){r.emit("vuex:action",e,t)}),{prepend:!0}))}function s(e,t){return e.filter(t)[0]}function a(e,t){if(void 0===t&&(t=[]),null===e||"object"!==typeof e)return e;var i=s(t,(function(t){return t.original===e}));if(i)return i.copy;var n=Array.isArray(e)?[]:{};return t.push({original:e,copy:n}),Object.keys(e).forEach((function(i){n[i]=a(e[i],t)})),n}function c(e,t){Object.keys(e).forEach((function(i){return t(e[i],i)}))}function l(e){return null!==e&&"object"===typeof e}function u(e){return e&&"function"===typeof e.then}function d(e,t){return function(){return e(t)}}var h=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=("function"===typeof i?i():i)||{}},p={namespaced:{configurable:!0}};p.namespaced.get=function(){return!!this._rawModule.namespaced},h.prototype.addChild=function(e,t){this._children[e]=t},h.prototype.removeChild=function(e){delete this._children[e]},h.prototype.getChild=function(e){return this._children[e]},h.prototype.hasChild=function(e){return e in this._children},h.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},h.prototype.forEachChild=function(e){c(this._children,e)},h.prototype.forEachGetter=function(e){this._rawModule.getters&&c(this._rawModule.getters,e)},h.prototype.forEachAction=function(e){this._rawModule.actions&&c(this._rawModule.actions,e)},h.prototype.forEachMutation=function(e){this._rawModule.mutations&&c(this._rawModule.mutations,e)},Object.defineProperties(h.prototype,p);var f=function(e){this.register([],e,!1)};function g(e,t,i){if(t.update(i),i.modules)for(var n in i.modules){if(!t.getChild(n))return void 0;g(e.concat(n),t.getChild(n),i.modules[n])}}f.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},f.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,i){return t=t.getChild(i),e+(t.namespaced?i+"/":"")}),"")},f.prototype.update=function(e){g([],this.root,e)},f.prototype.register=function(e,t,i){var n=this;void 0===i&&(i=!0);var r=new h(t,i);if(0===e.length)this.root=r;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],r)}t.modules&&c(t.modules,(function(t,r){n.register(e.concat(r),t,i)}))},f.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1],n=t.getChild(i);n&&n.runtime&&t.removeChild(i)},f.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1];return!!t&&t.hasChild(i)};var m;var _=function(e){var t=this;void 0===e&&(e={}),!m&&"undefined"!==typeof window&&window.Vue&&N(window.Vue);var i=e.plugins;void 0===i&&(i=[]);var n=e.strict;void 0===n&&(n=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new f(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new m,this._makeLocalGettersCache=Object.create(null);var r=this,s=this,a=s.dispatch,c=s.commit;this.dispatch=function(e,t){return a.call(r,e,t)},this.commit=function(e,t,i){return c.call(r,e,t,i)},this.strict=n;var l=this._modules.root.state;S(this,l,[],this._modules.root),y(this,l),i.forEach((function(e){return e(t)}));var u=void 0!==e.devtools?e.devtools:m.config.devtools;u&&o(this)},v={state:{configurable:!0}};function E(e,t,i){return t.indexOf(e)<0&&(i&&i.prepend?t.unshift(e):t.push(e)),function(){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}function A(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var i=e.state;S(e,i,[],e._modules.root,!0),y(e,i,t)}function y(e,t,i){var n=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var r=e._wrappedGetters,o={};c(r,(function(t,i){o[i]=d(t,e),Object.defineProperty(e.getters,i,{get:function(){return e._vm[i]},enumerable:!0})}));var s=m.config.silent;m.config.silent=!0,e._vm=new m({data:{$$state:t},computed:o}),m.config.silent=s,e.strict&&w(e),n&&(i&&e._withCommit((function(){n._data.$$state=null})),m.nextTick((function(){return n.$destroy()})))}function S(e,t,i,n,r){var o=!i.length,s=e._modules.getNamespace(i);if(n.namespaced&&(e._modulesNamespaceMap[s],e._modulesNamespaceMap[s]=n),!o&&!r){var a=O(t,i.slice(0,-1)),c=i[i.length-1];e._withCommit((function(){m.set(a,c,n.state)}))}var l=n.context=C(e,s,i);n.forEachMutation((function(t,i){var n=s+i;T(e,n,t,l)})),n.forEachAction((function(t,i){var n=t.root?i:s+i,r=t.handler||t;I(e,n,r,l)})),n.forEachGetter((function(t,i){var n=s+i;R(e,n,t,l)})),n.forEachChild((function(n,o){S(e,t,i.concat(o),n,r)}))}function C(e,t,i){var n=""===t,r={dispatch:n?e.dispatch:function(i,n,r){var o=k(i,n,r),s=o.payload,a=o.options,c=o.type;return a&&a.root||(c=t+c),e.dispatch(c,s)},commit:n?e.commit:function(i,n,r){var o=k(i,n,r),s=o.payload,a=o.options,c=o.type;a&&a.root||(c=t+c),e.commit(c,s,a)}};return Object.defineProperties(r,{getters:{get:n?function(){return e.getters}:function(){return b(e,t)}},state:{get:function(){return O(e.state,i)}}}),r}function b(e,t){if(!e._makeLocalGettersCache[t]){var i={},n=t.length;Object.keys(e.getters).forEach((function(r){if(r.slice(0,n)===t){var o=r.slice(n);Object.defineProperty(i,o,{get:function(){return e.getters[r]},enumerable:!0})}})),e._makeLocalGettersCache[t]=i}return e._makeLocalGettersCache[t]}function T(e,t,i,n){var r=e._mutations[t]||(e._mutations[t]=[]);r.push((function(t){i.call(e,n.state,t)}))}function I(e,t,i,n){var r=e._actions[t]||(e._actions[t]=[]);r.push((function(t){var r=i.call(e,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:e.getters,rootState:e.state},t);return u(r)||(r=Promise.resolve(r)),e._devtoolHook?r.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):r}))}function R(e,t,i,n){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return i(n.state,n.getters,e.state,e.getters)})}function w(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function O(e,t){return t.reduce((function(e,t){return e[t]}),e)}function k(e,t,i){return l(e)&&e.type&&(i=t,t=e,e=e.type),{type:e,payload:t,options:i}}function N(e){m&&e===m||(m=e,i(m))}v.state.get=function(){return this._vm._data.$$state},v.state.set=function(e){0},_.prototype.commit=function(e,t,i){var n=this,r=k(e,t,i),o=r.type,s=r.payload,a=(r.options,{type:o,payload:s}),c=this._mutations[o];c&&(this._withCommit((function(){c.forEach((function(e){e(s)}))})),this._subscribers.slice().forEach((function(e){return e(a,n.state)})))},_.prototype.dispatch=function(e,t){var i=this,n=k(e,t),r=n.type,o=n.payload,s={type:r,payload:o},a=this._actions[r];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(s,i.state)}))}catch(l){0}var c=a.length>1?Promise.all(a.map((function(e){return e(o)}))):a[0](o);return new Promise((function(e,t){c.then((function(t){try{i._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(s,i.state)}))}catch(l){0}e(t)}),(function(e){try{i._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(s,i.state,e)}))}catch(l){0}t(e)}))}))}},_.prototype.subscribe=function(e,t){return E(e,this._subscribers,t)},_.prototype.subscribeAction=function(e,t){var i="function"===typeof e?{before:e}:e;return E(i,this._actionSubscribers,t)},_.prototype.watch=function(e,t,i){var n=this;return this._watcherVM.$watch((function(){return e(n.state,n.getters)}),t,i)},_.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},_.prototype.registerModule=function(e,t,i){void 0===i&&(i={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),S(this,this.state,e,this._modules.get(e),i.preserveState),y(this,this.state)},_.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var i=O(t.state,e.slice(0,-1));m.delete(i,e[e.length-1])})),A(this)},_.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),this._modules.isRegistered(e)},_.prototype.hotUpdate=function(e){this._modules.update(e),A(this,!0)},_.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(_.prototype,v);var L=F((function(e,t){var i={};return B(t).forEach((function(t){var n=t.key,r=t.val;i[n]=function(){var t=this.$store.state,i=this.$store.getters;if(e){var n=V(this.$store,"mapState",e);if(!n)return;t=n.context.state,i=n.context.getters}return"function"===typeof r?r.call(this,t,i):t[r]},i[n].vuex=!0})),i})),P=F((function(e,t){var i={};return B(t).forEach((function(t){var n=t.key,r=t.val;i[n]=function(){var t=[],i=arguments.length;while(i--)t[i]=arguments[i];var n=this.$store.commit;if(e){var o=V(this.$store,"mapMutations",e);if(!o)return;n=o.context.commit}return"function"===typeof r?r.apply(this,[n].concat(t)):n.apply(this.$store,[r].concat(t))}})),i})),D=F((function(e,t){var i={};return B(t).forEach((function(t){var n=t.key,r=t.val;r=e+r,i[n]=function(){if(!e||V(this.$store,"mapGetters",e))return this.$store.getters[r]},i[n].vuex=!0})),i})),M=F((function(e,t){var i={};return B(t).forEach((function(t){var n=t.key,r=t.val;i[n]=function(){var t=[],i=arguments.length;while(i--)t[i]=arguments[i];var n=this.$store.dispatch;if(e){var o=V(this.$store,"mapActions",e);if(!o)return;n=o.context.dispatch}return"function"===typeof r?r.apply(this,[n].concat(t)):n.apply(this.$store,[r].concat(t))}})),i})),x=function(e){return{mapState:L.bind(null,e),mapGetters:D.bind(null,e),mapMutations:P.bind(null,e),mapActions:M.bind(null,e)}};function B(e){return U(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function U(e){return Array.isArray(e)||l(e)}function F(e){return function(t,i){return"string"!==typeof t?(i=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,i)}}function V(e,t,i){var n=e._modulesNamespaceMap[i];return n}function j(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var i=e.filter;void 0===i&&(i=function(e,t,i){return!0});var n=e.transformer;void 0===n&&(n=function(e){return e});var r=e.mutationTransformer;void 0===r&&(r=function(e){return e});var o=e.actionFilter;void 0===o&&(o=function(e,t){return!0});var s=e.actionTransformer;void 0===s&&(s=function(e){return e});var c=e.logMutations;void 0===c&&(c=!0);var l=e.logActions;void 0===l&&(l=!0);var u=e.logger;return void 0===u&&(u=console),function(e){var d=a(e.state);"undefined"!==typeof u&&(c&&e.subscribe((function(e,o){var s=a(o);if(i(e,d,s)){var c=Q(),l=r(e),h="mutation "+e.type+c;G(u,h,t),u.log("%c prev state","color: #9E9E9E; font-weight: bold",n(d)),u.log("%c mutation","color: #03A9F4; font-weight: bold",l),u.log("%c next state","color: #4CAF50; font-weight: bold",n(s)),H(u)}d=s})),l&&e.subscribeAction((function(e,i){if(o(e,i)){var n=Q(),r=s(e),a="action "+e.type+n;G(u,a,t),u.log("%c action","color: #03A9F4; font-weight: bold",r),H(u)}})))}}function G(e,t,i){var n=i?e.groupCollapsed:e.group;try{n.call(e,t)}catch(r){e.log(t)}}function H(e){try{e.groupEnd()}catch(t){e.log("—— log end ——")}}function Q(){var e=new Date;return" @ "+q(e.getHours(),2)+":"+q(e.getMinutes(),2)+":"+q(e.getSeconds(),2)+"."+q(e.getMilliseconds(),3)}function W(e,t){return new Array(t+1).join(e)}function q(e,t){return W("0",t-e.toString().length)+e}var $={Store:_,install:N,version:"3.6.2",mapState:L,mapMutations:P,mapGetters:D,mapActions:M,createNamespacedHelpers:x,createLogger:j};t["a"]=$}).call(this,i("c8ba"))},"2f9a":function(e,t){e.exports=function(){}},"301c":function(e,t,i){i("e198")("asyncIterator")},"30b5":function(e,t,i){"use strict";var n=i("c532");function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,i){if(!t)return e;var o;if(i)o=i(t);else if(n.isURLSearchParams(t))o=t.toString();else{var s=[];n.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+"="+r(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},3280:function(e,t,i){"use strict";var n=i("ebb5"),r=i("2ba4"),o=i("e58c"),s=n.aTypedArray,a=n.exportTypedArrayMethod;a("lastIndexOf",(function(e){var t=arguments.length;return r(o,s(this),t>1?[e,arguments[1]]:[e])}))},3397:function(e,t,i){var n=i("7a41");e.exports=function(e,t){if(!n(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!n(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},3410:function(e,t,i){var n=i("23e7"),r=i("d039"),o=i("7b0b"),s=i("e163"),a=i("e177"),c=r((function(){s(1)}));n({target:"Object",stat:!0,forced:c,sham:!a},{getPrototypeOf:function(e){return s(o(e))}})},"342f":function(e,t,i){var n=i("d066");e.exports=n("navigator","userAgent")||""},"35a1":function(e,t,i){var n=i("f5df"),r=i("dc4a"),o=i("3f8c"),s=i("b622"),a=s("iterator");e.exports=function(e){if(void 0!=e)return r(e,a)||r(e,"@@iterator")||o[n(e)]}},"37e8":function(e,t,i){var n=i("83ab"),r=i("aed9"),o=i("9bf2"),s=i("825a"),a=i("fc6a"),c=i("df75");t.f=n&&!r?Object.defineProperties:function(e,t){s(e);var i,n=a(t),r=c(t),l=r.length,u=0;while(l>u)o.f(e,i=r[u++],n[i]);return e}},"387f":function(e,t,i){"use strict";e.exports=function(e,t,i,n,r){return e.config=t,i&&(e.code=i),e.request=n,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},3934:function(e,t,i){"use strict";var n=i("c532");e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function r(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=r(window.location.href),function(t){var i=n.isString(t)?r(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return function(){return!0}}()},"393a":function(e,t,i){"use strict";var n=i("e444"),r=i("512c"),o=i("ba01"),s=i("051b"),a=i("8a0d"),c=i("26dd"),l=i("92f0"),u=i("ce7a"),d=i("cc15")("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",f="keys",g="values",m=function(){return this};e.exports=function(e,t,i,_,v,E,A){c(i,t,_);var y,S,C,b=function(e){if(!h&&e in w)return w[e];switch(e){case f:return function(){return new i(this,e)};case g:return function(){return new i(this,e)}}return function(){return new i(this,e)}},T=t+" Iterator",I=v==g,R=!1,w=e.prototype,O=w[d]||w[p]||v&&w[v],k=O||b(v),N=v?I?b("entries"):k:void 0,L="Array"==t&&w.entries||O;if(L&&(C=u(L.call(new e)),C!==Object.prototype&&C.next&&(l(C,T,!0),n||"function"==typeof C[d]||s(C,d,m))),I&&O&&O.name!==g&&(R=!0,k=function(){return O.call(this)}),n&&!A||!h&&!R&&w[d]||s(w,d,k),a[t]=k,a[T]=m,v)if(y={values:I?k:b(g),keys:E?k:b(f),entries:N},A)for(S in y)S in w||o(w,S,y[S]);else r(r.P+r.F*(h||R),t,y);return y}},"39ad":function(e,t,i){var n=i("6ca1"),r=i("d16a"),o=i("9d11");e.exports=function(e){return function(t,i,s){var a,c=n(t),l=r(c.length),u=o(s,l);if(e&&i!=i){while(l>u)if(a=c[u++],a!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===i)return e||u||0;return!e&&-1}}},"3a34":function(module,exports,__webpack_require__){(function(global){
/*!
 * vConsole v3.11.2 (https://github.com/Tencent/vConsole)
 *
 * Tencent is pleased to support the open source community by making vConsole available.
 * Copyright (C) 2017 THL A29 Limited, a Tencent company. All rights reserved.
 * Licensed under the MIT License (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at
 * http://opensource.org/licenses/MIT
 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
 */
!function(e,t){module.exports=t()}(this||self,(function(){return function(){var __webpack_modules__={8406:function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.CookieStorage=void 0;var r=i(9390),o=i(4370),s=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._defaultOptions=Object.assign({domain:null,expires:null,path:null,secure:!1},t),"undefined"!=typeof Proxy)return new Proxy(this,a)}var t,i,s;return t=e,(i=[{key:"clear",value:function(){var e=this,t=o.parseCookies(this._getCookie());Object.keys(t).forEach((function(t){return e.removeItem(t)}))}},{key:"getItem",value:function(e){var t=o.parseCookies(this._getCookie());return Object.prototype.hasOwnProperty.call(t,e)?t[e]:null}},{key:"key",value:function(e){var t=o.parseCookies(this._getCookie()),i=Object.keys(t).sort();return e<i.length?i[e]:null}},{key:"removeItem",value:function(e,t){var i=Object.assign(Object.assign(Object.assign({},this._defaultOptions),t),{expires:new Date(0)}),n=r.formatCookie(e,"",i);this._setCookie(n)}},{key:"setItem",value:function(e,t,i){var n=Object.assign(Object.assign({},this._defaultOptions),i),o=r.formatCookie(e,t,n);this._setCookie(o)}},{key:"_getCookie",value:function(){return"undefined"==typeof document||void 0===document.cookie?"":document.cookie}},{key:"_setCookie",value:function(e){document.cookie=e}},{key:"length",get:function(){var e=o.parseCookies(this._getCookie());return Object.keys(e).length}}])&&n(t.prototype,i),s&&n(t,s),e}();t.CookieStorage=s;var a={defineProperty:function(e,t,i){return e.setItem(t.toString(),String(i.value)),!0},deleteProperty:function(e,t){return e.removeItem(t.toString()),!0},get:function(e,t,i){if("string"==typeof t&&t in e)return e[t];var n=e.getItem(t.toString());return null!==n?n:void 0},getOwnPropertyDescriptor:function(e,t){if(!(t in e))return{configurable:!0,enumerable:!0,value:e.getItem(t.toString()),writable:!0}},has:function(e,t){return"string"==typeof t&&t in e||null!==e.getItem(t.toString())},ownKeys:function(e){for(var t=[],i=0;i<e.length;i++){var n=e.key(i);null!==n&&t.push(n)}return t},preventExtensions:function(e){throw new TypeError("can't prevent extensions on this proxy object")},set:function(e,t,i,n){return e.setItem(t.toString(),String(i)),!0}}},9390:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatCookie=void 0;var i=function(e){var t=e.path,i=e.domain,n=e.expires,r=e.secure,o=function(e){var t=e.sameSite;return void 0===t?null:["none","lax","strict"].indexOf(t.toLowerCase())>=0?t:null}(e);return[null==t?"":";path="+t,null==i?"":";domain="+i,null==n?"":";expires="+n.toUTCString(),void 0===r||!1===r?"":";secure",null===o?"":";SameSite="+o].join("")};t.formatCookie=function(e,t,n){return[encodeURIComponent(e),"=",encodeURIComponent(t),i(n)].join("")}},6025:function(e,t,i){"use strict";var n=i(8406);Object.defineProperty(t,"eR",{enumerable:!0,get:function(){return n.CookieStorage}});i(9390),i(4370)},4370:function(e,t){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.parseCookies=void 0,t.parseCookies=function(e){if(0===e.length)return{};var t={},n=new RegExp("\\s*;\\s*");return e.split(n).forEach((function(e){var n=i(e.split("="),2),r=n[0],o=n[1],s=decodeURIComponent(r),a=decodeURIComponent(o);t[s]=a})),t}},2582:function(e,t,i){i(1646),i(6394),i(2004),i(462),i(8407),i(2429),i(1172),i(8288),i(1274),i(8201),i(6626),i(3211),i(9952),i(15),i(9831),i(7521),i(2972),i(6956),i(5222),i(2257);var n=i(1287);e.exports=n.Symbol},6163:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},2569:function(e,t,i){var n=i(794);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},5766:function(e,t,i){var n=i(2977),r=i(97),o=i(6782),s=function(e){return function(t,i,s){var a,c=n(t),l=r(c.length),u=o(s,l);if(e&&i!=i){for(;l>u;)if((a=c[u++])!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===i)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},4805:function(e,t,i){var n=i(2938),r=i(5044),o=i(1324),s=i(97),a=i(4822),c=[].push,l=function(e){var t=1==e,i=2==e,l=3==e,u=4==e,d=6==e,h=7==e,p=5==e||d;return function(f,g,m,_){for(var v,E,A=o(f),y=r(A),S=n(g,m,3),C=s(y.length),b=0,T=_||a,I=t?T(f,C):i||h?T(f,0):void 0;C>b;b++)if((p||b in y)&&(E=S(v=y[b],b,A),e))if(t)I[b]=E;else if(E)switch(e){case 3:return!0;case 5:return v;case 6:return b;case 2:c.call(I,v)}else switch(e){case 4:return!1;case 7:c.call(I,v)}return d?-1:l||u?u:I}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},9269:function(e,t,i){var n=i(6544),r=i(3649),o=i(4061),s=r("species");e.exports=function(e){return o>=51||!n((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},4822:function(e,t,i){var n=i(794),r=i(4521),o=i(3649)("species");e.exports=function(e,t){var i;return r(e)&&("function"!=typeof(i=e.constructor)||i!==Array&&!r(i.prototype)?n(i)&&null===(i=i[o])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===t?0:t)}},9624:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},3058:function(e,t,i){var n=i(8191),r=i(9624),o=i(3649)("toStringTag"),s="Arguments"==r(function(){return arguments}());e.exports=n?r:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?i:s?r(t):"Object"==(n=r(t))&&"function"==typeof t.callee?"Arguments":n}},3478:function(e,t,i){var n=i(4402),r=i(929),o=i(6683),s=i(4615);e.exports=function(e,t){for(var i=r(t),a=s.f,c=o.f,l=0;l<i.length;l++){var u=i[l];n(e,u)||a(e,u,c(t,u))}}},57:function(e,t,i){var n=i(8494),r=i(4615),o=i(4677);e.exports=n?function(e,t,i){return r.f(e,t,o(1,i))}:function(e,t,i){return e[t]=i,e}},4677:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},5999:function(e,t,i){"use strict";var n=i(2670),r=i(4615),o=i(4677);e.exports=function(e,t,i){var s=n(t);s in e?r.f(e,s,o(0,i)):e[s]=i}},2219:function(e,t,i){var n=i(1287),r=i(4402),o=i(491),s=i(4615).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});r(t,e)||s(t,e,{value:o.f(e)})}},8494:function(e,t,i){var n=i(6544);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},6668:function(e,t,i){var n=i(7583),r=i(794),o=n.document,s=r(o)&&r(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},6918:function(e,t,i){var n=i(5897);e.exports=n("navigator","userAgent")||""},4061:function(e,t,i){var n,r,o=i(7583),s=i(6918),a=o.process,c=a&&a.versions,l=c&&c.v8;l?r=(n=l.split("."))[0]<4?1:n[0]+n[1]:s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(r=n[1]),e.exports=r&&+r},5690:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7263:function(e,t,i){var n=i(7583),r=i(6683).f,o=i(57),s=i(1270),a=i(460),c=i(3478),l=i(4451);e.exports=function(e,t){var i,u,d,h,p,f=e.target,g=e.global,m=e.stat;if(i=g?n:m?n[f]||a(f,{}):(n[f]||{}).prototype)for(u in t){if(h=t[u],d=e.noTargetGet?(p=r(i,u))&&p.value:i[u],!l(g?u:f+(m?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;c(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),s(i,u,h,e)}}},6544:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},2938:function(e,t,i){var n=i(6163);e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 0:return function(){return e.call(t)};case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)}}return function(){return e.apply(t,arguments)}}},5897:function(e,t,i){var n=i(1287),r=i(7583),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(n[e])||o(r[e]):n[e]&&n[e][t]||r[e]&&r[e][t]}},7583:function(e,t,i){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof i.g&&i.g)||function(){return this}()||Function("return this")()},4402:function(e,t,i){var n=i(1324),r={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return r.call(n(e),t)}},4639:function(e){e.exports={}},482:function(e,t,i){var n=i(5897);e.exports=n("document","documentElement")},275:function(e,t,i){var n=i(8494),r=i(6544),o=i(6668);e.exports=!n&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},5044:function(e,t,i){var n=i(6544),r=i(9624),o="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?o.call(e,""):Object(e)}:Object},9734:function(e,t,i){var n=i(1314),r=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return r.call(e)}),e.exports=n.inspectSource},2743:function(e,t,i){var n,r,o,s=i(9491),a=i(7583),c=i(794),l=i(57),u=i(4402),d=i(1314),h=i(9137),p=i(4639),f="Object already initialized",g=a.WeakMap;if(s||d.state){var m=d.state||(d.state=new g),_=m.get,v=m.has,E=m.set;n=function(e,t){if(v.call(m,e))throw new TypeError(f);return t.facade=e,E.call(m,e,t),t},r=function(e){return _.call(m,e)||{}},o=function(e){return v.call(m,e)}}else{var A=h("state");p[A]=!0,n=function(e,t){if(u(e,A))throw new TypeError(f);return t.facade=e,l(e,A,t),t},r=function(e){return u(e,A)?e[A]:{}},o=function(e){return u(e,A)}}e.exports={set:n,get:r,has:o,enforce:function(e){return o(e)?r(e):n(e,{})},getterFor:function(e){return function(t){var i;if(!c(t)||(i=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return i}}}},4521:function(e,t,i){var n=i(9624);e.exports=Array.isArray||function(e){return"Array"==n(e)}},4451:function(e,t,i){var n=i(6544),r=/#|\.prototype\./,o=function(e,t){var i=a[s(e)];return i==l||i!=c&&("function"==typeof t?n(t):!!t)},s=o.normalize=function(e){return String(e).replace(r,".").toLowerCase()},a=o.data={},c=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},794:function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},6268:function(e){e.exports=!1},8640:function(e,t,i){var n=i(4061),r=i(6544);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},9491:function(e,t,i){var n=i(7583),r=i(9734),o=n.WeakMap;e.exports="function"==typeof o&&/native code/.test(r(o))},3590:function(e,t,i){var n,r=i(2569),o=i(8728),s=i(5690),a=i(4639),c=i(482),l=i(6668),u=i(9137),d=u("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"<\/script>"},f=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;f=n?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var i=s.length;i--;)delete f.prototype[s[i]];return f()};a[d]=!0,e.exports=Object.create||function(e,t){var i;return null!==e?(h.prototype=r(e),i=new h,h.prototype=null,i[d]=e):i=f(),void 0===t?i:o(i,t)}},8728:function(e,t,i){var n=i(8494),r=i(4615),o=i(2569),s=i(5432);e.exports=n?Object.defineProperties:function(e,t){o(e);for(var i,n=s(t),a=n.length,c=0;a>c;)r.f(e,i=n[c++],t[i]);return e}},4615:function(e,t,i){var n=i(8494),r=i(275),o=i(2569),s=i(2670),a=Object.defineProperty;t.f=n?a:function(e,t,i){if(o(e),t=s(t,!0),o(i),r)try{return a(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},6683:function(e,t,i){var n=i(8494),r=i(112),o=i(4677),s=i(2977),a=i(2670),c=i(4402),l=i(275),u=Object.getOwnPropertyDescriptor;t.f=n?u:function(e,t){if(e=s(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(c(e,t))return o(!r.f.call(e,t),e[t])}},3130:function(e,t,i){var n=i(2977),r=i(9275).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return s.slice()}}(e):r(n(e))}},9275:function(e,t,i){var n=i(8356),r=i(5690).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,r)}},4012:function(e,t){t.f=Object.getOwnPropertySymbols},8356:function(e,t,i){var n=i(4402),r=i(2977),o=i(5766).indexOf,s=i(4639);e.exports=function(e,t){var i,a=r(e),c=0,l=[];for(i in a)!n(s,i)&&n(a,i)&&l.push(i);for(;t.length>c;)n(a,i=t[c++])&&(~o(l,i)||l.push(i));return l}},5432:function(e,t,i){var n=i(8356),r=i(5690);e.exports=Object.keys||function(e){return n(e,r)}},112:function(e,t){"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,r=n&&!i.call({1:2},1);t.f=r?function(e){var t=n(this,e);return!!t&&t.enumerable}:i},3060:function(e,t,i){"use strict";var n=i(8191),r=i(3058);e.exports=n?{}.toString:function(){return"[object "+r(this)+"]"}},929:function(e,t,i){var n=i(5897),r=i(9275),o=i(4012),s=i(2569);e.exports=n("Reflect","ownKeys")||function(e){var t=r.f(s(e)),i=o.f;return i?t.concat(i(e)):t}},1287:function(e,t,i){var n=i(7583);e.exports=n},1270:function(e,t,i){var n=i(7583),r=i(57),o=i(4402),s=i(460),a=i(9734),c=i(2743),l=c.get,u=c.enforce,d=String(String).split("String");(e.exports=function(e,t,i,a){var c,l=!!a&&!!a.unsafe,h=!!a&&!!a.enumerable,p=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof t||o(i,"name")||r(i,"name",t),(c=u(i)).source||(c.source=d.join("string"==typeof t?t:""))),e!==n?(l?!p&&e[t]&&(h=!0):delete e[t],h?e[t]=i:r(e,t,i)):h?e[t]=i:s(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||a(this)}))},3955:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},460:function(e,t,i){var n=i(7583),r=i(57);e.exports=function(e,t){try{r(n,e,t)}catch(i){n[e]=t}return t}},8821:function(e,t,i){var n=i(4615).f,r=i(4402),o=i(3649)("toStringTag");e.exports=function(e,t,i){e&&!r(e=i?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},9137:function(e,t,i){var n=i(7836),r=i(8284),o=n("keys");e.exports=function(e){return o[e]||(o[e]=r(e))}},1314:function(e,t,i){var n=i(7583),r=i(460),o="__core-js_shared__",s=n[o]||r(o,{});e.exports=s},7836:function(e,t,i){var n=i(6268),r=i(1314);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.15.2",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},6782:function(e,t,i){var n=i(5089),r=Math.max,o=Math.min;e.exports=function(e,t){var i=n(e);return i<0?r(i+t,0):o(i,t)}},2977:function(e,t,i){var n=i(5044),r=i(3955);e.exports=function(e){return n(r(e))}},5089:function(e){var t=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:t)(e)}},97:function(e,t,i){var n=i(5089),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},1324:function(e,t,i){var n=i(3955);e.exports=function(e){return Object(n(e))}},2670:function(e,t,i){var n=i(794);e.exports=function(e,t){if(!n(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!n(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},8191:function(e,t,i){var n={};n[i(3649)("toStringTag")]="z",e.exports="[object z]"===String(n)},8284:function(e){var t=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+i).toString(36)}},7786:function(e,t,i){var n=i(8640);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},491:function(e,t,i){var n=i(3649);t.f=n},3649:function(e,t,i){var n=i(7583),r=i(7836),o=i(4402),s=i(8284),a=i(8640),c=i(7786),l=r("wks"),u=n.Symbol,d=c?u:u&&u.withoutSetter||s;e.exports=function(e){return o(l,e)&&(a||"string"==typeof l[e])||(a&&o(u,e)?l[e]=u[e]:l[e]=d("Symbol."+e)),l[e]}},1646:function(e,t,i){"use strict";var n=i(7263),r=i(6544),o=i(4521),s=i(794),a=i(1324),c=i(97),l=i(5999),u=i(4822),d=i(9269),h=i(3649),p=i(4061),f=h("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",_=p>=51||!r((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),v=d("concat"),E=function(e){if(!s(e))return!1;var t=e[f];return void 0!==t?!!t:o(e)};n({target:"Array",proto:!0,forced:!_||!v},{concat:function(e){var t,i,n,r,o,s=a(this),d=u(s,0),h=0;for(t=-1,n=arguments.length;t<n;t++)if(E(o=-1===t?s:arguments[t])){if(h+(r=c(o.length))>g)throw TypeError(m);for(i=0;i<r;i++,h++)i in o&&l(d,h,o[i])}else{if(h>=g)throw TypeError(m);l(d,h++,o)}return d.length=h,d}})},6956:function(e,t,i){var n=i(7583);i(8821)(n.JSON,"JSON",!0)},5222:function(e,t,i){i(8821)(Math,"Math",!0)},6394:function(e,t,i){var n=i(8191),r=i(1270),o=i(3060);n||r(Object.prototype,"toString",o,{unsafe:!0})},2257:function(e,t,i){var n=i(7263),r=i(7583),o=i(8821);n({global:!0},{Reflect:{}}),o(r.Reflect,"Reflect",!0)},462:function(e,t,i){i(2219)("asyncIterator")},8407:function(e,t,i){"use strict";var n=i(7263),r=i(8494),o=i(7583),s=i(4402),a=i(794),c=i(4615).f,l=i(3478),u=o.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof h?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};l(h,u);var p=h.prototype=u.prototype;p.constructor=h;var f=p.toString,g="Symbol(test)"==String(u("test")),m=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var e=a(this)?this.valueOf():this,t=f.call(e);if(s(d,e))return"";var i=g?t.slice(7,-1):t.replace(m,"$1");return""===i?void 0:i}}),n({global:!0,forced:!0},{Symbol:h})}},2429:function(e,t,i){i(2219)("hasInstance")},1172:function(e,t,i){i(2219)("isConcatSpreadable")},8288:function(e,t,i){i(2219)("iterator")},2004:function(e,t,i){"use strict";var n=i(7263),r=i(7583),o=i(5897),s=i(6268),a=i(8494),c=i(8640),l=i(7786),u=i(6544),d=i(4402),h=i(4521),p=i(794),f=i(2569),g=i(1324),m=i(2977),_=i(2670),v=i(4677),E=i(3590),A=i(5432),y=i(9275),S=i(3130),C=i(4012),b=i(6683),T=i(4615),I=i(112),R=i(57),w=i(1270),O=i(7836),k=i(9137),N=i(4639),L=i(8284),P=i(3649),D=i(491),M=i(2219),x=i(8821),B=i(2743),U=i(4805).forEach,F=k("hidden"),V="Symbol",j=P("toPrimitive"),G=B.set,H=B.getterFor(V),Q=Object.prototype,W=r.Symbol,q=o("JSON","stringify"),$=b.f,z=T.f,Z=S.f,Y=I.f,K=O("symbols"),J=O("op-symbols"),X=O("string-to-symbol-registry"),ee=O("symbol-to-string-registry"),te=O("wks"),ie=r.QObject,ne=!ie||!ie.prototype||!ie.prototype.findChild,re=a&&u((function(){return 7!=E(z({},"a",{get:function(){return z(this,"a",{value:7}).a}})).a}))?function(e,t,i){var n=$(Q,t);n&&delete Q[t],z(e,t,i),n&&e!==Q&&z(Q,t,n)}:z,oe=function(e,t){var i=K[e]=E(W.prototype);return G(i,{type:V,tag:e,description:t}),a||(i.description=t),i},se=l?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof W},ae=function(e,t,i){e===Q&&ae(J,t,i),f(e);var n=_(t,!0);return f(i),d(K,n)?(i.enumerable?(d(e,F)&&e[F][n]&&(e[F][n]=!1),i=E(i,{enumerable:v(0,!1)})):(d(e,F)||z(e,F,v(1,{})),e[F][n]=!0),re(e,n,i)):z(e,n,i)},ce=function(e,t){f(e);var i=m(t),n=A(i).concat(he(i));return U(n,(function(t){a&&!le.call(i,t)||ae(e,t,i[t])})),e},le=function(e){var t=_(e,!0),i=Y.call(this,t);return!(this===Q&&d(K,t)&&!d(J,t))&&(!(i||!d(this,t)||!d(K,t)||d(this,F)&&this[F][t])||i)},ue=function(e,t){var i=m(e),n=_(t,!0);if(i!==Q||!d(K,n)||d(J,n)){var r=$(i,n);return!r||!d(K,n)||d(i,F)&&i[F][n]||(r.enumerable=!0),r}},de=function(e){var t=Z(m(e)),i=[];return U(t,(function(e){d(K,e)||d(N,e)||i.push(e)})),i},he=function(e){var t=e===Q,i=Z(t?J:m(e)),n=[];return U(i,(function(e){!d(K,e)||t&&!d(Q,e)||n.push(K[e])})),n};c||(w((W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=L(e),i=function e(i){this===Q&&e.call(J,i),d(this,F)&&d(this[F],t)&&(this[F][t]=!1),re(this,t,v(1,i))};return a&&ne&&re(Q,t,{configurable:!0,set:i}),oe(t,e)}).prototype,"toString",(function(){return H(this).tag})),w(W,"withoutSetter",(function(e){return oe(L(e),e)})),I.f=le,T.f=ae,b.f=ue,y.f=S.f=de,C.f=he,D.f=function(e){return oe(P(e),e)},a&&(z(W.prototype,"description",{configurable:!0,get:function(){return H(this).description}}),s||w(Q,"propertyIsEnumerable",le,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:W}),U(A(te),(function(e){M(e)})),n({target:V,stat:!0,forced:!c},{for:function(e){var t=String(e);if(d(X,t))return X[t];var i=W(t);return X[t]=i,ee[i]=t,i},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(d(ee,e))return ee[e]},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),n({target:"Object",stat:!0,forced:!c,sham:!a},{create:function(e,t){return void 0===t?E(e):ce(E(e),t)},defineProperty:ae,defineProperties:ce,getOwnPropertyDescriptor:ue}),n({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:de,getOwnPropertySymbols:he}),n({target:"Object",stat:!0,forced:u((function(){C.f(1)}))},{getOwnPropertySymbols:function(e){return C.f(g(e))}}),q&&n({target:"JSON",stat:!0,forced:!c||u((function(){var e=W();return"[null]"!=q([e])||"{}"!=q({a:e})||"{}"!=q(Object(e))}))},{stringify:function(e,t,i){for(var n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t,(p(t)||void 0!==e)&&!se(e))return h(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!se(t))return t}),r[1]=t,q.apply(null,r)}}),W.prototype[j]||R(W.prototype,j,W.prototype.valueOf),x(W,V),N[F]=!0},8201:function(e,t,i){i(2219)("matchAll")},1274:function(e,t,i){i(2219)("match")},6626:function(e,t,i){i(2219)("replace")},3211:function(e,t,i){i(2219)("search")},9952:function(e,t,i){i(2219)("species")},15:function(e,t,i){i(2219)("split")},9831:function(e,t,i){i(2219)("toPrimitive")},7521:function(e,t,i){i(2219)("toStringTag")},2972:function(e,t,i){i(2219)("unscopables")},5441:function(e,t,i){var n=i(2582);e.exports=n},7705:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=e(t);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(r[s]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);n&&r[c[0]]||(i&&(c[2]?c[2]="".concat(i," and ").concat(c[2]):c[2]=i),t.push(c))}},t}},8679:function(e){var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i=window.WeakMap;if(void 0===i){var n=Object.defineProperty,r=Date.now()%1e9;(i=function(){this.name="__st"+(1e9*Math.random()>>>0)+r+++"__"}).prototype={set:function(e,t){var i=e[this.name];return i&&i[0]===e?i[1]=t:n(e,this.name,{value:[e,t],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];if(!t)return!1;var i=t[0]===e;return t[0]=t[1]=void 0,i},has:function(e){var t=e[this.name];return!!t&&t[0]===e}}}var o=new i,s=window.msSetImmediate;if(!s){var a=[],c=String(Math.random());window.addEventListener("message",(function(e){if(e.data===c){var t=a;a=[],t.forEach((function(e){e()}))}})),s=function(e){a.push(e),window.postMessage(c,"*")}}var l=!1,u=[];function d(){l=!1;var e=u;u=[],e.sort((function(e,t){return e.uid_-t.uid_}));var t=!1;e.forEach((function(e){var i=e.takeRecords();!function(e){e.nodes_.forEach((function(t){var i=o.get(t);i&&i.forEach((function(t){t.observer===e&&t.removeTransientObservers()}))}))}(e),i.length&&(e.callback_(i,e),t=!0)})),t&&d()}function h(e,t){for(var i=e;i;i=i.parentNode){var n=o.get(i);if(n)for(var r=0;r<n.length;r++){var s=n[r],a=s.options;if(i===e||a.subtree){var c=t(a);c&&s.enqueue(c)}}}}var p,f,g=0;function m(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++g}function _(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function v(e,t){return p=new _(e,t)}function E(e){return f||((i=new _((t=p).type,t.target)).addedNodes=t.addedNodes.slice(),i.removedNodes=t.removedNodes.slice(),i.previousSibling=t.previousSibling,i.nextSibling=t.nextSibling,i.attributeName=t.attributeName,i.attributeNamespace=t.attributeNamespace,i.oldValue=t.oldValue,(f=i).oldValue=e,f);var t,i}function A(e,t){return e===t?e:!f||(i=e)!==f&&i!==p?null:f;var i}function y(e,t,i){this.observer=e,this.target=t,this.options=i,this.transientObservedNodes=[]}m.prototype={observe:function(e,t){var i;if(i=e,e=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(i)||i,!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var n,r=o.get(e);r||o.set(e,r=[]);for(var s=0;s<r.length;s++)if(r[s].observer===this){(n=r[s]).removeListeners(),n.options=t;break}n||(n=new y(this,e,t),r.push(n),this.nodes_.push(e)),n.addListeners()},disconnect:function(){this.nodes_.forEach((function(e){for(var t=o.get(e),i=0;i<t.length;i++){var n=t[i];if(n.observer===this){n.removeListeners(),t.splice(i,1);break}}}),this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}},y.prototype={enqueue:function(e){var t,i=this.observer.records_,n=i.length;if(i.length>0){var r=A(i[n-1],e);if(r)return void(i[n-1]=r)}else t=this.observer,u.push(t),l||(l=!0,s(d));i[n]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=o.get(e);t||o.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach((function(e){this.removeListeners_(e);for(var t=o.get(e),i=0;i<t.length;i++)if(t[i]===this){t.splice(i,1);break}}),this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,i=e.relatedNode.namespaceURI,n=e.target;(o=new v("attributes",n)).attributeName=t,o.attributeNamespace=i;var r=null;"undefined"!=typeof MutationEvent&&e.attrChange===MutationEvent.ADDITION||(r=e.prevValue),h(n,(function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(t)||-1!==e.attributeFilter.indexOf(i)))return e.attributeOldValue?E(r):o}));break;case"DOMCharacterDataModified":var o=v("characterData",n=e.target);r=e.prevValue,h(n,(function(e){if(e.characterData)return e.characterDataOldValue?E(r):o}));break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":n=e.relatedNode;var s,a,c=e.target;"DOMNodeInserted"===e.type?(s=[c],a=[]):(s=[],a=[c]);var l=c.previousSibling,u=c.nextSibling;(o=v("childList",n)).addedNodes=s,o.removedNodes=a,o.previousSibling=l,o.nextSibling=u,h(n,(function(e){if(e.childList)return o}))}p=f=void 0}},t||(t=m),e.exports=t},6958:function(e,t,i){"use strict";i.d(t,{Z:function(){return b}});var n,r=i(8826),o=i(7003),s=i(3379),a=i.n(s),c=i(9746),l=0,u={injectType:"lazyStyleTag",insert:"head",singleton:!1},d={};d.locals=c.Z.locals||{},d.use=function(){return l++||(n=a()(c.Z,u)),d},d.unuse=function(){l>0&&!--l&&(n(),n=null)};var h=d;function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t,i;return{c:function(){t=(0,r.bi)("svg"),i=(0,r.bi)("path"),(0,r.Lj)(i,"d","M599.99999 832.000004h47.999999a24 24 0 0 0 23.999999-24V376.000013a24 24 0 0 0-23.999999-24h-47.999999a24 24 0 0 0-24 24v431.999991a24 24 0 0 0 24 24zM927.999983 160.000017h-164.819997l-67.999998-113.399998A95.999998 95.999998 0 0 0 612.819989 0.00002H411.179993a95.999998 95.999998 0 0 0-82.319998 46.599999L260.819996 160.000017H95.999999A31.999999 31.999999 0 0 0 64 192.000016v32a31.999999 31.999999 0 0 0 31.999999 31.999999h32v671.999987a95.999998 95.999998 0 0 0 95.999998 95.999998h575.999989a95.999998 95.999998 0 0 0 95.999998-95.999998V256.000015h31.999999a31.999999 31.999999 0 0 0 32-31.999999V192.000016a31.999999 31.999999 0 0 0-32-31.999999zM407.679993 101.820018A12 12 0 0 1 417.999993 96.000018h187.999996a12 12 0 0 1 10.3 5.82L651.219989 160.000017H372.779994zM799.999986 928.000002H223.999997V256.000015h575.999989z m-423.999992-95.999998h47.999999a24 24 0 0 0 24-24V376.000013a24 24 0 0 0-24-24h-47.999999a24 24 0 0 0-24 24v431.999991a24 24 0 0 0 24 24z"),(0,r.Lj)(t,"class","vc-icon-delete"),(0,r.Lj)(t,"viewBox","0 0 1024 1024"),(0,r.Lj)(t,"width","200"),(0,r.Lj)(t,"height","200")},m:function(e,n){(0,r.$T)(e,t,n),(0,r.R3)(t,i)},d:function(e){e&&(0,r.og)(t)}}}function m(e){var t,i,n;return{c:function(){t=(0,r.bi)("svg"),i=(0,r.bi)("path"),n=(0,r.bi)("path"),(0,r.Lj)(i,"d","M874.154197 150.116875A511.970373 511.970373 0 1 0 1023.993986 511.991687a511.927744 511.927744 0 0 0-149.839789-361.874812z m-75.324866 648.382129A405.398688 405.398688 0 1 1 917.422301 511.991687a405.313431 405.313431 0 0 1-118.59297 286.507317z"),(0,r.Lj)(n,"d","M725.039096 299.274605a54.351559 54.351559 0 0 0-76.731613 0l-135.431297 135.431297L377.274375 299.274605a54.436817 54.436817 0 0 0-76.944756 76.987385l135.388668 135.431297-135.388668 135.473925a54.436817 54.436817 0 0 0 76.944756 76.987385l135.388668-135.431297 135.431297 135.473926a54.436817 54.436817 0 0 0 76.731613-76.987385l-135.388668-135.473926 135.388668-135.431296a54.479445 54.479445 0 0 0 0.213143-77.030014z"),(0,r.Lj)(t,"viewBox","0 0 1024 1024"),(0,r.Lj)(t,"width","200"),(0,r.Lj)(t,"height","200")},m:function(e,o){(0,r.$T)(e,t,o),(0,r.R3)(t,i),(0,r.R3)(t,n)},d:function(e){e&&(0,r.og)(t)}}}function _(e){var t,i;return{c:function(){t=(0,r.bi)("svg"),i=(0,r.bi)("path"),(0,r.Lj)(i,"fill-rule","evenodd"),(0,r.Lj)(i,"d","M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"),(0,r.Lj)(t,"class","vc-icon-copy"),(0,r.Lj)(t,"viewBox","0 0 16 16")},m:function(e,n){(0,r.$T)(e,t,n),(0,r.R3)(t,i)},d:function(e){e&&(0,r.og)(t)}}}function v(e){var t,i;return{c:function(){t=(0,r.bi)("svg"),i=(0,r.bi)("path"),(0,r.Lj)(i,"fill-rule","evenodd"),(0,r.Lj)(i,"d","M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"),(0,r.Lj)(t,"class","vc-icon-suc"),(0,r.Lj)(t,"viewBox","0 0 16 16")},m:function(e,n){(0,r.$T)(e,t,n),(0,r.R3)(t,i)},d:function(e){e&&(0,r.og)(t)}}}function E(e){var t,i,n;return{c:function(){t=(0,r.bi)("svg"),i=(0,r.bi)("path"),n=(0,r.bi)("path"),(0,r.Lj)(i,"d","M776.533333 1024 162.133333 1024C72.533333 1024 0 951.466667 0 861.866667L0 247.466667C0 157.866667 72.533333 85.333333 162.133333 85.333333L469.333333 85.333333c25.6 0 42.666667 17.066667 42.666667 42.666667s-17.066667 42.666667-42.666667 42.666667L162.133333 170.666667C119.466667 170.666667 85.333333 204.8 85.333333 247.466667l0 610.133333c0 42.666667 34.133333 76.8 76.8 76.8l610.133333 0c42.666667 0 76.8-34.133333 76.8-76.8L849.066667 554.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 307.2C938.666667 951.466667 866.133333 1024 776.533333 1024z"),(0,r.Lj)(n,"d","M256 810.666667c-12.8 0-21.333333-4.266667-29.866667-12.8C217.6 789.333333 213.333333 772.266667 213.333333 759.466667l42.666667-213.333333c0-8.533333 4.266667-17.066667 12.8-21.333333l512-512c17.066667-17.066667 42.666667-17.066667 59.733333 0l170.666667 170.666667c17.066667 17.066667 17.066667 42.666667 0 59.733333l-512 512c-4.266667 4.266667-12.8 8.533333-21.333333 12.8l-213.333333 42.666667C260.266667 810.666667 260.266667 810.666667 256 810.666667zM337.066667 576l-25.6 136.533333 136.533333-25.6L921.6 213.333333 810.666667 102.4 337.066667 576z"),(0,r.Lj)(t,"class","vc-icon-edit"),(0,r.Lj)(t,"viewBox","0 0 1024 1024"),(0,r.Lj)(t,"width","200"),(0,r.Lj)(t,"height","200")},m:function(e,o){(0,r.$T)(e,t,o),(0,r.R3)(t,i),(0,r.R3)(t,n)},d:function(e){e&&(0,r.og)(t)}}}function A(e){var t,i;return{c:function(){t=(0,r.bi)("svg"),i=(0,r.bi)("path"),(0,r.Lj)(i,"d","M581.338005 987.646578c-2.867097 4.095853-4.573702 8.669555-8.191705 12.287558a83.214071 83.214071 0 0 1-60.959939 24.029001 83.214071 83.214071 0 0 1-61.028203-24.029001c-3.618003-3.618003-5.324608-8.191705-8.123441-12.15103L24.370323 569.050448a83.418864 83.418864 0 0 1 117.892289-117.89229l369.923749 369.92375L1308.829682 24.438587A83.418864 83.418864 0 0 1 1426.721971 142.194348L581.338005 987.646578z"),(0,r.Lj)(t,"class","vc-icon-don"),(0,r.Lj)(t,"viewBox","0 0 1501 1024"),(0,r.Lj)(t,"width","200"),(0,r.Lj)(t,"height","200")},m:function(e,n){(0,r.$T)(e,t,n),(0,r.R3)(t,i)},d:function(e){e&&(0,r.og)(t)}}}function y(e){var t,i;return{c:function(){t=(0,r.bi)("svg"),i=(0,r.bi)("path"),(0,r.Lj)(i,"d","M894.976 574.464q0 78.848-29.696 148.48t-81.408 123.392-121.856 88.064-151.04 41.472q-5.12 1.024-9.216 1.536t-9.216 0.512l-177.152 0q-17.408 0-34.304-6.144t-30.208-16.896-22.016-25.088-8.704-29.696 8.192-29.696 21.504-24.576 29.696-16.384 33.792-6.144l158.72 1.024q54.272 0 102.4-19.968t83.968-53.76 56.32-79.36 20.48-97.792q0-49.152-18.432-92.16t-50.688-76.8-75.264-54.784-93.184-26.112q-2.048 0-2.56 0.512t-2.56 0.512l-162.816 0 0 80.896q0 17.408-13.824 25.6t-44.544-10.24q-8.192-5.12-26.112-17.92t-41.984-30.208-50.688-36.864l-51.2-38.912q-15.36-12.288-26.624-22.016t-11.264-24.064q0-12.288 12.8-25.6t29.184-26.624q18.432-15.36 44.032-35.84t50.688-39.936 45.056-35.328 28.16-22.016q24.576-17.408 39.936-7.168t16.384 30.72l0 81.92 162.816 0q5.12 0 10.752 1.024t10.752 2.048q79.872 8.192 149.504 41.984t121.344 87.552 80.896 123.392 29.184 147.456z"),(0,r.Lj)(t,"class","vc-icon-cancel"),(0,r.Lj)(t,"viewBox","0 0 1024 1024"),(0,r.Lj)(t,"width","200"),(0,r.Lj)(t,"height","200")},m:function(e,n){(0,r.$T)(e,t,n),(0,r.R3)(t,i)},d:function(e){e&&(0,r.og)(t)}}}function S(e){var t,i,n,o,s,a,c,l,u,d="delete"===e[0]&&g(),h="clear"===e[0]&&m(),p="copy"===e[0]&&_(),f="success"===e[0]&&v(),S="edit"===e[0]&&E(),C="done"===e[0]&&A(),b="cancel"===e[0]&&y();return{c:function(){t=(0,r.bG)("i"),d&&d.c(),i=(0,r.Dh)(),h&&h.c(),n=(0,r.Dh)(),p&&p.c(),o=(0,r.Dh)(),f&&f.c(),s=(0,r.Dh)(),S&&S.c(),a=(0,r.Dh)(),C&&C.c(),c=(0,r.Dh)(),b&&b.c(),(0,r.Lj)(t,"class","vc-icon")},m:function(g,m){(0,r.$T)(g,t,m),d&&d.m(t,null),(0,r.R3)(t,i),h&&h.m(t,null),(0,r.R3)(t,n),p&&p.m(t,null),(0,r.R3)(t,o),f&&f.m(t,null),(0,r.R3)(t,s),S&&S.m(t,null),(0,r.R3)(t,a),C&&C.m(t,null),(0,r.R3)(t,c),b&&b.m(t,null),l||(u=(0,r.oL)(t,"click",e[1]),l=!0)},p:function(e,r){r[0],"delete"===e[0]?d||((d=g()).c(),d.m(t,i)):d&&(d.d(1),d=null),"clear"===e[0]?h||((h=m()).c(),h.m(t,n)):h&&(h.d(1),h=null),"copy"===e[0]?p||((p=_()).c(),p.m(t,o)):p&&(p.d(1),p=null),"success"===e[0]?f||((f=v()).c(),f.m(t,s)):f&&(f.d(1),f=null),"edit"===e[0]?S||((S=E()).c(),S.m(t,a)):S&&(S.d(1),S=null),"done"===e[0]?C||((C=A()).c(),C.m(t,c)):C&&(C.d(1),C=null),"cancel"===e[0]?b||((b=y()).c(),b.m(t,null)):b&&(b.d(1),b=null)},i:r.ZT,o:r.ZT,d:function(e){e&&(0,r.og)(t),d&&d.d(),h&&h.d(),p&&p.d(),f&&f.d(),S&&S.d(),C&&C.d(),b&&b.d(),l=!1,u()}}}function C(e,t,i){var n=t.name;return(0,o.H3)((function(){h.use()})),(0,o.ev)((function(){h.unuse()})),e.$$set=function(e){"name"in e&&i(0,n=e.name)},[n,function(t){r.cK.call(this,e,t)}]}var b=function(e){var t,i,n,o,s;function a(t){var i;return i=e.call(this)||this,(0,r.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i),t,C,S,r.N8,{name:0}),i}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,f(t,i),n=a,(o=[{key:"name",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({name:e}),(0,r.yl)()}}])&&p(n.prototype,o),s&&p(n,s),a}(r.f_)},3903:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var svelte_internal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8826),svelte__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7003),_component_icon_svelte__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6958),_logTool__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8665),_log_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5629),_logCommand_less__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3411);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function get_each_context(e,t,i){var n=e.slice();return n[28]=t[i],n}function create_if_block_2(e){var t,i,n;return{c:function(){(t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("li")).textContent="Close",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(t,"class","vc-cmd-prompted-hide")},m:function(r,o){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(r,t,o),i||(n=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(t,"click",e[5]),i=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZT,d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(t),i=!1,n()}}}function create_else_block(e){var t;return{c:function(){(t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("li")).textContent="No Prompted"},m:function(e,i){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(e,t,i)},d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(t)}}}function create_each_block(e){var t,i,n,r,o=e[28].text+"";function s(){return e[14](e[28])}return{c:function(){t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("li"),i=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.fL)(o)},m:function(e,o){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(e,t,o),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(t,i),n||(r=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(t,"click",s),n=!0)},p:function(t,n){e=t,8&n&&o!==(o=e[28].text+"")&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.rT)(i,o)},d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(t),n=!1,r()}}}function create_if_block_1(e){var t,i,n,r,o;return i=new _component_icon_svelte__WEBPACK_IMPORTED_MODULE_2__.Z({props:{name:"clear"}}),{c:function(){t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("div"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YC)(i.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(t,"class","vc-cmd-clear-btn")},m:function(s,a){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(s,t,a),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ye)(i,t,null),n=!0,r||(o=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(t,"click",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT)(e[15])),r=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZT,i:function(e){n||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(i.$$.fragment,e),n=!0)},o:function(e){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.et)(i.$$.fragment,e),n=!1},d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(t),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vp)(i),r=!1,o()}}}function create_if_block(e){var t,i,n,r,o;return i=new _component_icon_svelte__WEBPACK_IMPORTED_MODULE_2__.Z({props:{name:"clear"}}),{c:function(){t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("div"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YC)(i.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(t,"class","vc-cmd-clear-btn")},m:function(s,a){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(s,t,a),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ye)(i,t,null),n=!0,r||(o=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(t,"click",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT)(e[18])),r=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZT,i:function(e){n||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(i.$$.fragment,e),n=!0)},o:function(e){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.et)(i.$$.fragment,e),n=!1},d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(t),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vp)(i),r=!1,o()}}}function create_fragment(e){for(var t,i,n,r,o,s,a,c,l,u,d,h,p,f,g,m,_,v,E,A,y,S=e[3].length>0&&create_if_block_2(e),C=e[3],b=[],T=0;T<C.length;T+=1)b[T]=create_each_block(get_each_context(e,C,T));var I=null;C.length||(I=create_else_block(e));var R=e[1].length>0&&create_if_block_1(e),w=e[4].length>0&&create_if_block(e);return{c:function(){t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("form"),(i=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("button")).textContent="OK",n=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)(),r=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("ul"),S&&S.c(),o=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)();for(var E=0;E<b.length;E+=1)b[E].c();I&&I.c(),s=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)(),a=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("div"),R&&R.c(),c=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)(),l=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("textarea"),u=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)(),d=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("form"),(h=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("button")).textContent="Filter",p=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)(),f=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("ul"),g=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)(),m=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("div"),w&&w.c(),_=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)(),v=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("textarea"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(i,"class","vc-cmd-btn"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(i,"type","submit"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(r,"class","vc-cmd-prompted"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(r,"style",e[2]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(l,"class","vc-cmd-input"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(l,"placeholder","command..."),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(a,"class","vc-cmd-input-wrap"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(t,"class","vc-cmd"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(h,"class","vc-cmd-btn"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(h,"type","submit"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(f,"class","vc-cmd-prompted"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(v,"class","vc-cmd-input"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(v,"placeholder","filter..."),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(m,"class","vc-cmd-input-wrap"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(d,"class","vc-cmd vc-filter")},m:function(C,T){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(C,t,T),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(t,i),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(t,n),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(t,r),S&&S.m(r,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(r,o);for(var O=0;O<b.length;O+=1)b[O].m(r,null);I&&I.m(r,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(t,s),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(t,a),R&&R.m(a,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(a,c),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(a,l),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Bm)(l,e[1]),e[17](l),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(C,u,T),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(C,d,T),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(d,h),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(d,p),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(d,f),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(d,g),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(d,m),w&&w.m(m,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(m,_),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(m,v),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Bm)(v,e[4]),E=!0,A||(y=[(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(l,"input",e[16]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(l,"keydown",e[10]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(l,"keyup",e[11]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(l,"focus",e[8]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(l,"blur",e[9]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(t,"submit",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT)(e[12])),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(v,"input",e[19]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(d,"submit",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT)(e[13]))],A=!0)},p:function(e,t){var i=t[0];if(e[3].length>0?S?S.p(e,i):((S=create_if_block_2(e)).c(),S.m(r,o)):S&&(S.d(1),S=null),136&i){var n;for(C=e[3],n=0;n<C.length;n+=1){var s=get_each_context(e,C,n);b[n]?b[n].p(s,i):(b[n]=create_each_block(s),b[n].c(),b[n].m(r,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=C.length,C.length?I&&(I.d(1),I=null):I||((I=create_else_block(e)).c(),I.m(r,null))}(!E||4&i)&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(r,"style",e[2]),e[1].length>0?R?(R.p(e,i),2&i&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(R,1)):((R=create_if_block_1(e)).c(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(R,1),R.m(a,c)):R&&((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dv)(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.et)(R,1,1,(function(){R=null})),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)()),2&i&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Bm)(l,e[1]),e[4].length>0?w?(w.p(e,i),16&i&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(w,1)):((w=create_if_block(e)).c(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(w,1),w.m(m,_)):w&&((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dv)(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.et)(w,1,1,(function(){w=null})),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)()),16&i&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Bm)(v,e[4])},i:function(e){E||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(R),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(w),E=!0)},o:function(e){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.et)(R),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.et)(w),E=!1},d:function(i){i&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(t),S&&S.d(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.RM)(b,i),I&&I.d(),R&&R.d(),e[17](null),i&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(u),i&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(d),w&&w.d(),A=!1,(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.j7)(y)}}}function instance($$self,$$props,$$invalidate){var module=_log_model__WEBPACK_IMPORTED_MODULE_3__.W.getSingleton(_log_model__WEBPACK_IMPORTED_MODULE_3__.W,"VConsoleLogModel"),cachedObjKeys={},dispatch=(0,svelte__WEBPACK_IMPORTED_MODULE_1__.x)(),cmdElement,cmdValue="",promptedStyle="",promptedList=[],filterValue="";(0,svelte__WEBPACK_IMPORTED_MODULE_1__.H3)((function(){_logCommand_less__WEBPACK_IMPORTED_MODULE_4__.Z.use()})),(0,svelte__WEBPACK_IMPORTED_MODULE_1__.ev)((function(){_logCommand_less__WEBPACK_IMPORTED_MODULE_4__.Z.unuse()}));var evalCommand=function(e){module.evalCommand(e)},moveCursorToPos=function(e,t){e.setSelectionRange&&setTimeout((function(){e.setSelectionRange(t,t)}),1)},clearPromptedList=function(){$$invalidate(2,promptedStyle="display: none;"),$$invalidate(3,promptedList=[])},updatePromptedList=function updatePromptedList(identifier){if(""!==cmdValue){identifier||(identifier=(0,_logTool__WEBPACK_IMPORTED_MODULE_5__.oj)(cmdValue));var objName="window",keyName=cmdValue;if("."!==identifier.front.text&&"["!==identifier.front.text||(objName=identifier.front.before,keyName=""!==identifier.back.text?identifier.back.before:identifier.front.after),keyName=keyName.replace(/(^['"]+)|(['"']+$)/g,""),!cachedObjKeys[objName])try{cachedObjKeys[objName]=Object.getOwnPropertyNames(eval("("+objName+")")).sort()}catch(t){}try{if(cachedObjKeys[objName])for(var i=0;i<cachedObjKeys[objName].length&&!(promptedList.length>=100);i++){var key=String(cachedObjKeys[objName][i]),keyPattern=new RegExp("^"+keyName,"i");if(keyPattern.test(key)){var completeCmd=objName;"."===identifier.front.text||""===identifier.front.text?completeCmd+="."+key:"["===identifier.front.text&&(completeCmd+="['"+key+"']"),promptedList.push({text:key,value:completeCmd})}}}catch(t){}if(promptedList.length>0){var m=Math.min(200,31*(promptedList.length+1));$$invalidate(2,promptedStyle="display: block; height: "+m+"px; margin-top: "+(-m-2)+"px;"),$$invalidate(3,promptedList)}else clearPromptedList()}else clearPromptedList()},autoCompleteBrackets=function(e,t){if(8!==t&&46!==t&&""===e.front.after)switch(e.front.text){case"[":return $$invalidate(1,cmdValue+="]"),void moveCursorToPos(cmdElement,cmdValue.length-1);case"(":return $$invalidate(1,cmdValue+=")"),void moveCursorToPos(cmdElement,cmdValue.length-1);case"{":return $$invalidate(1,cmdValue+="}"),void moveCursorToPos(cmdElement,cmdValue.length-1)}},dispatchFilterEvent=function(){dispatch("filterText",{filterText:filterValue})},onTapClearText=function(e){"cmd"===e?($$invalidate(1,cmdValue=""),clearPromptedList()):"filter"===e&&($$invalidate(4,filterValue=""),dispatchFilterEvent())},onTapPromptedItem=function onTapPromptedItem(item){var type="";try{type=eval("typeof "+item.value)}catch(t){}$$invalidate(1,cmdValue=item.value+("function"===type?"()":"")),clearPromptedList()},onCmdFocus=function(){updatePromptedList()},onCmdBlur=function(){},onCmdKeyDown=function(e){13===e.keyCode&&(e.preventDefault(),onCmdSubmit())},onCmdKeyUp=function(e){$$invalidate(3,promptedList=[]);var t=(0,_logTool__WEBPACK_IMPORTED_MODULE_5__.oj)(e.target.value);autoCompleteBrackets(t,e.keyCode),updatePromptedList(t)},onCmdSubmit=function(){""!==cmdValue&&evalCommand(cmdValue),clearPromptedList()},onFilterSubmit=function(e){dispatchFilterEvent()},click_handler=function(e){return onTapPromptedItem(e)},click_handler_1=function(){return onTapClearText("cmd")};function textarea0_input_handler(){cmdValue=this.value,$$invalidate(1,cmdValue)}function textarea0_binding(e){svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Vn[e?"unshift":"push"]((function(){$$invalidate(0,cmdElement=e)}))}var click_handler_2=function(){return onTapClearText("filter")};function textarea1_input_handler(){filterValue=this.value,$$invalidate(4,filterValue)}return[cmdElement,cmdValue,promptedStyle,promptedList,filterValue,clearPromptedList,onTapClearText,onTapPromptedItem,onCmdFocus,onCmdBlur,onCmdKeyDown,onCmdKeyUp,onCmdSubmit,onFilterSubmit,click_handler,click_handler_1,textarea0_input_handler,textarea0_binding,click_handler_2,textarea1_input_handler]}var LogCommand=function(e){function t(t){var i;return i=e.call(this)||this,(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.S1)(_assertThisInitialized(i),t,instance,create_fragment,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.N8,{}),i}return _inheritsLoose(t,e),t}(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.f_);__webpack_exports__.Z=LogCommand},4687:function(e,t,i){"use strict";i.d(t,{x:function(){return r}});var n=i(4683),r=function(){var e=(0,n.fZ)({updateTime:0}),t=e.subscribe,i=e.set,r=e.update;return{subscribe:t,set:i,update:r,updateTime:function(){r((function(e){return e.updateTime=Date.now(),e}))}}}()},643:function(e,t,i){"use strict";i.d(t,{N:function(){return n}});var n=function(){function e(){this._onDataUpdateCallbacks=[]}return e.getSingleton=function(t,i){return i||(i=t.toString()),e.singleton[i]||(e.singleton[i]=new t),e.singleton[i]},e}();n.singleton={}},5103:function(e,t,i){"use strict";function n(e){return"[object Number]"===Object.prototype.toString.call(e)}function r(e){return"bigint"==typeof e}function o(e){return"string"==typeof e}function s(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e){return"boolean"==typeof e}function c(e){return void 0===e}function l(e){return null===e}function u(e){return"symbol"==typeof e}function d(e){return!("[object Object]"!==Object.prototype.toString.call(e)&&(n(e)||r(e)||o(e)||a(e)||s(e)||l(e)||h(e)||c(e)||u(e)))}function h(e){return"function"==typeof e}function p(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function f(e){var t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object DOMWindow]"===t||"[object global]"===t}function g(e){return null!=e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&"function"!=typeof e&&"symbol"!=typeof e&&"bigint"!=typeof e&&"undefined"!=typeof Symbol&&"function"==typeof e[Symbol.iterator]}function m(e){return Object.prototype.toString.call(e).replace(/\[object (.*)\]/,"$1")}i.d(t,{hj:function(){return n},C4:function(){return r},HD:function(){return o},kJ:function(){return s},jn:function(){return a},o8:function(){return c},Ft:function(){return l},yk:function(){return u},Kn:function(){return d},mf:function(){return h},kK:function(){return p},FJ:function(){return f},TW:function(){return g},zl:function(){return m},DV:function(){return v},PO:function(){return E},Ak:function(){return S},rE:function(){return T},hZ:function(){return w},wz:function(){return O},KL:function(){return k},Kt:function(){return L},qr:function(){return D},MH:function(){return M},QK:function(){return x},_D:function(){return B},po:function(){return U},cF:function(){return F},QI:function(){return V}});var _=/(function|class) ([^ \{\()}]{1,})[\(| ]/;function v(e){var t;if(null==e)return"";var i=_.exec((null==e||null==(t=e.constructor)?void 0:t.toString())||"");return i&&i.length>1?i[2]:""}function E(e){var t,i=Object.prototype.hasOwnProperty;if(!e||"object"!=typeof e||e.nodeType||f(e))return!1;try{if(e.constructor&&!i.call(e,"constructor")&&!i.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(t in e);return void 0===t||i.call(e,t)}var A=/[<>&" ]/g,y=function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"," ":"&nbsp;"}[e]};function S(e){return"string"!=typeof e&&"number"!=typeof e?e:String(e).replace(A,y)}var C=/[\n\t]/g,b=function(e){return{"\n":"\\n","\t":"\\t"}[e]};function T(e){return"string"!=typeof e?e:String(e).replace(C,b)}var I=function(e,t){void 0===t&&(t=0);var i="";if(o(e)){var n=e.length;t>0&&n>t&&(e=L(e,t)+"...("+k(O(e))+")"),i+='"'+T(e)+'"'}else u(e)?i+=String(e).replace(/^Symbol\((.*)\)$/i,'Symbol("$1")'):h(e)?i+=(e.name||"function")+"()":r(e)?i+=String(e)+"n":i+=String(e);return i},R=function e(t,i,n){if(void 0===n&&(n=0),d(t)||s(t))if(i.circularFinder(t)){if(s(t))i.ret+="(Circular Array)";else if(d){var r;i.ret+="(Circular "+((null==(r=t.constructor)?void 0:r.name)||"Object")+")"}}else{var o="",a="";if(i.pretty){for(var c=0;c<=n;c++)o+="  ";a="\n"}var l="{",h="}";s(t)&&(l="[",h="]"),i.ret+=l+a;for(var p=M(t),f=0;f<p.length;f++){var g=p[f];i.ret+=o;try{s(t)||(d(g)||s(g)||u(g)?i.ret+=Object.prototype.toString.call(g):i.ret+=g,i.ret+=": ")}catch(e){continue}try{var m=t[g];if(s(m))i.maxDepth>-1&&n>=i.maxDepth?i.ret+="Array("+m.length+")":e(m,i,n+1);else if(d(m)){var _;i.maxDepth>-1&&n>=i.maxDepth?i.ret+=((null==(_=m.constructor)?void 0:_.name)||"Object")+" {}":e(m,i,n+1)}else i.ret+=I(m,i.keyMaxLen)}catch(e){i.ret+="(...)"}if(i.keyMaxLen>0&&i.ret.length>=10*i.keyMaxLen){i.ret+=", (...)";break}f<p.length-1&&(i.ret+=", "),i.ret+=a}i.ret+=o.substring(0,o.length-2)+h}else i.ret+=I(t,i.keyMaxLen)};function w(e,t){void 0===t&&(t={maxDepth:-1,keyMaxLen:-1,pretty:!1});var i,n=Object.assign({ret:"",maxDepth:-1,keyMaxLen:-1,pretty:!1,circularFinder:(i=new WeakSet,function(e){if("object"==typeof e&&null!==e){if(i.has(e))return!0;i.add(e)}return!1})},t);return R(e,n),n.ret}function O(e){try{return encodeURI(e).split(/%(?:u[0-9A-F]{2})?[0-9A-F]{2}|./).length-1}catch(e){return 0}}function k(e){return e<=0?"":e>=1048576?(e/1024/1024).toFixed(1)+" MB":e>=1024?(e/1024).toFixed(1)+" KB":e+" B"}var N=/[^\x00-\xff]/g;function L(e,t){if(e.replace(N,"**").length>t)for(var i=Math.floor(t/2),n=e.length;i<n;i++){var r=e.substring(0,i);if(r.replace(N,"**").length>=t)return r}return e}var P=function(e,t){return String(e).localeCompare(String(t),void 0,{numeric:!0,sensitivity:"base"})};function D(e){return e.sort(P)}function M(e){return d(e)||s(e)?Object.keys(e):[]}function x(e){var t=M(e);return function(e){return d(e)||s(e)?Object.getOwnPropertyNames(e):[]}(e).filter((function(e){return-1===t.indexOf(e)}))}function B(e){return d(e)||s(e)?Object.getOwnPropertySymbols(e):[]}function U(e,t){window.localStorage&&(e="vConsole_"+e,localStorage.setItem(e,t))}function F(e){if(window.localStorage)return e="vConsole_"+e,localStorage.getItem(e)}function V(e){return void 0===e&&(e=""),"__vc_"+e+Math.random().toString(36).substring(2,8)}},5629:function(e,t,i){"use strict";i.d(t,{W:function(){return l}});var n=i(5103),r=i(643),o=i(4687),s=i(8665),a=i(9923);function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,i;function r(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).LOG_METHODS=["log","info","warn","debug","error"],t.ADDED_LOG_PLUGIN_ID=[],t.maxLogNumber=1e3,t.logCounter=0,t.pluginPattern=void 0,t.origConsole={},t}i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,c(t,i);var l=r.prototype;return l.bindPlugin=function(e){return!(this.ADDED_LOG_PLUGIN_ID.indexOf(e)>-1)&&(0===this.ADDED_LOG_PLUGIN_ID.length&&this.mockConsole(),a.O.create(e),this.ADDED_LOG_PLUGIN_ID.push(e),this.pluginPattern=new RegExp("^\\[("+this.ADDED_LOG_PLUGIN_ID.join("|")+")\\]$","i"),!0)},l.unbindPlugin=function(e){var t=this.ADDED_LOG_PLUGIN_ID.indexOf(e);return-1!==t&&(this.ADDED_LOG_PLUGIN_ID.splice(t,1),a.O.delete(e),0===this.ADDED_LOG_PLUGIN_ID.length&&this.unmockConsole(),!0)},l.mockConsole=function(){var e=this;if("function"!=typeof this.origConsole.log){var t=this.LOG_METHODS;window.console?(t.map((function(t){e.origConsole[t]=window.console[t]})),this.origConsole.time=window.console.time,this.origConsole.timeEnd=window.console.timeEnd,this.origConsole.clear=window.console.clear):window.console={},t.map((function(t){window.console[t]=function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];e.addLog({type:t,origData:n||[]})}.bind(window.console)}));var i={};window.console.time=function(e){void 0===e&&(e=""),i[e]=Date.now()}.bind(window.console),window.console.timeEnd=function(e){void 0===e&&(e="");var t=i[e];t?(console.log(e+":",Date.now()-t+"ms"),delete i[e]):console.log(e+": 0ms")}.bind(window.console),window.console.clear=function(){e.clearLog();for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e.callOriginalConsole.apply(e,["clear"].concat(i))}.bind(window.console),window._vcOrigConsole=this.origConsole}},l.unmockConsole=function(){for(var e in this.origConsole)window.console[e]=this.origConsole[e];window._vcOrigConsole&&delete window._vcOrigConsole},l.callOriginalConsole=function(e){if("function"==typeof this.origConsole[e]){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.origConsole[e].apply(window.console,i)}},l.clearLog=function(){var e=a.O.getAll();for(var t in e)e[t].update((function(e){return e.logList=[],e}))},l.clearPluginLog=function(e){a.O.get(e).update((function(e){return e.logList=[],e}))},l.addLog=function(e,t){void 0===e&&(e={type:"log",origData:[]});var i={_id:n.QI(),type:e.type,cmdType:null==t?void 0:t.cmdType,date:Date.now(),data:(0,s.b1)(e.origData||[])},r=this._extractPluginIdByLog(i);this._isRepeatedLog(r,i)?this._updateLastLogRepeated(r):(this._pushLogList(r,i),this._limitLogListLength()),null!=t&&t.noOrig||this.callOriginalConsole.apply(this,[e.type].concat(e.origData))},l.evalCommand=function(e){this.addLog({type:"log",origData:[e]},{cmdType:"input"});var t=void 0;try{t=eval.call(window,"("+e+")")}catch(i){try{t=eval.call(window,e)}catch(e){}}this.addLog({type:"log",origData:[t]},{cmdType:"output"})},l._extractPluginIdByLog=function(e){var t,i="default",r=null==(t=e.data[0])?void 0:t.origData;if(n.HD(r)){var o=r.match(this.pluginPattern);if(null!==o&&o.length>1){var s=o[1].toLowerCase();this.ADDED_LOG_PLUGIN_ID.indexOf(s)>-1&&(i=s,e.data.shift())}}return i},l._isRepeatedLog=function(e,t){var i=a.O.getRaw(e),n=i.logList[i.logList.length-1];if(!n)return!1;var r=!1;if(t.type===n.type&&t.cmdType===n.cmdType&&t.data.length===n.data.length){r=!0;for(var o=0;o<t.data.length;o++)if(t.data[o].origData!==n.data[o].origData){r=!1;break}}return r},l._updateLastLogRepeated=function(e){a.O.get(e).update((function(e){var t=e.logList,i=t[t.length-1];return i.repeated=i.repeated?i.repeated+1:2,e}))},l._pushLogList=function(e,t){a.O.get(e).update((function(e){return e.logList.push(t),e})),o.x.updateTime()},l._limitLogListLength=function(){var e=this;if(this.logCounter++,this.logCounter%10==0){this.logCounter=0;var t=a.O.getAll();for(var i in t)t[i].update((function(t){return t.logList.length>e.maxLogNumber-10&&t.logList.splice(0,t.logList.length-e.maxLogNumber+10),t}))}},r}(r.N)},9923:function(e,t,i){"use strict";i.d(t,{O:function(){return r}});var n=i(4683),r=function(){function e(){}return e.create=function(e){return this.storeMap[e]||(this.storeMap[e]=(0,n.fZ)({logList:[]})),this.storeMap[e]},e.delete=function(e){this.storeMap[e]&&delete this.storeMap[e]},e.get=function(e){return this.storeMap[e]},e.getRaw=function(e){return(0,n.U2)(this.storeMap[e])},e.getAll=function(){return this.storeMap},e}();r.storeMap={}},8665:function(e,t,i){"use strict";i.d(t,{LH:function(){return o},oj:function(){return l},HX:function(){return u},b1:function(){return h},Tg:function(){return p}});var n=i(5103),r=function(e){var t=n.hZ(e,{maxDepth:0}),i=t.substring(0,36),r=n.DV(e);return t.length>36&&(i+="..."),n.rE(r+" "+i)},o=function(e,t){void 0===t&&(t=!0);var i="undefined",o=e;return e instanceof p?(i="uninvocatable",o="(...)"):n.kJ(e)?(i="array",o=r(e)):n.Kn(e)?(i="object",o=r(e)):n.HD(e)?(i="string",o=n.rE(e),t&&(o='"'+o+'"')):n.hj(e)?(i="number",o=String(e)):n.C4(e)?(i="bigint",o=String(e)+"n"):n.jn(e)?(i="boolean",o=String(e)):n.Ft(e)?(i="null",o="null"):n.o8(e)?(i="undefined",o="undefined"):n.mf(e)?(i="function",o=(e.name||"function")+"()"):n.yk(e)&&(i="symbol",o=String(e)),{text:o,valueType:i}},s=[".","[","(","{","}"],a=["]",")","}"],c=function(e,t,i){void 0===i&&(i=0);for(var n={text:"",pos:-1,before:"",after:""},r=e.length-1;r>=i;r--){var o=t.indexOf(e[r]);if(o>-1){n.text=t[o],n.pos=r,n.before=e.substring(i,r),n.after=e.substring(r+1,e.length);break}}return n},l=function(e){var t=c(e,s,0);return{front:t,back:c(e,a,t.pos+1)}},u=function(e,t){if(""===t)return!0;for(var i=0;i<e.data.length;i++)if("string"===typeof e.data[i].origData&&e.data[i].origData.indexOf(t)>-1)return!0;return!1},d=/(\%[csdo] )|( \%[csdo])/g,h=function(e){if(d.lastIndex=0,n.HD(e[0])&&d.test(e[0])){for(var t,i=[].concat(e),r=i.shift().split(d).filter((function(e){return void 0!==e&&""!==e})),o=i,s=[],a=!1,c="";r.length>0;){var l=r.shift();if(/ ?\%c ?/.test(l)?o.length>0?"string"!=typeof(c=o.shift())&&(c=""):(t=l,c="",a=!0):/ ?\%[sd] ?/.test(l)?(t=o.length>0?n.Kn(o[0])?n.DV(o.shift()):String(o.shift()):l,a=!0):/ ?\%o ?/.test(l)?(t=o.length>0?o.shift():l,a=!0):(t=l,a=!0),a){var u={origData:t};c&&(u.style=c),s.push(u),a=!1,t=void 0,c=""}}for(var h=0;h<o.length;h++)s.push({origData:o[h]});return s}for(var p=[],f=0;f<e.length;f++)p.push({origData:e[f]});return p},p=function(){}},9746:function(e,t,i){"use strict";var n=i(7705),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,".vc-icon {\n  word-break: normal;\n  white-space: normal;\n  overflow: visible;\n}\n.vc-icon svg {\n  fill: var(--VC-FG-2);\n  height: 1em;\n  width: 1em;\n  vertical-align: -0.11em;\n}\n.vc-icon .vc-icon-delete {\n  vertical-align: -0.11em;\n}\n.vc-icon .vc-icon-copy {\n  height: 1.1em;\n  width: 1.1em;\n  vertical-align: -0.16em;\n}\n.vc-icon .vc-icon-suc {\n  fill: var(--VC-TEXTGREEN);\n  height: 1.1em;\n  width: 1.1em;\n  vertical-align: -0.16em;\n}\n",""]),t.Z=r},3283:function(e,t,i){"use strict";var n=i(7705),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,'#__vconsole {\n  --VC-BG-0: #ededed;\n  --VC-BG-1: #f7f7f7;\n  --VC-BG-2: #fff;\n  --VC-BG-3: #f7f7f7;\n  --VC-BG-4: #4c4c4c;\n  --VC-BG-5: #fff;\n  --VC-BG-6: rgba(0, 0, 0, 0.1);\n  --VC-FG-0: rgba(0, 0, 0, 0.9);\n  --VC-FG-HALF: rgba(0, 0, 0, 0.9);\n  --VC-FG-1: rgba(0, 0, 0, 0.5);\n  --VC-FG-2: rgba(0, 0, 0, 0.3);\n  --VC-FG-3: rgba(0, 0, 0, 0.1);\n  --VC-RED: #fa5151;\n  --VC-ORANGE: #fa9d3b;\n  --VC-YELLOW: #ffc300;\n  --VC-GREEN: #91d300;\n  --VC-LIGHTGREEN: #95ec69;\n  --VC-BRAND: #07c160;\n  --VC-BLUE: #10aeff;\n  --VC-INDIGO: #1485ee;\n  --VC-PURPLE: #6467f0;\n  --VC-LINK: #576b95;\n  --VC-TEXTGREEN: #06ae56;\n  --VC-FG: black;\n  --VC-BG: white;\n  --VC-BG-COLOR-ACTIVE: #ececec;\n  --VC-WARN-BG: #fff3cc;\n  --VC-WARN-BORDER: #ffe799;\n  --VC-ERROR-BG: #fedcdc;\n  --VC-ERROR-BORDER: #fdb9b9;\n  --VC-DOM-TAG-NAME-COLOR: #881280;\n  --VC-DOM-ATTRIBUTE-NAME-COLOR: #994500;\n  --VC-DOM-ATTRIBUTE-VALUE-COLOR: #1a1aa6;\n  --VC-CODE-KEY-FG: #881391;\n  --VC-CODE-PRIVATE-KEY-FG: #cfa1d3;\n  --VC-CODE-FUNC-FG: #0d22aa;\n  --VC-CODE-NUMBER-FG: #1c00cf;\n  --VC-CODE-STR-FG: #c41a16;\n  --VC-CODE-NULL-FG: #808080;\n  color: var(--VC-FG-0);\n  font-size: 13px;\n  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;\n  -webkit-user-select: auto;\n  /* global */\n}\n#__vconsole .vc-max-height {\n  max-height: 19.23076923em;\n}\n#__vconsole .vc-max-height-line {\n  max-height: 6.30769231em;\n}\n#__vconsole .vc-min-height {\n  min-height: 3.07692308em;\n}\n#__vconsole dd,\n#__vconsole dl,\n#__vconsole pre {\n  margin: 0;\n}\n#__vconsole i {\n  font-style: normal;\n}\n.vc-table .vc-table-row {\n  line-height: 1.5;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: row;\n  -moz-box-orient: horizontal;\n  -moz-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-flex-wrap: wrap;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  overflow: hidden;\n  border-bottom: 1px solid var(--VC-FG-3);\n}\n.vc-table .vc-table-row.vc-left-border {\n  border-left: 1px solid var(--VC-FG-3);\n}\n.vc-table .vc-table-row-icon {\n  margin-left: 4px;\n}\n.vc-table .vc-table-col {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -moz-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  padding: 0.23076923em 0.30769231em;\n  border-left: 1px solid var(--VC-FG-3);\n  overflow: auto;\n}\n.vc-table .vc-table-col:first-child {\n  border: none;\n}\n.vc-table .vc-table-col-value {\n  white-space: pre-wrap;\n  word-break: break-word;\n  /*white-space: nowrap;\n    text-overflow: ellipsis;*/\n  -webkit-overflow-scrolling: touch;\n}\n.vc-table .vc-small .vc-table-col {\n  padding: 0 0.30769231em;\n  font-size: 0.92307692em;\n}\n.vc-table .vc-table-col-2 {\n  -webkit-box-flex: 2;\n  -webkit-flex: 2;\n  -moz-box-flex: 2;\n  -ms-flex: 2;\n  flex: 2;\n}\n.vc-table .vc-table-col-3 {\n  -webkit-box-flex: 3;\n  -webkit-flex: 3;\n  -moz-box-flex: 3;\n  -ms-flex: 3;\n  flex: 3;\n}\n.vc-table .vc-table-col-4 {\n  -webkit-box-flex: 4;\n  -webkit-flex: 4;\n  -moz-box-flex: 4;\n  -ms-flex: 4;\n  flex: 4;\n}\n.vc-table .vc-table-col-5 {\n  -webkit-box-flex: 5;\n  -webkit-flex: 5;\n  -moz-box-flex: 5;\n  -ms-flex: 5;\n  flex: 5;\n}\n.vc-table .vc-table-col-6 {\n  -webkit-box-flex: 6;\n  -webkit-flex: 6;\n  -moz-box-flex: 6;\n  -ms-flex: 6;\n  flex: 6;\n}\n.vc-table .vc-table-row-error {\n  border-color: var(--VC-ERROR-BORDER);\n  background-color: var(--VC-ERROR-BG);\n}\n.vc-table .vc-table-row-error .vc-table-col {\n  color: var(--VC-RED);\n  border-color: var(--VC-ERROR-BORDER);\n}\n.vc-table .vc-table-col-title {\n  font-weight: bold;\n}\n.vc-table .vc-table-action {\n  display: flex;\n  justify-content: space-evenly;\n}\n.vc-table .vc-table-action .vc-icon {\n  flex: 1;\n  text-align: center;\n  display: block;\n}\n.vc-table .vc-table-action .vc-icon:hover {\n  background: var(--VC-BG-3);\n}\n.vc-table .vc-table-action .vc-icon:active {\n  background: var(--VC-BG-1);\n}\n.vc-table .vc-table-input {\n  width: 100%;\n  border: none;\n  color: var(--VC-FG-0);\n  background-color: var(--VC-BG-6);\n  height: 3.53846154em;\n}\n.vc-table .vc-table-input:focus {\n  background-color: var(--VC-FG-2);\n}\n@media (prefers-color-scheme: dark) {\n  #__vconsole:not([data-theme="light"]) {\n    --VC-BG-0: #191919;\n    --VC-BG-1: #1f1f1f;\n    --VC-BG-2: #232323;\n    --VC-BG-3: #2f2f2f;\n    --VC-BG-4: #606060;\n    --VC-BG-5: #2c2c2c;\n    --VC-BG-6: rgba(255, 255, 255, 0.2);\n    --VC-FG-0: rgba(255, 255, 255, 0.8);\n    --VC-FG-HALF: rgba(255, 255, 255, 0.6);\n    --VC-FG-1: rgba(255, 255, 255, 0.5);\n    --VC-FG-2: rgba(255, 255, 255, 0.3);\n    --VC-FG-3: rgba(255, 255, 255, 0.05);\n    --VC-RED: #fa5151;\n    --VC-ORANGE: #c87d2f;\n    --VC-YELLOW: #cc9c00;\n    --VC-GREEN: #74a800;\n    --VC-LIGHTGREEN: #28b561;\n    --VC-BRAND: #07c160;\n    --VC-BLUE: #10aeff;\n    --VC-INDIGO: #1196ff;\n    --VC-PURPLE: #8183ff;\n    --VC-LINK: #7d90a9;\n    --VC-TEXTGREEN: #259c5c;\n    --VC-FG: white;\n    --VC-BG: black;\n    --VC-BG-COLOR-ACTIVE: #282828;\n    --VC-WARN-BG: #332700;\n    --VC-WARN-BORDER: #664e00;\n    --VC-ERROR-BG: #321010;\n    --VC-ERROR-BORDER: #642020;\n    --VC-DOM-TAG-NAME-COLOR: #5DB0D7;\n    --VC-DOM-ATTRIBUTE-NAME-COLOR: #9BBBDC;\n    --VC-DOM-ATTRIBUTE-VALUE-COLOR: #f29766;\n    --VC-CODE-KEY-FG: #e36eec;\n    --VC-CODE-PRIVATE-KEY-FG: #f4c5f7;\n    --VC-CODE-FUNC-FG: #556af2;\n    --VC-CODE-NUMBER-FG: #9980ff;\n    --VC-CODE-STR-FG: #e93f3b;\n    --VC-CODE-NULL-FG: #808080;\n  }\n}\n#__vconsole[data-theme="dark"] {\n  --VC-BG-0: #191919;\n  --VC-BG-1: #1f1f1f;\n  --VC-BG-2: #232323;\n  --VC-BG-3: #2f2f2f;\n  --VC-BG-4: #606060;\n  --VC-BG-5: #2c2c2c;\n  --VC-BG-6: rgba(255, 255, 255, 0.2);\n  --VC-FG-0: rgba(255, 255, 255, 0.8);\n  --VC-FG-HALF: rgba(255, 255, 255, 0.6);\n  --VC-FG-1: rgba(255, 255, 255, 0.5);\n  --VC-FG-2: rgba(255, 255, 255, 0.3);\n  --VC-FG-3: rgba(255, 255, 255, 0.05);\n  --VC-RED: #fa5151;\n  --VC-ORANGE: #c87d2f;\n  --VC-YELLOW: #cc9c00;\n  --VC-GREEN: #74a800;\n  --VC-LIGHTGREEN: #28b561;\n  --VC-BRAND: #07c160;\n  --VC-BLUE: #10aeff;\n  --VC-INDIGO: #1196ff;\n  --VC-PURPLE: #8183ff;\n  --VC-LINK: #7d90a9;\n  --VC-TEXTGREEN: #259c5c;\n  --VC-FG: white;\n  --VC-BG: black;\n  --VC-BG-COLOR-ACTIVE: #282828;\n  --VC-WARN-BG: #332700;\n  --VC-WARN-BORDER: #664e00;\n  --VC-ERROR-BG: #321010;\n  --VC-ERROR-BORDER: #642020;\n  --VC-DOM-TAG-NAME-COLOR: #5DB0D7;\n  --VC-DOM-ATTRIBUTE-NAME-COLOR: #9BBBDC;\n  --VC-DOM-ATTRIBUTE-VALUE-COLOR: #f29766;\n  --VC-CODE-KEY-FG: #e36eec;\n  --VC-CODE-PRIVATE-KEY-FG: #f4c5f7;\n  --VC-CODE-FUNC-FG: #556af2;\n  --VC-CODE-NUMBER-FG: #9980ff;\n  --VC-CODE-STR-FG: #e93f3b;\n  --VC-CODE-NULL-FG: #808080;\n}\n.vc-mask {\n  display: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0);\n  z-index: 10001;\n  -webkit-transition: background 0.3s;\n  transition: background 0.3s;\n  -webkit-tap-highlight-color: transparent;\n  overflow-y: scroll;\n}\n.vc-panel {\n  display: none;\n  position: fixed;\n  min-height: 85%;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 10002;\n  background-color: var(--VC-BG-0);\n  -webkit-transition: -webkit-transform 0.3s;\n  transition: -webkit-transform 0.3s;\n  transition: transform 0.3s;\n  transition: transform 0.3s, -webkit-transform 0.3s;\n  -webkit-transform: translate(0, 100%);\n  transform: translate(0, 100%);\n}\n.vc-toggle .vc-switch {\n  display: none;\n}\n.vc-toggle .vc-mask {\n  background: rgba(0, 0, 0, 0.6);\n  display: block;\n}\n.vc-toggle .vc-panel {\n  -webkit-transform: translate(0, 0);\n  transform: translate(0, 0);\n}\n.vc-content {\n  background-color: var(--VC-BG-2);\n  overflow-x: hidden;\n  overflow-y: auto;\n  position: absolute;\n  top: 3.07692308em;\n  left: 0;\n  right: 0;\n  bottom: 3.07692308em;\n  -webkit-overflow-scrolling: touch;\n  margin-bottom: constant(safe-area-inset-bottom);\n  margin-bottom: env(safe-area-inset-bottom);\n}\n.vc-content.vc-has-topbar {\n  top: 5.46153846em;\n}\n.vc-plugin-box {\n  display: none;\n  position: relative;\n  min-height: 100%;\n}\n.vc-plugin-box.vc-actived {\n  display: block;\n}\n.vc-plugin-content {\n  padding-bottom: 6em;\n  -webkit-tap-highlight-color: transparent;\n}\n.vc-plugin-empty:before,\n.vc-plugin-content:empty:before {\n  content: "Empty";\n  color: var(--VC-FG-1);\n  position: absolute;\n  top: 45%;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  font-size: 1.15384615em;\n  text-align: center;\n}\n@supports (bottom: constant(safe-area-inset-bottom)) or (bottom: env(safe-area-inset-bottom)) {\n  .vc-toolbar,\n  .vc-switch {\n    bottom: constant(safe-area-inset-bottom);\n    bottom: env(safe-area-inset-bottom);\n  }\n}\n.vc-tabbar {\n  border-bottom: 1px solid var(--VC-FG-3);\n  overflow-x: auto;\n  height: 3em;\n  width: auto;\n  white-space: nowrap;\n}\n.vc-tabbar .vc-tab {\n  display: inline-block;\n  line-height: 3em;\n  padding: 0 1.15384615em;\n  border-right: 1px solid var(--VC-FG-3);\n  text-decoration: none;\n  color: var(--VC-FG-0);\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n.vc-tabbar .vc-tab:active {\n  background-color: rgba(0, 0, 0, 0.15);\n}\n.vc-tabbar .vc-tab.vc-actived {\n  background-color: var(--VC-BG-1);\n}\n.vc-toolbar {\n  border-top: 1px solid var(--VC-FG-3);\n  line-height: 3em;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: row;\n  -moz-box-orient: horizontal;\n  -moz-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n}\n.vc-toolbar .vc-tool {\n  display: none;\n  font-style: normal;\n  text-decoration: none;\n  color: var(--VC-FG-0);\n  width: 50%;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -moz-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  text-align: center;\n  position: relative;\n  -webkit-touch-callout: none;\n}\n.vc-toolbar .vc-tool.vc-toggle,\n.vc-toolbar .vc-tool.vc-global-tool {\n  display: block;\n}\n.vc-toolbar .vc-tool:active {\n  background-color: rgba(0, 0, 0, 0.15);\n}\n.vc-toolbar .vc-tool:after {\n  content: " ";\n  position: absolute;\n  top: 0.53846154em;\n  bottom: 0.53846154em;\n  right: 0;\n  border-left: 1px solid var(--VC-FG-3);\n}\n.vc-toolbar .vc-tool-last:after {\n  border: none;\n}\n.vc-topbar {\n  background-color: var(--VC-BG-1);\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: row;\n  -moz-box-orient: horizontal;\n  -moz-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-flex-wrap: wrap;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  width: 100%;\n}\n.vc-topbar .vc-toptab {\n  display: none;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -moz-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  line-height: 2.30769231em;\n  padding: 0 1.15384615em;\n  border-bottom: 1px solid var(--VC-FG-3);\n  text-decoration: none;\n  text-align: center;\n  color: var(--VC-FG-0);\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n.vc-topbar .vc-toptab.vc-toggle {\n  display: block;\n}\n.vc-topbar .vc-toptab:active {\n  background-color: rgba(0, 0, 0, 0.15);\n}\n.vc-topbar .vc-toptab.vc-actived {\n  border-bottom: 1px solid var(--VC-INDIGO);\n}\n',""]),t.Z=r},7558:function(e,t,i){"use strict";var n=i(7705),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,".vc-switch {\n  display: block;\n  position: fixed;\n  right: 0.76923077em;\n  bottom: 0.76923077em;\n  color: #FFF;\n  background-color: var(--VC-BRAND);\n  line-height: 1;\n  font-size: 1.07692308em;\n  padding: 0.61538462em 1.23076923em;\n  z-index: 10000;\n  border-radius: 0.30769231em;\n  box-shadow: 0 0 0.61538462em rgba(0, 0, 0, 0.4);\n}\n",""]),t.Z=r},5670:function(e,t,i){"use strict";var n=i(7705),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,'/* color */\n.vcelm-node {\n  color: var(--VC-DOM-TAG-NAME-COLOR);\n}\n.vcelm-k {\n  color: var(--VC-DOM-ATTRIBUTE-NAME-COLOR);\n}\n.vcelm-v {\n  color: var(--VC-DOM-ATTRIBUTE-VALUE-COLOR);\n}\n.vcelm-l.vc-actived > .vcelm-node {\n  background-color: var(--VC-FG-3);\n}\n/* layout */\n.vcelm-l {\n  padding-left: 8px;\n  position: relative;\n  word-wrap: break-word;\n  line-height: 1.2;\n}\n/*.vcelm-l.vcelm-noc {\n  padding-left: 0;\n}*/\n.vcelm-l .vcelm-node:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vcelm-l.vcelm-noc .vcelm-node:active {\n  background-color: transparent;\n}\n.vcelm-t {\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n/* level */\n/* arrow */\n.vcelm-l:before {\n  content: "";\n  display: block;\n  position: absolute;\n  top: 6px;\n  left: 3px;\n  width: 0;\n  height: 0;\n  border: transparent solid 3px;\n  border-left-color: var(--VC-FG-1);\n}\n.vcelm-l.vc-toggle:before {\n  display: block;\n  top: 6px;\n  left: 0;\n  border-top-color: var(--VC-FG-1);\n  border-left-color: transparent;\n}\n.vcelm-l.vcelm-noc:before {\n  display: none;\n}\n',""]),t.Z=r},3327:function(e,t,i){"use strict";var n=i(7705),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,".vc-logs-has-cmd {\n  padding-bottom: 6.15384615em;\n}\n",""]),t.Z=r},1130:function(e,t,i){"use strict";var n=i(7705),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,".vc-cmd {\n  position: absolute;\n  height: 3.07692308em;\n  left: 0;\n  right: 0;\n  bottom: 3.07692308em;\n  border-top: 1px solid var(--VC-FG-3);\n  display: block !important;\n}\n.vc-cmd.vc-filter {\n  bottom: 0;\n}\n.vc-cmd-input-wrap {\n  display: block;\n  position: relative;\n  height: 2.15384615em;\n  margin-right: 3.07692308em;\n  padding: 0.46153846em 0.61538462em;\n}\n.vc-cmd-input {\n  width: 100%;\n  border: none;\n  resize: none;\n  outline: none;\n  padding: 0;\n  font-size: 0.92307692em;\n  background-color: transparent;\n  color: var(--VC-FG-0);\n}\n.vc-cmd-input::-webkit-input-placeholder {\n  line-height: 2.15384615em;\n}\n.vc-cmd-btn {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: 3.07692308em;\n  border: none;\n  background-color: var(--VC-BG-0);\n  color: var(--VC-FG-0);\n  outline: none;\n  -webkit-touch-callout: none;\n  font-size: 1em;\n}\n.vc-cmd-clear-btn {\n  position: absolute;\n  text-align: center;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: 3.07692308em;\n  line-height: 3.07692308em;\n}\n.vc-cmd-btn:active,\n.vc-cmd-clear-btn:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vc-cmd-prompted {\n  position: absolute;\n  left: 0.46153846em;\n  right: 0.46153846em;\n  background-color: var(--VC-BG-3);\n  border: 1px solid var(--VC-FG-3);\n  overflow-x: scroll;\n  display: none;\n}\n.vc-cmd-prompted li {\n  list-style: none;\n  line-height: 30px;\n  padding: 0 0.46153846em;\n  border-bottom: 1px solid var(--VC-FG-3);\n}\n.vc-cmd-prompted li:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vc-cmd-prompted-hide {\n  text-align: center;\n}\n",""]),t.Z=r},7147:function(e,t,i){"use strict";var n=i(7705),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,'.vc-log-row {\n  margin: 0;\n  padding: 0.46153846em 0.61538462em;\n  overflow: hidden;\n  line-height: 1.3;\n  border-bottom: 1px solid var(--VC-FG-3);\n  word-break: break-word;\n  position: relative;\n}\n.vc-log-info {\n  color: var(--VC-PURPLE);\n}\n.vc-log-debug {\n  color: var(--VC-YELLOW);\n}\n.vc-log-warn {\n  color: var(--VC-ORANGE);\n  border-color: var(--VC-WARN-BORDER);\n  background-color: var(--VC-WARN-BG);\n}\n.vc-log-error {\n  color: var(--VC-RED);\n  border-color: var(--VC-ERROR-BORDER);\n  background-color: var(--VC-ERROR-BG);\n}\n.vc-logrow-icon {\n  float: right;\n}\n.vc-log-repeat {\n  float: left;\n  margin-right: 0.30769231em;\n  padding: 0 6.5px;\n  color: #D7E0EF;\n  background-color: #42597F;\n  border-radius: 8.66666667px;\n}\n.vc-log-error .vc-log-repeat {\n  color: #901818;\n  background-color: var(--VC-RED);\n}\n.vc-log-warn .vc-log-repeat {\n  color: #987D20;\n  background-color: #F4BD02;\n}\n.vc-log-input,\n.vc-log-output {\n  padding-left: 0.92307692em;\n}\n.vc-log-input:before,\n.vc-log-output:before {\n  content: "›";\n  position: absolute;\n  top: 0.15384615em;\n  left: 0;\n  font-size: 1.23076923em;\n  color: #6A5ACD;\n}\n.vc-log-output:before {\n  content: "‹";\n}\n',""]),t.Z=r},1237:function(e,t,i){"use strict";var n=i(7705),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,'.vc-log-tree {\n  display: block;\n  overflow: auto;\n  position: relative;\n  -webkit-overflow-scrolling: touch;\n}\n.vc-log-tree-node {\n  display: block;\n  font-style: italic;\n  padding-left: 0.76923077em;\n  position: relative;\n}\n.vc-log-tree.vc-is-tree > .vc-log-tree-node:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vc-log-tree.vc-is-tree > .vc-log-tree-node::before {\n  content: "";\n  position: absolute;\n  top: 0.30769231em;\n  left: 0.15384615em;\n  width: 0;\n  height: 0;\n  border: transparent solid 0.30769231em;\n  border-left-color: var(--VC-FG-1);\n}\n.vc-log-tree.vc-is-tree.vc-toggle > .vc-log-tree-node::before {\n  top: 0.46153846em;\n  left: 0;\n  border-top-color: var(--VC-FG-1);\n  border-left-color: transparent;\n}\n.vc-log-tree-child {\n  margin-left: 0.76923077em;\n}\n.vc-log-tree-loadmore {\n  text-decoration: underline;\n  padding-left: 1.84615385em;\n  position: relative;\n  color: var(--VC-CODE-FUNC-FG);\n}\n.vc-log-tree-loadmore::before {\n  content: "››";\n  position: absolute;\n  top: -0.15384615em;\n  left: 0.76923077em;\n  font-size: 1.23076923em;\n  color: var(--VC-CODE-FUNC-FG);\n}\n.vc-log-tree-loadmore:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n',""]),t.Z=r},845:function(e,t,i){"use strict";var n=i(7705),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,".vc-log-key {\n  color: var(--VC-CODE-KEY-FG);\n}\n.vc-log-key-private {\n  color: var(--VC-CODE-PRIVATE-KEY-FG);\n}\n.vc-log-val {\n  white-space: pre-line;\n}\n.vc-log-val-function {\n  color: var(--VC-CODE-FUNC-FG);\n  font-style: italic !important;\n}\n.vc-log-val-bigint {\n  color: var(--VC-CODE-FUNC-FG);\n}\n.vc-log-val-number,\n.vc-log-val-boolean {\n  color: var(--VC-CODE-NUMBER-FG);\n}\n.vc-log-val-string.vc-log-val-haskey {\n  color: var(--VC-CODE-STR-FG);\n  white-space: normal;\n}\n.vc-log-val-null,\n.vc-log-val-undefined,\n.vc-log-val-uninvocatable {\n  color: var(--VC-CODE-NULL-FG);\n}\n.vc-log-val-symbol {\n  color: var(--VC-CODE-STR-FG);\n}\n",""]),t.Z=r},8747:function(e,t,i){"use strict";var n=i(7705),r=i.n(n)()((function(e){return e[1]}));r.push([e.id,".vc-group .vc-group-preview {\n  -webkit-touch-callout: none;\n}\n.vc-group .vc-group-preview:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vc-group .vc-group-detail {\n  display: none;\n  padding: 0 0 0.76923077em 1.53846154em;\n  border-bottom: 1px solid var(--VC-FG-3);\n}\n.vc-group.vc-actived .vc-group-detail {\n  display: block;\n  background-color: var(--VC-BG-1);\n}\n.vc-group.vc-actived .vc-table-row {\n  background-color: var(--VC-BG-2);\n}\n.vc-group.vc-actived .vc-group-preview {\n  background-color: var(--VC-BG-1);\n}\n",""]),t.Z=r},3411:function(e,t,i){"use strict";var n,r=i(3379),o=i.n(r),s=i(1130),a=0,c={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};l.locals=s.Z.locals||{},l.use=function(){return a++||(n=o()(s.Z,c)),l},l.unuse=function(){a>0&&!--a&&(n(),n=null)},t.Z=l},3379:function(e,t,i){"use strict";var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),s=[];function a(e){for(var t=-1,i=0;i<s.length;i++)if(s[i].identifier===e){t=i;break}return t}function c(e,t){for(var i={},n=[],r=0;r<e.length;r++){var o=e[r],c=t.base?o[0]+t.base:o[0],l=i[c]||0,u="".concat(c," ").concat(l);i[c]=l+1;var d=a(u),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(s[d].references++,s[d].updater(h)):s.push({identifier:u,updater:m(h,t),references:1}),n.push(u)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=i.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function h(e,t,i,n){var r=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function p(e,t,i){var n=i.css,r=i.media,o=i.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var f=null,g=0;function m(e,t){var i,n,r;if(t.singleton){var o=g++;i=f||(f=l(t)),n=h.bind(null,i,o,!1),r=h.bind(null,i,o,!0)}else i=l(t),n=p.bind(null,i,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var i=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var r=a(i[n]);s[r].references--}for(var o=c(e,t),l=0;l<i.length;l++){var u=a(i[l]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}i=o}}}},7003:function(e,t,i){"use strict";i.d(t,{x:function(){return n.x},ev:function(){return n.ev},H3:function(){return n.H3}});var n=i(8826)},8826:function(e,t,i){"use strict";function n(){}function r(e){return e()}function o(){return Object.create(null)}function s(e){e.forEach(r)}function a(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e){return 0===Object.keys(e).length}function u(e){if(null==e)return n;for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];var o=e.subscribe.apply(e,i);return o.unsubscribe?function(){return o.unsubscribe()}:o}function d(e){var t;return u(e,(function(e){return t=e}))(),t}function h(e,t,i){e.$$.on_destroy.push(u(t,i))}function p(e,t,i){return void 0===i&&(i=t),e.set(i),t}i.d(t,{FW:function(){return D},f_:function(){return fe},hj:function(){return Z},R3:function(){return m},Lj:function(){return R},ak:function(){return ce},Vn:function(){return G},cK:function(){return V},gb:function(){return ne},FI:function(){return h},x:function(){return F},YC:function(){return le},vp:function(){return de},RM:function(){return E},og:function(){return v},bG:function(){return A},cS:function(){return b},yl:function(){return J},$X:function(){return d},dv:function(){return ie},S1:function(){return pe},$T:function(){return _},oL:function(){return T},ye:function(){return ue},ZT:function(){return n},ev:function(){return U},H3:function(){return B},cl:function(){return se},AT:function(){return I},j7:function(){return s},N8:function(){return c},rT:function(){return w},Bm:function(){return O},fx:function(){return p},cz:function(){return k},Dh:function(){return C},Ld:function(){return u},bi:function(){return y},fL:function(){return S},VH:function(){return N},Ui:function(){return re},et:function(){return oe},GQ:function(){return ae}}),new Set;var f=!1;function g(e,t,i,n){for(;e<t;){var r=e+(t-e>>1);i(r)<=n?e=r+1:t=r}return e}function m(e,t){f?(function(e){if(!e.hydrate_init){e.hydrate_init=!0;var t=e.childNodes,i=new Int32Array(t.length+1),n=new Int32Array(t.length);i[0]=-1;for(var r=0,o=0;o<t.length;o++){var s=g(1,r+1,(function(e){return t[i[e]].claim_order}),t[o].claim_order)-1;n[o]=i[s]+1;var a=s+1;i[a]=o,r=Math.max(a,r)}for(var c=[],l=[],u=t.length-1,d=i[r]+1;0!=d;d=n[d-1]){for(c.push(t[d-1]);u>=d;u--)l.push(t[u]);u--}for(;u>=0;u--)l.push(t[u]);c.reverse(),l.sort((function(e,t){return e.claim_order-t.claim_order}));for(var h=0,p=0;h<l.length;h++){for(;p<c.length&&l[h].claim_order>=c[p].claim_order;)p++;var f=p<c.length?c[p]:null;e.insertBefore(l[h],f)}}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild),t!==e.actual_end_child?e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling):t.parentNode!==e&&e.appendChild(t)}function _(e,t,i){f&&!i?m(e,t):(t.parentNode!==e||i&&t.nextSibling!==i)&&e.insertBefore(t,i||null)}function v(e){e.parentNode.removeChild(e)}function E(e,t){for(var i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function A(e){return document.createElement(e)}function y(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function S(e){return document.createTextNode(e)}function C(){return S(" ")}function b(){return S("")}function T(e,t,i,n){return e.addEventListener(t,i,n),function(){return e.removeEventListener(t,i,n)}}function I(e){return function(t){return t.preventDefault(),e.call(this,t)}}function R(e,t,i){null==i?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function w(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function O(e,t){e.value=null==t?"":t}function k(e,t,i,n){e.style.setProperty(t,i,n?"important":"")}function N(e,t,i){e.classList[i?"add":"remove"](t)}function L(e,t){var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,!1,!1,t),i}var P,D=function(){function e(e){this.e=this.n=null,this.l=e}var t=e.prototype;return t.m=function(e,t,i){void 0===i&&(i=null),this.e||(this.e=A(t.nodeName),this.t=t,this.l?this.n=this.l:this.h(e)),this.i(i)},t.h=function(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)},t.i=function(e){for(var t=0;t<this.n.length;t+=1)_(this.t,this.n[t],e)},t.p=function(e){this.d(),this.h(e),this.i(this.a)},t.d=function(){this.n.forEach(v)},e}();function M(e){P=e}function x(){if(!P)throw new Error("Function called outside component initialization");return P}function B(e){x().$$.on_mount.push(e)}function U(e){x().$$.on_destroy.push(e)}function F(){var e=x();return function(t,i){var n=e.$$.callbacks[t];if(n){var r=L(t,i);n.slice().forEach((function(t){t.call(e,r)}))}}}function V(e,t){var i=this,n=e.$$.callbacks[t.type];n&&n.slice().forEach((function(e){return e.call(i,t)}))}new Set;var j=[],G=[],H=[],Q=[],W=Promise.resolve(),q=!1;function $(){q||(q=!0,W.then(J))}function z(e){H.push(e)}function Z(e){Q.push(e)}var Y=!1,K=new Set;function J(){if(!Y){Y=!0;do{for(var e=0;e<j.length;e+=1){var t=j[e];M(t),X(t.$$)}for(M(null),j.length=0;G.length;)G.pop()();for(var i=0;i<H.length;i+=1){var n=H[i];K.has(n)||(K.add(n),n())}H.length=0}while(j.length);for(;Q.length;)Q.pop()();q=!1,Y=!1,K.clear()}}function X(e){if(null!==e.fragment){e.update(),s(e.before_update);var t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(z)}}var ee,te=new Set;function ie(){ee={r:0,c:[],p:ee}}function ne(){ee.r||s(ee.c),ee=ee.p}function re(e,t){e&&e.i&&(te.delete(e),e.i(t))}function oe(e,t,i,n){if(e&&e.o){if(te.has(e))return;te.add(e),ee.c.push((function(){te.delete(e),n&&(i&&e.d(1),n())})),e.o(t)}}function se(e,t){oe(e,1,1,(function(){t.delete(e.key)}))}function ae(e,t,i,n,r,o,s,a,c,l,u,d){for(var h=e.length,p=o.length,f=h,g={};f--;)g[e[f].key]=f;var m=[],_=new Map,v=new Map;for(f=p;f--;){var E=d(r,o,f),A=i(E),y=s.get(A);y?n&&y.p(E,t):(y=l(A,E)).c(),_.set(A,m[f]=y),A in g&&v.set(A,Math.abs(f-g[A]))}var S=new Set,C=new Set;function b(e){re(e,1),e.m(a,u),s.set(e.key,e),u=e.first,p--}for(;h&&p;){var T=m[p-1],I=e[h-1],R=T.key,w=I.key;T===I?(u=T.first,h--,p--):_.has(w)?!s.has(R)||S.has(R)?b(T):C.has(w)?h--:v.get(R)>v.get(w)?(C.add(R),b(T)):(S.add(w),h--):(c(I,s),h--)}for(;h--;){var O=e[h];_.has(O.key)||c(O,s)}for(;p;)b(m[p-1]);return m}function ce(e,t,i){var n=e.$$.props[t];void 0!==n&&(e.$$.bound[n]=i,i(e.$$.ctx[n]))}function le(e){e&&e.c()}function ue(e,t,i,n){var o=e.$$,c=o.fragment,l=o.on_mount,u=o.on_destroy,d=o.after_update;c&&c.m(t,i),n||z((function(){var t=l.map(r).filter(a);u?u.push.apply(u,t):s(t),e.$$.on_mount=[]})),d.forEach(z)}function de(e,t){var i=e.$$;null!==i.fragment&&(s(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function he(e,t){-1===e.$$.dirty[0]&&(j.push(e),$(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function pe(e,t,i,r,a,c,l){void 0===l&&(l=[-1]);var u=P;M(e);var d=e.$$={fragment:null,ctx:null,props:c,update:n,not_equal:a,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:t.context||[]),callbacks:o(),dirty:l,skip_bound:!1},h=!1;if(d.ctx=i?i(e,t.props||{},(function(t,i){var n=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:i;return d.ctx&&a(d.ctx[t],d.ctx[t]=n)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](n),h&&he(e,t)),i})):[],d.update(),h=!0,s(d.before_update),d.fragment=!!r&&r(d.ctx),t.target){if(t.hydrate){f=!0;var p=function(e){return Array.from(e.childNodes)}(t.target);d.fragment&&d.fragment.l(p),p.forEach(v)}else d.fragment&&d.fragment.c();t.intro&&re(e.$$.fragment),ue(e,t.target,t.anchor,t.customElement),f=!1,J()}M(u)}"undefined"!=typeof window?window:"undefined"!=typeof globalThis&&globalThis,new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&HTMLElement;var fe=function(){function e(){}var t=e.prototype;return t.$destroy=function(){de(this,1),this.$destroy=n},t.$on=function(e,t){var i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}},t.$set=function(e){this.$$set&&!l(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)},e}()},4683:function(e,t,i){"use strict";i.d(t,{U2:function(){return n.$X},fZ:function(){return o}});var n=i(8826),r=[];function o(e,t){var i;void 0===t&&(t=n.ZT);var o=[];function s(t){if((0,n.N8)(e,t)&&(e=t,i)){for(var s=!r.length,a=0;a<o.length;a+=1){var c=o[a];c[1](),r.push(c,e)}if(s){for(var l=0;l<r.length;l+=2)r[l][0](r[l+1]);r.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(r,a){void 0===a&&(a=n.ZT);var c=[r,a];return o.push(c),1===o.length&&(i=t(s)||n.ZT),r(e),function(){var e=o.indexOf(c);-1!==e&&o.splice(e,1),0===o.length&&(i(),i=null)}}}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](i,i.exports,__webpack_require__),i.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var __webpack_exports__={};return function(){"use strict";__webpack_require__.d(__webpack_exports__,{default:function(){return Ln}}),__webpack_require__(5441);var e,t=__webpack_require__(5103),i={one:function(e,t){void 0===t&&(t=document);try{return t.querySelector(e)||void 0}catch(e){return}},all:function(e,t){void 0===t&&(t=document);try{var i=t.querySelectorAll(e);return[].slice.call(i)}catch(e){return[]}},addClass:function(e,i){if(e)for(var n=(0,t.kJ)(e)?e:[e],r=0;r<n.length;r++){var o=(n[r].className||"").split(" ");o.indexOf(i)>-1||(o.push(i),n[r].className=o.join(" "))}},removeClass:function(e,i){if(e)for(var n=(0,t.kJ)(e)?e:[e],r=0;r<n.length;r++){for(var o=n[r].className.split(" "),s=0;s<o.length;s++)o[s]==i&&(o[s]="");n[r].className=o.join(" ").trim()}},hasClass:function(e,t){return!(!e||!e.classList)&&e.classList.contains(t)},bind:function(e,i,n,r){void 0===r&&(r=!1),e&&((0,t.kJ)(e)?e:[e]).forEach((function(e){e.addEventListener(i,n,!!r)}))},delegate:function(e,t,n,r){e&&e.addEventListener(t,(function(t){var o=i.all(n,e);if(o)e:for(var s=0;s<o.length;s++)for(var a=t.target;a;){if(a==o[s]){r.call(a,t,a);break e}if((a=a.parentNode)==e)break}}),!1)},removeChildren:function(e){for(;e.firstChild;)e.removeChild(e.lastChild);return e}},n=i,r=__webpack_require__(8826),o=__webpack_require__(7003),s=__webpack_require__(3379),a=__webpack_require__.n(s),c=__webpack_require__(7558),l=0,u={injectType:"lazyStyleTag",insert:"head",singleton:!1},d={};d.locals=c.Z.locals||{},d.use=function(){return l++||(e=a()(c.Z,u)),d},d.unuse=function(){l>0&&!--l&&(e(),e=null)};var h=d;function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t,i,n,o;return{c:function(){t=(0,r.bG)("div"),i=(0,r.fL)("vConsole"),(0,r.Lj)(t,"class","vc-switch"),(0,r.cz)(t,"right",e[2].x+"px"),(0,r.cz)(t,"bottom",e[2].y+"px"),(0,r.cz)(t,"display",e[0]?"block":"none")},m:function(s,a){(0,r.$T)(s,t,a),(0,r.R3)(t,i),e[8](t),n||(o=[(0,r.oL)(t,"touchstart",e[3]),(0,r.oL)(t,"touchend",e[4]),(0,r.oL)(t,"touchmove",e[5]),(0,r.oL)(t,"click",e[7])],n=!0)},p:function(e,i){var n=i[0];4&n&&(0,r.cz)(t,"right",e[2].x+"px"),4&n&&(0,r.cz)(t,"bottom",e[2].y+"px"),1&n&&(0,r.cz)(t,"display",e[0]?"block":"none")},i:r.ZT,o:r.ZT,d:function(i){i&&(0,r.og)(t),e[8](null),n=!1,(0,r.j7)(o)}}}function m(e,i,n){var s,a=i.show,c=void 0===a||a,l=i.position,u=void 0===l?{x:0,y:0}:l,d={hasMoved:!1,x:0,y:0,startX:0,startY:0,endX:0,endY:0},p={x:0,y:0};(0,o.H3)((function(){h.use()})),(0,o.ev)((function(){h.unuse()}));var f=function(e,i){var r=g(e,i);e=r[0],i=r[1],d.x=e,d.y=i,n(2,p.x=e,p),n(2,p.y=i,p),t.po("switch_x",e+""),t.po("switch_y",i+"")},g=function(e,t){var i=Math.max(document.documentElement.offsetWidth,window.innerWidth),n=Math.max(document.documentElement.offsetHeight,window.innerHeight);return e+s.offsetWidth>i&&(e=i-s.offsetWidth),t+s.offsetHeight>n&&(t=n-s.offsetHeight),e<0&&(e=0),t<20&&(t=20),[e,t]};return e.$$set=function(e){"show"in e&&n(0,c=e.show),"position"in e&&n(6,u=e.position)},e.$$.update=function(){66&e.$$.dirty&&s&&f(u.x,u.y)},[c,s,p,function(e){d.startX=e.touches[0].pageX,d.startY=e.touches[0].pageY,d.hasMoved=!1},function(e){d.hasMoved&&(d.startX=0,d.startY=0,d.hasMoved=!1,f(d.endX,d.endY))},function(e){if(!(e.touches.length<=0)){var t=e.touches[0].pageX-d.startX,i=e.touches[0].pageY-d.startY,r=Math.floor(d.x-t),o=Math.floor(d.y-i),s=g(r,o);r=s[0],o=s[1],n(2,p.x=r,p),n(2,p.y=o,p),d.endX=r,d.endY=o,d.hasMoved=!0,e.preventDefault()}},u,function(t){r.cK.call(this,e,t)},function(e){r.Vn[e?"unshift":"push"]((function(){n(1,s=e)}))}]}var _,v=function(e){var t,i,n,o,s;function a(t){var i;return i=e.call(this)||this,(0,r.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i),t,m,g,r.N8,{show:0,position:6}),i}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,f(t,i),n=a,(o=[{key:"show",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({show:e}),(0,r.yl)()}},{key:"position",get:function(){return this.$$.ctx[6]},set:function(e){this.$set({position:e}),(0,r.yl)()}}])&&p(n.prototype,o),s&&p(n,s),a}(r.f_),E=__webpack_require__(4687),A=__webpack_require__(3283),y=0,S={injectType:"lazyStyleTag",insert:"head",singleton:!1},C={};C.locals=A.Z.locals||{},C.use=function(){return y++||(_=a()(A.Z,S)),C},C.unuse=function(){y>0&&!--y&&(_(),_=null)};var b=C;function T(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t,i){var n=e.slice();return n[36]=t[i][0],n[37]=t[i][1],n}function w(e,t,i){var n=e.slice();return n[40]=t[i],n[42]=i,n}function O(e,t,i){var n=e.slice();return n[36]=t[i][0],n[37]=t[i][1],n}function k(e,t,i){var n=e.slice();return n[36]=t[i][0],n[37]=t[i][1],n}function N(e,t,i){var n=e.slice();return n[40]=t[i],n[42]=i,n}function L(e,t,i){var n=e.slice();return n[36]=t[i][0],n[37]=t[i][1],n}function P(e){var t,i,n,o,s,a=e[37].name+"";function c(){return e[24](e[37])}return{c:function(){t=(0,r.bG)("a"),i=(0,r.fL)(a),(0,r.Lj)(t,"class","vc-tab"),(0,r.Lj)(t,"id",n="__vc_tab_"+e[37].id),(0,r.VH)(t,"vc-actived",e[37].id===e[2])},m:function(e,n){(0,r.$T)(e,t,n),(0,r.R3)(t,i),o||(s=(0,r.oL)(t,"click",c),o=!0)},p:function(o,s){e=o,8&s[0]&&a!==(a=e[37].name+"")&&(0,r.rT)(i,a),8&s[0]&&n!==(n="__vc_tab_"+e[37].id)&&(0,r.Lj)(t,"id",n),12&s[0]&&(0,r.VH)(t,"vc-actived",e[37].id===e[2])},d:function(e){e&&(0,r.og)(t),o=!1,s()}}}function D(e){var t,i=e[37].hasTabPanel&&P(e);return{c:function(){i&&i.c(),t=(0,r.cS)()},m:function(e,n){i&&i.m(e,n),(0,r.$T)(e,t,n)},p:function(e,n){e[37].hasTabPanel?i?i.p(e,n):((i=P(e)).c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d:function(e){i&&i.d(e),e&&(0,r.og)(t)}}}function M(e){var t,i,n,o,s,a=e[40].name+"";function c(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e)[25].apply(t,[e[37],e[42]].concat(n))}return{c:function(){t=(0,r.bG)("i"),i=(0,r.fL)(a),(0,r.Lj)(t,"class",n="vc-toptab vc-topbar-"+e[37].id+" "+e[40].className),(0,r.VH)(t,"vc-toggle",e[37].id===e[2]),(0,r.VH)(t,"vc-actived",e[40].actived)},m:function(e,n){(0,r.$T)(e,t,n),(0,r.R3)(t,i),o||(s=(0,r.oL)(t,"click",c),o=!0)},p:function(o,s){e=o,8&s[0]&&a!==(a=e[40].name+"")&&(0,r.rT)(i,a),8&s[0]&&n!==(n="vc-toptab vc-topbar-"+e[37].id+" "+e[40].className)&&(0,r.Lj)(t,"class",n),12&s[0]&&(0,r.VH)(t,"vc-toggle",e[37].id===e[2]),8&s[0]&&(0,r.VH)(t,"vc-actived",e[40].actived)},d:function(e){e&&(0,r.og)(t),o=!1,s()}}}function x(e){for(var t,i=e[37].topbarList,n=[],o=0;o<i.length;o+=1)n[o]=M(N(e,i,o));return{c:function(){for(var e=0;e<n.length;e+=1)n[e].c();t=(0,r.cS)()},m:function(e,i){for(var o=0;o<n.length;o+=1)n[o].m(e,i);(0,r.$T)(e,t,i)},p:function(e,r){if(16396&r[0]){var o;for(i=e[37].topbarList,o=0;o<i.length;o+=1){var s=N(e,i,o);n[o]?n[o].p(s,r):(n[o]=M(s),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=i.length}},d:function(e){(0,r.RM)(n,e),e&&(0,r.og)(t)}}}function B(e){var t,i;return{c:function(){t=(0,r.bG)("div"),(0,r.Lj)(t,"id",i="__vc_plug_"+e[37].id),(0,r.Lj)(t,"class","vc-plugin-box"),(0,r.VH)(t,"vc-actived",e[37].id===e[2])},m:function(i,n){(0,r.$T)(i,t,n),e[26](t)},p:function(e,n){8&n[0]&&i!==(i="__vc_plug_"+e[37].id)&&(0,r.Lj)(t,"id",i),12&n[0]&&(0,r.VH)(t,"vc-actived",e[37].id===e[2])},d:function(i){i&&(0,r.og)(t),e[26](null)}}}function U(e){var t,i,n,o,s,a=e[40].name+"";function c(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e)[28].apply(t,[e[37],e[42]].concat(n))}return{c:function(){t=(0,r.bG)("i"),i=(0,r.fL)(a),(0,r.Lj)(t,"class",n="vc-tool vc-tool-"+e[37].id),(0,r.VH)(t,"vc-global-tool",e[40].global),(0,r.VH)(t,"vc-toggle",e[37].id===e[2])},m:function(e,n){(0,r.$T)(e,t,n),(0,r.R3)(t,i),o||(s=(0,r.oL)(t,"click",c),o=!0)},p:function(o,s){e=o,8&s[0]&&a!==(a=e[40].name+"")&&(0,r.rT)(i,a),8&s[0]&&n!==(n="vc-tool vc-tool-"+e[37].id)&&(0,r.Lj)(t,"class",n),8&s[0]&&(0,r.VH)(t,"vc-global-tool",e[40].global),12&s[0]&&(0,r.VH)(t,"vc-toggle",e[37].id===e[2])},d:function(e){e&&(0,r.og)(t),o=!1,s()}}}function F(e){for(var t,i=e[37].toolbarList,n=[],o=0;o<i.length;o+=1)n[o]=U(w(e,i,o));return{c:function(){for(var e=0;e<n.length;e+=1)n[e].c();t=(0,r.cS)()},m:function(e,i){for(var o=0;o<n.length;o+=1)n[o].m(e,i);(0,r.$T)(e,t,i)},p:function(e,r){if(32780&r[0]){var o;for(i=e[37].toolbarList,o=0;o<i.length;o+=1){var s=w(e,i,o);n[o]?n[o].p(s,r):(n[o]=U(s),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=i.length}},d:function(e){(0,r.RM)(n,e),e&&(0,r.og)(t)}}}function V(e){var t,i,n,o,s,a,c,l,u,d,h,p,f,g,m,_,E,A,y,S,C;function b(t){e[22](t)}function T(t){e[23](t)}var I={};void 0!==e[0]&&(I.show=e[0]),void 0!==e[1]&&(I.position=e[1]),i=new v({props:I}),r.Vn.push((function(){return(0,r.ak)(i,"show",b)})),r.Vn.push((function(){return(0,r.ak)(i,"position",T)})),i.$on("click",e[11]);for(var w=Object.entries(e[3]),N=[],P=0;P<w.length;P+=1)N[P]=D(L(e,w,P));for(var M=Object.entries(e[3]),U=[],V=0;V<M.length;V+=1)U[V]=x(k(e,M,V));for(var j=Object.entries(e[3]),G=[],H=0;H<j.length;H+=1)G[H]=B(O(e,j,H));for(var Q=Object.entries(e[3]),W=[],q=0;q<Q.length;q+=1)W[q]=F(R(e,Q,q));return{c:function(){var n,o;t=(0,r.bG)("div"),(0,r.YC)(i.$$.fragment),s=(0,r.Dh)(),a=(0,r.bG)("div"),c=(0,r.Dh)(),l=(0,r.bG)("div"),u=(0,r.bG)("div");for(var v=0;v<N.length;v+=1)N[v].c();d=(0,r.Dh)(),h=(0,r.bG)("div");for(var y=0;y<U.length;y+=1)U[y].c();p=(0,r.Dh)(),f=(0,r.bG)("div");for(var S=0;S<G.length;S+=1)G[S].c();g=(0,r.Dh)(),m=(0,r.bG)("div");for(var C=0;C<W.length;C+=1)W[C].c();_=(0,r.Dh)(),(E=(0,r.bG)("i")).textContent="Hide",(0,r.Lj)(a,"class","vc-mask"),(0,r.cz)(a,"display",e[10]?"block":"none"),(0,r.Lj)(u,"class","vc-tabbar"),(0,r.Lj)(h,"class","vc-topbar"),(0,r.Lj)(f,"class","vc-content"),(0,r.VH)(f,"vc-has-topbar",(null==(n=e[3][e[2]])||null==(o=n.topbarList)?void 0:o.length)>0),(0,r.Lj)(E,"class","vc-tool vc-global-tool vc-tool-last vc-hide"),(0,r.Lj)(m,"class","vc-toolbar"),(0,r.Lj)(l,"class","vc-panel"),(0,r.cz)(l,"display",e[9]?"block":"none"),(0,r.Lj)(t,"id","__vconsole"),(0,r.Lj)(t,"style",A=e[7]?"font-size:"+e[7]+";":""),(0,r.Lj)(t,"data-theme",e[5]),(0,r.VH)(t,"vc-toggle",e[8])},m:function(n,o){(0,r.$T)(n,t,o),(0,r.ye)(i,t,null),(0,r.R3)(t,s),(0,r.R3)(t,a),(0,r.R3)(t,c),(0,r.R3)(t,l),(0,r.R3)(l,u);for(var v=0;v<N.length;v+=1)N[v].m(u,null);(0,r.R3)(l,d),(0,r.R3)(l,h);for(var A=0;A<U.length;A+=1)U[A].m(h,null);(0,r.R3)(l,p),(0,r.R3)(l,f);for(var b=0;b<G.length;b+=1)G[b].m(f,null);e[27](f),(0,r.R3)(l,g),(0,r.R3)(l,m);for(var T=0;T<W.length;T+=1)W[T].m(m,null);(0,r.R3)(m,_),(0,r.R3)(m,E),y=!0,S||(C=[(0,r.oL)(a,"click",e[12]),(0,r.oL)(f,"touchstart",e[16]),(0,r.oL)(f,"touchmove",e[17]),(0,r.oL)(f,"touchend",e[18]),(0,r.oL)(f,"scroll",e[19]),(0,r.oL)(E,"click",e[12])],S=!0)},p:function(e,s){var c,d,p={};if(!n&&1&s[0]&&(n=!0,p.show=e[0],(0,r.hj)((function(){return n=!1}))),!o&&2&s[0]&&(o=!0,p.position=e[1],(0,r.hj)((function(){return o=!1}))),i.$set(p),(!y||1024&s[0])&&(0,r.cz)(a,"display",e[10]?"block":"none"),8204&s[0]){var g;for(w=Object.entries(e[3]),g=0;g<w.length;g+=1){var v=L(e,w,g);N[g]?N[g].p(v,s):(N[g]=D(v),N[g].c(),N[g].m(u,null))}for(;g<N.length;g+=1)N[g].d(1);N.length=w.length}if(16396&s[0]){var E;for(M=Object.entries(e[3]),E=0;E<M.length;E+=1){var S=k(e,M,E);U[E]?U[E].p(S,s):(U[E]=x(S),U[E].c(),U[E].m(h,null))}for(;E<U.length;E+=1)U[E].d(1);U.length=M.length}if(28&s[0]){var C;for(j=Object.entries(e[3]),C=0;C<j.length;C+=1){var b=O(e,j,C);G[C]?G[C].p(b,s):(G[C]=B(b),G[C].c(),G[C].m(f,null))}for(;C<G.length;C+=1)G[C].d(1);G.length=j.length}if(12&s[0]&&(0,r.VH)(f,"vc-has-topbar",(null==(c=e[3][e[2]])||null==(d=c.topbarList)?void 0:d.length)>0),32780&s[0]){var T;for(Q=Object.entries(e[3]),T=0;T<Q.length;T+=1){var I=R(e,Q,T);W[T]?W[T].p(I,s):(W[T]=F(I),W[T].c(),W[T].m(m,_))}for(;T<W.length;T+=1)W[T].d(1);W.length=Q.length}(!y||512&s[0])&&(0,r.cz)(l,"display",e[9]?"block":"none"),(!y||128&s[0]&&A!==(A=e[7]?"font-size:"+e[7]+";":""))&&(0,r.Lj)(t,"style",A),(!y||32&s[0])&&(0,r.Lj)(t,"data-theme",e[5]),256&s[0]&&(0,r.VH)(t,"vc-toggle",e[8])},i:function(e){y||((0,r.Ui)(i.$$.fragment,e),y=!0)},o:function(e){(0,r.et)(i.$$.fragment,e),y=!1},d:function(n){n&&(0,r.og)(t),(0,r.vp)(i),(0,r.RM)(N,n),(0,r.RM)(U,n),(0,r.RM)(G,n),e[27](null),(0,r.RM)(W,n),S=!1,(0,r.j7)(C)}}}function j(e,i,n){var s,a,c=i.theme,l=void 0===c?"":c,u=i.disableScrolling,d=void 0!==u&&u,h=i.show,p=void 0!==h&&h,f=i.showSwitchButton,g=void 0===f||f,m=i.switchButtonPosition,_=void 0===m?{x:0,y:0}:m,v=i.activedPluginId,A=void 0===v?"":v,y=i.pluginList,S=void 0===y?{}:y,C=i.divContentInner,T=void 0===C?void 0:C,I=(0,o.x)(),R=!1,w="",O=!1,k=!1,N=!1,L=!0,P=0;(0,o.H3)((function(){var e=document.querySelectorAll('[name="viewport"]');if(e&&e[0]){var t=(e[e.length-1].getAttribute("content")||"").match(/initial\-scale\=\d+(\.\d+)?/),i=t?parseFloat(t[0].split("=")[1]):1;1!==i&&n(7,w=Math.floor(1/i*13)+"px")}b.use&&b.use(),a=E.x.subscribe((function(e){p&&P!==e.updateTime&&(P=e.updateTime,D())}))})),(0,o.ev)((function(){b.unuse&&b.unuse(),a&&a()}));var D=function(){!d&&L&&s&&n(6,s.scrollTop=s.scrollHeight-s.offsetHeight,s)},M=function(e){e!==A&&(n(2,A=e),I("changePanel",{pluginId:e}))},x=function(e,i,r){var o=S[i].topbarList[r],s=!0;if(t.mf(o.onClick)&&(s=o.onClick.call(e.target,e,o.data)),!1===s);else{for(var a=0;a<S[i].topbarList.length;a++)n(3,S[i].topbarList[a].actived=r===a,S);n(3,S)}},B=function(e,i,n){var r=S[i].toolbarList[n];t.mf(r.onClick)&&r.onClick.call(e.target,e,r.data)};return e.$$set=function(e){"theme"in e&&n(5,l=e.theme),"disableScrolling"in e&&n(20,d=e.disableScrolling),"show"in e&&n(21,p=e.show),"showSwitchButton"in e&&n(0,g=e.showSwitchButton),"switchButtonPosition"in e&&n(1,_=e.switchButtonPosition),"activedPluginId"in e&&n(2,A=e.activedPluginId),"pluginList"in e&&n(3,S=e.pluginList),"divContentInner"in e&&n(4,T=e.divContentInner)},e.$$.update=function(){2097152&e.$$.dirty[0]&&(!0===p?(n(9,k=!0),n(10,N=!0),setTimeout((function(){n(8,O=!0),D()}),10)):(n(8,O=!1),setTimeout((function(){n(9,k=!1),n(10,N=!1)}),330)))},[g,_,A,S,T,l,s,w,O,k,N,function(e){I("show",{show:!0})},function(e){I("show",{show:!1})},M,x,B,function(e){var t=s.scrollTop,i=s.scrollHeight,r=t+s.offsetHeight;0===t?(n(6,s.scrollTop=1,s),0===s.scrollTop&&e.target.classList&&!e.target.classList.contains("vc-cmd-input")&&(R=!0)):r===i&&(n(6,s.scrollTop=t-1,s),s.scrollTop===t&&e.target.classList&&!e.target.classList.contains("vc-cmd-input")&&(R=!0))},function(e){R&&e.preventDefault()},function(e){R=!1},function(e){p&&(L=s.scrollTop+s.offsetHeight>=s.scrollHeight-50)},d,p,function(e){n(0,g=e)},function(e){n(1,_=e)},function(e){return M(e.id)},function(e,t,i){return x(i,e.id,t)},function(e){r.Vn[e?"unshift":"push"]((function(){n(4,T=e)}))},function(e){r.Vn[e?"unshift":"push"]((function(){n(6,s=e)}))},function(e,t,i){return B(i,e.id,t)}]}var G=function(e){var t,i,n,o,s;function a(t){var i;return i=e.call(this)||this,(0,r.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i),t,j,V,r.N8,{theme:5,disableScrolling:20,show:21,showSwitchButton:0,switchButtonPosition:1,activedPluginId:2,pluginList:3,divContentInner:4},[-1,-1]),i}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,I(t,i),n=a,(o=[{key:"theme",get:function(){return this.$$.ctx[5]},set:function(e){this.$set({theme:e}),(0,r.yl)()}},{key:"disableScrolling",get:function(){return this.$$.ctx[20]},set:function(e){this.$set({disableScrolling:e}),(0,r.yl)()}},{key:"show",get:function(){return this.$$.ctx[21]},set:function(e){this.$set({show:e}),(0,r.yl)()}},{key:"showSwitchButton",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({showSwitchButton:e}),(0,r.yl)()}},{key:"switchButtonPosition",get:function(){return this.$$.ctx[1]},set:function(e){this.$set({switchButtonPosition:e}),(0,r.yl)()}},{key:"activedPluginId",get:function(){return this.$$.ctx[2]},set:function(e){this.$set({activedPluginId:e}),(0,r.yl)()}},{key:"pluginList",get:function(){return this.$$.ctx[3]},set:function(e){this.$set({pluginList:e}),(0,r.yl)()}},{key:"divContentInner",get:function(){return this.$$.ctx[4]},set:function(e){this.$set({divContentInner:e}),(0,r.yl)()}}])&&T(n.prototype,o),s&&T(n,s),a}(r.f_);function H(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Q=function(){function e(e,t){void 0===t&&(t="newPlugin"),this.isReady=!1,this.eventMap=new Map,this.exporter=void 0,this._id=void 0,this._name=void 0,this._vConsole=void 0,this.id=e,this.name=t,this.isReady=!1}var i,n,r,o=e.prototype;return o.on=function(e,t){return this.eventMap.set(e,t),this},o.onRemove=function(){this.unbindExporter()},o.trigger=function(e,t){var i=this.eventMap.get(e);if("function"==typeof i)i.call(this,t);else{var n="on"+e.charAt(0).toUpperCase()+e.slice(1);"function"==typeof this[n]&&this[n].call(this,t)}return this},o.bindExporter=function(){if(this._vConsole&&this.exporter){var e="default"===this.id?"log":this.id;this._vConsole[e]=this.exporter}},o.unbindExporter=function(){var e="default"===this.id?"log":this.id;this._vConsole&&this._vConsole[e]&&(this._vConsole[e]=void 0)},o.getUniqueID=function(e){return void 0===e&&(e=""),(0,t.QI)(e)},i=e,(n=[{key:"id",get:function(){return this._id},set:function(e){if("string"!=typeof e)throw"[vConsole] Plugin ID must be a string.";if(!e)throw"[vConsole] Plugin ID cannot be empty.";this._id=e.toLowerCase()}},{key:"name",get:function(){return this._name},set:function(e){if("string"!=typeof e)throw"[vConsole] Plugin name must be a string.";if(!e)throw"[vConsole] Plugin name cannot be empty.";this._name=e}},{key:"vConsole",get:function(){return this._vConsole||void 0},set:function(e){if(!e)throw"[vConsole] vConsole cannot be empty";this._vConsole=e,this.bindExporter()}}])&&H(i.prototype,n),r&&H(i,r),e}();function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=function(e){var t,i;function n(t,i,n,r){var o;return(o=e.call(this,t,i)||this).CompClass=void 0,o.compInstance=void 0,o.initialProps=void 0,o.CompClass=n,o.initialProps=r,o}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,W(t,i);var r=n.prototype;return r.onReady=function(){this.isReady=!0},r.onRenderTab=function(e){var t=document.createElement("div");this.compInstance=new this.CompClass({target:t,props:this.initialProps}),e(t.firstElementChild)},r.onRemove=function(){e.prototype.onRemove&&e.prototype.onRemove.call(this),this.compInstance&&this.compInstance.$destroy()},n}(Q),$=__webpack_require__(8665),z=__webpack_require__(9923),Z=__webpack_require__(6958);function Y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t,i;return(t=new Z.Z({props:{name:e[0]?"success":"copy"}})).$on("click",e[1]),{c:function(){(0,r.YC)(t.$$.fragment)},m:function(e,n){(0,r.ye)(t,e,n),i=!0},p:function(e,i){var n={};1&i[0]&&(n.name=e[0]?"success":"copy"),t.$set(n)},i:function(e){i||((0,r.Ui)(t.$$.fragment,e),i=!0)},o:function(e){(0,r.et)(t.$$.fragment,e),i=!1},d:function(e){(0,r.vp)(t,e)}}}function X(e,i,n){var r=i.content,o=void 0===r?"":r,s=i.handler,a=void 0===s?void 0:s,c={target:document.documentElement},l=!1;return e.$$set=function(e){"content"in e&&n(2,o=e.content),"handler"in e&&n(3,a=e.handler)},[l,function(e){(function(e,t){var i=(void 0===t?{}:t).target,n=void 0===i?document.body:i,r=document.createElement("textarea"),o=document.activeElement;r.value=e,r.setAttribute("readonly",""),r.style.contain="strict",r.style.position="absolute",r.style.left="-9999px",r.style.fontSize="12pt";var s=document.getSelection(),a=!1;s.rangeCount>0&&(a=s.getRangeAt(0)),n.append(r),r.select(),r.selectionStart=0,r.selectionEnd=e.length;try{document.execCommand("copy")}catch(e){}r.remove(),a&&(s.removeAllRanges(),s.addRange(a)),o&&o.focus()})(t.mf(a)?a(o)||"":t.Kn(o)||t.kJ(o)?t.hZ(o):o,c),n(0,l=!0),setTimeout((function(){n(0,l=!1)}),600)},o,a]}var ee,te=function(e){var t,i,n,o,s;function a(t){var i;return i=e.call(this)||this,(0,r.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i),t,X,J,r.N8,{content:2,handler:3}),i}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,K(t,i),n=a,(o=[{key:"content",get:function(){return this.$$.ctx[2]},set:function(e){this.$set({content:e}),(0,r.yl)()}},{key:"handler",get:function(){return this.$$.ctx[3]},set:function(e){this.$set({handler:e}),(0,r.yl)()}}])&&Y(n.prototype,o),s&&Y(n,s),a}(r.f_),ie=__webpack_require__(845),ne=0,re={injectType:"lazyStyleTag",insert:"head",singleton:!1},oe={};oe.locals=ie.Z.locals||{},oe.use=function(){return ne++||(ee=a()(ie.Z,re)),oe},oe.unuse=function(){ne>0&&!--ne&&(ee(),ee=null)};var se=oe;function ae(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var i,n,o,s=t.rE(e[1])+"";return{c:function(){i=(0,r.bG)("i"),n=(0,r.fL)(s),o=(0,r.fL)(":"),(0,r.Lj)(i,"class","vc-log-key"),(0,r.VH)(i,"vc-log-key-symbol","symbol"===e[2]),(0,r.VH)(i,"vc-log-key-private","private"===e[2])},m:function(e,t){(0,r.$T)(e,i,t),(0,r.R3)(i,n),(0,r.$T)(e,o,t)},p:function(e,o){2&o&&s!==(s=t.rE(e[1])+"")&&(0,r.rT)(n,s),4&o&&(0,r.VH)(i,"vc-log-key-symbol","symbol"===e[2]),4&o&&(0,r.VH)(i,"vc-log-key-private","private"===e[2])},d:function(e){e&&(0,r.og)(i),e&&(0,r.og)(o)}}}function ue(e){var t;return{c:function(){t=(0,r.fL)(e[3])},m:function(e,i){(0,r.$T)(e,t,i)},p:function(e,i){8&i&&(0,r.rT)(t,e[3])},d:function(e){e&&(0,r.og)(t)}}}function de(e){var t,i;return{c:function(){t=new r.FW,i=(0,r.cS)(),t.a=i},m:function(n,o){t.m(e[3],n,o),(0,r.$T)(n,i,o)},p:function(e,i){8&i&&t.p(e[3])},d:function(e){e&&(0,r.og)(i),e&&t.d()}}}function he(e){var t,i,n,o=void 0!==e[1]&&le(e);function s(e,t){return e[5]||"string"!==e[4]?ue:de}var a=s(e),c=a(e);return{c:function(){o&&o.c(),t=(0,r.Dh)(),i=(0,r.bG)("i"),c.c(),(0,r.Lj)(i,"class",n="vc-log-val vc-log-val-"+e[4]),(0,r.Lj)(i,"style",e[0]),(0,r.VH)(i,"vc-log-val-haskey",void 0!==e[1])},m:function(e,n){o&&o.m(e,n),(0,r.$T)(e,t,n),(0,r.$T)(e,i,n),c.m(i,null)},p:function(e,l){var u=l[0];void 0!==e[1]?o?o.p(e,u):((o=le(e)).c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),a===(a=s(e))&&c?c.p(e,u):(c.d(1),(c=a(e))&&(c.c(),c.m(i,null))),16&u&&n!==(n="vc-log-val vc-log-val-"+e[4])&&(0,r.Lj)(i,"class",n),1&u&&(0,r.Lj)(i,"style",e[0]),18&u&&(0,r.VH)(i,"vc-log-val-haskey",void 0!==e[1])},i:r.ZT,o:r.ZT,d:function(e){o&&o.d(e),e&&(0,r.og)(t),e&&(0,r.og)(i),c.d()}}}function pe(e,i,n){var r=i.origData,s=i.style,a=void 0===s?"":s,c=i.dataKey,l=void 0===c?void 0:c,u=i.keyType,d=void 0===u?"":u,h="",p="",f=!1,g=!1;return(0,o.H3)((function(){se.use()})),(0,o.ev)((function(){se.unuse()})),e.$$set=function(e){"origData"in e&&n(6,r=e.origData),"style"in e&&n(0,a=e.style),"dataKey"in e&&n(1,l=e.dataKey),"keyType"in e&&n(2,d=e.keyType)},e.$$.update=function(){if(250&e.$$.dirty&&!f){n(5,g=void 0!==l);var i=(0,$.LH)(r,g);n(4,p=i.valueType),n(3,h=i.text),g||"string"!==p||n(3,h=t.Ak(h.replace("\\n","\n").replace("\\t","\t"))),n(7,f=!0)}},[a,l,d,h,p,g,r,f]}var fe,ge=function(e){var t,i,n,o,s;function a(t){var i;return i=e.call(this)||this,(0,r.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i),t,pe,he,r.N8,{origData:6,style:0,dataKey:1,keyType:2}),i}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,ce(t,i),n=a,(o=[{key:"origData",get:function(){return this.$$.ctx[6]},set:function(e){this.$set({origData:e}),(0,r.yl)()}},{key:"style",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({style:e}),(0,r.yl)()}},{key:"dataKey",get:function(){return this.$$.ctx[1]},set:function(e){this.$set({dataKey:e}),(0,r.yl)()}},{key:"keyType",get:function(){return this.$$.ctx[2]},set:function(e){this.$set({keyType:e}),(0,r.yl)()}}])&&ae(n.prototype,o),s&&ae(n,s),a}(r.f_),me=__webpack_require__(1237),_e=0,ve={injectType:"lazyStyleTag",insert:"head",singleton:!1},Ee={};Ee.locals=me.Z.locals||{},Ee.use=function(){return _e++||(fe=a()(me.Z,ve)),Ee},Ee.unuse=function(){_e>0&&!--_e&&(fe(),fe=null)};var Ae=Ee;function ye(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e,t,i){var n=e.slice();return n[18]=t[i],n[20]=i,n}function be(e,t,i){var n=e.slice();return n[18]=t[i],n}function Te(e,t,i){var n=e.slice();return n[18]=t[i],n[20]=i,n}function Ie(e){for(var t,i,n,o,s,a,c,l=[],u=new Map,d=[],h=new Map,p=[],f=new Map,g=e[5],m=function(e){return e[18]},_=0;_<g.length;_+=1){var v=Te(e,g,_),E=m(v);u.set(E,l[_]=we(E,v))}for(var A=e[9]<e[5].length&&Oe(e),y=e[7],S=function(e){return e[18]},C=0;C<y.length;C+=1){var b=be(e,y,C),T=S(b);h.set(T,d[C]=ke(T,b))}for(var I=e[6],R=function(e){return e[18]},w=0;w<I.length;w+=1){var O=Ce(e,I,w),k=R(O);f.set(k,p[w]=Le(k,O))}var N=e[10]<e[6].length&&Pe(e),L=e[8]&&De(e);return{c:function(){t=(0,r.bG)("div");for(var e=0;e<l.length;e+=1)l[e].c();i=(0,r.Dh)(),A&&A.c(),n=(0,r.Dh)();for(var c=0;c<d.length;c+=1)d[c].c();o=(0,r.Dh)();for(var u=0;u<p.length;u+=1)p[u].c();s=(0,r.Dh)(),N&&N.c(),a=(0,r.Dh)(),L&&L.c(),(0,r.Lj)(t,"class","vc-log-tree-child")},m:function(e,u){(0,r.$T)(e,t,u);for(var h=0;h<l.length;h+=1)l[h].m(t,null);(0,r.R3)(t,i),A&&A.m(t,null),(0,r.R3)(t,n);for(var f=0;f<d.length;f+=1)d[f].m(t,null);(0,r.R3)(t,o);for(var g=0;g<p.length;g+=1)p[g].m(t,null);(0,r.R3)(t,s),N&&N.m(t,null),(0,r.R3)(t,a),L&&L.m(t,null),c=!0},p:function(e,c){16928&c&&(g=e[5],(0,r.dv)(),l=(0,r.GQ)(l,c,m,1,e,g,u,t,r.cl,we,i,Te),(0,r.gb)()),e[9]<e[5].length?A?A.p(e,c):((A=Oe(e)).c(),A.m(t,n)):A&&(A.d(1),A=null),16512&c&&(y=e[7],(0,r.dv)(),d=(0,r.GQ)(d,c,S,1,e,y,h,t,r.cl,ke,o,be),(0,r.gb)()),17472&c&&(I=e[6],(0,r.dv)(),p=(0,r.GQ)(p,c,R,1,e,I,f,t,r.cl,Le,s,Ce),(0,r.gb)()),e[10]<e[6].length?N?N.p(e,c):((N=Pe(e)).c(),N.m(t,a)):N&&(N.d(1),N=null),e[8]?L?(L.p(e,c),256&c&&(0,r.Ui)(L,1)):((L=De(e)).c(),(0,r.Ui)(L,1),L.m(t,null)):L&&((0,r.dv)(),(0,r.et)(L,1,1,(function(){L=null})),(0,r.gb)())},i:function(e){if(!c){for(var t=0;t<g.length;t+=1)(0,r.Ui)(l[t]);for(var i=0;i<y.length;i+=1)(0,r.Ui)(d[i]);for(var n=0;n<I.length;n+=1)(0,r.Ui)(p[n]);(0,r.Ui)(L),c=!0}},o:function(e){for(var t=0;t<l.length;t+=1)(0,r.et)(l[t]);for(var i=0;i<d.length;i+=1)(0,r.et)(d[i]);for(var n=0;n<p.length;n+=1)(0,r.et)(p[n]);(0,r.et)(L),c=!1},d:function(e){e&&(0,r.og)(t);for(var i=0;i<l.length;i+=1)l[i].d();A&&A.d();for(var n=0;n<d.length;n+=1)d[n].d();for(var o=0;o<p.length;o+=1)p[o].d();N&&N.d(),L&&L.d()}}}function Re(e){var t,i;return t=new Ue({props:{origData:e[14](e[18]),dataKey:e[18]}}),{c:function(){(0,r.YC)(t.$$.fragment)},m:function(e,n){(0,r.ye)(t,e,n),i=!0},p:function(e,i){var n={};32&i&&(n.origData=e[14](e[18])),32&i&&(n.dataKey=e[18]),t.$set(n)},i:function(e){i||((0,r.Ui)(t.$$.fragment,e),i=!0)},o:function(e){(0,r.et)(t.$$.fragment,e),i=!1},d:function(e){(0,r.vp)(t,e)}}}function we(e,t){var i,n,o,s=t[20]<t[9]&&Re(t);return{key:e,first:null,c:function(){i=(0,r.cS)(),s&&s.c(),n=(0,r.cS)(),this.first=i},m:function(e,t){(0,r.$T)(e,i,t),s&&s.m(e,t),(0,r.$T)(e,n,t),o=!0},p:function(e,i){(t=e)[20]<t[9]?s?(s.p(t,i),544&i&&(0,r.Ui)(s,1)):((s=Re(t)).c(),(0,r.Ui)(s,1),s.m(n.parentNode,n)):s&&((0,r.dv)(),(0,r.et)(s,1,1,(function(){s=null})),(0,r.gb)())},i:function(e){o||((0,r.Ui)(s),o=!0)},o:function(e){(0,r.et)(s),o=!1},d:function(e){e&&(0,r.og)(i),s&&s.d(e),e&&(0,r.og)(n)}}}function Oe(e){var t,i,n,o,s=e[12](e[5].length-e[9])+"";return{c:function(){t=(0,r.bG)("div"),i=(0,r.fL)(s),(0,r.Lj)(t,"class","vc-log-tree-loadmore")},m:function(s,a){(0,r.$T)(s,t,a),(0,r.R3)(t,i),n||(o=(0,r.oL)(t,"click",e[16]),n=!0)},p:function(e,t){544&t&&s!==(s=e[12](e[5].length-e[9])+"")&&(0,r.rT)(i,s)},d:function(e){e&&(0,r.og)(t),n=!1,o()}}}function ke(e,t){var i,n,o;return n=new Ue({props:{origData:t[14](t[18]),dataKey:String(t[18]),keyType:"symbol"}}),{key:e,first:null,c:function(){i=(0,r.cS)(),(0,r.YC)(n.$$.fragment),this.first=i},m:function(e,t){(0,r.$T)(e,i,t),(0,r.ye)(n,e,t),o=!0},p:function(e,i){t=e;var r={};128&i&&(r.origData=t[14](t[18])),128&i&&(r.dataKey=String(t[18])),n.$set(r)},i:function(e){o||((0,r.Ui)(n.$$.fragment,e),o=!0)},o:function(e){(0,r.et)(n.$$.fragment,e),o=!1},d:function(e){e&&(0,r.og)(i),(0,r.vp)(n,e)}}}function Ne(e){var t,i;return t=new Ue({props:{origData:e[14](e[18]),dataKey:e[18],keyType:"private"}}),{c:function(){(0,r.YC)(t.$$.fragment)},m:function(e,n){(0,r.ye)(t,e,n),i=!0},p:function(e,i){var n={};64&i&&(n.origData=e[14](e[18])),64&i&&(n.dataKey=e[18]),t.$set(n)},i:function(e){i||((0,r.Ui)(t.$$.fragment,e),i=!0)},o:function(e){(0,r.et)(t.$$.fragment,e),i=!1},d:function(e){(0,r.vp)(t,e)}}}function Le(e,t){var i,n,o,s=t[20]<t[10]&&Ne(t);return{key:e,first:null,c:function(){i=(0,r.cS)(),s&&s.c(),n=(0,r.cS)(),this.first=i},m:function(e,t){(0,r.$T)(e,i,t),s&&s.m(e,t),(0,r.$T)(e,n,t),o=!0},p:function(e,i){(t=e)[20]<t[10]?s?(s.p(t,i),1088&i&&(0,r.Ui)(s,1)):((s=Ne(t)).c(),(0,r.Ui)(s,1),s.m(n.parentNode,n)):s&&((0,r.dv)(),(0,r.et)(s,1,1,(function(){s=null})),(0,r.gb)())},i:function(e){o||((0,r.Ui)(s),o=!0)},o:function(e){(0,r.et)(s),o=!1},d:function(e){e&&(0,r.og)(i),s&&s.d(e),e&&(0,r.og)(n)}}}function Pe(e){var t,i,n,o,s=e[12](e[6].length-e[10])+"";return{c:function(){t=(0,r.bG)("div"),i=(0,r.fL)(s),(0,r.Lj)(t,"class","vc-log-tree-loadmore")},m:function(s,a){(0,r.$T)(s,t,a),(0,r.R3)(t,i),n||(o=(0,r.oL)(t,"click",e[17]),n=!0)},p:function(e,t){1088&t&&s!==(s=e[12](e[6].length-e[10])+"")&&(0,r.rT)(i,s)},d:function(e){e&&(0,r.og)(t),n=!1,o()}}}function De(e){var t,i;return t=new Ue({props:{origData:e[14]("__proto__"),dataKey:"__proto__",keyType:"private"}}),{c:function(){(0,r.YC)(t.$$.fragment)},m:function(e,n){(0,r.ye)(t,e,n),i=!0},p:r.ZT,i:function(e){i||((0,r.Ui)(t.$$.fragment,e),i=!0)},o:function(e){(0,r.et)(t.$$.fragment,e),i=!1},d:function(e){(0,r.vp)(t,e)}}}function Me(e){var t,i,n,o,s,a,c;n=new ge({props:{origData:e[0],dataKey:e[1],keyType:e[2]}});var l=e[4]&&e[3]&&Ie(e);return{c:function(){t=(0,r.bG)("div"),i=(0,r.bG)("div"),(0,r.YC)(n.$$.fragment),o=(0,r.Dh)(),l&&l.c(),(0,r.Lj)(i,"class","vc-log-tree-node"),(0,r.Lj)(t,"class","vc-log-tree"),(0,r.VH)(t,"vc-toggle",e[3]),(0,r.VH)(t,"vc-is-tree",e[4])},m:function(u,d){(0,r.$T)(u,t,d),(0,r.R3)(t,i),(0,r.ye)(n,i,null),(0,r.R3)(t,o),l&&l.m(t,null),s=!0,a||(c=(0,r.oL)(i,"click",e[13]),a=!0)},p:function(e,i){var o=i[0],s={};1&o&&(s.origData=e[0]),2&o&&(s.dataKey=e[1]),4&o&&(s.keyType=e[2]),n.$set(s),e[4]&&e[3]?l?(l.p(e,o),24&o&&(0,r.Ui)(l,1)):((l=Ie(e)).c(),(0,r.Ui)(l,1),l.m(t,null)):l&&((0,r.dv)(),(0,r.et)(l,1,1,(function(){l=null})),(0,r.gb)()),8&o&&(0,r.VH)(t,"vc-toggle",e[3]),16&o&&(0,r.VH)(t,"vc-is-tree",e[4])},i:function(e){s||((0,r.Ui)(n.$$.fragment,e),(0,r.Ui)(l),s=!0)},o:function(e){(0,r.et)(n.$$.fragment,e),(0,r.et)(l),s=!1},d:function(e){e&&(0,r.og)(t),(0,r.vp)(n),l&&l.d(),a=!1,c()}}}function xe(e,i,n){var r,s,a,c=i.origData,l=i.dataKey,u=void 0===l?void 0:l,d=i.keyType,h=void 0===d?"":d,p=!1,f=!1,g=!1,m=!1,_=50,v=50;(0,o.H3)((function(){Ae.use()})),(0,o.ev)((function(){Ae.unuse()}));var E=function(e){"enum"===e?n(9,_+=50):"nonEnum"===e&&n(10,v+=50)};return e.$$set=function(e){"origData"in e&&n(0,c=e.origData),"dataKey"in e&&n(1,u=e.dataKey),"keyType"in e&&n(2,h=e.keyType)},e.$$.update=function(){33017&e.$$.dirty&&(p||(n(4,g=!(c instanceof $.Tg)&&(t.kJ(c)||t.Kn(c))),n(15,p=!0)),g&&f&&(n(5,r=r||t.qr(t.MH(c))),n(6,s=s||t.qr(t.QK(c))),n(7,a=a||t._D(c)),n(8,m=t.Kn(c)&&-1===s.indexOf("__proto__"))))},[c,u,h,f,g,r,s,a,m,_,v,E,function(e){return"(..."+e+" Key"+(e>1?"s":"")+" Left)"},function(){n(3,f=!f)},function(e){try{return c[e]}catch(e){return new $.Tg}},p,function(){return E("enum")},function(){return E("nonEnum")}]}var Be,Ue=function(e){var t,i,n,o,s;function a(t){var i;return i=e.call(this)||this,(0,r.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i),t,xe,Me,r.N8,{origData:0,dataKey:1,keyType:2}),i}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,Se(t,i),n=a,(o=[{key:"origData",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({origData:e}),(0,r.yl)()}},{key:"dataKey",get:function(){return this.$$.ctx[1]},set:function(e){this.$set({dataKey:e}),(0,r.yl)()}},{key:"keyType",get:function(){return this.$$.ctx[2]},set:function(e){this.$set({keyType:e}),(0,r.yl)()}}])&&ye(n.prototype,o),s&&ye(n,s),a}(r.f_),Fe=Ue,Ve=__webpack_require__(7147),je=0,Ge={injectType:"lazyStyleTag",insert:"head",singleton:!1},He={};He.locals=Ve.Z.locals||{},He.use=function(){return je++||(Be=a()(Ve.Z,Ge)),He},He.unuse=function(){je>0&&!--je&&(Be(),Be=null)};var Qe=He;function We(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e(e,t,i){var n=e.slice();return n[3]=t[i],n[5]=i,n}function ze(e){var t,i,n,o,s,a,c,l,u=[],d=new Map;n=new te({props:{handler:e[2]}});for(var h=e[0].repeated&&Ze(e),p=e[0].data,f=function(e){return e[5]},g=0;g<p.length;g+=1){var m=$e(e,p,g),_=f(m);d.set(_,u[g]=Je(_,m))}return{c:function(){t=(0,r.bG)("div"),i=(0,r.bG)("div"),(0,r.YC)(n.$$.fragment),o=(0,r.Dh)(),h&&h.c(),s=(0,r.Dh)(),a=(0,r.bG)("div");for(var l=0;l<u.length;l+=1)u[l].c();(0,r.Lj)(i,"class","vc-logrow-icon"),(0,r.Lj)(a,"class","vc-log-content"),(0,r.Lj)(t,"class",c="vc-log-row vc-log-"+e[0].type),(0,r.VH)(t,"vc-log-input","input"===e[0].cmdType),(0,r.VH)(t,"vc-log-output","output"===e[0].cmdType)},m:function(e,c){(0,r.$T)(e,t,c),(0,r.R3)(t,i),(0,r.ye)(n,i,null),(0,r.R3)(t,o),h&&h.m(t,null),(0,r.R3)(t,s),(0,r.R3)(t,a);for(var d=0;d<u.length;d+=1)u[d].m(a,null);l=!0},p:function(e,i){e[0].repeated?h?h.p(e,i):((h=Ze(e)).c(),h.m(t,s)):h&&(h.d(1),h=null),3&i&&(p=e[0].data,(0,r.dv)(),u=(0,r.GQ)(u,i,f,1,e,p,d,a,r.cl,Je,null,$e),(0,r.gb)()),(!l||1&i&&c!==(c="vc-log-row vc-log-"+e[0].type))&&(0,r.Lj)(t,"class",c),1&i&&(0,r.VH)(t,"vc-log-input","input"===e[0].cmdType),1&i&&(0,r.VH)(t,"vc-log-output","output"===e[0].cmdType)},i:function(e){if(!l){(0,r.Ui)(n.$$.fragment,e);for(var t=0;t<p.length;t+=1)(0,r.Ui)(u[t]);l=!0}},o:function(e){(0,r.et)(n.$$.fragment,e);for(var t=0;t<u.length;t+=1)(0,r.et)(u[t]);l=!1},d:function(e){e&&(0,r.og)(t),(0,r.vp)(n),h&&h.d();for(var i=0;i<u.length;i+=1)u[i].d()}}}function Ze(e){var t,i,n=e[0].repeated+"";return{c:function(){t=(0,r.bG)("div"),i=(0,r.fL)(n),(0,r.Lj)(t,"class","vc-log-repeat")},m:function(e,n){(0,r.$T)(e,t,n),(0,r.R3)(t,i)},p:function(e,t){1&t&&n!==(n=e[0].repeated+"")&&(0,r.rT)(i,n)},d:function(e){e&&(0,r.og)(t)}}}function Ye(e){var t,i;return t=new ge({props:{origData:e[3].origData,style:e[3].style}}),{c:function(){(0,r.YC)(t.$$.fragment)},m:function(e,n){(0,r.ye)(t,e,n),i=!0},p:function(e,i){var n={};1&i&&(n.origData=e[3].origData),1&i&&(n.style=e[3].style),t.$set(n)},i:function(e){i||((0,r.Ui)(t.$$.fragment,e),i=!0)},o:function(e){(0,r.et)(t.$$.fragment,e),i=!1},d:function(e){(0,r.vp)(t,e)}}}function Ke(e){var t,i;return t=new Fe({props:{origData:e[3].origData}}),{c:function(){(0,r.YC)(t.$$.fragment)},m:function(e,n){(0,r.ye)(t,e,n),i=!0},p:function(e,i){var n={};1&i&&(n.origData=e[3].origData),t.$set(n)},i:function(e){i||((0,r.Ui)(t.$$.fragment,e),i=!0)},o:function(e){(0,r.et)(t.$$.fragment,e),i=!1},d:function(e){(0,r.vp)(t,e)}}}function Je(e,t){var i,n,o,s,a,c,l=[Ke,Ye],u=[];function d(e,t){return 1&t&&(n=!!e[1](e[3].origData)),n?0:1}return o=d(t,-1),s=u[o]=l[o](t),{key:e,first:null,c:function(){i=(0,r.cS)(),s.c(),a=(0,r.cS)(),this.first=i},m:function(e,t){(0,r.$T)(e,i,t),u[o].m(e,t),(0,r.$T)(e,a,t),c=!0},p:function(e,i){var n=o;(o=d(t=e,i))===n?u[o].p(t,i):((0,r.dv)(),(0,r.et)(u[n],1,1,(function(){u[n]=null})),(0,r.gb)(),(s=u[o])?s.p(t,i):(s=u[o]=l[o](t)).c(),(0,r.Ui)(s,1),s.m(a.parentNode,a))},i:function(e){c||((0,r.Ui)(s),c=!0)},o:function(e){(0,r.et)(s),c=!1},d:function(e){e&&(0,r.og)(i),u[o].d(e),e&&(0,r.og)(a)}}}function Xe(e){var t,i,n=e[0]&&ze(e);return{c:function(){n&&n.c(),t=(0,r.cS)()},m:function(e,o){n&&n.m(e,o),(0,r.$T)(e,t,o),i=!0},p:function(e,i){var o=i[0];e[0]?n?(n.p(e,o),1&o&&(0,r.Ui)(n,1)):((n=ze(e)).c(),(0,r.Ui)(n,1),n.m(t.parentNode,t)):n&&((0,r.dv)(),(0,r.et)(n,1,1,(function(){n=null})),(0,r.gb)())},i:function(e){i||((0,r.Ui)(n),i=!0)},o:function(e){(0,r.et)(n),i=!1},d:function(e){n&&n.d(e),e&&(0,r.og)(t)}}}function et(e,i,n){var r=i.log;return(0,o.H3)((function(){Qe.use()})),(0,o.ev)((function(){Qe.unuse()})),e.$$set=function(e){"log"in e&&n(0,r=e.log)},[r,function(e){return!(e instanceof $.Tg)&&(t.kJ(e)||t.Kn(e))},function(){var e=[];try{for(var i=0;i<r.data.length;i++)e.push(t.hZ(r.data[i].origData,{maxDepth:10,keyMaxLen:1e4,pretty:!1}))}catch(e){}return e.join(" ")}]}var tt,it=function(e){var t,i,n,o,s;function a(t){var i;return i=e.call(this)||this,(0,r.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i),t,et,Xe,r.N8,{log:0}),i}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,qe(t,i),n=a,(o=[{key:"log",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({log:e}),(0,r.yl)()}}])&&We(n.prototype,o),s&&We(n,s),a}(r.f_),nt=__webpack_require__(3903),rt=__webpack_require__(3327),ot=0,st={injectType:"lazyStyleTag",insert:"head",singleton:!1},at={};at.locals=rt.Z.locals||{},at.use=function(){return ot++||(tt=a()(rt.Z,st)),at},at.unuse=function(){ot>0&&!--ot&&(tt(),tt=null)};var ct=at;function lt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dt(e,t,i){var n=e.slice();return n[8]=t[i],n}function ht(e){var t;return{c:function(){t=(0,r.bG)("div"),(0,r.Lj)(t,"class","vc-plugin-empty")},m:function(e,i){(0,r.$T)(e,t,i)},p:r.ZT,i:r.ZT,o:r.ZT,d:function(e){e&&(0,r.og)(t)}}}function pt(e){for(var t,i,n=[],o=new Map,s=e[4].logList,a=function(e){return e[8]._id},c=0;c<s.length;c+=1){var l=dt(e,s,c),u=a(l);o.set(u,n[c]=gt(u,l))}return{c:function(){for(var e=0;e<n.length;e+=1)n[e].c();t=(0,r.cS)()},m:function(e,o){for(var s=0;s<n.length;s+=1)n[s].m(e,o);(0,r.$T)(e,t,o),i=!0},p:function(e,i){22&i&&(s=e[4].logList,(0,r.dv)(),n=(0,r.GQ)(n,i,a,1,e,s,o,t.parentNode,r.cl,gt,t,dt),(0,r.gb)())},i:function(e){if(!i){for(var t=0;t<s.length;t+=1)(0,r.Ui)(n[t]);i=!0}},o:function(e){for(var t=0;t<n.length;t+=1)(0,r.et)(n[t]);i=!1},d:function(e){for(var i=0;i<n.length;i+=1)n[i].d(e);e&&(0,r.og)(t)}}}function ft(e){var t,i;return t=new it({props:{log:e[8]}}),{c:function(){(0,r.YC)(t.$$.fragment)},m:function(e,n){(0,r.ye)(t,e,n),i=!0},p:function(e,i){var n={};16&i&&(n.log=e[8]),t.$set(n)},i:function(e){i||((0,r.Ui)(t.$$.fragment,e),i=!0)},o:function(e){(0,r.et)(t.$$.fragment,e),i=!1},d:function(e){(0,r.vp)(t,e)}}}function gt(e,t){var i,n,o,s=("all"===t[1]||t[1]===t[8].type)&&(""===t[2]||(0,$.HX)(t[8],t[2])),a=s&&ft(t);return{key:e,first:null,c:function(){i=(0,r.cS)(),a&&a.c(),n=(0,r.cS)(),this.first=i},m:function(e,t){(0,r.$T)(e,i,t),a&&a.m(e,t),(0,r.$T)(e,n,t),o=!0},p:function(e,i){t=e,22&i&&(s=("all"===t[1]||t[1]===t[8].type)&&(""===t[2]||(0,$.HX)(t[8],t[2]))),s?a?(a.p(t,i),22&i&&(0,r.Ui)(a,1)):((a=ft(t)).c(),(0,r.Ui)(a,1),a.m(n.parentNode,n)):a&&((0,r.dv)(),(0,r.et)(a,1,1,(function(){a=null})),(0,r.gb)())},i:function(e){o||((0,r.Ui)(a),o=!0)},o:function(e){(0,r.et)(a),o=!1},d:function(e){e&&(0,r.og)(i),a&&a.d(e),e&&(0,r.og)(n)}}}function mt(e){var t,i;return(t=new nt.Z({})).$on("filterText",e[5]),{c:function(){(0,r.YC)(t.$$.fragment)},m:function(e,n){(0,r.ye)(t,e,n),i=!0},p:r.ZT,i:function(e){i||((0,r.Ui)(t.$$.fragment,e),i=!0)},o:function(e){(0,r.et)(t.$$.fragment,e),i=!1},d:function(e){(0,r.vp)(t,e)}}}function _t(e){var t,i,n,o,s,a=[pt,ht],c=[];function l(e,t){return e[4]&&e[4].logList.length>0?0:1}i=l(e),n=c[i]=a[i](e);var u=e[0]&&mt(e);return{c:function(){t=(0,r.bG)("div"),n.c(),o=(0,r.Dh)(),u&&u.c(),(0,r.Lj)(t,"class","vc-plugin-content"),(0,r.VH)(t,"vc-logs-has-cmd",e[0])},m:function(e,n){(0,r.$T)(e,t,n),c[i].m(t,null),(0,r.R3)(t,o),u&&u.m(t,null),s=!0},p:function(e,s){var d=s[0],h=i;(i=l(e))===h?c[i].p(e,d):((0,r.dv)(),(0,r.et)(c[h],1,1,(function(){c[h]=null})),(0,r.gb)(),(n=c[i])?n.p(e,d):(n=c[i]=a[i](e)).c(),(0,r.Ui)(n,1),n.m(t,o)),e[0]?u?(u.p(e,d),1&d&&(0,r.Ui)(u,1)):((u=mt(e)).c(),(0,r.Ui)(u,1),u.m(t,null)):u&&((0,r.dv)(),(0,r.et)(u,1,1,(function(){u=null})),(0,r.gb)()),1&d&&(0,r.VH)(t,"vc-logs-has-cmd",e[0])},i:function(e){s||((0,r.Ui)(n),(0,r.Ui)(u),s=!0)},o:function(e){(0,r.et)(n),(0,r.et)(u),s=!1},d:function(e){e&&(0,r.og)(t),c[i].d(),u&&u.d()}}}function vt(e,t,i){var n,s=r.ZT;e.$$.on_destroy.push((function(){return s()}));var a,c=t.pluginId,l=void 0===c?"default":c,u=t.showCmd,d=void 0!==u&&u,h=t.filterType,p=void 0===h?"all":h,f=!1,g="";return(0,o.H3)((function(){ct.use()})),(0,o.ev)((function(){ct.unuse()})),e.$$set=function(e){"pluginId"in e&&i(6,l=e.pluginId),"showCmd"in e&&i(0,d=e.showCmd),"filterType"in e&&i(1,p=e.filterType)},e.$$.update=function(){192&e.$$.dirty&&(f||(i(3,a=z.O.get(l)),s(),s=(0,r.Ld)(a,(function(e){return i(4,n=e)})),i(7,f=!0)))},[d,p,g,a,n,function(e){i(2,g=e.detail.filterText||"")},l,f]}var Et=function(e){var t,i,n,o,s;function a(t){var i;return i=e.call(this)||this,(0,r.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i),t,vt,_t,r.N8,{pluginId:6,showCmd:0,filterType:1}),i}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,ut(t,i),n=a,(o=[{key:"pluginId",get:function(){return this.$$.ctx[6]},set:function(e){this.$set({pluginId:e}),(0,r.yl)()}},{key:"showCmd",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({showCmd:e}),(0,r.yl)()}},{key:"filterType",get:function(){return this.$$.ctx[1]},set:function(e){this.$set({filterType:e}),(0,r.yl)()}}])&&lt(n.prototype,o),s&&lt(n,s),a}(r.f_),At=__webpack_require__(5629),yt=function(){function e(e){this.model=void 0,this.pluginId=void 0,this.pluginId=e}return e.prototype.destroy=function(){this.model=void 0},e}();function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ct=function(e){var t,i;function n(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).model=At.W.getSingleton(At.W,"VConsoleLogModel"),t}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,St(t,i);var r=n.prototype;return r.log=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.addLog.apply(this,["log"].concat(t))},r.info=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.addLog.apply(this,["info"].concat(t))},r.debug=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.addLog.apply(this,["debug"].concat(t))},r.warn=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.addLog.apply(this,["warn"].concat(t))},r.error=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.addLog.apply(this,["error"].concat(t))},r.clear=function(){this.model&&this.model.clearPluginLog(this.pluginId)},r.addLog=function(e){if(this.model){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];i.unshift("["+this.pluginId+"]"),this.model.addLog({type:e,origData:i},{noOrig:!0})}},n}(yt);function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tt=function(e){var t,i;function n(t,i){var n;return(n=e.call(this,t,i,Et,{pluginId:t,filterType:"all"})||this).model=At.W.getSingleton(At.W,"VConsoleLogModel"),n.isReady=!1,n.isShow=!1,n.isInBottom=!0,n.model.bindPlugin(t),n.exporter=new Ct(t),n}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,bt(t,i);var r=n.prototype;return r.onReady=function(){e.prototype.onReady.call(this),this.model.maxLogNumber=Number(this.vConsole.option.maxLogNumber)||1e3},r.onRemove=function(){e.prototype.onRemove.call(this),this.model.unbindPlugin(this.id)},r.onAddTopBar=function(e){for(var t=this,i=["All","Log","Info","Warn","Error"],n=[],r=0;r<i.length;r++)n.push({name:i[r],data:{type:i[r].toLowerCase()},actived:0===r,className:"",onClick:function(e,i){if(i.type===t.compInstance.filterType)return!1;t.compInstance.filterType=i.type}});n[0].className="vc-actived",e(n)},r.onAddTool=function(e){var t=this;e([{name:"Clear",global:!1,onClick:function(e){t.model.clearPluginLog(t.id),t.vConsole.triggerEvent("clearLog")}}])},r.onUpdateOption=function(){this.vConsole.option.maxLogNumber!==this.model.maxLogNumber&&(this.model.maxLogNumber=Number(this.vConsole.option.maxLogNumber)||1e3)},n}(q);function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Rt=function(e){var i,n;function r(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).onErrorHandler=void 0,t.resourceErrorHandler=void 0,t.rejectionHandler=void 0,t}n=e,(i=r).prototype=Object.create(n.prototype),i.prototype.constructor=i,It(i,n);var o=r.prototype;return o.onReady=function(){e.prototype.onReady.call(this),this.bindErrors(),this.compInstance.showCmd=!0},o.onRemove=function(){e.prototype.onRemove.call(this),this.unbindErrors()},o.bindErrors=function(){t.FJ(window)&&t.mf(window.addEventListener)&&(this.catchWindowOnError(),this.catchResourceError(),this.catchUnhandledRejection())},o.unbindErrors=function(){t.FJ(window)&&t.mf(window.addEventListener)&&(window.removeEventListener("error",this.onErrorHandler),window.removeEventListener("error",this.resourceErrorHandler),window.removeEventListener("unhandledrejection",this.rejectionHandler))},o.catchWindowOnError=function(){var e=this;this.onErrorHandler=this.onErrorHandler?this.onErrorHandler:function(t){var i=t.message;t.filename&&(i+="\n"+t.filename.replace(location.origin,"")),(t.lineno||t.colno)&&(i+=":"+t.lineno+":"+t.colno);var n=!!t.error&&!!t.error.stack&&t.error.stack.toString()||"";e.model.addLog({type:"error",origData:[i,n]},{noOrig:!0})},window.removeEventListener("error",this.onErrorHandler),window.addEventListener("error",this.onErrorHandler)},o.catchResourceError=function(){var e=this;this.resourceErrorHandler=this.resourceErrorHandler?this.resourceErrorHandler:function(t){var i=t.target;if(["link","video","script","img","audio"].indexOf(i.localName)>-1){var n=i.href||i.src||i.currentSrc;e.model.addLog({type:"error",origData:["GET <"+i.localName+"> error: "+n]},{noOrig:!0})}},window.removeEventListener("error",this.resourceErrorHandler),window.addEventListener("error",this.resourceErrorHandler,!0)},o.catchUnhandledRejection=function(){var e=this;this.rejectionHandler=this.rejectionHandler?this.rejectionHandler:function(t){var i=t&&t.reason,n="Uncaught (in promise) ",r=[n,i];i instanceof Error&&(r=[n,{name:i.name,message:i.message,stack:i.stack}]),e.model.addLog({type:"error",origData:r},{noOrig:!0})},window.removeEventListener("unhandledrejection",this.rejectionHandler),window.addEventListener("unhandledrejection",this.rejectionHandler)},r}(Tt);function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ot=function(e){var t,i;function n(){return e.apply(this,arguments)||this}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,wt(t,i);var r=n.prototype;return r.onReady=function(){e.prototype.onReady.call(this),this.printSystemInfo()},r.printSystemInfo=function(){var e=navigator.userAgent,t=[],i=e.match(/MicroMessenger\/([\d\.]+)/i),n=i&&i[1]?i[1]:null;"servicewechat.com"===location.host||console.info("[system]","Location:",location.href);var r=e.match(/(ipod).*\s([\d_]+)/i),o=e.match(/(ipad).*\s([\d_]+)/i),s=e.match(/(iphone)\sos\s([\d_]+)/i),a=e.match(/(android)\s([\d\.]+)/i),c=e.match(/(Mac OS X)\s([\d_]+)/i);t=[],a?t.push("Android "+a[2]):s?t.push("iPhone, iOS "+s[2].replace(/_/g,".")):o?t.push("iPad, iOS "+o[2].replace(/_/g,".")):r?t.push("iPod, iOS "+r[2].replace(/_/g,".")):c&&t.push("Mac, MacOS "+c[2].replace(/_/g,".")),n&&t.push("WeChat "+n),console.info("[system]","Client:",t.length?t.join(", "):"Unknown");var l=e.toLowerCase().match(/ nettype\/([^ ]+)/g);l&&l[0]&&(t=[(l=l[0].split("/"))[1]],console.info("[system]","Network:",t.length?t.join(", "):"Unknown")),console.info("[system]","UA:",e),setTimeout((function(){var e=window.performance||window.msPerformance||window.webkitPerformance;if(e&&e.timing){var t=e.timing;t.navigationStart&&console.info("[system]","navigationStart:",t.navigationStart),t.navigationStart&&t.domainLookupStart&&console.info("[system]","navigation:",t.domainLookupStart-t.navigationStart+"ms"),t.domainLookupEnd&&t.domainLookupStart&&console.info("[system]","dns:",t.domainLookupEnd-t.domainLookupStart+"ms"),t.connectEnd&&t.connectStart&&(t.connectEnd&&t.secureConnectionStart?console.info("[system]","tcp (ssl):",t.connectEnd-t.connectStart+"ms ("+(t.connectEnd-t.secureConnectionStart)+"ms)"):console.info("[system]","tcp:",t.connectEnd-t.connectStart+"ms")),t.responseStart&&t.requestStart&&console.info("[system]","request:",t.responseStart-t.requestStart+"ms"),t.responseEnd&&t.responseStart&&console.info("[system]","response:",t.responseEnd-t.responseStart+"ms"),t.domComplete&&t.domLoading&&(t.domContentLoadedEventStart&&t.domLoading?console.info("[system]","domComplete (domLoaded):",t.domComplete-t.domLoading+"ms ("+(t.domContentLoadedEventStart-t.domLoading)+"ms)"):console.info("[system]","domComplete:",t.domComplete-t.domLoading+"ms")),t.loadEventEnd&&t.loadEventStart&&console.info("[system]","loadEvent:",t.loadEventEnd-t.loadEventStart+"ms"),t.navigationStart&&t.loadEventEnd&&console.info("[system]","total (DOM):",t.loadEventEnd-t.navigationStart+"ms ("+(t.domComplete-t.navigationStart)+"ms)")}}),0)},n}(Tt),kt=__webpack_require__(4683),Nt=__webpack_require__(643);function Lt(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Pt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mt=function(){this.id="",this.name="",this.method="",this.url="",this.status=0,this.statusText="",this.readyState=0,this.header=null,this.responseType="",this.requestType=void 0,this.requestHeader=null,this.response=void 0,this.startTime=0,this.endTime=0,this.costTime=0,this.getData=null,this.postData=null,this.actived=!1,this.id=t.QI()},xt=function(e){var t,i;function n(t){var i;return(i=e.call(this)||this)._response=void 0,new Proxy(t,n.Handler)||function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i)}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,Dt(t,i),n}(Mt);xt.Handler={get:function(e,t){switch(t){case"response":return e._response;default:return Reflect.get(e,t)}},set:function(e,t,i){var n;switch(t){case"response":return e._response=Bt.genResonseByResponseType(e.responseType,i),!0;case"url":var r=(null==(n=i=String(i))?void 0:n.replace(new RegExp("[/]*$"),"").split("/").pop())||"Unknown";Reflect.set(e,"name",r);var o=Bt.genGetDataByUrl(i,e.getData);Reflect.set(e,"getData",o);break;case"status":var s=String(i)||"Unknown";Reflect.set(e,"statusText",s);break;case"startTime":if(i&&e.endTime){var a=e.endTime-i;Reflect.set(e,"costTime",a)}break;case"endTime":if(i&&e.startTime){var c=i-e.startTime;Reflect.set(e,"costTime",c)}}return Reflect.set(e,t,i)}};var Bt={genGetDataByUrl:function(e,i){void 0===i&&(i={}),t.Kn(i)||(i={});var n=e?e.split("?"):[];if(n.shift(),n.length>0)for(var r,o=Lt(n=n.join("?").split("&"));!(r=o()).done;){var s=r.value.split("=");try{i[s[0]]=decodeURIComponent(s[1])}catch(e){i[s[0]]=s[1]}}return i},genResonseByResponseType:function(e,i){var n;switch(e){case"":case"text":case"json":if(t.HD(i))try{n=JSON.parse(i),n=t.hZ(n,{maxDepth:10,keyMaxLen:5e5,pretty:!0})}catch(e){n=i}else t.Kn(i)||t.kJ(i)?n=t.hZ(i,{maxDepth:10,keyMaxLen:5e5,pretty:!0}):void 0!==i&&(n=Object.prototype.toString.call(i));break;case"blob":case"document":case"arraybuffer":default:void 0!==i&&(n=Object.prototype.toString.call(i))}return n}};function Ut(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ft(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jt,Gt=(0,kt.fZ)({}),Ht=function(e){var i,n;function r(){var t;return(t=e.call(this)||this).maxNetworkNumber=1e3,t.itemCounter=0,t._xhrOpen=void 0,t._xhrSend=void 0,t._xhrSetRequestHeader=void 0,t._fetch=void 0,t._sendBeacon=void 0,t.mockXHR(),t.mockFetch(),t.mockSendBeacon(),t}n=e,(i=r).prototype=Object.create(n.prototype),i.prototype.constructor=i,Vt(i,n);var o=r.prototype;return o.unMock=function(){window.XMLHttpRequest&&(window.XMLHttpRequest.prototype.open=this._xhrOpen,window.XMLHttpRequest.prototype.send=this._xhrSend,window.XMLHttpRequest.prototype.setRequestHeader=this._xhrSetRequestHeader,this._xhrOpen=void 0,this._xhrSend=void 0,this._xhrSetRequestHeader=void 0),window.fetch&&(window.fetch=this._fetch,this._fetch=void 0),window.navigator.sendBeacon&&(window.navigator.sendBeacon=this._sendBeacon,this._sendBeacon=void 0)},o.clearLog=function(){Gt.set({})},o.updateRequest=function(e,t){var i=(0,kt.U2)(Gt),n=!!i[e];if(n){var r=i[e];for(var o in t)r[o]=t[o];t=r}Gt.update((function(i){return i[e]=t,i})),n||(E.x.updateTime(),this.limitListLength())},o.mockXHR=function(){if(window.XMLHttpRequest){var e=this,t=window.XMLHttpRequest.prototype.open,i=window.XMLHttpRequest.prototype.send,n=window.XMLHttpRequest.prototype.setRequestHeader;e._xhrOpen=t,e._xhrSend=i,e._xhrSetRequestHeader=n,window.XMLHttpRequest.prototype.open=function(){var i=this,n=[].slice.call(arguments),r=n[0],o=n[1],s=new Mt,a=null;i._requestID=s.id,i._method=r,i._url=o;var c=i._origOnreadystatechange||i.onreadystatechange||function(){},l=function(){switch(s.readyState=i.readyState,s.responseType=i.responseType,s.requestType="xhr",i.readyState){case 0:case 1:s.status=0,s.statusText="Pending",s.startTime||(s.startTime=+new Date);break;case 2:s.status=i.status,s.statusText="Loading",s.header={};for(var t=i.getAllResponseHeaders()||"",n=t.split("\n"),r=0;r<n.length;r++){var o=n[r];if(o){var l=o.split(": "),u=l[0],d=l.slice(1).join(": ");s.header[u]=d}}break;case 3:s.status=i.status,s.statusText="Loading";break;case 4:clearInterval(a),s.status=i.status,s.statusText=String(i.status),s.endTime=+new Date,s.costTime=s.endTime-(s.startTime||s.endTime),s.response=i.response;break;default:clearInterval(a),s.status=i.status,s.statusText="Unknown"}return s.response=Bt.genResonseByResponseType(s.responseType,s.response),i._noVConsole||e.updateRequest(s.id,s),c.apply(i,arguments)};i.onreadystatechange=l,i._origOnreadystatechange=c;var u=-1;return a=setInterval((function(){u!=i.readyState&&(u=i.readyState,l.call(i))}),10),t.apply(i,n)},window.XMLHttpRequest.prototype.setRequestHeader=function(){var e=this,t=[].slice.call(arguments),i=(0,kt.U2)(Gt),r=i[e._requestID];return r&&(r.requestHeader||(r.requestHeader={}),r.requestHeader[t[0]]=t[1]),n.apply(e,t)},window.XMLHttpRequest.prototype.send=function(){var t=this,n=[].slice.call(arguments),r=n[0],o=t,s=o._requestID,a=o._url,c=o._method,l=(0,kt.U2)(Gt),u=l[s]||new Mt;return u.method=c?c.toUpperCase():"GET",u.url=a||"",u.name=u.url.replace(new RegExp("[/]*$"),"").split("/").pop()||"",u.getData=Bt.genGetDataByUrl(u.url,{}),u.postData=e.getFormattedBody(r),t._noVConsole||e.updateRequest(u.id,u),i.apply(t,n)}}},o.mockFetch=function(){var e=this,i=window.fetch;if(i){var n=this;this._fetch=i,window.fetch=function(r,o){var s=new Mt;e.updateRequest(s.id,s);var a,c,l="GET",u=null;if(t.HD(r)?(l=(null==o?void 0:o.method)||"GET",a=n.getURL(r),u=(null==o?void 0:o.headers)||null):(l=r.method||"GET",a=n.getURL(r.url),u=r.headers),s.method=l,s.requestType="fetch",s.requestHeader=u,s.url=a.toString(),s.name=(a.pathname.split("/").pop()||"")+a.search,s.status=0,s.statusText="Pending",s.startTime||(s.startTime=+new Date),"[object Headers]"===Object.prototype.toString.call(u)){s.requestHeader={};for(var d,h=Ut(u);!(d=h()).done;){var p=d.value,f=p[0],g=p[1];s.requestHeader[f]=g}}else s.requestHeader=u;if(a.search&&a.searchParams){s.getData={};for(var m,_=Ut(a.searchParams);!(m=_()).done;){var v=m.value,E=v[0],A=v[1];s.getData[E]=A}}null!=o&&o.body&&(s.postData=n.getFormattedBody(o.body));var y=t.HD(r)?a.toString():r;return i(y,o).then((function(e){var t=e.clone();c=t.clone(),s.endTime=+new Date,s.costTime=s.endTime-(s.startTime||s.endTime),s.status=t.status,s.statusText=String(t.status),s.header={};for(var i,n=Ut(t.headers);!(i=n()).done;){var r=i.value,o=r[0],a=r[1];s.header[o]=a}s.readyState=4;var l=t.headers.get("content-type");return l&&l.includes("application/json")?(s.responseType="json",t.clone().text()):l&&(l.includes("text/html")||l.includes("text/plain"))?(s.responseType="text",t.clone().text()):(s.responseType="","[object Object]")})).then((function(e){return s.response=Bt.genResonseByResponseType(s.responseType,e),n.updateRequest(s.id,s),c})).catch((function(e){throw n.updateRequest(s.id,s),e}))}}},o.mockSendBeacon=function(){var e=this,t=window.navigator.sendBeacon;if(t){var i=this;this._sendBeacon=t;var n=function(e){return e instanceof Blob?e.type:e instanceof FormData?"multipart/form-data":e instanceof URLSearchParams?"application/x-www-form-urlencoded;charset=UTF-8":"text/plain;charset=UTF-8"};window.navigator.sendBeacon=function(r,o){var s=new Mt;e.updateRequest(s.id,s);var a=i.getURL(r);if(s.method="POST",s.url=r,s.name=(a.pathname.split("/").pop()||"")+a.search,s.requestType="ping",s.requestHeader={"Content-Type":n(o)},s.status=0,s.statusText="Pending",a.search&&a.searchParams){s.getData={};for(var c,l=Ut(a.searchParams);!(c=l()).done;){var u=c.value,d=u[0],h=u[1];s.getData[d]=h}}s.postData=i.getFormattedBody(o),s.startTime||(s.startTime=Date.now());var p=t.call(window.navigator,r,o);return p?(s.endTime=Date.now(),s.costTime=s.endTime-(s.startTime||s.endTime),s.status=0,s.statusText="Sent",s.readyState=4):(s.status=500,s.statusText="Unknown"),i.updateRequest(s.id,s),p}}},o.getFormattedBody=function(e){if(!e)return null;var i=null;if("string"==typeof e)try{i=JSON.parse(e)}catch(t){var n=e.split("&");if(1===n.length)i=e;else{i={};for(var r,o=Ut(n);!(r=o()).done;){var s=r.value.split("=");i[s[0]]=void 0===s[1]?"undefined":s[1]}}}else if(t.TW(e)){i={};for(var a,c=Ut(e);!(a=c()).done;){var l=a.value,u=l[0],d=l[1];i[u]="string"==typeof d?d:"[object Object]"}}else i=t.PO(e)?e:"[object "+t.zl(e)+"]";return i},o.getURL=function(e){return void 0===e&&(e=""),e.startsWith("//")&&(e=""+new URL(window.location.href).protocol+e),e.startsWith("http")?new URL(e):new URL(e,window.location.href)},o.limitListLength=function(){var e=this;if(this.itemCounter++,this.itemCounter%10==0){this.itemCounter=0;var t=(0,kt.U2)(Gt),i=Object.keys(t);i.length>this.maxNetworkNumber-10&&Gt.update((function(t){for(var n=i.splice(0,i.length-e.maxNetworkNumber+10),r=0;r<n.length;r++)t[n[r]]=void 0,delete t[n[r]];return t}))}},r}(Nt.N),Qt=__webpack_require__(8747),Wt=0,qt={injectType:"lazyStyleTag",insert:"head",singleton:!1},$t={};$t.locals=Qt.Z.locals||{},$t.use=function(){return Wt++||(jt=a()(Qt.Z,qt)),$t},$t.unuse=function(){Wt>0&&!--Wt&&(jt(),jt=null)};var zt=$t;function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yt(e,t,i){var n=e.slice();return n[7]=t[i][0],n[8]=t[i][1],n}function Kt(e,t,i){var n=e.slice();return n[11]=t[i][0],n[12]=t[i][1],n}function Jt(e,t,i){var n=e.slice();return n[11]=t[i][0],n[12]=t[i][1],n}function Xt(e,t,i){var n=e.slice();return n[11]=t[i][0],n[12]=t[i][1],n}function ei(e,t,i){var n=e.slice();return n[11]=t[i][0],n[12]=t[i][1],n}function ti(e){var t,i,n;return{c:function(){t=(0,r.fL)("("),i=(0,r.fL)(e[0]),n=(0,r.fL)(")")},m:function(e,o){(0,r.$T)(e,t,o),(0,r.$T)(e,i,o),(0,r.$T)(e,n,o)},p:function(e,t){1&t&&(0,r.rT)(i,e[0])},d:function(e){e&&(0,r.og)(t),e&&(0,r.og)(i),e&&(0,r.og)(n)}}}function ii(e){var t,i,n,o,s,a,c,l;a=new te({props:{content:e[8].requestHeader}});for(var u=Object.entries(e[8].requestHeader),d=[],h=0;h<u.length;h+=1)d[h]=ni(ei(e,u,h));return{c:function(){t=(0,r.bG)("div"),i=(0,r.bG)("dl"),n=(0,r.bG)("dt"),o=(0,r.fL)("Request Headers\n                "),s=(0,r.bG)("i"),(0,r.YC)(a.$$.fragment),c=(0,r.Dh)();for(var e=0;e<d.length;e+=1)d[e].c();(0,r.Lj)(s,"class","vc-table-row-icon"),(0,r.Lj)(n,"class","vc-table-col vc-table-col-title"),(0,r.Lj)(i,"class","vc-table-row vc-left-border")},m:function(e,u){(0,r.$T)(e,t,u),(0,r.R3)(t,i),(0,r.R3)(i,n),(0,r.R3)(n,o),(0,r.R3)(n,s),(0,r.ye)(a,s,null),(0,r.R3)(t,c);for(var h=0;h<d.length;h+=1)d[h].m(t,null);l=!0},p:function(e,i){var n={};if(2&i&&(n.content=e[8].requestHeader),a.$set(n),10&i){var r;for(u=Object.entries(e[8].requestHeader),r=0;r<u.length;r+=1){var o=ei(e,u,r);d[r]?d[r].p(o,i):(d[r]=ni(o),d[r].c(),d[r].m(t,null))}for(;r<d.length;r+=1)d[r].d(1);d.length=u.length}},i:function(e){l||((0,r.Ui)(a.$$.fragment,e),l=!0)},o:function(e){(0,r.et)(a.$$.fragment,e),l=!1},d:function(e){e&&(0,r.og)(t),(0,r.vp)(a),(0,r.RM)(d,e)}}}function ni(e){var t,i,n,o,s,a,c,l=e[11]+"",u=e[3](e[12])+"";return{c:function(){t=(0,r.bG)("div"),i=(0,r.bG)("div"),n=(0,r.fL)(l),o=(0,r.Dh)(),s=(0,r.bG)("div"),a=(0,r.fL)(u),c=(0,r.Dh)(),(0,r.Lj)(i,"class","vc-table-col vc-table-col-2"),(0,r.Lj)(s,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,r.Lj)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,l){(0,r.$T)(e,t,l),(0,r.R3)(t,i),(0,r.R3)(i,n),(0,r.R3)(t,o),(0,r.R3)(t,s),(0,r.R3)(s,a),(0,r.R3)(t,c)},p:function(e,t){2&t&&l!==(l=e[11]+"")&&(0,r.rT)(n,l),2&t&&u!==(u=e[3](e[12])+"")&&(0,r.rT)(a,u)},d:function(e){e&&(0,r.og)(t)}}}function ri(e){var t,i,n,o,s,a,c,l;a=new te({props:{content:e[8].getData}});for(var u=Object.entries(e[8].getData),d=[],h=0;h<u.length;h+=1)d[h]=oi(Xt(e,u,h));return{c:function(){t=(0,r.bG)("div"),i=(0,r.bG)("dl"),n=(0,r.bG)("dt"),o=(0,r.fL)("Query String Parameters\n                "),s=(0,r.bG)("i"),(0,r.YC)(a.$$.fragment),c=(0,r.Dh)();for(var e=0;e<d.length;e+=1)d[e].c();(0,r.Lj)(s,"class","vc-table-row-icon"),(0,r.Lj)(n,"class","vc-table-col vc-table-col-title"),(0,r.Lj)(i,"class","vc-table-row vc-left-border")},m:function(e,u){(0,r.$T)(e,t,u),(0,r.R3)(t,i),(0,r.R3)(i,n),(0,r.R3)(n,o),(0,r.R3)(n,s),(0,r.ye)(a,s,null),(0,r.R3)(t,c);for(var h=0;h<d.length;h+=1)d[h].m(t,null);l=!0},p:function(e,i){var n={};if(2&i&&(n.content=e[8].getData),a.$set(n),10&i){var r;for(u=Object.entries(e[8].getData),r=0;r<u.length;r+=1){var o=Xt(e,u,r);d[r]?d[r].p(o,i):(d[r]=oi(o),d[r].c(),d[r].m(t,null))}for(;r<d.length;r+=1)d[r].d(1);d.length=u.length}},i:function(e){l||((0,r.Ui)(a.$$.fragment,e),l=!0)},o:function(e){(0,r.et)(a.$$.fragment,e),l=!1},d:function(e){e&&(0,r.og)(t),(0,r.vp)(a),(0,r.RM)(d,e)}}}function oi(e){var t,i,n,o,s,a,c,l=e[11]+"",u=e[3](e[12])+"";return{c:function(){t=(0,r.bG)("div"),i=(0,r.bG)("div"),n=(0,r.fL)(l),o=(0,r.Dh)(),s=(0,r.bG)("div"),a=(0,r.fL)(u),c=(0,r.Dh)(),(0,r.Lj)(i,"class","vc-table-col vc-table-col-2"),(0,r.Lj)(s,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,r.Lj)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,l){(0,r.$T)(e,t,l),(0,r.R3)(t,i),(0,r.R3)(i,n),(0,r.R3)(t,o),(0,r.R3)(t,s),(0,r.R3)(s,a),(0,r.R3)(t,c)},p:function(e,t){2&t&&l!==(l=e[11]+"")&&(0,r.rT)(n,l),2&t&&u!==(u=e[3](e[12])+"")&&(0,r.rT)(a,u)},d:function(e){e&&(0,r.og)(t)}}}function si(e){var t,i,n,o,s,a,c,l;function u(e,t){return"string"==typeof e[8].postData?ci:ai}a=new te({props:{content:e[8].postData}});var d=u(e),h=d(e);return{c:function(){t=(0,r.bG)("div"),i=(0,r.bG)("dl"),n=(0,r.bG)("dt"),o=(0,r.fL)("Request Payload\n                "),s=(0,r.bG)("i"),(0,r.YC)(a.$$.fragment),c=(0,r.Dh)(),h.c(),(0,r.Lj)(s,"class","vc-table-row-icon"),(0,r.Lj)(n,"class","vc-table-col vc-table-col-title"),(0,r.Lj)(i,"class","vc-table-row vc-left-border")},m:function(e,u){(0,r.$T)(e,t,u),(0,r.R3)(t,i),(0,r.R3)(i,n),(0,r.R3)(n,o),(0,r.R3)(n,s),(0,r.ye)(a,s,null),(0,r.R3)(t,c),h.m(t,null),l=!0},p:function(e,i){var n={};2&i&&(n.content=e[8].postData),a.$set(n),d===(d=u(e))&&h?h.p(e,i):(h.d(1),(h=d(e))&&(h.c(),h.m(t,null)))},i:function(e){l||((0,r.Ui)(a.$$.fragment,e),l=!0)},o:function(e){(0,r.et)(a.$$.fragment,e),l=!1},d:function(e){e&&(0,r.og)(t),(0,r.vp)(a),h.d()}}}function ai(e){for(var t,i=Object.entries(e[8].postData),n=[],o=0;o<i.length;o+=1)n[o]=li(Jt(e,i,o));return{c:function(){for(var e=0;e<n.length;e+=1)n[e].c();t=(0,r.cS)()},m:function(e,i){for(var o=0;o<n.length;o+=1)n[o].m(e,i);(0,r.$T)(e,t,i)},p:function(e,r){if(10&r){var o;for(i=Object.entries(e[8].postData),o=0;o<i.length;o+=1){var s=Jt(e,i,o);n[o]?n[o].p(s,r):(n[o]=li(s),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=i.length}},d:function(e){(0,r.RM)(n,e),e&&(0,r.og)(t)}}}function ci(e){var t,i,n,o=e[8].postData+"";return{c:function(){t=(0,r.bG)("div"),i=(0,r.bG)("pre"),n=(0,r.fL)(o),(0,r.Lj)(i,"class","vc-table-col vc-table-col-value vc-max-height-line"),(0,r.Lj)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,o){(0,r.$T)(e,t,o),(0,r.R3)(t,i),(0,r.R3)(i,n)},p:function(e,t){2&t&&o!==(o=e[8].postData+"")&&(0,r.rT)(n,o)},d:function(e){e&&(0,r.og)(t)}}}function li(e){var t,i,n,o,s,a,c,l=e[11]+"",u=e[3](e[12])+"";return{c:function(){t=(0,r.bG)("div"),i=(0,r.bG)("div"),n=(0,r.fL)(l),o=(0,r.Dh)(),s=(0,r.bG)("div"),a=(0,r.fL)(u),c=(0,r.Dh)(),(0,r.Lj)(i,"class","vc-table-col vc-table-col-2"),(0,r.Lj)(s,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,r.Lj)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,l){(0,r.$T)(e,t,l),(0,r.R3)(t,i),(0,r.R3)(i,n),(0,r.R3)(t,o),(0,r.R3)(t,s),(0,r.R3)(s,a),(0,r.R3)(t,c)},p:function(e,t){2&t&&l!==(l=e[11]+"")&&(0,r.rT)(n,l),2&t&&u!==(u=e[3](e[12])+"")&&(0,r.rT)(a,u)},d:function(e){e&&(0,r.og)(t)}}}function ui(e){var t,i,n,o,s,a,c,l;a=new te({props:{content:e[8].header}});for(var u=Object.entries(e[8].header),d=[],h=0;h<u.length;h+=1)d[h]=di(Kt(e,u,h));return{c:function(){t=(0,r.bG)("div"),i=(0,r.bG)("dl"),n=(0,r.bG)("dt"),o=(0,r.fL)("Response Headers\n                "),s=(0,r.bG)("i"),(0,r.YC)(a.$$.fragment),c=(0,r.Dh)();for(var e=0;e<d.length;e+=1)d[e].c();(0,r.Lj)(s,"class","vc-table-row-icon"),(0,r.Lj)(n,"class","vc-table-col vc-table-col-title"),(0,r.Lj)(i,"class","vc-table-row vc-left-border")},m:function(e,u){(0,r.$T)(e,t,u),(0,r.R3)(t,i),(0,r.R3)(i,n),(0,r.R3)(n,o),(0,r.R3)(n,s),(0,r.ye)(a,s,null),(0,r.R3)(t,c);for(var h=0;h<d.length;h+=1)d[h].m(t,null);l=!0},p:function(e,i){var n={};if(2&i&&(n.content=e[8].header),a.$set(n),10&i){var r;for(u=Object.entries(e[8].header),r=0;r<u.length;r+=1){var o=Kt(e,u,r);d[r]?d[r].p(o,i):(d[r]=di(o),d[r].c(),d[r].m(t,null))}for(;r<d.length;r+=1)d[r].d(1);d.length=u.length}},i:function(e){l||((0,r.Ui)(a.$$.fragment,e),l=!0)},o:function(e){(0,r.et)(a.$$.fragment,e),l=!1},d:function(e){e&&(0,r.og)(t),(0,r.vp)(a),(0,r.RM)(d,e)}}}function di(e){var t,i,n,o,s,a,c,l=e[11]+"",u=e[3](e[12])+"";return{c:function(){t=(0,r.bG)("div"),i=(0,r.bG)("div"),n=(0,r.fL)(l),o=(0,r.Dh)(),s=(0,r.bG)("div"),a=(0,r.fL)(u),c=(0,r.Dh)(),(0,r.Lj)(i,"class","vc-table-col vc-table-col-2"),(0,r.Lj)(s,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,r.Lj)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,l){(0,r.$T)(e,t,l),(0,r.R3)(t,i),(0,r.R3)(i,n),(0,r.R3)(t,o),(0,r.R3)(t,s),(0,r.R3)(s,a),(0,r.R3)(t,c)},p:function(e,t){2&t&&l!==(l=e[11]+"")&&(0,r.rT)(n,l),2&t&&u!==(u=e[3](e[12])+"")&&(0,r.rT)(a,u)},d:function(e){e&&(0,r.og)(t)}}}function hi(e){var t,i,n,o,s,a,c,l,u,d,h,p,f,g,m,_,v,E,A,y,S,C,b,T,I,R,w,O,k,N,L,P,D,M,x,B,U,F,V,j,G,H,Q,W,q,$,z,Z,Y,K,J,X,ee,ie,ne,re,oe=e[8].name+"",se=e[8].method+"",ae=e[8].statusText+"",ce=e[8].costTime+"",le=e[8].url+"",ue=e[8].method+"",de=e[8].requestType+"",he=(e[8].response||"")+"";function pe(){return e[4](e[8])}E=new te({props:{content:e[8].url}});var fe=null!==e[8].requestHeader&&ii(e),ge=null!==e[8].getData&&ri(e),me=null!==e[8].postData&&si(e),_e=null!==e[8].header&&ui(e);return z=new te({props:{content:e[8].response}}),{c:function(){t=(0,r.bG)("div"),i=(0,r.bG)("dl"),n=(0,r.bG)("dd"),o=(0,r.fL)(oe),s=(0,r.bG)("dd"),a=(0,r.fL)(se),c=(0,r.bG)("dd"),l=(0,r.fL)(ae),u=(0,r.bG)("dd"),d=(0,r.fL)(ce),h=(0,r.Dh)(),p=(0,r.bG)("div"),f=(0,r.bG)("div"),g=(0,r.bG)("dl"),m=(0,r.bG)("dt"),_=(0,r.fL)("General\n                "),v=(0,r.bG)("i"),(0,r.YC)(E.$$.fragment),A=(0,r.Dh)(),y=(0,r.bG)("div"),(S=(0,r.bG)("div")).textContent="URL",C=(0,r.Dh)(),b=(0,r.bG)("div"),T=(0,r.fL)(le),I=(0,r.Dh)(),R=(0,r.bG)("div"),(w=(0,r.bG)("div")).textContent="Method",O=(0,r.Dh)(),k=(0,r.bG)("div"),N=(0,r.fL)(ue),L=(0,r.Dh)(),P=(0,r.bG)("div"),(D=(0,r.bG)("div")).textContent="Request Type",M=(0,r.Dh)(),x=(0,r.bG)("div"),B=(0,r.fL)(de),U=(0,r.Dh)(),fe&&fe.c(),F=(0,r.Dh)(),ge&&ge.c(),V=(0,r.Dh)(),me&&me.c(),j=(0,r.Dh)(),_e&&_e.c(),G=(0,r.Dh)(),H=(0,r.bG)("div"),Q=(0,r.bG)("dl"),W=(0,r.bG)("dt"),q=(0,r.fL)("Response\n                "),$=(0,r.bG)("i"),(0,r.YC)(z.$$.fragment),Z=(0,r.Dh)(),Y=(0,r.bG)("div"),K=(0,r.bG)("pre"),J=(0,r.fL)(he),X=(0,r.Dh)(),(0,r.Lj)(n,"class","vc-table-col vc-table-col-4"),(0,r.Lj)(s,"class","vc-table-col"),(0,r.Lj)(c,"class","vc-table-col"),(0,r.Lj)(u,"class","vc-table-col"),(0,r.Lj)(i,"class","vc-table-row vc-group-preview"),(0,r.VH)(i,"vc-table-row-error",e[8].status>=400),(0,r.Lj)(v,"class","vc-table-row-icon"),(0,r.Lj)(m,"class","vc-table-col vc-table-col-title"),(0,r.Lj)(g,"class","vc-table-row vc-left-border"),(0,r.Lj)(S,"class","vc-table-col vc-table-col-2"),(0,r.Lj)(b,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,r.Lj)(y,"class","vc-table-row vc-left-border vc-small"),(0,r.Lj)(w,"class","vc-table-col vc-table-col-2"),(0,r.Lj)(k,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,r.Lj)(R,"class","vc-table-row vc-left-border vc-small"),(0,r.Lj)(D,"class","vc-table-col vc-table-col-2"),(0,r.Lj)(x,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,r.Lj)(P,"class","vc-table-row vc-left-border vc-small"),(0,r.Lj)($,"class","vc-table-row-icon"),(0,r.Lj)(W,"class","vc-table-col vc-table-col-title"),(0,r.Lj)(Q,"class","vc-table-row vc-left-border"),(0,r.Lj)(K,"class","vc-table-col vc-max-height vc-min-height"),(0,r.Lj)(Y,"class","vc-table-row vc-left-border vc-small"),(0,r.Lj)(p,"class","vc-group-detail"),(0,r.Lj)(t,"class","vc-group"),(0,r.Lj)(t,"id",ee=e[8].id),(0,r.VH)(t,"vc-actived",e[8].actived)},m:function(e,ee){(0,r.$T)(e,t,ee),(0,r.R3)(t,i),(0,r.R3)(i,n),(0,r.R3)(n,o),(0,r.R3)(i,s),(0,r.R3)(s,a),(0,r.R3)(i,c),(0,r.R3)(c,l),(0,r.R3)(i,u),(0,r.R3)(u,d),(0,r.R3)(t,h),(0,r.R3)(t,p),(0,r.R3)(p,f),(0,r.R3)(f,g),(0,r.R3)(g,m),(0,r.R3)(m,_),(0,r.R3)(m,v),(0,r.ye)(E,v,null),(0,r.R3)(f,A),(0,r.R3)(f,y),(0,r.R3)(y,S),(0,r.R3)(y,C),(0,r.R3)(y,b),(0,r.R3)(b,T),(0,r.R3)(f,I),(0,r.R3)(f,R),(0,r.R3)(R,w),(0,r.R3)(R,O),(0,r.R3)(R,k),(0,r.R3)(k,N),(0,r.R3)(f,L),(0,r.R3)(f,P),(0,r.R3)(P,D),(0,r.R3)(P,M),(0,r.R3)(P,x),(0,r.R3)(x,B),(0,r.R3)(p,U),fe&&fe.m(p,null),(0,r.R3)(p,F),ge&&ge.m(p,null),(0,r.R3)(p,V),me&&me.m(p,null),(0,r.R3)(p,j),_e&&_e.m(p,null),(0,r.R3)(p,G),(0,r.R3)(p,H),(0,r.R3)(H,Q),(0,r.R3)(Q,W),(0,r.R3)(W,q),(0,r.R3)(W,$),(0,r.ye)(z,$,null),(0,r.R3)(H,Z),(0,r.R3)(H,Y),(0,r.R3)(Y,K),(0,r.R3)(K,J),(0,r.R3)(t,X),ie=!0,ne||(re=(0,r.oL)(i,"click",pe),ne=!0)},p:function(n,s){e=n,(!ie||2&s)&&oe!==(oe=e[8].name+"")&&(0,r.rT)(o,oe),(!ie||2&s)&&se!==(se=e[8].method+"")&&(0,r.rT)(a,se),(!ie||2&s)&&ae!==(ae=e[8].statusText+"")&&(0,r.rT)(l,ae),(!ie||2&s)&&ce!==(ce=e[8].costTime+"")&&(0,r.rT)(d,ce),2&s&&(0,r.VH)(i,"vc-table-row-error",e[8].status>=400);var c={};2&s&&(c.content=e[8].url),E.$set(c),(!ie||2&s)&&le!==(le=e[8].url+"")&&(0,r.rT)(T,le),(!ie||2&s)&&ue!==(ue=e[8].method+"")&&(0,r.rT)(N,ue),(!ie||2&s)&&de!==(de=e[8].requestType+"")&&(0,r.rT)(B,de),null!==e[8].requestHeader?fe?(fe.p(e,s),2&s&&(0,r.Ui)(fe,1)):((fe=ii(e)).c(),(0,r.Ui)(fe,1),fe.m(p,F)):fe&&((0,r.dv)(),(0,r.et)(fe,1,1,(function(){fe=null})),(0,r.gb)()),null!==e[8].getData?ge?(ge.p(e,s),2&s&&(0,r.Ui)(ge,1)):((ge=ri(e)).c(),(0,r.Ui)(ge,1),ge.m(p,V)):ge&&((0,r.dv)(),(0,r.et)(ge,1,1,(function(){ge=null})),(0,r.gb)()),null!==e[8].postData?me?(me.p(e,s),2&s&&(0,r.Ui)(me,1)):((me=si(e)).c(),(0,r.Ui)(me,1),me.m(p,j)):me&&((0,r.dv)(),(0,r.et)(me,1,1,(function(){me=null})),(0,r.gb)()),null!==e[8].header?_e?(_e.p(e,s),2&s&&(0,r.Ui)(_e,1)):((_e=ui(e)).c(),(0,r.Ui)(_e,1),_e.m(p,G)):_e&&((0,r.dv)(),(0,r.et)(_e,1,1,(function(){_e=null})),(0,r.gb)());var u={};2&s&&(u.content=e[8].response),z.$set(u),(!ie||2&s)&&he!==(he=(e[8].response||"")+"")&&(0,r.rT)(J,he),(!ie||2&s&&ee!==(ee=e[8].id))&&(0,r.Lj)(t,"id",ee),2&s&&(0,r.VH)(t,"vc-actived",e[8].actived)},i:function(e){ie||((0,r.Ui)(E.$$.fragment,e),(0,r.Ui)(fe),(0,r.Ui)(ge),(0,r.Ui)(me),(0,r.Ui)(_e),(0,r.Ui)(z.$$.fragment,e),ie=!0)},o:function(e){(0,r.et)(E.$$.fragment,e),(0,r.et)(fe),(0,r.et)(ge),(0,r.et)(me),(0,r.et)(_e),(0,r.et)(z.$$.fragment,e),ie=!1},d:function(e){e&&(0,r.og)(t),(0,r.vp)(E),fe&&fe.d(),ge&&ge.d(),me&&me.d(),_e&&_e.d(),(0,r.vp)(z),ne=!1,re()}}}function pi(e){for(var t,i,n,o,s,a,c,l,u,d,h=e[0]>0&&ti(e),p=Object.entries(e[1]),f=[],g=0;g<p.length;g+=1)f[g]=hi(Yt(e,p,g));var m=function(e){return(0,r.et)(f[e],1,1,(function(){f[e]=null}))};return{c:function(){t=(0,r.bG)("div"),i=(0,r.bG)("dl"),n=(0,r.bG)("dd"),o=(0,r.fL)("Name "),h&&h.c(),(s=(0,r.bG)("dd")).textContent="Method",(a=(0,r.bG)("dd")).textContent="Status",(c=(0,r.bG)("dd")).textContent="Time",l=(0,r.Dh)(),u=(0,r.bG)("div");for(var e=0;e<f.length;e+=1)f[e].c();(0,r.Lj)(n,"class","vc-table-col vc-table-col-4"),(0,r.Lj)(s,"class","vc-table-col"),(0,r.Lj)(a,"class","vc-table-col"),(0,r.Lj)(c,"class","vc-table-col"),(0,r.Lj)(i,"class","vc-table-row"),(0,r.Lj)(u,"class","vc-plugin-content"),(0,r.Lj)(t,"class","vc-table")},m:function(e,p){(0,r.$T)(e,t,p),(0,r.R3)(t,i),(0,r.R3)(i,n),(0,r.R3)(n,o),h&&h.m(n,null),(0,r.R3)(i,s),(0,r.R3)(i,a),(0,r.R3)(i,c),(0,r.R3)(t,l),(0,r.R3)(t,u);for(var g=0;g<f.length;g+=1)f[g].m(u,null);d=!0},p:function(e,t){var i=t[0];if(e[0]>0?h?h.p(e,i):((h=ti(e)).c(),h.m(n,null)):h&&(h.d(1),h=null),14&i){var o;for(p=Object.entries(e[1]),o=0;o<p.length;o+=1){var s=Yt(e,p,o);f[o]?(f[o].p(s,i),(0,r.Ui)(f[o],1)):(f[o]=hi(s),f[o].c(),(0,r.Ui)(f[o],1),f[o].m(u,null))}for((0,r.dv)(),o=p.length;o<f.length;o+=1)m(o);(0,r.gb)()}},i:function(e){if(!d){for(var t=0;t<p.length;t+=1)(0,r.Ui)(f[t]);d=!0}},o:function(e){f=f.filter(Boolean);for(var t=0;t<f.length;t+=1)(0,r.et)(f[t]);d=!1},d:function(e){e&&(0,r.og)(t),h&&h.d(),(0,r.RM)(f,e)}}}function fi(e,i,n){var s;(0,r.FI)(e,Gt,(function(e){return n(1,s=e)}));var a=0,c=function(e){n(0,a=Object.keys(e).length)},l=Gt.subscribe(c);c(s);var u=function(e){(0,r.fx)(Gt,s[e].actived=!s[e].actived,s)};return(0,o.H3)((function(){zt.use()})),(0,o.ev)((function(){l(),zt.unuse()})),[a,s,u,function(e){return t.Kn(e)||t.kJ(e)?t.hZ(e,{maxDepth:10,keyMaxLen:1e4,pretty:!0}):e},function(e){return u(e.id)}]}var gi=function(e){var t,i;function n(t){var i;return i=e.call(this)||this,(0,r.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i),t,fi,pi,r.N8,{}),i}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,Zt(t,i),n}(r.f_);function mi(e,t){return(mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _i=function(e){var t,i;function n(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).model=Ht.getSingleton(Ht,"VConsoleNetworkModel"),t}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,mi(t,i);var r=n.prototype;return r.add=function(e){var t=new xt(new Mt);for(var i in e)t[i]=e[i];return t.startTime=t.startTime||Date.now(),t.requestType=t.requestType||"custom",this.model.updateRequest(t.id,t),t},r.update=function(e,t){this.model.updateRequest(e,t)},r.clear=function(){this.model.clearLog()},n}(yt);function vi(e,t){return(vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ei,Ai=function(e){var t,i;function n(t,i,n){var r;return void 0===n&&(n={}),(r=e.call(this,t,i,gi,n)||this).model=Ht.getSingleton(Ht,"VConsoleNetworkModel"),r.exporter=void 0,r.exporter=new _i(t),r}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,vi(t,i);var r=n.prototype;return r.onReady=function(){e.prototype.onReady.call(this),this.onUpdateOption()},r.onAddTool=function(e){var t=this;e([{name:"Clear",global:!1,onClick:function(e){t.model.clearLog()}}])},r.onRemove=function(){e.prototype.onRemove.call(this),this.model&&this.model.unMock()},r.onUpdateOption=function(){this.vConsole.option.maxNetworkNumber!==this.model.maxNetworkNumber&&(this.model.maxNetworkNumber=Number(this.vConsole.option.maxNetworkNumber)||1e3)},n}(q),yi=__webpack_require__(8679),Si=__webpack_require__.n(yi),Ci=(0,kt.fZ)(),bi=(0,kt.fZ)(),Ti=__webpack_require__(5670),Ii=0,Ri={injectType:"lazyStyleTag",insert:"head",singleton:!1},wi={};wi.locals=Ti.Z.locals||{},wi.use=function(){return Ii++||(Ei=a()(Ti.Z,Ri)),wi},wi.unuse=function(){Ii>0&&!--Ii&&(Ei(),Ei=null)};var Oi=wi;function ki(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ni(e,t){return(Ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Li(e,t,i){var n=e.slice();return n[8]=t[i],n}function Pi(e,t,i){var n=e.slice();return n[11]=t[i],n}function Di(e){var t,i,n,o=e[0].nodeType===Node.ELEMENT_NODE&&Mi(e),s=e[0].nodeType===Node.TEXT_NODE&&qi(e);return{c:function(){t=(0,r.bG)("div"),o&&o.c(),i=(0,r.Dh)(),s&&s.c(),(0,r.Lj)(t,"class","vcelm-l"),(0,r.VH)(t,"vc-actived",e[0]._isActived),(0,r.VH)(t,"vc-toggle",e[0]._isExpand),(0,r.VH)(t,"vcelm-noc",e[0]._isSingleLine)},m:function(e,a){(0,r.$T)(e,t,a),o&&o.m(t,null),(0,r.R3)(t,i),s&&s.m(t,null),n=!0},p:function(e,n){e[0].nodeType===Node.ELEMENT_NODE?o?(o.p(e,n),1&n&&(0,r.Ui)(o,1)):((o=Mi(e)).c(),(0,r.Ui)(o,1),o.m(t,i)):o&&((0,r.dv)(),(0,r.et)(o,1,1,(function(){o=null})),(0,r.gb)()),e[0].nodeType===Node.TEXT_NODE?s?s.p(e,n):((s=qi(e)).c(),s.m(t,null)):s&&(s.d(1),s=null),1&n&&(0,r.VH)(t,"vc-actived",e[0]._isActived),1&n&&(0,r.VH)(t,"vc-toggle",e[0]._isExpand),1&n&&(0,r.VH)(t,"vcelm-noc",e[0]._isSingleLine)},i:function(e){n||((0,r.Ui)(o),n=!0)},o:function(e){(0,r.et)(o),n=!1},d:function(e){e&&(0,r.og)(t),o&&o.d(),s&&s.d()}}}function Mi(e){var t,i,n,o,s,a,c,l,u,d,h=e[0].nodeName+"",p=(e[0].className||e[0].attributes.length)&&xi(e),f=e[0]._isNullEndTag&&Vi(e),g=e[0].childNodes.length>0&&ji(e),m=!e[0]._isNullEndTag&&Wi(e);return{c:function(){t=(0,r.bG)("span"),i=(0,r.fL)("<"),n=(0,r.fL)(h),p&&p.c(),o=(0,r.cS)(),f&&f.c(),s=(0,r.fL)(">"),g&&g.c(),a=(0,r.cS)(),m&&m.c(),c=(0,r.cS)(),(0,r.Lj)(t,"class","vcelm-node")},m:function(h,_){(0,r.$T)(h,t,_),(0,r.R3)(t,i),(0,r.R3)(t,n),p&&p.m(t,null),(0,r.R3)(t,o),f&&f.m(t,null),(0,r.R3)(t,s),g&&g.m(h,_),(0,r.$T)(h,a,_),m&&m.m(h,_),(0,r.$T)(h,c,_),l=!0,u||(d=(0,r.oL)(t,"click",e[2]),u=!0)},p:function(e,i){(!l||1&i)&&h!==(h=e[0].nodeName+"")&&(0,r.rT)(n,h),e[0].className||e[0].attributes.length?p?p.p(e,i):((p=xi(e)).c(),p.m(t,o)):p&&(p.d(1),p=null),e[0]._isNullEndTag?f||((f=Vi(e)).c(),f.m(t,s)):f&&(f.d(1),f=null),e[0].childNodes.length>0?g?(g.p(e,i),1&i&&(0,r.Ui)(g,1)):((g=ji(e)).c(),(0,r.Ui)(g,1),g.m(a.parentNode,a)):g&&((0,r.dv)(),(0,r.et)(g,1,1,(function(){g=null})),(0,r.gb)()),e[0]._isNullEndTag?m&&(m.d(1),m=null):m?m.p(e,i):((m=Wi(e)).c(),m.m(c.parentNode,c))},i:function(e){l||((0,r.Ui)(g),l=!0)},o:function(e){(0,r.et)(g),l=!1},d:function(e){e&&(0,r.og)(t),p&&p.d(),f&&f.d(),g&&g.d(e),e&&(0,r.og)(a),m&&m.d(e),e&&(0,r.og)(c),u=!1,d()}}}function xi(e){for(var t,i=e[0].attributes,n=[],o=0;o<i.length;o+=1)n[o]=Fi(Pi(e,i,o));return{c:function(){t=(0,r.bG)("i");for(var e=0;e<n.length;e+=1)n[e].c();(0,r.Lj)(t,"class","vcelm-k")},m:function(e,i){(0,r.$T)(e,t,i);for(var o=0;o<n.length;o+=1)n[o].m(t,null)},p:function(e,r){if(1&r){var o;for(i=e[0].attributes,o=0;o<i.length;o+=1){var s=Pi(e,i,o);n[o]?n[o].p(s,r):(n[o]=Fi(s),n[o].c(),n[o].m(t,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=i.length}},d:function(e){e&&(0,r.og)(t),(0,r.RM)(n,e)}}}function Bi(e){var t,i=e[11].name+"";return{c:function(){t=(0,r.fL)(i)},m:function(e,i){(0,r.$T)(e,t,i)},p:function(e,n){1&n&&i!==(i=e[11].name+"")&&(0,r.rT)(t,i)},d:function(e){e&&(0,r.og)(t)}}}function Ui(e){var t,i,n,o,s,a=e[11].name+"",c=e[11].value+"";return{c:function(){t=(0,r.fL)(a),i=(0,r.fL)('="'),n=(0,r.bG)("i"),o=(0,r.fL)(c),s=(0,r.fL)('"'),(0,r.Lj)(n,"class","vcelm-v")},m:function(e,a){(0,r.$T)(e,t,a),(0,r.$T)(e,i,a),(0,r.$T)(e,n,a),(0,r.R3)(n,o),(0,r.$T)(e,s,a)},p:function(e,i){1&i&&a!==(a=e[11].name+"")&&(0,r.rT)(t,a),1&i&&c!==(c=e[11].value+"")&&(0,r.rT)(o,c)},d:function(e){e&&(0,r.og)(t),e&&(0,r.og)(i),e&&(0,r.og)(n),e&&(0,r.og)(s)}}}function Fi(e){var t,i;function n(e,t){return""!==e[11].value?Ui:Bi}var o=n(e),s=o(e);return{c:function(){t=(0,r.fL)(" \n            "),s.c(),i=(0,r.cS)()},m:function(e,n){(0,r.$T)(e,t,n),s.m(e,n),(0,r.$T)(e,i,n)},p:function(e,t){o===(o=n(e))&&s?s.p(e,t):(s.d(1),(s=o(e))&&(s.c(),s.m(i.parentNode,i)))},d:function(e){e&&(0,r.og)(t),s.d(e),e&&(0,r.og)(i)}}}function Vi(e){var t;return{c:function(){t=(0,r.fL)("/")},m:function(e,i){(0,r.$T)(e,t,i)},d:function(e){e&&(0,r.og)(t)}}}function ji(e){var t,i,n,o,s=[Hi,Gi],a=[];function c(e,t){return e[0]._isExpand?1:0}return t=c(e),i=a[t]=s[t](e),{c:function(){i.c(),n=(0,r.cS)()},m:function(e,i){a[t].m(e,i),(0,r.$T)(e,n,i),o=!0},p:function(e,o){var l=t;(t=c(e))===l?a[t].p(e,o):((0,r.dv)(),(0,r.et)(a[l],1,1,(function(){a[l]=null})),(0,r.gb)(),(i=a[t])?i.p(e,o):(i=a[t]=s[t](e)).c(),(0,r.Ui)(i,1),i.m(n.parentNode,n))},i:function(e){o||((0,r.Ui)(i),o=!0)},o:function(e){(0,r.et)(i),o=!1},d:function(e){a[t].d(e),e&&(0,r.og)(n)}}}function Gi(e){for(var t,i,n=e[0].childNodes,o=[],s=0;s<n.length;s+=1)o[s]=Qi(Li(e,n,s));var a=function(e){return(0,r.et)(o[e],1,1,(function(){o[e]=null}))};return{c:function(){for(var e=0;e<o.length;e+=1)o[e].c();t=(0,r.cS)()},m:function(e,n){for(var s=0;s<o.length;s+=1)o[s].m(e,n);(0,r.$T)(e,t,n),i=!0},p:function(e,i){if(1&i){var s;for(n=e[0].childNodes,s=0;s<n.length;s+=1){var c=Li(e,n,s);o[s]?(o[s].p(c,i),(0,r.Ui)(o[s],1)):(o[s]=Qi(c),o[s].c(),(0,r.Ui)(o[s],1),o[s].m(t.parentNode,t))}for((0,r.dv)(),s=n.length;s<o.length;s+=1)a(s);(0,r.gb)()}},i:function(e){if(!i){for(var t=0;t<n.length;t+=1)(0,r.Ui)(o[t]);i=!0}},o:function(e){o=o.filter(Boolean);for(var t=0;t<o.length;t+=1)(0,r.et)(o[t]);i=!1},d:function(e){(0,r.RM)(o,e),e&&(0,r.og)(t)}}}function Hi(e){var t;return{c:function(){t=(0,r.fL)("...")},m:function(e,i){(0,r.$T)(e,t,i)},p:r.ZT,i:r.ZT,o:r.ZT,d:function(e){e&&(0,r.og)(t)}}}function Qi(e){var t,i,n;return(t=new Zi({props:{node:e[8]}})).$on("toggleNode",e[4]),{c:function(){(0,r.YC)(t.$$.fragment),i=(0,r.Dh)()},m:function(e,o){(0,r.ye)(t,e,o),(0,r.$T)(e,i,o),n=!0},p:function(e,i){var n={};1&i&&(n.node=e[8]),t.$set(n)},i:function(e){n||((0,r.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,r.et)(t.$$.fragment,e),n=!1},d:function(e){(0,r.vp)(t,e),e&&(0,r.og)(i)}}}function Wi(e){var t,i,n,o,s=e[0].nodeName+"";return{c:function(){t=(0,r.bG)("span"),i=(0,r.fL)("</"),n=(0,r.fL)(s),o=(0,r.fL)(">"),(0,r.Lj)(t,"class","vcelm-node")},m:function(e,s){(0,r.$T)(e,t,s),(0,r.R3)(t,i),(0,r.R3)(t,n),(0,r.R3)(t,o)},p:function(e,t){1&t&&s!==(s=e[0].nodeName+"")&&(0,r.rT)(n,s)},d:function(e){e&&(0,r.og)(t)}}}function qi(e){var t,i,n=e[1](e[0].textContent)+"";return{c:function(){t=(0,r.bG)("span"),i=(0,r.fL)(n),(0,r.Lj)(t,"class","vcelm-t vcelm-noc")},m:function(e,n){(0,r.$T)(e,t,n),(0,r.R3)(t,i)},p:function(e,t){1&t&&n!==(n=e[1](e[0].textContent)+"")&&(0,r.rT)(i,n)},d:function(e){e&&(0,r.og)(t)}}}function $i(e){var t,i,n=e[0]&&Di(e);return{c:function(){n&&n.c(),t=(0,r.cS)()},m:function(e,o){n&&n.m(e,o),(0,r.$T)(e,t,o),i=!0},p:function(e,i){var o=i[0];e[0]?n?(n.p(e,o),1&o&&(0,r.Ui)(n,1)):((n=Di(e)).c(),(0,r.Ui)(n,1),n.m(t.parentNode,t)):n&&((0,r.dv)(),(0,r.et)(n,1,1,(function(){n=null})),(0,r.gb)())},i:function(e){i||((0,r.Ui)(n),i=!0)},o:function(e){(0,r.et)(n),i=!1},d:function(e){n&&n.d(e),e&&(0,r.og)(t)}}}function zi(e,t,i){var n;(0,r.FI)(e,bi,(function(e){return i(3,n=e)}));var s=t.node,a=(0,o.x)(),c=["br","hr","img","input","link","meta"];return(0,o.H3)((function(){Oi.use()})),(0,o.ev)((function(){Oi.unuse()})),e.$$set=function(e){"node"in e&&i(0,s=e.node)},e.$$.update=function(){9&e.$$.dirty&&s&&(i(0,s._isActived=s===n,s),i(0,s._isNullEndTag=function(e){return c.indexOf(e.nodeName)>-1}(s),s),i(0,s._isSingleLine=0===s.childNodes.length||s._isNullEndTag,s))},[s,function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},function(){s._isNullEndTag||(i(0,s._isExpand=!s._isExpand,s),a("toggleNode",{node:s}))},n,function(t){r.cK.call(this,e,t)}]}var Zi=function(e){var t,i,n,o,s;function a(t){var i;return i=e.call(this)||this,(0,r.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i),t,zi,$i,r.N8,{node:0}),i}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,Ni(t,i),n=a,(o=[{key:"node",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({node:e}),(0,r.yl)()}}])&&ki(n.prototype,o),s&&ki(n,s),a}(r.f_),Yi=Zi;function Ki(e,t){return(Ki=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ji(e){var t,i,n;return(i=new Yi({props:{node:e[0]}})).$on("toggleNode",e[1]),{c:function(){t=(0,r.bG)("div"),(0,r.YC)(i.$$.fragment),(0,r.Lj)(t,"class","vc-plugin-content")},m:function(e,o){(0,r.$T)(e,t,o),(0,r.ye)(i,t,null),n=!0},p:function(e,t){var n={};1&t[0]&&(n.node=e[0]),i.$set(n)},i:function(e){n||((0,r.Ui)(i.$$.fragment,e),n=!0)},o:function(e){(0,r.et)(i.$$.fragment,e),n=!1},d:function(e){e&&(0,r.og)(t),(0,r.vp)(i)}}}function Xi(e,t,i){var n;return(0,r.FI)(e,Ci,(function(e){return i(0,n=e)})),[n,function(t){r.cK.call(this,e,t)}]}var en=function(e){var t,i;function n(t){var i;return i=e.call(this)||this,(0,r.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i),t,Xi,Ji,r.N8,{}),i}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,Ki(t,i),n}(r.f_);function tn(e,t){return(tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nn=function(e){var t,i;function n(t,i,n){var r;return void 0===n&&(n={}),(r=e.call(this,t,i,en,n)||this).isInited=!1,r.observer=void 0,r.nodeMap=void 0,r}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,tn(t,i);var r=n.prototype;return r.onShow=function(){this.isInited||this._init()},r.onRemove=function(){e.prototype.onRemove.call(this),this.isInited&&(this.observer.disconnect(),this.isInited=!1,this.nodeMap=void 0,Ci.set(void 0))},r.onAddTool=function(e){var t=this;e([{name:"Expand",global:!1,onClick:function(e){t._expandActivedNode()}},{name:"Collapse",global:!1,onClick:function(e){t._collapseActivedNode()}}])},r._init=function(){var e=this;this.isInited=!0,this.nodeMap=new WeakMap;var t=this._generateVNode(document.documentElement);t._isExpand=!0,bi.set(t),Ci.set(t),this.compInstance.$on("toggleNode",(function(e){bi.set(e.detail.node)})),this.observer=new(Si())((function(t){for(var i=0;i<t.length;i++){var n=t[i];e._isInVConsole(n.target)||e._handleMutation(n)}})),this.observer.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},r._handleMutation=function(e){switch(e.type){case"childList":e.removedNodes.length>0&&this._onChildRemove(e),e.addedNodes.length>0&&this._onChildAdd(e);break;case"attributes":this._onAttributesChange(e);break;case"characterData":this._onCharacterDataChange(e)}},r._onChildRemove=function(e){var t=this.nodeMap.get(e.target);if(t){for(var i=0;i<e.removedNodes.length;i++){var n=this.nodeMap.get(e.removedNodes[i]);if(n){for(var r=0;r<t.childNodes.length;r++)if(t.childNodes[r]===n){t.childNodes.splice(r,1);break}this.nodeMap.delete(e.removedNodes[i])}}this._refreshStore()}},r._onChildAdd=function(e){var t=this.nodeMap.get(e.target);if(t){for(var i=0;i<e.addedNodes.length;i++){var n=e.addedNodes[i],r=this._generateVNode(n);if(r){var o=void 0,s=n;do{if(null===s.nextSibling)break;s.nodeType===Node.ELEMENT_NODE&&(o=this.nodeMap.get(s.nextSibling)||void 0),s=s.nextSibling}while(void 0===o);if(void 0===o)t.childNodes.push(r);else for(var a=0;a<t.childNodes.length;a++)if(t.childNodes[a]===o){t.childNodes.splice(a,0,r);break}}}this._refreshStore()}},r._onAttributesChange=function(e){this._updateVNodeAttributes(e.target),this._refreshStore()},r._onCharacterDataChange=function(e){this.nodeMap.get(e.target).textContent=e.target.textContent,this._refreshStore()},r._generateVNode=function(e){if(!this._isIgnoredNode(e)){var t={nodeType:e.nodeType,nodeName:e.nodeName.toLowerCase(),textContent:"",id:"",className:"",attributes:[],childNodes:[]};if(this.nodeMap.set(e,t),t.nodeType!=e.TEXT_NODE&&t.nodeType!=e.DOCUMENT_TYPE_NODE||(t.textContent=e.textContent),e.childNodes.length>0){t.childNodes=[];for(var i=0;i<e.childNodes.length;i++){var n=this._generateVNode(e.childNodes[i]);n&&t.childNodes.push(n)}}return this._updateVNodeAttributes(e),t}},r._updateVNodeAttributes=function(e){var t=this.nodeMap.get(e);if(e instanceof Element&&(t.id=e.id||"",t.className=e.className||"",e.hasAttributes&&e.hasAttributes())){t.attributes=[];for(var i=0;i<e.attributes.length;i++)t.attributes.push({name:e.attributes[i].name,value:e.attributes[i].value||""})}},r._expandActivedNode=function(){var e=(0,kt.U2)(bi);if(e._isExpand)for(var t=0;t<e.childNodes.length;t++)e.childNodes[t]._isExpand=!0;else e._isExpand=!0;this._refreshStore()},r._collapseActivedNode=function(){var e=(0,kt.U2)(bi);if(e._isExpand){for(var t=!1,i=0;i<e.childNodes.length;i++)e.childNodes[i]._isExpand&&(t=!0,e.childNodes[i]._isExpand=!1);t||(e._isExpand=!1),this._refreshStore()}},r._isIgnoredNode=function(e){if(e.nodeType===e.TEXT_NODE){if(""===e.textContent.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$|\n+/g,""))return!0}else if(e.nodeType===e.COMMENT_NODE)return!0;return!1},r._isInVConsole=function(e){for(var t=e;void 0!==t;){if("__vconsole"==t.id)return!0;t=t.parentElement||void 0}return!1},r._refreshStore=function(){Ci.update((function(e){return e}))},n}(q);function rn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function on(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(i),!0).forEach((function(t){sn(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function sn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cn=function(e){var t,i;function n(){return e.apply(this,arguments)||this}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,an(t,i);var r=n.prototype;return r.removeItem=function(t,i){for(var n,r,o=["","/"],s=(null==(n=location)||null==(r=n.hostname)?void 0:r.split("."))||[];s.length>1;)o.push(s.join(".")),s.shift();for(var a=0;a<o.length;a++)for(var c,l,u=(null==(c=location)||null==(l=c.pathname)?void 0:l.split("/"))||[],d="";u.length>0;){d+=("/"===d?"":"/")+u.shift();var h=on(on({},i),{},{path:d,domain:o[a]});e.prototype.removeItem.call(this,t,h)}},r.clear=function(){for(var e=Object.keys(this),t=0;t<e.length;t++)this.removeItem(e[t])},n}(__webpack_require__(6025).eR);function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var un=function(e){var t,i;function n(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).cookiesStorage=new cn,t.storages=void 0,t}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,ln(t,i),n.prototype.getAllStorages=function(){return this.storages||(this.storages=[],void 0!==document.cookie&&this.storages.push({name:"cookies",storage:this.cookiesStorage}),window.localStorage&&this.storages.push({name:"localStorage",storage:localStorage}),window.sessionStorage&&this.storages.push({name:"sessionStorage",storage:sessionStorage})),this.storages},n}(Nt.N);function dn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pn(e,t,i){var n=e.slice();return n[15]=t[i].name,n[16]=t[i].storage,n}function fn(e,t,i){var n=e.slice();return n[19]=t[i][0],n[20]=t[i][1],n[22]=i,n}function gn(e){for(var t,i,n=Object.entries(e[16]),o=[],s=0;s<n.length;s+=1)o[s]=yn(fn(e,n,s));var a=function(e){return(0,r.et)(o[e],1,1,(function(){o[e]=null}))},c=null;return n.length||(c=mn(e)),{c:function(){for(var e=0;e<o.length;e+=1)o[e].c();t=(0,r.cS)(),c&&c.c()},m:function(e,n){for(var s=0;s<o.length;s+=1)o[s].m(e,n);(0,r.$T)(e,t,n),c&&c.m(e,n),i=!0},p:function(e,i){if(509&i){var s;for(n=Object.entries(e[16]),s=0;s<n.length;s+=1){var l=fn(e,n,s);o[s]?(o[s].p(l,i),(0,r.Ui)(o[s],1)):(o[s]=yn(l),o[s].c(),(0,r.Ui)(o[s],1),o[s].m(t.parentNode,t))}for((0,r.dv)(),s=n.length;s<o.length;s+=1)a(s);(0,r.gb)(),n.length?c&&(c.d(1),c=null):c||((c=mn(e)).c(),c.m(t.parentNode,t))}},i:function(e){if(!i){for(var t=0;t<n.length;t+=1)(0,r.Ui)(o[t]);i=!0}},o:function(e){o=o.filter(Boolean);for(var t=0;t<o.length;t+=1)(0,r.et)(o[t]);i=!1},d:function(e){(0,r.RM)(o,e),e&&(0,r.og)(t),c&&c.d(e)}}}function mn(e){var t;return{c:function(){t=(0,r.bG)("div"),(0,r.Lj)(t,"class","vc-plugin-empty")},m:function(e,i){(0,r.$T)(e,t,i)},d:function(e){e&&(0,r.og)(t)}}}function _n(e){var t,i,n,o,s,a=e[19]+"",c=e[8](e[20])+"";return{c:function(){t=(0,r.bG)("div"),i=(0,r.fL)(a),n=(0,r.Dh)(),o=(0,r.bG)("div"),s=(0,r.fL)(c),(0,r.Lj)(t,"class","vc-table-col"),(0,r.Lj)(o,"class","vc-table-col vc-table-col-2")},m:function(e,a){(0,r.$T)(e,t,a),(0,r.R3)(t,i),(0,r.$T)(e,n,a),(0,r.$T)(e,o,a),(0,r.R3)(o,s)},p:function(e,t){1&t&&a!==(a=e[19]+"")&&(0,r.rT)(i,a),1&t&&c!==(c=e[8](e[20])+"")&&(0,r.rT)(s,c)},d:function(e){e&&(0,r.og)(t),e&&(0,r.og)(n),e&&(0,r.og)(o)}}}function vn(e){var t,i,n,o,s,a,c;return{c:function(){t=(0,r.bG)("div"),i=(0,r.bG)("textarea"),n=(0,r.Dh)(),o=(0,r.bG)("div"),s=(0,r.bG)("textarea"),(0,r.Lj)(i,"class","vc-table-input"),(0,r.Lj)(t,"class","vc-table-col"),(0,r.Lj)(s,"class","vc-table-input"),(0,r.Lj)(o,"class","vc-table-col vc-table-col-2")},m:function(l,u){(0,r.$T)(l,t,u),(0,r.R3)(t,i),(0,r.Bm)(i,e[3]),(0,r.$T)(l,n,u),(0,r.$T)(l,o,u),(0,r.R3)(o,s),(0,r.Bm)(s,e[4]),a||(c=[(0,r.oL)(i,"input",e[9]),(0,r.oL)(s,"input",e[10])],a=!0)},p:function(e,t){8&t&&(0,r.Bm)(i,e[3]),16&t&&(0,r.Bm)(s,e[4])},d:function(e){e&&(0,r.og)(t),e&&(0,r.og)(n),e&&(0,r.og)(o),a=!1,(0,r.j7)(c)}}}function En(e){var t,i,n,o,s,a;return(t=new Z.Z({props:{name:"delete"}})).$on("click",(function(){return e[12](e[16],e[22])})),n=new te({props:{content:[e[19],e[20]].join("=")}}),(s=new Z.Z({props:{name:"edit"}})).$on("click",(function(){return e[13](e[16],e[19],e[20],e[22])})),{c:function(){(0,r.YC)(t.$$.fragment),i=(0,r.Dh)(),(0,r.YC)(n.$$.fragment),o=(0,r.Dh)(),(0,r.YC)(s.$$.fragment)},m:function(e,c){(0,r.ye)(t,e,c),(0,r.$T)(e,i,c),(0,r.ye)(n,e,c),(0,r.$T)(e,o,c),(0,r.ye)(s,e,c),a=!0},p:function(t,i){e=t;var r={};1&i&&(r.content=[e[19],e[20]].join("=")),n.$set(r)},i:function(e){a||((0,r.Ui)(t.$$.fragment,e),(0,r.Ui)(n.$$.fragment,e),(0,r.Ui)(s.$$.fragment,e),a=!0)},o:function(e){(0,r.et)(t.$$.fragment,e),(0,r.et)(n.$$.fragment,e),(0,r.et)(s.$$.fragment,e),a=!1},d:function(e){(0,r.vp)(t,e),e&&(0,r.og)(i),(0,r.vp)(n,e),e&&(0,r.og)(o),(0,r.vp)(s,e)}}}function An(e){var t,i,n,o;return(t=new Z.Z({props:{name:"cancel"}})).$on("click",e[7]),(n=new Z.Z({props:{name:"done"}})).$on("click",(function(){return e[11](e[16],e[19],e[20],e[22])})),{c:function(){(0,r.YC)(t.$$.fragment),i=(0,r.Dh)(),(0,r.YC)(n.$$.fragment)},m:function(e,s){(0,r.ye)(t,e,s),(0,r.$T)(e,i,s),(0,r.ye)(n,e,s),o=!0},p:function(t,i){e=t},i:function(e){o||((0,r.Ui)(t.$$.fragment,e),(0,r.Ui)(n.$$.fragment,e),o=!0)},o:function(e){(0,r.et)(t.$$.fragment,e),(0,r.et)(n.$$.fragment,e),o=!1},d:function(e){(0,r.vp)(t,e),e&&(0,r.og)(i),(0,r.vp)(n,e)}}}function yn(e){var t,i,n,o,s,a,c;function l(e,t){return e[2]===e[22]?vn:_n}var u=l(e),d=u(e),h=[An,En],p=[];function f(e,t){return e[2]===e[22]?0:1}return o=f(e),s=p[o]=h[o](e),{c:function(){t=(0,r.bG)("div"),d.c(),i=(0,r.Dh)(),n=(0,r.bG)("div"),s.c(),a=(0,r.Dh)(),(0,r.Lj)(n,"class","vc-table-col vc-table-col-1 vc-table-action"),(0,r.Lj)(t,"class","vc-table-row")},m:function(e,s){(0,r.$T)(e,t,s),d.m(t,null),(0,r.R3)(t,i),(0,r.R3)(t,n),p[o].m(n,null),(0,r.R3)(t,a),c=!0},p:function(e,a){u===(u=l(e))&&d?d.p(e,a):(d.d(1),(d=u(e))&&(d.c(),d.m(t,i)));var c=o;(o=f(e))===c?p[o].p(e,a):((0,r.dv)(),(0,r.et)(p[c],1,1,(function(){p[c]=null})),(0,r.gb)(),(s=p[o])?s.p(e,a):(s=p[o]=h[o](e)).c(),(0,r.Ui)(s,1),s.m(n,null))},i:function(e){c||((0,r.Ui)(s),c=!0)},o:function(e){(0,r.et)(s),c=!1},d:function(e){e&&(0,r.og)(t),d.d(),p[o].d()}}}function Sn(e){var t,i,n=e[15]===e[1]&&gn(e);return{c:function(){n&&n.c(),t=(0,r.cS)()},m:function(e,o){n&&n.m(e,o),(0,r.$T)(e,t,o),i=!0},p:function(e,i){e[15]===e[1]?n?(n.p(e,i),3&i&&(0,r.Ui)(n,1)):((n=gn(e)).c(),(0,r.Ui)(n,1),n.m(t.parentNode,t)):n&&((0,r.dv)(),(0,r.et)(n,1,1,(function(){n=null})),(0,r.gb)())},i:function(e){i||((0,r.Ui)(n),i=!0)},o:function(e){(0,r.et)(n),i=!1},d:function(e){n&&n.d(e),e&&(0,r.og)(t)}}}function Cn(e){for(var t,i,n,o,s=e[0],a=[],c=0;c<s.length;c+=1)a[c]=Sn(pn(e,s,c));var l=function(e){return(0,r.et)(a[e],1,1,(function(){a[e]=null}))};return{c:function(){t=(0,r.bG)("div"),(i=(0,r.bG)("div")).innerHTML='<div class="vc-table-col">Key</div> \n    <div class="vc-table-col vc-table-col-2">Value</div> \n    <div class="vc-table-col vc-table-col-1 vc-table-action"></div>',n=(0,r.Dh)();for(var e=0;e<a.length;e+=1)a[e].c();(0,r.Lj)(i,"class","vc-table-row"),(0,r.Lj)(t,"class","vc-table")},m:function(e,s){(0,r.$T)(e,t,s),(0,r.R3)(t,i),(0,r.R3)(t,n);for(var c=0;c<a.length;c+=1)a[c].m(t,null);o=!0},p:function(e,i){var n=i[0];if(511&n){var o;for(s=e[0],o=0;o<s.length;o+=1){var c=pn(e,s,o);a[o]?(a[o].p(c,n),(0,r.Ui)(a[o],1)):(a[o]=Sn(c),a[o].c(),(0,r.Ui)(a[o],1),a[o].m(t,null))}for((0,r.dv)(),o=s.length;o<a.length;o+=1)l(o);(0,r.gb)()}},i:function(e){if(!o){for(var t=0;t<s.length;t+=1)(0,r.Ui)(a[t]);o=!0}},o:function(e){a=a.filter(Boolean);for(var t=0;t<a.length;t+=1)(0,r.et)(a[t]);o=!1},d:function(e){e&&(0,r.og)(t),(0,r.RM)(a,e)}}}function bn(e,i,n){var r=i.storages,o=void 0===r?[]:r,s=i.activedName,a=void 0===s?"":s,c=-1,l="",u="",d=function(){n(0,o),n(2,c=-1)},h=function(e,t){var i;e.removeItem(null!==(i=e.key(t))&&void 0!==i?i:""),d()},p=function(e,t,i,r){c===r?(l!==t&&e.removeItem(t),e.setItem(l,u),n(2,c=-1),d()):(n(3,l=t),n(4,u=i),n(2,c=r))};return e.$$set=function(e){"storages"in e&&n(0,o=e.storages),"activedName"in e&&n(1,a=e.activedName)},[o,a,c,l,u,h,p,function(){n(2,c=-1)},function(e){var i=(0,t.wz)(e);return i>1024?(0,t.Kt)(e,1024)+" ("+(0,t.KL)(i)+")":e},function(){l=this.value,n(3,l)},function(){u=this.value,n(4,u)},function(e,t,i,n){return p(e,t,i,n)},function(e,t){return h(e,t)},function(e,t,i,n){return p(e,t,i,n)}]}var Tn=function(e){var t,i,n,o,s;function a(t){var i;return i=e.call(this)||this,(0,r.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i),t,bn,Cn,r.N8,{storages:0,activedName:1}),i}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,hn(t,i),n=a,(o=[{key:"storages",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({storages:e}),(0,r.yl)()}},{key:"activedName",get:function(){return this.$$.ctx[1]},set:function(e){this.$set({activedName:e}),(0,r.yl)()}}])&&dn(n.prototype,o),s&&dn(n,s),a}(r.f_);function In(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return Rn(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Rn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var On=function(e){var t,i;function n(t,i,n){var r;return void 0===n&&(n={}),(r=e.call(this,t,i,Tn,n)||this).model=un.getSingleton(un,"VConsoleStorageModel"),r}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,wn(t,i);var r=n.prototype;return r.onShow=function(){this.compInstance.storages=this.model.getAllStorages(),this.compInstance.activedName||(this.compInstance.activedName=this.compInstance.storages[0].name)},r.onAddTopBar=function(e){for(var t=this,i=this.model.getAllStorages(),n=[],r=0;r<i.length;r++){var o=i[r].name;n.push({name:o[0].toUpperCase()+o.substring(1),data:{name:o},actived:0===r,onClick:function(e,i){if(i.name===t.compInstance.activedName)return!1;t.compInstance.activedName=i.name}})}n[0].className="vc-actived",e(n)},r.onAddTool=function(e){var t=this;e([{name:"Add",global:!1,onClick:function(){for(var e,i=In(t.model.getAllStorages());!(e=i()).done;){var n=e.value;if(n.name===t.compInstance.activedName){n.storage.setItem("new_"+Date.now(),"new_value"),t.compInstance.storages=t.compInstance.storages;break}}}},{name:"Refresh",global:!1,onClick:function(){t.compInstance.storages=t.model.getAllStorages()}},{name:"Clear",global:!1,onClick:function(){for(var e,i=In(t.model.getAllStorages());!(e=i()).done;){var n=e.value;if(n.name===t.compInstance.activedName){n.storage.clear(),t.compInstance.storages=t.compInstance.storages;break}}}}])},n}(q),kn="#__vconsole",Nn=function(){function e(e){var i=this;if(this.version="3.11.2",this.isInited=void 0,this.option={},this.compInstance=void 0,this.pluginList={},this.log=void 0,this.system=void 0,this.network=void 0,n.one(kn))console.debug("[vConsole] vConsole is already exists.");else{if(this.isInited=!1,this.option={defaultPlugins:["system","network","element","storage"]},t.Kn(e))for(var r in e)this.option[r]=e[r];this._addBuiltInPlugins();var o,s=function(){i.isInited||(i._initComponent(),i._autoRun())};if(void 0!==document)"loading"===document.readyState?n.bind(window,"DOMContentLoaded",s):s();else o=setTimeout((function e(){document&&"complete"==document.readyState?(o&&clearTimeout(o),s()):o=setTimeout(e,1)}),1)}}var i=e.prototype;return i._addBuiltInPlugins=function(){this.addPlugin(new Rt("default","Log"));var e=this.option.defaultPlugins,i={system:{proto:Ot,name:"System"},network:{proto:Ai,name:"Network"},element:{proto:nn,name:"Element"},storage:{proto:On,name:"Storage"}};if(e&&t.kJ(e))for(var n=0;n<e.length;n++){var r=i[e[n]];r?this.addPlugin(new r.proto(e[n],r.name)):console.debug("[vConsole] Unrecognized default plugin ID:",e[n])}},i._initComponent=function(){var e=this;if(!n.one(kn)){var i,r=1*t.cF("switch_x"),o=1*t.cF("switch_y");"string"==typeof this.option.target?i=document.querySelector(this.option.target):this.option.target instanceof HTMLElement&&(i=this.option.target),i instanceof HTMLElement||(i=document.documentElement),this.compInstance=new G({target:i,props:{switchButtonPosition:{x:r,y:o}}}),this.compInstance.$on("show",(function(t){t.detail.show?e.show():e.hide()})),this.compInstance.$on("changePanel",(function(t){var i=t.detail.pluginId;e.showPlugin(i)}))}this._updateComponentByOptions()},i._updateComponentByOptions=function(){if(this.compInstance){if(this.compInstance.theme!==this.option.theme){var e=this.option.theme;e="light"!==e&&"dark"!==e?"":e,this.compInstance.theme=e}this.compInstance.disableScrolling!==this.option.disableLogScrolling&&(this.compInstance.disableScrolling=!!this.option.disableLogScrolling)}},i.setSwitchPosition=function(e,t){this.compInstance.switchButtonPosition={x:e,y:t}},i._autoRun=function(){for(var e in this.isInited=!0,this.pluginList)this._initPlugin(this.pluginList[e]);this._showFirstPluginWhenEmpty(),this.triggerEvent("ready")},i._showFirstPluginWhenEmpty=function(){var e=Object.keys(this.pluginList);""===this.compInstance.activedPluginId&&e.length>0&&this.showPlugin(e[0])},i.triggerEvent=function(e,i){e="on"+e.charAt(0).toUpperCase()+e.slice(1),t.mf(this.option[e])&&this.option[e].apply(this,i)},i._initPlugin=function(e){var i=this;e.vConsole=this,this.compInstance.pluginList[e.id]={id:e.id,name:e.name,hasTabPanel:!1,topbarList:[],toolbarList:[]},this.compInstance.pluginList=this.compInstance.pluginList,e.trigger("init"),e.trigger("renderTab",(function(n){i.compInstance.pluginList[e.id].hasTabPanel=!0,n&&(t.HD(n)?i.compInstance.divContentInner.innerHTML+=n:t.mf(n.appendTo)?n.appendTo(i.compInstance.divContentInner):t.kK(n)&&i.compInstance.divContentInner.insertAdjacentElement("beforeend",n))})),e.trigger("addTopBar",(function(t){if(t)for(var n=0;n<t.length;n++){var r=t[n];i.compInstance.pluginList[e.id].topbarList.push({name:r.name||"Undefined",className:r.className||"",actived:!!r.actived,data:r.data,onClick:r.onClick})}})),e.trigger("addTool",(function(t){if(t)for(var n=0;n<t.length;n++){var r=t[n];i.compInstance.pluginList[e.id].toolbarList.push({name:r.name||"Undefined",global:!!r.global,data:r.data,onClick:r.onClick})}})),e.isReady=!0,e.trigger("ready")},i._triggerPluginsEvent=function(e){for(var t in this.pluginList)this.pluginList[t].isReady&&this.pluginList[t].trigger(e)},i._triggerPluginEvent=function(e,t){var i=this.pluginList[e];i&&i.isReady&&i.trigger(t)},i.addPlugin=function(e){return void 0!==this.pluginList[e.id]?(console.debug("[vConsole] Plugin `"+e.id+"` has already been added."),!1):(this.pluginList[e.id]=e,this.isInited&&(this._initPlugin(e),this._showFirstPluginWhenEmpty()),!0)},i.removePlugin=function(e){e=(e+"").toLowerCase();var t=this.pluginList[e];if(void 0===t)return console.debug("[vConsole] Plugin `"+e+"` does not exist."),!1;t.trigger("remove");try{delete this.pluginList[e],delete this.compInstance.pluginList[e]}catch(t){this.pluginList[e]=void 0,this.compInstance.pluginList[e]=void 0}return this.compInstance.pluginList=this.compInstance.pluginList,this.compInstance.activedPluginId==e&&(this.compInstance.activedPluginId="",this._showFirstPluginWhenEmpty()),!0},i.show=function(){this.isInited&&(this.compInstance.show=!0,this._triggerPluginsEvent("showConsole"))},i.hide=function(){this.isInited&&(this.compInstance.show=!1,this._triggerPluginsEvent("hideConsole"))},i.showSwitch=function(){this.isInited&&(this.compInstance.showSwitchButton=!0)},i.hideSwitch=function(){this.isInited&&(this.compInstance.showSwitchButton=!1)},i.showPlugin=function(e){this.isInited&&(this.pluginList[e]||console.debug("[vConsole] Plugin `"+e+"` does not exist."),this.compInstance.activedPluginId&&this._triggerPluginEvent(this.compInstance.activedPluginId,"hide"),this.compInstance.activedPluginId=e,this._triggerPluginEvent(this.compInstance.activedPluginId,"show"))},i.setOption=function(e,i){if(t.HD(e))this.option[e]=i,this._triggerPluginsEvent("updateOption"),this._updateComponentByOptions();else if(t.Kn(e)){for(var n in e)this.option[n]=e[n];this._triggerPluginsEvent("updateOption"),this._updateComponentByOptions()}else console.debug("[vConsole] The first parameter of `vConsole.setOption()` must be a string or an object.")},i.destroy=function(){if(this.isInited){for(var e=Object.keys(this.pluginList),t=e.length-1;t>=0;t--)this.removePlugin(e[t]);this.compInstance.$destroy(),this.isInited=!1}},e}();Nn.VConsolePlugin=Q,Nn.VConsoleLogPlugin=Tt,Nn.VConsoleDefaultPlugin=Rt,Nn.VConsoleSystemPlugin=Ot,Nn.VConsoleNetworkPlugin=Ai,Nn.VConsoleElementPlugin=nn,Nn.VConsoleStoragePlugin=On;var Ln=Nn}(),__webpack_exports__=__webpack_exports__.default,__webpack_exports__}()}))}).call(this,__webpack_require__("c8ba"))},"3a7b":function(e,t,i){"use strict";var n=i("ebb5"),r=i("b727").findIndex,o=n.aTypedArray,s=n.exportTypedArrayMethod;s("findIndex",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"3a9b":function(e,t,i){var n=i("e330");e.exports=n({}.isPrototypeOf)},"3bbe":function(e,t,i){var n=i("da84"),r=i("1626"),o=n.String,s=n.TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw s("Can't set "+o(e)+" as a prototype")}},"3c5d":function(e,t,i){"use strict";var n=i("da84"),r=i("c65b"),o=i("ebb5"),s=i("07fa"),a=i("182d"),c=i("7b0b"),l=i("d039"),u=n.RangeError,d=n.Int8Array,h=d&&d.prototype,p=h&&h.set,f=o.aTypedArray,g=o.exportTypedArrayMethod,m=!l((function(){var e=new Uint8ClampedArray(2);return r(p,e,{length:1,0:3},1),3!==e[1]})),_=m&&o.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));g("set",(function(e){f(this);var t=a(arguments.length>1?arguments[1]:void 0,1),i=c(e);if(m)return r(p,this,i,t);var n=this.length,o=s(i),l=0;if(o+t>n)throw u("Wrong length");while(l<o)this[t+l]=i[l++]}),!m||_)},"3ca3":function(e,t,i){"use strict";var n=i("6547").charAt,r=i("577e"),o=i("69f3"),s=i("7dd0"),a="String Iterator",c=o.set,l=o.getterFor(a);s(String,"String",(function(e){c(this,{type:a,string:r(e),index:0})}),(function(){var e,t=l(this),i=t.string,r=t.index;return r>=i.length?{value:void 0,done:!0}:(e=n(i,r),t.index+=e.length,{value:e,done:!1})}))},"3f6b":function(e,t,i){e.exports={default:i("b9c7"),__esModule:!0}},"3f8c":function(e,t){e.exports={}},"3fcc":function(e,t,i){"use strict";var n=i("ebb5"),r=i("b727").map,o=i("b6b7"),s=n.aTypedArray,a=n.exportTypedArrayMethod;a("map",(function(e){return r(s(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(o(e))(t)}))}))},4010:function(e,t,i){"use strict";t.__esModule=!0,t.removeResizeListener=t.addResizeListener=void 0;var n=i("6dd8"),r=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var s="undefined"===typeof window,a=function(e){var t=e,i=Array.isArray(t),n=0;for(t=i?t:t[Symbol.iterator]();;){var r;if(i){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var o=r,s=o.target.__resizeListeners__||[];s.length&&s.forEach((function(e){e()}))}};t.addResizeListener=function(e,t){s||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new r.default(a),e.__ro__.observe(e)),e.__resizeListeners__.push(t))},t.removeResizeListener=function(e,t){e&&e.__resizeListeners__&&(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||e.__ro__.disconnect())}},"408a":function(e,t,i){var n=i("e330");e.exports=n(1..valueOf)},"40d5":function(e,t,i){var n=i("d039");e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},"417f":function(e,t,i){"use strict";t.__esModule=!0;var n=i("2b0e"),r=s(n),o=i("5924");function s(e){return e&&e.__esModule?e:{default:e}}var a=[],c="@@clickoutsideContext",l=void 0,u=0;function d(e,t,i){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(i&&i.context&&n.target&&r.target)||e.contains(n.target)||e.contains(r.target)||e===n.target||i.context.popperElm&&(i.context.popperElm.contains(n.target)||i.context.popperElm.contains(r.target))||(t.expression&&e[c].methodName&&i.context[e[c].methodName]?i.context[e[c].methodName]():e[c].bindingFn&&e[c].bindingFn())}}!r.default.prototype.$isServer&&(0,o.on)(document,"mousedown",(function(e){return l=e})),!r.default.prototype.$isServer&&(0,o.on)(document,"mouseup",(function(e){a.forEach((function(t){return t[c].documentHandler(e,l)}))})),t.default={bind:function(e,t,i){a.push(e);var n=u++;e[c]={id:n,documentHandler:d(e,t,i),methodName:t.expression,bindingFn:t.value}},update:function(e,t,i){e[c].documentHandler=d(e,t,i),e[c].methodName=t.expression,e[c].bindingFn=t.value},unbind:function(e){for(var t=a.length,i=0;i<t;i++)if(a[i][c].id===e[c].id){a.splice(i,1);break}delete e[c]}}},"41b2":function(e,t,i){"use strict";t.__esModule=!0;var n=i("3f6b"),r=o(n);function o(e){return e&&e.__esModule?e:{default:e}}t.default=r.default||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}},"41f8":function(e,t,i){"use strict";t.__esModule=!0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isVNode=o;var r=i("8122");function o(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":n(e))&&(0,r.hasOwn)(e,"componentOptions")}},"428f":function(e,t,i){var n=i("da84");e.exports=n},4362:function(e,t,i){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,n="/";t.cwd=function(){return n},t.chdir=function(t){e||(e=i("df7c")),n=e.resolve(t,n)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"44ad":function(e,t,i){var n=i("da84"),r=i("e330"),o=i("d039"),s=i("c6b6"),a=n.Object,c=r("".split);e.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?c(e,""):a(e)}:a},"44d2":function(e,t,i){var n=i("b622"),r=i("7c73"),o=i("9bf2"),s=n("unscopables"),a=Array.prototype;void 0==a[s]&&o.f(a,s,{configurable:!0,value:r(null)}),e.exports=function(e){a[s][e]=!0}},"44de":function(e,t,i){var n=i("da84");e.exports=function(e,t){var i=n.console;i&&i.error&&(1==arguments.length?i.error(e):i.error(e,t))}},"44e7":function(e,t,i){var n=i("861d"),r=i("c6b6"),o=i("b622"),s=o("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==r(e))}},"466d":function(e,t,i){"use strict";var n=i("c65b"),r=i("d784"),o=i("825a"),s=i("50c4"),a=i("577e"),c=i("1d80"),l=i("dc4a"),u=i("8aa5"),d=i("14c3");r("match",(function(e,t,i){return[function(t){var i=c(this),r=void 0==t?void 0:l(t,e);return r?n(r,t,i):new RegExp(t)[e](a(i))},function(e){var n=o(this),r=a(e),c=i(t,n,r);if(c.done)return c.value;if(!n.global)return d(n,r);var l=n.unicode;n.lastIndex=0;var h,p=[],f=0;while(null!==(h=d(n,r))){var g=a(h[0]);p[f]=g,""===g&&(n.lastIndex=u(r,s(n.lastIndex),l)),f++}return 0===f?null:p}]}))},"467f":function(e,t,i){"use strict";var n=i("2d83");e.exports=function(e,t,i){var r=i.config.validateStatus;i.status&&r&&!r(i.status)?t(n("Request failed with status code "+i.status,i.config,null,i.request,i)):e(i)}},4726:function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=59)}({0:function(e,t,i){"use strict";function n(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},15:function(e,t){e.exports=i("14e9")},19:function(e,t){e.exports=i("dcdc")},21:function(e,t){e.exports=i("d397")},26:function(e,t){e.exports=i("92fa")},3:function(e,t){e.exports=i("8122")},31:function(e,t){e.exports=i("2a5e")},40:function(e,t){e.exports=i("e452")},51:function(e,t){e.exports=i("f494")},59:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["el-cascader-panel",e.border&&"is-bordered"],on:{keydown:e.handleKeyDown}},e._l(e.menus,(function(e,t){return i("cascader-menu",{key:t,ref:"menu",refInFor:!0,attrs:{index:t,nodes:e}})})),1)},r=[];n._withStripped=!0;var o,s,a=i(26),c=i.n(a),l=i(15),u=i.n(l),d=i(19),h=i.n(d),p=i(51),f=i.n(p),g=i(3),m=function(e){return e.stopPropagation()},_={inject:["panel"],components:{ElCheckbox:h.a,ElRadio:f.a},props:{node:{required:!0},nodeId:String},computed:{config:function(){return this.panel.config},isLeaf:function(){return this.node.isLeaf},isDisabled:function(){return this.node.isDisabled},checkedValue:function(){return this.panel.checkedValue},isChecked:function(){return this.node.isSameNode(this.checkedValue)},inActivePath:function(){return this.isInPath(this.panel.activePath)},inCheckedPath:function(){var e=this;return!!this.config.checkStrictly&&this.panel.checkedNodePaths.some((function(t){return e.isInPath(t)}))},value:function(){return this.node.getValueByOption()}},methods:{handleExpand:function(){var e=this,t=this.panel,i=this.node,n=this.isDisabled,r=this.config,o=r.multiple,s=r.checkStrictly;!s&&n||i.loading||(r.lazy&&!i.loaded?t.lazyLoad(i,(function(){var t=e.isLeaf;if(t||e.handleExpand(),o){var n=!!t&&i.checked;e.handleMultiCheckChange(n)}})):t.handleExpand(i))},handleCheckChange:function(){var e=this.panel,t=this.value,i=this.node;e.handleCheckChange(t),e.handleExpand(i)},handleMultiCheckChange:function(e){this.node.doCheck(e),this.panel.calculateMultiCheckedValue()},isInPath:function(e){var t=this.node,i=e[t.level-1]||{};return i.uid===t.uid},renderPrefix:function(e){var t=this.isLeaf,i=this.isChecked,n=this.config,r=n.checkStrictly,o=n.multiple;return o?this.renderCheckbox(e):r?this.renderRadio(e):t&&i?this.renderCheckIcon(e):null},renderPostfix:function(e){var t=this.node,i=this.isLeaf;return t.loading?this.renderLoadingIcon(e):i?null:this.renderExpandIcon(e)},renderCheckbox:function(e){var t=this.node,i=this.config,n=this.isDisabled,r={on:{change:this.handleMultiCheckChange},nativeOn:{}};return i.checkStrictly&&(r.nativeOn.click=m),e("el-checkbox",c()([{attrs:{value:t.checked,indeterminate:t.indeterminate,disabled:n}},r]))},renderRadio:function(e){var t=this.checkedValue,i=this.value,n=this.isDisabled;return Object(g["isEqual"])(i,t)&&(i=t),e("el-radio",{attrs:{value:t,label:i,disabled:n},on:{change:this.handleCheckChange},nativeOn:{click:m}},[e("span")])},renderCheckIcon:function(e){return e("i",{class:"el-icon-check el-cascader-node__prefix"})},renderLoadingIcon:function(e){return e("i",{class:"el-icon-loading el-cascader-node__postfix"})},renderExpandIcon:function(e){return e("i",{class:"el-icon-arrow-right el-cascader-node__postfix"})},renderContent:function(e){var t=this.panel,i=this.node,n=t.renderLabelFn,r=n?n({node:i,data:i.data}):null;return e("span",{class:"el-cascader-node__label"},[r||i.label])}},render:function(e){var t=this,i=this.inActivePath,n=this.inCheckedPath,r=this.isChecked,o=this.isLeaf,s=this.isDisabled,a=this.config,l=this.nodeId,u=a.expandTrigger,d=a.checkStrictly,h=a.multiple,p=!d&&s,f={on:{}};return"click"===u?f.on.click=this.handleExpand:(f.on.mouseenter=function(e){t.handleExpand(),t.$emit("expand",e)},f.on.focus=function(e){t.handleExpand(),t.$emit("expand",e)}),!o||s||d||h||(f.on.click=this.handleCheckChange),e("li",c()([{attrs:{role:"menuitem",id:l,"aria-expanded":i,tabindex:p?null:-1},class:{"el-cascader-node":!0,"is-selectable":d,"in-active-path":i,"in-checked-path":n,"is-active":r,"is-disabled":p}},f]),[this.renderPrefix(e),this.renderContent(e),this.renderPostfix(e)])}},v=_,E=i(0),A=Object(E["a"])(v,o,s,!1,null,null,null);A.options.__file="packages/cascader-panel/src/cascader-node.vue";var y,S,C=A.exports,b=i(6),T=i.n(b),I={name:"ElCascaderMenu",mixins:[T.a],inject:["panel"],components:{ElScrollbar:u.a,CascaderNode:C},props:{nodes:{type:Array,required:!0},index:Number},data:function(){return{activeNode:null,hoverTimer:null,id:Object(g["generateId"])()}},computed:{isEmpty:function(){return!this.nodes.length},menuId:function(){return"cascader-menu-"+this.id+"-"+this.index}},methods:{handleExpand:function(e){this.activeNode=e.target},handleMouseMove:function(e){var t=this.activeNode,i=this.hoverTimer,n=this.$refs.hoverZone;if(t&&n)if(t.contains(e.target)){clearTimeout(i);var r=this.$el.getBoundingClientRect(),o=r.left,s=e.clientX-o,a=this.$el,c=a.offsetWidth,l=a.offsetHeight,u=t.offsetTop,d=u+t.offsetHeight;n.innerHTML='\n          <path style="pointer-events: auto;" fill="transparent" d="M'+s+" "+u+" L"+c+" 0 V"+u+' Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M'+s+" "+d+" L"+c+" "+l+" V"+d+' Z" />\n        '}else i||(this.hoverTimer=setTimeout(this.clearHoverZone,this.panel.config.hoverThreshold))},clearHoverZone:function(){var e=this.$refs.hoverZone;e&&(e.innerHTML="")},renderEmptyText:function(e){return e("div",{class:"el-cascader-menu__empty-text"},[this.t("el.cascader.noData")])},renderNodeList:function(e){var t=this.menuId,i=this.panel.isHoverMenu,n={on:{}};i&&(n.on.expand=this.handleExpand);var r=this.nodes.map((function(i,r){var o=i.hasChildren;return e("cascader-node",c()([{key:i.uid,attrs:{node:i,"node-id":t+"-"+r,"aria-haspopup":o,"aria-owns":o?t:null}},n]))}));return[].concat(r,[i?e("svg",{ref:"hoverZone",class:"el-cascader-menu__hover-zone"}):null])}},render:function(e){var t=this.isEmpty,i=this.menuId,n={nativeOn:{}};return this.panel.isHoverMenu&&(n.nativeOn.mousemove=this.handleMouseMove),e("el-scrollbar",c()([{attrs:{tag:"ul",role:"menu",id:i,"wrap-class":"el-cascader-menu__wrap","view-class":{"el-cascader-menu__list":!0,"is-empty":t}},class:"el-cascader-menu"},n]),[t?this.renderEmptyText(e):this.renderNodeList(e)])}},R=I,w=Object(E["a"])(R,y,S,!1,null,null,null);w.options.__file="packages/cascader-panel/src/cascader-menu.vue";var O=w.exports,k=i(21),N=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var P=0,D=function(){function e(t,i,n){L(this,e),this.data=t,this.config=i,this.parent=n||null,this.level=this.parent?this.parent.level+1:1,this.uid=P++,this.initState(),this.initChildren()}return e.prototype.initState=function(){var e=this.config,t=e.value,i=e.label;this.value=this.data[t],this.label=this.data[i],this.pathNodes=this.calculatePathNodes(),this.path=this.pathNodes.map((function(e){return e.value})),this.pathLabels=this.pathNodes.map((function(e){return e.label})),this.loading=!1,this.loaded=!1},e.prototype.initChildren=function(){var t=this,i=this.config,n=i.children,r=this.data[n];this.hasChildren=Array.isArray(r),this.children=(r||[]).map((function(n){return new e(n,i,t)}))},e.prototype.calculatePathNodes=function(){var e=[this],t=this.parent;while(t)e.unshift(t),t=t.parent;return e},e.prototype.getPath=function(){return this.path},e.prototype.getValue=function(){return this.value},e.prototype.getValueByOption=function(){return this.config.emitPath?this.getPath():this.getValue()},e.prototype.getText=function(e,t){return e?this.pathLabels.join(t):this.label},e.prototype.isSameNode=function(e){var t=this.getValueByOption();return this.config.multiple&&Array.isArray(e)?e.some((function(e){return Object(g["isEqual"])(e,t)})):Object(g["isEqual"])(e,t)},e.prototype.broadcast=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r="onParent"+Object(g["capitalize"])(e);this.children.forEach((function(t){t&&(t.broadcast.apply(t,[e].concat(i)),t[r]&&t[r].apply(t,i))}))},e.prototype.emit=function(e){var t=this.parent,i="onChild"+Object(g["capitalize"])(e);if(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t[i]&&t[i].apply(t,r),t.emit.apply(t,[e].concat(r))}},e.prototype.onParentCheck=function(e){this.isDisabled||this.setCheckState(e)},e.prototype.onChildCheck=function(){var e=this.children,t=e.filter((function(e){return!e.isDisabled})),i=!!t.length&&t.every((function(e){return e.checked}));this.setCheckState(i)},e.prototype.setCheckState=function(e){var t=this.children.length,i=this.children.reduce((function(e,t){var i=t.checked?1:t.indeterminate?.5:0;return e+i}),0);this.checked=e,this.indeterminate=i!==t&&i>0},e.prototype.syncCheckState=function(e){var t=this.getValueByOption(),i=this.isSameNode(e,t);this.doCheck(i)},e.prototype.doCheck=function(e){this.checked!==e&&(this.config.checkStrictly?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check")))},N(e,[{key:"isDisabled",get:function(){var e=this.data,t=this.parent,i=this.config,n=i.disabled,r=i.checkStrictly;return e[n]||!r&&t&&t.isDisabled}},{key:"isLeaf",get:function(){var e=this.data,t=this.loaded,i=this.hasChildren,n=this.children,r=this.config,o=r.lazy,s=r.leaf;if(o){var a=Object(k["isDef"])(e[s])?e[s]:!!t&&!n.length;return this.hasChildren=!a,a}return!i}}]),e}(),M=D;function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var B=function e(t,i){return t.reduce((function(t,n){return n.isLeaf?t.push(n):(!i&&t.push(n),t=t.concat(e(n.children,i))),t}),[])},U=function(){function e(t,i){x(this,e),this.config=i,this.initNodes(t)}return e.prototype.initNodes=function(e){var t=this;e=Object(g["coerceTruthyValueToArray"])(e),this.nodes=e.map((function(e){return new M(e,t.config)})),this.flattedNodes=this.getFlattedNodes(!1,!1),this.leafNodes=this.getFlattedNodes(!0,!1)},e.prototype.appendNode=function(e,t){var i=new M(e,this.config,t),n=t?t.children:this.nodes;n.push(i)},e.prototype.appendNodes=function(e,t){var i=this;e=Object(g["coerceTruthyValueToArray"])(e),e.forEach((function(e){return i.appendNode(e,t)}))},e.prototype.getNodes=function(){return this.nodes},e.prototype.getFlattedNodes=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e?this.leafNodes:this.flattedNodes;return t?i:B(this.nodes,e)},e.prototype.getNodeByValue=function(e){var t=this.getFlattedNodes(!1,!this.config.lazy).filter((function(t){return Object(g["valueEquals"])(t.path,e)||t.value===e}));return t&&t.length?t[0]:null},e}(),F=U,V=i(9),j=i.n(V),G=i(40),H=i.n(G),Q=i(31),W=i.n(Q),q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},$=H.a.keys,z={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:g["noop"],value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Z=function(e){return!e.getAttribute("aria-owns")},Y=function(e,t){var i=e.parentNode;if(i){var n=i.querySelectorAll('.el-cascader-node[tabindex="-1"]'),r=Array.prototype.indexOf.call(n,e);return n[r+t]||null}return null},K=function(e,t){if(e){var i=e.id.split("-");return Number(i[i.length-2])}},J=function(e){e&&(e.focus(),!Z(e)&&e.click())},X=function(e){if(e){var t=e.querySelector("input");t?t.click():Z(e)&&e.click()}},ee={name:"ElCascaderPanel",components:{CascaderMenu:O},props:{value:{},options:Array,props:Object,border:{type:Boolean,default:!0},renderLabel:Function},provide:function(){return{panel:this}},data:function(){return{checkedValue:null,checkedNodePaths:[],store:[],menus:[],activePath:[],loadCount:0}},computed:{config:function(){return j()(q({},z),this.props||{})},multiple:function(){return this.config.multiple},checkStrictly:function(){return this.config.checkStrictly},leafOnly:function(){return!this.checkStrictly},isHoverMenu:function(){return"hover"===this.config.expandTrigger},renderLabelFn:function(){return this.renderLabel||this.$scopedSlots.default}},watch:{options:{handler:function(){this.initStore()},immediate:!0,deep:!0},value:function(){this.syncCheckedValue(),this.checkStrictly&&this.calculateCheckedNodePaths()},checkedValue:function(e){Object(g["isEqual"])(e,this.value)||(this.checkStrictly&&this.calculateCheckedNodePaths(),this.$emit("input",e),this.$emit("change",e))}},mounted:function(){this.isEmptyValue(this.value)||this.syncCheckedValue()},methods:{initStore:function(){var e=this.config,t=this.options;e.lazy&&Object(g["isEmpty"])(t)?this.lazyLoad():(this.store=new F(t,e),this.menus=[this.store.getNodes()],this.syncMenuState())},syncCheckedValue:function(){var e=this.value,t=this.checkedValue;Object(g["isEqual"])(e,t)||(this.activePath=[],this.checkedValue=e,this.syncMenuState())},syncMenuState:function(){var e=this.multiple,t=this.checkStrictly;this.syncActivePath(),e&&this.syncMultiCheckState(),t&&this.calculateCheckedNodePaths(),this.$nextTick(this.scrollIntoView)},syncMultiCheckState:function(){var e=this,t=this.getFlattedNodes(this.leafOnly);t.forEach((function(t){t.syncCheckState(e.checkedValue)}))},isEmptyValue:function(e){var t=this.multiple,i=this.config,n=i.emitPath;return!(!t&&!n)&&Object(g["isEmpty"])(e)},syncActivePath:function(){var e=this,t=this.store,i=this.multiple,n=this.activePath,r=this.checkedValue;if(Object(g["isEmpty"])(n))if(this.isEmptyValue(r))this.activePath=[],this.menus=[t.getNodes()];else{var o=i?r[0]:r,s=this.getNodeByValue(o)||{},a=(s.pathNodes||[]).slice(0,-1);this.expandNodes(a)}else{var c=n.map((function(t){return e.getNodeByValue(t.getValue())}));this.expandNodes(c)}},expandNodes:function(e){var t=this;e.forEach((function(e){return t.handleExpand(e,!0)}))},calculateCheckedNodePaths:function(){var e=this,t=this.checkedValue,i=this.multiple,n=i?Object(g["coerceTruthyValueToArray"])(t):[t];this.checkedNodePaths=n.map((function(t){var i=e.getNodeByValue(t);return i?i.pathNodes:[]}))},handleKeyDown:function(e){var t=e.target,i=e.keyCode;switch(i){case $.up:var n=Y(t,-1);J(n);break;case $.down:var r=Y(t,1);J(r);break;case $.left:var o=this.$refs.menu[K(t)-1];if(o){var s=o.$el.querySelector('.el-cascader-node[aria-expanded="true"]');J(s)}break;case $.right:var a=this.$refs.menu[K(t)+1];if(a){var c=a.$el.querySelector('.el-cascader-node[tabindex="-1"]');J(c)}break;case $.enter:X(t);break;case $.esc:case $.tab:this.$emit("close");break;default:return}},handleExpand:function(e,t){var i=this.activePath,n=e.level,r=i.slice(0,n-1),o=this.menus.slice(0,n);if(e.isLeaf||(r.push(e),o.push(e.children)),this.activePath=r,this.menus=o,!t){var s=r.map((function(e){return e.getValue()})),a=i.map((function(e){return e.getValue()}));Object(g["valueEquals"])(s,a)||(this.$emit("active-item-change",s),this.$emit("expand-change",s))}},handleCheckChange:function(e){this.checkedValue=e},lazyLoad:function(e,t){var i=this,n=this.config;e||(e=e||{root:!0,level:0},this.store=new F([],n),this.menus=[this.store.getNodes()]),e.loading=!0;var r=function(n){var r=e.root?null:e;if(n&&n.length&&i.store.appendNodes(n,r),e.loading=!1,e.loaded=!0,Array.isArray(i.checkedValue)){var o=i.checkedValue[i.loadCount++],s=i.config.value,a=i.config.leaf;if(Array.isArray(n)&&n.filter((function(e){return e[s]===o})).length>0){var c=i.store.getNodeByValue(o);c.data[a]||i.lazyLoad(c,(function(){i.handleExpand(c)})),i.loadCount===i.checkedValue.length&&i.$parent.computePresentText()}}t&&t(n)};n.lazyLoad(e,r)},calculateMultiCheckedValue:function(){this.checkedValue=this.getCheckedNodes(this.leafOnly).map((function(e){return e.getValueByOption()}))},scrollIntoView:function(){if(!this.$isServer){var e=this.$refs.menu||[];e.forEach((function(e){var t=e.$el;if(t){var i=t.querySelector(".el-scrollbar__wrap"),n=t.querySelector(".el-cascader-node.is-active")||t.querySelector(".el-cascader-node.in-active-path");W()(i,n)}}))}},getNodeByValue:function(e){return this.store.getNodeByValue(e)},getFlattedNodes:function(e){var t=!this.config.lazy;return this.store.getFlattedNodes(e,t)},getCheckedNodes:function(e){var t=this.checkedValue,i=this.multiple;if(i){var n=this.getFlattedNodes(e);return n.filter((function(e){return e.checked}))}return this.isEmptyValue(t)?[]:[this.getNodeByValue(t)]},clearCheckedNodes:function(){var e=this.config,t=this.leafOnly,i=e.multiple,n=e.emitPath;i?(this.getCheckedNodes(t).filter((function(e){return!e.isDisabled})).forEach((function(e){return e.doCheck(!1)})),this.calculateMultiCheckedValue()):this.checkedValue=n?[]:null}}},te=ee,ie=Object(E["a"])(te,n,r,!1,null,null,null);ie.options.__file="packages/cascader-panel/src/cascader-panel.vue";var ne=ie.exports;ne.install=function(e){e.component(ne.name,ne)};t["default"]=ne},6:function(e,t){e.exports=i("6b7c")},9:function(e,t){e.exports=i("7f4d")}})},4840:function(e,t,i){var n=i("825a"),r=i("5087"),o=i("b622"),s=o("species");e.exports=function(e,t){var i,o=n(e).constructor;return void 0===o||void 0==(i=n(o)[s])?t:r(i)}},"485a":function(e,t,i){var n=i("da84"),r=i("c65b"),o=i("1626"),s=i("861d"),a=n.TypeError;e.exports=function(e,t){var i,n;if("string"===t&&o(i=e.toString)&&!s(n=r(i,e)))return n;if(o(i=e.valueOf)&&!s(n=r(i,e)))return n;if("string"!==t&&o(i=e.toString)&&!s(n=r(i,e)))return n;throw a("Can't convert object to primitive value")}},4897:function(e,t,i){"use strict";t.__esModule=!0,t.i18n=t.use=t.t=void 0;var n=i("f0d9"),r=d(n),o=i("2b0e"),s=d(o),a=i("9afc"),c=d(a),l=i("9d7e"),u=d(l);function d(e){return e&&e.__esModule?e:{default:e}}var h=(0,u.default)(s.default),p=r.default,f=!1,g=function(){var e=Object.getPrototypeOf(this||s.default).$t;if("function"===typeof e&&s.default.locale)return f||(f=!0,s.default.locale(s.default.config.lang,(0,c.default)(p,s.default.locale(s.default.config.lang)||{},{clone:!0}))),e.apply(this,arguments)},m=t.t=function(e,t){var i=g.apply(this,arguments);if(null!==i&&void 0!==i)return i;for(var n=e.split("."),r=p,o=0,s=n.length;o<s;o++){var a=n[o];if(i=r[a],o===s-1)return h(i,t);if(!i)return"";r=i}return""},_=t.use=function(e){p=e||p},v=t.i18n=function(e){g=e||g};t.default={use:_,t:m,i18n:v}},4930:function(e,t,i){var n=i("2d00"),r=i("d039");e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},"498a":function(e,t,i){"use strict";var n=i("23e7"),r=i("58a8").trim,o=i("c8d2");n({target:"String",proto:!0,forced:o("trim")},{trim:function(){return r(this)}})},"4a7b":function(e,t,i){"use strict";var n=i("c532");e.exports=function(e,t){t=t||{};var i={};function r(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function o(i){return n.isUndefined(t[i])?n.isUndefined(e[i])?void 0:r(void 0,e[i]):r(e[i],t[i])}function s(e){if(!n.isUndefined(t[e]))return r(void 0,t[e])}function a(i){return n.isUndefined(t[i])?n.isUndefined(e[i])?void 0:r(void 0,e[i]):r(void 0,t[i])}function c(i){return i in t?r(e[i],t[i]):i in e?r(void 0,e[i]):void 0}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return n.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||o,r=t(e);n.isUndefined(r)&&t!==c||(i[e]=r)})),i}},"4a9b":function(e,t,i){var n=i("74e8");n("Float64",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},"4ae1":function(e,t,i){var n=i("23e7"),r=i("d066"),o=i("2ba4"),s=i("0538"),a=i("5087"),c=i("825a"),l=i("861d"),u=i("7c73"),d=i("d039"),h=r("Reflect","construct"),p=Object.prototype,f=[].push,g=d((function(){function e(){}return!(h((function(){}),[],e)instanceof e)})),m=!d((function(){h((function(){}))})),_=g||m;n({target:"Reflect",stat:!0,forced:_,sham:_},{construct:function(e,t){a(e),c(t);var i=arguments.length<3?e:a(arguments[2]);if(m&&!g)return h(e,t,i);if(e==i){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return o(f,n,t),new(o(s,e,n))}var r=i.prototype,d=u(l(r)?r:p),_=o(e,d,t);return l(_)?_:d}})},"4b26":function(e,t,i){"use strict";t.__esModule=!0;var n=i("2b0e"),r=s(n),o=i("5924");function s(e){return e&&e.__esModule?e:{default:e}}var a=!1,c=!1,l=void 0,u=function(){if(!r.default.prototype.$isServer){var e=h.modalDom;return e?a=!0:(a=!1,e=document.createElement("div"),h.modalDom=e,e.addEventListener("touchmove",(function(e){e.preventDefault(),e.stopPropagation()})),e.addEventListener("click",(function(){h.doOnModalClick&&h.doOnModalClick()}))),e}},d={},h={modalFade:!0,getInstance:function(e){return d[e]},register:function(e,t){e&&t&&(d[e]=t)},deregister:function(e){e&&(d[e]=null,delete d[e])},nextZIndex:function(){return h.zIndex++},modalStack:[],doOnModalClick:function(){var e=h.modalStack[h.modalStack.length-1];if(e){var t=h.getInstance(e.id);t&&t.closeOnClickModal&&t.close()}},openModal:function(e,t,i,n,s){if(!r.default.prototype.$isServer&&e&&void 0!==t){this.modalFade=s;for(var c=this.modalStack,l=0,d=c.length;l<d;l++){var h=c[l];if(h.id===e)return}var p=u();if((0,o.addClass)(p,"v-modal"),this.modalFade&&!a&&(0,o.addClass)(p,"v-modal-enter"),n){var f=n.trim().split(/\s+/);f.forEach((function(e){return(0,o.addClass)(p,e)}))}setTimeout((function(){(0,o.removeClass)(p,"v-modal-enter")}),200),i&&i.parentNode&&11!==i.parentNode.nodeType?i.parentNode.appendChild(p):document.body.appendChild(p),t&&(p.style.zIndex=t),p.tabIndex=0,p.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:n})}},closeModal:function(e){var t=this.modalStack,i=u();if(t.length>0){var n=t[t.length-1];if(n.id===e){if(n.modalClass){var r=n.modalClass.trim().split(/\s+/);r.forEach((function(e){return(0,o.removeClass)(i,e)}))}t.pop(),t.length>0&&(i.style.zIndex=t[t.length-1].zIndex)}else for(var s=t.length-1;s>=0;s--)if(t[s].id===e){t.splice(s,1);break}}0===t.length&&(this.modalFade&&(0,o.addClass)(i,"v-modal-leave"),setTimeout((function(){0===t.length&&(i.parentNode&&i.parentNode.removeChild(i),i.style.display="none",h.modalDom=void 0),(0,o.removeClass)(i,"v-modal-leave")}),200))}};Object.defineProperty(h,"zIndex",{configurable:!0,get:function(){return c||(l=l||(r.default.prototype.$ELEMENT||{}).zIndex||2e3,c=!0),l},set:function(e){l=e}});var p=function(){if(!r.default.prototype.$isServer&&h.modalStack.length>0){var e=h.modalStack[h.modalStack.length-1];if(!e)return;var t=h.getInstance(e.id);return t}};r.default.prototype.$isServer||window.addEventListener("keydown",(function(e){if(27===e.keyCode){var t=p();t&&t.closeOnPressEscape&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction("cancel"):t.close())}})),t.default=h},"4b8b":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"4d20":function(e,t,i){var n=i("1917"),r=i("10db"),o=i("6ca1"),s=i("3397"),a=i("9c0e"),c=i("faf5"),l=Object.getOwnPropertyDescriptor;t.f=i("0bad")?l:function(e,t){if(e=o(e),t=s(t,!0),c)try{return l(e,t)}catch(i){}if(a(e,t))return r(!n.f.call(e,t),e[t])}},"4d63":function(e,t,i){var n=i("83ab"),r=i("da84"),o=i("e330"),s=i("94ca"),a=i("7156"),c=i("9112"),l=i("9bf2").f,u=i("241c").f,d=i("3a9b"),h=i("44e7"),p=i("577e"),f=i("ad6d"),g=i("9f7f"),m=i("6eeb"),_=i("d039"),v=i("1a2d"),E=i("69f3").enforce,A=i("2626"),y=i("b622"),S=i("fce3"),C=i("107c"),b=y("match"),T=r.RegExp,I=T.prototype,R=r.SyntaxError,w=o(f),O=o(I.exec),k=o("".charAt),N=o("".replace),L=o("".indexOf),P=o("".slice),D=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,M=/a/g,x=/a/g,B=new T(M)!==M,U=g.MISSED_STICKY,F=g.UNSUPPORTED_Y,V=n&&(!B||U||S||C||_((function(){return x[b]=!1,T(M)!=M||T(x)==x||"/a/i"!=T(M,"i")}))),j=function(e){for(var t,i=e.length,n=0,r="",o=!1;n<=i;n++)t=k(e,n),"\\"!==t?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),r+=t):r+="[\\s\\S]":r+=t+k(e,++n);return r},G=function(e){for(var t,i=e.length,n=0,r="",o=[],s={},a=!1,c=!1,l=0,u="";n<=i;n++){if(t=k(e,n),"\\"===t)t+=k(e,++n);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:O(D,P(e,n+1))&&(n+=2,c=!0),r+=t,l++;continue;case">"===t&&c:if(""===u||v(s,u))throw new R("Invalid capture group name");s[u]=!0,o[o.length]=[u,l],c=!1,u="";continue}c?u+=t:r+=t}return[r,o]};if(s("RegExp",V)){for(var H=function(e,t){var i,n,r,o,s,l,u=d(I,this),f=h(e),g=void 0===t,m=[],_=e;if(!u&&f&&g&&e.constructor===H)return e;if((f||d(I,e))&&(e=e.source,g&&(t="flags"in _?_.flags:w(_))),e=void 0===e?"":p(e),t=void 0===t?"":p(t),_=e,S&&"dotAll"in M&&(n=!!t&&L(t,"s")>-1,n&&(t=N(t,/s/g,""))),i=t,U&&"sticky"in M&&(r=!!t&&L(t,"y")>-1,r&&F&&(t=N(t,/y/g,""))),C&&(o=G(e),e=o[0],m=o[1]),s=a(T(e,t),u?this:I,H),(n||r||m.length)&&(l=E(s),n&&(l.dotAll=!0,l.raw=H(j(e),i)),r&&(l.sticky=!0),m.length&&(l.groups=m)),e!==_)try{c(s,"source",""===_?"(?:)":_)}catch(v){}return s},Q=function(e){e in H||l(H,e,{configurable:!0,get:function(){return T[e]},set:function(t){T[e]=t}})},W=u(T),q=0;W.length>q;)Q(W[q++]);I.constructor=H,H.prototype=I,m(r,"RegExp",H)}A("RegExp")},"4d64":function(e,t,i){var n=i("fc6a"),r=i("23cb"),o=i("07fa"),s=function(e){return function(t,i,s){var a,c=n(t),l=o(c),u=r(s,l);if(e&&i!=i){while(l>u)if(a=c[u++],a!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===i)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},"4d88":function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},"4dae":function(e,t,i){var n=i("da84"),r=i("23cb"),o=i("07fa"),s=i("8418"),a=n.Array,c=Math.max;e.exports=function(e,t,i){for(var n=o(e),l=r(t,n),u=r(void 0===i?n:i,n),d=a(c(u-l,0)),h=0;l<u;l++,h++)s(d,h,e[l]);return d.length=h,d}},"4de4":function(e,t,i){"use strict";var n=i("23e7"),r=i("b727").filter,o=i("1dde"),s=o("filter");n({target:"Array",proto:!0,forced:!s},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,i){"use strict";var n=i("da84"),r=i("0366"),o=i("c65b"),s=i("7b0b"),a=i("9bdd"),c=i("e95a"),l=i("68ee"),u=i("07fa"),d=i("8418"),h=i("9a1f"),p=i("35a1"),f=n.Array;e.exports=function(e){var t=s(e),i=l(this),n=arguments.length,g=n>1?arguments[1]:void 0,m=void 0!==g;m&&(g=r(g,n>2?arguments[2]:void 0));var _,v,E,A,y,S,C=p(t),b=0;if(!C||this==f&&c(C))for(_=u(t),v=i?new this(_):f(_);_>b;b++)S=m?g(t[b],b):t[b],d(v,b,S);else for(A=h(t,C),y=A.next,v=i?new this:[];!(E=o(y,A)).done;b++)S=m?a(A,g,[E.value,b],!0):E.value,d(v,b,S);return v.length=b,v}},"4e4b":function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=61)}({0:function(e,t,i){"use strict";function n(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},10:function(e,t){e.exports=i("f3ad")},12:function(e,t){e.exports=i("417f")},15:function(e,t){e.exports=i("14e9")},16:function(e,t){e.exports=i("4010")},18:function(e,t){e.exports=i("0e15")},21:function(e,t){e.exports=i("d397")},22:function(e,t){e.exports=i("12f2")},3:function(e,t){e.exports=i("8122")},31:function(e,t){e.exports=i("2a5e")},33:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[i("span",[e._v(e._s(e.currentLabel))])])],2)},r=[];n._withStripped=!0;var o=i(4),s=i.n(o),a=i(3),c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={mixins:[s.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var i=this.select,n=i.remote,r=i.valueKey;if(!this.created&&!n){if(r&&"object"===("undefined"===typeof e?"undefined":c(e))&&"object"===("undefined"===typeof t?"undefined":c(t))&&e[r]===t[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,t){if(this.isObject){var i=this.select.valueKey;return Object(a["getValueByPath"])(e,i)===Object(a["getValueByPath"])(t,i)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var i=this.select.valueKey;return e&&e.some((function(e){return Object(a["getValueByPath"])(e,i)===Object(a["getValueByPath"])(t,i)}))}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(a["escapeRegexpString"])(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,t=e.selected,i=e.multiple,n=i?t:[t],r=this.select.cachedOptions.indexOf(this),o=n.indexOf(this);r>-1&&o<0&&this.select.cachedOptions.splice(r,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},u=l,d=i(0),h=Object(d["a"])(u,n,r,!1,null,null,null);h.options.__file="packages/select/src/option.vue";t["a"]=h.exports},37:function(e,t){e.exports=i("8bbc")},4:function(e,t){e.exports=i("d010")},5:function(e,t){e.exports=i("e974")},6:function(e,t){e.exports=i("6b7c")},61:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[e.multiple?i("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?i("span",[i("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(t){e.deleteTag(t,e.selected[0])}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(e.selected[0].currentLabel))])]),e.selected.length>1?i("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[i("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e.collapseTags?e._e():i("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(t){return i("el-tag",{key:e.getValueKey(t),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:t.hitState,type:"info","disable-transitions":""},on:{close:function(i){e.deleteTag(i,t)}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.currentLabel))])])})),1),e.filterable?i("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(t){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){return!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(t)},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(t){t.target.composing||(e.query=t.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),i("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{type:"text",placeholder:e.currentPlaceholder,name:e.name,id:e.id,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur,input:e.debouncedOnInputChange},nativeOn:{keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}},[e.$slots.prefix?i("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),i("template",{slot:"suffix"},[i("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e.showClose?i("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),i("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[i("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[i("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?i("el-option",{attrs:{value:e.query,created:""}}):e._e(),e._t("default")],2),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):i("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)},r=[];n._withStripped=!0;var o=i(4),s=i.n(o),a=i(22),c=i.n(a),l=i(6),u=i.n(l),d=i(10),h=i.n(d),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-select-dropdown el-popper",class:[{"is-multiple":e.$parent.multiple},e.popperClass],style:{minWidth:e.minWidth}},[e._t("default")],2)},f=[];p._withStripped=!0;var g=i(5),m=i.n(g),_={name:"ElSelectDropdown",componentName:"ElSelectDropdown",mixins:[m.a],props:{placement:{default:"bottom-start"},boundariesPadding:{default:0},popperOptions:{default:function(){return{gpuAcceleration:!1}}},visibleArrow:{default:!0},appendToBody:{type:Boolean,default:!0}},data:function(){return{minWidth:""}},computed:{popperClass:function(){return this.$parent.popperClass}},watch:{"$parent.inputWidth":function(){this.minWidth=this.$parent.$el.getBoundingClientRect().width+"px"}},mounted:function(){var e=this;this.referenceElm=this.$parent.$refs.reference.$el,this.$parent.popperElm=this.popperElm=this.$el,this.$on("updatePopper",(function(){e.$parent.visible&&e.updatePopper()})),this.$on("destroyPopper",this.destroyPopper)}},v=_,E=i(0),A=Object(E["a"])(v,p,f,!1,null,null,null);A.options.__file="packages/select/src/select-dropdown.vue";var y=A.exports,S=i(33),C=i(37),b=i.n(C),T=i(15),I=i.n(T),R=i(18),w=i.n(R),O=i(12),k=i.n(O),N=i(16),L=i(31),P=i.n(L),D=i(3),M={data:function(){return{hoverOption:-1}},computed:{optionsAllDisabled:function(){return this.options.filter((function(e){return e.visible})).every((function(e){return e.disabled}))}},watch:{hoverIndex:function(e){var t=this;"number"===typeof e&&e>-1&&(this.hoverOption=this.options[e]||{}),this.options.forEach((function(e){e.hover=t.hoverOption===e}))}},methods:{navigateOptions:function(e){var t=this;if(this.visible){if(0!==this.options.length&&0!==this.filteredOptionsCount&&!this.optionsAllDisabled){"next"===e?(this.hoverIndex++,this.hoverIndex===this.options.length&&(this.hoverIndex=0)):"prev"===e&&(this.hoverIndex--,this.hoverIndex<0&&(this.hoverIndex=this.options.length-1));var i=this.options[this.hoverIndex];!0!==i.disabled&&!0!==i.groupDisabled&&i.visible||this.navigateOptions(e),this.$nextTick((function(){return t.scrollToOption(t.hoverOption)}))}}else this.visible=!0}}},x=i(21),B={mixins:[s.a,u.a,c()("reference"),M],name:"ElSelect",componentName:"ElSelect",inject:{elForm:{default:""},elFormItem:{default:""}},provide:function(){return{select:this}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return!this.filterable||this.multiple||!Object(D["isIE"])()&&!Object(D["isEdge"])()&&!this.visible},showClose:function(){var e=this.multiple?Array.isArray(this.value)&&this.value.length>0:void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.selectDisabled&&this.inputHovering&&e;return t},iconClass:function(){return this.remote&&this.filterable?"":this.visible?"arrow-up is-reverse":"arrow-up"},debounce:function(){return this.remote?300:0},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):(!this.remote||""!==this.query||0!==this.options.length)&&(this.filterable&&this.query&&this.options.length>0&&0===this.filteredOptionsCount?this.noMatchText||this.t("el.select.noMatch"):0===this.options.length?this.noDataText||this.t("el.select.noData"):null)},showNewOption:function(){var e=this,t=this.options.filter((function(e){return!e.created})).some((function(t){return t.currentLabel===e.query}));return this.filterable&&this.allowCreate&&""!==this.query&&!t},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"},propPlaceholder:function(){return"undefined"!==typeof this.placeholder?this.placeholder:this.t("el.select.placeholder")}},components:{ElInput:h.a,ElSelectMenu:y,ElOption:S["a"],ElTag:b.a,ElScrollbar:I.a},directives:{Clickoutside:k.a},props:{name:String,id:String,value:{required:!0},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},automaticDropdown:Boolean,size:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:String,remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String,required:!1},defaultFirstOption:Boolean,reserveKeyword:Boolean,valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{options:[],cachedOptions:[],createdLabel:null,createdSelected:!1,selected:this.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,cachedPlaceHolder:"",optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,currentPlaceholder:"",menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1}},watch:{selectDisabled:function(){var e=this;this.$nextTick((function(){e.resetInputHeight()}))},propPlaceholder:function(e){this.cachedPlaceHolder=this.currentPlaceholder=e},value:function(e,t){this.multiple&&(this.resetInputHeight(),e&&e.length>0||this.$refs.input&&""!==this.query?this.currentPlaceholder="":this.currentPlaceholder=this.cachedPlaceHolder,this.filterable&&!this.reserveKeyword&&(this.query="",this.handleQueryChange(this.query))),this.setSelected(),this.filterable&&!this.multiple&&(this.inputLength=20),Object(D["valueEquals"])(e,t)||this.dispatch("ElFormItem","el.form.change",e)},visible:function(e){var t=this;e?(this.broadcast("ElSelectDropdown","updatePopper"),this.filterable&&(this.query=this.remote?"":this.selectedLabel,this.handleQueryChange(this.query),this.multiple?this.$refs.input.focus():(this.remote||(this.broadcast("ElOption","queryChange",""),this.broadcast("ElOptionGroup","queryChange")),this.selectedLabel&&(this.currentPlaceholder=this.selectedLabel,this.selectedLabel="")))):(this.broadcast("ElSelectDropdown","destroyPopper"),this.$refs.input&&this.$refs.input.blur(),this.query="",this.previousQuery=null,this.selectedLabel="",this.inputLength=20,this.menuVisibleOnFocus=!1,this.resetHoverIndex(),this.$nextTick((function(){t.$refs.input&&""===t.$refs.input.value&&0===t.selected.length&&(t.currentPlaceholder=t.cachedPlaceHolder)})),this.multiple||(this.selected&&(this.filterable&&this.allowCreate&&this.createdSelected&&this.createdLabel?this.selectedLabel=this.createdLabel:this.selectedLabel=this.selected.currentLabel,this.filterable&&(this.query=this.selectedLabel)),this.filterable&&(this.currentPlaceholder=this.cachedPlaceHolder))),this.$emit("visible-change",e)},options:function(){var e=this;if(!this.$isServer){this.$nextTick((function(){e.broadcast("ElSelectDropdown","updatePopper")})),this.multiple&&this.resetInputHeight();var t=this.$el.querySelectorAll("input");-1===[].indexOf.call(t,document.activeElement)&&this.setSelected(),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}},methods:{handleComposition:function(e){var t=this,i=e.target.value;if("compositionend"===e.type)this.isOnComposition=!1,this.$nextTick((function(e){return t.handleQueryChange(i)}));else{var n=i[i.length-1]||"";this.isOnComposition=!Object(x["isKorean"])(n)}},handleQueryChange:function(e){var t=this;this.previousQuery===e||this.isOnComposition||(null!==this.previousQuery||"function"!==typeof this.filterMethod&&"function"!==typeof this.remoteMethod?(this.previousQuery=e,this.$nextTick((function(){t.visible&&t.broadcast("ElSelectDropdown","updatePopper")})),this.hoverIndex=-1,this.multiple&&this.filterable&&this.$nextTick((function(){var e=15*t.$refs.input.value.length+20;t.inputLength=t.collapseTags?Math.min(50,e):e,t.managePlaceholder(),t.resetInputHeight()})),this.remote&&"function"===typeof this.remoteMethod?(this.hoverIndex=-1,this.remoteMethod(e)):"function"===typeof this.filterMethod?(this.filterMethod(e),this.broadcast("ElOptionGroup","queryChange")):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",e),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()):this.previousQuery=e)},scrollToOption:function(e){var t=Array.isArray(e)&&e[0]?e[0].$el:e.$el;if(this.$refs.popper&&t){var i=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap");P()(i,t)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()},handleMenuEnter:function(){var e=this;this.$nextTick((function(){return e.scrollToOption(e.selected)}))},emitChange:function(e){Object(D["valueEquals"])(this.value,e)||this.$emit("change",e)},getOption:function(e){for(var t=void 0,i="[object object]"===Object.prototype.toString.call(e).toLowerCase(),n="[object null]"===Object.prototype.toString.call(e).toLowerCase(),r="[object undefined]"===Object.prototype.toString.call(e).toLowerCase(),o=this.cachedOptions.length-1;o>=0;o--){var s=this.cachedOptions[o],a=i?Object(D["getValueByPath"])(s.value,this.valueKey)===Object(D["getValueByPath"])(e,this.valueKey):s.value===e;if(a){t=s;break}}if(t)return t;var c=i||n||r?"":String(e),l={value:e,currentLabel:c};return this.multiple&&(l.hitState=!1),l},setSelected:function(){var e=this;if(!this.multiple){var t=this.getOption(this.value);return t.created?(this.createdLabel=t.currentLabel,this.createdSelected=!0):this.createdSelected=!1,this.selectedLabel=t.currentLabel,this.selected=t,void(this.filterable&&(this.query=this.selectedLabel))}var i=[];Array.isArray(this.value)&&this.value.forEach((function(t){i.push(e.getOption(t))})),this.selected=i,this.$nextTick((function(){e.resetInputHeight()}))},handleFocus:function(e){this.softFocus?this.softFocus=!1:((this.automaticDropdown||this.filterable)&&(this.visible=!0,this.filterable&&(this.menuVisibleOnFocus=!0)),this.$emit("focus",e))},blur:function(){this.visible=!1,this.$refs.reference.blur()},handleBlur:function(e){var t=this;setTimeout((function(){t.isSilentBlur?t.isSilentBlur=!1:t.$emit("blur",e)}),50),this.softFocus=!1},handleClearClick:function(e){this.deleteSelected(e)},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},toggleLastOptionHitState:function(e){if(Array.isArray(this.selected)){var t=this.selected[this.selected.length-1];if(t)return!0===e||!1===e?(t.hitState=e,e):(t.hitState=!t.hitState,t.hitState)}},deletePrevTag:function(e){if(e.target.value.length<=0&&!this.toggleLastOptionHitState()){var t=this.value.slice();t.pop(),this.$emit("input",t),this.emitChange(t)}},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(e){8!==e.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var e=this;this.collapseTags&&!this.filterable||this.$nextTick((function(){if(e.$refs.reference){var t=e.$refs.reference.$el.childNodes,i=[].filter.call(t,(function(e){return"INPUT"===e.tagName}))[0],n=e.$refs.tags,r=n?Math.round(n.getBoundingClientRect().height):0,o=e.initialInputHeight||40;i.style.height=0===e.selected.length?o+"px":Math.max(n?r+(r>o?6:0):0,o)+"px",e.visible&&!1!==e.emptyText&&e.broadcast("ElSelectDropdown","updatePopper")}}))},resetHoverIndex:function(){var e=this;setTimeout((function(){e.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map((function(t){return e.options.indexOf(t)}))):e.hoverIndex=-1:e.hoverIndex=e.options.indexOf(e.selected)}),300)},handleOptionSelect:function(e,t){var i=this;if(this.multiple){var n=(this.value||[]).slice(),r=this.getValueIndex(n,e.value);r>-1?n.splice(r,1):(this.multipleLimit<=0||n.length<this.multipleLimit)&&n.push(e.value),this.$emit("input",n),this.emitChange(n),e.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else this.$emit("input",e.value),this.emitChange(e.value),this.visible=!1;this.isSilentBlur=t,this.setSoftFocus(),this.visible||this.$nextTick((function(){i.scrollToOption(e)}))},setSoftFocus:function(){this.softFocus=!0;var e=this.$refs.input||this.$refs.reference;e&&e.focus()},getValueIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],i="[object object]"===Object.prototype.toString.call(t).toLowerCase();if(i){var n=this.valueKey,r=-1;return e.some((function(e,i){return Object(D["getValueByPath"])(e,n)===Object(D["getValueByPath"])(t,n)&&(r=i,!0)})),r}return e.indexOf(t)},toggleMenu:function(){this.selectDisabled||(this.menuVisibleOnFocus?this.menuVisibleOnFocus=!1:this.visible=!this.visible,this.visible&&(this.$refs.input||this.$refs.reference).focus())},selectOption:function(){this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu()},deleteSelected:function(e){e.stopPropagation();var t=this.multiple?[]:"";this.$emit("input",t),this.emitChange(t),this.visible=!1,this.$emit("clear")},deleteTag:function(e,t){var i=this.selected.indexOf(t);if(i>-1&&!this.selectDisabled){var n=this.value.slice();n.splice(i,1),this.$emit("input",n),this.emitChange(n),this.$emit("remove-tag",t.value)}e.stopPropagation()},onInputChange:function(){this.filterable&&this.query!==this.selectedLabel&&(this.query=this.selectedLabel,this.handleQueryChange(this.query))},onOptionDestroy:function(e){e>-1&&(this.optionsCount--,this.filteredOptionsCount--,this.options.splice(e,1))},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},checkDefaultFirstOption:function(){this.hoverIndex=-1;for(var e=!1,t=this.options.length-1;t>=0;t--)if(this.options[t].created){e=!0,this.hoverIndex=t;break}if(!e)for(var i=0;i!==this.options.length;++i){var n=this.options[i];if(this.query){if(!n.disabled&&!n.groupDisabled&&n.visible){this.hoverIndex=i;break}}else if(n.itemSelected){this.hoverIndex=i;break}}},getValueKey:function(e){return"[object object]"!==Object.prototype.toString.call(e.value).toLowerCase()?e.value:Object(D["getValueByPath"])(e.value,this.valueKey)}},created:function(){var e=this;this.cachedPlaceHolder=this.currentPlaceholder=this.propPlaceholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.debouncedOnInputChange=w()(this.debounce,(function(){e.onInputChange()})),this.debouncedQueryChange=w()(this.debounce,(function(t){e.handleQueryChange(t.target.value)})),this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){var e=this;this.multiple&&Array.isArray(this.value)&&this.value.length>0&&(this.currentPlaceholder=""),Object(N["addResizeListener"])(this.$el,this.handleResize);var t=this.$refs.reference;if(t&&t.$el){var i={medium:36,small:32,mini:28},n=t.$el.querySelector("input");this.initialInputHeight=n.getBoundingClientRect().height||i[this.selectSize]}this.remote&&this.multiple&&this.resetInputHeight(),this.$nextTick((function(){t&&t.$el&&(e.inputWidth=t.$el.getBoundingClientRect().width)})),this.setSelected()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(N["removeResizeListener"])(this.$el,this.handleResize)}},U=B,F=Object(E["a"])(U,n,r,!1,null,null,null);F.options.__file="packages/select/src/select.vue";var V=F.exports;V.install=function(e){e.component(V.name,V)};t["default"]=V}})},"4e71":function(e,t,i){i("e198")("observable")},"4ebc":function(e,t,i){var n=i("4d88");e.exports=Array.isArray||function(e){return"Array"==n(e)}},"4fad":function(e,t,i){var n=i("d039"),r=i("861d"),o=i("c6b6"),s=i("d86b"),a=Object.isExtensible,c=n((function(){a(1)}));e.exports=c||s?function(e){return!!r(e)&&((!s||"ArrayBuffer"!=o(e))&&(!a||a(e)))}:a},5087:function(e,t,i){var n=i("da84"),r=i("68ee"),o=i("0d51"),s=n.TypeError;e.exports=function(e){if(r(e))return e;throw s(o(e)+" is not a constructor")}},"50c4":function(e,t,i){var n=i("5926"),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},"511f":function(e,t,i){i("0b99"),i("658f"),e.exports=i("fcd4").f("iterator")},5128:function(e,t,i){"use strict";t.__esModule=!0,t.PopupManager=void 0;var n=i("2b0e"),r=h(n),o=i("7f4d"),s=h(o),a=i("4b26"),c=h(a),l=i("e62d"),u=h(l),d=i("5924");function h(e){return e&&e.__esModule?e:{default:e}}var p=1,f=void 0;t.default={props:{visible:{type:Boolean,default:!1},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},modalAppendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},beforeMount:function(){this._popupId="popup-"+p++,c.default.register(this._popupId,this)},beforeDestroy:function(){c.default.deregister(this._popupId),c.default.closeModal(this._popupId),this.restoreBodyStyle()},data:function(){return{opened:!1,bodyPaddingRight:null,computedBodyPaddingRight:0,withoutHiddenClass:!0,rendered:!1}},watch:{visible:function(e){var t=this;if(e){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,r.default.nextTick((function(){t.open()})))}else this.close()}},methods:{open:function(e){var t=this;this.rendered||(this.rendered=!0);var i=(0,s.default)({},this.$props||this,e);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);var n=Number(i.openDelay);n>0?this._openTimer=setTimeout((function(){t._openTimer=null,t.doOpen(i)}),n):this.doOpen(i)},doOpen:function(e){if(!this.$isServer&&(!this.willOpen||this.willOpen())&&!this.opened){this._opening=!0;var t=this.$el,i=e.modal,n=e.zIndex;if(n&&(c.default.zIndex=n),i&&(this._closing&&(c.default.closeModal(this._popupId),this._closing=!1),c.default.openModal(this._popupId,c.default.nextZIndex(),this.modalAppendToBody?void 0:t,e.modalClass,e.modalFade),e.lockScroll)){this.withoutHiddenClass=!(0,d.hasClass)(document.body,"el-popup-parent--hidden"),this.withoutHiddenClass&&(this.bodyPaddingRight=document.body.style.paddingRight,this.computedBodyPaddingRight=parseInt((0,d.getStyle)(document.body,"paddingRight"),10)),f=(0,u.default)();var r=document.documentElement.clientHeight<document.body.scrollHeight,o=(0,d.getStyle)(document.body,"overflowY");f>0&&(r||"scroll"===o)&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.computedBodyPaddingRight+f+"px"),(0,d.addClass)(document.body,"el-popup-parent--hidden")}"static"===getComputedStyle(t).position&&(t.style.position="absolute"),t.style.zIndex=c.default.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.doAfterOpen()}},doAfterOpen:function(){this._opening=!1},close:function(){var e=this;if(!this.willClose||this.willClose()){null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);var t=Number(this.closeDelay);t>0?this._closeTimer=setTimeout((function(){e._closeTimer=null,e.doClose()}),t):this.doClose()}},doClose:function(){this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose()},doAfterClose:function(){c.default.closeModal(this._popupId),this._closing=!1},restoreBodyStyle:function(){this.modal&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.bodyPaddingRight,(0,d.removeClass)(document.body,"el-popup-parent--hidden")),this.withoutHiddenClass=!0}}},t.PopupManager=c.default},"512c":function(e,t,i){var n=i("ef08"),r=i("5524"),o=i("9c0c"),s=i("051b"),a=i("9c0e"),c="prototype",l=function(e,t,i){var u,d,h,p=e&l.F,f=e&l.G,g=e&l.S,m=e&l.P,_=e&l.B,v=e&l.W,E=f?r:r[t]||(r[t]={}),A=E[c],y=f?n:g?n[t]:(n[t]||{})[c];for(u in f&&(i=t),i)d=!p&&y&&void 0!==y[u],d&&a(E,u)||(h=d?y[u]:i[u],E[u]=f&&"function"!=typeof y[u]?i[u]:_&&d?o(h,n):v&&y[u]==h?function(e){var t=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};return t[c]=e[c],t}(h):m&&"function"==typeof h?o(Function.call,h):h,m&&((E.virtual||(E.virtual={}))[u]=h,e&l.R&&A&&!A[u]&&s(A,u,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},"512ce":function(e,t,i){var n=i("342f"),r=n.match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},5270:function(e,t,i){"use strict";var n=i("c532"),r=i("c401"),o=i("2e67"),s=i("2444"),a=i("7a77");function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){c(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]}));var t=e.adapter||s.adapter;return t(e).then((function(t){return c(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},5319:function(e,t,i){"use strict";var n=i("2ba4"),r=i("c65b"),o=i("e330"),s=i("d784"),a=i("d039"),c=i("825a"),l=i("1626"),u=i("5926"),d=i("50c4"),h=i("577e"),p=i("1d80"),f=i("8aa5"),g=i("dc4a"),m=i("0cb2"),_=i("14c3"),v=i("b622"),E=v("replace"),A=Math.max,y=Math.min,S=o([].concat),C=o([].push),b=o("".indexOf),T=o("".slice),I=function(e){return void 0===e?e:String(e)},R=function(){return"$0"==="a".replace(/./,"$0")}(),w=function(){return!!/./[E]&&""===/./[E]("a","$0")}(),O=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));s("replace",(function(e,t,i){var o=w?"$":"$0";return[function(e,i){var n=p(this),o=void 0==e?void 0:g(e,E);return o?r(o,e,n,i):r(t,h(n),e,i)},function(e,r){var s=c(this),a=h(e);if("string"==typeof r&&-1===b(r,o)&&-1===b(r,"$<")){var p=i(t,s,a,r);if(p.done)return p.value}var g=l(r);g||(r=h(r));var v=s.global;if(v){var E=s.unicode;s.lastIndex=0}var R=[];while(1){var w=_(s,a);if(null===w)break;if(C(R,w),!v)break;var O=h(w[0]);""===O&&(s.lastIndex=f(a,d(s.lastIndex),E))}for(var k="",N=0,L=0;L<R.length;L++){w=R[L];for(var P=h(w[0]),D=A(y(u(w.index),a.length),0),M=[],x=1;x<w.length;x++)C(M,I(w[x]));var B=w.groups;if(g){var U=S([P],M,D,a);void 0!==B&&C(U,B);var F=h(n(r,void 0,U))}else F=m(P,a,D,M,B,r);D>=N&&(k+=T(a,N,D)+F,N=D+P.length)}return k+T(a,N)}]}),!O||!R||w)},5377:function(e,t,i){var n=i("83ab"),r=i("9bf2"),o=i("ad6d"),s=i("d039"),a=RegExp.prototype,c=n&&s((function(){return"sy"!==Object.getOwnPropertyDescriptor(a,"flags").get.call({dotAll:!0,sticky:!0})}));c&&r.f(a,"flags",{configurable:!0,get:o})},5488:function(e,t,i){"use strict";t.__esModule=!0;var n=i("5924");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){r(this,e)}return e.prototype.beforeEnter=function(e){(0,n.addClass)(e,"collapse-transition"),e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height="0",e.style.paddingTop=0,e.style.paddingBottom=0},e.prototype.enter=function(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?(e.style.height=e.scrollHeight+"px",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.height="",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},e.prototype.afterEnter=function(e){(0,n.removeClass)(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow},e.prototype.beforeLeave=function(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},e.prototype.leave=function(e){0!==e.scrollHeight&&((0,n.addClass)(e,"collapse-transition"),e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0)},e.prototype.afterLeave=function(e){(0,n.removeClass)(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom},e}();t.default={name:"ElCollapseTransition",functional:!0,render:function(e,t){var i=t.children,n={on:new o};return e("transition",n,i)}}},5524:function(e,t){var i=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=i)},5692:function(e,t,i){var n=i("c430"),r=i("c6cd");(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.3",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},"56ef":function(e,t,i){var n=i("d066"),r=i("e330"),o=i("241c"),s=i("7418"),a=i("825a"),c=r([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),i=s.f;return i?c(t,i(e)):t}},"577e":function(e,t,i){var n=i("da84"),r=i("f5df"),o=n.String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},5781:function(e,t,i){"use strict";(function(e){function i(e,t,i,n,r){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let n=!0,r=!0;function o(e,t,i){const n=e.match(t);return n&&n.length>=i&&parseInt(n[i],10)}function s(e,t,i){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,r=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return r.apply(this,arguments);const o=e=>{const t=i(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,o),r.apply(this,[e,o])};const o=n.removeEventListener;n.removeEventListener=function(e,i){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(i))return o.apply(this,arguments);const n=this._eventMap[t].get(i);return this._eventMap[t].delete(i),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function a(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function c(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function l(){if("object"==typeof window){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function u(e,t){r&&console.warn(e+" is deprecated, please use "+t+" instead.")}function d(e){return"[object Object]"===Object.prototype.toString.call(e)}function h(e){return d(e)?Object.keys(e).reduce((function(t,i){const n=d(e[i]),r=n?h(e[i]):e[i],o=n&&!Object.keys(r).length;return void 0===r||o?t:Object.assign(t,{[i]:r})}),{}):e}function p(e,t,i){const n=i?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;const o=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(t=>{e.forEach(i=>{i.type===n&&i.trackId===t.id&&function e(t,i,n){i&&!n.has(i.id)&&(n.set(i.id,i),Object.keys(i).forEach(r=>{r.endsWith("Id")?e(t,t.get(i[r]),n):r.endsWith("Ids")&&i[r].forEach(i=>{e(t,t.get(i),n)})}))}(e,i,r)})}),r}const f=l;function g(e,t){const i=e&&e.navigator;if(!i.mediaDevices)return;const n=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(i=>{if("require"===i||"advanced"===i||"mediaSource"===i)return;const n="object"==typeof e[i]?e[i]:{ideal:e[i]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);const r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];let e={};"number"==typeof n.ideal?(e[r("min",i)]=n.ideal,t.optional.push(e),e={},e[r("max",i)]=n.ideal,t.optional.push(e)):(e[r("",i)]=n.ideal,t.optional.push(e))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",i)]=n.exact):["min","max"].forEach(e=>{void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,i)]=n[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},r=function(e,r){if(t.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const s=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return i.mediaDevices.enumerateDevices().then(i=>{let s=(i=i.filter(e=>"videoinput"===e.kind)).find(e=>t.some(t=>e.label.toLowerCase().includes(t)));return!s&&i.length&&t.includes("back")&&(s=i[i.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=n(e.video),f("chrome: "+JSON.stringify(e)),r(e)})}e.video=n(e.video)}return f("chrome: "+JSON.stringify(e)),r(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(i.getUserMedia=function(e,t,n){r(e,e=>{i.webkitGetUserMedia(e,t,e=>{n&&n(o(e))})})}.bind(i),i.mediaDevices.getUserMedia){const e=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(t){return r(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(o(e))))}}}function m(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function _(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",i=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===i.track.id):{track:i.track};const r=new Event("track");r.track=i.track,r.receiver=n,r.transceiver={receiver:n},r.streams=[t.stream],this.dispatchEvent(r)}),t.stream.getTracks().forEach(i=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===i.id):{track:i};const r=new Event("track");r.track=i,r.receiver=n,r.transceiver={receiver:n},r.streams=[t.stream],this.dispatchEvent(r)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else s(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function v(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){let r=i.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function E(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,n]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const r=function(e){const t={};return e.result().forEach(e=>{const i={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{i[t]=e.stat(t)}),t[i.id]=i}),t},o=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};if(arguments.length>=2){const n=function(e){i(o(r(e)))};return t.apply(this,[n,e])}return new Promise((e,i)=>{t.apply(this,[function(t){e(o(r(t)))},i])}).then(i,n)}}function A(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>p(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),s(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>p(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,i,n;return this.getSenders().forEach(i=>{i.track===e&&(t?n=!0:t=i)}),this.getReceivers().forEach(t=>(t.track===e&&(i?n=!0:i=t),t.track===e)),n||t&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function y(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){if(!i)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const n=t.apply(this,arguments);return this._shimmedLocalStreams[i.id]?-1===this._shimmedLocalStreams[i.id].indexOf(n)&&this._shimmedLocalStreams[i.id].push(n):this._shimmedLocalStreams[i.id]=[i,n],n};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();i.apply(this,arguments);const n=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(n)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const i=this._shimmedLocalStreams[t].indexOf(e);-1!==i&&this._shimmedLocalStreams[t].splice(i,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),r.apply(this,arguments)}}function S(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return y(e);const i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=i.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}n.apply(this,[t])};const r=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(r.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:i})}function s(e,t){let i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(n.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:i})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,i){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const r=this.getSenders().find(e=>e.track===t);if(r)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[i.id];if(o)o.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const n=new e.MediaStream([t]);this._streams[i.id]=n,this._reverseStreams[n.id]=i,this.addStream(n)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(this,[t=>{const i=o(this,t);e[0].apply(null,[i])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):i.apply(this,arguments).then(e=>o(this,e))}};e.RTCPeerConnection.prototype[t]=n[t]}));const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=s(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=c.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(i=>{this._streams[i].getTracks().find(t=>e.track===t)&&(t=this._streams[i])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function C(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}))}function b(e,t){s(e,"negotiationneeded",e=>{const i=e.target;if(!(t.version<72||i.getConfiguration&&"plan-b"===i.getConfiguration().sdpSemantics)||"stable"===i.signalingState)return e})}var T=Object.freeze({__proto__:null,shimMediaStream:m,shimOnTrack:_,shimGetSendersWithDtmf:v,shimGetStats:E,shimSenderReceiverGetStats:A,shimAddTrackRemoveTrackWithNative:y,shimAddTrackRemoveTrack:S,shimPeerConnection:C,fixNegotiationNeeded:b,shimGetUserMedia:g,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(i){return t(i).then(t=>{const n=i.video&&i.video.width,r=i.video&&i.video.height,o=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},n&&(i.video.mandatory.maxWidth=n),r&&(i.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(i)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function R(e,t){return e(t={exports:{}},t.exports),t.exports}var w=R((function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var i=t.splitSections(e);return i&&i[0]},t.getMediaSections=function(e){var i=t.splitSections(e);return i.shift(),i},t.matchPrefix=function(e,i){return t.splitLines(e).filter((function(e){return 0===e.indexOf(i)}))},t.parseCandidate=function(e){for(var t,i={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":i.relatedAddress=t[n+1];break;case"rport":i.relatedPort=parseInt(t[n+1],10);break;case"tcptype":i.tcpType=t[n+1];break;case"ufrag":i.ufrag=t[n+1],i.usernameFragment=t[n+1];break;default:i[t[n]]=t[n+1]}return i},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),i={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.channels=3===t.length?parseInt(t[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var i=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==i?"/"+i:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,i={},n=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<n.length;r++)i[(t=n[r].trim().split("="))[0].trim()]=t[1];return i},t.writeFmtp=function(e){var t="",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)})),t+="a=fmtp:"+i+" "+n.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+i+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),i={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(i.attribute=e.substr(t+1,n-t-1),i.value=e.substr(n+1)):i.attribute=e.substr(t+1),i},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var i=t.matchPrefix(e,"a=mid:")[0];if(i)return i.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,i){return{role:"auto",fingerprints:t.matchPrefix(e+i,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var i="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){i+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),i},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,i){return t.matchPrefix(e+i,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,i){var n=t.matchPrefix(e+i,"a=ice-ufrag:")[0],r=t.matchPrefix(e+i,"a=ice-pwd:")[0];return n&&r?{usernameFragment:n.substr(12),password:r.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=t.splitLines(e)[0].split(" "),r=3;r<n.length;r++){var o=n[r],s=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=t.parseRtpMap(s),c=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?t.parseFmtp(c[0]):{},a.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),i.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(a.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){i.headerExtensions.push(t.parseExtmap(e))})),i},t.writeRtpDescription=function(e,i){var n="";n+="m="+e+" ",n+=i.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=i.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",i.codecs.forEach((function(e){n+=t.writeRtpMap(e),n+=t.writeFmtp(e),n+=t.writeRtcpFb(e)}));var r=0;return i.codecs.forEach((function(e){e.maxptime>r&&(r=e.maxptime)})),r>0&&(n+="a=maxptime:"+r+"\r\n"),n+="a=rtcp-mux\r\n",i.headerExtensions&&i.headerExtensions.forEach((function(e){n+=t.writeExtmap(e)})),n},t.parseRtpEncodingParameters=function(e){var i,n=[],r=t.parseRtpParameters(e),o=-1!==r.fecMechanisms.indexOf("RED"),s=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,l=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));l.length>0&&l[0].length>1&&l[0][0]===c&&(i=l[0][1]),r.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&i&&(t.rtx={ssrc:i}),n.push(t),o&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&c&&n.push({ssrc:c});var u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=u}))),n},t.parseRtcpParameters=function(e){var i={},n=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(i.cname=n.value,i.ssrc=n.ssrc);var r=t.matchPrefix(e,"a=rtcp-rsize");i.reducedSize=r.length>0,i.compound=0===r.length;var o=t.matchPrefix(e,"a=rtcp-mux");return i.mux=o.length>0,i},t.parseMsid=function(e){var i,n=t.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(i=n[0].substr(7).split(" "))[0],track:i[1]};var r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return r.length>0?{stream:(i=r[0].value.split(" "))[0],track:i[1]}:void 0},t.parseSctpDescription=function(e){var i,n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");r.length>0&&(i=parseInt(r[0].substr(19),10)),isNaN(i)&&(i=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:i};if(t.matchPrefix(e,"a=sctpmap:").length>0){var s=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){var i=[];return i="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&i.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,i,n){var r=void 0!==i?i:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,i,n,r){var o=t.writeRtpDescription(e.kind,i);if(o+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),o},t.getDirection=function(e,i){for(var n=t.splitLines(e),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return i?t.getDirection(i):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var i=t.splitLines(e)[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(e){var i=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var i=t.splitLines(e),n=0;n<i.length;n++)if(i[n].length<2||"="!==i[n].charAt(1))return!1;return!0},e.exports=t}));function O(e,t,i,n,r){var o=w.writeRtpDescription(e.kind,t);if(o+=w.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=w.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":r||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var a="msid:"+(n?n.id:"-")+" "+s+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+w.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+w.localCName+"\r\n"),o}function k(e,t){var i={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var i=0;i<t.length;i++)if(t[i].payloadType===e||t[i].preferredPayloadType===e)return t[i]},r=function(e,t,i,r){var o=n(e.parameters.apt,i),s=n(t.parameters.apt,r);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(n){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.clockRate===s.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.apt&&!r(n,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(n.numChannels,s.numChannels),i.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var r=t.headerExtensions[n];if(e.uri===r.uri){i.headerExtensions.push(r);break}}})),i}function N(e,t,i){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(i)}function L(e,t){var i=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return i||e.addRemoteCandidate(t),!i}function P(e,t){var i=new Error(t);return i.name=e,i.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],i}var D=function(e,t){function i(t,i){i.addTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function n(t,i,n,r){var o=new Event("track");o.track=i,o.receiver=n,o.transceiver={receiver:n},o.streams=r,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var r=function(i){var n=this,r=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){n[e]=r[e].bind(r)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",i=JSON.parse(JSON.stringify(i||{})),this.usingBundle="max-bundle"===i.bundlePolicy,"negotiate"===i.rtcpMuxPolicy)throw P("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(i.rtcpMuxPolicy||(i.rtcpMuxPolicy="require"),i.iceTransportPolicy){case"all":case"relay":break;default:i.iceTransportPolicy="all"}switch(i.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:i.bundlePolicy="balanced"}if(i.iceServers=function(e,t){var i=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var r="string"==typeof n;return r&&(n=[n]),n=n.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||i?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(i=!0,!0)})),delete e.url,e.urls=r?n[0]:n,!!n.length}}))}(i.iceServers||[],t),this._iceGatherers=[],i.iceCandidatePoolSize)for(var o=i.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:i.iceServers,gatherPolicy:i.iceTransportPolicy}));else i.iceCandidatePoolSize=0;this._config=i,this.transceivers=[],this._sdpSessionId=w.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(r.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(r.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),r.prototype.onicecandidate=null,r.prototype.onaddstream=null,r.prototype.ontrack=null,r.prototype.onremovestream=null,r.prototype.onsignalingstatechange=null,r.prototype.oniceconnectionstatechange=null,r.prototype.onconnectionstatechange=null,r.prototype.onicegatheringstatechange=null,r.prototype.onnegotiationneeded=null,r.prototype.ondatachannel=null,r.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},r.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},r.prototype.getConfiguration=function(){return this._config},r.prototype.getLocalStreams=function(){return this.localStreams},r.prototype.getRemoteStreams=function(){return this.remoteStreams},r.prototype._createTransceiver=function(e,t){var i=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&i)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var r=this._createIceAndDtlsTransports();n.iceTransport=r.iceTransport,n.dtlsTransport=r.dtlsTransport}return t||this.transceivers.push(n),n},r.prototype.addTrack=function(t,i){if(this._isClosed)throw P("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find((function(e){return e.track===t})))throw P("InvalidAccessError","Track already exists.");for(var r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==t.kind||(n=this.transceivers[r]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(i)&&this.localStreams.push(i),n.track=t,n.stream=i,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},r.prototype.addStream=function(e){var i=this;if(t>=15025)e.getTracks().forEach((function(t){i.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var i=n.getTracks()[t];e.addEventListener("enabled",(function(e){i.enabled=e.enabled}))})),n.getTracks().forEach((function(e){i.addTrack(e,n)}))}},r.prototype.removeTrack=function(t){if(this._isClosed)throw P("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var i=this.transceivers.find((function(e){return e.rtpSender===t}));if(!i)throw P("InvalidAccessError","Sender was not created by this connection.");var n=i.stream;i.rtpSender.stop(),i.rtpSender=null,i.track=null,i.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},r.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var i=t.getSenders().find((function(t){return t.track===e}));i&&t.removeTrack(i)}))},r.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},r.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},r.prototype._createIceGatherer=function(t,i){var n=this;if(i&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var r=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(r,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var i=!e.candidate||0===Object.keys(e.candidate).length;r.state=i?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},r.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),r},r.prototype._gather=function(t,i){var n=this,r=this.transceivers[i].iceGatherer;if(!r.onlocalcandidate){var o=this.transceivers[i].bufferedCandidateEvents;this.transceivers[i].bufferedCandidateEvents=null,r.removeEventListener("localcandidate",this.transceivers[i].bufferCandidates),r.onlocalcandidate=function(e){if(!(n.usingBundle&&i>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:i};var s=e.candidate,a=!s||0===Object.keys(s).length;if(a)"new"!==r.state&&"gathering"!==r.state||(r.state="completed");else{"new"===r.state&&(r.state="gathering"),s.component=1,s.ufrag=r.getLocalParameters().usernameFragment;var c=w.writeCandidate(s);o.candidate=Object.assign(o.candidate,w.parseCandidate(c)),o.candidate.candidate=c,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var l=w.getMediaSections(n._localDescription.sdp);l[o.candidate.sdpMLineIndex]+=a?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",n._localDescription.sdp=w.getDescription(n._localDescription.sdp)+l.join("");var u=n.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),a||n._dispatchEvent("icecandidate",o),u&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},e.setTimeout((function(){o.forEach((function(e){r.onlocalcandidate(e)}))}),0)}},r.prototype._createIceAndDtlsTransports=function(){var t=this,i=new e.RTCIceTransport(null);i.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(i);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:i,dtlsTransport:n}},r.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var i=this.transceivers[e].iceTransport;i&&(delete i.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},r.prototype._transceive=function(e,i,n){var r=k(e.localCapabilities,e.remoteCapabilities);i&&e.rtpSender&&(r.encodings=e.sendEncodingParameters,r.rtcp={cname:w.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(r.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(r)),n&&e.rtpReceiver&&r.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?r.encodings=e.recvEncodingParameters:r.encodings=[{}],r.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(r.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(r.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(r))},r.prototype.setLocalDescription=function(e){var t,i,n=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(P("TypeError",'Unsupported type "'+e.type+'"'));if(!N("setLocalDescription",e.type,n.signalingState)||n._isClosed)return Promise.reject(P("InvalidStateError","Can not set local "+e.type+" in state "+n.signalingState));if("offer"===e.type)t=w.splitSections(e.sdp),i=t.shift(),t.forEach((function(e,t){var i=w.parseRtpParameters(e);n.transceivers[t].localCapabilities=i})),n.transceivers.forEach((function(e,t){n._gather(e.mid,t)}));else if("answer"===e.type){t=w.splitSections(n._remoteDescription.sdp),i=t.shift();var r=w.matchPrefix(i,"a=ice-lite").length>0;t.forEach((function(e,t){var o=n.transceivers[t],s=o.iceGatherer,a=o.iceTransport,c=o.dtlsTransport,l=o.localCapabilities,u=o.remoteCapabilities;if((!w.isRejected(e)||0!==w.matchPrefix(e,"a=bundle-only").length)&&!o.rejected){var d=w.getIceParameters(e,i),h=w.getDtlsParameters(e,i);r&&(h.role="server"),n.usingBundle&&0!==t||(n._gather(o.mid,t),"new"===a.state&&a.start(s,d,r?"controlling":"controlled"),"new"===c.state&&c.start(h));var p=k(l,u);n._transceive(o,p.codecs.length>0,!1)}}))}return n._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?n._updateSignalingState("have-local-offer"):n._updateSignalingState("stable"),Promise.resolve()},r.prototype.setRemoteDescription=function(r){var o=this;if(-1===["offer","answer"].indexOf(r.type))return Promise.reject(P("TypeError",'Unsupported type "'+r.type+'"'));if(!N("setRemoteDescription",r.type,o.signalingState)||o._isClosed)return Promise.reject(P("InvalidStateError","Can not set remote "+r.type+" in state "+o.signalingState));var s={};o.remoteStreams.forEach((function(e){s[e.id]=e}));var a=[],c=w.splitSections(r.sdp),l=c.shift(),u=w.matchPrefix(l,"a=ice-lite").length>0,d=w.matchPrefix(l,"a=group:BUNDLE ").length>0;o.usingBundle=d;var h=w.matchPrefix(l,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!h&&h.substr(14).split(" ").indexOf("trickle")>=0,c.forEach((function(n,c){var h=w.splitLines(n),p=w.getKind(n),f=w.isRejected(n)&&0===w.matchPrefix(n,"a=bundle-only").length,g=h[0].substr(2).split(" ")[2],m=w.getDirection(n,l),_=w.parseMsid(n),v=w.getMid(n)||w.generateIdentifier();if(f||"application"===p&&("DTLS/SCTP"===g||"UDP/DTLS/SCTP"===g))o.transceivers[c]={mid:v,kind:p,protocol:g,rejected:!0};else{var E,A,y,S,C,b,T,I,R;!f&&o.transceivers[c]&&o.transceivers[c].rejected&&(o.transceivers[c]=o._createTransceiver(p,!0));var O,N,P=w.parseRtpParameters(n);f||(O=w.getIceParameters(n,l),(N=w.getDtlsParameters(n,l)).role="client"),T=w.parseRtpEncodingParameters(n);var D=w.parseRtcpParameters(n),M=w.matchPrefix(n,"a=end-of-candidates",l).length>0,x=w.matchPrefix(n,"a=candidate:").map((function(e){return w.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===r.type||"answer"===r.type)&&!f&&d&&c>0&&o.transceivers[c]&&(o._disposeIceAndDtlsTransports(c),o.transceivers[c].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[c].iceTransport=o.transceivers[0].iceTransport,o.transceivers[c].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[c].rtpSender&&o.transceivers[c].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[c].rtpReceiver&&o.transceivers[c].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==r.type||f)"answer"!==r.type||f||(A=(E=o.transceivers[c]).iceGatherer,y=E.iceTransport,S=E.dtlsTransport,C=E.rtpReceiver,b=E.sendEncodingParameters,I=E.localCapabilities,o.transceivers[c].recvEncodingParameters=T,o.transceivers[c].remoteCapabilities=P,o.transceivers[c].rtcpParameters=D,x.length&&"new"===y.state&&(!u&&!M||d&&0!==c?x.forEach((function(e){L(E.iceTransport,e)})):y.setRemoteCandidates(x)),d&&0!==c||("new"===y.state&&y.start(A,O,"controlling"),"new"===S.state&&S.start(N)),!k(E.localCapabilities,E.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&E.sendEncodingParameters[0].rtx&&delete E.sendEncodingParameters[0].rtx,o._transceive(E,"sendrecv"===m||"recvonly"===m,"sendrecv"===m||"sendonly"===m),!C||"sendrecv"!==m&&"sendonly"!==m?delete E.rtpReceiver:(R=C.track,_?(s[_.stream]||(s[_.stream]=new e.MediaStream),i(R,s[_.stream]),a.push([R,C,s[_.stream]])):(s.default||(s.default=new e.MediaStream),i(R,s.default),a.push([R,C,s.default]))));else{(E=o.transceivers[c]||o._createTransceiver(p)).mid=v,E.iceGatherer||(E.iceGatherer=o._createIceGatherer(c,d)),x.length&&"new"===E.iceTransport.state&&(!M||d&&0!==c?x.forEach((function(e){L(E.iceTransport,e)})):E.iceTransport.setRemoteCandidates(x)),I=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(I.codecs=I.codecs.filter((function(e){return"rtx"!==e.name}))),b=E.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var B,U=!1;"sendrecv"===m||"sendonly"===m?(U=!E.rtpReceiver,C=E.rtpReceiver||new e.RTCRtpReceiver(E.dtlsTransport,p),U&&(R=C.track,_&&"-"===_.stream||(_?(s[_.stream]||(s[_.stream]=new e.MediaStream,Object.defineProperty(s[_.stream],"id",{get:function(){return _.stream}})),Object.defineProperty(R,"id",{get:function(){return _.track}}),B=s[_.stream]):(s.default||(s.default=new e.MediaStream),B=s.default)),B&&(i(R,B),E.associatedRemoteMediaStreams.push(B)),a.push([R,C,B]))):E.rtpReceiver&&E.rtpReceiver.track&&(E.associatedRemoteMediaStreams.forEach((function(t){var i=t.getTracks().find((function(e){return e.id===E.rtpReceiver.track.id}));i&&function(t,i){i.removeTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(i,t)})),E.associatedRemoteMediaStreams=[]),E.localCapabilities=I,E.remoteCapabilities=P,E.rtpReceiver=C,E.rtcpParameters=D,E.sendEncodingParameters=b,E.recvEncodingParameters=T,o._transceive(o.transceivers[c],!1,U)}}})),void 0===o._dtlsRole&&(o._dtlsRole="offer"===r.type?"active":"passive"),o._remoteDescription={type:r.type,sdp:r.sdp},"offer"===r.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(s).forEach((function(t){var i=s[t];if(i.getTracks().length){if(-1===o.remoteStreams.indexOf(i)){o.remoteStreams.push(i);var r=new Event("addstream");r.stream=i,e.setTimeout((function(){o._dispatchEvent("addstream",r)}))}a.forEach((function(e){var t=e[0],r=e[1];i.id===e[2].id&&n(o,t,r,[i])}))}})),a.forEach((function(e){e[2]||n(o,e[0],e[1],[])})),e.setTimeout((function(){o&&o.transceivers&&o.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},r.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},r.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},r.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},r.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var i=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",i)}},r.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var i=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",i)}},r.prototype.createOffer=function(){var i=this;if(i._isClosed)return Promise.reject(P("InvalidStateError","Can not call createOffer after close"));var n=i.transceivers.filter((function(e){return"audio"===e.kind})).length,r=i.transceivers.filter((function(e){return"video"===e.kind})).length,o=arguments[0];if(o){if(o.mandatory||o.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==o.offerToReceiveAudio&&(n=!0===o.offerToReceiveAudio?1:!1===o.offerToReceiveAudio?0:o.offerToReceiveAudio),void 0!==o.offerToReceiveVideo&&(r=!0===o.offerToReceiveVideo?1:!1===o.offerToReceiveVideo?0:o.offerToReceiveVideo)}for(i.transceivers.forEach((function(e){"audio"===e.kind?--n<0&&(e.wantReceive=!1):"video"===e.kind&&--r<0&&(e.wantReceive=!1)}));n>0||r>0;)n>0&&(i._createTransceiver("audio"),n--),r>0&&(i._createTransceiver("video"),r--);var s=w.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.transceivers.forEach((function(n,r){var o=n.track,s=n.kind,a=n.mid||w.generateIdentifier();n.mid=a,n.iceGatherer||(n.iceGatherer=i._createIceGatherer(r,i.usingBundle));var c=e.RTCRtpSender.getCapabilities(s);t<15019&&(c.codecs=c.codecs.filter((function(e){return"rtx"!==e.name}))),c.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),n.remoteCapabilities&&n.remoteCapabilities.codecs&&n.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(n.remoteCapabilities&&n.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=n.sendEncodingParameters||[{ssrc:1001*(2*r+1)}];o&&t>=15019&&"video"===s&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),n.wantReceive&&(n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,s)),n.localCapabilities=c,n.sendEncodingParameters=l})),"max-compat"!==i._config.bundlePolicy&&(s+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n",i.transceivers.forEach((function(e,t){s+=O(e,e.localCapabilities,"offer",e.stream,i._dtlsRole),s+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===i.iceGatheringState||0!==t&&i.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,s+="a="+w.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(s+="a=end-of-candidates\r\n"))}));var a=new e.RTCSessionDescription({type:"offer",sdp:s});return Promise.resolve(a)},r.prototype.createAnswer=function(){var i=this;if(i._isClosed)return Promise.reject(P("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==i.signalingState&&"have-local-pranswer"!==i.signalingState)return Promise.reject(P("InvalidStateError","Can not call createAnswer in signalingState "+i.signalingState));var n=w.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.usingBundle&&(n+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),n+="a=ice-options:trickle\r\n";var r=w.getMediaSections(i._remoteDescription.sdp).length;i.transceivers.forEach((function(e,o){if(!(o+1>r)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?n+="m=application 0 DTLS/SCTP 5000\r\n":n+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?n+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(n+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(n+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var s;e.stream&&("audio"===e.kind?s=e.stream.getAudioTracks()[0]:"video"===e.kind&&(s=e.stream.getVideoTracks()[0]),s&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var a=k(e.localCapabilities,e.remoteCapabilities);!a.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=O(e,a,"answer",e.stream,i._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+="a=rtcp-rsize\r\n")}}));var o=new e.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(o)},r.prototype.addIceCandidate=function(e){var t,i=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(n,r){if(!i._remoteDescription)return r(P("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var s=0;s<i.transceivers.length;s++)if(i.transceivers[s].mid===e.sdpMid){o=s;break}var a=i.transceivers[o];if(!a)return r(P("OperationError","Can not add ICE candidate"));if(a.rejected)return n();var c=Object.keys(e.candidate).length>0?w.parseCandidate(e.candidate):{};if("tcp"===c.protocol&&(0===c.port||9===c.port))return n();if(c.component&&1!==c.component)return n();if((0===o||o>0&&a.iceTransport!==i.transceivers[0].iceTransport)&&!L(a.iceTransport,c))return r(P("OperationError","Can not add ICE candidate"));var l=e.candidate.trim();0===l.indexOf("a=")&&(l=l.substr(2)),(t=w.getMediaSections(i._remoteDescription.sdp))[o]+="a="+(c.type?l:"end-of-candidates")+"\r\n",i._remoteDescription.sdp=w.getDescription(i._remoteDescription.sdp)+t.join("")}else for(var u=0;u<i.transceivers.length&&(i.transceivers[u].rejected||(i.transceivers[u].iceTransport.addRemoteCandidate({}),(t=w.getMediaSections(i._remoteDescription.sdp))[u]+="a=end-of-candidates\r\n",i._remoteDescription.sdp=w.getDescription(i._remoteDescription.sdp)+t.join(""),!i.usingBundle));u++);n()}))},r.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var i=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?i=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(i=e.rtpReceiver)})),!i)throw P("InvalidAccessError","Invalid selector.");return i.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var i=e[t];if(i&&i.prototype&&i.prototype.getStats){var n=i.prototype.getStats;i.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(i){var n;e[i].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[i]).type]||n.type,t.set(i,e[i])})),t}))}}}));var o=["createOffer","createAnswer"];return o.forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(o=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),r};function M(e){const t=e&&e.navigator,i=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e).catch(e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function x(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function B(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const i=new Event("enabled");i.enabled=e,this.dispatchEvent(i)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const i=D(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let i=!1;return(e=JSON.parse(JSON.stringify(e))).filter(e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&u("RTCIceServer.url","RTCIceServer.urls");const n="string"==typeof t;return n&&(t=[t]),t=t.filter(e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!i?(i=!0,!0):t&&!i}),delete e.url,e.urls=n?t[0]:t,!!t.length}})}(e.iceServers,t.version),l("ICE servers after filtering:",e.iceServers)),new i(e)},e.RTCPeerConnection.prototype=i.prototype}function U(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var F=Object.freeze({__proto__:null,shimPeerConnection:B,shimReplaceTrack:U,shimGetUserMedia:M,shimGetDisplayMedia:x});function V(e,t){const i=e&&e.navigator,n=e&&e.MediaStreamTrack;if(i.getUserMedia=function(e,t,n){u("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const e=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},t=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(i){return"object"==typeof i&&"object"==typeof i.audio&&(i=JSON.parse(JSON.stringify(i)),e(i.audio,"autoGainControl","mozAutoGainControl"),e(i.audio,"noiseSuppression","mozNoiseSuppression")),t(i)},n&&n.prototype.getSettings){const t=n.prototype.getSettings;n.prototype.getSettings=function(){const i=t.apply(this,arguments);return e(i,"mozAutoGainControl","autoGainControl"),e(i,"mozNoiseSuppression","noiseSuppression"),i}}if(n&&n.prototype.applyConstraints){const t=n.prototype.applyConstraints;n.prototype.applyConstraints=function(i){return"audio"===this.kind&&"object"==typeof i&&(i=JSON.parse(JSON.stringify(i)),e(i,"autoGainControl","mozAutoGainControl"),e(i,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[i])}}}}function j(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function G(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}));const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,o]=arguments;return n.apply(this,[e||null]).then(e=>{if(t.version<53&&!r)try{e.forEach(e=>{e.type=i[e.type]||e.type})}catch(n){if("TypeError"!==n.name)throw n;e.forEach((t,n)=>{e.set(n,Object.assign({},t,{type:i[t.type]||t.type}))})}return e}).then(r,o)}}function H(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Q(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),s(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function W(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){u("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function q(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function $(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],i=e&&"sendEncodings"in e;i&&e.sendEncodings.forEach(e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const n=t.apply(this,arguments);if(i){const{sender:t}=n,i=t.getParameters();(!("encodings"in i)||1===i.encodings.length&&0===Object.keys(i.encodings[0]).length)&&(i.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(i).then(()=>{delete t.sendEncodings}).catch(()=>{delete t.sendEncodings})))}return n})}function z(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Z(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Y(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var K=Object.freeze({__proto__:null,shimOnTrack:j,shimPeerConnection:G,shimSenderGetStats:H,shimReceiverGetStats:Q,shimRemoveStream:W,shimRTCDataChannel:q,shimAddTransceiver:$,shimGetParameters:z,shimCreateOffer:Z,shimCreateAnswer:Y,shimGetUserMedia:V,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===i.video?i.video={mediaSource:t}:i.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(i)})}});function J(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(i=>t.call(this,i,e)),e.getVideoTracks().forEach(i=>t.call(this,i,e))},e.RTCPeerConnection.prototype.addTrack=function(e,...i){return i&&i.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const i=e.getTracks();this.getSenders().forEach(e=>{i.includes(e.track)&&this.removeTrack(e)})})}}function X(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const i=new Event("addstream");i.stream=t,e.dispatchEvent(i)})}),t.apply(e,arguments)}}}function ee(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,i=t.createOffer,n=t.createAnswer,r=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r};let a=function(e,t,i){const n=r.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n};t.setLocalDescription=a,a=function(e,t,i){const n=o.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.setRemoteDescription=a,a=function(e,t,i){const n=s.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.addIceCandidate=a}function te(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,i=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>i(ie(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,i,n){t.mediaDevices.getUserMedia(e).then(i,n)}.bind(t))}function ie(e){return e&&void 0!==e.video?Object.assign({},e,{video:h(e.video)}):e}function ne(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){const t=[];for(let i=0;i<e.iceServers.length;i++){let n=e.iceServers[i];!n.hasOwnProperty("urls")&&n.hasOwnProperty("url")?(u("RTCIceServer.url","RTCIceServer.urls"),n=JSON.parse(JSON.stringify(n)),n.urls=n.url,delete n.url,t.push(n)):t.push(e.iceServers[i])}e.iceServers=t}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function re(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function oe(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const i=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveVideo||i||this.addTransceiver("video")}return t.apply(this,arguments)}}function se(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var ae=Object.freeze({__proto__:null,shimLocalStreamsAPI:J,shimRemoteStreamsAPI:X,shimCallbacksAPI:ee,shimGetUserMedia:te,shimConstraints:ie,shimRTCIceServerUrls:ne,shimTrackEventTransceiver:re,shimCreateOfferLegacy:oe,shimAudioContext:se});function ce(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const i=new t(e),n=w.parseCandidate(e.candidate),r=Object.assign(i,n);return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,s(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function le(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const i=function(e){if(!e||!e.sdp)return!1;const t=w.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=w.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},n=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const i=parseInt(t[1],10);return i!=i?-1:i},r=function(e){let i=65536;return"firefox"===t.browser&&(i=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),i},o=function(e,i){let n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);const r=w.matchPrefix(e.sdp,"a=max-message-size:");return r.length>0?n=parseInt(r[0].substr(19),10):"firefox"===t.browser&&-1!==i&&(n=2147483637),n},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const e=n(arguments[0]),t=r(e),i=o(arguments[0],e);let s;s=0===t&&0===i?Number.POSITIVE_INFINITY:0===t||0===i?Math.max(t,i):Math.min(t,i);const a={};Object.defineProperty(a,"maxMessageSize",{get:()=>s}),this._sctp=a}return s.apply(this,arguments)}}function ue(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const i=e.send;e.send=function(){const n=arguments[0],r=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return i.apply(e,arguments)}}const i=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=i.apply(this,arguments);return t(e,this),e},s(e,"datachannel",e=>(t(e.channel,e.target),e))}function de(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const i=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const i=new Event("connectionstatechange",e);t.dispatchEvent(i)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function he(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const i=t.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:i}):t.sdp=i}return i.apply(this,arguments)}}function pe(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype.addIceCandidate;i&&0!==i.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var fe=Object.freeze({__proto__:null,shimRTCIceCandidate:ce,shimMaxMessageSize:le,shimSendThrowTypeError:ue,shimConnectionState:de,removeExtmapAllowMixed:he,shimAddIceCandidateNullOrEmpty:pe});!function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const i=l,n=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:i}=e;if(i.mozGetUserMedia)t.browser="firefox",t.version=o(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=o(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(i.mediaDevices&&i.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=o(i.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=o(i.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),r={browserDetails:n,commonShim:fe,extractVersion:o,disableLog:a,disableWarnings:c};switch(n.browser){case"chrome":if(!T||!C||!t.shimChrome)return i("Chrome shim is not included in this adapter release."),r;if(null===n.version)return i("Chrome shim can not determine version, not shimming."),r;i("adapter.js shimming chrome."),r.browserShim=T,pe(e,n),g(e,n),m(e),C(e,n),_(e),S(e,n),v(e),E(e),A(e),b(e,n),ce(e),de(e),le(e,n),ue(e),he(e,n);break;case"firefox":if(!K||!G||!t.shimFirefox)return i("Firefox shim is not included in this adapter release."),r;i("adapter.js shimming firefox."),r.browserShim=K,pe(e,n),V(e,n),G(e,n),j(e),W(e),H(e),Q(e),q(e),$(e),z(e),Z(e),Y(e),ce(e),de(e),le(e,n),ue(e);break;case"edge":if(!F||!B||!t.shimEdge)return i("MS edge shim is not included in this adapter release."),r;i("adapter.js shimming edge."),r.browserShim=F,M(e),x(e),B(e,n),U(e),le(e,n),ue(e);break;case"safari":if(!ae||!t.shimSafari)return i("Safari shim is not included in this adapter release."),r;i("adapter.js shimming safari."),r.browserShim=ae,pe(e,n),ne(e),oe(e),ee(e),J(e),X(e),re(e),te(e),se(e),ce(e),le(e,n),ue(e),he(e,n);break;default:i("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});let ge=(new Date).getTime(),me=0;const _e=function(){return(new Date).getTime()+me},ve=function(){const e=new Date;return e.setTime(_e()),e.toLocaleString()},Ee=window.navigator&&window.navigator.userAgent||"",Ae=/AppleWebKit\/([\d.]+)/i.exec(Ee),ye=(Ae&&parseFloat(Ae.pop()),/iPad/i.test(Ee)),Se=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/Macintosh/.test(Ee),Ce=/iPhone/i.test(Ee)&&!ye,be=/iPod/i.test(Ee),Te=Ce||ye||be||Se,Ie=/Android/i.test(Ee),Re=(Ie&&function(){const e=Ee.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);t&&i&&parseFloat(e[1]+"."+e[2])}(),Ie&&/webkit/i.test(Ee),/Firefox/i.test(Ee)),we=Re&&function(){const e=Ee.match(/Firefox\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),Oe=/Edge\//i.test(Ee),ke=Oe&&function(){var e=Ee.match(/Edge\/(\d+)/i);if(e&&e[1])return e[1]}(),Ne=/Edg\//i.test(Ee),Le=Ne&&function(){const e=Ee.match(/Edg\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),Pe=/SogouMobileBrowser\//i.test(Ee),De=Pe&&function(){const e=Ee.match(/SogouMobileBrowser\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),Me=/MetaSr\s/i.test(Ee),xe=Me&&function(){const e=Ee.match(/MetaSr(\s\d+(\.\d+)+)/);return e&&e[1]?parseFloat(e[1]):null}(),Be=/TBS\/\d+/i.test(Ee),Ue=Be&&function(){var e=Ee.match(/TBS\/(\d+)/i);if(e&&e[1])return e[1]}(),Fe=/XWEB\/\d+/i.test(Ee),Ve=Fe&&function(){var e=Ee.match(/XWEB\/(\d+)/i);if(e&&e[1])return e[1]}(),je=(/MSIE\s8\.0/.test(Ee),/MSIE\/\d+/i.test(Ee)&&function(){const e=/MSIE\s(\d+)\.\d/.exec(Ee);let t=e&&parseFloat(e[1]);!t&&/Trident\/7.0/i.test(Ee)&&/rv:11.0/.test(Ee)&&(t=11)}(),/(micromessenger|webbrowser)/i.test(Ee)),Ge=je&&function(){var e=Ee.match(/MicroMessenger\/(\d+)/i);if(e&&e[1])return e[1]}(),He=!Be&&/MQQBrowser\/\d+/i.test(Ee)&&/COVC\/\d+/i.test(Ee),Qe=!Be&&/MQQBrowser\/\d+/i.test(Ee)&&!/COVC\/\d+/i.test(Ee),We=(Qe||He)&&function(){const e=Ee.match(/ MQQBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),qe=!Be&&/ QQBrowser\/\d+/i.test(Ee),$e=qe&&function(){const e=Ee.match(/ QQBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),ze=!Be&&/QQBrowserLite\/\d+/i.test(Ee),Ze=ze&&function(){const e=Ee.match(/QQBrowserLite\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Ye=!Be&&/MQBHD\/\d+/i.test(Ee),Ke=Ye&&function(){const e=Ee.match(/MQBHD\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Je=/Windows/i.test(Ee),Xe=!Te&&/MAC OS X/i.test(Ee),et=!Ie&&/Linux/i.test(Ee),tt=(/MicroMessenger/i.test(Ee),/UCBrowser/i.test(Ee)),it=(/Electron/i.test(Ee),/MiuiBrowser/i.test(Ee)),nt=it&&function(){const e=Ee.match(/MiuiBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),rt=/HuaweiBrowser/i.test(Ee),ot=/Huawei/i.test(Ee),st=rt&&function(){const e=Ee.match(/HuaweiBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),at=/SamsungBrowser/i.test(Ee),ct=at&&function(){const e=Ee.match(/SamsungBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),lt=/HeyTapBrowser/i.test(Ee),ut=lt&&function(){const e=Ee.match(/HeyTapBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),dt=/VivoBrowser/i.test(Ee),ht=dt&&function(){const e=Ee.match(/VivoBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),pt=()=>{const e=Ee.match(/Chrome\/(\d+)/);return e&&e[1]?Number(e[1]):null},ft=/Chrome/i.test(Ee),gt=!Oe&&!Me&&!Pe&&!Be&&!Fe&&!Ne&&!qe&&!it&&!rt&&!at&&!lt&&!dt&&/Chrome/i.test(Ee),mt=gt&&pt(),_t=gt&&function(){const e=Ee.match(/Chrome\/([\d.]+)/);return e&&e[1]?e[1]:null}(),vt=!ft&&!Qe&&!He&&!ze&&!Ye&&/Safari/i.test(Ee),Et=vt&&function(){const e=Ee.match(/Version\/([\d.]+)/);return e&&e[1]?e[1]:null}(),At=/Android.*(wv|.0.0.0)/.test(Ee),yt=gt?"Chrome/"+_t:vt?"Safari/"+Et:"NotSupportedBrowser",St="15.1"===(()=>{if(Se)return Et;if(Te){const e=Ee.match(/OS (\d+)_(\d+)/i);if(e&&e[1]){let t=e[1];return e[2]&&(t+="."+e[2]),t}}return null})(),Ct="file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname,bt=(()=>{let e;return()=>{if(Pr(e))try{e=window.localStorage}catch(n){Uo.warn(n),e=!1}return e}})(),Tt=new Map([[Re,["Firefox",we]],[Ne,["Edg",Le]],[gt,["Chrome",_t]],[vt,["Safari",Et]],[Be,["TBS",Ue]],[Fe,["XWEB",Ve]],[je&&Ce,["WeChat",Ge]],[qe,["QQ(Win)",$e]],[Qe,["QQ(Mobile)",We]],[He,["QQ(Mobile X5)",We]],[ze,["QQ(Mac)",Ze]],[Ye,["QQ(iPad)",Ke]],[it,["MI",nt]],[rt,["HW",st]],[at,["Samsung",ct]],[lt,["OPPO",ut]],[dt,["VIVO",ht]],[Oe,["EDGE",ke]],[Pe,["SogouMobile",De]],[Me,["Sogou",xe]]]);function It(){let e="unknown",t="unknown";return Tt.get(!0)&&(e=Tt.get(!0)[0],t=Tt.get(!0)[1]),{name:e,version:t}}const Rt="wss://qcloud.rtc.qq.com",wt="wss://bk.rtc.qq.com",Ot="wss://trtc.rtc.qq.com",kt="wss://webrtc.qq.com",Nt="qcloud",Lt="trtc",Pt="webrtc";let Dt="";const Mt=e=>Dt=e,xt=1,Bt=2,Ut=20,Ft=21,Vt="5Y2wZK8nANNAoVw6dSAHVjNxrD1ObBM2kBPV",jt="224d130c-7b5c-415b-aaa2-79c2eb5a6df2",Gt=2,Ht="DISCONNECTED",Qt="CONNECTING",Wt="RECONNECTING",qt="CONNECTED",$t="new",zt="connecting",Zt="failed",Yt="closed",Kt="disconnected",Jt="connected",Xt="completed",ei="join",ti="delta-join",ii="rejoin",ni="leave",ri="delta-leave",oi="publish",si="delta-publish",ai="unpublish",ci="subscribe",li="unsubscribe",ui="uplink-connection",di="uplink-reconnection",hi="downlink-connection",pi="downlink-reconnection",fi="setLocalDescription",gi="setRemoteDescription",mi="iceConnectionState",_i="stream-initialize",vi="websocketConnectionState",Ei="websocketReconnectionState",Ai="update-stream",yi="recover-subscription",Si="start-mix-transcode",Ci="stop-mix-transcode",bi="player-error",Ti="unsubscribe",Ii="subscribe_change",Ri={MANUAL:"manual",PRESET_LAYOUT:"preset-layout"},wi={REMOTE:"$PLACE_HOLDER_REMOTE$"},Oi={IT_AUDIO_VIDEO:0,IT_PICTURE:2,IT_CANVAS:3,IT_PURE_AUDIO:4,IT_PURE_VIDEO:5},ki="string",Ni="number",Li="boolean",Pi="array",Di="object",Mi="canvas",xi="audio",Bi="video",Ui="auxiliary",Fi="user",Vi="environment",ji="mute",Gi="unmute",Hi="ended",Qi="playing",Wi="pause",qi="error",$i="loadeddata",zi="audioinput",Zi="videoinput",Yi="detail",Ki="text",Ji="add",Xi="remove",en={unknown:0,wifi:1,"3g":2,"2g":3,"4g":4,wired:5},tn=-1,nn=0,rn=1,on="TRTC",sn="Client",an="LocalStream",cn="RemoteStream",ln="Stream",un="https://web.sdk.qcloud.com/trtc/webrtc/doc",dn=un+"/zh-cn/",hn={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,NONE:5},pn=Object.keys(hn);var fn=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}},gn=Object.prototype.toString;function mn(e){return"[object Array]"===gn.call(e)}function _n(e){return void 0===e}function vn(e){return null!==e&&"object"==typeof e}function En(e){return"[object Function]"===gn.call(e)}function An(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),mn(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var yn={isArray:mn,isArrayBuffer:function(e){return"[object ArrayBuffer]"===gn.call(e)},isBuffer:function(e){return null!==e&&!_n(e)&&null!==e.constructor&&!_n(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:vn,isUndefined:_n,isDate:function(e){return"[object Date]"===gn.call(e)},isFile:function(e){return"[object File]"===gn.call(e)},isBlob:function(e){return"[object Blob]"===gn.call(e)},isFunction:En,isStream:function(e){return vn(e)&&En(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:An,merge:function e(){var t={};function i(i,n){"object"==typeof t[n]&&"object"==typeof i?t[n]=e(t[n],i):t[n]=i}for(var n=0,r=arguments.length;n<r;n++)An(arguments[n],i);return t},deepMerge:function e(){var t={};function i(i,n){"object"==typeof t[n]&&"object"==typeof i?t[n]=e(t[n],i):t[n]="object"==typeof i?e({},i):i}for(var n=0,r=arguments.length;n<r;n++)An(arguments[n],i);return t},extend:function(e,t,i){return An(t,(function(t,n){e[n]=i&&"function"==typeof t?fn(t,i):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function Sn(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Cn=function(e,t,i){if(!t)return e;var n;if(i)n=i(t);else if(yn.isURLSearchParams(t))n=t.toString();else{var r=[];yn.forEach(t,(function(e,t){null!=e&&(yn.isArray(e)?t+="[]":e=[e],yn.forEach(e,(function(e){yn.isDate(e)?e=e.toISOString():yn.isObject(e)&&(e=JSON.stringify(e)),r.push(Sn(t)+"="+Sn(e))})))})),n=r.join("&")}if(n){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e};function bn(){this.handlers=[]}bn.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},bn.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},bn.prototype.forEach=function(e){yn.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var Tn=bn,In=function(e,t,i){return yn.forEach(i,(function(i){e=i(e,t)})),e},Rn=function(e){return!(!e||!e.__CANCEL__)},wn="undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function On(){throw new Error("setTimeout has not been defined")}function kn(){throw new Error("clearTimeout has not been defined")}var Nn=On,Ln=kn;function Pn(e){if(Nn===setTimeout)return setTimeout(e,0);if((Nn===On||!Nn)&&setTimeout)return Nn=setTimeout,setTimeout(e,0);try{return Nn(e,0)}catch(n){try{return Nn.call(null,e,0)}catch(n){return Nn.call(this,e,0)}}}"function"==typeof wn.setTimeout&&(Nn=setTimeout),"function"==typeof wn.clearTimeout&&(Ln=clearTimeout);var Dn,Mn=[],xn=!1,Bn=-1;function Un(){xn&&Dn&&(xn=!1,Dn.length?Mn=Dn.concat(Mn):Bn=-1,Mn.length&&Fn())}function Fn(){if(!xn){var e=Pn(Un);xn=!0;for(var t=Mn.length;t;){for(Dn=Mn,Mn=[];++Bn<t;)Dn&&Dn[Bn].run();Bn=-1,t=Mn.length}Dn=null,xn=!1,function(e){if(Ln===clearTimeout)return clearTimeout(e);if((Ln===kn||!Ln)&&clearTimeout)return Ln=clearTimeout,clearTimeout(e);try{Ln(e)}catch(t){try{return Ln.call(null,e)}catch(t){return Ln.call(this,e)}}}(e)}}function Vn(e,t){this.fun=e,this.array=t}function jn(){}Vn.prototype.run=function(){this.fun.apply(null,this.array)};var Gn=jn,Hn=jn,Qn=jn,Wn=jn,qn=jn,$n=jn,zn=jn,Zn=wn.performance||{},Yn=Zn.now||Zn.mozNow||Zn.msNow||Zn.oNow||Zn.webkitNow||function(){return(new Date).getTime()},Kn=new Date,Jn={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];Mn.push(new Vn(e,t)),1!==Mn.length||xn||Pn(Fn)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Gn,addListener:Hn,once:Qn,off:Wn,removeListener:qn,removeAllListeners:$n,emit:zn,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Yn.call(Zn),i=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(i-=e[0],(n-=e[1])<0&&(i--,n+=1e9)),[i,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Kn)/1e3}},Xn=function(e,t){yn.forEach(e,(function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])}))},er=function(e,t,i,n,r){return function(e,t,i,n,r){return e.config=t,i&&(e.code=i),e.request=n,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,i,n,r)},tr=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],ir=yn.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function n(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=n(window.location.href),function(t){var i=yn.isString(t)?n(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0},nr=yn.isStandardBrowserEnv()?{write:function(e,t,i,n,r,o){var s=[];s.push(e+"="+encodeURIComponent(t)),yn.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),yn.isString(n)&&s.push("path="+n),yn.isString(r)&&s.push("domain="+r),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},rr=function(e){return new Promise((function(t,i){var n=e.data,r=e.headers;yn.isFormData(n)&&delete r["Content-Type"];var o=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",a=e.auth.password||"";r.Authorization="Basic "+btoa(s+":"+a)}var c,l,u=(c=e.baseURL,l=e.url,c&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(l)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(c,l):l);if(o.open(e.method.toUpperCase(),Cn(u,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var n,r,s,a,c,l="getAllResponseHeaders"in o?(n=o.getAllResponseHeaders(),c={},n?(yn.forEach(n.split("\n"),(function(e){if(a=e.indexOf(":"),r=yn.trim(e.substr(0,a)).toLowerCase(),s=yn.trim(e.substr(a+1)),r){if(c[r]&&tr.indexOf(r)>=0)return;c[r]="set-cookie"===r?(c[r]?c[r]:[]).concat([s]):c[r]?c[r]+", "+s:s}})),c):c):null,u={data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:l,config:e,request:o};!function(e,t,i){var n=i.config.validateStatus;!n||n(i.status)?e(i):t(er("Request failed with status code "+i.status,i.config,null,i.request,i))}(t,i,u),o=null}},o.onabort=function(){o&&(i(er("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){i(er("Network Error",e,null,o)),o=null},o.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(er(t,e,"ECONNABORTED",o)),o=null},yn.isStandardBrowserEnv()){var d=nr,h=(e.withCredentials||ir(u))&&e.xsrfCookieName?d.read(e.xsrfCookieName):void 0;h&&(r[e.xsrfHeaderName]=h)}if("setRequestHeader"in o&&yn.forEach(r,(function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete r[t]:o.setRequestHeader(t,e)})),yn.isUndefined(e.withCredentials)||(o.withCredentials=!!e.withCredentials),e.responseType)try{o.responseType=e.responseType}catch(g){if("json"!==e.responseType)throw g}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){o&&(o.abort(),i(e),o=null)})),void 0===n&&(n=null),o.send(n)}))},or={"Content-Type":"application/x-www-form-urlencoded"};function sr(e,t){!yn.isUndefined(e)&&yn.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var ar={adapter:function(){var e;return("undefined"!=typeof XMLHttpRequest||void 0!==Jn&&"[object process]"===Object.prototype.toString.call(Jn))&&(e=rr),e}(),transformRequest:[function(e,t){return Xn(t,"Accept"),Xn(t,"Content-Type"),yn.isFormData(e)||yn.isArrayBuffer(e)||yn.isBuffer(e)||yn.isStream(e)||yn.isFile(e)||yn.isBlob(e)?e:yn.isArrayBufferView(e)?e.buffer:yn.isURLSearchParams(e)?(sr(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):yn.isObject(e)?(sr(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(n){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};yn.forEach(["delete","get","head"],(function(e){ar.headers[e]={}})),yn.forEach(["post","put","patch"],(function(e){ar.headers[e]=yn.merge(or)}));var cr=ar;function lr(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var ur=function(e){return lr(e),e.headers=e.headers||{},e.data=In(e.data,e.headers,e.transformRequest),e.headers=yn.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),yn.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||cr.adapter)(e).then((function(t){return lr(e),t.data=In(t.data,t.headers,e.transformResponse),t}),(function(t){return Rn(t)||(lr(e),t&&t.response&&(t.response.data=In(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},dr=function(e,t){t=t||{};var i={},n=["url","method","params","data"],r=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];yn.forEach(n,(function(e){void 0!==t[e]&&(i[e]=t[e])})),yn.forEach(r,(function(n){yn.isObject(t[n])?i[n]=yn.deepMerge(e[n],t[n]):void 0!==t[n]?i[n]=t[n]:yn.isObject(e[n])?i[n]=yn.deepMerge(e[n]):void 0!==e[n]&&(i[n]=e[n])})),yn.forEach(o,(function(n){void 0!==t[n]?i[n]=t[n]:void 0!==e[n]&&(i[n]=e[n])}));var s=n.concat(r).concat(o),a=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return yn.forEach(a,(function(n){void 0!==t[n]?i[n]=t[n]:void 0!==e[n]&&(i[n]=e[n])})),i};function hr(e){this.defaults=e,this.interceptors={request:new Tn,response:new Tn}}hr.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=dr(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[ur,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)i=i.then(t.shift(),t.shift());return i},hr.prototype.getUri=function(e){return e=dr(this.defaults,e),Cn(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},yn.forEach(["delete","get","head","options"],(function(e){hr.prototype[e]=function(t,i){return this.request(yn.merge(i||{},{method:e,url:t}))}})),yn.forEach(["post","put","patch"],(function(e){hr.prototype[e]=function(t,i,n){return this.request(yn.merge(n||{},{method:e,url:t,data:i}))}}));var pr=hr;function fr(e){this.message=e}fr.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},fr.prototype.__CANCEL__=!0;var gr=fr;function mr(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;e((function(e){i.reason||(i.reason=new gr(e),t(i.reason))}))}mr.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},mr.source=function(){var e;return{token:new mr((function(t){e=t})),cancel:e}};var _r=mr;function vr(e){var t=new pr(e),i=fn(pr.prototype.request,t);return yn.extend(i,pr.prototype,t),yn.extend(i,t),i}var Er=vr(cr);Er.Axios=pr,Er.create=function(e){return vr(dr(Er.defaults,e))},Er.Cancel=gr,Er.CancelToken=_r,Er.isCancel=Rn,Er.all=function(e){return Promise.all(e)},Er.spread=function(e){return function(t){return e.apply(null,t)}};var Ar=Er,yr=Er;Ar.default=yr;var Sr=Ar;const Cr={INVALID_PARAMETER:4096,INVALID_OPERATION:4097,NOT_SUPPORTED:4098,DEVICE_NOT_FOUND:4099,INITIALIZE_FAILED:4100,SIGNAL_CHANNEL_SETUP_FAILED:16385,SIGNAL_CHANNEL_ERROR:16386,ICE_TRANSPORT_ERROR:16387,JOIN_ROOM_FAILED:16388,CREATE_OFFER_FAILED:16389,SIGNAL_CHANNEL_RECONNECTION_FAILED:16390,UPLINK_RECONNECTION_FAILED:16391,DOWNLINK_RECONNECTION_FAILED:16392,REMOTE_STREAM_NOT_EXIST:16400,CLIENT_BANNED:16448,SERVER_TIMEOUT:16449,SUBSCRIPTION_TIMEOUT:16450,PLAY_NOT_ALLOWED:16451,DEVICE_AUTO_RECOVER_FAILED:16452,START_PUBLISH_CDN_FAILED:16453,STOP_PUBLISH_CDN_FAILED:16454,START_MIX_TRANSCODE_FAILED:16455,STOP_MIX_TRANSCODE_FAILED:16456,NOT_SUPPORTED_H264:16457,SWITCH_ROLE_FAILED:16458,API_CALL_TIMEOUT:16459,UNKNOWN:65535};class br extends Error{constructor({name:e="RtcError",message:t,code:i=Cr.UNKNOWN,extraCode:n=0}){super(t+` <${function(e){for(let t in Cr)if(Cr[t]===e)return t;return"UNKNOWN"}(i)} 0x${i.toString(16)}>`),this.code_=i,this.extraCode_=n,this.name=e,this.message_=t}getCode(){return this.code_}getExtraCode(){return this.extraCode_}}var Tr=new class{constructor(){const{name:e,version:t}=It();this.configs_={sdkAppId:"",userId:"",version:"4.11.12",env:Nt,browserVersion:e+t,ua:navigator.userAgent}}setConfig({sdkAppId:e,env:t,userId:i}){e!==this.configs_.sdkAppId&&(this.configs_.sdkAppId=String(e)),this.configs_.env=t,this.configs_.userId=i}logEvent(e){if(Ct)return;const t={...e,...this.configs_,userId:e.userId||this.configs_.userId};Pr(t.code)&&(t.code="failed"===t.result?Cr.UNKNOWN:0),Sr.post(wr(),JSON.stringify(t)).catch(()=>{})}logSuccessEvent(e){Ct||(this.logEvent({...e,result:"success"}),this.configs_.env===Nt&&this.uploadEventToKibana({...e,result:"success"}))}logFailedEvent(e){if(Ct)return;const{eventType:t,code:i,error:n,userId:r}=e,o={userId:r,eventType:t,result:"failed",code:i||(n instanceof br?n.getExtraCode()||n.getCode():Cr.UNKNOWN)};this.logEvent(o),this.configs_.env===Nt&&this.uploadEventToKibana({...o,error:n})}uploadEventToKibana(e){let t=`stat-${e.eventType}-${e.result}`;"delta-join"!==e.eventType&&"delta-leave"!==e.eventType&&"delta-publish"!==e.eventType||(t=`${e.eventType}:${e.delta}`),this.uploadEvent({log:t,userId:e.userId}),"failed"===e.result&&(t=`stat-${e.eventType}-${e.result}-${e.code}`,this.uploadEvent({log:t,userId:e.userId,error:e.error}))}uploadEvent({log:e,userId:t,error:i}){const n={timestamp:ve(),sdkAppId:this.configs_.sdkAppId,userId:t||this.configs_.userId,version:this.configs_.version,log:e};i&&(n.errorInfo=i.message),Sr.post(Rr(),JSON.stringify(n)).catch(()=>{})}};const Ir=function(){return function(e){const t=window.location.search.match(new RegExp("(\\?|&)"+e+"=([^&]*)(&|$)"));return t?decodeURIComponent(t[2]):""}("trtc_env")},Rr=function(){return(Dt||"https://yun.tim.qq.com")+"/v5/AVQualityReportSvc/C2S?sdkappid=1&cmdtype=jssdk_log"},wr=function(){return(Dt||"https://yun.tim.qq.com")+"/v5/AVQualityReportSvc/C2S?sdkappid=1&cmdtype=jssdk_event"};function Or(){const e=navigator.userAgent,t=navigator.connection;let i=e.match(/NetType\/\w+/)?e.match(/NetType\/\w+/)[0]:"";i=i.toLowerCase().replace("nettype/",""),"3gnet"===i&&(i="3g");const n=t&&t.type&&t.type.toLowerCase();let r=t&&t.effectiveType&&t.effectiveType.toLowerCase();"slow-2"===r&&(r="2g");let o=i||"unknown";if(n)switch(n){case"cellular":case"wimax":o=r||"unknown";break;case"wifi":o="wifi";break;case"ethernet":o="wired";break;case"none":case"other":case"unknown":o="unknown"}return Uo.info("networkType:",o),o}const kr=function(e){if(!e||"object"!=typeof e||"[object Object]"!=Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var i=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&Function.prototype.toString.call(i)===Function.prototype.toString.call(Object)};function Nr(e){const t=Math.round(e/2)+1;return t>6?13e3:1e3*function e(t,i=1,n=1){return t<=1?n:e(t-1,n,i+n)}(t)}const Lr=e=>"function"==typeof e,Pr=e=>void 0===e,Dr=e=>"string"==typeof e,Mr=e=>"number"==typeof e,xr=e=>"boolean"==typeof e,Br=e=>Ur(e)==="MediaStreamTrack".toLowerCase();function Ur(e){return Reflect.apply(Object.prototype.toString,e,[]).replace(/^\[object\s(\w+)\]$/,"$1").toLowerCase()}function Fr(e){const t={};return t.urls="turn:"+e.url,Pr(e.username)||Pr(e.credential)||(t.username=e.username,t.credential=e.credential,t.credentialType="password",Pr(e.credentialType)||(t.credentialType=e.credentialType)),t}function Vr(){return performance&&performance.now?Math.floor(performance.now()):Date.now()}function jr(e,t="big"){if(!Dr(e))return 0;const i=e.split(".");return"big"===t?(Number(i[0])<<24|Number(i[1])<<16|Number(i[2])<<8|Number(i[3]))>>>0:(Number(i[3])<<24|Number(i[2])<<16|Number(i[1])<<8|Number(i[0]))>>>0}const Gr=()=>{let e=navigator.language||navigator.userLanguage;return e=e.substr(0,2),"zh"===e},Hr=(()=>{let e=!1,t=document.visibilityState;return()=>{document.visibilityState!==t&&Uo.info("visibility change: "+document.visibilityState),e||(document.addEventListener("visibilitychange",()=>{Uo.info("visibility change: "+document.visibilityState),t=document.visibilityState}),e=!0)}})();var Qr=R((function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function o(e,t,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new r(n,o||e,s),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),a.prototype.eventNames=function(){var e,n,r=[];if(0===this._eventsCount)return r;for(n in e=this._events)t.call(e,n)&&r.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,s=new Array(o);r<o;r++)s[r]=n[r].fn;return s},a.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,r,o,s){var a=i?i+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,o),!0;case 6:return u.fn.call(u.context,t,n,r,o,s),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,r);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,i){return o(this,e,t,i,!1)},a.prototype.once=function(e,t,i){return o(this,e,t,i,!0)},a.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||s(this,o);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||r&&!a[c].once||n&&a[c].context!==n)&&l.push(a[c]);l.length?this._events[o]=1===l.length?l[0]:l:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a}));const Wr=new Qr,qr=1,$r=2,zr=3,Zr=4,Yr=5,Kr=20,Jr=21,Xr=22,eo=23,to=24,io=27,no=28,ro=29,oo=30,so=31,ao=100,co=101,lo=102,uo=103,ho=110,po=111,fo=112,go=113,mo=114,_o=115,vo=116,Eo=120,Ao=121,yo=122,So=123,Co=130,bo=131,To=132,Io=133,Ro=134,wo=135,Oo=136,ko=137,No=200,Lo=201,Po=300,Do=301;function Mo({retryFunction:e,settings:t,onError:i,onRetrying:n,context:r}){return function(...o){const s=t.retries||5;let a=0,c=-1,l=0;const u=async(d,h)=>{try{const t=r||this,i=await e.apply(t,o);a=0,d(i)}catch(g){const r=()=>{clearTimeout(c),a=0,l=2,h(g)};i(g,()=>{2!==l&&a<s?(a++,l=1,Lr(n)&&n(a,r),c=setTimeout(()=>{c=-1,u(d,h)},t.timeout||1e3)):r()},h)}};return new Promise(u)}}class xo{constructor(e){this.log=e.log,this.level=e.level,this.userId=e.userId,this.sdkAppId=e.sdkAppId,this.forAllJoinedClients=e.forAllJoinedClients,this.uploaded=!1}}class Bo{constructor(e){this.id_=e.id,this.userId_=e.userId,this.sdkAppId_=e.sdkAppId,this.type_=e.type,this.isLocal_=!xr(e.isLocal)||e.isLocal}setUserId(e){this.userId_=e}setSdkAppId(e){this.sdkAppId_=e}log(e,t){Uo.log({log:`[${this.isLocal_?"":"*"}${this.id_}] ${this.type_?this.type_+" ":""}${t}`,level:e,forAllJoinedClients:Pr(this.userId_),userId:this.userId_,sdkAppId:this.sdkAppId_})}info(e){this.log(hn.INFO,e)}debug(e){this.log(hn.DEBUG,e)}warn(e){this.log(hn.WARN,e)}error(e){this.log(hn.ERROR,e)}}var Uo=new class{constructor(){this.clients_=[],this.queue_=[],this.timeoutId_=-1,this.logLevel_=hn.DEBUG,this.logLevelToUpload_=hn.INFO,this.enableUploadLog_=!0,this.startUpload(),this.checkURLParam(),Wr.on(oo,({client:e})=>this.clients_.push(e)),Wr.on(so,e=>{e&&kr(e.config)&&pn[e.config.logLevelToUpload]&&(this.logLevelToUpload_=e.config.logLevelToUpload)})}async startUpload(){try{await this.upload()}catch(i){}this.timeoutId_=setTimeout(()=>this.startUpload(),2e3)}stopUpload(){-1!==this.timeoutId_&&(clearTimeout(this.timeoutId_),this.timeoutId_=-1)}getLogsToUpload(){const e={map:new Map,splicedQueue:[]};if(this.queue_[0].forAllJoinedClients&&0===this.clients_.length)return e;let t=0;for(;t<this.queue_.length&&50!==t;t++){const i=this.queue_[t];if(i.forAllJoinedClients)this.clients_.forEach(t=>{if(!t.getIsJoined())return;const n=t.getUserId(),r=t.getSDKAppId();if(e.map.has(n)){const{logs:t}=e.map.get(n);t.push(i)}else e.map.set(n,{userId:n,sdkAppId:r,logs:[i]})});else if(e.map.has(i.userId)){const{logs:t}=e.map.get(i.userId);t.push(i)}else e.map.set(i.userId,{userId:i.userId,sdkAppId:i.sdkAppId,logs:[i]})}return e.map.size>0&&(e.splicedQueue=this.queue_.splice(0,t)),e}async upload(){if(0===this.queue_.length)return;const{map:e,splicedQueue:t}=this.getLogsToUpload();if(0===e.size)return;try{const t=[...e.values()];for(let e=0;e<t.length;e++){const{userId:i,sdkAppId:n,logs:r}=t[e];await this.uploadLogWithRetry(JSON.stringify({timestamp:ve(),sdkAppId:String(n),userId:i,version:"4.11.12",log:r.map(e=>e.log).join("\n")})),r.forEach(e=>e.uploaded=!0)}}catch(o){}const i=t.filter(e=>!e.uploaded);i.length>0&&(this.queue_=i.concat(this.queue_))}uploadLogWithRetry(e){return Mo({retryFunction:()=>Sr.post(Rr(),e,{timeout:5e3}),settings:{retries:3,timeout:1e3},onError:(e,t)=>{t()}})()}getPrefix(e){const t=new Date;return t.setTime(_e()),`[${t.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")}:${t.getMilliseconds()}] <${pn[e]}>`}getLogLevel(){return this.logLevel_}setLogLevel(e){Pr(pn[e])||(this.logLevel_=e)}enableUploadLog(){this.enableUploadLog_=!0}disableUploadLog(){this.enableUploadLog_=!1}log({log:e,level:t,forAllJoinedClients:i=!0,userId:n,sdkAppId:r}){if(e=`${this.getPrefix(t)} ${e}`,this.enableUploadLog_&&t>=this.logLevelToUpload_&&this.queue_.push(new xo({log:e,level:t,userId:n,sdkAppId:r,forAllJoinedClients:i})),!(t<this.logLevel_))switch(t){case hn.ERROR:console.error(e);break;case hn.WARN:console.warn(e);break;case hn.INFO:console.log(e);break;case hn.DEBUG:console.debug(e)}}debug(e){this.log({log:e,level:hn.DEBUG})}info(e){this.log({log:e,level:hn.INFO})}warn(e){this.log({log:e,level:hn.WARN})}error(e){this.log({log:e,level:hn.ERROR})}createLogger(e){return new Bo(e)}checkURLParam(){const e=new URLSearchParams(location.search).get("logLevelToUpload");pn[e]&&(this.logLevelToUpload_=e)}};let Fo=!0;const Vo="connection-state-changed",jo="connected",Go="error",Ho="DISCONNECTED",Qo="CONNECTING",Wo="RECONNECTING",qo="CONNECTED",$o={ON_PUBLISH_RESPONSE:2,NEW_ICE_CANDIDATE:4,CLINET_BANNED:8,CHANNEL_SETUP_SUCCESS:19,CHANNEL_SETUP_FAILED:80,REBUILD_SESSION_RESULT:514,JOIN_ROOM_RESULT:20,PEER_JOIN:4134,PEER_LEAVE:4135,STREAM_ADDED:16,STREAM_REMOVED:18,UPDATE_REMOTE_SDP:48,UPDATE_AUDIO_SSRC:50,UPDATE_VIDEO_SSRC:52,UPLINK_NETWORK_STATS:22,UPDATE_REMOTE_MUTE_STAT:23,CLOSE_PEER_ACK:10,SUBSCRIBE_ACK:26,PONG:775,PUBLISH_RESULT:4098,UNPUBLISH_RESULT:4100,SUBSCRIBE_RESULT:4102,UNSUBSCRIBE_RESULT:4104,SUBSCRIBE_CHANGE_RESULT:4106,UPDATE_OFFER_RESULT:4128,REMOTE_STREAM_UPDATE:4130,START_PUBLISH_TENCENT_CDN_RES:1286,STOP_PUBLISH_TENCENT_CDN_RES:1288,START_PUBLISH_GIVEN_CDN_RES:777,STOP_PUBLISH_GIVEN_CDN_RES:779,START_MIX_TRANSCODE_RES:781,STOP_MIX_TRANSCODE_RES:783,USER_LIST_RES:4137,SWITCH_ROLE_RES:4110},zo=[$o.UPDATE_REMOTE_MUTE_STAT,$o.UPLINK_NETWORK_STATS,$o.PONG,$o.REMOTE_STREAM_UPDATE,$o.USER_LIST_RES],Zo={ON_PUBLISH_RESPONSE:"on-publish-response",NEW_ICE_CANDIDATE:"new-ice-candidate",CLINET_BANNED:"client-banned",CHANNEL_SETUP_SUCCESS:"channel-setup-success",CHANNEL_SETUP_FAILED:"channel-setup-failed",REBUILD_SESSION_RESULT:"channel-reconnect-result",JOIN_ROOM_RESULT:"join-room-result",PEER_JOIN:"peer-join",PEER_LEAVE:"peer-leave",STREAM_ADDED:"stream-added",STREAM_REMOVED:"stream-removed",UPDATE_REMOTE_SDP:"update-remote-sdp",UPDATE_AUDIO_SSRC:"update-audio-ssrc",UPDATE_VIDEO_SSRC:"update-video-ssrc",UPLINK_NETWORK_STATS:"uplink-network-stats",UPDATE_REMOTE_MUTE_STAT:"update-remote-mute-stat",CLOSE_PEER_ACK:"close-peer-ack",SUBSCRIBE_ACK:"subscribe-ack",REQUEST_REBUILD_SESSION:"request-rebuild-session",CLIENT_REJOIN:"client-rejoin",PONG:"pong",PUBLISH_RESULT:"publish-result",UNPUBLISH_RESULT:"unpublish-result",SUBSCRIBE_RESULT:"subscribe-result",SUBSCRIBE_CHANGE_RESULT:"subscribe-change-result",UNSUBSCRIBE_RESULT:"unsubscribe-result",UPDATE_OFFER_RESULT:"update-offer-result",REMOTE_STREAM_UPDATE:"remote-stream-update",START_PUBLISH_TENCENT_CDN_RES:"start-publish-tencent-cdn-res",STOP_PUBLISH_TENCENT_CDN_RES:"stop-publish-tencent-cdn-res",START_PUBLISH_GIVEN_CDN_RES:"start-publish-given-cdn-res",STOP_PUBLISH_GIVEN_CDN_RES:"stop-publish-given-cdn-res",START_MIX_TRANSCODE_RES:"start-mix-transcode-res",STOP_MIX_TRANSCODE_RES:"stop-mix-transcode-res",USER_LIST_RES:"user-list-res",SWITCH_ROLE_RES:"switch_role_res"},Yo="on_update_track",Ko="on_create_room",Jo="on_quit_room",Xo="on_quality_report",es="on_rebuild_session",ts="on_mute_uplink",is="on_constraints_config",ns="ping",rs="on_publish",os="on_unpublish",ss="on_sub",as="on_unsub",cs="on_sub_change",ls="on_start_publishing",us="on_stop_publishing",ds="on_start_push_user_cdn",hs="on_stop_push_user_cdn",ps="on_start_mcu_mix",fs="on_stop_mcu_mix",gs="on_get_user_list",ms="on_switch_role",_s="on_change_video_type",vs=32768,Es=32769,As=32770,ys=32771,Ss=32772,Cs=32773,bs=32774,Ts=32775,Is=32777,Rs=32778,ws=32779,Os=32780,ks=32781,Ns=32782,Ls=32783,Ps=32784,Ds=32785,Ms=32786,xs=32787,Bs=32788,Us=32789,Fs=32790,Vs=32791,js=32792,Gs=32793,Hs=32794,Qs=32795,Ws=32796,qs=32797,$s=32798,zs=32799,Zs=32800,Ys=32801,Ks=32802,Js=new Map,Xs=function(e,t){let i=Js.get(e);i||(Js.set(e,[]),i=Js.get(e)),i.push(t)};var ea=Object.prototype.hasOwnProperty;function ta(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(kr(e))switch(Object.prototype.toString.call(e)){case"[object File]":case"[object Map]":case"[object Set]":return 0===e.size;case"[object Object]":for(var t in e)if(ea.call(e,t))return!1;return!0}return!1}const ia="AVOID_REPEATED_CALL",na="INVALID_PARAMETER_REQUIRED",ra="INVALID_PARAMETER_TYPE",oa="INVALID_PARAMETER_EMPTY",sa="INVALID_PARAMETER_INSTANCE",aa="INVALID_PARAMETER_RANGE",ca="API_CALL_TIMEOUT",la="SIGNAL_CHANNEL_RECONNECTION_FAILED",ua="SIGNAL_CHANNEL_SETUP_FAILED",da="ERROR_MESSAGE",ha="SUBSCRIPTION_TIMEOUT",pa="EXCHANGE_SDP_TIMEOUT",fa="DOWNLINK_RECONNECTION_FAILED",ga="EXCHANGE_SDP_FAILED",ma="UPLINK_RECONNECTION_FAILED",_a="AUDIO",va="VIDEO",Ea="INVALID_RECORDID",Aa="INVALID_PURE_AUDIO",ya="INVALID_STREAMID",Sa="INVALID_USER_DEFINE_RECORDID",Ca="INVALID_USER_DEFINE_PUSH_ARGS",ba="INVALID_PROXY",Ta="INVALID_JOIN",Ia="INVALID_ROOMID_STRING",Ra="INVALID_ROOMID_INTEGER",wa="INVALID_SIGNAL_CHANNEL",Oa="JOIN_ROOM_TIMEOUT",ka="JOIN_ROOM_FAILED",Na="REJOIN_ROOM_FAILED",La="INVALID_LEAVE",Pa="INVALID_PUBLISH",Da="INVALID_UNPUBLISH",Ma="INVALID_AUDIENCE",xa="INVALID_INITIALIZE",Ba="INVALID_DUPLICATE_PUBLISHING",Ua="INVALID_REMOTE_STREAM",Fa="SUBSCRIBE_FAILED",Va="INVALID_ROLE",ja="INVALID_OPERATION_SWITCH_ROLE",Ga="SWITCH_ROLE_TIMEOUT",Ha="SWITCH_ROLE_FAILED",Qa="CLIENT_BANNED",Wa="INVALID_OPERATION_START_PUBLISH_CDN",qa="INVALID_OPERATION_STOP_PUBLISH_CDN",$a="INVALID_STREAM_ID",za="START_PUBLISH_CDN_FAILED",Za="STOP_PUBLISH_CDN_FAILED",Ya="START_MIX_TRANSCODE",Ka="STOP_MIX_TRANSCODE",Ja="INVALID_AUDIO_VOLUME",Xa="ENABLE_SMALL_STREAM_PUBLISHED",ec="DISABLE_SMALL_STREAM_PUBLISHED",tc="NOT_SUPPORTED_SMALL_STREAM",ic="INVALID_SMALL_STREAM_PROFILE",nc="INVALID_PARAMETER_REMOTE_STREAM",rc="REMOTE_NOT_PUBLISH_SMALL_STREAM",oc="INVALID_SWITCH_DEVICE",sc="INVALID_SWITCH_DEVICE_PUBLISHING",ac="INVALID_REPLACE_TRACK",cc="INVALID_INITIALIZE_LOCAL_STREAM",lc="INVALID_ADD_TRACK_REPETITIVE",uc="INVALID_ADD_TRACK_REMOVING",dc="INVALID_ADD_TRACK_PUBLISHING",hc="INVALID_STREAM_INITIALIZED",pc="INVALID_ADD_TRACK_NUMBER",fc="INVALID_REMOVE_AUDIO_TRACK",gc="INVALID_REMOVE_AUDIO_ADDING",mc="INVALID_REMOVE_AUDIO_ON",_c="INVALID_REMOVE_TRACK_PUBLISHING",vc="INVALID_REMOVE_TRACK_NOT_PUBLISHING",Ec="INVALID_REMOVE_TRACK_NUMBER",Ac="INVALID_REMOVE_TRACK_NOT_PUBLISHED",yc="START_MIX_TRANSCODE_FAILED",Sc="STOP_MIX_TRANSCODE_FAILED",Cc="MIX_TRANSCODE_NOT_STARTED",bc="CANNOT_LESS_THAN_ZERO",Tc="MIX_PARAMS_VIDEO_FRAMERATE",Ic="MIX_PARAMS_VIDEO_GOP",Rc="MIX_PARAMS_AUDIO_BITRATE",wc="MIX_PARAMS_USER_Z_ORDER",Oc="MIX_PARAMS_NOT_SELF",kc="MIX_PARAMS_USER_STREAM",Nc="INVALID_PLAY",Lc="INVALID_CREATE_STREAM_SOURCE",Pc="INVALID_CREATE_STREAM_SCREEN",Dc="INVALID_CREATE_STREAM_AUDIO",Mc="INVALID_CREATE_STREAM_SCREEN_AUDIO",xc="NOT_SUPPORTED_HTTP",Bc="NOT_SUPPORTED_WEBRTC",Uc="NOT_SUPPORTED_PROFILE",Fc="NOT_SUPPORTED_H264ENCODE",Vc="NOT_SUPPORTED_H264DECODE",jc="NOT_SUPPORTED_REPLACE_TRACK",Gc="NOT_SUPPORTED_CAPTURE",Hc="MICROPHONE_NOT_FOUND",Qc="CAMERA_NOT_FOUND",Wc={AVOID_REPEATED_CALL:e=>`previous ${e.name}() is ongoing, please avoid repeated calls.`,INVALID_PARAMETER_REQUIRED:({key:e,rule:t,fnName:i,value:n})=>`'${e||t.name}' is a required param when calling ${i}(), received: ${n}.`,INVALID_PARAMETER_TYPE({key:e,rule:t,fnName:i,value:n}){const r=""+(e||t.name);let o="";return o=Array.isArray(t.type)?t.type.join("|"):t.type,`'${r}' must be type of ${o} when calling ${i}(), received type: ${Ur(n)}.`},INVALID_PARAMETER_EMPTY:({key:e,rule:t,fnName:i,value:n})=>`'${e||t.name}' cannot be '${n}' when calling ${i}().`,INVALID_PARAMETER_INSTANCE:({key:e,rule:t,fnName:i,value:n})=>`'${""+(e||t.name)}' must be instanceof ${""+(t.instanceOf.name||t.instanceOf)} when calling ${i}(), received type: ${Ur(n)}.`,INVALID_PARAMETER_RANGE:({key:e,rule:t,fnName:i,value:n})=>`'${e||t.name}' must be one of ${t.values.join("|")} when calling ${i}(), received: ${n}.`,API_CALL_TIMEOUT:e=>(e.commandDesc||e.command)+" timeout observed.",SIGNAL_CHANNEL_RECONNECTION_FAILED:"signal channel reconnection failed, please check your network.",SIGNAL_CHANNEL_SETUP_FAILED:e=>`SignalChannel setup failure: (errorCode: ${e.errorCode}, errorMsg: ${e.errorMsg} }).`,ERROR_MESSAGE:function(e){let t=e.type+" failed";return e.message&&(t=`${t}: ${e.message}.`),t},SUBSCRIPTION_TIMEOUT:"remote server does not respond to the subscription.",EXCHANGE_SDP_TIMEOUT:"exchange sdp timeout.",DOWNLINK_RECONNECTION_FAILED:"downlink reconnection failed, please check your network and re-join room.",EXCHANGE_SDP_FAILED:function(e){return`exchange sdp failed ${e.errMsg}.`},UPDATE_OFFER_TIMEOUT:"update offer timeout observed.",UPLINK_RECONNECTION_FAILED:"uplink reconnection failed, please check your network and publish again.",AUDIO:function(e){return e.error.toString()+" <audio>"},VIDEO:function(e){return e.error.toString()+" <video>"},INVALID_RECORDID:"recordId must be an integer number.",INVALID_PURE_AUDIO:"pureAudioPushMode must be 1 or 2.",INVALID_STREAMID:"streamId must be a sting literal within 64 bytes, and not be empty.",INVALID_USER_DEFINE_RECORDID:"userDefineRecordId must be a sting literal contains (a-zA-Z),(0-9), underline and hyphen, within 64 bytes, and not be empty.",INVALID_USER_DEFINE_PUSH_ARGS:"userDefinePushArgs must be a sting literal within 256 bytes, and not be empty.",INVALID_PROXY:'proxy server url must start with "wss://".',INVALID_JOIN:"duplicate join() called.",INVALID_ROOMID_STRING:function(e){return`'${e}' must be validate string when useStringRoomId is true.`},INVALID_ROOMID_INTEGER:function(e){return`'${e}' must be an integer between [1, 4294967294] when useStringRoomId is false.`},INVALID_SIGNAL_CHANNEL:"SignalChannel is not ready yet.",JOIN_ROOM_TIMEOUT:"join room timeout.",JOIN_ROOM_FAILED:function(e){return"Failed to join room - "+e.error},REJOIN_ROOM_FAILED:function(e){return`reJoin room: ${e.roomId} failed, please check your network.`},INVALID_LEAVE:"please call leave() before destroy().",INVALID_PUBLISH:"please call join() before publish().",INVALID_UNPUBLISH:"stream has not been published yet.",INVALID_AUDIENCE:'no permission to publish() under live/audience, please call switchRole("anchor") firstly before publish().',INVALID_INITIALIZE:"cannot publish stream because stream is not initialized or is switching device.",INVALID_DUPLICATE_PUBLISHING:"duplicate publishing, please unpublish and then re-publish.",INVALID_SUBSCRIBE_UNDEFINED:"stream is undefined or null.",INVALID_SUBSCRIBE_LOCAL:"stream cannot be LocalStream.",INVALID_REMOTE_STREAM:"remoteStream does not exist because it has been unpublished by remote peer.",SUBSCRIBE_FAILED:function(e){return`failed to subscribe stream, reason: ${e.message}.`},INVALID_ROLE:"switchRole can only be called in live mode.",INVALID_PARAMETER_SWITCH_ROLE:"role could only be set to a value as anchor or audience.",INVALID_OPERATION_SWITCH_ROLE:"please call join() before switchRole().",SWITCH_ROLE_TIMEOUT:"switchRole timeout.",SWITCH_ROLE_FAILED:function(e){return`switchRole failed, errCode: ${e.errCode} errMsg: ${e.errMsg}.`},CLIENT_BANNED:function(e){return"client was banned because of "+e.reason+"."},INVALID_OPERATION_START_PUBLISH_CDN:"please call publish() before startPublishCDNStream().",INVALID_OPERATION_STOP_PUBLISH_CDN:"please call startPublishCDNStream() before stopPublishCDNStream().",START_PUBLISH_CDN_FAILED:function(e){return`startPublishCDNStream failed, errMsg: ${e.message}.`},STOP_PUBLISH_CDN_FAILED:function(e){return`stopPublishCDNStream failed, errMsg: ${e.message}.`},INVALID_STREAM_ID:function(e){return`'${e}' can only consist of uppercase and lowercase english letters (a-zA-Z), numbers (0-9), hyphens and underscores.`},START_MIX_TRANSCODE:"please call startMixTranscode() after join().",STOP_MIX_TRANSCODE:"please call stopMixTranscode() after startMixTranscode().",INVALID_AUDIO_VOLUME:"interval must be a number.",ENABLE_SMALL_STREAM_PUBLISHED:"Cannot enable small stream after localStream published.",DISABLE_SMALL_STREAM_PUBLISHED:"Cannot disable small stream after localStream published.",NOT_SUPPORTED_SMALL_STREAM:"your browser does not support opening small stream.",INVALID_SMALL_STREAM_PROFILE:"small stream profile is invalid.",INVALID_PARAMETER_REMOTE_STREAM:"remoteStream is invalid.",REMOTE_NOT_PUBLISH_SMALL_STREAM:"remote peer does not publish small stream.",INVALID_SWITCH_DEVICE:"cannot switch device on current stream.",INVALID_SWITCH_DEVICE_PUBLISHING:"cannot switch device when publishing localStream.",INVALID_REPLACE_TRACK:"cannot replace track when publishing localStream.",INVALID_INITIALIZE_LOCAL_STREAM:"local stream has not initialized yet.",INVALID_ADD_TRACK_REPETITIVE:"previous addTrack is ongoing, please avoid repetitive execution.",INVALID_ADD_TRACK_REMOVING:"cannot add track when a track is removing.",INVALID_ADD_TRACK_PUBLISHING:"cannot add track when publishing localStream.",INVALID_STREAM_INITIALIZED:"your local stream haven't been initialized yet.",INVALID_ADD_TRACK_NUMBER:"a Stream has at most one audio track and one video track.",INVALID_REMOVE_AUDIO_TRACK:"remove audio track is not supported.",INVALID_REMOVE_AUDIO_ADDING:"cannot remove track when a track is adding.",INVALID_REMOVE_AUDIO_ON:"previous removeTrack is ongoing, please avoid repetitive execution.",INVALID_REMOVE_TRACK_PUBLISHING:"cannot remove track when publishing localStream.",INVALID_REMOVE_TRACK_NOT_PUBLISHING:"the track to be removed is not being publishing.",INVALID_REMOVE_TRACK_NUMBER:"remove the only video track is not supported, please use replaceTrack or muteVideo.",INVALID_REMOVE_TRACK_NOT_PUBLISHED:function(e){return`try to replace ${e.kind} track but there's no previous ${e.kind} being published.`},START_MIX_TRANSCODE_FAILED:function(e){return`startMixTranscode failed, errMsg: ${e.message}.`},STOP_MIX_TRANSCODE_FAILED:function(e){return`stopMixTranscode failed, errMsg: ${e.message}.`},MIX_TRANSCODE_NOT_STARTED:"mixTranscode has not been started.",CANNOT_LESS_THAN_ZERO:function({key:e,rule:t,fnName:i,value:n}){return`'${e||t.name}' cannot be less than 0 when calling ${i}().`},MIX_PARAMS_VIDEO_FRAMERATE:"'config.videoFramerate' should be an integer between 0 and 30, excluding 0.",MIX_PARAMS_VIDEO_GOP:"'config.videoGOP' should be an integer between 1 and 8.",MIX_PARAMS_AUDIO_BITRATE:"'config.audioBitrate' should be an integer between 32 and 192.",MIX_PARAMS_USER_Z_ORDER:function(e){return`'${e}' is required and must be between 1 and 15.`},MIX_PARAMS_NOT_SELF:"'config.mixUsers' must contain self.",MIX_PARAMS_USER_STREAM:"'config.videoWidth' and 'config.videoHeight' of output stream should be contain all mix stream.",INVALID_PLAY:"duplicate play() call observed, please stop() firstly.",INVALID_USERID:"userId cannot be all spaces.",INVALID_CREATE_STREAM_SOURCE:"LocalStream must be created by createStream() with either audio/video or audioSource/videoSource, but can not be mixed with audio/video and audioSource/videoSource.",INVALID_CREATE_STREAM_SCREEN:"screen/video cannot be both true.",INVALID_CREATE_STREAM_AUDIO:"audio/screenAudio cannot be both true.",INVALID_CREATE_STREAM_SCREEN_AUDIO:"when screen is true, screenAudio can be configured.",NOT_SUPPORTED_HTTP:"not supported in http protocol, please use https protocol.",NOT_SUPPORTED_WEBRTC:"your browser does NOT support WebRTC!",NOT_SUPPORTED_PROFILE:"your browser does not support setVideoProfile.",NOT_SUPPORTED_MEDIA:"your browser does not support navigator.mediaDevices.",NOT_SUPPORTED_H264ENCODE:"your device does not support H.264 encoding.",NOT_SUPPORTED_H264DECODE:"your device does not support H.264 decoding.",NOT_SUPPORTED_REPLACE_TRACK:"replaceTrack is not supported in this browser, please use switchDevice or addTrack instead.",NOT_SUPPORTED_CAPTURE:"captureScreen is not supported, please use chrome.",MICROPHONE_NOT_FOUND:"no microphone detected, please check your microphone and the configuration on TRTC.createStream.",CAMERA_NOT_FOUND:"no camera detected, please check your camera and the configuration on TRTC.createStream."},qc=dn+"module-ErrorCode.html",$c=()=>{if(!bt())return!1;const e=localStorage.getItem("trtc_error_assistance");e&&!(e=>{const t=e.saveTime&&(new Date).getTime()-e.saveTime>=6048e5,i=!e.saveVersion||"4.11.12"!==e.saveVersion;return t||i})(JSON.parse(e))||(Uo.log("request error info"),(()=>{const e=new XMLHttpRequest;if(e.open("GET","https://web.sdk.qcloud.com/trtc/webrtc/download/error-message/0.0.1/script.js",!1),e.send(null),4===e.readyState&&200===e.status){const t=document.createElement("script");t.type="text/javascript",t.text=e.responseText,document.body.appendChild(t),localStorage.setItem("trtc_error_assistance",JSON.stringify({message:e.responseText,saveTime:(new Date).getTime(),saveVersion:"4.11.12"})),document.body.removeChild(t)}})())};function zc(e){const{key:t,data:i,link:n}=e;let r="",o="",s="";Lr(Wc[t])?r=Wc[t](i):Dr(Wc[t])&&(r=Wc[t]);const{TRTC_ERROR_INFO:a,TRTC_ERROR_LINK:c}=(()=>{if(window.TRTC_ERROR_INFO&&window.TRTC_ERROR_LINK)return{TRTC_ERROR_INFO:window.TRTC_ERROR_INFO,TRTC_ERROR_LINK:window.TRTC_ERROR_LINK};{let e=localStorage.getItem("trtc_error_assistance");if(e){e=JSON.parse(e);const t=document.createElement("script");t.type="text/javascript",t.text=e.message,document.body.appendChild(t);const i=window.TRTC_ERROR_INFO,n=window.TRTC_ERROR_LINK;return document.body.removeChild(t),{TRTC_ERROR_INFO:i,TRTC_ERROR_LINK:n}}}return{}})();a&&a[t]&&(Lr(a[t])?o=a[t](i):Dr(a[t])&&(o=a[t])),n?s=`https://web.sdk.qcloud.com/trtc/webrtc/doc/zh-cn/${n.className}.html#${n.className===on?".":""}${n.fnName}`:c&&c[t]&&(s=dn+c[t]);let l=r;return l+=" "+o,l+=o?s?"查看文档："+s:"查看文档："+qc:s?"Refer to："+s:"Refer to："+qc,l}class Zc{constructor(e){this.client_=e.client,this.sdkAppId_=e.sdkAppId,this.userId_=e.userId,this.userSig_=e.userSig,this.url_=e.url,this.backupUrl_=e.backupUrl,this.version_=e.version,this.urlWithParam_=`${this.url_}?sdkAppid=${this.sdkAppId_}&identifier=${this.userId_}&userSig=${this.userSig_}`,this.backupUrlWithParam_=`${this.backupUrl_}?sdkAppid=${this.sdkAppId_}&identifier=${this.userId_}&userSig=${this.userSig_}`,this.isConnected_=!1,this.isConnecting_=!1,this.socketInUse_=null,this.socket_=null,this.backupSocket_=null,this.backupTimer_=-1,this.signalInfo_={},this.currentState_=Ho,this.reconnectionCount_=0,this.reconnectionTimer_=-1,this.seq_=0,this.log_=Uo.createLogger({id:"ws|"+this.userId_,userId:this.userId_,sdkAppId:this.sdkAppId_}),this.pingPongTimeoutId_=-1,this.pingTimeoutId_=-1,this.emitter_=new Qr}connect(){this.log_.info("connect to url: "+this.urlWithParam_),this.emitter_.emit(Vo,{prevState:this.currentState_,state:Qo}),this.currentState_=Qo,this.socket_=new WebSocket(this.urlWithParam_),this.bindSocket(this.socket_),this.backupTimer_=setTimeout(()=>{this.isConnected_||(this.log_.info("trying to connect to backupUrl"),this.tryConnectBackup())},5e3)}tryConnectBackup(){this.backupSocket_||(this.unbindAndCloseSocket("main"),this.log_.debug("try to connect to url: "+this.backupUrlWithParam_),this.backupSocket_=new WebSocket(this.backupUrlWithParam_),this.bindSocket(this.backupSocket_))}bindSocket(e){e.onopen=this.onopen.bind(this),e.onclose=this.onclose.bind(this),e.onerror=this.onerror.bind(this),e.onmessage=this.onmessage.bind(this)}unbindSocket(e){e.onopen=()=>{},e.onclose=()=>{},e.onerror=()=>{},e.onmessage=()=>{}}unbindAndCloseSocket(e){if("main"===e){if(this.socket_){this.unbindSocket(this.socket_);try{this.socket_.close(1e3)}catch(n){}this.socket_=null}}else if(this.backupSocket_){this.unbindSocket(this.backupSocket_);try{this.backupSocket_.close(1e3)}catch(n){}this.backupSocket_=null}}clearBackupTimer(){-1!==this.backupTimer_&&(clearTimeout(this.backupTimer_),this.backupTimer_=-1)}clearReconnectionTimer(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}onopen(e){if(this.isConnected_)return;this.isConnected_=!0,this.isConnecting_=!1,this.clearBackupTimer(),e.target===this.socket_?(this.unbindAndCloseSocket("backup"),this.socketInUse_=this.socket_):(this.unbindAndCloseSocket("main"),this.socketInUse_=this.backupSocket_);const t=e.target.url;this.log_.info(`websocket[${t}] is connected`),this.emitter_.emit(Vo,{prevState:this.currentState_,state:qo}),this.currentState_===Qo?this.addSignalEvent(Vs,"signal channel is connected"):this.currentState_===Wo&&this.addSignalEvent(Qs,"signal channel reconnect success"),this.currentState_=qo,this.emitter_.emit(jo)}onclose(e){const t=e.target.url,i=e.target===this.socketInUse_;this.log_.info(`websocket[${t} InUse: ${i}] is closed with code: ${e.code}`),e.target===this.socketInUse_&&(this.isConnected_=!1,e.wasClean&&1e3===e.code?(this.emitter_.emit(Vo,{prevState:this.currentState_,state:Ho}),this.currentState_=Ho,this.addSignalEvent(Fs,"signal channel is disconnected")):(this.log_.warn(`onclose code:${e.code} reason:${e.reason}`),this.log_.warn("close current websocket and schedule a reconnect timeout"),this.socketInUse_.onclose=()=>{},this.socketInUse_.close(4011),this.socket_=this.backupSocket_=this.socketInUse_=null,this.reconnect("main")))}onerror(e){const t=e.target.url;this.log_.error(`websocket[${t}] error observed`),this.isConnected_?e.target===this.socketInUse_&&(this.isConnected_=!1,this.unbindAndCloseSocket("main"),this.unbindAndCloseSocket("backup"),this.socketInUse_=null,this.reconnect("main")):(this.isReconnecting_||Tr.logFailedEvent({userId:this.client_.getUserId(),eventType:vi,code:Cr.UNKNOWN}),e.target==this.socket_?(this.unbindAndCloseSocket("main"),this.reconnect("backup")):(this.unbindAndCloseSocket("backup"),this.reconnect("main"))),this.isConnecting_=!1,this.isConnected_=!1}onmessage(e){if(!this.isConnected_)return;const t=JSON.parse(e.data),i=t.cmd,n=t.content,r=Object.values($o),o=Object.keys($o)[r.indexOf(i)],s=Zo[o];if(!zo.includes(i)){const t=e.target==this.socket_?this.url_:this.backupUrl_;if(this.log_.debug(`websocket[${t}] received message: ${e.data}`),this.log_.info(`Received event: [ ${s||"unknown cmd: "+i} ]`),(s===Zo.UPDATE_REMOTE_SDP||s===Zo.UPDATE_AUDIO_SSRC||s===Zo.UPDATE_VIDEO_SSRC)&&n.offersdp)try{const{audiossrc:e,videossrc:t,rtxssrc:i}=JSON.parse(n.offersdp);this.log_.info(`ssrc info in offersdp: [ audiossrc: ${e} videossrc: ${t} rtxssrc: ${i} ]`)}catch(l){}}switch(i){case $o.CHANNEL_SETUP_SUCCESS:this.signalInfo_.relayIp=n.relayip,this.signalInfo_.relayInnerIp=n.innerip,this.signalInfo_.signalIp=n.signalip,this.signalInfo_.localIp=n.localip,this.signalInfo_.dataPort=n.dataport,this.signalInfo_.stunPort=n.stunport,this.signalInfo_.checkSigSeq=n.checkSigSeq,this.signalInfo_.socketId=n.socketid,this.signalInfo_.tinyId=n.tinyid,this.signalInfo_.openId=n.openid,this.signalInfo_.stunPortList=n.stunportList,!n.stunportList||n.stunportList.length<=0?this.signalInfo_.stunServers="stun:"+n.relayip+":"+n.stunport:(this.signalInfo_.stunServers=[],n.stunportList.forEach(e=>{const t="stun:"+n.relayip+":"+e;this.signalInfo_.stunServers.push(t)})),n.cgiurl&&(this.signalInfo_.logCgiUrl=n.cgiurl),n.svrTime&&function(e){ge=e,me=ge-(new Date).getTime();const t=new Date;t.setTime(e),Uo.info("baseTime from server: "+t+" offset: "+me)}(n.svrTime),this.log_.info(`ChannelSetup Success: signalIp:${n.signalip} relayIp:${n.relayip} clientIp:${n.localip} checkSigSeq:${n.checkSigSeq}`),this.log_.info("start ping pong"),this.startPingPong(),this.isReconnecting_&&(this.reconnectionCount_=0,this.clearReconnectionTimer(),1===n.rc&&this.emitter_.emit(Zo.REQUEST_REBUILD_SESSION,{signalInfo:this.signalInfo_})),this.emitter_.emit(s,{signalInfo:this.signalInfo_});break;case $o.REBUILD_SESSION_RESULT:0===n.result?(this.log_.info("reconnect - rebuild session succeeded"),this.client_.checkConnectionsToReconnect()):(this.emitter_.emit(Zo.CLIENT_REJOIN),this.log_.error("reconnect - rebuild session failed: "+JSON.stringify(n)));break;case $o.CHANNEL_SETUP_FAILED:if(!this.isReconnecting_){let e="sdkAppId invalid",t="";Pr(n.errorCode)||(e=n.errorCode,t=n.errorMsg);const i=new br({code:Cr.SIGNAL_CHANNEL_SETUP_FAILED,extraCode:e,message:zc({key:ua,data:{errorCode:e,errorMsg:t}})});this.close(),Tr.logFailedEvent({userId:this.client_.getUserId(),eventType:vi,error:i}),this.emitter_.emit(Go,i)}break;default:this.emitter_.emit(s,{data:t})}}addSignalEvent(e,t){Xs(this.userId_,{eventId:e,eventDesc:t,timestamp:_e(),userId:this.userId_,tinyId:this.signalInfo_.tinyId})}reconnect(e="main"){if(this.isConnecting_||-1!==this.reconnectionTimer_)return void this.log_.info("signal channel is reconnecting, ignoring current reconnection");if(this.reconnectionCount_>=30){this.log_.warn("SDK has tried reconnect signal channel for 30 times, but all failed. please check your network");const e=new br({code:Cr.SIGNAL_CHANNEL_RECONNECTION_FAILED,message:zc({key:la})});return Tr.logFailedEvent({userId:this.client_.getUserId(),eventType:Ei,error:e}),this.addSignalEvent(Ws,"signal channel reconnect fail"),void this.emitter_.emit(Go,e)}this.isConnecting_=!0,this.reconnectionCount_++,this.currentState_!==Wo&&(this.emitter_.emit(Vo,{prevState:this.currentState_,state:Wo}),this.currentState_=Wo,this.addSignalEvent(Hs,"signal channel is reconnecting")),this.log_.warn(`reconnecting to ${e} signal channel [${this.reconnectionCount_}/30]`);const t=this.getReconnectionUrl(e);"main"===e?(this.socket_=new WebSocket(t),this.bindSocket(this.socket_)):(this.backupSocket_=new WebSocket(t),this.bindSocket(this.backupSocket_));const i=Nr(this.reconnectionCount_);this.reconnectionTimer_=setTimeout(()=>{this.log_.warn(`reconnect ${e} signal channel timeout(${i/1e3}s), close and try again`),this.isConnecting_=!1,this.clearReconnectionTimer(),this.unbindAndCloseSocket(e),this.reconnect("main"===e?"backup":"main")},i)}isConnected(){return this.isConnected_}get isReconnecting_(){return-1!==this.reconnectionTimer_}getReconnectionUrl(e){let t="main"===e?this.urlWithParam_:this.backupUrlWithParam_;return ta(this.signalInfo_)||-1!==t.indexOf("&rc=1")||(t+="&iip="+this.signalInfo_.relayInnerIp+"&dp="+this.signalInfo_.dataPort+"&oip="+this.signalInfo_.relayIp+"&sp="+this.signalInfo_.stunPort+"&rc=1"),t}send(e,t="",i){if(this.isConnected_){const n=this.createSendMessage(e);return n.data=t,void 0!==i&&(n.srctinyid=i),this.socketInUse_.send(JSON.stringify(n)),n.seq}}sendWithoutUA(e,t="",i){if(this.isConnected_){const n=this.createSendMessage(e,!1);return n.data=t,void 0!==i&&(n.srctinyid=i),this.socketInUse_.send(JSON.stringify(n)),n.seq}}sendWithReport(e,t="",i){if(this.isConnected_){const n=this.createSendMessage(e);return n.data=t,n.report=i,this.socketInUse_.send(JSON.stringify(n)),n.seq}}sendWaitForResponse({command:e,data:t,timeout:i=5e3,responseCommand:n,commandDesc:r,retry:o=0}){let s=0;return new Promise((a,c)=>{const l=()=>{if(s<o)return s++,this.log_.warn(`${r} timeout observed, retrying [${s}/${o}]`),void d();this.off(n,u);const t=new br({code:Cr.API_CALL_TIMEOUT,message:zc({key:ca,data:{commandDesc:r,command:e}})});this.log_.warn(t),c(t)},u=e=>{e.data.seq===p&&(clearTimeout(h),this.off(n,u),a(e))},d=()=>{h=setTimeout(l,i),p=this.send(e,t,0)};let h,p;this.on(n,u),d()})}async startPingPong(){try{if(-1!==this.pingPongTimeoutId_)return;await this.ping(),this.pingPongTimeoutId_=setTimeout(()=>{this.pingPongTimeoutId_=-1,this.startPingPong()},1e4),this.client_.isRelayMaybeFailed()&&this.emitter_.emit(Zo.CLIENT_REJOIN)}catch(i){this.log_.warn("ping-pong failed, start signal reconnection"),this.close(),this.reconnect("main")}}stopPingPong(){this.log_.info("stop ping pong"),clearTimeout(this.pingTimeoutId_),clearTimeout(this.pingPongTimeoutId_),this.pingTimeoutId_=-1,this.pingPongTimeoutId_=-1}ping(){return new Promise((e,t)=>{if(-1!==this.pingTimeoutId_)return e();this.sendWithoutUA(ns),this.once(Zo.PONG,()=>{clearTimeout(this.pingTimeoutId_),this.pingTimeoutId_=-1,e()}),this.pingTimeoutId_=setTimeout(()=>{this.pingTimeoutId_=-1,t()},1e4)})}createSendMessage(e,t=!0){const i={tag_key:e,data:"",openid:this.userId_,tinyid:this.signalInfo_.tinyId,version:this.version_,seq:++this.seq_};return t&&(i.ua=navigator.userAgent),i}getCurrentState(){return this.currentState_}getSocketId(){return this.signalInfo_.socketId}close(){this.log_.info("close SignalChannel"),this.clearBackupTimer(),this.clearReconnectionTimer(),this.stopPingPong(),this.isConnecting_=!1,this.isConnected_=!1,this.socketInUse_=null,this.unbindAndCloseSocket("main"),this.unbindAndCloseSocket("backup")}on(e,t,i){this.emitter_.on(e,t,i)}removeListener(e,t,i){this.emitter_.removeListener(e,t,i)}once(e,t,i){this.emitter_.once(e,t,i)}off(e,t,i){this.emitter_.off(e,t,i)}}var Yc=R((function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))})),Kc=(Yc.v,Yc.o,Yc.s,Yc.i,Yc.u,Yc.e,Yc.p,Yc.z,Yc.r,Yc.t,Yc.c,Yc.b,Yc.m,Yc.a,R((function(e,t){var i=function(e){return String(Number(e))===e?Number(e):e},n=function(e,t,n){var r=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:r&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:r?t[e.name]:t;!function(e,t,n,r){if(r&&!n)t[r]=i(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=i(e[o+1]))}(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},r=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},i=[],o=t;return e.split(/(\r\n|\r|\n)/).filter(r).forEach((function(e){var t=e[0],r=e.slice(2);"m"===t&&(i.push({rtp:[],fmtp:[]}),o=i[i.length-1]);for(var s=0;s<(Yc[t]||[]).length;s+=1){var a=Yc[t][s];if(a.reg.test(r))return n(a,o,r)}})),t.media=i,t};var o=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=i(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(i),r=0;r<n.length;r+=3)t.push({component:n[r],ip:n[r+1],port:n[r+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=i(e):(t=i(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}}))),Jc=(Kc.parse,Kc.parseParams,Kc.parseFmtpConfig,Kc.parsePayloads,Kc.parseRemoteCandidates,Kc.parseImageAttributes,Kc.parseSimulcastStreamList,/%[sdv%]/g),Xc=function(e){var t=1,i=arguments,n=i.length;return e.replace(Jc,(function(e){if(t>=n)return e;var r=i[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(r);case"%d":return Number(r);case"%v":return""}}))},el=function(e,t,i){var n=[e+"="+(t.format instanceof Function?t.format(t.push?i:i[t.name]):t.format)];if(t.names)for(var r=0;r<t.names.length;r+=1){var o=t.names[r];t.name?n.push(i[t.name][o]):n.push(i[t.names[r]])}else n.push(i[t.name]);return Xc.apply(null,n)},tl=["v","o","s","i","u","e","p","c","b","t","r","z","a"],il=["i","c","b","a"],nl={write:function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var i=t.outerOrder||tl,n=t.innerOrder||il,r=[];return i.forEach((function(t){Yc[t].forEach((function(i){i.name in e&&null!=e[i.name]?r.push(el(t,i,e)):i.push in e&&null!=e[i.push]&&e[i.push].forEach((function(e){r.push(el(t,i,e))}))}))})),e.media.forEach((function(e){r.push(el("m",Yc.m[0],e)),n.forEach((function(t){Yc[t].forEach((function(i){i.name in e&&null!=e[i.name]?r.push(el(t,i,e)):i.push in e&&null!=e[i.push]&&e[i.push].forEach((function(e){r.push(el(t,i,e))}))}))}))})),r.join("\r\n")+"\r\n"},parse:Kc.parse,parseParams:Kc.parseParams,parseFmtpConfig:Kc.parseFmtpConfig,parsePayloads:Kc.parsePayloads,parseRemoteCandidates:Kc.parseRemoteCandidates,parseImageAttributes:Kc.parseImageAttributes,parseSimulcastStreamList:Kc.parseSimulcastStreamList};const rl=function(e){return nl.parse(e)},ol=function(e){return nl.write(e)},sl=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},al=new class{constructor(){this.intervalMap_=new Map}setInterval(e,t,i=!0){if(!window||!window.requestAnimationFrame)return setInterval(e,t);const n=sl();let r=Vr(),o=r;this.intervalMap_.set(n,{rafId:null,timeoutId:null,onVisibilityChange:null});const s=()=>{if(i&&document.hidden){e();const i=setTimeout(s,t);this.setTimeoutId(n,i),r=Vr(),o=r}else{o=Vr(),o-r>=t&&(r=o,e());const i=requestAnimationFrame(s);this.setRafId(n,i)}},a=requestAnimationFrame(s);if(this.setRafId(n,a),i){const e=()=>{if(document.hidden){const e=Vr()-r;if(e>=t)s();else{const i=setTimeout(s,t-e);this.setTimeoutId(n,i)}}};document.addEventListener("visibilitychange",e),this.setOnVisibilityChange(n,e)}return n}clearInterval(e){if(this.intervalMap_.has(e)){const{rafId:t,timeoutId:i,onVisibilityChange:n}=this.intervalMap_.get(e);cancelAnimationFrame(t),clearTimeout(i),document.removeEventListener("visibilitychange",n),this.intervalMap_.delete(e)}}setTimeoutId(e,t){if(this.intervalMap_.has(e)){const i=this.intervalMap_.get(e);i.timeoutId&&clearTimeout(i.timeoutId),i.timeoutId=t}}setRafId(e,t){if(this.intervalMap_.has(e)){const i=this.intervalMap_.get(e);i.rafId&&cancelAnimationFrame(i.rafId),i.rafId=t}}setOnVisibilityChange(e,t){this.intervalMap_.has(e)&&(this.intervalMap_.get(e).onVisibilityChange=t)}};var cl=new class{constructor(){this.prefix_="TRTC",this.queue_=new Map,this.intervalId_=al.setInterval(this.doFlush.bind(this),2e4),this.checkStorage()}getRealKey(e){return`${this.prefix_}_${e}`}checkStorage(){bt()&&Object.keys(localStorage).filter(e=>{if(e.startsWith(this.prefix_)){const t=JSON.parse(localStorage.getItem(e));if(t&&t.expiresIn<Date.now())return!0}return!1}).forEach(e=>localStorage.removeItem(e))}doFlush(){if(bt())try{for(const[e,t]of this.queue_)localStorage.setItem(e,JSON.stringify(t))}catch(i){Uo.warn(i)}}getItem(e){if(!bt())return null;try{const t=JSON.parse(localStorage.getItem(this.getRealKey(e)));return t&&t.expiresIn>=Date.now()?t.value:null}catch(n){Uo.warn(n)}}setItem(e,t){if(bt())try{const i={expiresIn:Date.now()+6048e5,value:t};this.queue_.set(this.getRealKey(e),i)}catch(r){Uo.warn(r)}}deleteItem(e){if(!bt())return!1;try{return e=this.getRealKey(e),this.queue_.delete(e),localStorage.removeItem(e),!0}catch(n){return Uo.warn(n),!1}}clear(){if(bt())try{localStorage.clear()}catch(i){Uo.warn(i)}}};let ll={result:!1,detail:{isBrowserSupported:!1,isWebRTCSupported:!1,isMediaDevicesSupported:!1,isH264EncodeSupported:!1,isVp8EncodeSupported:!1,isH264DecodeSupported:!1,isVp8DecodeSupported:!1}};!function(){const e=cl.getItem("checkResult");e&&e.ua===navigator.userAgent&&(ll=e.checkResult,fl())}();const ul=function(){return!tt&&!Oe&&!(Ne&&Le<80)&&!(Re&&we<56)},dl=function(){return["RTCPeerConnection","webkitRTCPeerConnection","RTCIceGatherer"].filter(e=>e in window).length>0},hl=async function(){if(ll.detail.isH264DecodeSupported||ll.detail.isVp8DecodeSupported)return{isH264DecodeSupported:ll.detail.isH264DecodeSupported,isVp8DecodeSupported:ll.detail.isVp8DecodeSupported};let e="",t=!1,i=!1;try{const n=new RTCPeerConnection;return e=await n.createOffer({offerToReceiveAudio:1,offerToReceiveVideo:1}),-1!==e.sdp.toLowerCase().indexOf("h264")&&(t=!0),-1!==e.sdp.toLowerCase().indexOf("vp8")&&(i=!0),n.close(),{isH264DecodeSupported:t,isVp8DecodeSupported:i}}catch(o){return{isH264DecodeSupported:!1,isVp8DecodeSupported:!1}}},pl=((e,t)=>{let i=null;return function(...n){return i||(i=e.apply(t||this,n),i.then(e=>(i=null,e)).catch(e=>{throw i=null,e}),i)}})((async function(){if(ll.result)return ll;const e=ul(),t=dl(),i=function(){if(!navigator.mediaDevices)return!1;const e=["getUserMedia","enumerateDevices"];return e.filter(e=>e in navigator.mediaDevices).length===e.length}();let{isH264EncodeSupported:n,isVp8EncodeSupported:r}=await async function(){if(ll.detail.isH264EncodeSupported||ll.detail.isVp8EncodeSupported)return{isH264EncodeSupported:ll.detail.isH264EncodeSupported,isVp8EncodeSupported:ll.detail.isVp8EncodeSupported};let e="",t=!1,i=!1;try{const n=new RTCPeerConnection,r=document.createElement("canvas");r.getContext("2d");const o=r.captureStream(0);return n.addTrack(o.getVideoTracks()[0],o),e=await n.createOffer(),-1!==e.sdp.toLowerCase().indexOf("h264")&&(t=!0),-1!==e.sdp.toLowerCase().indexOf("vp8")&&(i=!0),n.close(),ll.detail.isH264EncodeSupported=t,ll.detail.isVp8EncodeSupported=i,{isH264EncodeSupported:ll.detail.isH264EncodeSupported,isVp8EncodeSupported:ll.detail.isVp8EncodeSupported}}catch(n){return{isH264EncodeSupported:!1,isVp8EncodeSupported:!1}}}(),{isH264DecodeSupported:o,isVp8DecodeSupported:s}=await hl();if(n&&o&&(lt||dt||At)&&pt()<79){const{encode:e,decode:t}=await async function(){return new Promise(async e=>{const t={encode:!1,decode:!1};let i=null;try{const n=document.createElement("canvas"),r=n.getContext("2d");n.width=640,n.height=480;const o=setInterval(()=>{r.fillText("test",Math.floor(640*Math.random()),Math.floor(480*Math.random()))},33);let s=-1,a=-1;i=()=>{clearInterval(s),clearInterval(o),clearTimeout(a),l.close(),u.close(),c.getTracks().forEach(e=>e.stop())},a=setTimeout(()=>{i(),e(t)},3e3);const c=n.captureStream(),l=new RTCPeerConnection({}),u=new RTCPeerConnection({offerToReceiveAudio:!0,offerToReceiveVideo:!0});l.addEventListener("icecandidate",e=>u.addIceCandidate(e.candidate)),u.addEventListener("icecandidate",e=>l.addIceCandidate(e.candidate)),l.addTrack(c.getVideoTracks()[0],c);const d=await l.createOffer();await l.setLocalDescription(d),await u.setRemoteDescription(d);const h=await u.createAnswer(),p=rl(h.sdp),f=p.media[0].rtp.findIndex(e=>"H264"===e.codec);p.media[0].rtp=[p.media[0].rtp[f]],p.media[0].fmtp=p.media[0].fmtp.filter(e=>e.payload===p.media[0].rtp[0].payload),p.media[0].rtcpFb=p.media[0].rtcpFb.filter(e=>e.payload===p.media[0].rtp[0].payload),h.sdp=ol(p),await u.setLocalDescription(h),await l.setRemoteDescription(h),s=setInterval(async()=>{t.encode&&t.decode&&(i(),e(t));const n=await l.getStats(),r=await u.getStats();t.encode||n.forEach(e=>{"outbound-rtp"===e.type&&e.mediaType===Bi&&e.framesEncoded>0&&(t.encode=!0)}),t.decode||r.forEach(e=>{"inbound-rtp"===e.type&&e.mediaType===Bi&&e.framesDecoded>0&&(t.decode=!0)})},500)}catch(n){i(),Uo.warn(n),e(t)}})}();n=e,o=t}return ll.result=e&&t&&i&&(n||r)&&(o||s),ll.detail.isBrowserSupported=e,ll.detail.isWebRTCSupported=t,ll.detail.isMediaDevicesSupported=i,ll.detail.isH264EncodeSupported=n,ll.detail.isVp8EncodeSupported=r,ll.detail.isH264DecodeSupported=o,ll.detail.isVp8DecodeSupported=s,fl(),cl.setItem("checkResult",{ua:navigator.userAgent,checkResult:ll}),ll}));function fl(){Object.keys(ll.detail).findIndex(e=>!ll.detail[e])>=0&&Uo.error(`${navigator.userAgent} ${JSON.stringify(ll.detail)}`)}const gl=function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia)},ml=function(){return"RTCPeerConnection"in window&&"getReceivers"in window.RTCPeerConnection.prototype},_l=function(){return"RTCPeerConnection"in window&&"getSenders"in window.RTCPeerConnection.prototype},vl=function(){return"RTCPeerConnection"in window&&"getTransceivers"in window.RTCPeerConnection.prototype},El=function(){return"RTCRtpTransceiver"in window&&"stop"in window.RTCRtpTransceiver.prototype},Al=function(){return"RTCRtpSender"in window&&"setParameters"in window.RTCRtpSender.prototype&&_l()},yl=function(){return!!Pr(navigator.mediaDevices)&&(Uo.error(Wc.NOT_SUPPORTED_MEDIA),!0)},Sl=function(){return"http:"===location.protocol&&!Ct&&(Uo.error(Wc.NOT_SUPPORTED_HTTP),!0)},Cl=function(e){return!("candidate-pair"!==e.type||!e.nominated||"in-progress"!==e.state&&"succeeded"!==e.state)&&!(xr(e.selected)&&!e.selected)};let bl=new Map([[Ie,"Android"],[Te,"iOS"],[Je,"Windows"],[Xe,"MacOS"],[et,"Linux"]]);const Tl=function(){let e="unknown";return bl.get(!0)&&(e=bl.get(!0)),e};function Il(){let e="";return screen.width&&(e+=(screen.width?screen.width*window.devicePixelRatio:"")+" * "+(screen.height?screen.height*window.devicePixelRatio:"")),e}function Rl(){let e=!1;return(navigator.getUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)&&(e=!0),e}function wl(){let e={isSupported:!1},t=["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"];for(let i=0;i<t.length;i++)if(t[i]in window){e.isSupported=!0;break}return e.isSupported}function Ol(){return!je&&!Te&&!(!ul()||!("captureStream"in HTMLCanvasElement.prototype))}const kl=()=>{const e={AudioDecoder:!1,AudioEncoder:!1,VideoDecoder:!1,VideoEncoder:!1,ImageDecoder:!1};return Pr(window.AudioDecoder)||(e.AudioDecoder=!0),Pr(window.AudioEncoder)||(e.AudioEncoder=!0),Pr(window.VideoDecoder)||(e.VideoDecoder=!0),Pr(window.VideoEncoder)||(e.VideoEncoder=!0),Pr(window.ImageDecoder)||(e.ImageDecoder=!0),e};pl();const Nl="stream-added",Ll="stream-removed",Pl="stream-updated",Dl="stream-subscribed",Ml="error",xl="connection-state-changed",Bl="stream-added",Ul="stream-removed",Fl="stream-updated",Vl="stream-subscribed",jl="connection-state-changed",Gl="peer-join",Hl="peer-leave",Ql="mute-audio",Wl="mute-video",ql="unmute-audio",$l="unmute-video",zl="client-banned",Zl="network-quality",Yl="audio-volume",Kl="error",Jl="player-state-changed",Xl="screen-sharing-stopped",eu="connection-state-changed",tu="error",iu="player-state-changed";class nu{constructor(e){const t=e.getUserId();this.log_=Uo.createLogger({id:t,userId:t,sdkAppId:e.getSDKAppId()}),this.prevReport_={},this.prevEncoderImplementation_="",this.prevQualityLimitationReason_="",this.prevDecoderImplementationMap_=new Map}async getSenderStats(e){const t={audio:{bytesSent:0,packetsSent:0,audioLevel:0,totalAudioEnergy:0},video:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0,fpsCapture:0,smallFramesEncoded:0,smallFPSCapture:0,smallFramesSent:0},rtt:0},i=e.getPeerConnection(),n=e.getSSRC();if(i)try{(await i.getStats()).forEach(i=>{if("outbound-rtp"===i.type)if(i.mediaType===Bi){if(!Re&&Pr(i.trackId))return;i.ssrc!==n.video||Pr(i.encoderImplementation)||this.prevEncoderImplementation_===i.encoderImplementation||(this.log_.info("encoderImplementation change to "+i.encoderImplementation),this.prevEncoderImplementation_=i.encoderImplementation),i.ssrc!==n.video||Pr(i.qualityLimitationReason)||this.prevQualityLimitationReason_===i.qualityLimitationReason||(this.log_.info("qualityLimitationReason change to "+i.qualityLimitationReason),this.prevQualityLimitationReason_=i.qualityLimitationReason);const r=e.getSSRC();i.ssrc===r.video?(t.video.bytesSent=i.bytesSent,t.video.packetsSent=i.packetsSent,t.video.framesEncoded=i.framesEncoded):(t.video.smallBytesSent=i.bytesSent,t.video.smallFramesEncoded=i.framesEncoded)}else i.mediaType===xi&&(t.audio.bytesSent=i.bytesSent,t.audio.packetsSent=i.packetsSent);else"candidate-pair"===i.type?Cl(i)&&Mr(i.currentRoundTripTime)&&(t.rtt=Math.floor(1e3*i.currentRoundTripTime)):"track"===i.type?(Pr(i.frameWidth)||(i.trackIdentifier===e.getLocalStreamVideoTrackId()?(t.video.frameWidth=i.frameWidth,t.video.frameHeight=i.frameHeight,t.video.framesSent=i.framesSent):(t.video.smallFrameWidth=i.frameWidth,t.video.smallFrameHeight=i.frameHeight,t.video.smallFramesSent=i.framesSent)),Pr(i.audioLevel)||(t.audio.audioLevel=i.audioLevel||0)):"media-source"===i.type&&(i.kind===xi?(t.audio.audioLevel=i.audioLevel||0,t.audio.totalAudioEnergy=i.totalAudioEnergy||0):i.kind===Bi&&(i.trackIdentifier===e.getLocalStreamVideoTrackId()?t.video.fpsCapture=i.framesPerSecond:t.video.smallFPSCapture=i.framesPerSecond))})}catch(s){this.log_.warn("failed to getStats on sender connection")}return t}async getReceiverStats(e){const t={tinyId:e.getTinyId(),userId:e.getUserId(),rtt:0,hasAudio:!1,hasVideo:!1,hasAuxiliary:!1,audio:{bytesReceived:0,packetsReceived:0,packetsLost:0,jitter:0,audioLevel:0,totalAudioEnergy:0},video:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesReceived:0,framesDecoded:0,frameWidth:0,frameHeight:0},auxiliary:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesReceived:0,framesDecoded:0,frameWidth:0,frameHeight:0}},i=e.getPeerConnection();if(i)try{(await i.getStats()).forEach(i=>{if("inbound-rtp"===i.type){if(i.mediaType===xi)t.audio.packetsReceived=i.packetsReceived,t.audio.bytesReceived=i.bytesReceived,t.audio.packetsLost=i.packetsLost,t.audio.jitter=i.jitter,t.hasAudio=!0;else if(i.mediaType===Bi){if(Re&&0===i.bytesReceived)return;const n=e.getSSRC();i.ssrc===n.video&&(t.video.packetsReceived=i.packetsReceived,t.video.bytesReceived=i.bytesReceived,t.video.packetsLost=i.packetsLost,t.video.framesReceived=i.framesReceived,t.video.framesDecoded=i.framesDecoded,t.video.fpsDecoded=i.framesPerSecond,t.hasVideo=!0,!i.decoderImplementation||this.prevDecoderImplementationMap_.has(t.userId)&&this.prevDecoderImplementationMap_.get(t.userId)===i.decoderImplementation||(Uo.info(`[${t.userId}] decoderImplementation change to ${i.decoderImplementation}`),this.prevDecoderImplementationMap_.set(t.userId,i.decoderImplementation))),i.ssrc===n.auxiliary&&(t.auxiliary.packetsReceived=i.packetsReceived,t.auxiliary.bytesReceived=i.bytesReceived,t.auxiliary.packetsLost=i.packetsLost,t.auxiliary.framesReceived=i.framesReceived,t.auxiliary.framesDecoded=i.framesDecoded,t.auxiliary.fpsDecoded=i.framesPerSecond,t.hasAuxiliary=!0)}}else"track"===i.type?(Pr(i.frameWidth)||(i.trackIdentifier===e.getMainStreamVideoTrackId()&&(t.video.frameWidth=i.frameWidth,t.video.frameHeight=i.frameHeight),i.trackIdentifier===e.getAuxStreamVideoTrackId()&&(t.auxiliary.frameWidth=i.frameWidth,t.auxiliary.frameHeight=i.frameHeight)),i.kind===xi&&(t.audio.audioLevel=i.audioLevel||0,t.audio.totalAudioEnergy=i.totalAudioEnergy||0)):"candidate-pair"===i.type&&Cl(i)&&Mr(i.currentRoundTripTime)&&(t.rtt=Math.floor(1e3*i.currentRoundTripTime))})}catch(o){this.log_.warn("failed to getStats on receiver connection")}return t}async getStats(e,t){let i={};e&&(i=await this.getSenderStats(e));const n=[];for(let[r,o]of t){const e=await this.getReceiverStats(o);n.push(e)}return{senderStats:i,receiverStats:n}}prepareReport({stats:e,report:t,freezeMap:i}){if(!ta(e.senderStats)&&(t.uint32_delay=e.senderStats.rtt,t.RTTReportState.uint32_delay=e.senderStats.rtt,t.AudioReportState.sentAudioLevel=e.senderStats.audio.audioLevel,t.AudioReportState.sentAudioEnergy=e.senderStats.audio.totalAudioEnergy,t.AudioReportState.uint32_audio_enc_pkg_br=e.senderStats.audio.bytesSent,t.VideoReportState.uint32_video_snd_br=e.senderStats.video.bytesSent,t.VideoReportState.uint32_send_total_pkg=e.senderStats.video.packetsSent,t.VideoReportState.VideoEncState[0].uint32_enc_width=e.senderStats.video.frameWidth,t.VideoReportState.VideoEncState[0].uint32_enc_height=e.senderStats.video.frameHeight,t.VideoReportState.VideoEncState[0].uint32_enc_fps=e.senderStats.video.framesEncoded,t.VideoReportState.VideoEncState[0].uint32_capture_fps=e.senderStats.video.fpsCapture,t.VideoReportState.VideoEncState[0].uint32_send_fps=e.senderStats.video.framesSent,e.senderStats.video.smallBytesSent)){t.VideoReportState.uint32_small_video_snd_br=e.senderStats.video.smallBytesSent;const i={uint32_enc_width:e.senderStats.video.smallFrameWidth||0,uint32_enc_height:e.senderStats.video.smallFrameHeight||0,uint32_enc_fps:e.senderStats.video.smallFramesEncoded||0,uint32_capture_fps:e.senderStats.video.smallFPSCapture||0,uint32_send_fps:e.senderStats.video.smallFramesSent||0};t.VideoReportState.VideoEncState.push(i)}e.receiverStats.forEach(e=>{const n=e.userId;if(t.RTTReportState.RTTDecState.push({uint32_delay:e.rtt,uint64_sender_uin:e.tinyId}),e.hasAudio&&(t.AudioReportState.AudioDecState.push({uint32_audio_delay:0,uint32_audio_jitter:e.audio.jitter,uint32_audio_real_recv_pkg:e.audio.packetsReceived,uint32_audio_flow:e.audio.bytesReceived,uint32_audio_real_recv_br:0,uint64_sender_uin:e.tinyId,userId:e.userId,packetsLost:e.audio.packetsLost,totalPacketsLost:e.audio.packetsLost,audioLevel:e.audio.audioLevel,audioEnergy:e.audio.totalAudioEnergy}),t.AudioReportState.uint32_audio_real_recv_pkg+=e.audio.packetsReceived,t.AudioReportState.uint32_audio_flow+=e.audio.bytesReceived,t.uint32_real_num+=e.audio.packetsReceived),e.hasVideo){const r=i.get(n+"_main"),o=r?r.duration:0;t.VideoReportState.VideoDecState.push({uint32_video_recv_fps:e.video.framesReceived,uint32_video_dec_fps:e.video.fpsDecoded,uint32_video_recv_br:e.video.bytesReceived,uint32_video_real_recv_pkg:e.video.packetsReceived,uint32_dec_height:e.video.frameHeight,uint32_dec_width:e.video.frameWidth,uint32_video_jitter:0,uint64_sender_uin:e.tinyId,userId:e.userId,packetsLost:e.video.packetsLost,totalPacketsLost:e.video.packetsLost,uint32_video_strtype:0,int32_video_freeze_ms:o}),t.VideoReportState.uint32_video_total_real_recv_pkg+=e.video.packetsReceived,t.VideoReportState.uint32_video_rcv_br+=e.video.bytesReceived}if(e.hasAuxiliary){const r=i.get(n+"_auxiliary"),o=r?r.duration:0;t.VideoReportState.VideoDecState.push({uint32_video_recv_fps:e.auxiliary.framesReceived,uint32_video_dec_fps:e.auxiliary.fpsDecoded,uint32_video_recv_br:e.auxiliary.bytesReceived,uint32_video_real_recv_pkg:e.auxiliary.packetsReceived,uint32_dec_height:e.auxiliary.frameHeight,uint32_dec_width:e.auxiliary.frameWidth,uint32_video_jitter:0,uint64_sender_uin:e.tinyId,userId:e.userId,packetsLost:e.auxiliary.packetsLost,totalPacketsLost:e.auxiliary.packetsLost,uint32_video_strtype:2,int32_video_freeze_ms:o})}}),t.uint64_end_utime=(new Date).getTime();const n=this.prevReport_;if(this.prevReport_=JSON.parse(JSON.stringify(t)),ta(n))t.AudioReportState.uint32_audio_enc_pkg_br=8*t.AudioReportState.uint32_audio_enc_pkg_br/2,t.VideoReportState.uint32_video_rcv_br=8*t.VideoReportState.uint32_video_rcv_br/2,t.VideoReportState.uint32_video_snd_br=8*t.VideoReportState.uint32_video_snd_br/2,t.VideoReportState.uint32_small_video_snd_br&&(t.VideoReportState.uint32_small_video_snd_br=8*t.VideoReportState.uint32_small_video_snd_br/2),t.VideoReportState.VideoDecState.forEach(e=>{e.uint32_video_recv_br=8*e.uint32_video_recv_br/2,t.uint32_total_send_bps=t.AudioReportState.uint32_audio_enc_pkg_br+t.VideoReportState.uint32_video_snd_br});else{if(t.uint64_begine_utime=n.uint64_end_utime,t.uint32_real_num-=n.uint32_real_num,t.uint32_real_num<=0&&(t.uint32_real_num=0),t.AudioReportState.uint32_audio_real_recv_pkg-=n.AudioReportState.uint32_audio_real_recv_pkg,t.AudioReportState.uint32_audio_real_recv_pkg<=0&&(t.AudioReportState.uint32_audio_real_recv_pkg=0),t.AudioReportState.uint32_audio_enc_pkg_br-=n.AudioReportState.uint32_audio_enc_pkg_br,t.AudioReportState.uint32_audio_enc_pkg_br<=0&&(t.AudioReportState.uint32_audio_enc_pkg_br=0),t.AudioReportState.uint32_audio_enc_pkg_br=8*t.AudioReportState.uint32_audio_enc_pkg_br/2,t.VideoReportState.uint32_video_snd_br-=n.VideoReportState.uint32_video_snd_br,t.VideoReportState.uint32_video_snd_br<=0&&(t.VideoReportState.uint32_video_snd_br=0),t.VideoReportState.uint32_video_snd_br=8*t.VideoReportState.uint32_video_snd_br/2,t.VideoReportState.uint32_small_video_snd_br&&(t.VideoReportState.uint32_small_video_snd_br-=n.VideoReportState.uint32_small_video_snd_br,t.VideoReportState.uint32_small_video_snd_br<=0&&(t.VideoReportState.uint32_small_video_snd_br=0),t.VideoReportState.uint32_small_video_snd_br=8*t.VideoReportState.uint32_small_video_snd_br/2),t.AudioReportState.uint32_audio_flow-=n.AudioReportState.uint32_audio_flow,t.AudioReportState.uint32_audio_flow<=0&&(t.AudioReportState.uint32_audio_flow=0),t.VideoReportState.uint32_send_total_pkg-=n.VideoReportState.uint32_send_total_pkg,t.VideoReportState.uint32_send_total_pkg<=0&&(t.VideoReportState.uint32_send_total_pkg=0),t.VideoReportState.uint32_video_rcv_br-=n.VideoReportState.uint32_video_rcv_br,t.VideoReportState.uint32_video_rcv_br<=0&&(t.VideoReportState.uint32_video_rcv_br=0),t.VideoReportState.uint32_video_rcv_br=8*t.VideoReportState.uint32_video_rcv_br/2,t.VideoReportState.uint32_video_total_real_recv_pkg-=n.VideoReportState.uint32_video_total_real_recv_pkg,t.VideoReportState.uint32_video_total_real_recv_pkg<=0&&(t.VideoReportState.uint32_video_total_real_recv_pkg=0),t.VideoReportState.VideoEncState[0].uint32_enc_fps-=n.VideoReportState.VideoEncState[0].uint32_enc_fps,t.VideoReportState.VideoEncState[0].uint32_enc_fps<0&&(t.VideoReportState.VideoEncState[0].uint32_enc_fps=0),t.VideoReportState.VideoEncState[0].uint32_enc_fps=t.VideoReportState.VideoEncState[0].uint32_enc_fps/2,t.VideoReportState.VideoEncState[0].uint32_send_fps-=n.VideoReportState.VideoEncState[0].uint32_send_fps,t.VideoReportState.VideoEncState[0].uint32_send_fps<0&&(t.VideoReportState.VideoEncState[0].uint32_send_fps=0),t.VideoReportState.VideoEncState[0].uint32_send_fps=t.VideoReportState.VideoEncState[0].uint32_send_fps/2,t.VideoReportState.VideoEncState[1]){let e=0,i=0;n.VideoReportState.VideoEncState[1]&&(e=n.VideoReportState.VideoEncState[1].uint32_enc_fps,i=n.VideoReportState.VideoEncState[1].uint32_enc_fps),t.VideoReportState.VideoEncState[1].uint32_enc_fps-=e,t.VideoReportState.VideoEncState[1].uint32_enc_fps<0&&(t.VideoReportState.VideoEncState[1].uint32_enc_fps=0),t.VideoReportState.VideoEncState[1].uint32_enc_fps=t.VideoReportState.VideoEncState[1].uint32_enc_fps/2,t.VideoReportState.VideoEncState[1].uint32_send_fps-=i,t.VideoReportState.VideoEncState[1].uint32_send_fps<0&&(t.VideoReportState.VideoEncState[1].uint32_send_fps=0),t.VideoReportState.VideoEncState[1].uint32_send_fps=t.VideoReportState.VideoEncState[1].uint32_send_fps/2}let e=t.VideoReportState.VideoDecState.length;for(let i=0;i<e;i++){const e=t.VideoReportState.VideoDecState[i],r=e.uint64_sender_uin,o=e.uint32_video_strtype;let s=e.uint32_video_real_recv_pkg,a=e.uint32_video_recv_br,c=e.uint32_video_recv_fps;for(let t=0;t<n.VideoReportState.VideoDecState.length;t++){const i=n.VideoReportState.VideoDecState[t];if(i.uint64_sender_uin===r&&i.uint32_video_strtype===o){e.packetsLost=e.totalPacketsLost-i.totalPacketsLost,s-=i.uint32_video_real_recv_pkg,s<=0&&(s=0),a-=i.uint32_video_recv_br,a<=0&&(a=0),c-=i.uint32_video_recv_fps,c<0&&(c=0);break}}t.VideoReportState.VideoDecState[i].uint32_video_real_recv_pkg=s,t.VideoReportState.VideoDecState[i].uint32_video_recv_br=8*a/2,t.VideoReportState.VideoDecState[i].uint32_video_recv_fps=c/2}e=t.AudioReportState.AudioDecState.length;for(let i=0;i<e;i++){const e=t.AudioReportState.AudioDecState[i];let r=e.uint32_audio_real_recv_pkg,o=e.uint32_audio_flow;const s=e.uint64_sender_uin;for(let t=0;t<n.AudioReportState.AudioDecState.length;t++){const i=n.AudioReportState.AudioDecState[t];if(i.uint64_sender_uin===s){e.packetsLost=e.totalPacketsLost-i.totalPacketsLost,r-=i.uint32_audio_real_recv_pkg,r<=0&&(r=0),o-=i.uint32_audio_flow,o<=0&&(o=0);break}}t.AudioReportState.AudioDecState[i].uint32_audio_real_recv_pkg=r,t.AudioReportState.AudioDecState[i].uint32_audio_flow=o,t.AudioReportState.AudioDecState[i].uint32_audio_real_recv_br=8*o/2}t.AudioReportState.uint32_audio_real_recv_br=8*t.AudioReportState.uint32_audio_flow/2,t.uint32_real_num=t.AudioReportState.uint32_audio_real_recv_pkg+t.VideoReportState.uint32_video_total_real_recv_pkg,t.uint32_total_send_bps=t.AudioReportState.uint32_audio_enc_pkg_br+t.VideoReportState.uint32_video_snd_br,t.uint32_total_recv_bps=t.AudioReportState.uint32_audio_real_recv_br+t.VideoReportState.uint32_video_rcv_br}return t}async getStatsReport({uplinkConnection:e,downlinkConnections:t,freezeMap:i}){const n={uint64_begine_utime:(new Date).getTime(),uint64_end_utime:0,uint32_real_num:0,uint32_delay:0,uint32_CPU_curfreq:0,uint32_total_send_bps:0,uint32_total_recv_bps:0,AudioReportState:{uint32_audio_enc_pkg_br:0,uint32_audio_real_recv_pkg:0,uint32_audio_flow:0,uint32_audio_real_recv_br:0,uint32_audio_delay:0,uint32_audio_jitter:0,uint32_microphone_status:1,sentAudioLevel:0,sentAudioEnergy:0,AudioDecState:[]},VideoReportState:{uint32_video_delay:0,uint32_video_snd_br:0,uint32_video_total_real_recv_pkg:0,uint32_video_rcv_br:0,uint32_send_total_pkg:0,VideoEncState:[{uint32_enc_width:0,uint32_enc_height:0,uint32_capture_fps:0,uint32_enc_fps:0,uint32_send_fps:0}],VideoDecState:[]},RTTReportState:{uint32_delay:0,RTTDecState:[]}},r=await this.getStats(e,t);return this.prepareReport({stats:r,report:n,freezeMap:i}),n}}class ru{constructor({signalChannel:e,connections:t,client:i}){this.client_=i,this.signalChannel_=e,this.connections_=t,this.client_=i,this.log_=Uo.createLogger({id:"q|"+this.client_.getUserId(),userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId()}),this.uplinkConnection_=null,this.uplinkNetworkQuality_=0,this.uplinkRTT_=0,this.uplinkLoss_=0,this.downlinkNetworkQuality_=0,this.downlinkRTT_=0,this.downlinkLoss_=0,this.downlinkPrevStatMap_=new Map,this.downlinkLossAndRTTMap_=new Map,this.interval_=-1,this.emitter_=new Qr,this.initialize()}get uplinkNetworkQuality(){return this.uplinkNetworkQuality_}set uplinkNetworkQuality(e){e!==this.uplinkNetworkQuality_&&this.log_.info(`uplink network quality change ${this.uplinkNetworkQuality} -> ${e}, rtt: ${this.uplinkRTT_}, loss: ${this.uplinkLoss_}`),this.uplinkNetworkQuality_=e}get downlinkNetworkQuality(){return this.downlinkNetworkQuality_}set downlinkNetworkQuality(e){if(e!==this.downlinkNetworkQuality_){const{rtt:t,loss:i}=this.getAverageLossAndRTT([...this.downlinkLossAndRTTMap_.values()]);this.log_.info(`downlink network quality change ${this.downlinkNetworkQuality} -> ${e}, rtt: ${t}, loss: ${i}`)}this.downlinkNetworkQuality_=e}initialize(){this.signalChannel_.on(Zo.UPLINK_NETWORK_STATS,e=>{this.handleUplinkNetworkQuality(e)}),this.signalChannel_.on(Vo,this.handleSignalConnectionStateChange.bind(this)),this.start()}handleUplinkNetworkQuality(e){if(!this.uplinkConnection_)return this.uplinkNetworkQuality=0,this.uplinkLoss_=0,void(this.uplinkRTT_=0);const t=this.uplinkConnection_.getPeerConnection();if(t&&this.isPeerConnectionDisconnected(t))return this.uplinkNetworkQuality=6,this.uplinkLoss_=0,void(this.uplinkRTT_=0);const{content:i}=e.data;if(0===i.result){const e=i.expectAudPkg+i.expectVidPkg,t=i.recvAudPkg+i.recvVidPkg,n=e-t;if(0===e&&0===t)return;this.uplinkLoss_=n<=0?0:Math.round(n/e*100),this.uplinkRTT_=i.rtt,this.uplinkNetworkQuality=this.getNetworkQuality(this.uplinkLoss_,this.uplinkRTT_)}}async handleDownlinkNetworkQuality(){if(!this.connections_||0===this.connections_.size)return void(this.downlinkNetworkQuality=0);const e=[...this.connections_.values()],t=e.filter(e=>e.getPeerConnection()&&e.getPeerConnection().connectionState===Jt);if(e.filter(e=>e.getPeerConnection()&&this.isPeerConnectionDisconnected(e.getPeerConnection())).length===e.length)return void(this.downlinkNetworkQuality=6);for(let r=0;r<t.length;r++){const e=t[r].getPeerConnection(),{rtt:i,totalPacketsLost:n,totalPacketsReceived:o}=await this.getStat(e);if(!this.downlinkPrevStatMap_.has(e)){this.downlinkPrevStatMap_.set(e,{totalPacketsLost:n,totalPacketsReceived:o});continue}let s=0;const a=this.downlinkPrevStatMap_.get(e),c=n-a.totalPacketsLost,l=o-a.totalPacketsReceived;s=c<=0||l<0?0:Math.round(c/(c+l)*100),this.downlinkPrevStatMap_.set(e,{totalPacketsLost:n,totalPacketsReceived:o}),this.downlinkLossAndRTTMap_.set(e,{rtt:i,loss:s,userId:t[r].getUserId()})}if([...this.downlinkPrevStatMap_.keys()].forEach(e=>{this.isPeerConnectionDisconnected(e)&&(this.downlinkPrevStatMap_.delete(e),this.downlinkLossAndRTTMap_.delete(e))}),0===this.downlinkLossAndRTTMap_.size)return;const{rtt:i,loss:n}=this.getAverageLossAndRTT([...this.downlinkLossAndRTTMap_.values()]);this.downlinkRTT_=i,this.downlinkLoss_=n,this.downlinkNetworkQuality=this.getNetworkQuality(n,i)}async getStat(e){const t={rtt:0,totalPacketsLost:0,totalPacketsReceived:0};if(!e||!ml())return t;const i=e.getReceivers();try{for(let e=0;e<i.length;e++){const n=i[e];(await n.getStats()).forEach(e=>{"candidate-pair"===e.type&&Mr(e.currentRoundTripTime)&&(t.rtt=Math.round(1e3*e.currentRoundTripTime)),"inbound-rtp"!==e.type||e.mediaType!==xi&&e.mediaType!==Bi||(t.totalPacketsLost+=e.packetsLost,t.totalPacketsReceived+=e.packetsReceived)})}return t}catch(o){return t}}getAverageLossAndRTT(e){const t={rtt:0,loss:0};return Array.isArray(e)&&e.length>0&&(e.forEach(e=>{t.rtt+=e.rtt,t.loss+=e.loss}),Object.keys(t).forEach(i=>{t[i]=Math.round(t[i]/e.length)})),t}getNetworkQuality(e,t){return e>50||t>500?5:e>30||t>350?4:e>20||t>200?3:e>10||t>100?2:e>=0||t>=0?1:0}handleSignalConnectionStateChange(e){e.state===Ho?(this.uplinkRTT_=0,this.uplinkLoss_=0,this.uplinkNetworkQuality=6):e.state===qo&&6===this.uplinkNetworkQuality&&(this.uplinkNetworkQuality=5)}handleUplinkConnectionStateChange({state:e}){e===Ht?(this.uplinkLoss_=0,this.uplinkRTT_=0,this.uplinkNetworkQuality=6):e===qt&&6===this.uplinkNetworkQuality&&(this.uplinkNetworkQuality=5)}isPeerConnectionDisconnected(e){return!(!e||e.connectionState!==Kt&&e.connectionState!==Zt&&e.connectionState!==Yt)}setUplinkConnection(e){this.uplinkConnection_=e,this.uplinkConnection_?this.uplinkConnection_.on(xl,this.handleUplinkConnectionStateChange.bind(this)):(this.uplinkNetworkQuality=0,this.uplinkRTT_=0,this.uplinkLoss_=0)}start(){-1===this.interval_?(this.log_.info("start network quality calculating"),this.interval_=al.setInterval(()=>{this.handleDownlinkNetworkQuality(),Wr.emit(Po,{client:this.client_,uplinkNetworkQuality:this.uplinkNetworkQuality,downlinkNetworkQuality:this.downlinkNetworkQuality,uplinkRTT:this.uplinkRTT_,uplinkLoss:this.uplinkLoss_,downlinkRTT:this.downlinkRTT_,downlinkLoss:this.downlinkLoss_,downlinkLossAndRTTMap:this.downlinkLossAndRTTMap_}),this.emitter_.emit(Zl,{uplinkNetworkQuality:this.uplinkNetworkQuality,downlinkNetworkQuality:this.downlinkNetworkQuality,uplinkRTT:this.uplinkRTT_,uplinkLoss:this.uplinkLoss_,downlinkRTT:this.downlinkRTT_,downlinkLoss:this.downlinkLoss_})},2e3)):this.log_.info("network quality calculating is already started")}stop(){this.log_.info("stop network quality calculating"),-1!==this.interval_&&(al.clearInterval(this.interval_),this.interval_=-1)}on(e,t){this.emitter_.on(e,t)}}class ou{constructor(e){this.log_=Uo.createLogger({id:e.client.getUserId(),userId:e.client.getUserId(),sdkAppId:e.client.getSDKAppId()}),this.localStream_=null,this.prevDevices_=[],this.initialize()}async initialize(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener("devicechange",this.onDeviceChange.bind(this))}async onDeviceChange(){if(!this.localStream_||!this.localStream_.getMediaStream()||this.localStream_.getScreen())return;const e=await bd.getDevices(),t=e.filter(e=>this.prevDevices_.findIndex(({deviceId:t})=>e.deviceId===t)<0),i=this.prevDevices_.filter(t=>e.findIndex(({deviceId:e})=>t.deviceId===e)<0);t.length>0&&this.handleDeviceAdded(this.prevDevices_,t),i.length>0&&this.handleDeviceRemoved(e,i),this.prevDevices_=e}async setLocalStream(e){e&&(this.prevDevices_=await bd.getDevices()),this.localStream_=e}handleDeviceAdded(e,t){this.log_.warn("devicesAdded: "+JSON.stringify(t)),this.localStream_.updateDeviceIdInUse();const i=t.filter(({kind:e})=>e===Zi),n=t.filter(({kind:e})=>e===zi),r=e.filter(({kind:e})=>e===Zi),o=e.filter(({kind:e})=>e===zi),s=i.length>0&&0===r.length&&this.localStream_.getVideo(),a=n.length>0&&0===o.length&&this.localStream_.getAudio();if(a&&s)return this.log_.info("new microphone and camera detected, but there was no device before."),void this.localStream_.updateStream({audio:!0,video:!0,cameraId:i[0].deviceId,microphoneId:n[0].deviceId});s&&(this.log_.info("new camera detected, but there was no camera before."),this.localStream_.updateStream({audio:!1,video:!0,cameraId:i[0].deviceId})),a&&(this.log_.info("new microphone detected, but there was no microphone before."),this.localStream_.updateStream({audio:!0,video:!1,microphoneId:n[0].deviceId}))}handleDeviceRemoved(e,t){this.log_.warn("devicesRemoved: "+JSON.stringify(t)),this.localStream_.updateDeviceIdInUse();let i=!1,n=!1;const r=this.localStream_.getCameraId(),o=this.localStream_.getMicrophoneId();if("default"===o){const t=this.localStream_.getMicrophoneGroupId(),i=e.filter(e=>"default"===e.deviceId&&e.kind===zi)[0];i&&i.groupId!==t&&(n=!0)}if(t.forEach(({deviceId:e})=>{r.length>0&&e===r?i=!0:o.length>0&&e===o&&(n=!0)}),i&&n)return this.log_.warn(`current camera and microphone in use is lost, cameraId: ${r}, microphoneId: ${o}`),void((this.localStream_.getAudio()||this.localStream_.getVideo())&&this.localStream_.updateStream({video:!0,audio:!0}));i&&(this.log_.warn("current camera in use is lost, deviceId: "+r),this.localStream_.getVideo()&&this.localStream_.updateStream({video:!0,audio:!1})),n&&(this.log_.warn("current microphone in use is lost, deviceId: "+o),this.localStream_.getAudio()&&this.localStream_.updateStream({video:!1,audio:!0}))}}let su=window.AudioContext||window.webkitAudioContext,au=null;class cu{constructor(){au||(au=new su),this.context_=au,this.instant_=0,this.slow_=0,this.clip_=0,this.script_=this.context_.createScriptProcessor(2048,1,1),this.script_.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);let i,n=0,r=0;for(i=0;i<t.length;++i)n+=t[i]*t[i],Math.abs(t[i])>.99&&(r+=1);this.instant_=Math.sqrt(n/t.length),this.slow_=.95*this.slow_+.05*this.instant_,this.clip_=r/t.length}}connectToSource(e,t){try{const i=new MediaStream;i.addTrack(e),this.mic_=this.context_.createMediaStreamSource(i),this.mic_.connect(this.script_),this.script_.connect(this.context_.destination),Pr(t)||t(null)}catch(r){Uo.error("soundMeter connectToSource error: "+r),Pr(t)||t(r)}}stop(){this.mic_.disconnect(),this.script_.disconnect()}resume(){this.context_&&this.context_.resume()}getVolume(){return this.instant_.toFixed(2)}}class lu{constructor(e){this.stream_=e.stream,this.userId_=e.stream.getUserId(),this.log_=this.stream_.getLogger(),this.track_=e.track,this.div_=e.div,this.muted_=e.muted,this.outputDeviceId_=e.outputDeviceId,this.volume_=e.volume,this.emitter_=new Qr,this.initializeElement(),this.state_="NONE",this.soundMeter_=null}get isPlaying(){return"PLAYING"===this.state_}initializeElement(){const e=new MediaStream;e.addTrack(this.track_);const t=document.createElement(xi);t.srcObject=e,t.muted=this.muted_,t.setAttribute("id","audio_"+this.stream_.getId()),t.setAttribute("autoplay","autoplay"),t.setAttribute("playsinline","playsinline"),this.div_.appendChild(t),this.element_=t,this.handleEvents()}async play(){this.outputDeviceId_&&await this.element_.setSinkId(this.outputDeviceId_),this.setVolume(this.volume_);try{await this.element_.play()}catch(i){this.log_.warn("<audio> play() error: "+i);const t=i.toString()+" <audio>";if(t.startsWith("NotAllowedError"))throw new br({code:Cr.PLAY_NOT_ALLOWED,message:t})}}handleEvents(){this.handleElementEvent=this.handleElementEvent.bind(this),this.handleTrackEvent=this.handleTrackEvent.bind(this),this.element_.addEventListener(Qi,this.handleElementEvent),this.element_.addEventListener(Hi,this.handleElementEvent),this.element_.addEventListener(Wi,this.handleElementEvent),this.element_.addEventListener(qi,this.handleElementEvent),this.track_.addEventListener(Hi,this.handleTrackEvent),this.track_.addEventListener(ji,this.handleTrackEvent),this.track_.addEventListener(Gi,this.handleTrackEvent),this.track_.readyState===Hi&&this.handleTrackEvent({type:Hi}),this.track_.muted&&this.handleTrackEvent({type:ji})}async handleElementEvent(e){switch(e.type){case Qi:this.log_.info("stream - audio player is starting playing"),this.state_="PLAYING",Wr.emit(uo,{stream:this.stream_}),this.emitter_.emit(iu,{state:this.state_,reason:Qi});break;case Hi:this.log_.info("stream - audio player is ended"),"STOPPED"!==this.state_&&(this.state_="STOPPED",this.emitter_.emit(iu,{state:this.state_,reason:Hi}));break;case Wi:this.log_.info("stream - audio player is paused"),this.state_="PAUSED",this.emitter_.emit(iu,{state:this.state_,reason:Wi});break;case qi:if(this.element_&&this.element_.error){const e=`${Tl()}/${It().name}/${It().version}`,t=await bd.getSpeakers();let i=t[0].label;const n=t.find(e=>e.deviceId===this.outputDeviceId_);n&&(i=n.label),this.log_.error(`stream - audio player error observed. code: ${this.element_.error.code} message: ${this.element_.error.message} deviceInfo: ${e} speaker: ${i}`),Tr.uploadEvent(`stat-${this.stream_.getType()}-audio-${bi}-${this.element_.error.code}-${e}-${i}`,this.element_.error)}}}handleTrackEvent(e){const t=e.type;switch(t){case Hi:this.log_.info("stream - audio player track is ended"),"STOPPED"!==this.state_&&(this.state_="STOPPED",this.emitter_.emit(iu,{state:this.state_,reason:Hi})),Wr.emit(ko,{stream:this.stream_,type:t});break;case ji:this.log_.info("stream - audio track is unable to provide media output"),this.stream_.isRemote()||Hr(),"PAUSED"!==this.state_&&(this.state_="PAUSED",this.emitter_.emit(iu,{state:this.state_,reason:ji})),Wr.emit(Oo,{stream:this.stream_,type:t});break;case Gi:this.log_.info("stream - audio track is able to provide media output"),"PAUSED"===this.state_&&(this.state_="PLAYING",this.emitter_.emit(iu,{state:this.state_,reason:Gi}))}}unbindEvents(){this.element_&&(this.element_.removeEventListener(Qi,this.handleElementEvent),this.element_.removeEventListener(Hi,this.handleElementEvent),this.element_.removeEventListener(Wi,this.handleElementEvent),this.element_.removeEventListener(qi,this.handleElementEvent)),this.track_&&(this.track_.removeEventListener(Hi,this.handleTrackEvent),this.track_.removeEventListener(ji,this.handleTrackEvent),this.track_.removeEventListener(Gi,this.handleTrackEvent))}async setSinkId(e){this.outputDeviceId_!==e&&(await this.element_.setSinkId(e),this.outputDeviceId_=e)}setVolume(e){this.log_.info("stream - audioElement setVolume to : "+e),this.element_.volume=e}getAudioLevel(){return this.soundMeter_||(this.soundMeter_=new cu,this.soundMeter_.connectToSource(this.track_)),this.soundMeter_.getVolume()}stop(){this.unbindEvents(),this.div_.removeChild(this.element_),this.element_.srcObject=null,this.soundMeter_&&(this.soundMeter_.stop(),this.soundMeter_=null),this.element_=null}async resume(){try{this.soundMeter_&&this.soundMeter_.resume(),await this.element_.play()}catch(i){this.log_.warn("<audio> play() error: "+i);const t=zc({key:_a,data:{error:i}});if(t.startsWith("NotAllowedError"))throw new br({code:Cr.PLAY_NOT_ALLOWED,message:t})}}on(e,t){this.emitter_.on(e,t)}}const uu="trtc_autoplay_wrapper";let du=!1;const hu=()=>!!document.querySelector("."+uu),pu=`${un}/${Gr()?"zh-cn":"en"}/tutorial-21-advanced-auto-play-policy.html`,fu=`<br><a href='${pu}' target='_blank'>${Gr()?"其他方案？":"Any other solution?"}</a>`,gu=Gr()?"浏览器自动播放策略：在用户与页面产生交互（点击、触摸）之前，浏览器禁止播放有声媒体。该弹窗用于帮助用户恢复音视频播放。"+fu:"Autoplay Policy: Before user interacts with the web page (clicking, touching), page will not be allowed to play media with sound. This Dialog is used to help users resume playback. "+fu;class mu{constructor(){if(this.dialogNode_=null,this.bodyPosition_="",this.content="音视频播放被浏览器拦截，请点击“恢复播放”。",Gr()||(this.content='Media playback failed. Click the "Resume" to resume playback.'),!du){const e=document.createElement("style");e.innerHTML=`.trtc_autoplay_mask{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:1500;}.trtc_autoplay_mask div:not(.trtc_autoplay_action_wrapper){display:block !important;}.${uu}{padding:14px;background:#fff;border-radius:3px;box-shadow:0px 3px 15px #434343;border:1px solid #d1cfcf;max-width:500px;}.${uu} a{color:#2473E8;}.trtc_autoplay_header{overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:600;}.trtc_autoplay_content{margin:8px 0;}.trtc_autoplay_action_wrapper{width:100%;display:flex !important;align-items:center;justify-content:right;float:right;}.trtc_autoplay_collapse{margin-right:auto;cursor:pointer}.trtc_autoplay_question{height:100%;line-height:16px;cursor:pointer;}.trtc_autoplay_action_confirm{margin-left:8px;color:#fff;background:#2473E8;padding:4px 12px;outline:none;border:1px solid;border-radius:3px;font-weight:bold;}.trtc_autoplay_action_confirm:hover{opacity:0.9;}.trtc_autoplay_collapse,.trtc_autoplay_action_confirm,.trtc_autoplay_content,.trtc_autoplay_question{font-size:14px;}@media screen and (max-width:750px){.${uu}{width:80vw;}}`,document.head.appendChild(e),du=!0}this.showDetail_=!1,this.isCollapseClicked_=!1,this.isQuestionClicked_=!1,this.addDiaLog()}createDiaLog(){const e=document.createElement("template");e.innerHTML=`<div class="trtc_autoplay_mask"><div class='${uu}'><div class='trtc_autoplay_header'>${location.host}</div><div class='trtc_autoplay_content'>${this.content}</div><div class='trtc_autoplay_detail' style="visibility:hidden;width:100%;height:0;font-size:12px;color:gray;">${gu}</div><div class='trtc_autoplay_action_wrapper'></div></div></div>`.trim();const t=document.createElement("button");t.className="trtc_autoplay_action_confirm",t.innerText=Gr()?"恢复播放":"Resume",t.onclick=this.onConfirm.bind(this);const i=document.createElement("div");i.className="trtc_autoplay_question",i.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n    <svg class="icon" width="18" height="18" p-id="2030" t="1639646523624" version="1.1" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">\n    <path d="m464 784.35c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z" p-id="2031"/>\n    <path d="m512 960c-247.04 0-448-200.96-448-448s200.96-448 448-448 448 200.96 448 448-200.96 448-448 448zm0-831.71c-211.58 0-383.71 172.13-383.71 383.71 0 211.55 172.13 383.71 383.71 383.71 211.55 0 383.71-172.16 383.71-383.71 0-211.58-172.16-383.71-383.71-383.71z" p-id="2032"/>\n    <path d="m512 673.7c-17.665 0-32.001-14.336-32.001-31.999v-54.112c0-52.353 40-92.352 75.328-127.65 25.887-25.92 52.672-52.672 52.672-74.017 0-53.343-43.072-96.735-95.999-96.735-53.823 0-95.999 41.536-95.999 94.559 0 17.665-14.336 31.999-32.001 31.999s-32.001-14.336-32.001-31.999c0-87.424 71.775-158.56 160-158.56s160 72.095 160 160.74c0 47.904-36.32 84.192-71.424 119.3-27.84 27.776-56.576 56.512-56.576 82.336v54.112c0 17.665-14.336 32.032-32.001 32.032z" p-id="2033"/>\n    </svg>\n    ',i.onclick=this.onQuestionClick.bind(this);const n=document.createElement("div");n.className="trtc_autoplay_collapse",n.innerText=Gr()?"详情 >":"Detail >",n.onclick=this.onCollapseClick.bind(this);const r=e.content.firstChild,o=r.querySelector(".trtc_autoplay_action_wrapper");return o.appendChild(n),o.appendChild(i),o.appendChild(t),r}addDiaLog(){hu()||(this.dialogNode_=this.createDiaLog(),document.body.appendChild(this.dialogNode_),this.dialogNode_.onclick=this.onConfirm.bind(this),this.dialogNode_.querySelector("."+uu).onclick=e=>e.stopPropagation(),this.bodyPosition_=document.body.style.position,document.body.style.position="fixed",Uo.warn("show autoplay dialog"),Tr.uploadEvent({log:"dialog-show"}))}deleteDiaLog(){this.dialogNode_&&(document.body.removeChild(this.dialogNode_),document.body.style.position=this.bodyPosition_,this.dialogNode_=null)}onConfirm(){Uo.warn("confirm clicked, try resume stream"),Wr.emit(Do),this.deleteDiaLog()}onCollapseClick(){const e=this.dialogNode_.querySelector(".trtc_autoplay_detail");e.style.visibility=this.showDetail_?"hidden":"visible",e.style.height=""+(this.showDetail_?0:"fit-content"),this.showDetail_=!this.showDetail_,this.isCollapseClicked_||Tr.uploadEvent({log:"dialog-1"}),this.isCollapseClicked_=!0}onQuestionClick(){window.open(pu,"_blank"),this.isQuestionClicked_||Tr.uploadEvent({log:"dialog-2"}),this.isQuestionClicked_=!0}}class _u{constructor(e){this.stream_=e.stream,this.userId_=e.stream.getUserId(),this.log_=this.stream_.getLogger(),this.track_=e.track,this.div_=e.div,this.muted_=e.muted,this.objectFit_=e.objectFit,this.mirror_=e.mirror,this.emitter_=new Qr,this.initializeElement(),this.state_="NONE",this.pausedRetryCount_=5}get isPlaying(){return"PLAYING"===this.state_}initializeElement(){const e=new MediaStream;e.addTrack(this.track_);const t=document.createElement(Bi);t.srcObject=e,t.muted=!0;let i=`width: 100%; height: 100%; object-fit: ${this.objectFit_};`;this.mirror_&&(i+="transform: rotateY(180deg);"),t.setAttribute("id","video_"+this.stream_.getId()),t.setAttribute("style",i),t.setAttribute("autoplay","autoplay"),t.setAttribute("playsinline","playsinline"),this.div_&&this.div_.appendChild(t),this.element_=t,this.handleEvents()}setRect({width:e,height:t}){this.element_&&(this.element_.style.width=e+"px",this.element_.style.height=t+"px")}async play(){try{await this.element_.play()}catch(i){this.log_.warn("<video> play() error: "+i);const t=i.toString()+" <video>";if(t.startsWith("NotAllowedError"))throw new br({code:Cr.PLAY_NOT_ALLOWED,message:t})}}handleEvents(){this.handleElementEvent=this.handleElementEvent.bind(this),this.handleTrackEvent=this.handleTrackEvent.bind(this),this.element_.addEventListener(Qi,this.handleElementEvent),this.element_.addEventListener(Hi,this.handleElementEvent),this.element_.addEventListener(Wi,this.handleElementEvent),this.element_.addEventListener(qi,this.handleElementEvent),this.element_.addEventListener($i,this.handleElementEvent),this.track_.addEventListener(Hi,this.handleTrackEvent),this.track_.addEventListener(ji,this.handleTrackEvent),this.track_.addEventListener(Gi,this.handleTrackEvent),this.track_.readyState===Hi&&this.handleTrackEvent({type:Hi}),this.track_.muted&&this.handleTrackEvent({type:ji})}handleElementEvent(e){switch(e.type){case Qi:this.log_.info("stream - video player is starting playing"),this.state_="PLAYING",Wr.emit(lo,{stream:this.stream_}),this.emitter_.emit(iu,{state:this.state_,reason:Qi});break;case Hi:this.log_.info("stream - video player is ended"),"STOPPED"!==this.state_&&(this.state_="STOPPED",this.emitter_.emit(iu,{state:this.state_,reason:Hi}));break;case Wi:this.log_.info("stream - video player is paused"),this.state_="PAUSED",this.emitter_.emit(iu,{state:this.state_,reason:Wi}),this.pausedRetryCount_>0&&!hu()&&(this.log_.info("auto resume when video paused"),this.resume(),this.pausedRetryCount_--);break;case qi:if(this.element_&&this.element_.error){const e=`${Tl()}/${It().name}/${It().version}`;this.log_.error(`stream - video player error observed. code: ${this.element_.error.code} message: ${this.element_.error.message} deviceInfo: ${e}`),Tr.uploadEvent(`stat-${this.stream_.getType()}-video-${bi}-${this.element_.error.code}-${e}`,this.element_.error)}break;case $i:Wr.emit(Io,{stream:this.stream_})}}handleTrackEvent(e){const t=e.type;switch(t){case Hi:this.log_.info("stream - video player track is ended"),"STOPPED"!==this.state_&&(this.state_="STOPPED",this.emitter_.emit(iu,{state:this.state_,reason:Hi})),Wr.emit(wo,{stream:this.stream_,type:t});break;case ji:this.log_.info("stream - video track is unable to provide media output"),this.stream_.isRemote()||Hr(),"PAUSED"!==this.state_&&(this.state_="PAUSED",this.emitter_.emit(iu,{state:this.state_,reason:ji})),Wr.emit(Co,{stream:this.stream_,type:t});break;case Gi:this.log_.info("stream - video track is able to provide media output"),"PAUSED"===this.state_&&(this.state_="PLAYING",this.emitter_.emit(iu,{state:this.state_,reason:Gi}),Wr.emit(bo,{stream:this.stream_}))}}unbindEvents(){this.element_&&(this.element_.removeEventListener(Qi,this.handleElementEvent),this.element_.removeEventListener(Hi,this.handleElementEvent),this.element_.removeEventListener(Wi,this.handleElementEvent),this.element_.removeEventListener(qi,this.handleElementEvent),this.element_.removeEventListener($i,this.handleElementEvent)),this.track_&&(this.track_.removeEventListener(Hi,this.handleTrackEvent),this.track_.removeEventListener(ji,this.handleTrackEvent),this.track_.removeEventListener(Gi,this.handleTrackEvent))}stop(){this.unbindEvents(),this.div_&&this.div_.removeChild(this.element_),this.element_.srcObject=null,this.element_=null}async resume(){try{await this.element_.play()}catch(i){this.log_.warn("<video> play() error: "+i);const t=zc({key:va,data:{error:i}});if(t.startsWith("NotAllowedError"))throw new br({code:Cr.PLAY_NOT_ALLOWED,message:t})}}getVideoFrame(){const e=document.createElement("canvas");return e.width=this.element_.videoWidth,e.height=this.element_.videoHeight,e.getContext("2d").drawImage(this.element_,0,0),e.toDataURL("image/png")}on(e,t){this.emitter_.on(e,t)}getElement(){return this.element_?this.element_:null}}class vu{constructor(e){this.userId_=e.userId,this.tinyId_=e.tinyId,this.client_=e.client,this.sdpSemantics_=e.client.getSdpSemantics(),this.isUplink_=e.isUplink,this.log_=Uo.createLogger({id:"n|"+this.userId_,userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId(),isLocal:this.isUplink_}),this.signalChannel_=e.signalChannel,this.peerConnection_=null,this.connectTimer_=-1,this.isErrorObserved_=!1,this.emitter_=new Qr,this.currentState_=Ht,this.waitForPeerConnectionConnectedPromise_=null,this.isReconnecting_=!1,this.reconnectionCount_=0,this.reconnectionTimer_=-1,this.isFirstConnection_=!0}initialize(){const e={iceServers:this.client_.getIceServers(),iceTransportPolicy:this.client_.getIceTransportPolicy(),sdpSemantics:this.sdpSemantics_,bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",tcpCandidatePolicy:"disable",IceTransportsType:"nohost"};this.peerConnection_=new RTCPeerConnection(e),this.peerConnection_.onconnectionstatechange=this.onConnectionStateChange.bind(this)}close(){this.log_.info("closing connection"),this.closePeerConnection()}closePeerConnection(e=!1){this.peerConnection_&&(this.peerConnection_.onconnectionstatechange=()=>{},this.peerConnection_.close(),this.peerConnection_=null,e&&this.emitConnectionStateChangedEvent(Ht))}getDTLSTransportState(){if(!this.peerConnection_)return"unknown";let e=null;if(this.isUplink_){if(!_l()||0===this.peerConnection_.getSenders().length)return"unknown";e=this.peerConnection_.getSenders()[0].transport}else{if(!ml()||0===this.peerConnection_.getReceivers().length)return"unknown";e=this.peerConnection_.getReceivers()[0].transport}return e?e.state:"unknown"}onConnectionStateChange(e){const t=this.peerConnection_.iceConnectionState,i=this.getDTLSTransportState();if(this.log_.info("onConnectionStateChange() connectionState: "+e.target.connectionState),this.log_.info(`ICE Transport state: ${t}, DTLS Transport state: ${i}`),e.target.connectionState===zt&&this.emitConnectionStateChangedEvent(Qt),e.target.connectionState===Zt||e.target.connectionState===Yt){const n=`${this.isUplink_?"uplink":"downlink"} ICE/DTLS Transport connection ${e.target.connectionState}. ICE Transport state: ${t}, DTLS Transport state: ${i}`,r=new br({message:n,code:Cr.ICE_TRANSPORT_ERROR});Tr.logFailedEvent({userId:this.client_.getUserId(),eventType:mi,error:r}),this.emitConnectionStateChangedEvent(Ht),this.isErrorObserved_||this.emitter_.emit(Ml,r)}if((e.target.connectionState===Jt||e.target.connectionState===Xt)&&(this.logSelectedCandidate(),Tr.logSuccessEvent({userId:this.client_.getUserId(),eventType:mi}),this.emitConnectionStateChangedEvent(qt),!this.isUplink_&&!this.sentSubscriptionAfterConnected_&&this.pendingSubscription_.length>0)){this.log_.info("send pending subscription after RTCPeerConnection is connected");const e=this.pendingSubscription_[0];this.doSendSubscription(e.data,e.stream,e.type),this.sentSubscriptionAfterConnected_=!0}}emitConnectionStateChangedEvent(e){e!==this.currentState_&&(this.currentState_===Wt&&e===Qt||(Wr.emit(No,{client:this.client_,connection:this,prevState:this.currentState_,state:e}),this.emitter_.emit(xl,{prevState:this.currentState_,state:e}),this.currentState_=e))}hitTest(e){return(0===e||"0"===e)&&this.isUplink_||e===this.tinyId_}addEventInternal(e,t){const i=this.client_.getUserId();let n={eventId:e,eventDesc:t,timestamp:_e(),userId:i,tinyId:this.client_.getTinyId()};this.isUplink_||(n.remoteUserId=this.userId_,n.remoteTinyId=this.tinyId_),Xs(i,n)}getPeerConnection(){return this.peerConnection_}getClient(){return this.client_}getUserId(){return this.userId_}getTinyId(){return this.tinyId_}async logSelectedCandidate(){if(!this.peerConnection_)return;const e=await this.peerConnection_.getStats();for(let[t,i]of e)if(Cl(i)){const t=e.get(i.localCandidateId),n=e.get(i.remoteCandidateId);t&&this.log_.info(`local candidate: ${t.candidateType} ${t.protocol}:${t.ip||t.address}:${t.port} ${t.networkType||""} ${"relay"===t.candidateType?"relayProtocol:"+t.relayProtocol:""}`),n&&this.log_.info(`remote candidate: ${n.candidateType} ${n.protocol}:${n.ip||n.address}:${n.port}`);break}}getCurrentState(){return this.currentState_}waitForPeerConnectionConnected(){return this.waitForPeerConnectionConnectedPromise_||(this.waitForPeerConnectionConnectedPromise_=new Promise((e,t)=>{if(this.currentState_===qt)return e();let i=-1;const n=t=>{t.state===qt&&(clearTimeout(i),this.emitter_.off(xl,n,this),e())};i=setTimeout(()=>{this.emitter_.off(xl,n,this);let e=new br({code:Cr.API_CALL_TIMEOUT,message:"connection timeout"});this.peerConnection_||this.isUplink_||(e=this.genRemoteStreamNotExistError()),t(e)},1e4),this.emitter_.on(xl,n,this)}),this.waitForPeerConnectionConnectedPromise_=this.waitForPeerConnectionConnectedPromise_.then(e=>(this.waitForPeerConnectionConnectedPromise_=null,e)).catch(e=>{throw this.waitForPeerConnectionConnectedPromise_=null,e})),this.waitForPeerConnectionConnectedPromise_}getReconnectionCount(){return this.reconnectionCount_}startReconnection(){this.isReconnecting_=!0,this.emitConnectionStateChangedEvent(Wt),this.reconnect(),this.addEventInternal(this.isUplink_?qs:Zs,(this.isUplink_?"uplink":"downlink")+"-connection is reconnecting")}stopReconnection(){this.log_.info("stop reconnection"),this.isReconnecting_=!1,this.reconnectionCount_=0,this.clearReconnectionTimer(),this.signalChannel_.off(jo,this.reconnect,this)}on(e,t,i){this.emitter_.on(e,t,i)}off(e,t,i){this.emitter_.off(e,t,i)}genRemoteStreamNotExistError(){return new br({code:Cr.REMOTE_STREAM_NOT_EXIST,message:`because the remote user ${this.userId_} unpublished stream`})}}function Eu(e,t,i,n){if(this.useStringRoomId_){if(!Dr(e)||!/^[A-Za-z\d\s!#$%&()+\-:;<=.>?@[\]^_{}|~,]{1,64}$/.test(e))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Ia,data:t,link:{className:n,fnName:i}})})}else if(!(Mr(e)&&/^[1-9]\d*$/.test(String(e))&&e<4294967295))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Ra,data:t,link:{className:n,fnName:i}})})}function Au(e,t,i,n){if(!/^[A-Za-z\d_-]*$/.test(e))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:$a,data:t,link:{className:n,fnName:i}})})}var yu,Su,Cu={TRTC:{createClient:{name:"clientConfig",required:!0,type:Di,properties:{sdkAppId:{required:!0,type:Ni,allowEmpty:!1},userId:{required:!0,type:ki,allowEmpty:!1},userSig:{required:!0,type:ki,allowEmpty:!1},mode:{required:!0,type:ki,values:["rtc","live"]},useStringRoomId:{type:Li},autoSubscribe:{type:Li},enableAutoPlayDialog:{type:Li},streamId:{type:ki},userDefineRecordId:{type:ki},pureAudioPushMode:{type:Ni,values:[1,2]}}},createStream:{name:"streamConfig",required:!0,type:Di,properties:{userId:{type:ki},audio:{type:Li},video:{type:Li},screen:{type:Li},screenAudio:{type:Li},microphoneId:{type:ki},cameraId:{type:ki},facingMode:{type:ki,values:[Fi,Vi]},audioSource:{instanceOf:MediaStreamTrack},videoSource:{instanceOf:MediaStreamTrack},mirror:{type:Li}},validate:function(e){if(!Pr(e.screen)&&e.screen&&Pr(e.audio)&&(e.audio=!1),!(Pr(e.audio)&&Pr(e.video)||Pr(e.audioSource)&&Pr(e.videoSource)))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Lc})});if(!Pr(e.screen)&&!0===e.screen&&!0===e.video)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Pc})});if(e.audio&&e.screenAudio)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Dc})});if(!0!==e.screen&&!0===e.screenAudio)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Mc})});if(!Pr(e.screen)&&!0===e.screen&&!this.isScreenShareSupported())throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Gc})})}}},CLIENT:{join:{name:"options",required:!0,properties:{roomId:{required:!0,type:[Ni,ki],allowEmpty:!1,validate:Eu},role:{type:[ki],values:["anchor","audience"]}}},publish:{name:"stream",required:!0,instanceOf:an,validate:function(e){if(!this.isJoined_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Pa})});if("live"===this.mode_&&"audience"===this.role_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Ma})});if(this.localStream_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Ba})});if(!e.getIsReadyToPublish())throw new br({code:Cr.INVALID_OPERATION,message:zc({key:xa})});if(this.notPublishWithoutH264Supported_)throw new br({code:Cr.NOT_SUPPORTED_H264,message:zc({key:Fc})})}},unpublish:{name:"stream",required:!0,instanceOf:an,validate:function(e){if(e!==this.localStream_)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Da})})}},subscribe:[{name:"stream",required:!0,instanceOf:cn,validate:function(e){if(!e.getConnection())throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Ua})});if(this.notSubscribeWithoutH264Supported_)throw new br({code:Cr.NOT_SUPPORTED_H264,message:zc({key:Vc})})}},{name:"options",type:Di,properties:{audio:{type:Li},video:{type:Li}}}],unsubscribe:{name:"stream",required:!0,instanceOf:cn,validate:function(e){if(!e.getConnection())throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Ua})})}},switchRole:{name:"role",required:!0,values:["anchor","audience"],validate:function(){if("live"!==this.mode_)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Va})});if(!this.isJoined_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:ja})})}},startPublishCDNStream:{name:"options",required:!1,properties:{streamId:{type:ki,validate:Au},appId:{type:Ni,allowEmpty:!1},bizId:{type:Ni,allowEmpty:!1},url:{type:ki,allowEmpty:!1}}},startMixTranscode:{name:"config",required:!0,type:Di,properties:{mode:{type:ki,values:["preset-layout","manual"]},streamId:{type:ki,validate:Au},videoWidth:{type:Ni,notLessThanZero:!0},videoHeight:{type:Ni,notLessThanZero:!0},videoBitrate:{type:Ni,notLessThanZero:!0,allowEmpty:!1},videoFramerate:{type:Ni,validate:function(e,t,i,n){if(e<=0||e>30)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Tc,link:{className:n,fnName:i}})})}},videoGop:{type:Ni,validate:function(e,t,i,n){if(e<1||e>8)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Ic,link:{className:n,fnName:i}})})}},audioSampleRate:{type:Ni,notLessThanZero:!0},audioBitrate:{type:Ni,validate:function(e,t,i,n){if(e<32||e>192)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Rc,link:{className:n,fnName:i}})})}},audioChannels:{type:Ni,values:[1,2]},backgroundColor:{type:Ni},backgroundImage:{type:ki},mixUsers:{required:!0,type:Pi,arrayItem:{require:!0,type:Di,properties:{userId:{required:!0,type:ki},roomId:{type:[ki,Ni],validate:Eu},pureAudio:{type:Li},width:{type:Ni,notLessThanZero:!0},height:{type:Ni,notLessThanZero:!0},locationX:{type:Ni,notLessThanZero:!0},locationY:{type:Ni,notLessThanZero:!0},zOrder:{type:Ni},streamType:{type:ki,values:["main","auxiliary"]}}}}},validate:function(e,t,i,n,r){let o=0,s=0;const a=e.mixUsers,c=[];if(a.forEach((e,t)=>{if(c.push(e.userId),!e.pureAudio){if(!e.zOrder||e.zOrder<1||e>15)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:wc,data:`config.mixUsers[${t}].zOrder`,link:{className:n,fnName:i}})});e.width+e.locationX>o&&(o=e.width+e.locationX),e.height+e.locationY>s&&(s=e.height+e.locationY)}}),c.indexOf(this.getUserId())<0)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Oc,link:{className:n,fnName:i}})});if(e.videoWidth<o||e.videoHeight<s)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:kc,link:{className:n,fnName:i}})})}}},LOCAL_STREAM:{switchDevice:[{name:"type",required:!0,type:ki,values:[xi,Bi]},{name:"deviceId",required:!0,type:ki,validate:function(){if(this.screen_&&!this.audio_||this.audioSource_||this.videoSource_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:oc})});if(this.publishState_===nn)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:sc})})}}]},STREAM:{play:[{name:"elementId",required:!0,type:[ki,"HTMLDivElement"],validate:function(){if(this.isPlaying_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Nc})})}},{name:"options",type:Di,properties:{objectFit:{type:ki,values:["contain","cover"]},muted:{type:Li}}}]}};function bu(...e){return function(t,i,n){const r=n.value;return n.value=function(...t){return Iu.call(this,e,t,i,this.name_),r.apply(this,t)},n}}function Tu(...e){return function(t,i,n){const r=n.value;return n.value=async function(...t){return Iu.call(this,e,t,i,this.name_),r.apply(this,t)},n}}function Iu(e,t,i,n){try{for(let r=0;r<e.length;r++)Ru.call(this,{rule:e[r],value:t[r],key:e[r].name,fnName:i,className:n})}catch(s){throw Uo.error(s),s}}function Ru({rule:e,value:t,key:i,fnName:n,className:r}){if(Pr(t)){if(e.required)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:na,data:{key:i,rule:e,fnName:n,value:t},link:{className:r,fnName:n}})});return}if(Array.isArray(e.type)){if(!e.type.map(e=>e.toLowerCase()).includes(Ur(t)))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:ra,data:{key:i,rule:e,fnName:n,value:t},link:{className:r,fnName:n}})})}else if(!Pr(e.type)&&Ur(t)!==e.type)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:ra,data:{key:i,rule:e,fnName:n,value:t},link:{className:r,fnName:n}})});if(!1===e.allowEmpty){const o=Mr(t)&&(0===t||Number.isNaN(t)),s=Dr(t)&&""===t.trim();if(o||s)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:oa,data:{key:i,rule:e,fnName:n,value:t},link:{className:r,fnName:n}})})}if(e.notLessThanZero&&Mr(t)&&t<0)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:bc,data:{key:i,rule:e,fnName:n,value:t},link:{className:r,fnName:n}})});if(Dr(e.instanceOf)){if(!t||t.name_!==e.instanceOf)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:sa,data:{key:i,rule:e,fnName:n,value:t},link:{className:r,fnName:n}})})}else if(Lr(e.instanceOf)&&!(t instanceof e.instanceOf))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:sa,data:{key:i,rule:e,fnName:n,value:t},link:{className:r,fnName:n}})});if(e.values&&!e.values.includes(t))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:aa,data:{key:i,rule:e,fnName:n,value:t},link:{className:r,fnName:n}})});const{properties:o}=e;kr(o)&&"object"===Ur(t)&&Object.keys(o).forEach(e=>{Ru.call(this,{rule:o[e],value:t&&t[e],key:`${i}.${e}`,fnName:n,className:r})});const{arrayItem:s}=e;kr(s)&&(e=>"array"===Ur(e))(t)&&t.forEach((e,t)=>{Ru.call(this,{rule:s,value:e,key:`${i}[${t}]`,fnName:n,className:r})}),Lr(e.validate)&&e.validate.call(this,t,i,n,r,this)}let wu=(yu=Tu(...Cu.STREAM.play),i((Su=class{constructor(e){this.name_=ln,this.userId_=e.userId,this.isRemote_=e.isRemote,this.type_=e.type,this.log_=Uo.createLogger({id:`s${e.seq?e.seq:""}|${this.userId_}`,userId:Pr(e.client)?void 0:e.client.getUserId(),sdkAppId:Pr(e.client)?void 0:e.client.getSDKAppId(),isLocal:!this.isRemote_,type:this.isRemote_?this.type_:""}),this.mirror_=!1,this.isRemote_||(this.mirror_=!0),Pr(e.mirror)||(this.mirror_=e.mirror),this.client_=null,Pr(e.client)||(this.client_=e.client),this.mediaStream_=null,this.div_=null,this.isPlaying_=!1,this.connection_=null,this.audioPlayer_=null,this.videoPlayer_=null,this.muted_=!1,this.objectFit_="cover",this.id_=sl(),this.audioOutputDeviceId_=0,this.audioVolume_=1,this.emitter_=new Qr,this.connectionState_=Ht,this.installEvents()}installEvents(){Wr.on(Do,this.restartPlayback,this)}uninstallEvents(){Wr.off(Do,this.restartPlayback,this)}getType(){return this.type_}getLogger(){return this.log_}get isSubscribed(){return"main"===this.type_&&this.connection_.isMainStreamSubscribed||"auxiliary"===this.type_&&this.connection_.isAuxStreamSubscribed}get isMainVideoSubscribed(){const e=this.getSubscribedState();return"main"===this.type_&&e&&e.video}get isMainAudioSubscribed(){const e=this.getSubscribedState();return"main"===this.type_&&e&&e.audio}get isAuxVideoSubscribed(){const e=this.getSubscribedState();return"auxiliary"===this.type_&&e&&e.auxiliary}emitConnectionStateChanged(e){e.state!==this.connectionState_&&(e.state!==Ht&&this.isRemote_&&!this.isSubscribed||(this.emitter_.emit(eu,e),this.connectionState_=e.state))}setConnection(e){this.connection_!==e&&(e instanceof vu?(null!==this.connection_&&this.connection_.off(xl,this.emitConnectionStateChanged,this),e.on(xl,this.emitConnectionStateChanged,this)):null===e&&this.connection_.off(xl,this.emitConnectionStateChanged,this),this.connection_=e)}getConnection(){return this.connection_}async play(e,t){this.isPlaying_=!0,this.log_.info("stream start to play with options: "+JSON.stringify(t));const i=document.createElement("div");i.setAttribute("id","player_"+this.id_),i.setAttribute("style","width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;");let n=e;"object"!=typeof e&&(n=document.getElementById(e)),n.appendChild(i),this.div_=i,this.isRemote_||(this.muted_=!0),t&&!Pr(t.muted)&&(this.muted_=t.muted),this.isRemote_&&"auxiliary"===this.getType()&&(this.objectFit_="contain"),t&&!Pr(t.objectFit)&&(this.objectFit_=t.objectFit),Wr.emit(To,{stream:this}),await Promise.all([this.playAudio(),this.playVideo()]),Wr.emit(ao,{stream:this})}async playAudio(){if(!this.hasAudio()||this.isRemote_&&!this.isMainAudioSubscribed)return;const e=this.getAudioTrack();if(!this.audioPlayer_&&e){this.log_.info("stream - create AudioPlayer and play"),this.audioPlayer_=new lu({stream:this,track:e,div:this.div_,muted:this.muted_,outputDeviceId:this.audioOutputDeviceId_,volume:this.audioVolume_}),this.audioPlayer_.on(iu,e=>{const t={type:xi,state:e.state,reason:e.reason};Wr.emit(co,{stream:this,...t}),this.emitter_.emit(Jl,t)});try{await this.audioPlayer_.play()}catch(n){throw this.client_&&this.client_.getEnableAutoPlayDialog()&&new mu,this.emitter_.emit(tu,n),n}}}async playVideo(){if(!this.hasVideo()||this.isRemote_&&!this.isMainVideoSubscribed&&!this.isAuxVideoSubscribed)return;const e=this.getVideoTrack();if(!this.videoPlayer_&&e){Wr.emit(Ro,{stream:this}),this.log_.info("stream - create VideoPlayer and play"),this.videoPlayer_=new _u({stream:this,track:e,div:this.div_,muted:this.muted_,objectFit:this.objectFit_,mirror:this.mirror_}),this.videoPlayer_.on(iu,e=>{const t={type:Bi,state:e.state,reason:e.reason};Wr.emit(co,{stream:this,...t}),this.emitter_.emit(Jl,t)});try{await this.videoPlayer_.play()}catch(n){throw this.client_&&this.client_.getEnableAutoPlayDialog()&&new mu,this.emitter_.emit(tu,n),n}}}stopAudio(){this.audioPlayer_&&(this.log_.info("stream - stop AudioPlayer"),this.audioPlayer_.stop(),this.audioPlayer_=null)}stopVideo(){this.videoPlayer_&&(this.log_.info("stream - stop VideoPlayer"),this.videoPlayer_.stop(),this.videoPlayer_=null)}restartPlayback(){this.audioPlayer_&&!this.audioPlayer_.isPlaying&&this.restartAudio(),this.videoPlayer_&&!this.videoPlayer_.isPlaying&&this.restartVideo()}restartAudio(){this.isPlaying_&&(this.stopAudio(),this.playAudio().catch(e=>{}))}restartVideo(){this.isPlaying_&&(this.stopVideo(),this.playVideo().catch(e=>{}))}stop(){this.isPlaying_&&(this.isPlaying_=!1,this.stopAudio(),this.stopVideo(),this.div_.parentNode.removeChild(this.div_))}async resume(){this.isPlaying_&&(this.log_.info("stream - resume"),this.audioPlayer_&&await this.audioPlayer_.resume(),this.videoPlayer_&&await this.videoPlayer_.resume())}close(){this.isPlaying_&&this.stop(),this.isRemote_||(this.mediaStream_&&(this.mediaStream_.preventEvent=1,this.mediaStream_.getTracks().forEach(e=>{e.stop()}),this.mediaStream_=null),this.uninstallEvents())}muteAudio(){return this.addRemoteEvent(!0,xi),this.doEnableTrack(xi,!1)}muteVideo(){return this.addRemoteEvent(!0,Bi),this.doEnableTrack(Bi,!1)}unmuteAudio(){return this.addRemoteEvent(!1,xi),this.doEnableTrack(xi,!0)}unmuteVideo(){return this.addRemoteEvent(!1,Bi),this.doEnableTrack(Bi,!0)}addRemoteEvent(e,t){if(this.isRemote_&&this.client_){const i=this.client_.getUserId();let n,r=`${e?ji:Gi} remote ${t}`;n=t===xi?e?Ds:xs:e?Ps:Ms,Xs(i,{eventId:n,eventDesc:r,timestamp:(new Date).getTime(),userId:i,tinyId:this.client_.getTinyId(),remoteUserId:this.userId_,remoteTinyId:this.connection_.getTinyId()})}}doEnableTrack(e,t){let i=!1;return e===xi?this.mediaStream_.getAudioTracks().forEach(e=>{i=!0,e.enabled=t}):this.mediaStream_.getVideoTracks().forEach(e=>{i=!0,e.enabled=t}),i}getId(){return this.id_}getUserId(){return this.userId_}getTinyId(){return this.connection_?this.connection_.getTinyId():""}isPlaying(){return this.isPlaying_}async setAudioOutput(e){this.audioOutputDeviceId_=e,this.audioPlayer_&&await this.audioPlayer_.setSinkId(e)}setAudioVolume(e){this.audioVolume_=e,this.log_.info("setAudioVolume to "+e),this.audioPlayer_&&this.audioPlayer_.setVolume(e)}getAudioLevel(){let e=0;return this.audioPlayer_&&(e=this.audioPlayer_.getAudioLevel()),e}hasAudio(){if(this.isRemote_){if(!this.connection_)return!1;const e=this.connection_.getTrackState();return"main"===this.type_&&e.audio}return!!this.getAudioTrack()}hasVideo(){if(this.isRemote_){if(!this.connection_)return!1;const e=this.connection_.getTrackState();return"auxiliary"===this.type_?e.auxiliary:e.video}return!!this.getVideoTrack()}getSubscribedState(){return this.isRemote_&&this.connection_?this.connection_.getSubscribeState():null}getAudioTrack(){let e=null;if(this.mediaStream_){const t=this.mediaStream_.getAudioTracks();t.length>0&&(e=t[0])}return e}getVideoTrack(){let e=null;if(this.mediaStream_){const t=this.mediaStream_.getVideoTracks();t.length>0&&(e=t[0])}return e}getVideoFrame(){return this.videoPlayer_?this.videoPlayer_.getVideoFrame():null}getMediaStream(){return this.mediaStream_}setMediaStream(e){e!==this.mediaStream_&&(this.mediaStream_&&this.mediaStream_.getTracks().forEach(e=>e.stop()),this.mediaStream_=e)}updateVideoPlayingState(e){this.isPlaying_&&(e?(this.log_.info("playing state updated, play video"),this.playVideo().catch(e=>{})):(this.log_.info("playing state updated, stop video"),this.stopVideo()))}updateAudioPlayingState(e){this.isPlaying_&&(e?(this.log_.info("playing state updated, play audio"),this.playAudio().catch(e=>{})):(this.log_.info("playing state updated, stop audio"),this.stopAudio()))}on(e,t,i){this.emitter_.on(e,t,i)}off(e,t,i){"*"===e?this.emitter_.removeAllListeners():this.emitter_.off(e,t,i)}isRemote(){return this.isRemote_}getDiv(){return this.div_}getObjectFit(){return this.objectFit_}getMuted(){return this.muted_}getClient(){return this.client_}}).prototype,"play",[yu],Object.getOwnPropertyDescriptor(Su.prototype,"play"),Su.prototype),Su);class Ou extends wu{constructor(e){const t={isRemote:!0,type:e.type};super({...e,...t}),this.name_=cn,this.isInSubscriptionCycle_=!1,this.isStreamAddedEventEmitted_=!1,this.isAbleToCallSubscription_=!0}installEvents(){super.installEvents(),Wr.on(go,this.handleStreamSubscribed,this),Wr.on(mo,this.handleStreamUnsubscribed,this)}uninstallEvents(){super.uninstallEvents(),Wr.off(go,this.handleStreamSubscribed,this),Wr.off(mo,this.handleStreamUnsubscribed,this)}handleStreamSubscribed(e){e.client===this.client_&&e.stream===this&&this.connection_.getCurrentState()===qt&&this.emitConnectionStateChanged({prevState:Ht,state:qt})}handleStreamUnsubscribed(e){e.client===this.client_&&e.stream===this&&this.emitConnectionStateChanged({prevState:qt,state:Ht})}getType(){return super.getType()}getIsAbleToCallSubscription(){return this.isAbleToCallSubscription_}setIsAbleToCallSubscription(e){this.isAbleToCallSubscription_=e}setInSubscriptionCycle(e){this.isInSubscriptionCycle_=e}isInSubscriptionCycle(){return this.isInSubscriptionCycle_}setIsStreamAddedEventEmitted(e){this.isStreamAddedEventEmitted_=e}getIsStreamAddedEventEmitted(){return this.isStreamAddedEventEmitted_}getAudioTrack(){return this.connection_&&this.connection_.getTrackState().audio?super.getAudioTrack():null}getVideoTrack(){if(!this.connection_)return null;const e=this.connection_.getTrackState();return"main"===this.type_&&!e.video||"auxiliary"===this.type_&&!e.auxiliary?null:super.getVideoTrack()}close(){super.close()}}class ku{constructor(e){this.client_=e.client,this.subscribedStreams_=new Map,this.unsubscribedStreams_=new Map,this.subscriptedOptions_=new Map,this.autoRecoveryFlags_=new Map}get isEnabled(){return"webrtc"!==this.client_.getEnv()}async recover(e){const t=e.getUserId(),i=e.getType();if(!this.hasAutoRecoveryFlag(t,i))return;const n=this.getUnsubscribedStream(t,i)?"unsubscribe":"subscribe";try{Uo.warn(`recover() try to recover subscription [${n}][${t}][${i}]`),"subscribe"===n?await this.recoverSubscription(t,e):await this.recoverUnsubscription(t,e),Tr.logSuccessEvent({userId:this.client_.getUserId(),eventType:yi}),Uo.warn(`recover() recover successfully [${n}][${t}][${i}]`)}catch(s){Uo.error(`recover() recover failed [${n}][${t}][${i}]`,s),Tr.logFailedEvent({userId:this.client_.getUserId(),eventType:yi,error:s})}this.deleteAutoRecoveryFlag(t,i)}async recoverSubscription(e,t){const i=this.getOptions(e,t.getType()),n=this.getSubscribedStream(e,t.getType());if(!i||!n)return;const{isAudioMuted:r,isVideoMuted:o}=this.getStreamMuteState(n);this.mergeStream(n,t),this.recoverPlayingState(n),r&&n.doEnableTrack(xi,!1),o&&n.doEnableTrack(Bi,!1)}async recoverUnsubscription(e,t){const i=this.getUnsubscribedStream(e,t.getType());i&&this.mergeStream(i,t)}getStreamMuteState(e){const t={isAudioMuted:!1,isVideoMuted:!1},i=e.getMediaStream();return i&&(t.isAudioMuted=i.getAudioTracks().map(e=>e.enabled).includes(!1),t.isVideoMuted=i.getVideoTracks().map(e=>e.enabled).includes(!1)),t}recoverPlayingState(e){const t=e.isPlaying(),i=e.getDiv();if(t&&i){const t=i.parentNode;e.stop(),e.play(t,{objectFit:e.getObjectFit(),muted:e.getMuted()})}}mergeStream(e,t){const i=t.getConnection(),n=t.getMediaStream();e.setConnection(i),i.setRemoteStream(n.id,e),e.setMediaStream(n),e.updateAudioPlayingState(t.hasAudio()),e.updateVideoPlayingState(t.hasVideo())}addSubscriptionRecord(e,t,i){const n=t.getType();if(this.subscribedStreams_.has(e))this.subscribedStreams_.get(e).set(n,t);else{const i=new Map;i.set(t.getType(),t),this.subscribedStreams_.set(e,i)}if(this.subscriptedOptions_.has(e))this.subscriptedOptions_.get(e).set(n,i);else{const n=new Map;n.set(t.getType(),i),this.subscriptedOptions_.set(e,n)}this.deleteUnsubscriptionRecord(e,n)}addUnsubscriptionRecord(e,t){if(this.unsubscribedStreams_.has(e))this.unsubscribedStreams_.get(e).set(t.getType(),t);else{const i=new Map;i.set(t.getType(),t),this.unsubscribedStreams_.set(e,i)}this.deleteSubscriptionRecord(e,t.getType())}getSubscribedStream(e,t){return this.subscribedStreams_.has(e)&&this.subscribedStreams_.get(e).has(t)?this.subscribedStreams_.get(e).get(t):null}getOptions(e,t){return this.subscriptedOptions_.has(e)&&this.subscriptedOptions_.get(e).has(t)?this.subscriptedOptions_.get(e).get(t):null}getUnsubscribedStream(e,t){return this.unsubscribedStreams_.has(e)&&this.unsubscribedStreams_.get(e).has(t)?this.unsubscribedStreams_.get(e).get(t):null}deleteSubscriptionRecord(e,t){this.subscribedStreams_.has(e)&&this.subscribedStreams_.get(e).delete(t),this.subscriptedOptions_.has(e)&&this.subscriptedOptions_.get(e).delete(t)}deleteUnsubscriptionRecord(e,t){this.unsubscribedStreams_.has(e)&&this.unsubscribedStreams_.get(e).delete(t)}markAllStream(){for(const[e,t]of[...this.subscribedStreams_.entries()])for(const[i]of[...t.entries()])this.setAutoRecoveryFlag(e,i);for(const[e,t]of[...this.unsubscribedStreams_.entries()])for(const[i]of[...t.entries()])this.setAutoRecoveryFlag(e,i)}setAutoRecoveryFlag(e,t){if(Uo.info(`setAutoRecoveryFlag() mark [${e}][${t}]`),this.autoRecoveryFlags_.has(e))this.autoRecoveryFlags_.get(e).set(t);else{const i=new Map;i.set(t),this.autoRecoveryFlags_.set(e,i)}}hasAutoRecoveryFlag(e,t){return!!this.isEnabled&&this.autoRecoveryFlags_.has(e)&&this.autoRecoveryFlags_.get(e).has(t)}deleteAutoRecoveryFlag(e,t){this.autoRecoveryFlags_.has(e)&&this.autoRecoveryFlags_.get(e).delete(t)}delete(e){this.unsubscribedStreams_.delete(e),this.subscribedStreams_.delete(e),this.subscriptedOptions_.delete(e),this.autoRecoveryFlags_.delete(e)}}class Nu{constructor(e){this.player_=e,this.canvas_=document.createElement(Mi),this.canvasCtx_=this.canvas_.getContext("2d")}setCanvasRect(e,t){this.canvas_.width=e,this.canvas_.height=t}drawVideoToCanvas(){const e=this.player_.getElement();this.canvasCtx_.drawImage(e,0,0,this.canvas_.width,this.canvas_.height)}generateVideoTrackFromCanvasCapture(e){return this.canvas_.captureStream(e).getVideoTracks()[0]}generateStreamFromTrack(e){const t=new MediaStream;return t.addTrack(e),t}destroy(){this.player_.stop(),this.canvas_=null,this.canvasCtx_=null}get canvas(){return this.canvas_}get canvasCtx(){return this.canvasCtx_}get canDrawVideoToCanvas(){if(this.player_){const e=this.player_.getElement();if(e)return e.readyState===e.HAVE_ENOUGH_DATA}return!1}}class Lu{constructor(e){this.localStream_=e,this.player_=new _u({stream:e,track:e.getVideoTrack(),muted:!0,objectFit:"cover",mirror:!1}),this.player_.play().then(()=>{Uo.info("VideoGenerator: play local video success")}).catch(()=>{Uo.error("VideoGenerator: Failed to play local video")}),this.processor_=new Nu(this.player_)}generateSmallVideoTrack(e){const t=this.getSmallVideoProfile(e);this.processor_.setCanvasRect(t.width,t.height),this.player_.setRect({width:t.width,height:t.height});const i=this.processor_.generateVideoTrackFromCanvasCapture(t.frameRate);return this.interval_=al.setInterval(this.render.bind(this),Math.ceil(1e3/t.frameRate)),i}render(){this.processor_.canDrawVideoToCanvas&&this.processor_.drawVideoToCanvas()}destroy(){al.clearInterval(this.interval_),this.processor_&&this.processor_.destroy()}getSmallVideoProfile(e){const t=this.localStream_.getVideoTrack(),i=this.localStream_.getVideoProfile();let n,r=t.getSettings(),o=r&&r.width&&r.height?{width:r.width,height:r.height}:i;const s=o.width*o.height,a=e.width*e.height;return Uo.log(`big stream resolution: ${o.height}*${o.width} small stream resolution: ${e.height}*${e.width} `),s>a?n=s/a:(Uo.warn(`Small stream resolution is larger than big stream, which is invalid. big: ${o.width} * ${o.height} small: ${e.width} * ${e.height}`),n=s/19200),{width:parseInt(o.width/Math.sqrt(n)),height:parseInt(o.height/Math.sqrt(n)),frameRate:e.frameRate}}}const Pu={voiceActivityDetection:!1};class Du extends vu{constructor(e){super(e),this.localStream_=null,this.exchangeSDPTimeout_=-1,this.smallGenerator_=null,this.isSDPExchanging_=!1,this.ssrc_={audio:0,video:0,small:0},this.canvasTrack_=null}initialize(){super.initialize(),this.installEvents()}reset(){super.close(),this.uninstallEvents(),this.clearExchangeSDPTimeout(),this.canvasTrack_=null,this.localStream_&&this.localStream_.clearCanvas()}close(){this.reset(),this.emitConnectionStateChangedEvent(Ht),this.smallGenerator_&&(this.smallGenerator_.destroy(),this.smallGenerator_=null)}installEvents(){this.emitter_.on(Ml,this.handleError,this),this.emitter_.on(xl,this.handleConnectionStateChange,this)}uninstallEvents(){this.emitter_.off(Ml,this.handleError,this),this.emitter_.off(xl,this.handleConnectionStateChange,this)}async publish(e){this.localStream_=e;const t=e.getMediaStream();this.log_.info("is publishing stream: "+e.getId());const i=this.localStream_.getAudioTrack(),n=this.localStream_.getVideoTrack();if(i&&this.peerConnection_.addTrack(i,t),n&&(St&&Br(n)?(this.canvasTrack_=this.localStream_.genCanvasTrack(n),this.peerConnection_.addTrack(this.canvasTrack_,t)):this.peerConnection_.addTrack(n,t),this.client_.getIsEnableSmallStream())){this.smallGenerator_=new Lu(this.localStream_);let e=this.smallGenerator_.generateSmallVideoTrack(this.client_.smallStreamConfig_);this.peerConnection_.addTrack(e,t)}return this.updateMediaSettings(t),await this.connect(),e}updateMediaSettings(e){const{detail:{isH264EncodeSupported:t,isVp8EncodeSupported:i}}=this.client_.getSystemResult();let n="";t?n="H264":i&&(n="VP8");let r={EncVideoCodec:n,EncVideoWidth:0,EncVideoHeight:0,EncVideoBr:"0",EncVideoFps:0,EncAudioCodec:"opus",EncAudioFS:0,EncAudioCh:0,EncAudioBr:"0"};"getSettings"in MediaStreamTrack.prototype?e.getTracks().forEach(e=>{const t=e.getSettings();if(e.kind===xi){let e=1;t.channelCount&&(e=t.channelCount),r.EncAudioCh=e,r.EncAudioBr=""+1e3*this.localStream_.getAudioBitrate(),r.EncAudioFS=t.sampleRate}else e.kind===Bi&&(this.client_.getIsEnableSmallStream()&&(r.EncSmallVideoWidth=this.client_.smallStreamConfig.width,r.EncSmallVideoHeight=this.client_.smallStreamConfig.height,r.EncSmallVideoFps=this.client_.smallStreamConfig.framerate,r.EncSmallVideoBr=""+1e3*this.client_.smallStreamConfig.bitrate),r.EncVideoWidth=t.width,r.EncVideoHeight=t.height,r.EncVideoFps=t.frameRate,r.EncVideoBr=""+1e3*this.localStream_.getVideoBitrate())}):r=this.getMediaSettingsFromProfile(r),this.log_.info("updateMediaSettings: "+JSON.stringify(r)),this.signalChannel_.send(is,r)}getMediaSettingsFromProfile(e){const t=this.localStream_;if(t){if(t.getAudioTrack()){const i=t.getAudioProfile();e.EncAudioCh=i.channelCount,e.EncAudioBr=""+1e3*i.bitrate,e.EncAudioFS=i.sampleRate}if(t.getVideoTrack()){const i=t.getVideoProfile();e.EncVideoWidth=i.width,e.EncVideoHeight=i.height,e.EncVideoFps=i.frameRate,e.EncVideoBr=""+1e3*i.bitrate}}return e}async addTrack(e){if(this.peerConnection_){e.kind===Bi&&St&&Br(e)&&(e=this.canvasTrack_=this.localStream_.genCanvasTrack(e)),this.log_.info(`is adding ${e.kind} track to current published local stream`),vl()&&this.peerConnection_.getTransceivers().findIndex(e=>"stopped"===e.direction)>=0&&(this.log_.warn("transceiver is stopping, negotiate sdp first"),await this.updateOffer(Xi,e));const t=this.peerConnection_.getSenders().find(t=>t.track&&t.track.kind===e.kind);if(t){this.log_.warn("sender already exists, remove sender first");const e=t.track;this.removeSender(t),await this.updateOffer(Xi,e)}const i=this.localStream_.getMediaStream();this.peerConnection_.addTrack(e,i),this.updateMediaSettings(i),await this.updateOffer(Ji,e),Xs(this.userId_,{eventId:e.kind===xi?Es:vs,eventDesc:`add ${e.kind} track to current published stream`,timestamp:_e(),userId:this.userId_,tinyId:this.tinyId_})}}isNeedToResetOfferOrder(){if("plan-b"===this.sdpSemantics_||!this.peerConnection_||!this.peerConnection_.localDescription)return!1;const e=this.peerConnection_.localDescription.sdp,t=rl(e);for(let i=0;i<t.media.length;i++)if(0===t.media[i].mid&&t.media[i].type===Bi)return!0;return!1}removeSender(e){let t=null;vl()&&(t=this.peerConnection_.getTransceivers().find(t=>t.sender&&t.sender.track===e.track)),this.peerConnection_.removeTrack(e),t&&Lr(t.stop)&&(this.log_.info("stop transceiver"),t.stop())}async removeTrack(e){if(this.peerConnection_&&_l()){if(e.kind===Bi&&St&&this.canvasTrack_&&(e=this.canvasTrack_,this.localStream_.clearCanvas()),this.log_.info(`is removing ${e.kind} track from current published local stream`),e.kind===Bi&&this.isNeedToResetOfferOrder())return this.reset(),this.initialize(),void await this.publish(this.localStream_);const t=this.peerConnection_.getSenders().find(t=>t.track===e);t&&(this.removeSender(t),this.updateMediaSettings(this.localStream_.getMediaStream())),await this.updateOffer(Xi,e),Xs(this.userId_,{eventId:e.kind===xi?ys:As,eventDesc:`remove ${e.kind} track from current published stream`,timestamp:_e(),userId:this.userId_,tinyId:this.tinyId_})}}isReplaceTrackAvailable(){return"RTCRtpSender"in window&&"replaceTrack"in window.RTCRtpSender.prototype}async replaceTrack(e){if(e.kind===Bi&&St&&this.canvasTrack_)return;if(!this.isReplaceTrackAvailable()||!_l())throw new br({code:Cr.INVALID_OPERATION,message:zc({key:jc})});if(!this.peerConnection_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:ac})});const t=this.peerConnection_.getSenders();if(0===t.length)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:ac})});t.forEach(t=>{t.track&&t.track.kind===e.kind&&(this.log_.info(`is replacing ${e.kind} track to current published local stream`),t.replaceTrack(e))}),Xs(this.userId_,{eventId:e.kind===xi?Ls:Ns,eventDesc:`replace ${e.kind} track from current published stream`,timestamp:_e(),userId:this.userId_,tinyId:this.tinyId_})}async setBandwidth(e,t,i){if(!this.isUplink_)return i;if(!Al())return t===Bi?this.updateVideoBandwidthRestriction(i,e):this.updateAudioBandwidthRestriction(i,e);const n=this.peerConnection_.getSenders().find(e=>e.track&&e.track.kind===t);if(n){const r=n.getParameters();r.encodings&&0!==r.encodings.length||(r.encodings=[{}]),"unlimited"===e?delete r.encodings[0].maxBitrate:r.encodings[0].maxBitrate=1e3*e;try{return await n.setParameters(r),this.log_.info(t+" bandwidth was set to "+e+" kbps"),i}catch(s){return this.log_.info("failed to set bandwidth by setting maxBitrate: "+s),t===Bi?this.updateVideoBandwidthRestriction(i,e):this.updateAudioBandwidthRestriction(i,e)}}return i}async setSmallStreamBandwidth(e,t){if(!this.isUplink_)return t;if(!Al())return this.updateSmallVideoBandwidthRestriction(t,e);const i=this.peerConnection_.getSenders().filter(e=>e.track&&e.track.kind===Bi)[1];if(i){const n=i.getParameters();n.encodings&&0!==n.encodings.length||(n.encodings=[{}]),"unlimited"===e?delete n.encodings[0].maxBitrate:n.encodings[0].maxBitrate=1e3*e;try{return await i.setParameters(n),this.log_.info("small stream bandwidth was set to "+e+" kbps"),t}catch(o){return this.log_.info("failed to set small stream bandwidth by setting maxBitrate: "+o),this.updateSmallVideoBandwidthRestriction(t,e)}}return t}updateVideoBandwidthRestriction(e,t){let i="AS";return Re&&(i="TIAS",t*=1e3),-1===e.indexOf("b="+i+":")?e.replace(/m=video (.*)\r\nc=IN (.*)\r\n/,"m=video $1\r\nc=IN $2\r\nb="+i+":"+t+"\r\n"):e.replace(new RegExp("b="+i+":.*\r\n"),"b="+i+":"+t+"\r\n")}updateAudioBandwidthRestriction(e,t){let i="AS";return Re&&(i="TIAS",t*=1e3),e.replace(/m=audio (.*)\r\nc=IN (.*)\r\n/,"m=audio $1\r\nc=IN $2\r\nb="+i+":"+t+"\r\n")}updateSmallVideoBandwidthRestriction(e,t){let i="AS";Re&&(i="TIAS",t*=1e3);let n=/m=video (.*)\r\nc=IN (.*)\r\n/g,r=[],o=n.exec(e);for(r.push(o);null!==o;)o=n.exec(e),r.push(o);let s=r[r.length-2],a=e.slice(0,s.index),c=e.slice(s.index);return-1===e.indexOf("b="+i+":")?(c=c.replace(/m=video (.*)\r\nc=IN (.*)\r\n/,"m=video $1\r\nc=IN $2\r\nb="+i+":"+t+"\r\n"),e=a+c):(c=c.replace(new RegExp("b="+i+":.*\r\n"),"b="+i+":"+t+"\r\n"),e=a+c),e}removeBandwidthRestriction(e){return e.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"")}removeVideoOrientation(e){return e.replace(/urn:3gpp:video-orientation/,"")}async connect(){try{await this.exchangeSDP(),await this.waitForPeerConnectionConnected()}catch(i){throw this.closePeerConnection(!0),i}}async exchangeSDP(){try{this.isSDPExchanging_=!0,await this.createOffer(),this.log_.info("createOffer success, sending offer to remote server"),await this.doExchangeSDP(),this.isSDPExchanging_=!1}catch(i){throw this.isSDPExchanging_=!1,i}}async createOffer(){try{const e=await this.peerConnection_.createOffer(Pu);await this.peerConnection_.setLocalDescription(e),this.updateSSRC(e.sdp),Tr.logSuccessEvent({userId:this.client_.getUserId(),eventType:fi,kind:"offer"})}catch(i){throw Tr.logFailedEvent({userId:this.client_.getUserId(),eventType:fi,kind:"offer",error:i}),i}}doExchangeSDP(){return new Promise((e,t)=>{this.exchangeSDPTimeout_=setTimeout(()=>{this.signalChannel_.off(Zo.PUBLISH_RESULT,i),this.signalChannel_.off(Zo.ON_PUBLISH_RESPONSE,i),this.clearExchangeSDPTimeout();const e=new br({code:Cr.API_CALL_TIMEOUT,message:zc({key:pa})});t(e)},5e3);const i=async i=>{try{this.clearExchangeSDPTimeout(),await this.acceptAnswer(i.data.content),e()}catch(n){t(n)}},n={type:this.peerConnection_.localDescription.type,sdp:this.removeVideoOrientation(this.peerConnection_.localDescription.sdp),screen:this.localStream_.hasScreenTrack()};this.signalChannel_.once(Zo.PUBLISH_RESULT,i),this.signalChannel_.once(Zo.ON_PUBLISH_RESPONSE,i),this.log_.debug("sending sdp offer: "+n.sdp),this.signalChannel_.send(rs,n,0)})}setSDPDirection(e,t,i="all"){const n=rl(e);return n.media.forEach(e=>{"all"!==i&&e.type!==i||(e.direction=t)}),ol(n)}async updateOffer(e,t){try{const i=await this.peerConnection_.createOffer(Pu);Re&&(i.sdp=this.setSDPDirection(i.sdp,"sendrecv")),await this.peerConnection_.setLocalDescription(i);const n={action:e,trackId:t.id,kind:t.kind,type:"offer",sdp:this.peerConnection_.localDescription.sdp};this.log_.info("createOffer success, sending updated offer to remote server"),this.log_.debug("updatedOffer: "+n.sdp);const r=await this.signalChannel_.sendWaitForResponse({command:Yo,data:n,responseCommand:Zo.UPDATE_OFFER_RESULT,timeout:1e4,commandDesc:"update offer"});await this.acceptAnswer(r.data.content),this.updateSSRC(i.sdp),Tr.logSuccessEvent({userId:this.client_.getUserId(),eventType:fi,kind:"offer"})}catch(r){throw this.log_.error(r),Tr.logFailedEvent({userId:this.client_.getUserId(),eventType:fi,kind:"offer",error:r}),r}}async acceptAnswer(e){if(77392===e.result)throw this.log_.error(Wc.NOT_SUPPORTED_H264ENCODE),new br({code:Cr.NOT_SUPPORTED_H264,message:zc({key:Fc})});const t=this.localStream_.getVideoBitrate(),i=this.localStream_.getAudioBitrate();let n=this.removeVideoOrientation(e.sdp);try{if(n=await this.setBandwidth(t,Bi,n),n=await this.setBandwidth(i,xi,n),this.client_.getIsEnableSmallStream()){const e=this.client_.smallStreamConfig;n=await this.setSmallStreamBandwidth(e.bitrate,n)}const r={type:e.type,sdp:n};await this.peerConnection_.setRemoteDescription(r),this.log_.debug("accepted answer: "+n),Tr.logSuccessEvent({userId:this.client_.getUserId(),eventType:gi,kind:"answer"})}catch(s){throw Tr.logFailedEvent({userId:this.client_.getUserId(),eventType:gi,kind:"answer",error:s}),this.log_.error("failed to accept remote answer "+s),s}}sendMutedFlag(e){const t={srctinyid:0,userid:this.userId_,flag:e};this.log_.info("send muted flag: "+e),this.signalChannel_.send(ts,t)}getIsReconnecting(){return this.isReconnecting_}async reconnect(){if(-1===this.reconnectionTimer_){if(this.reconnectionCount_>=30){this.log_.warn("SDK has tried reconnect uplink for 30 times, but all failed, please check your network"),this.stopReconnection();const e=new br({code:Cr.UPLINK_RECONNECTION_FAILED,message:zc({key:ma})});return Tr.logFailedEvent({userId:this.client_.getUserId(),eventType:di,error:e}),this.addEventInternal(zs,"uplink-connection reconnect fail"),this.emitConnectionStateChangedEvent(Ht),void this.emitter_.emit(Ml,e)}if(this.signalChannel_.getCurrentState()!==qo)return this.log_.warn("reconnect() signal channel is not connected, suspend reconnection until signal is connected"),void this.signalChannel_.once(jo,this.reconnect,this);this.reconnectionCount_++;try{this.log_.warn(`reconnect() try to reconnect uplink [${this.reconnectionCount_}/30]`);const e=Nr(this.reconnectionCount_);if(this.reconnectionTimer_=setTimeout(()=>{this.log_.warn(`reconnect() uplink reconnect timeout(${e/1e3}s), try again`),this.signalChannel_.off(Zo.UNPUBLISH_RESULT,this.onUnpublishResult,this),this.clearReconnectionTimer(),this.reconnect()},e),this.isSDPExchanging_||this.peerConnection_&&this.peerConnection_.connectionState===zt)return;this.signalChannel_.send(os),this.signalChannel_.once(Zo.UNPUBLISH_RESULT,this.onUnpublishResult,this)}catch(i){}}else this.log_.warn("reconnect() uplink is reconnecting, ignore current reconnection")}async onUnpublishResult(){try{this.reset(),this.initialize(),await this.publish(this.localStream_)}catch(i){}}clearExchangeSDPTimeout(){-1!==this.exchangeSDPTimeout_&&(clearTimeout(this.exchangeSDPTimeout_),this.exchangeSDPTimeout_=-1)}clearReconnectionTimer(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}handleError(e){e.getCode()===Cr.ICE_TRANSPORT_ERROR&&(this.isFirstConnection_&&(this.isFirstConnection_=!1,Tr.logFailedEvent({userId:this.client_.getUserId(),eventType:ui,error:e})),this.isReconnecting_||this.startReconnection())}handleConnectionStateChange(e){e.state===qt&&(this.isFirstConnection_&&(this.isFirstConnection_=!1,Tr.logSuccessEvent({userId:this.client_.getUserId(),eventType:ui}),this.addEventInternal(js,"uplink-connection is connected")),this.isReconnecting_&&(Tr.logSuccessEvent({userId:this.client_.getUserId(),eventType:di}),this.log_.warn("reconnect() uplink reconnect successfully"),this.addEventInternal($s,"uplink-connection reconnect success"),this.stopReconnection()))}updateSSRC(e){try{let t=0;rl(e).media.forEach(e=>{if(e.type===xi){const t=e.ssrcs[0];t&&(this.ssrc_.audio=t.id)}else{const i=e.ssrcs[0];switch(t+=1,t){case 1:i&&(this.ssrc_.video=i.id);break;case 2:i&&(this.ssrc_.small=i.id)}}})}catch(n){}}getLocalStreamVideoTrackId(){if(this.peerConnection_){const e=this.peerConnection_.getSenders().filter(e=>e.track&&e.track.kind===Bi);if(e[0])return e[0].track.id}if(this.localStream_){const e=this.localStream_.getVideoTrack();if(e)return e.id}return""}getSSRC(){return this.ssrc_}}class Mu extends vu{constructor(e){super(e),this.remoteStreams_=new Map,this.autoSubscribe=e.autoSubscribe,this.trackState_={audio:e.trackState.audio,video:e.trackState.video,auxiliary:e.trackState.auxiliary},this.ssrc_={audio:0,video:0,auxiliary:0},this.subscribeState_={audio:e.autoSubscribe,video:e.autoSubscribe,auxiliary:e.autoSubscribe},this.pendingSubscription_=[],this.pendingStreams_=[],this.subscriptionTimeout_=-1,this.subscriptionRetryCount_=0,this.isSubscriptionPending_=!1,this.sentSubscriptionAfterConnected_=!1,this.isSDPExchanging_=!1,this.installEvents()}get isMainStreamSubscribed(){return(this.subscribeState_.audio||this.subscribeState_.video)&&(this.trackState_.audio||this.trackState_.video)}get isAuxStreamSubscribed(){return this.subscribeState_.auxiliary&&this.trackState_.auxiliary}initialize(){super.initialize(),this.peerConnection_.ontrack=this.onTrack.bind(this)}close(){super.close(),this.trackState_.audio=!1,this.trackState_.video=!1,this.trackState_.auxiliary=!1,this.emitConnectionStateChangedEvent(Ht),-1!==this.subscriptionTimeout_&&(clearTimeout(this.subscriptionTimeout_),this.subscriptionTimeout_=-1),this.remoteStreams_.forEach(e=>{const t=e;t.setConnection(null),t.getIsStreamAddedEventEmitted()&&this.emitter_.emit(Ll,{stream:t})}),this.remoteStreams_.clear(),this.uninstallEvents()}installEvents(){Wr.on(ho,this.onRemoteStreamUpdate,this),this.signalChannel_.on(Zo.SUBSCRIBE_CHANGE_RESULT,this.onSubscribeChangeResult,this),this.signalChannel_.on(Zo.UNSUBSCRIBE_RESULT,this.onUnsubscribeResult,this),this.emitter_.on(Ml,e=>{e.getCode()===Cr.ICE_TRANSPORT_ERROR&&(this.isFirstConnection_&&(this.isFirstConnection_=!1,Tr.logFailedEvent({userId:this.client_.getUserId(),eventType:hi,error:e})),this.isReconnecting_||this.startReconnection())}),this.emitter_.on(xl,e=>{e.state===qt&&this.isFirstConnection_&&(this.isFirstConnection_=!1,Tr.logSuccessEvent({userId:this.client_.getUserId(),eventType:hi}),this.addEventInternal(Gs,"downlink-connection is connected"))})}uninstallEvents(){Wr.removeListener(ho,this.onRemoteStreamUpdate,this),this.signalChannel_.removeListener(Zo.SUBSCRIBE_CHANGE_RESULT,this.onSubscribeChangeResult,this),this.signalChannel_.removeListener(Zo.UNSUBSCRIBE_RESULT,this.onUnsubscribeResult,this)}onRemoteStreamUpdate(e){if(this.hitTest(e.tinyId)&&e.client===this.client_){this.updateTrackState(e.action,e.kind);const t=e.kind===Ui?jt:Vt,i=this.remoteStreams_.get(t);if(!i)return;e.action===Ji?this.handleRemoteAddTrack(e.kind,i):this.handleRemoteRemoveTrack(e.kind,i)}}handleRemoteAddTrack(e,t){this.log_.info(`remote add ${e} track`),e===xi?t.updateAudioPlayingState(this.subscribeState_.audio):t.updateVideoPlayingState(e===Ui?this.subscribeState_.auxiliary:this.subscribeState_.video),t.getIsStreamAddedEventEmitted()?this.emitter_.emit(Pl,{stream:t}):(this.emitter_.emit(Nl,{stream:t}),this.currentState_===qt&&t.emitConnectionStateChanged({prevState:Ht,state:qt}))}handleRemoteRemoveTrack(e,t){t.getIsStreamAddedEventEmitted()&&(this.log_.info(`remote remove ${e} track`),e!==Ui&&(this.trackState_.audio||this.trackState_.video)||t.isInSubscriptionCycle()?(e===xi?t.updateAudioPlayingState(!1):t.updateVideoPlayingState(!1),this.emitter_.emit(Pl,{stream:t})):(this.log_.info(`remote stream ${t.getType()} removed`),this.currentState_===qt&&t.emitConnectionStateChanged({prevState:qt,state:Ht}),this.emitter_.emit(Ll,{stream:t})))}updateTrackState(e,t){const i=e===Ji;switch(t){case xi:this.trackState_.audio=i;break;case Bi:this.trackState_.video=i;break;case Ui:this.trackState_.auxiliary=i}this.log_.info("trackState updated: "+JSON.stringify(this.trackState_))}onTrack(e){const t=e.streams[0],i=e.track;if(this.log_.info(`ontrack() kind: ${i.kind} id: ${i.id} streamId: ${t.id}`),"unified-plan"===this.sdpSemantics_){const e=function(e){let t=nl.parse(e),i={audio:[],video:[]};return t.media.forEach(e=>{if(e.ssrcs){let t=e.ssrcs[0].id>>16&255;if(e.type===xi)i.audio.push(Vt);else if(e.type==Bi){const e=t===Gt?Vt:jt;i.video.push(e)}}}),i}(this.peerConnection_.remoteDescription.sdp);if(i.kind===xi){if(0===e.audio.length||t.id!==Vt)return void this.log_.debug("skip this invalid audio track")}else if(-1===e.video.indexOf(t.id))return void this.log_.debug(`skip this invalid video track: ${i.id}  msid: ${t.id}`)}Tr.logEvent({eventType:"ontrack",kind:i.kind});let n=!1,r=this.remoteStreams_.get(t.id);const o=t.id===Vt?"main":"auxiliary";if(Pr(r)&&(r=new Ou({type:o,userId:this.userId_,client:this.client_}),r.setConnection(this),this.remoteStreams_.set(t.id,r),n=!0),r.setMediaStream(t),i.kind===xi?r.updateAudioPlayingState(this.subscribeState_.audio):"main"===o?r.updateVideoPlayingState(this.subscribeState_.video):r.updateVideoPlayingState(this.subscribeState_.auxiliary),"auxiliary"===o&&!this.trackState_.auxiliary)return;if("main"===o&&!this.trackState_.audio&&!this.trackState_.video)return;const s=this.client_.getSubscriptionManager();s&&s.hasAutoRecoveryFlag(this.userId_,o)||(n?this.emitter_.emit(Nl,{stream:r}):this.emitter_.emit(Pl,{stream:r}))}addRRTRLine(e){const t=e.split("\r\n"),i=new Map;t.forEach((e,n)=>{/^a=rtcp-fb:/.test(e)&&t[n+1]&&!/^a=rtcp-fb:/.test(t[n+1])&&i.set(n+1,e.match(/^a=rtcp-fb:\d+/)[0]+" rrtr")});const n=[...i];for(let r=0;r<n.length;r++){let[e,i]=n[r];t.splice(e+r,0,i)}return t.join("\r\n")}addSPSDescription(e){const t=rl(e);return t.media.forEach(e=>{e.type===Bi&&e.fmtp.forEach(e=>{e.config+=";sps-pps-idr-in-keyframe=1"})}),ol(t)}removeSDESDescription(e){const t=["urn:ietf:params:rtp-hdrext:sdes:mid","urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id","urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id"],i=rl(e);return i.media.forEach(e=>{e.ext=e.ext.filter(e=>!t.includes(e.uri))}),ol(i)}isSubscriptionStateNotChanged(e,t){return"main"===e.getType()?!Pr(t.audio)&&!Pr(t.video)&&t.audio===this.subscribeState_.audio&&t.video===this.subscribeState_.video:"auxiliary"===e.getType()?!Pr(t.video)&&this.subscribeState_.auxiliary===t.video:void 0}async subscribe(e,t){const{emitEvent:i=!0}=t,n=e.getType();if(!this.peerConnection_||this.peerConnection_.connectionState!==$t&&this.peerConnection_.connectionState!==zt||await this.waitForPeerConnectionConnected(),this.isSubscriptionStateNotChanged(e,t))return this.peerConnection_||(this.initialize(),await this.connect()),i&&this.emitter_.emit(Dl,{stream:e,result:!0}),e;if("main"===n?(Pr(t.audio)||(this.subscribeState_.audio=t.audio),Pr(t.video)||(this.subscribeState_.video=t.video),this.addEventInternal(this.subscribeState_.audio?Is:ws,this.subscribeState_.audio?"subscribe audio":"unsubscribe audio"),this.addEventInternal(this.subscribeState_.video?Is:ws,this.subscribeState_.video?"subscribe video":"unsubscribe video")):Pr(t.video)||(this.subscribeState_.auxiliary=t.video),this.log_.info(`subscribe ${n} stream with options ${JSON.stringify(t)} current state: ${JSON.stringify(this.subscribeState_)}`),this.peerConnection_||this.isSDPExchanging_){let t=Ii;this.isMainStreamSubscribed||this.isAuxStreamSubscribed||(t=Ti),await this.sendSubscription(e,t),"main"===n?(e.updateAudioPlayingState(this.subscribeState_.audio),e.updateVideoPlayingState(this.subscribeState_.video)):e.updateVideoPlayingState(this.subscribeState_.auxiliary)}else this.initialize(),await this.connect();return i&&this.emitter_.emit(Dl,{stream:e,result:!0}),e}async unsubscribe(e){const t=e.getType();if("main"===t){if(!this.isMainStreamSubscribed)return this.log_.info("main stream already unsubscribed"),e;this.subscribeState_.audio=!1,this.subscribeState_.video=!1}else{if(!this.isAuxStreamSubscribed)return this.log_.info("auxiliary stream already unsubscribed"),e;this.subscribeState_.auxiliary=!1}let i=Ti;if(("main"===t&&this.isAuxStreamSubscribed||"auxiliary"===t&&this.isMainStreamSubscribed)&&(i=Ii),this.log_.info(`unsubscribe ${t} stream with ${JSON.stringify(this.subscribeState_)}`),await this.sendSubscription(e,i),e.updateVideoPlayingState(!1),e.updateAudioPlayingState(!1),i===Ti){const t=e.getMediaStream();t&&t.getTracks().forEach(e=>t.removeTrack(e)),this.closePeerConnection(),this.emitConnectionStateChangedEvent(Ht)}return this.addEventInternal(ws,"unsubscribe audio"),this.addEventInternal(Rs,"unsubscribe video"),e}sendSubscription(e,t){return new Promise((i,n)=>{const r={srctinyid:this.tinyId_,userid:this.userId_,audio:this.subscribeState_.audio,bigVideo:this.subscribeState_.video,auxVideo:this.subscribeState_.auxiliary};this.pendingSubscription_.length>0?this.log_.debug("queue the subscription for later handling"):this.doSendSubscription(r,e,t),this.pendingSubscription_.push({stream:e,type:t,data:r,callback:({code:e,message:r})=>{if(0===e)i();else{const i=new br({code:e,message:zc({key:da,data:{type:t,message:r}})});this.log_.error(i),n(i)}}}),e.setInSubscriptionCycle(!0)})}doSendSubscription(e,t,i){if(!this.peerConnection_||this.peerConnection_.connectionState!==Jt&&this.peerConnection_.connectionState!==Xt)return this.log_.debug(`try to send subscription [${i}] when peeConnection connected`),void(this.sentSubscriptionAfterConnected_=!1);t&&this.pendingStreams_.push(t),this.log_.debug("doSendSubscription() send SUBSCRIBE command with data: "+JSON.stringify(e)),i===Ii?this.signalChannel_.send(cs,e):i===Ti&&this.signalChannel_.send(as,e),this.isSubscriptionPending_=!0,this.subscriptionTimeout_=setTimeout(()=>{if(this.isSubscriptionPending_)if(this.log_.debug("subscription timeout"),this.subscriptionRetryCount_+=1,this.subscriptionRetryCount_<=3){this.log_.debug("resend subscription");const e=this.pendingSubscription_[0].data;this.doSendSubscription(e,t,i)}else this.log_.error(Wc.SUBSCRIPTION_TIMEOUT),this.pendingSubscription_.shift(),this.pendingStreams_.shift(),this.isSubscriptionPending_=!1,this.subscriptionRetryCount_=0,this.emitter_.emit(Ml,new br({code:Cr.SUBSCRIPTION_TIMEOUT,message:zc({key:ha})}))},5e3)}onSubscribeChangeResult(e){const t=e.data.content,i=t.srctinyid;if(this.hitTest(i)){const e=this.pendingSubscription_[0];e&&e.type===Ii&&e.callback({code:t.errCode,message:t.errMsg}),this.sendNextSubscription()}}onUnsubscribeResult(e){const t=e.data.content,i=t.srctinyid;if(this.hitTest(i)){const e=this.pendingSubscription_[0];e&&e.type===Ti&&e.callback({code:t.errCode,message:t.errMsg}),this.sendNextSubscription()}}async connect(){try{await this.exchangeSDP(),await this.waitForPeerConnectionConnected()}catch(i){throw this.closePeerConnection(!0),i}}async exchangeSDP(){try{this.isSDPExchanging_=!0,await this.createOffer(),this.log_.info("createOffer success, sending offer to remote server");const{type:e,sdp:t}=this.peerConnection_.localDescription,i={type:e,sdp:t,userid:this.userId_,srctinyid:this.tinyId_,audio:this.subscribeState_.audio,bigVideo:this.subscribeState_.video,auxVideo:this.subscribeState_.auxiliary};Wr.emit(Lo,{client:this.client_,connection:this,userId:this.userId_,tinyId:this.tinyId_,role:Ut,subscribeState:this.subscribeState_,trackState:this.trackState_});const n=await this.signalChannel_.sendWaitForResponse({command:ss,commandDesc:"exchange sdp",data:i,responseCommand:Zo.SUBSCRIBE_RESULT});if(!this.peerConnection_){const e=this.genRemoteStreamNotExistError();throw this.log_.warn(e),e}await this.onSubscribeResult(n),this.isSDPExchanging_=!1}catch(i){throw this.isSDPExchanging_=!1,i}}async createOffer(){const e={voiceActivityDetection:!1};"RTCPeerConnection"in window&&"addTransceiver"in window.RTCPeerConnection.prototype&&"unified-plan"===this.sdpSemantics_?(this.peerConnection_.addTransceiver(xi,{direction:"recvonly"}),this.peerConnection_.addTransceiver(Bi,{direction:"recvonly"}),this.peerConnection_.addTransceiver(Bi,{direction:"recvonly"})):(e.offerToReceiveAudio=!0,e.offerToReceiveVideo=!0);const t=await this.peerConnection_.createOffer(e),{isH264DecodeSupported:i}=await hl();i||(this.log_.warn("remove h264 desc from sdp"),t.sdp=function(e){const t=rl(e);return t.media.forEach(e=>{if(e.type===Bi){const t=new Set;e.rtp.forEach(({payload:e,codec:i})=>"H264"===i&&t.add(e)),e.fmtp.forEach(({payload:e,config:i})=>{const n=i.match(/apt=(\d+)/);n&&n[1]&&t.has(Number(n[1]))&&t.add(e)});const i=({payload:e})=>!t.has(e);e.rtp=e.rtp.filter(i),e.rtcpFb=e.rtcpFb.filter(i),e.fmtp=e.fmtp.filter(i),e.payloads=e.payloads.split(" ").filter(e=>!t.has(Number(e))).join(" ")}}),ol(t)}(t.sdp)),t.sdp=this.addRRTRLine(t.sdp),t.sdp=this.addSPSDescription(t.sdp),t.sdp=function(e){const t=rl(e);return t.media.forEach(e=>{e.type===xi&&e.fmtp.forEach(e=>{e.config+=";sprop-stereo=1;stereo=1"})}),ol(t)}(t.sdp),"unified-plan"===this.sdpSemantics_&&(t.sdp=this.removeSDESDescription(t.sdp)),await this.peerConnection_.setLocalDescription(t)}async onSubscribeResult(e){if(e.data.content&&77393===e.data.content.errCode)throw this.log_.error(Wc.NOT_SUPPORTED_H264DECODE),new br({code:Cr.NOT_SUPPORTED_H264,message:zc({key:Vc})});let{type:t,sdp:i,errCode:n,errMsg:r}=e.data.content;try{if(0!==n)throw new br({code:n,message:zc({key:ga,data:{errMsg:r}})});this.log_.debug("accept remote answer: "+i),await this.peerConnection_.setRemoteDescription({type:t,sdp:i}),this.updateSSRC(i)}catch(a){throw this.log_.error(a),a}}updateSSRC(e){try{rl(e).media.forEach(e=>{if(e.type===xi){const t=e.ssrcs.find(e=>e.value.includes(Vt));t&&(this.ssrc_.audio=t.id)}else{const t=e.ssrcs.find(e=>e.value.includes(Vt)),i=e.ssrcs.find(e=>e.value.includes(jt));t&&(this.ssrc_.video=t.id),i&&(this.ssrc_.auxiliary=i.id)}})}catch(n){}}sendNextSubscription(){void 0!==this.pendingSubscription_.shift()&&(this.subscriptionRetryCount_=0,this.isSubscriptionPending_=!1,-1!==this.subscriptionTimeout_&&(clearTimeout(this.subscriptionTimeout_),this.subscriptionTimeout_=-1));const e=this.pendingStreams_.shift();if(e&&(this.log_.debug(`mark ${e.getType()} stream exit subscription cycle`),e.setInSubscriptionCycle(!1)),this.pendingSubscription_.length>0){const e=this.pendingSubscription_[0];this.log_.info("schedule a pending subscription"),this.doSendSubscription(e.data,e.stream,e.type)}}setRemoteStream(e,t){this.remoteStreams_.set(e,t)}getSubscribeState(){return this.subscribeState_}getTrackState(){return this.trackState_}getSSRC(){return this.ssrc_}getMainStream(){return this.remoteStreams_.get(Vt)}getAuxStream(){return this.remoteStreams_.get(jt)}getMainStreamVideoTrackId(){const e=this.getMainStream();if(e){const t=e.getVideoTrack();if(t)return t.id}return""}getAuxStreamVideoTrackId(){const e=this.getAuxStream();if(e){const t=e.getVideoTrack();if(t)return t.id}return""}async reconnect(){if(-1!==this.reconnectionTimer_)return void this.log_.warn("reconnect() downlink is reconnecting, ignore current reconnection");if(this.reconnectionCount_>=30){this.log_.warn(`SDK has tried reconnect downlink [${this.userId_}] for 30 times, but all failed, please check your network`),this.stopReconnection();const e=new br({code:Cr.DOWNLINK_RECONNECTION_FAILED,message:zc({key:fa})});return Tr.logFailedEvent({userId:this.client_.getUserId(),eventType:pi,error:e}),this.addEventInternal(Ks,"downlink-connection reconnect fail"),this.emitConnectionStateChangedEvent(Ht),void this.emitter_.emit(Ml,e)}if(this.signalChannel_.getCurrentState()!==qo)return this.log_.warn("reconnect() signal channel is not connected, suspend reconnection until signal is connected"),void this.signalChannel_.once(jo,this.reconnect,this);this.reconnectionCount_++,this.log_.warn(`reconnect() try to reconnect downlink [${this.reconnectionCount_}/30]`);const e=Nr(this.reconnectionCount_);if(this.reconnectionTimer_=setTimeout(()=>{this.log_.warn(`reconnect() downlink [${this.userId_}] reconnect timeout(${e/1e3}s), try again`),this.clearReconnectionTimer(),this.reconnect()},e),!(this.isSDPExchanging_||this.peerConnection_&&this.peerConnection_.connectionState===zt))try{this.closePeerConnection(),this.sentSubscriptionAfterConnected_=!1,this.initialize(),await this.connect(),this.stopReconnection(),this.log_.warn("reconnect() downlink reconnect successfully"),Tr.logSuccessEvent({userId:this.client_.getUserId(),eventType:pi}),this.addEventInternal(Ys,"downlink-connection reconnect success"),this.recoverSubscription()}catch(n){}}recoverSubscription(){const e=this.client_.getSubscriptionManager();e&&[...this.remoteStreams_.values()].forEach(t=>{e.hasAutoRecoveryFlag(this.userId_,t.getType())&&e.recover(t)})}getIsReconnecting(){return this.isReconnecting_}getSubscribedMainStream(){let e=null;return this.isMainStreamSubscribed&&(e=this.remoteStreams_.get(Vt)),e}clearReconnectionTimer(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}startReconnection(){const e=this.client_.getSubscriptionManager();if(e)for(let t of this.remoteStreams_.values()){const i=t.getType();("main"===i&&(this.trackState_.audio||this.trackState_.video)||"auxiliary"===i&&this.trackState_.auxiliary)&&e.setAutoRecoveryFlag(this.userId_,t.getType())}super.startReconnection()}getCurrentState(){return this.currentState_}}class xu{constructor(){this.startTime=0,this.endTime=0,this.start()}start(){0===this.startTime&&(this.startTime=Vr())}stop(){0===this.endTime&&(this.endTime=Vr())}getDuration(){return 0===this.endTime?Vr()-this.startTime:this.endTime-this.startTime}}class Bu{constructor(e){this.client_=e.client,this.intervalId_=-1,this.statsCalculator_=e.stats,this.prevStats_=null,this.renderFreezeMap_=new Map,this.remoteStreamMap_=new Map,this.dataFreezeMap_=new Map,this.monitorFreezeData_=new Map}installEvents(){Wr.on(Ro,this.handlePlayVideoStart,this),Wr.on(Co,this.onVideoTrackMuted,this),Wr.on(bo,this.onVideoTrackUnmuted,this),Wr.on(vo,this.handleStreamStopped,this),Wr.on(mo,this.handleStreamStopped,this),Wr.on(lo,this.handleVideoPlaying,this)}uninstallEvents(){Wr.off(Ro,this.handlePlayVideoStart,this),Wr.off(Co,this.onVideoTrackMuted,this),Wr.off(bo,this.onVideoTrackUnmuted,this),Wr.off(vo,this.handleStreamStopped,this),Wr.off(mo,this.handleStreamStopped,this),Wr.off(lo,this.handleVideoPlaying,this)}start(){-1===this.intervalId_&&(this.installEvents(),this.intervalId_=al.setInterval(async()=>{try{await this.detectFPS()}catch(i){}},1e3))}stop(){-1!==this.intervalId_&&(this.uninstallEvents(),al.clearInterval(this.intervalId_),this.intervalId_=-1,this.renderFreezeMap_.clear(),this.dataFreezeMap_.clear(),this.remoteStreamMap_.clear())}onVideoTrackMuted({stream:e}){if(e.getClient()!==this.client_||!e.isRemote())return;const t=e.userId_,i=e.type_,n=`${t}_${i}`,r=this.dataFreezeMap_.get(n),o=new xu;r?r.durationItemList.push(o):this.dataFreezeMap_.set(n,{userId:t,type:i,durationItemList:[o],isFreezing:function(){const e=this.durationItemList[this.durationItemList.length-1];return e&&0===e.endTime}})}onVideoTrackUnmuted({stream:e}){if(e.getClient()!==this.client_||!e.isRemote())return;const t=e.userId_,i=e.type_,n=`${t}_${i}`;this.stopDataFreeze({key:n,userId:t,type:i})}handleStreamStopped({client:e,stream:t}){if(e!==this.client_)return;const i=t.getUserId(),n=t.getType(),r=`${i}_${n}`;this.stopDataFreeze({key:r,userId:i,type:n})}stopDataFreeze({key:e,userId:t,type:i}){const n=this.dataFreezeMap_.get(e);if(!n||!n.isFreezing())return;const r=n.durationItemList[n.durationItemList.length-1];r.stop();const o=r.getDuration();o>500?(Tr.logEvent({eventType:"videoFrozenCount",delta:o}),this.monitorFreezeData_.set(e,{userId:t,type:i,duration:o})):n.durationItemList.pop()}getTotalDuration(e){return e.reduce((e,t)=>{const i=t.getDuration();return e+Math.min(i,5e3)},0)}async getStats(){const e=this.client_.getConnections(),t={};for(let[i,n]of e){if(!n.getPeerConnection())continue;const e=n.getSubscribeState(),r=n.getTrackState(),o=await this.statsCalculator_.getReceiverStats(n),s={userId:o.userId,tinyId:i,hasVideo:r.video&&e.video,hasAuxiliary:r.auxiliary&&e.auxiliary,video:{framesDecoded:0},auxiliary:{framesDecoded:0}};s.hasVideo&&(s.video.framesDecoded=o.video.framesDecoded),s.hasAuxiliary&&(s.auxiliary.framesDecoded=o.auxiliary.framesDecoded),t[o.userId]=s}return t}async detectFPS(){const e=await this.getStats();if(this.prevStats_){for(let t in e){if(!this.prevStats_[t])continue;const i=e[t].tinyId,n=this.client_.getMutedStates();if(e[t].hasVideo&&this.prevStats_[t].hasVideo&&n.has(i)&&!n.get(i).videoMuted){const i=e[t].video.framesDecoded-this.prevStats_[t].video.framesDecoded;this.handleRenderFreeze({userId:t,type:"main",fps:i})}if(e[t].hasAuxiliary&&this.prevStats_[t].hasAuxiliary){const i=e[t].auxiliary.framesDecoded-this.prevStats_[t].auxiliary.framesDecoded;this.handleRenderFreeze({userId:t,type:"auxiliary",fps:i})}}this.prevStats_=e}else this.prevStats_=e}async handleRenderFreeze({userId:e,fps:t,type:i}){const n=`${e}_${i}`;let r=this.renderFreezeMap_.get(n);if(t<=2){const t=Vr();r&&!r.isFreeze&&(r.freezeTimeline.push({startTime:t,endTime:void 0}),r.isFreeze=!0),r||this.renderFreezeMap_.set(n,{userId:e,type:i,isFreeze:!0,freezeTimeline:[{startTime:t,endTime:void 0}],renderFreezeTotal:0})}else if(r&&r.isFreeze){r.isFreeze=!1;const e=r.freezeTimeline.pop();e.endTime=Vr();const t=e.endTime-e.startTime;r.freezeTimeline.push(e),r.renderFreezeTotal+=Math.min(5e3,t)}}handlePlayVideoStart({stream:e}){if(e.getClient()!==this.client_||!e.isRemote()||!e.hasVideo())return;const t=`${e.getUserId()}_${e.getType()}`;this.remoteStreamMap_.has(t)?this.remoteStreamMap_.get(t).remoteStream=e:this.remoteStreamMap_.set(t,{isPlayingFired:!1,remoteStream:e})}handleVideoPlaying({stream:e}){if(!e.isRemote()||e.getClient()!==this.client_)return;const t=`${e.getUserId()}_${e.getType()}`;this.remoteStreamMap_.has(t)&&(this.remoteStreamMap_.get(t).isPlayingFired=!0)}getDataFreezeDuration(e){const t={dataFreeze:0,count:0},i=this.dataFreezeMap_.get(e);if(i){if(i.isFreezing()){const e=i.durationItemList[i.durationItemList.length-1];e.stop(),e.getDuration()<500&&i.durationItemList.pop()}t.dataFreeze=this.getTotalDuration(i.durationItemList),t.count=i.durationItemList.length}return t}getRenderFreezeDuration(e){const t=this.renderFreezeMap_.get(e);let i=0,n=0;if(t)if(t.isFreeze){const e=Vr()-t.freezeTimeline[t.freezeTimeline.length-1].startTime;i=t.renderFreezeTotal+Math.min(e,5e3),n=t.freezeTimeline.length}else i=t.renderFreezeTotal;return{renderFreeze:i,count:n}}getMonitorFreeze(){return this.monitorFreezeData_}isBlackStream(e){return!!this.remoteStreamMap_.has(e)&&!this.remoteStreamMap_.get(e).isPlayingFired}resetMonitor(){this.monitorFreezeData_.clear()}}class Uu{constructor(e){this.userId=e.userId,this.tinyId=e.tinyId,this.role=e.role===Ut?"anchor":"audience"}}var Fu=R((function(e){!function(t){function i(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function n(e,t,n,r,o,s){return i((a=i(i(t,e),i(r,s)))<<(c=o)|a>>>32-c,n);var a,c}function r(e,t,i,r,o,s,a){return n(t&i|~t&r,e,t,o,s,a)}function o(e,t,i,r,o,s,a){return n(t&r|i&~r,e,t,o,s,a)}function s(e,t,i,r,o,s,a){return n(t^i^r,e,t,o,s,a)}function a(e,t,i,r,o,s,a){return n(i^(t|~r),e,t,o,s,a)}function c(e,t){var n,c,l,u,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var h=1732584193,p=-271733879,f=-1732584194,g=271733878;for(n=0;n<e.length;n+=16)c=h,l=p,u=f,d=g,h=r(h,p,f,g,e[n],7,-680876936),g=r(g,h,p,f,e[n+1],12,-389564586),f=r(f,g,h,p,e[n+2],17,606105819),p=r(p,f,g,h,e[n+3],22,-1044525330),h=r(h,p,f,g,e[n+4],7,-176418897),g=r(g,h,p,f,e[n+5],12,1200080426),f=r(f,g,h,p,e[n+6],17,-1473231341),p=r(p,f,g,h,e[n+7],22,-45705983),h=r(h,p,f,g,e[n+8],7,1770035416),g=r(g,h,p,f,e[n+9],12,-1958414417),f=r(f,g,h,p,e[n+10],17,-42063),p=r(p,f,g,h,e[n+11],22,-1990404162),h=r(h,p,f,g,e[n+12],7,1804603682),g=r(g,h,p,f,e[n+13],12,-40341101),f=r(f,g,h,p,e[n+14],17,-1502002290),h=o(h,p=r(p,f,g,h,e[n+15],22,1236535329),f,g,e[n+1],5,-165796510),g=o(g,h,p,f,e[n+6],9,-1069501632),f=o(f,g,h,p,e[n+11],14,643717713),p=o(p,f,g,h,e[n],20,-373897302),h=o(h,p,f,g,e[n+5],5,-701558691),g=o(g,h,p,f,e[n+10],9,38016083),f=o(f,g,h,p,e[n+15],14,-660478335),p=o(p,f,g,h,e[n+4],20,-405537848),h=o(h,p,f,g,e[n+9],5,568446438),g=o(g,h,p,f,e[n+14],9,-1019803690),f=o(f,g,h,p,e[n+3],14,-187363961),p=o(p,f,g,h,e[n+8],20,1163531501),h=o(h,p,f,g,e[n+13],5,-1444681467),g=o(g,h,p,f,e[n+2],9,-51403784),f=o(f,g,h,p,e[n+7],14,1735328473),h=s(h,p=o(p,f,g,h,e[n+12],20,-1926607734),f,g,e[n+5],4,-378558),g=s(g,h,p,f,e[n+8],11,-2022574463),f=s(f,g,h,p,e[n+11],16,1839030562),p=s(p,f,g,h,e[n+14],23,-35309556),h=s(h,p,f,g,e[n+1],4,-1530992060),g=s(g,h,p,f,e[n+4],11,1272893353),f=s(f,g,h,p,e[n+7],16,-155497632),p=s(p,f,g,h,e[n+10],23,-1094730640),h=s(h,p,f,g,e[n+13],4,681279174),g=s(g,h,p,f,e[n],11,-358537222),f=s(f,g,h,p,e[n+3],16,-722521979),p=s(p,f,g,h,e[n+6],23,76029189),h=s(h,p,f,g,e[n+9],4,-640364487),g=s(g,h,p,f,e[n+12],11,-421815835),f=s(f,g,h,p,e[n+15],16,530742520),h=a(h,p=s(p,f,g,h,e[n+2],23,-995338651),f,g,e[n],6,-198630844),g=a(g,h,p,f,e[n+7],10,1126891415),f=a(f,g,h,p,e[n+14],15,-1416354905),p=a(p,f,g,h,e[n+5],21,-57434055),h=a(h,p,f,g,e[n+12],6,1700485571),g=a(g,h,p,f,e[n+3],10,-1894986606),f=a(f,g,h,p,e[n+10],15,-1051523),p=a(p,f,g,h,e[n+1],21,-2054922799),h=a(h,p,f,g,e[n+8],6,1873313359),g=a(g,h,p,f,e[n+15],10,-30611744),f=a(f,g,h,p,e[n+6],15,-1560198380),p=a(p,f,g,h,e[n+13],21,1309151649),h=a(h,p,f,g,e[n+4],6,-145523070),g=a(g,h,p,f,e[n+11],10,-1120210379),f=a(f,g,h,p,e[n+2],15,718787259),p=a(p,f,g,h,e[n+9],21,-343485551),h=i(h,c),p=i(p,l),f=i(f,u),g=i(g,d);return[h,p,f,g]}function l(e){var t,i="",n=32*e.length;for(t=0;t<n;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function u(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function d(e){var t,i,n="";for(i=0;i<e.length;i+=1)t=e.charCodeAt(i),n+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return n}function h(e){return unescape(encodeURIComponent(e))}function p(e){return function(e){return l(c(u(e),8*e.length))}(h(e))}function f(e,t){return function(e,t){var i,n,r=u(e),o=[],s=[];for(o[15]=s[15]=void 0,r.length>16&&(r=c(r,8*e.length)),i=0;i<16;i+=1)o[i]=909522486^r[i],s[i]=1549556828^r[i];return n=c(o.concat(u(t)),512+8*t.length),l(c(s.concat(n),640))}(h(e),h(t))}function g(e,t,i){return t?i?f(t,e):d(f(t,e)):i?p(e):d(p(e))}e.exports?e.exports=g:t.md5=g}(I)}));class Vu{constructor(e){this.client_=e.client,this.signalChannel_=e.signalChannel,this.log_=Uo.createLogger({id:"mix|"+this.client_.getUserId(),userId:e.client.getUserId(),sdkAppId:e.client.getSDKAppId()}),this.isMixing_=!1,this.config_=null,this.data_=null,this.remoteStreamMap_=new Map,this.installEvents()}get isPresetLayoutMode(){return this.config_&&this.config_.mode===Ri.PRESET_LAYOUT}installEvents(){Wr.on(go,this.onStreamSubscribed,this),Wr.on(mo,this.onStreamUnsubscribed,this),this.client_.on("stream-removed",this.onStreamRemoved,this)}uninstallEvents(){Wr.off(go,this.onStreamSubscribed,this),Wr.off(mo,this.onStreamUnsubscribed,this),this.client_.off("stream-removed",this.onStreamRemoved,this)}stop(){this.uninstallEvents()}onStreamSubscribed({client:e,stream:t}){e===this.client_&&(this.remoteStreamMap_.set(t.getId(),{remoteStream:t,isUsed:!1}),this.isMixing_&&this.hasAvailablePlaceHolder()&&this.startMixTranscode(this.config_))}onStreamUnsubscribed({client:e,stream:t}){e===this.client_&&this.onStreamRemoved({stream:t})}onStreamRemoved({stream:e}){if(this.remoteStreamMap_.has(e.getId())){const{isUsed:t}=this.remoteStreamMap_.get(e.getId());this.remoteStreamMap_.delete(e.getId()),this.isMixing_&&this.isPresetLayoutMode&&t&&this.startMixTranscode(this.config_)}}async startMixTranscode(e){try{this.resetIsUsedFlag(),this.config_=e;const t=this.getInputParam(e,this.remoteStreamMap_),i=this.getOutputParam(e),n=this.getOutputSessionId({config:e,roomId:this.client_.getRoomId(),userId:this.client_.getUserId()});this.isMixing_&&this.data_&&n!==this.data_.outputSessionId&&(this.log_.info("startMixTranscode() streamId changed, stop mixing before start"),await this.doStopMixTranscode()),await this.doStartMixTranscode({outputSessionId:n,inputParam:t,outputParam:i})}catch(n){throw this.resetIsUsedFlag(),n}}async doStartMixTranscode({outputSessionId:e,inputParam:t,outputParam:i}){const n={roomid:String(this.client_.getRoomId()),sdkAppID:String(this.client_.getSDKAppId()),socketid:this.signalChannel_.getSocketId(),mcuRequestTime:Date.now(),outputSessionId:e,inputParam:t,outputParam:i};this.data_=n,this.log_.info("startMixTranscode: "+JSON.stringify(n)),this.isMixing_=!0;try{const e=await this.signalChannel_.sendWaitForResponse({command:ps,data:n,timeout:5e3,responseCommand:Zo.START_MIX_TRANSCODE_RES,commandDesc:"startMixTranscode"});let{errCode:t,errMsg:i}=e.data.content;if(0!==t)throw-102083===t&&(i=`Please enable relayed-push in https://console.cloud.tencent.com/trtc and try later, refer to ${dn}tutorial-26-advanced-publish-cdn-stream.html`),this.log_.error(`startMixTranscode failed, errCode: ${t} errMsg: ${i}`),this.isMixing_=!1,new br({code:Cr.START_MIX_TRANSCODE_FAILED,message:zc({key:yc,data:{message:i},link:{className:"Client",fnName:"startMixTranscode"}})})}catch(s){throw this.isMixing_=!1,s}}async stopMixTranscode(){if(!this.isMixing_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Cc})});await this.doStopMixTranscode(),this.resetIsUsedFlag()}async doStopMixTranscode(){const e={roomid:String(this.client_.getRoomId()),sdkAppID:String(this.client_.getSDKAppId()),socketid:this.signalChannel_.getSocketId(),userid:this.client_.getUserId(),mcuRequestTime:Date.now(),outPutSessionId:this.data_.outputSessionId,streamType:this.data_.outputParam.streamType};this.log_.info("stopMixTranscode: "+JSON.stringify(e));const t=await this.signalChannel_.sendWaitForResponse({command:fs,data:e,timeout:5e3,responseCommand:Zo.STOP_MIX_TRANSCODE_RES,commandDesc:"stopMixTranscode"}),{errCode:i,errMsg:n}=t.data.content;if(0!==i)throw this.log_.error(`stopMixTranscode failed, errCode: ${i} errMsg: ${n}`),new br({code:Cr.STOP_MIX_TRANSCODE_FAILED,message:zc({key:Sc,data:{message:n},link:{className:"Client",fnName:"stopMixTranscode"}})});this.isMixing_=!1}getOutputSessionId({config:e,userId:t,roomId:i}){return Dr(e.streamId)&&e.streamId.length>0?e.streamId:Fu(`${i}_${t}_main`)}getInputParam(e,t){let i=e.mixUsers.map(e=>({userid:e.userId,roomid:String(e.roomId||this.client_.getRoomId()),width:e.width||0,height:e.height||0,locationX:e.locationX||0,locationY:e.locationY||0,zOrder:e.zOrder,streamType:Pr(e.streamType)||"auxiliary"!==e.streamType?0:1,inputType:e.pureAudio?Oi.IT_PURE_AUDIO:Oi.IT_AUDIO_VIDEO}));return e.mode===Ri.PRESET_LAYOUT&&(i.forEach(e=>{if(e.userid===wi.REMOTE){const i=[...t.values()].find(({isUsed:e})=>!e);i&&(e.userid=i.remoteStream.getUserId(),e.streamType="auxiliary"===i.remoteStream.getType()?1:0,i.isUsed=!0)}}),i=i.filter(e=>e.userid!==wi.REMOTE)),i}getOutputParam(e){const t=e.streamId||"";return{streamId:t,streamType:t.length>0?1:0,videoWidth:Pr(e.videoWidth)?640:e.videoWidth,videoHeight:Pr(e.videoHeight)?480:e.videoHeight,videoBitrate:e.videoBitrate||0,videoFramerate:e.videoFramerate||15,videoGOP:e.videoGOP||2,audioSampleRate:e.audioSampleRate||48e3,audioBitrate:e.audioBitrate||64,audioChannels:e.audioChannels||1,backgroundColor:e.backgroundColor||0,backgroundImage:e.backgroundImage||"",extraInfo:"",VCodec:2,ACodec:0}}hasAvailablePlaceHolder(){return!!this.isPresetLayoutMode&&this.data_.inputParam.length!==this.config_.mixUsers.length}resetIsUsedFlag(){this.remoteStreamMap_.forEach(e=>e.isUsed=!1)}}class ju{constructor(e){this.client_=e.client,this.signalChannel_=e.signalChannel,this.isPublishingTencentCDN_=!1,this.publishTencentStreamRetryCount_=0,this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1}getIsPublishingTencentCDN(){return this.isPublishingTencentCDN_}getIsPublishingGivenCDN(){return this.isPublishingGivenCDN_}async startPublishTencentCDN(e){let t=e.streamId;if(!t){let e=`${this.client_.getRoomId()}_${this.client_.getUserId()}_main`;/^[A-Za-z\d_-]*$/.test(e)||(e=Fu(e)),t=`${this.client_.getSDKAppId()}_${e}`}const i={roomid:String(this.client_.getRoomId()),sdkAppID:String(this.client_.getSDKAppId()),requestTime:Date.now(),sessionId:Fu(`${this.client_.getRoomId()}_${this.client_.getUserId()}_main`),streamId:t,streamType:0};this.isPublishingTencentCDN_=!0,this.publishTencentStreamRetryCount_=0,await this.doStartPublishTencentCDN(i)}async doStartPublishTencentCDN(e){try{Uo.info("startPublishTencentCDN: "+JSON.stringify(e));const t=await this.signalChannel_.sendWaitForResponse({command:ls,data:e,timeout:2e3,responseCommand:Zo.START_PUBLISH_TENCENT_CDN_RES,commandDesc:"startPublishCDNStream",retry:2});let{errCode:i,errMsg:n}=t.data.content;if(0!==i)throw this.isPublishingTencentCDN_=!1,-102083===i&&(n=`Please enable relayed-push in https://console.cloud.tencent.com/trtc and try later, refer to ${dn}tutorial-26-advanced-publish-cdn-stream.html`),Uo.error(`startPublishTencentCDN failed, errCode: ${i}, errMsg: ${n}`),new br({code:Cr.START_PUBLISH_CDN_FAILED,message:zc({key:za,data:{message:n},link:{className:"Client",fnName:"startPublishCDNStream"}})})}catch(n){throw this.isPublishingTencentCDN_=!1,n}}async stopPublishTencentCDN(){const e={roomid:String(this.client_.getRoomId()),sdkAppID:String(this.client_.getSDKAppId()),requestTime:Date.now(),sessionId:Fu(`${this.client_.getRoomId()}_${this.client_.getUserId()}_main`)};Uo.info("stopPublishTencentCDN: "+JSON.stringify(e));const t=await this.signalChannel_.sendWaitForResponse({command:us,data:e,timeout:5e3,responseCommand:Zo.STOP_PUBLISH_TENCENT_CDN_RES,commandDesc:"stopPublishCDNStream"});let{errCode:i,errMsg:n}=t.data.content;if(0===i)this.isPublishingTencentCDN_=!1;else{if(-102069!==i)throw Uo.error(`stopPublishTencentCDN failed, errCode: ${i} errMsg: ${n}`),new br({code:Cr.STOP_PUBLISH_CDN_FAILED,message:zc({key:Za,data:{message:n},link:{className:"Client",fnName:"stopPublishCDNStream"}})});Uo.warn("stopPublishTencentCDN failed, can not stopPublishTencentCDN in auto relayed-push mode"),this.isPublishingTencentCDN_=!1}}async startPublishGivenCDN(e){const t={roomid:String(this.client_.getRoomId()),sdkAppID:String(this.client_.getSDKAppId()),socketid:this.signalChannel_.getSocketId(),pushRequestTime:Date.now(),pushAppid:e.appId,pushBizId:e.bizId,pushCdnUrl:e.url,pushStreamType:"main"};Uo.info("startPublishGivenCDN: "+JSON.stringify(t)),this.publishGivenCDNData_=t,this.isPublishingGivenCDN_=!0;try{const e=await this.signalChannel_.sendWaitForResponse({command:ds,data:t,timeout:5e3,responseCommand:Zo.START_PUBLISH_GIVEN_CDN_RES,commandDesc:"startPublishCDNStream"});let{errCode:i,errMsg:n}=e.data.content;if(0!==i)throw Uo.error(`startPublishGivenCDN failed, errCode: ${i}, errMsg: ${n}`),this.isPublishingGivenCDN_=!1,new br({code:Cr.START_PUBLISH_CDN_FAILED,message:zc({key:za,data:{message:n},link:{className:"Client",fnName:"startPublishCDNStream"}})})}catch(r){throw this.isPublishingGivenCDN_=!1,r}}async stopPublishGivenCDN(){let{pushAppid:e,pushBizId:t,pushCdnUrl:i,pushStreamType:n}=this.publishGivenCDNData_;const r={roomid:String(this.client_.getRoomId()),sdkAppID:String(this.client_.getSDKAppId()),socketid:this.signalChannel_.getSocketId(),pushRequestTime:Date.now(),pushAppid:e,pushBizId:t,pushCdnUrl:i,pushStreamType:n};Uo.info("stopPublishGivenCDN: "+JSON.stringify(r));const o=await this.signalChannel_.sendWaitForResponse({command:hs,data:r,timeout:5e3,responseCommand:Zo.STOP_PUBLISH_GIVEN_CDN_RES,commandDesc:"stopPublishCDNStream"});let{errCode:s,errMsg:a}=o.data.content;if(0!==s)throw Uo.error(`stopPublishGivenCDN failed, errCode: ${s} errMsg: ${a}`),new br({code:Cr.STOP_PUBLISH_CDN_FAILED,message:zc({key:Za,data:{message:a},link:{className:"Client",fnName:"stopPublishCDNStream"}})});this.isPublishingGivenCDN_=!1}}class Gu{constructor(e){this.client_=e.client,this.durationMap_=new Map,this.installEvents()}installEvents(){Wr.on(go,this.handleSubscribed,this),Wr.on(ho,this.handleStreamTrackUpdated,this),Wr.on(mo,this.handleStreamStopped,this),Wr.on(vo,this.handleStreamStopped,this)}uninstallEvents(){Wr.off(go,this.handleSubscribed,this),Wr.off(_o,this.handleStreamTrackUpdated,this),Wr.off(mo,this.handleStreamStopped,this),Wr.off(vo,this.handleStreamStopped,this)}handleSubscribed({client:e,stream:t}){if(e!==this.client_)return;const i=t.getUserId(),n=t.getType(),r=`${i}_${n}`;if(t.hasAudio())if(t.isMainAudioSubscribed){const e=new xu,t=this.durationMap_.get(r);t?this.isRecording(t.audio)||t.audio.push(e):this.durationMap_.set(r,{userId:i,type:n,audio:[e],video:[]})}else this.stopDurationItem(r,xi);if(t.hasVideo())if("main"===n&&t.isMainVideoSubscribed||"auxiliary"===n&&t.isAuxVideoSubscribed){const e=new xu,t=this.durationMap_.get(r);t?this.isRecording(t.video)||t.video.push(e):this.durationMap_.set(r,{userId:i,type:n,audio:[],video:[e]})}else this.stopDurationItem(r,Bi)}handleStreamStopped({client:e,stream:t}){if(!this.clientHitTest(e))return;const i=`${t.getUserId()}_${t.getType()}`;this.stopDurationItem(i,xi),this.stopDurationItem(i,Bi)}handleStreamTrackUpdated({client:e,userId:t,tinyId:i,kind:n,action:r}){if(!this.clientHitTest(e)||!this.client_.getConnections().has(i))return;const o=n===Ui?n:"main",s=`${t}_${o}`;if(r===Ji){const e=this.client_.getConnections().get(i).getSubscribeState();if(n===xi&&!e.audio||n===Bi&&!e.video||n===Ui&&!e.auxiliary)return;const r=new xu,a=this.durationMap_.get(s);a?(n!==xi||this.isRecording(a.audio)||a.audio.push(r),n===xi||this.isRecording(a.video)||a.video.push(r)):this.durationMap_.set(s,{userId:t,type:o,audio:n===xi?[r]:[],video:n===xi?[]:[r]})}else this.stopDurationItem(s,n===xi?xi:Bi)}isRecording(e){return e.findIndex(e=>0===e.endTime)>=0}stopDurationItem(e,t){if(this.durationMap_.has(e)){const i=this.durationMap_.get(e)[t].find(e=>0===e.endTime);i&&i.stop()}}clientHitTest(e){return this.client_===e}getDuration(e,t){return this.durationMap_.has(e)?this.durationMap_.get(e)[t].reduce((e,t)=>e+t.getDuration(),0):0}getDurationMap(){return this.durationMap_}reset(){this.durationMap_.clear()}}const Hu={unknown:0,wifi:1,"4g":2,"3g":3,"2g":4,wired:5},Qu={msg_user_info:0,uint32_video_avg_fps:0,uint32_video_width:0,uint32_video_height:0,uint32_video_avg_bitrate:0,uint32_video_block_time:0,uint32_video_play_time:0,uint32_audio_block_time:0,uint32_audio_play_time:0,uint32_audio_play_db:0,uint32_avg_down_loss:0,uint32_stream_type:0,uint32_video_render_first:0,uint32_video_block_count:0,uint32_audio_block_count:0,uint32_audio_bitrate:0,uint32_video_black_screen_subjective:0,uint32_audio_recv_bitrate:0,uint32_video_external_block_time:0};class Wu{constructor(e){this.str_identifier=String(e.userId),this.uint64_tinyid=Number(e.tinyId),this.uint32_role=e.role}}class qu{constructor(e){this.frameWorkType_=e.frameWorkType||30,this.client_=e.client,this.keyPrefix_="key_point",this.storageKey_=`${this.keyPrefix_}_${this.client_.getUserId()}`,this.log_=Uo.createLogger({id:"kpm|"+this.client_.getUserId(),userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId()}),this.upload=Mo({retryFunction:this.upload,settings:{timeout:500,retries:3},onError:(e,t)=>t()}),Object.getOwnPropertyNames(this.__proto__).forEach(e=>{e.startsWith("handle")&&Lr(this[e])&&(this[e]=function({fn:e,context:t}){return async function(...i){try{return await e.apply(t||this,i)}catch(o){Uo.error(e.name+"() error observed "+o)}}}({fn:this[e],context:this}))}),this.initData(),this.installEvents(),this.intervalId_=al.setInterval(this.setStorage.bind(this),2e4)}initData(){this.firstPublishedUserList_=[],this.networkQuality_={totalUplinkRTT:0,totalUplinkLoss:0,count:0,totalDownlinkRTTAndLossMap:new Map},this.basicInfo={string_sdk_version:"4.11.12",uint32_os_type:15,string_device_name:"",string_http_user_agent:navigator.userAgent,string_os_version:"",uint32_avg_rtt:0,uint32_avg_up_loss:0,uint32_scene:"live"===this.client_.getMode()?1:0,uint32_joining_duration:0,uint32_networkType:Hu[Or()],uint32_framework:this.frameWorkType_},this.pathJoinRoom_={uint64_start_time:0,uint64_init_audio_start_time:0,uint64_init_audio_end_time:0,uint64_init_camera_start_time:0,uint64_init_camera_end_time:0,uint64_send_request_acc_ip_cmd_start_time:0,uint64_send_request_acc_ip_cmd_end_time:0,uint64_send_request_enter_room_cmd_start_time:0,uint64_send_request_enter_room_cmd_end_time:0,uint64_send_first_video_frame_time:0,uint64_recv_userlist_time:0,uint64_end_time:0,int32_init_audio_ret:0,int32_init_camera_ret:0,int32_send_request_acc_ip_cmd_ret:0,int32_send_request_enter_room_cmd_ret:0,int32_end_ret:0},this.pathLeaveRoom_={uint64_start_time:0,uint64_send_request_exit_room_cmd_start_time:0,uint64_send_request_exit_room_cmd_end_time:0,uint64_end_time:0,int32_send_request_exit_room_cmd_ret:0,int32_end_ret:0},this.pathMainVideoMap_=new Map,this.pathMainAudioMap_=new Map,this.pathAuxiliaryMap_=new Map,this.localStreamStats_={totalVideoBitrate:0,totalVideoFPS:0,totalVideoHeight:0,totalVideoWidth:0,totalAudioLevel:0,videoCount:0,audioLevelCount:0,publishStartTime:0,statsToReport:{uint32_audio_capture_db:0,uint32_video_big_capture_fps:0,uint32_video_big_bitrate:0,uint32_video_big_resolution:0}},this.remoteStreamStatsMap_=new Map}installEvents(){Wr.on(qr,this.handleJoinStart,this),Wr.on(no,this.handleWSStart,this),Wr.on(ro,this.handleWSEnd,this),Wr.on($r,this.handleJoinSendCMD,this),Wr.on(zr,this.handleJoinReceivedCMDResponce,this),Wr.on(Zr,this.handleJoinSuccess,this),Wr.on(Yr,this.handleJoinFailed,this),Wr.on(to,this.handleReceivedPublishUserList,this),Wr.on(No,this.handleConnectionStateChanged,this),Wr.on(Kr,this.handleLeaveStart,this),Wr.on(Xr,this.handleLeaveSuccess,this),Wr.on(Jr,this.handleLeaveSendCMD,this),Wr.on(Lo,this.handleSendSubscribeCMD,this),Wr.on(lo,this.handleVideoPlaying,this),Wr.on(uo,this.handleAudioPlaying,this),Wr.on(Po,this.handleNetworkQuality,this),Wr.on(eo,this.handleHeartbeatStats,this),Wr.on(po,this.handleRemoteStreamAdded,this),Wr.on(fo,this.handleRemoteStreamSubscribeStart,this),Wr.on(go,this.handleRemoteStreamSubscribed,this),Wr.on(Io,this.handleVideoLoadedData,this),Wr.on(To,this.handlePlayStream,this),Wr.on(io,this.handlePublishStart,this),Wr.on(Ao,this.handleLocalStreamInitStart,this),Wr.on(yo,this.handleLocalStreamInitEnd,this),Wr.on(So,this.handleLocalStreamInitFailed,this)}uninstallEvents(){Wr.off(qr,this.handleJoinStart,this),Wr.off(no,this.handleWSStart,this),Wr.off(ro,this.handleWSEnd,this),Wr.off($r,this.handleJoinSendCMD,this),Wr.off(zr,this.handleJoinReceivedCMDResponce,this),Wr.off(to,this.handleReceivedPublishUserList,this),Wr.off(No,this.handleConnectionStateChanged,this),Wr.off(Kr,this.handleLeaveStart,this),Wr.off(Xr,this.handleLeaveSuccess,this),Wr.off(Zr,this.handleJoinSuccess,this),Wr.off(Yr,this.handleJoinFailed,this),Wr.off(Jr,this.handleLeaveSendCMD,this),Wr.off(Lo,this.handleSendSubscribeCMD,this),Wr.off(lo,this.handleVideoPlaying,this),Wr.off(uo,this.handleAudioPlaying,this),Wr.off(Po,this.handleNetworkQuality,this),Wr.off(eo,this.handleHeartbeatStats,this),Wr.off(po,this.handleRemoteStreamAdded,this),Wr.off(fo,this.handleRemoteStreamSubscribeStart,this),Wr.off(go,this.handleRemoteStreamSubscribed,this),Wr.off(Io,this.handleVideoLoadedData,this),Wr.off(To,this.handlePlayStream,this),Wr.off(io,this.handlePublishStart,this),Wr.off(Ao,this.handleLocalStreamInitStart,this),Wr.off(yo,this.handleLocalStreamInitEnd,this),Wr.off(So,this.handleLocalStreamInitFailed,this)}handleJoinStart(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_start_time&&(this.pathJoinRoom_.uint64_start_time=Date.now(),this.checkStorage())}handleWSStart({client:e}){this.hitTest(e)&&0===this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_start_time&&(this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_start_time=Date.now())}handleWSEnd({client:e,error:t}){this.hitTest(e)&&0===this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_end_time&&(this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_end_time=Date.now(),t&&(this.pathJoinRoom_.int32_send_request_acc_ip_cmd_ret=t instanceof br?Number(t.getExtraCode()||t.getCode()):Cr.UNKNOWN,this.pathJoinRoom_.int32_end_ret=2))}handleJoinSendCMD(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_send_request_enter_room_cmd_start_time&&(this.pathJoinRoom_.uint64_send_request_enter_room_cmd_start_time=Date.now())}handleJoinReceivedCMDResponce(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_send_request_enter_room_cmd_end_time&&(this.pathJoinRoom_.uint64_send_request_enter_room_cmd_end_time=Date.now(),this.pathJoinRoom_.int32_send_request_enter_room_cmd_ret=e.code,0!==e.code&&(this.pathJoinRoom_.int32_end_ret=3))}handleJoinSuccess(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_end_time&&(this.pathJoinRoom_.uint64_end_time=Date.now(),this.pathJoinRoom_.int32_end_ret=0)}handleJoinFailed({client:e}){this.hitTest(e)&&(this.pathJoinRoom_.uint64_end_time=Date.now(),0===this.pathJoinRoom_.int32_end_ret&&(this.pathJoinRoom_.int32_end_ret=3),this.prepareReport(),this.report())}handleReceivedPublishUserList(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_recv_userlist_time&&(this.pathJoinRoom_.uint64_recv_userlist_time=Date.now(),this.firstPublishedUserList_=e.data.content.userlist)}handleConnectionStateChanged({client:e,state:t,connection:i}){if(this.hitTest(e)&&t===qt){this.client_.getUplinkConnection()===i&&0===this.pathJoinRoom_.uint64_send_first_video_frame_time&&this.localStreamStats_.publishStartTime>this.pathJoinRoom_.uint64_end_time&&this.localStreamStats_.publishStartTime-this.pathJoinRoom_.uint64_end_time<=100&&(this.pathJoinRoom_.uint64_send_first_video_frame_time=Date.now());const e=this.pathMainVideoMap_.get(i.getUserId()+"_main");e&&0===e.statsToReport.uint64_pc_connected_time&&(e.statsToReport.uint64_pc_connected_time=Date.now())}}handleLeaveStart(e){this.hitTest(e.client)&&(this.pathLeaveRoom_.uint64_start_time=Date.now())}handleLeaveSuccess(e){this.hitTest(e.client)&&0===this.pathLeaveRoom_.uint64_end_time&&(this.pathLeaveRoom_.uint64_end_time=Date.now(),0!==this.pathJoinRoom_.uint64_end_time?this.basicInfo.uint32_joining_duration=this.pathLeaveRoom_.uint64_end_time-this.pathJoinRoom_.uint64_end_time:this.log_.warn("pathJoinRoom endTime is 0"),this.report())}handleLeaveSendCMD(e){this.hitTest(e.client)&&(this.pathLeaveRoom_.uint64_send_request_exit_room_cmd_start_time=Date.now(),this.pathLeaveRoom_.uint64_send_request_exit_room_cmd_end_time=Date.now())}handleRemoteStreamAdded({client:e,stream:t}){if(this.hitTest(e)){const e=t.getUserId(),i=t.getType(),n=`${e}_${i}`,r=this.remoteStreamStatsMap_.get(n);if(r)r.stream=t;else{const r={userId:e,totalVideoFPS:0,totalVideoBitrate:0,totalAudioLevel:0,totalAudioBitrate:0,totalLoss:0,audioCount:0,audioLevelCount:0,videoCount:0,networkQualityCount:0,streamAddedTime:Date.now(),subscribeStartTime:0,subscribedTime:0,playStreamTime:0,statsToReport:{...Qu},stream:t};r.statsToReport.msg_user_info=new Wu({userId:e,tinyId:t.getTinyId(),role:Ut}),r.statsToReport.uint32_stream_type="main"===i?2:7,this.remoteStreamStatsMap_.set(n,r)}}}handleRemoteStreamSubscribeStart({client:e,stream:t}){if(this.hitTest(e)){const e=`${t.getUserId()}_${t.getType()}`,i=this.remoteStreamStatsMap_.get(e);i&&0===i.subscribeStartTime&&(i.subscribeStartTime=Date.now())}}handleSendSubscribeCMD(e){if(this.hitTest(e.client)){const t=new Wu(e),i=Date.now(),n=e.userId+"_main";e.trackState.video&&e.subscribeState.video&&!this.pathMainVideoMap_.has(n)&&this.pathMainVideoMap_.set(n,{statsToReport:{msg_user_info:t,uint64_start_enter_time:this.pathJoinRoom_.uint64_start_time,uint64_render_first_frame_time:0,uint64_combine_first_frame_time:0,uint64_pc_connected_time:0},userId:e.userId,sendSubscribeCMDTime:i}),e.trackState.audio&&e.subscribeState.audio&&!this.pathMainAudioMap_.has(n)&&this.pathMainAudioMap_.set(n,{statsToReport:{msg_user_info:t,uint64_start_enter_time:this.pathJoinRoom_.uint64_start_time,uint64_play_first_frame_time:0},userId:e.userId,sendSubscribeCMDTime:i});const r=e.userId+"_auxiliary";e.trackState.auxiliary&&e.subscribeState.auxiliary&&!this.pathAuxiliaryMap_.has(r)&&this.pathAuxiliaryMap_.set(r,{sendSubscribeCMDTime:i})}}handleRemoteStreamSubscribed({client:e,stream:t}){if(this.hitTest(e)){const e=`${t.getUserId()}_${t.getType()}`,i=this.remoteStreamStatsMap_.get(e);i&&0===i.subscribedTime&&(i.subscribedTime=Date.now(),i.stream=t)}}handlePlayStream({stream:e}){if(!e.isRemote()||!e.getConnection()||!this.hitTest(e.getConnection().getClient()))return;const t=`${e.getConnection().getUserId()}_${e.getType()}`;if(this.remoteStreamStatsMap_.has(t)){const e=this.remoteStreamStatsMap_.get(t);0===e.playStreamTime&&(e.playStreamTime=Date.now())}}handleVideoLoadedData({stream:e}){if(!e.isRemote()||!e.getConnection()||!this.hitTest(e.getConnection().getClient()))return;const t=`${e.getConnection().getUserId()}_${e.getType()}`;if(this.pathMainVideoMap_.has(t)){const e=this.pathMainVideoMap_.get(t);0===e.statsToReport.uint64_combine_first_frame_time&&(e.statsToReport.uint64_combine_first_frame_time=Date.now())}}handleVideoPlaying({stream:e}){if(!e.isRemote()||!e.getConnection()||!this.hitTest(e.getConnection().getClient()))return;const t=`${e.getConnection().getUserId()}_${e.getType()}`,i=Date.now();if(this.pathMainVideoMap_.has(t)){const e=this.pathMainVideoMap_.get(t);if(0===e.statsToReport.uint64_render_first_frame_time&&(e.statsToReport.uint64_render_first_frame_time=i),this.remoteStreamStatsMap_.has(t)){const{statsToReport:n,playStreamTime:r,subscribedTime:o}=this.remoteStreamStatsMap_.get(t);0===n.uint32_video_render_first&&r-o<=100&&(n.uint32_video_render_first=i-e.sendSubscribeCMDTime)}}if("auxiliary"===e.getType()&&this.pathAuxiliaryMap_.has(t)&&this.remoteStreamStatsMap_.has(t)){const{statsToReport:e,playStreamTime:n,subscribedTime:r}=this.remoteStreamStatsMap_.get(t);0===e.uint32_video_render_first&&n-r<=100&&(e.uint32_video_render_first=i-this.pathAuxiliaryMap_.get(t).sendSubscribeCMDTime)}}handleAudioPlaying(e){if(!e.stream.isRemote()||!e.stream.getConnection()||!this.hitTest(e.stream.getConnection().getClient()))return;const t=`${e.stream.getConnection().getUserId()}_${e.stream.getType()}`;if(this.pathMainAudioMap_.has(t)){const e=this.pathMainAudioMap_.get(t);0===e.statsToReport.uint64_play_first_frame_time&&(e.statsToReport.uint64_play_first_frame_time=Date.now())}}handleNetworkQuality(e){this.hitTest(e.client)&&(this.networkQuality_.totalUplinkLoss+=e.uplinkLoss,this.networkQuality_.totalUplinkRTT+=e.uplinkRTT,this.networkQuality_.count++,e.downlinkLossAndRTTMap.forEach(({rtt:e,loss:t,userId:i})=>{const n=this.networkQuality_.totalDownlinkRTTAndLossMap.get(i);n?(n.totalRTT+=e,n.totalLoss+=t,n.count++):this.networkQuality_.totalDownlinkRTTAndLossMap.set(i,{totalRTT:e,totalLoss:t,count:1})}))}handleHeartbeatStats(e){if(this.hitTest(e.client)){const{VideoReportState:t,AudioReportState:i}=e.stats;t.VideoEncState[0]&&(this.localStreamStats_.totalVideoBitrate+=t.uint32_video_snd_br,this.localStreamStats_.totalVideoFPS+=t.VideoEncState[0].uint32_enc_fps,this.localStreamStats_.totalVideoWidth+=t.VideoEncState[0].uint32_enc_width,this.localStreamStats_.totalVideoHeight+=t.VideoEncState[0].uint32_enc_height,this.localStreamStats_.videoCount++),t.VideoDecState.forEach(e=>{const t=0===e.uint32_video_strtype,i=2===e.uint32_video_strtype,n=`${e.userId}_${t?"main":"auxiliary"}`;if(this.remoteStreamStatsMap_.has(n)){const r=this.remoteStreamStatsMap_.get(n);(t&&r.stream.isMainVideoSubscribed||i&&r.stream.isAuxVideoSubscribed)&&(r.totalVideoFPS+=e.uint32_video_recv_fps,r.totalVideoBitrate+=e.uint32_video_recv_br,r.videoCount++,0===r.statsToReport.uint32_video_width&&(r.statsToReport.uint32_video_width=e.uint32_dec_width),0===r.statsToReport.uint32_video_height&&(r.statsToReport.uint32_video_height=e.uint32_dec_height))}}),i&&(i.AudioDecState.forEach(e=>{const t=e.userId+"_main";if(this.remoteStreamStatsMap_.has(t)){const i=this.remoteStreamStatsMap_.get(t);i.stream.isMainAudioSubscribed&&(i.totalAudioBitrate+=e.uint32_audio_real_recv_br,i.audioCount++,Math.floor(100*e.audioLevel)>0&&(i.totalAudioLevel+=e.audioLevel,i.audioLevelCount++))}}),Math.floor(100*i.sentAudioLevel)>0&&(this.localStreamStats_.totalAudioLevel+=i.sentAudioLevel,this.localStreamStats_.audioLevelCount++))}}handlePublishStart({client:e}){this.hitTest(e)&&0===this.localStreamStats_.publishStartTime&&(this.localStreamStats_.publishStartTime=Date.now())}handleLocalStreamInitStart({audio:e,video:t}){e&&0===this.pathJoinRoom_.uint64_init_audio_start_time&&(this.pathJoinRoom_.uint64_init_audio_start_time=Date.now()),t&&0===this.pathJoinRoom_.uint64_init_camera_start_time&&(this.pathJoinRoom_.uint64_init_camera_start_time=Date.now())}handleLocalStreamInitEnd({audio:e,video:t}){e&&0===this.pathJoinRoom_.uint64_init_audio_end_time&&(this.pathJoinRoom_.uint64_init_audio_end_time=Date.now()),t&&0===this.pathJoinRoom_.uint64_init_camera_end_time&&(this.pathJoinRoom_.uint64_init_camera_end_time=Date.now())}handleLocalStreamInitFailed({audio:e,video:t,error:i}){const n=i instanceof br?i.getExtraCode()||i.getCode():{NotFoundError:1,NotAllowedError:2,NotReadableError:3,OverConstrainedError:4,AbortError:5}[i.name]||Cr.UNKNOWN;e&&0===this.pathJoinRoom_.uint64_init_audio_end_time&&(this.pathJoinRoom_.int32_init_audio_ret=n,this.pathJoinRoom_.uint64_init_audio_end_time=Date.now()),t&&0===this.pathJoinRoom_.uint64_init_camera_end_time&&(this.pathJoinRoom_.int32_init_camera_ret=n,this.pathJoinRoom_.uint64_init_camera_end_time=Date.now())}hasVideoFlag(e){return this.firstPublishedUserList_.findIndex(t=>t.userid===e&&1&t.flag)>=0}hasAudioFlag(e){return this.firstPublishedUserList_.findIndex(t=>t.userid===e&&8&t.flag)>=0}hasAuxFlag(e){return this.firstPublishedUserList_.findIndex(t=>t.userid===e&&4&t.flag)>=0}hitTest(e){return e===this.client_}async checkStorage(){try{const e=cl.getItem(this.storageKey_);e&&(await this.upload(e),cl.deleteItem(this.storageKey_))}catch(i){this.log_.warn(i)}}setStorage(){this.prepareReport();const e=this.getReportData();0!==e.msg_path_enter_room.uint64_start_time&&cl.setItem(this.storageKey_,e)}prepareReport(){if(this.networkQuality_.count>0&&(this.basicInfo.uint32_avg_rtt=Math.floor(this.networkQuality_.totalUplinkRTT/this.networkQuality_.count),this.basicInfo.uint32_avg_up_loss=Math.floor(this.networkQuality_.totalUplinkLoss/this.networkQuality_.count)),this.localStreamStats_.videoCount>0){this.localStreamStats_.statsToReport.uint32_video_big_capture_fps=Math.floor(this.localStreamStats_.totalVideoFPS/this.localStreamStats_.videoCount),this.localStreamStats_.statsToReport.uint32_video_big_bitrate=Math.floor(this.localStreamStats_.totalVideoBitrate/this.localStreamStats_.videoCount);const e=Math.floor(this.localStreamStats_.totalVideoWidth/this.localStreamStats_.videoCount),t=Math.floor(this.localStreamStats_.totalVideoHeight/this.localStreamStats_.videoCount);this.localStreamStats_.statsToReport.uint32_video_big_resolution=e<<16|t}this.localStreamStats_.audioLevelCount>0&&(this.localStreamStats_.statsToReport.uint32_audio_capture_db=Math.floor(this.localStreamStats_.totalAudioLevel/this.localStreamStats_.audioLevelCount*100)),this.remoteStreamStatsMap_.forEach((e,t)=>{const i=e.userId;if(this.networkQuality_.totalDownlinkRTTAndLossMap.has(i)){const{totalLoss:t,count:n}=this.networkQuality_.totalDownlinkRTTAndLossMap.get(i);e.statsToReport.uint32_avg_down_loss=Math.floor(t/n)}e.videoCount>0&&(e.statsToReport.uint32_video_avg_fps=Math.floor(e.totalVideoFPS/e.videoCount),e.statsToReport.uint32_video_avg_bitrate=Math.floor(e.totalVideoBitrate/e.videoCount)),e.audioCount>0&&(e.statsToReport.uint32_audio_recv_bitrate=e.statsToReport.uint32_audio_bitrate=Math.floor(e.totalAudioBitrate/e.audioCount)),e.audioLevelCount>0&&(e.statsToReport.uint32_audio_play_db=Math.floor(e.totalAudioLevel/e.audioLevelCount*100));const n=this.client_.getCallDurationCalculator();n&&(e.statsToReport.uint32_audio_play_time=n.getDuration(t,xi),e.statsToReport.uint32_video_play_time=n.getDuration(t,Bi)),e.statsToReport.uint32_video_render_first=Math.min(e.statsToReport.uint32_video_render_first,5e3);const r=this.client_.getBadCaseDetector();if(r){const{dataFreeze:i,count:n}=r.getDataFreezeDuration(t),{renderFreeze:o}=r.getRenderFreezeDuration(t);e.statsToReport.uint32_video_block_count=n,e.statsToReport.uint32_video_block_time=Math.min(i,e.statsToReport.uint32_video_play_time),e.statsToReport.uint32_video_external_block_time=Math.min(o,e.statsToReport.uint32_video_play_time),r.isBlackStream(t)&&0===e.statsToReport.uint32_video_avg_fps?e.statsToReport.uint32_video_black_screen_subjective=1:e.statsToReport.uint32_video_black_screen_subjective=0}(0===e.subscribeStartTime||e.subscribeStartTime-e.streamAddedTime>100||0===e.playStreamTime)&&(this.pathMainAudioMap_.delete(t),this.pathMainVideoMap_.delete(t),e.statsToReport.uint32_video_render_first=0)}),this.pathMainAudioMap_.forEach((e,t)=>{this.hasAudioFlag(e.userId)?e.statsToReport.uint64_play_first_frame_time-e.statsToReport.uint64_start_enter_time>5e3&&(e.statsToReport.uint64_play_first_frame_time=e.statsToReport.uint64_start_enter_time+5e3):this.pathMainAudioMap_.delete(t)}),this.pathMainVideoMap_.forEach((e,t)=>{this.hasVideoFlag(e.userId)?e.statsToReport.uint64_render_first_frame_time-e.statsToReport.uint64_start_enter_time>5e3&&(e.statsToReport.uint64_render_first_frame_time=e.statsToReport.uint64_start_enter_time+5e3):this.pathMainVideoMap_.delete(t)}),this.pathJoinRoom_.uint64_end_time-this.pathJoinRoom_.uint64_start_time>5e3&&(this.pathJoinRoom_.uint64_end_time=this.pathJoinRoom_.uint64_start_time+5e3)}getReportData(){const e=this.client_.getSignalInfo();return{uint32_sdk_app_id:Number(this.client_.getSDKAppId()),msg_user_info:new Wu({userId:this.client_.getUserId(),tinyId:this.client_.getTinyId(),role:"anchor"===this.client_.getRole()?Ut:Ft}),msg_basic_info:this.basicInfo,uint32_acc_ip:jr(e.relayIp),uint32_client_ip:jr(e.localIp,"small"),uint32_acc_port:0,uint64_timestamp:Date.now(),uint32_seq:Math.floor(Math.random()*2**31),msg_path_enter_room:this.pathJoinRoom_,msg_path_exit_room:this.pathLeaveRoom_,msg_path_recv_video:[...this.pathMainVideoMap_.values()].map(e=>e.statsToReport),msg_quality_statistics:[...this.remoteStreamStatsMap_.values()].map(e=>e.statsToReport),str_room_name:String(this.client_.getRoomId()),msg_path_recv_audio:[...this.pathMainAudioMap_.values()].map(e=>e.statsToReport),uint32_info_client_ip:jr(e.localIp,"small"),error_code:[],msg_local_statistics:this.localStreamStats_.statsToReport}}async report(){try{const e=this.getReportData();await this.upload(e),cl.deleteItem(this.storageKey_),this.initData()}catch(i){this.log_.warn(i)}}async upload(e){if(Ct||0===e.msg_path_enter_room.uint64_start_time)return;const t=`https://yun.tim.qq.com/v5/AVQualityReportSvc/C2S?random=${Math.floor(Math.random()*2**31)}&sdkappid=${Number(this.client_.getSDKAppId())}&cmdtype=jssdk_new_endreport`,i=await Sr.post(t,JSON.stringify(e));if("ok"!==i.data)throw"key point upload failed: "+i.data}}function $u(){return function(e,t,i){const n=i.value,r=new Map;return i.value=async function(...e){if(r.get(this))throw new br({code:Cr.INVALID_OPERATION,message:zc({key:ia,data:{name:t}})});try{r.set(this,!0);const t=await n.apply(this,e);return r.set(this,!1),t}catch(i){throw r.set(this,!1),i}},i}}var zu,Zu,Yu,Ku,Ju,Xu,ed,td,id,nd,rd,od,sd,ad;let cd=(zu=$u(),Zu=Tu(Cu.CLIENT.join),Yu=$u(),Ku=$u(),Ju=Tu(Cu.CLIENT.publish),Xu=$u(),ed=Tu(Cu.CLIENT.unpublish),td=Tu(...Cu.CLIENT.subscribe),id=Tu(Cu.CLIENT.unsubscribe),nd=$u(),rd=Tu(Cu.CLIENT.switchRole),od=Tu(Cu.CLIENT.startPublishCDNStream),sd=Tu(Cu.CLIENT.startMixTranscode),i((ad=class{constructor(e){if(this.name_=sn,this.mode_=e.mode,this.sdpSemantics_="plan-b",Pr(e.sdpSemantics)?function(){if(!El())return!1;if(Pr(window.RTCRtpTransceiver))return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let t=!1;try{e.addTransceiver(xi),t=!0}catch(r){}return e.close(),t}()&&(this.sdpSemantics_="unified-plan"):this.sdpSemantics_=e.sdpSemantics,this.sdkAppId_=e.sdkAppId,this.userId_=e.userId,this.log_=Uo.createLogger({id:`c${e.seq}|${this.userId_}`,userId:this.userId_,sdkAppId:this.sdkAppId_}),this.userSig_=e.userSig,this.roomId_=0,this.useStringRoomId_=e.useStringRoomId||!1,this.recordId_=null,this.pureAudioPushMode_=null,this.version_=e.version,this.log_.info("using sdpSemantics: "+this.sdpSemantics_),!Pr(e.recordId)){if(!Number.isInteger(Number(e.recordId)))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Ea})});this.recordId_=e.recordId}this.signalChannel_=null,this.isScreenShareOnly_=0,Pr(e.isScreenShareOnly)||(this.isScreenShareOnly_=e.isScreenShareOnly?1:0),this.role_="anchor",this.privateMapKey_="",this.tinyId_=0,this.env_="",this.proxy_=null,this.connections_=new Map,this.mutedStates_=new Map,this.userMap_=new Map,this.syncUserListInterval_=-1,this.localStream_=null,this.uplinkConnection_=null,this.emitter_=new Qr,this.signalInfo_={},this.isSignalReady_=!1,this.isJoined_=!1,this.heartbeat_=-1,this.lastHeartBeatTime_=-1,this.stats_=new nu(this),this.joinTimeout_=-1,this.networkQuality_=null,this.badCaseDetector_=null,this.autoSubscribe_=!!Pr(e.autoSubscribe)||e.autoSubscribe,this.startJoinTimestamp_=0,this.joinedTimestamp_=0,this.joinOptions_={},this.basis_={browser:It().name+"/"+It().version,os:Tl(),displayResolution:Il(),isScreenShareSupported:gl(),isWebRTCSupported:dl(),isGetUserMediaSupported:Rl(),isWebAudioSupported:wl(),isWebSocketsSupported:"WebSocket"in window&&2===window.WebSocket.CLOSING,isWebCodecSupported:kl(),isMediaSessionSupported:"mediaSession"in navigator&&!Pr(navigator.mediaSession.setActionHandler),isWebTransportSupported:!Pr(window.WebTransport)},this.initBussinessInfo_(e),this.publishedCDN_=!1,this.publishCDNData_=null,this.mixedMCU_=!1,this.mixTranscodeData_=null,this.checkSystemResult_=null,this.enableAudioVolumeEvaluation_=!1,this.audioVolumeIntervalId_=null,this.mixTranscodeManager_=null,this.publishCDNManager_=null,this.keyPointManager_=new qu({client:this,frameWorkType:e.frameWorkType}),this.getUserList=Mo({retryFunction:this.getUserList,settings:{retries:3},onError:(e,t)=>t(),onRetrying:e=>{this.log_.info(`retrying to get user list [${e}/3]`)}}),this.isPublishing_=!1,this.isEnableSmallStream_=!1,this.smallStreamConfig_={bitrate:100,frameRate:15,height:120,width:160},this.turnServers_=[],this.iceTransportPolicy_=e.iceTransportPolicy,this.schedule_={domains:null,iceServers:null,iceTransportPolicy:null},this.enableAutoPlayDialog_=!!Pr(e.enableAutoPlayDialog)||e.enableAutoPlayDialog}initBussinessInfo_(e){this.bussinessInfo_=e.bussinessInfo;let t={};if(Dr(e.bussinessInfo)&&(t=JSON.parse(e.bussinessInfo)),!Pr(e.pureAudioPushMode)){if(!Number.isInteger(Number(e.pureAudioPushMode)))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Aa})});this.pureAudioPushMode_=e.pureAudioPushMode,t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.pure_audio_push_mod=this.pureAudioPushMode_}if(!Pr(e.streamId)){if(!(Dr(e.streamId)&&String(e.streamId)&&String(e.streamId).length<=64))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:ya})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_streamid_main=e.streamId}if(!Pr(e.userDefineRecordId)){const i=/^[A-Za-z0-9_-]{1,64}$/gi;if(null===e.userDefineRecordId.match(i))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Sa})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_record_id=e.userDefineRecordId}if(!Pr(e.userDefinePushArgs)){if(!(Dr(e.userDefinePushArgs)&&String(e.userDefinePushArgs)&&String(e.userDefinePushArgs).length<=256))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Ca})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_push_args=e.userDefinePushArgs}ta(t)||(this.bussinessInfo_=JSON.stringify(t))}setProxyServer(e){if(this.log_.info("set proxy server: "+JSON.stringify(e)),Dr(e)){if(!e.startsWith("wss://"))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:ba})});this.proxy_=e}else if(kr(e)){const{websocketProxy:t,loggerProxy:i}=e;t&&(this.proxy_=t),i&&Mt(i)}}async schedule(e){const t=await async function(e){try{const t={userId:String(e.userId),sdkAppId:String(e.sdkAppId),isStrGroupId:e.useStringRoomId,groupId:String(e.roomId),sdkVersion:"4.11.12",userSig:String(e.userSig)},i=Vr(),n=await Sr.post("https://schedule.rtc.qq.com/api/v1/config",t,{timeout:1500});if(Tr.uploadEvent({log:"stat-schedule-delta:"+(Vr()-i),userId:e.userId}),0===n.data.code)return n.data.data;Uo.info("schedule failed: "+n.data.msg)}catch(t){Uo.info("schedule failed: "+t)}}({userId:this.userId_,sdkAppId:this.sdkAppId_,roomId:e,useStringRoomId:this.useStringRoomId_,version:this.version_,userSig:this.userSig_});t&&(this.log_.info("schedule: "+JSON.stringify(t)),this.schedule_={...this.schedule_,...t},Wr.emit(so,this.schedule_))}getSignalChannelUrl(){const e={mainUrl:Rt,backupUrl:wt},t=Ir();return t?e.mainUrl=e.backupUrl=`wss://${t}.rtc.qq.com`:this.proxy_?e.mainUrl=e.backupUrl=this.proxy_:Array.isArray(this.schedule_.domains)&&this.schedule_.domains.length>0&&(e.mainUrl=e.backupUrl="wss://"+this.schedule_.domains[0],this.schedule_.domains[1]&&(e.backupUrl="wss://"+this.schedule_.domains[1])),e}getUserId(){return this.userId_}getUserSig(){return this.userSig_}getRole(){return this.role_}getSignalInfo(){return this.signalInfo_}getRoomId(){return this.roomId_}getSDKAppId(){return this.sdkAppId_}getTinyId(){return this.tinyId_}setTurnServer(e){this.log_.info("set turn server: "+JSON.stringify(e));const t=[];Array.isArray(e)?e.forEach(e=>t.push(Fr(e))):kr(e)&&t.push(Fr(e)),this.turnServers_=t}getIceTransportPolicy(){return this.iceTransportPolicy_||this.schedule_.iceTransportPolicy||"all"}initialize(){return new Promise((e,t)=>{this.log_.info("setup signal channel");const{mainUrl:i,backupUrl:n}=this.getSignalChannelUrl();this.signalChannel_=new Zc({sdkAppId:this.sdkAppId_,userId:this.userId_,userSig:this.userSig_,url:i,backupUrl:n,version:this.version_,client:this}),this.networkQuality_||(this.networkQuality_=new ru({connections:this.connections_,signalChannel:this.signalChannel_,userId:this.userId_,client:this}),this.networkQuality_.on(Zl,e=>{this.emitter_.emit(Zl,e)})),this.deviceDetector_||(this.deviceDetector_=new ou({client:this})),this.subscriptionManager_||(this.subscriptionManager_=new ku({client:this})),this.badCaseDetector_||(this.badCaseDetector_=new Bu({client:this,stats:this.stats_})),this.callDurationCalculator_||(this.callDurationCalculator_=new Gu({client:this})),this.mixTranscodeManager_||(this.mixTranscodeManager_=new Vu({client:this,signalChannel:this.signalChannel_})),this.publishCDNManager_||(this.publishCDNManager_=new ju({client:this,signalChannel:this.signalChannel_})),this.signalChannel_.on(Vo,e=>{switch(this.log_.info(`SignalChannel state changed from ${e.prevState} to ${e.state}`),e.state){case qo:e.prevState===Wo?(this.log_.warn("signal channel reconnect successfully"),this.syncUserList(),Tr.logSuccessEvent({userId:this.userId_,eventType:Ei})):e.prevState===Qo&&Tr.logSuccessEvent({userId:this.userId_,eventType:vi})}this.emitter_.emit(jl,e)}),this.signalChannel_.on(Go,e=>{this.isSignalReady_?(this.closeUplink(),this.closeConnections(),this.emitter_.emit(Kl,e)):(Wr.emit(ro,{client:this,error:e}),t(e))}),this.signalChannel_.on(Zo.CHANNEL_SETUP_SUCCESS,t=>{this.signalInfo_=t.signalInfo,this.tinyId_=this.signalInfo_.tinyId,this.isSignalReady_||(this.isSignalReady_=!0,Wr.emit(ro,{client:this}),e())}),this.signalChannel_.on(Zo.PEER_JOIN,this.onPeerJoin,this),this.signalChannel_.on(Zo.PEER_LEAVE,this.onPeerLeave,this),this.signalChannel_.on(Zo.STREAM_ADDED,e=>{this.onRemoteStreamAdded(e.data)}),this.signalChannel_.on(Zo.STREAM_REMOVED,e=>{this.onRemoteStreamRemoved(e.data)}),this.signalChannel_.on(Zo.UPDATE_REMOTE_MUTE_STAT,e=>{Wr.emit(to,{client:this,data:e.data}),this.onPublishedUserList(e.data),this.onUpdateRemoteMuteStat(e.data)}),this.signalChannel_.on(Zo.CLINET_BANNED,e=>{const t=e.data.content;let i=t.type;"banned"===t.type?i="you got banned by account admin":"kick"===t.type?i="duplicated userId joining the room":"user_time_out"===t.type&&this.log_.warn(`last heart beat time: ${this.lastHeartBeatTime_} interval: ${Date.now()-this.lastHeartBeatTime_}`),Tr.uploadEvent({log:"stat-banned:"+t.type,userId:this.userId_}),this.log_.error(`user was banned because of [${t.type}]`),this.reset(),this.onClientBanned(i)}),this.signalChannel_.on(Zo.REQUEST_REBUILD_SESSION,e=>{this.signalInfo_=e.signalInfo;const t=[];this.connections_&&t.push(0);const i=[];for(let[r,o]of this.connections_){t.push(r);const e=o.getPeerConnection();if(!e)continue;const n=e.remoteDescription;n&&i.push(n.sdp)}const n={socketid:this.signalInfo_.socketId,tinyid:this.tinyId_,appid:this.sdkAppId_,openid:this.userId_,sessionid:String(this.roomId_),sids:t,relayInfo:this.signalInfo_.relayInnerIp,remotesdp:i,useStrRoomid:!!this.useStringRoomId_&&1};this.log_.debug("reconnect - rebuild session with data: "+JSON.stringify(n)),this.signalChannel_.send(es,n)}),this.signalChannel_.on(Zo.CLIENT_REJOIN,()=>{this.reJoin()}),Wr.emit(no,{client:this}),this.signalChannel_.connect()})}async join(e){if(this.isJoined_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Ta})});this.checkSystemResult_=await pl();let t=Ir();t||(t=Nt,this.proxy_&&(this.proxy_.startsWith(Ot)?t=Lt:this.proxy_.startsWith(kt)&&(t=Pt))),this.env_=t,Tr.setConfig({env:t,sdkAppId:this.sdkAppId_,userId:this.userId_}),this.uploadTrtcStats();const{isH264EncodeSupported:i,isVp8EncodeSupported:n}=this.checkSystemResult_.detail;if(!dl()||!i&&!n)throw new br({code:Cr.NOT_SUPPORTED,message:zc({key:Bc})});this.joinOptions_=e,this.startJoinTimestamp_=Vr(),Wr.emit(qr,{client:this}),Xs(this.userId_,{eventId:Bs,eventDesc:"joining room",timestamp:_e(),userId:this.userId_,tinyId:this.tinyId_});try{this.proxy_||this.schedule_.domains||await this.schedule(e.roomId),await this.initialize(e),await this.doJoin(e),Wr.emit(Zr,{client:this}),this.joinedTimestamp_=Vr();const t=this.joinedTimestamp_-this.startJoinTimestamp_;Tr.logSuccessEvent({userId:this.userId_,eventType:ti,delta:t}),Tr.logSuccessEvent({userId:this.userId_,eventType:ei}),Tr.uploadEvent({log:"stat-autoplay-dialog:"+this.enableAutoPlayDialog_,userId:this.userId_})}catch(s){throw Wr.emit(Yr,{client:this,error:s}),Tr.logFailedEvent({userId:this.userId_,eventType:ei,error:s}),this.reset(),s}}async uploadTrtcStats(){let e,t;try{const t=await bd.getMicrophones();e=t&&t.length}catch(h){}try{const e=await bd.getCameras();t=e&&e.length}catch(h){}const i={microphone:e,camera:t},{isH264EncodeSupported:n,isVp8EncodeSupported:r,isH264DecodeSupported:o,isVp8DecodeSupported:s}=this.checkSystemResult_.detail,a={webRTC:this.basis_.isWebRTCSupported,getUserMedia:this.basis_.isGetUserMediaSupported,webSocket:this.basis_.isWebSocketsSupported,screenShare:this.basis_.isScreenShareSupported,webAudio:this.basis_.isWebAudioSupported,h264Encode:n,h264Decode:o,vp8Encode:r,vp8Decode:s},c={browser:this.basis_.browser,os:this.basis_.os,trtc:a,devices:i},l={isWebCodecSupported:this.basis_.isWebCodecSupported,isMediaSessionSupported:this.basis_.isMediaSessionSupported,isWebTransportSupported:this.basis_.isWebTransportSupported};Tr.uploadEvent({log:"trtcstats-"+JSON.stringify(c),userId:this.userId_}),this.log_.info("TrtcStats-"+JSON.stringify(c)),Tr.uploadEvent({log:"trtcadvancedstats-"+JSON.stringify(l),userId:this.userId_})}getVersion(){const e=this.version_.split(".");return 1e3*parseInt(e[0])+100*parseInt(e[1])+parseInt(e[2])}doJoin(e){return new Promise((t,i)=>{if(!this.isSignalReady_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:wa})});this.roomId_=e.roomId,Pr(e.role)||(this.role_=e.role);let n="";Pr(e.privateMapKey)||(n=e.privateMapKey),this.privateMapKey_=n,this.log_.info(`Join() => joining room: ${e.roomId} useStringRoomId: ${this.useStringRoomId_} mode: ${this.mode_} role: ${this.role_}`);const r=this.signalInfo_,o={openid:r.openId,tinyid:r.tinyId,peerconnectionport:"",useStrRoomid:!!this.useStringRoomId_&&1,roomid:String(e.roomId),sdkAppID:String(this.sdkAppId_),socketid:r.socketId,userSig:this.userSig_,privMapEncrypt:n,privMap:"",relayip:r.relayInnerIp,dataport:r.dataPort,stunport:r.stunPort,checkSigSeq:r.checkSigSeq,pstnBizType:0,pstnPhoneNumber:null,recordId:this.recordId_,role:"user",jsSdkVersion:String(this.getVersion()),sdpSemantics:this.sdpSemantics_,browserVersion:yt,closeLocalMedia:!0,trtcscene:"live"===this.mode_?Bt:xt,trtcrole:"anchor"===this.role_?Ut:Ft,bussinessInfo:this.bussinessInfo_,isAuxUser:this.isScreenShareOnly_,autoSubscribe:this.autoSubscribe_};this.joinTimeout_=setTimeout(()=>{this.log_.error("join room timeout observed"),i(new br({code:Cr.JOIN_ROOM_FAILED,message:zc({key:Oa})}))},5e3),Wr.emit($r,{client:this});const s={AbilityOption:{GeneralLimit:{CPULimit:{uint32_CPU_num:String(navigator.hardwareConcurrency||0),str_CPU_name:String(navigator.platform),uint32_CPU_maxfreq:String(0),model:"",uint32_total_memory:String(0)},uint32_terminal_type:String(Ie?4:Ce?2:ye?3:Xe?12:Je?5:et?13:1),uint32_device_type:String(0),str_os_verion:Ie?"Android":Ce?"iPhone":ye?"iPad":Xe?"Mac":Je?"Windows":et?"Linux":"unknown",uint32_link_type:String(1),str_client_version:"4.11.12",uint32_net_type:String(en[Or()]),ua:navigator.userAgent,version:""}}},{detail:{isH264EncodeSupported:a,isVp8EncodeSupported:c}}=this.getSystemResult();let l="";a?l="H264":c&&(l="VP8");let u={EncVideoCodec:l,EncVideoWidth:0,EncVideoHeight:0,EncVideoBr:"0",EncVideoFps:0,EncAudioCodec:"opus",EncAudioFS:0,EncAudioCh:0,EncAudioBr:"0"};s.AbilityOption.AVLimit=u,this.signalChannel_.sendWithReport(Ko,o,s),this.signalChannel_.once(Zo.JOIN_ROOM_RESULT,e=>{clearTimeout(this.joinTimeout_),this.joinTimeout_=-1;const n=e.data.content.ret;Wr.emit(zr,{client:this,code:n}),n?(this.log_.error("Join room failed result: "+n+" error: "+e.data.content.error),i(new br({code:Cr.JOIN_ROOM_FAILED,extraCode:n,message:zc({key:ka,data:{error:e.data.content.error}})}))):(this.isJoined_=!0,this.log_.info("Join room success, start heartbeat"),this.startHeartbeat(),this.badCaseDetector_&&this.badCaseDetector_.start(),this.syncUserList(),this.startSyncUserListInterval(),t())})})}connectSignalBeforeReJoin(){return new Promise((e,t)=>{this.log_.warn("connectSignalBeforeReJoin() try to connect signal before reJoin"),this.isSignalReady_=!1,this.signalChannel_.close(),this.signalChannel_.once(Zo.CHANNEL_SETUP_SUCCESS,t=>{this.log_.warn("connectSignalBeforeReJoin() signal setup successfully"),e()}),this.signalChannel_.once(Go,e=>{this.log_.warn("connectSignalBeforeReJoin() signal setup failed"),t(e)}),this.signalChannel_.connect()})}async reJoin(){if(this.isJoined_){this.isJoined_=!1;try{this.log_.warn("reJoin() try to reJoin room: "+this.joinOptions_.roomId),this.subscriptionManager_&&this.subscriptionManager_.markAllStream(),await this.connectSignalBeforeReJoin(),await this.doJoin(this.joinOptions_),this.log_.warn("reJoin() reJoin successfully"),Tr.logSuccessEvent({userId:this.userId_,eventType:ii}),this.checkConnectionsToReconnect();try{this.uplinkConnection_&&this.localStream_&&!this.uplinkConnection_.getIsReconnecting()&&await this.republish()}catch(i){}}catch(i){this.log_.warn("reJoin() reJoin failed"+i),Tr.logFailedEvent({userId:this.userId_,eventType:ii,error:i}),this.emitter_.emit(Kl,new br({code:Cr.JOIN_ROOM_FAILED,message:zc({key:Na,data:{roomId:this.joinOptions_.roomId}})}))}}else this.log_.warn("reJoin() you haven't join room yet, abort reJoin")}async republish(){try{this.log_.warn("republish() try to re-publish localStream");const e=this.localStream_;await this.doUnpublish(e),await this.publish(e),this.log_.warn("republish() re-publish localStream successfully")}catch(i){throw this.log_.warn("republish() re-publish localStream failed "+i),i}}async leave(){Wr.emit(Kr,{client:this}),Xs(this.userId_,{eventId:Us,eventDesc:"leaving room",timestamp:_e(),userId:this.userId_,tinyId:this.tinyId_});try{await this.doHeartbeat()}catch(n){}this.doLeave(),Wr.emit(Xr,{client:this}),Tr.logSuccessEvent({userId:this.userId_,eventType:ni});const e=Math.floor((Vr()-this.joinedTimestamp_)/1e3);Tr.logSuccessEvent({userId:this.userId_,eventType:ri,delta:e})}doLeave(){this.isJoined_&&(Wr.emit(Jr,{client:this}),this.log_.info("leave() => leaving room"),this.signalChannel_.send(Jo),this.reset())}clearNetworkQuality(){this.networkQuality_&&(this.networkQuality_.stop(),this.networkQuality_=null)}closeConnections(){this.connections_.forEach(e=>{this.closeDownLink(e.getTinyId())})}destroy(){if(this.isJoined_)throw this.log_.warn("please call leave() before destroy() client"),new br({code:Cr.INVALID_OPERATION,message:zc({key:La})});this.log_.info("destroying SignalChannel"),this.signalChannel_&&(this.signalChannel_.close(),this.signalChannel_=null)}reset(){this.keyPointManager_&&this.keyPointManager_.prepareReport(),this.mixTranscodeManager_&&(this.mixTranscodeManager_.stop(),this.mixTranscodeManager_=null),this.publishCDNManager_&&(this.publishCDNManager_=null),this.userMap_.clear(),this.stopSyncUserListInterval(),this.stopHeartbeat(),this.closeConnections(),this.mutedStates_.clear(),this.clearNetworkQuality(),this.badCaseDetector_&&this.callDurationCalculator_&&this.uploadAllCallStats(),this.closeUplink(),this.isJoined_=!1,this.isSignalReady_=!1,this.destroy()}startSyncUserListInterval(){"live"===this.mode_&&"audience"===this.role_&&-1===this.syncUserListInterval_&&(this.syncUserListInterval_=al.setInterval(this.syncUserList.bind(this),1e4))}stopSyncUserListInterval(){al.clearInterval(this.syncUserListInterval_),this.syncUserListInterval_=-1}async syncUserList(){try{const e=await this.getUserList();0!==this.userMap_.size&&this.userMap_.forEach(t=>{e.findIndex(({userId:e})=>e===t.userId)<0&&(this.log_.info("peer leave detected: "+t.userId),this.cleanUser({userId:t.userId,tinyId:t.tinyId}))}),e.forEach(e=>{const{userId:t}=e;this.userMap_.has(t)||t===this.userId_||(this.userMap_.set(t,e),this.emitter_.emit(Gl,{userId:t}))})}catch(i){this.log_.warn("sync user list failed: "+i)}}getUserList(){return new Promise((e,t)=>{this.signalChannel_.send(gs),this.signalChannel_.once(Zo.USER_LIST_RES,t=>{const i=t.data.content.userlist.map(({userid:e,srctinyid:t,role:i})=>new Uu({userId:e,tinyId:t,role:i}));e(i)}),setTimeout(t,2e3)})}async publish(e){e.setPublishState(nn),this.isPublishing_=!0;const t=Vr();Wr.emit(io,{client:this,stream:e}),this.log_.info("publish() => publishing local stream");const i=new Du({userId:this.userId_,tinyId:this.tinyId_,client:this,isUplink:!0,signalChannel:this.signalChannel_});e.setConnection(i),i.initialize(),i.on(Ml,e=>{const t=e.getCode();t!==Cr.ICE_TRANSPORT_ERROR&&(t===Cr.UPLINK_RECONNECTION_FAILED&&this.closeUplink(),this.emitter_.emit(Kl,e))});try{this.localStream_=await i.publish(e),this.localStream_.getBeautyStatus()&&this.log_.info("beauty stream is published successfully"),this.log_.info("local stream is published successfully"),this.isPublishing_=!1,e.setPublishState(rn),this.uplinkConnection_=i;const n=Vr()-t;Tr.logSuccessEvent({userId:this.userId_,eventType:oi}),Tr.logSuccessEvent({userId:this.userId_,eventType:si,delta:n}),e.hasAudio()&&Xs(this.userId_,{eventId:Es,eventDesc:"publish audio track",timestamp:_e(),userId:this.userId_,tinyId:this.tinyId_}),e.hasVideo()&&Xs(this.userId_,{eventId:vs,eventDesc:"publish video track",timestamp:_e(),userId:this.userId_,tinyId:this.tinyId_}),this.networkQuality_&&this.networkQuality_.setUplinkConnection(this.uplinkConnection_),this.deviceDetector_&&this.deviceDetector_.setLocalStream(this.localStream_),Wr.emit(Eo,{localStream:this.localStream_,client:this}),this.notPublishWithoutH264Supported_=!1}catch(o){throw o instanceof br&&o.getCode()===Cr.NOT_SUPPORTED_H264&&(this.notPublishWithoutH264Supported_=!0),e.setPublishState(tn),i.close(),this.log_.error("failed to publish stream "+o),this.isPublishing_=!1,Tr.logFailedEvent({userId:this.userId_,eventType:oi,error:o}),o}}async unpublish(){this.log_.info("unpublish() => unpublishing local stream");try{await this.doUnpublish(),Tr.logSuccessEvent({userId:this.userId_,eventType:ai})}catch(i){throw Tr.logFailedEvent({userId:this.userId_,eventType:ai,error:i}),i}}doUnpublish(){return this.signalChannel_.sendWaitForResponse({command:os,commandDesc:"unpublish",responseCommand:Zo.UNPUBLISH_RESULT}).then(()=>{this.closeUplink()}).catch(()=>{this.closeUplink()})}closeUplink(){this.uplinkConnection_&&(this.uplinkConnection_.getIsReconnecting()&&this.uplinkConnection_.stopReconnection(),this.uplinkConnection_.close(),this.uplinkConnection_=null,this.networkQuality_&&this.networkQuality_.setUplinkConnection(null),this.localStream_.hasAudio()&&Xs(this.userId_,{eventId:ys,eventDesc:"unpublish audio track",timestamp:_e(),userId:this.userId_,tinyId:this.tinyId_}),this.localStream_.hasVideo()&&Xs(this.userId_,{eventId:As,eventDesc:"unpublish video track",timestamp:_e(),userId:this.userId_,tinyId:this.tinyId_}),this.localStream_.setConnection(null),this.localStream_=null,this.deviceDetector_&&this.deviceDetector_.setLocalStream(null))}closeDownLink(e){const t=this.connections_.get(e);t&&(t.getIsReconnecting()&&t.stopReconnection(),this.subscriptionManager_&&this.subscriptionManager_.delete(t.getUserId()),t.close(),this.connections_.delete(e),this.mutedStates_.delete(e))}async subscribe(e,t){this.log_.info(`subscribe() => subscribe to [${e.getUserId()}] ${e.getType()} stream with options: ${JSON.stringify(t)}`),Pr(t)&&(t={audio:!0,video:!0}),Pr(t.video)&&(t.video=!0),Pr(t.audio)&&(t.audio=!0);try{const i=e.getConnection();Wr.emit(fo,{client:this,stream:e}),await i.subscribe(e,t),this.subscriptionManager_&&this.subscriptionManager_.addSubscriptionRecord(e.getUserId(),e,t),this.notSubscribeWithoutH264Supported_=!1,Tr.logSuccessEvent({userId:this.userId_,eventType:ci})}catch(r){const t=r instanceof br?r.getCode():Cr.UNKNOWN;t===Cr.NOT_SUPPORTED_H264&&(this.notSubscribeWithoutH264Supported_=!0);const i=new br({code:t,message:zc({key:Fa,data:{message:r.message}})});throw Tr.logFailedEvent({userId:this.userId_,eventType:ci,error:i}),this.log_.error(i),i}}async unsubscribe(e){this.log_.info(`unsubscribe() => unsubscribe to [${e.getUserId()}] ${e.getType()} stream`);try{const t=e.getConnection();await t.unsubscribe(e),this.subscriptionManager_&&this.subscriptionManager_.addUnsubscriptionRecord(e.getUserId(),e),Wr.emit(mo,{client:this,stream:e}),Tr.logSuccessEvent({userId:this.userId_,eventType:li})}catch(n){throw Tr.logFailedEvent({userId:this.userId_,eventType:li,error:n}),n}}async switchRole(e){this.role_!==e&&("audience"===e&&this.localStream_&&await this.unpublish(this.localStream_),this.log_.info("switchRole() => switch role to: "+e),await this.doSwitchRole(e))}doSwitchRole(e){return new Promise((t,i)=>{const n={trtcscene:"live"===this.mode_?Bt:xt,trtcrole:"anchor"===e?Ut:Ft};this.log_.info("switchRole signal data: "+JSON.stringify(n));const r=setTimeout(()=>{this.log_.error("switchRole timeout observed"),this.signalChannel_.off(Zo.SWITCH_ROLE_RES,o),i(new br({code:Cr.SWITCH_ROLE_FAILED,message:zc({key:Ga})}))},5e3),o=n=>{clearTimeout(r);const{errCode:o,errMsg:s}=n.data.content;0===o?(this.role_=e,t()):(this.log_.error(`switchRole failed, errCode: ${o}, errMsg: ${s}`),i(new br({code:Cr.SWITCH_ROLE_FAILED,message:zc({key:Ha,data:{errMsg:s,errCode:o}})})))};this.signalChannel_.once(Zo.SWITCH_ROLE_RES,o),this.signalChannel_.send(ms,n)})}on(e,t,i){this.emitter_.on(e,t,i)}off(e,t,i){"*"===e?this.emitter_.removeAllListeners():this.emitter_.off(e,t,i)}getRemoteMutedState(){const e=[];return this.mutedStates_.forEach((t,i,n)=>{const r=this.connections_.get(i);r&&e.push({userId:r.getUserId(),...t})}),e}async getTransportStats(){let e={rtt:0,downlinksRTT:{}};if(this.uplinkConnection_){const t=await this.stats_.getSenderStats(this.uplinkConnection_);e.rtt=t.rtt}for(let[t,i]of this.connections_){const t=await this.stats_.getReceiverStats(i);e.downlinksRTT[t.userId]=t.rtt}return e}async getLocalAudioStats(){const e={};if(e[this.userId_]={bytesSent:0,packetsSent:0},this.uplinkConnection_){const t=await this.stats_.getSenderStats(this.uplinkConnection_);e[this.userId_]={bytesSent:t.audio.bytesSent,packetsSent:t.audio.packetsSent}}return e}async getLocalVideoStats(){const e={};if(e[this.userId_]={bytesSent:0,packetsSent:0,framesEncoded:0,framesSent:0,frameWidth:0,frameHeight:0},this.uplinkConnection_){const t=await this.stats_.getSenderStats(this.uplinkConnection_);e[this.userId_]={bytesSent:t.video.bytesSent,packetsSent:t.video.packetsSent,framesEncoded:t.video.framesEncoded,framesSent:t.video.framesSent,frameWidth:t.video.frameWidth,frameHeight:t.video.frameHeight}}return e}async getRemoteAudioStats(){const e={};for(let[t,i]of this.connections_){const t=await this.stats_.getReceiverStats(i);t.hasAudio&&(e[t.userId]={bytesReceived:t.audio.bytesReceived,packetsReceived:t.audio.packetsReceived,packetsLost:t.audio.packetsLost})}return e}async getRemoteVideoStats(e="main"){const t={};for(let[i,n]of this.connections_){const i=await this.stats_.getReceiverStats(n);"main"===e&&i.hasVideo&&(t[i.userId]={bytesReceived:i.video.bytesReceived,packetsReceived:i.video.packetsReceived,packetsLost:i.video.packetsLost,framesDecoded:i.video.framesDecoded,frameWidth:i.video.frameWidth,frameHeight:i.video.frameHeight}),"auxiliary"===e&&i.hasAuxiliary&&(t[i.userId]={bytesReceived:i.auxiliary.bytesReceived,packetsReceived:i.auxiliary.packetsReceived,packetsLost:i.auxiliary.packetsLost,framesDecoded:i.auxiliary.framesDecoded,frameWidth:i.auxiliary.frameWidth,frameHeight:i.auxiliary.frameHeight})}return t}getSdpSemantics(){return this.sdpSemantics_}getIceServers(){return 0===this.turnServers_.length&&this.schedule_.iceServers?this.schedule_.iceServers:this.turnServers_}getConnections(){return this.connections_}getMutedStates(){return this.mutedStates_}startHeartbeat(){if(-1===this.heartbeat_){const e=2e3;this.log_.info("startHeartbeat..."),this.heartbeat_=al.setInterval(this.doHeartbeat.bind(this),e)}}stopHeartbeat(){-1!==this.heartbeat_&&(this.log_.info("stopHeartbeat"),al.clearInterval(this.heartbeat_),this.heartbeat_=-1,this.lastHeartBeatTime_=-1)}async doHeartbeat(){const e=this.badCaseDetector_.getMonitorFreeze(),t=await this.stats_.getStatsReport({uplinkConnection:this.uplinkConnection_,downlinkConnections:this.connections_,freezeMap:e});if(Wr.emit(eo,{client:this,stats:t}),this.badCaseDetector_.resetMonitor(),!this.signalChannel_)return;const i={WebRTCQualityReq:t,eventList:this.signalChannel_.isConnected()?function(e){let t=Js.get(e);return t?Js.delete(e):t=[],t}(this.userId_):[],sdkAppId:this.sdkAppId_,tinyid:this.tinyId_,roomid:this.roomId_,socketid:this.signalInfo_.socketId,clientip:this.signalInfo_.localIp,serverip:this.signalInfo_.relayIp,cpunumber:navigator.hardwareConcurrency||0,cpudevice:navigator.platform,devicename:navigator.platform,ostype:navigator.platform,mode:this.localStream_?this.localStream_.getScreen()?"screen":Bi:""};let n=0;if(this.localStream_&&this.localStream_.getMediaStream()){const e=this.localStream_.getMediaStream().getAudioTracks();n=e.length>0&&e[0].muted?3:1}i.WebRTCQualityReq.AudioReportState.uint32_microphone_status=n,this.signalChannel_.send(Xo,i);const r=Date.now();this.lastHeartBeatTime_>0&&r-this.lastHeartBeatTime_>1e4&&this.log_.warn("heartbeat took "+(r-this.lastHeartBeatTime_)),this.lastHeartBeatTime_=r}onRemoteStreamAdded(e){const t=e.content,i=t.srcopenid,n=t.srctinyid;if(null===i)return void this.log_.warn("received null userId on stream added");this.userMap_.has(i)||(this.userMap_.set(i,new Uu({userId:i,tinyId:n,role:"anchor"})),this.emitter_.emit(Gl,{userId:i}));const r=this.connections_.get(n);if(r){if(r.getIsReconnecting())return;this.log_.warn("duplicated stream-added observed, rebuild the connection"),r.close(),this.connections_.delete(n)}const o={audio:t.audio,video:t.bigVideo,auxiliary:t.auxVideo};this.log_.info(`remote peer [${i}] published stream. trackState: ${JSON.stringify(o)}`),this.createDownlinkConnection({userId:i,tinyId:n,trackState:o})}createDownlinkConnection({userId:e,tinyId:t,trackState:i}){const n=new Mu({userId:e,tinyId:t,client:this,isUplink:!1,signalChannel:this.signalChannel_,autoSubscribe:this.autoSubscribe_,trackState:i});this.connections_.set(t,n),this.installDownlinkEvents(n,e,t),this.autoSubscribe_?(n.initialize(),n.connect().catch(()=>{const t=n.getTrackState();n.getMainStream()||!t.audio&&!t.video||this.initRemoteStream({type:"main",userId:e,downlinkConnection:n}),!n.getAuxStream()&&t.auxiliary&&this.initRemoteStream({type:"auxiliary",userId:e,downlinkConnection:n})})):((i.audio||i.video)&&this.initRemoteStream({type:"main",userId:e,downlinkConnection:n}),i.auxiliary&&this.initRemoteStream({type:"auxiliary",userId:e,downlinkConnection:n}))}initRemoteStream({type:e,userId:t,downlinkConnection:i}){const n=new Ou({type:e,userId:t,client:this});n.setConnection(i),i.setRemoteStream("main"===e?Vt:jt,n),n.setIsStreamAddedEventEmitted(!0),Wr.emit(po,{client:this,stream:n}),this.emitter_.emit(Bl,{stream:n})}installDownlinkEvents(e,t,i){e.on(Nl,e=>{e.stream.setIsStreamAddedEventEmitted(!0),Wr.emit(po,{client:this,stream:e.stream}),this.emitter_.emit(Bl,{stream:e.stream})}),e.on(Ll,e=>{e.stream.stop(),e.stream.setIsStreamAddedEventEmitted(!1),this.subscriptionManager_&&this.subscriptionManager_.deleteAutoRecoveryFlag(e.stream.getUserId(),e.stream.getType()),Wr.emit(vo,{client:this,stream:e.stream}),this.emitter_.emit(Ul,{stream:e.stream})}),e.on(Pl,e=>{Wr.emit(_o,{client:this,stream:e.stream}),this.emitter_.emit(Fl,{stream:e.stream})}),e.on(Dl,e=>{Wr.emit(go,{client:this,stream:e.stream}),this.emitter_.emit(Vl,{stream:e.stream})}),e.on(Ml,e=>{const t=e.getCode();t!==Cr.ICE_TRANSPORT_ERROR&&(t===Cr.DOWNLINK_RECONNECTION_FAILED&&this.closeDownLink(i),this.emitter_.emit(Kl,e))})}onRemoteStreamRemoved(e){const t=e.content,i=t.srctinyid;let n=t.srcopenid;const r=this.connections_.get(i);r&&(void 0===n&&(n=r.getUserId()),this.log_.info(`remote peer [${n}] unpublished stream`),this.closeDownLink(i))}onPeerJoin(e){const{srctinyid:t,userid:i,role:n}=e.data.content;this.userMap_.has(i)||(this.userMap_.set(i,new Uu({userId:i,tinyId:t,role:n})),this.emitter_.emit(Gl,{userId:i}))}onPeerLeave(e){const{srctinyid:t,userid:i}=e.data.content;this.log_.info(`peer leave [${i}]`),this.cleanUser({userId:i,tinyId:t})}cleanUser({userId:e,tinyId:t}){this.userMap_.delete(e),this.closeDownLink(t),this.emitter_.emit(Hl,{userId:e})}onPublishedUserList(e){try{const t=e.content.userlist.map(e=>e.userid);this.connections_.forEach(e=>{const i=e.getUserId(),n=e.getTinyId();t.findIndex(e=>e===i)<0&&(this.log_.info(`peer unpublished detected [${i}]`),this.closeDownLink(n))}),e.content.userlist.forEach(({userid:e,srctinyid:t,flag:i})=>{if(e===this.userId_)return;const n=!!(1&i),r=!!(8&i),o=!!(4&i);if(this.connections_.has(t)){const{audio:i,video:s,auxiliary:a}=this.connections_.get(t).getTrackState();!s&&n&&Wr.emit(ho,{client:this,tinyId:t,userId:e,action:Ji,kind:Bi}),!i&&r&&Wr.emit(ho,{client:this,tinyId:t,userId:e,action:Ji,kind:xi}),!a&&o&&Wr.emit(ho,{client:this,tinyId:t,userId:e,action:Ji,kind:Ui}),s&&!n&&Wr.emit(ho,{client:this,tinyId:t,userId:e,action:Xi,kind:Bi}),i&&!r&&Wr.emit(ho,{client:this,tinyId:t,userId:e,action:Xi,kind:xi}),a&&!o&&Wr.emit(ho,{client:this,tinyId:t,userId:e,action:Xi,kind:Ui})}else this.log_.info(`peer published detected [${e}]`),this.onRemoteStreamAdded({content:{audio:r,auxVideo:o,bigVideo:n,srcopenid:e,srctinyid:t}})})}catch(n){}}onUpdateRemoteMuteStat(e){e.content.userlist.forEach(e=>{const t=e.srctinyid,i=e.userid;if(0===t||t===this.tinyId_)return;const n=this.connections_.get(t);if(!n)return void this.mutedStates_.delete(t);const r=n.getMainStream();if(!r||!r.getIsStreamAddedEventEmitted())return;const o=!!(1&e.flag),s=!!(8&e.flag),a=!!(2&e.flag),c=!!(64&e.flag),l=!!(16&e.flag),u=this.mutedStates_.get(t);if(void 0===u)return this.mutedStates_.set(t,{hasAudio:s,hasVideo:o,hasSmall:a,audioMuted:c,videoMuted:l}),o?l?this.emitter_.emit(Wl,{userId:i}):this.emitter_.emit($l,{userId:i}):this.emitter_.emit(Wl,{userId:i}),void(s?c?this.emitter_.emit(Ql,{userId:i}):this.emitter_.emit(ql,{userId:i}):this.emitter_.emit(Ql,{userId:i}));{const e=!c&&s;(!u.audioMuted&&u.hasAudio)!==e&&(e?this.emitter_.emit(ql,{userId:i}):this.emitter_.emit(Ql,{userId:i}));const n=!l&&o;(!u.videoMuted&&u.hasVideo)!==n&&(n?this.emitter_.emit($l,{userId:i}):this.emitter_.emit(Wl,{userId:i})),this.mutedStates_.set(t,{hasAudio:s,hasVideo:o,hasSmall:a,audioMuted:c,videoMuted:l})}})}onClientBanned(e){this.emitter_.emit(zl,new br({code:Cr.CLIENT_BANNED,message:zc({key:Qa,data:{reason:e}})}))}getEnv(){return this.env_}getSubscriptionManager(){return this.subscriptionManager_}async startPublishCDNStream(e={}){if(!this.localStream_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Wa})});this.log_.info("startPublishCDNStream params: "+JSON.stringify(e)),await this.publishCDNManager_.startPublishTencentCDN(e),e.appId&&e.bizId&&e.url&&await this.publishCDNManager_.startPublishGivenCDN(e)}async stopPublishCDNStream(){if(!this.publishCDNManager_.getIsPublishingTencentCDN())throw new br({code:Cr.INVALID_OPERATION,message:zc({key:qa})});this.log_.info("stopPublishCDNStream"),await this.publishCDNManager_.stopPublishTencentCDN(),this.publishCDNManager_.getIsPublishingGivenCDN()&&await this.publishCDNManager_.stopPublishGivenCDN()}async startMixTranscode(e){if(!this.isJoined_||!this.mixTranscodeManager_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Ya})});Pr(e.mode)&&(e.mode=Ri.MANUAL);try{this.log_.info("startMixTranscode with config "+JSON.stringify(e)),Tr.uploadEvent({log:"mix-transcode-mode:"+e.mode,userId:this.userId_}),await this.mixTranscodeManager_.startMixTranscode(e),Tr.logSuccessEvent({userId:this.userId_,eventType:Si})}catch(n){throw Tr.logFailedEvent({userId:this.userId_,eventType:Si,error:n}),n}}async stopMixTranscode(){if(!this.isJoined_||!this.mixTranscodeManager_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Ka})});try{await this.mixTranscodeManager_.stopMixTranscode(),Tr.logSuccessEvent({userId:this.userId_,eventType:Ci})}catch(i){throw Tr.logFailedEvent({userId:this.userId_,eventType:Ci,error:i}),i}}getSystemResult(){return this.checkSystemResult_}enableAudioVolumeEvaluation(e=2e3,t=!1){if(!Mr(e))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Ja})});if(this.log_.info("enableAudioVolumeEvaluation with interval: "+e),e<=0)return this.enableAudioVolumeEvaluation_=!1,al.clearInterval(this.audioVolumeIntervalId_),void(this.audioVolumeIntervalId_=null);e=Math.floor(Math.max(e,16)),this.audioVolumeIntervalId_&&(al.clearInterval(this.audioVolumeIntervalId_),this.audioVolumeIntervalId_=null),this.enableAudioVolumeEvaluation_=!0,this.audioVolumeIntervalId_=al.setInterval(()=>{const e=[];if(this.localStream_){const t=Math.floor(100*this.localStream_.getAudioLevel());e.push({userId:this.userId_,audioVolume:t,stream:this.localStream_})}this.connections_.forEach(t=>{const i=t.getSubscribedMainStream();if(i){const n=Math.floor(100*i.getAudioLevel());e.push({userId:t.getUserId(),audioVolume:n,stream:i})}}),this.emitter_.emit(Yl,{result:e})},e,t)}uploadAllCallStats(){this.callDurationCalculator_.getDurationMap().forEach(({userId:e,type:t},i)=>{const n=this.callDurationCalculator_.getDuration(i,Bi),{dataFreeze:r}=this.badCaseDetector_.getDataFreezeDuration(i),{renderFreeze:o}=this.badCaseDetector_.getRenderFreezeDuration(i),s={userId:e,type:t,duration:n,dataFreeze:r,renderFreeze:o};Tr.uploadEvent({log:"callStats-"+JSON.stringify(s),userId:this.userId_})}),this.badCaseDetector_.stop(),this.callDurationCalculator_.reset()}async enableSmallStream(){if(this.isPublished()||this.isPublishing_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Xa})});if(!Ol())throw new br({code:Cr.INVALID_OPERATION,message:zc({key:tc})});this.setIsEnableSmallStream(!0),this.log_.info("SmallStream successfully enabled")}async disableSmallStream(){if(this.isPublished()||this.isPublishing_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:ec})});this.setIsEnableSmallStream(!1),this.log_.info("SmallStream successfully disabled")}setSmallStreamProfile(e){e&&e.framerate&&(e.frameRate=e.framerate),Object.keys(this.smallStreamConfig_).forEach(t=>{e[t]&&(this.smallStreamConfig_[t]=e[t])}),this.log_.info(`setSmallStreamProfile: bitrate=${this.smallStreamConfig_.bitrate}, frameRate=${this.smallStreamConfig_.frameRate}, height=${this.smallStreamConfig_.height}, width=${this.smallStreamConfig_.width}`);const{width:t,height:i,bitrate:n,frameRate:r}=this.smallStreamConfig_;if(t<0||i<0||n<0||r<0)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:ic})})}setRemoteVideoStreamType(e,t){switch(this.log_.info(`setRemoteVideoStreamType: streamType=${e.getType()}, set ${t}`),t){case"big":case"small":this.changeVideoType(e,t)}}changeVideoType(e,t){if(!(e instanceof Ou))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:nc})});if(!e.getConnection())throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Ua})});const i=this.getRemoteMutedState().filter(t=>t.userId===e.getUserId())[0];if("small"===t&&i&&!i.hasSmall)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:rc})});this.log_.info(`change video type: streamType=${e.getType()}, set ${t}`);const n=e.getConnection().getTinyId();let r=1;"big"===t&&(r=0),this.signalChannel_.send(_s,{type:r,srctinyid:n})}setIsEnableSmallStream(e){this.isEnableSmallStream_=e}getIsEnableSmallStream(){return this.isEnableSmallStream_}get smallStreamConfig(){return this.smallStreamConfig_}isPublished(){return!!this.localStream_}getUplinkConnection(){return this.uplinkConnection_}getLocalStream(){return this.localStream_}getMode(){return this.mode_}getBadCaseDetector(){return this.badCaseDetector_}getCallDurationCalculator(){return this.callDurationCalculator_}getIsJoined(){return this.isJoined_}getAllConnections(){const e=[...this.connections_.values()];return this.uplinkConnection_&&e.push(this.uplinkConnection_),e}isRelayMaybeFailed(){const e=this.getAllConnections();if(0===e.length)return!1;for(let t=0;t<e.length;t++)if(e[t].getReconnectionCount()<6)return!1;return!0}getUseStringRoomId(){return this.useStringRoomId_}checkConnectionsToReconnect(){this.getAllConnections().forEach(e=>{if(!e.getIsReconnecting()){const t=e.getPeerConnection();t&&t.connectionState===Yt&&(this.log_.warn(`[${e.getUserId()}] pc is closed but not reconnect`),e.startReconnection())}})}getEnableAutoPlayDialog(){return this.enableAutoPlayDialog_}}).prototype,"join",[zu,Zu],Object.getOwnPropertyDescriptor(ad.prototype,"join"),ad.prototype),i(ad.prototype,"leave",[Yu],Object.getOwnPropertyDescriptor(ad.prototype,"leave"),ad.prototype),i(ad.prototype,"publish",[Ku,Ju],Object.getOwnPropertyDescriptor(ad.prototype,"publish"),ad.prototype),i(ad.prototype,"unpublish",[Xu,ed],Object.getOwnPropertyDescriptor(ad.prototype,"unpublish"),ad.prototype),i(ad.prototype,"subscribe",[td],Object.getOwnPropertyDescriptor(ad.prototype,"subscribe"),ad.prototype),i(ad.prototype,"unsubscribe",[id],Object.getOwnPropertyDescriptor(ad.prototype,"unsubscribe"),ad.prototype),i(ad.prototype,"switchRole",[nd,rd],Object.getOwnPropertyDescriptor(ad.prototype,"switchRole"),ad.prototype),i(ad.prototype,"startPublishCDNStream",[od],Object.getOwnPropertyDescriptor(ad.prototype,"startPublishCDNStream"),ad.prototype),i(ad.prototype,"startMixTranscode",[sd],Object.getOwnPropertyDescriptor(ad.prototype,"startMixTranscode"),ad.prototype),ad);const ld=Mo({retryFunction:async function(e){if(yl())return;const t=await async function(e){let t={echoCancellation:e.echoCancellation,autoGainControl:e.autoGainControl,noiseSuppression:e.noiseSuppression};if(e.audio)if(ta(e.microphoneId)){t={sampleRate:e.sampleRate,channelCount:e.channelCount,...t};const i=(await bd.getMicrophones()).filter(({deviceId:e})=>e.length>0);i.length>0&&(t.deviceId={exact:i[0].deviceId})}else t={deviceId:{exact:e.microphoneId},sampleRate:e.sampleRate,channelCount:e.channelCount,...t};else t=!1;let i={};return i=!Pr(e.facingMode)&&e.video?{facingMode:e.facingMode,width:e.width,height:e.height,frameRate:e.frameRate}:!ta(e.cameraId)&&e.video?{deviceId:{exact:e.cameraId},width:e.width,height:e.height,frameRate:e.frameRate}:!!e.video&&(!!Pr(e.width)||{width:e.width,height:e.height,frameRate:e.frameRate}),{audio:t,video:i}}(e);if(Uo.info("getUserMedia with constraints: "+JSON.stringify(t)),t.audio){const e=await bd.getMicrophones();if(Uo.info("microphones: "+JSON.stringify(e)),0===e.length)throw new br({code:Cr.DEVICE_NOT_FOUND,message:zc({key:Hc})})}if(t.video){const e=await bd.getCameras();if(Uo.info("cameras: "+JSON.stringify(e)),0===e.length)throw new br({code:Cr.DEVICE_NOT_FOUND,message:zc({key:Qc})})}return await navigator.mediaDevices.getUserMedia(t)},settings:{retries:3,timeout:500},onError:(e,t,i)=>{"NotReadableError"===e.name?t():i(e)},onRetrying:e=>{Uo.warn(`getUserMedia NotReadableError observed, retrying [${e}/3]`)}});function ud(e){let t={echoCancellation:e.echoCancellation,autoGainControl:e.autoGainControl,noiseSuppression:e.noiseSuppression,sampleRate:e.sampleRate,channelCount:e.channelCount};return Pr(e.microphoneId)||(t.deviceId={exact:e.microphoneId}),{audio:t,video:!1}}function dd(e){let t={},i={width:e.width,height:e.height,frameRate:e.frameRate};return Pr(e.screenSource)||(i.displaySurface=e.screenSource),t.video=i,Pr(e.audioConstraints)||(t.audio=e.audioConstraints),t}const hd=new Map;hd.set("120p",{width:160,height:120,frameRate:15,bitrate:200}),hd.set("180p",{width:320,height:180,frameRate:15,bitrate:350}),hd.set("240p",{width:320,height:240,frameRate:15,bitrate:400}),hd.set("360p",{width:640,height:360,frameRate:15,bitrate:800}),hd.set("480p",{width:640,height:480,frameRate:15,bitrate:900}),hd.set("720p",{width:1280,height:720,frameRate:15,bitrate:1500}),hd.set("1080p",{width:1920,height:1080,frameRate:15,bitrate:2e3}),hd.set("1440p",{width:2560,height:1440,frameRate:30,bitrate:4860}),hd.set("4K",{width:3840,height:2160,frameRate:30,bitrate:9e3});const pd=new Map;pd.set("480p",{width:640,height:480,frameRate:5,bitrate:900}),pd.set("480p_2",{width:640,height:480,frameRate:30,bitrate:1e3}),pd.set("720p",{width:1280,height:720,frameRate:5,bitrate:1200}),pd.set("720p_2",{width:1280,height:720,frameRate:30,bitrate:3e3}),pd.set("1080p",{width:1920,height:1080,frameRate:5,bitrate:1600}),pd.set("1080p_2",{width:1920,height:1080,frameRate:30,bitrate:4e3});const fd=new Map;var gd,md;fd.set("standard",{sampleRate:48e3,channelCount:1,bitrate:40}),fd.set("standard-stereo",{sampleRate:48e3,channelCount:2,bitrate:64}),fd.set("high",{sampleRate:48e3,channelCount:1,bitrate:128}),fd.set("high-stereo",{sampleRate:48e3,channelCount:2,bitrate:192});let _d=(gd=Tu(...Cu.LOCAL_STREAM.switchDevice),i((md=class extends wu{constructor(e){let t={...e,isRemote:!1,type:"local"};e.screen&&(t.mirror=!1),super(t),this.name_=an,this.client_=null,this.video_=e.video,this.audio_=e.audio,this.cameraId_=e.cameraId,this.cameraGroupId_="",this.facingMode_=e.facingMode,this.microphoneId_=e.microphoneId,this.microphoneGroupId_="",this.videoSource_=e.videoSource,this.audioSource_=e.audioSource,this.screen_=e.screen,this.screenSource_=e.screenSource,this.screenAudio_=e.screenAudio,this.audioProfile_={echoCancellation:!!Pr(e.echoCancellation)||e.echoCancellation,autoGainControl:!!Pr(e.autoGainControl)||e.autoGainControl,noiseSuppression:!!Pr(e.noiseSuppression)||e.noiseSuppression,sampleRate:48e3,channelCount:1,bitrate:40},this.videoProfile_={width:640,height:480,frameRate:15,bitrate:900},this.screenProfile_={width:1920,height:1080,frameRate:5,bitrate:1600},this.videoBitrate_=this.screen_?1600:900,this.videoSetting_=null,this.mutedFlag_=0,this.beautyStatus_=!1,this.recoverCaptureCount_=0,this.initState(),this.canvas_=null,this.canvasInterval_=-1,this.log_.info("stream created: "+this.id_)}initState(){this.isAddingTrack_=!1,this.isRemovingTrack_=!1,this.setIsReadyToPublish(!1),this.setPublishState(tn)}installEvents(){super.installEvents(),Wr.on(Eo,this.onStreamPublished,this),Wr.on(wo,this.onVideoTrackStopped,this),Wr.on(Co,this.onVideoTrackStopped,this),Wr.on(ko,this.onAudioTrackStopped,this),Wr.on(Oo,this.onAudioTrackStopped,this)}uninstallEvents(){super.uninstallEvents(),Wr.off(Eo,this.onStreamPublished,this),Wr.off(wo,this.onVideoTrackStopped,this),Wr.off(Co,this.onVideoTrackStopped,this),Wr.off(ko,this.onAudioTrackStopped,this),Wr.off(Oo,this.onAudioTrackStopped,this)}initialize(){return new Promise((e,t)=>{if(Sl())t(new br({code:Cr.INVALID_OPERATION,message:zc({key:xc})}));else{if(Pr(this.audio_)){const t=new MediaStream;return Pr(this.audioSource_)||(t.addTrack(this.audioSource_),this.updateAudioPlayingState(!0)),Pr(this.videoSource_)||(t.addTrack(this.videoSource_),this.updateVideoPlayingState(!0)),this.setMediaStream(t),Tr.logSuccessEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:_i,kind:"custom"}),this.setIsReadyToPublish(!0),e()}this.screen_?(this.log_.info("initialize stream audio: "+this.audio_+" screenAudio: "+this.screenAudio_+" screen: "+this.screen_),async function(e){if(yl())return;let t=null;if(gt&&mt<74||vt){const i=dd(e);Uo.info("getDisplayMedia with constraints: "+JSON.stringify(i));let n=await navigator.mediaDevices.getDisplayMedia(i);if(e.screenAudio)return Uo.warn("Your browser not support capture system audio"),n;if(e.audio){const i=ud(e);return Uo.info("getUserMedia with constraints: "+JSON.stringify(i)),t=await navigator.mediaDevices.getUserMedia(i),n.addTrack(t.getAudioTracks()[0]),n}return n}if(e.screenAudio){e.audioConstraints={echoCancellation:!0,noiseSuppression:!0,sampleRate:44100};const t=dd(e);return Uo.info("getDisplayMedia with constraints: "+JSON.stringify(t)),await navigator.mediaDevices.getDisplayMedia(t)}{const i=dd(e);Uo.info("getDisplayMedia with constraints: "+JSON.stringify(i));let n=await navigator.mediaDevices.getDisplayMedia(i);if(e.audio){const i=ud(e);return Uo.info("getUserMedia with constraints: "+JSON.stringify(i)),t=await navigator.mediaDevices.getUserMedia(i),n.addTrack(t.getAudioTracks()[0]),n}return n}}({audio:this.audio_,screenAudio:this.screenAudio_,microphoneId:this.microphoneId_,screenSource:this.screenSource_,width:this.screenProfile_.width,height:this.screenProfile_.height,frameRate:this.screenProfile_.frameRate,sampleRate:this.audioProfile_.sampleRate,channelCount:this.audioProfile_.channelCount,autoGainControl:this.audioProfile_.autoGainControl,noiseSuppression:this.audioProfile_.noiseSuppression,echoCancellation:this.audioProfile_.echoCancellation}).then(t=>{this.setMediaStream(t),this.updateAudioPlayingState(this.audio_||this.screenAudio_),this.updateVideoPlayingState(!0);const i=this.getVideoTrack();return this.listenForScreenSharingStopped(i),this.setVideoContentHint(Yi),this.updateDeviceIdInUse(),this.setIsReadyToPublish(!0),this.log_.info(JSON.stringify(i.getSettings())),Tr.logSuccessEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:_i,kind:"getDisplayMedia"}),e()}).catch(e=>{Tr.logFailedEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:_i,kind:"getDisplayMedia",error:e}),this.log_.error("getDisplayMedia error observed "+e),t(e instanceof br?e:new br({code:Cr.INITIALIZE_FAILED,name:e.name,message:e.message}))})):(Wr.emit(Ao,{stream:this,audio:this.audio_,video:this.video_}),this.log_.info("initialize stream audio: "+this.audio_+" video: "+this.video_),ld({audio:this.audio_,video:this.video_,facingMode:this.facingMode_,cameraId:this.cameraId_,microphoneId:this.microphoneId_,width:this.videoProfile_.width,height:this.videoProfile_.height,frameRate:this.videoProfile_.frameRate,sampleRate:this.audioProfile_.sampleRate,channelCount:this.audioProfile_.channelCount,autoGainControl:this.audioProfile_.autoGainControl,noiseSuppression:this.audioProfile_.noiseSuppression,echoCancellation:this.audioProfile_.echoCancellation}).then(t=>(Wr.emit(yo,{stream:this,audio:this.audio_,video:this.video_}),"getSettings"in MediaStreamTrack.prototype&&(this.videoSetting_=t.getVideoTracks().length>0&&t.getVideoTracks()[0].getSettings()),this.setMediaStream(t),this.updateAudioPlayingState(this.audio_),this.updateVideoPlayingState(this.video_),this.updateDeviceIdInUse(),this.log_.info("gotStream hasAudio: "+this.hasAudio()+" hasVideo: "+this.hasVideo()),this.setIsReadyToPublish(!0),Tr.logSuccessEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:_i,kind:"getUserMedia"}),e())).catch(e=>{Wr.emit(So,{stream:this,audio:this.audio_,video:this.video_,error:e}),Tr.logFailedEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:_i,kind:"getUserMedia",error:e}),this.log_.error("getUserMedia error observed "+e),t(e instanceof br?e:new br({code:Cr.INITIALIZE_FAILED,name:e.name,message:e.message}))}))}})}listenForScreenSharingStopped(e){e.addEventListener("ended",e=>{this.log_.info("screen sharing was stopped because the video track is ended"),this.emitter_.emit(Xl)})}muteAudio(){const e=super.muteAudio();return e&&(this.log_.info("localStream mute audio"),this.sendMutedFlag(xi,!0)),e}muteVideo(){const e=super.muteVideo();return e&&(this.log_.info("localStream mute video"),this.sendMutedFlag(Bi,!0)),e}unmuteAudio(){const e=super.unmuteAudio();return e&&(this.log_.info("localStream unmute audio"),this.sendMutedFlag(xi,!1)),e}unmuteVideo(){const e=super.unmuteVideo();return e&&(this.log_.info("localStream unmute video"),this.sendMutedFlag(Bi,!1)),e}sendMutedFlag(e,t){this.setMutedFlag(e,t);const i=this.getConnection();if(i){i.sendMutedFlag(this.mutedFlag_);const n=i.getUserId(),r=i.getTinyId();let o,s=`${t?ji:Gi} local ${e} track`;o=e===xi?t?Ss:bs:t?Cs:Ts,Xs(n,{eventId:o,eventDesc:s,timestamp:_e(),userId:n,tinyId:r})}}setMutedFlag(e,t){e===xi?t?this.mutedFlag_|=4:this.mutedFlag_&=-5:t?this.mutedFlag_|=1:this.mutedFlag_&=-2,this.log_.info(`set ${e} muted state: [${t?ji:Gi}]`)}setAudioProfile(e){let t;"object"==typeof e?t=e:(t=fd.get(e),void 0===t&&(t=fd.get("standard"))),this.log_.info("setAudioProfile: "+JSON.stringify(t)),this.audioProfile_={...this.audioProfile_,...t}}async setVideoProfile(e){if(this.connection_&&!Al())throw new br({code:Cr.NOT_SUPPORTED,message:zc({key:Uc})});let t;kr(e)?t={...this.videoProfile_,...e}:Dr(e)&&(t=hd.get(e),Pr(t)&&(t=hd.get("480p"))),this.log_.info("setVideoProfile "+JSON.stringify(t));const i=this.getVideoTrack();i&&await i.applyConstraints(t),this.videoBitrate_!==t.bitrate&&(this.connection_&&await this.connection_.setBandwidth(t.bitrate,Bi),this.videoBitrate_=t.bitrate),this.videoProfile_=t}getVideoBitrate(){return this.videoBitrate_}getAudioBitrate(){return this.audioProfile_.bitrate}setScreenProfile(e){let t=e;"object"!=typeof e&&(t=pd.get(e),void 0===t&&(t=pd.get("1080p"))),this.log_.info("setScreenProfile "+JSON.stringify(e)),this.screenProfile_=t,this.videoBitrate_=t.bitrate}getVideoProfile(){return this.screen_?this.screenProfile_:this.videoProfile_}getAudioProfile(){return this.audioProfile_}setVideoContentHint(e){const t=this.getVideoTrack();t&&"contentHint"in t&&(this.log_.info("set video track contentHint to: "+e),t.contentHint=e,t.contentHint!==e&&this.log_.warn("Invalid video track contentHint: "+e))}async switchDevice(e,t){const i=e===xi;if(i){if(this.microphoneId_===t)return;this.microphoneId_=t,this.audio_=!0}else{if(this.cameraId_===t)return;t===Fi||t===Vi?this.facingMode_=t:this.cameraId_=t,this.video_=!0}if(!this.getMediaStream())return;if(this.setIsReadyToPublish(!1),this.log_.info("switchDevice "+e+" to: "+t),!i){const e=this.getVideoTrack();if(e&&e.stop(),ot){const e=this.getAudioTrack();e&&(this.log_.info("stop audio track first in huawei env"),e.stop())}}if(i){const e=this.getAudioTrack(),t=this.getMicrophoneTrackMixed();e&&e.stop(),t&&t.stop()}const n=await ld({audio:this.audio_&&e===xi||ot,video:this.video_&&e===Bi,facingMode:t===Fi||t===Vi?t:void 0,cameraId:this.cameraId_,microphoneId:this.microphoneId_,width:this.videoProfile_.width,height:this.videoProfile_.height,frameRate:this.videoProfile_.frameRate,sampleRate:this.audioProfile_.sampleRate,channelCount:this.audioProfile_.channelCount});let r=null;if(i){const e=n.getAudioTracks()[0];if(e&&this.isAudioTrackMixed()){const t=this.getAudioTrack(),i=bd.AudioMixerPlugin.getAudioTrackMap();r=bd.AudioMixerPlugin.mix({targetTrack:e,sourceList:i.get(t.id).sourceList,trackList:i.get(t.id).trackList})}else r=e}else{r=n.getVideoTracks()[0],r&&this.isVideoTrackBeautified()&&(r=await this.generateBeautyTrack(r));const e=n.getAudioTracks()[0];e&&ot&&await this.replaceTrack_(e)}await this.replaceTrack_(r),this.updateDeviceIdInUse();const o=this.getConnection();if(o){const e=o.getUserId(),t=o.getTinyId();let n=Os,r="switch camera";i&&(n=ks,r="switch microphone"),Xs(e,{eventId:n,eventDesc:r,timestamp:_e(),userId:e,tinyId:t})}this.log_.info(`switch ${i?"microphone":"camera"} success `),this.setIsReadyToPublish(!0)}async addTrack(e){if(this.isAddingTrack_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:lc})});if(this.isRemovingTrack_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:uc})});if(this.publishState_===nn)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:dc})});const t=this.getMediaStream();if(!t)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:hc})});if(e.kind===xi&&t.getAudioTracks().length>0||e.kind===Bi&&t.getVideoTracks().length>0)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:pc})});if(e.kind===Bi&&"getSettings"in MediaStreamTrack.prototype){const t=e.getSettings();!this.videoSetting_||t.width===this.videoSetting_.width&&t.height===this.videoSetting_.height||this.log_.warn(`video resolution of the track (${t.width} x ${t.height}) shall be kept the same as the previous: ${this.videoSetting_.width} x ${this.videoSetting_.height}. It may cause abnormal Cloud Recording.`)}try{this.isAddingTrack_=!0,this.keepMuteState(e),t.addTrack(e);const i=this.getConnection();i&&await i.addTrack(e),e.kind===xi?(this.audio_=!0,this.updateAudioPlayingState(!0)):(this.video_=!0,this.updateVideoPlayingState(!0)),this.isAddingTrack_=!1}catch(r){throw t.removeTrack(e),this.isAddingTrack_=!1,r}}async removeTrack(e){if(e.kind===xi)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:fc})});if(this.isAddingTrack_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:gc})});if(this.isRemovingTrack_)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:mc})});if(this.publishState_===nn)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:_c})});const t=this.getMediaStream();if(!t)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:hc})});if(-1===t.getTracks().indexOf(e))throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:vc})});if(1===t.getTracks().length)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:Ec})});try{this.isRemovingTrack_=!0;const i=this.getConnection();i&&await i.removeTrack(e),t.removeTrack(e),e.kind===xi?(this.audio_=!1,this.updateAudioPlayingState(!1)):(this.video_=!1,this.updateVideoPlayingState(!1)),this.isRemovingTrack_=!1}catch(r){throw this.isRemovingTrack_=!1,r}}async replaceTrack(e){const t=this.getMediaStream();if(!t)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:cc})});if(this.publishState_===nn)throw new br({code:Cr.INVALID_OPERATION,message:zc({key:ac})});if(e.kind===xi&&t.getAudioTracks().length<=0||e.kind===Bi&&t.getVideoTracks().length<=0)throw new br({code:Cr.INVALID_PARAMETER,message:zc({key:Ac,data:e})});if(e.kind===Bi&&"getSettings"in MediaStreamTrack.prototype){const t=e.getSettings();!this.videoSetting_||t.width===this.videoSetting_.width&&t.height===this.videoSetting_.height||this.log_.warn(`video resolution of the track (${t.width} x ${t.height}) shall be kept the same as the previous: ${this.videoSetting_.width} x ${this.videoSetting_.height}. It may cause abnormal Cloud Recording.`)}this.keepMuteState(e),e.kind===xi?(t.removeTrack(t.getAudioTracks()[0]),t.addTrack(e),super.restartAudio()):(t.removeTrack(t.getVideoTracks()[0]),t.addTrack(e),super.restartVideo());const i=this.getConnection();i&&await i.replaceTrack(e)}async updateStream(e){if(this.mediaStream_){this.log_.info("updateStream() try to recover local stream");try{const t=await bd.getCameras(),i=await bd.getMicrophones();let n=this.audio_&&e.audio,r=this.video_&&e.video;if(r&&0===t.length&&(r=!1,this.log_.info("updateStream() video flag is true, but no camera detected, set video to false")),n&&0===i.length&&(n=!1,this.log_.info("updateStream() audio flag is true, but no microphone detected, set audio to false")),!1===n&&!1===r)return void this.log_.info("updateStream() both audio and video are false, recover stream aborted");const o=e&&t.findIndex(({deviceId:t})=>t===e.cameraId)>=0,s=e&&i.findIndex(({deviceId:t})=>t===e.microphoneId)>=0,a=(await ld({audio:n,video:r,cameraId:o?e.cameraId:void 0,microphoneId:s?e.microphoneId:void 0,facingMode:this.facingMode_,width:this.videoProfile_.width,height:this.videoProfile_.height,frameRate:this.videoProfile_.frameRate,sampleRate:this.audioProfile_.sampleRate,channelCount:this.audioProfile_.channelCount})).getTracks();for(let e=0;e<a.length;e++){const t=a[e];if(t.kind===xi&&this.isAudioTrackMixed()){const e=this.getAudioTrack(),i=bd.AudioMixerPlugin.getAudioTrackMap().get(e.id);if(!i.hasMicrophone){t.stop();continue}const n=bd.AudioMixerPlugin.mix({targetTrack:t,sourceList:i.sourceList,trackList:i.trackList});await this.replaceTrack_(n)}else if(t.kind===Bi&&this.isVideoTrackBeautified()){const e=await this.generateBeautyTrack(t);await this.replaceTrack_(e)}else await this.replaceTrack_(t)}this.updateDeviceIdInUse(),Tr.logSuccessEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:Ai}),this.log_.info("updateStream() recover local stream successfully")}catch(n){Tr.logFailedEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:Ai,error:n}),this.log_.error("updateStream() failed to recover local stream, "+n),this.emitter_.emit(tu,new br({code:Cr.DEVICE_AUTO_RECOVER_FAILED,message:n.message}))}}}async replaceTrack_(e){const t=this.mediaStream_.getAudioTracks(),i=this.mediaStream_.getVideoTracks();if(e.kind===xi&&t.length<=0||e.kind===Bi&&i.length<=0)return void this.log_.info(`there is no previous ${e.kind} track, replacement ignored`);if(this.keepMuteState(e),e.kind===xi)this.mediaStream_.removeTrack(t[0]),this.mediaStream_.addTrack(e),super.restartAudio();else{if("getSettings"in MediaStreamTrack.prototype){const t=e.getSettings();!this.videoSetting_||t.width===this.videoSetting_.width&&t.height===this.videoSetting_.height||this.log_.warn(`the resolution of video track to be replaced (${t.width} x ${t.height}) is different from the previous video settings (${this.videoSetting_.width} x ${this.videoSetting_.height}). It may cause a cloud recording exception`)}this.mediaStream_.removeTrack(i[0]),this.mediaStream_.addTrack(e),super.restartVideo()}const n=this.getConnection();n&&await n.replaceTrack(e)}updateDeviceIdInUse(){if(!this.mediaStream_)return this.cameraId_="",this.cameraGroupId_="",this.microphoneId_="",void(this.microphoneGroupId_="");"getSettings"in MediaStreamTrack.prototype&&this.mediaStream_.getTracks().forEach(e=>{if(e.kind===xi&&this.isAudioTrackMixed()){const e=this.getMicrophoneTrackMixed();if(e){const{deviceId:t,groupId:i}=e.getSettings();t&&(this.microphoneId_=t,this.microphoneGroupId_=i)}return}if(e.kind===Bi&&this.isVideoTrackBeautified()){const e=this.getBeautyOriginTrack();if(e){const{deviceId:t,groupId:i}=e.getSettings();t&&(this.cameraId_=t,this.cameraGroupId_=i)}return}const{deviceId:t,groupId:i}=e.getSettings();t&&(e.kind===xi?(this.microphoneId_=t,this.microphoneGroupId_=i):e.kind!==Bi||this.screen_||(this.cameraId_=t,this.cameraGroupId_=i))});const e=this.mediaStream_.getAudioTracks(),t=this.mediaStream_.getVideoTracks();e&&0===e.length&&(this.microphoneId_="",this.microphoneGroupId_=""),t&&0===t.length&&(this.cameraId_="",this.cameraGroupId_="")}isAudioTrackMixed(){if(bd.AudioMixerPlugin){const e=bd.AudioMixerPlugin.getAudioTrackMap(),t=this.getAudioTrack();if(e&&t&&e.has(t.id))return!0}return!1}getMicrophoneTrackMixed(){if(bd.AudioMixerPlugin){const e=bd.AudioMixerPlugin.getAudioTrackMap(),t=this.getAudioTrack();if(e&&t&&e.has(t.id)){const i=e.get(t.id);return i.hasMicrophone?i.microphoneTrack:null}}return null}isVideoTrackBeautified(){if(bd.beautyTrackMap){const e=bd.beautyTrackMap,t=this.getVideoTrack();if(t&&e.has(t.id))return!0}return!1}getBeautyOriginTrack(){if(bd.beautyTrackMap){const e=bd.beautyTrackMap,t=this.getVideoTrack();if(t&&e.has(t.id)){const i=e.get(t.id);if(i.originTrack)return i.originTrack}}return null}async generateBeautyTrack(e){let t=null;const i=this.getVideoTrack(),n=bd.beautyTrackMap.get(i.id),r=n.param;if(n.type)switch(n.type){case"beauty":t=n.pluginInstance.generateBeautyTrack(e);break;case"virtual":t=await n.pluginInstance.generateVirtualTrack({videoTrack:e,type:r.type,img:r.img});break;case"mixed":t=await n.pluginInstance.generateMixedTrack({videoTrack:e,type:r.type,img:r.img})}else t=n.pluginInstance.generateBeautyTrack(e);return n.pluginInstance.deleteSource(i.id),this.log_.info("regenerate beauty track, track id = "+e.id),t}getScreen(){return this.screen_}hasScreenTrack(){if(this.screen_)return!0;const e=this.getVideoTrack();return!!e&&(e.contentHint===Yi||e.contentHint===Ki)}getVideo(){return this.video_}getAudio(){return this.audio_}getCameraId(){return this.cameraId_}getMicrophoneId(){return this.microphoneId_}getMicrophoneGroupId(){return this.microphoneGroupId_}getIsReadyToPublish(){return this.isReadyToPublish_}setIsReadyToPublish(e){this.isReadyToPublish_=e}setPublishState(e){this.publishState_=e}setBeautyStatus(e){this.beautyStatus_=!!e}getBeautyStatus(){return this.beautyStatus_}onStreamPublished(e){const{localStream:t,client:i}=e;if(t!==this)return;this.client_=i,this.log_.setUserId(i.getUserId()),this.log_.setSdkAppId(i.getSDKAppId());const n=this.getAudioTrack(),r=this.getVideoTrack();if(n){const e=!n.enabled;this.setMutedFlag(xi,e)}if(r){const e=!r.enabled;this.setMutedFlag(Bi,e)}this.connection_&&this.connection_.sendMutedFlag(this.mutedFlag_)}keepMuteState(e){e instanceof MediaStreamTrack&&this.mutedFlag_&(e.kind===Bi?1:4)&&(e.enabled=!1,this.log_.warn(`prev ${e.kind} track is muted, keep mute state`))}onVideoTrackStopped({stream:e,type:t}){e!==this||!this.video_||!this.cameraId_||this.recoverCaptureCount_>10||(Te||Ie)&&t===ji||(this.recoverCaptureCount_+=1,Tr.uploadEvent({log:"stat-local-video-"+t,userId:this.userId_}),this.updateStream({audio:!1,video:!0,cameraId:this.cameraId_}))}onAudioTrackStopped({stream:e,type:t}){e!==this||!this.audio_||!this.microphoneId_||this.recoverCaptureCount_>10||(Te||Ie)&&t===ji||(this.recoverCaptureCount_+=1,Tr.uploadEvent({log:"stat-local-audio-"+t,userId:this.userId_}),this.updateStream({audio:!0,video:!1,microphoneId:this.microphoneId_}))}setAudioVolume(e){super.setAudioVolume(e)}clearCanvas(){this.canvasInterval_&&(al.clearInterval(this.canvasInterval_),this.canvasInterval_=-1,this.canvas_=null)}genCanvasTrack(e){this.log_.info("gen canvas track");const{width:t,height:i,frameRate:n}=e.getSettings();this.canvas_=document.createElement("canvas");const r=this.canvas_.getContext("2d");return this.canvas_.width=t,this.canvas_.height=i,this.canvasInterval_=al.setInterval(()=>{if(this.hasVideo()){const e=this.getVideoTrack().getSettings();e.width===this.canvas_.width&&e.height===this.canvas_.height||(this.canvas_.width=e.width,this.canvas_.height=e.height)}this.videoPlayer_&&this.videoPlayer_.element_&&r.drawImage(this.videoPlayer_.element_,0,0,this.canvas_.width,this.canvas_.height)},Math.max(66,Math.floor(1e3/n))),this.canvas_.captureStream().getVideoTracks()[0]}}).prototype,"switchDevice",[gd],Object.getOwnPropertyDescriptor(md.prototype,"switchDevice"),md.prototype),md);var vd,Ed,Ad;let yd=0,Sd=0,Cd=(vd=bu(Cu.TRTC.createClient),Ed=bu(Cu.TRTC.createStream),i((Ad=class{constructor(){this.name_=on,this.VERSION="4.11.12",this.Logger={loggerManager:Uo,LogLevel:{TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,NONE:5},setLogLevel(e){Uo.setLogLevel(e),Gr()&&e<=1&&$c()},enableUploadLog(){Uo.enableUploadLog()},disableUploadLog(){Uo.disableUploadLog()}}}async checkSystemRequirements(){return await pl()}isScreenShareSupported(){return gl()}isSmallStreamSupported(){return Ol()}async getDevices(){return Sl()||yl()?[]:(await navigator.mediaDevices.enumerateDevices()).filter(e=>e.kind!==zi||"communications"!=e.deviceId).map((e,t)=>{let i=e.label;e.label||(i=e.kind+"_"+t);const n={label:i,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(n.groupId=e.groupId),n})}async getCameras(){return Sl()||yl()?[]:(await navigator.mediaDevices.enumerateDevices()).filter(e=>e.kind===Zi).map((e,t)=>{let i=e.label;e.label||(i="camera_"+t);const n={label:i,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(n.groupId=e.groupId),n})}async getMicrophones(){return Sl()||yl()?[]:(await navigator.mediaDevices.enumerateDevices()).filter(e=>e.kind===zi&&"communications"!==e.deviceId).map((e,t)=>{let i=e.label;e.label||(i="microphone_"+t);const n={label:i,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(n.groupId=e.groupId),n})}async getSpeakers(){return Sl()||yl()?[]:(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audiooutput"===e.kind).map((e,t)=>{let i=e.label;e.label||(i="speaker_"+t);const n={label:i,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(n.groupId=e.groupId),n})}createClient(e){Fo&&(Fo=!1,Uo.getLogLevel()!=bd.Logger.LogLevel.NONE&&(console.info("******************************************************************************"),console.info("*   TRTC Web SDK"),console.info("*   API Document: "+dn+"index.html"),console.info("*   Changelog: https://cloud.tencent.com/document/product/647/38958"),console.info("*   Report issues: https://github.com/tencentyun/TRTCSDK/issues"),console.info("******************************************************************************")),Uo.info("TRTC Web SDK Version: 4.11.12"),Uo.info("UserAgent: "+navigator.userAgent),Uo.info("URL of current page: "+location.href));const t={version:this.VERSION},i=new cd({...t,...e,seq:++yd});return Wr.emit(oo,{client:i}),i}createStream(e){return new _d({...e,seq:++Sd})}}).prototype,"createClient",[vd],Object.getOwnPropertyDescriptor(Ad.prototype,"createClient"),Ad.prototype),i(Ad.prototype,"createStream",[Ed],Object.getOwnPropertyDescriptor(Ad.prototype,"createStream"),Ad.prototype),Ad);Sl();var bd=new Cd;t["a"]=bd}).call(this,i("c8ba"))},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,i){var n=i("e330"),r=i("1d80"),o=i("577e"),s=i("5899"),a=n("".replace),c="["+s+"]",l=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),d=function(e){return function(t){var i=o(r(t));return 1&e&&(i=a(i,l,"")),2&e&&(i=a(i,u,"")),i}};e.exports={start:d(1),end:d(2),trim:d(3)}},5924:function(e,t,i){"use strict";t.__esModule=!0,t.isInContainer=t.getScrollContainer=t.isScroll=t.getStyle=t.once=t.off=t.on=void 0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.hasClass=g,t.addClass=m,t.removeClass=_,t.setStyle=E;var r=i("2b0e"),o=s(r);function s(e){return e&&e.__esModule?e:{default:e}}var a=o.default.prototype.$isServer,c=/([\:\-\_]+(.))/g,l=/^moz([A-Z])/,u=a?0:Number(document.documentMode),d=function(e){return(e||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},h=function(e){return e.replace(c,(function(e,t,i,n){return n?i.toUpperCase():i})).replace(l,"Moz$1")},p=t.on=function(){return!a&&document.addEventListener?function(e,t,i){e&&t&&i&&e.addEventListener(t,i,!1)}:function(e,t,i){e&&t&&i&&e.attachEvent("on"+t,i)}}(),f=t.off=function(){return!a&&document.removeEventListener?function(e,t,i){e&&t&&e.removeEventListener(t,i,!1)}:function(e,t,i){e&&t&&e.detachEvent("on"+t,i)}}();t.once=function(e,t,i){var n=function n(){i&&i.apply(this,arguments),f(e,t,n)};p(e,t,n)};function g(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function m(e,t){if(e){for(var i=e.className,n=(t||"").split(" "),r=0,o=n.length;r<o;r++){var s=n[r];s&&(e.classList?e.classList.add(s):g(e,s)||(i+=" "+s))}e.classList||e.setAttribute("class",i)}}function _(e,t){if(e&&t){for(var i=t.split(" "),n=" "+e.className+" ",r=0,o=i.length;r<o;r++){var s=i[r];s&&(e.classList?e.classList.remove(s):g(e,s)&&(n=n.replace(" "+s+" "," ")))}e.classList||e.setAttribute("class",d(n))}}var v=t.getStyle=u<9?function(e,t){if(!a){if(!e||!t)return null;t=h(t),"float"===t&&(t="styleFloat");try{switch(t){case"opacity":try{return e.filters.item("alpha").opacity/100}catch(i){return 1}default:return e.style[t]||e.currentStyle?e.currentStyle[t]:null}}catch(i){return e.style[t]}}}:function(e,t){if(!a){if(!e||!t)return null;t=h(t),"float"===t&&(t="cssFloat");try{var i=document.defaultView.getComputedStyle(e,"");return e.style[t]||i?i[t]:null}catch(n){return e.style[t]}}};function E(e,t,i){if(e&&t)if("object"===("undefined"===typeof t?"undefined":n(t)))for(var r in t)t.hasOwnProperty(r)&&E(e,r,t[r]);else t=h(t),"opacity"===t&&u<9?e.style.filter=isNaN(i)?"":"alpha(opacity="+100*i+")":e.style[t]=i}var A=t.isScroll=function(e,t){if(!a){var i=null!==t&&void 0!==t,n=v(e,i?t?"overflow-y":"overflow-x":"overflow");return n.match(/(scroll|auto|overlay)/)}};t.getScrollContainer=function(e,t){if(!a){var i=e;while(i){if([window,document,document.documentElement].includes(i))return window;if(A(i,t))return i;i=i.parentNode}return i}},t.isInContainer=function(e,t){if(a||!e||!t)return!1;var i=e.getBoundingClientRect(),n=void 0;return n=[window,document,document.documentElement,null,void 0].includes(t)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:t.getBoundingClientRect(),i.top<n.bottom&&i.bottom>n.top&&i.right>n.left&&i.left<n.right}},5926:function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){var t=+e;return t!==t||0===t?0:(t>0?n:i)(t)}},"597f":function(e,t){e.exports=function(e,t,i,n){var r,o=0;function s(){var s=this,a=Number(new Date)-o,c=arguments;function l(){o=Number(new Date),i.apply(s,c)}function u(){r=void 0}n&&!r&&l(),r&&clearTimeout(r),void 0===n&&a>e?l():!0!==t&&(r=setTimeout(n?u:l,void 0===n?e-a:e))}return"boolean"!==typeof t&&(n=i,i=t,t=void 0),s}},"59ed":function(e,t,i){var n=i("da84"),r=i("1626"),o=i("0d51"),s=n.TypeError;e.exports=function(e){if(r(e))return e;throw s(o(e)+" is not a function")}},"5a0c":function(e,t,i){!function(t,i){e.exports=i()}(0,(function(){"use strict";var e=1e3,t=6e4,i=36e5,n="millisecond",r="second",o="minute",s="hour",a="day",c="week",l="month",u="quarter",d="year",h="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},_=function(e,t,i){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(i)+e},v={s:_,z:function(e){var t=-e.utcOffset(),i=Math.abs(t),n=Math.floor(i/60),r=i%60;return(t<=0?"+":"-")+_(n,2,"0")+":"+_(r,2,"0")},m:function e(t,i){if(t.date()<i.date())return-e(i,t);var n=12*(i.year()-t.year())+(i.month()-t.month()),r=t.clone().add(n,l),o=i-r<0,s=t.clone().add(n+(o?-1:1),l);return+(-(n+(i-r)/(o?r-s:s-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:d,w:c,d:a,D:h,h:s,m:o,s:r,ms:n,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},E="en",A={};A[E]=m;var y=function(e){return e instanceof T},S=function(e,t,i){var n;if(!e)return E;if("string"==typeof e)A[e]&&(n=e),t&&(A[e]=t,n=e);else{var r=e.name;A[r]=e,n=r}return!i&&n&&(E=n),n||!i&&E},C=function(e,t){if(y(e))return e.clone();var i="object"==typeof t?t:{};return i.date=e,i.args=arguments,new T(i)},b=v;b.l=S,b.i=y,b.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function m(e){this.$L=S(e.locale,null,!0),this.parse(e)}var _=m.prototype;return _.parse=function(e){this.$d=function(e){var t=e.date,i=e.utc;if(null===t)return new Date(NaN);if(b.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(f);if(n){var r=n[2]-1||0,o=(n[7]||"0").substring(0,3);return i?new Date(Date.UTC(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},_.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},_.$utils=function(){return b},_.isValid=function(){return!(this.$d.toString()===p)},_.isSame=function(e,t){var i=C(e);return this.startOf(t)<=i&&i<=this.endOf(t)},_.isAfter=function(e,t){return C(e)<this.startOf(t)},_.isBefore=function(e,t){return this.endOf(t)<C(e)},_.$g=function(e,t,i){return b.u(e)?this[t]:this.set(i,e)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(e,t){var i=this,n=!!b.u(t)||t,u=b.p(e),p=function(e,t){var r=b.w(i.$u?Date.UTC(i.$y,t,e):new Date(i.$y,t,e),i);return n?r:r.endOf(a)},f=function(e,t){return b.w(i.toDate()[e].apply(i.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),i)},g=this.$W,m=this.$M,_=this.$D,v="set"+(this.$u?"UTC":"");switch(u){case d:return n?p(1,0):p(31,11);case l:return n?p(1,m):p(0,m+1);case c:var E=this.$locale().weekStart||0,A=(g<E?g+7:g)-E;return p(n?_-A:_+(6-A),m);case a:case h:return f(v+"Hours",0);case s:return f(v+"Minutes",1);case o:return f(v+"Seconds",2);case r:return f(v+"Milliseconds",3);default:return this.clone()}},_.endOf=function(e){return this.startOf(e,!1)},_.$set=function(e,t){var i,c=b.p(e),u="set"+(this.$u?"UTC":""),p=(i={},i[a]=u+"Date",i[h]=u+"Date",i[l]=u+"Month",i[d]=u+"FullYear",i[s]=u+"Hours",i[o]=u+"Minutes",i[r]=u+"Seconds",i[n]=u+"Milliseconds",i)[c],f=c===a?this.$D+(t-this.$W):t;if(c===l||c===d){var g=this.clone().set(h,1);g.$d[p](f),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},_.set=function(e,t){return this.clone().$set(e,t)},_.get=function(e){return this[b.p(e)]()},_.add=function(n,u){var h,p=this;n=Number(n);var f=b.p(u),g=function(e){var t=C(p);return b.w(t.date(t.date()+Math.round(e*n)),p)};if(f===l)return this.set(l,this.$M+n);if(f===d)return this.set(d,this.$y+n);if(f===a)return g(1);if(f===c)return g(7);var m=(h={},h[o]=t,h[s]=i,h[r]=e,h)[f]||1,_=this.$d.getTime()+n*m;return b.w(_,this)},_.subtract=function(e,t){return this.add(-1*e,t)},_.format=function(e){var t=this,i=this.$locale();if(!this.isValid())return i.invalidDate||p;var n=e||"YYYY-MM-DDTHH:mm:ssZ",r=b.z(this),o=this.$H,s=this.$m,a=this.$M,c=i.weekdays,l=i.months,u=function(e,i,r,o){return e&&(e[i]||e(t,n))||r[i].substr(0,o)},d=function(e){return b.s(o%12||12,e,"0")},h=i.meridiem||function(e,t,i){var n=e<12?"AM":"PM";return i?n.toLowerCase():n},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:b.s(a+1,2,"0"),MMM:u(i.monthsShort,a,l,3),MMMM:u(l,a),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:u(i.weekdaysMin,this.$W,c,2),ddd:u(i.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:b.s(o,2,"0"),h:d(1),hh:d(2),a:h(o,s,!0),A:h(o,s,!1),m:String(s),mm:b.s(s,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:r};return n.replace(g,(function(e,t){return t||f[e]||r.replace(":","")}))},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(n,h,p){var f,g=b.p(h),m=C(n),_=(m.utcOffset()-this.utcOffset())*t,v=this-m,E=b.m(this,m);return E=(f={},f[d]=E/12,f[l]=E,f[u]=E/3,f[c]=(v-_)/6048e5,f[a]=(v-_)/864e5,f[s]=v/i,f[o]=v/t,f[r]=v/e,f)[g]||v,p?E:b.a(E)},_.daysInMonth=function(){return this.endOf(l).$D},_.$locale=function(){return A[this.$L]},_.locale=function(e,t){if(!e)return this.$L;var i=this.clone(),n=S(e,t,!0);return n&&(i.$L=n),i},_.clone=function(){return b.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},m}(),I=T.prototype;return C.prototype=I,[["$ms",n],["$s",r],["$m",o],["$H",s],["$W",a],["$M",l],["$y",d],["$D",h]].forEach((function(e){I[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,T,C),e.$i=!0),C},C.locale=S,C.isDayjs=y,C.unix=function(e){return C(1e3*e)},C.en=A[E],C.Ls=A,C.p={},C}))},"5a34":function(e,t,i){var n=i("da84"),r=i("44e7"),o=n.TypeError;e.exports=function(e){if(r(e))throw o("The method doesn't accept regular expressions");return e}},"5a94":function(e,t,i){var n=i("b367")("keys"),r=i("8b1a");e.exports=function(e){return n[e]||(n[e]=r(e))}},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5c96":function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=45)}([function(e,t){e.exports=i("d940")},function(e,t){e.exports=i("5924")},function(e,t){e.exports=i("8122")},function(e,t){e.exports=i("d010")},function(e,t){e.exports=i("6b7c")},function(e,t){e.exports=i("e974")},function(e,t){e.exports=i("2b0e")},function(e,t){e.exports=i("7f4d")},function(e,t){e.exports=i("f3ad")},function(e,t){e.exports=i("2bb5")},function(e,t){e.exports=i("417f")},function(e,t){e.exports=i("5128")},function(e,t){e.exports=i("4897")},function(e,t){e.exports=i("eedf")},function(e,t){e.exports=i("4010")},function(e,t){e.exports=i("a742")},function(e,t){e.exports=i("0e15")},function(e,t){e.exports=i("dcdc")},function(e,t){e.exports=i("14e9")},function(e,t){e.exports=i("d397")},function(e,t){e.exports=i("d7d1")},function(e,t){e.exports=i("5488")},function(e,t){e.exports=i("41f8")},function(e,t){e.exports=i("12f2")},function(e,t){e.exports=i("92fa")},function(e,t){e.exports=i("597f")},function(e,t){e.exports=i("299c")},function(e,t){e.exports=i("2a5e")},function(e,t){e.exports=i("845f")},function(e,t){e.exports=i("8bbc")},function(e,t){e.exports=i("e62d")},function(e,t){e.exports=i("7fc1")},function(e,t){e.exports=i("c56a")},function(e,t){e.exports=i("c284")},function(e,t){e.exports=i("e452")},function(e,t){e.exports=i("9619")},function(e,t){e.exports=i("4e4b")},function(e,t){e.exports=i("e772")},function(e,t){e.exports=i("c098")},function(e,t){e.exports=i("722f")},function(e,t){e.exports=i("a15e")},function(e,t){e.exports=i("e450")},function(e,t){e.exports=i("4726")},function(e,t){e.exports=i("f494")},function(e,t){e.exports=i("6ac9")},function(e,t,i){e.exports=i(46)},function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"el-pager",on:{click:e.onPagerClick}},[e.pageCount>0?i("li",{staticClass:"number",class:{active:1===e.currentPage,disabled:e.disabled}},[e._v("1")]):e._e(),e.showPrevMore?i("li",{staticClass:"el-icon more btn-quickprev",class:[e.quickprevIconClass,{disabled:e.disabled}],on:{mouseenter:function(t){e.onMouseenter("left")},mouseleave:function(t){e.quickprevIconClass="el-icon-more"}}}):e._e(),e._l(e.pagers,(function(t){return i("li",{key:t,staticClass:"number",class:{active:e.currentPage===t,disabled:e.disabled}},[e._v(e._s(t))])})),e.showNextMore?i("li",{staticClass:"el-icon more btn-quicknext",class:[e.quicknextIconClass,{disabled:e.disabled}],on:{mouseenter:function(t){e.onMouseenter("right")},mouseleave:function(t){e.quicknextIconClass="el-icon-more"}}}):e._e(),e.pageCount>1?i("li",{staticClass:"number",class:{active:e.currentPage===e.pageCount,disabled:e.disabled}},[e._v(e._s(e.pageCount))]):e._e()],2)},r=[];n._withStripped=!0;var o={name:"ElPager",props:{currentPage:Number,pageCount:Number,pagerCount:Number,disabled:Boolean},watch:{showPrevMore:function(e){e||(this.quickprevIconClass="el-icon-more")},showNextMore:function(e){e||(this.quicknextIconClass="el-icon-more")}},methods:{onPagerClick:function(e){var t=e.target;if("UL"!==t.tagName&&!this.disabled){var i=Number(e.target.textContent),n=this.pageCount,r=this.currentPage,o=this.pagerCount-2;-1!==t.className.indexOf("more")&&(-1!==t.className.indexOf("quickprev")?i=r-o:-1!==t.className.indexOf("quicknext")&&(i=r+o)),isNaN(i)||(i<1&&(i=1),i>n&&(i=n)),i!==r&&this.$emit("change",i)}},onMouseenter:function(e){this.disabled||("left"===e?this.quickprevIconClass="el-icon-d-arrow-left":this.quicknextIconClass="el-icon-d-arrow-right")}},computed:{pagers:function(){var e=this.pagerCount,t=(e-1)/2,i=Number(this.currentPage),n=Number(this.pageCount),r=!1,o=!1;n>e&&(i>e-t&&(r=!0),i<n-t&&(o=!0));var s=[];if(r&&!o)for(var a=n-(e-2),c=a;c<n;c++)s.push(c);else if(!r&&o)for(var l=2;l<e;l++)s.push(l);else if(r&&o)for(var u=Math.floor(e/2)-1,d=i-u;d<=i+u;d++)s.push(d);else for(var h=2;h<n;h++)s.push(h);return this.showPrevMore=r,this.showNextMore=o,s}},data:function(){return{current:null,showPrevMore:!1,showNextMore:!1,quicknextIconClass:"el-icon-more",quickprevIconClass:"el-icon-more"}}},s=o;function a(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}var c=a(s,n,r,!1,null,null,null);c.options.__file="packages/pagination/src/pager.vue";var l=c.exports,u=i(36),d=i.n(u),h=i(37),p=i.n(h),f=i(8),g=i.n(f),m=i(4),_=i.n(m),v=i(2),E={name:"ElPagination",props:{pageSize:{type:Number,default:10},small:Boolean,total:Number,pageCount:Number,pagerCount:{type:Number,validator:function(e){return(0|e)===e&&e>4&&e<22&&e%2===1},default:7},currentPage:{type:Number,default:1},layout:{default:"prev, pager, next, jumper, ->, total"},pageSizes:{type:Array,default:function(){return[10,20,30,40,50,100]}},popperClass:String,prevText:String,nextText:String,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean},data:function(){return{internalCurrentPage:1,internalPageSize:0,lastEmittedPage:-1,userChangePageSize:!1}},render:function(e){var t=this.layout;if(!t)return null;if(this.hideOnSinglePage&&(!this.internalPageCount||1===this.internalPageCount))return null;var i=e("div",{class:["el-pagination",{"is-background":this.background,"el-pagination--small":this.small}]}),n={prev:e("prev"),jumper:e("jumper"),pager:e("pager",{attrs:{currentPage:this.internalCurrentPage,pageCount:this.internalPageCount,pagerCount:this.pagerCount,disabled:this.disabled},on:{change:this.handleCurrentChange}}),next:e("next"),sizes:e("sizes",{attrs:{pageSizes:this.pageSizes}}),slot:e("slot",[this.$slots.default?this.$slots.default:""]),total:e("total")},r=t.split(",").map((function(e){return e.trim()})),o=e("div",{class:"el-pagination__rightwrapper"}),s=!1;return i.children=i.children||[],o.children=o.children||[],r.forEach((function(e){"->"!==e?s?o.children.push(n[e]):i.children.push(n[e]):s=!0})),s&&i.children.unshift(o),i},components:{Prev:{render:function(e){return e("button",{attrs:{type:"button",disabled:this.$parent.disabled||this.$parent.internalCurrentPage<=1},class:"btn-prev",on:{click:this.$parent.prev}},[this.$parent.prevText?e("span",[this.$parent.prevText]):e("i",{class:"el-icon el-icon-arrow-left"})])}},Next:{render:function(e){return e("button",{attrs:{type:"button",disabled:this.$parent.disabled||this.$parent.internalCurrentPage===this.$parent.internalPageCount||0===this.$parent.internalPageCount},class:"btn-next",on:{click:this.$parent.next}},[this.$parent.nextText?e("span",[this.$parent.nextText]):e("i",{class:"el-icon el-icon-arrow-right"})])}},Sizes:{mixins:[_.a],props:{pageSizes:Array},watch:{pageSizes:{immediate:!0,handler:function(e,t){Object(v["valueEquals"])(e,t)||Array.isArray(e)&&(this.$parent.internalPageSize=e.indexOf(this.$parent.pageSize)>-1?this.$parent.pageSize:this.pageSizes[0])}}},render:function(e){var t=this;return e("span",{class:"el-pagination__sizes"},[e("el-select",{attrs:{value:this.$parent.internalPageSize,popperClass:this.$parent.popperClass||"",size:"mini",disabled:this.$parent.disabled},on:{input:this.handleChange}},[this.pageSizes.map((function(i){return e("el-option",{attrs:{value:i,label:i+t.t("el.pagination.pagesize")}})}))])])},components:{ElSelect:d.a,ElOption:p.a},methods:{handleChange:function(e){e!==this.$parent.internalPageSize&&(this.$parent.internalPageSize=e=parseInt(e,10),this.$parent.userChangePageSize=!0,this.$parent.$emit("update:pageSize",e),this.$parent.$emit("size-change",e))}}},Jumper:{mixins:[_.a],components:{ElInput:g.a},data:function(){return{userInput:null}},watch:{"$parent.internalCurrentPage":function(){this.userInput=null}},methods:{handleKeyup:function(e){var t=e.keyCode,i=e.target;13===t&&this.handleChange(i.value)},handleInput:function(e){this.userInput=e},handleChange:function(e){this.$parent.internalCurrentPage=this.$parent.getValidCurrentPage(e),this.$parent.emitChange(),this.userInput=null}},render:function(e){return e("span",{class:"el-pagination__jump"},[this.t("el.pagination.goto"),e("el-input",{class:"el-pagination__editor is-in-pagination",attrs:{min:1,max:this.$parent.internalPageCount,value:null!==this.userInput?this.userInput:this.$parent.internalCurrentPage,type:"number",disabled:this.$parent.disabled},nativeOn:{keyup:this.handleKeyup},on:{input:this.handleInput,change:this.handleChange}}),this.t("el.pagination.pageClassifier")])}},Total:{mixins:[_.a],render:function(e){return"number"===typeof this.$parent.total?e("span",{class:"el-pagination__total"},[this.t("el.pagination.total",{total:this.$parent.total})]):""}},Pager:l},methods:{handleCurrentChange:function(e){this.internalCurrentPage=this.getValidCurrentPage(e),this.userChangePageSize=!0,this.emitChange()},prev:function(){if(!this.disabled){var e=this.internalCurrentPage-1;this.internalCurrentPage=this.getValidCurrentPage(e),this.$emit("prev-click",this.internalCurrentPage),this.emitChange()}},next:function(){if(!this.disabled){var e=this.internalCurrentPage+1;this.internalCurrentPage=this.getValidCurrentPage(e),this.$emit("next-click",this.internalCurrentPage),this.emitChange()}},getValidCurrentPage:function(e){e=parseInt(e,10);var t="number"===typeof this.internalPageCount,i=void 0;return t?e<1?i=1:e>this.internalPageCount&&(i=this.internalPageCount):(isNaN(e)||e<1)&&(i=1),(void 0===i&&isNaN(e)||0===i)&&(i=1),void 0===i?e:i},emitChange:function(){var e=this;this.$nextTick((function(){(e.internalCurrentPage!==e.lastEmittedPage||e.userChangePageSize)&&(e.$emit("current-change",e.internalCurrentPage),e.lastEmittedPage=e.internalCurrentPage,e.userChangePageSize=!1)}))}},computed:{internalPageCount:function(){return"number"===typeof this.total?Math.max(1,Math.ceil(this.total/this.internalPageSize)):"number"===typeof this.pageCount?Math.max(1,this.pageCount):null}},watch:{currentPage:{immediate:!0,handler:function(e){this.internalCurrentPage=this.getValidCurrentPage(e)}},pageSize:{immediate:!0,handler:function(e){this.internalPageSize=isNaN(e)?10:e}},internalCurrentPage:{immediate:!0,handler:function(e){this.$emit("update:currentPage",e),this.lastEmittedPage=-1}},internalPageCount:function(e){var t=this.internalCurrentPage;e>0&&0===t?this.internalCurrentPage=1:t>e&&(this.internalCurrentPage=0===e?1:e,this.userChangePageSize&&this.emitChange()),this.userChangePageSize=!1}},install:function(e){e.component(E.name,E)}},A=E,y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"dialog-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[i("div",{key:e.key,ref:"dialog",class:["el-dialog",{"is-fullscreen":e.fullscreen,"el-dialog--center":e.center},e.customClass],style:e.style,attrs:{role:"dialog","aria-modal":"true","aria-label":e.title||"dialog"}},[i("div",{staticClass:"el-dialog__header"},[e._t("title",[i("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.title))])]),e.showClose?i("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:e.handleClose}},[i("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2),e.rendered?i("div",{staticClass:"el-dialog__body"},[e._t("default")],2):e._e(),e.$slots.footer?i("div",{staticClass:"el-dialog__footer"},[e._t("footer")],2):e._e()])])])},S=[];y._withStripped=!0;var C=i(11),b=i.n(C),T=i(9),I=i.n(T),R=i(3),w=i.n(R),O={name:"ElDialog",mixins:[b.a,w.a,I.a],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:""},top:{type:String,default:"15vh"},beforeClose:Function,center:{type:Boolean,default:!1},destroyOnClose:Boolean},data:function(){return{closed:!1,key:0}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick((function(){t.$refs.dialog.scrollTop=0})),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener("scroll",this.updatePopper),this.closed||this.$emit("close"),this.destroyOnClose&&this.$nextTick((function(){t.key++})))}},computed:{style:function(){var e={};return this.fullscreen||(e.marginTop=this.top,this.width&&(e.width=this.width)),e}},methods:{getMigratingConfig:function(){return{props:{size:"size is removed."}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),this.closed=!0)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")},afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},k=O,N=a(k,y,S,!1,null,null,null);N.options.__file="packages/dialog/src/component.vue";var L=N.exports;L.install=function(e){e.component(L.name,L)};var P=L,D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.close,expression:"close"}],staticClass:"el-autocomplete",attrs:{"aria-haspopup":"listbox",role:"combobox","aria-expanded":e.suggestionVisible,"aria-owns":e.id}},[i("el-input",e._b({ref:"input",on:{input:e.handleInput,change:e.handleChange,focus:e.handleFocus,blur:e.handleBlur,clear:e.handleClear},nativeOn:{keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),e.highlight(e.highlightedIndex-1)},function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),e.highlight(e.highlightedIndex+1)},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleKeyEnter(t)},function(t){return!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.close(t)}]}},"el-input",[e.$props,e.$attrs],!1),[e.$slots.prepend?i("template",{slot:"prepend"},[e._t("prepend")],2):e._e(),e.$slots.append?i("template",{slot:"append"},[e._t("append")],2):e._e(),e.$slots.prefix?i("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),e.$slots.suffix?i("template",{slot:"suffix"},[e._t("suffix")],2):e._e()],2),i("el-autocomplete-suggestions",{ref:"suggestions",class:[e.popperClass?e.popperClass:""],attrs:{"visible-arrow":"","popper-options":e.popperOptions,"append-to-body":e.popperAppendToBody,placement:e.placement,id:e.id}},e._l(e.suggestions,(function(t,n){return i("li",{key:n,class:{highlighted:e.highlightedIndex===n},attrs:{id:e.id+"-item-"+n,role:"option","aria-selected":e.highlightedIndex===n},on:{click:function(i){e.select(t)}}},[e._t("default",[e._v("\n        "+e._s(t[e.valueKey])+"\n      ")],{item:t})],2)})),0)],1)},M=[];D._withStripped=!0;var x=i(16),B=i.n(x),U=i(10),F=i.n(U),V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-autocomplete-suggestion el-popper",class:{"is-loading":!e.parent.hideLoading&&e.parent.loading},style:{width:e.dropdownWidth},attrs:{role:"region"}},[i("el-scrollbar",{attrs:{tag:"ul","wrap-class":"el-autocomplete-suggestion__wrap","view-class":"el-autocomplete-suggestion__list"}},[!e.parent.hideLoading&&e.parent.loading?i("li",[i("i",{staticClass:"el-icon-loading"})]):e._t("default")],2)],1)])},j=[];V._withStripped=!0;var G=i(5),H=i.n(G),Q=i(18),W=i.n(Q),q={components:{ElScrollbar:W.a},mixins:[H.a,w.a],componentName:"ElAutocompleteSuggestions",data:function(){return{parent:this.$parent,dropdownWidth:""}},props:{options:{default:function(){return{gpuAcceleration:!1}}},id:String},methods:{select:function(e){this.dispatch("ElAutocomplete","item-click",e)}},updated:function(){var e=this;this.$nextTick((function(t){e.popperJS&&e.updatePopper()}))},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$refs.input.$refs.input||this.$parent.$refs.input.$refs.textarea,this.referenceList=this.$el.querySelector(".el-autocomplete-suggestion__list"),this.referenceList.setAttribute("role","listbox"),this.referenceList.setAttribute("id",this.id)},created:function(){var e=this;this.$on("visible",(function(t,i){e.dropdownWidth=i+"px",e.showPopper=t}))}},$=q,z=a($,V,j,!1,null,null,null);z.options.__file="packages/autocomplete/src/autocomplete-suggestions.vue";var Z=z.exports,Y=i(23),K=i.n(Y),J={name:"ElAutocomplete",mixins:[w.a,K()("input"),I.a],inheritAttrs:!1,componentName:"ElAutocomplete",components:{ElInput:g.a,ElAutocompleteSuggestions:Z},directives:{Clickoutside:F.a},props:{valueKey:{type:String,default:"value"},popperClass:String,popperOptions:Object,placeholder:String,clearable:{type:Boolean,default:!1},disabled:Boolean,name:String,size:String,value:String,maxlength:Number,minlength:Number,autofocus:Boolean,fetchSuggestions:Function,triggerOnFocus:{type:Boolean,default:!0},customItem:String,selectWhenUnmatched:{type:Boolean,default:!1},prefixIcon:String,suffixIcon:String,label:String,debounce:{type:Number,default:300},placement:{type:String,default:"bottom-start"},hideLoading:Boolean,popperAppendToBody:{type:Boolean,default:!0},highlightFirstItem:{type:Boolean,default:!1}},data:function(){return{activated:!1,suggestions:[],loading:!1,highlightedIndex:-1,suggestionDisabled:!1}},computed:{suggestionVisible:function(){var e=this.suggestions,t=Array.isArray(e)&&e.length>0;return(t||this.loading)&&this.activated},id:function(){return"el-autocomplete-"+Object(v["generateId"])()}},watch:{suggestionVisible:function(e){var t=this.getInput();t&&this.broadcast("ElAutocompleteSuggestions","visible",[e,t.offsetWidth])}},methods:{getMigratingConfig:function(){return{props:{"custom-item":"custom-item is removed, use scoped slot instead.",props:"props is removed, use value-key instead."}}},getData:function(e){var t=this;this.suggestionDisabled||(this.loading=!0,this.fetchSuggestions(e,(function(e){t.loading=!1,t.suggestionDisabled||(Array.isArray(e)?(t.suggestions=e,t.highlightedIndex=t.highlightFirstItem?0:-1):console.error("[Element Error][Autocomplete]autocomplete suggestions must be an array"))})))},handleInput:function(e){if(this.$emit("input",e),this.suggestionDisabled=!1,!this.triggerOnFocus&&!e)return this.suggestionDisabled=!0,void(this.suggestions=[]);this.debouncedGetData(e)},handleChange:function(e){this.$emit("change",e)},handleFocus:function(e){this.activated=!0,this.$emit("focus",e),this.triggerOnFocus&&this.debouncedGetData(this.value)},handleBlur:function(e){this.$emit("blur",e)},handleClear:function(){this.activated=!1,this.$emit("clear")},close:function(e){this.activated=!1},handleKeyEnter:function(e){var t=this;this.suggestionVisible&&this.highlightedIndex>=0&&this.highlightedIndex<this.suggestions.length?(e.preventDefault(),this.select(this.suggestions[this.highlightedIndex])):this.selectWhenUnmatched&&(this.$emit("select",{value:this.value}),this.$nextTick((function(e){t.suggestions=[],t.highlightedIndex=-1})))},select:function(e){var t=this;this.$emit("input",e[this.valueKey]),this.$emit("select",e),this.$nextTick((function(e){t.suggestions=[],t.highlightedIndex=-1}))},highlight:function(e){if(this.suggestionVisible&&!this.loading)if(e<0)this.highlightedIndex=-1;else{e>=this.suggestions.length&&(e=this.suggestions.length-1);var t=this.$refs.suggestions.$el.querySelector(".el-autocomplete-suggestion__wrap"),i=t.querySelectorAll(".el-autocomplete-suggestion__list li"),n=i[e],r=t.scrollTop,o=n.offsetTop;o+n.scrollHeight>r+t.clientHeight&&(t.scrollTop+=n.scrollHeight),o<r&&(t.scrollTop-=n.scrollHeight),this.highlightedIndex=e;var s=this.getInput();s.setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)}},getInput:function(){return this.$refs.input.getInput()}},mounted:function(){var e=this;this.debouncedGetData=B()(this.debounce,this.getData),this.$on("item-click",(function(t){e.select(t)}));var t=this.getInput();t.setAttribute("role","textbox"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-controls","id"),t.setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)},beforeDestroy:function(){this.$refs.suggestions.$destroy()}},X=J,ee=a(X,D,M,!1,null,null,null);ee.options.__file="packages/autocomplete/src/autocomplete.vue";var te=ee.exports;te.install=function(e){e.component(te.name,te)};var ie,ne,re=te,oe=i(13),se=i.n(oe),ae=i(28),ce=i.n(ae),le={name:"ElDropdown",componentName:"ElDropdown",mixins:[w.a,I.a],directives:{Clickoutside:F.a},components:{ElButton:se.a,ElButtonGroup:ce.a},provide:function(){return{dropdown:this}},props:{trigger:{type:String,default:"hover"},type:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},placement:{type:String,default:"bottom-end"},visibleArrow:{default:!0},showTimeout:{type:Number,default:250},hideTimeout:{type:Number,default:150},tabindex:{type:Number,default:0},disabled:{type:Boolean,default:!1}},data:function(){return{timeout:null,visible:!1,triggerElm:null,menuItems:null,menuItemsArray:null,dropdownElm:null,focusing:!1,listId:"dropdown-menu-"+Object(v["generateId"])()}},computed:{dropdownSize:function(){return this.size||(this.$ELEMENT||{}).size}},mounted:function(){this.$on("menu-item-click",this.handleMenuItemClick)},watch:{visible:function(e){this.broadcast("ElDropdownMenu","visible",e),this.$emit("visible-change",e)},focusing:function(e){var t=this.$el.querySelector(".el-dropdown-selfdefine");t&&(e?t.className+=" focusing":t.className=t.className.replace("focusing",""))}},methods:{getMigratingConfig:function(){return{props:{"menu-align":"menu-align is renamed to placement."}}},show:function(){var e=this;this.disabled||(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.visible=!0}),"click"===this.trigger?0:this.showTimeout))},hide:function(){var e=this;this.disabled||(this.removeTabindex(),this.tabindex>=0&&this.resetTabindex(this.triggerElm),clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.visible=!1}),"click"===this.trigger?0:this.hideTimeout))},handleClick:function(){this.disabled||(this.visible?this.hide():this.show())},handleTriggerKeyDown:function(e){var t=e.keyCode;[38,40].indexOf(t)>-1?(this.removeTabindex(),this.resetTabindex(this.menuItems[0]),this.menuItems[0].focus(),e.preventDefault(),e.stopPropagation()):13===t?this.handleClick():[9,27].indexOf(t)>-1&&this.hide()},handleItemKeyDown:function(e){var t=e.keyCode,i=e.target,n=this.menuItemsArray.indexOf(i),r=this.menuItemsArray.length-1,o=void 0;[38,40].indexOf(t)>-1?(o=38===t?0!==n?n-1:0:n<r?n+1:r,this.removeTabindex(),this.resetTabindex(this.menuItems[o]),this.menuItems[o].focus(),e.preventDefault(),e.stopPropagation()):13===t?(this.triggerElmFocus(),i.click(),this.hideOnClick&&(this.visible=!1)):[9,27].indexOf(t)>-1&&(this.hide(),this.triggerElmFocus())},resetTabindex:function(e){this.removeTabindex(),e.setAttribute("tabindex","0")},removeTabindex:function(){this.triggerElm.setAttribute("tabindex","-1"),this.menuItemsArray.forEach((function(e){e.setAttribute("tabindex","-1")}))},initAria:function(){this.dropdownElm.setAttribute("id",this.listId),this.triggerElm.setAttribute("aria-haspopup","list"),this.triggerElm.setAttribute("aria-controls",this.listId),this.splitButton||(this.triggerElm.setAttribute("role","button"),this.triggerElm.setAttribute("tabindex",this.tabindex),this.triggerElm.setAttribute("class",(this.triggerElm.getAttribute("class")||"")+" el-dropdown-selfdefine"))},initEvent:function(){var e=this,t=this.trigger,i=this.show,n=this.hide,r=this.handleClick,o=this.splitButton,s=this.handleTriggerKeyDown,a=this.handleItemKeyDown;this.triggerElm=o?this.$refs.trigger.$el:this.$slots.default[0].elm;var c=this.dropdownElm;this.triggerElm.addEventListener("keydown",s),c.addEventListener("keydown",a,!0),o||(this.triggerElm.addEventListener("focus",(function(){e.focusing=!0})),this.triggerElm.addEventListener("blur",(function(){e.focusing=!1})),this.triggerElm.addEventListener("click",(function(){e.focusing=!1}))),"hover"===t?(this.triggerElm.addEventListener("mouseenter",i),this.triggerElm.addEventListener("mouseleave",n),c.addEventListener("mouseenter",i),c.addEventListener("mouseleave",n)):"click"===t&&this.triggerElm.addEventListener("click",r)},handleMenuItemClick:function(e,t){this.hideOnClick&&(this.visible=!1),this.$emit("command",e,t)},triggerElmFocus:function(){this.triggerElm.focus&&this.triggerElm.focus()},initDomOperation:function(){this.dropdownElm=this.popperElm,this.menuItems=this.dropdownElm.querySelectorAll("[tabindex='-1']"),this.menuItemsArray=[].slice.call(this.menuItems),this.initEvent(),this.initAria()}},render:function(e){var t=this,i=this.hide,n=this.splitButton,r=this.type,o=this.dropdownSize,s=this.disabled,a=function(e){t.$emit("click",e),i()},c=null;if(n)c=e("el-button-group",[e("el-button",{attrs:{type:r,size:o,disabled:s},nativeOn:{click:a}},[this.$slots.default]),e("el-button",{ref:"trigger",attrs:{type:r,size:o,disabled:s},class:"el-dropdown__caret-button"},[e("i",{class:"el-dropdown__icon el-icon-arrow-down"})])]);else{c=this.$slots.default;var l=c[0].data||{},u=l.attrs,d=void 0===u?{}:u;s&&!d.disabled&&(d.disabled=!0,l.attrs=d)}var h=s?null:this.$slots.dropdown;return e("div",{class:"el-dropdown",directives:[{name:"clickoutside",value:i}],attrs:{"aria-disabled":s}},[c,h])}},ue=le,de=a(ue,ie,ne,!1,null,null,null);de.options.__file="packages/dropdown/src/dropdown.vue";var he=de.exports;he.install=function(e){e.component(he.name,he)};var pe=he,fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[i("ul",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-dropdown-menu el-popper",class:[e.size&&"el-dropdown-menu--"+e.size]},[e._t("default")],2)])},ge=[];fe._withStripped=!0;var me={name:"ElDropdownMenu",componentName:"ElDropdownMenu",mixins:[H.a],props:{visibleArrow:{type:Boolean,default:!0},arrowOffset:{type:Number,default:0}},data:function(){return{size:this.dropdown.dropdownSize}},inject:["dropdown"],created:function(){var e=this;this.$on("updatePopper",(function(){e.showPopper&&e.updatePopper()})),this.$on("visible",(function(t){e.showPopper=t}))},mounted:function(){this.dropdown.popperElm=this.popperElm=this.$el,this.referenceElm=this.dropdown.$el,this.dropdown.initDomOperation()},watch:{"dropdown.placement":{immediate:!0,handler:function(e){this.currentPlacement=e}}}},_e=me,ve=a(_e,fe,ge,!1,null,null,null);ve.options.__file="packages/dropdown/src/dropdown-menu.vue";var Ee=ve.exports;Ee.install=function(e){e.component(Ee.name,Ee)};var Ae=Ee,ye=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"el-dropdown-menu__item",class:{"is-disabled":e.disabled,"el-dropdown-menu__item--divided":e.divided},attrs:{"aria-disabled":e.disabled,tabindex:e.disabled?null:-1},on:{click:e.handleClick}},[e.icon?i("i",{class:e.icon}):e._e(),e._t("default")],2)},Se=[];ye._withStripped=!0;var Ce={name:"ElDropdownItem",mixins:[w.a],props:{command:{},disabled:Boolean,divided:Boolean,icon:String},methods:{handleClick:function(e){this.dispatch("ElDropdown","menu-item-click",[this.command,this])}}},be=Ce,Te=a(be,ye,Se,!1,null,null,null);Te.options.__file="packages/dropdown/src/dropdown-item.vue";var Ie=Te.exports;Ie.install=function(e){e.component(Ie.name,Ie)};var Re=Ie,we=we||{};we.Utils=we.Utils||{},we.Utils.focusFirstDescendant=function(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];if(we.Utils.attemptFocus(i)||we.Utils.focusFirstDescendant(i))return!0}return!1},we.Utils.focusLastDescendant=function(e){for(var t=e.childNodes.length-1;t>=0;t--){var i=e.childNodes[t];if(we.Utils.attemptFocus(i)||we.Utils.focusLastDescendant(i))return!0}return!1},we.Utils.attemptFocus=function(e){if(!we.Utils.isFocusable(e))return!1;we.Utils.IgnoreUtilFocusChanges=!0;try{e.focus()}catch(t){}return we.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===e},we.Utils.isFocusable=function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},we.Utils.triggerEvent=function(e,t){var i=void 0;i=/^mouse|click/.test(t)?"MouseEvents":/^key/.test(t)?"KeyboardEvent":"HTMLEvents";for(var n=document.createEvent(i),r=arguments.length,o=Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];return n.initEvent.apply(n,[t].concat(o)),e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+t,n),e},we.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27};var Oe=we.Utils,ke=function(e,t){this.domNode=t,this.parent=e,this.subMenuItems=[],this.subIndex=0,this.init()};ke.prototype.init=function(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()},ke.prototype.gotoSubIndex=function(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e},ke.prototype.addListeners=function(){var e=this,t=Oe.keys,i=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,(function(n){n.addEventListener("keydown",(function(n){var r=!1;switch(n.keyCode){case t.down:e.gotoSubIndex(e.subIndex+1),r=!0;break;case t.up:e.gotoSubIndex(e.subIndex-1),r=!0;break;case t.tab:Oe.triggerEvent(i,"mouseleave");break;case t.enter:case t.space:r=!0,n.currentTarget.click();break}return r&&(n.preventDefault(),n.stopPropagation()),!1}))}))};var Ne=ke,Le=function(e){this.domNode=e,this.submenu=null,this.init()};Le.prototype.init=function(){this.domNode.setAttribute("tabindex","0");var e=this.domNode.querySelector(".el-menu");e&&(this.submenu=new Ne(this,e)),this.addListeners()},Le.prototype.addListeners=function(){var e=this,t=Oe.keys;this.domNode.addEventListener("keydown",(function(i){var n=!1;switch(i.keyCode){case t.down:Oe.triggerEvent(i.currentTarget,"mouseenter"),e.submenu&&e.submenu.gotoSubIndex(0),n=!0;break;case t.up:Oe.triggerEvent(i.currentTarget,"mouseenter"),e.submenu&&e.submenu.gotoSubIndex(e.submenu.subMenuItems.length-1),n=!0;break;case t.tab:Oe.triggerEvent(i.currentTarget,"mouseleave");break;case t.enter:case t.space:n=!0,i.currentTarget.click();break}n&&i.preventDefault()}))};var Pe=Le,De=function(e){this.domNode=e,this.init()};De.prototype.init=function(){var e=this.domNode.childNodes;[].filter.call(e,(function(e){return 1===e.nodeType})).forEach((function(e){new Pe(e)}))};var Me,xe,Be=De,Ue=i(1),Fe={name:"ElMenu",render:function(e){var t=e("ul",{attrs:{role:"menubar"},key:+this.collapse,style:{backgroundColor:this.backgroundColor||""},class:{"el-menu--horizontal":"horizontal"===this.mode,"el-menu--collapse":this.collapse,"el-menu":!0}},[this.$slots.default]);return this.collapseTransition?e("el-menu-collapse-transition",[t]):t},componentName:"ElMenu",mixins:[w.a,I.a],provide:function(){return{rootMenu:this}},components:{"el-menu-collapse-transition":{functional:!0,render:function(e,t){var i={props:{mode:"out-in"},on:{beforeEnter:function(e){e.style.opacity=.2},enter:function(e){Object(Ue["addClass"])(e,"el-opacity-transition"),e.style.opacity=1},afterEnter:function(e){Object(Ue["removeClass"])(e,"el-opacity-transition"),e.style.opacity=""},beforeLeave:function(e){e.dataset||(e.dataset={}),Object(Ue["hasClass"])(e,"el-menu--collapse")?(Object(Ue["removeClass"])(e,"el-menu--collapse"),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth,Object(Ue["addClass"])(e,"el-menu--collapse")):(Object(Ue["addClass"])(e,"el-menu--collapse"),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth,Object(Ue["removeClass"])(e,"el-menu--collapse")),e.style.width=e.scrollWidth+"px",e.style.overflow="hidden"},leave:function(e){Object(Ue["addClass"])(e,"horizontal-collapse-transition"),e.style.width=e.dataset.scrollWidth+"px"}}};return e("transition",i,t.children)}}},props:{mode:{type:String,default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:Array,uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0}},data:function(){return{activeIndex:this.defaultActive,openedMenus:this.defaultOpeneds&&!this.collapse?this.defaultOpeneds.slice(0):[],items:{},submenus:{}}},computed:{hoverBackground:function(){return this.backgroundColor?this.mixColor(this.backgroundColor,.2):""},isMenuPopup:function(){return"horizontal"===this.mode||"vertical"===this.mode&&this.collapse}},watch:{defaultActive:function(e){this.items[e]||(this.activeIndex=null),this.updateActiveIndex(e)},defaultOpeneds:function(e){this.collapse||(this.openedMenus=e)},collapse:function(e){e&&(this.openedMenus=[]),this.broadcast("ElSubmenu","toggle-collapse",e)}},methods:{updateActiveIndex:function(e){var t=this.items[e]||this.items[this.activeIndex]||this.items[this.defaultActive];t?(this.activeIndex=t.index,this.initOpenedMenu()):this.activeIndex=null},getMigratingConfig:function(){return{props:{theme:"theme is removed."}}},getColorChannels:function(e){if(e=e.replace("#",""),/^[0-9a-fA-F]{3}$/.test(e)){e=e.split("");for(var t=2;t>=0;t--)e.splice(t,0,e[t]);e=e.join("")}return/^[0-9a-fA-F]{6}$/.test(e)?{red:parseInt(e.slice(0,2),16),green:parseInt(e.slice(2,4),16),blue:parseInt(e.slice(4,6),16)}:{red:255,green:255,blue:255}},mixColor:function(e,t){var i=this.getColorChannels(e),n=i.red,r=i.green,o=i.blue;return t>0?(n*=1-t,r*=1-t,o*=1-t):(n+=(255-n)*t,r+=(255-r)*t,o+=(255-o)*t),"rgb("+Math.round(n)+", "+Math.round(r)+", "+Math.round(o)+")"},addItem:function(e){this.$set(this.items,e.index,e)},removeItem:function(e){delete this.items[e.index]},addSubmenu:function(e){this.$set(this.submenus,e.index,e)},removeSubmenu:function(e){delete this.submenus[e.index]},openMenu:function(e,t){var i=this.openedMenus;-1===i.indexOf(e)&&(this.uniqueOpened&&(this.openedMenus=i.filter((function(e){return-1!==t.indexOf(e)}))),this.openedMenus.push(e))},closeMenu:function(e){var t=this.openedMenus.indexOf(e);-1!==t&&this.openedMenus.splice(t,1)},handleSubmenuClick:function(e){var t=e.index,i=e.indexPath,n=-1!==this.openedMenus.indexOf(t);n?(this.closeMenu(t),this.$emit("close",t,i)):(this.openMenu(t,i),this.$emit("open",t,i))},handleItemClick:function(e){var t=this,i=e.index,n=e.indexPath,r=this.activeIndex,o=null!==e.index;o&&(this.activeIndex=e.index),this.$emit("select",i,n,e),("horizontal"===this.mode||this.collapse)&&(this.openedMenus=[]),this.router&&o&&this.routeToItem(e,(function(e){if(t.activeIndex=r,e){if("NavigationDuplicated"===e.name)return;console.error(e)}}))},initOpenedMenu:function(){var e=this,t=this.activeIndex,i=this.items[t];if(i&&"horizontal"!==this.mode&&!this.collapse){var n=i.indexPath;n.forEach((function(t){var i=e.submenus[t];i&&e.openMenu(t,i.indexPath)}))}},routeToItem:function(e,t){var i=e.route||e.index;try{this.$router.push(i,(function(){}),t)}catch(n){console.error(n)}},open:function(e){var t=this,i=this.submenus[e.toString()].indexPath;i.forEach((function(e){return t.openMenu(e,i)}))},close:function(e){this.closeMenu(e)}},mounted:function(){this.initOpenedMenu(),this.$on("item-click",this.handleItemClick),this.$on("submenu-click",this.handleSubmenuClick),"horizontal"===this.mode&&new Be(this.$el),this.$watch("items",this.updateActiveIndex)}},Ve=Fe,je=a(Ve,Me,xe,!1,null,null,null);je.options.__file="packages/menu/src/menu.vue";var Ge=je.exports;Ge.install=function(e){e.component(Ge.name,Ge)};var He,Qe,We=Ge,qe=i(21),$e=i.n(qe),ze={inject:["rootMenu"],computed:{indexPath:function(){var e=[this.index],t=this.$parent;while("ElMenu"!==t.$options.componentName)t.index&&e.unshift(t.index),t=t.$parent;return e},parentMenu:function(){var e=this.$parent;while(e&&-1===["ElMenu","ElSubmenu"].indexOf(e.$options.componentName))e=e.$parent;return e},paddingStyle:function(){if("vertical"!==this.rootMenu.mode)return{};var e=20,t=this.$parent;if(this.rootMenu.collapse)e=20;else while(t&&"ElMenu"!==t.$options.componentName)"ElSubmenu"===t.$options.componentName&&(e+=20),t=t.$parent;return{paddingLeft:e+"px"}}}},Ze={props:{transformOrigin:{type:[Boolean,String],default:!1},offset:H.a.props.offset,boundariesPadding:H.a.props.boundariesPadding,popperOptions:H.a.props.popperOptions},data:H.a.data,methods:H.a.methods,beforeDestroy:H.a.beforeDestroy,deactivated:H.a.deactivated},Ye={name:"ElSubmenu",componentName:"ElSubmenu",mixins:[ze,w.a,Ze],components:{ElCollapseTransition:$e.a},props:{index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0}},data:function(){return{popperJS:null,timeout:null,items:{},submenus:{},mouseInChild:!1}},watch:{opened:function(e){var t=this;this.isMenuPopup&&this.$nextTick((function(e){t.updatePopper()}))}},computed:{appendToBody:function(){return void 0===this.popperAppendToBody?this.isFirstLevel:this.popperAppendToBody},menuTransitionName:function(){return this.rootMenu.collapse?"el-zoom-in-left":"el-zoom-in-top"},opened:function(){return this.rootMenu.openedMenus.indexOf(this.index)>-1},active:function(){var e=!1,t=this.submenus,i=this.items;return Object.keys(i).forEach((function(t){i[t].active&&(e=!0)})),Object.keys(t).forEach((function(i){t[i].active&&(e=!0)})),e},hoverBackground:function(){return this.rootMenu.hoverBackground},backgroundColor:function(){return this.rootMenu.backgroundColor||""},activeTextColor:function(){return this.rootMenu.activeTextColor||""},textColor:function(){return this.rootMenu.textColor||""},mode:function(){return this.rootMenu.mode},isMenuPopup:function(){return this.rootMenu.isMenuPopup},titleStyle:function(){return"horizontal"!==this.mode?{color:this.textColor}:{borderBottomColor:this.active?this.rootMenu.activeTextColor?this.activeTextColor:"":"transparent",color:this.active?this.activeTextColor:this.textColor}},isFirstLevel:function(){var e=!0,t=this.$parent;while(t&&t!==this.rootMenu){if(["ElSubmenu","ElMenuItemGroup"].indexOf(t.$options.componentName)>-1){e=!1;break}t=t.$parent}return e}},methods:{handleCollapseToggle:function(e){e?this.initPopper():this.doDestroy()},addItem:function(e){this.$set(this.items,e.index,e)},removeItem:function(e){delete this.items[e.index]},addSubmenu:function(e){this.$set(this.submenus,e.index,e)},removeSubmenu:function(e){delete this.submenus[e.index]},handleClick:function(){var e=this.rootMenu,t=this.disabled;"hover"===e.menuTrigger&&"horizontal"===e.mode||e.collapse&&"vertical"===e.mode||t||this.dispatch("ElMenu","submenu-click",this)},handleMouseenter:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.showTimeout;if("ActiveXObject"in window||"focus"!==e.type||e.relatedTarget){var n=this.rootMenu,r=this.disabled;"click"===n.menuTrigger&&"horizontal"===n.mode||!n.collapse&&"vertical"===n.mode||r||(this.dispatch("ElSubmenu","mouse-enter-child"),clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.rootMenu.openMenu(t.index,t.indexPath)}),i),this.appendToBody&&this.$parent.$el.dispatchEvent(new MouseEvent("mouseenter")))}},handleMouseleave:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.rootMenu;"click"===i.menuTrigger&&"horizontal"===i.mode||!i.collapse&&"vertical"===i.mode||(this.dispatch("ElSubmenu","mouse-leave-child"),clearTimeout(this.timeout),this.timeout=setTimeout((function(){!e.mouseInChild&&e.rootMenu.closeMenu(e.index)}),this.hideTimeout),this.appendToBody&&t&&"ElSubmenu"===this.$parent.$options.name&&this.$parent.handleMouseleave(!0))},handleTitleMouseenter:function(){if("horizontal"!==this.mode||this.rootMenu.backgroundColor){var e=this.$refs["submenu-title"];e&&(e.style.backgroundColor=this.rootMenu.hoverBackground)}},handleTitleMouseleave:function(){if("horizontal"!==this.mode||this.rootMenu.backgroundColor){var e=this.$refs["submenu-title"];e&&(e.style.backgroundColor=this.rootMenu.backgroundColor||"")}},updatePlacement:function(){this.currentPlacement="horizontal"===this.mode&&this.isFirstLevel?"bottom-start":"right-start"},initPopper:function(){this.referenceElm=this.$el,this.popperElm=this.$refs.menu,this.updatePlacement()}},created:function(){var e=this;this.$on("toggle-collapse",this.handleCollapseToggle),this.$on("mouse-enter-child",(function(){e.mouseInChild=!0,clearTimeout(e.timeout)})),this.$on("mouse-leave-child",(function(){e.mouseInChild=!1,clearTimeout(e.timeout)}))},mounted:function(){this.parentMenu.addSubmenu(this),this.rootMenu.addSubmenu(this),this.initPopper()},beforeDestroy:function(){this.parentMenu.removeSubmenu(this),this.rootMenu.removeSubmenu(this)},render:function(e){var t=this,i=this.active,n=this.opened,r=this.paddingStyle,o=this.titleStyle,s=this.backgroundColor,a=this.rootMenu,c=this.currentPlacement,l=this.menuTransitionName,u=this.mode,d=this.disabled,h=this.popperClass,p=this.$slots,f=this.isFirstLevel,g=e("transition",{attrs:{name:l}},[e("div",{ref:"menu",directives:[{name:"show",value:n}],class:["el-menu--"+u,h],on:{mouseenter:function(e){return t.handleMouseenter(e,100)},mouseleave:function(){return t.handleMouseleave(!0)},focus:function(e){return t.handleMouseenter(e,100)}}},[e("ul",{attrs:{role:"menu"},class:["el-menu el-menu--popup","el-menu--popup-"+c],style:{backgroundColor:a.backgroundColor||""}},[p.default])])]),m=e("el-collapse-transition",[e("ul",{attrs:{role:"menu"},class:"el-menu el-menu--inline",directives:[{name:"show",value:n}],style:{backgroundColor:a.backgroundColor||""}},[p.default])]),_="horizontal"===a.mode&&f||"vertical"===a.mode&&!a.collapse?"el-icon-arrow-down":"el-icon-arrow-right";return e("li",{class:{"el-submenu":!0,"is-active":i,"is-opened":n,"is-disabled":d},attrs:{role:"menuitem","aria-haspopup":"true","aria-expanded":n},on:{mouseenter:this.handleMouseenter,mouseleave:function(){return t.handleMouseleave(!1)},focus:this.handleMouseenter}},[e("div",{class:"el-submenu__title",ref:"submenu-title",on:{click:this.handleClick,mouseenter:this.handleTitleMouseenter,mouseleave:this.handleTitleMouseleave},style:[r,o,{backgroundColor:s}]},[p.title,e("i",{class:["el-submenu__icon-arrow",_]})]),this.isMenuPopup?g:m])}},Ke=Ye,Je=a(Ke,He,Qe,!1,null,null,null);Je.options.__file="packages/menu/src/submenu.vue";var Xe=Je.exports;Xe.install=function(e){e.component(Xe.name,Xe)};var et=Xe,tt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"el-menu-item",class:{"is-active":e.active,"is-disabled":e.disabled},style:[e.paddingStyle,e.itemStyle,{backgroundColor:e.backgroundColor}],attrs:{role:"menuitem",tabindex:"-1"},on:{click:e.handleClick,mouseenter:e.onMouseEnter,focus:e.onMouseEnter,blur:e.onMouseLeave,mouseleave:e.onMouseLeave}},["ElMenu"===e.parentMenu.$options.componentName&&e.rootMenu.collapse&&e.$slots.title?i("el-tooltip",{attrs:{effect:"dark",placement:"right"}},[i("div",{attrs:{slot:"content"},slot:"content"},[e._t("title")],2),i("div",{staticStyle:{position:"absolute",left:"0",top:"0",height:"100%",width:"100%",display:"inline-block","box-sizing":"border-box",padding:"0 20px"}},[e._t("default")],2)]):[e._t("default"),e._t("title")]],2)},it=[];tt._withStripped=!0;var nt=i(26),rt=i.n(nt),ot={name:"ElMenuItem",componentName:"ElMenuItem",mixins:[ze,w.a],components:{ElTooltip:rt.a},props:{index:{default:null,validator:function(e){return"string"===typeof e||null===e}},route:[String,Object],disabled:Boolean},computed:{active:function(){return this.index===this.rootMenu.activeIndex},hoverBackground:function(){return this.rootMenu.hoverBackground},backgroundColor:function(){return this.rootMenu.backgroundColor||""},activeTextColor:function(){return this.rootMenu.activeTextColor||""},textColor:function(){return this.rootMenu.textColor||""},mode:function(){return this.rootMenu.mode},itemStyle:function(){var e={color:this.active?this.activeTextColor:this.textColor};return"horizontal"!==this.mode||this.isNested||(e.borderBottomColor=this.active?this.rootMenu.activeTextColor?this.activeTextColor:"":"transparent"),e},isNested:function(){return this.parentMenu!==this.rootMenu}},methods:{onMouseEnter:function(){("horizontal"!==this.mode||this.rootMenu.backgroundColor)&&(this.$el.style.backgroundColor=this.hoverBackground)},onMouseLeave:function(){("horizontal"!==this.mode||this.rootMenu.backgroundColor)&&(this.$el.style.backgroundColor=this.backgroundColor)},handleClick:function(){this.disabled||(this.dispatch("ElMenu","item-click",this),this.$emit("click",this))}},mounted:function(){this.parentMenu.addItem(this),this.rootMenu.addItem(this)},beforeDestroy:function(){this.parentMenu.removeItem(this),this.rootMenu.removeItem(this)}},st=ot,at=a(st,tt,it,!1,null,null,null);at.options.__file="packages/menu/src/menu-item.vue";var ct=at.exports;ct.install=function(e){e.component(ct.name,ct)};var lt=ct,ut=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"el-menu-item-group"},[i("div",{staticClass:"el-menu-item-group__title",style:{paddingLeft:e.levelPadding+"px"}},[e.$slots.title?e._t("title"):[e._v(e._s(e.title))]],2),i("ul",[e._t("default")],2)])},dt=[];ut._withStripped=!0;var ht={name:"ElMenuItemGroup",componentName:"ElMenuItemGroup",inject:["rootMenu"],props:{title:{type:String}},data:function(){return{paddingLeft:20}},computed:{levelPadding:function(){var e=20,t=this.$parent;if(this.rootMenu.collapse)return 20;while(t&&"ElMenu"!==t.$options.componentName)"ElSubmenu"===t.$options.componentName&&(e+=20),t=t.$parent;return e}}},pt=ht,ft=a(pt,ut,dt,!1,null,null,null);ft.options.__file="packages/menu/src/menu-item-group.vue";var gt=ft.exports;gt.install=function(e){e.component(gt.name,gt)};var mt=gt,_t=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"is-exceed":e.inputExceed,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?i("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?i("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?i("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?i("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.getSuffixVisible()?i("span",{staticClass:"el-input__suffix"},[i("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible&&e.isWordLimitVisible?e._e():[e._t("suffix"),e.suffixIcon?i("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?i("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(e){e.preventDefault()},click:e.clear}}):e._e(),e.showPwdVisible?i("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e(),e.isWordLimitVisible?i("span",{staticClass:"el-input__count"},[i("span",{staticClass:"el-input__count-inner"},[e._v("\n            "+e._s(e.textLength)+"/"+e._s(e.upperLimit)+"\n          ")])]):e._e()],2),e.validateState?i("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?i("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:i("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1)),e.isWordLimitVisible&&"textarea"===e.type?i("span",{staticClass:"el-input__count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()],2)},vt=[];_t._withStripped=!0;var Et=void 0,At="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",yt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function St(e){var t=window.getComputedStyle(e),i=t.getPropertyValue("box-sizing"),n=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),r=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),o=yt.map((function(e){return e+":"+t.getPropertyValue(e)})).join(";");return{contextStyle:o,paddingSize:n,borderSize:r,boxSizing:i}}function Ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Et||(Et=document.createElement("textarea"),document.body.appendChild(Et));var n=St(e),r=n.paddingSize,o=n.borderSize,s=n.boxSizing,a=n.contextStyle;Et.setAttribute("style",a+";"+At),Et.value=e.value||e.placeholder||"";var c=Et.scrollHeight,l={};"border-box"===s?c+=o:"content-box"===s&&(c-=r),Et.value="";var u=Et.scrollHeight-r;if(null!==t){var d=u*t;"border-box"===s&&(d=d+r+o),c=Math.max(d,c),l.minHeight=d+"px"}if(null!==i){var h=u*i;"border-box"===s&&(h=h+r+o),c=Math.min(h,c)}return l.height=c+"px",Et.parentNode&&Et.parentNode.removeChild(Et),Et=null,l}var bt=i(7),Tt=i.n(bt),It=i(19),Rt={name:"ElInput",componentName:"ElInput",mixins:[w.a,I.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return Tt()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"===typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(e){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(e){this.focused=!1,this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize,t=this.type;if("textarea"===t)if(e){var i=e.minRows,n=e.maxRows;this.textareaCalcStyle=Ct(this.$refs.textarea,i,n)}else this.textareaCalcStyle={minHeight:Ct(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit("focus",e)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(e){var t=e.target.value,i=t[t.length-1]||"";this.isComposing=!Object(It["isKorean"])(i)},handleCompositionEnd:function(e){this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit("input",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit("change",e.target.value)},calcIconOffset:function(e){var t=[].slice.call(this.$el.querySelectorAll(".el-input__"+e)||[]);if(t.length){for(var i=null,n=0;n<t.length;n++)if(t[n].parentNode===this.$el){i=t[n];break}if(i){var r={suffix:"append",prefix:"prepend"},o=r[e];this.$slots[o]?i.style.transform="translateX("+("suffix"===e?"-":"")+this.$el.querySelector(".el-input-group__"+o).offsetWidth+"px)":i.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){var e=this;this.passwordVisible=!this.passwordVisible,this.$nextTick((function(){e.focus()}))},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},wt=Rt,Ot=a(wt,_t,vt,!1,null,null,null);Ot.options.__file="packages/input/src/input.vue";var kt=Ot.exports;kt.install=function(e){e.component(kt.name,kt)};var Nt=kt,Lt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["el-input-number",e.inputNumberSize?"el-input-number--"+e.inputNumberSize:"",{"is-disabled":e.inputNumberDisabled},{"is-without-controls":!e.controls},{"is-controls-right":e.controlsAtRight}],on:{dragstart:function(e){e.preventDefault()}}},[e.controls?i("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":e.minDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.decrease(t)}}},[i("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-down":"minus")})]):e._e(),e.controls?i("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":e.maxDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.increase(t)}}},[i("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-up":"plus")})]):e._e(),i("el-input",{ref:"input",attrs:{value:e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label},on:{blur:e.handleBlur,focus:e.handleFocus,input:e.handleInput,change:e.handleInputChange},nativeOn:{keydown:[function(t){return!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.increase(t))},function(t){return!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.decrease(t))}]}})],1)},Pt=[];Lt._withStripped=!0;var Dt={bind:function(e,t,i){var n=null,r=void 0,o=function(){return i.context[t.expression].apply()},s=function(){Date.now()-r<100&&o(),clearInterval(n),n=null};Object(Ue["on"])(e,"mousedown",(function(e){0===e.button&&(r=Date.now(),Object(Ue["once"])(document,"mouseup",s),clearInterval(n),n=setInterval(o,100))}))}},Mt={name:"ElInputNumber",mixins:[K()("input")],inject:{elForm:{default:""},elFormItem:{default:""}},directives:{repeatClick:Dt},components:{ElInput:g.a},props:{step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String,placeholder:String,precision:{type:Number,validator:function(e){return e>=0&&e===parseInt(e,10)}}},data:function(){return{currentValue:0,userInput:null}},watch:{value:{immediate:!0,handler:function(e){var t=void 0===e?e:Number(e);if(void 0!==t){if(isNaN(t))return;if(this.stepStrictly){var i=this.getPrecision(this.step),n=Math.pow(10,i);t=Math.round(t/this.step)*n*this.step/n}void 0!==this.precision&&(t=this.toPrecision(t,this.precision))}t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),this.currentValue=t,this.userInput=null,this.$emit("input",t)}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},numPrecision:function(){var e=this.value,t=this.step,i=this.getPrecision,n=this.precision,r=i(t);return void 0!==n?(r>n&&console.warn("[Element Warn][InputNumber]precision should not be less than the decimal places of step"),n):Math.max(i(e),r)},controlsAtRight:function(){return this.controls&&"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputNumberDisabled:function(){return this.disabled||!!(this.elForm||{}).disabled},displayValue:function(){if(null!==this.userInput)return this.userInput;var e=this.currentValue;if("number"===typeof e){if(this.stepStrictly){var t=this.getPrecision(this.step),i=Math.pow(10,t);e=Math.round(e/this.step)*i*this.step/i}void 0!==this.precision&&(e=e.toFixed(this.precision))}return e}},methods:{toPrecision:function(e,t){return void 0===t&&(t=this.numPrecision),parseFloat(Math.round(e*Math.pow(10,t))/Math.pow(10,t))},getPrecision:function(e){if(void 0===e)return 0;var t=e.toString(),i=t.indexOf("."),n=0;return-1!==i&&(n=t.length-i-1),n},_increase:function(e,t){if("number"!==typeof e&&void 0!==e)return this.currentValue;var i=Math.pow(10,this.numPrecision);return this.toPrecision((i*e+i*t)/i)},_decrease:function(e,t){if("number"!==typeof e&&void 0!==e)return this.currentValue;var i=Math.pow(10,this.numPrecision);return this.toPrecision((i*e-i*t)/i)},increase:function(){if(!this.inputNumberDisabled&&!this.maxDisabled){var e=this.value||0,t=this._increase(e,this.step);this.setCurrentValue(t)}},decrease:function(){if(!this.inputNumberDisabled&&!this.minDisabled){var e=this.value||0,t=this._decrease(e,this.step);this.setCurrentValue(t)}},handleBlur:function(e){this.$emit("blur",e)},handleFocus:function(e){this.$emit("focus",e)},setCurrentValue:function(e){var t=this.currentValue;"number"===typeof e&&void 0!==this.precision&&(e=this.toPrecision(e,this.precision)),e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),t!==e&&(this.userInput=null,this.$emit("input",e),this.$emit("change",e,t),this.currentValue=e)},handleInput:function(e){this.userInput=e},handleInputChange:function(e){var t=""===e?void 0:Number(e);isNaN(t)&&""!==e||this.setCurrentValue(t),this.userInput=null},select:function(){this.$refs.input.select()}},mounted:function(){var e=this.$refs.input.$refs.input;e.setAttribute("role","spinbutton"),e.setAttribute("aria-valuemax",this.max),e.setAttribute("aria-valuemin",this.min),e.setAttribute("aria-valuenow",this.currentValue),e.setAttribute("aria-disabled",this.inputNumberDisabled)},updated:function(){if(this.$refs&&this.$refs.input){var e=this.$refs.input.$refs.input;e.setAttribute("aria-valuenow",this.currentValue)}}},xt=Mt,Bt=a(xt,Lt,Pt,!1,null,null,null);Bt.options.__file="packages/input-number/src/input-number.vue";var Ut=Bt.exports;Ut.install=function(e){e.component(Ut.name,Ut)};var Ft=Ut,Vt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"el-radio",class:[e.border&&e.radioSize?"el-radio--"+e.radioSize:"",{"is-disabled":e.isDisabled},{"is-focus":e.focus},{"is-bordered":e.border},{"is-checked":e.model===e.label}],attrs:{role:"radio","aria-checked":e.model===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.stopPropagation(),t.preventDefault(),e.model=e.isDisabled?e.model:e.label}}},[i("span",{staticClass:"el-radio__input",class:{"is-disabled":e.isDisabled,"is-checked":e.model===e.label}},[i("span",{staticClass:"el-radio__inner"}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],ref:"radio",staticClass:"el-radio__original",attrs:{type:"radio","aria-hidden":"true",name:e.name,disabled:e.isDisabled,tabindex:"-1",autocomplete:"off"},domProps:{value:e.label,checked:e._q(e.model,e.label)},on:{focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},change:[function(t){e.model=e.label},e.handleChange]}})]),i("span",{staticClass:"el-radio__label",on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])},jt=[];Vt._withStripped=!0;var Gt={name:"ElRadio",mixins:[w.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElRadio",props:{value:{},label:{},disabled:Boolean,name:String,border:Boolean,size:String},data:function(){return{focus:!1}},computed:{isGroup:function(){var e=this.$parent;while(e){if("ElRadioGroup"===e.$options.componentName)return this._radioGroup=e,!0;e=e.$parent}return!1},model:{get:function(){return this.isGroup?this._radioGroup.value:this.value},set:function(e){this.isGroup?this.dispatch("ElRadioGroup","input",[e]):this.$emit("input",e),this.$refs.radio&&(this.$refs.radio.checked=this.model===this.label)}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},radioSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._radioGroup.radioGroupSize||e},isDisabled:function(){return this.isGroup?this._radioGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this.isGroup&&this.model!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.model),e.isGroup&&e.dispatch("ElRadioGroup","handleChange",e.model)}))}}},Ht=Gt,Qt=a(Ht,Vt,jt,!1,null,null,null);Qt.options.__file="packages/radio/src/radio.vue";var Wt=Qt.exports;Wt.install=function(e){e.component(Wt.name,Wt)};var qt=Wt,$t=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e._elTag,{tag:"component",staticClass:"el-radio-group",attrs:{role:"radiogroup"},on:{keydown:e.handleKeydown}},[e._t("default")],2)},zt=[];$t._withStripped=!0;var Zt=Object.freeze({LEFT:37,UP:38,RIGHT:39,DOWN:40}),Yt={name:"ElRadioGroup",componentName:"ElRadioGroup",inject:{elFormItem:{default:""}},mixins:[w.a],props:{value:{},size:String,fill:String,textColor:String,disabled:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},_elTag:function(){var e=(this.$vnode.data||{}).tag;return e&&"component"!==e||(e="div"),e},radioGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},created:function(){var e=this;this.$on("handleChange",(function(t){e.$emit("change",t)}))},mounted:function(){var e=this.$el.querySelectorAll("[type=radio]"),t=this.$el.querySelectorAll("[role=radio]")[0];![].some.call(e,(function(e){return e.checked}))&&t&&(t.tabIndex=0)},methods:{handleKeydown:function(e){var t=e.target,i="INPUT"===t.nodeName?"[type=radio]":"[role=radio]",n=this.$el.querySelectorAll(i),r=n.length,o=[].indexOf.call(n,t),s=this.$el.querySelectorAll("[role=radio]");switch(e.keyCode){case Zt.LEFT:case Zt.UP:e.stopPropagation(),e.preventDefault(),0===o?(s[r-1].click(),s[r-1].focus()):(s[o-1].click(),s[o-1].focus());break;case Zt.RIGHT:case Zt.DOWN:o===r-1?(e.stopPropagation(),e.preventDefault(),s[0].click(),s[0].focus()):(s[o+1].click(),s[o+1].focus());break;default:break}}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[this.value])}}},Kt=Yt,Jt=a(Kt,$t,zt,!1,null,null,null);Jt.options.__file="packages/radio/src/radio-group.vue";var Xt=Jt.exports;Xt.install=function(e){e.component(Xt.name,Xt)};var ei=Xt,ti=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"el-radio-button",class:[e.size?"el-radio-button--"+e.size:"",{"is-active":e.value===e.label},{"is-disabled":e.isDisabled},{"is-focus":e.focus}],attrs:{role:"radio","aria-checked":e.value===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.stopPropagation(),t.preventDefault(),e.value=e.isDisabled?e.value:e.label}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"el-radio-button__orig-radio",attrs:{type:"radio",name:e.name,disabled:e.isDisabled,tabindex:"-1",autocomplete:"off"},domProps:{value:e.label,checked:e._q(e.value,e.label)},on:{change:[function(t){e.value=e.label},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}),i("span",{staticClass:"el-radio-button__inner",style:e.value===e.label?e.activeStyle:null,on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])},ii=[];ti._withStripped=!0;var ni={name:"ElRadioButton",mixins:[w.a],inject:{elForm:{default:""},elFormItem:{default:""}},props:{label:{},disabled:Boolean,name:String},data:function(){return{focus:!1}},computed:{value:{get:function(){return this._radioGroup.value},set:function(e){this._radioGroup.$emit("input",e)}},_radioGroup:function(){var e=this.$parent;while(e){if("ElRadioGroup"===e.$options.componentName)return e;e=e.$parent}return!1},activeStyle:function(){return{backgroundColor:this._radioGroup.fill||"",borderColor:this._radioGroup.fill||"",boxShadow:this._radioGroup.fill?"-1px 0 0 0 "+this._radioGroup.fill:"",color:this._radioGroup.textColor||""}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},size:function(){return this._radioGroup.radioGroupSize||this._elFormItemSize||(this.$ELEMENT||{}).size},isDisabled:function(){return this.disabled||this._radioGroup.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this._radioGroup&&this.value!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.dispatch("ElRadioGroup","handleChange",e.value)}))}}},ri=ni,oi=a(ri,ti,ii,!1,null,null,null);oi.options.__file="packages/radio/src/radio-button.vue";var si=oi.exports;si.install=function(e){e.component(si.name,si)};var ai=si,ci=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"el-checkbox",class:[e.border&&e.checkboxSize?"el-checkbox--"+e.checkboxSize:"",{"is-disabled":e.isDisabled},{"is-bordered":e.border},{"is-checked":e.isChecked}],attrs:{id:e.id}},[i("span",{staticClass:"el-checkbox__input",class:{"is-disabled":e.isDisabled,"is-checked":e.isChecked,"is-indeterminate":e.indeterminate,"is-focus":e.focus},attrs:{tabindex:!!e.indeterminate&&0,role:!!e.indeterminate&&"checkbox","aria-checked":!!e.indeterminate&&"mixed"}},[i("span",{staticClass:"el-checkbox__inner"}),e.trueLabel||e.falseLabel?i("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var i=e.model,n=t.target,r=n.checked?e.trueLabel:e.falseLabel;if(Array.isArray(i)){var o=null,s=e._i(i,o);n.checked?s<0&&(e.model=i.concat([o])):s>-1&&(e.model=i.slice(0,s).concat(i.slice(s+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var i=e.model,n=t.target,r=!!n.checked;if(Array.isArray(i)){var o=e.label,s=e._i(i,o);n.checked?s<0&&(e.model=i.concat([o])):s>-1&&(e.model=i.slice(0,s).concat(i.slice(s+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})]),e.$slots.default||e.label?i("span",{staticClass:"el-checkbox__label"},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])},li=[];ci._withStripped=!0;var ui={name:"ElCheckbox",mixins:[w.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):(this.$emit("input",e),this.selfModel=e)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){var e=this.$parent;while(e){if("ElCheckboxGroup"===e.$options.componentName)return this._checkboxGroup=e,!0;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var e=this._checkboxGroup,t=e.max,i=e.min;return!(!t&&!i)&&this.model.length>=t&&!this.isChecked||this.model.length<=i&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||e}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;if(!this.isLimitExceeded){var i=void 0;i=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",i,e),this.$nextTick((function(){t.isGroup&&t.dispatch("ElCheckboxGroup","change",[t._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}}},di=ui,hi=a(di,ci,li,!1,null,null,null);hi.options.__file="packages/checkbox/src/checkbox.vue";var pi=hi.exports;pi.install=function(e){e.component(pi.name,pi)};var fi=pi,gi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"el-checkbox-button",class:[e.size?"el-checkbox-button--"+e.size:"",{"is-disabled":e.isDisabled},{"is-checked":e.isChecked},{"is-focus":e.focus}],attrs:{role:"checkbox","aria-checked":e.isChecked,"aria-disabled":e.isDisabled}},[e.trueLabel||e.falseLabel?i("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox-button__original",attrs:{type:"checkbox",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var i=e.model,n=t.target,r=n.checked?e.trueLabel:e.falseLabel;if(Array.isArray(i)){var o=null,s=e._i(i,o);n.checked?s<0&&(e.model=i.concat([o])):s>-1&&(e.model=i.slice(0,s).concat(i.slice(s+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox-button__original",attrs:{type:"checkbox",name:e.name,disabled:e.isDisabled},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var i=e.model,n=t.target,r=!!n.checked;if(Array.isArray(i)){var o=e.label,s=e._i(i,o);n.checked?s<0&&(e.model=i.concat([o])):s>-1&&(e.model=i.slice(0,s).concat(i.slice(s+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}),e.$slots.default||e.label?i("span",{staticClass:"el-checkbox-button__inner",style:e.isChecked?e.activeStyle:null},[e._t("default",[e._v(e._s(e.label))])],2):e._e()])},mi=[];gi._withStripped=!0;var _i={name:"ElCheckboxButton",mixins:[w.a],inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},props:{value:{},label:{},disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number]},computed:{model:{get:function(){return this._checkboxGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this._checkboxGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):void 0!==this.value?this.$emit("input",e):this.selfModel=e}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},_checkboxGroup:function(){var e=this.$parent;while(e){if("ElCheckboxGroup"===e.$options.componentName)return e;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},activeStyle:function(){return{backgroundColor:this._checkboxGroup.fill||"",borderColor:this._checkboxGroup.fill||"",color:this._checkboxGroup.textColor||"","box-shadow":"-1px 0 0 0 "+this._checkboxGroup.fill}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},size:function(){return this._checkboxGroup.checkboxGroupSize||this._elFormItemSize||(this.$ELEMENT||{}).size},isLimitDisabled:function(){var e=this._checkboxGroup,t=e.max,i=e.min;return!(!t&&!i)&&this.model.length>=t&&!this.isChecked||this.model.length<=i&&this.isChecked},isDisabled:function(){return this._checkboxGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled}},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;if(!this.isLimitExceeded){var i=void 0;i=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",i,e),this.$nextTick((function(){t._checkboxGroup&&t.dispatch("ElCheckboxGroup","change",[t._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()}},vi=_i,Ei=a(vi,gi,mi,!1,null,null,null);Ei.options.__file="packages/checkbox/src/checkbox-button.vue";var Ai=Ei.exports;Ai.install=function(e){e.component(Ai.name,Ai)};var yi=Ai,Si=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-checkbox-group",attrs:{role:"group","aria-label":"checkbox-group"}},[e._t("default")],2)},Ci=[];Si._withStripped=!0;var bi={name:"ElCheckboxGroup",componentName:"ElCheckboxGroup",mixins:[w.a],inject:{elFormItem:{default:""}},props:{value:{},disabled:Boolean,min:Number,max:Number,size:String,fill:String,textColor:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[e])}}},Ti=bi,Ii=a(Ti,Si,Ci,!1,null,null,null);Ii.options.__file="packages/checkbox/src/checkbox-group.vue";var Ri=Ii.exports;Ri.install=function(e){e.component(Ri.name,Ri)};var wi=Ri,Oi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-switch",class:{"is-disabled":e.switchDisabled,"is-checked":e.checked},attrs:{role:"switch","aria-checked":e.checked,"aria-disabled":e.switchDisabled},on:{click:function(t){return t.preventDefault(),e.switchValue(t)}}},[i("input",{ref:"input",staticClass:"el-switch__input",attrs:{type:"checkbox",id:e.id,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:e.switchDisabled},on:{change:e.handleChange,keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.switchValue(t)}}}),e.inactiveIconClass||e.inactiveText?i("span",{class:["el-switch__label","el-switch__label--left",e.checked?"":"is-active"]},[e.inactiveIconClass?i("i",{class:[e.inactiveIconClass]}):e._e(),!e.inactiveIconClass&&e.inactiveText?i("span",{attrs:{"aria-hidden":e.checked}},[e._v(e._s(e.inactiveText))]):e._e()]):e._e(),i("span",{ref:"core",staticClass:"el-switch__core",style:{width:e.coreWidth+"px"}}),e.activeIconClass||e.activeText?i("span",{class:["el-switch__label","el-switch__label--right",e.checked?"is-active":""]},[e.activeIconClass?i("i",{class:[e.activeIconClass]}):e._e(),!e.activeIconClass&&e.activeText?i("span",{attrs:{"aria-hidden":!e.checked}},[e._v(e._s(e.activeText))]):e._e()]):e._e()])},ki=[];Oi._withStripped=!0;var Ni={name:"ElSwitch",mixins:[K()("input"),I.a,w.a],inject:{elForm:{default:""}},props:{value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:Number,default:40},activeIconClass:{type:String,default:""},inactiveIconClass:{type:String,default:""},activeText:String,inactiveText:String,activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String},data:function(){return{coreWidth:this.width}},created:function(){~[this.activeValue,this.inactiveValue].indexOf(this.value)||this.$emit("input",this.inactiveValue)},computed:{checked:function(){return this.value===this.activeValue},switchDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{checked:function(){this.$refs.input.checked=this.checked,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[this.value])}},methods:{handleChange:function(e){var t=this,i=this.checked?this.inactiveValue:this.activeValue;this.$emit("input",i),this.$emit("change",i),this.$nextTick((function(){t.$refs.input.checked=t.checked}))},setBackgroundColor:function(){var e=this.checked?this.activeColor:this.inactiveColor;this.$refs.core.style.borderColor=e,this.$refs.core.style.backgroundColor=e},switchValue:function(){!this.switchDisabled&&this.handleChange()},getMigratingConfig:function(){return{props:{"on-color":"on-color is renamed to active-color.","off-color":"off-color is renamed to inactive-color.","on-text":"on-text is renamed to active-text.","off-text":"off-text is renamed to inactive-text.","on-value":"on-value is renamed to active-value.","off-value":"off-value is renamed to inactive-value.","on-icon-class":"on-icon-class is renamed to active-icon-class.","off-icon-class":"off-icon-class is renamed to inactive-icon-class."}}}},mounted:function(){this.coreWidth=this.width||40,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.$refs.input.checked=this.checked}},Li=Ni,Pi=a(Li,Oi,ki,!1,null,null,null);Pi.options.__file="packages/switch/src/component.vue";var Di=Pi.exports;Di.install=function(e){e.component(Di.name,Di)};var Mi=Di,xi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[e.multiple?i("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?i("span",[i("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(t){e.deleteTag(t,e.selected[0])}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(e.selected[0].currentLabel))])]),e.selected.length>1?i("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[i("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e.collapseTags?e._e():i("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(t){return i("el-tag",{key:e.getValueKey(t),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:t.hitState,type:"info","disable-transitions":""},on:{close:function(i){e.deleteTag(i,t)}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.currentLabel))])])})),1),e.filterable?i("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(t){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){return!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(t)},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(t){t.target.composing||(e.query=t.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),i("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{type:"text",placeholder:e.currentPlaceholder,name:e.name,id:e.id,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur,input:e.debouncedOnInputChange},nativeOn:{keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}},[e.$slots.prefix?i("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),i("template",{slot:"suffix"},[i("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e.showClose?i("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),i("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[i("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[i("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?i("el-option",{attrs:{value:e.query,created:""}}):e._e(),e._t("default")],2),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):i("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)},Bi=[];xi._withStripped=!0;var Ui=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-select-dropdown el-popper",class:[{"is-multiple":e.$parent.multiple},e.popperClass],style:{minWidth:e.minWidth}},[e._t("default")],2)},Fi=[];Ui._withStripped=!0;var Vi={name:"ElSelectDropdown",componentName:"ElSelectDropdown",mixins:[H.a],props:{placement:{default:"bottom-start"},boundariesPadding:{default:0},popperOptions:{default:function(){return{gpuAcceleration:!1}}},visibleArrow:{default:!0},appendToBody:{type:Boolean,default:!0}},data:function(){return{minWidth:""}},computed:{popperClass:function(){return this.$parent.popperClass}},watch:{"$parent.inputWidth":function(){this.minWidth=this.$parent.$el.getBoundingClientRect().width+"px"}},mounted:function(){var e=this;this.referenceElm=this.$parent.$refs.reference.$el,this.$parent.popperElm=this.popperElm=this.$el,this.$on("updatePopper",(function(){e.$parent.visible&&e.updatePopper()})),this.$on("destroyPopper",this.destroyPopper)}},ji=Vi,Gi=a(ji,Ui,Fi,!1,null,null,null);Gi.options.__file="packages/select/src/select-dropdown.vue";var Hi=Gi.exports,Qi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[i("span",[e._v(e._s(e.currentLabel))])])],2)},Wi=[];Qi._withStripped=!0;var qi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$i={mixins:[w.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var i=this.select,n=i.remote,r=i.valueKey;if(!this.created&&!n){if(r&&"object"===("undefined"===typeof e?"undefined":qi(e))&&"object"===("undefined"===typeof t?"undefined":qi(t))&&e[r]===t[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,t){if(this.isObject){var i=this.select.valueKey;return Object(v["getValueByPath"])(e,i)===Object(v["getValueByPath"])(t,i)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var i=this.select.valueKey;return e&&e.some((function(e){return Object(v["getValueByPath"])(e,i)===Object(v["getValueByPath"])(t,i)}))}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(v["escapeRegexpString"])(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,t=e.selected,i=e.multiple,n=i?t:[t],r=this.select.cachedOptions.indexOf(this),o=n.indexOf(this);r>-1&&o<0&&this.select.cachedOptions.splice(r,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},zi=$i,Zi=a(zi,Qi,Wi,!1,null,null,null);Zi.options.__file="packages/select/src/option.vue";var Yi=Zi.exports,Ki=i(29),Ji=i.n(Ki),Xi=i(14),en=i(27),tn=i.n(en),nn={data:function(){return{hoverOption:-1}},computed:{optionsAllDisabled:function(){return this.options.filter((function(e){return e.visible})).every((function(e){return e.disabled}))}},watch:{hoverIndex:function(e){var t=this;"number"===typeof e&&e>-1&&(this.hoverOption=this.options[e]||{}),this.options.forEach((function(e){e.hover=t.hoverOption===e}))}},methods:{navigateOptions:function(e){var t=this;if(this.visible){if(0!==this.options.length&&0!==this.filteredOptionsCount&&!this.optionsAllDisabled){"next"===e?(this.hoverIndex++,this.hoverIndex===this.options.length&&(this.hoverIndex=0)):"prev"===e&&(this.hoverIndex--,this.hoverIndex<0&&(this.hoverIndex=this.options.length-1));var i=this.options[this.hoverIndex];!0!==i.disabled&&!0!==i.groupDisabled&&i.visible||this.navigateOptions(e),this.$nextTick((function(){return t.scrollToOption(t.hoverOption)}))}}else this.visible=!0}}},rn={mixins:[w.a,_.a,K()("reference"),nn],name:"ElSelect",componentName:"ElSelect",inject:{elForm:{default:""},elFormItem:{default:""}},provide:function(){return{select:this}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return!this.filterable||this.multiple||!Object(v["isIE"])()&&!Object(v["isEdge"])()&&!this.visible},showClose:function(){var e=this.multiple?Array.isArray(this.value)&&this.value.length>0:void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.selectDisabled&&this.inputHovering&&e;return t},iconClass:function(){return this.remote&&this.filterable?"":this.visible?"arrow-up is-reverse":"arrow-up"},debounce:function(){return this.remote?300:0},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):(!this.remote||""!==this.query||0!==this.options.length)&&(this.filterable&&this.query&&this.options.length>0&&0===this.filteredOptionsCount?this.noMatchText||this.t("el.select.noMatch"):0===this.options.length?this.noDataText||this.t("el.select.noData"):null)},showNewOption:function(){var e=this,t=this.options.filter((function(e){return!e.created})).some((function(t){return t.currentLabel===e.query}));return this.filterable&&this.allowCreate&&""!==this.query&&!t},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"},propPlaceholder:function(){return"undefined"!==typeof this.placeholder?this.placeholder:this.t("el.select.placeholder")}},components:{ElInput:g.a,ElSelectMenu:Hi,ElOption:Yi,ElTag:Ji.a,ElScrollbar:W.a},directives:{Clickoutside:F.a},props:{name:String,id:String,value:{required:!0},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},automaticDropdown:Boolean,size:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:String,remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String,required:!1},defaultFirstOption:Boolean,reserveKeyword:Boolean,valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{options:[],cachedOptions:[],createdLabel:null,createdSelected:!1,selected:this.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,cachedPlaceHolder:"",optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,currentPlaceholder:"",menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1}},watch:{selectDisabled:function(){var e=this;this.$nextTick((function(){e.resetInputHeight()}))},propPlaceholder:function(e){this.cachedPlaceHolder=this.currentPlaceholder=e},value:function(e,t){this.multiple&&(this.resetInputHeight(),e&&e.length>0||this.$refs.input&&""!==this.query?this.currentPlaceholder="":this.currentPlaceholder=this.cachedPlaceHolder,this.filterable&&!this.reserveKeyword&&(this.query="",this.handleQueryChange(this.query))),this.setSelected(),this.filterable&&!this.multiple&&(this.inputLength=20),Object(v["valueEquals"])(e,t)||this.dispatch("ElFormItem","el.form.change",e)},visible:function(e){var t=this;e?(this.broadcast("ElSelectDropdown","updatePopper"),this.filterable&&(this.query=this.remote?"":this.selectedLabel,this.handleQueryChange(this.query),this.multiple?this.$refs.input.focus():(this.remote||(this.broadcast("ElOption","queryChange",""),this.broadcast("ElOptionGroup","queryChange")),this.selectedLabel&&(this.currentPlaceholder=this.selectedLabel,this.selectedLabel="")))):(this.broadcast("ElSelectDropdown","destroyPopper"),this.$refs.input&&this.$refs.input.blur(),this.query="",this.previousQuery=null,this.selectedLabel="",this.inputLength=20,this.menuVisibleOnFocus=!1,this.resetHoverIndex(),this.$nextTick((function(){t.$refs.input&&""===t.$refs.input.value&&0===t.selected.length&&(t.currentPlaceholder=t.cachedPlaceHolder)})),this.multiple||(this.selected&&(this.filterable&&this.allowCreate&&this.createdSelected&&this.createdLabel?this.selectedLabel=this.createdLabel:this.selectedLabel=this.selected.currentLabel,this.filterable&&(this.query=this.selectedLabel)),this.filterable&&(this.currentPlaceholder=this.cachedPlaceHolder))),this.$emit("visible-change",e)},options:function(){var e=this;if(!this.$isServer){this.$nextTick((function(){e.broadcast("ElSelectDropdown","updatePopper")})),this.multiple&&this.resetInputHeight();var t=this.$el.querySelectorAll("input");-1===[].indexOf.call(t,document.activeElement)&&this.setSelected(),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}},methods:{handleComposition:function(e){var t=this,i=e.target.value;if("compositionend"===e.type)this.isOnComposition=!1,this.$nextTick((function(e){return t.handleQueryChange(i)}));else{var n=i[i.length-1]||"";this.isOnComposition=!Object(It["isKorean"])(n)}},handleQueryChange:function(e){var t=this;this.previousQuery===e||this.isOnComposition||(null!==this.previousQuery||"function"!==typeof this.filterMethod&&"function"!==typeof this.remoteMethod?(this.previousQuery=e,this.$nextTick((function(){t.visible&&t.broadcast("ElSelectDropdown","updatePopper")})),this.hoverIndex=-1,this.multiple&&this.filterable&&this.$nextTick((function(){var e=15*t.$refs.input.value.length+20;t.inputLength=t.collapseTags?Math.min(50,e):e,t.managePlaceholder(),t.resetInputHeight()})),this.remote&&"function"===typeof this.remoteMethod?(this.hoverIndex=-1,this.remoteMethod(e)):"function"===typeof this.filterMethod?(this.filterMethod(e),this.broadcast("ElOptionGroup","queryChange")):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",e),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()):this.previousQuery=e)},scrollToOption:function(e){var t=Array.isArray(e)&&e[0]?e[0].$el:e.$el;if(this.$refs.popper&&t){var i=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap");tn()(i,t)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()},handleMenuEnter:function(){var e=this;this.$nextTick((function(){return e.scrollToOption(e.selected)}))},emitChange:function(e){Object(v["valueEquals"])(this.value,e)||this.$emit("change",e)},getOption:function(e){for(var t=void 0,i="[object object]"===Object.prototype.toString.call(e).toLowerCase(),n="[object null]"===Object.prototype.toString.call(e).toLowerCase(),r="[object undefined]"===Object.prototype.toString.call(e).toLowerCase(),o=this.cachedOptions.length-1;o>=0;o--){var s=this.cachedOptions[o],a=i?Object(v["getValueByPath"])(s.value,this.valueKey)===Object(v["getValueByPath"])(e,this.valueKey):s.value===e;if(a){t=s;break}}if(t)return t;var c=i||n||r?"":String(e),l={value:e,currentLabel:c};return this.multiple&&(l.hitState=!1),l},setSelected:function(){var e=this;if(!this.multiple){var t=this.getOption(this.value);return t.created?(this.createdLabel=t.currentLabel,this.createdSelected=!0):this.createdSelected=!1,this.selectedLabel=t.currentLabel,this.selected=t,void(this.filterable&&(this.query=this.selectedLabel))}var i=[];Array.isArray(this.value)&&this.value.forEach((function(t){i.push(e.getOption(t))})),this.selected=i,this.$nextTick((function(){e.resetInputHeight()}))},handleFocus:function(e){this.softFocus?this.softFocus=!1:((this.automaticDropdown||this.filterable)&&(this.visible=!0,this.filterable&&(this.menuVisibleOnFocus=!0)),this.$emit("focus",e))},blur:function(){this.visible=!1,this.$refs.reference.blur()},handleBlur:function(e){var t=this;setTimeout((function(){t.isSilentBlur?t.isSilentBlur=!1:t.$emit("blur",e)}),50),this.softFocus=!1},handleClearClick:function(e){this.deleteSelected(e)},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},toggleLastOptionHitState:function(e){if(Array.isArray(this.selected)){var t=this.selected[this.selected.length-1];if(t)return!0===e||!1===e?(t.hitState=e,e):(t.hitState=!t.hitState,t.hitState)}},deletePrevTag:function(e){if(e.target.value.length<=0&&!this.toggleLastOptionHitState()){var t=this.value.slice();t.pop(),this.$emit("input",t),this.emitChange(t)}},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(e){8!==e.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var e=this;this.collapseTags&&!this.filterable||this.$nextTick((function(){if(e.$refs.reference){var t=e.$refs.reference.$el.childNodes,i=[].filter.call(t,(function(e){return"INPUT"===e.tagName}))[0],n=e.$refs.tags,r=n?Math.round(n.getBoundingClientRect().height):0,o=e.initialInputHeight||40;i.style.height=0===e.selected.length?o+"px":Math.max(n?r+(r>o?6:0):0,o)+"px",e.visible&&!1!==e.emptyText&&e.broadcast("ElSelectDropdown","updatePopper")}}))},resetHoverIndex:function(){var e=this;setTimeout((function(){e.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map((function(t){return e.options.indexOf(t)}))):e.hoverIndex=-1:e.hoverIndex=e.options.indexOf(e.selected)}),300)},handleOptionSelect:function(e,t){var i=this;if(this.multiple){var n=(this.value||[]).slice(),r=this.getValueIndex(n,e.value);r>-1?n.splice(r,1):(this.multipleLimit<=0||n.length<this.multipleLimit)&&n.push(e.value),this.$emit("input",n),this.emitChange(n),e.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else this.$emit("input",e.value),this.emitChange(e.value),this.visible=!1;this.isSilentBlur=t,this.setSoftFocus(),this.visible||this.$nextTick((function(){i.scrollToOption(e)}))},setSoftFocus:function(){this.softFocus=!0;var e=this.$refs.input||this.$refs.reference;e&&e.focus()},getValueIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],i="[object object]"===Object.prototype.toString.call(t).toLowerCase();if(i){var n=this.valueKey,r=-1;return e.some((function(e,i){return Object(v["getValueByPath"])(e,n)===Object(v["getValueByPath"])(t,n)&&(r=i,!0)})),r}return e.indexOf(t)},toggleMenu:function(){this.selectDisabled||(this.menuVisibleOnFocus?this.menuVisibleOnFocus=!1:this.visible=!this.visible,this.visible&&(this.$refs.input||this.$refs.reference).focus())},selectOption:function(){this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu()},deleteSelected:function(e){e.stopPropagation();var t=this.multiple?[]:"";this.$emit("input",t),this.emitChange(t),this.visible=!1,this.$emit("clear")},deleteTag:function(e,t){var i=this.selected.indexOf(t);if(i>-1&&!this.selectDisabled){var n=this.value.slice();n.splice(i,1),this.$emit("input",n),this.emitChange(n),this.$emit("remove-tag",t.value)}e.stopPropagation()},onInputChange:function(){this.filterable&&this.query!==this.selectedLabel&&(this.query=this.selectedLabel,this.handleQueryChange(this.query))},onOptionDestroy:function(e){e>-1&&(this.optionsCount--,this.filteredOptionsCount--,this.options.splice(e,1))},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},checkDefaultFirstOption:function(){this.hoverIndex=-1;for(var e=!1,t=this.options.length-1;t>=0;t--)if(this.options[t].created){e=!0,this.hoverIndex=t;break}if(!e)for(var i=0;i!==this.options.length;++i){var n=this.options[i];if(this.query){if(!n.disabled&&!n.groupDisabled&&n.visible){this.hoverIndex=i;break}}else if(n.itemSelected){this.hoverIndex=i;break}}},getValueKey:function(e){return"[object object]"!==Object.prototype.toString.call(e.value).toLowerCase()?e.value:Object(v["getValueByPath"])(e.value,this.valueKey)}},created:function(){var e=this;this.cachedPlaceHolder=this.currentPlaceholder=this.propPlaceholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.debouncedOnInputChange=B()(this.debounce,(function(){e.onInputChange()})),this.debouncedQueryChange=B()(this.debounce,(function(t){e.handleQueryChange(t.target.value)})),this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){var e=this;this.multiple&&Array.isArray(this.value)&&this.value.length>0&&(this.currentPlaceholder=""),Object(Xi["addResizeListener"])(this.$el,this.handleResize);var t=this.$refs.reference;if(t&&t.$el){var i={medium:36,small:32,mini:28},n=t.$el.querySelector("input");this.initialInputHeight=n.getBoundingClientRect().height||i[this.selectSize]}this.remote&&this.multiple&&this.resetInputHeight(),this.$nextTick((function(){t&&t.$el&&(e.inputWidth=t.$el.getBoundingClientRect().width)})),this.setSelected()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(Xi["removeResizeListener"])(this.$el,this.handleResize)}},on=rn,sn=a(on,xi,Bi,!1,null,null,null);sn.options.__file="packages/select/src/select.vue";var an=sn.exports;an.install=function(e){e.component(an.name,an)};var cn=an;Yi.install=function(e){e.component(Yi.name,Yi)};var ln=Yi,un=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-group__wrap"},[i("li",{staticClass:"el-select-group__title"},[e._v(e._s(e.label))]),i("li",[i("ul",{staticClass:"el-select-group"},[e._t("default")],2)])])},dn=[];un._withStripped=!0;var hn={mixins:[w.a],name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},data:function(){return{visible:!0}},watch:{disabled:function(e){this.broadcast("ElOption","handleGroupDisabled",e)}},methods:{queryChange:function(){this.visible=this.$children&&Array.isArray(this.$children)&&this.$children.some((function(e){return!0===e.visible}))}},created:function(){this.$on("queryChange",this.queryChange)},mounted:function(){this.disabled&&this.broadcast("ElOption","handleGroupDisabled",this.disabled)}},pn=hn,fn=a(pn,un,dn,!1,null,null,null);fn.options.__file="packages/select/src/option-group.vue";var gn=fn.exports;gn.install=function(e){e.component(gn.name,gn)};var mn=gn,_n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.buttonSize?"el-button--"+e.buttonSize:"",{"is-disabled":e.buttonDisabled,"is-loading":e.loading,"is-plain":e.plain,"is-round":e.round,"is-circle":e.circle}],attrs:{disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?i("i",{staticClass:"el-icon-loading"}):e._e(),e.icon&&!e.loading?i("i",{class:e.icon}):e._e(),e.$slots.default?i("span",[e._t("default")],2):e._e()])},vn=[];_n._withStripped=!0;var En={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(e){this.$emit("click",e)}}},An=En,yn=a(An,_n,vn,!1,null,null,null);yn.options.__file="packages/button/src/button.vue";var Sn=yn.exports;Sn.install=function(e){e.component(Sn.name,Sn)};var Cn=Sn,bn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-button-group"},[e._t("default")],2)},Tn=[];bn._withStripped=!0;var In={name:"ElButtonGroup"},Rn=In,wn=a(Rn,bn,Tn,!1,null,null,null);wn.options.__file="packages/button/src/button-group.vue";var On=wn.exports;On.install=function(e){e.component(On.name,On)};var kn=On,Nn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-table",class:[{"el-table--fit":e.fit,"el-table--striped":e.stripe,"el-table--border":e.border||e.isGroup,"el-table--hidden":e.isHidden,"el-table--group":e.isGroup,"el-table--fluid-height":e.maxHeight,"el-table--scrollable-x":e.layout.scrollX,"el-table--scrollable-y":e.layout.scrollY,"el-table--enable-row-hover":!e.store.states.isComplex,"el-table--enable-row-transition":0!==(e.store.states.data||[]).length&&(e.store.states.data||[]).length<100},e.tableSize?"el-table--"+e.tableSize:""],on:{mouseleave:function(t){e.handleMouseLeave(t)}}},[i("div",{ref:"hiddenColumns",staticClass:"hidden-columns"},[e._t("default")],2),e.showHeader?i("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"headerWrapper",staticClass:"el-table__header-wrapper"},[i("table-header",{ref:"tableHeader",style:{width:e.layout.bodyWidth?e.layout.bodyWidth+"px":""},attrs:{store:e.store,border:e.border,"default-sort":e.defaultSort}})],1):e._e(),i("div",{ref:"bodyWrapper",staticClass:"el-table__body-wrapper",class:[e.layout.scrollX?"is-scrolling-"+e.scrollPosition:"is-scrolling-none"],style:[e.bodyHeight]},[i("table-body",{style:{width:e.bodyWidth},attrs:{context:e.context,store:e.store,stripe:e.stripe,"row-class-name":e.rowClassName,"row-style":e.rowStyle,highlight:e.highlightCurrentRow}}),e.data&&0!==e.data.length?e._e():i("div",{ref:"emptyBlock",staticClass:"el-table__empty-block",style:e.emptyBlockStyle},[i("span",{staticClass:"el-table__empty-text"},[e._t("empty",[e._v(e._s(e.emptyText||e.t("el.table.emptyText")))])],2)]),e.$slots.append?i("div",{ref:"appendWrapper",staticClass:"el-table__append-wrapper"},[e._t("append")],2):e._e()],1),e.showSummary?i("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"},{name:"mousewheel",rawName:"v-mousewheel",value:e.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"footerWrapper",staticClass:"el-table__footer-wrapper"},[i("table-footer",{style:{width:e.layout.bodyWidth?e.layout.bodyWidth+"px":""},attrs:{store:e.store,border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,"default-sort":e.defaultSort}})],1):e._e(),e.fixedColumns.length>0?i("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"fixedWrapper",staticClass:"el-table__fixed",style:[{width:e.layout.fixedWidth?e.layout.fixedWidth+"px":""},e.fixedHeight]},[e.showHeader?i("div",{ref:"fixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[i("table-header",{ref:"fixedTableHeader",style:{width:e.bodyWidth},attrs:{fixed:"left",border:e.border,store:e.store}})],1):e._e(),i("div",{ref:"fixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:e.layout.headerHeight+"px"},e.fixedBodyHeight]},[i("table-body",{style:{width:e.bodyWidth},attrs:{fixed:"left",store:e.store,stripe:e.stripe,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"row-style":e.rowStyle}}),e.$slots.append?i("div",{staticClass:"el-table__append-gutter",style:{height:e.layout.appendHeight+"px"}}):e._e()],1),e.showSummary?i("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"}],ref:"fixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[i("table-footer",{style:{width:e.bodyWidth},attrs:{fixed:"left",border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,store:e.store}})],1):e._e()]):e._e(),e.rightFixedColumns.length>0?i("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"rightFixedWrapper",staticClass:"el-table__fixed-right",style:[{width:e.layout.rightFixedWidth?e.layout.rightFixedWidth+"px":"",right:e.layout.scrollY?(e.border?e.layout.gutterWidth:e.layout.gutterWidth||0)+"px":""},e.fixedHeight]},[e.showHeader?i("div",{ref:"rightFixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[i("table-header",{ref:"rightFixedTableHeader",style:{width:e.bodyWidth},attrs:{fixed:"right",border:e.border,store:e.store}})],1):e._e(),i("div",{ref:"rightFixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:e.layout.headerHeight+"px"},e.fixedBodyHeight]},[i("table-body",{style:{width:e.bodyWidth},attrs:{fixed:"right",store:e.store,stripe:e.stripe,"row-class-name":e.rowClassName,"row-style":e.rowStyle,highlight:e.highlightCurrentRow}}),e.$slots.append?i("div",{staticClass:"el-table__append-gutter",style:{height:e.layout.appendHeight+"px"}}):e._e()],1),e.showSummary?i("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"}],ref:"rightFixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[i("table-footer",{style:{width:e.bodyWidth},attrs:{fixed:"right",border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,store:e.store}})],1):e._e()]):e._e(),e.rightFixedColumns.length>0?i("div",{ref:"rightFixedPatch",staticClass:"el-table__fixed-right-patch",style:{width:e.layout.scrollY?e.layout.gutterWidth+"px":"0",height:e.layout.headerHeight+"px"}}):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.resizeProxyVisible,expression:"resizeProxyVisible"}],ref:"resizeProxy",staticClass:"el-table__column-resize-proxy"})])},Ln=[];Nn._withStripped=!0;var Pn=i(17),Dn=i.n(Pn),Mn=i(35),xn=i(38),Bn=i.n(xn),Un="undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Fn=function(e,t){e&&e.addEventListener&&e.addEventListener(Un?"DOMMouseScroll":"mousewheel",(function(e){var i=Bn()(e);t&&t.apply(this,[e,i])}))},Vn={bind:function(e,t){Fn(e,t.value)}},jn=i(6),Gn=i.n(jn),Hn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qn=function(e){var t=e.target;while(t&&"HTML"!==t.tagName.toUpperCase()){if("TD"===t.tagName.toUpperCase())return t;t=t.parentNode}return null},Wn=function(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":Hn(e))},qn=function(e,t,i,n,r){if(!t&&!n&&(!r||Array.isArray(r)&&!r.length))return e;i="string"===typeof i?"descending"===i?-1:1:i&&i<0?-1:1;var o=n?null:function(i,n){return r?(Array.isArray(r)||(r=[r]),r.map((function(t){return"string"===typeof t?Object(v["getValueByPath"])(i,t):t(i,n,e)}))):("$key"!==t&&Wn(i)&&"$value"in i&&(i=i.$value),[Wn(i)?Object(v["getValueByPath"])(i,t):i])},s=function(e,t){if(n)return n(e.value,t.value);for(var i=0,r=e.key.length;i<r;i++){if(e.key[i]<t.key[i])return-1;if(e.key[i]>t.key[i])return 1}return 0};return e.map((function(e,t){return{value:e,index:t,key:o?o(e,t):null}})).sort((function(e,t){var n=s(e,t);return n||(n=e.index-t.index),n*i})).map((function(e){return e.value}))},$n=function(e,t){var i=null;return e.columns.forEach((function(e){e.id===t&&(i=e)})),i},zn=function(e,t){for(var i=null,n=0;n<e.columns.length;n++){var r=e.columns[n];if(r.columnKey===t){i=r;break}}return i},Zn=function(e,t){var i=(t.className||"").match(/el-table_[^\s]+/gm);return i?$n(e,i[0]):null},Yn=function(e,t){if(!e)throw new Error("row is required when get row identity");if("string"===typeof t){if(t.indexOf(".")<0)return e[t];for(var i=t.split("."),n=e,r=0;r<i.length;r++)n=n[i[r]];return n}if("function"===typeof t)return t.call(null,e)},Kn=function(e,t){var i={};return(e||[]).forEach((function(e,n){i[Yn(e,t)]={row:e,index:n}})),i};function Jn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xn(e,t){var i={},n=void 0;for(n in e)i[n]=e[n];for(n in t)if(Jn(t,n)){var r=t[n];"undefined"!==typeof r&&(i[n]=r)}return i}function er(e){return void 0!==e&&(e=parseInt(e,10),isNaN(e)&&(e=null)),e}function tr(e){return"undefined"!==typeof e&&(e=er(e),isNaN(e)&&(e=80)),e}function ir(e){return"number"===typeof e?e:"string"===typeof e?/^\d+(?:px)?$/.test(e)?parseInt(e,10):e:null}function nr(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function rr(e,t,i){var n=!1,r=e.indexOf(t),o=-1!==r,s=function(){e.push(t),n=!0},a=function(){e.splice(r,1),n=!0};return"boolean"===typeof i?i&&!o?s():!i&&o&&a():o?a():s(),n}function or(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hasChildren",r=function(e){return!(Array.isArray(e)&&e.length)};function o(e,s,a){t(e,s,a),s.forEach((function(e){if(e[n])t(e,null,a+1);else{var s=e[i];r(s)||o(e,s,a+1)}}))}e.forEach((function(e){if(e[n])t(e,null,0);else{var s=e[i];r(s)||o(e,s,0)}}))}var sr={data:function(){return{states:{defaultExpandAll:!1,expandRows:[]}}},methods:{updateExpandRows:function(){var e=this.states,t=e.data,i=void 0===t?[]:t,n=e.rowKey,r=e.defaultExpandAll,o=e.expandRows;if(r)this.states.expandRows=i.slice();else if(n){var s=Kn(o,n);this.states.expandRows=i.reduce((function(e,t){var i=Yn(t,n),r=s[i];return r&&e.push(t),e}),[])}else this.states.expandRows=[]},toggleRowExpansion:function(e,t){var i=rr(this.states.expandRows,e,t);i&&(this.table.$emit("expand-change",e,this.states.expandRows.slice()),this.scheduleLayout())},setExpandRowKeys:function(e){this.assertRowKey();var t=this.states,i=t.data,n=t.rowKey,r=Kn(i,n);this.states.expandRows=e.reduce((function(e,t){var i=r[t];return i&&e.push(i.row),e}),[])},isRowExpanded:function(e){var t=this.states,i=t.expandRows,n=void 0===i?[]:i,r=t.rowKey;if(r){var o=Kn(n,r);return!!o[Yn(e,r)]}return-1!==n.indexOf(e)}}},ar={data:function(){return{states:{_currentRowKey:null,currentRow:null}}},methods:{setCurrentRowKey:function(e){this.assertRowKey(),this.states._currentRowKey=e,this.setCurrentRowByKey(e)},restoreCurrentRowKey:function(){this.states._currentRowKey=null},setCurrentRowByKey:function(e){var t=this.states,i=t.data,n=void 0===i?[]:i,r=t.rowKey,o=null;r&&(o=Object(v["arrayFind"])(n,(function(t){return Yn(t,r)===e}))),t.currentRow=o},updateCurrentRow:function(e){var t=this.states,i=this.table,n=t.currentRow;if(e&&e!==n)return t.currentRow=e,void i.$emit("current-change",e,n);!e&&n&&(t.currentRow=null,i.$emit("current-change",null,n))},updateCurrentRowData:function(){var e=this.states,t=this.table,i=e.rowKey,n=e._currentRowKey,r=e.data||[],o=e.currentRow;if(-1===r.indexOf(o)&&o){if(i){var s=Yn(o,i);this.setCurrentRowByKey(s)}else e.currentRow=null;null===e.currentRow&&t.$emit("current-change",null,o)}else n&&(this.setCurrentRowByKey(n),this.restoreCurrentRowKey())}}},cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},lr={data:function(){return{states:{expandRowKeys:[],treeData:{},indent:16,lazy:!1,lazyTreeNodeMap:{},lazyColumnIdentifier:"hasChildren",childrenColumnName:"children"}}},computed:{normalizedData:function(){if(!this.states.rowKey)return{};var e=this.states.data||[];return this.normalize(e)},normalizedLazyNode:function(){var e=this.states,t=e.rowKey,i=e.lazyTreeNodeMap,n=e.lazyColumnIdentifier,r=Object.keys(i),o={};return r.length?(r.forEach((function(e){if(i[e].length){var r={children:[]};i[e].forEach((function(e){var i=Yn(e,t);r.children.push(i),e[n]&&!o[i]&&(o[i]={children:[]})})),o[e]=r}})),o):o}},watch:{normalizedData:"updateTreeData",normalizedLazyNode:"updateTreeData"},methods:{normalize:function(e){var t=this.states,i=t.childrenColumnName,n=t.lazyColumnIdentifier,r=t.rowKey,o=t.lazy,s={};return or(e,(function(e,t,i){var n=Yn(e,r);Array.isArray(t)?s[n]={children:t.map((function(e){return Yn(e,r)})),level:i}:o&&(s[n]={children:[],lazy:!0,level:i})}),i,n),s},updateTreeData:function(){var e=this.normalizedData,t=this.normalizedLazyNode,i=Object.keys(e),n={};if(i.length){var r=this.states,o=r.treeData,s=r.defaultExpandAll,a=r.expandRowKeys,c=r.lazy,l=[],u=function(e,t){var i=s||a&&-1!==a.indexOf(t);return!!(e&&e.expanded||i)};i.forEach((function(t){var i=o[t],r=cr({},e[t]);if(r.expanded=u(i,t),r.lazy){var s=i||{},a=s.loaded,c=void 0!==a&&a,d=s.loading,h=void 0!==d&&d;r.loaded=!!c,r.loading=!!h,l.push(t)}n[t]=r}));var d=Object.keys(t);c&&d.length&&l.length&&d.forEach((function(e){var i=o[e],r=t[e].children;if(-1!==l.indexOf(e)){if(0!==n[e].children.length)throw new Error("[ElTable]children must be an empty array.");n[e].children=r}else{var s=i||{},a=s.loaded,c=void 0!==a&&a,d=s.loading,h=void 0!==d&&d;n[e]={lazy:!0,loaded:!!c,loading:!!h,expanded:u(i,e),children:r,level:""}}}))}this.states.treeData=n,this.updateTableScrollY()},updateTreeExpandKeys:function(e){this.states.expandRowKeys=e,this.updateTreeData()},toggleTreeExpansion:function(e,t){this.assertRowKey();var i=this.states,n=i.rowKey,r=i.treeData,o=Yn(e,n),s=o&&r[o];if(o&&s&&"expanded"in s){var a=s.expanded;t="undefined"===typeof t?!s.expanded:t,r[o].expanded=t,a!==t&&this.table.$emit("expand-change",e,t),this.updateTableScrollY()}},loadOrToggle:function(e){this.assertRowKey();var t=this.states,i=t.lazy,n=t.treeData,r=t.rowKey,o=Yn(e,r),s=n[o];i&&s&&"loaded"in s&&!s.loaded?this.loadData(e,o,s):this.toggleTreeExpansion(e)},loadData:function(e,t,i){var n=this,r=this.table.load,o=this.states.treeData;r&&!o[t].loaded&&(o[t].loading=!0,r(e,i,(function(i){if(!Array.isArray(i))throw new Error("[ElTable] data must be an array");var r=n.states,o=r.lazyTreeNodeMap,s=r.treeData;s[t].loading=!1,s[t].loaded=!0,s[t].expanded=!0,i.length&&n.$set(o,t,i),n.table.$emit("expand-change",e,!0)})))}}},ur=function(e,t){var i=t.sortingColumn;return i&&"string"!==typeof i.sortable?qn(e,t.sortProp,t.sortOrder,i.sortMethod,i.sortBy):e},dr=function e(t){var i=[];return t.forEach((function(t){t.children?i.push.apply(i,e(t.children)):i.push(t)})),i},hr=Gn.a.extend({data:function(){return{states:{rowKey:null,data:[],isComplex:!1,_columns:[],originColumns:[],columns:[],fixedColumns:[],rightFixedColumns:[],leafColumns:[],fixedLeafColumns:[],rightFixedLeafColumns:[],leafColumnsLength:0,fixedLeafColumnsLength:0,rightFixedLeafColumnsLength:0,isAllSelected:!1,selection:[],reserveSelection:!1,selectOnIndeterminate:!1,selectable:null,filters:{},filteredData:null,sortingColumn:null,sortProp:null,sortOrder:null,hoverRow:null}}},mixins:[sr,ar,lr],methods:{assertRowKey:function(){var e=this.states.rowKey;if(!e)throw new Error("[ElTable] prop row-key is required")},updateColumns:function(){var e=this.states,t=e._columns||[];e.fixedColumns=t.filter((function(e){return!0===e.fixed||"left"===e.fixed})),e.rightFixedColumns=t.filter((function(e){return"right"===e.fixed})),e.fixedColumns.length>0&&t[0]&&"selection"===t[0].type&&!t[0].fixed&&(t[0].fixed=!0,e.fixedColumns.unshift(t[0]));var i=t.filter((function(e){return!e.fixed}));e.originColumns=[].concat(e.fixedColumns).concat(i).concat(e.rightFixedColumns);var n=dr(i),r=dr(e.fixedColumns),o=dr(e.rightFixedColumns);e.leafColumnsLength=n.length,e.fixedLeafColumnsLength=r.length,e.rightFixedLeafColumnsLength=o.length,e.columns=[].concat(r).concat(n).concat(o),e.isComplex=e.fixedColumns.length>0||e.rightFixedColumns.length>0},scheduleLayout:function(e){e&&this.updateColumns(),this.table.debouncedUpdateLayout()},isSelected:function(e){var t=this.states.selection,i=void 0===t?[]:t;return i.indexOf(e)>-1},clearSelection:function(){var e=this.states;e.isAllSelected=!1;var t=e.selection;t.length&&(e.selection=[],this.table.$emit("selection-change",[]))},cleanSelection:function(){var e=this.states,t=e.data,i=e.rowKey,n=e.selection,r=void 0;if(i){r=[];var o=Kn(n,i),s=Kn(t,i);for(var a in o)o.hasOwnProperty(a)&&!s[a]&&r.push(o[a].row)}else r=n.filter((function(e){return-1===t.indexOf(e)}));if(r.length){var c=n.filter((function(e){return-1===r.indexOf(e)}));e.selection=c,this.table.$emit("selection-change",c.slice())}},toggleRowSelection:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=rr(this.states.selection,e,t);if(n){var r=(this.states.selection||[]).slice();i&&this.table.$emit("select",r,e),this.table.$emit("selection-change",r)}},_toggleAllSelection:function(){var e=this.states,t=e.data,i=void 0===t?[]:t,n=e.selection,r=e.selectOnIndeterminate?!e.isAllSelected:!(e.isAllSelected||n.length);e.isAllSelected=r;var o=!1;i.forEach((function(t,i){e.selectable?e.selectable.call(null,t,i)&&rr(n,t,r)&&(o=!0):rr(n,t,r)&&(o=!0)})),o&&this.table.$emit("selection-change",n?n.slice():[]),this.table.$emit("select-all",n)},updateSelectionByRowKey:function(){var e=this.states,t=e.selection,i=e.rowKey,n=e.data,r=Kn(t,i);n.forEach((function(e){var n=Yn(e,i),o=r[n];o&&(t[o.index]=e)}))},updateAllSelected:function(){var e=this.states,t=e.selection,i=e.rowKey,n=e.selectable,r=e.data||[];if(0!==r.length){var o=void 0;i&&(o=Kn(t,i));for(var s=function(e){return o?!!o[Yn(e,i)]:-1!==t.indexOf(e)},a=!0,c=0,l=0,u=r.length;l<u;l++){var d=r[l],h=n&&n.call(null,d,l);if(s(d))c++;else if(!n||h){a=!1;break}}0===c&&(a=!1),e.isAllSelected=a}else e.isAllSelected=!1},updateFilters:function(e,t){Array.isArray(e)||(e=[e]);var i=this.states,n={};return e.forEach((function(e){i.filters[e.id]=t,n[e.columnKey||e.id]=t})),n},updateSort:function(e,t,i){this.states.sortingColumn&&this.states.sortingColumn!==e&&(this.states.sortingColumn.order=null),this.states.sortingColumn=e,this.states.sortProp=t,this.states.sortOrder=i},execFilter:function(){var e=this,t=this.states,i=t._data,n=t.filters,r=i;Object.keys(n).forEach((function(i){var n=t.filters[i];if(n&&0!==n.length){var o=$n(e.states,i);o&&o.filterMethod&&(r=r.filter((function(e){return n.some((function(t){return o.filterMethod.call(null,t,e,o)}))})))}})),t.filteredData=r},execSort:function(){var e=this.states;e.data=ur(e.filteredData,e)},execQuery:function(e){e&&e.filter||this.execFilter(),this.execSort()},clearFilter:function(e){var t=this.states,i=this.table.$refs,n=i.tableHeader,r=i.fixedTableHeader,o=i.rightFixedTableHeader,s={};n&&(s=Tt()(s,n.filterPanels)),r&&(s=Tt()(s,r.filterPanels)),o&&(s=Tt()(s,o.filterPanels));var a=Object.keys(s);if(a.length)if("string"===typeof e&&(e=[e]),Array.isArray(e)){var c=e.map((function(e){return zn(t,e)}));a.forEach((function(e){var t=c.find((function(t){return t.id===e}));t&&(s[e].filteredValue=[])})),this.commit("filterChange",{column:c,values:[],silent:!0,multi:!0})}else a.forEach((function(e){s[e].filteredValue=[]})),t.filters={},this.commit("filterChange",{column:{},values:[],silent:!0})},clearSort:function(){var e=this.states;e.sortingColumn&&(this.updateSort(null,null,null),this.commit("changeSortCondition",{silent:!0}))},setExpandRowKeysAdapter:function(e){this.setExpandRowKeys(e),this.updateTreeExpandKeys(e)},toggleRowExpansionAdapter:function(e,t){var i=this.states.columns.some((function(e){var t=e.type;return"expand"===t}));i?this.toggleRowExpansion(e,t):this.toggleTreeExpansion(e,t)}}});hr.prototype.mutations={setData:function(e,t){var i=e._data!==t;e._data=t,this.execQuery(),this.updateCurrentRowData(),this.updateExpandRows(),e.reserveSelection?(this.assertRowKey(),this.updateSelectionByRowKey()):i?this.clearSelection():this.cleanSelection(),this.updateAllSelected(),this.updateTableScrollY()},insertColumn:function(e,t,i,n){var r=e._columns;n&&(r=n.children,r||(r=n.children=[])),"undefined"!==typeof i?r.splice(i,0,t):r.push(t),"selection"===t.type&&(e.selectable=t.selectable,e.reserveSelection=t.reserveSelection),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},removeColumn:function(e,t,i){var n=e._columns;i&&(n=i.children,n||(n=i.children=[])),n&&n.splice(n.indexOf(t),1),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},sort:function(e,t){var i=t.prop,n=t.order,r=t.init;if(i){var o=Object(v["arrayFind"])(e.columns,(function(e){return e.property===i}));o&&(o.order=n,this.updateSort(o,i,n),this.commit("changeSortCondition",{init:r}))}},changeSortCondition:function(e,t){var i=e.sortingColumn,n=e.sortProp,r=e.sortOrder;null===r&&(e.sortingColumn=null,e.sortProp=null);var o={filter:!0};this.execQuery(o),t&&(t.silent||t.init)||this.table.$emit("sort-change",{column:i,prop:n,order:r}),this.updateTableScrollY()},filterChange:function(e,t){var i=t.column,n=t.values,r=t.silent,o=this.updateFilters(i,n);this.execQuery(),r||this.table.$emit("filter-change",o),this.updateTableScrollY()},toggleAllSelection:function(){this.toggleAllSelection()},rowSelectedChanged:function(e,t){this.toggleRowSelection(t),this.updateAllSelected()},setHoverRow:function(e,t){e.hoverRow=t},setCurrentRow:function(e,t){this.updateCurrentRow(t)}},hr.prototype.commit=function(e){var t=this.mutations;if(!t[e])throw new Error("Action not found: "+e);for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];t[e].apply(this,[this.states].concat(n))},hr.prototype.updateTableScrollY=function(){Gn.a.nextTick(this.table.updateScrollY)};var pr=hr;function fr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Table is required.");var i=new pr;return i.table=e,i.toggleAllSelection=B()(10,i._toggleAllSelection),Object.keys(t).forEach((function(e){i.states[e]=t[e]})),i}function gr(e){var t={};return Object.keys(e).forEach((function(i){var n=e[i],r=void 0;"string"===typeof n?r=function(){return this.store.states[n]}:"function"===typeof n?r=function(){return n.call(this,this.store.states)}:console.error("invalid value type"),r&&(t[i]=r)})),t}var mr=i(30),_r=i.n(mr);function vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Er=function(){function e(t){for(var i in vr(this,e),this.observers=[],this.table=null,this.store=null,this.columns=null,this.fit=!0,this.showHeader=!0,this.height=null,this.scrollX=!1,this.scrollY=!1,this.bodyWidth=null,this.fixedWidth=null,this.rightFixedWidth=null,this.tableHeight=null,this.headerHeight=44,this.appendHeight=0,this.footerHeight=44,this.viewportHeight=null,this.bodyHeight=null,this.fixedBodyHeight=null,this.gutterWidth=_r()(),t)t.hasOwnProperty(i)&&(this[i]=t[i]);if(!this.table)throw new Error("table is required for Table Layout");if(!this.store)throw new Error("store is required for Table Layout")}return e.prototype.updateScrollY=function(){var e=this.height;if(null===e)return!1;var t=this.table.bodyWrapper;if(this.table.$el&&t){var i=t.querySelector(".el-table__body"),n=this.scrollY,r=i.offsetHeight>this.bodyHeight;return this.scrollY=r,n!==r}return!1},e.prototype.setHeight=function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"height";if(!Gn.a.prototype.$isServer){var n=this.table.$el;if(e=ir(e),this.height=e,!n&&(e||0===e))return Gn.a.nextTick((function(){return t.setHeight(e,i)}));"number"===typeof e?(n.style[i]=e+"px",this.updateElsHeight()):"string"===typeof e&&(n.style[i]=e,this.updateElsHeight())}},e.prototype.setMaxHeight=function(e){this.setHeight(e,"max-height")},e.prototype.getFlattenColumns=function(){var e=[],t=this.table.columns;return t.forEach((function(t){t.isColumnGroup?e.push.apply(e,t.columns):e.push(t)})),e},e.prototype.updateElsHeight=function(){var e=this;if(!this.table.$ready)return Gn.a.nextTick((function(){return e.updateElsHeight()}));var t=this.table.$refs,i=t.headerWrapper,n=t.appendWrapper,r=t.footerWrapper;if(this.appendHeight=n?n.offsetHeight:0,!this.showHeader||i){var o=i?i.querySelector(".el-table__header tr"):null,s=this.headerDisplayNone(o),a=this.headerHeight=this.showHeader?i.offsetHeight:0;if(this.showHeader&&!s&&i.offsetWidth>0&&(this.table.columns||[]).length>0&&a<2)return Gn.a.nextTick((function(){return e.updateElsHeight()}));var c=this.tableHeight=this.table.$el.clientHeight,l=this.footerHeight=r?r.offsetHeight:0;null!==this.height&&(this.bodyHeight=c-a-l+(r?1:0)),this.fixedBodyHeight=this.scrollX?this.bodyHeight-this.gutterWidth:this.bodyHeight;var u=!(this.store.states.data&&this.store.states.data.length);this.viewportHeight=this.scrollX?c-(u?0:this.gutterWidth):c,this.updateScrollY(),this.notifyObservers("scrollable")}},e.prototype.headerDisplayNone=function(e){if(!e)return!0;var t=e;while("DIV"!==t.tagName){if("none"===getComputedStyle(t).display)return!0;t=t.parentElement}return!1},e.prototype.updateColumnsWidth=function(){if(!Gn.a.prototype.$isServer){var e=this.fit,t=this.table.$el.clientWidth,i=0,n=this.getFlattenColumns(),r=n.filter((function(e){return"number"!==typeof e.width}));if(n.forEach((function(e){"number"===typeof e.width&&e.realWidth&&(e.realWidth=null)})),r.length>0&&e){n.forEach((function(e){i+=e.width||e.minWidth||80}));var o=this.scrollY?this.gutterWidth:0;if(i<=t-o){this.scrollX=!1;var s=t-o-i;if(1===r.length)r[0].realWidth=(r[0].minWidth||80)+s;else{var a=r.reduce((function(e,t){return e+(t.minWidth||80)}),0),c=s/a,l=0;r.forEach((function(e,t){if(0!==t){var i=Math.floor((e.minWidth||80)*c);l+=i,e.realWidth=(e.minWidth||80)+i}})),r[0].realWidth=(r[0].minWidth||80)+s-l}}else this.scrollX=!0,r.forEach((function(e){e.realWidth=e.minWidth}));this.bodyWidth=Math.max(i,t),this.table.resizeState.width=this.bodyWidth}else n.forEach((function(e){e.width||e.minWidth?e.realWidth=e.width||e.minWidth:e.realWidth=80,i+=e.realWidth})),this.scrollX=i>t,this.bodyWidth=i;var u=this.store.states.fixedColumns;if(u.length>0){var d=0;u.forEach((function(e){d+=e.realWidth||e.width})),this.fixedWidth=d}var h=this.store.states.rightFixedColumns;if(h.length>0){var p=0;h.forEach((function(e){p+=e.realWidth||e.width})),this.rightFixedWidth=p}this.notifyObservers("columns")}},e.prototype.addObserver=function(e){this.observers.push(e)},e.prototype.removeObserver=function(e){var t=this.observers.indexOf(e);-1!==t&&this.observers.splice(t,1)},e.prototype.notifyObservers=function(e){var t=this,i=this.observers;i.forEach((function(i){switch(e){case"columns":i.onColumnsChange(t);break;case"scrollable":i.onScrollableChange(t);break;default:throw new Error("Table Layout don't have event "+e+".")}}))},e}(),Ar=Er,yr={created:function(){this.tableLayout.addObserver(this)},destroyed:function(){this.tableLayout.removeObserver(this)},computed:{tableLayout:function(){var e=this.layout;if(!e&&this.table&&(e=this.table.layout),!e)throw new Error("Can not find table layout.");return e}},mounted:function(){this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout)},updated:function(){this.__updated__||(this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout),this.__updated__=!0)},methods:{onColumnsChange:function(e){var t=this.$el.querySelectorAll("colgroup > col");if(t.length){var i=e.getFlattenColumns(),n={};i.forEach((function(e){n[e.id]=e}));for(var r=0,o=t.length;r<o;r++){var s=t[r],a=s.getAttribute("name"),c=n[a];c&&s.setAttribute("width",c.realWidth||c.width)}}},onScrollableChange:function(e){for(var t=this.$el.querySelectorAll("colgroup > col[name=gutter]"),i=0,n=t.length;i<n;i++){var r=t[i];r.setAttribute("width",e.scrollY?e.gutterWidth:"0")}for(var o=this.$el.querySelectorAll("th.gutter"),s=0,a=o.length;s<a;s++){var c=o[s];c.style.width=e.scrollY?e.gutterWidth+"px":"0",c.style.display=e.scrollY?"":"none"}}}},Sr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},br={name:"ElTableBody",mixins:[yr],components:{ElCheckbox:Dn.a,ElTooltip:rt.a},props:{store:{required:!0},stripe:Boolean,context:{},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:String,highlight:Boolean},render:function(e){var t=this,i=this.data||[];return e("table",{class:"el-table__body",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(t){return e("col",{attrs:{name:t.id},key:t.id})}))]),e("tbody",[i.reduce((function(e,i){return e.concat(t.wrappedRowRender(i,e.length))}),[]),e("el-tooltip",{attrs:{effect:this.table.tooltipEffect,placement:"top",content:this.tooltipContent},ref:"tooltip"})])])},computed:Cr({table:function(){return this.$parent}},gr({data:"data",columns:"columns",treeIndent:"indent",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length},hasExpandColumn:function(e){return e.columns.some((function(e){var t=e.type;return"expand"===t}))}}),{firstDefaultColumnIndex:function(){return Object(v["arrayFindIndex"])(this.columns,(function(e){var t=e.type;return"default"===t}))}}),watch:{"store.states.hoverRow":function(e,t){var i=this;if(this.store.states.isComplex&&!this.$isServer){var n=window.requestAnimationFrame;n||(n=function(e){return setTimeout(e,16)}),n((function(){var n=i.$el.querySelectorAll(".el-table__row"),r=n[t],o=n[e];r&&Object(Ue["removeClass"])(r,"hover-row"),o&&Object(Ue["addClass"])(o,"hover-row")}))}}},data:function(){return{tooltipContent:""}},created:function(){this.activateTooltip=B()(50,(function(e){return e.handleShowPopper()}))},methods:{getKeyOfRow:function(e,t){var i=this.table.rowKey;return i?Yn(e,i):t},isColumnHidden:function(e){return!0===this.fixed||"left"===this.fixed?e>=this.leftFixedLeafCount:"right"===this.fixed?e<this.columnsCount-this.rightFixedLeafCount:e<this.leftFixedLeafCount||e>=this.columnsCount-this.rightFixedLeafCount},getSpan:function(e,t,i,n){var r=1,o=1,s=this.table.spanMethod;if("function"===typeof s){var a=s({row:e,column:t,rowIndex:i,columnIndex:n});Array.isArray(a)?(r=a[0],o=a[1]):"object"===("undefined"===typeof a?"undefined":Sr(a))&&(r=a.rowspan,o=a.colspan)}return{rowspan:r,colspan:o}},getRowStyle:function(e,t){var i=this.table.rowStyle;return"function"===typeof i?i.call(null,{row:e,rowIndex:t}):i||null},getRowClass:function(e,t){var i=["el-table__row"];this.table.highlightCurrentRow&&e===this.store.states.currentRow&&i.push("current-row"),this.stripe&&t%2===1&&i.push("el-table__row--striped");var n=this.table.rowClassName;return"string"===typeof n?i.push(n):"function"===typeof n&&i.push(n.call(null,{row:e,rowIndex:t})),this.store.states.expandRows.indexOf(e)>-1&&i.push("expanded"),i},getCellStyle:function(e,t,i,n){var r=this.table.cellStyle;return"function"===typeof r?r.call(null,{rowIndex:e,columnIndex:t,row:i,column:n}):r},getCellClass:function(e,t,i,n){var r=[n.id,n.align,n.className];this.isColumnHidden(t)&&r.push("is-hidden");var o=this.table.cellClassName;return"string"===typeof o?r.push(o):"function"===typeof o&&r.push(o.call(null,{rowIndex:e,columnIndex:t,row:i,column:n})),r.push("el-table__cell"),r.join(" ")},getColspanRealWidth:function(e,t,i){if(t<1)return e[i].realWidth;var n=e.map((function(e){var t=e.realWidth;return t})).slice(i,i+t);return n.reduce((function(e,t){return e+t}),-1)},handleCellMouseEnter:function(e,t){var i=this.table,n=Qn(e);if(n){var r=Zn(i,n),o=i.hoverState={cell:n,column:r,row:t};i.$emit("cell-mouse-enter",o.row,o.column,o.cell,e)}var s=e.target.querySelector(".cell");if(Object(Ue["hasClass"])(s,"el-tooltip")&&s.childNodes.length){var a=document.createRange();a.setStart(s,0),a.setEnd(s,s.childNodes.length);var c=a.getBoundingClientRect().width,l=(parseInt(Object(Ue["getStyle"])(s,"paddingLeft"),10)||0)+(parseInt(Object(Ue["getStyle"])(s,"paddingRight"),10)||0);if((c+l>s.offsetWidth||s.scrollWidth>s.offsetWidth)&&this.$refs.tooltip){var u=this.$refs.tooltip;this.tooltipContent=n.innerText||n.textContent,u.referenceElm=n,u.$refs.popper&&(u.$refs.popper.style.display="none"),u.doDestroy(),u.setExpectedState(!0),this.activateTooltip(u)}}},handleCellMouseLeave:function(e){var t=this.$refs.tooltip;t&&(t.setExpectedState(!1),t.handleClosePopper());var i=Qn(e);if(i){var n=this.table.hoverState||{};this.table.$emit("cell-mouse-leave",n.row,n.column,n.cell,e)}},handleMouseEnter:B()(30,(function(e){this.store.commit("setHoverRow",e)})),handleMouseLeave:B()(30,(function(){this.store.commit("setHoverRow",null)})),handleContextMenu:function(e,t){this.handleEvent(e,t,"contextmenu")},handleDoubleClick:function(e,t){this.handleEvent(e,t,"dblclick")},handleClick:function(e,t){this.store.commit("setCurrentRow",t),this.handleEvent(e,t,"click")},handleEvent:function(e,t,i){var n=this.table,r=Qn(e),o=void 0;r&&(o=Zn(n,r),o&&n.$emit("cell-"+i,t,o,r,e)),n.$emit("row-"+i,t,o,e)},rowRender:function(e,t,i){var n=this,r=this.$createElement,o=this.treeIndent,s=this.columns,a=this.firstDefaultColumnIndex,c=s.map((function(e,t){return n.isColumnHidden(t)})),l=this.getRowClass(e,t),u=!0;i&&(l.push("el-table__row--level-"+i.level),u=i.display);var d=u?null:{display:"none"};return r("tr",{style:[d,this.getRowStyle(e,t)],class:l,key:this.getKeyOfRow(e,t),on:{dblclick:function(t){return n.handleDoubleClick(t,e)},click:function(t){return n.handleClick(t,e)},contextmenu:function(t){return n.handleContextMenu(t,e)},mouseenter:function(e){return n.handleMouseEnter(t)},mouseleave:this.handleMouseLeave}},[s.map((function(l,u){var d=n.getSpan(e,l,t,u),h=d.rowspan,p=d.colspan;if(!h||!p)return null;var f=Cr({},l);f.realWidth=n.getColspanRealWidth(s,p,u);var g={store:n.store,_self:n.context||n.table.$vnode.context,column:f,row:e,$index:t};return u===a&&i&&(g.treeNode={indent:i.level*o,level:i.level},"boolean"===typeof i.expanded&&(g.treeNode.expanded=i.expanded,"loading"in i&&(g.treeNode.loading=i.loading),"noLazyChildren"in i&&(g.treeNode.noLazyChildren=i.noLazyChildren))),r("td",{style:n.getCellStyle(t,u,e,l),class:n.getCellClass(t,u,e,l),attrs:{rowspan:h,colspan:p},on:{mouseenter:function(t){return n.handleCellMouseEnter(t,e)},mouseleave:n.handleCellMouseLeave}},[l.renderCell.call(n._renderProxy,n.$createElement,g,c[u])])}))])},wrappedRowRender:function(e,t){var i=this,n=this.$createElement,r=this.store,o=r.isRowExpanded,s=r.assertRowKey,a=r.states,c=a.treeData,l=a.lazyTreeNodeMap,u=a.childrenColumnName,d=a.rowKey;if(this.hasExpandColumn&&o(e)){var h=this.table.renderExpanded,p=this.rowRender(e,t);return h?[[p,n("tr",{key:"expanded-row__"+p.key},[n("td",{attrs:{colspan:this.columnsCount},class:"el-table__cell el-table__expanded-cell"},[h(this.$createElement,{row:e,$index:t,store:this.store})])])]]:(console.error("[Element Error]renderExpanded is required."),p)}if(Object.keys(c).length){s();var f=Yn(e,d),g=c[f],m=null;g&&(m={expanded:g.expanded,level:g.level,display:!0},"boolean"===typeof g.lazy&&("boolean"===typeof g.loaded&&g.loaded&&(m.noLazyChildren=!(g.children&&g.children.length)),m.loading=g.loading));var _=[this.rowRender(e,t,m)];if(g){var v=0,E=function e(n,r){n&&n.length&&r&&n.forEach((function(n){var o={display:r.display&&r.expanded,level:r.level+1},s=Yn(n,d);if(void 0===s||null===s)throw new Error("for nested data item, row-key is required.");if(g=Cr({},c[s]),g&&(o.expanded=g.expanded,g.level=g.level||o.level,g.display=!(!g.expanded||!o.display),"boolean"===typeof g.lazy&&("boolean"===typeof g.loaded&&g.loaded&&(o.noLazyChildren=!(g.children&&g.children.length)),o.loading=g.loading)),v++,_.push(i.rowRender(n,t+v,o)),g){var a=l[s]||n[u];e(a,g)}}))};g.display=!0;var A=l[f]||e[u];E(A,g)}return _}return this.rowRender(e,t)}}},Tr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-zoom-in-top"}},[e.multiple?i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[i("div",{staticClass:"el-table-filter__content"},[i("el-scrollbar",{attrs:{"wrap-class":"el-table-filter__wrap"}},[i("el-checkbox-group",{staticClass:"el-table-filter__checkbox-group",model:{value:e.filteredValue,callback:function(t){e.filteredValue=t},expression:"filteredValue"}},e._l(e.filters,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)],1)],1),i("div",{staticClass:"el-table-filter__bottom"},[i("button",{class:{"is-disabled":0===e.filteredValue.length},attrs:{disabled:0===e.filteredValue.length},on:{click:e.handleConfirm}},[e._v(e._s(e.t("el.table.confirmFilter")))]),i("button",{on:{click:e.handleReset}},[e._v(e._s(e.t("el.table.resetFilter")))])])]):i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[i("ul",{staticClass:"el-table-filter__list"},[i("li",{staticClass:"el-table-filter__list-item",class:{"is-active":void 0===e.filterValue||null===e.filterValue},on:{click:function(t){e.handleSelect(null)}}},[e._v(e._s(e.t("el.table.clearFilter")))]),e._l(e.filters,(function(t){return i("li",{key:t.value,staticClass:"el-table-filter__list-item",class:{"is-active":e.isActive(t)},attrs:{label:t.value},on:{click:function(i){e.handleSelect(t.value)}}},[e._v(e._s(t.text))])}))],2)])])},Ir=[];Tr._withStripped=!0;var Rr=[];!Gn.a.prototype.$isServer&&document.addEventListener("click",(function(e){Rr.forEach((function(t){var i=e.target;t&&t.$el&&(i===t.$el||t.$el.contains(i)||t.handleOutsideClick&&t.handleOutsideClick(e))}))}));var wr={open:function(e){e&&Rr.push(e)},close:function(e){var t=Rr.indexOf(e);-1!==t&&Rr.splice(e,1)}},Or=i(31),kr=i.n(Or),Nr={name:"ElTableFilterPanel",mixins:[H.a,_.a],directives:{Clickoutside:F.a},components:{ElCheckbox:Dn.a,ElCheckboxGroup:kr.a,ElScrollbar:W.a},props:{placement:{type:String,default:"bottom-end"}},methods:{isActive:function(e){return e.value===this.filterValue},handleOutsideClick:function(){var e=this;setTimeout((function(){e.showPopper=!1}),16)},handleConfirm:function(){this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleReset:function(){this.filteredValue=[],this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleSelect:function(e){this.filterValue=e,"undefined"!==typeof e&&null!==e?this.confirmFilter(this.filteredValue):this.confirmFilter([]),this.handleOutsideClick()},confirmFilter:function(e){this.table.store.commit("filterChange",{column:this.column,values:e}),this.table.store.updateAllSelected()}},data:function(){return{table:null,cell:null,column:null}},computed:{filters:function(){return this.column&&this.column.filters},filterValue:{get:function(){return(this.column.filteredValue||[])[0]},set:function(e){this.filteredValue&&("undefined"!==typeof e&&null!==e?this.filteredValue.splice(0,1,e):this.filteredValue.splice(0,1))}},filteredValue:{get:function(){return this.column&&this.column.filteredValue||[]},set:function(e){this.column&&(this.column.filteredValue=e)}},multiple:function(){return!this.column||this.column.filterMultiple}},mounted:function(){var e=this;this.popperElm=this.$el,this.referenceElm=this.cell,this.table.bodyWrapper.addEventListener("scroll",(function(){e.updatePopper()})),this.$watch("showPopper",(function(t){e.column&&(e.column.filterOpened=t),t?wr.open(e):wr.close(e)}))},watch:{showPopper:function(e){!0===e&&parseInt(this.popperJS._popper.style.zIndex,10)<C["PopupManager"].zIndex&&(this.popperJS._popper.style.zIndex=C["PopupManager"].nextZIndex())}}},Lr=Nr,Pr=a(Lr,Tr,Ir,!1,null,null,null);Pr.options.__file="packages/table/src/filter-panel.vue";var Dr=Pr.exports,Mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},xr=function e(t){var i=[];return t.forEach((function(t){t.children?(i.push(t),i.push.apply(i,e(t.children))):i.push(t)})),i},Br=function(e){var t=1,i=function e(i,n){if(n&&(i.level=n.level+1,t<i.level&&(t=i.level)),i.children){var r=0;i.children.forEach((function(t){e(t,i),r+=t.colSpan})),i.colSpan=r}else i.colSpan=1};e.forEach((function(e){e.level=1,i(e)}));for(var n=[],r=0;r<t;r++)n.push([]);var o=xr(e);return o.forEach((function(e){e.children?e.rowSpan=1:e.rowSpan=t-e.level+1,n[e.level-1].push(e)})),n},Ur={name:"ElTableHeader",mixins:[yr],render:function(e){var t=this,i=this.store.states.originColumns,n=Br(i,this.columns),r=n.length>1;return r&&(this.$parent.isGroup=!0),e("table",{class:"el-table__header",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(t){return e("col",{attrs:{name:t.id},key:t.id})})),this.hasGutter?e("col",{attrs:{name:"gutter"}}):""]),e("thead",{class:[{"is-group":r,"has-gutter":this.hasGutter}]},[this._l(n,(function(i,n){return e("tr",{style:t.getHeaderRowStyle(n),class:t.getHeaderRowClass(n)},[i.map((function(r,o){return e("th",{attrs:{colspan:r.colSpan,rowspan:r.rowSpan},on:{mousemove:function(e){return t.handleMouseMove(e,r)},mouseout:t.handleMouseOut,mousedown:function(e){return t.handleMouseDown(e,r)},click:function(e){return t.handleHeaderClick(e,r)},contextmenu:function(e){return t.handleHeaderContextMenu(e,r)}},style:t.getHeaderCellStyle(n,o,i,r),class:t.getHeaderCellClass(n,o,i,r),key:r.id},[e("div",{class:["cell",r.filteredValue&&r.filteredValue.length>0?"highlight":"",r.labelClassName]},[r.renderHeader?r.renderHeader.call(t._renderProxy,e,{column:r,$index:o,store:t.store,_self:t.$parent.$vnode.context}):r.label,r.sortable?e("span",{class:"caret-wrapper",on:{click:function(e){return t.handleSortClick(e,r)}}},[e("i",{class:"sort-caret ascending",on:{click:function(e){return t.handleSortClick(e,r,"ascending")}}}),e("i",{class:"sort-caret descending",on:{click:function(e){return t.handleSortClick(e,r,"descending")}}})]):"",r.filterable?e("span",{class:"el-table__column-filter-trigger",on:{click:function(e){return t.handleFilterClick(e,r)}}},[e("i",{class:["el-icon-arrow-down",r.filterOpened?"el-icon-arrow-up":""]})]):""])])})),t.hasGutter?e("th",{class:"el-table__cell gutter"}):""])}))])])},props:{fixed:String,store:{required:!0},border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},components:{ElCheckbox:Dn.a},computed:Mr({table:function(){return this.$parent},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},gr({columns:"columns",isAllSelected:"isAllSelected",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length}})),created:function(){this.filterPanels={}},mounted:function(){var e=this;this.$nextTick((function(){var t=e.defaultSort,i=t.prop,n=t.order,r=!0;e.store.commit("sort",{prop:i,order:n,init:r})}))},beforeDestroy:function(){var e=this.filterPanels;for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].$destroy(!0)},methods:{isCellHidden:function(e,t){for(var i=0,n=0;n<e;n++)i+=t[n].colSpan;var r=i+t[e].colSpan-1;return!0===this.fixed||"left"===this.fixed?r>=this.leftFixedLeafCount:"right"===this.fixed?i<this.columnsCount-this.rightFixedLeafCount:r<this.leftFixedLeafCount||i>=this.columnsCount-this.rightFixedLeafCount},getHeaderRowStyle:function(e){var t=this.table.headerRowStyle;return"function"===typeof t?t.call(null,{rowIndex:e}):t},getHeaderRowClass:function(e){var t=[],i=this.table.headerRowClassName;return"string"===typeof i?t.push(i):"function"===typeof i&&t.push(i.call(null,{rowIndex:e})),t.join(" ")},getHeaderCellStyle:function(e,t,i,n){var r=this.table.headerCellStyle;return"function"===typeof r?r.call(null,{rowIndex:e,columnIndex:t,row:i,column:n}):r},getHeaderCellClass:function(e,t,i,n){var r=[n.id,n.order,n.headerAlign,n.className,n.labelClassName];0===e&&this.isCellHidden(t,i)&&r.push("is-hidden"),n.children||r.push("is-leaf"),n.sortable&&r.push("is-sortable");var o=this.table.headerCellClassName;return"string"===typeof o?r.push(o):"function"===typeof o&&r.push(o.call(null,{rowIndex:e,columnIndex:t,row:i,column:n})),r.push("el-table__cell"),r.join(" ")},toggleAllSelection:function(e){e.stopPropagation(),this.store.commit("toggleAllSelection")},handleFilterClick:function(e,t){e.stopPropagation();var i=e.target,n="TH"===i.tagName?i:i.parentNode;if(!Object(Ue["hasClass"])(n,"noclick")){n=n.querySelector(".el-table__column-filter-trigger")||n;var r=this.$parent,o=this.filterPanels[t.id];o&&t.filterOpened?o.showPopper=!1:(o||(o=new Gn.a(Dr),this.filterPanels[t.id]=o,t.filterPlacement&&(o.placement=t.filterPlacement),o.table=r,o.cell=n,o.column=t,!this.$isServer&&o.$mount(document.createElement("div"))),setTimeout((function(){o.showPopper=!0}),16))}},handleHeaderClick:function(e,t){!t.filters&&t.sortable?this.handleSortClick(e,t):t.filterable&&!t.sortable&&this.handleFilterClick(e,t),this.$parent.$emit("header-click",t,e)},handleHeaderContextMenu:function(e,t){this.$parent.$emit("header-contextmenu",t,e)},handleMouseDown:function(e,t){var i=this;if(!this.$isServer&&!(t.children&&t.children.length>0)&&this.draggingColumn&&this.border){this.dragging=!0,this.$parent.resizeProxyVisible=!0;var n=this.$parent,r=n.$el,o=r.getBoundingClientRect().left,s=this.$el.querySelector("th."+t.id),a=s.getBoundingClientRect(),c=a.left-o+30;Object(Ue["addClass"])(s,"noclick"),this.dragState={startMouseLeft:e.clientX,startLeft:a.right-o,startColumnLeft:a.left-o,tableLeft:o};var l=n.$refs.resizeProxy;l.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};var u=function(e){var t=e.clientX-i.dragState.startMouseLeft,n=i.dragState.startLeft+t;l.style.left=Math.max(c,n)+"px"},d=function r(){if(i.dragging){var o=i.dragState,a=o.startColumnLeft,c=o.startLeft,d=parseInt(l.style.left,10),h=d-a;t.width=t.realWidth=h,n.$emit("header-dragend",t.width,c-a,t,e),i.store.scheduleLayout(),document.body.style.cursor="",i.dragging=!1,i.draggingColumn=null,i.dragState={},n.resizeProxyVisible=!1}document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",r),document.onselectstart=null,document.ondragstart=null,setTimeout((function(){Object(Ue["removeClass"])(s,"noclick")}),0)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",d)}},handleMouseMove:function(e,t){if(!(t.children&&t.children.length>0)){var i=e.target;while(i&&"TH"!==i.tagName)i=i.parentNode;if(t&&t.resizable&&!this.dragging&&this.border){var n=i.getBoundingClientRect(),r=document.body.style;n.width>12&&n.right-e.pageX<8?(r.cursor="col-resize",Object(Ue["hasClass"])(i,"is-sortable")&&(i.style.cursor="col-resize"),this.draggingColumn=t):this.dragging||(r.cursor="",Object(Ue["hasClass"])(i,"is-sortable")&&(i.style.cursor="pointer"),this.draggingColumn=null)}}},handleMouseOut:function(){this.$isServer||(document.body.style.cursor="")},toggleOrder:function(e){var t=e.order,i=e.sortOrders;if(""===t)return i[0];var n=i.indexOf(t||null);return i[n>i.length-2?0:n+1]},handleSortClick:function(e,t,i){e.stopPropagation();var n=t.order===i?null:i||this.toggleOrder(t),r=e.target;while(r&&"TH"!==r.tagName)r=r.parentNode;if(r&&"TH"===r.tagName&&Object(Ue["hasClass"])(r,"noclick"))Object(Ue["removeClass"])(r,"noclick");else if(t.sortable){var o=this.store.states,s=o.sortProp,a=void 0,c=o.sortingColumn;(c!==t||c===t&&null===c.order)&&(c&&(c.order=null),o.sortingColumn=t,s=t.property),a=t.order=n||null,o.sortProp=s,o.sortOrder=a,this.store.commit("changeSortCondition")}}},data:function(){return{draggingColumn:null,dragging:!1,dragState:{}}}},Fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Vr={name:"ElTableFooter",mixins:[yr],render:function(e){var t=this,i=[];return this.summaryMethod?i=this.summaryMethod({columns:this.columns,data:this.store.states.data}):this.columns.forEach((function(e,n){if(0!==n){var r=t.store.states.data.map((function(t){return Number(t[e.property])})),o=[],s=!0;r.forEach((function(e){if(!isNaN(e)){s=!1;var t=(""+e).split(".")[1];o.push(t?t.length:0)}}));var a=Math.max.apply(null,o);i[n]=s?"":r.reduce((function(e,t){var i=Number(t);return isNaN(i)?e:parseFloat((e+t).toFixed(Math.min(a,20)))}),0)}else i[n]=t.sumText})),e("table",{class:"el-table__footer",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(t){return e("col",{attrs:{name:t.id},key:t.id})})),this.hasGutter?e("col",{attrs:{name:"gutter"}}):""]),e("tbody",{class:[{"has-gutter":this.hasGutter}]},[e("tr",[this.columns.map((function(n,r){return e("td",{key:r,attrs:{colspan:n.colSpan,rowspan:n.rowSpan},class:[].concat(t.getRowClasses(n,r),["el-table__cell"])},[e("div",{class:["cell",n.labelClassName]},[i[r]])])})),this.hasGutter?e("th",{class:"el-table__cell gutter"}):""])])])},props:{fixed:String,store:{required:!0},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},computed:Fr({table:function(){return this.$parent},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},gr({columns:"columns",isAllSelected:"isAllSelected",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length}})),methods:{isCellHidden:function(e,t,i){if(!0===this.fixed||"left"===this.fixed)return e>=this.leftFixedLeafCount;if("right"===this.fixed){for(var n=0,r=0;r<e;r++)n+=t[r].colSpan;return n<this.columnsCount-this.rightFixedLeafCount}return!(this.fixed||!i.fixed)||(e<this.leftFixedCount||e>=this.columnsCount-this.rightFixedCount)},getRowClasses:function(e,t){var i=[e.id,e.align,e.labelClassName];return e.className&&i.push(e.className),this.isCellHidden(t,this.columns,e)&&i.push("is-hidden"),e.children||i.push("is-leaf"),i}}},jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Gr=1,Hr={name:"ElTable",mixins:[_.a,I.a],directives:{Mousewheel:Vn},props:{data:{type:Array,default:function(){return[]}},size:String,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],context:{},showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:function(){return{hasChildren:"hasChildren",children:"children"}}},lazy:Boolean,load:Function},components:{TableHeader:Ur,TableFooter:Vr,TableBody:br,ElCheckbox:Dn.a},methods:{getMigratingConfig:function(){return{events:{expand:"expand is renamed to expand-change"}}},setCurrentRow:function(e){this.store.commit("setCurrentRow",e)},toggleRowSelection:function(e,t){this.store.toggleRowSelection(e,t,!1),this.store.updateAllSelected()},toggleRowExpansion:function(e,t){this.store.toggleRowExpansionAdapter(e,t)},clearSelection:function(){this.store.clearSelection()},clearFilter:function(e){this.store.clearFilter(e)},clearSort:function(){this.store.clearSort()},handleMouseLeave:function(){this.store.commit("setHoverRow",null),this.hoverState&&(this.hoverState=null)},updateScrollY:function(){var e=this.layout.updateScrollY();e&&(this.layout.notifyObservers("scrollable"),this.layout.updateColumnsWidth())},handleFixedMousewheel:function(e,t){var i=this.bodyWrapper;if(Math.abs(t.spinY)>0){var n=i.scrollTop;t.pixelY<0&&0!==n&&e.preventDefault(),t.pixelY>0&&i.scrollHeight-i.clientHeight>n&&e.preventDefault(),i.scrollTop+=Math.ceil(t.pixelY/5)}else i.scrollLeft+=Math.ceil(t.pixelX/5)},handleHeaderFooterMousewheel:function(e,t){var i=t.pixelX,n=t.pixelY;Math.abs(i)>=Math.abs(n)&&(this.bodyWrapper.scrollLeft+=t.pixelX/5)},syncPostion:Object(Mn["throttle"])(20,(function(){var e=this.bodyWrapper,t=e.scrollLeft,i=e.scrollTop,n=e.offsetWidth,r=e.scrollWidth,o=this.$refs,s=o.headerWrapper,a=o.footerWrapper,c=o.fixedBodyWrapper,l=o.rightFixedBodyWrapper;s&&(s.scrollLeft=t),a&&(a.scrollLeft=t),c&&(c.scrollTop=i),l&&(l.scrollTop=i);var u=r-n-1;this.scrollPosition=t>=u?"right":0===t?"left":"middle"})),bindEvents:function(){this.bodyWrapper.addEventListener("scroll",this.syncPostion,{passive:!0}),this.fit&&Object(Xi["addResizeListener"])(this.$el,this.resizeListener)},unbindEvents:function(){this.bodyWrapper.removeEventListener("scroll",this.syncPostion,{passive:!0}),this.fit&&Object(Xi["removeResizeListener"])(this.$el,this.resizeListener)},resizeListener:function(){if(this.$ready){var e=!1,t=this.$el,i=this.resizeState,n=i.width,r=i.height,o=t.offsetWidth;n!==o&&(e=!0);var s=t.offsetHeight;(this.height||this.shouldUpdateHeight)&&r!==s&&(e=!0),e&&(this.resizeState.width=o,this.resizeState.height=s,this.doLayout())}},doLayout:function(){this.shouldUpdateHeight&&this.layout.updateElsHeight(),this.layout.updateColumnsWidth()},sort:function(e,t){this.store.commit("sort",{prop:e,order:t})},toggleAllSelection:function(){this.store.commit("toggleAllSelection")}},computed:jr({tableSize:function(){return this.size||(this.$ELEMENT||{}).size},bodyWrapper:function(){return this.$refs.bodyWrapper},shouldUpdateHeight:function(){return this.height||this.maxHeight||this.fixedColumns.length>0||this.rightFixedColumns.length>0},bodyWidth:function(){var e=this.layout,t=e.bodyWidth,i=e.scrollY,n=e.gutterWidth;return t?t-(i?n:0)+"px":""},bodyHeight:function(){var e=this.layout,t=e.headerHeight,i=void 0===t?0:t,n=e.bodyHeight,r=e.footerHeight,o=void 0===r?0:r;if(this.height)return{height:n?n+"px":""};if(this.maxHeight){var s=ir(this.maxHeight);if("number"===typeof s)return{"max-height":s-o-(this.showHeader?i:0)+"px"}}return{}},fixedBodyHeight:function(){if(this.height)return{height:this.layout.fixedBodyHeight?this.layout.fixedBodyHeight+"px":""};if(this.maxHeight){var e=ir(this.maxHeight);if("number"===typeof e)return e=this.layout.scrollX?e-this.layout.gutterWidth:e,this.showHeader&&(e-=this.layout.headerHeight),e-=this.layout.footerHeight,{"max-height":e+"px"}}return{}},fixedHeight:function(){return this.maxHeight?this.showSummary?{bottom:0}:{bottom:this.layout.scrollX&&this.data.length?this.layout.gutterWidth+"px":""}:this.showSummary?{height:this.layout.tableHeight?this.layout.tableHeight+"px":""}:{height:this.layout.viewportHeight?this.layout.viewportHeight+"px":""}},emptyBlockStyle:function(){if(this.data&&this.data.length)return null;var e="100%";return this.layout.appendHeight&&(e="calc(100% - "+this.layout.appendHeight+"px)"),{width:this.bodyWidth,height:e}}},gr({selection:"selection",columns:"columns",tableData:"data",fixedColumns:"fixedColumns",rightFixedColumns:"rightFixedColumns"})),watch:{height:{immediate:!0,handler:function(e){this.layout.setHeight(e)}},maxHeight:{immediate:!0,handler:function(e){this.layout.setMaxHeight(e)}},currentRowKey:{immediate:!0,handler:function(e){this.rowKey&&this.store.setCurrentRowKey(e)}},data:{immediate:!0,handler:function(e){this.store.commit("setData",e)}},expandRowKeys:{immediate:!0,handler:function(e){e&&this.store.setExpandRowKeysAdapter(e)}}},created:function(){var e=this;this.tableId="el-table_"+Gr++,this.debouncedUpdateLayout=Object(Mn["debounce"])(50,(function(){return e.doLayout()}))},mounted:function(){var e=this;this.bindEvents(),this.store.updateColumns(),this.doLayout(),this.resizeState={width:this.$el.offsetWidth,height:this.$el.offsetHeight},this.store.states.columns.forEach((function(t){t.filteredValue&&t.filteredValue.length&&e.store.commit("filterChange",{column:t,values:t.filteredValue,silent:!0})})),this.$ready=!0},destroyed:function(){this.unbindEvents()},data:function(){var e=this.treeProps,t=e.hasChildren,i=void 0===t?"hasChildren":t,n=e.children,r=void 0===n?"children":n;this.store=fr(this,{rowKey:this.rowKey,defaultExpandAll:this.defaultExpandAll,selectOnIndeterminate:this.selectOnIndeterminate,indent:this.indent,lazy:this.lazy,lazyColumnIdentifier:i,childrenColumnName:r});var o=new Ar({store:this.store,table:this,fit:this.fit,showHeader:this.showHeader});return{layout:o,isHidden:!1,renderExpanded:null,resizeProxyVisible:!1,resizeState:{width:null,height:null},isGroup:!1,scrollPosition:"left"}}},Qr=Hr,Wr=a(Qr,Nn,Ln,!1,null,null,null);Wr.options.__file="packages/table/src/table.vue";var qr=Wr.exports;qr.install=function(e){e.component(qr.name,qr)};var $r=qr,zr={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:"",className:"el-table-column--selection"},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},Zr={selection:{renderHeader:function(e,t){var i=t.store;return e("el-checkbox",{attrs:{disabled:i.states.data&&0===i.states.data.length,indeterminate:i.states.selection.length>0&&!this.isAllSelected,value:this.isAllSelected},nativeOn:{click:this.toggleAllSelection}})},renderCell:function(e,t){var i=t.row,n=t.column,r=t.store,o=t.$index;return e("el-checkbox",{nativeOn:{click:function(e){return e.stopPropagation()}},attrs:{value:r.isSelected(i),disabled:!!n.selectable&&!n.selectable.call(null,i,o)},on:{input:function(){r.commit("rowSelectedChanged",i)}}})},sortable:!1,resizable:!1},index:{renderHeader:function(e,t){var i=t.column;return i.label||"#"},renderCell:function(e,t){var i=t.$index,n=t.column,r=i+1,o=n.index;return"number"===typeof o?r=i+o:"function"===typeof o&&(r=o(i)),e("div",[r])},sortable:!1},expand:{renderHeader:function(e,t){var i=t.column;return i.label||""},renderCell:function(e,t){var i=t.row,n=t.store,r=["el-table__expand-icon"];n.states.expandRows.indexOf(i)>-1&&r.push("el-table__expand-icon--expanded");var o=function(e){e.stopPropagation(),n.toggleRowExpansion(i)};return e("div",{class:r,on:{click:o}},[e("i",{class:"el-icon el-icon-arrow-right"})])},sortable:!1,resizable:!1,className:"el-table__expand-column"}};function Yr(e,t){var i=t.row,n=t.column,r=t.$index,o=n.property,s=o&&Object(v["getPropByPath"])(i,o).v;return n&&n.formatter?n.formatter(i,n,s,r):s}function Kr(e,t){var i=t.row,n=t.treeNode,r=t.store;if(!n)return null;var o=[],s=function(e){e.stopPropagation(),r.loadOrToggle(i)};if(n.indent&&o.push(e("span",{class:"el-table__indent",style:{"padding-left":n.indent+"px"}})),"boolean"!==typeof n.expanded||n.noLazyChildren)o.push(e("span",{class:"el-table__placeholder"}));else{var a=["el-table__expand-icon",n.expanded?"el-table__expand-icon--expanded":""],c=["el-icon-arrow-right"];n.loading&&(c=["el-icon-loading"]),o.push(e("div",{class:a,on:{click:s}},[e("i",{class:c})]))}return o}var Jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Xr=1,eo={name:"ElTableColumn",props:{type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{},minWidth:{},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:function(){return["ascending","descending",null]},validator:function(e){return e.every((function(e){return["ascending","descending",null].indexOf(e)>-1}))}}},data:function(){return{isSubColumn:!1,columns:[]}},computed:{owner:function(){var e=this.$parent;while(e&&!e.tableId)e=e.$parent;return e},columnOrTableParent:function(){var e=this.$parent;while(e&&!e.tableId&&!e.columnId)e=e.$parent;return e},realWidth:function(){return er(this.width)},realMinWidth:function(){return tr(this.minWidth)},realAlign:function(){return this.align?"is-"+this.align:null},realHeaderAlign:function(){return this.headerAlign?"is-"+this.headerAlign:this.realAlign}},methods:{getPropsData:function(){for(var e=this,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.reduce((function(t,i){return Array.isArray(i)&&i.forEach((function(i){t[i]=e[i]})),t}),{})},getColumnElIndex:function(e,t){return[].indexOf.call(e,t)},setColumnWidth:function(e){return this.realWidth&&(e.width=this.realWidth),this.realMinWidth&&(e.minWidth=this.realMinWidth),e.minWidth||(e.minWidth=80),e.realWidth=void 0===e.width?e.minWidth:e.width,e},setColumnForcedProps:function(e){var t=e.type,i=Zr[t]||{};return Object.keys(i).forEach((function(t){var n=i[t];void 0!==n&&(e[t]="className"===t?e[t]+" "+n:n)})),e},setColumnRenders:function(e){var t=this;this.$createElement;this.renderHeader?console.warn("[Element Warn][TableColumn]Comparing to render-header, scoped-slot header is easier to use. We recommend users to use scoped-slot header."):"selection"!==e.type&&(e.renderHeader=function(i,n){var r=t.$scopedSlots.header;return r?r(n):e.label});var i=e.renderCell;return"expand"===e.type?(e.renderCell=function(e,t){return e("div",{class:"cell"},[i(e,t)])},this.owner.renderExpanded=function(e,i){return t.$scopedSlots.default?t.$scopedSlots.default(i):t.$slots.default}):(i=i||Yr,e.renderCell=function(n,r){var o=null;o=t.$scopedSlots.default?t.$scopedSlots.default(r):i(n,r);var s=Kr(n,r),a={class:"cell",style:{}};return e.showOverflowTooltip&&(a.class+=" el-tooltip",a.style={width:(r.column.realWidth||r.column.width)-1+"px"}),n("div",a,[s,o])}),e},registerNormalWatchers:function(){var e=this,t=["label","property","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],i={prop:"property",realAlign:"align",realHeaderAlign:"headerAlign",realWidth:"width"},n=t.reduce((function(e,t){return e[t]=t,e}),i);Object.keys(n).forEach((function(t){var n=i[t];e.$watch(t,(function(t){e.columnConfig[n]=t}))}))},registerComplexWatchers:function(){var e=this,t=["fixed"],i={realWidth:"width",realMinWidth:"minWidth"},n=t.reduce((function(e,t){return e[t]=t,e}),i);Object.keys(n).forEach((function(t){var n=i[t];e.$watch(t,(function(t){e.columnConfig[n]=t;var i="fixed"===n;e.owner.store.scheduleLayout(i)}))}))}},components:{ElCheckbox:Dn.a},beforeCreate:function(){this.row={},this.column={},this.$index=0,this.columnId=""},created:function(){var e=this.columnOrTableParent;this.isSubColumn=this.owner!==e,this.columnId=(e.tableId||e.columnId)+"_column_"+Xr++;var t=this.type||"default",i=""===this.sortable||this.sortable,n=Jr({},zr[t],{id:this.columnId,type:t,property:this.prop||this.property,align:this.realAlign,headerAlign:this.realHeaderAlign,showOverflowTooltip:this.showOverflowTooltip||this.showTooltipWhenOverflow,filterable:this.filters||this.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,filterOpened:!1,sortable:i,index:this.index}),r=["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],o=["sortMethod","sortBy","sortOrders"],s=["selectable","reserveSelection"],a=["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"],c=this.getPropsData(r,o,s,a);c=Xn(n,c);var l=nr(this.setColumnRenders,this.setColumnWidth,this.setColumnForcedProps);c=l(c),this.columnConfig=c,this.registerNormalWatchers(),this.registerComplexWatchers()},mounted:function(){var e=this.owner,t=this.columnOrTableParent,i=this.isSubColumn?t.$el.children:t.$refs.hiddenColumns.children,n=this.getColumnElIndex(i,this.$el);e.store.commit("insertColumn",this.columnConfig,n,this.isSubColumn?t.columnConfig:null)},destroyed:function(){if(this.$parent){var e=this.$parent;this.owner.store.commit("removeColumn",this.columnConfig,this.isSubColumn?e.columnConfig:null)}},render:function(e){return e("div",this.$slots.default)},install:function(e){e.component(eo.name,eo)}},to=eo,io=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.ranged?i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],ref:"reference",staticClass:"el-date-editor el-range-editor el-input__inner",class:["el-date-editor--"+e.type,e.pickerSize?"el-range-editor--"+e.pickerSize:"",e.pickerDisabled?"is-disabled":"",e.pickerVisible?"is-active":""],on:{click:e.handleRangeClick,mouseenter:e.handleMouseEnter,mouseleave:function(t){e.showClose=!1},keydown:e.handleKeydown}},[i("i",{class:["el-input__icon","el-range__icon",e.triggerClass]}),i("input",e._b({staticClass:"el-range-input",attrs:{autocomplete:"off",placeholder:e.startPlaceholder,disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,name:e.name&&e.name[0]},domProps:{value:e.displayValue&&e.displayValue[0]},on:{input:e.handleStartInput,change:e.handleStartChange,focus:e.handleFocus}},"input",e.firstInputId,!1)),e._t("range-separator",[i("span",{staticClass:"el-range-separator"},[e._v(e._s(e.rangeSeparator))])]),i("input",e._b({staticClass:"el-range-input",attrs:{autocomplete:"off",placeholder:e.endPlaceholder,disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,name:e.name&&e.name[1]},domProps:{value:e.displayValue&&e.displayValue[1]},on:{input:e.handleEndInput,change:e.handleEndChange,focus:e.handleFocus}},"input",e.secondInputId,!1)),e.haveTrigger?i("i",{staticClass:"el-input__icon el-range__close-icon",class:[e.showClose?""+e.clearIcon:""],on:{click:e.handleClickIcon}}):e._e()],2):i("el-input",e._b({directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],ref:"reference",staticClass:"el-date-editor",class:"el-date-editor--"+e.type,attrs:{readonly:!e.editable||e.readonly||"dates"===e.type||"week"===e.type,disabled:e.pickerDisabled,size:e.pickerSize,name:e.name,placeholder:e.placeholder,value:e.displayValue,validateEvent:!1},on:{focus:e.handleFocus,input:function(t){return e.userInput=t},change:e.handleChange},nativeOn:{keydown:function(t){return e.handleKeydown(t)},mouseenter:function(t){return e.handleMouseEnter(t)},mouseleave:function(t){e.showClose=!1}}},"el-input",e.firstInputId,!1),[i("i",{staticClass:"el-input__icon",class:e.triggerClass,attrs:{slot:"prefix"},on:{click:e.handleFocus},slot:"prefix"}),e.haveTrigger?i("i",{staticClass:"el-input__icon",class:[e.showClose?""+e.clearIcon:""],attrs:{slot:"suffix"},on:{click:e.handleClickIcon},slot:"suffix"}):e._e()])},no=[];io._withStripped=!0;var ro=i(0),oo={props:{appendToBody:H.a.props.appendToBody,offset:H.a.props.offset,boundariesPadding:H.a.props.boundariesPadding,arrowOffset:H.a.props.arrowOffset},methods:H.a.methods,data:function(){return Tt()({visibleArrow:!0},H.a.data)},beforeDestroy:H.a.beforeDestroy},so={date:"yyyy-MM-dd",month:"yyyy-MM",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss",week:"yyyywWW",timerange:"HH:mm:ss",daterange:"yyyy-MM-dd",monthrange:"yyyy-MM",datetimerange:"yyyy-MM-dd HH:mm:ss",year:"yyyy"},ao=["date","datetime","time","time-select","week","month","year","daterange","monthrange","timerange","datetimerange","dates"],co=function(e,t){return"timestamp"===t?e.getTime():Object(ro["formatDate"])(e,t)},lo=function(e,t){return"timestamp"===t?new Date(Number(e)):Object(ro["parseDate"])(e,t)},uo=function(e,t){if(Array.isArray(e)&&2===e.length){var i=e[0],n=e[1];if(i&&n)return[co(i,t),co(n,t)]}return""},ho=function(e,t,i){if(Array.isArray(e)||(e=e.split(i)),2===e.length){var n=e[0],r=e[1];return[lo(n,t),lo(r,t)]}return[]},po={default:{formatter:function(e){return e?""+e:""},parser:function(e){return void 0===e||""===e?null:e}},week:{formatter:function(e,t){var i=Object(ro["getWeekNumber"])(e),n=e.getMonth(),r=new Date(e);1===i&&11===n&&(r.setHours(0,0,0,0),r.setDate(r.getDate()+3-(r.getDay()+6)%7));var o=Object(ro["formatDate"])(r,t);return o=/WW/.test(o)?o.replace(/WW/,i<10?"0"+i:i):o.replace(/W/,i),o},parser:function(e,t){return po.date.parser(e,t)}},date:{formatter:co,parser:lo},datetime:{formatter:co,parser:lo},daterange:{formatter:uo,parser:ho},monthrange:{formatter:uo,parser:ho},datetimerange:{formatter:uo,parser:ho},timerange:{formatter:uo,parser:ho},time:{formatter:co,parser:lo},month:{formatter:co,parser:lo},year:{formatter:co,parser:lo},number:{formatter:function(e){return e?""+e:""},parser:function(e){var t=Number(e);return isNaN(e)?null:t}},dates:{formatter:function(e,t){return e.map((function(e){return co(e,t)}))},parser:function(e,t){return("string"===typeof e?e.split(", "):e).map((function(e){return e instanceof Date?e:lo(e,t)}))}}},fo={left:"bottom-start",center:"bottom",right:"bottom-end"},go=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-";if(!e)return null;var r=(po[i]||po["default"]).parser,o=t||so[i];return r(e,o,n)},mo=function(e,t,i){if(!e)return null;var n=(po[i]||po["default"]).formatter,r=t||so[i];return n(e,r)},_o=function(e,t){var i=function(e,t){var i=e instanceof Date,n=t instanceof Date;return i&&n?e.getTime()===t.getTime():!i&&!n&&e===t},n=e instanceof Array,r=t instanceof Array;return n&&r?e.length===t.length&&e.every((function(e,n){return i(e,t[n])})):!n&&!r&&i(e,t)},vo=function(e){return"string"===typeof e||e instanceof String},Eo=function(e){return null===e||void 0===e||vo(e)||Array.isArray(e)&&2===e.length&&e.every(vo)},Ao={mixins:[w.a,oo],inject:{elForm:{default:""},elFormItem:{default:""}},props:{size:String,format:String,valueFormat:String,readonly:Boolean,placeholder:String,startPlaceholder:String,endPlaceholder:String,prefixIcon:String,clearIcon:{type:String,default:"el-icon-circle-close"},name:{default:"",validator:Eo},disabled:Boolean,clearable:{type:Boolean,default:!0},id:{default:"",validator:Eo},popperClass:String,editable:{type:Boolean,default:!0},align:{type:String,default:"left"},value:{},defaultValue:{},defaultTime:{},rangeSeparator:{default:"-"},pickerOptions:{},unlinkPanels:Boolean,validateEvent:{type:Boolean,default:!0}},components:{ElInput:g.a},directives:{Clickoutside:F.a},data:function(){return{pickerVisible:!1,showClose:!1,userInput:null,valueOnOpen:null,unwatchPickerOptions:null}},watch:{pickerVisible:function(e){this.readonly||this.pickerDisabled||(e?(this.showPicker(),this.valueOnOpen=Array.isArray(this.value)?[].concat(this.value):this.value):(this.hidePicker(),this.emitChange(this.value),this.userInput=null,this.validateEvent&&this.dispatch("ElFormItem","el.form.blur"),this.$emit("blur",this),this.blur()))},parsedValue:{immediate:!0,handler:function(e){this.picker&&(this.picker.value=e)}},defaultValue:function(e){this.picker&&(this.picker.defaultValue=e)},value:function(e,t){_o(e,t)||this.pickerVisible||!this.validateEvent||this.dispatch("ElFormItem","el.form.change",e)}},computed:{ranged:function(){return this.type.indexOf("range")>-1},reference:function(){var e=this.$refs.reference;return e.$el||e},refInput:function(){return this.reference?[].slice.call(this.reference.querySelectorAll("input")):[]},valueIsEmpty:function(){var e=this.value;if(Array.isArray(e)){for(var t=0,i=e.length;t<i;t++)if(e[t])return!1}else if(e)return!1;return!0},triggerClass:function(){return this.prefixIcon||(-1!==this.type.indexOf("time")?"el-icon-time":"el-icon-date")},selectionMode:function(){return"week"===this.type?"week":"month"===this.type?"month":"year"===this.type?"year":"dates"===this.type?"dates":"day"},haveTrigger:function(){return"undefined"!==typeof this.showTrigger?this.showTrigger:-1!==ao.indexOf(this.type)},displayValue:function(){var e=mo(this.parsedValue,this.format,this.type,this.rangeSeparator);return Array.isArray(this.userInput)?[this.userInput[0]||e&&e[0]||"",this.userInput[1]||e&&e[1]||""]:null!==this.userInput?this.userInput:e?"dates"===this.type?e.join(", "):e:""},parsedValue:function(){if(!this.value)return this.value;if("time-select"===this.type)return this.value;var e=Object(ro["isDateObject"])(this.value)||Array.isArray(this.value)&&this.value.every(ro["isDateObject"]);return e?this.value:this.valueFormat?go(this.value,this.valueFormat,this.type,this.rangeSeparator)||this.value:Array.isArray(this.value)?this.value.map((function(e){return new Date(e)})):new Date(this.value)},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},pickerSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},pickerDisabled:function(){return this.disabled||(this.elForm||{}).disabled},firstInputId:function(){var e={},t=void 0;return t=this.ranged?this.id&&this.id[0]:this.id,t&&(e.id=t),e},secondInputId:function(){var e={},t=void 0;return this.ranged&&(t=this.id&&this.id[1]),t&&(e.id=t),e}},created:function(){this.popperOptions={boundariesPadding:0,gpuAcceleration:!1},this.placement=fo[this.align]||fo.left,this.$on("fieldReset",this.handleFieldReset)},methods:{focus:function(){this.ranged?this.handleFocus():this.$refs.reference.focus()},blur:function(){this.refInput.forEach((function(e){return e.blur()}))},parseValue:function(e){var t=Object(ro["isDateObject"])(e)||Array.isArray(e)&&e.every(ro["isDateObject"]);return this.valueFormat&&!t&&go(e,this.valueFormat,this.type,this.rangeSeparator)||e},formatToValue:function(e){var t=Object(ro["isDateObject"])(e)||Array.isArray(e)&&e.every(ro["isDateObject"]);return this.valueFormat&&t?mo(e,this.valueFormat,this.type,this.rangeSeparator):e},parseString:function(e){var t=Array.isArray(e)?this.type:this.type.replace("range","");return go(e,this.format,t)},formatToString:function(e){var t=Array.isArray(e)?this.type:this.type.replace("range","");return mo(e,this.format,t)},handleMouseEnter:function(){this.readonly||this.pickerDisabled||!this.valueIsEmpty&&this.clearable&&(this.showClose=!0)},handleChange:function(){if(this.userInput){var e=this.parseString(this.displayValue);e&&(this.picker.value=e,this.isValidValue(e)&&(this.emitInput(e),this.userInput=null))}""===this.userInput&&(this.emitInput(null),this.emitChange(null),this.userInput=null)},handleStartInput:function(e){this.userInput?this.userInput=[e.target.value,this.userInput[1]]:this.userInput=[e.target.value,null]},handleEndInput:function(e){this.userInput?this.userInput=[this.userInput[0],e.target.value]:this.userInput=[null,e.target.value]},handleStartChange:function(e){var t=this.parseString(this.userInput&&this.userInput[0]);if(t){this.userInput=[this.formatToString(t),this.displayValue[1]];var i=[t,this.picker.value&&this.picker.value[1]];this.picker.value=i,this.isValidValue(i)&&(this.emitInput(i),this.userInput=null)}},handleEndChange:function(e){var t=this.parseString(this.userInput&&this.userInput[1]);if(t){this.userInput=[this.displayValue[0],this.formatToString(t)];var i=[this.picker.value&&this.picker.value[0],t];this.picker.value=i,this.isValidValue(i)&&(this.emitInput(i),this.userInput=null)}},handleClickIcon:function(e){this.readonly||this.pickerDisabled||(this.showClose?(this.valueOnOpen=this.value,e.stopPropagation(),this.emitInput(null),this.emitChange(null),this.showClose=!1,this.picker&&"function"===typeof this.picker.handleClear&&this.picker.handleClear()):this.pickerVisible=!this.pickerVisible)},handleClose:function(){if(this.pickerVisible&&(this.pickerVisible=!1,"dates"===this.type)){var e=go(this.valueOnOpen,this.valueFormat,this.type,this.rangeSeparator)||this.valueOnOpen;this.emitInput(e)}},handleFieldReset:function(e){this.userInput=""===e?null:e},handleFocus:function(){var e=this.type;-1===ao.indexOf(e)||this.pickerVisible||(this.pickerVisible=!0),this.$emit("focus",this)},handleKeydown:function(e){var t=this,i=e.keyCode;return 27===i?(this.pickerVisible=!1,void e.stopPropagation()):9!==i?13===i?((""===this.userInput||this.isValidValue(this.parseString(this.displayValue)))&&(this.handleChange(),this.pickerVisible=this.picker.visible=!1,this.blur()),void e.stopPropagation()):void(this.userInput?e.stopPropagation():this.picker&&this.picker.handleKeydown&&this.picker.handleKeydown(e)):void(this.ranged?setTimeout((function(){-1===t.refInput.indexOf(document.activeElement)&&(t.pickerVisible=!1,t.blur(),e.stopPropagation())}),0):(this.handleChange(),this.pickerVisible=this.picker.visible=!1,this.blur(),e.stopPropagation()))},handleRangeClick:function(){var e=this.type;-1===ao.indexOf(e)||this.pickerVisible||(this.pickerVisible=!0),this.$emit("focus",this)},hidePicker:function(){this.picker&&(this.picker.resetView&&this.picker.resetView(),this.pickerVisible=this.picker.visible=!1,this.destroyPopper())},showPicker:function(){var e=this;this.$isServer||(this.picker||this.mountPicker(),this.pickerVisible=this.picker.visible=!0,this.updatePopper(),this.picker.value=this.parsedValue,this.picker.resetView&&this.picker.resetView(),this.$nextTick((function(){e.picker.adjustSpinners&&e.picker.adjustSpinners()})))},mountPicker:function(){var e=this;this.picker=new Gn.a(this.panel).$mount(),this.picker.defaultValue=this.defaultValue,this.picker.defaultTime=this.defaultTime,this.picker.popperClass=this.popperClass,this.popperElm=this.picker.$el,this.picker.width=this.reference.getBoundingClientRect().width,this.picker.showTime="datetime"===this.type||"datetimerange"===this.type,this.picker.selectionMode=this.selectionMode,this.picker.unlinkPanels=this.unlinkPanels,this.picker.arrowControl=this.arrowControl||this.timeArrowControl||!1,this.$watch("format",(function(t){e.picker.format=t}));var t=function(){var t=e.pickerOptions;if(t&&t.selectableRange){var i=t.selectableRange,n=po.datetimerange.parser,r=so.timerange;i=Array.isArray(i)?i:[i],e.picker.selectableRange=i.map((function(t){return n(t,r,e.rangeSeparator)}))}for(var o in t)t.hasOwnProperty(o)&&"selectableRange"!==o&&(e.picker[o]=t[o]);e.format&&(e.picker.format=e.format)};t(),this.unwatchPickerOptions=this.$watch("pickerOptions",(function(){return t()}),{deep:!0}),this.$el.appendChild(this.picker.$el),this.picker.resetView&&this.picker.resetView(),this.picker.$on("dodestroy",this.doDestroy),this.picker.$on("pick",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.userInput=null,e.pickerVisible=e.picker.visible=i,e.emitInput(t),e.picker.resetView&&e.picker.resetView()})),this.picker.$on("select-range",(function(t,i,n){0!==e.refInput.length&&(n&&"min"!==n?"max"===n&&(e.refInput[1].setSelectionRange(t,i),e.refInput[1].focus()):(e.refInput[0].setSelectionRange(t,i),e.refInput[0].focus()))}))},unmountPicker:function(){this.picker&&(this.picker.$destroy(),this.picker.$off(),"function"===typeof this.unwatchPickerOptions&&this.unwatchPickerOptions(),this.picker.$el.parentNode.removeChild(this.picker.$el))},emitChange:function(e){_o(e,this.valueOnOpen)||(this.$emit("change",e),this.valueOnOpen=e,this.validateEvent&&this.dispatch("ElFormItem","el.form.change",e))},emitInput:function(e){var t=this.formatToValue(e);_o(this.value,t)||this.$emit("input",t)},isValidValue:function(e){return this.picker||this.mountPicker(),!this.picker.isValidValue||e&&this.picker.isValidValue(e)}}},yo=Ao,So=a(yo,io,no,!1,null,null,null);So.options.__file="packages/date-picker/src/picker.vue";var Co=So.exports,bo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-enter":e.handleEnter,"after-leave":e.handleLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts,"has-time":e.showTime},e.popperClass]},[i("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?i("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(t,n){return i("button",{key:n,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(i){e.handleShortcutClick(t)}}},[e._v(e._s(t.text))])})),0):e._e(),i("div",{staticClass:"el-picker-panel__body"},[e.showTime?i("div",{staticClass:"el-date-picker__time-header"},[i("span",{staticClass:"el-date-picker__editor-wrap"},[i("el-input",{attrs:{placeholder:e.t("el.datepicker.selectDate"),value:e.visibleDate,size:"small"},on:{input:function(t){return e.userInputDate=t},change:e.handleVisibleDateChange}})],1),i("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleTimePickClose,expression:"handleTimePickClose"}],staticClass:"el-date-picker__editor-wrap"},[i("el-input",{ref:"input",attrs:{placeholder:e.t("el.datepicker.selectTime"),value:e.visibleTime,size:"small"},on:{focus:function(t){e.timePickerVisible=!0},input:function(t){return e.userInputTime=t},change:e.handleVisibleTimeChange}}),i("time-picker",{ref:"timepicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.timePickerVisible},on:{pick:e.handleTimePick,mounted:e.proxyTimePickerDataProperties}})],1)]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:"time"!==e.currentView,expression:"currentView !== 'time'"}],staticClass:"el-date-picker__header",class:{"el-date-picker__header--bordered":"year"===e.currentView||"month"===e.currentView}},[i("button",{staticClass:"el-picker-panel__icon-btn el-date-picker__prev-btn el-icon-d-arrow-left",attrs:{type:"button","aria-label":e.t("el.datepicker.prevYear")},on:{click:e.prevYear}}),i("button",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-picker-panel__icon-btn el-date-picker__prev-btn el-icon-arrow-left",attrs:{type:"button","aria-label":e.t("el.datepicker.prevMonth")},on:{click:e.prevMonth}}),i("span",{staticClass:"el-date-picker__header-label",attrs:{role:"button"},on:{click:e.showYearPicker}},[e._v(e._s(e.yearLabel))]),i("span",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-date-picker__header-label",class:{active:"month"===e.currentView},attrs:{role:"button"},on:{click:e.showMonthPicker}},[e._v(e._s(e.t("el.datepicker.month"+(e.month+1))))]),i("button",{staticClass:"el-picker-panel__icon-btn el-date-picker__next-btn el-icon-d-arrow-right",attrs:{type:"button","aria-label":e.t("el.datepicker.nextYear")},on:{click:e.nextYear}}),i("button",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-picker-panel__icon-btn el-date-picker__next-btn el-icon-arrow-right",attrs:{type:"button","aria-label":e.t("el.datepicker.nextMonth")},on:{click:e.nextMonth}})]),i("div",{staticClass:"el-picker-panel__content"},[i("date-table",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],attrs:{"selection-mode":e.selectionMode,"first-day-of-week":e.firstDayOfWeek,value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"cell-class-name":e.cellClassName,"disabled-date":e.disabledDate},on:{pick:e.handleDatePick}}),i("year-table",{directives:[{name:"show",rawName:"v-show",value:"year"===e.currentView,expression:"currentView === 'year'"}],attrs:{value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"disabled-date":e.disabledDate},on:{pick:e.handleYearPick}}),i("month-table",{directives:[{name:"show",rawName:"v-show",value:"month"===e.currentView,expression:"currentView === 'month'"}],attrs:{value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"disabled-date":e.disabledDate},on:{pick:e.handleMonthPick}})],1)])],2),i("div",{directives:[{name:"show",rawName:"v-show",value:e.footerVisible&&"date"===e.currentView,expression:"footerVisible && currentView === 'date'"}],staticClass:"el-picker-panel__footer"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:"dates"!==e.selectionMode,expression:"selectionMode !== 'dates'"}],staticClass:"el-picker-panel__link-btn",attrs:{size:"mini",type:"text"},on:{click:e.changeToNow}},[e._v("\n        "+e._s(e.t("el.datepicker.now"))+"\n      ")]),i("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{plain:"",size:"mini"},on:{click:e.confirm}},[e._v("\n        "+e._s(e.t("el.datepicker.confirm"))+"\n      ")])],1)])])},To=[];bo._withStripped=!0;var Io=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-time-panel el-popper",class:e.popperClass},[i("div",{staticClass:"el-time-panel__content",class:{"has-seconds":e.showSeconds}},[i("time-spinner",{ref:"spinner",attrs:{"arrow-control":e.useArrow,"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,date:e.date},on:{change:e.handleChange,"select-range":e.setSelectionRange}})],1),i("div",{staticClass:"el-time-panel__footer"},[i("button",{staticClass:"el-time-panel__btn cancel",attrs:{type:"button"},on:{click:e.handleCancel}},[e._v(e._s(e.t("el.datepicker.cancel")))]),i("button",{staticClass:"el-time-panel__btn",class:{confirm:!e.disabled},attrs:{type:"button"},on:{click:function(t){e.handleConfirm()}}},[e._v(e._s(e.t("el.datepicker.confirm")))])])])])},Ro=[];Io._withStripped=!0;var wo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-time-spinner",class:{"has-seconds":e.showSeconds}},[e.arrowControl?e._e():[i("el-scrollbar",{ref:"hours",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(t){e.emitSelectRange("hours")},mousemove:function(t){e.adjustCurrentSpinner("hours")}}},e._l(e.hoursList,(function(t,n){return i("li",{key:n,staticClass:"el-time-spinner__item",class:{active:n===e.hours,disabled:t},on:{click:function(i){e.handleClick("hours",{value:n,disabled:t})}}},[e._v(e._s(("0"+(e.amPmMode?n%12||12:n)).slice(-2))+e._s(e.amPm(n)))])})),0),i("el-scrollbar",{ref:"minutes",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(t){e.emitSelectRange("minutes")},mousemove:function(t){e.adjustCurrentSpinner("minutes")}}},e._l(e.minutesList,(function(t,n){return i("li",{key:n,staticClass:"el-time-spinner__item",class:{active:n===e.minutes,disabled:!t},on:{click:function(t){e.handleClick("minutes",{value:n,disabled:!1})}}},[e._v(e._s(("0"+n).slice(-2)))])})),0),i("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.showSeconds,expression:"showSeconds"}],ref:"seconds",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(t){e.emitSelectRange("seconds")},mousemove:function(t){e.adjustCurrentSpinner("seconds")}}},e._l(60,(function(t,n){return i("li",{key:n,staticClass:"el-time-spinner__item",class:{active:n===e.seconds},on:{click:function(t){e.handleClick("seconds",{value:n,disabled:!1})}}},[e._v(e._s(("0"+n).slice(-2)))])})),0)],e.arrowControl?[i("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(t){e.emitSelectRange("hours")}}},[i("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),i("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),i("ul",{ref:"hours",staticClass:"el-time-spinner__list"},e._l(e.arrowHourList,(function(t,n){return i("li",{key:n,staticClass:"el-time-spinner__item",class:{active:t===e.hours,disabled:e.hoursList[t]}},[e._v(e._s(void 0===t?"":("0"+(e.amPmMode?t%12||12:t)).slice(-2)+e.amPm(t)))])})),0)]),i("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(t){e.emitSelectRange("minutes")}}},[i("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),i("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),i("ul",{ref:"minutes",staticClass:"el-time-spinner__list"},e._l(e.arrowMinuteList,(function(t,n){return i("li",{key:n,staticClass:"el-time-spinner__item",class:{active:t===e.minutes}},[e._v("\n          "+e._s(void 0===t?"":("0"+t).slice(-2))+"\n        ")])})),0)]),e.showSeconds?i("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(t){e.emitSelectRange("seconds")}}},[i("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),i("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),i("ul",{ref:"seconds",staticClass:"el-time-spinner__list"},e._l(e.arrowSecondList,(function(t,n){return i("li",{key:n,staticClass:"el-time-spinner__item",class:{active:t===e.seconds}},[e._v("\n          "+e._s(void 0===t?"":("0"+t).slice(-2))+"\n        ")])})),0)]):e._e()]:e._e()],2)},Oo=[];wo._withStripped=!0;var ko={components:{ElScrollbar:W.a},directives:{repeatClick:Dt},props:{date:{},defaultValue:{},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:String,default:""}},computed:{hours:function(){return this.date.getHours()},minutes:function(){return this.date.getMinutes()},seconds:function(){return this.date.getSeconds()},hoursList:function(){return Object(ro["getRangeHours"])(this.selectableRange)},minutesList:function(){return Object(ro["getRangeMinutes"])(this.selectableRange,this.hours)},arrowHourList:function(){var e=this.hours;return[e>0?e-1:void 0,e,e<23?e+1:void 0]},arrowMinuteList:function(){var e=this.minutes;return[e>0?e-1:void 0,e,e<59?e+1:void 0]},arrowSecondList:function(){var e=this.seconds;return[e>0?e-1:void 0,e,e<59?e+1:void 0]}},data:function(){return{selectableRange:[],currentScrollbar:null}},mounted:function(){var e=this;this.$nextTick((function(){!e.arrowControl&&e.bindScrollEvent()}))},methods:{increase:function(){this.scrollDown(1)},decrease:function(){this.scrollDown(-1)},modifyDateField:function(e,t){switch(e){case"hours":this.$emit("change",Object(ro["modifyTime"])(this.date,t,this.minutes,this.seconds));break;case"minutes":this.$emit("change",Object(ro["modifyTime"])(this.date,this.hours,t,this.seconds));break;case"seconds":this.$emit("change",Object(ro["modifyTime"])(this.date,this.hours,this.minutes,t));break}},handleClick:function(e,t){var i=t.value,n=t.disabled;n||(this.modifyDateField(e,i),this.emitSelectRange(e),this.adjustSpinner(e,i))},emitSelectRange:function(e){"hours"===e?this.$emit("select-range",0,2):"minutes"===e?this.$emit("select-range",3,5):"seconds"===e&&this.$emit("select-range",6,8),this.currentScrollbar=e},bindScrollEvent:function(){var e=this,t=function(t){e.$refs[t].wrap.onscroll=function(i){e.handleScroll(t,i)}};t("hours"),t("minutes"),t("seconds")},handleScroll:function(e){var t=Math.min(Math.round((this.$refs[e].wrap.scrollTop-(.5*this.scrollBarHeight(e)-10)/this.typeItemHeight(e)+3)/this.typeItemHeight(e)),"hours"===e?23:59);this.modifyDateField(e,t)},adjustSpinners:function(){this.adjustSpinner("hours",this.hours),this.adjustSpinner("minutes",this.minutes),this.adjustSpinner("seconds",this.seconds)},adjustCurrentSpinner:function(e){this.adjustSpinner(e,this[e])},adjustSpinner:function(e,t){if(!this.arrowControl){var i=this.$refs[e].wrap;i&&(i.scrollTop=Math.max(0,t*this.typeItemHeight(e)))}},scrollDown:function(e){var t=this;this.currentScrollbar||this.emitSelectRange("hours");var i=this.currentScrollbar,n=this.hoursList,r=this[i];if("hours"===this.currentScrollbar){var o=Math.abs(e);e=e>0?1:-1;var s=n.length;while(s--&&o)r=(r+e+n.length)%n.length,n[r]||o--;if(n[r])return}else r=(r+e+60)%60;this.modifyDateField(i,r),this.adjustSpinner(i,r),this.$nextTick((function(){return t.emitSelectRange(t.currentScrollbar)}))},amPm:function(e){var t="a"===this.amPmMode.toLowerCase();if(!t)return"";var i="A"===this.amPmMode,n=e<12?" am":" pm";return i&&(n=n.toUpperCase()),n},typeItemHeight:function(e){return this.$refs[e].$el.querySelector("li").offsetHeight},scrollBarHeight:function(e){return this.$refs[e].$el.offsetHeight}}},No=ko,Lo=a(No,wo,Oo,!1,null,null,null);Lo.options.__file="packages/date-picker/src/basic/time-spinner.vue";var Po=Lo.exports,Do={mixins:[_.a],components:{TimeSpinner:Po},props:{visible:Boolean,timeArrowControl:Boolean},watch:{visible:function(e){var t=this;e?(this.oldValue=this.value,this.$nextTick((function(){return t.$refs.spinner.emitSelectRange("hours")}))):this.needInitAdjust=!0},value:function(e){var t=this,i=void 0;e instanceof Date?i=Object(ro["limitTimeRange"])(e,this.selectableRange,this.format):e||(i=this.defaultValue?new Date(this.defaultValue):new Date),this.date=i,this.visible&&this.needInitAdjust&&(this.$nextTick((function(e){return t.adjustSpinners()})),this.needInitAdjust=!1)},selectableRange:function(e){this.$refs.spinner.selectableRange=e},defaultValue:function(e){Object(ro["isDate"])(this.value)||(this.date=e?new Date(e):new Date)}},data:function(){return{popperClass:"",format:"HH:mm:ss",value:"",defaultValue:null,date:new Date,oldValue:new Date,selectableRange:[],selectionRange:[0,2],disabled:!1,arrowControl:!1,needInitAdjust:!0}},computed:{showSeconds:function(){return-1!==(this.format||"").indexOf("ss")},useArrow:function(){return this.arrowControl||this.timeArrowControl||!1},amPmMode:function(){return-1!==(this.format||"").indexOf("A")?"A":-1!==(this.format||"").indexOf("a")?"a":""}},methods:{handleCancel:function(){this.$emit("pick",this.oldValue,!1)},handleChange:function(e){this.visible&&(this.date=Object(ro["clearMilliseconds"])(e),this.isValidValue(this.date)&&this.$emit("pick",this.date,!0))},setSelectionRange:function(e,t){this.$emit("select-range",e,t),this.selectionRange=[e,t]},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];if(!t){var i=Object(ro["clearMilliseconds"])(Object(ro["limitTimeRange"])(this.date,this.selectableRange,this.format));this.$emit("pick",i,e,t)}},handleKeydown:function(e){var t=e.keyCode,i={38:-1,40:1,37:-1,39:1};if(37===t||39===t){var n=i[t];return this.changeSelectionRange(n),void e.preventDefault()}if(38===t||40===t){var r=i[t];return this.$refs.spinner.scrollDown(r),void e.preventDefault()}},isValidValue:function(e){return Object(ro["timeWithinRange"])(e,this.selectableRange,this.format)},adjustSpinners:function(){return this.$refs.spinner.adjustSpinners()},changeSelectionRange:function(e){var t=[0,3].concat(this.showSeconds?[6]:[]),i=["hours","minutes"].concat(this.showSeconds?["seconds"]:[]),n=t.indexOf(this.selectionRange[0]),r=(n+e+t.length)%t.length;this.$refs.spinner.emitSelectRange(i[r])}},mounted:function(){var e=this;this.$nextTick((function(){return e.handleConfirm(!0,!0)})),this.$emit("mounted")}},Mo=Do,xo=a(Mo,Io,Ro,!1,null,null,null);xo.options.__file="packages/date-picker/src/panel/time.vue";var Bo=xo.exports,Uo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("table",{staticClass:"el-year-table",on:{click:e.handleYearTableClick}},[i("tbody",[i("tr",[i("td",{staticClass:"available",class:e.getCellStyle(e.startYear+0)},[i("a",{staticClass:"cell"},[e._v(e._s(e.startYear))])]),i("td",{staticClass:"available",class:e.getCellStyle(e.startYear+1)},[i("a",{staticClass:"cell"},[e._v(e._s(e.startYear+1))])]),i("td",{staticClass:"available",class:e.getCellStyle(e.startYear+2)},[i("a",{staticClass:"cell"},[e._v(e._s(e.startYear+2))])]),i("td",{staticClass:"available",class:e.getCellStyle(e.startYear+3)},[i("a",{staticClass:"cell"},[e._v(e._s(e.startYear+3))])])]),i("tr",[i("td",{staticClass:"available",class:e.getCellStyle(e.startYear+4)},[i("a",{staticClass:"cell"},[e._v(e._s(e.startYear+4))])]),i("td",{staticClass:"available",class:e.getCellStyle(e.startYear+5)},[i("a",{staticClass:"cell"},[e._v(e._s(e.startYear+5))])]),i("td",{staticClass:"available",class:e.getCellStyle(e.startYear+6)},[i("a",{staticClass:"cell"},[e._v(e._s(e.startYear+6))])]),i("td",{staticClass:"available",class:e.getCellStyle(e.startYear+7)},[i("a",{staticClass:"cell"},[e._v(e._s(e.startYear+7))])])]),i("tr",[i("td",{staticClass:"available",class:e.getCellStyle(e.startYear+8)},[i("a",{staticClass:"cell"},[e._v(e._s(e.startYear+8))])]),i("td",{staticClass:"available",class:e.getCellStyle(e.startYear+9)},[i("a",{staticClass:"cell"},[e._v(e._s(e.startYear+9))])]),i("td"),i("td")])])])},Fo=[];Uo._withStripped=!0;var Vo=function(e){var t=Object(ro["getDayCountOfYear"])(e),i=new Date(e,0,1);return Object(ro["range"])(t).map((function(e){return Object(ro["nextDate"])(i,e)}))},jo={props:{disabledDate:{},value:{},defaultValue:{validator:function(e){return null===e||e instanceof Date&&Object(ro["isDate"])(e)}},date:{}},computed:{startYear:function(){return 10*Math.floor(this.date.getFullYear()/10)}},methods:{getCellStyle:function(e){var t={},i=new Date;return t.disabled="function"===typeof this.disabledDate&&Vo(e).every(this.disabledDate),t.current=Object(v["arrayFindIndex"])(Object(v["coerceTruthyValueToArray"])(this.value),(function(t){return t.getFullYear()===e}))>=0,t.today=i.getFullYear()===e,t.default=this.defaultValue&&this.defaultValue.getFullYear()===e,t},handleYearTableClick:function(e){var t=e.target;if("A"===t.tagName){if(Object(Ue["hasClass"])(t.parentNode,"disabled"))return;var i=t.textContent||t.innerText;this.$emit("pick",Number(i))}}}},Go=jo,Ho=a(Go,Uo,Fo,!1,null,null,null);Ho.options.__file="packages/date-picker/src/basic/year-table.vue";var Qo=Ho.exports,Wo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("table",{staticClass:"el-month-table",on:{click:e.handleMonthTableClick,mousemove:e.handleMouseMove}},[i("tbody",e._l(e.rows,(function(t,n){return i("tr",{key:n},e._l(t,(function(t,n){return i("td",{key:n,class:e.getCellStyle(t)},[i("div",[i("a",{staticClass:"cell"},[e._v(e._s(e.t("el.datepicker.months."+e.months[t.text])))])])])})),0)})),0)])},qo=[];Wo._withStripped=!0;var $o=function(e,t){var i=Object(ro["getDayCountOfMonth"])(e,t),n=new Date(e,t,1);return Object(ro["range"])(i).map((function(e){return Object(ro["nextDate"])(n,e)}))},zo=function(e){return new Date(e.getFullYear(),e.getMonth())},Zo=function(e){return"number"===typeof e||"string"===typeof e?zo(new Date(e)).getTime():e instanceof Date?zo(e).getTime():NaN},Yo={props:{disabledDate:{},value:{},selectionMode:{default:"month"},minDate:{},maxDate:{},defaultValue:{validator:function(e){return null===e||Object(ro["isDate"])(e)||Array.isArray(e)&&e.every(ro["isDate"])}},date:{},rangeState:{default:function(){return{endDate:null,selecting:!1}}}},mixins:[_.a],watch:{"rangeState.endDate":function(e){this.markRange(this.minDate,e)},minDate:function(e,t){Zo(e)!==Zo(t)&&this.markRange(this.minDate,this.maxDate)},maxDate:function(e,t){Zo(e)!==Zo(t)&&this.markRange(this.minDate,this.maxDate)}},data:function(){return{months:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],tableRows:[[],[],[]],lastRow:null,lastColumn:null}},methods:{cellMatchesDate:function(e,t){var i=new Date(t);return this.date.getFullYear()===i.getFullYear()&&Number(e.text)===i.getMonth()},getCellStyle:function(e){var t=this,i={},n=this.date.getFullYear(),r=new Date,o=e.text,s=this.defaultValue?Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue]:[];return i.disabled="function"===typeof this.disabledDate&&$o(n,o).every(this.disabledDate),i.current=Object(v["arrayFindIndex"])(Object(v["coerceTruthyValueToArray"])(this.value),(function(e){return e.getFullYear()===n&&e.getMonth()===o}))>=0,i.today=r.getFullYear()===n&&r.getMonth()===o,i.default=s.some((function(i){return t.cellMatchesDate(e,i)})),e.inRange&&(i["in-range"]=!0,e.start&&(i["start-date"]=!0),e.end&&(i["end-date"]=!0)),i},getMonthOfCell:function(e){var t=this.date.getFullYear();return new Date(t,e,1)},markRange:function(e,t){e=Zo(e),t=Zo(t)||e;var i=[Math.min(e,t),Math.max(e,t)];e=i[0],t=i[1];for(var n=this.rows,r=0,o=n.length;r<o;r++)for(var s=n[r],a=0,c=s.length;a<c;a++){var l=s[a],u=4*r+a,d=new Date(this.date.getFullYear(),u).getTime();l.inRange=e&&d>=e&&d<=t,l.start=e&&d===e,l.end=t&&d===t}},handleMouseMove:function(e){if(this.rangeState.selecting){var t=e.target;if("A"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName){var i=t.parentNode.rowIndex,n=t.cellIndex;this.rows[i][n].disabled||i===this.lastRow&&n===this.lastColumn||(this.lastRow=i,this.lastColumn=n,this.$emit("changerange",{minDate:this.minDate,maxDate:this.maxDate,rangeState:{selecting:!0,endDate:this.getMonthOfCell(4*i+n)}}))}}},handleMonthTableClick:function(e){var t=e.target;if("A"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName&&!Object(Ue["hasClass"])(t,"disabled")){var i=t.cellIndex,n=t.parentNode.rowIndex,r=4*n+i,o=this.getMonthOfCell(r);"range"===this.selectionMode?this.rangeState.selecting?(o>=this.minDate?this.$emit("pick",{minDate:this.minDate,maxDate:o}):this.$emit("pick",{minDate:o,maxDate:this.minDate}),this.rangeState.selecting=!1):(this.$emit("pick",{minDate:o,maxDate:null}),this.rangeState.selecting=!0):this.$emit("pick",r)}}},computed:{rows:function(){for(var e=this,t=this.tableRows,i=this.disabledDate,n=[],r=Zo(new Date),o=0;o<3;o++)for(var s=t[o],a=function(t){var a=s[t];a||(a={row:o,column:t,type:"normal",inRange:!1,start:!1,end:!1}),a.type="normal";var c=4*o+t,l=new Date(e.date.getFullYear(),c).getTime();a.inRange=l>=Zo(e.minDate)&&l<=Zo(e.maxDate),a.start=e.minDate&&l===Zo(e.minDate),a.end=e.maxDate&&l===Zo(e.maxDate);var u=l===r;u&&(a.type="today"),a.text=c;var d=new Date(l);a.disabled="function"===typeof i&&i(d),a.selected=Object(v["arrayFind"])(n,(function(e){return e.getTime()===d.getTime()})),e.$set(s,t,a)},c=0;c<4;c++)a(c);return t}}},Ko=Yo,Jo=a(Ko,Wo,qo,!1,null,null,null);Jo.options.__file="packages/date-picker/src/basic/month-table.vue";var Xo=Jo.exports,es=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("table",{staticClass:"el-date-table",class:{"is-week-mode":"week"===e.selectionMode},attrs:{cellspacing:"0",cellpadding:"0"},on:{click:e.handleClick,mousemove:e.handleMouseMove}},[i("tbody",[i("tr",[e.showWeekNumber?i("th",[e._v(e._s(e.t("el.datepicker.week")))]):e._e(),e._l(e.WEEKS,(function(t,n){return i("th",{key:n},[e._v(e._s(e.t("el.datepicker.weeks."+t)))])}))],2),e._l(e.rows,(function(t,n){return i("tr",{key:n,staticClass:"el-date-table__row",class:{current:e.isWeekActive(t[1])}},e._l(t,(function(t,n){return i("td",{key:n,class:e.getCellClasses(t)},[i("div",[i("span",[e._v("\n          "+e._s(t.text)+"\n        ")])])])})),0)}))],2)])},ts=[];es._withStripped=!0;var is=["sun","mon","tue","wed","thu","fri","sat"],ns=function(e){return"number"===typeof e||"string"===typeof e?Object(ro["clearTime"])(new Date(e)).getTime():e instanceof Date?Object(ro["clearTime"])(e).getTime():NaN},rs=function(e,t){var i="function"===typeof t?Object(v["arrayFindIndex"])(e,t):e.indexOf(t);return i>=0?[].concat(e.slice(0,i),e.slice(i+1)):e},os={mixins:[_.a],props:{firstDayOfWeek:{default:7,type:Number,validator:function(e){return e>=1&&e<=7}},value:{},defaultValue:{validator:function(e){return null===e||Object(ro["isDate"])(e)||Array.isArray(e)&&e.every(ro["isDate"])}},date:{},selectionMode:{default:"day"},showWeekNumber:{type:Boolean,default:!1},disabledDate:{},cellClassName:{},minDate:{},maxDate:{},rangeState:{default:function(){return{endDate:null,selecting:!1}}}},computed:{offsetDay:function(){var e=this.firstDayOfWeek;return e>3?7-e:-e},WEEKS:function(){var e=this.firstDayOfWeek;return is.concat(is).slice(e,e+7)},year:function(){return this.date.getFullYear()},month:function(){return this.date.getMonth()},startDate:function(){return Object(ro["getStartDateOfMonth"])(this.year,this.month)},rows:function(){var e=this,t=new Date(this.year,this.month,1),i=Object(ro["getFirstDayOfMonth"])(t),n=Object(ro["getDayCountOfMonth"])(t.getFullYear(),t.getMonth()),r=Object(ro["getDayCountOfMonth"])(t.getFullYear(),0===t.getMonth()?11:t.getMonth()-1);i=0===i?7:i;for(var o=this.offsetDay,s=this.tableRows,a=1,c=this.startDate,l=this.disabledDate,u=this.cellClassName,d="dates"===this.selectionMode?Object(v["coerceTruthyValueToArray"])(this.value):[],h=ns(new Date),p=0;p<6;p++){var f=s[p];this.showWeekNumber&&(f[0]||(f[0]={type:"week",text:Object(ro["getWeekNumber"])(Object(ro["nextDate"])(c,7*p+1))}));for(var g=function(t){var s=f[e.showWeekNumber?t+1:t];s||(s={row:p,column:t,type:"normal",inRange:!1,start:!1,end:!1}),s.type="normal";var g=7*p+t,m=Object(ro["nextDate"])(c,g-o).getTime();s.inRange=m>=ns(e.minDate)&&m<=ns(e.maxDate),s.start=e.minDate&&m===ns(e.minDate),s.end=e.maxDate&&m===ns(e.maxDate);var _=m===h;if(_&&(s.type="today"),p>=0&&p<=1){var E=i+o<0?7+i+o:i+o;t+7*p>=E?s.text=a++:(s.text=r-(E-t%7)+1+7*p,s.type="prev-month")}else a<=n?s.text=a++:(s.text=a++-n,s.type="next-month");var A=new Date(m);s.disabled="function"===typeof l&&l(A),s.selected=Object(v["arrayFind"])(d,(function(e){return e.getTime()===A.getTime()})),s.customClass="function"===typeof u&&u(A),e.$set(f,e.showWeekNumber?t+1:t,s)},m=0;m<7;m++)g(m);if("week"===this.selectionMode){var _=this.showWeekNumber?1:0,E=this.showWeekNumber?7:6,A=this.isWeekActive(f[_+1]);f[_].inRange=A,f[_].start=A,f[E].inRange=A,f[E].end=A}}return s}},watch:{"rangeState.endDate":function(e){this.markRange(this.minDate,e)},minDate:function(e,t){ns(e)!==ns(t)&&this.markRange(this.minDate,this.maxDate)},maxDate:function(e,t){ns(e)!==ns(t)&&this.markRange(this.minDate,this.maxDate)}},data:function(){return{tableRows:[[],[],[],[],[],[]],lastRow:null,lastColumn:null}},methods:{cellMatchesDate:function(e,t){var i=new Date(t);return this.year===i.getFullYear()&&this.month===i.getMonth()&&Number(e.text)===i.getDate()},getCellClasses:function(e){var t=this,i=this.selectionMode,n=this.defaultValue?Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue]:[],r=[];return"normal"!==e.type&&"today"!==e.type||e.disabled?r.push(e.type):(r.push("available"),"today"===e.type&&r.push("today")),"normal"===e.type&&n.some((function(i){return t.cellMatchesDate(e,i)}))&&r.push("default"),"day"!==i||"normal"!==e.type&&"today"!==e.type||!this.cellMatchesDate(e,this.value)||r.push("current"),!e.inRange||"normal"!==e.type&&"today"!==e.type&&"week"!==this.selectionMode||(r.push("in-range"),e.start&&r.push("start-date"),e.end&&r.push("end-date")),e.disabled&&r.push("disabled"),e.selected&&r.push("selected"),e.customClass&&r.push(e.customClass),r.join(" ")},getDateOfCell:function(e,t){var i=7*e+(t-(this.showWeekNumber?1:0))-this.offsetDay;return Object(ro["nextDate"])(this.startDate,i)},isWeekActive:function(e){if("week"!==this.selectionMode)return!1;var t=new Date(this.year,this.month,1),i=t.getFullYear(),n=t.getMonth();if("prev-month"===e.type&&(t.setMonth(0===n?11:n-1),t.setFullYear(0===n?i-1:i)),"next-month"===e.type&&(t.setMonth(11===n?0:n+1),t.setFullYear(11===n?i+1:i)),t.setDate(parseInt(e.text,10)),Object(ro["isDate"])(this.value)){var r=(this.value.getDay()-this.firstDayOfWeek+7)%7-1,o=Object(ro["prevDate"])(this.value,r);return o.getTime()===t.getTime()}return!1},markRange:function(e,t){e=ns(e),t=ns(t)||e;var i=[Math.min(e,t),Math.max(e,t)];e=i[0],t=i[1];for(var n=this.startDate,r=this.rows,o=0,s=r.length;o<s;o++)for(var a=r[o],c=0,l=a.length;c<l;c++)if(!this.showWeekNumber||0!==c){var u=a[c],d=7*o+c+(this.showWeekNumber?-1:0),h=Object(ro["nextDate"])(n,d-this.offsetDay).getTime();u.inRange=e&&h>=e&&h<=t,u.start=e&&h===e,u.end=t&&h===t}},handleMouseMove:function(e){if(this.rangeState.selecting){var t=e.target;if("SPAN"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName){var i=t.parentNode.rowIndex-1,n=t.cellIndex;this.rows[i][n].disabled||i===this.lastRow&&n===this.lastColumn||(this.lastRow=i,this.lastColumn=n,this.$emit("changerange",{minDate:this.minDate,maxDate:this.maxDate,rangeState:{selecting:!0,endDate:this.getDateOfCell(i,n)}}))}}},handleClick:function(e){var t=e.target;if("SPAN"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName){var i=t.parentNode.rowIndex-1,n="week"===this.selectionMode?1:t.cellIndex,r=this.rows[i][n];if(!r.disabled&&"week"!==r.type){var o=this.getDateOfCell(i,n);if("range"===this.selectionMode)this.rangeState.selecting?(o>=this.minDate?this.$emit("pick",{minDate:this.minDate,maxDate:o}):this.$emit("pick",{minDate:o,maxDate:this.minDate}),this.rangeState.selecting=!1):(this.$emit("pick",{minDate:o,maxDate:null}),this.rangeState.selecting=!0);else if("day"===this.selectionMode)this.$emit("pick",o);else if("week"===this.selectionMode){var s=Object(ro["getWeekNumber"])(o),a=o.getFullYear()+"w"+s;this.$emit("pick",{year:o.getFullYear(),week:s,value:a,date:o})}else if("dates"===this.selectionMode){var c=this.value||[],l=r.selected?rs(c,(function(e){return e.getTime()===o.getTime()})):[].concat(c,[o]);this.$emit("pick",l)}}}}}},ss=os,as=a(ss,es,ts,!1,null,null,null);as.options.__file="packages/date-picker/src/basic/date-table.vue";var cs=as.exports,ls={mixins:[_.a],directives:{Clickoutside:F.a},watch:{showTime:function(e){var t=this;e&&this.$nextTick((function(e){var i=t.$refs.input.$el;i&&(t.pickerWidth=i.getBoundingClientRect().width+10)}))},value:function(e){"dates"===this.selectionMode&&this.value||(Object(ro["isDate"])(e)?this.date=new Date(e):this.date=this.getDefaultValue())},defaultValue:function(e){Object(ro["isDate"])(this.value)||(this.date=e?new Date(e):new Date)},timePickerVisible:function(e){var t=this;e&&this.$nextTick((function(){return t.$refs.timepicker.adjustSpinners()}))},selectionMode:function(e){"month"===e?"year"===this.currentView&&"month"===this.currentView||(this.currentView="month"):"dates"===e&&(this.currentView="date")}},methods:{proxyTimePickerDataProperties:function(){var e=this,t=function(t){e.$refs.timepicker.format=t},i=function(t){e.$refs.timepicker.value=t},n=function(t){e.$refs.timepicker.date=t},r=function(t){e.$refs.timepicker.selectableRange=t};this.$watch("value",i),this.$watch("date",n),this.$watch("selectableRange",r),t(this.timeFormat),i(this.value),n(this.date),r(this.selectableRange)},handleClear:function(){this.date=this.getDefaultValue(),this.$emit("pick",null)},emit:function(e){for(var t=this,i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];if(e)if(Array.isArray(e)){var o=e.map((function(e){return t.showTime?Object(ro["clearMilliseconds"])(e):Object(ro["clearTime"])(e)}));this.$emit.apply(this,["pick",o].concat(n))}else this.$emit.apply(this,["pick",this.showTime?Object(ro["clearMilliseconds"])(e):Object(ro["clearTime"])(e)].concat(n));else this.$emit.apply(this,["pick",e].concat(n));this.userInputDate=null,this.userInputTime=null},showMonthPicker:function(){this.currentView="month"},showYearPicker:function(){this.currentView="year"},prevMonth:function(){this.date=Object(ro["prevMonth"])(this.date)},nextMonth:function(){this.date=Object(ro["nextMonth"])(this.date)},prevYear:function(){"year"===this.currentView?this.date=Object(ro["prevYear"])(this.date,10):this.date=Object(ro["prevYear"])(this.date)},nextYear:function(){"year"===this.currentView?this.date=Object(ro["nextYear"])(this.date,10):this.date=Object(ro["nextYear"])(this.date)},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},handleTimePick:function(e,t,i){if(Object(ro["isDate"])(e)){var n=this.value?Object(ro["modifyTime"])(this.value,e.getHours(),e.getMinutes(),e.getSeconds()):Object(ro["modifyWithTimeString"])(this.getDefaultValue(),this.defaultTime);this.date=n,this.emit(this.date,!0)}else this.emit(e,!0);i||(this.timePickerVisible=t)},handleTimePickClose:function(){this.timePickerVisible=!1},handleMonthPick:function(e){"month"===this.selectionMode?(this.date=Object(ro["modifyDate"])(this.date,this.year,e,1),this.emit(this.date)):(this.date=Object(ro["changeYearMonthAndClampDate"])(this.date,this.year,e),this.currentView="date")},handleDatePick:function(e){if("day"===this.selectionMode){var t=this.value?Object(ro["modifyDate"])(this.value,e.getFullYear(),e.getMonth(),e.getDate()):Object(ro["modifyWithTimeString"])(e,this.defaultTime);this.checkDateWithinRange(t)||(t=Object(ro["modifyDate"])(this.selectableRange[0][0],e.getFullYear(),e.getMonth(),e.getDate())),this.date=t,this.emit(this.date,this.showTime)}else"week"===this.selectionMode?this.emit(e.date):"dates"===this.selectionMode&&this.emit(e,!0)},handleYearPick:function(e){"year"===this.selectionMode?(this.date=Object(ro["modifyDate"])(this.date,e,0,1),this.emit(this.date)):(this.date=Object(ro["changeYearMonthAndClampDate"])(this.date,e,this.month),this.currentView="month")},changeToNow:function(){this.disabledDate&&this.disabledDate(new Date)||!this.checkDateWithinRange(new Date)||(this.date=new Date,this.emit(this.date))},confirm:function(){if("dates"===this.selectionMode)this.emit(this.value);else{var e=this.value?this.value:Object(ro["modifyWithTimeString"])(this.getDefaultValue(),this.defaultTime);this.date=new Date(e),this.emit(e)}},resetView:function(){"month"===this.selectionMode?this.currentView="month":"year"===this.selectionMode?this.currentView="year":this.currentView="date"},handleEnter:function(){document.body.addEventListener("keydown",this.handleKeydown)},handleLeave:function(){this.$emit("dodestroy"),document.body.removeEventListener("keydown",this.handleKeydown)},handleKeydown:function(e){var t=e.keyCode,i=[38,40,37,39];this.visible&&!this.timePickerVisible&&(-1!==i.indexOf(t)&&(this.handleKeyControl(t),e.stopPropagation(),e.preventDefault()),13===t&&null===this.userInputDate&&null===this.userInputTime&&this.emit(this.date,!1))},handleKeyControl:function(e){var t={year:{38:-4,40:4,37:-1,39:1,offset:function(e,t){return e.setFullYear(e.getFullYear()+t)}},month:{38:-4,40:4,37:-1,39:1,offset:function(e,t){return e.setMonth(e.getMonth()+t)}},week:{38:-1,40:1,37:-1,39:1,offset:function(e,t){return e.setDate(e.getDate()+7*t)}},day:{38:-7,40:7,37:-1,39:1,offset:function(e,t){return e.setDate(e.getDate()+t)}}},i=this.selectionMode,n=31536e6,r=this.date.getTime(),o=new Date(this.date.getTime());while(Math.abs(r-o.getTime())<=n){var s=t[i];if(s.offset(o,s[e]),"function"!==typeof this.disabledDate||!this.disabledDate(o)){this.date=o,this.$emit("pick",o,!0);break}}},handleVisibleTimeChange:function(e){var t=Object(ro["parseDate"])(e,this.timeFormat);t&&this.checkDateWithinRange(t)&&(this.date=Object(ro["modifyDate"])(t,this.year,this.month,this.monthDate),this.userInputTime=null,this.$refs.timepicker.value=this.date,this.timePickerVisible=!1,this.emit(this.date,!0))},handleVisibleDateChange:function(e){var t=Object(ro["parseDate"])(e,this.dateFormat);if(t){if("function"===typeof this.disabledDate&&this.disabledDate(t))return;this.date=Object(ro["modifyTime"])(t,this.date.getHours(),this.date.getMinutes(),this.date.getSeconds()),this.userInputDate=null,this.resetView(),this.emit(this.date,!0)}},isValidValue:function(e){return e&&!isNaN(e)&&("function"!==typeof this.disabledDate||!this.disabledDate(e))&&this.checkDateWithinRange(e)},getDefaultValue:function(){return this.defaultValue?new Date(this.defaultValue):new Date},checkDateWithinRange:function(e){return!(this.selectableRange.length>0)||Object(ro["timeWithinRange"])(e,this.selectableRange,this.format||"HH:mm:ss")}},components:{TimePicker:Bo,YearTable:Qo,MonthTable:Xo,DateTable:cs,ElInput:g.a,ElButton:se.a},data:function(){return{popperClass:"",date:new Date,value:"",defaultValue:null,defaultTime:null,showTime:!1,selectionMode:"day",shortcuts:"",visible:!1,currentView:"date",disabledDate:"",cellClassName:"",selectableRange:[],firstDayOfWeek:7,showWeekNumber:!1,timePickerVisible:!1,format:"",arrowControl:!1,userInputDate:null,userInputTime:null}},computed:{year:function(){return this.date.getFullYear()},month:function(){return this.date.getMonth()},week:function(){return Object(ro["getWeekNumber"])(this.date)},monthDate:function(){return this.date.getDate()},footerVisible:function(){return this.showTime||"dates"===this.selectionMode},visibleTime:function(){return null!==this.userInputTime?this.userInputTime:Object(ro["formatDate"])(this.value||this.defaultValue,this.timeFormat)},visibleDate:function(){return null!==this.userInputDate?this.userInputDate:Object(ro["formatDate"])(this.value||this.defaultValue,this.dateFormat)},yearLabel:function(){var e=this.t("el.datepicker.year");if("year"===this.currentView){var t=10*Math.floor(this.year/10);return e?t+" "+e+" - "+(t+9)+" "+e:t+" - "+(t+9)}return this.year+" "+e},timeFormat:function(){return this.format?Object(ro["extractTimeFormat"])(this.format):"HH:mm:ss"},dateFormat:function(){return this.format?Object(ro["extractDateFormat"])(this.format):"yyyy-MM-dd"}}},us=ls,ds=a(us,bo,To,!1,null,null,null);ds.options.__file="packages/date-picker/src/panel/date.vue";var hs=ds.exports,ps=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-range-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts,"has-time":e.showTime},e.popperClass]},[i("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?i("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(t,n){return i("button",{key:n,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(i){e.handleShortcutClick(t)}}},[e._v(e._s(t.text))])})),0):e._e(),i("div",{staticClass:"el-picker-panel__body"},[e.showTime?i("div",{staticClass:"el-date-range-picker__time-header"},[i("span",{staticClass:"el-date-range-picker__editors-wrap"},[i("span",{staticClass:"el-date-range-picker__time-picker-wrap"},[i("el-input",{ref:"minInput",staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startDate"),value:e.minVisibleDate},on:{input:function(t){return e.handleDateInput(t,"min")},change:function(t){return e.handleDateChange(t,"min")}}})],1),i("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleMinTimeClose,expression:"handleMinTimeClose"}],staticClass:"el-date-range-picker__time-picker-wrap"},[i("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startTime"),value:e.minVisibleTime},on:{focus:function(t){e.minTimePickerVisible=!0},input:function(t){return e.handleTimeInput(t,"min")},change:function(t){return e.handleTimeChange(t,"min")}}}),i("time-picker",{ref:"minTimePicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.minTimePickerVisible},on:{pick:e.handleMinTimePick,mounted:function(t){e.$refs.minTimePicker.format=e.timeFormat}}})],1)]),i("span",{staticClass:"el-icon-arrow-right"}),i("span",{staticClass:"el-date-range-picker__editors-wrap is-right"},[i("span",{staticClass:"el-date-range-picker__time-picker-wrap"},[i("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endDate"),value:e.maxVisibleDate,readonly:!e.minDate},on:{input:function(t){return e.handleDateInput(t,"max")},change:function(t){return e.handleDateChange(t,"max")}}})],1),i("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleMaxTimeClose,expression:"handleMaxTimeClose"}],staticClass:"el-date-range-picker__time-picker-wrap"},[i("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endTime"),value:e.maxVisibleTime,readonly:!e.minDate},on:{focus:function(t){e.minDate&&(e.maxTimePickerVisible=!0)},input:function(t){return e.handleTimeInput(t,"max")},change:function(t){return e.handleTimeChange(t,"max")}}}),i("time-picker",{ref:"maxTimePicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.maxTimePickerVisible},on:{pick:e.handleMaxTimePick,mounted:function(t){e.$refs.maxTimePicker.format=e.timeFormat}}})],1)])]):e._e(),i("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-left"},[i("div",{staticClass:"el-date-range-picker__header"},[i("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevYear}}),i("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevMonth}}),e.unlinkPanels?i("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.leftNextYear}}):e._e(),e.unlinkPanels?i("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-right",class:{"is-disabled":!e.enableMonthArrow},attrs:{type:"button",disabled:!e.enableMonthArrow},on:{click:e.leftNextMonth}}):e._e(),i("div",[e._v(e._s(e.leftLabel))])]),i("date-table",{attrs:{"selection-mode":"range",date:e.leftDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,"first-day-of-week":e.firstDayOfWeek},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1),i("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-right"},[i("div",{staticClass:"el-date-range-picker__header"},[e.unlinkPanels?i("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.rightPrevYear}}):e._e(),e.unlinkPanels?i("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-left",class:{"is-disabled":!e.enableMonthArrow},attrs:{type:"button",disabled:!e.enableMonthArrow},on:{click:e.rightPrevMonth}}):e._e(),i("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",attrs:{type:"button"},on:{click:e.rightNextYear}}),i("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-right",attrs:{type:"button"},on:{click:e.rightNextMonth}}),i("div",[e._v(e._s(e.rightLabel))])]),i("date-table",{attrs:{"selection-mode":"range",date:e.rightDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,"first-day-of-week":e.firstDayOfWeek},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1)])],2),e.showTime?i("div",{staticClass:"el-picker-panel__footer"},[i("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{size:"mini",type:"text"},on:{click:e.handleClear}},[e._v("\n        "+e._s(e.t("el.datepicker.clear"))+"\n      ")]),i("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{plain:"",size:"mini",disabled:e.btnDisabled},on:{click:function(t){e.handleConfirm(!1)}}},[e._v("\n        "+e._s(e.t("el.datepicker.confirm"))+"\n      ")])],1):e._e()])])},fs=[];ps._withStripped=!0;var gs=function(e){return Array.isArray(e)?[new Date(e[0]),new Date(e[1])]:e?[new Date(e),Object(ro["nextDate"])(new Date(e),1)]:[new Date,Object(ro["nextDate"])(new Date,1)]},ms={mixins:[_.a],directives:{Clickoutside:F.a},computed:{btnDisabled:function(){return!(this.minDate&&this.maxDate&&!this.selecting&&this.isValidValue([this.minDate,this.maxDate]))},leftLabel:function(){return this.leftDate.getFullYear()+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+(this.leftDate.getMonth()+1))},rightLabel:function(){return this.rightDate.getFullYear()+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+(this.rightDate.getMonth()+1))},leftYear:function(){return this.leftDate.getFullYear()},leftMonth:function(){return this.leftDate.getMonth()},leftMonthDate:function(){return this.leftDate.getDate()},rightYear:function(){return this.rightDate.getFullYear()},rightMonth:function(){return this.rightDate.getMonth()},rightMonthDate:function(){return this.rightDate.getDate()},minVisibleDate:function(){return null!==this.dateUserInput.min?this.dateUserInput.min:this.minDate?Object(ro["formatDate"])(this.minDate,this.dateFormat):""},maxVisibleDate:function(){return null!==this.dateUserInput.max?this.dateUserInput.max:this.maxDate||this.minDate?Object(ro["formatDate"])(this.maxDate||this.minDate,this.dateFormat):""},minVisibleTime:function(){return null!==this.timeUserInput.min?this.timeUserInput.min:this.minDate?Object(ro["formatDate"])(this.minDate,this.timeFormat):""},maxVisibleTime:function(){return null!==this.timeUserInput.max?this.timeUserInput.max:this.maxDate||this.minDate?Object(ro["formatDate"])(this.maxDate||this.minDate,this.timeFormat):""},timeFormat:function(){return this.format?Object(ro["extractTimeFormat"])(this.format):"HH:mm:ss"},dateFormat:function(){return this.format?Object(ro["extractDateFormat"])(this.format):"yyyy-MM-dd"},enableMonthArrow:function(){var e=(this.leftMonth+1)%12,t=this.leftMonth+1>=12?1:0;return this.unlinkPanels&&new Date(this.leftYear+t,e)<new Date(this.rightYear,this.rightMonth)},enableYearArrow:function(){return this.unlinkPanels&&12*this.rightYear+this.rightMonth-(12*this.leftYear+this.leftMonth+1)>=12}},data:function(){return{popperClass:"",value:[],defaultValue:null,defaultTime:null,minDate:"",maxDate:"",leftDate:new Date,rightDate:Object(ro["nextMonth"])(new Date),rangeState:{endDate:null,selecting:!1,row:null,column:null},showTime:!1,shortcuts:"",visible:"",disabledDate:"",cellClassName:"",firstDayOfWeek:7,minTimePickerVisible:!1,maxTimePickerVisible:!1,format:"",arrowControl:!1,unlinkPanels:!1,dateUserInput:{min:null,max:null},timeUserInput:{min:null,max:null}}},watch:{minDate:function(e){var t=this;this.dateUserInput.min=null,this.timeUserInput.min=null,this.$nextTick((function(){if(t.$refs.maxTimePicker&&t.maxDate&&t.maxDate<t.minDate){var e="HH:mm:ss";t.$refs.maxTimePicker.selectableRange=[[Object(ro["parseDate"])(Object(ro["formatDate"])(t.minDate,e),e),Object(ro["parseDate"])("23:59:59",e)]]}})),e&&this.$refs.minTimePicker&&(this.$refs.minTimePicker.date=e,this.$refs.minTimePicker.value=e)},maxDate:function(e){this.dateUserInput.max=null,this.timeUserInput.max=null,e&&this.$refs.maxTimePicker&&(this.$refs.maxTimePicker.date=e,this.$refs.maxTimePicker.value=e)},minTimePickerVisible:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.minTimePicker.date=t.minDate,t.$refs.minTimePicker.value=t.minDate,t.$refs.minTimePicker.adjustSpinners()}))},maxTimePickerVisible:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.maxTimePicker.date=t.maxDate,t.$refs.maxTimePicker.value=t.maxDate,t.$refs.maxTimePicker.adjustSpinners()}))},value:function(e){if(e){if(Array.isArray(e))if(this.minDate=Object(ro["isDate"])(e[0])?new Date(e[0]):null,this.maxDate=Object(ro["isDate"])(e[1])?new Date(e[1]):null,this.minDate)if(this.leftDate=this.minDate,this.unlinkPanels&&this.maxDate){var t=this.minDate.getFullYear(),i=this.minDate.getMonth(),n=this.maxDate.getFullYear(),r=this.maxDate.getMonth();this.rightDate=t===n&&i===r?Object(ro["nextMonth"])(this.maxDate):this.maxDate}else this.rightDate=Object(ro["nextMonth"])(this.leftDate);else this.leftDate=gs(this.defaultValue)[0],this.rightDate=Object(ro["nextMonth"])(this.leftDate)}else this.minDate=null,this.maxDate=null},defaultValue:function(e){if(!Array.isArray(this.value)){var t=gs(e),i=t[0],n=t[1];this.leftDate=i,this.rightDate=e&&e[1]&&this.unlinkPanels?n:Object(ro["nextMonth"])(this.leftDate)}}},methods:{handleClear:function(){this.minDate=null,this.maxDate=null,this.leftDate=gs(this.defaultValue)[0],this.rightDate=Object(ro["nextMonth"])(this.leftDate),this.$emit("pick",null)},handleChangeRange:function(e){this.minDate=e.minDate,this.maxDate=e.maxDate,this.rangeState=e.rangeState},handleDateInput:function(e,t){if(this.dateUserInput[t]=e,e.length===this.dateFormat.length){var i=Object(ro["parseDate"])(e,this.dateFormat);if(i){if("function"===typeof this.disabledDate&&this.disabledDate(new Date(i)))return;"min"===t?(this.minDate=Object(ro["modifyDate"])(this.minDate||new Date,i.getFullYear(),i.getMonth(),i.getDate()),this.leftDate=new Date(i),this.unlinkPanels||(this.rightDate=Object(ro["nextMonth"])(this.leftDate))):(this.maxDate=Object(ro["modifyDate"])(this.maxDate||new Date,i.getFullYear(),i.getMonth(),i.getDate()),this.rightDate=new Date(i),this.unlinkPanels||(this.leftDate=Object(ro["prevMonth"])(i)))}}},handleDateChange:function(e,t){var i=Object(ro["parseDate"])(e,this.dateFormat);i&&("min"===t?(this.minDate=Object(ro["modifyDate"])(this.minDate,i.getFullYear(),i.getMonth(),i.getDate()),this.minDate>this.maxDate&&(this.maxDate=this.minDate)):(this.maxDate=Object(ro["modifyDate"])(this.maxDate,i.getFullYear(),i.getMonth(),i.getDate()),this.maxDate<this.minDate&&(this.minDate=this.maxDate)))},handleTimeInput:function(e,t){var i=this;if(this.timeUserInput[t]=e,e.length===this.timeFormat.length){var n=Object(ro["parseDate"])(e,this.timeFormat);n&&("min"===t?(this.minDate=Object(ro["modifyTime"])(this.minDate,n.getHours(),n.getMinutes(),n.getSeconds()),this.$nextTick((function(e){return i.$refs.minTimePicker.adjustSpinners()}))):(this.maxDate=Object(ro["modifyTime"])(this.maxDate,n.getHours(),n.getMinutes(),n.getSeconds()),this.$nextTick((function(e){return i.$refs.maxTimePicker.adjustSpinners()}))))}},handleTimeChange:function(e,t){var i=Object(ro["parseDate"])(e,this.timeFormat);i&&("min"===t?(this.minDate=Object(ro["modifyTime"])(this.minDate,i.getHours(),i.getMinutes(),i.getSeconds()),this.minDate>this.maxDate&&(this.maxDate=this.minDate),this.$refs.minTimePicker.value=this.minDate,this.minTimePickerVisible=!1):(this.maxDate=Object(ro["modifyTime"])(this.maxDate,i.getHours(),i.getMinutes(),i.getSeconds()),this.maxDate<this.minDate&&(this.minDate=this.maxDate),this.$refs.maxTimePicker.value=this.minDate,this.maxTimePickerVisible=!1))},handleRangePick:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.defaultTime||[],r=Object(ro["modifyWithTimeString"])(e.minDate,n[0]),o=Object(ro["modifyWithTimeString"])(e.maxDate,n[1]);this.maxDate===o&&this.minDate===r||(this.onPick&&this.onPick(e),this.maxDate=o,this.minDate=r,setTimeout((function(){t.maxDate=o,t.minDate=r}),10),i&&!this.showTime&&this.handleConfirm())},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},handleMinTimePick:function(e,t,i){this.minDate=this.minDate||new Date,e&&(this.minDate=Object(ro["modifyTime"])(this.minDate,e.getHours(),e.getMinutes(),e.getSeconds())),i||(this.minTimePickerVisible=t),(!this.maxDate||this.maxDate&&this.maxDate.getTime()<this.minDate.getTime())&&(this.maxDate=new Date(this.minDate))},handleMinTimeClose:function(){this.minTimePickerVisible=!1},handleMaxTimePick:function(e,t,i){this.maxDate&&e&&(this.maxDate=Object(ro["modifyTime"])(this.maxDate,e.getHours(),e.getMinutes(),e.getSeconds())),i||(this.maxTimePickerVisible=t),this.maxDate&&this.minDate&&this.minDate.getTime()>this.maxDate.getTime()&&(this.minDate=new Date(this.maxDate))},handleMaxTimeClose:function(){this.maxTimePickerVisible=!1},leftPrevYear:function(){this.leftDate=Object(ro["prevYear"])(this.leftDate),this.unlinkPanels||(this.rightDate=Object(ro["nextMonth"])(this.leftDate))},leftPrevMonth:function(){this.leftDate=Object(ro["prevMonth"])(this.leftDate),this.unlinkPanels||(this.rightDate=Object(ro["nextMonth"])(this.leftDate))},rightNextYear:function(){this.unlinkPanels?this.rightDate=Object(ro["nextYear"])(this.rightDate):(this.leftDate=Object(ro["nextYear"])(this.leftDate),this.rightDate=Object(ro["nextMonth"])(this.leftDate))},rightNextMonth:function(){this.unlinkPanels?this.rightDate=Object(ro["nextMonth"])(this.rightDate):(this.leftDate=Object(ro["nextMonth"])(this.leftDate),this.rightDate=Object(ro["nextMonth"])(this.leftDate))},leftNextYear:function(){this.leftDate=Object(ro["nextYear"])(this.leftDate)},leftNextMonth:function(){this.leftDate=Object(ro["nextMonth"])(this.leftDate)},rightPrevYear:function(){this.rightDate=Object(ro["prevYear"])(this.rightDate)},rightPrevMonth:function(){this.rightDate=Object(ro["prevMonth"])(this.rightDate)},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isValidValue([this.minDate,this.maxDate])&&this.$emit("pick",[this.minDate,this.maxDate],e)},isValidValue:function(e){return Array.isArray(e)&&e&&e[0]&&e[1]&&Object(ro["isDate"])(e[0])&&Object(ro["isDate"])(e[1])&&e[0].getTime()<=e[1].getTime()&&("function"!==typeof this.disabledDate||!this.disabledDate(e[0])&&!this.disabledDate(e[1]))},resetView:function(){this.minDate&&null==this.maxDate&&(this.rangeState.selecting=!1),this.minDate=this.value&&Object(ro["isDate"])(this.value[0])?new Date(this.value[0]):null,this.maxDate=this.value&&Object(ro["isDate"])(this.value[0])?new Date(this.value[1]):null}},components:{TimePicker:Bo,DateTable:cs,ElInput:g.a,ElButton:se.a}},_s=ms,vs=a(_s,ps,fs,!1,null,null,null);vs.options.__file="packages/date-picker/src/panel/date-range.vue";var Es=vs.exports,As=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-range-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts},e.popperClass]},[i("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?i("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(t,n){return i("button",{key:n,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(i){e.handleShortcutClick(t)}}},[e._v(e._s(t.text))])})),0):e._e(),i("div",{staticClass:"el-picker-panel__body"},[i("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-left"},[i("div",{staticClass:"el-date-range-picker__header"},[i("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevYear}}),e.unlinkPanels?i("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.leftNextYear}}):e._e(),i("div",[e._v(e._s(e.leftLabel))])]),i("month-table",{attrs:{"selection-mode":"range",date:e.leftDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1),i("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-right"},[i("div",{staticClass:"el-date-range-picker__header"},[e.unlinkPanels?i("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.rightPrevYear}}):e._e(),i("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",attrs:{type:"button"},on:{click:e.rightNextYear}}),i("div",[e._v(e._s(e.rightLabel))])]),i("month-table",{attrs:{"selection-mode":"range",date:e.rightDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1)])],2)])])},ys=[];As._withStripped=!0;var Ss=function(e){return Array.isArray(e)?[new Date(e[0]),new Date(e[1])]:e?[new Date(e),Object(ro["nextMonth"])(new Date(e))]:[new Date,Object(ro["nextMonth"])(new Date)]},Cs={mixins:[_.a],directives:{Clickoutside:F.a},computed:{btnDisabled:function(){return!(this.minDate&&this.maxDate&&!this.selecting&&this.isValidValue([this.minDate,this.maxDate]))},leftLabel:function(){return this.leftDate.getFullYear()+" "+this.t("el.datepicker.year")},rightLabel:function(){return this.rightDate.getFullYear()+" "+this.t("el.datepicker.year")},leftYear:function(){return this.leftDate.getFullYear()},rightYear:function(){return this.rightDate.getFullYear()===this.leftDate.getFullYear()?this.leftDate.getFullYear()+1:this.rightDate.getFullYear()},enableYearArrow:function(){return this.unlinkPanels&&this.rightYear>this.leftYear+1}},data:function(){return{popperClass:"",value:[],defaultValue:null,defaultTime:null,minDate:"",maxDate:"",leftDate:new Date,rightDate:Object(ro["nextYear"])(new Date),rangeState:{endDate:null,selecting:!1,row:null,column:null},shortcuts:"",visible:"",disabledDate:"",format:"",arrowControl:!1,unlinkPanels:!1}},watch:{value:function(e){if(e){if(Array.isArray(e))if(this.minDate=Object(ro["isDate"])(e[0])?new Date(e[0]):null,this.maxDate=Object(ro["isDate"])(e[1])?new Date(e[1]):null,this.minDate)if(this.leftDate=this.minDate,this.unlinkPanels&&this.maxDate){var t=this.minDate.getFullYear(),i=this.maxDate.getFullYear();this.rightDate=t===i?Object(ro["nextYear"])(this.maxDate):this.maxDate}else this.rightDate=Object(ro["nextYear"])(this.leftDate);else this.leftDate=Ss(this.defaultValue)[0],this.rightDate=Object(ro["nextYear"])(this.leftDate)}else this.minDate=null,this.maxDate=null},defaultValue:function(e){if(!Array.isArray(this.value)){var t=Ss(e),i=t[0],n=t[1];this.leftDate=i,this.rightDate=e&&e[1]&&i.getFullYear()!==n.getFullYear()&&this.unlinkPanels?n:Object(ro["nextYear"])(this.leftDate)}}},methods:{handleClear:function(){this.minDate=null,this.maxDate=null,this.leftDate=Ss(this.defaultValue)[0],this.rightDate=Object(ro["nextYear"])(this.leftDate),this.$emit("pick",null)},handleChangeRange:function(e){this.minDate=e.minDate,this.maxDate=e.maxDate,this.rangeState=e.rangeState},handleRangePick:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.defaultTime||[],r=Object(ro["modifyWithTimeString"])(e.minDate,n[0]),o=Object(ro["modifyWithTimeString"])(e.maxDate,n[1]);this.maxDate===o&&this.minDate===r||(this.onPick&&this.onPick(e),this.maxDate=o,this.minDate=r,setTimeout((function(){t.maxDate=o,t.minDate=r}),10),i&&this.handleConfirm())},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},leftPrevYear:function(){this.leftDate=Object(ro["prevYear"])(this.leftDate),this.unlinkPanels||(this.rightDate=Object(ro["prevYear"])(this.rightDate))},rightNextYear:function(){this.unlinkPanels||(this.leftDate=Object(ro["nextYear"])(this.leftDate)),this.rightDate=Object(ro["nextYear"])(this.rightDate)},leftNextYear:function(){this.leftDate=Object(ro["nextYear"])(this.leftDate)},rightPrevYear:function(){this.rightDate=Object(ro["prevYear"])(this.rightDate)},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isValidValue([this.minDate,this.maxDate])&&this.$emit("pick",[this.minDate,this.maxDate],e)},isValidValue:function(e){return Array.isArray(e)&&e&&e[0]&&e[1]&&Object(ro["isDate"])(e[0])&&Object(ro["isDate"])(e[1])&&e[0].getTime()<=e[1].getTime()&&("function"!==typeof this.disabledDate||!this.disabledDate(e[0])&&!this.disabledDate(e[1]))},resetView:function(){this.minDate=this.value&&Object(ro["isDate"])(this.value[0])?new Date(this.value[0]):null,this.maxDate=this.value&&Object(ro["isDate"])(this.value[0])?new Date(this.value[1]):null}},components:{MonthTable:Xo,ElInput:g.a,ElButton:se.a}},bs=Cs,Ts=a(bs,As,ys,!1,null,null,null);Ts.options.__file="packages/date-picker/src/panel/month-range.vue";var Is=Ts.exports,Rs=function(e){return"daterange"===e||"datetimerange"===e?Es:"monthrange"===e?Is:hs},ws={mixins:[Co],name:"ElDatePicker",props:{type:{type:String,default:"date"},timeArrowControl:Boolean},watch:{type:function(e){this.picker?(this.unmountPicker(),this.panel=Rs(e),this.mountPicker()):this.panel=Rs(e)}},created:function(){this.panel=Rs(this.type)},install:function(e){e.component(ws.name,ws)}},Os=ws,ks=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":function(t){e.$emit("dodestroy")}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],ref:"popper",staticClass:"el-picker-panel time-select el-popper",class:e.popperClass,style:{width:e.width+"px"}},[i("el-scrollbar",{attrs:{noresize:"","wrap-class":"el-picker-panel__content"}},e._l(e.items,(function(t){return i("div",{key:t.value,staticClass:"time-select-item",class:{selected:e.value===t.value,disabled:t.disabled,default:t.value===e.defaultValue},attrs:{disabled:t.disabled},on:{click:function(i){e.handleClick(t)}}},[e._v(e._s(t.value))])})),0)],1)])},Ns=[];ks._withStripped=!0;var Ls=function(e){var t=(e||"").split(":");if(t.length>=2){var i=parseInt(t[0],10),n=parseInt(t[1],10);return{hours:i,minutes:n}}return null},Ps=function(e,t){var i=Ls(e),n=Ls(t),r=i.minutes+60*i.hours,o=n.minutes+60*n.hours;return r===o?0:r>o?1:-1},Ds=function(e){return(e.hours<10?"0"+e.hours:e.hours)+":"+(e.minutes<10?"0"+e.minutes:e.minutes)},Ms=function(e,t){var i=Ls(e),n=Ls(t),r={hours:i.hours,minutes:i.minutes};return r.minutes+=n.minutes,r.hours+=n.hours,r.hours+=Math.floor(r.minutes/60),r.minutes=r.minutes%60,Ds(r)},xs={components:{ElScrollbar:W.a},watch:{value:function(e){var t=this;e&&this.$nextTick((function(){return t.scrollToOption()}))}},methods:{handleClick:function(e){e.disabled||this.$emit("pick",e.value)},handleClear:function(){this.$emit("pick",null)},scrollToOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".selected",t=this.$refs.popper.querySelector(".el-picker-panel__content");tn()(t,t.querySelector(e))},handleMenuEnter:function(){var e=this,t=-1!==this.items.map((function(e){return e.value})).indexOf(this.value),i=-1!==this.items.map((function(e){return e.value})).indexOf(this.defaultValue),n=(t?".selected":i&&".default")||".time-select-item:not(.disabled)";this.$nextTick((function(){return e.scrollToOption(n)}))},scrollDown:function(e){var t=this.items,i=t.length,n=t.length,r=t.map((function(e){return e.value})).indexOf(this.value);while(n--)if(r=(r+e+i)%i,!t[r].disabled)return void this.$emit("pick",t[r].value,!0)},isValidValue:function(e){return-1!==this.items.filter((function(e){return!e.disabled})).map((function(e){return e.value})).indexOf(e)},handleKeydown:function(e){var t=e.keyCode;if(38===t||40===t){var i={40:1,38:-1},n=i[t.toString()];return this.scrollDown(n),void e.stopPropagation()}}},data:function(){return{popperClass:"",start:"09:00",end:"18:00",step:"00:30",value:"",defaultValue:"",visible:!1,minTime:"",maxTime:"",width:0}},computed:{items:function(){var e=this.start,t=this.end,i=this.step,n=[];if(e&&t&&i){var r=e;while(Ps(r,t)<=0)n.push({value:r,disabled:Ps(r,this.minTime||"-1:-1")<=0||Ps(r,this.maxTime||"100:100")>=0}),r=Ms(r,i)}return n}}},Bs=xs,Us=a(Bs,ks,Ns,!1,null,null,null);Us.options.__file="packages/date-picker/src/panel/time-select.vue";var Fs=Us.exports,Vs={mixins:[Co],name:"ElTimeSelect",componentName:"ElTimeSelect",props:{type:{type:String,default:"time-select"}},beforeCreate:function(){this.panel=Fs},install:function(e){e.component(Vs.name,Vs)}},js=Vs,Gs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-time-range-picker el-picker-panel el-popper",class:e.popperClass},[i("div",{staticClass:"el-time-range-picker__content"},[i("div",{staticClass:"el-time-range-picker__cell"},[i("div",{staticClass:"el-time-range-picker__header"},[e._v(e._s(e.t("el.datepicker.startTime")))]),i("div",{staticClass:"el-time-range-picker__body el-time-panel__content",class:{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl}},[i("time-spinner",{ref:"minSpinner",attrs:{"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,date:e.minDate},on:{change:e.handleMinChange,"select-range":e.setMinSelectionRange}})],1)]),i("div",{staticClass:"el-time-range-picker__cell"},[i("div",{staticClass:"el-time-range-picker__header"},[e._v(e._s(e.t("el.datepicker.endTime")))]),i("div",{staticClass:"el-time-range-picker__body el-time-panel__content",class:{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl}},[i("time-spinner",{ref:"maxSpinner",attrs:{"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,date:e.maxDate},on:{change:e.handleMaxChange,"select-range":e.setMaxSelectionRange}})],1)])]),i("div",{staticClass:"el-time-panel__footer"},[i("button",{staticClass:"el-time-panel__btn cancel",attrs:{type:"button"},on:{click:function(t){e.handleCancel()}}},[e._v(e._s(e.t("el.datepicker.cancel")))]),i("button",{staticClass:"el-time-panel__btn confirm",attrs:{type:"button",disabled:e.btnDisabled},on:{click:function(t){e.handleConfirm()}}},[e._v(e._s(e.t("el.datepicker.confirm")))])])])])},Hs=[];Gs._withStripped=!0;var Qs=Object(ro["parseDate"])("00:00:00","HH:mm:ss"),Ws=Object(ro["parseDate"])("23:59:59","HH:mm:ss"),qs=function(e){return Object(ro["modifyDate"])(Qs,e.getFullYear(),e.getMonth(),e.getDate())},$s=function(e){return Object(ro["modifyDate"])(Ws,e.getFullYear(),e.getMonth(),e.getDate())},zs=function(e,t){return new Date(Math.min(e.getTime()+t,$s(e).getTime()))},Zs={mixins:[_.a],components:{TimeSpinner:Po},computed:{showSeconds:function(){return-1!==(this.format||"").indexOf("ss")},offset:function(){return this.showSeconds?11:8},spinner:function(){return this.selectionRange[0]<this.offset?this.$refs.minSpinner:this.$refs.maxSpinner},btnDisabled:function(){return this.minDate.getTime()>this.maxDate.getTime()},amPmMode:function(){return-1!==(this.format||"").indexOf("A")?"A":-1!==(this.format||"").indexOf("a")?"a":""}},data:function(){return{popperClass:"",minDate:new Date,maxDate:new Date,value:[],oldValue:[new Date,new Date],defaultValue:null,format:"HH:mm:ss",visible:!1,selectionRange:[0,2],arrowControl:!1}},watch:{value:function(e){Array.isArray(e)?(this.minDate=new Date(e[0]),this.maxDate=new Date(e[1])):Array.isArray(this.defaultValue)?(this.minDate=new Date(this.defaultValue[0]),this.maxDate=new Date(this.defaultValue[1])):this.defaultValue?(this.minDate=new Date(this.defaultValue),this.maxDate=zs(new Date(this.defaultValue),36e5)):(this.minDate=new Date,this.maxDate=zs(new Date,36e5))},visible:function(e){var t=this;e&&(this.oldValue=this.value,this.$nextTick((function(){return t.$refs.minSpinner.emitSelectRange("hours")})))}},methods:{handleClear:function(){this.$emit("pick",null)},handleCancel:function(){this.$emit("pick",this.oldValue)},handleMinChange:function(e){this.minDate=Object(ro["clearMilliseconds"])(e),this.handleChange()},handleMaxChange:function(e){this.maxDate=Object(ro["clearMilliseconds"])(e),this.handleChange()},handleChange:function(){this.isValidValue([this.minDate,this.maxDate])&&(this.$refs.minSpinner.selectableRange=[[qs(this.minDate),this.maxDate]],this.$refs.maxSpinner.selectableRange=[[this.minDate,$s(this.maxDate)]],this.$emit("pick",[this.minDate,this.maxDate],!0))},setMinSelectionRange:function(e,t){this.$emit("select-range",e,t,"min"),this.selectionRange=[e,t]},setMaxSelectionRange:function(e,t){this.$emit("select-range",e,t,"max"),this.selectionRange=[e+this.offset,t+this.offset]},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.$refs.minSpinner.selectableRange,i=this.$refs.maxSpinner.selectableRange;this.minDate=Object(ro["limitTimeRange"])(this.minDate,t,this.format),this.maxDate=Object(ro["limitTimeRange"])(this.maxDate,i,this.format),this.$emit("pick",[this.minDate,this.maxDate],e)},adjustSpinners:function(){this.$refs.minSpinner.adjustSpinners(),this.$refs.maxSpinner.adjustSpinners()},changeSelectionRange:function(e){var t=this.showSeconds?[0,3,6,11,14,17]:[0,3,8,11],i=["hours","minutes"].concat(this.showSeconds?["seconds"]:[]),n=t.indexOf(this.selectionRange[0]),r=(n+e+t.length)%t.length,o=t.length/2;r<o?this.$refs.minSpinner.emitSelectRange(i[r]):this.$refs.maxSpinner.emitSelectRange(i[r-o])},isValidValue:function(e){return Array.isArray(e)&&Object(ro["timeWithinRange"])(this.minDate,this.$refs.minSpinner.selectableRange)&&Object(ro["timeWithinRange"])(this.maxDate,this.$refs.maxSpinner.selectableRange)},handleKeydown:function(e){var t=e.keyCode,i={38:-1,40:1,37:-1,39:1};if(37===t||39===t){var n=i[t];return this.changeSelectionRange(n),void e.preventDefault()}if(38===t||40===t){var r=i[t];return this.spinner.scrollDown(r),void e.preventDefault()}}}},Ys=Zs,Ks=a(Ys,Gs,Hs,!1,null,null,null);Ks.options.__file="packages/date-picker/src/panel/time-range.vue";var Js=Ks.exports,Xs={mixins:[Co],name:"ElTimePicker",props:{isRange:Boolean,arrowControl:Boolean},data:function(){return{type:""}},watch:{isRange:function(e){this.picker?(this.unmountPicker(),this.type=e?"timerange":"time",this.panel=e?Js:Bo,this.mountPicker()):(this.type=e?"timerange":"time",this.panel=e?Js:Bo)}},created:function(){this.type=this.isRange?"timerange":"time",this.panel=this.isRange?Js:Bo},install:function(e){e.component(Xs.name,Xs)}},ea=Xs,ta=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[i("transition",{attrs:{name:e.transition},on:{"after-enter":e.handleAfterEnter,"after-leave":e.handleAfterLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&e.showPopper,expression:"!disabled && showPopper"}],ref:"popper",staticClass:"el-popover el-popper",class:[e.popperClass,e.content&&"el-popover--plain"],style:{width:e.width+"px"},attrs:{role:"tooltip",id:e.tooltipId,"aria-hidden":e.disabled||!e.showPopper?"true":"false"}},[e.title?i("div",{staticClass:"el-popover__title",domProps:{textContent:e._s(e.title)}}):e._e(),e._t("default",[e._v(e._s(e.content))])],2)]),i("span",{ref:"wrapper",staticClass:"el-popover__reference-wrapper"},[e._t("reference")],2)],1)},ia=[];ta._withStripped=!0;var na={name:"ElPopover",mixins:[H.a],props:{trigger:{type:String,default:"click",validator:function(e){return["click","focus","hover","manual"].indexOf(e)>-1}},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200},title:String,disabled:Boolean,content:String,reference:{},popperClass:String,width:{},visibleArrow:{default:!0},arrowOffset:{type:Number,default:0},transition:{type:String,default:"fade-in-linear"},tabindex:{type:Number,default:0}},computed:{tooltipId:function(){return"el-popover-"+Object(v["generateId"])()}},watch:{showPopper:function(e){this.disabled||(e?this.$emit("show"):this.$emit("hide"))}},mounted:function(){var e=this,t=this.referenceElm=this.reference||this.$refs.reference,i=this.popper||this.$refs.popper;!t&&this.$refs.wrapper.children&&(t=this.referenceElm=this.$refs.wrapper.children[0]),t&&(Object(Ue["addClass"])(t,"el-popover__reference"),t.setAttribute("aria-describedby",this.tooltipId),t.setAttribute("tabindex",this.tabindex),i.setAttribute("tabindex",0),"click"!==this.trigger&&(Object(Ue["on"])(t,"focusin",(function(){e.handleFocus();var i=t.__vue__;i&&"function"===typeof i.focus&&i.focus()})),Object(Ue["on"])(i,"focusin",this.handleFocus),Object(Ue["on"])(t,"focusout",this.handleBlur),Object(Ue["on"])(i,"focusout",this.handleBlur)),Object(Ue["on"])(t,"keydown",this.handleKeydown),Object(Ue["on"])(t,"click",this.handleClick)),"click"===this.trigger?(Object(Ue["on"])(t,"click",this.doToggle),Object(Ue["on"])(document,"click",this.handleDocumentClick)):"hover"===this.trigger?(Object(Ue["on"])(t,"mouseenter",this.handleMouseEnter),Object(Ue["on"])(i,"mouseenter",this.handleMouseEnter),Object(Ue["on"])(t,"mouseleave",this.handleMouseLeave),Object(Ue["on"])(i,"mouseleave",this.handleMouseLeave)):"focus"===this.trigger&&(this.tabindex<0&&console.warn("[Element Warn][Popover]a negative taindex means that the element cannot be focused by tab key"),t.querySelector("input, textarea")?(Object(Ue["on"])(t,"focusin",this.doShow),Object(Ue["on"])(t,"focusout",this.doClose)):(Object(Ue["on"])(t,"mousedown",this.doShow),Object(Ue["on"])(t,"mouseup",this.doClose)))},beforeDestroy:function(){this.cleanup()},deactivated:function(){this.cleanup()},methods:{doToggle:function(){this.showPopper=!this.showPopper},doShow:function(){this.showPopper=!0},doClose:function(){this.showPopper=!1},handleFocus:function(){Object(Ue["addClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!0)},handleClick:function(){Object(Ue["removeClass"])(this.referenceElm,"focusing")},handleBlur:function(){Object(Ue["removeClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!1)},handleMouseEnter:function(){var e=this;clearTimeout(this._timer),this.openDelay?this._timer=setTimeout((function(){e.showPopper=!0}),this.openDelay):this.showPopper=!0},handleKeydown:function(e){27===e.keyCode&&"manual"!==this.trigger&&this.doClose()},handleMouseLeave:function(){var e=this;clearTimeout(this._timer),this.closeDelay?this._timer=setTimeout((function(){e.showPopper=!1}),this.closeDelay):this.showPopper=!1},handleDocumentClick:function(e){var t=this.reference||this.$refs.reference,i=this.popper||this.$refs.popper;!t&&this.$refs.wrapper.children&&(t=this.referenceElm=this.$refs.wrapper.children[0]),this.$el&&t&&!this.$el.contains(e.target)&&!t.contains(e.target)&&i&&!i.contains(e.target)&&(this.showPopper=!1)},handleAfterEnter:function(){this.$emit("after-enter")},handleAfterLeave:function(){this.$emit("after-leave"),this.doDestroy()},cleanup:function(){(this.openDelay||this.closeDelay)&&clearTimeout(this._timer)}},destroyed:function(){var e=this.reference;Object(Ue["off"])(e,"click",this.doToggle),Object(Ue["off"])(e,"mouseup",this.doClose),Object(Ue["off"])(e,"mousedown",this.doShow),Object(Ue["off"])(e,"focusin",this.doShow),Object(Ue["off"])(e,"focusout",this.doClose),Object(Ue["off"])(e,"mousedown",this.doShow),Object(Ue["off"])(e,"mouseup",this.doClose),Object(Ue["off"])(e,"mouseleave",this.handleMouseLeave),Object(Ue["off"])(e,"mouseenter",this.handleMouseEnter),Object(Ue["off"])(document,"click",this.handleDocumentClick)}},ra=na,oa=a(ra,ta,ia,!1,null,null,null);oa.options.__file="packages/popover/src/main.vue";var sa=oa.exports,aa=function(e,t,i){var n=t.expression?t.value:t.arg,r=i.context.$refs[n];r&&(Array.isArray(r)?r[0].$refs.reference=e:r.$refs.reference=e)},ca={bind:function(e,t,i){aa(e,t,i)},inserted:function(e,t,i){aa(e,t,i)}};Gn.a.directive("popover",ca),sa.install=function(e){e.directive("popover",ca),e.component(sa.name,sa)},sa.directive=ca;var la=sa,ua={name:"ElTooltip",mixins:[H.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0},tabindex:{type:Number,default:0}},data:function(){return{tooltipId:"el-tooltip-"+Object(v["generateId"])(),timeoutPending:null,focusing:!1}},beforeCreate:function(){var e=this;this.$isServer||(this.popperVM=new Gn.a({data:{node:""},render:function(e){return this.node}}).$mount(),this.debounceClose=B()(200,(function(){return e.handleClosePopper()})))},render:function(e){var t=this;this.popperVM&&(this.popperVM.node=e("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[e("div",{on:{mouseleave:function(){t.setExpectedState(!1),t.debounceClose()},mouseenter:function(){t.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])]));var i=this.getFirstElement();if(!i)return null;var n=i.data=i.data||{};return n.staticClass=this.addTooltipClass(n.staticClass),i},mounted:function(){var e=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",this.tabindex),Object(Ue["on"])(this.referenceElm,"mouseenter",this.show),Object(Ue["on"])(this.referenceElm,"mouseleave",this.hide),Object(Ue["on"])(this.referenceElm,"focus",(function(){if(e.$slots.default&&e.$slots.default.length){var t=e.$slots.default[0].componentInstance;t&&t.focus?t.focus():e.handleFocus()}else e.handleFocus()})),Object(Ue["on"])(this.referenceElm,"blur",this.handleBlur),Object(Ue["on"])(this.referenceElm,"click",this.removeFocusing)),this.value&&this.popperVM&&this.popperVM.$nextTick((function(){e.value&&e.updatePopper()}))},watch:{focusing:function(e){e?Object(Ue["addClass"])(this.referenceElm,"focusing"):Object(Ue["removeClass"])(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},addTooltipClass:function(e){return e?"el-tooltip "+e.replace("el-tooltip",""):"el-tooltip"},handleShowPopper:function(){var e=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.showPopper=!0}),this.openDelay),this.hideAfter>0&&(this.timeoutPending=setTimeout((function(){e.showPopper=!1}),this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(e){!1===e&&clearTimeout(this.timeoutPending),this.expectedState=e},getFirstElement:function(){var e=this.$slots.default;if(!Array.isArray(e))return null;for(var t=null,i=0;i<e.length;i++)e[i]&&e[i].tag&&(t=e[i]);return t}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var e=this.referenceElm;1===e.nodeType&&(Object(Ue["off"])(e,"mouseenter",this.show),Object(Ue["off"])(e,"mouseleave",this.hide),Object(Ue["off"])(e,"focus",this.handleFocus),Object(Ue["off"])(e,"blur",this.handleBlur),Object(Ue["off"])(e,"click",this.removeFocusing))},install:function(e){e.component(ua.name,ua)}},da=ua,ha=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"msgbox-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-message-box__wrapper",attrs:{tabindex:"-1",role:"dialog","aria-modal":"true","aria-label":e.title||"dialog"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[i("div",{staticClass:"el-message-box",class:[e.customClass,e.center&&"el-message-box--center"]},[null!==e.title?i("div",{staticClass:"el-message-box__header"},[i("div",{staticClass:"el-message-box__title"},[e.icon&&e.center?i("div",{class:["el-message-box__status",e.icon]}):e._e(),i("span",[e._v(e._s(e.title))])]),e.showClose?i("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){e.handleAction(e.distinguishCancelAndClose?"close":"cancel")},keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction(e.distinguishCancelAndClose?"close":"cancel")}}},[i("i",{staticClass:"el-message-box__close el-icon-close"})]):e._e()]):e._e(),i("div",{staticClass:"el-message-box__content"},[i("div",{staticClass:"el-message-box__container"},[e.icon&&!e.center&&""!==e.message?i("div",{class:["el-message-box__status",e.icon]}):e._e(),""!==e.message?i("div",{staticClass:"el-message-box__message"},[e._t("default",[e.dangerouslyUseHTMLString?i("p",{domProps:{innerHTML:e._s(e.message)}}):i("p",[e._v(e._s(e.message))])])],2):e._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showInput,expression:"showInput"}],staticClass:"el-message-box__input"},[i("el-input",{ref:"input",attrs:{type:e.inputType,placeholder:e.inputPlaceholder},nativeOn:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputEnter(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),i("div",{staticClass:"el-message-box__errormsg",style:{visibility:e.editorErrorMessage?"visible":"hidden"}},[e._v(e._s(e.editorErrorMessage))])],1)]),i("div",{staticClass:"el-message-box__btns"},[e.showCancelButton?i("el-button",{class:[e.cancelButtonClasses],attrs:{loading:e.cancelButtonLoading,round:e.roundButton,size:"small"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction("cancel")}},nativeOn:{click:function(t){e.handleAction("cancel")}}},[e._v("\n          "+e._s(e.cancelButtonText||e.t("el.messagebox.cancel"))+"\n        ")]):e._e(),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showConfirmButton,expression:"showConfirmButton"}],ref:"confirm",class:[e.confirmButtonClasses],attrs:{loading:e.confirmButtonLoading,round:e.roundButton,size:"small"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction("confirm")}},nativeOn:{click:function(t){e.handleAction("confirm")}}},[e._v("\n          "+e._s(e.confirmButtonText||e.t("el.messagebox.confirm"))+"\n        ")])],1)])])])},pa=[];ha._withStripped=!0;var fa=i(12),ga=i.n(fa),ma=i(39),_a=i.n(ma),va=void 0,Ea={success:"success",info:"info",warning:"warning",error:"error"},Aa={mixins:[b.a,_.a],props:{modal:{default:!0},lockScroll:{default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{default:!0},closeOnPressEscape:{default:!0},closeOnHashChange:{default:!0},center:{default:!1,type:Boolean},roundButton:{default:!1,type:Boolean}},components:{ElInput:g.a,ElButton:se.a},computed:{icon:function(){var e=this.type,t=this.iconClass;return t||(e&&Ea[e]?"el-icon-"+Ea[e]:"")},confirmButtonClasses:function(){return"el-button--primary "+this.confirmButtonClass},cancelButtonClasses:function(){return""+this.cancelButtonClass}},methods:{getSafeClose:function(){var e=this,t=this.uid;return function(){e.$nextTick((function(){t===e.uid&&e.doClose()}))}},doClose:function(){var e=this;this.visible&&(this.visible=!1,this._closing=!0,this.onClose&&this.onClose(),va.closeDialog(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose(),setTimeout((function(){e.action&&e.callback(e.action,e)})))},handleWrapperClick:function(){this.closeOnClickModal&&this.handleAction(this.distinguishCancelAndClose?"close":"cancel")},handleInputEnter:function(){if("textarea"!==this.inputType)return this.handleAction("confirm")},handleAction:function(e){("prompt"!==this.$type||"confirm"!==e||this.validate())&&(this.action=e,"function"===typeof this.beforeClose?(this.close=this.getSafeClose(),this.beforeClose(e,this,this.close)):this.doClose())},validate:function(){if("prompt"===this.$type){var e=this.inputPattern;if(e&&!e.test(this.inputValue||""))return this.editorErrorMessage=this.inputErrorMessage||Object(fa["t"])("el.messagebox.error"),Object(Ue["addClass"])(this.getInputElement(),"invalid"),!1;var t=this.inputValidator;if("function"===typeof t){var i=t(this.inputValue);if(!1===i)return this.editorErrorMessage=this.inputErrorMessage||Object(fa["t"])("el.messagebox.error"),Object(Ue["addClass"])(this.getInputElement(),"invalid"),!1;if("string"===typeof i)return this.editorErrorMessage=i,Object(Ue["addClass"])(this.getInputElement(),"invalid"),!1}}return this.editorErrorMessage="",Object(Ue["removeClass"])(this.getInputElement(),"invalid"),!0},getFirstFocus:function(){var e=this.$el.querySelector(".el-message-box__btns .el-button"),t=this.$el.querySelector(".el-message-box__btns .el-message-box__title");return e||t},getInputElement:function(){var e=this.$refs.input.$refs;return e.input||e.textarea},handleClose:function(){this.handleAction("close")}},watch:{inputValue:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(i){"prompt"===t.$type&&null!==e&&t.validate()}))}},visible:function(e){var t=this;e&&(this.uid++,"alert"!==this.$type&&"confirm"!==this.$type||this.$nextTick((function(){t.$refs.confirm.$el.focus()})),this.focusAfterClosed=document.activeElement,va=new _a.a(this.$el,this.focusAfterClosed,this.getFirstFocus())),"prompt"===this.$type&&(e?setTimeout((function(){t.$refs.input&&t.$refs.input.$el&&t.getInputElement().focus()}),500):(this.editorErrorMessage="",Object(Ue["removeClass"])(this.getInputElement(),"invalid")))}},mounted:function(){var e=this;this.$nextTick((function(){e.closeOnHashChange&&window.addEventListener("hashchange",e.close)}))},beforeDestroy:function(){this.closeOnHashChange&&window.removeEventListener("hashchange",this.close),setTimeout((function(){va.closeDialog()}))},data:function(){return{uid:1,title:void 0,message:"",type:"",iconClass:"",customClass:"",showInput:!1,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,action:"",confirmButtonText:"",cancelButtonText:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonClass:"",confirmButtonDisabled:!1,cancelButtonClass:"",editorErrorMessage:null,callback:null,dangerouslyUseHTMLString:!1,focusAfterClosed:null,isOnComposition:!1,distinguishCancelAndClose:!1}}},ya=Aa,Sa=a(ya,ha,pa,!1,null,null,null);Sa.options.__file="packages/message-box/src/main.vue";var Ca=Sa.exports,ba=i(22),Ta="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ia={title:null,message:"",type:"",iconClass:"",showInput:!1,showClose:!0,modalFade:!0,lockScroll:!0,closeOnClickModal:!0,closeOnPressEscape:!0,closeOnHashChange:!0,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,confirmButtonPosition:"right",confirmButtonHighlight:!1,cancelButtonHighlight:!1,confirmButtonText:"",cancelButtonText:"",confirmButtonClass:"",cancelButtonClass:"",customClass:"",beforeClose:null,dangerouslyUseHTMLString:!1,center:!1,roundButton:!1,distinguishCancelAndClose:!1},Ra=Gn.a.extend(Ca),wa=void 0,Oa=void 0,ka=[],Na=function(e){if(wa){var t=wa.callback;"function"===typeof t&&(Oa.showInput?t(Oa.inputValue,e):t(e)),wa.resolve&&("confirm"===e?Oa.showInput?wa.resolve({value:Oa.inputValue,action:e}):wa.resolve(e):!wa.reject||"cancel"!==e&&"close"!==e||wa.reject(e))}},La=function(){Oa=new Ra({el:document.createElement("div")}),Oa.callback=Na},Pa=function e(){if(Oa||La(),Oa.action="",(!Oa.visible||Oa.closeTimer)&&ka.length>0){wa=ka.shift();var t=wa.options;for(var i in t)t.hasOwnProperty(i)&&(Oa[i]=t[i]);void 0===t.callback&&(Oa.callback=Na);var n=Oa.callback;Oa.callback=function(t,i){n(t,i),e()},Object(ba["isVNode"])(Oa.message)?(Oa.$slots.default=[Oa.message],Oa.message=null):delete Oa.$slots.default,["modal","showClose","closeOnClickModal","closeOnPressEscape","closeOnHashChange"].forEach((function(e){void 0===Oa[e]&&(Oa[e]=!0)})),document.body.appendChild(Oa.$el),Gn.a.nextTick((function(){Oa.visible=!0}))}},Da=function e(t,i){if(!Gn.a.prototype.$isServer){if("string"===typeof t||Object(ba["isVNode"])(t)?(t={message:t},"string"===typeof arguments[1]&&(t.title=arguments[1])):t.callback&&!i&&(i=t.callback),"undefined"!==typeof Promise)return new Promise((function(n,r){ka.push({options:Tt()({},Ia,e.defaults,t),callback:i,resolve:n,reject:r}),Pa()}));ka.push({options:Tt()({},Ia,e.defaults,t),callback:i}),Pa()}};Da.setDefaults=function(e){Da.defaults=e},Da.alert=function(e,t,i){return"object"===("undefined"===typeof t?"undefined":Ta(t))?(i=t,t=""):void 0===t&&(t=""),Da(Tt()({title:t,message:e,$type:"alert",closeOnPressEscape:!1,closeOnClickModal:!1},i))},Da.confirm=function(e,t,i){return"object"===("undefined"===typeof t?"undefined":Ta(t))?(i=t,t=""):void 0===t&&(t=""),Da(Tt()({title:t,message:e,$type:"confirm",showCancelButton:!0},i))},Da.prompt=function(e,t,i){return"object"===("undefined"===typeof t?"undefined":Ta(t))?(i=t,t=""):void 0===t&&(t=""),Da(Tt()({title:t,message:e,showCancelButton:!0,showInput:!0,$type:"prompt"},i))},Da.close=function(){Oa.doClose(),Oa.visible=!1,ka=[],wa=null};var Ma=Da,xa=Ma,Ba=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-breadcrumb",attrs:{"aria-label":"Breadcrumb",role:"navigation"}},[e._t("default")],2)},Ua=[];Ba._withStripped=!0;var Fa={name:"ElBreadcrumb",props:{separator:{type:String,default:"/"},separatorClass:{type:String,default:""}},provide:function(){return{elBreadcrumb:this}},mounted:function(){var e=this.$el.querySelectorAll(".el-breadcrumb__item");e.length&&e[e.length-1].setAttribute("aria-current","page")}},Va=Fa,ja=a(Va,Ba,Ua,!1,null,null,null);ja.options.__file="packages/breadcrumb/src/breadcrumb.vue";var Ga=ja.exports;Ga.install=function(e){e.component(Ga.name,Ga)};var Ha=Ga,Qa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"el-breadcrumb__item"},[i("span",{ref:"link",class:["el-breadcrumb__inner",e.to?"is-link":""],attrs:{role:"link"}},[e._t("default")],2),e.separatorClass?i("i",{staticClass:"el-breadcrumb__separator",class:e.separatorClass}):i("span",{staticClass:"el-breadcrumb__separator",attrs:{role:"presentation"}},[e._v(e._s(e.separator))])])},Wa=[];Qa._withStripped=!0;var qa={name:"ElBreadcrumbItem",props:{to:{},replace:Boolean},data:function(){return{separator:"",separatorClass:""}},inject:["elBreadcrumb"],mounted:function(){var e=this;this.separator=this.elBreadcrumb.separator,this.separatorClass=this.elBreadcrumb.separatorClass;var t=this.$refs.link;t.setAttribute("role","link"),t.addEventListener("click",(function(t){var i=e.to,n=e.$router;i&&n&&(e.replace?n.replace(i):n.push(i))}))}},$a=qa,za=a($a,Qa,Wa,!1,null,null,null);za.options.__file="packages/breadcrumb/src/breadcrumb-item.vue";var Za=za.exports;Za.install=function(e){e.component(Za.name,Za)};var Ya=Za,Ka=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"el-form",class:[e.labelPosition?"el-form--label-"+e.labelPosition:"",{"el-form--inline":e.inline}]},[e._t("default")],2)},Ja=[];Ka._withStripped=!0;var Xa={name:"ElForm",componentName:"ElForm",provide:function(){return{elForm:this}},props:{model:Object,rules:Object,labelPosition:String,labelWidth:String,labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1}},watch:{rules:function(){this.fields.forEach((function(e){e.removeValidateEvents(),e.addValidateEvents()})),this.validateOnRuleChange&&this.validate((function(){}))}},computed:{autoLabelWidth:function(){if(!this.potentialLabelWidthArr.length)return 0;var e=Math.max.apply(Math,this.potentialLabelWidthArr);return e?e+"px":""}},data:function(){return{fields:[],potentialLabelWidthArr:[]}},created:function(){var e=this;this.$on("el.form.addField",(function(t){t&&e.fields.push(t)})),this.$on("el.form.removeField",(function(t){t.prop&&e.fields.splice(e.fields.indexOf(t),1)}))},methods:{resetFields:function(){this.model?this.fields.forEach((function(e){e.resetField()})):console.warn("[Element Warn][Form]model is required for resetFields to work.")},clearValidate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length?"string"===typeof e?this.fields.filter((function(t){return e===t.prop})):this.fields.filter((function(t){return e.indexOf(t.prop)>-1})):this.fields;t.forEach((function(e){e.clearValidate()}))},validate:function(e){var t=this;if(this.model){var i=void 0;"function"!==typeof e&&window.Promise&&(i=new window.Promise((function(t,i){e=function(e){e?t(e):i(e)}})));var n=!0,r=0;0===this.fields.length&&e&&e(!0);var o={};return this.fields.forEach((function(i){i.validate("",(function(i,s){i&&(n=!1),o=Tt()({},o,s),"function"===typeof e&&++r===t.fields.length&&e(n,o)}))})),i||void 0}console.warn("[Element Warn][Form]model is required for validate to work!")},validateField:function(e,t){e=[].concat(e);var i=this.fields.filter((function(t){return-1!==e.indexOf(t.prop)}));i.length?i.forEach((function(e){e.validate("",t)})):console.warn("[Element Warn]please pass correct props!")},getLabelWidthIndex:function(e){var t=this.potentialLabelWidthArr.indexOf(e);if(-1===t)throw new Error("[ElementForm]unpected width ",e);return t},registerLabelWidth:function(e,t){if(e&&t){var i=this.getLabelWidthIndex(t);this.potentialLabelWidthArr.splice(i,1,e)}else e&&this.potentialLabelWidthArr.push(e)},deregisterLabelWidth:function(e){var t=this.getLabelWidthIndex(e);this.potentialLabelWidthArr.splice(t,1)}}},ec=Xa,tc=a(ec,Ka,Ja,!1,null,null,null);tc.options.__file="packages/form/src/form.vue";var ic=tc.exports;ic.install=function(e){e.component(ic.name,ic)};var nc=ic,rc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-form-item",class:[{"el-form-item--feedback":e.elForm&&e.elForm.statusIcon,"is-error":"error"===e.validateState,"is-validating":"validating"===e.validateState,"is-success":"success"===e.validateState,"is-required":e.isRequired||e.required,"is-no-asterisk":e.elForm&&e.elForm.hideRequiredAsterisk},e.sizeClass?"el-form-item--"+e.sizeClass:""]},[i("label-wrap",{attrs:{"is-auto-width":e.labelStyle&&"auto"===e.labelStyle.width,"update-all":"auto"===e.form.labelWidth}},[e.label||e.$slots.label?i("label",{staticClass:"el-form-item__label",style:e.labelStyle,attrs:{for:e.labelFor}},[e._t("label",[e._v(e._s(e.label+e.form.labelSuffix))])],2):e._e()]),i("div",{staticClass:"el-form-item__content",style:e.contentStyle},[e._t("default"),i("transition",{attrs:{name:"el-zoom-in-top"}},["error"===e.validateState&&e.showMessage&&e.form.showMessage?e._t("error",[i("div",{staticClass:"el-form-item__error",class:{"el-form-item__error--inline":"boolean"===typeof e.inlineMessage?e.inlineMessage:e.elForm&&e.elForm.inlineMessage||!1}},[e._v("\n          "+e._s(e.validateMessage)+"\n        ")])],{error:e.validateMessage}):e._e()],2)],2)],1)},oc=[];rc._withStripped=!0;var sc,ac,cc=i(40),lc=i.n(cc),uc={props:{isAutoWidth:Boolean,updateAll:Boolean},inject:["elForm","elFormItem"],render:function(){var e=arguments[0],t=this.$slots.default;if(!t)return null;if(this.isAutoWidth){var i=this.elForm.autoLabelWidth,n={};if(i&&"auto"!==i){var r=parseInt(i,10)-this.computedWidth;r&&(n.marginLeft=r+"px")}return e("div",{class:"el-form-item__label-wrap",style:n},[t])}return t[0]},methods:{getLabelWidth:function(){if(this.$el&&this.$el.firstElementChild){var e=window.getComputedStyle(this.$el.firstElementChild).width;return Math.ceil(parseFloat(e))}return 0},updateLabelWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"update";this.$slots.default&&this.isAutoWidth&&this.$el.firstElementChild&&("update"===e?this.computedWidth=this.getLabelWidth():"remove"===e&&this.elForm.deregisterLabelWidth(this.computedWidth))}},watch:{computedWidth:function(e,t){this.updateAll&&(this.elForm.registerLabelWidth(e,t),this.elFormItem.updateComputedLabelWidth(e))}},data:function(){return{computedWidth:0}},mounted:function(){this.updateLabelWidth("update")},updated:function(){this.updateLabelWidth("update")},beforeDestroy:function(){this.updateLabelWidth("remove")}},dc=uc,hc=a(dc,sc,ac,!1,null,null,null);hc.options.__file="packages/form/src/label-wrap.vue";var pc=hc.exports,fc={name:"ElFormItem",componentName:"ElFormItem",mixins:[w.a],provide:function(){return{elFormItem:this}},inject:["elForm"],props:{label:String,labelWidth:String,prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:String},components:{LabelWrap:pc},watch:{error:{immediate:!0,handler:function(e){this.validateMessage=e,this.validateState=e?"error":""}},validateStatus:function(e){this.validateState=e}},computed:{labelFor:function(){return this.for||this.prop},labelStyle:function(){var e={};if("top"===this.form.labelPosition)return e;var t=this.labelWidth||this.form.labelWidth;return t&&(e.width=t),e},contentStyle:function(){var e={},t=this.label;if("top"===this.form.labelPosition||this.form.inline)return e;if(!t&&!this.labelWidth&&this.isNested)return e;var i=this.labelWidth||this.form.labelWidth;return"auto"===i?"auto"===this.labelWidth?e.marginLeft=this.computedLabelWidth:"auto"===this.form.labelWidth&&(e.marginLeft=this.elForm.autoLabelWidth):e.marginLeft=i,e},form:function(){var e=this.$parent,t=e.$options.componentName;while("ElForm"!==t)"ElFormItem"===t&&(this.isNested=!0),e=e.$parent,t=e.$options.componentName;return e},fieldValue:function(){var e=this.form.model;if(e&&this.prop){var t=this.prop;return-1!==t.indexOf(":")&&(t=t.replace(/:/,".")),Object(v["getPropByPath"])(e,t,!0).v}},isRequired:function(){var e=this.getRules(),t=!1;return e&&e.length&&e.every((function(e){return!e.required||(t=!0,!1)})),t},_formSize:function(){return this.elForm.size},elFormItemSize:function(){return this.size||this._formSize},sizeClass:function(){return this.elFormItemSize||(this.$ELEMENT||{}).size}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1,computedLabelWidth:""}},methods:{validate:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v["noop"];this.validateDisabled=!1;var n=this.getFilteredRule(e);if((!n||0===n.length)&&void 0===this.required)return i(),!0;this.validateState="validating";var r={};n&&n.length>0&&n.forEach((function(e){delete e.trigger})),r[this.prop]=n;var o=new lc.a(r),s={};s[this.prop]=this.fieldValue,o.validate(s,{firstFields:!0},(function(e,n){t.validateState=e?"error":"success",t.validateMessage=e?e[0].message:"",i(t.validateMessage,n),t.elForm&&t.elForm.$emit("validate",t.prop,!e,t.validateMessage||null)}))},clearValidate:function(){this.validateState="",this.validateMessage="",this.validateDisabled=!1},resetField:function(){var e=this;this.validateState="",this.validateMessage="";var t=this.form.model,i=this.fieldValue,n=this.prop;-1!==n.indexOf(":")&&(n=n.replace(/:/,"."));var r=Object(v["getPropByPath"])(t,n,!0);this.validateDisabled=!0,Array.isArray(i)?r.o[r.k]=[].concat(this.initialValue):r.o[r.k]=this.initialValue,this.$nextTick((function(){e.validateDisabled=!1})),this.broadcast("ElTimeSelect","fieldReset",this.initialValue)},getRules:function(){var e=this.form.rules,t=this.rules,i=void 0!==this.required?{required:!!this.required}:[],n=Object(v["getPropByPath"])(e,this.prop||"");return e=e?n.o[this.prop||""]||n.v:[],[].concat(t||e||[]).concat(i)},getFilteredRule:function(e){var t=this.getRules();return t.filter((function(t){return!t.trigger||""===e||(Array.isArray(t.trigger)?t.trigger.indexOf(e)>-1:t.trigger===e)})).map((function(e){return Tt()({},e)}))},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")},updateComputedLabelWidth:function(e){this.computedLabelWidth=e?e+"px":""},addValidateEvents:function(){var e=this.getRules();(e.length||void 0!==this.required)&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))},removeValidateEvents:function(){this.$off()}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var e=this.fieldValue;Array.isArray(e)&&(e=[].concat(e)),Object.defineProperty(this,"initialValue",{value:e}),this.addValidateEvents()}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}},gc=fc,mc=a(gc,rc,oc,!1,null,null,null);mc.options.__file="packages/form/src/form-item.vue";var _c=mc.exports;_c.install=function(e){e.component(_c.name,_c)};var vc=_c,Ec=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-tabs__active-bar",class:"is-"+e.rootTabs.tabPosition,style:e.barStyle})},Ac=[];Ec._withStripped=!0;var yc={name:"TabBar",props:{tabs:Array},inject:["rootTabs"],computed:{barStyle:{get:function(){var e=this,t={},i=0,n=0,r=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"width":"height",o="width"===r?"x":"y",s=function(e){return e.toLowerCase().replace(/( |^)[a-z]/g,(function(e){return e.toUpperCase()}))};this.tabs.every((function(t,o){var a=Object(v["arrayFind"])(e.$parent.$refs.tabs||[],(function(e){return e.id.replace("tab-","")===t.paneName}));if(!a)return!1;if(t.active){n=a["client"+s(r)];var c=window.getComputedStyle(a);return"width"===r&&e.tabs.length>1&&(n-=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)),"width"===r&&(i+=parseFloat(c.paddingLeft)),!1}return i+=a["client"+s(r)],!0}));var a="translate"+s(o)+"("+i+"px)";return t[r]=n+"px",t.transform=a,t.msTransform=a,t.webkitTransform=a,t}}}},Sc=yc,Cc=a(Sc,Ec,Ac,!1,null,null,null);Cc.options.__file="packages/tabs/src/tab-bar.vue";var bc=Cc.exports;function Tc(){}var Ic,Rc,wc=function(e){return e.toLowerCase().replace(/( |^)[a-z]/g,(function(e){return e.toUpperCase()}))},Oc={name:"TabNav",components:{TabBar:bc},inject:["rootTabs"],props:{panes:Array,currentName:String,editable:Boolean,onTabClick:{type:Function,default:Tc},onTabRemove:{type:Function,default:Tc},type:String,stretch:Boolean},data:function(){return{scrollable:!1,navOffset:0,isFocus:!1,focusable:!0}},computed:{navStyle:function(){var e=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"X":"Y";return{transform:"translate"+e+"(-"+this.navOffset+"px)"}},sizeName:function(){return-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"width":"height"}},methods:{scrollPrev:function(){var e=this.$refs.navScroll["offset"+wc(this.sizeName)],t=this.navOffset;if(t){var i=t>e?t-e:0;this.navOffset=i}},scrollNext:function(){var e=this.$refs.nav["offset"+wc(this.sizeName)],t=this.$refs.navScroll["offset"+wc(this.sizeName)],i=this.navOffset;if(!(e-i<=t)){var n=e-i>2*t?i+t:e-t;this.navOffset=n}},scrollToActiveTab:function(){if(this.scrollable){var e=this.$refs.nav,t=this.$el.querySelector(".is-active");if(t){var i=this.$refs.navScroll,n=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition),r=t.getBoundingClientRect(),o=i.getBoundingClientRect(),s=n?e.offsetWidth-o.width:e.offsetHeight-o.height,a=this.navOffset,c=a;n?(r.left<o.left&&(c=a-(o.left-r.left)),r.right>o.right&&(c=a+r.right-o.right)):(r.top<o.top&&(c=a-(o.top-r.top)),r.bottom>o.bottom&&(c=a+(r.bottom-o.bottom))),c=Math.max(c,0),this.navOffset=Math.min(c,s)}}},update:function(){if(this.$refs.nav){var e=this.sizeName,t=this.$refs.nav["offset"+wc(e)],i=this.$refs.navScroll["offset"+wc(e)],n=this.navOffset;if(i<t){var r=this.navOffset;this.scrollable=this.scrollable||{},this.scrollable.prev=r,this.scrollable.next=r+i<t,t-r<i&&(this.navOffset=t-i)}else this.scrollable=!1,n>0&&(this.navOffset=0)}},changeTab:function(e){var t=e.keyCode,i=void 0,n=void 0,r=void 0;-1!==[37,38,39,40].indexOf(t)&&(r=e.currentTarget.querySelectorAll("[role=tab]"),n=Array.prototype.indexOf.call(r,e.target),i=37===t||38===t?0===n?r.length-1:n-1:n<r.length-1?n+1:0,r[i].focus(),r[i].click(),this.setFocus())},setFocus:function(){this.focusable&&(this.isFocus=!0)},removeFocus:function(){this.isFocus=!1},visibilityChangeHandler:function(){var e=this,t=document.visibilityState;"hidden"===t?this.focusable=!1:"visible"===t&&setTimeout((function(){e.focusable=!0}),50)},windowBlurHandler:function(){this.focusable=!1},windowFocusHandler:function(){var e=this;setTimeout((function(){e.focusable=!0}),50)}},updated:function(){this.update()},render:function(e){var t=this,i=this.type,n=this.panes,r=this.editable,o=this.stretch,s=this.onTabClick,a=this.onTabRemove,c=this.navStyle,l=this.scrollable,u=this.scrollNext,d=this.scrollPrev,h=this.changeTab,p=this.setFocus,f=this.removeFocus,g=l?[e("span",{class:["el-tabs__nav-prev",l.prev?"":"is-disabled"],on:{click:d}},[e("i",{class:"el-icon-arrow-left"})]),e("span",{class:["el-tabs__nav-next",l.next?"":"is-disabled"],on:{click:u}},[e("i",{class:"el-icon-arrow-right"})])]:null,m=this._l(n,(function(i,n){var o,c=i.name||i.index||n,l=i.isClosable||r;i.index=""+n;var u=l?e("span",{class:"el-icon-close",on:{click:function(e){a(i,e)}}}):null,d=i.$slots.label||i.label,h=i.active?0:-1;return e("div",{class:(o={"el-tabs__item":!0},o["is-"+t.rootTabs.tabPosition]=!0,o["is-active"]=i.active,o["is-disabled"]=i.disabled,o["is-closable"]=l,o["is-focus"]=t.isFocus,o),attrs:{id:"tab-"+c,"aria-controls":"pane-"+c,role:"tab","aria-selected":i.active,tabindex:h},key:"tab-"+c,ref:"tabs",refInFor:!0,on:{focus:function(){p()},blur:function(){f()},click:function(e){f(),s(i,c,e)},keydown:function(e){!l||46!==e.keyCode&&8!==e.keyCode||a(i,e)}}},[d,u])}));return e("div",{class:["el-tabs__nav-wrap",l?"is-scrollable":"","is-"+this.rootTabs.tabPosition]},[g,e("div",{class:["el-tabs__nav-scroll"],ref:"navScroll"},[e("div",{class:["el-tabs__nav","is-"+this.rootTabs.tabPosition,o&&-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"is-stretch":""],ref:"nav",style:c,attrs:{role:"tablist"},on:{keydown:h}},[i?null:e("tab-bar",{attrs:{tabs:n}}),m])])])},mounted:function(){var e=this;Object(Xi["addResizeListener"])(this.$el,this.update),document.addEventListener("visibilitychange",this.visibilityChangeHandler),window.addEventListener("blur",this.windowBlurHandler),window.addEventListener("focus",this.windowFocusHandler),setTimeout((function(){e.scrollToActiveTab()}),0)},beforeDestroy:function(){this.$el&&this.update&&Object(Xi["removeResizeListener"])(this.$el,this.update),document.removeEventListener("visibilitychange",this.visibilityChangeHandler),window.removeEventListener("blur",this.windowBlurHandler),window.removeEventListener("focus",this.windowFocusHandler)}},kc=Oc,Nc=a(kc,Ic,Rc,!1,null,null,null);Nc.options.__file="packages/tabs/src/tab-nav.vue";var Lc,Pc,Dc=Nc.exports,Mc={name:"ElTabs",components:{TabNav:Dc},props:{type:String,activeName:String,closable:Boolean,addable:Boolean,value:{},editable:Boolean,tabPosition:{type:String,default:"top"},beforeLeave:Function,stretch:Boolean},provide:function(){return{rootTabs:this}},data:function(){return{currentName:this.value||this.activeName,panes:[]}},watch:{activeName:function(e){this.setCurrentName(e)},value:function(e){this.setCurrentName(e)},currentName:function(e){var t=this;this.$refs.nav&&this.$nextTick((function(){t.$refs.nav.$nextTick((function(e){t.$refs.nav.scrollToActiveTab()}))}))}},methods:{calcPaneInstances:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.$slots.default){var i=this.$slots.default.filter((function(e){return e.tag&&e.componentOptions&&"ElTabPane"===e.componentOptions.Ctor.options.name})),n=i.map((function(e){var t=e.componentInstance;return t})),r=!(n.length===this.panes.length&&n.every((function(t,i){return t===e.panes[i]})));(t||r)&&(this.panes=n)}else 0!==this.panes.length&&(this.panes=[])},handleTabClick:function(e,t,i){e.disabled||(this.setCurrentName(t),this.$emit("tab-click",e,i))},handleTabRemove:function(e,t){e.disabled||(t.stopPropagation(),this.$emit("edit",e.name,"remove"),this.$emit("tab-remove",e.name))},handleTabAdd:function(){this.$emit("edit",null,"add"),this.$emit("tab-add")},setCurrentName:function(e){var t=this,i=function(){t.currentName=e,t.$emit("input",e)};if(this.currentName!==e&&this.beforeLeave){var n=this.beforeLeave(e,this.currentName);n&&n.then?n.then((function(){i(),t.$refs.nav&&t.$refs.nav.removeFocus()}),(function(){})):!1!==n&&i()}else i()}},render:function(e){var t,i=this.type,n=this.handleTabClick,r=this.handleTabRemove,o=this.handleTabAdd,s=this.currentName,a=this.panes,c=this.editable,l=this.addable,u=this.tabPosition,d=this.stretch,h=c||l?e("span",{class:"el-tabs__new-tab",on:{click:o,keydown:function(e){13===e.keyCode&&o()}},attrs:{tabindex:"0"}},[e("i",{class:"el-icon-plus"})]):null,p={props:{currentName:s,onTabClick:n,onTabRemove:r,editable:c,type:i,panes:a,stretch:d},ref:"nav"},f=e("div",{class:["el-tabs__header","is-"+u]},[h,e("tab-nav",p)]),g=e("div",{class:"el-tabs__content"},[this.$slots.default]);return e("div",{class:(t={"el-tabs":!0,"el-tabs--card":"card"===i},t["el-tabs--"+u]=!0,t["el-tabs--border-card"]="border-card"===i,t)},["bottom"!==u?[f,g]:[g,f]])},created:function(){this.currentName||this.setCurrentName("0"),this.$on("tab-nav-update",this.calcPaneInstances.bind(null,!0))},mounted:function(){this.calcPaneInstances()},updated:function(){this.calcPaneInstances()}},xc=Mc,Bc=a(xc,Lc,Pc,!1,null,null,null);Bc.options.__file="packages/tabs/src/tabs.vue";var Uc=Bc.exports;Uc.install=function(e){e.component(Uc.name,Uc)};var Fc=Uc,Vc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return!e.lazy||e.loaded||e.active?i("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"el-tab-pane",attrs:{role:"tabpanel","aria-hidden":!e.active,id:"pane-"+e.paneName,"aria-labelledby":"tab-"+e.paneName}},[e._t("default")],2):e._e()},jc=[];Vc._withStripped=!0;var Gc={name:"ElTabPane",componentName:"ElTabPane",props:{label:String,labelContent:Function,name:String,closable:Boolean,disabled:Boolean,lazy:Boolean},data:function(){return{index:null,loaded:!1}},computed:{isClosable:function(){return this.closable||this.$parent.closable},active:function(){var e=this.$parent.currentName===(this.name||this.index);return e&&(this.loaded=!0),e},paneName:function(){return this.name||this.index}},updated:function(){this.$parent.$emit("tab-nav-update")}},Hc=Gc,Qc=a(Hc,Vc,jc,!1,null,null,null);Qc.options.__file="packages/tabs/src/tab-pane.vue";var Wc=Qc.exports;Wc.install=function(e){e.component(Wc.name,Wc)};var qc,$c,zc=Wc,Zc={name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String,effect:{type:String,default:"light",validator:function(e){return-1!==["dark","light","plain"].indexOf(e)}}},methods:{handleClose:function(e){e.stopPropagation(),this.$emit("close",e)},handleClick:function(e){this.$emit("click",e)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(e){var t=this.type,i=this.tagSize,n=this.hit,r=this.effect,o=["el-tag",t?"el-tag--"+t:"",i?"el-tag--"+i:"",r?"el-tag--"+r:"",n&&"is-hit"],s=e("span",{class:o,style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&e("i",{class:"el-tag__close el-icon-close",on:{click:this.handleClose}})]);return this.disableTransitions?s:e("transition",{attrs:{name:"el-zoom-in-center"}},[s])}},Yc=Zc,Kc=a(Yc,qc,$c,!1,null,null,null);Kc.options.__file="packages/tag/src/tag.vue";var Jc=Kc.exports;Jc.install=function(e){e.component(Jc.name,Jc)};var Xc=Jc,el=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-tree",class:{"el-tree--highlight-current":e.highlightCurrent,"is-dragging":!!e.dragState.draggingNode,"is-drop-not-allow":!e.dragState.allowDrop,"is-drop-inner":"inner"===e.dragState.dropType},attrs:{role:"tree"}},[e._l(e.root.childNodes,(function(t){return i("el-tree-node",{key:e.getNodeKey(t),attrs:{node:t,props:e.props,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent},on:{"node-expand":e.handleNodeExpand}})})),e.isEmpty?i("div",{staticClass:"el-tree__empty-block"},[i("span",{staticClass:"el-tree__empty-text"},[e._v(e._s(e.emptyText))])]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.dragState.showDropIndicator,expression:"dragState.showDropIndicator"}],ref:"dropIndicator",staticClass:"el-tree__drop-indicator"})],2)},tl=[];el._withStripped=!0;var il="$treeNodeId",nl=function(e,t){t&&!t[il]&&Object.defineProperty(t,il,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},rl=function(e,t){return e?t[e]:t[il]},ol=function(e,t){var i=e;while(i&&"BODY"!==i.tagName){if(i.__vue__&&i.__vue__.$options.name===t)return i.__vue__;i=i.parentNode}return null},sl=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function al(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var cl=function(e){for(var t=!0,i=!0,n=!0,r=0,o=e.length;r<o;r++){var s=e[r];(!0!==s.checked||s.indeterminate)&&(t=!1,s.disabled||(n=!1)),(!1!==s.checked||s.indeterminate)&&(i=!1)}return{all:t,none:i,allWithoutDisable:n,half:!t&&!i}},ll=function e(t){if(0!==t.childNodes.length){var i=cl(t.childNodes),n=i.all,r=i.none,o=i.half;n?(t.checked=!0,t.indeterminate=!1):o?(t.checked=!1,t.indeterminate=!0):r&&(t.checked=!1,t.indeterminate=!1);var s=t.parent;s&&0!==s.level&&(t.store.checkStrictly||e(s))}},ul=function(e,t){var i=e.store.props,n=e.data||{},r=i[t];if("function"===typeof r)return r(n,e);if("string"===typeof r)return n[r];if("undefined"===typeof r){var o=n[t];return void 0===o?"":o}},dl=0,hl=function(){function e(t){for(var i in al(this,e),this.id=dl++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,t)t.hasOwnProperty(i)&&(this[i]=t[i]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1);var n=this.store;if(!n)throw new Error("[Node]store is required!");n.registerNode(this);var r=n.props;if(r&&"undefined"!==typeof r.isLeaf){var o=ul(this,"isLeaf");"boolean"===typeof o&&(this.isLeafByUser=o)}if(!0!==n.lazy&&this.data?(this.setData(this.data),n.defaultExpandAll&&(this.expanded=!0)):this.level>0&&n.lazy&&n.defaultExpandAll&&this.expand(),Array.isArray(this.data)||nl(this,this.data),this.data){var s=n.defaultExpandedKeys,a=n.key;a&&s&&-1!==s.indexOf(this.key)&&this.expand(null,n.autoExpandParent),a&&void 0!==n.currentNodeKey&&this.key===n.currentNodeKey&&(n.currentNode=this,n.currentNode.isCurrent=!0),n.lazy&&n._initDefaultCheckedNode(this),this.updateLeafState()}}return e.prototype.setData=function(e){Array.isArray(e)||nl(this,e),this.data=e,this.childNodes=[];var t=void 0;t=0===this.level&&this.data instanceof Array?this.data:ul(this,"children")||[];for(var i=0,n=t.length;i<n;i++)this.insertChild({data:t[i]})},e.prototype.contains=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=function i(n){for(var r=n.childNodes||[],o=!1,s=0,a=r.length;s<a;s++){var c=r[s];if(c===e||t&&i(c)){o=!0;break}}return o};return i(this)},e.prototype.remove=function(){var e=this.parent;e&&e.removeChild(this)},e.prototype.insertChild=function(t,i,n){if(!t)throw new Error("insertChild error: child is required.");if(!(t instanceof e)){if(!n){var r=this.getChildren(!0)||[];-1===r.indexOf(t.data)&&("undefined"===typeof i||i<0?r.push(t.data):r.splice(i,0,t.data))}Tt()(t,{parent:this,store:this.store}),t=new e(t)}t.level=this.level+1,"undefined"===typeof i||i<0?this.childNodes.push(t):this.childNodes.splice(i,0,t),this.updateLeafState()},e.prototype.insertBefore=function(e,t){var i=void 0;t&&(i=this.childNodes.indexOf(t)),this.insertChild(e,i)},e.prototype.insertAfter=function(e,t){var i=void 0;t&&(i=this.childNodes.indexOf(t),-1!==i&&(i+=1)),this.insertChild(e,i)},e.prototype.removeChild=function(e){var t=this.getChildren()||[],i=t.indexOf(e.data);i>-1&&t.splice(i,1);var n=this.childNodes.indexOf(e);n>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(n,1)),this.updateLeafState()},e.prototype.removeChildByData=function(e){for(var t=null,i=0;i<this.childNodes.length;i++)if(this.childNodes[i].data===e){t=this.childNodes[i];break}t&&this.removeChild(t)},e.prototype.expand=function(e,t){var i=this,n=function(){if(t){var n=i.parent;while(n.level>0)n.expanded=!0,n=n.parent}i.expanded=!0,e&&e()};this.shouldLoadData()?this.loadData((function(e){e instanceof Array&&(i.checked?i.setChecked(!0,!0):i.store.checkStrictly||ll(i),n())})):n()},e.prototype.doCreateChildren=function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e){t.insertChild(Tt()({data:e},i),void 0,!0)}))},e.prototype.collapse=function(){this.expanded=!1},e.prototype.shouldLoadData=function(){return!0===this.store.lazy&&this.store.load&&!this.loaded},e.prototype.updateLeafState=function(){if(!0!==this.store.lazy||!0===this.loaded||"undefined"===typeof this.isLeafByUser){var e=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}else this.isLeaf=this.isLeafByUser},e.prototype.setChecked=function(e,t,i,n){var r=this;if(this.indeterminate="half"===e,this.checked=!0===e,!this.store.checkStrictly){if(!this.shouldLoadData()||this.store.checkDescendants){var o=cl(this.childNodes),s=o.all,a=o.allWithoutDisable;this.isLeaf||s||!a||(this.checked=!1,e=!1);var c=function(){if(t){for(var i=r.childNodes,o=0,s=i.length;o<s;o++){var a=i[o];n=n||!1!==e;var c=a.disabled?a.checked:n;a.setChecked(c,t,!0,n)}var l=cl(i),u=l.half,d=l.all;d||(r.checked=d,r.indeterminate=u)}};if(this.shouldLoadData())return void this.loadData((function(){c(),ll(r)}),{checked:!1!==e});c()}var l=this.parent;l&&0!==l.level&&(i||ll(l))}},e.prototype.getChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0===this.level)return this.data;var t=this.data;if(!t)return null;var i=this.store.props,n="children";return i&&(n=i.children||"children"),void 0===t[n]&&(t[n]=null),e&&!t[n]&&(t[n]=[]),t[n]},e.prototype.updateChildren=function(){var e=this,t=this.getChildren()||[],i=this.childNodes.map((function(e){return e.data})),n={},r=[];t.forEach((function(e,t){var o=e[il],s=!!o&&Object(v["arrayFindIndex"])(i,(function(e){return e[il]===o}))>=0;s?n[o]={index:t,data:e}:r.push({index:t,data:e})})),this.store.lazy||i.forEach((function(t){n[t[il]]||e.removeChildByData(t)})),r.forEach((function(t){var i=t.index,n=t.data;e.insertChild({data:n},i)})),this.updateLeafState()},e.prototype.loadData=function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!0!==this.store.lazy||!this.store.load||this.loaded||this.loading&&!Object.keys(i).length)e&&e.call(this);else{this.loading=!0;var n=function(n){t.loaded=!0,t.loading=!1,t.childNodes=[],t.doCreateChildren(n,i),t.updateLeafState(),e&&e.call(t,n)};this.store.load(this,n)}},sl(e,[{key:"label",get:function(){return ul(this,"label")}},{key:"key",get:function(){var e=this.store.key;return this.data?this.data[e]:null}},{key:"disabled",get:function(){return ul(this,"disabled")}},{key:"nextSibling",get:function(){var e=this.parent;if(e){var t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}},{key:"previousSibling",get:function(){var e=this.parent;if(e){var t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}}]),e}(),pl=hl,fl="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function gl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ml=function(){function e(t){var i=this;for(var n in gl(this,e),this.currentNode=null,this.currentNodeKey=null,t)t.hasOwnProperty(n)&&(this[n]=t[n]);if(this.nodesMap={},this.root=new pl({data:this.data,store:this}),this.lazy&&this.load){var r=this.load;r(this.root,(function(e){i.root.doCreateChildren(e),i._initDefaultCheckedNodes()}))}else this._initDefaultCheckedNodes()}return e.prototype.filter=function(e){var t=this.filterNodeMethod,i=this.lazy,n=function n(r){var o=r.root?r.root.childNodes:r.childNodes;if(o.forEach((function(i){i.visible=t.call(i,e,i.data,i),n(i)})),!r.visible&&o.length){var s=!0;s=!o.some((function(e){return e.visible})),r.root?r.root.visible=!1===s:r.visible=!1===s}e&&(!r.visible||r.isLeaf||i||r.expand())};n(this)},e.prototype.setData=function(e){var t=e!==this.root.data;t?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()},e.prototype.getNode=function(e){if(e instanceof pl)return e;var t="object"!==("undefined"===typeof e?"undefined":fl(e))?e:rl(this.key,e);return this.nodesMap[t]||null},e.prototype.insertBefore=function(e,t){var i=this.getNode(t);i.parent.insertBefore({data:e},i)},e.prototype.insertAfter=function(e,t){var i=this.getNode(t);i.parent.insertAfter({data:e},i)},e.prototype.remove=function(e){var t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))},e.prototype.append=function(e,t){var i=t?this.getNode(t):this.root;i&&i.insertChild({data:e})},e.prototype._initDefaultCheckedNodes=function(){var e=this,t=this.defaultCheckedKeys||[],i=this.nodesMap;t.forEach((function(t){var n=i[t];n&&n.setChecked(!0,!e.checkStrictly)}))},e.prototype._initDefaultCheckedNode=function(e){var t=this.defaultCheckedKeys||[];-1!==t.indexOf(e.key)&&e.setChecked(!0,!this.checkStrictly)},e.prototype.setDefaultCheckedKey=function(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())},e.prototype.registerNode=function(e){var t=this.key;if(t&&e&&e.data){var i=e.key;void 0!==i&&(this.nodesMap[e.key]=e)}},e.prototype.deregisterNode=function(e){var t=this,i=this.key;i&&e&&e.data&&(e.childNodes.forEach((function(e){t.deregisterNode(e)})),delete this.nodesMap[e.key])},e.prototype.getCheckedNodes=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[],n=function n(r){var o=r.root?r.root.childNodes:r.childNodes;o.forEach((function(r){(r.checked||t&&r.indeterminate)&&(!e||e&&r.isLeaf)&&i.push(r.data),n(r)}))};return n(this),i},e.prototype.getCheckedKeys=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getCheckedNodes(t).map((function(t){return(t||{})[e.key]}))},e.prototype.getHalfCheckedNodes=function(){var e=[],t=function t(i){var n=i.root?i.root.childNodes:i.childNodes;n.forEach((function(i){i.indeterminate&&e.push(i.data),t(i)}))};return t(this),e},e.prototype.getHalfCheckedKeys=function(){var e=this;return this.getHalfCheckedNodes().map((function(t){return(t||{})[e.key]}))},e.prototype._getAllNodes=function(){var e=[],t=this.nodesMap;for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e},e.prototype.updateChildren=function(e,t){var i=this.nodesMap[e];if(i){for(var n=i.childNodes,r=n.length-1;r>=0;r--){var o=n[r];this.remove(o.data)}for(var s=0,a=t.length;s<a;s++){var c=t[s];this.append(c,i.data)}}},e.prototype._setCheckedKeys=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments[2],n=this._getAllNodes().sort((function(e,t){return t.level-e.level})),r=Object.create(null),o=Object.keys(i);n.forEach((function(e){return e.setChecked(!1,!1)}));for(var s=0,a=n.length;s<a;s++){var c=n[s],l=c.data[e].toString(),u=o.indexOf(l)>-1;if(u){var d=c.parent;while(d&&d.level>0)r[d.data[e]]=!0,d=d.parent;c.isLeaf||this.checkStrictly?c.setChecked(!0,!1):(c.setChecked(!0,!0),t&&function(){c.setChecked(!1,!1);var e=function e(t){var i=t.childNodes;i.forEach((function(t){t.isLeaf||t.setChecked(!1,!1),e(t)}))};e(c)}())}else c.checked&&!r[l]&&c.setChecked(!1,!1)}},e.prototype.setCheckedNodes=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.key,n={};e.forEach((function(e){n[(e||{})[i]]=!0})),this._setCheckedKeys(i,t,n)},e.prototype.setCheckedKeys=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.defaultCheckedKeys=e;var i=this.key,n={};e.forEach((function(e){n[e]=!0})),this._setCheckedKeys(i,t,n)},e.prototype.setDefaultExpandedKeys=function(e){var t=this;e=e||[],this.defaultExpandedKeys=e,e.forEach((function(e){var i=t.getNode(e);i&&i.expand(null,t.autoExpandParent)}))},e.prototype.setChecked=function(e,t,i){var n=this.getNode(e);n&&n.setChecked(!!t,i)},e.prototype.getCurrentNode=function(){return this.currentNode},e.prototype.setCurrentNode=function(e){var t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0},e.prototype.setUserCurrentNode=function(e){var t=e[this.key],i=this.nodesMap[t];this.setCurrentNode(i)},e.prototype.setCurrentNodeKey=function(e){if(null===e||void 0===e)return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);var t=this.getNode(e);t&&this.setCurrentNode(t)},e}(),_l=ml,vl=function(){var e=this,t=this,i=t.$createElement,n=t._self._c||i;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.node.visible,expression:"node.visible"}],ref:"node",staticClass:"el-tree-node",class:{"is-expanded":t.expanded,"is-current":t.node.isCurrent,"is-hidden":!t.node.visible,"is-focusable":!t.node.disabled,"is-checked":!t.node.disabled&&t.node.checked},attrs:{role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.draggable},on:{click:function(e){return e.stopPropagation(),t.handleClick(e)},contextmenu:function(t){return e.handleContextMenu(t)},dragstart:function(e){return e.stopPropagation(),t.handleDragStart(e)},dragover:function(e){return e.stopPropagation(),t.handleDragOver(e)},dragend:function(e){return e.stopPropagation(),t.handleDragEnd(e)},drop:function(e){return e.stopPropagation(),t.handleDrop(e)}}},[n("div",{staticClass:"el-tree-node__content",style:{"padding-left":(t.node.level-1)*t.tree.indent+"px"}},[n("span",{class:[{"is-leaf":t.node.isLeaf,expanded:!t.node.isLeaf&&t.expanded},"el-tree-node__expand-icon",t.tree.iconClass?t.tree.iconClass:"el-icon-caret-right"],on:{click:function(e){return e.stopPropagation(),t.handleExpandIconClick(e)}}}),t.showCheckbox?n("el-checkbox",{attrs:{indeterminate:t.node.indeterminate,disabled:!!t.node.disabled},on:{change:t.handleCheckChange},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.node.checked,callback:function(e){t.$set(t.node,"checked",e)},expression:"node.checked"}}):t._e(),t.node.loading?n("span",{staticClass:"el-tree-node__loading-icon el-icon-loading"}):t._e(),n("node-content",{attrs:{node:t.node}})],1),n("el-collapse-transition",[!t.renderAfterExpand||t.childNodeRendered?n("div",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"expanded"}],staticClass:"el-tree-node__children",attrs:{role:"group","aria-expanded":t.expanded}},t._l(t.node.childNodes,(function(e){return n("el-tree-node",{key:t.getNodeKey(e),attrs:{"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:e},on:{"node-expand":t.handleChildNodeExpand}})})),1):t._e()])],1)},El=[];vl._withStripped=!0;var Al={name:"ElTreeNode",componentName:"ElTreeNode",mixins:[w.a],props:{node:{default:function(){return{}}},props:{},renderContent:Function,renderAfterExpand:{type:Boolean,default:!0},showCheckbox:{type:Boolean,default:!1}},components:{ElCollapseTransition:$e.a,ElCheckbox:Dn.a,NodeContent:{props:{node:{required:!0}},render:function(e){var t=this.$parent,i=t.tree,n=this.node,r=n.data,o=n.store;return t.renderContent?t.renderContent.call(t._renderProxy,e,{_self:i.$vnode.context,node:n,data:r,store:o}):i.$scopedSlots.default?i.$scopedSlots.default({node:n,data:r}):e("span",{class:"el-tree-node__label"},[n.label])}}},data:function(){return{tree:null,expanded:!1,childNodeRendered:!1,oldChecked:null,oldIndeterminate:null}},watch:{"node.indeterminate":function(e){this.handleSelectChange(this.node.checked,e)},"node.checked":function(e){this.handleSelectChange(e,this.node.indeterminate)},"node.expanded":function(e){var t=this;this.$nextTick((function(){return t.expanded=e})),e&&(this.childNodeRendered=!0)}},methods:{getNodeKey:function(e){return rl(this.tree.nodeKey,e.data)},handleSelectChange:function(e,t){this.oldChecked!==e&&this.oldIndeterminate!==t&&this.tree.$emit("check-change",this.node.data,e,t),this.oldChecked=e,this.indeterminate=t},handleClick:function(){var e=this.tree.store;e.setCurrentNode(this.node),this.tree.$emit("current-change",e.currentNode?e.currentNode.data:null,e.currentNode),this.tree.currentNode=this,this.tree.expandOnClickNode&&this.handleExpandIconClick(),this.tree.checkOnClickNode&&!this.node.disabled&&this.handleCheckChange(null,{target:{checked:!this.node.checked}}),this.tree.$emit("node-click",this.node.data,this.node,this)},handleContextMenu:function(e){this.tree._events["node-contextmenu"]&&this.tree._events["node-contextmenu"].length>0&&(e.stopPropagation(),e.preventDefault()),this.tree.$emit("node-contextmenu",e,this.node.data,this.node,this)},handleExpandIconClick:function(){this.node.isLeaf||(this.expanded?(this.tree.$emit("node-collapse",this.node.data,this.node,this),this.node.collapse()):(this.node.expand(),this.$emit("node-expand",this.node.data,this.node,this)))},handleCheckChange:function(e,t){var i=this;this.node.setChecked(t.target.checked,!this.tree.checkStrictly),this.$nextTick((function(){var e=i.tree.store;i.tree.$emit("check",i.node.data,{checkedNodes:e.getCheckedNodes(),checkedKeys:e.getCheckedKeys(),halfCheckedNodes:e.getHalfCheckedNodes(),halfCheckedKeys:e.getHalfCheckedKeys()})}))},handleChildNodeExpand:function(e,t,i){this.broadcast("ElTreeNode","tree-node-expand",t),this.tree.$emit("node-expand",e,t,i)},handleDragStart:function(e){this.tree.draggable&&this.tree.$emit("tree-node-drag-start",e,this)},handleDragOver:function(e){this.tree.draggable&&(this.tree.$emit("tree-node-drag-over",e,this),e.preventDefault())},handleDrop:function(e){e.preventDefault()},handleDragEnd:function(e){this.tree.draggable&&this.tree.$emit("tree-node-drag-end",e,this)}},created:function(){var e=this,t=this.$parent;t.isTree?this.tree=t:this.tree=t.tree;var i=this.tree;i||console.warn("Can not find node's tree.");var n=i.props||{},r=n["children"]||"children";this.$watch("node.data."+r,(function(){e.node.updateChildren()})),this.node.expanded&&(this.expanded=!0,this.childNodeRendered=!0),this.tree.accordion&&this.$on("tree-node-expand",(function(t){e.node!==t&&e.node.collapse()}))}},yl=Al,Sl=a(yl,vl,El,!1,null,null,null);Sl.options.__file="packages/tree/src/tree-node.vue";var Cl=Sl.exports,bl={name:"ElTree",mixins:[w.a],components:{ElTreeNode:Cl},data:function(){return{store:null,root:null,currentNode:null,treeItems:null,checkboxItems:[],dragState:{showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0}}},props:{data:{type:Array},emptyText:{type:String,default:function(){return Object(fa["t"])("el.tree.emptyText")}},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{default:function(){return{children:"children",label:"label",disabled:"disabled"}}},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},iconClass:String},computed:{children:{set:function(e){this.data=e},get:function(){return this.data}},treeItemArray:function(){return Array.prototype.slice.call(this.treeItems)},isEmpty:function(){var e=this.root.childNodes;return!e||0===e.length||e.every((function(e){var t=e.visible;return!t}))}},watch:{defaultCheckedKeys:function(e){this.store.setDefaultCheckedKey(e)},defaultExpandedKeys:function(e){this.store.defaultExpandedKeys=e,this.store.setDefaultExpandedKeys(e)},data:function(e){this.store.setData(e)},checkboxItems:function(e){Array.prototype.forEach.call(e,(function(e){e.setAttribute("tabindex",-1)}))},checkStrictly:function(e){this.store.checkStrictly=e}},methods:{filter:function(e){if(!this.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");this.store.filter(e)},getNodeKey:function(e){return rl(this.nodeKey,e.data)},getNodePath:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");var t=this.store.getNode(e);if(!t)return[];var i=[t.data],n=t.parent;while(n&&n!==this.root)i.push(n.data),n=n.parent;return i.reverse()},getCheckedNodes:function(e,t){return this.store.getCheckedNodes(e,t)},getCheckedKeys:function(e){return this.store.getCheckedKeys(e)},getCurrentNode:function(){var e=this.store.getCurrentNode();return e?e.data:null},getCurrentKey:function(){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");var e=this.getCurrentNode();return e?e[this.nodeKey]:null},setCheckedNodes:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");this.store.setCheckedNodes(e,t)},setCheckedKeys:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");this.store.setCheckedKeys(e,t)},setChecked:function(e,t,i){this.store.setChecked(e,t,i)},getHalfCheckedNodes:function(){return this.store.getHalfCheckedNodes()},getHalfCheckedKeys:function(){return this.store.getHalfCheckedKeys()},setCurrentNode:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");this.store.setUserCurrentNode(e)},setCurrentKey:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");this.store.setCurrentNodeKey(e)},getNode:function(e){return this.store.getNode(e)},remove:function(e){this.store.remove(e)},append:function(e,t){this.store.append(e,t)},insertBefore:function(e,t){this.store.insertBefore(e,t)},insertAfter:function(e,t){this.store.insertAfter(e,t)},handleNodeExpand:function(e,t,i){this.broadcast("ElTreeNode","tree-node-expand",t),this.$emit("node-expand",e,t,i)},updateKeyChildren:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");this.store.updateChildren(e,t)},initTabIndex:function(){this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]");var e=this.$el.querySelectorAll(".is-checked[role=treeitem]");e.length?e[0].setAttribute("tabindex",0):this.treeItems[0]&&this.treeItems[0].setAttribute("tabindex",0)},handleKeydown:function(e){var t=e.target;if(-1!==t.className.indexOf("el-tree-node")){var i=e.keyCode;this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]");var n=this.treeItemArray.indexOf(t),r=void 0;[38,40].indexOf(i)>-1&&(e.preventDefault(),r=38===i?0!==n?n-1:0:n<this.treeItemArray.length-1?n+1:0,this.treeItemArray[r].focus()),[37,39].indexOf(i)>-1&&(e.preventDefault(),t.click());var o=t.querySelector('[type="checkbox"]');[13,32].indexOf(i)>-1&&o&&(e.preventDefault(),o.click())}}},created:function(){var e=this;this.isTree=!0,this.store=new _l({key:this.nodeKey,data:this.data,lazy:this.lazy,props:this.props,load:this.load,currentNodeKey:this.currentNodeKey,checkStrictly:this.checkStrictly,checkDescendants:this.checkDescendants,defaultCheckedKeys:this.defaultCheckedKeys,defaultExpandedKeys:this.defaultExpandedKeys,autoExpandParent:this.autoExpandParent,defaultExpandAll:this.defaultExpandAll,filterNodeMethod:this.filterNodeMethod}),this.root=this.store.root;var t=this.dragState;this.$on("tree-node-drag-start",(function(i,n){if("function"===typeof e.allowDrag&&!e.allowDrag(n.node))return i.preventDefault(),!1;i.dataTransfer.effectAllowed="move";try{i.dataTransfer.setData("text/plain","")}catch(r){}t.draggingNode=n,e.$emit("node-drag-start",n.node,i)})),this.$on("tree-node-drag-over",(function(i,n){var r=ol(i.target,"ElTreeNode"),o=t.dropNode;o&&o!==r&&Object(Ue["removeClass"])(o.$el,"is-drop-inner");var s=t.draggingNode;if(s&&r){var a=!0,c=!0,l=!0,u=!0;"function"===typeof e.allowDrop&&(a=e.allowDrop(s.node,r.node,"prev"),u=c=e.allowDrop(s.node,r.node,"inner"),l=e.allowDrop(s.node,r.node,"next")),i.dataTransfer.dropEffect=c?"move":"none",(a||c||l)&&o!==r&&(o&&e.$emit("node-drag-leave",s.node,o.node,i),e.$emit("node-drag-enter",s.node,r.node,i)),(a||c||l)&&(t.dropNode=r),r.node.nextSibling===s.node&&(l=!1),r.node.previousSibling===s.node&&(a=!1),r.node.contains(s.node,!1)&&(c=!1),(s.node===r.node||s.node.contains(r.node))&&(a=!1,c=!1,l=!1);var d=r.$el.getBoundingClientRect(),h=e.$el.getBoundingClientRect(),p=void 0,f=a?c?.25:l?.45:1:-1,g=l?c?.75:a?.55:0:1,m=-9999,_=i.clientY-d.top;p=_<d.height*f?"before":_>d.height*g?"after":c?"inner":"none";var v=r.$el.querySelector(".el-tree-node__expand-icon").getBoundingClientRect(),E=e.$refs.dropIndicator;"before"===p?m=v.top-h.top:"after"===p&&(m=v.bottom-h.top),E.style.top=m+"px",E.style.left=v.right-h.left+"px","inner"===p?Object(Ue["addClass"])(r.$el,"is-drop-inner"):Object(Ue["removeClass"])(r.$el,"is-drop-inner"),t.showDropIndicator="before"===p||"after"===p,t.allowDrop=t.showDropIndicator||u,t.dropType=p,e.$emit("node-drag-over",s.node,r.node,i)}})),this.$on("tree-node-drag-end",(function(i){var n=t.draggingNode,r=t.dropType,o=t.dropNode;if(i.preventDefault(),i.dataTransfer.dropEffect="move",n&&o){var s={data:n.node.data};"none"!==r&&n.node.remove(),"before"===r?o.node.parent.insertBefore(s,o.node):"after"===r?o.node.parent.insertAfter(s,o.node):"inner"===r&&o.node.insertChild(s),"none"!==r&&e.store.registerNode(s),Object(Ue["removeClass"])(o.$el,"is-drop-inner"),e.$emit("node-drag-end",n.node,o.node,r,i),"none"!==r&&e.$emit("node-drop",n.node,o.node,r,i)}n&&!o&&e.$emit("node-drag-end",n.node,null,r,i),t.showDropIndicator=!1,t.draggingNode=null,t.dropNode=null,t.allowDrop=!0}))},mounted:function(){this.initTabIndex(),this.$el.addEventListener("keydown",this.handleKeydown)},updated:function(){this.treeItems=this.$el.querySelectorAll("[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]")}},Tl=bl,Il=a(Tl,el,tl,!1,null,null,null);Il.options.__file="packages/tree/src/tree.vue";var Rl=Il.exports;Rl.install=function(e){e.component(Rl.name,Rl)};var wl=Rl,Ol=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-alert-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-alert",class:[e.typeClass,e.center?"is-center":"","is-"+e.effect],attrs:{role:"alert"}},[e.showIcon?i("i",{staticClass:"el-alert__icon",class:[e.iconClass,e.isBigIcon]}):e._e(),i("div",{staticClass:"el-alert__content"},[e.title||e.$slots.title?i("span",{staticClass:"el-alert__title",class:[e.isBoldTitle]},[e._t("title",[e._v(e._s(e.title))])],2):e._e(),e.$slots.default&&!e.description?i("p",{staticClass:"el-alert__description"},[e._t("default")],2):e._e(),e.description&&!e.$slots.default?i("p",{staticClass:"el-alert__description"},[e._v(e._s(e.description))]):e._e(),i("i",{directives:[{name:"show",rawName:"v-show",value:e.closable,expression:"closable"}],staticClass:"el-alert__closebtn",class:{"is-customed":""!==e.closeText,"el-icon-close":""===e.closeText},on:{click:function(t){e.close()}}},[e._v(e._s(e.closeText))])])])])},kl=[];Ol._withStripped=!0;var Nl={success:"el-icon-success",warning:"el-icon-warning",error:"el-icon-error"},Ll={name:"ElAlert",props:{title:{type:String,default:""},description:{type:String,default:""},type:{type:String,default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,default:"light",validator:function(e){return-1!==["light","dark"].indexOf(e)}}},data:function(){return{visible:!0}},methods:{close:function(){this.visible=!1,this.$emit("close")}},computed:{typeClass:function(){return"el-alert--"+this.type},iconClass:function(){return Nl[this.type]||"el-icon-info"},isBigIcon:function(){return this.description||this.$slots.default?"is-big":""},isBoldTitle:function(){return this.description||this.$slots.default?"is-bold":""}}},Pl=Ll,Dl=a(Pl,Ol,kl,!1,null,null,null);Dl.options.__file="packages/alert/src/main.vue";var Ml=Dl.exports;Ml.install=function(e){e.component(Ml.name,Ml)};var xl=Ml,Bl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-notification-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["el-notification",e.customClass,e.horizontalClass],style:e.positionStyle,attrs:{role:"alert"},on:{mouseenter:function(t){e.clearTimer()},mouseleave:function(t){e.startTimer()},click:e.click}},[e.type||e.iconClass?i("i",{staticClass:"el-notification__icon",class:[e.typeClass,e.iconClass]}):e._e(),i("div",{staticClass:"el-notification__group",class:{"is-with-icon":e.typeClass||e.iconClass}},[i("h2",{staticClass:"el-notification__title",domProps:{textContent:e._s(e.title)}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.message,expression:"message"}],staticClass:"el-notification__content"},[e._t("default",[e.dangerouslyUseHTMLString?i("p",{domProps:{innerHTML:e._s(e.message)}}):i("p",[e._v(e._s(e.message))])])],2),e.showClose?i("div",{staticClass:"el-notification__closeBtn el-icon-close",on:{click:function(t){return t.stopPropagation(),e.close(t)}}}):e._e()])])])},Ul=[];Bl._withStripped=!0;var Fl={success:"success",info:"info",warning:"warning",error:"error"},Vl={data:function(){return{visible:!1,title:"",message:"",duration:4500,type:"",showClose:!0,customClass:"",iconClass:"",onClose:null,onClick:null,closed:!1,verticalOffset:0,timer:null,dangerouslyUseHTMLString:!1,position:"top-right"}},computed:{typeClass:function(){return this.type&&Fl[this.type]?"el-icon-"+Fl[this.type]:""},horizontalClass:function(){return this.position.indexOf("right")>-1?"right":"left"},verticalProperty:function(){return/^top-/.test(this.position)?"top":"bottom"},positionStyle:function(){var e;return e={},e[this.verticalProperty]=this.verticalOffset+"px",e}},watch:{closed:function(e){e&&(this.visible=!1,this.$el.addEventListener("transitionend",this.destroyElement))}},methods:{destroyElement:function(){this.$el.removeEventListener("transitionend",this.destroyElement),this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},click:function(){"function"===typeof this.onClick&&this.onClick()},close:function(){this.closed=!0,"function"===typeof this.onClose&&this.onClose()},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration))},keydown:function(e){46===e.keyCode||8===e.keyCode?this.clearTimer():27===e.keyCode?this.closed||this.close():this.startTimer()}},mounted:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration)),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},jl=Vl,Gl=a(jl,Bl,Ul,!1,null,null,null);Gl.options.__file="packages/notification/src/main.vue";var Hl=Gl.exports,Ql=Gn.a.extend(Hl),Wl=void 0,ql=[],$l=1,zl=function e(t){if(!Gn.a.prototype.$isServer){t=Tt()({},t);var i=t.onClose,n="notification_"+$l++,r=t.position||"top-right";t.onClose=function(){e.close(n,i)},Wl=new Ql({data:t}),Object(ba["isVNode"])(t.message)&&(Wl.$slots.default=[t.message],t.message="REPLACED_BY_VNODE"),Wl.id=n,Wl.$mount(),document.body.appendChild(Wl.$el),Wl.visible=!0,Wl.dom=Wl.$el,Wl.dom.style.zIndex=C["PopupManager"].nextZIndex();var o=t.offset||0;return ql.filter((function(e){return e.position===r})).forEach((function(e){o+=e.$el.offsetHeight+16})),o+=16,Wl.verticalOffset=o,ql.push(Wl),Wl}};["success","warning","info","error"].forEach((function(e){zl[e]=function(t){return("string"===typeof t||Object(ba["isVNode"])(t))&&(t={message:t}),t.type=e,zl(t)}})),zl.close=function(e,t){var i=-1,n=ql.length,r=ql.filter((function(t,n){return t.id===e&&(i=n,!0)}))[0];if(r&&("function"===typeof t&&t(r),ql.splice(i,1),!(n<=1)))for(var o=r.position,s=r.dom.offsetHeight,a=i;a<n-1;a++)ql[a].position===o&&(ql[a].dom.style[r.verticalProperty]=parseInt(ql[a].dom.style[r.verticalProperty],10)-s-16+"px")},zl.closeAll=function(){for(var e=ql.length-1;e>=0;e--)ql[e].close()};var Zl=zl,Yl=Zl,Kl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-slider",class:{"is-vertical":e.vertical,"el-slider--with-input":e.showInput},attrs:{role:"slider","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled}},[e.showInput&&!e.range?i("el-input-number",{ref:"input",staticClass:"el-slider__input",attrs:{step:e.step,disabled:e.sliderDisabled,controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:e.inputSize},on:{change:e.emitChange},model:{value:e.firstValue,callback:function(t){e.firstValue=t},expression:"firstValue"}}):e._e(),i("div",{ref:"slider",staticClass:"el-slider__runway",class:{"show-input":e.showInput,disabled:e.sliderDisabled},style:e.runwayStyle,on:{click:e.onSliderClick}},[i("div",{staticClass:"el-slider__bar",style:e.barStyle}),i("slider-button",{ref:"button1",attrs:{vertical:e.vertical,"tooltip-class":e.tooltipClass},model:{value:e.firstValue,callback:function(t){e.firstValue=t},expression:"firstValue"}}),e.range?i("slider-button",{ref:"button2",attrs:{vertical:e.vertical,"tooltip-class":e.tooltipClass},model:{value:e.secondValue,callback:function(t){e.secondValue=t},expression:"secondValue"}}):e._e(),e._l(e.stops,(function(t,n){return e.showStops?i("div",{key:n,staticClass:"el-slider__stop",style:e.getStopStyle(t)}):e._e()})),e.markList.length>0?[i("div",e._l(e.markList,(function(t,n){return i("div",{key:n,staticClass:"el-slider__stop el-slider__marks-stop",style:e.getStopStyle(t.position)})})),0),i("div",{staticClass:"el-slider__marks"},e._l(e.markList,(function(t,n){return i("slider-marker",{key:n,style:e.getStopStyle(t.position),attrs:{mark:t.mark}})})),1)]:e._e()],2)],1)},Jl=[];Kl._withStripped=!0;var Xl=i(41),eu=i.n(Xl),tu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"button",staticClass:"el-slider__button-wrapper",class:{hover:e.hovering,dragging:e.dragging},style:e.wrapperStyle,attrs:{tabindex:"0"},on:{mouseenter:e.handleMouseEnter,mouseleave:e.handleMouseLeave,mousedown:e.onButtonDown,touchstart:e.onButtonDown,focus:e.handleMouseEnter,blur:e.handleMouseLeave,keydown:[function(t){return!("button"in t)&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.onLeftKeyDown(t)},function(t){return!("button"in t)&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])||"button"in t&&2!==t.button?null:e.onRightKeyDown(t)},function(t){return!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.onLeftKeyDown(t))},function(t){return!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.onRightKeyDown(t))}]}},[i("el-tooltip",{ref:"tooltip",attrs:{placement:"top","popper-class":e.tooltipClass,disabled:!e.showTooltip}},[i("span",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.formatValue))]),i("div",{staticClass:"el-slider__button",class:{hover:e.hovering,dragging:e.dragging}})])],1)},iu=[];tu._withStripped=!0;var nu={name:"ElSliderButton",components:{ElTooltip:rt.a},props:{value:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:String},data:function(){return{hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:null,oldValue:this.value}},computed:{disabled:function(){return this.$parent.sliderDisabled},max:function(){return this.$parent.max},min:function(){return this.$parent.min},step:function(){return this.$parent.step},showTooltip:function(){return this.$parent.showTooltip},precision:function(){return this.$parent.precision},currentPosition:function(){return(this.value-this.min)/(this.max-this.min)*100+"%"},enableFormat:function(){return this.$parent.formatTooltip instanceof Function},formatValue:function(){return this.enableFormat&&this.$parent.formatTooltip(this.value)||this.value},wrapperStyle:function(){return this.vertical?{bottom:this.currentPosition}:{left:this.currentPosition}}},watch:{dragging:function(e){this.$parent.dragging=e}},methods:{displayTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!0)},hideTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!1)},handleMouseEnter:function(){this.hovering=!0,this.displayTooltip()},handleMouseLeave:function(){this.hovering=!1,this.hideTooltip()},onButtonDown:function(e){this.disabled||(e.preventDefault(),this.onDragStart(e),window.addEventListener("mousemove",this.onDragging),window.addEventListener("touchmove",this.onDragging),window.addEventListener("mouseup",this.onDragEnd),window.addEventListener("touchend",this.onDragEnd),window.addEventListener("contextmenu",this.onDragEnd))},onLeftKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)-this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitChange())},onRightKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)+this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitChange())},onDragStart:function(e){this.dragging=!0,this.isClick=!0,"touchstart"===e.type&&(e.clientY=e.touches[0].clientY,e.clientX=e.touches[0].clientX),this.vertical?this.startY=e.clientY:this.startX=e.clientX,this.startPosition=parseFloat(this.currentPosition),this.newPosition=this.startPosition},onDragging:function(e){if(this.dragging){this.isClick=!1,this.displayTooltip(),this.$parent.resetSize();var t=0;"touchmove"===e.type&&(e.clientY=e.touches[0].clientY,e.clientX=e.touches[0].clientX),this.vertical?(this.currentY=e.clientY,t=(this.startY-this.currentY)/this.$parent.sliderSize*100):(this.currentX=e.clientX,t=(this.currentX-this.startX)/this.$parent.sliderSize*100),this.newPosition=this.startPosition+t,this.setPosition(this.newPosition)}},onDragEnd:function(){var e=this;this.dragging&&(setTimeout((function(){e.dragging=!1,e.hideTooltip(),e.isClick||(e.setPosition(e.newPosition),e.$parent.emitChange())}),0),window.removeEventListener("mousemove",this.onDragging),window.removeEventListener("touchmove",this.onDragging),window.removeEventListener("mouseup",this.onDragEnd),window.removeEventListener("touchend",this.onDragEnd),window.removeEventListener("contextmenu",this.onDragEnd))},setPosition:function(e){var t=this;if(null!==e&&!isNaN(e)){e<0?e=0:e>100&&(e=100);var i=100/((this.max-this.min)/this.step),n=Math.round(e/i),r=n*i*(this.max-this.min)*.01+this.min;r=parseFloat(r.toFixed(this.precision)),this.$emit("input",r),this.$nextTick((function(){t.displayTooltip(),t.$refs.tooltip&&t.$refs.tooltip.updatePopper()})),this.dragging||this.value===this.oldValue||(this.oldValue=this.value)}}}},ru=nu,ou=a(ru,tu,iu,!1,null,null,null);ou.options.__file="packages/slider/src/button.vue";var su=ou.exports,au={name:"ElMarker",props:{mark:{type:[String,Object]}},render:function(){var e=arguments[0],t="string"===typeof this.mark?this.mark:this.mark.label;return e("div",{class:"el-slider__marks-text",style:this.mark.style||{}},[t])}},cu={name:"ElSlider",mixins:[w.a],inject:{elForm:{default:""}},props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},value:{type:[Number,Array],default:0},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},inputSize:{type:String,default:"small"},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:Function,disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String},debounce:{type:Number,default:300},label:{type:String},tooltipClass:String,marks:Object},components:{ElInputNumber:eu.a,SliderButton:su,SliderMarker:au},data:function(){return{firstValue:null,secondValue:null,oldValue:null,dragging:!1,sliderSize:1}},watch:{value:function(e,t){this.dragging||Array.isArray(e)&&Array.isArray(t)&&e.every((function(e,i){return e===t[i]}))||this.setValues()},dragging:function(e){e||this.setValues()},firstValue:function(e){this.range?this.$emit("input",[this.minValue,this.maxValue]):this.$emit("input",e)},secondValue:function(){this.range&&this.$emit("input",[this.minValue,this.maxValue])},min:function(){this.setValues()},max:function(){this.setValues()}},methods:{valueChanged:function(){var e=this;return this.range?![this.minValue,this.maxValue].every((function(t,i){return t===e.oldValue[i]})):this.value!==this.oldValue},setValues:function(){if(this.min>this.max)console.error("[Element Error][Slider]min should not be greater than max.");else{var e=this.value;this.range&&Array.isArray(e)?e[1]<this.min?this.$emit("input",[this.min,this.min]):e[0]>this.max?this.$emit("input",[this.max,this.max]):e[0]<this.min?this.$emit("input",[this.min,e[1]]):e[1]>this.max?this.$emit("input",[e[0],this.max]):(this.firstValue=e[0],this.secondValue=e[1],this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",[this.minValue,this.maxValue]),this.oldValue=e.slice())):this.range||"number"!==typeof e||isNaN(e)||(e<this.min?this.$emit("input",this.min):e>this.max?this.$emit("input",this.max):(this.firstValue=e,this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",e),this.oldValue=e)))}},setPosition:function(e){var t=this.min+e*(this.max-this.min)/100;if(this.range){var i=void 0;i=Math.abs(this.minValue-t)<Math.abs(this.maxValue-t)?this.firstValue<this.secondValue?"button1":"button2":this.firstValue>this.secondValue?"button1":"button2",this.$refs[i].setPosition(e)}else this.$refs.button1.setPosition(e)},onSliderClick:function(e){if(!this.sliderDisabled&&!this.dragging){if(this.resetSize(),this.vertical){var t=this.$refs.slider.getBoundingClientRect().bottom;this.setPosition((t-e.clientY)/this.sliderSize*100)}else{var i=this.$refs.slider.getBoundingClientRect().left;this.setPosition((e.clientX-i)/this.sliderSize*100)}this.emitChange()}},resetSize:function(){this.$refs.slider&&(this.sliderSize=this.$refs.slider["client"+(this.vertical?"Height":"Width")])},emitChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.range?[e.minValue,e.maxValue]:e.value)}))},getStopStyle:function(e){return this.vertical?{bottom:e+"%"}:{left:e+"%"}}},computed:{stops:function(){var e=this;if(!this.showStops||this.min>this.max)return[];if(0===this.step)return[];for(var t=(this.max-this.min)/this.step,i=100*this.step/(this.max-this.min),n=[],r=1;r<t;r++)n.push(r*i);return this.range?n.filter((function(t){return t<100*(e.minValue-e.min)/(e.max-e.min)||t>100*(e.maxValue-e.min)/(e.max-e.min)})):n.filter((function(t){return t>100*(e.firstValue-e.min)/(e.max-e.min)}))},markList:function(){var e=this;if(!this.marks)return[];var t=Object.keys(this.marks);return t.map(parseFloat).sort((function(e,t){return e-t})).filter((function(t){return t<=e.max&&t>=e.min})).map((function(t){return{point:t,position:100*(t-e.min)/(e.max-e.min),mark:e.marks[t]}}))},minValue:function(){return Math.min(this.firstValue,this.secondValue)},maxValue:function(){return Math.max(this.firstValue,this.secondValue)},barSize:function(){return this.range?100*(this.maxValue-this.minValue)/(this.max-this.min)+"%":100*(this.firstValue-this.min)/(this.max-this.min)+"%"},barStart:function(){return this.range?100*(this.minValue-this.min)/(this.max-this.min)+"%":"0%"},precision:function(){var e=[this.min,this.max,this.step].map((function(e){var t=(""+e).split(".")[1];return t?t.length:0}));return Math.max.apply(null,e)},runwayStyle:function(){return this.vertical?{height:this.height}:{}},barStyle:function(){return this.vertical?{height:this.barSize,bottom:this.barStart}:{width:this.barSize,left:this.barStart}},sliderDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},mounted:function(){var e=void 0;this.range?(Array.isArray(this.value)?(this.firstValue=Math.max(this.min,this.value[0]),this.secondValue=Math.min(this.max,this.value[1])):(this.firstValue=this.min,this.secondValue=this.max),this.oldValue=[this.firstValue,this.secondValue],e=this.firstValue+"-"+this.secondValue):("number"!==typeof this.value||isNaN(this.value)?this.firstValue=this.min:this.firstValue=Math.min(this.max,Math.max(this.min,this.value)),this.oldValue=this.firstValue,e=this.firstValue),this.$el.setAttribute("aria-valuetext",e),this.$el.setAttribute("aria-label",this.label?this.label:"slider between "+this.min+" and "+this.max),this.resetSize(),window.addEventListener("resize",this.resetSize)},beforeDestroy:function(){window.removeEventListener("resize",this.resetSize)}},lu=cu,uu=a(lu,Kl,Jl,!1,null,null,null);uu.options.__file="packages/slider/src/main.vue";var du=uu.exports;du.install=function(e){e.component(du.name,du)};var hu=du,pu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-loading-fade"},on:{"after-leave":e.handleAfterLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-loading-mask",class:[e.customClass,{"is-fullscreen":e.fullscreen}],style:{backgroundColor:e.background||""}},[i("div",{staticClass:"el-loading-spinner"},[e.spinner?i("i",{class:e.spinner}):i("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[i("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]),e.text?i("p",{staticClass:"el-loading-text"},[e._v(e._s(e.text))]):e._e()])])])},fu=[];pu._withStripped=!0;var gu={data:function(){return{text:null,spinner:null,background:null,fullscreen:!0,visible:!1,customClass:""}},methods:{handleAfterLeave:function(){this.$emit("after-leave")},setText:function(e){this.text=e}}},mu=gu,_u=a(mu,pu,fu,!1,null,null,null);_u.options.__file="packages/loading/src/loading.vue";var vu=_u.exports,Eu=i(32),Au=i.n(Eu),yu=Gn.a.extend(vu),Su={install:function(e){if(!e.prototype.$isServer){var t=function(t,n){n.value?e.nextTick((function(){n.modifiers.fullscreen?(t.originalPosition=Object(Ue["getStyle"])(document.body,"position"),t.originalOverflow=Object(Ue["getStyle"])(document.body,"overflow"),t.maskStyle.zIndex=C["PopupManager"].nextZIndex(),Object(Ue["addClass"])(t.mask,"is-fullscreen"),i(document.body,t,n)):(Object(Ue["removeClass"])(t.mask,"is-fullscreen"),n.modifiers.body?(t.originalPosition=Object(Ue["getStyle"])(document.body,"position"),["top","left"].forEach((function(e){var i="top"===e?"scrollTop":"scrollLeft";t.maskStyle[e]=t.getBoundingClientRect()[e]+document.body[i]+document.documentElement[i]-parseInt(Object(Ue["getStyle"])(document.body,"margin-"+e),10)+"px"})),["height","width"].forEach((function(e){t.maskStyle[e]=t.getBoundingClientRect()[e]+"px"})),i(document.body,t,n)):(t.originalPosition=Object(Ue["getStyle"])(t,"position"),i(t,t,n)))})):(Au()(t.instance,(function(e){if(t.instance.hiding){t.domVisible=!1;var i=n.modifiers.fullscreen||n.modifiers.body?document.body:t;Object(Ue["removeClass"])(i,"el-loading-parent--relative"),Object(Ue["removeClass"])(i,"el-loading-parent--hidden"),t.instance.hiding=!1}}),300,!0),t.instance.visible=!1,t.instance.hiding=!0)},i=function(t,i,n){i.domVisible||"none"===Object(Ue["getStyle"])(i,"display")||"hidden"===Object(Ue["getStyle"])(i,"visibility")?i.domVisible&&!0===i.instance.hiding&&(i.instance.visible=!0,i.instance.hiding=!1):(Object.keys(i.maskStyle).forEach((function(e){i.mask.style[e]=i.maskStyle[e]})),"absolute"!==i.originalPosition&&"fixed"!==i.originalPosition&&Object(Ue["addClass"])(t,"el-loading-parent--relative"),n.modifiers.fullscreen&&n.modifiers.lock&&Object(Ue["addClass"])(t,"el-loading-parent--hidden"),i.domVisible=!0,t.appendChild(i.mask),e.nextTick((function(){i.instance.hiding?i.instance.$emit("after-leave"):i.instance.visible=!0})),i.domInserted=!0)};e.directive("loading",{bind:function(e,i,n){var r=e.getAttribute("element-loading-text"),o=e.getAttribute("element-loading-spinner"),s=e.getAttribute("element-loading-background"),a=e.getAttribute("element-loading-custom-class"),c=n.context,l=new yu({el:document.createElement("div"),data:{text:c&&c[r]||r,spinner:c&&c[o]||o,background:c&&c[s]||s,customClass:c&&c[a]||a,fullscreen:!!i.modifiers.fullscreen}});e.instance=l,e.mask=l.$el,e.maskStyle={},i.value&&t(e,i)},update:function(e,i){e.instance.setText(e.getAttribute("element-loading-text")),i.oldValue!==i.value&&t(e,i)},unbind:function(e,i){e.domInserted&&(e.mask&&e.mask.parentNode&&e.mask.parentNode.removeChild(e.mask),t(e,{value:!1,modifiers:i.modifiers})),e.instance&&e.instance.$destroy()}})}}},Cu=Su,bu=Gn.a.extend(vu),Tu={text:null,fullscreen:!0,body:!1,lock:!1,customClass:""},Iu=void 0;bu.prototype.originalPosition="",bu.prototype.originalOverflow="",bu.prototype.close=function(){var e=this;this.fullscreen&&(Iu=void 0),Au()(this,(function(t){var i=e.fullscreen||e.body?document.body:e.target;Object(Ue["removeClass"])(i,"el-loading-parent--relative"),Object(Ue["removeClass"])(i,"el-loading-parent--hidden"),e.$el&&e.$el.parentNode&&e.$el.parentNode.removeChild(e.$el),e.$destroy()}),300),this.visible=!1};var Ru=function(e,t,i){var n={};e.fullscreen?(i.originalPosition=Object(Ue["getStyle"])(document.body,"position"),i.originalOverflow=Object(Ue["getStyle"])(document.body,"overflow"),n.zIndex=C["PopupManager"].nextZIndex()):e.body?(i.originalPosition=Object(Ue["getStyle"])(document.body,"position"),["top","left"].forEach((function(t){var i="top"===t?"scrollTop":"scrollLeft";n[t]=e.target.getBoundingClientRect()[t]+document.body[i]+document.documentElement[i]+"px"})),["height","width"].forEach((function(t){n[t]=e.target.getBoundingClientRect()[t]+"px"}))):i.originalPosition=Object(Ue["getStyle"])(t,"position"),Object.keys(n).forEach((function(e){i.$el.style[e]=n[e]}))},wu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Gn.a.prototype.$isServer){if(e=Tt()({},Tu,e),"string"===typeof e.target&&(e.target=document.querySelector(e.target)),e.target=e.target||document.body,e.target!==document.body?e.fullscreen=!1:e.body=!0,e.fullscreen&&Iu)return Iu;var t=e.body?document.body:e.target,i=new bu({el:document.createElement("div"),data:e});return Ru(e,t,i),"absolute"!==i.originalPosition&&"fixed"!==i.originalPosition&&Object(Ue["addClass"])(t,"el-loading-parent--relative"),e.fullscreen&&e.lock&&Object(Ue["addClass"])(t,"el-loading-parent--hidden"),t.appendChild(i.$el),Gn.a.nextTick((function(){i.visible=!0})),e.fullscreen&&(Iu=i),i}},Ou=wu,ku={install:function(e){e.use(Cu),e.prototype.$loading=Ou},directive:Cu,service:Ou},Nu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("i",{class:"el-icon-"+e.name})},Lu=[];Nu._withStripped=!0;var Pu={name:"ElIcon",props:{name:String}},Du=Pu,Mu=a(Du,Nu,Lu,!1,null,null,null);Mu.options.__file="packages/icon/src/icon.vue";var xu=Mu.exports;xu.install=function(e){e.component(xu.name,xu)};var Bu=xu,Uu={name:"ElRow",componentName:"ElRow",props:{tag:{type:String,default:"div"},gutter:Number,type:String,justify:{type:String,default:"start"},align:String},computed:{style:function(){var e={};return this.gutter&&(e.marginLeft="-"+this.gutter/2+"px",e.marginRight=e.marginLeft),e}},render:function(e){return e(this.tag,{class:["el-row","start"!==this.justify?"is-justify-"+this.justify:"",this.align?"is-align-"+this.align:"",{"el-row--flex":"flex"===this.type}],style:this.style},this.$slots.default)},install:function(e){e.component(Uu.name,Uu)}},Fu=Uu,Vu="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ju={name:"ElCol",props:{span:{type:Number,default:24},tag:{type:String,default:"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},computed:{gutter:function(){var e=this.$parent;while(e&&"ElRow"!==e.$options.componentName)e=e.$parent;return e?e.gutter:0}},render:function(e){var t=this,i=[],n={};return this.gutter&&(n.paddingLeft=this.gutter/2+"px",n.paddingRight=n.paddingLeft),["span","offset","pull","push"].forEach((function(e){(t[e]||0===t[e])&&i.push("span"!==e?"el-col-"+e+"-"+t[e]:"el-col-"+t[e])})),["xs","sm","md","lg","xl"].forEach((function(e){if("number"===typeof t[e])i.push("el-col-"+e+"-"+t[e]);else if("object"===Vu(t[e])){var n=t[e];Object.keys(n).forEach((function(t){i.push("span"!==t?"el-col-"+e+"-"+t+"-"+n[t]:"el-col-"+e+"-"+n[t])}))}})),e(this.tag,{class:["el-col",i],style:n},this.$slots.default)},install:function(e){e.component(ju.name,ju)}},Gu=ju,Hu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition-group",{class:["el-upload-list","el-upload-list--"+e.listType,{"is-disabled":e.disabled}],attrs:{tag:"ul",name:"el-list"}},e._l(e.files,(function(t){return i("li",{key:t.uid,class:["el-upload-list__item","is-"+t.status,e.focusing?"focusing":""],attrs:{tabindex:"0"},on:{keydown:function(i){if(!("button"in i)&&e._k(i.keyCode,"delete",[8,46],i.key,["Backspace","Delete","Del"]))return null;!e.disabled&&e.$emit("remove",t)},focus:function(t){e.focusing=!0},blur:function(t){e.focusing=!1},click:function(t){e.focusing=!1}}},[e._t("default",["uploading"!==t.status&&["picture-card","picture"].indexOf(e.listType)>-1?i("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.url,alt:""}}):e._e(),i("a",{staticClass:"el-upload-list__item-name",on:{click:function(i){e.handleClick(t)}}},[i("i",{staticClass:"el-icon-document"}),e._v(e._s(t.name)+"\n      ")]),i("label",{staticClass:"el-upload-list__item-status-label"},[i("i",{class:{"el-icon-upload-success":!0,"el-icon-circle-check":"text"===e.listType,"el-icon-check":["picture-card","picture"].indexOf(e.listType)>-1}})]),e.disabled?e._e():i("i",{staticClass:"el-icon-close",on:{click:function(i){e.$emit("remove",t)}}}),e.disabled?e._e():i("i",{staticClass:"el-icon-close-tip"},[e._v(e._s(e.t("el.upload.deleteTip")))]),"uploading"===t.status?i("el-progress",{attrs:{type:"picture-card"===e.listType?"circle":"line","stroke-width":"picture-card"===e.listType?6:2,percentage:e.parsePercentage(t.percentage)}}):e._e(),"picture-card"===e.listType?i("span",{staticClass:"el-upload-list__item-actions"},[e.handlePreview&&"picture-card"===e.listType?i("span",{staticClass:"el-upload-list__item-preview",on:{click:function(i){e.handlePreview(t)}}},[i("i",{staticClass:"el-icon-zoom-in"})]):e._e(),e.disabled?e._e():i("span",{staticClass:"el-upload-list__item-delete",on:{click:function(i){e.$emit("remove",t)}}},[i("i",{staticClass:"el-icon-delete"})])]):e._e()],{file:t})],2)})),0)},Qu=[];Hu._withStripped=!0;var Wu=i(33),qu=i.n(Wu),$u={name:"ElUploadList",mixins:[_.a],data:function(){return{focusing:!1}},components:{ElProgress:qu.a},props:{files:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},handlePreview:Function,listType:String},methods:{parsePercentage:function(e){return parseInt(e,10)},handleClick:function(e){this.handlePreview&&this.handlePreview(e)}}},zu=$u,Zu=a(zu,Hu,Qu,!1,null,null,null);Zu.options.__file="packages/upload/src/upload-list.vue";var Yu=Zu.exports,Ku=i(24),Ju=i.n(Ku);function Xu(e,t,i){var n=void 0;n=i.response?""+(i.response.error||i.response):i.responseText?""+i.responseText:"fail to post "+e+" "+i.status;var r=new Error(n);return r.status=i.status,r.method="post",r.url=e,r}function ed(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(i){return t}}function td(e){if("undefined"!==typeof XMLHttpRequest){var t=new XMLHttpRequest,i=e.action;t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var n=new FormData;e.data&&Object.keys(e.data).forEach((function(t){n.append(t,e.data[t])})),n.append(e.filename,e.file,e.file.name),t.onerror=function(t){e.onError(t)},t.onload=function(){if(t.status<200||t.status>=300)return e.onError(Xu(i,e,t));e.onSuccess(ed(t))},t.open("post",i,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var r=e.headers||{};for(var o in r)r.hasOwnProperty(o)&&null!==r[o]&&t.setRequestHeader(o,r[o]);return t.send(n),t}}var id=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-upload-dragger",class:{"is-dragover":e.dragover},on:{drop:function(t){return t.preventDefault(),e.onDrop(t)},dragover:function(t){return t.preventDefault(),e.onDragover(t)},dragleave:function(t){t.preventDefault(),e.dragover=!1}}},[e._t("default")],2)},nd=[];id._withStripped=!0;var rd={name:"ElUploadDrag",props:{disabled:Boolean},inject:{uploader:{default:""}},data:function(){return{dragover:!1}},methods:{onDragover:function(){this.disabled||(this.dragover=!0)},onDrop:function(e){if(!this.disabled&&this.uploader){var t=this.uploader.accept;this.dragover=!1,t?this.$emit("file",[].slice.call(e.dataTransfer.files).filter((function(e){var i=e.type,n=e.name,r=n.indexOf(".")>-1?"."+n.split(".").pop():"",o=i.replace(/\/.*$/,"");return t.split(",").map((function(e){return e.trim()})).filter((function(e){return e})).some((function(e){return/\..+$/.test(e)?r===e:/\/\*$/.test(e)?o===e.replace(/\/\*$/,""):!!/^[^\/]+\/[^\/]+$/.test(e)&&i===e}))}))):this.$emit("file",e.dataTransfer.files)}}}},od=rd,sd=a(od,id,nd,!1,null,null,null);sd.options.__file="packages/upload/src/upload-dragger.vue";var ad,cd,ld=sd.exports,ud={inject:["uploader"],components:{UploadDragger:ld},props:{type:String,action:{type:String,required:!0},name:{type:String,default:"file"},data:Object,headers:Object,withCredentials:Boolean,multiple:Boolean,accept:String,onStart:Function,onProgress:Function,onSuccess:Function,onError:Function,beforeUpload:Function,drag:Boolean,onPreview:{type:Function,default:function(){}},onRemove:{type:Function,default:function(){}},fileList:Array,autoUpload:Boolean,listType:String,httpRequest:{type:Function,default:td},disabled:Boolean,limit:Number,onExceed:Function},data:function(){return{mouseover:!1,reqs:{}}},methods:{isImage:function(e){return-1!==e.indexOf("image")},handleChange:function(e){var t=e.target.files;t&&this.uploadFiles(t)},uploadFiles:function(e){var t=this;if(this.limit&&this.fileList.length+e.length>this.limit)this.onExceed&&this.onExceed(e,this.fileList);else{var i=Array.prototype.slice.call(e);this.multiple||(i=i.slice(0,1)),0!==i.length&&i.forEach((function(e){t.onStart(e),t.autoUpload&&t.upload(e)}))}},upload:function(e){var t=this;if(this.$refs.input.value=null,!this.beforeUpload)return this.post(e);var i=this.beforeUpload(e);i&&i.then?i.then((function(i){var n=Object.prototype.toString.call(i);if("[object File]"===n||"[object Blob]"===n){for(var r in"[object Blob]"===n&&(i=new File([i],e.name,{type:e.type})),e)e.hasOwnProperty(r)&&(i[r]=e[r]);t.post(i)}else t.post(e)}),(function(){t.onRemove(null,e)})):!1!==i?this.post(e):this.onRemove(null,e)},abort:function(e){var t=this.reqs;if(e){var i=e;e.uid&&(i=e.uid),t[i]&&t[i].abort()}else Object.keys(t).forEach((function(e){t[e]&&t[e].abort(),delete t[e]}))},post:function(e){var t=this,i=e.uid,n={headers:this.headers,withCredentials:this.withCredentials,file:e,data:this.data,filename:this.name,action:this.action,onProgress:function(i){t.onProgress(i,e)},onSuccess:function(n){t.onSuccess(n,e),delete t.reqs[i]},onError:function(n){t.onError(n,e),delete t.reqs[i]}},r=this.httpRequest(n);this.reqs[i]=r,r&&r.then&&r.then(n.onSuccess,n.onError)},handleClick:function(){this.disabled||(this.$refs.input.value=null,this.$refs.input.click())},handleKeydown:function(e){e.target===e.currentTarget&&(13!==e.keyCode&&32!==e.keyCode||this.handleClick())}},render:function(e){var t=this.handleClick,i=this.drag,n=this.name,r=this.handleChange,o=this.multiple,s=this.accept,a=this.listType,c=this.uploadFiles,l=this.disabled,u=this.handleKeydown,d={class:{"el-upload":!0},on:{click:t,keydown:u}};return d.class["el-upload--"+a]=!0,e("div",Ju()([d,{attrs:{tabindex:"0"}}]),[i?e("upload-dragger",{attrs:{disabled:l},on:{file:c}},[this.$slots.default]):this.$slots.default,e("input",{class:"el-upload__input",attrs:{type:"file",name:n,multiple:o,accept:s},ref:"input",on:{change:r}})])}},dd=ud,hd=a(dd,ad,cd,!1,null,null,null);hd.options.__file="packages/upload/src/upload.vue";var pd=hd.exports;function fd(){}var gd,md,_d={name:"ElUpload",mixins:[I.a],components:{ElProgress:qu.a,UploadList:Yu,Upload:pd},provide:function(){return{uploader:this}},inject:{elForm:{default:""}},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},data:Object,multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,dragger:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:String,type:{type:String,default:"select"},beforeUpload:Function,beforeRemove:Function,onRemove:{type:Function,default:fd},onChange:{type:Function,default:fd},onPreview:{type:Function},onSuccess:{type:Function,default:fd},onProgress:{type:Function,default:fd},onError:{type:Function,default:fd},fileList:{type:Array,default:function(){return[]}},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:Function,disabled:Boolean,limit:Number,onExceed:{type:Function,default:fd}},data:function(){return{uploadFiles:[],dragOver:!1,draging:!1,tempIndex:1}},computed:{uploadDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{listType:function(e){"picture-card"!==e&&"picture"!==e||(this.uploadFiles=this.uploadFiles.map((function(e){if(!e.url&&e.raw)try{e.url=URL.createObjectURL(e.raw)}catch(t){console.error("[Element Error][Upload]",t)}return e})))},fileList:{immediate:!0,handler:function(e){var t=this;this.uploadFiles=e.map((function(e){return e.uid=e.uid||Date.now()+t.tempIndex++,e.status=e.status||"success",e}))}}},methods:{handleStart:function(e){e.uid=Date.now()+this.tempIndex++;var t={status:"ready",name:e.name,size:e.size,percentage:0,uid:e.uid,raw:e};if("picture-card"===this.listType||"picture"===this.listType)try{t.url=URL.createObjectURL(e)}catch(i){return void console.error("[Element Error][Upload]",i)}this.uploadFiles.push(t),this.onChange(t,this.uploadFiles)},handleProgress:function(e,t){var i=this.getFile(t);this.onProgress(e,i,this.uploadFiles),i.status="uploading",i.percentage=e.percent||0},handleSuccess:function(e,t){var i=this.getFile(t);i&&(i.status="success",i.response=e,this.onSuccess(e,i,this.uploadFiles),this.onChange(i,this.uploadFiles))},handleError:function(e,t){var i=this.getFile(t),n=this.uploadFiles;i.status="fail",n.splice(n.indexOf(i),1),this.onError(e,i,this.uploadFiles),this.onChange(i,this.uploadFiles)},handleRemove:function(e,t){var i=this;t&&(e=this.getFile(t));var n=function(){i.abort(e);var t=i.uploadFiles;t.splice(t.indexOf(e),1),i.onRemove(e,t)};if(this.beforeRemove){if("function"===typeof this.beforeRemove){var r=this.beforeRemove(e,this.uploadFiles);r&&r.then?r.then((function(){n()}),fd):!1!==r&&n()}}else n()},getFile:function(e){var t=this.uploadFiles,i=void 0;return t.every((function(t){return i=e.uid===t.uid?t:null,!i})),i},abort:function(e){this.$refs["upload-inner"].abort(e)},clearFiles:function(){this.uploadFiles=[]},submit:function(){var e=this;this.uploadFiles.filter((function(e){return"ready"===e.status})).forEach((function(t){e.$refs["upload-inner"].upload(t.raw)}))},getMigratingConfig:function(){return{props:{"default-file-list":"default-file-list is renamed to file-list.","show-upload-list":"show-upload-list is renamed to show-file-list.","thumbnail-mode":"thumbnail-mode has been deprecated, you can implement the same effect according to this case: http://element.eleme.io/#/zh-CN/component/upload#yong-hu-tou-xiang-shang-chuan"}}}},beforeDestroy:function(){this.uploadFiles.forEach((function(e){e.url&&0===e.url.indexOf("blob:")&&URL.revokeObjectURL(e.url)}))},render:function(e){var t=this,i=void 0;this.showFileList&&(i=e(Yu,{attrs:{disabled:this.uploadDisabled,listType:this.listType,files:this.uploadFiles,handlePreview:this.onPreview},on:{remove:this.handleRemove}},[function(e){if(t.$scopedSlots.file)return t.$scopedSlots.file({file:e.file})}]));var n={props:{type:this.type,drag:this.drag,action:this.action,multiple:this.multiple,"before-upload":this.beforeUpload,"with-credentials":this.withCredentials,headers:this.headers,name:this.name,data:this.data,accept:this.accept,fileList:this.uploadFiles,autoUpload:this.autoUpload,listType:this.listType,disabled:this.uploadDisabled,limit:this.limit,"on-exceed":this.onExceed,"on-start":this.handleStart,"on-progress":this.handleProgress,"on-success":this.handleSuccess,"on-error":this.handleError,"on-preview":this.onPreview,"on-remove":this.handleRemove,"http-request":this.httpRequest},ref:"upload-inner"},r=this.$slots.trigger||this.$slots.default,o=e("upload",n,[r]);return e("div",["picture-card"===this.listType?i:"",this.$slots.trigger?[o,this.$slots.default]:o,this.$slots.tip,"picture-card"!==this.listType?i:""])}},vd=_d,Ed=a(vd,gd,md,!1,null,null,null);Ed.options.__file="packages/upload/src/index.vue";var Ad=Ed.exports;Ad.install=function(e){e.component(Ad.name,Ad)};var yd=Ad,Sd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-progress",class:["el-progress--"+e.type,e.status?"is-"+e.status:"",{"el-progress--without-text":!e.showText,"el-progress--text-inside":e.textInside}],attrs:{role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===e.type?i("div",{staticClass:"el-progress-bar"},[i("div",{staticClass:"el-progress-bar__outer",style:{height:e.strokeWidth+"px"}},[i("div",{staticClass:"el-progress-bar__inner",style:e.barStyle},[e.showText&&e.textInside?i("div",{staticClass:"el-progress-bar__innerText"},[e._v(e._s(e.content))]):e._e()])])]):i("div",{staticClass:"el-progress-circle",style:{height:e.width+"px",width:e.width+"px"}},[i("svg",{attrs:{viewBox:"0 0 100 100"}},[i("path",{staticClass:"el-progress-circle__track",style:e.trailPathStyle,attrs:{d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none"}}),i("path",{staticClass:"el-progress-circle__path",style:e.circlePathStyle,attrs:{d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0}})])]),e.showText&&!e.textInside?i("div",{staticClass:"el-progress__text",style:{fontSize:e.progressTextSize+"px"}},[e.status?i("i",{class:e.iconClass}):[e._v(e._s(e.content))]],2):e._e()])},Cd=[];Sd._withStripped=!0;var bd={name:"ElProgress",props:{type:{type:String,default:"line",validator:function(e){return["line","circle","dashboard"].indexOf(e)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(e){return e>=0&&e<=100}},status:{type:String,validator:function(e){return["success","exception","warning"].indexOf(e)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var e={};return e.width=this.percentage+"%",e.backgroundColor=this.getCurrentColor(this.percentage),e},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var e=this.radius,t="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(t?"":"-")+e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"-":"")+2*e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"":"-")+2*e+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){var e=-1*this.perimeter*(1-this.rate)/2;return e+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var e=void 0;if(this.color)e=this.getCurrentColor(this.percentage);else switch(this.status){case"success":e="#13ce66";break;case"exception":e="#ff4949";break;case"warning":e="#e6a23c";break;default:e="#20a0ff"}return e},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"===typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(e){return"function"===typeof this.color?this.color(e):"string"===typeof this.color?this.color:this.getLevelColor(e)},getLevelColor:function(e){for(var t=this.getColorArray().sort((function(e,t){return e.percentage-t.percentage})),i=0;i<t.length;i++)if(t[i].percentage>e)return t[i].color;return t[t.length-1].color},getColorArray:function(){var e=this.color,t=100/e.length;return e.map((function(e,i){return"string"===typeof e?{color:e,percentage:(i+1)*t}:e}))}}},Td=bd,Id=a(Td,Sd,Cd,!1,null,null,null);Id.options.__file="packages/progress/src/progress.vue";var Rd=Id.exports;Rd.install=function(e){e.component(Rd.name,Rd)};var wd=Rd,Od=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"el-spinner"},[i("svg",{staticClass:"el-spinner-inner",style:{width:e.radius/2+"px",height:e.radius/2+"px"},attrs:{viewBox:"0 0 50 50"}},[i("circle",{staticClass:"path",attrs:{cx:"25",cy:"25",r:"20",fill:"none",stroke:e.strokeColor,"stroke-width":e.strokeWidth}})])])},kd=[];Od._withStripped=!0;var Nd={name:"ElSpinner",props:{type:String,radius:{type:Number,default:100},strokeWidth:{type:Number,default:5},strokeColor:{type:String,default:"#efefef"}}},Ld=Nd,Pd=a(Ld,Od,kd,!1,null,null,null);Pd.options.__file="packages/spinner/src/spinner.vue";var Dd=Pd.exports;Dd.install=function(e){e.component(Dd.name,Dd)};var Md=Dd,xd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-message-fade"},on:{"after-leave":e.handleAfterLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["el-message",e.type&&!e.iconClass?"el-message--"+e.type:"",e.center?"is-center":"",e.showClose?"is-closable":"",e.customClass],style:e.positionStyle,attrs:{role:"alert"},on:{mouseenter:e.clearTimer,mouseleave:e.startTimer}},[e.iconClass?i("i",{class:e.iconClass}):i("i",{class:e.typeClass}),e._t("default",[e.dangerouslyUseHTMLString?i("p",{staticClass:"el-message__content",domProps:{innerHTML:e._s(e.message)}}):i("p",{staticClass:"el-message__content"},[e._v(e._s(e.message))])]),e.showClose?i("i",{staticClass:"el-message__closeBtn el-icon-close",on:{click:e.close}}):e._e()],2)])},Bd=[];xd._withStripped=!0;var Ud={success:"success",info:"info",warning:"warning",error:"error"},Fd={data:function(){return{visible:!1,message:"",duration:3e3,type:"info",iconClass:"",customClass:"",onClose:null,showClose:!1,closed:!1,verticalOffset:20,timer:null,dangerouslyUseHTMLString:!1,center:!1}},computed:{typeClass:function(){return this.type&&!this.iconClass?"el-message__icon el-icon-"+Ud[this.type]:""},positionStyle:function(){return{top:this.verticalOffset+"px"}}},watch:{closed:function(e){e&&(this.visible=!1)}},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},close:function(){this.closed=!0,"function"===typeof this.onClose&&this.onClose(this)},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration))},keydown:function(e){27===e.keyCode&&(this.closed||this.close())}},mounted:function(){this.startTimer(),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},Vd=Fd,jd=a(Vd,xd,Bd,!1,null,null,null);jd.options.__file="packages/message/src/main.vue";var Gd=jd.exports,Hd=i(15),Qd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Wd=Gn.a.extend(Gd),qd=void 0,$d=[],zd=1,Zd=function e(t){if(!Gn.a.prototype.$isServer){t=t||{},"string"===typeof t&&(t={message:t});var i=t.onClose,n="message_"+zd++;t.onClose=function(){e.close(n,i)},qd=new Wd({data:t}),qd.id=n,Object(ba["isVNode"])(qd.message)&&(qd.$slots.default=[qd.message],qd.message=null),qd.$mount(),document.body.appendChild(qd.$el);var r=t.offset||20;return $d.forEach((function(e){r+=e.$el.offsetHeight+16})),qd.verticalOffset=r,qd.visible=!0,qd.$el.style.zIndex=C["PopupManager"].nextZIndex(),$d.push(qd),qd}};["success","warning","info","error"].forEach((function(e){Zd[e]=function(t){return Object(Hd["isObject"])(t)&&!Object(ba["isVNode"])(t)?Zd(Qd({},t,{type:e})):Zd({type:e,message:t})}})),Zd.close=function(e,t){for(var i=$d.length,n=-1,r=void 0,o=0;o<i;o++)if(e===$d[o].id){r=$d[o].$el.offsetHeight,n=o,"function"===typeof t&&t($d[o]),$d.splice(o,1);break}if(!(i<=1||-1===n||n>$d.length-1))for(var s=n;s<i-1;s++){var a=$d[s].$el;a.style["top"]=parseInt(a.style["top"],10)-r-16+"px"}},Zd.closeAll=function(){for(var e=$d.length-1;e>=0;e--)$d[e].close()};var Yd=Zd,Kd=Yd,Jd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-badge"},[e._t("default"),i("transition",{attrs:{name:"el-zoom-in-center"}},[i("sup",{directives:[{name:"show",rawName:"v-show",value:!e.hidden&&(e.content||0===e.content||e.isDot),expression:"!hidden && (content || content === 0 || isDot)"}],staticClass:"el-badge__content",class:["el-badge__content--"+e.type,{"is-fixed":e.$slots.default,"is-dot":e.isDot}],domProps:{textContent:e._s(e.content)}})])],2)},Xd=[];Jd._withStripped=!0;var eh={name:"ElBadge",props:{value:[String,Number],max:Number,isDot:Boolean,hidden:Boolean,type:{type:String,validator:function(e){return["primary","success","warning","info","danger"].indexOf(e)>-1}}},computed:{content:function(){if(!this.isDot){var e=this.value,t=this.max;return"number"===typeof e&&"number"===typeof t&&t<e?t+"+":e}}}},th=eh,ih=a(th,Jd,Xd,!1,null,null,null);ih.options.__file="packages/badge/src/main.vue";var nh=ih.exports;nh.install=function(e){e.component(nh.name,nh)};var rh=nh,oh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-card",class:e.shadow?"is-"+e.shadow+"-shadow":"is-always-shadow"},[e.$slots.header||e.header?i("div",{staticClass:"el-card__header"},[e._t("header",[e._v(e._s(e.header))])],2):e._e(),i("div",{staticClass:"el-card__body",style:e.bodyStyle},[e._t("default")],2)])},sh=[];oh._withStripped=!0;var ah={name:"ElCard",props:{header:{},bodyStyle:{},shadow:{type:String}}},ch=ah,lh=a(ch,oh,sh,!1,null,null,null);lh.options.__file="packages/card/src/main.vue";var uh=lh.exports;uh.install=function(e){e.component(uh.name,uh)};var dh=uh,hh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-rate",attrs:{role:"slider","aria-valuenow":e.currentValue,"aria-valuetext":e.text,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0"},on:{keydown:e.handleKey}},[e._l(e.max,(function(t,n){return i("span",{key:n,staticClass:"el-rate__item",style:{cursor:e.rateDisabled?"auto":"pointer"},on:{mousemove:function(i){e.setCurrentValue(t,i)},mouseleave:e.resetCurrentValue,click:function(i){e.selectValue(t)}}},[i("i",{staticClass:"el-rate__icon",class:[e.classes[t-1],{hover:e.hoverIndex===t}],style:e.getIconStyle(t)},[e.showDecimalIcon(t)?i("i",{staticClass:"el-rate__decimal",class:e.decimalIconClass,style:e.decimalStyle}):e._e()])])})),e.showText||e.showScore?i("span",{staticClass:"el-rate__text",style:{color:e.textColor}},[e._v(e._s(e.text))]):e._e()],2)},ph=[];hh._withStripped=!0;var fh={name:"ElRate",mixins:[I.a],inject:{elForm:{default:""}},data:function(){return{pointerAtLeftHalf:!0,currentValue:this.value,hoverIndex:-1}},props:{value:{type:Number,default:0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:[Array,Object],default:function(){return["#F7BA2A","#F7BA2A","#F7BA2A"]}},voidColor:{type:String,default:"#C6D1DE"},disabledVoidColor:{type:String,default:"#EFF2F7"},iconClasses:{type:[Array,Object],default:function(){return["el-icon-star-on","el-icon-star-on","el-icon-star-on"]}},voidIconClass:{type:String,default:"el-icon-star-off"},disabledVoidIconClass:{type:String,default:"el-icon-star-on"},disabled:{type:Boolean,default:!1},allowHalf:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},showScore:{type:Boolean,default:!1},textColor:{type:String,default:"#1f2d3d"},texts:{type:Array,default:function(){return["极差","失望","一般","满意","惊喜"]}},scoreTemplate:{type:String,default:"{value}"}},computed:{text:function(){var e="";return this.showScore?e=this.scoreTemplate.replace(/\{\s*value\s*\}/,this.rateDisabled?this.value:this.currentValue):this.showText&&(e=this.texts[Math.ceil(this.currentValue)-1]),e},decimalStyle:function(){var e="";return this.rateDisabled?e=this.valueDecimal+"%":this.allowHalf&&(e="50%"),{color:this.activeColor,width:e}},valueDecimal:function(){return 100*this.value-100*Math.floor(this.value)},classMap:function(){var e;return Array.isArray(this.iconClasses)?(e={},e[this.lowThreshold]=this.iconClasses[0],e[this.highThreshold]={value:this.iconClasses[1],excluded:!0},e[this.max]=this.iconClasses[2],e):this.iconClasses},decimalIconClass:function(){return this.getValueFromMap(this.value,this.classMap)},voidClass:function(){return this.rateDisabled?this.disabledVoidIconClass:this.voidIconClass},activeClass:function(){return this.getValueFromMap(this.currentValue,this.classMap)},colorMap:function(){var e;return Array.isArray(this.colors)?(e={},e[this.lowThreshold]=this.colors[0],e[this.highThreshold]={value:this.colors[1],excluded:!0},e[this.max]=this.colors[2],e):this.colors},activeColor:function(){return this.getValueFromMap(this.currentValue,this.colorMap)},classes:function(){var e=[],t=0,i=this.currentValue;for(this.allowHalf&&this.currentValue!==Math.floor(this.currentValue)&&i--;t<i;t++)e.push(this.activeClass);for(;t<this.max;t++)e.push(this.voidClass);return e},rateDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{value:function(e){this.currentValue=e,this.pointerAtLeftHalf=this.value!==Math.floor(this.value)}},methods:{getMigratingConfig:function(){return{props:{"text-template":"text-template is renamed to score-template."}}},getValueFromMap:function(e,t){var i=Object.keys(t).filter((function(i){var n=t[i],r=!!Object(Hd["isObject"])(n)&&n.excluded;return r?e<i:e<=i})).sort((function(e,t){return e-t})),n=t[i[0]];return Object(Hd["isObject"])(n)?n.value:n||""},showDecimalIcon:function(e){var t=this.rateDisabled&&this.valueDecimal>0&&e-1<this.value&&e>this.value,i=this.allowHalf&&this.pointerAtLeftHalf&&e-.5<=this.currentValue&&e>this.currentValue;return t||i},getIconStyle:function(e){var t=this.rateDisabled?this.disabledVoidColor:this.voidColor;return{color:e<=this.currentValue?this.activeColor:t}},selectValue:function(e){this.rateDisabled||(this.allowHalf&&this.pointerAtLeftHalf?(this.$emit("input",this.currentValue),this.$emit("change",this.currentValue)):(this.$emit("input",e),this.$emit("change",e)))},handleKey:function(e){if(!this.rateDisabled){var t=this.currentValue,i=e.keyCode;38===i||39===i?(this.allowHalf?t+=.5:t+=1,e.stopPropagation(),e.preventDefault()):37!==i&&40!==i||(this.allowHalf?t-=.5:t-=1,e.stopPropagation(),e.preventDefault()),t=t<0?0:t,t=t>this.max?this.max:t,this.$emit("input",t),this.$emit("change",t)}},setCurrentValue:function(e,t){if(!this.rateDisabled){if(this.allowHalf){var i=t.target;Object(Ue["hasClass"])(i,"el-rate__item")&&(i=i.querySelector(".el-rate__icon")),Object(Ue["hasClass"])(i,"el-rate__decimal")&&(i=i.parentNode),this.pointerAtLeftHalf=2*t.offsetX<=i.clientWidth,this.currentValue=this.pointerAtLeftHalf?e-.5:e}else this.currentValue=e;this.hoverIndex=e}},resetCurrentValue:function(){this.rateDisabled||(this.allowHalf&&(this.pointerAtLeftHalf=this.value!==Math.floor(this.value)),this.currentValue=this.value,this.hoverIndex=-1)}},created:function(){this.value||this.$emit("input",0)}},gh=fh,mh=a(gh,hh,ph,!1,null,null,null);mh.options.__file="packages/rate/src/main.vue";var _h=mh.exports;_h.install=function(e){e.component(_h.name,_h)};var vh=_h,Eh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-steps",class:[!e.simple&&"el-steps--"+e.direction,e.simple&&"el-steps--simple"]},[e._t("default")],2)},Ah=[];Eh._withStripped=!0;var yh={name:"ElSteps",mixins:[I.a],props:{space:[Number,String],active:Number,direction:{type:String,default:"horizontal"},alignCenter:Boolean,simple:Boolean,finishStatus:{type:String,default:"finish"},processStatus:{type:String,default:"process"}},data:function(){return{steps:[],stepOffset:0}},methods:{getMigratingConfig:function(){return{props:{center:"center is removed."}}}},watch:{active:function(e,t){this.$emit("change",e,t)},steps:function(e){e.forEach((function(e,t){e.index=t}))}}},Sh=yh,Ch=a(Sh,Eh,Ah,!1,null,null,null);Ch.options.__file="packages/steps/src/steps.vue";var bh=Ch.exports;bh.install=function(e){e.component(bh.name,bh)};var Th=bh,Ih=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-step",class:[!e.isSimple&&"is-"+e.$parent.direction,e.isSimple&&"is-simple",e.isLast&&!e.space&&!e.isCenter&&"is-flex",e.isCenter&&!e.isVertical&&!e.isSimple&&"is-center"],style:e.style},[i("div",{staticClass:"el-step__head",class:"is-"+e.currentStatus},[i("div",{staticClass:"el-step__line",style:e.isLast?"":{marginRight:e.$parent.stepOffset+"px"}},[i("i",{staticClass:"el-step__line-inner",style:e.lineStyle})]),i("div",{staticClass:"el-step__icon",class:"is-"+(e.icon?"icon":"text")},["success"!==e.currentStatus&&"error"!==e.currentStatus?e._t("icon",[e.icon?i("i",{staticClass:"el-step__icon-inner",class:[e.icon]}):e._e(),e.icon||e.isSimple?e._e():i("div",{staticClass:"el-step__icon-inner"},[e._v(e._s(e.index+1))])]):i("i",{staticClass:"el-step__icon-inner is-status",class:["el-icon-"+("success"===e.currentStatus?"check":"close")]})],2)]),i("div",{staticClass:"el-step__main"},[i("div",{ref:"title",staticClass:"el-step__title",class:["is-"+e.currentStatus]},[e._t("title",[e._v(e._s(e.title))])],2),e.isSimple?i("div",{staticClass:"el-step__arrow"}):i("div",{staticClass:"el-step__description",class:["is-"+e.currentStatus]},[e._t("description",[e._v(e._s(e.description))])],2)])])},Rh=[];Ih._withStripped=!0;var wh={name:"ElStep",props:{title:String,icon:String,description:String,status:String},data:function(){return{index:-1,lineStyle:{},internalStatus:""}},beforeCreate:function(){this.$parent.steps.push(this)},beforeDestroy:function(){var e=this.$parent.steps,t=e.indexOf(this);t>=0&&e.splice(t,1)},computed:{currentStatus:function(){return this.status||this.internalStatus},prevStatus:function(){var e=this.$parent.steps[this.index-1];return e?e.currentStatus:"wait"},isCenter:function(){return this.$parent.alignCenter},isVertical:function(){return"vertical"===this.$parent.direction},isSimple:function(){return this.$parent.simple},isLast:function(){var e=this.$parent;return e.steps[e.steps.length-1]===this},stepsCount:function(){return this.$parent.steps.length},space:function(){var e=this.isSimple,t=this.$parent.space;return e?"":t},style:function(){var e={},t=this.$parent,i=t.steps.length,n="number"===typeof this.space?this.space+"px":this.space?this.space:100/(i-(this.isCenter?0:1))+"%";return e.flexBasis=n,this.isVertical||(this.isLast?e.maxWidth=100/this.stepsCount+"%":e.marginRight=-this.$parent.stepOffset+"px"),e}},methods:{updateStatus:function(e){var t=this.$parent.$children[this.index-1];e>this.index?this.internalStatus=this.$parent.finishStatus:e===this.index&&"error"!==this.prevStatus?this.internalStatus=this.$parent.processStatus:this.internalStatus="wait",t&&t.calcProgress(this.internalStatus)},calcProgress:function(e){var t=100,i={};i.transitionDelay=150*this.index+"ms",e===this.$parent.processStatus?(this.currentStatus,t=0):"wait"===e&&(t=0,i.transitionDelay=-150*this.index+"ms"),i.borderWidth=t&&!this.isSimple?"1px":0,"vertical"===this.$parent.direction?i.height=t+"%":i.width=t+"%",this.lineStyle=i}},mounted:function(){var e=this,t=this.$watch("index",(function(i){e.$watch("$parent.active",e.updateStatus,{immediate:!0}),e.$watch("$parent.processStatus",(function(){var t=e.$parent.active;e.updateStatus(t)}),{immediate:!0}),t()}))}},Oh=wh,kh=a(Oh,Ih,Rh,!1,null,null,null);kh.options.__file="packages/steps/src/step.vue";var Nh=kh.exports;Nh.install=function(e){e.component(Nh.name,Nh)};var Lh=Nh,Ph=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.carouselClasses,on:{mouseenter:function(t){return t.stopPropagation(),e.handleMouseEnter(t)},mouseleave:function(t){return t.stopPropagation(),e.handleMouseLeave(t)}}},[i("div",{staticClass:"el-carousel__container",style:{height:e.height}},[e.arrowDisplay?i("transition",{attrs:{name:"carousel-arrow-left"}},[i("button",{directives:[{name:"show",rawName:"v-show",value:("always"===e.arrow||e.hover)&&(e.loop||e.activeIndex>0),expression:"(arrow === 'always' || hover) && (loop || activeIndex > 0)"}],staticClass:"el-carousel__arrow el-carousel__arrow--left",attrs:{type:"button"},on:{mouseenter:function(t){e.handleButtonEnter("left")},mouseleave:e.handleButtonLeave,click:function(t){t.stopPropagation(),e.throttledArrowClick(e.activeIndex-1)}}},[i("i",{staticClass:"el-icon-arrow-left"})])]):e._e(),e.arrowDisplay?i("transition",{attrs:{name:"carousel-arrow-right"}},[i("button",{directives:[{name:"show",rawName:"v-show",value:("always"===e.arrow||e.hover)&&(e.loop||e.activeIndex<e.items.length-1),expression:"(arrow === 'always' || hover) && (loop || activeIndex < items.length - 1)"}],staticClass:"el-carousel__arrow el-carousel__arrow--right",attrs:{type:"button"},on:{mouseenter:function(t){e.handleButtonEnter("right")},mouseleave:e.handleButtonLeave,click:function(t){t.stopPropagation(),e.throttledArrowClick(e.activeIndex+1)}}},[i("i",{staticClass:"el-icon-arrow-right"})])]):e._e(),e._t("default")],2),"none"!==e.indicatorPosition?i("ul",{class:e.indicatorsClasses},e._l(e.items,(function(t,n){return i("li",{key:n,class:["el-carousel__indicator","el-carousel__indicator--"+e.direction,{"is-active":n===e.activeIndex}],on:{mouseenter:function(t){e.throttledIndicatorHover(n)},click:function(t){t.stopPropagation(),e.handleIndicatorClick(n)}}},[i("button",{staticClass:"el-carousel__button"},[e.hasLabel?i("span",[e._v(e._s(t.label))]):e._e()])])})),0):e._e()])},Dh=[];Ph._withStripped=!0;var Mh=i(25),xh=i.n(Mh),Bh={name:"ElCarousel",props:{initialIndex:{type:Number,default:0},height:String,trigger:{type:String,default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:String,indicator:{type:Boolean,default:!0},arrow:{type:String,default:"hover"},type:String,loop:{type:Boolean,default:!0},direction:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}}},data:function(){return{items:[],activeIndex:-1,containerWidth:0,timer:null,hover:!1}},computed:{arrowDisplay:function(){return"never"!==this.arrow&&"vertical"!==this.direction},hasLabel:function(){return this.items.some((function(e){return e.label.toString().length>0}))},carouselClasses:function(){var e=["el-carousel","el-carousel--"+this.direction];return"card"===this.type&&e.push("el-carousel--card"),e},indicatorsClasses:function(){var e=["el-carousel__indicators","el-carousel__indicators--"+this.direction];return this.hasLabel&&e.push("el-carousel__indicators--labels"),"outside"!==this.indicatorPosition&&"card"!==this.type||e.push("el-carousel__indicators--outside"),e}},watch:{items:function(e){e.length>0&&this.setActiveItem(this.initialIndex)},activeIndex:function(e,t){this.resetItemPosition(t),t>-1&&this.$emit("change",e,t)},autoplay:function(e){e?this.startTimer():this.pauseTimer()},loop:function(){this.setActiveItem(this.activeIndex)},interval:function(){this.pauseTimer(),this.startTimer()}},methods:{handleMouseEnter:function(){this.hover=!0,this.pauseTimer()},handleMouseLeave:function(){this.hover=!1,this.startTimer()},itemInStage:function(e,t){var i=this.items.length;return t===i-1&&e.inStage&&this.items[0].active||e.inStage&&this.items[t+1]&&this.items[t+1].active?"left":!!(0===t&&e.inStage&&this.items[i-1].active||e.inStage&&this.items[t-1]&&this.items[t-1].active)&&"right"},handleButtonEnter:function(e){var t=this;"vertical"!==this.direction&&this.items.forEach((function(i,n){e===t.itemInStage(i,n)&&(i.hover=!0)}))},handleButtonLeave:function(){"vertical"!==this.direction&&this.items.forEach((function(e){e.hover=!1}))},updateItems:function(){this.items=this.$children.filter((function(e){return"ElCarouselItem"===e.$options.name}))},resetItemPosition:function(e){var t=this;this.items.forEach((function(i,n){i.translateItem(n,t.activeIndex,e)}))},playSlides:function(){this.activeIndex<this.items.length-1?this.activeIndex++:this.loop&&(this.activeIndex=0)},pauseTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},startTimer:function(){this.interval<=0||!this.autoplay||this.timer||(this.timer=setInterval(this.playSlides,this.interval))},resetTimer:function(){this.pauseTimer(),this.startTimer()},setActiveItem:function(e){if("string"===typeof e){var t=this.items.filter((function(t){return t.name===e}));t.length>0&&(e=this.items.indexOf(t[0]))}if(e=Number(e),isNaN(e)||e!==Math.floor(e))console.warn("[Element Warn][Carousel]index must be an integer.");else{var i=this.items.length,n=this.activeIndex;this.activeIndex=e<0?this.loop?i-1:0:e>=i?this.loop?0:i-1:e,n===this.activeIndex&&this.resetItemPosition(n),this.resetTimer()}},prev:function(){this.setActiveItem(this.activeIndex-1)},next:function(){this.setActiveItem(this.activeIndex+1)},handleIndicatorClick:function(e){this.activeIndex=e},handleIndicatorHover:function(e){"hover"===this.trigger&&e!==this.activeIndex&&(this.activeIndex=e)}},created:function(){var e=this;this.throttledArrowClick=xh()(300,!0,(function(t){e.setActiveItem(t)})),this.throttledIndicatorHover=xh()(300,(function(t){e.handleIndicatorHover(t)}))},mounted:function(){var e=this;this.updateItems(),this.$nextTick((function(){Object(Xi["addResizeListener"])(e.$el,e.resetItemPosition),e.initialIndex<e.items.length&&e.initialIndex>=0&&(e.activeIndex=e.initialIndex),e.startTimer()}))},beforeDestroy:function(){this.$el&&Object(Xi["removeResizeListener"])(this.$el,this.resetItemPosition),this.pauseTimer()}},Uh=Bh,Fh=a(Uh,Ph,Dh,!1,null,null,null);Fh.options.__file="packages/carousel/src/main.vue";var Vh=Fh.exports;Vh.install=function(e){e.component(Vh.name,Vh)};var jh=Vh,Gh={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function Hh(e){var t=e.move,i=e.size,n=e.bar,r={},o="translate"+n.axis+"("+t+"%)";return r[n.size]=i,r.transform=o,r.msTransform=o,r.webkitTransform=o,r}var Qh={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return Gh[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(e){var t=this.size,i=this.move,n=this.bar;return e("div",{class:["el-scrollbar__bar","is-"+n.key],on:{mousedown:this.clickTrackHandler}},[e("div",{ref:"thumb",class:"el-scrollbar__thumb",on:{mousedown:this.clickThumbHandler},style:Hh({size:t,move:i,bar:n})})])},methods:{clickThumbHandler:function(e){e.ctrlKey||2===e.button||(this.startDrag(e),this[this.bar.axis]=e.currentTarget[this.bar.offset]-(e[this.bar.client]-e.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(e){var t=Math.abs(e.target.getBoundingClientRect()[this.bar.direction]-e[this.bar.client]),i=this.$refs.thumb[this.bar.offset]/2,n=100*(t-i)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=n*this.wrap[this.bar.scrollSize]/100},startDrag:function(e){e.stopImmediatePropagation(),this.cursorDown=!0,Object(Ue["on"])(document,"mousemove",this.mouseMoveDocumentHandler),Object(Ue["on"])(document,"mouseup",this.mouseUpDocumentHandler),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(e){if(!1!==this.cursorDown){var t=this[this.bar.axis];if(t){var i=-1*(this.$el.getBoundingClientRect()[this.bar.direction]-e[this.bar.client]),n=this.$refs.thumb[this.bar.offset]-t,r=100*(i-n)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=r*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(e){this.cursorDown=!1,this[this.bar.axis]=0,Object(Ue["off"])(document,"mousemove",this.mouseMoveDocumentHandler),document.onselectstart=null}},destroyed:function(){Object(Ue["off"])(document,"mouseup",this.mouseUpDocumentHandler)}},Wh={name:"ElScrollbar",components:{Bar:Qh},props:{native:Boolean,wrapStyle:{},wrapClass:{},viewClass:{},viewStyle:{},noresize:Boolean,tag:{type:String,default:"div"}},data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},render:function(e){var t=_r()(),i=this.wrapStyle;if(t){var n="-"+t+"px",r="margin-bottom: "+n+"; margin-right: "+n+";";Array.isArray(this.wrapStyle)?(i=Object(v["toObject"])(this.wrapStyle),i.marginRight=i.marginBottom=n):"string"===typeof this.wrapStyle?i+=r:i=r}var o=e(this.tag,{class:["el-scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default),s=e("div",{ref:"wrap",style:i,on:{scroll:this.handleScroll},class:[this.wrapClass,"el-scrollbar__wrap",t?"":"el-scrollbar__wrap--hidden-default"]},[[o]]),a=void 0;return a=this.native?[e("div",{ref:"wrap",class:[this.wrapClass,"el-scrollbar__wrap"],style:i},[[o]])]:[s,e(Qh,{attrs:{move:this.moveX,size:this.sizeWidth}}),e(Qh,{attrs:{vertical:!0,move:this.moveY,size:this.sizeHeight}})],e("div",{class:"el-scrollbar"},a)},methods:{handleScroll:function(){var e=this.wrap;this.moveY=100*e.scrollTop/e.clientHeight,this.moveX=100*e.scrollLeft/e.clientWidth},update:function(){var e=void 0,t=void 0,i=this.wrap;i&&(e=100*i.clientHeight/i.scrollHeight,t=100*i.clientWidth/i.scrollWidth,this.sizeHeight=e<100?e+"%":"",this.sizeWidth=t<100?t+"%":"")}},mounted:function(){this.native||(this.$nextTick(this.update),!this.noresize&&Object(Xi["addResizeListener"])(this.$refs.resize,this.update))},beforeDestroy:function(){this.native||!this.noresize&&Object(Xi["removeResizeListener"])(this.$refs.resize,this.update)},install:function(e){e.component(Wh.name,Wh)}},qh=Wh,$h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.ready,expression:"ready"}],staticClass:"el-carousel__item",class:{"is-active":e.active,"el-carousel__item--card":"card"===e.$parent.type,"is-in-stage":e.inStage,"is-hover":e.hover,"is-animating":e.animating},style:e.itemStyle,on:{click:e.handleItemClick}},["card"===e.$parent.type?i("div",{directives:[{name:"show",rawName:"v-show",value:!e.active,expression:"!active"}],staticClass:"el-carousel__mask"}):e._e(),e._t("default")],2)},zh=[];$h._withStripped=!0;var Zh=.83,Yh={name:"ElCarouselItem",props:{name:String,label:{type:[String,Number],default:""}},data:function(){return{hover:!1,translate:0,scale:1,active:!1,ready:!1,inStage:!1,animating:!1}},methods:{processIndex:function(e,t,i){return 0===t&&e===i-1?-1:t===i-1&&0===e?i:e<t-1&&t-e>=i/2?i+1:e>t+1&&e-t>=i/2?-2:e},calcCardTranslate:function(e,t){var i=this.$parent.$el.offsetWidth;return this.inStage?i*((2-Zh)*(e-t)+1)/4:e<t?-(1+Zh)*i/4:(3+Zh)*i/4},calcTranslate:function(e,t,i){var n=this.$parent.$el[i?"offsetHeight":"offsetWidth"];return n*(e-t)},translateItem:function(e,t,i){var n=this.$parent.type,r=this.parentDirection,o=this.$parent.items.length;if("card"!==n&&void 0!==i&&(this.animating=e===t||e===i),e!==t&&o>2&&this.$parent.loop&&(e=this.processIndex(e,t,o)),"card"===n)"vertical"===r&&console.warn("[Element Warn][Carousel]vertical direction is not supported in card mode"),this.inStage=Math.round(Math.abs(e-t))<=1,this.active=e===t,this.translate=this.calcCardTranslate(e,t),this.scale=this.active?1:Zh;else{this.active=e===t;var s="vertical"===r;this.translate=this.calcTranslate(e,t,s),this.scale=1}this.ready=!0},handleItemClick:function(){var e=this.$parent;if(e&&"card"===e.type){var t=e.items.indexOf(this);e.setActiveItem(t)}}},computed:{parentDirection:function(){return this.$parent.direction},itemStyle:function(){var e="vertical"===this.parentDirection?"translateY":"translateX",t=e+"("+this.translate+"px) scale("+this.scale+")",i={transform:t};return Object(v["autoprefixer"])(i)}},created:function(){this.$parent&&this.$parent.updateItems()},destroyed:function(){this.$parent&&this.$parent.updateItems()}},Kh=Yh,Jh=a(Kh,$h,zh,!1,null,null,null);Jh.options.__file="packages/carousel/src/item.vue";var Xh=Jh.exports;Xh.install=function(e){e.component(Xh.name,Xh)};var ep=Xh,tp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-collapse",attrs:{role:"tablist","aria-multiselectable":"true"}},[e._t("default")],2)},ip=[];tp._withStripped=!0;var np={name:"ElCollapse",componentName:"ElCollapse",props:{accordion:Boolean,value:{type:[Array,String,Number],default:function(){return[]}}},data:function(){return{activeNames:[].concat(this.value)}},provide:function(){return{collapse:this}},watch:{value:function(e){this.activeNames=[].concat(e)}},methods:{setActiveNames:function(e){e=[].concat(e);var t=this.accordion?e[0]:e;this.activeNames=e,this.$emit("input",t),this.$emit("change",t)},handleItemClick:function(e){if(this.accordion)this.setActiveNames(!this.activeNames[0]&&0!==this.activeNames[0]||this.activeNames[0]!==e.name?e.name:"");else{var t=this.activeNames.slice(0),i=t.indexOf(e.name);i>-1?t.splice(i,1):t.push(e.name),this.setActiveNames(t)}}},created:function(){this.$on("item-click",this.handleItemClick)}},rp=np,op=a(rp,tp,ip,!1,null,null,null);op.options.__file="packages/collapse/src/collapse.vue";var sp=op.exports;sp.install=function(e){e.component(sp.name,sp)};var ap=sp,cp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-collapse-item",class:{"is-active":e.isActive,"is-disabled":e.disabled}},[i("div",{attrs:{role:"tab","aria-expanded":e.isActive,"aria-controls":"el-collapse-content-"+e.id,"aria-describedby":"el-collapse-content-"+e.id}},[i("div",{staticClass:"el-collapse-item__header",class:{focusing:e.focusing,"is-active":e.isActive},attrs:{role:"button",id:"el-collapse-head-"+e.id,tabindex:e.disabled?void 0:0},on:{click:e.handleHeaderClick,keyup:function(t){return!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.handleEnterClick(t))},focus:e.handleFocus,blur:function(t){e.focusing=!1}}},[e._t("title",[e._v(e._s(e.title))]),i("i",{staticClass:"el-collapse-item__arrow el-icon-arrow-right",class:{"is-active":e.isActive}})],2)]),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"el-collapse-item__wrap",attrs:{role:"tabpanel","aria-hidden":!e.isActive,"aria-labelledby":"el-collapse-head-"+e.id,id:"el-collapse-content-"+e.id}},[i("div",{staticClass:"el-collapse-item__content"},[e._t("default")],2)])])],1)},lp=[];cp._withStripped=!0;var up={name:"ElCollapseItem",componentName:"ElCollapseItem",mixins:[w.a],components:{ElCollapseTransition:$e.a},data:function(){return{contentWrapStyle:{height:"auto",display:"block"},contentHeight:0,focusing:!1,isClick:!1,id:Object(v["generateId"])()}},inject:["collapse"],props:{title:String,name:{type:[String,Number],default:function(){return this._uid}},disabled:Boolean},computed:{isActive:function(){return this.collapse.activeNames.indexOf(this.name)>-1}},methods:{handleFocus:function(){var e=this;setTimeout((function(){e.isClick?e.isClick=!1:e.focusing=!0}),50)},handleHeaderClick:function(){this.disabled||(this.dispatch("ElCollapse","item-click",this),this.focusing=!1,this.isClick=!0)},handleEnterClick:function(){this.dispatch("ElCollapse","item-click",this)}}},dp=up,hp=a(dp,cp,lp,!1,null,null,null);hp.options.__file="packages/collapse/src/collapse-item.vue";var pp=hp.exports;pp.install=function(e){e.component(pp.name,pp)};var fp=pp,gp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:function(){return e.toggleDropDownVisible(!1)},expression:"() => toggleDropDownVisible(false)"}],ref:"reference",class:["el-cascader",e.realSize&&"el-cascader--"+e.realSize,{"is-disabled":e.isDisabled}],on:{mouseenter:function(t){e.inputHover=!0},mouseleave:function(t){e.inputHover=!1},click:function(){return e.toggleDropDownVisible(!e.readonly||void 0)},keydown:e.handleKeyDown}},[i("el-input",{ref:"input",class:{"is-focus":e.dropDownVisible},attrs:{size:e.realSize,placeholder:e.placeholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1},on:{focus:e.handleFocus,blur:e.handleBlur,input:e.handleInput},model:{value:e.multiple?e.presentText:e.inputValue,callback:function(t){e.multiple?e.presentText:e.inputValue=t},expression:"multiple ? presentText : inputValue"}},[i("template",{slot:"suffix"},[e.clearBtnVisible?i("i",{key:"clear",staticClass:"el-input__icon el-icon-circle-close",on:{click:function(t){return t.stopPropagation(),e.handleClear(t)}}}):i("i",{key:"arrow-down",class:["el-input__icon","el-icon-arrow-down",e.dropDownVisible&&"is-reverse"],on:{click:function(t){t.stopPropagation(),e.toggleDropDownVisible()}}})])],2),e.multiple?i("div",{staticClass:"el-cascader__tags"},[e._l(e.presentTags,(function(t){return i("el-tag",{key:t.key,attrs:{type:"info",size:e.tagSize,hit:t.hitState,closable:t.closable,"disable-transitions":""},on:{close:function(i){e.deleteTag(t)}}},[i("span",[e._v(e._s(t.text))])])})),e.filterable&&!e.isDisabled?i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.inputValue,expression:"inputValue",modifiers:{trim:!0}}],staticClass:"el-cascader__search-input",attrs:{type:"text",placeholder:e.presentTags.length?"":e.placeholder},domProps:{value:e.inputValue},on:{input:[function(t){t.target.composing||(e.inputValue=t.target.value.trim())},function(t){return e.handleInput(e.inputValue,t)}],click:function(t){t.stopPropagation(),e.toggleDropDownVisible(!0)},keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.handleDelete(t)},blur:function(t){e.$forceUpdate()}}}):e._e()],2):e._e(),i("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.handleDropdownLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.dropDownVisible,expression:"dropDownVisible"}],ref:"popper",class:["el-popper","el-cascader__dropdown",e.popperClass]},[i("el-cascader-panel",{directives:[{name:"show",rawName:"v-show",value:!e.filtering,expression:"!filtering"}],ref:"panel",attrs:{options:e.options,props:e.config,border:!1,"render-label":e.$scopedSlots.default},on:{"expand-change":e.handleExpandChange,close:function(t){e.toggleDropDownVisible(!1)}},model:{value:e.checkedValue,callback:function(t){e.checkedValue=t},expression:"checkedValue"}}),e.filterable?i("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.filtering,expression:"filtering"}],ref:"suggestionPanel",staticClass:"el-cascader__suggestion-panel",attrs:{tag:"ul","view-class":"el-cascader__suggestion-list"},nativeOn:{keydown:function(t){return e.handleSuggestionKeyDown(t)}}},[e.suggestions.length?e._l(e.suggestions,(function(t,n){return i("li",{key:t.uid,class:["el-cascader__suggestion-item",t.checked&&"is-checked"],attrs:{tabindex:-1},on:{click:function(t){e.handleSuggestionClick(n)}}},[i("span",[e._v(e._s(t.text))]),t.checked?i("i",{staticClass:"el-icon-check"}):e._e()])})):e._t("empty",[i("li",{staticClass:"el-cascader__empty-text"},[e._v(e._s(e.t("el.cascader.noMatch")))])])],2):e._e()],1)])],1)},mp=[];gp._withStripped=!0;var _p=i(42),vp=i.n(_p),Ep=i(34),Ap=i.n(Ep),yp=Ap.a.keys,Sp={expandTrigger:{newProp:"expandTrigger",type:String},changeOnSelect:{newProp:"checkStrictly",type:Boolean},hoverThreshold:{newProp:"hoverThreshold",type:Number}},Cp={props:{placement:{type:String,default:"bottom-start"},appendToBody:H.a.props.appendToBody,visibleArrow:{type:Boolean,default:!0},arrowOffset:H.a.props.arrowOffset,offset:H.a.props.offset,boundariesPadding:H.a.props.boundariesPadding,popperOptions:H.a.props.popperOptions},methods:H.a.methods,data:H.a.data,beforeDestroy:H.a.beforeDestroy},bp={medium:36,small:32,mini:28},Tp={name:"ElCascader",directives:{Clickoutside:F.a},mixins:[Cp,w.a,_.a,I.a],inject:{elForm:{default:""},elFormItem:{default:""}},components:{ElInput:g.a,ElTag:Ji.a,ElScrollbar:W.a,ElCascaderPanel:vp.a},props:{value:{},options:Array,props:Object,size:String,placeholder:{type:String,default:function(){return Object(fa["t"])("el.cascader.placeholder")}},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:Function,separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,debounce:{type:Number,default:300},beforeFilter:{type:Function,default:function(){return function(){}}},popperClass:String},data:function(){return{dropDownVisible:!1,checkedValue:this.value,inputHover:!1,inputValue:null,presentText:null,presentTags:[],checkedNodes:[],filtering:!1,suggestions:[],inputInitialHeight:0,pressDeleteCount:0}},computed:{realSize:function(){var e=(this.elFormItem||{}).elFormItemSize;return this.size||e||(this.$ELEMENT||{}).size},tagSize:function(){return["small","mini"].indexOf(this.realSize)>-1?"mini":"small"},isDisabled:function(){return this.disabled||(this.elForm||{}).disabled},config:function(){var e=this.props||{},t=this.$attrs;return Object.keys(Sp).forEach((function(i){var n=Sp[i],r=n.newProp,o=n.type,s=t[i]||t[Object(v["kebabCase"])(i)];Object(It["isDef"])(i)&&!Object(It["isDef"])(e[r])&&(o===Boolean&&""===s&&(s=!0),e[r]=s)})),e},multiple:function(){return this.config.multiple},leafOnly:function(){return!this.config.checkStrictly},readonly:function(){return!this.filterable||this.multiple},clearBtnVisible:function(){return!(!this.clearable||this.isDisabled||this.filtering||!this.inputHover)&&(this.multiple?!!this.checkedNodes.filter((function(e){return!e.isDisabled})).length:!!this.presentText)},panel:function(){return this.$refs.panel}},watch:{disabled:function(){this.computePresentContent()},value:function(e){Object(v["isEqual"])(e,this.checkedValue)||(this.checkedValue=e,this.computePresentContent())},checkedValue:function(e){var t=this.value,i=this.dropDownVisible,n=this.config,r=n.checkStrictly,o=n.multiple;Object(v["isEqual"])(e,t)&&!Object(Hd["isUndefined"])(t)||(this.computePresentContent(),o||r||!i||this.toggleDropDownVisible(!1),this.$emit("input",e),this.$emit("change",e),this.dispatch("ElFormItem","el.form.change",[e]))},options:{handler:function(){this.$nextTick(this.computePresentContent)},deep:!0},presentText:function(e){this.inputValue=e},presentTags:function(e,t){this.multiple&&(e.length||t.length)&&this.$nextTick(this.updateStyle)},filtering:function(e){this.$nextTick(this.updatePopper)}},mounted:function(){var e=this,t=this.$refs.input;t&&t.$el&&(this.inputInitialHeight=t.$el.offsetHeight||bp[this.realSize]||40),this.isEmptyValue(this.value)||this.computePresentContent(),this.filterHandler=B()(this.debounce,(function(){var t=e.inputValue;if(t){var i=e.beforeFilter(t);i&&i.then?i.then(e.getSuggestions):!1!==i?e.getSuggestions():e.filtering=!1}else e.filtering=!1})),Object(Xi["addResizeListener"])(this.$el,this.updateStyle)},beforeDestroy:function(){Object(Xi["removeResizeListener"])(this.$el,this.updateStyle)},methods:{getMigratingConfig:function(){return{props:{"expand-trigger":"expand-trigger is removed, use `props.expandTrigger` instead.","change-on-select":"change-on-select is removed, use `props.checkStrictly` instead.","hover-threshold":"hover-threshold is removed, use `props.hoverThreshold` instead"},events:{"active-item-change":"active-item-change is renamed to expand-change"}}},toggleDropDownVisible:function(e){var t=this;if(!this.isDisabled){var i=this.dropDownVisible,n=this.$refs.input;e=Object(It["isDef"])(e)?e:!i,e!==i&&(this.dropDownVisible=e,e&&this.$nextTick((function(){t.updatePopper(),t.panel.scrollIntoView()})),n.$refs.input.setAttribute("aria-expanded",e),this.$emit("visible-change",e))}},handleDropdownLeave:function(){this.filtering=!1,this.inputValue=this.presentText,this.doDestroy()},handleKeyDown:function(e){switch(e.keyCode){case yp.enter:this.toggleDropDownVisible();break;case yp.down:this.toggleDropDownVisible(!0),this.focusFirstNode(),e.preventDefault();break;case yp.esc:case yp.tab:this.toggleDropDownVisible(!1);break}},handleFocus:function(e){this.$emit("focus",e)},handleBlur:function(e){this.$emit("blur",e)},handleInput:function(e,t){!this.dropDownVisible&&this.toggleDropDownVisible(!0),t&&t.isComposing||(e?this.filterHandler():this.filtering=!1)},handleClear:function(){this.presentText="",this.panel.clearCheckedNodes()},handleExpandChange:function(e){this.$nextTick(this.updatePopper.bind(this)),this.$emit("expand-change",e),this.$emit("active-item-change",e)},focusFirstNode:function(){var e=this;this.$nextTick((function(){var t=e.filtering,i=e.$refs,n=i.popper,r=i.suggestionPanel,o=null;if(t&&r)o=r.$el.querySelector(".el-cascader__suggestion-item");else{var s=n.querySelector(".el-cascader-menu");o=s.querySelector('.el-cascader-node[tabindex="-1"]')}o&&(o.focus(),!t&&o.click())}))},computePresentContent:function(){var e=this;this.$nextTick((function(){e.config.multiple?(e.computePresentTags(),e.presentText=e.presentTags.length?" ":null):e.computePresentText()}))},isEmptyValue:function(e){var t=this.multiple,i=this.panel.config.emitPath;return!(!t&&!i)&&Object(v["isEmpty"])(e)},computePresentText:function(){var e=this.checkedValue,t=this.config;if(!this.isEmptyValue(e)){var i=this.panel.getNodeByValue(e);if(i&&(t.checkStrictly||i.isLeaf))return void(this.presentText=i.getText(this.showAllLevels,this.separator))}this.presentText=null},computePresentTags:function(){var e=this.isDisabled,t=this.leafOnly,i=this.showAllLevels,n=this.separator,r=this.collapseTags,o=this.getCheckedNodes(t),s=[],a=function(t){return{node:t,key:t.uid,text:t.getText(i,n),hitState:!1,closable:!e&&!t.isDisabled}};if(o.length){var c=o[0],l=o.slice(1),u=l.length;s.push(a(c)),u&&(r?s.push({key:-1,text:"+ "+u,closable:!1}):l.forEach((function(e){return s.push(a(e))})))}this.checkedNodes=o,this.presentTags=s},getSuggestions:function(){var e=this,t=this.filterMethod;Object(Hd["isFunction"])(t)||(t=function(e,t){return e.text.includes(t)});var i=this.panel.getFlattedNodes(this.leafOnly).filter((function(i){return!i.isDisabled&&(i.text=i.getText(e.showAllLevels,e.separator)||"",t(i,e.inputValue))}));this.multiple?this.presentTags.forEach((function(e){e.hitState=!1})):i.forEach((function(t){t.checked=Object(v["isEqual"])(e.checkedValue,t.getValueByOption())})),this.filtering=!0,this.suggestions=i,this.$nextTick(this.updatePopper)},handleSuggestionKeyDown:function(e){var t=e.keyCode,i=e.target;switch(t){case yp.enter:i.click();break;case yp.up:var n=i.previousElementSibling;n&&n.focus();break;case yp.down:var r=i.nextElementSibling;r&&r.focus();break;case yp.esc:case yp.tab:this.toggleDropDownVisible(!1);break}},handleDelete:function(){var e=this.inputValue,t=this.pressDeleteCount,i=this.presentTags,n=i.length-1,r=i[n];this.pressDeleteCount=e?0:t+1,r&&this.pressDeleteCount&&(r.hitState?this.deleteTag(r):r.hitState=!0)},handleSuggestionClick:function(e){var t=this.multiple,i=this.suggestions[e];if(t){var n=i.checked;i.doCheck(!n),this.panel.calculateMultiCheckedValue()}else this.checkedValue=i.getValueByOption(),this.toggleDropDownVisible(!1)},deleteTag:function(e){var t=this.checkedValue,i=e.node.getValueByOption(),n=t.find((function(e){return Object(v["isEqual"])(e,i)}));this.checkedValue=t.filter((function(e){return!Object(v["isEqual"])(e,i)})),this.$emit("remove-tag",n)},updateStyle:function(){var e=this.$el,t=this.inputInitialHeight;if(!this.$isServer&&e){var i=this.$refs.suggestionPanel,n=e.querySelector(".el-input__inner");if(n){var r=e.querySelector(".el-cascader__tags"),o=null;if(i&&(o=i.$el)){var s=o.querySelector(".el-cascader__suggestion-list");s.style.minWidth=n.offsetWidth+"px"}if(r){var a=Math.round(r.getBoundingClientRect().height),c=Math.max(a+6,t)+"px";n.style.height=c,this.dropDownVisible&&this.updatePopper()}}}},getCheckedNodes:function(e){return this.panel.getCheckedNodes(e)}}},Ip=Tp,Rp=a(Ip,gp,mp,!1,null,null,null);Rp.options.__file="packages/cascader/src/cascader.vue";var wp=Rp.exports;wp.install=function(e){e.component(wp.name,wp)};var Op=wp,kp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.hide,expression:"hide"}],class:["el-color-picker",e.colorDisabled?"is-disabled":"",e.colorSize?"el-color-picker--"+e.colorSize:""]},[e.colorDisabled?i("div",{staticClass:"el-color-picker__mask"}):e._e(),i("div",{staticClass:"el-color-picker__trigger",on:{click:e.handleTrigger}},[i("span",{staticClass:"el-color-picker__color",class:{"is-alpha":e.showAlpha}},[i("span",{staticClass:"el-color-picker__color-inner",style:{backgroundColor:e.displayedColor}}),e.value||e.showPanelColor?e._e():i("span",{staticClass:"el-color-picker__empty el-icon-close"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:e.value||e.showPanelColor,expression:"value || showPanelColor"}],staticClass:"el-color-picker__icon el-icon-arrow-down"})]),i("picker-dropdown",{ref:"dropdown",class:["el-color-picker__panel",e.popperClass||""],attrs:{color:e.color,"show-alpha":e.showAlpha,predefine:e.predefine},on:{pick:e.confirmValue,clear:e.clearValue},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}})],1)},Np=[];kp._withStripped=!0;var Lp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Pp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Dp=function(e,t,i){return[e,t*i/((e=(2-t)*i)<1?e:2-e)||0,e/2]},Mp=function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)},xp=function(e){return"string"===typeof e&&-1!==e.indexOf("%")},Bp=function(e,t){Mp(e)&&(e="100%");var i=xp(e);return e=Math.min(t,Math.max(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)},Up={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Fp=function(e){var t=e.r,i=e.g,n=e.b,r=function(e){e=Math.min(Math.round(e),255);var t=Math.floor(e/16),i=e%16;return""+(Up[t]||t)+(Up[i]||i)};return isNaN(t)||isNaN(i)||isNaN(n)?"":"#"+r(t)+r(i)+r(n)},Vp={A:10,B:11,C:12,D:13,E:14,F:15},jp=function(e){return 2===e.length?16*(Vp[e[0].toUpperCase()]||+e[0])+(Vp[e[1].toUpperCase()]||+e[1]):Vp[e[1].toUpperCase()]||+e[1]},Gp=function(e,t,i){t/=100,i/=100;var n=t,r=Math.max(i,.01),o=void 0,s=void 0;return i*=2,t*=i<=1?i:2-i,n*=r<=1?r:2-r,s=(i+t)/2,o=0===i?2*n/(r+n):2*t/(i+t),{h:e,s:100*o,v:100*s}},Hp=function(e,t,i){e=Bp(e,255),t=Bp(t,255),i=Bp(i,255);var n=Math.max(e,t,i),r=Math.min(e,t,i),o=void 0,s=void 0,a=n,c=n-r;if(s=0===n?0:c/n,n===r)o=0;else{switch(n){case e:o=(t-i)/c+(t<i?6:0);break;case t:o=(i-e)/c+2;break;case i:o=(e-t)/c+4;break}o/=6}return{h:360*o,s:100*s,v:100*a}},Qp=function(e,t,i){e=6*Bp(e,360),t=Bp(t,100),i=Bp(i,100);var n=Math.floor(e),r=e-n,o=i*(1-t),s=i*(1-r*t),a=i*(1-(1-r)*t),c=n%6,l=[i,s,o,o,a,i][c],u=[a,i,i,s,o,o][c],d=[o,o,a,i,i,s][c];return{r:Math.round(255*l),g:Math.round(255*u),b:Math.round(255*d)}},Wp=function(){function e(t){for(var i in Pp(this,e),this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="",t=t||{},t)t.hasOwnProperty(i)&&(this[i]=t[i]);this.doOnChange()}return e.prototype.set=function(e,t){if(1!==arguments.length||"object"!==("undefined"===typeof e?"undefined":Lp(e)))this["_"+e]=t,this.doOnChange();else for(var i in e)e.hasOwnProperty(i)&&this.set(i,e[i])},e.prototype.get=function(e){return this["_"+e]},e.prototype.toRgb=function(){return Qp(this._hue,this._saturation,this._value)},e.prototype.fromString=function(e){var t=this;if(!e)return this._hue=0,this._saturation=100,this._value=100,void this.doOnChange();var i=function(e,i,n){t._hue=Math.max(0,Math.min(360,e)),t._saturation=Math.max(0,Math.min(100,i)),t._value=Math.max(0,Math.min(100,n)),t.doOnChange()};if(-1!==e.indexOf("hsl")){var n=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,t){return t>2?parseFloat(e):parseInt(e,10)}));if(4===n.length?this._alpha=Math.floor(100*parseFloat(n[3])):3===n.length&&(this._alpha=100),n.length>=3){var r=Gp(n[0],n[1],n[2]),o=r.h,s=r.s,a=r.v;i(o,s,a)}}else if(-1!==e.indexOf("hsv")){var c=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,t){return t>2?parseFloat(e):parseInt(e,10)}));4===c.length?this._alpha=Math.floor(100*parseFloat(c[3])):3===c.length&&(this._alpha=100),c.length>=3&&i(c[0],c[1],c[2])}else if(-1!==e.indexOf("rgb")){var l=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,t){return t>2?parseFloat(e):parseInt(e,10)}));if(4===l.length?this._alpha=Math.floor(100*parseFloat(l[3])):3===l.length&&(this._alpha=100),l.length>=3){var u=Hp(l[0],l[1],l[2]),d=u.h,h=u.s,p=u.v;i(d,h,p)}}else if(-1!==e.indexOf("#")){var f=e.replace("#","").trim();if(!/^(?:[0-9a-fA-F]{3}){1,2}|[0-9a-fA-F]{8}$/.test(f))return;var g=void 0,m=void 0,_=void 0;3===f.length?(g=jp(f[0]+f[0]),m=jp(f[1]+f[1]),_=jp(f[2]+f[2])):6!==f.length&&8!==f.length||(g=jp(f.substring(0,2)),m=jp(f.substring(2,4)),_=jp(f.substring(4,6))),8===f.length?this._alpha=Math.floor(jp(f.substring(6))/255*100):3!==f.length&&6!==f.length||(this._alpha=100);var v=Hp(g,m,_),E=v.h,A=v.s,y=v.v;i(E,A,y)}},e.prototype.compare=function(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1},e.prototype.doOnChange=function(){var e=this._hue,t=this._saturation,i=this._value,n=this._alpha,r=this.format;if(this.enableAlpha)switch(r){case"hsl":var o=Dp(e,t/100,i/100);this.value="hsla("+e+", "+Math.round(100*o[1])+"%, "+Math.round(100*o[2])+"%, "+n/100+")";break;case"hsv":this.value="hsva("+e+", "+Math.round(t)+"%, "+Math.round(i)+"%, "+n/100+")";break;default:var s=Qp(e,t,i),a=s.r,c=s.g,l=s.b;this.value="rgba("+a+", "+c+", "+l+", "+n/100+")"}else switch(r){case"hsl":var u=Dp(e,t/100,i/100);this.value="hsl("+e+", "+Math.round(100*u[1])+"%, "+Math.round(100*u[2])+"%)";break;case"hsv":this.value="hsv("+e+", "+Math.round(t)+"%, "+Math.round(i)+"%)";break;case"rgb":var d=Qp(e,t,i),h=d.r,p=d.g,f=d.b;this.value="rgb("+h+", "+p+", "+f+")";break;default:this.value=Fp(Qp(e,t,i))}},e}(),qp=Wp,$p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-color-dropdown"},[i("div",{staticClass:"el-color-dropdown__main-wrapper"},[i("hue-slider",{ref:"hue",staticStyle:{float:"right"},attrs:{color:e.color,vertical:""}}),i("sv-panel",{ref:"sl",attrs:{color:e.color}})],1),e.showAlpha?i("alpha-slider",{ref:"alpha",attrs:{color:e.color}}):e._e(),e.predefine?i("predefine",{attrs:{color:e.color,colors:e.predefine}}):e._e(),i("div",{staticClass:"el-color-dropdown__btns"},[i("span",{staticClass:"el-color-dropdown__value"},[i("el-input",{attrs:{"validate-event":!1,size:"mini"},on:{blur:e.handleConfirm},nativeOn:{keyup:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleConfirm(t)}},model:{value:e.customInput,callback:function(t){e.customInput=t},expression:"customInput"}})],1),i("el-button",{staticClass:"el-color-dropdown__link-btn",attrs:{size:"mini",type:"text"},on:{click:function(t){e.$emit("clear")}}},[e._v("\n        "+e._s(e.t("el.colorpicker.clear"))+"\n      ")]),i("el-button",{staticClass:"el-color-dropdown__btn",attrs:{plain:"",size:"mini"},on:{click:e.confirmValue}},[e._v("\n        "+e._s(e.t("el.colorpicker.confirm"))+"\n      ")])],1)],1)])},zp=[];$p._withStripped=!0;var Zp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-color-svpanel",style:{backgroundColor:e.background}},[i("div",{staticClass:"el-color-svpanel__white"}),i("div",{staticClass:"el-color-svpanel__black"}),i("div",{staticClass:"el-color-svpanel__cursor",style:{top:e.cursorTop+"px",left:e.cursorLeft+"px"}},[i("div")])])},Yp=[];Zp._withStripped=!0;var Kp=!1,Jp=function(e,t){if(!Gn.a.prototype.$isServer){var i=function(e){t.drag&&t.drag(e)},n=function e(n){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e),document.onselectstart=null,document.ondragstart=null,Kp=!1,t.end&&t.end(n)};e.addEventListener("mousedown",(function(e){Kp||(document.onselectstart=function(){return!1},document.ondragstart=function(){return!1},document.addEventListener("mousemove",i),document.addEventListener("mouseup",n),Kp=!0,t.start&&t.start(e))}))}},Xp={name:"el-sl-panel",props:{color:{required:!0}},computed:{colorValue:function(){var e=this.color.get("hue"),t=this.color.get("value");return{hue:e,value:t}}},watch:{colorValue:function(){this.update()}},methods:{update:function(){var e=this.color.get("saturation"),t=this.color.get("value"),i=this.$el,n=i.clientWidth,r=i.clientHeight;this.cursorLeft=e*n/100,this.cursorTop=(100-t)*r/100,this.background="hsl("+this.color.get("hue")+", 100%, 50%)"},handleDrag:function(e){var t=this.$el,i=t.getBoundingClientRect(),n=e.clientX-i.left,r=e.clientY-i.top;n=Math.max(0,n),n=Math.min(n,i.width),r=Math.max(0,r),r=Math.min(r,i.height),this.cursorLeft=n,this.cursorTop=r,this.color.set({saturation:n/i.width*100,value:100-r/i.height*100})}},mounted:function(){var e=this;Jp(this.$el,{drag:function(t){e.handleDrag(t)},end:function(t){e.handleDrag(t)}}),this.update()},data:function(){return{cursorTop:0,cursorLeft:0,background:"hsl(0, 100%, 50%)"}}},ef=Xp,tf=a(ef,Zp,Yp,!1,null,null,null);tf.options.__file="packages/color-picker/src/components/sv-panel.vue";var nf=tf.exports,rf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-color-hue-slider",class:{"is-vertical":e.vertical}},[i("div",{ref:"bar",staticClass:"el-color-hue-slider__bar",on:{click:e.handleClick}}),i("div",{ref:"thumb",staticClass:"el-color-hue-slider__thumb",style:{left:e.thumbLeft+"px",top:e.thumbTop+"px"}})])},of=[];rf._withStripped=!0;var sf={name:"el-color-hue-slider",props:{color:{required:!0},vertical:Boolean},data:function(){return{thumbLeft:0,thumbTop:0}},computed:{hueValue:function(){var e=this.color.get("hue");return e}},watch:{hueValue:function(){this.update()}},methods:{handleClick:function(e){var t=this.$refs.thumb,i=e.target;i!==t&&this.handleDrag(e)},handleDrag:function(e){var t=this.$el.getBoundingClientRect(),i=this.$refs.thumb,n=void 0;if(this.vertical){var r=e.clientY-t.top;r=Math.min(r,t.height-i.offsetHeight/2),r=Math.max(i.offsetHeight/2,r),n=Math.round((r-i.offsetHeight/2)/(t.height-i.offsetHeight)*360)}else{var o=e.clientX-t.left;o=Math.min(o,t.width-i.offsetWidth/2),o=Math.max(i.offsetWidth/2,o),n=Math.round((o-i.offsetWidth/2)/(t.width-i.offsetWidth)*360)}this.color.set("hue",n)},getThumbLeft:function(){if(this.vertical)return 0;var e=this.$el,t=this.color.get("hue");if(!e)return 0;var i=this.$refs.thumb;return Math.round(t*(e.offsetWidth-i.offsetWidth/2)/360)},getThumbTop:function(){if(!this.vertical)return 0;var e=this.$el,t=this.color.get("hue");if(!e)return 0;var i=this.$refs.thumb;return Math.round(t*(e.offsetHeight-i.offsetHeight/2)/360)},update:function(){this.thumbLeft=this.getThumbLeft(),this.thumbTop=this.getThumbTop()}},mounted:function(){var e=this,t=this.$refs,i=t.bar,n=t.thumb,r={drag:function(t){e.handleDrag(t)},end:function(t){e.handleDrag(t)}};Jp(i,r),Jp(n,r),this.update()}},af=sf,cf=a(af,rf,of,!1,null,null,null);cf.options.__file="packages/color-picker/src/components/hue-slider.vue";var lf=cf.exports,uf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-color-alpha-slider",class:{"is-vertical":e.vertical}},[i("div",{ref:"bar",staticClass:"el-color-alpha-slider__bar",style:{background:e.background},on:{click:e.handleClick}}),i("div",{ref:"thumb",staticClass:"el-color-alpha-slider__thumb",style:{left:e.thumbLeft+"px",top:e.thumbTop+"px"}})])},df=[];uf._withStripped=!0;var hf={name:"el-color-alpha-slider",props:{color:{required:!0},vertical:Boolean},watch:{"color._alpha":function(){this.update()},"color.value":function(){this.update()}},methods:{handleClick:function(e){var t=this.$refs.thumb,i=e.target;i!==t&&this.handleDrag(e)},handleDrag:function(e){var t=this.$el.getBoundingClientRect(),i=this.$refs.thumb;if(this.vertical){var n=e.clientY-t.top;n=Math.max(i.offsetHeight/2,n),n=Math.min(n,t.height-i.offsetHeight/2),this.color.set("alpha",Math.round((n-i.offsetHeight/2)/(t.height-i.offsetHeight)*100))}else{var r=e.clientX-t.left;r=Math.max(i.offsetWidth/2,r),r=Math.min(r,t.width-i.offsetWidth/2),this.color.set("alpha",Math.round((r-i.offsetWidth/2)/(t.width-i.offsetWidth)*100))}},getThumbLeft:function(){if(this.vertical)return 0;var e=this.$el,t=this.color._alpha;if(!e)return 0;var i=this.$refs.thumb;return Math.round(t*(e.offsetWidth-i.offsetWidth/2)/100)},getThumbTop:function(){if(!this.vertical)return 0;var e=this.$el,t=this.color._alpha;if(!e)return 0;var i=this.$refs.thumb;return Math.round(t*(e.offsetHeight-i.offsetHeight/2)/100)},getBackground:function(){if(this.color&&this.color.value){var e=this.color.toRgb(),t=e.r,i=e.g,n=e.b;return"linear-gradient(to right, rgba("+t+", "+i+", "+n+", 0) 0%, rgba("+t+", "+i+", "+n+", 1) 100%)"}return null},update:function(){this.thumbLeft=this.getThumbLeft(),this.thumbTop=this.getThumbTop(),this.background=this.getBackground()}},data:function(){return{thumbLeft:0,thumbTop:0,background:null}},mounted:function(){var e=this,t=this.$refs,i=t.bar,n=t.thumb,r={drag:function(t){e.handleDrag(t)},end:function(t){e.handleDrag(t)}};Jp(i,r),Jp(n,r),this.update()}},pf=hf,ff=a(pf,uf,df,!1,null,null,null);ff.options.__file="packages/color-picker/src/components/alpha-slider.vue";var gf=ff.exports,mf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-color-predefine"},[i("div",{staticClass:"el-color-predefine__colors"},e._l(e.rgbaColors,(function(t,n){return i("div",{key:e.colors[n],staticClass:"el-color-predefine__color-selector",class:{selected:t.selected,"is-alpha":t._alpha<100},on:{click:function(t){e.handleSelect(n)}}},[i("div",{style:{"background-color":t.value}})])})),0)])},_f=[];mf._withStripped=!0;var vf={props:{colors:{type:Array,required:!0},color:{required:!0}},data:function(){return{rgbaColors:this.parseColors(this.colors,this.color)}},methods:{handleSelect:function(e){this.color.fromString(this.colors[e])},parseColors:function(e,t){return e.map((function(e){var i=new qp;return i.enableAlpha=!0,i.format="rgba",i.fromString(e),i.selected=i.value===t.value,i}))}},watch:{"$parent.currentColor":function(e){var t=new qp;t.fromString(e),this.rgbaColors.forEach((function(e){e.selected=t.compare(e)}))},colors:function(e){this.rgbaColors=this.parseColors(e,this.color)},color:function(e){this.rgbaColors=this.parseColors(this.colors,e)}}},Ef=vf,Af=a(Ef,mf,_f,!1,null,null,null);Af.options.__file="packages/color-picker/src/components/predefine.vue";var yf=Af.exports,Sf={name:"el-color-picker-dropdown",mixins:[H.a,_.a],components:{SvPanel:nf,HueSlider:lf,AlphaSlider:gf,ElInput:g.a,ElButton:se.a,Predefine:yf},props:{color:{required:!0},showAlpha:Boolean,predefine:Array},data:function(){return{customInput:""}},computed:{currentColor:function(){var e=this.$parent;return e.value||e.showPanelColor?e.color.value:""}},methods:{confirmValue:function(){this.$emit("pick")},handleConfirm:function(){this.color.fromString(this.customInput)}},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$el},watch:{showPopper:function(e){var t=this;!0===e&&this.$nextTick((function(){var e=t.$refs,i=e.sl,n=e.hue,r=e.alpha;i&&i.update(),n&&n.update(),r&&r.update()}))},currentColor:{immediate:!0,handler:function(e){this.customInput=e}}}},Cf=Sf,bf=a(Cf,$p,zp,!1,null,null,null);bf.options.__file="packages/color-picker/src/components/picker-dropdown.vue";var Tf=bf.exports,If={name:"ElColorPicker",mixins:[w.a],props:{value:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:String,popperClass:String,predefine:Array},inject:{elForm:{default:""},elFormItem:{default:""}},directives:{Clickoutside:F.a},computed:{displayedColor:function(){return this.value||this.showPanelColor?this.displayedRgb(this.color,this.showAlpha):"transparent"},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},colorSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},colorDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{value:function(e){e?e&&e!==this.color.value&&this.color.fromString(e):this.showPanelColor=!1},color:{deep:!0,handler:function(){this.showPanelColor=!0}},displayedColor:function(e){if(this.showPicker){var t=new qp({enableAlpha:this.showAlpha,format:this.colorFormat});t.fromString(this.value);var i=this.displayedRgb(t,this.showAlpha);e!==i&&this.$emit("active-change",e)}}},methods:{handleTrigger:function(){this.colorDisabled||(this.showPicker=!this.showPicker)},confirmValue:function(){var e=this.color.value;this.$emit("input",e),this.$emit("change",e),this.dispatch("ElFormItem","el.form.change",e),this.showPicker=!1},clearValue:function(){this.$emit("input",null),this.$emit("change",null),null!==this.value&&this.dispatch("ElFormItem","el.form.change",null),this.showPanelColor=!1,this.showPicker=!1,this.resetColor()},hide:function(){this.showPicker=!1,this.resetColor()},resetColor:function(){var e=this;this.$nextTick((function(t){e.value?e.color.fromString(e.value):e.showPanelColor=!1}))},displayedRgb:function(e,t){if(!(e instanceof qp))throw Error("color should be instance of Color Class");var i=e.toRgb(),n=i.r,r=i.g,o=i.b;return t?"rgba("+n+", "+r+", "+o+", "+e.get("alpha")/100+")":"rgb("+n+", "+r+", "+o+")"}},mounted:function(){var e=this.value;e&&this.color.fromString(e),this.popperElm=this.$refs.dropdown.$el},data:function(){var e=new qp({enableAlpha:this.showAlpha,format:this.colorFormat});return{color:e,showPicker:!1,showPanelColor:!1}},components:{PickerDropdown:Tf}},Rf=If,wf=a(Rf,kp,Np,!1,null,null,null);wf.options.__file="packages/color-picker/src/main.vue";var Of=wf.exports;Of.install=function(e){e.component(Of.name,Of)};var kf=Of,Nf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-transfer"},[i("transfer-panel",e._b({ref:"leftPanel",attrs:{data:e.sourceData,title:e.titles[0]||e.t("el.transfer.titles.0"),"default-checked":e.leftDefaultChecked,placeholder:e.filterPlaceholder||e.t("el.transfer.filterPlaceholder")},on:{"checked-change":e.onSourceCheckedChange}},"transfer-panel",e.$props,!1),[e._t("left-footer")],2),i("div",{staticClass:"el-transfer__buttons"},[i("el-button",{class:["el-transfer__button",e.hasButtonTexts?"is-with-texts":""],attrs:{type:"primary",disabled:0===e.rightChecked.length},nativeOn:{click:function(t){return e.addToLeft(t)}}},[i("i",{staticClass:"el-icon-arrow-left"}),void 0!==e.buttonTexts[0]?i("span",[e._v(e._s(e.buttonTexts[0]))]):e._e()]),i("el-button",{class:["el-transfer__button",e.hasButtonTexts?"is-with-texts":""],attrs:{type:"primary",disabled:0===e.leftChecked.length},nativeOn:{click:function(t){return e.addToRight(t)}}},[void 0!==e.buttonTexts[1]?i("span",[e._v(e._s(e.buttonTexts[1]))]):e._e(),i("i",{staticClass:"el-icon-arrow-right"})])],1),i("transfer-panel",e._b({ref:"rightPanel",attrs:{data:e.targetData,title:e.titles[1]||e.t("el.transfer.titles.1"),"default-checked":e.rightDefaultChecked,placeholder:e.filterPlaceholder||e.t("el.transfer.filterPlaceholder")},on:{"checked-change":e.onTargetCheckedChange}},"transfer-panel",e.$props,!1),[e._t("right-footer")],2)],1)},Lf=[];Nf._withStripped=!0;var Pf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-transfer-panel"},[i("p",{staticClass:"el-transfer-panel__header"},[i("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleAllCheckedChange},model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}},[e._v("\n      "+e._s(e.title)+"\n      "),i("span",[e._v(e._s(e.checkedSummary))])])],1),i("div",{class:["el-transfer-panel__body",e.hasFooter?"is-with-footer":""]},[e.filterable?i("el-input",{staticClass:"el-transfer-panel__filter",attrs:{size:"small",placeholder:e.placeholder},nativeOn:{mouseenter:function(t){e.inputHover=!0},mouseleave:function(t){e.inputHover=!1}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[i("i",{class:["el-input__icon","el-icon-"+e.inputIcon],attrs:{slot:"prefix"},on:{click:e.clearQuery},slot:"prefix"})]):e._e(),i("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!e.hasNoMatch&&e.data.length>0,expression:"!hasNoMatch && data.length > 0"}],staticClass:"el-transfer-panel__list",class:{"is-filterable":e.filterable},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},e._l(e.filteredData,(function(t){return i("el-checkbox",{key:t[e.keyProp],staticClass:"el-transfer-panel__item",attrs:{label:t[e.keyProp],disabled:t[e.disabledProp]}},[i("option-content",{attrs:{option:t}})],1)})),1),i("p",{directives:[{name:"show",rawName:"v-show",value:e.hasNoMatch,expression:"hasNoMatch"}],staticClass:"el-transfer-panel__empty"},[e._v(e._s(e.t("el.transfer.noMatch")))]),i("p",{directives:[{name:"show",rawName:"v-show",value:0===e.data.length&&!e.hasNoMatch,expression:"data.length === 0 && !hasNoMatch"}],staticClass:"el-transfer-panel__empty"},[e._v(e._s(e.t("el.transfer.noData")))])],1),e.hasFooter?i("p",{staticClass:"el-transfer-panel__footer"},[e._t("default")],2):e._e()])},Df=[];Pf._withStripped=!0;var Mf={mixins:[_.a],name:"ElTransferPanel",componentName:"ElTransferPanel",components:{ElCheckboxGroup:kr.a,ElCheckbox:Dn.a,ElInput:g.a,OptionContent:{props:{option:Object},render:function(e){var t=function e(t){return"ElTransferPanel"===t.$options.componentName?t:t.$parent?e(t.$parent):t},i=t(this),n=i.$parent||i;return i.renderContent?i.renderContent(e,this.option):n.$scopedSlots.default?n.$scopedSlots.default({option:this.option}):e("span",[this.option[i.labelProp]||this.option[i.keyProp]])}}},props:{data:{type:Array,default:function(){return[]}},renderContent:Function,placeholder:String,title:String,filterable:Boolean,format:Object,filterMethod:Function,defaultChecked:Array,props:Object},data:function(){return{checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}},watch:{checked:function(e,t){if(this.updateAllChecked(),this.checkChangeByUser){var i=e.concat(t).filter((function(i){return-1===e.indexOf(i)||-1===t.indexOf(i)}));this.$emit("checked-change",e,i)}else this.$emit("checked-change",e),this.checkChangeByUser=!0},data:function(){var e=this,t=[],i=this.filteredData.map((function(t){return t[e.keyProp]}));this.checked.forEach((function(e){i.indexOf(e)>-1&&t.push(e)})),this.checkChangeByUser=!1,this.checked=t},checkableData:function(){this.updateAllChecked()},defaultChecked:{immediate:!0,handler:function(e,t){var i=this;if(!t||e.length!==t.length||!e.every((function(e){return t.indexOf(e)>-1}))){var n=[],r=this.checkableData.map((function(e){return e[i.keyProp]}));e.forEach((function(e){r.indexOf(e)>-1&&n.push(e)})),this.checkChangeByUser=!1,this.checked=n}}}},computed:{filteredData:function(){var e=this;return this.data.filter((function(t){if("function"===typeof e.filterMethod)return e.filterMethod(e.query,t);var i=t[e.labelProp]||t[e.keyProp].toString();return i.toLowerCase().indexOf(e.query.toLowerCase())>-1}))},checkableData:function(){var e=this;return this.filteredData.filter((function(t){return!t[e.disabledProp]}))},checkedSummary:function(){var e=this.checked.length,t=this.data.length,i=this.format,n=i.noChecked,r=i.hasChecked;return n&&r?e>0?r.replace(/\${checked}/g,e).replace(/\${total}/g,t):n.replace(/\${total}/g,t):e+"/"+t},isIndeterminate:function(){var e=this.checked.length;return e>0&&e<this.checkableData.length},hasNoMatch:function(){return this.query.length>0&&0===this.filteredData.length},inputIcon:function(){return this.query.length>0&&this.inputHover?"circle-close":"search"},labelProp:function(){return this.props.label||"label"},keyProp:function(){return this.props.key||"key"},disabledProp:function(){return this.props.disabled||"disabled"},hasFooter:function(){return!!this.$slots.default}},methods:{updateAllChecked:function(){var e=this,t=this.checkableData.map((function(t){return t[e.keyProp]}));this.allChecked=t.length>0&&t.every((function(t){return e.checked.indexOf(t)>-1}))},handleAllCheckedChange:function(e){var t=this;this.checked=e?this.checkableData.map((function(e){return e[t.keyProp]})):[]},clearQuery:function(){"circle-close"===this.inputIcon&&(this.query="")}}},xf=Mf,Bf=a(xf,Pf,Df,!1,null,null,null);Bf.options.__file="packages/transfer/src/transfer-panel.vue";var Uf=Bf.exports,Ff={name:"ElTransfer",mixins:[w.a,_.a,I.a],components:{TransferPanel:Uf,ElButton:se.a},props:{data:{type:Array,default:function(){return[]}},titles:{type:Array,default:function(){return[]}},buttonTexts:{type:Array,default:function(){return[]}},filterPlaceholder:{type:String,default:""},filterMethod:Function,leftDefaultChecked:{type:Array,default:function(){return[]}},rightDefaultChecked:{type:Array,default:function(){return[]}},renderContent:Function,value:{type:Array,default:function(){return[]}},format:{type:Object,default:function(){return{}}},filterable:Boolean,props:{type:Object,default:function(){return{label:"label",key:"key",disabled:"disabled"}}},targetOrder:{type:String,default:"original"}},data:function(){return{leftChecked:[],rightChecked:[]}},computed:{dataObj:function(){var e=this.props.key;return this.data.reduce((function(t,i){return(t[i[e]]=i)&&t}),{})},sourceData:function(){var e=this;return this.data.filter((function(t){return-1===e.value.indexOf(t[e.props.key])}))},targetData:function(){var e=this;return"original"===this.targetOrder?this.data.filter((function(t){return e.value.indexOf(t[e.props.key])>-1})):this.value.reduce((function(t,i){var n=e.dataObj[i];return n&&t.push(n),t}),[])},hasButtonTexts:function(){return 2===this.buttonTexts.length}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}},methods:{getMigratingConfig:function(){return{props:{"footer-format":"footer-format is renamed to format."}}},onSourceCheckedChange:function(e,t){this.leftChecked=e,void 0!==t&&this.$emit("left-check-change",e,t)},onTargetCheckedChange:function(e,t){this.rightChecked=e,void 0!==t&&this.$emit("right-check-change",e,t)},addToLeft:function(){var e=this.value.slice();this.rightChecked.forEach((function(t){var i=e.indexOf(t);i>-1&&e.splice(i,1)})),this.$emit("input",e),this.$emit("change",e,"left",this.rightChecked)},addToRight:function(){var e=this,t=this.value.slice(),i=[],n=this.props.key;this.data.forEach((function(t){var r=t[n];e.leftChecked.indexOf(r)>-1&&-1===e.value.indexOf(r)&&i.push(r)})),t="unshift"===this.targetOrder?i.concat(t):t.concat(i),this.$emit("input",t),this.$emit("change",t,"right",this.leftChecked)},clearQuery:function(e){"left"===e?this.$refs.leftPanel.query="":"right"===e&&(this.$refs.rightPanel.query="")}}},Vf=Ff,jf=a(Vf,Nf,Lf,!1,null,null,null);jf.options.__file="packages/transfer/src/main.vue";var Gf=jf.exports;Gf.install=function(e){e.component(Gf.name,Gf)};var Hf=Gf,Qf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"el-container",class:{"is-vertical":e.isVertical}},[e._t("default")],2)},Wf=[];Qf._withStripped=!0;var qf={name:"ElContainer",componentName:"ElContainer",props:{direction:String},computed:{isVertical:function(){return"vertical"===this.direction||"horizontal"!==this.direction&&(!(!this.$slots||!this.$slots.default)&&this.$slots.default.some((function(e){var t=e.componentOptions&&e.componentOptions.tag;return"el-header"===t||"el-footer"===t})))}}},$f=qf,zf=a($f,Qf,Wf,!1,null,null,null);zf.options.__file="packages/container/src/main.vue";var Zf=zf.exports;Zf.install=function(e){e.component(Zf.name,Zf)};var Yf=Zf,Kf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{staticClass:"el-header",style:{height:e.height}},[e._t("default")],2)},Jf=[];Kf._withStripped=!0;var Xf={name:"ElHeader",componentName:"ElHeader",props:{height:{type:String,default:"60px"}}},eg=Xf,tg=a(eg,Kf,Jf,!1,null,null,null);tg.options.__file="packages/header/src/main.vue";var ig=tg.exports;ig.install=function(e){e.component(ig.name,ig)};var ng=ig,rg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("aside",{staticClass:"el-aside",style:{width:e.width}},[e._t("default")],2)},og=[];rg._withStripped=!0;var sg={name:"ElAside",componentName:"ElAside",props:{width:{type:String,default:"300px"}}},ag=sg,cg=a(ag,rg,og,!1,null,null,null);cg.options.__file="packages/aside/src/main.vue";var lg=cg.exports;lg.install=function(e){e.component(lg.name,lg)};var ug=lg,dg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",{staticClass:"el-main"},[e._t("default")],2)},hg=[];dg._withStripped=!0;var pg={name:"ElMain",componentName:"ElMain"},fg=pg,gg=a(fg,dg,hg,!1,null,null,null);gg.options.__file="packages/main/src/main.vue";var mg=gg.exports;mg.install=function(e){e.component(mg.name,mg)};var _g=mg,vg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("footer",{staticClass:"el-footer",style:{height:e.height}},[e._t("default")],2)},Eg=[];vg._withStripped=!0;var Ag={name:"ElFooter",componentName:"ElFooter",props:{height:{type:String,default:"60px"}}},yg=Ag,Sg=a(yg,vg,Eg,!1,null,null,null);Sg.options.__file="packages/footer/src/main.vue";var Cg=Sg.exports;Cg.install=function(e){e.component(Cg.name,Cg)};var bg,Tg,Ig=Cg,Rg={name:"ElTimeline",props:{reverse:{type:Boolean,default:!1}},provide:function(){return{timeline:this}},render:function(){var e=arguments[0],t=this.reverse,i={"el-timeline":!0,"is-reverse":t},n=this.$slots.default||[];return t&&(n=n.reverse()),e("ul",{class:i},[n])}},wg=Rg,Og=a(wg,bg,Tg,!1,null,null,null);Og.options.__file="packages/timeline/src/main.vue";var kg=Og.exports;kg.install=function(e){e.component(kg.name,kg)};var Ng=kg,Lg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"el-timeline-item"},[i("div",{staticClass:"el-timeline-item__tail"}),e.$slots.dot?e._e():i("div",{staticClass:"el-timeline-item__node",class:["el-timeline-item__node--"+(e.size||""),"el-timeline-item__node--"+(e.type||"")],style:{backgroundColor:e.color}},[e.icon?i("i",{staticClass:"el-timeline-item__icon",class:e.icon}):e._e()]),e.$slots.dot?i("div",{staticClass:"el-timeline-item__dot"},[e._t("dot")],2):e._e(),i("div",{staticClass:"el-timeline-item__wrapper"},[e.hideTimestamp||"top"!==e.placement?e._e():i("div",{staticClass:"el-timeline-item__timestamp is-top"},[e._v("\n      "+e._s(e.timestamp)+"\n    ")]),i("div",{staticClass:"el-timeline-item__content"},[e._t("default")],2),e.hideTimestamp||"bottom"!==e.placement?e._e():i("div",{staticClass:"el-timeline-item__timestamp is-bottom"},[e._v("\n      "+e._s(e.timestamp)+"\n    ")])])])},Pg=[];Lg._withStripped=!0;var Dg={name:"ElTimelineItem",inject:["timeline"],props:{timestamp:String,hideTimestamp:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},type:String,color:String,size:{type:String,default:"normal"},icon:String}},Mg=Dg,xg=a(Mg,Lg,Pg,!1,null,null,null);xg.options.__file="packages/timeline/src/item.vue";var Bg=xg.exports;Bg.install=function(e){e.component(Bg.name,Bg)};var Ug=Bg,Fg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a",e._b({class:["el-link",e.type?"el-link--"+e.type:"",e.disabled&&"is-disabled",e.underline&&!e.disabled&&"is-underline"],attrs:{href:e.disabled?null:e.href},on:{click:e.handleClick}},"a",e.$attrs,!1),[e.icon?i("i",{class:e.icon}):e._e(),e.$slots.default?i("span",{staticClass:"el-link--inner"},[e._t("default")],2):e._e(),e.$slots.icon?[e.$slots.icon?e._t("icon"):e._e()]:e._e()],2)},Vg=[];Fg._withStripped=!0;var jg={name:"ElLink",props:{type:{type:String,default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:String,icon:String},methods:{handleClick:function(e){this.disabled||this.href||this.$emit("click",e)}}},Gg=jg,Hg=a(Gg,Fg,Vg,!1,null,null,null);Hg.options.__file="packages/link/src/main.vue";var Qg=Hg.exports;Qg.install=function(e){e.component(Qg.name,Qg)};var Wg=Qg,qg=function(e,t){var i=t._c;return i("div",t._g(t._b({class:[t.data.staticClass,"el-divider","el-divider--"+t.props.direction]},"div",t.data.attrs,!1),t.listeners),[t.slots().default&&"vertical"!==t.props.direction?i("div",{class:["el-divider__text","is-"+t.props.contentPosition]},[t._t("default")],2):t._e()])},$g=[];qg._withStripped=!0;var zg={name:"ElDivider",props:{direction:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}},contentPosition:{type:String,default:"center",validator:function(e){return-1!==["left","center","right"].indexOf(e)}}}},Zg=zg,Yg=a(Zg,qg,$g,!0,null,null,null);Yg.options.__file="packages/divider/src/main.vue";var Kg=Yg.exports;Kg.install=function(e){e.component(Kg.name,Kg)};var Jg=Kg,Xg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-image"},[e.loading?e._t("placeholder",[i("div",{staticClass:"el-image__placeholder"})]):e.error?e._t("error",[i("div",{staticClass:"el-image__error"},[e._v(e._s(e.t("el.image.error")))])]):i("img",e._g(e._b({staticClass:"el-image__inner",class:{"el-image__inner--center":e.alignCenter,"el-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.src},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners)),e.preview?[e.showViewer?i("image-viewer",{attrs:{"z-index":e.zIndex,"initial-index":e.imageIndex,"on-close":e.closeViewer,"url-list":e.previewSrcList}}):e._e()]:e._e()],2)},em=[];Xg._withStripped=!0;var tm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"viewer-fade"}},[i("div",{ref:"el-image-viewer__wrapper",staticClass:"el-image-viewer__wrapper",style:{"z-index":e.viewerZIndex},attrs:{tabindex:"-1"}},[i("div",{staticClass:"el-image-viewer__mask",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleMaskClick(t)}}}),i("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:e.hide}},[i("i",{staticClass:"el-icon-close"})]),e.isSingle?e._e():[i("span",{staticClass:"el-image-viewer__btn el-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[i("i",{staticClass:"el-icon-arrow-left"})]),i("span",{staticClass:"el-image-viewer__btn el-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[i("i",{staticClass:"el-icon-arrow-right"})])],i("div",{staticClass:"el-image-viewer__btn el-image-viewer__actions"},[i("div",{staticClass:"el-image-viewer__actions__inner"},[i("i",{staticClass:"el-icon-zoom-out",on:{click:function(t){e.handleActions("zoomOut")}}}),i("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){e.handleActions("zoomIn")}}}),i("i",{staticClass:"el-image-viewer__actions__divider"}),i("i",{class:e.mode.icon,on:{click:e.toggleMode}}),i("i",{staticClass:"el-image-viewer__actions__divider"}),i("i",{staticClass:"el-icon-refresh-left",on:{click:function(t){e.handleActions("anticlocelise")}}}),i("i",{staticClass:"el-icon-refresh-right",on:{click:function(t){e.handleActions("clocelise")}}})])]),i("div",{staticClass:"el-image-viewer__canvas"},e._l(e.urlList,(function(t,n){return n===e.index?i("img",{key:t,ref:"img",refInFor:!0,staticClass:"el-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}}):e._e()})),0)],2)])},im=[];tm._withStripped=!0;var nm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},rm={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},om=Object(v["isFirefox"])()?"DOMMouseScroll":"mousewheel",sm={name:"elImageViewer",props:{urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!1,mode:rm.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}},computed:{isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.urlList[this.index]},imgStyle:function(){var e=this.transform,t=e.scale,i=e.deg,n=e.offsetX,r=e.offsetY,o=e.enableTransition,s={transform:"scale("+t+") rotate("+i+"deg)",transition:o?"transform .3s":"","margin-left":n+"px","margin-top":r+"px"};return this.mode===rm.CONTAIN&&(s.maxWidth=s.maxHeight="100%"),s},viewerZIndex:function(){var e=C["PopupManager"].nextZIndex();return this.zIndex>e?this.zIndex:e}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg:function(e){var t=this;this.$nextTick((function(e){var i=t.$refs.img[0];i.complete||(t.loading=!0)}))}},methods:{hide:function(){this.deviceSupportUninstall(),this.onClose()},deviceSupportInstall:function(){var e=this;this._keyDownHandler=function(t){t.stopPropagation();var i=t.keyCode;switch(i){case 27:e.hide();break;case 32:e.toggleMode();break;case 37:e.prev();break;case 38:e.handleActions("zoomIn");break;case 39:e.next();break;case 40:e.handleActions("zoomOut");break}},this._mouseWheelHandler=Object(v["rafThrottle"])((function(t){var i=t.wheelDelta?t.wheelDelta:-t.detail;i>0?e.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):e.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),Object(Ue["on"])(document,"keydown",this._keyDownHandler),Object(Ue["on"])(document,om,this._mouseWheelHandler)},deviceSupportUninstall:function(){Object(Ue["off"])(document,"keydown",this._keyDownHandler),Object(Ue["off"])(document,om,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(e){this.loading=!1},handleImgError:function(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown:function(e){var t=this;if(!this.loading&&0===e.button){var i=this.transform,n=i.offsetX,r=i.offsetY,o=e.pageX,s=e.pageY;this._dragHandler=Object(v["rafThrottle"])((function(e){t.transform.offsetX=n+e.pageX-o,t.transform.offsetY=r+e.pageY-s})),Object(Ue["on"])(document,"mousemove",this._dragHandler),Object(Ue["on"])(document,"mouseup",(function(e){Object(Ue["off"])(document,"mousemove",t._dragHandler)})),e.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var e=Object.keys(rm),t=Object.values(rm),i=t.indexOf(this.mode),n=(i+1)%e.length;this.mode=rm[e[n]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var e=this.urlList.length;this.index=(this.index-1+e)%e}},next:function(){if(!this.isLast||this.infinite){var e=this.urlList.length;this.index=(this.index+1)%e}},handleActions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var i=nm({zoomRate:.2,rotateDeg:90,enableTransition:!0},t),n=i.zoomRate,r=i.rotateDeg,o=i.enableTransition,s=this.transform;switch(e){case"zoomOut":s.scale>.2&&(s.scale=parseFloat((s.scale-n).toFixed(3)));break;case"zoomIn":s.scale=parseFloat((s.scale+n).toFixed(3));break;case"clocelise":s.deg+=r;break;case"anticlocelise":s.deg-=r;break}s.enableTransition=o}}},mounted:function(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["el-image-viewer__wrapper"].focus()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},am=sm,cm=a(am,tm,im,!1,null,null,null);cm.options.__file="packages/image/src/image-viewer.vue";var lm=cm.exports,um=function(){return void 0!==document.documentElement.style.objectFit},dm={NONE:"none",CONTAIN:"contain",COVER:"cover",FILL:"fill",SCALE_DOWN:"scale-down"},hm="",pm={name:"ElImage",mixins:[_.a],inheritAttrs:!1,components:{ImageViewer:lm},props:{src:String,fit:String,lazy:Boolean,scrollContainer:{},previewSrcList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3}},data:function(){return{loading:!0,error:!1,show:!this.lazy,imageWidth:0,imageHeight:0,showViewer:!1}},computed:{imageStyle:function(){var e=this.fit;return!this.$isServer&&e?um()?{"object-fit":e}:this.getImageStyle(e):{}},alignCenter:function(){return!this.$isServer&&!um()&&this.fit!==dm.FILL},preview:function(){var e=this.previewSrcList;return Array.isArray(e)&&e.length>0},imageIndex:function(){var e=0,t=this.previewSrcList.indexOf(this.src);return t>=0&&(e=t),e}},watch:{src:function(e){this.show&&this.loadImage()},show:function(e){e&&this.loadImage()}},mounted:function(){this.lazy?this.addLazyLoadListener():this.loadImage()},beforeDestroy:function(){this.lazy&&this.removeLazyLoadListener()},methods:{loadImage:function(){var e=this;if(!this.$isServer){this.loading=!0,this.error=!1;var t=new Image;t.onload=function(i){return e.handleLoad(i,t)},t.onerror=this.handleError.bind(this),Object.keys(this.$attrs).forEach((function(i){var n=e.$attrs[i];t.setAttribute(i,n)})),t.src=this.src}},handleLoad:function(e,t){this.imageWidth=t.width,this.imageHeight=t.height,this.loading=!1,this.error=!1},handleError:function(e){this.loading=!1,this.error=!0,this.$emit("error",e)},handleLazyLoad:function(){Object(Ue["isInContainer"])(this.$el,this._scrollContainer)&&(this.show=!0,this.removeLazyLoadListener())},addLazyLoadListener:function(){if(!this.$isServer){var e=this.scrollContainer,t=null;t=Object(Hd["isHtmlElement"])(e)?e:Object(Hd["isString"])(e)?document.querySelector(e):Object(Ue["getScrollContainer"])(this.$el),t&&(this._scrollContainer=t,this._lazyLoadHandler=xh()(200,this.handleLazyLoad),Object(Ue["on"])(t,"scroll",this._lazyLoadHandler),this.handleLazyLoad())}},removeLazyLoadListener:function(){var e=this._scrollContainer,t=this._lazyLoadHandler;!this.$isServer&&e&&t&&(Object(Ue["off"])(e,"scroll",t),this._scrollContainer=null,this._lazyLoadHandler=null)},getImageStyle:function(e){var t=this.imageWidth,i=this.imageHeight,n=this.$el,r=n.clientWidth,o=n.clientHeight;if(!t||!i||!r||!o)return{};var s=t/i,a=r/o;if(e===dm.SCALE_DOWN){var c=t<r&&i<o;e=c?dm.NONE:dm.CONTAIN}switch(e){case dm.NONE:return{width:"auto",height:"auto"};case dm.CONTAIN:return s<a?{width:"auto"}:{height:"auto"};case dm.COVER:return s<a?{height:"auto"}:{width:"auto"};default:return{}}},clickHandler:function(){this.preview&&(hm=document.body.style.overflow,document.body.style.overflow="hidden",this.showViewer=!0)},closeViewer:function(){document.body.style.overflow=hm,this.showViewer=!1}}},fm=pm,gm=a(fm,Xg,em,!1,null,null,null);gm.options.__file="packages/image/src/main.vue";var mm=gm.exports;mm.install=function(e){e.component(mm.name,mm)};var _m=mm,vm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-calendar"},[i("div",{staticClass:"el-calendar__header"},[i("div",{staticClass:"el-calendar__title"},[e._v("\n      "+e._s(e.i18nDate)+"\n    ")]),0===e.validatedRange.length?i("div",{staticClass:"el-calendar__button-group"},[i("el-button-group",[i("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(t){e.selectDate("prev-month")}}},[e._v("\n          "+e._s(e.t("el.datepicker.prevMonth"))+"\n        ")]),i("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(t){e.selectDate("today")}}},[e._v("\n          "+e._s(e.t("el.datepicker.today"))+"\n        ")]),i("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(t){e.selectDate("next-month")}}},[e._v("\n          "+e._s(e.t("el.datepicker.nextMonth"))+"\n        ")])],1)],1):e._e()]),0===e.validatedRange.length?i("div",{key:"no-range",staticClass:"el-calendar__body"},[i("date-table",{attrs:{date:e.date,"selected-day":e.realSelectedDay,"first-day-of-week":e.realFirstDayOfWeek},on:{pick:e.pickDay}})],1):i("div",{key:"has-range",staticClass:"el-calendar__body"},e._l(e.validatedRange,(function(t,n){return i("date-table",{key:n,attrs:{date:t[0],"selected-day":e.realSelectedDay,range:t,"hide-header":0!==n,"first-day-of-week":e.realFirstDayOfWeek},on:{pick:e.pickDay}})})),1)])},Em=[];vm._withStripped=!0;var Am,ym,Sm=i(20),Cm=i.n(Sm),bm={props:{selectedDay:String,range:{type:Array,validator:function(e){if(!e||!e.length)return!0;var t=e[0],i=e[1];return Object(ro["validateRangeInOneMonth"])(t,i)}},date:Date,hideHeader:Boolean,firstDayOfWeek:Number},inject:["elCalendar"],methods:{toNestedArr:function(e){return Object(ro["range"])(e.length/7).map((function(t,i){var n=7*i;return e.slice(n,n+7)}))},getFormateDate:function(e,t){if(!e||-1===["prev","current","next"].indexOf(t))throw new Error("invalid day or type");var i=this.curMonthDatePrefix;return"prev"===t?i=this.prevMonthDatePrefix:"next"===t&&(i=this.nextMonthDatePrefix),e=("00"+e).slice(-2),i+"-"+e},getCellClass:function(e){var t=e.text,i=e.type,n=[i];if("current"===i){var r=this.getFormateDate(t,i);r===this.selectedDay&&n.push("is-selected"),r===this.formatedToday&&n.push("is-today")}return n},pickDay:function(e){var t=e.text,i=e.type,n=this.getFormateDate(t,i);this.$emit("pick",n)},cellRenderProxy:function(e){var t=e.text,i=e.type,n=this.$createElement,r=this.elCalendar.$scopedSlots.dateCell;if(!r)return n("span",[t]);var o=this.getFormateDate(t,i),s=new Date(o),a={isSelected:this.selectedDay===o,type:i+"-month",day:o};return r({date:s,data:a})}},computed:{WEEK_DAYS:function(){return Object(ro["getI18nSettings"])().dayNames},prevMonthDatePrefix:function(){var e=new Date(this.date.getTime());return e.setDate(0),Cm.a.format(e,"yyyy-MM")},curMonthDatePrefix:function(){return Cm.a.format(this.date,"yyyy-MM")},nextMonthDatePrefix:function(){var e=new Date(this.date.getFullYear(),this.date.getMonth()+1,1);return Cm.a.format(e,"yyyy-MM")},formatedToday:function(){return this.elCalendar.formatedToday},isInRange:function(){return this.range&&this.range.length},rows:function(){var e=[];if(this.isInRange){var t=this.range,i=t[0],n=t[1],r=Object(ro["range"])(n.getDate()-i.getDate()+1).map((function(e,t){return{text:i.getDate()+t,type:"current"}})),o=r.length%7;o=0===o?0:7-o;var s=Object(ro["range"])(o).map((function(e,t){return{text:t+1,type:"next"}}));e=r.concat(s)}else{var a=this.date,c=Object(ro["getFirstDayOfMonth"])(a);c=0===c?7:c;var l="number"===typeof this.firstDayOfWeek?this.firstDayOfWeek:1,u=(7+c-l)%7,d=Object(ro["getPrevMonthLastDays"])(a,u).map((function(e){return{text:e,type:"prev"}})),h=Object(ro["getMonthDays"])(a).map((function(e){return{text:e,type:"current"}}));e=[].concat(d,h);var p=Object(ro["range"])(42-e.length).map((function(e,t){return{text:t+1,type:"next"}}));e=e.concat(p)}return this.toNestedArr(e)},weekDays:function(){var e=this.firstDayOfWeek,t=this.WEEK_DAYS;return"number"!==typeof e||0===e?t.slice():t.slice(e).concat(t.slice(0,e))}},render:function(){var e=this,t=arguments[0],i=this.hideHeader?null:t("thead",[this.weekDays.map((function(e){return t("th",{key:e},[e])}))]);return t("table",{class:{"el-calendar-table":!0,"is-range":this.isInRange},attrs:{cellspacing:"0",cellpadding:"0"}},[i,t("tbody",[this.rows.map((function(i,n){return t("tr",{class:{"el-calendar-table__row":!0,"el-calendar-table__row--hide-border":0===n&&e.hideHeader},key:n},[i.map((function(i,n){return t("td",{key:n,class:e.getCellClass(i),on:{click:e.pickDay.bind(e,i)}},[t("div",{class:"el-calendar-day"},[e.cellRenderProxy(i)])])}))])}))])])}},Tm=bm,Im=a(Tm,Am,ym,!1,null,null,null);Im.options.__file="packages/calendar/src/date-table.vue";var Rm=Im.exports,wm=["prev-month","today","next-month"],Om=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],km=864e5,Nm={name:"ElCalendar",mixins:[_.a],components:{DateTable:Rm,ElButton:se.a,ElButtonGroup:ce.a},props:{value:[Date,String,Number],range:{type:Array,validator:function(e){return!Array.isArray(e)||2===e.length&&e.every((function(e){return"string"===typeof e||"number"===typeof e||e instanceof Date}))}},firstDayOfWeek:{type:Number,default:1}},provide:function(){return{elCalendar:this}},methods:{pickDay:function(e){this.realSelectedDay=e},selectDate:function(e){if(-1===wm.indexOf(e))throw new Error("invalid type "+e);var t="";t="prev-month"===e?this.prevMonthDatePrefix+"-01":"next-month"===e?this.nextMonthDatePrefix+"-01":this.formatedToday,t!==this.formatedDate&&this.pickDay(t)},toDate:function(e){if(!e)throw new Error("invalid val");return e instanceof Date?e:new Date(e)},rangeValidator:function(e,t){var i=this.realFirstDayOfWeek,n=t?i:0===i?6:i-1,r=(t?"start":"end")+" of range should be "+Om[n]+".";return e.getDay()===n||(console.warn("[ElementCalendar]",r,"Invalid range will be ignored."),!1)}},computed:{prevMonthDatePrefix:function(){var e=new Date(this.date.getTime());return e.setDate(0),Cm.a.format(e,"yyyy-MM")},curMonthDatePrefix:function(){return Cm.a.format(this.date,"yyyy-MM")},nextMonthDatePrefix:function(){var e=new Date(this.date.getFullYear(),this.date.getMonth()+1,1);return Cm.a.format(e,"yyyy-MM")},formatedDate:function(){return Cm.a.format(this.date,"yyyy-MM-dd")},i18nDate:function(){var e=this.date.getFullYear(),t=this.date.getMonth()+1;return e+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+t)},formatedToday:function(){return Cm.a.format(this.now,"yyyy-MM-dd")},realSelectedDay:{get:function(){return this.value?this.formatedDate:this.selectedDay},set:function(e){this.selectedDay=e;var t=new Date(e);this.$emit("input",t)}},date:function(){if(this.value)return this.toDate(this.value);if(this.realSelectedDay){var e=this.selectedDay.split("-");return new Date(e[0],e[1]-1,e[2])}return this.validatedRange.length?this.validatedRange[0][0]:this.now},validatedRange:function(){var e=this,t=this.range;if(!t)return[];if(t=t.reduce((function(t,i,n){var r=e.toDate(i);return e.rangeValidator(r,0===n)&&(t=t.concat(r)),t}),[]),2===t.length){var i=t,n=i[0],r=i[1];if(n>r)return console.warn("[ElementCalendar]end time should be greater than start time"),[];if(Object(ro["validateRangeInOneMonth"])(n,r))return[[n,r]];var o=[],s=new Date(n.getFullYear(),n.getMonth()+1,1),a=this.toDate(s.getTime()-km);if(!Object(ro["validateRangeInOneMonth"])(s,r))return console.warn("[ElementCalendar]start time and end time interval must not exceed two months"),[];o.push([n,a]);var c=this.realFirstDayOfWeek,l=s.getDay(),u=0;return l!==c&&(0===c?u=7-l:(u=c-l,u=u>0?u:7+u)),s=this.toDate(s.getTime()+u*km),s.getDate()<r.getDate()&&o.push([s,r]),o}return[]},realFirstDayOfWeek:function(){return this.firstDayOfWeek<1||this.firstDayOfWeek>6?0:Math.floor(this.firstDayOfWeek)}},data:function(){return{selectedDay:"",now:new Date}}},Lm=Nm,Pm=a(Lm,vm,Em,!1,null,null,null);Pm.options.__file="packages/calendar/src/main.vue";var Dm=Pm.exports;Dm.install=function(e){e.component(Dm.name,Dm)};var Mm=Dm,xm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-fade-in"}},[e.visible?i("div",{staticClass:"el-backtop",style:{right:e.styleRight,bottom:e.styleBottom},on:{click:function(t){return t.stopPropagation(),e.handleClick(t)}}},[e._t("default",[i("el-icon",{attrs:{name:"caret-top"}})])],2):e._e()])},Bm=[];xm._withStripped=!0;var Um=function(e){return Math.pow(e,3)},Fm=function(e){return e<.5?Um(2*e)/2:1-Um(2*(1-e))/2},Vm={name:"ElBacktop",props:{visibilityHeight:{type:Number,default:200},target:[String],right:{type:Number,default:40},bottom:{type:Number,default:40}},data:function(){return{el:null,container:null,visible:!1}},computed:{styleBottom:function(){return this.bottom+"px"},styleRight:function(){return this.right+"px"}},mounted:function(){this.init(),this.throttledScrollHandler=xh()(300,this.onScroll),this.container.addEventListener("scroll",this.throttledScrollHandler)},methods:{init:function(){if(this.container=document,this.el=document.documentElement,this.target){if(this.el=document.querySelector(this.target),!this.el)throw new Error("target is not existed: "+this.target);this.container=this.el}},onScroll:function(){var e=this.el.scrollTop;this.visible=e>=this.visibilityHeight},handleClick:function(e){this.scrollToTop(),this.$emit("click",e)},scrollToTop:function(){var e=this.el,t=Date.now(),i=e.scrollTop,n=window.requestAnimationFrame||function(e){return setTimeout(e,16)},r=function r(){var o=(Date.now()-t)/500;o<1?(e.scrollTop=i*(1-Fm(o)),n(r)):e.scrollTop=0};n(r)}},beforeDestroy:function(){this.container.removeEventListener("scroll",this.throttledScrollHandler)}},jm=Vm,Gm=a(jm,xm,Bm,!1,null,null,null);Gm.options.__file="packages/backtop/src/main.vue";var Hm=Gm.exports;Hm.install=function(e){e.component(Hm.name,Hm)};var Qm=Hm,Wm=function(e,t){if(e===window&&(e=document.documentElement),1!==e.nodeType)return[];var i=window.getComputedStyle(e,null);return t?i[t]:i},qm=function(e){return Object.keys(e||{}).map((function(t){return[t,e[t]]}))},$m=function(e,t){return e===window||e===document?document.documentElement[t]:e[t]},zm=function(e){return $m(e,"offsetHeight")},Zm=function(e){return $m(e,"clientHeight")},Ym="ElInfiniteScroll",Km={delay:{type:Number,default:200},distance:{type:Number,default:0},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Jm=function(e,t){return Object(Hd["isHtmlElement"])(e)?qm(Km).reduce((function(i,n){var r=n[0],o=n[1],s=o.type,a=o.default,c=e.getAttribute("infinite-scroll-"+r);switch(c=Object(Hd["isUndefined"])(t[c])?c:t[c],s){case Number:c=Number(c),c=Number.isNaN(c)?a:c;break;case Boolean:c=Object(Hd["isDefined"])(c)?"false"!==c&&Boolean(c):a;break;default:c=s(c)}return i[r]=c,i}),{}):{}},Xm=function(e){return e.getBoundingClientRect().top},e_=function(e){var t=this[Ym],i=t.el,n=t.vm,r=t.container,o=t.observer,s=Jm(i,n),a=s.distance,c=s.disabled;if(!c){var l=r.getBoundingClientRect();if(l.width||l.height){var u=!1;if(r===i){var d=r.scrollTop+Zm(r);u=r.scrollHeight-d<=a}else{var h=zm(i)+Xm(i)-Xm(r),p=zm(r),f=Number.parseFloat(Wm(r,"borderBottomWidth"));u=h-p+f<=a}u&&Object(Hd["isFunction"])(e)?e.call(n):o&&(o.disconnect(),this[Ym].observer=null)}}},t_={name:"InfiniteScroll",inserted:function(e,t,i){var n=t.value,r=i.context,o=Object(Ue["getScrollContainer"])(e,!0),s=Jm(e,r),a=s.delay,c=s.immediate,l=B()(a,e_.bind(e,n));if(e[Ym]={el:e,vm:r,container:o,onScroll:l},o&&(o.addEventListener("scroll",l),c)){var u=e[Ym].observer=new MutationObserver(l);u.observe(o,{childList:!0,subtree:!0}),l()}},unbind:function(e){var t=e[Ym],i=t.container,n=t.onScroll;i&&i.removeEventListener("scroll",n)},install:function(e){e.directive(t_.name,t_)}},i_=t_,n_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-page-header"},[i("div",{staticClass:"el-page-header__left",on:{click:function(t){e.$emit("back")}}},[i("i",{staticClass:"el-icon-back"}),i("div",{staticClass:"el-page-header__title"},[e._t("title",[e._v(e._s(e.title))])],2)]),i("div",{staticClass:"el-page-header__content"},[e._t("content",[e._v(e._s(e.content))])],2)])},r_=[];n_._withStripped=!0;var o_={name:"ElPageHeader",props:{title:{type:String,default:function(){return Object(fa["t"])("el.pageHeader.title")}},content:String}},s_=o_,a_=a(s_,n_,r_,!1,null,null,null);a_.options.__file="packages/page-header/src/main.vue";var c_=a_.exports;c_.install=function(e){e.component(c_.name,c_)};var l_=c_,u_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["el-cascader-panel",e.border&&"is-bordered"],on:{keydown:e.handleKeyDown}},e._l(e.menus,(function(e,t){return i("cascader-menu",{key:t,ref:"menu",refInFor:!0,attrs:{index:t,nodes:e}})})),1)},d_=[];u_._withStripped=!0;var h_,p_,f_=i(43),g_=i.n(f_),m_=function(e){return e.stopPropagation()},__={inject:["panel"],components:{ElCheckbox:Dn.a,ElRadio:g_.a},props:{node:{required:!0},nodeId:String},computed:{config:function(){return this.panel.config},isLeaf:function(){return this.node.isLeaf},isDisabled:function(){return this.node.isDisabled},checkedValue:function(){return this.panel.checkedValue},isChecked:function(){return this.node.isSameNode(this.checkedValue)},inActivePath:function(){return this.isInPath(this.panel.activePath)},inCheckedPath:function(){var e=this;return!!this.config.checkStrictly&&this.panel.checkedNodePaths.some((function(t){return e.isInPath(t)}))},value:function(){return this.node.getValueByOption()}},methods:{handleExpand:function(){var e=this,t=this.panel,i=this.node,n=this.isDisabled,r=this.config,o=r.multiple,s=r.checkStrictly;!s&&n||i.loading||(r.lazy&&!i.loaded?t.lazyLoad(i,(function(){var t=e.isLeaf;if(t||e.handleExpand(),o){var n=!!t&&i.checked;e.handleMultiCheckChange(n)}})):t.handleExpand(i))},handleCheckChange:function(){var e=this.panel,t=this.value,i=this.node;e.handleCheckChange(t),e.handleExpand(i)},handleMultiCheckChange:function(e){this.node.doCheck(e),this.panel.calculateMultiCheckedValue()},isInPath:function(e){var t=this.node,i=e[t.level-1]||{};return i.uid===t.uid},renderPrefix:function(e){var t=this.isLeaf,i=this.isChecked,n=this.config,r=n.checkStrictly,o=n.multiple;return o?this.renderCheckbox(e):r?this.renderRadio(e):t&&i?this.renderCheckIcon(e):null},renderPostfix:function(e){var t=this.node,i=this.isLeaf;return t.loading?this.renderLoadingIcon(e):i?null:this.renderExpandIcon(e)},renderCheckbox:function(e){var t=this.node,i=this.config,n=this.isDisabled,r={on:{change:this.handleMultiCheckChange},nativeOn:{}};return i.checkStrictly&&(r.nativeOn.click=m_),e("el-checkbox",Ju()([{attrs:{value:t.checked,indeterminate:t.indeterminate,disabled:n}},r]))},renderRadio:function(e){var t=this.checkedValue,i=this.value,n=this.isDisabled;return Object(v["isEqual"])(i,t)&&(i=t),e("el-radio",{attrs:{value:t,label:i,disabled:n},on:{change:this.handleCheckChange},nativeOn:{click:m_}},[e("span")])},renderCheckIcon:function(e){return e("i",{class:"el-icon-check el-cascader-node__prefix"})},renderLoadingIcon:function(e){return e("i",{class:"el-icon-loading el-cascader-node__postfix"})},renderExpandIcon:function(e){return e("i",{class:"el-icon-arrow-right el-cascader-node__postfix"})},renderContent:function(e){var t=this.panel,i=this.node,n=t.renderLabelFn,r=n?n({node:i,data:i.data}):null;return e("span",{class:"el-cascader-node__label"},[r||i.label])}},render:function(e){var t=this,i=this.inActivePath,n=this.inCheckedPath,r=this.isChecked,o=this.isLeaf,s=this.isDisabled,a=this.config,c=this.nodeId,l=a.expandTrigger,u=a.checkStrictly,d=a.multiple,h=!u&&s,p={on:{}};return"click"===l?p.on.click=this.handleExpand:(p.on.mouseenter=function(e){t.handleExpand(),t.$emit("expand",e)},p.on.focus=function(e){t.handleExpand(),t.$emit("expand",e)}),!o||s||u||d||(p.on.click=this.handleCheckChange),e("li",Ju()([{attrs:{role:"menuitem",id:c,"aria-expanded":i,tabindex:h?null:-1},class:{"el-cascader-node":!0,"is-selectable":u,"in-active-path":i,"in-checked-path":n,"is-active":r,"is-disabled":h}},p]),[this.renderPrefix(e),this.renderContent(e),this.renderPostfix(e)])}},v_=__,E_=a(v_,h_,p_,!1,null,null,null);E_.options.__file="packages/cascader-panel/src/cascader-node.vue";var A_,y_,S_=E_.exports,C_={name:"ElCascaderMenu",mixins:[_.a],inject:["panel"],components:{ElScrollbar:W.a,CascaderNode:S_},props:{nodes:{type:Array,required:!0},index:Number},data:function(){return{activeNode:null,hoverTimer:null,id:Object(v["generateId"])()}},computed:{isEmpty:function(){return!this.nodes.length},menuId:function(){return"cascader-menu-"+this.id+"-"+this.index}},methods:{handleExpand:function(e){this.activeNode=e.target},handleMouseMove:function(e){var t=this.activeNode,i=this.hoverTimer,n=this.$refs.hoverZone;if(t&&n)if(t.contains(e.target)){clearTimeout(i);var r=this.$el.getBoundingClientRect(),o=r.left,s=e.clientX-o,a=this.$el,c=a.offsetWidth,l=a.offsetHeight,u=t.offsetTop,d=u+t.offsetHeight;n.innerHTML='\n          <path style="pointer-events: auto;" fill="transparent" d="M'+s+" "+u+" L"+c+" 0 V"+u+' Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M'+s+" "+d+" L"+c+" "+l+" V"+d+' Z" />\n        '}else i||(this.hoverTimer=setTimeout(this.clearHoverZone,this.panel.config.hoverThreshold))},clearHoverZone:function(){var e=this.$refs.hoverZone;e&&(e.innerHTML="")},renderEmptyText:function(e){return e("div",{class:"el-cascader-menu__empty-text"},[this.t("el.cascader.noData")])},renderNodeList:function(e){var t=this.menuId,i=this.panel.isHoverMenu,n={on:{}};i&&(n.on.expand=this.handleExpand);var r=this.nodes.map((function(i,r){var o=i.hasChildren;return e("cascader-node",Ju()([{key:i.uid,attrs:{node:i,"node-id":t+"-"+r,"aria-haspopup":o,"aria-owns":o?t:null}},n]))}));return[].concat(r,[i?e("svg",{ref:"hoverZone",class:"el-cascader-menu__hover-zone"}):null])}},render:function(e){var t=this.isEmpty,i=this.menuId,n={nativeOn:{}};return this.panel.isHoverMenu&&(n.nativeOn.mousemove=this.handleMouseMove),e("el-scrollbar",Ju()([{attrs:{tag:"ul",role:"menu",id:i,"wrap-class":"el-cascader-menu__wrap","view-class":{"el-cascader-menu__list":!0,"is-empty":t}},class:"el-cascader-menu"},n]),[t?this.renderEmptyText(e):this.renderNodeList(e)])}},b_=C_,T_=a(b_,A_,y_,!1,null,null,null);T_.options.__file="packages/cascader-panel/src/cascader-menu.vue";var I_=T_.exports,R_=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function w_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var O_=0,k_=function(){function e(t,i,n){w_(this,e),this.data=t,this.config=i,this.parent=n||null,this.level=this.parent?this.parent.level+1:1,this.uid=O_++,this.initState(),this.initChildren()}return e.prototype.initState=function(){var e=this.config,t=e.value,i=e.label;this.value=this.data[t],this.label=this.data[i],this.pathNodes=this.calculatePathNodes(),this.path=this.pathNodes.map((function(e){return e.value})),this.pathLabels=this.pathNodes.map((function(e){return e.label})),this.loading=!1,this.loaded=!1},e.prototype.initChildren=function(){var t=this,i=this.config,n=i.children,r=this.data[n];this.hasChildren=Array.isArray(r),this.children=(r||[]).map((function(n){return new e(n,i,t)}))},e.prototype.calculatePathNodes=function(){var e=[this],t=this.parent;while(t)e.unshift(t),t=t.parent;return e},e.prototype.getPath=function(){return this.path},e.prototype.getValue=function(){return this.value},e.prototype.getValueByOption=function(){return this.config.emitPath?this.getPath():this.getValue()},e.prototype.getText=function(e,t){return e?this.pathLabels.join(t):this.label},e.prototype.isSameNode=function(e){var t=this.getValueByOption();return this.config.multiple&&Array.isArray(e)?e.some((function(e){return Object(v["isEqual"])(e,t)})):Object(v["isEqual"])(e,t)},e.prototype.broadcast=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r="onParent"+Object(v["capitalize"])(e);this.children.forEach((function(t){t&&(t.broadcast.apply(t,[e].concat(i)),t[r]&&t[r].apply(t,i))}))},e.prototype.emit=function(e){var t=this.parent,i="onChild"+Object(v["capitalize"])(e);if(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t[i]&&t[i].apply(t,r),t.emit.apply(t,[e].concat(r))}},e.prototype.onParentCheck=function(e){this.isDisabled||this.setCheckState(e)},e.prototype.onChildCheck=function(){var e=this.children,t=e.filter((function(e){return!e.isDisabled})),i=!!t.length&&t.every((function(e){return e.checked}));this.setCheckState(i)},e.prototype.setCheckState=function(e){var t=this.children.length,i=this.children.reduce((function(e,t){var i=t.checked?1:t.indeterminate?.5:0;return e+i}),0);this.checked=e,this.indeterminate=i!==t&&i>0},e.prototype.syncCheckState=function(e){var t=this.getValueByOption(),i=this.isSameNode(e,t);this.doCheck(i)},e.prototype.doCheck=function(e){this.checked!==e&&(this.config.checkStrictly?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check")))},R_(e,[{key:"isDisabled",get:function(){var e=this.data,t=this.parent,i=this.config,n=i.disabled,r=i.checkStrictly;return e[n]||!r&&t&&t.isDisabled}},{key:"isLeaf",get:function(){var e=this.data,t=this.loaded,i=this.hasChildren,n=this.children,r=this.config,o=r.lazy,s=r.leaf;if(o){var a=Object(It["isDef"])(e[s])?e[s]:!!t&&!n.length;return this.hasChildren=!a,a}return!i}}]),e}(),N_=k_;function L_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var P_=function e(t,i){return t.reduce((function(t,n){return n.isLeaf?t.push(n):(!i&&t.push(n),t=t.concat(e(n.children,i))),t}),[])},D_=function(){function e(t,i){L_(this,e),this.config=i,this.initNodes(t)}return e.prototype.initNodes=function(e){var t=this;e=Object(v["coerceTruthyValueToArray"])(e),this.nodes=e.map((function(e){return new N_(e,t.config)})),this.flattedNodes=this.getFlattedNodes(!1,!1),this.leafNodes=this.getFlattedNodes(!0,!1)},e.prototype.appendNode=function(e,t){var i=new N_(e,this.config,t),n=t?t.children:this.nodes;n.push(i)},e.prototype.appendNodes=function(e,t){var i=this;e=Object(v["coerceTruthyValueToArray"])(e),e.forEach((function(e){return i.appendNode(e,t)}))},e.prototype.getNodes=function(){return this.nodes},e.prototype.getFlattedNodes=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e?this.leafNodes:this.flattedNodes;return t?i:P_(this.nodes,e)},e.prototype.getNodeByValue=function(e){var t=this.getFlattedNodes(!1,!this.config.lazy).filter((function(t){return Object(v["valueEquals"])(t.path,e)||t.value===e}));return t&&t.length?t[0]:null},e}(),M_=D_,x_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},B_=Ap.a.keys,U_={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:v["noop"],value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},F_=function(e){return!e.getAttribute("aria-owns")},V_=function(e,t){var i=e.parentNode;if(i){var n=i.querySelectorAll('.el-cascader-node[tabindex="-1"]'),r=Array.prototype.indexOf.call(n,e);return n[r+t]||null}return null},j_=function(e,t){if(e){var i=e.id.split("-");return Number(i[i.length-2])}},G_=function(e){e&&(e.focus(),!F_(e)&&e.click())},H_=function(e){if(e){var t=e.querySelector("input");t?t.click():F_(e)&&e.click()}},Q_={name:"ElCascaderPanel",components:{CascaderMenu:I_},props:{value:{},options:Array,props:Object,border:{type:Boolean,default:!0},renderLabel:Function},provide:function(){return{panel:this}},data:function(){return{checkedValue:null,checkedNodePaths:[],store:[],menus:[],activePath:[],loadCount:0}},computed:{config:function(){return Tt()(x_({},U_),this.props||{})},multiple:function(){return this.config.multiple},checkStrictly:function(){return this.config.checkStrictly},leafOnly:function(){return!this.checkStrictly},isHoverMenu:function(){return"hover"===this.config.expandTrigger},renderLabelFn:function(){return this.renderLabel||this.$scopedSlots.default}},watch:{options:{handler:function(){this.initStore()},immediate:!0,deep:!0},value:function(){this.syncCheckedValue(),this.checkStrictly&&this.calculateCheckedNodePaths()},checkedValue:function(e){Object(v["isEqual"])(e,this.value)||(this.checkStrictly&&this.calculateCheckedNodePaths(),this.$emit("input",e),this.$emit("change",e))}},mounted:function(){this.isEmptyValue(this.value)||this.syncCheckedValue()},methods:{initStore:function(){var e=this.config,t=this.options;e.lazy&&Object(v["isEmpty"])(t)?this.lazyLoad():(this.store=new M_(t,e),this.menus=[this.store.getNodes()],this.syncMenuState())},syncCheckedValue:function(){var e=this.value,t=this.checkedValue;Object(v["isEqual"])(e,t)||(this.activePath=[],this.checkedValue=e,this.syncMenuState())},syncMenuState:function(){var e=this.multiple,t=this.checkStrictly;this.syncActivePath(),e&&this.syncMultiCheckState(),t&&this.calculateCheckedNodePaths(),this.$nextTick(this.scrollIntoView)},syncMultiCheckState:function(){var e=this,t=this.getFlattedNodes(this.leafOnly);t.forEach((function(t){t.syncCheckState(e.checkedValue)}))},isEmptyValue:function(e){var t=this.multiple,i=this.config,n=i.emitPath;return!(!t&&!n)&&Object(v["isEmpty"])(e)},syncActivePath:function(){var e=this,t=this.store,i=this.multiple,n=this.activePath,r=this.checkedValue;if(Object(v["isEmpty"])(n))if(this.isEmptyValue(r))this.activePath=[],this.menus=[t.getNodes()];else{var o=i?r[0]:r,s=this.getNodeByValue(o)||{},a=(s.pathNodes||[]).slice(0,-1);this.expandNodes(a)}else{var c=n.map((function(t){return e.getNodeByValue(t.getValue())}));this.expandNodes(c)}},expandNodes:function(e){var t=this;e.forEach((function(e){return t.handleExpand(e,!0)}))},calculateCheckedNodePaths:function(){var e=this,t=this.checkedValue,i=this.multiple,n=i?Object(v["coerceTruthyValueToArray"])(t):[t];this.checkedNodePaths=n.map((function(t){var i=e.getNodeByValue(t);return i?i.pathNodes:[]}))},handleKeyDown:function(e){var t=e.target,i=e.keyCode;switch(i){case B_.up:var n=V_(t,-1);G_(n);break;case B_.down:var r=V_(t,1);G_(r);break;case B_.left:var o=this.$refs.menu[j_(t)-1];if(o){var s=o.$el.querySelector('.el-cascader-node[aria-expanded="true"]');G_(s)}break;case B_.right:var a=this.$refs.menu[j_(t)+1];if(a){var c=a.$el.querySelector('.el-cascader-node[tabindex="-1"]');G_(c)}break;case B_.enter:H_(t);break;case B_.esc:case B_.tab:this.$emit("close");break;default:return}},handleExpand:function(e,t){var i=this.activePath,n=e.level,r=i.slice(0,n-1),o=this.menus.slice(0,n);if(e.isLeaf||(r.push(e),o.push(e.children)),this.activePath=r,this.menus=o,!t){var s=r.map((function(e){return e.getValue()})),a=i.map((function(e){return e.getValue()}));Object(v["valueEquals"])(s,a)||(this.$emit("active-item-change",s),this.$emit("expand-change",s))}},handleCheckChange:function(e){this.checkedValue=e},lazyLoad:function(e,t){var i=this,n=this.config;e||(e=e||{root:!0,level:0},this.store=new M_([],n),this.menus=[this.store.getNodes()]),e.loading=!0;var r=function(n){var r=e.root?null:e;if(n&&n.length&&i.store.appendNodes(n,r),e.loading=!1,e.loaded=!0,Array.isArray(i.checkedValue)){var o=i.checkedValue[i.loadCount++],s=i.config.value,a=i.config.leaf;if(Array.isArray(n)&&n.filter((function(e){return e[s]===o})).length>0){var c=i.store.getNodeByValue(o);c.data[a]||i.lazyLoad(c,(function(){i.handleExpand(c)})),i.loadCount===i.checkedValue.length&&i.$parent.computePresentText()}}t&&t(n)};n.lazyLoad(e,r)},calculateMultiCheckedValue:function(){this.checkedValue=this.getCheckedNodes(this.leafOnly).map((function(e){return e.getValueByOption()}))},scrollIntoView:function(){if(!this.$isServer){var e=this.$refs.menu||[];e.forEach((function(e){var t=e.$el;if(t){var i=t.querySelector(".el-scrollbar__wrap"),n=t.querySelector(".el-cascader-node.is-active")||t.querySelector(".el-cascader-node.in-active-path");tn()(i,n)}}))}},getNodeByValue:function(e){return this.store.getNodeByValue(e)},getFlattedNodes:function(e){var t=!this.config.lazy;return this.store.getFlattedNodes(e,t)},getCheckedNodes:function(e){var t=this.checkedValue,i=this.multiple;if(i){var n=this.getFlattedNodes(e);return n.filter((function(e){return e.checked}))}return this.isEmptyValue(t)?[]:[this.getNodeByValue(t)]},clearCheckedNodes:function(){var e=this.config,t=this.leafOnly,i=e.multiple,n=e.emitPath;i?(this.getCheckedNodes(t).filter((function(e){return!e.isDisabled})).forEach((function(e){return e.doCheck(!1)})),this.calculateMultiCheckedValue()):this.checkedValue=n?[]:null}}},W_=Q_,q_=a(W_,u_,d_,!1,null,null,null);q_.options.__file="packages/cascader-panel/src/cascader-panel.vue";var $_=q_.exports;$_.install=function(e){e.component($_.name,$_)};var z_,Z_,Y_=$_,K_={name:"ElAvatar",props:{size:{type:[Number,String],validator:function(e){return"string"===typeof e?["large","medium","small"].includes(e):"number"===typeof e}},shape:{type:String,default:"circle",validator:function(e){return["circle","square"].includes(e)}},icon:String,src:String,alt:String,srcSet:String,error:Function,fit:{type:String,default:"cover"}},data:function(){return{isImageExist:!0}},computed:{avatarClass:function(){var e=this.size,t=this.icon,i=this.shape,n=["el-avatar"];return e&&"string"===typeof e&&n.push("el-avatar--"+e),t&&n.push("el-avatar--icon"),i&&n.push("el-avatar--"+i),n.join(" ")}},methods:{handleError:function(){var e=this.error,t=e?e():void 0;!1!==t&&(this.isImageExist=!1)},renderAvatar:function(){var e=this.$createElement,t=this.icon,i=this.src,n=this.alt,r=this.isImageExist,o=this.srcSet,s=this.fit;return r&&i?e("img",{attrs:{src:i,alt:n,srcSet:o},on:{error:this.handleError},style:{"object-fit":s}}):t?e("i",{class:t}):this.$slots.default}},render:function(){var e=arguments[0],t=this.avatarClass,i=this.size,n="number"===typeof i?{height:i+"px",width:i+"px",lineHeight:i+"px"}:{};return e("span",{class:t,style:n},[this.renderAvatar()])}},J_=K_,X_=a(J_,z_,Z_,!1,null,null,null);X_.options.__file="packages/avatar/src/main.vue";var ev=X_.exports;ev.install=function(e){e.component(ev.name,ev)};var tv=ev,iv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"el-drawer-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-drawer__wrapper",attrs:{tabindex:"-1"}},[i("div",{staticClass:"el-drawer__container",class:e.visible&&"el-drawer__open",attrs:{role:"document",tabindex:"-1"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[i("div",{ref:"drawer",staticClass:"el-drawer",class:[e.direction,e.customClass],style:e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize,attrs:{"aria-modal":"true","aria-labelledby":"el-drawer__title","aria-label":e.title,role:"dialog",tabindex:"-1"}},[e.withHeader?i("header",{staticClass:"el-drawer__header",attrs:{id:"el-drawer__title"}},[e._t("title",[i("span",{attrs:{role:"heading",title:e.title}},[e._v(e._s(e.title))])]),e.showClose?i("button",{staticClass:"el-drawer__close-btn",attrs:{"aria-label":"close "+(e.title||"drawer"),type:"button"},on:{click:e.closeDrawer}},[i("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2):e._e(),e.rendered?i("section",{staticClass:"el-drawer__body"},[e._t("default")],2):e._e()])])])])},nv=[];iv._withStripped=!0;var rv={name:"ElDrawer",mixins:[b.a,w.a],props:{appendToBody:{type:Boolean,default:!1},beforeClose:{type:Function},customClass:{type:String,default:""},closeOnPressEscape:{type:Boolean,default:!0},destroyOnClose:{type:Boolean,default:!1},modal:{type:Boolean,default:!0},direction:{type:String,default:"rtl",validator:function(e){return-1!==["ltr","rtl","ttb","btt"].indexOf(e)}},modalAppendToBody:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},size:{type:[Number,String],default:"30%"},title:{type:String,default:""},visible:{type:Boolean},wrapperClosable:{type:Boolean,default:!0},withHeader:{type:Boolean,default:!0}},computed:{isHorizontal:function(){return"rtl"===this.direction||"ltr"===this.direction},drawerSize:function(){return"number"===typeof this.size?this.size+"px":this.size}},data:function(){return{closed:!1,prevActiveElement:null}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.appendToBody&&document.body.appendChild(this.$el),this.prevActiveElement=document.activeElement):(this.closed||(this.$emit("close"),!0===this.destroyOnClose&&(this.rendered=!1)),this.$nextTick((function(){t.prevActiveElement&&t.prevActiveElement.focus()})))}},methods:{afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),!0===this.destroyOnClose&&(this.rendered=!1),this.closed=!0)},handleWrapperClick:function(){this.wrapperClosable&&this.closeDrawer()},closeDrawer:function(){"function"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},handleClose:function(){this.closeDrawer()}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},ov=rv,sv=a(ov,iv,nv,!1,null,null,null);sv.options.__file="packages/drawer/src/main.vue";var av=sv.exports;av.install=function(e){e.component(av.name,av)};var cv=av,lv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-popover",e._b({attrs:{trigger:"click"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},"el-popover",e.$attrs,!1),[i("div",{staticClass:"el-popconfirm"},[i("p",{staticClass:"el-popconfirm__main"},[e.hideIcon?e._e():i("i",{staticClass:"el-popconfirm__icon",class:e.icon,style:{color:e.iconColor}}),e._v("\n      "+e._s(e.title)+"\n    ")]),i("div",{staticClass:"el-popconfirm__action"},[i("el-button",{attrs:{size:"mini",type:e.cancelButtonType},on:{click:e.cancel}},[e._v("\n        "+e._s(e.displayCancelButtonText)+"\n      ")]),i("el-button",{attrs:{size:"mini",type:e.confirmButtonType},on:{click:e.confirm}},[e._v("\n        "+e._s(e.displayConfirmButtonText)+"\n      ")])],1)]),e._t("reference",null,{slot:"reference"})],2)},uv=[];lv._withStripped=!0;var dv=i(44),hv=i.n(dv),pv={name:"ElPopconfirm",props:{title:{type:String},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonType:{type:String,default:"primary"},cancelButtonType:{type:String,default:"text"},icon:{type:String,default:"el-icon-question"},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1}},components:{ElPopover:hv.a,ElButton:se.a},data:function(){return{visible:!1}},computed:{displayConfirmButtonText:function(){return this.confirmButtonText||Object(fa["t"])("el.popconfirm.confirmButtonText")},displayCancelButtonText:function(){return this.cancelButtonText||Object(fa["t"])("el.popconfirm.cancelButtonText")}},methods:{confirm:function(){this.visible=!1,this.$emit("confirm")},cancel:function(){this.visible=!1,this.$emit("cancel")}}},fv=pv,gv=a(fv,lv,uv,!1,null,null,null);gv.options.__file="packages/popconfirm/src/main.vue";var mv=gv.exports;mv.install=function(e){e.component(mv.name,mv)};var _v=mv,vv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.uiLoading?[i("div",e._b({class:["el-skeleton",e.animated?"is-animated":""]},"div",e.$attrs,!1),[e._l(e.count,(function(t){return[e.loading?e._t("template",e._l(e.rows,(function(n){return i("el-skeleton-item",{key:t+"-"+n,class:{"el-skeleton__paragraph":1!==n,"is-first":1===n,"is-last":n===e.rows&&e.rows>1},attrs:{variant:"p"}})}))):e._e()]}))],2)]:[e._t("default",null,null,e.$attrs)]],2)},Ev=[];vv._withStripped=!0;var Av={name:"ElSkeleton",props:{animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:4},loading:{type:Boolean,default:!0},throttle:{type:Number,default:0}},watch:{loading:{handler:function(e){var t=this;this.throttle<=0?this.uiLoading=e:e?(clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout((function(){t.uiLoading=t.loading}),this.throttle)):this.uiLoading=e},immediate:!0}},data:function(){return{uiLoading:this.throttle<=0&&this.loading}}},yv=Av,Sv=a(yv,vv,Ev,!1,null,null,null);Sv.options.__file="packages/skeleton/src/index.vue";var Cv=Sv.exports;Cv.install=function(e){e.component(Cv.name,Cv)};var bv=Cv,Tv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["el-skeleton__item","el-skeleton__"+e.variant]},["image"===e.variant?i("img-placeholder"):e._e()],1)},Iv=[];Tv._withStripped=!0;var Rv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M64 896V128h896v768H64z m64-128l192-192 116.352 116.352L640 448l256 307.2V192H128v576z m224-480a96 96 0 1 1-0.064 192.064A96 96 0 0 1 352 288z"}})])},wv=[];Rv._withStripped=!0;var Ov={name:"ImgPlaceholder"},kv=Ov,Nv=a(kv,Rv,wv,!1,null,null,null);Nv.options.__file="packages/skeleton/src/img-placeholder.vue";var Lv,Pv=Nv.exports,Dv={name:"ElSkeletonItem",props:{variant:{type:String,default:"text"}},components:(Lv={},Lv[Pv.name]=Pv,Lv)},Mv=Dv,xv=a(Mv,Tv,Iv,!1,null,null,null);xv.options.__file="packages/skeleton/src/item.vue";var Bv=xv.exports;Bv.install=function(e){e.component(Bv.name,Bv)};var Uv=Bv,Fv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-empty"},[i("div",{staticClass:"el-empty__image",style:e.imageStyle},[e.image?i("img",{attrs:{src:e.image,ondragstart:"return false"}}):e._t("image",[i("img-empty")])],2),i("div",{staticClass:"el-empty__description"},[e.$slots.description?e._t("description"):i("p",[e._v(e._s(e.emptyDescription))])],2),e.$slots.default?i("div",{staticClass:"el-empty__bottom"},[e._t("default")],2):e._e()])},Vv=[];Fv._withStripped=!0;var jv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("defs",[i("linearGradient",{attrs:{id:"linearGradient-1-"+e.id,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"}},[i("stop",{attrs:{"stop-color":"#FCFCFD",offset:"0%"}}),i("stop",{attrs:{"stop-color":"#EEEFF3",offset:"100%"}})],1),i("linearGradient",{attrs:{id:"linearGradient-2-"+e.id,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"}},[i("stop",{attrs:{"stop-color":"#FCFCFD",offset:"0%"}}),i("stop",{attrs:{"stop-color":"#E9EBEF",offset:"100%"}})],1),i("rect",{attrs:{id:"path-3-"+e.id,x:"0",y:"0",width:"17",height:"36"}})],1),i("g",{attrs:{id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[i("g",{attrs:{id:"B-type",transform:"translate(-1268.000000, -535.000000)"}},[i("g",{attrs:{id:"Group-2",transform:"translate(1268.000000, 535.000000)"}},[i("path",{attrs:{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:"#F7F8FC"}}),i("polygon",{attrs:{id:"Rectangle-Copy-14",fill:"#E5E7E9",transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"}}),i("g",{attrs:{id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"}},[i("polygon",{attrs:{id:"Rectangle-Copy-10",fill:"#E5E7E9",transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"}}),i("polygon",{attrs:{id:"Rectangle-Copy-11",fill:"#EDEEF2",points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"}}),i("rect",{attrs:{id:"Rectangle-Copy-12",fill:"url(#linearGradient-1-"+e.id+")",transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"}}),i("polygon",{attrs:{id:"Rectangle-Copy-13",fill:"#F8F9FB",transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"}})]),i("rect",{attrs:{id:"Rectangle-Copy-15",fill:"url(#linearGradient-2-"+e.id+")",x:"13",y:"45",width:"40",height:"36"}}),i("g",{attrs:{id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"}},[i("mask",{attrs:{id:"mask-4-"+e.id,fill:"white"}},[i("use",{attrs:{"xlink:href":"#path-3-"+e.id}})]),i("use",{attrs:{id:"Mask",fill:"#E0E3E9",transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":"#path-3-"+e.id}}),i("polygon",{attrs:{id:"Rectangle-Copy",fill:"#D5D7DE",mask:"url(#mask-4-"+e.id+")",transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 -1.70530257e-13 16"}})]),i("polygon",{attrs:{id:"Rectangle-Copy-18",fill:"#F8F9FB",transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"}})])])])])},Gv=[];jv._withStripped=!0;var Hv=0,Qv={name:"ImgEmpty",data:function(){return{id:++Hv}}},Wv=Qv,qv=a(Wv,jv,Gv,!1,null,null,null);qv.options.__file="packages/empty/src/img-empty.vue";var $v,zv=qv.exports,Zv={name:"ElEmpty",components:($v={},$v[zv.name]=zv,$v),props:{image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}},computed:{emptyDescription:function(){return this.description||Object(fa["t"])("el.empty.description")},imageStyle:function(){return{width:this.imageSize?this.imageSize+"px":""}}}},Yv=Zv,Kv=a(Yv,Fv,Vv,!1,null,null,null);Kv.options.__file="packages/empty/src/index.vue";var Jv=Kv.exports;Jv.install=function(e){e.component(Jv.name,Jv)};var Xv,eE=Jv,tE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},iE={name:"ElDescriptionsRow",props:{row:{type:Array}},inject:["elDescriptions"],render:function(e){var t=this.elDescriptions,i=(this.row||[]).map((function(e){return tE({},e,{label:e.slots.label||e.props.label},["labelClassName","contentClassName","labelStyle","contentStyle"].reduce((function(i,n){return i[n]=e.props[n]||t[n],i}),{}))}));return"vertical"===t.direction?e("tbody",[e("tr",{class:"el-descriptions-row"},[i.map((function(i){var n;return e("th",{class:(n={"el-descriptions-item__cell":!0,"el-descriptions-item__label":!0,"has-colon":!t.border&&t.colon,"is-bordered-label":t.border},n[i.labelClassName]=!0,n),style:i.labelStyle,attrs:{colSpan:i.props.span}},[i.label])}))]),e("tr",{class:"el-descriptions-row"},[i.map((function(t){return e("td",{class:["el-descriptions-item__cell","el-descriptions-item__content",t.contentClassName],style:t.contentStyle,attrs:{colSpan:t.props.span}},[t.slots.default])}))])]):t.border?e("tbody",[e("tr",{class:"el-descriptions-row"},[i.map((function(i){var n;return[e("th",{class:(n={"el-descriptions-item__cell":!0,"el-descriptions-item__label":!0,"is-bordered-label":t.border},n[i.labelClassName]=!0,n),style:i.labelStyle,attrs:{colSpan:"1"}},[i.label]),e("td",{class:["el-descriptions-item__cell","el-descriptions-item__content",i.contentClassName],style:i.contentStyle,attrs:{colSpan:2*i.props.span-1}},[i.slots.default])]}))])]):e("tbody",[e("tr",{class:"el-descriptions-row"},[i.map((function(i){var n;return e("td",{class:"el-descriptions-item el-descriptions-item__cell",attrs:{colSpan:i.props.span}},[e("div",{class:"el-descriptions-item__container"},[e("span",{class:(n={"el-descriptions-item__label":!0,"has-colon":t.colon},n[i.labelClassName]=!0,n),style:i.labelStyle},[i.props.label]),e("span",{class:["el-descriptions-item__content",i.contentClassName],style:i.contentStyle},[i.slots.default])])])}))])])}},nE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},rE={name:"ElDescriptions",components:(Xv={},Xv[iE.name]=iE,Xv),props:{border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,default:"horizontal"},size:{type:String},title:{type:String,default:""},extra:{type:String,default:""},labelStyle:{type:Object},contentStyle:{type:Object},labelClassName:{type:String,default:""},contentClassName:{type:String,default:""},colon:{type:Boolean,default:!0}},computed:{descriptionsSize:function(){return this.size||(this.$ELEMENT||{}).size}},provide:function(){return{elDescriptions:this}},methods:{getOptionProps:function(e){if(e.componentOptions){var t=e.componentOptions,i=t.propsData,n=void 0===i?{}:i,r=t.Ctor,o=void 0===r?{}:r,s=(o.options||{}).props||{},a={};for(var c in s){var l=s[c],u=l.default;void 0!==u&&(a[c]=Object(Hd["isFunction"])(u)?u.call(e):u)}return nE({},a,n)}return{}},getSlots:function(e){var t=this,i=e.componentOptions||{},n=e.children||i.children||[],r={};return n.forEach((function(e){if(!t.isEmptyElement(e)){var i=e.data&&e.data.slot||"default";r[i]=r[i]||[],"template"===e.tag?r[i].push(e.children):r[i].push(e)}})),nE({},r)},isEmptyElement:function(e){return!(e.tag||e.text&&""!==e.text.trim())},filledNode:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.props||(e.props={}),t>i&&(e.props.span=i),n&&(e.props.span=i),e},getRows:function(){var e=this,t=(this.$slots.default||[]).filter((function(e){return e.tag&&e.componentOptions&&"ElDescriptionsItem"===e.componentOptions.Ctor.options.name})),i=t.map((function(t){return{props:e.getOptionProps(t),slots:e.getSlots(t),vnode:t}})),n=[],r=[],o=this.column;return i.forEach((function(i,s){var a=i.props.span||1;if(s===t.length-1)return r.push(e.filledNode(i,a,o,!0)),void n.push(r);a<o?(o-=a,r.push(i)):(r.push(e.filledNode(i,a,o)),n.push(r),o=e.column,r=[])})),n}},render:function(){var e=arguments[0],t=this.title,i=this.extra,n=this.border,r=this.descriptionsSize,o=this.$slots,s=this.getRows();return e("div",{class:"el-descriptions"},[t||i||o.title||o.extra?e("div",{class:"el-descriptions__header"},[e("div",{class:"el-descriptions__title"},[o.title?o.title:t]),e("div",{class:"el-descriptions__extra"},[o.extra?o.extra:i])]):null,e("div",{class:"el-descriptions__body"},[e("table",{class:["el-descriptions__table",{"is-bordered":n},r?"el-descriptions--"+r:""]},[s.map((function(t){return e(iE,{attrs:{row:t}})}))])])])},install:function(e){e.component(rE.name,rE)}},oE=rE,sE={name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},contentClassName:{type:String,default:""},contentStyle:{type:Object},labelClassName:{type:String,default:""},labelStyle:{type:Object}},render:function(){return null},install:function(e){e.component(sE.name,sE)}},aE=sE,cE=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-result"},[i("div",{staticClass:"el-result__icon"},[e._t("icon",[i(e.iconElement,{tag:"component",class:e.iconElement})])],2),e.title||e.$slots.title?i("div",{staticClass:"el-result__title"},[e._t("title",[i("p",[e._v(e._s(e.title))])])],2):e._e(),e.subTitle||e.$slots.subTitle?i("div",{staticClass:"el-result__subtitle"},[e._t("subTitle",[i("p",[e._v(e._s(e.subTitle))])])],2):e._e(),e.$slots.extra?i("div",{staticClass:"el-result__extra"},[e._t("extra")],2):e._e()])},lE=[];cE._withStripped=!0;var uE=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M34.5548098,16.4485711 C33.9612228,15.8504763 32.9988282,15.8504763 32.4052412,16.4485711 L32.4052412,16.4485711 L21.413757,27.5805811 L21.413757,27.5805811 L21.4034642,27.590855 C21.0097542,27.9781674 20.3766105,27.9729811 19.9892981,27.5792711 L19.9892981,27.5792711 L15.5947588,23.1121428 C15.0011718,22.514048 14.0387772,22.514048 13.4451902,23.1121428 C12.8516033,23.7102376 12.8516033,24.6799409 13.4451902,25.2780357 L13.4451902,25.2780357 L19.6260786,31.5514289 C20.2196656,32.1495237 21.1820602,32.1495237 21.7756472,31.5514289 L21.7756472,31.5514289 L34.5548098,18.614464 C35.1483967,18.0163692 35.1483967,17.0466659 34.5548098,16.4485711 Z"}})])},dE=[];uE._withStripped=!0;var hE={name:"IconSuccess"},pE=hE,fE=a(pE,uE,dE,!1,null,null,null);fE.options.__file="packages/result/src/icon-success.vue";var gE=fE.exports,mE=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M32.57818,15.42182 C32.0157534,14.8593933 31.1038797,14.8593933 30.541453,15.42182 L30.541453,15.42182 L24.0006789,21.9625941 L17.458547,15.42182 C16.8961203,14.8593933 15.9842466,14.8593933 15.42182,15.42182 C14.8593933,15.9842466 14.8593933,16.8961203 15.42182,17.458547 L15.42182,17.458547 L21.9639519,23.9993211 L15.42182,30.541453 C14.8593933,31.1038797 14.8593933,32.0157534 15.42182,32.57818 C15.9842466,33.1406067 16.8961203,33.1406067 17.458547,32.57818 L17.458547,32.57818 L24.0006789,26.0360481 L30.541453,32.57818 C31.1038797,33.1406067 32.0157534,33.1406067 32.57818,32.57818 C33.1406067,32.0157534 33.1406067,31.1038797 32.57818,30.541453 L32.57818,30.541453 L26.0374059,23.9993211 L32.57818,17.458547 C33.1406067,16.8961203 33.1406067,15.9842466 32.57818,15.42182 Z"}})])},_E=[];mE._withStripped=!0;var vE={name:"IconError"},EE=vE,AE=a(EE,mE,_E,!1,null,null,null);AE.options.__file="packages/result/src/icon-error.vue";var yE=AE.exports,SE=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M24,31 C22.8954305,31 22,31.8954305 22,33 C22,34.1045695 22.8954305,35 24,35 C25.1045695,35 26,34.1045695 26,33 C26,31.8954305 25.1045695,31 24,31 Z M24,14 C23.1715729,14 22.5,14.6715729 22.5,15.5 L22.5,15.5 L22.5,27.5 C22.5,28.3284271 23.1715729,29 24,29 C24.8284271,29 25.5,28.3284271 25.5,27.5 L25.5,27.5 L25.5,15.5 C25.5,14.6715729 24.8284271,14 24,14 Z"}})])},CE=[];SE._withStripped=!0;var bE={name:"IconWarning"},TE=bE,IE=a(TE,SE,CE,!1,null,null,null);IE.options.__file="packages/result/src/icon-warning.vue";var RE=IE.exports,wE=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M24,19 L21,19 C20.1715729,19 19.5,19.6715729 19.5,20.5 C19.5,21.3284271 20.1715729,22 21,22 L21,22 L22.5,22 L22.5,31 L21,31 C20.1715729,31 19.5,31.6715729 19.5,32.5 C19.5,33.3284271 20.1715729,34 21,34 L21,34 L27,34 C27.8284271,34 28.5,33.3284271 28.5,32.5 C28.5,31.6715729 27.8284271,31 27,31 L27,31 L25.5,31 L25.5,20.5 C25.5,19.6715729 24.8284271,19 24,19 L24,19 Z M24,13 C22.8954305,13 22,13.8954305 22,15 C22,16.1045695 22.8954305,17 24,17 C25.1045695,17 26,16.1045695 26,15 C26,13.8954305 25.1045695,13 24,13 Z"}})])},OE=[];wE._withStripped=!0;var kE={name:"IconInfo"},NE=kE,LE=a(NE,wE,OE,!1,null,null,null);LE.options.__file="packages/result/src/icon-info.vue";var PE,DE=LE.exports,ME={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},xE={name:"ElResult",components:(PE={},PE[gE.name]=gE,PE[yE.name]=yE,PE[RE.name]=RE,PE[DE.name]=DE,PE),props:{title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,default:"info"}},computed:{iconElement:function(){var e=this.icon;return e&&ME[e]?ME[e]:"icon-info"}}},BE=xE,UE=a(BE,cE,lE,!1,null,null,null);UE.options.__file="packages/result/src/index.vue";var FE=UE.exports;FE.install=function(e){e.component(FE.name,FE)};var VE=FE,jE=[A,P,re,pe,Ae,Re,We,et,lt,mt,Nt,Ft,qt,ei,ai,fi,yi,wi,Mi,cn,ln,mn,Cn,kn,$r,to,Os,js,ea,la,da,Ha,Ya,nc,vc,Fc,zc,Xc,wl,xl,hu,Bu,Fu,Gu,yd,wd,Md,rh,dh,vh,Th,Lh,jh,qh,ep,ap,fp,Op,kf,Hf,Yf,ng,ug,_g,Ig,Ng,Ug,Wg,Jg,_m,Mm,Qm,l_,Y_,tv,cv,_v,bv,Uv,eE,oE,aE,VE,$e.a],GE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ga.a.use(t.locale),ga.a.i18n(t.i18n),jE.forEach((function(t){e.component(t.name,t)})),e.use(i_),e.use(ku.directive),e.prototype.$ELEMENT={size:t.size||"",zIndex:t.zIndex||2e3},e.prototype.$loading=ku.service,e.prototype.$msgbox=xa,e.prototype.$alert=xa.alert,e.prototype.$confirm=xa.confirm,e.prototype.$prompt=xa.prompt,e.prototype.$notify=Yl,e.prototype.$message=Kd};"undefined"!==typeof window&&window.Vue&&GE(window.Vue);t["default"]={version:"2.15.6",locale:ga.a.use,i18n:ga.a.i18n,install:GE,CollapseTransition:$e.a,Loading:ku,Pagination:A,Dialog:P,Autocomplete:re,Dropdown:pe,DropdownMenu:Ae,DropdownItem:Re,Menu:We,Submenu:et,MenuItem:lt,MenuItemGroup:mt,Input:Nt,InputNumber:Ft,Radio:qt,RadioGroup:ei,RadioButton:ai,Checkbox:fi,CheckboxButton:yi,CheckboxGroup:wi,Switch:Mi,Select:cn,Option:ln,OptionGroup:mn,Button:Cn,ButtonGroup:kn,Table:$r,TableColumn:to,DatePicker:Os,TimeSelect:js,TimePicker:ea,Popover:la,Tooltip:da,MessageBox:xa,Breadcrumb:Ha,BreadcrumbItem:Ya,Form:nc,FormItem:vc,Tabs:Fc,TabPane:zc,Tag:Xc,Tree:wl,Alert:xl,Notification:Yl,Slider:hu,Icon:Bu,Row:Fu,Col:Gu,Upload:yd,Progress:wd,Spinner:Md,Message:Kd,Badge:rh,Card:dh,Rate:vh,Steps:Th,Step:Lh,Carousel:jh,Scrollbar:qh,CarouselItem:ep,Collapse:ap,CollapseItem:fp,Cascader:Op,ColorPicker:kf,Transfer:Hf,Container:Yf,Header:ng,Aside:ug,Main:_g,Footer:Ig,Timeline:Ng,TimelineItem:Ug,Link:Wg,Divider:Jg,Image:_m,Calendar:Mm,Backtop:Qm,InfiniteScroll:i_,PageHeader:l_,CascaderPanel:Y_,Avatar:tv,Drawer:cv,Popconfirm:_v,Skeleton:bv,SkeletonItem:Uv,Empty:eE,Descriptions:oE,DescriptionsItem:aE,Result:VE}}])["default"]},"5cc6":function(e,t,i){var n=i("74e8");n("Uint8",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},"5cce":function(e,t){e.exports={version:"0.24.0"}},"5e77":function(e,t,i){var n=i("83ab"),r=i("1a2d"),o=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=r(o,"name"),c=a&&"something"===function(){}.name,l=a&&(!n||n&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},"5f02":function(e,t,i){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},"5f96":function(e,t,i){"use strict";var n=i("ebb5"),r=i("e330"),o=n.aTypedArray,s=n.exportTypedArrayMethod,a=r([].join);s("join",(function(e){return a(o(this),e)}))},"5fb2":function(e,t,i){"use strict";var n=i("da84"),r=i("e330"),o=2147483647,s=36,a=1,c=26,l=38,u=700,d=72,h=128,p="-",f=/[^\0-\u007E]/,g=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",_=s-a,v=n.RangeError,E=r(g.exec),A=Math.floor,y=String.fromCharCode,S=r("".charCodeAt),C=r([].join),b=r([].push),T=r("".replace),I=r("".split),R=r("".toLowerCase),w=function(e){var t=[],i=0,n=e.length;while(i<n){var r=S(e,i++);if(r>=55296&&r<=56319&&i<n){var o=S(e,i++);56320==(64512&o)?b(t,((1023&r)<<10)+(1023&o)+65536):(b(t,r),i--)}else b(t,r)}return t},O=function(e){return e+22+75*(e<26)},k=function(e,t,i){var n=0;e=i?A(e/u):e>>1,e+=A(e/t);while(e>_*c>>1)e=A(e/_),n+=s;return A(n+(_+1)*e/(e+l))},N=function(e){var t=[];e=w(e);var i,n,r=e.length,l=h,u=0,f=d;for(i=0;i<e.length;i++)n=e[i],n<128&&b(t,y(n));var g=t.length,_=g;g&&b(t,p);while(_<r){var E=o;for(i=0;i<e.length;i++)n=e[i],n>=l&&n<E&&(E=n);var S=_+1;if(E-l>A((o-u)/S))throw v(m);for(u+=(E-l)*S,l=E,i=0;i<e.length;i++){if(n=e[i],n<l&&++u>o)throw v(m);if(n==l){var T=u,I=s;while(1){var R=I<=f?a:I>=f+c?c:I-f;if(T<R)break;var N=T-R,L=s-R;b(t,y(O(R+N%L))),T=A(N/L),I+=s}b(t,y(O(T))),f=k(u,S,_==g),u=0,_++}}u++,l++}return C(t,"")};e.exports=function(e){var t,i,n=[],r=I(T(R(e),g,"."),".");for(t=0;t<r.length;t++)i=r[t],b(n,E(f,i)?"xn--"+N(i):i);return C(n,".")}},"605d":function(e,t,i){var n=i("c6b6"),r=i("da84");e.exports="process"==n(r.process)},6069:function(e,t){e.exports="object"==typeof window},"60bd":function(e,t,i){"use strict";var n=i("da84"),r=i("d039"),o=i("e330"),s=i("ebb5"),a=i("e260"),c=i("b622"),l=c("iterator"),u=n.Uint8Array,d=o(a.values),h=o(a.keys),p=o(a.entries),f=s.aTypedArray,g=s.exportTypedArrayMethod,m=u&&u.prototype,_=!r((function(){m[l].call([1])})),v=!!m&&m.values&&m[l]===m.values&&"values"===m.values.name,E=function(){return d(f(this))};g("entries",(function(){return p(f(this))}),_),g("keys",(function(){return h(f(this))}),_),g("values",E,_||!v,{name:"values"}),g(l,E,_||!v,{name:"values"})},"60da":function(e,t,i){"use strict";var n=i("83ab"),r=i("e330"),o=i("c65b"),s=i("d039"),a=i("df75"),c=i("7418"),l=i("d1e7"),u=i("7b0b"),d=i("44ad"),h=Object.assign,p=Object.defineProperty,f=r([].concat);e.exports=!h||s((function(){if(n&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},i=Symbol(),r="abcdefghijklmnopqrst";return e[i]=7,r.split("").forEach((function(e){t[e]=e})),7!=h({},e)[i]||a(h({},t)).join("")!=r}))?function(e,t){var i=u(e),r=arguments.length,s=1,h=c.f,p=l.f;while(r>s){var g,m=d(arguments[s++]),_=h?f(a(m),h(m)):a(m),v=_.length,E=0;while(v>E)g=_[E++],n&&!o(p,m,g)||(i[g]=m[g])}return i}:h},6167:function(e,t,i){"use strict";var n,r;"function"===typeof Symbol&&Symbol.iterator;(function(o,s){n=s,r="function"===typeof n?n.call(t,i,t,e):n,void 0===r||(e.exports=r)})(0,(function(){var e=window,t={placement:"bottom",gpuAcceleration:!0,offset:0,boundariesElement:"viewport",boundariesPadding:5,preventOverflowOrder:["left","right","top","bottom"],flipBehavior:"flip",arrowElement:"[x-arrow]",arrowOffset:0,modifiers:["shift","offset","preventOverflow","keepTogether","arrow","flip","applyStyle"],modifiersIgnored:[],forceAbsolute:!1};function i(e,i,n){this._reference=e.jquery?e[0]:e,this.state={};var r="undefined"===typeof i||null===i,o=i&&"[object Object]"===Object.prototype.toString.call(i);return this._popper=r||o?this.parse(o?i:{}):i.jquery?i[0]:i,this._options=Object.assign({},t,n),this._options.modifiers=this._options.modifiers.map(function(e){if(-1===this._options.modifiersIgnored.indexOf(e))return"applyStyle"===e&&this._popper.setAttribute("x-placement",this._options.placement),this.modifiers[e]||e}.bind(this)),this.state.position=this._getPosition(this._popper,this._reference),d(this._popper,{position:this.state.position,top:0}),this.update(),this._setupEventListeners(),this}function n(t){var i=t.style.display,n=t.style.visibility;t.style.display="block",t.style.visibility="hidden";t.offsetWidth;var r=e.getComputedStyle(t),o=parseFloat(r.marginTop)+parseFloat(r.marginBottom),s=parseFloat(r.marginLeft)+parseFloat(r.marginRight),a={width:t.offsetWidth+s,height:t.offsetHeight+o};return t.style.display=i,t.style.visibility=n,a}function r(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function o(e){var t=Object.assign({},e);return t.right=t.left+t.width,t.bottom=t.top+t.height,t}function s(e,t){var i,n=0;for(i in e){if(e[i]===t)return n;n++}return null}function a(t,i){var n=e.getComputedStyle(t,null);return n[i]}function c(t){var i=t.offsetParent;return i!==e.document.body&&i?i:e.document.documentElement}function l(t){var i=t.parentNode;return i?i===e.document?e.document.body.scrollTop||e.document.body.scrollLeft?e.document.body:e.document.documentElement:-1!==["scroll","auto"].indexOf(a(i,"overflow"))||-1!==["scroll","auto"].indexOf(a(i,"overflow-x"))||-1!==["scroll","auto"].indexOf(a(i,"overflow-y"))?i:l(t.parentNode):t}function u(t){return t!==e.document.body&&("fixed"===a(t,"position")||(t.parentNode?u(t.parentNode):t))}function d(e,t){function i(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}Object.keys(t).forEach((function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&i(t[n])&&(r="px"),e.style[n]=t[n]+r}))}function h(e){var t={};return e&&"[object Function]"===t.toString.call(e)}function p(e){var t={width:e.offsetWidth,height:e.offsetHeight,left:e.offsetLeft,top:e.offsetTop};return t.right=t.left+t.width,t.bottom=t.top+t.height,t}function f(e){var t=e.getBoundingClientRect(),i=-1!=navigator.userAgent.indexOf("MSIE"),n=i&&"HTML"===e.tagName?-e.scrollTop:t.top;return{left:t.left,top:n,right:t.right,bottom:t.bottom,width:t.right-t.left,height:t.bottom-n}}function g(e,t,i){var n=f(e),r=f(t);if(i){var o=l(t);r.top+=o.scrollTop,r.bottom+=o.scrollTop,r.left+=o.scrollLeft,r.right+=o.scrollLeft}var s={top:n.top-r.top,left:n.left-r.left,bottom:n.top-r.top+n.height,right:n.left-r.left+n.width,width:n.width,height:n.height};return s}function m(t){for(var i=["","ms","webkit","moz","o"],n=0;n<i.length;n++){var r=i[n]?i[n]+t.charAt(0).toUpperCase()+t.slice(1):t;if("undefined"!==typeof e.document.body.style[r])return r}return null}return i.prototype.destroy=function(){return this._popper.removeAttribute("x-placement"),this._popper.style.left="",this._popper.style.position="",this._popper.style.top="",this._popper.style[m("transform")]="",this._removeEventListeners(),this._options.removeOnDestroy&&this._popper.remove(),this},i.prototype.update=function(){var e={instance:this,styles:{}};e.placement=this._options.placement,e._originalPlacement=this._options.placement,e.offsets=this._getOffsets(this._popper,this._reference,e.placement),e.boundaries=this._getBoundaries(e,this._options.boundariesPadding,this._options.boundariesElement),e=this.runModifiers(e,this._options.modifiers),"function"===typeof this.state.updateCallback&&this.state.updateCallback(e)},i.prototype.onCreate=function(e){return e(this),this},i.prototype.onUpdate=function(e){return this.state.updateCallback=e,this},i.prototype.parse=function(t){var i={tagName:"div",classNames:["popper"],attributes:[],parent:e.document.body,content:"",contentType:"text",arrowTagName:"div",arrowClassNames:["popper__arrow"],arrowAttributes:["x-arrow"]};t=Object.assign({},i,t);var n=e.document,r=n.createElement(t.tagName);if(a(r,t.classNames),c(r,t.attributes),"node"===t.contentType?r.appendChild(t.content.jquery?t.content[0]:t.content):"html"===t.contentType?r.innerHTML=t.content:r.textContent=t.content,t.arrowTagName){var o=n.createElement(t.arrowTagName);a(o,t.arrowClassNames),c(o,t.arrowAttributes),r.appendChild(o)}var s=t.parent.jquery?t.parent[0]:t.parent;if("string"===typeof s){if(s=n.querySelectorAll(t.parent),s.length>1&&console.warn("WARNING: the given `parent` query("+t.parent+") matched more than one element, the first one will be used"),0===s.length)throw"ERROR: the given `parent` doesn't exists!";s=s[0]}return s.length>1&&s instanceof Element===!1&&(console.warn("WARNING: you have passed as parent a list of elements, the first one will be used"),s=s[0]),s.appendChild(r),r;function a(e,t){t.forEach((function(t){e.classList.add(t)}))}function c(e,t){t.forEach((function(t){e.setAttribute(t.split(":")[0],t.split(":")[1]||"")}))}},i.prototype._getPosition=function(e,t){var i=c(t);if(this._options.forceAbsolute)return"absolute";var n=u(t,i);return n?"fixed":"absolute"},i.prototype._getOffsets=function(e,t,i){i=i.split("-")[0];var r={};r.position=this.state.position;var o="fixed"===r.position,s=g(t,c(e),o),a=n(e);return-1!==["right","left"].indexOf(i)?(r.top=s.top+s.height/2-a.height/2,r.left="left"===i?s.left-a.width:s.right):(r.left=s.left+s.width/2-a.width/2,r.top="top"===i?s.top-a.height:s.bottom),r.width=a.width,r.height=a.height,{popper:r,reference:s}},i.prototype._setupEventListeners=function(){if(this.state.updateBound=this.update.bind(this),e.addEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var t=l(this._reference);t!==e.document.body&&t!==e.document.documentElement||(t=e),t.addEventListener("scroll",this.state.updateBound),this.state.scrollTarget=t}},i.prototype._removeEventListeners=function(){e.removeEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement&&this.state.scrollTarget&&(this.state.scrollTarget.removeEventListener("scroll",this.state.updateBound),this.state.scrollTarget=null),this.state.updateBound=null},i.prototype._getBoundaries=function(t,i,n){var r,o,s={};if("window"===n){var a=e.document.body,u=e.document.documentElement;o=Math.max(a.scrollHeight,a.offsetHeight,u.clientHeight,u.scrollHeight,u.offsetHeight),r=Math.max(a.scrollWidth,a.offsetWidth,u.clientWidth,u.scrollWidth,u.offsetWidth),s={top:0,right:r,bottom:o,left:0}}else if("viewport"===n){var d=c(this._popper),h=l(this._popper),f=p(d),g=function(e){return e==document.body?Math.max(document.documentElement.scrollTop,document.body.scrollTop):e.scrollTop},m=function(e){return e==document.body?Math.max(document.documentElement.scrollLeft,document.body.scrollLeft):e.scrollLeft},_="fixed"===t.offsets.popper.position?0:g(h),v="fixed"===t.offsets.popper.position?0:m(h);s={top:0-(f.top-_),right:e.document.documentElement.clientWidth-(f.left-v),bottom:e.document.documentElement.clientHeight-(f.top-_),left:0-(f.left-v)}}else s=c(this._popper)===n?{top:0,left:0,right:n.clientWidth,bottom:n.clientHeight}:p(n);return s.left+=i,s.right-=i,s.top=s.top+i,s.bottom=s.bottom-i,s},i.prototype.runModifiers=function(e,t,i){var n=t.slice();return void 0!==i&&(n=this._options.modifiers.slice(0,s(this._options.modifiers,i))),n.forEach(function(t){h(t)&&(e=t.call(this,e))}.bind(this)),e},i.prototype.isModifierRequired=function(e,t){var i=s(this._options.modifiers,e);return!!this._options.modifiers.slice(0,i).filter((function(e){return e===t})).length},i.prototype.modifiers={},i.prototype.modifiers.applyStyle=function(e){var t,i={position:e.offsets.popper.position},n=Math.round(e.offsets.popper.left),r=Math.round(e.offsets.popper.top);return this._options.gpuAcceleration&&(t=m("transform"))?(i[t]="translate3d("+n+"px, "+r+"px, 0)",i.top=0,i.left=0):(i.left=n,i.top=r),Object.assign(i,e.styles),d(this._popper,i),this._popper.setAttribute("x-placement",e.placement),this.isModifierRequired(this.modifiers.applyStyle,this.modifiers.arrow)&&e.offsets.arrow&&d(e.arrowElement,e.offsets.arrow),e},i.prototype.modifiers.shift=function(e){var t=e.placement,i=t.split("-")[0],n=t.split("-")[1];if(n){var r=e.offsets.reference,s=o(e.offsets.popper),a={y:{start:{top:r.top},end:{top:r.top+r.height-s.height}},x:{start:{left:r.left},end:{left:r.left+r.width-s.width}}},c=-1!==["bottom","top"].indexOf(i)?"x":"y";e.offsets.popper=Object.assign(s,a[c][n])}return e},i.prototype.modifiers.preventOverflow=function(e){var t=this._options.preventOverflowOrder,i=o(e.offsets.popper),n={left:function(){var t=i.left;return i.left<e.boundaries.left&&(t=Math.max(i.left,e.boundaries.left)),{left:t}},right:function(){var t=i.left;return i.right>e.boundaries.right&&(t=Math.min(i.left,e.boundaries.right-i.width)),{left:t}},top:function(){var t=i.top;return i.top<e.boundaries.top&&(t=Math.max(i.top,e.boundaries.top)),{top:t}},bottom:function(){var t=i.top;return i.bottom>e.boundaries.bottom&&(t=Math.min(i.top,e.boundaries.bottom-i.height)),{top:t}}};return t.forEach((function(t){e.offsets.popper=Object.assign(i,n[t]())})),e},i.prototype.modifiers.keepTogether=function(e){var t=o(e.offsets.popper),i=e.offsets.reference,n=Math.floor;return t.right<n(i.left)&&(e.offsets.popper.left=n(i.left)-t.width),t.left>n(i.right)&&(e.offsets.popper.left=n(i.right)),t.bottom<n(i.top)&&(e.offsets.popper.top=n(i.top)-t.height),t.top>n(i.bottom)&&(e.offsets.popper.top=n(i.bottom)),e},i.prototype.modifiers.flip=function(e){if(!this.isModifierRequired(this.modifiers.flip,this.modifiers.preventOverflow))return console.warn("WARNING: preventOverflow modifier is required by flip modifier in order to work, be sure to include it before flip!"),e;if(e.flipped&&e.placement===e._originalPlacement)return e;var t=e.placement.split("-")[0],i=r(t),n=e.placement.split("-")[1]||"",s=[];return s="flip"===this._options.flipBehavior?[t,i]:this._options.flipBehavior,s.forEach(function(a,c){if(t===a&&s.length!==c+1){t=e.placement.split("-")[0],i=r(t);var l=o(e.offsets.popper),u=-1!==["right","bottom"].indexOf(t);(u&&Math.floor(e.offsets.reference[t])>Math.floor(l[i])||!u&&Math.floor(e.offsets.reference[t])<Math.floor(l[i]))&&(e.flipped=!0,e.placement=s[c+1],n&&(e.placement+="-"+n),e.offsets.popper=this._getOffsets(this._popper,this._reference,e.placement).popper,e=this.runModifiers(e,this._options.modifiers,this._flip))}}.bind(this)),e},i.prototype.modifiers.offset=function(e){var t=this._options.offset,i=e.offsets.popper;return-1!==e.placement.indexOf("left")?i.top-=t:-1!==e.placement.indexOf("right")?i.top+=t:-1!==e.placement.indexOf("top")?i.left-=t:-1!==e.placement.indexOf("bottom")&&(i.left+=t),e},i.prototype.modifiers.arrow=function(e){var t=this._options.arrowElement,i=this._options.arrowOffset;if("string"===typeof t&&(t=this._popper.querySelector(t)),!t)return e;if(!this._popper.contains(t))return console.warn("WARNING: `arrowElement` must be child of its popper element!"),e;if(!this.isModifierRequired(this.modifiers.arrow,this.modifiers.keepTogether))return console.warn("WARNING: keepTogether modifier is required by arrow modifier in order to work, be sure to include it before arrow!"),e;var r={},s=e.placement.split("-")[0],a=o(e.offsets.popper),c=e.offsets.reference,l=-1!==["left","right"].indexOf(s),u=l?"height":"width",d=l?"top":"left",h=l?"left":"top",p=l?"bottom":"right",f=n(t)[u];c[p]-f<a[d]&&(e.offsets.popper[d]-=a[d]-(c[p]-f)),c[d]+f>a[p]&&(e.offsets.popper[d]+=c[d]+f-a[p]);var g=c[d]+(i||c[u]/2-f/2),m=g-a[d];return m=Math.max(Math.min(a[u]-f-8,m),8),r[d]=m,r[h]="",e.offsets.arrow=r,e.arrowElement=t,e},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n){n=Object(n);for(var r=Object.keys(n),o=0,s=r.length;o<s;o++){var a=r[o],c=Object.getOwnPropertyDescriptor(n,a);void 0!==c&&c.enumerable&&(t[a]=n[a])}}}return t}}),i}))},"621a":function(e,t,i){"use strict";var n=i("da84"),r=i("e330"),o=i("83ab"),s=i("a981"),a=i("5e77"),c=i("9112"),l=i("e2cc"),u=i("d039"),d=i("19aa"),h=i("5926"),p=i("50c4"),f=i("0b25"),g=i("77a7"),m=i("e163"),_=i("d2bb"),v=i("241c").f,E=i("9bf2").f,A=i("81d5"),y=i("4dae"),S=i("d44e"),C=i("69f3"),b=a.PROPER,T=a.CONFIGURABLE,I=C.get,R=C.set,w="ArrayBuffer",O="DataView",k="prototype",N="Wrong length",L="Wrong index",P=n[w],D=P,M=D&&D[k],x=n[O],B=x&&x[k],U=Object.prototype,F=n.Array,V=n.RangeError,j=r(A),G=r([].reverse),H=g.pack,Q=g.unpack,W=function(e){return[255&e]},q=function(e){return[255&e,e>>8&255]},$=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},z=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Z=function(e){return H(e,23,4)},Y=function(e){return H(e,52,8)},K=function(e,t){E(e[k],t,{get:function(){return I(this)[t]}})},J=function(e,t,i,n){var r=f(i),o=I(e);if(r+t>o.byteLength)throw V(L);var s=I(o.buffer).bytes,a=r+o.byteOffset,c=y(s,a,a+t);return n?c:G(c)},X=function(e,t,i,n,r,o){var s=f(i),a=I(e);if(s+t>a.byteLength)throw V(L);for(var c=I(a.buffer).bytes,l=s+a.byteOffset,u=n(+r),d=0;d<t;d++)c[l+d]=u[o?d:t-d-1]};if(s){var ee=b&&P.name!==w;if(u((function(){P(1)}))&&u((function(){new P(-1)}))&&!u((function(){return new P,new P(1.5),new P(NaN),ee&&!T})))ee&&T&&c(P,"name",w);else{D=function(e){return d(this,M),new P(f(e))},D[k]=M;for(var te,ie=v(P),ne=0;ie.length>ne;)(te=ie[ne++])in D||c(D,te,P[te]);M.constructor=D}_&&m(B)!==U&&_(B,U);var re=new x(new D(2)),oe=r(B.setInt8);re.setInt8(0,2147483648),re.setInt8(1,2147483649),!re.getInt8(0)&&re.getInt8(1)||l(B,{setInt8:function(e,t){oe(this,e,t<<24>>24)},setUint8:function(e,t){oe(this,e,t<<24>>24)}},{unsafe:!0})}else D=function(e){d(this,M);var t=f(e);R(this,{bytes:j(F(t),0),byteLength:t}),o||(this.byteLength=t)},M=D[k],x=function(e,t,i){d(this,B),d(e,M);var n=I(e).byteLength,r=h(t);if(r<0||r>n)throw V("Wrong offset");if(i=void 0===i?n-r:p(i),r+i>n)throw V(N);R(this,{buffer:e,byteLength:i,byteOffset:r}),o||(this.buffer=e,this.byteLength=i,this.byteOffset=r)},B=x[k],o&&(K(D,"byteLength"),K(x,"buffer"),K(x,"byteLength"),K(x,"byteOffset")),l(B,{getInt8:function(e){return J(this,1,e)[0]<<24>>24},getUint8:function(e){return J(this,1,e)[0]},getInt16:function(e){var t=J(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=J(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return z(J(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return z(J(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return Q(J(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return Q(J(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){X(this,1,e,W,t)},setUint8:function(e,t){X(this,1,e,W,t)},setInt16:function(e,t){X(this,2,e,q,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){X(this,2,e,q,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){X(this,4,e,$,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){X(this,4,e,$,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){X(this,4,e,Z,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){X(this,8,e,Y,t,arguments.length>2?arguments[2]:void 0)}});S(D,w),S(x,O),e.exports={ArrayBuffer:D,DataView:x}},6438:function(e,t,i){var n=i("03d6"),r=i("9742").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,r)}},"649e":function(e,t,i){"use strict";var n=i("ebb5"),r=i("b727").some,o=n.aTypedArray,s=n.exportTypedArrayMethod;s("some",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},6547:function(e,t,i){var n=i("e330"),r=i("5926"),o=i("577e"),s=i("1d80"),a=n("".charAt),c=n("".charCodeAt),l=n("".slice),u=function(e){return function(t,i){var n,u,d=o(s(t)),h=r(i),p=d.length;return h<0||h>=p?e?"":void 0:(n=c(d,h),n<55296||n>56319||h+1===p||(u=c(d,h+1))<56320||u>57343?e?a(d,h):n:e?l(d,h,h+2):u-56320+(n-55296<<10)+65536)}};e.exports={codeAt:u(!1),charAt:u(!0)}},"658f":function(e,t,i){i("6858");for(var n=i("ef08"),r=i("051b"),o=i("8a0d"),s=i("cc15")("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var l=a[c],u=n[l],d=u&&u.prototype;d&&!d[s]&&r(d,s,l),o[l]=o.Array}},"65f0":function(e,t,i){var n=i("0b42");e.exports=function(e,t){return new(n(e))(0===t?0:t)}},6821:function(e,t,i){(function(){var t=i("00d8"),n=i("9a63").utf8,r=i("044b"),o=i("9a63").bin,s=function(e,i){e.constructor==String?e=i&&"binary"===i.encoding?o.stringToBytes(e):n.stringToBytes(e):r(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var a=t.bytesToWords(e),c=8*e.length,l=1732584193,u=-271733879,d=-1732584194,h=271733878,p=0;p<a.length;p++)a[p]=16711935&(a[p]<<8|a[p]>>>24)|4278255360&(a[p]<<24|a[p]>>>8);a[c>>>5]|=128<<c%32,a[14+(c+64>>>9<<4)]=c;var f=s._ff,g=s._gg,m=s._hh,_=s._ii;for(p=0;p<a.length;p+=16){var v=l,E=u,A=d,y=h;l=f(l,u,d,h,a[p+0],7,-680876936),h=f(h,l,u,d,a[p+1],12,-389564586),d=f(d,h,l,u,a[p+2],17,606105819),u=f(u,d,h,l,a[p+3],22,-1044525330),l=f(l,u,d,h,a[p+4],7,-176418897),h=f(h,l,u,d,a[p+5],12,1200080426),d=f(d,h,l,u,a[p+6],17,-1473231341),u=f(u,d,h,l,a[p+7],22,-45705983),l=f(l,u,d,h,a[p+8],7,1770035416),h=f(h,l,u,d,a[p+9],12,-1958414417),d=f(d,h,l,u,a[p+10],17,-42063),u=f(u,d,h,l,a[p+11],22,-1990404162),l=f(l,u,d,h,a[p+12],7,1804603682),h=f(h,l,u,d,a[p+13],12,-40341101),d=f(d,h,l,u,a[p+14],17,-1502002290),u=f(u,d,h,l,a[p+15],22,1236535329),l=g(l,u,d,h,a[p+1],5,-165796510),h=g(h,l,u,d,a[p+6],9,-1069501632),d=g(d,h,l,u,a[p+11],14,643717713),u=g(u,d,h,l,a[p+0],20,-373897302),l=g(l,u,d,h,a[p+5],5,-701558691),h=g(h,l,u,d,a[p+10],9,38016083),d=g(d,h,l,u,a[p+15],14,-660478335),u=g(u,d,h,l,a[p+4],20,-405537848),l=g(l,u,d,h,a[p+9],5,568446438),h=g(h,l,u,d,a[p+14],9,-1019803690),d=g(d,h,l,u,a[p+3],14,-187363961),u=g(u,d,h,l,a[p+8],20,1163531501),l=g(l,u,d,h,a[p+13],5,-1444681467),h=g(h,l,u,d,a[p+2],9,-51403784),d=g(d,h,l,u,a[p+7],14,1735328473),u=g(u,d,h,l,a[p+12],20,-1926607734),l=m(l,u,d,h,a[p+5],4,-378558),h=m(h,l,u,d,a[p+8],11,-2022574463),d=m(d,h,l,u,a[p+11],16,1839030562),u=m(u,d,h,l,a[p+14],23,-35309556),l=m(l,u,d,h,a[p+1],4,-1530992060),h=m(h,l,u,d,a[p+4],11,1272893353),d=m(d,h,l,u,a[p+7],16,-155497632),u=m(u,d,h,l,a[p+10],23,-1094730640),l=m(l,u,d,h,a[p+13],4,681279174),h=m(h,l,u,d,a[p+0],11,-358537222),d=m(d,h,l,u,a[p+3],16,-722521979),u=m(u,d,h,l,a[p+6],23,76029189),l=m(l,u,d,h,a[p+9],4,-640364487),h=m(h,l,u,d,a[p+12],11,-421815835),d=m(d,h,l,u,a[p+15],16,530742520),u=m(u,d,h,l,a[p+2],23,-995338651),l=_(l,u,d,h,a[p+0],6,-198630844),h=_(h,l,u,d,a[p+7],10,1126891415),d=_(d,h,l,u,a[p+14],15,-1416354905),u=_(u,d,h,l,a[p+5],21,-57434055),l=_(l,u,d,h,a[p+12],6,1700485571),h=_(h,l,u,d,a[p+3],10,-1894986606),d=_(d,h,l,u,a[p+10],15,-1051523),u=_(u,d,h,l,a[p+1],21,-2054922799),l=_(l,u,d,h,a[p+8],6,1873313359),h=_(h,l,u,d,a[p+15],10,-30611744),d=_(d,h,l,u,a[p+6],15,-1560198380),u=_(u,d,h,l,a[p+13],21,1309151649),l=_(l,u,d,h,a[p+4],6,-145523070),h=_(h,l,u,d,a[p+11],10,-1120210379),d=_(d,h,l,u,a[p+2],15,718787259),u=_(u,d,h,l,a[p+9],21,-343485551),l=l+v>>>0,u=u+E>>>0,d=d+A>>>0,h=h+y>>>0}return t.endian([l,u,d,h])};s._ff=function(e,t,i,n,r,o,s){var a=e+(t&i|~t&n)+(r>>>0)+s;return(a<<o|a>>>32-o)+t},s._gg=function(e,t,i,n,r,o,s){var a=e+(t&n|i&~n)+(r>>>0)+s;return(a<<o|a>>>32-o)+t},s._hh=function(e,t,i,n,r,o,s){var a=e+(t^i^n)+(r>>>0)+s;return(a<<o|a>>>32-o)+t},s._ii=function(e,t,i,n,r,o,s){var a=e+(i^(t|~n))+(r>>>0)+s;return(a<<o|a>>>32-o)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,i){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var n=t.wordsToBytes(s(e,i));return i&&i.asBytes?n:i&&i.asString?o.bytesToString(n):t.bytesToHex(n)}})()},6858:function(e,t,i){"use strict";var n=i("2f9a"),r=i("ea34"),o=i("8a0d"),s=i("6ca1");e.exports=i("393a")(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},"68ee":function(e,t,i){var n=i("e330"),r=i("d039"),o=i("1626"),s=i("f5df"),a=i("d066"),c=i("8925"),l=function(){},u=[],d=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=n(h.exec),f=!h.exec(l),g=function(e){if(!o(e))return!1;try{return d(l,u,e),!0}catch(t){return!1}},m=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,c(e))}catch(t){return!0}};m.sham=!0,e.exports=!d||r((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?m:g},"693d":function(e,t,i){"use strict";var n=i("ef08"),r=i("9c0e"),o=i("0bad"),s=i("512c"),a=i("ba01"),c=i("e34a").KEY,l=i("4b8b"),u=i("b367"),d=i("92f0"),h=i("8b1a"),p=i("cc15"),f=i("fcd4"),g=i("e198"),m=i("0ae2"),_=i("4ebc"),v=i("77e9"),E=i("7a41"),A=i("0983"),y=i("6ca1"),S=i("3397"),C=i("10db"),b=i("6f4f"),T=i("1836"),I=i("4d20"),R=i("fed5"),w=i("1a14"),O=i("9876"),k=I.f,N=w.f,L=T.f,P=n.Symbol,D=n.JSON,M=D&&D.stringify,x="prototype",B=p("_hidden"),U=p("toPrimitive"),F={}.propertyIsEnumerable,V=u("symbol-registry"),j=u("symbols"),G=u("op-symbols"),H=Object[x],Q="function"==typeof P&&!!R.f,W=n.QObject,q=!W||!W[x]||!W[x].findChild,$=o&&l((function(){return 7!=b(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a}))?function(e,t,i){var n=k(H,t);n&&delete H[t],N(e,t,i),n&&e!==H&&N(H,t,n)}:N,z=function(e){var t=j[e]=b(P[x]);return t._k=e,t},Z=Q&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},Y=function(e,t,i){return e===H&&Y(G,t,i),v(e),t=S(t,!0),v(i),r(j,t)?(i.enumerable?(r(e,B)&&e[B][t]&&(e[B][t]=!1),i=b(i,{enumerable:C(0,!1)})):(r(e,B)||N(e,B,C(1,{})),e[B][t]=!0),$(e,t,i)):N(e,t,i)},K=function(e,t){v(e);var i,n=m(t=y(t)),r=0,o=n.length;while(o>r)Y(e,i=n[r++],t[i]);return e},J=function(e,t){return void 0===t?b(e):K(b(e),t)},X=function(e){var t=F.call(this,e=S(e,!0));return!(this===H&&r(j,e)&&!r(G,e))&&(!(t||!r(this,e)||!r(j,e)||r(this,B)&&this[B][e])||t)},ee=function(e,t){if(e=y(e),t=S(t,!0),e!==H||!r(j,t)||r(G,t)){var i=k(e,t);return!i||!r(j,t)||r(e,B)&&e[B][t]||(i.enumerable=!0),i}},te=function(e){var t,i=L(y(e)),n=[],o=0;while(i.length>o)r(j,t=i[o++])||t==B||t==c||n.push(t);return n},ie=function(e){var t,i=e===H,n=L(i?G:y(e)),o=[],s=0;while(n.length>s)!r(j,t=n[s++])||i&&!r(H,t)||o.push(j[t]);return o};Q||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(i){this===H&&t.call(G,i),r(this,B)&&r(this[B],e)&&(this[B][e]=!1),$(this,e,C(1,i))};return o&&q&&$(H,e,{configurable:!0,set:t}),z(e)},a(P[x],"toString",(function(){return this._k})),I.f=ee,w.f=Y,i("6438").f=T.f=te,i("1917").f=X,R.f=ie,o&&!i("e444")&&a(H,"propertyIsEnumerable",X,!0),f.f=function(e){return z(p(e))}),s(s.G+s.W+s.F*!Q,{Symbol:P});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)p(ne[re++]);for(var oe=O(p.store),se=0;oe.length>se;)g(oe[se++]);s(s.S+s.F*!Q,"Symbol",{for:function(e){return r(V,e+="")?V[e]:V[e]=P(e)},keyFor:function(e){if(!Z(e))throw TypeError(e+" is not a symbol!");for(var t in V)if(V[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),s(s.S+s.F*!Q,"Object",{create:J,defineProperty:Y,defineProperties:K,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ie});var ae=l((function(){R.f(1)}));s(s.S+s.F*ae,"Object",{getOwnPropertySymbols:function(e){return R.f(A(e))}}),D&&s(s.S+s.F*(!Q||l((function(){var e=P();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))}))),"JSON",{stringify:function(e){var t,i,n=[e],r=1;while(arguments.length>r)n.push(arguments[r++]);if(i=t=n[1],(E(t)||void 0!==e)&&!Z(e))return _(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!Z(t))return t}),n[1]=t,M.apply(D,n)}}),P[x][U]||i("051b")(P[x],U,P[x].valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},"69f3":function(e,t,i){var n,r,o,s=i("7f9a"),a=i("da84"),c=i("e330"),l=i("861d"),u=i("9112"),d=i("1a2d"),h=i("c6cd"),p=i("f772"),f=i("d012"),g="Object already initialized",m=a.TypeError,_=a.WeakMap,v=function(e){return o(e)?r(e):n(e,{})},E=function(e){return function(t){var i;if(!l(t)||(i=r(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return i}};if(s||h.state){var A=h.state||(h.state=new _),y=c(A.get),S=c(A.has),C=c(A.set);n=function(e,t){if(S(A,e))throw new m(g);return t.facade=e,C(A,e,t),t},r=function(e){return y(A,e)||{}},o=function(e){return S(A,e)}}else{var b=p("state");f[b]=!0,n=function(e,t){if(d(e,b))throw new m(g);return t.facade=e,u(e,b,t),t},r=function(e){return d(e,b)?e[b]:{}},o=function(e){return d(e,b)}}e.exports={set:n,get:r,has:o,enforce:v,getterFor:E}},"6ac9":function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=79)}({0:function(e,t,i){"use strict";function n(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},2:function(e,t){e.exports=i("5924")},3:function(e,t){e.exports=i("8122")},5:function(e,t){e.exports=i("e974")},7:function(e,t){e.exports=i("2b0e")},79:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[i("transition",{attrs:{name:e.transition},on:{"after-enter":e.handleAfterEnter,"after-leave":e.handleAfterLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&e.showPopper,expression:"!disabled && showPopper"}],ref:"popper",staticClass:"el-popover el-popper",class:[e.popperClass,e.content&&"el-popover--plain"],style:{width:e.width+"px"},attrs:{role:"tooltip",id:e.tooltipId,"aria-hidden":e.disabled||!e.showPopper?"true":"false"}},[e.title?i("div",{staticClass:"el-popover__title",domProps:{textContent:e._s(e.title)}}):e._e(),e._t("default",[e._v(e._s(e.content))])],2)]),i("span",{ref:"wrapper",staticClass:"el-popover__reference-wrapper"},[e._t("reference")],2)],1)},r=[];n._withStripped=!0;var o=i(5),s=i.n(o),a=i(2),c=i(3),l={name:"ElPopover",mixins:[s.a],props:{trigger:{type:String,default:"click",validator:function(e){return["click","focus","hover","manual"].indexOf(e)>-1}},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200},title:String,disabled:Boolean,content:String,reference:{},popperClass:String,width:{},visibleArrow:{default:!0},arrowOffset:{type:Number,default:0},transition:{type:String,default:"fade-in-linear"},tabindex:{type:Number,default:0}},computed:{tooltipId:function(){return"el-popover-"+Object(c["generateId"])()}},watch:{showPopper:function(e){this.disabled||(e?this.$emit("show"):this.$emit("hide"))}},mounted:function(){var e=this,t=this.referenceElm=this.reference||this.$refs.reference,i=this.popper||this.$refs.popper;!t&&this.$refs.wrapper.children&&(t=this.referenceElm=this.$refs.wrapper.children[0]),t&&(Object(a["addClass"])(t,"el-popover__reference"),t.setAttribute("aria-describedby",this.tooltipId),t.setAttribute("tabindex",this.tabindex),i.setAttribute("tabindex",0),"click"!==this.trigger&&(Object(a["on"])(t,"focusin",(function(){e.handleFocus();var i=t.__vue__;i&&"function"===typeof i.focus&&i.focus()})),Object(a["on"])(i,"focusin",this.handleFocus),Object(a["on"])(t,"focusout",this.handleBlur),Object(a["on"])(i,"focusout",this.handleBlur)),Object(a["on"])(t,"keydown",this.handleKeydown),Object(a["on"])(t,"click",this.handleClick)),"click"===this.trigger?(Object(a["on"])(t,"click",this.doToggle),Object(a["on"])(document,"click",this.handleDocumentClick)):"hover"===this.trigger?(Object(a["on"])(t,"mouseenter",this.handleMouseEnter),Object(a["on"])(i,"mouseenter",this.handleMouseEnter),Object(a["on"])(t,"mouseleave",this.handleMouseLeave),Object(a["on"])(i,"mouseleave",this.handleMouseLeave)):"focus"===this.trigger&&(this.tabindex<0&&console.warn("[Element Warn][Popover]a negative taindex means that the element cannot be focused by tab key"),t.querySelector("input, textarea")?(Object(a["on"])(t,"focusin",this.doShow),Object(a["on"])(t,"focusout",this.doClose)):(Object(a["on"])(t,"mousedown",this.doShow),Object(a["on"])(t,"mouseup",this.doClose)))},beforeDestroy:function(){this.cleanup()},deactivated:function(){this.cleanup()},methods:{doToggle:function(){this.showPopper=!this.showPopper},doShow:function(){this.showPopper=!0},doClose:function(){this.showPopper=!1},handleFocus:function(){Object(a["addClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!0)},handleClick:function(){Object(a["removeClass"])(this.referenceElm,"focusing")},handleBlur:function(){Object(a["removeClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!1)},handleMouseEnter:function(){var e=this;clearTimeout(this._timer),this.openDelay?this._timer=setTimeout((function(){e.showPopper=!0}),this.openDelay):this.showPopper=!0},handleKeydown:function(e){27===e.keyCode&&"manual"!==this.trigger&&this.doClose()},handleMouseLeave:function(){var e=this;clearTimeout(this._timer),this.closeDelay?this._timer=setTimeout((function(){e.showPopper=!1}),this.closeDelay):this.showPopper=!1},handleDocumentClick:function(e){var t=this.reference||this.$refs.reference,i=this.popper||this.$refs.popper;!t&&this.$refs.wrapper.children&&(t=this.referenceElm=this.$refs.wrapper.children[0]),this.$el&&t&&!this.$el.contains(e.target)&&!t.contains(e.target)&&i&&!i.contains(e.target)&&(this.showPopper=!1)},handleAfterEnter:function(){this.$emit("after-enter")},handleAfterLeave:function(){this.$emit("after-leave"),this.doDestroy()},cleanup:function(){(this.openDelay||this.closeDelay)&&clearTimeout(this._timer)}},destroyed:function(){var e=this.reference;Object(a["off"])(e,"click",this.doToggle),Object(a["off"])(e,"mouseup",this.doClose),Object(a["off"])(e,"mousedown",this.doShow),Object(a["off"])(e,"focusin",this.doShow),Object(a["off"])(e,"focusout",this.doClose),Object(a["off"])(e,"mousedown",this.doShow),Object(a["off"])(e,"mouseup",this.doClose),Object(a["off"])(e,"mouseleave",this.handleMouseLeave),Object(a["off"])(e,"mouseenter",this.handleMouseEnter),Object(a["off"])(document,"click",this.handleDocumentClick)}},u=l,d=i(0),h=Object(d["a"])(u,n,r,!1,null,null,null);h.options.__file="packages/popover/src/main.vue";var p=h.exports,f=function(e,t,i){var n=t.expression?t.value:t.arg,r=i.context.$refs[n];r&&(Array.isArray(r)?r[0].$refs.reference=e:r.$refs.reference=e)},g={bind:function(e,t,i){f(e,t,i)},inserted:function(e,t,i){f(e,t,i)}},m=i(7),_=i.n(m);_.a.directive("popover",g),p.install=function(e){e.directive("popover",g),e.component(p.name,p)},p.directive=g;t["default"]=p}})},"6b7c":function(e,t,i){"use strict";t.__esModule=!0;var n=i("4897");t.default={methods:{t:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return n.t.apply(this,t)}}}},"6c57":function(e,t,i){var n=i("23e7"),r=i("da84");n({global:!0},{globalThis:r})},"6ca1":function(e,t,i){var n=i("9fbb"),r=i("c901");e.exports=function(e){return n(r(e))}},"6dd8":function(e,t,i){"use strict";i.r(t),function(e){var i=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var i=-1;return e.some((function(e,n){return e[0]===t&&(i=n,!0)})),i}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var i=e(this.__entries__,t),n=this.__entries__[i];return n&&n[1]},t.prototype.set=function(t,i){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=i:this.__entries__.push([t,i])},t.prototype.delete=function(t){var i=this.__entries__,n=e(i,t);~n&&i.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var i=0,n=this.__entries__;i<n.length;i++){var r=n[i];e.call(t,r[1],r[0])}},t}()}(),n="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,r=function(){return"undefined"!==typeof e&&e.Math===Math?e:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")()}(),o=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)}}(),s=2;function a(e,t){var i=!1,n=!1,r=0;function a(){i&&(i=!1,e()),n&&l()}function c(){o(a)}function l(){var e=Date.now();if(i){if(e-r<s)return;n=!0}else i=!0,n=!1,setTimeout(c,t);r=e}return l}var c=20,l=["top","right","bottom","left","width","height","size","weight"],u="undefined"!==typeof MutationObserver,d=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=a(this.refresh.bind(this),c)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,i=t.indexOf(e);~i&&t.splice(i,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,i=void 0===t?"":t,n=l.some((function(e){return!!~i.indexOf(e)}));n&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),h=function(e,t){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},p=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||r},f=b(0,0,0,0);function g(e){return parseFloat(e)||0}function m(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return t.reduce((function(t,i){var n=e["border-"+i+"-width"];return t+g(n)}),0)}function _(e){for(var t=["top","right","bottom","left"],i={},n=0,r=t;n<r.length;n++){var o=r[n],s=e["padding-"+o];i[o]=g(s)}return i}function v(e){var t=e.getBBox();return b(0,0,t.width,t.height)}function E(e){var t=e.clientWidth,i=e.clientHeight;if(!t&&!i)return f;var n=p(e).getComputedStyle(e),r=_(n),o=r.left+r.right,s=r.top+r.bottom,a=g(n.width),c=g(n.height);if("border-box"===n.boxSizing&&(Math.round(a+o)!==t&&(a-=m(n,"left","right")+o),Math.round(c+s)!==i&&(c-=m(n,"top","bottom")+s)),!y(e)){var l=Math.round(a+o)-t,u=Math.round(c+s)-i;1!==Math.abs(l)&&(a-=l),1!==Math.abs(u)&&(c-=u)}return b(r.left,r.top,a,c)}var A=function(){return"undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof p(e).SVGGraphicsElement}:function(e){return e instanceof p(e).SVGElement&&"function"===typeof e.getBBox}}();function y(e){return e===p(e).document.documentElement}function S(e){return n?A(e)?v(e):E(e):f}function C(e){var t=e.x,i=e.y,n=e.width,r=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return h(s,{x:t,y:i,width:n,height:r,top:i,right:t+n,bottom:r+i,left:t}),s}function b(e,t,i,n){return{x:e,y:t,width:i,height:n}}var T=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=S(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),I=function(){function e(e,t){var i=C(t);h(this,{target:e,contentRect:i})}return e}(),R=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new i,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof p(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new T(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof p(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new I(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),w="undefined"!==typeof WeakMap?new WeakMap:new i,O=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=d.getInstance(),n=new R(t,i,this);w.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach((function(e){O.prototype[e]=function(){var t;return(t=w.get(this))[e].apply(t,arguments)}}));var k=function(){return"undefined"!==typeof r.ResizeObserver?r.ResizeObserver:O}();t["default"]=k}.call(this,i("c8ba"))},"6eeb":function(e,t,i){var n=i("da84"),r=i("1626"),o=i("1a2d"),s=i("9112"),a=i("ce4e"),c=i("8925"),l=i("69f3"),u=i("5e77").CONFIGURABLE,d=l.get,h=l.enforce,p=String(String).split("String");(e.exports=function(e,t,i,c){var l,d=!!c&&!!c.unsafe,f=!!c&&!!c.enumerable,g=!!c&&!!c.noTargetGet,m=c&&void 0!==c.name?c.name:t;r(i)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(i,"name")||u&&i.name!==m)&&s(i,"name",m),l=h(i),l.source||(l.source=p.join("string"==typeof m?m:""))),e!==n?(d?!g&&e[t]&&(f=!0):delete e[t],f?e[t]=i:s(e,t,i)):f?e[t]=i:a(t,i)})(Function.prototype,"toString",(function(){return r(this)&&d(this).source||c(this)}))},"6f4f":function(e,t,i){var n=i("77e9"),r=i("85e7"),o=i("9742"),s=i("5a94")("IE_PROTO"),a=function(){},c="prototype",l=function(){var e,t=i("05f5")("iframe"),n=o.length,r="<",s=">";t.style.display="none",i("9141").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+s+"document.F=Object"+r+"/script"+s),e.close(),l=e.F;while(n--)delete l[c][o[n]];return l()};e.exports=Object.create||function(e,t){var i;return null!==e?(a[c]=n(e),i=new a,a[c]=null,i[s]=e):i=l(),void 0===t?i:r(i,t)}},"6f53":function(e,t,i){var n=i("83ab"),r=i("e330"),o=i("df75"),s=i("fc6a"),a=i("d1e7").f,c=r(a),l=r([].push),u=function(e){return function(t){var i,r=s(t),a=o(r),u=a.length,d=0,h=[];while(u>d)i=a[d++],n&&!c(r,i)||l(h,e?[i,r[i]]:r[i]);return h}};e.exports={entries:u(!0),values:u(!1)}},7037:function(e,t,i){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},7039:function(e,t,i){var n=i("23e7"),r=i("d039"),o=i("057f").f,s=r((function(){return!Object.getOwnPropertyNames(1)}));n({target:"Object",stat:!0,forced:s},{getOwnPropertyNames:o})},7156:function(e,t,i){var n=i("1626"),r=i("861d"),o=i("d2bb");e.exports=function(e,t,i){var s,a;return o&&n(s=t.constructor)&&s!==i&&r(a=s.prototype)&&a!==i.prototype&&o(e,a),e}},"722f":function(e,t,i){"use strict";t.__esModule=!0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=i("e452"),o=s(r);function s(e){return e&&e.__esModule?e:{default:e}}var a,c=c||{};c.Dialog=function(e,t,i){var r=this;if(this.dialogNode=e,null===this.dialogNode||"dialog"!==this.dialogNode.getAttribute("role"))throw new Error("Dialog() requires a DOM element with ARIA role of dialog.");"string"===typeof t?this.focusAfterClosed=document.getElementById(t):"object"===("undefined"===typeof t?"undefined":n(t))?this.focusAfterClosed=t:this.focusAfterClosed=null,"string"===typeof i?this.focusFirst=document.getElementById(i):"object"===("undefined"===typeof i?"undefined":n(i))?this.focusFirst=i:this.focusFirst=null,this.focusFirst?this.focusFirst.focus():o.default.focusFirstDescendant(this.dialogNode),this.lastFocus=document.activeElement,a=function(e){r.trapFocus(e)},this.addListeners()},c.Dialog.prototype.addListeners=function(){document.addEventListener("focus",a,!0)},c.Dialog.prototype.removeListeners=function(){document.removeEventListener("focus",a,!0)},c.Dialog.prototype.closeDialog=function(){var e=this;this.removeListeners(),this.focusAfterClosed&&setTimeout((function(){e.focusAfterClosed.focus()}))},c.Dialog.prototype.trapFocus=function(e){o.default.IgnoreUtilFocusChanges||(this.dialogNode.contains(e.target)?this.lastFocus=e.target:(o.default.focusFirstDescendant(this.dialogNode),this.lastFocus===document.activeElement&&o.default.focusLastDescendant(this.dialogNode),this.lastFocus=document.activeElement))},t.default=c.Dialog},"72f7":function(e,t,i){"use strict";var n=i("ebb5").exportTypedArrayMethod,r=i("d039"),o=i("da84"),s=i("e330"),a=o.Uint8Array,c=a&&a.prototype||{},l=[].toString,u=s([].join);r((function(){l.call({})}))&&(l=function(){return u(this)});var d=c.toString!=l;n("toString",l,d)},"735e":function(e,t,i){"use strict";var n=i("ebb5"),r=i("c65b"),o=i("81d5"),s=n.aTypedArray,a=n.exportTypedArrayMethod;a("fill",(function(e){var t=arguments.length;return r(o,s(this),e,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}))},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,i){var n=i("428f"),r=i("1a2d"),o=i("e538"),s=i("9bf2").f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});r(t,e)||s(t,e,{value:o.f(e)})}},"74e8":function(e,t,i){"use strict";var n=i("23e7"),r=i("da84"),o=i("c65b"),s=i("83ab"),a=i("8aa7"),c=i("ebb5"),l=i("621a"),u=i("19aa"),d=i("5c6c"),h=i("9112"),p=i("eac5"),f=i("50c4"),g=i("0b25"),m=i("182d"),_=i("a04b"),v=i("1a2d"),E=i("f5df"),A=i("861d"),y=i("d9b5"),S=i("7c73"),C=i("3a9b"),b=i("d2bb"),T=i("241c").f,I=i("a078"),R=i("b727").forEach,w=i("2626"),O=i("9bf2"),k=i("06cf"),N=i("69f3"),L=i("7156"),P=N.get,D=N.set,M=O.f,x=k.f,B=Math.round,U=r.RangeError,F=l.ArrayBuffer,V=F.prototype,j=l.DataView,G=c.NATIVE_ARRAY_BUFFER_VIEWS,H=c.TYPED_ARRAY_CONSTRUCTOR,Q=c.TYPED_ARRAY_TAG,W=c.TypedArray,q=c.TypedArrayPrototype,$=c.aTypedArrayConstructor,z=c.isTypedArray,Z="BYTES_PER_ELEMENT",Y="Wrong length",K=function(e,t){$(e);var i=0,n=t.length,r=new e(n);while(n>i)r[i]=t[i++];return r},J=function(e,t){M(e,t,{get:function(){return P(this)[t]}})},X=function(e){var t;return C(V,e)||"ArrayBuffer"==(t=E(e))||"SharedArrayBuffer"==t},ee=function(e,t){return z(e)&&!y(t)&&t in e&&p(+t)&&t>=0},te=function(e,t){return t=_(t),ee(e,t)?d(2,e[t]):x(e,t)},ie=function(e,t,i){return t=_(t),!(ee(e,t)&&A(i)&&v(i,"value"))||v(i,"get")||v(i,"set")||i.configurable||v(i,"writable")&&!i.writable||v(i,"enumerable")&&!i.enumerable?M(e,t,i):(e[t]=i.value,e)};s?(G||(k.f=te,O.f=ie,J(q,"buffer"),J(q,"byteOffset"),J(q,"byteLength"),J(q,"length")),n({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:te,defineProperty:ie}),e.exports=function(e,t,i){var s=e.match(/\d+$/)[0]/8,c=e+(i?"Clamped":"")+"Array",l="get"+e,d="set"+e,p=r[c],_=p,v=_&&_.prototype,E={},y=function(e,t){var i=P(e);return i.view[l](t*s+i.byteOffset,!0)},C=function(e,t,n){var r=P(e);i&&(n=(n=B(n))<0?0:n>255?255:255&n),r.view[d](t*s+r.byteOffset,n,!0)},O=function(e,t){M(e,t,{get:function(){return y(this,t)},set:function(e){return C(this,t,e)},enumerable:!0})};G?a&&(_=t((function(e,t,i,n){return u(e,v),L(function(){return A(t)?X(t)?void 0!==n?new p(t,m(i,s),n):void 0!==i?new p(t,m(i,s)):new p(t):z(t)?K(_,t):o(I,_,t):new p(g(t))}(),e,_)})),b&&b(_,W),R(T(p),(function(e){e in _||h(_,e,p[e])})),_.prototype=v):(_=t((function(e,t,i,n){u(e,v);var r,a,c,l=0,d=0;if(A(t)){if(!X(t))return z(t)?K(_,t):o(I,_,t);r=t,d=m(i,s);var h=t.byteLength;if(void 0===n){if(h%s)throw U(Y);if(a=h-d,a<0)throw U(Y)}else if(a=f(n)*s,a+d>h)throw U(Y);c=a/s}else c=g(t),a=c*s,r=new F(a);D(e,{buffer:r,byteOffset:d,byteLength:a,length:c,view:new j(r)});while(l<c)O(e,l++)})),b&&b(_,W),v=_.prototype=S(q)),v.constructor!==_&&h(v,"constructor",_),h(v,H,_),Q&&h(v,Q,c),E[c]=_,n({global:!0,forced:_!=p,sham:!G},E),Z in _||h(_,Z,s),Z in v||h(v,Z,s),w(c)}):e.exports=function(){}},"77a7":function(e,t,i){var n=i("da84"),r=n.Array,o=Math.abs,s=Math.pow,a=Math.floor,c=Math.log,l=Math.LN2,u=function(e,t,i){var n,u,d,h=r(i),p=8*i-t-1,f=(1<<p)-1,g=f>>1,m=23===t?s(2,-24)-s(2,-77):0,_=e<0||0===e&&1/e<0?1:0,v=0;e=o(e),e!=e||e===1/0?(u=e!=e?1:0,n=f):(n=a(c(e)/l),d=s(2,-n),e*d<1&&(n--,d*=2),e+=n+g>=1?m/d:m*s(2,1-g),e*d>=2&&(n++,d/=2),n+g>=f?(u=0,n=f):n+g>=1?(u=(e*d-1)*s(2,t),n+=g):(u=e*s(2,g-1)*s(2,t),n=0));while(t>=8)h[v++]=255&u,u/=256,t-=8;n=n<<t|u,p+=t;while(p>0)h[v++]=255&n,n/=256,p-=8;return h[--v]|=128*_,h},d=function(e,t){var i,n=e.length,r=8*n-t-1,o=(1<<r)-1,a=o>>1,c=r-7,l=n-1,u=e[l--],d=127&u;u>>=7;while(c>0)d=256*d+e[l--],c-=8;i=d&(1<<-c)-1,d>>=-c,c+=t;while(c>0)i=256*i+e[l--],c-=8;if(0===d)d=1-a;else{if(d===o)return i?NaN:u?-1/0:1/0;i+=s(2,t),d-=a}return(u?-1:1)*i*s(2,d-t)};e.exports={pack:u,unpack:d}},"77e9":function(e,t,i){var n=i("7a41");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"785a":function(e,t,i){var n=i("cc12"),r=n("span").classList,o=r&&r.constructor&&r.constructor.prototype;e.exports=o===Object.prototype?void 0:o},"7a41":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},"7a77":function(e,t,i){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},"7aac":function(e,t,i){"use strict";var n=i("c532");e.exports=n.isStandardBrowserEnv()?function(){return{write:function(e,t,i,r,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),n.isString(r)&&a.push("path="+r),n.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"7b0b":function(e,t,i){var n=i("da84"),r=i("1d80"),o=n.Object;e.exports=function(e){return o(r(e))}},"7b3e":function(e,t,i){"use strict";var n,r=i("a3de");
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */
function o(e,t){if(!r.canUseDOM||t&&!("addEventListener"in document))return!1;var i="on"+e,o=i in document;if(!o){var s=document.createElement("div");s.setAttribute(i,"return;"),o="function"===typeof s[i]}return!o&&n&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}r.canUseDOM&&(n=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=o},"7c73":function(e,t,i){var n,r=i("825a"),o=i("37e8"),s=i("7839"),a=i("d012"),c=i("1be4"),l=i("cc12"),u=i("f772"),d=">",h="<",p="prototype",f="script",g=u("IE_PROTO"),m=function(){},_=function(e){return h+f+d+e+h+"/"+f+d},v=function(e){e.write(_("")),e.close();var t=e.parentWindow.Object;return e=null,t},E=function(){var e,t=l("iframe"),i="java"+f+":";return t.style.display="none",c.appendChild(t),t.src=String(i),e=t.contentWindow.document,e.open(),e.write(_("document.F=Object")),e.close(),e.F},A=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}A="undefined"!=typeof document?document.domain&&n?v(n):E():v(n);var e=s.length;while(e--)delete A[p][s[e]];return A()};a[g]=!0,e.exports=Object.create||function(e,t){var i;return null!==e?(m[p]=r(e),i=new m,m[p]=null,i[g]=e):i=A(),void 0===t?i:o.f(i,t)}},"7db0":function(e,t,i){"use strict";var n=i("23e7"),r=i("b727").find,o=i("44d2"),s="find",a=!0;s in[]&&Array(1)[s]((function(){a=!1})),n({target:"Array",proto:!0,forced:a},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o(s)},"7dd0":function(e,t,i){"use strict";var n=i("23e7"),r=i("c65b"),o=i("c430"),s=i("5e77"),a=i("1626"),c=i("9ed3"),l=i("e163"),u=i("d2bb"),d=i("d44e"),h=i("9112"),p=i("6eeb"),f=i("b622"),g=i("3f8c"),m=i("ae93"),_=s.PROPER,v=s.CONFIGURABLE,E=m.IteratorPrototype,A=m.BUGGY_SAFARI_ITERATORS,y=f("iterator"),S="keys",C="values",b="entries",T=function(){return this};e.exports=function(e,t,i,s,f,m,I){c(i,t,s);var R,w,O,k=function(e){if(e===f&&M)return M;if(!A&&e in P)return P[e];switch(e){case S:return function(){return new i(this,e)};case C:return function(){return new i(this,e)};case b:return function(){return new i(this,e)}}return function(){return new i(this)}},N=t+" Iterator",L=!1,P=e.prototype,D=P[y]||P["@@iterator"]||f&&P[f],M=!A&&D||k(f),x="Array"==t&&P.entries||D;if(x&&(R=l(x.call(new e)),R!==Object.prototype&&R.next&&(o||l(R)===E||(u?u(R,E):a(R[y])||p(R,y,T)),d(R,N,!0,!0),o&&(g[N]=T))),_&&f==C&&D&&D.name!==C&&(!o&&v?h(P,"name",C):(L=!0,M=function(){return r(D,this)})),f)if(w={values:k(C),keys:m?M:k(S),entries:k(b)},I)for(O in w)(A||L||!(O in P))&&p(P,O,w[O]);else n({target:t,proto:!0,forced:A||L},w);return o&&!I||P[y]===M||p(P,y,M,{name:f}),g[t]=M,w}},"7f4d":function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e){for(var t=1,i=arguments.length;t<i;t++){var n=arguments[t]||{};for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];void 0!==o&&(e[r]=o)}}return e}},"7f9a":function(e,t,i){var n=i("da84"),r=i("1626"),o=i("8925"),s=n.WeakMap;e.exports=r(s)&&/native code/.test(o(s))},"7fc1":function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=126)}({0:function(e,t,i){"use strict";function n(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},126:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-checkbox-group",attrs:{role:"group","aria-label":"checkbox-group"}},[e._t("default")],2)},r=[];n._withStripped=!0;var o=i(4),s=i.n(o),a={name:"ElCheckboxGroup",componentName:"ElCheckboxGroup",mixins:[s.a],inject:{elFormItem:{default:""}},props:{value:{},disabled:Boolean,min:Number,max:Number,size:String,fill:String,textColor:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[e])}}},c=a,l=i(0),u=Object(l["a"])(c,n,r,!1,null,null,null);u.options.__file="packages/checkbox/src/checkbox-group.vue";var d=u.exports;d.install=function(e){e.component(d.name,d)};t["default"]=d},4:function(e,t){e.exports=i("d010")}})},8119:function(e,t,i){i("693d"),i("dfe5"),i("301c"),i("4e71"),e.exports=i("5524").Symbol},8122:function(e,t,i){"use strict";t.__esModule=!0,t.isEmpty=t.isEqual=t.arrayEquals=t.looseEqual=t.capitalize=t.kebabCase=t.autoprefixer=t.isFirefox=t.isEdge=t.isIE=t.coerceTruthyValueToArray=t.arrayFind=t.arrayFindIndex=t.escapeRegexpString=t.valueEquals=t.generateId=t.getValueByPath=void 0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.noop=l,t.hasOwn=u,t.toObject=h,t.getPropByPath=p,t.rafThrottle=v,t.objToArray=E;var r=i("2b0e"),o=a(r),s=i("a742");function a(e){return e&&e.__esModule?e:{default:e}}var c=Object.prototype.hasOwnProperty;function l(){}function u(e,t){return c.call(e,t)}function d(e,t){for(var i in t)e[i]=t[i];return e}function h(e){for(var t={},i=0;i<e.length;i++)e[i]&&d(t,e[i]);return t}t.getValueByPath=function(e,t){t=t||"";for(var i=t.split("."),n=e,r=null,o=0,s=i.length;o<s;o++){var a=i[o];if(!n)break;if(o===s-1){r=n[a];break}n=n[a]}return r};function p(e,t,i){var n=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var r=t.split("."),o=0,s=r.length;o<s-1;++o){if(!n&&!i)break;var a=r[o];if(!(a in n)){if(i)throw new Error("please transfer a valid prop path to form item!");break}n=n[a]}return{o:n,k:r[o],v:n?n[r[o]]:null}}t.generateId=function(){return Math.floor(1e4*Math.random())},t.valueEquals=function(e,t){if(e===t)return!0;if(!(e instanceof Array))return!1;if(!(t instanceof Array))return!1;if(e.length!==t.length)return!1;for(var i=0;i!==e.length;++i)if(e[i]!==t[i])return!1;return!0},t.escapeRegexpString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(e).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")};var f=t.arrayFindIndex=function(e,t){for(var i=0;i!==e.length;++i)if(t(e[i]))return i;return-1},g=(t.arrayFind=function(e,t){var i=f(e,t);return-1!==i?e[i]:void 0},t.coerceTruthyValueToArray=function(e){return Array.isArray(e)?e:e?[e]:[]},t.isIE=function(){return!o.default.prototype.$isServer&&!isNaN(Number(document.documentMode))},t.isEdge=function(){return!o.default.prototype.$isServer&&navigator.userAgent.indexOf("Edge")>-1},t.isFirefox=function(){return!o.default.prototype.$isServer&&!!window.navigator.userAgent.match(/firefox/i)},t.autoprefixer=function(e){if("object"!==("undefined"===typeof e?"undefined":n(e)))return e;var t=["transform","transition","animation"],i=["ms-","webkit-"];return t.forEach((function(t){var n=e[t];t&&n&&i.forEach((function(i){e[i+t]=n}))})),e},t.kebabCase=function(e){var t=/([^-])([A-Z])/g;return e.replace(t,"$1-$2").replace(t,"$1-$2").toLowerCase()},t.capitalize=function(e){return(0,s.isString)(e)?e.charAt(0).toUpperCase()+e.slice(1):e},t.looseEqual=function(e,t){var i=(0,s.isObject)(e),n=(0,s.isObject)(t);return i&&n?JSON.stringify(e)===JSON.stringify(t):!i&&!n&&String(e)===String(t)}),m=t.arrayEquals=function(e,t){if(e=e||[],t=t||[],e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!g(e[i],t[i]))return!1;return!0},_=(t.isEqual=function(e,t){return Array.isArray(e)&&Array.isArray(t)?m(e,t):g(e,t)},t.isEmpty=function(e){if(null==e)return!0;if("boolean"===typeof e)return!1;if("number"===typeof e)return!e;if(e instanceof Error)return""===e.message;switch(Object.prototype.toString.call(e)){case"[object String]":case"[object Array]":return!e.length;case"[object File]":case"[object Map]":case"[object Set]":return!e.size;case"[object Object]":return!Object.keys(e).length}return!1});function v(e){var t=!1;return function(){for(var i=this,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];t||(t=!0,window.requestAnimationFrame((function(n){e.apply(i,r),t=!1})))}}function E(e){return Array.isArray(e)?e:_(e)?[]:[e]}},"81d5":function(e,t,i){"use strict";var n=i("7b0b"),r=i("23cb"),o=i("07fa");e.exports=function(e){var t=n(this),i=o(t),s=arguments.length,a=r(s>1?arguments[1]:void 0,i),c=s>2?arguments[2]:void 0,l=void 0===c?i:r(c,i);while(l>a)t[a++]=e;return t}},"825a":function(e,t,i){var n=i("da84"),r=i("861d"),o=n.String,s=n.TypeError;e.exports=function(e){if(r(e))return e;throw s(o(e)+" is not an object")}},"82f8":function(e,t,i){"use strict";var n=i("ebb5"),r=i("4d64").includes,o=n.aTypedArray,s=n.exportTypedArrayMethod;s("includes",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"83ab":function(e,t,i){var n=i("d039");e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"83b9":function(e,t,i){"use strict";var n=i("d925"),r=i("e683");e.exports=function(e,t){return e&&!n(t)?r(e,t):t}},8418:function(e,t,i){"use strict";var n=i("a04b"),r=i("9bf2"),o=i("5c6c");e.exports=function(e,t,i){var s=n(t);s in e?r.f(e,s,o(0,i)):e[s]=i}},"845f":function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=87)}({0:function(e,t,i){"use strict";function n(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},87:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-button-group"},[e._t("default")],2)},r=[];n._withStripped=!0;var o={name:"ElButtonGroup"},s=o,a=i(0),c=Object(a["a"])(s,n,r,!1,null,null,null);c.options.__file="packages/button/src/button-group.vue";var l=c.exports;l.install=function(e){e.component(l.name,l)};t["default"]=l}})},"848b":function(e,t,i){"use strict";var n=i("5cce").version,r={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){r[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));var o={};function s(e,t,i){if("object"!==typeof e)throw new TypeError("options must be an object");var n=Object.keys(e),r=n.length;while(r-- >0){var o=n[r],s=t[o];if(s){var a=e[o],c=void 0===a||s(a,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==i)throw Error("Unknown option "+o)}}r.transitional=function(e,t,i){function r(e,t){return"[Axios v"+n+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return function(i,n,s){if(!1===e)throw new Error(r(n," has been removed"+(t?" in "+t:"")));return t&&!o[n]&&(o[n]=!0,console.warn(r(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,n,s)}},e.exports={assertOptions:s,validators:r}},"84c3":function(e,t,i){var n=i("74e8");n("Uint16",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},"85e7":function(e,t,i){var n=i("1a14"),r=i("77e9"),o=i("9876");e.exports=i("0bad")?Object.defineProperties:function(e,t){r(e);var i,s=o(t),a=s.length,c=0;while(a>c)n.f(e,i=s[c++],t[i]);return e}},"861d":function(e,t,i){var n=i("1626");e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},8925:function(e,t,i){var n=i("e330"),r=i("1626"),o=i("c6cd"),s=n(Function.toString);r(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},"8a0d":function(e,t){e.exports={}},"8a59":function(e,t,i){var n=i("74e8");n("Uint8",(function(e){return function(t,i,n){return e(this,t,i,n)}}),!0)},"8aa5":function(e,t,i){"use strict";var n=i("6547").charAt;e.exports=function(e,t,i){return t+(i?n(e,t).length:1)}},"8aa7":function(e,t,i){var n=i("da84"),r=i("d039"),o=i("1c7e"),s=i("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,a=n.ArrayBuffer,c=n.Int8Array;e.exports=!s||!r((function(){c(1)}))||!r((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||r((function(){return 1!==new c(new a(2),1,void 0).length}))},"8b09":function(e,t,i){var n=i("74e8");n("Int16",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},"8b1a":function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},"8bbc":function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=130)}({0:function(e,t,i){"use strict";function n(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},130:function(e,t,i){"use strict";i.r(t);var n,r,o={name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String,effect:{type:String,default:"light",validator:function(e){return-1!==["dark","light","plain"].indexOf(e)}}},methods:{handleClose:function(e){e.stopPropagation(),this.$emit("close",e)},handleClick:function(e){this.$emit("click",e)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(e){var t=this.type,i=this.tagSize,n=this.hit,r=this.effect,o=["el-tag",t?"el-tag--"+t:"",i?"el-tag--"+i:"",r?"el-tag--"+r:"",n&&"is-hit"],s=e("span",{class:o,style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&e("i",{class:"el-tag__close el-icon-close",on:{click:this.handleClose}})]);return this.disableTransitions?s:e("transition",{attrs:{name:"el-zoom-in-center"}},[s])}},s=o,a=i(0),c=Object(a["a"])(s,n,r,!1,null,null,null);c.options.__file="packages/tag/src/tag.vue";var l=c.exports;l.install=function(e){e.component(l.name,l)};t["default"]=l}})},"8c4f":function(e,t,i){"use strict";
/*!
  * vue-router v3.5.3
  * (c) 2021 Evan You
  * @license MIT
  */function n(e,t){for(var i in t)e[i]=t[i];return e}var r=/[!'()*]/g,o=function(e){return"%"+e.charCodeAt(0).toString(16)},s=/%2C/g,a=function(e){return encodeURIComponent(e).replace(r,o).replace(s,",")};function c(e){try{return decodeURIComponent(e)}catch(t){0}return e}function l(e,t,i){void 0===t&&(t={});var n,r=i||d;try{n=r(e||"")}catch(a){n={}}for(var o in t){var s=t[o];n[o]=Array.isArray(s)?s.map(u):u(s)}return n}var u=function(e){return null==e||"object"===typeof e?e:String(e)};function d(e){var t={};return e=e.trim().replace(/^(\?|#|&)/,""),e?(e.split("&").forEach((function(e){var i=e.replace(/\+/g," ").split("="),n=c(i.shift()),r=i.length>0?c(i.join("=")):null;void 0===t[n]?t[n]=r:Array.isArray(t[n])?t[n].push(r):t[n]=[t[n],r]})),t):t}function h(e){var t=e?Object.keys(e).map((function(t){var i=e[t];if(void 0===i)return"";if(null===i)return a(t);if(Array.isArray(i)){var n=[];return i.forEach((function(e){void 0!==e&&(null===e?n.push(a(t)):n.push(a(t)+"="+a(e)))})),n.join("&")}return a(t)+"="+a(i)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var p=/\/?$/;function f(e,t,i,n){var r=n&&n.options.stringifyQuery,o=t.query||{};try{o=g(o)}catch(a){}var s={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",query:o,params:t.params||{},fullPath:v(t,r),matched:e?_(e):[]};return i&&(s.redirectedFrom=v(i,r)),Object.freeze(s)}function g(e){if(Array.isArray(e))return e.map(g);if(e&&"object"===typeof e){var t={};for(var i in e)t[i]=g(e[i]);return t}return e}var m=f(null,{path:"/"});function _(e){var t=[];while(e)t.unshift(e),e=e.parent;return t}function v(e,t){var i=e.path,n=e.query;void 0===n&&(n={});var r=e.hash;void 0===r&&(r="");var o=t||h;return(i||"/")+o(n)+r}function E(e,t,i){return t===m?e===t:!!t&&(e.path&&t.path?e.path.replace(p,"")===t.path.replace(p,"")&&(i||e.hash===t.hash&&A(e.query,t.query)):!(!e.name||!t.name)&&(e.name===t.name&&(i||e.hash===t.hash&&A(e.query,t.query)&&A(e.params,t.params))))}function A(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var i=Object.keys(e).sort(),n=Object.keys(t).sort();return i.length===n.length&&i.every((function(i,r){var o=e[i],s=n[r];if(s!==i)return!1;var a=t[i];return null==o||null==a?o===a:"object"===typeof o&&"object"===typeof a?A(o,a):String(o)===String(a)}))}function y(e,t){return 0===e.path.replace(p,"/").indexOf(t.path.replace(p,"/"))&&(!t.hash||e.hash===t.hash)&&S(e.query,t.query)}function S(e,t){for(var i in t)if(!(i in e))return!1;return!0}function C(e){for(var t=0;t<e.matched.length;t++){var i=e.matched[t];for(var n in i.instances){var r=i.instances[n],o=i.enteredCbs[n];if(r&&o){delete i.enteredCbs[n];for(var s=0;s<o.length;s++)r._isBeingDestroyed||o[s](r)}}}}var b={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var i=t.props,r=t.children,o=t.parent,s=t.data;s.routerView=!0;var a=o.$createElement,c=i.name,l=o.$route,u=o._routerViewCache||(o._routerViewCache={}),d=0,h=!1;while(o&&o._routerRoot!==o){var p=o.$vnode?o.$vnode.data:{};p.routerView&&d++,p.keepAlive&&o._directInactive&&o._inactive&&(h=!0),o=o.$parent}if(s.routerViewDepth=d,h){var f=u[c],g=f&&f.component;return g?(f.configProps&&T(g,s,f.route,f.configProps),a(g,s,r)):a()}var m=l.matched[d],_=m&&m.components[c];if(!m||!_)return u[c]=null,a();u[c]={component:_},s.registerRouteInstance=function(e,t){var i=m.instances[c];(t&&i!==e||!t&&i===e)&&(m.instances[c]=t)},(s.hook||(s.hook={})).prepatch=function(e,t){m.instances[c]=t.componentInstance},s.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==m.instances[c]&&(m.instances[c]=e.componentInstance),C(l)};var v=m.props&&m.props[c];return v&&(n(u[c],{route:l,configProps:v}),T(_,s,l,v)),a(_,s,r)}};function T(e,t,i,r){var o=t.props=I(i,r);if(o){o=t.props=n({},o);var s=t.attrs=t.attrs||{};for(var a in o)e.props&&a in e.props||(s[a]=o[a],delete o[a])}}function I(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0;default:0}}function R(e,t,i){var n=e.charAt(0);if("/"===n)return e;if("?"===n||"#"===n)return t+e;var r=t.split("/");i&&r[r.length-1]||r.pop();for(var o=e.replace(/^\//,"").split("/"),s=0;s<o.length;s++){var a=o[s];".."===a?r.pop():"."!==a&&r.push(a)}return""!==r[0]&&r.unshift(""),r.join("/")}function w(e){var t="",i="",n=e.indexOf("#");n>=0&&(t=e.slice(n),e=e.slice(0,n));var r=e.indexOf("?");return r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),{path:e,query:i,hash:t}}function O(e){return e.replace(/\/+/g,"/")}var k=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},N=Y,L=B,P=U,D=j,M=Z,x=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function B(e,t){var i,n=[],r=0,o=0,s="",a=t&&t.delimiter||"/";while(null!=(i=x.exec(e))){var c=i[0],l=i[1],u=i.index;if(s+=e.slice(o,u),o=u+c.length,l)s+=l[1];else{var d=e[o],h=i[2],p=i[3],f=i[4],g=i[5],m=i[6],_=i[7];s&&(n.push(s),s="");var v=null!=h&&null!=d&&d!==h,E="+"===m||"*"===m,A="?"===m||"*"===m,y=i[2]||a,S=f||g;n.push({name:p||r++,prefix:h||"",delimiter:y,optional:A,repeat:E,partial:v,asterisk:!!_,pattern:S?H(S):_?".*":"[^"+G(y)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&n.push(s),n}function U(e,t){return j(B(e,t),t)}function F(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function V(e){return encodeURI(e).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function j(e,t){for(var i=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(i[n]=new RegExp("^(?:"+e[n].pattern+")$",W(t)));return function(t,n){for(var r="",o=t||{},s=n||{},a=s.pretty?F:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var u,d=o[l.name];if(null==d){if(l.optional){l.partial&&(r+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(k(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<d.length;h++){if(u=a(d[h]),!i[c].test(u))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(u)+"`");r+=(0===h?l.prefix:l.delimiter)+u}}else{if(u=l.asterisk?V(d):a(d),!i[c].test(u))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+u+'"');r+=l.prefix+u}}else r+=l}return r}}function G(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function H(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Q(e,t){return e.keys=t,e}function W(e){return e&&e.sensitive?"":"i"}function q(e,t){var i=e.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Q(e,t)}function $(e,t,i){for(var n=[],r=0;r<e.length;r++)n.push(Y(e[r],t,i).source);var o=new RegExp("(?:"+n.join("|")+")",W(i));return Q(o,t)}function z(e,t,i){return Z(B(e,i),t,i)}function Z(e,t,i){k(t)||(i=t||i,t=[]),i=i||{};for(var n=i.strict,r=!1!==i.end,o="",s=0;s<e.length;s++){var a=e[s];if("string"===typeof a)o+=G(a);else{var c=G(a.prefix),l="(?:"+a.pattern+")";t.push(a),a.repeat&&(l+="(?:"+c+l+")*"),l=a.optional?a.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")",o+=l}}var u=G(i.delimiter||"/"),d=o.slice(-u.length)===u;return n||(o=(d?o.slice(0,-u.length):o)+"(?:"+u+"(?=$))?"),o+=r?"$":n&&d?"":"(?="+u+"|$)",Q(new RegExp("^"+o,W(i)),t)}function Y(e,t,i){return k(t)||(i=t||i,t=[]),i=i||{},e instanceof RegExp?q(e,t):k(e)?$(e,t,i):z(e,t,i)}N.parse=L,N.compile=P,N.tokensToFunction=D,N.tokensToRegExp=M;var K=Object.create(null);function J(e,t,i){t=t||{};try{var n=K[e]||(K[e]=N.compile(e));return"string"===typeof t.pathMatch&&(t[0]=t.pathMatch),n(t,{pretty:!0})}catch(r){return""}finally{delete t[0]}}function X(e,t,i,r){var o="string"===typeof e?{path:e}:e;if(o._normalized)return o;if(o.name){o=n({},e);var s=o.params;return s&&"object"===typeof s&&(o.params=n({},s)),o}if(!o.path&&o.params&&t){o=n({},o),o._normalized=!0;var a=n(n({},t.params),o.params);if(t.name)o.name=t.name,o.params=a;else if(t.matched.length){var c=t.matched[t.matched.length-1].path;o.path=J(c,a,"path "+t.path)}else 0;return o}var u=w(o.path||""),d=t&&t.path||"/",h=u.path?R(u.path,d,i||o.append):d,p=l(u.query,o.query,r&&r.options.parseQuery),f=o.hash||u.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:h,query:p,hash:f}}var ee,te=[String,Object],ie=[String,Array],ne=function(){},re={name:"RouterLink",props:{to:{type:te,required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:ie,default:"click"}},render:function(e){var t=this,i=this.$router,r=this.$route,o=i.resolve(this.to,r,this.append),s=o.location,a=o.route,c=o.href,l={},u=i.options.linkActiveClass,d=i.options.linkExactActiveClass,h=null==u?"router-link-active":u,p=null==d?"router-link-exact-active":d,g=null==this.activeClass?h:this.activeClass,m=null==this.exactActiveClass?p:this.exactActiveClass,_=a.redirectedFrom?f(null,X(a.redirectedFrom),null,i):a;l[m]=E(r,_,this.exactPath),l[g]=this.exact||this.exactPath?l[m]:y(r,_);var v=l[m]?this.ariaCurrentValue:null,A=function(e){oe(e)&&(t.replace?i.replace(s,ne):i.push(s,ne))},S={click:oe};Array.isArray(this.event)?this.event.forEach((function(e){S[e]=A})):S[this.event]=A;var C={class:l},b=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:c,route:a,navigate:A,isActive:l[g],isExactActive:l[m]});if(b){if(1===b.length)return b[0];if(b.length>1||!b.length)return 0===b.length?e():e("span",{},b)}if("a"===this.tag)C.on=S,C.attrs={href:c,"aria-current":v};else{var T=se(this.$slots.default);if(T){T.isStatic=!1;var I=T.data=n({},T.data);for(var R in I.on=I.on||{},I.on){var w=I.on[R];R in S&&(I.on[R]=Array.isArray(w)?w:[w])}for(var O in S)O in I.on?I.on[O].push(S[O]):I.on[O]=A;var k=T.data.attrs=n({},T.data.attrs);k.href=c,k["aria-current"]=v}else C.on=S}return e(this.tag,C,this.$slots.default)}};function oe(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function se(e){if(e)for(var t,i=0;i<e.length;i++){if(t=e[i],"a"===t.tag)return t;if(t.children&&(t=se(t.children)))return t}}function ae(e){if(!ae.installed||ee!==e){ae.installed=!0,ee=e;var t=function(e){return void 0!==e},i=function(e,i){var n=e.$options._parentVnode;t(n)&&t(n=n.data)&&t(n=n.registerRouteInstance)&&n(e,i)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,i(this,this)},destroyed:function(){i(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",b),e.component("RouterLink",re);var n=e.config.optionMergeStrategies;n.beforeRouteEnter=n.beforeRouteLeave=n.beforeRouteUpdate=n.created}}var ce="undefined"!==typeof window;function le(e,t,i,n,r){var o=t||[],s=i||Object.create(null),a=n||Object.create(null);e.forEach((function(e){ue(o,s,a,e,r)}));for(var c=0,l=o.length;c<l;c++)"*"===o[c]&&(o.push(o.splice(c,1)[0]),l--,c--);return{pathList:o,pathMap:s,nameMap:a}}function ue(e,t,i,n,r,o){var s=n.path,a=n.name;var c=n.pathToRegexpOptions||{},l=he(s,r,c.strict);"boolean"===typeof n.caseSensitive&&(c.sensitive=n.caseSensitive);var u={path:l,regex:de(l,c),components:n.components||{default:n.component},alias:n.alias?"string"===typeof n.alias?[n.alias]:n.alias:[],instances:{},enteredCbs:{},name:a,parent:r,matchAs:o,redirect:n.redirect,beforeEnter:n.beforeEnter,meta:n.meta||{},props:null==n.props?{}:n.components?n.props:{default:n.props}};if(n.children&&n.children.forEach((function(n){var r=o?O(o+"/"+n.path):void 0;ue(e,t,i,n,u,r)})),t[u.path]||(e.push(u.path),t[u.path]=u),void 0!==n.alias)for(var d=Array.isArray(n.alias)?n.alias:[n.alias],h=0;h<d.length;++h){var p=d[h];0;var f={path:p,children:n.children};ue(e,t,i,f,r,u.path||"/")}a&&(i[a]||(i[a]=u))}function de(e,t){var i=N(e,[],t);return i}function he(e,t,i){return i||(e=e.replace(/\/$/,"")),"/"===e[0]||null==t?e:O(t.path+"/"+e)}function pe(e,t){var i=le(e),n=i.pathList,r=i.pathMap,o=i.nameMap;function s(e){le(e,n,r,o)}function a(e,t){var i="object"!==typeof e?o[e]:void 0;le([t||e],n,r,o,i),i&&i.alias.length&&le(i.alias.map((function(e){return{path:e,children:[t]}})),n,r,o,i)}function c(){return n.map((function(e){return r[e]}))}function l(e,i,s){var a=X(e,i,!1,t),c=a.name;if(c){var l=o[c];if(!l)return h(null,a);var u=l.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!==typeof a.params&&(a.params={}),i&&"object"===typeof i.params)for(var d in i.params)!(d in a.params)&&u.indexOf(d)>-1&&(a.params[d]=i.params[d]);return a.path=J(l.path,a.params,'named route "'+c+'"'),h(l,a,s)}if(a.path){a.params={};for(var p=0;p<n.length;p++){var f=n[p],g=r[f];if(fe(g.regex,a.path,a.params))return h(g,a,s)}}return h(null,a)}function u(e,i){var n=e.redirect,r="function"===typeof n?n(f(e,i,null,t)):n;if("string"===typeof r&&(r={path:r}),!r||"object"!==typeof r)return h(null,i);var s=r,a=s.name,c=s.path,u=i.query,d=i.hash,p=i.params;if(u=s.hasOwnProperty("query")?s.query:u,d=s.hasOwnProperty("hash")?s.hash:d,p=s.hasOwnProperty("params")?s.params:p,a){o[a];return l({_normalized:!0,name:a,query:u,hash:d,params:p},void 0,i)}if(c){var g=ge(c,e),m=J(g,p,'redirect route with path "'+g+'"');return l({_normalized:!0,path:m,query:u,hash:d},void 0,i)}return h(null,i)}function d(e,t,i){var n=J(i,t.params,'aliased route with path "'+i+'"'),r=l({_normalized:!0,path:n});if(r){var o=r.matched,s=o[o.length-1];return t.params=r.params,h(s,t)}return h(null,t)}function h(e,i,n){return e&&e.redirect?u(e,n||i):e&&e.matchAs?d(e,i,e.matchAs):f(e,i,n,t)}return{match:l,addRoute:a,getRoutes:c,addRoutes:s}}function fe(e,t,i){var n=t.match(e);if(!n)return!1;if(!i)return!0;for(var r=1,o=n.length;r<o;++r){var s=e.keys[r-1];s&&(i[s.name||"pathMatch"]="string"===typeof n[r]?c(n[r]):n[r])}return!0}function ge(e,t){return R(e,t.parent?t.parent.path:"/",!0)}var me=ce&&window.performance&&window.performance.now?window.performance:Date;function _e(){return me.now().toFixed(3)}var ve=_e();function Ee(){return ve}function Ae(e){return ve=e}var ye=Object.create(null);function Se(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,t=window.location.href.replace(e,""),i=n({},window.history.state);return i.key=Ee(),window.history.replaceState(i,"",t),window.addEventListener("popstate",Te),function(){window.removeEventListener("popstate",Te)}}function Ce(e,t,i,n){if(e.app){var r=e.options.scrollBehavior;r&&e.app.$nextTick((function(){var o=Ie(),s=r.call(e,t,i,n?o:null);s&&("function"===typeof s.then?s.then((function(e){Pe(e,o)})).catch((function(e){0})):Pe(s,o))}))}}function be(){var e=Ee();e&&(ye[e]={x:window.pageXOffset,y:window.pageYOffset})}function Te(e){be(),e.state&&e.state.key&&Ae(e.state.key)}function Ie(){var e=Ee();if(e)return ye[e]}function Re(e,t){var i=document.documentElement,n=i.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left-n.left-t.x,y:r.top-n.top-t.y}}function we(e){return Ne(e.x)||Ne(e.y)}function Oe(e){return{x:Ne(e.x)?e.x:window.pageXOffset,y:Ne(e.y)?e.y:window.pageYOffset}}function ke(e){return{x:Ne(e.x)?e.x:0,y:Ne(e.y)?e.y:0}}function Ne(e){return"number"===typeof e}var Le=/^#\d/;function Pe(e,t){var i="object"===typeof e;if(i&&"string"===typeof e.selector){var n=Le.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(n){var r=e.offset&&"object"===typeof e.offset?e.offset:{};r=ke(r),t=Re(n,r)}else we(e)&&(t=Oe(e))}else i&&we(e)&&(t=Oe(e));t&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:t.x,top:t.y,behavior:e.behavior}):window.scrollTo(t.x,t.y))}var De=ce&&function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"function"===typeof window.history.pushState)}();function Me(e,t){be();var i=window.history;try{if(t){var r=n({},i.state);r.key=Ee(),i.replaceState(r,"",e)}else i.pushState({key:Ae(_e())},"",e)}catch(o){window.location[t?"replace":"assign"](e)}}function xe(e){Me(e,!0)}function Be(e,t,i){var n=function(r){r>=e.length?i():e[r]?t(e[r],(function(){n(r+1)})):n(r+1)};n(0)}var Ue={redirected:2,aborted:4,cancelled:8,duplicated:16};function Fe(e,t){return He(e,t,Ue.redirected,'Redirected when going from "'+e.fullPath+'" to "'+We(t)+'" via a navigation guard.')}function Ve(e,t){var i=He(e,t,Ue.duplicated,'Avoided redundant navigation to current location: "'+e.fullPath+'".');return i.name="NavigationDuplicated",i}function je(e,t){return He(e,t,Ue.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+t.fullPath+'" with a new navigation.')}function Ge(e,t){return He(e,t,Ue.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+t.fullPath+'" via a navigation guard.')}function He(e,t,i,n){var r=new Error(n);return r._isRouter=!0,r.from=e,r.to=t,r.type=i,r}var Qe=["params","query","hash"];function We(e){if("string"===typeof e)return e;if("path"in e)return e.path;var t={};return Qe.forEach((function(i){i in e&&(t[i]=e[i])})),JSON.stringify(t,null,2)}function qe(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function $e(e,t){return qe(e)&&e._isRouter&&(null==t||e.type===t)}function ze(e){return function(t,i,n){var r=!1,o=0,s=null;Ze(e,(function(e,t,i,a){if("function"===typeof e&&void 0===e.cid){r=!0,o++;var c,l=Xe((function(t){Je(t)&&(t=t.default),e.resolved="function"===typeof t?t:ee.extend(t),i.components[a]=t,o--,o<=0&&n()})),u=Xe((function(e){var t="Failed to resolve async component "+a+": "+e;s||(s=qe(e)?e:new Error(t),n(s))}));try{c=e(l,u)}catch(h){u(h)}if(c)if("function"===typeof c.then)c.then(l,u);else{var d=c.component;d&&"function"===typeof d.then&&d.then(l,u)}}})),r||n()}}function Ze(e,t){return Ye(e.map((function(e){return Object.keys(e.components).map((function(i){return t(e.components[i],e.instances[i],e,i)}))})))}function Ye(e){return Array.prototype.concat.apply([],e)}var Ke="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function Je(e){return e.__esModule||Ke&&"Module"===e[Symbol.toStringTag]}function Xe(e){var t=!1;return function(){var i=[],n=arguments.length;while(n--)i[n]=arguments[n];if(!t)return t=!0,e.apply(this,i)}}var et=function(e,t){this.router=e,this.base=tt(t),this.current=m,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function tt(e){if(!e)if(ce){var t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}function it(e,t){var i,n=Math.max(e.length,t.length);for(i=0;i<n;i++)if(e[i]!==t[i])break;return{updated:t.slice(0,i),activated:t.slice(i),deactivated:e.slice(i)}}function nt(e,t,i,n){var r=Ze(e,(function(e,n,r,o){var s=rt(e,t);if(s)return Array.isArray(s)?s.map((function(e){return i(e,n,r,o)})):i(s,n,r,o)}));return Ye(n?r.reverse():r)}function rt(e,t){return"function"!==typeof e&&(e=ee.extend(e)),e.options[t]}function ot(e){return nt(e,"beforeRouteLeave",at,!0)}function st(e){return nt(e,"beforeRouteUpdate",at)}function at(e,t){if(t)return function(){return e.apply(t,arguments)}}function ct(e){return nt(e,"beforeRouteEnter",(function(e,t,i,n){return lt(e,i,n)}))}function lt(e,t,i){return function(n,r,o){return e(n,r,(function(e){"function"===typeof e&&(t.enteredCbs[i]||(t.enteredCbs[i]=[]),t.enteredCbs[i].push(e)),o(e)}))}}et.prototype.listen=function(e){this.cb=e},et.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},et.prototype.onError=function(e){this.errorCbs.push(e)},et.prototype.transitionTo=function(e,t,i){var n,r=this;try{n=this.router.match(e,this.current)}catch(s){throw this.errorCbs.forEach((function(e){e(s)})),s}var o=this.current;this.confirmTransition(n,(function(){r.updateRoute(n),t&&t(n),r.ensureURL(),r.router.afterHooks.forEach((function(e){e&&e(n,o)})),r.ready||(r.ready=!0,r.readyCbs.forEach((function(e){e(n)})))}),(function(e){i&&i(e),e&&!r.ready&&($e(e,Ue.redirected)&&o===m||(r.ready=!0,r.readyErrorCbs.forEach((function(t){t(e)}))))}))},et.prototype.confirmTransition=function(e,t,i){var n=this,r=this.current;this.pending=e;var o=function(e){!$e(e)&&qe(e)&&(n.errorCbs.length?n.errorCbs.forEach((function(t){t(e)})):console.error(e)),i&&i(e)},s=e.matched.length-1,a=r.matched.length-1;if(E(e,r)&&s===a&&e.matched[s]===r.matched[a])return this.ensureURL(),e.hash&&Ce(this.router,r,e,!1),o(Ve(r,e));var c=it(this.current.matched,e.matched),l=c.updated,u=c.deactivated,d=c.activated,h=[].concat(ot(u),this.router.beforeHooks,st(l),d.map((function(e){return e.beforeEnter})),ze(d)),p=function(t,i){if(n.pending!==e)return o(je(r,e));try{t(e,r,(function(t){!1===t?(n.ensureURL(!0),o(Ge(r,e))):qe(t)?(n.ensureURL(!0),o(t)):"string"===typeof t||"object"===typeof t&&("string"===typeof t.path||"string"===typeof t.name)?(o(Fe(r,e)),"object"===typeof t&&t.replace?n.replace(t):n.push(t)):i(t)}))}catch(s){o(s)}};Be(h,p,(function(){var i=ct(d),s=i.concat(n.router.resolveHooks);Be(s,p,(function(){if(n.pending!==e)return o(je(r,e));n.pending=null,t(e),n.router.app&&n.router.app.$nextTick((function(){C(e)}))}))}))},et.prototype.updateRoute=function(e){this.current=e,this.cb&&this.cb(e)},et.prototype.setupListeners=function(){},et.prototype.teardown=function(){this.listeners.forEach((function(e){e()})),this.listeners=[],this.current=m,this.pending=null};var ut=function(e){function t(t,i){e.call(this,t,i),this._startLocation=dt(this.base)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,i=t.options.scrollBehavior,n=De&&i;n&&this.listeners.push(Se());var r=function(){var i=e.current,r=dt(e.base);e.current===m&&r===e._startLocation||e.transitionTo(r,(function(e){n&&Ce(t,e,i,!0)}))};window.addEventListener("popstate",r),this.listeners.push((function(){window.removeEventListener("popstate",r)}))}},t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,i){var n=this,r=this,o=r.current;this.transitionTo(e,(function(e){Me(O(n.base+e.fullPath)),Ce(n.router,e,o,!1),t&&t(e)}),i)},t.prototype.replace=function(e,t,i){var n=this,r=this,o=r.current;this.transitionTo(e,(function(e){xe(O(n.base+e.fullPath)),Ce(n.router,e,o,!1),t&&t(e)}),i)},t.prototype.ensureURL=function(e){if(dt(this.base)!==this.current.fullPath){var t=O(this.base+this.current.fullPath);e?Me(t):xe(t)}},t.prototype.getCurrentLocation=function(){return dt(this.base)},t}(et);function dt(e){var t=window.location.pathname,i=t.toLowerCase(),n=e.toLowerCase();return!e||i!==n&&0!==i.indexOf(O(n+"/"))||(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var ht=function(e){function t(t,i,n){e.call(this,t,i),n&&pt(this.base)||ft()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,i=t.options.scrollBehavior,n=De&&i;n&&this.listeners.push(Se());var r=function(){var t=e.current;ft()&&e.transitionTo(gt(),(function(i){n&&Ce(e.router,i,t,!0),De||vt(i.fullPath)}))},o=De?"popstate":"hashchange";window.addEventListener(o,r),this.listeners.push((function(){window.removeEventListener(o,r)}))}},t.prototype.push=function(e,t,i){var n=this,r=this,o=r.current;this.transitionTo(e,(function(e){_t(e.fullPath),Ce(n.router,e,o,!1),t&&t(e)}),i)},t.prototype.replace=function(e,t,i){var n=this,r=this,o=r.current;this.transitionTo(e,(function(e){vt(e.fullPath),Ce(n.router,e,o,!1),t&&t(e)}),i)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;gt()!==t&&(e?_t(t):vt(t))},t.prototype.getCurrentLocation=function(){return gt()},t}(et);function pt(e){var t=dt(e);if(!/^\/#/.test(t))return window.location.replace(O(e+"/#"+t)),!0}function ft(){var e=gt();return"/"===e.charAt(0)||(vt("/"+e),!1)}function gt(){var e=window.location.href,t=e.indexOf("#");return t<0?"":(e=e.slice(t+1),e)}function mt(e){var t=window.location.href,i=t.indexOf("#"),n=i>=0?t.slice(0,i):t;return n+"#"+e}function _t(e){De?Me(mt(e)):window.location.hash=e}function vt(e){De?xe(mt(e)):window.location.replace(mt(e))}var Et=function(e){function t(t,i){e.call(this,t,i),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,i){var n=this;this.transitionTo(e,(function(e){n.stack=n.stack.slice(0,n.index+1).concat(e),n.index++,t&&t(e)}),i)},t.prototype.replace=function(e,t,i){var n=this;this.transitionTo(e,(function(e){n.stack=n.stack.slice(0,n.index).concat(e),t&&t(e)}),i)},t.prototype.go=function(e){var t=this,i=this.index+e;if(!(i<0||i>=this.stack.length)){var n=this.stack[i];this.confirmTransition(n,(function(){var e=t.current;t.index=i,t.updateRoute(n),t.router.afterHooks.forEach((function(t){t&&t(n,e)}))}),(function(e){$e(e,Ue.duplicated)&&(t.index=i)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(et),At=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=pe(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!De&&!1!==e.fallback,this.fallback&&(t="hash"),ce||(t="abstract"),this.mode=t,t){case"history":this.history=new ut(this,e.base);break;case"hash":this.history=new ht(this,e.base,this.fallback);break;case"abstract":this.history=new Et(this,e.base);break;default:0}},yt={currentRoute:{configurable:!0}};function St(e,t){return e.push(t),function(){var i=e.indexOf(t);i>-1&&e.splice(i,1)}}function Ct(e,t,i){var n="hash"===i?"#"+t:t;return e?O(e+"/"+n):n}At.prototype.match=function(e,t,i){return this.matcher.match(e,t,i)},yt.currentRoute.get=function(){return this.history&&this.history.current},At.prototype.init=function(e){var t=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var i=t.apps.indexOf(e);i>-1&&t.apps.splice(i,1),t.app===e&&(t.app=t.apps[0]||null),t.app||t.history.teardown()})),!this.app){this.app=e;var i=this.history;if(i instanceof ut||i instanceof ht){var n=function(e){var n=i.current,r=t.options.scrollBehavior,o=De&&r;o&&"fullPath"in e&&Ce(t,e,n,!1)},r=function(e){i.setupListeners(),n(e)};i.transitionTo(i.getCurrentLocation(),r,r)}i.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},At.prototype.beforeEach=function(e){return St(this.beforeHooks,e)},At.prototype.beforeResolve=function(e){return St(this.resolveHooks,e)},At.prototype.afterEach=function(e){return St(this.afterHooks,e)},At.prototype.onReady=function(e,t){this.history.onReady(e,t)},At.prototype.onError=function(e){this.history.onError(e)},At.prototype.push=function(e,t,i){var n=this;if(!t&&!i&&"undefined"!==typeof Promise)return new Promise((function(t,i){n.history.push(e,t,i)}));this.history.push(e,t,i)},At.prototype.replace=function(e,t,i){var n=this;if(!t&&!i&&"undefined"!==typeof Promise)return new Promise((function(t,i){n.history.replace(e,t,i)}));this.history.replace(e,t,i)},At.prototype.go=function(e){this.history.go(e)},At.prototype.back=function(){this.go(-1)},At.prototype.forward=function(){this.go(1)},At.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},At.prototype.resolve=function(e,t,i){t=t||this.history.current;var n=X(e,t,i,this),r=this.match(n,t),o=r.redirectedFrom||r.fullPath,s=this.history.base,a=Ct(s,o,this.mode);return{location:n,route:r,href:a,normalizedTo:n,resolved:r}},At.prototype.getRoutes=function(){return this.matcher.getRoutes()},At.prototype.addRoute=function(e,t){this.matcher.addRoute(e,t),this.history.current!==m&&this.history.transitionTo(this.history.getCurrentLocation())},At.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==m&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(At.prototype,yt),At.install=ae,At.version="3.5.3",At.isNavigationFailure=$e,At.NavigationFailureType=Ue,At.START_LOCATION=m,ce&&window.Vue&&window.Vue.use(At),t["a"]=At},"8df4":function(e,t,i){"use strict";var n=i("7a77");function r(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;this.promise.then((function(e){if(i._listeners){var t,n=i._listeners.length;for(t=0;t<n;t++)i._listeners[t](e);i._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},e((function(e){i.reason||(i.reason=new n(e),t(i.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e,t=new r((function(t){e=t}));return{token:t,cancel:e}},e.exports=r},"8eb7":function(e,t){var i,n,r,o,s,a,c,l,u,d,h,p,f,g,m,_=!1;function v(){if(!_){_=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),v=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(p=/\b(iPhone|iP[ao]d)/.exec(e),f=/\b(iP[ao]d)/.exec(e),d=/Android/i.exec(e),g=/FBAN\/\w+;/i.exec(e),m=/Mobile/i.exec(e),h=!!/Win64/.exec(e),t){i=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,i&&document&&document.documentMode&&(i=document.documentMode);var E=/(?:Trident\/(\d+.\d+))/.exec(e);a=E?parseFloat(E[1])+4:i,n=t[2]?parseFloat(t[2]):NaN,r=t[3]?parseFloat(t[3]):NaN,o=t[4]?parseFloat(t[4]):NaN,o?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),s=t&&t[1]?parseFloat(t[1]):NaN):s=NaN}else i=n=r=s=o=NaN;if(v){if(v[1]){var A=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);c=!A||parseFloat(A[1].replace("_","."))}else c=!1;l=!!v[2],u=!!v[3]}else c=l=u=!1}}var E={ie:function(){return v()||i},ieCompatibilityMode:function(){return v()||a>i},ie64:function(){return E.ie()&&h},firefox:function(){return v()||n},opera:function(){return v()||r},webkit:function(){return v()||o},safari:function(){return E.webkit()},chrome:function(){return v()||s},windows:function(){return v()||l},osx:function(){return v()||c},linux:function(){return v()||u},iphone:function(){return v()||p},mobile:function(){return v()||p||f||d||m},nativeApp:function(){return v()||g},android:function(){return v()||d},ipad:function(){return v()||f}};e.exports=E},"907a":function(e,t,i){"use strict";var n=i("ebb5"),r=i("07fa"),o=i("5926"),s=n.aTypedArray,a=n.exportTypedArrayMethod;a("at",(function(e){var t=s(this),i=r(t),n=o(e),a=n>=0?n:i+n;return a<0||a>=i?void 0:t[a]}))},"90e3":function(e,t,i){var n=i("e330"),r=0,o=Math.random(),s=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++r+o,36)}},9112:function(e,t,i){var n=i("83ab"),r=i("9bf2"),o=i("5c6c");e.exports=n?function(e,t,i){return r.f(e,t,o(1,i))}:function(e,t,i){return e[t]=i,e}},9141:function(e,t,i){var n=i("ef08").document;e.exports=n&&n.documentElement},9152:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,i,n,r){var o,s,a=8*r-n-1,c=(1<<a)-1,l=c>>1,u=-7,d=i?r-1:0,h=i?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=l}return(p?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,i,n,r,o){var s,a,c,l=8*o-r-1,u=(1<<l)-1,d=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,f=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),t+=s+d>=1?h/c:h*Math.pow(2,1-d),t*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*c-1)*Math.pow(2,r),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;e[i+p]=255&a,p+=f,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;e[i+p]=255&s,p+=f,s/=256,l-=8);e[i+p-f]|=128*g}},9263:function(e,t,i){"use strict";var n=i("c65b"),r=i("e330"),o=i("577e"),s=i("ad6d"),a=i("9f7f"),c=i("5692"),l=i("7c73"),u=i("69f3").get,d=i("fce3"),h=i("107c"),p=c("native-string-replace",String.prototype.replace),f=RegExp.prototype.exec,g=f,m=r("".charAt),_=r("".indexOf),v=r("".replace),E=r("".slice),A=function(){var e=/a/,t=/b*/g;return n(f,e,"a"),n(f,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),y=a.BROKEN_CARET,S=void 0!==/()??/.exec("")[1],C=A||S||y||d||h;C&&(g=function(e){var t,i,r,a,c,d,h,C=this,b=u(C),T=o(e),I=b.raw;if(I)return I.lastIndex=C.lastIndex,t=n(g,I,T),C.lastIndex=I.lastIndex,t;var R=b.groups,w=y&&C.sticky,O=n(s,C),k=C.source,N=0,L=T;if(w&&(O=v(O,"y",""),-1===_(O,"g")&&(O+="g"),L=E(T,C.lastIndex),C.lastIndex>0&&(!C.multiline||C.multiline&&"\n"!==m(T,C.lastIndex-1))&&(k="(?: "+k+")",L=" "+L,N++),i=new RegExp("^(?:"+k+")",O)),S&&(i=new RegExp("^"+k+"$(?!\\s)",O)),A&&(r=C.lastIndex),a=n(f,w?i:C,L),w?a?(a.input=E(a.input,N),a[0]=E(a[0],N),a.index=C.lastIndex,C.lastIndex+=a[0].length):C.lastIndex=0:A&&a&&(C.lastIndex=C.global?a.index+a[0].length:r),S&&a&&a.length>1&&n(p,a[0],i,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)})),a&&R)for(a.groups=d=l(null),c=0;c<R.length;c++)h=R[c],d[h[0]]=a[h[1]];return a}),e.exports=g},"92f0":function(e,t,i){var n=i("1a14").f,r=i("9c0e"),o=i("cc15")("toStringTag");e.exports=function(e,t,i){e&&!r(e=i?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},"92fa":function(e,t){var i=/^(attrs|props|on|nativeOn|class|style|hook)$/;function n(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}}e.exports=function(e){return e.reduce((function(e,t){var r,o,s,a,c;for(s in t)if(r=e[s],o=t[s],r&&i.test(s))if("class"===s&&("string"===typeof r&&(c=r,e[s]=r={},r[c]=!0),"string"===typeof o&&(c=o,t[s]=o={},o[c]=!0)),"on"===s||"nativeOn"===s||"hook"===s)for(a in o)r[a]=n(r[a],o[a]);else if(Array.isArray(r))e[s]=r.concat(o);else if(Array.isArray(o))e[s]=[r].concat(o);else for(a in o)r[a]=o[a];else e[s]=t[s];return e}),{})}},"94ca":function(e,t,i){var n=i("d039"),r=i("1626"),o=/#|\.prototype\./,s=function(e,t){var i=c[a(e)];return i==u||i!=l&&(r(t)?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},9619:function(e,t,i){var n=i("597f"),r=i("0e15");e.exports={throttle:n,debounce:r}},"96cf":function(e,t,i){var n=function(e){"use strict";var t,i=Object.prototype,n=i.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(L){c=function(e,t,i){return e[t]=i}}function l(e,t,i,n){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),s=new O(n||[]);return o._invoke=T(e,i,s),o}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",f="completed",g={};function m(){}function _(){}function v(){}var E={};c(E,o,(function(){return this}));var A=Object.getPrototypeOf,y=A&&A(A(k([])));y&&y!==i&&n.call(y,o)&&(E=y);var S=v.prototype=m.prototype=Object.create(E);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,o,s,a){var c=u(e[r],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"===typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,s,a)}),(function(e){i("throw",e,s,a)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return i("throw",e,s,a)}))}a(c.arg)}var r;function o(e,n){function o(){return new t((function(t,r){i(e,n,t,r)}))}return r=r?r.then(o,o):o()}this._invoke=o}function T(e,t,i){var n=d;return function(r,o){if(n===p)throw new Error("Generator is already running");if(n===f){if("throw"===r)throw o;return N()}i.method=r,i.arg=o;while(1){var s=i.delegate;if(s){var a=I(s,i);if(a){if(a===g)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===d)throw n=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=p;var c=u(e,t,i);if("normal"===c.type){if(n=i.done?f:h,c.arg===g)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n=f,i.method="throw",i.arg=c.arg)}}}function I(e,i){var n=e.iterator[i.method];if(n===t){if(i.delegate=null,"throw"===i.method){if(e.iterator["return"]&&(i.method="return",i.arg=t,I(e,i),"throw"===i.method))return g;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=u(n,e.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,g;var o=r.arg;return o?o.done?(i[e.resultName]=o.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,g):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function k(e){if(e){var i=e[o];if(i)return i.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function i(){while(++r<e.length)if(n.call(e,r))return i.value=e[r],i.done=!1,i;return i.value=t,i.done=!0,i};return s.next=s}}return{next:N}}function N(){return{value:t,done:!0}}return _.prototype=v,c(S,"constructor",v),c(v,"constructor",_),_.displayName=c(v,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,a,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},C(b.prototype),c(b.prototype,s,(function(){return this})),e.AsyncIterator=b,e.async=function(t,i,n,r,o){void 0===o&&(o=Promise);var s=new b(l(t,i,n,r),o);return e.isGeneratorFunction(i)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(S),c(S,a,"Generator"),c(S,o,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){while(t.length){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=k,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(w),!e)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function r(n,r){return a.type="throw",a.arg=e,i.next=n,r&&(i.method="next",i.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),w(i),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;w(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:k(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=n}catch(r){"object"===typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},9742:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},9861:function(e,t,i){"use strict";i("e260");var n=i("23e7"),r=i("da84"),o=i("d066"),s=i("c65b"),a=i("e330"),c=i("0d3b"),l=i("6eeb"),u=i("e2cc"),d=i("d44e"),h=i("9ed3"),p=i("69f3"),f=i("19aa"),g=i("1626"),m=i("1a2d"),_=i("0366"),v=i("f5df"),E=i("825a"),A=i("861d"),y=i("577e"),S=i("7c73"),C=i("5c6c"),b=i("9a1f"),T=i("35a1"),I=i("d6d6"),R=i("b622"),w=i("addb"),O=R("iterator"),k="URLSearchParams",N=k+"Iterator",L=p.set,P=p.getterFor(k),D=p.getterFor(N),M=o("fetch"),x=o("Request"),B=o("Headers"),U=x&&x.prototype,F=B&&B.prototype,V=r.RegExp,j=r.TypeError,G=r.decodeURIComponent,H=r.encodeURIComponent,Q=a("".charAt),W=a([].join),q=a([].push),$=a("".replace),z=a([].shift),Z=a([].splice),Y=a("".split),K=a("".slice),J=/\+/g,X=Array(4),ee=function(e){return X[e-1]||(X[e-1]=V("((?:%[\\da-f]{2}){"+e+"})","gi"))},te=function(e){try{return G(e)}catch(t){return e}},ie=function(e){var t=$(e,J," "),i=4;try{return G(t)}catch(n){while(i)t=$(t,ee(i--),te);return t}},ne=/[!'()~]|%20/g,re={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},oe=function(e){return re[e]},se=function(e){return $(H(e),ne,oe)},ae=h((function(e,t){L(this,{type:N,iterator:b(P(e).entries),kind:t})}),"Iterator",(function(){var e=D(this),t=e.kind,i=e.iterator.next(),n=i.value;return i.done||(i.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),i}),!0),ce=function(e){this.entries=[],this.url=null,void 0!==e&&(A(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===Q(e,0)?K(e,1):e:y(e)))};ce.prototype={type:k,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,i,n,r,o,a,c,l=T(e);if(l){t=b(e,l),i=t.next;while(!(n=s(i,t)).done){if(r=b(E(n.value)),o=r.next,(a=s(o,r)).done||(c=s(o,r)).done||!s(o,r).done)throw j("Expected sequence with length 2");q(this.entries,{key:y(a.value),value:y(c.value)})}}else for(var u in e)m(e,u)&&q(this.entries,{key:u,value:y(e[u])})},parseQuery:function(e){if(e){var t,i,n=Y(e,"&"),r=0;while(r<n.length)t=n[r++],t.length&&(i=Y(t,"="),q(this.entries,{key:ie(z(i)),value:ie(W(i,"="))}))}},serialize:function(){var e,t=this.entries,i=[],n=0;while(n<t.length)e=t[n++],q(i,se(e.key)+"="+se(e.value));return W(i,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var le=function(){f(this,ue);var e=arguments.length>0?arguments[0]:void 0;L(this,new ce(e))},ue=le.prototype;if(u(ue,{append:function(e,t){I(arguments.length,2);var i=P(this);q(i.entries,{key:y(e),value:y(t)}),i.updateURL()},delete:function(e){I(arguments.length,1);var t=P(this),i=t.entries,n=y(e),r=0;while(r<i.length)i[r].key===n?Z(i,r,1):r++;t.updateURL()},get:function(e){I(arguments.length,1);for(var t=P(this).entries,i=y(e),n=0;n<t.length;n++)if(t[n].key===i)return t[n].value;return null},getAll:function(e){I(arguments.length,1);for(var t=P(this).entries,i=y(e),n=[],r=0;r<t.length;r++)t[r].key===i&&q(n,t[r].value);return n},has:function(e){I(arguments.length,1);var t=P(this).entries,i=y(e),n=0;while(n<t.length)if(t[n++].key===i)return!0;return!1},set:function(e,t){I(arguments.length,1);for(var i,n=P(this),r=n.entries,o=!1,s=y(e),a=y(t),c=0;c<r.length;c++)i=r[c],i.key===s&&(o?Z(r,c--,1):(o=!0,i.value=a));o||q(r,{key:s,value:a}),n.updateURL()},sort:function(){var e=P(this);w(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){var t,i=P(this).entries,n=_(e,arguments.length>1?arguments[1]:void 0),r=0;while(r<i.length)t=i[r++],n(t.value,t.key,this)},keys:function(){return new ae(this,"keys")},values:function(){return new ae(this,"values")},entries:function(){return new ae(this,"entries")}},{enumerable:!0}),l(ue,O,ue.entries,{name:"entries"}),l(ue,"toString",(function(){return P(this).serialize()}),{enumerable:!0}),d(le,k),n({global:!0,forced:!c},{URLSearchParams:le}),!c&&g(B)){var de=a(F.has),he=a(F.set),pe=function(e){if(A(e)){var t,i=e.body;if(v(i)===k)return t=e.headers?new B(e.headers):new B,de(t,"content-type")||he(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),S(e,{body:C(0,y(i)),headers:C(0,t)})}return e};if(g(M)&&n({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return M(e,arguments.length>1?pe(arguments[1]):{})}}),g(x)){var fe=function(e){return f(this,U),new x(e,arguments.length>1?pe(arguments[1]):{})};U.constructor=fe,fe.prototype=U,n({global:!0,forced:!0},{Request:fe})}}e.exports={URLSearchParams:le,getState:P}},9876:function(e,t,i){var n=i("03d6"),r=i("9742");e.exports=Object.keys||function(e){return n(e,r)}},"99af":function(e,t,i){"use strict";var n=i("23e7"),r=i("da84"),o=i("d039"),s=i("e8b5"),a=i("861d"),c=i("7b0b"),l=i("07fa"),u=i("8418"),d=i("65f0"),h=i("1dde"),p=i("b622"),f=i("2d00"),g=p("isConcatSpreadable"),m=9007199254740991,_="Maximum allowed index exceeded",v=r.TypeError,E=f>=51||!o((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),A=h("concat"),y=function(e){if(!a(e))return!1;var t=e[g];return void 0!==t?!!t:s(e)},S=!E||!A;n({target:"Array",proto:!0,forced:S},{concat:function(e){var t,i,n,r,o,s=c(this),a=d(s,0),h=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?s:arguments[t],y(o)){if(r=l(o),h+r>m)throw v(_);for(i=0;i<r;i++,h++)i in o&&u(a,h,o[i])}else{if(h>=m)throw v(_);u(a,h++,o)}return a.length=h,a}})},"9a1f":function(e,t,i){var n=i("da84"),r=i("c65b"),o=i("59ed"),s=i("825a"),a=i("0d51"),c=i("35a1"),l=n.TypeError;e.exports=function(e,t){var i=arguments.length<2?c(e):t;if(o(i))return s(r(i,e));throw l(a(e)+" is not iterable")}},"9a63":function(e,t){var i={utf8:{stringToBytes:function(e){return i.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(i.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],i=0;i<e.length;i++)t.push(255&e.charCodeAt(i));return t},bytesToString:function(e){for(var t=[],i=0;i<e.length;i++)t.push(String.fromCharCode(e[i]));return t.join("")}}};e.exports=i},"9a8c":function(e,t,i){"use strict";var n=i("e330"),r=i("ebb5"),o=i("145e"),s=n(o),a=r.aTypedArray,c=r.exportTypedArrayMethod;c("copyWithin",(function(e,t){return s(a(this),e,t,arguments.length>2?arguments[2]:void 0)}))},"9ab4":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));function n(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s}},"9afc":function(e,t,i){"use strict";var n=function(e){return r(e)&&!o(e)};function r(e){return!!e&&"object"===typeof e}function o(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||c(e)}var s="function"===typeof Symbol&&Symbol.for,a=s?Symbol.for("react.element"):60103;function c(e){return e.$$typeof===a}function l(e){return Array.isArray(e)?[]:{}}function u(e,t){var i=t&&!0===t.clone;return i&&n(e)?p(l(e),e,t):e}function d(e,t,i){var r=e.slice();return t.forEach((function(t,o){"undefined"===typeof r[o]?r[o]=u(t,i):n(t)?r[o]=p(e[o],t,i):-1===e.indexOf(t)&&r.push(u(t,i))})),r}function h(e,t,i){var r={};return n(e)&&Object.keys(e).forEach((function(t){r[t]=u(e[t],i)})),Object.keys(t).forEach((function(o){n(t[o])&&e[o]?r[o]=p(e[o],t[o],i):r[o]=u(t[o],i)})),r}function p(e,t,i){var n=Array.isArray(t),r=Array.isArray(e),o=i||{arrayMerge:d},s=n===r;if(s){if(n){var a=o.arrayMerge||d;return a(e,t,i)}return h(e,t,i)}return u(t,i)}p.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,i){return p(e,i,t)}))};var f=p;e.exports=f},"9bdd":function(e,t,i){var n=i("825a"),r=i("2a62");e.exports=function(e,t,i,o){try{return o?t(n(i)[0],i[1]):t(i)}catch(s){r(e,"throw",s)}}},"9bf2":function(e,t,i){var n=i("da84"),r=i("83ab"),o=i("0cfb"),s=i("aed9"),a=i("825a"),c=i("a04b"),l=n.TypeError,u=Object.defineProperty,d=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",f="writable";t.f=r?s?function(e,t,i){if(a(e),t=c(t),a(i),"function"===typeof e&&"prototype"===t&&"value"in i&&f in i&&!i[f]){var n=d(e,t);n&&n[f]&&(e[t]=i.value,i={configurable:p in i?i[p]:n[p],enumerable:h in i?i[h]:n[h],writable:!1})}return u(e,t,i)}:u:function(e,t,i){if(a(e),t=c(t),a(i),o)try{return u(e,t,i)}catch(n){}if("get"in i||"set"in i)throw l("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},"9c0c":function(e,t,i){var n=i("1609");e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)}}return function(){return e.apply(t,arguments)}}},"9c0e":function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},"9d11":function(e,t,i){var n=i("fc5e"),r=Math.max,o=Math.min;e.exports=function(e,t){return e=n(e),e<0?r(e+t,0):o(e,t)}},"9d7e":function(e,t,i){"use strict";t.__esModule=!0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){function t(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return 1===i.length&&"object"===n(i[0])&&(i=i[0]),i&&i.hasOwnProperty||(i={}),e.replace(o,(function(t,n,o,s){var a=void 0;return"{"===e[s-1]&&"}"===e[s+t.length]?o:(a=(0,r.hasOwn)(i,o)?i[o]:null,null===a||void 0===a?"":a)}))}return t};var r=i("8122"),o=/(%|)\{([0-9a-zA-Z_]+)\}/g},"9ed3":function(e,t,i){"use strict";var n=i("ae93").IteratorPrototype,r=i("7c73"),o=i("5c6c"),s=i("d44e"),a=i("3f8c"),c=function(){return this};e.exports=function(e,t,i,l){var u=t+" Iterator";return e.prototype=r(n,{next:o(+!l,i)}),s(e,u,!1,!0),a[u]=c,e}},"9f7f":function(e,t,i){var n=i("d039"),r=i("da84"),o=r.RegExp,s=n((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),a=s||n((function(){return!o("a","y").sticky})),c=s||n((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:c,MISSED_STICKY:a,UNSUPPORTED_Y:s}},"9fbb":function(e,t,i){var n=i("4d88");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},a04b:function(e,t,i){var n=i("c04e"),r=i("d9b5");e.exports=function(e){var t=n(e,"string");return r(t)?t:t+""}},a078:function(e,t,i){var n=i("0366"),r=i("c65b"),o=i("5087"),s=i("7b0b"),a=i("07fa"),c=i("9a1f"),l=i("35a1"),u=i("e95a"),d=i("ebb5").aTypedArrayConstructor;e.exports=function(e){var t,i,h,p,f,g,m=o(this),_=s(e),v=arguments.length,E=v>1?arguments[1]:void 0,A=void 0!==E,y=l(_);if(y&&!u(y)){f=c(_,y),g=f.next,_=[];while(!(p=r(g,f)).done)_.push(p.value)}for(A&&v>2&&(E=n(E,arguments[2])),i=a(_),h=new(d(m))(i),t=0;i>t;t++)h[t]=A?E(_[t],t):_[t];return h}},a15b:function(e,t,i){"use strict";var n=i("23e7"),r=i("e330"),o=i("44ad"),s=i("fc6a"),a=i("a640"),c=r([].join),l=o!=Object,u=a("join",",");n({target:"Array",proto:!0,forced:l||!u},{join:function(e){return c(s(this),void 0===e?",":e)}})},a15e:function(e,t,i){"use strict";i.r(t);var n=i("41b2"),r=i.n(n),o=i("1098"),s=i.n(o),a=/%[sdj%]/g,c=function(){};function l(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=1,r=t[0],o=t.length;if("function"===typeof r)return r.apply(null,t.slice(1));if("string"===typeof r){for(var s=String(r).replace(a,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(t[n++]);case"%d":return Number(t[n++]);case"%j":try{return JSON.stringify(t[n++])}catch(i){return"[Circular]"}break;default:return e}})),c=t[n];n<o;c=t[++n])s+=" "+c;return s}return r}function u(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"pattern"===e}function d(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!u(t)||"string"!==typeof e||e))}function h(e,t,i){var n=[],r=0,o=e.length;function s(e){n.push.apply(n,e),r++,r===o&&i(n)}e.forEach((function(e){t(e,s)}))}function p(e,t,i){var n=0,r=e.length;function o(s){if(s&&s.length)i(s);else{var a=n;n+=1,a<r?t(e[a],o):i([])}}o([])}function f(e){var t=[];return Object.keys(e).forEach((function(i){t.push.apply(t,e[i])})),t}function g(e,t,i,n){if(t.first){var r=f(e);return p(r,i,n)}var o=t.firstFields||[];!0===o&&(o=Object.keys(e));var s=Object.keys(e),a=s.length,c=0,l=[],u=function(e){l.push.apply(l,e),c++,c===a&&n(l)};s.forEach((function(t){var n=e[t];-1!==o.indexOf(t)?p(n,i,u):h(n,i,u)}))}function m(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:t,field:t.field||e.fullField}}}function _(e,t){if(t)for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];"object"===("undefined"===typeof n?"undefined":s()(n))&&"object"===s()(e[i])?e[i]=r()({},e[i],n):e[i]=n}return e}function v(e,t,i,n,r,o){!e.required||i.hasOwnProperty(e.field)&&!d(t,o||e.type)||n.push(l(r.messages.required,e.fullField))}var E=v;function A(e,t,i,n,r){(/^\s+$/.test(t)||""===t)&&n.push(l(r.messages.whitespace,e.fullField))}var y=A,S={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},C={integer:function(e){return C.number(e)&&parseInt(e,10)===e},float:function(e){return C.number(e)&&!C.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===("undefined"===typeof e?"undefined":s()(e))&&!C.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&!!e.match(S.email)&&e.length<255},url:function(e){return"string"===typeof e&&!!e.match(S.url)},hex:function(e){return"string"===typeof e&&!!e.match(S.hex)}};function b(e,t,i,n,r){if(e.required&&void 0===t)E(e,t,i,n,r);else{var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;o.indexOf(a)>-1?C[a](t)||n.push(l(r.messages.types[a],e.fullField,e.type)):a&&("undefined"===typeof t?"undefined":s()(t))!==e.type&&n.push(l(r.messages.types[a],e.fullField,e.type))}}var T=b;function I(e,t,i,n,r){var o="number"===typeof e.len,s="number"===typeof e.min,a="number"===typeof e.max,c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=t,d=null,h="number"===typeof t,p="string"===typeof t,f=Array.isArray(t);if(h?d="number":p?d="string":f&&(d="array"),!d)return!1;f&&(u=t.length),p&&(u=t.replace(c,"_").length),o?u!==e.len&&n.push(l(r.messages[d].len,e.fullField,e.len)):s&&!a&&u<e.min?n.push(l(r.messages[d].min,e.fullField,e.min)):a&&!s&&u>e.max?n.push(l(r.messages[d].max,e.fullField,e.max)):s&&a&&(u<e.min||u>e.max)&&n.push(l(r.messages[d].range,e.fullField,e.min,e.max))}var R=I,w="enum";function O(e,t,i,n,r){e[w]=Array.isArray(e[w])?e[w]:[],-1===e[w].indexOf(t)&&n.push(l(r.messages[w],e.fullField,e[w].join(", ")))}var k=O;function N(e,t,i,n,r){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||n.push(l(r.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){var o=new RegExp(e.pattern);o.test(t)||n.push(l(r.messages.pattern.mismatch,e.fullField,t,e.pattern))}}var L=N,P={required:E,whitespace:y,type:T,range:R,enum:k,pattern:L};function D(e,t,i,n,r){var o=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(d(t,"string")&&!e.required)return i();P.required(e,t,n,o,r,"string"),d(t,"string")||(P.type(e,t,n,o,r),P.range(e,t,n,o,r),P.pattern(e,t,n,o,r),!0===e.whitespace&&P.whitespace(e,t,n,o,r))}i(o)}var M=D;function x(e,t,i,n,r){var o=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return i();P.required(e,t,n,o,r),void 0!==t&&P.type(e,t,n,o,r)}i(o)}var B=x;function U(e,t,i,n,r){var o=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return i();P.required(e,t,n,o,r),void 0!==t&&(P.type(e,t,n,o,r),P.range(e,t,n,o,r))}i(o)}var F=U;function V(e,t,i,n,r){var o=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return i();P.required(e,t,n,o,r),void 0!==t&&P.type(e,t,n,o,r)}i(o)}var j=V;function G(e,t,i,n,r){var o=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return i();P.required(e,t,n,o,r),d(t)||P.type(e,t,n,o,r)}i(o)}var H=G;function Q(e,t,i,n,r){var o=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return i();P.required(e,t,n,o,r),void 0!==t&&(P.type(e,t,n,o,r),P.range(e,t,n,o,r))}i(o)}var W=Q;function q(e,t,i,n,r){var o=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return i();P.required(e,t,n,o,r),void 0!==t&&(P.type(e,t,n,o,r),P.range(e,t,n,o,r))}i(o)}var $=q;function z(e,t,i,n,r){var o=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(d(t,"array")&&!e.required)return i();P.required(e,t,n,o,r,"array"),d(t,"array")||(P.type(e,t,n,o,r),P.range(e,t,n,o,r))}i(o)}var Z=z;function Y(e,t,i,n,r){var o=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return i();P.required(e,t,n,o,r),void 0!==t&&P.type(e,t,n,o,r)}i(o)}var K=Y,J="enum";function X(e,t,i,n,r){var o=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return i();P.required(e,t,n,o,r),t&&P[J](e,t,n,o,r)}i(o)}var ee=X;function te(e,t,i,n,r){var o=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(d(t,"string")&&!e.required)return i();P.required(e,t,n,o,r),d(t,"string")||P.pattern(e,t,n,o,r)}i(o)}var ie=te;function ne(e,t,i,n,r){var o=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return i();if(P.required(e,t,n,o,r),!d(t)){var a=void 0;a="number"===typeof t?new Date(t):t,P.type(e,a,n,o,r),a&&P.range(e,a.getTime(),n,o,r)}}i(o)}var re=ne;function oe(e,t,i,n,r){var o=[],a=Array.isArray(t)?"array":"undefined"===typeof t?"undefined":s()(t);P.required(e,t,n,o,r,a),i(o)}var se=oe;function ae(e,t,i,n,r){var o=e.type,s=[],a=e.required||!e.required&&n.hasOwnProperty(e.field);if(a){if(d(t,o)&&!e.required)return i();P.required(e,t,n,s,r,o),d(t,o)||P.type(e,t,n,s,r)}i(s)}var ce=ae,le={string:M,method:B,number:F,boolean:j,regexp:H,integer:W,float:$,array:Z,object:K,enum:ee,pattern:ie,date:re,url:ce,hex:ce,email:ce,required:se};function ue(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var de=ue();function he(e){this.rules=null,this._messages=de,this.define(e)}he.prototype={messages:function(e){return e&&(this._messages=_(ue(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==("undefined"===typeof e?"undefined":s()(e))||Array.isArray(e))throw new Error("Rules must be an object");this.rules={};var t=void 0,i=void 0;for(t in e)e.hasOwnProperty(t)&&(i=e[t],this.rules[t]=Array.isArray(i)?i:[i])},validate:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],o=e,a=i,u=n;if("function"===typeof a&&(u=a,a={}),this.rules&&0!==Object.keys(this.rules).length){if(a.messages){var d=this.messages();d===de&&(d=ue()),_(d,a.messages),a.messages=d}else a.messages=this.messages();var h=void 0,p=void 0,f={},v=a.keys||Object.keys(this.rules);v.forEach((function(i){h=t.rules[i],p=o[i],h.forEach((function(n){var s=n;"function"===typeof s.transform&&(o===e&&(o=r()({},o)),p=o[i]=s.transform(p)),s="function"===typeof s?{validator:s}:r()({},s),s.validator=t.getValidationMethod(s),s.field=i,s.fullField=s.fullField||i,s.type=t.getType(s),s.validator&&(f[i]=f[i]||[],f[i].push({rule:s,value:p,source:o,field:i}))}))}));var E={};g(f,a,(function(e,t){var i=e.rule,n=("object"===i.type||"array"===i.type)&&("object"===s()(i.fields)||"object"===s()(i.defaultField));function o(e,t){return r()({},t,{fullField:i.fullField+"."+e})}function u(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=s;if(Array.isArray(u)||(u=[u]),u.length&&c("async-validator:",u),u.length&&i.message&&(u=[].concat(i.message)),u=u.map(m(i)),a.first&&u.length)return E[i.field]=1,t(u);if(n){if(i.required&&!e.value)return u=i.message?[].concat(i.message).map(m(i)):a.error?[a.error(i,l(a.messages.required,i.field))]:[],t(u);var d={};if(i.defaultField)for(var h in e.value)e.value.hasOwnProperty(h)&&(d[h]=i.defaultField);for(var p in d=r()({},d,e.rule.fields),d)if(d.hasOwnProperty(p)){var f=Array.isArray(d[p])?d[p]:[d[p]];d[p]=f.map(o.bind(null,p))}var g=new he(d);g.messages(a.messages),e.rule.options&&(e.rule.options.messages=a.messages,e.rule.options.error=a.error),g.validate(e.value,e.rule.options||a,(function(e){t(e&&e.length?u.concat(e):e)}))}else t(u)}n=n&&(i.required||!i.required&&e.value),i.field=e.field;var d=i.validator(i,e.value,u,e.source,a);d&&d.then&&d.then((function(){return u()}),(function(e){return u(e)}))}),(function(e){A(e)}))}else u&&u();function A(e){var t=void 0,i=void 0,n=[],r={};function o(e){Array.isArray(e)?n=n.concat.apply(n,e):n.push(e)}for(t=0;t<e.length;t++)o(e[t]);if(n.length)for(t=0;t<n.length;t++)i=n[t].field,r[i]=r[i]||[],r[i].push(n[t]);else n=null,r=null;u(n,r)}},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!le.hasOwnProperty(e.type))throw new Error(l("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),i=t.indexOf("message");return-1!==i&&t.splice(i,1),1===t.length&&"required"===t[0]?le.required:le[this.getType(e)]||!1}},he.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");le[e]=t},he.messages=de;t["default"]=he},a3de:function(e,t,i){"use strict";var n=!("undefined"===typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=r},a434:function(e,t,i){"use strict";var n=i("23e7"),r=i("da84"),o=i("23cb"),s=i("5926"),a=i("07fa"),c=i("7b0b"),l=i("65f0"),u=i("8418"),d=i("1dde"),h=d("splice"),p=r.TypeError,f=Math.max,g=Math.min,m=9007199254740991,_="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var i,n,r,d,h,v,E=c(this),A=a(E),y=o(e,A),S=arguments.length;if(0===S?i=n=0:1===S?(i=0,n=A-y):(i=S-2,n=g(f(s(t),0),A-y)),A+i-n>m)throw p(_);for(r=l(E,n),d=0;d<n;d++)h=y+d,h in E&&u(r,d,E[h]);if(r.length=n,i<n){for(d=y;d<A-n;d++)h=d+n,v=d+i,h in E?E[v]=E[h]:delete E[v];for(d=A;d>A-n+i;d--)delete E[d-1]}else if(i>n)for(d=A-n;d>y;d--)h=d+n-1,v=d+i-1,h in E?E[v]=E[h]:delete E[v];for(d=0;d<i;d++)E[d+y]=arguments[d+2];return E.length=A-n+i,r}})},a4b4:function(e,t,i){var n=i("342f");e.exports=/web0s(?!.*chrome)/i.test(n)},a4d3:function(e,t,i){"use strict";var n=i("23e7"),r=i("da84"),o=i("d066"),s=i("2ba4"),a=i("c65b"),c=i("e330"),l=i("c430"),u=i("83ab"),d=i("4930"),h=i("d039"),p=i("1a2d"),f=i("e8b5"),g=i("1626"),m=i("861d"),_=i("3a9b"),v=i("d9b5"),E=i("825a"),A=i("7b0b"),y=i("fc6a"),S=i("a04b"),C=i("577e"),b=i("5c6c"),T=i("7c73"),I=i("df75"),R=i("241c"),w=i("057f"),O=i("7418"),k=i("06cf"),N=i("9bf2"),L=i("37e8"),P=i("d1e7"),D=i("f36a"),M=i("6eeb"),x=i("5692"),B=i("f772"),U=i("d012"),F=i("90e3"),V=i("b622"),j=i("e538"),G=i("746f"),H=i("d44e"),Q=i("69f3"),W=i("b727").forEach,q=B("hidden"),$="Symbol",z="prototype",Z=V("toPrimitive"),Y=Q.set,K=Q.getterFor($),J=Object[z],X=r.Symbol,ee=X&&X[z],te=r.TypeError,ie=r.QObject,ne=o("JSON","stringify"),re=k.f,oe=N.f,se=w.f,ae=P.f,ce=c([].push),le=x("symbols"),ue=x("op-symbols"),de=x("string-to-symbol-registry"),he=x("symbol-to-string-registry"),pe=x("wks"),fe=!ie||!ie[z]||!ie[z].findChild,ge=u&&h((function(){return 7!=T(oe({},"a",{get:function(){return oe(this,"a",{value:7}).a}})).a}))?function(e,t,i){var n=re(J,t);n&&delete J[t],oe(e,t,i),n&&e!==J&&oe(J,t,n)}:oe,me=function(e,t){var i=le[e]=T(ee);return Y(i,{type:$,tag:e,description:t}),u||(i.description=t),i},_e=function(e,t,i){e===J&&_e(ue,t,i),E(e);var n=S(t);return E(i),p(le,n)?(i.enumerable?(p(e,q)&&e[q][n]&&(e[q][n]=!1),i=T(i,{enumerable:b(0,!1)})):(p(e,q)||oe(e,q,b(1,{})),e[q][n]=!0),ge(e,n,i)):oe(e,n,i)},ve=function(e,t){E(e);var i=y(t),n=I(i).concat(Ce(i));return W(n,(function(t){u&&!a(Ae,i,t)||_e(e,t,i[t])})),e},Ee=function(e,t){return void 0===t?T(e):ve(T(e),t)},Ae=function(e){var t=S(e),i=a(ae,this,t);return!(this===J&&p(le,t)&&!p(ue,t))&&(!(i||!p(this,t)||!p(le,t)||p(this,q)&&this[q][t])||i)},ye=function(e,t){var i=y(e),n=S(t);if(i!==J||!p(le,n)||p(ue,n)){var r=re(i,n);return!r||!p(le,n)||p(i,q)&&i[q][n]||(r.enumerable=!0),r}},Se=function(e){var t=se(y(e)),i=[];return W(t,(function(e){p(le,e)||p(U,e)||ce(i,e)})),i},Ce=function(e){var t=e===J,i=se(t?ue:y(e)),n=[];return W(i,(function(e){!p(le,e)||t&&!p(J,e)||ce(n,le[e])})),n};if(d||(X=function(){if(_(ee,this))throw te("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?C(arguments[0]):void 0,t=F(e),i=function(e){this===J&&a(i,ue,e),p(this,q)&&p(this[q],t)&&(this[q][t]=!1),ge(this,t,b(1,e))};return u&&fe&&ge(J,t,{configurable:!0,set:i}),me(t,e)},ee=X[z],M(ee,"toString",(function(){return K(this).tag})),M(X,"withoutSetter",(function(e){return me(F(e),e)})),P.f=Ae,N.f=_e,L.f=ve,k.f=ye,R.f=w.f=Se,O.f=Ce,j.f=function(e){return me(V(e),e)},u&&(oe(ee,"description",{configurable:!0,get:function(){return K(this).description}}),l||M(J,"propertyIsEnumerable",Ae,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:X}),W(I(pe),(function(e){G(e)})),n({target:$,stat:!0,forced:!d},{for:function(e){var t=C(e);if(p(de,t))return de[t];var i=X(t);return de[t]=i,he[i]=t,i},keyFor:function(e){if(!v(e))throw te(e+" is not a symbol");if(p(he,e))return he[e]},useSetter:function(){fe=!0},useSimple:function(){fe=!1}}),n({target:"Object",stat:!0,forced:!d,sham:!u},{create:Ee,defineProperty:_e,defineProperties:ve,getOwnPropertyDescriptor:ye}),n({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:Se,getOwnPropertySymbols:Ce}),n({target:"Object",stat:!0,forced:h((function(){O.f(1)}))},{getOwnPropertySymbols:function(e){return O.f(A(e))}}),ne){var be=!d||h((function(){var e=X();return"[null]"!=ne([e])||"{}"!=ne({a:e})||"{}"!=ne(Object(e))}));n({target:"JSON",stat:!0,forced:be},{stringify:function(e,t,i){var n=D(arguments),r=t;if((m(t)||void 0!==e)&&!v(e))return f(t)||(t=function(e,t){if(g(r)&&(t=a(r,this,e,t)),!v(t))return t}),n[1]=t,s(ne,null,n)}})}if(!ee[Z]){var Te=ee.valueOf;M(ee,Z,(function(e){return a(Te,this)}))}H(X,$),U[q]=!0},a640:function(e,t,i){"use strict";var n=i("d039");e.exports=function(e,t){var i=[][e];return!!i&&n((function(){i.call(null,t||function(){throw 1},1)}))}},a742:function(e,t,i){"use strict";t.__esModule=!0,t.isDefined=t.isUndefined=t.isFunction=void 0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isString=a,t.isObject=c,t.isHtmlElement=l;var r=i("2b0e"),o=s(r);function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return"[object String]"===Object.prototype.toString.call(e)}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function l(e){return e&&e.nodeType===Node.ELEMENT_NODE}var u=function(e){var t={};return e&&"[object Function]"===t.toString.call(e)};"object"===("undefined"===typeof Int8Array?"undefined":n(Int8Array))||!o.default.prototype.$isServer&&"function"===typeof document.childNodes||(t.isFunction=u=function(e){return"function"===typeof e||!1}),t.isFunction=u;t.isUndefined=function(e){return void 0===e},t.isDefined=function(e){return void 0!==e&&null!==e}},a79d:function(e,t,i){"use strict";var n=i("23e7"),r=i("c430"),o=i("fea9"),s=i("d039"),a=i("d066"),c=i("1626"),l=i("4840"),u=i("cdf9"),d=i("6eeb"),h=!!o&&s((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));if(n({target:"Promise",proto:!0,real:!0,forced:h},{finally:function(e){var t=l(this,a("Promise")),i=c(e);return this.then(i?function(i){return u(t,e()).then((function(){return i}))}:e,i?function(i){return u(t,e()).then((function(){throw i}))}:e)}}),!r&&c(o)){var p=a("Promise").prototype["finally"];o.prototype["finally"]!==p&&d(o.prototype,"finally",p,{unsafe:!0})}},a975:function(e,t,i){"use strict";var n=i("ebb5"),r=i("b727").every,o=n.aTypedArray,s=n.exportTypedArrayMethod;s("every",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},a981:function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},a9e3:function(e,t,i){"use strict";var n=i("83ab"),r=i("da84"),o=i("e330"),s=i("94ca"),a=i("6eeb"),c=i("1a2d"),l=i("7156"),u=i("3a9b"),d=i("d9b5"),h=i("c04e"),p=i("d039"),f=i("241c").f,g=i("06cf").f,m=i("9bf2").f,_=i("408a"),v=i("58a8").trim,E="Number",A=r[E],y=A.prototype,S=r.TypeError,C=o("".slice),b=o("".charCodeAt),T=function(e){var t=h(e,"number");return"bigint"==typeof t?t:I(t)},I=function(e){var t,i,n,r,o,s,a,c,l=h(e,"number");if(d(l))throw S("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=v(l),t=b(l,0),43===t||45===t){if(i=b(l,2),88===i||120===i)return NaN}else if(48===t){switch(b(l,1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+l}for(o=C(l,2),s=o.length,a=0;a<s;a++)if(c=b(o,a),c<48||c>r)return NaN;return parseInt(o,n)}return+l};if(s(E,!A(" 0o1")||!A("0b1")||A("+0x1"))){for(var R,w=function(e){var t=arguments.length<1?0:A(T(e)),i=this;return u(y,i)&&p((function(){_(i)}))?l(Object(t),i,w):t},O=n?f(A):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),k=0;O.length>k;k++)c(A,R=O[k])&&!c(w,R)&&m(w,R,g(A,R));w.prototype=y,y.constructor=w,a(r,E,w)}},ab13:function(e,t,i){var n=i("b622"),r=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[r]=!1,"/./"[e](t)}catch(n){}}return!1}},ab36:function(e,t,i){var n=i("861d"),r=i("9112");e.exports=function(e,t){n(t)&&"cause"in t&&r(e,"cause",t.cause)}},ac1f:function(e,t,i){"use strict";var n=i("23e7"),r=i("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(e,t,i){"use strict";var n=i("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},addb:function(e,t,i){var n=i("4dae"),r=Math.floor,o=function(e,t){var i=e.length,c=r(i/2);return i<8?s(e,t):a(e,o(n(e,0,c),t),o(n(e,c),t),t)},s=function(e,t){var i,n,r=e.length,o=1;while(o<r){n=o,i=e[o];while(n&&t(e[n-1],i)>0)e[n]=e[--n];n!==o++&&(e[n]=i)}return e},a=function(e,t,i,n){var r=t.length,o=i.length,s=0,a=0;while(s<r||a<o)e[s+a]=s<r&&a<o?n(t[s],i[a])<=0?t[s++]:i[a++]:s<r?t[s++]:i[a++];return e};e.exports=o},ae93:function(e,t,i){"use strict";var n,r,o,s=i("d039"),a=i("1626"),c=i("7c73"),l=i("e163"),u=i("6eeb"),d=i("b622"),h=i("c430"),p=d("iterator"),f=!1;[].keys&&(o=[].keys(),"next"in o?(r=l(l(o)),r!==Object.prototype&&(n=r)):f=!0);var g=void 0==n||s((function(){var e={};return n[p].call(e)!==e}));g?n={}:h&&(n=c(n)),a(n[p])||u(n,p,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},aed9:function(e,t,i){var n=i("83ab"),r=i("d039");e.exports=n&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},b041:function(e,t,i){"use strict";var n=i("00ee"),r=i("f5df");e.exports=n?{}.toString:function(){return"[object "+r(this)+"]"}},b0c0:function(e,t,i){var n=i("83ab"),r=i("5e77").EXISTS,o=i("e330"),s=i("9bf2").f,a=Function.prototype,c=o(a.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(l.exec),d="name";n&&!r&&s(a,d,{configurable:!0,get:function(){try{return u(l,c(this))[1]}catch(e){return""}}})},b367:function(e,t,i){var n=i("5524"),r=i("ef08"),o="__core-js_shared__",s=r[o]||(r[o]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:i("e444")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},b39a:function(e,t,i){"use strict";var n=i("da84"),r=i("2ba4"),o=i("ebb5"),s=i("d039"),a=i("f36a"),c=n.Int8Array,l=o.aTypedArray,u=o.exportTypedArrayMethod,d=[].toLocaleString,h=!!c&&s((function(){d.call(new c(1))})),p=s((function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()}))||!s((function(){c.prototype.toLocaleString.call([1,2])}));u("toLocaleString",(function(){return r(d,h?a(l(this)):l(this),a(arguments))}),p)},b50d:function(e,t,i){"use strict";var n=i("c532"),r=i("467f"),o=i("7aac"),s=i("30b5"),a=i("83b9"),c=i("c345"),l=i("3934"),u=i("2d83"),d=i("2444"),h=i("7a77");e.exports=function(e){return new Promise((function(t,i){var p,f=e.data,g=e.headers,m=e.responseType;function _(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}n.isFormData(f)&&delete g["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var E=e.auth.username||"",A=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(E+":"+A)}var y=a(e.baseURL,e.url);function S(){if(v){var n="getAllResponseHeaders"in v?c(v.getAllResponseHeaders()):null,o=m&&"text"!==m&&"json"!==m?v.response:v.responseText,s={data:o,status:v.status,statusText:v.statusText,headers:n,config:e,request:v};r((function(e){t(e),_()}),(function(e){i(e),_()}),s),v=null}}if(v.open(e.method.toUpperCase(),s(y,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=S:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(S)},v.onabort=function(){v&&(i(u("Request aborted",e,"ECONNABORTED",v)),v=null)},v.onerror=function(){i(u("Network Error",e,null,v)),v=null},v.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||d.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(u(t,e,n.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},n.isStandardBrowserEnv()){var C=(e.withCredentials||l(y))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;C&&(g[e.xsrfHeaderName]=C)}"setRequestHeader"in v&&n.forEach(g,(function(e,t){"undefined"===typeof f&&"content-type"===t.toLowerCase()?delete g[t]:v.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),m&&"json"!==m&&(v.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){v&&(i(!e||e&&e.type?new h("canceled"):e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),f||(f=null),v.send(f)}))}},b575:function(e,t,i){var n,r,o,s,a,c,l,u,d=i("da84"),h=i("0366"),p=i("06cf").f,f=i("2cf4").set,g=i("1cdc"),m=i("d4c3"),_=i("a4b4"),v=i("605d"),E=d.MutationObserver||d.WebKitMutationObserver,A=d.document,y=d.process,S=d.Promise,C=p(d,"queueMicrotask"),b=C&&C.value;b||(n=function(){var e,t;v&&(e=y.domain)&&e.exit();while(r){t=r.fn,r=r.next;try{t()}catch(i){throw r?s():o=void 0,i}}o=void 0,e&&e.enter()},g||v||_||!E||!A?!m&&S&&S.resolve?(l=S.resolve(void 0),l.constructor=S,u=h(l.then,l),s=function(){u(n)}):v?s=function(){y.nextTick(n)}:(f=h(f,d),s=function(){f(n)}):(a=!0,c=A.createTextNode(""),new E(n).observe(c,{characterData:!0}),s=function(){c.data=a=!a})),e.exports=b||function(e){var t={fn:e,next:void 0};o&&(o.next=t),r||(r=t,s()),o=t}},b622:function(e,t,i){var n=i("da84"),r=i("5692"),o=i("1a2d"),s=i("90e3"),a=i("4930"),c=i("fdbf"),l=r("wks"),u=n.Symbol,d=u&&u["for"],h=c?u:u&&u.withoutSetter||s;e.exports=function(e){if(!o(l,e)||!a&&"string"!=typeof l[e]){var t="Symbol."+e;a&&o(u,e)?l[e]=u[e]:l[e]=c&&d?d(t):h(t)}return l[e]}},b639:function(e,t,i){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=i("1fb5"),r=i("9152"),o=i("e3db");function s(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=l.prototype):(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,i){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,t,i);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return u(this,e,t,i)}function u(e,t,i,n){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?m(e,t,i,n):"string"===typeof t?f(e,t,i):_(e,t)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t,i,n){return d(t),t<=0?c(e,t):void 0!==i?"string"===typeof n?c(e,t).fill(i,n):c(e,t).fill(i):c(e,t)}function p(e,t){if(d(t),e=c(e,t<0?0:0|v(t)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function f(e,t,i){if("string"===typeof i&&""!==i||(i="utf8"),!l.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|A(t,i);e=c(e,n);var r=e.write(t,i);return r!==n&&(e=e.slice(0,r)),e}function g(e,t){var i=t.length<0?0:0|v(t.length);e=c(e,i);for(var n=0;n<i;n+=1)e[n]=255&t[n];return e}function m(e,t,i,n){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===i&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,i):new Uint8Array(t,i,n),l.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=l.prototype):e=g(e,t),e}function _(e,t){if(l.isBuffer(t)){var i=0|v(t.length);return e=c(e,i),0===e.length?e:(t.copy(e,0,0,i),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||te(t.length)?c(e,0):g(e,t);if("Buffer"===t.type&&o(t.data))return g(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function E(e){return+e!=e&&(e=0),l.alloc(+e)}function A(e,t){if(l.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return X(e).length;default:if(n)return Y(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,i){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,t>>>=0,i<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return B(this,t,i);case"utf8":case"utf-8":return L(this,t,i);case"ascii":return M(this,t,i);case"latin1":case"binary":return x(this,t,i);case"base64":return N(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function S(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function C(e,t,i,n,r){if(0===e.length)return-1;if("string"===typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(r)return-1;i=e.length-1}else if(i<0){if(!r)return-1;i=0}if("string"===typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:b(e,t,i,n,r);if("number"===typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):b(e,[t],i,n,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,i,n,r){var o,s=1,a=e.length,c=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,i/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(r){var u=-1;for(o=i;o<a;o++)if(l(e,o)===l(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(i+c>a&&(i=a-c),o=i;o>=0;o--){for(var d=!0,h=0;h<c;h++)if(l(e,o+h)!==l(t,h)){d=!1;break}if(d)return o}return-1}function T(e,t,i,n){i=Number(i)||0;var r=e.length-i;n?(n=Number(n),n>r&&(n=r)):n=r;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[i+s]=a}return s}function I(e,t,i,n){return ee(Y(t,e.length-i),e,i,n)}function R(e,t,i,n){return ee(K(t),e,i,n)}function w(e,t,i,n){return R(e,t,i,n)}function O(e,t,i,n){return ee(X(t),e,i,n)}function k(e,t,i,n){return ee(J(t,e.length-i),e,i,n)}function N(e,t,i){return 0===t&&i===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,i))}function L(e,t,i){i=Math.min(e.length,i);var n=[],r=t;while(r<i){var o,s,a,c,l=e[r],u=null,d=l>239?4:l>223?3:l>191?2:1;if(r+d<=i)switch(d){case 1:l<128&&(u=l);break;case 2:o=e[r+1],128===(192&o)&&(c=(31&l)<<6|63&o,c>127&&(u=c));break;case 3:o=e[r+1],s=e[r+2],128===(192&o)&&128===(192&s)&&(c=(15&l)<<12|(63&o)<<6|63&s,c>2047&&(c<55296||c>57343)&&(u=c));break;case 4:o=e[r+1],s=e[r+2],a=e[r+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a,c>65535&&c<1114112&&(u=c))}null===u?(u=65533,d=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),r+=d}return D(n)}t.Buffer=l,t.SlowBuffer=E,t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:s(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,i){return u(null,e,t,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,i){return h(null,e,t,i)},l.allocUnsafe=function(e){return p(null,e)},l.allocUnsafeSlow=function(e){return p(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,r=0,o=Math.min(i,n);r<o;++r)if(e[r]!==t[r]){i=e[r],n=t[r];break}return i<n?-1:n<i?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=l.allocUnsafe(t),r=0;for(i=0;i<e.length;++i){var s=e[i];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},l.byteLength=A,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)S(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?L(this,0,e):y.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,i,n,r){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),t<0||i>e.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&t>=i)return 0;if(n>=r)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,n>>>=0,r>>>=0,this===e)return 0;for(var o=r-n,s=i-t,a=Math.min(o,s),c=this.slice(n,r),u=e.slice(t,i),d=0;d<a;++d)if(c[d]!==u[d]){o=c[d],s=u[d];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},l.prototype.indexOf=function(e,t,i){return C(this,e,t,i,!0)},l.prototype.lastIndexOf=function(e,t,i){return C(this,e,t,i,!1)},l.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"===typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-t;if((void 0===i||i>r)&&(i=r),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return T(this,e,t,i);case"utf8":case"utf-8":return I(this,e,t,i);case"ascii":return R(this,e,t,i);case"latin1":case"binary":return w(this,e,t,i);case"base64":return O(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function D(e){var t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);var i="",n=0;while(n<t)i+=String.fromCharCode.apply(String,e.slice(n,n+=P));return i}function M(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(127&e[r]);return n}function x(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}function B(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var r="",o=t;o<i;++o)r+=Z(e[o]);return r}function U(e,t,i){for(var n=e.slice(t,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function F(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function V(e,t,i,n,r,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function j(e,t,i,n){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-i,2);r<o;++r)e[i+r]=(t&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function G(e,t,i,n){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-i,4);r<o;++r)e[i+r]=t>>>8*(n?r:3-r)&255}function H(e,t,i,n,r,o){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function Q(e,t,i,n,o){return o||H(e,t,i,4,34028234663852886e22,-34028234663852886e22),r.write(e,t,i,n,23,4),i+4}function W(e,t,i,n,o){return o||H(e,t,i,8,17976931348623157e292,-17976931348623157e292),r.write(e,t,i,n,52,8),i+8}l.prototype.slice=function(e,t){var i,n=this.length;if(e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=l.prototype;else{var r=t-e;i=new l(r,void 0);for(var o=0;o<r;++o)i[o]=this[o+e]}return i},l.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||F(e,t,this.length);var n=this[e],r=1,o=0;while(++o<t&&(r*=256))n+=this[e+o]*r;return n},l.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||F(e,t,this.length);var n=this[e+--t],r=1;while(t>0&&(r*=256))n+=this[e+--t]*r;return n},l.prototype.readUInt8=function(e,t){return t||F(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||F(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||F(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||F(e,t,this.length);var n=this[e],r=1,o=0;while(++o<t&&(r*=256))n+=this[e+o]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||F(e,t,this.length);var n=t,r=1,o=this[e+--n];while(n>0&&(r*=256))o+=this[e+--n]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||F(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(e,t){t||F(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(e,t){return t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||F(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||F(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||F(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||F(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,i,n){if(e=+e,t|=0,i|=0,!n){var r=Math.pow(2,8*i)-1;V(this,e,t,i,r,0)}var o=1,s=0;this[t]=255&e;while(++s<i&&(o*=256))this[t+s]=e/o&255;return t+i},l.prototype.writeUIntBE=function(e,t,i,n){if(e=+e,t|=0,i|=0,!n){var r=Math.pow(2,8*i)-1;V(this,e,t,i,r,0)}var o=i-1,s=1;this[t+o]=255&e;while(--o>=0&&(s*=256))this[t+o]=e/s&255;return t+i},l.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):G(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*i-1);V(this,e,t,i,r-1,-r)}var o=0,s=1,a=0;this[t]=255&e;while(++o<i&&(s*=256))e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+i},l.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*i-1);V(this,e,t,i,r-1,-r)}var o=i-1,s=1,a=0;this[t+o]=255&e;while(--o>=0&&(s*=256))e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+i},l.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):G(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||V(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,i){return Q(this,e,t,!0,i)},l.prototype.writeFloatBE=function(e,t,i){return Q(this,e,t,!1,i)},l.prototype.writeDoubleLE=function(e,t,i){return W(this,e,t,!0,i)},l.prototype.writeDoubleBE=function(e,t,i){return W(this,e,t,!1,i)},l.prototype.copy=function(e,t,i,n){if(i||(i=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var r,o=n-i;if(this===e&&i<t&&t<n)for(r=o-1;r>=0;--r)e[r+t]=this[r+i];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)e[r+t]=this[r+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),t);return o},l.prototype.fill=function(e,t,i,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,i=this.length):"string"===typeof i&&(n=i,i=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var o;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"===typeof e)for(o=t;o<i;++o)this[o]=e;else{var s=l.isBuffer(e)?e:Y(new l(e,n).toString()),a=s.length;for(o=0;o<i-t;++o)this[o+t]=s[o%a]}return this};var q=/[^+\/0-9A-Za-z-_]/g;function $(e){if(e=z(e).replace(q,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Z(e){return e<16?"0"+e.toString(16):e.toString(16)}function Y(e,t){var i;t=t||1/0;for(var n=e.length,r=null,o=[],s=0;s<n;++s){if(i=e.charCodeAt(s),i>55295&&i<57344){if(!r){if(i>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&o.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;o.push(i)}else if(i<2048){if((t-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function K(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}function J(e,t){for(var i,n,r,o=[],s=0;s<e.length;++s){if((t-=2)<0)break;i=e.charCodeAt(s),n=i>>8,r=i%256,o.push(r),o.push(n)}return o}function X(e){return n.toByteArray($(e))}function ee(e,t,i,n){for(var r=0;r<n;++r){if(r+i>=t.length||r>=e.length)break;t[r+i]=e[r]}return r}function te(e){return e!==e}}).call(this,i("c8ba"))},b64b:function(e,t,i){var n=i("23e7"),r=i("7b0b"),o=i("df75"),s=i("d039"),a=s((function(){o(1)}));n({target:"Object",stat:!0,forced:a},{keys:function(e){return o(r(e))}})},b6b7:function(e,t,i){var n=i("ebb5"),r=i("4840"),o=n.TYPED_ARRAY_CONSTRUCTOR,s=n.aTypedArrayConstructor;e.exports=function(e){return s(r(e,e[o]))}},b727:function(e,t,i){var n=i("0366"),r=i("e330"),o=i("44ad"),s=i("7b0b"),a=i("07fa"),c=i("65f0"),l=r([].push),u=function(e){var t=1==e,i=2==e,r=3==e,u=4==e,d=6==e,h=7==e,p=5==e||d;return function(f,g,m,_){for(var v,E,A=s(f),y=o(A),S=n(g,m),C=a(y),b=0,T=_||c,I=t?T(f,C):i||h?T(f,0):void 0;C>b;b++)if((p||b in y)&&(v=y[b],E=S(v,b,A),e))if(t)I[b]=E;else if(E)switch(e){case 3:return!0;case 5:return v;case 6:return b;case 2:l(I,v)}else switch(e){case 4:return!1;case 7:l(I,v)}return d?-1:r||u?u:I}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},b980:function(e,t,i){var n=i("d039"),r=i("5c6c");e.exports=!n((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",r(1,7)),7!==e.stack)}))},b9c7:function(e,t,i){i("e507"),e.exports=i("5524").Object.assign},ba01:function(e,t,i){e.exports=i("051b")},bb2f:function(e,t,i){var n=i("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bc3a:function(e,t,i){e.exports=i("cee4")},bee2:function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}i.d(t,"a",(function(){return r}))},bf19:function(e,t,i){"use strict";var n=i("23e7"),r=i("c65b");n({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return r(URL.prototype.toString,this)}})},c04e:function(e,t,i){var n=i("da84"),r=i("c65b"),o=i("861d"),s=i("d9b5"),a=i("dc4a"),c=i("485a"),l=i("b622"),u=n.TypeError,d=l("toPrimitive");e.exports=function(e,t){if(!o(e)||s(e))return e;var i,n=a(e,d);if(n){if(void 0===t&&(t="default"),i=r(n,e,t),!o(i)||s(i))return i;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),c(e,t)}},c098:function(e,t,i){e.exports=i("d4af")},c19f:function(e,t,i){"use strict";var n=i("23e7"),r=i("da84"),o=i("621a"),s=i("2626"),a="ArrayBuffer",c=o[a],l=r[a];n({global:!0,forced:l!==c},{ArrayBuffer:c}),s(a)},c1ac:function(e,t,i){"use strict";var n=i("ebb5"),r=i("b727").filter,o=i("1448"),s=n.aTypedArray,a=n.exportTypedArrayMethod;a("filter",(function(e){var t=r(s(this),e,arguments.length>1?arguments[1]:void 0);return o(this,t)}))},c20d:function(e,t,i){var n=i("da84"),r=i("d039"),o=i("e330"),s=i("577e"),a=i("58a8").trim,c=i("5899"),l=n.parseInt,u=n.Symbol,d=u&&u.iterator,h=/^[+-]?0x/i,p=o(h.exec),f=8!==l(c+"08")||22!==l(c+"0x16")||d&&!r((function(){l(Object(d))}));e.exports=f?function(e,t){var i=a(s(e));return l(i,t>>>0||(p(h,i)?16:10))}:l},c284:function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=90)}({0:function(e,t,i){"use strict";function n(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},90:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-progress",class:["el-progress--"+e.type,e.status?"is-"+e.status:"",{"el-progress--without-text":!e.showText,"el-progress--text-inside":e.textInside}],attrs:{role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===e.type?i("div",{staticClass:"el-progress-bar"},[i("div",{staticClass:"el-progress-bar__outer",style:{height:e.strokeWidth+"px"}},[i("div",{staticClass:"el-progress-bar__inner",style:e.barStyle},[e.showText&&e.textInside?i("div",{staticClass:"el-progress-bar__innerText"},[e._v(e._s(e.content))]):e._e()])])]):i("div",{staticClass:"el-progress-circle",style:{height:e.width+"px",width:e.width+"px"}},[i("svg",{attrs:{viewBox:"0 0 100 100"}},[i("path",{staticClass:"el-progress-circle__track",style:e.trailPathStyle,attrs:{d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none"}}),i("path",{staticClass:"el-progress-circle__path",style:e.circlePathStyle,attrs:{d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0}})])]),e.showText&&!e.textInside?i("div",{staticClass:"el-progress__text",style:{fontSize:e.progressTextSize+"px"}},[e.status?i("i",{class:e.iconClass}):[e._v(e._s(e.content))]],2):e._e()])},r=[];n._withStripped=!0;var o={name:"ElProgress",props:{type:{type:String,default:"line",validator:function(e){return["line","circle","dashboard"].indexOf(e)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(e){return e>=0&&e<=100}},status:{type:String,validator:function(e){return["success","exception","warning"].indexOf(e)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var e={};return e.width=this.percentage+"%",e.backgroundColor=this.getCurrentColor(this.percentage),e},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var e=this.radius,t="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(t?"":"-")+e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"-":"")+2*e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"":"-")+2*e+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){var e=-1*this.perimeter*(1-this.rate)/2;return e+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var e=void 0;if(this.color)e=this.getCurrentColor(this.percentage);else switch(this.status){case"success":e="#13ce66";break;case"exception":e="#ff4949";break;case"warning":e="#e6a23c";break;default:e="#20a0ff"}return e},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"===typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(e){return"function"===typeof this.color?this.color(e):"string"===typeof this.color?this.color:this.getLevelColor(e)},getLevelColor:function(e){for(var t=this.getColorArray().sort((function(e,t){return e.percentage-t.percentage})),i=0;i<t.length;i++)if(t[i].percentage>e)return t[i].color;return t[t.length-1].color},getColorArray:function(){var e=this.color,t=100/e.length;return e.map((function(e,i){return"string"===typeof e?{color:e,percentage:(i+1)*t}:e}))}}},s=o,a=i(0),c=Object(a["a"])(s,n,r,!1,null,null,null);c.options.__file="packages/progress/src/progress.vue";var l=c.exports;l.install=function(e){e.component(l.name,l)};t["default"]=l}})},c345:function(e,t,i){"use strict";var n=i("c532"),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,i,o,s={};return e?(n.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),i=n.trim(e.substr(o+1)),t){if(s[t]&&r.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([i]):s[t]?s[t]+", "+i:i}})),s):s}},c401:function(e,t,i){"use strict";var n=i("c532"),r=i("2444");e.exports=function(e,t,i){var o=this||r;return n.forEach(i,(function(i){e=i.call(o,e,t)})),e}},c430:function(e,t){e.exports=!1},c532:function(e,t,i){"use strict";var n=i("1d2b"),r=Object.prototype.toString;function o(e){return"[object Array]"===r.call(e)}function s(e){return"undefined"===typeof e}function a(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function c(e){return"[object ArrayBuffer]"===r.call(e)}function l(e){return"undefined"!==typeof FormData&&e instanceof FormData}function u(e){var t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function d(e){return"string"===typeof e}function h(e){return"number"===typeof e}function p(e){return null!==e&&"object"===typeof e}function f(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function g(e){return"[object Date]"===r.call(e)}function m(e){return"[object File]"===r.call(e)}function _(e){return"[object Blob]"===r.call(e)}function v(e){return"[object Function]"===r.call(e)}function E(e){return p(e)&&v(e.pipe)}function A(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function S(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function C(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),o(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}function b(){var e={};function t(t,i){f(e[i])&&f(t)?e[i]=b(e[i],t):f(t)?e[i]=b({},t):o(t)?e[i]=t.slice():e[i]=t}for(var i=0,n=arguments.length;i<n;i++)C(arguments[i],t);return e}function T(e,t,i){return C(t,(function(t,r){e[r]=i&&"function"===typeof t?n(t,i):t})),e}function I(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}e.exports={isArray:o,isArrayBuffer:c,isBuffer:a,isFormData:l,isArrayBufferView:u,isString:d,isNumber:h,isObject:p,isPlainObject:f,isUndefined:s,isDate:g,isFile:m,isBlob:_,isFunction:v,isStream:E,isURLSearchParams:A,isStandardBrowserEnv:S,forEach:C,merge:b,extend:T,trim:y,stripBOM:I}},c56a:function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||!t)throw new Error("instance & callback is required");var r=!1,o=function(){r||(r=!0,t&&t.apply(null,arguments))};n?e.$once("after-leave",o):e.$on("after-leave",o),setTimeout((function(){o()}),i+100)}},c607:function(e,t,i){var n=i("da84"),r=i("83ab"),o=i("fce3"),s=i("c6b6"),a=i("9bf2").f,c=i("69f3").get,l=RegExp.prototype,u=n.TypeError;r&&o&&a(l,"dotAll",{configurable:!0,get:function(){if(this!==l){if("RegExp"===s(this))return!!c(this).dotAll;throw u("Incompatible receiver, RegExp required")}}})},c65b:function(e,t,i){var n=i("40d5"),r=Function.prototype.call;e.exports=n?r.bind(r):function(){return r.apply(r,arguments)}},c6b6:function(e,t,i){var n=i("e330"),r=n({}.toString),o=n("".slice);e.exports=function(e){return o(r(e),8,-1)}},c6cd:function(e,t,i){var n=i("da84"),r=i("ce4e"),o="__core-js_shared__",s=n[o]||r(o,{});e.exports=s},c770:function(e,t,i){var n=i("e330"),r=n("".replace),o=function(e){return String(Error(e).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,a=s.test(o);e.exports=function(e,t){if(a&&"string"==typeof e)while(t--)e=r(e,s,"");return e}},c8af:function(e,t,i){"use strict";var n=i("c532");e.exports=function(e,t){n.forEach(e,(function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])}))}},c8ba:function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}e.exports=i},c8d2:function(e,t,i){var n=i("5e77").PROPER,r=i("d039"),o=i("5899"),s="​᠎";e.exports=function(e){return r((function(){return!!o[e]()||s[e]()!==s||n&&o[e].name!==e}))}},c901:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},ca84:function(e,t,i){var n=i("e330"),r=i("1a2d"),o=i("fc6a"),s=i("4d64").indexOf,a=i("d012"),c=n([].push);e.exports=function(e,t){var i,n=o(e),l=0,u=[];for(i in n)!r(a,i)&&r(n,i)&&c(u,i);while(t.length>l)r(n,i=t[l++])&&(~s(u,i)||c(u,i));return u}},ca91:function(e,t,i){"use strict";var n=i("ebb5"),r=i("d58f").left,o=n.aTypedArray,s=n.exportTypedArrayMethod;s("reduce",(function(e){var t=arguments.length;return r(o(this),e,t,t>1?arguments[1]:void 0)}))},caad:function(e,t,i){"use strict";var n=i("23e7"),r=i("4d64").includes,o=i("44d2");n({target:"Array",proto:!0},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},cb29:function(e,t,i){var n=i("23e7"),r=i("81d5"),o=i("44d2");n({target:"Array",proto:!0},{fill:r}),o("fill")},cc12:function(e,t,i){var n=i("da84"),r=i("861d"),o=n.document,s=r(o)&&r(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},cc15:function(e,t,i){var n=i("b367")("wks"),r=i("8b1a"),o=i("ef08").Symbol,s="function"==typeof o,a=e.exports=function(e){return n[e]||(n[e]=s&&o[e]||(s?o:r)("Symbol."+e))};a.store=n},cca6:function(e,t,i){var n=i("23e7"),r=i("60da");n({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},cd26:function(e,t,i){"use strict";var n=i("ebb5"),r=n.aTypedArray,o=n.exportTypedArrayMethod,s=Math.floor;o("reverse",(function(){var e,t=this,i=r(t).length,n=s(i/2),o=0;while(o<n)e=t[o],t[o++]=t[--i],t[i]=e;return t}))},cdf9:function(e,t,i){var n=i("825a"),r=i("861d"),o=i("f069");e.exports=function(e,t){if(n(e),r(t)&&t.constructor===e)return t;var i=o.f(e),s=i.resolve;return s(t),i.promise}},ce4e:function(e,t,i){var n=i("da84"),r=Object.defineProperty;e.exports=function(e,t){try{r(n,e,{value:t,configurable:!0,writable:!0})}catch(i){n[e]=t}return t}},ce7a:function(e,t,i){var n=i("9c0e"),r=i("0983"),o=i("5a94")("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},cee4:function(e,t,i){"use strict";var n=i("c532"),r=i("1d2b"),o=i("0a06"),s=i("4a7b"),a=i("2444");function c(e){var t=new o(e),i=r(o.prototype.request,t);return n.extend(i,o.prototype,t),n.extend(i,t),i.create=function(t){return c(s(e,t))},i}var l=c(a);l.Axios=o,l.Cancel=i("7a77"),l.CancelToken=i("8df4"),l.isCancel=i("2e67"),l.VERSION=i("5cce").version,l.all=function(e){return Promise.all(e)},l.spread=i("0df6"),l.isAxiosError=i("5f02"),e.exports=l,e.exports.default=l},cfc3:function(e,t,i){var n=i("74e8");n("Float32",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},d010:function(e,t,i){"use strict";function n(e,t,i){this.$children.forEach((function(r){var o=r.$options.componentName;o===e?r.$emit.apply(r,[t].concat(i)):n.apply(r,[e,t].concat([i]))}))}t.__esModule=!0,t.default={methods:{dispatch:function(e,t,i){var n=this.$parent||this.$root,r=n.$options.componentName;while(n&&(!r||r!==e))n=n.$parent,n&&(r=n.$options.componentName);n&&n.$emit.apply(n,[t].concat(i))},broadcast:function(e,t,i){n.call(this,e,t,i)}}}},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,i){var n=i("da84"),r=i("1626"),o=function(e){return r(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(n[e]):n[e]&&n[e][t]}},d139:function(e,t,i){"use strict";var n=i("ebb5"),r=i("b727").find,o=n.aTypedArray,s=n.exportTypedArrayMethod;s("find",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},d16a:function(e,t,i){var n=i("fc5e"),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},d1e7:function(e,t,i){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},d28b:function(e,t,i){var n=i("746f");n("iterator")},d2b2:function(e,t,i){!function(t,i){e.exports=i()}("undefined"!=typeof self&&self,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=19)}([function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.LoggerStateCenter=t.ZegoDataReport=t.ZegoLogger=t.MODULE_TIPS=t.LinkedList=t.ListNode=t.getReportSeq=t.getSeq=t.REPORT_ACTION=t.E_CLIENT_TYPE=t.SERVER_ERROR_CODE=t.ENUM_STREAM_UPDATE_CMD=t.MINIUM_HEARTBEAT_INTERVAL=t.ENUM_NETWORK_STATE=t.ENUM_RUN_STATE=t.MAX_MIX_TASK_ID_LENGTH=t.MAX_ROOM_ID_LENGTH=t.MAX_USER_NAME_LENGTH=t.MAX_USER_ID_LENGTH=t.MAX_STREAM_ID_LENGTH=t.MAX_TRY_HEARTBEAT_COUNT=t.SEND_MSG_TIMEOUT=t.SEND_MSG_RESET=t.MAX_TRY_CONNECT_COUNT=t.ENUM_CONNECT_STATE=t.ENUM_SCREEM_RESOLUTION_TYPE=t.ENUM_RESOLUTION_TYPE=t.ENUM_SIGNAL_STATE=t.ERROR_CODES=t.ENUM_REMOTE_TYPE=t.LOG_LEVEL=t.ENUM_LOG_LEVEL=t.ROOMVERSION=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.12.0",t.ROOMVERSION="V1",function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.warn=2]="warn",e[e.error=3]="error",e[e.report=99]="report",e[e.disable=100]="disable"}(t.ENUM_LOG_LEVEL||(t.ENUM_LOG_LEVEL={})),t.LOG_LEVEL={debug:0,info:1,warn:2,error:3,report:99,disable:100},function(e){e[e.disable=0]="disable",e[e.websocket=1]="websocket",e[e.https=2]="https"}(t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={})),t.ERROR_CODES={ROOM_SESSION_ID_ERR:1000000152},function(e){e[e.disconnected=0]="disconnected",e[e.connecting=1]="connecting",e[e.connected=2]="connected"}(t.ENUM_SIGNAL_STATE||(t.ENUM_SIGNAL_STATE={})),t.ENUM_RESOLUTION_TYPE={LOW:{width:320,height:240,frameRate:15,bitRate:300},MEDIUM:{width:640,height:480,frameRate:15,bitRate:800},HIGH:{width:1280,height:720,frameRate:20,bitRate:1500}},t.ENUM_SCREEM_RESOLUTION_TYPE={LOW:{frameRate:20,bitRate:800},MEDIUM:{frameRate:15,bitRate:1200},HIGH:{frameRate:5,bitRate:2e3}},t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},t.MAX_TRY_CONNECT_COUNT=1,t.SEND_MSG_RESET=2,t.SEND_MSG_TIMEOUT=1,t.MAX_TRY_HEARTBEAT_COUNT=5,t.MAX_STREAM_ID_LENGTH=256,t.MAX_USER_ID_LENGTH=64,t.MAX_USER_NAME_LENGTH=256,t.MAX_ROOM_ID_LENGTH=128,t.MAX_MIX_TASK_ID_LENGTH=256,function(e){e[e.logout=0]="logout",e[e.trylogin=1]="trylogin",e[e.login=2]="login"}(t.ENUM_RUN_STATE||(t.ENUM_RUN_STATE={})),function(e){e[e.offline=0]="offline",e[e.online=1]="online"}(t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={})),t.MINIUM_HEARTBEAT_INTERVAL=3e3,t.ENUM_STREAM_UPDATE_CMD={added:12001,deleted:12002,updated:12003},t.SERVER_ERROR_CODE=1e4,function(e){e[e.ClientType_None=0]="ClientType_None",e[e.ClientType_H5=1]="ClientType_H5",e[e.ClientType_SmallProgram=2]="ClientType_SmallProgram",e[e.ClientType_Webrtc=3]="ClientType_Webrtc"}(t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={})),t.REPORT_ACTION={eventStart:"eventStart",eventEndWithMsgInfo:"eventEndWithMsgInfo",addEventMsg:"addEventMsg",addEvent:"addEvent",eventEnd:"eventEnd",addMsgInfo:"addMsgInfo"},t.getSeq=(n=1,function(){return n++}),t.getReportSeq=function(){var e=1;return function(){return e++}}();var r=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id?this._id:null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),e.prototype.hasNext=function(){return this.next&&this.next.id},e.prototype.hasPrev=function(){return this.prev&&this.prev.id},e}();t.ListNode=r;var o=function(){function e(){this.start=new r,this.end=new r,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}return e.prototype.insertBefore=function(e,t){var i=new r(this._idCounter,t);return i.next=e,i.prev=e.prev,e.prev&&(e.prev.next=i),e.prev=i,++this._idCounter,++this._numNodes,i},e.prototype.addLast=function(e){return this.insertBefore(this.end,e)},e.prototype.add=function(e){return this.addLast(e)},e.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},e.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},e.prototype.size=function(){return this._numNodes},e.prototype.getFromFirst=function(e){var t=0,i=this.start.next;if(e>=0)for(;t<e&&null!==i;)i=i.next,++t;else i=null;if(null===i)throw"Index out of bounds.";return i},e.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},e.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},e.prototype.removeFirst=function(){var e=null;return this._numNodes>0&&this.start.next&&(e=this.remove(this.start.next)),e},e.prototype.removeLast=function(){var e=null;return this._numNodes>0&&this.end.prev&&(e=this.remove(this.end.prev)),e},e.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},e.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},e.prototype.find=function(e){for(var t=this.start,i=!1,n=null;t.hasNext()&&!i;)e(t=t.next)&&(n=t,i=!0);return n},e.prototype.map=function(e){for(var t=this.start,i=[];t.hasNext();)e(t=t.next)&&i.push(t);return i},e.prototype.push=function(e){return this.addLast(e)},e.prototype.unshift=function(e){this._numNodes>0?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(){return this.removeFirst()},e}();t.LinkedList=o,t.MODULE_TIPS={MESSAGE:"未引入消息模块"};var s=i(21);Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return s.ZegoLogger}}),Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return s.ZegoDataReport}}),Object.defineProperty(t,"LoggerStateCenter",{enumerable:!0,get:function(){return s.LoggerStateCenter}}),Object.defineProperty(t,"createZegoWebSocket",{enumerable:!0,get:function(){return s.createZegoWebSocket}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={SERVER:{code:0,msg:"liverooom cmd error"},SUCCESS:{code:0,msg:"success."},INIT:{code:2000000001,msg:"init sdk wrong"},NOT_LOGIN:{code:1000002,msg:"not login"},NETWORK_BROKEN:{code:1000017,msg:"network is broken"},INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},INIT_SDK_WRONG:{code:1101e3,msg:"init sdk wrong"},USER_ID_NULL:{code:1002005,msg:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,msg:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,msg:"user ID is too long"},USER_NAME_NULL:{code:1002008,msg:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,msg:"username is too long"},ROOM_ID_NULL:{code:1002011,msg:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,msg:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,msg:"room ID is too long"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},LOGIN_TIMEOUT:{code:1002031,msg:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,msg:"users logging into the room exceeds the maximum number"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,msg:"kickout may be the same user ID login other"},NETWORK_RECOVERY:{code:1002051,msg:"network recovery"},ROOM_RETRY_TIMEOUT:{code:1002053,msg:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,msg:"server has sent a signal to kick out"},REPEATEDLY_LOGIN:{code:1002056,msg:"user repeatedly login"},REPEATEDLY_ENTER_ROOM:{code:1002057,msg:"user repeatedly enter room"},ALREADY_LOGIN:{code:1002058,msg:"user already logged in"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,msg:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,msg:"parse json error."},LOGIN_PROCESSING:{code:1102012,msg:"login is processing."},LIVEROMM_REQUEST_ERROR:{code:1102013,msg:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,msg:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,msg:"user login state is wrong."},TOKEN_ERROR:{code:1102016,msg:"token error"},DIAPATCH_ERROR:{code:1102017,msg:"dispatch error"},TOKEN_EXPIRED:{code:1102018,msg:"token expired"},SUBCMD_ERROR:{code:1102019,msg:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,msg:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,msg:"biz channel error."}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientUtil=void 0;var n=i(22),r=i(0),o=i(1),s=function(){function e(){}return e.checkConfigParam=function(e,t,i){return e&&"number"==typeof e&&this.checkInteger(e)?!(!t||"string"!=typeof t&&!Array.isArray(t)||""==t)||(i.error("ccp.0 server must be string or string array and not empty"),!1):(i.error("ccp.0 appid must be positive integer number and not empty"),!1)},e.checkPriConfigParam=function(e,t,i,n,r){return e&&"number"==typeof e&&this.checkInteger(e)?t&&"string"==typeof t?"object"!=typeof i||"string"!=typeof i.deviceID?(r.error("ccp.0 deviceID must be string and not empty"),!1):1===n||0===n||(r.error("ccp.0 anType must be 0 or 1"),!1):(r.error("ccp.0 dispatchServer must be string and not empty"),!1):(r.error("ccp.0 appid must be positive integer number and not empty"),!1)},e.checkIllegalCharacters=function(e){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e)&&/^[^:/]*$/g.test(e)},e.isUrl=function(e){return!!(e.startsWith("rtmp://")||e.startsWith("https://")&&e.endsWith(".flv")||e.startsWith("https://")&&e.endsWith(".m3u8"))},e.registerCallback=function(e,t,i){var n,r;t.success&&(n=t.success,i[e+"SuccessCallback"]=n),t.error&&(r=t.error,i[e+"ErrorCallback"]=r)},e.actionErrorCallback=function(e,t){return t[e+"ErrorCallback"]},e.actionSuccessCallback=function(e,t){return t[e+"SuccessCallback"]},e.logReportCallback=function(t,i,n,r){e.registerCallback(t,{success:function(t,r){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];e.dataReportEvent(i,n,t,r,o)}},r)},e.proxyRes=function(t,i,n,r){return{interResolve:function(e){t.uploadReport(i),n(e)},interReject:function(n,o){var s;void 0===o&&(o=""),(s=n.code<2e9&&n.code>1e9?e.decodeServerError(n.code,n.msg):{code:n.code,message:n.msg})&&t.addMsgInfo(i,{error:s.code,message:s.message+o}),t.uploadReport(i),r({errorCode:n.code})}}},e.getServerError=function(e){var t={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};if(0===e)return o.errorCodeList.SUCCESS;var i=o.errorCodeList.ROOM_INNER_ERROR;if(i.code=e,e>1e9){var n=t[e];i.msg=n?"liveroom cmd error, code: "+e+", message: "+n:t[1e9]+e}else i.msg=t[e]?t[e]+" code:"+e:"unknown error code:"+e;return i},e.unregisterCallback=function(e,t){delete t[e+"SuccessCallback"],delete t[e+"ErrorCallback"]},e.decodeServerError=function(e,t){var i={code:-1,message:"server error"};return i.code=e>1e9?e-1e9+52e6:e+2002e6,t&&(i.message=t),i},e.getLiveRoomError=function(e){return e>1e9?{1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR"}[e-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[e]||"ROOM_INNER_ERROR"},e.getKickoutError=function(e){var t={code:e,message:"kickout reason = "+e};switch(e){case 1:t.code=63000001,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:t.code=63000002,t.message="zpush manual kickout",t.name="MANUAL_KICKOUT";break;case 3:t.code=63000003,t.message="kickout reason = "+e;break;case 4:t.code=63000004,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 5:t.code=63000005,t.message="zpush token expired",t.name="TOKEN_EXPIRED";break;default:t.code=e,t.message="kickout reason = "+e}return t},e.dataReportEvent=function(e,t,i,n,r){switch(i){case"eventStart":e.eventStart(t,n);break;case"eventEndWithMsgInfo":e.eventEndWithMsgInfo(t,n,r[0]);break;case"addEventMsg":e.addEventMsg(t,n,r[0],r[1]);break;case"addEvent":e.addEvent(t,n);break;case"eventEnd":e.eventEnd(t,n);break;case"addMsgInfo":e.addMsgInfo(t,r[0])}},e.isKeepTryLogin=function(e){switch(e){case 1002:case 1003:return!0;default:return!1}},e.mergeUserList=function(e,t,i,n){e.debug("msl.0 call");var r,o=[],s=[];i||(i=[]);for(var a=0;a<i.length;a++){r=!1;for(var c=0;c<t.length;c++)if(i[a].userID===t[c].userID){r=!0;break}r||o.push(i[a])}for(var l=0;l<t.length;l++){r=!1;for(var u=0;u<i.length;u++)if(t[l].userID===i[u].userID){r=!0;break}r||s.push(t[l])}for(t.splice(0),a=0;a<i.length;a++)t.push(t[a]);n(o,s),e.debug("msl.0 call success")},e.checkInteger=function(e,t){return 0==t?"number"==typeof e&&e%1==0&&e>=0:"number"==typeof e&&e%1==0&&e>0},e.checkValidNumber=function(e,t,i){return t=t||1,i=i||1e4,"number"==typeof e&&e%1==0&&e>=t&&e<=i},e.generateRandumNumber=function(e){return parseInt(Math.random()*(e+1)+"",10)},e.uuid=function(e,t){var i,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];if(t=t||n.length,e)for(i=0;i<e;i++)r[i]=n[0|Math.random()*t];else{var o=void 0;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",i=0;i<36;i++)r[i]||(o=0|16*Math.random(),r[i]=n[19==i?3&o|8:o])}return r.join("")},e.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var i=Math.max(e.length,t.length);e.length<i;)e.push("0");for(;t.length<i;)t.push("0");for(var n=0;n<i;n++){var r=parseInt(e[n]),o=parseInt(t[n]);if(r>o)return 1;if(r<o)return-1}return 0},e.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),i=-1!=e.indexOf("Firefox"),n=null!=window.opr,r=e.indexOf("Chrome")&&window.chrome,o=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return t?"IE":i?"Firefox":n?"Opera":r?"Chrome":o?"Safari":"Unkown"},e.isTestEnv=function(e){return-1!=e.indexOf("wss://wssliveroom-test.zego.im/ws")||-1!=e.indexOf("wss://test2-wsliveroom-api.zego.im/ws")||-1!=e.indexOf("wss://wsliveroom-test.zegocloud.com/ws")||-1!=e.indexOf("wss://wsliveroom-test.zego.im/ws")||-1!=e.indexOf("wss://webliveroom-test.zego.im/ws")||-1!=e.indexOf("wss://webliveroom-test-bak.zego.im/ws")||-1!=e.indexOf("wss://webliveroom-hk-test.zegocloud.com/ws")||-1!=e.indexOf("wss://webliveroom-hk-test-bak.zegocloud.com/ws")},e.getLogLevel=function(e){return r.LOG_LEVEL[e]},e.getUint64=function(e,t,i){var n=i.getUint32(e,t),r=i.getUint32(e+4,t),o=t?n+Math.pow(2,32)*r:Math.pow(2,32)*n+r;return Number.isSafeInteger(o)||console.warn(o,"exceeds MAX_SAFE_INTEGER. Precision may be lost"),o},e.decodeTokenExpire=function(t){try{var i=Uint8Array.from(n.Base64.base64decode(t),(function(e){return e.charCodeAt(0)})),r=new DataView(i.buffer),o=void 0;return o="function"==typeof r.getBigInt64?r.getBigUint64(0):e.getUint64(0,!1,r),Number(o>0?o:r.getBigUint64(0,!0))}catch(e){console.error("token error")}return-1},e}();t.ClientUtil=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_RTM_ACTION=void 0,function(e){e.ZEGOEXPRESSWEBRTM_CONSTRUCTOR="zm.0",e.ZEGOEXPRESSWEBRTM_BIND_WINDOW_LISTENER="zm.wl",e.ZEGOEXPRESSWEBRTM_SET_LOG_CONFIG="zm.slf",e.ZEGOEXPRESSWEBRTM_SET_DEBUG_VERBOSE="zm.sdv",e.ZEGOEXPRESSWEBRTM_LOGIN_ROOM="zm.lg",e.ZEGOEXPRESSWEBRTM_LOGOUT_ROOM="zm.lo",e.ZEGOEXPRESSWEBRTM_SET_CLOUD_SETTING_URLS="zm.scsu",e.ZEGOEXPRESSWEBRTM_ON="zm.on",e.ZEGOEXPRESSWEBRTM_OFF="zm.off",e.ZEGOEXPRESSWEBRTM_RENEWTOKEN="zm.rntk",e.ZEGOEXPRESSWEBRTM_RESETTOKENTIMER="zm.rstt",e.ZEGOEXPRESSWEBRTM_ENABLE_MULTI_ROOM="zm.emr",e.ZEGOEXPRESSWEBRTM_SEND_PB="zm.spb",e.ZEGOEXPRESSWEBRTM_GET_HEADER="zm.gh",e.ROOM_LOGIN_ROOM="zm.rm.lg",e.ROOM_TRY_LOGIN="zm.rm.tl",e.ROOM_OPEN_HANDLER="zm.rm.op",e.ROOM_HANDLE_LOGINRSP="zm.rm.lgr",e.ROOM_CLOSEHANDLER="zm.rm.clh",e.ROOM_LOGOUT="zm.rm.lo",e.ROOM_RESET_ROOM="zm.rm.rr",e.ROOM_DISCONNECT="zm.rm.dcn",e.ROOM_KICK_OUT="zm.rm.kco",e.ROOM_STATUS_CALLBACK="zm.rm.scb",e.ROOM_RESETTOKEN_TIMER="zm.rm.rst",e.HEARTBEAT_START="zm.hb.st",e.HEARTBEAT_HEARTBEAT_RSP="zm.hb.rsp",e.HEARTBEAT_RESET="zm.hb.rst",e.SERVICE_PUSH="zm.sv.ps",e.SERVICE_SEND="zm.sv.sd",e.USER_LOGIN_RSP="zm.us.lgr",e.USER_FETCH_USER="zm.us.ftu",e.USER_FETCH_USER_RSP="zm.us.urp",e.USER_USER_PUSH="zm.us.uph",e.USER_MERGE_SEQ="zm.us.mg",e.USER_MERGE_TIMEOUT="zm.us.mto",e.USER_MERGE="zm.us.mg",e.USER_HB_PATCH="zm.us.pt",e.STATE_ACTION="zm.st.at",e.ON_LISTENER="ON_LISTENER"}(t.ZEGO_RTM_ACTION||(t.ZEGO_RTM_ACTION={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTMLogEvent=void 0;var n=i(1),r=function(e){return e};t.ZegoRTMLogEvent={kZegoTaskInitSetting:{event:"/sdk/init",error:{kInvalidParamError:n.errorCodeList.INPUT_PARAM},system_info:navigator?navigator.appVersion:""},kZegoTaskSetDebug:{event:"/sdk/set_debug",debug:r},kZegoTaskSetLog:{event:"/sdk/set_log_config",error:{kInvalidParamError:n.errorCodeList.INPUT_PARAM},log_level:function(e){return e},remote_log_level:r,log_url:r},kZegoTaskLoginRoom:{event:"/sdk/login",user_update:r,max_member_count:r,message:r,token:r,error:{ROOM_ID_NULL:n.errorCodeList.ROOM_ID_NULL,INPUT_PARAM:n.errorCodeList.INPUT_PARAM,ROOM_ID_TOO_LONG:n.errorCodeList.ROOM_ID_TOO_LONG,ROOM_ID_INVALID_CHARACTER:n.errorCodeList.ROOM_ID_INVALID_CHARACTER,USER_ID_NULL:n.errorCodeList.USER_ID_NULL,USER_ID_TOO_LONG:n.errorCodeList.USER_ID_TOO_LONG,USER_ID_INVALID_CHARACTER:n.errorCodeList.USER_ID_INVALID_CHARACTER,USER_NAME_NULL:n.errorCodeList.USER_NAME_NULL,USER_NAME_TOO_LONG:n.errorCodeList.USER_NAME_TOO_LONG,REPEATEDLY_LOGIN:n.errorCodeList.REPEATEDLY_LOGIN,LOGIN_TIMEOUT:n.errorCodeList.LOGIN_TIMEOUT,INNER_ERROR:n.errorCodeList.ROOM_INNER_ERROR,NETWORK_BROKEN:n.errorCodeList.NETWORK_BROKEN},subEvent:{create_socket:{event:"create_socket",server:r,try_cnt:r},liveroom_login:{event:"liveroom_login",server:r,respond_info:r}}},kZegoTaskReNewToken:{event:"/sdk/reNewToken",error:{INPUT_PARAM:n.errorCodeList.INPUT_PARAM,NOT_LOGIN:n.errorCodeList.NOT_LOGIN}},kZegoTaskLogoutRoom:{event:"/sdk/logout",error:{INPUT_PARAM:n.errorCodeList.INPUT_PARAM,ROOM_NOT_EXIST:n.errorCodeList.ROOM_NOT_EXIST}},kZegoTaskReLoginRoom:{event:"/sdk/relogin",error:{ROOM_ID_NULL:n.errorCodeList.ROOM_ID_NULL,ROOM_DISCONNECT:n.errorCodeList.NETWORK_BROKEN},subEvent:{create_socket:{event:"create_socket",server:r,try_cnt:r},liveroom_login:{event:"liveroom_login",server:r,respond_info:r}}},kZegoTaskKickout:{event:"/sdk/kickout",user_id:r,error:{}},kZegoTaskRoomKickout:{event:"/sdk/room_kickout",user_id:r,room_id:r,message:r},kZegoTaskLiveRoomHB:{event:"/liveroom/hb",room_sid:r,error:{NOT_LOGIN:n.errorCodeList.NOT_LOGIN,HB_TIMEOUT:n.errorCodeList.TIMEOUT}},kZegoTaskLiveRoomGetUserUpdateInfo:{event:"/liveroom/get_user_update_info",user_update_type:r},kZegoListener:{event:"/sdk/listener"},kZegoEnableMultiRoom:{event:"sdk/enable_multi_room",error:{kInvalidParamError:n.errorCodeList.INPUT_PARAM,kAlreadyLoginError:n.errorCodeList.ALREADY_LOGIN}},kZegoTaskCloudSettingCache:{event:"/cloud_setting/cache"},kZegoTaskCloudSettingRefresh:{event:"/cloud_setting/refresh"},kZegoTaskCloudSettingRequest:{event:"/cloud_setting/request"}}},,,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeartBeatHandler=void 0;var n=i(0),r=i(2),o=i(1),s=i(3),a=i(4),c=3,l=function(){function e(e,t,i,n,r){this.logger=e,this.stateCenter=t,this.dataReport=i,this.service=n,this.room=r,this.tryHeartbeatCount=0,this.heartbeatTimer=null,this.loginHeartbeatTimer=null,this.initCount=0}return e.prototype.init=function(e){var t,i=this;if("PRIVATE"==this.stateCenter.type){t=e.body.hb_interval<n.MINIUM_HEARTBEAT_INTERVAL?n.MINIUM_HEARTBEAT_INTERVAL:e.body.hb_interval;var r=e.body.hb_timeout||4e4;c=r/t+1}else t=e.body.hearbeat_interval<n.MINIUM_HEARTBEAT_INTERVAL?n.MINIUM_HEARTBEAT_INTERVAL:e.body.hearbeat_interval;this.tryHeartbeatCount=0,this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.loginHeartbeatTimer=setTimeout((function(){i.start(t)}),t),this.initCount++},e.prototype.start=function(e){var t=this;this.logger.info(s.ZEGO_RTM_ACTION.HEARTBEAT_START+" call");var i=n.getReportSeq();if(this.dataReport.newReport(i,a.ZegoRTMLogEvent.kZegoTaskLiveRoomHB.event),this.dataReport.addMsgInfo(i,{room_sid:a.ZegoRTMLogEvent.kZegoTaskLiveRoomHB.room_sid(this.room.sessionID)}),!this.room.isLogin())return this.logger.error(s.ZEGO_RTM_ACTION.HEARTBEAT_START+" state error"),this.dataReport.addMsgInfo(i,{error:a.ZegoRTMLogEvent.kZegoTaskLiveRoomHB.error.NOT_LOGIN.code,message:a.ZegoRTMLogEvent.kZegoTaskLiveRoomHB.error.NOT_LOGIN.msg}),void this.dataReport.uploadReport(i);if(++this.tryHeartbeatCount>c)return this.logger.error(s.ZEGO_RTM_ACTION.HEARTBEAT_START+" come to try limit"),this.dataReport.addMsgInfo(i,{error:a.ZegoRTMLogEvent.kZegoTaskLiveRoomHB.error.HB_TIMEOUT.code,message:a.ZegoRTMLogEvent.kZegoTaskLiveRoomHB.error.HB_TIMEOUT.msg}),this.dataReport.uploadReport(i),void this.hbLogout(o.errorCodeList.HEARTBEAT_TIMEOUT);var l=function(e){var n="PRIVATE"==t.stateCenter.type?e.body&&e.body.code:e.body&&e.body.err_code;if(e.header&&e.body){if(0!==n){var s=r.ClientUtil.decodeServerError(e.body.err_code||e.body.code,e.body.err_message||e.body.message);t.dataReport.addMsgInfo(i,{error:s.code,message:s.message+e.body.err_code})}}else t.dataReport.addMsgInfo(i,{error:e.code>0?e.code:o.errorCodeList.ROOM_INNER_ERROR.code,message:e.msg?e.msg:o.errorCodeList.ROOM_INNER_ERROR});t.dataReport.uploadReport(i),"PRIVATE"==t.stateCenter.type?t.handlePrivateHeartbeatRsp(e):t.handleHeartbeatRsp(e)};this.service.heartBeat(l,l,this.room.sessionID,this.room.roomID,this.room.roomSessionID),this.heartbeatInterval=e;var u=this.heartbeatInterval;this.initCount>=2?(u=Math.round(Math.random()*(this.heartbeatInterval+1)),this.initCount=1):u=this.heartbeatInterval,this.heartbeatTimer=setTimeout((function(){t.start(t.heartbeatInterval)}),u),this.logger.info(s.ZEGO_RTM_ACTION.HEARTBEAT_START+" call success")},e.prototype.handleHeartbeatRsp=function(e){return e.body&&e.body.err_code&&0!==e.body.err_code?(this.logger.error(s.ZEGO_RTM_ACTION.HEARTBEAT_HEARTBEAT_RSP+" disconnect, server error=",e.body.err_code),e.body.err_code==n.ERROR_CODES.ROOM_SESSION_ID_ERR?void this.hbLogout(o.errorCodeList.HEARTBEAT_TIMEOUT):void this.hbLogout(r.ClientUtil.getServerError(e.body.err_code))):e.header&&e.body?(this.tryHeartbeatCount=0,this.heartbeatInterval=e.body.hearbeat_interval,this.heartbeatInterval<n.MINIUM_HEARTBEAT_INTERVAL&&(this.heartbeatInterval=n.MINIUM_HEARTBEAT_INTERVAL),this.heartbeatRspNotiFy(e),void this.logger.info(s.ZEGO_RTM_ACTION.HEARTBEAT_HEARTBEAT_RSP+" call success")):(this.logger.error(s.ZEGO_RTM_ACTION.HEARTBEAT_HEARTBEAT_RSP+" disconnect, error=",JSON.stringify(e)),void this.hbLogout(e))},e.prototype.handlePrivateHeartbeatRsp=function(e){if(0!==e.body.code)return this.logger.error(s.ZEGO_RTM_ACTION.HEARTBEAT_HEARTBEAT_RSP+" disconnect, server error=",e.body.code),e.body.code==n.ERROR_CODES.ROOM_SESSION_ID_ERR?void this.hbLogout(o.errorCodeList.HEARTBEAT_TIMEOUT):void this.hbLogout(r.ClientUtil.getServerError(e.body.code));this.tryHeartbeatCount=0,this.heartbeatInterval=e.body.hb_interval,this.heartbeatInterval<n.MINIUM_HEARTBEAT_INTERVAL&&(this.heartbeatInterval=n.MINIUM_HEARTBEAT_INTERVAL),this.heartbeatRspNotiFy(e),this.logger.info(s.ZEGO_RTM_ACTION.HEARTBEAT_HEARTBEAT_RSP+" call success")},e.prototype.heartbeatRspNotiFy=function(e){},e.prototype.hbLogout=function(e){},e.prototype.resetHeartbeat=function(){clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null,clearTimeout(this.loginHeartbeatTimer),this.loginHeartbeatTimer=null,this.tryHeartbeatCount=0,this.initCount=0,this.logger.info(s.ZEGO_RTM_ACTION.HEARTBEAT_RESET+" call success")},e}();t.HeartBeatHandler=l},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t){for(var i=0,n=t.length,r=e.length;i<n;i++,r++)e[r]=t[i];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.UserHandler=void 0;var r=i(0),o=i(2),s=i(3),a=i(4),c=function(){function e(e,t,i,n,r){this.logger=e,this.stateCenter=t,this.dataReport=i,this.service=n,this.room=r,this.userQuerying=!1,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=[],this.userSeqMergeMap=null,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}}return e.prototype.loginRsp=function(e,t){this.anchor_info=e.body.anchor_info||this.anchor_info,this.userListInterval=e.body.userlist_interval||this.userListInterval,this.userListMergeInterval=e.body.userlist_merge_timeout||this.userListMergeInterval,e.body.anchor_info&&(this.stateCenter.actionListener("getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name),this.stateCenter.actionListener("_getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name)),e.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,e.body.online_count),this.logger.info(s.ZEGO_RTM_ACTION.USER_LOGIN_RSP+"  userStateUpdate "+this.stateCenter.userStateUpdate),this.stateCenter.userStateUpdate&&this.fetchUserList(t)},e.prototype.patchUserList=function(e){var t=this;e.body.server_user_seq!==this.userSeq&&this.stateCenter.userStateUpdate&&!this.userSeqMergeMap&&(this.logger.info(s.ZEGO_RTM_ACTION.USER_HB_PATCH+" call update user "+this.userSeq+" server "+e.body.server_user_seq),this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout((function(){t.handleMergeTimeout()}),this.userListMergeInterval)),this.minUserSeq=e.body.server_user_seq,null!=e.body.online_count&&0!=e.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,e.body.online_count)},e.prototype.resetUserHandler=function(){this.userQuerying=!1,this.lastUserQueryTime=0,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=void 0,this.userSeqMergeMap={},this.userSeqMergeTimer=void 0,this.userQueryTimer=void 0,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}},e.prototype.fetchUserList=function(e){this.userQuerying?this.logger.warn(s.ZEGO_RTM_ACTION.USER_FETCH_USER+" is already querying"):(this.userQuerying=!0,this.userTempList=[],this.fetchUserListWithPage(0,e||0),this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER+" the first time call"))},e.prototype.fetchUserListWithPage=function(e,t){var i,n=this,o=function(e){"PRIVATE"==n.stateCenter.type?n.handleFetchUserListPrivateRsp(e):n.handleFetchUserListRsp(e,t)};i="PRIVATE"==this.stateCenter.type?{room_header:{room_id:this.room.roomID,room_sid:this.room.roomSid,room_user_session_id:this.room.roomSessionID},mark:"0"}:{user_index:e,sort_type:0},"V1"===r.ROOMVERSION?this.service.fetchUserList(i,o,o,this.room.sessionID,this.room.roomID,this.room.roomSessionID):this.service.fetchUserListV2({marker:0===e?"":e+"",mode:0,limit:100},o,o,this.room.sessionID,this.room.roomID,this.room.roomSessionID)},e.prototype.handleFetchUserListRsp=function(e,t){var i=this;if(e.body&&0!=e.body.err_code)return this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,void this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER_RSP+" fetch error "+e.body.err_code);if(!e.header||!e.body)return this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,void this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER_RSP+" fetch error "+e);if(this.stateCenter.userStateUpdate){this.userTempList=n(n([],this.userTempList),e.body.user_baseinfos);var a=e.body.ret_user_index;if(a!=e.body.server_user_index)return this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER_RSP+" fetch another page"),void this.fetchUserListWithPage(a+1,t);this.userSeq=e.body.server_user_seq;for(var c=[],l=[],u=0;u<this.userTempList.length;u++){var d={userID:this.userTempList[u].id_name,userName:this.userTempList[u].nick_name,role:this.userTempList[u].role};c.push(d),l.push({idName:this.userTempList[u].id_name,nickName:this.userTempList[u].nick_name,role:this.userTempList[u].role})}this.stateCenter.actionListener("_getTotalUserList",this.room.roomID,l),t==r.ENUM_RUN_STATE.login?(this.userList&&o.ClientUtil.mergeUserList(this.logger,this.userList,c,(function(e,t){0!==e.length&&i.onUserStateUpdate(i.room.roomID,"ADD",e),0!==t.length&&i.onUserStateUpdate(i.room.roomID,"DELETE",t)})),this.userList=c):(this.userList=c,0!==c.length&&this.onUserStateUpdate(this.room.roomID,"ADD",c)),this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.userTempList=[],this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER_RSP+" call success user_list "+c+" count "+c.length)}},e.prototype.handlePushUserStateUpdateMsg=function(e){if(this.logger.info(s.ZEGO_RTM_ACTION.USER_USER_PUSH+" call"),this.stateCenter.userStateUpdate)if(this.userSeq!==e.body.user_list_seq)if(this.userSeq+e.body.user_actions.length===e.body.user_list_seq){this.userSeq=e.body.user_list_seq;var t,i,n=[];if("PRIVATE"==this.stateCenter.type){t=0,i=1;for(var r=0;r<e.body.user_actions.length;r++){var o={action:e.body.user_actions[r].action,idName:e.body.user_actions[r].user_id,nickName:e.body.user_actions[r].user_name,role:e.body.user_actions[r].role,loginTime:e.body.user_actions[r].login_time};n.push(o)}}else{for(t=1,i=2,r=0;r<e.body.user_actions.length;r++)o={action:e.body.user_actions[r].Action,idName:e.body.user_actions[r].IdName,nickName:e.body.user_actions[r].NickName,role:e.body.user_actions[r].Role,loginTime:e.body.user_actions[r].LoginTime},n.push(o);this.stateCenter.actionListener("_userStateUpdate",e.body.room_id,n)}var a=[],c=[];n.forEach((function(e){e.action==t?a.push({userID:e.idName,userName:e.nickName,role:e.role}):e.action==i&&c.push({userID:e.idName,userName:e.nickName,role:e.role})})),this.userList&&(this.userList=this.userList.concat(a).filter((function(e){return!c.some((function(t){return t.userID==e.userID}))}))),0!==a.length&&this.onUserStateUpdate(e.body.room_id||e.body.room_pushheader.room_id,"ADD",a),0!==c.length&&this.onUserStateUpdate(e.body.room_id||e.body.room_pushheader.room_id,"DELETE",c),this.logger.info(s.ZEGO_RTM_ACTION.USER_USER_PUSH+" call success")}else this.mergeUserByUserSeq(e.body.user_list_seq,e.body.user_actions);else this.logger.warn(s.ZEGO_RTM_ACTION.USER_USER_PUSH+" user_list_seq is the same with local seq");else this.logger.info(s.ZEGO_RTM_ACTION.USER_USER_PUSH+" userStateUpdate is false")},e.prototype.onUserStateUpdate=function(e,t,i){var n=this,o=r.getReportSeq();this.dataReport.newReport(o,a.ZegoRTMLogEvent.kZegoTaskLiveRoomGetUserUpdateInfo.event);var s=i.filter((function(e){return e.userID!==n.stateCenter.idName}));0!=s.length&&("PRIVATE"!==this.stateCenter.type&&(s=s.map((function(e){return{userID:e.userID,userName:e.userName}}))),this.stateCenter.actionListener("roomUserUpdate",e,t,s),this.dataReport.addMsgInfo(o,{user_update_type:"ADD"==t?a.ZegoRTMLogEvent.kZegoTaskLiveRoomGetUserUpdateInfo.user_update_type("added"):a.ZegoRTMLogEvent.kZegoTaskLiveRoomGetUserUpdateInfo.user_update_type("deleted")}),this.dataReport.uploadReport(o))},e.prototype.mergeUserByUserSeq=function(e,t){var i=this;this.userSeqMergeMap||(this.logger.warn(s.ZEGO_RTM_ACTION.USER_MERGE_SEQ+" new merge userlist "+this.userSeq+" server "+e),this.userSeqMergeMap={},this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout((function(){i.handleMergeTimeout()}),this.userListMergeInterval)),this.userSeqMergeMap[e]=t,this.logger.warn(s.ZEGO_RTM_ACTION.USER_MERGE_SEQ+"  merge userlist "+this.userSeq+" server "+e+" userlist "+t.length)},e.prototype.mergeUser=function(e){var t=this;this.logger.info(s.ZEGO_RTM_ACTION.USER_MERGE+" merge userlist "+this.userSeq+" userSeqList "+e.join(",")),this.userSeq=e[e.length-1],this.lastUserQueryTime=Date.now()+this.userListInterval;var i={};e.forEach((function(e){t.userSeqMergeMap&&t.userSeqMergeMap[e].forEach((function(e){i[e.IdName]=e}))})),this.userSeqMergeMap=null;var n=Object.values(i).map((function(e){return{action:e.Action,idName:e.IdName,nickName:e.NickName,role:e.Role,loginTime:e.LoginTime?String(e.LoginTime):""}}));n.sort((function(e,t){return e.loginTime.localeCompare(t.loginTime)}));var r=[],o=[];n.forEach((function(e){1==e.action?r.push({userID:e.idName,userName:e.nickName,role:e.role}):2==e.action&&o.push({userID:e.idName,userName:e.nickName,role:e.role})})),this.userList=this.userList&&this.userList.concat(r).filter((function(e){return!o.some((function(t){return t.userID==e.userID}))})),0!==r.length&&this.onUserStateUpdate(this.room.roomID,"ADD",r),0!==o.length&&this.onUserStateUpdate(this.room.roomID,"DELETE",o),this.stateCenter.actionListener("_userStateUpdate",this.room.roomID,n)},e.prototype.handleMergeTimeout=function(){var e=this,t=Object.keys(this.userSeqMergeMap).map((function(e){return+e})).sort((function(e,t){return e-t}));if(t[t.length-1]-t[0]+1===t.length||t[t.length-1]>=this.minUserSeq)this.mergeUser(t);else{this.userSeqMergeMap=null;var i=this.lastUserQueryTime-Date.now();this.logger.info(s.ZEGO_RTM_ACTION.USER_MERGE_TIMEOUT+"  fetch merge userlist "+this.userSeq+" userSeqList "+t.join(",")+" wait "+i),i>0?(this.userQueryTimer&&clearTimeout(this.userQueryTimer),this.userQueryTimer=setTimeout((function(){e.fetchUserList()}),i)):this.fetchUserList()}},e.prototype.loginPrivateRsp=function(e){this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER," userStateUpdate "+this.stateCenter.userStateUpdate),this.stateCenter.userStateUpdate&&this.fetchUserList()},e.prototype.handleFetchUserListPrivateRsp=function(e){if(this.logger.debug(s.ZEGO_RTM_ACTION.USER_FETCH_USER+" call"),e.body.code&&0!==e.body.code)return this.userQuerying=!1,void this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER+" fetch error "+e.body.code+" "+e.body.message);if(this.stateCenter.userStateUpdate){this.userTempList=n(n([],this.userTempList),e.body.users),this.userSeq=e.body.userlist_seq,this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER+" set user Seq "+this.userSeq);for(var t=[],i=0;i<this.userTempList.length;i++){var r={userID:this.userTempList[i].user_id,userName:this.userTempList[i].user_name,role:this.userTempList[i].role};t.push(r)}this.userQuerying=!1,this.onUserStateUpdate(this.room.roomID,"ADD",t),this.userTempList=[],this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER+" call success user_list "+t+" count "+t.length)}},e}();t.UserHandler=c},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__spreadArray||function(e,t){for(var i=0,n=t.length,r=e.length;i<n;i++,r++)e[r]=t[i];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.LiveRoomService=void 0;var o=i(0),s=i(12),a=i(3),c=i(1),l=function(){function e(e,t,i){this.stateCenter=e,this.logger=t,this.rtm=i,this.service=new s.ZegoSocketService(this.stateCenter.ENV),this.cmdSeq=0,this.responseRouters={}}return e.prototype.checkResponse=function(e){return e.header.appid!==this.stateCenter.appid||e.header.user_id!==this.stateCenter.userid},e.prototype.handleSendCommandMsgRsp=function(e){var t=this,i=this.service.sendCommandMap[e.header.seq];if(null!=i){var n=i._data;delete this.service.sendCommandMap[e.header.seq],this.service.sendCommandList.remove(i),0===e.body.err_code?setTimeout((function(){n&&null!=n.success&&n.success(e,t.cmdSeq)}),0):setTimeout((function(){n&&null!=n.error&&n.error(e,t.cmdSeq)}),0)}},e.prototype.onPush=function(){var e=this;this.service.onMessage=function(t){t instanceof ArrayBuffer?e.stateCenter.actionListener("_protobufResponse",t):t.header?(0!==t.body.err_code?t.body.err_message&&e.logger.error(a.ZEGO_RTM_ACTION.SERVICE_PUSH+" cmd="+t.header.cmd+", err_code="+t.body.err_code+", err_message="+t.body.err_message+" "):e.logger.info(a.ZEGO_RTM_ACTION.SERVICE_PUSH+" cmd="+t.header.cmd+", msg="+JSON.stringify(t)+" "),["login","logout"].indexOf(t.header.cmd)>-1?e.handleSendCommandMsgRsp(t):e.checkResponse(t)?e.logger.error(a.ZEGO_RTM_ACTION.SERVICE_PUSH+"  check session fail."):(e.logger.info(a.ZEGO_RTM_ACTION.SERVICE_PUSH+" cmd="+t.header.cmd+",function="+!!e.responseRouters[t.header.cmd]),e.handleSendCommandMsgRsp(t),e.responseRouters[t.header.cmd]&&e.responseRouters[t.header.cmd](t,e.cmdSeq))):e.logger.error(a.ZEGO_RTM_ACTION.SERVICE_PUSH+" msg type error ")}},e.prototype.handlePushKickout=function(e){var t,i,n,o;if(void 0===(null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.protocol)||1===(null===(i=null==e?void 0:e.body)||void 0===i?void 0:i.protocol))r([],this.stateCenter.roomModulesList).forEach((function(t){return t.roomHandler.handlePushKickout(e,!0)}));else{var s=null===(n=null==e?void 0:e.header)||void 0===n?void 0:n.room_id,c=this.stateCenter.roomModulesList.find((function(e){return e.roomID==s}));if(!c)return void this.logger.error(a.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(null===(o=e.header)||void 0===o?void 0:o.room_id));c.roomHandler.handlePushKickout(e)}},e.prototype.handlePushCustomMsg=function(e){},e.prototype.handlePushRoomMsg=function(e){},e.prototype.handlePushUserStateUpdateMsg=function(e){var t,i=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,n=this.stateCenter.roomModulesList.find((function(e){return e.roomID==i}));n?n.userHandler.handlePushUserStateUpdateMsg(e):this.logger.error(a.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))},e.prototype.handlePushMergeMsg=function(e){},e.prototype.handlePushTransMsg=function(e){},e.prototype.handleBigImMsgRsp=function(e){},e.prototype.handlePushSignalMsg=function(e){},e.prototype.handlePushTokenExpire=function(e){this.stateCenter.actionListener("_tokenExpired",e)},e.prototype.closeHandler=function(e){this.service.closeHandler(e)},e.prototype.openHandler=function(e){this.service.openHandler(e)},e.prototype.errorHandler=function(e){this.service.errorHandler(e)},e.prototype.getHeader=function(e,t,i,n){return{Protocol:"V1"===o.ROOMVERSION?"req":"req_v2",cmd:e,appid:this.stateCenter.appid,seq:++this.cmdSeq,user_id:this.stateCenter.userid,session_id:t||"",room_id:i||"",room_session_id:n||"",biz_version:this.stateCenter.bizVersion||""}},e.prototype.startCheck=function(){this.service.startCheck()},e.prototype.stopCheck=function(){this.service.stopCheck()},e.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},e.prototype.createSocket=function(e){var t=this;this.service.createSocket(e),this.responseRouters=n(n({},this.responseRouters),{push_kickout:function(e){t.handlePushKickout(e)},push_custommsg:function(e){t.handlePushCustomMsg(e)},push_im_chat:function(e){t.handlePushRoomMsg(e)},push_userlist_update:function(e){t.handlePushUserStateUpdateMsg(e)},push_merge_message:function(e){t.handlePushMergeMsg(e)},push_trans:function(e){t.handlePushTransMsg(e)},push_signal:function(e){t.handlePushSignalMsg(e)},push_token_expire:function(e){t.handlePushTokenExpire(e)}})},e.prototype.closeSocket=function(){this.service.closeSocket()},e.prototype.sendMessage=function(e,t,i,n,r,o){var s,l,u;if(this.service.isDisConnect())return this.logger.error(a.ZEGO_RTM_ACTION.SERVICE_SEND+" socket is disconnect"),n(c.errorCodeList.SOCKET_CLOSE),0;var d=(null==o?void 0:o.roomID)?o.roomID:null===(s=this.stateCenter.roomModulesList[0])||void 0===s?void 0:s.roomID,h=(null==o?void 0:o.roomSessionID)?o.roomSessionID:null===(l=this.stateCenter.roomModulesList[0])||void 0===l?void 0:l.roomSessionID,p=(null==o?void 0:o.sessionID)?o.sessionID:null===(u=this.stateCenter.roomModulesList[0])||void 0===u?void 0:u.sessionID,f=r||this.getHeader(e,p,d,h);return this.logger.info(a.ZEGO_RTM_ACTION.SERVICE_SEND+" sendMsg:"+JSON.stringify({header:f,body:t})),this.service.sendMessage(f,t,i,n)},e.prototype.on=function(e,t){this.responseRouters[e]=t},e.prototype.login=function(e,t,i){var n=this.getHeader(e.isMulti?"enter":"login",e.sessionID,e.roomID,e.roomSessionID),r={id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,role:this.stateCenter.role,token:e.token,version:this.stateCenter.sdKVersion,room_name:e.roomID,user_state_flag:this.stateCenter.userStateUpdate?1:0,room_create_flag:this.stateCenter.roomCreateFlag,client_type:0===this.stateCenter.ENV?o.E_CLIENT_TYPE.ClientType_Webrtc:o.E_CLIENT_TYPE.ClientType_SmallProgram,third_token:e.thirdToken,user_count_limit:this.stateCenter.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",login_logic:this.stateCenter.isMultiRoom?3:1,proto_format:this.stateCenter.protoFormat};return this.sendMessage("",r,t,i,n)},e.prototype.logout=function(e,t,i){var n=e.isMulti?"quit":"logout",r={reserve:0};return"logout"==n&&(r.login_logic=this.stateCenter.isMultiRoom?3:1),this.sendMessage(n,r,t,i,void 0,{sessionID:e.sessionID,roomID:e.roomID,roomSessionID:e.roomSessionID})},e.prototype.heartBeat=function(e,t,i,n,r){return this.sendMessage("hb",{reserve:0},e,t,void 0,{sessionID:i,roomID:n,roomSessionID:r})},e.prototype.fetchUserList=function(e,t,i,n,r,o){return this.sendMessage("user_list",e,t,i,void 0,{sessionID:n,roomID:r,roomSessionID:o})},e.prototype.fetchUserListV2=function(e,t,i,n,r,o){return this.sendMessage("user_list_v2",e,t,i,void 0,{sessionID:n,roomID:r,roomSessionID:o})},e.prototype.fetchReliableMessage=function(e,t,i,n,r,o){return this.sendMessage("trans_fetch",e,t,i,void 0,{sessionID:n,roomID:r,roomSessionID:o})},e.prototype.sendReliableMessage=function(e,t,i,n,r,o){return this.sendMessage("trans",e,t,i,void 0,{sessionID:n,roomID:r,roomSessionID:o})},e.prototype.sendRoomMsg=function(e,t,i,n,r,o){return this.sendMessage("im_chat",e,t,i,void 0,{sessionID:n,roomID:r,roomSessionID:o})},e.prototype.sendCustomCommand=function(e,t,i,n,r,o){return this.sendMessage("custommsg",e,t,i,void 0,{sessionID:n,roomID:r,roomSessionID:o})},e.prototype.sendBigRoomMessage=function(e,t,i,n,r,o){return this.sendMessage("bigim_chat",e,t,i,void 0,{sessionID:n,roomID:r,roomSessionID:o})},e.prototype.sendRelayMessage=function(e,t,i,n,r,o){return this.sendMessage("relay",e,t,i,void 0,{sessionID:n,roomID:r,roomSessionID:o})},e.prototype.sendSignalCmd=function(e,t,i,n,r,o){return this.sendMessage("signal",e,t,i,void 0,{sessionID:n,roomID:r,roomSessionID:o})},e.prototype.sendPB=function(e){return this.service.isDisConnect()||this.stateCenter.networkState==o.ENUM_NETWORK_STATE.offline?(this.logger.error(a.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_PB+" socket is disconnected"),!1):this.service.sendPB(e)},e}();t.LiveRoomService=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSocketService=void 0;var n=i(0),r=i(1),o=function(){function e(e){this.socket=null,this.sendCommandList=new n.LinkedList,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.ENV=e}return e.prototype.createSocket=function(e){this.socket=n.createZegoWebSocket(e,this.ENV%2)},e.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},e.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},e.prototype.sendMessage=function(e,t,i,n,r){void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r={timeOut:6e3});var o={header:e,body:t},s={data:o,seq:e.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:r.timeOut,success:i,error:n},a=this.sendCommandList.push(s);return this.sendCommandMap[s.seq]=a,this.socket&&this.socket.send(JSON.stringify(o)),e.seq},e.prototype.sendPB=function(e){return this.socket&&this.socket.send(e),!0},e.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data&&t._data.error&&setTimeout((function(){t&&t._data&&t._data.error&&t._data.error(r.errorCodeList.TIMEOUT,t._data.data.header.seq,t._data.data.body.custom_msg)}),0),t=e.getFirst()},e.prototype.checkMessageListTimeout=function(e,t){for(var i=e.getFirst(),n=Date.parse(new Date+""),o=0;!(null==i||i._data&&i._data.sendTime+i._data.timeOut>n||(i._data&&delete t[i._data.data.header.seq],e.remove(i),i._data&&null==i._data.error||i._data&&i._data.sendTime+this.sendDataDropTimeout<n||setTimeout((function(){i&&i._data&&i._data.error&&i._data.error(r.errorCodeList.TIMEOUT,i._data.data.header.seq,i._data.data.body.custom_msg)}),0),++o>=this.sendDataCheckOnceCount));)i=e.getFirst()},e.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},e.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},e.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(i){t.socket.binaryType="arraybuffer",t.responseHandler(),e(i)})},e.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){var i="string"==typeof t.data?JSON.parse(t.data):t.data;e.onMessage(i)})},e.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},e.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},e.prototype.onMessage=function(e){},e}();t.ZegoSocketService=o},,,,,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoExpressWebRTM=t.ZegoDataReport=t.ZegoLogger=t.getSeq=t.getReportSeq=t.ZegoExpressWebRTMEngine=void 0;var n=i(20);Object.defineProperty(t,"ZegoExpressWebRTM",{enumerable:!0,get:function(){return n.ZegoExpressWebRTM}});var r=i(33),o=i(0),s=function(){function e(t,i,s){void 0===s&&(s=0),this.logger=new o.ZegoLogger(s),this.dataReport=new o.ZegoDataReport(this.logger),this.cloudSetting=new r.ZegoSetting,this.zegoWebRTM=new n.ZegoExpressWebRTM(t,i,this.logger,this.dataReport,this.cloudSetting,e.version,s)}return e.prototype.enableMultiRoom=function(e){return this.zegoWebRTM.enableMultiRoom(e)},e.prototype.loginRoom=function(e,t,i,n){return this.zegoWebRTM.loginRoom(e,t,i,n)},e.prototype.logoutRoom=function(e){return this.zegoWebRTM.logoutRoom(e)},e.prototype.renewToken=function(e,t){return this.zegoWebRTM.renewToken(e,t)},e.prototype.sendBarrageMessage=function(e,t){return this.zegoWebRTM.sendBarrageMessage(e,t)},e.prototype.sendBroadcastMessage=function(e,t){return this.zegoWebRTM.sendBroadcastMessage(e,t)},e.prototype.sendCustomCommand=function(e,t,i){return this.zegoWebRTM.sendCustomCommand(e,t,i)},e.prototype.setRoomExtraInfo=function(e,t,i){return this.zegoWebRTM.setRoomExtraInfo(e,t,i)},e.prototype.setLogConfig=function(e){return this.zegoWebRTM.setLogConfig(e)},e.prototype.setDebugVerbose=function(e){return this.zegoWebRTM.setDebugVerbose(e)},e.prototype.on=function(e,t){return this.zegoWebRTM.on(e,t)},e.prototype.getVersion=function(){return this.zegoWebRTM.getVersion()},e.prototype.off=function(e,t){return this.zegoWebRTM.off(e,t)},e.prototype.loginHall=function(e,t,i){return this.zegoWebRTM.loginHall(e,t,i)},e.prototype.logoutHall=function(){return this.zegoWebRTM.logoutHall()},e.prototype.enterRoom=function(e,t){return this.zegoWebRTM.enterRoom(e,t)},e.prototype.leaveRoom=function(){return this.zegoWebRTM.leaveRoom()},e.use=function(e){n.ZegoExpressWebRTM.use(e)},e.version=o.PROTO_VERSION,e}();t.ZegoExpressWebRTMEngine=s;var a=i(0);Object.defineProperty(t,"getReportSeq",{enumerable:!0,get:function(){return a.getReportSeq}}),Object.defineProperty(t,"getSeq",{enumerable:!0,get:function(){return a.getSeq}}),Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return a.ZegoLogger}}),Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return a.ZegoDataReport}})},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__spreadArray||function(e,t){for(var i=0,n=t.length,r=e.length;i<n;i++,r++)e[r]=t[i];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoExpressWebRTM=void 0;var s=i(0),a=i(1),c=i(2),l=i(0),u=i(23),d=i(24),h=i(26),p=i(27),f=i(28),g=i(30),m=i(3),_=i(4),v=i(11),E=i(31),A=i(32),y=function(){function e(e,t,i,n,r,o,a){var d=this;this.logger=i,this.dataReport=n,this.cloudSetting=r,this.version=o,this.stateCenter=new p.StateCenter(this.logger,this.dataReport),this.stateCenter.ENV=a,this.getReportSeq=l.getReportSeq,this.getSeq=s.getSeq,this.proxyRes=c.ClientUtil.proxyRes,this.actionSuccessCallback=c.ClientUtil.actionSuccessCallback,this.actionErrorCallback=c.ClientUtil.actionErrorCallback,this.getServerError=c.ClientUtil.getServerError,this.generateRandumNumber=c.ClientUtil.generateRandumNumber,this.unregisterCallback=c.ClientUtil.unregisterCallback,this.logReportCallback=c.ClientUtil.logReportCallback,this.registerCallback=c.ClientUtil.registerCallback;var h=l.getReportSeq();if(this.dataReport.newReport(h),(0==a||1==a)&&this.setDebug(t),c.ClientUtil.checkConfigParam(e,t,this.logger)){if(this.stateCenter.appid=e,this.stateCenter.configOK=!0,this.stateCenter.sdKVersion=this.version,0==a||1==a){this.stateCenter.settingConfig=new A.ZegoSettingConfig,this.cloudSetting.setLog(this.logger),this.cloudSetting.init({product:u.CLOUD_SETTING.product,appID:e,urls:u.CLOUD_SETTING.URL,pollingFreq:u.CLOUD_SETTING.POLLING_FREQ,env:a,pollingNotify:function(e,t){d.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR," setting file changed "+e+" "+JSON.stringify(t)),d.stateCenter.actionListener("_cloudSettingNotify",e,t)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment});var f="";0===a?f="rtc":1===a&&(f="xcx"),this.cloudSetting.setEnvVariable("environment",f);var y=this.cloudSetting.getSettingCache(u.INIT),S=this.cloudSetting.getSettingCache(u.ROOM_BASIC);Promise.all([y,S]).then((function(e){var t=null==e?void 0:e[0];d.stateCenter.settingConfig.setSetting(null==t?void 0:t.setting);var i=d.stateCenter.settingConfig.getSetting("remote_log_level",!0);i&&(d.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR+"  setting remote_log_level "+i),d.logger.setRemoteLogLevel(i));var n=null==e?void 0:e[1];d.stateCenter.settingConfig.setSetting(null==n?void 0:n.setting);var r=l.getReportSeq();d.dataReport.newReport(r,_.ZegoRTMLogEvent.kZegoTaskCloudSettingCache.event),d.dataReport.addMsgInfo(r,{files:[{name:u.INIT,content:null==t?void 0:t.setting,versions:null==t?void 0:t.versions},{name:u.ROOM_BASIC,content:null==n?void 0:n.setting,versions:null==n?void 0:n.versions}]}),d.dataReport.uploadReport(r)})).catch((function(e){d.logger.warn(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR+"  initConfig "+JSON.stringify(e))})),"string"==typeof t?(this.stateCenter.server=t,this.stateCenter.serverBak=t):Array.isArray(t)&&t.length>0&&(this.stateCenter.server=t[0],this.stateCenter.serverBak=t[1]||t[0]),this.service=new v.LiveRoomService(this.stateCenter,this.logger,this)}else 2!=a&&3!=a||(this.service=new E.LiveRoomPrivateService(this.stateCenter,this.logger,this),this.module=new g.LiveRoomModules(this.stateCenter,this.logger,this.dataReport,this.service,this),this.stateCenter.priModules=this.module,this.module._dispatchServer=t,this.stateCenter.type="PRIVATE");if(0==a||2==a)this.bindWindowListener(),this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR+"  "+navigator.appVersion),this.stateCenter.networkState=navigator?navigator.onLine?s.ENUM_NETWORK_STATE.online:s.ENUM_NETWORK_STATE.offline:s.ENUM_NETWORK_STATE.online,this.dataReport.addMsgInfo(h,{system_info:_.ZegoRTMLogEvent.kZegoTaskInitSetting.system_info});else if(1==a||3==a){this.bindWxListener();try{var C=wx.getSystemInfoSync(),b={brand:C.brand,model:C.model,system:C.system,platform:C.platform,version:C.version,SDKVersion:C.SDKVersion};this.dataReport.addMsgInfo(h,{system_info:b})}catch(e){this.logger.warn(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR+" get system info error")}}this.logger.setSessionInfo(this.stateCenter.appid,"","","","",this.version)}else this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR+" init sdk error"),this.dataReport.addMsgInfo(h,_.ZegoRTMLogEvent.kZegoTaskInitSetting.error.kInvalidParamError);this.dataReport.uploadReport(h,_.ZegoRTMLogEvent.kZegoTaskInitSetting.event)}return Object.defineProperty(e.prototype,"modules",{get:function(){return{service:this.service}},enumerable:!1,configurable:!0}),e.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i),i=c.ClientUtil.getBrowser(),n=t?"pagehide":"Firefox"===i?"beforeunload":"unload";window.addEventListener(n,(function(){e.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_BIND_WINDOW_LISTENER+" "+n),"PUBLIC"===e.stateCenter.type?e.logoutRoom():e.leaveRoom(),e.logoutRoom()})),window.addEventListener("offline",(function(){e.netOffLineHandle()})),window.addEventListener("online",(function(){e.netOnLineHandle()}))},e.prototype.bindWxListener=function(){var e=this;wx.onNetworkStatusChange((function(t){t.isConnected?e.netOnLineHandle():e.netOffLineHandle()}))},e.prototype.netOnLineHandle=function(){var e=this;this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_BIND_WINDOW_LISTENER+"network is online"),this.stateCenter.networkState=s.ENUM_NETWORK_STATE.online,this.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.service.isDisConnect()?t.roomTryHandler.active():t.roomTryHandler&&(t.roomTryHandler.stopMaxTime(),t.roomHandler.roomStateHandle("CONNECTED",{code:0,msg:""}))}))},e.prototype.netOffLineHandle=function(){this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_BIND_WINDOW_LISTENER+" network is broken"),this.stateCenter.networkState=s.ENUM_NETWORK_STATE.offline,this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.onactive=function(t,i){e.roomHandler.disconnectedHandle(i)},e.roomTryHandler.startMaxTime(),e.roomHandler.roomStateHandle("CONNECTING",a.errorCodeList.NETWORK_BROKEN))}))},e.prototype.setLogConfig=function(e){this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SET_LOG_CONFIG+" call");var t=l.getReportSeq();if(this.dataReport.newReport(t),e.logLevel&&["debug","info","warn","error","report","disable"].includes(e.logLevel)&&(this.logger.setLogLevel(e.logLevel),this.dataReport.addMsgInfo(t,{log_level:_.ZegoRTMLogEvent.kZegoTaskSetLog.log_level(e.logLevel)})),e.remoteLogLevel&&["debug","info","warn","error","report","disable"].includes(e.remoteLogLevel)&&this.dataReport.addMsgInfo(t,{remote_log_level:_.ZegoRTMLogEvent.kZegoTaskSetLog.remote_log_level(e.remoteLogLevel)}),"string"==typeof e.logURL&&(e.logURL.startsWith("wss://")||e.logURL.startsWith("https://")))this.logger.setLogServer(e.logURL),this.dataReport.addMsgInfo(t,{log_url:_.ZegoRTMLogEvent.kZegoTaskSetLog.log_url(e.logURL)}),this.dataReport.uploadReport(t,_.ZegoRTMLogEvent.kZegoTaskSetLog.event);else if(e.logURL)return this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SET_LOG_CONFIG+"log url must be a wss or https url"),this.dataReport.addMsgInfo(t,_.ZegoRTMLogEvent.kZegoTaskSetLog.error.kInvalidParamError),this.dataReport.uploadReport(t,_.ZegoRTMLogEvent.kZegoTaskSetLog.event),!1;return this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SET_LOG_CONFIG+" call success"),!0},e.prototype.setDebugVerbose=function(e){var t=l.getReportSeq();this.dataReport.newReport(t),"boolean"==typeof e&&(this.stateCenter.debug=e,this.stateCenter.debugCustom=!0,this.dataReport.addMsgInfo(t,{debug:_.ZegoRTMLogEvent.kZegoTaskSetDebug.debug(e?"true":"false")})),this.dataReport.uploadReport(t,_.ZegoRTMLogEvent.kZegoTaskSetDebug.event),this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SET_DEBUG_VERBOSE+" call success")},e.prototype.setDebug=function(e){"string"==typeof e&&e.indexOf("wss")>-1?this.stateCenter.debug=c.ClientUtil.isTestEnv(e):Array.isArray(e)&&e.length>0&&e.every((function(e){return"string"==typeof e&&e.indexOf("wss")>-1}))?this.stateCenter.debug=c.ClientUtil.isTestEnv(e[0])||c.ClientUtil.isTestEnv(e[1]):this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR+" server wrong"),this.stateCenter.testEnvironment=this.stateCenter.debug},e.prototype.renewToken=function(e,t){var i,n=this,r=l.getReportSeq();if(this.dataReport.newReport(r),void 0!==t&&("string"!=typeof t||""==t))return this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" roomID must be string and no empty"),!1;var o=this.getRoomModules(t)||this.stateCenter.roomModulesList[0];return o?"string"==typeof e&&o.roomTryHandler?(e===o.roomTryHandler.token?this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" token has not changed"):(this.stateCenter.configRoomAuth?this.service.sendMessage("renew_token",{token:e},(function(t){var i,r;null===(i=o.roomTryHandler)||void 0===i||i.renewLocalToken(e,null===(r=null==t?void 0:t.body)||void 0===r?void 0:r.token_remain_time),n.stateCenter.configCheckToken=!0,n.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" "+JSON.stringify(t))}),(function(t){var i,r,s=null===(i=null==t?void 0:t.body)||void 0===i?void 0:i.err_code;s&&1000002014===s?(n.stateCenter.configCheckToken=!1,null===(r=o.roomTryHandler)||void 0===r||r.renewLocalToken(e),n.logger.warn(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" "+JSON.stringify(t))):n.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" "+JSON.stringify(t))}),void 0,{sessionID:o.sessionID,roomID:t,roomSessionID:o.roomSessionID}):null===(i=o.roomTryHandler)||void 0===i||i.renewLocalToken(e),this.cloudSetting.setToken(e)),this.dataReport.uploadReport(r,_.ZegoRTMLogEvent.kZegoTaskReNewToken.event),!0):"string"!=typeof e||o.roomTryHandler?(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" token must be string and not empty"),this.dataReport.addMsgInfo(r,{error:_.ZegoRTMLogEvent.kZegoTaskReNewToken.error.INPUT_PARAM.code,message:_.ZegoRTMLogEvent.kZegoTaskReNewToken.error.INPUT_PARAM.msg+" param token error"}),this.dataReport.uploadReport(r,_.ZegoRTMLogEvent.kZegoTaskReNewToken.event),!1):(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" calling must after loginRoom"),this.dataReport.addMsgInfo(r,{error:_.ZegoRTMLogEvent.kZegoTaskReNewToken.error.NOT_LOGIN.code,message:_.ZegoRTMLogEvent.kZegoTaskReNewToken.error.NOT_LOGIN.msg}),this.dataReport.uploadReport(r,_.ZegoRTMLogEvent.kZegoTaskReNewToken.event),!1):(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" calling must after loginRoom"),this.dataReport.addMsgInfo(r,{error:_.ZegoRTMLogEvent.kZegoTaskReNewToken.error.NOT_LOGIN.code,message:_.ZegoRTMLogEvent.kZegoTaskReNewToken.error.NOT_LOGIN.msg}),this.dataReport.uploadReport(r,_.ZegoRTMLogEvent.kZegoTaskReNewToken.event),!1)},e.prototype.setCloudSettingURLs=function(e){var t=this;this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SET_CLOUD_SETTING_URLS+" call "),Array.isArray(e)&&e.length>0&&e.every((function(e){return"string"==typeof e&&e.indexOf("http")>-1}))&&this.cloudSetting.init({product:u.CLOUD_SETTING.product,appID:this.stateCenter.appid,urls:e,pollingFreq:u.CLOUD_SETTING.POLLING_FREQ,env:this.stateCenter.ENV,pollingNotify:function(e,i){t.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SET_CLOUD_SETTING_URLS," setting file changed "+e+" "+JSON.stringify(i)),t.stateCenter.actionListener("_cloudSettingNotify",e,i)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment})},e.prototype.loginRoom=function(e,t,i,a){var c=this;return new Promise((function(l,u){return n(c,void 0,void 0,(function(){var n,c,p,g,v,E,A=this;return r(this,(function(r){switch(r.label){case 0:return 1!==this.stateCenter.ENV?[3,2]:[4,new Promise((function(e){wx.getNetworkType({success:function(t){A.stateCenter.networkState="none"===t.networkType?s.ENUM_NETWORK_STATE.offline:s.ENUM_NETWORK_STATE.online,e()},fail:function(t){A.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR+" network "+JSON.stringify(t)),A.stateCenter.networkState=s.ENUM_NETWORK_STATE.online,e()}})}))];case 1:r.sent(),r.label=2;case 2:return n=this.loginReport(l,u,t,a),c=n.interResolve,p=n.interReject,!(a=a||{}).maxMemberCount&&(a.maxMemberCount=0),(g=h.checkParams({roomID:{order:0,value:e,rules:[{name:h.RULE_PARAM_NAME.NOT_EMPTY,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.ROOM_ID_NULL},{name:h.RULE_PARAM_NAME.TYPE_STRING,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM,extMsg:"roomID must be string"},{name:h.RULE_PARAM_NAME.MAX_LENGTH_128,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.ROOM_ID_TOO_LONG},{name:h.RULE_PARAM_NAME.ILLEGAL_CHARACTERS,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.ROOM_ID_INVALID_CHARACTER}]},token:{order:1,value:t,rules:[{name:h.RULE_PARAM_NAME.NOT_EMPTY,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM},{name:h.RULE_PARAM_NAME.TYPE_STRING,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM}]},user:{order:2,value:i,rules:[{name:h.RULE_PARAM_NAME.NOT_EMPTY,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM,extMsg:" param user error."},{name:h.RULE_PARAM_NAME.TYPE_OBJECT,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM,extMsg:" param user error."}]},"user.userID":{order:3,value:i.userID,rules:[{name:h.RULE_PARAM_NAME.NOT_EMPTY,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.USER_ID_NULL,extMsg:" param user error."},{name:h.RULE_PARAM_NAME.TYPE_STRING,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM,extMsg:" param userID error."},{name:h.RULE_PARAM_NAME.MAX_LENGTH_100,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.USER_ID_TOO_LONG},{name:h.RULE_PARAM_NAME.ILLEGAL_CHARACTERS,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.USER_ID_INVALID_CHARACTER}]},"user.userName":{order:4,value:i.userName,rules:[{name:h.RULE_PARAM_NAME.TYPE_STRING,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM,extMsg:" userName must be string."},{name:h.RULE_PARAM_NAME.MAX_LENGTH_256,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.USER_NAME_TOO_LONG}]},config:{order:5,value:a,rules:[]},"config.maxMemberCount":{order:6,value:a.maxMemberCount,rules:[{name:h.RULE_PARAM_NAME.TYPE_INTEGER,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM,extMsg:" maxMemberCount must be integer number."}]}},{action:m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGIN_ROOM,logger:this.logger}))!==h.RULE_SUCCESS?(p(g.error,g.extMsg),[2]):(this.cloudSetting.setUserID(i.userID),this.cloudSetting.setToken(t),this.cloudSetting.activePolling(),this.stateCenter.onListener("roomLoginResponse",(function(e){A.stateCenter.settingFetched||(A.getCloudSetting(),A.stateCenter.actionListener("_settingCanFetch"),A.stateCenter.settingFetched=!0)})),(v=this.getRoomModules(e))?(p(_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.REPEATEDLY_LOGIN),[2]):(v=new f.LiveRoomModules(e,this.stateCenter,this.logger,this.dataReport,this.service,this),this.stateCenter.roomModulesList.length>0&&1==this.stateCenter.isMultiRoom?v.isMulti=!0:o([],this.stateCenter.roomModulesList).forEach((function(e){return e.roomHandler.logout()})),this.stateCenter.roomModulesList.push(v),v.roomTryHandler||(v.roomTryHandler=new d.RetryRoomHandler(this.logger,this.stateCenter,v)),E=this.stateCenter.settingConfig.getSetting("room_server",!0),Array.isArray(E)&&E.length>0&&(this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGIN_ROOM," setting room_server "+E),this.stateCenter.server=E[0],this.stateCenter.serverBak=E[1]||E[0]),v.roomTryHandler.init(this.stateCenter.roomRetryTime),v.roomTryHandler.initRoom(v.roomHandler,e,t,i,this.stateCenter.server,this.stateCenter.serverBak,a),v.roomTryHandler.setLoginRoomCallback(c,p),v.roomTryHandler.active(!0),this.stateCenter.setMultiRoom=!0,[2]))}}))}))}))},e.prototype.getCloudSetting=function(){var e=this;this.cloudSetting.fetchMultiSetting([u.INIT,u.ROOM_BASIC]).then((function(t){var i;e.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGIN_ROOM," settingConfig "+JSON.stringify(t)),e.stateCenter.settingConfig.setSetting(null===(i=null==t?void 0:t[u.INIT])||void 0===i?void 0:i.setting,["remote_log_level"]);var n=e.stateCenter.settingConfig.getSetting("remote_log_level",!0);n&&(e.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGIN_ROOM+"  setting remote_log_level "+n),e.logger.setRemoteLogLevel(n))})).catch((function(t){e.logger.warn(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGIN_ROOM," settingConfig "+JSON.stringify(t))})),this.stateCenter.onListener("_cloudSettingNotify",(function(t,i){var n=l.getReportSeq();e.dataReport.newReport(n,_.ZegoRTMLogEvent.kZegoTaskCloudSettingRefresh.event);var r=e.cloudSetting.getEnvVariables();if(e.dataReport.addMsgInfo(n,{params:r,files:[{name:t,content:i.setting,versions:i.versions}]}),e.dataReport.uploadReport(n),t===u.INIT){e.stateCenter.settingConfig.setSetting(null==i?void 0:i.setting,["remote_log_level"]);var o=e.stateCenter.settingConfig.getSetting("remote_log_level");o&&(e.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGIN_ROOM," setting remote_log_level "+o),e.logger.setRemoteLogLevel(o))}}))},e.prototype.cloudReportNotify=function(e,t,i){if("request_start"===t){var n=l.getReportSeq();this.dataReport.newReport(n,_.ZegoRTMLogEvent.kZegoTaskCloudSettingRequest.event),this.stateCenter.settingConfig.requestList[e]=n}else if("request_end"===t){var r=this.stateCenter.settingConfig.requestList[e];r&&(this.dataReport.addMsgInfo(r,{request_detail:null==i?void 0:i.reportData,files:null==i?void 0:i.files,error:null==i?void 0:i.code,request_params:null==i?void 0:i.params}),this.dataReport.uploadReport(r))}},e.prototype.loginReport=function(e,t,i,n){var r=this;0!==this.stateCenter.reportSeqList.login&&(this.dataReport.uploadReport(this.stateCenter.reportSeqList.login),this.stateCenter.reportSeqList.login=0,c.ClientUtil.unregisterCallback(_.ZegoRTMLogEvent.kZegoTaskLoginRoom.event,this.stateCenter.reportList));var o=l.getReportSeq();this.stateCenter.reportSeqList.login=o,this.dataReport.newReport(o,_.ZegoRTMLogEvent.kZegoTaskLoginRoom.event);var s=this.cloudSetting.getEnvVariable("deviceid");return this.dataReport.addMsgInfo(o,{deviceid:s}),"string"==typeof i&&this.dataReport.addMsgInfo(o,{token:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.token(i),isMulti:this.stateCenter.isMultiRoom}),n&&(n.userUpdate&&"boolean"==typeof n.userUpdate&&this.dataReport.addMsgInfo(o,{user_update:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.user_update(n.userUpdate+"")}),n.maxMemberCount&&"number"==typeof n.maxMemberCount&&this.dataReport.addMsgInfo(o,{max_member_count:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.max_member_count(n.maxMemberCount+"")})),c.ClientUtil.logReportCallback(_.ZegoRTMLogEvent.kZegoTaskLoginRoom.event,this.dataReport,o,this.stateCenter.reportList),{interResolve:function(t){r.dataReport.uploadReport(o),r.stateCenter.reportSeqList.login=0,c.ClientUtil.unregisterCallback(_.ZegoRTMLogEvent.kZegoTaskLoginRoom.event,r.stateCenter.reportList),e(t)},interReject:function(e,i){var n,s;void 0===i&&(i=""),e.code<2e9&&e.code>1e9||e.code<1e6?(n=c.ClientUtil.decodeServerError(e.code,e.msg),s=c.ClientUtil.getLiveRoomError(e.code)):n={code:e.code,message:e.msg},n&&r.dataReport.addMsgInfo(o,{error:n.code,message:n.message+i}),r.dataReport.uploadReport(o),r.stateCenter.reportSeqList.login=0,c.ClientUtil.unregisterCallback(_.ZegoRTMLogEvent.kZegoTaskLoginRoom.event,r.stateCenter.reportList),s&&a.errorCodeList[s]&&(e.code=a.errorCodeList[s].code),e.code&&e.msg&&""!==i?t({code:e.code,msg:e.msg+i}):t(e)}}},e.prototype.logoutRoom=function(e){var t=l.getReportSeq();if(this.dataReport.newReport(t),this.dataReport.addMsgInfo(t,{roomid:e,isMulti:this.stateCenter.isMultiRoom}),void 0===e)o([],this.stateCenter.roomModulesList).forEach((function(e){return e.roomHandler.logout(!0)})),this.cloudSetting.uninit();else{if("string"!=typeof e||""==e)return this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGOUT_ROOM+" roomID must be string and not empty"),this.dataReport.addMsgInfo(t,{error:_.ZegoRTMLogEvent.kZegoTaskLogoutRoom.error.INPUT_PARAM.code,message:_.ZegoRTMLogEvent.kZegoTaskLogoutRoom.error.INPUT_PARAM.msg+" param roomID error"}),void this.dataReport.uploadReport(t,_.ZegoRTMLogEvent.kZegoTaskLogoutRoom.event);var i=this.getRoomModules(e);i?(i.roomHandler.logout(),0===this.stateCenter.roomModulesList.length&&this.cloudSetting.uninit(),this.dataReport.uploadReport(t,_.ZegoRTMLogEvent.kZegoTaskLogoutRoom.event)):(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGOUT_ROOM+" room not exist"),this.dataReport.addMsgInfo(t,{error:_.ZegoRTMLogEvent.kZegoTaskLogoutRoom.error.ROOM_NOT_EXIST.code,message:_.ZegoRTMLogEvent.kZegoTaskLogoutRoom.error.ROOM_NOT_EXIST.msg}),this.dataReport.uploadReport(t,_.ZegoRTMLogEvent.kZegoTaskLogoutRoom.event))}},e.prototype.loginHall=function(e,t,i){var o=this;return new Promise((function(e,t){return n(o,void 0,void 0,(function(){return r(this,(function(e){return[2]}))}))}))},e.prototype.loginHallReport=function(e,t,i,n){},e.prototype.logoutHall=function(){},e.prototype.enterRoom=function(e,t){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype.leaveRoom=function(){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype.sendCustomCommand=function(e,t,i){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype._sendCustomCommand=function(e,t,i){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype.sendBroadcastMessage=function(e,t){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype._sendBroadcastMessage=function(e,t,i,n){return void 0===i&&(i=1),void 0===n&&(n=1),new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype.setRoomExtraInfo=function(e,t,i){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype._setRoomExtraInfo=function(e,t,i){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype.sendBarrageMessage=function(e,t){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype._sendBarrageMessage=function(e,t,i,n){return void 0===i&&(i=1),void 0===n&&(n=1),new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype.sendRelayMessage=function(e,t,i,n,r){console.error(s.MODULE_TIPS.MESSAGE)},e.prototype.requestJoinLive=function(e,t,i,n,r){return console.error(s.MODULE_TIPS.MESSAGE),!1},e.prototype.inviteJoinLive=function(e,t,i,n,r){return console.error(s.MODULE_TIPS.MESSAGE),!1},e.prototype.endJoinLive=function(e,t,i,n){return console.error(s.MODULE_TIPS.MESSAGE),!1},e.prototype.respondJoinLive=function(e,t,i,n,r){return console.error(s.MODULE_TIPS.MESSAGE),!1},e.prototype.getVersion=function(){return this.version},e.prototype.setSdkBizVersion=function(e){"string"==typeof e&&""!==e&&(this.stateCenter.bizVersion=e)},e.prototype.on=function(e,t){return this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_ON+" listener callBack must be funciton"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),!0):(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_ON+" event "+e+" no found"),!1)},e.prototype.off=function(e,t){if(!this.stateCenter.listenerList[e])return this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_OFF+" listener no found"),!1;var i=this.stateCenter.listenerList[e];return t?i.splice(i.indexOf(t),1):this.stateCenter.listenerList[e]=[],!0},e.prototype._on=function(e,t){return this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_ON+" listener callBack must be funciton"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),!0):(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_ON+" event "+e+" no found"),!1)},e.prototype._off=function(e,t){if(!this.stateCenter.listenerList[e])return this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_OFF+" listener no found"),!1;var i=this.stateCenter.listenerList[e];return t?i.splice(i.indexOf(t),1):this.stateCenter.listenerList[e]=[],!0},e.prototype.isTestEnvironment=function(){return this.stateCenter.testEnvironment},e.prototype.isLogin=function(e){var t=this.getRoomModules(e)||this.stateCenter.roomModulesList[0];return!!t&&t.isLogin()},e.prototype.getMultiRoom=function(){return this.stateCenter.isMultiRoom},e.prototype.getAppID=function(){return this.stateCenter.appid},e.prototype.getUserID=function(){return this.stateCenter.idName},e.prototype.getToken=function(e){return(this.getRoomModules(e)||this.stateCenter.roomModulesList[0]).token},e.prototype.getAnType=function(){return this.module.anType},e.prototype.getRoomSid=function(){return this.module.roomSid},e.prototype.setRoomCreateFlag=function(e){this.stateCenter.roomCreateFlag=e},e.prototype.setRole=function(e){this.stateCenter.role=e},e.prototype.getSessionId=function(e){var t=this.getRoomModules(e)||this.stateCenter.roomModulesList[0];return t?t.sessionID:"0"},e.prototype.getRoomSessionID=function(e){var t=this.getRoomModules(e)||this.stateCenter.roomModulesList[0];return t?t.roomSessionID:"0"},e.prototype.enableMultiRoom=function(e){var t=l.getReportSeq();return this.dataReport.newReport(t,_.ZegoRTMLogEvent.kZegoEnableMultiRoom.event),this.dataReport.addMsgInfo(t,{isMulti:e}),"boolean"!=typeof e?(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_ENABLE_MULTI_ROOM+" param must be boolean"),this.dataReport.uploadReport(t,void 0,_.ZegoRTMLogEvent.kZegoEnableMultiRoom.error.kAlreadyLoginError),!1):this.stateCenter.roomModulesList.length>0||this.stateCenter.setMultiRoom?(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_ENABLE_MULTI_ROOM+" multi room can only be set once before first login"),this.dataReport.uploadReport(t,void 0,_.ZegoRTMLogEvent.kZegoEnableMultiRoom.error.kAlreadyLoginError),!1):(this.dataReport.uploadReport(t),this.stateCenter.isMultiRoom=e,this.stateCenter.setMultiRoom=!0,!0)},e.prototype.getRoomModules=function(e){return this.stateCenter.roomModulesList.find((function(t){return t.roomID==e}))},e.prototype.dispatchBodyData=function(){return{seq:1,timestamp:(new Date).getTime,app_id:this.stateCenter.appid,user_id:this.stateCenter.idName,user_name:this.stateCenter.nickName,net_type:2,device_id:this.module.deviceID,login_token:this.module.hallToken,an_type:this.module.anType}},e.use=function(t){switch(t.type){case"message":t.install(e,f.LiveRoomModules,v.LiveRoomService,g.LiveRoomModules,E.LiveRoomPrivateService);break;case"live":t.install(e,f.LiveRoomModules,v.LiveRoomService);break;case"privates":t.install(e,g.LiveRoomModules,E.LiveRoomPrivateService)}},e.prototype.resetRoomTokenTimer=function(e,t){var i=this.getRoomModules(e)||this.stateCenter.roomModulesList[0];i&&t&&t>0&&i.roomHandler.resetTokenTimer(1e3*t-this.stateCenter.local_time_deviation)},e.prototype.setProtoFormat=function(e){if(void 0===e&&(e="json"),!["json","pb"].includes(e))throw new Error("Failed to execute 'setProtoFormat': Arguments 'format' must be 'json' or 'pb'.");this.stateCenter.protoFormat=e},e.prototype.setSdkLoginRelateService=function(e){Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))&&(this.stateCenter.relateService=e)},e.prototype.sendMessageByService=function(e,t,i,n,r,o){return this.service.sendMessage(e,t,i,n,r,o)},e.prototype.getHeader=function(e){var t=this.stateCenter.roomModulesList[0];if(t&&t.isLogin()){var i=t.roomID,n=t.sessionID,r=t.roomSessionID;return this.service.getHeader(e,n,i,r)}this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_GET_HEADER+" room no found or no login")},e.prototype.sendPB=function(e){return e instanceof Uint8Array?this.service.sendPB(e):(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_PB+" type error"),!1)},e.prototype.onPushBizChannel=function(e){e&&this.service.on("push_biz_channel",e)},e.prototype.getRoomID=function(){return this.stateCenter.roomid},e.prototype.getServerTimeOffset=function(){return this.stateCenter.serverTimeOffset},e}();t.ZegoExpressWebRTM=y},function(e,t,i){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=3)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.E_CLIENT_TYPE=t.ENUM_LOG_LEVEL=t.ENUM_REMOTE_TYPE=t.ZEGO_ENV=t.ZEGO_BROWSER_TYPE=void 0,function(e){e[e.IE=0]="IE",e[e.FIREFOX=1]="FIREFOX",e[e.CHROME=2]="CHROME",e[e.SAFARI=3]="SAFARI",e[e.OPERA=4]="OPERA",e[e.WEIXIN=5]="WEIXIN",e[e.WEIXINMINI=6]="WEIXINMINI",e[e.UNKOWN=7]="UNKOWN"}(t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={})),function(e){e[e.BROWSER=0]="BROWSER",e[e.WEIXINMINI=1]="WEIXINMINI"}(t.ZEGO_ENV||(t.ZEGO_ENV={})),function(e){e[e.DISABLE=0]="DISABLE",e[e.WEBSOCKET=1]="WEBSOCKET",e[e.HTTPS=2]="HTTPS"}(t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={})),t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},function(e){e[e.ClientType_None=0]="ClientType_None",e[e.ClientType_H5=1]="ClientType_H5",e[e.ClientType_SmallPragram=2]="ClientType_SmallPragram",e[e.ClientType_Webrtc=3]="ClientType_Webrtc"}(t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStateCenter=void 0;var n=function(){function e(){this._testEnvironment=!0,this._ENV=0,this._debug=!0}return e.getInstance=function(){return e.instance||(e.instance=new e,e.instance.init()),e.instance},e.prototype.init=function(){},Object.defineProperty(e.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ENV",{get:function(){return this._ENV},set:function(e){this._ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e},enumerable:!1,configurable:!0}),e.instance=new e,e}();t.LoggerStateCenter=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=void 0;var n=i(0),r=function(){function e(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}return e.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},e.prototype.onopen=function(e){},e.prototype.onerror=function(e){},e.prototype.onclose=function(e){},e.prototype.onmessage=function(e){},e.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},e.prototype.close=function(){this._websocket&&this._websocket.close()},e}();t.ZegoWeiXinMiniWebSocket=r,t.createZegoWebSocket=function(e,t){return t%2===n.ZEGO_ENV.BROWSER?new WebSocket(e):new r(e)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStateCenter=t.createZegoWebSocket=t.ZegoDataReport=t.ZegoLogger=void 0;var n=i(1);Object.defineProperty(t,"LoggerStateCenter",{enumerable:!0,get:function(){return n.LoggerStateCenter}});var r=i(2);Object.defineProperty(t,"createZegoWebSocket",{enumerable:!0,get:function(){return r.createZegoWebSocket}});var o=i(4);Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return o.ZegoDataReport}});var s=i(5);Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return s.ZegoLogger}})},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoDataReport=void 0;var r=function(){function e(e){this.dataStatistics={},this.logger=e}return e.prototype.newReport=function(e,t){this.dataStatistics[e]={event_time:Date.now(),time_consumed:0,seq:e,error:0,message:"success",event:t,events:[]}},e.prototype.addMsgExt=function(e,t){this.dataStatistics[e]?this.dataStatistics[e].msg_ext=t:console.warn(e+" not exist")},e.prototype.addMsgInfo=function(e,t){this.dataStatistics[e]?Object.assign(this.dataStatistics[e],t):console.warn(e+" not exist")},e.prototype.eventStart=function(e,t){this.dataStatistics[e]?null!=this.dataStatistics[e].events?this.dataStatistics[e].events.push({event:t,event_time:Date.now(),time_consumed:0}):this.logger.warn("zd.es.0 no events"):this.logger.warn("zd.es.0 no seq match")},e.prototype.eventEnd=function(e,t,i){if(this.dataStatistics[e]){var n=this.dataStatistics[e].events;if(n&&0!==n.length){for(var r=n.length-1;r>=0;r--)if(n[r].event==t&&0==n[r].time_consumed){n[r].time_consumed=Date.now()-n[r].event_time;break}}else this.logger.info("zd.ee.0 no events")}else this.logger.info("zd.ee.0 no seq match")},e.prototype.eventEndWithMsg=function(e,t,i){if(this.dataStatistics[e]){var r=this.dataStatistics[e].events;if(r){for(var o=r.length-1;o>=0;o--)if(r[o].event==t&&0==r[o].time_consumed){r[o].time_consumed=Date.now()-r[o].event_time,null==r[o].msg_ext&&(r[o].msg_ext={}),r[o].msg_ext=n({},i);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},e.prototype.eventEndWithMsgInfo=function(e,t,i){if(this.dataStatistics[e]){var n=this.dataStatistics[e].events;if(n){for(var r=n.length-1;r>=0;r--)if(n[r].event==t&&0==n[r].time_consumed){n[r].time_consumed=Date.now()-n[r].event_time,Object.assign(n[r],i);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},e.prototype.addEventInfo=function(e,t,i,n){if(this.dataStatistics[e]){var r=this.dataStatistics[e].events;if(null!=r){for(var o=r.length-1;o>=0;o--)if(r[o].event==t&&null!=r[o].time_consumed){null==r[o].msg_ext?r[o].msg_ext={}:r[o].msg_ext&&(r[o].msg_ext[i]=n);break}}else this.logger.warn("zd.aei.0 no events")}else this.logger.warn("zd.aei.0 no seq match")},e.prototype.addEventMsg=function(e,t,i,n){if(this.dataStatistics[e]){var r=this.dataStatistics[e].events;if(null!=r){for(var o=r.length-1;o>=0;o--)if(r[o].event==t){r[o][i]=n;break}}else this.logger.warn("zd.aem.0 no events")}else this.logger.warn("zd.aem.0 no seq match")},e.prototype.addEvent=function(e,t,i){this.dataStatistics[e]?this.dataStatistics[e].events&&(i?this.dataStatistics[e].events.push({event:t,event_time:Date.now(),msg_ext:i}):this.dataStatistics[e].events.push({event:t,event_time:Date.now()})):this.logger.warn("zd.ae.0 no seq match")},e.prototype.uploadReport=function(e,t,i,n){var r=this.dataStatistics[e];null!=r&&(t&&(r.event=t),r.time_consumed=Date.now()-r.event_time,i&&this.addMsgInfo(e,{error:i.code,message:i.message||i.msg+" "+(n||"")}),this.logger.report(r),delete this.dataStatistics[e])},e}();t.ZegoDataReport=r},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLogger=void 0;var r=i(0),o=i(2),s=i(1),a=i(6),c=function(){function e(e){this.logLevel=r.ENUM_LOG_LEVEL.INFO,this.logRemoteLevel=0,this.websocket=null,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCache=[],this.logCacheSend=[],this.logCacheMax=100,this.existUserID=!1,this.stateCenter=s.LoggerStateCenter.getInstance(),this.env=e}return e.prototype.setLogLevel=function(e){var t=r.ENUM_LOG_LEVEL[e];return void 0!==t&&(this.logLevel=t,!0)},e.prototype.setRemoteLogLevel=function(e){var t=r.ENUM_LOG_LEVEL[e];return void 0!==t&&(this.logRemoteLevel=t,!0)},e.prototype.setSessionInfo=function(e,t,i,n,r,o){this.appid=e,this.roomid=t,this.sessionid=i,this.userid=n,this.userName=r,this.version=o},e.prototype.report=function(e){var t=this.logReportParamList(r.ENUM_LOG_LEVEL.REPORT,e);this.logLevel!==r.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=r.ENUM_LOG_LEVEL.REPORT&&console.debug(t),this.RemoteLog(r.ENUM_LOG_LEVEL.REPORT,t,!0)},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this.logParamList(r.ENUM_LOG_LEVEL.DEBUG,e.join(""));this.logLevel!==r.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=r.ENUM_LOG_LEVEL.DEBUG&&console.debug(i),this.log(r.ENUM_LOG_LEVEL.DEBUG,i)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this.logParamList(r.ENUM_LOG_LEVEL.INFO,e.join(""));this.logLevel!==r.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=r.ENUM_LOG_LEVEL.INFO&&console.info(i),this.log(r.ENUM_LOG_LEVEL.INFO,i)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this.logParamList(r.ENUM_LOG_LEVEL.WARN,e.join(""));this.logLevel!==r.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=r.ENUM_LOG_LEVEL.WARN&&console.warn(i),this.log(r.ENUM_LOG_LEVEL.WARN,i)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this.logParamList(r.ENUM_LOG_LEVEL.ERROR,e.join(""));this.logLevel!==r.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=r.ENUM_LOG_LEVEL.ERROR&&(console.error(i),window?this.stateCenter.debug&&window.alert(e.join("").substr(e.join("").indexOf(" ")+1,4500)):wx&&this.stateCenter.debug&&wx.showModal({title:"",content:e.join("").substr(e.join("").indexOf(" ")+1,4500)})),this.log(r.ENUM_LOG_LEVEL.ERROR,i)},e.prototype.log=function(e,t){this.logRemoteLevel!==r.ENUM_LOG_LEVEL.DISABLE&&this.logRemoteLevel<=e&&this.RemoteLog(e,t)},e.prototype.setLogServer=function(e){try{return e.startsWith("wss:")?(this.logType=r.ENUM_REMOTE_TYPE.WEBSOCKET,this.openWebSocketLogServer(e)):e.startsWith("https:")?(this.logType=r.ENUM_REMOTE_TYPE.HTTPS,this.openHttpsLogServer(e)):this.logType=r.ENUM_REMOTE_TYPE.DISABLE,!0}catch(e){return this.error(JSON.stringify(e)),!1}},e.prototype.stopLogServer=function(){this.logType==r.ENUM_REMOTE_TYPE.WEBSOCKET?this.stopWebSocketServer():this.logType==r.ENUM_REMOTE_TYPE.HTTPS&&(this.SendHttpsLog(),this.stopHttpsServer()),this.logType=r.ENUM_REMOTE_TYPE.DISABLE},e.prototype.stopWebSocketServer=function(){this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null)},e.prototype.openHttpsLogServer=function(e){var t=this;this.url=e,e&&(this.stopHttpsServer(),this.logUploadTimer||(this.logUploadTimer=setInterval((function(){t.SendHttpsLog()}),this.logUploadInterval)))},e.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},e.prototype.RemoteLog=function(e,t,i){if(void 0===i&&(i=!1),""!=this.url)if(this.logType==r.ENUM_REMOTE_TYPE.WEBSOCKET)this.RemoteWebSocketLog(e,t);else if(this.logType==r.ENUM_REMOTE_TYPE.HTTPS)this.RemoteHttpsLog(e,t,i);else if(this.logLevel!==r.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=e)for(this.logCacheSend.push(t);this.logCacheSend.length>this.logCacheMax;)this.logCacheSend.shift()},e.prototype.RemoteWebSocketLog=function(e,t){if("string"==typeof t&&t.length>4e3)console.info("log over maximum, ignore");else if(null==this.websocket||2==this.websocket.readyState||3==this.websocket.readyState){var i=this.url;this.url="",this.setLogServer(i),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)}else if(0==this.websocket.readyState)this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t);else if(1==this.websocket.readyState)if(this.logCacheSend.length>0){for(var r="",o=0;o<this.logCacheSend.length;o++){(r+this.logCacheSend[o]).length>4e3&&(this.websocket.send(r),r="");var s=JSON.parse(this.logCacheSend[o]);s=n(n({},s),{userid:s.userid||this.userid,roomid:s.roomid||this.roomid,userName:s.roomid||this.userName}),r=r+JSON.stringify(s)+"\n"}t=r+t,this.logCacheSend=[],this.websocket.send(t)}else this.websocket.send(t);else console.warn("wrong socket state:"+this.websocket.readyState),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)},e.prototype.RemoteHttpsLog=function(e,t,i){this.logCacheSend.push(t),(this.logCacheSend.length>=this.logCacheMax||!0===i)&&this.SendHttpsLog()},e.prototype.logParamList=function(e,t){var i=a.getCurrentTime(),n=[t.substr(0,t.indexOf(" "))||t,t.substr(t.indexOf(" ")+1,4500)||t],r={time:i,level:e,action:n[0],content:n[1],appid:this.appid,roomid:this.roomid,userid:this.userid,userName:this.userName,sessionid:this.sessionid};return JSON.stringify(r)},e.prototype.logReportParamList=function(e,t){var i=a.getCurrentTime();return t=n(n({},t),{time:i,level:e,console:this.env%2===r.ZEGO_ENV.BROWSER?"rtc":"xcx",appid:this.appid,room_id:this.roomid,roomid:this.roomid,userid:this.userid,id_name:this.userid,userName:this.userName,sessionid:this.sessionid,sdk_version:this.version,test_environment:this.stateCenter.testEnvironment,version:this.version,event_id:this.appid+"_"+this.userid+"_"+t.event_time+"_"+t.seq}),JSON.stringify(t)},e.prototype.openWebSocketLogServer=function(e){if(this.url!=e){if(this.url=e,!e)return;this.stopWebSocketServer(),this.websocket=o.createZegoWebSocket(e,this.env),this.websocket.onopen=function(){},this.websocket.onclose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn("onclose   websocket error:",e)},this.websocket.onmessage=function(){},this.websocket.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn("open log websocket error:",e)}}},e.prototype.SendHttpsLog=function(){0!=this.logCacheSend.length&&(this.env%2===r.ZEGO_ENV.BROWSER?this.SendHttpsLogWeb():this.SendHttpsLogWeChatMini())},e.prototype.SendHttpsLogWeb=function(){var e=this,t=this.logCacheSend.join("\n"),i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){if(0==i.responseText.length)return;try{var t=JSON.parse(i.responseText).interval;"number"==typeof t&&e.logUploadInterval!==t&&(e.timeInterval=t,e.openHttpsLogServer(e.url))}catch(e){console.log("send result failed "+e)}}else console.log("send failed "+i.status)},i.open("POST",this.url,!0),0==this.env?i.send(t):2==this.env&&(i.setRequestHeader("content-type","application/json"),i.send(JSON.stringify({user_id:this.userid,log:t}))),this.logCacheSend=[]},e.prototype.SendHttpsLogWeChatMini=function(){var e=this;!this.existUserID&&this.userid&&this.logCacheSend.forEach((function(t){Array.isArray(t)&&t.forEach((function(i,n){var r=JSON.parse(i);r&&""==JSON.parse(i).userid?(r.userid=e.userid,r.id_name=e.userid,t[n]=JSON.stringify(r)):e.existUserID=!0}))}));var t=this.logCacheSend.join("\n"),i=1==this.env?t:JSON.stringify({user_id:this.userid,log:t});wx.request({url:this.url,data:i,method:"POST",success:function(t){if(0!=t.data.length){var i=t&&t.data&&t.data.interval;"number"==typeof i&&e.logUploadInterval!==i&&(e.timeInterval=i,e.openHttpsLogServer(e.url))}},fail:function(e){console.log("send failed "+e.statusCode)}}),this.logCacheSend=[]},e}();t.ZegoLogger=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTime=t.getCurrentEnv=t.getBrowser=void 0;var n=i(0);t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),i=-1!=e.indexOf("Firefox"),r=null!=window.opr,o=e.indexOf("Chrome")&&window.chrome,s=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version"),a=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0];return t?n.ZEGO_BROWSER_TYPE.IE:i?n.ZEGO_BROWSER_TYPE.FIREFOX:r?n.ZEGO_BROWSER_TYPE.OPERA:o?n.ZEGO_BROWSER_TYPE.CHROME:s?n.ZEGO_BROWSER_TYPE.SAFARI:a?n.ZEGO_BROWSER_TYPE.WEIXIN:n.ZEGO_BROWSER_TYPE.UNKOWN},t.getCurrentEnv=function(){var e=window.navigator.userAgent;return new Promise((function(t){-1==e.indexOf("MicroMessage")?t(n.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv((function(e){e.miniprogram}))}))};var r=["00","01","02","03","04","05","06","07","08","09"];t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(r[e.getMonth()+1]||e.getMonth()+1)+"/",(r[e.getDate()]||e.getDate())+" ",(r[e.getHours()]||e.getHours())+":",(r[e.getMinutes()]||e.getMinutes())+":",r[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")}}])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;var n=function(){function e(){}return e.base64encode=function(t){var i,n,r,o,s,a;for(r=t.length,n=0,i="";n<r;){if(o=255&t.charCodeAt(n++),n==r){i+=e.base64EncodeChars.charAt(o>>2),i+=e.base64EncodeChars.charAt((3&o)<<4),i+="==";break}if(s=t.charCodeAt(n++),n==r){i+=e.base64EncodeChars.charAt(o>>2),i+=e.base64EncodeChars.charAt((3&o)<<4|(240&s)>>4),i+=e.base64EncodeChars.charAt((15&s)<<2),i+="=";break}a=t.charCodeAt(n++),i+=e.base64EncodeChars.charAt(o>>2),i+=e.base64EncodeChars.charAt((3&o)<<4|(240&s)>>4),i+=e.base64EncodeChars.charAt((15&s)<<2|(192&a)>>6),i+=e.base64EncodeChars.charAt(63&a)}return i},e.base64decode=function(t){var i,n,r,o,s,a,c;for(a=t.length,s=0,c="";s<a;){do{i=e.base64DecodeChars[255&t.charCodeAt(s++)]}while(s<a&&-1==i);if(-1==i)break;do{n=e.base64DecodeChars[255&t.charCodeAt(s++)]}while(s<a&&-1==n);if(-1==n)break;c+=String.fromCharCode(i<<2|(48&n)>>4);do{if(61==(r=255&t.charCodeAt(s++)))return c;r=e.base64DecodeChars[r]}while(s<a&&-1==r);if(-1==r)break;c+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(61==(o=255&t.charCodeAt(s++)))return c;o=e.base64DecodeChars[o]}while(s<a&&-1==o);if(-1==o)break;c+=String.fromCharCode((3&r)<<6|o)}return c},e.utf16to8=function(e){var t,i,n,r;for(t="",n=e.length,i=0;i<n;i++)(r=e.charCodeAt(i))>=1&&r<=127?t+=e.charAt(i):r>2047?(t+=String.fromCharCode(224|r>>12&15),t+=String.fromCharCode(128|r>>6&63),t+=String.fromCharCode(128|r>>0&63)):(t+=String.fromCharCode(192|r>>6&31),t+=String.fromCharCode(128|r>>0&63));return t},e.utf8to16=function(e){var t,i,n,r,o,s;for(t="",n=e.length,i=0;i<n;)switch((r=e.charCodeAt(i++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(i-1);break;case 12:case 13:o=e.charCodeAt(i++),t+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e.charCodeAt(i++),s=e.charCodeAt(i++),t+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&s)<<0)}return t},e.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e.base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],e}();t.Base64=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROOM_BASIC=t.INIT=t.CLOUD_SETTING=void 0,t.CLOUD_SETTING={product:"Web_SDK",URL:["https://cloud-setting-api.zego.im/cloud-setting/get","https://cloud-setting-api.zegocloud.com/cloud-setting/get"],POLLING_FREQ:300,ONLINE:!1},t.INIT="init",t.ROOM_BASIC="room"},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.RetryRoomHandler=void 0;var o=i(25),s=i(0),a=i(3),c=i(1),l=i(2),u=function(e){function t(t,i,n){var r=e.call(this,t,i)||this;return r.logger=t,r.stateCenter=i,r.room=n,r.loginRoomCallback={},r}return r(t,e),t.prototype.renewLocalToken=function(e,t){this.token=e,this.room.token=this.token;var i=(new Date).getTime(),n=void 0;t&&"number"==typeof t?n=1e3*t:["03","04"].includes(e.substring(0,2))&&(n=1e3*l.ClientUtil.decodeTokenExpire(e.substring(2))-i),n&&this.roomHandler.resetTokenTimer(n-this.stateCenter.local_time_deviation),this.stateCenter.actionListener("_tokenRenewed",e,this.room.roomID)},t.prototype.initRoom=function(e,t,i,n,r,o,s){this.roomHandler=e,this.roomID=t,this.renewLocalToken(i),this.user=n,this.server=r,this.serverBak=o||r,this.config=s},t.prototype.active=function(e){var t=this;if(this.logger.info(a.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" retry call"),this.roomHandler.setRunState(s.ENUM_RUN_STATE.trylogin),this.room.isMulti&&this.room.service.isDisConnect())this.logger.info(a.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" service is disconnected, multi room stop retry");else if(this.stateCenter.networkState!=s.ENUM_NETWORK_STATE.offline)if(this.retryTimer)this.logger.info(a.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" has actived, ignore");else if(this.isOverTime)this.logger.info(a.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" retry over time, stop retry");else{if(1==this.retryActiveCount)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var i=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1));this.retryActiveInterval=i>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:i}this.retryTimer=setTimeout((function(){t.roomHandler.login(t.retryActiveCount%2==1?t.server:t.serverBak,t.roomID,t.token,t.user,t.config,(function(e){t.handleLoginFinish(e)}),(function(e,i){t.handleLoginFinish(!1,e,i)})),t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null,t.retryActiveCount++}),e?0:1e3*this.retryActiveInterval)}else this.logger.info(a.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" network is broken, stop retry")},t.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.maxTimer=setTimeout((function(){e.logger.info(a.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" over max time "+e.RETRY_MAX_TIME+"s, stop retry"),e.isOverTime=!0,e.roomHandler.resetRoom(),e.stopMaxTime(),e.invalid(),e.onactive(!1,c.errorCodeList.LOGIN_TIMEOUT),e.loginRoomCallback.fail&&(e.loginRoomCallback.fail(c.errorCodeList.LOGIN_TIMEOUT),e.loginRoomCallback.fail=void 0)}),1e3*this.RETRY_MAX_TIME))},t.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},t.prototype.onactive=function(e,t){},t.prototype.handleError=function(e,t){if(this.RETRY_MAX_TIME<3)return!1;if(t){var i=e.code+"";return!["1000002002","1000005030","1000005035","1010","1011","1013","1014","1015","1016","1017","1018","1019","1020","1021","1023"].includes(i)&&(!!["1100040001","1100040100"].includes(i)||this.room.lastRunState==s.ENUM_RUN_STATE.login&&(this.room.sessionID="",this.invalid(),!0))}return!0},t.prototype.setLoginRoomCallback=function(e,t){this.loginRoomCallback.success=e,this.loginRoomCallback.fail=t},t.prototype.handleLoginFinish=function(e,t,i){t?this.handleError(t,i)?(!this.maxTimer&&this.startMaxTime(),this.active()):(this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(e,t),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(t),this.loginRoomCallback.fail=void 0)):(this.stopMaxTime(),this.invalid(),this.onactive(e,{code:0,msg:""}),this.loginRoomCallback.success&&(this.loginRoomCallback.success(e),this.loginRoomCallback.fail=void 0))},t}(o.TryHandler);t.RetryRoomHandler=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TryHandler=void 0;var n=function(){function e(e,t){this.logger=e,this.stateCenter=t,this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1}return e.prototype.init=function(e,t,i,n){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof i&&(this.RETRY_CONTINUE_COUNT=i),"number"==typeof n&&(this.RETRY_MAX_TIME_INTERVAL=n)},e.prototype.invalid=function(){this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryStartTime=0,this.retryActiveCount=1},e}();t.TryHandler=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkParams=t.RULE_SUCCESS=t.RULE_PARAM_NAME=void 0;var n,r=i(2);!function(e){e.NOT_EMPTY="NOT_EMPTY",e.ILLEGAL_CHARACTERS="ILLEGAL_CHARACTERS",e.TYPE_STRING="TYPE_STRING",e.TYPE_INTEGER="TYPE_INTEGER",e.TYPE_OBJECT="TYPE_OBJECT",e.MAX_LENGTH_10="MAX_LENGTH_10",e.MAX_LENGTH_64="MAX_LENGTH_64",e.MAX_LENGTH_100="MAX_LENGTH_100",e.MAX_LENGTH_128="MAX_LENGTH_128",e.MAX_LENGTH_256="MAX_LENGTH_256",e.MAX_LENGTH_1024="MAX_LENGTH_1024"}(n=t.RULE_PARAM_NAME||(t.RULE_PARAM_NAME={})),t.RULE_SUCCESS={error:{code:0,msg:"suc"}};var o={NOT_EMPTY:function(e,i,n,r,o){return void 0===i||""===i||null===i?(r.error(n+" "+e+" is empty"),o):t.RULE_SUCCESS},ILLEGAL_CHARACTERS:function(e,i,n,o,s){return r.ClientUtil.checkIllegalCharacters(i)?t.RULE_SUCCESS:(o.error(n+" "+e+" contains illegal characters"),s)},TYPE_STRING:function(e,i,n,r,o){return"string"!=typeof i?(r.error(n+" "+e+" must be string"),o):t.RULE_SUCCESS},TYPE_INTEGER:function(e,i,n,o,s){return r.ClientUtil.checkInteger(i,!1)?t.RULE_SUCCESS:(o.error(n+" "+e+"  must be integer number"),s)},TYPE_OBJECT:function(e,i,n,r,o){return i&&"object"==typeof i?t.RULE_SUCCESS:(r.error(n+" "+e+"  must be object"),o)},MAX_LENGTH_10:function(e,i,n,r,o){return i.length>10?(r.error(n+" "+e+" is too long"),o):t.RULE_SUCCESS},MAX_LENGTH_64:function(e,i,n,r,o){return i.length>64?(r.error(n+" "+e+" is too long"),o):t.RULE_SUCCESS},MAX_LENGTH_100:function(e,i,n,r,o){return i.length>100?(r.error(n+" "+e+" is too long"),o):t.RULE_SUCCESS},MAX_LENGTH_128:function(e,i,n,r,o){return i.length>128?(r.error(n+" "+e+" is too long"),o):t.RULE_SUCCESS},MAX_LENGTH_256:function(e,i,n,r,o){return i.length>256?(r.error(n+" "+e+" is too long"),o):t.RULE_SUCCESS},MAX_LENGTH_1024:function(e,i,n,r,o){return i.length>1024?(r.error(n+" "+e+" is too long"),o):t.RULE_SUCCESS}};t.checkParams=function(e,i){var r=[],s={};for(var a in e)s[e[a].order]=e[a],e[a].key=a;for(var c in s)r.push(s[c]);for(var l=0;l<r.length;l++)for(var u=r[l].rules,d=0;d<u.length;d++){var h={key:r[l].key,value:r[l].value,action:i.action,logger:i.logger},p=h.key,f=h.value,g=h.action,m=h.logger,_=u[d].name?""+u[d].name:"";if((void 0===f&&_===n.NOT_EMPTY||void 0!==f)&&o[_]){var v=o[_](p,f,g,m,u[d]);if(v!=t.RULE_SUCCESS)return v}}return t.RULE_SUCCESS}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0;var n=i(0),r=i(3),o=i(4),s=function(){function e(e,t){this.logger=e,this.dataReport=t,this._debug=!1,this._testEnvironment=!1,this._env=0,this.type="PUBLIC",this.debugCustom=!1,this.configOK=!1,this.role=2,this.relateService=[],this.maxMemberCount=0,this.roomCreateFlag=1,this.local_time_deviation=0,this.callbackList={},this.listenerList={roomUserUpdate:[],roomOnlineUserCountUpdate:[],getAnchorInfo:[],_getAnchorInfo:[],IMRecvCustomCommand:[],IMRecvBroadcastMessage:[],recvReliableMessage:[],roomExtraInfoUpdate:[],IMRecvBarrageMessage:[],recvJoinLiveRequest:[],recvInviteJoinLiveRequest:[],recvEndJoinLiveCommand:[],roomLoginResponse:[],HBResponse:[],roomStateUpdate:[],_roomStateUpdate:[],_getTotalUserList:[],_userStateUpdate:[],_recvBigRoomMessage:[],_recvRoomMsg:[],_kickout:[],tokenWillExpire:[],_tokenExpired:[],hallStateUpdate:[],_hallStateUpdate:[],roomTokenWillExpire:[],_tokenRenewed:[],_protobufResponse:[],_cloudSettingNotify:[],_settingCanFetch:[]},this.reportList={},this.reportSeqList={login:0,relogin:0},this.networkState=n.ENUM_NETWORK_STATE.offline,this.roomRetryTime=300,this.roomModulesList=[],this.isMultiRoom=!1,this.setMultiRoom=!1,this.protoFormat="json",this.settingFetched=!1,this.configRoomAuth=!1,this.configCheckToken=!1,this._sdkVersion="unknown"}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,n.LoggerStateCenter.getInstance().debug=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e,n.LoggerStateCenter.getInstance().testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ENV",{get:function(){return this._env},set:function(e){this._env=e,n.LoggerStateCenter.getInstance().ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomid",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].roomID:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverTimeOffset",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].messageHandler.serverTimeOffset:0},enumerable:!1,configurable:!0}),e.prototype.getRequestId=function(){return this.idName+"-"+n.getSeq()},e.prototype.actionListener=function(e){for(var t=this,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];if(this.listenerList[e]){var a=n.getReportSeq();this.dataReport.newReport(a,o.ZegoRTMLogEvent.kZegoListener.event),this.dataReport.addMsgInfo(a,{listener:e,params:i}),this.dataReport.uploadReport(a)}this.listenerList[e]&&this.listenerList[e].forEach((function(n){try{n.apply(void 0,i)}catch(i){t.logger.error(r.ZEGO_RTM_ACTION.STATE_ACTION+" ",e," ",JSON.stringify(i))}}))},e.prototype.onListener=function(e,t){return this.listenerList[e]?"function"!=typeof t?(this.logger.error(r.ZEGO_RTM_ACTION.ON_LISTENER+" listener callBack must be funciton"),!1):(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0):(this.logger.error(r.ZEGO_RTM_ACTION.ON_LISTENER+" event "+e+" no found"),!1)},Object.defineProperty(e.prototype,"sdKVersion",{get:function(){return this._sdkVersion},set:function(e){this._sdkVersion=e},enumerable:!1,configurable:!0}),e}();t.StateCenter=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveRoomModules=void 0;var n=i(0),r=i(9),o=i(29),s=i(10),a=i(2),c=i(1),l=function(){function e(e,t,i,a,c,l){this.roomID=e,this.stateCenter=t,this.logger=i,this.dataReport=a,this.service=c,this.rtm=l,this.runState=n.ENUM_RUN_STATE.logout,this.lastRunState=n.ENUM_RUN_STATE.logout,this.lastRoomState="DISCONNECTED",this.roomState="DISCONNECTED",this.roomSessionID="0",this.sessionID="0",this.isMulti=!1,this.token="",this.thirdToken="",this.roomHandler=new o.RoomHandler(this.logger,this.stateCenter,this.dataReport,this.service,this),this.heartBeatHandler=new r.HeartBeatHandler(this.logger,this.stateCenter,this.dataReport,this.service,this),this.userHandler=new s.UserHandler(this.logger,this.stateCenter,this.dataReport,this.service,this),this.initMessageHandler(),this.initLiveHandler(),this.init()}return e.prototype.initMessageHandler=function(){},e.prototype.initLiveHandler=function(){},e.prototype.init=function(){this.bindHeatBeatHandler(),this.bindRoomHandler(),this.bindMessageHandler(),this.bindLiveHandler()},e.prototype.bindHeatBeatHandler=function(){var e=this;this.heartBeatHandler.hbLogout=function(t){e.roomHandler.handleHbLogout(t)},this.heartBeatHandler.heartbeatRspNotiFy=function(t){e.messageHandler&&e.messageHandler.loginRsp(t),e.userHandler.patchUserList(t),e.HBResponse(t)}},e.prototype.bindRoomHandler=function(){var e=this;this.roomHandler.loginSuccessCallBack=function(t,i){e.heartBeatHandler.init(i),e.service.startCheck(),e.userHandler.loginRsp(i,t),e.messageHandler&&e.messageHandler.loginRsp(i),e.isMulti||e.handleMultiRoom(),e.roomLoginResponse(i)},this.roomHandler.resetRoomCallBack=function(){e.heartBeatHandler.resetHeartbeat(),e.liveHandler&&e.liveHandler.resetLiveHandler(),e.messageHandler&&e.messageHandler.resetMessageInfo(),e.userHandler.resetUserHandler(),e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.stopMaxTime(),e.roomTryHandler=void 0)}},e.prototype.bindUserHandler=function(){},e.prototype.bindMessageHandler=function(){},e.prototype.bindLiveHandler=function(){},e.prototype.HBResponse=function(e){this.stateCenter.actionListener("HBResponse",e)},e.prototype.roomLoginResponse=function(e){this.stateCenter.actionListener("roomLoginResponse",e)},e.prototype.handleMultiRoom=function(){this.stateCenter.roomModulesList.forEach((function(e){e.runState!==n.ENUM_RUN_STATE.login&&e.roomTryHandler&&1==e.isMulti&&(e.roomTryHandler.onactive=function(t,i){if(i&&0!==i.code){if(0!==i.code){var n=a.ClientUtil.getLiveRoomError(i.code);n&&c.errorCodeList[n]&&(i=c.errorCodeList[n])}e.roomHandler.roomStateHandle("DISCONNECTED",i,i.msg)}else e.roomHandler.roomStateHandle("CONNECTED",i)},e.roomTryHandler.startMaxTime(),e.roomTryHandler.active())}))},e.prototype.isLogin=function(){return this.runState===n.ENUM_RUN_STATE.login},e}();t.LiveRoomModules=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RoomHandler=void 0;var n=i(0),r=i(2),o=i(3),s=i(1),a=i(4),c=function(){function e(e,t,i,n,r){this.logger=e,this.stateCenter=t,this.dataReport=i,this.service=n,this.room=r,this.tryLoginTimer=null,this.tryLoginCount=0,this.tryLoginInterval=1e4,this.tokenTimer=null,this.beforeExpire=30,this.loginCallback={}}return e.prototype.resetTokenTimer=function(e){var t=this;e=(e=(e-=3e4)<0?0:e)>2147483648?2147483648:e,this.logger.info(o.ZEGO_RTM_ACTION.ROOM_RESETTOKEN_TIMER+"  call: "+e),this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=setTimeout((function(){t.stateCenter.actionListener("tokenWillExpire",t.room.roomID),t.stateCenter.actionListener("roomTokenWillExpire",t.room.roomID)}),e)},e.prototype.stopTokenTimer=function(){this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=null},e.prototype.setRunState=function(e){this.room.runState!==e&&(this.room.lastRunState=this.room.runState,this.room.runState=e)},e.prototype.resetTryLogin=function(){this.tryLoginTimer&&clearTimeout(this.tryLoginTimer),this.tryLoginTimer=null},e.prototype.resetRoom=function(e){var t=this;if(this.logger.info(o.ZEGO_RTM_ACTION.ROOM_RESET_ROOM+" call"),this.stateCenter.roomModulesList.length>1&&!e&&(this.room.isMulti=!0),this.resetTryLogin(),"0"!==this.room.sessionID&&this.room.runState!==n.ENUM_RUN_STATE.logout&&!this.service.isDisConnect()){var i=function(e){t.handleLogoutRsp(e)};this.service.logout(this.room,i,i)}this.setRunState(n.ENUM_RUN_STATE.logout),this.room.sessionID="",this.room.roomSessionID="",this.room.isMulti||(this.stateCenter.userid="",this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.sessionID,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),this.service.closeSocket()),this.resetRoomCallBack(),this.stateCenter.roomModulesList=this.stateCenter.roomModulesList.filter((function(e){return e!==t.room}));var r=this.stateCenter.roomModulesList[0];r&&(r.isMulti=!1,r.runState!==n.ENUM_RUN_STATE.login&&r.roomTryHandler&&(r.roomTryHandler.startMaxTime(),r.roomTryHandler.active())),this.logger.info(o.ZEGO_RTM_ACTION.ROOM_RESET_ROOM+" call success")},e.prototype.resetRoomCallBack=function(){},e.prototype.loginSuccessCallBack=function(e,t){},e.prototype.handlePushKickout=function(e,t){var i=this;if(this.logger.info(o.ZEGO_RTM_ACTION.ROOM_KICK_OUT+"  call "+JSON.stringify(e)),this.room.sessionID===e.header.session_id){var c=n.getReportSeq();this.dataReport.newReport(c,a.ZegoRTMLogEvent.kZegoTaskKickout.event),this.dataReport.addMsgInfo(c,{user_id:a.ZegoRTMLogEvent.kZegoTaskKickout.user_id(this.stateCenter.idName)});var l=r.ClientUtil.getKickoutError(e.body.reason);this.dataReport.addMsgInfo(c,{error:l.code,message:l.message}),this.dataReport.uploadReport(c);var u=this.room.roomTryHandler;if(u)if(u.onactive=function(e,t){i.disconnectedHandle(t),i.stateCenter.actionListener("_kickout",t)},e.body.need_relogin&&1==e.body.need_relogin)this.room.sessionID="",u.startMaxTime(),u.active();else{this.setRunState(n.ENUM_RUN_STATE.logout),this.resetRoom(t);var d={};e&&e.body.custom_reason?d.custom_kickout_message=e.body.custom_reason:l.name&&s.errorCodeList[l.name]&&(d.custom_kickout_message=s.errorCodeList[l.name].msg+"; kickout reason: "+e.body.reason),l.name&&s.errorCodeList[l.name]?this.disconnectedHandle(s.errorCodeList[l.name],JSON.stringify(d)):this.disconnectedHandle(s.errorCodeList.ROOM_INNER_ERROR,JSON.stringify(d)),this.stateCenter.actionListener("_kickout",{code:s.errorCodeList.MANUAL_KICKOUT.code,msg:s.errorCodeList.MANUAL_KICKOUT.msg+e.body.reason})}else this.logger.info(o.ZEGO_RTM_ACTION.ROOM_KICK_OUT+" try handler no found")}else this.logger.info(o.ZEGO_RTM_ACTION.ROOM_KICK_OUT+" session id wrong, ignore")},e.prototype.handleHbLogout=function(e){var t=this,i=this.room.roomTryHandler;i&&(i.onactive=function(e,i){t.disconnectedHandle(i)},[s.errorCodeList.HEARTBEAT_TIMEOUT,s.errorCodeList.SOCKET_CLOSE,s.errorCodeList.TIMEOUT].includes(e)||e.msg.endsWith("1000002001")||e.msg.endsWith("1000000152")||e.msg.endsWith("1000000105")?(i.startMaxTime(),i.active()):(i.stopMaxTime(),i.invalid(),this.resetRoom(),this.disconnectedHandle(e)))},e.prototype.onDisconnect=function(e){var t=this;if(this.logger.error(o.ZEGO_RTM_ACTION.ROOM_DISCONNECT+" "+e.msg),"string"==typeof e.code&&"Error.Network"===e.code)this.dataReport.addMsgInfo(this.stateCenter.reportSeqList.relogin,{error:a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.error.ROOM_DISCONNECT.code,message:a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.error.ROOM_DISCONNECT.msg});else if("number"==typeof e.code){var i=void 0;(i=e.code<2e9&&e.code>1e9||e.code<1e6?r.ClientUtil.decodeServerError(e.code,e.msg):{code:e.code,message:e.msg})&&this.dataReport.addMsgInfo(this.stateCenter.reportSeqList.relogin,{error:i.code,message:i.message})}this.dataReport.uploadReport(this.stateCenter.reportSeqList.relogin),this.stateCenter.reportSeqList.relogin=0,r.ClientUtil.unregisterCallback(a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.event,this.stateCenter.reportList);var n=this.room.roomTryHandler;n?(n.onactive=function(e,i){i&&0!==i.code?t.roomStateHandle("DISCONNECTED",i):t.roomStateHandle("CONNECTED",i)},n.startMaxTime(),n.active()):this.logger.error(o.ZEGO_RTM_ACTION.ROOM_DISCONNECT+" try handler no found")},e.prototype.onConnecting=function(e){this.roomStateHandle("CONNECTING",e)},e.prototype.disconnectedHandle=function(e,t){e&&0!==e.code?(this.stopTokenTimer(),this.roomStateHandle("DISCONNECTED",e,t)):this.roomStateHandle("CONNECTED",e,t)},e.prototype.roomStateHandle=function(e,t,i){this.logger.info(o.ZEGO_RTM_ACTION.ROOM_STATUS_CALLBACK+" "+e+" "+JSON.stringify(t)),this.room.lastRoomState=this.room.roomState,this.room.roomState=e,this.room.roomState!==this.room.lastRoomState&&(this.stateCenter.actionListener("_roomStateUpdate",this.room.roomID,e,t?t.code:0,i),this.stateCenter.actionListener("roomStateUpdate",this.room.roomID,e,t?t.code:0,i))},e.prototype.login=function(e,t,i,c,l,u,d){if(this.logger.info(o.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" call:",t,i),!this.room.isMulti&&this.logger.setSessionInfo(this.stateCenter.appid,t,"",c.userID,"",this.stateCenter.sdKVersion),l&&(l.userUpdate&&"boolean"==typeof l.userUpdate&&(this.stateCenter.userStateUpdate=l.userUpdate),l.maxMemberCount&&"number"==typeof l.maxMemberCount&&(this.stateCenter.maxMemberCount=l.maxMemberCount)),!this.stateCenter.configOK)return this.logger.error(o.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" init sdk wrong"),void d(s.errorCodeList.INIT);if(this.room.runState!==n.ENUM_RUN_STATE.trylogin&&this.setRunState(n.ENUM_RUN_STATE.trylogin),this.room.roomID=t,this.room.token=i,this.room.thirdToken=i,this.stateCenter.idName=c.userID,this.stateCenter.nickName=c.userName||c.userID,this.loginCallback.success=u,this.loginCallback.fail=d,0===this.stateCenter.reportSeqList.login){var h=n.getReportSeq();this.stateCenter.reportSeqList.relogin=h,this.dataReport.newReport(h,a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.event),this.dataReport.addMsgInfo(h,{server:e}),r.ClientUtil.logReportCallback(a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.event,this.dataReport,h,this.stateCenter.reportList)}this.resetTryLogin(),this.onConnecting({code:0,msg:""}),this.tryLogin(e),this.logger.info(o.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" call success")},e.prototype.tryLogin=function(e){var t=this;if(this.room.runState===n.ENUM_RUN_STATE.trylogin){var i=0!==this.stateCenter.reportSeqList.login?a.ZegoRTMLogEvent.kZegoTaskLoginRoom.event:a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.event;if(this.service.isDisConnect())try{this.service.closeSocket(),this.logger.debug(o.ZEGO_RTM_ACTION.ROOM_TRY_LOGIN+" new websocket"),r.ClientUtil.actionSuccessCallback(i,this.stateCenter.reportList)&&(this.tryLoginCount>1&&r.ClientUtil.actionSuccessCallback(i,this.stateCenter.reportList)(n.REPORT_ACTION.eventEnd,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.create_socket.event),r.ClientUtil.actionSuccessCallback(i,this.stateCenter.reportList)(n.REPORT_ACTION.eventStart,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.create_socket.event),r.ClientUtil.actionSuccessCallback(i,this.stateCenter.reportList)(n.REPORT_ACTION.addEventMsg,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.create_socket.event,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.create_socket.server("server"),e)),this.service.createSocket(e),this.service.openHandler((function(){t.openHandler()})),this.service.closeHandler((function(e){t.logger.error(o.ZEGO_RTM_ACTION.ROOM_TRY_LOGIN+" close "+JSON.stringify(e.code?e.code:e)),t.service.closeSocket(),t.closeHandler(e)})),this.service.errorHandler((function(e){t.logger.error(o.ZEGO_RTM_ACTION.ROOM_TRY_LOGIN+" error "+JSON.stringify(e.code?e.code:e)),t.service.closeSocket(),t.closeHandler(e)}))}catch(e){this.logger.error(o.ZEGO_RTM_ACTION.ROOM_TRY_LOGIN+"  websocket err:"+JSON.stringify(e))}else{this.logger.info(o.ZEGO_RTM_ACTION.ROOM_TRY_LOGIN+" use current websocket and sent login"),r.ClientUtil.actionSuccessCallback(i,this.stateCenter.reportList)&&r.ClientUtil.actionSuccessCallback(i,this.stateCenter.reportList)(n.REPORT_ACTION.eventStart,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.liveroom_login.event);var s=function(e,i){t.handleLoginRsp(e,i)};this.service.login(this.room,s,s)}this.tryLoginTimer=setTimeout((function(){t.logger.info(o.ZEGO_RTM_ACTION.ROOM_TRY_LOGIN+" over time no response, login timeout"),t.loginCallback.fail&&t.loginCallback.fail(a.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.LOGIN_TIMEOUT)}),this.tryLoginInterval),this.logger.info(o.ZEGO_RTM_ACTION.ROOM_TRY_LOGIN+" call success")}else this.logger.error("zb.rh.tl state error")},e.prototype.openHandler=function(){var e=this;this.logger.info(o.ZEGO_RTM_ACTION.ROOM_OPEN_HANDLER+" websocket.onpen call");var t=0!==this.stateCenter.reportSeqList.login?a.ZegoRTMLogEvent.kZegoTaskLoginRoom.event:a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.event;r.ClientUtil.actionSuccessCallback(t,this.stateCenter.reportList)&&r.ClientUtil.actionSuccessCallback(t,this.stateCenter.reportList)(n.REPORT_ACTION.eventEndWithMsgInfo,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.create_socket.event,{try_cnt:this.tryLoginCount}),this.service.onPush(),r.ClientUtil.actionSuccessCallback(t,this.stateCenter.reportList)&&r.ClientUtil.actionSuccessCallback(t,this.stateCenter.reportList)(n.REPORT_ACTION.eventStart,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.liveroom_login.event);var i=function(t,i){e.handleLoginRsp(t,i)};this.service.login(this.room,i,i)},e.prototype.handleLoginRsp=function(e,t){var i=0!==this.stateCenter.reportSeqList.login?a.ZegoRTMLogEvent.kZegoTaskLoginRoom.event:a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.event;if(r.ClientUtil.actionSuccessCallback(i,this.stateCenter.reportList)&&r.ClientUtil.actionSuccessCallback(i,this.stateCenter.reportList)(n.REPORT_ACTION.eventEndWithMsgInfo,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.liveroom_login.event),this.room.runState===n.ENUM_RUN_STATE.trylogin)if(e.header&&e.body){if(e.header.seq!==t&&0==this.room.isMulti)return void this.logger.error(o.ZEGO_RTM_ACTION.ROOM_HANDLE_LOGINRSP+" in wrong seq, local=",t+"",",recv=",e.header.seq);0!==e.body.err_code?(this.logger.error(o.ZEGO_RTM_ACTION.ROOM_HANDLE_LOGINRSP+" server error=",e.body.err_code),this.handleLoginFail(e)):(this.logger.info(o.ZEGO_RTM_ACTION.ROOM_HANDLE_LOGINRSP+" call success."),this.handleLoginSuccess(e))}else this.logger.error(o.ZEGO_RTM_ACTION.ROOM_HANDLE_LOGINRSP+" "+JSON.stringify(e)),this.handleLoginFail(e);else this.logger.error(o.ZEGO_RTM_ACTION.ROOM_HANDLE_LOGINRSP+" state error")},e.prototype.handleLoginFail=function(e){this.resetTryLogin();var t=a.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INNER_ERROR;e.header&&e.body?t=r.ClientUtil.getServerError(e.body.err_code):e.code&&e.msg&&(t=e),this.loginCallback.fail&&this.loginCallback.fail(t,!0)},e.prototype.handleLoginSuccess=function(e){var t,i={},o=this.room.lastRunState;this.setRunState(n.ENUM_RUN_STATE.login),this.stateCenter.userid=e.body.user_id,this.room.sessionID=e.body.session_id,this.room.roomSessionID=e.body.room_session_id;var s=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.token_remain_time;if(this.stateCenter.configRoomAuth=s>0,e.body.ret_timestamp&&["03","04"].includes(this.room.token.substring(0,2))){var c=(new Date).getTime(),l=c-e.body.ret_timestamp;this.stateCenter.local_time_deviation=l<5e3?0:l;var u=s>0?1e3*s:1e3*r.ClientUtil.decodeTokenExpire(this.room.token.substring(2))-c;this.resetTokenTimer(u-this.stateCenter.local_time_deviation)}if(!this.room.isMulti&&this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.sessionID,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),e.body.config_info){var d=this.stateCenter.settingConfig.getSetting("remote_log_level",!0)||e.body.config_info.log_level;this.logger.setRemoteLogLevel(d),i.log_level=d,""==e.body.config_info.log_url||this.logger.url||(this.logger.setLogServer(e.body.config_info.log_url),i.log_url=e.body.config_info.log_url)}e.body.cluster_env&&1===e.body.cluster_env&&(this.stateCenter.testEnvironment=!0,i.test_environment="true",!this.stateCenter.debugCustom&&(this.stateCenter.debug=!0));var h=0!==this.stateCenter.reportSeqList.login?a.ZegoRTMLogEvent.kZegoTaskLoginRoom.event:a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.event;r.ClientUtil.actionSuccessCallback(h,this.stateCenter.reportList)&&r.ClientUtil.actionSuccessCallback(h,this.stateCenter.reportList)(n.REPORT_ACTION.addEventMsg,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.liveroom_login.event,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.liveroom_login.respond_info("respond_info"),i),this.resetTryLogin(),this.loginSuccessCallBack(o,e),this.loginCallback.success&&this.loginCallback.success(!0),this.roomStateHandle("CONNECTED",{code:0,msg:""})},e.prototype.closeHandler=function(e){this.logger.error(o.ZEGO_RTM_ACTION.ROOM_CLOSEHANDLER+" room websocket close "+JSON.stringify(e.code?e.code:e)),this.room.runState!==n.ENUM_RUN_STATE.logout?this.room.runState===n.ENUM_RUN_STATE.trylogin?(this.resetTryLogin(),this.loginCallback.fail&&this.loginCallback.fail(1006==e.code?a.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.LOGIN_TIMEOUT:e)):this.room.runState===n.ENUM_RUN_STATE.login&&(this.logger.info(o.ZEGO_RTM_ACTION.ROOM_CLOSEHANDLER+" is called because of network broken"),this.resetTryLogin(),this.onDisconnect(a.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.NETWORK_BROKEN)):this.logger.info(o.ZEGO_RTM_ACTION.ROOM_CLOSEHANDLER+" onclose logout flow call websocket.close")},e.prototype.logout=function(e){this.logger.info(o.ZEGO_RTM_ACTION.ROOM_LOGOUT+" call"),this.room.runState!==n.ENUM_RUN_STATE.logout?(this.resetRoom(e),this.roomStateHandle("DISCONNECTED",{code:0,msg:""}),this.stopTokenTimer(),this.logger.info(o.ZEGO_RTM_ACTION.ROOM_LOGOUT+" call success")):this.logger.warn("zb.rh.lo at logout")},e.prototype.handleLogoutRsp=function(e){this.logger.info(o.ZEGO_RTM_ACTION.ROOM_LOGOUT+" result=",e.body&&e.body.err_code?e.body.err_code:"-1")},e}();t.RoomHandler=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveRoomModules=void 0;var n=i(0),r=i(9),o=i(10),s=function(){function e(e,t,i,s,a){this.stateCenter=e,this.logger=t,this.dataReport=i,this.service=s,this.rtm=a,this.roomID="",this._dispatchServer="",this.deviceID="",this.deviceType="",this.anType=0,this.sessionExpire="",this.pri_roomID="",this.roomSid="0",this.roomFlag=1,this.timeStamp=0,this.netType=2,this.userSeq=0,this.hallRunState=n.ENUM_RUN_STATE.logout,this.hallToken="",this.roomSessionID="",this.lastHallRunState=n.ENUM_RUN_STATE.logout,this.runRoomState=n.ENUM_RUN_STATE.logout,this.lastRunRoomState=n.ENUM_RUN_STATE.logout,this.lastHallState="DISCONNECTED",this.hallState="DISCONNECTED",this.lastRoomState="DISCONNECTED",this.roomState="DISCONNECTED",this.sessionID="",this.initHandler(),this.heartBeatHandler=new r.HeartBeatHandler(this.logger,this.stateCenter,this.dataReport,this.service,this),this.userHandler=new o.UserHandler(this.logger,this.stateCenter,this.dataReport,this.service,this),this.initMessageHandler(),this.init()}return e.prototype.initMessageHandler=function(){},e.prototype.initHandler=function(){},e.prototype.init=function(){this.bindSocketHandler(),this.bindHeatBeatHandler(),this.bindMessageHandler(),this.bindLiveHandler()},e.prototype.bindSocketHandler=function(){var e=this;this.service.handlePushUserStateUpdateMsg=function(t){e.userHandler.handlePushUserStateUpdateMsg(t)}},e.prototype.bindHeatBeatHandler=function(){var e=this;this.heartBeatHandler.hbLogout=function(e){},this.heartBeatHandler.heartbeatRspNotiFy=function(t){e.HBResponse(t)}},e.prototype.bindHallHandler=function(){},e.prototype.bindUserHandler=function(){},e.prototype.bindMessageHandler=function(){},e.prototype.bindLiveHandler=function(){},e.prototype.bindRoomHandler=function(){},e.prototype.handleHbLogout=function(e){},e.prototype.HBResponse=function(e){this.stateCenter.actionListener("HBResponse",e)},e.prototype.roomLoginResponse=function(e){this.stateCenter.actionListener("roomLoginResponse",e)},e.prototype.isLogin=function(){return this.hallRunState===n.ENUM_RUN_STATE.login},e}();t.LiveRoomModules=s},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.LiveRoomPrivateService=void 0;var o=i(12),s=i(0),a=function(e){function t(t,i,n){var r=e.call(this,t,i,n)||this;return r.stateCenter=t,r.logger=i,r.service=new o.ZegoSocketService(r.stateCenter.ENV),r.cmdSeq=0,r.responseRouters={},r}return r(t,e),t.prototype.checkResponse=function(e){return e.header.app_id!==this.stateCenter.appid||e.header.user_uid!==this.stateCenter.userid||this.stateCenter.priModules.hallRunState!==s.ENUM_RUN_STATE.login},t.prototype.handleHallKickout=function(e){},t.prototype.handlePushKickout=function(e){},t.prototype.handlePushCustomMsg=function(e){},t.prototype.handlePushRoomMsg=function(e){},t.prototype.handlePushUserStateUpdateMsg=function(e){},t.prototype.handlePushMergeMsg=function(e){},t.prototype.handlePushTransMsg=function(e){},t.prototype.handleBigImMsgRsp=function(e){},t.prototype.handlePushSignalMsg=function(e){},t.prototype.closeHandler=function(e){this.service.closeHandler(e)},t.prototype.openHandler=function(e){this.service.openHandler(e)},t.prototype.errorHandler=function(e){this.service.errorHandler(e)},t.prototype.getHeader=function(e){return{cmd:e,seq:++this.cmdSeq,timestamp:Math.ceil((new Date).getTime()/1e3)+"",app_id:this.stateCenter.appid,user_uid:this.stateCenter.userid||"0",session_id:this.stateCenter.priModules.sessionID||"0"}},t.prototype.startCheck=function(){this.service.startCheck()},t.prototype.stopCheck=function(){this.service.stopCheck()},t.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},t.prototype.closeSocket=function(){this.service.closeSocket()},t.prototype.on=function(e,t){this.responseRouters[e]=t},t}(i(11).LiveRoomService);t.LiveRoomPrivateService=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSettingConfig=void 0;var n=function(){function e(){this.defaultSetting={remote_log_level:"info"},this.requestList={},this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.setSetting=function(e,t){var i=Array.isArray(t)&&t.length>0;for(var n in e)for(var r in e[n])if(!r.endsWith("_ctrlmode")){if(i&&-1==t.indexOf(r))continue;var o=e[n][r+"_ctrlmode"];1===o||2===o?this.setting[r]=e[n][r]:this.defaultSetting[r]&&(this.setting[r]=this.defaultSetting[r]),"number"==typeof o&&(this.setting[r+"_ctrlmode"]=e[n][r+"_ctrlmode"])}},e.prototype.getSetting=function(e,t){return void 0===t&&(t=!1),t?2==this.setting[e+"_ctrlmode"]?this.setting[e]:void 0:this.setting[e]},e}();t.ZegoSettingConfig=n},function(e,t,i){"undefined"!=typeof self&&self,e.exports=function(e){return n={},t.m=i=[function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_SETTING_ACTION=void 0,(t=t.ZEGO_SETTING_ACTION||(t.ZEGO_SETTING_ACTION={})).CONSTRUCTOR="zs.0",t.SETTING_INIT="zs.ii.0",t.SETTING_FETCH_SETTING="zs.fs.0",t.SETTING__FETCH_SETTING="zs.fs.1",t.SETTING_GET_CLOUD_SETTING="zs.gcs.0",t.SETTING_POLLING_SETTING="zs.ps.0",t.SETTINGCACHEHANDLER_GET_CACHE_SETTING="zs.sch.gcs.0",t.SETTINGCACHEHANDLER_STORE_SETTING="zs.sch.ss.0",t.SETTINGFETCHHANDLER_FETCHSETTING="zs.sfh.fs.0"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorList=void 0,t.errorList={NOT_INIT:{code:1001,msg:"not init"},FILE_REQUEST_FAIL:{code:1002,msg:"fetch request fail"},INFLATE_DATA_FAIL:{code:1003,msg:"inflate fail"},MULTI_FILE_NOT_EXIST:{code:1004,msg:"get multi file fail"}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUUID=t.checkValidNumber=t.analyzeKey=t.getCurrentTime=t.getBrowser=void 0,t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),i=-1!=e.indexOf("Firefox"),n=null!=window.opr,r=e.indexOf("Chrome")&&window.chrome,o=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0],t?"IE":i?"FIREFOX":n?"OPERA":r?"CHROME":o?"SAFARI":e?"WEIXIN":"UNKOWN"};var n=["00","01","02","03","04","05","06","07","08","09"];t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(n[e.getMonth()+1]||e.getMonth()+1)+"/",(n[e.getDate()]||e.getDate())+" ",(n[e.getHours()]||e.getHours())+":",(n[e.getMinutes()]||e.getMinutes())+":",n[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},t.analyzeKey=function(e){return e=e.split("_"),{level:Number(e[0]),timestamp:e[1],seq:e[2]}},t.checkValidNumber=function(e,t,i){return t=t||1,i=i||1e4,"number"==typeof e&&e%1==0&&t<=e&&e<=i},t.generateUUID=function(e){if(0===(e=void 0===e?0:e)?i=localStorage.getItem("z_deviceID"):wx.getStorageSync("z_deviceID"),i)return i;var t=(new Date).getTime(),i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:3&i|8).toString(36)}));return 0===e?localStorage.setItem("z_deviceID",i):wx.setStorageSync("z_deviceID",i),i}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSetting=void 0;var n=i(4);Object.defineProperty(t,"ZegoSetting",{enumerable:!0,get:function(){return n.ZegoSetting}})},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,i,n){return new(i=i||Promise)((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,n,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,(s=r?[2&s[0],r.value]:s)[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=0<(r=o.trys).length&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSetting=void 0;var s=i(5),a=i(6),c=i(10),l=i(0),u=i(12),d=i(1),h=i(2);function p(){this.fileList=[],this.publicEnvVariable={},this.proEnvVariable={},this.pollingTimer=null,this.inited=!1,this.log=new s.ZegoLog}Object.defineProperty(p.prototype,"envVariable",{get:function(){return Object.assign({},this.publicEnvVariable,this.proEnvVariable)},enumerable:!1,configurable:!0}),p.prototype.init=function(e){var t=this;return h.checkValidNumber(e.pollingFreq)?(this.options=Object.assign({},u.INIT_CONFIG,e),this.getPublicEnvVariable(),this.settingFetchHandler=new c.SettingFetchHandler(this.options,this.log),this.settingFetchHandler.setDataReport(this.options.reportNotify),e=Math.round(60*Math.random()),this.log.info(l.ZEGO_SETTING_ACTION.SETTING_INIT+" delay "+e),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null),this.delayTimer=setTimeout((function(){t.pollingSetting(1e3*t.options.pollingFreq)}),1e3*e),this.settingCacheHandler=new a.SettingCacheHandler("setting_"+(this.options.online?"online_":"test_")+this.options.product+"_"+this.options.appID,this.log,this.options.env),this.inited=!0):(this.log.error(l.ZEGO_SETTING_ACTION.SETTING_INIT+" pollingFreq must be integer number"),!1)},p.prototype.uninit=function(){this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null)},p.prototype.setEnvVariable=function(e,t){this.proEnvVariable[e]=String(t)},p.prototype.getEnvVariable=function(e){return this.envVariable[e]},p.prototype.setEnvVariables=function(e){var t=this;Object.keys(e).forEach((function(i){"string"!=typeof e[i]&&"number"!=typeof e[i]&&t.log.error("zs.sev env "+i+" type error"),t.proEnvVariable[i]=String(e[i])}))},p.prototype.getEnvVariables=function(){return this.envVariable},p.prototype.enablePolling=function(e,t){var i=this;t?t.forEach((function(t){var n=i.fileList.find((function(e){return e.fileName===t}));n&&(n.needPolling=e)})):this.fileList.forEach((function(t){return t.needPolling=e}))},p.prototype.setToken=function(e){this.token=e},p.prototype.setUserID=function(e){this.userID=e},p.prototype.getSettingCache=function(e){return r(this,void 0,void 0,(function(){var t,i,n;return o(this,(function(r){switch(r.label){case 0:return this.inited?(t=this.fileList.find((function(t){return t.fileName===e})))?[2,Promise.resolve({setting:t.setting,versions:t.versions})]:[3,1]:[2,Promise.reject(d.errorList.NOT_INIT)];case 1:return i=this._getFileName(e),[4,this.settingCacheHandler.getCacheSetting(i)];case 2:return(i=r.sent())&&(this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:0,needPolling:!1,setting:i.setting,versions:i.versions}),n={setting:i.setting,versions:i.versions}),[2,Promise.resolve(n)]}}))}))},p.prototype.fetchSetting=function(e,t,i){return void 0===t&&(t={}),void 0===i&&(i=!0),this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" call "+e),this.inited?(this.activePolling(),0<Object.keys(t).length?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(e,n(n({},this.envVariable),t))):(t=this.fileList.find((function(t){return t.fileName===e})))?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file exist"),(new Date).getTime()-t.fetchedTime<1e3*this.options.pollingFreq?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),t.needPolling=i,Promise.resolve({setting:t.setting,versions:t.versions})):this._fetchSetting(e,t,i)):(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file not found"),this._fetchSetting(e,t,i))):Promise.reject(d.errorList.NOT_INIT)},p.prototype.fetchMultiSetting=function(e,t,i){var s=this;return void 0===t&&(t={}),void 0===i&&(i=!0),this.inited?(this.activePolling(),0<Object.keys(t).length?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(e,n(n({},this.envVariable),t))):new Promise((function(t,n){var a={},c=[];if(e.forEach((function(e){return r(s,void 0,void 0,(function(){var t;return o(this,(function(i){return(t=this.fileList.find((function(t){return t.fileName===e})))&&(new Date).getTime()-t.fetchedTime<1e3*this.options.pollingFreq?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),a[e]={setting:t.setting,versions:t.versions}):c.push(e),[2]}))}))})),!(0<c.length))return t(a);s._getCloudSetting(c,s.envVariable).then((function(e){return s.handleFetchFiles(e,i),Object.assign(a,e),t(a)})).catch((function(e){c.forEach((function(e){return r(s,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return(t=this.fileList.find((function(t){return t.fileName==e})))?t.fetchedTime=(new Date).getTime():this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:i,setting:{},versions:{}}),[4,this.settingCacheHandler.getCacheSetting(e)];case 1:return t=n.sent(),a[e]={setting:t.setting,versions:t.versions},[2]}}))}))})),0<Object.keys(a).length?t(a):n(e)}))}))):Promise.reject(d.errorList.NOT_INIT)},p.prototype.setLog=function(e){this.log=e},p.prototype._getCloudSetting=function(e,t){var i=this;return new Promise((function(n,s){return r(i,void 0,void 0,(function(){var i,r,a,c,u;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),a=e instanceof Array,[4,this.settingFetchHandler.fetchSetting(a?e:[e],t,this.token,this.userID)];case 1:return i=o.sent(),a?(r={},e.forEach((function(e){var t,n;0==(null===(t=i[e])||void 0===t?void 0:t.code)&&void 0!==(null===(n=i[e])||void 0===n?void 0:n.data)&&(r[e]={setting:null===(n=i[e])||void 0===n?void 0:n.data,versions:null===(e=i[e])||void 0===e?void 0:e.versions})})),0<Object.keys(r).length?n(r):s(d.errorList.MULTI_FILE_NOT_EXIST)):0===(null===(a=i[e])||void 0===a?void 0:a.code)&&null!==(c=i[e])&&void 0!==c&&c.data?n({setting:null===(c=i[e])||void 0===c?void 0:c.data,versions:null===(c=i[e])||void 0===c?void 0:c.versions}):s({code:null===(u=i[e])||void 0===u?void 0:u.code,msg:null===(u=i[e])||void 0===u?void 0:u.message}),[3,3];case 2:return u=o.sent(),s(u),this.log.info(l.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" fail"),[3,3];case 3:return[2]}}))}))}))},p.prototype.handleFetchFiles=function(e,t){var i=this;Object.keys(e).forEach((function(n){var r=i.fileList.find((function(e){return e.fileName==n}));r?(r.fetchedTime=(new Date).getTime(),r.setting=e[n].setting,r.versions=e[n].versions,r.needPolling=t):i.fileList.find((function(e){return e.fileName===n}))||i.fileList.push({fileName:n,fetchedTime:(new Date).getTime(),needPolling:t,setting:e[n].setting,versions:e[n].versions}),r=i._getFileName(n),i.settingCacheHandler.storeSetting(r,e[n])}))},p.prototype._fetchSetting=function(e,t,i){var n=this;return new Promise((function(s,a){n.log.info(l.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call"),n._getCloudSetting(e,n.envVariable).then((function(r){t?(t.fetchedTime=(new Date).getTime(),t.setting=r.setting,t.versions=r.versions,t.needPolling=i):n.fileList.find((function(t){return t.fileName===e}))||n.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:i,setting:r.setting,versions:r.versions});var o=n._getFileName(e);n.settingCacheHandler.storeSetting(o,r),s(r),n.log.info(l.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call suc")})).catch((function(c){return r(n,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:t?t.fetchedTime=(new Date).getTime():this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:i,setting:{},versions:{}}),n=this._getFileName(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.settingCacheHandler.getCacheSetting(n)];case 2:return n=r.sent(),s(n),[3,4];case 3:return r.sent(),a(c),[3,4];case 4:return this.log.info(l.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" setting not contain or fetch file fail"),[2]}}))}))}))}))},p.prototype.getPublicEnvVariable=function(){var e;0==this.options.env?(this.publicEnvVariable.userAgent=navigator.userAgent,this.publicEnvVariable.platform=navigator.platform,this.publicEnvVariable.browser=h.getBrowser(),this.publicEnvVariable.deviceid=h.generateUUID()):1==this.options.env&&(e=wx.getSystemInfoSync(),this.publicEnvVariable.brand=e.brand,this.publicEnvVariable.model=e.model,this.publicEnvVariable.system=e.system,this.publicEnvVariable.platform=e.platform,this.publicEnvVariable.wechatVersion=e.version,this.publicEnvVariable.wechatSDKVersion=e.SDKVersion,this.publicEnvVariable.deviceid=h.generateUUID(this.options.env))},p.prototype.pollingSetting=function(e){return r(this,void 0,void 0,(function(){var t,i,n,s=this;return o(this,(function(a){switch(a.label){case 0:if(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" call "+e),t=[],this.fileList.forEach((function(e){e.fileName,e.needPolling&&t.push(e.fileName)})),!(0<t.length))return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.settingFetchHandler.fetchSetting(t,this.envVariable,this.token,this.userID)];case 2:return i=a.sent(),this.fileList.forEach((function(e){return r(s,void 0,void 0,(function(){var t,n,r,s;return o(this,(function(o){switch(o.label){case 0:return e.fetchedTime=(new Date).getTime(),t=this._getFileName(e.fileName),i[e.fileName]&&0===i[e.fileName].code&&i[e.fileName].data?(n=JSON.stringify(i[e.fileName].data),r=JSON.stringify(e.setting),s={setting:i[e.fileName].data,versions:null===(s=i[e.fileName])||void 0===s?void 0:s.versions},r!==n&&(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" "+e.fileName+" setting changed"),e.setting=s.setting,e.versions=s.versions,this.options.pollingNotify(e.fileName,s)),[4,this.settingCacheHandler.getCacheSetting(t)]):[3,2];case 1:r=o.sent(),n=JSON.stringify(r),r=JSON.stringify(s),n!==r&&this.settingCacheHandler.storeSetting(t,s),o.label=2;case 2:return[2]}}))}))})),[3,4];case 3:return n=a.sent(),this.log.error(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" fetch fail "+JSON.stringify(n)),[3,4];case 4:return[3,6];case 5:this.log.info(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" polling no file"),a.label=6;case 6:return this.pollingTimer&&clearTimeout(this.pollingTimer),this.pollingTimer=setTimeout((function(){s.pollingSetting(e)}),e),[2]}}))}))},p.prototype._getFileName=function(e){return e},p.prototype.activePolling=function(){this.pollingTimer||this.pollingSetting(1e3*this.options.pollingFreq)},i=p,t.ZegoSetting=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLog=void 0;var n=(r.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},r);function r(){}t.ZegoLog=n},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i=i||Promise)((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,(s=r?[2&s[0],r.value]:s)[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=0<(r=o.trys).length&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingCacheHandler=void 0;var o=i(0),s=i(7);function a(e,t,i){void 0===i&&(i=0),this.storeName=e,this.log=t,this.store=s.createZegoStore(e,i)}a.prototype.getCacheSetting=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this.log.info(o.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_GET_CACHE_SETTING+" call"),[4,this.store.getItem(e)];case 1:return[2,t.sent()||""]}}))}))},a.prototype.storeSetting=function(e,t){return n(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return this.log.info(o.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_STORE_SETTING+" call"),[4,this.store.setItem(e,t)];case 1:return i.sent(),[2]}}))}))},i=a,t.SettingCacheHandler=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoStore=t.ZegoWechatMiniStore=void 0;var n=i(8),r=i(9),o=(s.prototype.getItem=function(e){var t=this;return new Promise((function(i,n){try{i(wx.getStorageSync(t.keyPrefix+e))}catch(i){n(i)}}))},s.prototype.setItem=function(e,t){var i=this;return new Promise((function(n,r){try{wx.setStorageSync(i.keyPrefix+e,t),n()}catch(n){r(n)}}))},s.prototype.removeItem=function(e){var t=this;return new Promise((function(i,n){try{i(wx.removeStorageSync(t.keyPrefix+e))}catch(i){n(i)}}))},s.prototype.clear=function(){return new Promise((function(e,t){try{wx.clearStorageSync(),e()}catch(e){t(e)}}))},s.prototype.keys=function(){var e=this;return new Promise((function(t,i){try{var n=wx.getStorageInfoSync().keys,r=[];n.forEach((function(t){0==t.indexOf(e.keyPrefix)&&r.push(t.replace(e.keyPrefix,""))})),r.sort(),t(r)}catch(t){i(t)}}))},s);function s(e){this.storeName=e,this.keyPrefix=e+"/",this.storeName}t.ZegoWechatMiniStore=o,t.createZegoStore=function(e,t){return t===r.ZEGO_ENV.BROWSER?n.createInstance({name:e}):new o(e)}},function(t,i){t.exports=e},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SOCKET_DISCONNECT=t.ENUM_REMOTE_TYPE=t.ZEGO_BROWSER_TYPE=t.ZEGO_ENV=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.0.2",(n=t.ZEGO_ENV||(t.ZEGO_ENV={}))[n.BROWSER=0]="BROWSER",n[n.WEIXINMINI=1]="WEIXINMINI",(n=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[n.IE=0]="IE",n[n.FIREFOX=1]="FIREFOX",n[n.CHROME=2]="CHROME",n[n.SAFARI=3]="SAFARI",n[n.OPERA=4]="OPERA",n[n.WEIXIN=5]="WEIXIN",n[n.WEIXINMINI=6]="WEIXINMINI",n[n.UNKOWN=7]="UNKOWN",(n=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[n.DISABLE=0]="DISABLE",n[n.WEBSOCKET=1]="WEBSOCKET",n[n.HTTPS=2]="HTTPS",t.SOCKET_DISCONNECT=-1},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingFetchHandler=void 0;var r=i(0),o=i(11),s=i(2);function a(e,t){this.options=e,this.log=t,this.seq=0}a.prototype.setOptions=function(e){this.options=e},a.prototype.setDataReport=function(e){this.reportFunc=e},a.prototype.fetchSetting=function(e,t,i,a){var c=this;return new Promise((function(l,u){var d={product:c.options.product,files:e,param:n(n({},t),{deviceid:void 0}),appid:c.options.appID,token:i,id_name:a,timestamp:(new Date).getTime(),biztype:0,deviceid:t.deviceid||s.generateUUID(c.options.env),compress:!1,mode:c.options.online?"online":"test"},h=c.seq++;c.reportFunc&&c.reportFunc(h,"request_start"),o.fetch(c.options.urls,d,c.options.env||0).then((function(e){var t,i=e.code,n=(e.msg,e.data);e=e.reportData,c.log.info(r.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+i),n&&(t=[],Object.keys(n).forEach((function(e){t.push({name:e,error:n[e].code})}))),c.reportFunc&&c.reportFunc(h,"request_end",{code:i,reportData:e,params:d,files:t}),l(n)})).catch((function(e){var t=e.code,i=e.msg;e.data,e=e.reportData,c.log.warn(r.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+t),c.reportFunc&&c.reportFunc(h,"request_end",{code:t,params:d,reportData:e}),u({code:t,msg:i})}))}))},i=a,t.SettingFetchHandler=i},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=void 0;var r=i(1);t.fetch=function e(t,i,o,s,a,c){return void 0===s&&(s=5),void 0===a&&(a=0),void 0===c&&(c=[]),new Promise((function(l,u){a=a||(new Date).getTime();var d,h,p,f=(new Date).getTime();0===o?(d=new XMLHttpRequest,h=t[(s+1)%2]||t[0],d.open("post",h),1==i.compress&&(d.responseType="arraybuffer"),d.ontimeout=function(){},d.onreadystatechange=function(){var p,g,m,_;4==d.readyState&&(200<=d.status&&d.status<300||304==d.status?(m=void 0,1==i.compress||(m=d.responseText),_=(new Date).getTime()-f,p=(g=JSON.parse(m)).code,m=g.message,g=g.data,c.push({timestamp:f,url:h,error:p,duration:_}),0===p?l({code:p,msg:m,data:g,reportData:c}):u({code:p,msg:m,reportData:c})):(m=(new Date).getTime()-f,c.push({timestamp:f,url:h,error:d.status,duration:m}),_=(new Date).getTime()-a,0<s&&_<8e3?e(t,i,o,--s,a,c).then((function(e){l(e)})).catch((function(e){u(e)})):u(n(n({},r.errorList.FILE_REQUEST_FAIL),{reportData:c}))))},d.timeout=8e3,d.send(JSON.stringify(i))):(p=t[(s+1)%2]||t[0],wx.request({url:p,data:i,method:"POST",success:function(d){var h=(m=d.data).code,g=m.message,m=m.data;void 0!==h?0===h?l({code:h,msg:g,data:m,reportData:c}):u({code:h,msg:g,reportData:c}):(g=(new Date).getTime()-f,c.push({timestamp:f,url:p,error:r.errorList.FILE_REQUEST_FAIL.code,msg:d.data,duration:g}),0<s?e(t,i,o,--s,a,c).then((function(e){l(e)})).catch((function(e){u(e)})):u(n(n({},r.errorList.FILE_REQUEST_FAIL),{reportData:c})))},fail:function(d){var h=(new Date).getTime()-f;c.push({timestamp:f,url:p,error:r.errorList.FILE_REQUEST_FAIL.code,msg:d.errMsg,duration:h}),0<s?e(t,i,o,--s,a,c).then((function(e){l(e)})).catch((function(e){u(e)})):u(n(n({},r.errorList.FILE_REQUEST_FAIL),{reportData:c}))}}))}))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INIT_CONFIG=void 0,t.INIT_CONFIG={env:0}}],t.c=n,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var r in e)t.d(n,r,function(t){return e[t]}.bind(null,r));return n},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3);function t(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return i[e].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i,n}(i(34))},function(e,t,i){(function(t){e.exports=function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[s]={exports:{}};t[s][0].call(l.exports,(function(e){var i=t[s][1][e];return r(i||e)}),l,l.exports,e,t,i,n)}return i[s].exports}for(var o=!1,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,i,n){(function(e){"use strict";var t,n,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var o=0,s=new r(u),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),t=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,t=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;n=!0;for(var i=l.length;i;){for(t=l,l=[],e=-1;++e<i;)t[e]();i=l.length}n=!1}i.exports=function(e){1!==l.push(e)||n||t()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,i){"use strict";var n=e(1);function r(){}var o={},s=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==r&&p(this,e)}function u(e,t,i){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function d(e,t,i){n((function(){var n;try{n=t(i)}catch(t){return o.reject(e,t)}n===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,n)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var i=!1;function n(t){i||(i=!0,o.reject(e,t))}function r(t){i||(i=!0,o.resolve(e,t))}var s=f((function(){t(r,n)}));"error"===s.status&&n(s.value)}function f(e,t){var i={};try{i.value=e(t),i.status="success"}catch(e){i.status="error",i.value=e}return i}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var i=new this.constructor(r);return this.state!==c?d(i,this.state===a?e:t,this.outcome):this.queue.push(new u(i,e,t)),i},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},o.resolve=function(e,t){var i=f(h,t);if("error"===i.status)return o.reject(e,i.value);var n=i.value;if(n)p(e,n);else{e.state=a,e.outcome=t;for(var r=-1,s=e.queue.length;++r<s;)e.queue[r].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var i=-1,n=e.queue.length;++i<n;)e.queue[i].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:o.resolve(new this(r),e)},l.reject=function(e){var t=new this(r);return o.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,n=!1;if(!i)return this.resolve([]);for(var s=new Array(i),a=0,c=-1,l=new this(r);++c<i;)u(e[c],c);return l;function u(e,r){t.resolve(e).then((function(e){s[r]=e,++a!==i||n||(n=!0,o.resolve(l,s))}),(function(e){n||(n=!0,o.reject(l,e))}))}},l.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,n=!1;if(!i)return this.resolve([]);for(var s,a=-1,c=new this(r);++a<i;)s=e[a],t.resolve(s).then((function(e){n||(n=!0,o.resolve(c,e))}),(function(e){n||(n=!0,o.reject(c,e))}));return c}},{1:1}],3:[function(e,i,n){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(r){if("TypeError"!==r.name)throw r;for(var i=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)i.append(e[n]);return i.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var s=Promise;function a(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,i){"function"==typeof t&&e.then(t),"function"==typeof i&&e.catch(i)}function l(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d=void 0,h={},p=Object.prototype.toString;function f(e){return"boolean"==typeof d?s.resolve(d):function(e){return new s((function(t){var i=e.transaction("local-forage-detect-blob-support","readwrite"),n=o([""]);i.objectStore("local-forage-detect-blob-support").put(n,"key"),i.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},i.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),i=navigator.userAgent.match(/Edge\//);t(i||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return d=e}))}function g(e){var t=h[e.name],i={};i.promise=new s((function(e,t){i.resolve=e,i.reject=t})),t.deferredOperations.push(i),t.dbReady?t.dbReady=t.dbReady.then((function(){return i.promise})):t.dbReady=i.promise}function m(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function _(e,t){var i=h[e.name].deferredOperations.pop();if(i)return i.reject(t),i.promise}function v(e,t){return new s((function(i,n){if(h[e.name]=h[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return i(e.db);g(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var s=r.open.apply(r,o);t&&(s.onupgradeneeded=function(t){var i=s.result;try{i.createObjectStore(e.storeName),t.oldVersion<=1&&i.createObjectStore("local-forage-detect-blob-support")}catch(i){if("ConstraintError"!==i.name)throw i;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),n(s.error)},s.onsuccess=function(){i(s.result),m(e)}}))}function E(e){return v(e,!1)}function A(e){return v(e,!0)}function y(e,t){if(!e.db)return!0;var i=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,r=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),r||i){if(i){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function S(e){return o([function(e){for(var t=e.length,i=new ArrayBuffer(t),n=new Uint8Array(i),r=0;r<t;r++)n[r]=e.charCodeAt(r);return i}(atob(e.data))],{type:e.type})}function C(e){return e&&e.__local_forage_encoded_blob}function b(e){var t=this,i=t._initReady().then((function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(i,e,e),i}function T(e,t,i,n){void 0===n&&(n=1);try{var r=e.db.transaction(e.storeName,t);i(null,r)}catch(r){if(n>0&&(!e.db||"InvalidStateError"===r.name||"NotFoundError"===r.name))return s.resolve().then((function(){if(!e.db||"NotFoundError"===r.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),A(e)})).then((function(){return function(e){g(e);for(var t=h[e.name],i=t.forages,n=0;n<i.length;n++){var r=i[n];r._dbInfo.db&&(r._dbInfo.db.close(),r._dbInfo.db=null)}return e.db=null,E(e).then((function(t){return e.db=t,y(e)?A(e):t})).then((function(n){e.db=t.db=n;for(var r=0;r<i.length;r++)i[r]._dbInfo.db=n})).catch((function(t){throw _(e,t),t}))}(e).then((function(){T(e,t,i,n-1)}))})).catch(i);i(r)}}var I={_driver:"asyncStorage",_initStorage:function(e){var t=this,i={db:null};if(e)for(var n in e)i[n]=e[n];var r=h[i.name];r||(r={forages:[],db:null,dbReady:null,deferredOperations:[]},h[i.name]=r),r.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=b);var o=[];function a(){return s.resolve()}for(var c=0;c<r.forages.length;c++){var l=r.forages[c];l!==t&&o.push(l._initReady().catch(a))}var u=r.forages.slice(0);return s.all(o).then((function(){return i.db=r.db,E(i)})).then((function(e){return i.db=e,y(i,t._defaultConfig.version)?A(i):e})).then((function(e){i.db=r.db=e,t._dbInfo=i;for(var n=0;n<u.length;n++){var o=u[n];o!==t&&(o._dbInfo.db=i.db,o._dbInfo.version=i.version)}}))},_support:function(){try{if(!r||!r.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var i=this,n=new s((function(t,n){i.ready().then((function(){T(i._dbInfo,"readonly",(function(r,o){if(r)return n(r);try{var s=o.objectStore(i._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var i=s.result;if(i){var n=i.value;C(n)&&(n=S(n));var r=e(n,i.key,a++);void 0!==r?t(r):i.continue()}else t()},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return a(n,t),n},getItem:function(e,t){var i=this;e=l(e);var n=new s((function(t,n){i.ready().then((function(){T(i._dbInfo,"readonly",(function(r,o){if(r)return n(r);try{var s=o.objectStore(i._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),C(e)&&(e=S(e)),t(e)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return a(n,t),n},setItem:function(e,t,i){var n=this;e=l(e);var r=new s((function(i,r){var o;n.ready().then((function(){return o=n._dbInfo,"[object Blob]"===p.call(t)?f(o.db).then((function(e){return e?t:(i=t,new s((function(e,t){var n=new FileReader;n.onerror=t,n.onloadend=function(t){var n=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:i.type})},n.readAsBinaryString(i)})));var i})):t})).then((function(t){T(n._dbInfo,"readwrite",(function(o,s){if(o)return r(o);try{var a=s.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var c=a.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),i(t)},s.onabort=s.onerror=function(){var e=c.error?c.error:c.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return a(r,i),r},removeItem:function(e,t){var i=this;e=l(e);var n=new s((function(t,n){i.ready().then((function(){T(i._dbInfo,"readwrite",(function(r,o){if(r)return n(r);try{var s=o.objectStore(i._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){n(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return a(n,t),n},clear:function(e){var t=this,i=new s((function(e,i){t.ready().then((function(){T(t._dbInfo,"readwrite",(function(n,r){if(n)return i(n);try{var o=r.objectStore(t._dbInfo.storeName).clear();r.oncomplete=function(){e()},r.onabort=r.onerror=function(){var e=o.error?o.error:o.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return a(i,e),i},length:function(e){var t=this,i=new s((function(e,i){t.ready().then((function(){T(t._dbInfo,"readonly",(function(n,r){if(n)return i(n);try{var o=r.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){i(o.error)}}catch(e){i(e)}}))})).catch(i)}));return a(i,e),i},key:function(e,t){var i=this,n=new s((function(t,n){e<0?t(null):i.ready().then((function(){T(i._dbInfo,"readonly",(function(r,o){if(r)return n(r);try{var s=o.objectStore(i._dbInfo.storeName),a=!1,c=s.openKeyCursor();c.onsuccess=function(){var i=c.result;i?0===e||a?t(i.key):(a=!0,i.advance(e)):t(null)},c.onerror=function(){n(c.error)}}catch(e){n(e)}}))})).catch(n)}));return a(n,t),n},keys:function(e){var t=this,i=new s((function(e,i){t.ready().then((function(){T(t._dbInfo,"readonly",(function(n,r){if(n)return i(n);try{var o=r.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];o.onsuccess=function(){var t=o.result;t?(s.push(t.key),t.continue()):e(s)},o.onerror=function(){i(o.error)}}catch(e){i(e)}}))})).catch(i)}));return a(i,e),i},dropInstance:function(e,t){t=u.apply(this,arguments);var i=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||i.name,e.storeName=e.storeName||i.storeName);var n,o=this;if(e.name){var c=e.name===i.name&&o._dbInfo.db,l=c?s.resolve(o._dbInfo.db):E(e).then((function(t){var i=h[e.name],n=i.forages;i.db=t;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=t;return t}));n=e.storeName?l.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var i=t.version+1;g(e);var n=h[e.name],o=n.forages;t.close();for(var a=0;a<o.length;a++){var c=o[a];c._dbInfo.db=null,c._dbInfo.version=i}return new s((function(t,n){var o=r.open(e.name,i);o.onerror=function(e){o.result.close(),n(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<o.length;t++){var i=o[t];i._dbInfo.db=e,m(i._dbInfo)}})).catch((function(t){throw(_(e,t)||s.resolve()).catch((function(){})),t}))}})):l.then((function(t){g(e);var i=h[e.name],n=i.forages;t.close();for(var o=0;o<n.length;o++)n[o]._dbInfo.db=null;return new s((function(t,i){var n=r.deleteDatabase(e.name);n.onerror=n.onblocked=function(e){var t=n.result;t&&t.close(),i(e)},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}})).then((function(e){i.db=e;for(var t=0;t<n.length;t++)m(n[t]._dbInfo)})).catch((function(t){throw(_(e,t)||s.resolve()).catch((function(){})),t}))}))}else n=s.reject("Invalid arguments");return a(n,t),n}},R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=/^~~local_forage_type~([^~]+)~/,O="__lfsc__:".length,k=O+"arbf".length,N=Object.prototype.toString;function L(e){var t,i,n,r,o,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var l=new ArrayBuffer(s),u=new Uint8Array(l);for(t=0;t<a;t+=4)i=R.indexOf(e[t]),n=R.indexOf(e[t+1]),r=R.indexOf(e[t+2]),o=R.indexOf(e[t+3]),u[c++]=i<<2|n>>4,u[c++]=(15&n)<<4|r>>2,u[c++]=(3&r)<<6|63&o;return l}function P(e){var t,i=new Uint8Array(e),n="";for(t=0;t<i.length;t+=3)n+=R[i[t]>>2],n+=R[(3&i[t])<<4|i[t+1]>>4],n+=R[(15&i[t+1])<<2|i[t+2]>>6],n+=R[63&i[t+2]];return i.length%3==2?n=n.substring(0,n.length-1)+"=":i.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var D={serialize:function(e,t){var i="";if(e&&(i=N.call(e)),e&&("[object ArrayBuffer]"===i||e.buffer&&"[object ArrayBuffer]"===N.call(e.buffer))){var n,r="__lfsc__:";e instanceof ArrayBuffer?(n=e,r+="arbf"):(n=e.buffer,"[object Int8Array]"===i?r+="si08":"[object Uint8Array]"===i?r+="ui08":"[object Uint8ClampedArray]"===i?r+="uic8":"[object Int16Array]"===i?r+="si16":"[object Uint16Array]"===i?r+="ur16":"[object Int32Array]"===i?r+="si32":"[object Uint32Array]"===i?r+="ui32":"[object Float32Array]"===i?r+="fl32":"[object Float64Array]"===i?r+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(r+P(n))}else if("[object Blob]"===i){var o=new FileReader;o.onload=function(){var i="~~local_forage_type~"+e.type+"~"+P(this.result);t("__lfsc__:blob"+i)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(i){console.error("Couldn't convert value into a JSON string: ",e),t(null,i)}},deserialize:function(e){if("__lfsc__:"!==e.substring(0,O))return JSON.parse(e);var t,i=e.substring(k),n=e.substring(O,k);if("blob"===n&&w.test(i)){var r=i.match(w);t=r[1],i=i.substring(r[0].length)}var s=L(i);switch(n){case"arbf":return s;case"blob":return o([s],{type:t});case"si08":return new Int8Array(s);case"ui08":return new Uint8Array(s);case"uic8":return new Uint8ClampedArray(s);case"si16":return new Int16Array(s);case"ur16":return new Uint16Array(s);case"si32":return new Int32Array(s);case"ui32":return new Uint32Array(s);case"fl32":return new Float32Array(s);case"fl64":return new Float64Array(s);default:throw new Error("Unkown type: "+n)}},stringToBuffer:L,bufferToString:P};function M(e,t,i,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],i,n)}function x(e,t,i,n,r,o){e.executeSql(i,n,r,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?o(e,s):M(e,t,(function(){e.executeSql(i,n,r,o)}),o)}),o):o(e,s)}),o)}function B(e,t,i,n){var r=this;e=l(e);var o=new s((function(o,s){r.ready().then((function(){void 0===t&&(t=null);var a=t,c=r._dbInfo;c.serializer.serialize(t,(function(t,l){l?s(l):c.db.transaction((function(i){x(i,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(a)}),(function(e,t){s(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void o(B.apply(r,[e,a,i,n-1]));s(t)}}))}))})).catch(s)}));return a(o,i),o}function U(e){return new s((function(t,i){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(i,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).name);t({db:e,storeNames:r})}),(function(e,t){i(t)}))}),(function(e){i(e)}))}))}var F={_driver:"webSQLStorage",_initStorage:function(e){var t=this,i={db:null};if(e)for(var n in e)i[n]="string"!=typeof e[n]?e[n].toString():e[n];var r=new s((function(e,n){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(e){return n(e)}i.db.transaction((function(r){M(r,i,(function(){t._dbInfo=i,e()}),(function(e,t){n(t)}))}),n)}));return i.serializer=D,r},_support:"function"==typeof openDatabase,iterate:function(e,t){var i=this,n=new s((function(t,n){i.ready().then((function(){var r=i._dbInfo;r.db.transaction((function(i){x(i,r,"SELECT * FROM "+r.storeName,[],(function(i,n){for(var o=n.rows,s=o.length,a=0;a<s;a++){var c=o.item(a),l=c.value;if(l&&(l=r.serializer.deserialize(l)),void 0!==(l=e(l,c.key,a+1)))return void t(l)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},getItem:function(e,t){var i=this;e=l(e);var n=new s((function(t,n){i.ready().then((function(){var r=i._dbInfo;r.db.transaction((function(i){x(i,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,i){var n=i.rows.length?i.rows.item(0).value:null;n&&(n=r.serializer.deserialize(n)),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},setItem:function(e,t,i){return B.apply(this,[e,t,i,1])},removeItem:function(e,t){var i=this;e=l(e);var n=new s((function(t,n){i.ready().then((function(){var r=i._dbInfo;r.db.transaction((function(i){x(i,r,"DELETE FROM "+r.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},clear:function(e){var t=this,i=new s((function(e,i){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){x(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){i(t)}))}))})).catch(i)}));return a(i,e),i},length:function(e){var t=this,i=new s((function(e,i){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){x(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,i){var n=i.rows.item(0).c;e(n)}),(function(e,t){i(t)}))}))})).catch(i)}));return a(i,e),i},key:function(e,t){var i=this,n=new s((function(t,n){i.ready().then((function(){var r=i._dbInfo;r.db.transaction((function(i){x(i,r,"SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,i){var n=i.rows.length?i.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},keys:function(e){var t=this,i=new s((function(e,i){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){x(t,n,"SELECT key FROM "+n.storeName,[],(function(t,i){for(var n=[],r=0;r<i.rows.length;r++)n.push(i.rows.item(r).key);e(n)}),(function(e,t){i(t)}))}))})).catch(i)}));return a(i,e),i},dropInstance:function(e,t){t=u.apply(this,arguments);var i=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||i.name,e.storeName=e.storeName||i.storeName);var n,r=this;return a(n=e.name?new s((function(t){var n;n=e.name===i.name?r._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(U(n))})).then((function(e){return new s((function(t,i){e.db.transaction((function(n){function r(e){return new s((function(t,i){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){i(t)}))}))}for(var o=[],a=0,c=e.storeNames.length;a<c;a++)o.push(r(e.storeNames[a]));s.all(o).then((function(){t()})).catch((function(e){i(e)}))}),(function(e){i(e)}))}))})):s.reject("Invalid arguments"),t),n}};function V(e,t){var i=e.name+"/";return e.storeName!==t.storeName&&(i+=e.storeName+"/"),i}function j(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0}var G={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var i in e)t[i]=e[i];return t.keyPrefix=V(e,this._defaultConfig),j()?(this._dbInfo=t,t.serializer=D,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var i=this,n=i.ready().then((function(){for(var t=i._dbInfo,n=t.keyPrefix,r=n.length,o=localStorage.length,s=1,a=0;a<o;a++){var c=localStorage.key(a);if(0===c.indexOf(n)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,c.substring(r),s++)))return l}}}));return a(n,t),n},getItem:function(e,t){var i=this;e=l(e);var n=i.ready().then((function(){var t=i._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return a(n,t),n},setItem:function(e,t,i){var n=this;e=l(e);var r=n.ready().then((function(){void 0===t&&(t=null);var i=t;return new s((function(r,o){var s=n._dbInfo;s.serializer.serialize(t,(function(t,n){if(n)o(n);else try{localStorage.setItem(s.keyPrefix+e,t),r(i)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return a(r,i),r},removeItem:function(e,t){var i=this;e=l(e);var n=i.ready().then((function(){var t=i._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return a(n,t),n},clear:function(e){var t=this,i=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var n=localStorage.key(i);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return a(i,e),i},length:function(e){var t=this.keys().then((function(e){return e.length}));return a(t,e),t},key:function(e,t){var i=this,n=i.ready().then((function(){var t,n=i._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return a(n,t),n},keys:function(e){var t=this,i=t.ready().then((function(){for(var e=t._dbInfo,i=localStorage.length,n=[],r=0;r<i;r++){var o=localStorage.key(r);0===o.indexOf(e.keyPrefix)&&n.push(o.substring(e.keyPrefix.length))}return n}));return a(i,e),i},dropInstance:function(e,t){if(t=u.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var i=this.config();e.name=e.name||i.name,e.storeName=e.storeName||i.storeName}var n,r=this;return a(n=e.name?new s((function(t){e.storeName?t(V(e,r._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var i=localStorage.key(t);0===i.indexOf(e)&&localStorage.removeItem(i)}})):s.reject("Invalid arguments"),t),n}},H=function(e,t){for(var i,n,r=e.length,o=0;o<r;){if((i=e[o])===(n=t)||"number"==typeof i&&"number"==typeof n&&isNaN(i)&&isNaN(n))return!0;o++}return!1},Q=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},W={},q={},$={INDEXEDDB:I,WEBSQL:F,LOCALSTORAGE:G},z=[$.INDEXEDDB._driver,$.WEBSQL._driver,$.LOCALSTORAGE._driver],Z=["dropInstance"],Y=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Z),K={description:"",driver:z.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function J(e,t){e[t]=function(){var i=arguments;return e.ready().then((function(){return e[t].apply(e,i)}))}}function X(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var i in t)t.hasOwnProperty(i)&&(Q(t[i])?arguments[0][i]=t[i].slice():arguments[0][i]=t[i])}return arguments[0]}var ee=new(function(){function e(t){for(var i in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$)if($.hasOwnProperty(i)){var n=$[i],r=n._driver;this[i]=r,W[r]||this.defineDriver(n)}this._defaultConfig=X({},K),this._config=X({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,i){var n=new s((function(t,i){try{var n=e._driver,r=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void i(r);for(var o=Y.concat("_initStorage"),c=0,l=o.length;c<l;c++){var u=o[c];if((!H(Z,u)||e[u])&&"function"!=typeof e[u])return void i(r)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),i=s.reject(t);return a(i,arguments[arguments.length-1]),i}},i=0,n=Z.length;i<n;i++){var r=Z[i];e[r]||(e[r]=t(r))}}();var d=function(i){W[n]&&console.info("Redefining LocalForage driver: "+n),W[n]=e,q[n]=i,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,i):d(!!e._support):d(!0)}catch(e){i(e)}}));return c(n,t,i),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,i){var n=W[e]?s.resolve(W[e]):s.reject(new Error("Driver not found."));return c(n,t,i),n},e.prototype.getSerializer=function(e){var t=s.resolve(D);return c(t,e),t},e.prototype.ready=function(e){var t=this,i=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(i,e,e),i},e.prototype.setDriver=function(e,t,i){var n=this;Q(e)||(e=[e]);var r=this._getSupportedDrivers(e);function o(){n._config.driver=n.driver()}function a(e){return n._extend(e),o(),n._ready=n._initStorage(n._config),n._ready}var l=null!==this._driverSet?this._driverSet.catch((function(){return s.resolve()})):s.resolve();return this._driverSet=l.then((function(){var e=r[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((function(e){n._driver=e._driver,o(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(e){return function(){var t=0;return function i(){for(;t<e.length;){var r=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(r).then(a).catch(i)}o();var c=new Error("No available storage method found.");return n._driverSet=s.reject(c),n._driverSet}()}}(r)}))})).catch((function(){o();var e=new Error("No available storage method found.");return n._driverSet=s.reject(e),n._driverSet})),c(this._driverSet,t,i),this._driverSet},e.prototype.supports=function(e){return!!q[e]},e.prototype._extend=function(e){X(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i];this.supports(r)&&t.push(r)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=Y.length;e<t;e++)J(this,Y[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ee},{3:3}]},{},[4])(4)}).call(this,i(35))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i}])}))},d2bb:function(e,t,i){var n=i("e330"),r=i("825a"),o=i("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{e=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(i,[]),t=i instanceof Array}catch(s){}return function(i,n){return r(i),o(n),t?e(i,n):i.__proto__=n,i}}():void 0)},d397:function(e,t,i){"use strict";function n(e){return void 0!==e&&null!==e}function r(e){var t=/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi;return t.test(e)}t.__esModule=!0,t.isDef=n,t.isKorean=r},d3b7:function(e,t,i){var n=i("00ee"),r=i("6eeb"),o=i("b041");n||r(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(e,t,i){var n=i("9bf2").f,r=i("1a2d"),o=i("b622"),s=o("toStringTag");e.exports=function(e,t,i){e&&!i&&(e=e.prototype),e&&!r(e,s)&&n(e,s,{configurable:!0,value:t})}},d4af:function(e,t,i){"use strict";var n=i("8eb7"),r=i("7b3e"),o=10,s=40,a=800;function c(e){var t=0,i=0,n=0,r=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),n=t*o,r=i*o,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||r)&&e.deltaMode&&(1==e.deltaMode?(n*=s,r*=s):(n*=a,r*=a)),n&&!t&&(t=n<1?-1:1),r&&!i&&(i=r<1?-1:1),{spinX:t,spinY:i,pixelX:n,pixelY:r}}c.getEventType=function(){return n.firefox()?"DOMMouseScroll":r("wheel")?"wheel":"mousewheel"},e.exports=c},d4c3:function(e,t,i){var n=i("342f"),r=i("da84");e.exports=/ipad|iphone|ipod/i.test(n)&&void 0!==r.Pebble},d4ec:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));i("d9e2");function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},d58f:function(e,t,i){var n=i("da84"),r=i("59ed"),o=i("7b0b"),s=i("44ad"),a=i("07fa"),c=n.TypeError,l=function(e){return function(t,i,n,l){r(i);var u=o(t),d=s(u),h=a(u),p=e?h-1:0,f=e?-1:1;if(n<2)while(1){if(p in d){l=d[p],p+=f;break}if(p+=f,e?p<0:h<=p)throw c("Reduce of empty array with no initial value")}for(;e?p>=0:h>p;p+=f)p in d&&(l=i(l,d[p],p,u));return l}};e.exports={left:l(!1),right:l(!0)}},d5d6:function(e,t,i){"use strict";var n=i("ebb5"),r=i("b727").forEach,o=n.aTypedArray,s=n.exportTypedArrayMethod;s("forEach",(function(e){r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},d6d6:function(e,t,i){var n=i("da84"),r=n.TypeError;e.exports=function(e,t){if(e<t)throw r("Not enough arguments");return e}},d784:function(e,t,i){"use strict";i("ac1f");var n=i("e330"),r=i("6eeb"),o=i("9263"),s=i("d039"),a=i("b622"),c=i("9112"),l=a("species"),u=RegExp.prototype;e.exports=function(e,t,i,d){var h=a(e),p=!s((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),f=p&&!s((function(){var t=!1,i=/a/;return"split"===e&&(i={},i.constructor={},i.constructor[l]=function(){return i},i.flags="",i[h]=/./[h]),i.exec=function(){return t=!0,null},i[h](""),!t}));if(!p||!f||i){var g=n(/./[h]),m=t(h,""[e],(function(e,t,i,r,s){var a=n(e),c=t.exec;return c===o||c===u.exec?p&&!s?{done:!0,value:g(t,i,r)}:{done:!0,value:a(i,t,r)}:{done:!1}}));r(String.prototype,e,m[0]),r(u,h,m[1])}d&&c(u[h],"sham",!0)}},d7d1:function(e,t,i){"use strict";var n;(function(r){var o={},s=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,a="\\d\\d?",c="\\d{3}",l="\\d{4}",u="[^\\s]+",d=/\[([^]*?)\]/gm,h=function(){};function p(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")}function f(e,t){for(var i=[],n=0,r=e.length;n<r;n++)i.push(e[n].substr(0,t));return i}function g(e){return function(t,i,n){var r=n[e].indexOf(i.charAt(0).toUpperCase()+i.substr(1).toLowerCase());~r&&(t.month=r)}}function m(e,t){e=String(e),t=t||2;while(e.length<t)e="0"+e;return e}var _=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],v=["January","February","March","April","May","June","July","August","September","October","November","December"],E=f(v,3),A=f(_,3);o.i18n={dayNamesShort:A,dayNames:_,monthNamesShort:E,monthNames:v,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10)*e%10]}};var y={D:function(e){return e.getDay()},DD:function(e){return m(e.getDay())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return e.getDate()},dd:function(e){return m(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return m(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return m(String(e.getFullYear()),4).substr(2)},yyyy:function(e){return m(e.getFullYear(),4)},h:function(e){return e.getHours()%12||12},hh:function(e){return m(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return m(e.getHours())},m:function(e){return e.getMinutes()},mm:function(e){return m(e.getMinutes())},s:function(e){return e.getSeconds()},ss:function(e){return m(e.getSeconds())},S:function(e){return Math.round(e.getMilliseconds()/100)},SS:function(e){return m(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return m(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+m(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)}},S={d:[a,function(e,t){e.day=t}],Do:[a+u,function(e,t){e.day=parseInt(t,10)}],M:[a,function(e,t){e.month=t-1}],yy:[a,function(e,t){var i=new Date,n=+(""+i.getFullYear()).substr(0,2);e.year=""+(t>68?n-1:n)+t}],h:[a,function(e,t){e.hour=t}],m:[a,function(e,t){e.minute=t}],s:[a,function(e,t){e.second=t}],yyyy:[l,function(e,t){e.year=t}],S:["\\d",function(e,t){e.millisecond=100*t}],SS:["\\d{2}",function(e,t){e.millisecond=10*t}],SSS:[c,function(e,t){e.millisecond=t}],D:[a,h],ddd:[u,h],MMM:[u,g("monthNamesShort")],MMMM:[u,g("monthNames")],a:[u,function(e,t,i){var n=t.toLowerCase();n===i.amPm[0]?e.isPm=!1:n===i.amPm[1]&&(e.isPm=!0)}],ZZ:["[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z",function(e,t){var i,n=(t+"").match(/([+-]|\d\d)/gi);n&&(i=60*n[1]+parseInt(n[2],10),e.timezoneOffset="+"===n[0]?i:-i)}]};S.dd=S.d,S.dddd=S.ddd,S.DD=S.D,S.mm=S.m,S.hh=S.H=S.HH=S.h,S.MM=S.M,S.ss=S.s,S.A=S.a,o.masks={default:"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/D/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},o.format=function(e,t,i){var n=i||o.i18n;if("number"===typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date in fecha.format");t=o.masks[t]||t||o.masks["default"];var r=[];return t=t.replace(d,(function(e,t){return r.push(t),"@@@"})),t=t.replace(s,(function(t){return t in y?y[t](e,n):t.slice(1,t.length-1)})),t.replace(/@@@/g,(function(){return r.shift()}))},o.parse=function(e,t,i){var n=i||o.i18n;if("string"!==typeof t)throw new Error("Invalid format in fecha.parse");if(t=o.masks[t]||t,e.length>1e3)return null;var r={},a=[],c=[];t=t.replace(d,(function(e,t){return c.push(t),"@@@"}));var l=p(t).replace(s,(function(e){if(S[e]){var t=S[e];return a.push(t[1]),"("+t[0]+")"}return e}));l=l.replace(/@@@/g,(function(){return c.shift()}));var u=e.match(new RegExp(l,"i"));if(!u)return null;for(var h=1;h<u.length;h++)a[h-1](r,u[h],n);var f,g=new Date;return!0===r.isPm&&null!=r.hour&&12!==+r.hour?r.hour=+r.hour+12:!1===r.isPm&&12===+r.hour&&(r.hour=0),null!=r.timezoneOffset?(r.minute=+(r.minute||0)-+r.timezoneOffset,f=new Date(Date.UTC(r.year||g.getFullYear(),r.month||0,r.day||1,r.hour||0,r.minute||0,r.second||0,r.millisecond||0))):f=new Date(r.year||g.getFullYear(),r.month||0,r.day||1,r.hour||0,r.minute||0,r.second||0,r.millisecond||0),f},e.exports?e.exports=o:(n=function(){return o}.call(t,i,t,e),void 0===n||(e.exports=n))})()},d81d:function(e,t,i){"use strict";var n=i("23e7"),r=i("b727").map,o=i("1dde"),s=o("map");n({target:"Array",proto:!0,forced:!s},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},d86b:function(e,t,i){var n=i("d039");e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},d925:function(e,t,i){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},d940:function(e,t,i){"use strict";t.__esModule=!0,t.validateRangeInOneMonth=t.extractTimeFormat=t.extractDateFormat=t.nextYear=t.prevYear=t.nextMonth=t.prevMonth=t.changeYearMonthAndClampDate=t.timeWithinRange=t.limitTimeRange=t.clearMilliseconds=t.clearTime=t.modifyWithTimeString=t.modifyTime=t.modifyDate=t.range=t.getRangeMinutes=t.getMonthDays=t.getPrevMonthLastDays=t.getRangeHours=t.getWeekNumber=t.getStartDateOfMonth=t.nextDate=t.prevDate=t.getFirstDayOfMonth=t.getDayCountOfYear=t.getDayCountOfMonth=t.parseDate=t.formatDate=t.isDateObject=t.isDate=t.toDate=t.getI18nSettings=void 0;var n=i("d7d1"),r=s(n),o=i("4897");function s(e){return e&&e.__esModule?e:{default:e}}var a=["sun","mon","tue","wed","thu","fri","sat"],c=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],l=function(e,t){for(var i=[],n=e;n<=t;n++)i.push(n);return i},u=t.getI18nSettings=function(){return{dayNamesShort:a.map((function(e){return(0,o.t)("el.datepicker.weeks."+e)})),dayNames:a.map((function(e){return(0,o.t)("el.datepicker.weeks."+e)})),monthNamesShort:c.map((function(e){return(0,o.t)("el.datepicker.months."+e)})),monthNames:c.map((function(e,t){return(0,o.t)("el.datepicker.month"+(t+1))})),amPm:["am","pm"]}},d=t.toDate=function(e){return h(e)?new Date(e):null},h=t.isDate=function(e){return null!==e&&void 0!==e&&(!isNaN(new Date(e).getTime())&&!Array.isArray(e))},p=(t.isDateObject=function(e){return e instanceof Date},t.formatDate=function(e,t){return e=d(e),e?r.default.format(e,t||"yyyy-MM-dd",u()):""},t.parseDate=function(e,t){return r.default.parse(e,t||"yyyy-MM-dd",u())}),f=t.getDayCountOfMonth=function(e,t){return 3===t||5===t||8===t||10===t?30:1===t?e%4===0&&e%100!==0||e%400===0?29:28:31},g=(t.getDayCountOfYear=function(e){var t=e%400===0||e%100!==0&&e%4===0;return t?366:365},t.getFirstDayOfMonth=function(e){var t=new Date(e.getTime());return t.setDate(1),t.getDay()},t.prevDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(e.getFullYear(),e.getMonth(),e.getDate()-t)});t.nextDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},t.getStartDateOfMonth=function(e,t){var i=new Date(e,t,1),n=i.getDay();return g(i,0===n?7:n)},t.getWeekNumber=function(e){if(!h(e))return null;var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var i=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-i.getTime())/864e5-3+(i.getDay()+6)%7)/7)},t.getRangeHours=function(e){var t=[],i=[];if((e||[]).forEach((function(e){var t=e.map((function(e){return e.getHours()}));i=i.concat(l(t[0],t[1]))})),i.length)for(var n=0;n<24;n++)t[n]=-1===i.indexOf(n);else for(var r=0;r<24;r++)t[r]=!1;return t},t.getPrevMonthLastDays=function(e,t){if(t<=0)return[];var i=new Date(e.getTime());i.setDate(0);var n=i.getDate();return _(t).map((function(e,i){return n-(t-i-1)}))},t.getMonthDays=function(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),i=t.getDate();return _(i).map((function(e,t){return t+1}))};function m(e,t,i,n){for(var r=t;r<i;r++)e[r]=n}t.getRangeMinutes=function(e,t){var i=new Array(60);return e.length>0?e.forEach((function(e){var n=e[0],r=e[1],o=n.getHours(),s=n.getMinutes(),a=r.getHours(),c=r.getMinutes();o===t&&a!==t?m(i,s,60,!0):o===t&&a===t?m(i,s,c+1,!0):o!==t&&a===t?m(i,0,c+1,!0):o<t&&a>t&&m(i,0,60,!0)})):m(i,0,60,!0),i};var _=t.range=function(e){return Array.apply(null,{length:e}).map((function(e,t){return t}))},v=t.modifyDate=function(e,t,i,n){return new Date(t,i,n,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},E=t.modifyTime=function(e,t,i,n){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t,i,n,e.getMilliseconds())},A=(t.modifyWithTimeString=function(e,t){return null!=e&&t?(t=p(t,"HH:mm:ss"),E(e,t.getHours(),t.getMinutes(),t.getSeconds())):e},t.clearTime=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},t.clearMilliseconds=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),0)},t.limitTimeRange=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"HH:mm:ss";if(0===t.length)return e;var n=function(e){return r.default.parse(r.default.format(e,i),i)},o=n(e),s=t.map((function(e){return e.map(n)}));if(s.some((function(e){return o>=e[0]&&o<=e[1]})))return e;var a=s[0][0],c=s[0][0];s.forEach((function(e){a=new Date(Math.min(e[0],a)),c=new Date(Math.max(e[1],a))}));var l=o<a?a:c;return v(l,e.getFullYear(),e.getMonth(),e.getDate())}),y=(t.timeWithinRange=function(e,t,i){var n=A(e,t,i);return n.getTime()===e.getTime()},t.changeYearMonthAndClampDate=function(e,t,i){var n=Math.min(e.getDate(),f(t,i));return v(e,t,i,n)});t.prevMonth=function(e){var t=e.getFullYear(),i=e.getMonth();return 0===i?y(e,t-1,11):y(e,t,i-1)},t.nextMonth=function(e){var t=e.getFullYear(),i=e.getMonth();return 11===i?y(e,t+1,0):y(e,t,i+1)},t.prevYear=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e.getFullYear(),n=e.getMonth();return y(e,i-t,n)},t.nextYear=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e.getFullYear(),n=e.getMonth();return y(e,i+t,n)},t.extractDateFormat=function(e){return e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim()},t.extractTimeFormat=function(e){return e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?y{2,4}/g,"").trim()},t.validateRangeInOneMonth=function(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}},d998:function(e,t,i){var n=i("342f");e.exports=/MSIE|Trident/.test(n)},d9b5:function(e,t,i){var n=i("da84"),r=i("d066"),o=i("1626"),s=i("3a9b"),a=i("fdbf"),c=n.Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return o(t)&&s(t.prototype,c(e))}},d9e2:function(e,t,i){var n=i("23e7"),r=i("da84"),o=i("2ba4"),s=i("e5cb"),a="WebAssembly",c=r[a],l=7!==Error("e",{cause:7}).cause,u=function(e,t){var i={};i[e]=s(e,t,l),n({global:!0,forced:l},i)},d=function(e,t){if(c&&c[e]){var i={};i[e]=s(a+"."+e,t,l),n({target:a,stat:!0,forced:l},i)}};u("Error",(function(e){return function(t){return o(e,this,arguments)}})),u("EvalError",(function(e){return function(t){return o(e,this,arguments)}})),u("RangeError",(function(e){return function(t){return o(e,this,arguments)}})),u("ReferenceError",(function(e){return function(t){return o(e,this,arguments)}})),u("SyntaxError",(function(e){return function(t){return o(e,this,arguments)}})),u("TypeError",(function(e){return function(t){return o(e,this,arguments)}})),u("URIError",(function(e){return function(t){return o(e,this,arguments)}})),d("CompileError",(function(e){return function(t){return o(e,this,arguments)}})),d("LinkError",(function(e){return function(t){return o(e,this,arguments)}})),d("RuntimeError",(function(e){return function(t){return o(e,this,arguments)}}))},da84:function(e,t,i){(function(t){var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,i("c8ba"))},dc4a:function(e,t,i){var n=i("59ed");e.exports=function(e,t){var i=e[t];return null==i?void 0:n(i)}},dca8:function(e,t,i){var n=i("23e7"),r=i("bb2f"),o=i("d039"),s=i("861d"),a=i("f183").onFreeze,c=Object.freeze,l=o((function(){c(1)}));n({target:"Object",stat:!0,forced:l,sham:!r},{freeze:function(e){return c&&s(e)?c(a(e)):e}})},dcdc:function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=120)}({0:function(e,t,i){"use strict";function n(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},120:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"el-checkbox",class:[e.border&&e.checkboxSize?"el-checkbox--"+e.checkboxSize:"",{"is-disabled":e.isDisabled},{"is-bordered":e.border},{"is-checked":e.isChecked}],attrs:{id:e.id}},[i("span",{staticClass:"el-checkbox__input",class:{"is-disabled":e.isDisabled,"is-checked":e.isChecked,"is-indeterminate":e.indeterminate,"is-focus":e.focus},attrs:{tabindex:!!e.indeterminate&&0,role:!!e.indeterminate&&"checkbox","aria-checked":!!e.indeterminate&&"mixed"}},[i("span",{staticClass:"el-checkbox__inner"}),e.trueLabel||e.falseLabel?i("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var i=e.model,n=t.target,r=n.checked?e.trueLabel:e.falseLabel;if(Array.isArray(i)){var o=null,s=e._i(i,o);n.checked?s<0&&(e.model=i.concat([o])):s>-1&&(e.model=i.slice(0,s).concat(i.slice(s+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var i=e.model,n=t.target,r=!!n.checked;if(Array.isArray(i)){var o=e.label,s=e._i(i,o);n.checked?s<0&&(e.model=i.concat([o])):s>-1&&(e.model=i.slice(0,s).concat(i.slice(s+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})]),e.$slots.default||e.label?i("span",{staticClass:"el-checkbox__label"},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])},r=[];n._withStripped=!0;var o=i(4),s=i.n(o),a={name:"ElCheckbox",mixins:[s.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):(this.$emit("input",e),this.selfModel=e)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){var e=this.$parent;while(e){if("ElCheckboxGroup"===e.$options.componentName)return this._checkboxGroup=e,!0;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var e=this._checkboxGroup,t=e.max,i=e.min;return!(!t&&!i)&&this.model.length>=t&&!this.isChecked||this.model.length<=i&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||e}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;if(!this.isLimitExceeded){var i=void 0;i=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",i,e),this.$nextTick((function(){t.isGroup&&t.dispatch("ElCheckboxGroup","change",[t._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}}},c=a,l=i(0),u=Object(l["a"])(c,n,r,!1,null,null,null);u.options.__file="packages/checkbox/src/checkbox.vue";var d=u.exports;d.install=function(e){e.component(d.name,d)};t["default"]=d},4:function(e,t){e.exports=i("d010")}})},ddb0:function(e,t,i){var n=i("da84"),r=i("fdbc"),o=i("785a"),s=i("e260"),a=i("9112"),c=i("b622"),l=c("iterator"),u=c("toStringTag"),d=s.values,h=function(e,t){if(e){if(e[l]!==d)try{a(e,l,d)}catch(n){e[l]=d}if(e[u]||a(e,u,t),r[t])for(var i in s)if(e[i]!==s[i])try{a(e,i,s[i])}catch(n){e[i]=s[i]}}};for(var p in r)h(n[p]&&n[p].prototype,p);h(o,"DOMTokenList")},df75:function(e,t,i){var n=i("ca84"),r=i("7839");e.exports=Object.keys||function(e){return n(e,r)}},df7c:function(e,t,i){(function(e){function i(e,t){for(var i=0,n=e.length-1;n>=0;n--){var r=e[n];"."===r?e.splice(n,1):".."===r?(e.splice(n,1),i++):i&&(e.splice(n,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}function n(e){"string"!==typeof e&&(e+="");var t,i=0,n=-1,r=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!r){i=t+1;break}}else-1===n&&(r=!1,n=t+1);return-1===n?"":e.slice(i,n)}function r(e,t){if(e.filter)return e.filter(t);for(var i=[],n=0;n<e.length;n++)t(e[n],n,e)&&i.push(e[n]);return i}t.resolve=function(){for(var t="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,n="/"===s.charAt(0))}return t=i(r(t.split("/"),(function(e){return!!e})),!n).join("/"),(n?"/":"")+t||"."},t.normalize=function(e){var n=t.isAbsolute(e),s="/"===o(e,-1);return e=i(r(e.split("/"),(function(e){return!!e})),!n).join("/"),e||n||(e="."),e&&s&&(e+="/"),(n?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,i){function n(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var i=e.length-1;i>=0;i--)if(""!==e[i])break;return t>i?[]:e.slice(t,i-t+1)}e=t.resolve(e).substr(1),i=t.resolve(i).substr(1);for(var r=n(e.split("/")),o=n(i.split("/")),s=Math.min(r.length,o.length),a=s,c=0;c<s;c++)if(r[c]!==o[c]){a=c;break}var l=[];for(c=a;c<r.length;c++)l.push("..");return l=l.concat(o.slice(a)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),i=47===t,n=-1,r=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),47===t){if(!r){n=o;break}}else r=!1;return-1===n?i?"/":".":i&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var i=n(e);return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,i=0,n=-1,r=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===n&&(r=!1,n=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!r){i=s+1;break}}return-1===t||-1===n||0===o||1===o&&t===n-1&&t===i+1?"":e.slice(t,n)};var o="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return t<0&&(t=e.length+t),e.substr(t,i)}}).call(this,i("4362"))},dfb9:function(e,t,i){var n=i("07fa");e.exports=function(e,t){var i=0,r=n(t),o=new e(r);while(r>i)o[i]=t[i++];return o}},dfe5:function(e,t){},e01a:function(e,t,i){"use strict";var n=i("23e7"),r=i("83ab"),o=i("da84"),s=i("e330"),a=i("1a2d"),c=i("1626"),l=i("3a9b"),u=i("577e"),d=i("9bf2").f,h=i("e893"),p=o.Symbol,f=p&&p.prototype;if(r&&c(p)&&(!("description"in f)||void 0!==p().description)){var g={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=l(f,this)?new p(e):void 0===e?p():p(e);return""===e&&(g[t]=!0),t};h(m,p),m.prototype=f,f.constructor=m;var _="Symbol(test)"==String(p("test")),v=s(f.toString),E=s(f.valueOf),A=/^Symbol\((.*)\)[^)]+$/,y=s("".replace),S=s("".slice);d(f,"description",{configurable:!0,get:function(){var e=E(this),t=v(e);if(a(g,e))return"";var i=_?S(t,7,-1):y(t,A,"$1");return""===i?void 0:i}}),n({global:!0,forced:!0},{Symbol:m})}},e163:function(e,t,i){var n=i("da84"),r=i("1a2d"),o=i("1626"),s=i("7b0b"),a=i("f772"),c=i("e177"),l=a("IE_PROTO"),u=n.Object,d=u.prototype;e.exports=c?u.getPrototypeOf:function(e){var t=s(e);if(r(t,l))return t[l];var i=t.constructor;return o(i)&&t instanceof i?i.prototype:t instanceof u?d:null}},e177:function(e,t,i){var n=i("d039");e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e198:function(e,t,i){var n=i("ef08"),r=i("5524"),o=i("e444"),s=i("fcd4"),a=i("1a14").f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},e260:function(e,t,i){"use strict";var n=i("fc6a"),r=i("44d2"),o=i("3f8c"),s=i("69f3"),a=i("9bf2").f,c=i("7dd0"),l=i("c430"),u=i("83ab"),d="Array Iterator",h=s.set,p=s.getterFor(d);e.exports=c(Array,"Array",(function(e,t){h(this,{type:d,target:n(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values");var f=o.Arguments=o.Array;if(r("keys"),r("values"),r("entries"),!l&&u&&"values"!==f.name)try{a(f,"name",{value:"values"})}catch(g){}},e2cc:function(e,t,i){var n=i("6eeb");e.exports=function(e,t,i){for(var r in t)n(e,r,t[r],i);return e}},e330:function(e,t,i){var n=i("40d5"),r=Function.prototype,o=r.bind,s=r.call,a=n&&o.bind(s,s);e.exports=n?function(e){return e&&a(e)}:function(e){return e&&function(){return s.apply(e,arguments)}}},e34a:function(e,t,i){var n=i("8b1a")("meta"),r=i("7a41"),o=i("9c0e"),s=i("1a14").f,a=0,c=Object.isExtensible||function(){return!0},l=!i("4b8b")((function(){return c(Object.preventExtensions({}))})),u=function(e){s(e,n,{value:{i:"O"+ ++a,w:{}}})},d=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[n].i},h=function(e,t){if(!o(e,n)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[n].w},p=function(e){return l&&f.NEED&&c(e)&&!o(e,n)&&u(e),e},f=e.exports={KEY:n,NEED:!1,fastKey:d,getWeak:h,onFreeze:p}},e391:function(e,t,i){var n=i("577e");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},e3db:function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},e439:function(e,t,i){var n=i("23e7"),r=i("d039"),o=i("fc6a"),s=i("06cf").f,a=i("83ab"),c=r((function(){s(1)})),l=!a||c;n({target:"Object",stat:!0,forced:l,sham:!a},{getOwnPropertyDescriptor:function(e,t){return s(o(e),t)}})},e444:function(e,t){e.exports=!0},e450:function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=104)}({0:function(e,t,i){"use strict";function n(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},10:function(e,t){e.exports=i("f3ad")},104:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["el-input-number",e.inputNumberSize?"el-input-number--"+e.inputNumberSize:"",{"is-disabled":e.inputNumberDisabled},{"is-without-controls":!e.controls},{"is-controls-right":e.controlsAtRight}],on:{dragstart:function(e){e.preventDefault()}}},[e.controls?i("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":e.minDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.decrease(t)}}},[i("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-down":"minus")})]):e._e(),e.controls?i("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":e.maxDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.increase(t)}}},[i("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-up":"plus")})]):e._e(),i("el-input",{ref:"input",attrs:{value:e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label},on:{blur:e.handleBlur,focus:e.handleFocus,input:e.handleInput,change:e.handleInputChange},nativeOn:{keydown:[function(t){return!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.increase(t))},function(t){return!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.decrease(t))}]}})],1)},r=[];n._withStripped=!0;var o=i(10),s=i.n(o),a=i(22),c=i.n(a),l=i(30),u={name:"ElInputNumber",mixins:[c()("input")],inject:{elForm:{default:""},elFormItem:{default:""}},directives:{repeatClick:l["a"]},components:{ElInput:s.a},props:{step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String,placeholder:String,precision:{type:Number,validator:function(e){return e>=0&&e===parseInt(e,10)}}},data:function(){return{currentValue:0,userInput:null}},watch:{value:{immediate:!0,handler:function(e){var t=void 0===e?e:Number(e);if(void 0!==t){if(isNaN(t))return;if(this.stepStrictly){var i=this.getPrecision(this.step),n=Math.pow(10,i);t=Math.round(t/this.step)*n*this.step/n}void 0!==this.precision&&(t=this.toPrecision(t,this.precision))}t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),this.currentValue=t,this.userInput=null,this.$emit("input",t)}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},numPrecision:function(){var e=this.value,t=this.step,i=this.getPrecision,n=this.precision,r=i(t);return void 0!==n?(r>n&&console.warn("[Element Warn][InputNumber]precision should not be less than the decimal places of step"),n):Math.max(i(e),r)},controlsAtRight:function(){return this.controls&&"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputNumberDisabled:function(){return this.disabled||!!(this.elForm||{}).disabled},displayValue:function(){if(null!==this.userInput)return this.userInput;var e=this.currentValue;if("number"===typeof e){if(this.stepStrictly){var t=this.getPrecision(this.step),i=Math.pow(10,t);e=Math.round(e/this.step)*i*this.step/i}void 0!==this.precision&&(e=e.toFixed(this.precision))}return e}},methods:{toPrecision:function(e,t){return void 0===t&&(t=this.numPrecision),parseFloat(Math.round(e*Math.pow(10,t))/Math.pow(10,t))},getPrecision:function(e){if(void 0===e)return 0;var t=e.toString(),i=t.indexOf("."),n=0;return-1!==i&&(n=t.length-i-1),n},_increase:function(e,t){if("number"!==typeof e&&void 0!==e)return this.currentValue;var i=Math.pow(10,this.numPrecision);return this.toPrecision((i*e+i*t)/i)},_decrease:function(e,t){if("number"!==typeof e&&void 0!==e)return this.currentValue;var i=Math.pow(10,this.numPrecision);return this.toPrecision((i*e-i*t)/i)},increase:function(){if(!this.inputNumberDisabled&&!this.maxDisabled){var e=this.value||0,t=this._increase(e,this.step);this.setCurrentValue(t)}},decrease:function(){if(!this.inputNumberDisabled&&!this.minDisabled){var e=this.value||0,t=this._decrease(e,this.step);this.setCurrentValue(t)}},handleBlur:function(e){this.$emit("blur",e)},handleFocus:function(e){this.$emit("focus",e)},setCurrentValue:function(e){var t=this.currentValue;"number"===typeof e&&void 0!==this.precision&&(e=this.toPrecision(e,this.precision)),e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),t!==e&&(this.userInput=null,this.$emit("input",e),this.$emit("change",e,t),this.currentValue=e)},handleInput:function(e){this.userInput=e},handleInputChange:function(e){var t=""===e?void 0:Number(e);isNaN(t)&&""!==e||this.setCurrentValue(t),this.userInput=null},select:function(){this.$refs.input.select()}},mounted:function(){var e=this.$refs.input.$refs.input;e.setAttribute("role","spinbutton"),e.setAttribute("aria-valuemax",this.max),e.setAttribute("aria-valuemin",this.min),e.setAttribute("aria-valuenow",this.currentValue),e.setAttribute("aria-disabled",this.inputNumberDisabled)},updated:function(){if(this.$refs&&this.$refs.input){var e=this.$refs.input.$refs.input;e.setAttribute("aria-valuenow",this.currentValue)}}},d=u,h=i(0),p=Object(h["a"])(d,n,r,!1,null,null,null);p.options.__file="packages/input-number/src/input-number.vue";var f=p.exports;f.install=function(e){e.component(f.name,f)};t["default"]=f},2:function(e,t){e.exports=i("5924")},22:function(e,t){e.exports=i("12f2")},30:function(e,t,i){"use strict";var n=i(2);t["a"]={bind:function(e,t,i){var r=null,o=void 0,s=function(){return i.context[t.expression].apply()},a=function(){Date.now()-o<100&&s(),clearInterval(r),r=null};Object(n["on"])(e,"mousedown",(function(e){0===e.button&&(o=Date.now(),Object(n["once"])(document,"mouseup",a),clearInterval(r),r=setInterval(s,100))}))}}}})},e452:function(e,t,i){"use strict";t.__esModule=!0;var n=n||{};n.Utils=n.Utils||{},n.Utils.focusFirstDescendant=function(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];if(n.Utils.attemptFocus(i)||n.Utils.focusFirstDescendant(i))return!0}return!1},n.Utils.focusLastDescendant=function(e){for(var t=e.childNodes.length-1;t>=0;t--){var i=e.childNodes[t];if(n.Utils.attemptFocus(i)||n.Utils.focusLastDescendant(i))return!0}return!1},n.Utils.attemptFocus=function(e){if(!n.Utils.isFocusable(e))return!1;n.Utils.IgnoreUtilFocusChanges=!0;try{e.focus()}catch(t){}return n.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===e},n.Utils.isFocusable=function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},n.Utils.triggerEvent=function(e,t){var i=void 0;i=/^mouse|click/.test(t)?"MouseEvents":/^key/.test(t)?"KeyboardEvent":"HTMLEvents";for(var n=document.createEvent(i),r=arguments.length,o=Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];return n.initEvent.apply(n,[t].concat(o)),e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+t,n),e},n.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27},t.default=n.Utils},e507:function(e,t,i){var n=i("512c");n(n.S+n.F,"Object",{assign:i("072d")})},e538:function(e,t,i){var n=i("b622");t.f=n},e58c:function(e,t,i){"use strict";var n=i("2ba4"),r=i("fc6a"),o=i("5926"),s=i("07fa"),a=i("a640"),c=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,d=a("lastIndexOf"),h=u||!d;e.exports=h?function(e){if(u)return n(l,this,arguments)||0;var t=r(this),i=s(t),a=i-1;for(arguments.length>1&&(a=c(a,o(arguments[1]))),a<0&&(a=i+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:l},e5cb:function(e,t,i){"use strict";var n=i("d066"),r=i("1a2d"),o=i("9112"),s=i("3a9b"),a=i("d2bb"),c=i("e893"),l=i("7156"),u=i("e391"),d=i("ab36"),h=i("c770"),p=i("b980"),f=i("c430");e.exports=function(e,t,i,g){var m=g?2:1,_=e.split("."),v=_[_.length-1],E=n.apply(null,_);if(E){var A=E.prototype;if(!f&&r(A,"cause")&&delete A.cause,!i)return E;var y=n("Error"),S=t((function(e,t){var i=u(g?t:e,void 0),n=g?new E(e):new E;return void 0!==i&&o(n,"message",i),p&&o(n,"stack",h(n.stack,2)),this&&s(A,this)&&l(n,this,S),arguments.length>m&&d(n,arguments[m]),n}));if(S.prototype=A,"Error"!==v&&(a?a(S,y):c(S,y,{name:!0})),c(S,E),!f)try{A.name!==v&&o(A,"name",v),A.constructor=S}catch(C){}return S}}},e62d:function(e,t,i){"use strict";t.__esModule=!0,t.default=function(){if(r.default.prototype.$isServer)return 0;if(void 0!==s)return s;var e=document.createElement("div");e.className="el-scrollbar__wrap",e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var i=document.createElement("div");i.style.width="100%",e.appendChild(i);var n=i.offsetWidth;return e.parentNode.removeChild(e),s=t-n,s};var n=i("2b0e"),r=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var s=void 0},e667:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e671:function(e,t,i){(function(t,i){!function(t,i){e.exports=i()}(0,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function n(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&i.path)}},i.exports),i.exports}var r=function(e){return e&&e.Math==Math&&e},o=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||Function("return this")(),s=function(e){try{return!!e()}catch(e){return!0}},a=!s((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),c={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u={f:l&&!c.call({1:2},1)?function(e){var t=l(this,e);return!!t&&t.enumerable}:c},d=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},h={}.toString,p=function(e){return h.call(e).slice(8,-1)},f="".split,g=s((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==p(e)?f.call(e,""):Object(e)}:Object,m=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},_=function(e){return g(m(e))},v=function(e){return"object"==typeof e?null!==e:"function"==typeof e},E=function(e,t){if(!v(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!v(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!v(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!v(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")},A={}.hasOwnProperty,y=function(e,t){return A.call(e,t)},S=o.document,C=v(S)&&v(S.createElement),b=function(e){return C?S.createElement(e):{}},T=!a&&!s((function(){return 7!=Object.defineProperty(b("div"),"a",{get:function(){return 7}}).a})),I=Object.getOwnPropertyDescriptor,R={f:a?I:function(e,t){if(e=_(e),t=E(t,!0),T)try{return I(e,t)}catch(e){}if(y(e,t))return d(!u.f.call(e,t),e[t])}},w=/#|\.prototype\./,O=function(e,t){var i=N[k(e)];return i==P||i!=L&&("function"==typeof t?s(t):!!t)},k=O.normalize=function(e){return String(e).replace(w,".").toLowerCase()},N=O.data={},L=O.NATIVE="N",P=O.POLYFILL="P",D=O,M={},x=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},B=function(e,t,i){if(x(e),void 0===t)return e;switch(i){case 0:return function(){return e.call(t)};case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)}}return function(){return e.apply(t,arguments)}},U=function(e){if(!v(e))throw TypeError(String(e)+" is not an object");return e},F=Object.defineProperty,V={f:a?F:function(e,t,i){if(U(e),t=E(t,!0),U(i),T)try{return F(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},j=a?function(e,t,i){return V.f(e,t,d(1,i))}:function(e,t,i){return e[t]=i,e},G=R.f,H=function(e){var t=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t},Q=function(e,t){var i,n,r,s,a,c,l,u,d=e.target,h=e.global,p=e.stat,f=e.proto,g=h?o:p?o[d]:(o[d]||{}).prototype,m=h?M:M[d]||(M[d]={}),_=m.prototype;for(r in t)i=!D(h?r:d+(p?".":"#")+r,e.forced)&&g&&y(g,r),a=m[r],i&&(c=e.noTargetGet?(u=G(g,r))&&u.value:g[r]),s=i&&c?c:t[r],i&&typeof a==typeof s||(l=e.bind&&i?B(s,o):e.wrap&&i?H(s):f&&"function"==typeof s?B(Function.call,s):s,(e.sham||s&&s.sham||a&&a.sham)&&j(l,"sham",!0),m[r]=l,f&&(y(M,n=d+"Prototype")||j(M,n,{}),M[n][r]=s,e.real&&_&&!_[r]&&j(_,r,s)))},W=Math.ceil,q=Math.floor,$=function(e){return isNaN(e=+e)?0:(e>0?q:W)(e)},z=Math.min,Z=function(e){return e>0?z($(e),9007199254740991):0},Y=Math.max,K=Math.min,J=function(e,t){var i=$(e);return i<0?Y(i+t,0):K(i,t)},X=function(e){return function(t,i,n){var r,o=_(t),s=Z(o.length),a=J(n,s);if(e&&i!=i){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===i)return e||a||0;return!e&&-1}},ee={includes:X(!0),indexOf:X(!1)},te={},ie=ee.indexOf,ne=function(e,t){var i,n=_(e),r=0,o=[];for(i in n)!y(te,i)&&y(n,i)&&o.push(i);for(;t.length>r;)y(n,i=t[r++])&&(~ie(o,i)||o.push(i));return o},re=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],oe=Object.keys||function(e){return ne(e,re)},se=a?Object.defineProperties:function(e,t){U(e);for(var i,n=oe(t),r=n.length,o=0;r>o;)V.f(e,i=n[o++],t[i]);return e};Q({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperties:se});var ae=n((function(e){var t=M.Object,i=e.exports=function(e,i){return t.defineProperties(e,i)};t.defineProperties.sham&&(i.sham=!0)})),ce=function(e){return"function"==typeof e?e:void 0},le=function(e,t){return arguments.length<2?ce(M[e])||ce(o[e]):M[e]&&M[e][t]||o[e]&&o[e][t]},ue=le("JSON","stringify"),de=/[\uD800-\uDFFF]/g,he=/^[\uD800-\uDBFF]$/,pe=/^[\uDC00-\uDFFF]$/,fe=function(e,t,i){var n=i.charAt(t-1),r=i.charAt(t+1);return he.test(e)&&!pe.test(r)||pe.test(e)&&!he.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},ge=s((function(){return'"\\udf06\\ud834"'!==ue("\udf06\ud834")||'"\\udead"'!==ue("\udead")}));ue&&Q({target:"JSON",stat:!0,forced:ge},{stringify:function(e,t,i){var n=ue.apply(null,arguments);return"string"==typeof n?n.replace(de,fe):n}}),M.JSON||(M.JSON={stringify:JSON.stringify});var me,_e,ve=function(e,t,i){return M.JSON.stringify.apply(null,arguments)},Ee=Array.isArray||function(e){return"Array"==p(e)},Ae=function(e){return Object(m(e))},ye=function(e,t,i){var n=E(t);n in e?V.f(e,n,d(0,i)):e[n]=i},Se="__core-js_shared__",Ce=o[Se]||function(e,t){try{j(o,e,t)}catch(r){o[e]=t}return t}(Se,{}),be=n((function(e){(e.exports=function(e,t){return Ce[e]||(Ce[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.4.3",mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),Te=0,Ie=Math.random(),Re=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Te+Ie).toString(36)},we=!!Object.getOwnPropertySymbols&&!s((function(){return!String(Symbol())})),Oe=we&&!Symbol.sham&&"symbol"==typeof Symbol(),ke=be("wks"),Ne=o.Symbol,Le=Oe?Ne:Re,Pe=function(e){return y(ke,e)||(we&&y(Ne,e)?ke[e]=Ne[e]:ke[e]=Le("Symbol."+e)),ke[e]},De=Pe("species"),Me=function(e,t){var i;return Ee(e)&&("function"!=typeof(i=e.constructor)||i!==Array&&!Ee(i.prototype)?v(i)&&null===(i=i[De])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===t?0:t)},xe=le("navigator","userAgent")||"",Be=o.process,Ue=Be&&Be.versions,Fe=Ue&&Ue.v8;Fe?_e=(me=Fe.split("."))[0]+me[1]:xe&&(!(me=xe.match(/Edge\/(\d+)/))||me[1]>=74)&&(me=xe.match(/Chrome\/(\d+)/))&&(_e=me[1]);var Ve=_e&&+_e,je=Pe("species"),Ge=function(e){return Ve>=51||!s((function(){var t=[];return(t.constructor={})[je]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},He=Pe("isConcatSpreadable"),Qe=9007199254740991,We="Maximum allowed index exceeded",qe=Ve>=51||!s((function(){var e=[];return e[He]=!1,e.concat()[0]!==e})),$e=Ge("concat"),ze=function(e){if(!v(e))return!1;var t=e[He];return void 0!==t?!!t:Ee(e)};Q({target:"Array",proto:!0,forced:!qe||!$e},{concat:function(e){var t,i,n,r,o,s=Ae(this),a=Me(s,0),c=0;for(t=-1,n=arguments.length;t<n;t++)if(ze(o=-1===t?s:arguments[t])){if(c+(r=Z(o.length))>Qe)throw TypeError(We);for(i=0;i<r;i++,c++)i in o&&ye(a,c,o[i])}else{if(c>=Qe)throw TypeError(We);ye(a,c++,o)}return a.length=c,a}});var Ze=function(e){return M[e+"Prototype"]},Ye=Ze("Array").concat,Ke=Array.prototype,Je=function(e){var t=e.concat;return e===Ke||e instanceof Array&&t===Ke.concat?Ye:t},Xe=!s((function(){return Object.isExtensible(Object.preventExtensions({}))})),et=n((function(e){var t=V.f,i=Re("meta"),n=0,r=Object.isExtensible||function(){return!0},o=function(e){t(e,i,{value:{objectID:"O"+ ++n,weakData:{}}})},s=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!v(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!y(e,i)){if(!r(e))return"F";if(!t)return"E";o(e)}return e[i].objectID},getWeakData:function(e,t){if(!y(e,i)){if(!r(e))return!0;if(!t)return!1;o(e)}return e[i].weakData},onFreeze:function(e){return Xe&&s.REQUIRED&&r(e)&&!y(e,i)&&o(e),e}};te[i]=!0})),tt={},it=Pe("iterator"),nt=Array.prototype,rt=function(e){return void 0!==e&&(tt.Array===e||nt[it]===e)},ot={};ot[Pe("toStringTag")]="z";var st,at,ct,lt="[object z]"===String(ot),ut=Pe("toStringTag"),dt="Arguments"==p(function(){return arguments}()),ht=lt?p:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),ut))?i:dt?p(t):"Object"==(n=p(t))&&"function"==typeof t.callee?"Arguments":n},pt=Pe("iterator"),ft=function(e){if(null!=e)return e[pt]||e["@@iterator"]||tt[ht(e)]},gt=function(e,t,i,n){try{return n?t(U(i)[0],i[1]):t(i)}catch(t){var r=e.return;throw void 0!==r&&U(r.call(e)),t}},mt=n((function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,i,n,r,o){var s,a,c,l,u,d,h,p=B(i,n,r?2:1);if(o)s=e;else{if("function"!=typeof(a=ft(e)))throw TypeError("Target is not iterable");if(rt(a)){for(c=0,l=Z(e.length);l>c;c++)if((u=r?p(U(h=e[c])[0],h[1]):p(e[c]))&&u instanceof t)return u;return new t(!1)}s=a.call(e)}for(d=s.next;!(h=d.call(s)).done;)if("object"==typeof(u=gt(s,p,h.value,r))&&u&&u instanceof t)return u;return new t(!1)}).stop=function(e){return new t(!0,e)}})),_t=function(e,t,i){if(!(e instanceof t))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return e},vt=lt?{}.toString:function(){return"[object "+ht(this)+"]"},Et=V.f,At=Pe("toStringTag"),yt=function(e,t,i,n){if(e){var r=i?e:e.prototype;y(r,At)||Et(r,At,{configurable:!0,value:t}),n&&!lt&&j(r,"toString",vt)}},St=[].push,Ct=function(e){var t=1==e,i=2==e,n=3==e,r=4==e,o=6==e,s=5==e||o;return function(a,c,l,u){for(var d,h,p=Ae(a),f=g(p),m=B(c,l,3),_=Z(f.length),v=0,E=u||Me,A=t?E(a,_):i?E(a,0):void 0;_>v;v++)if((s||v in f)&&(h=m(d=f[v],v,p),e))if(t)A[v]=h;else if(h)switch(e){case 3:return!0;case 5:return d;case 6:return v;case 2:St.call(A,d)}else if(r)return!1;return o?-1:n||r?r:A}},bt={forEach:Ct(0),map:Ct(1),filter:Ct(2),some:Ct(3),every:Ct(4),find:Ct(5),findIndex:Ct(6)},Tt=be("native-function-to-string",Function.toString),It=o.WeakMap,Rt="function"==typeof It&&/native code/.test(Tt.call(It)),wt=be("keys"),Ot=function(e){return wt[e]||(wt[e]=Re(e))},kt=o.WeakMap;if(Rt){var Nt=new kt,Lt=Nt.get,Pt=Nt.has,Dt=Nt.set;st=function(e,t){return Dt.call(Nt,e,t),t},at=function(e){return Lt.call(Nt,e)||{}},ct=function(e){return Pt.call(Nt,e)}}else{var Mt=Ot("state");te[Mt]=!0,st=function(e,t){return j(e,Mt,t),t},at=function(e){return y(e,Mt)?e[Mt]:{}},ct=function(e){return y(e,Mt)}}var xt={set:st,get:at,has:ct,enforce:function(e){return ct(e)?at(e):st(e,{})},getterFor:function(e){return function(t){var i;if(!v(t)||(i=at(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return i}}},Bt=V.f,Ut=bt.forEach,Ft=xt.set,Vt=xt.getterFor,jt=function(e,t,i){var n,r=-1!==e.indexOf("Map"),c=-1!==e.indexOf("Weak"),l=r?"set":"add",u=o[e],d=u&&u.prototype,h={};if(a&&"function"==typeof u&&(c||d.forEach&&!s((function(){(new u).entries().next()})))){n=t((function(t,i){Ft(_t(t,n,e),{type:e,collection:new u}),null!=i&&mt(i,t[l],t,r)}));var p=Vt(e);Ut(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(e){var t="add"==e||"set"==e;!(e in d)||c&&"clear"==e||j(n.prototype,e,(function(i,n){var r=p(this).collection;if(!t&&c&&!v(i))return"get"==e&&void 0;var o=r[e](0===i?0:i,n);return t?this:o}))})),c||Bt(n.prototype,"size",{configurable:!0,get:function(){return p(this).collection.size}})}else n=i.getConstructor(t,e,r,l),et.REQUIRED=!0;return yt(n,e,!1,!0),h[e]=n,Q({global:!0,forced:!0},h),c||i.setStrong(n,e,r),n},Gt=le("document","documentElement"),Ht=Ot("IE_PROTO"),Qt=function(){},Wt=function(){var e,t=b("iframe"),i=re.length;for(t.style.display="none",Gt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Wt=e.F;i--;)delete Wt.prototype[re[i]];return Wt()},qt=Object.create||function(e,t){var i;return null!==e?(Qt.prototype=U(e),i=new Qt,Qt.prototype=null,i[Ht]=e):i=Wt(),void 0===t?i:se(i,t)};te[Ht]=!0;var $t,zt,Zt,Yt=function(e,t,i,n){n&&n.enumerable?e[t]=i:j(e,t,i)},Kt=function(e,t,i){for(var n in t)i&&i.unsafe&&e[n]?e[n]=t[n]:Yt(e,n,t[n],i);return e},Jt=!s((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Xt=Ot("IE_PROTO"),ei=Object.prototype,ti=Jt?Object.getPrototypeOf:function(e){return e=Ae(e),y(e,Xt)?e[Xt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ei:null},ii=(Pe("iterator"),!1);[].keys&&("next"in(Zt=[].keys())?(zt=ti(ti(Zt)))!==Object.prototype&&($t=zt):ii=!0),null==$t&&($t={});var ni={IteratorPrototype:$t,BUGGY_SAFARI_ITERATORS:ii},ri=ni.IteratorPrototype,oi=function(){return this},si=function(e,t,i){var n=t+" Iterator";return e.prototype=qt(ri,{next:d(1,i)}),yt(e,n,!1,!0),tt[n]=oi,e},ai=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),t=i instanceof Array}catch(e){}return function(i,n){return U(i),function(e){if(!v(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(n),t?e.call(i,n):i.__proto__=n,i}}():void 0),ci=ni.IteratorPrototype,li=ni.BUGGY_SAFARI_ITERATORS,ui=Pe("iterator"),di="keys",hi="values",pi="entries",fi=function(){return this},gi=function(e,t,i,n,r,o,s){si(i,t,n);var a,c,l,u=function(e){if(e===r&&g)return g;if(!li&&e in p)return p[e];switch(e){case di:case hi:case pi:return function(){return new i(this,e)}}return function(){return new i(this)}},d=t+" Iterator",h=!1,p=e.prototype,f=p[ui]||p["@@iterator"]||r&&p[r],g=!li&&f||u(r),m="Array"==t&&p.entries||f;if(m&&(a=ti(m.call(new e)),ci!==Object.prototype&&a.next&&(yt(a,d,!0,!0),tt[d]=fi)),r==hi&&f&&f.name!==hi&&(h=!0,g=function(){return f.call(this)}),s&&p[ui]!==g&&j(p,ui,g),tt[t]=g,r)if(c={values:u(hi),keys:o?g:u(di),entries:u(pi)},s)for(l in c)(li||h||!(l in p))&&Yt(p,l,c[l]);else Q({target:t,proto:!0,forced:li||h},c);return c},mi=Pe("species"),_i=function(e){var t=le(e),i=V.f;a&&t&&!t[mi]&&i(t,mi,{configurable:!0,get:function(){return this}})},vi=V.f,Ei=et.fastKey,Ai=xt.set,yi=xt.getterFor,Si=(jt("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(e,t,i,n){var r=e((function(e,o){_t(e,r,t),Ai(e,{type:t,index:qt(null),first:void 0,last:void 0,size:0}),a||(e.size=0),null!=o&&mt(o,e[n],e,i)})),o=yi(t),s=function(e,t,i){var n,r,s=o(e),l=c(e,t);return l?l.value=i:(s.last=l={index:r=Ei(t,!0),key:t,value:i,previous:n=s.last,next:void 0,removed:!1},s.first||(s.first=l),n&&(n.next=l),a?s.size++:e.size++,"F"!==r&&(s.index[r]=l)),e},c=function(e,t){var i,n=o(e),r=Ei(t);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==t)return i};return Kt(r.prototype,{clear:function(){for(var e=o(this),t=e.index,i=e.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete t[i.index],i=i.next;e.first=e.last=void 0,a?e.size=0:this.size=0},delete:function(e){var t=this,i=o(t),n=c(t,e);if(n){var r=n.next,s=n.previous;delete i.index[n.index],n.removed=!0,s&&(s.next=r),r&&(r.previous=s),i.first==n&&(i.first=r),i.last==n&&(i.last=s),a?i.size--:t.size--}return!!n},forEach:function(e){for(var t,i=o(this),n=B(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:i.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),Kt(r.prototype,i?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),a&&vi(r.prototype,"size",{get:function(){return o(this).size}}),r},setStrong:function(e,t,i){var n=t+" Iterator",r=yi(t),o=yi(n);gi(e,t,(function(e,t){Ai(this,{type:n,target:e,state:r(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,i=e.last;i&&i.removed;)i=i.previous;return e.target&&(e.last=i=i?i.next:e.state.first)?"keys"==t?{value:i.key,done:!1}:"values"==t?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),_i(t)}}),function(e){return function(t,i){var n,r,o=String(m(t)),s=$(i),a=o.length;return s<0||s>=a?e?"":void 0:(n=o.charCodeAt(s))<55296||n>56319||s+1===a||(r=o.charCodeAt(s+1))<56320||r>57343?e?o.charAt(s):n:e?o.slice(s,s+2):r-56320+(n-55296<<10)+65536}}),Ci={codeAt:Si(!1),charAt:Si(!0)},bi=Ci.charAt,Ti="String Iterator",Ii=xt.set,Ri=xt.getterFor(Ti);gi(String,"String",(function(e){Ii(this,{type:Ti,string:String(e),index:0})}),(function(){var e,t=Ri(this),i=t.string,n=t.index;return n>=i.length?{value:void 0,done:!0}:(e=bi(i,n),t.index+=e.length,{value:e,done:!1})}));var wi="Array Iterator",Oi=xt.set,ki=xt.getterFor(wi);gi(Array,"Array",(function(e,t){Oi(this,{type:wi,target:_(e),index:0,kind:t})}),(function(){var e=ki(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),tt.Arguments=tt.Array;var Ni=Pe("toStringTag");for(var Li in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Pi=o[Li],Di=Pi&&Pi.prototype;Di&&!Di[Ni]&&j(Di,Ni,Li),tt[Li]=tt.Array}var Mi=M.Map,xi=Pe("match"),Bi=function(e){if(function(e){var t;return v(e)&&(void 0!==(t=e[xi])?!!t:"RegExp"==p(e))}(e))throw TypeError("The method doesn't accept regular expressions");return e},Ui=Pe("match"),Fi=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Ui]=!1,"/./"[e](t)}catch(e){}}return!1},Vi="".endsWith,ji=Math.min,Gi=Fi("endsWith");Q({target:"String",proto:!0,forced:!Gi},{endsWith:function(e){var t=String(m(this));Bi(e);var i=arguments.length>1?arguments[1]:void 0,n=Z(t.length),r=void 0===i?n:ji(Z(i),n),o=String(e);return Vi?Vi.call(t,o,r):t.slice(r-o.length,r)===o}});var Hi=Ze("String").endsWith,Qi=String.prototype,Wi=function(e){var t=e.endsWith;return"string"==typeof e||e===Qi||e instanceof String&&t===Qi.endsWith?Hi:t},qi=function(e,t){var i=[][e];return!i||!s((function(){i.call(null,t||function(){throw 1},1)}))},$i=bt.forEach,zi=qi("forEach")?function(e){return $i(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach;Q({target:"Array",proto:!0,forced:[].forEach!=zi},{forEach:zi});var Zi=Ze("Array").forEach,Yi=Array.prototype,Ki={DOMTokenList:!0,NodeList:!0},Ji=function(e){var t=e.forEach;return e===Yi||e instanceof Array&&t===Yi.forEach||Ki.hasOwnProperty(ht(e))?Zi:t},Xi={f:Object.getOwnPropertySymbols},en=Object.assign,tn=!en||s((function(){var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach((function(e){t[e]=e})),7!=en({},e)[i]||oe(en({},t)).join("")!=n}))?function(e,t){for(var i=Ae(e),n=arguments.length,r=1,o=Xi.f,s=u.f;n>r;)for(var c,l=g(arguments[r++]),d=o?oe(l).concat(o(l)):oe(l),h=d.length,p=0;h>p;)c=d[p++],a&&!s.call(l,c)||(i[c]=l[c]);return i}:en;Q({target:"Object",stat:!0,forced:Object.assign!==tn},{assign:tn});var nn=M.Object.assign,rn=s((function(){oe(1)}));Q({target:"Object",stat:!0,forced:rn},{keys:function(e){return oe(Ae(e))}});var on=M.Object.keys,sn=function(e){return function(t,i,n,r){x(i);var o=Ae(t),s=g(o),a=Z(o.length),c=e?a-1:0,l=e?-1:1;if(n<2)for(;;){if(c in s){r=s[c],c+=l;break}if(c+=l,e?c<0:a<=c)throw TypeError("Reduce of empty array with no initial value")}for(;e?c>=0:a>c;c+=l)c in s&&(r=i(r,s[c],c,o));return r}},an={left:sn(!1),right:sn(!0)}.left;Q({target:"Array",proto:!0,forced:qi("reduce")},{reduce:function(e){return an(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var cn=Ze("Array").reduce,ln=Array.prototype,un=function(e){var t=e.reduce;return e===ln||e instanceof Array&&t===ln.reduce?cn:t};Q({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperty:V.f});var dn=n((function(e){var t=M.Object,i=e.exports=function(e,i,n){return t.defineProperty(e,i,n)};t.defineProperty.sham&&(i.sham=!0)})),hn=dn,pn="\t\n\v\f\r                　\u2028\u2029\ufeff",fn="["+pn+"]",gn=RegExp("^"+fn+fn+"*"),mn=RegExp(fn+fn+"*$"),_n=function(e){return function(t){var i=String(m(t));return 1&e&&(i=i.replace(gn,"")),2&e&&(i=i.replace(mn,"")),i}},vn={start:_n(1),end:_n(2),trim:_n(3)},En=vn.trim,An=o.parseInt,yn=/^[+-]?0[Xx]/,Sn=8!==An(pn+"08")||22!==An(pn+"0x16")?function(e,t){var i=En(String(e));return An(i,t>>>0||(yn.test(i)?16:10))}:An;Q({global:!0,forced:parseInt!=Sn},{parseInt:Sn});var Cn=M.parseInt;let bn=!0,Tn=!0;function In(e,t,i){const n=e.match(t);return n&&n.length>=i&&Cn(n[i],10)}function Rn(e,t,i){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,r=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return r.apply(this,arguments);const o=e=>{const t=i(e);t&&n(t)};return this._eventMap=this._eventMap||{},this._eventMap[n]=o,r.apply(this,[e,o])};const o=n.removeEventListener;n.removeEventListener=function(e,i){if(e!==t||!this._eventMap||!this._eventMap[i])return o.apply(this,arguments);const n=this._eventMap[i];return delete this._eventMap[i],o.apply(this,[e,n])},hn(n,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function wn(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(bn=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function On(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Tn=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function kn(){if("object"==typeof window){if(bn)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Nn(e,t){Tn&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Ln(e){const{navigator:t}=e,i={browser:null,version:null};if(void 0===e||!e.navigator)return i.browser="Not a browser.",i;if(t.mozGetUserMedia)i.browser="firefox",i.version=In(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)i.browser="chrome",i.version=In(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))i.browser="edge",i.version=In(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return i.browser="Not a supported browser.",i;i.browser="safari",i.version=In(t.userAgent,/AppleWebKit\/(\d+)\./,1),i.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return i}function Pn(e){return"[object Object]"===Object.prototype.toString.call(e)}function Dn(e){var t;return Pn(e)?un(t=on(e)).call(t,(function(t,i){const n=Pn(e[i]),r=n?Dn(e[i]):e[i],o=n&&!on(r).length;return void 0===r||o?t:nn(t,{[i]:r})}),{}):e}function Mn(e,t,i){const n=i?"outbound-rtp":"inbound-rtp",r=new Mi;if(null===t)return r;const o=[];return Ji(e).call(e,e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),Ji(o).call(o,t=>{Ji(e).call(e,i=>{i.type===n&&i.trackId===t.id&&function e(t,i,n){var r;i&&!n.has(i.id)&&(n.set(i.id,i),Ji(r=on(i)).call(r,r=>{if(Wi(r).call(r,"Id"))e(t,t.get(i[r]),n);else if(Wi(r).call(r,"Ids")){var o;Ji(o=i[r]).call(o,i=>{e(t,t.get(i),n)})}}))}(e,i,r)})}),r}var xn=R.f,Bn=s((function(){xn(1)}));Q({target:"Object",stat:!0,forced:!a||Bn,sham:!a},{getOwnPropertyDescriptor:function(e,t){return xn(_(e),t)}});var Un=n((function(e){var t=M.Object,i=e.exports=function(e,i){return t.getOwnPropertyDescriptor(e,i)};t.getOwnPropertyDescriptor.sham&&(i.sham=!0)})),Fn=bt.filter;Q({target:"Array",proto:!0,forced:!Ge("filter")},{filter:function(e){return Fn(this,e,arguments.length>1?arguments[1]:void 0)}});var Vn=Ze("Array").filter,jn=Array.prototype,Gn=function(e){var t=e.filter;return e===jn||e instanceof Array&&t===jn.filter?Vn:t},Hn=o.Promise,Qn=Pe("iterator"),Wn=!1;try{var qn=0,$n={next:function(){return{done:!!qn++}},return:function(){Wn=!0}};$n[Qn]=function(){return this},Array.from($n,(function(){throw 2}))}catch(e){}var zn,Zn,Yn,Kn=function(e,t){if(!t&&!Wn)return!1;var i=!1;try{var n={};n[Qn]=function(){return{next:function(){return{done:i=!0}}}},e(n)}catch(e){}return i},Jn=Pe("species"),Xn=function(e,t){var i,n=U(e).constructor;return void 0===n||null==(i=U(n)[Jn])?t:x(i)},er=/(iphone|ipod|ipad).*applewebkit/i.test(xe),tr=o.location,ir=o.setImmediate,nr=o.clearImmediate,rr=o.process,or=o.MessageChannel,sr=o.Dispatch,ar=0,cr={},lr="onreadystatechange",ur=function(e){if(cr.hasOwnProperty(e)){var t=cr[e];delete cr[e],t()}},dr=function(e){return function(){ur(e)}},hr=function(e){ur(e.data)},pr=function(e){o.postMessage(e+"",tr.protocol+"//"+tr.host)};ir&&nr||(ir=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return cr[++ar]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},zn(ar),ar},nr=function(e){delete cr[e]},"process"==p(rr)?zn=function(e){rr.nextTick(dr(e))}:sr&&sr.now?zn=function(e){sr.now(dr(e))}:or&&!er?(Yn=(Zn=new or).port2,Zn.port1.onmessage=hr,zn=B(Yn.postMessage,Yn,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||s(pr)?zn=lr in b("script")?function(e){Gt.appendChild(b("script")).onreadystatechange=function(){Gt.removeChild(this),ur(e)}}:function(e){setTimeout(dr(e),0)}:(zn=pr,o.addEventListener("message",hr,!1)));var fr,gr,mr,_r,vr,Er,Ar,yr,Sr={set:ir,clear:nr},Cr=R.f,br=Sr.set,Tr=o.MutationObserver||o.WebKitMutationObserver,Ir=o.process,Rr=o.Promise,wr="process"==p(Ir),Or=Cr(o,"queueMicrotask"),kr=Or&&Or.value;kr||(fr=function(){var e,t;for(wr&&(e=Ir.domain)&&e.exit();gr;){t=gr.fn,gr=gr.next;try{t()}catch(e){throw gr?_r():mr=void 0,e}}mr=void 0,e&&e.enter()},wr?_r=function(){Ir.nextTick(fr)}:Tr&&!er?(vr=!0,Er=document.createTextNode(""),new Tr(fr).observe(Er,{characterData:!0}),_r=function(){Er.data=vr=!vr}):Rr&&Rr.resolve?(Ar=Rr.resolve(void 0),yr=Ar.then,_r=function(){yr.call(Ar,fr)}):_r=function(){br.call(o,fr)});var Nr,Lr,Pr,Dr=kr||function(e){var t={fn:e,next:void 0};mr&&(mr.next=t),gr||(gr=t,_r()),mr=t},Mr=function(e){var t,i;this.promise=new e((function(e,n){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=n})),this.resolve=x(t),this.reject=x(i)},xr={f:function(e){return new Mr(e)}},Br=function(e,t){if(U(e),v(t)&&t.constructor===e)return t;var i=xr.f(e);return(0,i.resolve)(t),i.promise},Ur=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Fr=Sr.set,Vr=Pe("species"),jr="Promise",Gr=xt.get,Hr=xt.set,Qr=xt.getterFor(jr),Wr=Hn,qr=o.TypeError,$r=o.document,zr=o.process,Zr=be("inspectSource"),Yr=(le("fetch"),xr.f),Kr=Yr,Jr="process"==p(zr),Xr=!!($r&&$r.createEvent&&o.dispatchEvent),eo="unhandledrejection",to=D(jr,(function(){if(Zr(Wr)===String(Wr)){if(66===Ve)return!0;if(!Jr&&"function"!=typeof PromiseRejectionEvent)return!0}if(!Wr.prototype.finally)return!0;if(Ve>=51&&/native code/.test(Wr))return!1;var e=Wr.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[Vr]=t,!(e.then((function(){}))instanceof t)})),io=to||!Kn((function(e){Wr.all(e).catch((function(){}))})),no=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},ro=function(e,t,i){if(!t.notified){t.notified=!0;var n=t.reactions;Dr((function(){for(var r=t.value,o=1==t.state,s=0;n.length>s;){var a,c,l,u=n[s++],d=o?u.ok:u.fail,h=u.resolve,p=u.reject,f=u.domain;try{d?(o||(2===t.rejection&&co(e,t),t.rejection=1),!0===d?a=r:(f&&f.enter(),a=d(r),f&&(f.exit(),l=!0)),a===u.promise?p(qr("Promise-chain cycle")):(c=no(a))?c.call(a,h,p):h(a)):p(r)}catch(e){f&&!l&&f.exit(),p(e)}}t.reactions=[],t.notified=!1,i&&!t.rejection&&so(e,t)}))}},oo=function(e,t,i){var n,r;Xr?((n=$r.createEvent("Event")).promise=t,n.reason=i,n.initEvent(e,!1,!0),o.dispatchEvent(n)):n={promise:t,reason:i},(r=o["on"+e])?r(n):e===eo&&function(e,t){var i=o.console;i&&i.error&&(1===arguments.length?i.error(e):i.error(e,t))}("Unhandled promise rejection",i)},so=function(e,t){Fr.call(o,(function(){var i,n=t.value;if(ao(t)&&(i=Ur((function(){Jr?zr.emit("unhandledRejection",n,e):oo(eo,e,n)})),t.rejection=Jr||ao(t)?2:1,i.error))throw i.value}))},ao=function(e){return 1!==e.rejection&&!e.parent},co=function(e,t){Fr.call(o,(function(){Jr?zr.emit("rejectionHandled",e):oo("rejectionhandled",e,t.value)}))},lo=function(e,t,i,n){return function(r){e(t,i,r,n)}},uo=function(e,t,i,n){t.done||(t.done=!0,n&&(t=n),t.value=i,t.state=2,ro(e,t,!0))},ho=function(e,t,i,n){if(!t.done){t.done=!0,n&&(t=n);try{if(e===i)throw qr("Promise can't be resolved itself");var r=no(i);r?Dr((function(){var n={done:!1};try{r.call(i,lo(ho,e,n,t),lo(uo,e,n,t))}catch(i){uo(e,n,i,t)}})):(t.value=i,t.state=1,ro(e,t,!1))}catch(i){uo(e,{done:!1},i,t)}}};to&&(Wr=function(e){_t(this,Wr,jr),x(e),Nr.call(this);var t=Gr(this);try{e(lo(ho,this,t),lo(uo,this,t))}catch(e){uo(this,t,e)}},(Nr=function(e){Hr(this,{type:jr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Kt(Wr.prototype,{then:function(e,t){var i=Qr(this),n=Yr(Xn(this,Wr));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=Jr?zr.domain:void 0,i.parent=!0,i.reactions.push(n),0!=i.state&&ro(this,i,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),Lr=function(){var e=new Nr,t=Gr(e);this.promise=e,this.resolve=lo(ho,e,t),this.reject=lo(uo,e,t)},xr.f=Yr=function(e){return e===Wr||e===Pr?new Lr(e):Kr(e)}),Q({global:!0,wrap:!0,forced:to},{Promise:Wr}),yt(Wr,jr,!1,!0),_i(jr),Pr=le(jr),Q({target:jr,stat:!0,forced:to},{reject:function(e){var t=Yr(this);return t.reject.call(void 0,e),t.promise}}),Q({target:jr,stat:!0,forced:!0},{resolve:function(e){return Br(this===Pr?Wr:this,e)}}),Q({target:jr,stat:!0,forced:io},{all:function(e){var t=this,i=Yr(t),n=i.resolve,r=i.reject,o=Ur((function(){var i=x(t.resolve),o=[],s=0,a=1;mt(e,(function(e){var c=s++,l=!1;o.push(void 0),a++,i.call(t,e).then((function(e){l||(l=!0,o[c]=e,--a||n(o))}),r)})),--a||n(o)}));return o.error&&r(o.value),i.promise},race:function(e){var t=this,i=Yr(t),n=i.reject,r=Ur((function(){var r=x(t.resolve);mt(e,(function(e){r.call(t,e).then(i.resolve,n)}))}));return r.error&&n(r.value),i.promise}}),Q({target:"Promise",stat:!0},{allSettled:function(e){var t=this,i=xr.f(t),n=i.resolve,r=i.reject,o=Ur((function(){var i=x(t.resolve),r=[],o=0,s=1;mt(e,(function(e){var a=o++,c=!1;r.push(void 0),s++,i.call(t,e).then((function(e){c||(c=!0,r[a]={status:"fulfilled",value:e},--s||n(r))}),(function(e){c||(c=!0,r[a]={status:"rejected",reason:e},--s||n(r))}))})),--s||n(r)}));return o.error&&r(o.value),i.promise}}),Q({target:"Promise",proto:!0,real:!0},{finally:function(e){var t=Xn(this,le("Promise")),i="function"==typeof e;return this.then(i?function(i){return Br(t,e()).then((function(){return i}))}:e,i?function(i){return Br(t,e()).then((function(){throw i}))}:e)}});var po=M.Promise,fo=po,go=bt.map;Q({target:"Array",proto:!0,forced:!Ge("map")},{map:function(e){return go(this,e,arguments.length>1?arguments[1]:void 0)}});var mo=Ze("Array").map,_o=Array.prototype,vo=function(e){var t=e.map;return e===_o||e instanceof Array&&t===_o.map?mo:t},Eo=Math.max,Ao=Math.min,yo=9007199254740991,So="Maximum allowed length exceeded";Q({target:"Array",proto:!0,forced:!Ge("splice")},{splice:function(e,t){var i,n,r,o,s,a,c=Ae(this),l=Z(c.length),u=J(e,l),d=arguments.length;if(0===d?i=n=0:1===d?(i=0,n=l-u):(i=d-2,n=Ao(Eo($(t),0),l-u)),l+i-n>yo)throw TypeError(So);for(r=Me(c,n),o=0;o<n;o++)(s=u+o)in c&&ye(r,o,c[s]);if(r.length=n,i<n){for(o=u;o<l-n;o++)a=o+i,(s=o+n)in c?c[a]=c[s]:delete c[a];for(o=l;o>l-n+i;o--)delete c[o-1]}else if(i>n)for(o=l-n;o>u;o--)a=o+i-1,(s=o+n-1)in c?c[a]=c[s]:delete c[a];for(o=0;o<i;o++)c[o+u]=arguments[o+2];return c.length=l-n+i,r}});var Co=Ze("Array").splice,bo=Array.prototype,To=function(e){var t=e.splice;return e===bo||e instanceof Array&&t===bo.splice?Co:t},Io=ee.indexOf,Ro=[].indexOf,wo=!!Ro&&1/[1].indexOf(1,-0)<0,Oo=qi("indexOf");Q({target:"Array",proto:!0,forced:wo||Oo},{indexOf:function(e){return wo?Ro.apply(this,arguments)||0:Io(this,e,arguments.length>1?arguments[1]:void 0)}});var ko=Ze("Array").indexOf,No=Array.prototype,Lo=function(e){var t=e.indexOf;return e===No||e instanceof Array&&t===No.indexOf?ko:t},Po=Pe("species"),Do=[].slice,Mo=Math.max;Q({target:"Array",proto:!0,forced:!Ge("slice")},{slice:function(e,t){var i,n,r,o=_(this),s=Z(o.length),a=J(e,s),c=J(void 0===t?s:t,s);if(Ee(o)&&("function"!=typeof(i=o.constructor)||i!==Array&&!Ee(i.prototype)?v(i)&&null===(i=i[Po])&&(i=void 0):i=void 0,i===Array||void 0===i))return Do.call(o,a,c);for(n=new(void 0===i?Array:i)(Mo(c-a,0)),r=0;a<c;a++,r++)a in o&&ye(n,r,o[a]);return n.length=r,n}});var xo=Ze("Array").slice,Bo=Array.prototype,Uo=function(e){var t=e.slice;return e===Bo||e instanceof Array&&t===Bo.slice?xo:t},Fo=bt.find,Vo="find",jo=!0;Vo in[]&&Array(1).find((function(){jo=!1})),Q({target:"Array",proto:!0,forced:jo},{find:function(e){return Fo(this,e,arguments.length>1?arguments[1]:void 0)}});var Go=Ze("Array").find,Ho=Array.prototype,Qo=function(e){var t=e.find;return e===Ho||e instanceof Array&&t===Ho.find?Go:t},Wo=[].slice,qo={},$o=function(e,t,i){if(!(t in qo)){for(var n=[],r=0;r<t;r++)n[r]="a["+r+"]";qo[t]=Function("C,a","return new C("+n.join(",")+")")}return qo[t](e,i)},zo=Function.bind||function(e){var t=x(this),i=Wo.call(arguments,1),n=function(){var r=i.concat(Wo.call(arguments));return this instanceof n?$o(t,r.length,r):t.apply(e,r)};return v(t.prototype)&&(n.prototype=t.prototype),n};Q({target:"Function",proto:!0},{bind:zo});var Zo=Ze("Function").bind,Yo=Function.prototype,Ko=function(e){var t=e.bind;return e===Yo||e instanceof Function&&t===Yo.bind?Zo:t},Jo=ee.includes;Q({target:"Array",proto:!0},{includes:function(e){return Jo(this,e,arguments.length>1?arguments[1]:void 0)}});var Xo=Ze("Array").includes;Q({target:"String",proto:!0,forced:!Fi("includes")},{includes:function(e){return!!~String(m(this)).indexOf(Bi(e),arguments.length>1?arguments[1]:void 0)}});var es=Ze("String").includes,ts=Array.prototype,is=String.prototype,ns=function(e){var t=e.includes;return e===ts||e instanceof Array&&t===ts.includes?Xo:"string"==typeof e||e===is||e instanceof String&&t===is.includes?es:t},rs=bt.some;Q({target:"Array",proto:!0,forced:qi("some")},{some:function(e){return rs(this,e,arguments.length>1?arguments[1]:void 0)}});var os=Ze("Array").some,ss=Array.prototype,as=function(e){var t=e.some;return e===ss||e instanceof Array&&t===ss.some?os:t};const cs=kn;function ls(e){const t=e&&e.navigator;if(!t.mediaDevices)return;const i=Ln(e),n=function(e){var t;if("object"!=typeof e||e.mandatory||e.optional)return e;const i={};var n;return Ji(t=on(e)).call(t,t=>{if("require"===t||"advanced"===t||"mediaSource"===t)return;const n="object"==typeof e[t]?e[t]:{ideal:e[t]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);const r=function(e,t){return e?e+t.charAt(0).toUpperCase()+Uo(t).call(t,1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){i.optional=i.optional||[];let e={};"number"==typeof n.ideal?(e[r("min",t)]=n.ideal,i.optional.push(e),e={},e[r("max",t)]=n.ideal,i.optional.push(e)):(e[r("",t)]=n.ideal,i.optional.push(e))}var o;void 0!==n.exact&&"number"!=typeof n.exact?(i.mandatory=i.mandatory||{},i.mandatory[r("",t)]=n.exact):Ji(o=["min","max"]).call(o,e=>{void 0!==n[e]&&(i.mandatory=i.mandatory||{},i.mandatory[r(e,t)]=n[e])})}),e.advanced&&(i.optional=Je(n=i.optional||[]).call(n,e.advanced)),i},r=function(e,r){if(i.version>=61)return r(e);if((e=JSON.parse(ve(e)))&&"object"==typeof e.audio){const t=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])};t((e=JSON.parse(ve(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const s=i.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||s)){let i;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?i=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(i=["front"]),i)return t.mediaDevices.enumerateDevices().then(t=>{t=Gn(t).call(t,e=>"videoinput"===e.kind);let s=Qo(t).call(t,e=>as(i).call(i,t=>{var i;return ns(i=e.label.toLowerCase()).call(i,t)}));return!s&&t.length&&ns(i).call(i,"back")&&(s=t[t.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=n(e.video),cs("chrome: "+ve(e)),r(e)})}e.video=n(e.video)}return cs("chrome: "+ve(e)),r(e)},o=function(e){return i.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(e,i,n){r(e,e=>{t.webkitGetUserMedia(e,i,e=>{n&&n(o(e))})})};if(t.getUserMedia=Ko(s).call(s,t),t.mediaDevices.getUserMedia){var a;const e=Ko(a=t.mediaDevices.getUserMedia).call(a,t.mediaDevices);t.mediaDevices.getUserMedia=function(t){return r(t,t=>e(t).then(e=>{var i;if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw Ji(i=e.getTracks()).call(i,e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>fo.reject(o(e))))}}}function us(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function ds(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){hn(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{var i;t.stream.addEventListener("addtrack",i=>{let n;var r;n=e.RTCPeerConnection.prototype.getReceivers?Qo(r=this.getReceivers()).call(r,e=>e.track&&e.track.id===i.track.id):{track:i.track};const o=new Event("track");o.track=i.track,o.receiver=n,o.transceiver={receiver:n},o.streams=[t.stream],this.dispatchEvent(o)}),Ji(i=t.stream.getTracks()).call(i,i=>{let n;var r;n=e.RTCPeerConnection.prototype.getReceivers?Qo(r=this.getReceivers()).call(r,e=>e.track&&e.track.id===i.id):{track:i};const o=new Event("track");o.track=i,o.receiver=n,o.transceiver={receiver:n},o.streams=[t.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Rn(e,"track",e=>(e.transceiver||hn(e,"transceiver",{value:{receiver:e.receiver}}),e))}function hs(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){var e;return this._senders=this._senders||[],Uo(e=this._senders).call(e)};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){let r=i.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t;n.apply(this,arguments);const i=Lo(t=this._senders).call(t,e);var r;-1!==i&&To(r=this._senders).call(r,i,1)}}const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n;this._senders=this._senders||[],i.apply(this,[e]),Ji(n=e.getTracks()).call(n,e=>{this._senders.push(t(this,e))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t;this._senders=this._senders||[],n.apply(this,[e]),Ji(t=e.getTracks()).call(t,e=>{var t;const i=Qo(t=this._senders).call(t,t=>t.track===e);var n,r;i&&To(n=this._senders).call(n,Lo(r=this._senders).call(r,i),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return Ji(e).call(e,e=>e._pc=this),e},hn(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ps(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,n]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const r=function(e){const t={},i=e.result();return Ji(i).call(i,e=>{var i;const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};Ji(i=e.names()).call(i,t=>{n[t]=e.stat(t)}),t[n.id]=n}),t},o=function(e){var t;return new Mi(vo(t=on(e)).call(t,t=>[t,e[t]]))};if(arguments.length>=2){const n=function(e){i(o(r(e)))};return t.apply(this,[n,e])}return new fo((e,i)=>{t.apply(this,[function(t){e(o(r(t)))},i])}).then(i,n)}}function fs(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return Ji(e).call(e,e=>e._pc=this),e});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>Mn(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return Ji(e).call(e,e=>e._pc=this),e}),Rn(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>Mn(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var i,n;const e=arguments[0];let t,r,o;return Ji(i=this.getSenders()).call(i,i=>{i.track===e&&(t?o=!0:t=i)}),Ji(n=this.getReceivers()).call(n,t=>(t.track===e&&(r?o=!0:r=t),t.track===e)),o||t&&r?fo.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():fo.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function gs(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},vo(e=on(this._shimmedLocalStreams)).call(e,e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){var n;if(!i)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[i.id]?-1===Lo(n=this._shimmedLocalStreams[i.id]).call(n,r)&&this._shimmedLocalStreams[i.id].push(r):this._shimmedLocalStreams[i.id]=[i,r],r};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t,n,r;this._shimmedLocalStreams=this._shimmedLocalStreams||{},Ji(t=e.getTracks()).call(t,e=>{var t;if(Qo(t=this.getSenders()).call(t,t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const o=this.getSenders();i.apply(this,arguments);const s=Gn(n=this.getSenders()).call(n,e=>-1===Lo(o).call(o,e));this._shimmedLocalStreams[e.id]=Je(r=[e]).call(r,s)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Ji(t=on(this._shimmedLocalStreams)).call(t,t=>{var i;const n=Lo(i=this._shimmedLocalStreams[t]).call(i,e);var r;-1!==n&&To(r=this._shimmedLocalStreams[t]).call(r,n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),r.apply(this,arguments)}}function ms(e){var t;if(!e.RTCPeerConnection)return;const i=Ln(e);if(e.RTCPeerConnection.prototype.addTrack&&i.version>=65)return gs(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},vo(e).call(e,e=>this._reverseStreams[e.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var i;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},Ji(i=t.getTracks()).call(i,e=>{var t;if(Qo(t=this.getSenders()).call(t,t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};const o=e.RTCPeerConnection.prototype.removeStream;function s(e,t){var i;let n=t.sdp;return Ji(i=on(e._reverseStreams||[])).call(i,t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})}function a(e,t){var i;let n=t.sdp;return Ji(i=on(e._reverseStreams||[])).call(i,t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(i.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,i){var n,r,o;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const s=Uo([]).call(arguments,1);if(1!==s.length||!Qo(n=s[0].getTracks()).call(n,e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const a=Qo(r=this.getSenders()).call(r,e=>e.track===t);if(a)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const c=this._streams[i.id];if(c)c.addTrack(t),fo.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const n=new e.MediaStream([t]);this._streams[i.id]=n,this._reverseStreams[n.id]=i,this.addStream(n)}return Qo(o=this.getSenders()).call(o,e=>e.track===t)},Ji(t=["createOffer","createAnswer"]).call(t,(function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(this,[t=>{const i=s(this,t);e[0].apply(null,[i])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):i.apply(this,arguments).then(e=>s(this,e))}};e.RTCPeerConnection.prototype[t]=n[t]}));const c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=a(this,arguments[0]),c.apply(this,arguments)):c.apply(this,arguments)};const l=Un(e.RTCPeerConnection.prototype,"localDescription");hn(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=l.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let i;this._streams=this._streams||{},Ji(t=on(this._streams)).call(t,t=>{var n;Qo(n=this._streams[t].getTracks()).call(n,t=>e.track===t)&&(i=this._streams[t])}),i&&(1===i.getTracks().length?this.removeStream(this._reverseStreams[i.id]):i.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function _s(e){const t=Ln(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),!e.RTCPeerConnection)return;var i;t.version<53&&Ji(i=["setLocalDescription","setRemoteDescription","addIceCandidate"]).call(i,(function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}));const n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?fo.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),fo.resolve())}}function vs(e){Rn(e,"negotiationneeded",e=>{if("stable"===e.target.signalingState)return e})}var Es=Object.freeze({__proto__:null,shimMediaStream:us,shimOnTrack:ds,shimGetSendersWithDtmf:hs,shimGetStats:ps,shimSenderReceiverGetStats:fs,shimAddTrackRemoveTrackWithNative:gs,shimAddTrackRemoveTrack:ms,shimPeerConnection:_s,fixNegotiationNeeded:vs,shimGetUserMedia:ls,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(i){return t(i).then(t=>{const n=i.video&&i.video.width,r=i.video&&i.video.height,o=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},n&&(i.video.mandatory.maxWidth=n),r&&(i.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(i)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),As="".startsWith,ys=Math.min,Ss=Fi("startsWith");Q({target:"String",proto:!0,forced:!Ss},{startsWith:function(e){var t=String(m(this));Bi(e);var i=Z(ys(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return As?As.call(t,n,i):t.slice(i,i+n.length)===n}});var Cs,bs=Ze("String").startsWith,Ts=String.prototype,Is=function(e){var t=e.startsWith;return"string"==typeof e||e===Ts||e instanceof String&&t===Ts.startsWith?bs:t},Rs=vn.trim;Q({target:"String",proto:!0,forced:(Cs="trim",s((function(){return!!pn[Cs]()||"​᠎"!="​᠎"[Cs]()||pn[Cs].name!==Cs})))},{trim:function(){return Rs(this)}});var ws=Ze("String").trim,Os=String.prototype,ks=function(e){var t=e.trim;return"string"==typeof e||e===Os||e instanceof String&&t===Os.trim?ws:t},Ns=n((function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){var t;return vo(t=ks(e).call(e).split("\n")).call(t,(function(e){return ks(e).call(e)}))},t.splitSections=function(e){var t=e.split("\nm=");return vo(t).call(t,(function(e,t){var i;return ks(i=t>0?"m="+e:e).call(i)+"\r\n"}))},t.getDescription=function(e){var i=t.splitSections(e);return i&&i[0]},t.getMediaSections=function(e){var i=t.splitSections(e);return i.shift(),i},t.matchPrefix=function(e,i){var n;return Gn(n=t.splitLines(e)).call(n,(function(e){return 0===Lo(e).call(e,i)}))},t.parseCandidate=function(e){for(var t,i={foundation:(t=0===Lo(e).call(e,"a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:Cn(t[1],10),protocol:t[2].toLowerCase(),priority:Cn(t[3],10),ip:t[4],address:t[4],port:Cn(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":i.relatedAddress=t[n+1];break;case"rport":i.relatedPort=Cn(t[n+1],10);break;case"tcptype":i.tcpType=t[n+1];break;case"ufrag":i.ufrag=t[n+1],i.usernameFragment=t[n+1];break;default:i[t[n]]=t[n+1]}return i},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),i={payloadType:Cn(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=Cn(t[1],10),i.channels=3===t.length?Cn(t[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var i=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==i?"/"+i:"")+"\r\n"},t.parseExtmap=function(e){var t,i=e.substr(9).split(" ");return{id:Cn(i[0],10),direction:Lo(t=i[0]).call(t,"/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,i={},n=e.substr(Lo(e).call(e," ")+1).split(";"),r=0;r<n.length;r++){var o,s;t=ks(o=n[r]).call(o).split("="),i[ks(s=t[0]).call(s)]=t[1]}return i},t.writeFmtp=function(e){var t="",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&on(e.parameters).length){var n,r=[];Ji(n=on(e.parameters)).call(n,(function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+i+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(Lo(e).call(e," ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t,i="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&Ji(t=e.rtcpFeedback).call(t,(function(e){i+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),i},t.parseSsrcMedia=function(e){var t=Lo(e).call(e," "),i={ssrc:Cn(e.substr(7,t-7),10)},n=Lo(e).call(e,":",t);return n>-1?(i.attribute=e.substr(t+1,n-t-1),i.value=e.substr(n+1)):i.attribute=e.substr(t+1),i},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:vo(t).call(t,(function(e){return Cn(e,10)}))}},t.getMid=function(e){var i=t.matchPrefix(e,"a=mid:")[0];if(i)return i.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,i){var n=t.matchPrefix(e+i,"a=fingerprint:");return{role:"auto",fingerprints:vo(n).call(n,t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var i,n="a=setup:"+t+"\r\n";return Ji(i=e.fingerprints).call(i,(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.getIceParameters=function(e,i){var n=t.splitLines(e);return n=Je(n).call(n,t.splitLines(i)),{usernameFragment:Gn(n).call(n,(function(e){return 0===Lo(e).call(e,"a=ice-ufrag:")}))[0].substr(12),password:Gn(n).call(n,(function(e){return 0===Lo(e).call(e,"a=ice-pwd:")}))[0].substr(10)}},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var i,n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),o=3;o<r.length;o++){var s=r[o],a=t.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(a){var c,l=t.parseRtpMap(a),u=t.matchPrefix(e,"a=fmtp:"+s+" ");switch(l.parameters=u.length?t.parseFmtp(u[0]):{},l.rtcpFeedback=vo(c=t.matchPrefix(e,"a=rtcp-fb:"+s+" ")).call(c,t.parseRtcpFb),n.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(l.name.toUpperCase())}}}return Ji(i=t.matchPrefix(e,"a=extmap:")).call(i,(function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,i){var n,r,o,s="";s+="m="+e+" ",s+=i.codecs.length>0?"9":"0",s+=" UDP/TLS/RTP/SAVPF ",s+=vo(n=i.codecs).call(n,(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",s+="c=IN IP4 0.0.0.0\r\n",s+="a=rtcp:9 IN IP4 0.0.0.0\r\n",Ji(r=i.codecs).call(r,(function(e){s+=t.writeRtpMap(e),s+=t.writeFmtp(e),s+=t.writeRtcpFb(e)}));var a,c=0;return Ji(o=i.codecs).call(o,(function(e){e.maxptime>c&&(c=e.maxptime)})),c>0&&(s+="a=maxptime:"+c+"\r\n"),s+="a=rtcp-mux\r\n",i.headerExtensions&&Ji(a=i.headerExtensions).call(a,(function(e){s+=t.writeExtmap(e)})),s},t.parseRtpEncodingParameters=function(e){var i,n,r,o,s,a,c,l=[],u=t.parseRtpParameters(e),d=-1!==Lo(i=u.fecMechanisms).call(i,"RED"),h=-1!==Lo(n=u.fecMechanisms).call(n,"ULPFEC"),p=Gn(r=vo(o=t.matchPrefix(e,"a=ssrc:")).call(o,(function(e){return t.parseSsrcMedia(e)}))).call(r,(function(e){return"cname"===e.attribute})),f=p.length>0&&p[0].ssrc,g=vo(s=t.matchPrefix(e,"a=ssrc-group:FID")).call(s,(function(e){var t=e.substr(17).split(" ");return vo(t).call(t,(function(e){return Cn(e,10)}))}));g.length>0&&g[0].length>1&&g[0][0]===f&&(c=g[0][1]),Ji(a=u.codecs).call(a,(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:f,codecPayloadType:Cn(e.parameters.apt,10)};f&&c&&(t.rtx={ssrc:c}),l.push(t),d&&((t=JSON.parse(ve(t))).fec={ssrc:f,mechanism:h?"red+ulpfec":"red"},l.push(t))}})),0===l.length&&f&&l.push({ssrc:f});var m,_,v=t.matchPrefix(e,"b=");return v.length&&(v=0===Lo(m=v[0]).call(m,"b=TIAS:")?Cn(v[0].substr(7),10):0===Lo(_=v[0]).call(_,"b=AS:")?1e3*Cn(v[0].substr(5),10)*.95-16e3:void 0,Ji(l).call(l,(function(e){e.maxBitrate=v}))),l},t.parseRtcpParameters=function(e){var i,n,r={},o=Gn(i=vo(n=t.matchPrefix(e,"a=ssrc:")).call(n,(function(e){return t.parseSsrcMedia(e)}))).call(i,(function(e){return"cname"===e.attribute}))[0];o&&(r.cname=o.value,r.ssrc=o.ssrc);var s=t.matchPrefix(e,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=0===s.length;var a=t.matchPrefix(e,"a=rtcp-mux");return r.mux=a.length>0,r},t.parseMsid=function(e){var i,n,r,o=t.matchPrefix(e,"a=msid:");if(1===o.length)return{stream:(r=o[0].substr(7).split(" "))[0],track:r[1]};var s=Gn(i=vo(n=t.matchPrefix(e,"a=ssrc:")).call(n,(function(e){return t.parseSsrcMedia(e)}))).call(i,(function(e){return"msid"===e.attribute}));return s.length>0?{stream:(r=s[0].value.split(" "))[0],track:r[1]}:void 0},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,i,n){var r=void 0!==i?i:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,i,n,r){var o=t.writeRtpDescription(e.kind,i);if(o+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),o},t.getDirection=function(e,i){for(var n=t.splitLines(e),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return i?t.getDirection(i):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var i=t.splitLines(e)[0].substr(2).split(" ");return{kind:i[0],port:Cn(i[1],10),protocol:i[2],fmt:Uo(i).call(i,3).join(" ")}},t.parseOLine=function(e){var i=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:Cn(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var i=t.splitLines(e),n=0;n<i.length;n++)if(i[n].length<2||"="!==i[n].charAt(1))return!1;return!0},e.exports=t}));function Ls(e,t,i,n,r){var o=Ns.writeRtpDescription(e.kind,t);if(o+=Ns.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=Ns.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":r||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var a="msid:"+(n?n.id:"-")+" "+s+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+Ns.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+Ns.localCName+"\r\n"),o}function Ps(e,t){var i={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var i=0;i<t.length;i++)if(t[i].payloadType===e||t[i].preferredPayloadType===e)return t[i]},r=function(e,t,i,r){var o=n(e.parameters.apt,i),s=n(t.parameters.apt,r);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(n){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.clockRate===s.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.apt&&!r(n,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(n.numChannels,s.numChannels),i.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var r=t.headerExtensions[n];if(e.uri===r.uri){i.headerExtensions.push(r);break}}})),i}function Ds(e,t,i){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(i)}function Ms(e,t){var i=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return i||e.addRemoteCandidate(t),!i}function xs(e,t){var i=new Error(t);return i.name=e,i.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],i}var Bs=function(e,t){function i(t,i){i.addTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function n(t,i,n,r){var o=new Event("track");o.track=i,o.receiver=n,o.transceiver={receiver:n},o.streams=r,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var r=function(i){var n=this,r=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){n[e]=r[e].bind(r)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",i=JSON.parse(JSON.stringify(i||{})),this.usingBundle="max-bundle"===i.bundlePolicy,"negotiate"===i.rtcpMuxPolicy)throw xs("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(i.rtcpMuxPolicy||(i.rtcpMuxPolicy="require"),i.iceTransportPolicy){case"all":case"relay":break;default:i.iceTransportPolicy="all"}switch(i.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:i.bundlePolicy="balanced"}if(i.iceServers=function(e,t){var i=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var r="string"==typeof n;return r&&(n=[n]),n=n.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||i?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(i=!0,!0)})),delete e.url,e.urls=r?n[0]:n,!!n.length}}))}(i.iceServers||[],t),this._iceGatherers=[],i.iceCandidatePoolSize)for(var o=i.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:i.iceServers,gatherPolicy:i.iceTransportPolicy}));else i.iceCandidatePoolSize=0;this._config=i,this.transceivers=[],this._sdpSessionId=Ns.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(r.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(r.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),r.prototype.onicecandidate=null,r.prototype.onaddstream=null,r.prototype.ontrack=null,r.prototype.onremovestream=null,r.prototype.onsignalingstatechange=null,r.prototype.oniceconnectionstatechange=null,r.prototype.onconnectionstatechange=null,r.prototype.onicegatheringstatechange=null,r.prototype.onnegotiationneeded=null,r.prototype.ondatachannel=null,r.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},r.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},r.prototype.getConfiguration=function(){return this._config},r.prototype.getLocalStreams=function(){return this.localStreams},r.prototype.getRemoteStreams=function(){return this.remoteStreams},r.prototype._createTransceiver=function(e,t){var i=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&i)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var r=this._createIceAndDtlsTransports();n.iceTransport=r.iceTransport,n.dtlsTransport=r.dtlsTransport}return t||this.transceivers.push(n),n},r.prototype.addTrack=function(t,i){if(this._isClosed)throw xs("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find((function(e){return e.track===t})))throw xs("InvalidAccessError","Track already exists.");for(var r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==t.kind||(n=this.transceivers[r]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(i)&&this.localStreams.push(i),n.track=t,n.stream=i,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},r.prototype.addStream=function(e){var i=this;if(t>=15025)e.getTracks().forEach((function(t){i.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var i=n.getTracks()[t];e.addEventListener("enabled",(function(e){i.enabled=e.enabled}))})),n.getTracks().forEach((function(e){i.addTrack(e,n)}))}},r.prototype.removeTrack=function(t){if(this._isClosed)throw xs("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var i=this.transceivers.find((function(e){return e.rtpSender===t}));if(!i)throw xs("InvalidAccessError","Sender was not created by this connection.");var n=i.stream;i.rtpSender.stop(),i.rtpSender=null,i.track=null,i.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},r.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var i=t.getSenders().find((function(t){return t.track===e}));i&&t.removeTrack(i)}))},r.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},r.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},r.prototype._createIceGatherer=function(t,i){var n=this;if(i&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var r=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(r,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var i=!e.candidate||0===Object.keys(e.candidate).length;r.state=i?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},r.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),r},r.prototype._gather=function(t,i){var n=this,r=this.transceivers[i].iceGatherer;if(!r.onlocalcandidate){var o=this.transceivers[i].bufferedCandidateEvents;this.transceivers[i].bufferedCandidateEvents=null,r.removeEventListener("localcandidate",this.transceivers[i].bufferCandidates),r.onlocalcandidate=function(e){if(!(n.usingBundle&&i>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:i};var s=e.candidate,a=!s||0===Object.keys(s).length;if(a)"new"!==r.state&&"gathering"!==r.state||(r.state="completed");else{"new"===r.state&&(r.state="gathering"),s.component=1,s.ufrag=r.getLocalParameters().usernameFragment;var c=Ns.writeCandidate(s);o.candidate=Object.assign(o.candidate,Ns.parseCandidate(c)),o.candidate.candidate=c,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var l=Ns.getMediaSections(n._localDescription.sdp);l[o.candidate.sdpMLineIndex]+=a?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",n._localDescription.sdp=Ns.getDescription(n._localDescription.sdp)+l.join("");var u=n.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),a||n._dispatchEvent("icecandidate",o),u&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},e.setTimeout((function(){o.forEach((function(e){r.onlocalcandidate(e)}))}),0)}},r.prototype._createIceAndDtlsTransports=function(){var t=this,i=new e.RTCIceTransport(null);i.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(i);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:i,dtlsTransport:n}},r.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var i=this.transceivers[e].iceTransport;i&&(delete i.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},r.prototype._transceive=function(e,i,n){var r=Ps(e.localCapabilities,e.remoteCapabilities);i&&e.rtpSender&&(r.encodings=e.sendEncodingParameters,r.rtcp={cname:Ns.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(r.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(r)),n&&e.rtpReceiver&&r.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?r.encodings=e.recvEncodingParameters:r.encodings=[{}],r.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(r.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(r.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(r))},r.prototype.setLocalDescription=function(e){var t,i,n=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(xs("TypeError",'Unsupported type "'+e.type+'"'));if(!Ds("setLocalDescription",e.type,n.signalingState)||n._isClosed)return Promise.reject(xs("InvalidStateError","Can not set local "+e.type+" in state "+n.signalingState));if("offer"===e.type)t=Ns.splitSections(e.sdp),i=t.shift(),t.forEach((function(e,t){var i=Ns.parseRtpParameters(e);n.transceivers[t].localCapabilities=i})),n.transceivers.forEach((function(e,t){n._gather(e.mid,t)}));else if("answer"===e.type){t=Ns.splitSections(n._remoteDescription.sdp),i=t.shift();var r=Ns.matchPrefix(i,"a=ice-lite").length>0;t.forEach((function(e,t){var o=n.transceivers[t],s=o.iceGatherer,a=o.iceTransport,c=o.dtlsTransport,l=o.localCapabilities,u=o.remoteCapabilities;if((!Ns.isRejected(e)||0!==Ns.matchPrefix(e,"a=bundle-only").length)&&!o.rejected){var d=Ns.getIceParameters(e,i),h=Ns.getDtlsParameters(e,i);r&&(h.role="server"),n.usingBundle&&0!==t||(n._gather(o.mid,t),"new"===a.state&&a.start(s,d,r?"controlling":"controlled"),"new"===c.state&&c.start(h));var p=Ps(l,u);n._transceive(o,p.codecs.length>0,!1)}}))}return n._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?n._updateSignalingState("have-local-offer"):n._updateSignalingState("stable"),Promise.resolve()},r.prototype.setRemoteDescription=function(r){var o=this;if(-1===["offer","answer"].indexOf(r.type))return Promise.reject(xs("TypeError",'Unsupported type "'+r.type+'"'));if(!Ds("setRemoteDescription",r.type,o.signalingState)||o._isClosed)return Promise.reject(xs("InvalidStateError","Can not set remote "+r.type+" in state "+o.signalingState));var s={};o.remoteStreams.forEach((function(e){s[e.id]=e}));var a=[],c=Ns.splitSections(r.sdp),l=c.shift(),u=Ns.matchPrefix(l,"a=ice-lite").length>0,d=Ns.matchPrefix(l,"a=group:BUNDLE ").length>0;o.usingBundle=d;var h=Ns.matchPrefix(l,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!h&&h.substr(14).split(" ").indexOf("trickle")>=0,c.forEach((function(n,c){var h=Ns.splitLines(n),p=Ns.getKind(n),f=Ns.isRejected(n)&&0===Ns.matchPrefix(n,"a=bundle-only").length,g=h[0].substr(2).split(" ")[2],m=Ns.getDirection(n,l),_=Ns.parseMsid(n),v=Ns.getMid(n)||Ns.generateIdentifier();if(f||"application"===p&&("DTLS/SCTP"===g||"UDP/DTLS/SCTP"===g))o.transceivers[c]={mid:v,kind:p,protocol:g,rejected:!0};else{var E,A,y,S,C,b,T,I,R;!f&&o.transceivers[c]&&o.transceivers[c].rejected&&(o.transceivers[c]=o._createTransceiver(p,!0));var w,O,k=Ns.parseRtpParameters(n);f||(w=Ns.getIceParameters(n,l),(O=Ns.getDtlsParameters(n,l)).role="client"),T=Ns.parseRtpEncodingParameters(n);var N=Ns.parseRtcpParameters(n),L=Ns.matchPrefix(n,"a=end-of-candidates",l).length>0,P=Ns.matchPrefix(n,"a=candidate:").map((function(e){return Ns.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===r.type||"answer"===r.type)&&!f&&d&&c>0&&o.transceivers[c]&&(o._disposeIceAndDtlsTransports(c),o.transceivers[c].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[c].iceTransport=o.transceivers[0].iceTransport,o.transceivers[c].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[c].rtpSender&&o.transceivers[c].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[c].rtpReceiver&&o.transceivers[c].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==r.type||f)"answer"!==r.type||f||(A=(E=o.transceivers[c]).iceGatherer,y=E.iceTransport,S=E.dtlsTransport,C=E.rtpReceiver,b=E.sendEncodingParameters,I=E.localCapabilities,o.transceivers[c].recvEncodingParameters=T,o.transceivers[c].remoteCapabilities=k,o.transceivers[c].rtcpParameters=N,P.length&&"new"===y.state&&(!u&&!L||d&&0!==c?P.forEach((function(e){Ms(E.iceTransport,e)})):y.setRemoteCandidates(P)),d&&0!==c||("new"===y.state&&y.start(A,w,"controlling"),"new"===S.state&&S.start(O)),!Ps(E.localCapabilities,E.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&E.sendEncodingParameters[0].rtx&&delete E.sendEncodingParameters[0].rtx,o._transceive(E,"sendrecv"===m||"recvonly"===m,"sendrecv"===m||"sendonly"===m),!C||"sendrecv"!==m&&"sendonly"!==m?delete E.rtpReceiver:(R=C.track,_?(s[_.stream]||(s[_.stream]=new e.MediaStream),i(R,s[_.stream]),a.push([R,C,s[_.stream]])):(s.default||(s.default=new e.MediaStream),i(R,s.default),a.push([R,C,s.default]))));else{(E=o.transceivers[c]||o._createTransceiver(p)).mid=v,E.iceGatherer||(E.iceGatherer=o._createIceGatherer(c,d)),P.length&&"new"===E.iceTransport.state&&(!L||d&&0!==c?P.forEach((function(e){Ms(E.iceTransport,e)})):E.iceTransport.setRemoteCandidates(P)),I=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(I.codecs=I.codecs.filter((function(e){return"rtx"!==e.name}))),b=E.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var D,M=!1;"sendrecv"===m||"sendonly"===m?(M=!E.rtpReceiver,C=E.rtpReceiver||new e.RTCRtpReceiver(E.dtlsTransport,p),M&&(R=C.track,_&&"-"===_.stream||(_?(s[_.stream]||(s[_.stream]=new e.MediaStream,Object.defineProperty(s[_.stream],"id",{get:function(){return _.stream}})),Object.defineProperty(R,"id",{get:function(){return _.track}}),D=s[_.stream]):(s.default||(s.default=new e.MediaStream),D=s.default)),D&&(i(R,D),E.associatedRemoteMediaStreams.push(D)),a.push([R,C,D]))):E.rtpReceiver&&E.rtpReceiver.track&&(E.associatedRemoteMediaStreams.forEach((function(t){var i=t.getTracks().find((function(e){return e.id===E.rtpReceiver.track.id}));i&&function(t,i){i.removeTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(i,t)})),E.associatedRemoteMediaStreams=[]),E.localCapabilities=I,E.remoteCapabilities=k,E.rtpReceiver=C,E.rtcpParameters=N,E.sendEncodingParameters=b,E.recvEncodingParameters=T,o._transceive(o.transceivers[c],!1,M)}}})),void 0===o._dtlsRole&&(o._dtlsRole="offer"===r.type?"active":"passive"),o._remoteDescription={type:r.type,sdp:r.sdp},"offer"===r.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(s).forEach((function(t){var i=s[t];if(i.getTracks().length){if(-1===o.remoteStreams.indexOf(i)){o.remoteStreams.push(i);var r=new Event("addstream");r.stream=i,e.setTimeout((function(){o._dispatchEvent("addstream",r)}))}a.forEach((function(e){var t=e[0],r=e[1];i.id===e[2].id&&n(o,t,r,[i])}))}})),a.forEach((function(e){e[2]||n(o,e[0],e[1],[])})),e.setTimeout((function(){o&&o.transceivers&&o.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},r.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},r.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},r.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},r.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var i=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",i)}},r.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var i=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",i)}},r.prototype.createOffer=function(){var i=this;if(i._isClosed)return Promise.reject(xs("InvalidStateError","Can not call createOffer after close"));var n=i.transceivers.filter((function(e){return"audio"===e.kind})).length,r=i.transceivers.filter((function(e){return"video"===e.kind})).length,o=arguments[0];if(o){if(o.mandatory||o.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==o.offerToReceiveAudio&&(n=!0===o.offerToReceiveAudio?1:!1===o.offerToReceiveAudio?0:o.offerToReceiveAudio),void 0!==o.offerToReceiveVideo&&(r=!0===o.offerToReceiveVideo?1:!1===o.offerToReceiveVideo?0:o.offerToReceiveVideo)}for(i.transceivers.forEach((function(e){"audio"===e.kind?--n<0&&(e.wantReceive=!1):"video"===e.kind&&--r<0&&(e.wantReceive=!1)}));n>0||r>0;)n>0&&(i._createTransceiver("audio"),n--),r>0&&(i._createTransceiver("video"),r--);var s=Ns.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.transceivers.forEach((function(n,r){var o=n.track,s=n.kind,a=n.mid||Ns.generateIdentifier();n.mid=a,n.iceGatherer||(n.iceGatherer=i._createIceGatherer(r,i.usingBundle));var c=e.RTCRtpSender.getCapabilities(s);t<15019&&(c.codecs=c.codecs.filter((function(e){return"rtx"!==e.name}))),c.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),n.remoteCapabilities&&n.remoteCapabilities.codecs&&n.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(n.remoteCapabilities&&n.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=n.sendEncodingParameters||[{ssrc:1001*(2*r+1)}];o&&t>=15019&&"video"===s&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),n.wantReceive&&(n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,s)),n.localCapabilities=c,n.sendEncodingParameters=l})),"max-compat"!==i._config.bundlePolicy&&(s+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n",i.transceivers.forEach((function(e,t){s+=Ls(e,e.localCapabilities,"offer",e.stream,i._dtlsRole),s+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===i.iceGatheringState||0!==t&&i.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,s+="a="+Ns.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(s+="a=end-of-candidates\r\n"))}));var a=new e.RTCSessionDescription({type:"offer",sdp:s});return Promise.resolve(a)},r.prototype.createAnswer=function(){var i=this;if(i._isClosed)return Promise.reject(xs("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==i.signalingState&&"have-local-pranswer"!==i.signalingState)return Promise.reject(xs("InvalidStateError","Can not call createAnswer in signalingState "+i.signalingState));var n=Ns.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.usingBundle&&(n+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),n+="a=ice-options:trickle\r\n";var r=Ns.getMediaSections(i._remoteDescription.sdp).length;i.transceivers.forEach((function(e,o){if(!(o+1>r)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?n+="m=application 0 DTLS/SCTP 5000\r\n":n+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?n+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(n+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(n+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var s;e.stream&&("audio"===e.kind?s=e.stream.getAudioTracks()[0]:"video"===e.kind&&(s=e.stream.getVideoTracks()[0]),s&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var a=Ps(e.localCapabilities,e.remoteCapabilities);!a.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=Ls(e,a,"answer",e.stream,i._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+="a=rtcp-rsize\r\n")}}));var o=new e.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(o)},r.prototype.addIceCandidate=function(e){var t,i=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(n,r){if(!i._remoteDescription)return r(xs("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var s=0;s<i.transceivers.length;s++)if(i.transceivers[s].mid===e.sdpMid){o=s;break}var a=i.transceivers[o];if(!a)return r(xs("OperationError","Can not add ICE candidate"));if(a.rejected)return n();var c=Object.keys(e.candidate).length>0?Ns.parseCandidate(e.candidate):{};if("tcp"===c.protocol&&(0===c.port||9===c.port))return n();if(c.component&&1!==c.component)return n();if((0===o||o>0&&a.iceTransport!==i.transceivers[0].iceTransport)&&!Ms(a.iceTransport,c))return r(xs("OperationError","Can not add ICE candidate"));var l=e.candidate.trim();0===l.indexOf("a=")&&(l=l.substr(2)),(t=Ns.getMediaSections(i._remoteDescription.sdp))[o]+="a="+(c.type?l:"end-of-candidates")+"\r\n",i._remoteDescription.sdp=Ns.getDescription(i._remoteDescription.sdp)+t.join("")}else for(var u=0;u<i.transceivers.length&&(i.transceivers[u].rejected||(i.transceivers[u].iceTransport.addRemoteCandidate({}),(t=Ns.getMediaSections(i._remoteDescription.sdp))[u]+="a=end-of-candidates\r\n",i._remoteDescription.sdp=Ns.getDescription(i._remoteDescription.sdp)+t.join(""),!i.usingBundle));u++);n()}))},r.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var i=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?i=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(i=e.rtpReceiver)})),!i)throw xs("InvalidAccessError","Invalid selector.");return i.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var i=e[t];if(i&&i.prototype&&i.prototype.getStats){var n=i.prototype.getStats;i.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(i){var n;e[i].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[i]).type]||n.type,t.set(i,e[i])})),t}))}}}));var o=["createOffer","createAnswer"];return o.forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(o=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),r};function Us(e){var t;const i=e&&e.navigator,n=Ko(t=i.mediaDevices.getUserMedia).call(t,i.mediaDevices);i.mediaDevices.getUserMedia=function(e){return n(e).catch(e=>fo.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function Fs(e){var t;"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=Ko(t=e.navigator.getDisplayMedia).call(t,e.navigator)))}function Vs(e){const t=Ln(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Un(e.MediaStreamTrack.prototype,"enabled");hn(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const i=new Event("enabled");i.enabled=e,this.dispatchEvent(i)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&hn(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const i=Bs(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let i=!1;return e=JSON.parse(ve(e)),Gn(e).call(e,e=>{if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&Nn("RTCIceServer.url","RTCIceServer.urls");const n="string"==typeof t;return n&&(t=[t]),t=Gn(t).call(t,e=>{if(0===Lo(e).call(e,"stun:"))return!1;const t=Is(e).call(e,"turn")&&!Is(e).call(e,"turn:[")&&ns(e).call(e,"transport=udp");return t&&!i?(i=!0,!0):t&&!i}),delete e.url,e.urls=n?t[0]:t,!!t.length}})}(e.iceServers,t.version),kn("ICE servers after filtering:",e.iceServers)),new i(e)},e.RTCPeerConnection.prototype=i.prototype}function js(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var Gs=Object.freeze({__proto__:null,shimPeerConnection:Vs,shimReplaceTrack:js,shimGetUserMedia:Us,shimGetDisplayMedia:Fs});function Hs(e){const t=Ln(e),i=e&&e.navigator,n=e&&e.MediaStreamTrack;if(i.getUserMedia=function(e,t,n){Nn("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){var r;const e=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},t=Ko(r=i.mediaDevices.getUserMedia).call(r,i.mediaDevices);if(i.mediaDevices.getUserMedia=function(i){return"object"==typeof i&&"object"==typeof i.audio&&(i=JSON.parse(ve(i)),e(i.audio,"autoGainControl","mozAutoGainControl"),e(i.audio,"noiseSuppression","mozNoiseSuppression")),t(i)},n&&n.prototype.getSettings){const t=n.prototype.getSettings;n.prototype.getSettings=function(){const i=t.apply(this,arguments);return e(i,"mozAutoGainControl","autoGainControl"),e(i,"mozNoiseSuppression","noiseSuppression"),i}}if(n&&n.prototype.applyConstraints){const t=n.prototype.applyConstraints;n.prototype.applyConstraints=function(i){return"audio"===this.kind&&"object"==typeof i&&(i=JSON.parse(ve(i)),e(i,"autoGainControl","mozAutoGainControl"),e(i,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[i])}}}}function Qs(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&hn(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ws(e){const t=Ln(e);if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;var i;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&Ji(i=["setLocalDescription","setRemoteDescription","addIceCandidate"]).call(i,(function(t){const i=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}));const n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.version<68&&arguments[0]&&""===arguments[0].candidate?fo.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),fo.resolve())};const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,n]=arguments;return o.apply(this,[e||null]).then(e=>{if(t.version<53&&!i)try{Ji(e).call(e,e=>{e.type=r[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;Ji(e).call(e,(t,i)=>{e.set(i,nn({},t,{type:r[t.type]||t.type}))})}return e}).then(i,n)}}function qs(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return Ji(e).call(e,e=>e._pc=this),e});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):fo.resolve(new Mi)}}function $s(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return Ji(e).call(e,e=>e._pc=this),e}),Rn(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function zs(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t;Nn("removeStream","removeTrack"),Ji(t=this.getSenders()).call(t,t=>{var i;t.track&&ns(i=e.getTracks()).call(i,t.track)&&this.removeTrack(t)})})}function Zs(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}var Ys=Object.freeze({__proto__:null,shimOnTrack:Qs,shimPeerConnection:Ws,shimSenderGetStats:qs,shimReceiverGetStats:$s,shimRemoveStream:zs,shimRTCDataChannel:Zs,shimGetUserMedia:Hs,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,fo.reject(e)}return!0===i.video?i.video={mediaSource:t}:i.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(i)})}});function Ks(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var i,n,r;this._localStreams||(this._localStreams=[]),ns(i=this._localStreams).call(i,e)||this._localStreams.push(e),Ji(n=e.getAudioTracks()).call(n,i=>t.call(this,i,e)),Ji(r=e.getVideoTracks()).call(r,i=>t.call(this,i,e))},e.RTCPeerConnection.prototype.addTrack=function(e,i){var n;return i&&(this._localStreams?ns(n=this._localStreams).call(n,i)||this._localStreams.push(i):this._localStreams=[i]),t.call(this,e,i)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t,i,n;this._localStreams||(this._localStreams=[]);const r=Lo(t=this._localStreams).call(t,e);if(-1===r)return;To(i=this._localStreams).call(i,r,1);const o=e.getTracks();Ji(n=this.getSenders()).call(n,e=>{ns(o).call(o,e.track)&&this.removeTrack(e)})})}}function Js(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){hn(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{var t;Ji(t=e.streams).call(t,e=>{var t;if(this._remoteStreams||(this._remoteStreams=[]),ns(t=this._remoteStreams).call(t,e))return;this._remoteStreams.push(e);const i=new Event("addstream");i.stream=e,this.dispatchEvent(i)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){var i;Ji(i=t.streams).call(i,t=>{var i;if(e._remoteStreams||(e._remoteStreams=[]),Lo(i=e._remoteStreams).call(i,t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)})}),t.apply(e,arguments)}}}function Xs(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,i=t.createOffer,n=t.createAnswer,r=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),fo.resolve()):r},t.createAnswer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),fo.resolve()):r};let a=function(e,t,i){const n=r.apply(this,[e]);return i?(n.then(t,i),fo.resolve()):n};t.setLocalDescription=a,a=function(e,t,i){const n=o.apply(this,[e]);return i?(n.then(t,i),fo.resolve()):n},t.setRemoteDescription=a,a=function(e,t,i){const n=s.apply(this,[e]);return i?(n.then(t,i),fo.resolve()):n},t.addIceCandidate=a}function ea(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var i;const e=t.mediaDevices,n=Ko(i=e.getUserMedia).call(i,e);t.mediaDevices.getUserMedia=e=>n(ta(e))}var n;!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=Ko(n=function(e,i,n){t.mediaDevices.getUserMedia(e).then(i,n)}).call(n,t))}function ta(e){return e&&void 0!==e.video?nn({},e,{video:Dn(e.video)}):e}function ia(e){const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){const t=[];for(let i=0;i<e.iceServers.length;i++){let n=e.iceServers[i];!n.hasOwnProperty("urls")&&n.hasOwnProperty("url")?(Nn("RTCIceServer.url","RTCIceServer.urls"),n=JSON.parse(ve(n)),n.urls=n.url,delete n.url,t.push(n)):t.push(e.iceServers[i])}e.iceServers=t}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&hn(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function na(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&hn(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ra(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){var i,n;void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=Qo(i=this.getTransceivers()).call(i,e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const r=Qo(n=this.getTransceivers()).call(n,e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}var oa=Object.freeze({__proto__:null,shimLocalStreamsAPI:Ks,shimRemoteStreamsAPI:Js,shimCallbacksAPI:Xs,shimGetUserMedia:ea,shimConstraints:ta,shimRTCIceServerUrls:ia,shimTrackEventTransceiver:na,shimCreateOfferLegacy:ra});function sa(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){var i;if("object"==typeof e&&e.candidate&&0===Lo(i=e.candidate).call(i,"a=")&&((e=JSON.parse(ve(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const i=new t(e),n=Ns.parseCandidate(e.candidate),r=nn(i,n);return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Rn(e,"icecandidate",t=>(t.candidate&&hn(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function aa(e){if(!e.RTCPeerConnection)return;const t=Ln(e);"sctp"in e.RTCPeerConnection.prototype||hn(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const i=function(e){if(!e||!e.sdp)return!1;const t=Ns.splitSections(e.sdp);return t.shift(),as(t).call(t,e=>{var t;const i=Ns.parseMLine(e);return i&&"application"===i.kind&&-1!==Lo(t=i.protocol).call(t,"SCTP")})},n=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const i=Cn(t[1],10);return i!=i?-1:i},r=function(e){let i=65536;return"firefox"===t.browser&&(i=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),i},o=function(e,i){let n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);const r=Ns.matchPrefix(e.sdp,"a=max-message-size:");return r.length>0?n=Cn(r[0].substr(19),10):"firefox"===t.browser&&-1!==i&&(n=2147483637),n},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&hn(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const e=n(arguments[0]),t=r(e),i=o(arguments[0],e);let s;s=0===t&&0===i?Number.POSITIVE_INFINITY:0===t||0===i?Math.max(t,i):Math.min(t,i);const a={};hn(a,"maxMessageSize",{get:()=>s}),this._sctp=a}return s.apply(this,arguments)}}function ca(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const i=e.send;e.send=function(){const n=arguments[0],r=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return i.apply(e,arguments)}}const i=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=i.apply(this,arguments);return t(e,this),e},Rn(e,"datachannel",e=>(t(e.channel,e.target),e))}function la(e){var t;if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype;hn(i,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),hn(i,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),Ji(t=["setLocalDescription","setRemoteDescription"]).call(t,e=>{const t=i[e];i[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const i=new Event("connectionstatechange",e);t.dispatchEvent(i)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}})}function ua(e){if(!e.RTCPeerConnection)return;const t=Ln(e);if("chrome"===t.browser&&t.version>=71)return;const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t,n;return e&&e.sdp&&-1!==Lo(t=e.sdp).call(t,"\na=extmap-allow-mixed")&&(e.sdp=Gn(n=e.sdp.split("\n")).call(n,e=>"a=extmap-allow-mixed"!==ks(e).call(e)).join("\n")),i.apply(this,arguments)}}var da,ha,pa=Object.freeze({__proto__:null,shimRTCIceCandidate:sa,shimMaxMessageSize:aa,shimSendThrowTypeError:ca,shimConnectionState:la,removeAllowExtmapMixed:ua});!function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const i=kn,n=Ln(e),r={browserDetails:n,commonShim:pa,extractVersion:In,disableLog:wn,disableWarnings:On};switch(n.browser){case"chrome":if(!Es||!_s||!t.shimChrome)return i("Chrome shim is not included in this adapter release."),r;i("adapter.js shimming chrome."),r.browserShim=Es,ls(e),us(e),_s(e),ds(e),ms(e),hs(e),ps(e),fs(e),vs(e),sa(e),la(e),aa(e),ca(e),ua(e);break;case"firefox":if(!Ys||!Ws||!t.shimFirefox)return i("Firefox shim is not included in this adapter release."),r;i("adapter.js shimming firefox."),r.browserShim=Ys,Hs(e),Ws(e),Qs(e),zs(e),qs(e),$s(e),Zs(e),sa(e),la(e),aa(e),ca(e);break;case"edge":if(!Gs||!Vs||!t.shimEdge)return i("MS edge shim is not included in this adapter release."),r;i("adapter.js shimming edge."),r.browserShim=Gs,Us(e),Fs(e),Vs(e),js(e),aa(e),ca(e);break;case"safari":if(!oa||!t.shimSafari)return i("Safari shim is not included in this adapter release."),r;i("adapter.js shimming safari."),r.browserShim=oa,ia(e),ra(e),Xs(e),Ks(e),Js(e),na(e),ea(e),sa(e),aa(e),ca(e),ua(e);break;default:i("Unsupported browser!")}}({window:window}),function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(da||(da={})),function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(ha||(ha={}));const fa=new(n((function(t,i){
/*!@license
	 * UAParser.js v0.7.28
	 * Lightweight JavaScript-based User-Agent string parser
	 * https://github.com/faisalman/ua-parser-js
	 *
	 * Copyright © 2012-2021 Faisal Salman <f@faisalman.com>
	 * Licensed under MIT License
	 */
!function(e,n){var r="function",o="object",s="string",a="model",c="name",l="type",u="vendor",d="version",h="architecture",p="console",f="mobile",g="tablet",m="smarttv",_="wearable",v="embedded",E={extend:function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i},has:function(e,t){return typeof e===s&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:n},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===t?e:e.substring(0,255)}},A={rgx:function(e,t){for(var i,s,a,c,l,u,d=0;d<t.length&&!l;){var h=t[d],p=t[d+1];for(i=s=0;i<h.length&&!l;)if(l=h[i++].exec(e))for(a=0;a<p.length;a++)u=l[++s],typeof(c=p[a])===o&&c.length>0?2==c.length?typeof c[1]==r?this[c[0]]=c[1].call(this,u):this[c[0]]=c[1]:3==c.length?typeof c[1]!==r||c[1].exec&&c[1].test?this[c[0]]=u?u.replace(c[1],c[2]):n:this[c[0]]=u?c[1].call(this,u,c[2]):n:4==c.length&&(this[c[0]]=u?c[3].call(this,u.replace(c[1],c[2])):n):this[c]=u||n;d+=2}},str:function(e,t){for(var i in t)if(typeof t[i]===o&&t[i].length>0){for(var r=0;r<t[i].length;r++)if(E.has(t[i][r],e))return"?"===i?n:i}else if(E.has(t[i],e))return"?"===i?n:i;return e}},y={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},S={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[c,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[c,d],[/opios[\/\s]+([\w\.]+)/i],[d,[c,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[d,[c,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[c,d],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[d,[c,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[d,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[d,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[c,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[d,[c,"IE"]],[/yabrowser\/([\w\.]+)/i],[d,[c,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure Browser"],d],[/focus\/([\w\.]+)/i],[d,[c,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[d,[c,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[d,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[c,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[d,[c,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[d,[c,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[c,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 Browser"],d],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],d],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[c,d],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[c],[/;fbav\/([\w\.]+);/i],[d,[c,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[c,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[c,d],[/\bgsa\/([\w\.]+)\s.*safari\//i],[d,[c,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[d,[c,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[c,"Chrome WebView"],d],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[d,[c,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[c,d],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[d,[c,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[d,c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[c,[d,A.str,y.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[c,d],[/(navigator|netscape)\/([\w\.-]+)/i],[[c,"Netscape"],d],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[d,[c,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[c,d]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,E.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[h,/ower/,"",E.lowerize]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,E.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[a,[u,"Samsung"],[l,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[a,[u,"Samsung"],[l,f]],[/\((ip(?:hone|od)[\s\w]*);/i],[a,[u,"Apple"],[l,f]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[a,[u,"Apple"],[l,g]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[a,[u,"Huawei"],[l,g]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[a,[u,"Huawei"],[l,f]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[a,/_/g," "],[u,"Xiaomi"],[l,f]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[a,/_/g," "],[u,"Xiaomi"],[l,g]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[a,[u,"OPPO"],[l,f]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[a,[u,"Vivo"],[l,f]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[a,[u,"Realme"],[l,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[a,[u,"Motorola"],[l,f]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[u,"Motorola"],[l,g]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[a,[u,"LG"],[l,g]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[a,[u,"LG"],[l,f]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[a,[u,"Lenovo"],[l,g]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[a,/_/g," "],[u,"Nokia"],[l,f]],[/droid.+;\s(pixel\sc)[\s)]/i],[a,[u,"Google"],[l,g]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[a,[u,"Google"],[l,f]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[u,"Sony"],[l,f]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[a,"Xperia Tablet"],[u,"Sony"],[l,g]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[a,[u,"OnePlus"],[l,f]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[a,[u,"Amazon"],[l,g]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[a,"Fire Phone"],[u,"Amazon"],[l,f]],[/\((playbook);[\w\s\),;-]+(rim)/i],[a,u,[l,g]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[a,[u,"BlackBerry"],[l,f]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[a,[u,"ASUS"],[l,g]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[a,[u,"ASUS"],[l,f]],[/(nexus\s9)/i],[a,[u,"HTC"],[l,g]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[u,[a,/_/g," "],[l,f]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[a,[u,"Acer"],[l,g]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[a,[u,"Meizu"],[l,f]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[u,a,[l,f]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[u,a,[l,g]],[/\s(surface\sduo)\s/i],[a,[u,"Microsoft"],[l,g]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[a,[u,"Fairphone"],[l,f]],[/\s(u304aa)\sbuild/i],[a,[u,"AT&T"],[l,f]],[/sie-(\w*)/i],[a,[u,"Siemens"],[l,f]],[/[;\/]\s?(rct\w+)\sbuild/i],[a,[u,"RCA"],[l,g]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[a,[u,"Dell"],[l,g]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[a,[u,"Verizon"],[l,g]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[a,[u,"Barnes & Noble"],[l,g]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[a,[u,"NuVision"],[l,g]],[/;\s(k88)\sbuild/i],[a,[u,"ZTE"],[l,g]],[/;\s(nx\d{3}j)\sbuild/i],[a,[u,"ZTE"],[l,f]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[a,[u,"Swiss"],[l,f]],[/[;\/]\s?(zur\d{3})\sbuild/i],[a,[u,"Swiss"],[l,g]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[a,[u,"Zeki"],[l,g]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[u,"Dragon Touch"],a,[l,g]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[a,[u,"Insignia"],[l,g]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[a,[u,"NextBook"],[l,g]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[u,"Voice"],a,[l,f]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[u,"LvTel"],a,[l,f]],[/;\s(ph-1)\s/i],[a,[u,"Essential"],[l,f]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[a,[u,"Envizen"],[l,g]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[a,[u,"MachSpeed"],[l,g]],[/[;\/]\s?tu_(1491)\sbuild/i],[a,[u,"Rotor"],[l,g]],[/(shield[\w\s]+)\sbuild/i],[a,[u,"Nvidia"],[l,g]],[/(sprint)\s(\w+)/i],[u,a,[l,f]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[u,"Microsoft"],[l,f]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[a,[u,"Zebra"],[l,g]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[a,[u,"Zebra"],[l,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[u,a,[l,p]],[/droid.+;\s(shield)\sbuild/i],[a,[u,"Nvidia"],[l,p]],[/(playstation\s[345portablevi]+)/i],[a,[u,"Sony"],[l,p]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[a,[u,"Microsoft"],[l,p]],[/smart-tv.+(samsung)/i],[u,[l,m]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[u,"Samsung"],[l,m]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[u,"LG"],[l,m]],[/(apple)\s?tv/i],[u,[a,"Apple TV"],[l,m]],[/crkey/i],[[a,"Chromecast"],[u,"Google"],[l,m]],[/droid.+aft([\w])(\sbuild\/|\))/i],[a,[u,"Amazon"],[l,m]],[/\(dtv[\);].+(aquos)/i],[a,[u,"Sharp"],[l,m]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[u,E.trim],[a,E.trim],[l,m]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[l,m]],[/((pebble))app\/[\d\.]+\s/i],[u,a,[l,_]],[/droid.+;\s(glass)\s\d/i],[a,[u,"Google"],[l,_]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[a,[u,"Zebra"],[l,_]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[u,[l,v]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[a,[l,f]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[a,[l,g]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[l,E.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[u,"Generic"]],[/(phone)/i],[[l,f]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[d,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[c,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,c]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[c,d],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[c,[d,A.str,y.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[c,"Windows"],[d,A.str,y.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[c,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[c,"Mac OS"],[d,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[c,d],[/\(bb(10);/i],[d,[c,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[d,[c,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[c,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[c,"webOS"]],[/crkey\/([\d\.]+)/i],[d,[c,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[c,"Chromium OS"],d],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[c,d],[/(sunos)\s?([\w\.\d]*)/i],[[c,"Solaris"],d],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[c,d]]},C=function(t,i){if("object"==typeof t&&(i=t,t=n),!(this instanceof C))return new C(t,i).getResult();var r=t||(void 0!==e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:""),o=i?E.extend(S,i):S;return this.getBrowser=function(){var e={name:n,version:n};return A.rgx.call(e,r,o.browser),e.major=E.major(e.version),e},this.getCPU=function(){var e={architecture:n};return A.rgx.call(e,r,o.cpu),e},this.getDevice=function(){var e={vendor:n,model:n,type:n};return A.rgx.call(e,r,o.device),e},this.getEngine=function(){var e={name:n,version:n};return A.rgx.call(e,r,o.engine),e},this.getOS=function(){var e={name:n,version:n};return A.rgx.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===s&&e.length>255?E.trim(e,255):e,this},this.setUA(r),this};C.VERSION="0.7.28",C.BROWSER={NAME:c,MAJOR:"major",VERSION:d},C.CPU={ARCHITECTURE:h},C.DEVICE={MODEL:a,VENDOR:u,TYPE:l,CONSOLE:p,MOBILE:f,SMARTTV:m,TABLET:g,WEARABLE:_,EMBEDDED:v},C.ENGINE={NAME:c,VERSION:d},C.OS={NAME:c,VERSION:d},t.exports&&(i=t.exports=C),i.UAParser=C;var b=void 0!==e&&(e.jQuery||e.Zepto);if(b&&!b.ua){var T=new C;b.ua=T.getResult(),b.ua.get=function(){return T.getUA()},b.ua.set=function(e){T.setUA(e);var t=T.getResult();for(var i in t)b.ua[i]=t[i]}}}("object"==typeof window?window:e)})));let ga=fa.getResult();function ma(e){return e&&fa.setUA(e),ga=fa.getResult(),{name:_a(ga),version:va(ga),os:Ea(ga),osVersion:ga.os.version}}function _a(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return ha.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return ha.CHROME;case"Safari":case"Mobile Safari":return ha.SAFARI;case"Edge":return ha.EDGE;case"Firefox":return ha.FIREFOX;case"QQBrowser":return ha.QQ;case"Opera":return ha.OPERA;case"WeChat":return ha.WECHAT;default:return e.browser.name||""}}function va(e){let t;return t="Blink"===e.engine.name?e.engine.version||"":e.browser.version||"",t.split(".")[0]}function Ea(e){switch(e.os.name){case"Windows":return e.os.version?e.os.name+" "+e.os.version:e.os.name;default:return e.os.name||""}}function Aa(){return ma().os}function ya(){const e=ma();return!!("WebKit"===ga.engine.name&&e.os===da.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==ha.SAFARI||Ra()&&e.name!==ha.SAFARI)}function Sa(){const e=ma();if(ya()){if(e.os===da.MAC_OS)return!0;if(e.os===da.IOS){const e=ga.os.version&&ga.os.version.split(".");if(e&&14===Number(e[0])&&e[1]&&Number(e[1])>=3)return!0;if(e&&Number(e[0])>14)return!0}}return!1}function Ca(){return"WebKit"===ga.engine.name}function ba(){return ma().name===ha.CHROME}function Ta(){return ma().name===ha.SAFARI}function Ia(){return ma().name===ha.FIREFOX}function Ra(){return ma().os===da.IOS}function wa(){const e=ma();if(e.os!==da.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])}function Oa(){const e=ma();if(e.os!==da.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&0===Number(t[1])}function ka(){const e=ma();if(e.os!==da.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=1}function Na(){return Ta()&&navigator.maxTouchPoints>0}function La(){return ma().name===ha.WECHAT}function Pa(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function Da(){const e=ma();return e.name!==ha.EDGE&&e.name!==ha.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}Q({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Ma=M.Date.now,xa=[].slice,Ba=/MSIE .\./.test(xe),Ua=function(e){return function(t,i){var n=arguments.length>2,r=n?xa.call(arguments,2):void 0;return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,i)}};Q({global:!0,bind:!0,forced:Ba},{setTimeout:Ua(o.setTimeout),setInterval:Ua(o.setInterval)});var Fa=M.setTimeout,Va=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}},ja=Object.prototype.toString;function Ga(e){return"[object Array]"===ja.call(e)}function Ha(e){return null!==e&&"object"==typeof e}function Qa(e){return"[object Function]"===ja.call(e)}function Wa(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Ga(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var qa={isArray:Ga,isArrayBuffer:function(e){return"[object ArrayBuffer]"===ja.call(e)},isBuffer:function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Ha,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===ja.call(e)},isFile:function(e){return"[object File]"===ja.call(e)},isBlob:function(e){return"[object Blob]"===ja.call(e)},isFunction:Qa,isStream:function(e){return Ha(e)&&Qa(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:Wa,merge:function e(){var t={};function i(i,n){"object"==typeof t[n]&&"object"==typeof i?t[n]=e(t[n],i):t[n]=i}for(var n=0,r=arguments.length;n<r;n++)Wa(arguments[n],i);return t},deepMerge:function e(){var t={};function i(i,n){"object"==typeof t[n]&&"object"==typeof i?t[n]=e(t[n],i):t[n]="object"==typeof i?e({},i):i}for(var n=0,r=arguments.length;n<r;n++)Wa(arguments[n],i);return t},extend:function(e,t,i){return Wa(t,(function(t,n){e[n]=i&&"function"==typeof t?Va(t,i):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function $a(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var za=function(e,t,i){if(!t)return e;var n;if(i)n=i(t);else if(qa.isURLSearchParams(t))n=t.toString();else{var r=[];qa.forEach(t,(function(e,t){null!=e&&(qa.isArray(e)?t+="[]":e=[e],qa.forEach(e,(function(e){qa.isDate(e)?e=e.toISOString():qa.isObject(e)&&(e=JSON.stringify(e)),r.push($a(t)+"="+$a(e))})))})),n=r.join("&")}if(n){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e};function Za(){this.handlers=[]}Za.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},Za.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Za.prototype.forEach=function(e){qa.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var Ya=Za,Ka=function(e,t,i){return qa.forEach(i,(function(i){e=i(e,t)})),e},Ja=function(e){return!(!e||!e.__CANCEL__)},Xa=function(e,t){qa.forEach(e,(function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])}))},ec=function(e,t,i,n,r){return function(e,t,i,n,r){return e.config=t,i&&(e.code=i),e.request=n,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,i,n,r)},tc=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],ic=qa.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function n(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=n(window.location.href),function(t){var i=qa.isString(t)?n(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0},nc=qa.isStandardBrowserEnv()?{write:function(e,t,i,n,r,o){var s=[];s.push(e+"="+encodeURIComponent(t)),qa.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),qa.isString(n)&&s.push("path="+n),qa.isString(r)&&s.push("domain="+r),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},rc=function(e){return new Promise((function(t,i){var n=e.data,r=e.headers;qa.isFormData(n)&&delete r["Content-Type"];var o=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",a=e.auth.password||"";r.Authorization="Basic "+btoa(s+":"+a)}if(o.open(e.method.toUpperCase(),za(e.url,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var n,r,s,a,c,l="getAllResponseHeaders"in o?(n=o.getAllResponseHeaders(),c={},n?(qa.forEach(n.split("\n"),(function(e){if(a=e.indexOf(":"),r=qa.trim(e.substr(0,a)).toLowerCase(),s=qa.trim(e.substr(a+1)),r){if(c[r]&&tc.indexOf(r)>=0)return;c[r]="set-cookie"===r?(c[r]?c[r]:[]).concat([s]):c[r]?c[r]+", "+s:s}})),c):c):null,u={data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:l,config:e,request:o};!function(e,t,i){var n=i.config.validateStatus;!n||n(i.status)?e(i):t(ec("Request failed with status code "+i.status,i.config,null,i.request,i))}(t,i,u),o=null}},o.onabort=function(){o&&(i(ec("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){i(ec("Network Error",e,null,o)),o=null},o.ontimeout=function(){i(ec("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",o)),o=null},qa.isStandardBrowserEnv()){var c=nc,l=(e.withCredentials||ic(e.url))&&e.xsrfCookieName?c.read(e.xsrfCookieName):void 0;l&&(r[e.xsrfHeaderName]=l)}if("setRequestHeader"in o&&qa.forEach(r,(function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete r[t]:o.setRequestHeader(t,e)})),e.withCredentials&&(o.withCredentials=!0),e.responseType)try{o.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){o&&(o.abort(),i(e),o=null)})),void 0===n&&(n=null),o.send(n)}))},oc={"Content-Type":"application/x-www-form-urlencoded"};function sc(e,t){!qa.isUndefined(e)&&qa.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var ac={adapter:function(){var e;return("undefined"!=typeof i&&"[object process]"===Object.prototype.toString.call(i)||"undefined"!=typeof XMLHttpRequest)&&(e=rc),e}(),transformRequest:[function(e,t){return Xa(t,"Accept"),Xa(t,"Content-Type"),qa.isFormData(e)||qa.isArrayBuffer(e)||qa.isBuffer(e)||qa.isStream(e)||qa.isFile(e)||qa.isBlob(e)?e:qa.isArrayBufferView(e)?e.buffer:qa.isURLSearchParams(e)?(sc(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):qa.isObject(e)?(sc(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};qa.forEach(["delete","get","head"],(function(e){ac.headers[e]={}})),qa.forEach(["post","put","patch"],(function(e){ac.headers[e]=qa.merge(oc)}));var cc=ac;function lc(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var uc=function(e){var t,i;return lc(e),e.baseURL&&!function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}(e.url)&&(e.url=(t=e.baseURL,(i=e.url)?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t)),e.headers=e.headers||{},e.data=Ka(e.data,e.headers,e.transformRequest),e.headers=qa.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),qa.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||cc.adapter)(e).then((function(t){return lc(e),t.data=Ka(t.data,t.headers,e.transformResponse),t}),(function(t){return Ja(t)||(lc(e),t&&t.response&&(t.response.data=Ka(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},dc=function(e,t){t=t||{};var i={};return qa.forEach(["url","method","params","data"],(function(e){void 0!==t[e]&&(i[e]=t[e])})),qa.forEach(["headers","auth","proxy"],(function(n){qa.isObject(t[n])?i[n]=qa.deepMerge(e[n],t[n]):void 0!==t[n]?i[n]=t[n]:qa.isObject(e[n])?i[n]=qa.deepMerge(e[n]):void 0!==e[n]&&(i[n]=e[n])})),qa.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(n){void 0!==t[n]?i[n]=t[n]:void 0!==e[n]&&(i[n]=e[n])})),i};function hc(e){this.defaults=e,this.interceptors={request:new Ya,response:new Ya}}hc.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=dc(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[uc,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)i=i.then(t.shift(),t.shift());return i},hc.prototype.getUri=function(e){return e=dc(this.defaults,e),za(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},qa.forEach(["delete","get","head","options"],(function(e){hc.prototype[e]=function(t,i){return this.request(qa.merge(i||{},{method:e,url:t}))}})),qa.forEach(["post","put","patch"],(function(e){hc.prototype[e]=function(t,i,n){return this.request(qa.merge(n||{},{method:e,url:t,data:i}))}}));var pc=hc;function fc(e){this.message=e}fc.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},fc.prototype.__CANCEL__=!0;var gc=fc;function mc(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;e((function(e){i.reason||(i.reason=new gc(e),t(i.reason))}))}mc.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},mc.source=function(){var e;return{token:new mc((function(t){e=t})),cancel:e}};var _c=mc;function vc(e){var t=new pc(e),i=Va(pc.prototype.request,t);return qa.extend(i,pc.prototype,t),qa.extend(i,t),i}var Ec=vc(cc);Ec.Axios=pc,Ec.create=function(e){return vc(dc(Ec.defaults,e))},Ec.Cancel=gc,Ec.CancelToken=_c,Ec.isCancel=Ja,Ec.all=function(e){return Promise.all(e)},Ec.spread=function(e){return function(t){return e.apply(null,t)}};var Ac=Ec,yc=Ec;Ac.default=yc;var Sc=Ac;function Cc(){const e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}const bc={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},Tc=Ma(),Ic=e=>{for(const t in bc)if(Object.prototype.hasOwnProperty.call(bc,t)&&bc[t]===e)return t;return"DEFAULT"},Rc=new class{constructor(){this.logLevel=bc.DEBUG,this.uploadState="collecting",this.uploadLogWaitingList=[],this.uploadLogUploadingList=[],this.uploadErrorCount=0,this.currentLogID=0}debug(...e){var t;const i=Je(t=[bc.DEBUG]).call(t,e);this.log.apply(this,i)}info(...e){var t;const i=Je(t=[bc.INFO]).call(t,e);this.log.apply(this,i)}warning(...e){var t;const i=Je(t=[bc.WARNING]).call(t,e);this.log.apply(this,i)}error(...e){var t;const i=Je(t=[bc.ERROR]).call(t,e);this.log.apply(this,i)}upload(...e){var t;const i=Je(t=[bc.DEBUG]).call(t,e);this.uploadLog.apply(this,i)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){Vc("UPLOAD_LOG",!0)}disableLogUpload(){Vc("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}log(...e){var t,i,n,r;if(Ma()-Tc<100)return void Fa(()=>{this.log(...e)},Ma()-Tc);const o=Math.max(0,Math.min(4,e[0]));if(e[0]=Cc()+" Agora-SDK [".concat(Ic(o),"]:"),this.appendLogToWaitingList(o,e),o<this.logLevel)return;const s=Cc()+" %cAgora-SDK [".concat(Ic(o),"]:");let a=[];switch(o){case bc.DEBUG:a=Je(t=[s,"color: #64B5F6;"]).call(t,Uo(e).call(e,1)),console.log.apply(console,a);break;case bc.INFO:a=Je(i=[s,"color: #1E88E5; font-weight: bold;"]).call(i,Uo(e).call(e,1)),console.log.apply(console,a);break;case bc.WARNING:a=Je(n=[s,"color: #FB8C00; font-weight: bold;"]).call(n,Uo(e).call(e,1)),console.warn.apply(console,a);break;case bc.ERROR:a=Je(r=[s,"color: #B00020; font-weight: bold;"]).call(r,Uo(e).call(e,1)),console.error.apply(console,a)}}uploadLog(...e){if(Ma()-Tc<100)return void Fa(()=>{this.uploadLog(...e)},Ma()-Tc);const t=Math.max(0,Math.min(4,e[0]));e[0]=Cc()+" Agora-SDK [".concat(Ic(t),"]:"),this.appendLogToWaitingList(t,e)}appendLogToWaitingList(e,...t){if(!jc("UPLOAD_LOG"))return;let i="";Ji(t).call(t,e=>{"object"==typeof e&&(e=ve(e)),i+="".concat(e," ")}),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){var e;const t=this.uploadLogUploadingList,i={sdk_version:Oc,process_id:jc("PROCESS_ID"),payload:ve(t)},n=await Sc.post(this.url||(this.proxyServerURL?Je(e="https://".concat(this.proxyServerURL,"/ls/?h=")).call(e,jc("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(jc("LOG_UPLOAD_SERVER"),"/upload/v1")),i,{responseType:"text"});if("OK"!==n.data)throw new Error("unexpected upload log response: "+n.data);this.uploadLogUploadingList=[]}uploadLogInterval(){var e;0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=To(e=this.uploadLogWaitingList).call(e,0,10)),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),3e3)}).catch(e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),200):window.setTimeout(()=>this.uploadLogInterval(),1e3)}))}},wc="v4.8.1-0-ge9003043(1/5/2022, 3:55:58 PM)",Oc=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;const t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){var i;const e=t[1],n=t[2];return Je(i="".concat(e,".")).call(i,n)}const n=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(n&&n[1]&&n[2]){var r;const e=n[1],t=n[2];return Je(r="".concat(e,".")).call(r,100*(Number(t)+1))}return"4.0.0.999"}("4.8.1"),kc=function(){try{return!0===JSON.parse("true")}catch(e){return!0}}(),Nc={username:"test",password:"111111",turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1},Lc={"90p":Wc(160,90),"90p_1":Wc(160,90),"120p":Wc(160,120,15,30,65),"120p_1":Wc(160,120,15,30,65),"120p_3":Wc(120,120,15,30,50),"120p_4":Wc(212,120),"180p":Wc(320,180,15,30,140),"180p_1":Wc(320,180,15,30,140),"180p_3":Wc(180,180,15,30,100),"180p_4":Wc(240,180,15,30,120),"240p":Wc(320,240,15,40,200),"240p_1":Wc(320,240,15,40,200),"240p_3":Wc(240,240,15,40,140),"240p_4":Wc(424,240,15,40,220),"360p":Wc(640,360,15,80,400),"360p_1":Wc(640,360,15,80,400),"360p_3":Wc(360,360,15,80,260),"360p_4":Wc(640,360,30,80,600),"360p_6":Wc(360,360,30,80,400),"360p_7":Wc(480,360,15,80,320),"360p_8":Wc(480,360,30,80,490),"360p_9":Wc(640,360,15,80,800),"360p_10":Wc(640,360,24,80,800),"360p_11":Wc(640,360,24,80,1e3),"480p":Wc(640,480,15,100,500),"480p_1":Wc(640,480,15,100,500),"480p_2":Wc(640,480,30,100,1e3),"480p_3":Wc(480,480,15,100,400),"480p_4":Wc(640,480,30,100,750),"480p_6":Wc(480,480,30,100,600),"480p_8":Wc(848,480,15,100,610),"480p_9":Wc(848,480,30,100,930),"480p_10":Wc(640,480,10,100,400),"720p":Wc(1280,720,15,120,1130),"720p_1":Wc(1280,720,15,120,1130),"720p_2":Wc(1280,720,30,120,2e3),"720p_3":Wc(1280,720,30,120,1710),"720p_5":Wc(960,720,15,120,910),"720p_6":Wc(960,720,30,120,1380),"1080p":Wc(1920,1080,15,120,2080),"1080p_1":Wc(1920,1080,15,120,2080),"1080p_2":Wc(1920,1080,30,120,3e3),"1080p_3":Wc(1920,1080,30,120,3150),"1080p_5":Wc(1920,1080,60,120,4780),"1440p":Wc(2560,1440,30,120,4850),"1440p_1":Wc(2560,1440,30,120,4850),"1440p_2":Wc(2560,1440,60,120,7350),"4k":Wc(3840,2160,30,120,8910),"4k_1":Wc(3840,2160,30,120,8910),"4k_3":Wc(3840,2160,60,120,13500)},Pc={"480p":qc(640,480,5),"480p_1":qc(640,480,5),"480p_2":qc(640,480,30),"480p_3":qc(640,480,15),"720p":qc(1280,720,5),"720p_1":qc(1280,720,5),"720p_2":qc(1280,720,30),"720p_3":qc(1280,720,15),"1080p":qc(1920,1080,5),"1080p_1":qc(1920,1080,5),"1080p_2":qc(1920,1080,30),"1080p_3":qc(1920,1080,15)},Dc={"1SL1TL":$c(1,1),"3SL3TL":$c(3,3),"2SL3TL":$c(2,3)};function Mc(e){return"string"==typeof e?nn({},Lc[e]):e}function xc(e){return"string"==typeof e?nn({},Pc[e]):e}function Bc(e){return"string"==typeof e?nn({},Dc[e]):e}const Uc={speech_low_quality:Qc(16e3,!1),speech_standard:Qc(32e3,!1,18),music_standard:Qc(48e3,!1),standard_stereo:Qc(48e3,!0,56),high_quality:Qc(48e3,!1,128),high_quality_stereo:Qc(48e3,!0,192)};function Fc(e){return"string"==typeof e?nn({},Uc[e]):e}function Vc(e,t,i){var n,r;ns(n=on(Gc)).call(n,e)&&(!i&&ns(r=on(Hc)).call(r,e)||(Gc[e]=t))}function jc(e){return Gc[e]}const Gc={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TCC:!0,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,SDK_FALLBACK:!0,ENUMERATE_DEVICES_INTERVAL:!0,H264_PROFILE_LEVEL_ID:"",SDP_LOGGING:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},USE_NEW_TOKEN:!0},Hc={};function Qc(e,t,i){return{sampleRate:e,stereo:t,bitrate:i}}function Wc(e,t,i,n,r){return{width:e,height:t,frameRate:i,bitrateMin:n,bitrateMax:r}}function qc(e,t,i,n,r){return{width:{max:e},height:{max:t},frameRate:i,bitrateMin:n,bitrateMax:r}}function $c(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}kc||(Gc.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Gc.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Gc.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Gc.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Gc.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Gc.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Gc.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Gc.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Gc.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Gc.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Gc.AREAS=["NORTH_AMERICA","OVERSEA"]);const zc=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],Zc=[],Yc=[];function Kc(e){ns(Zc).call(Zc,e)||Zc.push(e)}function Jc(e){const t=Lo(Zc).call(Zc,e);-1!==t&&To(Zc).call(Zc,t,1)}function Xc(e){ns(Yc).call(Yc,e)||Yc.push(e)}function el(e){const t=Lo(Yc).call(Yc,e);-1!==t&&To(Yc).call(Yc,t,1)}var tl=[],il=tl.sort,nl=s((function(){tl.sort(void 0)})),rl=s((function(){tl.sort(null)})),ol=qi("sort");Q({target:"Array",proto:!0,forced:nl||!rl||ol},{sort:function(e){return void 0===e?il.call(Ae(this)):il.call(Ae(this),x(e))}});var sl=Ze("Array").sort,al=Array.prototype,cl=function(e){var t=e.sort;return e===al||e instanceof Array&&t===al.sort?sl:t};Q({target:"Array",stat:!0},{isArray:Ee});var ll,ul,dl,hl=M.Array.isArray;!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P"}(ll||(ll={}));class pl extends Error{constructor(e,t="",i){var n;super(t),this.name="AgoraRTCException",this.code=e,this.message=Je(n="AgoraRTCError ".concat(this.code,": ")).call(n,t),this.data=i}toString(){var e;return this.data?Je(e="data: ".concat(ve(this.data),"\n")).call(e,this.stack):"".concat(this.stack)}print(e="error"){return"error"===e&&Rc.error(this.toString()),"warning"===e&&Rc.warning(this.toString()),this}throw(){throw this.print(),this}}function fl(e,t){if("boolean"!=typeof e)throw new pl(ll.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function gl(e,t,i){var n;if(!ns(i).call(i,e))throw new pl(ll.INVALID_PARAMS,Je(n="".concat(t," can only be set as ")).call(n,ve(i)))}function ml(e,t,i=1,n=1e4,r=!0){var o,s;if(e<i||e>n||r&&!function(e){return"number"==typeof e&&e%1==0}(e))throw new pl(ll.INVALID_PARAMS,Je(o=Je(s="invalid ".concat(t,": the value range is [")).call(s,i,", ")).call(o,n,"]. integer only"))}function _l(e,t,i=1,n=255,r=!0){if(null==e)throw new pl(ll.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));var o,s,a;if(!Sl(e,i,n,r))throw new pl(ll.INVALID_PARAMS,Je(o=Je(s=Je(a="Invalid ".concat(t||"string param",": Length of the string: [")).call(a,i,",")).call(s,n,"].")).call(o,r?" ASCII characters only.":""))}function vl(e,t){if(!hl(e))throw new pl(ll.INVALID_PARAMS,"".concat(t," should be an array"))}function El(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw Rc.error("Invalid Channel Name ".concat(e)),new pl(ll.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function Al(e){var t,i;if(i=e,!("number"==typeof i&&Math.floor(i)===i&&0<=i&&i<=4294967295||Sl(e,1,255)))throw Rc.error(Je(t="Invalid UID ".concat(e," ")).call(t,typeof e)),new pl(ll.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");"string"==typeof e&&Rc.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function yl(e){return null==e}function Sl(e,t=1,i=255,n=!0){return"string"==typeof e&&e.length<=i&&e.length>=t&&(!n||function(e){if("string"!=typeof e)return!1;for(let t=0;t<e.length;t+=1){const i=e.charCodeAt(t);if(i<0||i>255)return!1}return!0}(e))}!function(e){e.FREE="free",e.UPLOADING="uploading"}(ul||(ul={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata"}(dl||(dl={}));const Cl={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};Q({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991});var bl=9007199254740991;Q({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991});var Tl=-9007199254740991;function Il(e){return _l(e.reportId,"params.reportId",0,100,!1),_l(e.category,"params.category",0,100,!1),_l(e.event,"params.event",0,100,!1),_l(e.label,"params.label",0,100,!1),ml(e.value,"params.value",Tl,bl,!1),!0}const Rl={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};var wl,Ol,kl,Nl,Ll,Pl,Dl,Ml,xl,Bl,Ul,Fl,Vl,jl,Gl,Hl,Ql,Wl,ql,$l,zl;function Zl(e){return ml(e.timeout,"config.timeout",0,1e5),ml(e.timeoutFactor,"config.timeoutFactor",0,100,!1),ml(e.maxRetryCount,"config.maxRetryConfig",0,1/0),ml(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function Yl(e){if(!hl(e)||e.length<1)return!1;try{Ji(e).call(e,e=>{if(!e.urls)throw Error()})}catch(e){return!1}return!0}function Kl(e){return _l(e.turnServerURL,"turnServerURL"),_l(e.username,"username"),_l(e.password,"password"),e.udpport&&ml(e.udpport,"udpport",1,99999,!0),e.forceturn&&fl(e.forceturn,"forceturn"),e.security&&fl(e.security,"security"),e.tcpport&&ml(e.tcpport,"tcpport",1,99999,!0),!0}function Jl(e){return void 0!==e.level&&gl(e.level,"level",[1,2,3]),!0}!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics"}(wl||(wl={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAT="io.agora.pb.Wrtc.JoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed"}(Ol||(Ol={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(kl||(kl={})),function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",e.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(Nl||(Nl={})),function(e){e.TRACER="tracer"}(Ll||(Ll={})),function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(Pl||(Pl={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(Dl||(Dl={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(Ml||(Ml={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(xl||(xl={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Bl||(Bl={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Ul||(Ul={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(Fl||(Fl={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost"}(Vl||(Vl={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED"}(jl||(jl={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(Gl||(Gl={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response"}(Hl||(Hl={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc"}(Ql||(Ql={})),function(e){e.PUBLISH_STATS="publish_stats",e.PUBLISH_RELATED_STATS="publish_related_stats",e.SUBSCRIBE_STATS="subscribe_stats",e.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length"}(Wl||(Wl={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio"}(ql||(ql={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}($l||($l={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer"}(zl||(zl={}));const Xl={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},eu={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},tu={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},iu={uplinkNetworkQuality:0,downlinkNetworkQuality:0},nu={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};var ru,ou;!function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls"}(ru||(ru={})),function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(ou||(ou={}));const su={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},au={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function cu(e,t){_l(e.url,"".concat(t,".url"),1,1e3,!1),yl(e.x)||ml(e.x,"".concat(t,".x"),0,1e4),yl(e.y)||ml(e.y,"".concat(t,".y"),0,1e4),yl(e.width)||ml(e.width,"".concat(t,".width"),0,1e4),yl(e.height)||ml(e.height,"".concat(t,".height"),0,1e4),yl(e.zOrder)||ml(e.zOrder,"".concat(t,".zOrder"),0,255),yl(e.alpha)||ml(e.alpha,"".concat(t,".alpha"),0,1,!1)}const lu={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},uu={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};var du,hu,pu,fu,gu,mu,_u,vu,Eu,Au,yu;function Su(e){if(!e.channelName)throw new pl(ll.INVALID_PARAMS,"invalid channelName in info");if(!e.uid||"number"!=typeof e.uid)throw new pl(ll.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&_l(e.token,"info.token",1,2047),Al(e.uid),El(e.channelName),!0}function Cu(e){return gl(e,"mediaSource",["screen","window","application"]),!0}!function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(du||(du={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(hu||(hu={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(pu||(pu={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(fu||(fu={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(gu||(gu={})),function(e){e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low"}(mu||(mu={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response"}(_u||(_u={})),function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track"}(vu||(vu={})),function(e){e.SCREEN_TRACK="screen_track",e.LOW_STREAM="low_stream"}(Eu||(Eu={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(Au||(Au={})),function(e){e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(yu||(yu={}));const bu=["AFRICA","ASIA","CHINA","EUROPE","GLOBAL","INDIA","JAPAN","NORTH_AMERICA","OCEANIA","OVERSEA","SOUTH_AMERICA","KOREA"];var Tu;!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(Tu||(Tu={}));const Iu={CHINA:{},ASIA:{CODE:Tu.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Tu.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Tu.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Tu.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Tu.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Tu.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Tu.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Tu.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Tu.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Tu.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Tu.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};var Ru,wu,Ou,ku,Nu,Lu,Pu,Du;kc&&(Iu.CHINA={CODE:Tu.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(e){e.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(Ru||(Ru={}));class Mu{constructor(){this._events={},this.addListener=this.on}getListeners(e){var t;return this._events[e]?vo(t=this._events[e]).call(t,e=>e.listener):[]}on(e,t){this._events[e]||(this._events[e]=[]);const i=this._events[e];-1===this._indexOfListener(i,t)&&i.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);const i=this._events[e];-1===this._indexOfListener(i,t)&&i.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;const i=this._events[e],n=this._indexOfListener(i,t);-1!==n&&To(i).call(i,n,1),0===this._events[e].length&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e,...t){var i;this._events[e]||(this._events[e]=[]);const n=vo(i=this._events[e]).call(i,e=>e);for(let r=0;r<n.length;r+=1){const i=n[r];i.once&&this.off(e,i.listener),i.listener.apply(this,t||[])}}_indexOfListener(e,t){let i=e.length;for(;i--;)if(e[i].listener===t)return i;return-1}}class xu extends Mu{constructor(e,t){super()}}!function(e){e.SEND="sendonly",e.RECV="recvonly",e.SENDRECV="sendrecv",e.INACTIVE="inactive"}(wu||(wu={})),function(e){e.VIDEO="video",e.AUDIO="audio"}(Ou||(Ou={})),function(e){e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack"}(ku||(ku={})),function(e){e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected"}(Nu||(Nu={})),function(e){e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost"}(Lu||(Lu={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Pu||(Pu={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Du||(Du={}));const Bu={join:["startJoin","startRequestAp","startJoinGateway","finishJoin"],publish:["startPublish"]},Uu={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1};function Fu(){return Uu}var Vu=re.concat("length","prototype"),ju={f:Object.getOwnPropertyNames||function(e){return ne(e,Vu)}},Gu=le("Reflect","ownKeys")||function(e){var t=ju.f(U(e)),i=Xi.f;return i?t.concat(i(e)):t};Q({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){for(var t,i,n=_(e),r=R.f,o=Gu(n),s={},a=0;o.length>a;)void 0!==(i=r(n,t=o[a++]))&&ye(s,t,i);return s}});var Hu=M.Object.getOwnPropertyDescriptors,Qu=ju.f,Wu={}.toString,qu="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],$u={f:function(e){return qu&&"[object Window]"==Wu.call(e)?function(e){try{return Qu(e)}catch(e){return qu.slice()}}(e):Qu(_(e))}},zu={f:Pe},Zu=V.f,Yu=function(e){var t=M.Symbol||(M.Symbol={});y(t,e)||Zu(t,e,{value:zu.f(e)})},Ku=bt.forEach,Ju=Ot("hidden"),Xu="Symbol",ed=Pe("toPrimitive"),td=xt.set,id=xt.getterFor(Xu),nd=Object.prototype,rd=o.Symbol,od=le("JSON","stringify"),sd=R.f,ad=V.f,cd=$u.f,ld=u.f,ud=be("symbols"),dd=be("op-symbols"),hd=be("string-to-symbol-registry"),pd=be("symbol-to-string-registry"),fd=be("wks"),gd=o.QObject,md=!gd||!gd.prototype||!gd.prototype.findChild,_d=a&&s((function(){return 7!=qt(ad({},"a",{get:function(){return ad(this,"a",{value:7}).a}})).a}))?function(e,t,i){var n=sd(nd,t);n&&delete nd[t],ad(e,t,i),n&&e!==nd&&ad(nd,t,n)}:ad,vd=function(e,t){var i=ud[e]=qt(rd.prototype);return td(i,{type:Xu,tag:e,description:t}),a||(i.description=t),i},Ed=we&&"symbol"==typeof rd.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof rd},Ad=function(e,t,i){e===nd&&Ad(dd,t,i),U(e);var n=E(t,!0);return U(i),y(ud,n)?(i.enumerable?(y(e,Ju)&&e[Ju][n]&&(e[Ju][n]=!1),i=qt(i,{enumerable:d(0,!1)})):(y(e,Ju)||ad(e,Ju,d(1,{})),e[Ju][n]=!0),_d(e,n,i)):ad(e,n,i)},yd=function(e,t){U(e);var i=_(t),n=oe(i).concat(Td(i));return Ku(n,(function(t){a&&!Sd.call(i,t)||Ad(e,t,i[t])})),e},Sd=function(e){var t=E(e,!0),i=ld.call(this,t);return!(this===nd&&y(ud,t)&&!y(dd,t))&&(!(i||!y(this,t)||!y(ud,t)||y(this,Ju)&&this[Ju][t])||i)},Cd=function(e,t){var i=_(e),n=E(t,!0);if(i!==nd||!y(ud,n)||y(dd,n)){var r=sd(i,n);return!r||!y(ud,n)||y(i,Ju)&&i[Ju][n]||(r.enumerable=!0),r}},bd=function(e){var t=cd(_(e)),i=[];return Ku(t,(function(e){y(ud,e)||y(te,e)||i.push(e)})),i},Td=function(e){var t=e===nd,i=cd(t?dd:_(e)),n=[];return Ku(i,(function(e){!y(ud,e)||t&&!y(nd,e)||n.push(ud[e])})),n};if(we||(Yt((rd=function(){if(this instanceof rd)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=Re(e),i=function(e){this===nd&&i.call(dd,e),y(this,Ju)&&y(this[Ju],t)&&(this[Ju][t]=!1),_d(this,t,d(1,e))};return a&&md&&_d(nd,t,{configurable:!0,set:i}),vd(t,e)}).prototype,"toString",(function(){return id(this).tag})),u.f=Sd,V.f=Ad,R.f=Cd,ju.f=$u.f=bd,Xi.f=Td,a&&ad(rd.prototype,"description",{configurable:!0,get:function(){return id(this).description}})),Oe||(zu.f=function(e){return vd(Pe(e),e)}),Q({global:!0,wrap:!0,forced:!we,sham:!we},{Symbol:rd}),Ku(oe(fd),(function(e){Yu(e)})),Q({target:Xu,stat:!0,forced:!we},{for:function(e){var t=String(e);if(y(hd,t))return hd[t];var i=rd(t);return hd[t]=i,pd[i]=t,i},keyFor:function(e){if(!Ed(e))throw TypeError(e+" is not a symbol");if(y(pd,e))return pd[e]},useSetter:function(){md=!0},useSimple:function(){md=!1}}),Q({target:"Object",stat:!0,forced:!we,sham:!a},{create:function(e,t){return void 0===t?qt(e):yd(qt(e),t)},defineProperty:Ad,defineProperties:yd,getOwnPropertyDescriptor:Cd}),Q({target:"Object",stat:!0,forced:!we},{getOwnPropertyNames:bd,getOwnPropertySymbols:Td}),Q({target:"Object",stat:!0,forced:s((function(){Xi.f(1)}))},{getOwnPropertySymbols:function(e){return Xi.f(Ae(e))}}),od){var Id=!we||s((function(){var e=rd();return"[null]"!=od([e])||"{}"!=od({a:e})||"{}"!=od(Object(e))}));Q({target:"JSON",stat:!0,forced:Id},{stringify:function(e,t,i){for(var n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t,(v(t)||void 0!==e)&&!Ed(e))return Ee(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Ed(t))return t}),r[1]=t,od.apply(null,r)}})}rd.prototype[ed]||j(rd.prototype,ed,rd.prototype.valueOf),yt(rd,Xu),te[Ju]=!0;var Rd,wd=M.Object.getOwnPropertySymbols,Od=dn,kd=function(e,t,i){return t in e?Od(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e};!function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5"}(Rd||(Rd={}));var Nd=Ze("Array").entries,Ld=Array.prototype,Pd={DOMTokenList:!0,NodeList:!0},Dd=function(e){var t=e.entries;return e===Ld||e instanceof Array&&t===Ld.entries||Pd.hasOwnProperty(ht(e))?Nd:t},Md=function(e){var t,i,n,r,o,s=Ae(e),a="function"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,u=void 0!==l,d=0,h=ft(s);if(u&&(l=B(l,c>2?arguments[2]:void 0,2)),null==h||a==Array&&rt(h))for(i=new a(t=Z(s.length));t>d;d++)ye(i,d,u?l(s[d],d):s[d]);else for(o=(r=h.call(s)).next,i=new a;!(n=o.call(r)).done;d++)ye(i,d,u?gt(r,l,[n.value,d],!0):n.value);return i.length=d,i},xd=!Kn((function(e){Array.from(e)}));Q({target:"Array",stat:!0,forced:xd},{from:Md});var Bd=M.Array.from,Ud=Ze("Array").keys,Fd=Array.prototype,Vd={DOMTokenList:!0,NodeList:!0},jd=function(e){var t=e.keys;return e===Fd||e instanceof Array&&t===Fd.keys||Vd.hasOwnProperty(ht(e))?Ud:t};function Gd(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}let Hd=0,Qd=0;function Wd(e,t,i){return new fo((n,r)=>{t.timeout=t.timeout||jc("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!i?(t.data=ve(t.data),Hd+=bp(t.data)):i&&(t.data.size?Hd+=t.data.size:t.data instanceof FormData?Hd+=function(e){let t=0;return/DingTalk/i.test(navigator.userAgent)&&e.realFormData&&(e=e.realFormData),Ji(e).call(e,e=>{t+="string"==typeof e?bp(e):e.size}),t+138}(t.data):Hd+=bp(ve(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,Sc.request(t).then(e=>{"string"==typeof e.data?Qd+=bp(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?Qd+=e.data.byteLength:Qd+=bp(ve(e.data)),n(e.data)}).catch(e=>{Sc.isCancel(e)?r(new pl(ll.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?r(new pl(ll.NETWORK_TIMEOUT,e.message)):e.response?r(new pl(ll.NETWORK_RESPONSE_ERROR,e.response.status)):r(new pl(ll.NETWORK_ERROR,e.message))})})}async function qd(e,t){const i=new Blob([t.data],{type:"buffer"});return await Wd(e,function(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=Gd(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=Gd(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}({},t,{data:i,headers:{"Content-Type":"application/octet-stream"}}),!0)}const $d=new class extends Mu{constructor(){super(),this._moduleName="network-indicator",this._networkState=Pu.ONLINE,window.addEventListener("online",()=>{this.networkState=Pu.ONLINE}),window.addEventListener("offline",()=>{this.networkState=Pu.OFFLINE})}set networkState(e){Rc.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+e),this.emit(Du.NETWORK_STATE_CHANGE,e,this._networkState),e===Pu.ONLINE?this.emit(Du.ONLINE):e===Pu.OFFLINE&&(this.onlineWaiter=new fo(e=>{this.once(Du.ONLINE,()=>{this.onlineWaiter=void 0,e(Pu.ONLINE)})}),this.emit(Du.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}},zd={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function Zd(e,t){const i=t.timeout*Math.pow(t.timeoutFactor,e);return Math.min(t.maxRetryTimeout,i)}function Yd(e,t,i,n){const r=nn({},zd,n);let o=r.timeout;const s=async()=>{await Ip(o),o*=r.timeoutFactor,o=Math.min(r.maxRetryTimeout,o)};let a=!1;const c=new fo(async(n,o)=>{t=t||(()=>!1),i=i||(()=>!0);for(let c=0;c<r.maxRetryCount;c+=1){if(a)return o(new pl(ll.OPERATION_ABORTED));try{const i=await e();if(!t(i,c))return n(i);if(c+1===r.maxRetryCount)return n(i);await s()}catch(e){if(!i(e,c))return o(e);if(c+1===r.maxRetryCount)return o(e);await s()}}});return c.cancel=()=>a=!0,c}let Kd=!1;const Jd=new class extends Mu{};function Xd(){const e=ma();if(!Kd){const t=i=>{i.preventDefault(),Kd=!1,"Android"!==e.os||"Chrome"!==e.name&&e.name!==ha.WECHAT?(document.body.removeEventListener("touchstart",t,!0),document.body.removeEventListener("mousedown",t,!0)):document.body.removeEventListener("click",t,!0)};Kd=!0,"Android"!==e.os||"Chrome"!==e.name&&e.name!==ha.WECHAT?(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0)):document.body.addEventListener("click",t,!0),Rc.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Jd.onAutoplayFailed?Jd.onAutoplayFailed():Jd.onAudioAutoplayFailed?Rc.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):Rc.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),Jd.emit("autoplay-failed")}}function eh(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function th(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=eh(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=eh(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}function ih(e={report:rh}){return function(t,i,n){const r=t[i];if("function"==typeof r){const o="AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name;n.value=function(...t){var n;const s=e.report.reportApiInvoke(this._sessionId||null,{name:Je(n="".concat(o,".")).call(n,i),options:t,tag:Ll.TRACER});try{const e=r.apply(this,t);return s.onSuccess(),e}catch(e){throw s.onError(e),e}}}return n}}function nh(e={report:rh}){return function(t,i,n){const r=t[i];if("function"==typeof r){const o="AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name;n.value=async function(...t){var n;const s=e.report.reportApiInvoke(this._sessionId||null,{name:Je(n="".concat(o,".")).call(n,i),options:t,tag:Ll.TRACER});try{const e=await r.apply(this,t);return s.onSuccess(),e}catch(e){throw s.onError(e),e}}}return n}}const rh=new class{constructor(){var e,t;this.baseInfoMap=new Mi,this.clientList=Zc,this.keyEventUploadPendingItems=[],this.normalEventUploadPendingItems=[],this.apiInvokeUploadPendingItems=[],this.apiInvokeCount=0,this.ltsList=[],this.lastSendNormalEventTime=Ma(),this.customReportCount=0,this.eventUploadTimer=window.setInterval(Ko(e=this.doSend).call(e,this),jc("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(Ko(t=this.appendSessionId).call(t,this),jc("EVENT_REPORT_SEND_INTERVAL"))}reportApiInvoke(e,t,i){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const n=Ma();this.apiInvokeCount+=1;const r=this.apiInvokeCount,o=()=>({tag:t.tag,invokeId:r,sid:e,name:t.name,apiInvokeTime:n,options:t.options,states:t.states||null}),s=!!jc("SHOW_REPORT_INVOKER_LOG");s&&Rc.info("".concat(t.name," start"),t.options);let a=!1;Ip(t.timeout).then(()=>{a||(this.sendApiInvoke(th({},o(),{error:ll.API_INVOKE_TIMEOUT,success:!1})),Rc.debug("".concat(t.name," timeout")))});const c=new pl(ll.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const n=()=>{if(a)throw c;return a=!0,this.sendApiInvoke(th({},o(),{success:!0},t.reportResult&&{result:e})),s&&Rc.info("".concat(t.name," onSuccess")),e};return i?$p(n,t.name+"Success",i,()=>a=!0):n()},onError:e=>{const n=()=>{if(a)throw e;a=!0,this.sendApiInvoke(th({},o(),{success:!1,error:e.toString()})),s&&Rc.info("".concat(t.name," onFailure"),e.toString())};return i?$p(n,t.name+"Error",i,()=>a=!0):n()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const i=Ma(),n=this.createBaseInfo(e,i);n.cname=t.cname;const r=nn({},{willUploadConsoleLog:jc("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:kc?"global":"oversea",areas:jc("AREAS")&&jc("AREAS").join(",")},t.extend),o=Ma(),s=th({},n,{eventType:wl.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:wc,lts:o,elapse:o-i,extend:ve(r),mode:t.mode,process:jc("PROCESS_ID"),success:!0,version:Oc});this.send({type:Ol.SESSION,data:s},!0)}joinChooseServer(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=th({},n,{eventType:wl.JOIN_CHOOSE_SERVER,lts:r,eventElapse:r-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:r-i.startTime,success:t.succ,chooseServerAddrList:ve(t.serverList),uid:t.uid?Cn(t.uid):null,cid:t.cid?Cn(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0});this.send({type:Ol.JOIN_CHOOSE_SERVER,data:o},!0)}reqUserAccount(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=th({},n,{eventType:wl.REQ_USER_ACCOUNT,lts:r,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:r-i.startTime,eventElapse:r-t.lts,extend:ve(t.extend)});this.send({type:Ol.REQ_USER_ACCOUNT,data:o},!0)}joinGateway(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info;t.vid&&(n.vid=t.vid),n.uid=t.uid,n.cid=t.cid;const r=Ma(),o=th({},n,{eventType:wl.JOIN_GATEWAY,lts:r,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,elapse:r-i.startTime,eventElapse:r-t.lts});t.succ&&(i.lastJoinSuccessTime=r),this.send({type:Ol.JOIN_GATEWAT,data:o},!0)}joinChannelTimeout(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=Ma(),r=th({},i.info,{lts:n,timeout:t,elapse:n-i.startTime});this.send({type:Ol.JOIN_CHANNEL_TIMEOUT,data:r},!0)}publish(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=th({},n,{eventType:wl.PUBLISH,lts:r,eventElapse:t.eventElapse,elapse:r-i.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:Ol.PUBLISH,data:o},!0)}subscribe(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=th({},n,{eventType:wl.SUBSCRIBE,lts:r,eventElapse:t.eventElapse,elapse:r-i.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid});"string"==typeof t.peerid?o.peerSuid=t.peerid:o.peer=t.peerid,this.send({type:Ol.SUBSCRIBE,data:o},!0)}wsCompressorInit(e){var t;const i=[...jd(t=this.baseInfoMap).call(t)],n=i.length?i[0]:"UnableToGetSid",r=this.baseInfoMap.get(n);if(!r)return;const o=r.info,s=Ma(),a=th({},o,{eventType:wl.WS_COMPRESSOR_INIT,lts:s,eventElapse:e.eventElapse,elapse:s-r.startTime,status:e.status?1:2});this.send({type:Ol.WS_COMPRESSOR_INIT,data:a},!0)}firstRemoteFrame(e,t,i,n){const r=this.baseInfoMap.get(e);if(!r)return;const o=r.info,s=Ma(),a=th({},o,{},n,{elapse:s-r.startTime,eventType:t,lts:s});this.send({type:i,data:a},!0)}onGatewayStream(e,t,i,n){const r=this.baseInfoMap.get(e);if(!r)return;const o=th({},r.info,{},n,{eventType:t,lts:Ma()});this.send({type:i,data:o},!0)}streamSwitch(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=th({},n,{eventType:wl.STREAM_SWITCH,lts:r,isDual:t.isdual,elapse:r-i.startTime,success:t.succ});this.send({type:Ol.STREAM_SWITCH,data:o},!0)}requestProxyAppCenter(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=th({},n,{eventType:wl.REQUEST_PROXY_APPCENTER,lts:r,eventElapse:r-t.lts,elapse:r-i.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:Ol.REQUEST_PROXY_APPCENTER,data:o},!0)}requestProxyWorkerManager(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=th({},n,{eventType:wl.REQUEST_PROXY_WORKER_MANAGER,lts:r,eventElapse:r-t.lts,elapse:r-i.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:Ol.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}setProxyServer(e){this.proxyServer=e,e?Rc.debug("reportProxyServerurl: ".concat(e)):Rc.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=th({},n,{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:r,elapse:r-i.startTime,joinChannelSuccessElapse:r-(i.lastJoinSuccessTime||r)});this.send({type:Ol.PEER_PUBLISH_STATUS,data:o},!0)}workerEvent(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=Tp(th({},n,{},t,{elapse:r-i.startTime,lts:r,productType:"WebRTC"}),"payload",1300);Ji(o).call(o,e=>this.send({type:Ol.WORKER_EVENT,data:e},!0))}apworkerEvent(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=th({},n,{},t,{elapse:r-i.startTime,lts:r});this.send({type:Ol.AP_WORKER_EVENT,data:o},!0)}joinWebProxyAP(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=th({},n,{},t,{elapse:r-i.startTime,lts:r,extend:t.extend||void 0});this.send({type:Ol.JOIN_WEB_PROXY_AP,data:o},!0)}WebSocketQuit(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=th({},n,{},t,{elapse:r-i.startTime,lts:r});this.send({type:Ol.WEBSOCKET_QUIT,data:o},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>jc("CUSTOM_REPORT_LIMIT"))throw new pl(ll.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const i=vo(t).call(t,t=>({type:Ol.USER_ANALYTICS,data:th({sid:e},t)})),n={msgType:"EventMessages",sentTs:Math.round(Ma()/1e3),payloads:vo(i).call(i,e=>ve(e))};try{await this.postDataToStatsCollector(n)}catch(e){throw Rc.error("send custom report message failed",e.toString()),new pl(ll.CUSTOM_REPORT_SEND_FAILED,e.message)}}autoplayFailed(e,t,i,n){if(!e)return;const r=this.baseInfoMap.get(e);if(!r)return;const o=r.info,s=Ma(),a=th({},o,{vid:void 0===o.vid?0:Number(o.vid),lts:s,elapse:s-r.startTime,cbRegistered:Jd.onAutoplayFailed||Jd.onAudioAutoplayFailed?1:-1,errorMsg:i,mediaType:t,trackId:n,extend:void 0});this.send({type:Ol.AUTOPLAY_FAILED,data:a},!0)}sendApiInvoke(e){const t=jc("NOT_REPORT_EVENT");if(e.tag&&ns(t)&&ns(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const i=this.baseInfoMap.get(e.sid);if(!i)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:n,uid:r,cid:o}=i.info;e.lts=e.lts||Ma();const s={invokeId:e.invokeId,sid:e.sid,cname:n,cid:o,uid:r,lts:e.lts,success:e.success,elapse:e.lts-i.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?ve(e.options):void 0,execStates:e.states?ve(e.states):void 0,execResult:e.result?ve(e.result):void 0,errorCode:e.error?ve(e.error):void 0};return this.send({type:Ol.API_INVOKE,data:s},!1),!0}appendSessionId(){var e;Ji(e=this.clientList).call(e,e=>{if(e._sessionId){const t=this.apiInvokeUploadPendingItems.length;for(let i=0;i<t;i++){const t=this.apiInvokeUploadPendingItems.shift();t&&(t.sid=e._sessionId,this.sendApiInvoke(nn({},t)))}}})}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);var i;this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>jc("NORMAL_EVENT_QUEUE_CAPACITY")&&To(i=this.normalEventUploadPendingItems).call(i,0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Ma()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const i=[],n=[];for(;e.length;){const t=e.shift();i.length<20?i.push(t):n.push(t)}e.push(...n);for(const a of[...i]){var r,o;-1!==Lo(r=this.ltsList).call(r,a.data.lts)?(a.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(a.data.lts)):(this.ltsList.push(a.data.lts),cl(o=this.ltsList).call(o,(e,t)=>e-t))}t||(this.lastSendNormalEventTime=Ma());const s={msgType:"EventMessages",sentTs:Math.round(Ma()/1e3),payloads:vo(i).call(i,e=>ve(e)),vid:(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(i[0])};return i.length&&this.postDataToStatsCollector(s).catch((e=>i=>{var n,r,o;jc("EVENT_REPORT_RETRY")&&(t?this.keyEventUploadPendingItems=Je(n=this.keyEventUploadPendingItems).call(n,e):(this.normalEventUploadPendingItems=Je(r=this.normalEventUploadPendingItems).call(r,e),this.normalEventUploadPendingItems.length>jc("NORMAL_EVENT_QUEUE_CAPACITY")&&(To(o=this.normalEventUploadPendingItems).call(o,0,this.normalEventUploadPendingItems.length-jc("NORMAL_EVENT_QUEUE_CAPACITY")),Rc.warning("report: drop normal events"))))})(i)),e}async postDataToStatsCollector(e,t=!1){var i,n,r;$d.networkState===Pu.OFFLINE&&await fo.race([$d.onlineWaiter,Ip(2*zd.maxRetryTimeout)]);const o=t?"/events/proto-raws":"/events/messages";let s=this.url||(this.proxyServer?Je(i=Je(n="https://".concat(this.proxyServer,"/rs/?h=")).call(n,jc("EVENT_REPORT_DOMAIN"),"&p=6443&d=")).call(i,o):Je(r="https://".concat(jc("EVENT_REPORT_DOMAIN"),":6443")).call(r,o));for(let u=0;u<2;u+=1){var a,c,l;1===u&&(s=this.backupUrl||(this.proxyServer?Je(a=Je(c="https://".concat(this.proxyServer,"/rs/?h=")).call(c,jc("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=")).call(a,o):Je(l="https://".concat(jc("EVENT_REPORT_BACKUP_DOMAIN"),":6443")).call(l,o)));try{t?await qd(s,{timeout:1e4,data:e}):await Wd(s,{timeout:1e4,data:e})}catch(e){if(1===u)throw e;continue}return}}createBaseInfo(e,t){const i=nn({},Rl);return i.sid=e,this.baseInfoMap.set(e,{info:i,startTime:t}),i}reportResourceTiming(e,t){const i=performance.getEntriesByName(e),n=i[i.length-1];n&&this.reportApiInvoke(t,{name:"Client.resourceTiming",options:n,tag:Ll.TRACER}).onSuccess()}};class oh extends Mu{constructor(e,t){super(),this._hints=[],this._isClosed=!1,this._ID=t||Op(8,"track-"),this._originMediaStreamTrack=e,this._mediaStreamTrack=e,Xc(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){if(!e){const e=rh.reportApiInvoke(null,{name:Nl.GET_MEDIA_STREAM_TRACK,options:[],tag:Ll.TRACER});this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?e.onSuccess(this._mediaStreamTrack.label):e.onSuccess("")}return this._mediaStreamTrack}close(){this._isClosed=!0,el(this)}}let sh=1;class ah{constructor(e){var t;this.lockingPromise=fo.resolve(),this.locks=0,this.name="",this.lockId=sh++,e&&(this.name=e),Rc.debug(Je(t="[lock-".concat(this.name,"-")).call(t,this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(e){var t,i,n;let r;this.locks+=1,Rc.debug(Je(t=Je(i=Je(n="[lock-".concat(this.name,"-")).call(n,this.lockId,"] is locked, current queue ")).call(i,this.locks,". ")).call(t,"string"==typeof e?e:""));const o=new fo(t=>{r=()=>{var i,n,r;this.locks-=1,Rc.debug(Je(i=Je(n=Je(r="[lock-".concat(this.name,"-")).call(r,this.lockId,"] is not locked, current queue ")).call(n,this.locks,". ")).call(i,"string"==typeof e?e:"")),t()}}),s=this.lockingPromise.then(()=>r);return this.lockingPromise=this.lockingPromise.then(()=>o),s}}function ch(e,t){return function(i,n,r){const o=i[n];if("function"!=typeof o)throw new Error("Cannot use mutex on object property.");return r.value=async function(...i){var r;const s=this[t];var a;if(!s)throw new Error(Je(a="mutex property key ".concat(t," doesn't exist on ")).call(a,e));const c=await s.lock(Je(r="From ".concat(e,".")).call(r,n));try{return await o.apply(this,i)}finally{c()}},r}}class lh extends oh{constructor(e,t){super(e,t),this._enabled=!0,this._muted=!1,this._isClosed=!1,this._trackProcessors=[],this._handleTrackEnded=()=>{this.onTrackEnded()},this._enabledMutex=new ah("".concat(t)),e.addEventListener("ended",this._handleTrackEnded)}get muted(){return this._muted}get enabled(){return this._enabled}getTrackLabel(){return this._originMediaStreamTrack.label}close(){var e;this._isClosed||(this.stop(),Ji(e=this._trackProcessors).call(e,e=>e.destroy()),this._trackProcessors=[],this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,Rc.debug("[".concat(this.getTrackId(),"] close")),this.emit(vu.NEED_CLOSE),super.close())}async _registerTrackProcessor(e){var t;if(-1!==Lo(t=this._trackProcessors).call(t,e))return;const i=this._trackProcessors[this._trackProcessors.length-1];this._trackProcessors.push(e),e.onOutputChange=async()=>{const t=e.output||this._originMediaStreamTrack;this._mediaStreamTrack=t,this._updatePlayerSource(),await Mp(this,vu.NEED_REPLACE_TRACK,this)},i?(i.onOutputChange=async()=>{i.output&&await e.setInput(i.output)},await e.setInput(i.output||i.input||this._originMediaStreamTrack)):await e.setInput(this._originMediaStreamTrack)}_getOutputFromProcessors(){if(0===this._trackProcessors.length)return this._originMediaStreamTrack;const e=this._trackProcessors[this._trackProcessors.length-1];return e.output||e.input||this._originMediaStreamTrack}async _updateOriginMediaStreamTrack(e,t){if(e!==this._originMediaStreamTrack){if(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop(),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._trackProcessors.length>0){await this._trackProcessors[0].setInput(e);const t=this._getOutputFromProcessors();this._mediaStreamTrack=t}else this._mediaStreamTrack=this._originMediaStreamTrack;this._updatePlayerSource(),await Mp(this,vu.NEED_REPLACE_TRACK,this)}}_getDefaultPlayerConfig(){return{}}onTrackEnded(){Rc.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Au.TRACK_ENDED)}stateCheck(e,t){var i,n,r;if(Rc.debug(Je(i=Je(n=Je(r="check track state, [muted: ".concat(this._muted,", enabled: ")).call(r,this._enabled,"] to [")).call(n,e,": ")).call(i,t,"]")),fl(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new pl(ll.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new pl(ll.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}}var uh;!function(e){e.IOS_15_INTERRUPTION_START="ios15-interruption-start",e.IOS_15_INTERRUPTION_END="ios15-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change"}(uh||(uh={}));const dh=window.AudioContext||window.webkitAudioContext;let hh=null;const ph=new class extends Mu{constructor(){super(...arguments),this.onLocalAudioTrackMute=()=>{Rc.info("ios15-interruption-start"),this.emit(uh.IOS_15_INTERRUPTION_START)},this.onLocalAudioTrackUnmute=async()=>{Rc.info("ios15-interruption-end"),"running"!==this.curState||this.duringInterruption?Rc.info("ios15-interruption-end-canceled"):(hh&&await hh.suspend(),this.emit(uh.IOS_15_INTERRUPTION_END))}}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(e){Rc.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){Rc.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function fh(){dh?(Rc.info("create audio context"),hh=new dh,ph.curState=hh.state,hh.onstatechange=()=>{var e;ph.prevState=ph.curState,ph.curState=hh?hh.state:void 0,(Ra()||Na())&&"running"===ph.prevState&&"interrupted"===ph.curState&&(Rc.info("ios-interruption-start"),ph.emit(uh.IOS_INTERRUPTION_START)),(Ra()||Na())&&"interrupted"===ph.prevState&&"running"===ph.curState&&(Rc.info("ios-interruption-end"),ph.emit(uh.IOS_INTERRUPTION_END)),ph.prevState!==ph.curState&&(Rc.debug("AudioContext State Change",Je(e="".concat(ph.prevState,"=>")).call(e,ph.curState)),ph.emit(uh.STATE_CHANGE))},async function(e){const t=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let i,n=!1,r=!1,o=!1;function s(t){"running"===e.state?a(!1):Ra()||Na()?"suspended"===e.state&&(a(!0),t&&e.resume().then(l,l)):"closed"!==e.state&&(a(!0),t&&e.resume().then(l,l))}function a(e){if(n!==e){n=e;for(let i=0,n=t;i<n.length;i+=1){const t=n[i];e?window.addEventListener(t,u,{capture:!0,passive:!0}):window.removeEventListener(t,u,{capture:!0,passive:!0})}}}function c(){s(!0)}function l(){s(!1)}function u(){s(!0)}function d(e){if(!o)if(i.paused)if(e){h(!1),o=!0;let t=void 0;try{t=i.play(),t?t.then(p,p):(i.addEventListener("playing",p),i.addEventListener("abort",p),i.addEventListener("error",p))}catch(e){p()}}else h(!0);else h(!1)}function h(e){if(r!==e){r=e;for(let i=0,n=t;i<n.length;i++){const t=n[i];e?window.addEventListener(t,f,{capture:!0,passive:!0}):window.removeEventListener(t,f,{capture:!0,passive:!0})}}}function p(){i.removeEventListener("playing",p),i.removeEventListener("abort",p),i.removeEventListener("error",p),o=!1,d(!1)}function f(){d(!0)}if(Ra()){const t=e.createMediaStreamDestination(),n=document.createElement("div");n.innerHTML="<audio x-webkit-airplay='deny'></audio>",i=n.children.item(0),i.controls=!1,i.disableRemotePlayback=!0,i.preload="auto",i.srcObject=t.stream,d(!0)}ph.on(uh.STATE_CHANGE,c),s(!1)}(hh)):Rc.error("your browser is not support web audio")}function gh(){if(!hh){if(fh(),!hh)throw new pl(ll.NOT_SUPPORTED,"can not create audio context");return hh}return hh}function mh(e){if(function(){if(null!==_h)return _h;const e=gh(),t=e.createBufferSource(),i=e.createGain(),n=e.createGain();t.connect(i),t.connect(n),t.disconnect(i);let r=!1;try{t.disconnect(i)}catch(e){r=!0}return t.disconnect(),_h=r,r}())return;Rc.debug("polyfill audio node");const t=e.connect,i=e.disconnect;e.connect=(i,n,r)=>{var o;return e._inputNodes||(e._inputNodes=[]),ns(o=e._inputNodes).call(o,i)||(i instanceof AudioNode?(e._inputNodes.push(i),t.call(e,i,n,r)):t.call(e,i,n)),e},e.disconnect=(n,r,o)=>{i.call(e),n?Up(e._inputNodes,n):e._inputNodes=[];for(const i of e._inputNodes)t.call(e,i)}}let _h=null;function vh(e,t){const i=1/t,n=gh();let r=n.createGain();r.gain.value=0,r.connect(n.destination);let o=!1;const s=()=>{if(o)return void(r=null);const t=n.createOscillator();t.onended=s,t.connect(r),t.start(0),t.stop(n.currentTime+i),e(n.currentTime)};return s(),()=>{o=!0}}class Eh extends Mu{constructor(){super(),this.isPlayed=!1,this.audioOutputLevel=0,this.isDestroyed=!1,this.isNoAudioInput=!1,this._noAudioInputCount=0,this.context=gh(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),mh(this.outputNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.smoothingTimeConstant=.4,this.analyserNode.fftSize=2048}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(zl.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){const i=e.outputBuffer.getChannelData(t);for(let e=0;e<i.length;e+=1)i[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Fu().webAudioMediaStreamDest)throw new pl(ll.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){"running"!==this.context.state&&Vp(()=>{ph.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1}getAccurateVolumeLevel(){if(!this.context||Ra()||Na()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const e=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(e);let t=0;for(let i=0;i<e.length;i++)t+=i<64?Math.abs(10*e[i]):Math.abs(6*e[i]/15);return t/e.length/255}async checkHasAudioInput(e=0){if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;if(Ra()||Na()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return!1;const t=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(t);let i=!1;for(let n=0;n<t.length;n++)0!==t[n]&&(i=!0);return i?(this.isNoAudioInput=!1,!0):(await Ip(200),await this.checkHasAudioInput(e?e+1:1)&&i)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}setMute(e){e?(this.disconnect(),this.audioOutputLevel=0):this.connect()}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){this.sourceNode&&this.sourceNode.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){this.sourceNode&&this.sourceNode.connect(this.outputNode),this.outputNode.connect(this.analyserNode)}}class Ah extends Eh{constructor(e,t){var i;if(super(),this.isCurrentTrackCloned=!1,this.isRemoteTrack=!1,this.rebuildWebAudio=async()=>{if(Rc.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void Rc.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>Rc.info("resume success")),Rc.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0;const t=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(t),mh(this.sourceNode),this.analyserNode=this.context.createAnalyser();const i=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(i,this.context.currentTime),mh(this.outputNode),this.connect(),this.audioElement.srcObject=t,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()},"audio"!==e.kind)throw new pl(ll.UNEXPECTED_ERROR);this.track=e;const n=new MediaStream([this.track]);this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(n),mh(this.sourceNode),this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=n;const r=ma();t&&r.os===da.IOS&&Number(null===(i=r.osVersion)||void 0===i?void 0:i.split(".")[0])<15&&(ph.on(uh.STATE_CHANGE,()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(e=>{e||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}get isFreeze(){return!1}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;const t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),mh(this.sourceNode),this.sourceNode.connect(this.outputNode),this.audioElement.srcObject=t}destroy(){this.audioElement.srcObject=null,this.audioElement.remove(),ph.off("state-change",this.rebuildWebAudio),super.destroy()}}async function yh(e,t){const i=(e,t)=>e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t,n={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:i(t.height,1080),maxWidth:i(t.width,1920)}}};return t.frameRate&&"number"!=typeof t.frameRate?(n.video.mandatory.maxFrameRate=t.frameRate.max,n.video.mandatory.minFrameRate=t.frameRate.min):"number"==typeof t.frameRate&&(n.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(n)}async function Sh(e){const t=await Ch(e.mediaSource),i=await function(e){return new fo((t,i)=>{const n=document.createElement("div");n.innerText="share screen",n.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const r=document.createElement("div");r.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const o=document.createElement("div");o.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",o.setAttribute("style","height: 12%;");const s=document.createElement("div");s.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const a=document.createElement("div");a.setAttribute("style","text-align: right; padding: 16px 0;");const c=document.createElement("button");c.innerHTML="cancel",c.setAttribute("style","width: 85px;"),c.onclick=()=>{document.body.removeChild(l);const e=new Error("NotAllowedError");e.name="NotAllowedError",i(e)},a.appendChild(c),r.appendChild(o),r.appendChild(s),r.appendChild(a);const l=document.createElement("div");l.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),l.appendChild(n),l.appendChild(r),document.body.appendChild(l),vo(e).call(e,e=>{if(e.id){const i=document.createElement("div");i.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let n=e.thumbnail;const{width:r}=n.getSize();r>1920&&(n=n.resize({width:1920})),i.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+n.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",i.onclick=()=>{document.body.removeChild(l),t(e.id)},s.appendChild(i)}})})}(t);return await yh(i,e)}async function Ch(e){let t=["window","screen"];"application"!==e&&"window"!==e||(t=["window"]),"screen"===e&&(t=["screen"]);const i=Th();if(!i)throw new pl(ll.ELECTRON_IS_NULL);let n=null;try{n=i.desktopCapturer.getSources({types:t})}catch(e){n=null}n&&n.then||(n=new fo((e,n)=>{i.desktopCapturer.getSources({types:t},(t,i)=>{t?n(t):e(i)})}));try{return await n}catch(e){throw new pl(ll.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.toString())}}let bh=null;function Th(){if(bh)return bh;try{return bh=window.require("electron"),bh}catch(e){return null}}const Ih=new ah("safari");let Rh=!1,wh=!1;async function Oh(e,t){let i=0,n=null;for(;i<2;)try{n=await kh(e,t,i>0);break}catch(e){var r,o;if(e instanceof pl)throw Rc.error(Je(o="[".concat(t,"] ")).call(o,e.toString())),e;const n=Nh(e.name||e.code||e,e.message);if(n.code===ll.MEDIA_OPTION_INVALID){Rc.debug("[".concat(t,"] detect media option invalid, retry")),i+=1,await Ip(500);continue}throw Rc.error(Je(r="[".concat(t,"] ")).call(r,n.toString())),n}if(!n)throw new pl(ll.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return n}async function kh(e,t,i){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new pl(ll.NOT_SUPPORTED,"can not find getUserMedia");i&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const n=Fu(),r=new MediaStream;if(e.audioSource&&r.addTrack(e.audioSource),e.videoSource&&r.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return Rc.debug("Using Video Source/ Audio Source"),r;if(e.screen)if(Th())e.screen.sourceId?Lh(r,await yh(e.screen.sourceId,e.screen)):Lh(r,await Sh(e.screen));else if(ba()&&e.screen.extensionId&&e.screen.mandatory){if(!n.getStreamFromExtension)throw new pl(ll.NOT_SUPPORTED,"This browser does not support screen sharing");Rc.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));const i=await(s=e.screen.extensionId,a=t,new fo((e,t)=>{try{chrome.runtime.sendMessage(s,{getStream:!0},i=>{if(!i||!i.streamId)return Rc.error("[".concat(a,"] No response from Chrome Plugin. Plugin not installed properly"),i),void t(new pl(ll.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(i.streamId)})}catch(e){var i;Rc.error(Je(i="[".concat(a,"] AgoraRTC screensharing plugin is not accessible(")).call(i,s,")"),e.toString()),t(new pl(ll.CHROME_PLUGIN_NOT_INSTALL))}}));e.screen.mandatory.chromeMediaSourceId=i,Lh(r,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(n.getDisplayMedia){e.screen.mediaSource&&Cu(e.screen.mediaSource);const i={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource};Rc.debug("[".concat(t,"] getDisplayMedia:"),ve({video:i,audio:!!e.screenAudio})),Lh(r,await navigator.mediaDevices.getDisplayMedia({video:i,audio:!!e.screenAudio}))}else{if(!Ia())throw Rc.error("[".concat(t,"] This browser does not support screenSharing")),new pl(ll.NOT_SUPPORTED,"This browser does not support screen sharing");{var o;e.screen.mediaSource&&Cu(e.screen.mediaSource);const i={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};Rc.debug(Je(o="[".concat(t,"] getUserMedia: ")).call(o,ve(i))),Lh(r,await navigator.mediaDevices.getUserMedia(i))}}var s,a;if(!e.video&&!e.audio)return r;const c={video:e.video,audio:e.audio};Rc.debug("[".concat(t,"] GetUserMedia"),ve(c)),ma();let l,u=null;(Ta()||Ra()||ya())&&(u=await Ih.lock());try{l=await navigator.mediaDevices.getUserMedia(c)}catch(e){throw u&&u(),e}return c.audio&&(Rh=!0),c.video&&(wh=!0),Lh(r,l),u&&u(),r}function Nh(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":var i;return new pl(ll.MEDIA_OPTION_INVALID,Je(i="".concat(e,": ")).call(i,t));case"NotFoundError":case"DevicesNotFoundError":var n;return new pl(ll.DEVICE_NOT_FOUND,Je(n="".concat(e,": ")).call(n,t));case"NotSupportedError":var r;return new pl(ll.NOT_SUPPORTED,Je(r="".concat(e,": ")).call(r,t));case"NotReadableError":var o;return new pl(ll.NOT_READABLE,Je(o="".concat(e,": ")).call(o,t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":var s;return new pl(ll.PERMISSION_DENIED,Je(s="".concat(e,": ")).call(s,t));case"ConstraintNotSatisfiedError":var a;return new pl(ll.CONSTRAINT_NOT_SATISFIED,Je(a="".concat(e,": ")).call(a,t));default:var c;return Rc.error("getUserMedia unexpected error",e),new pl(ll.UNEXPECTED_ERROR,Je(c="".concat(e,": ")).call(c,t))}}function Lh(e,t){const i=e.getVideoTracks()[0],n=e.getAudioTracks()[0],r=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(n&&e.removeTrack(n),e.addTrack(o)),r&&(i&&e.removeTrack(i),e.addTrack(r))}const Ph=new class extends Mu{constructor(){super(),this._state=Pl.IDLE,this.isAccessMicrophonePermission=!1,this.isAccessCameraPermission=!1,this.lastAccessMicrophonePermission=!1,this.lastAccessCameraPermission=!1,this.checkdeviceMatched=!1,this.deviceInfoMap=new Mi,this.init().then(()=>{var e;navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",Ko(e=this.updateDevicesInfo).call(e,this)),window.setInterval(()=>!La()&&jc("ENUMERATE_DEVICES_INTERVAL")&&this.updateDevicesInfo(),6e4)}).catch(e=>Rc.error(e.toString()))}get state(){return this._state}set state(e){e!==this._state&&(this.emit(Dl.STATE_CHANGE,e),this._state=e)}async enumerateDevices(e,t,i=!1){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new pl(ll.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const n=await navigator.mediaDevices.enumerateDevices(),r=this.checkMediaDeviceInfoIsOk(n);let o=!this.isAccessMicrophonePermission&&e,s=!this.isAccessCameraPermission&&t;r.audio&&(o=!1),r.video&&(s=!1);let a=null,c=null,l=null;if(!i&&(o||s)){if(Ih.isLocked&&(Rc.debug("[device manager] wait GUM lock"),(await Ih.lock())(),Rc.debug("[device manager] GUM unlock")),Rh&&(o=!1,this.isAccessMicrophonePermission=!0),wh&&(s=!1,this.isAccessCameraPermission=!0),Rc.debug("[device manager] check media device permissions",e,t,o,s),o&&s){try{l=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(e){const t=Nh(e.name||e.code||e,e.message);if(t.code===ll.PERMISSION_DENIED)throw t;Rc.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(o){try{a=await navigator.mediaDevices.getUserMedia({audio:e})}catch(e){const t=Nh(e.name||e.code||e,e.message);if(t.code===ll.PERMISSION_DENIED)throw t;Rc.warning("getUserMedia failed in getDevices",t)}this.isAccessMicrophonePermission=!0}else if(s){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(e){const t=Nh(e.name||e.code||e,e.message);if(t.code===ll.PERMISSION_DENIED)throw t;Rc.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0}Rc.debug("[device manager] mic permission",e,"cam permission",t)}try{var u,d,h;const e=await navigator.mediaDevices.enumerateDevices();return a&&Ji(u=a.getTracks()).call(u,e=>e.stop()),c&&Ji(d=c.getTracks()).call(d,e=>e.stop()),l&&Ji(h=l.getTracks()).call(h,e=>e.stop()),a=null,c=null,l=null,e}catch(e){var p,f,g;return a&&Ji(p=a.getTracks()).call(p,e=>e.stop()),c&&Ji(f=c.getTracks()).call(f,e=>e.stop()),l&&Ji(g=l.getTracks()).call(g,e=>e.stop()),a=null,c=null,l=null,new pl(ll.ENUMERATE_DEVICES_FAILED,e.toString()).throw()}}async getRecordingDevices(e=!1){const t=await this.enumerateDevices(!0,!1,e);return Gn(t).call(t,e=>"audioinput"===e.kind)}async getCamerasDevices(e=!1){const t=await this.enumerateDevices(!1,!0,e);return Gn(t).call(t,e=>"videoinput"===e.kind)}async getSpeakers(e=!1){const t=await this.enumerateDevices(!0,!1,e);return Gn(t).call(t,e=>"audiooutput"===e.kind)}searchDeviceNameById(e){const t=this.deviceInfoMap.get(e);return t?t.device.label||t.device.deviceId:null}searchDeviceIdByName(e){var t;let i=null;return Ji(t=this.deviceInfoMap).call(t,t=>{t.device.label===e&&(i=t.device.deviceId)}),i}async getDeviceById(e){const t=await this.enumerateDevices(!0,!0,!0),i=Qo(t).call(t,t=>t.deviceId===e);if(!i)throw new pl(ll.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return i}async init(){this.state=Pl.INITING;try{await this.updateDevicesInfo(),this.state=Pl.INITEND}catch(e){throw Rc.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=Pl.IDLE,function(){return"boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname}()||new pl(ll.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){var e;const t=await this.enumerateDevices(!0,!0,!0),i=Ma(),n=[];if(t[0]&&t[0].label&&!1===this.checkdeviceMatched){this.checkdeviceMatched=!0;const e=Qo(t).call(t,e=>"audioinput"===e.kind&&"default"===e.deviceId),i=Qo(t).call(t,e=>"audiooutput"===e.kind&&"default"===e.deviceId);if(e&&i)if(i.groupId===e.groupId){var r;Rc.debug(Je(r="[device-check] default input ".concat(e.label," and output ")).call(r,i.label," is the same group"))}else{var o;Rc.warning(Je(o="[device-check] default input ".concat(e.label," and output ")).call(o,i.label," is not the same group"))}else Rc.debug("[device-check] default input or output not found")}const s=this.checkMediaDeviceInfoIsOk(t);if(Ji(t).call(t,e=>{if(!e.deviceId)return;const t=this.deviceInfoMap.get(e.deviceId);if("ACTIVE"!==(t?t.state:"INACTIVE")){const t={initAt:i,updateAt:i,device:e,state:"ACTIVE"};this.deviceInfoMap.set(e.deviceId,t),n.push(t)}t&&(t.updateAt=i)}),Ji(e=this.deviceInfoMap).call(e,(e,t)=>{"ACTIVE"===e.state&&e.updateAt!==i&&(e.state="INACTIVE",n.push(e))}),this.state!==Pl.INITEND)return s.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(s.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));Ji(n).call(n,e=>{switch(e.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Dl.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(Dl.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Dl.PLAYOUT_DEVICE_CHANGED,e)}}),s.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),s.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=Gn(e).call(e,e=>"audioinput"===e.kind),i=Gn(e).call(e,e=>"videoinput"===e.kind),n={audio:!1,video:!1};for(const r of t)if(r.label&&r.deviceId){n.audio=!0;break}for(const r of i)if(r.label&&r.deviceId){n.video=!0;break}return n}},Dh=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended"],Mh=new class{constructor(){this.elementMap=new Mi,this.elementStateMap=new Mi,this.elementsNeedToResume=[],this.sinkIdMap=new Mi,this.autoResumeAfterInterruption=()=>{var e,t;Ji(e=Bd(Dd(t=this.elementMap).call(t))).call(e,([e,t])=>{const i=this.elementStateMap.get(e),n=t.srcObject.getAudioTracks()[0];wa()?n&&"live"===n.readyState&&"running"===ph.curState&&(Rc.debug("auto resume after interruption for iOS 15"),t.pause(),t.play()):i&&"paused"===i&&n&&"live"===n.readyState&&"running"===ph.curState&&(Rc.debug("auto resume after interruption for iOS"),t.play())})},this.autoResumeAfterInterruptionOnIOS15=()=>{var e,t;Ji(e=Bd(Dd(t=this.elementMap).call(t))).call(e,([e,t])=>{const i=t.srcObject.getAudioTracks()[0];i&&"live"===i.readyState&&(Rc.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),t.pause(),t.play())})},this.autoResumeAudioElement(),ph.on(uh.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),ph.on(uh.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),ph.on(uh.STATE_CHANGE,()=>{Ra()&&"suspended"===ph.prevState&&"running"===ph.curState&&this.autoResumeAfterInterruption()})}async setSinkID(e,t){const i=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),i)try{await i.setSinkId(t)}catch(e){throw new pl(ll.PERMISSION_DENIED,"can not set sink id: "+e.toString())}}play(e,t,i,n){if(this.elementMap.has(t))return;const r=document.createElement("audio");r.autoplay=!0,r.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,r),this.elementMap.set(t,r),this.elementStateMap.set(t,dl.INIT),this.setVolume(t,i);const o=this.sinkIdMap.get(t);if(o)try{r.setSinkId(o).catch(e=>{Rc.warning("[".concat(t,"] set sink id failed"),e.toString())})}catch(e){Rc.warning("[".concat(t,"] set sink id failed"),e.toString())}const s=r.play();s&&s.then&&s.catch(e=>{n&&rh.autoplayFailed(n,"audio",e.message,t),Rc.warning("audio element play warning",e.toString()),this.elementMap.has(t)&&"NotAllowedError"===e.name&&(Rc.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(r),Vp(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),Xd()}))})}updateTrack(e,t){const i=this.elementMap.get(e);i&&(i.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)}setVolume(e,t){const i=this.elementMap.get(e);i&&(t=Math.max(0,Math.min(100,t)),i.volume=t/100)}stop(e){var t,i;const n=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!n)return;const r=Lo(t=this.elementsNeedToResume).call(t,n);To(i=this.elementsNeedToResume).call(i,r,1),n.srcObject=null,n.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){Ji(Dh).call(Dh,i=>{t.addEventListener(i,t=>{var i,n;const r=this.elementStateMap.get(e),o="pause"===t.type?"paused":t.type;Rc.debug(Je(i=Je(n="[".concat(e,"] audio-element-status change ")).call(n,r," => ")).call(i,o)),this.elementStateMap.set(e,o)})})}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){const e=()=>{var e;Ji(e=this.elementsNeedToResume).call(e,e=>{e.play().then(e=>{Rc.debug("Auto resume audio element success")}).catch(e=>{Rc.warning("Auto resume audio element failed!",e)})}),this.elementsNeedToResume=[]};new fo(e=>{document.body?e():window.addEventListener("load",()=>e())}).then(()=>{const t=ma();"Android"!==t.os||"Chrome"!==t.name&&t.name!==ha.WECHAT?(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)):document.body.addEventListener("click",e,!0)})}};function xh(){return function(e,t,i){const n=e[t];"function"==typeof n&&(i.value=function(...e){this._isClosed&&new pl(ll.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");const t=n.apply(this,e);return t instanceof fo?new fo((e,i)=>{t.then(e).catch(i)}):t})}}function Bh(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function Uh(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=Bh(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=Bh(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}var Fh=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Un(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&hn(t,i,s),s},Vh=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class jh extends lh{constructor(e,t,i){super(e,i),this.trackMediaType="audio",this._enabled=!0,this._volume=100,this._useAudioElement=!1,this._bypassWebAudio=!1,this._encoderConfig=t,this._source=new Ah(e)}get isPlaying(){return this._useAudioElement?Mh.isPlaying(this.getTrackId()):this._source.isPlayed}setVolume(e){ml(e,"volume",0,1e3);const t=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),e]},300);this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&Mh.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return Rc.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio.")),void t.onSuccess();const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,Mp(this,vu.NEED_REPLACE_TRACK,this).then(()=>{Rc.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(e=>{Rc.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)}))}catch(e){}t.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){const t=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[this.getTrackId(),e]});if(!this._useAudioElement)throw new pl(ll.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{await Mh.setSinkID(this.getTrackId(),e)}catch(e){throw t.onError(e),e}t.onSuccess()}async setEnabled(e,t,i){if(!i){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{var n;i||(this._enabled=!0),await Mp(this,vu.NEED_ENABLE_TRACK,this),Rc.info(Je(n="[".concat(this.getTrackId(),"] setEnabled to ")).call(n,e," success"))}catch(e){throw i||(this._enabled=!1),Rc.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}}else{this._originMediaStreamTrack.enabled=!1,i||(this._enabled=!1);try{await Mp(this,vu.NEED_DISABLE_TRACK,this)}catch(e){throw i||(this._enabled=!0),Rc.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}}}async setMuted(e){var t;e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._mediaStreamTrack.enabled=!e,Rc.debug(Je(t="[".concat(this.getTrackId(),"] start set muted: ")).call(t,e)),e?await Mp(this,vu.NEED_MUTE_TRACK,this):await Mp(this,vu.NEED_UNMUTE_TRACK,this))}getStats(){Hp(()=>{Rc.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning");const e=xp(this,vu.GET_STATS);return e||Uh({},Xl)}setAudioFrameCallback(e,t=4096){if(!e)return this._source.removeAllListeners(zl.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(zl.ON_AUDIO_BUFFER),this._source.on(zl.ON_AUDIO_BUFFER,t=>e(t))}play(){const e=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(Rc.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Mh.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),e.onSuccess()}stop(){const e=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Mh.stop(this.getTrackId()):this._source.stop(),e.onSuccess()}close(){super.close(),this._source.destroy()}_updatePlayerSource(){Rc.debug("[".concat(this.getTrackId(),"] update player source track")),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Mh.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),e.addEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=e,this._source.updateTrack(this._originMediaStreamTrack),this._mediaStreamTrack!==this._source.outputTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mp(this,vu.NEED_REPLACE_TRACK,this)))}renewMediaStreamTrack(){return fo.resolve(void 0)}}Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[String]),Vh("design:returntype",fo)],jh.prototype,"setPlaybackDevice",null),Fh([ch("LocalAudioTrack","_enabledMutex"),xh(),Vh("design:type",Function),Vh("design:paramtypes",[Boolean,Object,Boolean]),Vh("design:returntype",fo)],jh.prototype,"setEnabled",null),Fh([ch("LocalAudioTrack","_enabledMutex"),xh(),nh({report:rh}),Vh("design:type",Function),Vh("design:paramtypes",[Boolean]),Vh("design:returntype",fo)],jh.prototype,"setMuted",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[]),Vh("design:returntype",Object)],jh.prototype,"getStats",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[Object,Number]),Vh("design:returntype",void 0)],jh.prototype,"setAudioFrameCallback",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[]),Vh("design:returntype",void 0)],jh.prototype,"play",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[]),Vh("design:returntype",void 0)],jh.prototype,"stop",null);class Gh extends jh{constructor(e,t,i,n){super(e,t.encoderConfig?Fc(t.encoderConfig):{},n),this._deviceName="default",this._enabled=!0,this._config=t,this._constraints=i,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),wa()&&ph.bindInterruptDetectorTrack(this)}async setDevice(e){var t,i;const n=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.MIC_AUDIO_TRACK_SET_DEVICE,options:[this.getTrackId(),e]});if(Rc.info(Je(t="[".concat(this.getTrackId(),"] start set device to ")).call(t,e)),this._enabled)try{const t=await Ph.getDeviceById(e),i={};i.audio=Uh({},this._constraints),i.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let n=null;try{n=await Oh(i,this.getTrackId())}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),n=await Oh({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw n.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await Ph.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw n.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}n.onSuccess(),Rc.info(Je(i="[".concat(this.getTrackId(),"] set device to ")).call(i,e," success"))}async setEnabled(e,t,i){if(t)return Rc.debug("[".concat(this.getTrackId,"] setEnabled false (do not close microphone)")),await super.setEnabled(e);if(!i){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),i||(this._enabled=!1);try{await Mp(this,vu.NEED_DISABLE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.toString()),e}return}const n=Uh({},this._constraints),r=Ph.searchDeviceIdByName(this._deviceName);r&&!n.deviceId&&(n.deviceId=r);try{i||(this._enabled=!0);const e=await Oh({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await Mp(this,vu.NEED_ENABLE_TRACK,this)}catch(e){throw i||(this._enabled=!1),Rc.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.toString()),e}Rc.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),wa()&&ph.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Ra()||Na())&&this._enabled&&!this._isClosed&&ph.duringInterruption){const e=async()=>{ph.off(uh.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Rc.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};ph.on(uh.IOS_INTERRUPTION_END,e)}else Rc.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Au.TRACK_ENDED)}async renewMediaStreamTrack(){const e=Uh({},this._constraints),t=Ph.searchDeviceIdByName(this._deviceName);t&&!e.deviceId&&(e.deviceId=t);const i=await Oh({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!0)}}Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[String]),Vh("design:returntype",fo)],Gh.prototype,"setDevice",null),Fh([ch("MicrophoneAudioTrack","_enabledMutex"),xh(),Vh("design:type",Function),Vh("design:paramtypes",[Boolean,Boolean,Boolean]),Vh("design:returntype",fo)],Gh.prototype,"setEnabled",null);class Hh extends jh{constructor(e,t,i,n){super(t.createOutputTrack(),i,n),this.source=e,this._bufferSource=t,this._bufferSource.on(zl.AUDIO_SOURCE_STATE_CHANGE,e=>{this.emit(Au.SOURCE_STATE_CHANGE,e)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){const t=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),e,this.duration]});e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer(),t.onSuccess()}pauseProcessAudioBuffer(){const e=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),e.onSuccess()}seekAudioBuffer(e){const t=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(e),t.onSuccess()}resumeProcessAudioBuffer(){const e=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),e.onSuccess()}stopProcessAudioBuffer(){const e=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),e.onSuccess()}}Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[Object]),Vh("design:returntype",void 0)],Hh.prototype,"startProcessAudioBuffer",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[]),Vh("design:returntype",void 0)],Hh.prototype,"pauseProcessAudioBuffer",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[Number]),Vh("design:returntype",void 0)],Hh.prototype,"seekAudioBuffer",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[]),Vh("design:returntype",void 0)],Hh.prototype,"resumeProcessAudioBuffer",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[]),Vh("design:returntype",void 0)],Hh.prototype,"stopProcessAudioBuffer",null);class Qh extends jh{constructor(){const e=gh().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,Op(8,"track-mix-"));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}get isActive(){for(const e of this.trackList)if(e._enabled&&!e._isClosed&&!e.muted)return!0;return!1}hasAudioTrack(e){var t;return-1!==Lo(t=this.trackList).call(t,e)}addAudioTrack(e){var t;-1===Lo(t=this.trackList).call(t,e)?(Rc.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):Rc.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){var t;if(-1!==Lo(t=this.trackList).call(t,e)){Rc.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}Up(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){var e;const t={};Ji(e=this.trackList).call(e,e=>{e._encoderConfig&&((e._encoderConfig.bitrate||0)>(t.bitrate||0)&&(t.bitrate=e._encoderConfig.bitrate),(e._encoderConfig.sampleRate||0)>(t.sampleRate||0)&&(t.sampleRate=e._encoderConfig.sampleRate),(e._encoderConfig.sampleSize||0)>(t.sampleSize||0)&&(t.sampleSize=e._encoderConfig.sampleSize),e._encoderConfig.stereo&&(t.stereo=!0))}),this._encoderConfig=t}}class Wh extends Mu{constructor(){super(...arguments),this.resultStorage=new Mi}setLocalAudioStats(e,t,i){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(i,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(i,t))}setLocalVideoStats(e,t,i){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(i,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(i,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(i))}setRemoteAudioStats(e,t){const i=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",i,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const i=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",i,this.checkVideoDecode(t))}record(e,t,i){this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const n=this.resultStorage.get(e);if(n&&(n.result.push(i),n.result.length>=5)){var r;const i=ns(r=n.result).call(r,!0);n.isPrevNormal&&!i&&this.emit("exception",qh[e],e,t),!n.isPrevNormal&&i&&this.emit("exception",qh[e]+2e3,e+"_RECOVER",t),n.isPrevNormal=i,n.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof Qh&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}checkFramerateInput(e,t){let i=null;t._encoderConfig&&t._encoderConfig.frameRate&&(i=fp(t._encoderConfig.frameRate));const n=e.captureFrameRate;return!i||!n||!(i>10&&n<5||i<10&&i>=5&&n<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof Qh&&!t.isActive||!!t.muted||0!==e.sendBitrate}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const qh={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},$h=new class{markSubscribeStart(e,t){var i;performance.mark(Je(i="agora-web-sdk/".concat(e,"/subscribe-")).call(i,t))}markPublishStart(e,t){var i;performance.mark(Je(i="agora-web-sdk/".concat(e,"/publish-")).call(i,t))}measureFromSubscribeStart(e,t){var i;const n=performance.getEntriesByName(Je(i="agora-web-sdk/".concat(e,"/subscribe-")).call(i,t));if(n.length>0){const e=n[n.length-1];return performance.now()-e.startTime}return 0}measureFromPublishStart(e,t){var i;const n=performance.getEntriesByName(Je(i="agora-web-sdk/".concat(e,"/publish-")).call(i,t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}};function zh(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function Zh(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=zh(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=zh(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}class Yh{constructor(e){this.localStats=new Mi,this.remoteStats=new Mi,this.trafficStatsPeerList=[],this.updateStats=()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))},this.store=e,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new Wh,this.exceptionMonitor.on("exception",(e,t,i)=>{this.onStatsException&&this.onStatsException(e,t,i)})}reset(){this.localStats=new Mi,this.remoteStats=new Mi,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(ku.LocalAudioTrack)||Zh({},Xl)}getLocalVideoTrackStats(){return this.localStats.get(ku.LocalVideoTrack)||Zh({},eu)}getRemoteAudioTrackStats(e){const t=(e,t)=>{var i;if(!this.trafficStats)return t;const n=Qo(i=this.trafficStats.peer_delay).call(i,t=>t.peer_uid===e);return n&&(t.publishDuration=n.B_ppad+(Ma()-this.trafficStats.timestamp)),t},i={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.audioStats;r&&(i[e]=t(e,r))}else{var r,o;Ji(r=Bd(Dd(o=this.remoteStats).call(o))).call(r,([e,{audioStats:n}])=>{n&&(i[e]=t(e,n))})}return i}getRemoteNetworkQualityStats(e){const t={};if(e){var i;const n=null===(i=this.remoteStats.get(e))||void 0===i?void 0:i.networkStats;n&&(t[e]=n)}else{var n,r;Ji(n=Bd(Dd(r=this.remoteStats).call(r))).call(n,([e,{networkStats:i}])=>{i&&(t[e]=i)})}return t}getRemoteVideoTrackStats(e){const t=(e,t)=>{var i;if(!this.trafficStats)return t;const n=Qo(i=this.trafficStats.peer_delay).call(i,t=>t.peer_uid===e);return n&&(t.publishDuration=n.B_ppvd+(Ma()-this.trafficStats.timestamp)),t},i={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.videoStats;r&&(i[e]=t(e,r))}else{var r,o;Ji(r=Bd(Dd(o=this.remoteStats).call(o))).call(r,([e,{videoStats:n}])=>{n&&(i[e]=t(e,n))})}return i}getRTCStats(){var e;let t=0,i=0,n=0,r=0;const o=this.localStats.get(ku.LocalAudioTrack);o&&(t+=o.sendBytes,i+=o.sendBitrate);const s=this.localStats.get(ku.LocalVideoTrack);s&&(t+=s.sendBytes,i+=s.sendBitrate);const a=this.localStats.get(ku.LocalVideoLowTrack);a&&(t+=a.sendBytes,i+=a.sendBitrate),Ji(e=this.remoteStats).call(e,({audioStats:e,videoStats:t})=>{e&&(n+=e.receiveBytes,r+=e.receiveBitrate),t&&(n+=t.receiveBytes,r+=t.receiveBitrate)});let c=1;return this.trafficStats&&(c+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:c,SendBitrate:i,SendBytes:t,RecvBytes:n,RecvBitrate:r,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(e){this.localStats.set(e,void 0)}removeLocalStats(e){e?this.localStats.delete(e):this.localStats.clear()}addRemoteStats(e){this.remoteStats.set(e,{})}removeRemoteStats(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}addP2PChannel(e){this.p2pChannel=e}updateTrafficStats(e){var t;const i=Gn(t=e.peer_delay).call(t,e=>{var t;return-1===Lo(t=this.trafficStatsPeerList).call(t,e.peer_uid)});Ji(i).call(i,e=>{var t;const i=null===(t=this.p2pChannel)||void 0===t?void 0:t.getRemoteMedia(e.peer_uid),n=null!=i&&i.videoSSRC?$h.measureFromSubscribeStart(this.store.clientId,i.videoSSRC):0,r=null!=i&&i.audioSSRC?$h.measureFromSubscribeStart(this.store.clientId,i.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,n>r?n:r),this.trafficStatsPeerList.push(e.peer_uid))}),this.trafficStats=e}updateUplinkStats(e){var t;this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&Rc.debug(Je(t="[".concat(this.store.clientId,"]: Period fir changes to ")).call(t,e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,i){if(!e)return!1;const n=!!i&&t.framesDecodeFreezeTime>i.framesDecodeFreezeTime,r=!i||t.framesDecodeCount>i.framesDecodeCount;return n||!r}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}updateLocalStats(e){var t,i;Ji(t=Bd(Dd(i=this.localStats).call(i))).call(t,([t,i])=>{switch(t){case ku.LocalVideoTrack:case ku.LocalVideoLowTrack:{const r=i,o=Zh({},eu),s=e.getStats(),a=e.getLocalMedia(t);if(s){var n;const t=Qo(n=s.videoSend).call(n,e=>e.ssrc===(null==a?void 0:a.ssrcs[0].ssrcId));if(t){const i=e.getLocalVideoSize(),n=e.getEncoderConfig(ku.LocalVideoTrack);"H264"!==t.codec&&"VP8"!==t.codec&&"VP9"!==t.codec&&"AV1X"!==t.codec||(o.codecType=t.codec),o.sendBytes=t.bytes,o.sendBitrate=r?8*Math.max(0,o.sendBytes-r.sendBytes):0,t.inputFrame?(o.captureFrameRate=t.inputFrame.frameRate,o.captureResolutionHeight=t.inputFrame.height,o.captureResolutionWidth=t.inputFrame.width):i&&(o.captureResolutionWidth=i.width,o.captureResolutionHeight=i.height),t.sentFrame?(o.sendFrameRate=t.sentFrame.frameRate,o.sendResolutionHeight=t.sentFrame.height,o.sendResolutionWidth=t.sentFrame.width):i&&(o.sendResolutionWidth=i.width,o.sendResolutionHeight=i.height),t.avgEncodeMs&&(o.encodeDelay=t.avgEncodeMs),n&&n.bitrateMax&&(o.targetSendBitrate=1e3*n.bitrateMax),o.sendPackets=t.packets,o.sendPacketsLost=t.packetsLost,o.totalDuration=r?r.totalDuration+1:1,o.totalFreezeTime=r?r.totalFreezeTime:0,this.isLocalVideoFreeze(t)&&(o.totalFreezeTime+=1)}this.trafficStats&&(o.sendPacketsLost=this.trafficStats.B_pvlr4/100)}this.localStats.set(t,o),o&&a&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,a.track,o);break}case ku.LocalAudioTrack:{const n=i,o=Zh({},Xl),s=e.getStats(),a=e.getLocalMedia(t);if(s){var r;const t=Qo(r=s.audioSend).call(r,e=>e.ssrc===(null==a?void 0:a.ssrcs[0].ssrcId));if(t){if("opus"!==t.codec&&"aac"!==t.codec||(o.codecType=t.codec),t.inputLevel)o.sendVolumeLevel=Math.round(32767*t.inputLevel);else{const t=e.getLocalAudioVolume();t&&(o.sendVolumeLevel=Math.round(32767*t))}o.sendBytes=t.bytes,o.sendPackets=t.packets,o.sendPacketsLost=t.packetsLost,o.sendBitrate=n?8*Math.max(0,o.sendBytes-n.sendBytes):0}}this.trafficStats&&(o.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(ku.LocalAudioTrack,o),o&&a&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,a.track,o);break}}})}updateRemoteStats(e){var t,i;Ji(t=Bd(Dd(i=this.remoteStats).call(i))).call(t,([t,{videoStats:i,audioStats:n,videoPcStats:r}])=>{var o,s,a;const c=n,l=i,u=r,d=Zh({},tu),h=Zh({},nu),p=Zh({},iu),{audioTrack:f,videoTrack:g,audioSSRC:m,videoSSRC:_}=e.getRemoteMedia(t),v=e.getStats(),E=null==v?void 0:Qo(o=v.audioRecv).call(o,e=>e.ssrc===m),A=null==v?void 0:Qo(s=v.videoRecv).call(s,e=>e.ssrc===_),y=this.trafficStats&&Qo(a=this.trafficStats.peer_delay).call(a,e=>e.peer_uid===t);if(E&&("opus"!==E.codec&&"aac"!==E.codec||(d.codecType=E.codec),E.outputLevel?d.receiveLevel=Math.round(32767*E.outputLevel):f&&(d.receiveLevel=Math.round(32767*f.getVolumeLevel())),d.receiveBytes=E.bytes,d.receivePackets=E.packets,d.receivePacketsLost=E.packetsLost,d.packetLossRate=d.receivePacketsLost/(d.receivePackets+d.receivePacketsLost),d.receiveBitrate=c?8*Math.max(0,d.receiveBytes-c.receiveBytes):0,d.totalDuration=c?c.totalDuration+1:1,d.totalFreezeTime=c?c.totalFreezeTime:0,d.freezeRate=d.totalFreezeTime/d.totalDuration,d.receiveDelay=E.jitterBufferMs,d.totalDuration>10&&Yh.isRemoteAudioFreeze(f)&&(d.totalFreezeTime+=1)),A){"H264"!==A.codec&&"VP8"!==A.codec&&"VP9"!==A.codec&&"AV1X"!==A.codec||(h.codecType=A.codec),h.receiveBytes=A.bytes,h.receiveBitrate=l?8*Math.max(0,h.receiveBytes-l.receiveBytes):0,h.decodeFrameRate=A.decodeFrameRate<0?0:A.decodeFrameRate,h.renderFrameRate=A.decodeFrameRate<0?0:A.decodeFrameRate,A.outputFrame&&(h.renderFrameRate=A.outputFrame.frameRate),A.receivedFrame?(h.receiveFrameRate=A.receivedFrame.frameRate,h.receiveResolutionHeight=A.receivedFrame.height,h.receiveResolutionWidth=A.receivedFrame.width):g&&(h.receiveResolutionHeight=g._videoHeight||0,h.receiveResolutionWidth=g._videoWidth||0),void 0!==A.framesRateFirefox&&(h.receiveFrameRate=Math.round(A.framesRateFirefox)),h.receivePackets=A.packets,h.receivePacketsLost=A.packetsLost,h.packetLossRate=h.receivePacketsLost/(h.receivePackets+h.receivePacketsLost),h.totalDuration=l?l.totalDuration+1:1,h.totalFreezeTime=l?l.totalFreezeTime:0,h.receiveDelay=A.jitterBufferMs||0;const t=!!_&&e.getRemoteVideoIsReady(_);g&&t&&Yh.isRemoteVideoFreeze(g,A,u)&&(h.totalFreezeTime+=1),h.freezeRate=h.totalFreezeTime/h.totalDuration}y&&(d.end2EndDelay=y.B_ad,h.end2EndDelay=y.B_vd,d.transportDelay=y.B_ed,h.transportDelay=y.B_ed,d.currentPacketLossRate=y.B_ealr4/100,h.currentPacketLossRate=y.B_evlr4/100,p.uplinkNetworkQuality=y.B_punq?y.B_punq:0,p.downlinkNetworkQuality=y.B_pdnq?y.B_pdnq:0),this.remoteStats.set(t,{audioStats:d,videoStats:h,videoPcStats:A,networkStats:p}),f&&this.exceptionMonitor.setRemoteAudioStats(f,d),g&&this.exceptionMonitor.setRemoteVideoStats(g,h)})}}var Kh="".repeat||function(e){var t=String(m(this)),i="",n=$(e);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(i+=t);return i},Jh=Math.ceil,Xh=function(e){return function(t,i,n){var r,o,s=String(m(t)),a=s.length,c=void 0===n?" ":String(n),l=Z(i);return l<=a||""==c?s:(r=l-a,(o=Kh.call(c,Jh(r/c.length))).length>r&&(o=o.slice(0,r)),e?s+o:o+s)}},ep={start:Xh(!1),end:Xh(!0)},tp=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(xe),ip=ep.start;Q({target:"String",proto:!0,forced:tp},{padStart:function(e){return ip(this,e,arguments.length>1?arguments[1]:void 0)}});var np=Ze("String").padStart,rp=String.prototype,op=function(e){var t=e.padStart;return"string"==typeof e||e===rp||e instanceof String&&t===rp.padStart?np:t};function sp(e){return(new TextEncoder).encode(e)}const ap=async e=>{const t=Qp("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),i=await window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),n=sp(e),r=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},i,n);return Wp(new Uint8Array(r))},cp=async e=>function(e,t){let i="";const n=new Uint8Array(e);return Ji(n).call(n,e=>{var n;i+=op(n=e.toString(t)).call(n,2,"0")}),i}(await crypto.subtle.digest("SHA-256",sp(e)),16);function lp(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function up(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=lp(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=lp(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}function dp(e){if(!e.address||!e.tcp)throw new pl(ll.UNEXPECTED_RESPONSE,"Invalid address format ".concat(e));return e.address.match(/^[\.\:\d]+$/)?"".concat(e.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(Rc.info("Cannot recognized as IP address ".concat(e.address,". Used As Host instead")),Je(t="".concat(e.address,":")).call(t,e.tcp));var t}function hp(e){var t;return e.match(/^[\.\:\d]+$/)?Je(t="".concat(e.replace(/[^\d]/g,"-"),".")).call(t,jc("TURN_DOMAIN")):(Rc.info("Cannot recognized as IP address ".concat(e,". Used As Host instead")),e)}function pp(e,t){var i;const n=jc("GATEWAY_DOMAINS");let r=n[1]&&-1!==Lo(t).call(t,n[1])?1:0;return e.addresses=e.addresses||[],{gatewayAddrs:vo(i=e.addresses).call(i,e=>{var t,i,o;return e.ip.match(/^[\.\:\d]+$/)?Je(t=Je(i="".concat(e.ip.replace(/[^\d]/g,"-"),".")).call(i,n[r++%n.length],":")).call(t,e.port):(Rc.info("Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),Je(o="".concat(e.ip,":")).call(o,e.port))}),uid:e.uid,cid:e.cid,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function fp(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function gp(e){var t;const i=e._encoderConfig;if(!i)return{};const n={resolution:i.width&&i.height?Je(t="".concat(fp(i.width),"x")).call(t,fp(i.height)):void 0,maxVideoBW:i.bitrateMax,minVideoBW:i.bitrateMin};return"number"==typeof i.frameRate?(n.maxFrameRate=i.frameRate,n.minFrameRate=i.frameRate):i.frameRate&&(n.maxFrameRate=i.frameRate.max||i.frameRate.ideal||i.frameRate.exact||i.frameRate.min,n.minFrameRate=i.frameRate.min||i.frameRate.ideal||i.frameRate.exact||i.frameRate.max),n}function mp(e,t,i){var n,r,o;const s=Qo(n=t.videoSend).call(n,t=>t.ssrc===e);if(!s)return null;const a=null==i||null===(r=Qo(o=i.videoSend).call(o,t=>t.ssrc===e))||void 0===r?void 0:r.inputFrame,c={id:Op(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:s.ssrc.toString()};return s.inputFrame&&(a&&s.inputFrame.height===a.height||(c.A_fhi=s.inputFrame.height?s.inputFrame.height.toString():"0"),a&&s.inputFrame.width===a.width||(c.A_fwi=s.inputFrame.width?s.inputFrame.width.toString():"0"),a&&s.inputFrame.frameRate===a.frameRate||(c.A_fri=s.inputFrame.frameRate?s.inputFrame.frameRate.toString():"0")),c}function _p(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function vp(e,t){var i;let n,r,o=void 0;switch(t){case Rd.CHOOSE_SERVER:n=4096,r="choose server";break;case Rd.CLOUD_PROXY:n=1048576,r="proxy";break;case Rd.CLOUD_PROXY_5:n=4194304,r="proxy5";break;default:throw new pl(ll.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(Ji(i=e.response_body).call(i,t=>{var i;t.buffer&&t.buffer.flag===n&&(o={code:t.buffer.code,addresses:vo(i=t.buffer.edges_services).call(i,e=>up({},e,{ticket:t.buffer.cert})),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:up({},t.buffer.detail,{},e.detail),flag:t.buffer.flag,opid:e.opid})}),!o)throw new pl(ll.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(r," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return o}async function Ep(e,t){var i;return await fo.all(vo(i=e.addresses).call(i,async e=>({address:e.ip,tcpport:e.port,udpport:e.port,username:t?t.toString():Nc.username,password:t?await cp(t.toString()):Nc.password})))}function Ap(e,t){const i=t._videoHeight||t.getMediaStreamTrack(!0).getSettings().height;return i?i/fp(e.height):4}var yp;function Sp(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function Cp(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=Sp(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=Sp(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}function bp(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function Tp(e,t,i){const n=e[t];if(!n||"string"!=typeof n)return[e];e[t]="";const r=bp(ve(e));let o=0;const s=[];let a=0;for(let c=0;c<n.length;c++)a+=n.charCodeAt(c)<=127?1:3,a<=i-r||(s[s.length]=Cp({},e,{[t]:n.substring(o,c)}),o=c,a=n.charCodeAt(c)<=127?1:3);return o!==n.length-1&&(s[s.length]=Cp({},e,{[t]:n.substring(o)})),s}function Ip(e){return new fo(t=>{window.setTimeout(t,e)})}function Rp(e){const t=new pl(ll.TIMEOUT,"timeout");return new fo((i,n)=>{window.setTimeout(()=>n(t),e)})}function wp(e,t){return t===1/0?e:fo.race([e,Rp(t)])}function Op(e=7,t){var i,n;const r=Math.random().toString(16).substr(2,e).toLowerCase();return r.length===e?Je(i="".concat(t)).call(i,r):Je(n="".concat(t)).call(n,r)+Op(e-r.length,"")}function kp(){return Op(32,"").toUpperCase()}const Np=()=>{};function Lp(e){return new fo((t,i)=>{let n=!1;const r=document.createElement("video");r.setAttribute("autoplay",""),r.setAttribute("muted",""),r.muted=!0,r.autoplay=!0,r.setAttribute("playsinline",""),r.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(r);const o=Ra()?"canplay":"playing";r.addEventListener(o,()=>{const e=r.videoWidth,i=r.videoHeight;!e&&Ia()||(n=!0,r.srcObject=null,r.remove(),t([e,i]))}),r.srcObject=new MediaStream([e]),r.play().catch(Np),Fa(()=>{n||(r.srcObject=null,r.remove(),t([r.videoWidth,r.videoHeight]))},4e3)})}function Pp(e){return fo.all(vo(e).call(e,e=>e.then(e=>{throw e},e=>e))).then(e=>{throw e},e=>e)}function Dp(e,t,...i){return 0===e.getListeners(t).length?fo.reject(new pl(ll.UNEXPECTED_ERROR,"can not emit promise")):new fo((n,r)=>{e.emit(t,...i,n,r)})}function Mp(e,t,...i){return 0===e.getListeners(t).length?fo.resolve():Dp(e,t,...i)}function xp(e,t,...i){return 0===e.getListeners(t).length?null:Bp(e,t,...i)}function Bp(e,t,...i){let n=null,r=null;if(e.emit(t,...i,e=>{n=e},e=>{r=e}),null!==r)throw r;if(null===n)throw new pl(ll.UNEXPECTED_ERROR,"handler is not sync");return n}function Up(e,t){const i=Lo(e).call(e,t);-1!==i&&To(e).call(e,i,1)}function Fp(e){const t=[];return Ji(e).call(e,e=>{-1===Lo(t).call(t,e)&&t.push(e)}),t}function Vp(e){fo.resolve().then(e)}function jp(e){return JSON.parse(ve(e))}const Gp={};function Hp(e,t){Gp[t]||(Gp[t]=!0,e())}function Qp(e){const t=window.atob(e),i=new Uint8Array(new ArrayBuffer(t.length));for(let n=0;n<t.length;n+=1)i[n]=t.charCodeAt(n);return i}function Wp(e){let t="";for(let i=0;i<e.length;i+=1)t+=String.fromCharCode(e[i]);return window.btoa(t)}const qp=new class{constructor(){this.fnMap=new Mi}throttleByKey(e,t,i,n,...r){if(this.fnMap.has(t)){const o=this.fnMap.get(t);if(o.threshold!==i){o.fn(...o.args),clearTimeout(o.timer);const s=window.setTimeout(()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)},i);this.fnMap.set(t,{fn:e,threshold:i,timer:s,args:r,skipFn:n})}else o.skipFn&&o.skipFn(...o.args),this.fnMap.set(t,Cp({},o,{fn:e,args:r,skipFn:n}))}else{const o=window.setTimeout(()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)},i);this.fnMap.set(t,{fn:e,threshold:i,timer:o,args:r,skipFn:n})}}},$p=Ko(yp=qp.throttleByKey).call(yp,qp),zp=async({fragementLength:e,referenceList:t,asyncMapHandler:i,allFailedhandler:n,promisesCollector:r})=>{let o=0;const s=e;let a,c=0;const l=async()=>{const e=(()=>{const e=o*s,n=e+s,r=Uo(t).call(t,e,n);return vo(r).call(r,i)})();r&&r.push(...e);try{a=await Pp(e)}catch(e){if(c+=s,o++,!(c>=t.length))return void await l();n(e)}Ji(e).call(e,e=>e.cancel())};return await l(),a};var Zp=Ze("Array").values,Yp=Array.prototype,Kp={DOMTokenList:!0,NodeList:!0},Jp=function(e){var t=e.values;return e===Yp||e instanceof Array&&t===Yp.values||Kp.hasOwnProperty(ht(e))?Zp:t};const Xp={[Ml.ACCESS_POINT]:{[Ul.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Ul.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Ul.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Ul.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[Ml.UNILBS]:{[Bl.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Bl.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Bl.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Bl.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Bl.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Bl.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Bl.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Bl.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Bl.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Bl.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Bl.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Bl.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[Ml.STRING_UID_ALLOCATOR]:{[xl.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[xl.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[xl.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function ef(e){const t=Xp[Math.floor(e/1e4)];if(!t)return{desc:"unkonw error",retry:!1};const i=t[e%1e4];if(!i){if(Math.floor(e/1e4)===Ml.ACCESS_POINT){const t=e%1e4;if("1"===t.toString()[0])return{desc:e.toString(),retry:!1};if("2"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return i}const tf={[Fl.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Fl.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Fl.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Fl.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Fl.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Fl.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Fl.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Fl.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Fl.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Fl.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Fl.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Fl.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Fl.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Fl.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Fl.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Fl.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Fl.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Fl.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Fl.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Fl.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Fl.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Fl.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Fl.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Fl.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Fl.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Fl.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Fl.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Fl.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Fl.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Fl.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Fl.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Fl.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Fl.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Fl.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Fl.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Fl.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Fl.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Fl.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Fl.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Fl.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Fl.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Fl.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Fl.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Fl.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Fl.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Fl.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Fl.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Fl.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Fl.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Fl.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Fl.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Fl.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Fl.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Fl.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Fl.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Fl.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"}};function nf(e){const t=tf[e];return t||{desc:"UNKNOW_ERROR_".concat(e),action:"failed"}}var rf=n((function(e,t){e.exports=function(){var e={d:function(t,i){for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{DataViewIndexOutOfBoundsError:function(){return j},DecodeError:function(){return E},Decoder:function(){return Q},EXT_TIMESTAMP:function(){return A},Encoder:function(){return k},ExtData:function(){return _},ExtensionCodec:function(){return R},decode:function(){return q},decodeArrayStream:function(){return ee},decodeAsync:function(){return X},decodeMulti:function(){return $},decodeMultiStream:function(){return te},decodeStream:function(){return ie},decodeTimestampExtension:function(){return T},decodeTimestampToTimeSpec:function(){return b},encode:function(){return L},encodeDateToTimeSpec:function(){return S},encodeTimeSpecToTimestamp:function(){return y},encodeTimestampExtension:function(){return C}});var n=4294967295;function r(e,t,i){var n=Math.floor(i/4294967296),r=i;e.setUint32(t,n),e.setUint32(t+4,r)}function o(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}var s=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},a=function(e,t){for(var i=0,n=t.length,r=e.length;i<n;i++,r++)e[r]=t[i];return e},c="undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function l(e){for(var t=e.length,i=0,n=0;n<t;){var r=e.charCodeAt(n++);if(0!=(4294967168&r))if(0==(4294965248&r))i+=2;else{if(r>=55296&&r<=56319&&n<t){var o=e.charCodeAt(n);56320==(64512&o)&&(++n,r=((1023&r)<<10)+(1023&o)+65536)}i+=0==(4294901760&r)?3:4}else i++}return i}var u=c?new TextEncoder:void 0,d=c?"undefined"!=typeof i?200:0:n,h=(null==u?void 0:u.encodeInto)?function(e,t,i){u.encodeInto(e,t.subarray(i))}:function(e,t,i){t.set(u.encode(e),i)};function p(e,t,i){for(var n=t,r=n+i,o=[],c="";n<r;){var l=e[n++];if(0==(128&l))o.push(l);else if(192==(224&l)){var u=63&e[n++];o.push((31&l)<<6|u)}else if(224==(240&l)){u=63&e[n++];var d=63&e[n++];o.push((31&l)<<12|u<<6|d)}else if(240==(248&l)){var h=(7&l)<<18|(u=63&e[n++])<<12|(d=63&e[n++])<<6|63&e[n++];h>65535&&(h-=65536,o.push(h>>>10&1023|55296),h=56320|1023&h),o.push(h)}else o.push(l);o.length>=4096&&(c+=String.fromCharCode.apply(String,a([],s(o))),o.length=0)}return o.length>0&&(c+=String.fromCharCode.apply(String,a([],s(o)))),c}var f,g=c?new TextDecoder:null,m=c?"undefined"!=typeof i?200:0:n,_=function(e,t){this.type=e,this.data=t},v=(f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),E=function(e){function t(i){var n=e.call(this,i)||this,r=Object.create(t.prototype);return Object.setPrototypeOf(n,r),Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:t.name}),n}return v(t,e),t}(Error),A=-1;function y(e){var t,i=e.sec,n=e.nsec;if(i>=0&&n>=0&&i<=17179869183){if(0===n&&i<=4294967295){var o=new Uint8Array(4);return(t=new DataView(o.buffer)).setUint32(0,i),o}var s=i/4294967296,a=4294967295&i;return o=new Uint8Array(8),(t=new DataView(o.buffer)).setUint32(0,n<<2|3&s),t.setUint32(4,a),o}return o=new Uint8Array(12),(t=new DataView(o.buffer)).setUint32(0,n),r(t,4,i),o}function S(e){var t=e.getTime(),i=Math.floor(t/1e3),n=1e6*(t-1e3*i),r=Math.floor(n/1e9);return{sec:i+r,nsec:n-1e9*r}}function C(e){return e instanceof Date?y(S(e)):null}function b(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:var i=t.getUint32(0);return{sec:4294967296*(3&i)+t.getUint32(4),nsec:i>>>2};case 12:return{sec:o(t,4),nsec:t.getUint32(0)};default:throw new E("Unrecognized data size for timestamp (expected 4, 8, or 12): "+e.length)}}function T(e){var t=b(e);return new Date(1e3*t.sec+t.nsec/1e6)}var I={type:A,encode:C,decode:T},R=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(I)}return e.prototype.register=function(e){var t=e.type,i=e.encode,n=e.decode;if(t>=0)this.encoders[t]=i,this.decoders[t]=n;else{var r=1+t;this.builtInEncoders[r]=i,this.builtInDecoders[r]=n}},e.prototype.tryToEncode=function(e,t){for(var i=0;i<this.builtInEncoders.length;i++)if(null!=(n=this.builtInEncoders[i])&&null!=(r=n(e,t)))return new _(-1-i,r);for(i=0;i<this.encoders.length;i++){var n,r;if(null!=(n=this.encoders[i])&&null!=(r=n(e,t)))return new _(i,r)}return e instanceof _?e:null},e.prototype.decode=function(e,t,i){var n=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return n?n(e,t,i):new _(t,e)},e.defaultCodec=new e,e}();function w(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}var O=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},k=function(){function e(e,t,i,n,r,o,s,a){void 0===e&&(e=R.defaultCodec),void 0===t&&(t=void 0),void 0===i&&(i=100),void 0===n&&(n=2048),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===s&&(s=!1),void 0===a&&(a=!1),this.extensionCodec=e,this.context=t,this.maxDepth=i,this.initialBufferSize=n,this.sortKeys=r,this.forceFloat32=o,this.ignoreUndefined=s,this.forceIntegerToFloat=a,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.getUint8Array()},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth "+t);null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),i=new Uint8Array(t),n=new DataView(t);i.set(this.bytes),this.view=n,this.bytes=i},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too long string: "+e+" bytes in UTF-8");this.writeU8(219),this.writeU32(e)}},e.prototype.encodeString=function(e){if(e.length>d){var t=l(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),h(e,this.bytes,this.pos),this.pos+=t}else t=l(e),this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,i){for(var n=e.length,r=i,o=0;o<n;){var s=e.charCodeAt(o++);if(0!=(4294967168&s)){if(0==(4294965248&s))t[r++]=s>>6&31|192;else{if(s>=55296&&s<=56319&&o<n){var a=e.charCodeAt(o);56320==(64512&a)&&(++o,s=((1023&s)<<10)+(1023&a)+65536)}0==(4294901760&s)?(t[r++]=s>>12&15|224,t[r++]=s>>6&63|128):(t[r++]=s>>18&7|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128)}t[r++]=63&s|128}else t[r++]=s}}(e,this.bytes,this.pos),this.pos+=t},e.prototype.encodeObject=function(e,t){var i=this.extensionCodec.tryToEncode(e,this.context);if(null!=i)this.encodeExtension(i);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(e));this.encodeMap(e,t)}},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: "+t);this.writeU8(198),this.writeU32(t)}var i=w(e);this.writeU8a(i)},e.prototype.encodeArray=function(e,t){var i,n,r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large array: "+r);this.writeU8(221),this.writeU32(r)}try{for(var o=O(e),s=o.next();!s.done;s=o.next()){var a=s.value;this.doEncode(a,t+1)}}catch(e){i={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}},e.prototype.countWithoutUndefined=function(e,t){var i,n,r=0;try{for(var o=O(t),s=o.next();!s.done;s=o.next())void 0!==e[s.value]&&r++}catch(e){i={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return r},e.prototype.encodeMap=function(e,t){var i,n,r=Object.keys(e);this.sortKeys&&r.sort();var o=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(o<16)this.writeU8(128+o);else if(o<65536)this.writeU8(222),this.writeU16(o);else{if(!(o<4294967296))throw new Error("Too large map object: "+o);this.writeU8(223),this.writeU32(o)}try{for(var s=O(r),a=s.next();!a.done;a=s.next()){var c=a.value,l=e[c];this.ignoreUndefined&&void 0===l||(this.encodeString(c),this.doEncode(l,t+1))}}catch(e){i={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: "+t);this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),function(e,t,i){var n=i/4294967296,r=i;e.setUint32(t,n),e.setUint32(t+4,r)}(this.view,this.pos,e),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),r(this.view,this.pos,e),this.pos+=8},e}(),N={};function L(e,t){return void 0===t&&(t=N),new k(t.extensionCodec,t.context,t.maxDepth,t.initialBufferSize,t.sortKeys,t.forceFloat32,t.ignoreUndefined,t.forceIntegerToFloat).encode(e)}function P(e){return(e<0?"-":"")+"0x"+Math.abs(e).toString(16).padStart(2,"0")}var D=function(){function e(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var i=0;i<this.maxKeyLength;i++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,i){var n,r,o=this.caches[i-1];try{e:for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),a=s.next();!a.done;a=s.next()){for(var c=a.value,l=c.bytes,u=0;u<i;u++)if(l[u]!==e[t+u])continue e;return c.str}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return null},e.prototype.store=function(e,t){var i=this.caches[e.length-1],n={bytes:e,str:t};i.length>=this.maxLengthPerKey?i[Math.random()*i.length|0]=n:i.push(n)},e.prototype.decode=function(e,t,i){var n=this.find(e,t,i);if(null!=n)return this.hit++,n;this.miss++;var r=p(e,t,i),o=Uint8Array.prototype.slice.call(e,t,t+i);return this.store(o,r),r},e}(),M=function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},x=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,r){!function(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)}(n,r,(t=e[i](t)).done,t.value)}))}}},B=function(e){return this instanceof B?(this.v=e,this):new B(e)},U=function(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=i.apply(e,t||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){r[e]&&(n[e]=function(t){return new Promise((function(i,n){o.push([e,t,i,n])>1||a(e,t)}))})}function a(e,t){try{(i=r[e](t)).value instanceof B?Promise.resolve(i.value.v).then(c,l):u(o[0][2],i)}catch(e){u(o[0][3],e)}var i}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}},F=new DataView(new ArrayBuffer(0)),V=new Uint8Array(F.buffer),j=function(){try{F.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")}(),G=new j("Insufficient data"),H=new D,Q=function(){function e(e,t,i,r,o,s,a,c){void 0===e&&(e=R.defaultCodec),void 0===t&&(t=void 0),void 0===i&&(i=n),void 0===r&&(r=n),void 0===o&&(o=n),void 0===s&&(s=n),void 0===a&&(a=n),void 0===c&&(c=H),this.extensionCodec=e,this.context=t,this.maxStrLength=i,this.maxBinLength=r,this.maxArrayLength=o,this.maxMapLength=s,this.maxExtLength=a,this.keyDecoder=c,this.totalPos=0,this.pos=0,this.view=F,this.bytes=V,this.headByte=-1,this.stack=[]}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=w(e),this.view=function(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=w(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}(this.bytes),this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),i=w(e),n=new Uint8Array(t.length+i.length);n.set(t),n.set(i,t.length),this.setBuffer(n)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view,i=this.pos;return new RangeError("Extra "+(t.byteLength-i)+" of "+t.byteLength+" byte(s) found at buffer["+e+"]")},e.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},e.prototype.decodeMulti=function(e){return M(this,(function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))},e.prototype.decodeAsync=function(e){var t,i,n,r,o,s,a,c;return o=this,s=void 0,c=function(){var o,s,a,c,l,u,d,h;return M(this,(function(p){switch(p.label){case 0:o=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),t=x(e),p.label=2;case 2:return[4,t.next()];case 3:if((i=p.sent()).done)return[3,5];if(a=i.value,o)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{s=this.doDecodeSync(),o=!0}catch(e){if(!(e instanceof j))throw e}this.totalPos+=this.pos,p.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return c=p.sent(),n={error:c},[3,12];case 7:return p.trys.push([7,,10,11]),i&&!i.done&&(r=t.return)?[4,r.call(t)]:[3,9];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(n)throw n.error;return[7];case 11:return[7];case 12:if(o){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,s]}throw u=(l=this).headByte,d=l.pos,h=l.totalPos,new RangeError("Insufficient data in parsing "+P(u)+" at "+h+" ("+d+" in the current buffer)")}}))},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{r(c.next(e))}catch(e){t(e)}}function n(e){try{r(c.throw(e))}catch(e){t(e)}}function r(t){var r;t.done?e(t.value):(r=t.value,r instanceof a?r:new a((function(e){e(r)}))).then(i,n)}r((c=c.apply(o,s||[])).next())}))},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return U(this,arguments,(function(){var i,n,r,o,s,a,c,l,u;return M(this,(function(d){switch(d.label){case 0:i=t,n=-1,d.label=1;case 1:d.trys.push([1,13,14,19]),r=x(e),d.label=2;case 2:return[4,B(r.next())];case 3:if((o=d.sent()).done)return[3,12];if(s=o.value,t&&0===n)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),i&&(n=this.readArraySize(),i=!1,this.complete()),d.label=4;case 4:d.trys.push([4,9,,10]),d.label=5;case 5:return[4,B(this.doDecodeSync())];case 6:return[4,d.sent()];case 7:return d.sent(),0==--n?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((a=d.sent())instanceof j))throw a;return[3,10];case 10:this.totalPos+=this.pos,d.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return c=d.sent(),l={error:c},[3,19];case 14:return d.trys.push([14,,17,18]),o&&!o.done&&(u=r.return)?[4,B(u.call(r))]:[3,16];case 15:d.sent(),d.label=16;case 16:return[3,18];case 17:if(l)throw l.error;return[7];case 18:return[7];case 19:return[2]}}))}))},e.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){if(0!=(n=e-128)){this.pushMapState(n),this.complete();continue e}t={}}else if(e<160){if(0!=(n=e-144)){this.pushArrayState(n),this.complete();continue e}t=[]}else{var i=e-160;t=this.decodeUtf8String(i,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e)i=this.lookU8(),t=this.decodeUtf8String(i,1);else if(218===e)i=this.lookU16(),t=this.decodeUtf8String(i,2);else if(219===e)i=this.lookU32(),t=this.decodeUtf8String(i,4);else if(220===e){if(0!==(n=this.readU16())){this.pushArrayState(n),this.complete();continue e}t=[]}else if(221===e){if(0!==(n=this.readU32())){this.pushArrayState(n),this.complete();continue e}t=[]}else if(222===e){if(0!==(n=this.readU16())){this.pushMapState(n),this.complete();continue e}t={}}else if(223===e){if(0!==(n=this.readU32())){this.pushMapState(n),this.complete();continue e}t={}}else if(196===e){var n=this.lookU8();t=this.decodeBinary(n,1)}else if(197===e)n=this.lookU16(),t=this.decodeBinary(n,2);else if(198===e)n=this.lookU32(),t=this.decodeBinary(n,4);else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e)n=this.lookU8(),t=this.decodeExtension(n,1);else if(200===e)n=this.lookU16(),t=this.decodeExtension(n,2);else{if(201!==e)throw new E("Unrecognized type byte: "+P(e));n=this.lookU32(),t=this.decodeExtension(n,4)}this.complete();for(var r=this.stack;r.length>0;){var o=r[r.length-1];if(0===o.type){if(o.array[o.position]=t,o.position++,o.position!==o.size)continue e;r.pop(),t=o.array}else{if(1===o.type){if("string"!=(s=typeof t)&&"number"!==s)throw new E("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new E("The key __proto__ is not allowed");o.key=t,o.type=2;continue e}if(o.map[o.key]=t,o.readCount++,o.readCount!==o.size){o.key=null,o.type=1;continue e}r.pop(),t=o.map}}return t}var s},e.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new E("Unrecognized array type byte: "+P(e))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new E("Max length exceeded: map length ("+e+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new E("Max length exceeded: array length ("+e+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:e,array:new Array(e),position:0})},e.prototype.decodeUtf8String=function(e,t){var i;if(e>this.maxStrLength)throw new E("Max length exceeded: UTF-8 byte length ("+e+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+t+e)throw G;var n,r=this.pos+t;return n=this.stateIsMapKey()&&(null===(i=this.keyDecoder)||void 0===i?void 0:i.canBeCached(e))?this.keyDecoder.decode(this.bytes,r,e):e>m?function(e,t,i){var n=e.subarray(t,t+i);return g.decode(n)}(this.bytes,r,e):p(this.bytes,r,e),this.pos+=t+e,n},e.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new E("Max length exceeded: bin length ("+e+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(e+t))throw G;var i=this.pos+t,n=this.bytes.subarray(i,i+e);return this.pos+=t+e,n},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new E("Max length exceeded: ext length ("+e+") > maxExtLength ("+this.maxExtLength+")");var i=this.view.getInt8(this.pos+t),n=this.decodeBinary(e,t+1);return this.extensionCodec.decode(n,i,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e,t,i=(e=this.view,t=this.pos,4294967296*e.getUint32(t)+e.getUint32(t+4));return this.pos+=8,i},e.prototype.readI64=function(){var e=o(this.view,this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}(),W={};function q(e,t){return void 0===t&&(t=W),new Q(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decode(e)}function $(e,t){return void 0===t&&(t=W),new Q(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeMulti(e)}var z=function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Z=function(e){return this instanceof Z?(this.v=e,this):new Z(e)},Y=function(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=i.apply(e,t||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){r[e]&&(n[e]=function(t){return new Promise((function(i,n){o.push([e,t,i,n])>1||a(e,t)}))})}function a(e,t){try{(i=r[e](t)).value instanceof Z?Promise.resolve(i.value.v).then(c,l):u(o[0][2],i)}catch(e){u(o[0][3],e)}var i}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}};function K(e){if(null==e)throw new Error("Assertion Failure: value must not be null nor undefined")}function J(e){return null!=e[Symbol.asyncIterator]?e:function(e){return Y(this,arguments,(function(){var t,i,n,r;return z(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Z(t.read())];case 3:return i=o.sent(),n=i.done,r=i.value,n?[4,Z(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return K(r),[4,Z(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e)}function X(e,t){return void 0===t&&(t=W),i=this,n=void 0,o=function(){var i;return function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(n){return i=J(e),[2,new Q(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeAsync(i)]}))},new((r=void 0)||(r=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(s,a)}c((o=o.apply(i,n||[])).next())}));var i,n,r,o}function ee(e,t){void 0===t&&(t=W);var i=J(e);return new Q(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeArrayStream(i)}function te(e,t){void 0===t&&(t=W);var i=J(e);return new Q(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeStream(i)}function ie(e,t){return void 0===t&&(t=W),te(e,t)}return t}()})),of=Math.min;Q({target:"Array",proto:!0},{copyWithin:[].copyWithin||function(e,t){var i=Ae(this),n=Z(i.length),r=J(e,n),o=J(t,n),s=arguments.length>2?arguments[2]:void 0,a=of((void 0===s?n:J(s,n))-o,n-r),c=1;for(o<r&&r<o+a&&(c=-1,o+=a-1,r+=a-1);a-- >0;)o in i?i[r]=i[o]:delete i[r],r+=c,o+=c;return i}});var sf=Ze("Array").copyWithin,af=Array.prototype,cf=function(e){var t=e.copyWithin;return e===af||e instanceof Array&&t===af.copyWithin?sf:t},lf=bt.every;Q({target:"Array",proto:!0,forced:qi("every")},{every:function(e){return lf(this,e,arguments.length>1?arguments[1]:void 0)}});var uf=Ze("Array").every,df=Array.prototype,hf=function(e){var t=e.every;return e===df||e instanceof Array&&t===df.every?uf:t},pf=et.getWeakData,ff=xt.set,gf=xt.getterFor,mf=bt.find,_f=bt.findIndex,vf=0,Ef=function(e){return e.frozen||(e.frozen=new Af)},Af=function(){this.entries=[]},yf=function(e,t){return mf(e.entries,(function(e){return e[0]===t}))};Af.prototype={get:function(e){var t=yf(this,e);if(t)return t[1]},has:function(e){return!!yf(this,e)},set:function(e,t){var i=yf(this,e);i?i[1]=t:this.entries.push([e,t])},delete:function(e){var t=_f(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}};var Sf={getConstructor:function(e,t,i,n){var r=e((function(e,o){_t(e,r,t),ff(e,{type:t,id:vf++,frozen:void 0}),null!=o&&mt(o,e[n],e,i)})),o=gf(t),s=function(e,t,i){var n=o(e),r=pf(U(t),!0);return!0===r?Ef(n).set(t,i):r[n.id]=i,e};return Kt(r.prototype,{delete:function(e){var t=o(this);if(!v(e))return!1;var i=pf(e);return!0===i?Ef(t).delete(e):i&&y(i,t.id)&&delete i[t.id]},has:function(e){var t=o(this);if(!v(e))return!1;var i=pf(e);return!0===i?Ef(t).has(e):i&&y(i,t.id)}}),Kt(r.prototype,i?{get:function(e){var t=o(this);if(v(e)){var i=pf(e);return!0===i?Ef(t).get(e):i?i[t.id]:void 0}},set:function(e,t){return s(this,e,t)}}:{add:function(e){return s(this,e,!0)}}),r}},Cf=(n((function(e){var t,i=xt.enforce,n=!o.ActiveXObject&&"ActiveXObject"in o,r=Object.isExtensible,s=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},a=e.exports=jt("WeakMap",s,Sf);if(Rt&&n){t=Sf.getConstructor(s,"WeakMap",!0),et.REQUIRED=!0;var c=a.prototype,l=c.delete,u=c.has,d=c.get,h=c.set;Kt(c,{delete:function(e){if(v(e)&&!r(e)){var n=i(this);return n.frozen||(n.frozen=new t),l.call(this,e)||n.frozen.delete(e)}return l.call(this,e)},has:function(e){if(v(e)&&!r(e)){var n=i(this);return n.frozen||(n.frozen=new t),u.call(this,e)||n.frozen.has(e)}return u.call(this,e)},get:function(e){if(v(e)&&!r(e)){var n=i(this);return n.frozen||(n.frozen=new t),u.call(this,e)?d.call(this,e):n.frozen.get(e)}return d.call(this,e)},set:function(e,n){if(v(e)&&!r(e)){var o=i(this);o.frozen||(o.frozen=new t),u.call(this,e)?h.call(this,e,n):o.frozen.set(e,n)}else h.call(this,e,n);return this}})}})),Math.min),bf=[].lastIndexOf,Tf=!!bf&&1/[1].lastIndexOf(1,-0)<0,If=qi("lastIndexOf"),Rf=Tf||If?function(e){if(Tf)return bf.apply(this,arguments)||0;var t=_(this),i=Z(t.length),n=i-1;for(arguments.length>1&&(n=Cf(n,$(arguments[1]))),n<0&&(n=i+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}:bf;Q({target:"Array",proto:!0,forced:Rf!==[].lastIndexOf},{lastIndexOf:Rf});var wf=Ze("Array").lastIndexOf,Of=Array.prototype,kf=function(e){var t=e.lastIndexOf;return e===Of||e instanceof Array&&t===Of.lastIndexOf?wf:t};const Nf=()=>function(e){var t;const i=vo(t=window.atob(e).split("")).call(t,e=>e.charCodeAt(0));return new Uint8Array(i,0,i.length/Uint8Array.BYTES_PER_ELEMENT)}("AGFzbQEAAAABMAlgA39/fwF/YAF/AGACf38AYAF/AX9gAn9/AX9gA39/fwBgBH9/f38AYAABf2AAAAI6AgNlbnYWZW1zY3JpcHRlbl9yZXNpemVfaGVhcAADA2VudhVlbXNjcmlwdGVuX21lbWNweV9iaWcAAAMjIggAAAAAAQEDAQEEBAQEAQEGAQYCBQUAAgAHAwEDAAIHAQMEBQFwAQYGBQYBAYACgAIGCQF/AUHQ48ACCweUAQoGbWVtb3J5AgARX193YXNtX2NhbGxfY3RvcnMAAhlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQAGbWFsbG9jABwEZnJlZQAdEF9fZXJybm9fbG9jYXRpb24AGwx6bGliQ29tcHJlc3MAGglzdGFja1NhdmUAIQxzdGFja1Jlc3RvcmUAIgpzdGFja0FsbG9jACMJCwEAQQELBRgZDA0PCq6FAiIDAAELpQcBBH8gAEH//wNxIQMgAEEQdiEEQQEhACACQQFGBEAgAyABLQAAaiIAQfH/A2sgACAAQfD/A0sbIgAgBGoiA0EQdCIEQYCAPGogBCADQfD/A0sbIAByDwsgAQR/IAJBEE8EQAJAAkACQCACQa8rSwRAA0AgAkGwK2shAkHbAiEFIAEhAANAIAMgAC0AAGoiAyAEaiADIAAtAAFqIgNqIAMgAC0AAmoiA2ogAyAALQADaiIDaiADIAAtAARqIgNqIAMgAC0ABWoiA2ogAyAALQAGaiIDaiADIAAtAAdqIgNqIAMgAC0ACGoiA2ogAyAALQAJaiIDaiADIAAtAApqIgNqIAMgAC0AC2oiA2ogAyAALQAMaiIDaiADIAAtAA1qIgNqIAMgAC0ADmoiA2ogAyAALQAPaiIDaiEEIABBEGohACAFQQFrIgUNAAsgBEHx/wNwIQQgA0Hx/wNwIQMgAUGwK2ohASACQa8rSw0ACyACRQ0DIAJBEEkNAQsDQCADIAEtAABqIgAgBGogACABLQABaiIAaiAAIAEtAAJqIgBqIAAgAS0AA2oiAGogACABLQAEaiIAaiAAIAEtAAVqIgBqIAAgAS0ABmoiAGogACABLQAHaiIAaiAAIAEtAAhqIgBqIAAgAS0ACWoiAGogACABLQAKaiIAaiAAIAEtAAtqIgBqIAAgAS0ADGoiAGogACABLQANaiIAaiAAIAEtAA5qIgBqIAAgAS0AD2oiA2ohBCABQRBqIQEgAkEQayICQQ9LDQALIAJFDQELIAJBAWshBiACQQNxIgUEQCABIQADQCACQQFrIQIgAyAALQAAaiIDIARqIQQgAEEBaiIBIQAgBUEBayIFDQALCyAGQQNJDQADQCADIAEtAABqIgAgAS0AAWoiBSABLQACaiIGIAEtAANqIgMgBiAFIAAgBGpqamohBCABQQRqIQEgAkEEayICDQALCyAEQfH/A3AhBCADQfH/A3AhAwsgBEEQdCADcg8LAkAgAkUNACACQQFrIQYgAkEDcSIFBEAgASEAA0AgAkEBayECIAMgAC0AAGoiAyAEaiEEIABBAWoiASEAIAVBAWsiBQ0ACwsgBkEDSQ0AA0AgAyABLQAAaiIAIAEtAAFqIgUgAS0AAmoiBiABLQADaiIDIAYgBSAAIARqampqIQQgAUEEaiEBIAJBBGsiAg0ACwsgBEHx/wNwQRB0IANB8f8DayADIANB8P8DSxtyBSAACwsKACAAIAEgAhADC4UJAQJ/IAFFBEBBAA8LIABBf3MhAAJAIAJFDQAgAUEDcUUNACABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACACQQFrIgRBACABQQFqIgNBA3EbRQRAIAMhASAEIQIMAQsgAS0AASAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEDAkAgAkECayIERQ0AIANBA3FFDQAgAS0AAiAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUEDaiEDAkAgAkEDayIERQ0AIANBA3FFDQAgAS0AAyAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAkEEayECIAFBBGohAQwCCyADIQEgBCECDAELIAMhASAEIQILIAJBH0sEQANAIAEoAhwgASgCGCABKAIUIAEoAhAgASgCDCABKAIIIAEoAgQgASgCACAAcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAcyEAIAFBIGohASACQSBrIgJBH0sNAAsLIAJBA0sEQANAIAEoAgAgAHMiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzIQAgAUEEaiEBIAJBBGsiAkEDSw0ACwsCQCACRQ0AIAJBAXEEfyABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACABQQFqIQEgAkEBawUgAgshAyACQQFGDQADQCABLQABIAEtAAAgAEH/AXFzQQJ0QYAIaigCACAAQQh2cyIAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEBIANBAmsiAw0ACwsgAEF/cwsKACAAIAEgAhAFC9wEAQN/AkBByN8ALQAAQTFHDQAgAEUNACAAQQA2AhggACgCICIBRQRAIABBADYCKCAAQQE2AiBBASEBCyAAKAIkRQRAIABBAjYCJAsgACgCKEEBQcQtIAERAAAiAUUNACAAIAE2AhwgAUEPNgIwIAFBADYCHCABQQA2AhggAUEqNgIEIAEgADYCACABQQs2AlAgAUGAgAI2AiwgAUH//wE2AjQgAUGAEDYCTCABQQQ2AlggAUH/DzYCVCABIAAoAihBgIACQQIgACgCIBEAADYCOCABIAAoAiggASgCLEECIAAoAiARAAA2AkAgACgCKCABKAJMQQIgACgCIBEAACECIAFBADYCwC0gASACNgJEIAFBgAg2ApwtIAEgACgCKEGACEEEIAAoAiARAAAiAjYCCCABIAEoApwtIgNBAnQ2AgwCQAJAIAEoAjhFDQAgASgCQEUNACACRQ0AIAEoAkQNAQsgAUGaBTYCBCAAQbjfACgCADYCGCAAEAgPCyABQQA2AogBIAFBCTYChAEgAUEIOgAkIAEgAiADQQNsajYCmC0gASACIANBfnFqNgKkLSAAEAkNACAAKAIcIgAgACgCLEEBdDYCPCAAKAJEIgEgACgCTEEBdEECayIDakEAOwEAIAEgAxAgIABBADYCtC0gAEKAgICAIDcCdCAAQgA3AmggAEKAgICAIDcCXCAAQQA2AkggACAAKAKEAUEMbCIBQYTIAGovAQA2ApABIAAgAUGAyABqLwEANgKMASAAIAFBgsgAai8BADYCgAEgACABQYbIAGovAQA2AnwLC6kCAQN/AkAgAEUNACAAKAIgRQ0AIAAoAiQiA0UNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgJBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIAJBmgVGDQAgAkEqRw0BCwJ/An8CfyABKAIIIgIEQCAAKAIoIAIgAxECACAAKAIcIQELIAEoAkQiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAkAiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAjgiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAAoAiggASAAKAIkEQIAIABBADYCHAsLlgIBA39BfiECAkAgAEUNACAAKAIgRQ0AIAAoAiRFDQAgACgCHCIBRQ0AIAEoAgAgAEcNAAJAAkAgASgCBCIDQTlrDjkBAgICAgICAgICAgIBAgICAQICAgICAgICAgICAgICAgICAQICAgICAgICAgICAQICAgICAgICAgEACyADQZoFRg0AIANBKkcNAQsgAEECNgIsIABBADYCCCAAQgA3AhQgAUEANgIUIAEgASgCCDYCECABKAIYIgJBf0wEQCABQQAgAmsiAjYCGAsgAUE5QSpB8QAgAhsgAkECRhs2AgQgAAJ/IAJBAkYEQEEAQQBBABAGDAELQQBBAEEAEAQLNgIwQQAhAiABQQA2AiggARAQCyACC9wIAQt/IAAoAiwiB0GGAmshCyAAKAJ0IQUgByEBA0AgACgCPCAFayAAKAJsIghrIQYgASALaiAITQRAIAAoAjgiASABIAdqIAcgBmsQHxogACAAKAJwIAdrNgJwIAAgACgCbCAHayIINgJsIAAgACgCXCAHazYCXCAAKAJMIgRBAWshCiAAKAJEIARBAXRqIQMgACgCLCEBIARBA3EiAgRAA0AgA0ECayIDQQAgAy8BACIFIAFrIgkgBSAJSRs7AQAgBEEBayEEIAJBAWsiAg0ACwsgCkEDTwRAA0AgA0ECayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EEayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EGayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EIayIDQQAgAy8BACICIAFrIgUgAiAFSRs7AQAgBEEEayIEDQALCyABQQFrIQogACgCQCABQQF0aiEDIAEhBCABQQNxIgIEQANAIANBAmsiA0EAIAMvAQAiBSABayIJIAUgCUkbOwEAIARBAWshBCACQQFrIgINAAsLIApBA08EQANAIANBAmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBGsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBCGsiA0EAIAMvAQAiAiABayIFIAIgBUkbOwEAIARBBGsiBA0ACwsgBiAHaiEGCwJAIAAoAgAiASgCBCIERQ0AIAAoAnQhAiAGIAQgBCAGSxsiAwRAIAAoAjghBSABIAQgA2s2AgQgBSAIaiACaiABKAIAIAMQHyEEAkACQAJAIAEoAhwoAhhBAWsOAgABAgsgASABKAIwIAQgAxAENgIwDAELIAEgASgCMCAEIAMQBjYCMAsgASABKAIAIANqNgIAIAEgASgCCCADajYCCCAAKAJ0IQILIAAgAiADaiIFNgJ0AkAgACgCtC0iAyAFakEDSQ0AIAAgACgCOCIJIAAoAmwgA2siAWoiBC0AACICNgJIIAAgACgCVCIIIAQtAAEgAiAAKAJYIgZ0c3EiBDYCSANAIANFDQEgACABIAlqLQACIAQgBnRzIAhxIgQ2AkggACgCQCAAKAI0IAFxQQF0aiAAKAJEIARBAXRqIgIvAQA7AQAgAiABOwEAIAAgA0EBayIDNgK0LSABQQFqIQEgAyAFakECSw0ACwsgBUGFAksNACAAKAIAKAIERQ0AIAAoAiwhAQwBCwsCQCAAKAI8IgQgACgCwC0iAU0NACAAKAJ0IAAoAmxqIgMgAUsEQCAAKAI4IANqIAQgA2siAUGCAiABQYICSRsiARAgIAAgASADajYCwC0PCyADQYICaiIDIAFNDQAgACgCOCABaiAEIAFrIgQgAyABayIBIAEgBEsbIgEQICAAIAAoAsAtIAFqNgLALQsLsSwBCn8CQCAARQ0AIAAoAiBFDQAgACgCJEUNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgNBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIANBmgVGDQAgA0EqRw0BCwJAAkAgACgCDEUNACAAKAIEIgIEQCAAKAIARQ0BCyADQZoFRw0BCyAAQbDfACgCADYCGA8LIAAoAhBFBEAgAEG83wAoAgA2AhgPCyABKAIoIQUgAUEDNgIoAkAgASgCFARAIAEQEwJAIAAoAhAiAyABKAIUIgQgAyAESRsiAkUNACAAKAIMIAEoAhAgAhAfGiAAIAAoAgwgAmo2AgwgASABKAIQIAJqNgIQIAAgACgCFCACajYCFCAAIAAoAhAgAmsiAzYCECABIAEoAhQgAmsiBDYCFCAEDQAgASABKAIINgIQQQAhBAsgAwRAIAEoAgQhAwwCCyABQX82AigPCyACDQAgBUEBdEF3QQAgBUEEShtqQQZIDQAgAEG83wAoAgA2AhgPCwJAAkACQAJAAn8CQAJAAkACQAJAAkAgA0EqRwRAIANBmgVHDQEgACgCBEUNAiAAQbzfACgCADYCGA8LIAEoAjBBDHRBgPABayEDQQAhAgJAIAEoAogBQQFKDQAgASgChAEiBUECSA0AQcAAIQIgBUEGSA0AQYABQcABIAVBBkYbIQILIAEgBEEBajYCFCABKAIIIARqIAIgA3IiAkEgciACIAEoAmwbIgJBCHY6AAAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQR9wIAJyQR9zOgAAIAEoAmwEQCAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQRh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEQdjoAACAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQQh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAsgAEEAQQBBABAENgIwIAFB8QA2AgQgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBCABKAIEIQMLAkACQAJAAkACQAJAAkAgA0E5RgR/IABBAEEAQQAQBjYCMCABIAEoAhQiAkEBajYCFCACIAEoAghqQR86AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakGLAToAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQg6AAAgASgCHCICDQIgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAAEECIQIgASgChAEiA0EJRwRAQQQgASgCiAFBAUpBAnQgA0ECSBshAgsgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBAzoAACABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIUDQEgASgCBAUgAwtBxQBrDiMCBgYGAwYGBgYGBgYGBgYGBgYGBgYGBAYGBgYGBgYGBgYGBQYLIAFBfzYCKA8LIAIoAiQhAyACKAIcIQQgAigCECEFIAIoAiwhBiACKAIAIQggASABKAIUIgdBAWo2AhRBAiECIAcgASgCCGogBkEAR0EBdCAIQQBHciAFQQBHQQJ0ciAEQQBHQQN0ciADQQBHQQR0cjoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAhwoAgQhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIANBCHY6AAAgASgCHC8BBiEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcLQAHIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABKAIcKAIMIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEoAhwiAigCEAR/IAIoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcBSACCygCLARAIAAgACgCMCABKAIIIAEoAhQQBjYCMAsgAUHFADYCBCABQQA2AiALIAEoAhwiBCgCECIDBEAgASgCFCICIAQvARQgASgCICIGayIFaiABKAIMIgRLBEADQCABKAIIIAJqIAMgBmogBCACayIEEB8aIAEgASgCDCIDNgIUAkAgAiADTw0AIAEoAhwoAixFDQAgACAAKAIwIAEoAgggAmogAyACaxAGNgIwCyABIAEoAiAgBGo2AiAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIGIAMgBkkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQEQCABQX82AigPCyABKAIgIQYgASgCHCgCECEDQQAhAiAFIARrIgUgASgCDCIESw0ACwsgASgCCCACaiADIAZqIAUQHxogASABKAIUIAVqIgM2AhQCQCACIANPDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCACaiADIAJrEAY2AjALIAFBADYCIAsgAUHJADYCBAsgASgCHCgCHARAIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCHCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLAkAgASgCHCgCLEUNACABKAIUIgIgBU0NACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAFBADYCIAsgAUHbADYCBAsCQCABKAIcKAIkRQ0AIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCJCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLIAEoAhwoAixFDQAgASgCFCICIAVNDQAgACAAKAIwIAEoAgggBWogAiAFaxAGNgIwCyABQecANgIECyABKAIcKAIsBEAgASgCDCABKAIUIgJBAmpJBEAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBUEAIQILIAAoAjAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAEEAQQBBABAGNgIwCyABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIURQ0AIAFBfzYCKA8LIAAoAgQNAQsgASgCdA0AIAEoAgRBmgVGDQgLIAEoAoQBIgJFBEAgAUEDEAwMBAsCQAJAIAEoAogBQQJrDgIAAQQLA0ACQAJAIAEoAnQNACABEAogASgCdA0AIAFBADYCtC0MAQsgAUEANgJgIAEoAjggASgCbGotAAAhAiABKAKkLSABKAKgLSIDQQF0akEAOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAjoAACABIAJBAnRqQZQBaiICIAIvAQBBAWo7AQAgASABKAJ0QQFrNgJ0IAEgASgCbEEBaiICNgJsIAEoAqAtIAEoApwtQQFrRw0BIAEgASgCXCIEQQBOBH8gASgCOCAEagVBAAsgAiAEa0EAEBQgASABKAJsNgJcIAEoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAEoAgAoAhANAQwHCwsgASgCoC1FDQcgASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNBQwHCwNAAkACQAJAIAEoAnQiAkGDAk8EQCABQQA2AmAMAQsgARAKIAEoAnQiAgRAIAFBADYCYCACQQJLDQEgASgCbCEDDAILIAFBADYCtC0gASgCoC1FDQogASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNCAwKCyABKAJsIgNFBEBBACEDDAELIAEoAjggA2oiBkEBayIFLQAAIgQgBi0AAEcNACAEIAUtAAJHDQAgBCAFLQADRw0AIAZBggJqIQlBfyEIAkACQAJAAkACQAJAA0AgBiAIaiIFLQAEIARGBEAgBCAFLQAFRw0CIAQgBS0ABkcNAyAEIAUtAAdHDQQgBCAGIAhBCGoiCmoiBy0AAEcNByAEIAUtAAlHDQUgBCAFLQAKRw0GIAVBC2ohByAIQfYBSg0HIAohCCAEIActAABGDQEMBwsLIAVBBGohBwwFCyAFQQVqIQcMBAsgBUEGaiEHDAMLIAVBB2ohBwwCCyAFQQlqIQcMAQsgBUEKaiEHCyABIAIgByAJa0GCAmoiBCACIARJGyICNgJgIAJBA0kNACABKAKkLSABKAKgLSIDQQF0akEBOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAWpBmAlqIgIgAi8BAEEBajsBACABQYDJAC0AAEECdGpBiBNqIgIgAi8BAEEBajsBACABKAJgIQIgAUEANgJgIAEgASgCdCACazYCdCABIAIgASgCbGoiAjYCbCABKAKgLSABKAKcLUEBa0cNAgwBCyABKAI4IANqLQAAIQIgASgCpC0gASgCoC0iA0EBdGpBADsBACABIANBAWo2AqAtIAMgASgCmC1qIAI6AAAgASACQQJ0akGUAWoiAiACLwEAQQFqOwEAIAEgASgCdEEBazYCdCABIAEoAmxBAWoiAjYCbCABKAKgLSABKAKcLUEBa0cNAQsgASABKAJcIgRBAE4EfyABKAI4IARqBUEACyACIARrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEA0ACwwECyABQX82AigPCyABQX82AigPCyABQQMgAkEMbEGIyABqKAIAEQQACyICQX5xQQJGBEAgAUGaBTYCBAsgAkF9cQ0BCyAAKAIQDQMgAUF/NgIoDwsgAkEBRw0BCyABQQBBAEEAEBIgASgCRCICIAEoAkxBAXRBAmsiA2pBADsBACACIAMQICABKAJ0RQRAIAFBADYCtC0gAUEANgJcIAFBADYCbAsgACgCHCICEBMCQCAAKAIQIgQgAigCFCIDIAMgBEsbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrIgQ2AhAgAiACKAIUIANrIgM2AhQgAw0AIAIgAigCCDYCEAsgBA0AIAFBfzYCKAsLC7YNAQt/IAAoAgAiBCgCBCEJQQEhCAJAIAQoAhAiAyAAKAK8LUEqakEDdSICSQ0AIAAoAiwiBSAAKAIMQQVrIgYgBSAGSRshCiABQQRHIQsDQCAKIAMgAmsiAyAAKAJsIAAoAlxrIgYgBCgCBGoiAkH//wMgAkH//wNJGyIFIAMgBUkbIgNLBEAgAiADRw0CIAFFDQIgCyADRXENAgsgAEEAQQAgAUEERiACIANGcSIHEBIgACgCFCAAKAIIakEEayADOgAAIAAoAhQgACgCCGpBA2sgA0EIdjoAACAAKAIUIAAoAghqQQJrIANBf3MiAjoAACAAKAIUIAAoAghqQQFrIAJBCHY6AAAgACgCACICKAIcIgQQEwJAIAIoAhAiBSAEKAIUIgwgBSAMSRsiBUUNACACKAIMIAQoAhAgBRAfGiACIAIoAgwgBWo2AgwgBCAEKAIQIAVqNgIQIAIgAigCFCAFajYCFCACIAIoAhAgBWs2AhAgBCAEKAIUIAVrIgI2AhQgAg0AIAQgBCgCCDYCEAsCfyAGBEAgACgCACgCDCAAKAI4IAAoAlxqIAMgBiADIAZJGyICEB8aIAAoAgAiBCAEKAIMIAJqNgIMIAQgBCgCECACazYCECAEIAQoAhQgAmo2AhQgACAAKAJcIAJqNgJcIAMgAmshAwsgAwsEQCAAKAIAIgIoAgwhBSADIAIoAgQiBiADIAZJGyIEBEAgAiAGIARrNgIEIAUgAigCACAEEB8hBQJAAkACQCACKAIcKAIYQQFrDgIAAQILIAIgAigCMCAFIAQQBDYCMAwBCyACIAIoAjAgBSAEEAY2AjALIAIgAigCACAEajYCACACIAIoAgggBGo2AgggACgCACICKAIMIQULIAIgAyAFajYCDCACIAIoAhAgA2s2AhAgAiACKAIUIANqNgIUCyAAKAIAIQQgBwRAQQAhCAwCCyAEKAIQIgMgACgCvC1BKmpBA3UiAk8NAAsLAkAgCSAEKAIEayIDRQRAIAAoAmwhAgwBCwJAIAAoAiwiAiADTQRAIABBAjYCsC0gACgCOCAEKAIAIAJrIAIQHxogACAAKAIsIgQ2AmwgBCECDAELAkAgACgCPCAAKAJsIgRrIANLDQAgACAEIAJrIgQ2AmwgACgCOCIFIAIgBWogBBAfGiAAKAKwLSICQQFLDQAgACACQQFqNgKwLQsgACgCOCAAKAJsaiAAKAIAKAIAIANrIAMQHxogACAAKAJsIANqIgI2AmwgACgCLCEECyAAIAI2AlwgACAEIAAoArQtIgVrIgQgAyADIARLGyAFajYCtC0LIAIgACgCwC1LBEAgACACNgLALQtBAyEDAkAgCEUNACAAKAIAIgQoAgQhAwJAAkAgAUF7cUUNACADDQBBASEDIAIgACgCXEYNAiAAKAI8IAJBf3NqIQVBACEDDAELIAMgACgCPCACQX9zaiIFTQ0AIAAoAlwiByAAKAIsIgZIDQAgACACIAZrIgM2AmwgACAHIAZrNgJcIAAoAjgiAiACIAZqIAMQHxogACgCsC0iA0EBTQRAIAAgA0EBajYCsC0LIAAoAiwgBWohBSAAKAIAIgQoAgQhAwsCQCADIAUgAyAFSRsiAkUEQCAAKAJsIQMMAQsgACgCbCEFIAAoAjghBiAEIAMgAms2AgQgBSAGaiAEKAIAIAIQHyEDAkACQAJAIAQoAhwoAhhBAWsOAgABAgsgBCAEKAIwIAMgAhAENgIwDAELIAQgBCgCMCADIAIQBjYCMAsgBCAEKAIAIAJqNgIAIAQgBCgCCCACajYCCCAAIAAoAmwgAmoiAzYCbAsgAyAAKALALUsEQCAAIAM2AsAtCyADIAAoAlwiBmsiBCAAKAIsIgMgACgCDCAAKAK8LUEqakEDdWsiAkH//wMgAkH//wNJGyICIAIgA0sbSQRAQQAhAyABRQ0BIAFBBEYgBEEAR3JFDQEgAiAESQ0BIAAoAgAoAgQNAQtBACEFIAAgACgCOCAGaiACIAQgAiAESRsiAwJ/IAFBBEYEQCAAKAIAKAIERSACIARPcSEFCyAFCxASIAAgACgCXCADajYCXCAAKAIAIgAoAhwiAxATAkAgACgCECICIAMoAhQiBCACIARJGyICRQ0AIAAoAgwgAygCECACEB8aIAAgACgCDCACajYCDCADIAMoAhAgAmo2AhAgACAAKAIUIAJqNgIUIAAgACgCECACazYCECADIAMoAhQgAmsiADYCFCAADQAgAyADKAIINgIQC0ECQQAgBRshAwsgAwu5CwENfwJAA0ACQAJAIAAoAnRBhQJNBEAgABAKIAAoAnQhAgJAIAENACACQYYCTw0AQQAPCyACRQ0EIAJBA0kNAQsgACAAKAJUIAAoAmwiAiAAKAI4ai0AAiAAKAJIIAAoAlh0c3EiAzYCSCAAKAJAIAIgACgCNHFBAXRqIAAoAkQgA0EBdGoiBC8BACIDOwEAIAQgAjsBACADRQ0AIAAoAixBhgJrIAIgA2tJDQAgACAAIAMQDiICNgJgDAELIAAoAmAhAgsCQCACQQNPBEAgACgCpC0gACgCoC0iA0EBdGogACgCbCAAKAJwayIEOwEAIAAgA0EBajYCoC0gAyAAKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAGpBmAlqIgIgAi8BAEEBajsBACAAIARBAWtB//8DcSICIAJBB3ZBgAJqIAJBgAJJG0GAyQBqLQAAQQJ0akGIE2oiAiACLwEAQQFqOwEAIAAgACgCdCAAKAJgIgJrIgM2AnQgACgCnC1BAWshBiAAKAKgLSEHAkAgA0EDSQ0AIAIgACgCgAFLDQAgACACQQFrIgM2AmAgACgCSCEEIAAoAmwhAiAAKAI0IQggACgCQCEJIAAoAkQhCiAAKAJUIQsgACgCOCEMIAAoAlghDQNAIAAgAiIFQQFqIgI2AmwgACAFIAxqLQADIAQgDXRzIAtxIgQ2AkggCSACIAhxQQF0aiAKIARBAXRqIg4vAQA7AQAgDiACOwEAIAAgA0EBayIDNgJgIAMNAAsgACAFQQJqIgI2AmwgBiAHRw0DDAILIABBADYCYCAAIAAoAmwgAmoiAjYCbCAAIAAoAjggAmoiAy0AACIENgJIIAAgACgCVCADLQABIAQgACgCWHRzcTYCSCAGIAdHDQIMAQsgACgCOCAAKAJsai0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBACAAIAAoAnRBAWs2AnQgACAAKAJsQQFqIgI2AmwgACgCoC0gACgCnC1BAWtHDQELQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQALQQAPCyAAIAAoAmwiAkECIAJBAkkbNgK0LSABQQRGBEBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EBEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALQQNBAiAAKAIAKAIQGw8LAkAgACgCoC1FDQBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EAEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAAoAgAoAhANAEEADwtBAQukBAEQfyAAKAJ8IgMgA0ECdiAAKAJ4IgQgACgCjAFJGyEJQQAgACgCbCIDIAAoAixrQYYCaiICIAIgA0sbIQwgACgCdCIHIAAoApABIgIgAiAHSxshDSAAKAI4Ig4gA2oiBUGCAmohDyAEIAVqIgMtAAAhCiADQQFrLQAAIQsgACgCNCEQIAAoAkAhEQNAAkACQCABIA5qIgMgBGoiAi0AACAKRw0AIAJBAWstAAAgC0cNACADLQAAIAUtAABHDQBBAiEGIAMtAAEgBS0AAUcNAAJAAkACQAJAAkACQAJAA0AgBSAGaiICLQABIAMtAANHDQYgAi0AAiADLQAERw0FIAItAAMgAy0ABUcNBCACLQAEIAMtAAZHDQMgAi0ABSADLQAHRw0CIAItAAYgAy0ACEcNASACLQAHIAMtAAlGBEAgBkH5AUshCCAFIAZBCGoiBmohAiAIDQggAy0ACiEIIANBCGohAyACLQAAIAhGDQEMCAsLIAJBB2ohAgwGCyACQQZqIQIMBQsgAkEFaiECDAQLIAJBBGohAgwDCyACQQNqIQIMAgsgAkECaiECDAELIAJBAWohAgsgAiAPayICQYICaiIDIARMDQAgACABNgJwIAMgDU4EQCADIQQMAgsgAyAFai0AACEKIAIgBWotAIECIQsgAyEECyAJQQFrIglFDQAgDCARIAEgEHFBAXRqLwEAIgFJDQELCyAHIAQgBCAHSxsL3Q4BB38DQAJAAkACQCAAKAJ0QYUCSw0AIAAQCiAAKAJ0IQICQCABDQAgAkGGAk8NAEEADwsgAkUNAiACQQJLDQAgACAAKAJgIgI2AnggACAAKAJwNgJkQQIhAyAAQQI2AmAMAQtBAiEDIAAgACgCVCAAKAJsIgIgACgCOGotAAIgACgCSCAAKAJYdHNxIgQ2AkggACgCQCACIAAoAjRxQQF0aiAAKAJEIARBAXRqIgUvAQAiBDsBACAFIAI7AQAgACAAKAJgIgI2AnggACAAKAJwNgJkIABBAjYCYCAERQ0AAkAgAiAAKAKAAU8NACAAKAIsQYYCayAAKAJsIARrSQ0AIAAgACAEEA4iAzYCYCADQQVLDQAgACgCiAFBAUcEQCADQQNHDQFBAyEDIAAoAmwgACgCcGtBgSBJDQELQQIhAyAAQQI2AmALIAAoAnghAgsCQCACQQNJDQAgAiADSQ0AIAAoAnQhBCAAKAKkLSAAKAKgLSIDQQF0aiAAKAJsIgUgACgCZEF/c2oiBjsBACAAIANBAWo2AqAtIAMgACgCmC1qIAJBA2siAjoAACACQf8BcUGAzQBqLQAAQQJ0IABqQZgJaiICIAIvAQBBAWo7AQAgACAGQQFrQf//A3EiAiACQQd2QYACaiACQYACSRtBgMkAai0AAEECdGpBiBNqIgIgAi8BAEEBajsBACAAIAAoAngiAkECayIDNgJ4IAAgACgCdCACa0EBajYCdCAEIAVqQQNrIQUgACgCnC1BAWshByAAKAJsIQIgACgCoC0hCANAIAAgAiIEQQFqIgI2AmwgAiAFTQRAIAAgACgCVCAEIAAoAjhqLQADIAAoAkggACgCWHRzcSIGNgJIIAAoAkAgACgCNCACcUEBdGogACgCRCAGQQF0aiIGLwEAOwEAIAYgAjsBAAsgACADQQFrIgM2AnggAw0ACyAAQQI2AmAgAEEANgJoIAAgBEECaiICNgJsIAcgCEcNAkEAIQMgACAAKAJcIgRBAE4EfyAAKAI4IARqBSADCyACIARrQQAQFCAAIAAoAmw2AlwgACgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACgCACgCEA0CQQAPCyAAKAJoBEAgACgCbCAAKAI4akEBay0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBAAJAIAAoAqAtIAAoApwtQQFrRw0AQQAhAyAAIAAoAlwiAkEATgR/IAAoAjggAmoFIAMLIAAoAmwgAmtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACAAKAJsQQFqNgJsIAAgACgCdEEBazYCdCAAKAIAKAIQDQJBAA8FIABBATYCaCAAIAAoAmxBAWo2AmwgACAAKAJ0QQFrNgJ0DAILAAsLIAAoAmgEQCAAKAJsIAAoAjhqQQFrLQAAIQIgACgCpC0gACgCoC0iA0EBdGpBADsBACAAIANBAWo2AqAtIAMgACgCmC1qIAI6AAAgACACQQJ0akGUAWoiAiACLwEAQQFqOwEAIABBADYCaAsgACAAKAJsIgJBAiACQQJJGzYCtC0gAUEERgRAQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBARAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQC0EDQQIgACgCACgCEBsPCwJAIAAoAqAtRQ0AQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQBBAA8LQQELYQAgAEEANgK8LSAAQQA7AbgtIABBuBZqQajPADYCACAAIABB/BRqNgKwFiAAQawWakGUzwA2AgAgACAAQYgTajYCpBYgAEGgFmpBgM8ANgIAIAAgAEGUAWo2ApgWIAAQEQvwBAEDfyAAQZQBaiECA0AgAiABQQJ0IgNqQQA7AQAgAiADQQRyakEAOwEAIAFBAmoiAUGeAkcNAAsgAEEAOwH8FCAAQQA7AYgTIABBxBVqQQA7AQAgAEHAFWpBADsBACAAQbwVakEAOwEAIABBuBVqQQA7AQAgAEG0FWpBADsBACAAQbAVakEAOwEAIABBrBVqQQA7AQAgAEGoFWpBADsBACAAQaQVakEAOwEAIABBoBVqQQA7AQAgAEGcFWpBADsBACAAQZgVakEAOwEAIABBlBVqQQA7AQAgAEGQFWpBADsBACAAQYwVakEAOwEAIABBiBVqQQA7AQAgAEGEFWpBADsBACAAQYAVakEAOwEAIABB/BNqQQA7AQAgAEH4E2pBADsBACAAQfQTakEAOwEAIABB8BNqQQA7AQAgAEHsE2pBADsBACAAQegTakEAOwEAIABB5BNqQQA7AQAgAEHgE2pBADsBACAAQdwTakEAOwEAIABB2BNqQQA7AQAgAEHUE2pBADsBACAAQdATakEAOwEAIABBzBNqQQA7AQAgAEHIE2pBADsBACAAQcQTakEAOwEAIABBwBNqQQA7AQAgAEG8E2pBADsBACAAQbgTakEAOwEAIABBtBNqQQA7AQAgAEGwE2pBADsBACAAQawTakEAOwEAIABBqBNqQQA7AQAgAEGkE2pBADsBACAAQaATakEAOwEAIABBnBNqQQA7AQAgAEGYE2pBADsBACAAQZQTakEAOwEAIABBkBNqQQA7AQAgAEGME2pBADsBACAAQgA3AqwtIABBlAlqQQE7AQAgAEEANgKoLSAAQQA2AqAtC7IDAQJ/IAAgAC8BuC0gA0H//wNxIgUgACgCvC0iBHRyIgM7AbgtAkACQAJ/IARBDk4EQCAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAM6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAAQbktai0AADoAACAAIAVBECAAKAK8LSIEa3YiAzsBuC0gBEENawwBCyAEQQNqCyIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGohBCAAQbktai0AACEDDAELIARBAUgNASAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQLIAQgAzoAAAsgAEEANgK8LSAAQQA7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAjoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAJBCHY6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiACQX9zIgM6AAAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADQQh2OgAAIAAoAgggACgCFGogASACEB8aIAAgACgCFCACajYCFAusAQEBfwJAIAACfyAAKAK8LSIBQRBGBEAgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIAAoAhQiAUEBajYCFCABIAAoAghqIABBuS1qLQAAOgAAIABBADsBuC1BAAwBCyABQQhIDQEgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIABBuS1qLQAAOwG4LSAAKAK8LUEIaws2ArwtCwuhEwENfwJ/AkACQAJAIAAoAoQBQQFOBEAgACgCACIGKAIsQQJHDQNB/4D/n38hBANAAkAgBEEBcUUNACAAIAVBAnRqLwGUAUUNAEEAIQQMBAsCQCAEQQJxRQ0AIAAgBUECdEEEcmovAZQBRQ0AQQAhBAwECyAEQQJ2IQQgBUECaiIFQSBHDQALDAELIAJBBWoiBQwDCwJAIAAvAbgBDQAgAC8BvAENACAALwHIAQ0AQSAhBQNAIAAgBUECdCIEai8BlAENASAAIARBBHJqLwGUAQ0BIAAgBEEIcmovAZQBDQEgACAEQQxyai8BlAENAUEAIQQgBUEEaiIFQYACRw0ACwwBC0EBIQQLIAYgBDYCLAsgACAAQZgWahAVIAAgAEGkFmoQFSAALwGWASEEIAAgAEGcFmooAgAiCkECdGpB//8DOwGaASAKQQBOBEBBB0GKASAEGyEJQQRBAyAEGyELIABBwBVqIQ4gAEHEFWohDyAAQbwVaiEQQX8hDANAIAQhBSAAIAgiDUEBaiIIQQJ0ai8BlgEhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgAEGKE2ovAQAhBCAAIABBqBZqKAIAIgpBAnRqQY4TakH//wM7AQBBACEHIApBAE4EQEEHQYoBIAQbIQlBBEEDIAQbIQsgAEHAFWohDiAAQcQVaiEPIABBvBVqIRBBfyEMQQAhCANAIAQhBSAAIAgiDUEBaiIIQQJ0akGKE2ovAQAhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgACAAQbAWahAVIAAgACgCqC0Cf0ESIABBuhVqLwEADQAaQREgAEGCFWovAQANABpBECAAQbYVai8BAA0AGkEPIABBhhVqLwEADQAaQQ4gAEGyFWovAQANABpBDSAAQYoVai8BAA0AGkEMIABBrhVqLwEADQAaQQsgAEGOFWovAQANABpBCiAAQaoVai8BAA0AGkEJIABBkhVqLwEADQAaQQggAEGmFWovAQANABpBByAAQZYVai8BAA0AGkEGIABBohVqLwEADQAaQQUgAEGaFWovAQANABpBBCAAQZ4Vai8BAA0AGkEDQQIgAEH+FGovAQAbCyIIQQNsaiIEQRFqNgKoLSAEQRtqQQN2IgQgACgCrC1BCmpBA3YiBSAEIAVJGwshBAJAAkAgAUUNACACQQRqIARLDQAgACABIAIgAxASDAELIAAoArwtIQYCQCAEIAVHBEAgACgCiAFBBEcNAQsgACAALwG4LSADQQJqQf//A3EiBCAGdHIiBTsBuC0gAAJ/IAZBDk4EQCAAIAAoAhQiBkEBajYCFCAGIAAoAghqIAU6AAAgACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAAQbktai0AADoAACAAIARBECAAKAK8LSIFa3Y7AbgtIAVBDWsMAQsgBkEDags2ArwtIABBwM8AQcDYABAWDAELIAAvAbgtIANBBGpB//8DcSIHIAZ0ciEFAkAgBkEOTgRAIAAgBTsBuC0gACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAFOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUENayEEIAdBECAFa3YhBQwBCyAGQQNqIQQLIAAgBDYCvC0gAEGcFmooAgAiCkGA/gNqQf//A3EiByAEdCEGIABBqBZqKAIAIQkCfyAEQQxOBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBC2shBCAHQRAgBWt2DAELIARBBWohBCAFIAZyCyEFIAAgBDYCvC0gCUH//wNxIgcgBHQhBgJ/IARBDE4EQCAAIAUgBnIiBDsBuC0gACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAEOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUELayEEIAdBECAFa3YMAQsgBEEFaiEEIAUgBnILIQUgACAENgK8LSAIQf3/A2pB//8DcSIHIAR0IQYCfyAEQQ1OBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBDGshBCAHQRAgBWt2DAELIARBBGohBCAFIAZyCyEGIAAgBDYCvC1BACEFIABBuS1qIQ0DQCAAIAYgACAFQZDcAGotAABBAnRqQf4Uai8BACIHIAR0ciIGOwG4LSAAAn8gBEEOTgRAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogBjoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIA0tAAA6AAAgACAHQRAgACgCvC0iBGt2IgY7AbgtIARBDWsMAQsgBEEDagsiBDYCvC0gBSAIRyEHIAVBAWohBSAHDQALIAAgAEGUAWoiBCAKEBcgACAAQYgTaiIFIAkQFyAAIAQgBRAWCyAAEBEgAwRAAkACfyAAKAK8LSIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAALQC4LToAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQgAEG5LWotAAAMAQsgBEEBSA0BIAAgACgCFCIEQQFqNgIUIAQgACgCCGohBCAALQC4LQshBSAEIAU6AAALIABBADYCvC0gAEEAOwG4LQsLsRUBFX8jAEEgayEKIAEoAgAhCSABKAIIIgIoAgAhBSACKAIMIQ0gAEKAgICA0McANwLQKEF/IRACQCANQQBKBEBBACECA0ACQCAJIAJBAnRqIgMvAQAEQCAAIAAoAtAoQQFqIgM2AtAoIAAgA0ECdGpB3BZqIAI2AgAgACACakHYKGpBADoAACACIRAMAQsgA0EAOwECCyACQQFqIgIgDUcNAAsgACgC0CgiBEEBSg0BCwNAIAAgBEEBaiICNgLQKCAAIAJBAnRqQdwWaiAQQQFqIgNBACAQQQJIIgQbIgI2AgAgCSACQQJ0IgdqQQE7AQAgACACakHYKGpBADoAACAAIAAoAqgtQQFrNgKoLSAFBEAgACAAKAKsLSAFIAdqLwECazYCrC0LIAMgECAEGyEQIAAoAtAoIgRBAkgNAAsLIAEgEDYCBCAEQQF2IQgDQCAAIAhBAnRqQdwWaigCACELAkAgCCICQQF0IgMgBEoNACAAIAtqQdgoaiEPIAkgC0ECdGohBiAIIQUDQAJAIAMgBE4EQCADIQIMAQsgCSAAQdwWaiICIANBAXIiBEECdGooAgAiDkECdGovAQAiByAJIAIgA0ECdGooAgAiDEECdGovAQAiAk8EQCACIAdHBEAgAyECDAILIAMhAiAAQdgoaiIDIA5qLQAAIAMgDGotAABLDQELIAQhAgsgBi8BACIEIAkgACACQQJ0akHcFmooAgAiA0ECdGovAQAiB0kEQCAFIQIMAgsCQCAEIAdHDQAgDy0AACAAIANqQdgoai0AAEsNACAFIQIMAgsgACAFQQJ0akHcFmogAzYCACACIQUgAkEBdCIDIAAoAtAoIgRMDQALCyAAIAJBAnRqQdwWaiALNgIAIAhBAk4EQCAIQQFrIQggACgC0CghBAwBCwsgACgC0CghAwNAIA0hCCAAIANBAWsiBDYC0CggACgC4BYhCyAAIAAgA0ECdGpB3BZqKAIAIg02AuAWQQEhAgJAIANBA0gNACAAIA1qQdgoaiEPQQIhAyAJIA1BAnRqIQZBASEFA0ACQCADIAROBEAgAyECDAELIAkgAEHcFmoiAiADQQFyIgRBAnRqKAIAIg5BAnRqLwEAIgcgCSACIANBAnRqKAIAIgxBAnRqLwEAIgJPBEAgAiAHRwRAIAMhAgwCCyADIQIgAEHYKGoiAyAOai0AACADIAxqLQAASw0BCyAEIQILIAYvAQAiBCAJIAAgAkECdGpB3BZqKAIAIgNBAnRqLwEAIgdJBEAgBSECDAILAkAgBCAHRw0AIA8tAAAgACADakHYKGotAABLDQAgBSECDAILIAAgBUECdGpB3BZqIAM2AgAgAiEFIAJBAXQiAyAAKALQKCIETA0ACwtBAiEDIABB3BZqIgYgAkECdGogDTYCACAAIAAoAtQoQQFrIgQ2AtQoIAAoAuAWIQIgBiAEQQJ0aiALNgIAIAAgACgC1ChBAWsiBDYC1CggBiAEQQJ0aiACNgIAIAkgCEECdGoiDiAJIAJBAnRqIgQvAQAgCSALQQJ0aiIFLwEAajsBACAAQdgoaiIMIAhqIg8gAiAMai0AACICIAsgDGotAAAiByACIAdLG0EBajoAACAEIAg7AQIgBSAIOwECIAAgCDYC4BZBASEFQQEhAgJAIAAoAtAoIgRBAkgNAANAAn8gAyADIARODQAaIAkgBiADQQFyIgRBAnRqKAIAIgtBAnRqLwEAIgIgCSAGIANBAnRqKAIAIg1BAnRqLwEAIgdPBEAgAyACIAdHDQEaIAMgCyAMai0AACAMIA1qLQAASw0BGgsgBAshAiAOLwEAIgQgCSAAIAJBAnRqQdwWaigCACIDQQJ0ai8BACIHSQRAIAUhAgwCCwJAIAQgB0cNACAPLQAAIAAgA2pB2ChqLQAASw0AIAUhAgwCCyAAIAVBAnRqQdwWaiADNgIAIAIhBSACQQF0IgMgACgC0CgiBEwNAAsLIAhBAWohDSAAIAJBAnRqQdwWaiAINgIAIAAoAtAoIgNBAUoNAAsgACAAKALUKEEBayICNgLUKCAAQdwWaiIDIAJBAnRqIAAoAuAWNgIAIAEoAgQhByABKAIIIgIoAhAhBiACKAIIIREgAigCBCETIAIoAgAhEiABKAIAIQwgAEHUFmoiAUIANwEAIABBzBZqIhRCADcBACAAQcQWaiIVQgA3AQAgAEG8FmoiFkIANwEAQQAhCCAMIAMgACgC1ChBAnRqKAIAQQJ0akEAOwECAkAgACgC1CgiAkG7BEoNACACQQFqIQJBACEOA0AgDCAAIAJBAnRqQdwWaigCACIEQQJ0Ig1qIgUgDCAFLwECQQJ0ai8BAiIDQQFqIAYgAyAGSBsiDzsBAiADIAZOIQMCQCAEIAdKDQAgACAPQQF0akG8FmoiCyALLwEAQQFqOwEAQQAhCyAEIBFOBEAgEyAEIBFrQQJ0aigCACELCyAAIAAoAqgtIAUvAQAiBCALIA9qbGo2AqgtIBJFDQAgACAAKAKsLSALIA0gEmovAQJqIARsajYCrC0LIAMgDmohDiACQQFqIgJBvQRHDQALIA5FDQAgACAGQQF0akG8FmohDwNAIAYhAgNAIAAgAiIDQQFrIgJBAXRqQbwWaiIELwEAIgVFDQALIAQgBUEBazsBACAAIANBAXRqQbwWaiICIAIvAQBBAmo7AQAgDyAPLwEAQQFrIgI7AQAgDkECSiEDIA5BAmshDiADDQALIAZFDQBBvQQhBQNAIAJB//8DcSEDIAUhAgNAIAMEQCAAIAJBAWsiAkECdGpB3BZqKAIAIgQgB0oNASAMIARBAnRqIgQvAQIiBSAGRwRAIAAgACgCqC0gBC8BACAGIAVrbGo2AqgtIAQgBjsBAgsgA0EBayEDIAIhBQwBCwsgBkEBayIGRQ0BIAAgBkEBdGpBvBZqLwEAIQIMAAsACyAKIBYvAQBBAXQiAjsBAiAKIAIgAEG+FmovAQBqQQF0IgI7AQQgCiACIABBwBZqLwEAakEBdCICOwEGIAogAiAAQcIWai8BAGpBAXQiAjsBCCAKIAIgFS8BAGpBAXQiAjsBCiAKIAIgAEHGFmovAQBqQQF0IgI7AQwgCiACIABByBZqLwEAakEBdCICOwEOIAogAiAAQcoWai8BAGpBAXQiAjsBECAKIAIgFC8BAGpBAXQiAjsBEiAKIAIgAEHOFmovAQBqQQF0IgI7ARQgCiACIABB0BZqLwEAakEBdCICOwEWIAogAiAAQdIWai8BAGpBAXQiAjsBGCAKIAEvAQAgAmpBAXQiAjsBGiAKIABB1hZqLwEAIAJqQQF0IgI7ARwgCiACIABB2BZqLwEAakEBdDsBHiAQQQBOBEADQCAJIAhBAnRqIgcvAQIiBARAIAogBEEBdGoiACAALwEAIgBBAWo7AQAgBEEDcSEDQQAhAiAEQQFrQQNPBEAgBEH8/wNxIQUDQCAAQQN2QQFxIABBAnZBAXEgAEECcSACIABBAXFyQQJ0cnJBAXRyIgRBAXQhAiAAQQR2IQAgBUEEayIFDQALCyADBEADQCACIABBAXFyIgRBAXQhAiAAQQF2IQAgA0EBayIDDQALCyAHIAQ7AQALIAggEEchACAIQQFqIQggAA0ACwsL2QgBCn8CQCAAKAKgLUUEQCAAKAK8LSEDDAELIABBuS1qIQgDQCAEQQFqIQogACgCmC0gBGotAAAhBQJAIAACfyAAKAKkLSAEQQF0ai8BACIHRQRAIAEgBUECdGoiAy8BAiEEIAAgAC8BuC0gAy8BACIFIAAoArwtIgN0ciIHOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAgsgAyAEagwBCyAFQYDNAGotAAAiC0ECdCIJQYAIciABaiIDLwEGIQQgACAALwG4LSADLwEEIgwgACgCvC0iBnRyIgM7AbgtIAACf0EQIARrIAZIBEAgACAAKAIUIgZBAWo2AhQgBiAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIGa3YiAzsBuC0gBCAGakEQawwBCyAEIAZqCyIENgK8LSALQQhrQRNNBEAgACADIAUgCUGw3ABqKAIAa0H//wNxIgYgBHRyIgM7AbgtIAACf0EQIAlBwNkAaigCACIFayAESARAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAzoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBGt2IgM7AbgtIAQgBWpBEGsMAQsgBCAFagsiBDYCvC0LIAIgB0EBayIFIAVBB3ZBgAJqIAVBgAJJG0GAyQBqLQAAIgtBAnQiCWoiBi8BAiEHIAAgAyAGLwEAIgwgBHRyIgY7AbgtIAACf0EQIAdrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAGOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIEa3YiBjsBuC0gBCAHakEQawwBCyAEIAdqCyIDNgK8LSALQQRJDQEgACAGIAUgCUGw3QBqKAIAa0H//wNxIgUgA3RyIgc7AbgtQRAgCUHA2gBqKAIAIgRrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAoiBCAAKAKgLUkNAAsLIAFBgghqLwEAIQQgACAALwG4LSABLwGACCIKIAN0ciIFOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAFOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAEG5LWotAAA6AAAgACAKQRAgACgCvC0iA2t2OwG4LSAAIAMgBGpBEGs2ArwtDwsgACADIARqNgK8LQuXCwEMfyACQQBOBEBBBEEDIAEvAQIiChshBkEHQYoBIAobIQMgAEG5LWohCEF/IQcDQCAKIQkgASALIgxBAWoiC0ECdGovAQIhCgJAAkAgBUEBaiIEIANODQAgCSAKRw0AIAQhBQwBCwJAIAQgBkgEQCAAIAlBAnRqIgVB/BRqIQ0gBUH+FGohDiAAKAK8LSEFA0AgDi8BACEDIAAgAC8BuC0gDS8BACIGIAV0ciIHOwG4LSAAAn9BECADayAFSARAIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBzoAACAAIAAoAhQiBUEBajYCFCAFIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBWt2OwG4LSADIAVqQRBrDAELIAMgBWoLIgU2ArwtIARBAWsiBA0ACwwBCyAAAn8gCQRAAkAgByAJRgRAIAAoArwtIQMgBCEFDAELIAAgCUECdGoiBEH+FGovAQAhAyAAIAAvAbgtIARB/BRqLwEAIgYgACgCvC0iBHRyIgc7AbgtIAACf0EQIANrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAHOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAZBECAAKAK8LSIEa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAAvAbgtIAAvAbwVIgcgA3RyIQQCQEEQIAAvAb4VIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQf3/A2pB//8DcSIFIAN0ciIEOwG4LSADQQ9OBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBDmsMAgsgA0ECagwBCyAFQQlMBEAgAC8BuC0gAC8BwBUiByAAKAK8LSIDdHIhBAJAQRAgAC8BwhUiBmsgA0gEQCAAIAQ7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogBDoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAgtAAA6AAAgBiAAKAK8LSIEakEQayEDIAdBECAEa3YhBAwBCyADIAZqIQMLIAAgAzYCvC0gACAEIAVB/v8DakH//wNxIgUgA3RyIgQ7AbgtIANBDk4EQCAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAAgBUEQIAAoArwtIgNrdjsBuC0gA0ENawwCCyADQQNqDAELIAAvAbgtIAAvAcQVIgcgACgCvC0iA3RyIQQCQEEQIAAvAcYVIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQfb/A2pB//8DcSIFIAN0ciIEOwG4LSADQQpOBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBCWsMAQsgA0EHags2ArwtC0EAIQUCfyAKRQRAQYoBIQNBAwwBC0EGQQcgCSAKRiIEGyEDQQNBBCAEGwshBiAJIQcLIAIgDEcNAAsLCwkAIAEgAmwQHAsGACABEB0LXwEBfyMAQUBqIgMkACADQQA2AjAgA0IANwMoIAMgADYCCCADIAI2AhQgAyABNgIMIAMgAUEDbDYCGCADQQhqEAcgA0EIahALIANBCGoQCCADKAIcIQEgA0FAayQAIAELBgBB1N8AC6QuAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBB2N8AKAIAIgZBECAAQQtqQXhxIABBC0kbIgRBA3YiAXYiAEEDcQRAIABBf3NBAXEgAWoiAkEDdCIDQYjgAGooAgAiAUEIaiEAAkAgASgCCCIEIANBgOAAaiIDRgRAQdjfACAGQX4gAndxNgIADAELIAQgAzYCDCADIAQ2AggLIAEgAkEDdCICQQNyNgIEIAEgAmoiASABKAIEQQFyNgIEDA0LIARB4N8AKAIAIghNDQEgAARAAkAgACABdEECIAF0IgBBACAAa3JxIgBBACAAa3FBAWsiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2aiICQQN0IgNBiOAAaigCACIBKAIIIgAgA0GA4ABqIgNGBEBB2N8AIAZBfiACd3EiBjYCAAwBCyAAIAM2AgwgAyAANgIICyABQQhqIQAgASAEQQNyNgIEIAEgBGoiAyACQQN0IgUgBGsiAkEBcjYCBCABIAVqIAI2AgAgCARAIAhBA3YiBUEDdEGA4ABqIQRB7N8AKAIAIQECfyAGQQEgBXQiBXFFBEBB2N8AIAUgBnI2AgAgBAwBCyAEKAIICyEFIAQgATYCCCAFIAE2AgwgASAENgIMIAEgBTYCCAtB7N8AIAM2AgBB4N8AIAI2AgAMDQtB3N8AKAIAIglFDQEgCUEAIAlrcUEBayIAIABBDHZBEHEiAHYiAUEFdkEIcSICIAByIAEgAnYiAEECdkEEcSIBciAAIAF2IgBBAXZBAnEiAXIgACABdiIAQQF2QQFxIgFyIAAgAXZqQQJ0QYjiAGooAgAiAygCBEF4cSAEayEBIAMhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAEayICIAEgASACSyICGyEBIAAgAyACGyEDIAAhAgwBCwsgAyAEaiILIANNDQIgAygCGCEKIAMgAygCDCIFRwRAIAMoAggiAEHo3wAoAgBJGiAAIAU2AgwgBSAANgIIDAwLIANBFGoiAigCACIARQRAIAMoAhAiAEUNBCADQRBqIQILA0AgAiEHIAAiBUEUaiICKAIAIgANACAFQRBqIQIgBSgCECIADQALIAdBADYCAAwLC0F/IQQgAEG/f0sNACAAQQtqIgBBeHEhBEHc3wAoAgAiCEUNAEEfIQcgBEH///8HTQRAIABBCHYiACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAEIABBFWp2QQFxckEcaiEHC0EAIARrIQECQAJAAkAgB0ECdEGI4gBqKAIAIgJFBEBBACEADAELQQAhACAEQQBBGSAHQQF2ayAHQR9GG3QhAwNAAkAgAigCBEF4cSAEayIGIAFPDQAgAiEFIAYiAQ0AQQAhASACIQAMAwsgACACKAIUIgYgBiACIANBHXZBBHFqKAIQIgJGGyAAIAYbIQAgA0EBdCEDIAINAAsLIAAgBXJFBEBBAiAHdCIAQQAgAGtyIAhxIgBFDQMgAEEAIABrcUEBayIAIABBDHZBEHEiAHYiAkEFdkEIcSIDIAByIAIgA3YiAEECdkEEcSICciAAIAJ2IgBBAXZBAnEiAnIgACACdiIAQQF2QQFxIgJyIAAgAnZqQQJ0QYjiAGooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIARrIgYgAUkhAyAGIAEgAxshASAAIAUgAxshBSAAKAIQIgIEfyACBSAAKAIUCyIADQALCyAFRQ0AIAFB4N8AKAIAIARrTw0AIAQgBWoiByAFTQ0BIAUoAhghCSAFIAUoAgwiA0cEQCAFKAIIIgBB6N8AKAIASRogACADNgIMIAMgADYCCAwKCyAFQRRqIgIoAgAiAEUEQCAFKAIQIgBFDQQgBUEQaiECCwNAIAIhBiAAIgNBFGoiAigCACIADQAgA0EQaiECIAMoAhAiAA0ACyAGQQA2AgAMCQsgBEHg3wAoAgAiAE0EQEHs3wAoAgAhAQJAIAAgBGsiAkEQTwRAQeDfACACNgIAQezfACABIARqIgM2AgAgAyACQQFyNgIEIAAgAWogAjYCACABIARBA3I2AgQMAQtB7N8AQQA2AgBB4N8AQQA2AgAgASAAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIECyABQQhqIQAMCwsgBEHk3wAoAgAiA0kEQEHk3wAgAyAEayIBNgIAQfDfAEHw3wAoAgAiACAEaiICNgIAIAIgAUEBcjYCBCAAIARBA3I2AgQgAEEIaiEADAsLQQAhACAEQS9qIggCf0Gw4wAoAgAEQEG44wAoAgAMAQtBvOMAQn83AgBBtOMAQoCggICAgAQ3AgBBsOMAIAxBDGpBcHFB2KrVqgVzNgIAQcTjAEEANgIAQZTjAEEANgIAQYAgCyIBaiIGQQAgAWsiB3EiBSAETQ0KQZDjACgCACIBBEBBiOMAKAIAIgIgBWoiCSACTQ0LIAEgCUkNCwtBlOMALQAAQQRxDQUCQAJAQfDfACgCACIBBEBBmOMAIQADQCABIAAoAgAiAk8EQCACIAAoAgRqIAFLDQMLIAAoAggiAA0ACwtBABAeIgNBf0YNBiAFIQZBtOMAKAIAIgBBAWsiASADcQRAIAUgA2sgASADakEAIABrcWohBgsgBCAGTw0GIAZB/v///wdLDQZBkOMAKAIAIgAEQEGI4wAoAgAiASAGaiICIAFNDQcgACACSQ0HCyAGEB4iACADRw0BDAgLIAYgA2sgB3EiBkH+////B0sNBSAGEB4iAyAAKAIAIAAoAgRqRg0EIAMhAAsCQCAEQTBqIAZNDQAgAEF/Rg0AQbjjACgCACIBIAggBmtqQQAgAWtxIgFB/v///wdLBEAgACEDDAgLIAEQHkF/RwRAIAEgBmohBiAAIQMMCAtBACAGaxAeGgwFCyAAIQMgAEF/Rw0GDAQLAAtBACEFDAcLQQAhAwwFCyADQX9HDQILQZTjAEGU4wAoAgBBBHI2AgALIAVB/v///wdLDQEgBRAeIgNBABAeIgBPDQEgA0F/Rg0BIABBf0YNASAAIANrIgYgBEEoak0NAQtBiOMAQYjjACgCACAGaiIANgIAQYzjACgCACAASQRAQYzjACAANgIACwJAAkACQEHw3wAoAgAiAQRAQZjjACEAA0AgAyAAKAIAIgIgACgCBCIFakYNAiAAKAIIIgANAAsMAgtB6N8AKAIAIgBBACAAIANNG0UEQEHo3wAgAzYCAAtBACEAQZzjACAGNgIAQZjjACADNgIAQfjfAEF/NgIAQfzfAEGw4wAoAgA2AgBBpOMAQQA2AgADQCAAQQN0IgFBiOAAaiABQYDgAGoiAjYCACABQYzgAGogAjYCACAAQQFqIgBBIEcNAAtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiAWsiAjYCAEHw3wAgASADaiIBNgIAIAEgAkEBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCAAwCCyABIANPDQAgASACSQ0AIAAoAgxBCHENACAAIAUgBmo2AgRB8N8AIAFBeCABa0EHcUEAIAFBCGpBB3EbIgBqIgI2AgBB5N8AQeTfACgCACAGaiIDIABrIgA2AgAgAiAAQQFyNgIEIAEgA2pBKDYCBEH03wBBwOMAKAIANgIADAELQejfACgCACADSwRAQejfACADNgIACyADIAZqIQJBmOMAIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQZjjACEAA0AgASAAKAIAIgJPBEAgAiAAKAIEaiICIAFLDQMLIAAoAgghAAwACwALIAAgAzYCACAAIAAoAgQgBmo2AgQgA0F4IANrQQdxQQAgA0EIakEHcRtqIgcgBEEDcjYCBCACQXggAmtBB3FBACACQQhqQQdxG2oiBiAHayAEayECIAQgB2ohBCABIAZGBEBB8N8AIAQ2AgBB5N8AQeTfACgCACACaiIANgIAIAQgAEEBcjYCBAwDCyAGQezfACgCAEYEQEHs3wAgBDYCAEHg3wBB4N8AKAIAIAJqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwDCyAGKAIEIgBBA3FBAUYEQCAAQXhxIQgCQCAAQf8BTQRAIAYoAggiASAAQQN2IgVBA3RBgOAAakYaIAEgBigCDCIARgRAQdjfAEHY3wAoAgBBfiAFd3E2AgAMAgsgASAANgIMIAAgATYCCAwBCyAGKAIYIQkCQCAGIAYoAgwiA0cEQCAGKAIIIgAgAzYCDCADIAA2AggMAQsCQCAGQRRqIgAoAgAiAQ0AIAZBEGoiACgCACIBDQBBACEDDAELA0AgACEFIAEiA0EUaiIAKAIAIgENACADQRBqIQAgAygCECIBDQALIAVBADYCAAsgCUUNAAJAIAYgBigCHCIBQQJ0QYjiAGoiACgCAEYEQCAAIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAGRhtqIAM2AgAgA0UNAQsgAyAJNgIYIAYoAhAiAARAIAMgADYCECAAIAM2AhgLIAYoAhQiAEUNACADIAA2AhQgACADNgIYCyAGIAhqIQYgAiAIaiECCyAGIAYoAgRBfnE2AgQgBCACQQFyNgIEIAIgBGogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGA4ABqIQACf0HY3wAoAgAiAkEBIAF0IgFxRQRAQdjfACABIAJyNgIAIAAMAQsgACgCCAshASAAIAQ2AgggASAENgIMIAQgADYCDCAEIAE2AggMAwtBHyEAIAJB////B00EQCACQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgEgAUGA4B9qQRB2QQRxIgF0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAXIgA3JrIgBBAXQgAiAAQRVqdkEBcXJBHGohAAsgBCAANgIcIARCADcCECAAQQJ0QYjiAGohAQJAQdzfACgCACIDQQEgAHQiBXFFBEBB3N8AIAMgBXI2AgAgASAENgIAIAQgATYCGAwBCyACQQBBGSAAQQF2ayAAQR9GG3QhACABKAIAIQMDQCADIgEoAgRBeHEgAkYNAyAAQR12IQMgAEEBdCEAIAEgA0EEcWpBEGoiBSgCACIDDQALIAUgBDYCACAEIAE2AhgLIAQgBDYCDCAEIAQ2AggMAgtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiBWsiBzYCAEHw3wAgAyAFaiIFNgIAIAUgB0EBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCACABIAJBJyACa0EHcUEAIAJBJ2tBB3EbakEvayIAIAAgAUEQakkbIgVBGzYCBCAFQaDjACkCADcCECAFQZjjACkCADcCCEGg4wAgBUEIajYCAEGc4wAgBjYCAEGY4wAgAzYCAEGk4wBBADYCACAFQRhqIQADQCAAQQc2AgQgAEEIaiEDIABBBGohACACIANLDQALIAEgBUYNAyAFIAUoAgRBfnE2AgQgASAFIAFrIgZBAXI2AgQgBSAGNgIAIAZB/wFNBEAgBkEDdiICQQN0QYDgAGohAAJ/QdjfACgCACIDQQEgAnQiAnFFBEBB2N8AIAIgA3I2AgAgAAwBCyAAKAIICyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCAwEC0EfIQAgAUIANwIQIAZB////B00EQCAGQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgIgAkGA4B9qQRB2QQRxIgJ0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAnIgA3JrIgBBAXQgBiAAQRVqdkEBcXJBHGohAAsgASAANgIcIABBAnRBiOIAaiECAkBB3N8AKAIAIgNBASAAdCIFcUUEQEHc3wAgAyAFcjYCACACIAE2AgAgASACNgIYDAELIAZBAEEZIABBAXZrIABBH0YbdCEAIAIoAgAhAwNAIAMiAigCBEF4cSAGRg0EIABBHXYhAyAAQQF0IQAgAiADQQRxakEQaiIFKAIAIgMNAAsgBSABNgIAIAEgAjYCGAsgASABNgIMIAEgATYCCAwDCyABKAIIIgAgBDYCDCABIAQ2AgggBEEANgIYIAQgATYCDCAEIAA2AggLIAdBCGohAAwFCyACKAIIIgAgATYCDCACIAE2AgggAUEANgIYIAEgAjYCDCABIAA2AggLQeTfACgCACIAIARNDQBB5N8AIAAgBGsiATYCAEHw3wBB8N8AKAIAIgAgBGoiAjYCACACIAFBAXI2AgQgACAEQQNyNgIEIABBCGohAAwDC0HU3wBBMDYCAEEAIQAMAgsCQCAJRQ0AAkAgBSgCHCICQQJ0QYjiAGoiACgCACAFRgRAIAAgAzYCACADDQFB3N8AIAhBfiACd3EiCDYCAAwCCyAJQRBBFCAJKAIQIAVGG2ogAzYCACADRQ0BCyADIAk2AhggBSgCECIABEAgAyAANgIQIAAgAzYCGAsgBSgCFCIARQ0AIAMgADYCFCAAIAM2AhgLAkAgAUEPTQRAIAUgASAEaiIAQQNyNgIEIAAgBWoiACAAKAIEQQFyNgIEDAELIAUgBEEDcjYCBCAHIAFBAXI2AgQgASAHaiABNgIAIAFB/wFNBEAgAUEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACICQQEgAXQiAXFFBEBB2N8AIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBzYCCCABIAc2AgwgByAANgIMIAcgATYCCAwBC0EfIQAgAUH///8HTQRAIAFBCHYiACAAQYD+P2pBEHZBCHEiAHQiAiACQYDgH2pBEHZBBHEiAnQiBCAEQYCAD2pBEHZBAnEiBHRBD3YgACACciAEcmsiAEEBdCABIABBFWp2QQFxckEcaiEACyAHIAA2AhwgB0IANwIQIABBAnRBiOIAaiECAkACQCAIQQEgAHQiBHFFBEBB3N8AIAQgCHI2AgAgAiAHNgIAIAcgAjYCGAwBCyABQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQQDQCAEIgIoAgRBeHEgAUYNAiAAQR12IQQgAEEBdCEAIAIgBEEEcWpBEGoiAygCACIEDQALIAMgBzYCACAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIICyAFQQhqIQAMAQsCQCAKRQ0AAkAgAygCHCICQQJ0QYjiAGoiACgCACADRgRAIAAgBTYCACAFDQFB3N8AIAlBfiACd3E2AgAMAgsgCkEQQRQgCigCECADRhtqIAU2AgAgBUUNAQsgBSAKNgIYIAMoAhAiAARAIAUgADYCECAAIAU2AhgLIAMoAhQiAEUNACAFIAA2AhQgACAFNgIYCwJAIAFBD00EQCADIAEgBGoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARBA3I2AgQgCyABQQFyNgIEIAEgC2ogATYCACAIBEAgCEEDdiIEQQN0QYDgAGohAkHs3wAoAgAhAAJ/QQEgBHQiBCAGcUUEQEHY3wAgBCAGcjYCACACDAELIAIoAggLIQQgAiAANgIIIAQgADYCDCAAIAI2AgwgACAENgIIC0Hs3wAgCzYCAEHg3wAgATYCAAsgA0EIaiEACyAMQRBqJAAgAAvMDAEHfwJAIABFDQAgAEEIayICIABBBGsoAgAiAUF4cSIAaiEFAkAgAUEBcQ0AIAFBA3FFDQEgAiACKAIAIgFrIgJB6N8AKAIASQ0BIAAgAWohACACQezfACgCAEcEQCABQf8BTQRAIAIoAggiBCABQQN2IgdBA3RBgOAAakYaIAQgAigCDCIBRgRAQdjfAEHY3wAoAgBBfiAHd3E2AgAMAwsgBCABNgIMIAEgBDYCCAwCCyACKAIYIQYCQCACIAIoAgwiA0cEQCACKAIIIgEgAzYCDCADIAE2AggMAQsCQCACQRRqIgEoAgAiBA0AIAJBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAQJAIAIgAigCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAwsgBkEQQRQgBigCECACRhtqIAM2AgAgA0UNAgsgAyAGNgIYIAIoAhAiAQRAIAMgATYCECABIAM2AhgLIAIoAhQiAUUNASADIAE2AhQgASADNgIYDAELIAUoAgQiAUEDcUEDRw0AQeDfACAANgIAIAUgAUF+cTYCBCACIABBAXI2AgQgACACaiAANgIADwsgAiAFTw0AIAUoAgQiAUEBcUUNAAJAIAFBAnFFBEAgBUHw3wAoAgBGBEBB8N8AIAI2AgBB5N8AQeTfACgCACAAaiIANgIAIAIgAEEBcjYCBCACQezfACgCAEcNA0Hg3wBBADYCAEHs3wBBADYCAA8LIAVB7N8AKAIARgRAQezfACACNgIAQeDfAEHg3wAoAgAgAGoiADYCACACIABBAXI2AgQgACACaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIIIgQgAUEDdiIHQQN0QYDgAGpGGiAEIAUoAgwiAUYEQEHY3wBB2N8AKAIAQX4gB3dxNgIADAILIAQgATYCDCABIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgNHBEAgBSgCCCIBQejfACgCAEkaIAEgAzYCDCADIAE2AggMAQsCQCAFQRRqIgEoAgAiBA0AIAVBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAM2AgAgA0UNAQsgAyAGNgIYIAUoAhAiAQRAIAMgATYCECABIAM2AhgLIAUoAhQiAUUNACADIAE2AhQgASADNgIYCyACIABBAXI2AgQgACACaiAANgIAIAJB7N8AKAIARw0BQeDfACAANgIADwsgBSABQX5xNgIEIAIgAEEBcjYCBCAAIAJqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACIEQQEgAXQiAXFFBEBB2N8AIAEgBHI2AgAgAAwBCyAAKAIICyEBIAAgAjYCCCABIAI2AgwgAiAANgIMIAIgATYCCA8LQR8hASACQgA3AhAgAEH///8HTQRAIABBCHYiASABQYD+P2pBEHZBCHEiAXQiBCAEQYDgH2pBEHZBBHEiBHQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASAEciADcmsiAUEBdCAAIAFBFWp2QQFxckEcaiEBCyACIAE2AhwgAUECdEGI4gBqIQQCQAJAAkBB3N8AKAIAIgNBASABdCIFcUUEQEHc3wAgAyAFcjYCACAEIAI2AgAgAiAENgIYDAELIABBAEEZIAFBAXZrIAFBH0YbdCEBIAQoAgAhAwNAIAMiBCgCBEF4cSAARg0CIAFBHXYhAyABQQF0IQEgBCADQQRxakEQaiIFKAIAIgMNAAsgBSACNgIAIAIgBDYCGAsgAiACNgIMIAIgAjYCCAwBCyAEKAIIIgAgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAA2AggLQfjfAEH43wAoAgBBAWsiAkF/IAIbNgIACwtVAQJ/QdDfACgCACIBIABBA2pBfHEiAmohAAJAIAJBAU5BACAAIAFNGw0APwBBEHQgAEkEQCAAEABFDQELQdDfACAANgIAIAEPC0HU3wBBMDYCAEF/C4IEAQN/IAJBgARPBEAgACABIAIQARogAA8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCACQQFIBEAgACECDAELIABBA3FFBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANPDQEgAkEDcQ0ACwsCQCADQXxxIgRBwABJDQAgAiAEQUBqIgVLDQADQCACIAEoAgA2AgAgAiABKAIENgIEIAIgASgCCDYCCCACIAEoAgw2AgwgAiABKAIQNgIQIAIgASgCFDYCFCACIAEoAhg2AhggAiABKAIcNgIcIAIgASgCIDYCICACIAEoAiQ2AiQgAiABKAIoNgIoIAIgASgCLDYCLCACIAEoAjA2AjAgAiABKAI0NgI0IAIgASgCODYCOCACIAEoAjw2AjwgAUFAayEBIAJBQGsiAiAFTQ0ACwsgAiAETw0BA0AgAiABKAIANgIAIAFBBGohASACQQRqIgIgBEkNAAsMAQsgA0EESQRAIAAhAgwBCyAAIANBBGsiBEsEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAIgAS0AAToAASACIAEtAAI6AAIgAiABLQADOgADIAFBBGohASACQQRqIgIgBE0NAAsLIAIgA0kEQANAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANHDQALCyAAC9YCAQJ/AkAgAUUNACAAIAFqIgJBAWtBADoAACAAQQA6AAAgAUEDSQ0AIAJBAmtBADoAACAAQQA6AAEgAkEDa0EAOgAAIABBADoAAiABQQdJDQAgAkEEa0EAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgNqIgJBADYCACACIAEgA2tBfHEiA2oiAUEEa0EANgIAIANBCUkNACACQQA2AgggAkEANgIEIAFBCGtBADYCACABQQxrQQA2AgAgA0EZSQ0AIAJBADYCGCACQQA2AhQgAkEANgIQIAJBADYCDCABQRBrQQA2AgAgAUEUa0EANgIAIAFBGGtBADYCACABQRxrQQA2AgAgAyACQQRxQRhyIgNrIgFBIEkNACACIANqIQIDQCACQgA3AxggAkIANwMQIAJCADcDCCACQgA3AwAgAkEgaiECIAFBIGsiAUEfSw0ACwsLBAAjAAsGACAAJAALEAAjACAAa0FwcSIAJAAgAAsLvVYIAEGECAvxQJYwB3csYQ7uulEJmRnEbQeP9GpwNaVj6aOVZJ4yiNsOpLjceR7p1eCI2dKXK0y2Cb18sX4HLbjnkR2/kGQQtx3yILBqSHG5895BvoR91Noa6+TdbVG11PTHhdODVphsE8Coa2R6+WL97Mllik9cARTZbAZjYz0P+vUNCI3IIG47XhBpTORBYNVycWei0eQDPEfUBEv9hQ3Sa7UKpfqotTVsmLJC1sm720D5vKzjbNgydVzfRc8N1txZPdGrrDDZJjoA3lGAUdfIFmHQv7X0tCEjxLNWmZW6zw+lvbieuAIoCIgFX7LZDMYk6Quxh3xvLxFMaFirHWHBPS1mtpBB3HYGcdsBvCDSmCoQ1e+JhbFxH7W2BqXkv58z1LjooskHeDT5AA+OqAmWGJgO4bsNan8tPW0Il2xkkQFcY+b0UWtrYmFsHNgwZYVOAGLy7ZUGbHulARvB9AiCV8QP9cbZsGVQ6bcS6ri+i3yIufzfHd1iSS3aFfN804xlTNT7WGGyTc5RtTp0ALyj4jC71EGl30rXldg9bcTRpPv01tNq6WlD/NluNEaIZ63QuGDacy0EROUdAzNfTAqqyXwN3TxxBVCqQQInEBALvoYgDMkltWhXs4VvIAnUZrmf5GHODvneXpjJ2SkimNCwtKjXxxc9s1mBDbQuO1y9t61susAgg7jttrO/mgzitgOa0rF0OUfV6q930p0VJtsEgxbccxILY+OEO2SUPmptDahaanoLzw7knf8JkyeuAAqxngd9RJMP8NKjCIdo8gEe/sIGaV1XYvfLZ2WAcTZsGecGa252G9T+4CvTiVp62hDMSt1nb9+5+fnvvo5DvrcX1Y6wYOij1tZ+k9GhxMLYOFLy30/xZ7vRZ1e8pt0GtT9LNrJI2isN2EwbCq/2SgM2YHoEQcPvYN9V32eo745uMXm+aUaMs2HLGoNmvKDSbyU24mhSlXcMzANHC7u5FgIiLyYFVb47usUoC72yklq0KwRqs1yn/9fCMc/QtYue2Swdrt5bsMJkmybyY+yco2p1CpNtAqkGCZw/Ng7rhWcHchNXAAWCSr+VFHq44q4rsXs4G7YMm47Skg2+1eW379x8Id/bC9TS04ZC4tTx+LPdaG6D2h/NFr6BWya59uF3sG93R7cY5loIiHBqD//KOwZmXAsBEf+eZY9prmL40/9rYUXPbBZ44gqg7tIN11SDBE7CswM5YSZnp/cWYNBNR2lJ23duPkpq0a7cWtbZZgvfQPA72DdTrrypxZ673n/Pskfp/7UwHPK9vYrCusowk7NTpqO0JAU20LqTBtfNKVfeVL9n2SMuemazuEphxAIbaF2UK28qN74LtKGODMMb3wVaje8CLQAAAABBMRsZgmI2MsNTLSsExWxkRfR3fYanWlbHlkFPCIrZyEm7wtGK6O/6y9n04wxPtaxNfq61ji2Dns8cmIdREsJKECPZU9Nw9HiSQe9hVdeuLhTmtTfXtZgcloSDBVmYG4IYqQCb2/otsJrLNqldXXfmHGxs/98/QdSeDlrNoiSEleMVn4wgRrKnYXepvqbh6PHn0PPoJIPew2Wyxdqqrl1d659GRCjMa29p/XB2rmsxOe9aKiAsCQcLbTgcEvM2Rt+yB13GcVRw7TBla/T38yq7tsIxonWRHIk0oAeQ+7yfF7qNhA553qklOO+yPP9583O+SOhqfRvFQTwq3lgFT3nwRH5i6YctT8LGHFTbAYoVlEC7Do2D6COmwtk4vw3FoDhM9Lshj6eWCs6WjRMJAMxcSDHXRYti+m7KU+F3VF27uhVsoKPWP42Ilw6WkVCY194RqczH0vrh7JPL+vVc12JyHeZ5a961VECfhE9ZWBIOFhkjFQ/acDgkm0EjPadr/WXmWuZ8JQnLV2Q40E6jrpEB4p+KGCHMpzNg/bwqr+Ekre7QP7QtgxKfbLIJhqskSMnqFVPQKUZ++2h3ZeL2eT8vt0gkNnQbCR01KhIE8rxTS7ONSFJw3mV5Me9+YP7z5ue/wv3+fJHQ1T2gy8z6NoqDuweRmnhUvLE5ZaeoS5iDOwqpmCLJ+rUJiMuuEE9d718ObPRGzT/ZbYwOwnRDElrzAiNB6sFwbMGAQXfYR9c2lwbmLY7FtQClhIQbvBqKQXFbu1pomOh3Q9nZbFoeTy0VX342DJwtGyfdHAA+EgCYuVMxg6CQYq6L0VO1khbF9N1X9O/ElKfC79WW2fbpvAeuqI0ct2veMZwq7yqF7XlryqxIcNNvG134LipG4eE23magB8V/Y1ToVCJl803l87ICpMKpG2eRhDAmoJ8puK7F5Pmf3v06zPPWe/3oz7xrqYD9WrKZPgmfsn84hKuwJBws8RUHNTJGKh5zdzEHtOFwSPXQa1E2g0Z6d7JdY07X+ssP5uHSzLXM+Y2E1+BKEpavCyONtshwoJ2JQbuERl0jAwdsOBrEPxUxhQ4OKEKYT2cDqVR+wPp5VYHLYkwfxTiBXvQjmJ2nDrPclhWqGwBU5VoxT/yZYmLX2FN5zhdP4UlWfvpQlS3Xe9QczGITio0tUruWNJHoux/Q2aAG7PN+Xq3CZUdukUhsL6BTdeg2EjqpBwkjalQkCCtlPxHkeaeWpUi8j2YbkaQnKoq94LzL8qGN0Oti3v3AI+/m2b3hvBT80KcNP4OKJn6ykT+5JNBw+BXLaTtG5kJ6d/1btWtl3PRafsU3CVPudjhI97GuCbjwnxKhM8w/inL9JJMAAAAAN2rCAW7UhANZvkYC3KgJB+vCywayfI0EhRZPBbhREw6PO9EP1oWXDeHvVQxk+RoJU5PYCAotngo9R1wLcKMmHEfJ5B0ed6IfKR1gHqwLLxubYe0awt+rGPW1aRnI8jUS/5j3E6YmsRGRTHMQFFo8FSMw/hR6jrgWTeR6F+BGTTjXLI85jpLJO7n4Czo87kQ/C4SGPlI6wDxlUAI9WBdeNm99nDc2w9o1AakYNIS/VzGz1ZUw6mvTMt0BETOQ5Wskp4+pJf4x7yfJWy0mTE1iI3snoCIimeYgFfMkISi0eCof3rorRmD8KXEKPij0HHEtw3azLJrI9S6tojcvwI2acPfnWHGuWR5zmTPcchwlk3crT1F2cvEXdEWb1XV43Il+T7ZLfxYIDX0hYs98pHSAeZMeQnjKoAR6/crGe7AuvGyHRH5t3vo4b+mQ+m5shrVrW+x3agJSMWg1OPNpCH+vYj8VbWNmqythUcHpYNTXpmXjvWRkugMiZo1p4Gcgy9dIF6EVSU4fU0t5dZFK/GPeT8sJHE6St1pMpd2YTZiaxEav8AZH9k5ARcEkgkREMs1Bc1gPQCrmSUIdjItDUGjxVGcCM1U+vHVXCda3VozA+FO7qjpS4hR8UNV+vlHoOeJa31MgW4btZlmxh6RYNJHrXQP7KVxaRW9ebS+tX4AbNeG3cffg7s+x4tmlc+Ncszzma9n+5zJnuOUFDXrkOEom7w8g5O5WnqLsYfRg7eTiL+jTiO3pijar671caerwuBP9x9LR/J5sl/6pBlX/LBAa+ht62PtCxJ75da5c+EjpAPN/g8LyJj2E8BFXRvGUQQn0oyvL9fqVjffN/0/2YF142Vc3utgOifzaOeM+27z1cd6Ln7Pf0iH13eVLN9zYDGvX72ap1rbY79SBsi3VBKRi0DPOoNFqcObTXRok0hD+XsUnlJzEfiraxklAGMfMVlfC+zyVw6KC08GV6BHAqK9Ny5/Fj8rGe8nI8RELyXQHRMxDbYbNGtPAzy25As5Alq+Rd/xtkC5CK5IZKOmTnD6mlqtUZJfy6iKVxYDglPjHvJ/PrX6elhM4nKF5+p0kb7WYEwV3mUq7MZt90fOaMDWJjQdfS4xe4Q2OaYvPj+ydgIrb90KLgkkEibUjxoiIZJqDvw5YguawHoDR2tyBVMyThGOmUYU6GBeHDXLVhqDQ4qmXuiCozgRmqvlupKt8eOuuSxIprxKsb60lxq2sGIHxpy/rM6Z2VXWkQT+3pcQp+KDzQzqhqv18o52XvqLQc8S15xkGtL6nQLaJzYK3DNvNsjuxD7NiD0mxVWWLsGgi17tfSBW6BvZTuDGckbm0it68g+AcvdpeWr/tNJi+AAAAAGVnvLiLyAmq7q+1EleXYo8y8N433F9rJbk4153vKLTFik8IfWTgvW8BhwHXuL/WSt3YavIzd9/gVhBjWJ9XGVD6MKXoFJ8Q+nH4rELIwHvfrafHZ0MIcnUmb87NcH+tlRUYES37t6Q/ntAYhyfozxpCj3OirCDGsMlHegg+rzKgW8iOGLVnOwrQAIeyaThQLwxf7Jfi8FmFh5flPdGHhmW04DrdWk+Pzz8oM3eGEOTq43dYUg3Y7UBov1H4ofgr8MSfl0gqMCJaT1ee4vZvSX+TCPXHfadA1RjA/G1O0J81K7cjjcUYlp+gfyonGUf9unwgQQKSj/QQ9+hIqD1YFJtYP6gjtpAdMdP3oYlqz3YUD6jKrOEHf76EYMMG0nCgXrcXHOZZuKn0PN8VTIXnwtHggH5pDi/Le2tId8OiDw3Lx2ixcynHBGFMoLjZ9ZhvRJD/0/x+UGbuGzfaVk0nuQ4oQAW2xu+wpKOIDBwasNuBf9dnOZF40iv0H26TA/cmO2aQmoOIPy+R7ViTKVRgRLQxB/gM36hNHrrP8abs35L+ibguRmcXm1QCcCfsu0jwcd4vTMkwgPnbVedFY5ygP2v5x4PTF2g2wXIPinnLN13krlDhXED/VE4lmOj2c4iLrhbvNxb4QIIEnSc+vCQf6SFBeFWZr9fgi8qwXDM7tlntXtHlVbB+UEfVGez/bCE7YglGh9rn6TLIgo6OcNSe7Six+VGQX1bkgjoxWDqDCY+n5m4zHwjBhg1tpjq1pOFAvcGG/AUvKUkXSk71r/N2IjKWEZ6KeL4rmB3ZlyBLyfR4Lq5IwMAB/dKlZkFqHF6W93k5Kk+Xlp9d8vEj5QUZa01gftf1jtFi5+u23l9SjgnCN+m1etlGAGi8IbzQ6jHfiI9WYzBh+dYiBJ5qmr2mvQfYwQG/Nm60rVMJCBWaTnId/ynOpRGGe7d04ccPzdkQkqi+rCpGERk4I3algHVmxtgQAXpg/q7PcpvJc8oi8aRXR5YY76k5rf3MXhFFBu5NdmOJ8c6NJkTc6EH4ZFF5L/k0HpNB2rEmU7/WmuvpxvmzjKFFC2IO8BkHaUyhvlGbPNs2J4Q1mZKWUP4uLpm5VCb83uieEnFdjHcW4TTOLjapq0mKEUXmPwMggYO7dpHg4xP2XFv9WelJmD5V8SEGgmxEYT7Uqs6Lxs+pN344QX/WXSbDbrOJdnzW7srEb9YdWQqxoeHkHhTzgXmoS9dpyxOyDnerXKHCuTnGfgGA/qmc5ZkVJAs2oDZuURyOpxZmhsJx2j4s3m8sSbnTlPCBBAmV5rixe0kNox4usRtIPtJDLVlu+8P22+mmkWdRH6mwzHrODHSUYblm8QYF3gAAAAB3BzCW7g5hLJkJUboHbcQZcGr0j+ljpTWeZJWjDtuIMnncuKTg1ekel9LZiAm2TCt+sXy957gtB5C/HZEdtxBkarAg8vO5cUiEvkHeGtrUfW3d5Ov01LVRg9OFxxNsmFZka6jA/WL5eoplyewUAVxPYwZs2foPPWONCA31O24gyExpEF7VYEHkomdxcjwD5NFLBNRH0g2F/aUKtWs1taj6QrKYbNu7ydasvPlAMths40XfXHXc1g3Pq9E9WSbZMKxR3gA6yNdRgL/QYRYhtPS1VrPEI8+6lZm4vaUPKAK4nl8FiAjGDNmysQvpJC9vfIdYaEwRwWEdq7ZmLT123EGQAdtxBpjSILzv1RAqcbGFiQa2tR+fv+Sl6LjUM3gHyaIPAPk0lgmojuEOmBh/ag27CG09LZFkbJfmY1wBa2tR9BxsYWKFZTDY8mIATmwGle0bAaV7ggj0wfUPxFdlsNnGErfpUIu+uOr8uYh8Yt0d3xXaLUmM03zz+9RMZU2yYVg6tVHOo7wAdNS7MOJK36VBPdiV16TRxG3T1vT7Q2npajRu2fytZ4hG2mC40EQELXMzAx3lqgpMX90NfMlQBXE8JwJBqr4LEBDJDCCGV2i1JSBvhbO5ZtQJzmHkn17e+Q4p2cmYsNCYIsfXqLRZsz0XLrQNgbe9XDvAumyt7biDIJq/s7YDtuIMdLHSmurVRzmd0nevBNsmFXPcFoPjYwsSlGQ7hA1taj56alqo5A7PC5MJ/50KAK4nfQeesfAPk0SHCKPSHgHyaGkGwv73YlddgGVnyxlsNnFuawbn/tQbdonTK+AQ2npaZ91KzPm532+Ovu/5F7e+Q2CwjtXW1qPoodGTfjjYwsRP3/JS0btn8aa8V2c/tQbdSLI2S9gNK9qvChtMNgNK9kEEemDfYO/DqGffVTFuju9Gab55y2GzjLxmgxolb9KgUmjiNswMd5W7C0cDIgIWuVUFJi/Fuju+sr0LKCu0WpJcs2oEwtf/p7XQzzEs2Z6LW96uHZtkwrDsY/ImdWqjnAJtkwqcCQap6w42P3IHZ4UFAFcTlb9KguK4ehR7sSuuDLYbOJLSjpvl1b4NfNzvtwvb3yGG09LU8dTiQmjds/gf2oNugb4Wzfa5JltvsHfhGLdHd4gIWub/D2pwZgY7yhEBC1yPZZ7/+GKuaWFr/9MWbM9FoArieNcN0u5OBINUOQOzwqdnJmHQYBb3SWlHTT5ud9uu0WpK2dZa3EDfC2Y32DvwqbyuU967nsVHss9/MLX/6b298hzKusKKU7OTMCS0o6a60DYFzdcGk1TeVykj2We/s2Z6LsRhSrhdaBsCKm8rlLQLvjfDDI6hWgXfGy0C740AAAAAGRsxQTI2YoIrLVPDZGzFBH139EVWWqeGT0GWx8jZigjRwrtJ+u/oiuP02custU8Mta5+TZ6DLY6HmBzPSsISUVPZIxB49HDTYe9Bki6u11U3teYUHJi11wWDhJaCG5hZmwCpGLAt+tupNsua5nddXf9sbBzUQT/fzVoOnpWEJKKMnxXjp7JGIL6pd2Hx6OGm6PPQ58PegyTaxbJlXV2uqkRGn+tva8wodnD9aTkxa64gKlrvCwcJLBIcOG3fRjbzxl0Hsu1wVHH0a2Uwuyrz96IxwraJHJF1kAegNBefvPsOhI26JaneeTyy7zhz83n/auhIvkHFG31Y3io88HlPBelifkTCTy2H21QcxpQVigGNDrtApiPog7842cI4oMUNIbv0TAqWp48TjZbOXMwACUXXMUhu+mKLd+FTyrq7XVSjoGwViI0/1pGWDpfe15hQx8ypEezh+tL1+suTcmLXXGt55h1AVLXeWU+EnxYOElgPFSMZJDhw2j0jQZtl/WunfOZa5lfLCSVO0DhkAZGuoxiKn+Izp8whKrz9YK0k4a+0P9DunxKDLYYJsmzJSCSr0FMV6vt+RiniZXdoLz959jYkSLcdCRt0BBIqNUtTvPJSSI2zeWXecGB+7zHn5vP+/v3Cv9XQkXzMy6A9g4o2+pqRB7uxvFR4qKdlOTuDmEsimKkKCbX6yRCuy4hf711PRvRsDm3ZP810wg6M81oSQ+pBIwLBbHDB2HdBgJc210eOLeYGpQC1xbwbhIRxQYoaaFq7W0N36JhabNnZFS1PHgw2fl8nGy2cPgAc3bmYABKggzFTi65ikJK1U9Hd9MUWxO/0V+/Cp5T22ZbVrge86bccjaicMd5rhSrvKspree3TcEis+F0bb+FGKi5m3jbhf8UHoFToVGNN82UiArLz5RupwqQwhJFnKZ+gJuTFrrj93p/51vPMOs/o/XuAqWu8mbJa/bKfCT6rhDh/LBwksDUHFfEeKkYyBzF3c0hw4bRRa9D1ekaDNmNdsnfL+tdO0uHmD/nMtczg14SNr5YSSraNIwudoHDIhLtBiQMjXUYaOGwHMRU/xCgODoVnT5hCflSpA1V5+sBMYsuBgTjFH5gj9F6zDqedqhWW3OVUABv8TzFa12Jimc55U9hJ4U8XUPp+VnvXLZVizBzULY2KEzSWu1Ifu+iRBqDZ0F5+8+xHZcKtbEiRbnVToC86EjboIwkHqQgkVGoRP2Urlqd55I+8SKWkkRtmvYoqJ/LLvODr0I2hwP3eYtnm7yMUvOG9DafQ/CaKgz8/kbJ+cNAkuWnLFfhC5kY7W/13etxla7XFflr07lMJN/dIOHa4Ca6xoRKf8Io/zDOTJP1yAAAAAAHCajcDhNRuAka+WQcJqNwGy8LrBI18sgVPFoUOE1G4D9E7jw2XhdYMVe/hCRr5ZAjYk1MKni0KC1xHPRwmo3Ad5MlHH6J3Hh5gHSkbLwusGu1hmxir38IZabX1EjXyyBP3mP8RsSamEHNMkRU8WhQU/jAjFriOehd65E04TUbgOY8s1zvJko46C/i5P0TuPD6GhAs8wDpSPQJQZTZeF1g3nH1vNdrDNjQYqQExV7+EMJXVszLTa+ozEQHdJGvlkCWpj6cn7zH+Ji1bySNiTUwioCd7IOaZIiEk8xUqeLQoK7reHyn8YEYoPgpxLXEc9CyzdsMu9ciaLzeirXCajcBxWOf3cx5ZrnLcM5l3kyUcdlFPK3QX8XJ11ZtFfonceH9Ltk99DQgWfM9iIXmAdKR4Qh6TegSgynvGyv1svC6wbX5Eh284+t5u+pDpa7WGbGp37FtoMVICafM4NWKvfwhjbRU/YSurZmDpwVFlptfUZGS942YiA7pn4GmNSNfLIEkVoRdLUx9OSpF1eU/eY/xOHAnLTFq3kk2Y3aVGxJqYRwbwr0VATvZEgiTBQc0yREAPWHNCSeYqQ4uMHVTxaFBVMwJnV3W8Pla31glT+MCMUjqqu1B8FOJRvn7VWuI56FsgU99ZZu2GWKSHsV3rkTRcKfsDXm9FWl+tL23hNRuA4Pdxt+Kxz+7jc6XZ5jyzXOf+2WvluGcy5HoNBe8mSjju5CAP7KKeVu1g9GHoL+Lk6e2I0+urNorqaVy9/RO48PzR0sf+l2ye/1UGqfoaECz72Hob+Z7EQvhcrnXzAOlI8sKDf/CEPSbxRlcR9AlBlPXLK6P3jZX69k//zdl4XWDYujdX2vyJDts+4znecfW837Ofi931IdLcN0vl12sM2NapZu/U79i21S2ygdBipATRoM4z0+ZwatIkGl3FXv4QxJyUJ8baKn7HGEBJwldWzMOVPPvB04KiwBHolctNr6jKj8WfyMl7xskLEfHMRAd0zYZtQ8/A0xrOArktka+WQJBt/HeSK0Iuk+koGZamPpyXZFSrlSLq8pTggMWfvMf4nn6tz5w4E5ad+nmhmLVvJJl3BRObMbtKmvPRfY2JNTCMS18Hjg3hXo/Pi2mKgJ3si0L324kESYKIxiO1g5pkiIJYDr+AHrDmgdza0YSTzFSFUaZjhxcYOobVcg2p4tCgqCC6l6pmBM6rpG75rut4fK8pEkutb6wSrK3GJafxgRimM+svpHVVdqW3P0Gg+CnEoTpD86N8/aqivpedtcRz0LQGGee2QKe+t4LNibLN2wyzD7E7sUkPYrCLZVW71yJouhVIX7hT9ga5kZwxvN6KtL0c4IO/Wl7avpg07QAAAAC4vGdlqgnIixK1r+6PYpdXN97wMiVrX9yd1zi5xbQo730IT4pvveBk1wGHAUrWv7jyatjd4N93M1hjEFZQGVef6KUw+voQnxRCrPhx33vAyGfHp611cghDzc5vJpWtf3AtERgVP6S3+4cY0J4az+gnonOPQrDGIKwIekfJoDKvPhiOyFsKO2e1socA0C9QOGmX7F8MhVnw4j3ll4dlhofR3TrgtM+PT1p3Myg/6uQQhlJYd+NA7dgN+FG/aPAr+KFIl5/EWiIwKuKeV09/SW/2x/UIk9VAp31t/MAYNZ/QTo0jtyuflhjFJyp/oLr9RxkCQSB8EPSPkqhI6PebFFg9I6g/WDEdkLaJoffTFHbPaqzKqA++fwfhBsNghF6gcNLmHBe39Km4WUwV3zzRwueFaX6A4HvLLw7Dd0hryw0PonOxaMdhBMcp2bigTERvmPX80/+Q7mZQflbaNxsOuSdNtgVAKKSw78YcDIijgduwGjln138r0niRk24f9Dsm9wODmpBmkS8/iCmTWO20RGBUDPgHMR5NqN+m8c+6/pLf7EYuuIlUmxdn7CdwAnHwSLvJTC/e2/mAMGNF51VrP6Cc04PH+cE2aBd5ig9y5F03y1zhUK5OVP9A9uiYJa6LiHMWN+8WBIJA+Lw+J50h6R8kmVV4QYvg168zXLDK7Vm2O1Xl0V5HUH6w/+wZ1WI7IWzah0YJyDLp53COjoIo7Z7UkFH5sYLkVl86WDE6p48Jgx8zbuYNhsEItTqmbb1A4aQF/IbBF0kpL6/1TkoyInbzip4Rlpgrvnggl9kdePTJS8BIri7S/QHAakFmpfeWXhxPKjl5XZ+Wl+Uj8fJNaxkF9dd+YOdi0Y5f3rbrwgmOUnq16TdoAEbZ0LwhvIjfMeowY1aPItb5YZpqngQHvaa9vwHB2K20bjYVCAlTHXJOmqXOKf+3e4YRD8fhdJIQ2c0qrL6oOBkRRoCldiPYxmZ1YHoBEHLPrv7Kc8mbV6TxIu8Ylkf9rTmpRRFezHZN7gbO8Ylj3EQmjWT4Qej5L3lRQZMeNFMmsdrrmta/s/nG6QtFoYwZ8A5ioUxpBzybUb6EJzbblpKZNS4u/lAmVLmZnuje/IxdcRI04RZ3qTYuzhGKSasDP+ZFu4OBIOPgkXZbXPYTSelZ/fFVPphsggYh1D5hRMaLzqp+N6nP1n9BOG7DJl18domzxMru1lkd1m/hobEK8xQe5EuoeYETy2nXq3cOsrnCoVwBfsY5nKn+gCQVmeU2oDYLjhxRboZmFqc+2nHCLG/eLJTTuUkJBIHwsbjmlaMNSXsbsS4eQ9I+SPtuWS3p2/bDUWeRpsywqR90DM56ZrlhlN4FBvEAAAAAAAAAAAMAAAAEAAQACAAEAAQAAAAEAAUAEAAIAAQAAAAEAAYAIAAgAAQAAAAEAAQAEAAQAAUAAAAIABAAIAAgAAUAAAAIABAAgACAAAUAAAAIACAAgAAAAQUAAAAgAIAAAgEABAUAAAAgAAIBAgEAEAUAQYHJAAu2EAECAwQEBQUGBgYGBwcHBwgICAgICAgICQkJCQkJCQkKCgoKCgoKCgoKCgoKCgoKCwsLCwsLCwsLCwsLCwsLCwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwAAEBESEhMTFBQUFBUVFRUWFhYWFhYWFhcXFxcXFxcXGBgYGBgYGBgYGBgYGBgYGBkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0AAQIDBAUGBwgICQkKCgsLDAwMDA0NDQ0ODg4ODw8PDxAQEBAQEBAQERERERERERESEhISEhISEhMTExMTExMTFBQUFBQUFBQUFBQUFBQUFBUVFRUVFRUVFRUVFRUVFRUWFhYWFhYWFhYWFhYWFhYWFxcXFxcXFxcXFxcXFxcXFxgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxscwCcAAMAsAAABAQAAHgEAAA8AAABALAAAQC0AAAAAAAAeAAAADwAAAAAAAADALQAAAAAAABMAAAAHAAAAAAAAAAwACACMAAgATAAIAMwACAAsAAgArAAIAGwACADsAAgAHAAIAJwACABcAAgA3AAIADwACAC8AAgAfAAIAPwACAACAAgAggAIAEIACADCAAgAIgAIAKIACABiAAgA4gAIABIACACSAAgAUgAIANIACAAyAAgAsgAIAHIACADyAAgACgAIAIoACABKAAgAygAIACoACACqAAgAagAIAOoACAAaAAgAmgAIAFoACADaAAgAOgAIALoACAB6AAgA+gAIAAYACACGAAgARgAIAMYACAAmAAgApgAIAGYACADmAAgAFgAIAJYACABWAAgA1gAIADYACAC2AAgAdgAIAPYACAAOAAgAjgAIAE4ACADOAAgALgAIAK4ACABuAAgA7gAIAB4ACACeAAgAXgAIAN4ACAA+AAgAvgAIAH4ACAD+AAgAAQAIAIEACABBAAgAwQAIACEACAChAAgAYQAIAOEACAARAAgAkQAIAFEACADRAAgAMQAIALEACABxAAgA8QAIAAkACACJAAgASQAIAMkACAApAAgAqQAIAGkACADpAAgAGQAIAJkACABZAAgA2QAIADkACAC5AAgAeQAIAPkACAAFAAgAhQAIAEUACADFAAgAJQAIAKUACABlAAgA5QAIABUACACVAAgAVQAIANUACAA1AAgAtQAIAHUACAD1AAgADQAIAI0ACABNAAgAzQAIAC0ACACtAAgAbQAIAO0ACAAdAAgAnQAIAF0ACADdAAgAPQAIAL0ACAB9AAgA/QAIABMACQATAQkAkwAJAJMBCQBTAAkAUwEJANMACQDTAQkAMwAJADMBCQCzAAkAswEJAHMACQBzAQkA8wAJAPMBCQALAAkACwEJAIsACQCLAQkASwAJAEsBCQDLAAkAywEJACsACQArAQkAqwAJAKsBCQBrAAkAawEJAOsACQDrAQkAGwAJABsBCQCbAAkAmwEJAFsACQBbAQkA2wAJANsBCQA7AAkAOwEJALsACQC7AQkAewAJAHsBCQD7AAkA+wEJAAcACQAHAQkAhwAJAIcBCQBHAAkARwEJAMcACQDHAQkAJwAJACcBCQCnAAkApwEJAGcACQBnAQkA5wAJAOcBCQAXAAkAFwEJAJcACQCXAQkAVwAJAFcBCQDXAAkA1wEJADcACQA3AQkAtwAJALcBCQB3AAkAdwEJAPcACQD3AQkADwAJAA8BCQCPAAkAjwEJAE8ACQBPAQkAzwAJAM8BCQAvAAkALwEJAK8ACQCvAQkAbwAJAG8BCQDvAAkA7wEJAB8ACQAfAQkAnwAJAJ8BCQBfAAkAXwEJAN8ACQDfAQkAPwAJAD8BCQC/AAkAvwEJAH8ACQB/AQkA/wAJAP8BCQAAAAcAQAAHACAABwBgAAcAEAAHAFAABwAwAAcAcAAHAAgABwBIAAcAKAAHAGgABwAYAAcAWAAHADgABwB4AAcABAAHAEQABwAkAAcAZAAHABQABwBUAAcANAAHAHQABwADAAgAgwAIAEMACADDAAgAIwAIAKMACABjAAgA4wAIAAAABQAQAAUACAAFABgABQAEAAUAFAAFAAwABQAcAAUAAgAFABIABQAKAAUAGgAFAAYABQAWAAUADgAFAB4ABQABAAUAEQAFAAkABQAZAAUABQAFABUABQANAAUAHQAFAAMABQATAAUACwAFABsABQAHAAUAFwAFAEHg2QALTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAEHQ2gALZQEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAEGA3AALIwIAAAADAAAABwAAAAAAAAAQERIACAcJBgoFCwQMAw0CDgEPAEG03AALaQEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACgAAAAwAAAAOAAAAEAAAABQAAAAYAAAAHAAAACAAAAAoAAAAMAAAADgAAABAAAAAUAAAAGAAAABwAAAAgAAAAKAAAADAAAAA4ABBtN0AC5oCAQAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAAAAAEAAIABAAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAABuZWVkIGRpY3Rpb25hcnkAc3RyZWFtIGVuZAAAZmlsZSBlcnJvcgBzdHJlYW0gZXJyb3IAZGF0YSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBpbmNvbXBhdGlibGUgdmVyc2lvbgAAAAAoLwAAOC8AAEMvAABELwAATy8AAFwvAABnLwAAey8AAIgvAABDLwAAMS4yLjExAEHQ3wALA9AxUA==");let Lf,Pf;async function Df(){var e,t;if(Lf)return Lf;const n={};let r,o={};for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r]);let s=!1,a=!1,c=!1;s="object"==typeof window,a="function"==typeof importScripts,c="object"==typeof i&&"object"==typeof i.versions&&"string"==typeof i.versions.node;let l="";(s||a)&&(a?l=self.location.href:"undefined"!=typeof document&&document.currentScript&&(l=document.currentScript.src),l=0!==Lo(l).call(l,"blob:")?l.substr(0,kf(l).call(l,"/")+1):""),n.print||Ko(e=console.log).call(e,console);const u=n.printErr||Ko(t=console.warn).call(t,console);for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r]);let d;o=null,"object"!=typeof WebAssembly&&N("no native wasm support detected");let h=!1;function p(e){const t=n["_"+e];var i;return i="Cannot call unknown function "+e+", make sure it is exported",t||N("Assertion failed: "+i),t}function f(e,t,i,n,r){const o={string:function(e){let t=0;if(null!=e&&0!==e){const i=1+(e.length<<2);t=W(i),function(e,t,i){(function(e,t,i,n){if(!(n>0))return 0;const r=i+n-1;for(let o=0;o<e.length;++o){let n=e.charCodeAt(o);if(n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++o)),n<=127){if(i>=r)break;t[i++]=n}else if(n<=2047){if(i+1>=r)break;t[i++]=192|n>>6,t[i++]=128|63&n}else if(n<=65535){if(i+2>=r)break;t[i++]=224|n>>12,t[i++]=128|n>>6&63,t[i++]=128|63&n}else{if(i+3>=r)break;t[i++]=240|n>>18,t[i++]=128|n>>12&63,t[i++]=128|n>>6&63,t[i++]=128|63&n}}t[i]=0})(e,_,t,i)}(e,t,i)}return t},array:function(e){const t=W(e.length);var i,n;return i=e,n=t,m.set(i,n),t}},s=p(e),a=[];let c=0;if(n)for(let u=0;u<n.length;u++){const e=o[i[u]];e?(0===c&&(c=H()),a[u]=e(n[u])):a[u]=n[u]}let l=s.apply(null,a);return l=function(e){return"string"===t?(i=e)?function(e,t,i){const n=t+i;let r=t,o="";for(;e[r]&&!(r>=n);)++r;if(r-t>16&&e.subarray&&g)return g.decode(e.subarray(t,r));for(;t<r;){let i=e[t++];if(!(128&i)){o+=String.fromCharCode(i);continue}const n=63&e[t++];if(192==(224&i)){o+=String.fromCharCode((31&i)<<6|n);continue}const r=63&e[t++];if(i=224==(240&i)?(15&i)<<12|n<<6|r:(7&i)<<18|n<<12|r<<6|63&e[t++],i<65536)o+=String.fromCharCode(i);else{const e=i-65536;o+=String.fromCharCode(55296|e>>10,56320|1023&e)}}return o}(_,i,n):"":"boolean"===t?Boolean(e):e;var i,n}(l),0!==c&&Q(c),l}const g="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;let m,_,v,E,A,y,S,C,b;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");const T=[],I=[],R=[],w=[];I.push({func:function(){U()}});let O=0,k=null;function N(e){throw n.onAbort&&n.onAbort(e),u(e+=""),h=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}n.preloadedImages={},n.preloadedAudios={};let L="deflate.wasm";var P,D;function M(e){for(;e.length>0;){const t=e.shift();if("function"==typeof t){t(n);continue}const i=t.func;"number"==typeof i?void 0===t.arg?b.get(i)():b.get(i)(t.arg):i(void 0===t.arg?null:t.arg)}}D="data:application/octet-stream;base64,",Is(P=L).call(P,D)||(L=function(e){return n.locateFile?n.locateFile(e,l):l+e}(L));const x={emscripten_memcpy_big:function(e,t,i){cf(_).call(_,e,t,t+i)},emscripten_resize_heap:function(e){N("OOM")}};await async function(){const e={env:x,wasi_snapshot_preview1:x};function t(e,t){const i=e.exports;var r;n.asm=i,d=n.asm.memory,r=d.buffer,n.HEAP8=m=new Int8Array(r),n.HEAP16=v=new Int16Array(r),n.HEAP32=A=new Int32Array(r),n.HEAPU8=_=new Uint8Array(r),n.HEAPU16=E=new Uint16Array(r),n.HEAPU32=y=new Uint32Array(r),n.HEAPF32=S=new Float32Array(r),n.HEAPF64=C=new Float64Array(r),b=n.asm.__indirect_function_table,function(e){if(O--,n.monitorRunDependencies&&n.monitorRunDependencies(O),0==O&&k){const e=k;k=null,e()}}()}function i(e){t(e.instance)}function r(t){return new fo((e,t)=>{e(Nf().buffer)}).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){u("failed to asynchronously prepare wasm: "+e),N(e)}))}if(O++,n.monitorRunDependencies&&n.monitorRunDependencies(O),n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(e){return u("Module.instantiateWasm callback failed with error: "+e),!1}return await r(i),{}}();let B,U=n.___wasm_call_ctors=function(){return(U=n.___wasm_call_ctors=n.asm.__wasm_call_ctors).apply(null,arguments)},F=n._malloc=function(){return(F=n._malloc=n.asm.malloc).apply(null,arguments)},V=n._free=function(){return(V=n._free=n.asm.free).apply(null,arguments)},j=n.___errno_location=function(){return(j=n.___errno_location=n.asm.__errno_location).apply(null,arguments)},G=n._zlibCompress=function(){return(G=n._zlibCompress=n.asm.zlibCompress).apply(null,arguments)},H=n.stackSave=function(){return(H=n.stackSave=n.asm.stackSave).apply(null,arguments)},Q=n.stackRestore=function(){return(Q=n.stackRestore=n.asm.stackRestore).apply(null,arguments)},W=n.stackAlloc=function(){return(W=n.stackAlloc=n.asm.stackAlloc).apply(null,arguments)};function q(e){function t(){B||(B=!0,n.calledRun=!0,h||(M(I),M(R),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)e=n.postRun.shift(),w.unshift(e);var e;M(w)}()))}O>0||(function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)e=n.preRun.shift(),T.unshift(e);var e;M(T)}(),O>0||(n.setStatus?(n.setStatus("Running..."),Fa((function(){Fa((function(){n.setStatus("")}),1),t()}),1)):t()))}if(n.ccall=f,n.cwrap=function(e,t,i,n){const r=hf(i=i||[]).call(i,(function(e){return"number"===e}));return"string"!==t&&r&&!n?p(e):function(){return f(e,t,i,arguments)}},n.allocate=function(e,t){let i;return i=1==t?W(e.length):F(e.length),e.subarray||Uo(e)?_.set(e,i):_.set(new Uint8Array(e),i),i},k=function e(){B||q(),B||(k=e)},n.run=q,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return q(),Lf=n,n}const Mf=Uint8Array.BYTES_PER_ELEMENT,xf={bytesReceived:"br",frameDropped:"fd",frameReceived:"fr",googJitterReceived:"jr",isAudioMute:"am",isFreeze:"fz",mediaType:"mt",packetsLost:"pl",packetsReceived:"pr",peerId:"pid",id:"id",ssrc:"ssrc",timestamp:"ts",type:"tp",frameRateInput:"fi",frameRateSent:"fs",googRtt:"rt",isVideoMute:"vm"},Bf={stats:"sts",state:"st",stream_id:"stid",session_id:"seid",stream_type:"stt",app_id:"aid",channel_key:"ck",channel_name:"cn",sdk_version:"sv",browser:"b",process_id:"pcid",mode:"m",codec:"c",role:"r",has_changed_gateway:"hcg",ap_response:"ar",extends:"es",details:"d",features:"ft",p2p_id:"ppid",sdp:"sdp",audio:"a",video:"v",attributes:"at",hq:"h",lq:"l",stereo:"str",speech:"spe",extend:"e",pingpongElapse:"ppe"},Uf={_message:"m",_type:"t",_id:"id"},Ff={join_v2:"j2",publish:"pub",publish_related_stats:"prs",ping:"pi",traffic_stats:"ts",ping_back:"pib",publish_stats:"pubs"};let Vf;class jf{constructor(){}async init(){if(!Vf){const e=await(async()=>(Pf||(Pf=await Df()),{zlibCompress:e=>{var t;const i=new Uint8Array(e),n=Mf*i.byteLength,r=Pf._malloc(n),o=Pf._malloc(3*n);for(let c=0;c<n;c++)Pf.HEAP8[r/Mf+c]=i[c];const s=Pf._zlibCompress(r,n,o),a=new Uint8Array(Uo(t=Pf.HEAP8).call(t,o,o+s));return Pf._free(r),Pf._free(o),a}}))();Vf=e.zlibCompress}this.zlibCompress=Vf}msgPackCompress(e){return rf.encode(e)}compress(e){const t=Ma(),i=this.compressKeyAndValue(JSON.parse(ve(e))),n=this.msgPackCompress(i),r=this.zlibCompress(n),o=new Uint8Array([49,49,49,50,...Bd(r)]);return{origin:nn({},e),originLength:ve(e).length,shortKeyAndValue:i,msgpackSer:n,compressed:o,compressedLength:o.length,time:Ma()-t}}compressKeyAndValue(e){return this._ObjectKeyCompress(this._typeCompress(e))}_typeCompress(e){const t=e._type;if(!t)return e;const i=Ff[t];return e._type=i||t,e}_ObjectKeyCompress(e){const t=e._message;if(t){const i=t.stats;i&&(t.stats=this._statsCompress(i)),e._message=this._messageCompress(t)}return this._reportCompress(e)}_statsCompress(e){return this._keyCompress(e,xf)}_messageCompress(e){return this._keyCompress(e,Bf)}_reportCompress(e){return this._keyCompress(e,Uf)}_keyCompress(e,t){const i={},n=on(e);return un(n).call(n,(n,r)=>{const o=e[r];return t[r]?i[t[r]]=o:i[r]=o,i},i),i}}class Gf extends Mu{constructor(e){super(),this.lowPriorityQueue=[],this.highPriorityQueue=[],this.AgoraWebSocketManager=e}get queue(){return[...this.highPriorityQueue,...this.lowPriorityQueue]}reset(){this.lowPriorityQueue=[],this.highPriorityQueue=[]}pushMessage(e,t=!1){t?this.highPriorityQueue.push(e):this.lowPriorityQueue.push(e),this.sendMessage()}sendMessage(){const e=this.queue.length;let t=0;t=e<5?15*e:60+3*(e-4),Fa(()=>{this._sendMessage()},t)}_sendMessage(){var e;if(!this.queue.length)return;const t=this.AgoraWebSocketManager.getConnection();if(!t||1!==t.readyState)return;const i=this.queue.shift();return ns(e=this.lowPriorityQueue).call(e,i)?this.lowPriorityQueue.shift():this.highPriorityQueue.shift(),t.send(i.compressed),i}}class Hf extends Mu{constructor(e,t,i=!1,n=!1){super(),this.connectionID=0,this.currentURLIndex=0,this.reconnectMode="tryNext",this._state="closed",this.reconnectCount=0,this.isCompressorInitSuccess=!1,this.tryDoubleDomain=!1,this.wsInflateLength=0,this.wsDeflateLength=0,this.closeEstablishingWs=()=>{},this.name=e,this.retryConfig=t,this.useCompress=i,this.tryDoubleDomain=n}get url(){return this.websocket?this.websocket.url:null}get ipPortTuple(){if(!this.url)return[void 0,void 0];const e=/^wss:\/\/(\d+-\d+-\d+-\d+)\..+:(\d+)\/?$/.exec(this.url);return e&&e[1]&&e[2]?[e[1].split("-").join("."),e[2]]:[void 0,void 0]}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(ru.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(ru.CONNECTED):"closed"===this._state?this.emit(ru.CLOSED):"failed"===this._state&&this.emit(ru.FAILED))}getConnection(){return this.websocket||void 0}init(e){const t=(t,i)=>{this.urls=e;const n=this.urls[this.currentURLIndex];this.state="connecting",this.messageSender=new Gf(this),this.createWebSocketConnection(n).then(t).catch(i),this.once(ru.CLOSED,()=>i(new pl(ll.WS_DISCONNECT))),this.once(ru.CONNECTED,()=>t())};return new fo((e,i)=>{this.compressor=new jf,this.compressor.init().then(()=>{var n;Rc.debug("websocket compressor initialized successfully"),rh.wsCompressorInit({status:!0,ec:null,eventElapse:1}),this.isCompressorInitSuccess=!0,this.compress=Ko(n=this.compressor.compress).call(n,this.compressor),t(e,i)}).catch(n=>{t(e,i),Rc.debug("websocket compressor failed to initialize"),rh.wsCompressorInit({status:!1,ec:n?n.message||n.toString():"Empty Error",eventElapse:1})})})}close(e,t){if(this.currentURLIndex=0,this.reconnectCount=0,this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const e=this.websocket;t?Fa(()=>e.close(),500):e.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void Rc.warning("[".concat(this.name,"] can not reconnect, no websocket"));void 0!==e&&(this.reconnectMode=e),Rc.debug("[".concat(this.name,"] reconnect is triggered initiative"));const i=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),i&&Ko(i).call(i,this.websocket)({code:9999,reason:t})}sendMessage(e,t=!1){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new pl(ll.WS_ABORT,"websocket is not ready");try{let i=null;if(this.isCompressorInitSuccess&&this.useCompress&&jc("WEBSOCKET_COMPRESS"))i=this.compress(e),this.setWsInflateData(i);else{if(this.isCompressorInitSuccess&&this.useCompress){const t=this.compress(e);this.setWsInflateData(t)}const t=ve(e);i={compressed:t,compressedLength:t.length,origin:e}}t?this.websocket.send(i.compressed):this.messageSender.pushMessage(i)}catch(e){throw new pl(ll.WS_ERR,"send websocket message error"+e.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){const e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e,t){return this.connectionID+=1,this.connectionID,new fo((i,n)=>{var r,o;const s=()=>{Rc.debug("[".concat(this.name,"] websocket opened:"),e),this.reconnectMode="retry",this.state="connected",this.reconnectCount=0,i()},a=async e=>{var t,r,o,s;if(Rc.debug(Je(t=Je(r=Je(o=Je(s="[".concat(this.name,"] websocket close ")).call(s,this.websocket&&this.websocket.url,", code: ")).call(o,e.code,", reason: ")).call(r,e.reason,", current mode: ")).call(t,this.reconnectMode)),this.reconnectCount<this.retryConfig.maxRetryCount){"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const t=xp(this,ru.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,r=await this.reconnectWithAction(t);if("closed"===this.state)return void Rc.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!r)return n(new pl(ll.WS_DISCONNECT,"websocket reconnect failed: ".concat(e.code))),void this.close(!0);i()}else n(new pl(ll.WS_DISCONNECT,"websocket close: ".concat(e.code))),this.close()},c=e=>{this.emit(ru.ON_MESSAGE,e)};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),jc("GATEWAY_WSS_ADDRESS")&&Is(r=this.name).call(r,"gateway")&&(e=jc("GATEWAY_WSS_ADDRESS")),Rc.debug(Je(o="[".concat(this.name,"] start connect, url: ")).call(o,e)),this.chooseBestWebsocketConnection(e,!!t).then(e=>{this.websocket=e,s&&s(),e.onclose=a,e.onmessage=c}).catch(e=>{if("closed"!==this.state){if(e instanceof pl&&e.code===ll.WS_ERR){var t;const i=new pl(ll.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return Rc.error(Je(t="[".concat(this.name,"]")).call(t,i)),void n(i)}a&&a(e)}else n(new pl(ll.WS_DISCONNECT,"websocket is closed: ".concat(e.toString())))})})}async reconnectWithAction(e,t){var i,n;if(!t&&this.reconnectCount>=this.retryConfig.maxRetryCount)return!1;if(!this.urls)return!1;if("closed"===this.state)return!1;this.onlineReconnectListener||$d.networkState!==Pu.OFFLINE||(this.onlineReconnectListener=$d.onlineWaiter&&$d.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));const r=Zd(this.reconnectCount,this.retryConfig);if(Rc.debug(Je(i=Je(n="[".concat(this.name,"] wait ")).call(n,r,"ms to reconnect websocket, mode: ")).call(i,e)),await fo.race([Ip(r),this.onlineReconnectListener||new fo(()=>{})]),"closed"===this.state)return!1;this.reconnectCount+=1;try{if("retry"===e){const e=this.urls[this.currentURLIndex];await this.createWebSocketConnection(e)}else if("tryNext"===e){var o,s;if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return await this.reconnectWithAction("recover");Rc.debug(Je(o=Je(s="[".concat(this.name,"] websocket url length: ")).call(s,this.urls.length," current index: ")).call(o,this.currentURLIndex));const e=this.urls[this.currentURLIndex];await this.createWebSocketConnection(e)}else if("recover"===e){Rc.debug("[".concat(this.name,"] request new urls")),this.urls=await Dp(this,ru.REQUEST_NEW_URLS),this.currentURLIndex=0;const e=this.urls[this.currentURLIndex];await this.createWebSocketConnection(e)}return!0}catch(t){return Rc.error("[".concat(this.name,"] reconnect failed"),t.toString()),await this.reconnectWithAction(e)}}async chooseBestWebsocketConnection(e,t){return new fo((i,n)=>{let r=!1;const o=[];this.closeEstablishingWs=()=>{Rc.debug("[choose-best-ws] close establishing websockets"),Ji(o).call(o,e=>{e.onclose=null,e.onopen=null,e.onmessage=null,e.close()}),n(new pl(ll.WS_ABORT,"choose best websocket aborted"))};const s=jc("GATEWAY_DOMAINS");let a;const c=Lo(e).call(e,"?h="),l=Qo(s).call(s,t=>-1!==c?ns(e).call(e,t,c):ns(e).call(e,t));Rc.debug("[choose-best-ws] currentDomain: ",l,", domains: ",s);let u=!this.tryDoubleDomain||t||!l;if(!u&&l){try{Ji(s).call(s,t=>{const i=-1===c?e.replace(l,t):e.substr(0,c)+e.substr(c).replace(l,t),n=new WebSocket(i);n.binaryType="arraybuffer",o.push(n),Rc.debug("[choose-best-ws] ws is connecting:",n.url)})}catch(e){for(Rc.debug("[choose-best-ws] ws create failed, fallback to single url"),Ji(o).call(o,e=>e.close());o.length;)o.pop();u=!0}Ji(o).call(o,e=>{e.onopen=()=>{var t;r||(Ji(t=Gn(o).call(o,t=>t!==e)).call(t,e=>{Rc.debug("[choose-best-ws]close backup websocket: ".concat(e.url)),e.close()}),r=!0,i(e))},e.onclose=e=>{a=e,r||Qo(o).call(o,e=>!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING))||(Rc.debug("[choose-best-ws] all websocket is closed"),r=!0,n(a))},e.onmessage=t=>{var i;Rc.debug(Je(i="[choose-best-ws]".concat(e.url," onmessage: ")).call(i,t.data))}}),Ip(5e3).then(()=>{Ji(o).call(o,e=>{e.readyState!==WebSocket.OPEN&&e.close()})})}if(u){let t;Rc.debug("[choose-best-ws] use single url: ",e);try{t=new WebSocket(e),o.push(t),t.binaryType="arraybuffer"}catch(e){var d;const i=new pl(ll.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return Rc.error(Je(d="[".concat(this.name,"]")).call(d,i)),void n(i)}t.onopen=()=>{i(t)},t.onclose=e=>{n(e)},t.onmessage=e=>{var i;Rc.debug(Je(i="[choose-best-ws]".concat(t.url," onmessage: ")).call(i,e.data))},Ip(5e3).then(()=>{t&&t.readyState!==WebSocket.OPEN&&t.close()})}}).finally(()=>{this.closeEstablishingWs=void 0})}}class Qf{constructor(e){this.input=[],this.size=e}add(e){var t;this.input.push(e),this.input.length>this.size&&To(t=this.input).call(t,0,1)}mean(){var e;return 0===this.input.length?0:un(e=this.input).call(e,(e,t)=>e+t)/this.input.length}}class Wf extends Mu{constructor(e){super(),this._connectionState=Gl.CLOSED,this.openConnectionTime=Ma(),this.lastMsgTime=Ma(),this.uploadCache=[],this.rttRolling=new Qf(5),this.pingpongTimeoutCount=0,this.onWebsocketMessage=e=>{if(e.data instanceof ArrayBuffer)return void this.emit(Hl.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Ma(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")&&(this.emit(t._type,t._message),t._type===ql.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===ql.ON_USER_BANNED))switch(t._message.error_code){case 14:this.close("UID_BANNED");break;case 15:this.close("IP_BANNED");break;case 16:this.close("CHANNEL_BANNED")}},this.clientId=e.clientId,this.spec=e,this.websocket=new Hf("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Gl.CONNECTED&&this.reconnect("retry",jl.OFFLINE)})}get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===Gl.CONNECTED?this.emit(Hl.WS_CONNECTED):e===Gl.RECONNECTING?this.emit(Hl.WS_RECONNECTING,this._websocketReconnectReason):e===Gl.CLOSED&&this.emit(Hl.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}async request(e,t,i,n){var r,o,s,a,c;const l=Op(6,""),u={_id:l,_type:e,_message:t},d=this.websocket.connectionID,h=()=>new fo((t,i)=>{if(this.connectionState===Gl.CONNECTED)return t();const n=()=>{this.off(Hl.WS_CLOSED,r),t()},r=()=>{this.off(Hl.WS_CONNECTED,n),i(new pl(ll.WS_ABORT))};this.once(Hl.WS_CONNECTED,n),this.once(Hl.WS_CLOSED,r),e!==Ql.PUBLISH&&e!==Ql.SUBSCRIBE&&e!==Ql.UNSUBSCRIBE&&e!==Ql.UNPUBLISH&&e!==Ql.CONTROL||this.once(Hl.DISCONNECT_P2P,()=>{i(new pl(ll.DISCONNECT_P2P))})});if(this.connectionState!==Gl.CONNECTING&&this.connectionState!==Gl.RECONNECTING||e===Ql.JOIN||e===Ql.REJOIN||await h(),this.websocket.sendMessage(u,!0),n)return;const p=new fo((i,n)=>{let r=!1;const o=(n,o)=>{r=!0,i({isSuccess:"success"===n,message:o||{}}),this.off(Hl.WS_CLOSED,s),this.off(Hl.WS_RECONNECTING,s),this.emit(Hl.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(l),o);const s=()=>{n(new pl(ll.WS_ABORT,"type: ".concat(e))),this.off(Hl.WS_CLOSED,s),this.off(Hl.WS_RECONNECTING,s),this.off("res-@".concat(l),o)};this.once(Hl.WS_CLOSED,s),this.once(Hl.WS_RECONNECTING,s),Ip(jc("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==d||r||(Rc.warning("ws request timeout, type: ".concat(e)),this.emit(Hl.REQUEST_TIMEOUT,e,t))})});let f=null;try{f=await p}catch(n){if(this.connectionState===Gl.CLOSED||e===Ql.LEAVE)throw new pl(ll.WS_ABORT);return!this.spec.forceWaitGatewayResponse||i?n.throw():e===Ql.JOIN||e===Ql.REJOIN?null:(await h(),await this.request(e,t))}if(f.isSuccess)return f.message;const g=Number(f.message.error_code||f.message.code),m=nf(g),_=new pl(ll.UNEXPECTED_RESPONSE,Je(r="".concat(m.desc,": ")).call(r,f.message.error_str),{code:g,data:f.message});return"success"===m.action?f.message:(Rc.warning(Je(o=Je(s=Je(a=Je(c="[".concat(this.websocket.connectionID,"] unexpected response from type ")).call(c,e,", error_code: ")).call(a,g,", message: ")).call(s,m.desc,", action: ")).call(o,m.action)),"failed"===m.action?_.throw():"quit"===m.action?(this.initError=_,this.close(),_.throw()):(g===Fl.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=f.message.option,Rc.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",jl.MULTI_IP)):this.reconnect(m.action,jl.SERVER_ERROR),e===Ql.JOIN||e===Ql.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new fo(i=>{const n=r=>{(!t||t(r))&&(this.off(e,n),i(r))};this.on(e,n)})}upload(e,t){const i={_type:e,_message:t};try{this.websocket.sendMessage(i)}catch(e){const t=jc("MAX_UPLOAD_CACHE")||50;var n;this.uploadCache.push(i),this.uploadCache.length>t&&To(n=this.uploadCache).call(n,0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{var e;if(this.connectionState!==Gl.CONNECTED)return;const t=To(e=this.uploadCache).call(e,0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(t._type,t._message)},jc("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const i={_type:e,_message:t};this.websocket.sendMessage(i)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,new fo((t,i)=>{this.once(Hl.WS_CONNECTED,()=>t(this.joinResponse)),this.once(Hl.WS_CLOSED,()=>i(this.initError||new pl(ll.WS_ABORT))),this.connectionState=Gl.CONNECTING,this.websocket.init(e).catch(i),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4)})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||"LEAVE",this.connectionState=Gl.CLOSED,this.websocket.close()}async join(){var e;if(!this.joinResponse){const e=await Dp(this,Hl.REQUEST_JOIN_INFO),t=await this.request(Ql.JOIN,e);if(!t)return this.emit(Hl.REPORT_JOIN_GATEWAY,ll.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(Hl.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Gl.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(Ko(e=this.handlePingPong).call(e,this),3e3),!0}async rejoin(){var e,t;if(!this.reconnectToken)throw new pl(ll.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const i=Bp(this,Hl.REQUEST_REJOIN_INFO);i.token=this.reconnectToken;const n=await this.request(Ql.REJOIN,i);return!!n&&(this.connectionState=Gl.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(Ko(e=this.handlePingPong).call(e,this),3e3),n.peers&&Ji(t=n.peers).call(t,e=>{this.emit(ql.ON_USER_ONLINE,{uid:e.uid}),e.audio_mute?this.emit(ql.MUTE_AUDIO,{uid:e.uid}):this.emit(ql.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(ql.MUTE_VIDEO,{uid:e.uid}):this.emit(ql.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(ql.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(ql.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(ql.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(ql.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(ql.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id}),e.audio&&this.emit(ql.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0}),e.video&&this.emit(ql.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0})}),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){Rc.debug("[".concat(this.clientId,"] receive notification: "),e);const t=nf(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close("UID_BANNED"),void this.close()):void this.reconnect(t.action,jl.SERVER_ERROR);Rc.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=jc("PING_PONG_TIME_OUT"),t=Ma();this.pingpongTimeoutCount>=e&&(Rc.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>jc("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",jl.TIMEOUT):this.request(Ql.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const e=Ma()-t;this.rttRolling.add(e),jc("REPORT_STATS")&&this.send(Ql.PING_BACK,{pingpongElapse:e})}).catch(e=>{})}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(Wl.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(ru.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(ru.CLOSED,()=>{this.connectionState=Gl.CLOSED}),this.websocket.on(ru.FAILED,()=>{this._disconnectedReason="NETWORK_ERROR",this.connectionState=Gl.CLOSED}),this.websocket.on(ru.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===Gl.CONNECTED?this.connectionState=Gl.RECONNECTING:this.connectionState=Gl.CONNECTING}),this.websocket.on(ru.WILL_RECONNECT,(e,t)=>{if(Bp(this,Hl.IS_P2P_DISCONNECTED)&&"retry"===e)return this.reconnectToken=void 0,this.emit(Hl.NEED_RENEW_SESSION),this.emit(Hl.DISCONNECT_P2P),t("tryNext");"retry"!==e&&(this.reconnectToken=void 0,this.emit(Hl.NEED_RENEW_SESSION),this.emit(Hl.DISCONNECT_P2P)),t(e)}),this.websocket.on(ru.CONNECTED,()=>{this.openConnectionTime=Ma(),this.reconnectToken?this.rejoin().catch(e=>{var t;Rc.warning(Je(t="[".concat(this.clientId,"] rejoin failed ")).call(t,e)),this.reconnect("tryNext",jl.SERVER_ERROR)}):this.join().catch(e=>{if(this.emit(Hl.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof pl&&e.code===ll.UNEXPECTED_RESPONSE&&e.data.code===Fl.ERR_NO_AUTHORIZED)return Rc.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",jl.SERVER_ERROR);Rc.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",jl.SERVER_ERROR):(this.initError=e,this.close())})}),this.websocket.on(ru.REQUEST_NEW_URLS,(e,t)=>{Dp(this,Hl.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})}}function qf(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function $f(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=qf(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=qf(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}const zf=new Mi;class Zf extends Mu{constructor(e,t){super(),this.inChannelInfo={joinAt:null,duration:0},this._state="DISCONNECTED",this.isSignalRecover=!1,this.hasChangeBGPAddress=!1,this.joinGatewayStartTime=0,this._signalTimeout=!1,this.store=e,this.spec=t,this.signal=new Wf($f({},t,{retryConfig:t.websocketRetryConfig})),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(_u.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(_u.CONNECTION_STATE_CHANGE,e,t)}async join(e,t){var i,n;this.store.joinGatewayStart(),"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const r=Ma();let o=zf.get(e.cname);if(o||(o=new Mi,zf.set(e.cname,o)),o.has(e.uid)){const t=new pl(ll.UID_CONFLICT);throw rh.joinGateway(e.sid,{lts:r,succ:!1,ec:t.message,addr:null,uid:e.uid,cid:e.cid}),t}o.set(e.uid,!0),this.joinInfo=e,this.key=t;const s=e.proxyServer?vo(i=e.gatewayAddrs).call(i,t=>{var i,n;const r=t.split(":");return Je(i=Je(n="wss://".concat(e.proxyServer,"/ws/?h=")).call(n,r[0],"&p=")).call(i,r[1])}):vo(n=e.gatewayAddrs).call(n,e=>"wss://".concat(e));let a=0;this.joinGatewayStartTime=r;try{a=(await this.signal.init(s)).uid}catch(t){throw Rc.error("[".concat(this.store.clientId,"] User join failed"),t.toString()),rh.joinGateway(e.sid,{lts:r,succ:!1,ec:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid}),o.delete(e.uid),this.signal.close(),t}return this.state="CONNECTED",this.inChannelInfo.joinAt=Ma(),Rc.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(e=>{Rc.warning("[".concat(this.store.clientId,"] get traffic stats error"),e.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(_u.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(_u.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(_u.NETWORK_QUALITY,{uplinkNetworkQuality:_p(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:_p(this._statsCollector.trafficStats.B_dnq)}):this.emit(_u.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),a}async leave(e=!1){if("DISCONNECTED"!==this.state){this.state="DISCONNECTING";try{e||this.signal.connectionState!==Gl.CONNECTED||await wp(this.signal.request(Ql.LEAVE,void 0,!0),3e3)}catch(e){Rc.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),e)}this.signal.close(),this.reset(),this.state="DISCONNECTED"}}async publish(e,t,i){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pl(ll.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const n={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:jc("PUB_EXTEND")};try{return(await this.signal.request(Ql.PUBLISH,n,!0))._message}catch(n){if(i&&n.data&&n.data.code===Fl.ERR_PUBLISH_REQUEST_INVALID)return Rc.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),n.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw n}}async unpublish(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pl(ll.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(Ql.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(e){Rc.warning("unpublish warning: ",e)}}async subscribe(e,t,i){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pl(ll.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const n={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,tcc:!!jc("SUBSCRIBE_TCC"),extend:jc("SUB_EXTEND"),ssrcId:t.ssrcId};try{return(await this.signal.request(Ql.SUBSCRIBE,n,!0))._message}catch(n){if(i&&n.data&&n.data.code===Fl.ERR_SUBSCRIBE_REQUEST_INVALID)return Rc.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),n.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw n}}async unsubscribe(e,t){try{await this.signal.request(Ql.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(e){Rc.warning("unsubscribe warning: ",e)}}async reconnectPC(e){const{iceParameters:t,dtlsParameters:i,rtpCapabilities:n}=e;return{gatewayEstablishParams:await this.signal.request(Ql.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:i,rtpCapabilities:n}},!0)}}getGatewayInfo(){return this.signal.request(Ql.GATEWAY_INFO)}renewToken(e){return this.signal.request(Ql.RENEW_TOKEN,e)}async setClientRole(e,t){if(t&&(this._clientRoleOptions=nn({},t)),"CONNECTED"!==this.state)return void(this.role=e);let i=void 0;i="audience"===e?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,await this.signal.request(Ql.SET_CLIENT_ROLE,{role:e,level:i}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(Ql.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setStreamFallbackOption(e,t){await this.signal.request(Ql.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(Ql.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Ma()-this.inChannelInfo.joinAt),$f({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Ql.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Ma()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=zf.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){const t=e.match(/(wss\:\/\/)?([^:]+):(\d+)/);return t?{username:Nc.username,password:Nc.password,turnServerURL:t[2],tcpport:Cn(t[3])+30,udpport:Cn(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex])||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push($f({},Nc,{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){var e;if("CONNECTED"!==this.state)return;const t=await this.signal.request(Ql.TRAFFIC_STATS,void 0,!0);t.timestamp=Ma(),Ji(e=t.peer_delay).call(e,e=>{var t;const i=this._statsCollector.trafficStats&&Qo(t=this._statsCollector.trafficStats.peer_delay).call(t,t=>t.peer_uid===e.peer_uid);i&&i.B_st!==e.B_st&&Vp(()=>{this.emit(_u.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)})}),this._statsCollector.updateTrafficStats(t)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new pl(ll.UNEXPECTED_ERROR,"can not generate join message, no join info");const t=nn({},this.joinInfo.apResponse);let i=jc("REPORT_APP_SCENARIO");if("string"!=typeof i)try{i=ve(i)}catch(e){i=void 0}i&&i.length>128&&(i=void 0);const n=$f({p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:Oc,browser:navigator.userAgent,process_id:jc("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:jc("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:i},e);return this.joinInfo.stringUid&&(n.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(n.aes_mode=this.joinInfo.aesmode,jc("ENCRYPT_AES")?(n.aes_secret=this.joinInfo.aespassword,n.aes_encrypt=!0):n.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(n.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(n.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),n}getRejoinMessage(){if(!this.joinInfo)throw new pl(ll.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(Hl.WS_RECONNECTING,e=>{this.joinInfo&&rh.WebSocketQuit(this.joinInfo.sid,{lts:Ma(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||jl.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",rh.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Ma())}),this.signal.on(Hl.WS_CLOSED,e=>{let t;switch(e){case"LEAVE":t=jl.LEAVE;break;case"UID_BANNED":case"IP_BANNED":case"CHANNEL_BANNED":case"SERVER_ERROR":t=jl.SERVER_ERROR;break;default:t=jl.NETWORK_ERROR}Rc.debug("[signal] websocket closed, reason: ".concat(t||"undefined -> "+jl.NETWORK_ERROR)),this.joinInfo&&rh.WebSocketQuit(this.joinInfo.sid,{lts:Ma(),succ:"LEAVE"===e?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this.reset(),this._disconnectedReason=e,this.state="DISCONNECTED"}),this.signal.on(Hl.WS_CONNECTED,()=>{var e,t,i;if((this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo)&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(Rc.debug(Je(e=Je(t=Je(i="[".concat(this.store.clientId,"] patch to send set client role, role: ")).call(i,this.role,", mode: ")).call(t,this.spec.mode,", level: ")).call(e,this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),rh.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid}),this.joinInfo.useLocalAccessPoint)){const e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);var n;if(!e)return void Rc.error(Je(n="[".concat(this.store.clientId,"] set local access point after joined failed: ")).call(n,e));Vc("EVENT_REPORT_DOMAIN",e[1]),Vc("EVENT_REPORT_BACKUP_DOMAIN",e[1]),Vc("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}}),this.signal.on(ql.ON_UPLINK_STATS,e=>{this._statsCollector.updateUplinkStats(e)}),this.signal.on(Hl.REQUEST_RECOVER,(e,t,i)=>{if(!this.joinInfo)return i(new pl(ll.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Dp(this,_u.REQUEST_NEW_GATEWAY_LIST).then(t).catch(i)}),this.signal.on(Hl.REQUEST_JOIN_INFO,async e=>{var t;this.updateTurnConfigFromSignal();const{iceParameters:i,dtlsParameters:n,rtpCapabilities:r}=await Dp(this,_u.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(t=this.joinInfo)||void 0===t?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:i,dtlsParameters:n,rtpCapabilities:r}}))}),this.signal.on(Hl.REQUEST_REJOIN_INFO,e=>{e(this.getRejoinMessage())}),this.signal.on(Hl.REPORT_JOIN_GATEWAY,(e,t)=>{this.joinInfo&&rh.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:e,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid})}),this.signal.on(Hl.IS_P2P_DISCONNECTED,e=>{e(Bp(this,_u.IS_P2P_DISCONNECTED))}),this.signal.on(Hl.DISCONNECT_P2P,()=>{this.emit(_u.DISCONNECT_P2P)}),this.signal.on(Hl.NEED_RENEW_SESSION,()=>{this.emit(_u.NEED_RENEW_SESSION)}),this.signal.on(Hl.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(Hl.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(Hl.JOIN_RESPONSE,e=>{this.emit(_u.JOIN_RESPONSE,e)})}async tryUnsubBeforeResub(e,t){try{await this.signal.request(Ql.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(e){throw Rc.warning("unsubscribe warning",e),e}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(Ql.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(e){throw Rc.warning("unpublish warning: ",e),e}}async muteLocal(e,t){const i={action:Qo(e).call(e,e=>e.stream_type===mu.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(Ql.CONTROL,i,!0,!0)}catch(e){throw Rc.warning("gateway unmuteLocal warning: ",e),e}}async unmuteLocal(e,t){const i={action:Qo(e).call(e,e=>e.stream_type===mu.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(Ql.CONTROL,i,!0,!0)}catch(e){throw Rc.warning("gateway muteLocal warning: ",e),e}}uploadStats(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){const t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return{response:await this.signal.request(Ql.RESTART_ICE,t,!0)}}catch(e){throw Rc.warning("P2PChannel.restartICE warning: ",e),e}}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,jl.P2P_FAILED)}}var Yf=Pe("iterator"),Kf=!s((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,i="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),i+=n+e})),!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Yf]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host})),Jf=2147483647,Xf=/[^\0-\u007E]/,eg=/[.\u3002\uFF0E\uFF61]/g,tg="Overflow: input needs wider integers to process",ig=Math.floor,ng=String.fromCharCode,rg=function(e){return e+22+75*(e<26)},og=function(e,t,i){var n=0;for(e=i?ig(e/700):e>>1,e+=ig(e/t);e>455;n+=36)e=ig(e/35);return ig(n+36*e/(e+38))},sg=function(e){var t,i,n=[],r=(e=function(e){for(var t=[],i=0,n=e.length;i<n;){var r=e.charCodeAt(i++);if(r>=55296&&r<=56319&&i<n){var o=e.charCodeAt(i++);56320==(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),i--)}else t.push(r)}return t}(e)).length,o=128,s=0,a=72;for(t=0;t<e.length;t++)(i=e[t])<128&&n.push(ng(i));var c=n.length,l=c;for(c&&n.push("-");l<r;){var u=Jf;for(t=0;t<e.length;t++)(i=e[t])>=o&&i<u&&(u=i);var d=l+1;if(u-o>ig((Jf-s)/d))throw RangeError(tg);for(s+=(u-o)*d,o=u,t=0;t<e.length;t++){if((i=e[t])<o&&++s>Jf)throw RangeError(tg);if(i==o){for(var h=s,p=36;;p+=36){var f=p<=a?1:p>=a+26?26:p-a;if(h<f)break;var g=h-f,m=36-f;n.push(ng(rg(f+g%m))),h=ig(g/m)}n.push(ng(rg(h))),a=og(s,d,l==c),s=0,++l}}++s,++o}return n.join("")},ag=function(e){var t=ft(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return U(t.call(e))},cg=le("fetch"),lg=le("Headers"),ug=Pe("iterator"),dg="URLSearchParams",hg="URLSearchParamsIterator",pg=xt.set,fg=xt.getterFor(dg),gg=xt.getterFor(hg),mg=/\+/g,_g=Array(4),vg=function(e){return _g[e-1]||(_g[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},Eg=function(e){try{return decodeURIComponent(e)}catch(n){return e}},Ag=function(e){var t=e.replace(mg," "),i=4;try{return decodeURIComponent(t)}catch(e){for(;i;)t=t.replace(vg(i--),Eg);return t}},yg=/[!'()~]|%20/g,Sg={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Cg=function(e){return Sg[e]},bg=function(e){return encodeURIComponent(e).replace(yg,Cg)},Tg=function(e,t){if(t)for(var i,n,r=t.split("&"),o=0;o<r.length;)(i=r[o++]).length&&(n=i.split("="),e.push({key:Ag(n.shift()),value:Ag(n.join("="))}))},Ig=function(e){this.entries.length=0,Tg(this.entries,e)},Rg=function(e,t){if(e<t)throw TypeError("Not enough arguments")},wg=si((function(e,t){pg(this,{type:hg,iterator:ag(fg(e).entries),kind:t})}),"Iterator",(function(){var e=gg(this),t=e.kind,i=e.iterator.next(),n=i.value;return i.done||(i.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),i})),Og=function(){_t(this,Og,dg);var e,t,i,n,r,o,s,a,c,l=arguments.length>0?arguments[0]:void 0,u=this,d=[];if(pg(u,{type:dg,entries:d,updateURL:function(){},updateSearchParams:Ig}),void 0!==l)if(v(l))if("function"==typeof(e=ft(l)))for(i=(t=e.call(l)).next;!(n=i.call(t)).done;){if((s=(o=(r=ag(U(n.value))).next).call(r)).done||(a=o.call(r)).done||!o.call(r).done)throw TypeError("Expected sequence with length 2");d.push({key:s.value+"",value:a.value+""})}else for(c in l)y(l,c)&&d.push({key:c,value:l[c]+""});else Tg(d,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:l+"")},kg=Og.prototype;Kt(kg,{append:function(e,t){Rg(arguments.length,2);var i=fg(this);i.entries.push({key:e+"",value:t+""}),i.updateURL()},delete:function(e){Rg(arguments.length,1);for(var t=fg(this),i=t.entries,n=e+"",r=0;r<i.length;)i[r].key===n?i.splice(r,1):r++;t.updateURL()},get:function(e){Rg(arguments.length,1);for(var t=fg(this).entries,i=e+"",n=0;n<t.length;n++)if(t[n].key===i)return t[n].value;return null},getAll:function(e){Rg(arguments.length,1);for(var t=fg(this).entries,i=e+"",n=[],r=0;r<t.length;r++)t[r].key===i&&n.push(t[r].value);return n},has:function(e){Rg(arguments.length,1);for(var t=fg(this).entries,i=e+"",n=0;n<t.length;)if(t[n++].key===i)return!0;return!1},set:function(e,t){Rg(arguments.length,1);for(var i,n=fg(this),r=n.entries,o=!1,s=e+"",a=t+"",c=0;c<r.length;c++)(i=r[c]).key===s&&(o?r.splice(c--,1):(o=!0,i.value=a));o||r.push({key:s,value:a}),n.updateURL()},sort:function(){var e,t,i,n=fg(this),r=n.entries,o=r.slice();for(r.length=0,i=0;i<o.length;i++){for(e=o[i],t=0;t<i;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===i&&r.push(e)}n.updateURL()},forEach:function(e){for(var t,i=fg(this).entries,n=B(e,arguments.length>1?arguments[1]:void 0,3),r=0;r<i.length;)n((t=i[r++]).value,t.key,this)},keys:function(){return new wg(this,"keys")},values:function(){return new wg(this,"values")},entries:function(){return new wg(this,"entries")}},{enumerable:!0}),Yt(kg,ug,kg.entries),Yt(kg,"toString",(function(){for(var e,t=fg(this).entries,i=[],n=0;n<t.length;)e=t[n++],i.push(bg(e.key)+"="+bg(e.value));return i.join("&")}),{enumerable:!0}),yt(Og,dg),Q({global:!0,forced:!Kf},{URLSearchParams:Og}),Kf||"function"!=typeof cg||"function"!=typeof lg||Q({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,i,n,r=[e];return arguments.length>1&&(v(t=arguments[1])&&(i=t.body,ht(i)===dg&&((n=t.headers?new lg(t.headers):new lg).has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=qt(t,{body:d(0,String(i)),headers:d(0,n)}))),r.push(t)),cg.apply(this,r)}});var Ng,Lg={URLSearchParams:Og,getState:fg},Pg=Ci.codeAt,Dg=o.URL,Mg=Lg.URLSearchParams,xg=Lg.getState,Bg=xt.set,Ug=xt.getterFor("URL"),Fg=Math.floor,Vg=Math.pow,jg="Invalid scheme",Gg="Invalid host",Hg="Invalid port",Qg=/[A-Za-z]/,Wg=/[\d+\-.A-Za-z]/,qg=/\d/,$g=/^(0x|0X)/,zg=/^[0-7]+$/,Zg=/^\d+$/,Yg=/^[\dA-Fa-f]+$/,Kg=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,Jg=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Xg=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,em=/[\u0009\u000A\u000D]/g,tm=function(e,t){var i,n,r;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return Gg;if(!(i=nm(t.slice(1,-1))))return Gg;e.host=i}else if(dm(e)){if(t=function(e){var t,i,n=[],r=e.toLowerCase().replace(eg,".").split(".");for(t=0;t<r.length;t++)i=r[t],n.push(Xf.test(i)?"xn--"+sg(i):i);return n.join(".")}(t),Kg.test(t))return Gg;if(null===(i=im(t)))return Gg;e.host=i}else{if(Jg.test(t))return Gg;for(i="",n=Md(t),r=0;r<n.length;r++)i+=lm(n[r],om);e.host=i}},im=function(e){var t,i,n,r,o,s,a,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(i=[],n=0;n<t;n++){if(""==(r=c[n]))return e;if(o=10,r.length>1&&"0"==r.charAt(0)&&(o=$g.test(r)?16:8,r=r.slice(8==o?1:2)),""===r)s=0;else{if(!(10==o?Zg:8==o?zg:Yg).test(r))return e;s=parseInt(r,o)}i.push(s)}for(n=0;n<t;n++)if(s=i[n],n==t-1){if(s>=Vg(256,5-t))return null}else if(s>255)return null;for(a=i.pop(),n=0;n<i.length;n++)a+=i[n]*Vg(256,3-n);return a},nm=function(e){var t,i,n,r,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,h=function(){return e.charAt(d)};if(":"==h()){if(":"!=e.charAt(1))return;d+=2,u=++l}for(;h();){if(8==l)return;if(":"!=h()){for(t=i=0;i<4&&Yg.test(h());)t=16*t+parseInt(h(),16),d++,i++;if("."==h()){if(0==i)return;if(d-=i,l>6)return;for(n=0;h();){if(r=null,n>0){if(!("."==h()&&n<4))return;d++}if(!qg.test(h()))return;for(;qg.test(h());){if(o=parseInt(h(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;d++}c[l]=256*c[l]+r,2!=++n&&4!=n||l++}if(4!=n)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;c[l++]=t}else{if(null!==u)return;d++,u=++l}}if(null!==u)for(s=l-u,l=7;0!=l&&s>0;)a=c[l],c[l--]=c[u+s-1],c[u+--s]=a;else if(8!=l)return;return c},rm=function(e){var t,i,n,r;if("number"==typeof e){for(t=[],i=0;i<4;i++)t.unshift(e%256),e=Fg(e/256);return t.join(".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,i=1,n=null,r=0,o=0;o<8;o++)0!==e[o]?(r>i&&(t=n,i=r),n=null,r=0):(null===n&&(n=o),++r);return r>i&&(t=n,i=r),t}(e),i=0;i<8;i++)r&&0===e[i]||(r&&(r=!1),n===i?(t+=i?":":"::",r=!0):(t+=e[i].toString(16),i<7&&(t+=":")));return"["+t+"]"}return e},om={},sm=tn({},om,{" ":1,'"':1,"<":1,">":1,"`":1}),am=tn({},sm,{"#":1,"?":1,"{":1,"}":1}),cm=tn({},am,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),lm=function(e,t){var i=Pg(e,0);return i>32&&i<127&&!y(t,e)?e:encodeURIComponent(e)},um={ftp:21,file:null,http:80,https:443,ws:80,wss:443},dm=function(e){return y(um,e.scheme)},hm=function(e){return""!=e.username||""!=e.password},pm=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},fm=function(e,t){var i;return 2==e.length&&Qg.test(e.charAt(0))&&(":"==(i=e.charAt(1))||!t&&"|"==i)},gm=function(e){var t;return e.length>1&&fm(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},mm=function(e){var t=e.path,i=t.length;!i||"file"==e.scheme&&1==i&&fm(t[0],!0)||t.pop()},_m=function(e){return"."===e||"%2e"===e.toLowerCase()},vm={},Em={},Am={},ym={},Sm={},Cm={},bm={},Tm={},Im={},Rm={},wm={},Om={},km={},Nm={},Lm={},Pm={},Dm={},Mm={},xm={},Bm={},Um={},Fm=function(e,t,i,n){var r,o,s,a,c,l=i||vm,u=0,d="",h=!1,p=!1,f=!1;for(i||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(Xg,"")),t=t.replace(em,""),r=Md(t);u<=r.length;){switch(o=r[u],l){case vm:if(!o||!Qg.test(o)){if(i)return jg;l=Am;continue}d+=o.toLowerCase(),l=Em;break;case Em:if(o&&(Wg.test(o)||"+"==o||"-"==o||"."==o))d+=o.toLowerCase();else{if(":"!=o){if(i)return jg;d="",l=Am,u=0;continue}if(i&&(dm(e)!=y(um,d)||"file"==d&&(hm(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=d,i)return void(dm(e)&&um[e.scheme]==e.port&&(e.port=null));d="","file"==e.scheme?l=Nm:dm(e)&&n&&n.scheme==e.scheme?l=ym:dm(e)?l=Tm:"/"==r[u+1]?(l=Sm,u++):(e.cannotBeABaseURL=!0,e.path.push(""),l=xm)}break;case Am:if(!n||n.cannotBeABaseURL&&"#"!=o)return jg;if(n.cannotBeABaseURL&&"#"==o){e.scheme=n.scheme,e.path=n.path.slice(),e.query=n.query,e.fragment="",e.cannotBeABaseURL=!0,l=Um;break}l="file"==n.scheme?Nm:Cm;continue;case ym:if("/"!=o||"/"!=r[u+1]){l=Cm;continue}l=Im,u++;break;case Sm:if("/"==o){l=Rm;break}l=Mm;continue;case Cm:if(e.scheme=n.scheme,o==Ng)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query;else if("/"==o||"\\"==o&&dm(e))l=bm;else if("?"==o)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query="",l=Bm;else{if("#"!=o){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.path.pop(),l=Mm;continue}e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query,e.fragment="",l=Um}break;case bm:if(!dm(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,l=Mm;continue}l=Rm}else l=Im;break;case Tm:if(l=Im,"/"!=o||"/"!=d.charAt(u+1))continue;u++;break;case Im:if("/"!=o&&"\\"!=o){l=Rm;continue}break;case Rm:if("@"==o){h&&(d="%40"+d),h=!0,s=Md(d);for(var g=0;g<s.length;g++){var m=s[g];if(":"!=m||f){var _=lm(m,cm);f?e.password+=_:e.username+=_}else f=!0}d=""}else if(o==Ng||"/"==o||"?"==o||"#"==o||"\\"==o&&dm(e)){if(h&&""==d)return"Invalid authority";u-=Md(d).length+1,d="",l=wm}else d+=o;break;case wm:case Om:if(i&&"file"==e.scheme){l=Pm;continue}if(":"!=o||p){if(o==Ng||"/"==o||"?"==o||"#"==o||"\\"==o&&dm(e)){if(dm(e)&&""==d)return Gg;if(i&&""==d&&(hm(e)||null!==e.port))return;if(a=tm(e,d))return a;if(d="",l=Dm,i)return;continue}"["==o?p=!0:"]"==o&&(p=!1),d+=o}else{if(""==d)return Gg;if(a=tm(e,d))return a;if(d="",l=km,i==Om)return}break;case km:if(!qg.test(o)){if(o==Ng||"/"==o||"?"==o||"#"==o||"\\"==o&&dm(e)||i){if(""!=d){var v=parseInt(d,10);if(v>65535)return Hg;e.port=dm(e)&&v===um[e.scheme]?null:v,d=""}if(i)return;l=Dm;continue}return Hg}d+=o;break;case Nm:if(e.scheme="file","/"==o||"\\"==o)l=Lm;else{if(!n||"file"!=n.scheme){l=Mm;continue}if(o==Ng)e.host=n.host,e.path=n.path.slice(),e.query=n.query;else if("?"==o)e.host=n.host,e.path=n.path.slice(),e.query="",l=Bm;else{if("#"!=o){gm(r.slice(u).join(""))||(e.host=n.host,e.path=n.path.slice(),mm(e)),l=Mm;continue}e.host=n.host,e.path=n.path.slice(),e.query=n.query,e.fragment="",l=Um}}break;case Lm:if("/"==o||"\\"==o){l=Pm;break}n&&"file"==n.scheme&&!gm(r.slice(u).join(""))&&(fm(n.path[0],!0)?e.path.push(n.path[0]):e.host=n.host),l=Mm;continue;case Pm:if(o==Ng||"/"==o||"\\"==o||"?"==o||"#"==o){if(!i&&fm(d))l=Mm;else if(""==d){if(e.host="",i)return;l=Dm}else{if(a=tm(e,d))return a;if("localhost"==e.host&&(e.host=""),i)return;d="",l=Dm}continue}d+=o;break;case Dm:if(dm(e)){if(l=Mm,"/"!=o&&"\\"!=o)continue}else if(i||"?"!=o)if(i||"#"!=o){if(o!=Ng&&(l=Mm,"/"!=o))continue}else e.fragment="",l=Um;else e.query="",l=Bm;break;case Mm:if(o==Ng||"/"==o||"\\"==o&&dm(e)||!i&&("?"==o||"#"==o)){if(".."===(c=(c=d).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(mm(e),"/"==o||"\\"==o&&dm(e)||e.path.push("")):_m(d)?"/"==o||"\\"==o&&dm(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&fm(d)&&(e.host&&(e.host=""),d=d.charAt(0)+":"),e.path.push(d)),d="","file"==e.scheme&&(o==Ng||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",l=Bm):"#"==o&&(e.fragment="",l=Um)}else d+=lm(o,am);break;case xm:"?"==o?(e.query="",l=Bm):"#"==o?(e.fragment="",l=Um):o!=Ng&&(e.path[0]+=lm(o,om));break;case Bm:i||"#"!=o?o!=Ng&&("'"==o&&dm(e)?e.query+="%27":e.query+="#"==o?"%23":lm(o,om)):(e.fragment="",l=Um);break;case Um:o!=Ng&&(e.fragment+=lm(o,sm))}u++}},Vm=function(e){var t,i,n=_t(this,Vm,"URL"),r=arguments.length>1?arguments[1]:void 0,o=String(e),s=Bg(n,{type:"URL"});if(void 0!==r)if(r instanceof Vm)t=Ug(r);else if(i=Fm(t={},String(r)))throw TypeError(i);if(i=Fm(s,o,null,t))throw TypeError(i);var c=s.searchParams=new Mg,l=xg(c);l.updateSearchParams(s.query),l.updateURL=function(){s.query=String(c)||null},a||(n.href=Gm.call(n),n.origin=Hm.call(n),n.protocol=Qm.call(n),n.username=Wm.call(n),n.password=qm.call(n),n.host=$m.call(n),n.hostname=zm.call(n),n.port=Zm.call(n),n.pathname=Ym.call(n),n.search=Km.call(n),n.searchParams=Jm.call(n),n.hash=Xm.call(n))},jm=Vm.prototype,Gm=function(){var e=Ug(this),t=e.scheme,i=e.username,n=e.password,r=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,l=t+":";return null!==r?(l+="//",hm(e)&&(l+=i+(n?":"+n:"")+"@"),l+=rm(r),null!==o&&(l+=":"+o)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},Hm=function(){var e=Ug(this),t=e.scheme,i=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&dm(e)?t+"://"+rm(e.host)+(null!==i?":"+i:""):"null"},Qm=function(){return Ug(this).scheme+":"},Wm=function(){return Ug(this).username},qm=function(){return Ug(this).password},$m=function(){var e=Ug(this),t=e.host,i=e.port;return null===t?"":null===i?rm(t):rm(t)+":"+i},zm=function(){var e=Ug(this).host;return null===e?"":rm(e)},Zm=function(){var e=Ug(this).port;return null===e?"":String(e)},Ym=function(){var e=Ug(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Km=function(){var e=Ug(this).query;return e?"?"+e:""},Jm=function(){return Ug(this).searchParams},Xm=function(){var e=Ug(this).fragment;return e?"#"+e:""},e_=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(a&&se(jm,{href:e_(Gm,(function(e){var t=Ug(this),i=String(e),n=Fm(t,i);if(n)throw TypeError(n);xg(t.searchParams).updateSearchParams(t.query)})),origin:e_(Hm),protocol:e_(Qm,(function(e){var t=Ug(this);Fm(t,String(e)+":",vm)})),username:e_(Wm,(function(e){var t=Ug(this),i=Md(String(e));if(!pm(t)){t.username="";for(var n=0;n<i.length;n++)t.username+=lm(i[n],cm)}})),password:e_(qm,(function(e){var t=Ug(this),i=Md(String(e));if(!pm(t)){t.password="";for(var n=0;n<i.length;n++)t.password+=lm(i[n],cm)}})),host:e_($m,(function(e){var t=Ug(this);t.cannotBeABaseURL||Fm(t,String(e),wm)})),hostname:e_(zm,(function(e){var t=Ug(this);t.cannotBeABaseURL||Fm(t,String(e),Om)})),port:e_(Zm,(function(e){var t=Ug(this);pm(t)||(""==(e=String(e))?t.port=null:Fm(t,e,km))})),pathname:e_(Ym,(function(e){var t=Ug(this);t.cannotBeABaseURL||(t.path=[],Fm(t,e+"",Dm))})),search:e_(Km,(function(e){var t=Ug(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Fm(t,e,Bm)),xg(t.searchParams).updateSearchParams(t.query)})),searchParams:e_(Jm),hash:e_(Xm,(function(e){var t=Ug(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Fm(t,e,Um)):t.fragment=null}))}),Yt(jm,"toJSON",(function(){return Gm.call(this)}),{enumerable:!0}),Yt(jm,"toString",(function(){return Gm.call(this)}),{enumerable:!0}),Dg){var t_=Dg.createObjectURL,i_=Dg.revokeObjectURL;t_&&Yt(Vm,"createObjectURL",(function(e){return t_.apply(Dg,arguments)})),i_&&Yt(Vm,"revokeObjectURL",(function(e){return i_.apply(Dg,arguments)}))}yt(Vm,"URL"),Q({global:!0,forced:!Kf,sham:!a},{URL:Vm});var n_=M.URL;function r_(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}!function(){var t;function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,i){return e==Array.prototype||e==Object.prototype||(e[t]=i.value),e},o=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e];for(var i=0;i<t.length;++i){var n=t[i];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function s(e,t){if(t)e:{var i=o;e=e.split(".");for(var n=0;n<e.length-1;n++){var s=e[n];if(!(s in i))break e;i=i[s]}(t=t(n=i[e=e[e.length-1]]))!=n&&null!=t&&r(i,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}if(s("Symbol",(function(e){function t(e,t){this.A=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",n=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(i+(r||"")+"_"+n++,r)}})),s("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var s=o[t[n]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&r(s.prototype,e,{configurable:!0,writable:!0,value:function(){return a(i(this))}})}return e})),"function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var l;e:{var u={};try{u.__proto__={a:!0},l=u.a;break e}catch(e){}l=!1}n=l?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var d=n;function h(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function p(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function f(e,t){return e.h=3,{value:t}}function g(e){this.g=new h,this.G=e}function m(e,t,i,n){try{var r=t.call(e.g.j,i);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.m=!1,r;var o=r.value}catch(t){return e.g.j=null,e.g.s(t),_(e)}return e.g.j=null,n.call(e.g,o),_(e)}function _(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function v(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){p(e.g);var i=e.g.j;return i?m(e,"return"in i?i.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),_(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function E(e,t){return t=new v(new g(t)),d&&e.prototype&&d(t,e.prototype),t}if(h.prototype.o=function(e){this.v=e},h.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},h.prototype.return=function(e){this.l={return:e},this.h=this.u},g.prototype.o=function(e){return p(this.g),this.g.j?m(this,this.g.j.next,e,this.g.o):(this.g.o(e),_(this))},g.prototype.s=function(e){return p(this.g),this.g.j?m(this,this.g.j.throw,e,this.g.o):(this.g.s(e),_(this))},s("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var i=0,n=!1,r={next:function(){if(!n&&i<e.length){var r=i++;return{value:t(r,e[r]),done:!1}}return n=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var A=function(e,t){for(var i=0;i<e.length;i++)t(e[i])},y=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},S=function(e,t,i){return t instanceof Blob?(i=void 0!==i?String(i+""):"string"==typeof t.name?t.name:"blob",t.name===i&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],i)),[String(e),t]):[String(e),String(t)]},C=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},b="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,T=b.FormData,I=b.XMLHttpRequest&&b.XMLHttpRequest.prototype.send,R=b.Request&&b.fetch,w=b.navigator&&b.navigator.sendBeacon,O=b.Element&&b.Element.prototype,k=b.Symbol&&Symbol.toStringTag;k&&(Blob.prototype[k]||(Blob.prototype[k]="Blob"),"File"in b&&!File.prototype[k]&&(File.prototype[k]="File"));try{new File([],"")}catch(e){b.File=function(e,t,i){return e=new Blob(e,i||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(i&&void 0!==i.lastModified?new Date(i.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),k&&Object.defineProperty(e,k,{value:"File"}),e}}var N=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},L=function(e){this.i=[];var t=this;e&&A(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var i=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];A(i,(function(i){t.append(e.name,i)}))}else"select-multiple"===e.type||"select-one"===e.type?A(e.options,(function(i){!i.disabled&&i.selected&&t.append(e.name,i.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(i="textarea"===e.type?y(e.value):e.value,t.append(e.name,i))}))};if((t=L.prototype).append=function(e,t,i){C(arguments,2),this.i.push(S(e,t,i))},t.delete=function(e){C(arguments,1);var t=[];e=String(e),A(this.i,(function(i){i[0]!==e&&t.push(i)})),this.i=t},t.entries=function e(){var t,i=this;return E(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<i.i.length?e=f(e,i.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},t.forEach=function(e,t){C(arguments,1);for(var i=c(this),n=i.next();!n.done;n=i.next()){var r=c(n.value);n=r.next().value,r=r.next().value,e.call(t,r,n,this)}},t.get=function(e){C(arguments,1);var t=this.i;e=String(e);for(var i=0;i<t.length;i++)if(t[i][0]===e)return t[i][1];return null},t.getAll=function(e){C(arguments,1);var t=[];return e=String(e),A(this.i,(function(i){i[0]===e&&t.push(i[1])})),t},t.has=function(e){C(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},t.keys=function e(){var t,i,n,r,o=this;return E(e,(function(e){if(1==e.h&&(t=c(o),i=t.next()),3!=e.h)return i.done?void(e.h=0):(n=i.value,r=c(n),f(e,r.next().value));i=t.next(),e.h=2}))},t.set=function(e,t,i){C(arguments,2),e=String(e);var n=[],r=S(e,t,i),o=!0;A(this.i,(function(t){t[0]===e?o&&(o=!n.push(r)):n.push(t)})),o&&n.push(r),this.i=n},t.values=function e(){var t,i,n,r,o=this;return E(e,(function(e){if(1==e.h&&(t=c(o),i=t.next()),3!=e.h)return i.done?void(e.h=0):(n=i.value,(r=c(n)).next(),f(e,r.next().value));i=t.next(),e.h=2}))},L.prototype._asNative=function(){for(var e=new T,t=c(this),i=t.next();!i.done;i=t.next()){var n=c(i.value);i=n.next().value,n=n.next().value,e.append(i,n)}return e},L.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],i="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,n){return"string"==typeof e?t.push(i+N(y(n))+'"\r\n\r\n'+y(e)+"\r\n"):t.push(i+N(y(n))+'"; filename="'+N(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},L.prototype[Symbol.iterator]=function(){return this.entries()},L.prototype.toString=function(){return"[object FormData]"},O&&!O.matches&&(O.matches=O.matchesSelector||O.mozMatchesSelector||O.msMatchesSelector||O.oMatchesSelector||O.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),k&&(L.prototype[k]="FormData"),I){var P=b.XMLHttpRequest.prototype.setRequestHeader;b.XMLHttpRequest.prototype.setRequestHeader=function(e,t){P.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},b.XMLHttpRequest.prototype.send=function(e){e instanceof L?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),I.call(this,e)):I.call(this,e)}}R&&(b.fetch=function(e,t){return t&&t.body&&t.body instanceof L&&(t.body=t.body._blob()),R.call(this,e,t)}),w&&(b.navigator.sendBeacon=function(e,t){return t instanceof L&&(t=t._asNative()),w.call(this,e,t)}),b.FormData=L}}();let o_=1;function s_(e,t,i,n,r){o_+=1;const o={sid:i.sid,command:"convergeAllocateEdge",uid:"666",appId:i.appId,ts:Math.floor(Ma()/1e3),seq:o_,requestId:o_,version:Oc,cname:i.cname},s={service_name:t,json_body:ve(o)};let a,c,l=e[0];return Yd(async()=>{a=Ma();const e=await Wd(l,{data:s,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Ma()-a,0!==e.code){const t=new pl(ll.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:c});throw Rc.error(t.toString()),t}const i=JSON.parse(e.json_body);if(200!==i.code){var r;const e=new pl(ll.UNEXPECTED_RESPONSE,Je(r="live streaming app center error, code: ".concat(i.code,", reason: ")).call(r,i.reason),{code:i.code,responseTime:c});throw Rc.error(e.toString()),e}if(!i.servers||0===i.servers.length){const e=new pl(ll.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:i.code,responseTime:c});throw Rc.error(e.toString()),e}const o=function(e,t){var i;return{addressList:vo(i=e.servers).call(i,e=>{var i,n,r;return Je(i=Je(n=Je(r="wss://".concat(e.address.replace(/\./g,"-"),".")).call(r,jc("WORKER_DOMAIN"),":")).call(n,e.wss,"?serviceName=")).call(i,encodeURIComponent(t))}),workerToken:e.workerToken,vid:e.vid}}(i,t);return jc("LIVE_STREAMING_ADDRESS")&&(o.addressList=jc("LIVE_STREAMING_ADDRESS")instanceof Array?jc("LIVE_STREAMING_ADDRESS"):[jc("LIVE_STREAMING_ADDRESS")]),function(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=r_(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=r_(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}({},o,{responseTime:c})},(n,r)=>(rh.apworkerEvent(i.sid,{success:!0,sc:200,serviceName:t,responseDetail:ve(n.addressList),firstSuccess:0===r,responseTime:c,serverIp:e[r%e.length]}),!1),(n,r)=>(rh.apworkerEvent(i.sid,{success:!1,sc:n.data&&n.data.code||200,serviceName:t,responseTime:c,serverIp:e[r%e.length]}),!!(n.code!==ll.OPERATION_ABORTED&&n.code!==ll.UNEXPECTED_RESPONSE||n.data&&n.data.retry)&&(l=e[(r+1)%e.length],!0)),r)}let a_=1;function c_({url:e,areaCode:t},i,n,r){const o=Ma(),[s,a]=p_(i,t,[Rd.CHOOSE_SERVER]);let c=$d.networkState;return Yd(async()=>{c&&$d.networkState===Pu.OFFLINE&&$d.onlineWaiter&&await fo.race([$d.onlineWaiter,Ip(r&&r.maxRetryTimeout||zd.maxRetryTimeout)]),c=$d.networkState;const t=await Wd(e,{data:s,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);rh.reportResourceTiming(e,i.sid),u_(t,e,i,o,[Rd.CHOOSE_SERVER]);const a=vp(t,Rd.CHOOSE_SERVER);return d_(a),pp(a,e)},t=>(t&&rh.joinChooseServer(i.sid,{lts:o,succ:!0,csAddr:e,opid:a,serverList:t.gatewayAddrs,ec:null,cid:t.cid.toString(),uid:t.uid.toString(),csIp:t.csIp,unilbsServerIds:[Rd.CHOOSE_SERVER].toString()}),!1),t=>t.code!==ll.OPERATION_ABORTED&&(t.code===ll.CAN_NOT_GET_GATEWAY_SERVER?t.data.retry:(rh.joinChooseServer(i.sid,{lts:o,succ:!1,csAddr:e,serverList:null,opid:a,ec:t.code,csIp:t.data&&t.data.csIp,unilbsServerIds:[Rd.CHOOSE_SERVER].toString(),extend:ve({networkState:c})}),Rc.warning("[".concat(i.clientId,"] Choose server network error, retry"),t),!0)),r)}function l_({url:e,areaCode:t,serviceIds:i},n,r,o){const s=Ma(),[a,c]=p_(n,t,i);let l=void 0;return Yd(async()=>{l&&$d.networkState===Pu.OFFLINE&&$d.onlineWaiter&&await fo.race([$d.onlineWaiter,Ip(o&&o.maxRetryTimeout||zd.maxRetryTimeout)]),l=$d.networkState;const t=await Wd(e,{data:a,cancelToken:r,headers:{"Content-Type":"multipart/form-data;"}},!0);rh.reportResourceTiming(e,n.sid),u_(t,e,n,s,i);const c=vp(t,Rd.CHOOSE_SERVER),u=vp(t,"proxy5"===n.cloudProxyServer?Rd.CLOUD_PROXY_5:Rd.CLOUD_PROXY);return d_(c),{gatewayInfo:pp(c,e),proxyInfo:u,url:e}},t=>{var r;return t.gatewayInfo&&rh.joinChooseServer(n.sid,{lts:s,succ:!0,csAddr:e,serverList:t.gatewayInfo.gatewayAddrs,ec:null,opid:c,cid:t.gatewayInfo.cid.toString(),uid:t.gatewayInfo.uid.toString(),csIp:t.gatewayInfo.csIp,unilbsServerIds:i.toString()}),t.proxyInfo&&rh.joinWebProxyAP(n.sid,{lts:s,sucess:1,apServerAddr:e,turnServerAddrList:vo(r=t.proxyInfo.addresses).call(r,e=>e.ip).join(","),errorCode:null,eventType:n.cloudProxyServer,unilbsServerIds:i.toString()}),!1},t=>t.code!==ll.OPERATION_ABORTED&&(t.code===ll.CAN_NOT_GET_GATEWAY_SERVER?t.data.retry:(rh.joinWebProxyAP(n.sid,{lts:s,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:n.cloudProxyServer,unilbsServerIds:i.toString(),extend:ve({networkState:l})}),Rc.warning("[".concat(n.clientId,"] multi unilbs network error, retry"),t),!0)),o)}const u_=(e,t,i,n,r)=>{var o,s,a;const c=[];if(Ji(o=e.response_body).call(o,o=>{const s=o.buffer.code;if(0!==s){const a=ef(s),l={error:new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,a.desc,{retry:a.retry,csIp:e.detail[502]}),flag:o.buffer.flag};c.push(l),4096===l.flag?rh.joinChooseServer(i.sid,{lts:n,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:l.error.message,csIp:l.error.data&&l.error.data.csIp,unilbsServerIds:r.toString()}):1048576!==l.flag&&4194304!==l.flag||rh.joinWebProxyAP(i.sid,{lts:n,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:l.error.code,eventType:i.cloudProxyServer,unilbsServerIds:r.toString()})}}),c.length)throw Rc.warning(Je(s=Je(a="[".concat(i.clientId,"] multi unilbs ")).call(a,t," failed, ")).call(s,vo(c).call(c,e=>{var t,i;return Je(t=Je(i="flag: ".concat(e.flag,", message: ")).call(i,e.error.message,", retry: ")).call(t,e.error.data.retry)}).join(" | "))),new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,vo(c).call(c,e=>{var t;return Je(t="flag: ".concat(e.flag,", message: ")).call(t,e.error.message)}).join(" | "),{retry:!!Qo(c).call(c,e=>e.error.data.retry),csIp:e.detail[502]})},d_=e=>{if(e.addresses&&0===e.addresses.length&&0===e.code)throw new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(jc("GATEWAY_ADDRESS")&&jc("GATEWAY_ADDRESS").length>0){var t;Rc.debug("assign gateway address to",jc("GATEWAY_ADDRESS"));const i=vo(t=jc("GATEWAY_ADDRESS")).call(t,t=>({ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket}));e.addresses=i}},h_=(e,t)=>{if(e.response_body&&e.response_body.length){const t=e.response_body[0];if(0!==t.buffer.code){var i;const e=ef(t.buffer.code);throw new pl(ll.UPDATE_TICKET_FAILED,Je(i="[".concat(t.buffer.code,"]: ")).call(i,e.desc),{retry:e.retry})}return t.buffer.ticket}throw Rc.debug("update ticket request received ap response without response body:",t),new pl(ll.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},p_=(e,t,i)=>{var n;const r=Math.floor(Math.random()*10**12),o={appid:e.appId,client_ts:Ma(),opid:r,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:{6:e.stringUid,11:t,12:jc("USE_NEW_TOKEN")?"1":void 0},key:e.token,service_ids:i,uid:e.uid||0}}]};Ji(n=o.request_bodies).call(n,t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=ve({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))});const s=new FormData;return s.append("request",ve(o)),[s,r]},f_=(e,t)=>{var i;const n=Math.floor(Math.random()*10**12),r={appid:e.appId,client_ts:Ma(),opid:n,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:vo(i=e.apResponse.addresses).call(i,e=>({ip:e.ip,port:e.port}))}}]},o=new FormData;return o.append("request",ve(r)),[o,n]},g_=()=>{const e=jc("AREAS");return 0===e.length&&e.push("GLOBAL"),un(e).call(e,(e,t,i)=>{const n=m_(t);var r;return n?0===i?n:Je(r="".concat(e,",")).call(r,n):e},"")},m_=e=>{var t,i,n,r,o;return"OVERSEA"===e?Je(t=Je(i=Je(n=Je(r=Je(o="".concat(Tu.ASIA,",")).call(o,Tu.EUROPE,",")).call(r,Tu.AFRICA,",")).call(n,Tu.NORTH_AMERICA,",")).call(i,Tu.SOUTH_AMERICA,",")).call(t,Tu.OCEANIA):Tu[e]},__={GLOBAL:{ASIA:["CHINA","JAPAN","INDIA","KOREA"],EUROPE:[],NORTH_AMERICA:[],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},v_=on(__.GLOBAL),E_=["CHINA","NORTH_AMERICA","EUROPE","ASIA","JAPAN","INDIA","OCEANIA","SOUTH_AMERICA","AFRICA","KOREA"],A_=function(e,t){let i=[];if(ns(e).call(e,"GLOBAL")){const r=["GLOBAL","OVERSEA"],o=on(Iu);if("GLOBAL"===t)throw new pl(ll.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if("CHINA"===t)i=["OVERSEA"];else if(n=t,ns(v_).call(v_,n)){const e=__.GLOBAL[t]||[],n=[...r,t,...e];i=Gn(o).call(o,e=>!ns(n).call(n,e))}else if(function(e){let t=!1;return Ji(v_).call(v_,i=>{var n;ns(n=__.GLOBAL[i]).call(n,e)&&(t=!0)}),t}(t)){const e=function(e){let t;return Ji(v_).call(v_,i=>{var n;ns(n=__.GLOBAL[i]).call(n,e)&&(t=i)}),t}(t),n=[...r,e,t];i=Gn(o).call(o,e=>!ns(n).call(n,e))}else i=e;i=function(e){const t=[];return Ji(E_).call(E_,i=>{ns(e).call(e,i)&&t.push(i)}),Je(t).call(t,Gn(e).call(e,e=>!ns(E_).call(E_,e)))}(i)}else i=e;var n;return i};function y_(e){const t=rh.reportApiInvoke(null,{name:Nl.SET_AREA,options:e,tag:Ll.TRACER});try{var i;let t=[];if("string"==typeof e&&(t=[e]),hl(e)&&(Ji(e).call(e,e=>{if(!ns(bu).call(bu,e))throw new pl(ll.INVALID_PARAMS,"invalid area code")}),t=e),"[object Object]"===Object.prototype.toString.call(e)){const{areaCode:i,excludedArea:n}=e;if(!i)throw new pl(ll.INVALID_PARAMS,"area code is needed");let r=i;"string"==typeof i&&(r=[i]),t=n?A_(r,n):r}Vc("AREAS",t);const n=(e=>{const t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return vo(e).call(e,e=>{const i=Iu[e],n=on(i);n&&vo(n).call(n,e=>{var n;"CODE"!==e&&(t[e]=Je(n=t[e]).call(n,i[e]))})}),t})(t);vo(i=on(n)).call(i,e=>{Vc(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?n[e][0]:n[e])}),Rc.debug("set area success:",t.join(","))}catch(e){throw t.onError(e),e}t.onSuccess()}async function S_(e,t,i){const n=async function(e,t,i){var n,r;const o=vo(n=Uo(r=jc("WEBCS_DOMAIN")).call(r,0,jc("AJAX_REQUEST_CONCURRENT"))).call(n,t=>{var i;return{url:e.proxyServer?Je(i="https://".concat(e.proxyServer,"/ap/?url=")).call(i,t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:g_()}});let s=null;const a=[],c=async()=>await zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:n=>(Rc.debug("[".concat(e.clientId,"] Connect to choose_server:"),n.url),c_(n,e,t,i)),allFailedhandler:e=>{throw e[0]},promisesCollector:a}),l=async()=>{var n;if(await Ip(1e3),null!==s)return s;const r=vo(n=jc("WEBCS_DOMAIN_BACKUP_LIST")).call(n,t=>{var i;return{url:e.proxyServer?Je(i="https://".concat(e.proxyServer,"/ap/?url=")).call(i,t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:g_()}});return await zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:r,asyncMapHandler:n=>(Rc.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),n.url),c_(n,e,t,i)),allFailedhandler:e=>{throw e[0]},promisesCollector:a})};try{return s=await Pp([c(),l()]),a.length&&Ji(a).call(a,e=>e.cancel&&"function"==typeof e.cancel&&e.cancel()),s}catch(e){throw e[0]}}(e,t,i);return{gatewayInfo:await n}}async function C_(e,t,i,n){var r,o;if("disabled"===e.cloudProxyServer)return n?await S_(e,t,i):void 0;let s;if("443only"===e.cloudProxyServer||"normal"===e.cloudProxyServer){var a;let r;n?"normal"!==e.cloudProxyServer?[r,s]=await fo.all([T_(e,t,i),S_(e,t,i)]):(r=await T_(e,t,i),e.proxyServer=r.addresses[0],rh.setProxyServer(e.proxyServer),Rc.setProxyServer(e.proxyServer),s=await S_(e,t,i)):(s=void 0,"normal"!==e.cloudProxyServer?r=await T_(e,t,i):(r=await T_(e,t,i),e.proxyServer=r.addresses[0],rh.setProxyServer(e.proxyServer),Rc.setProxyServer(e.proxyServer))),e.turnServer={mode:"manual",servers:vo(a=r.addresses).call(a,t=>({turnServerURL:t,tcpport:"proxy3"===e.cloudProxyServer?void 0:r.serverResponse.tcpport?r.serverResponse.tcpport:Nc.tcpport,udpport:"proxy4"===e.cloudProxyServer?void 0:r.serverResponse.udpport?r.serverResponse.udpport:Nc.udpport,username:r.serverResponse.username||Nc.username,password:r.serverResponse.password||Nc.password,forceturn:"proxy4"!==e.cloudProxyServer&&"proxy5"!==e.cloudProxyServer,security:"proxy5"===e.cloudProxyServer}))}}else{const{proxyInfo:n,gatewayInfo:r}=await async function(e,t,i){var n,r;const o=jc("PROXY_SERVER_TYPE3"),s=(e,t)=>{var i;let n=o;return hl(n)&&(n=t%2==0?o[1]:o[0]),Je(i="https://".concat(n,"/ap/?url=")).call(i,e)},a=vo(n=Uo(r=jc("WEBCS_DOMAIN")).call(r,0,jc("AJAX_REQUEST_CONCURRENT"))).call(n,(t,i)=>({url:s("".concat(t,"/api/v2/transpond/webrtc?v=2"),i),areaCode:g_(),serviceIds:[Rd.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?Rd.CLOUD_PROXY_5:Rd.CLOUD_PROXY]}));let c=null;const l=[],u=async()=>await zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:a,asyncMapHandler:n=>(Rc.debug("[".concat(e.clientId,"] Connect to choose_server:"),n.url),l_(n,e,t,i)),allFailedhandler:e=>{throw e[0]},promisesCollector:l}),d=async()=>{var n;if(await Ip(1e3),null!==c)return c;const r=vo(n=jc("WEBCS_DOMAIN_BACKUP_LIST")).call(n,(e,t)=>({url:s("".concat(e,"/api/v2/transpond/webrtc?v=2"),t),areaCode:g_(),serviceIds:[11,18]}));return await zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:r,asyncMapHandler:n=>(Rc.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),n.url),l_(n,e,t,i)),allFailedhandler:e=>{throw e[0]},promisesCollector:l})};let h,p,f;try{({gatewayInfo:h,proxyInfo:p,url:f}=await Pp([u(),d()]))}catch(e){throw e[0]}if(l.length&&Ji(l).call(l,e=>e.cancel&&"function"==typeof e.cancel&&e.cancel()),!h||!p)throw new pl(ll.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(hl(o)&&f){const t=new n_(f).host;ns(o).call(o,t)&&(e.proxyServer=t,Rc.setProxyServer(t),rh.setProxyServer(t))}return c={gatewayInfo:h,proxyInfo:await Ep(p,h.uid)},c}(e,t,i);s={gatewayInfo:r},e.turnServer={mode:"manual",servers:vo(n).call(n,t=>({turnServerURL:t.address,tcpport:"proxy3"===e.cloudProxyServer?void 0:t.tcpport?t.tcpport:Nc.tcpport,udpport:"proxy4"===e.cloudProxyServer?void 0:t.udpport?t.udpport:Nc.udpport,username:t.username||Nc.username,password:t.password||Nc.password,forceturn:"proxy4"!==e.cloudProxyServer&&"proxy5"!==e.cloudProxyServer,security:"proxy5"===e.cloudProxyServer}))}}return Rc.debug(Je(r=Je(o="[".concat(e.clientId,"] set proxy server: ")).call(o,e.proxyServer,", mode: ")).call(r,e.cloudProxyServer)),s}async function b_(e,t,i,n){var r;const o=Uo(r=jc("ACCOUNT_REGISTER")).call(r,0,jc("AJAX_REQUEST_CONCURRENT"));let s=[];return s=t.proxyServer?vo(o).call(o,e=>{var i;return Je(i="https://".concat(t.proxyServer,"/ap/?url=")).call(i,e+"/api/v1")}):vo(o).call(o,e=>"https://".concat(e,"/api/v1")),(await async function(e,t,i,n,r){const o=Ma(),s={sid:i.sid,opid:10,appid:i.appId,string_uid:t};let a=e[0];const c=await Yd(()=>Wd(a+"".concat(-1===Lo(a).call(a,"?")?"?":"&","action=stringuid"),{data:s,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(i,n)=>{if(0===i.code){var r;if(i.uid<=0||i.uid>=Math.pow(2,32))throw Rc.error(Je(r="Invalid Uint Uid ".concat(t," => ")).call(r,i.uid),i),rh.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:ll.INVALID_UINT_UID_FROM_STRING_UID,extend:s}),new pl(ll.INVALID_UINT_UID_FROM_STRING_UID);return rh.reqUserAccount(s.sid,{lts:o,success:!0,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:null,extend:s}),!1}const c=ef(i.code);return c.retry&&(a=e[(n+1)%e.length]),rh.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:c.desc,extend:s}),c.retry},(t,i)=>t.code!==ll.OPERATION_ABORTED&&(rh.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:null,errorCode:t.code,extend:s}),a=e[(i+1)%e.length],!0),r);if(0!==c.code){const e=ef(c.code);throw new pl(ll.UNEXPECTED_RESPONSE,e.desc)}return c}(s,e,t,i,n)).uid}async function T_(e,t,i){var n,r;let o=Ma();const s=vo(n=jc("normal"===e.cloudProxyServer?"PROXY_CS":"WEBCS_DOMAIN")).call(n,t=>{var i;return e.proxyServer?Je(i="https://".concat(e.proxyServer,"/ap/?url=")).call(i,t+"/api/v1"):"https://".concat(t,"/api/v1")});if("proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer||"proxy5"===e.cloudProxyServer){const n=vo(s).call(s,e=>({url:e,areaCode:g_()}));let r=null;r=await zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:n,asyncMapHandler:n=>function({url:e,areaCode:t},i,n,r){const o=Ma(),s={opid:133,flag:"proxy5"===i.cloudProxyServer?4194304:1048576,ts:+new Date,key:i.token,cname:i.cname,sid:i.sid,detail:{6:i.stringUid,11:t},uid:i.uid||0};return Yd(async()=>await Wd(e,{data:s,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":69}}),t=>{var n;if(0===t.code)return rh.joinWebProxyAP(i.sid,{lts:o,sucess:1,apServerAddr:e,turnServerAddrList:vo(n=t.addresses).call(n,e=>e.ip).join(","),errorCode:null,eventType:i.cloudProxyServer}),!1;const r=ef(t.code);throw new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,r.desc,{retry:r.retry})},t=>{return t.code!==ll.OPERATION_ABORTED&&(t.code===ll.CAN_NOT_GET_GATEWAY_SERVER?(rh.joinWebProxyAP(s.sid,{lts:o,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:i.cloudProxyServer}),Rc.warning(Je(n=Je(r=Je(a="[".concat(i.clientId,"] proxy ap server ")).call(a,e," failed, message: ")).call(r,t.message,", retry: ")).call(n,t.data.retry)),t.data.retry):(rh.joinWebProxyAP(s.sid,{lts:o,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:i.cloudProxyServer}),!0));var n,r,a},r)}(n,e,t,i),allFailedhandler:()=>{throw Rc.error("[".concat(e.clientId,"] can not get proxy server after trying several times")),new pl(ll.CAN_NOT_GET_PROXY_SERVER)}});const o=r.addresses;if(!o||0===o.length)throw Rc.error("[".concat(e.clientId,"] can not get proxy server, empty proxy server list")),new pl(ll.CAN_NOT_GET_PROXY_SERVER,"empty proxy server list");return{addresses:vo(o).call(o,e=>e.ip),serverResponse:{tcpport:o[0].port||443,udpport:o[0].port||Nc.udpport,username:Nc.username,password:Nc.password}}}let a=null;a=await zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:n=>function(e,t,i,n){const r=Ma(),o={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,uid:t.uid,cname:t.cname,ts:Math.floor(Ma()/1e3),version:Oc,seq:0,requestId:1};return Yd(async()=>({res:await Wd(e,{data:{service_name:"webrtc_proxy",json_body:ve(o)},cancelToken:i,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}}),url:e}),e=>{if(!e.res.json_body)throw Rc.debug("[".concat(t.clientId,"] Get proxy server failed: no json_body")),new pl(ll.UNEXPECTED_RESPONSE,ve(e.res));const i=JSON.parse(e.res.json_body);var n,r;if(200!==i.code)throw Rc.debug(Je(n=Je(r="[".concat(t.clientId,"] Get proxy server failed: response code [")).call(r,i.code,"], reason [")).call(n,i.reason,"]")),new pl(ll.UNEXPECTED_RESPONSE,ve(e.res));return Rc.debug("[".concat(t.clientId,"] App return server length"),i.servers.length),!1},t=>t.code!==ll.OPERATION_ABORTED&&(rh.requestProxyAppCenter(o.sid,{lts:r,succ:!1,APAddr:e,workerManagerList:null,ec:t.code,response:t.message}),!0),n)}(n,e,t,i),allFailedhandler:()=>{throw Rc.error("[".concat(e.clientId,"] can not get proxy server after trying several times")),new pl(ll.CAN_NOT_GET_PROXY_SERVER)}});const c=JSON.parse(a.res.json_body),l=vo(r=c.servers).call(r,dp);if("443only"===e.cloudProxyServer)return{addresses:l,serverResponse:{tcpport:443,udpport:Nc.udpport,username:Nc.username,password:Nc.password}};rh.requestProxyAppCenter(e.sid,{lts:o,succ:!0,APAddr:a.url,workerManagerList:ve(l),ec:null,response:ve(a.res)}),o=Ma();const u=vo(l).call(l,n=>function(e,t,i,n){const r=Ma();let o=e;Is(e).call(e,"http")||(o="https://".concat(e,":4000/v2/machine"));const s={command:"request",gatewayType:"http",appId:t.appId,cname:t.cname,uid:(t.uid||"").toString(),sdkVersion:"2.3.1",sid:t.sid,seq:1,ts:Ma(),requestId:3,clientRequest:{appId:t.appId,cname:t.cname,uid:(t.uid||"").toString(),sid:t.sid}};return Yd(async()=>({res:await Wd(o,{data:s,cancelToken:i}),url:e}),e=>{if(!e.res.serverResponse)throw new pl(ll.UNEXPECTED_RESPONSE,"requeet worker manager server failed: serverResponse is undefined");return!1},t=>t.code!==ll.OPERATION_ABORTED&&(rh.requestProxyWorkerManager(s.sid,{lts:r,succ:!1,workerManagerAddr:e,ec:t.code,response:t.message}),!0),n)}(n,e,t,i));let d=null;try{d=await Pp(u)}catch(t){throw Rc.error("[".concat(e.clientId,"] can not get worker manager after trying several times")),new pl(ll.CAN_NOT_GET_PROXY_SERVER)}return Ji(u).call(u,e=>e.cancel()),rh.requestProxyWorkerManager(e.sid,{lts:o,succ:!0,workerManagerAddr:d.url,ec:null,response:ve(d.res)}),{addresses:[d.url],serverResponse:d.res.serverResponse}}async function I_(e,t,i){var n,r;const o=vo(n=Uo(r=jc("CDS_AP")).call(r,0,jc("AJAX_REQUEST_CONCURRENT"))).call(n,t=>{var i;return e.proxyServer?Je(i="https://".concat(e.proxyServer,"/ap/?url=")).call(i,t+"/api/v1"):"https://".concat(t,"/api/v1?action=config")}),s=vo(o).call(o,n=>function(e,t,i,n){const r=ma(),o={flag:64,cipher_method:0,features:{device:r.name,system:r.os,system_general:navigator.userAgent,vendor:t.appId,version:Oc,cname:t.cname,sid:t.sid,session_id:t.sid,detail:"",proxyServer:t.proxyServer}};return Yd(()=>Wd(e,{data:o,timeout:1e3,cancelToken:i,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,e=>e.code!==ll.OPERATION_ABORTED,n)}(n,e,t,i));let a=null,c=null,l={};try{a=await Pp(s)}catch(e){if(e.code===ll.OPERATION_ABORTED)throw e;c=e}if(Ji(s).call(s,e=>e.cancel()),rh.reportApiInvoke(e.sid,{name:Nl.REQUEST_CONFIG_DISTRIBUTE,options:{error:c,res:a}}).onSuccess(),a&&a.test_tags)try{l=function(e){if(!e.test_tags)return{};const t=e.test_tags,i=on(t),n={};return Ji(i).call(i,e=>{var i;const r=ks(i=Uo(e).call(e,4)).call(i),o=JSON.parse(t[e])[1];n[r]=o}),n}(a)}catch(e){}return l}async function R_(e,t,i,n){var r,o;const s=vo(r=Uo(o=jc("UAP_AP")).call(o,0,jc("AJAX_REQUEST_CONCURRENT"))).call(r,e=>{var i;return t.proxyServer?Je(i="https://".concat(t.proxyServer,"/ap/?url=")).call(i,e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")});return await s_(s,e,t,i,n)}async function w_(e,t,i){var n,r;const o=vo(n=Uo(r=jc("UAP_AP")).call(r,0,jc("AJAX_REQUEST_CONCURRENT"))).call(n,t=>{var i;return e.proxyServer?Je(i="https://".concat(e.proxyServer,"/ap/?url=")).call(i,t+"/api/v1?action=uap"):"https://".concat(t,"/api/v1?action=uap")}),s=vo(o).call(o,n=>function(e,t,i,n){const r={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:Ma(),version:Oc,cname:t.cname,uid:t.uid.toString(),requestId:a_,seq:a_};a_+=1;const o={service_name:"tele_channel",json_body:ve(r)};return Yd(async()=>{var t;const n=await Wd(e,{data:o,cancelToken:i,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==n.code){const e=new pl(ll.UNEXPECTED_RESPONSE,"cross channel ap error, code"+n.code,{retry:!0});throw Rc.error(e.toString()),e}const r=JSON.parse(n.json_body);if(200!==r.code){var s;const e=new pl(ll.UNEXPECTED_RESPONSE,Je(s="cross channel app center error, code: ".concat(r.code,", reason: ")).call(s,r.reason));throw Rc.error(e.toString()),e}if(!r.servers||0===r.servers.length){const e=new pl(ll.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw Rc.error(e.toString()),e}return{vid:r.vid,workerToken:r.workerToken,addressList:vo(t=r.servers).call(t,e=>{var t,i;return Je(t=Je(i="wss://".concat(e.address.replace(/\./g,"-"),".")).call(i,jc("WORKER_DOMAIN"),":")).call(t,e.wss)})}},void 0,e=>!!(e.code!==ll.OPERATION_ABORTED&&e.code!==ll.UNEXPECTED_RESPONSE||e.data&&e.data.retry),n)}(n,e,t,i));try{const e=await Pp(s);return Ji(s).call(s,e=>e.cancel()),e}catch(e){throw e[0]}}async function O_(e,t,i){let n=null;const r=[],o=async o=>{var s;const a=vo(s=jc(o?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN")).call(s,t=>{var i;return e.proxyServer?Je(i="https://".concat(e.proxyServer,"/ap/?url=")).call(i,t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2")});return o&&(await Ip(1e3),null!==n)?n:await zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:a,asyncMapHandler:n=>{var r;return Rc.debug(Je(r="[".concat(e.clientId,"] update ticket, Connect to ")).call(r,o?"backup":""," choose_server:"),n),function(e,t,i,n){const[r]=f_(t,[Rd.CHOOSE_SERVER]);let o=$d.networkState;return Yd(async()=>{o&&$d.networkState===Pu.OFFLINE&&$d.onlineWaiter&&await fo.race([$d.onlineWaiter,Ip(n&&n.maxRetryTimeout||zd.maxRetryTimeout)]),o=$d.networkState;const t=await Wd(e,{data:r,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0);return h_(t,e)},()=>!1,e=>e.code!==ll.OPERATION_ABORTED&&(e.code===ll.UPDATE_TICKET_FAILED?e.data.retry:(Rc.warning("[".concat(t.clientId,"] update ticket network error, retry"),e),!0)),n)}(n,e,t,i)},allFailedhandler:e=>{throw e[0]},promisesCollector:r})};try{return n=await Pp([o(!1),o(!0)]),r.length&&Ji(r).call(r,e=>e.cancel&&"function"==typeof e.cancel&&e.cancel()),n}catch(e){throw e[0]}}function k_(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function N_(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=k_(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=k_(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}class L_ extends Mu{constructor(){super(),this.retryConfig={timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4},this.mutex=new ah("config-distribute"),this.mutableParamsRead=!1}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},jc("CONFIG_DISTRIBUTE_INTERVAL"))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,rh.reportApiInvoke(null,{options:void 0,name:Nl.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Ll.TRACER}).onSuccess(ve(Hc))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void Rc.debug("[config-distribute] get config distribute interrupted have no joininfo");let e;const t=await this.mutex.lock();try{e=await I_(this.joinInfo,this.cancelToken,this.retryConfig),Rc.debug("[config-distribute] get config distribute",ve(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(e){const t=new pl(ll.NETWORK_RESPONSE_ERROR,e);Rc.warning("[config-distribute] ".concat(t.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&void 0!==t.uplink.max_bitrate&&void 0!==t.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(Ru.UPDATE_BITRATE_LIMIT,e):this.emit(Ru.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&N_({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t,i;const n=cl(t=Gn(i=on(e)).call(i,e=>/^webrtc_ng_global_parameter/.test(e))).call(t);for(let o=0;o<n.length;o++)for(let t=n.length-1;t>o;t--){const i=n[t];if("number"==typeof e[i].__priority){const r=e[i].__priority,o=n[t-1];if("number"==typeof e[o].__priority){if(!(r>e[o].__priority))continue;{const e=i;n[t]=n[t-1],n[t-1]=e}}else{const e=i;n[t]=n[t-1],n[t-1]=e}}}const r={};Ji(n).call(n,t=>{var i;const n=e[t],o=n.__expires;Ji(i=on(n)).call(i,e=>{"__priority"!==e&&"__expires"!==e&&!Object.prototype.hasOwnProperty.call(r,e)&&n[e]&&(r[e]=N_({value:n[e]},o&&{expires:o}))})});try{const e=ve(r),t=window.btoa(e);window.localStorage.setItem("websdk_ng_global_parameter",t),Rc.debug("Caching global parameters ".concat(e))}catch(e){Rc.error("Error caching global parameters:",e.message)}}}function P_(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function D_(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=P_(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=P_(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}class M_ extends Mu{constructor(e,t,i,n){super(),this.reconnectMode="retry",this.reqId=0,this.commandReqId=0,this.handleWebSocketOpen=()=>{this.reconnectMode="retry",this.startPingPong()},this.handleWebSocketMessage=e=>{if(!e.data)return;const t=JSON.parse(e.data);var i;t.requestId?this.emit(Je(i="@".concat(t.requestId,"-")).call(i,t.sid),t):this.serviceMode===ou.INJECT?this.emit(du.INJECT_STREAM_STATUS,t):(rh.workerEvent(this.spec.sid,{actionType:"status",serverCode:t.code,workerType:this.serviceMode===ou.TRANSCODE?1:2}),this.emit(du.PUBLISH_STREAM_STATUS,t))},this.spec=t,this.token=e,this.serviceMode=n,this.websocket=new Hf("live-streaming",i),this.websocket.on(ru.CONNECTED,this.handleWebSocketOpen),this.websocket.on(ru.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(ru.REQUEST_NEW_URLS,(e,t)=>{Dp(this,du.REQUEST_NEW_ADDRESS).then(e).catch(t)}),this.websocket.on(ru.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(e){return this.websocket.init(e)}async request(e,t,i,n){this.reqId+=1,"request"===e&&(this.commandReqId+=1);const r=this.commandReqId,o=this.reqId;if(!o||!this.websocket)throw new pl(ll.UNEXPECTED_ERROR);const s=D_({command:e,sdkVersion:"4.8.1"===Oc?"0.0.1":Oc,seq:o,requestId:o,allocate:i,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Ma()/1e3)},t);if("closed"===this.websocket.state)throw new pl(ll.WS_DISCONNECT);const a=()=>new fo((e,t)=>{this.websocket.once(ru.CLOSED,()=>t(new pl(ll.WS_ABORT))),this.websocket.once(ru.CONNECTED,e)});"connected"!==this.websocket.state&&await a(),s.clientRequest&&(s.clientRequest.workerToken=this.token);const c=new fo((e,t)=>{var i;const n=()=>{t(new pl(ll.WS_ABORT))};this.websocket.once(ru.RECONNECTING,n),this.websocket.once(ru.CLOSED,n),this.once(Je(i="@".concat(o,"-")).call(i,this.spec.sid),t=>{e(t)})});n&&rh.workerEvent(this.spec.sid,D_({},n,{requestId:r,actionType:"request",payload:ve(t.clientRequest),serverCode:0,code:0}));const l=Ma();this.websocket.sendMessage(s);let u=null;try{u=await c}catch(n){if("closed"===this.websocket.state)throw n;return await a(),await this.request(e,t,i)}return n&&rh.workerEvent(this.spec.sid,D_({},n,{requestId:r,actionType:"response",payload:ve(u.serverResponse),serverCode:u.code,success:200===u.code,responseTime:Ma()-l})),200!==u.code&&this.handleResponseError(u),u}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const e="4.8.1"===Oc?"0.0.1":Oc;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Ma()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case pu.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void Rc.warning("live stream response already exists stream");case pu.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case pu.LIVE_STREAM_RESPONSE_BAD_STREAM:case pu.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new pl(ll.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case pu.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case pu.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new pl(ll.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case pu.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const t=new pl(ll.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(du.WARNING,t,e.serverResponse.url)}case pu.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const t=new pl(ll.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(du.WARNING,t,e.serverResponse.url)}case pu.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case pu.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new pl(ll.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case pu.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const t=new pl(ll.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(du.WARNING,t,e.serverResponse.url)}case pu.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case pu.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case pu.LIVE_STREAM_RESPONSE_WORKER_LOST:case pu.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case pu.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case pu.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case pu.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case pu.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case pu.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new pl(ll.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(Np)},6e3)}}function x_(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function B_(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=x_(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=x_(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}class U_ extends Mu{constructor(e,t=zd,i=zd){super(),this.retryTimeout=1e4,this.streamingTasks=new Mi,this.isStartingStreamingTask=!1,this.taskMutex=new ah("live-streaming"),this.cancelToken=Sc.CancelToken.source(),this.injectConfig=B_({},uu),this.injectLoopTimes=0,this.lastTaskId=1,this.statusError=new Mi,this.spec=e,this.httpRetryConfig=i,this.wsRetryConfig=t}async setTranscodingConfig(e){var t;const i=B_({},lu,{},e);var n,r;66!==i.videoCodecProfile&&77!==i.videoCodecProfile&&100!==i.videoCodecProfile&&(Rc.debug(Je(n="[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ")).call(n,i.videoCodecProfile," -> 100")),i.videoCodecProfile=100),i.transcodingUsers||(i.transcodingUsers=i.userConfigs),i.transcodingUsers&&(i.transcodingUsers=vo(r=i.transcodingUsers).call(r,e=>B_({},su,{},e,{zOrder:e.zOrder?e.zOrder+1:1}))),function(e){var t,i;yl(e.width)||ml(e.width,"config.width",0,1e4),yl(e.height)||ml(e.height,"config.height",0,1e4),yl(e.videoBitrate)||ml(e.videoBitrate,"config.videoBitrate",1,1e6),yl(e.videoFrameRate)||ml(e.videoFrameRate,"config.videoFrameRate"),yl(e.lowLatency)||fl(e.lowLatency,"config.lowLatency"),yl(e.audioSampleRate)||gl(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),yl(e.audioBitrate)||ml(e.audioBitrate,"config.audioBitrate",1,128),yl(e.audioChannels)||gl(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),yl(e.videoGop)||ml(e.videoGop,"config.videoGop"),yl(e.videoCodecProfile)||gl(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),yl(e.userCount)||ml(e.userCount,"config.userCount",0,17),yl(e.backgroundColor)||ml(e.backgroundColor,"config.backgroundColor",0,16777215),yl(e.userConfigExtraInfo)||_l(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&!yl(e.transcodingUsers)&&(vl(e.transcodingUsers,"config.transcodingUsers"),Ji(t=e.transcodingUsers).call(t,(e,t)=>{Al(e.uid),yl(e.x)||ml(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),yl(e.y)||ml(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),yl(e.width)||ml(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),yl(e.height)||ml(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),yl(e.zOrder)||ml(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),yl(e.alpha)||ml(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)})),yl(e.watermark)||cu(e.watermark,"watermark"),yl(e.backgroundImage)||cu(e.backgroundImage,"backgroundImage"),e.images&&!yl(e.images)&&(vl(e.images,"config.images"),Ji(i=e.images).call(i,(e,t)=>{cu(e,"images[".concat(t,"]"))}))}(i);const o=[];var s,a;i.images&&o.push(...vo(s=i.images).call(s,e=>B_({},au,{},e,{zOrder:255}))),i.backgroundImage&&(o.push(B_({},au,{},i.backgroundImage,{zOrder:0})),delete i.backgroundImage),i.watermark&&(o.push(B_({},au,{},i.watermark,{zOrder:255})),delete i.watermark),i.images=o,i.transcodingUsers&&(i.userConfigs=vo(a=i.transcodingUsers).call(a,e=>B_({},e)),i.userCount=i.transcodingUsers.length,delete i.transcodingUsers);const c=vo(t=i.userConfigs||[]).call(t,e=>"number"==typeof e.uid?fo.resolve(e.uid):b_(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig)),l=await fo.all(c);if(Ji(l).call(l,(e,t)=>{i.userConfigs&&i.userConfigs[t]&&(i.userConfigs[t].uid=e)}),this.transcodingConfig=i,this.connection)try{var u,d,h;const e=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:vo(u=Bd(Jp(d=this.streamingTasks).call(d))).call(u,e=>e.taskId).join("#")});Rc.debug(Je(h="[".concat(this.spec.clientId,"] update live transcoding config success, code: ")).call(h,e.code,", config:"),ve(this.transcodingConfig))}catch(e){var p;if(!e.data||!e.data.retry)throw e;e.data.changeAddress&&this.connection.tryNextAddress(),Ji(p=this.streamingTasks).call(p,t=>{Rc.warning("[".concat(this.spec.clientId,"] live streaming receive error"),e.toString(),"try to republish",t.url),this.startLiveStreamingTask(t.url,t.mode,e).then(()=>{var e;Rc.debug(Je(e="[".concat(this.spec.clientId,"] live streaming republish ")).call(e,t.url," success"))}).catch(e=>{Rc.error("[".concat(this.spec.clientId,"] live streaming republish failed"),t.url,e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t.url,e)})})}}setInjectStreamConfig(e,t){this.injectConfig=nn({},this.injectConfig,e),this.injectLoopTimes=t}async startLiveStreamingTask(e,t,i){var n,r,o,s;if(Qo(n=Bd(Jp(r=this.streamingTasks).call(r))).call(n,e=>e.mode===ou.INJECT)&&t===ou.INJECT)return new pl(ll.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&t===ou.TRANSCODE)throw new pl(ll.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let a={command:"PublishStream",ts:Ma(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};Rc.debug(Je(o=Je(s="[".concat(this.spec.clientId,"] start live streaming ")).call(s,e,", mode: ")).call(o,t));const c=await this.taskMutex.lock();if(!this.connection&&i)return void c();if(this.streamingTasks.get(e)&&!i)return c(),new pl(ll.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(e){throw c(),e}switch(t){case ou.TRANSCODE:a.transcodingConfig=B_({},this.transcodingConfig);break;case ou.RAW:break;case ou.INJECT:a={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Ma(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(a.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const l=this.lastTaskId++;try{var u;const n=new fo((t,n)=>{Ip(this.retryTimeout).then(()=>{if(i)return n(i);const t=this.statusError.get(e);return t?(this.statusError.delete(e),n(t)):void 0})}),r=await fo.race([this.connection.request("request",{clientRequest:a},!0,{url:e,command:"PublishStream",workerType:t===ou.TRANSCODE?1:2,requestByUser:!i,tid:l.toString()}),n]);this.isStartingStreamingTask=!1,Rc.debug(Je(u="[".concat(this.spec.clientId,"] live streaming started, code: ")).call(u,r.code)),this.streamingTasks.set(e,{clientRequest:a,mode:t,url:e,taskId:l}),c()}catch(n){if(c(),this.isStartingStreamingTask=!1,!n.data||!n.data.retry||i)throw n;return n.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,n)):await this.startLiveStreamingTask(e,t,n)}}stopLiveStreamingTask(e){return new fo((t,i)=>{const n=this.streamingTasks.get(e);if(!n||!this.connection)return new pl(ll.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const r=n.mode;n.abortTask=()=>{Rc.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:r===ou.INJECT?"UninjectStream":"UnpublishStream",url:n.url}},!1,{url:e,command:"UnPublishStream",workerType:r===ou.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(i=>{var n;Rc.debug(Je(n="[".concat(this.spec.clientId,"] stop live streaming success, code: ")).call(n,i.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&r!==ou.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),t(),r===ou.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(5,this.spec.uid,e)}).catch(i)})}async controlInjectStream(e,t,i,n){const r=this.streamingTasks.get(e);if(!r||!this.connection||r.mode!==ou.INJECT)throw new pl(ll.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:t,audioVolume:i,position:n}})).serverResponse}resetAllTask(){var e;const t=Bd(Jp(e=this.streamingTasks).call(e));this.terminate();for(const i of t)this.startLiveStreamingTask(i.url,i.mode).catch(e=>{this.onLiveStreamError&&this.onLiveStreamError(i.url,e)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Mi,this.isStartingStreamingTask=!1,this.statusError=new Mi,this.cancelToken=Sc.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new pl(ll.UNEXPECTED_ERROR,"live streaming connection has already connected");const t=await Dp(this,hu.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new M_(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(du.WARNING,(e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)),this.connection.on(du.PUBLISH_STREAM_STATUS,e=>this.handlePublishStreamServer(e)),this.connection.on(du.INJECT_STREAM_STATUS,e=>this.handleInjectStreamServerStatus(e)),this.connection.on(du.REQUEST_NEW_ADDRESS,(t,i)=>{if(!this.connection)return i(new pl(ll.UNEXPECTED_ERROR,"can not get new live streaming address list"));Dp(this,hu.REQUEST_WORKER_MANAGER_LIST,e).then(e=>{this.uapResponse=e,t(e.addressList)}).catch(i)}),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){const t=e.serverStatus&&e.serverStatus.url||"empty_url",i=this.streamingTasks.get(t),n=e.reason;switch(e.code){case pu.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case pu.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case pu.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case pu.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const n=new pl(ll.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(i)return Rc.error(n.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,n);if(!this.isStartingStreamingTask)return;this.statusError.set(t,n)}case pu.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const e=new pl(ll.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,n);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)}case pu.LIVE_STREAM_RESPONSE_WORKER_LOST:case pu.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var r;if(!this.connection)return;this.connection.tryNextAddress();const t=Bd(Jp(r=this.streamingTasks).call(r));for(const i of t)i.abortTask?i.abortTask():(Rc.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",i.url),this.startLiveStreamingTask(i.url,i.mode,new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then(()=>{Rc.debug("[".concat(this.spec.clientId,"] republish live stream success"),i.url)}).catch(e=>{Rc.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(i.url,e)}));return}}}handleInjectStreamServerStatus(e){const t=Number(e.uid),i=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(0,t,i));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(1,t,i),void this.streamingTasks.delete(i);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(2,t,i),void this.streamingTasks.delete(i);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(10,t,i),void this.streamingTasks.delete(i);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(3,t,i),void this.streamingTasks.delete(i);default:return void Rc.debug("inject stream server status",e)}}hasUrl(e){return this.streamingTasks.has(e)}}class F_{constructor(){this.destChannelMediaInfos=new Mi}setSrcChannelInfo(e){Su(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){Su(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){El(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function V_(e){if(!(e instanceof F_))return new pl(ll.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const t=e.getSrcChannelMediaInfo(),i=e.getDestChannelMediaInfo();return t?0===i.size?new pl(ll.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new pl(ll.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class j_ extends Mu{constructor(e,t,i){super(),this.requestId=1,this.onOpen=()=>{this.emit("open"),this.startHeartBeatCheck()},this.onClose=e=>{this.emit("close"),this.dispose()},this.onMessage=e=>{const t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(this.emit("status",t.serverStatus),void this.emit(t.serverStatus.command,t.serverStatus)):void 0;this.emit("req_".concat(t.requestId),t)},this.joinInfo=e,this.clientId=t,this.ws=new Hf("cross-channel-".concat(this.clientId),i),this.ws.on(ru.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(ru.CONNECTED,this.onOpen),this.ws.on(ru.ON_MESSAGE,this.onMessage),this.ws.on(ru.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(e){const t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new fo((t,i)=>{const n=window.setTimeout(()=>{i(new pl(ll.TIMEOUT,"wait status timeout, status: ".concat(e)))},5e3);this.once(e,r=>{window.clearTimeout(n),r.state&&0!==r.state?i(new pl(ll.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)}),this.once("dispose",()=>{window.clearTimeout(n),i(new pl(ll.WS_ABORT))})})}async request(e){if("closed"===this.ws.state)throw new pl(ll.WS_DISCONNECT);const t=()=>new fo((e,t)=>{this.ws.once(ru.CLOSED,()=>t(new pl(ll.WS_ABORT))),this.ws.once(ru.CONNECTED,e)});"connected"!==this.ws.state&&await t();const i=this.sendMessage(e),n=new fo((e,t)=>{const n=()=>{t(new pl(ll.WS_ABORT))};this.ws.once(ru.RECONNECTING,n),this.ws.once(ru.CLOSED,n),this.once("req_".concat(i),e),Ip(3e3).then(()=>{this.removeAllListeners("req_".concat(i)),this.ws.off(ru.RECONNECTING,n),this.ws.off(ru.CLOSED,n),t(new pl(ll.TIMEOUT,"cross channel ws request timeout"))})}),r=await n;if(!r||200!==r.code)throw new pl(ll.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(ve(r)));return r}async connect(e){this.ws.removeAllListeners(ru.REQUEST_NEW_URLS),this.ws.on(ru.REQUEST_NEW_URLS,t=>{t(e)}),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){const t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class G_ extends Mu{constructor(e,t,i,n){super(),this.cancelToken=Sc.CancelToken.source(),this.requestId=0,this._state="RELAY_STATE_IDLE",this.errorCode="RELAY_OK",this.onStatus=e=>{var t;Rc.debug(Je(t="[".concat(this.clientId,"] ChannelMediaStatus: ")).call(t,ve(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&this.emit("event","PACKET_RECEIVED_AUDIO_FROM_SRC"),"onVideoPacketReceived"===e.command&&this.emit("event","PACKET_RECEIVED_VIDEO_FROM_SRC"),"onSrcTokenPrivilegeDidExpire"===e.command&&(this.errorCode="SRC_TOKEN_EXPIRED",this.state="RELAY_STATE_FAILURE"),"onDestTokenPrivilegeDidExpire"===e.command&&(this.errorCode="DEST_TOKEN_EXPIRED",this.state="RELAY_STATE_FAILURE"))},this.onReconnect=async()=>{Rc.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event","NETWORK_DISCONNECTED"),this.state="RELAY_STATE_IDLE",this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(e=>{"RELAY_STATE_IDLE"!==this.state&&(Rc.error("auto restart channel media relay failed",e.toString()),this.errorCode="SERVER_CONNECTION_LOST",this.state="RELAY_STATE_FAILURE")})},this.joinInfo=e,this.clientId=t,this.signal=new j_(this.joinInfo,this.clientId,i),this.httpRetryConfig=n}set state(e){e!==this._state&&("RELAY_STATE_FAILURE"!==e&&(this.errorCode="RELAY_OK"),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}async startChannelMediaRelay(e){if("RELAY_STATE_IDLE"!==this.state)throw new pl(ll.INVALID_OPERATION);this.state="RELAY_STATE_CONNECTING",await this.connect(),Rc.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(e){if(e.data&&e.data.serverResponse&&"SetSourceChannel"===e.data.serverResponse.command)throw new pl(ll.CROSS_CHANNEL_FAILED_JOIN_SRC);if(e.data&&e.data.serverResponse&&"SetDestChannelStatus"===e.serverResponse.command)throw new pl(ll.CROSS_CHANNEL_FAILED_JOIN_DEST);if(e.data&&e.data.serverResponse&&"StartPacketTransfer"===e.serverResponse.command)throw new pl(ll.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw e}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if("RELAY_STATE_RUNNING"!==this.state)throw new pl(ll.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),Rc.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state="RELAY_STATE_IDLE",this.dispose()}dispose(){Rc.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Sc.CancelToken.source(),this.state="RELAY_STATE_IDLE",this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const e=await w_(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event","NETWORK_CONNECTED"),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){const t=this.genMessage(gu.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),Rc.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const i=this.genMessage(gu.SetSdkProfile,e);await this.signal.request(i),Rc.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const n=this.genMessage(gu.SetSourceChannel,e);await this.signal.request(n),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event","PACKET_JOINED_SRC_CHANNEL"),Rc.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const r=this.genMessage(gu.SetSourceUserId,e);await this.signal.request(r),Rc.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const o=this.genMessage(gu.SetDestChannel,e);await this.signal.request(o),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event","PACKET_JOINED_DEST_CHANNEL"),Rc.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const s=this.genMessage(gu.StartPacketTransfer,e);await this.signal.request(s),this.emit("event","PACKET_SENT_TO_DEST_CHANNEL"),this.state="RELAY_STATE_RUNNING",Rc.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))}async sendUpdateMessage(e){const t=this.genMessage(gu.UpdateDestChannel,e);await this.signal.request(t),this.emit("event","PACKET_UPDATE_DEST_CHANNEL"),Rc.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const e=this.genMessage(gu.StopPacketTransfer);await this.signal.request(e),Rc.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){const i=[],n=[],r=[];this.requestId+=1;const o={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:Oc,sid:this.joinInfo.sid,ts:Ma(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.8.1"===o.sdkVersion&&(o.sdkVersion="0.0.1");let s=null,a=null;switch(e){case gu.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case gu.SetSourceChannel:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new pl(ll.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceChannel",uid:"0",channelName:a.channelName,token:a.token||this.joinInfo.appId},o;case gu.SetSourceUserId:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new pl(ll.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceUserId",uid:a.uid+""},o;case gu.SetDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new pl(ll.UNEXPECTED_ERROR,"can not find dest config");return Ji(s).call(s,e=>{i.push(e.channelName),n.push(e.uid+""),r.push(e.token||this.joinInfo.appId)}),o.clientRequest={command:"SetDestChannel",channelName:i,uid:n,token:r},o;case gu.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case gu.Reconnect:return o.clientRequest={command:"Reconnect"},o;case gu.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case gu.UpdateDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new pl(ll.UNEXPECTED_ERROR,"can not find dest config");return Ji(s).call(s,e=>{i.push(e.channelName),n.push(e.uid+""),r.push(e.token||this.joinInfo.appId)}),o.clientRequest={command:"UpdateDestChannel",channelName:i,uid:n,token:r},o}return o}}class H_{constructor(e){this.freezeTimeCounterList=[],this.timeUpdatedCount=0,this.freezeTime=0,this.playbackTime=0,this.lastTimeUpdatedTime=0,this._videoElementStatus=dl.NONE,this.isGettingVideoDimensions=!1,this.handleVideoEvents=e=>{switch(e.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=dl.PLAYING;break;case"loadeddata":this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded();break;case"canplay":this.videoElementStatus=dl.CANPLAY;break;case"stalled":this.videoElementStatus=dl.STALLED;break;case"suspend":this.videoElementStatus=dl.SUSPEND;break;case"pause":this.videoElementStatus=dl.PAUSED,!Ra()&&!Na()&&this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(Rc.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=dl.WAITING;break;case"abort":this.videoElementStatus=dl.ABORT;break;case"ended":this.videoElementStatus=dl.ENDED;break;case"emptied":this.videoElementStatus=dl.EMPTIED;break;case"timeupdate":{const e=Ma();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=e);const t=e-this.lastTimeUpdatedTime;for(this.lastTimeUpdatedTime=e,t>500&&(this.freezeTime+=t),this.playbackTime+=t;this.playbackTime>=6e3;)this.playbackTime-=6e3,this.freezeTimeCounterList.push(Math.min(6e3,this.freezeTime)),this.freezeTime=Math.max(0,this.freezeTime-6e3);break}}},this.startGetVideoDimensions=()=>{const e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement&&this.videoElement.videoWidth*this.videoElement.videoHeight>4)return Rc.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);Fa(e,500)};!this.isGettingVideoDimensions&&e()},this.autoResumeAfterInterruption=()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===ph.curState&&(Oa()?(Rc.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()):ka()?(Rc.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.load(),this.videoElement.play()):(Rc.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 14")),this.videoElement.play()))},this.autoResumeAfterInterruptionOnIOS15=()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(Oa()?(Rc.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()):ka()&&(Rc.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.load(),this.videoElement.play()))},this.slot=e.element,this.trackId=e.trackId,this.updateConfig(e),ph.on(uh.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),ph.on(uh.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){var t,i;e!==this._videoElementStatus&&(Rc.debug(Je(t=Je(i="[".concat(this.trackId,"] video-element-status change ")).call(i,this._videoElementStatus," => ")).call(t,e)),this._videoElementStatus=e)}updateConfig(e){this.config=e,this.trackId=e.trackId;const t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){if(this.videoElement){const t=this.videoElement.play();t&&t.catch&&t.catch(t=>{e&&rh.autoplayFailed(e,"video",t.message,this.trackId),"NotAllowedError"===t.name?(Rc.warning("detected video element autoplay failed",t),this.handleAutoPlayFailed()):Rc.warning("[".concat(this.trackId,"] play warning: "),t)});const i=ma();("Safari"===i.name&&15===Number(i.version)||wa())&&t&&t.finally&&t.finally(()=>{this.config.mirror&&this.videoElement&&(this.videoElement.style.transform="rotateY(180deg)")})}}getCurrentFrame(){if(!this.videoElement)return new ImageData(2,2);const e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const t=e.getContext("2d");if(!t)return Rc.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);const i=t.getImageData(0,0,e.width,e.height);return e.remove(),i}destroy(){if(ph.off(uh.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),ph.off(uh.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}this.freezeTimeCounterList=[]}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}createVideoElement(){this.videoElement||(this.videoElementStatus=dl.INIT,this.videoElement=document.createElement("video"),this.videoElement.onerror=()=>this.videoElementStatus=dl.ERROR,this.container&&this.container.appendChild(this.videoElement),Ji(Q_).call(Q_,e=>{this.videoElement&&this.videoElement.addEventListener(e,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{!document.getElementById("video_".concat(this.trackId))&&this.videoElement&&(this.videoElementStatus=dl.DESTROYED)},1e3)),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0";const e=ma();"Safari"===e.name&&15===Number(e.version)||wa()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Ia()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Ia()&&this.videoElement.load());const t=this.videoElement.play();void 0!==t&&t.catch(e=>{Rc.debug("[".concat(this.trackId,"] playback interrupted"),e.toString())})}removeVideoElement(){if(this.videoElement){Ji(Q_).call(Q_,e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=void 0,this.videoElementStatus=dl.NONE}}handleAutoPlayFailed(){const e=ma();if(this.videoElement){const t=i=>{i.preventDefault(),this.videoElement&&(this.videoElement.play().then(()=>{var e;Rc.debug(Je(e="[".concat(this.trackId,"] Video element for trackId:")).call(e,this.trackId," autoplay resumed."))}).catch(e=>{Rc.error(e)}),"Android"!==e.os||"Chrome"!==e.name&&e.name!==ha.WECHAT?(document.body.removeEventListener("touchstart",t,!0),document.body.removeEventListener("mousedown",t,!0)):document.body.removeEventListener("click",t,!0))};"Android"!==e.os||"Chrome"!==e.name&&e.name!==ha.WECHAT?(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0)):document.body.addEventListener("click",t,!0),Xd()}}getVideoElement(){return this.videoElement}getContainerElement(){return this.container}}const Q_=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate"];function W_(e,t,i){const n=e.createShader(i);if(!n)return new pl(ll.WEBGL_INTERNAL_ERROR,"can not create shader").throw();if(e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(n);return e.deleteShader(n),new pl(ll.WEBGL_INTERNAL_ERROR,"error compiling shader:"+t).throw()}return n}function q_(e,t,i,n){const r=[];for(let o=0;o<t.length;++o){const i=0===o?e.VERTEX_SHADER:e.FRAGMENT_SHADER;r.push(W_(e,t[o],i))}return function(e,t,i,n){const r=e.createProgram();if(!r)throw new pl(ll.WEBGL_INTERNAL_ERROR,"can not create webgl program");if(Ji(t).call(t,t=>{e.attachShader(r,t)}),i&&Ji(i).call(i,(t,i)=>{e.bindAttribLocation(r,n?n[i]:i,t)}),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS)){const t=e.getProgramInfoLog(r);throw e.deleteProgram(r),new pl(ll.WEBGL_INTERNAL_ERROR,"error in program linking:"+t)}return r}(e,r,i,n)}var $_;!document.documentMode&&window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=($_=HTMLCanvasElement.prototype.getContext,function(){let e=arguments;const t=e[0];return"webgl"===t&&(e=Uo([]).call(arguments),e[0]="experimental-webgl"),$_.apply(null,e)}));const z_=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function Z_(e){const t=new Uint8Array([99,114,121,112,116,105,105]),i=t.length,n=e,r=n.length,o=new Uint8Array(r),s=new Uint8Array(256);for(let d=0;d<256;d++)s[d]=d;let a=0;for(let d=0;d<256;d++)a=(a+s[d]+t[d%i])%256,[s[d],s[a]]=[s[a],s[d]];let c,l=0;a=0;for(let d=0;d<0+r;d++)l=(l+1)%256,a=(a+s[l])%256,[s[l],s[a]]=[s[a],s[l]],c=s[(s[l]+s[a])%256],d>=0&&(o[d-0]=n[d-0]^c);const u=String.fromCharCode.apply(null,Bd(o));return Function("var winSize = 5; return `"+u+"`")()}function Y_(e,t){const i=Z_(t),n=q_(e,[Z_(z_),i]);{const t=e.getAttribLocation(n,"a_position"),i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(t);const r=2,o=e.FLOAT,s=!1,a=0,c=0;e.vertexAttribPointer(t,r,o,s,a,c)}{const t=e.getAttribLocation(n,"a_texCoord"),i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(t);const r=2,o=e.FLOAT,s=!1,a=0,c=0;e.vertexAttribPointer(t,r,o,s,a,c)}return n}const K_=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];class J_{constructor(e,t){this.gl=e,this.kernel=t||K_,this.program=Y_(this.gl,this.kernel)}setUniforms(){const e=this.gl.getUniformLocation(this.program,"u_flipY");this.gl.uniform1f(e,1)}}class X_ extends J_{constructor(e,t,i,n){super(e,t),this.denoiseLevel=5,this.xOffset=1/i,this.yOffset=1/n}setUniforms(){const e=this.gl.getUniformLocation(this.program,"u_flipY"),t=this.gl.getUniformLocation(this.program,"u_singleStepOffset"),i=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform2f(t,this.xOffset,this.yOffset),this.gl.uniform1f(i,this.denoiseLevel),this.gl.uniform1f(e,1)}setParameters(e){void 0!==e.denoiseLevel&&(this.denoiseLevel=e.denoiseLevel)}setSize(e,t){this.xOffset=1/e,this.yOffset=1/t}}const ev=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];class tv extends X_{constructor(e,t,i){super(e,ev,t,i)}}const iv=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];class nv extends X_{constructor(e,t,i){super(e,iv,t,i)}}const rv=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];class ov extends X_{constructor(e,t,i){super(e,rv,t,i)}}const sv=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144],av=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],cv=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],lv=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];class uv extends X_{constructor(e,t,i,n){super(e,sv,i,n),this.lightLevel=.1,this.rednessLevel=.5,this.mskin_he_max=175/180*3.141593,this.mskin_he_min=115/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_hc_min=116/180*3.141593,this.mskin_hc_axis=2.04203545,this.mfacts_rotate_c=0,this.mfacts_rotate_le=0,this.mfacts_rotate_ge=0,this.tab_addr=null,this.lutTextures=[],this.inputTexture=t,this.init()}setUniforms(){const e=this.gl.getUniformLocation(this.program,"u_flipY"),t=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform1f(t,this.denoiseLevel),this.gl.uniform1f(e,1);const i=this.gl.getUniformLocation(this.program,"light");this.gl.uniform1f(i,this.lightLevel);const n=this.gl.getUniformLocation(this.program,"redness");this.gl.uniform1f(n,this.rednessLevel);const r=this.gl.getUniformLocation(this.program,"skin_he_max"),o=this.gl.getUniformLocation(this.program,"skin_he_min"),s=this.gl.getUniformLocation(this.program,"skin_hc_max"),a=this.gl.getUniformLocation(this.program,"skin_hc_min"),c=this.gl.getUniformLocation(this.program,"skin_hc_axis"),l=this.gl.getUniformLocation(this.program,"facts_rotate_c"),u=this.gl.getUniformLocation(this.program,"facts_rotate_le"),d=this.gl.getUniformLocation(this.program,"facts_rotate_ge");this.gl.uniform1f(r,this.mskin_he_max),this.gl.uniform1f(o,this.mskin_he_min),this.gl.uniform1f(s,this.mskin_hc_max),this.gl.uniform1f(a,this.mskin_hc_min),this.gl.uniform1f(c,this.mskin_hc_axis),this.gl.uniform1f(l,this.mfacts_rotate_c),this.gl.uniform1f(u,this.mfacts_rotate_le),this.gl.uniform1f(d,this.mfacts_rotate_ge);const h=this.gl.getUniformLocation(this.program,"u_originImage");this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.uniform1i(h,2);const p=["lighten_lut"],f=[this.gl.TEXTURE3];for(let g=0;g<p.length;g++){const e=this.gl.getUniformLocation(this.program,p[g]);this.gl.activeTexture(f[g]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[g]),this.gl.uniform1i(e,g+3)}}setParameters(e){void 0!==e.denoiseLevel&&(this.denoiseLevel=e.denoiseLevel),void 0!==e.lightLevel&&(this.lightLevel=e.lightLevel),void 0!==e.rednessLevel&&(this.rednessLevel=e.rednessLevel,this.updateRedness(this.rednessLevel)),e.lighteningContrastLevel&&this.updateLut(e.lighteningContrastLevel)}init(){this.tab_addr=new Uint8Array(cv);const e=[this.tab_addr],t=[256],i=[1];for(let n=0;n<e.length;n++){const r=this.gl.createTexture();if(!r)throw new pl(ll.WEBGL_INTERNAL_ERROR,"create lut texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,t[n],i[n],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,e[n]),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.lutTextures.push(r)}}updateRedness(e){const t=3.141593;let i,n,r=e,o=r;r>1&&(r=1),r<0&&(r=0),o>1&&(o=1),o<0&&(o=0),this.mfacts_rotate_c=.8*r,o<.8&&(o=0),this.mskin_he_max=175/180*t,this.mskin_hc_max=173/180*t,this.mskin_he_min=(115-4*o)/180*t,this.mskin_hc_min=(116-4*o)/180*t,this.mskin_hc_axis=(117-4*o)/180*t,this.mskin_hc_axis<this.mskin_hc_min&&(this.mskin_hc_axis=this.mskin_hc_min),this.mskin_hc_min<t/2&&(this.mskin_hc_min=t/2),this.mskin_hc_axis<t/2&&(this.mskin_hc_axis=t/2),this.mskin_he_min<t/2&&(this.mskin_he_min=t/2),this.mskin_hc_max>t&&(this.mskin_hc_max=t),this.mskin_hc_axis>t&&(this.mskin_hc_axis=t),this.mskin_he_max>t&&(this.mskin_he_max=t),i=this.mskin_he_max-this.mskin_hc_max,n=this.mskin_hc_max-this.mskin_hc_axis,this.mfacts_rotate_ge=i>.01?this.mfacts_rotate_c*n/i:this.mfacts_rotate_c,i=this.mskin_hc_min-this.mskin_he_min,n=this.mskin_hc_axis-this.mskin_hc_min,this.mfacts_rotate_le=i>.01?this.mfacts_rotate_c*n/i:this.mfacts_rotate_c}updateLut(e){let t=null;if(0===e&&(t=cv),1===e&&(t=lv),2===e&&(t=av),!t)throw new pl(ll.WEBGL_INTERNAL_ERROR,"invalid ylut_table value:"+e);this.tab_addr=new Uint8Array(t);const i=[this.tab_addr],n=[256],r=[1];for(let o=0;o<i.length;o++)this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[o]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,n[o],r[o],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,i[o])}}class dv{constructor(){this.gl=null,this.canvas=null,this.programs=[],this.commonProgram=null,this.inputTexture=null,this.outputTextures=[],this.fbos=[],this.originalFrameWidth=0,this.originalFrameHeight=0,this.enableBeauty=!1,this.denoiseLevel=5,this.lightLevel=.35,this.rednessLevel=.5,this.lighteningContrastLevel=1}setEnableBeauty(e){this.enableBeauty=!!e}init(e,t,i){if(!Fu().supportWebGL)throw new pl(ll.NOT_SUPPORTED,"your browser is not support webGL");if(this.gl=i.getContext("webgl"),!this.gl)throw new pl(ll.WEBGL_INTERNAL_ERROR,"can not get webgl context");if(this.initGL(e,t),!this.inputTexture)throw new pl(ll.WEBGL_INTERNAL_ERROR,"can not find input texture");this.canvas=i,this.programs.push(new J_(this.gl)),this.programs.push(new tv(this.gl,e,t)),this.programs.push(new nv(this.gl,e,t)),this.programs.push(new ov(this.gl,e,t)),this.programs.push(new uv(this.gl,this.inputTexture,e,t)),this.commonProgram=this.programs[0].program,this.setDenoiseLevel(this.denoiseLevel),this.setLightLevel(this.lightLevel),this.setRednessLevel(this.rednessLevel),this.setContrastLevel(this.lighteningContrastLevel)}render(e){if(!this.gl||!this.commonProgram||!this.canvas)return void Rc.warning("video effect manager is not init!");let t=0;if(this.originalFrameHeight===e.videoWidth&&this.originalFrameWidth===e.videoHeight)t=2;else if(this.originalFrameHeight!==e.videoHeight||this.originalFrameWidth!==e.videoWidth){var i,n,r;if(Rc.debug(Je(i=Je(n=Je(r="beauty effect: resolution changed ".concat(this.originalFrameWidth,"x")).call(r,this.originalFrameHeight," -> ")).call(n,e.videoWidth,"x")).call(i,e.videoHeight)),0===e.videoHeight||0===e.videoWidth)return void Rc.debug("beauty effect: skip 0 resolution frame");this.canvas.width=e.videoWidth,this.canvas.height=e.videoHeight,e.setAttribute("width",e.videoWidth.toString()),e.setAttribute("height",e.videoHeight.toString()),this.release(),this.init(e.videoWidth,e.videoHeight,this.canvas)}this.gl.viewport(0,0,e.videoWidth,e.videoHeight),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e);const o=this.enableBeauty?this.programs.length-1:0;for(let a=0;a<=o;a++){const e=this.programs[a].program;this.gl.useProgram(e);const i=this.gl.getUniformLocation(e,"u_image");this.programs[a].setUniforms(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[t+a%2]),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.outputTextures[t+a%2]),this.gl.uniform1i(i,0)}this.gl.useProgram(this.commonProgram);const s=this.gl.getUniformLocation(this.commonProgram,"u_flipY");this.gl.uniform1f(s,-1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}setDenoiseLevel(e){var t;Ji(t=this.programs).call(t,t=>{t instanceof X_&&t.setParameters({denoiseLevel:e})}),this.denoiseLevel=e}setLightLevel(e){var t;Ji(t=this.programs).call(t,t=>{t instanceof X_&&t.setParameters({lightLevel:e})}),this.lightLevel=e}setRednessLevel(e){var t;Ji(t=this.programs).call(t,t=>{t instanceof X_&&t.setParameters({rednessLevel:e})}),this.rednessLevel=e}setContrastLevel(e){var t;Ji(t=this.programs).call(t,t=>{t instanceof X_&&t.setParameters({lighteningContrastLevel:e})}),this.lighteningContrastLevel=e}setSize(e,t){var i;Ji(i=this.programs).call(i,i=>{i instanceof X_&&i.setSize(e,t)})}release(){this.gl=null,this.commonProgram=null,this.inputTexture=null,this.programs=[],this.outputTextures=[],this.fbos=[]}initGL(e,t){if(!this.gl)throw new pl(ll.WEBGL_INTERNAL_ERROR,"can not find webgl context");this.inputTexture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);for(let i=0;i<4;i++){const n=this.gl.createTexture();if(!n)throw new pl(ll.WEBGL_INTERNAL_ERROR,"create texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,n),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),i<2?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,t,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,t,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);const r=this.gl.createFramebuffer();if(!r)throw new pl(ll.WEBGL_INTERNAL_ERROR,"create frame buffer failed");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,r),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,n,0),this.outputTextures.push(n),this.fbos.push(r)}this.gl.viewport(0,0,e,t),this.originalFrameWidth=e,this.originalFrameHeight=t}}class hv{constructor(){this.targetFrameRate=0,this.recordedFrameCount=0,this.recordingTime=2}async startRecordBeautyEffectOutput(e,t=4){if(this.recordID)throw new pl(ll.UNEXPECTED_ERROR,"another beauty effect recording is in progress");const i=Op(6,"");return this.recordID=i,this.targetFrameRate=e,this.recordedFrameCount=0,this.recordingTime=t,await Ip(1e3*this.recordingTime),this.recordID!==i?(this.recordID=void 0,!0):(this.recordID=void 0,this.recordedFrameCount<this.targetFrameRate*this.recordingTime/2?(Rc.warning("detect beauty effect overload, current framerate",this.recordedFrameCount/2),!1):(Rc.debug("beauty effect current framerate",this.recordedFrameCount/2),!0))}stopRecordBeautyEffectOutput(){this.targetFrameRate=0,this.recordedFrameCount=0,this.recordID=void 0}addFrame(){this.recordID&&(this.recordedFrameCount+=1)}}class pv extends class{get output(){return this._output}async setInput(e){if(e!==this.input){if(e.kind!==this.kind)throw new pl(ll.UNEXPECTED_ERROR);this.input&&this.removeInput(),this.input=e,await this._setInput(e)}}removeInput(){this.input=void 0,this._removeInput()}async updateOutput(e){this.output!==e&&(this._output=e,this.onOutputChange&&await this.onOutputChange())}replaceOriginMediaStream(e,t){var i,n;const r=Qo(i=e.getTracks()).call(i,e=>e.kind===this.kind);r&&e.removeTrack(r);const o=Qo(n=t.getTracks()).call(n,e=>e.kind===this.kind);void 0===this.output&&o&&e.addTrack(o),this.output&&(Rc.debug("replace ".concat(this.output.kind," track to origin media stream")),e.addTrack(this.output))}}{constructor(){super(),this.kind="video",this.fps=15,this.overloadDetector=new hv,this.enabled=!1,this.stopChromeBackgroundLoop=null,this.lastRenderTime=0,this.fps=30,this.manager=new dv}async setBeautyEffectOptions(e,t){if(function(e){void 0!==e.smoothnessLevel&&ml(e.smoothnessLevel,"options.smoothnessLevel",0,1,!1),void 0!==e.lighteningLevel&&ml(e.lighteningLevel,"options.lighteningLevel",0,1,!1),void 0!==e.rednessLevel&&ml(e.rednessLevel,"options.rednessLevel",0,1,!1),void 0!==e.lighteningContrastLevel&&gl(e.lighteningContrastLevel,"options.lighteningContrastLevel",[0,1,2])}(t),void 0!==t.smoothnessLevel){const e=Math.max(.1,10*t.smoothnessLevel);this.manager.setDenoiseLevel(e)}if(void 0!==t.lighteningLevel){const e=Math.max(.1,t.lighteningLevel/2);this.manager.setLightLevel(e)}if(void 0!==t.rednessLevel){const e=Math.max(.01,t.rednessLevel);this.manager.setRednessLevel(e)}if(void 0!==t.lighteningContrastLevel){const e=t.lighteningContrastLevel;this.manager.setContrastLevel(e)}this.enabled!==e&&(this.manager.setEnableBeauty(e),this.enabled=e,e?this.input&&await this.startEffect():await this.stopEffect())}destroy(){this.onOutputChange=void 0,this.stopEffect(),this.enabled=!1}async startEffect(){const e=ma();if(!this.input)return void Rc.warning("video track is null, fail to start video effect!");if(this.input&&this.output&&this.input!==this.output)return void Rc.warning("video effect is already enabled");const t=await this.renderWithWebGL();await this.updateOutput(t),Rc.info("start video effect, output:",this.output),this.overloadDetector.startRecordBeautyEffectOutput(this.fps).then(e=>{e||this.onOverload&&this.onOverload()});const i=()=>{this.enabled&&requestAnimationFrame(i);const e=Ma(),t=1e3/this.fps,n=this.lastRenderTime?e-this.lastRenderTime:t;n<t||(this.lastRenderTime=e-(n-t),this.video&&this.video.paused&&this.video.play(),this.enabled&&this.video&&(this.manager.render(this.video),this.output&&this.output.requestFrame&&this.output.requestFrame(),this.overloadDetector.addFrame()))};requestAnimationFrame(i),e.name===ha.CHROME&&document.addEventListener("visibilitychange",()=>{document.hidden?this.stopChromeBackgroundLoop=vh(()=>{this.enabled&&this.video&&this.manager.render(this.video),this.output&&this.output.requestFrame&&this.output.requestFrame(),this.overloadDetector.addFrame()},this.fps):this.stopChromeBackgroundLoop&&(this.stopChromeBackgroundLoop(),this.stopChromeBackgroundLoop=null)},!1)}async stopEffect(){Rc.info("stop video effect"),this.overloadDetector.stopRecordBeautyEffectOutput(),this.manager.release(),this.canvas&&this.canvas.remove(),this.video&&this.video.remove(),this.canvas=void 0,this.video=void 0,await this.updateOutput(this.input)}async _setInput(e){this.enabled&&!this.video&&await this.startEffect()}_removeInput(){this.stopEffect()}async renderWithWebGL(){var e;if(!this.input)throw new pl(ll.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not renderWithWebGL, no input");this.canvas&&(this.canvas.remove(),this.canvas=void 0),this.video&&(this.video.remove(),this.video=void 0),this.canvas=document.createElement("canvas"),this.video=document.createElement("video"),this.video.setAttribute("autoplay",""),this.video.setAttribute("muted",""),this.video.muted=!0,this.video.setAttribute("playsinline",""),this.video.setAttribute("style","display:none"),this.video.srcObject=new MediaStream([this.input]);const t=new fo(e=>{const t=()=>{this.video&&this.video.removeEventListener("playing",t),e(void 0)};this.video&&this.video.addEventListener("playing",t)});this.video.play(),await t;const i=this.input.getSettings(),n=i.width||this.video.videoWidth,r=i.height||this.video.videoHeight;if(i.frameRate&&this.fps!==i.frameRate&&(this.fps=i.frameRate,Rc.debug("beauty video processor: set fps to",this.fps)),Rc.debug(Je(e="beauty video processor: width ".concat(n," height ")).call(e,r)),!n||!r)throw new pl(ll.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not get track resolution");this.canvas.width=n,this.canvas.height=r,this.video.setAttribute("width",n.toString()),this.video.setAttribute("height",r.toString()),this.manager.init(n,r,this.canvas);const o=Fu();return this.canvas.captureStream(o.supportRequestFrame?0:this.fps).getVideoTracks()[0]}}function fv(e){const t={};if(e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId}),!e.encoderConfig)return t;const i=Mc(e.encoderConfig);return t.width=i.width,t.height=i.height,!Pa()&&i.frameRate&&(t.frameRate=i.frameRate),ma().name===ha.EDGE&&"object"==typeof t.frameRate&&(t.frameRate.max=60),Ia()&&(t.frameRate={ideal:30,max:30}),t}function gv(e){const t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&ba()&&(t.extensionId=e.extensionId),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);const i=e.encoderConfig?xc(e.encoderConfig):null;return t.mandatory={chromeMediaSource:"desktop",maxWidth:i?i.width:void 0,maxHeight:i?i.height:void 0},i&&i.frameRate&&("number"==typeof i.frameRate?(t.mandatory.maxFrameRate=i.frameRate,t.mandatory.minFrameRate=i.frameRate):(t.mandatory.maxFrameRate=i.frameRate.max||i.frameRate.ideal||i.frameRate.exact||void 0,t.mandatory.minFrameRate=i.frameRate.min||i.frameRate.ideal||i.frameRate.exact||void 0),t.frameRate=i.frameRate),i&&i.width&&(t.width=i.width),i&&i.height&&(t.height=i.height),t}function mv(e){const t={};if(Pa()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC,ba()&&(t.googAutoGainControl=e.AGC,t.googAutoGainControl2=e.AGC)),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,ba()&&(t.googNoiseSuppression=e.ANS))),e.encoderConfig){const i=Fc(e.encoderConfig);t.channelCount=i.stereo?2:1,t.sampleRate=i.sampleRate,t.sampleSize=i.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),ba()&&2===t.channelCount&&(t.googAutoGainControl=!1,t.googAutoGainControl2=!1,t.echoCancellation=!1,t.googNoiseSuppression=!1),ma().os===da.ANDROID&&(t.sampleRate=void 0),t}var _v,vv;!function(e){e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE"}(_v||(_v={})),function(e){e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(vv||(vv={}));var Ev=new class{constructor(){this._clientSize=null,this.getClientWidth=()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth,this.getClientHeight=()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight,this.getStyle=e=>window.getComputedStyle(e,null),this.checkCssVisibleProperty=e=>{var t;let i=!0;const n=this.getStyle(e),{display:r,visibility:o,opacity:s,filter:a}=n;if(("none"===r||ns(t=["hidden","collapse"]).call(t,o)||Number(s)<.1)&&(i=!1),!i)return!1;if(a){var c;const e=Gn(c=a.split(" ")).call(c,e=>{var t;const i=e.split("(")[0];return ns(t=["brightness","blur","opacity"]).call(t,i)}),t=vo(e).call(e,e=>{const[t,i]=e.split(/\(|\)/);return[t,Number(i.match(/^[0-9\.]+/))]});Ji(t).call(t,e=>{const[t,n]=e;switch(t){case"brightness":(n<.1||n>3)&&(i=!1);break;case"blur":n>3&&(i=!1);break;case"opacity":n<.1&&(i=!1)}})}return i},this.checkPropertyUpToAllParentNodes=(e,t)=>{let i=!0,n=!0;const r=e=>t(e);let o=e;for(;o&&n;)r(o)||(i=!1,n=!1),o=o.parentElement,o||(n=!1);return i},this.checkActualCssVisibleIncludeInherit=e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty),this.getSizeAboutClient=e=>{const{width:t,height:i,left:n,right:r,top:o,bottom:s}=e.getBoundingClientRect(),a=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:i,left:n,right:r,top:o,bottom:s,clientWidth:a,clientHeight:c,clientMin:Math.min(a,c)}},this.checkActualSize=()=>{const{width:e,height:t,clientMin:i}=this._clientSize;return this.checkSizeIsVisible(e,t,i)},this.elementFromPoint=(e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null,this.checkCoverForAPoint=(e,t,i)=>{const n=this.elementFromPoint(e,t);return null!==n&&n!==i},this.getPointPositionList=()=>{const{width:e,height:t,left:i,top:n}=this._clientSize,r=e/6,o=t/6,s=[],a=10**6;for(let c=0;c<5;c++)for(let e=0;e<5;e++){const t=(i*a+(0===c?.1:4===c?(r*c*a-1e5)/a:r*c)*a)/a,l=(n*a+(0===e?.1:4===e?(o*e*a-1e5)/a:o*e)*a)/a;s.push({x:t,y:l})}return[...s]},this.checkElementCover=e=>{var t;const i=this.getPointPositionList();return Gn(t=vo(i).call(i,t=>this.checkCoverForAPoint(t.x,t.y,e))).call(t,e=>!!e).length>6},this.checkSizeIsVisible=(e,t,i)=>(e>50||i/e<=10)&&(t>50||i/t<=10),this.checkSizeOfPartInClient=()=>{const{left:e,right:t,top:i,bottom:n,clientHeight:r,clientWidth:o,clientMin:s}=this._clientSize;let a,c,l,u;if(e<0)a=0;else{if(!(e<o))return!1;a=e}if(t<0)return!1;if(c=t<o?t:o,i<0)l=0;else{if(!(i<r))return!1;l=i}if(n<0)return!1;u=n<r?n:r;const d=c-a,h=u-l;return this.checkSizeIsVisible(d,h,s)},this.returnHiddenResult=e=>(this._clientSize=null,{visible:!1,reason:e}),this.checkOneElementVisible=e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(_v.COVERED);{const e=this.checkActualSize(),t=this.checkSizeOfPartInClient();return e&&!t?this.returnHiddenResult(_v.POSITION):e?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(_v.SIZE)}}return this.returnHiddenResult(_v.STYLE)}return this.returnHiddenResult(vv.UNMOUNTED)}return this.returnHiddenResult(vv.INVALID_HTML_ELEMENT)},this.checkElementIsMountedOnDom=e=>this.checkPropertyUpToAllParentNodes(e,e=>"HTML"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement)}};function Av(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function yv(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=Av(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=Av(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}var Sv=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Un(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&hn(t,i,s),s},Cv=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class bv extends lh{constructor(e,t,i,n,r){super(e,r),this.trackMediaType="video",this._videoVisibleTimer=null,this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1},this._enabled=!0,this.updateMediaStreamTrackResolution(),this._encoderConfig=t,this._scalabiltyMode=i,this._optimizationMode=n}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==dl.PLAYING)}play(e,t={}){const i=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof e?e:"HTMLElement",t]});if(!(e instanceof HTMLElement)){const t=document.getElementById(e.toString());var n;t?e=t:(Rc.warning(Je(n="[".concat(this.getTrackId(),'] can not find "#')).call(n,e,'" element, use document.body')),e=document.body)}Rc.debug("[".concat(this.getTrackId(),"] start video playback"),ve(t));const r=yv({},this._getDefaultPlayerConfig(),{},t,{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(r):(this._player=new H_(r),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=window.setInterval(()=>{try{const e=this.getVideoElementVisibleStatus();this.emit(Au.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}},jc("CHECK_VIDEO_VISIBLE_INTERVAL")),i.onSuccess()}stop(){const e=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return e.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._player.destroy(),this._player=void 0,Rc.debug("[".concat(this.getTrackId(),"] stop video playback")),e.onSuccess()}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.enabled=!1;try{await Mp(this,vu.NEED_DISABLE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}return t||(this._enabled=!1),void Rc.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Mp(this,vu.NEED_ENABLE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}Rc.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}async setMuted(e){var t;e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._mediaStreamTrack.enabled=!e,Rc.debug(Je(t="[".concat(this.getTrackId(),"] start set muted: ")).call(t,e)),e?await Mp(this,vu.NEED_MUTE_TRACK,this):await Mp(this,vu.NEED_UNMUTE_TRACK,this))}getStats(){Hp(()=>{Rc.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning");const e=xp(this,vu.GET_STATS);return e||yv({},eu)}async setBeautyEffect(e,t={}){const i=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.LOCAL_VIDEO_TRACK_BEAUTY,options:[this.getTrackId(),e,t]});if(e||this._videoBeautyProcessor){if(Aa()===da.IOS||Aa()===da.ANDROID){const e=new pl(ll.INVALID_OPERATION,"can not enable beauty effect on mobile device");throw i.onError(e),e}if(!this._enabled&&e){const e=new pl(ll.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled");throw i.onError(e),e}Rc.info("[".concat(this.getTrackId(),"] start setBeautyEffect"),e,ve(t));try{this._videoBeautyProcessor?await this._videoBeautyProcessor.setBeautyEffectOptions(e,t):(this._videoBeautyProcessor=new pv,this._videoBeautyProcessor.onOverload=()=>{Vp(()=>this.emit(Au.BEAUTY_EFFECT_OVERLOAD))},await this._videoBeautyProcessor.setBeautyEffectOptions(e,t),await this._registerTrackProcessor(this._videoBeautyProcessor))}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setBeautyEffect error"),e.toString()),i.onError(e),e}Rc.info("[".concat(this.getTrackId(),"] setBeautyEffect success")),i.onSuccess()}}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}clone(e,t,i,n){const r=this._mediaStreamTrack.clone();return new bv(r,e,t,i,n)}async setBitrateLimit(e){var t;if(Rc.debug(Je(t="[".concat(this.getTrackId(),"] set bitrate limit, ")).call(t,ve(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await Mp(this,vu.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw()}}}async setOptimizationMode(e){var t;if("motion"!==e&&"detail"!==e&&"balanced"!==e)return void Rc.error(ll.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const i=this._optimizationMode;try{this._optimizationMode=e,await Mp(this,vu.SET_OPTIMIZATION_MODE,this)}catch(e){throw this._optimizationMode=i,Rc.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.toString()),e}Rc.info(Je(t="[".concat(this.getTrackId(),"] set optimization mode success (")).call(t,e,")"))}setScalabiltyMode(e){var t;if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return Rc.error(ll.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=e,Rc.info(Je(t="[".concat(this.getTrackId(),"] set scalability mode success (")).call(t,e,")"))}updateMediaStreamTrackResolution(){Lp(this._originMediaStreamTrack).then(([e,t])=>{this._videoHeight=t,this._videoWidth=e}).catch(Np)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}getVideoElementVisibleStatus(){try{var e,t;const i=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),n={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==i?void 0:i.parentElement},{element:r,slot:o}=n;if(this.isPlaying&&r instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=Ev.checkOneElementVisible(r),t=nn({},e);return t.visible||rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess("Not visible because of ".concat(t.reason)),t}return}catch(e){throw new pl(ll.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}async renewMediaStreamTrack(){}}Sv([xh(),Cv("design:type",Function),Cv("design:paramtypes",[Object,Object]),Cv("design:returntype",void 0)],bv.prototype,"play",null),Sv([ch("LocalVideoTrack","_enabledMutex"),xh(),Cv("design:type",Function),Cv("design:paramtypes",[Boolean,Boolean]),Cv("design:returntype",fo)],bv.prototype,"setEnabled",null),Sv([ch("LocalVideoTrack","_enabledMutex"),xh(),nh({report:rh}),Cv("design:type",Function),Cv("design:paramtypes",[Boolean]),Cv("design:returntype",fo)],bv.prototype,"setMuted",null),Sv([xh(),Cv("design:type",Function),Cv("design:paramtypes",[]),Cv("design:returntype",Object)],bv.prototype,"getStats",null),Sv([xh(),Cv("design:type",Function),Cv("design:paramtypes",[Boolean,Object]),Cv("design:returntype",fo)],bv.prototype,"setBeautyEffect",null),Sv([xh(),Cv("design:type",Function),Cv("design:paramtypes",[]),Cv("design:returntype",ImageData)],bv.prototype,"getCurrentFrameData",null),Sv([xh(),Cv("design:type",Function),Cv("design:paramtypes",[Object]),Cv("design:returntype",fo)],bv.prototype,"setBitrateLimit",null),Sv([xh(),Cv("design:type",Function),Cv("design:paramtypes",[String]),Cv("design:returntype",fo)],bv.prototype,"setOptimizationMode",null),Sv([xh(),Cv("design:type",Function),Cv("design:paramtypes",[Object]),Cv("design:returntype",void 0)],bv.prototype,"setScalabiltyMode",null),Sv([xh(),Cv("design:type",Function),Cv("design:paramtypes",[]),Cv("design:returntype",void 0)],bv.prototype,"updateMediaStreamTrackResolution",null);class Tv extends bv{constructor(e,t,i,n,r,o){super(e,t.encoderConfig?Mc(t.encoderConfig):{},n,r,o),this._enabled=!0,this._deviceName="default",this.tryResumeVideoForIOS15WeChat=async()=>{wa()&&La()&&this._enabled&&!this._isClosed&&(Rc.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.setEnabled(!1),await this.setEnabled(!0))},this._config=t,this._constraints=i,this._deviceName=e.label,this._config.encoderConfig&&(this._encoderConfig=Mc(this._config.encoderConfig)),ph.on(uh.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),ph.on(uh.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}async setDevice(e){var t;const i=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CAM_VIDEO_TRACK_SET_DEVICE,options:[this.getTrackId(),e]});if(Rc.info(Je(t="[".concat(this.getTrackId(),"] set device to ")).call(t,e)),this._enabled)try{const t=await Ph.getDeviceById(e),i={};i.video=yv({},this._constraints),i.video.deviceId={exact:e},i.video.facingMode=void 0,this._originMediaStreamTrack.stop();let n=null;try{n=await Oh(i,this.getTrackId())}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),n=await Oh({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw i.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await Ph.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw i.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}Rc.info("[".concat(this.getTrackId(),"] setDevice success")),i.onSuccess()}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),t||(this._enabled=!1);try{await Mp(this,vu.NEED_DISABLE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}return void Rc.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}const i=yv({},this._constraints),n=Ph.searchDeviceIdByName(this._deviceName);n&&!i.deviceId&&(i.deviceId={exact:n});try{const e=await Oh({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),await Mp(this,vu.NEED_ENABLE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.toString()),e}this.updateMediaStreamTrackResolution(),Rc.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}async setEncoderConfiguration(e,t){const i=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[this.getTrackId(),e]});if(!this._enabled){const e=new pl(ll.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");throw i.onError(e),e}e=Mc(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin);const n=jp(this._config);n.encoderConfig=e;const r=fv(n);(Ta()||Ra()||Na())&&(r.deviceId=void 0),Rc.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),ve(e),ve(r));try{await this._originMediaStreamTrack.applyConstraints(r),this.updateMediaStreamTrackResolution()}catch(e){const t=new pl(ll.UNEXPECTED_ERROR,e.toString());throw Rc.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),i.onError(t),t}this._config=n,this._constraints=r,this._encoderConfig=e;try{await Mp(this,vu.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return i.onError(e),e.throw()}i.onSuccess()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Ra()||Na())&&this._enabled&&!this._isClosed&&ph.duringInterruption){const e=async()=>{ph.off(uh.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Rc.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};ph.on(uh.IOS_INTERRUPTION_END,e)}else Rc.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Au.TRACK_ENDED)}async renewMediaStreamTrack(){const e=yv({},this._constraints),t=Ph.searchDeviceIdByName(this._deviceName);t&&!e.deviceId&&(e.deviceId={exact:t});const i=await Oh({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}close(){super.close(),ph.off(uh.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),ph.off(uh.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}}Sv([xh(),Cv("design:type",Function),Cv("design:paramtypes",[String]),Cv("design:returntype",fo)],Tv.prototype,"setDevice",null),Sv([ch("CameraVideoTrack","_enabledMutex"),xh(),Cv("design:type",Function),Cv("design:paramtypes",[Boolean,Boolean]),Cv("design:returntype",fo)],Tv.prototype,"setEnabled",null),Sv([xh(),Cv("design:type",Function),Cv("design:paramtypes",[Object,Boolean]),Cv("design:returntype",fo)],Tv.prototype,"setEncoderConfiguration",null);class Iv{constructor(e,t){this._trust_in_room_=!0,this._trust_audio_enabled_state_=!0,this._trust_video_enabled_state_=!0,this._trust_audio_mute_state_=!0,this._trust_video_mute_state_=!0,this._trust_stream_added_state_=!0,this._audio_muted_=!1,this._video_muted_=!1,this._audio_enabled_=!0,this._video_enabled_=!0,this._audio_added_=!1,this._video_added_=!1,this.uid=e,this._uintid=t}get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}}var Rv=bt.findIndex,wv="findIndex",Ov=!0;wv in[]&&Array(1).findIndex((function(){Ov=!1})),Q({target:"Array",proto:!0,forced:Ov},{findIndex:function(e){return Rv(this,e,arguments.length>1?arguments[1]:void 0)}});var kv=Ze("Array").findIndex,Nv=Array.prototype,Lv=function(e){var t=e.findIndex;return e===Nv||e instanceof Array&&t===Nv.findIndex?kv:t};Yu("asyncIterator");var Pv=zu.f("asyncIterator");Yu("hasInstance"),Yu("isConcatSpreadable"),Yu("iterator"),Yu("match"),Yu("matchAll"),Yu("replace"),Yu("search"),Yu("species"),Yu("split"),Yu("toPrimitive"),Yu("toStringTag"),Yu("unscopables"),yt(Math,"Math",!0),yt(o.JSON,"JSON",!0);var Dv=M.Symbol;Yu("asyncDispose"),Yu("dispose"),Yu("observable"),Yu("patternMatch"),Yu("replaceAll");var Mv=Dv,xv=xt.set,Bv=xt.getterFor("AggregateError"),Uv=function(e,t){var i=this;if(!(i instanceof Uv))return new Uv(e,t);ai&&(i=ai(new Error(t),ti(i)));var n=[];return mt(e,n.push,n),a?xv(i,{errors:n,type:"AggregateError"}):i.errors=n,void 0!==t&&j(i,"message",String(t)),i};Uv.prototype=qt(Error.prototype,{constructor:d(5,Uv),message:d(5,""),name:d(5,"AggregateError")}),a&&V.f(Uv.prototype,"errors",{get:function(){return Bv(this).errors},configurable:!0}),Q({global:!0},{AggregateError:Uv}),Q({target:"Promise",stat:!0},{try:function(e){var t=xr.f(this),i=Ur(e);return(i.error?t.reject:t.resolve)(i.value),t.promise}});var Fv="No one promise resolved";Q({target:"Promise",stat:!0},{any:function(e){var t=this,i=xr.f(t),n=i.resolve,r=i.reject,o=Ur((function(){var i=x(t.resolve),o=[],s=0,a=1,c=!1;mt(e,(function(e){var l=s++,u=!1;o.push(void 0),a++,i.call(t,e).then((function(e){u||c||(c=!0,n(e))}),(function(e){u||c||(u=!0,o[l]=e,--a||r(new(le("AggregateError"))(o,Fv)))}))})),--a||r(new(le("AggregateError"))(o,Fv))}));return o.error&&r(o.value),i.promise}});var Vv=po,jv=function(e){this.wrapped=e};function Gv(e){var t,i;function n(t,i){try{var o=e[t](i),s=o.value,a=s instanceof jv;Vv.resolve(a?s.wrapped:s).then((function(e){a?n("return"===t?"return":"next",e):r(o.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){r("throw",e)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?n(t.key,t.arg):i=null}this._invoke=function(e,r){return new Vv((function(o,s){var a={key:e,arg:r,resolve:o,reject:s,next:null};i?i=i.next=a:(t=i=a,n(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Mv&&Pv&&(Gv.prototype[Pv]=function(){return this}),Gv.prototype.next=function(e){return this._invoke("next",e)},Gv.prototype.throw=function(e){return this._invoke("throw",e)},Gv.prototype.return=function(e){return this._invoke("return",e)};var Hv=Gv,Qv=function(e){return function(){return new Hv(e.apply(this,arguments))}},Wv=function(e){return new jv(e)},qv=ft,$v=zu.f("iterator"),zv=$v,Zv=function(e){var t;if(void 0!==Mv){if(Pv&&null!=(t=e[Pv]))return t.call(e);if(zv&&null!=(t=qv(e)))return t.call(e)}throw new TypeError("Object is not async iterable")},Yv=function(e,t){var i={},n=!1;function r(i,r){return n=!0,r=new Vv((function(t){t(e[i](r))})),{done:!1,value:t(r)}}return"function"==typeof Mv&&zv&&(i[zv]=function(){return this}),i.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(i.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(i.return=function(e){return n?(n=!1,e):r("return",e)}),i},Kv=n((function(e,t){e.exports=(()=>{var e={8:(e,t,i)=>{i.r(t),i.d(t,{Parser:()=>S,Printer:()=>R,parse:()=>N,print:()=>L});const n="\n",r="".concat("\r").concat(n),o=" ";let s;function a(e){return e>="0"&&e<="9"}function c(e){return e>="!"&&e<="~"}function l(e){return c(e)||e>=""&&e<="ÿ"}function u(e){return"!"===e||e>="#"&&e<="'"||e>="*"&&e<="+"||e>="-"&&e<="."||e>="0"&&e<="9"||e>="A"&&e<="Z"||e>="^"&&e<="~"}function d(e){return e>="1"&&e<="9"}function h(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function p(e){return"d"===e||"h"===e||"m"===e||"s"===e}function f(e){return e>""&&e<"\t"||e>"\v"&&e<"\f"||e>""&&e<"ÿ"}function g(e){return h(e)||a(e)||"+"===e||"/"===e}function m(e){return a(e)||h(e)||"+"===e||"/"===e||"-"===e||"_"===e}function _(e){return h(e)||a(e)||"+"===e||"/"===e}function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function E(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){A(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function A(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e){e.VERSION="v",e.ORIGIN="o",e.SESSION_NAME="s",e.INFORMATION="i",e.URI="u",e.EMAIL="e",e.PHONE="p",e.CONNECTION="c",e.BANDWIDTH="b",e.TIME="t",e.REPEAT="r",e.ZONE_ADJUSTMENTS="z",e.KEY="k",e.ATTRIBUTE="a",e.MEDIA="m"}(s||(s={}));class y{consumeText(e,t){let i=t;for(;i<e.length;){const t=e[i];if("\0"===t||"\r"===t||t===n)break;i+=1}if(i-t==0)throw new Error("Invalid text, at ".concat(e));return i}consumeUnicastAddress(e,t,i){return this.consumeTill(e,t,o)}consumeOneOrMore(e,t,i){let n=t;for(;i(e[n]);)n++;if(n-t==0)throw new Error("Invalid rule at ".concat(t,"."));return n}consumeSpace(e,t){if(e[t]===o)return t+1;throw new Error("Invalid space at ".concat(t,"."))}consumeIP4Address(e,t){let i=t;for(let n=0;n<4;n++)if(i=this.consumeDecimalUChar(e,i),3!==n){if("."!==e[i])throw new Error("Invalid IP4 address.");i++}return i}consumeDecimalUChar(e,t){let i=t;for(let r=0;r<3&&a(e[i]);r++,i++);if(i-t==0)throw new Error("Invalid decimal uchar.");const n=parseInt(e.slice(t,i));if(n>=0&&n<=255)return i;throw new Error("Invalid decimal uchar")}consumeIP6Address(e,t){let i=this.consumeHexpart(e,t);return":"===e[i]?(i+=1,i=this.consumeIP4Address(e,i),i):i}consumeHexpart(e,t){let i=t;if(":"===e[i]&&":"===e[i+1]){i+=2;try{i=this.consumeHexseq(e,i)}catch(e){}return i}if(i=this.consumeHexseq(e,i),":"===e[i]&&":"===e[i+1]){i+=2;try{i=this.consumeHexseq(e,i)}catch(e){}return i}return i}consumeHexseq(e,t){let i=t;for(;i=this.consumeHex4(e,i),":"===e[i]&&":"!==e[i+1];)i+=1;return i}consumeHex4(e,t){let i=0;for(;i<4;i++)if(!((n=e[t+i])>="0"&&n<="9"||n>="a"&&n<="f"||n>="A"&&n<="F")){if(0===i)throw new Error("Invalid hex 4");break}var n;return t+i}consumeFQDN(e,t){let i=t;for(;a(e[i])||h(e[i])||"-"===e[i]||"."===e[i];)i+=1;if(i-t<4)throw new Error("Invalid FQDN");return i}consumeExtnAddr(e,t){return this.consumeOneOrMore(e,t,l)}consumeMulticastAddress(e,t,i){switch(i){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e,t);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(i){return this.consumeExtnAddr(e,t)}}}consumeIP6MulticastAddress(e,t){const i=this.consumeHexpart(e,t);return"/"===e[i]?this.consumeInteger(e,i+1):i}consumeIP4MulticastAddress(e,t){let i=t+3;const n=e.slice(t,i),r=parseInt(n);if(r<224||r>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let o=0;o<3;o++){if("."!==e[i])throw new Error("Invalid IP4 multicast address.");i+=1,i=this.consumeDecimalUChar(e,i)}return"/"===e[i]&&(i+=1),i=this.consumeTTL(e,i),"/"===e[i]&&(i=this.consumeInteger(e,i)),i}consumeInteger(e,t){if(!d(e[t]))throw new Error("Invalid integer.");for(t+=1;a(e[t]);)t+=1;return t}consumeTTL(e,t){if("0"===e[t])return t+1;if(!d(e[t]))throw new Error("Invalid TTL.");t+=1;for(let i=0;i<2&&a(e[t]);i++)t+=1;return t}consumeToken(e,t){return this.consumeOneOrMore(e,t,u)}consumeTime(e,t){let i=t;if("0"===e[i])return i+1;for(d(e[i])&&(i+=1);a(e[i]);)i++;if(i-t<10)throw new Error("Invalid time");return i}consumeAddress(e,t){return this.consumeTill(e,t,o)}consumeTypedTime(e,t){let i=t;return i=this.consumeOneOrMore(e,i,a),p(e[i])?i+1:i}consumeRepeatInterval(e,t){if(!d(e[t]))throw new Error("Invalid repeat interval");for(t+=1;a(e[t]);)t+=1;return p(e[t])&&(t+=1),t}consumePort(e,t){return this.consumeOneOrMore(e,t,a)}consume(e,t,i){for(let n=0;n<i.length;n++){if(t+n>=e.length)throw new Error("consume exceeding value length");if(e[t+n]!==i[n])throw new Error("consume ".concat(i," failed at ").concat(n))}return t+i.length}consumeTill(e,t,i){let n=t;for(;n<e.length&&("string"!=typeof i||e[n]!==i)&&("function"!=typeof i||!i(e[n]));)n++;return n}}class S extends y{constructor(){super(),A(this,"records",[]),A(this,"currentLine",0)}parse(e){const t=this.probeEOL(e);this.records=e.split(t).filter(e=>!!e.trim()).map(this.parseLine),this.currentLine=0;const i=this.parseVersion(),n=this.parseOrigin(),r=this.parseSessionName(),o=this.parseInformation(),s=this.parseUri(),a=this.parseEmail(),c=this.parsePhone(),l=this.parseConnection(),u=this.parseBandWidth(),d=this.parseTimeFields(),h=this.parseKey(),p=this.parseSessionAttribute(),f=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:i,origin:n,sessionName:r,information:o,uri:s,emails:a,phones:c,connection:l,bandwidths:u,timeFields:d,key:h,attributes:p,mediaDescriptions:f}}getCurrentRecord(){const e=this.records[this.currentLine];if(!e)throw new Error("Record doesn't exit.");return e}probeEOL(e){for(let t=0;t<e.length;t++)if(e[t]===n)return"\r"===e[t-1]?r:n;throw new Error("Invalid newline character.")}parseLine(e,t){if(e.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const i=e[0];if("="!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:i,value:e.slice(2),line:t,cur:0}}parseSessionAttribute(){const e=new b;for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.ATTRIBUTE)break;const i={attField:this.extractOneOrMore(t,e=>u(e)&&":"!==e),_cur:0};":"===t.value[t.cur]&&(t.cur+=1,i.attValue=this.extractOneOrMore(t,f)),e.parse(i),this.currentLine++}return e.digest()}parseMediaAttributes(e){const t=new T(e);for(;this.currentLine<this.records.length;){const e=this.getCurrentRecord();if(e.type!==s.ATTRIBUTE)break;const i={attField:this.extractOneOrMore(e,e=>u(e)&&":"!==e),_cur:0};":"===e.value[e.cur]&&(e.cur+=1,i.attValue=this.extractOneOrMore(e,f)),t.parse(i),this.currentLine++}return t.digest()}parseKey(){const e=this.getCurrentRecord();if(e.type===s.KEY){if("prompt"===e.value||"clear:"===e.value||"base64:"===e.value||"uri:"===e.value)return e.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const e=this.getCurrentRecord();if(e.type===s.ZONE_ADJUSTMENTS){const t=[];for(;;)try{const i=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);let n=!1;"-"===e.value[e.cur]&&(n=!0,e.cur+=1);const r=this.extract(e,this.consumeTypedTime);t.push({time:i,typedTime:r,back:n})}catch(e){break}if(0===t.length)throw new Error("Invalid zone adjustments");return this.currentLine++,t}return[]}parseRepeat(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.REPEAT)break;{const i=this.extract(t,this.consumeRepeatInterval),n=this.parseTypedTime(t);e.push({repeatInterval:i,typedTimes:n}),this.currentLine++}}return e}parseTypedTime(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error("Invalid typed time.");return t}parseTime(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);const i=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:i}}parseBandWidth(){const e=[];for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.BANDWIDTH)break;{const i=this.extractOneOrMore(t,u);if(":"!==t.value[t.cur])throw new Error("Invalid bandwidth field.");t.cur++;const n=this.extractOneOrMore(t,a);e.push({bwtype:i,bandwidth:n}),this.currentLine++}}return e}parseVersion(){const e=this.getCurrentRecord();if(e.type!==s.VERSION)throw new Error("first sdp record must be version");const t=e.value.slice(0,this.consumeOneOrMore(e.value,0,a));if(t.length!==e.value.length)throw new Error('invalid proto version, "v='.concat(e.value,'"'));return this.currentLine++,t}parseOrigin(){const e=this.getCurrentRecord();if(e.type!==s.ORIGIN)throw new Error("second line of sdp must be origin");const t=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const r=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const o=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const c=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:i,sessVersion:n,nettype:r,addrtype:o,unicastAddress:c}}parseSessionName(){const e=this.getCurrentRecord();if(e.type===s.SESSION_NAME){const t=this.extract(e,this.consumeText);return this.currentLine++,t}}parseInformation(){const e=this.getCurrentRecord();if(e.type!==s.INFORMATION)return;const t=this.extract(e,this.consumeText);return this.currentLine++,t}parseUri(){const e=this.getCurrentRecord();if(e.type===s.URI)return this.currentLine++,e.value}parseEmail(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.EMAIL)break;e.push(t.value),this.currentLine++}return e}parsePhone(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.PHONE)break;e.push(t.value),this.currentLine++}return e}parseConnection(){const e=this.getCurrentRecord();if(e.type===s.CONNECTION){const t=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const n=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:i,address:n}}}parseMedia(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);let i=this.extract(e,this.consumePort);"/"===e.value[e.cur]&&(e.cur+=1,i+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);const n=[];for(n.push(this.extract(e,this.consumeToken));"/"===e.value[e.cur];)e.cur+=1,n.push(this.extract(e,this.consumeToken));if(0===n.length)throw new Error("Invalid proto");const r=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:i,protos:n,fmts:r}}parseTimeFields(){const e=[];for(;this.getCurrentRecord().type===s.TIME;){const t=this.parseTime(),i=this.parseRepeat(),n=this.parseZone();e.push({time:t,repeats:i,zones:n})}return e}parseMediaDescription(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.MEDIA;){const t=this.parseMedia(),i=this.parseInformation(),n=this.parseConnections(),r=this.parseBandWidth(),o=this.parseKey(),s=this.parseMediaAttributes(t);e.push({media:t,information:i,connections:n,bandwidths:r,key:o,attributes:s})}return e}parseConnections(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.CONNECTION;)e.push(this.parseConnection());return e}parseFmt(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error("Invalid fmts");return t}extract(e,t,...i){const n=t.call(this,e.value,e.cur,...i),r=e.value.slice(e.cur,n);return e.cur=n,r}extractOneOrMore(e,t){const i=this.consumeOneOrMore(e.value,e.cur,t),n=e.value.slice(e.cur,i);return e.cur=i,n}consumeSpaceForRecord(e){if(e.value[e.cur]!==o)throw new Error("Invalid space at ".concat(e.cur,"."));e.cur+=1}}class C extends y{constructor(...e){super(...e),A(this,"attributes",void 0),A(this,"digested",!1)}extractOneOrMore(e,t,i){const n=this.consumeOneOrMore(e.attValue,e._cur,t),r=e.attValue.slice(e._cur,n),[o,s]=i||[];if("number"==typeof o&&r.length<o)throw new Error("error in length, should be more or equal than ".concat(o," characters."));if("number"==typeof s&&r.length>s)throw new Error("error in length, should be less or equal than ".concat(s," characters."));return e._cur=n,r}consumeAttributeSpace(e){if(e.attValue[e._cur]!==o)throw new Error("Invalid space at ".concat(e._cur,"."));e._cur+=1}extract(e,t,...i){if(!e.attValue)throw new Error("Nothing to extract from attValue.");const n=t.call(this,e.attValue,e._cur,...i),r=e.attValue.slice(e._cur,n);return e._cur=n,r}atEnd(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}peekChar(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}peek(e,t){if(!e.attValue)throw new Error;for(let i=0;i<t.length;i++)if(t[i]!==e.attValue[e._cur+i])return!1;return!0}parseIceUfrag(e){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e,g,[4,256])}parseIcePwd(e){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e,g,[22,256])}parseIceOptions(e){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const t=[];for(;!this.atEnd(e);){t.push(this.extractOneOrMore(e,g));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t}parseFingerprint(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:i})}parseExtmap(e){const t=this.extractOneOrMore(e,a);let i;"/"===this.peekChar(e)&&(this.extract(e,this.consume,"/"),i=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,o),r=E(E({entry:parseInt(t,10)},i&&{direction:i}),{},{extensionName:n});this.peekChar(e)===o&&(this.consumeAttributeSpace(e),r.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(r)}parseSetup(e){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const t=this.extract(e,this.consumeTill);if("active"!==t&&"passive"!==t&&"actpass"!==t&&"holdconn"!==t)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=t}}class b extends C{constructor(...e){super(...e),A(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"group":this.parseGroup(e);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"fingerprint":this.parseFingerprint(e);break;case"setup":this.parseSetup(e);break;case"tls-id":this.parseTlsId(e);break;case"identity":this.parseIdentity(e);break;case"extmap":this.parseExtmap(e);break;case"msid-semantic":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing session attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(e){const t=this.extract(e,this.consumeToken),i=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;)this.consumeAttributeSpace(e),i.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:i})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(e){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e,m)}parseIdentity(e){const t=this.extractOneOrMore(e,_),i=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.extract(e,this.consume,"=");const n=this.extractOneOrMore(e,e=>e!==o&&f(e));i.push({name:t,value:n})}this.attributes.identities.push({assertionValue:t,extensions:i})}parseMsidSemantic(e){this.peekChar(e)===o&&this.consumeAttributeSpace(e);const t={semantic:this.extract(e,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(e)}catch(e){break}if("*"===this.peekChar(e)){this.extract(e,this.consume,"*"),t.applyForAll=!0;break}{const i=this.extract(e,this.consumeTill,o);t.identifierList.push(i)}}this.attributes.msidSemantic=t}}class T extends C{constructor(e){super(),A(this,"attributes",void 0),-1!==e.protos.indexOf("RTP")||e.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"extmap":this.parseExtmap(e);break;case"setup":this.parseSetup(e);break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"candidate":this.parseCandidate(e);break;case"remote-candidate":this.parseRemoteCandidate(e);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e);break;case"rtpmap":this.parseRtpmap(e);break;case"ptime":this.parsePtime(e);break;case"maxptime":this.parseMaxPtime(e);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e);break;case"ssrc":this.parseSSRC(e);break;case"fmtp":this.parseFmtp(e);break;case"rtcp-fb":this.parseRtcpFb(e);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e);break;case"mid":this.parseMid(e);break;case"msid":this.parseMsid(e);break;case"imageattr":this.parseImageAttr(e);break;case"rid":this.parseRid(e);break;case"simulcast":this.parseSimulcast(e);break;case"sctp-port":this.parseSctpPort(e);break;case"max-message-size":this.parseMaxMessageSize(e);break;case"ssrc-group":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing media attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}parseCandidate(e){const t=this.extractOneOrMore(e,g,[1,32]);this.consumeAttributeSpace(e);const i=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const r=this.extractOneOrMore(e,a,[1,10]);this.consumeAttributeSpace(e);const s=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const l=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,"typ"),this.consumeAttributeSpace(e);const u={foundation:t,componentId:i,transport:n,priority:r,connectionAddress:s,port:l,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e," raddr")&&(this.extract(e,this.consume," raddr"),this.consumeAttributeSpace(e),u.relAddr=this.extract(e,this.consumeAddress)),this.peek(e," rport")&&(this.extract(e,this.consume," rport"),this.consumeAttributeSpace(e),u.relPort=this.extract(e,this.consumePort));this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),u.extension[t]=this.extractOneOrMore(e,c)}this.attributes.candidates.push(u)}parseRemoteCandidate(e){const t=[];for(;;){const i=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumePort);t.push({componentId:i,connectionAddress:n,port:r});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill,"/");this.extract(e,this.consume,"/");const n={encodingName:i,clockRate:this.extractOneOrMore(e,a)};this.atEnd(e)||"/"!==this.peekChar(e)||(this.extract(e,this.consume,"/"),n.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));const r=this.attributes.payloads.find(e=>e.payloadType===parseInt(t,10));r?r.rtpMap=n:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:n,rtcpFeedbacks:[]})}parsePtime(e){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e,this.consumeTill)}parseMaxPtime(e){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e,this.consumeTill)}parseDirection(e){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e.attField}parseSSRC(e){const t=this.extractOneOrMore(e,a);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill,":");let n;":"===this.peekChar(e)&&(this.extract(e,this.consume,":"),n=this.extract(e,this.consumeTill));const r=this.attributes.ssrcs.find(e=>e.ssrcId===parseInt(t,10));r?r.attributes[i]=n:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:{[i]:n}})}parseFmtp(e){const t=this.extract(e,this.consumeTill,o);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill),n={};i.split(";").forEach(e=>{let[t,i]=e.split("=");t=t.trim(),i="string"==typeof i?i.trim():i,"string"==typeof t&&t.length>0&&(n[t]=i)});const r=this.attributes.payloads.find(e=>e.payloadType===parseInt(t,10));r?r.fmtp={parameters:n}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:n}})}parseFmtParameters(e){const t={},i=this.extract(e,this.consumeTill,"=");e._cur++;const n=this.extract(e,this.consumeTill,";");for(t[i]=n;";"===e.attValue[e._cur];){const i=this.extract(e,this.consumeTill,"=");e._cur++;const n=this.extract(e,this.consumeTill,";");t[i]=n}return t}parseRtcpFb(e){let t="";t="*"===this.peekChar(e)?this.extract(e,this.consume,"*"):this.extract(e,this.consumeTill,o),this.consumeAttributeSpace(e);const i=this.extract(e,this.consumeTill,o);let n;switch(i){case"trr-int":n={type:i,interval:this.extract(e,this.consumeTill)};break;case"ack":case"nack":default:{const t={type:i};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===o&&(t.additional=this.extract(e,this.consumeTill))),n=t}}if("*"===t)this.attributes.rtcpFeedbackWildcards.push(n);else{const e=this.attributes.payloads.find(e=>e.payloadType===parseInt(t,10));e?e.rtcpFeedbacks.push(n):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[n]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(e){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const t={port:this.extract(e,this.consumePort)};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,u),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,u),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}parseMsid(e){const t={id:this.extractOneOrMore(e,u,[1,64])};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,u,[1,64])),this.attributes.msids.push(t)}parseImageAttr(e){this.attributes.imageattr.push(e.attValue)}parseRid(e){const t=this.extractOneOrMore(e,e=>h(e)||a(e)||"_"===e||"-"===e);this.consumeAttributeSpace(e);const i={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===o){if(this.consumeAttributeSpace(e),this.peek(e,"pt=")){this.extract(e,this.consume,"pt=");const t=[];for(;;){const i=this.extract(e,this.consumeToken);t.push(i);try{this.extract(e,this.consume,",")}catch(e){break}}i.payloads=t,this.peekChar(e)===o&&this.extract(e,this.consume,o)}for(;;){const t=this.extract(e,this.consumeToken);switch(t){case"depend":{const n={type:t,rids:this.extract(e,this.consume,"=").split(",")};i.params.push(n);break}case"max-width":case"height-width":case"max-fps":case"max-fs":case"max-br":case"max-pps":case"max-bpp":default:{const n={type:t};"="===this.peekChar(e)&&(this.extract(e,this.consume,"="),n.val=this.extract(e,this.consumeTill,";")),i.params.push(n)}}try{this.extract(e,this.consume,";")}catch(e){break}}}this.attributes.rids.push(i)}parseSimulcast(e){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}parseSctpPort(e){this.attributes.sctpPort=this.extractOneOrMore(e,a,[1,5])}parseMaxMessageSize(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,a,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(e){this.attributes.mid=this.extract(e,this.consumeToken)}parseSSRCGroup(e){const t=this.extract(e,this.consumeToken),i=[];for(;;)try{this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeInteger);i.push(parseInt(t,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:i})}}function I(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class R{constructor(){I(this,"eol",r)}print(e,t){let i="";return t&&(this.eol=t),i+=this.printVersion(e.version),i+=this.printOrigin(e.origin),i+=this.printSessionName(e.sessionName),i+=this.printInformation(e.information),i+=this.printUri(e.uri),i+=this.printEmail(e.emails),i+=this.printPhone(e.phones),i+=this.printConnection(e.connection),i+=this.printBandwidth(e.bandwidths),i+=this.printTimeFields(e.timeFields),i+=this.printKey(e.key),i+=this.printSessionAttributes(e.attributes),i+=this.printMediaDescription(e.mediaDescriptions),i}printVersion(e){return"v=".concat(e).concat(this.eol)}printOrigin(e){return"o=".concat(e.username," ").concat(e.sessId," ").concat(e.sessVersion," ").concat(e.nettype," ").concat(e.addrtype," ").concat(e.unicastAddress).concat(this.eol)}printSessionName(e){return e?"s=".concat(e).concat(this.eol):""}printInformation(e){return e?"i=".concat(e).concat(this.eol):""}printUri(e){return e?"u=".concat(e).concat(this.eol):""}printEmail(e){let t="";for(const i of e)t+="e=".concat(i).concat(this.eol);return t}printPhone(e){let t="";for(const i of e)t+="e=".concat(i).concat(this.eol);return t}printConnection(e){return e?"c=".concat(e.nettype," ").concat(e.addrtype," ").concat(e.address).concat(this.eol):""}printBandwidth(e){let t="";for(const i of e)t+="b=".concat(i.bwtype,":").concat(i.bandwidth).concat(this.eol);return t}printTimeFields(e){let t="";for(const i of e){t+="t=".concat(i.time.startTime," ").concat(i.time.startTime).concat(this.eol);for(const e of i.repeats)t+="r=".concat(e.repeatInterval," ").concat(e.typedTimes.join(" ")).concat(this.eol);i.zoneAdjustments&&(t+="z=",t+="z=".concat(i.zoneAdjustments.map(e=>"".concat(e.time," ").concat(e.back?"-":""," ").concat(e.typedTime)).join(" ")).concat(this.eol),t+=this.eol)}return t}printKey(e){return e?"k=".concat(e).concat(this.eol):""}printAttributes(e){let t="";for(const i of e)t+="a=".concat(i.attField).concat(i.attValue?":".concat(i.attValue):"").concat(this.eol);return t}printMediaDescription(e){let t="";for(const i of e)t+=this.printMedia(i.media),t+=this.printInformation(i.information),t+=this.printConnections(i.connections),t+=this.printBandwidth(i.bandwidths),t+=this.printKey(i.key),t+=this.printMediaAttributes(i);return t}printConnections(e){let t="";for(const i of e)t+=this.printConnection(i);return t}printMedia(e){return"m=".concat(e.mediaType," ").concat(e.port," ").concat(e.protos.join("/")," ").concat(e.fmts.join(" ")).concat(this.eol)}printSessionAttributes(e){return new O(this.eol).print(e)}printMediaAttributes(e){return new k(this.eol).print(e)}}class w{constructor(e){I(this,"eol",void 0),this.eol=e}printIceUfrag(e){return void 0===e?"":"a=ice-ufrag:".concat(e).concat(this.eol)}printIcePwd(e){return void 0===e?"":"a=ice-pwd:".concat(e).concat(this.eol)}printIceOptions(e){return void 0===e?"":"a=ice-options:".concat(e.join(o)).concat(this.eol)}printFingerprints(e){return e.length>0?e.map(e=>"a=fingerprint:".concat(e.hashFunction).concat(o).concat(e.fingerprint)).join(this.eol)+this.eol:""}printExtmap(e){return e.map(e=>"a=extmap:".concat(e.entry).concat(e.direction?"/".concat(e.direction):"").concat(o).concat(e.extensionName).concat(e.extensionAttributes?"".concat(o).concat(e.extensionAttributes):"").concat(this.eol)).join("")}printSetup(e){return void 0===e?"":"a=setup:".concat(e).concat(this.eol)}printUnrecognized(e){return e.map(e=>"a=".concat(e.attField).concat(e.attValue?":".concat(e.attValue):"").concat(this.eol)).join("")}}class O extends w{print(e){let t="";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized),t}printGroups(e){let t="";return e.length>0&&(t+=e.map(e=>"a=group:".concat(e.semantic).concat(e.identificationTag.map(e=>"".concat(o).concat(e)).join("")).concat(this.eol)).join("")),t}printIceLite(e){return void 0===e?"":"a=ice-lite"+this.eol}printTlsId(e){return e?"a=tls-id:".concat(e).concat(this.eol):""}printIdentity(e){return 0===e.length?"":e.map(e=>"a=identity:".concat(e.assertionValue).concat(e.extensions.map(e=>"".concat(o).concat(e.name).concat(e.value?"=".concat(e.value):"")))).join(this.eol)+this.eol}printMsidSemantic(e){if(!e)return"";let t="a=msid-semantic:".concat(e.semantic);return e.applyForAll?t+="".concat(o,"*"):e.identifierList.length>0&&(t+=e.identifierList.map(e=>"".concat(o).concat(e))),t+this.eol}}class k extends w{print(e){const t=e.attributes;let i="";return i+=this.printRTCP(t.rtcp),i+=this.printIceUfrag(t.iceUfrag),i+=this.printIcePwd(t.icePwd),i+=this.printIceOptions(t.iceOptions),i+=this.printCandidates(t.candidates),i+=this.printRemoteCandidatesList(t.remoteCandidatesList),i+=this.printEndOfCandidates(t.endOfCandidates),i+=this.printFingerprints(t.fingerprints),i+=this.printSetup(t.setup),i+=this.printMid(t.mid),i+=this.printExtmap(t.extmaps),i+=this.printRTPRelated(t),i+=this.printPtime(t.ptime),i+=this.printMaxPtime(t.maxPtime),i+=this.printDirection(t.direction),i+=this.printSSRCGroups(t.ssrcGroups),i+=this.printSSRC(t.ssrcs),i+=this.printRTCPMux(t.rtcpMux),i+=this.printRTCPMuxOnly(t.rtcpMuxOnly),i+=this.printRTCPRsize(t.rtcpRsize),i+=this.printMSId(t.msids),i+=this.printImageattr(t.imageattr),i+=this.printRid(t.rids),i+=this.printSimulcast(t.simulcast),i+=this.printSCRPPort(t.sctpPort),i+=this.printMaxMessageSize(t.maxMessageSize),i+=this.printUnrecognized(t.unrecognized),i}printCandidates(e){return e.map(e=>"a=candidate:".concat(e.foundation).concat(o).concat(e.componentId).concat(o).concat(e.transport).concat(o).concat(e.priority).concat(o).concat(e.connectionAddress).concat(o).concat(e.port).concat(o,"typ").concat(o).concat(e.type).concat(e.relAddr?"".concat(o,"raddr").concat(o).concat(e.relAddr):"").concat(e.relPort?"".concat(o,"rport").concat(o).concat(e.relPort):"").concat(Object.keys(e.extension).map(t=>"".concat(o).concat(t).concat(o).concat(e.extension[t])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(e){return e.map(e=>"a=remote-candidates:".concat(e.join(o)).concat(this.eol)).join("")}printEndOfCandidates(e){return void 0===e?"":"a=end-of-candidates"+this.eol}printRTPRelated(e){if(!e.payloads)return"";const t=e.payloads;let i="";i+=e.rtcpFeedbackWildcards.map(e=>this.printRTCPFeedback("*",e)).join("");for(const n of t)i+=this.printRtpMap(n.payloadType,n.rtpMap),i+=this.printFmtp(n.payloadType,n.fmtp),i+=n.rtcpFeedbacks.map(e=>this.printRTCPFeedback(n.payloadType,e)).join("");return i}printFmtp(e,t){if(!t)return"";const i=Object.keys(t.parameters);return 1===i.length&&void 0===t.parameters[i[0]]?"a=fmtp:".concat(e).concat(o).concat(i[0]).concat(this.eol):"a=fmtp:".concat(e).concat(o).concat(Object.keys(t.parameters).map(e=>"".concat(e,"=").concat(t.parameters[e])).join(";")).concat(this.eol)}printRtpMap(e,t){return t?"a=rtpmap:".concat(e).concat(o).concat(t.encodingName,"/").concat(t.clockRate).concat(t.encodingParameters?"/".concat(t.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(e,t){let i="a=rtcp-fb:".concat(e).concat(o),n=t;switch(n.type){case"trr-int":i+="ttr-int".concat(o).concat(n.interval);break;case"ack":case"nack":default:n=n,i+="".concat(n.type),n.parameter&&(i+="".concat(o).concat(n.parameter),n.additional&&(i+="".concat(o).concat(n.additional)))}return i+this.eol}printPtime(e){return void 0===e?"":"a=ptime:".concat(e).concat(this.eol)}printMaxPtime(e){return void 0===e?"":"a=maxptime:".concat(e).concat(this.eol)}printDirection(e){return void 0===e?"":"a=".concat(e).concat(this.eol)}printSSRC(e){return e.map(e=>Object.keys(e.attributes).map(t=>"a=ssrc:".concat(e.ssrcId.toString(10)).concat(o).concat(t).concat(e.attributes[t]?":".concat(e.attributes[t]):"").concat(this.eol)).join("")).join("")}printRTCPMux(e){return void 0===e?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(e){return void 0===e?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(e){return void 0===e?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(e){if(void 0===e)return"";let t="a=rtcp:".concat(e.port);return e.netType&&(t+="".concat(o).concat(e.netType)),e.addressType&&(t+="".concat(o).concat(e.addressType)),e.address&&(t+="".concat(o).concat(e.address)),t+this.eol}printMSId(e){return e.map(e=>"a=msid:".concat(e.id).concat(e.appdata?"".concat(o).concat(e.appdata):"").concat(this.eol)).join("")}printImageattr(e){return e.map(e=>"a=imageattr:".concat(e).concat(this.eol)).join("")}printRid(e){return e.map(e=>{let t="a=rid:".concat(e.id).concat(o).concat(e.direction);return e.payloads&&(t+="".concat(o,"pt=").concat(e.payloads.join(","))),e.params.length>0&&(t+="".concat(o).concat(e.params.map(e=>"depend"===e.type?"depend=".concat(e.rids.join(",")):"".concat(e.type,"=").concat(e.val)).join(";"))),t+this.eol}).join("")}printSimulcast(e){return void 0===e?"":"a=simulcast:".concat(e).concat(this.eol)}printSCRPPort(e){return void 0===e?"":"a=sctp-port:".concat(e).concat(this.eol)}printMaxMessageSize(e){return void 0===e?"":"a=max-message-size:".concat(e)}printMid(e){return void 0===e?"":"a=mid:".concat(e).concat(this.eol)}printSSRCGroups(e){return e.map(e=>"a=ssrc-group:".concat(e.semantic).concat(e.ssrcIds.map(e=>"".concat(o).concat(e.toString(10))).join("")).concat(this.eol)).join("")}}function N(e){return(new S).parse(e)}function L(e,t){return(new R).print(e,t)}}},t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}return i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(8)})()}));function Jv(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function Xv(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=Jv(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=Jv(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}function eE(e,t,i,n,r){var o;let s=[],a=[],c=[],l=[],u=!1,d=!1;const h=Kv.parse(e);if(Ji(o=h.mediaDescriptions).call(o,e=>{"video"!==e.media.mediaType||u||(a=e.attributes.payloads,l=e.attributes.extmaps,u=!0),"audio"!==e.media.mediaType||d||(s=e.attributes.payloads,c=e.attributes.extmaps,d=!0)}),!l||0===a.length)throw new Error("Cannot get video capabilities from SDP.");if(!c||0===s.length)throw new Error("Cannot get audio capabilities from SDP.");return Ji(a).call(a,e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=Cn(e.rtpMap.clockRate))}),Ji(s).call(s,e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=Cn(e.rtpMap.clockRate))}),t&&(s=Gn(s).call(s,e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}),a=Gn(a).call(a,e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),i&&(a=Gn(a).call(a,e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")})),n&&(null==n?void 0:n.length)>0&&(s=Gn(s).call(s,e=>{var t;return ns(n).call(n,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")})),r&&(null==r?void 0:r.length)>0&&(a=Gn(a).call(a,e=>{var t;return ns(r).call(r,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")})),{audioCodecs:s,videoCodecs:a,audioExtensions:c,videoExtensions:l}}function tE(e){const t=Kv.parse(e);let i,n;for(const r of t.mediaDescriptions){if(!i){const e=r.attributes.iceUfrag,t=r.attributes.icePwd;if(!e||!t)throw new Error("Cannot get iceUfrag or icePwd from SDP.");i={iceUfrag:e,icePwd:t}}if(!n){const e=r.attributes.fingerprints;e.length>0&&(n={fingerprints:e})}}if(!n&&t.attributes.fingerprints.length>0&&(n={fingerprints:t.attributes.fingerprints}),!n||!i)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:i,dtlsParameters:n}}function iE(e){var t,i,n;const{dtls:r,ice:o,rtpCapabilities:s,cname:a}=e,{candidates:c,defaultIp:l,defaultPort:u}=cE(o.candidates),d={fingerprints:vo(t=r.fingerprints).call(t,e=>({hashFunction:e.algorithm,fingerprint:e.fingerprint}))},h={iceUfrag:o.iceUfrag,icePwd:o.icePwd};let p;switch(r.role){case"server":p="passive";break;case"client":p="active";break;case"auto":p="actpass"}return Ji(i=s.audioCodecs).call(i,e=>{hl(e.rtcpFeedbacks)||(e.rtcpFeedbacks=[])}),Ji(n=s.videoCodecs).call(n,e=>{hl(e.rtcpFeedbacks)||(e.rtcpFeedbacks=[])}),s.audioExtensions||(s.audioExtensions=[]),s.videoExtensions||(s.videoExtensions=[]),{dtlsParameters:d,iceParameters:h,candidates:c,rtpCapabilities:s,setup:p,cname:a,defaultIp:l,defaultPort:u}}function nE(e,t,i){const n=[],r=[];return Ji(e).call(e,({ssrcId:e,rtx:o})=>{var s;const a=Op(8,"track-"),c={ssrcId:e,attributes:Xv({label:a,mslabel:i=i||Op(10,""),msid:Je(s="".concat(i," ")).call(s,a)},t&&{cname:t})};if(n.push(c),void 0!==o){var l;const s={ssrcId:o,attributes:Xv({label:a,mslabel:i,msid:Je(l="".concat(i," ")).call(l,a)},t&&{cname:t})};n.push(s),r.push({semantic:"FID",ssrcIds:[e,o]})}}),e.length>1&&r.push({semantic:"SIM",ssrcIds:vo(e).call(e,({ssrcId:e})=>e)}),{ssrcs:n,ssrcGroups:r}}function rE(e,t){var i;t instanceof jh&&Ji(i=e.attributes.payloads).call(i,e=>{var i;if("opus"!==(null===(i=e.rtpMap)||void 0===i?void 0:i.encodingName.toLowerCase()))return;e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime="10",e.fmtp.parameters.useinbandfec="1";const n=t._encoderConfig;n&&(n.bitrate&&!Ia()&&(e.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*n.bitrate))),n.sampleRate&&(e.fmtp.parameters.maxplaybackrate="".concat(n.sampleRate),e.fmtp.parameters["sprop-maxcapturerate"]="".concat(n.sampleRate)),n.stereo&&(e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"))})}function oE(e){var t;const i=Lv(t=e.attributes.unrecognized).call(t,e=>"x-google-flag"===e.attField&&"conference"===e.attValue);var n;-1!==i&&To(n=e.attributes.unrecognized).call(n,i,1)}function sE(e,t){var i,n;if(!(t instanceof bv&&t._encoderConfig&&-1===Lo(i=t._hints).call(i,Eu.SCREEN_TRACK)))return;const r=t._encoderConfig;var o,s;Fu().supportMinBitrate&&r.bitrateMin&&Ji(o=e.attributes.payloads).call(o,e=>{var t,i;ns(t=["h264","vp8","vp9","av1"]).call(t,(null===(i=e.rtpMap)||void 0===i?void 0:i.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-min-bitrate"]="".concat(r.bitrateMin))}),Fu().supportMinBitrate&&!ns(n=t._hints).call(n,Eu.LOW_STREAM)&&r.bitrateMax&&Ji(s=e.attributes.payloads).call(s,e=>{var t,i;ns(t=["h264","vp8","vp9","av1"]).call(t,(null===(i=e.rtpMap)||void 0===i?void 0:i.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-start-bitrate"]="".concat(Math.floor(r.bitrateMax)))})}function aE(e,t,i){if(!t)return;let n,r;if("video"===e.media.mediaType?(n=i.videoExtensions,r=i.videoCodecs):(n=i.audioExtensions,r=i.audioCodecs),!0===t.tcc){const t=Qo(n).call(n,e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName);if(t){var o;Qo(o=e.attributes.extmaps).call(o,e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName)||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"});const i=function(e,t){return Gn(t).call(t,t=>!!Qo(e).call(e,e=>{var i;return e.payloadType===t.payloadType&&!!Qo(i=e.rtcpFeedbacks).call(i,e=>"transport-cc"===e.type)}))}(r,e.attributes.payloads);Ji(i).call(i,e=>{var t;Qo(t=e.rtcpFeedbacks).call(t,e=>"transport-cc"===e.type)||e.rtcpFeedbacks.push({type:"transport-cc"})})}}else if(!1===t.tcc){var s,a;const t=Lv(s=e.attributes.extmaps).call(s,e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName);var c;-1!==t&&To(c=e.attributes.extmaps).call(c,t,1),Ji(a=e.attributes.payloads).call(a,e=>{var t;const i=Lv(t=e.rtcpFeedbacks).call(t,e=>"transport-cc"===e.type);var n;-1!==i&&To(n=e.rtcpFeedbacks).call(n,i,1)})}if(!0===t.remb){const t=Qo(n).call(n,e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName);if(t){var l;Qo(l=e.attributes.extmaps).call(l,e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName)||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"});const i=function(e,t){return Gn(t).call(t,t=>!!Qo(e).call(e,e=>{var i;return e.payloadType===t.payloadType&&!!Qo(i=e.rtcpFeedbacks).call(i,e=>"goog-remb"===e.type)}))}(r,e.attributes.payloads);Ji(i).call(i,e=>{var t;Qo(t=e.rtcpFeedbacks).call(t,e=>"goog-remb"===e.type)||e.rtcpFeedbacks.push({type:"goog-remb"})})}}else if(!1===t.remb){var u,d;const t=Lv(u=e.attributes.extmaps).call(u,e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName);var h;-1!==t&&To(h=e.attributes.extmaps).call(h,t,1),Ji(d=e.attributes.payloads).call(d,e=>{var t;const i=Lv(t=e.rtcpFeedbacks).call(t,e=>"goog-remb"===e.type);var n;-1!==i&&To(n=e.rtcpFeedbacks).call(n,i,1)})}}function cE(e){var t;const i=[];Ji(e).call(e,e=>{const t={foundation:e.foundation,componentId:"1",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}};i.push(t),i.push(Xv({},t,{componentId:"2"}))});const n=i[0].connectionAddress||"0.0.0.0",r=i[0].port||"9";return Rc.debug(Je(t="choose highest priority candidate IP:port ".concat(n,":")).call(t,r," as default ICE connection address")),{candidates:i,defaultIp:n,defaultPort:r}}class lE{constructor(e){e=jp(e);const{remoteIceParameters:t,remoteDtlsParameters:i,candidates:n,remoteRTPCapabilities:r,remoteSetup:o,localCapabilities:s,sdkCodec:a,cname:c,ip:l,port:u}=e,d=Kv.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=r,this.candidates=n,this.iceParameters=t,this.dtlsParameters=i,this.setup=o,this.localCapabilities=s,this.cname=c,this.ip=l,this.port=u,this.addressType=-1===Lo(l).call(l,":")?"IP4":"IP6";for(let m=0;m<d.mediaDescriptions.length;m++){var h;const e=d.mediaDescriptions[m];if(e.media.port=this.port,Ji(h=e.connections).call(h,e=>{e.address=this.ip,e.addrtype=this.addressType}),e.attributes.rtcp?(e.attributes.rtcp.address=this.ip,e.attributes.rtcp.port=this.port,e.attributes.rtcp.addressType=this.addressType):e.attributes.rtcp={port:u,address:l,netType:"IN",addressType:this.addressType},e.attributes.iceUfrag=t.iceUfrag,e.attributes.icePwd=t.icePwd,e.attributes.fingerprints=i.fingerprints,e.attributes.candidates=n,e.attributes.setup=o,"video"===e.media.mediaType){var p,f;e.media.fmts=vo(p=r.videoCodecs).call(p,e=>e.payloadType.toString(10));const t=Gn(f=r.videoCodecs).call(f,e=>{var t,i;return null===(t=e.rtpMap)||void 0===t?void 0:ns(i=t.encodingName.toLowerCase()).call(i,a)});if(0===t.length)throw new Error("Codec ".concat(a," not supported by remote SDP."));e.attributes.payloads=t,e.attributes.extmaps=r.videoExtensions}var g;"audio"===e.media.mediaType&&(e.media.fmts=vo(g=r.audioCodecs).call(g,e=>e.payloadType.toString(10)),e.attributes.payloads=r.audioCodecs,e.attributes.extmaps=r.audioExtensions),d.mediaDescriptions[m]=this.mungMediaDesc(e)}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}toString(){return Kv.print(this.sessionDesc)}send(e,t,i){var n,r,o;const{ssrcs:s,ssrcGroups:a}=nE(t,this.cname),c=Qo(n=this.sessionDesc.mediaDescriptions).call(n,t=>e===Ou.VIDEO?"video"===t.media.mediaType:"audio"===t.media.mediaType),l=s[0].attributes.label,u=s[0].attributes.mslabel;return c.attributes.ssrcs=Je(r=c.attributes.ssrcs).call(r,s),c.attributes.ssrcGroups=Je(o=c.attributes.ssrcGroups).call(o,a),{id:l,mslabel:u}}stopSending(e){var t;Ji(t=this.sessionDesc.mediaDescriptions).call(t,t=>{var i,n;const r=[],o=[],s=[];Ji(i=t.attributes.ssrcs).call(i,t=>{ns(e).call(e,t.attributes.label||"")?s.push(t):r.push(t)}),Ji(n=t.attributes.ssrcGroups).call(n,e=>{var t;ns(t=vo(s).call(s,e=>e.ssrcId)).call(t,e.ssrcIds[0])||o.push(e)}),t.attributes.ssrcs=r,t.attributes.ssrcGroups=o})}mute(e){var t;const i=Qo(t=this.sessionDesc.mediaDescriptions).call(t,t=>t.attributes.mid===e);if(!i)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(e){var t;const i=Qo(t=this.sessionDesc.mediaDescriptions).call(t,t=>t.attributes.mid===e);if(!i)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}receive(e,t,i){Ji(e).call(e,(e,t)=>{var i;const n=e._mediaStreamTrack,r=Lv(i=this.sessionDesc.mediaDescriptions).call(i,e=>e.attributes.mid===n.kind),o=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],e);this.sessionDesc.mediaDescriptions[r]=o})}stopReceiving(e){}restartICE(e,t,i,n){var r;e=jp(e),t=jp(t),this.iceParameters=e,this.candidates=t,this.ip=i,this.port=n,this.addressType=-1===Lo(i).call(i,":")?"IP4":"IP6",Ji(r=this.sessionDesc.mediaDescriptions).call(r,t=>{var r;t.media.port=this.port,Ji(r=t.connections).call(r,e=>{e.address=i,e.addrtype=this.addressType}),t.attributes.rtcp?(t.attributes.rtcp.address=this.ip,t.attributes.rtcp.port=this.port,t.attributes.rtcp.addressType=this.addressType):t.attributes.rtcp={port:n,address:i,netType:"IN",addressType:this.addressType},t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd,t.attributes.candidates=this.candidates})}predictReceivingMids(e){const t=[];for(let i=0;i<e;i++)t.push((this.currentMidIndex+i+1).toString(10));return t}mungRecvMediaDsec(e,t){const i=jp(e);return rE(i,t),sE(i,t),i}updateRecvMedia(e,t){var i;const n=Lv(i=this.sessionDesc.mediaDescriptions).call(i,t=>t.attributes.mid===e);if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}updateTrackLabel(e,t,i){var n;const r=Qo(n=this.sessionDesc.mediaDescriptions).call(n,t=>e===Ou.VIDEO?"video"===t.attributes.mid:"audio"===t.attributes.mid);if(r){var o;const e=Qo(o=r.attributes.ssrcs).call(o,e=>e.attributes.label===t);var s;e&&(e.attributes.label=i,null===(s=e.attributes.msid)||void 0===s||s.replace(t,i))}}mungMediaDesc(e){const t=jp(e);return oE(t),function(e){var t,i;const n=Qo(t=e.attributes.extmaps).call(t,e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName);var r,o;n&&To(r=e.attributes.extmaps).call(r,Lo(o=e.attributes.extmaps).call(o,n),1),Ji(i=e.attributes.payloads).call(i,e=>{var t;const i=Lv(t=e.rtcpFeedbacks).call(t,e=>"transport-cc"===e.type);var n;-1!==i&&To(n=e.rtcpFeedbacks).call(n,i,1)})}(t),t}}function uE(e){if(Array.isArray(e))return e.map((function(e){return e}));if(!dE(e))return e;var t={};for(var i in e)dE(e[i])||Array.isArray(e[i])?t[i]=uE(e[i]):t[i]=e[i];return t}function dE(e){return!("object"!=typeof e||Array.isArray(e)||!e)}var hE=function(){function e(e){this.input=[],this.size=e}return e.prototype.add=function(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)},e.prototype.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},e}(),pE=function(e,t){return(pE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */function fE(e,t){function i(){this.constructor=e}pE(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var gE=function(){return(gE=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function mE(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new i((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function _E(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var vE,EE={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[]},AE={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0},yE={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},SE={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},CE={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},bE=function(){function e(e,t){var i=this;this.videoIsReady=!1,this.videoIsReady2={},this.stats=uE(EE),this.isFirstVideoReceived={},this.isFirstVideoDecoded={},this.isFirstAudioReceived={},this.isFirstAudioDecoded={},this.lossRateWindowStats=[],this.pc=e,this.options=t,this.intervalTimer=window.setInterval((function(){return mE(i,void 0,void 0,(function(){return _E(this,(function(e){return this.updateStats(),[2]}))}))}),this.options.updateInterval)}return e.prototype.getStats=function(){return this.stats},e.prototype.setVideoIsReady=function(e){this.videoIsReady=e},e.prototype.setVideoIsReady2=function(e,t){this.videoIsReady2[e]=t},e.prototype.getVideoIsReady=function(e){return this.videoIsReady2[e]||!1},e.prototype.setIsFirstAudioDecoded=function(e){},e.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},e.prototype.calcLossRate=function(e){var t=this;this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var i=this.lossRateWindowStats.length,n=0,r=0,o=0,s=0,a=function(a){e[a].forEach((function(e,c){if(t.lossRateWindowStats[i-1][a][c]&&t.lossRateWindowStats[0][a][c]){var l=t.lossRateWindowStats[i-1][a][c].packets-t.lossRateWindowStats[0][a][c].packets,u=t.lossRateWindowStats[i-1][a][c].packetsLost-t.lossRateWindowStats[0][a][c].packetsLost;"videoSend"===a||"audioSend"===a?(n+=l,o+=u):(r+=l,s+=u),Number.isNaN(l)||Number.isNaN(l)?e.packetLostRate=0:e.packetLostRate=l<=0||u<=0?0:u/(l+u)}}))},c=0,l=["videoSend","audioSend","videoRecv","audioRecv"];c<l.length;c++)a(l[c]);e.sendPacketLossRate=n<=0||o<=0?0:o/(n+o),e.recvPacketLossRate=r<=0||s<=0?0:s/(r+s)},e}(),TE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._stats=EE,t.lastDecodeVideoReceiverStats=new Map,t}return fE(t,e),t.prototype.updateStats=function(){return mE(this,void 0,void 0,(function(){var e,t,i,n;return _E(this,(function(r){switch(r.label){case 0:return[4,this._getStats()];case 1:return e=r.sent(),t=this.statsResponsesToObjects(e),this._stats=uE(EE),i=t.filter((function(e){return"ssrc"===e.type})),this.processSSRCStats(i),(n=t.find((function(e){return"VideoBwe"===e.type})))&&this.processBandwidthStats(n),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}}))}))},t.prototype.processBandwidthStats=function(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)},t.prototype.processSSRCStats=function(e){var t=this;e.forEach((function(e){var i=e.id.includes("send");switch(e.mediaType+"_"+(i?"send":"recv")){case"video_send":var n=uE(yE);n.codec=e.googCodecName,n.adaptionChangeReason="none",e.googCpuLimitedResolution&&(n.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(n.adaptionChangeReason="bandwidth"),n.avgEncodeMs=Number(e.googAvgEncodeMs),n.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},n.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},n.firsCount=Number(e.googFirReceived),n.nacksCount=Number(e.googNacksReceived),n.plisCount=Number(e.googPlisReceived),n.frameCount=Number(e.framesEncoded),n.bytes=Number(e.bytesSent),n.packets=Number(e.packetsSent),n.packetsLost=Number(e.packetsLost),n.ssrc=Number(e.ssrc),n.rttMs=Number(e.googRtt||0),t._stats.videoSend.push(n),t._stats.rtt=n.rttMs;break;case"video_recv":var r=uE(AE),o=t.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(r.codec=e.googCodecName,r.targetDelayMs=Number(e.googTargetDelayMs),r.renderDelayMs=Number(e.googRenderDelayMs),r.currentDelayMs=Number(e.googCurrentDelayMs),r.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),r.decodeMs=Number(e.googDecodeMs),r.maxDecodeMs=Number(e.googMaxDecodeMs),r.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},r.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},r.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},r.jitterBufferMs=Number(e.googJitterBufferMs),r.firsCount=Number(e.googFirsSent),r.nacksCount=Number(e.googNacksSent),r.plisCount=Number(e.googPlisSent),r.framesDecodeCount=Number(e.framesDecoded),r.bytes=Number(e.bytesReceived),r.packets=Number(e.packetsReceived),r.packetsLost=Number(e.packetsLost),r.ssrc=Number(e.ssrc),r.packets>0&&!t.isFirstVideoReceived[r.ssrc]&&(t.onFirstVideoReceived&&t.onFirstVideoReceived(r.ssrc),t.isFirstVideoReceived[r.ssrc]=!0),r.framesDecodeCount>0&&!t.isFirstVideoDecoded[r.ssrc]&&(t.onFirstVideoDecoded&&t.onFirstVideoDecoded(r.ssrc,r.decodedFrame.width,r.decodedFrame.height),t.isFirstVideoDecoded[r.ssrc]=!0),o){var s=o.stats,a=Date.now()-o.lts;r.framesDecodeFreezeTime=s.framesDecodeFreezeTime,r.framesDecodeInterval=s.framesDecodeInterval,r.framesDecodeCount>s.framesDecodeCount&&t.isFirstVideoDecoded?(o.lts=Date.now(),r.framesDecodeInterval=a,r.framesDecodeInterval>=t.options.freezeRateLimit&&(t.getVideoIsReady(parseInt(e.ssrc,10))?r.framesDecodeFreezeTime+=r.framesDecodeInterval:t.setVideoIsReady2(parseInt(e.ssrc,10),!0))):r.framesDecodeCount<o.stats.framesDecodeCount&&(r.framesDecodeInterval=0)}t.lastDecodeVideoReceiverStats.set(r.ssrc,{stats:gE({},r),lts:Date.now()}),t._stats.videoRecv.push(r);break;case"audio_recv":var c=uE(CE);c.codec=e.googCodecName,c.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,c.decodingCNG=Number(e.googDecodingCNG),c.decodingCTN=Number(e.googDecodingCTN),c.decodingCTSG=Number(e.googDecodingCTSG),c.decodingNormal=Number(e.googDecodingNormal),c.decodingPLC=Number(e.googDecodingPLC),c.decodingPLCCNG=Number(e.googDecodingPLCCNG),c.expandRate=Number(e.googExpandRate),c.accelerateRate=Number(e.googAccelerateRate),c.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),c.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),c.speechExpandRate=Number(e.googSpeechExpandRate),c.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),c.jitterBufferMs=Number(e.googJitterBufferMs),c.jitterMs=Number(e.googJitterReceived),c.bytes=Number(e.bytesReceived),c.packets=Number(e.packetsReceived),c.packetsLost=Number(e.packetsLost),c.ssrc=Number(e.ssrc),c.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),c.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),c.receivedFrames>0&&!t.isFirstAudioReceived[c.ssrc]&&(t.onFirstAudioReceived&&t.onFirstAudioReceived(c.ssrc),t.isFirstAudioReceived[c.ssrc]=!0),c.decodingNormal>0&&!t.isFirstAudioDecoded[c.ssrc]&&(t.onFirstAudioDecoded&&t.onFirstAudioDecoded(c.ssrc),t.isFirstAudioDecoded[c.ssrc]=!0),t._stats.audioRecv.push(c);break;case"audio_send":var l=uE(SE);l.codec=e.googCodecName,l.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,l.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),l.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),l.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),l.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),l.bytes=Number(e.bytesSent),l.packets=Number(e.packetsSent),l.packetsLost=Number(e.packetsLost),l.ssrc=Number(e.ssrc),l.rttMs=Number(e.googRtt||0),t._stats.rtt=l.rttMs,t._stats.audioSend.push(l)}}))},t.prototype._getStats=function(){var e=this;return new Promise((function(t,i){e.pc.getStats(t,i)}))},t.prototype.statsResponsesToObjects=function(e){var t=[];return e.result().forEach((function(e){var i={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((function(t){i[t]=e.stat(t)})),t.push(i)})),t},t}(bE);!function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(vE||(vE={}));var IE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._stats=EE,t.lastDecodeVideoReceiverStats=new Map,t.lastVideoFramesRecv=new Map,t.lastVideoFramesSent=new Map,t.lastVideoFramesDecode=new Map,t.lastVideoJBDelay=new Map,t.lastAudioJBDelay=new Map,t.mediaBytesSent=new Map,t.mediaBytesRetransmit=new Map,t.mediaBytesTargetEncode=new Map,t.lastEncoderMs=new Map,t}return fE(t,e),t.prototype.updateStats=function(){return mE(this,void 0,void 0,(function(){var e,t=this;return _E(this,(function(i){switch(i.label){case 0:return e=this,[4,this.pc.getStats()];case 1:return e.report=i.sent(),this._stats=uE(EE),this.report.forEach((function(e){switch(e.type){case vE.OUTBOUND:"audio"===e.mediaType?t.processAudioOutboundStats(e):"video"===e.mediaType&&t.processVideoOutboundStats(e);break;case vE.INBOUND:"audio"===e.mediaType?t.processAudioInboundStats(e):"video"===e.mediaType&&t.processVideoInboundStats(e);break;case vE.TRANSPORT:var i=t.report.get(e.selectedCandidatePairId);i&&t.processCandidatePairStats(i);break;case vE.CANDIDATE_PAIR:e.selected&&t.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}}))}))},t.prototype.processCandidatePairStats=function(e){this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}))},t.prototype.processAudioInboundStats=function(e){var t=this._stats.audioRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=uE(CE),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,e.trackId&&this.processAudioTrackReceiverStats(e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0)},t.prototype.processVideoInboundStats=function(e){var t=this._stats.videoRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=uE(AE),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded;var i=this.lastDecodeVideoReceiverStats.get(t.ssrc),n=this.lastVideoFramesDecode.get(t.ssrc),r=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){var o=t.decodedFrame?t.decodedFrame.width:0,s=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,o,s),this.isFirstVideoDecoded[t.ssrc]=!0}if(i){var a=i.stats,c=r-i.lts;t.framesDecodeFreezeTime=a.framesDecodeFreezeTime,t.framesDecodeInterval=a.framesDecodeInterval,t.framesDecodeCount>a.framesDecodeCount&&this.isFirstVideoDecoded?(i.lts=Date.now(),t.framesDecodeInterval=c,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<a.framesDecodeCount&&(t.framesDecodeInterval=0)}n&&r-n.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-n.count)/((r-n.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:r,rate:t.decodeFrameRate})):n?t.decodeFrameRate=n.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:r,rate:0}),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),e.trackId&&this.processVideoTrackReceiverStats(e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:gE({},t),lts:i?i.lts:Date.now()})},t.prototype.processVideoOutboundStats=function(e){var t=this._stats.videoSend.find((function(t){return t.ssrc===e.ssrc}));t||(t=uE(yE),this._stats.videoSend.push(t));var i=this.mediaBytesSent.get(e.ssrc);if(i?i.add(e.bytesSent):((r=new hE(10)).add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,r)),void 0!==e.retransmittedBytesSent){var n=this.mediaBytesRetransmit.get(e.ssrc);n?n.add(e.retransmittedBytesSent):((r=new hE(10)).add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,r))}if(e.totalEncodedBytesTarget){var r,o=this.mediaBytesTargetEncode.get(e.ssrc);o?o.add(e.totalEncodedBytesTarget):((r=new hE(10)).add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,r))}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,e.totalEncodeTime&&e.framesEncoded){var s=this.lastEncoderMs.get(e.ssrc);if(!s||s.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{var a=e.framesEncoded-s.lastFrameCount,c=e.totalEncodeTime-s.lastEncoderTime;t.avgEncodeMs=1e3*c/a}this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lts:Date.now()})}if(e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),e.trackId&&this.processVideoTrackSenderStats(e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{var l=this.findRemoteStatsId(e.ssrc,vE.REMOTE_INBOUND);l&&this.processRemoteInboundStats(l,t)}},t.prototype.processAudioOutboundStats=function(e){var t=this._stats.audioSend.find((function(t){return t.ssrc===e.ssrc}));if(t||(t=uE(SE),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.trackId&&this.processAudioTrackSenderStats(e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{var i=this.findRemoteStatsId(e.ssrc,vE.REMOTE_INBOUND);i&&this.processRemoteInboundStats(i,t)}},t.prototype.findRemoteStatsId=function(e,t){var i=Array.from(this.report.values()).find((function(i){return i.type===t&&i.ssrc===e}));return i?i.id:null},t.prototype.processVideoMediaSource=function(e,t){var i=this.report.get(e);i&&i.width&&i.height&&i.framesPerSecond&&(t.inputFrame={width:i.width,height:i.height,frameRate:i.framesPerSecond})},t.prototype.processAudioMediaSource=function(e,t){var i=this.report.get(e);i&&(t.inputLevel=i.audioLevel)},t.prototype.processVideoTrackSenderStats=function(e,t){var i=this.report.get(e);if(i){var n=0,r=Date.now(),o=this.lastVideoFramesSent.get(t.ssrc);o&&r-o.lts>=800?(n=Math.round((i.framesSent-o.count)/((r-o.lts)/1e3)),this.lastVideoFramesSent.set(t.ssrc,{count:i.framesSent,lts:r,rate:n})):o?n=o.rate:this.lastVideoFramesSent.set(t.ssrc,{count:i.framesSent,lts:r,rate:0}),t.sentFrame={width:i.frameWidth,height:i.frameHeight,frameRate:n}}},t.prototype.processVideoTrackReceiverStats=function(e,t){var i=this.report.get(e);if(i){var n=this.lastVideoFramesRecv.get(t.ssrc),r=Date.now();t.framesReceivedCount=i.framesReceived;var o=0;if(n&&r-n.lts>=800?(o=Math.round((i.framesReceived-n.count)/((r-n.lts)/1e3)),this.lastVideoFramesRecv.set(t.ssrc,{count:i.framesReceived,lts:r,rate:o})):n?o=n.rate:this.lastVideoFramesRecv.set(t.ssrc,{count:i.framesReceived,lts:r,rate:0}),t.receivedFrame={width:i.frameWidth||0,height:i.frameHeight||0,frameRate:o||0},t.decodedFrame={width:i.frameWidth||0,height:i.frameHeight||0,frameRate:t.decodeFrameRate||0},t.outputFrame={width:i.frameWidth||0,height:i.frameHeight||0,frameRate:t.decodeFrameRate||0},i.jitterBufferDelay&&i.jitterBufferEmittedCount){var s=this.lastVideoJBDelay.get(t.ssrc);this.lastVideoJBDelay.set(t.ssrc,{jitterBufferDelay:i.jitterBufferDelay,jitterBufferEmittedCount:i.jitterBufferEmittedCount}),s||(s={jitterBufferDelay:0,jitterBufferEmittedCount:0});var a=1e3*(i.jitterBufferDelay-s.jitterBufferDelay)/(i.jitterBufferEmittedCount-s.jitterBufferEmittedCount);t.jitterBufferMs=a,t.currentDelayMs=Math.round(a)}}},t.prototype.processAudioTrackSenderStats=function(e,t){var i=this.report.get(e);i&&(t.aecReturnLoss=i.echoReturnLoss||0,t.aecReturnLossEnhancement=i.echoReturnLossEnhancement||0)},t.prototype.processAudioTrackReceiverStats=function(e,t){var i=this.report.get(e);if(i){if(i.removedSamplesForAcceleration&&i.totalSamplesReceived&&(t.accelerateRate=i.removedSamplesForAcceleration/i.totalSamplesReceived),i.jitterBufferDelay&&i.jitterBufferEmittedCount){var n=this.lastAudioJBDelay.get(t.ssrc);this.lastAudioJBDelay.set(t.ssrc,{jitterBufferDelay:i.jitterBufferDelay,jitterBufferEmittedCount:i.jitterBufferEmittedCount}),n||(n={jitterBufferDelay:0,jitterBufferEmittedCount:0});var r=1e3*(i.jitterBufferDelay-n.jitterBufferDelay)/(i.jitterBufferEmittedCount-n.jitterBufferEmittedCount);t.jitterBufferMs=Math.round(r)}t.outputLevel=i.audioLevel;var o=1920;i.totalSamplesDuration&&i.totalSamplesReceived&&(o=i.totalSamplesReceived/i.totalSamplesDuration/50,t.receivedFrames=Math.round(i.totalSamplesReceived/o)),i.concealedSamples&&(t.droppedFrames=Math.round(i.concealedSamples/o))}},t.prototype.processRemoteInboundStats=function(e,t){var i=this.report.get(e);i&&(t.packetsLost=i.packetsLost,i.roundTripTime&&(t.rttMs=1e3*i.roundTripTime))},t.prototype.getCodecFromCodecStats=function(e){var t=this.report.get(e);if(!t)return"";var i=t.mimeType.match(/\/(.*)$/);return i&&i[1]?i[1]:""},t.prototype.updateSendBitrate=function(){var e=0,t=null,i=null;this.mediaBytesSent.forEach((function(t){e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((function(e){t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((function(e){i=null===i?e.diffMean():i+e.diffMean()}));var n=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*n/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==i&&(this._stats.bitrate.targetEncoded=8*i/(this.options.updateInterval/1e3))},t}(bE),RE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fE(t,e),t.prototype.updateStats=function(){return Promise.resolve()},t}(bE);function wE(e,t,i,n){void 0===t&&(t=250),void 0===i&&(i=8),void 0===n&&(n=500);var r,o=(r=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i))&&r[0]?Number(r[0].split("/")[1]):null;return o?o<76?new TE(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n}):new IE(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n}):function(e){return!!window.RTCStatsReport&&e.getStats()instanceof Promise}(e)?new IE(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n}):new RE(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:n})}function OE(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}var kE=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Un(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&hn(t,i,s),s},NE=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class LE extends xu{constructor(e,t){super(e,t),this.useRTX=!1,this.localCandidateCount=0,this.allCandidatesReceived=!1,this.mutex=new ah("P2PConnection-mutex"),this.store=t,this.peerConnection=new RTCPeerConnection(LE.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.statsFilter=wE(this.peerConnection,void 0,void 0,Ia()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}async establish(){try{const e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=tE(e.sdp),i=eE(e.sdp,!this.useRTX,!1,["opus"]);return this.localCapabilities=i,this.initialOffer=e,function(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=OE(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=OE(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}({},t,{rtpCapabilities:i,offerSDP:e.sdp})}catch(e){throw new pl(ll.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,i,n,r,o,s,a){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new lE({remoteIceParameters:e,remoteDtlsParameters:t,candidates:i,remoteRTPCapabilities:n,remoteSetup:r,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:o,ip:s,port:a});const c=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:c})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}send(e,t){var i=this;return Qv((function*(){const n=yield Wv(i.mutex.lock());try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const r=vo(e).call(e,e=>i.peerConnection.addTrack(e._mediaStreamTrack)),o=yield Wv(i.peerConnection.createOffer()),s=Kv.parse(o.sdp),a=vo(e).call(e,e=>{var t;const n=e._mediaStreamTrack,r=Qo(t=s.mediaDescriptions).call(t,e=>e.attributes.mid===n.kind);if(!r)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t,i){var n;const r=Gn(n=e.attributes.ssrcs).call(n,e=>e.attributes.label===t),o=e.attributes.ssrcGroups;if(0===r.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(o&&r.length>1){const e=Qo(o).call(o,e=>{var t;return-1!==Lo(t=e.ssrcIds).call(t,r[0].ssrcId)});return e?[{ssrcId:e.ssrcIds[0],rtx:i?e.ssrcIds[1]:void 0}]:[{ssrcId:r[0].ssrcId}]}return[{ssrcId:r[0].ssrcId}]}(r,n.id,i.useRTX)});let c;try{c=yield a}catch(e){throw Ji(r).call(r,e=>{Ta()&&e.replaceTrack(null),i.peerConnection.removeTrack(e)}),e}const l=i.mungSendOfferSDP(o.sdp,e);i.remoteSDP.receive(e,t,c);const u=i.remoteSDP.toString();return yield Wv(i.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield Wv(i.applySendEncodings(r,e)),yield Wv(i.peerConnection.setRemoteDescription({type:"answer",sdp:u})),vo(e).call(e,(e,t)=>{const i=e._mediaStreamTrack.id;return{localSSRC:a[t],id:i}})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{n()}}))()}async stopSending(e){try{var t;if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const i=Gn(t=this.peerConnection.getSenders()).call(t,t=>{var i;return-1!==Lo(e).call(e,(null===(i=t.track)||void 0===i?void 0:i.id)||"")});if(i.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");vo(i).call(i,e=>{Ta()&&e.replaceTrack(null),this.peerConnection.removeTrack(e)});const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}}async receive(e,t,i,n){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{id:i,mslabel:r}=this.remoteSDP.send(e,t,n),o=new fo((t,n)=>{const o=Fa(()=>{n(new Error("Cannot receive track, id: ".concat(i)))},1e4),s=n=>{const a=ma();if("Safari"===a.name&&11===Number(a.version)&&n.track.id!==i&&n.streams[0].id===r){var c;const r=n.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(e,i,n.track.id),this.peerConnection.removeEventListener("track",s),clearTimeout(o),void t(r)}if(n.track.id===i)return this.peerConnection.removeEventListener("track",s),clearTimeout(o),void t(n.track)};this.peerConnection.addEventListener("track",s)}),s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const a=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(a),{track:await o,id:i}}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const i=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(i)}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){}async unmuteRemote(e){}async muteLocal(e){try{var t;if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=Gn(t=this.peerConnection.getSenders()).call(t,t=>{var i;return-1!==Lo(e).call(e,(null===(i=t.track)||void 0===i?void 0:i.id)||"")});if(i.length!==e.length)throw new Error("sender' length doesn't match mids' length.");vo(i).call(i,e=>{if(Ta()&&e.track)e.track.enabled=!1;else{var t;const i=e.getParameters();Ji(t=i.encodings).call(t,e=>e.active=!1),e.setParameters(i)}})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{var t;if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=Gn(t=this.peerConnection.getSenders()).call(t,t=>{var i;return-1!==Lo(e).call(e,(null===(i=t.track)||void 0===i?void 0:i.id)||"")});if(i.length!==e.length)throw new Error("Senders' length doesn't match mids' length.");vo(i).call(i,async e=>{if(Ta()&&e.track)e.track.enabled=!0;else{var t;const i=e.getParameters();Ji(t=i.encodings).call(t,e=>e.active=!0),await e.setParameters(i)}});const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}async reEstablish(){const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:tE(e.sdp).iceParameters,restartICE:async(t,i,n,r)=>this.restartICE(e,t,i,n,r),restartOfferSDP:e.sdp}}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const e=await this.peerConnection.createOffer(),i=this.mungSendOfferSDP(e.sdp,[t]);this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind,t);const n=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:i}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){var i;const n=Gn(i=this.peerConnection.getSenders()).call(i,t=>{var i;return(null===(i=t.track)||void 0===i?void 0:i.id)===e});1===n.length&&await this.applySendEncodings(n,[t])}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){var i;const n=Qo(i=this.peerConnection.getSenders()).call(i,e=>{var i;return(null===(i=e.track)||void 0===i?void 0:i.id)===t});n&&await n.replaceTrack(e._mediaStreamTrack)}async restartICE(e,t,i,n,r){try{if(!this.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");this.remoteSDP.restartICE(t,i,n,r);const o=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(e),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(e.toString()))}}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,Rc.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},Fa(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,Rc.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},jc("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[],sdpSemantics:"plan-b"};var i,n;return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(Yl(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...LE.turnServerConfigToIceServers(e.turnServer.servers)),t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...LE.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),Ji(i=Je(n=e.turnServer.servers).call(n,e.turnServer.serversFromGateway||[])).call(i,e=>{e.forceturn&&(t.iceTransportPolicy="relay")}))),t}static turnServerConfigToIceServers(e){const t=[];return Ji(e).call(e,e=>{var i,n,r;e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(i="turns:".concat(hp(e.turnServerURL),":")).call(i,e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(n="turn:".concat(e.turnServerURL,":")).call(n,e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(r="turn:".concat(e.turnServerURL,":")).call(r,e.tcpport,"?transport=tcp")}))}),t}async applySendEncodings(e,t){try{if(!Fu().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let r=0;r<e.length;r++){var i;const o=e[r],s=t[r];if(!s)continue;const a={},c={};if(s instanceof bv)switch(s._optimizationMode){case"motion":a.degradationPreference="maintain-framerate";break;case"detail":a.degradationPreference="maintain-resolution";break;default:a.degradationPreference="balanced"}if(jc("DSCP_TYPE")&&Da()){var n;const e=jc("DSCP_TYPE");ns(n=["very-low","low","medium","high"]).call(n,e)&&(c.networkPriority=e)}const l=o.getParameters(),u=null===(i=l.encodings)||void 0===i?void 0:i[0];u&&nn(u,c),nn(l,a),await o.setParameters(l)}}catch(e){Rc.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(e,t){const i=Kv.parse(e);return Ji(t).call(t,(e,t)=>{var n;const r=e._mediaStreamTrack,o=Qo(n=i.mediaDescriptions).call(n,e=>e.attributes.mid===r.kind);o&&rE(o,e)}),Kv.print(i)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,i)=>{var n;null===(n=this.onFirstVideoDecoded)||void 0===n||n.call(this,e,t,i)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0}}function PE(e,t,i){const n=e[t];if("function"!=typeof n)throw new Error("Cannot use mutex on object property.");return i.value=async function(...e){const i=this.mutex,r=await i.lock("Locking from P2PConnection.".concat(t));try{return await n.apply(this,e)}finally{r()}},i}kE([PE,NE("design:type",Function),NE("design:paramtypes",[Object,Object,Array,Object,String,String,String,String]),NE("design:returntype",fo)],LE.prototype,"connect",null),kE([PE,NE("design:type",Function),NE("design:paramtypes",[Array]),NE("design:returntype",fo)],LE.prototype,"stopSending",null),kE([PE,NE("design:type",Function),NE("design:paramtypes",[String,Array,String,Object]),NE("design:returntype",fo)],LE.prototype,"receive",null),kE([PE,NE("design:type",Function),NE("design:paramtypes",[Array]),NE("design:returntype",fo)],LE.prototype,"stopReceiving",null),kE([PE,NE("design:type",Function),NE("design:paramtypes",[String]),NE("design:returntype",fo)],LE.prototype,"muteRemote",null),kE([PE,NE("design:type",Function),NE("design:paramtypes",[String]),NE("design:returntype",fo)],LE.prototype,"unmuteRemote",null),kE([PE,NE("design:type",Function),NE("design:paramtypes",[Array]),NE("design:returntype",fo)],LE.prototype,"muteLocal",null),kE([PE,NE("design:type",Function),NE("design:paramtypes",[Array]),NE("design:returntype",fo)],LE.prototype,"unmuteLocal",null),kE([PE,NE("design:type",Function),NE("design:paramtypes",[]),NE("design:returntype",fo)],LE.prototype,"reEstablish",null),kE([PE,NE("design:type",Function),NE("design:paramtypes",[]),NE("design:returntype",void 0)],LE.prototype,"close",null),kE([PE,NE("design:type",Function),NE("design:paramtypes",[String,lh]),NE("design:returntype",fo)],LE.prototype,"updateEncoderConfig",null),kE([PE,NE("design:type",Function),NE("design:paramtypes",[String,lh]),NE("design:returntype",fo)],LE.prototype,"updateSendParameters",null),kE([PE,NE("design:type",Function),NE("design:paramtypes",[lh,String]),NE("design:returntype",fo)],LE.prototype,"replaceTrack",null),kE([PE,NE("design:type",Function),NE("design:paramtypes",[Object,Object,Array,String,String]),NE("design:returntype",fo)],LE.prototype,"restartICE",null);const DE=4e4;class ME{constructor(e){e=jp(e);const{remoteIceParameters:t,remoteDtlsParameters:i,candidates:n,remoteRTPCapabilities:r,remoteSetup:o,localCapabilities:s,cname:a,ip:c,port:l}=e,u=Kv.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=r,this._candidates=n,this._iceParameters=t,this._dtlsParameters=i,this._localCapabilities=s,this.setup=o,this.cname=a,this.ip=c,this.port=l,this.addressType=-1===Lo(c).call(c,":")?"IP4":"IP6";for(const f of u.mediaDescriptions){var d,h,p;if(f.media.port=this.port,Ji(d=f.connections).call(d,e=>{e.address=this.ip,e.addrtype=this.addressType}),f.attributes.rtcp?(f.attributes.rtcp.address=this.ip,f.attributes.rtcp.port=this.port,f.attributes.rtcp.addressType=this.addressType):f.attributes.rtcp={port:l,address:c,netType:"IN",addressType:this.addressType},f.attributes.iceUfrag=t.iceUfrag,f.attributes.icePwd=t.icePwd,f.attributes.fingerprints=i.fingerprints,f.attributes.candidates=n,f.attributes.setup=o,"video"===f.media.mediaType&&(f.media.fmts=vo(h=r.videoCodecs).call(h,e=>e.payloadType.toString(10)),f.attributes.payloads=r.videoCodecs,f.attributes.extmaps=r.videoExtensions,jc("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=nE([{ssrcId:DE,rtx:jc("USE_RTX")?40001:void 0}],this.cname);f.attributes.ssrcs=e,f.attributes.ssrcGroups=t}if("audio"===f.media.mediaType&&(f.media.fmts=vo(p=r.audioCodecs).call(p,e=>e.payloadType.toString(10)),f.attributes.payloads=r.audioCodecs,f.attributes.extmaps=r.audioExtensions,jc("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=nE([{ssrcId:2e4}],this.cname);f.attributes.ssrcs=e,f.attributes.ssrcGroups=t}}this.sessionDesc=u,this.currentMidIndex=u.mediaDescriptions.length-1}get localCapabilities(){return jp(this._localCapabilities)}get rtpCapabilities(){return jp(this._rtpCapabilities)}get candidates(){return jp(this._candidates)}get iceParameters(){return jp(this._iceParameters)}get dtlsParameters(){return jp(this._dtlsParameters)}preloadRemoteMedia(){const e=jc("PRELOAD_MEDIA_COUNT"),t=this.rtpCapabilities,i=this.candidates,n=this.dtlsParameters,r=this.iceParameters;for(let a=1;a<e;a++){var o,s;const e=2*a+2e4,c=2*a+DE,{ssrcs:l,ssrcGroups:u}=nE([{ssrcId:e}],this.cname),{ssrcs:d,ssrcGroups:h}=nE([{ssrcId:c,rtx:jc("USE_RTX")?c+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:this.port,protos:["UDP","TLS","RTP","SAVPF"],fmts:vo(o=t.videoCodecs).call(o,e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:this.addressType,address:this.ip}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:i,extmaps:t.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:d,ssrcGroups:h,rtcpFeedbackWildcards:[],payloads:t.videoCodecs,rtcp:{port:this.port,netType:"IN",addressType:this.addressType,address:this.ip},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*a)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:this.port,protos:["UDP","TLS","RTP","SAVPF"],fmts:vo(s=t.audioCodecs).call(s,e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:this.addressType,address:this.ip}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:i,extmaps:t.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:t.audioCodecs,rtcp:{port:this.port,netType:"IN",addressType:this.addressType,address:this.ip},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*a+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return Kv.print(this.sessionDesc)}send(e,t,i,n){const{ssrcs:r,ssrcGroups:o}=nE(t,this.cname,i),s=this.findPreloadMediaDesc(r);if(s){if(n&&(n.tcc||n.remb)){var a;const e=Lo(a=this.sessionDesc.mediaDescriptions).call(a,s);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(s,n),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e);if(Ta()){if(-1!==t&&1!==t){const e=jp(this.sessionDesc.mediaDescriptions[t]);return e.attributes.direction="sendonly",e.attributes.ssrcs=r,e.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(e,n),{mid:e.attributes.mid,needExchangeSDP:!0}}{const t=this.createOrRecycleSendMedia(e,r,o,"sendonly",n);return this.updateBundleMids(),{mid:t.attributes.mid,needExchangeSDP:!0}}}if(-1!==t){const e=jp(this.sessionDesc.mediaDescriptions[t]);return e.attributes.direction="sendonly",e.attributes.ssrcs=r,e.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(e,n),{mid:e.attributes.mid,needExchangeSDP:!0}}{const t=this.createOrRecycleSendMedia(e,r,o,"sendonly",n);return this.updateBundleMids(),{mid:t.attributes.mid,needExchangeSDP:!0}}}}stopSending(e){var t;const i=Gn(t=this.sessionDesc.mediaDescriptions).call(t,t=>t.attributes.mid&&-1!==Lo(e).call(e,t.attributes.mid));if(i.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");Ji(i).call(i,e=>{"0"===e.attributes.mid||Ia()||Ta()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")}),this.updateBundleMids()}mute(e){var t;const i=Qo(t=this.sessionDesc.mediaDescriptions).call(t,t=>t.attributes.mid===e);if(!i)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));i.attributes.direction="inactive"}unmute(e){var t;const i=Qo(t=this.sessionDesc.mediaDescriptions).call(t,t=>t.attributes.mid===e);if(!i)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));i.attributes.direction="sendonly"}muteRemote(e){var t;const i=Gn(t=this.sessionDesc.mediaDescriptions).call(t,t=>ns(e).call(e,t.attributes.mid||""));if(i.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");Ji(i).call(i,e=>{e.attributes.direction="inactive"})}unmuteRemote(e){var t;const i=Gn(t=this.sessionDesc.mediaDescriptions).call(t,t=>ns(e).call(e,t.attributes.mid||""));if(i.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");Ji(i).call(i,e=>{e.attributes.direction="recvonly"})}receive(e,t,i){Ji(e).call(e,(e,n)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,i[n])}),this.updateBundleMids()}stopReceiving(e){var t;const i=Gn(t=this.sessionDesc.mediaDescriptions).call(t,t=>-1!==Lo(e).call(e,t.attributes.mid));if(i.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");Ji(i).call(i,e=>{e.media.port="0",e.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(e,t,i,n){var r,o;e=jp(e),t=jp(t),this._iceParameters=e,this._candidates=t,this.ip=i,this.port=n,this.addressType=-1===Lo(r=this.ip).call(r,":")?"IP4":"IP6",Ji(o=this.sessionDesc.mediaDescriptions).call(o,t=>{var r;"0"!==t.media.port&&(t.media.port=this.port),Ji(r=t.connections).call(r,e=>{e.address=this.ip,e.addrtype=this.addressType}),t.attributes.rtcp?(t.attributes.rtcp.address=this.ip,t.attributes.rtcp.port=this.port,t.attributes.rtcp.addressType=this.addressType):t.attributes.rtcp={port:n,address:i,netType:"IN",addressType:this.addressType},t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd,t.attributes.candidates=this.candidates})}predictReceivingMids(e){const t=[];for(let i=0;i<e;i++)t.push((this.currentMidIndex+i+1).toString(10));return t}findAvailableMediaIndex(e){var t;return Lv(t=this.sessionDesc.mediaDescriptions).call(t,t=>t.media.mediaType===e&&"0"!==t.media.port&&("sendonly"===t.attributes.direction||"sendrecv"===t.attributes.direction)&&0===t.attributes.ssrcs.length)}createOrRecycleRecvMedia(e,t,i,n,r){const o=e._mediaStreamTrack.kind;let s;var a,c,l,u,d;o===Ou.VIDEO?(jc("H264_PROFILE_LEVEL_ID")&&"h264"===n&&(s=Gn(c=this.rtpCapabilities.videoCodecs).call(c,e=>{var t,i,r;return ns(t=(null===(i=e.rtpMap)||void 0===i?void 0:i.encodingName.toLowerCase())||"").call(t,n)&&(null==e||null===(r=e.fmtp)||void 0===r?void 0:r.parameters["profile-level-id"])===jc("H264_PROFILE_LEVEL_ID")})),s&&0!==(null===(a=s)||void 0===a?void 0:a.length)||(s=Gn(l=this.rtpCapabilities.videoCodecs).call(l,e=>{var t,i;return ns(t=(null===(i=e.rtpMap)||void 0===i?void 0:i.encodingName.toLowerCase())||"").call(t,n)})),0===s.length&&(Rc.warning(Je(u="codec ".concat(n," not included in rtpCapabilities, fallback to default payloads: ")).call(u,null===(d=this.rtpCapabilities.videoCodecs[0].rtpMap)||void 0===d?void 0:d.encodingName)),s=this.rtpCapabilities.videoCodecs)):s=this.rtpCapabilities.audioCodecs;const h=o===Ou.VIDEO?this.rtpCapabilities.videoExtensions:this.rtpCapabilities.audioExtensions;this.currentMidIndex+=1;const p="".concat(this.currentMidIndex);let f={media:{mediaType:o,port:this.port,protos:["UDP","TLS","RTP","SAVPF"],fmts:vo(s).call(s,e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:this.addressType,address:this.ip}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:h,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:this.port,netType:"IN",addressType:this.addressType,address:this.ip},setup:this.setup,direction:i,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(p)}};f=this.mungRecvMediaDsec(f,e,r);const g=this.findFirstClosedMedia(o);if(g){var m;const e=Lo(m=this.sessionDesc.mediaDescriptions).call(m,g);this.sessionDesc.mediaDescriptions[e]=f}else this.sessionDesc.mediaDescriptions.push(f);return f}createOrRecycleSendMedia(e,t,i,n,r){const o=e===Ou.VIDEO?this.rtpCapabilities.videoCodecs:this.rtpCapabilities.audioCodecs,s=e===Ou.VIDEO?this.rtpCapabilities.videoExtensions:this.rtpCapabilities.audioExtensions;this.currentMidIndex+=1;const a="".concat(this.currentMidIndex);let c={media:{mediaType:e,port:this.port,protos:["UDP","TLS","RTP","SAVPF"],fmts:vo(o).call(o,e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:this.addressType,address:this.ip}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:s,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:i,rtcpFeedbackWildcards:[],payloads:o,rtcp:{port:this.port,netType:"IN",addressType:this.addressType,address:this.ip},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(a)}};c=this.mungSendMediaDesc(c,r);const l=this.findFirstClosedMedia(e);if(l){var u;const e=Lo(u=this.sessionDesc.mediaDescriptions).call(u,l);this.sessionDesc.mediaDescriptions[e]=c}else this.sessionDesc.mediaDescriptions.push(c);return c}updateBundleMids(){var e,t;this.sessionDesc.attributes.groups[0].identificationTag=vo(e=Gn(t=this.sessionDesc.mediaDescriptions).call(t,e=>"0"!==e.media.port)).call(e,e=>e.attributes.mid)}mungRecvMediaDsec(e,t,i){const n=jp(e);return oE(n),rE(n,t),sE(n,t),function(e){var t;if("video"!==e.media.mediaType)return;const i=ma();if(i.name!==ha.SAFARI&&i.os!==da.IOS)return;const n=Lv(t=e.attributes.extmaps).call(t,e=>/video-orientation/g.test(e.extensionName));var r;-1!==n&&To(r=e.attributes.extmaps).call(r,n,1)}(n),aE(n,i,this.localCapabilities),n}mungSendMediaDesc(e,t){const i=jp(e);return aE(i,t,this.localCapabilities),i}updateRecvMedia(e,t){var i;const n=Lv(i=this.sessionDesc.mediaDescriptions).call(i,t=>t.attributes.mid===e);if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){var t;return Qo(t=this.sessionDesc.mediaDescriptions).call(t,t=>Ia()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port)}findPreloadMediaDesc(e){var t;return Qo(t=this.sessionDesc.mediaDescriptions).call(t,t=>{var i,n;return(null===(i=t.attributes)||void 0===i||null===(n=i.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId})}}function xE(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}var BE=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Un(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&hn(t,i,s),s},UE=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class FE extends xu{constructor(e,t){super(e,t),this.useRTX=jc("USE_RTX"),this.localCandidateCount=0,this.allCandidatesReceived=!1,this.mutex=new ah("P2PConnection-mutex"),this.store=t,this.peerConnection=new RTCPeerConnection(FE.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.statsFilter=wE(this.peerConnection,void 0,void 0,Ia()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=tE(e.sdp),i=await async function(e,t,i,n){const r=new RTCPeerConnection;r.addTransceiver("video",{direction:"sendrecv"}),r.addTransceiver("audio",{direction:"sendrecv"});const o=await r.createOffer();if(!o.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const s=eE(o.sdp,e,t,i,n);try{r.close()}catch(e){}return s}(!this.useRTX,!1,["opus"]);return this.localCapabilities=i,this.initialOffer=e,function(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=xE(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=xE(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}({},t,{rtpCapabilities:i,offerSDP:e.sdp})}catch(e){throw new pl(ll.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,i,n,r,o,s,a){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new ME({remoteIceParameters:e,remoteDtlsParameters:t,candidates:i,remoteRTPCapabilities:n,remoteSetup:r,localCapabilities:this.localCapabilities,cname:o,ip:s,port:a});const c=this.remoteSDP.toString(),l=this.logSDPExchange(this.initialOffer.sdp||"","offer","local","connect");await this.peerConnection.setLocalDescription(this.initialOffer),null==l||l(c),await this.peerConnection.setRemoteDescription({type:"answer",sdp:c});const u=this.peerConnection.getTransceivers()[0];if(null!=u&&u.receiver&&this.tryBindTransportEvents(u.receiver),jc("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t)}}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}send(e,t){var i=this;return Qv((function*(){const n=yield Wv(i.mutex.lock());try{if(!i.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const r=[];Ji(e).call(e,e=>{const t=i.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});r.push(t)}),Ia()&&!0===jc("SIMULCAST")&&(yield Wv(i.applySimulcastForFirefox(r,e)));const o=yield Wv(i.peerConnection.createOffer()),s=i.remoteSDP.predictReceivingMids(e.length),a=i.mungSendOfferSDP(o.sdp,e,s),c=Kv.parse(a),l=vo(s).call(s,e=>{var t;const n=Qo(t=c.mediaDescriptions).call(t,t=>t.attributes.mid===e);if(!n)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t){var i,n;const r=[],o=Gn(i=e.attributes.ssrcGroups).call(i,e=>"FID"===e.semantic),s=Qo(n=e.attributes.ssrcGroups).call(n,e=>"SIM"===e.semantic),a=e.attributes.ssrcs;var c;if(s)Ji(c=s.ssrcIds).call(c,e=>{var i;const n=null===(i=Qo(o).call(o,t=>t.ssrcIds[0]===e))||void 0===i?void 0:i.ssrcIds[1];r.push({ssrcId:e,rtx:t?n:void 0})});else if(o.length>0){const e=o[0].ssrcIds[0],i=o[0].ssrcIds[1];r.push({ssrcId:e,rtx:t?i:void 0})}else{if(0===a.length)throw new Error("No ssrcs found on local media description.");r.push({ssrcId:a[0].ssrcId})}return r}(n,i.useRTX)});let u;try{u=yield l}catch(e){throw Ji(r).call(r,e=>{var t;return null===(t=e.stop)||void 0===t?void 0:t.call(e)}),i.remoteSDP.bumpMid(r.length),e}i.remoteSDP.receive(e,t,u);const d=i.remoteSDP.toString(),h=i.logSDPExchange(a,"offer","local","send");return yield Wv(i.peerConnection.setLocalDescription({type:"offer",sdp:a})),yield Wv(i.applySimulcastEncodings(r,e)),yield Wv(i.applySendEncodings(r,e)),null==h||h(d),yield Wv(i.peerConnection.setRemoteDescription({type:"answer",sdp:d})),vo(r).call(r,(e,t)=>{const i=s[t];return{localSSRC:l[t],id:i,transceiver:e}})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{n()}}))()}async stopSending(e){try{var t;if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const i=Gn(t=this.peerConnection.getTransceivers()).call(t,t=>-1!==Lo(e).call(e,t.mid));if(i.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");vo(i).call(i,e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)});const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const o=this.remoteSDP.toString();null==r||r(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}}async receive(e,t,i,n){try{var r;if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:o,needExchangeSDP:s}=this.remoteSDP.send(e,t,i,n);if(s){const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||""),await this.peerConnection.setLocalDescription(n),Rc.debug("[P2PConnection] receive ".concat(e," by exchanging SDP."))}else Rc.debug("[P2PConnection] receive ".concat(e," no need to exchange SDP."));const a=Qo(r=this.peerConnection.getTransceivers()).call(r,e=>e.mid===o);if(!a)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:a.receiver.track,id:o}}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||""),await this.peerConnection.setLocalDescription(n)}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||""),await this.peerConnection.setLocalDescription(n)}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),i=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();null==i||i(n.sdp||""),await this.peerConnection.setLocalDescription(n)}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{var t;if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const i=Gn(t=this.peerConnection.getTransceivers()).call(t,t=>t.mid&&-1!==Lo(e).call(e,t.mid));if(i.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");vo(i).call(i,e=>{e.direction="inactive"});const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const o=this.remoteSDP.toString();null==r||r(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{var t;if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const i=Gn(t=this.peerConnection.getTransceivers()).call(t,t=>t.mid&&-1!==Lo(e).call(e,t.mid));if(i.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");vo(i).call(i,async(e,t)=>{e.direction="sendonly"});const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const o=this.remoteSDP.toString();null==r||r(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}async reEstablish(){const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:tE(e.sdp).iceParameters,restartICE:async(t,i,n,r)=>this.restartICE(e,t,i,n,r),restartOfferSDP:e.sdp}}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const i=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(i.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const r=this.remoteSDP.toString(),o=this.logSDPExchange(n,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),null==o||o(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){var i;const n=Gn(i=this.peerConnection.getTransceivers()).call(i,t=>t.mid===e);1===n.length&&(this.isVP8Simulcast(t)?Ia()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){var i;const n=Qo(i=this.peerConnection.getTransceivers()).call(i,e=>e.mid===t);n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async restartICE(e,t,i,n,r){try{if(!this.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");this.remoteSDP.restartICE(t,i,n,r);const o=this.remoteSDP.toString(),s=this.logSDPExchange(e.sdp||"","offer","local","restartICE");await this.peerConnection.setLocalDescription(e),null==s||s(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(e.toString()))}}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,Rc.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},Fa(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,Rc.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},jc("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[]};var i,n;return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(Yl(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...FE.turnServerConfigToIceServers(e.turnServer.servers)),t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...FE.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),Ji(i=Je(n=e.turnServer.servers).call(n,e.turnServer.serversFromGateway||[])).call(i,e=>{e.forceturn&&(t.iceTransportPolicy="relay")}))),t}static turnServerConfigToIceServers(e){const t=[];return Ji(e).call(e,e=>{var i,n,r;e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(i="turns:".concat(hp(e.turnServerURL),":")).call(i,e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(n="turn:".concat(e.turnServerURL,":")).call(n,e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(r="turn:".concat(e.turnServerURL,":")).call(r,e.tcpport,"?transport=tcp")}))}),t}tryBindTransportEvents(e){e.transport&&(this.transportEventReceiver=e,e.transport.onstatechange=()=>{var t,i;null!==(t=e.transport)&&void 0!==t&&t.state&&(null===(i=this.onDTLSTransportStateChange)||void 0===i||i.call(this,e.transport.state))},e.transport.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,e.error)},e.transport.iceTransport&&(e.transport.iceTransport.onstatechange=()=>{var t,i,n;null!==(t=e.transport)&&void 0!==t&&t.iceTransport.state&&(null===(i=this.onICETransportStateChange)||void 0===i||i.call(this,null===(n=e.transport)||void 0===n?void 0:n.iceTransport.state))}))}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async applySendEncodings(e,t){try{if(!Fu().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let u=0;u<e.length;u++){const d=e[u],h=t[u];if(h&&h instanceof bv){var i,n,r;if(this.isVP8Simulcast(h))continue;const e={},t={};switch(h._optimizationMode){case"motion":e.degradationPreference="maintain-framerate";break;case"detail":e.degradationPreference="maintain-resolution";break;default:e.degradationPreference="balanced"}var o,s,a,c;if(null!==(i=h._encoderConfig)&&void 0!==i&&i.bitrateMax&&(t.maxBitrate=1e3*(null===(o=h._encoderConfig)||void 0===o?void 0:o.bitrateMax)),ns(n=h._hints).call(n,Eu.LOW_STREAM)&&(null!==(s=h._encoderConfig)&&void 0!==s&&s.frameRate&&(t.maxFramerate=fp(h._encoderConfig.frameRate)),null!==(a=h._encoderConfig)&&void 0!==a&&a.scaleResolutionDownBy&&(null===(c=h._encoderConfig)||void 0===c?void 0:c.scaleResolutionDownBy)>1&&(t.scaleResolutionDownBy=h._encoderConfig.scaleResolutionDownBy)),jc("DSCP_TYPE")&&Da()){var l;const e=jc("DSCP_TYPE");ns(l=["very-low","low","medium","high"]).call(l,e)&&(t.networkPriority=e)}const u=d.sender.getParameters(),p=null===(r=u.encodings)||void 0===r?void 0:r[0];Ia()&&!p&&(e.encodings=[t]),p&&nn(p,t),nn(u,e),await d.sender.setParameters(u)}}}catch(e){Rc.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(e,t,i){const n=Kv.parse(e);return Ji(t).call(t,(e,t)=>{var r;const o=i[t],s=Qo(r=n.mediaDescriptions).call(r,e=>e.attributes.mid===o);s&&(rE(s,e),function(e,t,i){var n;if(Ia())return;if("video"!==e.media.mediaType)return;if(!(t instanceof bv))return;if("vp9"!==i&&"vp8"!==i)return;if("vp8"===i&&!jc("SIMULCAST"))return;if(void 0===t._scalabiltyMode||t._scalabiltyMode.numSpatialLayers<=1)return;const r="vp8"===i?2:t._scalabiltyMode.numSpatialLayers,o=e.attributes.ssrcs[0],s=Qo(n=e.attributes.ssrcGroups).call(n,e=>"FID"===e.semantic&&e.ssrcIds[0]===o.ssrcId),a={semantic:"SIM",ssrcIds:[o.ssrcId]};for(let c=1;c<r;c++)e.attributes.ssrcs.push({ssrcId:o.ssrcId+c,attributes:jp(o.attributes)}),a.ssrcIds.push(o.ssrcId+c),s&&(e.attributes.ssrcs.push({ssrcId:s.ssrcIds[1]+c,attributes:jp(o.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[o.ssrcId+c,s.ssrcIds[1]+c]}));e.attributes.ssrcGroups.unshift(a)}(s,e,this.store.codec))}),Kv.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,i)=>{var n;null===(n=this.onFirstVideoDecoded)||void 0===n||n.call(this,e,t,i)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var i,n,r,o,s;const c=e[a],l=t[a];if(l instanceof bv&&!ns(i=l._hints).call(i,Eu.LOW_STREAM)&&null!==(n=l._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=l._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(o=l._scalabiltyMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=l._scalabiltyMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const i=c.sender.getParameters();await c.sender.setParameters(nn(i,e))}}}async applySimulcastEncodings(e,t){if(!Ia()&&e.length===t.length)for(let i=0;i<e.length;i++){const n=t[i];if(n instanceof bv&&this.isVP8Simulcast(n)){const t=e[i],r={},o={high:1e3*(n._encoderConfig.bitrateMax-50),medium:5e4};r.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(nn(s,r))}}}isVP8Simulcast(e){var t,i,n,r,o;return e instanceof bv&&jc("SIMULCAST")&&"vp8"===this.store.codec&&!ns(t=e._hints).call(t,Eu.LOW_STREAM)&&(null===(i=e._encoderConfig)||void 0===i?void 0:i.bitrateMax)&&(null===(n=e._encoderConfig)||void 0===n?void 0:n.bitrateMax)>200&&(null===(r=e._scalabiltyMode)||void 0===r?void 0:r.numSpatialLayers)&&(null===(o=e._scalabiltyMode)||void 0===o?void 0:o.numSpatialLayers)>1}logSDPExchange(e,t,i,n){var r,o;if((jc("UPLOAD_LOG")||jc("SDP_LOGGING"))&&(Rc.upload(Je(r=Je(o="exchanging ".concat(i," ")).call(o,t," SDP during P2PConnection.")).call(r,n,"\n"),e),"offer"===t))return e=>{this.logSDPExchange(e,"answer","local"===i?"remote":"local",n)}}}function VE(e,t,i){const n=e[t];if("function"!=typeof n)throw new Error("Cannot use mutex on object property.");return i.value=async function(...e){const i=this.mutex,r=await i.lock("Locking from P2PConnection.".concat(t));try{return await n.apply(this,e)}finally{r()}},i}function jE(e,t){let i=document.createElement("video"),n=document.createElement("canvas");i.setAttribute("style","display:none"),n.setAttribute("style","display:none"),i.setAttribute("muted",""),i.muted=!0,i.setAttribute("autoplay",""),i.autoplay=!0,i.setAttribute("playsinline",""),n.width=fp(t.width),n.height=fp(t.height);const r=fp(t.framerate||15);document.body.append(i),document.body.append(n);let o=e._mediaStreamTrack;i.srcObject=new MediaStream([o]),i.play();const s=n.getContext("2d");if(!s)throw new pl(ll.UNEXPECTED_ERROR,"can not get canvas context");const a=Fu(),c=n.captureStream(a.supportRequestFrame?0:r).getVideoTracks()[0],l=vh(()=>(()=>{if(i.paused&&i.play(),i.videoHeight>2&&i.videoWidth>2){const e=i.videoWidth,o=i.videoHeight/e,s=n.width*o;var t,r,a;Math.abs(s-n.height)>=2&&(Rc.debug("adjust low stream resolution",Je(t=Je(r=Je(a="".concat(n.width,"x")).call(a,n.height," -> ")).call(r,n.width,"x")).call(t,s)),n.height=s)}s.drawImage(i,0,0,n.width,n.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,i.srcObject=new MediaStream([o]))})(),r),u=c.stop;return c.stop=()=>{u.call(c),l(),i.remove(),n.width=0,n.remove(),n=null,i=null,Rc.debug("clean low stream renderer")},c}function GE(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function HE(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=GE(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=GE(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}BE([VE,UE("design:type",Function),UE("design:paramtypes",[Object,Object,Array,Object,String,String,String,String]),UE("design:returntype",fo)],FE.prototype,"connect",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[Array]),UE("design:returntype",fo)],FE.prototype,"stopSending",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[String,Array,String,Object]),UE("design:returntype",fo)],FE.prototype,"receive",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[Array]),UE("design:returntype",fo)],FE.prototype,"stopReceiving",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[String]),UE("design:returntype",fo)],FE.prototype,"muteRemote",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[String]),UE("design:returntype",fo)],FE.prototype,"unmuteRemote",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[Array]),UE("design:returntype",fo)],FE.prototype,"muteLocal",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[Array]),UE("design:returntype",fo)],FE.prototype,"unmuteLocal",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[]),UE("design:returntype",fo)],FE.prototype,"reEstablish",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[]),UE("design:returntype",void 0)],FE.prototype,"close",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[String,lh]),UE("design:returntype",fo)],FE.prototype,"updateEncoderConfig",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[String,lh]),UE("design:returntype",fo)],FE.prototype,"updateSendParameters",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[lh,String]),UE("design:returntype",fo)],FE.prototype,"replaceTrack",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[Object,Object,Array,String,String]),UE("design:returntype",fo)],FE.prototype,"restartICE",null);class QE extends oh{constructor(e,t,i,n){var r,o,s;super(e,Je(r=Je(o=Je(s="track-".concat(e.kind,"-")).call(s,t,"-")).call(o,n.clientId,"_")).call(r,Op(5,""))),this._isDestroyed=!1,this._userId=t,this._uintId=i,this.store=n}getUserId(){return this._userId}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource()}_destroy(){this._isDestroyed=!0,Rc.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}}class WE extends QE{constructor(e,t,i,n){super(e,t,i,n),this._videoVisibleTimer=null,this.trackMediaType="video",this.updateMediaStreamTrackResolution()}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==dl.PLAYING)}getStats(){return Hp(()=>{Rc.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),xp(this,vu.GET_STATS)||HE({},nu)}play(e,t={}){const i=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof e?e:"HTMLElement",t]});if("string"==typeof e){const t=document.getElementById(e);var n;t?e=t:(Rc.warning(Je(n="[".concat(this.getTrackId(),'] can not find "#')).call(n,e,'" element, use document.body')),e=document.body)}Rc.debug("[".concat(this.getTrackId(),"] start video playback"),ve(t));const r=HE({fit:"cover"},t,{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(r):(this._player=new H_(r),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,performance.now()),this.emit(yu.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=window.setInterval(()=>{try{const e=this.getVideoElementVisibleStatus();this.emit(yu.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}},jc("CHECK_VIDEO_VISIBLE_INTERVAL")),i.onSuccess()}stop(){const e=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return e.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._player.destroy(),this._player=void 0,Rc.debug("[".concat(this.getTrackId(),"] stop video playback")),e.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){Lp(this._originMediaStreamTrack).then(([e,t])=>{this._videoHeight=t,this._videoWidth=e}).catch(Np)}_updatePlayerSource(){Rc.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const i=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),n={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==i?void 0:i.parentElement},{element:r,slot:o}=n;if(this.isPlaying&&r instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=Ev.checkOneElementVisible(r),t=nn({},e);return t.visible||rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess("Not visible because of ".concat(t.reason)),t}return}catch(e){throw new pl(ll.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}}class qE extends QE{constructor(e,t,i,n){super(e,t,i,n),this.trackMediaType="audio",this._useAudioElement=!0,this._volume=100,this._source=new Ah(e,!0),this._source.once(zl.RECEIVE_TRACK_BUFFER,()=>{this.emit(yu.FIRST_FRAME_DECODED)})}get isPlaying(){return this._useAudioElement?Mh.isPlaying(this.getTrackId()):this._source.isPlayed}setAudioFrameCallback(e,t=4096){if(!e)return this._source.removeAllListeners(zl.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(zl.ON_AUDIO_BUFFER),this._source.on(zl.ON_AUDIO_BUFFER,t=>e(t))}setVolume(e){const t=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),e]},300);this._volume=e,this._useAudioElement?Mh.setVolume(this.getTrackId(),e):this._source.setVolume(e/100),t.onSuccess()}async setPlaybackDevice(e){const t=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[this.getTrackId(),e]});if(!this._useAudioElement)throw new pl(ll.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{await Mh.setSinkID(this.getTrackId(),e)}catch(e){throw t.onError(e),e}t.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Hp(()=>{Rc.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),xp(this,vu.GET_STATS)||HE({},tu)}play(){const e=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(Rc.debug("[".concat(this.getTrackId(),"] use audio element to play")),Mh.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play(),e.onSuccess()}stop(){const e=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Mh.stop(this.getTrackId()):this._source.stop(),e.onSuccess()}_destroy(){super._destroy(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){Rc.debug("[".concat(this.getTrackId(),"] update player source track")),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Mh.updateTrack(this.getTrackId(),this._mediaStreamTrack)}}function $E(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function zE(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=$E(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=$E(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}class ZE extends Mu{constructor(){super(),this.uploadUnplinkStarted=!1,this.uploadDownlinkStarted=!1}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&(this.uploadUplinkStats(t,this.lastStats),this.lastStats=t)},3e3),this.uplinkStatsUploadSlowInterval&&window.clearInterval(this.uplinkStatsUploadSlowInterval),this.uplinkStatsUploadSlowInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&this.uploadSlowUplinkStats(t)},6e4),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&this.uploadRelatedUplinkStats(t,this.lastStats),this.lastStats=t},1e3))}uploadUplinkStats(e,t){var i;const n=(null===(i=this.requestLocalMedia)||void 0===i?void 0:i.call(this))||[];Ji(n).call(n,([i,{track:n,ssrcs:r}])=>{switch(i){case ku.LocalVideoLowTrack:case ku.LocalVideoTrack:{const o=function(e,t,i){var n,r;const o=Qo(n=t.videoSend).call(n,t=>t.ssrc===e);if(!o)return null;const s={id:Op(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:o.ssrc.toString()};switch(s.A_vstd=i._originMediaStreamTrack&&!i._originMediaStreamTrack.enabled||!i._mediaStreamTrack.enabled?"1":"0",o.sentFrame&&(s.A_fhs=o.sentFrame.height.toString(),s.A_frs=o.sentFrame.frameRate.toString(),s.A_fws=o.sentFrame.width.toString()),o.adaptionChangeReason){case"none":s.A_ac="0";break;case"cpu":s.A_ac="1";break;case"bandwidth":s.A_ac="2";break;case"other":s.A_ac="3"}return s.A_lvps=Cl[i._player?i._player.videoElementStatus:"uninit"].toString(),s.A_nr=null===(r=o.nacksCount)||void 0===r?void 0:r.toString(),o.avgEncodeMs&&(s.A_aem=o.avgEncodeMs.toFixed(0).toString()),s}(r[0].ssrcId,e,n),s=mp(r[0].ssrcId,e,t);o&&Vp(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Wl.PUBLISH_STATS,{stream_type:i===ku.LocalVideoLowTrack?"low":"high",stats:zE({},o,{},s)})});break}case ku.LocalAudioTrack:{const t=function(e,t,i){var n;const r=Qo(n=t.audioSend).call(n,t=>t.ssrc===e);if(!r)return null;const o={id:Op(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:r.ssrc.toString()};return o.A_astd=i._originMediaStreamTrack.enabled&&i._mediaStreamTrack.enabled?"0":"1",r.inputLevel?o.A_ail=Math.round(100*r.inputLevel).toString():o.A_ail=Math.round(100*i._source.getAccurateVolumeLevel()).toString(),o.A_apil=Math.round(100*i._source.getAccurateVolumeLevel()).toString(),o}(r[0].ssrcId,e,n);t&&Vp(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Wl.PUBLISH_STATS,{stream_type:"high",stats:t})});break}}const o=function(e){const t={id:"bweforvideo",timestamp:new Date(e.timestamp).toISOString(),type:"VideoBwe"};return e.bitrate.retransmit&&(t.A_rb=e.bitrate.retransmit.toString()),e.bitrate.targetEncoded&&(t.A_teb=e.bitrate.targetEncoded.toString()),t.A_aeb=e.bitrate.actualEncoded.toString(),t.A_tb=e.bitrate.transmit.toString(),void 0!==e.sendBandwidth&&(t.A_asb=e.sendBandwidth.toString()),t}(e);o&&Vp(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Wl.PUBLISH_STATS,{stream_type:i===ku.LocalVideoLowTrack?"low":"high",stats:o})})})}uploadSlowUplinkStats(e){var t,i;const n=Gn(t=(null===(i=this.requestLocalMedia)||void 0===i?void 0:i.call(this))||[]).call(t,([e])=>e===ku.LocalVideoLowTrack||e===ku.LocalVideoTrack);Ji(n).call(n,([t,{ssrcs:i}])=>{const n=mp(i[0].ssrcId,e);n&&Vp(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Wl.PUBLISH_STATS,{stream_type:t===ku.LocalVideoLowTrack?"low":"high",stats:n})})})}uploadRelatedUplinkStats(e,t){var i,n;const r=Gn(i=(null===(n=this.requestLocalMedia)||void 0===n?void 0:n.call(this))||[]).call(i,([e])=>e===ku.LocalVideoLowTrack||e===ku.LocalVideoTrack);Ji(r).call(r,([t,{ssrcs:i}])=>{const n=function(e,t){var i;const n=Qo(i=t.videoSend).call(i,t=>t.ssrc===e);return n?{mediaType:"video",isVideoMute:!1,frameRateInput:n.inputFrame&&n.inputFrame.frameRate.toString(),frameRateSent:n.sentFrame&&n.sentFrame.frameRate.toString(),googRtt:n.rttMs.toString()}:null}(i[0].ssrcId,e);n&&Vp(()=>{var e;null===(e=this.requestUpload)||void 0===e||e.call(this,Wl.PUBLISH_RELATED_STATS,{stream_type:t===ku.LocalVideoLowTrack?"low":"high",stats:n})})})}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0)}startUploadDownlinkStats(){this.uploadDownlinkStarted||(this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&(this.uploadDownlinkStats(t,this.lastStats),this.lastStats=t)},3e3),this.downlinkStatsUploadSlowInterval&&window.clearInterval(this.downlinkStatsUploadSlowInterval),this.downlinkStatsUploadSlowInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&this.uploadSlowDownlinkStats(t)},6e4),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&(this.uploadRelatedDownlinkStats(t,this.lastStats),this.lastStats=t)},1e3))}uploadDownlinkStats(e,t){var i;const n=(null===(i=this.requestRemoteMedia)||void 0===i?void 0:i.call(this))||[];Ji(n).call(n,([t,i])=>{if(i.has(Ou.VIDEO)&&t.videoTrack){const i=t.videoTrack?function(e,t,i){var n;const r=Qo(n=t.videoRecv).call(n,t=>t.ssrc===e);if(!r)return null;const o={id:Op(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:r.ssrc.toString()};var s;return o.bytesReceived=r.bytes.toString(),o.packetsLost=r.packetsLost.toString(),o.packetsReceived=r.packets.toString(),r.framesRateFirefox&&(o.A_frr=r.framesRateFirefox.toString()),r.receivedFrame&&(o.A_frr=r.receivedFrame.frameRate.toString()),o.A_frd=r.decodeFrameRate.toString(),r.outputFrame&&(o.A_fro=r.outputFrame.frameRate.toString()),void 0!==r.jitterBufferMs&&(o.A_jbm=Math.floor(r.jitterBufferMs).toString()),void 0!==r.currentDelayMs&&(o.A_cdm=Math.floor(r.currentDelayMs).toString()),o.A_fs=r.firsCount.toString(),o.A_ns=r.nacksCount.toString(),o.A_ps=r.plisCount.toString(),i&&(o.A_vrtd=i._originMediaStreamTrack.enabled&&i._mediaStreamTrack.enabled?"0":"1"),i._player&&i._player.freezeTimeCounterList.length>0&&(o.A_vrft=To(s=i._player.freezeTimeCounterList).call(s,0,1)[0].toString()),o.A_rvps=Cl[i._player?i._player.videoElementStatus:"uninit"].toString(),o}(t._videoSSRC,e,t.videoTrack):void 0;i&&Vp(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Wl.SUBSCRIBE_STATS,{stream_id:t.uid,stats:i})})}if(i.has(Ou.AUDIO)&&t.audioTrack){const i=t.audioTrack?function(e,t,i){var n;const r=Qo(n=t.audioRecv).call(n,t=>t.ssrc===e);if(!r)return null;const o={id:Op(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:r.ssrc.toString()};return o.bytesReceived=r.bytes.toString(),o.packetsLost=r.packetsLost.toString(),o.packetsReceived=r.packets.toString(),r.outputLevel?o.A_aol=Math.round(100*r.outputLevel).toString():o.A_aol=Math.round(100*i._source.getAccurateVolumeLevel()).toString(),o.A_apol=Math.round(100*i._source.getAccurateVolumeLevel()).toString(),i&&(o.A_artd=i._originMediaStreamTrack.enabled&&i._mediaStreamTrack.enabled?"0":"1"),o.A_jr=r.jitterMs.toString(),o.A_jbm=Math.floor(r.jitterBufferMs).toString(),o.A_cdm=Math.floor(r.jitterBufferMs).toString(),o.A_raps=Cl[Mh.getPlayerState(i.getTrackId())].toString(),o}(t._audioSSRC,e,t.audioTrack):void 0;i&&Vp(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Wl.SUBSCRIBE_STATS,{stream_id:t.uid,stats:i})})}})}uploadSlowDownlinkStats(e){}uploadRelatedDownlinkStats(e,t){var i;const n=(null===(i=this.requestRemoteMedia)||void 0===i?void 0:i.call(this))||[];Ji(n).call(n,([i,n])=>{if(n.has(Ou.VIDEO)&&i.videoTrack){var r;const n=!0===(i._videoSSRC&&(null===(r=this.requestVideoIsReady)||void 0===r?void 0:r.call(this,i._videoSSRC))||!1),o=function(e,t,i,n,r,o){var s,a;const c=Qo(s=i.videoRecv).call(s,t=>t.ssrc===e),l=r?Qo(a=r.videoRecv).call(a,t=>t.ssrc===e):void 0;if(!c)return null;const u=Yh.isRemoteVideoFreeze(o,c,l)&&t,d={mediaType:"video",isVideoMute:!1,peerId:n,frameRateReceived:c.receivedFrame&&c.receivedFrame.frameRate.toString(),frameRateDecoded:c.decodedFrame&&c.decodedFrame.frameRate.toString(),isFreeze:u,bytesReceived:c.bytes.toString(),packetsReceived:c.packets.toString(),packetsLost:c.packetsLost.toString()};return c.framesRateFirefox&&(d.frameRateDecoded=c.framesRateFirefox.toString(),d.frameRateReceived=c.framesRateFirefox.toString()),d}(i._videoSSRC,n,e,i.uid,t,i.videoTrack);o&&Vp(()=>{var e;null===(e=this.requestUpload)||void 0===e||e.call(this,Wl.SUBSCRIBE_RELATED_STATS,{stream_id:i.uid,stats:o})})}if(n.has(Ou.AUDIO)&&i.audioTrack){const t=function(e,t,i,n){var r;const o=Qo(r=t.audioRecv).call(r,t=>t.ssrc===e);if(!o)return null;const s=Yh.isRemoteAudioFreeze(n);return{mediaType:"audio",isAudioMute:!1,peerId:i,googJitterReceived:o.jitterMs.toString(),isFreeze:s,bytesReceived:o.bytes.toString(),packetsReceived:o.packets.toString(),packetsLost:o.packetsLost.toString(),frameReceived:o.receivedFrames.toString(),frameDropped:o.droppedFrames.toString()}}(i._audioSSRC,e,i.uid,i.audioTrack);t&&Vp(()=>{var e;null===(e=this.requestUpload)||void 0===e||e.call(this,Wl.SUBSCRIBE_RELATED_STATS,{stream_id:i.uid,stats:t})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}}function YE(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function KE(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=YE(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=YE(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}var JE=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Un(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&hn(t,i,s),s},XE=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class eA extends Mu{constructor(e,t){super(),this.localTrackMap=new Mi,this.remoteUserMap=new Mi,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.isPlanB=!1,this.iceFailedCount=0,this.dtlsFailedCount=0,this.mutex=new ah("P2PChannel-mutex"),this._state=Nu.Disconnected,this.handleMuteLocalTrack=async(e,t,i)=>{const n=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection)return void i(new pl(ll.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));await this.waitTillConnected();const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();await this.connection.muteLocal(vo(r).call(r,([,{id:e}])=>e));const o=this.createMuteMessage(r);await Mp(this,Lu.RequestMuteLocal,o),t()}catch(e){i(e)}finally{n()}},this.handleUnmuteLocalTrack=async(e,t,i)=>{const n=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection)return void i(new pl(ll.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));await this.waitTillConnected();const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();await this.connection.unmuteLocal(vo(r).call(r,([,{id:e}])=>e));const o=this.createUnmuteMessage(r);await Mp(this,Lu.RequestUnmuteLocal,o),t()}catch(e){i(e)}finally{n()}},this.handleUpdateVideoEncoder=async(e,t,i)=>{const n=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const i=this.localTrackMap.get(ku.LocalVideoTrack);if(!this.connection||!i||i.track!==e)return void t();await this.waitTillConnected();const{id:r,track:o}=i;await this.connection.updateSendParameters(r,o),await this.connection.updateEncoderConfig(r,o),t()}catch(e){i(e)}finally{n()}},this.handleSetOptimizationMode=async(e,t,i)=>{const n=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const i=this.localTrackMap.get(ku.LocalVideoTrack);if(!this.connection||!i||i.track!==e)return;await this.waitTillConnected();const{id:r,track:o}=i;await this.connection.updateSendParameters(r,o),t()}catch(e){i(e)}finally{n()}},this.handleReplaceTrack=async(e,t,i)=>{try{var n,r;const i=Qo(n=Bd(Dd(r=this.localTrackMap).call(r))).call(n,([,{track:t}])=>e===t);if(!this.connection||!i)return void t();if(await this.waitTillConnected(),await this.connection.replaceTrack(e,i[1].id),this.isPlanB){const t=i[1];t.id=e._mediaStreamTrack.id,this.localTrackMap.set(i[0],t)}t()}catch(e){i(e)}},this.handleGetLocalVideoStats=e=>{e(this.statsCollector.getLocalVideoTrackStats())},this.handleGetLocalAudioStats=e=>{e(this.statsCollector.getLocalAudioTrackStats())},this.handleGetRemoteVideoStats=e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid],this.handleGetRemoteAudioStats=e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid],this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new ZE,this.bindStatsUploaderEvents(),this.isPlanB=!Fu().supportUnifiedPlan||jc("CHROME_FORCE_PLAN_B")&&Da()}get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(Lu.StateChange,t,this._state)}async startP2PConnection(e){return this.state=Nu.New,this.connection=this.isPlanB?new LE(e,this.store):new FE(e,this.store),this.bindConnectionEvents(this.connection),this.store.peerConnectionStart(),this.connection.establish()}async connect(e,t,i,n,r,o,s,a){if(!this.connection)throw new pl(ll.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");await this.connection.connect(e,t,i,n,r,o,s,a),this.state=Nu.Connected}publish(e,t,i){var n=this;return Qv((function*(){const r=yield Wv(n.mutex.lock("From P2PChannel.publish"));if(n.connection){n.store.pubId=n.store.pubId+1,$h.markPublishStart(n.store.clientId,n.store.pubId);try{yield Wv(n.waitTillConnected());const o=n.filterTobePublishedTracks(e,t,i);if(0===o.length)return;yield*Yv(Zv(n.doPublish(n.connection,o)),Wv)}finally{r()}}else{var o;if(n.state===Nu.Disconnected)throw new pl(ll.UNEXPECTED_ERROR,"PeerConnection already disconnected.");n.throwIfTrackTypeNotMatch(e);const t=Gn(e).call(e,e=>{var t;return-1===Lo(t=n.pendingLocalTracks).call(t,e)});n.pendingLocalTracks=Je(o=n.pendingLocalTracks).call(o,t)}}))()}doPublish(e,t){var i=this;return Qv((function*(){Ji(t).call(t,({track:e,type:t})=>{const n=performance.now();i.store.publish(e.getTrackId(),t===ku.LocalAudioTrack?"audio":"video",n)});const n=yield Wv(e.send(vo(t).call(t,({track:e})=>e),i.store.codec)),r=(yield Wv(n.next())).value,o=i.createGatewayPublishMessage(t,r);let s;try{s=yield o}catch(e){throw n.throw(e),(null==e?void 0:e.code)===ll.WS_ABORT&&Ji(t).call(t,({track:e})=>{var t;-1===Lo(t=i.pendingLocalTracks).call(t,e)&&i.pendingLocalTracks.push(e)}),e}const a=i.mapPubResToRemoteConfig(o,s),c=(yield Wv(n.next(a))).value;Ji(t).call(t,({type:e})=>{i.statsCollector.addLocalStats(e)}),i.bindLocalTrackEvents(t),i.assignLocalTracks(t,c),i.statsUploader.startUploadUplinkStats(),Ji(t).call(t,({track:e,type:t})=>{const n=performance.now();i.store.publish(e.getTrackId(),t===ku.LocalAudioTrack?"audio":"video",void 0,n)})}))()}publishLowStream(e){var t=this;return Qv((function*(){if(!t.connection)return;const i=yield Wv(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const r=t.localTrackMap.get(ku.LocalVideoTrack);if(!r)throw new pl(ll.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(ku.LocalVideoLowTrack))throw new pl(ll.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));yield Wv(t.waitTillConnected());const o=[{track:t.getLowVideoTrack(r.track,e),type:ku.LocalVideoLowTrack}];if(yield*Yv(Zv(t.doPublish(t.connection,o)),Wv),r.track.muted||!r.track.enabled){var n;const e=null===(n=t.localTrackMap.get(ku.LocalVideoLowTrack))||void 0===n?void 0:n.id;void 0!==e&&(yield Wv(t.connection.muteLocal([e])))}}finally{i()}}))()}async republish(){this.pendingLocalTracks.length>0&&(Rc.debug("Emit P2PChannelEvents.RequestRePublish to republish tracks."),await Dp(this,Lu.RequestRePublish,this.pendingLocalTracks),this.emit(Lu.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async reSubscribe(e){var t;for(let n=this.pendingRemoteTracks.length-1;n>=0;n--){const{user:e,kind:t}=this.pendingRemoteTracks[n];var i;(t!==Ou.AUDIO||e._audio_added_&&e._audioSSRC)&&(t!==Ou.VIDEO||e._video_added_&&e._videoSSRC)||To(i=this.pendingRemoteTracks).call(i,n,1)}if(e)await Dp(this,Lu.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:n,kind:r}of this.pendingRemoteTracks)await this.subscribe(n,r,r===Ou.VIDEO?n._videoSSRC:n._audioSSRC);Ji(t=this.pendingRemoteTracks).call(t,({user:e})=>{this.emit(Lu.MediaReconnectEnd,e.uid)}),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection)return void Ji(e).call(e,e=>{var t;const i=Lo(t=this.pendingLocalTracks).call(t,e);var n;-1!==i&&To(n=this.pendingLocalTracks).call(n,i,1)});await this.waitTillConnected();const t=this.filterTobeUnpublishedTracks(e);return 0!==t.length?this.doUnpublish(this.connection,t):void 0}async unpublishLowStream(){if(!this.connection)return;const e=this.localTrackMap.get(ku.LocalVideoLowTrack);if(!e)return;await this.waitTillConnected();const t=[[ku.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){const i=this.createGatewayUnpublishMessage(t);return await e.stopSending(vo(t).call(t,([,{id:e}])=>e)),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t),Ji(t).call(t,([e])=>{this.statsCollector.removeLocalStats(e)}),0===this.localTrackMap.size&&this.statsUploader.stopUploadUplinkStats(),i}async subscribe(e,t,i,n){var r,o;if(!this.connection)throw new pl(ll.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(null!==(r=this.remoteUserMap.get(e))&&void 0!==r&&r.has(t))return;let s,a;if(await this.waitTillConnected(),n){const i=Qo(n).call(n,({stream_type:e})=>e===t);var c,l;if(!i)throw new pl(ll.UNEXPECTED_ERROR,Je(c=Je(l="Cannot subscribe to remote ".concat(t," for user: ")).call(l,e.uid," because subscribe answer from gateway does not contain stream_type: ")).call(c,t,"."));const r=await this.connection.receive(t,i.ssrcs,String(e.uid),i.attributes);s=r.track,a=r.id}else{const n=await this.connection.receive(t,[{ssrcId:i}],String(e.uid),void 0);s=n.track,a=n.id}var u,d;t===Ou.AUDIO?e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(s):(e._audioTrack=new qE(s,e.uid,e._uintid,this.store),Rc.info(Je(u="[".concat(this.store.p2pId,"] create remote audio track: ")).call(u,e._audioTrack.getTrackId())),this.bindRemoteTrackEvents(e,e._audioTrack)):e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(s):(e._videoTrack=new WE(s,e.uid,e._uintid,this.store),Rc.info(Je(d="[".concat(this.store.p2pId,"] create remote video track: ")).call(d,e._videoTrack.getTrackId())),this.bindRemoteTrackEvents(e,e._videoTrack));const h=this.remoteUserMap.get(e);h?h.set(t,a):this.remoteUserMap.set(e,new Mi([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadDownlinkStats();const p=Lv(o=this.pendingRemoteTracks).call(o,({user:i,kind:n})=>i.uid===e.uid&&t===n);var f;-1!==p&&(To(f=this.pendingRemoteTracks).call(f,p,1),this.emit(Lu.MediaReconnectEnd,e.uid))}async unsubscribe(e,t){var i;const n=Gn(i=this.pendingRemoteTracks).call(i,({user:i,kind:n})=>void 0!==t?i.uid===e.uid&&t===n:i.uid===e.uid);if(Ji(n).call(n,e=>{var t,i;const n=Lo(t=this.pendingRemoteTracks).call(t,e);To(i=this.pendingRemoteTracks).call(i,n,1)}),!this.connection)return void Ji(n).call(n,({kind:t})=>{var i;if(t===Ou.AUDIO)null===(i=e._audioTrack)||void 0===i||i._destroy(),e._audioTrack=void 0;else if(t===Ou.VIDEO){var n;null===(n=e._videoTrack)||void 0===n||n._destroy(),e._videoTrack=void 0}});const r=this.filterTobeUnSubscribedTracks(e,t);if(0===r.length)return;await this.connection.stopReceiving(vo(r).call(r,([,{id:e}])=>e));const o=this.createUnsubscribeMessage(r);return this.withdrawRemoteTracks(r),0===this.remoteUserMap.size&&this.statsUploader.stopUploadDownlinkStats(),Ji(r).call(r,([e,{kind:t}])=>{var i,n;if(t===Ou.VIDEO&&e._videoSSRC&&(null===(i=this.connection)||void 0===i||i.setStatsRemoteVideoIsReady(e._videoSSRC,!1)),t===Ou.VIDEO)this.unbindRemoteTrackEvents(e._videoTrack),null===(n=e._videoTrack)||void 0===n||n._destroy(),e._videoTrack=void 0;else if(t===Ou.AUDIO){var r;this.unbindRemoteTrackEvents(e._audioTrack),null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0}}),o}async muteRemote(e,t){if(!this.connection)return;const i=this.remoteUserMap.get(e);if(!i)return void Rc.warning("P2PChannel.unmuteRemote has no remote user ".concat(e.uid,"."));const n=i.get(t);var r;if(!n)return void Rc.warning(Je(r="P2PChannel.unmuteRemote has no remote user ".concat(e.uid," media type ")).call(r,t,"."));const o=t===Ou.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==o&&this.connection.setStatsRemoteVideoIsReady(o,!1),await this.connection.muteRemote(n)}async unmuteRemote(e,t){if(!this.connection)return;const i=this.remoteUserMap.get(e);if(!i)return void Rc.warning("P2PChannel.unmuteRemote has no remote user ".concat(e.uid,"."));const n=i.get(t);var r;n?await this.connection.unmuteRemote(n):Rc.warning(Je(r="P2PChannel.unmuteRemote has no remote user ".concat(e.uid," media type ")).call(r,t,"."))}getAllTracks(e){const t=this.localTrackMap.get(ku.LocalAudioTrack);if((null==t?void 0:t.track)instanceof Qh){var i,n,r,o,s;const a=t.track;return Je(i=vo(n=Gn(r=Gn(o=Bd(Dd(s=this.localTrackMap).call(s))).call(o,([e])=>e!==ku.LocalAudioTrack)).call(r,([t])=>!(e&&t===ku.LocalVideoLowTrack))).call(n,([,{track:e}])=>e)).call(i,a.trackList)}var a,c,l;return vo(a=Gn(c=Bd(Dd(l=this.localTrackMap).call(l))).call(c,([t])=>!(e&&t===ku.LocalVideoLowTrack))).call(a,([,{track:e}])=>e)}reportPublishEvent(e,t,i,n,r){if(e){var o;const i=this.localTrackMap.get(ku.LocalAudioTrack),s=n?this.localTrackMap.get(ku.LocalVideoLowTrack):this.localTrackMap.get(ku.LocalVideoTrack);rh.publish(this.store.sessionId,{eventElapse:$h.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==i?void 0:i.track.getTrackLabel(),videoName:null==s?void 0:s.track.getTrackLabel(),screenshare:-1!==(null==s?void 0:Lo(o=s.track._hints).call(o,Eu.SCREEN_TRACK)),audio:!!i,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}else{var s,a;i||(i=[]);const o=Qo(i).call(i,e=>e instanceof jh),c=n?null===(s=this.localTrackMap.get(ku.LocalVideoTrack))||void 0===s?void 0:s.track:Qo(i).call(i,e=>e instanceof bv);rh.publish(this.store.sessionId,{eventElapse:$h.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==o?void 0:o.getTrackLabel(),videoName:null==c?void 0:c.getTrackLabel(),screenshare:-1!==(null==c?void 0:Lo(a=c._hints).call(a,Eu.SCREEN_TRACK)),audio:!!o,video:!!c,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:r})}}reportSubscribeEvent(e,t,i,n){const r=n===Ou.VIDEO?i._videoSSRC:i._audioSSRC;r&&rh.subscribe(this.store.sessionId,{succ:e,ec:t,video:n===Ou.VIDEO,audio:n===Ou.AUDIO,peerid:i.uid,subscribeRequestid:n===Ou.VIDEO?i._videoSSRC:i._audioSSRC,p2pid:this.store.p2pId,eventElapse:$h.measureFromSubscribeStart(this.store.clientId,r)})}reset(){Rc.debug("P2PChannel.reset"),this.mutex=new ah("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=Nu.Disconnected}getStats(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(ku.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(ku.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof bv||t&&t.track instanceof jh?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const i=this.remoteUserMap.get(e);return!!i&&(!t||i.has(t))}getRemoteMedia(e){var t,i;const n=Qo(t=Bd(jd(i=this.remoteUserMap).call(i))).call(t,t=>t.uid===e);return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){var e,t;let i=vo(e=Bd(Dd(t=this.remoteUserMap).call(t))).call(e,([e])=>({uid:e.uid,level:e.audioTrack?100*e.audioTrack._source.getAccurateVolumeLevel():0}));const n=this.localTrackMap.get(ku.LocalAudioTrack);return n&&i.push({level:100*n.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),i=cl(i).call(i,(e,t)=>e.level-t.level),i}async disconnectForReconnect(){var e,t,i,n;this.connection&&(Rc.debug("P2PChannel.disconnectForReconnect closing P2PConnection"),this.state=Nu.Reconnecting,this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,0!==this.localTrackMap.size&&(Ji(e=Bd(Dd(t=this.localTrackMap).call(t))).call(e,([e,{track:t}])=>{var i;switch(e){case ku.LocalVideoTrack:ns(i=t._hints).call(i,Eu.LOW_STREAM)?t.close():this.pendingLocalTracks.push(t);break;case ku.LocalAudioTrack:var n;t instanceof Qh?this.pendingLocalTracks=Je(n=this.pendingLocalTracks).call(n,t.trackList):this.pendingLocalTracks.push(t);break;case ku.LocalVideoLowTrack:}}),this.emit(Lu.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Ji(i=Bd(Dd(n=this.remoteUserMap).call(n))).call(i,([e,t])=>{var i;Ji(i=Bd(jd(t).call(t))).call(i,t=>{this.setPendingRemoteMedia(e,t)}),this.emit(Lu.MediaReconnectStart,e.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),Rc.debug("P2PChannel disconnected, waiting to reconnect."))}hasPendingRemoteMedia(e,t){for(const i of this.pendingRemoteTracks){const{user:n,kind:r}=i;if((e instanceof Iv?e.uid:e)===n.uid&&t===r)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async reEstablish(){if(this.connection)return this.connection.reEstablish()}getUplinkNetworkQuality(){var e,t,i;if(!this.connection)return 0;const n=this.connection.getStats(),r=this.localTrackMap.get(ku.LocalVideoTrack),o=this.localTrackMap.get(ku.LocalAudioTrack),s=Qo(e=n.videoSend).call(e,e=>e.ssrc===(null==r?void 0:r.ssrcs[0].ssrcId)),a=Qo(t=n.audioSend).call(t,e=>e.ssrc===(null==o?void 0:o.ssrcs[0].ssrcId));if(!s||!a)return 1;const c=xp(this,Lu.NeedSignalRTT),l=s?s.rttMs:void 0,u=a?a.rttMs:void 0,d=l&&u?(l+u)/2:l||u,h=(d&&c?(d+c)/2:d||c)||0,p=100*n.sendPacketLossRate*.7/50+.3*h/1500,f=p<.17?1:p<.36?2:p<.59?3:p<.1?4:5,g=null==r?void 0:r.track;if(g&&g._encoderConfig&&-1===Lo(i=g._hints).call(i,Eu.SCREEN_TRACK)){const e=g._encoderConfig.bitrateMax,t=n.bitrate.actualEncoded;if(e&&t){const i=(1e3*e-t)/(1e3*e);return zc[i<.15?0:i<.3?1:i<.45?2:i<.6?3:4][f]}}return f}getDownlinkNetworkQuality(){var e,t;if(!this.connection)return 0;const i=this.connection.getStats();let n=0;return Ji(e=Bd(Dd(t=this.remoteUserMap).call(t))).call(e,([e])=>{var t,r;const o=e._audioSSRC,s=e._videoSSRC,a=Qo(t=i.audioRecv).call(t,e=>e.ssrc===o),c=Qo(r=i.videoRecv).call(r,e=>e.ssrc===s);if(!a&&!c)return void(n+=1);const l=xp(this,Lu.NeedSignalRTT),u=i.rtt,d=(u&&l?(u+l)/2:u||l)||0,h=a?a.jitterMs:void 0,p=i.recvPacketLossRate;let f=.7*p*100/50+.3*d/1500;h&&(f=.6*p*100/50+.2*d/1500+.2*h/400),n+=f<.1?1:f<.17?2:f<.36?3:f<.59?4:5}),this.remoteUserMap.size>0?Math.round(n/this.remoteUserMap.size):n}async muteLocalTrack(e){return new fo((t,i)=>{this.handleMuteLocalTrack(e,t,i)})}filterTobePublishedTracks(e,t,i){const n=[],r=Fu(),o=this.getAllTracks();e=Fp(e=Gn(e).call(e,e=>-1===Lo(o).call(o,e)));let s=!1,a=!1;for(const c of e){if(c instanceof bv&&(this.localTrackMap.has(ku.LocalVideoTrack)||s?new pl(ll.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(n.push({track:c,type:ku.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(c,i);n.push({track:e,type:ku.LocalVideoLowTrack})}if(c instanceof jh){const e=this.localTrackMap.get(ku.LocalAudioTrack);if(e){if(!(e.track instanceof Qh))throw new pl(ll.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new pl(ll.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0)}else if(a){const e=Qo(n).call(n,({type:e})=>e===ku.LocalAudioTrack);if(!(e.track instanceof Qh))throw new pl(ll.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new pl(ll.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c)}else{if(!r.webAudioMediaStreamDest||c instanceof Qh||c._bypassWebAudio)n.push({track:c,type:ku.LocalAudioTrack});else{const e=new Qh;e.addAudioTrack(c),n.push({track:e,type:ku.LocalAudioTrack})}a=!0}}}return n}filterTobeUnpublishedTracks(e){const t=[],i=this.getAllTracks();e=Fp(e=Gn(e).call(e,e=>-1!==Lo(i).call(i,e)));for(const n of e){if(n instanceof jh){const e=this.localTrackMap.get(ku.LocalAudioTrack);if(!e)continue;e.track instanceof Qh?(e.track.removeAudioTrack(n),this.unbindLocalAudioTrackEvents(n),0===e.track.trackList.length&&(t.push([ku.LocalAudioTrack,e]),e.track.close())):t.push([ku.LocalAudioTrack,e])}if(n instanceof bv){const e=this.localTrackMap.get(ku.LocalVideoTrack);if(!e)continue;t.push([ku.LocalVideoTrack,e]);const i=this.localTrackMap.get(ku.LocalVideoLowTrack);i&&t.push([ku.LocalVideoLowTrack,i])}}return t}bindLocalTrackEvents(e){Ji(e).call(e,({track:e,type:t})=>{switch(t){case ku.LocalVideoTrack:e.addListener(vu.GET_STATS,this.handleGetLocalVideoStats),e.addListener(vu.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(vu.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(vu.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),e.addListener(vu.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),e.addListener(vu.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(vu.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(vu.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case ku.LocalAudioTrack:this.bindLocalAudioTrackEvents(e);break;case ku.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,t){var i;e instanceof Qh?Ji(i=e.trackList).call(i,e=>{e.addListener(vu.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(vu.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(vu.GET_STATS,this.handleGetLocalAudioStats),e.addListener(vu.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(vu.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(vu.GET_STATS,this.handleGetLocalAudioStats),e.addListener(vu.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(vu.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(vu.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(vu.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(vu.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){var t;e||(e=Bd(Dd(t=this.localTrackMap).call(t))),Ji(e).call(e,([e,{track:t}])=>{switch(e){case ku.LocalVideoTrack:t.off(vu.GET_STATS,this.handleGetLocalVideoStats),t.off(vu.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(vu.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(vu.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(vu.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.off(vu.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(vu.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(vu.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case ku.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);break;case ku.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){var t;e instanceof Qh?Ji(t=e.trackList).call(t,e=>{e.off(vu.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(vu.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(vu.GET_STATS,this.handleGetLocalAudioStats),e.off(vu.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(vu.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(vu.GET_STATS,this.handleGetLocalAudioStats),e.off(vu.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(vu.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(vu.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(vu.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(vu.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof WE&&t.addListener(vu.GET_STATS,t=>{t(this.handleGetRemoteVideoStats(e))}),t instanceof qE&&t.addListener(vu.GET_STATS,t=>{t(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(vu.GET_STATS)}unbindAllRemoteTrackEvents(){var e,t;Ji(e=Bd(Dd(t=this.remoteUserMap).call(t))).call(e,([e,t])=>{t.has(Ou.AUDIO)&&this.unbindRemoteTrackEvents(e._audioTrack),t.has(Ou.VIDEO)&&this.unbindRemoteTrackEvents(e._videoTrack)})}createGatewayPublishMessage(e,t){return vo(e).call(e,({track:e,type:i},n)=>{var r;let o,s;switch(i){case ku.LocalAudioTrack:o=mu.Audio,s={dtx:e instanceof Gh&&e._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case ku.LocalVideoTrack:o=ns(r=e._hints).call(r,Eu.SCREEN_TRACK)?mu.Screen:mu.High,s=KE({},gp(e),{codec:this.store.codec});break;case ku.LocalVideoLowTrack:o=mu.Low,s=KE({},gp(e),{codec:this.store.codec})}return{stream_type:o,attributes:s,ssrcs:t[n]}})}createGatewayUnpublishMessage(e){return vo(e).call(e,([e,{track:t,ssrcs:i,id:n}])=>{var r;let o;switch(e){case ku.LocalVideoTrack:o=ns(r=t._hints).call(r,Eu.SCREEN_TRACK)?mu.Screen:mu.High;break;case ku.LocalAudioTrack:o=mu.Audio;break;case ku.LocalVideoLowTrack:o=mu.Low}return{stream_type:o,ssrcs:i,mid:n}})}assignLocalTracks(e,t){Ji(e).call(e,({track:e,type:i},n)=>{this.localTrackMap.set(i,{track:e,id:t[n].id,ssrcs:t[n].localSSRC})})}withdrawLocalTracks(e){Ji(e).call(e,([e])=>{this.localTrackMap.delete(e)})}async waitTillConnected(){return new fo((e,t)=>{switch(this.state){case Nu.New:case Nu.Reconnecting:{const i=(n,r)=>r===Nu.Disconnected?(this.off(Lu.StateChange,i),void t(new pl(ll.UNEXPECTED_ERROR,"PeerConnection already disconnected."))):r===Nu.Connected?(this.off(Lu.StateChange,i),void e(void 0)):void 0;this.on(Lu.StateChange,i);break}case Nu.Connected:e(void 0);break;case Nu.Disconnected:t(new pl(ll.UNEXPECTED_ERROR,"PeerConnection already disconnected."))}})}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var i;Rc.info(Je(i="[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(")).call(i,t,")")),this.emit(Lu.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"failed"===t&&("failed"===e.iceConnectionState?(Fa(()=>this.emit(Lu.P2PLost),0),this.iceFailedCount+=1,await Ip(Zd(this.iceFailedCount,zd)),this.emit(Lu.RequestRestartICE)):await this.requestReconnect())},e.onICEConnectionStateChange=e=>{var t;Rc.info(Je(t="[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(")).call(t,e,")")),this.emit(Lu.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{var t;Rc.info(Je(t="[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(")).call(t,e,")"))},e.onDTLSTransportStateChange=e=>{var t;Rc.info(Je(t="[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(")).call(t,e,")"))},e.onDTLSTransportError=e=>{var t;Rc.info(Je(t="[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(")).call(t,e,")"))},e.onFirstAudioDecoded=e=>{var t,i;const n=Qo(t=Bd(jd(i=this.remoteUserMap).call(i))).call(t,t=>t._audioSSRC===e);var r;n&&(null===(r=n.audioTrack)||void 0===r||r.emit(yu.FIRST_FRAME_DECODED),rh.firstRemoteFrame(this.store.sessionId,wl.FIRST_AUDIO_DECODE,Ol.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:$h.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t,i;const n=Qo(t=Bd(jd(i=this.remoteUserMap).call(i))).call(t,t=>t._audioSSRC===e);n&&rh.firstRemoteFrame(this.store.sessionId,wl.FIRST_AUDIO_RECEIVED,Ol.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:$h.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,i)=>{var n,r;const o=Qo(n=Bd(jd(r=this.remoteUserMap).call(r))).call(n,t=>t._videoSSRC===e);o&&rh.firstRemoteFrame(this.store.sessionId,wl.FIRST_VIDEO_DECODE,Ol.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:i,subscribeElapse:$h.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoReceived=e=>{var t,i;const n=Qo(t=Bd(jd(i=this.remoteUserMap).call(i))).call(t,t=>t._videoSSRC===e);n&&rh.firstRemoteFrame(this.store.sessionId,wl.FIRST_VIDEO_RECEIVED,Ol.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:$h.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0}filterTobeMutedTracks(e){var t,i;const n=[],r=this.getAllTracks();if(-1===Lo(r).call(r,e))return n;const o=this.localTrackMap.get(ku.LocalAudioTrack);if(e instanceof jh&&(null==o?void 0:o.track)instanceof Qh)return o.track.isActive||n.push([ku.LocalAudioTrack,o]),n;const s=Qo(t=Bd(Dd(i=this.localTrackMap).call(i))).call(t,([,{track:t}])=>e===t);if(s&&(n.push(s),s[0]===ku.LocalVideoTrack)){const e=this.localTrackMap.get(ku.LocalVideoLowTrack);e&&n.push([ku.LocalVideoLowTrack,e])}return n}filterTobeUnmutedTracks(e){var t,i;const n=[],r=this.localTrackMap.get(ku.LocalAudioTrack);if(e instanceof jh&&(null==r?void 0:r.track)instanceof Qh)return r.track.isActive&&n.push([ku.LocalAudioTrack,r]),n;const o=Qo(t=Bd(Dd(i=this.localTrackMap).call(i))).call(t,([,{track:t}])=>e===t);if(o)if(o[0]===ku.LocalVideoTrack){n.push(o);const e=this.localTrackMap.get(ku.LocalVideoLowTrack);e&&n.push([ku.LocalVideoLowTrack,e])}else n.push(o);return n}createMuteMessage(e){return vo(e).call(e,([e,{track:t,ssrcs:i,id:n}])=>{var r;let o;switch(e){case ku.LocalAudioTrack:o=mu.Audio;break;case ku.LocalVideoTrack:o=ns(r=t._hints).call(r,Eu.SCREEN_TRACK)?mu.Screen:mu.High;break;case ku.LocalVideoLowTrack:o=mu.Low}return{stream_type:o,ssrcs:i,mid:n}})}createUnmuteMessage(e){return vo(e).call(e,([e,{track:t,ssrcs:i,id:n}])=>{var r;let o;switch(e){case ku.LocalAudioTrack:o=mu.Audio;break;case ku.LocalVideoTrack:o=ns(r=t._hints).call(r,Eu.SCREEN_TRACK)?mu.Screen:mu.High;break;case ku.LocalVideoLowTrack:o=mu.Low}return{stream_type:o,ssrcs:i,mid:n}})}filterTobeUnSubscribedTracks(e,t){const i=[],n=this.remoteUserMap.get(e);if(!n)return i;if(t){const r=n.get(t);if(!r)return i;i.push([e,{kind:t,id:r}])}else{var r;Ji(r=Bd(Dd(n).call(n))).call(r,([t,n])=>{i.push([e,{kind:t,id:n}])})}return i}createUnsubscribeMessage(e){const t=[];return Ji(e).call(e,([e,{kind:i,id:n}])=>{switch(i){case Ou.VIDEO:return void(e._videoSSRC&&t.push({stream_type:Ou.VIDEO,ssrcId:e._videoSSRC}));case Ou.AUDIO:return void(e._audioSSRC&&t.push({stream_type:Ou.AUDIO,ssrcId:e._audioSSRC}))}}),t}withdrawRemoteTracks(e){Ji(e).call(e,([e,{kind:t}])=>{const i=this.remoteUserMap.get(e);i&&(i.delete(t),0===Bd(Dd(i).call(i)).length&&this.remoteUserMap.delete(e))})}async updateBitrateLimit(e){const t=this.localTrackMap.get(ku.LocalVideoTrack),i=this.localTrackMap.get(ku.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),i&&e.low_stream_uplink&&await i.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(e,t){return vo(e).call(e,({stream_type:e},i)=>{var n;return null===(n=Qo(t).call(t,({stream_type:t})=>e===t))||void 0===n?void 0:n.attributes})}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>{var e;return Bd(Dd(e=this.localTrackMap).call(e))},this.statsUploader.requestRemoteMedia=()=>{var e;return Bd(Dd(e=this.remoteUserMap).call(e))},this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.connection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(Lu.RequestUploadStats,e,t)}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Ip(Zd(this.dtlsFailedCount,zd)),this.emit(Lu.RequestReconnect)}async reconnectP2P(){var e,t;const i=Bd(Dd(e=this.localTrackMap).call(e)),n=this.createGatewayUnpublishMessage(i);Bd(Dd(t=this.remoteUserMap).call(t)),n.length>0&&await Dp(this,Lu.RequestUnpublishForReconnectPC,n),this.disconnectForReconnect(),this.emit(Lu.RequestReconnectPC)}canPublishLowStream(){var e;return this.localTrackMap.has(ku.LocalVideoTrack)||as(e=this.pendingLocalTracks).call(e,e=>e instanceof bv)}throwIfTrackTypeNotMatch(e){if(Gn(e).call(e,e=>e instanceof bv).length>1)throw new pl(ll.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(Gn(e).call(e,e=>e instanceof jh).length>1&&(as(e).call(e,e=>e instanceof jh&&e._bypassWebAudio)||!Fu().webAudioMediaStreamDest))throw new pl(ll.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const r of e){var t,i,n;if(r instanceof bv&&as(t=this.pendingLocalTracks).call(t,e=>e instanceof bv))throw new pl(ll.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r instanceof jh&&as(i=this.pendingLocalTracks).call(i,e=>e instanceof jh)&&(!Fu().webAudioMediaStreamDest||r._bypassWebAudio||as(n=this.pendingLocalTracks).call(n,e=>e instanceof jh&&e._bypassWebAudio)))throw new pl(ll.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const i=Fu().supportDualStreamEncoding,n=KE({},{width:160,height:120,framerate:15,bitrate:50},{},t);let r;r=i?e._mediaStreamTrack.clone():jE(e,n);const o=new bv(r,KE({},i&&{scaleResolutionDownBy:Ap(n,e)},{frameRate:n.framerate,bitrateMax:n.bitrate,bitrateMin:n.bitrate}));return o._hints.push(Eu.LOW_STREAM),o}}function tA(e,t,i){const n=e[t];if("function"!=typeof n)throw new Error("Cannot use mutex on object property.");return i.value=async function(...e){const i=this.mutex,r=await i.lock("From P2PChannel.".concat(t));try{return await n.apply(this,e)}finally{r()}},i}JE([tA,XE("design:type",Function),XE("design:paramtypes",[Object]),XE("design:returntype",fo)],eA.prototype,"startP2PConnection",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[Object,Object,Array,Object,String,String,String,String]),XE("design:returntype",fo)],eA.prototype,"connect",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[Array]),XE("design:returntype",fo)],eA.prototype,"unpublish",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[]),XE("design:returntype",fo)],eA.prototype,"unpublishLowStream",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[Iv,String,Number,Array]),XE("design:returntype",fo)],eA.prototype,"subscribe",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[Iv,String]),XE("design:returntype",fo)],eA.prototype,"unsubscribe",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[Iv,String]),XE("design:returntype",fo)],eA.prototype,"muteRemote",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[Iv,String]),XE("design:returntype",fo)],eA.prototype,"unmuteRemote",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[]),XE("design:returntype",fo)],eA.prototype,"disconnectForReconnect",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[]),XE("design:returntype",fo)],eA.prototype,"reEstablish",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[Object]),XE("design:returntype",fo)],eA.prototype,"updateBitrateLimit",null);var iA=s((function(){ti(1)}));Q({target:"Object",stat:!0,forced:iA,sham:!Jt},{getPrototypeOf:function(e){return ti(Ae(e))}});var nA=M.Object.getPrototypeOf,rA=Dv;function oA(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var sA,aA="function"==typeof rA&&rA.observable||"@@observable",cA=function(){return Math.random().toString(36).substring(7).split("").join(".")},lA={INIT:"@@redux/INIT"+cA(),REPLACE:"@@redux/REPLACE"+cA(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+cA()}};function uA(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==nA(t);)t=nA(t);return nA(e)===t}function dA(e,t,i){var n;if("function"==typeof t&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error(oA(0));if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw new Error(oA(1));return i(dA)(e,t)}if("function"!=typeof e)throw new Error(oA(2));var r=e,o=t,s=[],a=s,c=!1;function l(){a===s&&(a=Uo(s).call(s))}function u(){if(c)throw new Error(oA(3));return o}function d(e){if("function"!=typeof e)throw new Error(oA(4));if(c)throw new Error(oA(5));var t=!0;return l(),a.push(e),function(){if(t){if(c)throw new Error(oA(6));t=!1,l();var i=Lo(a).call(a,e);To(a).call(a,i,1),s=null}}}function h(e){if(!uA(e))throw new Error(oA(7));if(void 0===e.type)throw new Error(oA(8));if(c)throw new Error(oA(9));try{c=!0,o=r(o,e)}finally{c=!1}for(var t=s=a,i=0;i<t.length;i++)(0,t[i])();return e}function p(e){if("function"!=typeof e)throw new Error(oA(10));r=e,h({type:lA.REPLACE})}function f(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(oA(11));function i(){e.next&&e.next(u())}return i(),{unsubscribe:t(i)}}})[aA]=function(){return this},e}return h({type:lA.INIT}),(n={dispatch:h,subscribe:d,getState:u,replaceReducer:p})[aA]=f,n}function hA(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function pA(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=hA(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=hA(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}!function(e){e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_UID="SET_UID",e.SET_PUB_ID="SET_PUB_ID",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE"}(sA||(sA={}));class fA{constructor(e,t,i){const n={codec:e,mode:t,clientId:i,sessionId:null,p2pId:0,pubId:0,subId:0,keyMetrics:{publish:[],subscribe:[]}};this.reducer=function(e=n,t){switch(t.type){case sA.SET_SESSION_ID:return pA({},e,{sessionId:t.sessionId});case sA.SET_P2P_ID:return pA({},e,{p2pId:t.p2pId});case sA.SET_UID:return pA({},e,{uid:t.uid});case sA.SET_PUB_ID:return pA({},e,{pubId:t.pubId});case sA.KEY_METRIC_CLIENT_CREATED:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{clientCreated:t.metric})});case sA.KEY_METRIC_JOIN_START:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{joinStart:t.metric})});case sA.KEY_METRIC_JOIN_END:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{joinEnd:t.metric})});case sA.KEY_METRIC_REQUEST_AP_START:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{requestAPStart:t.metric})});case sA.KEY_METRIC_REQUEST_AP_END:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{requestAPEnd:t.metric})});case sA.KEY_METRIC_JOIN_GATEWAY_START:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{joinGatewayStart:t.metric})});case sA.KEY_METRIC_JOIN_GATEWAY_END:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{joinGatewayEnd:t.metric})});case sA.KEY_METRIC_PEER_CONNECTION_START:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{peerConnectionStart:t.metric})});case sA.KEY_METRIC_PEER_CONNECTION_END:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{peerConnectionEnd:t.metric})});case sA.KEY_METRIC_PUBLISH:{const i=e.keyMetrics.publish,n=Lv(i).call(i,e=>e.trackId===t.metric.trackId);return-1!==n?(i[n]=pA({},i[n],{},t.metric),pA({},e,{keyMetrics:pA({},e.keyMetrics,{publish:[...i]})})):pA({},e,{keyMetrics:pA({},e.keyMetrics,{publish:[...e.keyMetrics.publish,t.metric]})})}case sA.KEY_METRIC_SUBSCRIBE:{const i=e.keyMetrics.subscribe,n=Lv(i).call(i,e=>e.userId===t.metric.userId&&e.type===t.metric.type);return-1!==n?(i[n]=pA({},i[n],{},t.metric),pA({},e,{keyMetrics:pA({},e.keyMetrics,{subscribe:[...i]})})):pA({},e,{keyMetrics:pA({},e.keyMetrics,{subscribe:[...e.keyMetrics.subscribe,t.metric]})})}default:return e}},this.store=dA(this.reducer)}set sessionId(e){this.store.dispatch({type:sA.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.store.getState().sessionId}get codec(){return this.store.getState().codec}get clientId(){return this.store.getState().clientId}set p2pId(e){this.store.dispatch({type:sA.SET_P2P_ID,p2pId:e})}get p2pId(){return this.store.getState().p2pId}set uid(e){this.store.dispatch({type:sA.SET_UID,uid:e})}get uid(){return this.store.getState().uid}set pubId(e){this.store.dispatch({type:sA.SET_PUB_ID,pubId:e})}get pubId(){return this.store.getState().pubId}clientCreated(){this.store.dispatch({type:sA.KEY_METRIC_CLIENT_CREATED,metric:performance.now()})}joinStart(){this.store.dispatch({type:sA.KEY_METRIC_JOIN_START,metric:performance.now()})}joinEnd(){this.store.dispatch({type:sA.KEY_METRIC_JOIN_END,metric:performance.now()})}requestAPStart(){this.store.dispatch({type:sA.KEY_METRIC_REQUEST_AP_START,metric:performance.now()})}requestAPEnd(){this.store.dispatch({type:sA.KEY_METRIC_REQUEST_AP_END,metric:performance.now()})}joinGatewayStart(){this.store.dispatch({type:sA.KEY_METRIC_JOIN_GATEWAY_START,metric:performance.now()})}joinGatewayEnd(){this.store.dispatch({type:sA.KEY_METRIC_JOIN_GATEWAY_END,metric:performance.now()})}peerConnectionStart(){this.store.dispatch({type:sA.KEY_METRIC_PEER_CONNECTION_START,metric:performance.now()})}peerConnectionEnd(){this.store.dispatch({type:sA.KEY_METRIC_PEER_CONNECTION_END,metric:performance.now()})}publish(e,t,i,n){this.store.dispatch({type:sA.KEY_METRIC_PUBLISH,metric:pA({trackId:e,type:t},i&&{publishStart:i},{},n&&{publishEnd:n})})}subscribe(e,t,i,n,r){this.store.dispatch({type:sA.KEY_METRIC_SUBSCRIBE,metric:pA({userId:e,type:t},i&&{subscribeStart:i},{},n&&{subscribeEnd:n},{},r&&{firstFrame:r})})}get keyMetrics(){return this.store.getState().keyMetrics}}let gA;const mA=()=>"HTTPS"===(gA||gA||(gA=(window.location.protocol.split(":")[0]||"").toUpperCase(),gA)),_A=()=>void 0!==window.isSecureContext;class vA{constructor(e,t){var i;this.name=e,this.time=performance.now(),this.sequence=Lo(i=Bu[t]).call(i,e)}setElapse(e){this.elapse=e}}const EA=new Mi;function AA(e,t){const i=new yA(e,t);return EA.set(e,i),i}class yA{constructor(e,t){this.records=[],this._id=e,this._group=t,this._localTimeStamp=Ma(),this._performanceTimeStamp=performance.now()}checkPoint(e){var t;const i=new vA(e,this._group);-1===i.sequence&&Rc.warning("[".concat(this._id,"] check point record failed, cannot get the sequence")),this.records.push(i);const n=Qo(t=this.records).call(t,e=>e.sequence===i.sequence-1);n&&i.setElapse(i.time-n.time)}getRecord(e){var t;return Qo(t=this.records).call(t,t=>t&&t.name===e)}resetRecords(){this.records.length=0}}function SA(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function CA(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=SA(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=SA(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}var bA,TA,IA,RA,wA,OA,kA=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Un(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&hn(t,i,s),s},NA=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class LA extends Mu{constructor(e){var t,i,n,r;let o;if(super(),this._users=[],this._sessionId=null,this._leaveMutex=new ah("client-leave"),this._publishMutex=new ah("client-publish"),this._renewTokenMutex=new ah("client-renewtoken"),this._subscribeMutex=new Mi,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._turnServer={servers:[],mode:"auto"},this._cloudProxyServerMode="disabled",this._isDualStreamEnabled=!1,this._streamFallbackTypeCacheMap=new Mi,this._remoteStreamTypeCacheMap=new Mi,this._axiosCancelSource=Sc.CancelToken.source(),this._networkQualitySensitivity="normal",this._useLocalAccessPoint=!1,this._joinAndNotLeaveYet=!1,this._handleLocalTrackEnable=(e,t,i)=>{this.publish(e,!1).then(t).catch(i)},this._handleLocalTrackDisable=(e,t,i)=>{this.unpublish(e,!1).then(t).catch(i)},this._handleUserOnline=e=>{var t;this.isStringUID&&"string"!=typeof e.uid&&Rc.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const i=Qo(t=this._users).call(t,t=>t.uid===e.uid);if(i)i._trust_in_room_=!0;else{const t=new Iv(e.uid,e.uint_id||e.uid);this._users.push(t),Rc.debug("[".concat(this._clientId,"] user online"),e.uid),this.emit(Vl.USER_JOINED,t)}},this._handleUserOffline=e=>{var t;const i=Qo(t=this._users).call(t,t=>t.uid===e.uid);i&&(this._handleRemoveStream(e),Up(this._users,i),this._remoteStreamTypeCacheMap.delete(i.uid),this._streamFallbackTypeCacheMap.delete(i.uid),Rc.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.emit(Vl.USER_LEAVED,i,e.reason))},this._handleAddAudioOrVideoStream=(e,t,i,n,r,o)=>{var s,a,c;const l=Qo(s=this._users).call(s,e=>e.uid===t);if(!l)return void Rc.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));Rc.debug(Je(a=Je(c="[".concat(this._clientId,"] stream added with uid ")).call(c,t,", type ")).call(a,e));const u="audio"===e?l.hasAudio:l.hasVideo;var d,h;l._uintid||(l._uintid=r||t),l._trust_stream_added_state_=!0,"audio"===e?(l._audio_added_=!0,void 0!==i&&(l._audioSSRC=i),void 0!==n&&(l._cname=n),o&&(l._audioOrtc=o)):(l._video_added_=!0,void 0!==i&&(l._videoSSRC=i),void 0!==n&&(l._cname=n),o&&(l._videoOrtc=o)),("audio"===e?l.hasAudio:l.hasVideo)&&!u&&(Rc.info(Je(d=Je(h="[".concat(this._clientId,"] remote user ")).call(h,l.uid," published ")).call(d,e)),this.emit(Vl.USER_PUBLISHED,l,e)),"video"===e?rh.onGatewayStream(this._sessionId,wl.ON_ADD_VIDEO_STREAM,Ol.ON_ADD_VIDEO_STREAM,{peer:r||t}):rh.onGatewayStream(this._sessionId,wl.ON_ADD_AUDIO_STREAM,Ol.ON_ADD_AUDIO_STREAM,{peer:r||t}),this._p2pChannel.hasPendingRemoteMedia(l,e)&&this.subscribe(l,e).catch(e=>{Rc.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})},this._handleRemoveStream=async e=>{var t,i;const n=Qo(t=this._users).call(t,t=>t.uid===e.uid);if(!n)return void Rc.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));Rc.debug(Je(i="[".concat(this._clientId,"] stream removed with uid ")).call(i,e.uid));let r=()=>{};n.hasAudio&&n.hasVideo?r=()=>{var e,t;Rc.info(Je(e="[".concat(this._clientId,"] remote user ")).call(e,n.uid," unpublished audio track")),this.emit(Vl.USER_UNPUBLISHED,n,"audio"),Rc.info(Je(t="[".concat(this._clientId,"] remote user ")).call(t,n.uid," unpublished video track")),this.emit(Vl.USER_UNPUBLISHED,n,"video")}:n.hasVideo?r=()=>{var e;Rc.info(Je(e="[".concat(this._clientId,"] remote user ")).call(e,n.uid," unpublished video track")),this.emit(Vl.USER_UNPUBLISHED,n,"video")}:n.hasAudio&&(r=()=>{var e;Rc.info(Je(e="[".concat(this._clientId,"] remote user ")).call(e,n.uid," unpublished audio track")),this.emit(Vl.USER_UNPUBLISHED,n,"audio")}),n._trust_stream_added_state_=!0,n._audio_added_=!1,n._video_added_=!1;const o=await this._p2pChannel.unsubscribe(n);o&&await this._gateway.unsubscribe(o,n.uid),n._audioSSRC=void 0,n._videoSSRC=void 0,n._audioOrtc=void 0,n._videoOrtc=void 0,rh.onGatewayStream(this._sessionId,wl.ON_REMOVE_STREAM,Ol.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),r()},this._handleSetStreamLocalEnable=async(e,t,i)=>{var n,r,o,s;const a=Qo(n=this._users).call(n,e=>e.uid===t);if(!a)return void Rc.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));Rc.debug(Je(r=Je(o=Je(s="[".concat(this._clientId,"] local ")).call(s,e," ")).call(o,i?"enabled":"disabled"," with uid ")).call(r,t));const c="audio"===e?a.hasAudio:a.hasVideo;if("audio"===e){a._trust_audio_enabled_state_=!0;const e=a._audio_enabled_;if(a._audio_enabled_=i,a._audio_enabled_===e)return;{var l,u;const e=a._audio_enabled_?"enable-local-audio":"disable-local-audio";Rc.debug(Je(l=Je(u="[".concat(this._clientId,"] user-info-updated, uid: ")).call(u,t,", msg: ")).call(l,e)),this.emit(Vl.USER_INFO_UPDATED,t,e)}}else{a._trust_video_enabled_state_=!0;const e=a._video_enabled_;if(a._video_enabled_=i,a._video_enabled_===e)return;{var d,h;const e=a._video_enabled_?"enable-local-video":"disable-local-video";Rc.debug(Je(d=Je(h="[".concat(this._clientId,"] user-info-update, uid: ")).call(h,t,", msg: ")).call(d,e)),this.emit(Vl.USER_INFO_UPDATED,t,e)}}const p="audio"===e?a.hasAudio:a.hasVideo;var f,g,m,_;return c!==p?!c&&p?(Rc.info(Je(f=Je(g="[".concat(this._clientId,"] remote user ")).call(g,t," published ")).call(f,e)),void this.emit(Vl.USER_PUBLISHED,a,e)):("video"===e&&a._videoTrack&&a._videoTrack._destroy(),"audio"===e&&a._audioTrack,await this._p2pChannel.muteRemote(a,e),Rc.info(Je(m=Je(_="[".concat(this._clientId,"] remote user ")).call(_,t," unpublished ")).call(m,e)),void this.emit(Vl.USER_UNPUBLISHED,a,e)):void 0},this._handleMuteStream=async(e,t,i)=>{var n;Rc.debug("[".concat(this._clientId,"] receive mute message"),e,t,i);const r=Qo(n=this._users).call(n,t=>t.uid===e);var o;if(!r)return void Rc.warning(Je(o="[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ")).call(o,e));const s="audio"===t?r.hasAudio:r.hasVideo;if("audio"===t){r._trust_audio_mute_state_=!0;const t=r._audio_muted_;if(r._audio_muted_=i,r._audio_muted_===t)return;{var a,c;const t=r._audio_muted_?"mute-audio":"unmute-audio";Rc.debug(Je(a=Je(c="[".concat(this._clientId,"] user-info-update, uid: ")).call(c,e,", msg: ")).call(a,t)),this.emit(Vl.USER_INFO_UPDATED,e,t)}}else{r._trust_video_mute_state_=!0;const t=r._video_muted_;if(r._video_muted_=i,r._video_muted_===t)return;{var l,u;const t=r._video_muted_?"mute-video":"unmute-video";Rc.debug(Je(l=Je(u="[".concat(this._clientId,"] user-info-update, uid: ")).call(u,e,", msg: ")).call(l,t)),this.emit(Vl.USER_INFO_UPDATED,e,t)}}const d="audio"===t?r.hasAudio:r.hasVideo;var h,p,f,g;return s!==d?!s&&d?(Rc.info(Je(h=Je(p="[".concat(this._clientId,"] remote user ")).call(p,e," published ")).call(h,t)),void this.emit(Vl.USER_PUBLISHED,r,t)):("video"===t&&r._videoTrack&&r._videoTrack._destroy(),"audio"===t&&r._audioTrack,await this._p2pChannel.muteRemote(r,t),Rc.info(Je(f=Je(g="[".concat(this._clientId,"] remote user ")).call(g,e," unpublished ")).call(f,t)),void this.emit(Vl.USER_UNPUBLISHED,r,t)):void 0},this._handleP2PLost=async e=>{Rc.debug("[".concat(this._clientId,"] receive p2p lost"),e),Cn(e.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():Rc.warning("P2PLost stream not found",e)},this._handleTokenWillExpire=()=>{Rc.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.emit(Vl.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)},this._handleBeforeUnload=e=>{"beforeunload"===e.type&&void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),Rc.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))},this._handleUpdateNetworkQuality=()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(Vl.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.emit(Vl.NETWORK_QUALITY,e)},this._codec=e.codec,this._mode=e.mode,e.proxyServer&&(this._proxyServer=e.proxyServer,rh.setProxyServer(this._proxyServer),Rc.setProxyServer(this._proxyServer)),e.turnServer&&(this._turnServer=CA({},this._turnServer,{mode:"manual"},e.turnServer)),this._clientId=Op(5,"client-"),this.store=new fA(e.codec,e.mode,this._clientId),this.store.clientCreated(),Rc.info(Je(t=Je(i=Je(n=Je(r="[".concat(this._clientId,"] Initializing AgoraRTC client v")).call(r,Oc," build: ")).call(n,wc,", mode: ")).call(i,this._mode,", codec: ")).call(t,this._codec)),this._performanceRecorder=AA(this._clientId,"join"),e.clientRoleOptions)try{Jl(e.clientRoleOptions),o=nn({},e.clientRoleOptions)}catch(e){var s;Rc.warning(Je(s="[".concat(this._clientId,"] ")).call(s,e.toString()))}this._statsCollector=new Yh(this.store),this._statsCollector.onStatsException=(e,t,i)=>{var n,r,o;Rc.debug(Je(n=Je(r=Je(o="[".concat(this._clientId,"] receive exception msg, code: ")).call(o,e,", msg: ")).call(r,t,", uid: ")).call(n,i)),this.emit(Vl.EXCEPTION,{code:e,msg:t,uid:i})},this._statsCollector.onUploadPublishDuration=(e,t,i,n)=>{var r;const o=Qo(r=this._users).call(r,t=>t.uid===e);o&&rh.peerPublishStatus(this._sessionId,{subscribeElapse:n,audioPublishDuration:t,videoPublishDuration:i,peer:o._uintid})},this._gateway=new Zf(this.store,{clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:e.websocketRetryConfig||zd,httpRetryConfig:e.httpRetryConfig||zd,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:o}),this._config=e,this._configDistribute=new L_,this._p2pChannel=new eA(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents()}get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}async join(e,t,i,n,r){var o;this._performanceRecorder.checkPoint("startJoin"),this.store.joinStart();const s=mA(),a=_A()?window.isSecureContext:"Browser Not Support",c=()=>{Rc.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser")};_A()?window.isSecureContext||c():s||c();const l=rh.reportApiInvoke(this._sessionId,{name:Nl.JOIN,options:[e,t,i,n],states:{isHttps:s,isSecureContext:a},tag:Ll.TRACER});try{if(!i&&null!==i)throw new pl(ll.INVALID_PARAMS,"Invalid token: ".concat(i,". If you don not use token, set it to null"));i&&_l(i,"token",1,2047),_l(e,"appid",1,2047),El(t),n&&Al(n),r&&_l(r,"optionalInfo",1,2047)}catch(e){throw l.onError(e),e}if(Rc.info(Je(o="[".concat(this._clientId,"] start join channel ")).call(o,t)),this._leaveMutex.isLocked&&(Rc.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),Rc.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,"DISCONNECTED"!==this.connectionState){const e=new pl(ll.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw l.onError(e),e}this._sessionId||(this._sessionId=kp(),this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const u={clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof n?n:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:i||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:r,useLocalAccessPoint:this._useLocalAccessPoint};if("string"==typeof n&&(u.stringUid=n,this._uintUid?(u.uid=this._uintUid,this._uintUid=void 0):u.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret){if(u.aesmode=this._encryptionMode,u.aespassword=await ap(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new pl(ll.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(u.aessalt=this._encryptionSalt)}this._startSession(this._sessionId,{channel:t,appId:e}),Fa(()=>{"CONNECTING"===this.connectionState&&rh.joinChannelTimeout(this._sessionId,5)},5e3);try{var d;let n;if("443only"===u.cloudProxyServer)u.proxyServer=jc("PROXY_SERVER_TYPE2");else if("proxy3"===u.cloudProxyServer||"proxy4"===u.cloudProxyServer||"proxy5"===u.cloudProxyServer){const e=jc("PROXY_SERVER_TYPE3");hl(e)?u.proxyServer=e[0]:u.proxyServer=e}if(rh.setProxyServer(u.proxyServer),Rc.setProxyServer(u.proxyServer),this._performanceRecorder.checkPoint("startRequestAp"),this.store.requestAPStart(),u.stringUid&&!u.uid&&"normal"===u.cloudProxyServer){var h;await C_(u,this._axiosCancelSource.token,this._config.httpRetryConfig||zd,!1);const e=await b_(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||zd);Rc.debug(Je(h="getUserAccount Success ".concat(u.stringUid," => ")).call(h,e)),u.uid=e,n=await S_(u,this._axiosCancelSource.token,this._config.httpRetryConfig||zd)}else if(u.stringUid&&!u.uid){var p;const e=await b_(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||zd);Rc.debug(Je(p="getUserAccount Success ".concat(u.stringUid," => ")).call(p,e)),u.uid=e,n=await C_(u,this._axiosCancelSource.token,this._config.httpRetryConfig||zd,!0)}else n=await C_(u,this._axiosCancelSource.token,this._config.httpRetryConfig||zd,!0);if(!this._joinAndNotLeaveYet)throw new pl(ll.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),this._performanceRecorder.checkPoint("startJoinGateway"),this._configDistribute.startGetConfigDistribute(u,this._axiosCancelSource.token),this._configDistribute.on(Ru.UPDATE_BITRATE_LIMIT,e=>{this._p2pChannel.updateBitrateLimit(e)}),this._key=i||e,this._joinInfo=CA({},u,{cid:n.gatewayInfo.cid,uid:u.uid?u.uid:n.gatewayInfo.uid,vid:n.gatewayInfo.vid,apResponse:n.gatewayInfo.res,uni_lbs_ip:n.gatewayInfo.uni_lbs_ip,gatewayAddrs:n.gatewayInfo.gatewayAddrs});const r=await this._gateway.join(this._joinInfo,this._key);if(!this._joinAndNotLeaveYet)throw new pl(ll.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));return l.onSuccess(r),this._appId=e,this._channelName=u.cname,this._uid=r,this.store.uid=r,this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Ta()?"beforeunload":"pagehide",this._handleBeforeUnload),Rc.info(Je(d="[".concat(this._clientId,"] Joining channel success: ")).call(d,t)),Fa(()=>{Rc.startUpload()},5e3),this._performanceRecorder.checkPoint("finishJoin"),this.store.joinEnd(),Kc(this),r}catch(e){const t=hl(e)?e[0]:e;throw Rc.error("[".concat(this._clientId,"] Joining channel failed, rollback"),t),t.code!==ll.OPERATION_ABORTED&&(this._gateway.state="DISCONNECTED",this._reset()),l.onError(t),t}}async leave(){const e=rh.reportApiInvoke(this._sessionId,{name:Nl.LEAVE,options:[],tag:Ll.TRACER});Rc.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(Ta()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),Jc(this);const t=await this._leaveMutex.lock();if("DISCONNECTED"===this.connectionState)return Rc.info("[".concat(this._clientId,"] Leaving channel repeated, success")),t(),e.onSuccess();await this._gateway.leave("CONNECTED"!==this.connectionState),Rc.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,t(),e.onSuccess()}async publish(e,t=!0){var i;hl(e)||(e=[e]);const n=rh.reportApiInvoke(this._sessionId,{name:Nl.PUBLISH,options:vo(e).call(e,e=>e?Object(e).toString():"null"),tag:Ll.TRACER});if(0===e.length){const e=new pl(ll.INVALID_PARAMS,"track list is empty");return n.onError(e),e.throw()}if("audience"===this._gateway.role){const e=new pl(ll.INVALID_OPERATION,"audience can not publish stream");return n.onError(e),e.throw()}for(const s of e){if(!(s instanceof lh)){const e=new pl(ll.INVALID_PARAMS,"parameter is not local track");return n.onError(e),e.throw()}if(!s._enabled&&t){const e=new pl(ll.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(s.getTrackId()));return n.onError(e),e.throw()}}Rc.info(Je(i="[".concat(this._clientId,"] Publishing tracks, id ")).call(i,vo(e).call(e,e=>"".concat(e.getTrackId()," ")))),await this._configDistribute.awaitConfigDistributeComplete(),t&&Ji(e).call(e,e=>{const t=this._configDistribute.getBitrateLimit();e instanceof bv&&t&&e.setBitrateLimit(t.uplink)});const r=await this._publishMutex.lock();try{var o;await this._publishHighStream(e),n.onSuccess(vo(e).call(e,e=>e.trackMediaType+":"+e.getTrackLabel()).toString()),Rc.info(Je(o="[".concat(this._clientId,"] Publish success, id ")).call(o,vo(e).call(e,e=>"".concat(e.getTrackId()," "))))}catch(e){throw n.onError(e),Rc.error("[".concat(this._clientId,"] publish error"),e.toString()),e}finally{r()}}async unpublish(e,t=!0){var i;if(!this._joinInfo||void 0===this._uid)throw new pl(ll.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");e?hl(e)||(e=[e]):e=this._p2pChannel.getAllTracks();const n=rh.reportApiInvoke(this._sessionId,{name:Nl.UNPUBLISH,options:vo(e).call(e,e=>e.getTrackId()),tag:Ll.TRACER});Rc.info(Je(i="[".concat(this._clientId,"] Unpublish tracks, tracks ")).call(i,vo(e).call(e,e=>"".concat(e.getTrackId()," "))," "));const r=await this._publishMutex.lock();try{var o;const t=await this._p2pChannel.unpublish(e);t&&await this._gateway.unpublish(t,this._uid),Rc.info(Je(o="[".concat(this._clientId,"] Unpublish success,tracks ")).call(o,vo(e).call(e,e=>"".concat(e.getTrackId())))),n.onSuccess()}catch(e){throw n.onError(e),Rc.error("[".concat(this._clientId,"] unpublish error"),e.toString()),e}finally{r&&r()}}async subscribe(e,t){var i,n,r;gl(t,"mediaType",["audio","video"]);const o=rh.reportApiInvoke(this._sessionId,{name:Nl.SUBSCRIBE,options:[e.uid,t],tag:Ll.TRACER});if(!this._joinInfo){const e=new pl(ll.INVALID_OPERATION,"Can't subscribe stream, not joined");throw o.onError(e),e}if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState){const e=new pl(ll.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));throw o.onError(e),e}if(!Qo(i=this._users).call(i,t=>t===e)){var s;const t=new pl(ll.INVALID_REMOTE_USER,"user is not in the channel");throw Rc.error(Je(s="[".concat(this._clientId,"] can not subscribe ")).call(s,e.uid,", this user is not in the channel")),o.onError(t),t}if(!e.hasAudio&&!e.hasVideo){var a;const t=new pl(ll.INVALID_REMOTE_USER,"user is not published");throw Rc.error(Je(a="[".concat(this._clientId,"] can not subscribe ")).call(a,e.uid,", user is not published")),o.onError(t),t}if("audio"===t&&(!e.hasAudio||void 0===e._audioSSRC)||"video"===t&&(!e.hasVideo||void 0===e._videoSSRC)){var c,l;const i=new pl(ll.REMOTE_USER_IS_NOT_PUBLISHED);throw Rc.error(Je(c=Je(l="[".concat(this._clientId,"] can not subscribe ")).call(l,e.uid," with mediaType ")).call(c,t,", remote track is not published")),o.onError(i),i}const u="audio"===t?e._audioSSRC:e._videoSSRC,d="audio"===t?e._audioOrtc:e._videoOrtc,h={stream_type:"audio"===t?Ou.AUDIO:Ou.VIDEO,ssrcId:u};let p=this._subscribeMutex.get(e.uid);p||(p=new ah("sub-".concat(e.uid)),this._subscribeMutex.set(e.uid,p)),Rc.info(Je(n=Je(r="[".concat(this._clientId,"] subscribe user ")).call(r,e.uid,", mediaType: ")).call(n,t));const f=await p.lock();try{var g,m;if(this._p2pChannel.hasRemoteMedia(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{$h.markSubscribeStart(this.store.clientId,u),this.store.subscribe(e.uid,t,performance.now()),await this._p2pChannel.subscribe(e,t,u,d),await this._gateway.subscribe(e.uid,h,!0),this.store.subscribe(e.uid,t,void 0,performance.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(i){if(this._p2pChannel.reportSubscribeEvent(!1,null==i?void 0:i.code,e,t),(null==i?void 0:i.code)!==ll.WS_ABORT)throw i;this._p2pChannel.setPendingRemoteMedia(e,t)}Rc.info(Je(g=Je(m="[".concat(this._clientId,"] subscribe success user ")).call(m,e.uid,", mediaType: ")).call(g,t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(e=>{Rc.warning("[".concat(this._clientId,"] auto set fallback failed"),e)});const n="audio"===t?e._audioTrack:e._videoTrack;if(!n){const e=new pl(ll.UNEXPECTED_ERROR,"can not find remote track in user object");return o.onError(e),e.throw()}return o.onSuccess(n.getTrackId()),n}catch(t){var _;throw o.onError(t),Rc.error(Je(_="[".concat(this._clientId,"] subscribe user ")).call(_,e.uid," error"),t),t}finally{f()}}async unsubscribe(e,t){var i,n,r;if(t&&gl(t,"mediaType",["audio","video"]),!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");const o=rh.reportApiInvoke(this._sessionId,{name:Nl.UNSUBSCRIBE,options:[e.uid,t],tag:Ll.TRACER});if(!Qo(i=this._users).call(i,t=>t===e)){var s;const t=new pl(ll.INVALID_REMOTE_USER,"user is not in the channel");throw Rc.error(Je(s="[".concat(this._clientId,"] can not subscribe ")).call(s,e.uid,", user is not in the channel")),o.onError(t),t}Rc.info(Je(n=Je(r="[".concat(this._clientId,"] unsubscribe uid: ")).call(r,e.uid,", mediaType: ")).call(n,t));let a=this._subscribeMutex.get(e.uid);a||(a=new ah("sub-".concat(e.uid)),this._subscribeMutex.set(e.uid,a));const c=await a.lock();try{var l,u;const i=await this._p2pChannel.unsubscribe(e,t);i&&await this._gateway.unsubscribe(i,e.uid),Rc.info(Je(l=Je(u="[".concat(this._clientId,"] unsubscribe success uid: ")).call(u,e.uid,", mediaType: ")).call(l,t)),o.onSuccess()}catch(t){if(t.code===ll.DISCONNECT_P2P)return void Rc.warning("disconnecting p2p, abort unsubscribe request.");var d;throw Rc.error(Je(d="[".concat(this._clientId,"] unsubscribe user ")).call(d,e.uid," error"),t.toString()),t}finally{c()}}setLowStreamParameter(e){!function(e){if(!e)throw new pl(ll.INVALID_PARAMS);yl(e.width)||ml(e.width,"streamParameter.width"),yl(e.height)||ml(e.height,"streamParameter.height"),yl(e.framerate)||ml(e.framerate,"streamParameter.framerate"),yl(e.bitrate)||ml(e.bitrate,"streamParameter.bitrate")}(e);const t=rh.reportApiInvoke(this._sessionId,{name:Nl.SET_LOW_STREAM_PARAMETER,options:[e],tag:Ll.TRACER});(!e.width&&e.height||e.width&&!e.height)&&Rc.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),Rc.info("[".concat(this._clientId,"] set low stream parameter to"),ve(e));const i=this._configDistribute.getLowStreamConfigDistribute();i&&i.bitrate&&e.bitrate&&i.bitrate<e.bitrate&&(e.bitrate=i.bitrate),this._lowStreamParameter=e,t.onSuccess()}async enableDualStream(){const e=rh.reportApiInvoke(this._sessionId,{name:Nl.ENABLE_DUAL_STREAM,options:[],tag:Ll.TRACER});if(!Fu().supportDualStream){rh.streamSwitch(this._sessionId,{lts:Ma(),isdual:!0,succ:!1});const t=new pl(ll.NOT_SUPPORTED,"Your browser is not support dual stream");throw e.onError(t),t}if(this._isDualStreamEnabled){const t=new pl(ll.INVALID_OPERATION,"Dual stream is already enabled");throw e.onError(t),t}if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(n){throw rh.streamSwitch(this._sessionId,{lts:Ma(),isdual:!0,succ:!1}),e.onError(n),n}this._isDualStreamEnabled=!0,rh.streamSwitch(this._sessionId,{lts:Ma(),isdual:!0,succ:!0}),Rc.info("[".concat(this._clientId,"] enable dual stream")),e.onSuccess()}async disableDualStream(){if(!this._isDualStreamEnabled)return;if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");const e=rh.reportApiInvoke(this._sessionId,{name:Nl.DISABLE_DUAL_STREAM,options:[],tag:Ll.TRACER});if(this._p2pChannel.getLocalMedia(ku.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(n){throw rh.streamSwitch(this._sessionId,{lts:Ma(),isdual:!1,succ:!1}),e.onError(n),n}this._isDualStreamEnabled=!1,rh.streamSwitch(this._sessionId,{lts:Ma(),isdual:!1,succ:!0}),Rc.info("[".concat(this._clientId,"] disable dual stream")),e.onSuccess()}async setClientRole(e,t){!function(e){gl(e,"role",["audience","host"])}(e),t&&Jl(t);const i=rh.reportApiInvoke(this._sessionId,{name:Nl.SET_CLIENT_ROLE,options:[e,t],tag:Ll.TRACER});if("rtc"===this._mode){Rc.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole"));const e=new pl(ll.INVALID_OPERATION,"rtc mode can not use setClientRole");return i.onError(e),e.throw()}if(t&&t.level&&"host"===e){const e=new pl(ll.INVALID_OPERATION,"host mode can not set audience latency level");return i.onError(e),e.throw()}try{var n,r;if("audience"===e&&this._p2pChannel.hasLocalMedia()){const e=new pl(ll.INVALID_OPERATION,"can not set client role to audience when publishing stream");return i.onError(e),e.throw()}await this._gateway.setClientRole(e,t),Rc.info(Je(n=Je(r="[".concat(this._clientId,"] set client role to ")).call(r,e,", level: ")).call(n,t&&t.level)),i.onSuccess()}catch(e){throw i.onError(e),e}}setProxyServer(e){if(_l(e,"proxyServer"),"DISCONNECTED"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new pl(ll.INVALID_OPERATION,"You have already set the proxy");this._proxyServer=e,rh.setProxyServer(this._proxyServer),Rc.setProxyServer(this._proxyServer)}setTurnServer(e){if(hl(e)||(e=[e]),"DISCONNECTED"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new pl(ll.INVALID_OPERATION,"You have already set the proxy");var t;if(Yl(e))return this._turnServer={servers:e,mode:"original-manual"},void Rc.info(Je(t="[".concat(this._clientId,"] Set original turnserver success: ")).call(t,vo(e).call(e,e=>e.urls).join(","),"."));Ji(e).call(e,e=>Kl(e)),this._turnServer={servers:e,mode:"manual"},Rc.info("[".concat(this._clientId,"] Set turnserver success."))}startProxyServer(e){const t=rh.reportApiInvoke(this._sessionId,{name:Nl.START_PROXY_SERVER,options:[],tag:Ll.TRACER});if("DISCONNECTED"!==this.connectionState){const e=new pl(ll.INVALID_OPERATION,"Start proxy server before join channel");throw t.onError(e),e}if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint){const e=new pl(ll.INVALID_OPERATION,"You have already set the proxy");throw t.onError(e),e}const i=[1,2,3,4,5];switch(void 0===e&&(e=1),e){case 1:this._cloudProxyServerMode="normal";break;case 2:this._cloudProxyServerMode="443only";break;case 3:this._cloudProxyServerMode="proxy3";break;case 4:this._cloudProxyServerMode="proxy4";break;case 5:this._cloudProxyServerMode="proxy5";break;default:{const e=new pl(ll.INVALID_PARAMS,"proxy server mode must be ".concat(i.join("|")));throw t.onError(e),e}}Rc.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),t.onSuccess()}stopProxyServer(){const e=rh.reportApiInvoke(this._sessionId,{name:Nl.STOP_PROXY_SERVER,options:[],tag:Ll.TRACER});if("DISCONNECTED"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"Stop proxy server after leave channel");rh.setProxyServer(),Rc.setProxyServer(),this._cloudProxyServerMode="disabled",Rc.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},e.onSuccess()}setLocalAccessPoints(e,t){if(vl(e,"serverList"),_l(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new pl(ll.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const i=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=vo(e).call(e,e=>{var n;return i.test(e)?Je(n="".concat(e.replace(/\./g,"-"),".")).call(n,t):e}),this._useLocalAccessPoint=!0,Vc("WEBCS_DOMAIN",e),Vc("WEBCS_DOMAIN_BACKUP_LIST",e),Vc("GATEWAY_DOMAINS",[t]),Vc("EVENT_REPORT_DOMAIN",e[0]),Vc("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),Vc("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),Rc.info("set local access point success")}async setRemoteVideoStreamType(e,t){var i,n;gl(t,"streamType",[0,1]);const r=rh.reportApiInvoke(this._sessionId,{name:Nl.SET_REMOTE_VIDEO_STREAM_TYPE,options:[e,t],tag:Ll.TRACER});try{await this._gateway.setRemoteVideoStreamType(e,t),Fa(()=>{var t;const i=Qo(t=this._users).call(t,t=>t.uid===e);i&&i.videoTrack&&i.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(e){throw r.onError(e),Rc.error("[".concat(this._clientId,"] set remote video stream type error"),e.toString()),e}Rc.info(Je(i=Je(n="[".concat(this._clientId,"] set remote ")).call(n,e," video stream type to ")).call(i,t)),this._remoteStreamTypeCacheMap.set(e,t),r.onSuccess()}async setStreamFallbackOption(e,t){var i,n;gl(t,"fallbackType",[0,1,2]);const r=rh.reportApiInvoke(this._sessionId,{name:Nl.SET_STREAM_FALLBACK_OPTION,options:["too long to show",t],tag:Ll.TRACER});try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw r.onError(e),Rc.error("[".concat(this._clientId,"] set stream fallback option"),e.toString()),e}Rc.info(Je(i=Je(n="[".concat(this._clientId,"] set remote ")).call(n,e," stream fallback type to ")).call(i,t)),this._streamFallbackTypeCacheMap.set(e,t),r.onSuccess()}setEncryptionConfig(e,t,i){!function(e){gl(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),_l(t,"secret");const n=["aes-128-gcm2","aes-256-gcm2"];if(ns(n).call(n,e)){if(!i||!(i instanceof Uint8Array&&32===i.length))throw new pl(ll.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(i)throw new pl(ll.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||Rc.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,i&&(this._encryptionSalt=Wp(i))}async renewToken(e){_l(e,"token",1,2047);const t=rh.reportApiInvoke(this._sessionId,{name:Nl.RENEW_TOKEN,options:[e],tag:Ll.TRACER});if(!this._key||!this._joinInfo){const e=new pl(ll.INVALID_OPERATION,"renewToken should not be called before user join");return t.onError(e),e.throw()}const i=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const n=await this._renewTokenMutex.lock();try{if(jc("USE_NEW_TOKEN")){Rc.debug("start renew token with ticket from unilbs");const t=await O_(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||zd);Rc.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:t})}else Rc.debug("start renew token without ticket"),await this._gateway.renewToken({token:e});Rc.debug("[".concat(this._clientId,"] renewToken success")),t.onSuccess()}catch(e){throw this._key=i,this._joinInfo.token=i,t.onError(e),Rc.error("[".concat(this._clientId,"] renewToken failed"),e.toString()),e}finally{n()}}enableAudioVolumeIndicator(){const e=rh.reportApiInvoke(this._sessionId,{name:Nl.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:Ll.TRACER});if(this._audioVolumeIndicationInterval)return Rc.warning("you have already enabled audio volume indicator!"),e.onSuccess();this._audioVolumeIndicationInterval=window.setInterval(()=>{const e=this._p2pChannel.getAudioLevels();this.emit(Vl.VOLUME_INDICATOR,e)},jc("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3),e.onSuccess()}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}startLiveStreaming(e,t){const i=rh.reportApiInvoke(this._sessionId,{name:Nl.START_LIVE_STREAMING,options:[e,t],tag:Ll.TRACER});if(!t){if("h264"!==this._codec){const e=new pl(ll.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");return i.onError(e),fo.reject(e)}if(!this._p2pChannel.hasLocalMedia()){const e=new pl(ll.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");return i.onError(e),fo.reject(e)}}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e)){const e=new pl(ll.LIVE_STREAMING_TASK_CONFLICT);return i.onError(e),fo.reject(e)}const n=t?ou.TRANSCODE:ou.RAW;return this._createLiveStreamingClient(n).startLiveStreamingTask(e,n).then(()=>i.onSuccess()).catch(e=>{throw i.onError(e),e})}setLiveTranscoding(e){const t=rh.reportApiInvoke(this._sessionId,{name:Nl.SET_LIVE_TRANSCODING,options:[e],tag:Ll.TRACER});return this._createLiveStreamingClient(ou.TRANSCODE).setTranscodingConfig(e).then(()=>t.onSuccess()).catch(e=>{throw t.onError(e),e})}stopLiveStreaming(e){var t;const i=rh.reportApiInvoke(this._sessionId,{name:Nl.STOP_LIVE_STREAMING,options:[e],tag:Ll.TRACER}),n=Gn(t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient]).call(t,t=>t&&t.hasUrl(e));if(!n.length){const e=new pl(ll.INVALID_PARAMS,"can not find live streaming url to stop");return i.onError(e),fo.reject(e)}return fo.all(vo(n).call(n,t=>t&&t.stopLiveStreamingTask(e))).then(()=>i.onSuccess()).catch(e=>{throw i.onError(e),e})}async addInjectStreamUrl(e,t){const i=rh.reportApiInvoke(this._sessionId,{name:Nl.ADD_INJECT_STREAM_URL,options:[e,t],tag:Ll.TRACER});try{if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const i=this._createLiveStreamingClient(ou.INJECT);i.setInjectStreamConfig(t,0),await i.startLiveStreamingTask(e,ou.INJECT)}catch(e){throw i.onError(e),e}i.onSuccess()}async removeInjectStreamUrl(){const e=rh.reportApiInvoke(this._sessionId,{name:Nl.REMOVE_INJECT_STREAM_URL,options:[],tag:Ll.TRACER});try{var t,i;const e=this._createLiveStreamingClient(ou.INJECT),n=Qo(t=Bd(Jp(i=e.streamingTasks).call(i))).call(t,e=>e.mode===ou.INJECT);if(!this._joinInfo||!n)throw new pl(ll.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await e.stopLiveStreamingTask(n.url)}catch(t){throw e.onError(t),t}e.onSuccess()}async startChannelMediaRelay(e){const t=rh.reportApiInvoke(this._sessionId,{name:Nl.START_CHANNEL_MEDIA_RELAY,options:[e],tag:Ll.TRACER});try{V_(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}catch(e){return t.onError(e),e.throw()}t.onSuccess()}async updateChannelMediaRelay(e){const t=rh.reportApiInvoke(this._sessionId,{name:Nl.UPDATE_CHANNEL_MEDIA_RELAY,options:[e],tag:Ll.TRACER});try{V_(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}catch(e){return t.onError(e),e.throw()}t.onSuccess()}async stopChannelMediaRelay(){const e=rh.reportApiInvoke(this._sessionId,{name:Nl.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:Ll.TRACER});try{const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay()}catch(n){return e.onError(n),n.throw()}e.onSuccess()}sendStreamMessage(e,t=!0){if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof e&&(e=(new TextEncoder).encode(e)),new Blob([e]).size>1024)throw new pl(ll.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(Ql.DATA_STREAM,{payload:Wp(e)},!t)}sendMetadata(e){if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new pl(ll.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Ql.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Wp(e)})}async sendCustomReportMessage(e){hl(e)||(e=[e]),Ji(e).call(e,Il);const t=rh.reportApiInvoke(this._sessionId,{name:Nl.SEND_CUSTOM_REPORT_MESSAGE,options:[ve(e)],tag:Ll.TRACER});if(!this._joinInfo){const e=new pl(ll.INVALID_OPERATION,"can not send custom report, not joined");return t.onError(e),e.throw()}await rh.sendCustomReportMessage(this._joinInfo.sid,e),t.onSuccess()}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){gl(t.spatialLayer,"spatialLayer",[0,1,2,3]),gl(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw Rc.error("[".concat(this._clientId,"] pick SVC layer failed"),e.toString()),e}}_reset(){var e;Rc.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=Sc.CancelToken.source(),this._streamFallbackTypeCacheMap=new Mi,this._remoteStreamTypeCacheMap=new Mi,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,Ji(e=this._users).call(e,e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._p2pChannel.reset(),this._publishMutex=new ah("client-publish"),this._subscribeMutex=new Mi,this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0)}_startSession(e,t){var i,n,r;const o=e||kp();e?Rc.debug(Je(i="[".concat(this._clientId,"] new Session ")).call(i,o)):Rc.debug(Je(n=Je(r="[".concat(this._clientId,"] renewSession ")).call(r,this._sessionId," => ")).call(n,o)),this._sessionId=o,this.store.sessionId=o,t?rh.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:t.channel,appid:t.appId,mode:this._mode}):this._joinInfo?rh.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&rh.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=o),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=o)}async _publishHighStream(e){if(!this._joinInfo||void 0===this._uid)throw new pl(ll.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&jc("FORCE_TURN")&&!jc("TURN_ENABLE_TCP")&&!jc("TURN_ENABLE_UDP"))throw new pl(ll.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");Rc.debug("[".concat(this._clientId,"] publish high stream"));try{const i=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter),n=(await i.next()).value;if(n){var t;let r;try{r=await this._gateway.publish(this._uid,n,!0)}catch(e){if(e.code!==ll.DISCONNECT_P2P)throw i.throw(e),e}await i.next((null===(t=r)||void 0===t?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const t of e)t.muted&&await this._p2pChannel.muteLocalTrack(t)}catch(t){if(this._p2pChannel.reportPublishEvent(!1,null==t?void 0:t.code,e),(null==t?void 0:t.code)===ll.WS_ABORT)return;throw t}}async _publishLowStream(){if(!this._joinInfo||void 0===this._uid)throw new pl(ll.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));Rc.debug("[".concat(this._clientId,"] publish low stream"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const e=await this._p2pChannel.publishLowStream(this._lowStreamParameter),i=(await e.next()).value;if(i){var t;let n;try{n=await this._gateway.publish(this._uid,i,!0)}catch(t){if(t.code!==ll.DISCONNECT_P2P)throw e.throw(t),t}e.next((null===(t=n)||void 0===t?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(e){if(this._p2pChannel.reportPublishEvent(!1,null==e?void 0:e.code,void 0,!0),(null==e?void 0:e.code)===ll.WS_ABORT)return;throw e}}_createLiveStreamingClient(e){if(!this._joinInfo||!this._appId)return new pl(ll.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const t=()=>new U_(this._joinInfo,this._config.websocketRetryConfig||zd,this._config.httpRetryConfig||zd),i=e=>{e.onLiveStreamError=(e,t)=>{rh.reportApiInvoke(this._sessionId,{name:Nl.ON_LIVE_STREAM_ERROR,options:[e,t],tag:Ll.TRACER}).onSuccess(),this.emit(Vl.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{rh.reportApiInvoke(this._sessionId,{name:Nl.ON_LIVE_STREAM_WARNING,options:[e,t],tag:Ll.TRACER}).onSuccess(),this.emit(Vl.LIVE_STREAMING_WARNING,e,t)},e.on(hu.REQUEST_WORKER_MANAGER_LIST,(e,t,i)=>{if(!this._joinInfo)return i(new pl(ll.INVALID_OPERATION,"can not find join info to get worker manager"));R_(e,this._joinInfo,this._axiosCancelSource.token,zd).then(t).catch(i)})};switch(e){case ou.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=t(),i(this._liveRawStreamingClient)),this._liveRawStreamingClient;case ou.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=t(),i(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case ou.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=t(),this._injectStreamingClient.on(hu.REQUEST_WORKER_MANAGER_LIST,(e,t,i)=>{if(!this._joinInfo)return i(new pl(ll.INVALID_OPERATION,"can not find join info to get worker manager"));R_(e,this._joinInfo,this._axiosCancelSource.token,zd).then(t).catch(i)}),this._injectStreamingClient.onInjectStatusChange=(e,t,i)=>{this.emit(Vl.INJECT_STREAM_STATUS,e,t,i)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new G_(this._joinInfo,this._clientId,this._config.websocketRetryConfig||zd,this._config.httpRetryConfig||zd),this._channelMediaRelayClient.on("state",e=>{"RELAY_STATE_FAILURE"===e&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(Vl.CHANNEL_MEDIA_RELAY_STATE,e)}),this._channelMediaRelayClient.on("event",e=>{this.emit(Vl.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._channelMediaRelayClient):new pl(ll.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){this._gateway.on(_u.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(_u.CONNECTION_STATE_CHANGE,(e,t,i)=>{var n,r;const o=()=>{this.emit(Vl.CONNECTION_STATE_CHANGE,e,t,i)};if(rh.reportApiInvoke(this._sessionId,{name:Nl.CONNECTION_STATE_CHANGE,options:[e,t,i],tag:Ll.TRACER}).onSuccess(ve({cur:e,prev:t,reason:i})),Rc.info(Je(n=Je(r="[".concat(this._clientId,"] connection state change: ")).call(r,t," -> ")).call(n,e)),"DISCONNECTED"===e)return this._reset(),void o();var s;if("RECONNECTING"===e)Ji(s=this._users).call(s,e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_stream_added_state_=!1}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===e){var a,c;Ji(a=this._streamFallbackTypeCacheMap).call(a,(e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch(e=>Rc.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e))}),Ji(c=this._remoteStreamTypeCacheMap).call(c,(e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch(e=>Rc.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{var e;if("CONNECTED"!==this.connectionState)return;this._userOfflineTimeout=void 0;const t=Gn(e=this._users).call(e,e=>!e._trust_in_room_);Ji(t).call(t,e=>{var t;Rc.debug(Je(t="[".concat(this._clientId,"] user offline timeout, emit user offline ")).call(t,e.uid)),this._handleUserOffline({uid:e.uid})})},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{var e;"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,Ji(e=this._users).call(e,e=>{var t,i,n,r,o;e._trust_audio_mute_state_||(Rc.debug(Je(t="[".concat(this._clientId,"] auto dispatch audio unmute event ")).call(t,e.uid)),this._handleMuteStream(e.uid,"audio",!1)),e._trust_video_mute_state_||(Rc.debug(Je(i="[".concat(this._clientId,"] auto dispatch video unmute event ")).call(i,e.uid)),this._handleMuteStream(e.uid,"video",!1)),e._trust_audio_enabled_state_||(Rc.debug(Je(n="[".concat(this._clientId,"] auto dispatch enable local audio ")).call(n,e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),!e._trust_video_enabled_state_&&e._video_enabled_&&(Rc.debug(Je(r="[".concat(this._clientId,"] auto dispatch enable local video ")).call(r,e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_stream_added_state_||(Rc.debug(Je(o="[".concat(this._clientId,"] auto dispatch stream remove ")).call(o,e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))}))},1e3)}o()}),this._gateway.on(_u.REQUEST_NEW_GATEWAY_LIST,(e,t)=>{if(!this._joinInfo)return t(new pl(ll.UNEXPECTED_ERROR,"can not recover, no join info"));S_(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||zd).then(t=>{var i;this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res),e(vo(i=t.gatewayInfo.gatewayAddrs).call(i,e=>{if(this._joinInfo&&this._joinInfo.proxyServer){var t,i;const n=e.split(":");return Je(t=Je(i="wss://".concat(this._joinInfo.proxyServer,"/ws/?h=")).call(i,n[0],"&p=")).call(t,n[1])}return"wss://".concat(e)}))}).catch(t)}),this._gateway.on(_u.NETWORK_QUALITY,e=>{"normal"===this._networkQualitySensitivity&&this.emit(Vl.NETWORK_QUALITY,e)}),this._gateway.on(_u.STREAM_TYPE_CHANGE,(e,t)=>{this.emit(Vl.STREAM_TYPE_CHANGED,e,t),rh.reportApiInvoke(this._sessionId,{name:Nl.STREAM_TYPE_CHANGE,options:[e,t],tag:Ll.TRACER}).onSuccess(ve({uid:e,streamType:t}))}),this._gateway.on(_u.IS_P2P_DISCONNECTED,e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)}),this._gateway.on(_u.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(_u.REQUEST_P2P_CONNECTION_PARAMS,async(e,t,i)=>{try{t(await this._p2pChannel.startP2PConnection(e))}catch(e){i(e)}}),this._gateway.on(_u.JOIN_RESPONSE,e=>{const{dtlsParameters:t,iceParameters:i,candidates:n,rtpCapabilities:r,setup:o,cname:s,defaultIp:a,defaultPort:c}=iE(e.ortc);this._p2pChannel.connect(i,t,n,r,o,s,a,c)}),this._gateway.signal.on(ql.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(ql.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(ql.ON_ADD_AUDIO_STREAM,e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc)),this._gateway.signal.on(ql.ON_ADD_VIDEO_STREAM,e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc)),this._gateway.signal.on(ql.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(ql.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(ql.MUTE_AUDIO,e=>this._handleMuteStream(e.uid,"audio",!0)),this._gateway.signal.on(ql.UNMUTE_AUDIO,e=>this._handleMuteStream(e.uid,"audio",!1)),this._gateway.signal.on(ql.MUTE_VIDEO,e=>this._handleMuteStream(e.uid,"video",!0)),this._gateway.signal.on(ql.UNMUTE_VIDEO,e=>this._handleMuteStream(e.uid,"video",!1)),this._gateway.signal.on(ql.RECEIVE_METADATA,e=>{const t=Qp(e.metadata);this.emit(Vl.RECEIVE_METADATA,e.uid,t)}),this._gateway.signal.on(ql.ON_DATA_STREAM,e=>{e.seq&&delete e.seq,e.payload=Qp(e.payload),this.emit(Vl.STREAM_MESSAGE,e.uid,e.payload),this.onStreamMessage&&this.onStreamMessage(e)}),this._gateway.signal.on(ql.ON_CRYPT_ERROR,()=>{Hp(()=>{Rc.warning("[".concat(this._clientId,"] on crypt error")),this.emit(Vl.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(ql.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(ql.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{Rc.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0),this.emit(Vl.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(ql.ON_STREAM_FALLBACK_UPDATE,e=>{var t,i;Rc.debug(Je(t=Je(i="[".concat(this._clientId,"] stream fallback peerId: ")).call(i,e.stream_id,", attr: ")).call(t,e.stream_type)),this.emit(Vl.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")}),this._gateway.signal.on(ql.ON_PUBLISH_STREAM,e=>{var t;this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,ve({proxy:e.proxy})),Rc.info(Je(t="[".concat(this._clientId,"] on publish stream, ")).call(t,ve(e))),void 0!==e.proxy&&this.emit(Vl.IS_USING_CLOUD_PROXY,!!e.proxy))}),this._gateway.signal.on(ql.ENABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)}),this._gateway.signal.on(ql.DISABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)}),this._gateway.signal.on(Hl.REQUEST_TIMEOUT,(e,t)=>{if(this._joinInfo)switch(e){case Ql.PUBLISH:{if(!t)return;const e=(t=t).ortc;if(e){var i,n,r,o;const s=as(e).call(e,({stream_type:e})=>e===mu.Audio),a=as(e).call(e,({stream_type:e})=>e!==mu.Audio),c=as(e).call(e,({stream_type:e})=>e===mu.Screen||e===mu.ScreenLow);"offer"===t.state&&rh.publish(this._joinInfo.sid,{eventElapse:$h.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:ll.TIMEOUT,audio:s,video:a,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:c,audioName:s?null===(i=Qo(e).call(e,({stream_type:e})=>e===mu.Audio))||void 0===i||null===(n=i.ssrcs[0])||void 0===n?void 0:n.ssrcId.toString():void 0,videoName:a?null===(r=Qo(e).call(e,({stream_type:e})=>e!==mu.Audio))||void 0===r||null===(o=r.ssrcs[0])||void 0===o?void 0:o.ssrcId.toString():void 0})}break}case Ql.SUBSCRIBE:(t=t)&&rh.subscribe(this._joinInfo.sid,{succ:!1,ec:ll.TIMEOUT,audio:t.stream_type===Ou.AUDIO,video:t.stream_type===Ou.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:$h.measureFromSubscribeStart(this.store.clientId,t.ssrcId)})}}),this._gateway.signal.on(ql.ON_P2P_OK,e=>{this.uid===this._uid&&void 0!==e.proxy&&this.emit(Vl.IS_USING_CLOUD_PROXY,!!e.proxy)})}_handleP2PChannelEvents(){this._p2pChannel.on(Lu.RequestMuteLocal,async(e,t,i)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===ll.DISCONNECT_P2P?t():i(e)}else t()}),this._p2pChannel.on(Lu.RequestUnmuteLocal,async(e,t,i)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===ll.DISCONNECT_P2P?t():i(e)}else t()}),this._p2pChannel.on(Lu.RequestRePublish,(e,t,i)=>{this.publish(e,!1).then(t).catch(i)}),this._p2pChannel.on(Lu.RequestReSubscribe,async(e,t,i)=>{try{for(const{user:t,kind:i}of e)i===Ou.VIDEO?await this.subscribe(t,"video"):await this.subscribe(t,"audio");t()}catch(e){i(e)}}),this._p2pChannel.on(Lu.RequestUploadStats,(e,t)=>{this._gateway.uploadStats(e,t)}),this._p2pChannel.on(Lu.MediaReconnectStart,e=>{this.emit(Vl.MEDIA_RECONNECT_START,e)}),this._p2pChannel.on(Lu.MediaReconnectEnd,e=>{this.emit(Vl.MEDIA_RECONNECT_END,e)}),this._p2pChannel.on(Lu.NeedSignalRTT,e=>{e(this._gateway.getSignalRTT())}),this._p2pChannel.on(Lu.RequestRestartICE,async()=>{const e=await this._p2pChannel.reEstablish();if(e){const{response:t}=await this._gateway.restartICE({iceParameters:e.iceParameters}),{candidates:i,iceParameters:n,defaultIp:r,defaultPort:o}=function(e){const t=e.ice,{candidates:i,defaultIp:n,defaultPort:r}=cE(t.candidates);return{candidates:i,iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd},defaultIp:n,defaultPort:r}}(t);await e.restartICE(n,i,r,o)}}),this._p2pChannel.on(Lu.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(Lu.RequestReconnectPC,async()=>{var e;const{iceParameters:t,dtlsParameters:i,rtpCapabilities:n}=await this._p2pChannel.startP2PConnection({turnServer:null===(e=this._joinInfo)||void 0===e?void 0:e.turnServer}),{gatewayEstablishParams:r}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:i,rtpCapabilities:n}),{dtlsParameters:o,iceParameters:s,candidates:a,rtpCapabilities:c,setup:l,cname:u,defaultIp:d,defaultPort:h}=iE(r);await this._p2pChannel.connect(s,o,a,c,l,u,d,h),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(Lu.RequestUnpublishForReconnectPC,async(e,t,i)=>{this._joinInfo&&void 0!==this._uid?(await this._gateway.unpublish(e,this._uid),t()):i()}),this._p2pChannel.on(Lu.P2PLost,()=>{this.emit(Vl.P2P_LOST,this.store.uid)})}getKeyMetrics(){return this.store.keyMetrics}}function PA(e){return ml(e.timeout,"config.timeout",0,1e5),ml(e.timeoutFactor,"config.timeoutFactor",0,100,!1),ml(e.maxRetryCount,"config.maxRetryConfig",0,1/0),ml(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function DA(e){return _l(e.turnServerURL,"turnServerURL"),_l(e.username,"username"),_l(e.password,"password"),e.udpport&&ml(e.udpport,"udpport",1,99999,!0),e.forceturn&&fl(e.forceturn,"forceturn"),e.security&&fl(e.security,"security"),e.tcpport&&ml(e.tcpport,"tcpport",1,99999,!0),!0}function MA(e){return void 0!==e.level&&gl(e.level,"level",[1,2,3]),!0}function xA(e){return _l(e.reportId,"params.reportId",0,100,!1),_l(e.category,"params.category",0,100,!1),_l(e.event,"params.event",0,100,!1),_l(e.label,"params.label",0,100,!1),ml(e.value,"params.value",Tl,bl,!1),!0}kA([ih({report:rh}),NA("design:type",Function),NA("design:paramtypes",[String]),NA("design:returntype",void 0)],LA.prototype,"setProxyServer",null),kA([ih(),NA("design:type",Function),NA("design:paramtypes",[Object]),NA("design:returntype",void 0)],LA.prototype,"setTurnServer",null),kA([ih({report:rh}),NA("design:type",Function),NA("design:paramtypes",[Array,String]),NA("design:returntype",void 0)],LA.prototype,"setLocalAccessPoints",null),kA([ih({report:rh}),NA("design:type",Function),NA("design:paramtypes",[String,String,Uint8Array]),NA("design:returntype",void 0)],LA.prototype,"setEncryptionConfig",null),kA([nh({report:rh}),NA("design:type",Function),NA("design:paramtypes",[Object,Object]),NA("design:returntype",fo)],LA.prototype,"pickSVCLayer",null),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost"}(bA||(bA={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE"}(TA||(TA={})),function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(IA||(IA={})),function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(RA||(RA={})),function(e){e.FREE="free",e.UPLOADING="uploading"}(wA||(wA={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied"}(OA||(OA={}));const BA={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};var UA,FA,VA,jA,GA,HA,QA,WA,qA,$A,zA,ZA,YA,KA,JA,XA,ey,ty,iy;!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics"}(UA||(UA={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAT="io.agora.pb.Wrtc.JoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics"}(FA||(FA={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(VA||(VA={})),function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",e.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange"}(jA||(jA={})),function(e){e.TRACER="tracer"}(GA||(GA={})),function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(HA||(HA={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(QA||(QA={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(WA||(WA={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(qA||(qA={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}($A||($A={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(zA||(zA={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(ZA||(ZA={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(YA||(YA={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success"}(KA||(KA={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v2",e.REJOIN="rejoin",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer"}(JA||(JA={})),function(e){e.PUBLISH_STATS="publish_stats",e.PUBLISH_RELATED_STATS="publish_related_stats",e.SUBSCRIBE_STATS="subscribe_stats",e.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length"}(XA||(XA={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio"}(ey||(ey={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(ty||(ty={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer"}(iy||(iy={}));const ny={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},ry={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},oy={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},sy={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};var ay,cy,ly,uy,dy,hy,py,fy,gy,my,_y,vy,Ey,Ay;!function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls"}(ay||(ay={})),function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(cy||(cy={})),function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(ly||(ly={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(uy||(uy={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(dy||(dy={})),function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN"}(hy||(hy={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(py||(py={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(fy||(fy={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid"}(gy||(gy={})),function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_CLOSE="@need_close",e.NEED_ADD_TRACK="@need_add_track",e.NEED_REMOVE_TRACK="@need_remove_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.SET_VIDEO_TRACK_MUTED="@set_video_track_muted",e.SET_AUDIO_TRACK_MUTED="@set_audio_track_muted"}(my||(my={})),function(e){e.SCREEN_TRACK="screen_track",e.LOW_STREAM="low_stream"}(_y||(_y={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload"}(vy||(vy={})),function(e){e.FIRST_FRAME_DECODED="first-frame-decoded"}(Ey||(Ey={})),function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(Ay||(Ay={}));const yy={CHINA:{},ASIA:{CODE:Ay.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Ay.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Ay.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Ay.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Ay.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Ay.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Ay.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Ay.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Ay.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Ay.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Ay.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};var Sy,Cy,by;function Ty(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function Iy(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=Ty(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=Ty(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}function Ry(e={report:Oy}){return function(t,i,n){const r=t[i];if("function"==typeof r){const o="AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name;n.value=function(...t){var n;const s=e.report.reportApiInvoke(this._sessionId||null,{name:Je(n="".concat(o,".")).call(n,i),options:t,tag:GA.TRACER});try{const e=r.apply(this,t);return s.onSuccess(),e}catch(e){throw s.onError(e),e}}}return n}}function wy(e={report:Oy}){return function(t,i,n){const r=t[i];if("function"==typeof r){const o="AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name;n.value=async function(...t){var n;const s=e.report.reportApiInvoke(this._sessionId||null,{name:Je(n="".concat(o,".")).call(n,i),options:t,tag:GA.TRACER});try{const e=await r.apply(this,t);return s.onSuccess(),e}catch(e){throw s.onError(e),e}}}return n}}kc&&(yy.CHINA={CODE:Ay.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(e){e.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(Sy||(Sy={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Cy||(Cy={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(by||(by={}));const Oy=new class{constructor(){var e,t;this.baseInfoMap=new Mi,this.clientList=Zc,this.keyEventUploadPendingItems=[],this.normalEventUploadPendingItems=[],this.apiInvokeUploadPendingItems=[],this.apiInvokeCount=0,this.ltsList=[],this.lastSendNormalEventTime=Ma(),this.customReportCount=0,this.eventUploadTimer=window.setInterval(Ko(e=this.doSend).call(e,this),jc("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(Ko(t=this.appendSessionId).call(t,this),jc("EVENT_REPORT_SEND_INTERVAL"))}reportApiInvoke(e,t,i){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const n=Ma();this.apiInvokeCount+=1;const r=this.apiInvokeCount,o=()=>({tag:t.tag,invokeId:r,sid:e,name:t.name,apiInvokeTime:n,options:t.options,states:t.states||null}),s=!!jc("SHOW_REPORT_INVOKER_LOG");s&&Rc.info("".concat(t.name," start"),t.options);let a=!1;Ip(t.timeout).then(()=>{a||(this.sendApiInvoke(Iy({},o(),{error:ll.API_INVOKE_TIMEOUT,success:!1})),Rc.debug("".concat(t.name," timeout")))});const c=new pl(ll.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const n=()=>{if(a)throw c;return a=!0,this.sendApiInvoke(Iy({},o(),{success:!0},t.reportResult&&{result:e})),s&&Rc.info("".concat(t.name," onSuccess")),e};return i?$p(n,t.name+"Success",i,()=>a=!0):n()},onError:e=>{const n=()=>{if(a)throw e;a=!0,this.sendApiInvoke(Iy({},o(),{success:!1,error:e.toString()})),s&&Rc.info("".concat(t.name," onFailure"),e.toString())};return i?$p(n,t.name+"Error",i,()=>a=!0):n()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const i=Ma(),n=this.createBaseInfo(e,i);n.cname=t.cname;const r=nn({},{willUploadConsoleLog:jc("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:kc?"global":"oversea",areas:jc("AREAS")&&jc("AREAS").join(",")},t.extend),o=Ma(),s=Iy({},n,{eventType:UA.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:wc,lts:o,elapse:o-i,extend:ve(r),mode:t.mode,process:jc("PROCESS_ID"),success:!0,version:Oc});this.send({type:FA.SESSION,data:s},!0)}joinChooseServer(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=Iy({},n,{eventType:UA.JOIN_CHOOSE_SERVER,lts:r,eventElapse:r-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:r-i.startTime,success:t.succ,chooseServerAddrList:ve(t.serverList),uid:t.uid?Cn(t.uid):null,cid:t.cid?Cn(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0});this.send({type:FA.JOIN_CHOOSE_SERVER,data:o},!0)}reqUserAccount(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=Iy({},n,{eventType:UA.REQ_USER_ACCOUNT,lts:r,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:r-i.startTime,eventElapse:r-t.lts,extend:ve(t.extend)});this.send({type:FA.REQ_USER_ACCOUNT,data:o},!0)}joinGateway(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info;t.vid&&(n.vid=t.vid),n.uid=t.uid,n.cid=t.cid;const r=Ma(),o=Iy({},n,{eventType:UA.JOIN_GATEWAY,lts:r,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,elapse:r-i.startTime,eventElapse:r-t.lts});t.succ&&(i.lastJoinSuccessTime=r),this.send({type:FA.JOIN_GATEWAT,data:o},!0)}joinChannelTimeout(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=Ma(),r=Iy({},i.info,{lts:n,timeout:t,elapse:n-i.startTime});this.send({type:FA.JOIN_CHANNEL_TIMEOUT,data:r},!0)}publish(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=Iy({},n,{eventType:UA.PUBLISH,lts:r,eventElapse:r-t.lts,elapse:r-i.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:FA.PUBLISH,data:o},!0)}subscribe(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=Iy({},n,{eventType:UA.SUBSCRIBE,lts:r,eventElapse:r-t.lts,elapse:r-i.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid});"string"==typeof t.peerid?o.peerSuid=t.peerid:o.peer=t.peerid,this.send({type:FA.SUBSCRIBE,data:o},!0)}firstRemoteFrame(e,t,i,n){const r=this.baseInfoMap.get(e);if(!r)return;const o=r.info,s=Ma(),a=Iy({},o,{},n,{elapse:s-r.startTime,eventType:t,lts:s});this.send({type:i,data:a},!0)}onGatewayStream(e,t,i,n){const r=this.baseInfoMap.get(e);if(!r)return;const o=Iy({},r.info,{},n,{eventType:t,lts:Ma()});this.send({type:i,data:o},!0)}streamSwitch(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=Iy({},n,{eventType:UA.STREAM_SWITCH,lts:r,isDual:t.isdual,elapse:r-i.startTime,success:t.succ});this.send({type:FA.STREAM_SWITCH,data:o},!0)}requestProxyAppCenter(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=Iy({},n,{eventType:UA.REQUEST_PROXY_APPCENTER,lts:r,eventElapse:r-t.lts,elapse:r-i.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:FA.REQUEST_PROXY_APPCENTER,data:o},!0)}requestProxyWorkerManager(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=Iy({},n,{eventType:UA.REQUEST_PROXY_WORKER_MANAGER,lts:r,eventElapse:r-t.lts,elapse:r-i.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:FA.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}setProxyServer(e){this.proxyServer=e,e?Rc.debug("reportProxyServerurl: ".concat(e)):Rc.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=Iy({},n,{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:r,elapse:r-i.startTime,joinChannelSuccessElapse:r-(i.lastJoinSuccessTime||r)});this.send({type:FA.PEER_PUBLISH_STATUS,data:o},!0)}workerEvent(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=Tp(Iy({},n,{},t,{elapse:r-i.startTime,lts:r,productType:"WebRTC"}),"payload",1300);Ji(o).call(o,e=>this.send({type:FA.WORKER_EVENT,data:e},!0))}apworkerEvent(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=Iy({},n,{},t,{elapse:r-i.startTime,lts:r});this.send({type:FA.AP_WORKER_EVENT,data:o},!0)}joinWebProxyAP(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=Iy({},n,{},t,{elapse:r-i.startTime,lts:r,extend:t.extend||void 0});this.send({type:FA.JOIN_WEB_PROXY_AP,data:o},!0)}WebSocketQuit(e,t){const i=this.baseInfoMap.get(e);if(!i)return;const n=i.info,r=Ma(),o=Iy({},n,{},t,{elapse:r-i.startTime,lts:r});this.send({type:FA.WEBSOCKET_QUIT,data:o},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>jc("CUSTOM_REPORT_LIMIT"))throw new pl(ll.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const i=vo(t).call(t,t=>({type:FA.USER_ANALYTICS,data:Iy({sid:e},t)})),n={msgType:"EventMessages",sentTs:Math.round(Ma()/1e3),payloads:vo(i).call(i,e=>ve(e))};try{await this.postDataToStatsCollector(n)}catch(e){throw Rc.error("send custom report message failed",e.toString()),new pl(ll.CUSTOM_REPORT_SEND_FAILED,e.message)}}sendApiInvoke(e){const t=jc("NOT_REPORT_EVENT");if(e.tag&&ns(t)&&ns(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const i=this.baseInfoMap.get(e.sid);if(!i)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:n,uid:r,cid:o}=i.info;e.lts=e.lts||Ma();const s={invokeId:e.invokeId,sid:e.sid,cname:n,cid:o,uid:r,lts:e.lts,success:e.success,elapse:e.lts-i.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?ve(e.options):void 0,execStates:e.states?ve(e.states):void 0,execResult:e.result?ve(e.result):void 0,errorCode:e.error?ve(e.error):void 0};return this.send({type:FA.API_INVOKE,data:s},!1),!0}appendSessionId(){var e;Ji(e=this.clientList).call(e,e=>{if(e._sessionId){const t=this.apiInvokeUploadPendingItems.length;for(let i=0;i<t;i++){const t=this.apiInvokeUploadPendingItems.shift();t&&(t.sid=e._sessionId,this.sendApiInvoke(nn({},t)))}}})}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);var i;this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>jc("NORMAL_EVENT_QUEUE_CAPACITY")&&To(i=this.normalEventUploadPendingItems).call(i,0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Ma()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const i=[],n=[];for(;e.length;){const t=e.shift();i.length<20?i.push(t):n.push(t)}e.push(...n);for(const a of[...i]){var r,o;-1!==Lo(r=this.ltsList).call(r,a.data.lts)?(a.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(a.data.lts)):(this.ltsList.push(a.data.lts),cl(o=this.ltsList).call(o,(e,t)=>e-t))}t||(this.lastSendNormalEventTime=Ma());const s={msgType:"EventMessages",sentTs:Math.round(Ma()/1e3),payloads:vo(i).call(i,e=>ve(e)),vid:(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(i[0])};return i.length&&this.postDataToStatsCollector(s).catch((e=>i=>{var n,r,o;jc("EVENT_REPORT_RETRY")&&(t?this.keyEventUploadPendingItems=Je(n=this.keyEventUploadPendingItems).call(n,e):(this.normalEventUploadPendingItems=Je(r=this.normalEventUploadPendingItems).call(r,e),this.normalEventUploadPendingItems.length>jc("NORMAL_EVENT_QUEUE_CAPACITY")&&(To(o=this.normalEventUploadPendingItems).call(o,0,this.normalEventUploadPendingItems.length-jc("NORMAL_EVENT_QUEUE_CAPACITY")),Rc.warning("report: drop normal events"))))})(i)),e}async postDataToStatsCollector(e,t=!1){var i,n,r;$d.networkState===Cy.OFFLINE&&await fo.race([$d.onlineWaiter,Ip(2*zd.maxRetryTimeout)]);const o=t?"/events/proto-raws":"/events/messages";let s=this.url||(this.proxyServer?Je(i=Je(n="https://".concat(this.proxyServer,"/rs/?h=")).call(n,jc("EVENT_REPORT_DOMAIN"),"&p=6443&d=")).call(i,o):Je(r="https://".concat(jc("EVENT_REPORT_DOMAIN"),":6443")).call(r,o));for(let u=0;u<2;u+=1){var a,c,l;1===u&&(s=this.backupUrl||(this.proxyServer?Je(a=Je(c="https://".concat(this.proxyServer,"/rs/?h=")).call(c,jc("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=")).call(a,o):Je(l="https://".concat(jc("EVENT_REPORT_BACKUP_DOMAIN"),":6443")).call(l,o)));try{t?await qd(s,{timeout:1e4,data:e}):await Wd(s,{timeout:1e4,data:e})}catch(e){if(1===u)throw e;continue}return}}createBaseInfo(e,t){const i=nn({},BA);return i.sid=e,this.baseInfoMap.set(e,{info:i,startTime:t}),i}};class ky extends Mu{constructor(e){super(),this._connectionState=YA.CLOSED,this.openConnectionTime=Ma(),this.lastMsgTime=Ma(),this.uploadCache=[],this.rttRolling=new Qf(5),this.pingpongTimeoutCount=0,this.onWebsocketMessage=e=>{if(e.data instanceof ArrayBuffer)return void this.emit(KA.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Ma(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")&&(this.emit(t._type,t._message),t._type===ey.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===ey.ON_USER_BANNED))switch(t._message.error_code){case 14:this.close("UID_BANNED");break;case 15:this.close("IP_BANNED");break;case 16:this.close("CHANNEL_BANNED")}},this.clientId=e.clientId,this.spec=e,this.websocket=new Hf("gateway-".concat(this.clientId),this.spec.retryConfig,!0),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===YA.CONNECTED&&this.reconnect("retry",TA.OFFLINE)})}get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===YA.CONNECTED?this.emit(KA.WS_CONNECTED):e===YA.RECONNECTING?this.emit(KA.WS_RECONNECTING,this._websocketReconnectReason):e===YA.CLOSED&&this.emit(KA.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}async request(e,t,i,n){var r,o,s,a,c;const l=Op(6,""),u={_id:l,_type:e,_message:t},d=this.websocket.connectionID,h=()=>new fo((e,t)=>{if(this.connectionState===YA.CONNECTED)return e();const i=()=>{this.off(KA.WS_CLOSED,n),e()},n=()=>{this.off(KA.WS_CONNECTED,i),t(new pl(hy.WS_ABORT))};this.once(KA.WS_CONNECTED,i),this.once(KA.WS_CLOSED,n)});if(this.connectionState!==YA.CONNECTING&&this.connectionState!==YA.RECONNECTING||e===JA.JOIN||e===JA.REJOIN||await h(),this.websocket.sendMessage(u,!0),n)return;const p=new fo((i,n)=>{let r=!1;const o=(n,o)=>{r=!0,i({isSuccess:"success"===n,message:o||{}}),this.off(KA.WS_CLOSED,s),this.off(KA.WS_RECONNECTING,s),this.emit(KA.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(l),o);const s=()=>{n(new pl(hy.WS_ABORT,"type: ".concat(e))),this.off(KA.WS_CLOSED,s),this.off(KA.WS_RECONNECTING,s),this.off("res-@".concat(l),o)};this.once(KA.WS_CLOSED,s),this.once(KA.WS_RECONNECTING,s),Ip(jc("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==d||r||(Rc.warning("ws request timeout, type: ".concat(e)),this.emit(KA.REQUEST_TIMEOUT,e,t))})});let f=null;try{f=await p}catch(n){if(this.connectionState===YA.CLOSED||e===JA.LEAVE)throw new pl(hy.WS_ABORT);return!this.spec.forceWaitGatewayResponse||i?n.throw():e===JA.JOIN||e===JA.REJOIN?null:(await h(),await this.request(e,t))}if(f.isSuccess)return f.message;const g=Number(f.message.error_code||f.message.code),m=nf(g),_=new pl(hy.UNEXPECTED_RESPONSE,Je(r="".concat(m.desc,": ")).call(r,f.message.error_str),{code:g,data:f.message});return"success"===m.action?f.message:(Rc.warning(Je(o=Je(s=Je(a=Je(c="[".concat(this.websocket.connectionID,"] unexpected response from type ")).call(c,e,", error_code: ")).call(a,g,", message: ")).call(s,m.desc,", action: ")).call(o,m.action)),"failed"===m.action?_.throw():"quit"===m.action?(this.initError=_,this.close(),_.throw()):(g===ZA.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=f.message.option,Rc.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",TA.MULTI_IP)):this.reconnect(m.action,TA.SERVER_ERROR),e===JA.JOIN||e===JA.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new fo(i=>{const n=r=>{(!t||t(r))&&(this.off(e,n),i(r))};this.on(e,n)})}upload(e,t){const i={_type:e,_message:t};try{this.websocket.sendMessage(i)}catch(e){const t=jc("MAX_UPLOAD_CACHE")||50;var n;this.uploadCache.push(i),this.uploadCache.length>t&&To(n=this.uploadCache).call(n,0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{var e;if(this.connectionState!==YA.CONNECTED)return;const t=To(e=this.uploadCache).call(e,0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(t._type,t._message)},jc("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const i={_type:e,_message:t};this.websocket.sendMessage(i)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,new fo((t,i)=>{this.once(KA.WS_CONNECTED,()=>t(this.joinResponse)),this.once(KA.WS_CLOSED,()=>i(this.initError||new pl(hy.WS_ABORT))),this.connectionState=YA.CONNECTING,this.websocket.init(e).catch(i),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4)})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||"LEAVE",this.connectionState=YA.CLOSED,this.websocket.close()}async join(){var e;if(!this.joinResponse){const e=Bp(this,KA.REQUEST_JOIN_INFO),t=await this.request(JA.JOIN,e);if(!t)return this.emit(KA.REPORT_JOIN_GATEWAY,hy.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=YA.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(Ko(e=this.handlePingPong).call(e,this),3e3),!0}async rejoin(){var e,t;if(!this.reconnectToken)throw new pl(hy.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const i=Bp(this,KA.REQUEST_REJOIN_INFO);i.token=this.reconnectToken;const n=await this.request(JA.REJOIN,i);return!!n&&(this.connectionState=YA.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(Ko(e=this.handlePingPong).call(e,this),3e3),n.peers&&Ji(t=n.peers).call(t,e=>{this.emit(ey.ON_USER_ONLINE,{uid:e.uid}),e.audio_mute?this.emit(ey.MUTE_AUDIO,{uid:e.uid}):this.emit(ey.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(ey.MUTE_VIDEO,{uid:e.uid}):this.emit(ey.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(ey.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(ey.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(ey.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(ey.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(ey.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id}),e.audio&&this.emit(ey.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0}),e.video&&this.emit(ey.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0})}),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){Rc.debug("[".concat(this.clientId,"] receive notification: "),e);const t=nf(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close("UID_BANNED"),void this.close()):void this.reconnect(t.action,TA.SERVER_ERROR);Rc.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=jc("PING_PONG_TIME_OUT"),t=Ma();this.pingpongTimeoutCount>=e&&(Rc.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>jc("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",TA.TIMEOUT):this.request(JA.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const e=Ma()-t;this.rttRolling.add(e),jc("REPORT_STATS")&&this.send(JA.PING_BACK,{pingpongElapse:e})}).catch(e=>{})}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(XA.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(ay.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(ay.CLOSED,()=>{this.connectionState=YA.CLOSED}),this.websocket.on(ay.FAILED,()=>{this._disconnectedReason="NETWORK_ERROR",this.connectionState=YA.CLOSED}),this.websocket.on(ay.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===YA.CONNECTED?this.connectionState=YA.RECONNECTING:this.connectionState=YA.CONNECTING}),this.websocket.on(ay.WILL_RECONNECT,(e,t)=>{if(Bp(this,KA.IS_P2P_DISCONNECTED)&&"retry"===e)return this.reconnectToken=void 0,this.emit(KA.NEED_RENEW_SESSION),this.emit(KA.DISCONNECT_P2P),t("tryNext");"retry"!==e&&(this.reconnectToken=void 0,this.emit(KA.NEED_RENEW_SESSION),this.emit(KA.DISCONNECT_P2P)),t(e)}),this.websocket.on(ay.CONNECTED,()=>{this.openConnectionTime=Ma(),this.reconnectToken?this.rejoin().catch(e=>{var t;Rc.warning(Je(t="[".concat(this.clientId,"] rejoin failed ")).call(t,e)),this.reconnect("tryNext",TA.SERVER_ERROR)}):this.join().catch(e=>{if(this.emit(KA.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof pl&&e.code===hy.UNEXPECTED_RESPONSE&&e.data.code===ZA.ERR_NO_AUTHORIZED)return Rc.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",TA.SERVER_ERROR);Rc.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",TA.SERVER_ERROR):(this.initError=e,this.close())})}),this.websocket.on(ay.REQUEST_NEW_URLS,(e,t)=>{Dp(this,KA.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})}}var Ny,Ly;!function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5"}(Ny||(Ny={}));class Py extends Mu{constructor(e,t){super(),this._hints=[],this._isClosed=!1,this._ID=t||Op(8,"track-"),this._originMediaStreamTrack=e,this._mediaStreamTrack=e,Xc(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){if(!e){const e=Oy.reportApiInvoke(null,{name:jA.GET_MEDIA_STREAM_TRACK,options:[],tag:GA.TRACER});this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?e.onSuccess(this._mediaStreamTrack.label):e.onSuccess("")}return this._mediaStreamTrack}close(){this._isClosed=!0,el(this)}}class Dy extends Py{constructor(e,t){super(e,t),this._enabled=!0,this._muted=!1,this._isClosed=!1,this._trackProcessors=[],this._handleTrackEnded=()=>{this.onTrackEnded()},this._enabledMutex=new ah("".concat(t)),e.addEventListener("ended",this._handleTrackEnded)}get muted(){return this._muted}get enabled(){return this._enabled}getTrackLabel(){return this._originMediaStreamTrack.label}close(){var e;this._isClosed||(this.stop(),Ji(e=this._trackProcessors).call(e,e=>e.destroy()),this._trackProcessors=[],this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,Rc.debug("[".concat(this.getTrackId(),"] close")),this.emit(vu.NEED_CLOSE),super.close())}async _registerTrackProcessor(e){var t;if(-1!==Lo(t=this._trackProcessors).call(t,e))return;const i=this._trackProcessors[this._trackProcessors.length-1];this._trackProcessors.push(e),e.onOutputChange=async()=>{const t=e.output||this._originMediaStreamTrack;this._mediaStreamTrack=t,this._updatePlayerSource(),await Mp(this,vu.NEED_REPLACE_TRACK,this._mediaStreamTrack)},i?(i.onOutputChange=async()=>{i.output&&await e.setInput(i.output)},await e.setInput(i.output||i.input||this._originMediaStreamTrack)):await e.setInput(this._originMediaStreamTrack)}_getOutputFromProcessors(){if(0===this._trackProcessors.length)return this._originMediaStreamTrack;const e=this._trackProcessors[this._trackProcessors.length-1];return e.output||e.input||this._originMediaStreamTrack}async _updateOriginMediaStreamTrack(e,t){if(e!==this._originMediaStreamTrack){if(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop(),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._trackProcessors.length>0){await this._trackProcessors[0].setInput(e);const t=this._getOutputFromProcessors();this._mediaStreamTrack=t}else this._mediaStreamTrack=this._originMediaStreamTrack;this._updatePlayerSource(),await Mp(this,vu.NEED_REPLACE_TRACK,this._mediaStreamTrack)}}_getDefaultPlayerConfig(){return{}}onTrackEnded(){Rc.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Au.TRACK_ENDED)}stateCheck(e,t){var i,n,r;if(Rc.debug(Je(i=Je(n=Je(r="check track state, [muted: ".concat(this._muted,", enabled: ")).call(r,this._enabled,"] to [")).call(n,e,": ")).call(i,t,"]")),"muted"===e&&!Fu().webAudioMediaStreamDest)throw new pl(ll.NOT_SUPPORTED,"current environment does not support set mute").print();if(fl(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new pl(ll.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new pl(ll.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}}function My(){return function(e,t,i){const n=e[t];"function"==typeof n&&(i.value=function(...e){this._isClosed&&new pl(ll.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");const t=n.apply(this,e);return t instanceof fo?new fo((e,i)=>{t.then(e).catch(i)}):t})}}function xy(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function By(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=xy(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=xy(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}!function(e){e.IOS_15_INTERRUPTION_START="ios15-interruption-start",e.IOS_15_INTERRUPTION_END="ios15-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end"}(Ly||(Ly={}));var Uy=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Un(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&hn(t,i,s),s},Fy=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class Vy extends Dy{constructor(e,t,i){super(e,i),this.trackMediaType="audio",this._enabled=!0,this._volume=100,this._useAudioElement=!1,this._bypassWebAudio=!1,this._encoderConfig=t,this._source=new Ah(e)}get isPlaying(){return this._useAudioElement?Mh.isPlaying(this.getTrackId()):this._source.isPlayed}setVolume(e){ml(e,"volume",0,1e3);const t=rh.reportApiInvoke(null,{tag:GA.TRACER,name:jA.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),e]},300);this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&Mh.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void Rc.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,Mp(this,my.NEED_REPLACE_TRACK,this._mediaStreamTrack).then(()=>{Rc.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(e=>{Rc.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)}))}catch(e){}t.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){const t=rh.reportApiInvoke(null,{tag:GA.TRACER,name:jA.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[this.getTrackId(),e]});if(!this._useAudioElement)throw new pl(ll.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{await Mh.setSinkID(this.getTrackId(),e)}catch(e){throw t.onError(e),e}t.onSuccess()}async setEnabled(e,t,i){var n;if(!i){if(e===this._enabled)return;this.stateCheck("enabled",e)}Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e);const r=await this._enabledMutex.lock();if(!e){this._originMediaStreamTrack.enabled=!1;try{await Mp(this,my.NEED_REMOVE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),r(),e}return i||(this._enabled=!1),r()}this._originMediaStreamTrack.enabled=!0;try{await Mp(this,my.NEED_ADD_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),r(),e}Rc.info(Je(n="[".concat(this.getTrackId(),"] setEnabled to ")).call(n,e," success")),i||(this._enabled=!0),r()}async setMuted(e){var t,i;if(this._bypassWebAudio)return Rc.debug(Je(i="[".concat(this.getTrackId(),"] setMuted:")).call(i,e," fallback to setEnabled because no pass through.")),void await this.setEnabled(!e);if(e!==this._muted){if(this.stateCheck("muted",e),this._muted=e,ma().name===RA.FIREFOX)return Rc.debug("[".concat(this.getTrackId(),"] firefox set mute fallback to set enabled")),void await this.setEnabled(!e,void 0,!0);this._mediaStreamTrack.enabled=!e,Rc.debug(Je(t="[".concat(this.getTrackId(),"] start set muted: ")).call(t,e)),await Mp(this,my.SET_AUDIO_TRACK_MUTED,{track:this,muted:e})}}getStats(){Hp(()=>{Rc.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning");const e=xp(this,my.GET_STATS);return e||By({},ny)}setAudioFrameCallback(e,t=4096){if(!e)return this._source.removeAllListeners(iy.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(iy.ON_AUDIO_BUFFER),this._source.on(iy.ON_AUDIO_BUFFER,t=>e(t))}play(){const e=rh.reportApiInvoke(null,{tag:GA.TRACER,name:jA.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(Rc.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Mh.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),e.onSuccess()}stop(){const e=rh.reportApiInvoke(null,{tag:GA.TRACER,name:jA.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Mh.stop(this.getTrackId()):this._source.stop(),e.onSuccess()}close(){super.close(),this._source.destroy()}_updatePlayerSource(){Rc.debug("[".concat(this.getTrackId(),"] update player source track")),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Mh.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),e.addEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=e,this._source.updateTrack(this._originMediaStreamTrack),this._mediaStreamTrack!==this._source.outputTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mp(this,my.NEED_REPLACE_TRACK,this._mediaStreamTrack)))}renewMediaStreamTrack(){return fo.resolve(void 0)}}Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[String]),Fy("design:returntype",fo)],Vy.prototype,"setPlaybackDevice",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[Boolean,Object,Boolean]),Fy("design:returntype",fo)],Vy.prototype,"setEnabled",null),Uy([My(),nh({report:rh}),Fy("design:type",Function),Fy("design:paramtypes",[Boolean]),Fy("design:returntype",fo)],Vy.prototype,"setMuted",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[]),Fy("design:returntype",Object)],Vy.prototype,"getStats",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[Object,Number]),Fy("design:returntype",void 0)],Vy.prototype,"setAudioFrameCallback",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[]),Fy("design:returntype",void 0)],Vy.prototype,"play",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[]),Fy("design:returntype",void 0)],Vy.prototype,"stop",null);class jy extends Vy{constructor(e,t,i,n){super(e,t.encoderConfig?Fc(t.encoderConfig):{},n),this._deviceName="default",this._enabled=!0,this._config=t,this._constraints=i,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),wa()&&ph.bindInterruptDetectorTrack(this)}async setDevice(e){var t,i;const n=rh.reportApiInvoke(null,{tag:GA.TRACER,name:jA.MIC_AUDIO_TRACK_SET_DEVICE,options:[this.getTrackId(),e]});if(Rc.info(Je(t="[".concat(this.getTrackId(),"] start set device to ")).call(t,e)),this._enabled)try{const t=await Ph.getDeviceById(e),i={};i.audio=By({},this._constraints),i.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let n=null;try{n=await Oh(i,this.getTrackId())}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),n=await Oh({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw n.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await Ph.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw n.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}n.onSuccess(),Rc.info(Je(i="[".concat(this.getTrackId(),"] set device to ")).call(i,e," success"))}async setEnabled(e,t,i){if(t)return Rc.debug("[".concat(this.getTrackId,"] setEnabled false (do not close microphone)")),await super.setEnabled(e);if(!i){if(e===this._enabled)return;this.stateCheck("enabled",e)}Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e);const n=await this._enabledMutex.lock();if(!e){this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),i||(this._enabled=!1);try{await Mp(this,my.NEED_REMOVE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.toString()),n(),e}return void n()}const r=By({},this._constraints),o=Ph.searchDeviceIdByName(this._deviceName);o&&!r.deviceId&&(r.deviceId=o);try{const e=await Oh({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await Mp(this,my.NEED_ADD_TRACK,this)}catch(e){throw n(),Rc.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.toString()),e}i||(this._enabled=!0),Rc.info("[".concat(this.getTrackId(),"] setEnabled success")),n()}close(){super.close(),wa()&&ph.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Ra()||Na())&&this._enabled&&!this._isClosed&&ph.duringInterruption){const e=async()=>{ph.off(Ly.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Rc.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};ph.on(Ly.IOS_INTERRUPTION_END,e)}else Rc.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(vy.TRACK_ENDED)}async renewMediaStreamTrack(){const e=By({},this._constraints),t=Ph.searchDeviceIdByName(this._deviceName);t&&!e.deviceId&&(e.deviceId=t);const i=await Oh({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!0)}}Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[String]),Fy("design:returntype",fo)],jy.prototype,"setDevice",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[Boolean,Boolean,Boolean]),Fy("design:returntype",fo)],jy.prototype,"setEnabled",null);class Gy extends Vy{constructor(e,t,i,n){super(t.createOutputTrack(),i,n),this.source=e,this._bufferSource=t,this._bufferSource.on(iy.AUDIO_SOURCE_STATE_CHANGE,e=>{this.emit(vy.SOURCE_STATE_CHANGE,e)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){const t=rh.reportApiInvoke(null,{tag:GA.TRACER,name:jA.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),e,this.duration]});e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer(),t.onSuccess()}pauseProcessAudioBuffer(){const e=rh.reportApiInvoke(null,{tag:GA.TRACER,name:jA.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),e.onSuccess()}seekAudioBuffer(e){const t=rh.reportApiInvoke(null,{tag:GA.TRACER,name:jA.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(e),t.onSuccess()}resumeProcessAudioBuffer(){const e=rh.reportApiInvoke(null,{tag:GA.TRACER,name:jA.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),e.onSuccess()}stopProcessAudioBuffer(){const e=rh.reportApiInvoke(null,{tag:GA.TRACER,name:jA.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),e.onSuccess()}}Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[Object]),Fy("design:returntype",void 0)],Gy.prototype,"startProcessAudioBuffer",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[]),Fy("design:returntype",void 0)],Gy.prototype,"pauseProcessAudioBuffer",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[Number]),Fy("design:returntype",void 0)],Gy.prototype,"seekAudioBuffer",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[]),Fy("design:returntype",void 0)],Gy.prototype,"resumeProcessAudioBuffer",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[]),Fy("design:returntype",void 0)],Gy.prototype,"stopProcessAudioBuffer",null);class Hy extends Vy{constructor(){const e=gh().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,Op(8,"track-mix-"));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}get isActive(){var e;return!(!this.trackList.length||!Qo(e=this.trackList).call(e,e=>!e.muted))}getSubTrackLabels(){var e;return vo(e=this.trackList).call(e,e=>e.getTrackLabel())}hasAudioTrack(e){var t;return-1!==Lo(t=this.trackList).call(t,e)}addAudioTrack(e){var t;-1===Lo(t=this.trackList).call(t,e)?(Rc.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):Rc.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){var t;if(-1!==Lo(t=this.trackList).call(t,e)){Rc.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}Up(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){var e;const t={};Ji(e=this.trackList).call(e,e=>{e._encoderConfig&&((e._encoderConfig.bitrate||0)>(t.bitrate||0)&&(t.bitrate=e._encoderConfig.bitrate),(e._encoderConfig.sampleRate||0)>(t.sampleRate||0)&&(t.sampleRate=e._encoderConfig.sampleRate),(e._encoderConfig.sampleSize||0)>(t.sampleSize||0)&&(t.sampleSize=e._encoderConfig.sampleSize),e._encoderConfig.stereo&&(t.stereo=!0))}),this._encoderConfig=t}}class Qy extends Mu{constructor(){super(...arguments),this.resultStorage=new Mi}setLocalAudioStats(e,t,i){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(i,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(i,t))}setLocalVideoStats(e,t,i){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(i,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(i,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(i))}setRemoteAudioStats(e,t){const i=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",i,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const i=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",i,this.checkVideoDecode(t))}record(e,t,i){this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const n=this.resultStorage.get(e);if(n&&(n.result.push(i),n.result.length>=5)){var r;const i=ns(r=n.result).call(r,!0);n.isPrevNormal&&!i&&this.emit("exception",Wy[e],e,t),!n.isPrevNormal&&i&&this.emit("exception",Wy[e]+2e3,e+"_RECOVER",t),n.isPrevNormal=i,n.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof Hy&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}checkFramerateInput(e,t){let i=null;t._encoderConfig&&t._encoderConfig.frameRate&&(i=Xy(t._encoderConfig.frameRate));const n=e.captureFrameRate;return!i||!n||!(i>10&&n<5||i<10&&i>=5&&n<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof Hy&&!t.isActive||!!t.muted||0!==e.sendBitrate}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const Wy={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003};function qy(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function $y(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=qy(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=qy(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}class zy{constructor(e){this.localConnectionsMap=new Mi,this.remoteConnectionsMap=new Mi,this.trafficStatsPeerList=[],this.updateStats=()=>{var e,t;Ji(e=this.remoteConnectionsMap).call(e,e=>{var t;const i=e.audioStats,n=e.videoStats,r=e.pcStats,o=$y({},tu),s=$y({},nu),a=$y({},iu),c=e.connection.pc.getStats(),l=c.audioRecv[0],u=c.videoRecv[0],d=r?r.videoRecv[0]:void 0,h=!0===e.connection.pc._statsFilter.videoIsReady,p=this.trafficStats&&Qo(t=this.trafficStats.peer_delay).call(t,t=>t.peer_uid===e.connection.getUserId());if(l){"opus"!==l.codec&&"aac"!==l.codec||(o.codecType=l.codec),l.outputLevel?o.receiveLevel=Math.round(32767*l.outputLevel):e.connection.user.audioTrack&&(o.receiveLevel=Math.round(32767*e.connection.user.audioTrack.getVolumeLevel())),o.receiveBytes=l.bytes,o.receivePackets=l.packets,o.receivePacketsLost=l.packetsLost,o.packetLossRate=o.receivePacketsLost/(o.receivePackets+o.receivePacketsLost),o.receiveBitrate=i?8*Math.max(0,o.receiveBytes-i.receiveBytes):0,o.totalDuration=i?i.totalDuration+1:1,o.totalFreezeTime=i?i.totalFreezeTime:0,o.freezeRate=o.totalFreezeTime/o.totalDuration,o.receiveDelay=l.jitterBufferMs;const t=e.connection.user.audioTrack;o.totalDuration>10&&zy.isRemoteAudioFreeze(t)&&(o.totalFreezeTime+=1)}if(u){"H264"!==u.codec&&"VP8"!==u.codec&&"VP9"!==u.codec&&"AV1X"!==u.codec||(s.codecType=u.codec),s.receiveBytes=u.bytes,s.receiveBitrate=n?8*Math.max(0,s.receiveBytes-n.receiveBytes):0,s.decodeFrameRate=u.decodeFrameRate,s.renderFrameRate=u.decodeFrameRate,u.outputFrame&&(s.renderFrameRate=u.outputFrame.frameRate),u.receivedFrame?(s.receiveFrameRate=u.receivedFrame.frameRate,s.receiveResolutionHeight=u.receivedFrame.height,s.receiveResolutionWidth=u.receivedFrame.width):e.connection.user.videoTrack&&(s.receiveResolutionHeight=e.connection.user.videoTrack._videoHeight||0,s.receiveResolutionWidth=e.connection.user.videoTrack._videoWidth||0),void 0!==u.framesRateFirefox&&(s.receiveFrameRate=Math.round(u.framesRateFirefox)),s.receivePackets=u.packets,s.receivePacketsLost=u.packetsLost,s.packetLossRate=s.receivePacketsLost/(s.receivePackets+s.receivePacketsLost),s.totalDuration=n?n.totalDuration+1:1,s.totalFreezeTime=n?n.totalFreezeTime:0,s.receiveDelay=u.jitterBufferMs||0;const t=e.connection.user.videoTrack;e.connection.subscribeOptions.video&&h&&zy.isRemoteVideoFreeze(t,u,d)&&(s.totalFreezeTime+=1),s.freezeRate=s.totalFreezeTime/s.totalDuration}p&&(o.end2EndDelay=p.B_ad,s.end2EndDelay=p.B_vd,o.transportDelay=p.B_ed,s.transportDelay=p.B_ed,o.currentPacketLossRate=p.B_ealr4/100,s.currentPacketLossRate=p.B_evlr4/100,a.uplinkNetworkQuality=p.B_punq?p.B_punq:0,a.downlinkNetworkQuality=p.B_pdnq?p.B_punq:0),e.audioStats=o,e.videoStats=s,e.pcStats=c,e.networkStats=a,e.connection.user.audioTrack&&this.exceptionMonitor.setRemoteAudioStats(e.connection.user.audioTrack,o),e.connection.user.videoTrack&&this.exceptionMonitor.setRemoteVideoStats(e.connection.user.videoTrack,s)}),Ji(t=this.localConnectionsMap).call(t,e=>{const t=e.audioStats,i=e.videoStats,n=$y({},Xl),r=$y({},eu),o=e.connection.pc.getStats(),s=o.audioSend[0],a=o.videoSend[0],c=e.connection.getUserId();s&&("opus"!==s.codec&&"aac"!==s.codec||(n.codecType=s.codec),s.inputLevel?n.sendVolumeLevel=Math.round(32767*s.inputLevel):e.connection.audioTrack&&(n.sendVolumeLevel=Math.round(32767*e.connection.audioTrack.getVolumeLevel())),n.sendBytes=s.bytes,n.sendPackets=s.packets,n.sendPacketsLost=s.packetsLost,n.sendBitrate=t?8*Math.max(0,n.sendBytes-t.sendBytes):0),a&&("H264"!==a.codec&&"VP8"!==a.codec&&"VP9"!==a.codec&&"AV1X"!==a.codec||(r.codecType=a.codec),r.sendBytes=a.bytes,r.sendBitrate=i?8*Math.max(0,r.sendBytes-i.sendBytes):0,a.inputFrame?(r.captureFrameRate=a.inputFrame.frameRate,r.captureResolutionHeight=a.inputFrame.height,r.captureResolutionWidth=a.inputFrame.width):e.connection.videoTrack&&(r.captureResolutionWidth=e.connection.videoTrack._videoWidth||0,r.captureResolutionHeight=e.connection.videoTrack._videoHeight||0),a.sentFrame?(r.sendFrameRate=a.sentFrame.frameRate,r.sendResolutionHeight=a.sentFrame.height,r.sendResolutionWidth=a.sentFrame.width):e.connection.videoTrack&&(r.sendResolutionWidth=e.connection.videoTrack._videoWidth||0,r.sendResolutionHeight=e.connection.videoTrack._videoHeight||0),a.avgEncodeMs&&(r.encodeDelay=a.avgEncodeMs),e.connection.videoTrack&&e.connection.videoTrack._encoderConfig&&e.connection.videoTrack._encoderConfig.bitrateMax&&(r.targetSendBitrate=1e3*e.connection.videoTrack._encoderConfig.bitrateMax),r.sendPackets=a.packets,r.sendPacketsLost=a.packetsLost,r.totalDuration=i?i.totalDuration+1:1,r.totalFreezeTime=i?i.totalFreezeTime:0,this.isLocalVideoFreeze(a)&&(r.totalFreezeTime+=1)),this.trafficStats&&(n.sendPacketsLost=this.trafficStats.B_palr4/100,r.sendPacketsLost=this.trafficStats.B_pvlr4/100),e.audioStats=n,e.videoStats=r,e.audioStats&&e.connection.audioTrack&&this.exceptionMonitor.setLocalAudioStats(c,e.connection.audioTrack,e.audioStats),e.videoStats&&e.connection.videoTrack&&this.exceptionMonitor.setLocalVideoStats(c,e.connection.videoTrack,e.videoStats)})},this.clientId=e,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new Qy,this.exceptionMonitor.on("exception",(e,t,i)=>{this.onStatsException&&this.onStatsException(e,t,i)})}reset(){this.localConnectionsMap=new Mi,this.remoteConnectionsMap=new Mi,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(e){const t=this.localConnectionsMap.get(e);return t&&t.audioStats?t.audioStats:$y({},Xl)}getLocalVideoTrackStats(e){const t=this.localConnectionsMap.get(e);return t&&t.videoStats?t.videoStats:$y({},eu)}getRemoteAudioTrackStats(e){var t;const i=this.remoteConnectionsMap.get(e);if(!i||!i.audioStats)return $y({},tu);if(!this.trafficStats)return i.audioStats;const n=Qo(t=this.trafficStats.peer_delay).call(t,e=>e.peer_uid===i.connection.user.uid);return n&&(i.audioStats.publishDuration=n.B_ppad+(Ma()-this.trafficStats.timestamp)),i.audioStats}getRemoteNetworkQualityStats(e){const t=this.remoteConnectionsMap.get(e);return t&&t.networkStats?t.networkStats:$y({},iu)}getRemoteVideoTrackStats(e){var t;const i=this.remoteConnectionsMap.get(e);if(!i||!i.videoStats)return $y({},nu);if(!this.trafficStats)return i.videoStats;const n=Qo(t=this.trafficStats.peer_delay).call(t,e=>e.peer_uid===i.connection.user.uid);return n&&(i.videoStats.publishDuration=n.B_ppvd+(Ma()-this.trafficStats.timestamp)),i.videoStats}getRTCStats(){var e,t;let i=0,n=0,r=0,o=0;Ji(e=this.localConnectionsMap).call(e,e=>{e.audioStats&&(i+=e.audioStats.sendBytes,n+=e.audioStats.sendBitrate),e.videoStats&&(i+=e.videoStats.sendBytes,n+=e.videoStats.sendBitrate)}),Ji(t=this.remoteConnectionsMap).call(t,e=>{e.audioStats&&(r+=e.audioStats.receiveBytes,o+=e.audioStats.receiveBitrate),e.videoStats&&(r+=e.videoStats.receiveBytes,o+=e.videoStats.receiveBitrate)});let s=1;return this.trafficStats&&(s+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:s,SendBitrate:n,SendBytes:i,RecvBytes:r,RecvBitrate:o,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}removeConnection(e){this.localConnectionsMap.delete(e),this.remoteConnectionsMap.delete(e)}addLocalConnection(e){const t=e.connectionId;this.localConnectionsMap.has(t)||this.localConnectionsMap.set(t,{connection:e})}addRemoteConnection(e){const t=e.connectionId;this.remoteConnectionsMap.has(t)||this.remoteConnectionsMap.set(t,{connection:e})}updateTrafficStats(e){var t;const i=Gn(t=e.peer_delay).call(t,e=>{var t;return-1===Lo(t=this.trafficStatsPeerList).call(t,e.peer_uid)});Ji(i).call(i,e=>{var t,i;const n=Qo(t=Bd(Jp(i=this.remoteConnectionsMap).call(i))).call(t,t=>t.connection._userId===e.peer_uid);void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,n?Ma()-n.connection.startTime:0),this.trafficStatsPeerList.push(e.peer_uid))}),this.trafficStats=e}updateUplinkStats(e){var t;this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&Rc.debug(Je(t="[".concat(this.clientId,"]: Period fir changes to ")).call(t,e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,i){if(!e)return!1;const n=!!i&&t.framesDecodeFreezeTime>i.framesDecodeFreezeTime,r=!i||t.framesDecodeCount>i.framesDecodeCount;return n||!r}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}}function Zy(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function Yy(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=Zy(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=Zy(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}function Ky(e){if(!e.address||!e.tcp)throw new pl(ll.UNEXPECTED_RESPONSE,"Invalid address format ".concat(e));return e.address.match(/^[\.\:\d]+$/)?"".concat(e.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(Rc.info("Cannot recognized as IP address ".concat(e.address,". Used As Host instead")),Je(t="".concat(e.address,":")).call(t,e.tcp));var t}function Jy(e,t){var i;const n=jc("GATEWAY_DOMAINS");let r=n[1]&&-1!==Lo(t).call(t,n[1])?1:0;return e.addresses=e.addresses||[],{gatewayAddrs:vo(i=e.addresses).call(i,e=>{var t,i,o;return e.ip.match(/^[\.\:\d]+$/)?Je(t=Je(i="".concat(e.ip.replace(/[^\d]/g,"-"),".")).call(i,n[r++%n.length],":")).call(t,e.port):(Rc.info("Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),Je(o="".concat(e.ip,":")).call(o,e.port))}),uid:e.uid,cid:e.cid,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function Xy(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function eS(e,t){const i=e.videoSend[0];if(!i)return null;const n=t&&t.videoSend[0]?t.videoSend[0].inputFrame:void 0,r={id:Op(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:i.ssrc.toString()};return i.inputFrame&&(n&&i.inputFrame.height===n.height||(r.A_fhi=i.inputFrame.height?i.inputFrame.height.toString():"0"),n&&i.inputFrame.width===n.width||(r.A_fwi=i.inputFrame.width?i.inputFrame.width.toString():"0"),n&&i.inputFrame.frameRate===n.frameRate||(r.A_fri=i.inputFrame.frameRate?i.inputFrame.frameRate.toString():"0")),r}function tS(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function iS(e,t){const i={};if(e.height&&e.width){const n=t._videoHeight||t.getMediaStreamTrack(!0).getSettings().height;i.scaleResolutionDownBy=n?n/Xy(e.height):4}return i.maxFramerate=e.framerate?Xy(e.framerate):void 0,i.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,i}function nS(e,t){var i;let n,r,o=void 0;switch(t){case Ny.CHOOSE_SERVER:n=4096,r="choose server";break;case Ny.CLOUD_PROXY:n=1048576,r="proxy";break;case Ny.CLOUD_PROXY_5:n=4194304,r="proxy5";break;default:throw new pl(ll.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(Ji(i=e.response_body).call(i,t=>{var i;t.buffer&&t.buffer.flag===n&&(o={code:t.buffer.code,addresses:vo(i=t.buffer.edges_services).call(i,e=>Yy({},e,{ticket:t.buffer.cert})),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:Yy({},t.buffer.detail,{},e.detail),flag:t.buffer.flag,opid:e.opid})}),!o)throw new pl(ll.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(r," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return o}function rS(e){var t;return vo(t=e.addresses).call(t,e=>({address:e.ip,tcpport:e.port,udpport:e.port,username:Nc.username,password:Nc.password}))}function oS(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function sS(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=oS(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=oS(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}const aS=new Mi;class cS extends Mu{constructor(e){super(),this.inChannelInfo={joinAt:null,duration:0},this._state="DISCONNECTED",this.needToSendUnpubUnsub=new Mi,this.isSignalRecover=!1,this.hasChangeBGPAddress=!1,this.joinGatewayStartTime=0,this._signalTimeout=!1,this.clientId=e.clientId,this.spec=e,this.signal=new ky(sS({},e,{retryConfig:e.websocketRetryConfig})),this._statsCollector=e.statsCollector,this.role=e.role||"audience",this._clientRoleOptions=e.clientRoleOptions,this.handleSignalEvents()}get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(gy.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(gy.CONNECTION_STATE_CHANGE,e,t)}async join(e,t){var i,n;"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const r=Ma();let o=aS.get(e.cname);if(o||(o=new Mi,aS.set(e.cname,o)),o.has(e.uid)){const t=new pl(ll.UID_CONFLICT);throw Oy.joinGateway(e.sid,{lts:r,succ:!1,ec:t.message,addr:null,uid:e.uid,cid:e.cid}),t}o.set(e.uid,!0),this.joinInfo=e,this.key=t;const s=e.proxyServer?vo(i=e.gatewayAddrs).call(i,t=>{var i,n;const r=t.split(":");return Je(i=Je(n="wss://".concat(e.proxyServer,"/ws/?h=")).call(n,r[0],"&p=")).call(i,r[1])}):vo(n=e.gatewayAddrs).call(n,e=>"wss://".concat(e));let a=0;this.joinGatewayStartTime=r;try{a=(await this.signal.init(s)).uid}catch(t){throw Rc.error("[".concat(this.clientId,"] User join failed"),t.toString()),Oy.joinGateway(e.sid,{lts:r,succ:!1,ec:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid}),o.delete(e.uid),this.signal.close(),t}return this.state="CONNECTED",this.inChannelInfo.joinAt=Ma(),Rc.debug("[".concat(this.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(e=>{Rc.warning("[".concat(this.clientId,"] get traffic stats error"),e.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(gy.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(gy.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(gy.NETWORK_QUALITY,{uplinkNetworkQuality:tS(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:tS(this._statsCollector.trafficStats.B_dnq)}):this.emit(gy.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),a}async leave(e=!1){if("DISCONNECTED"!==this.state){this.state="DISCONNECTING";try{e||this.signal.connectionState!==YA.CONNECTED||await wp(this.signal.request(JA.LEAVE,void 0,!0),3e3)}catch(e){Rc.warning("[".concat(this.clientId,"] leave request failed, ignore"),e)}this.signal.close(),this.reset(),this.state="DISCONNECTED"}}async publish(e,t){if(!this.joinInfo)throw new pl(ll.UNEXPECTED_ERROR,"publish no joinInfo");const i=e.getUserId(),n=e.videoTrack?function(e){var t;const i=e._encoderConfig;if(!i)return{};const n={resolution:i.width&&i.height?Je(t="".concat(Xy(i.width),"x")).call(t,Xy(i.height)):void 0,maxVideoBW:i.bitrateMax,minVideoBW:i.bitrateMin};return"number"==typeof i.frameRate?(n.maxFrameRate=i.frameRate,n.minFrameRate=i.frameRate):i.frameRate&&(n.maxFrameRate=i.frameRate.max||i.frameRate.ideal||i.frameRate.exact||i.frameRate.min,n.minFrameRate=i.frameRate.min||i.frameRate.ideal||i.frameRate.exact||i.frameRate.max),n}(e.videoTrack):{};if(e.on(ty.NEED_ANSWER,(r,o,s)=>{var a;const c={state:"offer",stream_type:t,p2p_id:e.pc.ID,sdp:ve(r),audio:!!e.audioTrack,video:!!e.videoTrack,screen:e.videoTrack&&-1!==Lo(a=e.videoTrack._hints).call(a,Eu.SCREEN_TRACK),attributes:n,dtx:e.audioTrack instanceof jy&&e.audioTrack._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1,mode:this.spec.mode,codec:this.spec.codec,extend:jc("PUB_EXTEND")};if(e.audioTrack&&e.audioTrack instanceof Hy&&e.audioTrack){const t={stream_id:this.joinInfo&&(this.joinInfo.stringUid||this.joinInfo.uid),action:""};e.audioTrack.isActive?t.action="unmute_local_audio":t.action="mute_local_audio",this.sendControl(t)}if(e.videoTrack){const t={stream_id:this.joinInfo&&(this.joinInfo.stringUid||this.joinInfo.uid),action:""};e.videoTrack.muted?t.action="mute_local_video":t.action="unmute_local_video",this.sendControl(t)}this.signal.request(JA.PUBLISH,c,!0).then(e=>{i&&this.needToSendUnpubUnsub.set(i,!0),o(JSON.parse(e.sdp))}).catch(t=>{if(r.retry&&t.data&&t.data.code===ZA.ERR_PUBLISH_REQUEST_INVALID)return Rc.warning("[".concat(this.clientId,"] receiver publish error code, retry"),t.toString()),Dp(e,ty.NEED_UNPUB).then(()=>{r.retry=!1,Dp(e,ty.NEED_ANSWER,r).then(o).catch(s)});t.code!==ll.WS_ABORT&&s(t)})}),e.on(ty.NEED_RENEGOTIATE,(i,n,r)=>{const o={state:"negotiation",stream_type:t,p2p_id:e.pc.ID,sdp:i};this.signal.request(JA.PUBLISH,o,!0).then(e=>{n(JSON.parse(e.sdp))}).catch(e=>{e.code!==ll.WS_ABORT&&r(e)})}),e.on(ty.NEED_UNPUB,n=>i&&!this.needToSendUnpubUnsub.has(i)?n(!1):"RECONNECTING"===this.state?n(!0):void this.signal.request(JA.UNPUBLISH,{stream_id:e.getUserId(),stream_type:t},!0).then(()=>n(!1)).catch(e=>{Rc.warning("unpublish warning: ",e),n(!0)})),e.on(ty.NEED_UPLOAD,(e,i)=>{this.signal.upload(e,{stream_type:t,stats:i})}),e.on(ty.NEED_SIGNAL_RTT,e=>{e(this.signal.rtt)}),e.on(ty.NEED_CONTROL,(e,t,i)=>{let n;if("video"===e.type&&e.muted)n="mute_local_video";else if("video"!==e.type||e.muted)if("audio"===e.type&&e.muted)n="mute_local_audio";else{if("audio"!==e.type||e.muted)return;n="unmute_local_audio"}else n="unmute_local_video";const r={stream_id:this.joinInfo&&(this.joinInfo.stringUid||this.joinInfo.uid),action:n};this.sendControl(r).then(t).catch(i)}),"RECONNECTING"!==this.state){if("CONNECTED"!==this.state)return new pl(ll.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state)).throw();await e.startP2PConnection()}else e.readyToReconnectPC()}async subscribe(e){if(!this.joinInfo)throw new pl(ll.UNEXPECTED_ERROR,"subscribe no joinInfo");const t=e.getUserId();if(e.on(ty.NEED_ANSWER,(i,n,r)=>{const o=e.subscribeOptions,s={stream_id:e.getUserId(),audio:!!o.audio,video:!!o.video,mode:this.spec.mode,codec:this.spec.codec,p2p_id:e.pc.ID,sdp:ve(i),tcc:!!jc("SUBSCRIBE_TCC"),extend:jc("SUB_EXTEND")};this.signal.request(JA.SUBSCRIBE,s,!0).then(e=>{this.needToSendUnpubUnsub.set(t,!0),n(JSON.parse(e.sdp))}).catch(t=>{if(i.retry&&t.data&&t.data.code===ZA.ERR_SUBSCRIBE_REQUEST_INVALID)return Rc.warning("[".concat(this.clientId,"] receiver subscribe error code, retry"),t.toString()),Dp(e,ty.NEED_UNSUB).then(()=>{i.retry=!1,Dp(e,ty.NEED_ANSWER,i).then(n).catch(r)});t.code!==ll.WS_ABORT&&r(t)})}),e.on(ty.NEED_UNSUB,i=>this.needToSendUnpubUnsub.has(t)?"RECONNECTING"===this.state?i(!0):void this.signal.request(JA.UNSUBSCRIBE,{stream_id:e.getUserId()},!0).then(()=>i(!1)).catch(e=>{Rc.warning("unsubscribe warning",e),i(!0)}):i(!1)),e.on(ty.NEED_UPLOAD,(t,i)=>{this.signal.upload(t,{stream_id:e.getUserId(),stats:i})}),e.on(ty.NEED_SIGNAL_RTT,e=>{e(this.signal.rtt)}),"RECONNECTING"!==this.state){if("CONNECTED"!==this.state)return new pl(ll.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state)).throw();await e.startP2PConnection()}else e.readyToReconnectPC()}async subscribeChange(e,t){var i,n;if(!this.joinInfo)throw new pl(ll.UNEXPECTED_ERROR,"subscribe no joinInfo");if(await e.setSubscribeOptions(t),"RECONNECTING"!==this.state){if("CONNECTED"!==this.state)return new pl(ll.INVALID_OPERATION,"can not subscribe change when connection state is ".concat(this.state)).throw();Rc.debug(Je(i=Je(n="[".concat(this.clientId,"] send subscribe change, audio: ")).call(n,t.audio,", video: ")).call(i,t.video)),await this.signal.request(JA.SUBSCRIBE_CHANGE,{stream_id:e.getUserId(),audio:!!t.audio,video:!!t.video},!0)}}async sendControl(e){this.signal.request(JA.CONTROL,e,!0,!0)}async unsubscribe(e){await e.closeP2PConnection()}getGatewayInfo(){return this.signal.request(JA.GATEWAY_INFO)}renewToken(e){return this.signal.request(JA.RENEW_TOKEN,{token:e})}async setClientRole(e,t){if(t&&(this._clientRoleOptions=nn({},t)),"CONNECTED"!==this.state)return void(this.role=e);let i=void 0;i="audience"===e?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,await this.signal.request(JA.SET_CLIENT_ROLE,{role:e,level:i}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(JA.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setStreamFallbackOption(e,t){await this.signal.request(JA.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(JA.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Ma()-this.inChannelInfo.joinAt),sS({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(JA.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Ma()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=aS.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.needToSendUnpubUnsub=new Mi,this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){const t=e.match(/(wss\:\/\/)?([^:]+):(\d+)/);return t?{username:Nc.username,password:Nc.password,turnServerURL:t[2],tcpport:Cn(t[3])+30,udpport:Cn(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex])||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(sS({},Nc,{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){var e;if("CONNECTED"!==this.state)return;const t=await this.signal.request(JA.TRAFFIC_STATS,void 0,!0);t.timestamp=Ma(),Ji(e=t.peer_delay).call(e,e=>{var t;const i=this._statsCollector.trafficStats&&Qo(t=this._statsCollector.trafficStats.peer_delay).call(t,t=>t.peer_uid===e.peer_uid);i&&i.B_st!==e.B_st&&Vp(()=>{this.emit(gy.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)})}),this._statsCollector.updateTrafficStats(t)}getJoinMessage(){if(!this.joinInfo||!this.key)throw new pl(ll.UNEXPECTED_ERROR,"can not generate join message, no join info");const e=nn({},this.joinInfo.apResponse);let t=jc("REPORT_APP_SCENARIO");if("string"!=typeof t)try{t=ve(t)}catch(e){t=void 0}t&&t.length>128&&(t=void 0);const i={session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:Oc,browser:navigator.userAgent,process_id:jc("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:e,extend:jc("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:t};return this.joinInfo.stringUid&&(i.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(i.aes_mode=this.joinInfo.aesmode,jc("ENCRYPT_AES")?(i.aes_secret=this.joinInfo.aespassword,i.aes_encrypt=!0):i.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(i.aes_salt=this.joinInfo.aessalt)),e.addresses[this.signal.websocket.currentURLIndex]&&(i.ap_response.ticket=e.addresses[this.signal.websocket.currentURLIndex].ticket,delete e.addresses),i}getRejoinMessage(){if(!this.joinInfo)throw new pl(ll.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(KA.WS_RECONNECTING,e=>{this.joinInfo&&Oy.WebSocketQuit(this.joinInfo.sid,{lts:Ma(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||TA.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",Oy.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Ma())}),this.signal.on(KA.WS_CLOSED,e=>{let t;switch(e){case"LEAVE":t=TA.LEAVE;break;case"UID_BANNED":case"IP_BANNED":case"CHANNEL_BANNED":case"SERVER_ERROR":t=TA.SERVER_ERROR;break;default:t=TA.NETWORK_ERROR}Rc.debug("[signal] websocket closed, reason: ".concat(t||"undefined -> "+TA.NETWORK_ERROR)),this.joinInfo&&Oy.WebSocketQuit(this.joinInfo.sid,{lts:Ma(),succ:"LEAVE"===e?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this.reset(),this._disconnectedReason=e,this.state="DISCONNECTED"}),this.signal.on(KA.WS_CONNECTED,()=>{var e,t,i;if((this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo)&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(Rc.debug(Je(e=Je(t=Je(i="[".concat(this.clientId,"] patch to send set client role, role: ")).call(i,this.role,", mode: ")).call(t,this.spec.mode,", level: ")).call(e,this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),Oy.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid}),this.joinInfo.useLocalAccessPoint)){const e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);var n;if(!e)return void Rc.error(Je(n="[".concat(this.clientId,"] set local access point after joined failed: ")).call(n,e));Vc("EVENT_REPORT_DOMAIN",e[1]),Vc("EVENT_REPORT_BACKUP_DOMAIN",e[1]),Vc("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}}),this.signal.on(ey.ON_UPLINK_STATS,e=>{this._statsCollector.updateUplinkStats(e)}),this.signal.on(KA.REQUEST_RECOVER,(e,t,i)=>{if(!this.joinInfo)return i(new pl(ll.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Dp(this,gy.REQUEST_NEW_GATEWAY_LIST).then(t).catch(i)}),this.signal.on(KA.REQUEST_JOIN_INFO,e=>{e(this.getJoinMessage())}),this.signal.on(KA.REQUEST_REJOIN_INFO,e=>{e(this.getRejoinMessage())}),this.signal.on(KA.REPORT_JOIN_GATEWAY,(e,t)=>{this.joinInfo&&Oy.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:e,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid})}),this.signal.on(KA.IS_P2P_DISCONNECTED,e=>{e(Bp(this,gy.IS_P2P_DISCONNECTED))}),this.signal.on(KA.DISCONNECT_P2P,()=>{this.needToSendUnpubUnsub=new Mi,this.emit(gy.DISCONNECT_P2P)}),this.signal.on(KA.NEED_RENEW_SESSION,()=>{this.emit(gy.NEED_RENEW_SESSION)}),this.signal.on(KA.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(KA.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0})}}function lS(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}let uS=1;function dS(e,t,i,n,r){uS+=1;const o={sid:i.sid,command:"convergeAllocateEdge",uid:"666",appId:i.appId,ts:Math.floor(Ma()/1e3),seq:uS,requestId:uS,version:Oc,cname:i.cname},s={service_name:t,json_body:ve(o)};let a,c,l=e[0];return Yd(async()=>{a=Ma();const e=await Wd(l,{data:s,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Ma()-a,0!==e.code){const t=new pl(ll.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:c});throw Rc.error(t.toString()),t}const i=JSON.parse(e.json_body);if(200!==i.code){var r;const e=new pl(ll.UNEXPECTED_RESPONSE,Je(r="live streaming app center error, code: ".concat(i.code,", reason: ")).call(r,i.reason),{code:i.code,responseTime:c});throw Rc.error(e.toString()),e}if(!i.servers||0===i.servers.length){const e=new pl(ll.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:i.code,responseTime:c});throw Rc.error(e.toString()),e}const o=function(e,t){var i;return{addressList:vo(i=e.servers).call(i,e=>{var i,n;return Je(i=Je(n="wss://".concat(e.address.replace(/\./g,"-"),".edge.agora.io:")).call(n,e.wss,"?serviceName=")).call(i,encodeURIComponent(t))}),workerToken:e.workerToken,vid:e.vid}}(i,t);return jc("LIVE_STREAMING_ADDRESS")&&(o.addressList=jc("LIVE_STREAMING_ADDRESS")instanceof Array?jc("LIVE_STREAMING_ADDRESS"):[jc("LIVE_STREAMING_ADDRESS")]),function(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=lS(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=lS(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}({},o,{responseTime:c})},(n,r)=>(Oy.apworkerEvent(i.sid,{success:!0,sc:200,serviceName:t,responseDetail:ve(n.addressList),firstSuccess:0===r,responseTime:c,serverIp:e[r%e.length]}),!1),(n,r)=>(Oy.apworkerEvent(i.sid,{success:!1,sc:n.data&&n.data.code||200,serviceName:t,responseTime:c,serverIp:e[r%e.length]}),!!(n.code!==ll.OPERATION_ABORTED&&n.code!==ll.UNEXPECTED_RESPONSE||n.data&&n.data.retry)&&(l=e[(r+1)%e.length],!0)),r)}function hS({url:e,areaCode:t},i,n,r){const o=Ma(),[s,a]=mS(i,t,[Ny.CHOOSE_SERVER]);let c=$d.networkState;return Yd(async()=>{c&&$d.networkState===Cy.OFFLINE&&$d.onlineWaiter&&await fo.race([$d.onlineWaiter,Ip(r&&r.maxRetryTimeout||zd.maxRetryTimeout)]),c=$d.networkState;const t=await Wd(e,{data:s,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);fS(t,e,i,o,[Ny.CHOOSE_SERVER]);const a=nS(t,Ny.CHOOSE_SERVER);return gS(a),Jy(a,e)},t=>(t&&Oy.joinChooseServer(i.sid,{lts:o,succ:!0,csAddr:e,opid:a,serverList:t.gatewayAddrs,ec:null,cid:t.cid.toString(),uid:t.uid.toString(),csIp:t.csIp,unilbsServerIds:[Ny.CHOOSE_SERVER].toString()}),!1),t=>t.code!==ll.OPERATION_ABORTED&&(t.code===ll.CAN_NOT_GET_GATEWAY_SERVER?t.data.retry:(Oy.joinChooseServer(i.sid,{lts:o,succ:!1,csAddr:e,serverList:null,opid:a,ec:t.code,csIp:t.data&&t.data.csIp,unilbsServerIds:[Ny.CHOOSE_SERVER].toString(),extend:ve({networkState:c})}),Rc.warning("[".concat(i.clientId,"] Choose server network error, retry"),t),!0)),r)}function pS({url:e,areaCode:t,serviceIds:i},n,r,o){const s=Ma(),[a,c]=mS(n,t,i);let l=void 0;return Yd(async()=>{l&&$d.networkState===Cy.OFFLINE&&$d.onlineWaiter&&await fo.race([$d.onlineWaiter,Ip(o&&o.maxRetryTimeout||zd.maxRetryTimeout)]),l=$d.networkState;const t=await Wd(e,{data:a,cancelToken:r,headers:{"Content-Type":"multipart/form-data;"}},!0);fS(t,e,n,s,i);const c=nS(t,Ny.CHOOSE_SERVER),u=nS(t,"proxy5"===n.cloudProxyServer?Ny.CLOUD_PROXY_5:Ny.CLOUD_PROXY);return gS(c),{gatewayInfo:Jy(c,e),proxyInfo:u,url:e}},t=>{var r;return t.gatewayInfo&&Oy.joinChooseServer(n.sid,{lts:s,succ:!0,csAddr:e,serverList:t.gatewayInfo.gatewayAddrs,ec:null,opid:c,cid:t.gatewayInfo.cid.toString(),uid:t.gatewayInfo.uid.toString(),csIp:t.gatewayInfo.csIp,unilbsServerIds:i.toString()}),t.proxyInfo&&Oy.joinWebProxyAP(n.sid,{lts:s,sucess:1,apServerAddr:e,turnServerAddrList:vo(r=t.proxyInfo.addresses).call(r,e=>e.ip).join(","),errorCode:null,eventType:n.cloudProxyServer,unilbsServerIds:i.toString()}),!1},t=>t.code!==ll.OPERATION_ABORTED&&(t.code===ll.CAN_NOT_GET_GATEWAY_SERVER?t.data.retry:(Oy.joinWebProxyAP(n.sid,{lts:s,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:n.cloudProxyServer,unilbsServerIds:i.toString(),extend:ve({networkState:l})}),Rc.warning("[".concat(n.clientId,"] multi unilbs network error, retry"),t),!0)),o)}const fS=(e,t,i,n,r)=>{var o,s,a;const c=[];if(Ji(o=e.response_body).call(o,o=>{const s=o.buffer.code;if(0!==s){const a=ef(s),l={error:new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,a.desc,{retry:a.retry,csIp:e.detail[502]}),flag:o.buffer.flag};c.push(l),4096===l.flag?Oy.joinChooseServer(i.sid,{lts:n,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:l.error.message,csIp:l.error.data&&l.error.data.csIp,unilbsServerIds:r.toString()}):1048576!==l.flag&&4194304!==l.flag||Oy.joinWebProxyAP(i.sid,{lts:n,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:l.error.code,eventType:i.cloudProxyServer,unilbsServerIds:r.toString()})}}),c.length)throw Rc.warning(Je(s=Je(a="[".concat(i.clientId,"] multi unilbs ")).call(a,t," failed, ")).call(s,vo(c).call(c,e=>{var t,i;return Je(t=Je(i="flag: ".concat(e.flag,", message: ")).call(i,e.error.message,", retry: ")).call(t,e.error.data.retry)}).join(" | "))),new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,vo(c).call(c,e=>{var t;return Je(t="flag: ".concat(e.flag,", message: ")).call(t,e.error.message)}).join(" | "),{retry:!!Qo(c).call(c,e=>e.error.data.retry),csIp:e.detail[502]})},gS=e=>{if(e.addresses&&0===e.addresses.length&&0===e.code)throw new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(jc("GATEWAY_ADDRESS")&&jc("GATEWAY_ADDRESS").length>0){var t;Rc.debug("assign gateway address to",jc("GATEWAY_ADDRESS"));const i=vo(t=jc("GATEWAY_ADDRESS")).call(t,t=>({ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket}));e.addresses=i}},mS=(e,t,i)=>{var n;const r=Math.floor(Math.random()*10**12),o={appid:e.appId,client_ts:Ma(),opid:r,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:{6:e.stringUid,11:t},key:e.token,service_ids:i,uid:e.uid||0}}]};Ji(n=o.request_bodies).call(n,t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=ve({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))});const s=new FormData;return s.append("request",ve(o)),[s,r]};async function _S(e,t,i){const n=async function(e,t,i){var n,r;const o=vo(n=Uo(r=jc("WEBCS_DOMAIN")).call(r,0,jc("AJAX_REQUEST_CONCURRENT"))).call(n,t=>{var i;return{url:e.proxyServer?Je(i="https://".concat(e.proxyServer,"/ap/?url=")).call(i,t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:g_()}});let s=null;const a=[],c=async()=>await zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:n=>(Rc.debug("[".concat(e.clientId,"] Connect to choose_server:"),n.url),hS(n,e,t,i)),allFailedhandler:e=>{throw e[0]},promisesCollector:a}),l=async()=>{var n;if(await Ip(1e3),null!==s)return s;const r=vo(n=jc("WEBCS_DOMAIN_BACKUP_LIST")).call(n,t=>{var i;return{url:e.proxyServer?Je(i="https://".concat(e.proxyServer,"/ap/?url=")).call(i,t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:g_()}});return await zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:r,asyncMapHandler:n=>(Rc.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),n.url),hS(n,e,t,i)),allFailedhandler:e=>{throw e[0]},promisesCollector:a})};return s=await Pp([c(),l()]),a.length&&Ji(a).call(a,e=>e.cancel&&"function"==typeof e.cancel&&e.cancel()),s}(e,t,i);return{gatewayInfo:await n}}async function vS(e,t,i,n){var r,o;if("disabled"===e.cloudProxyServer)return n?await _S(e,t,i):void 0;let s;if("443only"===e.cloudProxyServer||"normal"===e.cloudProxyServer){var a;let r;n?"normal"!==e.cloudProxyServer?[r,s]=await fo.all([AS(e,t,i),_S(e,t,i)]):(r=await AS(e,t,i),e.proxyServer=r.addresses[0],Oy.setProxyServer(e.proxyServer),Rc.setProxyServer(e.proxyServer),s=await _S(e,t,i)):(s=void 0,"normal"!==e.cloudProxyServer?r=await AS(e,t,i):(r=await AS(e,t,i),e.proxyServer=r.addresses[0],Oy.setProxyServer(e.proxyServer),Rc.setProxyServer(e.proxyServer))),e.turnServer={mode:"manual",servers:vo(a=r.addresses).call(a,t=>({turnServerURL:t,tcpport:"proxy3"===e.cloudProxyServer?void 0:r.serverResponse.tcpport?r.serverResponse.tcpport:Nc.tcpport,udpport:"proxy4"===e.cloudProxyServer?void 0:r.serverResponse.udpport?r.serverResponse.udpport:Nc.udpport,username:r.serverResponse.username||Nc.username,password:r.serverResponse.password||Nc.password,forceturn:"proxy4"!==e.cloudProxyServer&&"proxy5"!==e.cloudProxyServer,security:"proxy5"===e.cloudProxyServer}))}}else{const{proxyInfo:n,gatewayInfo:r}=await async function(e,t,i){var n,r;const o=jc("PROXY_SERVER_TYPE3"),s=(e,t)=>{var i;let n=o;return hl(n)&&(n=t%2==0?o[1]:o[0]),Je(i="https://".concat(n,"/ap/?url=")).call(i,e)},a=vo(n=Uo(r=jc("WEBCS_DOMAIN")).call(r,0,jc("AJAX_REQUEST_CONCURRENT"))).call(n,(t,i)=>({url:s("".concat(t,"/api/v2/transpond/webrtc?v=2"),i),areaCode:g_(),serviceIds:[Ny.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?Ny.CLOUD_PROXY_5:Ny.CLOUD_PROXY]}));let c=null;const l=[],u=async()=>await zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:a,asyncMapHandler:n=>(Rc.debug("[".concat(e.clientId,"] Connect to choose_server:"),n.url),pS(n,e,t,i)),allFailedhandler:e=>{throw e[0]},promisesCollector:l}),d=async()=>{var n;if(await Ip(1e3),null!==c)return c;const r=vo(n=jc("WEBCS_DOMAIN_BACKUP_LIST")).call(n,(e,t)=>({url:s("".concat(e,"/api/v2/transpond/webrtc?v=2"),t),areaCode:g_(),serviceIds:[11,18]}));return await zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:r,asyncMapHandler:n=>(Rc.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),n.url),pS(n,e,t,i)),allFailedhandler:e=>{throw e[0]},promisesCollector:l})},{gatewayInfo:h,proxyInfo:p,url:f}=await Pp([u(),d()]);if(l.length&&Ji(l).call(l,e=>e.cancel&&"function"==typeof e.cancel&&e.cancel()),!h||!p)throw new pl(ll.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(hl(o)&&f){const t=new n_(f).host;ns(o).call(o,t)&&(e.proxyServer=t,Rc.setProxyServer(t),Oy.setProxyServer(t))}return c={gatewayInfo:h,proxyInfo:rS(p)},c}(e,t,i);s={gatewayInfo:r},e.turnServer={mode:"manual",servers:vo(n).call(n,t=>({turnServerURL:t.address,tcpport:"proxy3"===e.cloudProxyServer?void 0:t.tcpport?t.tcpport:Nc.tcpport,udpport:"proxy4"===e.cloudProxyServer?void 0:t.udpport?t.udpport:Nc.udpport,username:t.username||Nc.username,password:t.password||Nc.password,forceturn:"proxy4"!==e.cloudProxyServer&&"proxy5"!==e.cloudProxyServer,security:"proxy5"===e.cloudProxyServer}))}}return Rc.debug(Je(r=Je(o="[".concat(e.clientId,"] set proxy server: ")).call(o,e.proxyServer,", mode: ")).call(r,e.cloudProxyServer)),s}async function ES(e,t,i,n){var r;const o=Uo(r=jc("ACCOUNT_REGISTER")).call(r,0,jc("AJAX_REQUEST_CONCURRENT"));let s=[];return s=t.proxyServer?vo(o).call(o,e=>{var i;return Je(i="https://".concat(t.proxyServer,"/ap/?url=")).call(i,e+"/api/v1")}):vo(o).call(o,e=>"https://".concat(e,"/api/v1")),(await async function(e,t,i,n,r){const o=Ma(),s={sid:i.sid,opid:10,appid:i.appId,string_uid:t};let a=e[0];const c=await Yd(()=>Wd(a+"".concat(-1===Lo(a).call(a,"?")?"?":"&","action=stringuid"),{data:s,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(i,n)=>{if(0===i.code){var r;if(i.uid<=0||i.uid>=Math.pow(2,32))throw Rc.error(Je(r="Invalid Uint Uid ".concat(t," => ")).call(r,i.uid),i),Oy.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:ll.INVALID_UINT_UID_FROM_STRING_UID,extend:s}),new pl(ll.INVALID_UINT_UID_FROM_STRING_UID);return Oy.reqUserAccount(s.sid,{lts:o,success:!0,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:null,extend:s}),!1}const c=ef(i.code);return c.retry&&(a=e[(n+1)%e.length]),Oy.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:i.uid,errorCode:c.desc,extend:s}),c.retry},(t,i)=>t.code!==ll.OPERATION_ABORTED&&(Oy.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:null,errorCode:t.code,extend:s}),a=e[(i+1)%e.length],!0),r);if(0!==c.code){const e=ef(c.code);throw new pl(ll.UNEXPECTED_RESPONSE,e.desc)}return c}(s,e,t,i,n)).uid}async function AS(e,t,i){var n,r;let o=Ma();const s=vo(n=jc("normal"===e.cloudProxyServer?"PROXY_CS":"WEBCS_DOMAIN")).call(n,t=>{var i;return e.proxyServer?Je(i="https://".concat(e.proxyServer,"/ap/?url=")).call(i,t+"/api/v1"):"https://".concat(t,"/api/v1")});if("proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer||"proxy5"===e.cloudProxyServer){const n=vo(s).call(s,e=>({url:e,areaCode:g_()}));let r=null;r=await zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:n,asyncMapHandler:n=>function({url:e,areaCode:t},i,n,r){const o=Ma(),s={opid:133,flag:"proxy5"===i.cloudProxyServer?4194304:1048576,ts:+new Date,key:i.token,cname:i.cname,sid:i.sid,detail:{6:i.stringUid,11:t},uid:i.uid||0};return Yd(async()=>await Wd(e,{data:s,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":69}}),t=>{var n;if(0===t.code)return Oy.joinWebProxyAP(i.sid,{lts:o,sucess:1,apServerAddr:e,turnServerAddrList:vo(n=t.addresses).call(n,e=>e.ip).join(","),errorCode:null,eventType:i.cloudProxyServer}),!1;const r=ef(t.code);throw new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,r.desc,{retry:r.retry})},t=>{return t.code!==ll.OPERATION_ABORTED&&(t.code===ll.CAN_NOT_GET_GATEWAY_SERVER?(Oy.joinWebProxyAP(s.sid,{lts:o,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:i.cloudProxyServer}),Rc.warning(Je(n=Je(r=Je(a="[".concat(i.clientId,"] proxy ap server ")).call(a,e," failed, message: ")).call(r,t.message,", retry: ")).call(n,t.data.retry)),t.data.retry):(Oy.joinWebProxyAP(s.sid,{lts:o,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:i.cloudProxyServer}),!0));var n,r,a},r)}(n,e,t,i),allFailedhandler:()=>{throw Rc.error("[".concat(e.clientId,"] can not get proxy server after trying several times")),new pl(ll.CAN_NOT_GET_PROXY_SERVER)}});const o=r.addresses;if(!o||0===o.length)throw Rc.error("[".concat(e.clientId,"] can not get proxy server, empty proxy server list")),new pl(ll.CAN_NOT_GET_PROXY_SERVER,"empty proxy server list");return{addresses:vo(o).call(o,e=>e.ip),serverResponse:{tcpport:o[0].port||443,udpport:o[0].port||Nc.udpport,username:Nc.username,password:Nc.password}}}let a=null;a=await zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:n=>function(e,t,i,n){const r=Ma(),o={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,uid:t.uid,cname:t.cname,ts:Math.floor(Ma()/1e3),version:Oc,seq:0,requestId:1};return Yd(async()=>({res:await Wd(e,{data:{service_name:"webrtc_proxy",json_body:ve(o)},cancelToken:i,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}}),url:e}),e=>{if(!e.res.json_body)throw Rc.debug("[".concat(t.clientId,"] Get proxy server failed: no json_body")),new pl(ll.UNEXPECTED_RESPONSE,ve(e.res));const i=JSON.parse(e.res.json_body);var n,r;if(200!==i.code)throw Rc.debug(Je(n=Je(r="[".concat(t.clientId,"] Get proxy server failed: response code [")).call(r,i.code,"], reason [")).call(n,i.reason,"]")),new pl(ll.UNEXPECTED_RESPONSE,ve(e.res));return Rc.debug("[".concat(t.clientId,"] App return server length"),i.servers.length),!1},t=>t.code!==ll.OPERATION_ABORTED&&(Oy.requestProxyAppCenter(o.sid,{lts:r,succ:!1,APAddr:e,workerManagerList:null,ec:t.code,response:t.message}),!0),n)}(n,e,t,i),allFailedhandler:()=>{throw Rc.error("[".concat(e.clientId,"] can not get proxy server after trying several times")),new pl(ll.CAN_NOT_GET_PROXY_SERVER)}});const c=JSON.parse(a.res.json_body),l=vo(r=c.servers).call(r,Ky);if("443only"===e.cloudProxyServer)return{addresses:l,serverResponse:{tcpport:443,udpport:Nc.udpport,username:Nc.username,password:Nc.password}};Oy.requestProxyAppCenter(e.sid,{lts:o,succ:!0,APAddr:a.url,workerManagerList:ve(l),ec:null,response:ve(a.res)}),o=Ma();const u=vo(l).call(l,n=>function(e,t,i,n){const r=Ma();let o=e;Is(e).call(e,"http")||(o="https://".concat(e,":4000/v2/machine"));const s={command:"request",gatewayType:"http",appId:t.appId,cname:t.cname,uid:(t.uid||"").toString(),sdkVersion:"2.3.1",sid:t.sid,seq:1,ts:Ma(),requestId:3,clientRequest:{appId:t.appId,cname:t.cname,uid:(t.uid||"").toString(),sid:t.sid}};return Yd(async()=>({res:await Wd(o,{data:s,cancelToken:i}),url:e}),e=>{if(!e.res.serverResponse)throw new pl(ll.UNEXPECTED_RESPONSE,"requeet worker manager server failed: serverResponse is undefined");return!1},t=>t.code!==ll.OPERATION_ABORTED&&(Oy.requestProxyWorkerManager(s.sid,{lts:r,succ:!1,workerManagerAddr:e,ec:t.code,response:t.message}),!0),n)}(n,e,t,i));let d=null;try{d=await Pp(u)}catch(t){throw Rc.error("[".concat(e.clientId,"] can not get worker manager after trying several times")),new pl(ll.CAN_NOT_GET_PROXY_SERVER)}return Ji(u).call(u,e=>e.cancel()),Oy.requestProxyWorkerManager(e.sid,{lts:o,succ:!0,workerManagerAddr:d.url,ec:null,response:ve(d.res)}),{addresses:[d.url],serverResponse:d.res.serverResponse}}async function yS(e,t,i,n){var r,o;const s=vo(r=Uo(o=jc("UAP_AP")).call(o,0,jc("AJAX_REQUEST_CONCURRENT"))).call(r,e=>{var i;return t.proxyServer?Je(i="https://".concat(t.proxyServer,"/ap/?url=")).call(i,e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")});return await dS(s,e,t,i,n)}Q({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var SS=M.Number.isNaN,CS=$v;Q({target:"Object",stat:!0,sham:!a},{create:qt});var bS=M.Object,TS=function(e,t){return bS.create(e,t)};Q({target:"Object",stat:!0},{setPrototypeOf:ai});var IS=M.Object.setPrototypeOf,RS=n((function(e,t){!function(e){function t(e){if(hl(e))return vo(e).call(e,(function(e){return e}));if(!i(e))return e;var n={};for(var r in e)i(e[r])||hl(e[r])?n[r]=t(e[r]):n[r]=e[r];return n}function i(e){return!("object"!=typeof e||hl(e)||!e)}function n(){var e=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i);return e&&e[0]?Number(e[0].split("/")[1]):null}function r(e){return!!window.RTCStatsReport&&e.getStats()instanceof fo}var o=function(){function e(e){this.input=[],this.size=e}return e.prototype.add=function(e){var t;this.input.push(e),this.input.length>this.size&&To(t=this.input).call(t,0,1)},e.prototype.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},e}(),s=function(e,t){return(s=IS||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};
/*! *****************************************************************************
	    Copyright (c) Microsoft Corporation. All rights reserved.
	    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	    this file except in compliance with the License. You may obtain a copy of the
	    License at http://www.apache.org/licenses/LICENSE-2.0
	       THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	    MERCHANTABLITY OR NON-INFRINGEMENT.
	       See the Apache Version 2.0 License for specific language governing permissions
	    and limitations under the License.
	    ***************************************************************************** */function a(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?TS(t):(i.prototype=t.prototype,new i)}var c=function(){return(c=nn||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function l(e,t,i,n){return new(i||(i=fo))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new i((function(t){t(e.value)})).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function u(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof rA&&(o[CS]=function(){return this}),o;function a(e){return function(t){return c([e,t])}}function c(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var d,h={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[]},p={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0},f={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},g={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},m={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},_=function(){function e(e,i){var n=this;this.videoIsReady=!1,this.stats=t(h),this.isFirstVideoReceived=!1,this.isFirstVideoDecoded=!1,this.isFirstAudioReceived=!1,this.isFirstAudioDecoded=!1,this.lossRateWindowStats=[],this.pc=e,this.options=i,this.intervalTimer=window.setInterval((function(){return l(n,void 0,void 0,(function(){return u(this,(function(e){return this.updateStats(),[2]}))}))}),this.options.updateInterval)}return e.prototype.getStats=function(){return this.stats},e.prototype.setVideoIsReady=function(e){this.videoIsReady=e},e.prototype.setIsFirstAudioDecoded=function(e){this.isFirstAudioDecoded=e},e.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},e.prototype.calcLossRate=function(e){var t,i=this;this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&To(t=this.lossRateWindowStats).call(t,0,1);for(var n=this.lossRateWindowStats.length,r=0,o=0,s=0,a=0,c=function(t){var c;Ji(c=e[t]).call(c,(function(e,c){if(i.lossRateWindowStats[n-1][t][c]&&i.lossRateWindowStats[0][t][c]){var l=i.lossRateWindowStats[n-1][t][c].packets-i.lossRateWindowStats[0][t][c].packets,u=i.lossRateWindowStats[n-1][t][c].packetsLost-i.lossRateWindowStats[0][t][c].packetsLost;"videoSend"===t||"audioSend"===t?(r+=l,s+=u):(o+=l,a+=u),SS(l)||SS(l)?e.packetLostRate=0:e.packetLostRate=l<=0||u<=0?0:u/(l+u)}}))},l=0,u=["videoSend","audioSend","videoRecv","audioRecv"];l<u.length;l++)c(u[l]);e.sendPacketLossRate=r<=0||s<=0?0:s/(r+s),e.recvPacketLossRate=o<=0||a<=0?0:a/(o+a)},e}(),v=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._stats=h,t.lastDecodeVideoReceiverStats=new Mi,t}return a(i,e),i.prototype.updateStats=function(){return l(this,void 0,void 0,(function(){var e,i,n,r;return u(this,(function(o){switch(o.label){case 0:return[4,this._getStats()];case 1:return e=o.sent(),i=this.statsResponsesToObjects(e),this._stats=t(h),n=Gn(i).call(i,(function(e){return"ssrc"===e.type})),this.processSSRCStats(n),(r=Qo(i).call(i,(function(e){return"VideoBwe"===e.type})))&&this.processBandwidthStats(r),this._stats.timestamp=Ma(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}}))}))},i.prototype.processBandwidthStats=function(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)},i.prototype.processSSRCStats=function(e){var i=this;Ji(e).call(e,(function(e){var n,r=ns(n=e.id).call(n,"send");switch(e.mediaType+"_"+(r?"send":"recv")){case"video_send":var o=t(f);o.codec=e.googCodecName,o.adaptionChangeReason="none",e.googCpuLimitedResolution&&(o.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(o.adaptionChangeReason="bandwidth"),o.avgEncodeMs=Number(e.googAvgEncodeMs),o.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},o.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},o.firsCount=Number(e.googFirReceived),o.nacksCount=Number(e.googNacksReceived),o.plisCount=Number(e.googPlisReceived),o.frameCount=Number(e.framesEncoded),o.bytes=Number(e.bytesSent),o.packets=Number(e.packetsSent),o.packetsLost=Number(e.packetsLost),o.ssrc=Number(e.ssrc),o.rttMs=Number(e.googRtt||0),i._stats.videoSend.push(o),i._stats.rtt=o.rttMs;break;case"video_recv":var s=t(p),a=i.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(s.codec=e.googCodecName,s.targetDelayMs=Number(e.googTargetDelayMs),s.renderDelayMs=Number(e.googRenderDelayMs),s.currentDelayMs=Number(e.googCurrentDelayMs),s.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),s.decodeMs=Number(e.googDecodeMs),s.maxDecodeMs=Number(e.googMaxDecodeMs),s.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},s.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},s.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},s.jitterBufferMs=Number(e.googJitterBufferMs),s.firsCount=Number(e.googFirsSent),s.nacksCount=Number(e.googNacksSent),s.plisCount=Number(e.googPlisSent),s.framesDecodeCount=Number(e.framesDecoded),s.bytes=Number(e.bytesReceived),s.packets=Number(e.packetsReceived),s.packetsLost=Number(e.packetsLost),s.ssrc=Number(e.ssrc),s.packets>0&&!i.isFirstVideoReceived&&(i.onFirstVideoReceived&&i.onFirstVideoReceived(),i.isFirstVideoReceived=!0),s.framesDecodeCount>0&&!i.isFirstVideoDecoded&&(i.onFirstVideoDecoded&&i.onFirstVideoDecoded(s.decodedFrame.width,s.decodedFrame.height),i.isFirstVideoDecoded=!0),a){var l=a.stats,u=Ma()-a.lts;s.framesDecodeFreezeTime=l.framesDecodeFreezeTime,s.framesDecodeInterval=l.framesDecodeInterval,s.framesDecodeCount>l.framesDecodeCount&&i.isFirstVideoDecoded?(a.lts=Ma(),s.framesDecodeInterval=u,s.framesDecodeInterval>=i.options.freezeRateLimit&&(i.videoIsReady?s.framesDecodeFreezeTime+=s.framesDecodeInterval:i.setVideoIsReady(!0))):s.framesDecodeCount<a.stats.framesDecodeCount&&(s.framesDecodeInterval=0)}i.lastDecodeVideoReceiverStats.set(s.ssrc,{stats:c({},s),lts:Ma()}),i._stats.videoRecv.push(s);break;case"audio_recv":var d=t(m);d.codec=e.googCodecName,d.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,d.decodingCNG=Number(e.googDecodingCNG),d.decodingCTN=Number(e.googDecodingCTN),d.decodingCTSG=Number(e.googDecodingCTSG),d.decodingNormal=Number(e.googDecodingNormal),d.decodingPLC=Number(e.googDecodingPLC),d.decodingPLCCNG=Number(e.googDecodingPLCCNG),d.expandRate=Number(e.googExpandRate),d.accelerateRate=Number(e.googAccelerateRate),d.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),d.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),d.speechExpandRate=Number(e.googSpeechExpandRate),d.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),d.jitterBufferMs=Number(e.googJitterBufferMs),d.jitterMs=Number(e.googJitterReceived),d.bytes=Number(e.bytesReceived),d.packets=Number(e.packetsReceived),d.packetsLost=Number(e.packetsLost),d.ssrc=Number(e.ssrc),d.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),d.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),d.receivedFrames>0&&!i.isFirstAudioReceived&&(i.onFirstAudioReceived&&i.onFirstAudioReceived(),i.isFirstAudioReceived=!0),d.decodingNormal>0&&!i.isFirstAudioDecoded&&(i.onFirstAudioDecoded&&i.onFirstAudioDecoded(),i.isFirstAudioDecoded=!0),i._stats.audioRecv.push(d);break;case"audio_send":var h=t(g);h.codec=e.googCodecName,h.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,h.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),h.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),h.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),h.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),h.bytes=Number(e.bytesSent),h.packets=Number(e.packetsSent),h.packetsLost=Number(e.packetsLost),h.ssrc=Number(e.ssrc),h.rttMs=Number(e.googRtt||0),i._stats.rtt=h.rttMs,i._stats.audioSend.push(h)}}))},i.prototype._getStats=function(){var e=this;return new fo((function(t,i){e.pc.getStats(t,i)}))},i.prototype.statsResponsesToObjects=function(e){var t=[],i=e.result();return Ji(i).call(i,(function(e){var i,n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};Ji(i=e.names()).call(i,(function(t){n[t]=e.stat(t)})),t.push(n)})),t},i}(_);!function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(d||(d={}));var E=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._stats=h,t.lastDecodeVideoReceiverStats=new Mi,t.lastVideoFramesRecv=new Mi,t.lastVideoFramesSent=new Mi,t.lastVideoFramesDecode=new Mi,t.lastVideoJBDelay=new Mi,t.lastAudioJBDelay=new Mi,t.mediaBytesSent=new Mi,t.mediaBytesRetransmit=new Mi,t.mediaBytesTargetEncode=new Mi,t.lastEncoderMs=new Mi,t}return a(i,e),i.prototype.updateStats=function(){return l(this,void 0,void 0,(function(){var e,i=this;return u(this,(function(n){var r;switch(n.label){case 0:return e=this,[4,this.pc.getStats()];case 1:return e.report=n.sent(),this._stats=t(h),Ji(r=this.report).call(r,(function(e){switch(e.type){case d.OUTBOUND:"audio"===e.mediaType?i.processAudioOutboundStats(e):"video"===e.mediaType&&i.processVideoOutboundStats(e);break;case d.INBOUND:"audio"===e.mediaType?i.processAudioInboundStats(e):"video"===e.mediaType&&i.processVideoInboundStats(e);break;case d.TRANSPORT:var t=i.report.get(e.selectedCandidatePairId);t&&i.processCandidatePairStats(t);break;case d.CANDIDATE_PAIR:e.selected&&i.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Ma(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}}))}))},i.prototype.processCandidatePairStats=function(e){var t,i;this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),Ji(t=this._stats.videoSend).call(t,(function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),Ji(i=this._stats.audioSend).call(i,(function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}))},i.prototype.processAudioInboundStats=function(e){var i,n=Qo(i=this._stats.audioRecv).call(i,(function(t){return t.ssrc===e.ssrc}));n||(n=t(m),this._stats.audioRecv.push(n)),n.ssrc=e.ssrc,n.packets=e.packetsReceived,n.packetsLost=e.packetsLost,n.bytes=e.bytesReceived,n.jitterMs=1e3*e.jitter,e.trackId&&this.processAudioTrackReceiverStats(e.trackId,n),e.codecId&&(n.codec=this.getCodecFromCodecStats(e.codecId)),n.receivedFrames||(n.receivedFrames=e.packetsReceived),n.droppedFrames||(n.droppedFrames=e.packetsLost),n.receivedFrames>0&&!this.isFirstAudioReceived&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(),this.isFirstAudioReceived=!0),n.outputLevel&&n.outputLevel>0&&!this.isFirstAudioDecoded&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(),this.isFirstAudioDecoded=!0)},i.prototype.processVideoInboundStats=function(e){var i,n=Qo(i=this._stats.videoRecv).call(i,(function(t){return t.ssrc===e.ssrc}));n||(n=t(p),this._stats.videoRecv.push(n)),n.ssrc=e.ssrc,n.packets=e.packetsReceived,n.packetsLost=e.packetsLost,n.bytes=e.bytesReceived,n.firsCount=e.firCount,n.nacksCount=e.nackCount,n.plisCount=e.pliCount,n.framesDecodeCount=e.framesDecoded;var r=this.lastDecodeVideoReceiverStats.get(n.ssrc),o=this.lastVideoFramesDecode.get(n.ssrc),s=Ma();if(n.framesDecodeCount>0&&!this.isFirstVideoDecoded){var a=n.decodedFrame?n.decodedFrame.width:0,l=n.decodedFrame?n.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(a,l),this.isFirstVideoDecoded=!0}if(r){var u=r.stats,d=s-r.lts;n.framesDecodeFreezeTime=u.framesDecodeFreezeTime,n.framesDecodeInterval=u.framesDecodeInterval,n.framesDecodeCount>u.framesDecodeCount&&this.isFirstVideoDecoded?(r.lts=Ma(),n.framesDecodeInterval=d,n.framesDecodeInterval>=this.options.freezeRateLimit&&(this.videoIsReady?n.framesDecodeFreezeTime+=n.framesDecodeInterval:this.setVideoIsReady(!0))):n.framesDecodeCount<u.framesDecodeCount&&(n.framesDecodeInterval=0)}o&&s-o.lts>=800?(n.decodeFrameRate=Math.round((n.framesDecodeCount-o.count)/((s-o.lts)/1e3)),this.lastVideoFramesDecode.set(n.ssrc,{count:n.framesDecodeCount,lts:s,rate:n.decodeFrameRate})):o?n.decodeFrameRate=o.rate:this.lastVideoFramesDecode.set(n.ssrc,{count:n.framesDecodeCount,lts:s,rate:0}),e.totalDecodeTime&&(n.decodeMs=1e3*e.totalDecodeTime),e.trackId&&this.processVideoTrackReceiverStats(e.trackId,n),e.codecId&&(n.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(n.framesRateFirefox=e.framerateMean),n.packets>0&&!this.isFirstVideoReceived&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(),this.isFirstVideoReceived=!0),this.lastDecodeVideoReceiverStats.set(n.ssrc,{stats:c({},n),lts:r?r.lts:Ma()})},i.prototype.processVideoOutboundStats=function(e){var i,n=Qo(i=this._stats.videoSend).call(i,(function(t){return t.ssrc===e.ssrc}));n||(n=t(f),this._stats.videoSend.push(n));var r=this.mediaBytesSent.get(e.ssrc);if(r?r.add(e.bytesSent):((a=new o(10)).add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,a)),void 0!==e.retransmittedBytesSent){var s=this.mediaBytesRetransmit.get(e.ssrc);s?s.add(e.retransmittedBytesSent):((a=new o(10)).add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,a))}if(e.totalEncodedBytesTarget){var a,c=this.mediaBytesTargetEncode.get(e.ssrc);c?c.add(e.totalEncodedBytesTarget):((a=new o(10)).add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,a))}if(n.ssrc=e.ssrc,n.bytes=e.bytesSent,n.packets=e.packetsSent,n.firsCount=e.firCount,n.nacksCount=e.nackCount,n.plisCount=e.pliCount,n.frameCount=e.framesEncoded,n.adaptionChangeReason=e.qualityLimitationReason,e.totalEncodeTime&&e.framesEncoded){var l=this.lastEncoderMs.get(e.ssrc);if(!l||l.lastFrameCount>e.framesEncoded)n.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{var u=e.framesEncoded-l.lastFrameCount,h=e.totalEncodeTime-l.lastEncoderTime;n.avgEncodeMs=1e3*h/u}this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lts:Ma()})}if(e.codecId&&(n.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,n),e.trackId&&this.processVideoTrackSenderStats(e.trackId,n),e.remoteId)this.processRemoteInboundStats(e.remoteId,n);else{var p=this.findRemoteStatsId(e.ssrc,d.REMOTE_INBOUND);p&&this.processRemoteInboundStats(p,n)}},i.prototype.processAudioOutboundStats=function(e){var i,n=Qo(i=this._stats.audioSend).call(i,(function(t){return t.ssrc===e.ssrc}));if(n||(n=t(g),this._stats.audioSend.push(n)),n.ssrc=e.ssrc,n.packets=e.packetsSent,n.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,n),e.codecId&&(n.codec=this.getCodecFromCodecStats(e.codecId)),e.trackId&&this.processAudioTrackSenderStats(e.trackId,n),e.remoteId)this.processRemoteInboundStats(e.remoteId,n);else{var r=this.findRemoteStatsId(e.ssrc,d.REMOTE_INBOUND);r&&this.processRemoteInboundStats(r,n)}},i.prototype.findRemoteStatsId=function(e,t){var i,n,r=Qo(i=Bd(Jp(n=this.report).call(n))).call(i,(function(i){return i.type===t&&i.ssrc===e}));return r?r.id:null},i.prototype.processVideoMediaSource=function(e,t){var i=this.report.get(e);i&&i.width&&i.height&&i.framesPerSecond&&(t.inputFrame={width:i.width,height:i.height,frameRate:i.framesPerSecond})},i.prototype.processAudioMediaSource=function(e,t){var i=this.report.get(e);i&&(t.inputLevel=i.audioLevel)},i.prototype.processVideoTrackSenderStats=function(e,t){var i=this.report.get(e);if(i){var n=0,r=Ma(),o=this.lastVideoFramesSent.get(t.ssrc);o&&r-o.lts>=800?(n=Math.round((i.framesSent-o.count)/((r-o.lts)/1e3)),this.lastVideoFramesSent.set(t.ssrc,{count:i.framesSent,lts:r,rate:n})):o?n=o.rate:this.lastVideoFramesSent.set(t.ssrc,{count:i.framesSent,lts:r,rate:0}),t.sentFrame={width:i.frameWidth,height:i.frameHeight,frameRate:n}}},i.prototype.processVideoTrackReceiverStats=function(e,t){var i=this.report.get(e);if(i){var n=this.lastVideoFramesRecv.get(t.ssrc),r=Ma();t.framesReceivedCount=i.framesReceived;var o=0;if(n&&r-n.lts>=800?(o=Math.round((i.framesReceived-n.count)/((r-n.lts)/1e3)),this.lastVideoFramesRecv.set(t.ssrc,{count:i.framesReceived,lts:r,rate:o})):n?o=n.rate:this.lastVideoFramesRecv.set(t.ssrc,{count:i.framesReceived,lts:r,rate:0}),t.receivedFrame={width:i.frameWidth||0,height:i.frameHeight||0,frameRate:o||0},t.decodedFrame={width:i.frameWidth||0,height:i.frameHeight||0,frameRate:t.decodeFrameRate||0},t.outputFrame={width:i.frameWidth||0,height:i.frameHeight||0,frameRate:t.decodeFrameRate||0},i.jitterBufferDelay&&i.jitterBufferEmittedCount){var s=this.lastVideoJBDelay.get(t.ssrc);this.lastVideoJBDelay.set(t.ssrc,{jitterBufferDelay:i.jitterBufferDelay,jitterBufferEmittedCount:i.jitterBufferEmittedCount}),s||(s={jitterBufferDelay:0,jitterBufferEmittedCount:0});var a=1e3*(i.jitterBufferDelay-s.jitterBufferDelay)/(i.jitterBufferEmittedCount-s.jitterBufferEmittedCount);t.jitterBufferMs=a,t.currentDelayMs=Math.round(a)}}},i.prototype.processAudioTrackSenderStats=function(e,t){var i=this.report.get(e);i&&(t.aecReturnLoss=i.echoReturnLoss||0,t.aecReturnLossEnhancement=i.echoReturnLossEnhancement||0)},i.prototype.processAudioTrackReceiverStats=function(e,t){var i=this.report.get(e);if(i){if(i.removedSamplesForAcceleration&&i.totalSamplesReceived&&(t.accelerateRate=i.removedSamplesForAcceleration/i.totalSamplesReceived),i.jitterBufferDelay&&i.jitterBufferEmittedCount){var n=this.lastAudioJBDelay.get(t.ssrc);this.lastAudioJBDelay.set(t.ssrc,{jitterBufferDelay:i.jitterBufferDelay,jitterBufferEmittedCount:i.jitterBufferEmittedCount}),n||(n={jitterBufferDelay:0,jitterBufferEmittedCount:0});var r=1e3*(i.jitterBufferDelay-n.jitterBufferDelay)/(i.jitterBufferEmittedCount-n.jitterBufferEmittedCount);t.jitterBufferMs=Math.round(r)}t.outputLevel=i.audioLevel;var o=1920;i.totalSamplesDuration&&i.totalSamplesReceived&&(o=i.totalSamplesReceived/i.totalSamplesDuration/50,t.receivedFrames=Math.round(i.totalSamplesReceived/o)),i.concealedSamples&&(t.droppedFrames=Math.round(i.concealedSamples/o))}},i.prototype.processRemoteInboundStats=function(e,t){var i=this.report.get(e);i&&(t.packetsLost=i.packetsLost,i.roundTripTime&&(t.rttMs=1e3*i.roundTripTime))},i.prototype.getCodecFromCodecStats=function(e){var t=this.report.get(e);if(!t)return"";var i=t.mimeType.match(/\/(.*)$/);return i&&i[1]?i[1]:""},i.prototype.updateSendBitrate=function(){var e,t,i,n=0,r=null,o=null;Ji(e=this.mediaBytesSent).call(e,(function(e){n+=e.diffMean()})),Ji(t=this.mediaBytesRetransmit).call(t,(function(e){r=null===r?e.diffMean():r+e.diffMean()})),Ji(i=this.mediaBytesTargetEncode).call(i,(function(e){o=null===o?e.diffMean():o+e.diffMean()}));var s=null!==r?n-r:n;this._stats.bitrate={actualEncoded:8*s/(this.options.updateInterval/1e3),transmit:8*n/(this.options.updateInterval/1e3)},null!==r&&(this._stats.bitrate.retransmit=8*r/(this.options.updateInterval/1e3)),null!==o&&(this._stats.bitrate.targetEncoded=8*o/(this.options.updateInterval/1e3))},i}(_),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.updateStats=function(){return fo.resolve()},t}(_);function y(e,t,i,o){void 0===t&&(t=250),void 0===i&&(i=8),void 0===o&&(o=500);var s=n();return s?s<76?new v(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:o}):new E(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:o}):r(e)?new E(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:o}):new A(e,{updateInterval:t,lossRateInterval:i,freezeRateLimit:o})}e.createWebRTCStatsFilter=y,e.AgoraWebRTCStatsFilter=_,hn(e,"__esModule",{value:!0})}(t)}));class wS{constructor(e){this.localCandidateCount=0,this.allCandidateReceived=!1,this.audioTrack=null,this.videoTrack=null,this.mediaStream=new MediaStream,this.ID=NS,NS+=1,this.spec=e,this.createPeerConnection(),this.statsFilter=RS.createWebRTCStatsFilter(this.pc,void 0,void 0,Ia()?1200:void 0)}get _statsFilter(){return this.statsFilter}getStats(){return this.statsFilter.getStats()}async createOfferSDP(){try{const e=await this.pc.createOffer(this.offerOptions);if(!e.sdp)throw new Error("offer sdp is empty");return e.sdp}catch(e){throw Rc.error("create offer error:",e.toString()),new pl(ll.CREATE_OFFER_FAILED,e.toString())}}async setOfferSDP(e){try{await this.pc.setLocalDescription({type:"offer",sdp:e})}catch(e){throw Rc.error("set local offer error",e.toString()),new pl(ll.CREATE_OFFER_FAILED,e.toString())}}async setAnswerSDP(e){try{await this.pc.setRemoteDescription({type:"answer",sdp:e})}catch(e){if("InvalidStateError"!==e.name||"stable"!==this.pc.signalingState)throw Rc.error("set remote answer error",e.toString()),new pl(ll.SET_ANSWER_FAILED,e.toString());Rc.debug("[pc-".concat(this.ID,"] ignore invalidstate error"))}}close(){this.onICEConnectionStateChange=void 0,this.onConnectionStateChange=void 0;try{this.pc.oniceconnectionstatechange=null,this.pc.onconnectionstatechange=null,this.pc.onsignalingstatechange=null,this.pc.onicecandidateerror=null,this.pc.onicecandidate=null,this.pc.close(),this.pc=null,this.audioTransceiver=void 0,this.videoTransceiver=void 0}catch(e){}this.statsFilter.destroy()}createPeerConnection(){const e={iceServers:[]},t=e=>{const t=[];return Ji(e).call(e,e=>{var i,n,r,o;e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(i="turns:".concat((o=e.turnServerURL,o.match(/^[\.\:\d]+$/)?"".concat(o.replace(/[^\d]/g,"-"),".edge.agora.io"):(Rc.info("Cannot recognized as IP address ".concat(o,". Used As Host instead")),o)),":")).call(i,e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(n="turn:".concat(e.turnServerURL,":")).call(n,e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(r="turn:".concat(e.turnServerURL,":")).call(r,e.tcpport,"?transport=tcp")}))}),t};var i,n;this.spec.iceServers?e.iceServers=this.spec.iceServers:this.spec.turnServer&&"off"!==this.spec.turnServer.mode&&(Yl(this.spec.turnServer.servers)?e.iceServers=this.spec.turnServer.servers:(e.iceServers&&e.iceServers.push(...t(this.spec.turnServer.servers)),e.iceServers&&this.spec.turnServer.serversFromGateway&&e.iceServers.push(...t(this.spec.turnServer.serversFromGateway)),Ji(i=Je(n=this.spec.turnServer.servers).call(n,this.spec.turnServer.serversFromGateway||[])).call(i,t=>{t.forceturn&&(e.iceTransportPolicy="relay")}))),jc("CHROME_FORCE_PLAN_B")&&Da()&&(e.sdpSemantics="plan-b",Fu().supportUnifiedPlan=!1),this.pc=new RTCPeerConnection(e,{optional:[{googDscp:!0}]}),this.pc.oniceconnectionstatechange=()=>{this.onICEConnectionStateChange&&this.onICEConnectionStateChange(this.pc.iceConnectionState)},this.pc.onconnectionstatechange=()=>{this.onConnectionStateChange&&this.onConnectionStateChange(this.pc.connectionState)},this.pc.onsignalingstatechange=()=>{this.pc&&"closed"===this.pc.connectionState&&this.onConnectionStateChange&&this.onConnectionStateChange(this.pc.connectionState)},this.pc.onicecandidate=e=>{if(!e.candidate)return this.pc.onicecandidate=null,this.allCandidateReceived=!0,void Rc.debug("[pc-".concat(this.ID,"] local candidate count"),this.localCandidateCount);this.localCandidateCount+=1},Fa(()=>{this.allCandidateReceived||(this.allCandidateReceived=!0,Rc.debug("[pc-".concat(this.ID,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},jc("CANDIDATE_TIMEOUT"))}}class OS extends wS{constructor(e){super(e)}async setOfferSDP(e){const t=jc("CUSTOM_PUB_OFFER_MODIFIER");return t&&(e=t(e)),await super.setOfferSDP(e)}async setAnswerSDP(e){const t=jc("CUSTOM_PUB_ANSWER_MODIFIER");return t&&(e=t(e)),await super.setAnswerSDP(e)}getAnswerSDP(){return this.pc.remoteDescription}getOfferSDP(){return this.pc.localDescription}async addStream(e){const t=e.getTracks();for(const i of t)await this.addTrack(i)}async replaceTrack(e){var t;if(!Fu().supportReplaceTrack){const t="audio"===e.kind?this.audioTrack:this.videoTrack;if(!t)throw new pl(ll.UNEXPECTED_ERROR,"can not find replaced track");return await this.removeTrack(t),await this.addTrack(e),!0}const i=this.getSender(e.kind),n=Qo(t=this.mediaStream.getTracks()).call(t,t=>t.kind===e.kind);n&&this.mediaStream.removeTrack(n),this.mediaStream.addTrack(e);try{await i.replaceTrack(e),"audio"===e.kind?this.audioTrack=e:this.videoTrack=e}catch(e){throw new pl(ll.SENDER_REPLACE_FAILED,e.toString())}return!1}async removeTrack(e){const t=this.getSender(e.kind);this.mediaStream.removeTrack(e);try{const e=ma();"Safari"===e.name&&"11"===e.version&&await t.replaceTrack(null),this.pc.removeTrack(t)}catch(e){Rc.warning("[pc-".concat(this.ID,"] remove track error, ignore"),e)}"audio"===e.kind?(this.audioTrack=null,this.audioSender=void 0,this.audioTransceiver&&(this.audioTransceiver.direction="inactive"),this.audioTransceiver=void 0):(this.videoTrack=null,this.videoSender=void 0,this.videoTransceiver&&(this.videoTransceiver.direction="inactive"),this.videoTransceiver=void 0)}onOfferSettled({videoActive:e,audioActive:t}){if(Ia())Rc.debug("firefox do not set sender parameter");else{if(this.audioSender){const e={networkQuality:void 0,active:!0};jc("DSCP_TYPE")&&(e.networkQuality=jc("DSCP_TYPE")),this.audioTrack&&(e.active=!!t),this.setAudioRtpEncodingParameters(e).catch(e=>{Rc.debug("set audio sender`s network priority failed")})}if(this.videoSender){const t={networkQuality:void 0,active:!0};jc("DSCP_TYPE")&&(t.networkQuality=jc("DSCP_TYPE")),this.videoTrack&&(t.active=!!e),this.setVideoRtpEncodingParameters(t).catch(e=>{Rc.debug("set video sender`s network priority failed")})}}}async addTrack(e){const t=Fu();if("audio"===e.kind&&this.audioTrack||"video"===e.kind&&this.videoTrack)throw new pl(ll.UNEXPECTED_ERROR,"Can't add multiple stream");let i,n;this.mediaStream.addTrack(e),t.supportUnifiedPlan?(i=await async function(e,t,i){var n;const r=Qo(n=e.getTransceivers()).call(n,e=>"inactive"===e.direction&&e.receiver.track.kind===t.kind);return r?(r.direction="sendrecv",await r.sender.replaceTrack(t),r):e.addTransceiver(t,{direction:"sendrecv",streams:[i]})}(this.pc,e,this.mediaStream),n=i.sender):n=this.pc.addTrack(e,this.mediaStream),"audio"===e.kind?(this.audioTrack=e,this.audioSender=n,this.audioTransceiver=i):(this.videoTrack=e,this.videoSender=n,this.videoTransceiver=i)}async setRtpSenderParameters(e,t){const i=this.videoSender||(this.videoTransceiver?this.videoTransceiver.sender:void 0);if(!i)return;const n=i.getParameters();n.degradationPreference=t;try{await i.setParameters(n)}catch(e){Rc.debug("[".concat(this.ID,"] ignore RtpSender.setParameters"),e.toString())}}async setVideoRtpEncodingParameters(e){const t=this.videoSender||(this.videoTransceiver?this.videoTransceiver.sender:void 0);if(!t)throw new pl(ll.LOW_STREAM_ENCODING_ERROR,"Low stream has no video sender.");const i=t.getParameters();if(!i.encodings||!i.encodings[0])throw new pl(ll.LOW_STREAM_ENCODING_ERROR,"Low stream RtpEncodingParameters is empty.");e.scaleResolutionDownBy&&(i.encodings[0].scaleResolutionDownBy=e.scaleResolutionDownBy),e.maxBitrate&&(i.encodings[0].maxBitrate=e.maxBitrate),e.maxFramerate&&(i.encodings[0].maxFramerate=e.maxFramerate),void 0!==e.active&&(Rc.debug("set video sender encoding active:",e.active),i.encodings[0].active=e.active);const n=["very-low","low","medium","high"];return e.networkPriority&&ns(n).call(n,e.networkPriority)&&(Rc.debug("set video sender network quality:",e.networkPriority),i.encodings[0].networkPriority=e.networkPriority),await t.setParameters(i),t.getParameters()}async setAudioRtpEncodingParameters(e){const t=this.audioSender||(this.audioTransceiver?this.audioTransceiver.sender:void 0);if(!t)throw new pl(ll.SET_ENCODING_PARAMETER_ERROR,"pc has no audio sender.");const i=t.getParameters();if(!i.encodings||!i.encodings[0])throw new pl(ll.SET_ENCODING_PARAMETER_ERROR,"pc RtpEncodingParameters is empty.");void 0!==e.active&&(Rc.debug("set audio sender encoding active:",e.active),i.encodings[0].active=e.active);const n=["very-low","low","medium","high"];return e.networkPriority&&ns(n).call(n,e.networkPriority)&&(Rc.debug("set audio sender network quality:",e.networkPriority),i.encodings[0].networkPriority=e.networkPriority),await t.setParameters(i),t.getParameters()}getSender(e){let t=null;if(Fu().supportUnifiedPlan){var i;const n=Qo(i=this.pc.getTransceivers()).call(i,t=>t.sender.track&&t.sender.track.kind===e);t=n?n.sender:null}else{var n;t=Qo(n=this.pc.getSenders()).call(n,t=>t.track&&t.track.kind===e)||null}if(!t)throw new pl(ll.SENDER_NOT_FOUND);return t}close(){this.audioSender=void 0,this.videoSender=void 0,super.close()}}class kS extends wS{constructor(e){super(e),this.statsFilter.onFirstAudioDecoded=()=>this.onFirstAudioDecoded&&this.onFirstAudioDecoded(),this.statsFilter.onFirstVideoDecoded=(e,t)=>this.onFirstVideoDecoded&&this.onFirstVideoDecoded(e,t),this.statsFilter.onFirstAudioReceived=()=>this.onFirstAudioReceived&&this.onFirstAudioReceived(),this.statsFilter.onFirstVideoReceived=()=>this.onFirstVideoReceived&&this.onFirstVideoReceived(),Fu().supportUnifiedPlan?(this.audioTransceiver=this.pc.addTransceiver("audio",{direction:"recvonly"}),this.videoTransceiver=this.pc.addTransceiver("video",{direction:"recvonly"})):this.offerOptions={offerToReceiveAudio:!0,offerToReceiveVideo:!0},this.pc.ontrack=e=>{"audio"===e.track.kind?this.audioTrack=e.track:this.videoTrack=e.track,this.onTrack&&this.onTrack(e.track,e.streams[0])}}async setOfferSDP(e){const t=jc("CUSTOM_SUB_OFFER_MODIFIER");return t&&(e=t(e)),await super.setOfferSDP(e)}async setAnswerSDP(e){const t=jc("CUSTOM_SUB_ANSWER_MODIFIER");return t&&(e=t(e)),await super.setAnswerSDP(e)}}let NS=1,LS=1;class PS extends Mu{constructor(e,t){super(),this.startTime=Ma(),this.createTime=Ma(),this.readyToReconnect=!1,this._connectionState="disconnected",this.currentReconnectCount=0,this.ID=LS,LS+=1,this.joinInfo=e,this._userId=t,this.createPC()}get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this.emit(ty.CONNECTION_STATE_CHANGE,e,this._connectionState),this._connectionState=e)}get connectionId(){var e,t;return Je(e=Je(t="".concat(this.joinInfo.clientId,"-")).call(t,this.type?this.type:"sub(".concat(this._userId,")"),"-")).call(e,this.ID)}getUserId(){return this._userId}startUploadStats(){this.statsUploadInterval=window.setInterval(()=>{const e=this.pc.getStats();this.uploadStats(e,this.lastUploadPCStats),this.lastUploadPCStats=e},3e3),this.statsUploadSlowInterval=window.setInterval(()=>{const e=this.pc.getStats();this.uploadSlowStats(e)},6e4),this.relatedStatsUploadInterval=window.setInterval(()=>{const e=this.pc.getStats();this.uploadRelatedStats(e,this.lastRelatedPcStats),this.lastRelatedPcStats=e},1e3)}stopUploadStats(){this.statsUploadInterval&&window.clearInterval(this.statsUploadInterval),this.relatedStatsUploadInterval&&window.clearInterval(this.relatedStatsUploadInterval),this.statsUploadInterval=void 0,this.relatedStatsUploadInterval=void 0}createWaitConnectionConnectedPromise(){return new fo((e,t)=>{"disconnected"===this.connectionState?t():"connected"===this.connectionState?e():this.once(ty.CONNECTION_STATE_CHANGE,i=>{"connected"===i?e():t()})})}async reconnectPC(e){if(this.readyToReconnect=!1,e&&this.onPCDisconnected(e),this.currentReconnectCount>1/0)throw Rc.debug("[".concat(this.connectionId,"] cannot reconnect pc")),e||new pl(hy.UNEXPECTED_ERROR);if(this.stopUploadStats(),Rc.debug("[".concat(this.connectionId,"] start reconnect pc")),this.connectionState="connecting",this.currentReconnectCount+=1,await this.closePC())return Rc.debug("[".concat(this.connectionId,"] abort reconnect pc, wait ws")),void this.readyToReconnectPC();this.createPC(),await this.startP2PConnection(),this.currentReconnectCount=0}readyToReconnectPC(){this.stopUploadStats(),this.readyToReconnect=!0,this.pc.onICEConnectionStateChange=void 0,this.connectionState="connecting"}updateICEPromise(){this.removeAllListeners(ty.GATEWAY_P2P_LOST),this.icePromise=new fo((e,t)=>{let i=!0;this.pc.onICEConnectionStateChange=n=>{var r,o;Rc.info(Je(r=Je(o="[".concat(this.connectionId,"] ice-state: ")).call(o,this.type," p2p ")).call(r,n)),"connected"===n&&e(),"failed"!==n&&"closed"!==n||(i&&this.emit(ty.P2P_LOST),i=!1,this.reconnectPC(new pl(hy.ICE_FAILED)).catch(e=>{t(e)}))},this.pc.onConnectionStateChange=e=>{var n,r;Rc.info(Je(n=Je(r="[".concat(this.connectionId,"] connection-state: ")).call(r,this.type," p2p ")).call(n,e)),"failed"!==e&&"closed"!==e||(i&&this.emit(ty.P2P_LOST),i=!1,this.reconnectPC(new pl(hy.PC_CLOSED)).catch(e=>{t(e)}))},this.removeAllListeners(ty.GATEWAY_P2P_LOST),this.once(ty.GATEWAY_P2P_LOST,e=>{var n;if(this.pc.ID.toString()===e.toString()){if(Rc.info(Je(n="[".concat(this.connectionId,"] ")).call(n,this.type," p2p gateway lost")),i&&this.emit(ty.P2P_LOST),i=!1,this.pc.allCandidateReceived&&0===this.pc.localCandidateCount)return this.disconnectedReason=new pl(hy.NO_ICE_CANDIDATE,"can not get candidate in this pc"),void this.closeP2PConnection(!0);this.reconnectPC(new pl(hy.GATEWAY_P2P_LOST)).catch(e=>{t(e)})}})})}}function DS(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function MS(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=DS(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=DS(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}var xS=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Un(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&hn(t,i,s),s},BS=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class US extends Dy{constructor(e,t,i,n,r){super(e,r),this.trackMediaType="video",this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1},this._enabled=!0,this.updateMediaStreamTrackResolution(),this._encoderConfig=t,this._scalabiltyMode=i,this._optimizationMode=n}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==OA.PLAYING)}play(e,t={}){const i=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:jA.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof e?e:"HTMLElement",t]});if(!(e instanceof HTMLElement)){const t=document.getElementById(e.toString());var n;t?e=t:(Rc.warning(Je(n="[".concat(this.getTrackId(),'] can not find "#')).call(n,e,'" element, use document.body')),e=document.body)}Rc.debug("[".concat(this.getTrackId(),"] start video playback"),ve(t));const r=MS({},this._getDefaultPlayerConfig(),{},t,{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(r):(this._player=new H_(r),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),i.onSuccess()}stop(){const e=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:jA.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return e.onSuccess();this._player.destroy(),this._player=void 0,Rc.debug("[".concat(this.getTrackId(),"] stop video playback")),e.onSuccess()}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e);const i=await this._enabledMutex.lock();if(!e){this._originMediaStreamTrack.enabled=!1;try{await Mp(this,my.NEED_REMOVE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),i(),e}return t||(this._enabled=!1),Rc.info("[".concat(this.getTrackId(),"] setEnabled to false success")),i()}this._originMediaStreamTrack.enabled=!0;try{await Mp(this,my.NEED_ADD_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),i(),e}Rc.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0),i()}async setMuted(e){var t;if(e!==this._muted){if(this.stateCheck("muted",e),this._muted=e,ma().name===RA.FIREFOX)return Rc.debug("[".concat(this.getTrackId(),"] firefox set mute fallback to set enabled")),void await this.setEnabled(!e,!0);this._mediaStreamTrack.enabled=!e,Rc.debug(Je(t="[".concat(this.getTrackId(),"] start set muted: ")).call(t,e)),await Mp(this,my.SET_VIDEO_TRACK_MUTED,{track:this,muted:e})}}getStats(){Hp(()=>{Rc.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning");const e=xp(this,my.GET_STATS);return e||MS({},ry)}async setBeautyEffect(e,t={}){const i=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:jA.LOCAL_VIDEO_TRACK_BEAUTY,options:[this.getTrackId(),e,t]});if(e||this._videoBeautyProcessor){if(Aa()===IA.IOS||Aa()===IA.ANDROID){const e=new pl(ll.INVALID_OPERATION,"can not enable beauty effect on mobile device");throw i.onError(e),e}if(!this._enabled&&e){const e=new pl(ll.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled");throw i.onError(e),e}Rc.info("[".concat(this.getTrackId(),"] start setBeautyEffect"),e,ve(t));try{this._videoBeautyProcessor?await this._videoBeautyProcessor.setBeautyEffectOptions(e,t):(this._videoBeautyProcessor=new pv,this._videoBeautyProcessor.onOverload=()=>{Vp(()=>this.emit(vy.BEAUTY_EFFECT_OVERLOAD))},await this._videoBeautyProcessor.setBeautyEffectOptions(e,t),await this._registerTrackProcessor(this._videoBeautyProcessor))}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setBeautyEffect error"),e.toString()),i.onError(e),e}Rc.info("[".concat(this.getTrackId(),"] setBeautyEffect success")),i.onSuccess()}}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}clone(e,t,i,n){const r=this._mediaStreamTrack.clone();return new US(r,e,t,i,n)}async setBitrateLimit(e){var t;if(Rc.debug(Je(t="[".concat(this.getTrackId(),"] set bitrate limit, ")).call(t,ve(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await Mp(this,my.NEED_RESET_REMOTE_SDP)}catch(e){return e.throw()}}}async setOptimizationMode(e){var t;if("motion"===e||"detail"===e||"balanced"===e){try{this._optimizationMode=e,await Mp(this,my.SET_OPTIMIZATION_MODE,e)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.toString()),e}Rc.info(Je(t="[".concat(this.getTrackId(),"] set optimization mode success (")).call(t,e,")"))}else Rc.error(ll.INVALID_PARAMS,"optimization mode must be motion, detail or balanced")}setScalabiltyMode(e){var t;if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return Rc.error(ll.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=e,Rc.info(Je(t="[".concat(this.getTrackId(),"] set scalability mode success (")).call(t,e,")"))}updateMediaStreamTrackResolution(){Lp(this._originMediaStreamTrack).then(([e,t])=>{this._videoHeight=t,this._videoWidth=e}).catch(Np)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async renewMediaStreamTrack(){}}xS([My(),BS("design:type",Function),BS("design:paramtypes",[Object,Object]),BS("design:returntype",void 0)],US.prototype,"play",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[Boolean,Boolean]),BS("design:returntype",fo)],US.prototype,"setEnabled",null),xS([My(),wy({report:Oy}),BS("design:type",Function),BS("design:paramtypes",[Boolean]),BS("design:returntype",fo)],US.prototype,"setMuted",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[]),BS("design:returntype",Object)],US.prototype,"getStats",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[Boolean,Object]),BS("design:returntype",fo)],US.prototype,"setBeautyEffect",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[]),BS("design:returntype",ImageData)],US.prototype,"getCurrentFrameData",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[Object]),BS("design:returntype",fo)],US.prototype,"setBitrateLimit",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[String]),BS("design:returntype",fo)],US.prototype,"setOptimizationMode",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[Object]),BS("design:returntype",void 0)],US.prototype,"setScalabiltyMode",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[]),BS("design:returntype",void 0)],US.prototype,"updateMediaStreamTrackResolution",null);class FS extends US{constructor(e,t,i,n,r,o){super(e,t.encoderConfig?Mc(t.encoderConfig):{},n,r,o),this._enabled=!0,this._deviceName="default",this.tryResumeVideoForIOS15WeChat=async()=>{wa()&&La()&&this._mediaStreamTrack.muted&&this._enabled&&!this._isClosed&&(Rc.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.setEnabled(!1),await this.setEnabled(!0))},this._config=t,this._constraints=i,this._deviceName=e.label,this._config.encoderConfig&&(this._encoderConfig=Mc(this._config.encoderConfig)),ph.on(uh.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}async setDevice(e){var t;const i=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CAM_VIDEO_TRACK_SET_DEVICE,options:[this.getTrackId(),e]});if(Rc.info(Je(t="[".concat(this.getTrackId(),"] set device to ")).call(t,e)),this._enabled)try{const t=await Ph.getDeviceById(e),i={};i.video=MS({},this._constraints),i.video.deviceId={exact:e},i.video.facingMode=void 0,this._originMediaStreamTrack.stop();let n=null;try{n=await Oh(i,this.getTrackId())}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),n=await Oh({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw i.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await Ph.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw i.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}Rc.info("[".concat(this.getTrackId(),"] setDevice success")),i.onSuccess()}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e);const i=await this._enabledMutex.lock();if(!e){this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),t||(this._enabled=!1);try{await Mp(this,my.NEED_REMOVE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),i(),e}return Rc.info("[".concat(this.getTrackId(),"] setEnabled to false success")),i()}const n=MS({},this._constraints),r=Ph.searchDeviceIdByName(this._deviceName);r&&!n.deviceId&&(n.deviceId={exact:r});try{const e=await Oh({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),await Mp(this,my.NEED_ADD_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.toString()),i(),e}this.updateMediaStreamTrackResolution(),Rc.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0),i()}async setEncoderConfiguration(e,t){const i=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[this.getTrackId(),e]});if(!this._enabled){const e=new pl(ll.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");throw i.onError(e),e}e=Mc(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin);const n=jp(this._config);n.encoderConfig=e;const r=fv(n);Rc.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),ve(e),ve(r));try{await this._originMediaStreamTrack.applyConstraints(r),this.updateMediaStreamTrackResolution()}catch(e){const t=new pl(ll.UNEXPECTED_ERROR,e.toString());throw Rc.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),i.onError(t),t}this._config=n,this._constraints=r,this._encoderConfig=e;try{await Mp(this,my.NEED_RENEGOTIATE)}catch(e){return i.onError(e),e.throw()}i.onSuccess()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Ra()||Na())&&this._enabled&&!this._isClosed&&ph.duringInterruption){const e=async()=>{ph.off(uh.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Rc.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};ph.on(uh.IOS_INTERRUPTION_END,e)}else Rc.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(vy.TRACK_ENDED)}async renewMediaStreamTrack(){const e=MS({},this._constraints),t=Ph.searchDeviceIdByName(this._deviceName);t&&!e.deviceId&&(e.deviceId={exact:t});const i=await Oh({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}close(){super.close(),ph.off(uh.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}}function VS(e,t){const i=e.match(/a=rtpmap:(\d+) opus/);if(!i||!i[0]||!i[1])return e;const n=i[1],r=e.match("a=fmtp:".concat(n,".*\r\n"));if(!r||!r[0])return e;let o="a=fmtp:".concat(n," minptime=10;useinbandfec=1;");var s;return t.bitrate&&!Ia()&&(o+="maxaveragebitrate=".concat(Math.floor(1e3*t.bitrate),";")),t.sampleRate&&(o+=Je(s="maxplaybackrate=".concat(t.sampleRate,";sprop-maxcapturerate=")).call(s,t.sampleRate,";")),t.stereo&&(o+="stereo=1;sprop-stereo-1;"),o+="\r\n",e.replace(r[0],o)}function jS(e){return e.replace("minptime=10","minptime=10;stereo=1;sprop-stereo=1")}function GS(e,t,i){let n=!1;switch(t){case"h264":return e;case"vp8":if(!jc("SIMULCAST"))return e;n=!0,i&&(i.numSpatialLayers=2);case"vp9":n=!0;case"av1":n=!0}if(n){var r;const t=Ko(r=RegExp.prototype.test).call(r,/^([a-z])=(.*)/),n=e.split("m=");let v,E,A=null,y=null,S=null,C=[],b=[],T=[],I=[],R=null,w=null,O=0;const k=[],N=[];for(let e=0;e<n.length;++e)if(A=n[e].match(/a=msid-semantic:/),A){A=n[e];break}for(let e=0;e<n.length;++e)if(y=n[e].match(/audio /),y){v=e,y="m="+n[e];break}for(let e=0;e<n.length;++e)if(S=n[e].match(/video /),S){E=e,S="m="+n[e];break}var o,s;if(A&&(C=Gn(o=A.split(/(\r\n|\r|\n)/)).call(o,t)),C.length>0&&(I=Je(I).call(I,C)),y&&(b=Gn(s=y.split(/(\r\n|\r|\n)/)).call(s,t)),!S)return e;{var a;T=Gn(a=S.split(/(\r\n|\r|\n)/)).call(a,t);for(let e=0;e<T.length;++e)if(null===R&&(R=T[e].match(/cname:/),null!==R)){R="cname:"+T[e].split("cname:")[1];break}for(let e=0;e<T.length;++e)if(null===w&&(w=T[e].match(/a=msid:/),null!==w&&(w="msid:"+T[e].split(":")[1])),T[e].match(/a=ssrc-group:FID/)){const t=T[e].split(" ");O=e,k.push(Number(t[1])),t[2]&&N.push(Number(t[2])),T.length=O;break}for(let e=1;e<i.numSpatialLayers;++e)k.push(k[0]+e),N.length>0&&N.push(N[0]+e);let n="a=ssrc-group:SIM ";const r="a=ssrc-group:FID ";for(let e=0;e<k.length;++e)n=Je(n).call(n,String(k[e])),e<k.length-1&&(n=Je(n).call(n," "));T.push(n);for(let e=0;e<i.numSpatialLayers;++e){var c,l;const t=Je(c=Je(l=Je(r).call(r,String(k[e]))).call(l," ")).call(c,String(N[e]));T.push(t)}for(let t=0;t<i.numSpatialLayers;++t){var u,d,h,p;if(null===R||null===w)return e;const i=Je(u=Je(d="a=ssrc:".concat(String(k[t]))).call(d," ")).call(u,R),n=Je(h=Je(p="a=ssrc:".concat(String(k[t]))).call(p," ")).call(h,w);T.push(i),T.push(n)}for(let t=0;t<i.numSpatialLayers;++t){var f,g,m,_;if(null===R||null===w)return e;const i=Je(f=Je(g="a=ssrc:".concat(String(N[t]))).call(g," ")).call(f,R),n=Je(m=Je(_="a=ssrc:".concat(String(N[t]))).call(_," ")).call(m,w);T.push(i),T.push(n)}}v&&E&&v>E?(I=Je(I).call(I,T),I=Je(I).call(I,b)):(I=Je(I).call(I,b),I=Je(I).call(I,T)),e=I.join("\r\n")+"\r\n"}return e}xS([My(),BS("design:type",Function),BS("design:paramtypes",[String]),BS("design:returntype",fo)],FS.prototype,"setDevice",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[Boolean,Boolean]),BS("design:returntype",fo)],FS.prototype,"setEnabled",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[Object,Boolean]),BS("design:returntype",fo)],FS.prototype,"setEncoderConfiguration",null);const HS=(e,t)=>{let i=null;if("h264"===t?i=e.match(/a=rtpmap:(\d+) H264.*\r\n/)||e.match(/a=rtpmap:(\d+) H264.*\n/):"vp8"===t?i=e.match(/a=rtpmap:(\d+) VP8.*\r\n/)||e.match(/a=rtpmap:(\d+) VP8.*\n/):"vp9"===t?i=e.match(/a=rtpmap:(\d+) VP9.*\r\n/)||e.match(/a=rtpmap:(\d+) VP9.*\n/):"av1"===t&&(i=e.match(/a=rtpmap:(\d+) AV1.*\r\n/)||e.match(/a=rtpmap:(\d+) AV1.*\n/)),i&&i[1])return i[1]};function QS(e,t){const i=(e,t)=>{const r=HS(e,t);return r?i(n(e,r),t):e},n=(e,t)=>{var i,n;const r=Ko(i=RegExp.prototype.test).call(i,/^([a-z])=(.*)/),o=["a=rtpmap:".concat(t),"a=rtcp-fb:".concat(t),"a=fmtp:".concat(t)],s=Gn(n=e.split(/(\r\n|\r|\n)/)).call(n,r),a=[];Ji(s).call(s,(e,t)=>{Ji(o).call(o,i=>{ns(e).call(e,i)&&a.push(t)})});const c=Lv(s).call(s,e=>ns(e).call(e,"apt=".concat(t)));let l;if(c){a.push(c,c-1);const e=s[c-1].match(/a=rtpmap:(\d+) rtx.*/);l=e&&e[1]}Ji(a).call(a,e=>{s[e]=""});const u=Lv(s).call(s,e=>ns(e).call(e,"m=video"));return s[u]=s[u].replace(" ".concat(t),""),l&&(s[u]=s[u].replace(" ".concat(l),"")),Gn(s).call(s,e=>!!e).join("\r\n")+"\r\n"};return Ji(t).call(t,t=>{e=i(e,t)}),e}function WS(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function qS(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=WS(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=WS(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}class $S extends PS{constructor(e,t,i,n){super(t,t.stringUid||t.uid),this.suspendTracks=[],this.type="pub",this.detecting=!1,this._waitingSuccessResponse=!1,this.handleMuteVideoTrack=({track:e,muted:t},i,n)=>{this.setVideoTrackMuteState(t).then(i).catch(n)},this.handleMuteAudioTrack=({track:e,muted:t},i,n)=>{this.setAudioTrackMuteState(t,e).then(i).catch(n)},this.renegotiateWithGateway=async()=>(Rc.debug("[pc-".concat(this.pc.ID,"] renegotiate start")),new fo(async(e,t)=>{this.connectionState="connecting";const i=n=>{"connected"===n&&(this.off(ty.CONNECTION_STATE_CHANGE,i),e()),"disconnected"===n&&(this.off(ty.CONNECTION_STATE_CHANGE,i),t(new pl(hy.OPERATION_ABORTED,"renegotiate abort")))};this.on(ty.CONNECTION_STATE_CHANGE,i),Ia()&&jc("SIMULCAST")&&this.videoTrack&&this.videoTrack._scalabiltyMode&&await this.addSimulcast4Firefox(this.videoTrack._scalabiltyMode);let n=await this.pc.createOfferSDP();if(this.audioTrack&&this.audioTrack._encoderConfig&&(n=VS(n,this.audioTrack._encoderConfig)),this.videoTrack&&this.videoTrack._scalabiltyMode&&("vp9"!==this.codec&&"vp8"!==this.codec?(this.videoTrack._scalabiltyMode.numSpatialLayers=1,this.videoTrack._scalabiltyMode.numTemporalLayers=1):(this.videoTrack._scalabiltyMode.numSpatialLayers>1||this.videoTrack._scalabiltyMode.numTemporalLayers>1)&&(n=GS(n,this.codec,this.videoTrack._scalabiltyMode)),Rc.debug("renegoation spatial layers: ",this.videoTrack._scalabiltyMode.numSpatialLayers)),await this.pc.setOfferSDP(n),this.audioTrack instanceof Hy){const e={videoActive:this.videoTrack&&!this.videoTrack.muted,audioActive:this.audioTrack&&this.audioTrack.isActive};this.pc.onOfferSettled(e)}const r=await Dp(this,ty.NEED_RENEGOTIATE,n);this.videoTrack&&!Ia()&&jc("SIMULCAST")&&this.videoTrack._scalabiltyMode&&this.setSimulcastVideoRtpEncodingParameters(this.videoTrack._scalabiltyMode);const o=function(e,t){var i,n,r;const o=Ko(i=RegExp.prototype.test).call(i,/^([a-z])=(.*)/),s=Gn(n=e.split(/(\r\n|\r|\n)/)).call(n,o),a=Gn(r=t.split(/(\r\n|\r|\n)/)).call(r,o);let c=null;const l=new Mi;return Ji(s).call(s,e=>{const t=e.match(/m=(audio|video)/);if(t&&t[1])return void(c=t[1]);if(!c)return;const i=e.match(/\=(sendrecv|recvonly|sendonly|inactive)/);i&&i[1]&&l.set(c,i[1])}),c=null,vo(a).call(a,e=>{const t=e.match(/m=(audio|video)/);if(t&&t[1])return c=t[1],e;if(!c)return e;const i=e.match(/\=(sendrecv|recvonly|sendonly|inactive)/);if(i&&i[1]){const t=l.get(c);if(t&&t!==i[1])return e.replace(i[1],t)}return e}).join("\r\n")+"\r\n"}(n,this.updateAnswerSDP(r.sdp));await this.pc.setAnswerSDP(o),Rc.debug("[pc-".concat(this.pc.ID,"] renegotiate success")),this.connectionState="connected"})),this.handleStreamRenegotiate=(e,t)=>{"connected"===this.connectionState?this.renegotiateWithGateway().then(e).catch(t):e()},this.handleReplaceTrack=(e,t,i)=>{if(this.audioTrack instanceof Hy&&"audio"===e.kind)return t();this.pc.replaceTrack(e).then(e=>e?this.renegotiateWithGateway():fo.resolve()).then(t).catch(i)},this.handleCloseAudioTrack=e=>{},this.handleCloseVideoTrack=()=>{this.lowStreamConnection&&this.lowStreamConnection.videoTrack&&this.lowStreamConnection.videoTrack.close()},this.handleGetSessionID=e=>{e(this.joinInfo.sid)},this.handleGetLocalVideoStats=e=>{e(this.statsCollector.getLocalVideoTrackStats(this.connectionId))},this.handleGetLocalAudioStats=e=>{e(this.statsCollector.getLocalAudioTrackStats(this.connectionId))},this.handleSetOptimizationMode=(e,t,i)=>{this.videoTrack&&this.setRtpSenderParametersByTrackConfig(this.videoTrack).then(t).catch(i)},this.isLowStreamConnection=!!n,this.codec=i,this.statsCollector=e,this.statsCollector.addLocalConnection(this)}getAllTracks(){let e=[];return this.videoTrack&&e.push(this.videoTrack),this.audioTrack&&this.audioTrack instanceof Hy?e=Je(e).call(e,this.audioTrack.trackList):this.audioTrack&&e.push(this.audioTrack),e.push(...this.suspendTracks),e}async addTracks(e){const t=Fu();if("connecting"===this.connectionState)try{return await this.createWaitConnectionConnectedPromise(),await this.addTracks(e)}catch(e){throw new pl(hy.OPERATION_ABORTED,"publish abort")}let i=!1;const n=this.getAllTracks();e=Fp(e=Gn(e).call(e,e=>-1===Lo(n).call(n,e)));for(let r=0;r<e.length;r+=1){const n=e[r];if(!(n instanceof Dy))return new pl(hy.INVALID_LOCAL_TRACK).throw();if(n instanceof US&&this.disabledVideoTrack){if(this.disabledVideoTrack!==n)return new pl(hy.EXIST_DISABLED_VIDEO_TRACK).throw();this.disabledVideoTrack=void 0}if(n instanceof US&&this.videoTrack)return new pl(hy.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw();if(n instanceof Vy){if(this.audioTrack&&this.audioTrack._bypassWebAudio)throw Rc.error("One of the audio track was created with config bypassWebAudio set to true, there is no way to publish multiple audio tracks."),new pl(hy.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS);if(this.audioTrack instanceof Hy)0===this.audioTrack.trackList.length&&await this.pc.setAudioRtpEncodingParameters({active:!0}),this.audioTrack.addAudioTrack(n);else if(t.webAudioMediaStreamDest)if(n._bypassWebAudio){if(this.audioTrack)throw Rc.error("Can not publish another audio track with bypassWebAudio set to true."),new pl(hy.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS);Rc.debug("[".concat(this.connectionId,"] audio track doesn't not pass through WebAudio, use original audio track to publish")),i=await this.addTrackWithPC(n)}else{const e=new Hy;n.muted?this.suspendTracks.push(n):e.addAudioTrack(n),i=await this.addTrackWithPC(e)}else Rc.debug("[".concat(this.connectionId,"] your browser does not support mixing track, use original audio track to publish")),i=await this.addTrackWithPC(n)}else if(n instanceof US&&this.isLowStreamConnection){const e=qS({},{width:160,height:120,framerate:15,bitrate:50},{},this.lowStreamParameter);let r;if(t.supportDualStreamEncoding)Rc.debug("[".concat(this.connectionId,"] creating low stream using rtp encoding.")),this.lowStreamEncoding=iS(e,n),r=n.clone({bitrateMax:e.bitrate,bitrateMin:e.bitrate});else{Rc.debug("[".concat(this.connectionId,"] creating low stream using canvas."));const t=jE(n,e);r=new US(t,{bitrateMax:e.bitrate,bitrateMin:e.bitrate})}r._hints.push(_y.LOW_STREAM),i=await this.addTrackWithPC(r),this.bindTrackEvents(r)}else this.detecting=!0,Fa(()=>{this.detecting=!1},8e3),i=await this.addTrackWithPC(n)}await this.updateControlMessage(),i&&await this.renegotiateWithGateway(),Ji(e).call(e,e=>this.bindTrackEvents(e))}async removeTracks(e,t){const i=this.getAllTracks();e=Fp(e=Gn(e).call(e,e=>-1!==Lo(i).call(i,e)||e===this.disabledVideoTrack));const n=[];for(let o=0;o<e.length;o+=1){const i=e[o];if(this.unbindTrackEvents(i),this.audioTrack instanceof Hy&&i instanceof Vy)this.audioTrack.removeAudioTrack(i),Up(this.suspendTracks,i),0===this.audioTrack.trackList.length&&(n.push(this.audioTrack),this.audioTrack=void 0);else if(i instanceof Vy)n.push(i),this.audioTrack=void 0;else if(i instanceof US){if(t){if(this.disabledVideoTrack===i)return void(this.disabledVideoTrack=void 0)}else this.disabledVideoTrack=this.videoTrack;n.push(i),this.isLowStreamConnection&&i.close(),this.videoTrack=void 0}}if(this.videoTrack||this.audioTrack){if(0===n.length)return;if("connecting"===this.connectionState)try{await this.createWaitConnectionConnectedPromise()}catch(e){return}for(const e of n){var r;Rc.debug(Je(r="[".concat(this.connectionId,"] remove ")).call(r,e.trackMediaType," from pc")),await this.pc.removeTrack(e._mediaStreamTrack);const t=ma();"Safari"===t.name&&"11"===t.version&&await e.renewMediaStreamTrack()}await this.renegotiateWithGateway()}else await this.closeP2PConnection()}async updateControlMessage(){this.audioTrack instanceof Hy&&"connected"===this.connectionState&&(this.audioTrack&&await Dp(this,ty.NEED_CONTROL,{type:"audio",muted:!this.audioTrack.isActive}),this.videoTrack&&await Dp(this,ty.NEED_CONTROL,{type:"video",muted:this.videoTrack.muted}))}async setSimulcastVideoRtpEncodingParameters(e){const t=this.pc.getSender("video");if(!t)throw new pl(hy.LOW_STREAM_ENCODING_ERROR,"Low stream has no video sender.");const i=t.getParameters();if(!i.encodings||!i.encodings[0])throw new pl(hy.LOW_STREAM_ENCODING_ERROR,"Low stream RtpEncodingParameters is empty.");if(this.videoTrack&&this.videoTrack._encoderConfig&&this.videoTrack._encoderConfig.bitrateMax&&this.videoTrack._encoderConfig.bitrateMax>200&&e.numSpatialLayers>1){const e={high:1e3*(this.videoTrack._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:e.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:e.medium,scaleResolutionDownBy:4}]}await t.setParameters(i)}startP2PConnection(){return new fo(async(e,t)=>{if(!this.audioTrack&&!this.videoTrack)return t(new pl(hy.UNEXPECTED_ERROR,"no track to publish"));const i=n=>{if("connected"===n&&(this.off(ty.CONNECTION_STATE_CHANGE,i),e()),"disconnected"===n){if(this.off(ty.CONNECTION_STATE_CHANGE,i),this.disconnectedReason)return t(this.disconnectedReason);t(new pl(hy.OPERATION_ABORTED,"publish abort"))}};this.on(ty.CONNECTION_STATE_CHANGE,i),this.disconnectedReason=void 0,this.connectionState="connecting",this._waitingSuccessResponse=!0,this.startTime=Ma();try{var n;!this.pc.audioTrack&&this.audioTrack&&await this.pc.addTrack(this.audioTrack._mediaStreamTrack),!this.pc.videoTrack&&this.videoTrack&&await this.pc.addTrack(this.videoTrack._mediaStreamTrack),Ia()&&jc("SIMULCAST")&&this.videoTrack&&this.videoTrack._scalabiltyMode&&await this.addSimulcast4Firefox(this.videoTrack._scalabiltyMode);let e=await this.pc.createOfferSDP();jc("REMOVE_NEW_CODECS")&&(e="vp9"===this.codec?QS(e,["av1"]):"av1"===this.codec?QS(e,["vp9"]):QS(e,["vp9","av1"]));const t=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1X/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),t}(e);if(this.videoTrack&&!ns(n=t.video).call(n,this.codec.toUpperCase())&&Rc.warning("current codec is not supported, support list: ".concat(t.video.join(","))),this.audioTrack&&this.audioTrack._encoderConfig&&(e=VS(e,this.audioTrack._encoderConfig)),this.videoTrack&&!Ia()&&this.videoTrack._scalabiltyMode&&("vp9"!==this.codec&&"vp8"!==this.codec?(this.videoTrack._scalabiltyMode.numSpatialLayers=1,this.videoTrack._scalabiltyMode.numTemporalLayers=1):(this.videoTrack._scalabiltyMode.numSpatialLayers>1||this.videoTrack._scalabiltyMode.numTemporalLayers>1)&&(e=GS(e,this.codec,this.videoTrack._scalabiltyMode)),Rc.debug("spatial layers: ",this.videoTrack._scalabiltyMode.numSpatialLayers)),await this.pc.setOfferSDP(e),this.audioTrack instanceof Hy){const e={videoActive:this.videoTrack&&!this.videoTrack.muted,audioActive:this.audioTrack&&this.audioTrack.isActive};this.pc.onOfferSettled(e)}this.videoTrack&&this.setRtpSenderParametersByTrackConfig(this.videoTrack),Rc.debug("[".concat(this.connectionId,"] create and set offer success"));const i={messageType:"OFFER",sdp:e,offererSessionId:104,retry:!0};Fu().supportDualStreamEncoding&&this.isLowStreamConnection&&this.lowStreamEncoding&&this.videoTrack&&await this.setLowStreamEncoding(this.lowStreamEncoding,this.videoTrack),this.videoTrack&&!Ia()&&jc("SIMULCAST")&&this.videoTrack._scalabiltyMode&&this.setSimulcastVideoRtpEncodingParameters(this.videoTrack._scalabiltyMode);const r=await Dp(this,ty.NEED_ANSWER,i),o=this.updateAnswerSDP(r.sdp);await this.pc.setAnswerSDP(o),Rc.debug("[".concat(this.connectionId,"] set answer success")),await this.icePromise,this.connectionState="connected",this.startUploadStats()}catch(e){this.off(ty.CONNECTION_STATE_CHANGE,i),this.connectionState="disconnected",this.reportPublishEvent(!1,e.code),Rc.error("[".concat(this.connectionId,"] connection error"),e.toString()),t(e)}})}reportPublishEvent(e,t,i){var n;this._waitingSuccessResponse=!1,Oy.publish(this.joinInfo.sid,{lts:this.startTime,succ:e,ec:t,audioName:this.audioTrack&&(this.audioTrack instanceof Hy?this.audioTrack.getSubTrackLabels().join(","):this.audioTrack.getTrackLabel()),videoName:this.videoTrack&&this.videoTrack.getTrackLabel(),screenshare:!(!this.videoTrack||-1===Lo(n=this.videoTrack._hints).call(n,_y.SCREEN_TRACK)),audio:!!this.audioTrack,video:!!this.videoTrack,p2pid:this.pc.ID,publishRequestid:this.ID,extend:i})}async closeP2PConnection(e){const t=this.getAllTracks();var i;Ji(t).call(t,e=>{this.unbindTrackEvents(e)}),this.isLowStreamConnection&&this.videoTrack&&this.videoTrack.close(),this.videoTrack=void 0,this.audioTrack instanceof Hy&&(Ji(i=this.audioTrack.trackList).call(i,e=>{this.audioTrack.removeAudioTrack(e)}),this.audioTrack.close()),this.audioTrack=void 0,this.stopUploadStats(),this.statsCollector.removeConnection(this.connectionId),await this.closePC(e),this.connectionState="disconnected",this.removeAllListeners()}getNetworkQuality(){var e;const t=this.pc.getStats();if(!t.videoSend[0]&&!t.audioSend[0])return 1;const i=xp(this,ty.NEED_SIGNAL_RTT),n=t.videoSend[0]?t.videoSend[0].rttMs:void 0,r=t.audioSend[0]?t.audioSend[0].rttMs:void 0,o=n&&r?(n+r)/2:n||r,s=(o&&i?(o+i)/2:o||i)||0,a=100*t.sendPacketLossRate*.7/50+.3*s/1500,c=a<.17?1:a<.36?2:a<.59?3:a<.1?4:5;if(this.videoTrack&&this.videoTrack._encoderConfig&&-1===Lo(e=this.videoTrack._hints).call(e,_y.SCREEN_TRACK)){const e=this.videoTrack._encoderConfig.bitrateMax,i=t.bitrate.actualEncoded;if(e&&i){const t=(1e3*e-i)/(1e3*e);return zc[t<.15?0:t<.3?1:t<.45?2:t<.6?3:4][c]}}return c}handleUpdateBitrateLimit(e){this.videoTrack&&this.videoTrack.setBitrateLimit(e)}async setAudioTrackMuteState(e,t){if(!(this.audioTrack instanceof Hy))return void Rc.debug("[".concat(this.connectionId,"] set audio mute in unsupported environment"));const i=this.audioTrack;try{var n;if(e)i.removeAudioTrack(t),0===i.trackList.length&&(Rc.debug(Je(n="[".concat(this.connectionId,"] set audio encoding active, id: ")).call(n,t.getTrackId(),", state: ",!1)),await this.pc.setAudioRtpEncodingParameters({active:!1})),this.suspendTracks.push(t);else await this.pc.setAudioRtpEncodingParameters({active:!0}),i.addAudioTrack(t),Up(this.suspendTracks,t)}catch(e){var r;Rc.warning(Je(r="[".concat(this.connectionId,"] set audio muted error ")).call(r,e,", fallback to set enabled"))}await Dp(this,ty.NEED_CONTROL,{type:"audio",muted:!(!this.audioTrack||this.audioTrack.isActive)})}async setVideoTrackMuteState(e){const t=!e;let i=!1;if(ma().name===RA.FIREFOX)i=!0;else try{var n,r;Rc.debug(Je(n=Je(r="[".concat(this.connectionId,"] set video encoding active, id: ")).call(r,this.videoTrack&&this.videoTrack.getTrackId(),", state: ")).call(n,t)),await this.pc.setVideoRtpEncodingParameters({active:t})}catch(e){var o;Rc.warning(Je(o="[".concat(this.connectionId,"] set video encoding active error ")).call(o,e,", fallback to set enabled")),i=!0}var s,a;i&&this.videoTrack&&(Rc.debug(Je(s=Je(a="[".concat(this.connectionId,"] set video encoding active fallback to enabled on firefox, type: ")).call(a,this.videoTrack&&this.videoTrack.getTrackId(),", state: ")).call(s,t)),this.videoTrack.getMediaStreamTrack().enabled=t),this.lowStreamConnection&&this.lowStreamConnection.setVideoTrackMuteState(e),!this.isLowStreamConnection&&await Dp(this,ty.NEED_CONTROL,{type:"video",muted:e})}uploadStats(e,t){const i=this.audioTrack?function(e,t){const i=e.audioSend[0];if(!i)return null;const n={id:Op(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:i.ssrc.toString()};return n.A_astd=t._originMediaStreamTrack.enabled&&t._mediaStreamTrack.enabled?"0":"1",i.inputLevel?n.A_ail=Math.round(100*i.inputLevel).toString():n.A_ail=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),n.A_apil=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),n}(e,this.audioTrack):void 0,n=this.videoTrack?function(e,t){const i=e.videoSend[0];if(!i)return null;const n={id:Op(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:i.ssrc.toString()};switch(n.A_vstd=t._originMediaStreamTrack&&!t._originMediaStreamTrack.enabled||!t._mediaStreamTrack.enabled?"1":"0",i.sentFrame&&(n.A_fhs=i.sentFrame.height.toString(),n.A_frs=i.sentFrame.frameRate.toString(),n.A_fws=i.sentFrame.width.toString()),i.adaptionChangeReason){case"none":n.A_ac="0";break;case"cpu":n.A_ac="1";break;case"bandwidth":n.A_ac="2";break;case"other":n.A_ac="3"}return n.A_nr=i.nacksCount.toString(),i.avgEncodeMs&&(n.A_aem=i.avgEncodeMs.toFixed(0).toString()),n}(e,this.videoTrack):void 0,r=eS(e,t),o=function(e){const t={id:"bweforvideo",timestamp:new Date(e.timestamp).toISOString(),type:"VideoBwe"};return e.bitrate.retransmit&&(t.A_rb=e.bitrate.retransmit.toString()),e.bitrate.targetEncoded&&(t.A_teb=e.bitrate.targetEncoded.toString()),t.A_aeb=e.bitrate.actualEncoded.toString(),t.A_tb=e.bitrate.transmit.toString(),void 0!==e.sendBandwidth&&(t.A_asb=e.sendBandwidth.toString()),t}(e);i&&Vp(()=>this.emit(ty.NEED_UPLOAD,XA.PUBLISH_STATS,i)),n&&Vp(()=>this.emit(ty.NEED_UPLOAD,XA.PUBLISH_STATS,qS({},n,{},r))),o&&Vp(()=>this.emit(ty.NEED_UPLOAD,XA.PUBLISH_STATS,o))}uploadSlowStats(e){const t=eS(e);t&&Vp(()=>this.emit(ty.NEED_UPLOAD,XA.PUBLISH_STATS,t))}uploadRelatedStats(e){const t=function(e){const t=e.videoSend[0];return t?{mediaType:"video",isVideoMute:!1,frameRateInput:t.inputFrame&&t.inputFrame.frameRate.toString(),frameRateSent:t.sentFrame&&t.sentFrame.frameRate.toString(),googRtt:t.rttMs.toString()}:null}(e);t&&(t.isVideoMute=!(!this.videoTrack||!this.videoTrack.muted),Vp(()=>{this.emit(ty.NEED_UPLOAD,XA.PUBLISH_RELATED_STATS,t)}))}async addSimulcast4Firefox(e){if(Ia()&&this.videoTrack&&this.videoTrack._encoderConfig&&this.videoTrack._encoderConfig.bitrateMax&&this.videoTrack._encoderConfig.bitrateMax>200&&e.numSpatialLayers>1&&"vp8"===this.codec){const e=this.pc.getSender("video");if(e){const t=e.getParameters();Rc.debug("getParameters : ",t),t||Rc.error("[".concat(this.connectionId,"] get sender parameter error."));const i={high:1e3*(this.videoTrack._encoderConfig.bitrateMax-50),medium:5e4};t.encodings=[{rid:"m",active:!0,maxBitrate:i.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:i.high}],await e.setParameters(t),Rc.debug("setParameters : ",t)}}}bindTrackEvents(e){var t;e.addListener(my.NEED_RESET_REMOTE_SDP,Ko(t=this.handleResetRemoteSdp).call(t,this)),this.isLowStreamConnection||(e instanceof Vy?(e.addListener(my.GET_STATS,this.handleGetLocalAudioStats),e.addListener(my.NEED_CLOSE,this.handleCloseAudioTrack),e.addListener(my.SET_AUDIO_TRACK_MUTED,this.handleMuteAudioTrack)):e instanceof US&&(e.addListener(my.GET_STATS,this.handleGetLocalVideoStats),e.addListener(my.NEED_CLOSE,this.handleCloseVideoTrack),e.addListener(my.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),e.addListener(my.SET_VIDEO_TRACK_MUTED,this.handleMuteVideoTrack)),e.addListener(my.NEED_RENEGOTIATE,this.handleStreamRenegotiate),e.addListener(my.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(my.NEED_SESSION_ID,this.handleGetSessionID))}unbindTrackEvents(e){this.isLowStreamConnection||(e instanceof Vy?(e.off(my.GET_STATS,this.handleGetLocalAudioStats),e.off(my.NEED_CLOSE,this.handleCloseAudioTrack),e.off(my.SET_AUDIO_TRACK_MUTED,this.handleMuteAudioTrack)):e instanceof US&&(e.off(my.GET_STATS,this.handleGetLocalVideoStats),e.off(my.NEED_CLOSE,this.handleCloseVideoTrack),e.off(my.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),e.off(my.SET_VIDEO_TRACK_MUTED,this.handleMuteVideoTrack)),e.off(my.NEED_RENEGOTIATE,this.handleStreamRenegotiate),e.off(my.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(my.NEED_SESSION_ID,this.handleGetSessionID))}async addTrackWithPC(e){if("connecting"===this.connectionState)return new pl(hy.INVALID_OPERATION,"last publish operation has not finished").throw();const t=this.videoTrack;let i=!1;return this.audioTrack&&e instanceof Hy?(this.audioTrack=e,Rc.debug("[".concat(this.connectionId,"] replace pc audio track")),i=await this.pc.replaceTrack(e._mediaStreamTrack)):this.videoTrack&&e instanceof US?(this.videoTrack=e,Rc.debug("[".concat(this.connectionId,"] replace pc video track")),i=await this.pc.replaceTrack(e._mediaStreamTrack)):e instanceof Vy?(this.audioTrack=e,Rc.debug("[".concat(this.connectionId,"] add audio track to pc")),await this.pc.addTrack(e._mediaStreamTrack),i=!0):e instanceof US&&(this.videoTrack=e,Rc.debug("[".concat(this.connectionId,"] add video track to pc")),await this.pc.addTrack(e._mediaStreamTrack),i=!0),"connected"===this.connectionState&&this.videoTrack!==t&&this.videoTrack&&await this.setRtpSenderParametersByTrackConfig(this.videoTrack),"disconnected"!==this.connectionState&&i}handleResetRemoteSdp(){return new fo((e,t)=>{var i;Rc.info("[pc-".concat(this.pc.ID,"] start reset remote sdp"));const n=this.pc.getOfferSDP(),r=this.pc.getAnswerSDP();if(!r||!n)return e();const o=r.sdp;let s;this.videoTrack&&this.videoTrack._encoderConfig&&-1===Lo(i=this.videoTrack._hints).call(i,_y.SCREEN_TRACK)&&(s=function(e,t){var i,n;const r=t.bitrateMin;let o=t.bitrateMax;const s=Ko(i=RegExp.prototype.test).call(i,/^([a-z])=(.*)/),a=Gn(n=e.split(/(\r\n|\r|\n)/)).call(n,s);if(o){let e="AS";ma().name===ha.FIREFOX&&(o=1e3*(o>>>0),e="TIAS");const t=Lv(a).call(a,t=>ns(t).call(t,e));var c;t>0&&(a[t]=Je(c="b=".concat(e,":")).call(c,o))}if(r){const e=Lv(a).call(a,e=>ns(e).call(e,"x-google-min-bitrate"));e>0&&(a[e]=a[e].replace(/x-google-min-bitrate=(.*)/,"x-google-min-bitrate=".concat(r)))}return a.join("\r\n")+"\r\n"}(o,this.videoTrack._encoderConfig)),o!==s?this.pc.setOfferSDP(n.sdp).then(()=>{if(s)return this.pc.setAnswerSDP(s)}).then(e).catch(e=>{var i;Rc.error(Je(i="[pc-".concat(this.pc.ID,"] reset remote sdp error, ")).call(i,e)),t(e)}):Rc.debug("[pc-".concat(this.pc.ID,"] remote sdp have no not changed"))})}async setRtpSenderParametersByTrackConfig(e){if(!Fu().supportSetRtpSenderParameters)return void Rc.debug("[".concat(this.connectionId,"] do not support set pc rtp sender, skip"));const t={};let i="balanced";"motion"===e._optimizationMode?i="maintain-framerate":"detail"===e._optimizationMode&&(i="maintain-resolution"),Rc.debug("[".concat(this.connectionId,"] set pc rtp sender"),t,i),await this.pc.setRtpSenderParameters(t,i)}updateAnswerSDP(e){var t,i;return e=e.replace(/a=x-google-flag:conference\r\n/g,""),this.videoTrack&&Lo(t=this.videoTrack._hints).call(t,_y.SCREEN_TRACK),this.videoTrack&&this.videoTrack._encoderConfig&&-1===Lo(i=this.videoTrack._hints).call(i,_y.SCREEN_TRACK)&&(e=function(e,t,i){const n=Fu(),r=i.bitrateMin;let o=i.bitrateMax;const s=e.match(/m=video.*\r\n/)||e.match(/m=video.*\n/);if(s&&s.length>0&&n.supportMinBitrate&&r){const i=HS(e,t);if(i)if(jc("SIMULCAST")){var a,c;const t=o?.7*o:300;e=e.replace(s[0],Je(a=Je(c="".concat(s[0],"a=fmtp:")).call(c,i," x-google-start-bitrate=")).call(a,t,"\r\n"))}else{var l,u;e=e.replace(s[0],Je(l=Je(u="".concat(s[0],"a=fmtp:")).call(u,i," x-google-min-bitrate=")).call(l,r,"\r\n"))}}if(s&&s.length>0&&o){var d,h;let t="AS";ma().name===ha.FIREFOX&&(o=1e3*(o>>>0),t="TIAS"),e=e.replace(s[0],Je(d=Je(h="".concat(s[0],"b=")).call(h,t,":")).call(d,o,"\r\n"))}return e}(e,this.codec,this.videoTrack._encoderConfig)),this.audioTrack&&this.audioTrack._encoderConfig&&(e=VS(e,this.audioTrack._encoderConfig)),function(e){const t=ma();return t.name!==ha.SAFARI&&t.os!==da.IOS?e:e.replace(/a=.*video-orientation\r\n/g,"")}(e)}createPC(){this.pc=new OS({turnServer:this.joinInfo.turnServer}),this.updateICEPromise()}async closePC(e){return this.pc.onICEConnectionStateChange=void 0,this.pc.close(),!e&&await Dp(this,ty.NEED_UNPUB)}onPCDisconnected(e){this.reportPublishEvent(!1,e.code)}async setLowStreamEncoding(e,t){try{const i=await this.pc.setVideoRtpEncodingParameters(e),n=t.getMediaStreamTrack();if(e.scaleResolutionDownBy&&i.encodings[0].scaleResolutionDownBy!==e.scaleResolutionDownBy){const i=t._videoHeight||n.getSettings().height,r=t._videoWidth||n.getSettings().width;i&&r&&await n.applyConstraints({height:i/e.scaleResolutionDownBy,width:r/e.scaleResolutionDownBy})}e.maxFramerate&&i.encodings[0].maxFramerate!==e.maxFramerate&&await n.applyConstraints({frameRate:e.maxFramerate})}catch(e){if(e instanceof pl)throw e;throw new pl(hy.LOW_STREAM_ENCODING_ERROR,e.message)}}}function zS(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function ZS(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=zS(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=zS(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}class YS extends Py{constructor(e,t,i,n){var r,o,s;super(e,Je(r=Je(o=Je(s="track-".concat(e.kind,"-")).call(s,t,"-")).call(o,n,"_")).call(r,Op(5,""))),this._isDestroyed=!1,this._userId=t,this._uintId=i}getUserId(){return this._userId}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource()}_destroy(){this._isDestroyed=!0,Rc.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}}class KS extends YS{constructor(e,t,i,n){super(e,t,i,n),this.trackMediaType="video",this.updateMediaStreamTrackResolution()}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==OA.PLAYING)}getStats(){return Hp(()=>{Rc.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),xp(this,my.GET_STATS)||ZS({},sy)}play(e,t={}){const i=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:Nl.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof e?e:"HTMLElement",t]});if("string"==typeof e){const t=document.getElementById(e);var n;t?e=t:(Rc.warning(Je(n="[".concat(this.getTrackId(),'] can not find "#')).call(n,e,'" element, use document.body')),e=document.body)}Rc.debug("[".concat(this.getTrackId(),"] start video playback"),ve(t));const r=ZS({fit:"cover"},t,{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(r):(this._player=new H_(r),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.emit(Ey.FIRST_FRAME_DECODED)}),this._player.play(),i.onSuccess()}stop(){const e=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:Nl.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return e.onSuccess();this._player.destroy(),this._player=void 0,Rc.debug("[".concat(this.getTrackId(),"] stop video playback")),e.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){Lp(this._originMediaStreamTrack).then(([e,t])=>{this._videoHeight=t,this._videoWidth=e}).catch(Np)}_updatePlayerSource(){Rc.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const i=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),n={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==i?void 0:i.parentElement},{element:r,slot:o}=n;if(this.isPlaying&&r instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=Ev.checkOneElementVisible(r),t=nn({},e);return t.visible||Oy.reportApiInvoke(null,{tag:GA.TRACER,name:Nl.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess("Not visible because of ".concat(t.reason)),t}return}catch(e){throw new pl(ll.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}}class JS extends YS{constructor(e,t,i,n){super(e,t,i,n),this.trackMediaType="audio",this._useAudioElement=!0,this._volume=100,this._source=new Ah(e,!0),this._source.once(iy.RECEIVE_TRACK_BUFFER,()=>{this.emit(Ey.FIRST_FRAME_DECODED)})}get isPlaying(){return this._useAudioElement?Mh.isPlaying(this.getTrackId()):this._source.isPlayed}setAudioFrameCallback(e,t=4096){if(!e)return this._source.removeAllListeners(iy.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(iy.ON_AUDIO_BUFFER),this._source.on(iy.ON_AUDIO_BUFFER,t=>e(t))}setVolume(e){const t=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:Nl.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),e]},300);this._volume=e,this._useAudioElement?Mh.setVolume(this.getTrackId(),e):this._source.setVolume(e/100),t.onSuccess()}async setPlaybackDevice(e){const t=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:Nl.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[this.getTrackId(),e]});if(!this._useAudioElement)throw new pl(ll.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{await Mh.setSinkID(this.getTrackId(),e)}catch(e){throw t.onError(e),e}t.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Hp(()=>{Rc.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),xp(this,my.GET_STATS)||ZS({},oy)}play(){const e=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:Nl.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(Rc.debug("[".concat(this.getTrackId(),"] use audio element to play")),Mh.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),e.onSuccess()}stop(){const e=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:Nl.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Mh.stop(this.getTrackId()):this._source.stop(),e.onSuccess()}_destroy(){super._destroy(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){Rc.debug("[".concat(this.getTrackId(),"] update player source track")),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Mh.updateTrack(this.getTrackId(),this._mediaStreamTrack)}}class XS extends PS{constructor(e,t,i,n){super(i,e.uid),this.type="sub",this.unusedTracks=[],this.onTrack=e=>{var t,i;if("audio"===e.kind&&!this.subscribeOptions.audio||"video"===e.kind&&!this.subscribeOptions.video)return this.unusedTracks.push(e),void Rc.debug(Je(i="[".concat(this.connectionId,"] unused ontrack event, kind: ")).call(i,e.kind));Rc.debug(Je(t="[".concat(this.connectionId,"] emit pc ontrack after subscribe ")).call(t,e.kind),e);const n="audio"===e.kind?this.user._audioTrack:this.user._videoTrack;var r,o;n?n._updateOriginMediaStreamTrack(e):"audio"===e.kind?(this.pc._statsFilter.setIsFirstAudioDecoded(!1),this.user._audioTrack=new JS(e,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Rc.info(Je(r="[".concat(this.connectionId,"] create remote audio track: ")).call(r,this.user._audioTrack.getTrackId())),this.bindTrackEvents(this.user._audioTrack)):(this.user._videoTrack=new KS(e,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Rc.info(Je(o="[".concat(this.connectionId,"] create remote video track: ")).call(o,this.user._videoTrack.getTrackId())),this.bindTrackEvents(this.user._videoTrack))},this.handleGetRemoteAudioStats=e=>{e(this.statsCollector.getRemoteAudioTrackStats(this.connectionId))},this.handleGetRemoteVideoStats=e=>{e(this.statsCollector.getRemoteVideoTrackStats(this.connectionId))},this.handleGetSessionID=e=>{e(this.joinInfo.sid)},this.user=e,this.statsCollector=t,this.statsCollector.addRemoteConnection(this),this.subscribeOptions=n}async startP2PConnection(){return new fo(async(e,t)=>{const i=n=>{if("connected"===n&&(Oy.subscribe(this.joinInfo.sid,{lts:this.startTime,succ:!0,video:this.subscribeOptions.video,audio:this.subscribeOptions.audio,peerid:this.user.uid,ec:null,subscribeRequestid:this.ID,p2pid:this.pc.ID}),this.off(ty.CONNECTION_STATE_CHANGE,i),e()),"disconnected"===n){if(this.off(ty.CONNECTION_STATE_CHANGE,i),this.disconnectedReason)return t(this.disconnectedReason);t(new pl(ll.OPERATION_ABORTED,"subscribe abort"))}};if(this.on(ty.CONNECTION_STATE_CHANGE,i),this.disconnectedReason=void 0,this.connectionState="connecting",this.startTime=Ma(),!this.subscribeOptions)return void t(new pl(ll.UNEXPECTED_ERROR,"no subscribe options"));const n=new MediaStream,r=new fo(e=>{this.pc.onTrack=(t,i)=>{var r,o;if("audio"===t.kind&&!this.subscribeOptions.audio||"video"===t.kind&&!this.subscribeOptions.video)return this.unusedTracks.push(t),void Rc.debug(Je(o="[".concat(this.connectionId,"] unused ontrack event ")).call(o,t.kind));n.addTrack(t);const s={audio:n.getAudioTracks().length>0,video:n.getVideoTracks().length>0};Rc.debug(Je(r="[".concat(this.connectionId,"] subscribe ontrack: ")).call(r,t.kind),i,t),function(e,t){var i,n;const r=cl(i=on(e)).call(i),o=cl(n=on(t)).call(n);for(let s=0;s<r.length;s+=1){if(r[s]!==o[s])return!1;if(e[r[s]]!==t[r[s]])return!1}return!0}(s,this.subscribeOptions)&&(this.pc.onTrack=this.onTrack,Rc.debug("[".concat(this.connectionId,"] get all subscribed tracks")),e(n))}});try{const e=function(e){return ma().name!==ha.FIREFOX?e:e.replace("/recvonly http://www.webrtc.org/experiments/rtp-hdrext/playout-delay"," http://www.webrtc.org/experiments/rtp-hdrext/playout-delay")}(jS(await this.pc.createOfferSDP()));await this.pc.setOfferSDP(e),Rc.debug("[".concat(this.connectionId,"] create and set offer success"));const t={messageType:"OFFER",sdp:e,offererSessionId:104,retry:!0},i=await Dp(this,ty.NEED_ANSWER,t);await this.pc.setAnswerSDP(jS(i.sdp)),Rc.debug("[".concat(this.connectionId,"] set answer success"));const n=await fo.all([r,this.icePromise]),a=n[0].getAudioTracks()[0],c=n[0].getVideoTracks()[0];var o,s;a&&(this.user._audioTrack?this.user._audioTrack._updateOriginMediaStreamTrack(a):(this.user._audioTrack=new JS(a,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Rc.info(Je(o="[".concat(this.connectionId,"] create remote audio track: ")).call(o,this.user._audioTrack.getTrackId())),this.bindTrackEvents(this.user._audioTrack))),c&&(this.user._videoTrack?this.user._videoTrack._updateOriginMediaStreamTrack(c):(this.user._videoTrack=new KS(c,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Rc.info(Je(s="[".concat(this.connectionId,"] create remote video track: ")).call(s,this.user._videoTrack.getTrackId())),this.bindTrackEvents(this.user._videoTrack))),this.connectionState="connected",this.startUploadStats()}catch(e){this.off(ty.CONNECTION_STATE_CHANGE,i),this.connectionState="disconnected",Oy.subscribe(this.joinInfo.sid,{lts:this.startTime,succ:!1,video:this.subscribeOptions.video,audio:this.subscribeOptions.audio,peerid:this.user.uid,ec:e.code,subscribeRequestid:this.ID,p2pid:this.pc.ID}),t(e)}})}async closeP2PConnection(e){"disconnected"!==this.connectionState&&(this.stopUploadStats(),this.statsCollector.removeConnection(this.connectionId),this.connectionState="disconnected",await this.setSubscribeOptions({audio:!1,video:!1}),await this.closePC(e),this.removeAllListeners())}getNetworkQuality(){const e=this.pc.getStats();if(!e.audioRecv[0]&&!e.videoRecv[0])return 1;const t=xp(this,ty.NEED_SIGNAL_RTT),i=e.rtt,n=(i&&t?(i+t)/2:i||t)||0,r=e.audioRecv[0]?e.audioRecv[0].jitterMs:void 0,o=e.recvPacketLossRate;let s=.7*o*100/50+.3*n/1500;return r&&(s=.6*o*100/50+.2*n/1500+.2*r/400),s<.1?1:s<.17?2:s<.36?3:s<.59?4:5}uploadStats(e){const t=this.user.audioTrack?function(e,t){const i=e.audioRecv[0];if(!i)return null;const n={id:Op(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:i.ssrc.toString()};return n.bytesReceived=i.bytes.toString(),n.packetsLost=i.packetsLost.toString(),n.packetsReceived=i.packets.toString(),i.outputLevel?n.A_aol=Math.round(100*i.outputLevel).toString():n.A_aol=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),n.A_apol=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),t&&(n.A_artd=t._originMediaStreamTrack.enabled&&t._mediaStreamTrack.enabled?"0":"1"),n.A_jr=i.jitterMs.toString(),n.A_jbm=Math.floor(i.jitterBufferMs).toString(),n.A_cdm=Math.floor(i.jitterBufferMs).toString(),n}(e,this.user.audioTrack):void 0,i=this.user.videoTrack?function(e,t){const i=e.videoRecv[0];if(!i)return null;const n={id:Op(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:i.ssrc.toString()};var r;return n.bytesReceived=i.bytes.toString(),n.packetsLost=i.packetsLost.toString(),n.packetsReceived=i.packets.toString(),i.framesRateFirefox&&(n.A_frr=i.framesRateFirefox.toString()),i.receivedFrame&&(n.A_frr=i.receivedFrame.frameRate.toString()),n.A_frd=i.decodeFrameRate.toString(),i.outputFrame&&(n.A_fro=i.outputFrame.frameRate.toString()),void 0!==i.jitterBufferMs&&(n.A_jbm=Math.floor(i.jitterBufferMs).toString()),void 0!==i.currentDelayMs&&(n.A_cdm=Math.floor(i.currentDelayMs).toString()),n.A_fs=i.firsCount.toString(),n.A_ns=i.nacksCount.toString(),n.A_ps=i.plisCount.toString(),t&&(n.A_vrtd=t._originMediaStreamTrack.enabled&&t._mediaStreamTrack.enabled?"0":"1"),t._player&&t._player.freezeTimeCounterList.length>0&&(n.A_vrft=To(r=t._player.freezeTimeCounterList).call(r,0,1)[0].toString()),n}(e,this.user.videoTrack):void 0;t&&Vp(()=>this.emit(ty.NEED_UPLOAD,XA.SUBSCRIBE_STATS,t)),i&&Vp(()=>this.emit(ty.NEED_UPLOAD,XA.SUBSCRIBE_STATS,i))}uploadSlowStats(e){}uploadRelatedStats(e,t){const i=!0===this.pc._statsFilter.videoIsReady,n=function(e,t,i){const n=e.audioRecv[0];if(!n)return null;const r=zy.isRemoteAudioFreeze(i);return{mediaType:"audio",isAudioMute:!1,peerId:t,googJitterReceived:n.jitterMs.toString(),isFreeze:r,bytesReceived:n.bytes.toString(),packetsReceived:n.packets.toString(),packetsLost:n.packetsLost.toString(),frameReceived:n.receivedFrames.toString(),frameDropped:n.droppedFrames.toString()}}(e,this.getUserId(),this.user.audioTrack),r=function(e,t,i,n,r){const o=t.videoRecv[0],s=n?n.videoRecv[0]:void 0;if(!o)return null;const a=zy.isRemoteVideoFreeze(r,o,s)&&e,c={mediaType:"video",isVideoMute:!1,peerId:i,frameRateReceived:o.receivedFrame&&o.receivedFrame.frameRate.toString(),frameRateDecoded:o.decodedFrame&&o.decodedFrame.frameRate.toString(),isFreeze:a,bytesReceived:o.bytes.toString(),packetsReceived:o.packets.toString(),packetsLost:o.packetsLost.toString()};return o.framesRateFirefox&&(c.frameRateDecoded=o.framesRateFirefox.toString(),c.frameRateReceived=o.framesRateFirefox.toString()),c}(i,e,this.getUserId(),t,this.user.videoTrack);n&&Vp(()=>{this.emit(ty.NEED_UPLOAD,XA.SUBSCRIBE_RELATED_STATS,n)}),r&&Vp(()=>{this.emit(ty.NEED_UPLOAD,XA.SUBSCRIBE_RELATED_STATS,r)})}emitOnTrackFromUnusedTracks(){if(!this.subscribeOptions)return;const e=this.subscribeOptions.video;if(this.subscribeOptions.audio){var t;const e=Qo(t=this.unusedTracks).call(t,e=>"audio"===e.kind&&"live"===e.readyState);Up(this.unusedTracks,e),e&&this.onTrack(e)}if(e){var i;const e=Qo(i=this.unusedTracks).call(i,e=>"video"===e.kind&&"live"===e.readyState);Up(this.unusedTracks,e),e&&this.onTrack(e)}}async setSubscribeOptions(e){var t,i,n,r;if(e.audio!==this.subscribeOptions.audio||e.video!==this.subscribeOptions.video){if("connecting"===this.connectionState)try{await this.createWaitConnectionConnectedPromise()}catch(e){throw new pl(ll.OPERATION_ABORTED,"can not update subscribe options, operation abort")}e.audio===this.subscribeOptions.audio&&e.video===this.subscribeOptions.video||(Rc.debug(Je(t=Je(i=Je(n=Je(r="[".concat(this.connectionId,"] update subscribe options [a: ")).call(r,this.subscribeOptions.audio,", v: ")).call(n,this.subscribeOptions.video,"] -> [a: ")).call(i,e.audio,", v: ")).call(t,e.video,"]")),this.subscribeOptions=e,!e.audio&&this.user._audioTrack&&(this.unusedTracks.push(this.user._audioTrack._originMediaStreamTrack),this.user._audioTrack._destroy(),this.unbindTrackEvents(this.user._audioTrack),this.user._audioTrack=void 0),!e.video&&this.user._videoTrack&&(this.unusedTracks.push(this.user._videoTrack._originMediaStreamTrack),this.user._videoTrack._destroy(),this.unbindTrackEvents(this.user._videoTrack),this.user._videoTrack=void 0),this.emitOnTrackFromUnusedTracks())}}createPC(){this.pc=new kS({turnServer:this.joinInfo.turnServer}),this.pc.onFirstAudioDecoded=()=>{this.user.audioTrack&&this.user.audioTrack.emit(Ey.FIRST_FRAME_DECODED),Oy.firstRemoteFrame(this.joinInfo.sid,UA.FIRST_AUDIO_DECODE,FA.FIRST_AUDIO_DECODE,{peer:this.user._uintid,subscribeElapse:Ma()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.pc.onFirstAudioReceived=()=>{Oy.firstRemoteFrame(this.joinInfo.sid,UA.FIRST_AUDIO_RECEIVED,FA.FIRST_AUDIO_RECEIVED,{peer:this.user._uintid,subscribeElapse:Ma()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.pc.onFirstVideoDecoded=(e,t)=>{Oy.firstRemoteFrame(this.joinInfo.sid,UA.FIRST_VIDEO_DECODE,FA.FIRST_VIDEO_DECODE,{peer:this.user._uintid,videowidth:e,videoheight:t,subscribeElapse:Ma()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.pc.onFirstVideoReceived=()=>{Oy.firstRemoteFrame(this.joinInfo.sid,UA.FIRST_VIDEO_RECEIVED,FA.FIRST_VIDEO_RECEIVED,{peer:this.user._uintid,subscribeElapse:Ma()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.updateICEPromise()}async closePC(e){return this.pc.audioTrack&&this.pc.audioTrack.stop(),this.pc.videoTrack&&this.pc.videoTrack.stop(),this.pc.onTrack=void 0,this.pc.onICEConnectionStateChange=void 0,this.pc.close(),!e&&await Dp(this,ty.NEED_UNSUB)}onPCDisconnected(e){Oy.subscribe(this.joinInfo.sid,{lts:this.startTime,succ:!1,video:this.subscribeOptions.video,audio:this.subscribeOptions.audio,peerid:this.user.uid,ec:e.code,subscribeRequestid:this.ID,p2pid:this.pc.ID})}bindTrackEvents(e){e instanceof JS?e.addListener(my.GET_STATS,this.handleGetRemoteAudioStats):e instanceof KS&&e.addListener(my.GET_STATS,this.handleGetRemoteVideoStats)}unbindTrackEvents(e){e instanceof JS?e.off(my.GET_STATS,this.handleGetRemoteAudioStats):e instanceof KS&&e.off(my.GET_STATS,this.handleGetRemoteVideoStats)}}class eC{constructor(e,t){this._trust_in_room_=!0,this._trust_audio_enabled_state_=!0,this._trust_video_enabled_state_=!0,this._trust_audio_mute_state_=!0,this._trust_video_mute_state_=!0,this._trust_stream_added_state_=!0,this._audio_muted_=!1,this._video_muted_=!1,this._audio_enabled_=!0,this._video_enabled_=!0,this._audio_added_=!1,this._video_added_=!1,this.uid=e,this._uintid=t}get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}}function tC(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function iC(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=tC(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=tC(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}var nC=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Un(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&hn(t,i,s),s},rC=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class oC extends Mu{constructor(e){var t,i,n,r;let o;if(super(),this._users=[],this._sessionId=null,this._bindEnabledTracks=[],this._leaveMutex=new ah("client-leave"),this._publishMutex=new ah("client-publish"),this._subscribeMutex=new Mi,this._remoteStream=new Mi,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._turnServer={servers:[],mode:"auto"},this._cloudProxyServerMode="disabled",this._isDualStreamEnabled=!1,this._streamFallbackTypeCacheMap=new Mi,this._remoteStreamTypeCacheMap=new Mi,this._axiosCancelSource=Sc.CancelToken.source(),this._networkQualitySensitivity="normal",this._useLocalAccessPoint=!1,this._handleLocalTrackEnable=(e,t,i)=>{this.publish(e,!1).then(t).catch(i)},this._handleLocalTrackDisable=(e,t,i)=>{this.unpublish(e,!1).then(t).catch(i)},this._handleUserOnline=e=>{var t;this.isStringUID&&"string"!=typeof e.uid&&Rc.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const i=Qo(t=this._users).call(t,t=>t.uid===e.uid);if(i)i._trust_in_room_=!0;else{const t=new eC(e.uid,e.uint_id||e.uid);this._users.push(t),Rc.debug("[".concat(this._clientId,"] user online"),e.uid),this.emit(bA.USER_JOINED,t)}},this._handleUserOffline=e=>{var t;const i=Qo(t=this._users).call(t,t=>t.uid===e.uid);i&&(this._handleRemoveStream(e),Up(this._users,i),this._remoteStreamTypeCacheMap.delete(i.uid),this._streamFallbackTypeCacheMap.delete(i.uid),Rc.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.emit(bA.USER_LEAVED,i,e.reason))},this._handleAddAudioOrVideoStream=(e,t,i)=>{var n,r,o;const s=Qo(n=this._users).call(n,e=>e.uid===t);if(!s)return void Rc.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));Rc.debug(Je(r=Je(o="[".concat(this._clientId,"] stream added with uid ")).call(o,t,", type ")).call(r,e));const a="audio"===e?s.hasAudio:s.hasVideo;var c,l;s._uintid||(s._uintid=i||t),s._trust_stream_added_state_=!0,"audio"===e?s._audio_added_=!0:s._video_added_=!0,("audio"===e?s.hasAudio:s.hasVideo)&&!a&&(Rc.info(Je(c=Je(l="[".concat(this._clientId,"] remote user ")).call(l,s.uid," published ")).call(c,e)),this.emit(bA.USER_PUBLISHED,s,e)),"video"===e?Oy.onGatewayStream(this._sessionId,UA.ON_ADD_VIDEO_STREAM,FA.ON_ADD_VIDEO_STREAM,{peer:i||t}):Oy.onGatewayStream(this._sessionId,UA.ON_ADD_AUDIO_STREAM,FA.ON_ADD_AUDIO_STREAM,{peer:i||t});const u=this._remoteStream.get(t);u&&u.readyToReconnect&&"connecting"===u.connectionState&&u.reconnectPC().catch(e=>{Rc.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})},this._handleRemoveStream=e=>{var t,i;const n=Qo(t=this._users).call(t,t=>t.uid===e.uid);if(!n)return void Rc.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));Rc.debug(Je(i="[".concat(this._clientId,"] stream removed with uid ")).call(i,e.uid));let r=()=>{};n.hasAudio&&n.hasVideo?r=()=>{var e,t;Rc.info(Je(e="[".concat(this._clientId,"] remote user ")).call(e,n.uid," unpublished audio track")),this.emit(bA.USER_UNPUBLISHED,n,"audio"),Rc.info(Je(t="[".concat(this._clientId,"] remote user ")).call(t,n.uid," unpublished video track")),this.emit(bA.USER_UNPUBLISHED,n,"video")}:n.hasVideo?r=()=>{var e;Rc.info(Je(e="[".concat(this._clientId,"] remote user ")).call(e,n.uid," unpublished video track")),this.emit(bA.USER_UNPUBLISHED,n,"video")}:n.hasAudio&&(r=()=>{var e;Rc.info(Je(e="[".concat(this._clientId,"] remote user ")).call(e,n.uid," unpublished audio track")),this.emit(bA.USER_UNPUBLISHED,n,"audio")}),n._trust_stream_added_state_=!0,n._audio_added_=!1,n._video_added_=!1;const o=this._remoteStream.get(n.uid);o&&(o.closeP2PConnection(),this._remoteStream.delete(n.uid)),Oy.onGatewayStream(this._sessionId,UA.ON_REMOVE_STREAM,FA.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),r()},this._handleSetStreamLocalEnable=(e,t,i)=>{var n,r,o,s,a,c;const l=Qo(n=this._users).call(n,e=>e.uid===t);if(!l)return void Rc.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));Rc.debug(Je(r=Je(o=Je(s="[".concat(this._clientId,"] local ")).call(s,e," ")).call(o,i?"enabled":"disabled"," with uid ")).call(r,t));const u="audio"===e?l.hasAudio:l.hasVideo;if("audio"===e){l._trust_audio_enabled_state_=!0;const e=l._audio_enabled_;if(l._audio_enabled_=i,l._audio_enabled_===e)return;{var d,h;const e=l._audio_enabled_?"enable-local-audio":"disable-local-audio";Rc.debug(Je(d=Je(h="[".concat(this._clientId,"] user-info-updated, uid: ")).call(h,t,", msg: ")).call(d,e)),this.emit(bA.USER_INFO_UPDATED,t,e)}}else{l._trust_video_enabled_state_=!0;const e=l._video_enabled_;if(l._video_enabled_=i,l._video_enabled_===e)return;{var p,f;const e=l._video_enabled_?"enable-local-video":"disable-local-video";Rc.debug(Je(p=Je(f="[".concat(this._clientId,"] user-info-update, uid: ")).call(f,t,", msg: ")).call(p,e)),this.emit(bA.USER_INFO_UPDATED,t,e)}}const g="audio"===e?l.hasAudio:l.hasVideo;if(u===g)return;var m,_;if(!u&&g)return Rc.info(Je(m=Je(_="[".concat(this._clientId,"] remote user ")).call(_,t," published ")).call(m,e)),void this.emit(bA.USER_PUBLISHED,l,e);const v=this._remoteStream.get(t);if(v){const e=iC({},v.subscribeOptions);e.audio=!!l.hasAudio&&e.audio,e.video=!!l.hasVideo&&e.video,e.audio||e.video?v.setSubscribeOptions(e):(v.closeP2PConnection().catch(e=>{Rc.warning("close sub pc error",e)}),this._remoteStream.delete(l.uid))}Rc.info(Je(a=Je(c="[".concat(this._clientId,"] remote user ")).call(c,l.uid," unpublished ")).call(a,e)),this.emit(bA.USER_UNPUBLISHED,l,e)},this._handleMuteStream=(e,t,i)=>{var n,r,o;Rc.debug("[".concat(this._clientId,"] receive mute message"),e,t,i);const s=Qo(n=this._users).call(n,t=>t.uid===e);var a;if(!s)return void Rc.warning(Je(a="[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ")).call(a,e));const c="audio"===t?s.hasAudio:s.hasVideo;if("audio"===t){s._trust_audio_mute_state_=!0;const t=s._audio_muted_;if(s._audio_muted_=i,s._audio_muted_===t)return;{var l,u;const t=s._audio_muted_?"mute-audio":"unmute-audio";Rc.debug(Je(l=Je(u="[".concat(this._clientId,"] user-info-update, uid: ")).call(u,e,", msg: ")).call(l,t)),this.emit(bA.USER_INFO_UPDATED,e,t)}}else{s._trust_video_mute_state_=!0;const t=s._video_muted_;if(s._video_muted_=i,s._video_muted_===t)return;{var d,h;const t=s._video_muted_?"mute-video":"unmute-video";Rc.debug(Je(d=Je(h="[".concat(this._clientId,"] user-info-update, uid: ")).call(h,e,", msg: ")).call(d,t)),this.emit(bA.USER_INFO_UPDATED,e,t)}}const p="audio"===t?s.hasAudio:s.hasVideo;if(c===p)return;var f,g;if(!c&&p)return Rc.info(Je(f=Je(g="[".concat(this._clientId,"] remote user ")).call(g,e," published ")).call(f,t)),void this.emit(bA.USER_PUBLISHED,s,t);const m=this._remoteStream.get(e);if(m){const e=iC({},m.subscribeOptions);e.audio=!!s.hasAudio&&e.audio,e.video=!!s.hasVideo&&e.video,"video"===t&&m.pc._statsFilter.setVideoIsReady(!1),e.audio||e.video?m.setSubscribeOptions(e):(m.closeP2PConnection().catch(e=>{Rc.warning("close sub pc error",e)}),this._remoteStream.delete(s.uid))}Rc.info(Je(r=Je(o="[".concat(this._clientId,"] remote user ")).call(o,e," unpublished ")).call(r,t)),this.emit(bA.USER_UNPUBLISHED,s,t)},this._handleP2PLost=e=>{Rc.debug("[".concat(this._clientId,"] receive p2p lost"),e);let t=null;if(this._highStream&&this._highStream.pc.ID===e.p2pid)t=this._highStream;else if(this._lowStream&&this._lowStream.pc.ID===e.p2pid)t=this._lowStream;else{var i;Ji(i=this._remoteStream).call(i,i=>{i.pc.ID===e.p2pid&&(t=i)})}t?t.emit(ty.GATEWAY_P2P_LOST,e.p2pid):Rc.warning("P2PLost stream not found",e)},this._handleTokenWillExpire=()=>{Rc.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.emit(bA.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)},this._handleBeforeUnload=e=>{void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),Rc.info("[".concat(this._clientId,"] auto leave onbeforeunload")))},this._handleUpdateNetworkQuality=()=>{var e;if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(bA.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const t={downlinkNetworkQuality:0,uplinkNetworkQuality:0};this._highStream&&!this._highStream.detecting&&(t.uplinkNetworkQuality=this._highStream.getNetworkQuality());let i=0;Ji(e=this._remoteStream).call(e,e=>i+=e.getNetworkQuality()),this._remoteStream.size>0&&(t.downlinkNetworkQuality=Math.round(i/this._remoteStream.size)),this.emit(bA.NETWORK_QUALITY,t)},this._codec=e.codec,this._mode=e.mode,e.proxyServer&&(this._proxyServer=e.proxyServer,Oy.setProxyServer(this._proxyServer),Rc.setProxyServer(this._proxyServer)),e.turnServer&&(this._turnServer=iC({},this._turnServer,{mode:"manual"},e.turnServer)),this._clientId=Op(5,"client-"),Rc.info(Je(t=Je(i=Je(n=Je(r="[".concat(this._clientId,"] Initializing AgoraRTC client v")).call(r,Oc," build: ")).call(n,wc,", mode: ")).call(i,this._mode,", codec: ")).call(t,this._codec)),this._performanceRecorder=AA(this._clientId,"join"),e.clientRoleOptions)try{MA(e.clientRoleOptions),o=nn({},e.clientRoleOptions)}catch(e){var s;Rc.warning(Je(s="[".concat(this._clientId,"] ")).call(s,e.toString()))}this._statsCollector=new zy(this._clientId),this._statsCollector.onStatsException=(e,t,i)=>{var n,r,o;Rc.debug(Je(n=Je(r=Je(o="[".concat(this._clientId,"] receive exception msg, code: ")).call(o,e,", msg: ")).call(r,t,", uid: ")).call(n,i)),this.emit(bA.EXCEPTION,{code:e,msg:t,uid:i})},this._statsCollector.onUploadPublishDuration=(e,t,i,n)=>{var r;const o=Qo(r=this._users).call(r,t=>t.uid===e);o&&Oy.peerPublishStatus(this._sessionId,{subscribeElapse:n,audioPublishDuration:t,videoPublishDuration:i,peer:o._uintid})},this._gateway=new cS({clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:e.websocketRetryConfig||zd,httpRetryConfig:e.httpRetryConfig||zd,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:o}),this._config=e,this._configDistribute=new L_,this._handleGatewayEvents()}get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._highStream?this._highStream.getAllTracks():[]}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}async join(e,t,i,n,r){var o;this._performanceRecorder.checkPoint("startJoin");const s=mA(),a=_A()?window.isSecureContext:"Browser Not Support",c=()=>{Rc.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser")};_A()?window.isSecureContext||c():s||c();const l=Oy.reportApiInvoke(this._sessionId,{name:jA.JOIN,options:[e,t,i,n],states:{isHttps:s,isSecureContext:a},tag:GA.TRACER});try{if(!i&&null!==i)throw new pl(ll.INVALID_PARAMS,"Invalid token: ".concat(i,". If you don not use token, set it to null"));i&&_l(i,"token",1,2047),_l(e,"appid",1,2047),El(t),n&&Al(n),r&&_l(r,"optionalInfo",1,2047)}catch(e){throw l.onError(e),e}if(Rc.info(Je(o="[".concat(this._clientId,"] start join channel ")).call(o,t)),this._leaveMutex.isLocked&&(Rc.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),Rc.debug("[".concat(this._clientId,"] join: continue"))),"DISCONNECTED"!==this.connectionState){const e=new pl(ll.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw l.onError(e),e}this._sessionId||(this._sessionId=kp()),this._gateway.state="CONNECTING";const u={clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof n?n:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:i||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:r,useLocalAccessPoint:this._useLocalAccessPoint};"string"==typeof n&&(u.stringUid=n,this._uintUid?(u.uid=this._uintUid,this._uintUid=void 0):u.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret&&(u.aesmode=this._encryptionMode,u.aespassword=await ap(this._encryptionSecret),this._encryptionSalt&&(u.aessalt=this._encryptionSalt)),this._startSession(this._sessionId,{channel:t,appId:e}),Fa(()=>{"CONNECTING"===this.connectionState&&Oy.joinChannelTimeout(this._sessionId,5)},5e3);try{var d;let n;if("443only"===u.cloudProxyServer)u.proxyServer=jc("PROXY_SERVER_TYPE2");else if("proxy3"===u.cloudProxyServer||"proxy4"===u.cloudProxyServer||"proxy5"===u.cloudProxyServer){const e=jc("PROXY_SERVER_TYPE3");hl(e)?u.proxyServer=e[0]:u.proxyServer=e}if(Oy.setProxyServer(u.proxyServer),Rc.setProxyServer(u.proxyServer),this._performanceRecorder.checkPoint("startRequestAp"),u.stringUid&&!u.uid&&"normal"===u.cloudProxyServer){var h;await vS(u,this._axiosCancelSource.token,this._config.httpRetryConfig||zd,!1);const e=await ES(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||zd);Rc.debug(Je(h="getUserAccount Success ".concat(u.stringUid," => ")).call(h,e)),u.uid=e,n=await _S(u,this._axiosCancelSource.token,this._config.httpRetryConfig||zd)}else if(u.stringUid&&!u.uid){var p;const e=await ES(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||zd);Rc.debug(Je(p="getUserAccount Success ".concat(u.stringUid," => ")).call(p,e)),u.uid=e,n=await vS(u,this._axiosCancelSource.token,this._config.httpRetryConfig||zd,!0)}else n=await vS(u,this._axiosCancelSource.token,this._config.httpRetryConfig||zd,!0);this._performanceRecorder.checkPoint("startJoinGateway"),this._configDistribute.startGetConfigDistribute(u,this._axiosCancelSource.token),this._configDistribute.on(Sy.UPDATE_BITRATE_LIMIT,e=>{this._highStream&&this._highStream.handleUpdateBitrateLimit(e.uplink),e.low_stream_uplink&&this._lowStream&&this._lowStream.handleUpdateBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}),this._key=i||e,this._joinInfo=iC({},u,{cid:n.gatewayInfo.cid,uid:u.uid?u.uid:n.gatewayInfo.uid,vid:n.gatewayInfo.vid,apResponse:n.gatewayInfo.res,uni_lbs_ip:n.gatewayInfo.uni_lbs_ip,gatewayAddrs:n.gatewayInfo.gatewayAddrs});const r=await this._gateway.join(this._joinInfo,this._key);return l.onSuccess(r),this._appId=e,this._channelName=u.cname,this._uid=r,this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener("beforeunload",this._handleBeforeUnload),Rc.info(Je(d="[".concat(this._clientId,"] Joining channel success: ")).call(d,t)),Fa(()=>{Rc.startUpload()},5e3),this._performanceRecorder.checkPoint("finishJoin"),Kc(this),r}catch(e){const t=hl(e)?e[0]:e;throw Rc.error("[".concat(this._clientId,"] Joining channel failed, rollback"),t),t.code!==ll.OPERATION_ABORTED&&(this._gateway.state="DISCONNECTED",this._reset()),l.onError(t),t}}async leave(){const e=Oy.reportApiInvoke(this._sessionId,{name:jA.LEAVE,options:[],tag:GA.TRACER});Rc.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener("beforeunload",this._handleBeforeUnload),this._reset(),Jc(this);const t=await this._leaveMutex.lock();if("DISCONNECTED"===this.connectionState)return Rc.info("[".concat(this._clientId,"] Leaving channel repeated, success")),t(),e.onSuccess();await this._gateway.leave("CONNECTED"!==this.connectionState),Rc.info("[".concat(this._clientId,"] Leaving channel success")),t(),e.onSuccess()}async publish(e,t=!0){var i,n;hl(e)||(e=[e]);const r=Oy.reportApiInvoke(this._sessionId,{name:jA.PUBLISH,options:vo(e).call(e,e=>e?Object(e).toString():"null"),tag:GA.TRACER});if(0===e.length){const e=new pl(ll.INVALID_PARAMS,"track list is empty");return r.onError(e),e.throw()}if("audience"===this._gateway.role){const e=new pl(ll.INVALID_OPERATION,"audience can not publish stream");return r.onError(e),e.throw()}for(const s of e){if(!(s instanceof Dy)){const e=new pl(ll.INVALID_PARAMS,"pamameter is not local track");return r.onError(e),e.throw()}if(!s._enabled&&t){const e=new pl(ll.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(s.getTrackId()));return r.onError(e),e.throw()}}if(Rc.info(Je(i="[".concat(this._clientId,"] Publishing tracks, id ")).call(i,vo(e).call(e,e=>"".concat(e.getTrackId()," ")))),await this._configDistribute.awaitConfigDistributeComplete(),t&&Ji(e).call(e,e=>{var t;const i=this._configDistribute.getBitrateLimit();var n;e instanceof US&&i&&e.setBitrateLimit(i.uplink),-1===Lo(t=this._bindEnabledTracks).call(t,e)&&(e.addListener(my.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.addListener(my.NEED_REMOVE_TRACK,this._handleLocalTrackDisable),this._bindEnabledTracks.push(e),Ia()&&e.muted&&Rc.debug(Je(n="[".concat(this._clientId,"] on firefox publish a muted track ")).call(n,e.getTrackId(),", skip the pub operation and wait unmute")))}),Ia()&&0===(e=Gn(e).call(e,e=>!e.muted)).length)return void r.onSuccess(vo(e).call(e,e=>e.trackMediaType+":"+e.getTrackLabel()).toString());const o=await this._publishMutex.lock();try{const t=await this._publishHighStream(e),i=(t.audioTrack,t.videoTrack);this._isDualStreamEnabled&&i&&!this._lowStream&&await this._publishLowStream(i),o(),r.onSuccess(vo(e).call(e,e=>e.trackMediaType+":"+e.getTrackLabel()).toString())}catch(i){throw o(),t&&Ji(e).call(e,e=>{var t,i;const n=Lo(t=this._bindEnabledTracks).call(t,e);-1!==n&&(e.off(my.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.off(my.NEED_REMOVE_TRACK,this._handleLocalTrackDisable),To(i=this._bindEnabledTracks).call(i,n,1))}),r.onError(i),Rc.error("[".concat(this._clientId,"] publish error"),i.toString()),i}Rc.info(Je(n="[".concat(this._clientId,"] Publish success, id ")).call(n,vo(e).call(e,e=>"".concat(e.getTrackId()," "))))}async unpublish(e,t=!0){var i;const n=await this._publishMutex.lock();let r,o,s;try{var a,c;if(!this._highStream)return Rc.warning("[".concat(this._clientId,"] Could not find tracks to unpublish")),void(n&&n());if(r=this._highStream.getAllTracks(),e?hl(e)||(e=[e]):e=this._highStream.getAllTracks(),o=function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1){const n=e[i];if(Gn(e).call(e,e=>e===n).length!==Gn(t).call(t,e=>e===n).length)return!1}return!0}(r,e),s=Oy.reportApiInvoke(this._sessionId,{name:jA.UNPUBLISH,options:vo(e).call(e,e=>e.getTrackId()),tag:GA.TRACER}),Rc.info(Je(a=Je(c="[".concat(this._clientId,"] Unpublish tracks, tracks ")).call(c,vo(e).call(e,e=>"".concat(e.getTrackId()," ")),", isClosePC: ")).call(a,o)),!this._highStream)return Rc.warning("[".concat(this._clientId,"] Could not find tracks to unpublish")),void(n&&n())}catch(e){throw n&&n(),e}try{this._lowStream&&Gn(e).call(e,e=>"video"===e.trackMediaType).length>0&&(await this._lowStream.closeP2PConnection(),this._lowStream=void 0),o?await this._highStream.closeP2PConnection():await this._highStream.removeTracks(e,t),n&&n()}catch(e){if(e.code!==ll.OPERATION_ABORTED)throw s.onError(e),Rc.error("[".concat(this._clientId,"] unpublish error"),e.toString()),n&&n(),e;Rc.debug("[".concat(this._clientId,"] ignore unpub operation abort")),n&&n()}this._highStream&&"disconnected"===this._highStream.connectionState&&(this._highStream=void 0,this._lowStream=void 0),t&&Ji(e).call(e,e=>{var t,i;const n=Lo(t=this._bindEnabledTracks).call(t,e);-1!==n&&(e.off(my.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.off(my.NEED_REMOVE_TRACK,this._handleLocalTrackDisable),To(i=this._bindEnabledTracks).call(i,n,1))}),Rc.info(Je(i="[".concat(this._clientId,"] Unpublish success,tracks ")).call(i,vo(e).call(e,e=>"".concat(e.getTrackId())))),s.onSuccess()}async subscribe(e,t){var i,n,r,o,s;gl(t,"mediaType",["audio","video"]);const a=Oy.reportApiInvoke(this._sessionId,{name:jA.SUBSCRIBE,options:[e.uid,t],tag:GA.TRACER});if(!this._joinInfo){const e=new pl(ll.INVALID_OPERATION,"Can't subscribe stream, not joined");throw a.onError(e),e}if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState){const e=new pl(ll.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));throw a.onError(e),e}if(!Qo(i=this._users).call(i,t=>t===e)){var c;const t=new pl(ll.INVALID_REMOTE_USER,"user is not in the channel");throw Rc.error(Je(c="[".concat(this._clientId,"] can not subscribe ")).call(c,e.uid,", this user is not in the channel")),a.onError(t),t}if(!e.hasAudio&&!e.hasVideo){var l;const t=new pl(ll.INVALID_REMOTE_USER,"user is not published");throw Rc.error(Je(l="[".concat(this._clientId,"] can not subscribe ")).call(l,e.uid,", user is not published")),a.onError(t),t}const u={audio:"audio"===t,video:"video"===t};if(!e.hasAudio&&u.audio||!e.hasVideo&&u.video){var d,h;const i=new pl(ll.REMOTE_USER_IS_NOT_PUBLISHED);throw Rc.error(Je(d=Je(h="[".concat(this._clientId,"] can not subscribe ")).call(h,e.uid," with mediaType ")).call(d,t,", remote track is not published")),a.onError(i),i}let p=this._subscribeMutex.get(e.uid);p||(p=new ah("sub-".concat(e.uid)),this._subscribeMutex.set(e.uid,p)),Rc.info(Je(n=Je(r="[".concat(this._clientId,"] subscribe user ")).call(r,e.uid,", mediaType: ")).call(n,t));const f=await p.lock();let g=this._remoteStream.get(e.uid);try{if(g)u.audio=u.audio||g.subscribeOptions.audio,u.video=u.video||g.subscribeOptions.video,await this._gateway.subscribeChange(g,u);else{g=new XS(e,this._statsCollector,this._joinInfo,u),this._remoteStream.set(e.uid,g);try{await this._gateway.subscribe(g)}catch(t){throw this._remoteStream.delete(e.uid),t}g.on(ty.CONNECTION_STATE_CHANGE,(t,i)=>{"connecting"===t?this.emit(bA.MEDIA_RECONNECT_START,e.uid):"connected"===t&&this.emit(bA.MEDIA_RECONNECT_END,e.uid)})}f()}catch(t){var m;throw a.onError(t),f(),Rc.error(Je(m="[".concat(this._clientId,"] subscribe user ")).call(m,e.uid," error"),t),t}Rc.info(Je(o=Je(s="[".concat(this._clientId,"] subscribe success user ")).call(s,e.uid,", mediaType: ")).call(o,t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(e=>{Rc.warning("[".concat(this._clientId,"] auto set fallback failed"),e)});const _="audio"===t?e.audioTrack:e.videoTrack;if(!_){const e=new pl(ll.UNEXPECTED_ERROR,"can not find remote track in user object");return a.onError(e),e.throw()}return a.onSuccess(_.getTrackId()),_}async unsubscribe(e,t){var i,n,r,o,s;t&&gl(t,"mediaType",["audio","video"]);const a=Oy.reportApiInvoke(this._sessionId,{name:jA.UNSUBSCRIBE,options:[e.uid,t],tag:GA.TRACER});if(!Qo(i=this._users).call(i,t=>t===e)){var c;const t=new pl(ll.INVALID_REMOTE_USER,"user is not in the channel");throw Rc.error(Je(c="[".concat(this._clientId,"] can not subscribe ")).call(c,e.uid,", user is not in the channel")),a.onError(t),t}Rc.info(Je(n=Je(r="[".concat(this._clientId,"] unsubscribe uid: ")).call(r,e.uid,", mediaType: ")).call(n,t));let l=this._subscribeMutex.get(e.uid);l||(l=new ah("sub-".concat(e.uid)),this._subscribeMutex.set(e.uid,l));const u=await l.lock(),d=this._remoteStream.get(e.uid);var h;if(!d)return Rc.warning(Je(h="[".concat(this._clientId,"]: you have not subscribe the remote user ")).call(h,e.uid)),a.onSuccess(),void u();const p=iC({},d.subscribeOptions);"audio"===t?p.audio=!1:"video"===t?(p.video=!1,d.pc._statsFilter.setVideoIsReady(!1)):(p.audio=!1,p.video=!1);try{p.audio||p.video?await this._gateway.subscribeChange(d,p):(await d.closeP2PConnection(),this._remoteStream.delete(e.uid)),u()}catch(t){var f;if(t.code!==ll.OPERATION_ABORTED)throw a.onError(t),u(),Rc.error(Je(f="[".concat(this._clientId,"] unsubscribe user ")).call(f,e.uid," error"),t.toString()),t;u(),Rc.debug("[".concat(this._clientId,"] ignore unsub operation abort"))}Rc.info(Je(o=Je(s="[".concat(this._clientId,"] unsubscribe success uid: ")).call(s,e.uid,", mediaType: ")).call(o,t)),a.onSuccess()}setLowStreamParameter(e){!function(e){if(!e)throw new pl(hy.INVALID_PARAMS);yl(e.width)||ml(e.width,"streamParameter.width"),yl(e.height)||ml(e.height,"streamParameter.height"),yl(e.framerate)||ml(e.framerate,"streamParameter.framerate"),yl(e.bitrate)||ml(e.bitrate,"streamParameter.bitrate")}(e);const t=Oy.reportApiInvoke(this._sessionId,{name:jA.SET_LOW_STREAM_PARAMETER,options:[e],tag:GA.TRACER});(!e.width&&e.height||e.width&&!e.height)&&Rc.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),Rc.info("[".concat(this._clientId,"] set low stream parameter to"),ve(e));const i=this._configDistribute.getLowStreamConfigDistribute();i&&i.bitrate&&e.bitrate&&i.bitrate<e.bitrate&&(e.bitrate=i.bitrate),this._lowStreamParameter=e,t.onSuccess()}async enableDualStream(){const e=Oy.reportApiInvoke(this._sessionId,{name:jA.ENABLE_DUAL_STREAM,options:[],tag:GA.TRACER});if(!Fu().supportDualStream){Oy.streamSwitch(this._sessionId,{lts:Ma(),isdual:!0,succ:!1});const t=new pl(ll.NOT_SUPPORTED,"Your browser is not support dual stream");throw e.onError(t),t}if(this._isDualStreamEnabled){const t=new pl(ll.INVALID_OPERATION,"Dual stream is already enabled");throw e.onError(t),t}if(this._highStream&&"connected"===this._highStream.connectionState&&this._highStream.videoTrack)try{await this._publishLowStream(this._highStream.videoTrack)}catch(n){throw Oy.streamSwitch(this._sessionId,{lts:Ma(),isdual:!0,succ:!1}),e.onError(n),n}this._isDualStreamEnabled=!0,Oy.streamSwitch(this._sessionId,{lts:Ma(),isdual:!0,succ:!0}),Rc.info("[".concat(this._clientId,"] enable dual stream")),e.onSuccess()}async disableDualStream(){const e=Oy.reportApiInvoke(this._sessionId,{name:jA.DISABLE_DUAL_STREAM,options:[],tag:GA.TRACER});if(this._lowStream)try{await this._lowStream.closeP2PConnection()}catch(n){throw Oy.streamSwitch(this._sessionId,{lts:Ma(),isdual:!1,succ:!1}),e.onError(n),n}this._lowStream=void 0,this._isDualStreamEnabled=!1,this._highStream&&(this._highStream.lowStreamConnection=void 0),Oy.streamSwitch(this._sessionId,{lts:Ma(),isdual:!1,succ:!0}),Rc.info("[".concat(this._clientId,"] disable dual stream")),e.onSuccess()}async setClientRole(e,t){!function(e){gl(e,"role",["audience","host"])}(e),t&&MA(t);const i=Oy.reportApiInvoke(this._sessionId,{name:jA.SET_CLIENT_ROLE,options:[e,t],tag:GA.TRACER});if("rtc"===this._mode){Rc.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole"));const e=new pl(ll.INVALID_OPERATION,"rtc mode can not use setClientRole");return i.onError(e),e.throw()}if(t&&t.level&&"host"===e){const e=new pl(ll.INVALID_OPERATION,"host mode can not set audience latency level");return i.onError(e),e.throw()}try{var n,r;if("audience"===e&&this._highStream){const e=new pl(ll.INVALID_OPERATION,"can not set client role to audience when publishing stream");return i.onError(e),e.throw()}await this._gateway.setClientRole(e,t),Rc.info(Je(n=Je(r="[".concat(this._clientId,"] set client role to ")).call(r,e,", level: ")).call(n,t&&t.level)),i.onSuccess()}catch(e){throw i.onError(e),e}}setProxyServer(e){if(_l(e,"proxyServer"),"DISCONNECTED"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new pl(ll.INVALID_OPERATION,"You have already set the proxy");this._proxyServer=e,Oy.setProxyServer(this._proxyServer),Rc.setProxyServer(this._proxyServer)}setTurnServer(e){if(hl(e)||(e=[e]),"DISCONNECTED"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new pl(ll.INVALID_OPERATION,"You have already set the proxy");var t;if(function(e){if(!hl(e)||e.length<1)return!1;try{Ji(e).call(e,e=>{if(!e.urls)throw Error()})}catch(e){return!1}return!0}(e))return this._turnServer={servers:e,mode:"original-manual"},void Rc.info(Je(t="[".concat(this._clientId,"] Set original turnserver success: ")).call(t,vo(e).call(e,e=>e.urls).join(","),"."));Ji(e).call(e,e=>DA(e)),this._turnServer={servers:e,mode:"manual"},Rc.info("[".concat(this._clientId,"] Set turnserver success."))}startProxyServer(e){const t=Oy.reportApiInvoke(this._sessionId,{name:jA.START_PROXY_SERVER,options:[],tag:GA.TRACER});if("DISCONNECTED"!==this.connectionState){const e=new pl(ll.INVALID_OPERATION,"Start proxy server before join channel");throw t.onError(e),e}if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint){const e=new pl(ll.INVALID_OPERATION,"You have already set the proxy");throw t.onError(e),e}const i=[1,2,3,4,5];switch(void 0===e&&(e=1),e){case 1:this._cloudProxyServerMode="normal";break;case 2:this._cloudProxyServerMode="443only";break;case 3:this._cloudProxyServerMode="proxy3";break;case 4:this._cloudProxyServerMode="proxy4";break;case 5:this._cloudProxyServerMode="proxy5";break;default:{const e=new pl(ll.INVALID_PARAMS,"proxy server mode must be ".concat(i.join("|")));throw t.onError(e),e}}Rc.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),t.onSuccess()}stopProxyServer(){const e=Oy.reportApiInvoke(this._sessionId,{name:jA.STOP_PROXY_SERVER,options:[],tag:GA.TRACER});if("DISCONNECTED"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"Stop proxy server after leave channel");Oy.setProxyServer(),Rc.setProxyServer(),this._cloudProxyServerMode="disabled",Rc.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},e.onSuccess()}setLocalAccessPoints(e,t){if(vl(e,"serverList"),_l(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new pl(ll.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const i=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=vo(e).call(e,e=>{var n;return i.test(e)?Je(n="".concat(e.replace(/\./g,"-"),".")).call(n,t):e}),this._useLocalAccessPoint=!0,Vc("WEBCS_DOMAIN",e),Vc("WEBCS_DOMAIN_BACKUP_LIST",e),Vc("GATEWAY_DOMAINS",[t]),Vc("EVENT_REPORT_DOMAIN",e[0]),Vc("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),Vc("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),Rc.info("set local access point success")}async setRemoteVideoStreamType(e,t){var i,n;gl(t,"streamType",[0,1]);const r=Oy.reportApiInvoke(this._sessionId,{name:jA.SET_REMOTE_VIDEO_STREAM_TYPE,options:[e,t],tag:GA.TRACER});try{await this._gateway.setRemoteVideoStreamType(e,t),Fa(()=>{var t;const i=Qo(t=this._users).call(t,t=>t.uid===e);i&&i.videoTrack&&i.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(e){throw r.onError(e),Rc.error("[".concat(this._clientId,"] set remote video stream type error"),e.toString()),e}Rc.info(Je(i=Je(n="[".concat(this._clientId,"] set remote ")).call(n,e," video stream type to ")).call(i,t)),this._remoteStreamTypeCacheMap.set(e,t),r.onSuccess()}async setStreamFallbackOption(e,t){var i,n;gl(t,"fallbackType",[0,1,2]);const r=Oy.reportApiInvoke(this._sessionId,{name:jA.SET_STREAM_FALLBACK_OPTION,options:["too long to show",t],tag:GA.TRACER});try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw r.onError(e),Rc.error("[".concat(this._clientId,"] set stream fallback option"),e.toString()),e}Rc.info(Je(i=Je(n="[".concat(this._clientId,"] set remote ")).call(n,e," stream fallback type to ")).call(i,t)),this._streamFallbackTypeCacheMap.set(e,t),r.onSuccess()}setEncryptionConfig(e,t,i){!function(e){gl(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),_l(t,"secret");const n=["aes-128-gcm2","aes-256-gcm2"];if(ns(n).call(n,e)){if(!i||!(i instanceof Uint8Array&&32===i.length))throw new pl(ll.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(i)throw new pl(ll.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||Rc.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,i&&(this._encryptionSalt=Wp(i))}async renewToken(e){_l(e,"token",1,2047);const t=Oy.reportApiInvoke(this._sessionId,{name:jA.RENEW_TOKEN,options:[e],tag:GA.TRACER});if(!this._key){const e=new pl(ll.INVALID_OPERATION,"renewToken should not be called before user join");return t.onError(e),e.throw()}this._key=e;try{await this._gateway.renewToken(e)}catch(e){throw t.onError(e),Rc.error("[".concat(this._clientId,"] renewToken failed"),e.toString()),e}Rc.debug("[".concat(this._clientId,"] renewToken success")),t.onSuccess()}enableAudioVolumeIndicator(){const e=Oy.reportApiInvoke(this._sessionId,{name:jA.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:GA.TRACER});if(this._audioVolumeIndicationInterval)return Rc.warning("you have already enabled audio volume indicator!"),e.onSuccess();this._audioVolumeIndicationInterval=window.setInterval(()=>{var e,t,i;let n=cl(e=vo(t=Bd(Jp(i=this._remoteStream).call(i))).call(t,e=>({level:e.user.audioTrack?100*e.user.audioTrack._source.getAccurateVolumeLevel():0,uid:e.getUserId()}))).call(e,(e,t)=>e.level-t.level);this._highStream&&this._highStream.audioTrack&&(n.push({level:100*this._highStream.audioTrack._source.getAccurateVolumeLevel(),uid:this._highStream._userId}),n=cl(n).call(n,(e,t)=>e.level-t.level)),this.emit(bA.VOLUME_INDICATOR,n)},jc("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3),e.onSuccess()}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}startLiveStreaming(e,t){const i=Oy.reportApiInvoke(this._sessionId,{name:jA.START_LIVE_STREAMING,options:[e,t],tag:GA.TRACER});if(!t){if("h264"!==this._codec){const e=new pl(ll.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");return i.onError(e),fo.reject(e)}if(!this._highStream){const e=new pl(ll.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");return i.onError(e),fo.reject(e)}}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e)){const e=new pl(ll.LIVE_STREAMING_TASK_CONFLICT);return i.onError(e),fo.reject(e)}const n=t?cy.TRANSCODE:cy.RAW;return this._createLiveStreamingClient(n).startLiveStreamingTask(e,n).then(()=>i.onSuccess()).catch(e=>{throw i.onError(e),e})}setLiveTranscoding(e){const t=Oy.reportApiInvoke(this._sessionId,{name:jA.SET_LIVE_TRANSCODING,options:[e],tag:GA.TRACER});return this._createLiveStreamingClient(cy.TRANSCODE).setTranscodingConfig(e).then(()=>t.onSuccess()).catch(e=>{throw t.onError(e),e})}stopLiveStreaming(e){var t;const i=Oy.reportApiInvoke(this._sessionId,{name:jA.STOP_LIVE_STREAMING,options:[e],tag:GA.TRACER}),n=Gn(t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient]).call(t,t=>t&&t.hasUrl(e));if(!n.length){const e=new pl(ll.INVALID_PARAMS,"can not find live streaming url to stop");return i.onError(e),fo.reject(e)}return fo.all(vo(n).call(n,t=>t&&t.stopLiveStreamingTask(e))).then(()=>i.onSuccess()).catch(e=>{throw i.onError(e),e})}async addInjectStreamUrl(e,t){const i=Oy.reportApiInvoke(this._sessionId,{name:jA.ADD_INJECT_STREAM_URL,options:[e,t],tag:GA.TRACER});try{if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const i=this._createLiveStreamingClient(cy.INJECT);i.setInjectStreamConfig(t,0),await i.startLiveStreamingTask(e,cy.INJECT)}catch(e){throw i.onError(e),e}i.onSuccess()}async removeInjectStreamUrl(){const e=Oy.reportApiInvoke(this._sessionId,{name:jA.REMOVE_INJECT_STREAM_URL,options:[],tag:GA.TRACER});try{var t,i;const e=this._createLiveStreamingClient(cy.INJECT),n=Qo(t=Bd(Jp(i=e.streamingTasks).call(i))).call(t,e=>e.mode===cy.INJECT);if(!this._joinInfo||!n)throw new pl(ll.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await e.stopLiveStreamingTask(n.url)}catch(t){throw e.onError(t),t}e.onSuccess()}async startChannelMediaRelay(e){const t=Oy.reportApiInvoke(this._sessionId,{name:jA.START_CHANNEL_MEDIA_RELAY,options:[e],tag:GA.TRACER});try{V_(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}catch(e){return t.onError(e),e.throw()}t.onSuccess()}async updateChannelMediaRelay(e){const t=Oy.reportApiInvoke(this._sessionId,{name:jA.UPDATE_CHANNEL_MEDIA_RELAY,options:[e],tag:GA.TRACER});try{V_(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}catch(e){return t.onError(e),e.throw()}t.onSuccess()}async stopChannelMediaRelay(){const e=Oy.reportApiInvoke(this._sessionId,{name:jA.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:GA.TRACER});try{const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay()}catch(n){return e.onError(n),n.throw()}e.onSuccess()}sendStreamMessage(e,t=!0){if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof e&&(e=(new TextEncoder).encode(e)),new Blob([e]).size>1024)throw new pl(ll.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(JA.DATA_STREAM,{payload:Wp(e)},!t)}sendMetadata(e){if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new pl(ll.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(JA.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Wp(e)})}async sendCustomReportMessage(e){hl(e)||(e=[e]),Ji(e).call(e,xA);const t=Oy.reportApiInvoke(this._sessionId,{name:jA.SEND_CUSTOM_REPORT_MESSAGE,options:[ve(e)],tag:GA.TRACER});if(!this._joinInfo){const e=new pl(ll.INVALID_OPERATION,"can not send custom report, not joined");return t.onError(e),e.throw()}await Oy.sendCustomReportMessage(this._joinInfo.sid,e),t.onSuccess()}getLocalAudioStats(){if(!this._highStream)return ny;const e=this._statsCollector.getLocalAudioTrackStats(this._highStream.connectionId);return Ta()&&this._highStream&&this._highStream.audioTrack&&(this._highStream.audioTrack instanceof Hy?!this._highStream.audioTrack.isActive:!this._highStream.audioTrack.enabled)&&(e.sendVolumeLevel=0),e}getRemoteAudioStats(){var e;const t={};return Ji(e=this._remoteStream).call(e,(e,i)=>{t[i]=this._statsCollector.getRemoteAudioTrackStats(e.connectionId)}),t}getLocalVideoStats(){return this._highStream?this._statsCollector.getLocalVideoTrackStats(this._highStream.connectionId):ry}getRemoteVideoStats(){var e;const t={};return Ji(e=this._remoteStream).call(e,(e,i)=>{t[i]=this._statsCollector.getRemoteVideoTrackStats(e.connectionId)}),t}getRemoteNetworkQuality(){var e;const t={};return Ji(e=this._remoteStream).call(e,(e,i)=>{t[i]=this._statsCollector.getRemoteNetworkQualityStats(e.connectionId)}),t}async pickSVCLayer(e,t){gl(t.spatialLayer,"spatialLayer",[0,1,2,3]),gl(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw Rc.error("[".concat(this._clientId,"] pick SVC layer failed"),e.toString()),e}}_reset(){var e,t,i;Rc.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=Sc.CancelToken.source(),this._streamFallbackTypeCacheMap=new Mi,this._remoteStreamTypeCacheMap=new Mi,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,Ji(e=this._users).call(e,e=>{e.audioTrack&&(e.audioTrack.stop(),e.audioTrack._isDestroyed=!0),e.videoTrack&&(e.videoTrack.stop(),e.videoTrack._isDestroyed=!0)}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._highStream&&(this._highStream.closeP2PConnection(!0),this._highStream=void 0),Ji(t=this._bindEnabledTracks).call(t,e=>{e.off(my.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.off(my.NEED_REMOVE_TRACK,this._handleLocalTrackDisable)}),this._bindEnabledTracks=[],this._lowStream&&(this._lowStream.closeP2PConnection(!0),this._lowStream=void 0),Ji(i=this._remoteStream).call(i,e=>{e.closeP2PConnection(!0)}),this._remoteStream=new Mi,this._publishMutex=new ah("client-publish"),this._subscribeMutex=new Mi,this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0)}_startSession(e,t){var i,n,r;const o=e||kp();e?Rc.debug(Je(i="[".concat(this._clientId,"] new Session ")).call(i,o)):Rc.debug(Je(n=Je(r="[".concat(this._clientId,"] renewSession ")).call(r,this._sessionId," => ")).call(n,o)),this._sessionId=o,t?Oy.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:t.channel,appid:t.appId,mode:this._mode}):this._joinInfo?Oy.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&Oy.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=o),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=o)}async _publishHighStream(e){if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&jc("FORCE_TURN")&&!jc("TURN_ENABLE_TCP")&&!jc("TURN_ENABLE_UDP"))throw new pl(ll.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");if(Rc.debug("[".concat(this._clientId,"] publish high stream")),this._highStream)return await this._highStream.addTracks(e),this._highStream;this._highStream=new $S(this._statsCollector,this._joinInfo,this._codec),this._highStream.on(ty.P2P_LOST,()=>{this._highStream&&this.emit(bA.P2P_LOST,this._highStream.getUserId())}),await this._highStream.addTracks(e);try{await this._gateway.publish(this._highStream,"high")}catch(e){throw this._highStream=void 0,e}return this._highStream.on(ty.CONNECTION_STATE_CHANGE,(e,t)=>{this._highStream&&("connected"===e?this.emit(bA.MEDIA_RECONNECT_END,this._highStream.getUserId()):"connecting"===e&&this.emit(bA.MEDIA_RECONNECT_START,this._highStream.getUserId()))}),this._highStream}async _publishLowStream(e){if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(!this._highStream||"connected"!==this._highStream.connectionState)throw new pl(ll.UNEXPECTED_ERROR,"Could not find high stream");if(this._lowStream)return new pl(ll.UNEXPECTED_ERROR,"[".concat(this._clientId,"] Can't publish low stream when stream already publish")).throw();Rc.debug("[".concat(this._clientId,"] publish low stream")),this._lowStream=new $S(this._statsCollector,this._joinInfo,this._codec,!0);const t=this._configDistribute.getLowStreamConfigDistribute();t&&t.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&t.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=t.bitrate)),this._lowStream.lowStreamParameter=this._lowStreamParameter,await this._lowStream.addTracks([e]);try{await this._gateway.publish(this._lowStream,"low")}catch(e){throw this._lowStream=void 0,e}this._highStream.lowStreamConnection=this._lowStream}_createLiveStreamingClient(e){if(!this._joinInfo||!this._appId)return new pl(ll.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const t=()=>new U_(this._joinInfo,this._config.websocketRetryConfig||zd,this._config.httpRetryConfig||zd),i=e=>{e.onLiveStreamError=(e,t)=>{Oy.reportApiInvoke(this._sessionId,{name:jA.ON_LIVE_STREAM_ERROR,options:[e,t],tag:GA.TRACER}).onSuccess(),this.emit(bA.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{Oy.reportApiInvoke(this._sessionId,{name:jA.ON_LIVE_STREAM_WARNING,options:[e,t],tag:GA.TRACER}).onSuccess(),this.emit(bA.LIVE_STREAMING_WARNING,e,t)},e.on(uy.REQUEST_WORKER_MANAGER_LIST,(e,t,i)=>{if(!this._joinInfo)return i(new pl(ll.INVALID_OPERATION,"can not find join info to get worker manager"));yS(e,this._joinInfo,this._axiosCancelSource.token,zd).then(t).catch(i)})};switch(e){case cy.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=t(),i(this._liveRawStreamingClient)),this._liveRawStreamingClient;case cy.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=t(),i(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case cy.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=t(),this._injectStreamingClient.on(uy.REQUEST_WORKER_MANAGER_LIST,(e,t,i)=>{if(!this._joinInfo)return i(new pl(ll.INVALID_OPERATION,"can not find join info to get worker manager"));yS(e,this._joinInfo,this._axiosCancelSource.token,zd).then(t).catch(i)}),this._injectStreamingClient.onInjectStatusChange=(e,t,i)=>{this.emit(bA.INJECT_STREAM_STATUS,e,t,i)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new G_(this._joinInfo,this._clientId,this._config.websocketRetryConfig||zd,this._config.httpRetryConfig||zd),this._channelMediaRelayClient.on("state",e=>{"RELAY_STATE_FAILURE"===e&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(bA.CHANNEL_MEDIA_RELAY_STATE,e)}),this._channelMediaRelayClient.on("event",e=>{this.emit(bA.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._channelMediaRelayClient):new pl(ll.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){this._gateway.on(_u.DISCONNECT_P2P,()=>{var e;Rc.debug("[".concat(this._clientId,"] start full reconnect")),this._highStream&&"disconnected"!==this._highStream.connectionState&&(Rc.debug("[".concat(this._clientId,"] ready to reconnect high stream")),this._highStream.readyToReconnectPC()),this._lowStream&&"disconnected"!==this._lowStream.connectionState&&(Rc.debug("[".concat(this._clientId,"] ready to reconnect low stream")),this._lowStream.readyToReconnectPC()),Ji(e=this._remoteStream).call(e,(e,t)=>{var i;Rc.debug(Je(i="[".concat(this._clientId,"] ready to reconnect remote stream ")).call(i,t)),e.readyToReconnectPC()})}),this._gateway.on(_u.CONNECTION_STATE_CHANGE,(e,t,i)=>{var n,r;const o=()=>{this.emit(bA.CONNECTION_STATE_CHANGE,e,t,i)};if(Rc.info(Je(n=Je(r="[".concat(this._clientId,"] connection state change: ")).call(r,t," -> ")).call(n,e)),"DISCONNECTED"===e)return this._reset(),void o();var s,a;if("RECONNECTING"===e)this._highStream&&"connecting"===this._highStream.connectionState&&(Rc.debug("[".concat(this._clientId,"] ready to reconnect high stream")),this._highStream.readyToReconnectPC()),this._lowStream&&"connecting"===this._lowStream.connectionState&&(Rc.debug("[".concat(this._clientId,"] ready to reconnect low stream")),this._lowStream.readyToReconnectPC()),Ji(s=this._remoteStream).call(s,(e,t)=>{var i;"connecting"===e.connectionState&&(Rc.debug(Je(i="[".concat(this._clientId,"] ready to reconnect remote stream ")).call(i,t)),e.readyToReconnectPC())}),Ji(a=this._users).call(a,e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_stream_added_state_=!1}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===e){var c,l;Ji(c=this._streamFallbackTypeCacheMap).call(c,(e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch(e=>Rc.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e))}),Ji(l=this._remoteStreamTypeCacheMap).call(l,(e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch(e=>Rc.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e))}),this._highStream&&"connecting"===this._highStream.connectionState?this._highStream.reconnectPC().then(()=>{this._lowStream&&"connecting"===this._lowStream.connectionState&&this._lowStream.reconnectPC().catch(e=>{Rc.error("[".concat(this._clientId,"] republish low stream error"),e.toString()),this.emit(bA.ERROR,{reason:e})})}).catch(e=>{Rc.error("[".concat(this._clientId,"] republish high stream error"),e.toString()),this.emit(bA.ERROR,{reason:e})}):this._lowStream&&"connecting"===this._lowStream.connectionState&&this._lowStream.reconnectPC().catch(e=>{Rc.error("[".concat(this._clientId,"] republish low stream error"),e.toString()),this.emit(bA.ERROR,{reason:e})}),this._userOfflineTimeout=window.setTimeout(()=>{var e;if("CONNECTED"!==this.connectionState)return;this._userOfflineTimeout=void 0;const t=Gn(e=this._users).call(e,e=>!e._trust_in_room_);Ji(t).call(t,e=>{var t;Rc.debug(Je(t="[".concat(this._clientId,"] user offline timeout, emit user offline ")).call(t,e.uid)),this._handleUserOffline({uid:e.uid})})},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{var e;"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,Ji(e=this._users).call(e,e=>{var t,i,n,r,o;e._trust_audio_mute_state_||(Rc.debug(Je(t="[".concat(this._clientId,"] auto dispatch audio unmute event ")).call(t,e.uid)),this._handleMuteStream(e.uid,"audio",!1)),e._trust_video_mute_state_||(Rc.debug(Je(i="[".concat(this._clientId,"] auto dispatch video unmute event ")).call(i,e.uid)),this._handleMuteStream(e.uid,"video",!1)),e._trust_audio_enabled_state_||(Rc.debug(Je(n="[".concat(this._clientId,"] auto dispatch enable local audio ")).call(n,e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),!e._trust_video_enabled_state_&&e._video_enabled_&&(Rc.debug(Je(r="[".concat(this._clientId,"] auto dispatch enable local video ")).call(r,e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_stream_added_state_||(Rc.debug(Je(o="[".concat(this._clientId,"] auto dispatch stream remove ")).call(o,e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))}))},1e3)}o()}),this._gateway.on(_u.REQUEST_NEW_GATEWAY_LIST,(e,t)=>{if(!this._joinInfo)return t(new pl(ll.UNEXPECTED_ERROR,"can not recover, no join info"));_S(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||zd).then(t=>{var i;this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res),e(vo(i=t.gatewayInfo.gatewayAddrs).call(i,e=>{if(this._joinInfo&&this._joinInfo.proxyServer){var t,i;const n=e.split(":");return Je(t=Je(i="wss://".concat(this._joinInfo.proxyServer,"/ws/?h=")).call(i,n[0],"&p=")).call(t,n[1])}return"wss://".concat(e)}))}).catch(t)}),this._gateway.on(_u.NETWORK_QUALITY,e=>{"normal"===this._networkQualitySensitivity&&this.emit(bA.NETWORK_QUALITY,e)}),this._gateway.on(_u.STREAM_TYPE_CHANGE,(e,t)=>{this.emit(bA.STREAM_TYPE_CHANGED,e,t),Oy.reportApiInvoke(this._sessionId,{name:jA.STREAM_TYPE_CHANGE,options:[e,t],tag:GA.TRACER}).onSuccess(ve({uid:e,streamType:t}))}),this._gateway.on(_u.IS_P2P_DISCONNECTED,e=>{var t,i,n;const r=[];return this._highStream&&r.push(this._highStream),Ji(t=this._remoteStream).call(t,e=>r.push(e)),0===r.length||0===Gn(r).call(r,e=>"connected"===e.connectionState).length?e(!0):(Rc.debug(Je(i="[".concat(this._clientId,"] ")).call(i,vo(n=Gn(r).call(r,e=>"connected"===e.connectionState)).call(n,e=>e.connectionId)," is connected")),void e(!1))}),this._gateway.on(_u.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.signal.on(ey.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(ey.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(ey.ON_ADD_AUDIO_STREAM,e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.uint_id)),this._gateway.signal.on(ey.ON_ADD_VIDEO_STREAM,e=>this._handleAddAudioOrVideoStream("video",e.uid,e.uint_id)),this._gateway.signal.on(ey.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(ey.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(ey.MUTE_AUDIO,e=>this._handleMuteStream(e.uid,"audio",!0)),this._gateway.signal.on(ey.UNMUTE_AUDIO,e=>this._handleMuteStream(e.uid,"audio",!1)),this._gateway.signal.on(ey.MUTE_VIDEO,e=>this._handleMuteStream(e.uid,"video",!0)),this._gateway.signal.on(ey.UNMUTE_VIDEO,e=>this._handleMuteStream(e.uid,"video",!1)),this._gateway.signal.on(ey.RECEIVE_METADATA,e=>{const t=Qp(e.metadata);this.emit(bA.RECEIVE_METADATA,e.uid,t)}),this._gateway.signal.on(ey.ON_DATA_STREAM,e=>{e.seq&&delete e.seq,e.payload=Qp(e.payload),this.emit(bA.STREAM_MESSAGE,e.uid,e.payload),this.onStreamMessage&&this.onStreamMessage(e)}),this._gateway.signal.on(ey.ON_CRYPT_ERROR,()=>{Hp(()=>{Rc.warning("[".concat(this._clientId,"] on crypt error")),this.emit(bA.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(ey.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(ey.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{Rc.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._reset(),this._gateway.leave(!0),this.emit(bA.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this._gateway.signal.on(ey.ON_STREAM_FALLBACK_UPDATE,e=>{var t,i;Rc.debug(Je(t=Je(i="[".concat(this._clientId,"] stream fallback peerId: ")).call(i,e.stream_id,", attr: ")).call(t,e.stream_type)),this.emit(bA.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")}),this._gateway.signal.on(ey.ON_PUBLISH_STREAM,e=>{var t;this.uid===this._uid&&(this._highStream&&this._highStream._waitingSuccessResponse&&"connected"===this._highStream.connectionState?(this._highStream.reportPublishEvent(!0,null,ve({proxy:e.proxy})),Rc.info(Je(t="[".concat(this._clientId,"] on publish stream, ")).call(t,ve(e))),void 0!==e.proxy&&this.emit(bA.IS_USING_CLOUD_PROXY,!!e.proxy)):this._lowStream?this._lowStream.reportPublishEvent(!0,null,ve({proxy:e.proxy})):Rc.warning("get on_publish_stream message but cannot handle"))}),this._gateway.signal.on(ey.ENABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)}),this._gateway.signal.on(ey.DISABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)}),this._gateway.signal.on(KA.REQUEST_TIMEOUT,(e,t)=>{if(this._joinInfo)switch(e){case JA.PUBLISH:{var i;if(!t)return;const e="high"===t.stream_type?this._highStream:this._lowStream;if(!e)return;"offer"===t.state&&Oy.publish(this._joinInfo.sid,{lts:e.startTime,succ:!1,ec:ll.TIMEOUT,audio:t.audio,video:t.video,p2pid:t.p2p_id,publishRequestid:e.ID,screenshare:!(!e.videoTrack||-1===Lo(i=e.videoTrack._hints).call(i,_y.SCREEN_TRACK)),audioName:e.audioTrack&&(e.audioTrack instanceof Hy?e.audioTrack.getSubTrackLabels().join(","):e.audioTrack.getTrackLabel()),videoName:e.videoTrack&&e.videoTrack.getTrackLabel()});break}case JA.SUBSCRIBE:{const e=t.stream_id,i=this._remoteStream.get(e);if(!i)return;t&&Oy.subscribe(this._joinInfo.sid,{lts:i.startTime,succ:!1,ec:ll.TIMEOUT,audio:!!t.audio,video:!!t.video,peerid:t.stream_id,subscribeRequestid:i.ID,p2pid:i.pc.ID});break}}})}}async function sC(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection;t.addTransceiver("video",{direction:"recvonly"}),t.addTransceiver("audio",{direction:"recvonly"});const i=(await t.createOffer()).sdp;if(!i)return e;t.close(),t=null,e=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1X/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),t}(i)}catch(e){throw new pl(ll.CREATE_OFFER_FAILED,e.toString&&e.toString()).print()}return e}function aC(){const e=rh.reportApiInvoke(null,{name:Nl.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Ll.TRACER});let t=!1;try{const e=window.RTCPeerConnection,i=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,n=window.WebSocket;t=!!(e&&i&&n)}catch(e){return Rc.error("check system requirement failed: ",e),!1}let i=!1;const n=ma();n.name===ha.CHROME&&Number(n.version)>=58&&(!Ca()||Sa())&&(i=!0),n.name===ha.FIREFOX&&Number(n.version)>=56&&(i=!0),n.name===ha.OPERA&&Number(n.version)>=45&&(i=!0),n.name===ha.SAFARI&&Number(n.version)>=11&&(i=!0),(La()||ma().name===ha.QQ)&&(i=!0),Rc.debug("checkSystemRequirements, api:",t,"browser",i);const r=t&&i;return e.onSuccess(r),r}nC([Ry({report:Oy}),rC("design:type",Function),rC("design:paramtypes",[String]),rC("design:returntype",void 0)],oC.prototype,"setProxyServer",null),nC([Ry(),rC("design:type",Function),rC("design:paramtypes",[Object]),rC("design:returntype",void 0)],oC.prototype,"setTurnServer",null),nC([Ry({report:Oy}),rC("design:type",Function),rC("design:paramtypes",[Array,String]),rC("design:returntype",void 0)],oC.prototype,"setLocalAccessPoints",null),nC([Ry({report:Oy}),rC("design:type",Function),rC("design:paramtypes",[String,String,Uint8Array]),rC("design:returntype",void 0)],oC.prototype,"setEncryptionConfig",null),nC([wy({report:Oy}),rC("design:type",Function),rC("design:paramtypes",[Object,Object]),rC("design:returntype",fo)],oC.prototype,"pickSVCLayer",null);class cC extends Eh{constructor(e,t={}){super(),this.startPlayTime=0,this.startPlayOffset=0,this.pausePlayTime=0,this.currentLoopCount=0,this._currentState="stopped",this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}set currentState(e){e!==this._currentState&&(this._currentState=e,this.emit(zl.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):Rc.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}startSourceNode(){var e;this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=Ko(e=this.handleSourceNodeEnded).call(e,this))}createSourceNode(){const e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const lC=new Mi;async function uC(e,t){let i=null;if("string"==typeof e){const t=lC.get(e);if(t)return Rc.debug("use cached audio resource: ",e),t;try{i=(await Yd(()=>Sc.get(e,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(e){throw new pl(ll.FETCH_AUDIO_FILE_FAILED,e.toString())}}else{const t=new fo((t,i)=>{const n=new FileReader;n.onload=e=>{e.target?t(e.target.result):i(new pl(ll.READ_LOCAL_AUDIO_FILE_ERROR))},n.onerror=()=>{i(new pl(ll.READ_LOCAL_AUDIO_FILE_ERROR))},n.readAsArrayBuffer(e)});i=await t}const n=await function(e){const t=gh();return new fo((i,n)=>{t.decodeAudioData(e,e=>{i(e)},e=>{n(new pl(ll.DECODE_AUDIO_FILE_FAILED,e.toString()))})})}(i);return"string"==typeof e&&t&&lC.set(e,n),n}function dC(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function hC(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=dC(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=dC(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}function pC(e,t,i,n){i.optimizationMode&&(n&&n.width&&n.height?(i.encoderConfig=hC({},n,{bitrateMin:n.bitrateMin,bitrateMax:n.bitrateMax}),"motion"!==i.optimizationMode&&"detail"!==i.optimizationMode||(t.contentHint=i.optimizationMode,t.contentHint===i.optimizationMode?Rc.debug("[".concat(e,"] set content hint to"),i.optimizationMode):Rc.debug("[".concat(e,"] set content hint failed")))):Rc.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}function fC(e,t){var i=on(e);if(wd){var n=wd(e);t&&(n=Gn(n).call(n,(function(t){return Un(e,t).enumerable}))),i.push.apply(i,n)}return i}function gC(e){for(var t=1;t<arguments.length;t++){var i,n=null!=arguments[t]?arguments[t]:{};if(t%2)Ji(i=fC(Object(n),!0)).call(i,(function(t){kd(e,t,n[t])}));else if(Hu)ae(e,Hu(n));else{var r;Ji(r=fC(Object(n))).call(r,(function(t){hn(e,t,Un(n,t))}))}}return e}function mC(e,t,i,n){i.optimizationMode&&(n&&n.width&&n.height?(i.encoderConfig=gC({},n,{bitrateMin:n.bitrateMin,bitrateMax:n.bitrateMax}),"motion"!==i.optimizationMode&&"detail"!==i.optimizationMode||(t.contentHint=i.optimizationMode,t.contentHint===i.optimizationMode?Rc.debug("[".concat(e,"] set content hint to"),i.optimizationMode):Rc.debug("[".concat(e,"] set content hint failed")))):Rc.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var _C=M.setInterval;const vC=ma().name,EC=ma().name;class AC{constructor(e,t){this.id=0,AC.count+=1,this.id=AC.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{const t=document.createElement("audio");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(!this.peerPair)return;const e=async(e,t)=>{const i="offer"===t?await e.createOffer():await e.createAnswer();return await e.setLocalDescription(i),"complete"===e.iceGatheringState?e.localDescription:new fo(t=>{e.onicegatheringstatechange=()=>{"complete"===e.iceGatheringState&&t(e.localDescription)}})},t=async(e,t)=>await e.setRemoteDescription(t);try{const i=await e(this.peerPair[0],"offer");await t(this.peerPair[1],i);const n=await e(this.peerPair[1],"answer");await t(this.peerPair[0],n)}catch(e){throw new pl(ll.LOCAL_AEC_ERROR,e.toString()).print()}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(e).connect(t)}catch(e){throw new pl(ll.LOCAL_AEC_ERROR,e.toString()).print()}if(!t)throw new pl(ll.LOCAL_AEC_ERROR,"no dest node when local aec").print();const i=t.stream.getAudioTracks()[0];return this.audioTrack=i,i}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const e=this.element,t=await this.getTracksFromMediaElement(e);this.peerPair&&this.peerPair[0].addTrack(t),await this.switchSdp()}close(){var e;Rc.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&Ji(e=this.peerPair).call(e,e=>{e.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}AC.count=0;var yC=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Un(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&hn(t,i,s),s},SC=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const CC=window.AudioContext||window.webkitAudioContext;class bC{constructor(){this.units=[]}processExternalMediaAEC(e){var t;if(!this._doesEnvironmentNeedAEC())return Rc.debug("the system does not need to process local aec"),-1;this.context||(this.context=new CC);let i=Qo(t=this.units).call(t,t=>t&&t.getElement()===e);return i||(i=new AC(e,this.context),this.units.push(i)),i.startEchoCancellation(),Rc.debug("start processing local audio echo cancellation, id is",i.id),i.id}_doesEnvironmentNeedAEC(){return ma().name!==ha.SAFARI}}yC([ih({report:rh}),SC("design:type",Function),SC("design:paramtypes",[HTMLAudioElement]),SC("design:returntype",Number)],bC.prototype,"processExternalMediaAEC",null);const TC=new bC;var IC,RC,wC,OC;function kC(e){return Ph.enumerateDevices(!0,!0,e)}function NC(e){return Ph.getRecordingDevices(e)}function LC(e){return Ph.getCamerasDevices(e)}function PC(e){return Ph.getSpeakers(e)}function DC(){return new F_}function MC(e){Rc.setLogLevel(e)}function xC(){Rc.enableLogUpload()}function BC(){Rc.disableLogUpload()}async function UC(e,t){var i;if(Rc.debug(Je(i="loadModule: ".concat(e.name,", loadOption: ")).call(i,ve(t))),!e.moduleInit)throw Rc.debug("Invalid Plugin"),new pl(ll.INVALID_PLUGIN,"invalid plugin");try{await e.moduleInit({logger:Rc,report:rh},t)}catch(e){throw new pl(ll.UNEXPECTED_ERROR,"unexpected error in loadModule",e)}}function FC(e){TC.processExternalMediaAEC(e)}Vc("PROCESS_ID",Je(IC=Je(RC=Je(wC=Je(OC="process-".concat(Op(8,""),"-")).call(OC,Op(4,""),"-")).call(wC,Op(4,""),"-")).call(RC,Op(4,""),"-")).call(IC,Op(12,""))),function(){const e=ma();Uu.getDisplayMedia=function(e){return!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia)}(),Uu.getStreamFromExtension=e.name===ha.CHROME&&Number(e.version)>34,Uu.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),Uu.supportMinBitrate=e.name===ha.CHROME||e.name===ha.EDGE,Uu.supportSetRtpSenderParameters=function(){const e=ma();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!Da()||!(!Ta()&&!ya())||e.name===ha.FIREFOX&&Number(e.version)>=64)}(),e.name===ha.SAFARI&&(Number(e.version)>=14?Uu.supportDualStream=!0:Uu.supportDualStream=!1),Uu.webAudioMediaStreamDest=function(){const e=ma();return!(e.name===ha.SAFARI&&Number(e.version)<12)}(),Uu.supportReplaceTrack=function(){return!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack}(),Uu.supportWebGL="undefined"!=typeof WebGLRenderingContext,Uu.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Da()||(Uu.webAudioWithAEC=!0),Uu.supportShareAudio=function(){const e=ma();return(e.os===da.WIN_10||e.os===da.WIN_81||e.os===da.WIN_7||e.os===da.LINUX||e.os===da.MAC_OS)&&e.name===ha.CHROME&&Number(e.version)>=74}(),Uu.supportDualStreamEncoding=function(){const e=ma();return"Safari"===e.name&&Number(e.version)>=14}(),Rc.info("browser compatibility",ve(Uu),ve(e))}(),function(){const e=window.localStorage.getItem("websdk_ng_global_parameter");if(e)try{var t;const i=JSON.parse(window.atob(e)),n=Ma();Rc.debug("Loading global parameters from cache",i),Ji(t=on(i)).call(t,e=>{if(Object.prototype.hasOwnProperty.call(Gc,e)){const{value:t,expires:r}=i[e];if(r&&r<=n)return;Hc[e]=t,Gc[e]=t}})}catch(t){Rc.error("Error loading mutableParamsCache: ".concat(e),t.message)}}();const VC={__CLIENT_LIST__:Zc,__TRACK_LIST__:Yc,VERSION:Oc,BUILD:wc,setParameter:Vc,getParameter:jc,getSupportedCodec:sC,checkSystemRequirements:aC,getDevices:kC,getMicrophones:NC,getCameras:LC,getElectronScreenSources:Ch,getPlaybackDevices:PC,createClient:function(e={codec:"vp8",mode:"rtc"}){const t=rh.reportApiInvoke(null,{name:Nl.CREATE_CLIENT,options:[e],tag:Ll.TRACER});try{!function(e){gl(e.codec,"config.codec",["vp8","vp9","av1","h264"]),gl(e.mode,"config.mode",["rtc","live"]),void 0!==e.proxyServer&&_l(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&Kl(e.turnServer),void 0!==e.httpRetryConfig&&Zl(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&Zl(e.websocketRetryConfig)}(e)}catch(e){throw t.onError(e),e}return t.onSuccess(),new LA(CA({forceWaitGatewayResponse:!0},e,{role:"rtc"===e.mode?"host":e.role}))},createCameraVideoTrack:async function(e={encoderConfig:"480p_1"}){const t=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CREATE_CAM_VIDEO_TRACK,options:[hC({},e)]}),i=fv(e),n=Op(8,"track-cam-");let r=null;Rc.info("start create camera video track with config",ve(e),"trackId",n);try{r=(await Oh({video:i},n)).getVideoTracks()[0]||null}catch(e){throw t.onError(e),e}if(!r){const e=new pl(ll.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw()}e.optimizationMode&&pC(n,r,e,e.encoderConfig&&Mc(e.encoderConfig));const o=new Tv(r,e,i,e.scalabiltyMode?Bc(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,n);return t.onSuccess(o.getTrackId()),Rc.info("create camera video success, trackId:",n),o},createCustomVideoTrack:function(e){const t=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),i=new bv(e.mediaStreamTrack,{bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?Bc(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode);return t.onSuccess(i.getTrackId()),Rc.info("create custom video track success with config",e,"trackId",i.getTrackId()),i},createScreenVideoTrack:async function(e={},t="disable"){const i=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CREATE_SCREEN_VIDEO_TRACK,options:[hC({},e),t]});e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const n=gv(e),r=Op(8,"track-scr");let o=null,s=null;const a=Fu();if(!a.supportShareAudio&&"enable"===t){const e=new pl(ll.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return i.onError(e),e.throw()}Rc.info("start create screen video track with config",e,"withAudio",t,"trackId",r);try{const e=await Oh({screen:n,screenAudio:"auto"===t?a.supportShareAudio:"enable"===t},r);o=e.getVideoTracks()[0]||null,s=e.getAudioTracks()[0]||null}catch(e){throw i.onError(e),e}if(!o){const e=new pl(ll.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(e),e.throw()}if(!s&&"enable"===t){o&&o.stop();const e=new pl(ll.SHARE_AUDIO_NOT_ALLOWED);return i.onError(e),e.throw()}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(pC(r,o,e,e.encoderConfig&&xc(e.encoderConfig)),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const c=new bv(o,e.encoderConfig?xc(e.encoderConfig):{},e.scalabiltyMode?Bc(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r);if(c._hints.push(Eu.SCREEN_TRACK),!s)return i.onSuccess(c.getTrackId()),Rc.info("create screen video track success","video:",c.getTrackId()),c;const l=new jh(s);return i.onSuccess([c.getTrackId(),l.getTrackId()]),Rc.info("create screen video track success","video:",c.getTrackId(),"audio:",l.getTrackId()),[c,l]},createMicrophoneAndCameraTracks:async function(e={},t={encoderConfig:"480p_1"}){var i,n,r,o;const s=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CREATE_MIC_AND_CAM_TRACKS,options:[e,t]}),a=fv(t),c=mv(e),l=Op(8,"track-mic-"),u=Op(8,"track-cam-");let d=null,h=null;Rc.info(Je(i=Je(n=Je(r="start create camera video track(".concat(u,") and microphone audio track(")).call(r,l,") with config, audio: ")).call(n,ve(e),", video: ")).call(i,ve(t)));try{var p;const e=await Oh({audio:c,video:a},Je(p="".concat(l,"-")).call(p,u));d=e.getAudioTracks()[0],h=e.getVideoTracks()[0]}catch(e){throw s.onError(e),e}if(!d||!h){const e=new pl(ll.UNEXPECTED_ERROR,"can not find tracks in media stream");return s.onError(e),e.throw()}t.optimizationMode&&pC(u,h,t,t.encoderConfig&&Mc(t.encoderConfig));const f=new Gh(d,e,c,l),g=new Tv(h,t,a,t.scalabiltyMode?Bc(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,u);return s.onSuccess([f.getTrackId(),g.getTrackId()]),Rc.info(Je(o="create camera video track(".concat(u,") and microphone audio track(")).call(o,l,") success")),[f,g]},createMicrophoneAudioTrack:async function(e={}){const t=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CREATE_MIC_AUDIO_TRACK,options:[e]}),i=mv(e),n=Op(8,"track-mic-");let r=null;Rc.info("start create microphone audio track with config",ve(e),"trackId",n);try{r=(await Oh({audio:i},n)).getAudioTracks()[0]||null}catch(e){throw t.onError(e),e}if(!r){const e=new pl(ll.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw()}const o=new Gh(r,e,i,n);return t.onSuccess(o.getTrackId()),Rc.info("create microphone audio track success, trackId:",n),o},createCustomAudioTrack:function(e){const t=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),i=new jh(e.mediaStreamTrack,e.encoderConfig?Fc(e.encoderConfig):{});return Rc.info("create custom audio track success with config",e,"trackId",i.getTrackId()),t.onSuccess(i.getTrackId()),i},createBufferSourceAudioTrack:async function(e){const t=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CREATE_BUFFER_AUDIO_TRACK,options:[e]}),i=Op(8,"track-buf-");Rc.info("start create buffer source audio track with config",ve(e),"trackId",i);const n=e.source;if(!(e.source instanceof AudioBuffer))try{e.source=await uC(e.source,e.cacheOnlineFile)}catch(e){return t.onError(e),e.throw()}const r=new cC(e.source),o=new Hh(n,r,e.encoderConfig?Fc(e.encoderConfig):{},i);return Rc.info("create buffer source audio track success, trackId:",i),t.onSuccess(o.getTrackId()),o},setLogLevel:MC,enableLogUpload:xC,disableLogUpload:BC,createChannelMediaRelayConfiguration:DC,checkAudioTrackIsActive:async function(e,t=5e3){const i=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof jh||e instanceof qE)){const e=new pl(ll.INVALID_TRACK,"the parameter is not a audio track");return i.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const n=e instanceof jh?e.getTrackLabel():"remote_track",r=e.getVolumeLevel();let o=r,s=r;const a=Ma();return new fo(r=>{const c=_C(()=>{const l=e.getVolumeLevel();o=l>o?l:o,s=l<s?l:s;const u=o-s>1e-4,d=Ma()-a;if(u||d>t){var h;clearInterval(c);const t=u,s={duration:d,deviceLabel:n,maxVolumeLevel:o,result:t};Rc.info(Je(h="[track-".concat(e.getTrackId(),"] check audio track active completed. ")).call(h,ve(s))),i.onSuccess(s),r(t)}},200)})},checkVideoTrackIsActive:async function(e,t=5e3){var i;const n=rh.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof bv||e instanceof WE)){const e=new pl(ll.INVALID_TRACK,"the parameter is not a video track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof bv?e.getTrackLabel():"remote_track",o=e.getMediaStreamTrack(!0),s=document.createElement("video");s.style.width="1px",s.style.height="1px",s.setAttribute("muted",""),s.muted=!0,s.setAttribute("playsinline",""),s.controls=!1,(Ta()||ya())&&(s.style.opacity="0.01",s.style.position="fixed",s.style.left="0",s.style.top="0",document.body.appendChild(s)),s.srcObject=new MediaStream([o]),s.play();const a=document.createElement("canvas");a.width=160,a.height=120;let c=0,l=0;try{const e=Ma();c=await function(e,t,i,n){let r,o=0,s=null;return new fo((a,c)=>{function l(){o>n&&r&&(r(),a(o));const t=i.getContext("2d");if(!t){const e=new pl(ll.UNEXPECTED_ERROR,"can not get canvas 2d context.");return Rc.error(e.toString()),void c(e)}t.drawImage(e,0,0,160,120);const l=t.getImageData(0,0,i.width,i.height),u=Math.floor(l.data.length/3);if(s){for(let e=0;e<u;e+=3)if(l.data[e]!==s[e])return o+=1,void(s=l.data);s=l.data}else s=l.data}Fa(()=>{r&&(r(),a(o))},t),r=vh(()=>{l()},30)})}(s,t,a,4),l=Ma()-e}catch(e){throw n.onError(e),e}vC===ha.SAFARI&&(s.pause(),s.remove()),s.srcObject=null;const u=c>4,d={duration:l,changedPicNum:c,deviceLabel:r,result:u};return Rc.info(Je(i="[track-".concat(e.getTrackId(),"] check video track active completed. ")).call(i,ve(d))),n.onSuccess(d),u},setArea:y_,loadModule:UC,processExternalMediaAEC:FC},jC={__CLIENT_LIST__:Zc,__TRACK_LIST__:Yc,VERSION:Oc,BUILD:wc,setParameter:Vc,getParameter:jc,getSupportedCodec:sC,checkSystemRequirements:aC,getDevices:kC,getMicrophones:NC,getCameras:LC,getElectronScreenSources:Ch,getPlaybackDevices:PC,createClient:function(e={codec:"vp8",mode:"rtc"}){const t=Oy.reportApiInvoke(null,{name:jA.CREATE_CLIENT,options:[e],tag:GA.TRACER});try{!function(e){gl(e.codec,"config.codec",["vp8","vp9","av1","h264"]),gl(e.mode,"config.mode",["rtc","live"]),void 0!==e.proxyServer&&_l(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&DA(e.turnServer),void 0!==e.httpRetryConfig&&PA(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&PA(e.websocketRetryConfig)}(e)}catch(e){throw t.onError(e),e}return t.onSuccess(),new oC(iC({forceWaitGatewayResponse:!0},e,{role:"rtc"===e.mode?"host":e.role}))},createCameraVideoTrack:async function(e={encoderConfig:"480p_1"}){const t=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CREATE_CAM_VIDEO_TRACK,options:[gC({},e)]}),i=fv(e),n=Op(8,"track-cam-");let r=null;Rc.info("start create camera video track with config",ve(e),"trackId",n);try{r=(await Oh({video:i},n)).getVideoTracks()[0]||null}catch(e){throw t.onError(e),e}if(!r){const e=new pl(hy.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw()}e.optimizationMode&&mC(n,r,e,e.encoderConfig&&Mc(e.encoderConfig));const o=new FS(r,e,i,e.scalabiltyMode?Bc(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,n);return t.onSuccess(o.getTrackId()),Rc.info("create camera video success, trackId:",n),o},createCustomVideoTrack:function(e){const t=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),i=new US(e.mediaStreamTrack,{bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?Bc(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode);return t.onSuccess(i.getTrackId()),Rc.info("create custom video track success with config",e,"trackId",i.getTrackId()),i},createScreenVideoTrack:async function(e={},t="disable"){const i=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CREATE_SCREEN_VIDEO_TRACK,options:[gC({},e),t]});e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const n=gv(e),r=Op(8,"track-scr");let o=null,s=null;const a=Fu();if(!a.supportShareAudio&&"enable"===t){const e=new pl(hy.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return i.onError(e),e.throw()}Rc.info("start create screen video track with config",e,"withAudio",t,"trackId",r);try{const e=await Oh({screen:n,screenAudio:"auto"===t?a.supportShareAudio:"enable"===t},r);o=e.getVideoTracks()[0]||null,s=e.getAudioTracks()[0]||null}catch(e){throw i.onError(e),e}if(!o){const e=new pl(hy.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(e),e.throw()}if(!s&&"enable"===t){o&&o.stop();const e=new pl(hy.SHARE_AUDIO_NOT_ALLOWED);return i.onError(e),e.throw()}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(mC(r,o,e,e.encoderConfig&&xc(e.encoderConfig)),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const c=new US(o,e.encoderConfig?xc(e.encoderConfig):{},e.scalabiltyMode?Bc(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r);if(c._hints.push(_y.SCREEN_TRACK),!s)return i.onSuccess(c.getTrackId()),Rc.info("create screen video track success","video:",c.getTrackId()),c;const l=new Vy(s);return i.onSuccess([c.getTrackId(),l.getTrackId()]),Rc.info("create screen video track success","video:",c.getTrackId(),"audio:",l.getTrackId()),[c,l]},createMicrophoneAndCameraTracks:async function(e={},t={encoderConfig:"480p_1"}){var i,n,r,o;const s=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CREATE_MIC_AND_CAM_TRACKS,options:[e,t]}),a=fv(t),c=mv(e),l=Op(8,"track-mic-"),u=Op(8,"track-cam-");let d=null,h=null;Rc.info(Je(i=Je(n=Je(r="start create camera video track(".concat(u,") and microphone audio track(")).call(r,l,") with config, audio: ")).call(n,ve(e),", video: ")).call(i,ve(t)));try{var p;const e=await Oh({audio:c,video:a},Je(p="".concat(l,"-")).call(p,u));d=e.getAudioTracks()[0],h=e.getVideoTracks()[0]}catch(e){throw s.onError(e),e}if(!d||!h){const e=new pl(hy.UNEXPECTED_ERROR,"can not find tracks in media stream");return s.onError(e),e.throw()}t.optimizationMode&&mC(u,h,t,t.encoderConfig&&Mc(t.encoderConfig));const f=new jy(d,e,c,l),g=new FS(h,t,a,t.scalabiltyMode?Bc(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,u);return s.onSuccess([f.getTrackId(),g.getTrackId()]),Rc.info(Je(o="create camera video track(".concat(u,") and microphone audio track(")).call(o,l,") success")),[f,g]},createMicrophoneAudioTrack:async function(e={}){const t=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CREATE_MIC_AUDIO_TRACK,options:[e]}),i=mv(e),n=Op(8,"track-mic-");let r=null;Rc.info("start create microphone audio track with config",ve(e),"trackId",n);try{r=(await Oh({audio:i},n)).getAudioTracks()[0]||null}catch(e){throw t.onError(e),e}if(!r){const e=new pl(hy.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw()}const o=new jy(r,e,i,n);return t.onSuccess(o.getTrackId()),Rc.info("create microphone audio track success, trackId:",n),o},createCustomAudioTrack:function(e){const t=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),i=new Vy(e.mediaStreamTrack,e.encoderConfig?Fc(e.encoderConfig):{});return Rc.info("create custom audio track success with config",e,"trackId",i.getTrackId()),t.onSuccess(i.getTrackId()),i},createBufferSourceAudioTrack:async function(e){const t=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CREATE_BUFFER_AUDIO_TRACK,options:[e]}),i=Op(8,"track-buf-");Rc.info("start create buffer source audio track with config",ve(e),"trackId",i);const n=e.source;if(!(e.source instanceof AudioBuffer))try{e.source=await uC(e.source,e.cacheOnlineFile)}catch(e){return t.onError(e),e.throw()}const r=new cC(e.source),o=new Gy(n,r,e.encoderConfig?Fc(e.encoderConfig):{},i);return Rc.info("create buffer source audio track success, trackId:",i),t.onSuccess(o.getTrackId()),o},setLogLevel:MC,enableLogUpload:xC,disableLogUpload:BC,createChannelMediaRelayConfiguration:DC,checkAudioTrackIsActive:async function(e,t=5e3){const i=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof Vy||e instanceof JS)){const e=new pl(hy.INVALID_TRACK,"the parameter is not a audio track");return i.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const n=e instanceof Vy?e.getTrackLabel():"remote_track",r=e.getVolumeLevel();let o=r,s=r;const a=Ma();return new fo(r=>{const c=_C(()=>{const l=e.getVolumeLevel();o=l>o?l:o,s=l<s?l:s;const u=o-s>1e-4,d=Ma()-a;if(u||d>t){var h;clearInterval(c);const t=u,s={duration:d,deviceLabel:n,maxVolumeLevel:o,result:t};Rc.info(Je(h="[track-".concat(e.getTrackId(),"] check audio track active completed. ")).call(h,ve(s))),i.onSuccess(s),r(t)}},200)})},checkVideoTrackIsActive:async function(e,t=5e3){var i;const n=Oy.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof US||e instanceof KS)){const e=new pl(hy.INVALID_TRACK,"the parameter is not a video track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof US?e.getTrackLabel():"remote_track",o=e.getMediaStreamTrack(!0),s=document.createElement("video");s.style.width="1px",s.style.height="1px",s.setAttribute("muted",""),s.muted=!0,s.setAttribute("playsinline",""),s.controls=!1,(Ta()||ya())&&(s.style.opacity="0.01",s.style.position="fixed",s.style.left="0",s.style.top="0",document.body.appendChild(s)),s.srcObject=new MediaStream([o]),s.play();const a=document.createElement("canvas");a.width=160,a.height=120;let c=0,l=0;try{const e=Ma();c=await function(e,t,i,n){let r,o=0,s=null;return new fo((a,c)=>{function l(){o>n&&r&&(r(),a(o));const t=i.getContext("2d");if(!t){const e=new pl(hy.UNEXPECTED_ERROR,"can not get canvas 2d context.");return Rc.error(e.toString()),void c(e)}t.drawImage(e,0,0,160,120);const l=t.getImageData(0,0,i.width,i.height),u=Math.floor(l.data.length/3);if(s){for(let e=0;e<u;e+=3)if(l.data[e]!==s[e])return o+=1,void(s=l.data);s=l.data}else s=l.data}Fa(()=>{r&&(r(),a(o))},t),r=vh(()=>{l()},30)})}(s,t,a,4),l=Ma()-e}catch(e){throw n.onError(e),e}EC===RA.SAFARI&&(s.pause(),s.remove()),s.srcObject=null;const u=c>4,d={duration:l,changedPicNum:c,deviceLabel:r,result:u};return Rc.info(Je(i="[track-".concat(e.getTrackId(),"] check video track active completed. ")).call(i,ve(d))),n.onSuccess(d),u},setArea:y_,loadModule:UC,processExternalMediaAEC:FC},GC=jc("SDK_FALLBACK")?jC:VC;return ae(GC,{onAudioAutoplayFailed:{get:()=>Jd.onAudioAutoplayFailed,set:e=>{Jd.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>Jd.onAutoplayFailed,set:e=>{Jd.onAutoplayFailed=e}}}),Ph.on(Dl.CAMERA_DEVICE_CHANGED,e=>{Rc.info("camera device changed",ve(e)),GC.onCameraChanged&&GC.onCameraChanged(e)}),Ph.on(Dl.RECORDING_DEVICE_CHANGED,e=>{Rc.info("microphone device changed",ve(e)),GC.onMicrophoneChanged&&GC.onMicrophoneChanged(e)}),Ph.on(Dl.PLAYOUT_DEVICE_CHANGED,e=>{Rc.debug("playout device changed",ve(e)),GC.onPlaybackDeviceChanged&&GC.onPlaybackDeviceChanged(e)}),Mh.onAutoplayFailed=()=>{Rc.info("detect audio element autoplay failed"),Jd.onAudioAutoplayFailed&&Jd.onAudioAutoplayFailed()},ph.on("autoplay-failed",()=>{Rc.info("detect webaudio autoplay failed"),Jd.onAudioAutoplayFailed&&Jd.onAudioAutoplayFailed()}),window&&(window.__ARTC__=GC),GC}))}).call(this,i("c8ba"),i("4362"))},e683:function(e,t,i){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},e6cf:function(e,t,i){"use strict";var n,r,o,s,a=i("23e7"),c=i("c430"),l=i("da84"),u=i("d066"),d=i("c65b"),h=i("fea9"),p=i("6eeb"),f=i("e2cc"),g=i("d2bb"),m=i("d44e"),_=i("2626"),v=i("59ed"),E=i("1626"),A=i("861d"),y=i("19aa"),S=i("8925"),C=i("2266"),b=i("1c7e"),T=i("4840"),I=i("2cf4").set,R=i("b575"),w=i("cdf9"),O=i("44de"),k=i("f069"),N=i("e667"),L=i("01b4"),P=i("69f3"),D=i("94ca"),M=i("b622"),x=i("6069"),B=i("605d"),U=i("2d00"),F=M("species"),V="Promise",j=P.getterFor(V),G=P.set,H=P.getterFor(V),Q=h&&h.prototype,W=h,q=Q,$=l.TypeError,z=l.document,Z=l.process,Y=k.f,K=Y,J=!!(z&&z.createEvent&&l.dispatchEvent),X=E(l.PromiseRejectionEvent),ee="unhandledrejection",te="rejectionhandled",ie=0,ne=1,re=2,oe=1,se=2,ae=!1,ce=D(V,(function(){var e=S(W),t=e!==String(W);if(!t&&66===U)return!0;if(c&&!q["finally"])return!0;if(U>=51&&/native code/.test(e))return!1;var i=new W((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))},r=i.constructor={};return r[F]=n,ae=i.then((function(){}))instanceof n,!ae||!t&&x&&!X})),le=ce||!b((function(e){W.all(e)["catch"]((function(){}))})),ue=function(e){var t;return!(!A(e)||!E(t=e.then))&&t},de=function(e,t){var i,n,r,o=t.value,s=t.state==ne,a=s?e.ok:e.fail,c=e.resolve,l=e.reject,u=e.domain;try{a?(s||(t.rejection===se&&me(t),t.rejection=oe),!0===a?i=o:(u&&u.enter(),i=a(o),u&&(u.exit(),r=!0)),i===e.promise?l($("Promise-chain cycle")):(n=ue(i))?d(n,i,c,l):c(i)):l(o)}catch(h){u&&!r&&u.exit(),l(h)}},he=function(e,t){e.notified||(e.notified=!0,R((function(){var i,n=e.reactions;while(i=n.get())de(i,e);e.notified=!1,t&&!e.rejection&&fe(e)})))},pe=function(e,t,i){var n,r;J?(n=z.createEvent("Event"),n.promise=t,n.reason=i,n.initEvent(e,!1,!0),l.dispatchEvent(n)):n={promise:t,reason:i},!X&&(r=l["on"+e])?r(n):e===ee&&O("Unhandled promise rejection",i)},fe=function(e){d(I,l,(function(){var t,i=e.facade,n=e.value,r=ge(e);if(r&&(t=N((function(){B?Z.emit("unhandledRejection",n,i):pe(ee,i,n)})),e.rejection=B||ge(e)?se:oe,t.error))throw t.value}))},ge=function(e){return e.rejection!==oe&&!e.parent},me=function(e){d(I,l,(function(){var t=e.facade;B?Z.emit("rejectionHandled",t):pe(te,t,e.value)}))},_e=function(e,t,i){return function(n){e(t,n,i)}},ve=function(e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=re,he(e,!0))},Ee=function(e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===t)throw $("Promise can't be resolved itself");var n=ue(t);n?R((function(){var i={done:!1};try{d(n,t,_e(Ee,i,e),_e(ve,i,e))}catch(r){ve(i,r,e)}})):(e.value=t,e.state=ne,he(e,!1))}catch(r){ve({done:!1},r,e)}}};if(ce&&(W=function(e){y(this,q),v(e),d(n,this);var t=j(this);try{e(_e(Ee,t),_e(ve,t))}catch(i){ve(t,i)}},q=W.prototype,n=function(e){G(this,{type:V,done:!1,notified:!1,parent:!1,reactions:new L,rejection:!1,state:ie,value:void 0})},n.prototype=f(q,{then:function(e,t){var i=H(this),n=Y(T(this,W));return i.parent=!0,n.ok=!E(e)||e,n.fail=E(t)&&t,n.domain=B?Z.domain:void 0,i.state==ie?i.reactions.add(n):R((function(){de(n,i)})),n.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new n,t=j(e);this.promise=e,this.resolve=_e(Ee,t),this.reject=_e(ve,t)},k.f=Y=function(e){return e===W||e===o?new r(e):K(e)},!c&&E(h)&&Q!==Object.prototype)){s=Q.then,ae||(p(Q,"then",(function(e,t){var i=this;return new W((function(e,t){d(s,i,e,t)})).then(e,t)}),{unsafe:!0}),p(Q,"catch",q["catch"],{unsafe:!0}));try{delete Q.constructor}catch(Ae){}g&&g(Q,q)}a({global:!0,wrap:!0,forced:ce},{Promise:W}),m(W,V,!1,!0),_(V),o=u(V),a({target:V,stat:!0,forced:ce},{reject:function(e){var t=Y(this);return d(t.reject,void 0,e),t.promise}}),a({target:V,stat:!0,forced:c||ce},{resolve:function(e){return w(c&&this===o?W:this,e)}}),a({target:V,stat:!0,forced:le},{all:function(e){var t=this,i=Y(t),n=i.resolve,r=i.reject,o=N((function(){var i=v(t.resolve),o=[],s=0,a=1;C(e,(function(e){var c=s++,l=!1;a++,d(i,t,e).then((function(e){l||(l=!0,o[c]=e,--a||n(o))}),r)})),--a||n(o)}));return o.error&&r(o.value),i.promise},race:function(e){var t=this,i=Y(t),n=i.reject,r=N((function(){var r=v(t.resolve);C(e,(function(e){d(r,t,e).then(i.resolve,n)}))}));return r.error&&n(r.value),i.promise}})},e762:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return H}));const n="3.7.2",r=n,o="function"===typeof atob,s="function"===typeof btoa,a="function"===typeof e,c="function"===typeof TextDecoder?new TextDecoder:void 0,l="function"===typeof TextEncoder?new TextEncoder:void 0,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=Array.prototype.slice.call(u),h=(e=>{let t={};return e.forEach((e,i)=>t[e]=i),t})(d),p=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,f=String.fromCharCode.bind(String),g="function"===typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),m=e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_"),_=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),v=e=>{let t,i,n,r,o="";const s=e.length%3;for(let a=0;a<e.length;){if((i=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=i<<16|n<<8|r,o+=d[t>>18&63]+d[t>>12&63]+d[t>>6&63]+d[63&t]}return s?o.slice(0,s-3)+"===".substring(s):o},E=s?e=>btoa(e):a?t=>e.from(t,"binary").toString("base64"):v,A=a?t=>e.from(t).toString("base64"):e=>{const t=4096;let i=[];for(let n=0,r=e.length;n<r;n+=t)i.push(f.apply(null,e.subarray(n,n+t)));return E(i.join(""))},y=(e,t=!1)=>t?m(A(e)):A(e),S=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?f(192|t>>>6)+f(128|63&t):f(224|t>>>12&15)+f(128|t>>>6&63)+f(128|63&t)}t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return f(240|t>>>18&7)+f(128|t>>>12&63)+f(128|t>>>6&63)+f(128|63&t)},C=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,b=e=>e.replace(C,S),T=a?t=>e.from(t,"utf8").toString("base64"):l?e=>A(l.encode(e)):e=>E(b(e)),I=(e,t=!1)=>t?m(T(e)):T(e),R=e=>I(e,!0),w=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,O=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),i=t-65536;return f(55296+(i>>>10))+f(56320+(1023&i));case 3:return f((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return f((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},k=e=>e.replace(w,O),N=e=>{if(e=e.replace(/\s+/g,""),!p.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,i,n,r="";for(let o=0;o<e.length;)t=h[e.charAt(o++)]<<18|h[e.charAt(o++)]<<12|(i=h[e.charAt(o++)])<<6|(n=h[e.charAt(o++)]),r+=64===i?f(t>>16&255):64===n?f(t>>16&255,t>>8&255):f(t>>16&255,t>>8&255,255&t);return r},L=o?e=>atob(_(e)):a?t=>e.from(t,"base64").toString("binary"):N,P=a?t=>g(e.from(t,"base64")):e=>g(L(e),e=>e.charCodeAt(0)),D=e=>P(x(e)),M=a?t=>e.from(t,"base64").toString("utf8"):c?e=>c.decode(P(e)):e=>k(L(e)),x=e=>_(e.replace(/[-_]/g,e=>"-"==e?"+":"/")),B=e=>M(x(e)),U=e=>{if("string"!==typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},F=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),V=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,F(t));e("fromBase64",(function(){return B(this)})),e("toBase64",(function(e){return I(this,e)})),e("toBase64URI",(function(){return I(this,!0)})),e("toBase64URL",(function(){return I(this,!0)})),e("toUint8Array",(function(){return D(this)}))},j=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,F(t));e("toBase64",(function(e){return y(this,e)})),e("toBase64URI",(function(){return y(this,!0)})),e("toBase64URL",(function(){return y(this,!0)}))},G=()=>{V(),j()},H={version:n,VERSION:r,atob:L,atobPolyfill:N,btoa:E,btoaPolyfill:v,fromBase64:B,toBase64:I,encode:I,encodeURI:R,encodeURL:R,utob:b,btou:k,decode:B,isValid:U,fromUint8Array:y,toUint8Array:D,extendString:V,extendUint8Array:j,extendBuiltins:G}}).call(this,i("b639").Buffer)},e772:function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=53)}({0:function(e,t,i){"use strict";function n(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},3:function(e,t){e.exports=i("8122")},33:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[i("span",[e._v(e._s(e.currentLabel))])])],2)},r=[];n._withStripped=!0;var o=i(4),s=i.n(o),a=i(3),c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={mixins:[s.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var i=this.select,n=i.remote,r=i.valueKey;if(!this.created&&!n){if(r&&"object"===("undefined"===typeof e?"undefined":c(e))&&"object"===("undefined"===typeof t?"undefined":c(t))&&e[r]===t[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,t){if(this.isObject){var i=this.select.valueKey;return Object(a["getValueByPath"])(e,i)===Object(a["getValueByPath"])(t,i)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var i=this.select.valueKey;return e&&e.some((function(e){return Object(a["getValueByPath"])(e,i)===Object(a["getValueByPath"])(t,i)}))}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(a["escapeRegexpString"])(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,t=e.selected,i=e.multiple,n=i?t:[t],r=this.select.cachedOptions.indexOf(this),o=n.indexOf(this);r>-1&&o<0&&this.select.cachedOptions.splice(r,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},u=l,d=i(0),h=Object(d["a"])(u,n,r,!1,null,null,null);h.options.__file="packages/select/src/option.vue";t["a"]=h.exports},4:function(e,t){e.exports=i("d010")},53:function(e,t,i){"use strict";i.r(t);var n=i(33);n["a"].install=function(e){e.component(n["a"].name,n["a"])},t["default"]=n["a"]}})},e893:function(e,t,i){var n=i("1a2d"),r=i("56ef"),o=i("06cf"),s=i("9bf2");e.exports=function(e,t,i){for(var a=r(t),c=s.f,l=o.f,u=0;u<a.length;u++){var d=a[u];n(e,d)||i&&n(i,d)||c(e,d,l(t,d))}}},e8b5:function(e,t,i){var n=i("c6b6");e.exports=Array.isArray||function(e){return"Array"==n(e)}},e91f:function(e,t,i){"use strict";var n=i("ebb5"),r=i("4d64").indexOf,o=n.aTypedArray,s=n.exportTypedArrayMethod;s("indexOf",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},e95a:function(e,t,i){var n=i("b622"),r=i("3f8c"),o=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||s[o]===e)}},e974:function(e,t,i){"use strict";t.__esModule=!0;var n=i("2b0e"),r=s(n),o=i("5128");function s(e){return e&&e.__esModule?e:{default:e}}var a=r.default.prototype.$isServer?function(){}:i("6167"),c=function(e){return e.stopPropagation()};t.default={props:{transformOrigin:{type:[Boolean,String],default:!0},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:{},popper:{},offset:{default:0},value:Boolean,visibleArrow:Boolean,arrowOffset:{type:Number,default:35},appendToBody:{type:Boolean,default:!0},popperOptions:{type:Object,default:function(){return{gpuAcceleration:!1}}}},data:function(){return{showPopper:!1,currentPlacement:""}},watch:{value:{immediate:!0,handler:function(e){this.showPopper=e,this.$emit("input",e)}},showPopper:function(e){this.disabled||(e?this.updatePopper():this.destroyPopper(),this.$emit("input",e))}},methods:{createPopper:function(){var e=this;if(!this.$isServer&&(this.currentPlacement=this.currentPlacement||this.placement,/^(top|bottom|left|right)(-start|-end)?$/g.test(this.currentPlacement))){var t=this.popperOptions,i=this.popperElm=this.popperElm||this.popper||this.$refs.popper,n=this.referenceElm=this.referenceElm||this.reference||this.$refs.reference;!n&&this.$slots.reference&&this.$slots.reference[0]&&(n=this.referenceElm=this.$slots.reference[0].elm),i&&n&&(this.visibleArrow&&this.appendArrow(i),this.appendToBody&&document.body.appendChild(this.popperElm),this.popperJS&&this.popperJS.destroy&&this.popperJS.destroy(),t.placement=this.currentPlacement,t.offset=this.offset,t.arrowOffset=this.arrowOffset,this.popperJS=new a(n,i,t),this.popperJS.onCreate((function(t){e.$emit("created",e),e.resetTransformOrigin(),e.$nextTick(e.updatePopper)})),"function"===typeof t.onUpdate&&this.popperJS.onUpdate(t.onUpdate),this.popperJS._popper.style.zIndex=o.PopupManager.nextZIndex(),this.popperElm.addEventListener("click",c))}},updatePopper:function(){var e=this.popperJS;e?(e.update(),e._popper&&(e._popper.style.zIndex=o.PopupManager.nextZIndex())):this.createPopper()},doDestroy:function(e){!this.popperJS||this.showPopper&&!e||(this.popperJS.destroy(),this.popperJS=null)},destroyPopper:function(){this.popperJS&&this.resetTransformOrigin()},resetTransformOrigin:function(){if(this.transformOrigin){var e={top:"bottom",bottom:"top",left:"right",right:"left"},t=this.popperJS._popper.getAttribute("x-placement").split("-")[0],i=e[t];this.popperJS._popper.style.transformOrigin="string"===typeof this.transformOrigin?this.transformOrigin:["top","bottom"].indexOf(t)>-1?"center "+i:i+" center"}},appendArrow:function(e){var t=void 0;if(!this.appended){for(var i in this.appended=!0,e.attributes)if(/^_v-/.test(e.attributes[i].name)){t=e.attributes[i].name;break}var n=document.createElement("div");t&&n.setAttribute(t,""),n.setAttribute("x-arrow",""),n.className="popper__arrow",e.appendChild(n)}}},beforeDestroy:function(){this.doDestroy(!0),this.popperElm&&this.popperElm.parentNode===document.body&&(this.popperElm.removeEventListener("click",c),document.body.removeChild(this.popperElm))},deactivated:function(){this.$options.beforeDestroy[0].call(this)}}},e9c4:function(e,t,i){var n=i("23e7"),r=i("da84"),o=i("d066"),s=i("2ba4"),a=i("e330"),c=i("d039"),l=r.Array,u=o("JSON","stringify"),d=a(/./.exec),h=a("".charAt),p=a("".charCodeAt),f=a("".replace),g=a(1..toString),m=/[\uD800-\uDFFF]/g,_=/^[\uD800-\uDBFF]$/,v=/^[\uDC00-\uDFFF]$/,E=function(e,t,i){var n=h(i,t-1),r=h(i,t+1);return d(_,e)&&!d(v,r)||d(v,e)&&!d(_,n)?"\\u"+g(p(e,0),16):e},A=c((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&n({target:"JSON",stat:!0,forced:A},{stringify:function(e,t,i){for(var n=0,r=arguments.length,o=l(r);n<r;n++)o[n]=arguments[n];var a=s(u,null,o);return"string"==typeof a?f(a,m,E):a}})},ea34:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},eac5:function(e,t,i){var n=i("861d"),r=Math.floor;e.exports=Number.isInteger||function(e){return!n(e)&&isFinite(e)&&r(e)===e}},ebb5:function(e,t,i){"use strict";var n,r,o,s=i("a981"),a=i("83ab"),c=i("da84"),l=i("1626"),u=i("861d"),d=i("1a2d"),h=i("f5df"),p=i("0d51"),f=i("9112"),g=i("6eeb"),m=i("9bf2").f,_=i("3a9b"),v=i("e163"),E=i("d2bb"),A=i("b622"),y=i("90e3"),S=c.Int8Array,C=S&&S.prototype,b=c.Uint8ClampedArray,T=b&&b.prototype,I=S&&v(S),R=C&&v(C),w=Object.prototype,O=c.TypeError,k=A("toStringTag"),N=y("TYPED_ARRAY_TAG"),L=y("TYPED_ARRAY_CONSTRUCTOR"),P=s&&!!E&&"Opera"!==h(c.opera),D=!1,M={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},x={BigInt64Array:8,BigUint64Array:8},B=function(e){if(!u(e))return!1;var t=h(e);return"DataView"===t||d(M,t)||d(x,t)},U=function(e){if(!u(e))return!1;var t=h(e);return d(M,t)||d(x,t)},F=function(e){if(U(e))return e;throw O("Target is not a typed array")},V=function(e){if(l(e)&&(!E||_(I,e)))return e;throw O(p(e)+" is not a typed array constructor")},j=function(e,t,i,n){if(a){if(i)for(var r in M){var o=c[r];if(o&&d(o.prototype,e))try{delete o.prototype[e]}catch(s){try{o.prototype[e]=t}catch(l){}}}R[e]&&!i||g(R,e,i?t:P&&C[e]||t,n)}},G=function(e,t,i){var n,r;if(a){if(E){if(i)for(n in M)if(r=c[n],r&&d(r,e))try{delete r[e]}catch(o){}if(I[e]&&!i)return;try{return g(I,e,i?t:P&&I[e]||t)}catch(o){}}for(n in M)r=c[n],!r||r[e]&&!i||g(r,e,t)}};for(n in M)r=c[n],o=r&&r.prototype,o?f(o,L,r):P=!1;for(n in x)r=c[n],o=r&&r.prototype,o&&f(o,L,r);if((!P||!l(I)||I===Function.prototype)&&(I=function(){throw O("Incorrect invocation")},P))for(n in M)c[n]&&E(c[n],I);if((!P||!R||R===w)&&(R=I.prototype,P))for(n in M)c[n]&&E(c[n].prototype,R);if(P&&v(T)!==R&&E(T,R),a&&!d(R,k))for(n in D=!0,m(R,k,{get:function(){return u(this)?this[N]:void 0}}),M)c[n]&&f(c[n],N,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_CONSTRUCTOR:L,TYPED_ARRAY_TAG:D&&N,aTypedArray:F,aTypedArrayConstructor:V,exportTypedArrayMethod:j,exportTypedArrayStaticMethod:G,isView:B,isTypedArray:U,TypedArray:I,TypedArrayPrototype:R}},eedf:function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=86)}({0:function(e,t,i){"use strict";function n(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},86:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.buttonSize?"el-button--"+e.buttonSize:"",{"is-disabled":e.buttonDisabled,"is-loading":e.loading,"is-plain":e.plain,"is-round":e.round,"is-circle":e.circle}],attrs:{disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?i("i",{staticClass:"el-icon-loading"}):e._e(),e.icon&&!e.loading?i("i",{class:e.icon}):e._e(),e.$slots.default?i("span",[e._t("default")],2):e._e()])},r=[];n._withStripped=!0;var o={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(e){this.$emit("click",e)}}},s=o,a=i(0),c=Object(a["a"])(s,n,r,!1,null,null,null);c.options.__file="packages/button/src/button.vue";var l=c.exports;l.install=function(e){e.component(l.name,l)};t["default"]=l}})},ef08:function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},f069:function(e,t,i){"use strict";var n=i("59ed"),r=function(e){var t,i;this.promise=new e((function(e,n){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=n})),this.resolve=n(t),this.reject=n(i)};e.exports.f=function(e){return new r(e)}},f0d9:function(e,t,i){"use strict";t.__esModule=!0,t.default={el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},empty:{description:"暂无数据"}}}},f183:function(e,t,i){var n=i("23e7"),r=i("e330"),o=i("d012"),s=i("861d"),a=i("1a2d"),c=i("9bf2").f,l=i("241c"),u=i("057f"),d=i("4fad"),h=i("90e3"),p=i("bb2f"),f=!1,g=h("meta"),m=0,_=function(e){c(e,g,{value:{objectID:"O"+m++,weakData:{}}})},v=function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,g)){if(!d(e))return"F";if(!t)return"E";_(e)}return e[g].objectID},E=function(e,t){if(!a(e,g)){if(!d(e))return!0;if(!t)return!1;_(e)}return e[g].weakData},A=function(e){return p&&f&&d(e)&&!a(e,g)&&_(e),e},y=function(){S.enable=function(){},f=!0;var e=l.f,t=r([].splice),i={};i[g]=1,e(i).length&&(l.f=function(i){for(var n=e(i),r=0,o=n.length;r<o;r++)if(n[r]===g){t(n,r,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},S=e.exports={enable:y,fastKey:v,getWeakData:E,onFreeze:A};o[g]=!0},f36a:function(e,t,i){var n=i("e330");e.exports=n([].slice)},f3ad:function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=73)}({0:function(e,t,i){"use strict";function n(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},11:function(e,t){e.exports=i("2bb5")},21:function(e,t){e.exports=i("d397")},4:function(e,t){e.exports=i("d010")},73:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"is-exceed":e.inputExceed,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?i("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?i("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?i("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?i("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.getSuffixVisible()?i("span",{staticClass:"el-input__suffix"},[i("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible&&e.isWordLimitVisible?e._e():[e._t("suffix"),e.suffixIcon?i("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?i("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(e){e.preventDefault()},click:e.clear}}):e._e(),e.showPwdVisible?i("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e(),e.isWordLimitVisible?i("span",{staticClass:"el-input__count"},[i("span",{staticClass:"el-input__count-inner"},[e._v("\n            "+e._s(e.textLength)+"/"+e._s(e.upperLimit)+"\n          ")])]):e._e()],2),e.validateState?i("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?i("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:i("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1)),e.isWordLimitVisible&&"textarea"===e.type?i("span",{staticClass:"el-input__count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()],2)},r=[];n._withStripped=!0;var o=i(4),s=i.n(o),a=i(11),c=i.n(a),l=void 0,u="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",d=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function h(e){var t=window.getComputedStyle(e),i=t.getPropertyValue("box-sizing"),n=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),r=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),o=d.map((function(e){return e+":"+t.getPropertyValue(e)})).join(";");return{contextStyle:o,paddingSize:n,borderSize:r,boxSizing:i}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l||(l=document.createElement("textarea"),document.body.appendChild(l));var n=h(e),r=n.paddingSize,o=n.borderSize,s=n.boxSizing,a=n.contextStyle;l.setAttribute("style",a+";"+u),l.value=e.value||e.placeholder||"";var c=l.scrollHeight,d={};"border-box"===s?c+=o:"content-box"===s&&(c-=r),l.value="";var p=l.scrollHeight-r;if(null!==t){var f=p*t;"border-box"===s&&(f=f+r+o),c=Math.max(f,c),d.minHeight=f+"px"}if(null!==i){var g=p*i;"border-box"===s&&(g=g+r+o),c=Math.min(g,c)}return d.height=c+"px",l.parentNode&&l.parentNode.removeChild(l),l=null,d}var f=i(9),g=i.n(f),m=i(21),_={name:"ElInput",componentName:"ElInput",mixins:[s.a,c.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return g()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"===typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(e){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(e){this.focused=!1,this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize,t=this.type;if("textarea"===t)if(e){var i=e.minRows,n=e.maxRows;this.textareaCalcStyle=p(this.$refs.textarea,i,n)}else this.textareaCalcStyle={minHeight:p(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit("focus",e)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(e){var t=e.target.value,i=t[t.length-1]||"";this.isComposing=!Object(m["isKorean"])(i)},handleCompositionEnd:function(e){this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit("input",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit("change",e.target.value)},calcIconOffset:function(e){var t=[].slice.call(this.$el.querySelectorAll(".el-input__"+e)||[]);if(t.length){for(var i=null,n=0;n<t.length;n++)if(t[n].parentNode===this.$el){i=t[n];break}if(i){var r={suffix:"append",prefix:"prepend"},o=r[e];this.$slots[o]?i.style.transform="translateX("+("suffix"===e?"-":"")+this.$el.querySelector(".el-input-group__"+o).offsetWidth+"px)":i.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){var e=this;this.passwordVisible=!this.passwordVisible,this.$nextTick((function(){e.focus()}))},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},v=_,E=i(0),A=Object(E["a"])(v,n,r,!1,null,null,null);A.options.__file="packages/input/src/input.vue";var y=A.exports;y.install=function(e){e.component(y.name,y)};t["default"]=y},9:function(e,t){e.exports=i("7f4d")}})},f494:function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=108)}({0:function(e,t,i){"use strict";function n(e,t,i,n,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},108:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"el-radio",class:[e.border&&e.radioSize?"el-radio--"+e.radioSize:"",{"is-disabled":e.isDisabled},{"is-focus":e.focus},{"is-bordered":e.border},{"is-checked":e.model===e.label}],attrs:{role:"radio","aria-checked":e.model===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.stopPropagation(),t.preventDefault(),e.model=e.isDisabled?e.model:e.label}}},[i("span",{staticClass:"el-radio__input",class:{"is-disabled":e.isDisabled,"is-checked":e.model===e.label}},[i("span",{staticClass:"el-radio__inner"}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],ref:"radio",staticClass:"el-radio__original",attrs:{type:"radio","aria-hidden":"true",name:e.name,disabled:e.isDisabled,tabindex:"-1",autocomplete:"off"},domProps:{value:e.label,checked:e._q(e.model,e.label)},on:{focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},change:[function(t){e.model=e.label},e.handleChange]}})]),i("span",{staticClass:"el-radio__label",on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])},r=[];n._withStripped=!0;var o=i(4),s=i.n(o),a={name:"ElRadio",mixins:[s.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElRadio",props:{value:{},label:{},disabled:Boolean,name:String,border:Boolean,size:String},data:function(){return{focus:!1}},computed:{isGroup:function(){var e=this.$parent;while(e){if("ElRadioGroup"===e.$options.componentName)return this._radioGroup=e,!0;e=e.$parent}return!1},model:{get:function(){return this.isGroup?this._radioGroup.value:this.value},set:function(e){this.isGroup?this.dispatch("ElRadioGroup","input",[e]):this.$emit("input",e),this.$refs.radio&&(this.$refs.radio.checked=this.model===this.label)}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},radioSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._radioGroup.radioGroupSize||e},isDisabled:function(){return this.isGroup?this._radioGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this.isGroup&&this.model!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.model),e.isGroup&&e.dispatch("ElRadioGroup","handleChange",e.model)}))}}},c=a,l=i(0),u=Object(l["a"])(c,n,r,!1,null,null,null);u.options.__file="packages/radio/src/radio.vue";var d=u.exports;d.install=function(e){e.component(d.name,d)};t["default"]=d},4:function(e,t){e.exports=i("d010")}})},f5df:function(e,t,i){var n=i("da84"),r=i("00ee"),o=i("1626"),s=i("c6b6"),a=i("b622"),c=a("toStringTag"),l=n.Object,u="Arguments"==s(function(){return arguments}()),d=function(e,t){try{return e[t]}catch(i){}};e.exports=r?s:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=d(t=l(e),c))?i:u?s(t):"Object"==(n=s(t))&&o(t.callee)?"Arguments":n}},f6b4:function(e,t,i){"use strict";var n=i("c532");function r(){this.handlers=[]}r.prototype.use=function(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},f772:function(e,t,i){var n=i("5692"),r=i("90e3"),o=n("keys");e.exports=function(e){return o[e]||(o[e]=r(e))}},f893:function(e,t,i){e.exports={default:i("8119"),__esModule:!0}},f8c9:function(e,t,i){var n=i("23e7"),r=i("da84"),o=i("d44e");n({global:!0},{Reflect:{}}),o(r.Reflect,"Reflect",!0)},f8cd:function(e,t,i){var n=i("da84"),r=i("5926"),o=n.RangeError;e.exports=function(e){var t=r(e);if(t<0)throw o("The argument can't be less than 0");return t}},faf5:function(e,t,i){e.exports=!i("0bad")&&!i("4b8b")((function(){return 7!=Object.defineProperty(i("05f5")("div"),"a",{get:function(){return 7}}).a}))},fb2c:function(e,t,i){var n=i("74e8");n("Uint32",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},fb6a:function(e,t,i){"use strict";var n=i("23e7"),r=i("da84"),o=i("e8b5"),s=i("68ee"),a=i("861d"),c=i("23cb"),l=i("07fa"),u=i("fc6a"),d=i("8418"),h=i("b622"),p=i("1dde"),f=i("f36a"),g=p("slice"),m=h("species"),_=r.Array,v=Math.max;n({target:"Array",proto:!0,forced:!g},{slice:function(e,t){var i,n,r,h=u(this),p=l(h),g=c(e,p),E=c(void 0===t?p:t,p);if(o(h)&&(i=h.constructor,s(i)&&(i===_||o(i.prototype))?i=void 0:a(i)&&(i=i[m],null===i&&(i=void 0)),i===_||void 0===i))return f(h,g,E);for(n=new(void 0===i?_:i)(v(E-g,0)),r=0;g<E;g++,r++)g in h&&d(n,r,h[g]);return n.length=r,n}})},fc5e:function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},fc6a:function(e,t,i){var n=i("44ad"),r=i("1d80");e.exports=function(e){return n(r(e))}},fcc3:function(module,exports,__webpack_require__){!function(e,t){module.exports=t(__webpack_require__("d2b2"))}("undefined"!=typeof self&&self,(function(__WEBPACK_EXTERNAL_MODULE__4119__){return function(){var __webpack_modules__={4537:function(e){"use strict";e.exports=function(e,t){for(var i=new Array(arguments.length-1),n=0,r=2,o=!0;r<arguments.length;)i[n++]=arguments[r++];return new Promise((function(r,s){i[n]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),i=0;i<t.length;)t[i++]=arguments[i];r.apply(null,t)}};try{e.apply(t||null,i)}catch(e){o&&(o=!1,s(e))}}))}},7419:function(e,t){"use strict";var i=t;i.length=function(e){var t=e.length;if(!t)return 0;for(var i=0;--t%4>1&&"="===e.charAt(t);)++i;return Math.ceil(3*e.length)/4-i};for(var n=new Array(64),r=new Array(123),o=0;o<64;)r[n[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;i.encode=function(e,t,i){for(var r,o=null,s=[],a=0,c=0;t<i;){var l=e[t++];switch(c){case 0:s[a++]=n[l>>2],r=(3&l)<<4,c=1;break;case 1:s[a++]=n[r|l>>4],r=(15&l)<<2,c=2;break;case 2:s[a++]=n[r|l>>6],s[a++]=n[63&l],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=n[r],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";i.decode=function(e,t,i){for(var n,o=i,a=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&a>1)break;if(void 0===(l=r[l]))throw Error(s);switch(a){case 0:n=l,a=1;break;case 1:t[i++]=n<<2|(48&l)>>4,n=l,a=2;break;case 2:t[i++]=(15&n)<<4|(60&l)>>2,n=l,a=3;break;case 3:t[i++]=(3&n)<<6|l,a=0}}if(1===a)throw Error(s);return i-o},i.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},9211:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:i||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===t?i.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,i)}return this}},945:function(e){"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),i=new Uint8Array(t.buffer),n=128===i[3];function r(e,n,r){t[0]=e,n[r]=i[0],n[r+1]=i[1],n[r+2]=i[2],n[r+3]=i[3]}function o(e,n,r){t[0]=e,n[r]=i[3],n[r+1]=i[2],n[r+2]=i[1],n[r+3]=i[0]}function s(e,n){return i[0]=e[n],i[1]=e[n+1],i[2]=e[n+2],i[3]=e[n+3],t[0]}function a(e,n){return i[3]=e[n],i[2]=e[n+1],i[1]=e[n+2],i[0]=e[n+3],t[0]}e.writeFloatLE=n?r:o,e.writeFloatBE=n?o:r,e.readFloatLE=n?s:a,e.readFloatBE=n?a:s}():function(){function t(e,t,i,n){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,i,n);else if(isNaN(t))e(2143289344,i,n);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,i,n);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,i,n);else{var o=Math.floor(Math.log(t)/Math.LN2);e((r<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,i,n)}}function s(e,t,i){var n=e(t,i),r=2*(n>>31)+1,o=n>>>23&255,s=8388607&n;return 255===o?s?NaN:r*(1/0):0===o?1401298464324817e-60*r*s:r*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,n),e.readFloatLE=s.bind(null,r),e.readFloatBE=s.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),i=new Uint8Array(t.buffer),n=128===i[7];function r(e,n,r){t[0]=e,n[r]=i[0],n[r+1]=i[1],n[r+2]=i[2],n[r+3]=i[3],n[r+4]=i[4],n[r+5]=i[5],n[r+6]=i[6],n[r+7]=i[7]}function o(e,n,r){t[0]=e,n[r]=i[7],n[r+1]=i[6],n[r+2]=i[5],n[r+3]=i[4],n[r+4]=i[3],n[r+5]=i[2],n[r+6]=i[1],n[r+7]=i[0]}function s(e,n){return i[0]=e[n],i[1]=e[n+1],i[2]=e[n+2],i[3]=e[n+3],i[4]=e[n+4],i[5]=e[n+5],i[6]=e[n+6],i[7]=e[n+7],t[0]}function a(e,n){return i[7]=e[n],i[6]=e[n+1],i[5]=e[n+2],i[4]=e[n+3],i[3]=e[n+4],i[2]=e[n+5],i[1]=e[n+6],i[0]=e[n+7],t[0]}e.writeDoubleLE=n?r:o,e.writeDoubleBE=n?o:r,e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s}():function(){function t(e,t,i,n,r,o){var s=n<0?1:0;if(s&&(n=-n),0===n)e(0,r,o+t),e(1/n>0?0:2147483648,r,o+i);else if(isNaN(n))e(0,r,o+t),e(2146959360,r,o+i);else if(n>17976931348623157e292)e(0,r,o+t),e((s<<31|2146435072)>>>0,r,o+i);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,r,o+t),e((s<<31|a/4294967296)>>>0,r,o+i);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=n*Math.pow(2,-c))>>>0,r,o+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,r,o+i)}}}function s(e,t,i,n,r){var o=e(n,r+t),s=e(n,r+i),a=2*(s>>31)+1,c=s>>>20&2047,l=4294967296*(1048575&s)+o;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=s.bind(null,r,0,4),e.readDoubleBE=s.bind(null,o,4,0)}(),e}function i(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}function n(e,t,i){t[i]=e>>>24,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function r(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},6662:function(e){"use strict";e.exports=function(e,t,i){var n=i||8192,r=n>>>1,o=null,s=n;return function(i){if(i<1||i>r)return e(i);s+i>n&&(o=e(n),s=0);var a=t.call(o,s,s+=i);return 7&s&&(s=1+(7|s)),a}}},4997:function(e,t){"use strict";var i=t;i.length=function(e){for(var t=0,i=0,n=0;n<e.length;++n)(i=e.charCodeAt(n))<128?t+=1:i<2048?t+=2:55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},i.read=function(e,t,i){if(i-t<1)return"";for(var n,r=null,o=[],s=0;t<i;)(n=e[t++])<128?o[s++]=n:n>191&&n<224?o[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),s=0);return r?(s&&r.push(String.fromCharCode.apply(String,o.slice(0,s))),r.join("")):String.fromCharCode.apply(String,o.slice(0,s))},i.write=function(e,t,i){for(var n,r,o=i,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[i++]=n:n<2048?(t[i++]=n>>6|192,t[i++]=63&n|128):55296==(64512&n)&&56320==(64512&(r=e.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&r),++s,t[i++]=n>>18|240,t[i++]=n>>12&63|128,t[i++]=n>>6&63|128,t[i++]=63&n|128):(t[i++]=n>>12|224,t[i++]=n>>6&63|128,t[i++]=63&n|128);return i-o}},2100:function(e,t,i){"use strict";e.exports=i(9482)},9482:function(e,t,i){"use strict";var n=t;function r(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=i(1173),n.BufferWriter=i(3155),n.Reader=i(1408),n.BufferReader=i(593),n.util=i(9693),n.rpc=i(5994),n.roots=i(5054),n.configure=r,r()},1408:function(e,t,i){"use strict";e.exports=c;var n,r=i(9693),o=r.LongBits,s=r.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return r.Buffer?function(e){return(c.create=function(e){return r.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this._slice.call(this.buf,t,i)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=d(),n._configure();var t=r.Long?"toLong":"toNumber";r.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},593:function(e,t,i){"use strict";e.exports=o;var n=i(1408);(o.prototype=Object.create(n.prototype)).constructor=o;var r=i(9693);function o(e){n.call(this,e)}o._configure=function(){r.Buffer&&(o.prototype._slice=r.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},5054:function(e){"use strict";e.exports={}},5994:function(e,t,i){"use strict";t.Service=i(7948)},7948:function(e,t,i){"use strict";e.exports=r;var n=i(9693);function r(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}(r.prototype=Object.create(n.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function e(t,i,r,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(e,a,t,i,r,o);if(a.rpcImpl)try{return a.rpcImpl(t,i[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,i){if(e)return a.emit("error",e,t),s(e);if(null!==i){if(!(i instanceof r))try{i=r[a.responseDelimited?"decodeDelimited":"decode"](i)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",i,t),s(null,i)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:function(e,t,i){"use strict";e.exports=r;var n=i(9693);function r(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=r.zero=new r(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return t&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new r(i,n)},r.from=function(e){if("number"==typeof e)return r.fromNumber(e);if(n.isString(e)){if(!n.Long)return r.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):o},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+4294967296*i)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;r.fromHash=function(e){return e===s?o:new r((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10}},9693:function(e,t,i){"use strict";var n=t;function r(e,t,i){for(var n=Object.keys(t),r=0;r<n.length;++r)void 0!==e[n[r]]&&i||(e[n[r]]=t[n[r]]);return e}function o(e){function t(e,i){if(!(this instanceof t))return new t(e,i);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&r(this,i)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=i(4537),n.base64=i(7419),n.EventEmitter=i(9211),n.float=i(945),n.inquire=i(7199),n.utf8=i(4997),n.pool=i(6662),n.LongBits=i(1945),n.isNode=Boolean(void 0!==i.g&&i.g&&i.g.process&&i.g.process.versions&&i.g.process.versions.node),n.global=n.isNode&&i.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var i=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(i.lo,i.hi,t):i.toNumber(Boolean(t))},n.merge=r,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=1;return function(){for(var e=Object.keys(this),i=e.length-1;i>-1;--i)if(1===t[e[i]]&&void 0!==this[e[i]]&&null!==this[e[i]])return e[i]}},n.oneOfSetter=function(e){return function(t){for(var i=0;i<e.length;++i)e[i]!==t&&delete this[e[i]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,i){return new e(t,i)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},1173:function(e,t,i){"use strict";e.exports=d;var n,r=i(9693),o=r.LongBits,s=r.base64,a=r.utf8;function c(e,t,i){this.fn=e,this.len=t,this.next=void 0,this.val=i}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var h=function(){return r.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function p(e,t,i){t[i]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function m(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}d.create=h(),d.alloc=function(e){return new r.Array(e)},r.Array!==Array&&(d.alloc=r.pool(d.alloc,r.Array.prototype.subarray)),d.prototype._push=function(e,t,i){return this.tail=this.tail.next=new c(e,t,i),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,i){for(;e>127;)t[i++]=127&e|128,e>>>=7;t[i]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(r.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(r.float.writeDoubleLE,8,e)};var _=r.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var n=0;n<e.length;++n)t[i+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(r.isString(e)){var i=d.alloc(t=s.length(e));s.decode(e,i,0),e=i}return this.uint32(t)._push(_,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=h(),n._configure()}},3155:function(e,t,i){"use strict";e.exports=o;var n=i(1173);(o.prototype=Object.create(n.prototype)).constructor=o;var r=i(9693);function o(){n.call(this)}function s(e,t,i){e.length<40?r.utf8.write(e,t,i):t.utf8Write?t.utf8Write(e,i):t.write(e,i)}o._configure=function(){o.alloc=r._Buffer_allocUnsafe,o.writeBytesBuffer=r.Buffer&&r.Buffer.prototype instanceof Uint8Array&&"set"===r.Buffer.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var n=0;n<e.length;)t[i++]=e[n++]}},o.prototype.bytes=function(e){r.isString(e)&&(e=r._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=r.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},8835:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRealTimeSequentialDataManager=void 0;var n=i(3504),r=function(){function e(e,t){this.dataChannelManager=new n.DataChannelListener(e,t)}return e.prototype.startBroadcasting=function(e){return this.dataChannelManager.startBroadcasting(e)},e.prototype.stopBroadcasting=function(e){return this.dataChannelManager.stopBroadcasting(e)},e.prototype.sendRealTimeSequentialData=function(e,t){return this.dataChannelManager.sendRealTimeSequentialData(e,t)},e.prototype.startSubscribing=function(e){return this.dataChannelManager.startSubscribing(e)},e.prototype.stopSubscribing=function(e){return this.dataChannelManager.stopSubscribing(e)},e.prototype.on=function(e,t){this.dataChannelManager.on(e,t)},e.prototype.off=function(e,t){this.dataChannelManager.off(e,t)},e}();t.ZegoRealTimeSequentialDataManager=r},1297:function(e,t){"use strict";var i,n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRangeAudioMode=t.ZegoRangeAudioMicrophoneState=t.ZegoMixStreamRenderMode=void 0,(r=t.ZegoMixStreamRenderMode||(t.ZegoMixStreamRenderMode={}))[r.AspectFill=0]="AspectFill",r[r.AspectFit=1]="AspectFit",(n=t.ZegoRangeAudioMicrophoneState||(t.ZegoRangeAudioMicrophoneState={}))[n.Off=0]="Off",n[n.TurningOn=1]="TurningOn",n[n.On=2]="On",(i=t.ZegoRangeAudioMode||(t.ZegoRangeAudioMode={}))[i.World=0]="World",i[i.Team=1]="Team"},3116:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoExpressRangeAudio=void 0;var r=n(i(2760)),o=function(){function e(e){this.zegoAudioListener=r.default.getInstance(e)}return e.getInstance=function(t){if(!e.instance){if(!t)throw Error("create instance failed.");e.instance=new e(t)}return e.instance},e.prototype.on=function(e,t){return this.zegoAudioListener.on(e,t)},e.prototype.off=function(e,t){return this.zegoAudioListener.off(e,t)},e.prototype.setAudioReceiveRange=function(e){this.zegoAudioListener.setAudioReceiveRange(e)},e.prototype.updateSelfPosition=function(e,t,i,n){this.zegoAudioListener.updateSelfPosition(e,t,i,n)},e.prototype.updateAudioSource=function(e,t){this.zegoAudioListener.updateAudioSource(e,t)},e.prototype.enableSpatializer=function(e){return this.zegoAudioListener.enableSpatializer(e)},e.prototype.enableMicrophone=function(e){return this.zegoAudioListener.enableMicrophone(e)},e.prototype.enableSpeaker=function(e){return this.zegoAudioListener.enableSpeaker(e)},e.prototype.setRangeAudioMode=function(e){this.zegoAudioListener.setRangeAudioMode(e)},e.prototype.setTeamID=function(e){this.zegoAudioListener.setRangeAudioTeamID(e)},e.prototype.isAudioContextRunning=function(){return"running"===this.zegoAudioListener.getAudioContextState()},e.prototype.resumeAudioContext=function(){return this.zegoAudioListener.resumeAudioContext()},e}();t.ZegoExpressRangeAudio=o},4780:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoExpressEngine=t.ClientUtil=void 0;var s=i(9880),a=o(i(3126)),c=o(i(9869)),l=o(i(3824)),u=o(i(7526)),d=o(i(577)),h=i(2777),p=i(4897),f=i(957);s.ZegoExpressEngine.use(a.default),s.ZegoExpressEngine.use(c.default),s.ZegoExpressEngine.use(l.default),s.ZegoExpressEngine.use(u.default),s.ZegoExpressEngine.use(d.default),s.ZegoExpressEngine.use(h.RangeAudio),s.ZegoExpressEngine.use(p.DataChannel),s.ZegoExpressEngine.use(f.BeautyEffect);var g=i(9880);Object.defineProperty(t,"ClientUtil",{enumerable:!0,get:function(){return g.ClientUtil}});var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(s.ZegoExpressEngine);t.ZegoExpressEngine=m},9880:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ClientUtil=t.ZegoExpressEngine=void 0;var o=i(4119),s=i(5321),a=function(e){function t(t,i){var n=this;return o.ZegoExpressWebRTMEngine.version="2.13.0",(n=e.call(this,t,i)||this).zegoWebRTC=new s.ZegoWebRTC(n.logger,n.dataReport,n.zegoWebRTM),n}return r(t,e),t.use=function(e){o.ZegoExpressWebRTMEngine.use(e),s.ZegoWebRTC.use(e)},t.prototype.checkSystemRequirements=function(e,t){return void 0===t&&(t=0),this.zegoWebRTC.checkSystemRequirements(t,e)},t.prototype.off=function(e,t){return this.zegoWebRTM.stateCenter.listenerList[e]?this.zegoWebRTM.off(e,t):!!this.zegoWebRTC.stateCenter.listenerList[e]&&this.zegoWebRTC.off(e,t)},t.prototype.on=function(e,t){return this.zegoWebRTM.stateCenter.listenerList[e]?this.zegoWebRTM.on(e,t):!!this.zegoWebRTC.stateCenter.listenerList[e]&&this.zegoWebRTC.on(e,t)},t.prototype.createStream=function(e){return this.zegoWebRTC.createStream(e)},t.prototype.getElectronScreenSources=function(){return this.zegoWebRTC.getElectronScreenSources()},t.prototype.destroyStream=function(e){return this.zegoWebRTC.destroyStream(e)},t.prototype.startPublishingStream=function(e,t,i){return this.zegoWebRTC.startPublishingStream(e,t,i)},t.prototype.stopPublishingStream=function(e){return this.zegoWebRTC.stopPublishingStream(e)},t.prototype.setVideoConfig=function(e,t){return this.zegoWebRTC.setVideoConfig(e,t)},t.prototype.setAudioConfig=function(e,t){return this.zegoWebRTC.setAudioConfig(e,t)},t.prototype.replaceTrack=function(e,t){return this.zegoWebRTC.replaceTrack(e,t)},t.prototype.setCaptureVolume=function(e,t){return this.zegoWebRTC.setCaptureVolume(e,t)},t.prototype.setStreamExtraInfo=function(e,t){return this.zegoWebRTC.setStreamExtraInfo(e,t)},t.prototype.addPublishCdnUrl=function(e,t){return 3===arguments.length?this.zegoWebRTC.addPublishCdnUrl(arguments[0],arguments[2]):this.zegoWebRTC.addPublishCdnUrl(e,t)},t.prototype.removePublishCdnUrl=function(e,t){return 3===arguments.length?this.zegoWebRTC.removePublishCdnUrl(arguments[0],arguments[2]):this.zegoWebRTC.removePublishCdnUrl(e,t)},t.prototype.mutePublishStreamVideo=function(e,t,i){return this.zegoWebRTC.mutePublishStreamVideo(e,t,i)},t.prototype.mutePublishStreamAudio=function(e,t){return this.zegoWebRTC.mutePublishStreamAudio(e,t)},t.prototype.setEffectsBeauty=function(e,t,i){return this.zegoWebRTC.setBeautyEffect(e,t,i)},t.prototype.startPlayingStream=function(e,t){return this.zegoWebRTC.startPlayingStream(e,t)},t.prototype.stopPlayingStream=function(e){return this.zegoWebRTC.stopPlayingStream(e)},t.prototype.mutePlayStreamVideo=function(e,t){return this.zegoWebRTC.mutePlayStreamVideo(e,t)},t.prototype.mutePlayStreamAudio=function(e,t){return this.zegoWebRTC.mutePlayStreamAudio(e,t)},t.prototype.startMixerTask=function(e){return this.zegoWebRTC.startMixerTask(e)},t.prototype.stopMixerTask=function(e){return this.zegoWebRTC.stopMixerTask(e)},t.prototype.setMixerTaskConfig=function(e){return this.zegoWebRTC.setMixerTaskConfig(e)},t.prototype.startMixingAudio=function(e,t){return this.zegoWebRTC.startMixingAudio(e,t)},t.prototype.stopMixingAudio=function(e,t){return this.zegoWebRTC.stopMixingAudio(e,t)},t.prototype.setMixingAudioVolume=function(e,t,i){return this.zegoWebRTC.setMixingAudioVolume(e,t,i)},t.prototype.enumDevices=function(){return this.zegoWebRTC.enumDevices()},t.prototype.useVideoDevice=function(e,t){return this.zegoWebRTC.useVideoDevice(e,t)},t.prototype.useAudioDevice=function(e,t){return this.zegoWebRTC.useAudioDevice(e,t)},t.prototype.setSoundLevelDelegate=function(e,t){return this.zegoWebRTC.setSoundLevelDelegate(e,t)},t.prototype.isMicrophoneMuted=function(){return this.zegoWebRTC.isMicrophoneMuted()},t.prototype.muteMicrophone=function(e){return this.zegoWebRTC.muteMicrophone(e)},t.prototype.createRangeAudioInstance=function(){return this.zegoWebRTC.createRangeAudioInstance()},t.prototype.createRealTimeSequentialDataManager=function(e){return this.zegoWebRTC.createRealTimeSequentialDataManager(e)},t.prototype.destroyRealTimeSequentialDataManager=function(e){this.zegoWebRTC.destroyRealTimeSequentialDataManager(e)},t}(o.ZegoExpressWebRTMEngine);t.ZegoExpressEngine=a;var c=i(608);Object.defineProperty(t,"ClientUtil",{enumerable:!0,get:function(){return c.ClientUtil}})},1089:function(e,t){"use strict";var i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_WECHATMINI_ACTION=t.ZEGO_WEBRTC_ACTION=void 0,(n=t.ZEGO_WEBRTC_ACTION||(t.ZEGO_WEBRTC_ACTION={})).CONSTRUCTOR="zc.0",n.CHECK_SUPPORT="zc.csr",n.CREATE_STREAM="zc.cs",n.DESTROY_STREAM="zc.ds",n.START_PUBLISHING_STREAM="zc.sps.0",n.START_PLAYING_STREAM="zc.sps.1",n.STOP_PUBLISHING_STREAM="zc.sps.0.0",n.STOP_PLAYING_STREAM="zc.sps.1.0",n.ON_STREAM="zc.os",n.ON_PUSH_STREAM_UPDATE="zc.opsu",n.BIND_WINDOW_LISTENER="zc.wl",n.SET_AUDIO_OUTPUT="zc.sao",n.SET_CUSTOM_SIGNAL_URL="zc.scsu",n.SET_TURN_OVER_TCP_ONLY="zc.stoto",n.RDH_ACTIVE="zc.rdh.a",n.RDH_MAX_TIME="zc.rdh.m",n.RDH_WEBRTC_URL_RSP="zc.rdh.hfwur",n.PUBLISH_STATE_HANDLE="zc.psh.0",n.PLAY_STATE_HANDLE="zc.psh.1",n.STATECENTER_ACTION_LISTENER="zc.sc.al",n.STATECENTER_SET_SETTING="zc.sc.ss",n.SIGNAL_SET_SESSION_INFO="zc.s.ssi",n.SIGNAL_RESET_CONNECT_TIMER="zc.s.rct",n.SIGNAL_BIND_WEBSOCKET_HANDLE="zc.s.bwh",n.SIGNAL_RESET_CHECK_MESSAGE="zc.s.rcm",n.SIGNAL_UPDATE_TOKEN="zc.s.ut",n.SIGNAL_SEND_MESSAGE_WITH_CALLBACK="zc.s.smwc",n.SIGNAL_CONNECT_SERVER="zc.s.cs.0",n.SIGNAL_START_CONNECT_TIMER="zc.s.sct",n.SIGNAL_DISCONNECT_SERVER="zc.s.dc",n.SIGNAL_CREATE_SESSION="zc.s.cs.1",n.SIGNAL_REMOVE_SESSION="zc.s.rs",n.SIGNAL_SEND_REMOVE_SESSION="zc.s.srs",n.SIGNAL_SEND_MESSAGE="zc.s.sm",n.SIGNAL_HANDLE_RESPOND_DATA="zc.s.hrd",n.SIGNAL_ADD_SESSION="zc.s.as",n.SIGNAL_HANDLE_PUSH_DATA="zc.s.hpd",n.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA="zc.s.hprsd",n.SIGNAL_SEND_MEDIA_DESC="zc.s.smd",n.SIGNAL_SEND_CANDIDATE_INFO="zc.s.sci",n.SIGNAL_SEND_MEDIA_DESC_ACK="zc.s.smda",n.SIGNAL_SEND_CANDIDATE_INFO_ACK="zc.s.scia",n.SIGNAL_SEND_CLOSE_SESSION_ACK="zc.s.scsa",n.SIGNAL_SEND_RESET_SESSION_ACK="zc.s.srsa",n.SIGNAL_REGISTER_PUSH_CALLBACK="zc.s.rpc",n.SIGNAL_CHECK_MESSAGE_TIMEOUT="zc.s.cmt",n.SIGNAL_SEND_HEARTBEAT="zc.s.sh",n.SIGNAL_QUALITY_REPORT="zc.s.qr",n.SIGNAL_SEND_STREAM_STATUS="zc.s.sss",n.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM="zc.s.apvs",n.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM="zc.s.apas",n.SIGNAL_SEND_BROADCAST_STATUS="zc.s.sbs",n.SIGNAL_SEND_NET_PROBE="zc.s.snp",n.SIGNAL_SEND_NET_QUALITY_INFO_PUSH_ACK="zc.s.npa",n.PUBLISHER_START_PUBLISH="zc.p.0.sp.0",n.PUBLISHER_PUBLISH_SUCCESS="zc.p.ps",n.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS="zc.p.0.ocpss",n.PUBLISHER_HANDLE_CREATE_SESSION_WITH_SDP="zc.p.0.hcsws",n.PUBLISHER_ON_CREATE_OFFER_SUCCESS="zc.p.0.ocos",n.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS="zc.p.0.oslds",n.PUBLISHER_ON_GET_REMOTE_DESCRIPTION="zc.p.0.ogrd",n.PUBLISHER_ON_RECV_MEDIA_DESC="zc.p.0.ormd",n.PUBLISHER_ON_RECV_CANDIDATE_INFO="zc.p.0.orci.0",n.PUBLISHER_ON_RECV_PUBLISH_EVENT="zc.p.0.orpe",n.PUBLISHER_ON_RECV_CLIENT_INFO="zc.p.0.orci.1",n.PUBLISHER_ON_ICE_CANDIDATE="zc.p.0.oic",n.PUBLISHER_ON_CONNECTION_STATE_CHANGE="zc.p.0.ocsc",n.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE="zc.p.0.oicsc",n.PUBLISHER_RESET_PUBLISH="zc.p.0.rp",n.PUBLISHER_SET_PLAYER_QUALITY_TIMER="zc.p.0.spqt",n.PUBLISHER_UPLOAD_PUBLISH_QUALITY="zc.p.0.upq",n.PUBLISHER_ON_RECV_RESET_SESSION="zc.p.0.orrs",n.PUBLISHER_ON_RECV_CLOSE_SESSION="zc.p.0.orcs",n.PUBLISHER_SEND_CANDIDATE_INFO="zc.p.0.sci",n.PUBLISHER_STATE_ERROR="zc.p.0.psr",n.PUBLISHER_STOP_PUBLISH="zc.p.0.sp.1",n.PUBLISHER_ON_DISCONNECT="zc.p.0.od",n.PUBLISHER_START_SOUND_LEVEL="zc.p.0.ssl.0",n.PUBLISHER_STOP_SOUND_LEVEL="zc.p.0.ssl.1",n.PUBLISHER_HANDLE_ENC_BITRATE="zc.p.0.heb",n.PUBLISHER_ON_RECV_NET_QUALITY_INFO="zc.p.0.nqi",n.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC="zc.p.0.orumd",n.PLAYER_START_PLAY="zc.p.1.sp.0",n.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS="zc.p.ocpss.1",n.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP="zc.p.hcsws.1",n.PLAYER_ON_CREATE_OFFER_SUCCESS="zc.p.ocos.1",n.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS="zc.p.oslds.1",n.PLAYER_ON_RECV_MEDIA_DESC="zc.p.ormd.1",n.PLAYER_ON_RECV_CANDIDATE_INFO="zc.p.orci.1",n.PLAYER_ON_RECV_PLAY_EVENT="zc.p.orpe.1",n.PLAYER_ON_RECV_CLIENT_INFO="zc.p.orci.1.1",n.PLAYER_ON_ICE_CANDIDATE="zc.p.oic.1",n.PLAYER_ON_CONNECTION_STATE_CHANGE="zc.p.ocsc.1",n.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE="zc.p.oicsc.1",n.PLAYER_RESET_PLAY="zc.p.rp.1",n.PLAYER_SET_PLAYER_QUALITY_TIMER="zc.p.spqt.1",n.PLAYER_UPLOAD_PLAYER_QUALITY="zc.p.upq.1",n.PLAYER_ON_RECV_RESET_SESSION="zc.p.orrs.1",n.PLAYER_ON_RECV_CLOSE_SESSION="zc.p.orcs.1",n.PLAYER_ON_RECV_STREAM_STATUS="zc.p.orss.1",n.PLAYER_ON_GOT_REMOTE_STREAM="zc.p.ogrs.1",n.PLAYER_SEND_CANDIDATE_INFO="zc.p.sci.1",n.PLAYER_STATE_ERROR="zc.p.psr.1",n.PLAYER_STOP_PLAY="zc.p.1.sp.1",n.PLAYER_ON_DISCONNECT="zc.p.od.1",n.PLAYER_START_SOUND_LEVEL="zc.p.ssl.1",n.PLAYER_STOP_SOUND_LEVEL="zc.p.ssl.1.1",n.PLAYER_ON_RECV_NET_QUALITY_INFO="zc.p.1.nqi",n.PUBLISH_SET_CAPTURE_VOLUME="zc.p.scv",n.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe",n.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ="zc.sh.msbss",n.STREAMHANDLER_MERGE_STREAM="zc.sh.ms",n.STREAMHANDLER_PATCH_STREAM_LIST="zc.sh.psl",(i=t.ZEGO_WECHATMINI_ACTION||(t.ZEGO_WECHATMINI_ACTION={})).ADD_PUBLISH_CDN_URL="zw.apcu",i.REMOVE_PUBLISH_CDN_URL="zw.rpcu",i.STOP_MIXER_TASK="zw.smt",i.ON_STREAM="zw.os",i.ON_PUSH_STREAM_UPDATE="zw.opsu",i.ON_PUBLISH_STATE_UPDATE="zw.w.opsu",i.ON_PUBLISH_STATE_UPDATE_HANDLE="zw.w.opsuh",i.WECHATMINI_SETPREFERPLAYSOURCETYPE="zw.w.sppst.1",i.WECHATMINI_BIND_LISTENER="zw.w.bl",i.WECHATMINI_DELETE_LISTENER="zw.w.dl",i.WECHATMINI_UPDATE_PLAYER_STATE="zw.w.ups",i.WECHATMINI_UPDATE_PLAYER_NET_STATUS="zw.w.upns",i.WECHATMINI_SET_CUSTOM_SIGNAL_URL="zw.w.scsu",i.WECHATMINI_GET_NEXT_URL="zw.w.gnu",i.WECHATMINI_BIND_STREAM_CENTER_HANDLER="zw.w.bsch",i.WECHATMINI_BIND_RTM_LISTENER="zw.w.brl",i.PUBLISHMODULE_SET_PREFER_PUBLISH_SOURCE_TYPE="zw.pu.sppst.0",i.PUBLISHMODULE_START_PUBLISHING_STREAM="zw.pu.sps.0",i.PUBLISHMODULE_STOP_PUBLISHING_STREAM="zw.pu.sps.0.0",i.PUBLISHMODULE_FETCH_PUBLISH_STREAM_URL="zw.pu.fpsu.0",i.PUBLISHMODULE_HANDLE_FETCH_STREAM_PUBLISH_URL_RSP="zw.pu.hfspur.0",i.PUBLISHMODULE_DO_PUBLISH_STREAM="zw.pu.dps.0",i.PUBLISHMODULE_UPDATE_STREAM_INFO="zw.pu.upi",i.PUBLISHMODULE_HANDLE_STREAM_UPDATE_RSP="zw.pu.hsur",i.PLAYMODULE_START_PLAYING_STREAM="zw.pl.sps.1",i.PLAYMODULE_STOP_PLAYING_STREAM="zw.pl.sps.1.0",i.PLAYMODULE_START_PLAYING_STREAM_FROM_CDN="zw.pl.spsfc",i.PLAYMODULE_START_PLAYING_STREAM_FROM_BGP="zw.pl.spsfb",i.PLAYMODULE_DO_PLAY_STREAM="zw.pl.dps",i.PLAYMODULE_FETCH_PLAY_STREAM_URL="zw.pl.fpsu",i.PLAYMODULE_HANDLE_FETCH_STREAM_URL_RSP="zw.pl.hfsur",i.STREAMCENTERWECHAT_RESET="zw.scw.r.0",i.STREAMCENTERWECHAT_START_PUBLISHING_STREAM="zw.scw.sps.0",i.STREAMCENTERWECHAT_START_PLAYING_STREAM="zw.scw.sps.1",i.STREAMCENTERWECHAT_START_PLAYER="zw.scw.sp.0",i.STREAMCENTERWECHAT_ON_STREAM_URL_UPDATE="zw.scw.opuu.0",i.STREAMCENTERWECHAT_UPDATE_PLAYER_STATE="zw.scw.ups.0",i.STREAMCENTERWECHAT_UPDATE_PLAYER_NET_STATUS="zw.scw.upns",i.STREAMCENTERWECHAT_UPDATE_PUBLISHING_STATE="zw.scw.ups.0.0",i.STREAMCENTERWECHAT_UPDATE_PLAYING_STATE="zw.scw.ups.1.0",i.STREAMCENTERWECHAT_GET_NEXT_URL="zw.scw.gnu",i.STREAMCENTERWECHAT_STOP_PUBLISHING_STREAM="zw.scw.sps.0.0",i.STREAMCENTERWECHAT_STOP_PLAYING_STREAM="zw.scw.sps.1.0",i.STREAMCENTERWECHAT_STOP_PLAYER="zw.scw.sp.1",i.STREAMCENTERWECHAT_ON_PLAY_START="zw.scw.ops.0",i.STREAMCENTERWECHAT_ON_PLAY_STOP="zw.scw.ops.1",i.STREAMCENTERWECHAT_ON_PLAY_RETRY="zw.scw.opr",i.PLAYWECHAT_TRY_START_PLAYER="zw.pw.tsp.0",i.PLAYWECHAT_UPDATE_EVENT="zw.pw.ue",i.PLAYWECHAT_GET_PLAY_URL="zw.pw.gpu"},9595:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RTC=t.ZegoSettingConfig=void 0;var i=function(){function e(){this.defaultSetting={publish_video_codec:"H264",camera_video_bitrate:800,screen_video_bitrate:1500,custom_video_bitrate:0,l3_play_buffer_ms:500,AEC:!0,AGC:!0,ANS:!0,resource_mode:0,bitrate_mode:"default"},this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.setSetting=function(e,t){var i=Array.isArray(t)&&t.length>0;for(var n in e)for(var r in e[n])if(!r.endsWith("_ctrlmode")){if(i&&-1==t.indexOf(r))continue;var o=e[n][r+"_ctrlmode"];1===o||2===o?this.setting[r]=e[n][r]:this.defaultSetting[r]&&(this.setting[r]=this.defaultSetting[r]),"number"==typeof o&&(this.setting[r+"_ctrlmode"]=e[n][r+"_ctrlmode"])}},e.prototype.getSetting=function(e,t){return void 0===t&&(t=!1),t?2==this.setting[e+"_ctrlmode"]?this.setting[e]:void 0:this.setting[e]},e}();t.ZegoSettingConfig=i,t.RTC="rtc"},7325:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0;var n=i(6706),r=i(608),o=i(1089),s=i(9595),a=i(6706),c=i(3529),l=function(){function e(e,t){this.logger=e,this.dataReport=t,this.debug=!1,this.testEnvironment=!1,this.pullLimited=!0,this.configOK=!1,this.relateService=[],this.role=2,this.maxMemberCount=0,this.roomCreateFlag=1,this.callbackList={},this.publishStreamList={},this.streamUrlMap={},this.cmdCallback={},this.customUrl=[],this.customPlayUrl=[],this.turnOverTcpOnly=!1,this.customSetTcpOrUdp=!1,this.supportUdp=!1,this.audioEffectBuffer={},this.audioBitRate=48e3,this.cdnSeq=0,this.listenerList={roomStreamUpdate:[],streamExtraInfoUpdate:[],playerStateUpdate:[],publisherStateUpdate:[],screenSharingEnded:[],publishQualityUpdate:[],playQualityUpdate:[],remoteCameraStatusUpdate:[],remoteMicStatusUpdate:[],soundLevelUpdate:[],capturedSoundLevelUpdate:[],videoDeviceStateChanged:[],audioDeviceStateChanged:[],deviceError:[],_deviceError:[],_remoteCameraStatusUpdate:[],_remoteMicStatusUpdate:[],_streamUpdated:[],receiveRealTimeSequentialData:[],beautyEffectOverload:[]},this.reportList={},this.reportSeqList={startPublish:{},rePublish:{},startPlay:{},rePlay:{},stopPublish:{},stopPlay:{}},this.streamTrigger={},this.audioStreamList={},this.deviceInfos=null,this.deviceChangeTimer=null,this.deviceStateOut=!1,this.networkState=a.ENUM_NETWORK_STATE.offline,this.streamRetryTime=300,this.checkList=[],this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""},this.streamConnectTime=0,this.clientIP="",this.type="PUBLIC",this.roomList=[],this.isMultiRoom=!1,this.browser="",this.logReportCallback=r.ClientUtil.logReportCallback,this.unregisterCallback=r.ClientUtil.unregisterCallback,this.checkIllegalCharacters=r.ClientUtil.checkIllegalCharacters,this.decodeServerError=r.ClientUtil.decodeServerError,this.getLiveRoomError=r.ClientUtil.getLiveRoomError,this.getServerError=r.ClientUtil.getServerError,this.mergeStreamList=r.ClientUtil.mergeStreamList,this.checkInteger=r.ClientUtil.checkInteger,this.isUrl=r.ClientUtil.isUrl,this.actionSuccessCallback=r.ClientUtil.actionSuccessCallback,this.checkValidNumber=r.ClientUtil.checkValidNumber,this.getDevices=r.ClientUtil.getDevices,this.settingConfig=new s.ZegoSettingConfig}return e.prototype.getRequestId=function(){return this.idName+"-"+a.getSeq()},e.prototype.getSignalCmdContent=function(e,t,i,n){var r={request_id:t,room_id:e,from_userid:this.idName,from_username:this.nickName,to_userid:i};return null!=n&&(r.result=n),JSON.stringify(r)},e.prototype.actionListener=function(e){for(var t=this,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];if(!["playQualityUpdate","publishQualityUpdate","soundLevelUpdate","capturedSoundLevelUpdate"].includes(e)&&this.listenerList[e]){var s=n.getReportSeq();this.dataReport.newReport(s,c.ZegoRTCLogEvent.kZegoListener.event),this.dataReport.addMsgInfo(s,{listener:e,params:i}),this.dataReport.uploadReport(s)}this.listenerList[e]&&this.listenerList[e].forEach((function(n){try{setTimeout((function(){n.apply(void 0,i)}),0)}catch(i){t.logger.error(o.ZEGO_WEBRTC_ACTION.STATECENTER_ACTION_LISTENER+" "+e+" "+i)}}))},e.prototype.getRoomByRoomID=function(e){return this.roomList.find((function(t){return t.roomID==e}))},e.prototype.getPlayRoom=function(e){return this.roomList.find((function(t){return!!t.streamList.find((function(t){return t.stream_id==e}))}))},e}();t.StateCenter=l},5740:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStreamCenter=void 0,t.ZegoStreamCenter=function(){this.publisherList={},this.playerList={}}},7560:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamHandler=void 0;var n=i(6706),r=i(2752),o=i(1089),s=function(){function e(e,t,i,n,r){this.logger=e,this.stateCenter=t,this.rtm=i,this.streamCenter=n,this.roomID=r,this.minStreamSeq=0,this.streamSeq=0,this.streamQuerying=!1,this.streamSeqMergeMap=null,this.streamListHBMergeInterval=2e3,this.streamListMergeInterval=5e3}return e.prototype.setCDNInfo=function(e,t){e.urlFlv=t.urls_flv instanceof Array?t.urls_flv[0]:"string"==typeof t.urls_flv?t.urls_flv:"",e.urlHls=t.urls_m3u8 instanceof Array?t.urls_m3u8[0]:"string"==typeof t.urls_m3u8?t.urls_m3u8:"",e.urlHttpsFlv=t.urls_https_flv instanceof Array?t.urls_https_flv[0]:"string"==typeof t.urls_https_flv?t.urls_https_flv:"",e.urlHttpsHls=t.urls_https_m3u8 instanceof Array?t.urls_https_m3u8[0]:"string"==typeof t.urls_https_m3u8?t.urls_https_m3u8:"",e.urlRtmp=t.urls_rtmp instanceof Array?t.urls_rtmp[0]:"string"==typeof t.urls_rtmp?t.urls_rtmp:""},e.prototype.onStreamUpdated=function(e,t,i){},e.prototype.onStreamExtraInfoUpdated=function(e,t){},e.prototype.handleStreamStart=function(e,t){this.logger.info("zb.sh.hss call stream update"),this.room=t,e.body?(this.streamListHBMergeInterval=e.body.stream_list_hb_wait_merge_time||2e3,this.streamListMergeInterval=e.body.stream_list_push_merge_timeout||5e3,this.streamQuerying=!1,this.handleFullUpdateStream(e.body.stream_seq,e.body.stream_info||[]),this.handleReconnectStream(e.body.stream_info),this.logger.info("zb.sh.hss call end")):this.logger.error("zb.sh.hss server response wrong")},e.prototype.onPublishStateUpdate=function(e,t,i){},e.prototype.updateStreamInfo=function(e,t,i,o){var s,a,c,l=this;if(void 0===i&&(i=""),this.logger.info("zb.sh.usi call"),"PUBLIC"===this.stateCenter.type){var u={stream_id:e,extra_info:i},d=JSON.stringify(u);a={sub_cmd:t,stream_msg:d,third_token:null===(s=this.room)||void 0===s?void 0:s.token},c="stream"}else a={room_header:{room_id:this.roomID,room_sid:this.rtm.getRoomSid()||"0",room_user_session_id:this.rtm.getRoomSessionID()||"0"},stream_id:e,extra_info:i,title:"",stream_sid:this.stateCenter.publishStreamList[e].sid},c=t;var h=this.room;this.room.streamInfoList[e]={},this.room.streamInfoList[e].seq=this.rtm.service.sendMessage(c,a,(function(e,t){l.handleStreamUpdateRsp(e)}),(function(s,a){var c=l.room;if(c&&!c.isResetRoom&&!l.rtm.service.isDisConnect()&&s.code&&s.code==r.errorCodeList.TIMEOUT.code&&c.streamInfoList[e].seq==a)2001==t&&l.stateCenter.publishStreamList[e]&&l.stateCenter.publishStreamList[e].state==n.ENUM_PUBLISH_STREAM_STATE.update_info||2002==t?setTimeout((function(){l.updateStreamInfo(e,t,i,o)}),0):o&&o(r.errorCodeList.TIMEOUT);else if(s.body&&s.body.err_code){var u=l.stateCenter.getServerError(s.body.err_code);[1011,1000002002].includes(u.code)&&(u=r.errorCodeList.TOKEN_EXPIRED),o&&o(u,a),t===n.ENUM_STREAM_SUB_CMD.liveBegin&&l.onPublishStateUpdate(n.ENUM_PUBLISH_STATE_UPDATE.error,e,u)}}),void 0,{sessionID:null==h?void 0:h.sessionID,roomID:null==h?void 0:h.roomID,roomSessionID:null==h?void 0:h.roomSessionID}),this.logger.info("zb.sh.usi call success cmd "+t)},e.prototype.handleStreamUpdateRsp=function(e){var t,i,r;if(this.rtm.service.isDisConnect())this.logger.error("zb.sh.hsur not login");else if(0==e.body.err_code){this.logger.info("zb.sh.hsur stream seq "+this.streamSeq+" server seq "+e.body.stream_seq),"PUBLIC"===this.stateCenter.type?this.streamSeq=e.body.stream_seq:this.streamSeq++;var o=this.room;if(o)if("PUBLIC"===this.stateCenter.type){(null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.token_remain_time)&&(this.stateCenter.getRoomByRoomID(null===(i=null==e?void 0:e.header)||void 0===i?void 0:i.room_id)?this.rtm.resetRoomTokenTimer(e.header.room_id,e.body.token_remain_time):this.logger.error("zb.sh.hsur room no found ignore "+JSON.stringify(null===(r=e.header)||void 0===r?void 0:r.room_id)));for(var s=function(t){var i=e.body.stream_info[t].stream_id,r=a.stateCenter.publishStreamList[i];if(!r)return a.logger.info("hsur.0 stream is not exist"),{value:void 0};r.state==n.ENUM_PUBLISH_STREAM_STATE.update_info&&(r.state=n.ENUM_PUBLISH_STREAM_STATE.publishing,o.streamList.find((function(e){return e.stream_id==i}))||o.streamList.push(e.body.stream_info[t]),a.onPublishStateUpdate(n.ENUM_PUBLISH_STATE_UPDATE.start,i,{code:0,message:""})),delete o.streamInfoList[i]},a=this,c=0;c<e.body.stream_info.length;c++){var l=s(c);if("object"==typeof l)return l.value}}else{var u=e.body.stream_id;this.stateCenter.publishStreamList[u]&&this.stateCenter.publishStreamList[u].state==n.ENUM_PUBLISH_STREAM_STATE.update_info&&(this.stateCenter.publishStreamList[u].state=n.ENUM_PUBLISH_STREAM_STATE.publishing,this.stateCenter.publishStreamList[u].sid=e.body.stream_sid,this.stateCenter.publishStreamList[u].ver=e.body.stream_ver,o.streamList.find((function(e){return e.stream_id==u}))||o.streamList.push({stream_id:e.body.stream_id,stream_seq:e.body.stream_seq,stream_sid:e.body.stream_sid,stream_ver:e.body.stream_ver,user_id:"",user_name:""}),this.onPublishStateUpdate(0,u,{code:0,message:""})),delete o.streamInfoList[u]}else this.logger.info("hsur.0 room no found")}else this.logger.error("zb.sh.hsur stream update error "+e.body.err_code)},e.prototype.handleFetchStreamListRsp=function(e){this.logger.info("zb.sh.hfslr call"),this.streamQuerying=!1,0===e.body.err_code?this.streamSeq!==e.body.stream_seq?(this.handleFullUpdateStream(e.body.stream_seq,e.body.stream_info),this.logger.info("zb.sh.hfslr call success")):this.logger.info("zb.sh.hfslr same seq"):this.logger.info("zb.sh.hfslr server error=",e.body.err_code)},e.prototype.handleFullUpdateStream=function(e,t){var i=this;this.logger.info("zb.sh.hfus call"),this.streamSeq=e,this.logger.debug("zb.sh.hfus server seq "+this.streamSeq),this.stateCenter.mergeStreamList(this.stateCenter.idName,this.room.streamList,t,(function(e,t,r){0!==e.length&&(i.logger.debug("zb.sh.hfus callback addstream"),i.onStreamUpdated(i.roomID,n.ENUM_STREAM_UPDATE_TYPE.added,i.makeCallbackStreamList(e))),0!==t.length&&(i.logger.debug("zb.sh.hfus callback delstream"),i.onStreamUpdated(i.roomID,n.ENUM_STREAM_UPDATE_TYPE.deleted,i.makeCallbackStreamList(t))),0!==r.length&&(i.logger.debug("zb.sh.hfus callback updatestream"),i.onStreamExtraInfoUpdated(i.roomID,i.makeCallbackStreamList(r)))})),this.logger.info("zb.sh.hfus call success")},e.prototype.handlePushStreamUpdateMsg=function(e){if(this.logger.info("zb.sh.hpsum call"),e.body.stream_info&&0!==e.body.stream_info.length){if(e.body.stream_info.length+this.streamSeq!==e.body.stream_seq)return this.logger.info("zb.sh.hpsum call updatestream"),void this.fetchStreamList();switch(this.streamSeq=e.body.stream_seq,e.body.stream_cmd){case n.ENUM_STREAM_UPDATE_CMD.added:this.handleAddedStreamList(e.body.stream_info);break;case n.ENUM_STREAM_UPDATE_CMD.deleted:this.handleDeletedStreamList(e.body.stream_info);break;case n.ENUM_STREAM_UPDATE_CMD.updated:this.handleUpdatedStreamList(e.body.stream_info)}this.logger.info("zb.sh.hpsum call success")}else this.logger.info("zb.sh.hpsum, emtpy list")},e.prototype.handlePriPushStreamUpdateMsg=function(e){if(this.logger.info("zb.sh.hpsum call"),e.body.streams_info&&0!==e.body.streams_info.length){if(e.body.streams_info.length+this.streamSeq!==e.body.stream_seq)return this.logger.info("zb.sh.hpsum call updatestream"),void this.mergeStreamByStreamSeq(e.body.stream_cmd,e.body.stream_seq,e.body.streams_info);switch(this.streamSeq=e.body.stream_seq,e.body.stream_cmd){case n.ENUM_STREAM_UPDATE_CMD_PRI.added:this.handleAddedStreamList(e.body.streams_info);break;case n.ENUM_STREAM_UPDATE_CMD_PRI.deleted:this.handleDeletedStreamList(e.body.streams_info);break;case n.ENUM_STREAM_UPDATE_CMD_PRI.updated:this.handleUpdatedStreamList(e.body.streams_info)}this.logger.info("zb.sh.hpsum call success")}else this.logger.info("zb.sh.hpsum, emtpy list")},e.prototype.handleAddedStreamList=function(e){this.logger.debug("zb.sh.hasl call");for(var t,i=[],r=0;r<e.length;r++)if(e[r].anchor_id_name!=this.stateCenter.idName&&e[r].user_id!==this.stateCenter.idName){t=!1;for(var o=0;o<this.room.streamList.length;o++)if(e[r].stream_id===this.room.streamList[o].stream_id){t=!0;break}t||i.push(e[r])}else this.logger.debug("hdsl.0 have self stream added");if(0!==i.length){this.logger.debug("zb.sh.hasl callback addstream");for(var s=0;s<i.length;s++)this.room.streamList.push(i[s]);this.onStreamUpdated(this.roomID,n.ENUM_STREAM_UPDATE_TYPE.added,this.makeCallbackStreamList(i))}this.logger.info("zb.sh.hasl call success")},e.prototype.handleDeletedStreamList=function(e){this.logger.debug("zb.sh.hdsl call");for(var t=[],i=0;i<e.length;i++)if(e[i].anchor_id_name!=this.stateCenter.idName&&e[i].user_id!==this.stateCenter.idName){for(var r=this.room.streamList.length-1;r>=0;r--)if(e[i].stream_id===this.room.streamList[r].stream_id){this.room.streamList.splice(r--,1),t.push(e[i]);break}}else this.logger.debug("zb.sh.hdsl have self stream deleted");0!==t.length&&(this.logger.debug("zb.sh.hdsl callback delstream"),this.onStreamUpdated(this.roomID,n.ENUM_STREAM_UPDATE_TYPE.deleted,this.makeCallbackStreamList(t))),this.logger.info("zb.sh.hdsl call")},e.prototype.handleUpdatedStreamList=function(e){this.logger.debug("zb.sh.husl call");for(var t=[],i=0;i<e.length;i++)if(e[i].anchor_id_name!=this.stateCenter.idName&&e[i].user_id!==this.stateCenter.idName){for(var n=0;n<this.room.streamList.length;n++)if(e[i].stream_id===this.room.streamList[n].stream_id){e[i].extra_info!==this.room.streamList[n].extra_info&&(this.room.streamList[n]=e[i],t.push(e[i]));break}}else this.logger.debug("hsul.0 have self stream updated");0!==t.length&&(this.logger.debug("zb.sh.husl callback updatestream"),this.onStreamExtraInfoUpdated(this.roomID,this.makeCallbackStreamList(t))),this.logger.info("zb.sh.husl call success")},e.prototype.fetchStreamList=function(){if(this.logger.info("zb.sh.fsl call"),this.rtm.service.isDisConnect())this.logger.info("zb.sh.fsl state error");else if(this.streamQuerying)this.logger.info("zb.sh.fsl already doing");else if(this.streamQuerying=!0,this.logger.debug("zb.sh.fsl send fetch request"),"PUBLIC"===this.stateCenter.type){var e={reserve:0},t=this.room;this.rtm.service.sendMessage("stream_info",e,this.handleFetchStreamListRsp.bind(this),(function(e,t){}),void 0,{roomID:null==t?void 0:t.roomID,sessionID:null==t?void 0:t.sessionID,roomSessionID:null==t?void 0:t.roomSessionID}),this.logger.info("zb.sh.fsl call success")}else{if(!this.rtm.isLogin(this.roomID))return void this.logger.info("zb.sh.fsl room state error");e={room_header:{room_id:this.roomID,room_sid:this.rtm.getRoomSid()||"0",room_user_session_id:this.rtm.getRoomSessionID()||"0"}},this.rtm.service.sendMessage("zegochat_js.room_info_req",e,this.handleFetchStreamListRsp.bind(this),(function(e,t){}))}},e.prototype.handleReconnectStream=function(e){this.logger.info("zb.sh.hrs call");var t=this.streamCenter.publisherList,i=this.streamCenter.playerList,r=function(i){if(t[i].roomID!==o.roomID)return"continue";if(t[i].publisher.state!=n.ENUM_PUBLISH_STATE.publishing||e.find((function(e){return e.stream_id==i}))){if(t[i].publisher.state==n.ENUM_PUBLISH_STATE.stop&&e.find((function(e){return e.stream_id==i}))){s=void 0,s="PUBLIC"===o.stateCenter.type?n.ENUM_STREAM_SUB_CMD.liveEnd:n.ENUM_STREAM_CMD_PRI.liveEnd,o.updateStreamInfo(i,s);for(var r=0;r<o.room.streamList.length;r++)if(o.room.streamList[r].stream_id==i){o.room.streamList.splice(r--,1);break}}}else{var s=void 0;s="PUBLIC"===o.stateCenter.type?n.ENUM_STREAM_SUB_CMD.liveBegin:n.ENUM_STREAM_CMD_PRI.liveBegin,o.updateStreamInfo(i,s,o.stateCenter.publishStreamList[i].extra_info)}},o=this;for(var s in t)r(s);for(var s in t)t[s].roomID===this.roomID&&t[s].isReDispatch&&(this.logger.info("zb.sh.hrs "+s+"retry dispatch"),(a=t[s].retryDispatchHandler).stopMaxTime(),a.invalid(),a.initStream(s,t[s].publishOption,!0),a.active(0),t[s].isReDispatch=!1);for(var s in i){var a;i[s].roomID===this.roomID&&i[s].isReDispatch&&(this.logger.info("zb.sh.hrs "+s+"retry dispatch"),(a=i[s].retryDispatchHandler).stopMaxTime(),a.invalid(),a.initStream(s,i[s].playOption,!1),a.active(0),i[s].isReDispatch=!1)}this.logger.info("zb.sh.hrs end")},e.prototype.makeCallbackStreamList=function(e){var t=[];if("PUBLIC"===this.stateCenter.type){if(e&&e.length>0)for(var i=0;i<e.length;i++){var n={user:{userID:e[i].anchor_id_name,userName:e[i].anchor_nick_name},extraInfo:e[i].extra_info,streamID:e[i].stream_id,roomID:"",urlFlv:"",urlRtmp:"",urlHls:"",urlHttpsFlv:"",urlHttpsHls:"",streamGID:e[i].stream_gid,closeType:e[i].close_type};this.setCDNInfo(n,e[i]),t.push(n)}}else if(e&&e.length>0)for(i=0;i<e.length;i++)n={user_id:e[i].user_id,user_name:e[i].user_name,stream_id:e[i].stream_id,stream_sid:e[i].stream_sid,extra_info:e[i].extra_info,title:e[i].title,stream_ver:e[i].stream_ver},t.push(n);return t},e.prototype.sendBizChannelRequest=function(e,t,i,n){var r=this;void 0===n&&(n=!1),e=Object.assign(e,{is_retry_req:n?1:0});var o=this.room;this.rtm.service.sendMessage("biz_channel",e,(function(e,i){t(e.header.seq,e.body.cmd,e.body.rsp_body)}),(function(n,o){var s=n.body.err_code,a=n.body.rsp_body;"number"!=typeof s||2002!==s?i(s,o,a):r.sendBizChannelRequest(e,t,i,!0)}),void 0,{roomID:null==o?void 0:o.roomID,sessionID:null==o?void 0:o.sessionID,roomSessionID:null==o?void 0:o.roomSessionID})},e.prototype.updateStreamExtraInfo=function(e,t,i,n){},e.prototype.setStreamExtraInfo=function(e,t,i,n){},e.prototype._publishTarget=function(e,t,i){},e.prototype.patchStreamList=function(e){var t=this;e.body.stream_seq===this.streamSeq||this.streamSeqMergeMap||(this.logger.info(o.ZEGO_WEBRTC_ACTION.STREAMHANDLER_PATCH_STREAM_LIST+" call update stream "+this.streamSeq+" server "+e.body.stream_seq),this.streamSeqMergeTimer&&clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=setTimeout((function(){t.handleMergeTimeout()}),this.streamListHBMergeInterval)),this.minStreamSeq=e.body.stream_seq},e.prototype.mergeStreamByStreamSeq=function(e,t,i){var n=this;this.streamSeqMergeMap||(this.logger.warn(o.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ+" new merge stream list "+this.streamSeq+" server "+t),this.streamSeqMergeMap={},this.streamSeqMergeTimer&&clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=setTimeout((function(){n.handleMergeTimeout()}),this.streamListMergeInterval)),this.logger.info(o.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ+" "+this.streamSeqMergeMap+" "+e+" "+t+" "+i),this.streamSeqMergeMap[t]={cmd:e,streamList:i}},e.prototype.handleMergeTimeout=function(){if(this.streamSeqMergeMap){var e=Object.keys(this.streamSeqMergeMap).map((function(e){return+e})).sort((function(e,t){return e-t}));e[e.length-1]-e[0]+1===e.length||e[e.length-1]>=this.minStreamSeq?this.mergeStream(e):(this.streamSeqMergeMap=null,this.fetchStreamList())}},e.prototype.mergeStream=function(e){var t=this;this.logger.info(o.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM+" merge streamList "+this.streamSeq+" streamSeqList "+e.join(","));var i=e[e.length-1],r=[];e.forEach((function(e){if(t.streamSeqMergeMap&&t.streamSeqMergeMap[e])switch(t.streamSeqMergeMap[e].cmd){case n.ENUM_STREAM_UPDATE_CMD.added:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=r.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&r.splice(t),r.push(e)}));break;case n.ENUM_STREAM_UPDATE_CMD.deleted:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=r.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&r.splice(t)}));break;case n.ENUM_STREAM_UPDATE_CMD.updated:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=r.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&r.splice(t),r.push(e)}))}})),this.streamSeqMergeMap=null,this.logger.info(o.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM+" "+r),this.handleFullUpdateStream(i,r)},e.prototype.reset=function(){this.minStreamSeq=0,this.streamSeqMergeMap=null,this.streamSeqMergeTimer&&(clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=void 0),this.streamListHBMergeInterval=2e3,this.streamListMergeInterval=5e3},e.prototype.getRoomInfo=function(){var e=this;return new Promise((function(t,i){if(e.rtm.isLogin(e.roomID)){var n=function(e,n){if(0!==e.body.code)i({errorCode:e.body.code,extendData:e.body.message});else{var r=e.body.streams_info.map((function(e){return{streamID:e.stream_id,user:{userID:e.user_id,userName:e.user_name},extraInfo:e.extra_info}}));t({streamList:r})}},r={room_header:{room_id:e.roomID,room_sid:e.rtm.getRoomSid()||"0",room_user_session_id:e.rtm.getRoomSessionID()||"0"}};e.rtm.service.sendMessage("zegochat_js.room_info_req",r,n,n)}else e.logger.error("zn.rh.gri no enter room")}))},e}();t.StreamHandler=s},6706:function(e,t,i){"use strict";var n,r,o,s,a,c,l,u,d,h,p,f;Object.defineProperty(t,"__esModule",{value:!0}),t.ENUM_PUBLISH_STATE_UPDATE=t.LinkedList=t.ListNode=t.E_CLIENT_TYPE=t.ENUM_SOURCE_TYPE=t.ENUM_DISPATCH_TYPE=t.ENUM_BROADCASTER_STATUS=t.ENUM_PLAY_SOURCE_TYPE=t.ENUM_PUBLISH_STATE_NEGO=t.ENUM_PUSH_SIGNAL_SUB_CMD=t.ENUM_SIGNAL_SUB_CMD=t.QUALITYLEVEL=t.SERVER_ERROR_CODE=t.ENUM_STREAM_UPDATE_CMD_PRI=t.ENUM_STREAM_UPDATE_CMD=t.MINIUM_HEARTBEAT_INTERVAL=t.STREAM_DELETE_REASON=t.ENUM_NETWORK_STATE=t.ENUM_RUN_STATE=t.ENUM_STREAM_UPDATE_TYPE=t.ENUM_STREAM_CMD_PRI=t.ENUM_STREAM_SUB_CMD=t.ENUM_PUBLISH_STREAM_STATE=t.MAX_RETRY_CONNECT_INTERVAL=t.MAX_TRANS_DATA_LENGTH=t.MAX_TRANS_TYPE_LENGTH=t.MAX_MESSAGE_LENGTH=t.MAX_ROOM_ID_LENGTH=t.MAX_USER_NAME_LENGTH=t.MAX_USER_ID_LENGTH=t.MAX_STREAM_ID_LENGTH=t.MAX_TRY_HEARTBEAT_COUNT=t.SEND_MSG_TIMEOUT=t.SEND_MSG_RESET=t.MAX_TRY_CONNECT_COUNT=t.ENUM_CONNECT_STATE=t.ENUM_PROBE_STATE=t.ENUM_PLAY_STATE_NEGO=t.ENUM_PLAYER_STATE=t.ENUM_PLAY_STATE=t.ENUM_PUBLISH_STATE=t.ENUM_SCREEM_RESOLUTION_TYPE=t.ENUM_RESOLUTION_TYPE=t.ENUM_SIGNAL_STATE=t.ERROR_CODES=t.ENUM_REMOTE_TYPE=t.LOG_LEVEL=t.ENUM_LOG_LEVEL=t.ROOMVERSION=t.PROTO_VERSION=void 0,t.ZegoExpressWebRTM=t.ZegoDataReport=t.ZegoLogger=t.ZegoExpressWebRTMEngine=t.getReportSeq=t.getSeq=t.QUALITY_CONSTANT=t.QualityGrade=t.REPORT_ACTION=t.ENUM_RETRY_STATE=t.ENUM_PLAY_STATE_UPDATE=void 0,t.PROTO_VERSION="2.13.0",t.ROOMVERSION="V1",(f=t.ENUM_LOG_LEVEL||(t.ENUM_LOG_LEVEL={}))[f.debug=0]="debug",f[f.info=1]="info",f[f.warn=2]="warn",f[f.error=3]="error",f[f.report=99]="report",f[f.disable=100]="disable",t.LOG_LEVEL={debug:0,info:1,warn:2,error:3,report:99,disable:100},(p=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[p.disable=0]="disable",p[p.websocket=1]="websocket",p[p.https=2]="https",t.ERROR_CODES={ROOM_SESSION_ID_ERR:1000000152,FETCH_TRANS_UNKNOWN_CHANNEL:1000001108,FETCH_TRANS_UNKNOWN_TYPE:1000001109,FETCH_TRANS_WRONG_SEQ:1000001110},(h=t.ENUM_SIGNAL_STATE||(t.ENUM_SIGNAL_STATE={}))[h.disconnected=0]="disconnected",h[h.connecting=1]="connecting",h[h.connected=2]="connected",t.ENUM_RESOLUTION_TYPE={LOW:{width:320,height:240,frameRate:15,bitRate:300},MEDIUM:{width:640,height:480,frameRate:15,bitRate:800},HIGH:{width:1280,height:720,frameRate:20,bitRate:1500}},t.ENUM_SCREEM_RESOLUTION_TYPE={LOW:{frameRate:20,bitRate:800},MEDIUM:{frameRate:15,bitRate:1500},HIGH:{frameRate:5,bitRate:2e3}},t.ENUM_PUBLISH_STATE={start:0,waitingSessionRsp:1,waitingOfferRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,publishing:6,stop:7,didNotStart:8},t.ENUM_PLAY_STATE={start:0,waitingSessionRsp:1,waitingOfferRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,playing:6,stop:7,didNotStart:8},t.ENUM_PLAYER_STATE={start:0,playing:1,stop:2},t.ENUM_PLAY_STATE_NEGO={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8},(d=t.ENUM_PROBE_STATE||(t.ENUM_PROBE_STATE={}))[d.tryProbe=0]="tryProbe",d[d.probed=2]="probed",t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},t.MAX_TRY_CONNECT_COUNT=3,t.SEND_MSG_RESET=2,t.SEND_MSG_TIMEOUT=1,t.MAX_TRY_HEARTBEAT_COUNT=5,t.MAX_STREAM_ID_LENGTH=256,t.MAX_USER_ID_LENGTH=64,t.MAX_USER_NAME_LENGTH=256,t.MAX_ROOM_ID_LENGTH=128,t.MAX_MESSAGE_LENGTH=1024,t.MAX_TRANS_TYPE_LENGTH=128,t.MAX_TRANS_DATA_LENGTH=4096,t.MAX_RETRY_CONNECT_INTERVAL=12,t.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},t.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},t.ENUM_STREAM_CMD_PRI={liveBegin:"zegochat_js.room_stream_create_req",liveEnd:"zegochat_js.room_stream_delete_req",liveUpdate:"zegochat_js.room_stream_update_req"},t.ENUM_STREAM_UPDATE_TYPE={added:1,deleted:0},(u=t.ENUM_RUN_STATE||(t.ENUM_RUN_STATE={}))[u.logout=0]="logout",u[u.trylogin=1]="trylogin",u[u.login=2]="login",(l=t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={}))[l.offline=0]="offline",l[l.online=1]="online",t.STREAM_DELETE_REASON={0:{code:1,description:"user_stop_publishing_stream_normal"},1:{code:2,description:"user_heart_beat_timeout"},2:{code:3,description:"user_repeat_login"},3:{code:4,description:"user_kicked_out"},4:{code:5,description:"user_offline"},100:{code:6,description:"remove_by_server"}},t.MINIUM_HEARTBEAT_INTERVAL=3e3,t.ENUM_STREAM_UPDATE_CMD={added:12001,deleted:12002,updated:12003},t.ENUM_STREAM_UPDATE_CMD_PRI={added:1,updated:2,deleted:3},t.SERVER_ERROR_CODE=1e4,(c=t.QUALITYLEVEL||(t.QUALITYLEVEL={}))[c.low=1]="low",c[c.stantard=2]="stantard",c[c.hight=3]="hight",c[c.custome=4]="custome",t.ENUM_SIGNAL_SUB_CMD={none:0,joinLiveRequest:1001,joinLiveResult:1002,joinLiveInvite:1003,joinLiveStop:1004},t.ENUM_PUSH_SIGNAL_SUB_CMD={none:0,pushJoinLiveRequest:11001,pushJoinLiveResult:11002,pushJoinLiveInvite:11003,pushJoinLiveStop:11004},t.ENUM_PUBLISH_STATE_NEGO={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8},(a=t.ENUM_PLAY_SOURCE_TYPE||(t.ENUM_PLAY_SOURCE_TYPE={}))[a.cdn=0]="cdn",a[a.ultra=1]="ultra",(s=t.ENUM_BROADCASTER_STATUS||(t.ENUM_BROADCASTER_STATUS={}))[s.stop=0]="stop",s[s.start=1]="start",(o=t.ENUM_DISPATCH_TYPE||(t.ENUM_DISPATCH_TYPE={}))[o.cdn=0]="cdn",o[o.ultra=1]="ultra",o[o.customUrl=2]="customUrl",(r=t.ENUM_SOURCE_TYPE||(t.ENUM_SOURCE_TYPE={}))[r.CDN=0]="CDN",r[r.BGP=1]="BGP",(n=t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))[n.ClientType_None=0]="ClientType_None",n[n.ClientType_H5=1]="ClientType_H5",n[n.ClientType_SmallPragram=2]="ClientType_SmallPragram",n[n.ClientType_Webrtc=3]="ClientType_Webrtc";var g=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this._id=null,this.next=null,this.prev=null,this._id=e,this._data=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id?this._id:null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),e.prototype.hasNext=function(){return this.next&&this.next.id},e.prototype.hasPrev=function(){return this.prev&&this.prev.id},e}();t.ListNode=g;var m,_,v=function(){function e(){this.start=new g,this.end=new g,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}return e.prototype.insertBefore=function(e,t){var i=new g(this._idCounter,t);return i.next=e,i.prev=e.prev,e.prev&&(e.prev.next=i),e.prev=i,++this._idCounter,++this._numNodes,i},e.prototype.addLast=function(e){return this.insertBefore(this.end,e)},e.prototype.add=function(e){return this.addLast(e)},e.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},e.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},e.prototype.size=function(){return this._numNodes},e.prototype.getFromFirst=function(e){var t=0,i=this.start.next;if(e>=0)for(;t<e&&null!==i;)i=i.next,++t;else i=null;if(null===i)throw"Index out of bounds.";return i},e.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},e.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},e.prototype.removeFirst=function(){var e=null;return this._numNodes>0&&this.start.next&&(e=this.remove(this.start.next)),e},e.prototype.removeLast=function(){var e=null;return this._numNodes>0&&this.end.prev&&(e=this.remove(this.end.prev)),e},e.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},e.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},e.prototype.find=function(e){for(var t=this.start,i=!1,n=null;t.hasNext()&&!i;)e(t=t.next)&&(n=t,i=!0);return n},e.prototype.map=function(e){for(var t=this.start,i=[];t.hasNext();)e(t=t.next)&&i.push(t);return i},e.prototype.push=function(e){return this.addLast(e)},e.prototype.unshift=function(e){this._numNodes>0?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(){return this.removeFirst()},e}();t.LinkedList=v,t.ENUM_PUBLISH_STATE_UPDATE={start:0,error:1,retry:2},t.ENUM_PLAY_STATE_UPDATE={start:0,error:1,retry:2,stop:3},t.ENUM_RETRY_STATE={didNotStart:0,retrying:1,finished:2},t.REPORT_ACTION={eventStart:"eventStart",eventEndWithMsgInfo:"eventEndWithMsgInfo",addEventMsg:"addEventMsg",addEvent:"addEvent",eventEnd:"eventEnd",addMsgInfo:"addMsgInfo"},(_=t.QualityGrade||(t.QualityGrade={}))[_.Unknown=-1]="Unknown",_[_.Excellent=0]="Excellent",_[_.Good=1]="Good",_[_.Middle=2]="Middle",_[_.Poor=3]="Poor",_[_.Die=4]="Die",(m=t.QUALITY_CONSTANT||(t.QUALITY_CONSTANT={}))[m.MinQuality=0]="MinQuality",m[m.DieQuality=0]="DieQuality",m[m.PoorMinQuality=1]="PoorMinQuality",m[m.MiddleMinQuality=30]="MiddleMinQuality",m[m.GoodMinQuality=60]="GoodMinQuality",m[m.ExcellentMinQuality=85]="ExcellentMinQuality",m[m.MaxQuality=100]="MaxQuality";var E=i(4119);Object.defineProperty(t,"getSeq",{enumerable:!0,get:function(){return E.getSeq}}),Object.defineProperty(t,"getReportSeq",{enumerable:!0,get:function(){return E.getReportSeq}}),Object.defineProperty(t,"ZegoExpressWebRTMEngine",{enumerable:!0,get:function(){return E.ZegoExpressWebRTMEngine}}),Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return E.ZegoLogger}}),Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return E.ZegoDataReport}}),Object.defineProperty(t,"ZegoExpressWebRTM",{enumerable:!0,get:function(){return E.ZegoExpressWebRTM}})},2752:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},STREAMID_TOO_LONG:{code:1000014,message:"stream ID is too long"},STREAM_ID_NULL:{code:1000015,message:"streamID is empty"},STREAM_ID_INVALID_CHARACTER:{code:1000016,message:"stream ID contains illegal characters"},NETWORK_BROKEN:{code:1000017,message:"network is broken"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},INPUT_PARAM:{code:1100001,message:"input param error."},TIMEOUT:{code:1100002,message:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},INIT_SDK_WRONG:{code:1101e3,message:"init sdk wrong"},WX_GET_SETTING_FAIL:{code:1101001,message:"wx get setting fail"},USER_ID_NULL:{code:1002005,message:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,message:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,message:"user ID is too long"},USER_NAME_NULL:{code:1002008,message:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,message:"username is too long"},ROOM_ID_NULL:{code:1002011,message:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,message:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,message:"room ID is too long"},LOGIN_TIMEOUT:{code:1002031,message:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,message:"users logging into the room exceeds the maximum number"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,message:"kickout may be the same user ID login other"},ROOM_RETRY_TIMEOUT:{code:1002053,message:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,message:"server has sent a signal to kick out"},ROOM_INNER_ERROR:{code:1002099,message:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,message:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,message:"parse json error."},LOGIN_PROCESSING:{code:1102012,message:"login is processing."},LIVEROOM_REQUEST_ERROR:{code:1102013,message:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,message:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,message:"user login state is wrong."},TOKEN_ERROR:{code:1102016,message:"token error"},DISPATCH_ERROR:{code:1102017,message:"dispatch error"},TOKEN_EXPIRED:{code:1102018,message:"token expired"},SUBCMD_ERROR:{code:1102019,message:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,message:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},DISPATCH_TIMEOUT:{code:1102022,message:"dispatch request timeout"},CONNECT_FAILED:{code:1102023,message:"connect signal fail"},PUBLISHER_MEDIA_SERVER_FORBID:{code:1003025,message:"stream is forbided by media server"},PUBLISHER_EXTRA_INFO_TOO_LONG:{code:1003051,message:"stream extra info is too long"},PUBLISHER_PARAM:{code:1103001,message:"input param error"},PUBLISHER_BROWSER_NOT_SUPPORT:{code:1103002,message:"browser do not support"},PUBLISHER_DISPATCH_FAIL:{code:1103003,message:"dispatch request error"},PUBLISHER_SCREEN_FAILED:{code:1103010,message:"screen fail"},ENUMERATE_DEVICES_FAIL:{code:1103011,message:"enumerate devices fail"},PUBLISHER_DISPATCH_REQUEST_FAIL:{code:1103020,message:"dispatch request fail"},PUBLISHER_SESSION_REQUEST_FAIL:{code:1103021,message:"session request fail"},PUBLISHER_CREATE_OFFER_ERROR:{code:1103022,message:"create offer error"},PUBLISHER_SET_LOCAL_DESC_ERROR:{code:1103023,message:"setLocalDescription error"},PUBLISHER_MEDIA_DESC_ERROR:{code:1103024,message:"mediaDesc error"},PUBLISHER_SET_REMOTE_DESC_ERROR:{code:1103025,message:"other side offer error"},PUBLISHER_CANDIDATE_ERROR:{code:1103026,message:"candidate error"},PUBLISHER_SESSION_CLOSED:{code:1103027,message:"server session closed"},PUBLISHER_MEDIA_CONNECTION_ERROR:{code:1103028,message:"ice connection error"},PUBLISHER_SERVER_NEGO_TIMEOUT:{code:1103030,message:"negotiation timeout"},PUBLISH_DEVICE_OUT_ERR:{code:1103041,message:"device change "},PUBLISH_SCREEN_CANCELED:{code:1103042,message:"screen canceled"},PUBLISH_SCREEN_NOT_SUPPORT:{code:1103043,message:"screen not support"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},REPEATED_PULL:{code:1103049,message:"repeated pull same stream"},PUBLISHER_WEBSOCKET_DISCONNECTED:{code:1103050,message:"websocket disconnected"},PUBLISHER_RETRY_TIMEOUT:{code:1103051,message:"publisher retry timeout"},PUBLISHER_HTTPS_REQUIRED:{code:1103053,message:"https is required"},PUBLISHER_NO_PREVIEW:{code:1103054,message:"no preview"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISHER_IS_PUBLISHING:{code:1103056,message:"publish is publishing"},PUBLISHER_CLIENT_IP_CHANGED:{code:1103058,message:"client ip changed"},PUBLISHER_TTL_OVERTIME:{code:1103059,message:"ttl over time"},PUBLISHER_SESSION_TIMEOUT:{code:1103060,message:"session request timeout"},PUBLISHER_GET_USER_MEDIA_FAIL:{code:1103061,message:"get media fail"},PUBLISHER_DEVICE_NO_ALLOWED:{code:1103064,message:"get device not allowed"},PUBLISHER_DEVICE_NO_READABLE:{code:1103065,message:"device is not readable"},PUBLISHER_OVER_CONSTRAINED:{code:1103066,message:"device does not meet constraints"},PUBLISHER_UPDATE_SDP_TIMEOUT:{code:1103067,message:"update sdp time out"},PUBLISHER_UPDATE_SDP_FAIL:{code:1103068,message:"update sdp fail"},PLAYER_PARAM:{code:1104001,message:"input parm error"},PLAYER_DISPATCH_REQUEST_FAIL:{code:1104020,message:"dispatch request fail"},PLAYER_SESSION_REQUEST_FAIL:{code:1104021,message:"session request fail"},PLAYER_CREATE_OFFER_ERROR:{code:1104022,message:"create offer error"},PLAYER_SET_LOCAL_DESC_ERROR:{code:1104023,message:"setLocalDescription error"},PLAYER_MEDIA_DESC_ERROR:{code:1104024,message:"mediaDesc error"},PLAYER_SET_REMOTE_DESC_ERROR:{code:1104025,message:"other side offer error"},PLAYER_CANDIDATE_ERROR:{code:1104026,message:"candidate error"},PLAYER_SESSION_CLOSED:{code:1104027,message:"server session closed"},PLAYER_MEDIA_CONNECTION_ERROR:{code:1104028,message:"ice connection error"},PLAYER_WEBSOCKET_DISCONNECTED:{code:1104029,message:"websocket disconnected"},PLAYER_SERVER_NEGO_TIMEOUT:{code:1104030,message:"negotiation timeout"},PLAYER_RETRY_TIMEOUT:{code:1104031,message:"player retry timeout"},PLAYER_IS_PLAYING:{code:1104032,message:"player is playing"},PLAYER_CLIENT_IP_CHANGED:{code:1104033,message:"client ip changed"},PLAYER_TTL_OVERTIME:{code:1104034,message:"ttl is over time"},PLAYER_SESSION_RESET:{code:1104035,message:"reset session push"},PLAYER_SESSION_TIMEOUT:{code:1104036,message:"session request timeout"},PLAYER_PROBE_TIMEOUT:{code:1104037,message:"probe time out"},PLAYER_UNSUPPORTED_PROTOCOL:{code:1104038,message:"resource mode is not supported"},DEVICE_ERROR_TYPE_UNPLUGGED:{code:1006006,message:"the device is unplugged"},IM_CONTENT_NULL:{code:1009001,message:"message content is empty"},IM_CONTENT_TOO_LONG:{code:1009002,message:"message content is too long"},IM_SEND_FAILED:{code:1009010,message:"failed to send message"},FREQ_LIMITED:{code:1109001,message:"frequency limited."}}},3529:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWechatLogEvent=t.ZegoRTCLogEvent=void 0;var n=i(2752),r=function(e){return e};t.ZegoRTCLogEvent={kZegoTaskCreateStream:{event:"/sdk/create_stream",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kParamError:n.errorCodeList.PUBLISHER_PARAM,kScreenCancelError:n.errorCodeList.PUBLISH_SCREEN_CANCELED,kScreenFailedError:n.errorCodeList.PUBLISHER_SCREEN_FAILED,kScreenNotSupportError:n.errorCodeList.PUBLISH_SCREEN_NOT_SUPPORT,kHttpsRequiredError:n.errorCodeList.PUBLISHER_HTTPS_REQUIRED,kGetUserMediaError:n.errorCodeList.PUBLISHER_GET_USER_MEDIA_FAIL,kDeviceNoAllowedError:n.errorCodeList.PUBLISHER_DEVICE_NO_ALLOWED,kDeviceNoReadableError:n.errorCodeList.PUBLISHER_DEVICE_NO_READABLE,kDeviceOverConstrainedError:n.errorCodeList.PUBLISHER_OVER_CONSTRAINED},stream_type:r,screen:r,camera:r,custom:r},kZegoTaskPublishStart:{event:"/sdk/api/publish_request",error:{kPublishParamError:n.errorCodeList.PUBLISHER_PARAM,kPublishNetworkTimeoutError:n.errorCodeList.TIMEOUT,kPublishDispatchTimeoutError:n.errorCodeList.DISPATCH_TIMEOUT,kPublishDispatchError:n.errorCodeList.DISPATCH_ERROR,kPublishNetworkBrokenError:n.errorCodeList.NETWORK_BROKEN,kPublishNoPreviewError:n.errorCodeList.PUBLISH_NO_PREVIEW,kPublishNoLoginError:n.errorCodeList.NOT_LOGIN,kPublishRetryTimeoutError:n.errorCodeList.PUBLISHER_RETRY_TIMEOUT,kMediaServerForbidError:n.errorCodeList.PUBLISHER_MEDIA_SERVER_FORBID,kPublishTokenExpiredError:n.errorCodeList.TOKEN_EXPIRED,kPublishSessionClosedError:n.errorCodeList.PUBLISHER_SESSION_CLOSED,kPublishNegoTimeoutError:n.errorCodeList.PUBLISHER_SERVER_NEGO_TIMEOUT,kCreateOfferError:n.errorCodeList.PUBLISHER_CREATE_OFFER_ERROR,kSetLocalDescError:n.errorCodeList.PUBLISHER_SET_LOCAL_DESC_ERROR,kSessionTimeoutError:n.errorCodeList.PUBLISHER_SESSION_TIMEOUT,kSessionRequestError:n.errorCodeList.PUBLISHER_SESSION_REQUEST_FAIL,kSetRemoteDescError:n.errorCodeList.PUBLISHER_SET_REMOTE_DESC_ERROR,kMediaConnectionError:n.errorCodeList.PUBLISHER_MEDIA_CONNECTION_ERROR,kWebsocketDisconnectedError:n.errorCodeList.PUBLISHER_WEBSOCKET_DISCONNECTED,kMediaDescError:n.errorCodeList.PUBLISHER_MEDIA_DESC_ERROR,kCandidateError:n.errorCodeList.PUBLISHER_CANDIDATE_ERROR,kIsPublishing:n.errorCodeList.PUBLISHER_IS_PUBLISHING,kClientIPChangedError:n.errorCodeList.PUBLISHER_CLIENT_IP_CHANGED,kTTLOverTimeError:n.errorCodeList.PUBLISHER_TTL_OVERTIME,kUpdateMediaDescriptionTimeOut:n.errorCodeList.PUBLISHER_UPDATE_SDP_TIMEOUT,kUpdateMediaDescriptionError:n.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL},publishOption:r,message:r,session_id:r,stream:r,video_en_codec_id:r,cap_w:r,cap_h:r,w:r,h:r,video_en_fps:r,video_en_bps:r,audio_c_channel_count:r,audio_en_bps:r,aec_level:r,ans_level:r,agc:r,traffic_control_min_video_bitrate:r},kZegoTaskVideoCaptureSize:{event:"/sdk/api/publish_video_c_size",session_id:r,w:r,h:r},kZegoTaskVideoPlaySize:{event:"/sdk/play_video_size_changed",session_id:r,w:r,h:r},kZegoTaskRePublish:{event:"/sdk/republish",stream:r},kZegoTaskPublishStop:{event:"/sdk/stop_publish",error:{kParamError:n.errorCodeList.PUBLISHER_PARAM},stream:r},kZegoTaskPlayStart:{event:"/sdk/api/play_request",error:{kStreamIDNullError:n.errorCodeList.STREAM_ID_NULL,kPlayParamError:n.errorCodeList.PLAYER_PARAM,kPlayStreamIDToLongError:n.errorCodeList.STREAMID_TOO_LONG,kPlayStreamIDInvalidCharacterError:n.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPlayNoLoginError:n.errorCodeList.NOT_LOGIN,kPlayRepeatedPullError:n.errorCodeList.REPEATED_PULL,kPlayNetworkTimeoutError:n.errorCodeList.TIMEOUT,kPlayDispatchTimeoutError:n.errorCodeList.DISPATCH_TIMEOUT,kPlayDispatchError:n.errorCodeList.DISPATCH_ERROR,kPlayNetworkBrokenError:n.errorCodeList.NETWORK_BROKEN,kPlayUnsupportedResourceMode:n.errorCodeList.PLAYER_UNSUPPORTED_PROTOCOL,kPlayRetryTimeoutError:n.errorCodeList.PLAYER_RETRY_TIMEOUT,kPlaySessionClosedError:n.errorCodeList.PLAYER_SESSION_CLOSED,kPlaySessionResetError:n.errorCodeList.PLAYER_SESSION_RESET,kPlayNegoTimeoutError:n.errorCodeList.PLAYER_SERVER_NEGO_TIMEOUT,kCreateOfferError:n.errorCodeList.PLAYER_CREATE_OFFER_ERROR,kSetLocalDescError:n.errorCodeList.PLAYER_SET_LOCAL_DESC_ERROR,kSessionRequestError:n.errorCodeList.PLAYER_SESSION_REQUEST_FAIL,kSessionTimeoutError:n.errorCodeList.PLAYER_SESSION_TIMEOUT,kSetRemoteDescError:n.errorCodeList.PLAYER_SET_REMOTE_DESC_ERROR,kMediaConnectionError:n.errorCodeList.PLAYER_MEDIA_CONNECTION_ERROR,kWebsocketDisconnectedError:n.errorCodeList.PLAYER_WEBSOCKET_DISCONNECTED,kCandidateError:n.errorCodeList.PLAYER_CANDIDATE_ERROR,kMediaDescError:n.errorCodeList.PLAYER_MEDIA_DESC_ERROR,kIsPlaying:n.errorCodeList.PLAYER_IS_PLAYING,kClientIPChangedError:n.errorCodeList.PLAYER_CLIENT_IP_CHANGED,kTTLOverTimeError:n.errorCodeList.PLAYER_TTL_OVERTIME,kProbeTimeOutError:n.errorCodeList.PLAYER_PROBE_TIMEOUT},playOption:r,message:r,session_id:r,stream:r,audio_activate:r,video_activate:r},kZegoTaskRePlay:{event:"/sdk/replay",stream:r},kZegoTaskPlayStop:{event:"/sdk/stop_play",error:{kParamError:n.errorCodeList.PUBLISHER_PARAM},stream:r},kZegoTaskEnumDevices:{event:"/device/list",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:n.errorCodeList.ENUMERATE_DEVICES_FAIL},dev_list:r},kZegoTaskAudioOutput:{event:"/device/audio_capture",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:n.errorCodeList.ENUMERATE_DEVICES_FAIL},session_id:r,device:r},kZegoTaskVideoCapture:{event:"/device/video_capture",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:n.errorCodeList.ENUMERATE_DEVICES_FAIL},session_id:r,device:r},kZegoTaskDeviceInterrupt:{event:"/device/interrupt",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:n.errorCodeList.ENUMERATE_DEVICES_FAIL},session_id:r,interrupt:r},kZegoTaskSetDebug:"/sdk/set_debug",kZegoTaskSetLog:"/sdk/set_log_config",kZegoTaskCheckSystemRequirements:{event:"/sdk/check_system",capability:r},kZegoTaskRemoteCameraUpdate:{event:"/sdk/remote_camera_update",stream:r,status:r},kZegoTaskRemoteMicUpdate:{event:"/sdk/remote_mic_update",stream:r,status:r},kZegoTaskDestroyStream:{event:"/sdk/destroy_stream",error:{kLocalStreamError:n.errorCodeList.LOCALSTREAM_WRONG}},kZegoTaskScreenSharingEnded:"/sdk/screen_share_end",kZegoTaskAudioOutputChanged:{event:"/device/api/audio_output",session_id:r,stream:r,device:r,reason:r},kZegoEventPublishStat:"/sdk/publish_stat_report",kZegoEventPlayStat:"/sdk/play_stat_report",kZegoTaskLiveRoomGetStreamUpdateInfo:{event:"/liveroom/get_stream_update_info",stream_update_type:r,update_stream:r},kZegoTaskLiveRoomGetStreamExtraInfo:{event:"/liveroom/get_stream_extra_info",update_stream:r},kZegoTaskPlayDecodeFirstVideoFrame:{event:"/sdk/play_decode_first_video_frame",session_id:r,fft_consumed:r},kZegoVisibilityChange:{event:"/app/background"},kZegoSetCaptureVolume:{event:"/sdk/set_capture_volume",error:{kParamError:n.errorCodeList.INPUT_PARAM}},kZegoListener:{event:"/sdk/listener"},kZegoNetProbe:{event:"/sdk/net_probe"},kZegoNetProbeResult:{event:"/sdk/net_probe_result"},kZegoTaskCloudSettingCache:{event:"/cloud_setting/cache"},kZegoTaskCloudSettingRefresh:{event:"/cloud_setting/refresh"}},t.ZegoWechatLogEvent={kZegoTaskCheckSystemRequirements:{event:"/sdk/check_system",error:{kCheckSystemGetSettingFailError:n.errorCodeList.WX_GET_SETTING_FAIL},capability:r},kZegoTaskPublishStart:{event:"/sdk/api/publish_request",error:{kPublishStreamIDNullError:n.errorCodeList.STREAM_ID_NULL,kPublishParamError:n.errorCodeList.PUBLISHER_PARAM,kPublishStreamIDTooLongError:n.errorCodeList.STREAMID_TOO_LONG,kPublishStreamIDInvalidCharacterError:n.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPublishNetworkTimeoutError:n.errorCodeList.TIMEOUT,kPublishDispatchTimeoutError:n.errorCodeList.DISPATCH_TIMEOUT,kPublishDispatchError:n.errorCodeList.DISPATCH_ERROR,kPublishNetworkBrokenError:n.errorCodeList.NETWORK_BROKEN,kPublishNoLoginError:n.errorCodeList.NOT_LOGIN,kPublishRetryTimeoutError:n.errorCodeList.PUBLISHER_RETRY_TIMEOUT,kIsPublishing:n.errorCodeList.PUBLISHER_IS_PUBLISHING},publishOption:r,stream:r,message:r},kZegoTaskPlayStart:{event:"/sdk/api/play_request",error:{kPlayStreamIDNullError:n.errorCodeList.STREAM_ID_NULL,kPlayParamError:n.errorCodeList.PLAYER_PARAM,kPlayStreamIDTooLongError:n.errorCodeList.STREAMID_TOO_LONG,kPlayStreamIDInvalidCharacterError:n.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPlayNoLoginError:n.errorCodeList.NOT_LOGIN,kPlayRepeatedPullError:n.errorCodeList.REPEATED_PULL,kPlayNetworkTimeoutError:n.errorCodeList.TIMEOUT,kPlayDispatchTimeoutError:n.errorCodeList.DISPATCH_TIMEOUT,kPlayDispatchError:n.errorCodeList.DISPATCH_ERROR,kPlayNetworkBrokenError:n.errorCodeList.NETWORK_BROKEN,kPlayRetryTimeoutError:n.errorCodeList.PLAYER_RETRY_TIMEOUT,kIsPlaying:n.errorCodeList.PLAYER_IS_PLAYING},playOption:r,message:r,session_id:r,stream:r,audio_activate:r,video_activate:r},kZegoEventPublishStat:"/sdk/publish_stat_report",kZegoEventPlayStat:"/sdk/play_stat_report",kZegoTaskRePublish:"/sdk/republish",kZegoTaskRePlay:"/sdk/replay",kZegoTaskPublishStop:{event:"/sdk/stop_publish",error:{kParamError:n.errorCodeList.PUBLISHER_PARAM},stream:r},kZegoTaskPlayStop:{event:"/sdk/stop_play",error:{kParamError:n.errorCodeList.PUBLISHER_PARAM},stream:r},kZegoTaskLiveRoomGetStreamUpdateInfo:{event:"/liveroom/get_stream_update_info",stream_update_type:r,update_stream:r},kZegoTaskLiveRoomGetStreamExtraInfo:{event:"/liveroom/get_stream_extra_info",update_stream:r}}},2367:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_WEBRTC_ACTION=void 0,(i=t.ZEGO_WEBRTC_ACTION||(t.ZEGO_WEBRTC_ACTION={})).SET_VIDEO_CONFIG="zc.svc",i.SET_AUDIO_CONFIG="zc.sac",i.REPLACE_TRACK="zc.rp",i.SET_BEAUTY_EFFECT="zc.sbe",i.ENABLE_STREAM="zc.es",i.ENABLE_MIC_ONLY="zc.emo",i.ACTIVATE_SEI_INSERT="zc.asi",i.MUTE_PUBLISH_STREAM_VIDEO="zc.mpsv.0",i.MUTE_PUBLISH_STREAM_AUDIO="zc.mpsa.0",i.MUTE_MIC="zc.mm",i.MUTE_PLAY_STREAM_VIDEO="zc.mpsv.1",i.MUTE_PLAY_STREAM_AUDIO="zc.mpsa.1",i.ADD_TRACK="zc.at",i.REMOVE_TRACK="zc.rt",i.HANDLE_TRACK="zc.ht"},4495:function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.AdvancedModule=void 0;var s=i(2367),a=i(5098),c=i(8706),l=function(){function e(e,t,i,n){this.logger=e,this.dataReport=t,this.streamCenter=i,this.stateCenter=n,this.screenShotReady=!1}return e.prototype.setVideoConfig=function(e,t){var i=this;return this.logger.info(s.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" call"),new Promise((function(n,r){var o=i.stateCenter.getReportSeq();return i.dataReport.newReport(o,c.ZegoRTCLogEvent.kZegoSetVideoConfig.event),e instanceof MediaStream?t&&"object"==typeof t&&0!=Object.keys(t).length?t.width&&!i.stateCenter.checkValidNumber(t.width)?(i.logger.error(s.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints width integer number, range[1, 10000]"),i.dataReport.addMsgInfo(o,{error:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.code,message:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.message+" constraints width integer number, range[1, 10000]"}),i.dataReport.uploadReport(o),void r({errorCode:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.message+" constraints wrong"})):t.height&&!i.stateCenter.checkValidNumber(t.height)?(i.logger.error(s.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints height integer number, range[1, 10000]"),i.dataReport.addMsgInfo(o,{error:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.code,message:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.message+" constraints height integer number, range[1, 10000]"}),i.dataReport.uploadReport(o),void r({errorCode:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.message+" constraints wrong"})):void i.setPublishStreamConstraints(e,t,(function(e){i.dataReport.uploadReport(o),n(e)})):(i.logger.error(s.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints wrong"),i.dataReport.addMsgInfo(o,c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError),i.dataReport.uploadReport(o),void r({errorCode:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.message+" constraints wrong"})):(i.logger.error(s.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" localStream not found"),i.dataReport.addMsgInfo(o,c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kLocalStreamError),i.dataReport.uploadReport(o),void r({errorCode:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.message+" localStream no found"}))}))},e.prototype.setAudioConfig=function(e,t){var i=this;return this.logger.info(s.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" call"),new Promise((function(n){var r=i.stateCenter.getReportSeq();return i.dataReport.newReport(r,c.ZegoRTCLogEvent.kZegoSetAudioConfig.event),e instanceof MediaStream?!t||"object"!=typeof t||0==Object.keys(t).length||void 0!==t.AEC&&"boolean"!=typeof t.AEC||void 0!==t.AGC&&"boolean"!=typeof t.AGC||void 0!==t.ANS&&"boolean"!=typeof t.ANS?(i.logger.error(s.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" constraints wrong"),i.dataReport.addMsgInfo(r,c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError),i.dataReport.uploadReport(r),void n({errorCode:c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.message+" constraints wrong"})):void i.setPublishStreamConstraints(e,t,(function(e){i.dataReport.uploadReport(r),n(e)})):(i.logger.error(s.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" localStream not found"),i.dataReport.addMsgInfo(r,c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError),i.dataReport.uploadReport(r),void n({errorCode:c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.message+" localStream no found"}))}))},e.prototype.enableStream=function(e,t){if(this.logger.info(s.ZEGO_WEBRTC_ACTION.ENABLE_STREAM+" call"),"boolean"!=typeof t.video&&"boolean"!=typeof t.audio)return this.logger.error(s.ZEGO_WEBRTC_ACTION.ENABLE_STREAM+" option error"),!1;var i=!0,n=!0;return"boolean"==typeof t.video&&(i=this.enableCamera(e,t.video,t.retain)),"boolean"==typeof t.audio&&(n=this.enableMicrophone(e,t.audio)),i&&n},e.prototype.enableMicrophoneOnly=function(e){if(this.logger.info(s.ZEGO_WEBRTC_ACTION.ENABLE_MIC_ONLY+" call"),"boolean"!=typeof e)return!1;for(var t=0;t<this.streamCenter.previewStreamList.length;t++)if(!this.streamCenter.previewStreamList[t].enableMicrophoneOnly(e,this.streamCenter))return this.logger.error("zsc.emo.0 previewer "+t+" change mic mute state failed"),!1;return this.streamCenter.isMicEnabled=e,!0},e.prototype.replaceTrack=function(e,t){return r(this,void 0,void 0,(function(){var i,n;return o(this,(function(r){return i=this.stateCenter.getReportSeq(),this.dataReport.newReport(i,c.ZegoRTCLogEvent.kZegoReplaceTrack.event),e instanceof MediaStream?t&&t instanceof MediaStreamTrack?(n=this._replaceTrack(e,t),this.dataReport.uploadReport(i),[2,n]):(this.logger.error(s.ZEGO_WEBRTC_ACTION.REPLACE_TRACK+" mediastream track no found"),this.dataReport.uploadReport(i,void 0,c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError),[2,{errorCode:c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError.message+" mediastream track no found"}]):(this.logger.error(s.ZEGO_WEBRTC_ACTION.REPLACE_TRACK+" localStream not found"),this.dataReport.uploadReport(i,void 0,c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError),[2,{errorCode:c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError.message+" localStream no found"}])}))}))},e.prototype.setPublishStreamConstraints=function(e,t,i){var n=this,r=null;for(var o in this.logger.info("zsc.spsc.0 constraints",JSON.stringify(t)),this.streamCenter.publisherList)this.streamCenter.publisherList[o].localStream==e&&(r=this.streamCenter.publisherList[o]);if(!r)return this.logger.error("zsc.spsc.0 publisher not found"),void(i&&i({errorCode:a.errorCodeList.PUBLISH_NOT_PUBLISH.code,extendedData:a.errorCodeList.PUBLISH_NOT_PUBLISH.message}));this.logger.info("zsc.spsc.0 streamId ",r.streamID);var s=null==r?void 0:r.publisher.previewer;if(!s)return this.logger.error("zsc.spsc.0 preview no found"),void(i&&i({errorCode:a.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:a.errorCodeList.PUBLISH_NO_PREVIEW.message}));var c=!1,l=!1;(t.width||t.height||t.frameRate)&&(s.mediaStreamConfig.videoQuality=4,c=!0),void 0===t.ANS&&void 0===t.AGC&&void 0===t.AEC||(l=!0);var u=s.localStream,d=s.videoTrack,h=s.audioTrack;c&&!d?(this.logger.error("zsc.spsc.0 video track not found"),i&&i({errorCode:a.errorCodeList.TRACK_NOT_FOUND.code,extendedData:a.errorCodeList.TRACK_NOT_FOUND.message})):t.video=!0,l&&!h?(this.logger.error("zsc.spsc.0 audio track not found"),i&&i({errorCode:a.errorCodeList.TRACK_NOT_FOUND.code,extendedData:a.errorCodeList.TRACK_NOT_FOUND.message})):t.audio=!0;var p=JSON.parse(JSON.stringify(s.mediaStreamConfig)),f=Object.assign(s.mediaStreamConfig,t),g=s.getMediaStreamConstraints(f,!0);this.logger.info("zsc.spsc.0 applyConstraints ",JSON.stringify(g));var m=[];if(c&&m.push(d.applyConstraints(g.video)),l&&(h.stop(),m.push(navigator.mediaDevices.getUserMedia({video:!1,audio:g.audio}))),t.maxBitrate){var _=r.publisher.peerConnection.getSenders().find((function(e){return e.track&&"video"===e.track.kind})),v=_.getParameters();_?(v.encodings||(v.encodings=[{}]),v.encodings[0].maxBitrate=1e3*t.maxBitrate,m.push(_.setParameters(v))):this.logger.error("zsc.spsc.0 video sender no found")}if(m.length>0)Promise.all(m).then((function(e){if(n.logger.info("zsc.spsc.0 set constraints success",e[1]),l){var o=(c?e[1]:e[0]).getAudioTracks()[0];o.enabled=0===r.publisher.mic_status;var s=r.publisher.peerConnection.getSenders().find((function(e){return"audio"===e.track.kind}));if(s&&(s.replaceTrack(o),u)){var a=n.streamCenter.checkPreview(u);a&&(a.replacePreviewTrack(o),a.gainNode=null)}}t.maxBitrate&&r.publisher&&(r.publisher.videoInfo.bitRate=t.maxBitrate),i&&i({errorCode:0,extendedData:""})})).catch((function(e){n.logger.error("zsc.spsc.0 fail reason ",e.name,JSON.stringify(e)),i&&i({errorCode:a.errorCodeList.PUBLISHER_CONSTRAINTS_ERROR.code,extendedData:e.name+" "+(e.constraint?"constraint:"+e.constraint:"")})}));else{if(this.logger.warn("zsc.spsc.0 constaints is no changes"),l){var E=s.getMediaStreamConstraints(p);this.logger.info("zsc.spsc.0 oldMediaStreamConstraints ",JSON.stringify(E)),navigator.mediaDevices.getUserMedia({video:!1,audio:E.audio}).then((function(e){var t=e.getAudioTracks()[0],i=(s.audioTrack,r.publisher.peerConnection.getSenders().find((function(e){return null!==e.track&&e.track.kind===h.kind})));if(i){i.replaceTrack(t);var o=n.streamCenter.checkPreview(u);o&&o.replacePreviewTrack(t)}n.logger.info("zsc.spsc.0.1 setbackup suc ")})).catch((function(e){n.logger.error("zsc.spsc.0.1 setbackup fail "+e.name)}))}i&&i({errorCode:a.errorCodeList.PUBLISHER_CONSTRAINTS_ERROR.code,extendedData:"constraints is no changes"})}},e.prototype.useVideoDevice=function(e,t){var i=this;return this.logger.info("zc.uvd.0 call"),new Promise((function(n){var r=i.stateCenter.getReportSeq();if(i.dataReport.newReport(r,c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.event),i.dataReport.addMsgInfo(r,{device:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.device(t)}),!(e instanceof MediaStream))return i.logger.error("zc.uvd.0 localStream not found"),i.dataReport.addMsgInfo(r,c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kLocalStreamError),i.dataReport.uploadReport(r),void n({errorCode:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.message});if("string"!=typeof t)return i.logger.error("zc.uvd.0 deviceID must be string"),i.dataReport.addMsgInfo(r,{error:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.code,message:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.message+" deviceID must be string"}),i.dataReport.uploadReport(r),void n({errorCode:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.message});var o=function(t){var o,s;i.dataReport.uploadReport(r);var a=i.streamCenter.checkPublish(e);a&&(a.cameraLabel=(null===(s=null===(o=a.publisher.previewer)||void 0===o?void 0:o.videoTrack)||void 0===s?void 0:s.label)||a.cameraLabel),n(t)};i.stateCenter.getDevices((function(r){if(!r.cameras.find((function(e){return e.deviceID==t})))return i.logger.error("zc.uvd.0 device is not found"),void n({errorCode:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kDevicesNoFoundError.code,extendedData:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kDevicesNoFoundError.message});i.switchDevice("video",e,t,o)}),(function(n){i.logger.warn("zc.uvd.0 getDevices err:",n),i.switchDevice("video",e,t,o)}))}))},e.prototype.useAudioDevice=function(e,t){var i=this;return this.logger.info("zc.uad.1 call"),new Promise((function(n){var r=i.stateCenter.getReportSeq();i.dataReport.newReport(r,c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.event),i.dataReport.addMsgInfo(r,{device:c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.device(t)});var o=function(e,t){i.logger.error("zc.uad.1 "+t);var o=e;o.message=o.message+(t?" "+t:""),i.dataReport.addMsgInfo(r,o),i.dataReport.uploadReport(r),n({errorCode:o.code,extendedData:o.message})},s=function(t){var o;i.dataReport.uploadReport(r);var s=i.streamCenter.checkPublish(e);s&&(s.microLabel=(null===(o=e.getAudioTracks()[0])||void 0===o?void 0:o.label)||s.microLabel),n(t)};e instanceof MediaStream?"string"==typeof t?i.stateCenter.getDevices((function(r){if(!r.microphones.find((function(e){return e.deviceID==t})))return i.logger.error("zc.uad.1 device is not found"),void n({errorCode:c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kDevicesNoFoundError.code,extendedData:c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kDevicesNoFoundError.message});i.switchDevice("audio",e,t,s)}),(function(n){i.logger.warn("zc.uad.1 getDevices err:",n),i.switchDevice("audio",e,t,s)})):o(c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kParamError,"deviceID must be string"):o(c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kLocalStreamError,"localStream not found")}))},e.prototype.publishTarget=function(e){var t=this,i=this.stateCenter.getReportSeq();switch(e.type){case"addpush":this.dataReport.newReport(i,c.ZegoRTCLogEvent.kZegoTaskAddPublishCdnUrl.event);break;case"delpush":case"clearpush":this.dataReport.newReport(i,c.ZegoRTCLogEvent.kZegoTaskRemovePublishCdnUrl.event)}return this.dataReport.addMsgInfo(i,{stream:c.ZegoRTCLogEvent.kZegoTaskRemovePublishCdnUrl.stream(e.streamID),target_url:c.ZegoRTCLogEvent.kZegoTaskRemovePublishCdnUrl.target_url(e.pushUrl)}),new Promise((function(n,r){var o=function(e,n){t.logger.error("zb.pt"+(n||e.message)),t.dataReport.addMsgInfo(i,{error:e.code,message:e.message+(n||"")}),t.dataReport.uploadReport(i),r({errorCode:e.code,extendedData:e.message+(n?" "+n:"")})};if(-1==["addpush","delpush","clearpush"].indexOf(e.type))return t.logger.error("zb.sh.pt cdn push type error"),void o(a.errorCodeList.PUBLISHER_CDN_PUSH_ERROR,"type error");if(e.streamID&&"string"==typeof e.streamID)if(e.pushUrl&&"string"==typeof e.pushUrl)if(t.stateCenter.publishStreamList[e.streamID]){var s=t.streamCenter.getRoomByStreamID(e.streamID);s?s.streamHandler._publishTarget(e,(function(e){t.dataReport.uploadReport(i),n(e)}),o):o(c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kNoLoginError)}else o(c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kPublishStreamNoFoundError);else o(c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kParamError,"push url error");else o(c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kParamError,"stream id type error")}))},e.prototype.handleTrack=function(e,t,i,n,c){var l;return r(this,void 0,void 0,(function(){var u,d,h,p,f,g,m,_,v,E,A=this;return o(this,(function(y){switch(y.label){case 0:return t instanceof MediaStream?i instanceof MediaStreamTrack&&"audio"!=i.kind?(u=this.streamCenter.checkPreview(t))?"video"===i.kind&&(null===(l=u.videoEffect)||void 0===l?void 0:l.enabled)?(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" need to disable video beauty effect first"),c&&c({errorCode:a.errorCodeList.VIDEO_EFFECT_IS_RUNNING.code,extendedData:"need to disable video beauty effect before add or remove track"}),[2]):"ADD"==e&&(t.getTracks().length>=2||t.getTracks().find((function(e){return e.kind==i.kind})))?(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" only stream which have one track and kind no exist can add track"),c&&c({errorCode:a.errorCodeList.TRACK_CAN_NOT_ADD.code,extendedData:a.errorCodeList.TRACK_CAN_NOT_ADD.message}),[2]):"REMOVE"!=e||1!=t.getTracks().length&&t.getTracks().includes(i)?!(d=this.streamCenter.checkPublish(t))||5===d.publisher.stateNego&&1!=d.publisher.isUpdateSDP?d?(h=d.publisher,p=u,f=d.publisher.peerConnection,h.isUpdateSDP=!0,"ADD"!=e?[3,1]:(f.addTrack(i,t),[3,4])):[3,6]:(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" publish state wrong"),c&&c({errorCode:a.errorCodeList.PUBLISHER_STATE_WRONG.code,extendedData:a.errorCodeList.PUBLISHER_STATE_WRONG.message}),[2]):(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" not supported"),c({errorCode:a.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code,extendedData:a.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message}),[2]):(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" stream no found"),c&&c({errorCode:a.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:a.errorCodeList.PUBLISH_NO_PREVIEW.message}),[2]):(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" only can handle video track"),c({errorCode:a.errorCodeList.INPUT_PARAM.code,extendedData:a.errorCodeList.INPUT_PARAM.message}),[2]):(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" stream wrong"),c({errorCode:a.errorCodeList.INPUT_PARAM.code,extendedData:a.errorCodeList.INPUT_PARAM.message}),[2]);case 1:return window.RTCPeerConnection&&window.RTCPeerConnection.prototype.getTransceivers&&window.RTCRtpTransceiver.prototype.stop?[4,f.getSenders().find((function(e){return e.track&&e.track==i}))]:(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" not supported getTransceivers"),c({errorCode:a.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code,extendedData:a.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message}),[2]);case 2:return g=y.sent(),[4,f.getTransceivers().find((function(e){return e.sender==g}))];case 3:if(m=y.sent(),!(g&&m&&m.stop))return this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" sender no found"),c&&c({errorCode:a.errorCodeList.TRACK_NOT_FOUND.code,extendedData:a.errorCodeList.TRACK_NOT_FOUND.message}),[2];try{f.removeTrack(g),m.stop()}catch(e){this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" "+e),e&&e({errorCode:a.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.code,extendedData:a.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.message+" "+e})}y.label=4;case 4:return _={},v=this.streamCenter.previewStreamList.find((function(e){return e.localStream.getTracks().find((function(e){return e==i}))})),_=v&&"ADD"==e?v.videoInfo:{},[4,f.createOffer()];case 5:return E=y.sent(),h.onCreateOfferSuccess(E,!0,_,(function(s){return r(A,void 0,void 0,(function(){var r;return o(this,(function(o){return 0!==s?c&&c({errorCode:a.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.code,extendedData:a.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.message}):(r="video"==i.kind?"videoTrack":"audioTrack","ADD"==e?(t.addTrack(i),p[r]=i,"video"==i.kind&&1==i.enabled?h.sendStreamStatus(0,h.mic_status):1==i.enabled&&h.sendStreamStatus(h.camera_status,0)):("video"==i.kind?h.sendStreamStatus(2,h.mic_status):h.sendStreamStatus(h.camera_status,2),t.removeTrack(i),p[r]=null),u.mediaStreamConfig.video="ADD"==e,n({errorCode:0,extendedData:""})),[2]}))}))})),[3,7];case 6:"ADD"==e?t.addTrack(i):t.removeTrack(i),n({errorCode:0,extendedData:""}),u.mediaStreamConfig.video="ADD"==e,y.label=7;case 7:return[2]}}))}))},e.prototype.switchDevice=function(e,t,i,r){var o=this,s=this.streamCenter.checkPublish(t);if(s&&s.publisher&&5!==s.publisher.stateNego)return this.logger.error("zsc.sd.0 stream is publishing"),void(r&&r({errorCode:a.errorCodeList.PUBLISHER_STREAM_NO_FOUND.code,extendedData:a.errorCodeList.PUBLISHER_STREAM_NO_FOUND.message}));var c=this.streamCenter.checkPreview(t);if(!c)return this.logger.error("zsc.sd.0 preview no found"),void(r&&r({errorCode:a.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:a.errorCodeList.PUBLISH_NO_PREVIEW.message}));if("video"===e&&0==c.mediaStreamConfig.video)return this.logger.error("zsc.sd.0 camera can not be changed when video is false"),void(r&&r({errorCode:a.errorCodeList.VIDEO_DEVICE_FALSE.code,extendedData:a.errorCodeList.VIDEO_DEVICE_FALSE.message}));if("audio"===e&&0==c.mediaStreamConfig.audio)return this.logger.error("zsc.sd.0 microphone can not be changed when audio is false"),void(r&&r({errorCode:a.errorCodeList.AUDIO_DEVICE_FALSE.code,extendedData:a.errorCodeList.AUDIO_DEVICE_FALSE.message}));c.mediaStreamConfig.videoInput!==i&&delete c.mediaStreamConfig.facingMode;var l,u={};"video"===e?(u.videoInput=i,l=c.videoTrack):(u.audioInput=i,l=c.audioTrack);var d=this.stateCenter.browser;this.logger.info("zsc.sd.0 browser "+d),"firefox"===d&&l.stop();var h=n(n({},c.mediaStreamConfig),u),p=c.getMediaStreamConstraints(h),f=function(t,i){i.getTracks().forEach((function(t){if(t.kind===e){var i=c["video"===e?"videoTrack":"audioTrack"];t.enabled=i.enabled,i&&i.stop(),s?s.publisher.replacePublishedTrack(t):c&&c.replacePreviewTrack(t)}})),c.restartSoundLevel()};"audio"==e?p.video=!1:p.audio=!1,navigator.mediaDevices.getUserMedia(p).then((function(t){Object.assign(c.mediaStreamConfig,u),f(0,t),o.logger.info("zsc.sd.0 swtich "+e+" device success"),r&&r({errorCode:0,extendedData:""})}),(function(t){var i,n;"video"==e?null===(i=c.videoTrack)||void 0===i||i.stop():null===(n=c.audioTrack)||void 0===n||n.stop(),o.logger.warn("zsc.sd.0 swtich "+e+" device failed, stop last device and retry. ",t+""),navigator.mediaDevices.getUserMedia(p).then((function(t){Object.assign(c.mediaStreamConfig,u),f(0,t),o.logger.info("zsc.sd.0 swtich "+e+" device success"),r&&r({errorCode:0,extendedData:""})}),(function(t){o.logger.warn("zsc.sd.0 swtich "+e+" device failed and recover last device. ",t+"");var i=c.getMediaStreamConstraints(c.mediaStreamConfig),n=a.errorCodeList.VIDEO_DEVICE_FALSE;"audio"===e&&(n=a.errorCodeList.AUDIO_DEVICE_FALSE),navigator.mediaDevices.getUserMedia(i).then((function(i){f(0,i),o.logger.info("zsc.sd.0 recover last "+e+" device success"),r&&r({errorCode:n.code,extendedData:n.message+" "+JSON.stringify(t)})}),(function(t){o.logger.error("zsc.sd.0 swtich "+e+" device and recover failed, please recreate stream. ",t+""),r&&r({errorCode:n.code,extendedData:n.message+" "+JSON.stringify(t)})}))}))}))},e.prototype._replaceTrack=function(e,t){var i=this.streamCenter.checkPreview(e),n=this.streamCenter.checkPublish(e);return n?n.publisher.replacePublishedTrack(t):i?i.localStream.getTracks().find((function(e){return e.kind===t.kind}))?(i.replacePreviewTrack(t),{errorCode:0,extendedData:""}):(this.logger.error("zc.rt.0 track no found"),{errorCode:a.errorCodeList.TRACK_NOT_FOUND.code,extendedData:a.errorCodeList.TRACK_NOT_FOUND.message}):(this.logger.error("zc.rt.0 preview no found"),{errorCode:a.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:a.errorCodeList.PUBLISH_NO_PREVIEW.message})},e.prototype.enableMicrophone=function(e,t){var i=this.streamCenter.checkPreview(e);return i?i.enableMicrophone(t,this.streamCenter):(this.logger.error("zsc.em.0 no preview"),!1)},e.prototype.enableCamera=function(e,t,i){var n=this.streamCenter.checkPreview(e);return n?n.enableCamera(t,this.streamCenter,i):(this.logger.error("zsc.ec.0 no preview"),!1)},e.prototype.setBeautyEffect=function(e,t,i){var n=this;return new Promise((function(r,o){if(!(e instanceof MediaStream))return n.logger.error(s.ZEGO_WEBRTC_ACTION.SET_BEAUTY_EFFECT+" localStream not found"),void o({errorCode:c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError.message+" localStream no found"});t=!!t;var l=function(e){r(e)},u=n.streamCenter.checkPreview(e);if(!u)return n.logger.error("zc.sbe.0 preview no found"),void l({errorCode:a.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:a.errorCodeList.PUBLISH_NO_PREVIEW.message});u.setBeautyEffect(t,i).then((function(){l({errorCode:0,extendedData:""})})).catch((function(e){o({errorCode:-1,extendedData:e.toString()})}))}))},e}();t.AdvancedModule=l},4378:function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.signal=t.publisher=t.publishModule=t.playModule=t.preview=t.streamHandler=t.zegoWebRTC=t.ENUM_PUBLISH_STREAM_STATE=t.ENUM_STREAM_CMD_PRI=t.ENUM_STREAM_SUB_CMD=t.PROTO_VERSION=void 0;var s=i(2367),a=i(5098),c=i(8706),l=i(7248);t.PROTO_VERSION="2.13.0",t.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},t.ENUM_STREAM_CMD_PRI={liveBegin:"zegochat_js.room_stream_create_req",liveEnd:"zegochat_js.room_stream_delete_req",liveUpdate:"zegochat_js.room_stream_update_req"},t.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},t.zegoWebRTC={mutePublishStreamVideo:function(e,t,i){this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" call");var n=this.stateCenter.getReportSeq();if(this.dataReport.newReport(n,c.ZegoRTCLogEvent.kZegoTaskMutePublishVideo),"boolean"!=typeof t||void 0!==i&&"boolean"!=typeof i)return this.logger.error(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" option error"),!1;var r=this.rtcModules.advancedModule.enableStream(e,{video:!t,retain:i});return this.dataReport.uploadReport(n),this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" end"),r},mutePublishStreamAudio:function(e,t){this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" call");var i=this.stateCenter.getReportSeq();if(this.dataReport.newReport(i,c.ZegoRTCLogEvent.kZegoTaskMutePublishAudio),"boolean"!=typeof t)return this.logger.error(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" option error"),!1;var n=this.rtcModules.advancedModule.enableStream(e,{audio:!t});return this.dataReport.uploadReport(i),this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" end"),n},mutePlayStreamVideo:function(e,t){this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_VIDEO+" call "+e+" "+t);var i=this.stateCenter.getReportSeq();this.dataReport.newReport(i,c.ZegoRTCLogEvent.kZegoTaskMutePlayVideo);var n=this.rtcModules.playModule.mutePlayStream(e,"video",t);return this.dataReport.uploadReport(i),this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_VIDEO+" end"),n},mutePlayStreamAudio:function(e,t){this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_AUDIO+" call "+e+" "+t);var i=this.stateCenter.getReportSeq();this.dataReport.newReport(i,c.ZegoRTCLogEvent.kZegoTaskMutePlayAudio);var n=this.rtcModules.playModule.mutePlayStream(e,"audio",t);return this.dataReport.uploadReport(i),this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_AUDIO+"end"),n},muteMicrophone:function(e){this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_MIC+" call");var t=this.stateCenter.getReportSeq();if(this.dataReport.newReport(t,c.ZegoRTCLogEvent.kZegoTaskMuteMicrophone),"boolean"!=typeof e)return this.logger.error(s.ZEGO_WEBRTC_ACTION.MUTE_MIC+" option error"),!1;var i=this.rtcModules.advancedModule.enableMicrophoneOnly(!e);return this.dataReport.uploadReport(t),this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_MIC+" end"),i},activateSEIInsert:function(e){var t=e.stream,i=e.action,n=e.infoType;return this.rtcModules.publishModule.activateSEIInsert(t,i,n)},getAudioInfo:function(e,t,i){if(!e)return this.logger.error("localStream is empty!"),!1;var r=n({},i);return new l.MediaUtil(this.ac,r).connectToSource(e,(function(e){t(e)}))},startRecord:function(e){var t=this,i=this.streamCenter.checkPreview(e);if(i){var n=e.clone(),r=n.getAudioTracks();r.length>0&&i.hasEmptyAudioTrack&&r.forEach((function(e){n.removeTrack(e)})),this.recordedBlobs=[];var o={mimeType:"video/webm;codecs=vp9"};MediaRecorder.isTypeSupported(o.mimeType)||(o={mimeType:"video/webm;codecs=vp8,opus"},MediaRecorder.isTypeSupported(o.mimeType)||(o={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(o.mimeType)||(o={mimeType:"video/webm"},MediaRecorder.isTypeSupported(o.mimeType)||(o={mimeType:""}))));try{this.mediaRecorder=new MediaRecorder(n,o)}catch(e){return void this.logger.error("Exception while creating ZegoMediaRecorder:",e)}this.mediaRecorder.onstop=function(e){t.logger.warn("Recorder stopped: "+e)},this.mediaRecorder.ondataavailable=this.handleDataAvailable.bind(this),this.mediaRecorder.start(10)}else this.logger.error("stream is not from zego!")},stopRecord:function(){this.mediaRecorder?this.mediaRecorder.stop():this.logger.warn("please invoke startRecord first")},resumeRecord:function(){this.mediaRecorder?this.mediaRecorder.resume():this.logger.warn("please invoke startRecord first")},pauseRecord:function(){this.mediaRecorder?this.mediaRecorder.pause():this.logger.warn("please invoke startRecord first")},saveRecord:function(e){if(this.mediaRecorder&&this.recordedBlobs){var t=new Blob(this.recordedBlobs,{type:"video/webm"}),i=window.URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=i,n.download=e+".webm",document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(i)}),100)}else this.logger.warn("please invoke startRecord first")},handleDataAvailable:function(e){e.data&&e.data.size>0&&this.recordedBlobs.push(e.data)},takeSnapShot:function(e,t){if(e&&0!==e.videoHeight){var i=document.createElement("canvas");i.width=e.videoWidth,i.height=e.videoHeight;var n=i.getContext("2d");n&&n.drawImage(e,0,0,i.width,i.height),t.src=i.toDataURL("image/jpeg")}else this.logger.error("video can not empty")},saveSnapShot:function(e,t){if(e&&0!==e.videoHeight){var i=document.createElement("canvas");i.width=e.videoWidth,i.height=e.videoHeight;var n=i.getContext("2d");n&&n.drawImage(e,0,0,i.width,i.height),i.toBlob((function(e){var i=window.URL.createObjectURL(e),n=document.createElement("a");n.style.display="none",n.href=i,n.download=t+".jpeg",document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(i)}),100)}))}else this.logger.error("video can not empty")},setStreamExtraInfo:function(e,t){var i=this;return new Promise((function(n,r){var o=i.stateCenter.getReportSeq();i.dataReport.newReport(o,c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.event),i.dataReport.addMsgInfo(o,{stream:c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.stream(e),stream_extra_info:c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.stream_extra_info(t)});var s=function(e,t){i.logger.error("zb.ssei "+t),i.dataReport.addMsgInfo(o,{error:e.code,message:e.message+" "+t}),i.dataReport.uploadReport(o),r({errorCode:e.code,extendedData:e.message+" "+t})};if("string"==typeof e&&""!=e)if("string"==typeof t&&""!=t)if(i.RTM.service.isDisConnect())s(c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.error.kNoLoginError,"not login");else if(i.stateCenter.publishStreamList[e]){var a=i.streamCenter.getRoomByStreamID(e);a?(i.dataReport.addMsgInfo(o,{room_sid:c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.room_sid(a.sessionID)}),a.streamHandler.setStreamExtraInfo(e,t,n,s),i.dataReport.uploadReport(o)):s(c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.error.kNoLoginError,"not login")}else s(c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.error.kPublishStreamNoFoundError,"publish stream no found");else s(c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.error.kParamError,"extraInfo must be string and no empty");else s(c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.error.kParamError,"streamID must be string and not empty")}))},addTrack:function(e,t){var i=this;return new Promise((function(n,r){i.logger.info(s.ZEGO_WEBRTC_ACTION.ADD_TRACK+" call"),i.rtcModules.advancedModule.handleTrack("ADD",e,t,n,r)}))},removeTrack:function(e,t){var i=this;return new Promise((function(n,r){i.logger.info(s.ZEGO_WEBRTC_ACTION.REMOVE_TRACK+" call"),i.rtcModules.advancedModule.handleTrack("REMOVE",e,t,n,r)}))}},t.streamHandler={_publishTarget:function(e,i,n){var r=this;this.logger.info("zb.sh.ptcall");var o=Math.ceil((new Date).getTime()/1e3),s=e.streamID;this.stateCenter.testEnvironment&&(s="zegotest-"+this.stateCenter.appid+"-"+e.streamID);var l={appid:this.stateCenter.appid,biz_type:0,timestamp:o,seq:this.stateCenter.cdnSeq++,version:1*t.PROTO_VERSION,stream_id:s,pushurl:e.pushUrl},u={channel:"media",cmd:e.type,req_body:JSON.stringify(l)};this.logger.debug("zb.sh.pt send command"),this.sendBizChannelRequest(u,(function(t,o,s){if(r.logger.info("zb.sh.pt receive message"),0!=s.length){var l=JSON.parse(s),u=l.code,d=l.message;u&&0!=u?(r.logger.error("zb.sh.pt "+e.type+" error code: "+u+" "+d),n(a.errorCodeList.UNKNOWN_SERVER_ERROR," cmd: "+e.type+" "+u+" "+d)):(r.logger.info("zb.sh.pt "+e.type+" success"),i&&i({errorCode:0,extendedData:""}))}else n(c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kNoResponseError)}),(function(t,i,o){r.logger.info("zb.sh.pt error: "+t);var s=c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kUnknownServerError;2001==t?c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kInvalidChannelError:2002==t&&(s=c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kBizChannelError),r.logger.error("zb.sh.pt "),n(s," cmd: "+e.type+" "+t+"   ")}))},updateStreamExtraInfo:function(e,i,n,r){var o;this.logger.info("zb.sh.usei call"),o="PUBLIC"===this.stateCenter.type?t.ENUM_STREAM_SUB_CMD.liveUpdate:t.ENUM_STREAM_CMD_PRI.liveUpdate,this.stateCenter.publishStreamList[e]&&this.stateCenter.publishStreamList[e].state>=t.ENUM_PUBLISH_STREAM_STATE.update_info?(this.stateCenter.publishStreamList[e].extra_info=i,this.updateStreamInfo(e,o,i),n({errorCode:0})):r(c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.error.kUpdateStreamInfoFailError)},setStreamExtraInfo:function(e,t,i,n){this.updateStreamExtraInfo(e,t,i,n)}},t.preview={enableCamera:function(e,t,i){var n,r,o,s=this;if(!this.localStream)return this.logger.error("zp.ec.2 no localStream"),!1;var a=this.videoTrack;if((!i||e)&&a&&(a.enabled=e,"chrome"===this.stateCenter.browser&&e&&void 0!==typeof a.getSettings().width&&a.getSettings().width>0)){var c=a.getSettings().width-1,l=a.getSettings().height-1;a.applyConstraints({width:c,height:l}),setTimeout((function(){a.applyConstraints({width:s.videoInfo.width,height:s.videoInfo.height})}),200)}var u=null===(n=t.checkPublish(this.localStream))||void 0===n?void 0:n.publisher;if(u){var d=null===(r=u.peerConnection)||void 0===r?void 0:r.getSenders().find((function(e){var t;return"video"===(null===(t=e.track)||void 0===t?void 0:t.kind)}));if(i&&!e){var h=this.videoTrack.clone();null==d||d.replaceTrack(h),h.stop()}else e&&((null===(o=this.videoEffect)||void 0===o?void 0:o.enabled)&&this.videoEffect.output?null==d||d.replaceTrack(this.videoEffect.output):null==d||d.replaceTrack(this.videoTrack));var p=e?0:20,f=this.isAudioEnabled&&t.isMicEnabled?0:20;u.camera_status===p&&u.mic_status===f||u.sendStreamStatus(p,f)}return this.logger.info("zp.ec.2 call success"),!0},enableMicrophone:function(e,t){var i;if(!this.localStream)return this.logger.error("zp.em.2 no localStream"),!1;this.localStream.getAudioTracks().forEach((function(t){t.enabled=e})),this.audioTrack&&(this.audioTrack.enabled=e&&t.isMicEnabled);var n=null===(i=t.checkPublish(this.localStream))||void 0===i?void 0:i.publisher;if(n&&n.signal){var r=n.camera_status,o=e&&t.isMicEnabled?0:20;n.camera_status===r&&n.mic_status===o||n.sendStreamStatus(r,o)}return this.isAudioEnabled=e,this.logger.debug("zp.em.2 call success"),!0},replacePreviewTrack:function(e,t){var i;return void 0===t&&(t=!1),r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return e&&e.kind&&this.localStream?(n="audio"===e.kind?"audioTrack":"videoTrack",t||!(null===(i=this.videoEffect)||void 0===i?void 0:i.enabled)||"video"!==e.kind?[3,2]:[4,this.videoEffect.setInput(e)]):[2];case 1:return o.sent(),[3,3];case 2:(r=this.localStream.getTracks().find((function(t){return t.kind===e.kind})))&&this.localStream.removeTrack(r),this.localStream.addTrack(e),o.label=3;case 3:return t||(this[n]=e),[2]}}))}))}},t.playModule={mutePlayStream:function(e,t,i){var n=this;return this.logger.info("zsc.mps.0 call "+t+" "+i),new Promise((function(r,o){if("string"!=typeof e||""==e)return n.logger.error("zsc.mps.0 streamID must be string and not empty"),void o(!1);if("boolean"!=typeof i)return n.logger.error("zsc.mps.0 mute must be boolean"),void o(!1);var s=n.streamCenter.playerList[e];if(!s)return n.logger.error("zsc.mps.0 player not found"),void o(!1);if("video"===t){if(s.playOption&&!1===s.playOption.video||s.player&&0!==s.player.cameraStatus)return n.logger.error("zsc.mps.0 stream no contain video"),void o(!1);s.player.signal.ActivatePlayVideoStream(n.stateCenter.getSeq(),s.player.sessionId,i,(function(){n.logger.info("zsc.mps.0 suc");var e=n.stateCenter.getReportSeq();s.player.playMediaStatus.video=!i,n.dataReport.newReport(e,c.ZegoRTCLogEvent.kZegoPlayContentChanged.event),n.dataReport.addMsgInfo(e,{session_id:c.ZegoRTCLogEvent.kZegoPlayContentChanged.session_id(s.player.sessionId),video_activate:c.ZegoRTCLogEvent.kZegoPlayContentChanged.video_activate(s.player.playMediaStatus.video?1:0),audio_activate:c.ZegoRTCLogEvent.kZegoPlayContentChanged.audio_activate(s.player.playMediaStatus.audio?1:0)}),n.playVideoStatus=n.dataReport.uploadReport(e),r(!0)}),(function(){n.logger.error("zsc.mps.0 fail"),o(!1)}))}else if("audio"===t){if(s.playOption&&!1===s.playOption.audio||s.player&&0!==s.player.micStatus)return n.logger.error("zsc.mps.0 stream no contain audio"),void o(!1);s.player.signal.ActivatePlayAudioStream(n.stateCenter.getSeq(),s.player.sessionId,i,(function(){n.logger.info("zsc.mps.0 suc");var e=n.stateCenter.getReportSeq();s.player.playMediaStatus.audio=!i,n.dataReport.newReport(e,c.ZegoRTCLogEvent.kZegoPlayContentChanged.event),n.dataReport.addMsgInfo(e,{session_id:c.ZegoRTCLogEvent.kZegoPlayContentChanged.session_id(s.player.sessionId),video_activate:c.ZegoRTCLogEvent.kZegoPlayContentChanged.video_activate(s.player.playMediaStatus.video?1:0),audio_activate:c.ZegoRTCLogEvent.kZegoPlayContentChanged.audio_activate(s.player.playMediaStatus.audio?1:0)}),n.dataReport.uploadReport(e),r(!0)}),(function(){n.logger.error("zsc.mps.0 fail"),o(!1)}))}else o(!1)}))},setStreamAudioOutput:function(e,t){var i=this;return!(null==t||0==t.length||!e||(this.logger.debug("zsc.ssao.0 device "+t),e?"undefined"!==e.sinkId?(e.setSinkId(t).then((function(){i.logger.info("zsc.ssao.0 success device: "+t)})).catch((function(e){i.logger.info("zsc.ssao.0 "+e.name)})),0):(this.logger.error("zsc.ssao.0 browser does not suppport"),1):(this.logger.error("zsc.ssao.0 no localVideo"),1)))}},t.publishModule={activateSEIInsert:function(e,t,i){void 0===i&&(i=0);var n=this.streamCenter.checkPreview(e);if(!n)return this.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" stream is not created"),!1;if(0!==t&&1!==t)return this.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" value of “action” should be 0 or 1"),!1;n.activatesSEIConfig={action:t,infoType:i};var r=this.streamCenter.checkPublish(e);return r&&(null==r||r.publisher.activateSEIInsert(t,i)),!0}},t.publisher={activateSEIInsert:function(e,t){var i=this;return new Promise((function(n,r){return i.signal?(i.signal&&i.signal.activateSEIInsert(i.stateCenter.getSeq(),i.sessionId,i.peerID,e,t,(function(e,t,r){var o=!1;0===r.result?(i.logger.info(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" called success"),o=!0):1===r.result?(i.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" "+r.peer_id+" invalid param."),o=!1):2===r.result&&(i.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" peer not exist"),o=!1),n(o)}),(function(e){1===e&&i.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" request timeout")})),!1):n(!1)}))},replacePublishedTrack:function(e,t){var i,n;return void 0===t&&(t=!1),r(this,void 0,void 0,(function(){var r,s,c,l,u,d,h,p;return o(this,(function(o){switch(o.label){case 0:return r=this.localStream,s=this.previewer,c=s.videoEffect,l=e.kind,u=s[l+"Track"],d=null===(i=this.peerConnection)||void 0===i?void 0:i.getSenders().find((function(e){return e.track.kind===l})),u?(h=0,p=0,"video"===l?(h=t?!0===u.enabled?0:20:!0===e.enabled?0:20,p=r.getAudioTracks()[0]&&1==r.getAudioTracks()[0].enabled?0:20):"audio"===l&&(p=!0===e.enabled?0:20,h=1==(null===(n=s.videoTrack)||void 0===n?void 0:n.enabled)?0:20),[4,s.replacePreviewTrack(e,t)]):[3,2];case 1:return o.sent(),d?("audio"!==l&&!t&&(null==c?void 0:c.enabled)||d.replaceTrack(e),this.camera_status===h&&this.mic_status===p||this.sendStreamStatus(h,p)):this.logger.info("zc.rt.1 replace remote track will work after stream published"),this.logger.info("zc.rt.1 replace remote track success"),[2,{errorCode:0,extendedData:""}];case 2:return this.logger.error("zc.rt.1 publisher track no found"),[2,{errorCode:a.errorCodeList.TRACK_NOT_FOUND.code,extendedData:a.errorCodeList.TRACK_NOT_FOUND.message}]}}))}))}},t.signal={activateSEIInsert:function(e,t,i,n,r,o,a){this.logger.info(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" call "+t);var c={peer_id:i,action:n,info_type:r};this.sendMessageWithCallback("ActivateSEIInsertReq",e,t,c,o,a)}}},5098:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},INPUT_PARAM:{code:1100001,message:"input param error."},PUBLISH_NOT_PUBLISH:{code:1103040,message:"publisher not found"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},TRACK_NOT_FOUND:{code:1103047,message:"track is not found"},DEVICE_NOT_FOUND:{code:1103048,message:"device is not found"},PUBLISHER_CONSTRAINTS_ERROR:{code:1103029,message:"constraint error"},PUBLISHER_CDN_PUSH_ERROR:{code:1103052,message:"publisher cdn push error"},VIDEO_DEVICE_FALSE:{code:1103045,message:"video is false"},AUDIO_DEVICE_FALSE:{code:1103046,message:"audio is false"},UNKNOWN_SERVER_ERROR:{code:1100999,message:"unknown server error"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISH_TARGET_NO_RESPONSE:{code:1103063,message:"publish target no response"},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},INVALID_CHANNEL:{code:1102024,message:"invalid channel"},PUBLISHER_EXTRA_INFO_NULL:{code:1003050,message:"extra info of publishing stream is null"},PUBLISHER_UPDATE_STREAM_INFO_FAIL:{code:1103062,message:"update stream info fail"},TRACK_CAN_NOT_ADD:{code:1103063,message:"only stream which have one track and kind no exist can add track"},TRACK_CAN_NOT_REMOVE:{code:1103064,message:"stream which only has one track can not remove "},PUBLISHER_UPDATE_SDP_FAIL:{code:1103068,message:"update sdp fail"},PUBLISHER_STATE_WRONG:{code:1103069,message:"publisher state wrong"},HANDLE_TRACK_NOT_SUPPORTED:{code:1103070,message:"not support remove track"},VIDEO_EFFECT_IS_RUNNING:{code:1103071,message:"video effect processor is running"}}},3824:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4495),r=i(4378);t.default={type:"Advance",install:function(e,t,i,o,s,a,c,l){for(var u in Object.defineProperty(t.prototype,"initAdvance",{value:function(){this.advancedModule=new n.AdvancedModule(this.logger,this.dataReport,this.streamCenter,this.stateCenter)},writable:!1}),r.zegoWebRTC)Object.defineProperty(e.prototype,u,{value:r.zegoWebRTC[u],writable:!1});for(var u in r.streamHandler)Object.defineProperty(i.prototype,u,{value:r.streamHandler[u],writable:!1});for(var u in r.preview)Object.defineProperty(o.prototype,u,{value:r.preview[u],writable:!1});for(var u in r.playModule)Object.defineProperty(s.prototype,u,{value:r.playModule[u],writable:!1});for(var u in r.publishModule)Object.defineProperty(a.prototype,u,{value:r.publishModule[u],writable:!1});for(var u in r.publisher)Object.defineProperty(c.prototype,u,{value:r.publisher[u],writable:!1});for(var u in r.signal)Object.defineProperty(l.prototype,u,{value:r.signal[u],writable:!1})}}},8706:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTCLogEvent=void 0;var n=i(5098),r=function(e){return e};t.ZegoRTCLogEvent={kZegoSetVideoConfig:{event:"/sdk/set_video_config",error:{kParamError:n.errorCodeList.INPUT_PARAM,kLocalStreamError:n.errorCodeList.LOCALSTREAM_WRONG}},kZegoSetAudioConfig:{event:"/sdk/set_audio_config",error:{kParamError:n.errorCodeList.INPUT_PARAM}},kZegoReplaceTrack:{event:"/sdk/replace_track",error:{kParamError:n.errorCodeList.INPUT_PARAM}},kZegoTaskUseVideoDevice:{event:"/device/api/video_c",error:{kParamError:n.errorCodeList.INPUT_PARAM,kDevicesNoFoundError:n.errorCodeList.DEVICE_NOT_FOUND,kLocalStreamError:n.errorCodeList.LOCALSTREAM_WRONG},device:r},kZegoTaskUseAudioDevice:{event:"/device/api/audio_c",error:{kParamError:n.errorCodeList.INPUT_PARAM,kDevicesNoFoundError:n.errorCodeList.DEVICE_NOT_FOUND,kLocalStreamError:n.errorCodeList.LOCALSTREAM_WRONG},device:r},kZegoTaskPublishTarget:{event:"/sdk/publish_target",error:{kParamError:n.errorCodeList.INPUT_PARAM,kPublishStreamNoFoundError:n.errorCodeList.PUBLISHER_STREAM_NO_FOUND,kNoLoginError:n.errorCodeList.NOT_LOGIN,kNoResponseError:n.errorCodeList.PUBLISH_TARGET_NO_RESPONSE,kBizChannelError:n.errorCodeList.BIZ_CHANNEL_ERROR,kInvalidChannelError:n.errorCodeList.INVALID_CHANNEL,kUnknownServerError:n.errorCodeList.UNKNOWN_SERVER_ERROR}},kZegoTaskAddPublishCdnUrl:{event:"/sdk/add_publish_cdn_url",error:{kParamError:n.errorCodeList.INPUT_PARAM}},kZegoTaskRemovePublishCdnUrl:{event:"/sdk/remove_publish_cdn_url",error:{kParamError:n.errorCodeList.INPUT_PARAM},stream:r,target_url:r},kZegoTaskClearPublishCdnUrl:{event:"/sdk/clear_publish_cdn_url",error:{kParamError:n.errorCodeList.INPUT_PARAM}},kZegoPlayContentChanged:{event:"/sdk/play_content_changed",session_id:r,video_activate:r,audio_activate:r},kZegoTaskMutePublishVideo:"/sdk/mute_publish_video",kZegoTaskMutePublishAudio:"/sdk/mute_publish_audio",kZegoTaskMuteMicrophone:"/sdk/mute_microphone",kZegoTaskMutePlayVideo:"/sdk/mute_play_video",kZegoTaskMutePlayAudio:"/sdk/mute_play_audio",kZegoTaskLiveRoomSendStreamExtraInfo:{event:"/liveroom/send_stream_extra_info",error:{kParamError:n.errorCodeList.INPUT_PARAM,kExtraInfoNullError:n.errorCodeList.PUBLISHER_EXTRA_INFO_NULL,kNoLoginError:n.errorCodeList.NOT_LOGIN,kPublishStreamNoFoundError:n.errorCodeList.PUBLISHER_STREAM_NO_FOUND,kUpdateStreamInfoFailError:n.errorCodeList.PUBLISHER_UPDATE_STREAM_INFO_FAIL},stream:r,stream_extra_info:r,room_sid:r}}},7248:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaUtil=void 0;var i=function(){function e(e,t){var i=this,n=t.type,r=t.channels,o=void 0===r?1:r,s=t.bufferSize,a=void 0===s?0:s,c=t.sampleBit,l=void 0===c?16:c,u=t.sampleRate,d=void 0===u?44100:u;this.instant=0,this.slow=0,this.clip=0,this.context=e,this.type=n,this.channels=o,this.bufferSize=a,this.sampleBit=l,this.sampleRate=d,this.script=e.createScriptProcessor(a,o,o),(new Date).getTime(),this.script.addEventListener("audioprocess",(function(e){var t,r=e.inputBuffer.getChannelData(0),o=0,s=0;for(t=0;t<r.length;++t)o+=r[t]*r[t],Math.abs(r[t])>.99&&(s+=1);if(i.instant=Math.sqrt(o/r.length),i.slow=.95*i.slow+.05*i.instant,i.clip=s/r.length,"pcm"===n||"wav"===n){for(var a=[],c=0;c<i.channels;c++)a.push(e.inputBuffer.getChannelData(c));i.recorderBuffer(a)}})),"pcm"!==n&&"wav"!==n||this.initRecorderBuffer(n)}return e.prototype.connectToSource=function(e,t){try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),void 0!==t&&t(null)}catch(e){console.error(e),void 0!==t&&t(e)}return this},e.prototype.recorderBuffer=function(e){this.worker.postMessage({command:"record",val:e})},e.prototype.initRecorderBuffer=function(e){var t=this;this.worker=this.inlineWorker((function(){var e,t,i,n,r,o,s=[];function a(e,t,i){for(var n=0;n<i.length;n++,t+=2){var r=Math.max(-1,Math.min(1,i[n]));e.setInt16(t,r<0?32768*r:32767*r,!0)}}function c(e,t,i){for(var n=0;n<i.length;n++,t++){var r=Math.max(-1,Math.min(1,i[n])),o=r<0?128*r:127*r;o+=128,e.setInt8(t,o)}}function l(e,t,i){for(var n=0;n<i.length;n++)e.setUint8(t+n,i.charCodeAt(n))}function u(e,t){for(var i=new Float32Array(t.length/e),n=0,r=0;n<i.length;)i[n]=t[r],r+=e,n++;return i}function d(e,t,i){for(var n=new Float32Array(t*e.length),r=0,o=0;o<i[0].length;o++)n.set(i[0][o],r),r+=i[0][o].length;return n}function h(e,t){for(var i=new Float32Array(e.length+t.length),n=0;n<e.length+t.length;n+=2)i[n]=e[n/2>>0],i[n+1]=t[n/2>>0];return i}function p(t){var i,n;if(1==e)i=d(s[0],r,s),1!=t&&(n=u(t,i));else if(2==e){var o=d(s[0],r,s),a=d(s[1],r,s);1!=t?n=h(u(t,o),u(t,a)):i=h(o,a)}return 1!=t?n:i}this.onmessage=function(u){switch(u.data.command){case"init":d=u.data.val,e=d.sampleChannel,t=d.sampleBit,i=d.sampleRate,n=d.oldSampleRate,r=d.bufferSize,o=d.type;break;case"record":!function(r){for(var u=0;u<e;u++)s[u]||(s[u]=[]),s[u].push(r[u]);var d=Math.round(n/i);"pcm"===o?function(e){var i=function(e,i){var n;8==i?n=e.length:16==i&&(n=e.length,n*=2);var r=new ArrayBuffer(n),o=new DataView(r);return 8==i?c(o,0,e):16==t&&a(o,0,e),o}(p(e),t);self.postMessage({command:"exportPcmLive",val:i})}(d):"wav"===o&&function(n){var r=function(n,r){var o;8==r?o=n.length:16==t&&(o=n.length,o*=2);var s=new ArrayBuffer(o+44),u=new DataView(s),d=i,h=t,p=e;return l(u,0,"RIFF"),u.setUint32(4,36+o,!0),l(u,8,"WAVE"),l(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,1,!0),u.setUint16(22,p,!0),u.setUint32(24,d,!0),u.setUint32(28,d*p*(h/8),!0),u.setUint16(32,p*(h/8),!0),u.setUint16(34,h,!0),l(u,36,"data"),u.setUint32(40,o,!0),8==t?c(u,44,n):16==t&&a(u,44,n),u}(p(n),t);self.postMessage({command:"exportWav",val:r})}(d),s=[]}(u.data.val)}var d}})),this.worker.postMessage({command:"init",val:{sampleChannel:this.channels,sampleBit:this.sampleBit,sampleRate:this.sampleRate,oldSampleRate:this.context.sampleRate,bufferSize:this.bufferSize,type:e}}),this.worker.onmessage=function(e){switch(e.data.command){case"exportPcmLive":t.onReceiveBuffer(e.data.val);break;case"exportWav":t.onReceiveWav(e.data.val)}}},e.prototype.onReceiveBuffer=function(e){},e.prototype.onReceiveWav=function(e){},e.prototype.writeString=function(e,t,i){for(var n=0;n<i.length;n++)e.setUint8(t+n,i.charCodeAt(n))},e.prototype.writeBuffer=function(e,t,i){for(var n=0;n<i.byteLength;n++)e.setUint8(t+n,i[n])},e.prototype.concatenation=function(e){for(var t=0,i=0;i<e.length;++i)t+=e[i].buffer.byteLength;var n=new Uint8Array(t),r=0;for(i=0;i<e.length;++i)n.set(new Uint8Array(e[i].buffer),r),r+=e[i].buffer.byteLength;return n},e.prototype.encodeWave=function(e){var t=this.concatenation(e),i=t.byteLength,n=new ArrayBuffer(i+44),r=new DataView(n),o=this.sampleRate,s=this.sampleBit,a=this.channels;return this.writeString(r,0,"RIFF"),r.setUint32(4,36+i,!0),this.writeString(r,8,"WAVE"),this.writeString(r,12,"fmt "),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,a,!0),r.setUint32(24,o,!0),r.setUint32(28,o*a*(s/8),!0),r.setUint16(32,a*(s/8),!0),r.setUint16(34,s,!0),this.writeString(r,36,"data"),r.setUint32(40,i,!0),this.writeBuffer(r,44,t),r},e.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()},e.prototype.inlineWorker=function(e){if(Worker&&e){var t=e.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],i=URL.createObjectURL(new window.Blob([t],{type:"text/javascript"}));return new Worker(i)}return null},e}();t.MediaUtil=i},2523:function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_WEBRTC_ACTION=void 0,(i=t.ZEGO_WEBRTC_ACTION||(t.ZEGO_WEBRTC_ACTION={})).PRELOAD_EFFECT="zc.pe.0",i.PLAY_EFFECT="zc.pe.1",i.PAUSE_EFFECT="zc.pe.2",i.RESUME_EFFECT="zc.re",i.STOP_EFFECT="zc.se",i.UNLOAD_EFFECT="zc.ue",i.SET_EFFECT_VOLUME="zc.sev",i.START_MIXING_AUDIO="zc.sma.0",i.STOP_MIXING_AUDIO="zc.sma.1",i.MIXING_BUFFER="zc.mb",i.STOP_MIXING_BUFFER="zc.smb",i.SET_MIXING_AUDIO_VOLUME="zc.smav",i.PUBLISHER_PLAY_EFFECT="zc.p.0.pe.0",i.PUBLISHER_PAUSE_EFFECT="zc.p.0.pe.1",i.PUBLISHER_RESUME_EFFECT="zc.p.0.re",i.PUBLISHER_STOP_EFFECT="zc.p.0.se",i.PUBLISHER_START_MIXING_AUDIO="zc.p.0.sma.0",i.PUBLISHER_STOP_MIXING_AUDIO="zc.p.0.sma.1",i.PUBLISHER_MIXING_BUFFER="zc.p.0.mb",i.PUBLISHER_SET_MIXING_AUDIO_VOLUME="zc.p.0.smav"},4194:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioMix=void 0;var n=i(4853),r=function(){function e(e,t,i,n){this.logger=e,this.stateCenter=t,this.ac=i,this.mediaEleSources=n,this.audioBufferList=[],this.loop=!1,this.replace=!1,this.effectEndedCallBack=null,this.effectEndedListener=null,this.startTimes=0,this.startOffset=0,this.pauseTimes=0,this.resumeOffset=0,this.paused=!1,this.isMixAudio=!1,this.isMixingBuffer=!1,this.audioCurrentTimer=null}return e.prototype.preloadEffect=function(e,t){var i=this;this.logger.info("amu.pe.0 start preload effect");var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){if(200==n.status||304==n.status){var e=n.response;i.ac.resume(),i.ac.decodeAudioData(e,(function(e){i.logger.info("amu.pe.0 effect preload success"),t("",e)}),(function(e){t(e)}))}else{var r=n.statusText;t(r)}},n.send()},e.prototype.playEffect=function(e,t,i,n,r){var o=this;!0!==this.isMixAudio?this.audioBuffer?(this.startOffset=e||0,this.loop=t||!1,this.replace=i||!1,this.effectEndedCallBack=r,this.mixEffect(this.audioBuffer,(function(){o.buffSource.loop=!!t,e?o.buffSource.start(0,e/1e3):o.buffSource.start(0),o.startTimes=Date.now(),o.effectEndedListener=o.effectEndedHandler.bind(o),o.buffSource.addEventListener("ended",o.effectEndedListener),n&&n()}))):this.logger.error("amu.pe.1 no audio buffer found"):this.logger.error("amu.pe.1 audio is mixing")},e.prototype.mixingBuffer=function(e,t){var i=this;!0!==this.isMixAudio||0!=this.audioBufferList.length||0!=this.isMixingBuffer?(this.ac.resume(),this.ac.decodeAudioData(e,(function(e){i.audioBufferList.push(e),1==i.audioBufferList.length&&i.playRealTimeEffect(i.audioBufferList[0]),i.isMixingBuffer=!0,t&&t()}),(function(e){i.logger.error("amu.mb.0 "+e),t&&t({code:n.errorCodeList.PUBLISHER_DECODE_AUDIO_FAIL.code,message:n.errorCodeList.PUBLISHER_DECODE_AUDIO_FAIL.message+" "+e})}))):this.logger.error("amu.mb.0 audio is mixing")},e.prototype.stopMingBuffer=function(){return this.isMixingBuffer=!1,this.stopMixingAudio()},e.prototype.playRealTimeEffect=function(e){var t=this;this.mixEffect(e,(function(){t.buffSource&&t.buffSource.start(0),t.buffSource&&t.buffSource.addEventListener("ended",(function(){t.audioBufferList.shift(),t.audioBufferList.length>0&&t.isMixAudio&&t.playRealTimeEffect(t.audioBufferList[0])}))}))},e.prototype.pauseEffect=function(){this.audioBufferList.length>0?this.logger.error("amu.pe.0 real time buffer can not be paused"):(this.stopMixingAudio(),this.resumeOffset=(this.pauseTimes-this.startTimes+this.startOffset)%(1e3*this.audioBuffer.duration),this.paused=!0)},e.prototype.resumeEffect=function(){this.audioBufferList.length>0?this.logger.error("amu.pe.0 real time buffer can not be resume"):(this.playEffect(this.resumeOffset,this.loop,this.replace,void 0,this.effectEndedCallBack),this.startOffset=this.resumeOffset,this.paused=!1)},e.prototype.mixEffect=function(e,t){this.localStream?(this.ac.resume(),this.gainNode=this.ac.createGain(),this.buffSource=this.ac.createBufferSource(),this.buffSource.buffer=e,this.buffSource.connect(this.gainNode),this.gainNode.connect(this.ac.destination),this.replaceTrack()&&t()):this.logger.error("amu.me.0 localStream can not be found")},e.prototype.startMixingAudio=function(e,t){if(this.replace=t||!1,this.isMixAudio)return this.logger.error("amu.sma.0 audio is mixing"),!1;if(!this.localStream)return this.logger.error("amu.sma.0 localStream can not be found"),!1;if(e.captureStream=e.captureStream||e.mozCaptureStream||e.webkitCaptureStream,this.ac.resume(),this.gainNode=this.ac.createGain(),"safari"===this.stateCenter.browser){var i=this.mediaEleSources.find((function(t){return t.audio===e}));if(i)this.mixAudio=i.node;else{var n=this.ac.createMediaElementSource(e);this.mixAudio=n,this.mediaEleSources.push({audio:e,node:n})}e.currentTime=e.currentTime,this.audioCurrentTimer=setInterval((function(){e.currentTime=e.currentTime+.45}),6e3)}else this.mixAudio=this.ac.createMediaStreamSource(e.captureStream());return this.mixAudio.connect(this.gainNode),this.replaceTrack()},e.prototype.replaceTrack=function(){this.streamSource=this.ac.createMediaStreamSource(this.localStream),this.destination=this.ac.createMediaStreamDestination(),!this.replace&&this.streamSource.connect(this.destination),this.gainNode.connect(this.destination);var e=this.destination.stream.getAudioTracks()[0],t=this.peerConnection.getSenders().find((function(t){return t.track.kind===e.kind}));return t?(this.micTrack=this.localStream.getAudioTracks()[0],t.replaceTrack(e),this.localStream.removeTrack(this.micTrack),this.localStream.addTrack(e),this.isMixAudio=!0,!0):(this.logger.error("amu.rt.0 no sender"),!1)},e.prototype.stopMixingAudio=function(){var e=this;return this.paused?(this.logger.info("amu.sma.1 audioEffect paused"),!0):this.isMixAudio?this.localStream?(this.peerConnection.getSenders().find((function(t){return t.track.kind===e.micTrack.kind})),this.mixAudio?(this.mixAudio.disconnect(this.gainNode),this.mixAudio=null,this.audioCurrentTimer&&(clearInterval(this.audioCurrentTimer),this.audioCurrentTimer=null)):this.buffSource&&(this.buffSource.removeEventListener("ended",this.effectEndedListener),this.buffSource.stop(),this.pauseTimes=Date.now(),this.buffSource.disconnect(this.gainNode),this.buffSource=null),this.gainNode.disconnect(this.destination),this.isMixAudio=!1,this.audioBufferList=[],!0):(this.logger.error("amu.sma.1 localStream can not be found"),!1):(this.logger.warn("amu.sma.1 no mixing audio found"),!0)},e.prototype.setMixingAudioVolume=function(e){return this.gainNode?(this.gainNode.gain.value=e,!0):(this.logger.error("amu.sma.2 no mixing audio found"),!1)},e.prototype.effectEndedHandler=function(){this.stopMixingAudio(),this.effectEndedCallBack&&this.effectEndedCallBack()},e}();t.AudioMix=r},6459:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioMixModule=void 0;var n=i(2523),r=i(4234),o=function(){function e(e,t,i,n,r){this.logger=e,this.dataReport=t,this.stateCenter=i,this.streamCenter=n,this.ac=r,this.buffer=null,this.blank=null,"safari"==this.stateCenter.browser&&null==this.blank&&null==this.buffer&&(this.ac.resume(),this.buffer=this.ac.createBuffer(1,1,this.ac.sampleRate),this.blank=this.ac.createBufferSource(),this.blank.buffer=this.buffer,this.blank.connect(this.ac.destination),this.blank.start())}return e.prototype.preloadEffect=function(e,t,i){e&&"string"==typeof e&&t&&"string"==typeof t?this.stateCenter.audioEffectBuffer[e]?this.logger.error(n.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" audio buffer already exists"):(this.logger.info(n.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" start preload effect"),this._preloadEffect(this.ac,e,t,i)):this.logger.error(n.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" params error")},e.prototype.playEffect=function(e,t,i){e.streamID&&"string"==typeof e.streamID&&e.effectID&&"string"==typeof e.effectID?this.stateCenter.audioEffectBuffer[e.effectID]?this._playEffect(e,t,i):this.logger.error(n.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" audio buffer doesn't exists"):this.logger.error(n.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" params error")},e.prototype.pauseEffect=function(e,t){return e&&"string"==typeof e?(t&&"string"!=typeof t&&this.logger.error(n.ZEGO_WEBRTC_ACTION.PAUSE_EFFECT+" effect "),this._pauseEffect(e,t)):(this.logger.error(n.ZEGO_WEBRTC_ACTION.PAUSE_EFFECT+" streamID format error"),!1)},e.prototype.resumeEffect=function(e,t){return e&&"string"==typeof e?(t&&"string"!=typeof t&&this.logger.error(n.ZEGO_WEBRTC_ACTION.RESUME_EFFECT+" effect "),this._resumeEffect(e,t)):(this.logger.error(n.ZEGO_WEBRTC_ACTION.RESUME_EFFECT+" streamID format error"),!1)},e.prototype.stopEffect=function(e,t){return e&&"string"==typeof e?(t&&"string"!=typeof t&&this.logger.error(n.ZEGO_WEBRTC_ACTION.STOP_EFFECT+" effect "),this._stopEffect(e,t)):(this.logger.error(n.ZEGO_WEBRTC_ACTION.STOP_EFFECT+" streamID format error"),!1)},e.prototype.unloadEffect=function(e){return e&&"string"==typeof e?(delete this.stateCenter.audioEffectBuffer[e],!0):(this.logger.error(n.ZEGO_WEBRTC_ACTION.UNLOAD_EFFECT+" params error"),!1)},e.prototype.setEffectVolume=function(e,t,i){if(!e||"string"!=typeof e)return this.logger.error(n.ZEGO_WEBRTC_ACTION.SET_EFFECT_VOLUME+" streamID format error"),!1;i&&"string"!=typeof i&&this.logger.error(n.ZEGO_WEBRTC_ACTION.SET_EFFECT_VOLUME+" effect ");var r=this.streamCenter.getPublisher(e);return r?r.setEffectVolume(t/100,i):(this.logger.error(n.ZEGO_WEBRTC_ACTION.SET_EFFECT_VOLUME+" publisher doesn't exist"),!1)},e.prototype.startMixingAudio=function(e,t){return this.logger.info(n.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" call "+e),e&&"string"==typeof e?t?(this.logger.info(n.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" end "+e),Array.isArray(t)&&0!==t.length?this._startMixingAudio(e,t):(this.logger.error(n.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" audio param type error"),!1)):(this.logger.error(n.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" no audio"),!1):(this.logger.error(n.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" stream id type error"),!1)},e.prototype.stopMixingAudio=function(e,t){return e&&"string"==typeof e?Array.isArray(t)&&0!==t.length||void 0===t?this._stopMixingAudio(e,t):(this.logger.error(n.ZEGO_WEBRTC_ACTION.STOP_MIXING_AUDIO+" audio param type error"),!1):(this.logger.error(n.ZEGO_WEBRTC_ACTION.STOP_MIXING_AUDIO+" param streamID format error"),!1)},e.prototype.mixingBuffer=function(e,t,i,r){this.logger.info(n.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" call streamID: "+e+" sourceID:"+t),e&&"string"==typeof e?t&&"string"==typeof t?(this._mixingBuffer(e,t,i,r),this.logger.info(n.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" end")):this.logger.error(n.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" param source id format error"):this.logger.error(n.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" param streamid format error")},e.prototype.stopMixingBuffer=function(e,t){return this.logger.info(n.ZEGO_WEBRTC_ACTION.STOP_MIXING_BUFFER+" call streamID: "+e+" sourceID:"+t),e&&"string"==typeof e?t&&"string"==typeof t?this._stopMixingBuffer(e,t):(this.logger.error(n.ZEGO_WEBRTC_ACTION.STOP_MIXING_BUFFER+" param source id format error"),!1):(this.logger.error(n.ZEGO_WEBRTC_ACTION.STOP_MIXING_BUFFER+" param streamid format error"),!1)},e.prototype.setMixingAudioVolume=function(e,t,i){return this.logger.info(n.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" call"),"string"!=typeof e||""==e?(this.logger.error(n.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" stream ID must be string and not empty"),!1):"number"!=typeof t||t<0||t>100?(this.logger.error(n.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" volume must be a number between 0 and 100"),!1):i&&i instanceof HTMLMediaElement?this._setMixingAudioVolume(e,t,i):(this.logger.error(n.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" no audio"),!1)},e.prototype.getSoundLevel=function(e,t,i){this.logger.info("zc.gsl call");var n=this.stateCenter.getReportSeq();this.dataReport.newReport(n,r.ZegoRTCLogEvent.kZegoTaskGetSoundLevel.event);try{this.ac.resume();var o=this.ac.createMediaStreamSource(e),s=this.ac.createScriptProcessor(4096,1,1);this.stateCenter.audioStreamList[e.id]={mic:o,script:s},o.connect(s),s.connect(this.ac.destination),s.onaudioprocess=function(e){for(var i=e.inputBuffer.getChannelData(0),n=0,r=0;r<i.length;r++)n<i[r]&&(n=i[r]);t(n)},this.dataReport.uploadReport(n)}catch(e){i(e),this.dataReport.addMsgInfo(n,r.ZegoRTCLogEvent.kZegoTaskGetSoundLevel.error.kGetSoundLevelError),this.dataReport.uploadReport(n)}this.logger.info("zc.gsl call success")},e.prototype.stopSoundLevel=function(e){this.logger.info("zc.ssl call");var t=this.stateCenter.getReportSeq();this.dataReport.newReport(t,r.ZegoRTCLogEvent.kZegoTaskStopSoundLevel);var i=this.stateCenter.audioStreamList[e.id];i.mic.disconnect(),i.script.disconnect(),delete this.stateCenter.audioStreamList[e.id],this.dataReport.uploadReport(t)},e.prototype._preloadEffect=function(e,t,i,n){var r=this,o=new XMLHttpRequest;o.open("GET",i,!0),o.responseType="arraybuffer",o.onload=function(){if(200==o.status||304==o.status){var i=o.response;e.decodeAudioData(i,(function(e){r.logger.info("zc.pe.0 effect preload success"),r.stateCenter.audioEffectBuffer[t]=e,n&&n()}),(function(e){r.logger.error("zc.pe.0 effect preload fail "+e),n&&n(e)}))}else{var s=o.statusText;r.logger.error("zc.pe.0 effect preload fail "+s),n&&n(s)}},o.send()},e.prototype._playEffect=function(e,t,i){var n=this.stateCenter.audioEffectBuffer[e.effectID],r=this.streamCenter.getPublisher(e.streamID);r?n?r.playEffect(e,n,t,i):this.logger.error("zc.pe.1 no audio buffer found"):this.logger.error("zc.pe.1 publisher doesn't exist")},e.prototype._pauseEffect=function(e,t){var i=this.streamCenter.getPublisher(e);return i?i.pauseEffect(t):(this.logger.error("zc.pe.2 publisher doesn't exist"),!1)},e.prototype._resumeEffect=function(e,t){var i=this.streamCenter.getPublisher(e);return i?i.resumeEffect(t):(this.logger.error("zc.re.0 publisher doesn't exist"),!1)},e.prototype._stopEffect=function(e,t){var i=this.streamCenter.getPublisher(e);return i?i.stopEffect(t):(this.logger.error("zc.re.0 publisher doesn't exist"),!1)},e.prototype._setMixingAudioVolume=function(e,t,i){var n=this.streamCenter.getPublisher(e);return n?n.setMixingAudioVolume(t/100,i):(this.logger.error("zc.sma.2 publisher doesn't exist"),!1)},e.prototype._startMixingAudio=function(e,t){var i=this.streamCenter.getPublisher(e);return i?i.startMixingAudio(t):(this.logger.error("zc.sma.0 publisher doesn't exist"),!1)},e.prototype._stopMixingAudio=function(e,t){var i=this.streamCenter.getPublisher(e);return i?i.stopMixingAudio(t):(this.logger.error("zc.sma.1 publisher doesn't exist"),!1)},e.prototype._mixingBuffer=function(e,t,i,n){var r=this.streamCenter.getPublisher(e);r?i instanceof ArrayBuffer?r.mixingBuffer(t,i,n):this.logger.error("zc.mb.0 array buffer not found"):this.logger.error("zc.mb.0 publisher doesn't exist")},e.prototype._stopMixingBuffer=function(e,t){var i=this.streamCenter.getPublisher(e);return i?i.stopMixingBuffer(t):(this.logger.error("zc.sma.1 publisher doesn't exist"),!1)},e}();t.AudioMixModule=o},6214:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publisher=void 0;var n=i(2523),r=i(4194);t.publisher={playEffect:function(e,t,i,o){if(this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+""+this.streamId+" call"),this.effectList.find((function(i){return i.effectID==e.effectID&&i.audioBuffer==t})))this.logger.warn(n.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+""+this.streamId+" effect alreadly exist ");else{this.streamCenter.soundLevelDelegate&&this.stopSoundLevel();var s=new r.AudioMix(this.logger,this.stateCenter,this.ac,this.mediaEleSources);s.localStream=this.localStream,s.peerConnection=this.peerConnection,s.audioBuffer=t,this.effectList.push({audioMix:s,effectID:e.effectID,audioBuffer:t}),s.playEffect(e.playTime,e.loop,!1,i,o),this.streamCenter.soundLevelDelegate&&this.startSoundLevel(),this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+""+this.streamId+" play effect "+e.effectID+" success")}},pauseEffect:function(e){var t=this.effectList.find((function(t){return t.effectID==e}));if(t)this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),t.audioMix.pauseEffect(),this.streamCenter.soundLevelDelegate&&this.startSoundLevel(),this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_PAUSE_EFFECT+" "+this.streamId+" pause "+e+" success");else{if(void 0!==e)return this.logger.error(n.ZEGO_WEBRTC_ACTION.PUBLISHER_PAUSE_EFFECT+" "+this.streamId+" no effect ID found"),!1;this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),this.effectList.forEach((function(e){return e.audioMix.pauseEffect()})),this.streamCenter.soundLevelDelegate&&this.startSoundLevel()}return!0},resumeEffect:function(e){var t=this.effectList.find((function(t){return t.effectID==e}));if(t)this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),t.audioMix.resumeEffect(),this.streamCenter.soundLevelDelegate&&this.startSoundLevel(),this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_RESUME_EFFECT+" "+this.streamId+" resume"+e+" success");else{if(void 0!==e)return this.logger.error(n.ZEGO_WEBRTC_ACTION.PUBLISHER_RESUME_EFFECT+" "+this.streamId+" no effect ID found"),!1;this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),this.effectList.forEach((function(e){return e.audioMix.resumeEffect()})),this.streamCenter.soundLevelDelegate&&this.startSoundLevel()}return!1},stopEffect:function(e){var t=this.effectList.find((function(t){return t.effectID==e}));if(t)this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),t.audioMix.stopMixingAudio(),this.effectList.splice(this.effectList.indexOf(t),1),this.streamCenter.soundLevelDelegate&&this.startSoundLevel(),this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_EFFECT+" "+this.streamId+" pause "+e+" success");else{if(void 0!==e)return this.logger.error(n.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_EFFECT+" "+this.streamId+" no effect ID found"),!1;this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),this.effectList.forEach((function(e){return e.audioMix.stopMixingAudio()})),this.effectList=[],this.streamCenter.soundLevelDelegate&&this.startSoundLevel()}return!0},setEffectVolume:function(e,t){var i=this.effectList.find((function(e){return e.effectID==t}));if(i)i.audioMix.setMixingAudioVolume(e),this.logger.info("zp.sev.0 "+this.streamId+" set volume "+t+" success");else{if(void 0!==t)return this.logger.error("zp.sev.0 "+this.streamId+" no effect ID found"),!1;this.effectList.forEach((function(t){return t.audioMix.setMixingAudioVolume(e)}))}return!0},startMixingAudio:function(e){var t=this;return this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" "+this.streamId+" call"),this.localStream?(this.micTrack||(this.micTrack=this.localStream.getAudioTracks().length>0?this.localStream.getAudioTracks()[0]:null),e.forEach((function(e){if(t.audioMixList.find((function(t){return t.media==e})))t.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" "+t.streamId+" mix audio already exist");else{t.streamCenter.soundLevelDelegate&&t.stopSoundLevel();var i=new r.AudioMix(t.logger,t.stateCenter,t.ac,t.mediaEleSources);i.localStream=t.localStream,i.peerConnection=t.peerConnection,t.audioMixList.push({audioMix:i,media:e}),i.startMixingAudio(e),t.streamCenter.soundLevelDelegate&&t.startSoundLevel()}})),!0):(this.logger.error(n.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" localStream not found"),!1)},stopMixingAudio:function(e){var t=this;return this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_MIXING_AUDIO+" "+this.streamId+" call"),e?e.forEach((function(e){for(var i=0;i<t.audioMixList.length;i++)if(t.audioMixList[i].media==e){t.audioMixList[i].audioMix.stopMixingAudio()&&t.audioMixList.splice(i--,1);break}})):(this.audioMixList.forEach((function(e){return e.audioMix.stopMixingAudio()})),this.audioMixList=[]),!0},mixingBuffer:function(e,t,i){var o=this;if(this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_MIXING_BUFFER+" "+this.streamId+" call"),this.micTrack||(this.micTrack=this.localStream.getAudioTracks().length>0?this.localStream.getAudioTracks()[0]:null),this.arrayBufferMap[e])this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),this.arrayBufferMap[e].mixingBuffer(t,(function(){o.streamCenter.soundLevelDelegate&&o.startSoundLevel(),i&&i()}));else{this.streamCenter.soundLevelDelegate&&this.stopSoundLevel();var s=new r.AudioMix(this.logger,this.stateCenter,this.ac,this.mediaEleSources);s.localStream=this.localStream,s.peerConnection=this.peerConnection,this.arrayBufferMap[e]=s,s.mixingBuffer(t,(function(){o.streamCenter.soundLevelDelegate&&o.startSoundLevel(),i&&i()}))}},stopMixingBuffer:function(e){if(e&&this.arrayBufferMap[e])return this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),this.arrayBufferMap[e].stopMingBuffer(),delete this.arrayBufferMap[e],this.streamCenter.soundLevelDelegate&&this.startSoundLevel(),!0;if(void 0===e){for(var t in this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),this.arrayBufferMap)this.arrayBufferMap[t].stopMingBuffer();return this.streamCenter.soundLevelDelegate&&this.startSoundLevel(),!0}return this.logger.warn(n.ZEGO_WEBRTC_ACTION.PUBLISHER_MIXING_BUFFER+" "+this.streamId+" arrayBuffer no found"),!1},setMixingAudioVolume:function(e,t){this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" "+this.streamId+" call");var i=this.audioMixList.find((function(e){return e.media===t}));return i?(i.audioMix.setMixingAudioVolume(e),this.logger.info(n.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" "+this.streamId+" call success"),!0):(this.logger.error(n.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" "+this.streamId+" audio is not mixing"),!1)}}},4853:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={GET_SOUND_LEVEL_FAIL:{code:1000019,message:"get sound level error"},PUBLISHER_DECODE_AUDIO_FAIL:{code:1103057,message:"decode audio data fail"}}},7526:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6459),r=i(6214);t.default={type:"AudioMix",install:function(e,t){for(var i in Object.defineProperty(e.prototype,"initAudioMix",{value:function(){this.audioMixModule=new n.AudioMixModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.ac)}}),r.publisher)Object.defineProperty(t.prototype,i,{value:r.publisher[i],writable:!1})}}},4234:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTCLogEvent=void 0;var n=i(4853);t.ZegoRTCLogEvent={kZegoTaskGetSoundLevel:{event:"/sdk/get_sound_level",error:{kGetSoundLevelError:n.errorCodeList.GET_SOUND_LEVEL_FAIL}},kZegoTaskStopSoundLevel:"/sdk/stop_sound_level"}},4897:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataChannel=void 0;var n=i(8835);t.DataChannel={type:"DataChannel",install:function(e){Object.defineProperty(e.prototype,"createRealTimeSequentialDataManager",{value:function(e){this.enableDataChannel(!0);var t=this.stateCenter.getRoomByRoomID(e);return t?t.dataChannelManager?null:(t.dataChannelManager=new n.ZegoRealTimeSequentialDataManager(this,e),t.dataChannelManager):(this.logger.error("zc.crsdm room no exist"),null)},writable:!1}),Object.defineProperty(e.prototype,"destroyRealTimeSequentialDataManager",{value:function(e){var t=this.stateCenter.roomList.find((function(t){return t.dataChannelManager==e}));t&&(e.dataChannelManager.reset(),t.dataChannelManager=null)},writable:!1})}}},3504:function(e,t){"use strict";var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataChannelListener=void 0;var r=function(){function e(e,t){this.zegoWebRTC=e,this.roomID=t,this.pubDataChannelList=[],this.subDataChannelList=[],this.listenerList={receiveRealTimeSequentialData:[]},this.logger=e.logger}return e.prototype.startBroadcasting=function(e,t){return i(this,void 0,void 0,(function(){var t,i,r,o;return n(this,(function(n){switch(n.label){case 0:return this.logger.info("dc.sb.0 call"),this.pubDataChannelList.includes(e)?(this.logger.error("dc.sb.0 datachannel already exist"),[2,!1]):(t=this.zegoWebRTC.streamCenter.publisherList[e])&&t.publisher.dataChannel?(this.pubDataChannelList.push(e),[2,!0]):t&&!t.publisher.dataChannel?(this.logger.error("dc.sb.0 publish datachannel no exist, try other stream ID"),[2,!1]):this.broadcastStream?[3,2]:(i=document.createElement("canvas"),r=this,[4,this.zegoWebRTC.createStream({custom:{source:i}})]);case 1:r.broadcastStream=n.sent(),n.label=2;case 2:return(o=this.zegoWebRTC.startPublishingStream(e,this.broadcastStream,{roomID:this.roomID},!0))&&this.pubDataChannelList.push(e),this.logger.info("dc.sb.0 end"),[2,o]}}))}))},e.prototype.stopBroadcasting=function(e){this.logger.info("dc.sb.1 call"),this.pubDataChannelList=this.pubDataChannelList.filter((function(t){return t!==e}));var t=this.zegoWebRTC.streamCenter.publisherList[e];return t?(t.room.roomID==this.roomID&&t.isDataChannel&&this.zegoWebRTC.stopPublishingStream(e),this.logger.info("dc.sb.1 end"),!0):(this.logger.error("dc.sb.1 datachannel no found"),!1)},e.prototype.sendRealTimeSequentialData=function(e,t){if(!t instanceof ArrayBuffer)return this.logger.error("dc.srsd data type wrong"),!1;var i=this.zegoWebRTC.streamCenter.publisherList[e];return i&&this.pubDataChannelList.includes(e)?this.sendBCMessage(i.publisher,t):(this.logger.error("dc.srsd datachannel no found"),!1)},e.prototype.sendBCMessage=function(e,t){var i;if(!e.dataChannelState)return!1;for(var n=new Uint8Array(t),r=0,o=t.byteLength,s=e.send_seq,a=0,c=(new Date).getTime(),l=0;o>0;){o>1151?l=1141:(l=o,a=1);var u=new Uint8Array(l+10);u[0]=1,u[1]=a,u[2]=e.send_seq>>8&255,u[3]=255&e.send_seq,u[4]=s>>8&255,u[5]=255&s,u[6]=c>>24&255,u[7]=c>>16&255,u[8]=c>>8&255,u[9]=255&c;for(var d=0;d<l;d++)u[d+10]=n[d+r];o-=l,r+=l,e.send_seq++,e.send_seq>=65536&&(e.send_seq=0),null===(i=e.dataChannel)||void 0===i||i.send(u)}return!0},e.prototype.startSubscribing=function(e,t){var r,o;return i(this,void 0,void 0,(function(){var t,i;return n(this,(function(n){switch(n.label){case 0:return this.logger.info("dc.ss.0 call"),this.subDataChannelList.includes(e)?(this.logger.error("dc.ss.0 datachannel already exist"),[2,!1]):(t=this.zegoWebRTC.streamCenter.playerList[e])?[3,2]:[4,this.zegoWebRTC.startPlayingStream(e,void 0,!0)];case 1:n.sent(),t=this.zegoWebRTC.streamCenter.playerList[e],n.label=2;case 2:return(i=t.player).dataChannel?(!(null===(r=i.onDataChannelList)||void 0===r?void 0:r.includes(this.onReceivedDataChannel.bind(this)))&&(null===(o=i.onDataChannelList)||void 0===o||o.push(this.onReceivedDataChannel.bind(this))),this.subDataChannelList.push(e),this.logger.info("dc.ss.0 end"),[2,!0]):(this.logger.error("dc.ss.0 datachannel no exist, try other stream ID"),[2,!1])}}))}))},e.prototype.stopSubscribing=function(e){this.logger.info("dc.ss.1 call"),this.subDataChannelList=this.subDataChannelList.filter((function(t){return t!==e}));var t=this.zegoWebRTC.streamCenter.playerList[e];return t?(t.room.roomID==this.roomID&&t.isDataChannel&&this.zegoWebRTC.stopPlayingStream(e),this.logger.info("dc.ss.1 end"),!0):(this.logger.error("dc.ss.1 datachannel no subscribe"),!1)},e.prototype.on=function(e,t){this.bindListener(e,t)},e.prototype.off=function(e,t){this.deleteListener(e,t)},e.prototype.bindListener=function(e,t){return this.listenerList[e]?"function"!=typeof t?(this.logger.error("zc.o.0 listener callBack must be funciton"),!1):(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0):(this.logger.error("dc.o.0 event "+e+" no found"),!1)},e.prototype.deleteListener=function(e,t){if(!this.listenerList[e])return this.logger.error("dc.o.1 listener no found"),!1;var i=this.listenerList[e];return t?i.splice(i.indexOf(t),1):this.listenerList[e]=[],!0},e.prototype.actionListener=function(e){for(var t=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.listenerList[e]&&this.listenerList[e].forEach((function(n){try{setTimeout((function(){n.apply(void 0,i)}),0)}catch(i){t.logger.error("dc.al "+e+" "+i)}}))},e.prototype.onReceivedDataChannel=function(e,t,i){this.actionListener("receiveRealTimeSequentialData",e,t,i)},e.prototype.reset=function(){var e=this;for(var t in this.logger.info("dc.rs call"),this.pubDataChannelList.forEach((function(t){var i=e.zegoWebRTC.streamCenter.publisherList[t];i&&i.room.roomID==e.roomID&&i.isDataChannel&&e.zegoWebRTC.stopPublishingStream(t)})),this.subDataChannelList.forEach((function(t){var i=e.zegoWebRTC.streamCenter.playerList[t];i&&i.room.roomID==e.roomID&&i.isDataChannel&&e.zegoWebRTC.stopPlayingStream(t)})),this.listenerList)this.listenerList[t]=[];this.broadcastStream&&this.zegoWebRTC.destroyStream(this.broadcastStream),this.broadcastStream=void 0,this.logger.info("dc.rs end")},e}();t.DataChannelListener=r},5906:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.streamHandler=t.zegoWebRTC=void 0;var n=i(817),r=i(6145),o="2.13.0",s=1e4,a={},c="addMsgInfo";function l(e){var t,i,r,o,a="",c=n.errorCodeList;return e.errorCode<2e9&&e.errorCode>1e9?(r={1:"MIXER_START_REQUEST_ERROR",2:"MIXER_START_REQUEST_ERROR",3:"MIXER_AUTHENTICATION_FAILED",150:"MIXER_INPUT_STREAM_NOT_EXISTS",151:"MIXER_START_REQUEST_ERROR",152:"MIXER_STOP_REQUEST_ERROR",153:"MIXER_INPUT_PARAMETERS_ERROR",154:"MIXER_EXCEED_MAX_OUTPUT_COUNT",155:"MIXER_INPUT_PARAMETERS_ERROR",156:"MIXER_VIDEO_CONFIG_INVALID",157:"MIXER_NO_SERVICES",158:"MIXER_EXCEED_MAX_INPUT_COUNT",159:"MIXER_START_REQUEST_ERROR",160:"MIXER_NOT_OWNER_STOPMIXER",170:"MIXER_WATERMARK_PARAMETERS_ERROR",171:"MIXER_WATERMARK_NULL",175:"MIXER_REPEAT_INPUT",190:"MIXER_START_REQUEST_ERROR"},o="MIXER_INNER_ERROR",(i=e.errorCode-s)>1e9&&r[i-1e9]&&(o=r[i-1e9]),t=c[a=o]):e.errorCode<1e6&&(t=this.stateCenter.decodeServerError(e.errorCode,e.extendedData),a=this.stateCenter.getLiveRoomError(e.errorCode)),{reportErr:t,actualError:c[a]}}t.zegoWebRTC={startMixerTask:function(e){var t=this;return new Promise((function(i,n){var o=t.stateCenter.getReportSeq();t.dataReport.newReport(o,r.ZegoRTCLogEvent.kZegoTaskMixStart.event),t.stateCenter.logReportCallback("kZegoTaskMixStart"+e.taskID,t.dataReport,o,t.stateCenter.reportList);var s={errorCode:1005027,extendedData:"mix stream input parameters are wrong"};if(null==e?void 0:e.inputList.find((function(e){return(void 0===e.streamID||null===e.streamID)&&(s.extendedData=s.extendedData+". streamID should be of string type",!0)})))return t.dataReport.addMsgInfo(o,s),t.dataReport.uploadReport(o),t.stateCenter.unregisterCallback("kZegoTaskMixStart"+e.taskID,t.stateCenter.reportList),void n(s);e.outputConfig&&e.outputConfig.outputFps&&(e.outputConfig.outputFPS=e.outputConfig.outputFps);var a=function(i){var r=l(i),s=r.reportErr,a=r.actualError;s?t.dataReport.addMsgInfo(o,s):t.dataReport.addMsgInfo(o,i),t.dataReport.uploadReport(o),t.stateCenter.unregisterCallback("kZegoTaskMixStart"+e.taskID,t.stateCenter.reportList),a&&(i.errorCode=null==a?void 0:a.code,i.extendedData=(null==a?void 0:a.message)||""),n(i)},c=t.stateCenter.roomList[0];c?c.streamHandler.updateMixStream(e,(function(n){t.dataReport.uploadReport(o),t.stateCenter.unregisterCallback("kZegoTaskMixStart"+e.taskID,t.stateCenter.reportList),i(n)}),a):a({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kNoLoginError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kNoLoginError.message})}))},setMixerTaskConfig:function(e){var t=this;return new Promise((function(i,n){var o=t.stateCenter.getReportSeq();t.dataReport.newReport(o,r.ZegoRTCLogEvent.kZegoTaskMixConfig.event),t.stateCenter.logReportCallback("kZegoTaskMixConfig",t.dataReport,o,t.stateCenter.reportList);var s=t.stateCenter.roomList[0];s?s.streamHandler.setMixerTaskConfig(e).then((function(e){t.dataReport.uploadReport(o),t.stateCenter.unregisterCallback("kZegoTaskMixConfig",t.stateCenter.reportList),i(e)})).catch((function(e){t.dataReport.addMsgInfo(o,e),t.dataReport.uploadReport(o),t.stateCenter.unregisterCallback("kZegoTaskMixConfig",t.stateCenter.reportList),n(e)})):n({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kNoLoginError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kNoLoginError.message})}))},stopMixerTask:function(e){var t=this;return new Promise((function(i,n){var o=t.stateCenter.getReportSeq();if(t.dataReport.newReport(o,r.ZegoRTCLogEvent.kZegoTaskMixStop.event),!e||"string"!=typeof e||e.length>256||!t.stateCenter.checkIllegalCharacters(e))return t.logger.error("zb.rh.lg taskID must be string less 256"),t.dataReport.addMsgInfo(o,{error:r.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.code,message:r.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.message+" param taskID error"}),t.dataReport.uploadReport(o),void n({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.message+" param taskID error"});var s=function(e){var i=l(e),r=i.reportErr,s=i.actualError;r?t.dataReport.addMsgInfo(o,r):t.dataReport.addMsgInfo(o,e),t.dataReport.uploadReport(o),s&&(e.errorCode=null==s?void 0:s.code,e.extendedData=(null==s?void 0:s.message)||""),n(e)},a=t.stateCenter.roomList[0];a?a.streamHandler.stopMixStream(e,(function(e){t.dataReport.uploadReport(o),i(e)}),s):s({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStop.error.kNoLoginError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStop.error.kNoLoginError.message})}))}},t.streamHandler={setMixerTaskConfig:function(e){var t=this;return new Promise((function(i,n){var o,s={},l={};if(e&&e.videoCodec){var u=e.videoCodec.toLowerCase();if(-1==["vp8","h264"].indexOf(u))return t.logger.error("zb.sh.ums param videoCode error"),n({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kVideoConfigInvalidError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kVideoConfigInvalidError.message}),!1;s.videoCodec=u,l.video_codec=u}if(e.backgroundColor){if(!t.stateCenter.checkInteger(e.backgroundColor))return t.logger.error("zb.sh.ums param backgroundColor must be integer number"),n({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;s.backgroundColor=e.backgroundColor,l.background_color=e.backgroundColor}if(e.backgroundImage){if("string"!=typeof e.backgroundImage)return t.logger.error("zb.sh.ums param outputBgImage error"),n({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;if(!e.backgroundImage.startsWith("preset-id://")||!e.backgroundImage.endsWith(".jpg")&&!e.backgroundImage.endsWith(".png"))return t.logger.error("zb.sh.ums illegal input background image URL"),n({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kBackgroundImageUrlInvalidError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kBackgroundImageUrlInvalidError.message}),!1;s.backgroundImage=e.backgroundImage,l.background_image=e.backgroundImage}e.waterMark&&(s.waterMark=e.waterMark,l.water_mark=e.waterMark),e.extraParams&&(s.extraParams||(s.extraParams=[]),(o=s.extraParams).push.apply(o,e.extraParams)),s=a,t.stateCenter.actionSuccessCallback("kZegoTaskMixConfig",t.stateCenter.reportList)&&t.stateCenter.actionSuccessCallback("kZegoTaskMixConfig",t.stateCenter.reportList)(c,void 0,{config:r.ZegoRTCLogEvent.kZegoTaskMixConfig.config(l)}),i({errorCode:0,extendedData:""})}))},stopMixStream:function(e,t,i,a,c){var l=this;this.logger.info("zb.sh.sms call");var u={id_name:this.stateCenter.idName,live_channel:this.roomID,appid:this.stateCenter.appid,version:o};"string"==typeof e&&(u.task_id=e),null!=a?this.stateCenter.testEnvironment?u.stream_id="zegotest-"+this.stateCenter.appid+"-"+a:u.stream_id=a:null!=c&&(u.mixurl=c);var d={channel:"zeus",cmd:"stop_mix",req_body:JSON.stringify(u)};return this.sendBizChannelRequest(d,(function(){t&&t({errorCode:0})}),(function(e){var t;"number"==typeof e?i&&i({errorCode:l.stateCenter.getServerError(s+e).code,extendedData:""}):(l.logger.error("zb.sh.sms stop mix fail "+JSON.stringify(e)),t=e==n.errorCodeList.TIMEOUT?r.ZegoRTCLogEvent.kZegoTaskMixStop.error.kRequestError:r.ZegoRTCLogEvent.kZegoTaskMixStop.error.kInternalError,i&&i({errorCode:t.code,extendedData:t.message}))})),!0},updateMixStream:function(e,t,i){var l,u=this;if(this.logger.info("zb.sh.ums call"),!e.noTaskID&&!e.taskID)return this.logger.error("zb.sh.ums no taskId found"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDNullError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDNullError.message}),!1;if(!e.noTaskID&&"string"!=typeof e.taskID)return this.logger.error("zb.rh.lg taskId must be string"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.noTaskID&&e.taskID.length>256)return this.logger.error("zb.sh.ums taskId is too long"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDToLongError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDToLongError.message}),!1;if(!e.noTaskID&&!this.stateCenter.checkIllegalCharacters(e.taskID))return this.logger.error("zb.sh.ums task ID contains illegal characters"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDInvalidCharacterError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDInvalidCharacterError.message}),!1;if(!e.inputList||0==e.inputList.length)return this.logger.error("zb.sh.ums input list wrong"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputListNullError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputListNullError.message}),!1;e.inputList.forEach((function(e){"AUDIO"===e.contentType&&(!e.layout&&(e.layout={top:0,left:0,bottom:0,right:0}),e.layout.top=0,e.layout.left=0,e.layout.bottom=1,e.layout.right=1)}));for(var d=e.inputList.every((function(e){return"AUDIO"===e.contentType})),h=0;h<e.inputList.length;h++){var p=e.inputList[h],f={errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message};if("object"!=typeof p.layout)return this.logger.error("zb.sh.ums input layout must be object"),i(f),!1;if(!(this.stateCenter.checkInteger(p.layout.top,!1)&&this.stateCenter.checkInteger(p.layout.bottom,!1)&&this.stateCenter.checkInteger(p.layout.left,!1)&&this.stateCenter.checkInteger(p.layout.right,!1)))return this.logger.error("zb.sh.ums top、left、bottom、right must be integer number"),i(f),!1;if(void 0!==p.renderMode&&![0,1].includes(p.renderMode))return this.logger.error("zb.sh.ums render_mode is wrong"),i(f),!1}if(!e.outputList||0==e.outputList.length)return this.logger.error("zb.sh.ums no output list found"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputListNullError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputListNullError.message}),!1;if(e.outputList.some((function(e){return"string"==typeof e&&!u.stateCenter.isUrl(e)&&!u.stateCenter.checkIllegalCharacters(e)||"object"==typeof e&&e.target&&!u.stateCenter.isUrl(e.target)&&!u.stateCenter.checkIllegalCharacters(e.target)})))return this.logger.error("zb.sh.ums stream output target is incorrect"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.message}),!1;if(!(d||e.outputConfig&&"object"==typeof e.outputConfig))return this.logger.error("zb.sh.ums no output config found"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputNoTargetError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputNoTargetError.message}),!1;if(d&&(void 0===e.outputConfig&&(e.outputConfig={outputBitrate:0,outputFPS:0,outputWidth:0,outputHeight:0}),e.outputConfig.outputBitrate=.001,e.outputConfig.outputFPS=1,e.outputConfig.outputWidth=1,e.outputConfig.outputHeight=1),!(d||e.outputConfig.outputBitrate&&this.stateCenter.checkInteger(e.outputConfig.outputBitrate)))return this.logger.error("zb.sh.ums bitrate param is required and must be integer number"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.outputConfig.outputFPS||!this.stateCenter.checkInteger(e.outputConfig.outputFPS))return this.logger.error("zb.sh.ums fps param is required and must be integer number"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.outputConfig.outputWidth||!this.stateCenter.checkInteger(e.outputConfig.outputWidth))return this.logger.error("zb.sh.ums width param is required and must be integer number"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.outputConfig.outputHeight||!this.stateCenter.checkInteger(e.outputConfig.outputHeight))return this.logger.error("zb.sh.ums height param is required and must be integer number"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(void 0!==e.outputConfig.outputAudioCodecID&&!this.stateCenter.checkInteger(e.outputConfig.outputAudioCodecID,!1))return this.logger.error("zb.sh.ums AudioCodecID param must be integer number"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(void 0!==e.outputConfig.outputAudioBitrate&&!this.stateCenter.checkInteger(e.outputConfig.outputAudioBitrate))return this.logger.error("zb.sh.ums AudioBitrate param must be integer number"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(void 0!==e.outputConfig.outputAudioChannels&&!this.stateCenter.checkInteger(e.outputConfig.outputAudioChannels,!1))return this.logger.error("zb.sh.ums AudioChannels param must be integer number"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;var g=0;e.outputConfig.singleStreamPassThrough&&"boolean"==typeof e.outputConfig.singleStreamPassThrough&&(g=e.outputConfig.singleStreamPassThrough?1:0);var m={task_id:e.taskID,id_name:this.stateCenter.idName,live_channel:this.roomID,appid:this.stateCenter.appid,version:o,bypass:g},_=a;_&&(_.videoCodec&&(m.extra_params=[{key:"video_encode",value:_.videoCodec}]),_.backgroundColor&&(m.output_bg_color=_.backgroundColor),_.backgroundImage&&(m.output_bg_image=_.backgroundImage),_.waterMark&&(m.watermark=_.waterMark),_.extraParams&&(!m.extra_params&&(m.extra_params=[]),(l=m.extra_params).push.apply(l,_.extraParams)));var v=[];for(h=0;h<e.inputList.length;h++){var E=e.inputList[h],A=E.streamID;this.stateCenter.testEnvironment&&(A="zegotest-"+this.stateCenter.appid+"-"+E.streamID),v.push({stream_id:A,content_control:"AUDIO"===E.contentType?1:0,rect:{layer:h,top:E.layout.top,left:E.layout.left,bottom:E.layout.bottom,right:E.layout.right},render_mode:E.renderMode})}m.MixInput=v,this.stateCenter.actionSuccessCallback("kZegoTaskMixStart"+e.taskID,this.stateCenter.reportList)&&this.stateCenter.actionSuccessCallback("kZegoTaskMixStart"+e.taskID,this.stateCenter.reportList)(c,void 0,{mix_stream_id:r.ZegoRTCLogEvent.kZegoTaskMixStart.mix_stream_id(e.taskID),stream_cnt:r.ZegoRTCLogEvent.kZegoTaskMixStart.stream_cnt(v.length),input_stream_list:r.ZegoRTCLogEvent.kZegoTaskMixStart.input_stream_list(v)});var y=[];e.outputList.forEach((function(t){var n={},o="";if("string"==typeof t)o=t;else{if("object"!=typeof t||!t.target)return u.logger.error("zb.sh.ums output target required"),i({errorCode:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.code,extendedData:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.message}),!1;o=t.target}o.startsWith("rtmp://")||o.startsWith("https://")&&o.endsWith(".flv")||o.startsWith("https://")&&o.endsWith(".m3u8")?n.mixurl=o:u.stateCenter.testEnvironment?n.stream_id="zegotest-"+u.stateCenter.appid+"-"+o:n.stream_id=o,n.bitrate=1e3*e.outputConfig.outputBitrate,n.fps=e.outputConfig.outputFPS,n.width=e.outputConfig.outputWidth,n.height=e.outputConfig.outputHeight,e.outputConfig.outputAudioCodecID&&(n.audio_enc_id=e.outputConfig.outputAudioCodecID),"vp8"===_.videoCodec?n.audio_enc_id=3:"h264"===_.videoCodec&&(n.audio_enc_id=0),e.outputConfig.outputAudioBitrate&&(n.audio_bitrate=1e3*e.outputConfig.outputAudioBitrate),e.outputConfig.outputAudioChannels&&(n.audio_channel_cnt=e.outputConfig.outputAudioChannels),u.stateCenter.testEnvironment?n.testenv=1:n.testenv=0,y.push(n)})),m.MixOutput=y,this.stateCenter.actionSuccessCallback("kZegoTaskMixStart"+e.taskID,this.stateCenter.reportList)&&this.stateCenter.actionSuccessCallback("kZegoTaskMixStart"+e.taskID,this.stateCenter.reportList)(c,void 0,{output_target_list:r.ZegoRTCLogEvent.kZegoTaskMixStart.output_target_list(y)});var S={channel:"zeus",cmd:"start_mix",req_body:JSON.stringify(m)};return this.logger.debug("zb.sh.ums send command"),this.sendBizChannelRequest(S,(function(e,n,r){u.logger.debug("zb.sh.ums receive message");var o="zegotest-"+u.stateCenter.appid+"-";if(0!=r.length){for(var s=JSON.parse(r),a=[],c=0;c<s.play.length;c++){var l={rtmpURL:"",hlsURL:"",flvURL:""},d=s.play[c].stream_alias||"";u.stateCenter.testEnvironment&&d&&d.startsWith(o)&&(d=d.slice(o.length)),l.streamID=d,s.play[c].rtmp_url&&s.play[c].rtmp_url.length>0&&(l.rtmpURL=s.play[c].rtmp_url),s.play[c].hls_url&&s.play[c].hls_url.length>0&&(l.hlsURL=s.play[c].hls_url),s.play[c].hdl_url&&s.play[c].hdl_url.length>0&&(l.flvURL=s.play[c].hdl_url),a.push(l)}if(t){var h={mixerOutputList:a};t({errorCode:0,extendedData:JSON.stringify(h)})}}else i&&i({errorCode:u.stateCenter.getServerError(10001).code,extendedData:""})}),(function(e,t,o){if("number"==typeof e){u.logger.debug("zb.sh.ums error: "+e);var a=[];if(1000000150==e&&0!=o.length)for(var c=JSON.parse(o),l="zegotest-"+u.stateCenter.appid+"-",d=0;d<c.non_exist_streams.length;d++){var h=c.non_exist_streams[d];u.stateCenter.testEnvironment&&h.startsWith(l)?a.push(h.slice(l.length)):a.push(h)}i&&i({errorCode:u.stateCenter.getServerError(s+e).code,extendedData:""})}else{var p;u.logger.debug("zb.sh.ums error code "+e.code),p=e==n.errorCodeList.TIMEOUT?r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kRequestError:r.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError,i&&i({errorCode:p.code,extendedData:p.message})}})),!0}}},817:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},INPUT_PARAM:{code:1100001,message:"input param error."},TIMEOUT:{code:1100002,message:"network timeout."},MIXER_NO_SERVICES:{code:1005e3,message:"no mix stream service"},MIXER_TASK_ID_NULL:{code:1005001,message:"mixer task is null"},MIXER_TASK_ID_TOO_LONG:{code:1005002,message:"task ID is too long"},MIXER_TASK_ID_INVALID_CHARACTER:{code:1005003,message:"task ID contains illegal characters"},MIXER_NO_OUTPUT_TARGET:{code:1005005,message:"task configuration does not specify output"},MIXER_OUTPUT_TARGET_INVALID:{code:1005006,message:"stream output target is incorrect"},MIXER_START_REQUEST_ERROR:{code:1005010,message:"start mixer task fail, possibly due to network reasons"},MIXER_STOP_REQUEST_ERROR:{code:1005011,message:"stop mixer task fail, possibly due to network reasons"},MIXER_NOT_OWNER_STOP_MIXER:{code:1005012,message:" maxed task must be stopped by the start user of the task"},MIXER_INPUTLIST_NULL:{code:1005020,message:"Mixed stream task input list is null"},MIXER_OUTPUTLIST_NULL:{code:1005021,message:"Mixed stream task output list is null"},MIXER_VIDEO_CONFIG_INVALID:{code:1005023,message:"invalid mixed stream task video configuration"},MIXER_EXCEED_MAX_INPUT_COUNT:{code:1005025,message:"more than the maximum number of input streams"},MIXER_INPUT_STREAM_NOT_EXISTS:{code:1005026,message:"Input stream does not exist"},MIXER_EXCEED_MAX_OUTPUT_COUNT:{code:1005030,message:"more than the maximum number of output streams"},MIXER_AUTHENTICATION_FAILED:{code:1005050,message:"mixed stream authentication failed"},MIXER_WATERMARK_NULL:{code:1005061,mag:"input watermark is null"},MIXER_WATERMARK_PARAMETERS_ERROR:{code:1005062,message:"input watermark parameter is wrong"},MIXER_WATERMARK_URL_INVALID:{code:1005063,message:"illegal input watermark URL"},MIXER_BACKGROUND_IMAGE_URL_INVALID:{code:1005067,message:"illegal input background image URL"},MIXER_REPEAT_INPUT:{code:1005099,message:"mix stream input repeat"},MIXER_INNER_ERROR:{code:1005099,message:"mixer internal error"}}},577:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(5906);t.default={type:"MixStream",install:function(e,t){for(var i in n.zegoWebRTC)Object.defineProperty(e.prototype,i,{value:n.zegoWebRTC[i],writable:!1});for(var i in n.streamHandler)Object.defineProperty(t.prototype,i,{value:n.streamHandler[i],writable:!1})}}},6145:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTCLogEvent=void 0;var n=i(817),r=function(e){return e};t.ZegoRTCLogEvent={kZegoTaskMixStart:{event:"/mix/start_mix",error:{kParamError:n.errorCodeList.INPUT_PARAM,kTaskIDNullError:n.errorCodeList.MIXER_TASK_ID_NULL,kTaskIDToLongError:n.errorCodeList.MIXER_TASK_ID_TOO_LONG,kTaskIDInvalidCharacterError:n.errorCodeList.MIXER_TASK_ID_INVALID_CHARACTER,kInputListNullError:n.errorCodeList.MIXER_INPUTLIST_NULL,kOutputListNullError:n.errorCodeList.MIXER_OUTPUTLIST_NULL,kOutputTargetInvalidError:n.errorCodeList.MIXER_OUTPUT_TARGET_INVALID,kOutputNoTargetError:n.errorCodeList.MIXER_NO_OUTPUT_TARGET,kRequestError:n.errorCodeList.MIXER_START_REQUEST_ERROR,kInternalError:n.errorCodeList.MIXER_INNER_ERROR,kNoLoginError:n.errorCodeList.NOT_LOGIN},mix_stream_id:r,stream_cnt:r,input_stream_list:r,output_target_list:r},kZegoTaskMixStop:{event:"/mix/stop_mix",error:{kParamError:n.errorCodeList.INPUT_PARAM,kTaskIDNullError:n.errorCodeList.MIXER_TASK_ID_NULL,kRequestError:n.errorCodeList.MIXER_STOP_REQUEST_ERROR,kInternalError:n.errorCodeList.MIXER_INNER_ERROR,kNoLoginError:n.errorCodeList.NOT_LOGIN}},kZegoTaskMixConfig:{event:"/mix/config_mix",error:{kParamError:n.errorCodeList.INPUT_PARAM,kVideoConfigInvalidError:n.errorCodeList.MIXER_VIDEO_CONFIG_INVALID,kBackgroundImageUrlInvalidError:n.errorCodeList.MIXER_BACKGROUND_IMAGE_URL_INVALID,kNoLoginError:n.errorCodeList.NOT_LOGIN},config:r}}},2760:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(i(2730)),a=o(i(5947)),c=o(i(1646)),l=o(i(1576)),u=i(7803),d=i(1297),h=function(){function e(e){var t=this;this.isSpatial=!1,this.audioSourceList=[],this.speakingUserIdList=[],this._audioCtx=null,this.zegoRTC=e,this.zegoRTC.on("roomStreamUpdate",(function(e,i,n){var r=n.map((function(e){return e.streamID}));"DELETE"===i?t.speakingUserIdList=t.speakingUserIdList.filter((function(e){var i=!r.includes(e);if(!i){var n=t.audioSourceMap[e];n&&n.isPlaying&&n.stopPlayingAudio()}return i})):"ADD"===i&&(t.speakingUserIdList=t.speakingUserIdList.concat(r),n.forEach((function(e){if(!t.audioSourceMap[e.streamID]){var i=t.getStreamInfo(e.extraInfo),n=i.teamID,r=i.sendMode,o=new s.default({userID:e.streamID,teamID:n,sendMode:r},{audioCtx:t.audioCtx,zegoRTC:t.zegoRTC,isSpatial:t.isSpatial,maxDistance:t.rangeListener.recvRange});t.audioSourceList.push(o),t.playStreamHandler.handlePlayAudioTask()}}))),t.playStreamHandler.setAudioSourceList(t.speakingAudioSourceList)})),this.zegoRTC.on("playerStateUpdate",(function(e){var i=t.audioSourceMap[e.streamID];i&&("NO_PLAY"===e.state?i.isPlaying=!1:i.isPlaying=!0)})),this.zegoRTC.on("streamExtraInfoUpdate",(function(e,i){i.forEach((function(e){var i=t.audioSourceMap[e.streamID];if(i){var n=t.getStreamInfo(e.extraInfo),r=n.teamID,o=n.sendMode;r!==i.teamID&&(i.teamID=r,t.enableSpatializer(t.isSpatial)),void 0!==o&&(i.sendMode=o),t.playStreamHandler.handlePlayAudioTask()}}))})),this.zegoRTC.RTM._on("_roomStateUpdate",(function(e,i){"CONNECTED"===i?(t.roomID=e,t.rangeListener.userID=t.zegoRTC.RTM.getUserID()):"DISCONNECTED"===i&&(t.roomID=void 0,t.rangeListener.reset(),t.audioSourceList=[])}));var i=window.AudioContext||window.webkitAudioContext;this._audioCtx=this.zegoRTC&&this.zegoRTC.ac||new i,this.rangeListener=a.default.getInstance(this.audioCtx,this.zegoRTC),this.playStreamHandler=c.default.getInstance(this.rangeListener),this.eventManager=l.default.getInstance()}return Object.defineProperty(e.prototype,"audioSourceMap",{get:function(){return this.audioSourceList.reduce((function(e,t){return t.userID&&(e[t.userID]=t),e}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speakingAudioSourceList",{get:function(){var e=this;return this.audioSourceList.filter((function(t){return!!e.speakingUserIdList.includes(t.userID)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playingAudioSourceList",{get:function(){return this.audioSourceList.filter((function(e){return e.isPlaying}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioCtx",{get:function(){if(!this._audioCtx){var e=window.AudioContext||window.webkitAudioContext;this._audioCtx=new e}return this._audioCtx},enumerable:!1,configurable:!0}),e.getInstance=function(t){return e.instance||(e.instance=new e(t)),e.instance},e.prototype.resumeAudioContext=function(){return n(this,void 0,void 0,(function(){var e=this;return r(this,(function(t){return[2,new Promise((function(t){e.audioCtx.onstatechange=function(){"running"===e.audioCtx.state&&t(!0)},e.audioCtx.suspend(),e.audioCtx.resume(),setTimeout((function(){t(!1)}),3e3)}))]}))}))},e.prototype.getAudioContextState=function(){return this.audioCtx.state},e.prototype.getStreamInfo=function(e){var t=void 0,i=void 0;try{var n=JSON.parse(e);t=n.range_audio_team_id,[d.ZegoRangeAudioMode.World,d.ZegoRangeAudioMode.Team].includes(n.range_audio_mode)&&(i=n.range_audio_mode)}catch(e){}return{teamID:t,sendMode:i}},e.prototype.setAudioReceiveRange=function(e){if(!u.checkNumber(e))throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' requires to be type number.");if((e=Number(e))<0)throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' can not be less than 0.");this.rangeListener.recvRange=e,this.audioSourceList.forEach((function(t){t.setMaxDistance(e)}))},e.prototype.updateSelfPosition=function(e,t,i,n){var r=function(e){return"Failed to execute 'updateSelfPosition': Argument '"+e+"' requires an array of type number.\""};if(!u.checkCoordinate(e))throw new Error(r("position"));if(!u.checkCoordinate(t))throw new Error(r("axisForward"));if(!u.checkCoordinate(i))throw new Error(r("axisRight"));if(!u.checkCoordinate(n))throw new Error(r("axisUp"));this.rangeListener&&this.rangeListener.updateSelfPosition(e,t,n),this.playStreamHandler.setListener(this.rangeListener)},e.prototype.updateAudioSource=function(e,t){if(e=String(e),!u.checkCoordinate(t))throw new Error("Failed to execute 'updateAudioSource': Arguments 'position' must be an array of type number.");var i=this.audioSourceMap[e];i?i.setPosition(t):(i=new s.default({userID:e,position:t},{audioCtx:this.audioCtx,zegoRTC:this.zegoRTC,isSpatial:this.isSpatial,maxDistance:this.rangeListener.recvRange}),this.enableSpatializer(this.isSpatial),this.audioSourceList.push(i)),this.playStreamHandler.setAudioSourceList(this.speakingAudioSourceList)},e.prototype.enableMicrophone=function(e){if(void 0===e&&(e=!0),!this.rangeListener.userID)throw new Error("Enable mic failed. Please log in room first.");return e?this.rangeListener.startPublishingStream():this.rangeListener.stopPublishingStream()},e.prototype.enableSpeaker=function(e){if(void 0===e&&(e=!0),!this.roomID)throw new Error("Enable speaker failed. Please log in room first.");this.playStreamHandler.isEnable=e,e?(this.playStreamHandler.startPlayingAudioStream(),this.playStreamHandler.handlePlayAudioTask()):this.playStreamHandler.stopPlayingAudioStream()},e.prototype.enableSpatializer=function(e){var t=this;void 0===e&&(e=!0),this.isSpatial=!!e,this.audioSourceList.forEach((function(i){var n=!(![i.teamID,t.rangeListener.teamID].includes(void 0)&&t.rangeListener.teamID===i.teamID)&&e;i.enableSpatializer(n)})),e&&this.rangeListener.updateListenerEffect()},e.prototype.setRangeAudioTeamID=function(e){this.rangeListener.setTeamID(e),this.enableSpatializer(this.isSpatial),this.playStreamHandler.handlePlayAudioTask()},e.prototype.setRangeAudioMode=function(e){this.rangeListener.setSendMode(e),this.rangeListener.setRecvMode(e),this.playStreamHandler.handlePlayAudioTask()},e.prototype.on=function(e,t){return this.eventManager.addEventHandler(e,t)},e.prototype.off=function(e,t){return this.eventManager.removeEventHandler(e,t)},e}();t.default=h},2777:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RangeAudio=void 0;var n=i(3116);t.RangeAudio={type:"RangeAudio",install:function(e){Object.defineProperty(e.prototype,"createRangeAudioInstance",{value:function(){return this.rangeAudio||(this.rangeAudio=n.ZegoExpressRangeAudio.getInstance(this)),this.rangeAudio},writable:!1})}}},2730:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(1297),s=function(){function e(e,t){this.panner=null,this.isSpatial=!1,this.autoPlay=!0,this.position=null,this.stream=null,this.sourceNode=null,this.isPlaying=!1,this.distance=null,this.audioCtx=t.audioCtx,this.zegoRTC=t.zegoRTC,this.isSpatial=t.isSpatial,this.maxDistance=t.maxDistance||1e5,this.userID=e.userID,this.teamID=e.teamID,this.sendMode=void 0!==e.sendMode?e.sendMode:o.ZegoRangeAudioMode.World,e.position&&(this.position=e.position)}return Object.defineProperty(e.prototype,"audioWrapper",{get:function(){var e=document.getElementById("#zg-audio-source-wrapper");return e||((e=document.createElement("div")).setAttribute("id","zg-audio-source-wrapper"),document.body.appendChild(e)),e},enumerable:!1,configurable:!0}),e.prototype.createPanner=function(){var e=this.position||[0,0,0],t=this.maxDistance;return new PannerNode(this.audioCtx,{panningModel:"HRTF",distanceModel:"linear",refDistance:1,maxDistance:t,rolloffFactor:1,coneOuterGain:.4,positionX:e[1],positionY:e[0],positionZ:-e[0]})},e.prototype.startPlayingAudio=function(){return n(this,void 0,void 0,(function(){var e,t;return r(this,(function(i){switch(i.label){case 0:return(e=document.getElementById("zg-audio-source-"+this.userID))?[3,2]:((e=document.createElement("audio")).setAttribute("autoplay","autoplay"),e.setAttribute("id","zg-audio-source-"+this.userID),e.setAttribute("crossorigin","anonymous"),t=this,[4,this.zegoRTC.startPlayingStream(this.userID)]);case 1:t.stream=i.sent(),this.audioWrapper.appendChild(e),this.stream&&(e.srcObject=this.stream,this.sourceNode=this.audioCtx.createMediaStreamSource(this.stream)),this.panner||(this.panner=this.createPanner()),this.sourceNode&&this.enableSpatializer(this.isSpatial,!0),"suspended"===this.audioCtx.state&&this.audioCtx.resume(),i.label=2;case 2:return e&&e.parentNode&&e.parentNode.removeChild(e),[2]}}))}))},e.prototype.stopPlayingAudio=function(){this.isPlaying&&this.zegoRTC.stopPlayingStream(this.userID),this.stream=null,this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=null)},e.prototype.setPosition=function(e){this.position=e,this.panner&&(this.panner.positionX.value=e[1],this.panner.positionY.value=e[2],this.panner.positionZ.value=-e[0])},e.prototype.setMaxDistance=function(e){this.maxDistance=e,this.panner&&(this.panner.maxDistance=this.maxDistance)},e.prototype.getDistanceFromListener=function(e){var t=this.position,i=e.position;if(!i||!t)return null;var n=[t[0]-i[0],t[1]-i[1],t[2]-i[2]];return this.distance=Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)),this.distance},e.prototype.enableSpatializer=function(e,t){void 0===t&&(t=!1),(t||this.isSpatial!==e)&&(this.isSpatial=e,this.sourceNode&&(e&&this.panner?(this.sourceNode.disconnect(),this.sourceNode.connect(this.panner).connect(this.audioCtx.destination)):e||(this.sourceNode.disconnect(),this.sourceNode.connect(this.audioCtx.destination))))},e}();t.default=s},1576:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.handlerListMap={microphoneStateUpdate:[]}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.addEventHandler=function(e,t){if(!this.handlerListMap[e])return!1;if("function"!=typeof t)throw new Error("Params callBack is not a Function");return-1==this.handlerListMap[e].indexOf(t)&&this.handlerListMap[e].push(t),!0},e.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter((function(e){return e!==t})):[],!0)},e.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.handlerListMap[e]&&this.handlerListMap[e].forEach((function(i){try{setTimeout((function(){i.apply(void 0,t)}),0)}catch(t){console.error("dispatch "+e+" "+t)}}))},e}();t.default=i},1646:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1297),r=function(){function e(e){this.isEnable=!1,this.interval=3e3,this.timer=null,this.audioSourceList=[],this.hasChanged=!1,this.maxPlayingQuantity=20,this.rangeListener=e}return e.getInstance=function(t){return e.instance||(e.instance=new e(t)),e.instance},e.prototype.setListener=function(e){this.rangeListener=e,this.hasChanged=!0},e.prototype.setAudioSourceList=function(e){this.audioSourceList=e,this.hasChanged=!0},e.prototype.startPlayingAudioStream=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.playAudioTask()},e.prototype.playAudioTask=function(){var e=this;this.hasChanged&&(this.hasChanged=!1,this.handlePlayAudioTask()),this.timer=window.setTimeout((function(){e.playAudioTask()}),this.interval)},e.prototype.handlePlayAudioTask=function(){var e=this;if(this.isEnable){var t=this.getTeamAudioSourceGroup(),i=t.teamList,r=t.otherList,o=0;i.forEach((function(t){o<e.maxPlayingQuantity&&(t.isPlaying||t.startPlayingAudio(),o++)}));var s=this.rangeListener.recvMode===n.ZegoRangeAudioMode.World;s&&(r.forEach((function(t){t.distance=t.getDistanceFromListener(e.rangeListener)})),r.sort((function(e,t){return null===e.distance?1:null===t.distance||e.distance<t.distance?-1:e.distance>t.distance?1:0}))),r.forEach((function(t){s&&o<e.maxPlayingQuantity&&t.sendMode!==n.ZegoRangeAudioMode.Team&&null!==t.distance&&(null===e.rangeListener.recvRange||t.distance<=e.rangeListener.recvRange)?(t.isPlaying||t.startPlayingAudio(),o++):t.stopPlayingAudio()}))}else this.stopPlayingAudioStream()},e.prototype.getTeamAudioSourceGroup=function(){var e=this,t=[],i=[];return this.audioSourceList.forEach((function(n){[n.teamID,e.rangeListener.teamID].includes(void 0)||n.teamID!==e.rangeListener.teamID?i.push(n):t.push(n)})),{teamList:t,otherList:i}},e.prototype.stopPlayingAudioStream=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.audioSourceList.forEach((function(e){e.stopPlayingAudio()}))},e}();t.default=r},5947:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(1297),o=n(i(1576)),s=function(){function e(e,t){var i=this;this.recvMode=r.ZegoRangeAudioMode.World,this.sendMode=r.ZegoRangeAudioMode.World,this.recvRange=null,this.position=null,this.forwardAxis=[1,0,0],this.upAxis=[0,0,1],this.audioStream=null,this.isPublishing=!1,this.zegoRTC=t,this.audioCtx=e,this.audioListener=this.audioCtx.listener,this.eventHandler=o.default.getInstance(),this.zegoRTC.on("publisherStateUpdate",(function(e){var t=e.streamID,n=e.state,o=e.errorCode,s=e.extendedData;t===i.userID&&("NO_PUBLISH"===n?(i.isPublishing=!1,i.stopPublishingStream()):i.isPublishing=!0);var a={NO_PUBLISH:r.ZegoRangeAudioMicrophoneState.Off,PUBLISH_REQUESTING:r.ZegoRangeAudioMicrophoneState.TurningOn,PUBLISHING:r.ZegoRangeAudioMicrophoneState.On};i.eventHandler.emit("microphoneStateUpdate",a[n],o,s)}))}return e.getInstance=function(t,i){return e.instance||(e.instance=new e(t,i)),e.instance},e.prototype.updateSelfPosition=function(e,t,i){this.position=e,this.forwardAxis=t,Array.isArray(i)&&(this.upAxis=i),this.updateListenerEffect()},e.prototype.updateListenerEffect=function(){this.position&&(this.audioListener.positionX?(this.audioListener.positionX.value=this.position[1],this.audioListener.positionY.value=this.position[2],this.audioListener.positionZ.value=-this.position[0]):this.audioListener.setPosition(this.position[1],this.position[2],-this.position[0]),this.audioListener.forwardX?(this.audioListener.forwardX.value=this.forwardAxis[1],this.audioListener.forwardY.value=this.forwardAxis[2],this.audioListener.forwardZ.value=-this.forwardAxis[0],this.audioListener.upX.value=this.upAxis[1],this.audioListener.upY.value=this.upAxis[2],this.audioListener.upZ.value=-this.upAxis[0]):this.audioListener.setOrientation(this.forwardAxis[1],this.forwardAxis[2],-this.forwardAxis[0],this.upAxis[1],this.upAxis[2],-this.upAxis[0]))},e.prototype.startPublishingStream=function(){var e=this;this.zegoRTC.createStream({camera:{video:!1,audio:!0,audioBitrate:30}}).then((function(t){if(!e.userID)throw e.zegoRTC.destroyStream(t),Error("Enable mic failed. Please log in room first.");e.audioStream&&e.audioStream!==t&&e.zegoRTC.destroyStream(e.audioStream),e.audioStream=t;var i={range_audio_team_id:e.teamID,range_audio_mode:e.sendMode};e.zegoRTC.startPublishingStream(e.userID,t,{extraInfo:JSON.stringify(i)})})).catch((function(e){throw e}))},e.prototype.stopPublishingStream=function(){this.isPublishing&&this.userID&&this.zegoRTC.stopPublishingStream(this.userID),this.isPublishing=!1,this.audioStream&&(this.zegoRTC.destroyStream(this.audioStream),this.audioStream=null)},e.prototype.setRecvMode=function(e){this.recvMode=e},e.prototype.setSendMode=function(e){this.sendMode=e,this.updateSteamExtraInfo()},e.prototype.setTeamID=function(e){this.teamID=e,this.updateSteamExtraInfo()},e.prototype.updateSteamExtraInfo=function(){this.userID&&this.isPublishing&&this.zegoRTC.setStreamExtraInfo(this.userID,JSON.stringify({range_audio_team_id:this.teamID||void 0,range_audio_mode:this.sendMode}))},e.prototype.reset=function(){this.audioStream&&this.stopPublishingStream(),this.userID=void 0},e}();t.default=s},7803:function(e,t){"use strict";function i(e){return!isNaN(Number(e))&&Number.MAX_SAFE_INTEGER>=Number(e)&&Number(e)>=-Number.MAX_SAFE_INTEGER}Object.defineProperty(t,"__esModule",{value:!0}),t.checkCoordinate=t.checkBoolean=t.checkNumber=void 0,t.checkNumber=i,t.checkBoolean=function(e){return!1},t.checkCoordinate=function(e){if(Array.isArray(e)){for(var t=0;t<3;t++)if(!i(e[t]))return!1;return!0}return!1}},3524:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.preview=void 0;var s=o(i(954)),a=i(3471);t.preview={setBeautyEffect:function(e,t){return n(this,void 0,void 0,(function(){var i,o,c,l=this;return r(this,(function(u){switch(u.label){case 0:if(!this.videoTrack)return this.logger.error("zc.p.0.sbe.0 video track no found"),[2];if("undefined"==typeof WebGLRenderingContext)throw i=a.errorCodeList.VIDEO_EFFECT_NOT_SUPPORT,o=i.code,c=i.message,Error({errorCode:o,extendedData:c});return s.default?this.videoEffect?this.videoTrack===this.videoEffect.input?[3,2]:[4,this.videoEffect.setInput(this.videoTrack)]:[3,4]:[3,7];case 1:u.sent(),u.label=2;case 2:return[4,this.videoEffect.setBeautyEffectOptions(e,t)];case 3:return u.sent(),[3,6];case 4:return this.videoEffect=new s.default(this.logger,this.videoTrack),this.videoEffect.onOverload=function(e){l.stateCenter.actionListener("beautyEffectOverload",l.localStream,e)},this.videoEffect.onOutputChange=function(e){return n(l,void 0,void 0,(function(){var t,i,n;return r(this,(function(r){return this.videoTrack&&this.localStream&&(t=this.videoTrack,e&&(t=e),this.localStream.getVideoTracks()[0]!==t&&(void 0===(i=null===(n=this.streamCenter.checkPublish(this.localStream))||void 0===n?void 0:n.publisher)?this.replacePreviewTrack(t,!!e):i.replacePublishedTrack(t,!0))),[2]}))}))},[4,this.videoEffect.setBeautyEffectOptions(e,t)];case 5:u.sent(),u.label=6;case 6:return[3,8];case 7:this.logger.error("zc.p.0.sbe.0 beauty effect module no found"),u.label=8;case 8:return[2]}}))}))}}},3048:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PUBLISH_SET_BEAUTY_EFFECT=void 0;var s=o(i(8606)),a=o(i(5683)),c=o(i(8302));t.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe.2";var l=function(){function e(e){this.logger=e,this.gl=null,this.effectConfig={sharpenIntensity:.5,whitenIntensity:.5,rosyIntensity:.5,smoothIntensity:.5},this.originResolution={width:0,height:0},this.shaderList=[],this.frameBufferList=[],this.outputTextureList=[],this.inputTexture=null,this.enableBeauty=!1}return e.prototype.setEnableBeauty=function(e){this.enableBeauty=!!e},e.prototype.init=function(e,i,o){return n(this,void 0,void 0,(function(){var n,l,u;return r(this,(function(r){return"undefined"!=typeof WebGLRenderingContext?(this.gl=o.getContext("webgl"),this.gl?(this.initGL(e,i),this.inputTexture?(this.canvasEl=o,(n=new s.default(this.gl,e,i)).setConstUniforms(),(l=new a.default(this.gl,e,i)).setConstUniforms(),(u=new c.default(this.gl,e,i)).setConstUniforms(),this.shaderList=[n,l,u],this.setEffectConfig(this.effectConfig),[2]):[2,this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" input texture not found")]):[2,this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" not get webgl context")]):[2,this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" not support webgl!")]}))}))},e.prototype.render=function(e){return n(this,void 0,void 0,(function(){var i,n,o,s,a=this;return r(this,(function(r){switch(r.label){case 0:return(i=this.gl)&&this.canvasEl?this.originResolution.height===e.videoHeight&&this.originResolution.width===e.videoWidth||!(Math.abs(this.originResolution.height-e.videoHeight)>2||Math.abs(this.originResolution.width-e.videoWidth)>2)?[3,3]:0===e.videoHeight||0===e.videoWidth?[2]:(this.canvasEl.width=e.videoWidth,this.canvasEl.height=e.videoHeight,e.setAttribute("width",e.videoWidth.toString()),e.setAttribute("height",e.videoHeight.toString()),!this.gl||this.gl.isContextLost()?[3,1]:(this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" resolution changed, reset resolution"),this.resetResolution(e.videoWidth,e.videoHeight),[3,3])):(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" video effect manager is not init!"),[2]);case 1:return this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" resolution changed and gl context lost, restart effect"),this.release(),[4,this.init(e.videoWidth,e.videoHeight,this.canvasEl)];case 2:r.sent(),r.label=3;case 3:return n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],o=[0,1,2,0,2,3],s=[0,0,1,0,1,1,0,1],i.viewport(0,0,e.width,e.height),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.inputTexture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e),this.shaderList.forEach((function(e,t){var r=e.program;if(r){e.renderPreTextures&&e.renderPreTextures(n,o,s),i.useProgram(r),e.render();var c=i.getUniformLocation(r,"uTexture"),l=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,l),i.bufferData(i.ARRAY_BUFFER,new Float32Array(n),i.STATIC_DRAW);var u=i.createBuffer();i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,u),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),i.STATIC_DRAW);var d=i.getAttribLocation(r,"aPosition");i.enableVertexAttribArray(d),i.vertexAttribPointer(d,3,i.FLOAT,!1,0,0);var h=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,h),i.bufferData(i.ARRAY_BUFFER,new Float32Array(s),i.STATIC_DRAW);var p=i.getAttribLocation(r,"aTexCoordinate");i.enableVertexAttribArray(p),i.vertexAttribPointer(p,2,i.FLOAT,!1,0,0);var f=t===a.shaderList.length-1?null:a.outputTextureList[t],g=t===a.shaderList.length-1?null:a.frameBufferList[t];i.bindFramebuffer(i.FRAMEBUFFER,g),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0),i.activeTexture(i.TEXTURE0),f&&i.bindTexture(i.TEXTURE_2D,f),i.uniform1i(c,0)}})),[2]}}))}))},e.prototype.setEffectConfig=function(e){var t=this;isNaN(e.sharpenIntensity)||(this.effectConfig.sharpenIntensity=e.sharpenIntensity),isNaN(e.whitenIntensity)||(this.effectConfig.whitenIntensity=e.whitenIntensity),isNaN(e.rosyIntensity)||(this.effectConfig.rosyIntensity=e.rosyIntensity),isNaN(e.smoothIntensity)||(this.effectConfig.smoothIntensity=e.smoothIntensity),this.shaderList.forEach((function(e){e.setEffectConfig(t.effectConfig)}))},e.prototype.release=function(){var e=this;this.shaderList.forEach((function(t){var i;t.program&&(null===(i=e.gl)||void 0===i||i.deleteProgram(t.program))})),this.outputTextureList.forEach((function(t){var i;t&&(null===(i=e.gl)||void 0===i||i.deleteTexture(t))})),this.frameBufferList.forEach((function(t){var i;t&&(null===(i=e.gl)||void 0===i||i.deleteFramebuffer(t))})),this.inputTexture=this.gl=null,this.shaderList=[],this.outputTextureList=[],this.frameBufferList=[]},e.prototype.initGL=function(e,i){var n=this.gl;if(!n)return this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" webgl context not found");this.inputTexture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.inputTexture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR);for(var r=0;3>r;r++){var o=n.createTexture();if(!o)return this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" create texture failed");n.bindTexture(n.TEXTURE_2D,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,i,0,n.RGBA,n.UNSIGNED_BYTE,null);var s=n.createFramebuffer();if(!s)return this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" create frame buffer failed");n.bindFramebuffer(n.FRAMEBUFFER,s),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0),this.outputTextureList.push(o),this.frameBufferList.push(s)}n.viewport(0,0,e,i),this.originResolution.width=e,this.originResolution.height=i},e.prototype.resetResolution=function(e,i){var n=this.gl;if(!n)return this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" can not find webgl context");this.outputTextureList.forEach((function(t){n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,i,0,n.RGBA,n.UNSIGNED_BYTE,null)})),n.viewport(0,0,e,i),this.originResolution.width=e,this.originResolution.height=i},e}();t.default=l},3471:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={VIDEO_EFFECT_NOT_SUPPORT:{code:1103072,message:"not support beauty effect"}}},957:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeautyEffect=void 0;var n=i(3524);t.BeautyEffect={type:"BeautyEffect",install:function(e){for(var t in n.preview)Object.defineProperty(e.prototype,t,{value:n.preview[t],writable:!1})}}},836:function(e,t){"use strict";var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.logger=e,this.recordedFrameCount=0,this.targetFrameRate=0,this.recordingDuration=0}return e.prototype.startRecordBeautyEffectOutput=function(e){return i(this,void 0,void 0,(function(){var t,i,r,o,s=this;return n(this,(function(n){switch(n.label){case 0:return t=6,this.recordID?(this.logger.warn("zc.p.0.sbe.3 detector is already recording"),[2,{result:!0}]):(i=(new Date).getTime(),this.recordID=i,this.targetFrameRate=e,this.recordedFrameCount=0,this.recordingDuration=t,[4,new Promise((function(e){window.setTimeout(e,1e3*s.recordingDuration)}))]);case 1:return n.sent(),this.recordID!==i?(this.recordID=void 0,[2,{result:!0}]):(this.recordID=void 0,r=this.targetFrameRate*this.recordingDuration,o=this.recordedFrameCount/t,this.recordedFrameCount<r/2?(this.logger.warn("zc.p.0.sbe.3 detect effect overload: current fps: "+o),[2,{result:!1,targetFPS:this.targetFrameRate,currentFPS:o}]):(this.logger.info("zc.p.0.sbe.3 detect effect current fps: "+o),[2,{result:!0}]))}}))}))},e.prototype.stopRecordBeautyEffectOutput=function(){this.recordedFrameCount=this.targetFrameRate=0,this.recordID=void 0},e.prototype.addFrame=function(){this.recordID&&(this.recordedFrameCount+=1)},e}();t.default=r},5683:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(i(6976)),a=i(1199),c=function(e){function t(t,i,n){var r=e.call(this,t)||this;return r.width=i,r.height=n,r.type="LightShader",r.uLightIntensity=null,r.uRedIntensity=null,r.whitenIntensity=.5,r.rosyIntensity=.5,r.program=r.makeProgram(a.lightVS,a.lightFS),r}return r(t,e),t.prototype.setEffectConfig=function(e){isNaN(e.whitenIntensity)||(this.whitenIntensity=e.whitenIntensity/100),isNaN(e.rosyIntensity)||(this.rosyIntensity=e.rosyIntensity/100)},t.prototype.render=function(){var e=this.gl;e.uniform1f(this.uLightIntensity,this.whitenIntensity),e.uniform1f(this.uRedIntensity,this.rosyIntensity)},t.prototype.setConstUniforms=function(){var e=this.program;if(e){var t=this.gl;t.useProgram(e),this.uLightIntensity=t.getUniformLocation(e,"intensity"),t.uniform1f(this.uLightIntensity,this.whitenIntensity),this.uRedIntensity=t.getUniformLocation(e,"rosyIntensity"),t.uniform1f(this.uRedIntensity,this.rosyIntensity);var i=t.getUniformLocation(e,"uPMVMatrix");t.uniformMatrix4fv(i,!1,[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1])}},t}(s.default);t.default=c},6976:function(e,t){"use strict";function i(e){for(var t=e,i="",n=0;n<t.length;n++){var r=t.charCodeAt(n),o=r;r>=65&&r<=90&&(o=(r-65-13+26)%26+65),r>=97&&r<=122&&(o=(r-97-13+26)%26+97),i+=String.fromCharCode(o)}return i}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.gl=e,this.program=null,this.program=null}return e.prototype.setEffectConfig=function(e){},e.prototype.setConstUniforms=function(){},e.prototype.render=function(){},e.prototype.renderPreTextures=function(e,t,i){},e.prototype.makeProgram=function(e,t){var n=this.gl,r=i(e),o=i(t),s=this.makeShader(r,n.VERTEX_SHADER),a=this.makeShader(o,n.FRAGMENT_SHADER),c=n.createProgram();return n.attachShader(c,s),n.attachShader(c,a),n.linkProgram(c),n.getProgramParameter(c,n.LINK_STATUS),c},e.prototype.makeShader=function(e,t){var i=this.gl,n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),i.getShaderParameter(n,i.COMPILE_STATUS),n},e}();t.default=n},8606:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(i(6976)),a=i(1199),c=function(e){function t(t,i,n){var r=e.call(this,t)||this;return r.width=i,r.height=n,r.type="BlurShader",r.blurXProgram=null,r.blurYProgram=null,r.diffProgram=null,r.uIntensity=null,r.smoothIntensity=.5,r.blurTextureList=[],r.blurBufferList=[],r.blurXProgram=r.makeProgram(a.borderBlurVS,a.borderBlurFS),r.setBorderBlurProgram(r.blurXProgram,1/(i||1),0),r.blurYProgram=r.makeProgram(a.borderBlurVS,a.borderBlurFS),r.setBorderBlurProgram(r.blurYProgram,0,1/(n||1)),r.diffProgram=r.makeProgram(a.diffBlurVS,a.diffBlurFS),r.setDiffBlurProgram(r.diffProgram),r.program=r.makeProgram(a.mixBlurVS,a.mixBlurFS),r.initBlurBuffer(),r}return r(t,e),t.prototype.setEffectConfig=function(e){isNaN(e.smoothIntensity)||(this.smoothIntensity=e.smoothIntensity/100)},t.prototype.render=function(){this.gl.uniform1f(this.uIntensity,this.smoothIntensity)},t.prototype.initBlurBuffer=function(){var e=this.gl;this.blurTextureList=[],this.blurTextureList=[];for(var t=0;t<3;t++){var i=e.createTexture();if(!i)return;e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null);var n=e.createFramebuffer();if(!n)return;e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),this.blurTextureList.push(i),this.blurBufferList.push(n)}},t.prototype.renderPreTextures=function(e,t,i){var n=this,r=this.gl,o=[0,1,0],s=[1,1,2];[this.blurXProgram,this.blurYProgram,this.diffProgram].forEach((function(a,c){if(a){r.useProgram(a);var l=r.getUniformLocation(a,"uTexture");r.uniform1i(l,o[c]);var u=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,new Float32Array(e),r.STATIC_DRAW);var d=r.createBuffer();r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,d),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),r.STATIC_DRAW);var h=r.getAttribLocation(a,"aPosition");r.enableVertexAttribArray(h),r.vertexAttribPointer(h,3,r.FLOAT,!1,0,0);var p=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,p),r.bufferData(r.ARRAY_BUFFER,new Float32Array(i),r.STATIC_DRAW);var f=r.getAttribLocation(a,"aTexCoordinate");r.enableVertexAttribArray(f),r.vertexAttribPointer(f,2,r.FLOAT,!1,0,0),r.bindFramebuffer(r.FRAMEBUFFER,n.blurBufferList[c]),r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),r.activeTexture(r.TEXTURE0+s[c]),r.bindTexture(r.TEXTURE_2D,n.blurTextureList[c])}}))},t.prototype.setConstUniforms=function(){var e=this.width,t=this.height,i=this.program;if(i){var n=this.gl;n.useProgram(i);var r=n.getUniformLocation(i,"widthOffset");n.uniform1f(r,1/e);var o=n.getUniformLocation(i,"heightOffset");n.uniform1f(o,1/t),this.uIntensity=n.getUniformLocation(i,"blurAlpha"),n.uniform1f(this.uIntensity,this.smoothIntensity);var s=n.getUniformLocation(i,"blurTexture");n.uniform1i(s,1);var a=n.getUniformLocation(i,"blurDiffTexture");n.uniform1i(a,2)}},t.prototype.setBorderBlurProgram=function(e,t,i){var n=this.gl;n.useProgram(e);var r=n.getUniformLocation(e,"texBlurWidthOffset");n.uniform1f(r,t);var o=n.getUniformLocation(e,"texBlurHeightOffset");n.uniform1f(o,i)},t.prototype.setDiffBlurProgram=function(e){var t=this.gl;t.useProgram(e);var i=t.getUniformLocation(e,"blurTexture");t.uniform1i(i,1)},t}(s.default);t.default=c},1199:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mixBlurFS=t.mixBlurVS=t.diffBlurFS=t.diffBlurVS=t.borderBlurFS=t.borderBlurVS=t.sharpnessFS=t.sharpnessVS=t.lightFS=t.lightVS=void 0,t.lightVS="cerpvfvba uvtuc sybng;\nnggevohgr irp2 nGrkPbbeqvangr;\nnggevohgr irp4 nCbfvgvba;\nhavsbez zng4 hCZIZngevk;\ninelvat irp2 iGrkPbbeq;\nibvq znva() {\n    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n    iGrkPbbeq = nGrkPbbeqvangr;\n}",t.lightFS="cerpvfvba uvtuc sybng;\ninelvat irp2 iGrkPbbeq;\nhavsbez fnzcyre2Q hGrkgher;\nhavsbez sybng vagrafvgl;\nhavsbez sybng ebflVagrafvgl;\nirp3 oevtugarffNaqPbagenfg(irp3 pbybe){\n  sybng v = vagrafvgl * 1.0;\n  sybng CV = 3.1415926;\n  sybng O = 0.12 * v;\n  sybng p = 0.1 * v;\n  sybng x = gna((45. + 44. * p) / 180.0 * CV);\n  pbybe = ((pbybe*255.0 - 127.5 * (1.0 - O)) * x + 127.5 * (1.0 + O)) / 255.0;\n  erghea pbybe;\n}\nibvq znva() {\n  irp4 grkgherPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);\n  grkgherPbybe = irp4(oevtugarffNaqPbagenfg(grkgherPbybe.eto), grkgherPbybe.j);\n  grkgherPbybe.e = zva(grkgherPbybe.e + 0.06 * ebflVagrafvgl, 1.0);\n  ty_SentPbybe = grkgherPbybe;\n}",t.sharpnessVS="\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez sybng vzntrJvqguSnpgbe;\nhavsbez sybng vzntrUrvtugSnpgbe;\nhavsbez sybng funecarff; \ninelvat irp2 iGrkPbbeq;\ninelvat irp2 yrsgGrkgherPbbeqvangr;\ninelvat irp2 evtugGrkgherPbbeqvangr;\ninelvat irp2 gbcGrkgherPbbeqvangr;\ninelvat irp2 obggbzGrkgherPbbeqvangr;\ninelvat sybng pragreZhygvcyvre;\ninelvat sybng rqtrZhygvcyvre;\nibvq znva() {\n  ty_Cbfvgvba = nCbfvgvba;\n  irp2 jvqguFgrc = irp2(vzntrJvqguSnpgbe, 0.0);\n  irp2 urvtugFgrc = irp2(0.0, vzntrUrvtugSnpgbe);\n  iGrkPbbeq = nGrkPbbeqvangr.kl;\n  yrsgGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - jvqguFgrc;\n  evtugGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + jvqguFgrc;\n  gbcGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + urvtugFgrc;\n  obggbzGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - urvtugFgrc;\n  pragreZhygvcyvre = 1.0 + 4.0 * funecarff;\n  rqtrZhygvcyvre = funecarff;\n}\n",t.sharpnessFS="\ncerpvfvba uvtuc sybng;\ninelvat uvtuc irp2 iGrkPbbeq;\ninelvat uvtuc irp2 yrsgGrkgherPbbeqvangr;\ninelvat uvtuc irp2 evtugGrkgherPbbeqvangr;\ninelvat uvtuc irp2 gbcGrkgherPbbeqvangr;\ninelvat uvtuc irp2 obggbzGrkgherPbbeqvangr;\ninelvat uvtuc sybng pragreZhygvcyvre;\ninelvat uvtuc sybng rqtrZhygvcyvre;\nhavsbez fnzcyre2Q hGrkgher;\nibvq znva() {\n  zrqvhzc irp4 nPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);\n  zrqvhzc irp3 grkgherPbybe = nPbybe.eto;\n  zrqvhzc irp3 yrsgGrkgherPbybe = grkgher2Q(hGrkgher, yrsgGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 evtugGrkgherPbybe = grkgher2Q(hGrkgher, evtugGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 gbcGrkgherPbybe = grkgher2Q(hGrkgher, gbcGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 obggbzGrkgherPbybe = grkgher2Q(hGrkgher, obggbzGrkgherPbbeqvangr).eto;\n  ty_SentPbybe = irp4((grkgherPbybe * pragreZhygvcyvre - (yrsgGrkgherPbybe * rqtrZhygvcyvre + evtugGrkgherPbybe * rqtrZhygvcyvre + gbcGrkgherPbybe * rqtrZhygvcyvre + obggbzGrkgherPbybe * rqtrZhygvcyvre)), nPbybe.n);\n}",t.borderBlurVS="nggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez uvtuc sybng grkOyheJvqguBssfrg;\nhavsbez uvtuc sybng grkOyheUrvtugBssfrg;\ninelvat irp2 i_grkpbbeq0;\ninelvat irp4 grkgherFuvsg_1;\ninelvat irp4 grkgherFuvsg_2;\ninelvat irp4 grkgherFuvsg_3;\ninelvat irp4 grkgherFuvsg_4;\nibvq znva()\n{\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n\n  irp2 fvatyrFgrcBssfrg = irp2(grkOyheJvqguBssfrg, grkOyheUrvtugBssfrg)*2.5;\n\n  grkgherFuvsg_1 = irp4(nGrkPbbeqvangr.kl - fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + fvatyrFgrcBssfrg);\n  grkgherFuvsg_2 = irp4(nGrkPbbeqvangr.kl - 2.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 2.0 * fvatyrFgrcBssfrg);\n  grkgherFuvsg_3 = irp4(nGrkPbbeqvangr.kl - 3.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 3.0 * fvatyrFgrcBssfrg);\n  grkgherFuvsg_4 = irp4(nGrkPbbeqvangr.kl - 4.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 4.0 * fvatyrFgrcBssfrg);\n}",t.borderBlurFS="cerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\ninelvat uvtuc irp4 grkgherFuvsg_1;\ninelvat uvtuc irp4 grkgherFuvsg_2;\ninelvat uvtuc irp4 grkgherFuvsg_3;\ninelvat uvtuc irp4 grkgherFuvsg_4;\nibvq znva(ibvq) { \n  zrqvhzc irp3 fhz = grkgher2Q(hGrkgher, i_grkpbbeq0).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.mj).eto;\n  ty_SentPbybe = irp4(fhz * 0.1111, 1.0); \n}",t.diffBlurVS="nggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez zng4 hCZIZngevk;\ninelvat irp2 i_grkpbbeq0;\nibvq znva()\n{\n  // ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n}",t.diffBlurFS="cerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\nhavsbez fnzcyre2Q oyheGrkgher;\nibvq znva(ibvq) {\n  irp4 vPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);\n  irp4 zrnaPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);\n  irp4 qvssPbybe = vPbybe - zrnaPbybe;\n  qvssPbybe.e = zva(qvssPbybe.e * 50.0 * qvssPbybe.e, 1.0);\n  qvssPbybe.t = zva(qvssPbybe.t * 50.0 * qvssPbybe.t, 1.0);\n  qvssPbybe.o = zva(qvssPbybe.o * 50.0 * qvssPbybe.o, 1.0);\n  ty_SentPbybe = irp4(qvssPbybe.eto, 1.0);\n}",t.mixBlurVS="\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\ninelvat irp2 i_grkpbbeq0;\nhavsbez sybng jvqguBssfrg;\nhavsbez sybng urvtugBssfrg;\ninelvat irp2 grkgherFuvsg_1;\ninelvat irp2 grkgherFuvsg_2;\ninelvat irp2 grkgherFuvsg_3;\ninelvat irp2 grkgherFuvsg_4;\nibvq znva()\n{\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n  grkgherFuvsg_1 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,urvtugBssfrg));\n  grkgherFuvsg_2 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,-urvtugBssfrg));\n  grkgherFuvsg_3 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,urvtugBssfrg));\n  grkgherFuvsg_4 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,-urvtugBssfrg));\n}\n",t.mixBlurFS="\ncerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\nhavsbez fnzcyre2Q oyheGrkgher;\nhavsbez fnzcyre2Q oyheQvssGrkgher;\nhavsbez ybjc sybng oyheNycun;\nibvq znva(ibvq) {\n  ybjc irp4 vPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);\n  ybjc irp4 zrnaPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);\n  ybjc irp4 inePbybe = grkgher2Q(oyheQvssGrkgher, i_grkpbbeq0);\n  ybjc sybng nycun = oyheNycun * 1.0;\n  ybjc sybng gurgn = 0.1;\n  zrqvhzc sybng c = pynzc((zva(vPbybe.e, zrnaPbybe.e - 0.1) - 0.2) * 4.0, 0.0, 1.0);\n  zrqvhzc sybng zrnaIne = znk(znk(inePbybe.e, inePbybe.t), inePbybe.o);\n  zrqvhzc sybng xZva = 0.1;\n  ybjc irp3 erfhygPbybe;\n  xZva = (1.0 - zrnaIne / (zrnaIne + gurgn)) * c * nycun;\n  erfhygPbybe = zvk(vPbybe.eto, zrnaPbybe.eto, xZva);\n  erfhygPbybe = zvk(vPbybe.eto, erfhygPbybe, zva(1.0,nycun));\n  ty_SentPbybe = irp4(erfhygPbybe,1.0);\n}"},8302:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(i(6976)),a=i(1199),c=function(e){function t(t,i,n){var r=e.call(this,t)||this;return r.width=i,r.height=n,r.type="SharpnessShader",r.uIntensity=null,r.sharpenIntensity=.5,r.program=r.makeProgram(a.sharpnessVS,a.sharpnessFS),r}return r(t,e),t.prototype.setEffectConfig=function(e){isNaN(e.sharpenIntensity)||(this.sharpenIntensity=e.sharpenIntensity/100)},t.prototype.render=function(){this.gl.uniform1f(this.uIntensity,.5*this.sharpenIntensity)},t.prototype.setConstUniforms=function(){var e=this.width,t=this.height,i=this.program;if(i){var n=this.gl;n.useProgram(i);var r=n.getUniformLocation(i,"imageWidthFactor");n.uniform1f(r,1/e);var o=n.getUniformLocation(i,"imageHeightFactor");n.uniform1f(o,1/t),this.uIntensity=n.getUniformLocation(i,"sharpness"),n.uniform1f(this.uIntensity,.5*this.sharpenIntensity)}},t}(s.default);t.default=c},954:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PUBLISH_SET_BEAUTY_EFFECT=void 0;var s=o(i(836)),a=o(i(3048));t.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe.1";var c=function(){function e(e,t){this.logger=e,this.kind="video",this._enabled=!1,this.lastRenderTime=0,this.animationFrameId=0,this.backgroundLoop=null,this.setInput(t,!0),this.fps=15,this.detector=new s.default(e),this.backgroundLoop&&clearTimeout(this.backgroundLoop),this.backgroundLoop=null,this.lastRenderTime=0,this.manager=new a.default(e)}return Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},enumerable:!1,configurable:!0}),e.prototype.setBeautyEffectOptions=function(e,i){return void 0===i&&(i={}),n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return e&&this.manager.setEffectConfig(i),this.enabled===e?[3,6]:(this.manager.setEnableBeauty(e),this.enabled!==e&&this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" effect enabled "+e+"; options: "+JSON.stringify(i)),this.enabled=e,e?this.input?[4,this.startEffect()]:[3,2]:[3,3]);case 1:n.sent(),n.label=2;case 2:return[3,5];case 3:return[4,this.stopEffect()];case 4:n.sent(),n.label=5;case 5:n.label=6;case 6:return[2]}}))}))},e.prototype.startEffect=function(){return n(this,void 0,void 0,(function(){var e,i,o=this;return r(this,(function(s){switch(s.label){case 0:return this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" call start effect"),this.input?this.input&&this.output&&this.input!==this.output?(this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" video effect is already enabled"),[2]):[4,this.startWebGLProcessor()]:(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" start effect failed, input track is null"),[2]);case 1:return e=s.sent(),[4,this.updateOutput(e)];case 2:return s.sent(),this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" start effect success"),this.detector.startRecordBeautyEffectOutput(this.fps).then((function(e){if(!e.result&&o.onOverload){var t=e.targetFPS,i=e.currentFPS;o.onOverload({targetFPS:t,currentFPS:i})}})),i=function(){return n(o,void 0,void 0,(function(){var e,t,n;return r(this,(function(r){switch(r.label){case 0:return this.enabled&&(this.animationFrameId=requestAnimationFrame(i)),e=Date.now(),t=1e3/this.fps,(n=this.lastRenderTime?e-this.lastRenderTime:t)>=t?(this.lastRenderTime=e-(n-t),this.videoEl&&this.videoEl.paused&&this.videoEl.play(),this.enabled&&this.videoEl?[4,this.manager.render(this.videoEl)]:[3,2]):[3,2];case 1:r.sent(),this.output&&this.output.requestFrame&&this.output.requestFrame(),this.detector.addFrame(),r.label=2;case 2:return[2]}}))}))},this.animationFrameId=requestAnimationFrame(i),document.addEventListener("visibilitychange",(function(){if(document.hidden){var e=function(){o.enabled&&o.videoEl&&o.manager.render(o.videoEl),o.output&&o.output.requestFrame&&o.output.requestFrame(),o.detector.addFrame(),o.backgroundLoop=window.setTimeout(e,Math.floor(1e3/o.fps))};e()}else o.backgroundLoop&&(clearTimeout(o.backgroundLoop),o.backgroundLoop=null)}),!1),[2]}}))}))},e.prototype.stopEffect=function(){return n(this,void 0,void 0,(function(){var e=this;return r(this,(function(i){switch(i.label){case 0:return this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" call stop effect"),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0),this.detector.stopRecordBeautyEffectOutput(),this.manager.release(),[4,this.updateOutput()];case 1:return i.sent(),void 0===this.removeDomTimer&&(this.removeDomTimer=window.setTimeout((function(){!1===e.enabled&&e.destroy()}),18e4)),[2]}}))}))},e.prototype.destroy=function(){this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" destroy hidden elements"),this.canvasEl&&this.canvasEl.remove(),this.videoEl&&this.videoEl.remove(),this.videoEl=this.canvasEl=void 0,this.removeDomTimer&&(clearTimeout(this.removeDomTimer),this.removeDomTimer=void 0)},e.prototype.startWebGLProcessor=function(){return n(this,void 0,void 0,(function(){var e,i,n,o,s=this;return r(this,(function(r){switch(r.label){case 0:return this.input?(this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" start webgl processor"),this.removeDomTimer&&(clearTimeout(this.removeDomTimer),this.removeDomTimer=void 0),this.canvasEl&&this.videoEl?[3,2]:(this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" create elements"),this.canvasEl&&(this.canvasEl.remove(),this.canvasEl=void 0),this.videoEl&&(this.videoEl.remove(),this.videoEl=void 0),this.canvasEl=document.createElement("canvas"),this.videoEl=document.createElement("video"),this.videoEl.setAttribute("autoplay",""),this.videoEl.setAttribute("muted",""),this.videoEl.muted=!0,this.videoEl.setAttribute("playsinline",""),this.videoEl.setAttribute("style","display:none"),this.videoEl.srcObject=new MediaStream([this.input]),e=new Promise((function(e){var t=function(){s.videoEl&&s.videoEl.removeEventListener("playing",t),e(void 0)};s.videoEl&&s.videoEl.addEventListener("playing",t)})),this.videoEl.play(),[4,e])):(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" input track is null"),[2]);case 1:r.sent(),r.label=2;case 2:return i=this.input.getSettings(),n=i.width||this.videoEl.videoWidth,o=i.height||this.videoEl.videoHeight,i.frameRate&&(this.fps,i.frameRate),i.frameRate&&this.fps!==i.frameRate&&(this.fps=i.frameRate,this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" set target fps: "+this.fps)),this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" beauty video processor: width "+i.width+" height "+i.height),n&&o?(this.canvasEl.width=n,this.canvasEl.height=o,this.videoEl.setAttribute("width",n.toString()),this.videoEl.setAttribute("height",o.toString()),this.manager.init(n,o,this.canvasEl),[2,this.canvasEl.captureStream().getVideoTracks()[0]]):(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" resolution of track is wrong"),[2])}}))}))},e.prototype.setInput=function(e,i){return void 0===i&&(i=!1),n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return e===this.input?[3,6]:e.kind!==this.kind?(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" kind of track is not video"),[2]):(this.output&&this.input===this.output&&this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" input track is same as effect track"),this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" change input track"),i?this.input?[4,this.removeInput()]:[3,2]:[3,5]);case 1:n.sent(),n.label=2;case 2:return this.input=e,this.enabled&&!this.videoEl?[4,this.startEffect()]:[3,4];case 3:n.sent(),n.label=4;case 4:return[3,6];case 5:this.input=e,this.videoEl&&(this.videoEl.srcObject=new MediaStream([this.input])),n.label=6;case 6:return[2]}}))}))},e.prototype.removeInput=function(){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return this.input=void 0,[4,this.stopEffect()];case 1:return e.sent(),[2]}}))}))},e.prototype.updateOutput=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this.output===e?[3,3]:(this._output=e,this.onOutputChange?[4,this.onOutputChange(this._output)]:[3,2]);case 1:t.sent(),t.label=2;case 2:t.label=3;case 3:return[2]}}))}))},e.prototype.onOutputChange=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(e){return[2]}))}))},e.prototype.onOverload=function(e){},e}();t.default=c},608:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientUtil=void 0;var o=i(6706),s=i(3529),a=i(4395),c=function(){function e(){}return e.checkIllegalCharacters=function(e){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e)&&/^[^:/]*$/g.test(e)},e.isUrl=function(e){return!!(e.startsWith("rtmp://")||e.startsWith("https://")&&e.endsWith(".flv")||e.startsWith("https://")&&e.endsWith(".m3u8"))},e.registerCallback=function(e,t,i){var n,r;t.success&&(n=t.success,i[e+"SuccessCallback"]=n),t.error&&(r=t.error,i[e+"ErrorCallback"]=r)},e.actionErrorCallback=function(e,t){return t[e+"ErrorCallback"]},e.actionSuccessCallback=function(e,t){return t[e+"SuccessCallback"]},e.logReportCallback=function(t,i,n,r){e.registerCallback(t,{success:function(t,r){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];e.dataReportEvent(i,n,t,r,o)}},r)},e.actionLogReportCallback=function(t,i,n,r,o){e.actionSuccessCallback(t,i)&&e.actionSuccessCallback(t,i)(n,r)},e.getServerError=function(e){var t={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};if(0===e)return{code:0,message:""};var i={code:0,message:"liveroom cmd error"};if(i.code=e,e>1e9){var n=t[e];i.message=n?"liveroom cmd error, code: "+e+", message: "+n:t[1e9]+e}else i.message=t[e]?t[e]+" code:"+e:"unknown error code:"+e;return i},e.unregisterCallback=function(e,t){delete t[e+"SuccessCallback"],delete t[e+"ErrorCallback"]},e.decodeServerError=function(e,t){var i={code:-1,message:"server error"};return e>1e9&&(i.code=e-1e9+52e6),t&&(i.message=t),i},e.getLiveRoomError=function(e){return e>1e9?{1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR"}[e-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[e]||"ROOM_INNER_ERROR"},e.getKickoutError=function(e){var t={};switch(e){case 1:t.code=63000001,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:t.code=63000002,t.message="zpush manual kickout",t.name="MANUAL_KICKOUT";break;case 3:t.code=63000003,t.message="kickout reason = "+e;break;case 4:t.code=63000004,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 5:t.code=63000005,t.message="zpush token expired",t.name="TOKEN_EXPIRED";break;default:t.code=e,t.message="kickout reason = "+e}return t},e.dataReportEvent=function(e,t,i,n,r){switch(i){case"eventStart":e.eventStart(t,n);break;case"eventEndWithMsgInfo":e.eventEndWithMsgInfo(t,n,r[0]);break;case"addEventMsg":e.addEventMsg(t,n,r[0],r[1]);break;case"addEvent":e.addEvent(t,n);break;case"eventEnd":e.eventEnd(t,n);break;case"addMsgInfo":e.addMsgInfo(t,r[0])}},e.isKeepTryLogin=function(e){switch(e){case 1002:case 1003:return!0;default:return!1}},e.mergeStreamList=function(e,t,i,n){var r,o=[],s=[],a=[];i||(i=[]);for(var c=0;c<i.length;c++)if(i[c].anchor_id_name!=e&&i[c].user_id!=e){r=!1;for(var l=0;l<t.length;l++)if(i[c].stream_id===t[l].stream_id){i[c].extra_info!==t[l].extra_info&&a.push(i[c]),r=!0;break}r||o.push(i[c])}for(var u=0;u<t.length;u++){r=!1;for(var d=0;d<i.length;d++)if(t[u].stream_id===i[d].stream_id){r=!0;break}r||s.push(t[u])}for(t.splice(0),c=0;c<i.length;c++)t.push(i[c]);n(o,s,a)},e.checkInteger=function(e,t){return 0==t?"number"==typeof e&&e%1==0&&e>=0:"number"==typeof e&&e%1==0&&e>0},e.checkValidNumber=function(e,t,i){return t=t||1,i=i||1e4,"number"==typeof e&&e%1==0&&e>=t&&e<=i},e.uuid=function(e,t){var i,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];if(t=t||n.length,e)for(i=0;i<e;i++)r[i]=n[0|Math.random()*t];else{var o=void 0;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",i=0;i<36;i++)r[i]||(o=0|16*Math.random(),r[i]=n[19==i?3&o|8:o])}return r.join("")},e.supportDetection=function(e,t,i,o){return n(this,void 0,void 0,(function(){var n,s,a,c,l,u,d,h;return r(this,(function(r){switch(r.label){case 0:return n={webRTC:!1,customCapture:!1,camera:!1,microphone:!1,videoCodec:{H264:!1,H265:!1,VP8:!1,VP9:!1},screenSharing:e,errInfo:{}},o&&"screenSharing"===o?(t({result:e,errInfo:n.errInfo}),[2]):o&&"customCapture"!==o||(((s=document.createElement("video")).captureStream||s.mozCaptureStream)&&(n.customCapture=!0),"customCapture"!==o)?(a=navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,c="https:"!==window.location.protocol&&"file:"!==window.location.protocol&&-1==window.location.hostname.indexOf("127.0.0.1")&&-1==window.location.hostname.indexOf("localhost"),o&&"camera"!==o&&"microphone"!==o?[3,9]:a?c?(n.camera=!1,console.error("webrtc requires https or localhost"),[3,9]):[3,1]:[3,9]):(t({result:n.customCapture,errInfo:n.errInfo}),[2]);case 1:if(o&&"camera"!==o)return[3,5];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,navigator.mediaDevices.getUserMedia({video:!0})];case 3:return(l=r.sent())&&(n.camera=!0)&&l.getTracks().forEach((function(e){return e.stop()})),[3,5];case 4:return u=r.sent(),n.errInfo.camera={name:u.name,message:u.message},console.error("camera devices detect error: ",u.name,u.message),[3,5];case 5:if(o&&"microphone"!==o)return[3,9];r.label=6;case 6:return r.trys.push([6,8,,9]),[4,navigator.mediaDevices.getUserMedia({audio:!0})];case 7:return(d=r.sent())&&(n.microphone=!0)&&d.getTracks().forEach((function(e){return e.stop()})),[3,9];case 8:return h=r.sent(),n.errInfo.microphone={name:h.name,message:h.message},console.error("microphone devices detect error: ",h.name,h.message),[3,9];case 9:return"camera"===o||"microphone"===o?(t({result:n[o],errInfo:n.errInfo}),[2]):(this.supportVideoCodeType((function(e,i){o||(n.videoCodec.H264=e.H264,n.videoCodec.H265=e.H265,n.videoCodec.VP8=e.VP8,n.videoCodec.VP9=e.VP9,n.webRTC=e.webRTC),i&&("string"==typeof i?n.errInfo.extendedDate=i:n.errInfo.webRTC={name:i.name,message:i.message},console.error("videoCodec detect error: "+i)),t&&t(o?{result:e[o],errInfo:n.errInfo}:n)}),i,o),[2])}}))}))},e.getDevices=function(e,t){void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((function(t){for(var i=[],n=[],r=[],o=0;o<t.length;o++){var s=t[o];"audioinput"===s.kind&&i.push({deviceName:s.label,deviceID:s.deviceId}),"audiooutput"===s.kind&&n.push({deviceName:s.label,deviceID:s.deviceId}),"videoinput"===s.kind&&r.push({deviceName:s.label,deviceID:s.deviceId})}e&&e({microphones:i,speakers:n,cameras:r})})).catch((function(e){console.error("enumerate devices wrong "+e),t&&t(s.ZegoRTCLogEvent.kZegoTaskEnumDevices.error.kEnumDevicesError)})):t&&t(s.ZegoRTCLogEvent.kZegoTaskEnumDevices.error.kBrowserNotSupportError)},e.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var i=Math.max(e.length,t.length);e.length<i;)e.push("0");for(;t.length<i;)t.push("0");for(var n=0;n<i;n++){var r=parseInt(e[n]),o=parseInt(t[n]);if(r>o)return 1;if(r<o)return-1}return 0},e.isSupportLive=function(e,t){var i=wx.getSystemInfoSync().SDKVersion,n={code:0,msg:""};this.compareVersion(i,"1.7.0")<0&&(n={code:10001,msg:"当前微信版本过低，无法使用相关组件"},e&&e(n)),wx.getSetting({success:function(t){var i=t.authSetting;i["scope.camera"]&&i["scope.record"]||(n={code:10002,msg:"需要摄像头和录音功能的授权"}),e&&e(n)},fail:function(e){console.error("get setting error",e),t&&t(e)}})},e.supportVideoCodeType=function(e,t,i){return n(this,void 0,void 0,(function(){var n,o,s,c,l,u,d,h,p,f;return r(this,(function(r){switch(r.label){case 0:return n={webRTC:!1,H264:!1,VP8:!1,VP9:!1,H265:!1},i?1!==t||"VP8"!==i&&"H264"!==i?[3,2]:[4,(f=new a.CheckModule).checkSupportByType(i)]:[3,2];case 1:return"boolean"==typeof(o=r.sent())?(n[i]=o,[2,e(n)]):(n[i]=!1,[2,e(n,o)]);case 2:if("webRTC"!==i&&1!==t)return[3,7];r.label=3;case 3:return r.trys.push([3,5,,6]),[4,(new RTCPeerConnection).createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 4:return r.sent(),n.webRTC=!0,[3,6];case 5:return s=r.sent(),e&&e(n,s),[3,6];case 6:if("webRTC"===i)return[2,e(n)];r.label=7;case 7:if(1===t){for(c="",u=[],d=0,h=l=["VP8","H264"];d<h.length;d++)p=h[d],f=new a.CheckModule,u.push(f.checkSupportByType(p));return Promise.all(u).then((function(t){t.forEach((function(e,t){"boolean"==typeof e?n[l[t]]=!0:(n[l[t]]=!1,c=e)})),c?e(n,c):e(n)})),[2]}try{(new RTCPeerConnection).createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then((function(t){if(n.webRTC=!0,t&&t.sdp){var r=t.sdp.split("\r\n");if(n.H264=r.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("H264/")>-1})),"H264"===i)return e(n);if(n.VP8=r.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("VP8/")>-1})),"VP8"===i)return e(n);n.VP9=r.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("VP9/")>-1})),n.H265=r.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("H265/")>-1})),e&&e(n)}}))}catch(t){e&&e(n,t)}return[2]}}))}))},e.getPublisherStateType=function(e){return 0==e||1==e?0==e?"PUBLISHING":"NO_PUBLISH":"PUBLISH_REQUESTING"},e.getPlayerStateType=function(e){return 0==e||1==e?0==e?"PLAYING":"NO_PLAY":"PLAY_REQUESTING"},e.getSteamUpdateType=function(e){return 0==e?"DELETE":"ADD"},e.checkScreenParams=function(t,i){if("object"==typeof t&&void 0!==t.videoQuality&&!e.checkInteger(t.videoQuality))return i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," videoQuality must be integer number"),!1;if("object"==typeof t&&void 0!==t.sourceID&&"string"!=typeof t.sourceID)return i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," sourceID must be string"),!1;if("object"==typeof t&&4===t.videoQuality){if(void 0===t.bitRate)return i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate is required when videoQuality is 4"),!1;if(!e.checkInteger(t.bitRate))return i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number"),!1;if(t.bitRate>10240)return i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps"),!1;if(void 0===t.frameRate)return i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," frameRate is required when videoQuality is 4"),!1;if(!e.checkInteger(t.frameRate))return i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," frameRate must be integer number"),!1;if(void 0===t.width)return i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," width is required when videoQuality is 4"),!1;if(!e.checkInteger(t.width))return i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," width must be integer number"),!1;if(void 0===t.height)return i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," height is required when videoQuality is 4"),!1;if(!e.checkInteger(t.height))return i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," height must be integer number"),!1}return!0},e.checkCameraParams=function(t,i){return t.width&&e.checkValidNumber(t.width)?t.height&&e.checkValidNumber(t.height)?t.frameRate&&e.checkValidNumber(t.frameRate)?!(!t.bitRate||!e.checkValidNumber(t.bitRate))||(i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number"),!1):(i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," frameRate must be integer number"),!1):(i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," height must be integer number"),!1):(i(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," width must be integer number"),!1)},e.isParamEmpty=function(e){return null!=e&&""!==e},e.isTypeString=function(e){return"string"==typeof e},e.isTooLong=function(e,t){return!(e.length>=t)},e.isReDispatch=function(e){var t=e.message.match(/action:(\d+)/),i=t?Number(t[1]):NaN;return[s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kTTLOverTimeError,s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kClientIPChangedError,s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kTTLOverTimeError,s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kClientIPChangedError].includes(e)||[6].includes(i)},e.arrAvg=function(e,t,i){return e.push(t),e.length>i&&e.shift(),e.reduce((function(e,t){return e+t}))/e.length},e.getNetQuality=function(e,t,i){return void 0!==i?.15*this.calcQualityOfJitter(i)+.85*Math.min(this.calcQualityOfRtt(e),this.calcQualityOfLostRate(t,!1)):Math.min(this.calcQualityOfRtt(e),this.calcQualityOfLostRate(t,!0))},e.calcQualityOfRtt=function(e){return e<600?97-Math.pow(.09*e,1.1):18*Math.exp(.002*(600-e))},e.calcQualityOfJitter=function(e){return e<=50?98-Math.pow(e,1.15):o.QUALITY_CONSTANT.PoorMinQuality},e.calcQualityOfLostRate=function(e,t){if(t){var i=e;return i<=55?99-Math.pow(.8*i,1.18):o.QUALITY_CONSTANT.PoorMinQuality}var n=100*e;return n<=40?96-Math.pow(n,1.22):o.QUALITY_CONSTANT.PoorMinQuality},e.quality2QualityGrade=function(e){return o.QualityGrade.Unknown,e>=o.QUALITY_CONSTANT.ExcellentMinQuality?o.QualityGrade.Excellent:e>=o.QUALITY_CONSTANT.GoodMinQuality?o.QualityGrade.Good:e>=o.QUALITY_CONSTANT.MiddleMinQuality?o.QualityGrade.Middle:e>=o.QUALITY_CONSTANT.PoorMinQuality?o.QualityGrade.Poor:o.QualityGrade.Die},e}();t.ClientUtil=c},6502:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryHandler=void 0;var i=function(){function e(){this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1}return e.prototype.init=function(e,t,i,n){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof i&&(this.RETRY_CONTINUE_COUNT=i),"number"==typeof n&&(this.RETRY_MAX_TIME_INTERVAL=n)},e.prototype.invalid=function(){this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryStartTime=0,this.retryActiveCount=1},e}();t.RetryHandler=i},4767:function(e,t){"use strict";var i=this&&this.__spreadArray||function(e,t){for(var i=0,n=t.length,r=e.length;i<n;i++,r++)e[r]=t[i];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.SdpUtil=void 0;var n=function(){function e(){}return e.zegoSdp=function(e){var t=e.split("\r\n"),n=[],r=[];t.forEach((function(e){var t=e.match(/a=rtpmap:(\d+)\s+((H264\/90000)|(opus\/48000\/2))/);t&&t[1]&&t[2]&&("H264/90000"===t[2]&&n.push(t[1]),"opus/48000/2"===t[2]&&r.push(t[1]))}));var o=[];return t.map((function(e){var t=!0,s=e.match(/((a=rtcp-fb:)|(a=rtpmap:)|(a=fmtp:))(\d+)/);if(s&&s[5]&&(i(i([],n),r).some((function(e){return e==s[5]}))||(t=!1)),e.indexOf("m=video")>-1){var a=e.split(" ");e=i([a[0],a[1],a[2]],n).join(" ")}else e.indexOf("m=audio")>-1&&(a=e.split(" "),e=i([a[0],a[1],a[2]],r).join(" "));t&&o.push(e)})),o.join("\r\n")},e.getSDPByVideDecodeType=function(e,t,n){var r={str:"",arr:[],obj:{H264:[],H265:[],VP8:[],VP9:[],OTHER:[]}};if(!e.includes("m=video"))return e;var o=/m=video.+/.exec(e)[0];o=o.match(/[\s|\d]+/g)[1].replace(" ",""),r.str=o,r.arr=r.str.split(" "),r.arr.forEach((function(t){var i=new RegExp("a=rtpmap:"+t+".+").exec(e)[0];i.includes("H264")?r.obj.H264.push(t):i.includes("H265")?r.obj.H265.push(t):i.includes("VP8")?r.obj.VP8.push(t):i.includes("VP9")?r.obj.VP9.push(t):r.obj.OTHER.push(t)})),r.obj.OTHER.forEach((function(t){var i=new RegExp("a=fmtp:"+t+".+apt=(\\d+)").exec(e),n=i&&i[1];n&&(r.obj.H264.includes(n)?r.obj.H264.push(t):r.obj.H265.includes(n)?r.obj.H265.push(t):r.obj.VP8.includes(n)?r.obj.VP8.push(t):r.obj.VP9.includes(n)&&r.obj.VP9.push(t))}));var s=[];if("VP9"===t?s=i(i(i([],r.obj.H265),r.obj.H264),r.obj.VP8):"VP8"===t?s=i(i(i([],r.obj.H265),r.obj.H264),r.obj.VP9):"H264"===t?s=i(i(i([],r.obj.H265),r.obj.VP8),r.obj.VP9):"H265"===t&&(s=i(i(i([],r.obj.VP8),r.obj.H264),r.obj.VP9)),n&&"H264"==t){var a=[];r.obj.H264.forEach((function(t){var i=new RegExp("a=fmtp:"+t+".+\\s\\n","g").exec(e);(null==i?void 0:i.find((function(e){return e.includes("profile-level-id=42e01f")})))||a.push(t)})),a.length==r.obj.H264.length&&(a=[]),s=s.concat(a)}return s.forEach((function(t){var i=r.arr.indexOf(t);r.arr.splice(i,1);var n=new RegExp("a=rtpmap:"+t+".+\\s\\n","g"),o=new RegExp("a=rtcp-fb:"+t+".+\\s\\n","g"),s=new RegExp("a=fmtp:"+t+".+\\s\\n","g");e=(e=(e=e.replace(n,"")).replace(o,"")).replace(s,"")})),e=e.replace(o,r.arr.join(" "))},e}();t.SdpUtil=n},5321:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWebRTC=void 0;var s=i(6706),a=i(608),c=i(7325),l=i(1089),u=i(3529),d=i(908),h=i(3409),p=i(7560),f=i(1547),g=o(i(5515)),m=i(3770),_=i(4865),v=i(361),E=i(5019),A=i(9595),y=i(9595),S=function(){function e(e,t,i,n){var r=this;void 0===n&&(n=0),this.mediaEleSources=[],this.logger=e,this.dataReport=t,this.ac=new("undefined"!=typeof webkitAudioContext?webkitAudioContext:AudioContext),this.checkAudioContext(),this.stateCenter=new c.StateCenter(this.logger,this.dataReport),this.stateCenter.clientType="webrtc",this.stateCenter.type=2===n?"PRIVATE":"PUBLIC",this.RTM=i,this.streamCenter=new h.ZegoStreamCenterWeb(this.logger,this.stateCenter,this.dataReport,this.RTM,this.ac,this.mediaEleSources),this.rtcModules=new d.RTCModules(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.RTM,this.ac),this.stateCenter.getSeq=s.getSeq,this.stateCenter.getReportSeq=s.getReportSeq,this.stateCenter.networkState=navigator?navigator.onLine?s.ENUM_NETWORK_STATE.online:s.ENUM_NETWORK_STATE.offline:s.ENUM_NETWORK_STATE.online,this.stateCenter.browser=g.browserDetails.browser,this.stateCenter.settingConfig=new y.ZegoSettingConfig,this.RTM.cloudSetting.setEnvVariable("sdk_version",s.PROTO_VERSION),this.RTM.cloudSetting.getSettingCache(A.RTC).then((function(e){r.logger.info(l.ZEGO_WEBRTC_ACTION.CONSTRUCTOR+" streamConfig "+JSON.stringify(e));var t=s.getReportSeq();r.dataReport.newReport(t,u.ZegoRTCLogEvent.kZegoTaskCloudSettingCache.event),r.dataReport.addMsgInfo(t,{files:[{name:A.RTC,content:null==e?void 0:e.setting,versions:null==e?void 0:e.versions}]}),r.dataReport.uploadReport(t),r.stateCenter.settingConfig.setSetting(null==e?void 0:e.setting)})).catch((function(e){r.logger.warn(l.ZEGO_WEBRTC_ACTION.CONSTRUCTOR+" streamConfig "+JSON.stringify(e))}))}return e.prototype.checkAudioContext=function(){var e=this;if(this.ac&&"suspended"===this.ac.state){var t=function(){e.ac.resume(),window.removeEventListener("click",t),window.removeEventListener("touchstart",t)};window.addEventListener("click",t),window.addEventListener("touchstart",t)}},e.prototype.mutePublishStreamVideo=function(e,t,i){return!1},e.prototype.mutePublishStreamAudio=function(e,t){return!1},e.prototype.mutePlayStreamVideo=function(e,t){return new Promise((function(e,t){console.error("should install advanced module"),e(!1)}))},e.prototype.mutePlayStreamAudio=function(e,t){return new Promise((function(e,t){console.error("should install advanced module"),e(!1)}))},e.prototype.muteMicrophone=function(e){return!1},e.prototype.isMicrophoneMuted=function(){return!this.streamCenter.isMicEnabled},e.prototype.setAudioOutput=function(e,t){return this.logger.info(l.ZEGO_WEBRTC_ACTION.SET_AUDIO_OUTPUT+" call"),"string"!=typeof t?(this.logger.error("audiooutput is not string"),!1):this.rtcModules.playModule.setStreamAudioOutput(e,t)},e.prototype.setCustomSignalUrl=function(e){if(this.logger.info(l.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" call: "+e),e&&0!=e.length){var t=!0;e.forEach((function(e){return 0!=e.indexOf("wss://")&&(t=!1)})),t?this.stateCenter.customUrl=e:this.logger.error(l.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" url is not correct")}else this.logger.error(l.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" param error")},e.prototype.setGWNode=function(e){"string"==typeof e&&e.length>0&&(this.streamCenter.gwNode=e)},e.prototype.setQualityMonitorCycle=function(e){return"number"==typeof e&&e>=1e3?(this.streamCenter.setQualityMonitorCycle(e),!0):(this.logger.error("zc.sqmc.0 time must be number and bigger than 1000"),!1)},e.prototype.startPlayingStream=function(e,t,i){return this.logger.info(l.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" call by user"),this.rtcModules.playModule.startPlayingStream(e,t,i)},e.prototype.stopPlayingStream=function(e){this.logger.info(l.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call by user"),this.rtcModules.playModule.stopPlayingStream(e)},e.prototype.setTurnOverTcpOnly=function(e){this.logger.info(l.ZEGO_WEBRTC_ACTION.SET_TURN_OVER_TCP_ONLY+" call "+e),"boolean"==typeof e?this.stateCenter.turnOverTcpOnly=e:this.logger.error("zc.p.stoto.0 param must be param")},e.prototype.createStream=function(e){return this.rtcModules.publishModule.createStream(e)},e.prototype.destroyStream=function(e){this.rtcModules.publishModule.destroyStream(e)},e.prototype.startPublishingStream=function(e,t,i,n){return this.logger.info(l.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" call by user"),this.rtcModules.publishModule.startPublishingStream(e,t,i,n)},e.prototype.activateSEIInsert=function(e){return console.error("should install advanced module"),!1},e.prototype.stopPublishingStream=function(e){return this.logger.info(l.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" call by user"),this.rtcModules.publishModule.stopPublishingStream(e)},e.prototype.setVideoConfig=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setVideoConfig(e,t):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.setAudioConfig=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setAudioConfig(e,t):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.replaceTrack=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.replaceTrack(e,t):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.preloadEffect=function(e,t,i){void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.preloadEffect(e,t,i):console.error("未引入混音模块")},e.prototype.playEffect=function(e,t,i){void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.playEffect(e,t,i):console.error("未引入混音模块")},e.prototype.pauseEffect=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.pauseEffect(e,t):(console.error("未引入混音模块"),!1)},e.prototype.resumeEffect=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.resumeEffect(e,t):(console.error("未引入混音模块"),!1)},e.prototype.stopEffect=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopEffect(e,t):(console.error("未引入混音模块"),!1)},e.prototype.unloadEffect=function(e){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.unloadEffect(e):(console.error("未引入混音模块"),!1)},e.prototype.setEffectVolume=function(e,t,i){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.setEffectVolume(e,t,i):(console.error("未引入混音模块"),!1)},e.prototype.startMixingAudio=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.startMixingAudio(e,t):(console.error("未引入混音模块"),!1)},e.prototype.stopMixingAudio=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopMixingAudio(e,t):(console.error("未引入混音模块"),!1)},e.prototype.mixingBuffer=function(e,t,i,n){void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.mixingBuffer(e,t,i,n):console.error("未引入混音模块")},e.prototype.stopMixingBuffer=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopMixingBuffer(e,t):(console.error("未引入混音模块"),!1)},e.prototype.setMixingAudioVolume=function(e,t,i){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.setMixingAudioVolume(e,t,i):(console.error("未引入混音模块"),!1)},e.prototype.checkSystemRequirements=function(t,i){var n=this,r=navigator&&navigator.mediaDevices&&(e.screenShotReady||"getDisplayMedia"in navigator.mediaDevices);return this.logger.info(l.ZEGO_WEBRTC_ACTION.CHECK_SUPPORT+" call"+navigator.userAgent),new Promise((function(e){var o=s.getReportSeq();n.dataReport.newReport(o,u.ZegoRTCLogEvent.kZegoTaskCheckSystemRequirements.event);var c=i||"all",l=function(t){n.dataReport.addMsgInfo(o,{capability:u.ZegoRTCLogEvent.kZegoTaskCheckSystemRequirements.capability(t)}),n.dataReport.uploadReport(o);var i=n.stateCenter.checkList.indexOf(c);n.stateCenter.checkList.splice(i,1),e(t)};return["webRTC","customCapture","camera","microphone","screenSharing","H264","VP8","all"].includes(c)&&[0,1].includes(t)?n.stateCenter.checkList.includes(c)||n.stateCenter.checkList.includes("all")?l({result:!1,errInfo:{extendedDate:"The last test of the same type has not returned a result "}}):(n.stateCenter.checkList.push(c),void a.ClientUtil.supportDetection(r,l,t,i)):l({result:!1,errInfo:{extendedDate:"param error"}})}))},e.prototype.enumDevices=function(){var e=this;return this.logger.info("zc.ed.0 call"),new Promise((function(t,i){var n=s.getReportSeq();e.dataReport.newReport(n,u.ZegoRTCLogEvent.kZegoTaskEnumDevices.event),e.rtcModules.publishModule.recordDevices((function(i){var r=[];i.cameras.forEach((function(e){return r.push({device:e.deviceName,type:0})})),i.microphones.forEach((function(e){return r.push({device:e.deviceName,type:1})})),i.speakers.forEach((function(e){return r.push({device:e.deviceName,type:2})})),e.dataReport.addMsgInfo(n,{dev_list:u.ZegoRTCLogEvent.kZegoTaskEnumDevices.dev_list(r)}),e.dataReport.uploadReport(n),t(i)}),(function(t){e.dataReport.addMsgInfo(n,t),e.dataReport.uploadReport(n),i(t)}))}))},e.prototype.getAudioInfo=function(e,t,i){},e.prototype.getSoundLevel=function(e,t,i){this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.getSoundLevel(e,t,i):console.error("未引入混音模块")},e.prototype.stopSoundLevel=function(e){this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopSoundLevel(e):console.error("未引入混音模块")},e.handleDataAvailable=function(t){t.data&&t.data.size>0&&e.recordedBlobs.push(t.data)},e.prototype.startRecord=function(e){},e.prototype.stopRecord=function(){},e.prototype.resumeRecord=function(){},e.prototype.pauseRecord=function(){},e.prototype.saveRecord=function(e){},e.prototype.takeSnapShot=function(e,t){},e.prototype.saveSnapShot=function(e,t){},e.prototype.useVideoDevice=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.useVideoDevice(e,t):new Promise((function(e,t){e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.useAudioDevice=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.useAudioDevice(e,t):(console.error("should use advanced module first"),new Promise((function(e,t){e({errorCode:-1,extendedData:"should install advanced module"})})))},e.prototype.getElectronScreenSources=function(){return this.rtcModules.publishModule.getElectronScreenSources()},e.prototype.setSoundLevelDelegate=function(e,t){this.logger.info("zc.ssd.0 call"),"boolean"==typeof e?t&&(!this.stateCenter.checkInteger(t)||t<100||t>3e3)?this.logger.error("zc.ssd.0 soundLevel interval must be integer number which is between 100 and 3000"):this.streamCenter.setSoundLevelDelegate(e,t):this.logger.error("zc.ssd.0 param 1 must be boolean")},e.prototype.on=function(e,t){return this.rtcModules.bindListener(e,t)},e.prototype.off=function(e,t){return this.rtcModules.deleteListener(e,t)},e.prototype.getVersion=function(){return s.PROTO_VERSION},e.prototype.setStreamExtraInfo=function(e,t){return new Promise((function(e,t){console.error("should use advanced module first"),t()}))},e.prototype.addPublishCdnUrl=function(e,t){return this.logger.info("zg.cm.apu call ",e,t),this.rtcModules.advancedModule?this.rtcModules.advancedModule.publishTarget({type:"addpush",streamID:e,pushUrl:t}):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.removePublishCdnUrl=function(e,t){return this.logger.info("zg.cm.apu call ",e,t),this.rtcModules.advancedModule?this.rtcModules.advancedModule.publishTarget({type:"delpush",streamID:e,pushUrl:t}):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.startMixerTask=function(e){return new Promise((function(e,t){console.error("未引入混流模块"),t()}))},e.prototype.setMixerTaskConfig=function(e){return new Promise((function(e,t){console.error("未引入混流模块"),t()}))},e.prototype.stopMixerTask=function(e){return new Promise((function(e,t){console.error("未引入混流模块"),t()}))},e.prototype.setCaptureVolume=function(e,t){return this.rtcModules.publishModule.setCaptureVolume(e,t)},e.prototype.getRoomInfo=function(){var e=this.stateCenter.roomList[0];return null==e?void 0:e.streamHandler.getRoomInfo()},e.use=function(t){switch(t.type){case"AudioMix":t.install(d.RTCModules,f.ZegoPublish);break;case"MixStream":t.install(e,p.StreamHandler,d.RTCModules);break;case"Advance":t.install(e,d.RTCModules,p.StreamHandler,m.ZegoPreview,_.PlayModule,v.PublishModule,f.ZegoPublish,E.ZegoSignal);break;case"BeautyEffect":t.install(m.ZegoPreview);break;case"RangeAudio":case"DataChannel":t.install(e)}},e.prototype.createRangeAudioInstance=function(){throw new Error("should use range audio module")},e.prototype.createRealTimeSequentialDataManager=function(e){throw new Error("should use datachannel module")},e.prototype.destroyRealTimeSequentialDataManager=function(e){throw new Error("should use datachannel module")},e.prototype.enableDataChannel=function(e){"boolean"==typeof e&&(this.streamCenter.isDataChannelEnabled=e)},e.prototype.addTrack=function(e,t){return new Promise((function(e,t){throw new Error("use advanced module first")}))},e.prototype.removeTrack=function(e,t){return new Promise((function(e,t){throw new Error("use advanced module first")}))},e.prototype.setBeautyEffect=function(e,t,i){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setBeautyEffect(e,t,i):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.screenShotReady=!1,e}();t.ZegoWebRTC=S,window.addEventListener("message",(function(e){var t=e.data.type,i=e.origin;i!==window.location.origin&&console.warn("ScreenStream: you should discard foreign event from origin:",i),"SS_PING"===t&&(S.screenShotReady=!0)}))},4395:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckModule=void 0;var o=i(4767),s=function(){function e(){var e=this;this.iceconnectionstatechangeTimes=0,this.isCheckAll=!1;var t=document.createElement("canvas");t.getContext("2d").fillStyle="rgba(255, 255, 255, 0)";try{this.localStream=t.captureStream()}catch(e){console.error("canvas captureStream error",e)}this.timer=setTimeout((function(){e.resolve("Detection timeout"),e.hangup()}),5e3)}return e.prototype.checkSupportByType=function(e){return n(this,void 0,void 0,(function(){var t,i,n=this;return r(this,(function(r){switch(r.label){case 0:return this.checkType=e,t={},this.localPc=new RTCPeerConnection(t),this.remotePc=new RTCPeerConnection(t),i=new Promise((function(e){return n.resolve=e})),this.localPc.addEventListener("icecandidate",(function(e){return n.onIceCandidate(n.localPc,e)})),this.remotePc.addEventListener("icecandidate",(function(e){return n.onIceCandidate(n.remotePc,e)})),this.remotePc.addEventListener("iceconnectionstatechange",(function(t){"connected"===n.remotePc.iceConnectionState&&(n.iceconnectionstatechangeResult=!0),2==++n.iceconnectionstatechangeTimes&&n.iceCandidate&&(clearTimeout(n.timer),"connected"===n.remotePc.iceConnectionState?n.resolve(!0):n.resolve("The browser does not support "+e+" format"),n.hangup())})),this.localStream.getTracks().forEach((function(e){return n.localPc.addTrack(e,n.localStream)})),[4,this.check(e)];case 1:return r.sent(),[4,i];case 2:return[2,r.sent()]}}))}))},e.prototype.check=function(e){return n(this,void 0,void 0,(function(){var t,i;return r(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.localPc.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 1:return(t=n.sent()).sdp=o.SdpUtil.getSDPByVideDecodeType(t.sdp,e),this.onCreateOfferSuccess(t),[3,3];case 2:return i=n.sent(),this.onCreateSessionDescriptionError(i),[3,3];case 3:return[2]}}))}))},e.prototype.onCreateOfferSuccess=function(e){return n(this,void 0,void 0,(function(){var t,i,n,o;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.localPc.setLocalDescription(e)];case 1:return r.sent(),[3,3];case 2:return t=r.sent(),this.onSetSessionDescriptionError(t),[2];case 3:return r.trys.push([3,5,,6]),[4,this.remotePc.setRemoteDescription(e)];case 4:return r.sent(),[3,6];case 5:return i=r.sent(),this.onSetSessionDescriptionError(i),[2];case 6:return r.trys.push([6,9,,10]),[4,this.remotePc.createAnswer()];case 7:return n=r.sent(),[4,this.onCreateAnswerSuccess(n)];case 8:return r.sent(),[3,10];case 9:return o=r.sent(),this.onCreateSessionDescriptionError(o),[2];case 10:return[2]}}))}))},e.prototype.onCreateAnswerSuccess=function(e){return n(this,void 0,void 0,(function(){var t,i;return r(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.remotePc.setLocalDescription(e)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),this.onSetSessionDescriptionError(t),[2];case 3:return n.trys.push([3,5,,6]),[4,this.localPc.setRemoteDescription(e)];case 4:return n.sent(),[3,6];case 5:return i=n.sent(),this.onSetSessionDescriptionError(i),[2];case 6:return[2]}}))}))},e.prototype.onIceCandidate=function(e,t){return n(this,void 0,void 0,(function(){var i;return r(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getOtherPc(e).addIceCandidate(t.candidate)];case 1:return n.sent(),[3,3];case 2:return i=n.sent(),console.error(this.checkType,this.getPcName(e)+" addIceCandidate error",i),clearTimeout(this.timer),this.hangup(),this.resolve(i),[3,3];case 3:return"remotePc"===this.getPcName(e)&&t.candidate&&(this.iceCandidate=!0),this.iceconnectionstatechangeResult&&"localPc"===this.getPcName(e)&&(clearTimeout(this.timer),this.hangup(),this.resolve(!0)),[2]}}))}))},e.prototype.getOtherPc=function(e){return e===this.localPc?this.remotePc:this.localPc},e.prototype.getPcName=function(e){return e===this.localPc?"localPc":"remotePc"},e.prototype.onCreateSessionDescriptionError=function(e){console.error("Failed to create session description: "+e.toString()),clearTimeout(this.timer),this.hangup(),this.resolve(e)},e.prototype.onSetSessionDescriptionError=function(e){console.error("Failed to set session description: "+e.toString()),clearTimeout(this.timer),this.hangup(),this.resolve(e)},e.prototype.hangup=function(){this.localPc.close(),this.remotePc.close(),this.iceconnectionstatechangeTimes=0,this.localStream.getTracks().forEach((function(e){return e.stop()}))},e}();t.CheckModule=s},8493:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.RetryDispatchHandler=void 0;var o=i(6502),s=i(6706),a=i(1089),c=i(3529),l=i(2752),u=function(e){function t(t,i,n,r){var o=e.call(this)||this;return o.retryActiveCount=1,o.RETRY_MAX_TIME=90,o.logger=t,o.stateCenter=i,o.rtm=n,o.streamCenter=r,o}return r(t,e),t.prototype.initStream=function(e,t,i){this.streamID=e,this.playOption=t,this.isPublish=i},t.prototype.active=function(e){var t=this;if(this.logger.info(a.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" retry call "+this.streamID),this.stateCenter.networkState==s.ENUM_NETWORK_STATE.offline)return this.logger.info(a.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" network is broken, stop retry"),!1;if(this.retryTimer)return this.logger.info(a.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" has active, ignore"),!1;if(this.isOverTime)return this.logger.warn(a.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" retry over time, stop retry"),!1;if(!this.rtm.isLogin()){this.stopMaxTime(),this.invalid();var i=this.isPublish?this.streamCenter.publisherList[this.streamID]:this.streamCenter.playerList[this.streamID];i&&(i.isReDispatch=!0)}var n,r=this.retryActiveCount-1;if("PUBLIC"===this.stateCenter.type){var o=this.playOption&&2==this.playOption.resourceMode?1:0;n={stream_id:this.streamID,ptype:this.isPublish?"push":"pull",signals:this.streamCenter.getAllInUseUrl(),header_kvs:[{key:"grpc-metadata-push",value:this.playOption&&this.playOption.cdnUrl||""}],retry:r,center_ability:!0,dispatch_type:o}}else n={stream_id:this.streamID,dispatch_type:this.isPublish?1:2,stream_type:3,an_type:this.rtm.getAnType()};return this.retryTimer=setTimeout((function(){t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null,t.retryActiveCount++;var e=t.streamCenter.getRoomByStreamID(t.streamID),i=t.rtm.service.sendMessage("webrtc_url",n,(function(e,i){t.handleFetchWebRtcUrlRsp(e)}),(function(e,i){t.handleFetchWebRtcUrlRsp(e)}),void 0,{sessionID:null==e?void 0:e.sessionID,roomID:null==e?void 0:e.roomID,roomSessionID:null==e?void 0:e.roomSessionID});t.isPublish&&i?t.streamCenter.publisherList[t.streamID]&&(t.streamCenter.publisherList[t.streamID].seq=i):i&&t.streamCenter.playerList[t.streamID]&&(t.streamCenter.playerList[t.streamID].seq=i)}),"number"==typeof e?e:1e3*this.retryActiveInterval),this.logger.info(a.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" call success"),!0},t.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.maxTimer=setTimeout((function(){e.logger.warn(a.ZEGO_WEBRTC_ACTION.RDH_MAX_TIME+" "+e.streamID+" dispatch over max time "+e.RETRY_MAX_TIME+"s stop retry"),e.isOverTime=!0,e.invalid();var t=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError;t.message=t.message+" try max limit",e.isPublish?e.streamCenter.onPublishStateUpdate(s.ENUM_PUBLISH_STATE_UPDATE.error,e.streamID,t):e.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.error,e.streamID,t)}),1e3*this.RETRY_MAX_TIME))},t.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},t.prototype.onactive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.handleFetchWebRtcUrlRsp=function(e){if(e.code&&[l.errorCodeList.TIMEOUT.code].includes(e.code))this.active();else{if(e.code&&[l.errorCodeList.SOCKET_CLOSE.code].includes(e.code))return this.stopMaxTime(),this.invalid(),void(this.isPublish?this.streamCenter.publisherList[this.streamID].isReDispatch=!0:this.streamCenter.playerList[this.streamID].isReDispatch=!0);var t=e,i=t.body.stream_id,n=!1;if(this.isPublish&&(!this.streamCenter.publisherList[i]||t.header.seq!==this.streamCenter.publisherList[this.streamID].seq))return this.logger.warn(a.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" seq is not match, ignore "+this.streamID),this.stopMaxTime(),void this.invalid();if(!(this.isPublish||this.streamCenter.playerList[this.streamID]&&t.header.seq===this.streamCenter.playerList[this.streamID].seq))return this.logger.warn(a.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" seq is not match, ignore "+this.streamID),this.stopMaxTime(),void this.invalid();if("PUBLIC"===this.stateCenter.type){if(this.stateCenter.clientIP=t.body.clientip||"",0!==t.body.err_code&&2==t.body.need_action)return this.retryActiveInterval=t.body.action_delay/1e3||Math.floor(3*Math.random())+3,2==this.retryActiveCount&&((p=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError).message=p.message+(t.body.err_code?" server error:"+t.body.err_code:""),"push"===t.body.ptype?this.streamCenter.onPublishStateUpdate(s.ENUM_PUBLISH_STATE_UPDATE.retry,i,p):this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.retry,i,p)),void this.active();if(0!==t.body.err_code&&1!==t.body.need_action&&![3102].includes(t.body.err_code))return this.retryActiveInterval=Math.floor(3*Math.random())+3,2==this.retryActiveCount&&((p=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError).message=p.message+(t.body.err_code?" server error:"+t.body.err_code:""),"push"===t.body.ptype?this.streamCenter.onPublishStateUpdate(s.ENUM_PUBLISH_STATE_UPDATE.retry,i,p):this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.retry,i,p)),void this.active();if(this.stopMaxTime(),this.invalid(),t.body.urls&&Array.isArray(t.body.urls)&&t.body.urls.length>0?n=!0:this.logger.error(a.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" signal url is empty"),"push"===t.body.ptype&&this.streamCenter.publisherList[i]){if(!n)return void this.streamCenter.onPublishStateUpdate(s.ENUM_PUBLISH_STATE_UPDATE.error,i,c.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError);var r=this.streamCenter.publisherList[i];this.stateCenter.publishStreamList[i]?(r.ttl=t.body.hosts_ttl?(new Date).getTime()+1e3*t.body.hosts_ttl:0,r.isCenterNode="boolean"==typeof t.body.is_center_node&&t.body.is_center_node,r.serverUrls=t.body.urls,this.streamCenter.startPublishingStream(i)):this.logger.error(a.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" no streamid to publish")}else if("pull"==t.body.ptype&&this.streamCenter.playerList[i]){if(!n)return(p=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError).message=p.message+(t.body.err_code?" server error:"+t.body.err_code:""),3102===t.body.err_code&&(p=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayUnsupportedResourceMode),void this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.error,i,p);(f=this.streamCenter.playerList[i]).ttl=t.body.hosts_ttl?(new Date).getTime()+1e3*t.body.hosts_ttl:0,f.isCenterNode="boolean"==typeof t.body.is_center_node&&t.body.is_center_node,f.serverUrls=t.body.urls,this.streamCenter.startPlayingStream(i,this.streamCenter.playSuccessCallBackList[i])}}else{this.stopMaxTime(),this.invalid();var o=[],u=t.body.stream_url_info&&t.body.stream_url_info.stream_url,d=t.body.stream_url_info&&t.body.stream_url_info.ip_infos,h=/^ws(s)?:\/\/(.*?)\//;if(t.body.stream_url_info&&u&&d?n=!0:this.logger.error(a.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" signal url is empty"),d&&d.forEach((function(e){var t=e.ip_address+":"+e.port;o.push(u.replace(h.exec(u)[2],t))})),this.isPublish&&this.streamCenter.publisherList[i]){if(!n)return void this.streamCenter.onPublishStateUpdate(s.ENUM_PUBLISH_STATE_UPDATE.error,i,c.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError);r=this.streamCenter.publisherList[i],this.stateCenter.publishStreamList[i]?(r.serverUrls=o,this.streamCenter.startPublishingStream(i)):this.logger.error(a.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" no streamid to publish")}else if(!this.isPublish&&this.streamCenter.playerList[i]){var p,f;if(!n)return(p=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError).message=p.message+(t.body.err_code?" server error:"+t.body.err_code:""),void this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.error,i,p);(f=this.streamCenter.playerList[i]).serverUrls=o,this.streamCenter.startPlayingStream(i,this.streamCenter.playSuccessCallBackList[i])}}}},t}(o.RetryHandler);t.RetryDispatchHandler=u},6014:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.RetryStreamHandler=void 0;var o=i(6706),s=i(6502),a=i(3529),c=i(1089),l=i(608),u=function(e){function t(t,i,n,r){var o=e.call(this)||this;return o.logger=t,o.stateCenter=i,o.streamCenter=n,o.isPublish=r,o.serverUrls=[],o}return r(t,e),t.prototype.initStream=function(e,t){this.streamID=e,this.serverUrls=t},t.prototype.activePublish=function(e){var t=this;if(this.logger.info("zc.tsh.a retry call "+this.streamID),this.stateCenter.networkState==o.ENUM_NETWORK_STATE.offline)return this.logger.info("zc.tsh.a network is broken, stop retry"),!1;if(this.retryTimer)return this.logger.info("zc.tsh.a has active, ignore"),!1;if(this.isOverTime)return this.logger.warn("zc.tsh.a retry over time, stop retry"),!1;if(1==this.retryActiveCount)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var i=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1));this.retryActiveInterval=i>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:i}var n=this.streamCenter.publisherList[this.streamID].publisher,r=this.serverUrls,s=n.signal?n.signal.server:"";r.forEach((function(e,i){return i<=r.indexOf(s)&&t.serverUrls.push(e)})),r.splice(0,r.indexOf(s)+1);var a=this.serverUrls[this.retryActiveCount%this.serverUrls.length==0?this.serverUrls.length-1:this.retryActiveCount%this.serverUrls.length-1];return this.retryTimer=setTimeout((function(){t.logger.warn("zc.tsh.a stream "+t.streamID+" connect signal server "+a),t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null,t.retryActiveCount++,t.streamCenter.connectPublishServer(t.streamID,a)}),"number"==typeof e?e:1e3*this.retryActiveInterval),this.logger.info("zc.tsh.a call success"),!0},t.prototype.activePull=function(e,t){var i=this;if(this.logger.info("zc.tsh.a retry call "+this.streamID),t&&(this.playStreamSuccess=t),this.stateCenter.networkState==o.ENUM_NETWORK_STATE.offline)return this.logger.info("zc.tsh.a network is broken, stop retry"),!1;if(this.retryTimer)return this.logger.info("zc.tsh.a has active, ignore"),!1;if(this.isOverTime)return this.logger.warn("zc.tsh.a retry over time, stop retry"),!1;if(1==this.retryActiveCount)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var n=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1));this.retryActiveInterval=n>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:n}var r=this.streamCenter.playerList[this.streamID].player,s=this.serverUrls,a=r.signal?r.signal.server:"";s.forEach((function(e,t){return t<=s.indexOf(a)&&i.serverUrls.push(e)})),s.splice(0,s.indexOf(a)+1);var c=this.serverUrls[this.retryActiveCount%this.serverUrls.length==0?this.serverUrls.length-1:this.retryActiveCount%this.serverUrls.length-1];return this.retryTimer=setTimeout((function(){i.logger.warn("zc.tsh.a stream "+i.streamID+" connect signal server "+c),i.retryTimer&&clearTimeout(i.retryTimer),i.retryTimer=null,i.retryActiveCount++,i.streamCenter.connectPlayServer(i.streamID,i.playStreamSuccess,c)}),"number"==typeof e?e:1e3*this.retryActiveInterval),this.logger.info("zc.tsh.a call success"),!0},t.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.maxTimer=setTimeout((function(){if(e.logger.warn(e.streamID+" over max time "+e.RETRY_MAX_TIME+"s, stop retry"),e.isOverTime=!0,e.invalid(),e.isPublish){if(!e.streamCenter.publisherList[e.streamID])return void e.logger.info("zc.tsh.smt streamID "+e.streamID+" publish no found");e.publishStateHandle(o.ENUM_PUBLISH_STATE_UPDATE.error,e.streamID,a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishRetryTimeoutError,!0)}else{if(!e.streamCenter.playerList[e.streamID])return void e.logger.info("zc.tsh.smt streamID "+e.streamID+" play no found");e.playStateHandle(o.ENUM_PLAY_STATE_UPDATE.error,e.streamID,a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayRetryTimeoutError,!0)}}),1e3*this.RETRY_MAX_TIME))},t.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},t.prototype.onactive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.retryNextSignal=function(e){if(this.stateCenter.networkState==o.ENUM_NETWORK_STATE.offline)return!0;if(this.isPublish){var t=this.streamCenter.publisherList[this.streamID];if(t.publisher.state==o.ENUM_PUBLISH_STATE.stop&&[a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionTimeoutError.code,a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNegoTimeoutError.code].includes(e.code))return!0;if(t.isCenterNode&&t.publisher.signal&&t.publisher.signal.websocket&&1==t.publisher.signal.websocket.readyState)return!1;if(!t.isCenterNode&&[a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishSessionClosedError.code].includes(e.code)){var i=(n=e.message.match(/reason:(\d+)/))?n[1]:"";return!["26"].includes(i)}return!0}var n,r=this.streamCenter.playerList[this.streamID];return!(r.player.state!=o.ENUM_PLAY_STATE.stop||![a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionTimeoutError.code,a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNegoTimeoutError.code].includes(e.code))||!(r.isCenterNode&&r.player.signal&&r.player.signal.websocket&&1==r.player.signal.websocket.readyState)&&(!(!r.isCenterNode&&[a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlaySessionClosedError.code].includes(e.code))||(i=(n=e.message.match(/reason:(\d+)/))?n[1]:"",!["24","26","28"].includes(i)))},t.prototype.publishStateHandle=function(e,t,i,n){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" call "+t+" "+(i?i.code+"":""));var r=n||this.RETRY_MAX_TIME<3;if(!r&&i&&(l.ClientUtil.isReDispatch(i)||0==this.serverUrls.length))return this.stopMaxTime(),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,void this.streamCenter.onPublishStateUpdate(e,t,i);var s=this.streamCenter.publisherList[t],u=s.publisher;if(!r&&i&&0!==i.code){!this.maxTimer&&!r&&this.startMaxTime(),this.stateCenter.publishStreamList[t].state=o.ENUM_PUBLISH_STREAM_STATE.retryPublish;var d=u.localStream,h=u.videoInfo,p=u.mediaStreamConfig,f=u.publishOption;if(0!=u.sessionId&&u.signal&&u.shouldSendCloseSession()&&(u.signal.sendCloseSession(o.getSeq(),u.sessionId,1),u.signal.removeSession(u.sessionId),u.closeSessionSignal=!0),u.resetPublish(),!r&&!this.retryNextSignal(i)){if(s.isCenterNode&&u.gwNodeTTL<(new Date).getTime()&&0!==u.gwNodeList.length)u.gwNode="",u.gwNodeList=[],u.gwNodeTTL=0;else if(s.isCenterNode){var g=u.gwNodeList.findIndex((function(e){return e==u.gwNode}));u.gwNode=u.gwNodeList[++g%u.gwNodeList.length]}return void setTimeout((function(){u.startPublish(t,d,h,p,f)}),3e3)}this.streamCenter.removeStreamFromSignal(!0,t)}if(r)return this.stopMaxTime(),this.invalid(),1===e&&u.resetPublish(),void this.streamCenter.onPublishStateUpdate(e,t,i);if(i&&0!==i.code&&this.activePublish(void 0)){var m=o.getReportSeq();this.streamCenter.dataReport.newReport(m),this.streamCenter.dataReport.addMsgInfo(m,{stream:a.ZegoRTCLogEvent.kZegoTaskRePublish.stream(this.streamID)}),this.streamCenter.dataReport.uploadReport(m,a.ZegoRTCLogEvent.kZegoTaskRePublish.event),this.streamCenter.onPublishStateUpdate(2,t,i)}this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" end "+t)},t.prototype.playStateHandle=function(e,t,i,n){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" call "+t+" "+(i?i.code+"":""));var r=n||this.RETRY_MAX_TIME<3;if(!r&&i&&(l.ClientUtil.isReDispatch(i)||0==this.serverUrls.length))return this.stopMaxTime(),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,void this.streamCenter.onPlayStateUpdate(e,t,i);if(i&&0!==i.code){!this.maxTimer&&!r&&this.startMaxTime();var s=this.streamCenter.playerList[t],u=s.player,d=u.playOption;if(0!=u.sessionId&&u.signal&&u.shouldSendCloseSession()&&(u.signal.sendCloseSession(o.getSeq(),u.sessionId,1),u.signal.removeSession(u.sessionId),u.closeSessionSignal=!0),u.resetPlay(),!r&&!this.retryNextSignal(i)){if(s.isCenterNode&&u.gwNodeTTL<(new Date).getTime()&&0!==u.gwNodeList.length)u.gwNode="",u.gwNodeList=[],u.gwNodeTTL=0;else if(s.isCenterNode){var h=u.gwNodeList.findIndex((function(e){return e==u.gwNode}));u.gwNode=u.gwNodeList[++h%u.gwNodeList.length]}return void setTimeout((function(){u.startPlay(t,u.getRemoteStreamSuc,d)}),3e3)}this.streamCenter.removeStreamFromSignal(!1,t)}if(r)return this.stopMaxTime(),this.invalid(),void this.streamCenter.onPlayStateUpdate(e,t,i);if(i&&0!==i.code&&this.activePull(void 0)){var p=o.getReportSeq();this.streamCenter.dataReport.newReport(p),this.streamCenter.dataReport.addMsgInfo(p,{stream:a.ZegoRTCLogEvent.kZegoTaskRePlay.stream(this.streamID)}),this.streamCenter.dataReport.uploadReport(p,a.ZegoRTCLogEvent.kZegoTaskRePlay.event),this.streamCenter.onPlayStateUpdate(2,t,i)}this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" end "+t)},t}(s.RetryHandler);t.RetryStreamHandler=u},908:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCModules=void 0;var o=i(6706),s=i(3529),a=i(608),c=i(7560),l=i(361),u=i(4865),d=i(1089),h=i(2752),p=i(9595),f=function(){function e(e,t,i,n,r,o){this.logger=e,this.dataReport=t,this.stateCenter=i,this.streamCenter=n,this.rtm=r,this.ac=o,this.mediaEleSources=[],this.publishModule=new l.PublishModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.rtm),this.playModule=new u.PlayModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.rtm),this.initAdvance(),this.initAudioMix(),this.init()}return e.prototype.init=function(){this.bindWindowListener(),this.bindRTMListener(),this.bindStreamCenterHandler()},e.prototype.initAudioMix=function(){},e.prototype.initAdvance=function(){},e.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i),i=this.stateCenter.browser,n=t?"pagehide":"firefox"===i?"beforeunload":"unload";window.addEventListener(n,(function(){for(var t in window.event&&(window.event.cancelBubble=!0),e.streamCenter.publisherList)e.publishModule.stopPublishingStream(t);for(var t in e.streamCenter.playerList)e.playModule.stopPlayingStream(t)})),window.addEventListener("message",(function(t){var i=t.data,n=i.type,r=i.streamId,o=i.canRequestAudioTrack;"SS_DIALOG_SUCCESS"===n&&e.screenStreamFrom(r,o,a.ClientUtil.actionSuccessCallback("screenShare",e.stateCenter.callbackList)),"SS_DIALOG_CANCEL"===n&&a.ClientUtil.actionSuccessCallback("screenShare",e.stateCenter.callbackList)(!1,null,n)})),window.addEventListener("offline",(function(){for(var t in e.logger.info("zc.off.0 newtwork is broken"),e.stateCenter.networkState=o.ENUM_NETWORK_STATE.offline,e.streamCenter.publisherList)(i=e.streamCenter.publisherList[t].retryStreamHandler).startMaxTime(),i.invalid();for(var t in e.streamCenter.playerList){var i;(i=e.streamCenter.playerList[t].retryStreamHandler).startMaxTime(),i.invalid()}})),window.addEventListener("online",(function(t){for(var i in e.logger.info("zc.on.0 network is online"),e.stateCenter.networkState=o.ENUM_NETWORK_STATE.online,e.streamCenter.publisherList){var n=e.streamCenter.publisherList[i].publisher,r=e.streamCenter.publisherList[i].retryStreamHandler;n.state==o.ENUM_PUBLISH_STATE.stop||n.stateNego!==o.ENUM_PUBLISH_STATE_NEGO.iceConnected?!r.isOverTime&&r.publishStateHandle(o.ENUM_PUBLISH_STATE_UPDATE.error,i,s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNetworkBrokenError):n.state==o.ENUM_PUBLISH_STATE.publishing&&r.stopMaxTime()}for(var i in e.streamCenter.playerList){var a=e.streamCenter.playerList[i].player;r=e.streamCenter.playerList[i].retryStreamHandler,a.state==o.ENUM_PLAY_STATE.stop||a.stateNego!==o.ENUM_PLAY_STATE_NEGO.iceConnected?!r.isOverTime&&r.playStateHandle(o.ENUM_PLAY_STATE_UPDATE.error,i,s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNetworkBrokenError):a.state==o.ENUM_PLAY_STATE.playing&&r.stopMaxTime()}})),window.addEventListener("visibilitychange",(function(t){if(Object.keys(e.streamCenter.publisherList).length>0||Object.keys(e.streamCenter.playerList).length>0){var i=o.getReportSeq();e.dataReport.newReport(i,s.ZegoRTCLogEvent.kZegoVisibilityChange.event),e.dataReport.uploadReport(i)}}))},e.prototype.bindRTMListener=function(){var e,t,i=this;this.rtm._on("_settingCanFetch",(function(e){return n(i,void 0,void 0,(function(){var e=this;return r(this,(function(t){return this.rtm.cloudSetting.fetchSetting(p.RTC).then((function(t){e.logger.info("zc.scf stream config "+JSON.stringify(t)),e.rtm._on("_cloudSettingNotify",(function(t,i){var n=o.getReportSeq();e.dataReport.newReport(n,s.ZegoRTCLogEvent.kZegoTaskCloudSettingRefresh.event);var r=e.rtm.cloudSetting.getEnvVariables();e.dataReport.addMsgInfo(n,{params:r,files:[{name:t,content:i.setting,versions:i.versions}]}),e.dataReport.uploadReport(n),p.RTC}))})),[2]}))}))})),this.rtm._on("roomLoginResponse",(function(e){i.logger.info("zc.rlr call "+JSON.stringify(e));var t=e.header.room_id;i.stateCenter.appid=i.rtm.getAppID(),i.stateCenter.idName=i.rtm.getUserID(),i.stateCenter.testEnvironment=i.rtm.isTestEnvironment(),i.stateCenter.isMultiRoom=i.rtm.getMultiRoom(),i.streamCenter.setSessionInfo(i.stateCenter.appid,i.stateCenter.idName,i.stateCenter.testEnvironment);var n=i.rtm.getToken(t),r=i.rtm.getSessionId(t),o=i.rtm.getRoomSessionID(t),s=i.stateCenter.getRoomByRoomID(t);if(!s){var a=new c.StreamHandler(i.logger,i.stateCenter,i.rtm,i.streamCenter,t);i.bindStreamHandler(a),s={roomID:t,streamHandler:a,sessionID:r,roomSessionID:o,token:n,isResetRoom:!1,streamList:[],streamInfoList:[]},i.stateCenter.roomList.push(s)}s.sessionID=r,s.roomSessionID=o,s.streamHandler.handleStreamStart(e,s),i.logger.info("zc.rlr end "+t)})),this.rtm._on("HBResponse",(function(e){var t,n=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,r=i.stateCenter.getRoomByRoomID(n);"PUBLIC"===i.stateCenter.type&&(null==r||r.streamHandler.patchStreamList(e))})),this.rtm._on("_roomStateUpdate",(function(e,t,n,r){if("DISCONNECTED"==t){i.logger.info("zc.rsu "+e+" disconnected "+(n?n+" ":"")+(r||""));var o=i.stateCenter.getRoomByRoomID(e);if(o){var s=i.stateCenter.roomList.findIndex((function(t){return t.roomID==e}));o.isResetRoom=!0,o.streamHandler.reset(),i.streamCenter.reset(e),i.stateCenter.roomList.splice(s,1)}}else i.logger.info("zc.rsu "+e+" state: "+t)})),this.rtm._on("_tokenRenewed",(function(e,t){i.logger.info("zc.tr roomID:"+t+" "+e);var n=i.stateCenter.getRoomByRoomID(t);n&&(n.token=e)})),this.rtm._on("_tokenExpired",(function(e){var t,n;((null===(n=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.stop_stream)||void 0===n?void 0:n.stream_id_list)||[]).forEach((function(e){i.publishModule.stopPublishingStream(e,h.errorCodeList.TOKEN_EXPIRED)}))})),this.rtm.service.on("stream",(function(e){var t,n=(null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id)||"",r=i.stateCenter.getRoomByRoomID(n);r?r.streamHandler.handleStreamUpdateRsp(e):i.logger.error(d.ZEGO_WEBRTC_ACTION.ON_STREAM+" room no found")})),null===(e=this.rtm.service)||void 0===e||e.on("push_stream_update",(function(e){var t,n=(null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id)||"",r=i.stateCenter.getRoomByRoomID(n);r?r.streamHandler.handlePushStreamUpdateMsg(e):i.logger.error(d.ZEGO_WEBRTC_ACTION.ON_PUSH_STREAM_UPDATE+" room no found")})),null===(t=this.rtm.service)||void 0===t||t.on("zegochat_js.push_room_stream_update_req",(function(e){var t,n=(null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id)||"",r=i.stateCenter.getRoomByRoomID(n);r?r.streamHandler.handlePriPushStreamUpdateMsg(e):i.logger.error(d.ZEGO_WEBRTC_ACTION.ON_STREAM+" room no found")}))},e.prototype.bindStreamCenterHandler=function(){var e=this;this.streamCenter.onPlayStateUpdate=function(t,i,n){var r=e.stateCenter.reportSeqList.startPlay[i],o=e.streamCenter.playerList[i];if(1==t&&o&&a.ClientUtil.isReDispatch(n)){var s=o.player,c=o.retryDispatchHandler,l=o.playOption;return 0!=s.sessionId&&s.signal&&s.shouldSendCloseSession()&&(s.signal.sendCloseSession(e.stateCenter.getSeq(),s.sessionId,1),s.signal.removeSession(s.sessionId),s.closeSessionSignal=!0),s.resetPlay(),c.stopMaxTime(),c.invalid(),c.initStream(i,l,!1),void(e.rtm.isLogin()?(c.startMaxTime(),c.active(0)):e.streamCenter.playerList[i].isReDispatch=!0)}o&&o.player&&(0==t||1==t)&&r&&(e.dataReport.eventEndWithMsgInfo(r,"PlayState",{type:t}),1==t&&n&&e.dataReport.addMsgInfo(r,n),e.dataReport.uploadReport(r),delete e.stateCenter.reportSeqList.startPlay[i]),1===t&&e.streamCenter.playErrorCallBackList[i]?(e.streamCenter.playErrorCallBackList[i]({errorCode:n&&n.code,extendedData:n&&n.message}),delete e.streamCenter.playErrorCallBackList[i],e.logger.info("zc.opsu.1 stop play called by sdk"),e.playModule.stopPlayingStream(i,n)):e.stateCenter.actionListener("playerStateUpdate",{state:a.ClientUtil.getPlayerStateType(t),streamID:i,errorCode:n&&n.code,extendedData:n&&n.message})},this.streamCenter.onPublishStateUpdate=function(t,i,n){e.onPublishStateUpdateHandle(t,i,n)},this.streamCenter.onPublishQualityUpdate=function(t,i){e.stateCenter.actionListener("publishQualityUpdate",t,i)},this.streamCenter.onPlayQualityUpdate=function(t,i){e.stateCenter.actionListener("playQualityUpdate",t,i)},this.streamCenter.onRemoteCameraStatusUpdate=function(t,i,n){var r=o.getReportSeq();e.dataReport.newReport(r,s.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.event),e.dataReport.addMsgInfo(r,{stream:s.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.stream(t),status:s.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.status(i)}),e.dataReport.uploadReport(r),e.stateCenter.actionListener("remoteCameraStatusUpdate",t,i),e.stateCenter.actionListener("_remoteCameraStatusUpdate",t,n)},this.streamCenter.onRemoteMicStatusUpdate=function(t,i,n){var r=o.getReportSeq();e.dataReport.newReport(r,s.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.event),e.dataReport.addMsgInfo(r,{stream:s.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.stream(t),status:s.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.status(i)}),e.dataReport.uploadReport(r),e.stateCenter.actionListener("remoteMicStatusUpdate",t,i),e.stateCenter.actionListener("_remoteMicStatusUpdate",t,n)},this.streamCenter.onSoundLevelUpdate=function(t){e.stateCenter.actionListener("soundLevelUpdate",t)},this.streamCenter.onMicSoundLevelUpdate=function(t){e.stateCenter.actionListener("capturedSoundLevelUpdate",t)}},e.prototype.bindStreamHandler=function(e){var t=this;e.onStreamUpdated=function(e,i,n){var r;r="PRIVATE"===t.stateCenter.type?n.map((function(e){return{streamID:e.stream_id,user:{userID:e.user_id,userName:e.user_name},extraInfo:e.extra_info,title:e.title,streamVer:e.stream_ver}})):n.map((function(e){return{streamID:e.streamID,user:e.user,extraInfo:e.extraInfo,urlsFLV:e.urlFlv,urlsRTMP:e.urlRtmp,urlsHLS:e.urlHls,urlsHttpsFLV:e.urlHttpsFlv,urlsHttpsHLS:e.urlHttpsHls}}));var c={};if(0===i){var l=n.map((function(e){return{stream_id:e.streamID,code:o.STREAM_DELETE_REASON[e.closeType]&&o.STREAM_DELETE_REASON[e.closeType].code||0,description:o.STREAM_DELETE_REASON[e.closeType]&&o.STREAM_DELETE_REASON[e.closeType].description||"unknown"}}));c.stream_delete_reason=l}var u=o.getReportSeq();if(t.dataReport.newReport(u,s.ZegoRTCLogEvent.kZegoTaskLiveRoomGetStreamUpdateInfo.event),t.dataReport.addMsgInfo(u,{stream_update_type:s.ZegoRTCLogEvent.kZegoTaskLiveRoomGetStreamUpdateInfo.stream_update_type(1===i?"added":"deleted"),update_stream:s.ZegoRTCLogEvent.kZegoTaskLiveRoomGetStreamUpdateInfo.update_stream(r)}),t.dataReport.uploadReport(u),t.stateCenter.actionListener("roomStreamUpdate",e,a.ClientUtil.getSteamUpdateType(i),r,Object.keys(c).length>0?JSON.stringify(c):""),t.stateCenter.actionListener("_streamUpdated",i,n),1===i){var d=[];r.forEach((function(e){e.extraInfo&&d.push({streamID:e.streamID,user:e.user,extraInfo:e.extraInfo})})),d.length>0&&t.stateCenter.actionListener("streamExtraInfoUpdate",e,d)}},e.onPublishStateUpdate=function(e,i,n){t.logger.info("zb.opsu ",i);var r=t.stateCenter.reportSeqList.startPublish[i],o=t.streamCenter.publisherList[i];o&&o.publisher&&(0==e||1==e)&&r&&(t.dataReport.eventEndWithMsgInfo(r,"PublishState",{type:e}),1==e&&t.dataReport.addMsgInfo(r,n),t.dataReport.uploadReport(r),delete t.stateCenter.reportSeqList.startPublish[i]),t.stateCenter.actionListener("publisherStateUpdate",{state:a.ClientUtil.getPublisherStateType(e),streamID:i,errorCode:n.code,extendedData:n.message})},e.onStreamExtraInfoUpdated=function(e,i){var n;n="PUBLIC"===t.stateCenter.type?i.map((function(e){return{streamID:e.streamID,user:e.user,extraInfo:e.extraInfo}})):i.map((function(e){return{streamID:e.stream_id,user:{userID:e.user_id,userName:e.user_name},extraInfo:e.extra_info,title:e.title,streamVer:e.stream_ver}}));var r=o.getReportSeq();t.dataReport.newReport(r,s.ZegoRTCLogEvent.kZegoTaskLiveRoomGetStreamExtraInfo.event),t.dataReport.addMsgInfo(r,{update_stream:s.ZegoRTCLogEvent.kZegoTaskLiveRoomGetStreamExtraInfo.update_stream(n)}),t.dataReport.uploadReport(r),t.stateCenter.actionListener("streamExtraInfoUpdate",e,n)}},e.prototype.screenStreamFrom=function(e,t,i){var n={};n.audio={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e}},n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxWidth:window.screen.width,maxHeight:window.screen.height}},!t&&(n.audio=!1),navigator.mediaDevices.getUserMedia(n).then((function(e){i(!0,e)})).catch((function(e){i(!1,null,e)}))},e.prototype.onPublishStateUpdateHandle=function(e,t,i){var n=this;this.logger.info("zc.opsuh.0 call");var r=this.streamCenter.publisherList[t],s=r.room;if(s)if(0==e){if(this.stateCenter.publishStreamList[t])if([o.ENUM_PUBLISH_STREAM_STATE.tryPublish,o.ENUM_PUBLISH_STREAM_STATE.retryPublish].includes(this.stateCenter.publishStreamList[t].state)&&!s.streamList.find((function(e){return e.stream_id==t}))){var c;this.stateCenter.publishStreamList[t].state=o.ENUM_PUBLISH_STREAM_STATE.update_info,c="PUBLIC"===this.stateCenter.type?o.ENUM_STREAM_SUB_CMD.liveBegin:o.ENUM_STREAM_CMD_PRI.liveBegin,s.streamHandler.updateStreamInfo(t,c,this.stateCenter.publishStreamList[t].extra_info,(function(e){"PRIVATE"===n.stateCenter.type&&n.stateCenter.publishStreamList[t]&&n.stateCenter.publishStreamList[t].state==o.ENUM_PUBLISH_STREAM_STATE.update_info&&(n.stateCenter.publishStreamList[t].state=o.ENUM_PUBLISH_STREAM_STATE.stop,s.streamHandler.onPublishStateUpdate(1,t,e),n.publishModule.stopPublishingStream(t))}))}else this.stateCenter.publishStreamList[t].state=o.ENUM_PUBLISH_STREAM_STATE.publishing,this.WebrtcOnPublishStateUpdateHandle(e,t,i)}else{if(1==e&&r&&a.ClientUtil.isReDispatch(i)){var l=r.publisher,u=r.retryDispatchHandler,d=r.publishOption;return 0!=l.sessionId&&l.signal&&l.shouldSendCloseSession()&&(l.signal.sendCloseSession(this.stateCenter.getSeq(),l.sessionId,1),l.signal.removeSession(l.sessionId),l.closeSessionSignal=!0),l.resetPublish(),u.stopMaxTime(),u.invalid(),u.initStream(t,d,!0),void(this.rtm.isLogin()?(u.startMaxTime(),u.active(0)):this.streamCenter.publisherList[t].isReDispatch=!0)}s.streamHandler.onPublishStateUpdate(e,t,i),1==e&&(this.logger.info("zc.opsuh.0 stop publish called by sdk"),this.publishModule.stopPublishingStream(t,i))}else this.logger.error("zc.opsuh.0 room not exist")},e.prototype.WebrtcOnPublishStateUpdateHandle=function(e,t,i){if(this.stateCenter.publishStreamList[t].state==o.ENUM_PUBLISH_STREAM_STATE.publishing){var n=this.streamCenter.getRoomByStreamID(t);n&&n.streamHandler.onPublishStateUpdate(e,t,i)}},e.prototype.bindListener=function(e,t){return this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error("zc.o.0 listener callBack must be funciton"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),!0):(this.logger.error("zc.o.0 event "+e+" no found"),!1)},e.prototype.deleteListener=function(e,t){if(!this.stateCenter.listenerList[e])return this.logger.error("zc.o.1 listener no found"),!1;var i=this.stateCenter.listenerList[e];return t?i.splice(i.indexOf(t),1):this.stateCenter.listenerList[e]=[],!0},e}();t.RTCModules=f},4865:function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayModule=void 0;var r=i(1089),o=i(6706),s=i(3529),a=i(608),c=function(){function e(e,t,i,n,r){this.logger=e,this.dataReport=t,this.stateCenter=i,this.streamCenter=n,this.rtm=r}return e.prototype.startPlayingStream=function(e,t,i){var n=this;return this.logger.info(r.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" call ",e),new Promise((function(r,o){return n._handlePlayStream(e,t,r,o,i)}))},e.prototype._handlePlayStream=function(e,t,i,c,l){var u=this,d=o.getReportSeq();this.stateCenter.reportSeqList.startPlay[e]=d,this.dataReport.newReport(d,s.ZegoRTCLogEvent.kZegoTaskPlayStart.event);var h,p=function(t,i){u.logger.error(r.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" "+(i||t.message)),u.dataReport.uploadReport(d,void 0,t,i),delete u.stateCenter.reportSeqList.startPlay[e],c&&c(n(n({},t),{errorCode:t.code,extendedData:t.message+(i?" "+i:"")}))};if(void 0===e||"string"!=typeof e||""===e)return p(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayParamError,"stream id type error"),!1;if(e.length>o.MAX_STREAM_ID_LENGTH)return p(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayStreamIDToLongError,"stream id length limit "+o.MAX_STREAM_ID_LENGTH),!1;if(!a.ClientUtil.checkIllegalCharacters(e))return p(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayStreamIDInvalidCharacterError),!1;if(void 0!==t&&"object"!=typeof t)return p(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayParamError,"playOption must be object"),!1;if(this.stateCenter.customUrl&&0!=this.stateCenter.customUrl.length)this.logger.info("zc.p.sps.1 customUrl "+JSON.stringify(this.stateCenter.customUrl)),h=this.stateCenter.customUrl;else{var f=this.stateCenter.settingConfig.getSetting("signal_nodes",!0);f&&f instanceof Array&&f.length>0&&(h=f,this.logger.info("zc.p.sps.1 setting config signal_nodes "+JSON.stringify(f)))}if(h)return this.streamCenter.setPlayStateStart(e,t,l)?(this.streamCenter.onPlayStateUpdate(o.ENUM_PLAY_STATE_UPDATE.retry,e,{code:0,message:""}),this.streamCenter.playerList[e].serverUrls=h,this.streamCenter.startPlayingStream(e,(function(e){i&&i(e)}))):(p(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayRepeatedPullError,"cannot start play"),!1);if(this.dataReport.addMsgInfo(d,{stream:s.ZegoRTCLogEvent.kZegoTaskPlayStart.stream(e),playOption:s.ZegoRTCLogEvent.kZegoTaskPlayStart.playOption(t)}),this.rtm.service.isDisConnect())return p(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNoLoginError),!1;this.stateCenter.pullLimited||(e=NaN+e),t&&t.videoCodec&&(t.videoCodec=t.videoCodec.toUpperCase());var g=this.stateCenter.settingConfig.getSetting("resource_mode",!0);if(g&&(this.logger.info(r.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM," setting resource_mode "+g),!t&&(t={}),t.resourceMode=g),!this.streamCenter.setPlayStateStart(e,t,l))return p(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayRepeatedPullError,"cannot start play"),!1;this.streamCenter.onPlayStateUpdate(o.ENUM_PLAY_STATE_UPDATE.retry,e,{code:0,message:""}),this.streamCenter.playSuccessCallBackList[e]=function(e){i&&i(e)},c&&(this.streamCenter.playErrorCallBackList[e]=c);var m=this.streamCenter.playerList[e].retryDispatchHandler;return m.stopMaxTime(),m.invalid(),m.initStream(e,t,!1),m.startMaxTime(),m.active(0)},e.prototype.stopPlayingStream=function(e,t){this.logger.info(r.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call",e);var i=o.getReportSeq();if(this.stateCenter.reportSeqList.stopPlay[e]=i,this.dataReport.newReport(i,s.ZegoRTCLogEvent.kZegoTaskPlayStop.event),this.dataReport.addMsgInfo(i,{stream:s.ZegoRTCLogEvent.kZegoTaskPlayStop.stream(e)}),"string"!=typeof e||""===e)return this.logger.error(r.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" streamid must be string and not empty"),this.dataReport.uploadReport(i,void 0,s.ZegoRTCLogEvent.kZegoTaskPlayStop.error.kParamError,"stream id type error"),void delete this.stateCenter.reportSeqList.stopPlay[e];var n=this.streamCenter.playerList[e],a=n&&n.player&&n.player.state!==o.ENUM_PLAY_STATE.stop;for(var c in this.streamCenter.stopPlayingStream(e),this.stateCenter.streamUrlMap)if(this.stateCenter.streamUrlMap[c]===e){delete this.stateCenter.streamUrlMap[c];break}this.dataReport.uploadReport(i),a&&this.streamCenter.onPlayStateUpdate(o.ENUM_PLAY_STATE_UPDATE.error,e,t||{code:0,message:""}),this.logger.debug(r.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call success")},e.prototype.mutePlayStream=function(e,t,i){return new Promise((function(e,t){e(!1)}))},e.prototype.setStreamAudioOutput=function(e,t){return!1},e}();t.PlayModule=c},5634:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayStreamQuality=void 0;var n=i(6706),r=i(1089),o=i(3529),s=i(608),a=function(){function e(e,t,i,r){this.player=t,this.logger=i,this.dataReport=r,this.playQualityList=[],this.maxQualityListCount=10,this.qualityTimer=null,this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,audioPacketsReceived:0,videoPacketsReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0,audioBitrate:0},this.decodeStartTime=0,this.netQuality=0,this.probeTime=0,this.probeInterval=6e4,this.probeState=n.ENUM_PROBE_STATE.probed,this.probeTimer=null,this.probeTimeoutInterval=3e4,this.qualityUpload=!1,this.qualityUploadInterval=3e4,this.qualityUploadLastTime=0,this.cumulativeQuality={},this.audioBreakThreshold=200,this.videoBreakThreshold=500,this.videoBreak={breakStartTime:void 0,cumulativeBreakDuration:0,cumulativeDecodeDuration:0,decodeStartTime:void 0,decodeEndTime:void 0,totalDuration:0,noBreakNoDecodeDuration:0,resumeRecv:!0},this.audioBreak={breakStartTime:void 0,cumulativeBreakDuration:0,cumulativeDecodeDuration:0,decodeStartTime:void 0,decodeEndTime:void 0,totalDuration:0,noBreakNoDecodeDuration:0,resumeRecv:!0},this.lastSampleTime=0,this.videoBreakReport={breakDuration:0,breakCancelDuration:0,decodeTime:0},this.audioBreakReport={breakDuration:0,breakCancelDuration:0,decodeTime:0},this.totalQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0,audioBytesReceived:0},this.currentSecondQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0},this.onBreakEnd=function(e,t,i,n){if(void 0===n&&(n="video"),t.breakStartTime){var r=e-t.breakStartTime;r>=i&&(t.cumulativeBreakDuration+=r),t.breakStartTime=void 0}},this.p2pNetStats={p2pLostRate:0,p2pRTT:0},this.sampleTimes=0,this.qualitySampleInterval=1e3,this.qualityTimeInterval=e}return Object.defineProperty(e.prototype,"streamId",{get:function(){return this.player.streamId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.player.sessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"peerID",{get:function(){return this.player.peerID},enumerable:!1,configurable:!0}),e.prototype.getPlayStats=function(e,t){var i=this;if(null!=e){var a=this.sampleTimes%parseInt((this.qualityTimeInterval/this.qualitySampleInterval).toString())==0;this.sampleTimes,parseInt((this.qualityTimeInterval/this.qualitySampleInterval).toString()),a&&this.getP2PNetStats();for(var c,l=document.querySelectorAll("video, audio"),u=0;u<l.length;u++)l[u].srcObject===this.player.playStream&&(c=l[u]);var d={sampleTimeWindow:this.qualityTimeInterval,audioFractionLost:0,audioPacketsLost:0,audioPacketsLostRate:0,audioBitrate:0,audioLevel:0,audioSendLevel:0,audioSamplingRate:0,audioCodec:"opus",audioQuality:0,audioFPS:0,videoQuality:0,videoPacketsLost:0,videoPacketsLostRate:0,videoBitrate:0,videoFPS:0,playData:0,nackCount:0,pliCount:0,audioJitter:0,videoFractionLost:0,videoFramesDecoded:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoFramesDropped:0,totalRoundTripTime:0,currentRoundTripTime:0,googBandwidthLimitedResolution:void 0,videoCodecName:"",audioCodecName:"",googCpuLimitedResolution:void 0,googAvailableSendBandwidth:0,audioMuteState:this.player.audioMuteState,videoMuteState:this.player.videoMuteState,muted:c?c.muted:void 0,paused:c?c.paused:void 0,volume:c?c.volume:void 0,sinkId:c?c.sinkId:void 0},h=this.lastPlayStats.time,p=0,f=0,g=0,m=0,_=0,v=0,E=0,A=null,y=null;e.forEach((function(e){["ssrc","inbound-rtp"].includes(e.type)&&("video"==e.mediaType||e.id.indexOf("VideoStream")>=0)&&(A=e),("inbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesReceived)&&("audio"==e.mediaType||e.id.indexOf("AudioStream")>=0)&&(y=e)}));var S=function(e,t,n,o,s,a,c,l,u){if(void 0===l&&(l=c),void 0===u&&(u="video"),s>1e3&&(s=1e3),o.breakStartTime)if(n)if(0===t)e-o.breakStartTime>=22e3&&i.onBreakEnd(e,o,s,u),a.breakDuration+=1e3;else if(c>=s)if(c<500)if(c+l<1e3){var d=e-(1e3-l);i.onBreakEnd(d,o,s,u),o.breakStartTime=e-c,a.breakDuration+=l+c,a.decodeTime+=1e3-(l+c)}else i.onBreakEnd(e-1e3+l,o,s,u),o.breakStartTime=e-1e3+l,a.breakDuration+=1e3;else c>=500&&(i.onBreakEnd(e-c,o,s,u),o.breakStartTime=e-c,a.breakDuration+=1e3);else l<=s?(i.onBreakEnd(e-1e3+l,o,s,u),o.breakStartTime=void 0,a.breakDuration+=l,a.decodeTime+=1e3-l):a.breakDuration+=1e3;else{o.resumeRecv=!1;var h=e-1e3,p=h-o.breakStartTime;p<=0&&(i.logger.error(r.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" breakCancelDuration less than 0.  ("+o.breakStartTime+", "+h+")"),p=0),o.breakStartTime=void 0,o.noBreakNoDecodeDuration+=p,a.breakCancelDuration+=p}else n?0===t?o.resumeRecv?(o.breakStartTime=e-1e3,a.breakDuration+=1e3):o.noBreakNoDecodeDuration+=1e3:l>s?o.resumeRecv?(o.breakStartTime=e-l,a.breakDuration+=l,a.decodeTime+=1e3-l):o.noBreakNoDecodeDuration+=1e3:a.decodeTime+=1e3:o.decodeStartTime&&(0===t?(o.resumeRecv=!1,o.noBreakNoDecodeDuration+=1e3):a.decodeTime+=1e3);n&&t&&(o.resumeRecv=!0)},C=(new Date).getTime(),b=function(e,t){return e>t?e-t:0};this.lastSampleTime||(this.lastSampleTime=C-1e3);var T=A.totalInterFrameDelay,I=A.framesDecoded,R=A.totalSquaredInterFrameDelay,w=b(I,this.totalQuality.framesDecode);this.totalQuality.framesDecode=I;var O=b(T,this.totalQuality.totalInterFrameDelay);this.totalQuality.totalInterFrameDelay=T;var k=b(R,this.totalQuality.totalSquaredInterFrameDelay);this.totalQuality.totalSquaredInterFrameDelay=R;var N=(k-Math.pow(O,2)/(w||1))/(w||1);N=N>0?N:-N;var L=parseInt((1e3/(w+1)).toString()),P=1e3*Math.sqrt(N),D=O/(w||1)*1e3||L,M=(D=parseInt((D>1e3?1e3:D).toString()))+P;M=parseInt((M>1e3?1e3:M).toString()),w>0&&0===this.player.cameraStatus&&!this.videoBreak.decodeStartTime&&(this.videoBreak.decodeStartTime=C-1e3),this.videoBreak.decodeStartTime&&S(C,w,0===this.player.cameraStatus&&this.player.playMediaStatus.video,this.videoBreak,this.videoBreakThreshold,this.videoBreakReport,D,M);var x=y.totalSamplesReceived,B=y.concealedSamples,U=y.bytesReceived,F=b(x,this.totalQuality.totalSamplesReceived);this.totalQuality.totalSamplesReceived=x;var V=b(B,this.totalQuality.concealedSamples);this.totalQuality.concealedSamples=B;var j=b(U,this.totalQuality.audioBytesReceived);this.totalQuality.audioBytesReceived=U;var G=parseInt((V/(F||1)*1e3).toString());if(j>0&&0===this.player.micStatus&&!this.audioBreak.decodeStartTime&&(this.audioBreak.decodeStartTime=C-1e3),this.audioBreak.decodeStartTime&&S(C,j,0===this.player.micStatus&&this.player.playMediaStatus.audio,this.audioBreak,this.audioBreakThreshold,this.audioBreakReport,G,G,"audio"),t&&t.result().forEach((function(e){a&&("ssrc"==e.type&&(e.names().indexOf("googBandwidthLimitedResolution")>=0&&(d.googBandwidthLimitedResolution=e.stat("googBandwidthLimitedResolution")),e.names().indexOf("codecImplementationName")>=0&&(d.codecImplementationName=e.stat("codecImplementationName")),"video"==e.stat("mediaType")&&(e.names().indexOf("googCodecName")>=0&&(d.videoCodecName=e.stat("googCodecName")),e.names().indexOf("googCurrentDelayMs")>=0&&(E=e.stat("googCurrentDelayMs"))),"audio"==e.stat("mediaType")&&(e.names().indexOf("googCodecName")>=0&&(d.audioCodecName=e.stat("googCodecName")),e.names().indexOf("googCurrentDelayMs")>=0&&(v=e.stat("googCurrentDelayMs"))),e.names().indexOf("googCpuLimitedResolution")>=0&&(d.googCpuLimitedResolution=e.stat("googCpuLimitedResolution"))),"VideoBwe"==e.type&&e.names().indexOf("googAvailableSendBandwidth")>=0&&(d.googAvailableSendBandwidth=e.stat("googAvailableSendBandwidth")))})),a){e.forEach((function(e){if(("inbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesReceived)&&("audio"==e.mediaType||e.id.indexOf("AudioStream")>=0)){0!=h&&(d.audioBitrate=8*(e.bytesReceived-i.lastPlayStats.audioBytesReceived)/(e.timestamp-h),(r=e.packetsLost-i.lastPlayStats.audioPacketsLost)>0&&(f=r/(r+e.packetsReceived-i.lastPlayStats.audioPacketsReceived))),d.audioBitrate<0&&(d.audioBitrate=0),d.audioJitter=e.jitter,e.packetsLost>0&&(d.audioPacketsLost=e.packetsLost),d.audioFractionLost=e.fractionLost;var t=e.packetsLost-i.lastPlayStats.audioPacketsLost;d.audioFPS=(e.packetsReceived-i.lastPlayStats.audioPacketsReceived)/(e.timestamp-h)*1e3,d.audioPacketsLostRate=t>0?t/(e.packetsReceived-i.lastPlayStats.audioPacketsReceived+t):0,i.lastPlayStats.audioBytesReceived=e.bytesReceived,e.packetsLost>0&&(i.lastPlayStats.audioPacketsLost=e.packetsLost),i.lastPlayStats.audioPacketsReceived=e.packetsReceived,i.lastPlayStats.audioTime=e.timestamp,i.lastPlayStats.time=e.timestamp,i.lastPlayStats.audioBitrate=d.audioBitrate,m=e.jitter}else if(("inbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesReceived)&&("video"==e.mediaType||e.id.indexOf("VideoStream")>=0)){var r;0!=h&&(d.videoBitrate=8*(e.bytesReceived-i.lastPlayStats.videoBytesReceived)/(e.timestamp-h),d.videoFPS=1e3*(e.framesDecoded-i.lastPlayStats.framesDecoded)/(e.timestamp-h),(r=e.packetsLost-i.lastPlayStats.videoPacketsLost)>0&&(g=r/(r+e.packetsReceived-i.lastPlayStats.videoPacketsReceived))),d.videoBitrate<0&&(d.videoBitrate=0),d.videoFPS<0&&(d.videoFPS=0),d.nackCount=e.nackCount,d.pliCount=e.pliCount,d.videoFractionLost=e.fractionLost,d.videoFramesDecoded=e.framesDecoded,e.packetsLost>0&&(d.videoPacketsLost=e.packetsLost),t=e.packetsLost-i.lastPlayStats.videoPacketsLost,d.videoPacketsLostRate=t>0?t/(e.packetsReceived-i.lastPlayStats.videoPacketsReceived+t):0,i.lastPlayStats.videoBytesReceived=e.bytesReceived,i.lastPlayStats.framesDecoded=e.framesDecoded,e.packetsLost>0&&(i.lastPlayStats.videoPacketsLost=e.packetsLost),i.lastPlayStats.videoPacketsReceived=e.packetsReceived,i.lastPlayStats.videoTime=e.timestamp,i.lastPlayStats.time=e.timestamp,_=e.jitter}else if("track"==e.type&&("video"==e.kind||e.id.indexOf("video")>=0)||e.frameWidth){if(d.frameHeight=e.frameHeight,d.frameWidth=e.frameWidth,0===h||i.lastPlayStats.frameHeight===e.frameHeight&&i.lastPlayStats.frameWidth===e.frameWidth)0===h&&(i.lastPlayStats.frameHeight=e.frameHeight,i.lastPlayStats.frameWidth=e.frameWidth);else{var s=n.getReportSeq();i.dataReport.newReport(s,o.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.event),i.dataReport.addMsgInfo(s,{session_id:o.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.session_id(i.sessionId),w:o.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.w(e.frameWidth),h:o.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.h(e.frameHeight)}),!i.player.isProbe&&i.dataReport.uploadReport(s),i.lastPlayStats.frameHeight=e.frameHeight,i.lastPlayStats.frameWidth=e.frameWidth}0!=h&&(d.videoTransferFPS=1e3*(e.framesReceived-i.lastPlayStats.framesReceived)/(e.timestamp-h),d.videoFramesDropped=e.framesDropped-i.lastPlayStats.framesDropped),d.videoTransferFPS<0&&(d.videoTransferFPS=0),d.videoFramesDropped<0&&(d.videoFramesDropped=0),i.lastPlayStats.framesReceived=e.framesReceived,i.lastPlayStats.framesDropped=e.framesDropped}else"track"==e.type&&("audio"==e.kind||e.id.indexOf("audio")>=0)?(d.audioLevel=e.audioLevel,d.audioSendLevel=e.totalAudioEnergy,d.audioSamplingRate=e.totalSamplesDuration):"candidate-pair"==e.type&&(null!=e.totalRoundTripTime&&(d.totalRoundTripTime=e.totalRoundTripTime),null!=e.currentRoundTripTime&&(d.currentRoundTripTime=e.currentRoundTripTime,p=1e3*d.currentRoundTripTime))})),this.lastPlayStats.googCurrentDelayMs=Number(v)||Number(E)||0,g=isNaN(g)||g<0?0:g,_=isNaN(_)||_<0?0:_,f=isNaN(f)||f<0?0:f,m=isNaN(m)||m<0?0:m;var H=s.ClientUtil.getNetQuality(p,g,_),Q=s.ClientUtil.getNetQuality(p,f,m);d.audioQuality=h>0?s.ClientUtil.quality2QualityGrade(H):0,d.videoQuality=h>0?s.ClientUtil.quality2QualityGrade(Q):0;var W=Math.min(H,Q);this.netQuality=W,d.peerToPeerDelay=isNaN(this.p2pNetStats.p2pRTT)?0:parseInt((this.p2pNetStats.p2pRTT/2+this.lastPlayStats.googCurrentDelayMs).toString()),d.peerToPeerPacketLostRate=100*this.p2pNetStats.p2pLostRate/256,h>0&&W<=n.QUALITY_CONSTANT.MiddleMinQuality&&C>this.probeTime+this.probeInterval&&(this.logger.info(r.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" netQuality "+W+" start net probe"),this.probeState=n.ENUM_PROBE_STATE.tryProbe,this.player.streamCenter.startNetProbe(!1,this.player,this.player.gwNodeList),this.probeTime=C),this.uploadPlayQuality(d,C);var q={video:{videoBitrate:d.videoBitrate,videoFPS:d.videoFPS,videoTransferFPS:d.videoTransferFPS,videoFramesDecoded:d.videoFramesDecoded,videoFramesDropped:d.videoFramesDropped,videoPacketsLost:d.videoPacketsLost,videoPacketsLostRate:d.videoPacketsLostRate,videoQuality:d.videoQuality,frameHeight:d.frameHeight,frameWidth:d.frameWidth,muteState:d.videoMuteState},audio:{audioBitrate:d.audioBitrate,audioCodec:d.audioCodec,audioJitter:d.audioJitter,audioLevel:d.audioLevel,audioPacketsLost:d.audioPacketsLost,audioPacketsLostRate:d.audioPacketsLostRate,audioQuality:d.audioQuality,audioSamplingRate:d.audioSamplingRate,audioSendLevel:d.audioSendLevel,muteState:d.audioMuteState,audioFPS:d.audioFPS},nackCount:d.nackCount,pliCount:d.pliCount,totalRoundTripTime:d.totalRoundTripTime,playData:d.playData,currentRoundTripTime:d.currentRoundTripTime,peerToPeerDelay:d.peerToPeerDelay,peerToPeerPacketLostRate:d.peerToPeerPacketLostRate,sampleTimeWindow:d.sampleTimeWindow};void 0!==d.muted&&(q.muted=d.muted,q.paused=d.paused,q.volume=d.volume,q.sinkId=d.sinkId),void 0!==d.videoCodecName&&(q.video.googCodecName=d.videoCodecName,q.audio.googCodecName=d.audioCodecName,q.codecImplementationName=d.codecImplementationName,q.googAvailableSendBandwidth=d.googAvailableSendBandwidth),0!=h&&this.player.onPlayQualityUpdate(this.streamId,q)}}},e.prototype.uploadPlayQuality=function(e,t){var i=this;if(this.qualityUpload){var o=t;(0==this.qualityUploadLastTime||o-this.qualityUploadLastTime>=this.qualityUploadInterval)&&(e.stream_type="play",e.stream_id=this.streamId,e.timeStamp=parseInt((o/1e3).toString()),e.video_break_duration=this.videoBreakReport.breakDuration,e.video_break_cancel_duration=this.videoBreakReport.breakCancelDuration,e.video_decode_time=this.videoBreakReport.decodeTime,this.videoBreakReport.breakCancelDuration=0,this.videoBreakReport.breakDuration=0,this.videoBreakReport.decodeTime=0,e.audio_break_duration=this.audioBreakReport.breakDuration,e.audio_break_cancel_duration=this.audioBreakReport.breakCancelDuration,e.audio_decode_time=this.audioBreakReport.decodeTime,this.audioBreakReport.breakCancelDuration=0,this.audioBreakReport.breakDuration=0,this.audioBreakReport.decodeTime=0,e.real_sampling_interval=o-this.lastSampleTime,this.lastSampleTime=o,this.logger.info(r.ZEGO_WEBRTC_ACTION.PLAYER_UPLOAD_PLAYER_QUALITY+" "+this.streamId+" upload"+JSON.stringify(e)),this.player.streamCenter.updateQuality(1,e),this.player.signal.QualityReport(n.getSeq(),this.sessionId,e,(function(e,t,n){void 0!==n.report&&(i.qualityUpload=n.report,i.qualityUploadInterval=n.report_interval_ms)}),(function(e){i.logger.info(r.ZEGO_WEBRTC_ACTION.PLAYER_UPLOAD_PLAYER_QUALITY+" "+i.streamId+" upload failed "+e)})),this.qualityUploadLastTime=o)}},e.prototype.getP2PNetStats=function(){var e=this;this.player.signal.getP2PNetStats(n.getSeq(),this.sessionId,this.peerID,(function(t,i,n){var r=n.p2p_lost_rate,o=n.p2p_rtt;e.p2pNetStats.p2pLostRate=r||0,e.p2pNetStats.p2pRTT=o||0}),(function(e){}))},e.prototype.setPlayQualityTimer=function(){var e=this;null==this.qualityTimer&&(this.logger.info(r.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" "+this.streamId+" startTimer"),this.clearPlayQualityTimer(),this.getP2PNetStats(),this.qualityTimer=setInterval((function(){e.sampleTimes++;var t=e.player.peerConnection;if(t){var i=[t.getStats(null)];"chrome"==e.player.stateCenter.browser&&i.push(new Promise((function(e,i){t.getStats((function(t){return e(t)}),(function(e){return i(e)}))}))),Promise.all(i).then((function(t){e.getPlayStats(t[0],t[1])})).catch((function(t){e.logger.error(r.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" "+e.streamId+" getStats error "+t.toString())}))}}),1e3),this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,videoPacketsReceived:0,audioPacketsReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0,audioBitrate:0})},e.prototype.clearPlayQualityTimer=function(){if(null!=this.qualityTimer){clearInterval(this.qualityTimer),this.qualityTimer=null;var e=(new Date).getTime();this.lastSampleTime=0,this.sampleTimes=0,this.totalQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0,audioBytesReceived:0};var t=function(t,i,n,r,o){if(void 0===o&&(o="video"),n=n>1e3?1e3:n,i.breakDuration=0,i.breakCancelDuration=0,i.decodeTime=0,t.decodeStartTime){var s=e,a=s-t.decodeStartTime;if(t.decodeStartTime=void 0,t.totalDuration+=a,t.breakStartTime){var c=s-t.breakStartTime;t.breakStartTime=void 0,r?c>n&&(t.cumulativeBreakDuration+=c):t.noBreakNoDecodeDuration+=c}var l=t.cumulativeBreakDuration,u=t.totalDuration-t.cumulativeBreakDuration-t.noBreakNoDecodeDuration;return t.cumulativeDecodeDuration=u,{cumulativeBreakDuration:l,cumulativeDecodeDuration:u}}return{cumulativeBreakDuration:0,cumulativeDecodeDuration:0}},i=0===this.player.cameraStatus&&this.player.playMediaStatus.video;t(this.videoBreak,this.videoBreakReport,this.videoBreakThreshold,i);var n=0===this.player.micStatus&&this.player.playMediaStatus.audio;t(this.audioBreak,this.audioBreakReport,this.audioBreakThreshold,n,"audio")}this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,videoPacketsReceived:0,audioPacketsReceived:0,framesDecoded:0,framesDropped:0,framesReceived:0,audioBitrate:0}},e.prototype.startProbeTimeout=function(){var e=this;this.probeTimer=setTimeout((function(){e.logger.error(r.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" probe timeout"),e.player.playStateUpdateError(o.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kProbeTimeOutError)}),this.probeTimeoutInterval)},e.prototype.stopProbeTimeout=function(){this.probeTimer&&(clearTimeout(this.probeTimer),this.probeTimer=null)},e}();t.PlayStreamQuality=a},3849:function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoPlayWeb=void 0;var r=i(6706),o=i(4767),s=i(608),a=i(3529),c=i(1089),l=i(5634),u=function(){function e(e,t,i,n,o,s,a){this.state=r.ENUM_PLAY_STATE.stop,this.candidateInfo=[],this.broadcasterStatus=r.ENUM_BROADCASTER_STATUS.stop,this.playQualityList=[],this.maxQualityListCount=10,this.reportSeq=NaN,this.streamReportSeq=r.getSeq(),this.videoSizeCallback=!1,this.remoteStream=null,this.playStream=null,this.playOption={},this.playMediaStatus={video:!0,audio:!0},this.closeSessionSignal=!1,this.stateNego=r.ENUM_PLAY_STATE_NEGO.stop,this.negoTimer=null,this.negoInterval=25e3,this.cameraStatus=0,this.micStatus=0,this.hasSentStreamStatus=!1,this.playEvent=!1,this.gotStreamStatus=!1,this.soundLevel=0,this.mic=null,this.script=null,this.beginTime=0,this.firstFrameTime=0,this.resourceMode=0,this.gwNode="",this.gwNodeList=[],this.gwNodeTTL=0,this.isPeer=!1,this.peerFailCount=0,this.isProbe=!1,this.peerID=0,this.isRecvClientInfo=!1,this.audioMuteState="0",this.videoMuteState="0",this.first_pkt=!0,this.next_sn=[],this.pkt_list=[],this.onDataChannelList=[],this.iceDisconnectedMaxTime=15e3,this.logger=e,this.signal=t,this.dataReport=i,this.streamCenter=o,this.ac=s,this.stateCenter=a,this.dataReport.newReport(this.streamReportSeq),this.dataReport.addMsgInfo(this.streamReportSeq,{abs_time:Date.now()}),this.qualityHandler=new l.PlayStreamQuality(n,this,this.logger,this.dataReport),this.resourceMode=this.stateCenter.settingConfig.getSetting("resource_mode")}return Object.defineProperty(e.prototype,"probeState",{get:function(){return this.qualityHandler.probeState},set:function(e){this.qualityHandler.probeState=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"netQuality",{get:function(){return this.qualityHandler.netQuality},set:function(e){this.qualityHandler.netQuality=e},enumerable:!1,configurable:!0}),e.prototype.startPlay=function(e,t,i){var n=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" called ",e),this.playEvent=!1,this.signal&&this.signal.negoInterval&&(this.negoInterval=this.signal.negoInterval),e){this.streamId=e,this.getRemoteStreamSuc=t,this.playOption=i||{},this.playMediaStatus={video:void 0===this.playOption.video||!!this.playOption.video,audio:void 0===this.playOption.audio||!!this.playOption.audio},i&&i.videoCodec&&(this.playOption.videoCodec=i.videoCodec);var r=this.stateCenter.settingConfig.getSetting("play_video_codec",!0);r&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" setting play_video_codec "+r),this.playOption.videoCodec=r),this.dataReport.addMsgInfo(this.reportSeq,{audio_activate:a.ZegoRTCLogEvent.kZegoTaskPlayStart.audio_activate(1==this.playOption.audio?1:0==this.playOption.audio?0:1),video_activate:a.ZegoRTCLogEvent.kZegoTaskPlayStart.video_activate(1==this.playOption.video?1:0==this.playOption.video?0:1)}),this.isPeer?this.createOffer():this.createSession(),this.negoTimer=setTimeout((function(){n.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" waiting timeout"),n.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNegoTimeoutError)}),this.negoInterval),this.isProbe&&this.qualityHandler.startProbeTimeout()}else this.logger.warn(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" streamId is null")},e.prototype.onCreatePlaySessionSuccess=function(e){var t=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+this.streamId+" success");var i=[];if(e.turn_server){var n=e.turn_server,r=this.stateCenter.turnOverTcpOnly,o=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);o&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" setting udp_or_tcp "+o),r="tcp"===o),r&&(n=n.replace("udp","tcp")),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" turn over tcp "+n),i.push(n)}e.stun_server&&i.push(e.stun_server);var s={iceTransportPolicy:"relay",iceServers:[{urls:i,username:e.turn_username,credential:e.turn_auth_key}]};this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+this.streamId+" username: "+e.turn_username),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+this.streamId+" credential: "+e.turn_auth_key),this.createOffer(s),this.signal.registerPushCallback("MediaDescPush",this.sessionId,(function(e,i,n){t.onRecvMediaDesc(e,i,n)})),this.signal.registerPushCallback("CandidateInfoPush",this.sessionId,(function(e,i,n){t.onRecvCandidateInfo(e,i,n)})),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,i,n){t.onRecvCloseSession(e,i,n)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,i,n){t.onRecvResetSession(e,i,n)})),this.signal.registerPushCallback("StreamStatusNotifyPush",this.sessionId,(function(e,i,n){t.gotStreamStatus=!0,t.streamStatus=n,t.playStream&&t.onRecvStreamStatus(n)})),this.signal.registerPushCallback("PlayEventPush",this.sessionId,(function(e,i,n){t.onRecvPlayEvent(e,i,n)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,i,n){t.onRecvClientInfo(e,i,n)})),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+this.streamId+" call success")},e.prototype.createOffer=function(e){var t=this;this.peerConnection=new RTCPeerConnection(e),this.peerConnection.onicecandidate=function(e){t.onIceCandidate(e)},this.peerConnection.onsignalingstatechange=function(e){t.onConnectionStateChange(e)},this.peerConnection.oniceconnectionstatechange=function(e){t.onIceConnectionStateChange(e)},this.peerConnection.ontrack=function(e){t.onGotRemoteStream(e.streams[0])},this.streamCenter.isDataChannelEnabled&&(this.dataChannel=this.peerConnection.createDataChannel(this.streamId),this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=function(e){t.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+t.streamId+" data channel open")},this.dataChannel.onmessage=function(e){if(t.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+t.streamId+" data channel onmessage"),e.data instanceof Blob){var i=new FileReader,n={};i.readAsArrayBuffer(e.data),i.onload=function(){n.data=i.result,t.onReceivedDataChannel(n)}}else t.onReceivedDataChannel(e)});var i={offerToReceiveAudio:1,offerToReceiveVideo:1};this.playOption&&!1===this.playOption.video&&(i.offerToReceiveVideo=0),this.playOption&&!1===this.playOption.audio&&(i.offerToReceiveAudio=0),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+this.streamId+" createOffer: "+JSON.stringify(i)),this.dataReport.eventStart(this.reportSeq,"CreateOffer"),this.dataReport.eventStart(this.streamReportSeq,"CreateOffer"),this.peerConnection.createOffer(i).then((function(e){t.dataReport.eventEnd(t.reportSeq,"CreateOffer"),t.dataReport.eventEnd(t.streamReportSeq,"CreateOffer"),t.onCreateOfferSuccess(e)}),(function(e){t.dataReport.eventEndWithMsg(t.reportSeq,"CreateOffer",{error:e.toString()}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"CreateOffer",{error:e.toString()}),t.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+t.streamId+" create offer error "+e.toString()),t.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kCreateOfferError,!0)}))},e.prototype.createSession=function(e){var t=this;this.sessionSeq=r.getSeq();var i=this.streamId;1==this.streamCenter.testEnvironment&&(i="zegotest-"+this.streamCenter.appid+"-"+this.streamId);var n=this.stateCenter.settingConfig.getSetting("gw_nodes");if(n&&n instanceof Array&&n.length>0&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" setting "+JSON.stringify(n)),this.gwNodeList=n,this.gwNode=this.gwNodeList[0]||this.gwNode),this.isPeer){this.dataReport.eventStart(this.reportSeq,"CreateSessionWithSdp"),this.dataReport.eventStart(this.streamReportSeq,"CreateSessionWithSdp");var o=this.stateCenter.settingConfig.getSetting("l3_play_buffer_ms");this.signal.createSessionWithSdp({seq:this.sessionSeq,type:this.isProbe?2:1,mode:0,streamId:i,strAuthParam:this.playOption&&this.playOption.streamParams||"",sdp:e.sdp,serverHost:this.gwNode,playBufLevel:2==this.resourceMode?o:void 0},(function(e,i,n){t.handleCreateSessionWithSdpResp(e,i,n)}),(function(i,n){t.dataReport.eventEndWithMsg(t.reportSeq,"CreateSession",{error:i}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"CreateSession",{error:i}),!t.isProbe&&i==r.SEND_MSG_TIMEOUT&&t.peerFailCount<2?(t.peerFailCount++,t.createSession(e)):!t.isProbe&&i==r.SEND_MSG_TIMEOUT&&t.peerFailCount>=2?(t.isPeer=!1,t.streamCenter.isPeer=!1,t.createSession()):t.playStateUpdateError(i==r.SEND_MSG_TIMEOUT?a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionTimeoutError:a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionRequestError)}))}else this.dataReport.eventStart(this.reportSeq,"CreateSession"),this.dataReport.eventStart(this.streamReportSeq,"CreateSession"),this.signal.createSession(this.sessionSeq,1,0,i,this.playOption&&this.playOption.streamParams,this.gwNode,(function(e,i,n){t.handleCreateSessionResp(e,i,n)}),(function(e,i){t.dataReport.eventEndWithMsg(t.reportSeq,"CreateSession",{error:e}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"CreateSession",{error:e}),t.playStateUpdateError(e==r.SEND_MSG_TIMEOUT?a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionTimeoutError:a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionRequestError)}));this.state=r.ENUM_PLAY_STATE.waitingSessionRsp,this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" called success"),this.stateNego=r.ENUM_PLAY_STATE_NEGO.start},e.prototype.handleCreateSessionResp=function(e,t,i){var n=i.turn_server,r=n.split("?")[0]&&n.split("?")[0].slice(5),o=this.streamCenter.server.split("?"),s=o[1]&&o[1].slice(2);this.dataReport.eventEndWithMsg(this.streamReportSeq,"CreateSession",{sessionId:i.session_id,url:"webrtc://"+r+"/"+s+"/"+this.streamId}),this.dataReport.eventEndWithMsg(this.reportSeq,"CreateSession",{sessionId:i.session_id,url:"webrtc://"+r+"/"+s+"/"+this.streamId}),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" sessionId:"+i.session_id),this.sessionSeq==e?(this.gwNodeList=i.gw_nodes&&i.gw_nodes.length>0?i.gw_nodes:this.gwNodeList,this.gwNode=i.gw_nodes&&i.gw_nodes.length>0?this.gwNodeList[0]:this.gwNode,this.gwNodeTTL=i.gw_nodes_ttl?(new Date).getTime()+1e3*i.gw_nodes_ttl:this.gwNodeTTL,this.stateCenter.clientIP=i.clientip?i.clientip:this.stateCenter.clientIP,0!==i.result?(this.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" create error"),this.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionRequestError)):(this.sessionId=i.session_id,this.sessionToken=i.session_token,this.dataReport.addMsgInfo(this.reportSeq,{session_id:a.ZegoRTCLogEvent.kZegoTaskPlayStart.session_id(this.sessionId)}),this.onCreatePlaySessionSuccess(i))):this.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" seq is not match.")},e.prototype.handleCreateSessionWithSdpResp=function(e,t,i){var n=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" sessionId:"+t),this.sessionSeq==e?(this.gwNodeList=i.gw_nodes&&i.gw_nodes.length>0?i.gw_nodes:this.gwNodeList,this.gwNode=i.gw_nodes&&i.gw_nodes.length>0?this.gwNodeList[0]:this.gwNode,this.gwNodeTTL=i.gw_nodes_ttl?(new Date).getTime()+1e3*i.gw_nodes_ttl:this.gwNodeTTL,this.stateCenter.clientIP=i.clientip?i.clientip:this.stateCenter.clientIP,this.dataReport.eventEndWithMsg(this.streamReportSeq,"CreateSessionWithSdp",{sessionId:t}),this.dataReport.eventEndWithMsg(this.reportSeq,"CreateSessionWithSdp",{sessionId:t}),0!==i.result?(this.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" create session failed "+i.result),this.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionRequestError)):(this.sessionId=t,this.sessionToken=i.session_token,this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" create session success ",this.streamId),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,t,i){n.onRecvCloseSession(e,t,i)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,t,i){n.onRecvResetSession(e,t,i)})),this.signal.registerPushCallback("StreamStatusNotifyPush",this.sessionId,(function(e,t,i){n.gotStreamStatus=!0,n.streamStatus=i,n.playStream&&n.onRecvStreamStatus(i)})),this.signal.registerPushCallback("PlayEventPush",this.sessionId,(function(e,t,i){n.onRecvPlayEvent(e,t,i)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,t,i){n.onRecvClientInfo(e,t,i)})),this.signal.registerPushCallback("NetQualityProbeRsp",this.sessionId,(function(e,t,i){n.onRecvPlayEvent(e,t,i)})),this.signal.registerPushCallback("NetQualityInfoPush",this.sessionId,(function(e,t,i){n.onRecvNetQualityInfo(e,t,i)})),this.onGetRemoteOfferSuccess(i.sdp))):this.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" seq is not match.")},e.prototype.onCreateOfferSuccess=function(e){var t=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp1 "+e.sdp.substr(0,e.sdp.length/2)),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp2 "+e.sdp.substr(e.sdp.length/2)),e.sdp=e.sdp.replace(/sendrecv/g,"recvonly"),e.sdp=e.sdp.replace(/useinbandfec=/,"stereo=1;useinbandfec=");var i=e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)?e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)[0]:null;if(i){var n=i.replace(/recvonly/,"sendrecv");e.sdp=e.sdp.replace(i,n)}var r=e.sdp.match(/m=video(.|\r|\n)*a=rtpmap(.|\r|\n)*(a=fmtp:(102).*)/);if(null!==r){var s=r[3];e.sdp=e.sdp.replace(s,s+";sps-pps-idr-in-keyframe=1")}this.playOption.videoCodec&&(e.sdp=o.SdpUtil.getSDPByVideDecodeType(e.sdp,this.playOption.videoCodec)),this.dataReport.eventStart(this.reportSeq,"SetLocalDescription"),this.dataReport.eventStart(this.streamReportSeq,"SetLocalDescription"),this.peerConnection.setLocalDescription(e).then((function(){t.dataReport.eventEnd(t.reportSeq,"SetLocalDescription"),t.dataReport.eventEnd(t.streamReportSeq,"SetLocalDescription"),t.onSetLocalDescriptionSuccess(e)}),(function(e){t.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+t.streamId+" set error "+e.toString()),t.dataReport.eventEnd(t.reportSeq,"SetLocalDescription",{error:e.toString()}),t.dataReport.eventEnd(t.streamReportSeq,"SetLocalDescription",{error:e.toString()}),t.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSetLocalDescError,!0)}))},e.prototype.onSetLocalDescriptionSuccess=function(e){var t=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" success"),this.isPeer)this.createSession(e);else{var i={sdp:e.sdp};2==this.resourceMode&&(i.min_play_buf_level_ms=500),this.answerSeq=r.getSeq(),this.dataReport.eventStart(this.reportSeq,"SendMediaDesc"),this.dataReport.eventStart(this.streamReportSeq,"SendMediaDesc"),this.signal.sendMediaDesc(this.answerSeq,this.sessionId,0,i,(function(e,i,n){t.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" sendMediaDesc resp"),t.answerSeq==e&&t.sessionId==i?(t.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" send success stateNego:waiterAnswer"),t.stateNego=r.ENUM_PLAY_STATE_NEGO.waiterAnswer,t.dataReport.eventEnd(t.reportSeq,"SendMediaDesc"),t.dataReport.eventEnd(t.streamReportSeq,"SendMediaDesc"),t.state=r.ENUM_PLAY_STATE.waitingServerAnswer):t.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" seq or sessionId is not equal "+t.answerSeq+" "+e,0+t.sessionId+" "+i)}),(function(e,i){t.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" failed to send "+e),t.dataReport.eventEndWithMsg(t.reportSeq,"SendMediaDesc",{error:e}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"SendMediaDesc",{error:e}),t.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kMediaDescError)})),this.state=r.ENUM_PLAY_STATE.waitingOfferRsp}},e.prototype.onRecvMediaDesc=function(e,t,i){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received ",i),this.stateNego=r.ENUM_PLAY_STATE_NEGO.waitingCandidate,this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.state===r.ENUM_PLAY_STATE.waitingServerAnswer?(this.dataReport.addEvent(this.reportSeq,"RecvMediaDesc"),this.dataReport.addEvent(this.streamReportSeq,"RecvMediaDesc"),this.signal.sendMediaDescAck(e,this.sessionId,0),this.onGetRemoteOfferSuccess(i.sdp)):this.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onGetRemoteOfferSuccess=function(e){var t,i=this,n={type:"answer",sdp:e,toJSON:function(){}};this.dataReport.eventStart(this.reportSeq,"SetRemoteDescription"),this.dataReport.eventStart(this.streamReportSeq,"SetRemoteDescription");var o=this.stateCenter.turnOverTcpOnly,s=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);s&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" setting udp_or_tcp "+s),o="tcp"===s),o&&(null===(t=n.sdp.match(/candidate.*/g))||void 0===t||t.forEach((function(e){var t=e.replace(/udp/,"tcp");n.sdp=n.sdp.replace(e,t)}))),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" remoteSdp ",n.sdp),this.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).then((function(){i.dataReport.eventEnd(i.reportSeq,"SetRemoteDescription"),i.dataReport.eventEnd(i.streamReportSeq,"SetRemoteDescription"),i.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+i.streamId+" set success")}),(function(e){i.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+i.streamId+" set remote error "+e.toString()),i.dataReport.eventEndWithMsg(i.reportSeq,"SetRemoteDescription",{error:e.toString()}),i.dataReport.eventEndWithMsg(i.streamReportSeq,"SetRemoteDescription",{error:e.toString()}),i.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSetRemoteDescError,!0)})),this.state=r.ENUM_PLAY_STATE.waitingServerICE,this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" call success")},e.prototype.onRecvCandidateInfo=function(e,t,i){var n=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" received "),this.state==r.ENUM_PLAY_STATE.waitingServerICE){this.dataReport.addEvent(this.reportSeq,"RecvIceCandidate"),this.dataReport.addEvent(this.streamReportSeq,"RecvIceCandidate"),this.signal.sendCandidateInfoAck(e,this.sessionId,0),this.sendCandidateInfo(this.candidateInfo),this.candidateInfo=[];for(var o=0;o<i.infos.length;o++){var s={sdpMid:i.infos[o].sdpMid,sdpMLineIndex:i.infos[o].sdpMLineIndex,candidate:i.infos[o].candidate};this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" candidate "+s.candidate),this.peerConnection.addIceCandidate(new RTCIceCandidate(s)).then((function(){n.logger.debug(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+n.streamId+" add success")}),(function(e){n.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+n.streamId+" add error "+e.toString()),n.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kCandidateError,!0)}))}this.state=r.ENUM_PLAY_STATE.connecting,this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" call success")}else this.logger.warn(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onRecvPlayEvent=function(e,t,i){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_PLAY_EVENT+" "+this.streamId+" received"),!0===this.playEvent&&0==i.event){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_PLAY_EVENT+" "+this.streamId+" retry: "+this.streamId);var n=this.streamId,o=this.playOption;this.signal.sendCloseSession(r.getSeq(),this.sessionId,1),this.resetPlay(),this.startPlay(n,this.getRemoteStreamSuc,o)}else this.playEvent=!0},e.prototype.onRecvClientInfo=function(e,t,i){this.stateCenter.clientIP!==i.clientip&&this.logger.warn(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLIENT_INFO+" client ip changed "+this.stateCenter.clientIP+" "+i.clientip),this.stateCenter.clientIP=i.clientip,this.peerID=i.peer_id,this.isProbe&&this.stateNego==r.ENUM_PLAY_STATE_NEGO.iceConnected&&this.signal.sendNetProbe(r.getSeq(),this.sessionId,this.peerID,(function(){}),(function(){})),this.isRecvClientInfo=!0},e.prototype.onRecvNetQualityInfo=function(e,t,i){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_NET_QUALITY_INFO+" call"),this.qualityHandler.stopProbeTimeout();var n=0,o=i.lossrate,a=i.rtt;this.peerID===i.peer_id&&null!=typeof o&&null!=typeof a||(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_NET_QUALITY_INFO+" local peerID:"+this.peerID+" remote peerID:"+i.peer_id+" lossrate:"+o+" rtt:"+a),n=1),this.signal.sendNetQualityInfoPushAck(r.getSeq(),this.sessionId,this.peerID,n),0==n&&"number"==typeof o&&"number"==typeof a?this.onCalNetQualityResult(0,s.ClientUtil.getNetQuality(a,o)):this.onCalNetQualityResult(1)},e.prototype.onIceCandidate=function(e){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" called"),null!=e.candidate)if(this.logger.debug(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate "+e.candidate.candidate),this.state<r.ENUM_PLAY_STATE.connecting||this.state==r.ENUM_PLAY_STATE.stop)this.logger.debug(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" cached"),this.candidateInfo.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex});else{this.logger.debug(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" send");var t={candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex};this.sendCandidateInfo([t])}},e.prototype.onConnectionStateChange=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CONNECTION_STATE_CHANGE+" "+this.streamId+" called "+e.target.signalingState)},e.prototype.onIceConnectionStateChange=function(e){var t=this;if(this.state!=r.ENUM_PLAY_STATE.stop&&null!=this.peerConnection)if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateChanged "+this.peerConnection.iceConnectionState),"connected"===this.peerConnection.iceConnectionState){if(this.stateNego=r.ENUM_PLAY_STATE_NEGO.iceConnected,this.isProbe&&this.isPeer&&this.isRecvClientInfo)return this.signal.sendNetProbe(r.getSeq(),this.sessionId,this.peerID,(function(){}),(function(){})),void(null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null));for(var i in null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.dataReport.addEvent(this.reportSeq,"IceConnected"),this.dataReport.addEvent(this.streamReportSeq,"IceConnected"),this.state!=r.ENUM_PLAY_STATE.playing&&(this.onPlayStateUpdate(r.ENUM_PLAY_STATE_UPDATE.start,this.streamId,{code:0,message:""},!0),this.getRemoteStreamSuc&&this.getRemoteStreamSuc(this.playStream)),this.state=r.ENUM_PLAY_STATE.playing,this.dataReport.eventStart(this.reportSeq,"PlayState"),this.dataReport.eventStart(this.streamReportSeq,"PlayState"),this.streamCenter.publisherList)if(this.streamCenter.publisherList[i].publisher.state==r.ENUM_PUBLISH_STATE.publishing&&this.broadcasterStatus==r.ENUM_BROADCASTER_STATUS.stop){this.signal&&this.signal.sendBroadcasterStatus(r.getSeq(),this.sessionId,1),this.broadcasterStatus=r.ENUM_BROADCASTER_STATUS.start;break}if(!this.isProbe&&this.qualityHandler.setPlayQualityTimer(),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateNego:iceConnected"),this.isPeer&&(this.peerFailCount=0),0==this.firstFrameTime){this.firstFrameTime=(new Date).getTime()-this.beginTime;var n=r.getReportSeq();this.dataReport.newReport(n,a.ZegoRTCLogEvent.kZegoTaskPlayDecodeFirstVideoFrame.event),this.dataReport.addMsgInfo(n,{session_id:a.ZegoRTCLogEvent.kZegoTaskPlayDecodeFirstVideoFrame.session_id(this.sessionId),fft_consumed:a.ZegoRTCLogEvent.kZegoTaskPlayDecodeFirstVideoFrame.fft_consumed(this.firstFrameTime)}),!this.isProbe&&this.dataReport.uploadReport(n)}}else"closed"===this.peerConnection.iceConnectionState?(this.dataReport.addEvent(this.reportSeq,"IceClosed"),this.stateNego=r.ENUM_PLAY_STATE_NEGO.iceClosed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)):"failed"===this.peerConnection.iceConnectionState?(this.dataReport.addEvent(this.reportSeq,"IceFailed"),this.stateNego=r.ENUM_PLAY_STATE_NEGO.iceFailed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)):"disconnected"===this.peerConnection.iceConnectionState&&(this.dataReport.addEvent(this.reportSeq,"IceDisconnected"),this.stateNego=r.ENUM_PLAY_STATE_NEGO.iceDisconnected,this.logger.warn(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" ice disconnected"),this.iceDisconnectedTimer||(this.iceDisconnectedTimer=setTimeout((function(){t.checkPlayConnectionFailedState("disconnected")}),this.iceDisconnectedMaxTime)))},e.prototype.checkPlayConnectionFailedState=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+"  state "+this.state+" connectionState "+e),this.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kMediaConnectionError)},e.prototype.resetPlay=function(){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_RESET_PLAY+" "+this.streamId+" call"),this.state=r.ENUM_PLAY_STATE.stop,this.playEvent=!1,this.isRecvClientInfo=!1,null!=this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.qualityHandler.stopProbeTimeout(),this.qualityHandler.clearPlayQualityTimer(),this.signal&&(this.signal.unregisterPushCallback("MediaDescPush",this.sessionId),this.signal.unregisterPushCallback("CandidateInfoPush",this.sessionId),this.signal.unregisterPushCallback("CloseSessionPush",this.sessionId),this.signal.unregisterPushCallback("SessionResetPush",this.sessionId),this.signal.unregisterPushCallback("PublishEventPush",this.sessionId),this.signal.unregisterPushCallback("ClientInfoPush",this.sessionId),this.signal.unregisterPushCallback("NetQualityProbeRsp",this.sessionId),this.signal.unregisterPushCallback("NetQualityInfoPush",this.sessionId)),this.sessionSeq=0,this.answerSeq=0,this.videoSizeCallback=!1,this.stopSoundLevel()},e.prototype.onRecvResetSession=function(e,t,i){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_RESET_SESSION+" "+this.streamId+" received "),t==this.sessionId){this.signal.sendCloseSessionAck(e,this.sessionId,0);var n=JSON.parse(JSON.stringify(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlaySessionClosedError));this.negoTimer&&clearTimeout(this.negoTimer),this.playStateUpdateError(n)}else this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_RESET_SESSION+" "+this.streamId+" cannot find session")},e.prototype.onRecvCloseSession=function(e,t,i){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLOSE_SESSION+" "+this.streamId+" "+JSON.stringify(i)),this.signal.sendCloseSessionAck(e,this.sessionId,0);var n=i.err_info?JSON.parse(i.err_info.toLowerCase()):{},r=n.action?n.action:null,o=1*i.reason,s=JSON.parse(JSON.stringify(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlaySessionClosedError));s.message+=" reason:"+o+" "+(r?" action:"+r:""),this.negoTimer&&clearTimeout(this.negoTimer);var l=![4,8,10,11,12,14,24,26,27,28].includes(o)&&![2,5,6].includes(r);this.playStateUpdateError(s,l)},e.prototype.onRecvStreamStatus=function(e){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" call"),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" status camera_status: "+e.camera_status+" mic_status: "+e.mic_status),(!this.hasSentStreamStatus||this.cameraStatus!==e.camera_status)&&this.onRemoteCameraStatusUpdate(this.streamId,this.getCameraMicStatus(e.camera_status),e.camera_status),(!this.hasSentStreamStatus||this.micStatus!==e.mic_status)&&this.onRemoteMicStatusUpdate(this.streamId,this.getCameraMicStatus(e.mic_status),e.mic_status),this.hasSentStreamStatus=!0,this.cameraStatus=e.camera_status,this.micStatus=e.mic_status,this.videoMuteState=0===e.camera_status?"0":"1",this.audioMuteState=0===e.mic_status?"0":"1","boolean"==typeof this.playOption.video)this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" has set video option, ignore stream status");else{var t=this.playStream;if(0!==e.camera_status&&20!==e.camera_status?t.getVideoTracks().forEach((function(e){e.enabled=!1,e.stop(),t.removeTrack(e)})):0===t.getVideoTracks().length&&t.addTrack(this.remoteStream.clone().getVideoTracks()[0]),"safari"===this.stateCenter.browser)for(var i=document.querySelectorAll("video, audio"),n=0;n<i.length;n++)i[n].srcObject===this.playStream&&(i[n].srcObject=this.playStream)}this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" call success")},e.prototype.onGotRemoteStream=function(e){var t=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_GOT_REMOTE_STREAM+" "+this.streamId+" called "+e),e?(this.playStream?(this.playStream.getTracks().forEach((function(e){return t.playStream.removeTrack(e)})),e.clone().getTracks().forEach((function(e){return t.playStream.addTrack(e)}))):this.playStream=e.clone(),this.audioMuteState=this.playStream.getAudioTracks().length>0?"0":"1",this.videoMuteState=this.playStream.getVideoTracks().length>0?"0":"1",this.remoteStream=e,this.gotStreamStatus&&this.onRecvStreamStatus(this.streamStatus),this.dataReport.addEvent(this.reportSeq,"GetRemoteStream"),this.streamCenter.soundLevelDelegate&&!this.isProbe&&this.startSoundLevel()):this.logger.warn(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_GOT_REMOTE_STREAM+" "+this.streamId+" remote stream is empty")},e.prototype.sendCandidateInfo=function(e){var t=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" called"),!(e=e.filter((function(e){return!(e.candidate.indexOf("tcp")>0)&&(!!e.candidate||void 0)})))||e.length<1?this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" cancelled"):(this.dataReport.eventStart(this.reportSeq,"SendIceCandidate"),this.dataReport.eventStart(this.streamReportSeq,"SendIceCandidate"),this.stateNego!==r.ENUM_PLAY_STATE_NEGO.iceConnected&&(this.stateNego=r.ENUM_PLAY_STATE_NEGO.sendCandidate),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" stateNego:sendCandidate"),this.signal.sendCandidateInfo(r.getSeq(),this.sessionId,e,(function(e,i,n){t.logger.debug(c.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+t.streamId+" send success"),t.dataReport.eventEnd(t.reportSeq,"SendIceCandidate"),t.dataReport.eventEnd(t.streamReportSeq,"SendIceCandidate")}),(function(e,i){t.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+t.streamId+" failed to send: "+e.toString()),t.dataReport.eventEndWithMsg(t.reportSeq,"SendIceCandidate",{error:e}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"SendIceCandidate",{error:e}),t.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kCandidateError)})))},e.prototype.shouldSendCloseSession=function(){return this.state!=r.ENUM_PLAY_STATE_UPDATE.stop&&this.state!=r.ENUM_PLAY_STATE.waitingSessionRsp},e.prototype.playStateUpdateError=function(e,t){this.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_STATE_ERROR+" call ",this.streamId,JSON.stringify(e)),this.isProbe?this.onCalNetQualityResult(1):this.streamId&&this.onPlayStateUpdate(r.ENUM_PLAY_STATE_UPDATE.error,this.streamId,e,t),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_STATE_ERROR+" "+this.streamId+" ended")},e.prototype.getCameraMicStatus=function(e){return 0==e?"OPEN":"MUTE"},e.prototype.onPlayStateUpdate=function(e,t,i,n){},e.prototype.onPlayQualityUpdate=function(e,t){},e.prototype.onRemoteCameraStatusUpdate=function(e,t,i){},e.prototype.onRemoteMicStatusUpdate=function(e,t,i){},e.prototype.stopPlay=function(){var e;for(var t in this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_STOP_PLAY+" "+this.streamId+" called"),this.streamCenter.publisherList)if(this.streamCenter.publisherList[t].publisher.state==r.ENUM_PUBLISH_STATE.publishing&&this.broadcasterStatus==r.ENUM_BROADCASTER_STATUS.start){this.signal&&this.signal.sendBroadcasterStatus(r.getSeq(),this.sessionId,0),this.broadcasterStatus=r.ENUM_BROADCASTER_STATUS.stop;break}this.sessionId&&!this.closeSessionSignal&&this.signal.sendCloseSession(r.getSeq(),this.sessionId,0),this.dataReport.eventEndWithMsg(this.streamReportSeq,"PlayState",{state:this.state+""}),this.dataReport.addEvent(this.streamReportSeq,"StopPlay"),this.dataReport.addMsgExt(this.streamReportSeq,{stream:this.streamId,sessionId:this.sessionId}),this.resetPlay();var i=this.qualityHandler,o=i.videoBreak,s=i.audioBreak,a=2===this.resourceMode?"l3":"rtc",l=((e={})[a+"_a_break_time"]=s.cumulativeBreakDuration,e[a+"_a_decode_time"]=s.cumulativeDecodeDuration,e[a+"_v_break_time"]=o.cumulativeBreakDuration,e[a+"_v_decode_time"]=o.cumulativeDecodeDuration,e);this.dataReport.addMsgInfo(this.streamReportSeq,n({itemtype:"RTCPlayStream",cdn_a_break_time:0,cdn_a_decode_time:0,cdn_v_break_time:0,cdn_v_decode_time:0,l3_a_break_time:0,l3_a_decode_time:0,l3_v_break_time:0,l3_v_decode_time:0,rtc_a_break_time:0,rtc_a_decode_time:0,rtc_v_break_time:0,rtc_v_decode_time:0},l)),!this.isProbe&&this.dataReport.uploadReport(this.streamReportSeq,"RTCPlayStream")},e.prototype.onDisconnect=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_DISCONNECT+" "+this.streamId+" call"),this.dataReport.addEvent(this.reportSeq,"OnDisconnect"),this.playStateUpdateError(e||a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kWebsocketDisconnectedError,!!e)},e.prototype.startSoundLevel=function(){var e=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" call streamID: "+this.streamId),!this.isProbe)if(this.remoteStream&&0!=this.remoteStream.getAudioTracks().length){this.script&&this.script.disconnect()&&(this.script=null),this.mic&&this.mic.disconnect()&&(this.mic=null);try{this.mic=this.ac.createMediaStreamSource(this.remoteStream),this.script=this.ac.createScriptProcessor(4096,1,1),this.mic.connect(this.script),this.script.connect(this.ac.destination),this.script.onaudioprocess=function(t){for(var i=t.inputBuffer.getChannelData(0),n=0,r=0;r<i.length;r++)n<i[r]&&(n=i[r]);e.soundLevel=100*n},this.ac.resume()}catch(e){this.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" get sound level failed "+e)}}else this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" "+this.streamId+" remote stream no found")},e.prototype.stopSoundLevel=function(){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_STOP_SOUND_LEVEL+" call streamID: "+this.streamId),this.script&&this.script.disconnect(),this.mic&&this.mic.disconnect(),this.script=null,this.mic=null},e.prototype.onCalNetQualityResult=function(e,t){},e.prototype.onReceivedDataChannel=function(e){var t,i,n=this,r=new Uint8Array(e.data,0,10),o=e.data.byteLength-10,s=new Uint8Array(e.data,10,o);if(1==r[0]){var a=r[1],c=r[2]<<8|r[3],l=r[4]<<8|r[5],u=(new Date).getTime();if(this.first_pkt&&(this.next_sn[0]=c==l?c:l,this.first_pkt=!1),this.pkt_list.push({sn:c,sn0:l,recv_ts:u,flags:a,payload_len:o,payloadArray:s}),this.pkt_list.sort(this.compareShort),c==this.next_sn[0]){var d=this.pkt_list.filter((function(e){return e.sn0==l}));if(d.sort(this.compareShort),null!=d.find((function(e){return 1&e.flags}))&&d.length==this.compareShort(c,l)+1){for(var h=0,p=new ArrayBuffer(65536),f=0;f<d.length;f++)new Uint8Array(p).set(d[f].payloadArray,h),h+=d[f].payload_len;null===(t=this.onDataChannelList)||void 0===t||t.forEach((function(e){e(p,h,n.streamId)})),this.pkt_list=[],this.first_pkt=!0}this.next_sn[0]++}else for(var g=function(){var e=m.pkt_list.filter((function(e){return e.sn0==n.pkt_list[0].sn0}));if(e.sort(m.compareShort),null!=e.find((function(e){return 1&e.flags}))&&e.length==m.compareShort(e[e.length-1].sn,e[0].sn0)+1){for(var t=0,r=new ArrayBuffer(65536),o=0;o<e.length;o++)new Uint8Array(r).set(e[o].payloadArray,t),t+=e[o].payload_len;m.next_sn[0]=e[0].sn0+e.length,null===(i=m.onDataChannelList)||void 0===i||i.forEach((function(e){e(r,t,n.streamId)})),m.pkt_list=[],m.first_pkt=!0}else if(u-e[0].ts<4e3){var s=e[0].sn0;for(o=0;o<e.length&&s==e[o].sn;o++)s++;return m.next_sn[0]=s,"break"}for(o=0;o<e.length;o++)m.pkt_list.shift()},m=this;this.pkt_list.length>0&&"break"!==g(););}},e.prototype.compareShort=function(e,t){var i=new Uint16Array(1);i[0]=e-t;var n=new Int16Array(1);return n[0]=i[0],n[0]},e}();t.ZegoPlayWeb=u},361:function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PublishModule=void 0;var r=i(1089),o=i(6706),s=i(3529),a=i(608),c=i(2752),l=i(3770),u=i(5321),d=function(){function e(e,t,i,n,r){this.logger=e,this.dataReport=t,this.stateCenter=i,this.streamCenter=n,this.rtm=r,this.recordDevices()}return e.prototype.createStream=function(e){var t=this;return this.logger.info(r.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" call"),e&&e.camera&&e.camera.audioBitRate&&(e.camera.audioBitrate=e.camera.audioBitRate),e&&e.camera&&e.camera.bitrate&&(e.camera.bitRate=e.camera.bitrate),e&&e.screen&&"object"==typeof e.screen&&e.screen.bitrate&&(e.screen.bitRate=e.screen.bitrate),e&&e.custom&&e.custom.bitrate&&(e.custom.bitRate=e.custom.bitrate),new Promise((function(i,c){var l="camera",d=o.getReportSeq();t.dataReport.newReport(d,s.ZegoRTCLogEvent.kZegoTaskCreateStream.event);var h=function(e){var n=t.streamCenter.checkPreview(e),r=e;if(n&&navigator.userAgent){var o=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);o&&o[1]&&o[1].includes("15_1")&&(r=t.getStreamThroughCanvas(e),n.localStream=r)}if(0==r.getAudioTracks().length){var s=t.streamCenter.ac.createMediaStreamDestination(),a=s?s.stream:null,c=a?a.getAudioTracks()[0]:null;c&&(c.enabled=!1,r.addTrack(c),n&&(n.hasEmptyAudioTrack=!0))}t.dataReport.uploadReport(d),!t.stateCenter.deviceInfos&&t.recordDevices(),i(r),t.streamCenter.activeSoundLevel()},p=function(e,i){void 0===i&&(i=""),t.dataReport.addMsgInfo(d,{error:e.code,message:e.message+i}),t.dataReport.uploadReport(d),c({code:e.code,msg:e.message+i})};if("https:"!==window.location.protocol&&"file:"!==window.location.protocol&&-1==window.location.hostname.indexOf("127.0.0.1")&&-1==window.location.hostname.indexOf("localhost"))return t.logger.error(r.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" https or localhost required "),void p({code:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError.code,message:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError.message+" https or localhost required"});if(e&&e.screen){if(l="screen",!a.ClientUtil.checkScreenParams(e.screen,p))return;var f=t.stateCenter.browser,g=t.streamCenter.getScreenConstrains(e.screen);t.dataReport.addMsgInfo(d,{stream_type:s.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("screen"),screen:s.ZegoRTCLogEvent.kZegoTaskCreateStream.screen(g)});var m=function(e){t.streamCenter.createScreenPreviewer(e,g)&&h(e),e.getVideoTracks()[0].onended=function(){var i=o.getReportSeq();t.dataReport.newReport(i),t.dataReport.uploadReport(i,s.ZegoRTCLogEvent.kZegoTaskScreenSharingEnded),e&&t.stopPreview(e),t.stateCenter.actionListener("screenSharingEnded",e)}};"firefox"==f||"object"==typeof e.screen&&"firefox"==e.screen.type?t.startScreenShotFirFox("screen",g,(function(e,t,i){e?t&&m(t):i&&p(i)})):"chrome"==f&&u.ZegoWebRTC.screenShotReady||"object"==typeof e.screen&&"shot"==e.screen.type?t.startScreenShotChrome((function(i,n,o){i?(t.logger.info(r.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" using extension"),n&&m(n)):(o&&t.logger.error(r.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" extension "+o),"SS_DIALOG_CANCEL"===o||"object"==typeof e.screen&&"shot"==e.screen.type?o&&p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenCancelError):t.startScreenSharing(g,(function(e,i,n){e?i&&m(i):(t.logger.error(r.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" "+n),n&&p(n))})))})):"Electron"==f||"object"==typeof e.screen&&"Electron"==e.screen.type?t.startScreenShotElectron(g,(function(e,t,i){e?t&&m(t):i&&p(i)})):t.startScreenSharing(g,(function(e,t,i){e?t&&m(t):i&&p(i)}))}else{if(e&&"object"==typeof e.camera&&void 0!==e.camera.videoQuality&&!a.ClientUtil.checkInteger(e.camera.videoQuality))return t.logger.error(r.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" videoQuality must be integer number"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," videoQuality must be integer number");if(e&&e.camera&&e.camera.audioBitrate){if(!a.ClientUtil.checkInteger(e.camera.audioBitrate))return t.logger.error(r.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate must be integer number"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate must be integer number");if(e.camera.audioBitrate<6)return t.logger.error(r.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate cannot less 6 kbps"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot less 6 kbps");if(e.camera.audioBitrate>510)return t.logger.error(r.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate cannot greater than 510 kbps"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot greater than 510 kbps");t.stateCenter.audioBitRate=1e3*e.camera.audioBitrate}if(e&&e.camera&&e.camera.bitRate){if("number"!=typeof e.camera.bitRate)return t.logger.error(r.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate must be integer number"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number");if(e.camera.bitRate>10240)return t.logger.error(r.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate cannot greater than 10 Mbps"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps")}if(e&&e.camera&&void 0!==e.camera.channelCount&&!a.ClientUtil.checkInteger(e.camera.channelCount))return t.logger.error(r.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" channelCount must be integer number"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," channelCount must be integer number");if(e&&e.camera&&4===e.camera.videoQuality&&!a.ClientUtil.checkCameraParams(e.camera,p))return;if(e&&e.custom&&e.custom.bitRate){if(!a.ClientUtil.checkInteger(e.custom.bitRate))return t.logger.error(r.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate must be integer number"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number");if(e.custom.bitRate>10240)return t.logger.error(r.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate cannot greater than 10 Mbps"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps")}if(e&&e.custom&&e.custom.audioBitrate){if(!a.ClientUtil.checkInteger(e.custom.audioBitrate))return t.logger.error("ze.cs.0 audioBitrate must be integer number"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate must be integer number");if(e.custom.audioBitrate<6)return t.logger.error("ze.cs.0 audioBitrate cannot less 6 kbps"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot less 6 kbps");if(e.custom.audioBitrate>510)return t.logger.error("ze.cs.0 audioBitrate cannot greater than 510 kbps"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot greater than 510 kbps")}if(e&&e.custom&&void 0!==e.custom.channelCount&&1!==e.custom.channelCount&&2!==e.custom.channelCount)return t.logger.error("ze.cs.0 channelCount must number 1 or 2"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," channelCount must number 1 or 2");var _={};if(e&&e.camera)l="camera",_=e.camera,t.dataReport.addMsgInfo(d,{stream_type:s.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("camera"),camera:s.ZegoRTCLogEvent.kZegoTaskCreateStream.camera(e.camera)}),"boolean"!=typeof _.video&&(_.video=!0),"boolean"!=typeof _.audio&&(_.audio=!0);else if(e&&e.custom){l="custom",_=e.custom;var v=e.custom.source instanceof MediaStream?"MediaStream":"HTMLElement";t.dataReport.addMsgInfo(d,{stream_type:s.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("custom"),custom:s.ZegoRTCLogEvent.kZegoTaskCreateStream.custom(n(n({},e.custom),{source:v}))})}t.startPreview(_,l,h,p)}}))},e.prototype.destroyStream=function(e){this.logger.info(r.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" call");var t=o.getReportSeq();if(this.dataReport.newReport(t),!(e instanceof MediaStream))return this.logger.error(r.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" localStream is not mediaStream or tracks is null"),this.dataReport.addMsgInfo(t,s.ZegoRTCLogEvent.kZegoTaskDestroyStream.error.kLocalStreamError),void this.dataReport.uploadReport(t,s.ZegoRTCLogEvent.kZegoTaskDestroyStream.event);e instanceof MediaStream&&0==e.getTracks().length&&this.logger.info(r.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" tracks is null"),this.stopPreview(e),this.dataReport.uploadReport(t,s.ZegoRTCLogEvent.kZegoTaskDestroyStream.event)},e.prototype.startPublishingStream=function(e,t,i,n){this.logger.info(r.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" call ",e);var c,l=!0,u="",d=o.getReportSeq();if(this.stateCenter.reportSeqList.startPublish[e]=d,this.dataReport.newReport(d,s.ZegoRTCLogEvent.kZegoTaskPublishStart.event),l&&void 0===e&&(u="stream id required",this.logger.error(r.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+u),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError),!l||e&&"string"==typeof e||(u="stream id type wrong",this.logger.error(r.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+u),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError),l&&e.length>o.MAX_STREAM_ID_LENGTH&&(u="stream id length limit",this.logger.error(r.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+u),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError),l&&!a.ClientUtil.checkIllegalCharacters(e)&&(u="stream ID contains illegal characters",this.logger.error(r.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+u),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError),l&&(!t||t instanceof MediaStream&&0==t.getTracks().length)&&(u="localStream wrong",this.logger.error(r.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+u),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError),l&&!this.streamCenter.checkPreview(t)&&(u="stream is not from zego",this.logger.error(r.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+u),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNoPreviewError),l&&void 0!==i&&"object"!=typeof i&&(l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError,u="publishOption must be object"),l&&void 0!==i&&void 0!==i.streamParams&&"string"!=typeof i.streamParams&&(this.logger.error(r.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption streamParams must be string"),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError,u=" publishOption streamParams must be string"),l&&void 0!==i&&void 0!==i.extraInfo&&"string"!=typeof i.extraInfo&&(this.logger.error(r.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption extraInfo must be string"),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError,u=" publishOption extraInfo must be string"),l&&void 0!==i&&void 0!==i.videoCodec&&"string"!=typeof i.videoCodec&&(this.logger.error(r.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption videoCodec must be string"),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError,u=" publishOption videoCodec must be string"),!l||!this.stateCenter.isMultiRoom||i&&"string"==typeof i.roomID&&""!=i.roomID||(l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError,u=" roomID is need if set multi room"),i&&i.videoCodec&&(i.videoCodec=i.videoCodec.toUpperCase()),l&&this.rtm.service.isDisConnect()&&(this.logger.error("zc.p.sps.1 not login"),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNoLoginError),!l)return this.logger.error(r.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+u),this.dataReport.uploadReport(d,void 0,c,u),delete this.stateCenter.reportSeqList.startPublish[e],!1;i||(i={}),this.dataReport.addMsgInfo(d,{stream:s.ZegoRTCLogEvent.kZegoTaskPublishStart.stream(e),publishOption:s.ZegoRTCLogEvent.kZegoTaskPublishStart.publishOption(i)}),i.audioBitRate=this.stateCenter.audioBitRate;var h,p=i.roomID?i.roomID:this.stateCenter.roomList[0]?this.stateCenter.roomList[0].roomID:"",f=this.stateCenter.getRoomByRoomID(p);if(!f)return this.logger.error("zc.p.sps.1 room no found"),!1;if(this.dataReport.addMsgInfo(d,{publish_room_id:p,isMulti:this.stateCenter.isMultiRoom}),this.stateCenter.customUrl&&0!=this.stateCenter.customUrl.length)this.logger.info("zc.p.sps.1 customUrl "+JSON.stringify(this.stateCenter.customUrl)),h=this.stateCenter.customUrl;else{var g=this.stateCenter.settingConfig.getSetting("signal_nodes",!0);g&&g instanceof Array&&g.length>0&&(h=g,this.logger.info("zc.p.sps.1 setting config signal_nodes "+JSON.stringify(g)))}if(h)return this.stateCenter.publishStreamList[e]={state:o.ENUM_PUBLISH_STREAM_STATE.tryPublish,extra_info:i.extraInfo?i.extraInfo:null},this.streamCenter.setPublishStateStart(f,e,t,i,n)?(f.streamHandler.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.retry,e,{code:0,message:""}),this.streamCenter.publisherList[e].serverUrls=h,this.streamCenter.startPublishingStream(e)):(this.logger.info("zc.p.sps.1 cannot start publish"),!1);if(!this.streamCenter.setPublishStateStart(f,e,t,i,n))return this.logger.error("zc.p.sps.1 cannot start publish"),!1;this.stateCenter.publishStreamList[e]={state:o.ENUM_PUBLISH_STREAM_STATE.tryPublish,extra_info:i.extraInfo?i.extraInfo:null},this.logger.info("zc.p.sps.1 start publish"),f.streamHandler.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.retry,e,{code:0,message:""});var m=this.streamCenter.publisherList[e].retryDispatchHandler;return m.stopMaxTime(),m.invalid(),m.initStream(e,i,!0),m.startMaxTime(),m.active(0)},e.prototype.activateSEIInsert=function(e,t,i){return void 0===i&&(i=0),!1},e.prototype.stopPublishingStream=function(e,t){this.logger.info(r.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" call ",e+(t?t.toString():""));var i=o.getReportSeq();if(this.stateCenter.reportSeqList.stopPublish[e]=i,this.dataReport.newReport(i,s.ZegoRTCLogEvent.kZegoTaskPublishStop.event),this.dataReport.addMsgInfo(i,{streamID:s.ZegoRTCLogEvent.kZegoTaskPublishStop.stream(e)}),"string"!=typeof e||""==e)return this.logger.error(r.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" streamID must be string and not empty"),this.dataReport.uploadReport(i,void 0,s.ZegoRTCLogEvent.kZegoTaskPublishStop.error.kParamError,"stream id type error"),delete this.stateCenter.reportSeqList.stopPublish[e],!1;var n=this.streamCenter.publisherList[e],a=this.streamCenter.getRoomByStreamID(e),c=n&&n.publisher&&n.publisher.state!==o.ENUM_PUBLISH_STATE.stop;if(this.streamCenter.stopPublishingStream(e),this.stateCenter.publishStreamList[e]){if(this.stateCenter.publishStreamList[e].state>=o.ENUM_PUBLISH_STREAM_STATE.update_info&&a){var l;if(!t||1102018!==t.code)l="PUBLIC"===this.stateCenter.type?o.ENUM_STREAM_SUB_CMD.liveEnd:o.ENUM_STREAM_CMD_PRI.liveEnd,a.streamHandler.updateStreamInfo(e,l);for(var u=0;u<a.streamList.length;u++)if(a.streamList[u].stream_id==e){a.streamList.splice(u--,1);break}}delete this.stateCenter.publishStreamList[e]}return this.dataReport.uploadReport(i),a&&c&&a.streamHandler.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.error,e,t||{code:0,message:""}),!0},e.prototype.setCaptureVolume=function(e,t){var i=this;return new Promise((function(n){var o;i.logger.info(r.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" call");var a=function(e){i.logger.error(r.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" "+e),n({errorCode:s.ZegoRTCLogEvent.kZegoSetCaptureVolume.error.kParamError.code,extendedData:JSON.stringify({fail_reason:s.ZegoRTCLogEvent.kZegoSetCaptureVolume.error.kParamError.message+" "+e})})},c=i.streamCenter.ac,l=i.streamCenter.checkPreview(e);if(e instanceof MediaStream&&l)if(0!=e.getAudioTracks().length)if("number"!=typeof t||t<0||t>100)a(" volume must be number between 0 to 100");else{if(l.gainNode)l.gainNode.gain.value=t/100;else{var u=c.createMediaStreamSource(e),d=c.createGain(),h=c.createMediaStreamDestination();u.connect(d),d.connect(h);var p=h.stream.getAudioTracks()[0];for(var f in i.streamCenter.publisherList){var g=i.streamCenter.publisherList[f];if(g.localStream==e){var m=null===(o=g.publisher.peerConnection)||void 0===o?void 0:o.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));m&&(m.replaceTrack(p),g.localStream.removeTrack(g.publisher.localStream.getAudioTracks()[0]),g.localStream.addTrack(p));break}}e.removeTrack(e.getAudioTracks()[0]),e.addTrack(p),l.gainNode=d,l.gainNode.gain.value=t/100}c.resume(),n({errorCode:0,extendedData:""}),i.logger.info(r.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" call success")}else a(" stream audioTrack no found");else a(" stream must be created by zego")}))},e.prototype.getElectronScreenSources=function(){var e=this;return new Promise((function(t,i){var n=window.require("electron");n||(e.logger.error("zc.gess.0 Electron is not exist"),i({message:"Electron is not exist"})),n.desktopCapturer.getSources({types:["window","screen"]}).then((function(e){var i=e.map((function(e){return{id:e.id,name:e.name,thumbnail:e.thumbnail}}));t(i)})).catch((function(t){e.logger.error("zc.gess.0 "+t),i(t)}))}))},e.prototype.startScreenShotChrome=function(e){if(u.ZegoWebRTC.screenShotReady)window.postMessage({type:"SS_UI_REQUEST",text:"start"},"*"),a.ClientUtil.registerCallback("screenShare",{success:e},this.stateCenter.callbackList);else{var t='zc.b.ss Please install the extension:1. Go to chrome://extensions  2. Check: "Enable Developer mode   3. Click: "Load the unpacked extension... 4. Choose "extension" folder from the repository 5. Reload this page';this.logger.error(t),e(!1,null,{code:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+t})}},e.prototype.startScreenSharing=function(e,t){var i=this;"getDisplayMedia"in navigator.mediaDevices?navigator.mediaDevices.getDisplayMedia({audio:e.audio,video:{frameRate:e.frameRate,width:e.width,height:e.height}}).then((function(e){t(!0,e)})).catch((function(e){i.logger.error("zc.b.sss "+e),e.message&&"permission denied"==e.message.toLowerCase()?t(!1,null,s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenCancelError):t(!1,null,{code:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+e})})):(this.logger.error("zc.b.sss brower does not support getDisplayMedia"),t(!1,null,s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError))},e.prototype.startScreenShotFirFox=function(e,t,i){var n=this,r={video:{frameRate:t.frameRate,bitRate:t.bitRate,width:t.width,height:t.height,mediaSource:e},audio:t.audio};navigator.mediaDevices.getUserMedia(r).then((function(e){i(!0,e)})).catch((function(e){n.logger.error("ze.ssf.1 "+e),i(!1,null,{code:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+e})}))},e.prototype.startScreenShotElectron=function(e,t){var i=this;if(!window.require("electron"))return this.logger.error("ze.sse.1 Electron is not exist"),void t(!1,null,{code:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" Electron is not exist"});var n={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e.sourceID,maxWidth:window.screen.width,maxHeight:window.screen.height}},audio:!1};navigator.mediaDevices.getUserMedia(n).then((function(e){t(!0,e)})).catch((function(e){i.logger.error("ze.sse.1 "+e),t(!1,null,{code:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+e})}))},e.prototype.startPreview=function(e,t,i,n){var r=this,o=null;return o=new l.ZegoPreview(this.logger,this.streamCenter.ac,this.stateCenter,this.streamCenter,t),this.streamCenter.previewStreamList.push(o),o.startPreview(e,(function(n){r.streamCenter.soundLevelDelegate&&(null==o||o.startSoundLevel()),"camera"===t&&(null==o?void 0:o.micTrack)&&(o.micTrack.enabled=r.streamCenter.isMicEnabled),(null==e?void 0:e.videoOptimizationMode)&&r.streamCenter.setVideoTrackContentHint(n,null==e?void 0:e.videoOptimizationMode),r.logger.debug("zsc.sp.0 call success"),!r.stateCenter.deviceInfos&&r.recordDevices(),i&&i(n)}),(function(e){r.streamCenter.previewStreamList=r.streamCenter.previewStreamList.filter((function(e){return e!==o})),n&&n(e)})),!0},e.prototype.stopPreview=function(e){if(!e)return this.logger.warn("zsc.sp.0 localStream null"),!1;for(var t in this.streamCenter.publisherList)this.streamCenter.publisherList[t].localStream===e&&(this.streamCenter.publisherList[t].localStream=null);var i=this.streamCenter.checkPreview(e);return i?(i.previewSuc&&(i.stopPreview(),this.streamCenter.removePreview(i)),!0):(this.logger.warn("zsc.sp.0 no preview"),!1)},e.prototype.recordDevices=function(e,t){var i,n=this;this.logger.info("zsc.rd.0 call"),a.ClientUtil.getDevices((function(t){n.stateCenter.deviceInfos={microphones:t.microphones,speakers:t.speakers,cameras:t.cameras},e&&e(t)}),(function(e){n.logger.warn("zsc.rd.0 getDevices err:",e),t&&t(e)})),void 0!==(null===(i=navigator.mediaDevices)||void 0===i?void 0:i.ondevicechange)&&(navigator.mediaDevices.ondevicechange=null,navigator.mediaDevices.ondevicechange=function(e){n.logger.info("zsc.rd.0 devicechange"),n.stateCenter.deviceChangeTimer&&(clearTimeout(n.stateCenter.deviceChangeTimer),n.stateCenter.deviceChangeTimer=null),n.stateCenter.deviceChangeTimer=setTimeout((function(){a.ClientUtil.getDevices((function(e){for(var t=[],i=function(i){var r=n.stateCenter.deviceInfos.cameras[i];e.cameras.find((function(e){return e.deviceID===r.deviceID}))||t.push(r)},r=0;r<n.stateCenter.deviceInfos.cameras.length;r++)i(r);n.stateCenter.deviceStateOut=!1;var a=!1;t.length>0&&(a=!0),t.forEach((function(e){for(var t in n.streamCenter.publisherList){var i=n.streamCenter.publisherList[t],r=i.publisher;i.localStream&&i.cameraLabel===e.deviceName&&(a=!1,r.sendStreamStatus(-6,r.mic_status),n.stateCenter.actionListener("_deviceError",c.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,e.deviceName,"camera"),n.stateCenter.actionListener("deviceError",c.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,e.deviceName)),i.localStream&&0===i.localStream.getAudioTracks().length&&(a=!1)}var l=o.getReportSeq();n.dataReport.newReport(l,s.ZegoRTCLogEvent.kZegoTaskDeviceInterrupt.event),n.dataReport.addMsgInfo(l,{interrupt:0}),n.dataReport.uploadReport(l),n.stateCenter.actionListener("videoDeviceStateChanged","DELETE",e)})),a&&(n.stateCenter.deviceStateOut=!0),n.stateCenter.deviceInfos.microphones.filter((function(t){return!e.microphones.find((function(e){return e.deviceID===t.deviceID}))})).forEach((function(e){for(var t in n.streamCenter.publisherList){var i=n.streamCenter.publisherList[t],r=i.publisher;i.localStream&&(i.microLabel===e.deviceName||i.microLabel.includes(e.deviceName))&&(r.sendStreamStatus(r.camera_status,-6),n.stateCenter.actionListener("_deviceError",c.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,n.streamCenter.publisherList[t].microLabel,"micro"),n.stateCenter.actionListener("deviceError",c.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,n.streamCenter.publisherList[t].microLabel))}var a=o.getReportSeq();n.dataReport.newReport(a,s.ZegoRTCLogEvent.kZegoTaskDeviceInterrupt.event),n.dataReport.addMsgInfo(a,{interrupt:0}),n.dataReport.uploadReport(a),n.stateCenter.actionListener("audioDeviceStateChanged","DELETE","Input",e)}));var l=n.stateCenter.deviceInfos.speakers.filter((function(t){return!e.speakers.find((function(e){return e.deviceID===t.deviceID}))})),u=e.cameras.filter((function(e){return!n.stateCenter.deviceInfos.cameras.find((function(t){return t.deviceID===e.deviceID}))})),d=e.microphones.filter((function(e){return!n.stateCenter.deviceInfos.microphones.find((function(t){return t.deviceID===e.deviceID}))})),h=e.speakers.filter((function(e){return!n.stateCenter.deviceInfos.speakers.find((function(t){return t.deviceID===e.deviceID}))}));l.forEach((function(e){var t=o.getReportSeq();n.dataReport.newReport(t,s.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.event),n.dataReport.addMsgInfo(t,{reason:s.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.reason("delete"),device:s.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e)}),n.dataReport.uploadReport(t),n.stateCenter.actionListener("audioDeviceStateChanged","DELETE","Output",e)})),u.forEach((function(e){var t=o.getReportSeq();n.dataReport.newReport(t,s.ZegoRTCLogEvent.kZegoTaskDeviceInterrupt.event),n.dataReport.addMsgInfo(t,{interrupt:1}),n.dataReport.uploadReport(t),n.stateCenter.actionListener("videoDeviceStateChanged","ADD",e)})),d.forEach((function(e){var t=o.getReportSeq();n.dataReport.newReport(t,s.ZegoRTCLogEvent.kZegoTaskDeviceInterrupt.event),n.dataReport.addMsgInfo(t,{interrupt:1}),n.dataReport.uploadReport(t),n.stateCenter.actionListener("audioDeviceStateChanged","ADD","Input",e)})),h.forEach((function(e){var t=o.getReportSeq();n.dataReport.newReport(t,s.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.event),n.dataReport.addMsgInfo(t,{reason:s.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.reason("add"),device:s.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e)}),n.dataReport.uploadReport(t),n.stateCenter.actionListener("audioDeviceStateChanged","ADD","Output",e)})),n.stateCenter.deviceInfos={microphones:e.microphones,speakers:e.speakers,cameras:e.cameras}}),(function(e){n.logger.warn("zsc.rd.0 getDevices err:",e)}))}),500)})},e.prototype.getStreamThroughCanvas=function(e){if(0==e.getVideoTracks().length)return e;var t=document.createElement("video"),i=document.createElement("canvas"),n=i.getContext("2d");t.setAttribute("style","display:none"),i.setAttribute("style","display:none"),t.setAttribute("muted",""),t.muted=!0,t.setAttribute("autoplay",""),t.autoplay=!0,t.setAttribute("playsinline",""),document.body.append(t),document.body.append(i),t.srcObject=e;var r=function(){null==n||n.drawImage(t,0,0,i.width,i.height),window.requestAnimationFrame(r),t.srcObject=e};t.oncanplay=function(){i.width=t.videoWidth,i.height=t.videoHeight,t.play(),r()};var o=i.captureStream(15),s=o.getVideoTracks()[0],a=s.stop;if(s.stop=function(){a.call(s),r(),t.remove(),i.width=0,i.remove()},e instanceof MediaStream&&e.getAudioTracks().length){var c=e.getAudioTracks()[0];o.addTrack(c)}return o},e}();t.PublishModule=d},3770:function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoPreview=void 0;var s=i(6706),a=i(3529),c=i(1089),l=function(){function e(e,t,i,n,r){var o=this;this.logger=e,this.ac=t,this.stateCenter=i,this.streamCenter=n,this.previewType=r,this.localStream=null,this.videoInfo={},this.previewSuc=!1,this.soundLevel=0,this.hasEmptyAudioTrack=!1,this.script=null,this.mic=null,this._audioTrack=null,this._videoTrack=null,this.originVideoTrack=null,this.activateSEIConfig=null,this.isAudioEnabled=!0,this.gainNode=null,this.cameraMaxResolution={},this.enableMicrophoneOnly=function(e,t){var i;if(!o.localStream)return o.logger.error("zp.em.2 no localStream"),!1;var n=null===(i=t.checkPublish(o.localStream))||void 0===i?void 0:i.publisher;if(n){var r=n.camera_status,s=o.isAudioEnabled&&e?0:20;n.camera_status===r&&n.mic_status===s||n.sendStreamStatus(r,s)}return o.micTrack?(o.micTrack.enabled=o.isAudioEnabled&&e,o.logger.debug("zp.emo.2 call success"),!0):(o.logger.info("zp.emo.2 no micTrack"),!0)}}return Object.defineProperty(e.prototype,"audioTrack",{get:function(){var e;return this._audioTrack||(null===(e=this.localStream)||void 0===e?void 0:e.getAudioTracks()[0])||null},set:function(e){this._audioTrack=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoTrack",{get:function(){var e;return this._videoTrack||(null===(e=this.localStream)||void 0===e?void 0:e.getVideoTracks()[0])||null},set:function(e){this._videoTrack=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"micTrack",{get:function(){return"camera"===this.previewType&&this.audioTrack||null},enumerable:!1,configurable:!0}),e.prototype.getMediaStreamConstraints=function(e,t){var i={audio:null,video:null};if(i.audio=!0,i.video={width:640,height:480,frameRate:15,bitRate:this.stateCenter.settingConfig.getSetting("camera_video_bitrate")},e.audio?void 0===e.audioInput&&void 0===e.ANS&&void 0===e.AGC&&void 0===e.AEC&&void 0===e.channelCount?(i.audio={},i.audio.noiseSuppression=this.stateCenter.settingConfig.getSetting("ANS"),i.audio.autoGainControl=this.stateCenter.settingConfig.getSetting("AGC"),i.audio.echoCancellation=this.stateCenter.settingConfig.getSetting("AEC"),i.audio.channelCount=1):(i.audio={},void 0!==e.audioInput&&null!==e.audioInput&&(i.audio.deviceId={exact:e.audioInput}),void 0!==e.ANS&&(i.audio.noiseSuppression=e.ANS),void 0!==e.AGC&&(i.audio.autoGainControl=e.AGC),void 0!==e.AEC&&(i.audio.echoCancellation=e.AEC),void 0!==e.channelCount&&(i.audio.channelCount=e.channelCount)):!1===e.audio&&(i.audio=!1),e.video){var n=640,r=480,o=15,a=this.stateCenter.settingConfig.getSetting("camera_video_bitrate");if(1===e.videoQuality?(n=s.ENUM_RESOLUTION_TYPE.LOW.width,r=s.ENUM_RESOLUTION_TYPE.LOW.height,o=s.ENUM_RESOLUTION_TYPE.LOW.frameRate,a=s.ENUM_RESOLUTION_TYPE.LOW.bitRate):2===e.videoQuality?(n=s.ENUM_RESOLUTION_TYPE.MEDIUM.width,r=s.ENUM_RESOLUTION_TYPE.MEDIUM.height,o=s.ENUM_RESOLUTION_TYPE.MEDIUM.frameRate,a=s.ENUM_RESOLUTION_TYPE.MEDIUM.bitRate):3===e.videoQuality?(n=s.ENUM_RESOLUTION_TYPE.HIGH.width,r=s.ENUM_RESOLUTION_TYPE.HIGH.height,o=s.ENUM_RESOLUTION_TYPE.HIGH.frameRate,a=s.ENUM_RESOLUTION_TYPE.HIGH.bitRate):4===e.videoQuality?(n=e.width,r=e.height,o=e.frameRate,a=e.bitRate||this.stateCenter.settingConfig.getSetting("camera_video_bitrate")):this.logger.info("zp.gmsc.2 use default"),t&&(e.width&&(n=e.width),e.height&&(r=e.height),e.frameRate&&(o=e.frameRate),e.bitRate&&(a=e.bitRate)),!1===e.horizontal){var c=r;r=n,n=c}!0===e.isSwitch&&(c=r,r=n,n=c),i.video={width:n,height:r,frameRate:o,bitRate:a},null!=e.facingMode?i.video.facingMode=e.facingMode:null!=e.videoInput&&null!=e.videoInput&&""!=e.videoInput&&(i.video.deviceId={exact:e.videoInput}),this.logger.info("zp.gmsc.2 width: "+n+" height: "+r+" rate: "+o)}else!1===e.video&&(e.audioBitrate&&(i.video={}),i.video=!1);return i},e.prototype.startPreview=function(e,t,i){return r(this,void 0,void 0,(function(){var r,s,c,l,u,d,h,p=this;return o(this,(function(o){return this.logger.debug("zp.sv.2 called"),this.mediaStreamConfig=e,void 0===navigator.mediaDevices||null==navigator.mediaDevices.getUserMedia?(i&&i(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError),[2]):e.source instanceof MediaStream?(r=e.source.getVideoTracks(),s=r.length>0?r[0].getSettings():{width:0,height:0,frameRate:0},this.logger.debug("zp.sv.2 use external media stream"),this.previewSuc=!0,this.localStream=e.source,this.initMediaTrack(e.source),this.videoInfo={width:s.width,height:s.height,frameRate:s.frameRate,bitRate:e.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),startBitrate:e.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode"),channelCount:e.channelCount||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1),audioBitrate:1e3*e.audioBitrate||48e3},t&&t(this.localStream),[2]):e.source instanceof HTMLMediaElement?((c=this.captureStream(e.source,e))?(this.videoInfo.bitRate=e.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),this.previewSuc=!0,this.initMediaTrack(c),t&&t(c)):i&&i(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError),[2]):((l=this.getMediaStreamConstraints(e)).audio&&(u=this.stateCenter.settingConfig.getSetting("AEC",!0),d=this.stateCenter.settingConfig.getSetting("AGC",!0),h=this.stateCenter.settingConfig.getSetting("ANS",!0),"boolean"==typeof u&&(this.logger.info("zp.sv.2 setting AEC "+u),l.audio.echoCancellation=u),"boolean"==typeof d&&(this.logger.info("zp.sv.2 setting AGC "+d),l.audio.autoGainControl=d),"boolean"==typeof h&&(this.logger.info("zp.sv.2 setting ANS "+h),l.audio.noiseSuppression=h)),this.videoInfo=n({},l.video),this.videoInfo?(this.videoInfo.audioBitrate=1e3*e.audioBitrate||48e3,this.videoInfo.startBitrate=e.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode")):e.audioBitrate&&(this.videoInfo={audioBitrate:1e3*e.audioBitrate||48e3}),this.mediaStreamConfig.video=!!l.video,this.mediaStreamConfig.audio=!!l.audio,this.logger.info("zp.sv.2 ",JSON.stringify(l)),e.unlimitedCaptureResolution&&l.video.width&&(l.video.width={ideal:4096},l.video.height={ideal:2160},this.logger.info("zp.sv.2 ","capture max resolution of camera")),navigator.mediaDevices.getUserMedia(l).then((function(i){p.logger.info("zp.sv.2 success"),p.localStream=i,p.previewSuc=!0,p.initMediaTrack(i),p.videoInfo&&(p.videoInfo.channelCount=e.channelCount||(p.audioTrack&&p.audioTrack.getSettings?p.audioTrack.getSettings().channelCount:1)),t&&t(i)}),(function(e){if(p.logger.info("zp.sv.2 failed ",e.name," ",e.message),i){var t=a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kGetUserMediaError;t.message=t.message+" "+e.name+" "+e.message,"NotAllowedError"===e.name||"SecurityError"===e.name?(t=n({},a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceNoAllowedError)).message=e.name+": "+t.message:"NotReadableError"===e.name?(t=n({},a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceNoReadableError)).message=e.name+": "+t.message:"OverconstrainedError"===e.name&&((t=n({},a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceOverConstrainedError)).message=e.name+": "+t.message+(e.constraint?". such as "+e.constraint:"")),i(t)}})),[2])}))}))},e.prototype.captureStream=function(e,t){if(!e)return this.logger.info("zp.cs.2 no local video"),null;var i;if(e.captureStream)i=e.captureStream(),this.logger.debug("zp.cs.2 captureStream");else{if(!e.mozCaptureStream)return this.logger.info("zp.cs.2 don't support"),null;i=e.mozCaptureStream(),this.logger.debug("zp.cs.2 mozCaptureStream")}return 0==i.getTracks().length?(this.logger.error("zp.cs.2 external capture tracks no found"),null):(this.localStream=i,this.videoInfo={width:e.videoWidth,height:e.videoHeight,frameRate:0,bitRate:t.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),channelCount:t.channelCount||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1),audioBitrate:1e3*t.audioBitrate||48e3,startBitrate:t.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode")},this.logger.debug("zp.cs.2 called success"),this.localStream)},e.prototype.stopPreview=function(){var e,t,i;this.logger.info("zp.sv.2.1 called"),this.localStream&&(this.videoEffect&&(this.videoEffect.setBeautyEffectOptions(!1),this.videoEffect.destroy()),null===(e=this.originVideoTrack)||void 0===e||e.stop(),null===(t=this.videoTrack)||void 0===t||t.stop(),null===(i=this.audioTrack)||void 0===i||i.stop(),this.localStream.getTracks().reverse().forEach((function(e){return e.stop()})),this.localStream=null,this.videoInfo={})},e.prototype.enableMicrophone=function(e,t){return!1},e.prototype.enableCamera=function(e,t,i){return!1},e.prototype.startSoundLevel=function(){var e=this;if(this.localStream&&0!=this.localStream.getAudioTracks().length){this.script&&this.script.disconnect()&&(this.script=null),this.mic&&this.mic.disconnect()&&(this.mic=null);try{this.mic=this.ac.createMediaStreamSource(this.localStream),this.script=this.ac.createScriptProcessor(4096,1,1),this.mic.connect(this.script),this.script.connect(this.ac.destination),this.script.onaudioprocess=function(t){for(var i=t.inputBuffer.getChannelData(0),n=0,r=0;r<i.length;r++)n<i[r]&&(n=i[r]);e.soundLevel=100*n},this.ac.resume()}catch(e){this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" get sound level failed "+e)}}},e.prototype.stopSoundLevel=function(){this.soundLevel=0,this.script&&this.script.disconnect(),this.mic&&this.mic.disconnect(),this.script=null,this.mic=null},e.prototype.restartSoundLevel=function(){this.streamCenter.soundLevelDelegate?(this.stopSoundLevel(),this.startSoundLevel()):this.stopSoundLevel()},e.prototype.setBeautyEffect=function(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},e.prototype.replacePreviewTrack=function(e,t){void 0===t&&(t=!1)},e.prototype.initMediaTrack=function(e){e.getVideoTracks().length>0&&(this.videoTrack=e.getVideoTracks()[0],this.originVideoTrack=this.videoTrack),e.getAudioTracks().length>0&&(this.audioTrack=e.getAudioTracks()[0])},e}();t.ZegoPreview=l},1547:function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoPublish=void 0;var r=i(6706),o=i(4767),s=i(608),a=i(3529),c=i(1089),l=function(){function e(e,t,i,n,o,s,a,c,l){this.state=r.ENUM_PUBLISH_STATE.stop,this.sessionId=0,this.sessionToken="",this.candidateInfo=[],this.qualityTimer=null,this.publishQualityList=[],this.maxQualityListCount=10,this.lastPublishStats={},this.reportSeq=NaN,this.streamReportSeq=r.getSeq(),this.qualityUpload=!1,this.qualityUploadInterval=3e4,this.qualityUploadLastTime=0,this.qualitySeq=0,this.videoInfo={width:0,height:0,frameRate:0,bitRate:0,channelCount:1,audioBitrate:48e3},this.mediaStreamConfig=null,this.offerSeq=0,this.audioMixList=[],this.arrayBufferMap={},this.effectList=[],this.peerConnection=null,this.qualityCount=0,this.closeSessionSignal=!1,this.channelCount=1,this.localSdpOrder=[],this.remoteSdpOrder=[],this.videoCodec="H264",this.stateNego=r.ENUM_PUBLISH_STATE_NEGO.stop,this.negoInterval=25e3,this.publishEvent=!1,this.cameraState="on",this.microState="on",this.gwNode="",this.gwNodeList=[],this.gwNodeTTL=0,this.needIncMax=!1,this.probeCount=0,this.gotMax=!1,this.initFitCnt=0,this.targetRate=0,this.totalBitrateArray=[],this.totalTargetRateArray=[],this.totalRetransRateArray=[],this.isPeer=!1,this.peerFailCount=0,this.peerID=0,this.netQuality=0,this.probeTime=0,this.probeInterval=6e4,this.probeState=r.ENUM_PROBE_STATE.probed,this.iceDisconnectedMaxTime=15e3,this.isUpdateSDP=!1,this.toBeReplacedTracks={},this.send_seq=0,this.dataChannelState=0,this.first_pkt=!0,this.next_sn=[],this.pkt_list=[],this.camera_status=2,this.mic_status=2,this.streamId=e,this.logger=t,this.dataReport=i,this.qualityTimeInterval=n,this.ac=s,this.mediaEleSources=a,this.streamCenter=o,this.stateCenter=c,this.dataReport.newReport(this.streamReportSeq),this.videoCodec=this.stateCenter.settingConfig.getSetting("publish_video_codec")}return Object.defineProperty(e.prototype,"previewer",{get:function(){return this.streamCenter.checkPreview(this.localStream)},enumerable:!1,configurable:!0}),e.prototype.publishStateUpdateError=function(e,t){this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_STATE_ERROR+"  call ",this.streamId,JSON.stringify(e)),this.streamId&&this.onPublishStateUpdate(r.ENUM_PUBLISH_STATE_UPDATE.error,this.streamId,e,t),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_STATE_ERROR+"  ended")},e.prototype.resetPublish=function(){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_RESET_PUBLISH+"   "+this.streamId+" call"),this.state=r.ENUM_PUBLISH_STATE.stop,this.publishEvent=!1,null==this.peerConnection&&null==this.peerConnection||(this.peerConnection.close(),this.peerConnection=null),null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.clearPublishQualityTimer(),this.signal&&(this.signal.unregisterPushCallback("CandidateInfoPush",this.sessionId),this.signal.unregisterPushCallback("MediaDescPush",this.sessionId),this.signal.unregisterPushCallback("CloseSessionPush",this.sessionId),this.signal.unregisterPushCallback("SessionResetPush",this.sessionId),this.signal.unregisterPushCallback("PublishEventPush",this.sessionId),this.signal.unregisterPushCallback("ClientInfoPush",this.sessionId)),this.sessionSeq=0,this.offerSeq=0,this.candidateInfo=[],this.publishQualityList=[],this.qualityUploadLastTime=0,this.resetEncBitrate(),this.isUpdateSDP=!1},e.prototype.clearPublishQualityTimer=function(){null!=this.qualityTimer&&(clearInterval(this.qualityTimer),this.qualityTimer=null),this.lastPublishStats={},this.qualityCount=0},e.prototype.shouldSendCloseSession=function(){return this.state!=r.ENUM_PUBLISH_STATE.stop&&this.state!=r.ENUM_PUBLISH_STATE.waitingSessionRsp},e.prototype.startPublish=function(e,t,i,n,r){var o,s=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+e+" called"),this.signal&&this.signal.negoInterval&&(this.negoInterval=this.signal.negoInterval),e){var l;this.localStream=t,this.mediaStreamConfig=n,this.channelCount=n.channelCount,this.publishOption=r||{},navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&n&&(n.externalCapture||n.externalMediaStream)&&(this.localStream.onaddtrack=function(){var e,t,i,n;s.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+s.streamId+" Track added");var r=[];(null===(e=s.previewer)||void 0===e?void 0:e.videoTrack)&&r.push(null===(t=s.previewer)||void 0===t?void 0:t.videoTrack);var o=s.localStream.getAudioTracks();if(r.length>1)null==(a=null===(i=s.peerConnection)||void 0===i?void 0:i.getSenders().find((function(e){var t;return(null===(t=e.track)||void 0===t?void 0:t.kind)===r[1].kind})))||a.replaceTrack(r[1]),s.localStream.removeTrack(r[0]);else if(o.length>1){var a;null==(a=null===(n=s.peerConnection)||void 0===n?void 0:n.getSenders().find((function(e){var t;return(null===(t=e.track)||void 0===t?void 0:t.kind)===o[1].kind})))||a.replaceTrack(o[1]),s.localStream.removeTrack(o[0])}}),i&&(this.videoInfo=i),r&&r.videoCodec&&(this.videoCodec=r.videoCodec);var u=null===(o=this.previewer)||void 0===o?void 0:o.previewType;switch(u){case"camera":l=this.stateCenter.settingConfig.getSetting("camera_video_bitrate",!0);break;case"screen":l=this.stateCenter.settingConfig.getSetting("screen_video_bitrate",!0);break;case"custom":l=this.stateCenter.settingConfig.getSetting("custom_video_bitrate",!0)}l&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting "+u+" "+l),this.videoInfo.bitRate=l);var d=this.stateCenter.settingConfig.getSetting("bitrate_mode",!0);d&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting bitrate_mode "+d),this.videoInfo.startBitrate=d);var h=this.stateCenter.settingConfig.getSetting("publish_video_codec",!0);h&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting publish_video_codec "+h),this.videoCodec=h),this.dataReport.addMsgInfo(this.reportSeq,{video_en_codec_id:a.ZegoRTCLogEvent.kZegoTaskPublishStart.video_en_codec_id("VP8"==this.videoCodec?2:0),audio_c_channel_count:a.ZegoRTCLogEvent.kZegoTaskPublishStart.audio_c_channel_count(2==this.channelCount?2:1),audio_en_bps:a.ZegoRTCLogEvent.kZegoTaskPublishStart.audio_en_bps(this.videoInfo.audioBitrate),aec_level:a.ZegoRTCLogEvent.kZegoTaskPublishStart.aec_level(1==n.AEC?2:0==n.AEC?0:2),ans_level:a.ZegoRTCLogEvent.kZegoTaskPublishStart.ans_level(1==n.ANS?2:0==n.ANS?0:2),agc:a.ZegoRTCLogEvent.kZegoTaskPublishStart.agc(1==n.AGC?2:0==n.AGC?0:2),traffic_control_min_video_bitrate:a.ZegoRTCLogEvent.kZegoTaskPublishStart.traffic_control_min_video_bitrate(this.videoInfo.bitRate)}),this.isPeer?this.createOffer():this.createSession(),this.negoTimer=setTimeout((function(){s.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" waiting timeout"),s.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNegoTimeoutError)}),this.negoInterval)}else this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+e+" streamId is null")},e.prototype.activateSEIInsert=function(e,t){return new Promise((function(e,t){e(!1)}))},e.prototype.createSession=function(e){var t=this;this.sessionSeq=r.getSeq();var i=this.streamId;1==this.streamCenter.testEnvironment&&(i="zegotest-"+this.streamCenter.appid+"-"+this.streamId);var n=this.stateCenter.settingConfig.getSetting("gw_nodes");n&&n instanceof Array&&n.length>0&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting "+JSON.stringify(n)),this.gwNodeList=n,this.gwNode=this.gwNodeList[0]||this.gwNode),this.isPeer?(this.dataReport.eventStart(this.reportSeq,"CreateSessionWithSdp"),this.dataReport.eventStart(this.streamReportSeq,"CreateSessionWithSdp"),this.signal.createSessionWithSdp({seq:this.sessionSeq,type:0,mode:0,streamId:i,videoInfo:this.videoInfo,strAuthParam:this.publishOption&&this.publishOption.streamParams||"",sdp:e.sdp,serverHost:this.gwNode},(function(e,i,n){t.handleCreateSessionWithSdpResp(e,i,n)}),(function(i,n){t.dataReport.eventEndWithMsg(t.reportSeq,"CreateSession",{error:i}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"CreateSession",{error:i}),i==r.SEND_MSG_TIMEOUT&&t.peerFailCount<2?(t.peerFailCount++,t.createSession(e)):i==r.SEND_MSG_TIMEOUT&&t.peerFailCount>=2?(t.isPeer=!1,t.streamCenter.isPeer=!1,t.createSession()):t.publishStateUpdateError(i==r.SEND_MSG_TIMEOUT?a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionTimeoutError:a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionRequestError)}))):(this.dataReport.eventStart(this.reportSeq,"CreateSession"),this.dataReport.eventStart(this.streamReportSeq,"CreateSession"),this.signal.createSession(this.sessionSeq,0,0,i,this.publishOption&&this.publishOption.streamParams,this.gwNode,(function(e,i,n){t.handleCreateSessionResp(e,i,n)}),(function(e,i){t.reportSeq,t.dataReport.eventEndWithMsg(t.reportSeq,"CreateSession",{error:e}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"CreateSession",{error:e}),t.publishStateUpdateError(e==r.SEND_MSG_TIMEOUT?a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionTimeoutError:a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionRequestError)}))),this.state=r.ENUM_PUBLISH_STATE.waitingSessionRsp,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" called success"),this.stateNego=r.ENUM_PUBLISH_STATE_NEGO.start},e.prototype.handleCreateSessionResp=function(e,t,i){var n=i.turn_server,r=n.split("?")[0]&&n.split("?")[0].slice(5),o=this.streamCenter.server.split("?"),s=o[1]&&o[1].slice(2);this.dataReport.eventEndWithMsg(this.streamReportSeq,"CreateSession",{sessionId:i.session_id,url:"webrtc://"+r+"/"+s+"/"+this.streamId}),this.dataReport.eventEndWithMsg(this.reportSeq,"CreateSession",{sessionId:i.session_id,url:"webrtc://"+r+"/"+s+"/"+this.streamId}),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" sessionId:"+i.session_id),this.sessionSeq==e?(this.gwNodeList=i.gw_nodes&&i.gw_nodes.length>0?i.gw_nodes:this.gwNodeList,this.gwNode=i.gw_nodes&&i.gw_nodes.length>0?this.gwNodeList[0]:this.gwNode,this.gwNodeTTL=i.gw_nodes_ttl?(new Date).getTime()+1e3*i.gw_nodes_ttl:this.gwNodeTTL,this.stateCenter.clientIP=i.clientip?i.clientip:this.stateCenter.clientIP,0!==i.result?(this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create session failed "+i.result),this.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionRequestError)):(this.sessionId=i.session_id,this.sessionToken=i.session_token,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create session success "+this.sessionId),this.dataReport.addMsgInfo(this.reportSeq,{session_id:a.ZegoRTCLogEvent.kZegoTaskPublishStart.session_id(this.sessionId)}),this.onCreatePublishSessionSuccess(i))):this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" seq is not match.")},e.prototype.handleCreateSessionWithSdpResp=function(e,t,i){var n=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" sessionId:"+t),this.sessionSeq==e?(this.gwNodeList=i.gw_nodes&&i.gw_nodes.length>0?i.gw_nodes:this.gwNodeList,this.gwNode=i.gw_nodes&&i.gw_nodes.length>0?this.gwNodeList[0]:this.gwNode,this.gwNodeTTL=i.gw_nodes_ttl?(new Date).getTime()+1e3*i.gw_nodes_ttl:this.gwNodeTTL,this.stateCenter.clientIP=i.clientip?i.clientip:this.stateCenter.clientIP,this.dataReport.eventEndWithMsg(this.streamReportSeq,"CreateSessionWithSdp",{sessionId:t}),this.dataReport.eventEndWithMsg(this.reportSeq,"CreateSessionWithSdp",{sessionId:t}),0!==i.result?(this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" create session failed "+i.result),this.publishStateUpdateError({code:a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionRequestError.code,message:a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionRequestError.message+" result:"+i.result})):(this.sessionId=t,this.sessionToken=i.session_token,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" get remote session success "+this.streamId),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,t,i){n.onRecvCloseSession(e,t,i)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,t,i){n.onRecvResetSession(e,t,i)})),this.signal.registerPushCallback("PublishEventPush",this.sessionId,(function(e,t,i){n.onRecvPublishEvent(e,t,i)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,t,i){n.onRecvClientInfo(e,t,i)})),this.signal.registerPushCallback("MediaDescUpdatePush",this.sessionId,(function(e,t,i){n.onRecvUpdateMediaDescription(e,t,i)})),this.onGetRemoteOfferSuccess(i.sdp))):this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" seq is not match.")},e.prototype.onCreatePublishSessionSuccess=function(e){var t=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+this.streamId+" called");var i=[];if(e.turn_server){var n=e.turn_server,r=this.stateCenter.turnOverTcpOnly,o=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);o&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" setting udp_or_tcp "+o),r="tcp"===o),r&&(n=n.replace("udp","tcp")),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" over tcp "+n),i.push(n)}e.stun_server&&i.push(e.stun_server);var s={iceTransportPolicy:"relay",iceServers:[{urls:i,username:e.turn_username,credential:e.turn_auth_key}]};this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+this.streamId+" username: "+e.turn_username),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+this.streamId+" credential: "+e.turn_auth_key),this.createOffer(s),this.signal.registerPushCallback("CandidateInfoPush",this.sessionId,(function(e,i,n){t.onRecvCandidateInfo(e,i,n)})),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,i,n){t.onRecvCloseSession(e,i,n)})),this.signal.registerPushCallback("MediaDescPush",this.sessionId,(function(e,i,n){t.onRecvMediaDescription(e,i,n)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,i,n){t.onRecvResetSession(e,i,n)})),this.signal.registerPushCallback("PublishEventPush",this.sessionId,(function(e,i,n){t.onRecvPublishEvent(e,i,n)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,i,n){t.onRecvClientInfo(e,i,n)})),this.signal.registerPushCallback("MediaDescUpdatePush",this.sessionId,(function(e,i,n){t.onRecvUpdateMediaDescription(e,i,n)})),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+this.streamId+" call success")},e.prototype.createOffer=function(e){var t,i,n=this;this.peerConnection=new RTCPeerConnection(e),this.peerConnection.onicecandidate=function(e){n.onIceCandidate(e)},this.peerConnection.onsignalingstatechange=function(e){n.onConnectionStateChange(e)},this.peerConnection.oniceconnectionstatechange=function(e){n.onIceConnectionStateChange(e)},this.streamCenter.isDataChannelEnabled&&(this.dataChannel=this.peerConnection.createDataChannel(this.streamId),this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=function(e){n.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+n.streamId+" data channel open"),n.dataChannelState=1},this.dataChannel.onclose=function(e){n.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+n.streamId+" data channel close ")});var r=[],o=[];this.localStream&&(this.localStream.getTracks().forEach((function(e){var t;null===(t=n.peerConnection)||void 0===t||t.addTrack(e,n.localStream)})),(null===(t=this.previewer)||void 0===t?void 0:t.videoTrack)&&(r=[null===(i=this.previewer)||void 0===i?void 0:i.videoTrack]),o=this.localStream.getAudioTracks(),r.length>0&&this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+this.streamId+" video device: "+r[0].label),o.length>0&&this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+this.streamId+" audio device: "+o[0].label));var s={offerToReceiveAudio:o.length>0?1:0,offerToReceiveVideo:r.length>0?1:0};this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+this.streamId+" createOffer: "+JSON.stringify(s)),this.dataReport.eventStart(this.reportSeq,"CreateOffer"),this.dataReport.eventStart(this.streamReportSeq,"CreateOffer"),this.peerConnection.createOffer(s).then((function(e){n.dataReport.eventEnd(n.reportSeq,"CreateOffer"),n.dataReport.eventEnd(n.streamReportSeq,"CreateOffer"),n.onCreateOfferSuccess(e)}),(function(e){n.dataReport.eventEndWithMsg(n.reportSeq,"CreateOffer",{error:e.toString()}),n.dataReport.eventEndWithMsg(n.streamReportSeq,"CreateOffer",{error:e.toString()}),n.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+n.streamId+" create offer error "+e.toString()),n.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kCreateOfferError,!0)}))},e.prototype.onCreateOfferSuccess=function(e,t,i,n){var r,s=this;t&&(this.isUpdateSDP=!0,n&&(this.updateSDPCallBack=n)),this.videoInfo.bitRate>0&&(e.sdp=this.updateBandwidthRestriction(e.sdp,this.videoInfo.bitRate)),e.sdp=e.sdp.replace(/sendrecv/g,"sendonly");var l=e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)?e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)[0]:null;if(l){var u=l.replace(/sendonly/,"sendrecv");e.sdp=e.sdp.replace(l,u)}e.sdp=e.sdp.replace(/useinbandfec=\d+/,(this.videoInfo.audioBitrate?"maxaveragebitrate="+this.videoInfo.audioBitrate:"")+(2===this.videoInfo.channelCount?";stereo=1":"")),this.localSdpOrder=e.sdp.match(/m=(.\w*)\s/g)||[],this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" local sdp revert "+this.localSdpOrder.join("")),e.sdp=o.SdpUtil.getSDPByVideDecodeType(e.sdp,this.videoCodec,!0),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp1 "+e.sdp.substr(0,e.sdp.length/2)),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp2 "+e.sdp.substr(e.sdp.length/2)),this.dataReport.eventStart(this.reportSeq,"SetLocalDescription"),this.dataReport.eventStart(this.streamReportSeq,"SetLocalDescription"),null===(r=this.peerConnection)||void 0===r||r.setLocalDescription(e).then((function(){s.dataReport.eventEnd(s.reportSeq,"SetLocalDescription"),s.dataReport.eventEnd(s.streamReportSeq,"SetLocalDescription"),s.onSetLocalDescriptionSuccess(e,i)}),(function(e){s.dataReport.eventEndWithMsg(s.reportSeq,"SetLocalDescription",{error:e.toString()}),s.dataReport.eventEndWithMsg(s.streamReportSeq,"SetLocalDescription",{error:e.toString()}),s.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+s.streamId+" error "+e.toString()),s.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSetLocalDescError,!0)}))},e.prototype.updateBandwidthRestriction=function(e,t){var i="AS";return"firefox"===this.stateCenter.browser&&(t=1e3*(t>>>0),i="TIAS"),-1===e.indexOf("b="+i+":")?e.replace(/(m=video.*\r\nc=IN.*\r\n)/g,"$1b="+i+":"+t+"\r\n"):(e=e.replace(new RegExp("b="+i+":.*\r\n","g"),"b="+i+":"+t+"\r\n")).replace("b="+i+":"+t+"\r\n","")},e.prototype.onSetLocalDescriptionSuccess=function(e,t){var i=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" success"),!this.isUpdateSDP&&(this.state=r.ENUM_PUBLISH_STATE.waitingOfferRsp),t&&(this.videoInfo=n(n({},this.videoInfo),t));var o={sdp:e.sdp,width:this.videoInfo.width,height:this.videoInfo.height,frameRate:this.videoInfo.frameRate,video_min_kpbs:this.videoInfo.bitRate,video_max_kpbs:this.videoInfo.bitRate,audio_kpbs:48,keyframe_intv:2};if(this.offerSeq=r.getSeq(),this.isUpdateSDP){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" update sdp");var s=n(n({},o),{seq:this.sessionSeq,peerID:this.peerID,type:0});return this.dataReport.eventStart(this.reportSeq,"SendMediaDescUpdate"),this.dataReport.eventStart(this.streamReportSeq,"SendMediaDescUpdate"),void this.signal.sendMediaDescUpdateReq(this.offerSeq,this.sessionId,s,(function(e,t,i){}),(function(e,t){i.dataReport.eventEndWithMsg(i.reportSeq,"SendMediaDescUpdate",{error:e}),i.dataReport.eventEndWithMsg(i.streamReportSeq,"SendMediaDescUpdate",{error:e}),i.updateSDPCallBack&&i.updateSDPCallBack(-1),i.publishStateUpdateError(e==r.SEND_MSG_TIMEOUT?a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kUpdateMediaDescriptionTimeOut:a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kUpdateMediaDescriptionError)}))}this.isPeer?this.createSession(e):(this.dataReport.eventStart(this.reportSeq,"SendMediaDesc"),this.dataReport.eventStart(this.streamReportSeq,"SendMediaDesc"),this.signal.sendMediaDesc(this.offerSeq,this.sessionId,0,o,(function(e,t,n){i.offerSeq==e&&i.sessionId==t?(i.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+i.streamId+" send success"),i.dataReport.eventEndWithMsg(i.reportSeq,"SendMediaDesc",{mediaDescription:{width:o.width,height:o.height,frameRate:o.frameRate,video_min_kpbs:o.video_min_kpbs,video_max_kpbs:o.video_max_kpbs,audio_kpbs:o.audio_kpbs,keyframe_intv:o.keyframe_intv}}),i.dataReport.eventEndWithMsg(i.streamReportSeq,"SendMediaDesc",{mediaDescription:{width:o.width,height:o.height,frameRate:o.frameRate,video_min_kpbs:o.video_min_kpbs,video_max_kpbs:o.video_max_kpbs,audio_kpbs:o.audio_kpbs,keyframe_intv:o.keyframe_intv}}),i.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+i.streamId+" send success stateNego:waiterAnswer"),i.stateNego=r.ENUM_PUBLISH_STATE_NEGO.waiterAnswer,i.state=r.ENUM_PUBLISH_STATE.waitingServerAnswer):i.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+i.streamId+" seq or sessionId is not equal")}),(function(e,t){i.dataReport.eventEndWithMsg(i.reportSeq,"SendMediaDesc",{error:e}),i.dataReport.eventEndWithMsg(i.streamReportSeq,"SendMediaDesc",{error:e}),i.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kMediaDescError)})),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" call success"))},e.prototype.onRecvUpdateMediaDescription=function(e,t,i){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC+" "+this.streamId+" received"),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.dataReport.addEvent(this.reportSeq,"RecvUpdateMediaDesc"),this.dataReport.addEvent(this.streamReportSeq,"RecvUpdateMediaDesc"),this.signal.sendUpdateMediaDescAck(e,this.sessionId,0,this.peerID),1==i.type?this.onGetRemoteOfferSuccess(i.sdp):this.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kMediaDescError)},e.prototype.onRecvMediaDescription=function(e,t,i){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received"),this.state==r.ENUM_PUBLISH_STATE.waitingServerAnswer?(this.stateNego=r.ENUM_PUBLISH_STATE_NEGO.waitingCandidate,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.dataReport.addEvent(this.reportSeq,"RecvMediaDesc"),this.dataReport.addEvent(this.streamReportSeq,"RecvMediaDesc"),this.signal.sendMediaDescAck(e,this.sessionId,0),1==i.type?this.onGetRemoteOfferSuccess(i.sdp):this.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kMediaDescError)):this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onGetRemoteOfferSuccess=function(e){var t,i,n,o,s,l,u=this;this.videoInfo.audioBitrate&&48e3!==this.videoInfo.audioBitrate&&(e=e.replace(/maxaveragebitrate=(\d+)/,"maxaveragebitrate="+this.videoInfo.audioBitrate)),this.remoteSdpOrder=e.match(/m=(.\w*)\s/g)||[],this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+NaN+this.remoteSdpOrder.join(""));var d=this.stateCenter.turnOverTcpOnly,h=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);if(h&&(this.logger.info("zp.oro.0 setting udp_or_tcp "+h),d="tcp"===h),d&&(null===(t=e.match(/candidate.*/g))||void 0===t||t.forEach((function(t){var i=t.replace(/udp/,"tcp");e=e.replace(t,i)}))),this.logger.info("zp.oro.0 "+this.streamId+" sdp revert "+this.localSdpOrder.join("")+" "+this.remoteSdpOrder.join("")),this.localSdpOrder.join()!==this.remoteSdpOrder.join()&&this.localSdpOrder.length==this.remoteSdpOrder.length){var p=new RegExp("[\\s\\S]*"+this.remoteSdpOrder[0]).exec(e)[0].replace(this.remoteSdpOrder[0],""),f=[],g="";this.localSdpOrder.forEach((function(t){var i=u.remoteSdpOrder.findIndex((function(e){return e==t})),n=new RegExp(t+"[\\s\\S]*"+(u.remoteSdpOrder[i+1]||"")).exec(e)[0].replace(u.remoteSdpOrder[i+1],""),r=/a=mid:(\w)/.exec(n)[1];f.push(r),g+=n||""})),e=p.replace(/a=group:BUNDLE.*/,"a=group:BUNDLE "+f.join(" "))+g,this.localSdpOrder=[],this.remoteSdpOrder=[]}var m=e.match(/m=video(.|\r|\n)*a=rtpmap(.|\r|\n)*(a=fmtp:(\d+).*)/);if("chrome"==this.stateCenter.browser){var _=0;if(this.videoInfo.bitRate&&"target"===this.videoInfo.startBitrate&&(_=this.videoInfo.bitRate),null!==m&&_){var v=m[3];e=-1!==v.indexOf("apt=")?e.replace(v,"a=fmtp:96 x-google-start-bitrate="+_+"\n"+v):e.replace(v,v+";x-google-start-bitrate="+_)}}if(this.videoInfo.bitRate>0){var E=/b=AS.*(\r\n|\n)/.test(e);e=E?e.replace(/AS:(\d+)/,"AS:"+this.videoInfo.bitRate):e.replace(/m=video.*(\r\n|\n)c=.*(\r\n|\n)/,"$&b=AS:"+this.videoInfo.bitRate+"\n");var A=null===(i=this.peerConnection)||void 0===i?void 0:i.getSenders().find((function(e){return e.track&&"video"===e.track.kind}));if(A&&A.getParameters&&A.setParameters){var y=A.getParameters();y.encodings&&0!=y.encodings.length||(y.encodings=[{}]),y.encodings[0].maxBitrate=1e3*this.videoInfo.bitRate;var S=this.lastPublishStats.frameWidth,C=(null===(o=null===(n=this.previewer)||void 0===n?void 0:n.cameraMaxResolution)||void 0===o?void 0:o.maxWidth)||0,b=null===(s=this.previewer)||void 0===s?void 0:s.videoInfo.width,T=S?Math.min(C,S):C;if(C&&b){var I=Math.max(T/b,1);y.encodings[0].scaleResolutionDownBy=I}A.setParameters(y)}}this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+" remoteSdp:",e);var R={type:"answer",sdp:e,toJSON:function(){}};this.dataReport.eventStart(this.reportSeq,"SetRemoteDescription"),this.dataReport.eventStart(this.streamReportSeq,"SetRemoteDescription"),null===(l=this.peerConnection)||void 0===l||l.setRemoteDescription(new RTCSessionDescription(R)).then((function(){u.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+u.streamId+" set success"),u.dataReport.eventEnd(u.reportSeq,"SetRemoteDescription"),u.dataReport.eventEnd(u.streamReportSeq,"SetRemoteDescription"),u.stateNego==r.ENUM_PUBLISH_STATE_NEGO.iceConnected&&u.updateSDPCallBack&&(u.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+u.streamId+" update sdp success"),u.updateSDPCallBack(0),u.updateSDPCallBack=void 0,u.isUpdateSDP=!1)}),(function(e){u.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+u.streamId+" failed: "+e.toString()),u.dataReport.eventEndWithMsg(u.reportSeq,"SetRemoteDescription",{error:e.toString()}),u.dataReport.eventEndWithMsg(u.streamReportSeq,"SetRemoteDescription",{error:e.toString()}),u.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSetRemoteDescError,!0)})),this.state=r.ENUM_PUBLISH_STATE.waitingServerICE,this.logger.debug(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+" call success")},e.prototype.onIceConnectionStateChange=function(e){var t=this;this.state!=r.ENUM_PUBLISH_STATE.stop&&null!=this.peerConnection&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateChanged "+this.peerConnection.iceConnectionState),"connected"===this.peerConnection.iceConnectionState?(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" connected state "+this.state),this.dataReport.eventEnd(this.reportSeq,"IceConnected"),this.dataReport.eventEnd(this.streamReportSeq,"IceConnected"),this.stateNego=r.ENUM_PUBLISH_STATE_NEGO.iceConnected,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateNego:iceConnected"),this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.publishEvent?this.publishSuccess():(this.firstGetStatsTimer&&clearTimeout(this.firstGetStatsTimer),this.firstGetStatsTimer=null,this.firstGetStatsTimer=setTimeout((function(){var e;t.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" get first stats state "+t.state),t.state!==r.ENUM_PUBLISH_STATE.publishing&&(null===(e=t.peerConnection)||void 0===e||e.getStats().then((function(e){t.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" get first stats suc"),e.size>0&&t.publishSuccess()})))}),1e3))):"closed"===this.peerConnection.iceConnectionState?(this.dataReport.addEvent(this.reportSeq,"IceClosed"),this.stateNego=r.ENUM_PUBLISH_STATE_NEGO.iceClosed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)):"failed"===this.peerConnection.iceConnectionState?(this.dataReport.addEvent(this.reportSeq,"IceFailed"),this.stateNego=r.ENUM_PUBLISH_STATE_NEGO.iceFailed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)):"disconnected"===this.peerConnection.iceConnectionState&&(this.dataReport.addEvent(this.reportSeq,"IceDisconnected"),this.logger.warn(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" ice disconnected "),this.stateNego=r.ENUM_PUBLISH_STATE_NEGO.iceDisconnected,this.iceDisconnectedTimer||(this.iceDisconnectedTimer=setTimeout((function(){t.checkPublishConnectionFailedState("disconnected")}),this.iceDisconnectedMaxTime))))},e.prototype.onIceCandidate=function(e){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate"+e.candidate),e.candidate)if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate"+e.candidate.candidate),this.state<r.ENUM_PUBLISH_STATE.connecting||this.state==r.ENUM_PUBLISH_STATE.stop)this.candidateInfo.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex});else{var t={candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex};this.sendCandidateInfo([t])}},e.prototype.sendCandidateInfo=function(e){var t=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" called"),!(e=e.filter((function(e){return e.candidate.indexOf("relay")>0})))||e.length<1?this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" cancelled"):(this.dataReport.eventStart(this.reportSeq,"SendIceCandidate"),this.dataReport.eventStart(this.streamReportSeq,"SendIceCandidate"),this.stateNego!==r.ENUM_PUBLISH_STATE_NEGO.iceConnected&&(this.stateNego=r.ENUM_PUBLISH_STATE_NEGO.sendCandidate),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" stateNego:sendCandidate"),this.signal.sendCandidateInfo(r.getSeq(),this.sessionId,e,(function(e,i,n){t.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+t.streamId+" send success"),t.dataReport.eventEnd(t.reportSeq,"SendIceCandidate"),t.dataReport.eventEnd(t.streamReportSeq,"SendIceCandidate")}),(function(e,i){t.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+t.streamId+" failed to send: "+e.toString()),t.dataReport.eventEndWithMsg(t.reportSeq,"SendIceCandidate",{error:e}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"SendIceCandidate",{error:e}),t.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kCandidateError)})))},e.prototype.onConnectionStateChange=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CONNECTION_STATE_CHANGE+" "+this.streamId+" called "+e.target.signalingState)},e.prototype.onRecvCandidateInfo=function(e,t,i){var n,o=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" received "+JSON.stringify(i.infos)),this.state==r.ENUM_PUBLISH_STATE.waitingServerICE){this.dataReport.addEvent(this.reportSeq,"RecvIceCandidate"),this.dataReport.addEvent(this.streamReportSeq,"RecvIceCandidate"),this.signal.sendCandidateInfoAck(e,this.sessionId,0),this.sendCandidateInfo(this.candidateInfo),this.candidateInfo=[];for(var s=0;s<i.infos.length;s++){var l={sdpMid:i.infos[s].sdpMid,sdpMLineIndex:i.infos[s].sdpMLineIndex,candidate:i.infos[s].candidate};this.logger.debug(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+""+this.streamId+" candidate "+l.candidate),null===(n=this.peerConnection)||void 0===n||n.addIceCandidate(new RTCIceCandidate(l)).then((function(){o.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+o.streamId+" add success")}),(function(e){o.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+o.streamId+" add error "+e.toString()),o.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kCandidateError,!0)}))}this.state=r.ENUM_PUBLISH_STATE.connecting,this.dataReport.eventStart(this.reportSeq,"IceConnected"),this.dataReport.eventStart(this.streamReportSeq,"IceConnected")}else this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onRecvCloseSession=function(e,t,i){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLOSE_SESSION+""+this.streamId+" "+JSON.stringify(i)),this.dataReport.addEvent(this.reportSeq,"RecvCloseSession"),this.signal.sendCloseSessionAck(e,this.sessionId,0);var n=i.err_info?JSON.parse(i.err_info.toLowerCase()):{},r=n.action?n.action:null,o=1*i.reason,s=JSON.parse(JSON.stringify(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishSessionClosedError));s.message+=" reason:"+o+" "+(r?" action:"+r:""),1011===n.err&&(s=a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kMediaServerForbidError),1014===n.err&&(s=a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishTokenExpiredError),this.negoTimer&&clearTimeout(this.negoTimer);var l=![4,8,10,11,12,14,26,27].includes(o)&&![2,5,6].includes(r);this.publishStateUpdateError(s,l)},e.prototype.onRecvResetSession=function(e,t,i){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_RESET_SESSION+" "+this.streamId+" received "),t==this.sessionId){this.signal.sendCloseSessionAck(e,this.sessionId,0);var n=a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishSessionClosedError;this.negoTimer&&clearTimeout(this.negoTimer),this.publishStateUpdateError(n)}else this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_RESET_SESSION+" "+this.streamId+" cannot find session")},e.prototype.onRecvPublishEvent=function(e,t,i){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_PUBLISH_EVENT+" "+this.streamId+" received"),this.publishEvent=!0,this.firstGetStatsTimer&&(clearTimeout(this.firstGetStatsTimer),this.firstGetStatsTimer=null),this.stateNego===r.ENUM_PUBLISH_STATE_NEGO.iceConnected&&0==i.event&&this.publishSuccess()},e.prototype.onRecvClientInfo=function(e,t,i){this.stateCenter.clientIP!==i.clientip&&this.logger.warn(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLIENT_INFO+" client ip changed "+this.stateCenter.clientIP+" "+i.clientip),this.stateCenter.clientIP=i.clientip,this.peerID=i.peer_id;var n=this.previewer;if(n&&null!==n.activateSEIConfig){var r=null==n?void 0:n.activateSEIConfig,o=r.action,s=r.infoType;this.activateSEIInsert(o,s)}},e.prototype.checkPublishConnectionFailedState=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" streamID "+this.streamId," state "+this.state+" connectionState "+e),this.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kMediaConnectionError)},e.prototype.setPublishQualityTimer=function(){var e=this;null==this.qualityTimer&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER+" "+this.streamId+" called"),this.clearPublishQualityTimer(),this.qualityTimer=setInterval((function(){e.peerConnectionGetStats()}),this.qualityTimeInterval),this.lastPublishStats={audioPacketsLost:0,videoPacketsLost:0,videoPacketsSent:0,audioPacketsSent:0,audioRetransmittedPacketsSent:0,videoTime:(new Date).getTime(),audioTime:(new Date).getTime(),time:0,audioBytesSent:0,videoBytesSent:0,framesEncoded:0,framesSent:0,videoRetransmittedPacketsSent:0},this.qualitySeq=r.getSeq(),this.qualityCount=0)},e.prototype.peerConnectionGetStats=function(e){var t=this;if(this.peerConnection){var i=[this.peerConnection.getStats(null)];"chrome"==this.stateCenter.browser&&i.push(new Promise((function(e,i){var n;null===(n=t.peerConnection)||void 0===n||n.getStats((function(t){return e(t)}),(function(e){return i(e)}))}))),Promise.all(i).then((function(i){var n=t.getPublishStats(i[0],i[1]);e&&e(n,i[0],i[1])})).catch((function(e){t.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER+" "+t.streamId+" getStats error "+e.toString())}))}},e.prototype.getPublishStats=function(e,t){var i,n=this;if(e){for(var o,l=document.querySelectorAll("video, audio"),u=0;u<l.length;u++)l[u].srcObject===this.localStream&&(o=l[u]);var d=this.streamCenter.checkPreview(this.localStream),h={audioCodec:"opus",audioTargetBitrate:this.videoInfo.audioBitrate/1e3||0,audioBitrate:0,videoTargetBitrate:this.videoInfo.bitRate||0,videoTargetFPS:this.videoInfo.frameRate||0,videoBitrate:0,audioFPS:0,audioLevel:0,audioInputLevel:0,audioPacketsLost:0,audioPacketsLostRate:0,sendLevel:0,samplingRate:0,videoFPS:0,nackCount:0,pliCount:0,audioQuality:0,videoQuality:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoPacketsLost:0,videoPacketsLostRate:0,totalRoundTripTime:0,currentRoundTripTime:0,googBandwidthLimitedResolution:void 0,videoCodecName:"",audioCodecName:"",googCpuLimitedResolution:void 0,googAvailableSendBandwidth:0,googActualEncBitrate:0,googTargetEncBitrate:0,googFrameWidthInput:0,googFrameHeightInput:0,googFrameRateInput:0,codecImplementationName:"",videoMuteState:(null===(i=null==d?void 0:d.videoTrack)||void 0===i?void 0:i.enabled)?"0":"1",audioMuteState:this.localStream.getAudioTracks().length>0&&this.localStream.getAudioTracks()[0].enabled?"0":"1",muted:o?o.muted:void 0,paused:o?o.paused:void 0,volume:o?o.volume:void 0,sinkId:o?o.sinkId:void 0},p=this.lastPublishStats.time,f=0,g=0,m=0,_=0,v=0,E=0;e.forEach((function(e){if(("outbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesSent)&&"audio"==e.mediaType)0!=p&&(h.audioBitrate=8*(e.bytesSent-n.lastPublishStats.audioBytesSent)/(e.timestamp-p),h.audioFPS=(e.packetsSent-(e.retransmittedPacketsSent-n.lastPublishStats.audioRetransmittedPacketsSent)-n.lastPublishStats.audioPacketsSent)/(e.timestamp-p)*1e3,m=(e.retransmittedPacketsSent-n.lastPublishStats.audioRetransmittedPacketsSent)/(e.packetsSent-n.lastPublishStats.audioPacketsSent)),h.audioBitrate<0&&(h.audioBitrate=0),n.lastPublishStats.audioBytesSent=e.bytesSent,n.lastPublishStats.time=e.timestamp,n.lastPublishStats.audioPacketsSentTimeStamp=e.packetsSent-n.lastPublishStats.audioPacketsSent,n.lastPublishStats.audioPacketsSent=e.packetsSent,n.lastPublishStats.audioRetransmittedPacketsSent=e.retransmittedPacketsSent;else if(("outbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesSent)&&"video"==e.mediaType)0!=p&&(h.videoBitrate=8*(e.bytesSent-n.lastPublishStats.videoBytesSent)/(e.timestamp-p),h.videoFPS=1e3*(e.framesEncoded-n.lastPublishStats.framesEncoded)/(e.timestamp-p),_=(e.retransmittedPacketsSent-n.lastPublishStats.videoRetransmittedPacketsSent)/(e.packetsSent-n.lastPublishStats.videoPacketsSent)),h.videoBitrate<0&&(h.videoBitrate=0),h.videoFPS<0&&(h.videoFPS=0),h.nackCount=e.nackCount,h.pliCount=e.pliCount,n.lastPublishStats.videoBytesSent=e.bytesSent,n.lastPublishStats.framesEncoded=e.framesEncoded,n.lastPublishStats.time=e.timestamp,n.lastPublishStats.videoPacketsSentTimeStamp=e.packetsSent-n.lastPublishStats.videoPacketsSent,n.lastPublishStats.videoPacketsSent=e.packetsSent,n.lastPublishStats.videoRetransmittedPacketsSent=e.retransmittedPacketsSent;else if("remote-inbound-rtp"==e.type&&"video"==e.kind){e.packetsLost>0&&(h.videoPacketsLost=e.packetsLost);var t=e.packetsLost-n.lastPublishStats.videoPacketsLost;h.videoPacketsLostRate=t>0?t/n.lastPublishStats.videoPacketsSentTimeStamp:0,e.packetsLost>0&&(n.lastPublishStats.videoPacketsLost=e.packetsLost),n.lastPublishStats.videoTime=e.timestamp,g=1e3*e.roundTripTime,E=e.jitter}else if("remote-inbound-rtp"==e.type&&"audio"==e.kind){e.packetsLost>0&&(h.audioPacketsLost=e.packetsLost);var i=e.packetsLost-n.lastPublishStats.audioPacketsLost;h.audioPacketsLostRate=i>0?i/n.lastPublishStats.audioPacketsSentTimeStamp:0,e.packetsLost>0&&(n.lastPublishStats.audioPacketsLost=e.packetsLost),n.lastPublishStats.audioTime=e.timestamp,f=1e3*e.roundTripTime,v=e.jitter}else if("media-source"==e.type&&("audio"==e.kind||e.id.toLowerCase().indexOf("audio")>=0))h.audioLevel=e.audioLevel,h.sendLevel=e.totalAudioEnergy,h.audioInputLevel=32767*e.totalAudioEnergy,h.samplingRate=e.totalSamplesDuration;else if("track"==e.type&&("video"==e.kind||e.id.indexOf("video")>=0||e.frameWidth)){if(h.frameHeight=e.frameHeight,h.frameWidth=e.frameWidth,0===p||n.lastPublishStats.frameHeight===e.frameHeight&&n.lastPublishStats.frameWidth===e.frameWidth)0===p&&(n.lastPublishStats.frameHeight=e.frameHeight,n.lastPublishStats.frameWidth=e.frameWidth);else{var o=r.getReportSeq();n.dataReport.newReport(o,a.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.event),n.dataReport.addMsgInfo(o,{session_id:a.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.session_id(n.sessionId),w:a.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.w(e.frameWidth),h:a.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.h(e.frameHeight)}),n.dataReport.uploadReport(o),n.lastPublishStats.frameHeight=e.frameHeight,n.lastPublishStats.frameWidth=e.frameWidth}0!=p&&(h.videoTransferFPS=1e3*(e.framesSent-n.lastPublishStats.framesSent)/(e.timestamp-p)),h.videoTransferFPS<0&&(h.videoTransferFPS=0),n.lastPublishStats.framesSent=e.framesSent}else"candidate-pair"==e.type&&(null!=e.totalRoundTripTime&&(h.totalRoundTripTime=e.totalRoundTripTime),null!=e.currentRoundTripTime&&(h.currentRoundTripTime=e.currentRoundTripTime))})),t&&t.result().forEach((function(e){"ssrc"==e.type&&e.names().indexOf("googBandwidthLimitedResolution")>=0&&(h.googBandwidthLimitedResolution=e.stat("googBandwidthLimitedResolution")),"ssrc"==e.type&&"video"==e.stat("mediaType")&&e.names().indexOf("googCodecName")>=0&&(h.videoCodecName=e.stat("googCodecName")),"ssrc"==e.type&&"audio"==e.stat("mediaType")&&e.names().indexOf("googCodecName")>=0&&(h.audioCodecName=e.stat("googCodecName")),"ssrc"==e.type&&e.names().indexOf("googCpuLimitedResolution")>=0&&(h.googCpuLimitedResolution=e.stat("googCpuLimitedResolution")),"ssrc"==e.type&&e.names().indexOf("googFrameWidthInput")>=0&&(h.googFrameWidthInput=e.stat("googFrameWidthInput")),"ssrc"==e.type&&e.names().indexOf("googFrameHeightInput")>=0&&(h.googFrameHeightInput=e.stat("googFrameHeightInput")),"ssrc"==e.type&&e.names().indexOf("googFrameRateInput")>=0&&(h.googFrameRateInput=e.stat("googFrameRateInput")),"ssrc"==e.type&&e.names().indexOf("codecImplementationName")>=0&&(h.codecImplementationName=e.stat("codecImplementationName")),"VideoBwe"==e.type&&e.names().indexOf("googAvailableSendBandwidth")>=0&&(h.googAvailableSendBandwidth=e.stat("googAvailableSendBandwidth")),"VideoBwe"==e.type&&e.names().indexOf("googActualEncBitrate")>=0&&(h.googActualEncBitrate=e.stat("googActualEncBitrate")),"VideoBwe"==e.type&&e.names().indexOf("googTargetEncBitrate")>=0&&(h.googTargetEncBitrate=e.stat("googTargetEncBitrate")),"VideoBwe"==e.type&&e.names().indexOf("googRetransmitBitrate")>=0&&(h.googRetransmitBitrate=e.stat("googRetransmitBitrate"))})),"chrome"===this.stateCenter.browser&&this.handleEncBitrate(Number.parseInt(h.googTargetEncBitrate),Number.parseInt(h.googActualEncBitrate),Number.parseInt(h.googRetransmitBitrate)),g=isNaN(g)||g<0?0:g,_=isNaN(_)||_<0?0:_,E=isNaN(E)||E<0?0:E,f=isNaN(f)||f<0?0:f,m=isNaN(m)||m<0?0:m,v=isNaN(v)||v<0?0:v;var A=s.ClientUtil.getNetQuality(g,_,E),y=s.ClientUtil.getNetQuality(f,m,v);h.videoQuality=p>0?s.ClientUtil.quality2QualityGrade(A):0,h.audioQuality=p>0?s.ClientUtil.quality2QualityGrade(y):0;var S=Math.min(A,y);this.netQuality=S,p>0&&S<=r.QUALITY_CONSTANT.MiddleMinQuality&&(new Date).getTime()>this.probeTime+this.probeInterval&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" netQuality "+S+" start net probe"),this.probeState=r.ENUM_PROBE_STATE.tryProbe,this.streamCenter.startNetProbe(!0,this,this.gwNodeList),this.probeTime=(new Date).getTime());var C={video:{videoBitrate:h.videoBitrate,videoFPS:h.videoFPS,videoTransferFPS:h.videoTransferFPS,frameHeight:h.frameHeight,frameWidth:h.frameWidth,muteState:h.videoMuteState,videoQuality:h.videoQuality,videoPacketsLost:h.videoPacketsLost,videoPacketsLostRate:h.videoPacketsLostRate},audio:{audioBitrate:h.audioBitrate,audioCodec:h.audioCodec,muteState:h.audioMuteState,audioQuality:h.audioQuality,audioPacketsLost:h.audioPacketsLost,audioPacketsLostRate:h.audioPacketsLostRate,audioFPS:h.audioFPS},nackCount:h.nackCount,pliCount:h.pliCount,totalRoundTripTime:h.totalRoundTripTime,currentRoundTripTime:h.currentRoundTripTime};return void 0!==h.videoPacketsLost&&(C.video.videoPacketsLost=h.videoPacketsLost,C.video.videoPacketsLostRate=h.videoPacketsLostRate,C.audio.audioPacketsLost=h.audioPacketsLost,C.audio.audioPacketsLostRate=h.audioPacketsLostRate),void 0!==h.muted&&(C.muted=h.muted,C.paused=h.paused,C.volume=h.volume,C.sinkId=h.sinkId),void 0!==h.googBandwidthLimitedResolution&&(C.googBandwidthLimitedResolution=h.googBandwidthLimitedResolution,C.video.googCodecName=h.videoCodecName,C.audio.googCodecName=h.audioCodecName,C.googCpuLimitedResolution=h.googCpuLimitedResolution,C.googFrameWidthInput=h.googFrameWidthInput,C.googFrameHeightInput=h.googFrameHeightInput,C.googFrameRateInput=h.googFrameRateInput,C.codecImplementationName=h.codecImplementationName,C.googAvailableSendBandwidth=h.googAvailableSendBandwidth,C.googActualEncBitrate=h.googActualEncBitrate,C.googTargetEncBitrate=h.googTargetEncBitrate),0!==p&&(this.uploadPublishQuality(h),this.onPublishQualityUpdate(this.streamId,C,e,t)),C}},e.prototype.uploadPublishQuality=function(e){var t=this;if(this.qualityUpload){var i=(new Date).getTime();(0==this.qualityUploadLastTime||i-this.qualityUploadLastTime>=this.qualityUploadInterval)&&(e.stream_type="publish",e.stream_id=this.streamId,e.timeStamp=parseInt(Math.round(i/1e3).toString()),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_UPLOAD_PUBLISH_QUALITY+" "+this.streamId+" upload"+JSON.stringify(e)),this.streamCenter.updateQuality(0,e),this.signal.QualityReport(r.getSeq(),this.sessionId,e,(function(e,i,n){void 0!==n.report&&(t.qualityUpload=n.report,t.qualityUploadInterval=n.report_interval_ms)}),(function(e,i){t.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_UPLOAD_PUBLISH_QUALITY+" "+t.streamId+" upload failed "+e)})),this.qualityUploadLastTime=i)}},e.prototype.stopPublish=function(){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_PUBLISH+"  .1 "+this.streamId+" called"),Object.keys(this.streamCenter.publisherList).length=1)for(var e in this.streamCenter.playerList){var t=this.streamCenter.playerList[e].player;t.state==r.ENUM_PLAY_STATE.playing&&t.broadcasterStatus==r.ENUM_BROADCASTER_STATUS.start&&(this.signal&&this.signal.sendBroadcasterStatus(r.getSeq(),t.sessionId,0),t.broadcasterStatus=r.ENUM_BROADCASTER_STATUS.stop)}this.stopMixingAudio(),this.stopMixingBuffer(),this.stopEffect(),this.sessionId&&!this.closeSessionSignal&&this.signal.sendCloseSession(r.getSeq(),this.sessionId,0),this.dataReport.eventEndWithMsg(this.streamReportSeq,"PublishState",{state:this.state+""}),this.dataReport.addEvent(this.streamReportSeq,"StopPublish"),this.dataReport.addMsgExt(this.streamReportSeq,{stream:this.streamId,sessionId:this.sessionId}),this.dataReport.addMsgInfo(this.streamReportSeq,{itemtype:"RTCPublishStream"}),this.dataReport.uploadReport(this.streamReportSeq,"RTCPublishStream"),this.resetPublish()},e.prototype.onPublishStateUpdate=function(e,t,i,n){},e.prototype.onPublishQualityUpdate=function(e,t,i,n){},e.prototype.onDisconnect=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_DISCONNECT+" "+this.streamId+" call"),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_DISCONNECT+" "+this.streamId+" websocket disconnect"),this.dataReport.addEvent(this.reportSeq,"OnDisconnect"),this.publishStateUpdateError(e||a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kWebsocketDisconnectedError,!!e)},e.prototype.playEffect=function(e,t,i,n){},e.prototype.pauseEffect=function(e){},e.prototype.resumeEffect=function(e){},e.prototype.stopEffect=function(e){},e.prototype.setEffectVolume=function(e,t){},e.prototype.startMixingAudio=function(e){},e.prototype.stopMixingAudio=function(e){},e.prototype.mixingBuffer=function(e,t,i){},e.prototype.stopMixingBuffer=function(e){},e.prototype.setMixingAudioVolume=function(e,t){},e.prototype.publishSuccess=function(){var e;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" call"),this.isUpdateSDP&&this.updateSDPCallBack)return this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" "+this.streamId+" update sdp success"),this.updateSDPCallBack(0),this.updateSDPCallBack=void 0,void(this.isUpdateSDP=!1);for(var t in this.state!=r.ENUM_PUBLISH_STATE.publishing&&this.onPublishStateUpdate(r.ENUM_PUBLISH_STATE_UPDATE.start,this.streamId,{code:0,message:""},!0),this.isPeer&&(this.peerFailCount=0),this.state=r.ENUM_PUBLISH_STATE.publishing,this.dataReport.eventStart(this.reportSeq,"PublishState"),this.dataReport.eventStart(this.streamReportSeq,"PublishState"),this.streamCenter.playerList){var i=this.streamCenter.playerList[t].player;i.state==r.ENUM_PLAY_STATE.playing&&i.broadcasterStatus==r.ENUM_BROADCASTER_STATUS.stop&&(this.signal&&this.signal.sendBroadcasterStatus(r.getSeq(),i.sessionId,1),i.broadcasterStatus=r.ENUM_BROADCASTER_STATUS.start)}this.setPublishQualityTimer();var n=2,o=2,s=null===(e=this.previewer)||void 0===e?void 0:e.videoTrack,a=0!==this.localStream.getAudioTracks().length&&this.localStream.getAudioTracks()[0];s&&!0===s.enabled&&(n=0),a&&!0===a.enabled&&(o=0),this.sendStreamStatus(n,o),this.streamCenter.soundLevelDelegate&&this.previewer&&this.previewer.startSoundLevel(),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" call success")},e.prototype.startSoundLevel=function(){var e;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" call streamID: "+this.streamId),this.localStream&&0!=this.localStream.getAudioTracks().length)try{null===(e=this.previewer)||void 0===e||e.startSoundLevel()}catch(e){this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" "+this.streamId+" get sound level failed "+e)}else this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" "+this.streamId+" local stream no found")},e.prototype.stopSoundLevel=function(){var e;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_SOUND_LEVEL+" call streamID: "+this.streamId),null===(e=this.previewer)||void 0===e||e.stopSoundLevel()},e.prototype.rebackMic=function(){var e,t=this;if(this.peerConnection&&this.micTrack instanceof MediaStreamTrack&&0==this.audioMixList.length&&0==Object.keys(this.arrayBufferMap).length&&0==this.effectList.length){var i=null===(e=this.peerConnection)||void 0===e?void 0:e.getSenders().find((function(e){var i,n;return(null===(i=e.track)||void 0===i?void 0:i.kind)===(null===(n=t.micTrack)||void 0===n?void 0:n.kind)}));i&&(i.replaceTrack(this.micTrack),this.localStream.removeTrack(this.localStream.getAudioTracks()[0]),this.localStream.addTrack(this.micTrack))}},e.prototype.handleEncBitrate=function(e,t,i){var n,r=this,o=1e3*this.videoInfo.bitRate,a=0;if(t>0){this.needIncMax||this.gotMax||(this.probeCount++,t>=.75*e?(this.probeCount>=10&&this.initFitCnt>=.6*this.probeCount&&(this.gotMax=!0,this.targetRate=o),this.initFitCnt++):this.probeCount>=10&&this.initFitCnt/this.probeCount<.3&&(this.needIncMax=!0));var l=s.ClientUtil.arrAvg(this.totalBitrateArray,t,10);if(this.needIncMax)if(l>=1.05*o){if(this.targetRate>o){var u=void 0;l>e?(u=l-e,this.targetRate-=u):(u=l-o,this.targetRate-=u),this.targetRate=Math.max(this.targetRate,o),this.targetRate=Math.min(this.targetRate,2*o),a=this.targetRate}}else l<.8*o&&(0===this.targetRate&&(this.targetRate=e),this.targetRate>=o?this.targetRate=this.targetRate+.08*o:this.targetRate=1.05*this.targetRate,this.targetRate=Math.min(this.targetRate,2*o),a=this.targetRate)}if(i>0&&i<o){var d=s.ClientUtil.arrAvg(this.totalRetransRateArray,i,5);this.needIncMax?d+t>1.05*o&&(u=d+t-o,this.targetRate-=u,this.targetRate=Math.max(this.targetRate,o-d),a=this.targetRate):a=this.targetRate-d}else this.targetRate<o&&(this.targetRate=o,a=this.targetRate);if(a>0){a=s.ClientUtil.arrAvg(this.totalTargetRateArray,a,5);var h=null===(n=this.peerConnection)||void 0===n?void 0:n.getSenders().find((function(e){return e.track&&"video"===e.track.kind}));if(!h)return;var p=h.getParameters();p.encodings||(p.encodings=[{}]),p.encodings[0].maxBitrate=a,h.setParameters(p).catch((function(e){r.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_HANDLE_ENC_BITRATE+" "+e)}))}},e.prototype.resetEncBitrate=function(){this.needIncMax=!1,this.probeCount=0,this.gotMax=!1,this.initFitCnt=0,this.targetRate=0,this.totalBitrateArray=[],this.totalTargetRateArray=[],this.totalRetransRateArray=[]},e.prototype.replacePublishedTrack=function(e,t){return void 0===t&&(t=!1),{errorCode:-1,extendedData:"should install advanced module first"}},e.prototype.sendStreamStatus=function(e,t,i){var n=this;void 0===i&&(i=0),this.camera_status=e,this.mic_status=t,i++,this.signal.sendStreamStatus(r.getSeq(),this.sessionId,e,t,this.streamId,(function(){n.camera_status===e&&n.mic_status===t&&i<=1&&n.sendStreamStatus(e,t,i)}))},e}();t.ZegoPublish=l},5019:function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSignal=void 0;var r=i(6706),o=i(1089),s=i(2752),a=function(){function e(e,t){this.sendDataMap={},this.sendDataList=new r.LinkedList,this.sendDataCheckOnceCount=100,this.signalSeq=0,this.pushCallback={},this.sessionInfos={},this.tryHeartbeatCount=0,this.heartbeatInterval=1e4,this.sendDataTimeout=5e3,this.sendDataDropTimeout=1e4,this.sendDataCheckTimer=null,this.sendDataCheckInterval=2e3,this.checkMessageList=["ActivateVideoPlayStreamReq","ActivateAudioPlayStreamReq","CreateSessionReq","CreateSessionWithSdpReq","ActivateSEIInsertReq","StreamStatusNotify","MediaDescUpdateReq"],this.tryConnectCount=1,this.tryConnectTimer=null,this.tryConnectInterval=3e3,this.state=r.ENUM_CONNECT_STATE.disconnect,this.tokenType=0,this.browser=this.getBrowserAndVersion(),this.platform=navigator.platform,this.negoInterval=25e3,this.negoTryCount=1,this.negoTryMaxCount=2,this.logger=e,this.stateCenter=t,this.stateCenter.streamConnectTime&&(this.tryConnectInterval=this.stateCenter.streamConnectTime)}return e.prototype.getBrowserAndVersion=function(){var e,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];return/trident/i.test(i[1])?{name:"IE",version:(e=/\brv[ :]+([\d\.]+)/g.exec(t)||[])[1]||""}:"Chrome"===i[1]&&null!=(e=t.match(/\bOPR|Edge\/([\d\.]+)/))?{name:"Opera",version:e[1]}:(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/([\d+\.]+)/i))&&i.splice(1,1,e[1]),{name:i[0],version:i[1]})},e.prototype.setSessionInfo=function(e,t){this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_SET_SESSION_INFO+" call"),this.appid=e+"",this.userid=t},e.prototype.onDisconnect=function(e,t){},e.prototype.onUpdateHeartBeatInterval=function(e){},e.prototype.resetConnectTimer=function(){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_RESET_CONNECT_TIMER+" call"),clearTimeout(this.tryConnectTimer),this.tryConnectTimer=null,this.tryConnectCount=0},e.prototype.bindWebSocketHandle=function(){var e=this;this.tryHeartbeatCount=0,this.tryConnectInterval=this.stateCenter.streamConnectTime?this.stateCenter.streamConnectTime:3e3,this.websocket.onmessage=function(t){var i=JSON.parse(t.data);e.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" signmsg= ",i.header.cmd),e.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" signmsg= "+JSON.stringify(i)),i.header.appid==e.appid&&i.header.user_id===e.userid?e.handleServerPush(i):e.logger.warn(o.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" check header failed")},this.websocket.onclose=function(t){e.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" close msg = "+JSON.stringify(t.code?t.code:t)),e.state!=r.ENUM_CONNECT_STATE.disconnect&&(e.resetConnectTimer(),e.startConnectTimer((function(t){1008===t&&e.disconnectCallback(s.errorCodeList.TOKEN_EXPIRED)})),e.resetCheckMessage())},this.websocket.onerror=function(t){e.logger.error(o.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" msg = "+JSON.stringify(t))}},e.prototype.resetCheckMessage=function(){this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_RESET_CHECK_MESSAGE+" call"),clearTimeout(this.sendDataCheckTimer),this.sendDataCheckTimer=null;for(var e=this.sendDataList.getFirst();null!=e;)this.sendDataList.remove(e),e._data.error&&e._data.error(r.SEND_MSG_RESET,e._data.seq),e=this.sendDataList.getFirst();this.sendDataMap={}},e.prototype.handleServerPush=function(e){switch(e.header.cmd){case"LoginRsp":this.handleRespondData("LoginReq",e);break;case"CreateSessionRsp":this.handleRespondData("CreateSessionReq",e),0===e.body.result&&this.addSession(e.header.session_id,e.body.session_token);break;case"CreateSessionWithSdpRsp":this.handleRespondData("CreateSessionWithSdpReq",e),0===e.body.result&&this.addSession(e.header.session_id,e.body.session_token);break;case"MediaDescRsp":this.handleRespondData("MediaDescReq",e);break;case"CandidateInfoRsp":this.handleRespondData("CandidateInfoReq",e);break;case"CloseSessionRsp":this.handleRespondData("CloseSessionReq",e),this.removeSession(e.header.session_id);break;case"ClientHBRsp":this.handleRespondData("ClientHBReq",e);break;case"MediaDescPush":case"CandidateInfoPush":this.handlePushData(e);break;case"CloseSessionPush":this.handlePushData(e),this.removeSession(e.header.session_id);break;case"QualityReportRsp":this.handleRespondData("QualityReportReq",e);break;case"SessionResetPush":this.handlePushResetSessionData(e);break;case"StreamStatusNotifyPush":case"PublishEventPush":case"PlayEventPush":case"ClientInfoPush":this.handlePushData(e);break;case"ActivateVideoPlayStreamRsp":this.handleRespondData("ActivateVideoPlayStreamReq",e);break;case"ActivateAudioPlayStreamRsp":this.handleRespondData("ActivateAudioPlayStreamReq",e);break;case"NetQualityProbeRsp":this.handleRespondData("NetQualityProbeReq",e);break;case"NetQualityInfoPush":this.handlePushData(e);break;case"ActivateSEIInsertRsp":this.handleRespondData("ActivateSEIInsertReq",e);break;case"StreamStatusNotifyAck":this.handleRespondData("StreamStatusNotify",e);break;case"Peer2PeerNetStatsGetRsp":this.handleRespondData("Peer2PeerNetStatsGetReq",e);break;case"MediaDescUpdateRsp":this.handleRespondData("MediaDescUpdateReq",e);case"MediaDescUpdatePush":this.handlePushData(e)}},e.prototype.disconnectCallback=function(e){this.connectCallback&&(this.connectCallback(-1,this.server,void 0),this.connectCallback=null);var t=this.server;this.disconnectServer(),this.onDisconnect(t,e)},e.prototype.updateToken=function(){var e=this;this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_UPDATE_TOKEN+" call");var t={token:this.token,tokenType:this.tokenType,roomid:this.roomID,anchorname:this.stateCenter.anchor_info.anchor_id,sdkversion:r.PROTO_VERSION,osinfo:navigator.appVersion};if(0!=Object.keys(this.sessionInfos).length){var i=[];for(var n in this.sessionInfos){var s=parseInt(n);i.push({session_id:s,session_token:this.sessionInfos[s].token})}t.sessions=i}this.sendMessageWithCallback("LoginReq",this.stateCenter.getSeq(),0,t,(function(t,i,n){if(0==n.result){e.token=n.token,e.tokenType=n.tokenType;var r={report:n.report,report_interval:n.report_interval_ms};n.negoInterval&&(e.negoInterval=n.negoInterval),n.negoTryCount&&(e.negoTryCount=n.negoTryCount),n.negoTryMaxCount&&(e.negoTryMaxCount=n.negoTryMaxCount),null!=e.connectCallback&&(e.connectCallback(0,e.server,r),e.connectCallback=null),e.checkMessageTimeout()}else{var o={error:n.strError};null!=e.connectCallback&&(e.connectCallback(n.result,e.server,o),e.connectCallback=null)}}),(function(){null!=e.connectCallback&&(e.connectCallback(-1,e.server,void 0),e.connectCallback=null)}))},e.prototype.sendMessageWithCallback=function(e,t,i,n,s,a){if(this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" call "+e),!this.websocket||1!==this.websocket.readyState)return this.logger.error(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" connect not establish"),void(a&&a(r.SEND_MSG_TIMEOUT,t));var c={header:this.getHeader(e,t,i),body:n};null==s&&(s=null),null==a&&(a=null);var l={seq:t,deleted:!1,cmd:e,time:(new Date).getTime(),success:s,error:a},u=this.sendDataList.push(l);this.sendDataMap[l.seq]=u;var d=JSON.stringify(c);this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" "+d),this.websocket.send(d),this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" success")},e.prototype.getHeader=function(e,t,i){return this.globalHeader={version:"1.0.1",cmd:e,appid:this.appid+"",seq:t,user_id:this.userid,session_id:i},this.globalHeader},e.prototype.connectServer=function(e,t,i,n){var s=this;if(this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" "+i),this.roomID=e,this.token=t,this.server=i,this.state=r.ENUM_CONNECT_STATE.connecting,this.connectCallback=n,this.websocket&&1===this.websocket.readyState)this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket is connected"),this.resetConnectTimer(),this.state=r.ENUM_CONNECT_STATE.connected;else{this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" need new websocket");try{this.websocket&&(this.logger.warn(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" close error websocket"),this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null),this.websocket=new WebSocket(this.server),this.websocket.onopen=function(){s.resetConnectTimer(),s.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket open call"),s.bindWebSocketHandle(),s.updateToken(),s.state=r.ENUM_CONNECT_STATE.connected},this.websocket.onclose=function(e){s.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket close call  "+JSON.stringify(e))},this.websocket.onerror=function(e){s.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket onerror call  "+JSON.stringify(e))}}catch(e){this.logger.error(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket error "+e)}}this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" "+this.tryConnectInterval),this.tryConnectTimer=setTimeout((function(){s.startConnectTimer(n)}),this.tryConnectInterval)},e.prototype.startConnectTimer=function(e){if(this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" call"),this.tryConnectCount>=r.MAX_TRY_CONNECT_COUNT)return this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" beyond "+this.server+"max limit"),void this.disconnectCallback();this.websocket&&1===this.websocket.readyState?(this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" websocket is connected"),this.resetConnectTimer()):(this.tryConnectCount+=1,this.connectServer(this.roomID,this.token,this.server,e))},e.prototype.disconnectServer=function(){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_DISCONNECT_SERVER+" call"),this.connectCallback=null,this.resetCheckMessage(),this.resetConnectTimer(),this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null),this.token="",this.sessionInfos={},this.tokenType=0,this.tryHeartbeatCount=0,this.tryConnectCount=0,this.state=r.ENUM_CONNECT_STATE.disconnect},e.prototype.isServerConnected=function(){return!(!this.websocket||1!==this.websocket.readyState)},e.prototype.createSession=function(e,t,i,n,s,a,c,l){void 0===s&&(s=""),void 0===a&&(a=""),this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION+" call: "+n);var u="";r.PROTO_VERSION.split(".").forEach((function(e,t){return 1==e.length&&1==t?u+="0"+e:u+=e}));var d={type:t,stream_id:n,platform:this.platform,browser:this.browser.name,version:this.browser.version,app_id:this.appid,negotiate_mode:i,strAuthParam:s,sdk_version:1*u,turn_server_host:"string"==typeof a?a:""};this.sendMessageWithCallback("CreateSessionReq",e,0,d,c,l)},e.prototype.createSessionWithSdp=function(e,t,i){var n=e.seq,s=e.type,a=e.streamId,c=e.strAuthParam,l=e.sdp,u=e.serverHost,d=e.playBufLevel;this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION+" call: "+a);var h="";r.PROTO_VERSION.split(".").forEach((function(e,t){return 1==e.length&&1==t?h+="0"+e:h+=e}));var p={type:s,app_id:this.appid,stream_id:a,sdp:l,user_id:this.userid,platform:this.platform,browser:this.browser.name,sdk_vers:parseInt(h),clientIp:"",media_server_host:"string"==typeof u?u:"",strAuthParam:c};d&&(p.min_play_buf_level_ms=d),this.sendMessageWithCallback("CreateSessionWithSdpReq",n,0,p,t,i)},e.prototype.sendMediaDescUpdateReq=function(e,t,i,n,r){var o={peer_id:i.peerID,type:i.type,sdp:i.sdp,width:i.width,height:i.height,framerate:i.frameRate,video_min_kpbs:i.video_min_kpbs,video_max_kpbs:i.video_max_kpbs,audio_kpbs:i.audio_kpbs,keyframe_intv:i.keyframe_intv};this.sendMessageWithCallback("MediaDescUpdateReq",e,t,o,n,r)},e.prototype.removeSession=function(e){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_REMOVE_SESSION+" call"+e),this.sessionInfos[e]&&delete this.sessionInfos[e]},e.prototype.sendCloseSession=function(e,t,i,n,r){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_REMOVE_SESSION+" call: "+t);var s={reason:i};this.removeSession(t),this.sendMessageWithCallback("CloseSessionReq",e,t,s,n,r)},e.prototype.sendMessage=function(e,t,i,n){if(this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" call "+e),this.websocket&&1===this.websocket.readyState){var r={header:this.getHeader(e,t,i),body:n},s=JSON.stringify(r);this.websocket.send(s),this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" success")}else this.logger.error(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" connect not establish")},e.prototype.handleRespondData=function(e,t){this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" call");var i=this.sendDataMap[t.header.seq];if(null!=i){var n=i._data;n.cmd!==e?this.logger.error(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" command is not match"):n.success&&n.success(t.header.seq,t.header.session_id,t.body),delete this.sendDataMap[t.header.seq],this.sendDataList.remove(i)}else{if("CloseSessionRsp"==t.header.cmd)return;this.logger.error(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" cannot find data "+e)}},e.prototype.addSession=function(e,t){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_ADD_SESSION+" call"+e),this.sessionInfos[e]={token:t}},e.prototype.handlePushData=function(e){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_DATA+" call "+e.header.cmd+" session "+e.header.session_id);var t=this.pushCallback[e.header.cmd+e.header.session_id];t?t.callback&&t.callback(e.header.seq,e.header.session_id,e.body):this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_DATA+" no callbackData "+e.header.cmd+" session: "+e.header.session_id)},e.prototype.handlePushResetSessionData=function(e){this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" call ");var t=[];if(0==e.body.cResetType)t=Object.keys(this.sessionInfos);else if(1==e.body.cResetType)for(var i=0;i<e.body.session_ids.length;i++)t.push(e.body.session_ids[i]);if(this.sendResetSessionAck(e.header.seq,0,0),0!=t.length)for(var n=0;n<t.length;n++){var r=this.pushCallback[e.header.cmd+t[n]];null==r?this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" no callbackData "+t[n]):r.callback&&r.callback(e.header.seq,t[n],e.body)}else this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" no session to callback")},e.prototype.sendMediaDesc=function(e,t,i,n,r,s){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC+" call: "+t);var a={type:i,sdp:n.sdp};null!=n.width&&(a.width=n.width),null!=n.height&&(a.height=n.height),null!=n.frameRate&&(a.framerate=n.frameRate),null!=n.video_min_kpbs&&(a.video_min_kpbs=n.video_min_kpbs),null!=n.video_max_kpbs&&(a.video_max_kpbs=n.video_max_kpbs),null!=n.audio_kpbs&&(a.audio_kpbs=n.audio_kpbs),null!=n.keyframe_intv&&(a.keyframe_intv=n.keyframe_intv),null!=n.min_play_buf_level_ms&&(a.min_play_buf_level_ms=n.min_play_buf_level_ms),this.sendMessageWithCallback("MediaDescReq",e,t,a,r,s)},e.prototype.sendCandidateInfo=function(e,t,i,n,r){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CANDIDATE_INFO+" call: "+t);for(var s=[],a=0;a<i.length;a++){var c={candidate:i[a].candidate,sdpMid:i[a].sdpMid,sdpMLineIndex:i[a].sdpMLineIndex};s.push(c)}var l={infos:s};this.sendMessageWithCallback("CandidateInfoReq",e,t,l,n,r)},e.prototype.sendMediaDescAck=function(e,t,i){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC_ACK+" call: "+t);var n={result:i};this.sendMessage("MediaDescAck",e,t,n)},e.prototype.sendUpdateMediaDescAck=function(e,t,i,n){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC_ACK+" call: "+t);var r={peer_id:n,result:i};this.sendMessage("MediaDescUpdateAck",e,t,r)},e.prototype.sendCandidateInfoAck=function(e,t,i){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CANDIDATE_INFO_ACK+" call: "+t);var n={result:i};this.sendMessage("CandidateInfoAck",e,t,n)},e.prototype.sendCloseSessionAck=function(e,t,i){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CLOSE_SESSION_ACK+" call: "+t);var n={result:i};this.sendMessage("CloseSessionAck",e,t,n)},e.prototype.sendResetSessionAck=function(e,t,i){this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_RESET_SESSION_ACK+" call: "+t);var n={result:i};this.sendMessage("SessionResetAck",e,t,n)},e.prototype.registerPushCallback=function(e,t,i){i&&"function"==typeof i&&(this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_REGISTER_PUSH_CALLBACK+" set callback "+t),this.pushCallback[e+t]={callback:i})},e.prototype.unregisterPushCallback=function(e,t){delete this.pushCallback[e+t]},e.prototype.checkMessageTimeout=function(){for(var e=this,t=this.sendDataList.getFirst(),i=(new Date).getTime(),n=0,s=0,a=0;null!=t&&!(t._data.time+this.sendDataTimeout>i);)if(delete this.sendDataMap[t._data.seq],this.sendDataList.remove(t),++s,-1!=this.checkMessageList.indexOf(t._data.cmd)){if(null==t._data.error||this.sendDataDropTimeout>0&&t._data.time+this.sendDataDropTimeout<i?++a:(this.logger.warn(o.ZEGO_WEBRTC_ACTION.SIGNAL_CHECK_MESSAGE_TIMEOUT+" error cmd = "+t._data.cmd),t._data.error&&t._data.error(r.SEND_MSG_TIMEOUT,t._data.seq)),++n>=this.sendDataCheckOnceCount)break;t=this.sendDataList.getFirst()}else t=this.sendDataList.getFirst();this.sendDataCheckTimer=setTimeout((function(){e.checkMessageTimeout()}),this.sendDataCheckInterval),0==s&&0==a||this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CHECK_MESSAGE_TIMEOUT+" call success, state: timeout="+s+" drop="+a)},e.prototype.sendHeartbeat=function(){var e=this;if(this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+"call tryHeartbeatCount:"+this.tryHeartbeatCount),0!=Object.keys(this.sessionInfos).length)if(this.state===r.ENUM_CONNECT_STATE.connected){if(++this.tryHeartbeatCount>r.MAX_TRY_HEARTBEAT_COUNT)return this.logger.error(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" heartbeat try limit"),void this.disconnectCallback();var t=[];for(var i in this.sessionInfos)t.push(parseInt(i));var n={session_ids:t};this.sendMessageWithCallback("ClientHBReq",this.stateCenter.getSeq(),0,n,(function(t,i,n){e.heartbeatInterval!=n.hb_interval&&(e.heartbeatInterval=n.hb_interval,e.onUpdateHeartBeatInterval(n.hb_interval)),e.tryHeartbeatCount=0}),(function(e,t){}))}else this.logger.warn(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" state error");else this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" no need to heartbeat")},e.prototype.QualityReport=function(e,t,i,r,s){this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_QUALITY_REPORT+" call");var a={streams:[n(n({},i),{aid:t})]};this.sendMessageWithCallback("QualityReportReq",e,t,a,r,s)},e.prototype.sendStreamStatus=function(e,t,i,n,s,a){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_STREAM_STATUS+" call "+t);var c={mic_status:n,camera_status:i};this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_STREAM_STATUS+" stream "+(s||"")+" status "+JSON.stringify(c)),this.sendMessageWithCallback("StreamStatusNotify",e,t,c,(function(){}),(function(e){e===r.SEND_MSG_TIMEOUT&&a&&a()}))},e.prototype.ActivatePlayVideoStream=function(e,t,i,n,r){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM+" call");var s={active:i?0:1,layer:0};this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM+" activate video "+JSON.stringify(s)),this.sendMessageWithCallback("ActivateVideoPlayStreamReq",e,t,s,n,r)},e.prototype.ActivatePlayAudioStream=function(e,t,i,n,r){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM+" call");var s={active:i?0:1,layer:0};this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM+" activate audio "+JSON.stringify(s)),this.sendMessageWithCallback("ActivateAudioPlayStreamReq",e,t,s,n,r)},e.prototype.sendBroadcasterStatus=function(e,t,i){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_BROADCAST_STATUS+" call "+t);var n={status:i};this.sendMessage("BroadcasterStatusNotify",e,t,n)},e.prototype.sendNetProbe=function(e,t,i,n,r){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_NET_PROBE+" call "+t);var s={peer_id:i,action:1};this.sendMessageWithCallback("NetQualityProbeReq",e,t,s,n,r)},e.prototype.sendNetQualityInfoPushAck=function(e,t,i,n){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_NET_PROBE+" call "+t);var r={peer_id:i,result:n};this.sendMessage("NetQualityInfoAck",e,t,r)},e.prototype.activateSEIInsert=function(e,t,i,n,r,o,s){},e.prototype.getP2PNetStats=function(e,t,i,n,r){var o={peer_id:i};this.sendMessageWithCallback("Peer2PeerNetStatsGetReq",e,t,o,n,r)},e}();t.ZegoSignal=a},3409:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStreamCenterWeb=void 0;var s=i(6706),a=i(3770),c=i(1547),l=i(5740),u=i(6706),d=i(5019),h=i(3849),p=i(6014),f=i(8493),g=i(2752),m=i(3529),_=i(2990),v=function(e){function t(t,i,n,r,o,s){var a=e.call(this)||this;return a.logger=t,a.stateCenter=i,a.dataReport=n,a.rtm=r,a.ac=o,a.mediaEleSources=s,a.testEnvironment=!1,a.heartbeatTimer=null,a.heartbeatInterval=1e4,a.qualityTimerInterval=3e3,a.previewStreamList=[],a.signalList={},a.chargeInfos={itemtype:"ChargeInfos",timestamp_begin:0,timestamp_end:0,timestamp_diff_flag:0,timestamp_diff:0,infos:[]},a.chargeInfosTimer=null,a.chargeInfosInterval=6e4,a.chargeInfoSeq=0,a.soundLevelDelegate=!1,a.soundLevelInterval=1e3,a.isPeer=!0,a.probeList={},a.isMicEnabled=!0,a.isDataChannelEnabled=!1,a.publishQualityInfos=[],a.playQualityInfos=[],a.qualityUploadTimestamp=0,a.qualityHeadTimestamp=0,a.gwNode="",a.playerList={},a.publisherList={},a.playSuccessCallBackList={},a.playErrorCallBackList={},a.tryCountConnectInterval=3e3,a.checkMessageTimeout=function(){for(var e in a.signalList)a.signalList[e].signal&&a.signalList[e].signal.checkMessageTimeout()},a.getAllInUseUrl=function(){var e=[];for(var t in a.signalList)e.push(t);return e},a.onDisconnectHandle=function(e,t){if(a.logger.info("zsc.od.0 call"),a.signalList[e]){for(var i=a.signalList[e],n=0;n<i.publishConnectedList.length;n++){var r=a.publisherList[i.publishConnectedList[n]];r&&r.publisher&&r.publisher.onDisconnect(t)}for(n=0;n<i.playConnectedList.length;n++){var o=a.playerList[i.playConnectedList[n]];o&&o.player&&o.player.onDisconnect(t)}delete a.signalList[e],a.stopSignalHeartbeat(),a.stopChargeInfosUpload(),a.stopSoundLevel()}},"PRIVATE"==a.stateCenter.type&&(a.isPeer=!1),a}return r(t,e),Object.defineProperty(t.prototype,"cameraPreviewStream",{get:function(){return this.previewStreamList.find((function(e){return"camera"===e.previewType}))},enumerable:!1,configurable:!0}),t.prototype.onSignalDisconnected=function(e){},t.prototype.setQualityMonitorCycle=function(e){var t=this;return this.logger.debug("zsc.qmc.0 timeInterval "+e),0==Object.keys(this.publisherList).length?this.qualityTimerInterval=e:Object.keys(this.publisherList).forEach((function(i){t.publisherList[i].publisher.qualityTimeInterval=e,t.publisherList[i].publisher.setPublishQualityTimer()})),!0},t.prototype.setSessionInfo=function(e,t,i){this.logger.debug("zsc.ssi.0 called"),this.appid=e,this.userid=t,this.testEnvironment=i},t.prototype.onPlayStateUpdate=function(e,t,i){},t.prototype.onPlayQualityUpdate=function(e,t){},t.prototype.onPublishStateUpdate=function(e,t,i){},t.prototype.onPublishQualityUpdate=function(e,t){},t.prototype.onUpdateHeartBeatIntervalHandle=function(e){e!=this.heartbeatInterval&&(this.logger.debug("zsc.uhb.0 update "+e),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatInterval=e,this.startSignalHeartbeat())},t.prototype.setPublishStateStart=function(e,t,i,n,r){var o,a,l=this;if(this.logger.info("zsc.pss.0 call "+t),this.stateCenter.networkState==s.ENUM_NETWORK_STATE.offline)return this.logger.error("zsc.pss.0 network offline"),!1;var d=this.publisherList[t],h=this.stateCenter.reportSeqList.startPublish[t];if(this.dataReport.eventStart(h,"setPublishState"),d)return this.logger.error("zsc.pss.0 publisher already exist"),this.dataReport.eventEndWithMsgInfo(h,"setPublishState",{message:"publisher already exist"}),this.dataReport.uploadReport(h,void 0,m.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kIsPublishing),delete this.stateCenter.reportSeqList.startPublish[t],!1;var g=new c.ZegoPublish(t,this.logger,this.dataReport,this.qualityTimerInterval,this,this.ac,this.mediaEleSources,this.stateCenter,i);g.state=u.ENUM_PUBLISH_STATE.start,g.isPeer=this.isPeer,g.reportSeq=this.stateCenter.reportSeqList.startPublish[t];var _=g.previewer,v=null===(o=null==_?void 0:_.videoTrack)||void 0===o?void 0:o.label,E=i.getAudioTracks()[0]&&i.getAudioTracks()[0].label,A=null===(a=null==_?void 0:_.videoTrack)||void 0===a?void 0:a.getSettings().deviceId,y=i.getAudioTracks()[0]&&i.getAudioTracks()[0].getSettings().deviceId,S=new p.RetryStreamHandler(this.logger,this.stateCenter,this,!0);return this.publisherList[t]={seq:0,room:e,localStream:i,publisher:g,serverUrls:[],ttl:0,isCenterNode:!0,streamID:t,publishOption:n,cameraLabel:v||"",microLabel:E||"",cameraDeviceId:A||"",microDeviceId:y||"",deviceStateCount:0,retryStreamHandler:S,retryDispatchHandler:new f.RetryDispatchHandler(this.logger,this.stateCenter,this.rtm,this),isDataChannel:r},g.onPublishStateUpdate=function(e,i,n,r){var o=l.publisherList[i];o?S.publishStateHandle(e,o.streamID,n,r):l.logger.error("zsc.psuh.0 cannot find publish "+t)},g.onPublishQualityUpdate=function(e,i){var n=l.publisherList[e];n?(l.stateCenter.deviceStateOut&&0===i.audio.audioBitrate?(n.deviceStateCount++,n.deviceStateCount>=2&&(n.deviceStateCount=0,l.stateCenter.deviceStateOut=!1,l.logger.warn("zsc.pss.0 publish audio error by device"))):n.deviceStateCount=0,l.onPublishQualityUpdate(n.streamID,i)):l.logger.error("zsc.psuh.0 cannot find publish "+t)},this.dataReport.eventStart(g.reportSeq,"GetSignalUrl"),this.dataReport.eventStart(g.streamReportSeq,"GetSignalUrl"),!0},t.prototype.startPublishingStream=function(e){this.logger.info("zsc.sps.0 call");var t=this.publisherList[e];if(!t)return this.logger.error("zsc.sps.0 publisher don't exist"),!1;var i=t.publisher;if(this.dataReport.eventEndWithMsg(i.reportSeq,"GetSignalUrl",{urls:t.serverUrls,is_center:t.isCenterNode}),this.dataReport.eventEndWithMsg(i.streamReportSeq,"GetSignalUrl",{urls:t.serverUrls,is_center:t.isCenterNode}),!t.serverUrls||0===t.serverUrls.length)return t.retryStreamHandler.publishStateHandle(u.ENUM_PUBLISH_STATE_UPDATE.error,e,g.errorCodeList.DISPATCH_ERROR),this.logger.info("zsc.sps.0 server don't have signal url"),!1;var n=t.serverUrls.indexOf(this.server);-1!==n&&(t.serverUrls.splice(n,1),t.serverUrls.unshift(this.server));var r=t.retryStreamHandler;return r.invalid(),r.init(this.stateCenter.streamRetryTime),r.initStream(e,t.serverUrls),r.activePublish(0)},t.prototype.updateWaitingList=function(e,t,i,n,r){t?e.publishWaitingList.push({streamID:i,success:n,error:r}):e.playWaitingList.push({streamID:i,success:n,error:r})},t.prototype.publishStream=function(e){var t=this.publisherList[e].publisher;if(t){var i=null,n=null,r=this.publisherList[e].publishOption,o=this.checkPreview(this.publisherList[e].localStream);if(o){i=o.localStream,n=o.videoInfo;var s=this.stateCenter.reportSeqList.startPublish[e];this.dataReport.addMsgInfo(s,{cap_w:m.ZegoRTCLogEvent.kZegoTaskPublishStart.cap_w(o.videoInfo.width),cap_h:m.ZegoRTCLogEvent.kZegoTaskPublishStart.cap_h(o.videoInfo.height),w:m.ZegoRTCLogEvent.kZegoTaskPublishStart.w(o.videoInfo.width),h:m.ZegoRTCLogEvent.kZegoTaskPublishStart.h(o.videoInfo.height),video_en_fps:m.ZegoRTCLogEvent.kZegoTaskPublishStart.video_en_fps(o.videoInfo.frameRate),video_en_bps:m.ZegoRTCLogEvent.kZegoTaskPublishStart.video_en_bps(o.videoInfo.bitRate)}),i?(this.logger.info("zsc.ps.0 call success"),t.gwNodeTTL<(new Date).getTime()&&!this.gwNode?(t.gwNode="",t.gwNodeList=[],t.gwNodeTTL=0):this.gwNode&&(t.gwNode=this.gwNode),t.startPublish(e,i,n,o.mediaStreamConfig,r)):this.logger.error("zsc.ps.0 no localStream found")}else this.logger.error("zsc.ps.0 no preview found")}else this.logger.info("zsc.ps.0 publisher don't exist")},t.prototype.connectPublishServer=function(e,t){var i=this,n=this.publisherList[e];return n?(this.dataReport.eventStart(n.publisher.reportSeq,"ConnectServer"),this.dataReport.eventStart(n.publisher.streamReportSeq,"ConnectServer"),this.connectWithReuseSignalServer(e,!0,t,(function(e,t,n){var r=i.publisherList[e];if(r){var o=r.publisher;if(o){i.dataReport.eventEndWithMsg(o.reportSeq,"ConnectServer",{result:0,server:n}),i.dataReport.eventEndWithMsg(o.streamReportSeq,"ConnectServer",{result:0,server:n});var s=t.tokenInfo;i.logger.info("zsc.cps.0 update token success"),s&&s.report&&(o.qualityUpload=s.report,o.qualityUploadInterval=s.report_interval),o.signal=t.signal,i.server=n,i.publishStream(e),i.getTokenSuccess()}else i.logger.info("zsc.cps.1 check publisher don't exist")}else i.logger.info("zsc.cps.0 after connect publisher don't exist")}),(function(e,t){i.logger.error("zsc.cps.0 "+e+" connect fail "+t);var n=i.publisherList[e];if(n){var r=n.publisher;if(r){i.dataReport.eventEndWithMsg(r.reportSeq,"ConnectServer",{result:t}),i.dataReport.uploadReport(r.reportSeq),delete i.stateCenter.reportSeqList.startPublish[e];var s=o({},g.errorCodeList.CONNECT_FAILED);s.message=s.message+" "+t,1008===t&&(s=g.errorCodeList.TOKEN_EXPIRED),n.retryStreamHandler.publishStateHandle(u.ENUM_PUBLISH_STATE_UPDATE.error,e,s,1008==t)}else i.logger.info("zsc.cps.1 check publisher don't exist")}else i.logger.info("zsc.cps.0 after connect publisher don't exist")})),!0):(this.logger.error("zsc.cps.0 publisher don't exist"),!1)},t.prototype.getTokenSuccess=function(){this.logger.debug("zsc.gts.0 call")},t.prototype.stopPublishingStream=function(e){var t=this.publisherList[e];if(t){var i=t.retryStreamHandler;for(var n in i&&(i.stopMaxTime(),i.invalid()),this.signalList)this.signalList[n].publishWaitingList=this.signalList[n].publishWaitingList.filter((function(t){return t.streamID!==e}));delete this.publisherList[e],t.publisher&&(t.publisher.stopPublish(),delete t.publisher),this.removeStreamFromSignal(!0,e),this.stopSignalHeartbeat(),this.stopChargeInfosUpload(),this.stopSoundLevel(),this.logger.debug("zsc.sps.0.1 call success")}else this.logger.warn("zsc.sps.0.1 publisher don't exist")},t.prototype.connectWithReuseSignalServer=function(e,t,i,n,r){var o=this;this.logger.info("zsc.crss.0 begin "+i);var s=null;if(this.signalList[i])(s=this.signalList[i]).state==u.ENUM_SIGNAL_STATE.connected?(this.logger.info("zsc.crss.0 already connected "+i+" streamId: "+e),t?s.publishConnectedList.push(e):s.playConnectedList.push(e),n(e,s,i)):s.state==u.ENUM_SIGNAL_STATE.connecting&&(this.logger.info("zsc.crss.0 signal is connecting "+i+" streamId: "+e),this.updateWaitingList(s,t,e,n,r));else{this.logger.info("zsc.crss.0 new signal "+i+" streamId: "+e);var a=new d.ZegoSignal(this.logger,this.stateCenter);a.setSessionInfo(this.appid,this.userid),a.onUpdateHeartBeatInterval=this.onUpdateHeartBeatIntervalHandle.bind(this),a.onDisconnect=this.onDisconnectHandle;var c=this.publisherList[e]?this.publisherList[e]:this.playerList[e]?this.playerList[e]:null,l=null==c?void 0:c.retryStreamHandler;if(this.stateCenter.streamConnectTime)a.tryConnectInterval=this.stateCenter.streamConnectTime;else if(l&&l.retryActiveCount){var h=l.retryActiveCount*(l.retryActiveCount-1)/2+2;h=h>u.MAX_RETRY_CONNECT_INTERVAL?u.MAX_RETRY_CONNECT_INTERVAL:h,a.tryConnectInterval=1e3*h}this.signalList[i]={signal:a,state:u.ENUM_SIGNAL_STATE.connecting,publishWaitingList:[],playWaitingList:[],publishConnectedList:[],playConnectedList:[],tokenInfo:null},this.updateWaitingList(this.signalList[i],t,e,n,r);var p=null==c?void 0:c.room.token,f=null==c?void 0:c.room.roomID;this.logger.info("zsc.crss.0 "+p),a.connectServer(f||this.stateCenter.roomList[0].roomID,p||this.stateCenter.roomList[0].token,i,(function(e,t,n){s=o.signalList[i];var r,a,c=0;if(0!=e){for(o.logger.info("zsc.crss.0 connect failed "+t),c=0;c<s.publishWaitingList.length;c++)(r=s.publishWaitingList[c]).error&&r.error(r.streamID,e);for(c=0;c<s.playWaitingList.length;c++)(a=s.playWaitingList[c]).error&&a.error(a.streamID,e);delete o.signalList[i]}else{for(o.logger.debug("zsc.crss.0 connected success "+t),s.state=u.ENUM_SIGNAL_STATE.connected,s.tokenInfo=n,c=0;c<s.publishWaitingList.length;c++)(r=s.publishWaitingList[c]).success&&r.success(r.streamID,s,t),s.publishConnectedList.push(r.streamID);for(c=0;c<s.playWaitingList.length;c++)(a=s.playWaitingList[c]).success&&a.success(a.streamID,s,t),s.playConnectedList.push(a.streamID);s.publishWaitingList=[],s.playWaitingList=[],null==o.heartbeatTimer&&o.startSignalHeartbeat(),null==o.chargeInfosTimer&&o.startChargeInfosUpload(),o.activeSoundLevel()}}))}},t.prototype.setPlayStateStart=function(e,t,i){var n=this;if(this.logger.info("zsc.pss.1 call "+e),this.stateCenter.networkState==s.ENUM_NETWORK_STATE.offline)return this.logger.error("zsc.pss.1 network offline"),!1;var r=this.playerList[e],o=this.stateCenter.reportSeqList.startPlay[e];if(this.dataReport.eventStart(o,"setPlayState"),r)return this.logger.error("zsc.pss.1 player already exist"),this.dataReport.eventEndWithMsgInfo(o,"setPlayState",{message:"player already exist"}),this.dataReport.uploadReport(o,void 0,m.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kIsPlaying),delete this.stateCenter.reportSeqList.startPlay[e],!1;var a=this.getPlayRoom(e)||this.stateCenter.roomList[0];if(!a)return this.logger.error("zsc.pss.1 not login room"),this.dataReport.eventEndWithMsgInfo(o,"setPlayState",{message:"not login room"}),this.dataReport.uploadReport(o,void 0,m.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNoLoginError),!1;var c=new h.ZegoPlayWeb(this.logger,null,this.dataReport,this.qualityTimerInterval,this,this.ac,this.stateCenter);t&&[0,2,3].includes(t.resourceMode)&&(c.resourceMode=t.resourceMode),this.dataReport.addMsgInfo(o,{resourceMode:c.resourceMode,play_room_id:a.roomID,isMulti:this.stateCenter.isMultiRoom}),c.state=u.ENUM_PLAY_STATE.start,c.isPeer=this.isPeer,c.reportSeq=this.stateCenter.reportSeqList.startPlay[e],c.beginTime=(new Date).getTime();var l=new p.RetryStreamHandler(this.logger,this.stateCenter,this,!1);return this.playerList[e]={seq:0,room:a,player:c,signal:null,serverUrls:[],ttl:0,isCenterNode:!0,streamID:e,playOption:t,retryStreamHandler:l,retryDispatchHandler:new f.RetryDispatchHandler(this.logger,this.stateCenter,this.rtm,this),isDataChannel:i},c.onPlayStateUpdate=function(e,t,i,r){var o=n.playerList[t];o?l.playStateHandle(e,o.streamID,i,r):n.logger.error("zsc.pss.1 cannot find play "+t)},c.onPlayQualityUpdate=function(e,t){var i=n.playerList[e];i?n.onPlayQualityUpdate(i.streamID,t):n.logger.error("zsc.pss.1 cannot find play "+e)},c.onRemoteCameraStatusUpdate=function(e,t,i){var r=n.playerList[e];r?n.onRemoteCameraStatusUpdate(r.streamID,t,i):n.logger.error("zsc.pss.1 cannot find play "+e)},c.onRemoteMicStatusUpdate=function(e,t,i){var r=n.playerList[e];r?n.onRemoteMicStatusUpdate(r.streamID,t,i):n.logger.error("zsc.pss.1 cannot find play "+e)},this.dataReport.eventStart(c.reportSeq,"GetSignalUrl"),this.dataReport.eventStart(c.streamReportSeq,"GetSignalUrl"),!0},t.prototype.onRemoteMicStatusUpdate=function(e,t,i){},t.prototype.onRemoteCameraStatusUpdate=function(e,t,i){},t.prototype.startPlayingStream=function(e,t){this.logger.info("zsc.sps.1 start play called");var i=this.playerList[e];if(!i)return this.logger.error("zsc.sps.1 player don't exist"),!1;var n=i.player;if(this.dataReport.eventEndWithMsg(n.reportSeq,"GetSignalUrl",{urls:i.serverUrls}),this.dataReport.eventEndWithMsg(n.streamReportSeq,"GetSignalUrl",{urls:i.serverUrls}),0==i.serverUrls.length)return i.retryStreamHandler.playStateHandle(u.ENUM_PLAY_STATE_UPDATE.error,e,g.errorCodeList.DISPATCH_ERROR),this.logger.info("zsc.sps.1 server don't have signal url"),!1;var r=i.serverUrls.indexOf(this.server);-1!==r&&(i.serverUrls.splice(r,1),i.serverUrls.unshift(this.server));var o=i.retryStreamHandler;return o.invalid(),o.init(this.stateCenter.streamRetryTime),o.initStream(e,i.serverUrls),o.activePull(0,t)},t.prototype.connectPlayServer=function(e,t,i){var n=this,r=this.playerList[e];return r?(this.dataReport.eventStart(r.player.reportSeq,"ConnectServer"),this.dataReport.eventStart(r.player.streamReportSeq,"ConnectServer"),this.connectWithReuseSignalServer(e,!1,i,(function(e,i,r){var o=n.playerList[e];if(o){var s=o.player;if(s){n.dataReport.eventEndWithMsg(s.reportSeq,"ConnectServer",{result:0,server:r}),n.dataReport.eventEndWithMsg(s.streamReportSeq,"ConnectServer",{result:0,server:r});var a=i.tokenInfo;n.logger.info("zsc.cps.1 update token success"),a&&a.report&&(s.qualityHandler.qualityUpload=a.report,s.qualityHandler.qualityUploadInterval=a.report_interval),s.signal=i.signal,n.server=r,n.playStream(e,t),n.getTokenSuccess()}else n.logger.error("zsc.cps.1 checkplayer don't exist")}else n.logger.error("zsc.cps.1 after connect player don't exist")}),(function(t,i){var r=n.playerList[t];if(r){n.dataReport.eventEndWithMsg(r.player.reportSeq,"ConnectServer",{result:i}),!r.player.isProbe&&n.dataReport.uploadReport(r.player.reportSeq),delete n.stateCenter.reportSeqList.startPlay[e];var s=o({},g.errorCodeList.CONNECT_FAILED);s.message=s.message+" "+i,1008===i&&(s=g.errorCodeList.TOKEN_EXPIRED),r.retryStreamHandler.playStateHandle(u.ENUM_PLAY_STATE_UPDATE.error,t,s,1008==i)}else n.logger.error("zsc.cps.1 after connect player don't exist")})),!0):(this.logger.error("zsc.cps.1 player don't exist"),!1)},t.prototype.playStream=function(e,t){var i=this.playerList[e].player;i?(this.logger.info("zsc.ps.1 call success"),i.gwNodeTTL<(new Date).getTime()&&!this.gwNode?(i.gwNode="",i.gwNodeList=[],i.gwNodeTTL=0):this.gwNode&&(i.gwNode=this.gwNode),i.startPlay(e,t,this.playerList[e].playOption)):this.logger.warn("zsc.ps.1 player don't exist")},t.prototype.stopSignalHeartbeat=function(){this.logger.debug("zsc.ssh.1 call");var e=0;for(var t in this.signalList)e+=1;this.heartbeatTimer&&0==e&&(this.logger.info("zsc.ssh.1 stop"),clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},t.prototype.removeStreamFromSignal=function(e,t){var i=[];for(var n in this.signalList){var r=this.signalList[n];if(e){for(var o=0;o<r.publishConnectedList.length;o++)if(r.publishConnectedList[o]===t){this.logger.debug("zsc.rsfs.0 found from publish"),r.publishConnectedList.splice(o,1);break}for(o=0;o<r.publishWaitingList.length;o++)if(r.publishWaitingList[o].streamID===t){this.logger.debug("zsc.rsfs.0 found from publish"),r.publishWaitingList.splice(o,1);break}}else{for(var s=0;s<r.playConnectedList.length;s++)if(r.playConnectedList[s]===t){this.logger.debug("zsc.rsfs.0 found from play"),r.playConnectedList.splice(s,1);break}for(s=0;s<r.playWaitingList.length;s++)if(r.playWaitingList[s].streamID===t){this.logger.debug("zsc.rsfs.0 found from play"),r.playWaitingList.splice(s,1);break}}0==r.publishConnectedList.length&&0==r.playConnectedList.length&&0==r.publishWaitingList.length&&0==r.playWaitingList.length&&(r.signal.disconnectServer(),i.push(n))}for(var a=0;a<i.length;a++)delete this.signalList[i[a]],this.server==i[a]&&(this.server="")},t.prototype.stopPlayingStream=function(e){var t=this.playerList[e];if(t){var i=t.retryStreamHandler;for(var n in i&&(i.stopMaxTime(),i.invalid()),this.signalList)this.signalList[n].playWaitingList=this.signalList[n].playWaitingList.filter((function(t){return t.streamID!==e}));delete this.playerList[e],t.player&&(t.player.stopPlay(),delete t.player),this.removeStreamFromSignal(!1,e),this.stopSignalHeartbeat(),this.stopChargeInfosUpload(),this.stopSoundLevel(),delete this.playSuccessCallBackList[e],delete this.playErrorCallBackList[e],this.logger.debug("zsc.sps.1.1 call success")}else this.logger.info("zsc.sps.1.1 player don't exist")},t.prototype.reset=function(e){for(var t in this.publisherList)(this.publisherList[t].room.roomID==e||!e)&&this.stopPublishingStream(t);var i=function(t){var i=n.playerList[t].room;if(i.roomID!=e||!i.streamList.find((function(e){return e.stream_id==t}))&&1!=n.stateCenter.roomList.length){if(i.roomID==e&&n.stateCenter.roomList.length>1){var r=n.stateCenter.roomList.find((function(t){return t.roomID!==e}));r?n.playerList[t].room=r:n.stopPlayingStream(t)}}else n.stopPlayingStream(t)},n=this;for(var r in this.playerList)i(r);0==Object.keys(this.publisherList).length&&0==Object.keys(this.playerList).length&&(this.probeList={}),this.publishQualityInfos=[],this.playQualityInfos=[],this.qualityHeadTimestamp=0,this.qualityUploadTimestamp=0,this.qualityWebsocket&&(this.qualityWebsocket.close(),this.qualityWebsocket=void 0)},t.prototype.startSignalHeartbeat=function(){var e=this;this.logger.debug("zsc.ssh.0 call"),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatTimer=setTimeout((function(){e.checkSignalHeartbeat()}),this.heartbeatInterval)},t.prototype.startChargeInfosUpload=function(){var e=this;this.logger.debug("zsc.sciu.0 call"),this.chargeInfosTimer&&(clearTimeout(this.chargeInfosTimer),this.chargeInfosTimer=null),this.chargeInfosTimer=setTimeout((function(){e.checkChargeInfos()}),this.chargeInfosInterval)},t.prototype.checkChargeInfos=function(){this.logger.debug("zsc.cci.0 call");var e={is_publishing:0,play_max_audio_bitrate:0,play_stream_resolution_infos:[]};for(var t in this.chargeInfos.timestamp_begin=(new Date).getTime(),this.publisherList){this.publisherList[t].publisher.state===u.ENUM_PUBLISH_STATE.publishing&&(e.is_publishing=1);break}e.play_max_audio_bitrate=0;var i=function(t){var i=n.playerList[t].player.playStream,r=i&&0!==i.getVideoTracks().length?i.getVideoTracks()[0].getSettings():void 0,o={video_width:r&&r.width?r.width:0,video_height:r&&r.height?r.height:0,count:1};if(!e.play_stream_resolution_infos.find((function(e){return e.video_width==o.video_width&&e.video_height==o.video_height&&(e.count++,!0)}))&&e.play_stream_resolution_infos.push(o),0==o.video_width&&0==o.video_height){var s=1e3*n.playerList[t].player.qualityHandler.lastPlayStats.audioBitrate;s>e.play_max_audio_bitrate&&(e.play_max_audio_bitrate=s)}},n=this;for(var r in this.playerList)i(r);0!==this.chargeInfos.timestamp_end?(this.chargeInfos.timestamp_diff=this.chargeInfos.timestamp_begin-this.chargeInfos.timestamp_end,this.chargeInfos.timestamp_diff_flag=1):(this.chargeInfos.timestamp_diff=0,this.chargeInfos.timestamp_diff_flag=0),this.chargeInfos.timestamp_end=(new Date).getTime(),this.chargeInfos.infos=[e],0!==e.play_stream_resolution_infos.length&&this.logger.report(this.chargeInfos),this.chargeInfosTimer&&this.startChargeInfosUpload()},t.prototype.checkSignalHeartbeat=function(){for(var e in this.logger.debug("zsc.csh.0 call"),this.signalList)this.signalList[e].signal&&this.signalList[e].signal.sendHeartbeat();this.heartbeatTimer&&this.startSignalHeartbeat()},t.prototype.stopChargeInfosUpload=function(){this.logger.debug("zsc.sciu.0 call");var e=0;for(var t in this.signalList)e+=1;this.chargeInfosTimer&&0==e&&(this.logger.info("zsc.sciu.0 stop"),clearTimeout(this.chargeInfosTimer),this.chargeInfosTimer=null)},t.prototype.getPublisher=function(e){var t=null;return this.publisherList[e]&&this.publisherList[e].publisher&&(t=this.publisherList[e].publisher),t},t.prototype.checkPreview=function(e){for(var t=0;t<this.previewStreamList.length;t++)if(this.previewStreamList[t].localStream===e)return this.previewStreamList[t];return null},t.prototype.checkPublish=function(e){for(var t in this.publisherList)if(this.publisherList[t].localStream==e)return this.publisherList[t];return null},t.prototype.removePreview=function(e){for(var t=0;t<this.previewStreamList.length;t++)if(this.previewStreamList[t]===e){this.previewStreamList.splice(t,1);break}},t.prototype.onPlayerStreamUrlUpdate=function(e,t,i){},t.prototype.getScreenConstrains=function(e){var t={};if("boolean"==typeof e&&e)t={audio:!1,frameRate:u.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate,bitRate:this.stateCenter.settingConfig.getSetting("screen_video_bitrate")||u.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate};else if("object"==typeof e){switch(e.videoQuality){case 1:t={frameRate:u.ENUM_SCREEM_RESOLUTION_TYPE.LOW.frameRate,bitRate:u.ENUM_SCREEM_RESOLUTION_TYPE.LOW.bitRate};break;case 3:t={frameRate:u.ENUM_SCREEM_RESOLUTION_TYPE.HIGH.frameRate,bitRate:u.ENUM_SCREEM_RESOLUTION_TYPE.HIGH.bitRate};break;case 4:t={frameRate:e.frameRate,bitRate:e.bitRate,width:e.width,height:e.height};break;case 2:t={frameRate:u.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate,bitRate:u.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate};break;default:t={frameRate:u.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate,bitRate:this.stateCenter.settingConfig.getSetting("screen_video_bitrate")||u.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate}}t.audio="boolean"==typeof e.audio&&e.audio,t=o(o({},e),t)}return t},t.prototype.createScreenPreviewer=function(e,t){var i=new a.ZegoPreview(this.logger,this.ac,this.stateCenter,this,"screen"),n=e.getVideoTracks()[0].getSettings();return this.previewStreamList.push(i),i.mediaStreamConfig=t,e.getAudioTracks().length>0&&(i.audioTrack=e.getAudioTracks()[0]),i.localStream=e,i.videoInfo={width:n.width,height:n.height,frameRate:n.frameRate||15,bitRate:(null==t?void 0:t.bitRate)||1e3,startBitrate:(null==t?void 0:t.startBitrate)||this.stateCenter.settingConfig.getSetting("bitrate_mode")},i.previewSuc=!0,i.previewType="screen",(null==t?void 0:t.videoOptimizationMode)&&this.setVideoTrackContentHint(e,null==t?void 0:t.videoOptimizationMode),i},t.prototype.setSoundLevelDelegate=function(e,t){for(var i in this.logger.info("zsc.ssd.0 call"),t&&(this.soundLevelInterval=t),this.soundLevelDelegate=e,this.previewStreamList){var n=this.previewStreamList[i];e?n.startSoundLevel():n.stopSoundLevel()}for(var i in this.playerList){var r=this.playerList[i].player;e?r.startSoundLevel():r.stopSoundLevel()}e?(this.logger.info("zsc.ssd.0 start getting sound"),this.activeSoundLevel()):(this.logger.info("zsc.ssd.0 stop getting sound"),this.soundLevelTimer&&clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null,this.soundLevelInterval=1e3)},Object.defineProperty(t.prototype,"hasRemoteStream",{get:function(){return Object.keys(this.signalList).length>0},enumerable:!1,configurable:!0}),t.prototype.activeSoundLevel=function(){!this.soundLevelTimer&&this.soundLevelDelegate&&this.startSoundLevel()},t.prototype.startSoundLevel=function(){var e=this;this.soundLevelTimer&&(clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null),this.soundLevelDelegate&&(this.hasRemoteStream&&this.checkSoundLevel(),this.checkMicSoundLevel(),this.soundLevelTimer=setTimeout((function(){e.startSoundLevel()}),this.soundLevelInterval))},t.prototype.checkSoundLevel=function(){this.logger.debug("zsc.csl.0 call");var e=[];for(var t in this.publisherList){var i=0,n=this.publisherList[t].publisher,r=n.previewer;r&&(i=r.soundLevel),e.push({streamID:this.getBackStreamId(n.streamId),soundLevel:i,type:"push"})}for(var t in this.playerList){var o=this.playerList[t].player;o.streamId&&!o.isProbe&&e.push({streamID:this.getBackStreamId(o.streamId),soundLevel:o.soundLevel,type:"pull"})}this.soundLevelDelegate&&e.length>0&&this.onSoundLevelUpdate(e)},t.prototype.checkMicSoundLevel=function(){if(this.cameraPreviewStream&&this.soundLevelDelegate){var e=this.cameraPreviewStream.soundLevel;this.onMicSoundLevelUpdate(e)}},t.prototype.getBackStreamId=function(e){return this.testEnvironment&&e?e.replace("zegotest-"+this.appid+"-",""):e},t.prototype.onSoundLevelUpdate=function(e){},t.prototype.onMicSoundLevelUpdate=function(e){},t.prototype.stopSoundLevel=function(){var e=this.previewStreamList.length;this.soundLevelTimer&&!this.hasRemoteStream&&0===e&&(this.logger.info("zsc.ssl.0 stop"),clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null)},t.prototype.startNetProbe=function(e,t,i){var n=this,r=s.getReportSeq();if(this.dataReport.newReport(r,m.ZegoRTCLogEvent.kZegoNetProbe.event),this.isPeer){var o=!0;0==i.length&&(o=!1,i=e?this.publisherList[t.streamId].serverUrls:this.playerList[t.streamId].serverUrls),i.forEach((function(i){if(!(n.probeList[i]&&n.probeList[i].timeStamp+9e5<(new Date).getTime()||t.probeState==u.ENUM_PROBE_STATE.probed)){var r="zegoprobe-"+(new Date).getTime();n.setPlayStateStart(r);var s=n.playerList[r]?n.playerList[r].player:null;s&&(s.isProbe=!0,o?(s.gwNode=i,s.signal=t.signal,s.startPlay(r,(function(){}))):n.connectPlayServer(r,(function(){}),i),s.onCalNetQualityResult=function(o,a){n.logger.info("zc.ocnqr.0 "+s.gwNode+" "+o+" "+a),n.probeList[i]={result:o,netQuality:a,timeStamp:(new Date).getTime()},t.gwNode==i||t.signal.server==i?t.netQuality=a:n.handleCalNetQualityResult(e,o,a,t,i),n.stopPlayingStream(r)})}})),this.dataReport.addMsgInfo(r,{netQuality:t.netQuality,nodeList:i}),this.dataReport.uploadReport(r)}else this.dataReport.uploadReport(r,void 0,{code:-1,message:"not support peer"})},t.prototype.handleCalNetQualityResult=function(e,t,i,n,r){if(this.logger.info("zc.hcqr.0 "+n.netQuality+" probe "+i+" "+r),0===t){var o=s.getReportSeq();this.dataReport.newReport(o,m.ZegoRTCLogEvent.kZegoNetProbeResult.event);var a=!1;if(i>Math.max(75,n.netQuality+20)&&n.probeState==u.ENUM_PROBE_STATE.tryProbe)if(a=!0,e){var c=n,l=c.streamId,d=c.localStream,h=c.videoInfo,p=c.mediaStreamConfig,f=c.publishOption;0!=c.sessionId&&c.signal&&c.shouldSendCloseSession()&&(c.signal.sendCloseSession(this.stateCenter.getSeq(),c.sessionId,1),c.signal.removeSession(c.sessionId),c.closeSessionSignal=!0),c.resetPublish(),this.publisherList[l].isCenterNode?(c.gwNode=r,c.startPublish(l,d,h,p,f)):this.connectPublishServer(l,r)}else{var g=n,_=(l=g.streamId,g.getRemoteStreamSuc),v=g.playOption;0!=g.sessionId&&g.signal&&g.shouldSendCloseSession()&&(g.signal.sendCloseSession(this.stateCenter.getSeq(),g.sessionId,1),g.signal.removeSession(g.sessionId),g.closeSessionSignal=!0),g.resetPlay(),this.playerList[l].isCenterNode?(g.gwNode=r,g.startPlay(l,_,v)):this.connectPlayServer(l,_,r)}else a=!1,this.logger.warn("zc.hcqr.0 "+n.netQuality+" probe "+i+" "+r);this.dataReport.addMsgInfo(o,{isSwitch:a,isPublish:e,streamID:n.streamId,result:t,node:r,netQuality:n.netQuality,probeNetQuality:i}),this.dataReport.uploadReport(o),n.probeState=u.ENUM_PROBE_STATE.probed}},t.prototype.getRoomByStreamID=function(e){return this.publisherList[e]?this.publisherList[e].room:this.playerList[e]?this.playerList[e].room:void 0},t.prototype.setVideoTrackContentHint=function(e,t){if("string"==typeof t){var i=t.toLowerCase();if(["default","motion","detail","text"].includes(i)){var n=e.getVideoTracks()[0];n?"contentHint"in n?(this.logger.info("zc.svtch "+i),n.contentHint="default"==i?"":i):this.logger.warn("zc.svtch mediaStreamTrack contentHint attribute not supported"):this.logger.warn("zc.svtch video track no found")}else this.logger.warn("zc.svtch videoOptimizationMode wrong")}else this.logger.warn("zc.svtch videoOptimizationMode type wrong")},t.prototype.getPlayRoom=function(e){return this.stateCenter.roomList.find((function(t){return!!t.streamList.find((function(t){return t.stream_id==e}))}))},t.prototype.getQualityHead=function(e,t){var i=new Uint8Array(12);i[0]=0,i[1]=12,i[2]=e.length>>8,i[3]=e.length-(i[2]<<8),i[4]=t.length>>24,i[5]=t.length-(i[4]<<24)>>16,i[6]=t.length-(i[4]<<24)-(i[5]<<16)>>8,i[7]=t.length-(i[4]<<24)-(i[5]<<16)-(i[6]<<8);var n=Math.ceil((new Date).getTime()/1e3);return i[8]=n>>24,i[9]=n-(i[8]<<24)>>16,i[10]=n-(i[8]<<24)-(i[9]<<16)>>8,i[11]=n-(i[8]<<24)-(i[9]<<16)-(i[10]<<8),i},t.prototype.streamQualityUpload=function(){var e=this;if(Object.keys(this.publisherList).length>0||Object.keys(this.playerList).length>0){var t={version:0,timestamp:(new Date).getTime(),event:0,app_id:this.stateCenter.appid,user_id:this.stateCenter.idName,biz_type:1},i={publish_quality_infos:this.publishQualityInfos,play_quality_infos:this.playQualityInfos},n=_.logreport.SpeedLogHead.create(t),r=_.logreport.QualityEvent.create(i),o=_.logreport.SpeedLogHead.encode(n).finish(),s=_.logreport.QualityEvent.encode(r).finish(),a=this.getQualityHead(o,s),c=new Uint8Array(12+o.length+s.length);c.set(a),c.set(o,12),c.set(s,12+o.length);var l=this.logger.url.split("/")[2];if(!l)return;if(this.qualityWebsocket&&2!=this.qualityWebsocket.readyState&&3!=this.qualityWebsocket.readyState)1==this.qualityWebsocket.readyState&&this.qualityWebsocket.send(c);else{var u=this.stateCenter.appid,d=this.stateCenter.idName,h=this.stateCenter.roomList[0].token;this.qualityWebsocket=new WebSocket("wss://"+l+"/ws/report/stream?appid="+u+"&product=rtc&token="+encodeURIComponent(h)+"&id_name="+d),this.qualityWebsocket.onopen=function(){var t;null===(t=e.qualityWebsocket)||void 0===t||t.send(c)}}}},t.prototype.updateQuality=function(e,t){var i=this,n=(new Date).getTime();0!==this.qualityUploadTimestamp&&n-this.qualityUploadTimestamp>6e4||this.publishQualityInfos.join("").length+this.playQualityInfos.join().length>8e3?(this.publishQualityInfos.forEach((function(e){return e.timestamp_offset_end=Math.round(n/1e3)-i.qualityHeadTimestamp})),this.playQualityInfos.forEach((function(e){return e.timestamp_offset_end=Math.round(n/1e3)-i.qualityHeadTimestamp})),this.streamQualityUpload(),this.publishQualityInfos=[],this.playQualityInfos=[],this.qualityHeadTimestamp=Math.round((new Date).getTime()/1e3),this.qualityUploadTimestamp=n):0==this.qualityHeadTimestamp&&(this.qualityHeadTimestamp=Math.round((new Date).getTime()/1e3),this.qualityUploadTimestamp=n),0==e?this.handlePublishQualityData(t):this.handlePlayQualityData(t)},t.prototype.handlePublishQualityData=function(e){var t=this.publishQualityInfos.find((function(t){return t.stream_id==e.stream_id&&t.video_width==e.frameWidth&&t.video_height==e.frameHeight}));if(!t){var i=this.getRoomByStreamID(e.stream_id);t={timestamp_offset_begin:Math.abs(Number(e.timeStamp-this.qualityHeadTimestamp)),timestamp_offset_end:0,stream_id:e.stream_id,session_id:i?Number(i.sessionID):0,video_width:e.frameWidth,video_height:e.frameHeight,infos:[],room_id:i?i.roomID:"",evnvironment:1,room_session_id:i?Number(i.roomSessionID):0},this.publishQualityInfos.push(t)}t.infos.push({audio_bitrate:Math.round(e.audioBitrate)||0,video_bitrate:Math.round(e.videoBitrate)||0,video_capture_fps:Math.round(10*e.videoFPS)||0,video_network_fps:Math.round(10*e.videoTransferFPS)||0,uplink_plr:e.audioPacketsLostRate,rtt:Math.round(e.currentRoundTripTime),audio_network_fps:Math.round(10*e.audioFPS),captured_sound_level:Math.round(e.audioLevel),sample_time_window:Math.round(e.timeStamp/10)})},t.prototype.handlePlayQualityData=function(e){var t=this.playQualityInfos.find((function(t){return t.stream_id==e.stream_id&&t.video_width==e.frameWidth&&t.video_height==e.frameHeight}));if(!t){var i=this.getRoomByStreamID(e.stream_id);t={timestamp_offset_begin:Math.abs(Number(e.timeStamp-this.qualityHeadTimestamp)),timestamp_offset_end:0,stream_id:e.stream_id,session_id:i?Number(i.sessionID):0,video_width:e.frameWidth,video_height:e.frameHeight,infos:[],room_id:i?i.roomID:"",room_session_id:i?Number(i.roomSessionID):0},this.playQualityInfos.push(t)}t.infos.push({audio_bitrate:Math.round(e.audioBitrate)||0,video_bitrate:Math.round(e.videoBitrate)||0,video_network_fps:Math.round(10*e.videoFPS)||0,downlink_plr:Math.round(e.audioPacketsLostRate)||0,audio_network_fps:Math.round(10*e.audioFPS)||0,audio_break_duration:Math.round(e.audio_break_duration/10),video_break_duration:Math.round(e.video_break_duration/10),rtt:e.currentRoundTripTime,rendered_sound_level:Math.round(e.audioLevel),audio_break_cancel_duration:Math.round(e.audio_break_cancel_duration/10),video_break_cancel_duration:Math.round(e.video_break_cancel_duration/10),audio_decode_time:Math.round(e.audio_decode_time/10),video_decode_time:Math.round(e.video_decode_time/10),real_sampling_interval:Math.round(e.real_sampling_interval/10),video_frames_decoded:Math.round(e.videoFramesDecoded)||0,video_frames_dropped:Math.round(e.videoFramesDropped)||0,sample_time_window:Math.round(e.timeStamp/10)})},t}(l.ZegoStreamCenter);t.ZegoStreamCenterWeb=v},2990:function(e,t,i){"use strict";var n,r=i(2100),o=r.Reader,s=r.Writer,a=r.util,c=r.roots.default||(r.roots.default={});c.logreport=((n={}).SpeedLogHead=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}var t,i;return e.prototype.version=0,e.prototype.signature=a.newBuffer([]),e.prototype.timestamp=0,e.prototype.event=0,e.prototype.app_id=0,e.prototype.user_id="",e.prototype.biz_type=0,e.prototype.device_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(18).bytes(e.signature),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).uint32(e.timestamp),null!=e.event&&Object.hasOwnProperty.call(e,"event")&&t.uint32(32).uint32(e.event),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(40).uint32(e.app_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(50).string(e.user_id),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(56).uint32(e.biz_type),null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(66).string(e.device_id),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.SpeedLogHead;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.version=e.uint32();break;case 2:n.signature=e.bytes();break;case 3:n.timestamp=e.uint32();break;case 4:n.event=e.uint32();break;case 5:n.app_id=e.uint32();break;case 6:n.user_id=e.string();break;case 7:n.biz_type=e.uint32();break;case 8:n.device_id=e.string();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.version&&e.hasOwnProperty("version")&&!a.isInteger(e.version)?"version: integer expected":null!=e.signature&&e.hasOwnProperty("signature")&&!(e.signature&&"number"==typeof e.signature.length||a.isString(e.signature))?"signature: buffer expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!a.isInteger(e.timestamp)?"timestamp: integer expected":null!=e.event&&e.hasOwnProperty("event")&&!a.isInteger(e.event)?"event: integer expected":null!=e.app_id&&e.hasOwnProperty("app_id")&&!a.isInteger(e.app_id)?"app_id: integer expected":null!=e.user_id&&e.hasOwnProperty("user_id")&&!a.isString(e.user_id)?"user_id: string expected":null!=e.biz_type&&e.hasOwnProperty("biz_type")&&!a.isInteger(e.biz_type)?"biz_type: integer expected":null!=e.device_id&&e.hasOwnProperty("device_id")&&!a.isString(e.device_id)?"device_id: string expected":null},e.fromObject=function(e){if(e instanceof c.logreport.SpeedLogHead)return e;var t=new c.logreport.SpeedLogHead;return null!=e.version&&(t.version=e.version>>>0),null!=e.signature&&("string"==typeof e.signature?a.base64.decode(e.signature,t.signature=a.newBuffer(a.base64.length(e.signature)),0):e.signature.length&&(t.signature=e.signature)),null!=e.timestamp&&(t.timestamp=e.timestamp>>>0),null!=e.event&&(t.event=e.event>>>0),null!=e.app_id&&(t.app_id=e.app_id>>>0),null!=e.user_id&&(t.user_id=String(e.user_id)),null!=e.biz_type&&(t.biz_type=e.biz_type>>>0),null!=e.device_id&&(t.device_id=String(e.device_id)),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.version=0,t.bytes===String?i.signature="":(i.signature=[],t.bytes!==Array&&(i.signature=a.newBuffer(i.signature))),i.timestamp=0,i.event=0,i.app_id=0,i.user_id="",i.biz_type=0,i.device_id=""),null!=e.version&&e.hasOwnProperty("version")&&(i.version=e.version),null!=e.signature&&e.hasOwnProperty("signature")&&(i.signature=t.bytes===String?a.base64.encode(e.signature,0,e.signature.length):t.bytes===Array?Array.prototype.slice.call(e.signature):e.signature),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&(i.timestamp=e.timestamp),null!=e.event&&e.hasOwnProperty("event")&&(i.event=e.event),null!=e.app_id&&e.hasOwnProperty("app_id")&&(i.app_id=e.app_id),null!=e.user_id&&e.hasOwnProperty("user_id")&&(i.user_id=e.user_id),null!=e.biz_type&&e.hasOwnProperty("biz_type")&&(i.biz_type=e.biz_type),null!=e.device_id&&e.hasOwnProperty("device_id")&&(i.device_id=e.device_id),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.ProtoVersion=(t={},(i=Object.create(t))[t[0]="PROTO_VERSION"]=0,i[t[1]="PROTO_VERSION1"]=1,i[t[2]="PROTO_VERSION2"]=2,i[t[3]="PROTO_VERSION3"]=3,i[t[4]="PROTO_VERSION4"]=4,i[t[5]="PROTO_VERSION5"]=5,i[t[6]="PROTO_VERSION6"]=6,i),e.Event=function(){var e={},t=Object.create(e);return t[e[0]="QUALITY_EVENT"]=0,t[e[100]="NO_BILLING_EVENT"]=100,t[e[300]="DETECT_QUALITY_EVENT"]=300,t}(),e.BizType=function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN"]=0,t[e[1]="LIVE"]=1,t[e[2]="RTV"]=2,t}(),e}(),n.SpeedLogRsp=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.code=0,e.prototype.message="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.SpeedLogRsp;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.code=e.uint32();break;case 2:n.message=e.string();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.code&&e.hasOwnProperty("code")&&!a.isInteger(e.code)?"code: integer expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isString(e.message)?"message: string expected":null},e.fromObject=function(e){if(e instanceof c.logreport.SpeedLogRsp)return e;var t=new c.logreport.SpeedLogRsp;return null!=e.code&&(t.code=e.code>>>0),null!=e.message&&(t.message=String(e.message)),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.code=0,i.message=""),null!=e.code&&e.hasOwnProperty("code")&&(i.code=e.code),null!=e.message&&e.hasOwnProperty("message")&&(i.message=e.message),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.QualityEvent=function(){function e(e){if(this.publish_quality_infos=[],this.play_quality_infos=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}var t,i;return e.prototype.hardware_infos=null,e.prototype.publish_quality_infos=a.emptyArray,e.prototype.play_quality_infos=a.emptyArray,e.prototype.network_type=0,e.prototype.charge_infos=null,e.prototype.client_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.hardware_infos&&Object.hasOwnProperty.call(e,"hardware_infos")&&c.logreport.HardwareInfos.encode(e.hardware_infos,t.uint32(10).fork()).ldelim(),null!=e.publish_quality_infos&&e.publish_quality_infos.length)for(var i=0;i<e.publish_quality_infos.length;++i)c.logreport.PublishQualityInfos.encode(e.publish_quality_infos[i],t.uint32(18).fork()).ldelim();if(null!=e.play_quality_infos&&e.play_quality_infos.length)for(i=0;i<e.play_quality_infos.length;++i)c.logreport.PlayQualityInfos.encode(e.play_quality_infos[i],t.uint32(26).fork()).ldelim();return null!=e.network_type&&Object.hasOwnProperty.call(e,"network_type")&&t.uint32(32).uint32(e.network_type),null!=e.charge_infos&&Object.hasOwnProperty.call(e,"charge_infos")&&c.logreport.ChargeInfos.encode(e.charge_infos,t.uint32(42).fork()).ldelim(),null!=e.client_type&&Object.hasOwnProperty.call(e,"client_type")&&t.uint32(800).uint32(e.client_type),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.QualityEvent;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.hardware_infos=c.logreport.HardwareInfos.decode(e,e.uint32());break;case 2:n.publish_quality_infos&&n.publish_quality_infos.length||(n.publish_quality_infos=[]),n.publish_quality_infos.push(c.logreport.PublishQualityInfos.decode(e,e.uint32()));break;case 3:n.play_quality_infos&&n.play_quality_infos.length||(n.play_quality_infos=[]),n.play_quality_infos.push(c.logreport.PlayQualityInfos.decode(e,e.uint32()));break;case 4:n.network_type=e.uint32();break;case 5:n.charge_infos=c.logreport.ChargeInfos.decode(e,e.uint32());break;case 100:n.client_type=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.hardware_infos&&e.hasOwnProperty("hardware_infos")&&(i=c.logreport.HardwareInfos.verify(e.hardware_infos)))return"hardware_infos."+i;if(null!=e.publish_quality_infos&&e.hasOwnProperty("publish_quality_infos")){if(!Array.isArray(e.publish_quality_infos))return"publish_quality_infos: array expected";for(var t=0;t<e.publish_quality_infos.length;++t)if(i=c.logreport.PublishQualityInfos.verify(e.publish_quality_infos[t]))return"publish_quality_infos."+i}if(null!=e.play_quality_infos&&e.hasOwnProperty("play_quality_infos")){if(!Array.isArray(e.play_quality_infos))return"play_quality_infos: array expected";for(t=0;t<e.play_quality_infos.length;++t){var i;if(i=c.logreport.PlayQualityInfos.verify(e.play_quality_infos[t]))return"play_quality_infos."+i}}return null!=e.network_type&&e.hasOwnProperty("network_type")&&!a.isInteger(e.network_type)?"network_type: integer expected":null!=e.charge_infos&&e.hasOwnProperty("charge_infos")&&(i=c.logreport.ChargeInfos.verify(e.charge_infos))?"charge_infos."+i:null!=e.client_type&&e.hasOwnProperty("client_type")&&!a.isInteger(e.client_type)?"client_type: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.QualityEvent)return e;var t=new c.logreport.QualityEvent;if(null!=e.hardware_infos){if("object"!=typeof e.hardware_infos)throw TypeError(".logreport.QualityEvent.hardware_infos: object expected");t.hardware_infos=c.logreport.HardwareInfos.fromObject(e.hardware_infos)}if(e.publish_quality_infos){if(!Array.isArray(e.publish_quality_infos))throw TypeError(".logreport.QualityEvent.publish_quality_infos: array expected");t.publish_quality_infos=[];for(var i=0;i<e.publish_quality_infos.length;++i){if("object"!=typeof e.publish_quality_infos[i])throw TypeError(".logreport.QualityEvent.publish_quality_infos: object expected");t.publish_quality_infos[i]=c.logreport.PublishQualityInfos.fromObject(e.publish_quality_infos[i])}}if(e.play_quality_infos){if(!Array.isArray(e.play_quality_infos))throw TypeError(".logreport.QualityEvent.play_quality_infos: array expected");for(t.play_quality_infos=[],i=0;i<e.play_quality_infos.length;++i){if("object"!=typeof e.play_quality_infos[i])throw TypeError(".logreport.QualityEvent.play_quality_infos: object expected");t.play_quality_infos[i]=c.logreport.PlayQualityInfos.fromObject(e.play_quality_infos[i])}}if(null!=e.network_type&&(t.network_type=e.network_type>>>0),null!=e.charge_infos){if("object"!=typeof e.charge_infos)throw TypeError(".logreport.QualityEvent.charge_infos: object expected");t.charge_infos=c.logreport.ChargeInfos.fromObject(e.charge_infos)}return null!=e.client_type&&(t.client_type=e.client_type>>>0),t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.publish_quality_infos=[],i.play_quality_infos=[]),t.defaults&&(i.hardware_infos=null,i.network_type=0,i.charge_infos=null,i.client_type=0),null!=e.hardware_infos&&e.hasOwnProperty("hardware_infos")&&(i.hardware_infos=c.logreport.HardwareInfos.toObject(e.hardware_infos,t)),e.publish_quality_infos&&e.publish_quality_infos.length){i.publish_quality_infos=[];for(var n=0;n<e.publish_quality_infos.length;++n)i.publish_quality_infos[n]=c.logreport.PublishQualityInfos.toObject(e.publish_quality_infos[n],t)}if(e.play_quality_infos&&e.play_quality_infos.length)for(i.play_quality_infos=[],n=0;n<e.play_quality_infos.length;++n)i.play_quality_infos[n]=c.logreport.PlayQualityInfos.toObject(e.play_quality_infos[n],t);return null!=e.network_type&&e.hasOwnProperty("network_type")&&(i.network_type=e.network_type),null!=e.charge_infos&&e.hasOwnProperty("charge_infos")&&(i.charge_infos=c.logreport.ChargeInfos.toObject(e.charge_infos,t)),null!=e.client_type&&e.hasOwnProperty("client_type")&&(i.client_type=e.client_type),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.ResourceType=(t={},(i=Object.create(t))[t[0]="UNKNOWN"]=0,i[t[1]="CDN"]=1,i[t[2]="RTC"]=2,i[t[3]="L3"]=3,i),e}(),n.HardwareInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.infos=a.emptyArray,e.prototype.sys_mem_total=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.infos&&e.infos.length)for(var i=0;i<e.infos.length;++i)c.logreport.HardwareInfo.encode(e.infos[i],t.uint32(26).fork()).ldelim();return null!=e.sys_mem_total&&Object.hasOwnProperty.call(e,"sys_mem_total")&&t.uint32(32).uint32(e.sys_mem_total),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.HardwareInfos;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.timestamp_offset_begin=e.uint32();break;case 2:n.timestamp_offset_end=e.uint32();break;case 3:n.infos&&n.infos.length||(n.infos=[]),n.infos.push(c.logreport.HardwareInfo.decode(e,e.uint32()));break;case 4:n.sys_mem_total=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&!a.isInteger(e.timestamp_offset_begin))return"timestamp_offset_begin: integer expected";if(null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&!a.isInteger(e.timestamp_offset_end))return"timestamp_offset_end: integer expected";if(null!=e.infos&&e.hasOwnProperty("infos")){if(!Array.isArray(e.infos))return"infos: array expected";for(var t=0;t<e.infos.length;++t){var i=c.logreport.HardwareInfo.verify(e.infos[t]);if(i)return"infos."+i}}return null!=e.sys_mem_total&&e.hasOwnProperty("sys_mem_total")&&!a.isInteger(e.sys_mem_total)?"sys_mem_total: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.HardwareInfos)return e;var t=new c.logreport.HardwareInfos;if(null!=e.timestamp_offset_begin&&(t.timestamp_offset_begin=e.timestamp_offset_begin>>>0),null!=e.timestamp_offset_end&&(t.timestamp_offset_end=e.timestamp_offset_end>>>0),e.infos){if(!Array.isArray(e.infos))throw TypeError(".logreport.HardwareInfos.infos: array expected");t.infos=[];for(var i=0;i<e.infos.length;++i){if("object"!=typeof e.infos[i])throw TypeError(".logreport.HardwareInfos.infos: object expected");t.infos[i]=c.logreport.HardwareInfo.fromObject(e.infos[i])}}return null!=e.sys_mem_total&&(t.sys_mem_total=e.sys_mem_total>>>0),t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.infos=[]),t.defaults&&(i.timestamp_offset_begin=0,i.timestamp_offset_end=0,i.sys_mem_total=0),null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&(i.timestamp_offset_begin=e.timestamp_offset_begin),null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&(i.timestamp_offset_end=e.timestamp_offset_end),e.infos&&e.infos.length){i.infos=[];for(var n=0;n<e.infos.length;++n)i.infos[n]=c.logreport.HardwareInfo.toObject(e.infos[n],t)}return null!=e.sys_mem_total&&e.hasOwnProperty("sys_mem_total")&&(i.sys_mem_total=e.sys_mem_total),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.PublishQualityInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.stream_id="",e.prototype.session_id=0,e.prototype.video_width=0,e.prototype.video_height=0,e.prototype.ipv4=0,e.prototype.ipv6="",e.prototype.resource_type=0,e.prototype.infos=a.emptyArray,e.prototype.room_id="",e.prototype.evnvironment=0,e.prototype.ap="",e.prototype.session="",e.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.protocol_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).string(e.stream_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(32).uint32(e.session_id),null!=e.video_width&&Object.hasOwnProperty.call(e,"video_width")&&t.uint32(40).uint32(e.video_width),null!=e.video_height&&Object.hasOwnProperty.call(e,"video_height")&&t.uint32(48).uint32(e.video_height),null!=e.ipv4&&Object.hasOwnProperty.call(e,"ipv4")&&t.uint32(56).uint32(e.ipv4),null!=e.ipv6&&Object.hasOwnProperty.call(e,"ipv6")&&t.uint32(66).string(e.ipv6),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(72).uint32(e.resource_type),null!=e.infos&&e.infos.length)for(var i=0;i<e.infos.length;++i)c.logreport.PublishQualityInfo.encode(e.infos[i],t.uint32(82).fork()).ldelim();return null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(90).string(e.room_id),null!=e.evnvironment&&Object.hasOwnProperty.call(e,"evnvironment")&&t.uint32(104).uint32(e.evnvironment),null!=e.ap&&Object.hasOwnProperty.call(e,"ap")&&t.uint32(114).string(e.ap),null!=e.session&&Object.hasOwnProperty.call(e,"session")&&t.uint32(122).string(e.session),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(128).uint64(e.room_session_id),null!=e.protocol_type&&Object.hasOwnProperty.call(e,"protocol_type")&&t.uint32(136).uint32(e.protocol_type),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.PublishQualityInfos;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.timestamp_offset_begin=e.uint32();break;case 2:n.timestamp_offset_end=e.uint32();break;case 3:n.stream_id=e.string();break;case 4:n.session_id=e.uint32();break;case 5:n.video_width=e.uint32();break;case 6:n.video_height=e.uint32();break;case 7:n.ipv4=e.uint32();break;case 8:n.ipv6=e.string();break;case 9:n.resource_type=e.uint32();break;case 10:n.infos&&n.infos.length||(n.infos=[]),n.infos.push(c.logreport.PublishQualityInfo.decode(e,e.uint32()));break;case 11:n.room_id=e.string();break;case 13:n.evnvironment=e.uint32();break;case 14:n.ap=e.string();break;case 15:n.session=e.string();break;case 16:n.room_session_id=e.uint64();break;case 17:n.protocol_type=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&!a.isInteger(e.timestamp_offset_begin))return"timestamp_offset_begin: integer expected";if(null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&!a.isInteger(e.timestamp_offset_end))return"timestamp_offset_end: integer expected";if(null!=e.stream_id&&e.hasOwnProperty("stream_id")&&!a.isString(e.stream_id))return"stream_id: string expected";if(null!=e.session_id&&e.hasOwnProperty("session_id")&&!a.isInteger(e.session_id))return"session_id: integer expected";if(null!=e.video_width&&e.hasOwnProperty("video_width")&&!a.isInteger(e.video_width))return"video_width: integer expected";if(null!=e.video_height&&e.hasOwnProperty("video_height")&&!a.isInteger(e.video_height))return"video_height: integer expected";if(null!=e.ipv4&&e.hasOwnProperty("ipv4")&&!a.isInteger(e.ipv4))return"ipv4: integer expected";if(null!=e.ipv6&&e.hasOwnProperty("ipv6")&&!a.isString(e.ipv6))return"ipv6: string expected";if(null!=e.resource_type&&e.hasOwnProperty("resource_type")&&!a.isInteger(e.resource_type))return"resource_type: integer expected";if(null!=e.infos&&e.hasOwnProperty("infos")){if(!Array.isArray(e.infos))return"infos: array expected";for(var t=0;t<e.infos.length;++t){var i=c.logreport.PublishQualityInfo.verify(e.infos[t]);if(i)return"infos."+i}}return null!=e.room_id&&e.hasOwnProperty("room_id")&&!a.isString(e.room_id)?"room_id: string expected":null!=e.evnvironment&&e.hasOwnProperty("evnvironment")&&!a.isInteger(e.evnvironment)?"evnvironment: integer expected":null!=e.ap&&e.hasOwnProperty("ap")&&!a.isString(e.ap)?"ap: string expected":null!=e.session&&e.hasOwnProperty("session")&&!a.isString(e.session)?"session: string expected":null!=e.room_session_id&&e.hasOwnProperty("room_session_id")&&!(a.isInteger(e.room_session_id)||e.room_session_id&&a.isInteger(e.room_session_id.low)&&a.isInteger(e.room_session_id.high))?"room_session_id: integer|Long expected":null!=e.protocol_type&&e.hasOwnProperty("protocol_type")&&!a.isInteger(e.protocol_type)?"protocol_type: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.PublishQualityInfos)return e;var t=new c.logreport.PublishQualityInfos;if(null!=e.timestamp_offset_begin&&(t.timestamp_offset_begin=e.timestamp_offset_begin>>>0),null!=e.timestamp_offset_end&&(t.timestamp_offset_end=e.timestamp_offset_end>>>0),null!=e.stream_id&&(t.stream_id=String(e.stream_id)),null!=e.session_id&&(t.session_id=e.session_id>>>0),null!=e.video_width&&(t.video_width=e.video_width>>>0),null!=e.video_height&&(t.video_height=e.video_height>>>0),null!=e.ipv4&&(t.ipv4=e.ipv4>>>0),null!=e.ipv6&&(t.ipv6=String(e.ipv6)),null!=e.resource_type&&(t.resource_type=e.resource_type>>>0),e.infos){if(!Array.isArray(e.infos))throw TypeError(".logreport.PublishQualityInfos.infos: array expected");t.infos=[];for(var i=0;i<e.infos.length;++i){if("object"!=typeof e.infos[i])throw TypeError(".logreport.PublishQualityInfos.infos: object expected");t.infos[i]=c.logreport.PublishQualityInfo.fromObject(e.infos[i])}}return null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.evnvironment&&(t.evnvironment=e.evnvironment>>>0),null!=e.ap&&(t.ap=String(e.ap)),null!=e.session&&(t.session=String(e.session)),null!=e.room_session_id&&(a.Long?(t.room_session_id=a.Long.fromValue(e.room_session_id)).unsigned=!0:"string"==typeof e.room_session_id?t.room_session_id=parseInt(e.room_session_id,10):"number"==typeof e.room_session_id?t.room_session_id=e.room_session_id:"object"==typeof e.room_session_id&&(t.room_session_id=new a.LongBits(e.room_session_id.low>>>0,e.room_session_id.high>>>0).toNumber(!0))),null!=e.protocol_type&&(t.protocol_type=e.protocol_type>>>0),t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.infos=[]),t.defaults){if(i.timestamp_offset_begin=0,i.timestamp_offset_end=0,i.stream_id="",i.session_id=0,i.video_width=0,i.video_height=0,i.ipv4=0,i.ipv6="",i.resource_type=0,i.room_id="",i.evnvironment=0,i.ap="",i.session="",a.Long){var n=new a.Long(0,0,!0);i.room_session_id=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else i.room_session_id=t.longs===String?"0":0;i.protocol_type=0}if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&(i.timestamp_offset_begin=e.timestamp_offset_begin),null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&(i.timestamp_offset_end=e.timestamp_offset_end),null!=e.stream_id&&e.hasOwnProperty("stream_id")&&(i.stream_id=e.stream_id),null!=e.session_id&&e.hasOwnProperty("session_id")&&(i.session_id=e.session_id),null!=e.video_width&&e.hasOwnProperty("video_width")&&(i.video_width=e.video_width),null!=e.video_height&&e.hasOwnProperty("video_height")&&(i.video_height=e.video_height),null!=e.ipv4&&e.hasOwnProperty("ipv4")&&(i.ipv4=e.ipv4),null!=e.ipv6&&e.hasOwnProperty("ipv6")&&(i.ipv6=e.ipv6),null!=e.resource_type&&e.hasOwnProperty("resource_type")&&(i.resource_type=e.resource_type),e.infos&&e.infos.length){i.infos=[];for(var r=0;r<e.infos.length;++r)i.infos[r]=c.logreport.PublishQualityInfo.toObject(e.infos[r],t)}return null!=e.room_id&&e.hasOwnProperty("room_id")&&(i.room_id=e.room_id),null!=e.evnvironment&&e.hasOwnProperty("evnvironment")&&(i.evnvironment=e.evnvironment),null!=e.ap&&e.hasOwnProperty("ap")&&(i.ap=e.ap),null!=e.session&&e.hasOwnProperty("session")&&(i.session=e.session),null!=e.room_session_id&&e.hasOwnProperty("room_session_id")&&("number"==typeof e.room_session_id?i.room_session_id=t.longs===String?String(e.room_session_id):e.room_session_id:i.room_session_id=t.longs===String?a.Long.prototype.toString.call(e.room_session_id):t.longs===Number?new a.LongBits(e.room_session_id.low>>>0,e.room_session_id.high>>>0).toNumber(!0):e.room_session_id),null!=e.protocol_type&&e.hasOwnProperty("protocol_type")&&(i.protocol_type=e.protocol_type),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.PlayQualityInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.stream_id="",e.prototype.session_id=0,e.prototype.video_width=0,e.prototype.video_height=0,e.prototype.ipv4=0,e.prototype.ipv6="",e.prototype.resource_type=0,e.prototype.infos=a.emptyArray,e.prototype.room_id="",e.prototype.session="",e.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.protocol_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).string(e.stream_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(32).uint32(e.session_id),null!=e.video_width&&Object.hasOwnProperty.call(e,"video_width")&&t.uint32(40).uint32(e.video_width),null!=e.video_height&&Object.hasOwnProperty.call(e,"video_height")&&t.uint32(48).uint32(e.video_height),null!=e.ipv4&&Object.hasOwnProperty.call(e,"ipv4")&&t.uint32(56).uint32(e.ipv4),null!=e.ipv6&&Object.hasOwnProperty.call(e,"ipv6")&&t.uint32(66).string(e.ipv6),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(72).uint32(e.resource_type),null!=e.infos&&e.infos.length)for(var i=0;i<e.infos.length;++i)c.logreport.PlayQualityInfo.encode(e.infos[i],t.uint32(82).fork()).ldelim();return null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(90).string(e.room_id),null!=e.session&&Object.hasOwnProperty.call(e,"session")&&t.uint32(106).string(e.session),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(112).uint64(e.room_session_id),null!=e.protocol_type&&Object.hasOwnProperty.call(e,"protocol_type")&&t.uint32(120).uint32(e.protocol_type),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.PlayQualityInfos;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.timestamp_offset_begin=e.uint32();break;case 2:n.timestamp_offset_end=e.uint32();break;case 3:n.stream_id=e.string();break;case 4:n.session_id=e.uint32();break;case 5:n.video_width=e.uint32();break;case 6:n.video_height=e.uint32();break;case 7:n.ipv4=e.uint32();break;case 8:n.ipv6=e.string();break;case 9:n.resource_type=e.uint32();break;case 10:n.infos&&n.infos.length||(n.infos=[]),n.infos.push(c.logreport.PlayQualityInfo.decode(e,e.uint32()));break;case 11:n.room_id=e.string();break;case 13:n.session=e.string();break;case 14:n.room_session_id=e.uint64();break;case 15:n.protocol_type=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&!a.isInteger(e.timestamp_offset_begin))return"timestamp_offset_begin: integer expected";if(null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&!a.isInteger(e.timestamp_offset_end))return"timestamp_offset_end: integer expected";if(null!=e.stream_id&&e.hasOwnProperty("stream_id")&&!a.isString(e.stream_id))return"stream_id: string expected";if(null!=e.session_id&&e.hasOwnProperty("session_id")&&!a.isInteger(e.session_id))return"session_id: integer expected";if(null!=e.video_width&&e.hasOwnProperty("video_width")&&!a.isInteger(e.video_width))return"video_width: integer expected";if(null!=e.video_height&&e.hasOwnProperty("video_height")&&!a.isInteger(e.video_height))return"video_height: integer expected";if(null!=e.ipv4&&e.hasOwnProperty("ipv4")&&!a.isInteger(e.ipv4))return"ipv4: integer expected";if(null!=e.ipv6&&e.hasOwnProperty("ipv6")&&!a.isString(e.ipv6))return"ipv6: string expected";if(null!=e.resource_type&&e.hasOwnProperty("resource_type")&&!a.isInteger(e.resource_type))return"resource_type: integer expected";if(null!=e.infos&&e.hasOwnProperty("infos")){if(!Array.isArray(e.infos))return"infos: array expected";for(var t=0;t<e.infos.length;++t){var i=c.logreport.PlayQualityInfo.verify(e.infos[t]);if(i)return"infos."+i}}return null!=e.room_id&&e.hasOwnProperty("room_id")&&!a.isString(e.room_id)?"room_id: string expected":null!=e.session&&e.hasOwnProperty("session")&&!a.isString(e.session)?"session: string expected":null!=e.room_session_id&&e.hasOwnProperty("room_session_id")&&!(a.isInteger(e.room_session_id)||e.room_session_id&&a.isInteger(e.room_session_id.low)&&a.isInteger(e.room_session_id.high))?"room_session_id: integer|Long expected":null!=e.protocol_type&&e.hasOwnProperty("protocol_type")&&!a.isInteger(e.protocol_type)?"protocol_type: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.PlayQualityInfos)return e;var t=new c.logreport.PlayQualityInfos;if(null!=e.timestamp_offset_begin&&(t.timestamp_offset_begin=e.timestamp_offset_begin>>>0),null!=e.timestamp_offset_end&&(t.timestamp_offset_end=e.timestamp_offset_end>>>0),null!=e.stream_id&&(t.stream_id=String(e.stream_id)),null!=e.session_id&&(t.session_id=e.session_id>>>0),null!=e.video_width&&(t.video_width=e.video_width>>>0),null!=e.video_height&&(t.video_height=e.video_height>>>0),null!=e.ipv4&&(t.ipv4=e.ipv4>>>0),null!=e.ipv6&&(t.ipv6=String(e.ipv6)),null!=e.resource_type&&(t.resource_type=e.resource_type>>>0),e.infos){if(!Array.isArray(e.infos))throw TypeError(".logreport.PlayQualityInfos.infos: array expected");t.infos=[];for(var i=0;i<e.infos.length;++i){if("object"!=typeof e.infos[i])throw TypeError(".logreport.PlayQualityInfos.infos: object expected");t.infos[i]=c.logreport.PlayQualityInfo.fromObject(e.infos[i])}}return null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.session&&(t.session=String(e.session)),null!=e.room_session_id&&(a.Long?(t.room_session_id=a.Long.fromValue(e.room_session_id)).unsigned=!0:"string"==typeof e.room_session_id?t.room_session_id=parseInt(e.room_session_id,10):"number"==typeof e.room_session_id?t.room_session_id=e.room_session_id:"object"==typeof e.room_session_id&&(t.room_session_id=new a.LongBits(e.room_session_id.low>>>0,e.room_session_id.high>>>0).toNumber(!0))),null!=e.protocol_type&&(t.protocol_type=e.protocol_type>>>0),t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.infos=[]),t.defaults){if(i.timestamp_offset_begin=0,i.timestamp_offset_end=0,i.stream_id="",i.session_id=0,i.video_width=0,i.video_height=0,i.ipv4=0,i.ipv6="",i.resource_type=0,i.room_id="",i.session="",a.Long){var n=new a.Long(0,0,!0);i.room_session_id=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else i.room_session_id=t.longs===String?"0":0;i.protocol_type=0}if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&(i.timestamp_offset_begin=e.timestamp_offset_begin),null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&(i.timestamp_offset_end=e.timestamp_offset_end),null!=e.stream_id&&e.hasOwnProperty("stream_id")&&(i.stream_id=e.stream_id),null!=e.session_id&&e.hasOwnProperty("session_id")&&(i.session_id=e.session_id),null!=e.video_width&&e.hasOwnProperty("video_width")&&(i.video_width=e.video_width),null!=e.video_height&&e.hasOwnProperty("video_height")&&(i.video_height=e.video_height),null!=e.ipv4&&e.hasOwnProperty("ipv4")&&(i.ipv4=e.ipv4),null!=e.ipv6&&e.hasOwnProperty("ipv6")&&(i.ipv6=e.ipv6),null!=e.resource_type&&e.hasOwnProperty("resource_type")&&(i.resource_type=e.resource_type),e.infos&&e.infos.length){i.infos=[];for(var r=0;r<e.infos.length;++r)i.infos[r]=c.logreport.PlayQualityInfo.toObject(e.infos[r],t)}return null!=e.room_id&&e.hasOwnProperty("room_id")&&(i.room_id=e.room_id),null!=e.session&&e.hasOwnProperty("session")&&(i.session=e.session),null!=e.room_session_id&&e.hasOwnProperty("room_session_id")&&("number"==typeof e.room_session_id?i.room_session_id=t.longs===String?String(e.room_session_id):e.room_session_id:i.room_session_id=t.longs===String?a.Long.prototype.toString.call(e.room_session_id):t.longs===Number?new a.LongBits(e.room_session_id.low>>>0,e.room_session_id.high>>>0).toNumber(!0):e.room_session_id),null!=e.protocol_type&&e.hasOwnProperty("protocol_type")&&(i.protocol_type=e.protocol_type),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.ChargeInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.timestamp_diff_flag=0,e.prototype.timestamp_diff=0,e.prototype.room_id="",e.prototype.infos=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.timestamp_diff_flag&&Object.hasOwnProperty.call(e,"timestamp_diff_flag")&&t.uint32(24).uint32(e.timestamp_diff_flag),null!=e.timestamp_diff&&Object.hasOwnProperty.call(e,"timestamp_diff")&&t.uint32(32).uint32(e.timestamp_diff),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(42).string(e.room_id),null!=e.infos&&e.infos.length)for(var i=0;i<e.infos.length;++i)c.logreport.ChargeInfo.encode(e.infos[i],t.uint32(802).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.ChargeInfos;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.timestamp_offset_begin=e.uint32();break;case 2:n.timestamp_offset_end=e.uint32();break;case 3:n.timestamp_diff_flag=e.uint32();break;case 4:n.timestamp_diff=e.uint32();break;case 5:n.room_id=e.string();break;case 100:n.infos&&n.infos.length||(n.infos=[]),n.infos.push(c.logreport.ChargeInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&!a.isInteger(e.timestamp_offset_begin))return"timestamp_offset_begin: integer expected";if(null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&!a.isInteger(e.timestamp_offset_end))return"timestamp_offset_end: integer expected";if(null!=e.timestamp_diff_flag&&e.hasOwnProperty("timestamp_diff_flag")&&!a.isInteger(e.timestamp_diff_flag))return"timestamp_diff_flag: integer expected";if(null!=e.timestamp_diff&&e.hasOwnProperty("timestamp_diff")&&!a.isInteger(e.timestamp_diff))return"timestamp_diff: integer expected";if(null!=e.room_id&&e.hasOwnProperty("room_id")&&!a.isString(e.room_id))return"room_id: string expected";if(null!=e.infos&&e.hasOwnProperty("infos")){if(!Array.isArray(e.infos))return"infos: array expected";for(var t=0;t<e.infos.length;++t){var i=c.logreport.ChargeInfo.verify(e.infos[t]);if(i)return"infos."+i}}return null},e.fromObject=function(e){if(e instanceof c.logreport.ChargeInfos)return e;var t=new c.logreport.ChargeInfos;if(null!=e.timestamp_offset_begin&&(t.timestamp_offset_begin=e.timestamp_offset_begin>>>0),null!=e.timestamp_offset_end&&(t.timestamp_offset_end=e.timestamp_offset_end>>>0),null!=e.timestamp_diff_flag&&(t.timestamp_diff_flag=e.timestamp_diff_flag>>>0),null!=e.timestamp_diff&&(t.timestamp_diff=e.timestamp_diff>>>0),null!=e.room_id&&(t.room_id=String(e.room_id)),e.infos){if(!Array.isArray(e.infos))throw TypeError(".logreport.ChargeInfos.infos: array expected");t.infos=[];for(var i=0;i<e.infos.length;++i){if("object"!=typeof e.infos[i])throw TypeError(".logreport.ChargeInfos.infos: object expected");t.infos[i]=c.logreport.ChargeInfo.fromObject(e.infos[i])}}return t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.infos=[]),t.defaults&&(i.timestamp_offset_begin=0,i.timestamp_offset_end=0,i.timestamp_diff_flag=0,i.timestamp_diff=0,i.room_id=""),null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&(i.timestamp_offset_begin=e.timestamp_offset_begin),null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&(i.timestamp_offset_end=e.timestamp_offset_end),null!=e.timestamp_diff_flag&&e.hasOwnProperty("timestamp_diff_flag")&&(i.timestamp_diff_flag=e.timestamp_diff_flag),null!=e.timestamp_diff&&e.hasOwnProperty("timestamp_diff")&&(i.timestamp_diff=e.timestamp_diff),null!=e.room_id&&e.hasOwnProperty("room_id")&&(i.room_id=e.room_id),e.infos&&e.infos.length){i.infos=[];for(var n=0;n<e.infos.length;++n)i.infos[n]=c.logreport.ChargeInfo.toObject(e.infos[n],t)}return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.HardwareInfo=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.sys_cpu_used=0,e.prototype.app_cpu_used=0,e.prototype.sys_mem_used=0,e.prototype.app_mem_used=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.sys_cpu_used&&Object.hasOwnProperty.call(e,"sys_cpu_used")&&t.uint32(8).uint32(e.sys_cpu_used),null!=e.app_cpu_used&&Object.hasOwnProperty.call(e,"app_cpu_used")&&t.uint32(16).uint32(e.app_cpu_used),null!=e.sys_mem_used&&Object.hasOwnProperty.call(e,"sys_mem_used")&&t.uint32(24).uint32(e.sys_mem_used),null!=e.app_mem_used&&Object.hasOwnProperty.call(e,"app_mem_used")&&t.uint32(32).uint32(e.app_mem_used),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.HardwareInfo;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.sys_cpu_used=e.uint32();break;case 2:n.app_cpu_used=e.uint32();break;case 3:n.sys_mem_used=e.uint32();break;case 4:n.app_mem_used=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.sys_cpu_used&&e.hasOwnProperty("sys_cpu_used")&&!a.isInteger(e.sys_cpu_used)?"sys_cpu_used: integer expected":null!=e.app_cpu_used&&e.hasOwnProperty("app_cpu_used")&&!a.isInteger(e.app_cpu_used)?"app_cpu_used: integer expected":null!=e.sys_mem_used&&e.hasOwnProperty("sys_mem_used")&&!a.isInteger(e.sys_mem_used)?"sys_mem_used: integer expected":null!=e.app_mem_used&&e.hasOwnProperty("app_mem_used")&&!a.isInteger(e.app_mem_used)?"app_mem_used: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.HardwareInfo)return e;var t=new c.logreport.HardwareInfo;return null!=e.sys_cpu_used&&(t.sys_cpu_used=e.sys_cpu_used>>>0),null!=e.app_cpu_used&&(t.app_cpu_used=e.app_cpu_used>>>0),null!=e.sys_mem_used&&(t.sys_mem_used=e.sys_mem_used>>>0),null!=e.app_mem_used&&(t.app_mem_used=e.app_mem_used>>>0),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.sys_cpu_used=0,i.app_cpu_used=0,i.sys_mem_used=0,i.app_mem_used=0),null!=e.sys_cpu_used&&e.hasOwnProperty("sys_cpu_used")&&(i.sys_cpu_used=e.sys_cpu_used),null!=e.app_cpu_used&&e.hasOwnProperty("app_cpu_used")&&(i.app_cpu_used=e.app_cpu_used),null!=e.sys_mem_used&&e.hasOwnProperty("sys_mem_used")&&(i.sys_mem_used=e.sys_mem_used),null!=e.app_mem_used&&e.hasOwnProperty("app_mem_used")&&(i.app_mem_used=e.app_mem_used),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.PublishQualityInfo=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.audio_bitrate=0,e.prototype.video_bitrate=0,e.prototype.video_capture_fps=0,e.prototype.video_network_fps=0,e.prototype.uplink_plr=0,e.prototype.rtt=0,e.prototype.audio_network_fps=0,e.prototype.captured_sound_level=0,e.prototype.sample_time_window=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.audio_bitrate&&Object.hasOwnProperty.call(e,"audio_bitrate")&&t.uint32(8).uint32(e.audio_bitrate),null!=e.video_bitrate&&Object.hasOwnProperty.call(e,"video_bitrate")&&t.uint32(16).uint32(e.video_bitrate),null!=e.video_capture_fps&&Object.hasOwnProperty.call(e,"video_capture_fps")&&t.uint32(24).uint32(e.video_capture_fps),null!=e.video_network_fps&&Object.hasOwnProperty.call(e,"video_network_fps")&&t.uint32(32).uint32(e.video_network_fps),null!=e.uplink_plr&&Object.hasOwnProperty.call(e,"uplink_plr")&&t.uint32(40).uint32(e.uplink_plr),null!=e.rtt&&Object.hasOwnProperty.call(e,"rtt")&&t.uint32(48).uint32(e.rtt),null!=e.audio_network_fps&&Object.hasOwnProperty.call(e,"audio_network_fps")&&t.uint32(56).uint32(e.audio_network_fps),null!=e.captured_sound_level&&Object.hasOwnProperty.call(e,"captured_sound_level")&&t.uint32(64).uint32(e.captured_sound_level),null!=e.sample_time_window&&Object.hasOwnProperty.call(e,"sample_time_window")&&t.uint32(800).uint32(e.sample_time_window),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.PublishQualityInfo;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.audio_bitrate=e.uint32();break;case 2:n.video_bitrate=e.uint32();break;case 3:n.video_capture_fps=e.uint32();break;case 4:n.video_network_fps=e.uint32();break;case 5:n.uplink_plr=e.uint32();break;case 6:n.rtt=e.uint32();break;case 7:n.audio_network_fps=e.uint32();break;case 8:n.captured_sound_level=e.uint32();break;case 100:n.sample_time_window=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.audio_bitrate&&e.hasOwnProperty("audio_bitrate")&&!a.isInteger(e.audio_bitrate)?"audio_bitrate: integer expected":null!=e.video_bitrate&&e.hasOwnProperty("video_bitrate")&&!a.isInteger(e.video_bitrate)?"video_bitrate: integer expected":null!=e.video_capture_fps&&e.hasOwnProperty("video_capture_fps")&&!a.isInteger(e.video_capture_fps)?"video_capture_fps: integer expected":null!=e.video_network_fps&&e.hasOwnProperty("video_network_fps")&&!a.isInteger(e.video_network_fps)?"video_network_fps: integer expected":null!=e.uplink_plr&&e.hasOwnProperty("uplink_plr")&&!a.isInteger(e.uplink_plr)?"uplink_plr: integer expected":null!=e.rtt&&e.hasOwnProperty("rtt")&&!a.isInteger(e.rtt)?"rtt: integer expected":null!=e.audio_network_fps&&e.hasOwnProperty("audio_network_fps")&&!a.isInteger(e.audio_network_fps)?"audio_network_fps: integer expected":null!=e.captured_sound_level&&e.hasOwnProperty("captured_sound_level")&&!a.isInteger(e.captured_sound_level)?"captured_sound_level: integer expected":null!=e.sample_time_window&&e.hasOwnProperty("sample_time_window")&&!a.isInteger(e.sample_time_window)?"sample_time_window: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.PublishQualityInfo)return e;var t=new c.logreport.PublishQualityInfo;return null!=e.audio_bitrate&&(t.audio_bitrate=e.audio_bitrate>>>0),null!=e.video_bitrate&&(t.video_bitrate=e.video_bitrate>>>0),null!=e.video_capture_fps&&(t.video_capture_fps=e.video_capture_fps>>>0),null!=e.video_network_fps&&(t.video_network_fps=e.video_network_fps>>>0),null!=e.uplink_plr&&(t.uplink_plr=e.uplink_plr>>>0),null!=e.rtt&&(t.rtt=e.rtt>>>0),null!=e.audio_network_fps&&(t.audio_network_fps=e.audio_network_fps>>>0),null!=e.captured_sound_level&&(t.captured_sound_level=e.captured_sound_level>>>0),null!=e.sample_time_window&&(t.sample_time_window=e.sample_time_window>>>0),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.audio_bitrate=0,i.video_bitrate=0,i.video_capture_fps=0,i.video_network_fps=0,i.uplink_plr=0,i.rtt=0,i.audio_network_fps=0,i.captured_sound_level=0,i.sample_time_window=0),null!=e.audio_bitrate&&e.hasOwnProperty("audio_bitrate")&&(i.audio_bitrate=e.audio_bitrate),null!=e.video_bitrate&&e.hasOwnProperty("video_bitrate")&&(i.video_bitrate=e.video_bitrate),null!=e.video_capture_fps&&e.hasOwnProperty("video_capture_fps")&&(i.video_capture_fps=e.video_capture_fps),null!=e.video_network_fps&&e.hasOwnProperty("video_network_fps")&&(i.video_network_fps=e.video_network_fps),null!=e.uplink_plr&&e.hasOwnProperty("uplink_plr")&&(i.uplink_plr=e.uplink_plr),null!=e.rtt&&e.hasOwnProperty("rtt")&&(i.rtt=e.rtt),null!=e.audio_network_fps&&e.hasOwnProperty("audio_network_fps")&&(i.audio_network_fps=e.audio_network_fps),null!=e.captured_sound_level&&e.hasOwnProperty("captured_sound_level")&&(i.captured_sound_level=e.captured_sound_level),null!=e.sample_time_window&&e.hasOwnProperty("sample_time_window")&&(i.sample_time_window=e.sample_time_window),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.PlayQualityInfo=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.audio_bitrate=0,e.prototype.video_bitrate=0,e.prototype.video_network_fps=0,e.prototype.audio_break_count=0,e.prototype.video_break_count=0,e.prototype.downlink_plr=0,e.prototype.peer_to_peer_plr=0,e.prototype.peer_to_peer_delay=0,e.prototype.audio_network_fps=0,e.prototype.audio_break_duration=0,e.prototype.video_break_duration=0,e.prototype.audio_break_rate=0,e.prototype.video_break_rate=0,e.prototype.audio_break_cancel=0,e.prototype.video_break_cancel=0,e.prototype.rtt=0,e.prototype.rendered_sound_level=0,e.prototype.audio_break_cancel_duration=0,e.prototype.video_break_cancel_duration=0,e.prototype.audio_decode_time=0,e.prototype.video_decode_time=0,e.prototype.real_sampling_interval=0,e.prototype.mos=0,e.prototype.audio_decode_fps=0,e.prototype.video_decode_fps=0,e.prototype.video_frames_decoded=0,e.prototype.video_frames_dropped=0,e.prototype.sample_time_window=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.audio_bitrate&&Object.hasOwnProperty.call(e,"audio_bitrate")&&t.uint32(8).uint32(e.audio_bitrate),null!=e.video_bitrate&&Object.hasOwnProperty.call(e,"video_bitrate")&&t.uint32(16).uint32(e.video_bitrate),null!=e.video_network_fps&&Object.hasOwnProperty.call(e,"video_network_fps")&&t.uint32(24).uint32(e.video_network_fps),null!=e.audio_break_count&&Object.hasOwnProperty.call(e,"audio_break_count")&&t.uint32(32).uint32(e.audio_break_count),null!=e.video_break_count&&Object.hasOwnProperty.call(e,"video_break_count")&&t.uint32(40).uint32(e.video_break_count),null!=e.downlink_plr&&Object.hasOwnProperty.call(e,"downlink_plr")&&t.uint32(48).uint32(e.downlink_plr),null!=e.peer_to_peer_plr&&Object.hasOwnProperty.call(e,"peer_to_peer_plr")&&t.uint32(56).uint32(e.peer_to_peer_plr),null!=e.peer_to_peer_delay&&Object.hasOwnProperty.call(e,"peer_to_peer_delay")&&t.uint32(64).uint32(e.peer_to_peer_delay),null!=e.audio_network_fps&&Object.hasOwnProperty.call(e,"audio_network_fps")&&t.uint32(72).uint32(e.audio_network_fps),null!=e.audio_break_duration&&Object.hasOwnProperty.call(e,"audio_break_duration")&&t.uint32(80).uint32(e.audio_break_duration),null!=e.video_break_duration&&Object.hasOwnProperty.call(e,"video_break_duration")&&t.uint32(88).uint32(e.video_break_duration),null!=e.audio_break_rate&&Object.hasOwnProperty.call(e,"audio_break_rate")&&t.uint32(96).uint32(e.audio_break_rate),null!=e.video_break_rate&&Object.hasOwnProperty.call(e,"video_break_rate")&&t.uint32(104).uint32(e.video_break_rate),null!=e.audio_break_cancel&&Object.hasOwnProperty.call(e,"audio_break_cancel")&&t.uint32(112).uint32(e.audio_break_cancel),null!=e.video_break_cancel&&Object.hasOwnProperty.call(e,"video_break_cancel")&&t.uint32(120).uint32(e.video_break_cancel),null!=e.rtt&&Object.hasOwnProperty.call(e,"rtt")&&t.uint32(128).uint32(e.rtt),null!=e.rendered_sound_level&&Object.hasOwnProperty.call(e,"rendered_sound_level")&&t.uint32(136).uint32(e.rendered_sound_level),null!=e.audio_break_cancel_duration&&Object.hasOwnProperty.call(e,"audio_break_cancel_duration")&&t.uint32(144).uint32(e.audio_break_cancel_duration),null!=e.video_break_cancel_duration&&Object.hasOwnProperty.call(e,"video_break_cancel_duration")&&t.uint32(152).uint32(e.video_break_cancel_duration),null!=e.audio_decode_time&&Object.hasOwnProperty.call(e,"audio_decode_time")&&t.uint32(160).uint32(e.audio_decode_time),null!=e.video_decode_time&&Object.hasOwnProperty.call(e,"video_decode_time")&&t.uint32(168).uint32(e.video_decode_time),null!=e.real_sampling_interval&&Object.hasOwnProperty.call(e,"real_sampling_interval")&&t.uint32(176).uint32(e.real_sampling_interval),null!=e.mos&&Object.hasOwnProperty.call(e,"mos")&&t.uint32(184).int32(e.mos),null!=e.audio_decode_fps&&Object.hasOwnProperty.call(e,"audio_decode_fps")&&t.uint32(192).uint32(e.audio_decode_fps),null!=e.video_decode_fps&&Object.hasOwnProperty.call(e,"video_decode_fps")&&t.uint32(200).uint32(e.video_decode_fps),null!=e.video_frames_decoded&&Object.hasOwnProperty.call(e,"video_frames_decoded")&&t.uint32(208).uint32(e.video_frames_decoded),null!=e.video_frames_dropped&&Object.hasOwnProperty.call(e,"video_frames_dropped")&&t.uint32(216).uint32(e.video_frames_dropped),null!=e.sample_time_window&&Object.hasOwnProperty.call(e,"sample_time_window")&&t.uint32(800).uint32(e.sample_time_window),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.PlayQualityInfo;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.audio_bitrate=e.uint32();break;case 2:n.video_bitrate=e.uint32();break;case 3:n.video_network_fps=e.uint32();break;case 4:n.audio_break_count=e.uint32();break;case 5:n.video_break_count=e.uint32();break;case 6:n.downlink_plr=e.uint32();break;case 7:n.peer_to_peer_plr=e.uint32();break;case 8:n.peer_to_peer_delay=e.uint32();break;case 9:n.audio_network_fps=e.uint32();break;case 10:n.audio_break_duration=e.uint32();break;case 11:n.video_break_duration=e.uint32();break;case 12:n.audio_break_rate=e.uint32();break;case 13:n.video_break_rate=e.uint32();break;case 14:n.audio_break_cancel=e.uint32();break;case 15:n.video_break_cancel=e.uint32();break;case 16:n.rtt=e.uint32();break;case 17:n.rendered_sound_level=e.uint32();break;case 18:n.audio_break_cancel_duration=e.uint32();break;case 19:n.video_break_cancel_duration=e.uint32();break;case 20:n.audio_decode_time=e.uint32();break;case 21:n.video_decode_time=e.uint32();break;case 22:n.real_sampling_interval=e.uint32();break;case 23:n.mos=e.int32();break;case 24:n.audio_decode_fps=e.uint32();break;case 25:n.video_decode_fps=e.uint32();break;case 26:n.video_frames_decoded=e.uint32();break;case 27:n.video_frames_dropped=e.uint32();break;case 100:n.sample_time_window=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.audio_bitrate&&e.hasOwnProperty("audio_bitrate")&&!a.isInteger(e.audio_bitrate)?"audio_bitrate: integer expected":null!=e.video_bitrate&&e.hasOwnProperty("video_bitrate")&&!a.isInteger(e.video_bitrate)?"video_bitrate: integer expected":null!=e.video_network_fps&&e.hasOwnProperty("video_network_fps")&&!a.isInteger(e.video_network_fps)?"video_network_fps: integer expected":null!=e.audio_break_count&&e.hasOwnProperty("audio_break_count")&&!a.isInteger(e.audio_break_count)?"audio_break_count: integer expected":null!=e.video_break_count&&e.hasOwnProperty("video_break_count")&&!a.isInteger(e.video_break_count)?"video_break_count: integer expected":null!=e.downlink_plr&&e.hasOwnProperty("downlink_plr")&&!a.isInteger(e.downlink_plr)?"downlink_plr: integer expected":null!=e.peer_to_peer_plr&&e.hasOwnProperty("peer_to_peer_plr")&&!a.isInteger(e.peer_to_peer_plr)?"peer_to_peer_plr: integer expected":null!=e.peer_to_peer_delay&&e.hasOwnProperty("peer_to_peer_delay")&&!a.isInteger(e.peer_to_peer_delay)?"peer_to_peer_delay: integer expected":null!=e.audio_network_fps&&e.hasOwnProperty("audio_network_fps")&&!a.isInteger(e.audio_network_fps)?"audio_network_fps: integer expected":null!=e.audio_break_duration&&e.hasOwnProperty("audio_break_duration")&&!a.isInteger(e.audio_break_duration)?"audio_break_duration: integer expected":null!=e.video_break_duration&&e.hasOwnProperty("video_break_duration")&&!a.isInteger(e.video_break_duration)?"video_break_duration: integer expected":null!=e.audio_break_rate&&e.hasOwnProperty("audio_break_rate")&&!a.isInteger(e.audio_break_rate)?"audio_break_rate: integer expected":null!=e.video_break_rate&&e.hasOwnProperty("video_break_rate")&&!a.isInteger(e.video_break_rate)?"video_break_rate: integer expected":null!=e.audio_break_cancel&&e.hasOwnProperty("audio_break_cancel")&&!a.isInteger(e.audio_break_cancel)?"audio_break_cancel: integer expected":null!=e.video_break_cancel&&e.hasOwnProperty("video_break_cancel")&&!a.isInteger(e.video_break_cancel)?"video_break_cancel: integer expected":null!=e.rtt&&e.hasOwnProperty("rtt")&&!a.isInteger(e.rtt)?"rtt: integer expected":null!=e.rendered_sound_level&&e.hasOwnProperty("rendered_sound_level")&&!a.isInteger(e.rendered_sound_level)?"rendered_sound_level: integer expected":null!=e.audio_break_cancel_duration&&e.hasOwnProperty("audio_break_cancel_duration")&&!a.isInteger(e.audio_break_cancel_duration)?"audio_break_cancel_duration: integer expected":null!=e.video_break_cancel_duration&&e.hasOwnProperty("video_break_cancel_duration")&&!a.isInteger(e.video_break_cancel_duration)?"video_break_cancel_duration: integer expected":null!=e.audio_decode_time&&e.hasOwnProperty("audio_decode_time")&&!a.isInteger(e.audio_decode_time)?"audio_decode_time: integer expected":null!=e.video_decode_time&&e.hasOwnProperty("video_decode_time")&&!a.isInteger(e.video_decode_time)?"video_decode_time: integer expected":null!=e.real_sampling_interval&&e.hasOwnProperty("real_sampling_interval")&&!a.isInteger(e.real_sampling_interval)?"real_sampling_interval: integer expected":null!=e.mos&&e.hasOwnProperty("mos")&&!a.isInteger(e.mos)?"mos: integer expected":null!=e.audio_decode_fps&&e.hasOwnProperty("audio_decode_fps")&&!a.isInteger(e.audio_decode_fps)?"audio_decode_fps: integer expected":null!=e.video_decode_fps&&e.hasOwnProperty("video_decode_fps")&&!a.isInteger(e.video_decode_fps)?"video_decode_fps: integer expected":null!=e.video_frames_decoded&&e.hasOwnProperty("video_frames_decoded")&&!a.isInteger(e.video_frames_decoded)?"video_frames_decoded: integer expected":null!=e.video_frames_dropped&&e.hasOwnProperty("video_frames_dropped")&&!a.isInteger(e.video_frames_dropped)?"video_frames_dropped: integer expected":null!=e.sample_time_window&&e.hasOwnProperty("sample_time_window")&&!a.isInteger(e.sample_time_window)?"sample_time_window: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.PlayQualityInfo)return e;var t=new c.logreport.PlayQualityInfo;return null!=e.audio_bitrate&&(t.audio_bitrate=e.audio_bitrate>>>0),null!=e.video_bitrate&&(t.video_bitrate=e.video_bitrate>>>0),null!=e.video_network_fps&&(t.video_network_fps=e.video_network_fps>>>0),null!=e.audio_break_count&&(t.audio_break_count=e.audio_break_count>>>0),null!=e.video_break_count&&(t.video_break_count=e.video_break_count>>>0),null!=e.downlink_plr&&(t.downlink_plr=e.downlink_plr>>>0),null!=e.peer_to_peer_plr&&(t.peer_to_peer_plr=e.peer_to_peer_plr>>>0),null!=e.peer_to_peer_delay&&(t.peer_to_peer_delay=e.peer_to_peer_delay>>>0),null!=e.audio_network_fps&&(t.audio_network_fps=e.audio_network_fps>>>0),null!=e.audio_break_duration&&(t.audio_break_duration=e.audio_break_duration>>>0),null!=e.video_break_duration&&(t.video_break_duration=e.video_break_duration>>>0),null!=e.audio_break_rate&&(t.audio_break_rate=e.audio_break_rate>>>0),null!=e.video_break_rate&&(t.video_break_rate=e.video_break_rate>>>0),null!=e.audio_break_cancel&&(t.audio_break_cancel=e.audio_break_cancel>>>0),null!=e.video_break_cancel&&(t.video_break_cancel=e.video_break_cancel>>>0),null!=e.rtt&&(t.rtt=e.rtt>>>0),null!=e.rendered_sound_level&&(t.rendered_sound_level=e.rendered_sound_level>>>0),null!=e.audio_break_cancel_duration&&(t.audio_break_cancel_duration=e.audio_break_cancel_duration>>>0),null!=e.video_break_cancel_duration&&(t.video_break_cancel_duration=e.video_break_cancel_duration>>>0),null!=e.audio_decode_time&&(t.audio_decode_time=e.audio_decode_time>>>0),null!=e.video_decode_time&&(t.video_decode_time=e.video_decode_time>>>0),null!=e.real_sampling_interval&&(t.real_sampling_interval=e.real_sampling_interval>>>0),null!=e.mos&&(t.mos=0|e.mos),null!=e.audio_decode_fps&&(t.audio_decode_fps=e.audio_decode_fps>>>0),null!=e.video_decode_fps&&(t.video_decode_fps=e.video_decode_fps>>>0),null!=e.video_frames_decoded&&(t.video_frames_decoded=e.video_frames_decoded>>>0),null!=e.video_frames_dropped&&(t.video_frames_dropped=e.video_frames_dropped>>>0),null!=e.sample_time_window&&(t.sample_time_window=e.sample_time_window>>>0),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.audio_bitrate=0,i.video_bitrate=0,i.video_network_fps=0,i.audio_break_count=0,i.video_break_count=0,i.downlink_plr=0,i.peer_to_peer_plr=0,i.peer_to_peer_delay=0,i.audio_network_fps=0,i.audio_break_duration=0,i.video_break_duration=0,i.audio_break_rate=0,i.video_break_rate=0,i.audio_break_cancel=0,i.video_break_cancel=0,i.rtt=0,i.rendered_sound_level=0,i.audio_break_cancel_duration=0,i.video_break_cancel_duration=0,i.audio_decode_time=0,i.video_decode_time=0,i.real_sampling_interval=0,i.mos=0,i.audio_decode_fps=0,i.video_decode_fps=0,i.video_frames_decoded=0,i.video_frames_dropped=0,i.sample_time_window=0),null!=e.audio_bitrate&&e.hasOwnProperty("audio_bitrate")&&(i.audio_bitrate=e.audio_bitrate),null!=e.video_bitrate&&e.hasOwnProperty("video_bitrate")&&(i.video_bitrate=e.video_bitrate),null!=e.video_network_fps&&e.hasOwnProperty("video_network_fps")&&(i.video_network_fps=e.video_network_fps),null!=e.audio_break_count&&e.hasOwnProperty("audio_break_count")&&(i.audio_break_count=e.audio_break_count),null!=e.video_break_count&&e.hasOwnProperty("video_break_count")&&(i.video_break_count=e.video_break_count),null!=e.downlink_plr&&e.hasOwnProperty("downlink_plr")&&(i.downlink_plr=e.downlink_plr),null!=e.peer_to_peer_plr&&e.hasOwnProperty("peer_to_peer_plr")&&(i.peer_to_peer_plr=e.peer_to_peer_plr),null!=e.peer_to_peer_delay&&e.hasOwnProperty("peer_to_peer_delay")&&(i.peer_to_peer_delay=e.peer_to_peer_delay),null!=e.audio_network_fps&&e.hasOwnProperty("audio_network_fps")&&(i.audio_network_fps=e.audio_network_fps),null!=e.audio_break_duration&&e.hasOwnProperty("audio_break_duration")&&(i.audio_break_duration=e.audio_break_duration),null!=e.video_break_duration&&e.hasOwnProperty("video_break_duration")&&(i.video_break_duration=e.video_break_duration),null!=e.audio_break_rate&&e.hasOwnProperty("audio_break_rate")&&(i.audio_break_rate=e.audio_break_rate),null!=e.video_break_rate&&e.hasOwnProperty("video_break_rate")&&(i.video_break_rate=e.video_break_rate),null!=e.audio_break_cancel&&e.hasOwnProperty("audio_break_cancel")&&(i.audio_break_cancel=e.audio_break_cancel),null!=e.video_break_cancel&&e.hasOwnProperty("video_break_cancel")&&(i.video_break_cancel=e.video_break_cancel),null!=e.rtt&&e.hasOwnProperty("rtt")&&(i.rtt=e.rtt),null!=e.rendered_sound_level&&e.hasOwnProperty("rendered_sound_level")&&(i.rendered_sound_level=e.rendered_sound_level),null!=e.audio_break_cancel_duration&&e.hasOwnProperty("audio_break_cancel_duration")&&(i.audio_break_cancel_duration=e.audio_break_cancel_duration),null!=e.video_break_cancel_duration&&e.hasOwnProperty("video_break_cancel_duration")&&(i.video_break_cancel_duration=e.video_break_cancel_duration),null!=e.audio_decode_time&&e.hasOwnProperty("audio_decode_time")&&(i.audio_decode_time=e.audio_decode_time),null!=e.video_decode_time&&e.hasOwnProperty("video_decode_time")&&(i.video_decode_time=e.video_decode_time),null!=e.real_sampling_interval&&e.hasOwnProperty("real_sampling_interval")&&(i.real_sampling_interval=e.real_sampling_interval),null!=e.mos&&e.hasOwnProperty("mos")&&(i.mos=e.mos),null!=e.audio_decode_fps&&e.hasOwnProperty("audio_decode_fps")&&(i.audio_decode_fps=e.audio_decode_fps),null!=e.video_decode_fps&&e.hasOwnProperty("video_decode_fps")&&(i.video_decode_fps=e.video_decode_fps),null!=e.video_frames_decoded&&e.hasOwnProperty("video_frames_decoded")&&(i.video_frames_decoded=e.video_frames_decoded),null!=e.video_frames_dropped&&e.hasOwnProperty("video_frames_dropped")&&(i.video_frames_dropped=e.video_frames_dropped),null!=e.sample_time_window&&e.hasOwnProperty("sample_time_window")&&(i.sample_time_window=e.sample_time_window),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.ChargeInfo=function(){function e(e){if(this.play_stream_resolution_infos=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.is_publishing=0,e.prototype.play_stream_resolution_infos=a.emptyArray,e.prototype.play_max_audio_bitrate=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.is_publishing&&Object.hasOwnProperty.call(e,"is_publishing")&&t.uint32(8).uint32(e.is_publishing),null!=e.play_stream_resolution_infos&&e.play_stream_resolution_infos.length)for(var i=0;i<e.play_stream_resolution_infos.length;++i)c.logreport.ResolutionInfo.encode(e.play_stream_resolution_infos[i],t.uint32(18).fork()).ldelim();return null!=e.play_max_audio_bitrate&&Object.hasOwnProperty.call(e,"play_max_audio_bitrate")&&t.uint32(24).uint32(e.play_max_audio_bitrate),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.ChargeInfo;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.is_publishing=e.uint32();break;case 2:n.play_stream_resolution_infos&&n.play_stream_resolution_infos.length||(n.play_stream_resolution_infos=[]),n.play_stream_resolution_infos.push(c.logreport.ResolutionInfo.decode(e,e.uint32()));break;case 3:n.play_max_audio_bitrate=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.is_publishing&&e.hasOwnProperty("is_publishing")&&!a.isInteger(e.is_publishing))return"is_publishing: integer expected";if(null!=e.play_stream_resolution_infos&&e.hasOwnProperty("play_stream_resolution_infos")){if(!Array.isArray(e.play_stream_resolution_infos))return"play_stream_resolution_infos: array expected";for(var t=0;t<e.play_stream_resolution_infos.length;++t){var i=c.logreport.ResolutionInfo.verify(e.play_stream_resolution_infos[t]);if(i)return"play_stream_resolution_infos."+i}}return null!=e.play_max_audio_bitrate&&e.hasOwnProperty("play_max_audio_bitrate")&&!a.isInteger(e.play_max_audio_bitrate)?"play_max_audio_bitrate: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.ChargeInfo)return e;var t=new c.logreport.ChargeInfo;if(null!=e.is_publishing&&(t.is_publishing=e.is_publishing>>>0),e.play_stream_resolution_infos){if(!Array.isArray(e.play_stream_resolution_infos))throw TypeError(".logreport.ChargeInfo.play_stream_resolution_infos: array expected");t.play_stream_resolution_infos=[];for(var i=0;i<e.play_stream_resolution_infos.length;++i){if("object"!=typeof e.play_stream_resolution_infos[i])throw TypeError(".logreport.ChargeInfo.play_stream_resolution_infos: object expected");t.play_stream_resolution_infos[i]=c.logreport.ResolutionInfo.fromObject(e.play_stream_resolution_infos[i])}}return null!=e.play_max_audio_bitrate&&(t.play_max_audio_bitrate=e.play_max_audio_bitrate>>>0),t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.play_stream_resolution_infos=[]),t.defaults&&(i.is_publishing=0,i.play_max_audio_bitrate=0),null!=e.is_publishing&&e.hasOwnProperty("is_publishing")&&(i.is_publishing=e.is_publishing),e.play_stream_resolution_infos&&e.play_stream_resolution_infos.length){i.play_stream_resolution_infos=[];for(var n=0;n<e.play_stream_resolution_infos.length;++n)i.play_stream_resolution_infos[n]=c.logreport.ResolutionInfo.toObject(e.play_stream_resolution_infos[n],t)}return null!=e.play_max_audio_bitrate&&e.hasOwnProperty("play_max_audio_bitrate")&&(i.play_max_audio_bitrate=e.play_max_audio_bitrate),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.ResolutionInfo=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.video_width=0,e.prototype.video_height=0,e.prototype.count=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.video_width&&Object.hasOwnProperty.call(e,"video_width")&&t.uint32(8).uint32(e.video_width),null!=e.video_height&&Object.hasOwnProperty.call(e,"video_height")&&t.uint32(16).uint32(e.video_height),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(24).uint32(e.count),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.ResolutionInfo;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.video_width=e.uint32();break;case 2:n.video_height=e.uint32();break;case 3:n.count=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.video_width&&e.hasOwnProperty("video_width")&&!a.isInteger(e.video_width)?"video_width: integer expected":null!=e.video_height&&e.hasOwnProperty("video_height")&&!a.isInteger(e.video_height)?"video_height: integer expected":null!=e.count&&e.hasOwnProperty("count")&&!a.isInteger(e.count)?"count: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.ResolutionInfo)return e;var t=new c.logreport.ResolutionInfo;return null!=e.video_width&&(t.video_width=e.video_width>>>0),null!=e.video_height&&(t.video_height=e.video_height>>>0),null!=e.count&&(t.count=e.count>>>0),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.video_width=0,i.video_height=0,i.count=0),null!=e.video_width&&e.hasOwnProperty("video_width")&&(i.video_width=e.video_width),null!=e.video_height&&e.hasOwnProperty("video_height")&&(i.video_height=e.video_height),null!=e.count&&e.hasOwnProperty("count")&&(i.count=e.count),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.NoBillingEvent=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.platform_info="",e.prototype.room_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.platform_info&&Object.hasOwnProperty.call(e,"platform_info")&&t.uint32(10).string(e.platform_info),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).string(e.room_id),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.NoBillingEvent;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.platform_info=e.string();break;case 2:n.room_id=e.string();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.platform_info&&e.hasOwnProperty("platform_info")&&!a.isString(e.platform_info)?"platform_info: string expected":null!=e.room_id&&e.hasOwnProperty("room_id")&&!a.isString(e.room_id)?"room_id: string expected":null},e.fromObject=function(e){if(e instanceof c.logreport.NoBillingEvent)return e;var t=new c.logreport.NoBillingEvent;return null!=e.platform_info&&(t.platform_info=String(e.platform_info)),null!=e.room_id&&(t.room_id=String(e.room_id)),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.platform_info="",i.room_id=""),null!=e.platform_info&&e.hasOwnProperty("platform_info")&&(i.platform_info=e.platform_info),null!=e.room_id&&e.hasOwnProperty("room_id")&&(i.room_id=e.room_id),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.DynQualityEvent=function(){function e(e){if(this.dyn_quality_infos=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.seq_no="",e.prototype.num=0,e.prototype.dyn_quality_infos=a.emptyArray,e.prototype.device_id="",e.prototype.latitude=0,e.prototype.longitude=0,e.prototype.country="",e.prototype.region="",e.prototype.city="",e.prototype.isp="",e.prototype.ve_mode=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.seq_no&&Object.hasOwnProperty.call(e,"seq_no")&&t.uint32(10).string(e.seq_no),null!=e.num&&Object.hasOwnProperty.call(e,"num")&&t.uint32(16).uint32(e.num),null!=e.dyn_quality_infos&&e.dyn_quality_infos.length)for(var i=0;i<e.dyn_quality_infos.length;++i)c.logreport.DynQualityInfos.encode(e.dyn_quality_infos[i],t.uint32(26).fork()).ldelim();return null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(34).string(e.device_id),null!=e.latitude&&Object.hasOwnProperty.call(e,"latitude")&&t.uint32(40).uint32(e.latitude),null!=e.longitude&&Object.hasOwnProperty.call(e,"longitude")&&t.uint32(48).uint32(e.longitude),null!=e.country&&Object.hasOwnProperty.call(e,"country")&&t.uint32(58).string(e.country),null!=e.region&&Object.hasOwnProperty.call(e,"region")&&t.uint32(66).string(e.region),null!=e.city&&Object.hasOwnProperty.call(e,"city")&&t.uint32(74).string(e.city),null!=e.isp&&Object.hasOwnProperty.call(e,"isp")&&t.uint32(82).string(e.isp),null!=e.ve_mode&&Object.hasOwnProperty.call(e,"ve_mode")&&t.uint32(88).uint32(e.ve_mode),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.DynQualityEvent;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.seq_no=e.string();break;case 2:n.num=e.uint32();break;case 3:n.dyn_quality_infos&&n.dyn_quality_infos.length||(n.dyn_quality_infos=[]),n.dyn_quality_infos.push(c.logreport.DynQualityInfos.decode(e,e.uint32()));break;case 4:n.device_id=e.string();break;case 5:n.latitude=e.uint32();break;case 6:n.longitude=e.uint32();break;case 7:n.country=e.string();break;case 8:n.region=e.string();break;case 9:n.city=e.string();break;case 10:n.isp=e.string();break;case 11:n.ve_mode=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.seq_no&&e.hasOwnProperty("seq_no")&&!a.isString(e.seq_no))return"seq_no: string expected";if(null!=e.num&&e.hasOwnProperty("num")&&!a.isInteger(e.num))return"num: integer expected";if(null!=e.dyn_quality_infos&&e.hasOwnProperty("dyn_quality_infos")){if(!Array.isArray(e.dyn_quality_infos))return"dyn_quality_infos: array expected";for(var t=0;t<e.dyn_quality_infos.length;++t){var i=c.logreport.DynQualityInfos.verify(e.dyn_quality_infos[t]);if(i)return"dyn_quality_infos."+i}}return null!=e.device_id&&e.hasOwnProperty("device_id")&&!a.isString(e.device_id)?"device_id: string expected":null!=e.latitude&&e.hasOwnProperty("latitude")&&!a.isInteger(e.latitude)?"latitude: integer expected":null!=e.longitude&&e.hasOwnProperty("longitude")&&!a.isInteger(e.longitude)?"longitude: integer expected":null!=e.country&&e.hasOwnProperty("country")&&!a.isString(e.country)?"country: string expected":null!=e.region&&e.hasOwnProperty("region")&&!a.isString(e.region)?"region: string expected":null!=e.city&&e.hasOwnProperty("city")&&!a.isString(e.city)?"city: string expected":null!=e.isp&&e.hasOwnProperty("isp")&&!a.isString(e.isp)?"isp: string expected":null!=e.ve_mode&&e.hasOwnProperty("ve_mode")&&!a.isInteger(e.ve_mode)?"ve_mode: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.DynQualityEvent)return e;var t=new c.logreport.DynQualityEvent;if(null!=e.seq_no&&(t.seq_no=String(e.seq_no)),null!=e.num&&(t.num=e.num>>>0),e.dyn_quality_infos){if(!Array.isArray(e.dyn_quality_infos))throw TypeError(".logreport.DynQualityEvent.dyn_quality_infos: array expected");t.dyn_quality_infos=[];for(var i=0;i<e.dyn_quality_infos.length;++i){if("object"!=typeof e.dyn_quality_infos[i])throw TypeError(".logreport.DynQualityEvent.dyn_quality_infos: object expected");t.dyn_quality_infos[i]=c.logreport.DynQualityInfos.fromObject(e.dyn_quality_infos[i])}}return null!=e.device_id&&(t.device_id=String(e.device_id)),null!=e.latitude&&(t.latitude=e.latitude>>>0),null!=e.longitude&&(t.longitude=e.longitude>>>0),null!=e.country&&(t.country=String(e.country)),null!=e.region&&(t.region=String(e.region)),null!=e.city&&(t.city=String(e.city)),null!=e.isp&&(t.isp=String(e.isp)),null!=e.ve_mode&&(t.ve_mode=e.ve_mode>>>0),t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.dyn_quality_infos=[]),t.defaults&&(i.seq_no="",i.num=0,i.device_id="",i.latitude=0,i.longitude=0,i.country="",i.region="",i.city="",i.isp="",i.ve_mode=0),null!=e.seq_no&&e.hasOwnProperty("seq_no")&&(i.seq_no=e.seq_no),null!=e.num&&e.hasOwnProperty("num")&&(i.num=e.num),e.dyn_quality_infos&&e.dyn_quality_infos.length){i.dyn_quality_infos=[];for(var n=0;n<e.dyn_quality_infos.length;++n)i.dyn_quality_infos[n]=c.logreport.DynQualityInfos.toObject(e.dyn_quality_infos[n],t)}return null!=e.device_id&&e.hasOwnProperty("device_id")&&(i.device_id=e.device_id),null!=e.latitude&&e.hasOwnProperty("latitude")&&(i.latitude=e.latitude),null!=e.longitude&&e.hasOwnProperty("longitude")&&(i.longitude=e.longitude),null!=e.country&&e.hasOwnProperty("country")&&(i.country=e.country),null!=e.region&&e.hasOwnProperty("region")&&(i.region=e.region),null!=e.city&&e.hasOwnProperty("city")&&(i.city=e.city),null!=e.isp&&e.hasOwnProperty("isp")&&(i.isp=e.isp),null!=e.ve_mode&&e.hasOwnProperty("ve_mode")&&(i.ve_mode=e.ve_mode),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.DynQualityInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.timestamp_offset_begin=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.timestamp_offset_end=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.server_ip="",e.prototype.infos=a.emptyArray,e.prototype.network_type=0,e.prototype.stream_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint64(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint64(e.timestamp_offset_end),null!=e.server_ip&&Object.hasOwnProperty.call(e,"server_ip")&&t.uint32(26).string(e.server_ip),null!=e.infos&&e.infos.length)for(var i=0;i<e.infos.length;++i)c.logreport.DynQualityInfo.encode(e.infos[i],t.uint32(34).fork()).ldelim();return null!=e.network_type&&Object.hasOwnProperty.call(e,"network_type")&&t.uint32(40).uint32(e.network_type),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(50).string(e.stream_id),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.DynQualityInfos;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.timestamp_offset_begin=e.uint64();break;case 2:n.timestamp_offset_end=e.uint64();break;case 3:n.server_ip=e.string();break;case 4:n.infos&&n.infos.length||(n.infos=[]),n.infos.push(c.logreport.DynQualityInfo.decode(e,e.uint32()));break;case 5:n.network_type=e.uint32();break;case 6:n.stream_id=e.string();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&!(a.isInteger(e.timestamp_offset_begin)||e.timestamp_offset_begin&&a.isInteger(e.timestamp_offset_begin.low)&&a.isInteger(e.timestamp_offset_begin.high)))return"timestamp_offset_begin: integer|Long expected";if(null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&!(a.isInteger(e.timestamp_offset_end)||e.timestamp_offset_end&&a.isInteger(e.timestamp_offset_end.low)&&a.isInteger(e.timestamp_offset_end.high)))return"timestamp_offset_end: integer|Long expected";if(null!=e.server_ip&&e.hasOwnProperty("server_ip")&&!a.isString(e.server_ip))return"server_ip: string expected";if(null!=e.infos&&e.hasOwnProperty("infos")){if(!Array.isArray(e.infos))return"infos: array expected";for(var t=0;t<e.infos.length;++t){var i=c.logreport.DynQualityInfo.verify(e.infos[t]);if(i)return"infos."+i}}return null!=e.network_type&&e.hasOwnProperty("network_type")&&!a.isInteger(e.network_type)?"network_type: integer expected":null!=e.stream_id&&e.hasOwnProperty("stream_id")&&!a.isString(e.stream_id)?"stream_id: string expected":null},e.fromObject=function(e){if(e instanceof c.logreport.DynQualityInfos)return e;var t=new c.logreport.DynQualityInfos;if(null!=e.timestamp_offset_begin&&(a.Long?(t.timestamp_offset_begin=a.Long.fromValue(e.timestamp_offset_begin)).unsigned=!0:"string"==typeof e.timestamp_offset_begin?t.timestamp_offset_begin=parseInt(e.timestamp_offset_begin,10):"number"==typeof e.timestamp_offset_begin?t.timestamp_offset_begin=e.timestamp_offset_begin:"object"==typeof e.timestamp_offset_begin&&(t.timestamp_offset_begin=new a.LongBits(e.timestamp_offset_begin.low>>>0,e.timestamp_offset_begin.high>>>0).toNumber(!0))),null!=e.timestamp_offset_end&&(a.Long?(t.timestamp_offset_end=a.Long.fromValue(e.timestamp_offset_end)).unsigned=!0:"string"==typeof e.timestamp_offset_end?t.timestamp_offset_end=parseInt(e.timestamp_offset_end,10):"number"==typeof e.timestamp_offset_end?t.timestamp_offset_end=e.timestamp_offset_end:"object"==typeof e.timestamp_offset_end&&(t.timestamp_offset_end=new a.LongBits(e.timestamp_offset_end.low>>>0,e.timestamp_offset_end.high>>>0).toNumber(!0))),null!=e.server_ip&&(t.server_ip=String(e.server_ip)),e.infos){if(!Array.isArray(e.infos))throw TypeError(".logreport.DynQualityInfos.infos: array expected");t.infos=[];for(var i=0;i<e.infos.length;++i){if("object"!=typeof e.infos[i])throw TypeError(".logreport.DynQualityInfos.infos: object expected");t.infos[i]=c.logreport.DynQualityInfo.fromObject(e.infos[i])}}return null!=e.network_type&&(t.network_type=e.network_type>>>0),null!=e.stream_id&&(t.stream_id=String(e.stream_id)),t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.infos=[]),t.defaults){if(a.Long){var n=new a.Long(0,0,!0);i.timestamp_offset_begin=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else i.timestamp_offset_begin=t.longs===String?"0":0;a.Long?(n=new a.Long(0,0,!0),i.timestamp_offset_end=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):i.timestamp_offset_end=t.longs===String?"0":0,i.server_ip="",i.network_type=0,i.stream_id=""}if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&("number"==typeof e.timestamp_offset_begin?i.timestamp_offset_begin=t.longs===String?String(e.timestamp_offset_begin):e.timestamp_offset_begin:i.timestamp_offset_begin=t.longs===String?a.Long.prototype.toString.call(e.timestamp_offset_begin):t.longs===Number?new a.LongBits(e.timestamp_offset_begin.low>>>0,e.timestamp_offset_begin.high>>>0).toNumber(!0):e.timestamp_offset_begin),null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&("number"==typeof e.timestamp_offset_end?i.timestamp_offset_end=t.longs===String?String(e.timestamp_offset_end):e.timestamp_offset_end:i.timestamp_offset_end=t.longs===String?a.Long.prototype.toString.call(e.timestamp_offset_end):t.longs===Number?new a.LongBits(e.timestamp_offset_end.low>>>0,e.timestamp_offset_end.high>>>0).toNumber(!0):e.timestamp_offset_end),null!=e.server_ip&&e.hasOwnProperty("server_ip")&&(i.server_ip=e.server_ip),e.infos&&e.infos.length){i.infos=[];for(var r=0;r<e.infos.length;++r)i.infos[r]=c.logreport.DynQualityInfo.toObject(e.infos[r],t)}return null!=e.network_type&&e.hasOwnProperty("network_type")&&(i.network_type=e.network_type),null!=e.stream_id&&e.hasOwnProperty("stream_id")&&(i.stream_id=e.stream_id),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n.DynQualityInfo=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.time=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.plr=0,e.prototype.rtt=0,e.prototype.score=0,e.prototype.sample_time=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(8).uint64(e.time),null!=e.plr&&Object.hasOwnProperty.call(e,"plr")&&t.uint32(16).uint32(e.plr),null!=e.rtt&&Object.hasOwnProperty.call(e,"rtt")&&t.uint32(24).uint32(e.rtt),null!=e.score&&Object.hasOwnProperty.call(e,"score")&&t.uint32(32).uint32(e.score),null!=e.sample_time&&Object.hasOwnProperty.call(e,"sample_time")&&t.uint32(40).uint32(e.sample_time),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.logreport.DynQualityInfo;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.time=e.uint64();break;case 2:n.plr=e.uint32();break;case 3:n.rtt=e.uint32();break;case 4:n.score=e.uint32();break;case 5:n.sample_time=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.time&&e.hasOwnProperty("time")&&!(a.isInteger(e.time)||e.time&&a.isInteger(e.time.low)&&a.isInteger(e.time.high))?"time: integer|Long expected":null!=e.plr&&e.hasOwnProperty("plr")&&!a.isInteger(e.plr)?"plr: integer expected":null!=e.rtt&&e.hasOwnProperty("rtt")&&!a.isInteger(e.rtt)?"rtt: integer expected":null!=e.score&&e.hasOwnProperty("score")&&!a.isInteger(e.score)?"score: integer expected":null!=e.sample_time&&e.hasOwnProperty("sample_time")&&!a.isInteger(e.sample_time)?"sample_time: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.DynQualityInfo)return e;var t=new c.logreport.DynQualityInfo;return null!=e.time&&(a.Long?(t.time=a.Long.fromValue(e.time)).unsigned=!0:"string"==typeof e.time?t.time=parseInt(e.time,10):"number"==typeof e.time?t.time=e.time:"object"==typeof e.time&&(t.time=new a.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0))),null!=e.plr&&(t.plr=e.plr>>>0),null!=e.rtt&&(t.rtt=e.rtt>>>0),null!=e.score&&(t.score=e.score>>>0),null!=e.sample_time&&(t.sample_time=e.sample_time>>>0),t},e.toObject=function(e,t){t||(t={});var i={};if(t.defaults){if(a.Long){var n=new a.Long(0,0,!0);i.time=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else i.time=t.longs===String?"0":0;i.plr=0,i.rtt=0,i.score=0,i.sample_time=0}return null!=e.time&&e.hasOwnProperty("time")&&("number"==typeof e.time?i.time=t.longs===String?String(e.time):e.time:i.time=t.longs===String?a.Long.prototype.toString.call(e.time):t.longs===Number?new a.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0):e.time),null!=e.plr&&e.hasOwnProperty("plr")&&(i.plr=e.plr),null!=e.rtt&&e.hasOwnProperty("rtt")&&(i.rtt=e.rtt),null!=e.score&&e.hasOwnProperty("score")&&(i.score=e.score),null!=e.sample_time&&e.hasOwnProperty("sample_time")&&(i.sample_time=e.sample_time),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),n),e.exports=c},5515:function(e){e.exports=function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[s]={exports:{}};t[s][0].call(l.exports,(function(e){return r(t[s][1][e]||e)}),l,l.exports,e,t,i,n)}return i[s].exports}for(var o=void 0,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){"use strict";var n=(0,e("./adapter_factory.js").adapterFactory)({window:window});t.exports=n},{"./adapter_factory.js":2}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.adapterFactory=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},i=n.log,l=n.detectBrowser(e),u={browserDetails:l,commonShim:c,extractVersion:n.extractVersion,disableLog:n.disableLog,disableWarnings:n.disableWarnings};switch(l.browser){case"chrome":if(!r||!r.shimPeerConnection||!t.shimChrome)return i("Chrome shim is not included in this adapter release."),u;i("adapter.js shimming chrome."),u.browserShim=r,r.shimGetUserMedia(e),r.shimMediaStream(e),r.shimPeerConnection(e),r.shimOnTrack(e),r.shimAddTrackRemoveTrack(e),r.shimGetSendersWithDtmf(e),r.shimGetStats(e),r.shimSenderReceiverGetStats(e),r.fixNegotiationNeeded(e),c.shimRTCIceCandidate(e),c.shimConnectionState(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e),c.removeAllowExtmapMixed(e);break;case"firefox":if(!s||!s.shimPeerConnection||!t.shimFirefox)return i("Firefox shim is not included in this adapter release."),u;i("adapter.js shimming firefox."),u.browserShim=s,s.shimGetUserMedia(e),s.shimPeerConnection(e),s.shimOnTrack(e),s.shimRemoveStream(e),s.shimSenderGetStats(e),s.shimReceiverGetStats(e),s.shimRTCDataChannel(e),c.shimRTCIceCandidate(e),c.shimConnectionState(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e);break;case"edge":if(!o||!o.shimPeerConnection||!t.shimEdge)return i("MS edge shim is not included in this adapter release."),u;i("adapter.js shimming edge."),u.browserShim=o,o.shimGetUserMedia(e),o.shimGetDisplayMedia(e),o.shimPeerConnection(e),o.shimReplaceTrack(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e);break;case"safari":if(!a||!t.shimSafari)return i("Safari shim is not included in this adapter release."),u;i("adapter.js shimming safari."),u.browserShim=a,a.shimRTCIceServerUrls(e),a.shimCreateOfferLegacy(e),a.shimCallbacksAPI(e),a.shimLocalStreamsAPI(e),a.shimRemoteStreamsAPI(e),a.shimTrackEventTransceiver(e),a.shimGetUserMedia(e),c.shimRTCIceCandidate(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e),c.removeAllowExtmapMixed(e);break;default:i("Unsupported browser!")}return u};var n=l(e("./utils")),r=l(e("./chrome/chrome_shim")),o=l(e("./edge/edge_shim")),s=l(e("./firefox/firefox_shim")),a=l(e("./safari/safari_shim")),c=l(e("./common_shim"));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),i.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},i.shimOnTrack=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var i=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(n){var r;r=e.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find((function(e){return e.track&&e.track.id===n.track.id})):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],i.dispatchEvent(o)})),t.stream.getTracks().forEach((function(n){var r;r=e.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find((function(e){return e.track&&e.track.id===n.id})):{track:n};var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],i.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else s.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))},i.shimGetSendersWithDtmf=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var r=i.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var i=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){i._senders.push(t(i,e))}))};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],s.apply(this,[e]),e.getTracks().forEach((function(e){var i=t._senders.find((function(t){return t.track===e}));i&&t._senders.splice(t._senders.indexOf(i),1)}))}}else if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},i.shimGetStats=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,i,n){var r=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof arguments[0]))return t.apply(this,[]);var s=function(e){var t={};return e.result().forEach((function(e){var i={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){i[t]=e.stat(t)})),t[i.id]=i})),t},a=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){o[1](a(s(e)))};return t.apply(this,[c,arguments[0]])}return new Promise((function(e,i){t.apply(r,[function(t){e(a(s(t)))},i])})).then(i,n)}}},i.shimSenderReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i});var i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],i=void 0,n=void 0,r=void 0;return this.getSenders().forEach((function(e){e.track===t&&(i?r=!0:i=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(n?r=!0:n=e),e.track===t})),r||i&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}},i.shimAddTrackRemoveTrackWithNative=a,i.shimAddTrackRemoveTrack=function(e){if(e.RTCPeerConnection){var t=s.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return a(e);var i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=i.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var i=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(i.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}n.apply(this,[t])};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,i){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[i.id];if(o)o.addTrack(t),Promise.resolve().then((function(){n.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[i.id]=s,this._reverseStreams[s.id]=i,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var i=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(this,[function(i){var n=l(e,i);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):i.apply(this,arguments).then((function(t){return l(e,t)}))}}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=u(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=c.get.apply(this);return""===e.type?e:l(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var i=void 0;Object.keys(this._streams).forEach((function(n){t._streams[n].getTracks().find((function(t){return e.track===t}))&&(i=t._streams[n])})),i&&(1===i.getTracks().length?this.removeStream(this._reverseStreams[i.id]):i.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function l(e,t){var i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(r.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:i})}function u(e,t){var i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(n.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:i})}},i.shimPeerConnection=function(e){if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var i=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}}));var t=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},i.fixNegotiationNeeded=function(e){s.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){if("stable"===e.target.signalingState)return e}))};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../utils.js"));function a(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){if(!i)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[i.id]?-1===this._shimmedLocalStreams[i.id].indexOf(n)&&this._shimmedLocalStreams[i.id].push(n):this._shimmedLocalStreams[i.id]=[i,n],n};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var n=this.getSenders();i.apply(this,arguments);var r=this.getSenders().filter((function(e){return-1===n.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(r)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(i){var n=t._shimmedLocalStreams[i].indexOf(e);-1!==n&&t._shimmedLocalStreams[i].splice(n,1),1===t._shimmedLocalStreams[i].length&&delete t._shimmedLocalStreams[i]})),r.apply(this,arguments)}}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(i){return t(i).then((function(t){var n=i.video&&i.video.width,r=i.video&&i.video.height,o=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},n&&(i.video.mandatory.maxWidth=n),r&&(i.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(i)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices){var i=r.detectBrowser(e),s=function(e){if("object"!==(void 0===e?"undefined":n(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var r="object"===n(e[i])?e[i]:{ideal:e[i]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var s={};"number"==typeof r.ideal?(s[o("min",i)]=r.ideal,t.optional.push(s),(s={})[o("max",i)]=r.ideal,t.optional.push(s)):(s[o("",i)]=r.ideal,t.optional.push(s))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",i)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,i)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,r){if(i.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===n(e.audio)){var a=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=s(e.audio)}if(e&&"object"===n(e.video)){var c=e.video.facingMode;c=c&&("object"===(void 0===c?"undefined":n(c))?c:{ideal:c});var l=i.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||l)){delete e.video.facingMode;var u=void 0;if("environment"===c.exact||"environment"===c.ideal?u=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(u=["front"]),u)return t.mediaDevices.enumerateDevices().then((function(t){var i=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return u.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!i&&t.length&&u.includes("back")&&(i=t[t.length-1]),i&&(e.video.deviceId=c.exact?{exact:i.deviceId}:{ideal:i.deviceId}),e.video=s(e.video),o("chrome: "+JSON.stringify(e)),r(e)}))}e.video=s(e.video)}return o("chrome: "+JSON.stringify(e)),r(e)},c=function(e){return i.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,i,n){a(e,(function(e){t.webkitGetUserMedia(e,i,(function(e){n&&n(c(e))}))}))}.bind(t),t.mediaDevices.getUserMedia){var l=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return a(e,(function(e){return l(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(c(e))}))}))}}}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../utils.js")),o=r.log},{"../utils.js":15}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.shimRTCIceCandidate=function(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var i=new t(e),r=o.default.parseCandidate(e.candidate),s=Object.assign(i,r);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,s.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}},i.shimMaxMessageSize=function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var t=s.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var i=function(e){if(!e||!e.sdp)return!1;var t=o.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=o.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},n=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var i=parseInt(t[1],10);return i!=i?-1:i},r=function(e){var i=65536;return"firefox"===t.browser&&(i=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),i},a=function(e,i){var n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);var r=o.default.matchPrefix(e.sdp,"a=max-message-size:");return r.length>0?n=parseInt(r[0].substr(19),10):"firefox"===t.browser&&-1!==i&&(n=2147483637),n},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,i(arguments[0])){var e=n(arguments[0]),t=r(e),o=a(arguments[0],e),s=void 0;s=0===t&&0===o?Number.POSITIVE_INFINITY:0===t||0===o?Math.max(t,o):Math.min(t,o);var l={};Object.defineProperty(l,"maxMessageSize",{get:function(){return s}}),this._sctp=l}return c.apply(this,arguments)}}},i.shimSendThrowTypeError=function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return i(e,this),e},s.wrapPeerConnectionEvent(e,"datachannel",(function(e){return i(e.channel,e.target),e}))}function i(e,t){var i=e.send;e.send=function(){var n=arguments[0],r=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return i.apply(e,arguments)}}},i.shimConnectionState=function(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var i=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var i=new Event("connectionstatechange",e);t.dispatchEvent(i)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}}))}},i.removeAllowExtmapMixed=function(e){if(e.RTCPeerConnection){var t=s.detectBrowser(e);if(!("chrome"===t.browser&&t.version>=71)){var i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),i.apply(this,arguments)}}}};var r,o=(r=e("sdp"))&&r.__esModule?r:{default:r},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./utils"))},{"./utils":15,sdp:17}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var n=e("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}});var r=e("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}}),i.shimPeerConnection=function(e){var t=s.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var i=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){i.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var n=(0,c.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,a.filterIceServers)(e.iceServers,t.version),s.log("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype},i.shimReplaceTrack=function(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)};var o,s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../utils")),a=e("./filtericeservers"),c=(o=e("rtcpeerconnection-shim"))&&o.__esModule?o:{default:o}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.filterIceServers=function(e,t){var i=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&n.deprecated("RTCIceServer.url","RTCIceServer.urls");var r="string"==typeof t;return r&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!i?(i=!0,!0):t&&!i})),delete e.url,e.urls=r?t[0]:t,!!t.length}}))};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../utils"))},{"../utils":15}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=function(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}},{}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetUserMedia=function(e){var t=e&&e.navigator,i=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}},{}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),i.shimOnTrack=function(e){"object"===(void 0===e?"undefined":n(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},i.shimPeerConnection=function(e){var t=s.detectBrowser(e);if("object"===(void 0===e?"undefined":n(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var i=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}}));var i=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,i,n){return o.apply(this,[e||null]).then((function(e){if(t.version<53&&!i)try{e.forEach((function(e){e.type=r[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,i){e.set(i,Object.assign({},t,{type:r[t.type]||t.type}))}))}return e})).then(i,n)}}},i.shimSenderGetStats=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i});var i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},i.shimReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},i.shimRemoveStream=function(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;s.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(i){i.track&&e.getTracks().includes(i.track)&&t.removeTrack(i)}))})},i.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../utils"))},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){var n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return!0===i.video?i.video={mediaSource:t}:i.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(i)})}},{}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.shimGetUserMedia=function(e){var t=r.detectBrowser(e),i=e&&e.navigator,o=e&&e.MediaStreamTrack;if(i.getUserMedia=function(e,t,n){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){var s=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},a=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":n(e))&&"object"===n(e.audio)&&(e=JSON.parse(JSON.stringify(e)),s(e.audio,"autoGainControl","mozAutoGainControl"),s(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},o&&o.prototype.getSettings){var c=o.prototype.getSettings;o.prototype.getSettings=function(){var e=c.apply(this,arguments);return s(e,"mozAutoGainControl","autoGainControl"),s(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var l=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":n(e))&&(e=JSON.parse(JSON.stringify(e)),s(e,"autoGainControl","mozAutoGainControl"),s(e,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[e])}}}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../utils"))},{"../utils":15}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.shimLocalStreamsAPI=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var i=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getTracks().forEach((function(n){return t.call(i,n,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e,i){return i&&(this._localStreams?this._localStreams.includes(i)||this._localStreams.push(i):this._localStreams=[i]),t.call(this,e,i)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var i=this._localStreams.indexOf(e);if(-1!==i){this._localStreams.splice(i,1);var n=e.getTracks();this.getSenders().forEach((function(e){n.includes(e.track)&&t.removeTrack(e)}))}})}},i.shimRemoteStreamsAPI=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var i=new Event("addstream");i.stream=e,t.dispatchEvent(i)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var i=new Event("addstream");i.stream=t,e.dispatchEvent(i)}}))}),t.apply(e,arguments)}}},i.shimCallbacksAPI=function(e){if("object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,i=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,s=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){var i=arguments.length>=2?arguments[2]:arguments[0],n=r.apply(this,[i]);return t?(n.then(e,t),Promise.resolve()):n};var c=function(e,t,i){var n=o.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n};t.setLocalDescription=c,c=function(e,t,i){var n=s.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.setRemoteDescription=c,c=function(e,t,i){var n=a.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.addIceCandidate=c}},i.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var i=t.mediaDevices,n=i.getUserMedia.bind(i);t.mediaDevices.getUserMedia=function(e){return n(o(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,i,n){t.mediaDevices.getUserMedia(e).then(i,n)}.bind(t))},i.shimConstraints=o,i.shimRTCIceServerUrls=function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){for(var n=[],o=0;o<e.iceServers.length;o++){var s=e.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,n.push(s)):n.push(e.iceServers[o])}e.iceServers=n}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},i.shimTrackEventTransceiver=function(e){"object"===(void 0===e?"undefined":n(e))&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},i.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var i=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveAudio||i||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../utils"));function o(e){return e&&void 0!==e.video?Object.assign({},e,{video:r.compactObject(e.video)}):e}},{"../utils":15}],15:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.extractVersion=s,i.wrapPeerConnectionEvent=function(e,t,i){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,r=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return r.apply(this,arguments);var o=function(e){var t=i(e);t&&n(t)};return this._eventMap=this._eventMap||{},this._eventMap[n]=o,r.apply(this,[e,o])};var o=n.removeEventListener;n.removeEventListener=function(e,i){if(e!==t||!this._eventMap||!this._eventMap[i])return o.apply(this,arguments);var n=this._eventMap[i];return delete this._eventMap[i],o.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},i.disableLog=function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":n(e))+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},i.disableWarnings=function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":n(e))+". Please use a boolean."):(o=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},i.log=function(){if("object"===("undefined"==typeof window?"undefined":n(window))){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},i.deprecated=function(e,t){o&&console.warn(e+" is deprecated, please use "+t+" instead.")},i.detectBrowser=function(e){var t=e.navigator,i={browser:null,version:null};if(void 0===e||!e.navigator)return i.browser="Not a browser.",i;if(t.mozGetUserMedia)i.browser="firefox",i.version=s(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)i.browser="chrome",i.version=s(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))i.browser="edge",i.version=s(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return i.browser="Not a supported browser.",i;i.browser="safari",i.version=s(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return i},i.compactObject=function e(t){return"object"!==(void 0===t?"undefined":n(t))?t:Object.keys(t).reduce((function(i,r){var o="object"===n(t[r]),s=o?e(t[r]):t[r],a=o&&!Object.keys(s).length;return void 0===s||a?i:Object.assign(i,function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},r,s))}),{})},i.walkStats=a,i.filterStats=function(e,t,i){var n=i?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(i){i.type===n&&i.trackId===t.id&&a(e,i,r)}))})),r};var r=!0,o=!0;function s(e,t,i){var n=e.match(t);return n&&n.length>=i&&parseInt(n[i],10)}function a(e,t,i){t&&!i.has(t.id)&&(i.set(t.id,t),Object.keys(t).forEach((function(n){n.endsWith("Id")?a(e,e.get(t[n]),i):n.endsWith("Ids")&&t[n].forEach((function(t){a(e,e.get(t),i)}))})))}},{}],16:[function(e,t,i){"use strict";var n=e("sdp");function r(e,t,i,r,o){var s=n.writeRtpDescription(e.kind,t);if(s+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":o||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(r?r.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),s}function o(e,t){var i={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var i=0;i<t.length;i++)if(t[i].payloadType===e||t[i].preferredPayloadType===e)return t[i]},r=function(e,t,i,r){var o=n(e.parameters.apt,i),s=n(t.parameters.apt,r);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(n){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.clockRate===s.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.apt&&!r(n,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(n.numChannels,s.numChannels),i.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var r=t.headerExtensions[n];if(e.uri===r.uri){i.headerExtensions.push(r);break}}})),i}function s(e,t,i){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(i)}function a(e,t){var i=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return i||e.addRemoteCandidate(t),!i}function c(e,t){var i=new Error(t);return i.name=e,i.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],i}t.exports=function(e,t){function i(t,i){i.addTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function l(t,i,n,r){var o=new Event("track");o.track=i,o.receiver=n,o.transceiver={receiver:n},o.streams=r,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var u=function(i){var r=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){r[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",i=JSON.parse(JSON.stringify(i||{})),this.usingBundle="max-bundle"===i.bundlePolicy,"negotiate"===i.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(i.rtcpMuxPolicy||(i.rtcpMuxPolicy="require"),i.iceTransportPolicy){case"all":case"relay":break;default:i.iceTransportPolicy="all"}switch(i.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:i.bundlePolicy="balanced"}if(i.iceServers=function(e,t){var i=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var r="string"==typeof n;return r&&(n=[n]),n=n.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||i?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(i=!0,!0)})),delete e.url,e.urls=r?n[0]:n,!!n.length}}))}(i.iceServers||[],t),this._iceGatherers=[],i.iceCandidatePoolSize)for(var s=i.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:i.iceServers,gatherPolicy:i.iceTransportPolicy}));else i.iceCandidatePoolSize=0;this._config=i,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(u.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(u.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),u.prototype.onicecandidate=null,u.prototype.onaddstream=null,u.prototype.ontrack=null,u.prototype.onremovestream=null,u.prototype.onsignalingstatechange=null,u.prototype.oniceconnectionstatechange=null,u.prototype.onconnectionstatechange=null,u.prototype.onicegatheringstatechange=null,u.prototype.onnegotiationneeded=null,u.prototype.ondatachannel=null,u.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},u.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},u.prototype.getConfiguration=function(){return this._config},u.prototype.getLocalStreams=function(){return this.localStreams},u.prototype.getRemoteStreams=function(){return this.remoteStreams},u.prototype._createTransceiver=function(e,t){var i=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&i)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var r=this._createIceAndDtlsTransports();n.iceTransport=r.iceTransport,n.dtlsTransport=r.dtlsTransport}return t||this.transceivers.push(n),n},u.prototype.addTrack=function(t,i){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==t.kind||(n=this.transceivers[r]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(i)&&this.localStreams.push(i),n.track=t,n.stream=i,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},u.prototype.addStream=function(e){var i=this;if(t>=15025)e.getTracks().forEach((function(t){i.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var i=n.getTracks()[t];e.addEventListener("enabled",(function(e){i.enabled=e.enabled}))})),n.getTracks().forEach((function(e){i.addTrack(e,n)}))}},u.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var i=this.transceivers.find((function(e){return e.rtpSender===t}));if(!i)throw c("InvalidAccessError","Sender was not created by this connection.");var n=i.stream;i.rtpSender.stop(),i.rtpSender=null,i.track=null,i.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},u.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var i=t.getSenders().find((function(t){return t.track===e}));i&&t.removeTrack(i)}))},u.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},u.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},u.prototype._createIceGatherer=function(t,i){var n=this;if(i&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var r=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(r,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var i=!e.candidate||0===Object.keys(e.candidate).length;r.state=i?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},r.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),r},u.prototype._gather=function(t,i){var r=this,o=this.transceivers[i].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[i].bufferedCandidateEvents;this.transceivers[i].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[i].bufferCandidates),o.onlocalcandidate=function(e){if(!(r.usingBundle&&i>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:i};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),a.component=1,a.ufrag=o.getLocalParameters().usernameFragment;var l=n.writeCandidate(a);s.candidate=Object.assign(s.candidate,n.parseCandidate(l)),s.candidate.candidate=l,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var u=n.getMediaSections(r._localDescription.sdp);u[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",r._localDescription.sdp=n.getDescription(r._localDescription.sdp)+u.join("");var d=r.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),c||r._dispatchEvent("icecandidate",s),d&&(r._dispatchEvent("icecandidate",new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},u.prototype._createIceAndDtlsTransports=function(){var t=this,i=new e.RTCIceTransport(null);i.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(i);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:i,dtlsTransport:n}},u.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var i=this.transceivers[e].iceTransport;i&&(delete i.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},u.prototype._transceive=function(e,i,r){var s=o(e.localCapabilities,e.remoteCapabilities);i&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:n.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),r&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},u.prototype.setLocalDescription=function(e){var t,i,r=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,r.signalingState)||r._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+r.signalingState));if("offer"===e.type)t=n.splitSections(e.sdp),i=t.shift(),t.forEach((function(e,t){var i=n.parseRtpParameters(e);r.transceivers[t].localCapabilities=i})),r.transceivers.forEach((function(e,t){r._gather(e.mid,t)}));else if("answer"===e.type){t=n.splitSections(r._remoteDescription.sdp),i=t.shift();var a=n.matchPrefix(i,"a=ice-lite").length>0;t.forEach((function(e,t){var s=r.transceivers[t],c=s.iceGatherer,l=s.iceTransport,u=s.dtlsTransport,d=s.localCapabilities,h=s.remoteCapabilities;if(!(n.isRejected(e)&&0===n.matchPrefix(e,"a=bundle-only").length||s.rejected)){var p=n.getIceParameters(e,i),f=n.getDtlsParameters(e,i);a&&(f.role="server"),r.usingBundle&&0!==t||(r._gather(s.mid,t),"new"===l.state&&l.start(c,p,a?"controlling":"controlled"),"new"===u.state&&u.start(f));var g=o(d,h);r._transceive(s,g.codecs.length>0,!1)}}))}return r._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?r._updateSignalingState("have-local-offer"):r._updateSignalingState("stable"),Promise.resolve()},u.prototype.setRemoteDescription=function(r){var u=this;if(-1===["offer","answer"].indexOf(r.type))return Promise.reject(c("TypeError",'Unsupported type "'+r.type+'"'));if(!s("setRemoteDescription",r.type,u.signalingState)||u._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+r.type+" in state "+u.signalingState));var d={};u.remoteStreams.forEach((function(e){d[e.id]=e}));var h=[],p=n.splitSections(r.sdp),f=p.shift(),g=n.matchPrefix(f,"a=ice-lite").length>0,m=n.matchPrefix(f,"a=group:BUNDLE ").length>0;u.usingBundle=m;var _=n.matchPrefix(f,"a=ice-options:")[0];return u.canTrickleIceCandidates=!!_&&_.substr(14).split(" ").indexOf("trickle")>=0,p.forEach((function(s,c){var l=n.splitLines(s),p=n.getKind(s),_=n.isRejected(s)&&0===n.matchPrefix(s,"a=bundle-only").length,v=l[0].substr(2).split(" ")[2],E=n.getDirection(s,f),A=n.parseMsid(s),y=n.getMid(s)||n.generateIdentifier();if(_||"application"===p&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))u.transceivers[c]={mid:y,kind:p,protocol:v,rejected:!0};else{var S,C,b,T,I,R,w,O,k;!_&&u.transceivers[c]&&u.transceivers[c].rejected&&(u.transceivers[c]=u._createTransceiver(p,!0));var N,L,P=n.parseRtpParameters(s);_||(N=n.getIceParameters(s,f),(L=n.getDtlsParameters(s,f)).role="client"),w=n.parseRtpEncodingParameters(s);var D=n.parseRtcpParameters(s),M=n.matchPrefix(s,"a=end-of-candidates",f).length>0,x=n.matchPrefix(s,"a=candidate:").map((function(e){return n.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===r.type||"answer"===r.type)&&!_&&m&&c>0&&u.transceivers[c]&&(u._disposeIceAndDtlsTransports(c),u.transceivers[c].iceGatherer=u.transceivers[0].iceGatherer,u.transceivers[c].iceTransport=u.transceivers[0].iceTransport,u.transceivers[c].dtlsTransport=u.transceivers[0].dtlsTransport,u.transceivers[c].rtpSender&&u.transceivers[c].rtpSender.setTransport(u.transceivers[0].dtlsTransport),u.transceivers[c].rtpReceiver&&u.transceivers[c].rtpReceiver.setTransport(u.transceivers[0].dtlsTransport)),"offer"!==r.type||_)"answer"!==r.type||_||(C=(S=u.transceivers[c]).iceGatherer,b=S.iceTransport,T=S.dtlsTransport,I=S.rtpReceiver,R=S.sendEncodingParameters,O=S.localCapabilities,u.transceivers[c].recvEncodingParameters=w,u.transceivers[c].remoteCapabilities=P,u.transceivers[c].rtcpParameters=D,x.length&&"new"===b.state&&(!g&&!M||m&&0!==c?x.forEach((function(e){a(S.iceTransport,e)})):b.setRemoteCandidates(x)),m&&0!==c||("new"===b.state&&b.start(C,N,"controlling"),"new"===T.state&&T.start(L)),!o(S.localCapabilities,S.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&S.sendEncodingParameters[0].rtx&&delete S.sendEncodingParameters[0].rtx,u._transceive(S,"sendrecv"===E||"recvonly"===E,"sendrecv"===E||"sendonly"===E),!I||"sendrecv"!==E&&"sendonly"!==E?delete S.rtpReceiver:(k=I.track,A?(d[A.stream]||(d[A.stream]=new e.MediaStream),i(k,d[A.stream]),h.push([k,I,d[A.stream]])):(d.default||(d.default=new e.MediaStream),i(k,d.default),h.push([k,I,d.default]))));else{(S=u.transceivers[c]||u._createTransceiver(p)).mid=y,S.iceGatherer||(S.iceGatherer=u._createIceGatherer(c,m)),x.length&&"new"===S.iceTransport.state&&(!M||m&&0!==c?x.forEach((function(e){a(S.iceTransport,e)})):S.iceTransport.setRemoteCandidates(x)),O=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(O.codecs=O.codecs.filter((function(e){return"rtx"!==e.name}))),R=S.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var B,U=!1;"sendrecv"===E||"sendonly"===E?(U=!S.rtpReceiver,I=S.rtpReceiver||new e.RTCRtpReceiver(S.dtlsTransport,p),U&&(k=I.track,A&&"-"===A.stream||(A?(d[A.stream]||(d[A.stream]=new e.MediaStream,Object.defineProperty(d[A.stream],"id",{get:function(){return A.stream}})),Object.defineProperty(k,"id",{get:function(){return A.track}}),B=d[A.stream]):(d.default||(d.default=new e.MediaStream),B=d.default)),B&&(i(k,B),S.associatedRemoteMediaStreams.push(B)),h.push([k,I,B]))):S.rtpReceiver&&S.rtpReceiver.track&&(S.associatedRemoteMediaStreams.forEach((function(t){var i=t.getTracks().find((function(e){return e.id===S.rtpReceiver.track.id}));i&&function(t,i){i.removeTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(i,t)})),S.associatedRemoteMediaStreams=[]),S.localCapabilities=O,S.remoteCapabilities=P,S.rtpReceiver=I,S.rtcpParameters=D,S.sendEncodingParameters=R,S.recvEncodingParameters=w,u._transceive(u.transceivers[c],!1,U)}}})),void 0===u._dtlsRole&&(u._dtlsRole="offer"===r.type?"active":"passive"),u._remoteDescription={type:r.type,sdp:r.sdp},"offer"===r.type?u._updateSignalingState("have-remote-offer"):u._updateSignalingState("stable"),Object.keys(d).forEach((function(t){var i=d[t];if(i.getTracks().length){if(-1===u.remoteStreams.indexOf(i)){u.remoteStreams.push(i);var n=new Event("addstream");n.stream=i,e.setTimeout((function(){u._dispatchEvent("addstream",n)}))}h.forEach((function(e){var t=e[0],n=e[1];i.id===e[2].id&&l(u,t,n,[i])}))}})),h.forEach((function(e){e[2]||l(u,e[0],e[1],[])})),e.setTimeout((function(){u&&u.transceivers&&u.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},u.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},u.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},u.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},u.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var i=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",i)}},u.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var i=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",i)}},u.prototype.createOffer=function(){var i=this;if(i._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=i.transceivers.filter((function(e){return"audio"===e.kind})).length,s=i.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(o=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(i.transceivers.forEach((function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)}));o>0||s>0;)o>0&&(i._createTransceiver("audio"),o--),s>0&&(i._createTransceiver("video"),s--);var l=n.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.transceivers.forEach((function(r,o){var s=r.track,a=r.kind,c=r.mid||n.generateIdentifier();r.mid=c,r.iceGatherer||(r.iceGatherer=i._createIceGatherer(o,i.usingBundle));var l=e.RTCRtpSender.getCapabilities(a);t<15019&&(l.codecs=l.codecs.filter((function(e){return"rtx"!==e.name}))),l.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),l.headerExtensions.forEach((function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var u=r.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&t>=15019&&"video"===a&&!u[0].rtx&&(u[0].rtx={ssrc:u[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new e.RTCRtpReceiver(r.dtlsTransport,a)),r.localCapabilities=l,r.sendEncodingParameters=u})),"max-compat"!==i._config.bundlePolicy&&(l+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),l+="a=ice-options:trickle\r\n",i.transceivers.forEach((function(e,t){l+=r(e,e.localCapabilities,"offer",e.stream,i._dtlsRole),l+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===i.iceGatheringState||0!==t&&i.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,l+="a="+n.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(l+="a=end-of-candidates\r\n"))}));var u=new e.RTCSessionDescription({type:"offer",sdp:l});return Promise.resolve(u)},u.prototype.createAnswer=function(){var i=this;if(i._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==i.signalingState&&"have-local-pranswer"!==i.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+i.signalingState));var s=n.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.usingBundle&&(s+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=n.getMediaSections(i._remoteDescription.sdp).length;i.transceivers.forEach((function(e,n){if(!(n+1>a)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?s+="m=application 0 DTLS/SCTP 5000\r\n":s+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var l=o(e.localCapabilities,e.remoteCapabilities);!l.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=r(e,l,"answer",e.stream,i._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}}));var l=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(l)},u.prototype.addIceCandidate=function(e){var t,i=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(r,o){if(!i._remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var l=0;l<i.transceivers.length;l++)if(i.transceivers[l].mid===e.sdpMid){s=l;break}var u=i.transceivers[s];if(!u)return o(c("OperationError","Can not add ICE candidate"));if(u.rejected)return r();var d=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return r();if(d.component&&1!==d.component)return r();if((0===s||s>0&&u.iceTransport!==i.transceivers[0].iceTransport)&&!a(u.iceTransport,d))return o(c("OperationError","Can not add ICE candidate"));var h=e.candidate.trim();0===h.indexOf("a=")&&(h=h.substr(2)),(t=n.getMediaSections(i._remoteDescription.sdp))[s]+="a="+(d.type?h:"end-of-candidates")+"\r\n",i._remoteDescription.sdp=n.getDescription(i._remoteDescription.sdp)+t.join("")}else for(var p=0;p<i.transceivers.length&&(i.transceivers[p].rejected||(i.transceivers[p].iceTransport.addRemoteCandidate({}),(t=n.getMediaSections(i._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",i._remoteDescription.sdp=n.getDescription(i._remoteDescription.sdp)+t.join(""),!i.usingBundle));p++);r()}))},u.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var i=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?i=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(i=e.rtpReceiver)})),!i)throw c("InvalidAccessError","Invalid selector.");return i.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var i=e[t];if(i&&i.prototype&&i.prototype.getStats){var n=i.prototype.getStats;i.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(i){var n;e[i].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[i]).type]||n.type,t.set(i,e[i])})),t}))}}}));var d=["createOffer","createAnswer"];return d.forEach((function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),u}},{sdp:17}],17:[function(e,t,i){"use strict";var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},n.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},n.getDescription=function(e){var t=n.splitSections(e);return t&&t[0]},n.getMediaSections=function(e){var t=n.splitSections(e);return t.shift(),t},n.matchPrefix=function(e,t){return n.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},n.parseCandidate=function(e){for(var t,i={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":i.relatedAddress=t[n+1];break;case"rport":i.relatedPort=parseInt(t[n+1],10);break;case"tcptype":i.tcpType=t[n+1];break;case"ufrag":i.ufrag=t[n+1],i.usernameFragment=t[n+1];break;default:i[t[n]]=t[n+1]}return i},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),i={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.channels=3===t.length?parseInt(t[2],10):1,i.numChannels=i.channels,i},n.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var i=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==i?"/"+i:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,i={},n=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<n.length;r++)i[(t=n[r].trim().split("="))[0].trim()]=t[1];return i},n.writeFmtp=function(e){var t="",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)})),t+="a=fmtp:"+i+" "+n.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+i+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),i={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(i.attribute=e.substr(t+1,n-t-1),i.value=e.substr(n+1)):i.attribute=e.substr(t+1),i},n.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:n.matchPrefix(e+t,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var i="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){i+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),i},n.getIceParameters=function(e,t){var i=n.splitLines(e);return{usernameFragment:(i=i.concat(n.splitLines(t))).filter((function(e){return 0===e.indexOf("a=ice-ufrag:")}))[0].substr(12),password:i.filter((function(e){return 0===e.indexOf("a=ice-pwd:")}))[0].substr(10)}},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=n.splitLines(e)[0].split(" "),r=3;r<i.length;r++){var o=i[r],s=n.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=n.parseRtpMap(s),c=n.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?n.parseFmtp(c[0]):{},a.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(n.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(n.parseExtmap(e))})),t},n.writeRtpDescription=function(e,t){var i="";i+="m="+e+" ",i+=t.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){i+=n.writeRtpMap(e),i+=n.writeFmtp(e),i+=n.writeRtcpFb(e)}));var r=0;return t.codecs.forEach((function(e){e.maxptime>r&&(r=e.maxptime)})),r>0&&(i+="a=maxptime:"+r+"\r\n"),i+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){i+=n.writeExtmap(e)})),i},n.parseRtpEncodingParameters=function(e){var t,i=[],r=n.parseRtpParameters(e),o=-1!==r.fecMechanisms.indexOf("RED"),s=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,l=n.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));l.length>0&&l[0].length>1&&l[0][0]===c&&(t=l[0][1]),r.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(n.rtx={ssrc:t}),i.push(n),o&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},i.push(n))}})),0===i.length&&c&&i.push({ssrc:c});var u=n.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,i.forEach((function(e){e.maxBitrate=u}))),i},n.parseRtcpParameters=function(e){var t={},i=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];i&&(t.cname=i.value,t.ssrc=i.ssrc);var r=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=r.length>0,t.compound=0===r.length;var o=n.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},n.parseMsid=function(e){var t,i=n.matchPrefix(e,"a=msid:");if(1===i.length)return{stream:(t=i[0].substr(7).split(" "))[0],track:t[1]};var r=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return r.length>0?{stream:(t=r[0].value.split(" "))[0],track:t[1]}:void 0},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t,i){var r=void 0!==t?t:2;return"v=0\r\no="+(i||"thisisadapterortc")+" "+(e||n.generateSessionId())+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,i,r){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o},n.getDirection=function(e,t){for(var i=n.splitLines(e),r=0;r<i.length;r++)switch(i[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[r].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){return n.splitLines(e)[0].split(" ")[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},n.parseOLine=function(e){var t=n.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},n.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=n.splitLines(e),i=0;i<t.length;i++)if(t[i].length<2||"="!==t[i].charAt(1))return!1;return!0},"object"==typeof t&&(t.exports=n)},{}]},{},[1])(1)},9869:function(e){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=39)}({16:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_RTM_ACTION=void 0,function(e){e.LIVE_SEND_SIGNAL="zm.lv.ssg",e.LIVE_RESPOND_JOIN_LIVE="zm.lv.rjl",e.LIVE_PUSH_SIGNAL="zm.lv.pss",e.SERVICE_PUSH="zm.sv.ps",e.SERVICE_SEND="zm.sv.sd"}(t.ZEGO_RTM_ACTION||(t.ZEGO_RTM_ACTION={}))},17:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"}}},39:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(40);t.default={type:"live",install:function(e,t,i){for(var r in n.rtmPros)Object.defineProperty(e.prototype,r,{value:n.rtmPros[r],writable:!1});for(var r in n.servicePros)Object.defineProperty(i.prototype,r,{value:n.servicePros[r],writable:!1});for(var r in n.modulePros)Object.defineProperty(t.prototype,r,{value:n.modulePros[r],writable:!1})}}},40:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modulePros=t.servicePros=t.rtmPros=void 0;var n=i(16),r=i(17),o=i(41);t.rtmPros={requestJoinLive:function(e,t,i,n,o){var s=this.getRoomModules(o)||this.stateCenter.roomModulesList[0];return s?s.liveHandler.requestJoinLive(e,t,i,n):(i&&i(r.errorCodeList.ROOM_NOT_EXIST,0),!1)},inviteJoinLive:function(e,t,i,n,o){var s=this.getRoomModules(o)||this.stateCenter.roomModulesList[0];return s?s.liveHandler.inviteJoinLive(e,t,i,n):(i&&i(r.errorCodeList.ROOM_NOT_EXIST,0),!1)},endJoinLive:function(e,t,i,n){var o=this.getRoomModules(n)||this.stateCenter.roomModulesList[0];return o?o.liveHandler.endJoinLive(e,t,i):(i&&i(r.errorCodeList.ROOM_NOT_EXIST,0),!1)},respondJoinLive:function(e,t,i,n,o){var s=this.getRoomModules(o)||this.stateCenter.roomModulesList[0];return s?s.liveHandler.respondJoinLive(e,t,i,n):(n&&n(r.errorCodeList.ROOM_NOT_EXIST,0),!1)}},t.servicePros={handlePushSignalMsg:function(e){var t,i=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,r=this.stateCenter.roomModulesList.find((function(e){return e.roomID==i}));r?r.liveHandler.handlePushSignalMsg(e):this.logger.error(n.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}},t.modulePros={initLiveHandler:function(){this.liveHandler=new o.LiveHandler(this.logger,this.stateCenter,this.service,this.rtm,this)}}},41:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveHandler=void 0;var n=i(42),r=i(16),o=i(17),s=function(){function e(e,t,i,n,r){this.logger=e,this.stateCenter=t,this.service=i,this.rtm=n,this.room=r,this.joinLiveCallbackMap={},this.joinLiveRequestMap={}}return e.prototype.resetLiveHandler=function(){this.joinLiveCallbackMap={},this.joinLiveRequestMap={}},e.prototype.getSignalCmdContent=function(e,t,i){var n={request_id:e,room_id:this.room.roomID,from_userid:this.stateCenter.idName,from_username:this.stateCenter.nickName,to_userid:t};return null!=i&&(n.result=i),JSON.stringify(n)},e.prototype.requestJoinLive=function(e,t,i,r){var o=this.stateCenter.getRequestId(),s=this.getSignalCmdContent(o,e);return null!=r&&(this.joinLiveCallbackMap[o]=r,this.sendSignalCmd(n.ENUM_SIGNAL_SUB_CMD.joinLiveRequest,s,e,t,i),!0)},e.prototype.sendSignalCmd=function(e,t,i,n,s){var a=this;if(this.room.isLogin()){var c={sub_cmd:e,signal_msg:t,dest_id_name:[i]};this.service.sendSignalCmd(c,(function(e){n&&n(e.header.seq)}),(function(e){var t=o.errorCodeList.ROOM_INNER_ERROR;if(!e.header||!e.body)return e.code&&e.msg&&(t=e),void(s&&s(t,0));s&&s(a.rtm.getServerError(e.body.err_code),e.header.seq)}),this.room.sessionID,this.room.roomID,this.room.roomSessionID),this.logger.info(r.ZEGO_RTM_ACTION.LIVE_SEND_SIGNAL+" call success"+e)}else this.logger.error(r.ZEGO_RTM_ACTION.LIVE_SEND_SIGNAL+" state error")},e.prototype.inviteJoinLive=function(e,t,i,r){var o=this.stateCenter.getRequestId(),s=this.getSignalCmdContent(o,e);return null!=r&&(this.joinLiveCallbackMap[o]=r,this.sendSignalCmd(n.ENUM_SIGNAL_SUB_CMD.joinLiveInvite,s,e,t,i),!0)},e.prototype.endJoinLive=function(e,t,i){var r=this.stateCenter.getRequestId(),o=this.getSignalCmdContent(r,e);return this.sendSignalCmd(n.ENUM_SIGNAL_SUB_CMD.joinLiveStop,o,e,t,i),!0},e.prototype.respondJoinLive=function(e,t,i,o){var s=this.joinLiveRequestMap[e];if(!s)return this.logger.info(r.ZEGO_RTM_ACTION.LIVE_RESPOND_JOIN_LIVE+" no dest id name"),!1;var a=0;!0===t&&(a=1);var c=this.getSignalCmdContent(e,s,a);return this.sendSignalCmd(n.ENUM_SIGNAL_SUB_CMD.joinLiveResult,c,s,i,o),delete this.joinLiveRequestMap[e],!0},e.prototype.handlePushSignalMsg=function(e){var t=JSON.parse(e.body.signal_msg);switch(this.logger.info(r.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" hpsm= ",t),e.body.sub_cmd){case n.ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveRequest:this.handlePushJoinLiveRequestMsg(t);break;case n.ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveResult:this.handlePushJoinLiveResultMsg(t);break;case n.ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveInvite:this.handlePushJoinLiveInviteMsg(t);break;case n.ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveStop:this.handlePushJoinLiveStopMsg(t)}},e.prototype.handlePushJoinLiveRequestMsg=function(e){var t=e.request_id;if("string"==typeof t){var i=e.from_userid;"string"==typeof i?(this.joinLiveRequestMap[t]=i,this.onRecvJoinLiveRequest(t,e.from_userid,e.from_username,e.room_id),this.logger.info(r.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" onRecvJoinLiveRequest "+i)):this.logger.error(r.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" no from user")}else this.logger.error(r.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" no requestId")},e.prototype.onRecvJoinLiveRequest=function(e,t,i,n){this.stateCenter.actionListener("recvJoinLiveRequest",e,t,i,n)},e.prototype.handlePushJoinLiveInviteMsg=function(e){var t=e.request_id;if("string"==typeof t){var i=e.from_userid;"string"==typeof i?(this.joinLiveRequestMap[t]=i,this.onRecvInviteJoinLiveRequest(t,e.from_userid,e.from_username,e.room_id),this.logger.info(r.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" onRecvInviteJoinLiveRequest "+i)):this.logger.error(r.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" no from user")}else this.logger.error(r.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+"no requestId")},e.prototype.onRecvInviteJoinLiveRequest=function(e,t,i,n){this.stateCenter.actionListener("recvInviteJoinLiveRequest",e,t,i,n)},e.prototype.handlePushJoinLiveResultMsg=function(e){var t=e.request_id;if("string"==typeof t){var i=e.result;if(null!=i){var n=1==i;if(this.joinLiveCallbackMap[t]){var o=this.joinLiveCallbackMap[t];if(!o)return void this.logger.info(r.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" no callback");this.logger.info(r.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" joinLiveRequest/invite result "+n),delete this.joinLiveCallbackMap[t],o(n,e.from_userid,e.from_username)}}else this.logger.info(r.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" no result")}else this.logger.error(r.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" no requestId")},e.prototype.handlePushJoinLiveStopMsg=function(e){var t=e.request_id;"string"==typeof t?(this.logger.info(r.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" onRecvEndJoinLiveCommand "+e.from_userid),this.onRecvEndJoinLiveCommand(t,e.from_userid,e.from_username,e.room_id)):this.logger.error(r.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" no requestId")},e.prototype.onRecvEndJoinLiveCommand=function(e,t,i,n){this.stateCenter.actionListener("recvEndJoinLiveCommand",e,t,i,n)},e}();t.LiveHandler=s},42:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENUM_PUSH_SIGNAL_SUB_CMD=t.ENUM_SIGNAL_SUB_CMD=void 0,t.ENUM_SIGNAL_SUB_CMD={none:0,joinLiveRequest:1001,joinLiveResult:1002,joinLiveInvite:1003,joinLiveStop:1004},t.ENUM_PUSH_SIGNAL_SUB_CMD={none:0,pushJoinLiveRequest:11001,pushJoinLiveResult:11002,pushJoinLiveInvite:11003,pushJoinLiveStop:11004}}})},3126:function(e){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=36)}({13:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_RTM_ACTION=void 0,function(e){e.ZEGOEXPRESSWEBRTM_SEND_CUSTOM="zm.scc",e.ZEGOEXPRESSWEBRTM_SEND_BCM="zm.sbcm",e.ZEGOEXPRESSWEBRTM_SEND_RLM="zm.srlm",e.ZEGOEXPRESSWEBRTM_SEND_BRM="zm.sbrm",e.ZEGOEXPRESSWEBRTM_SEND_RAM="zm.sram",e.MESSAGE_SEND_RELIABLE="zm.msg.sdr",e.MESSAGE_FETCH_RELIABLE="zm.msg.frm",e.MESSAGE_RELIABLE_RSP="zm.msg.rlr",e.MESSAGE_RELIABLE_PUSH="zm.msg.rps",e.MESSAGE_SEND_ROOM_MSG="zm.msg.srm",e.MESSAGE_SEND_CUSTOM_MSG="zm.msg.scm",e.MESSAGE_SEND_BIG_MSG="zm.msg.sbm",e.MESSAGE_BIG_MSG_PUSH="zm.msg.bps",e.MESSAGE_SEND_RELAY_MSG="zm.msg.slm",e.SERVICE_PUSH="zm.sv.ps"}(t.ZEGO_RTM_ACTION||(t.ZEGO_RTM_ACTION={}))},14:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTMLogEvent=void 0;var n=i(8),r=function(e){return e};t.ZegoRTMLogEvent={kZegoTaskLiveSendRoomBigIM:{event:"/liveroom/send_big_room_message",room_sid:r,error:{INPUT_PARAM:n.errorCodeList.INPUT_PARAM,IM_CONTENT_NULL:n.errorCodeList.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:n.errorCodeList.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:n.errorCodeList.ROOM_NOT_EXIST}},kZegoTaskLiveRoomSendCustomCommand:{event:"/liveroom/send_custom_command",room_sid:r,error:{INPUT_PARAM:n.errorCodeList.INPUT_PARAM,IM_CONTENT_NULL:n.errorCodeList.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:n.errorCodeList.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:n.errorCodeList.ROOM_NOT_EXIST}},kZegoTaskLiveRoomSendRoomMessage:{event:"/liveroom/send_room_message",room_sid:r,error:{INPUT_PARAM:n.errorCodeList.INPUT_PARAM,IM_CONTENT_NULL:n.errorCodeList.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:n.errorCodeList.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:n.errorCodeList.ROOM_NOT_EXIST}},kZegoTaskLiveRoomSendReliableMessage:{event:"/liveroom/send_reliable_message",room_sid:r,error:{INPUT_PARAM:n.errorCodeList.INPUT_PARAM,TRANS_FREQUENTLY:n.errorCodeList.TRANS_FREQUENTLY,ROOM_NOT_EXIST:n.errorCodeList.ROOM_NOT_EXIST}},kZegoTaskLiveGetRoomBigIM:{event:"/liveroom/get_big_room_message"},kZegoTaskLiveRoomGetRoomMessage:{event:"/liveroom/get_room_message",room_sid:r},kZegoTaskLiveRoomGetCustomCommand:{event:"/liveroom/get_custom_command"}}},15:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_MESSAGE_LENGTH=t.MAX_TRANS_DATA_LENGTH=t.MAX_TRANS_TYPE_LENGTH=t.ERROR_CODES=void 0,t.ERROR_CODES={FETCH_TRANS_UNKNOWN_CHANNEL:1000001108,FETCH_TRANS_UNKNOWN_TYPE:1000001109,FETCH_TRANS_WRONG_SEQ:1000001110},t.MAX_TRANS_TYPE_LENGTH=128,t.MAX_TRANS_DATA_LENGTH=4096,t.MAX_MESSAGE_LENGTH=1024},36:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(37);t.default={type:"message",install:function(e,t,i,r,o){for(var s in n.rtmPros)Object.defineProperty(e.prototype,s,{value:n.rtmPros[s],writable:!1});for(var s in n.servicePros)Object.defineProperty(i.prototype,s,{value:n.servicePros[s],writable:!1}),Object.defineProperty(o.prototype,s,{value:n.servicePros[s],writable:!1});for(var s in n.modulePros)Object.defineProperty(t.prototype,s,{value:n.modulePros[s],writable:!1}),Object.defineProperty(r.prototype,s,{value:n.modulePros[s],writable:!1})}}},37:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modulePros=t.initMessageHandler=t.servicePros=t.handleBigImMsgRsp=t.handlePushTransMsg=t.handlePushMergeMsg=t.handlePushCustomMsg=t.handlePushRoomMsg=t.rtmPros=void 0;var n=i(13),r=i(14),o=i(15),s=i(38),a=i(8);function c(e,t,i,s){var a=this;return void 0===i&&(i=1),void 0===s&&(s=1),new Promise((function(c,l){var u=a.getReportSeq();a.dataReport.newReport(u,r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.event);var d=a.proxyRes(a.dataReport,u,c,l),h=d.interResolve,p=d.interReject;if("string"!=typeof e||""==e)return a.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BCM+" roomid must be string and not empty"),void p(r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.error.INPUT_PARAM," param roomID error");if(void 0===t||""==t)return a.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BCM+" message is empty"),void p(r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.error.IM_CONTENT_NULL);if("string"!=typeof t)return a.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BCM+" message must be string"),void p(r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.error.INPUT_PARAM," param message error");if(t.length>o.MAX_MESSAGE_LENGTH)return a.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BCM+" message too long"),void p(r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.error.IM_CONTENT_TOO_LONG);var f="PUBLIC"==a.stateCenter.type?a.getRoomModules(e):a.stateCenter.priModules;f?(a.dataReport.addMsgInfo(u,{room_sid:r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.room_sid(f.sessionID)}),f.messageHandler.sendRoomMsg(i,s,e,t,h,p)):p(r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.error.ROOM_NOT_EXIST)}))}function l(e,t,i){var s=this;return new Promise((function(c,l){var u=s.getReportSeq();s.dataReport.newReport(u,r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendCustomCommand.event);var d=s.proxyRes(s.dataReport,u,c,l),h=d.interResolve,p=d.interReject;if("string"!=typeof e||""==e)return s.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_CUSTOM+" roomid must be string and not empty"),void p(a.errorCodeList.INPUT_PARAM," param roomID error");if(!(i instanceof Array)||i.find((function(e){return"string"!=typeof e})))return s.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_CUSTOM+" dstMembers must be string array"),void p(r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendCustomCommand.error.INPUT_PARAM," param toUserList error");if("PUBLIC"===s.stateCenter.type&&"string"!=typeof t&&"object"!=typeof t)return s.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_CUSTOM+" custom content must be a non empty string or object"),void p(r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendCustomCommand.error.INPUT_PARAM," param command error");if("PRIVATE"===s.stateCenter.type&&"string"!=typeof t)return s.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_CUSTOM+" custom content must be a not empty string"),void p(r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendCustomCommand.error.INPUT_PARAM," param command error");if("string"==typeof t&&t.length>o.MAX_MESSAGE_LENGTH)return s.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_CUSTOM+" command too long"),void p(r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendCustomCommand.error.IM_CONTENT_TOO_LONG);var f="PUBLIC"==s.stateCenter.type?s.getRoomModules(e):s.stateCenter.priModules;f?(s.dataReport.addMsgInfo(u,{room_sid:r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendCustomCommand.room_sid(f.sessionID)}),f.messageHandler.sendCustomCommand(i,t,h,p)):p(r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendCustomCommand.error.ROOM_NOT_EXIST)}))}function u(e,t,i,s){var a=this;return void 0===i&&(i=1),void 0===s&&(s=1),new Promise((function(c,l){var u=a.getReportSeq();a.dataReport.newReport(u,r.ZegoRTMLogEvent.kZegoTaskLiveSendRoomBigIM.event);var d=a.proxyRes(a.dataReport,u,c,l),h=d.interResolve,p=d.interReject;if("string"!=typeof e||""==e)return a.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BRM+"roomid must be string and not empty"),void p(r.ZegoRTMLogEvent.kZegoTaskLiveSendRoomBigIM.error.INPUT_PARAM," param roomID error");if(void 0===t||""==t)return a.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BRM+" message is empty"),void p(r.ZegoRTMLogEvent.kZegoTaskLiveSendRoomBigIM.error.IM_CONTENT_NULL);if("string"!=typeof t)return a.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BRM+" message must be string"),void p(r.ZegoRTMLogEvent.kZegoTaskLiveSendRoomBigIM.error.INPUT_PARAM," param message error");if(t.length>o.MAX_MESSAGE_LENGTH)return a.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BRM+" message too long"),void p(r.ZegoRTMLogEvent.kZegoTaskLiveSendRoomBigIM.error.IM_CONTENT_TOO_LONG);var f="PUBLIC"==a.stateCenter.type?a.getRoomModules(e):a.stateCenter.priModules;f?(a.dataReport.addMsgInfo(u,{room_sid:r.ZegoRTMLogEvent.kZegoTaskLiveSendRoomBigIM.room_sid(f.sessionID)}),f.messageHandler.sendBigRoomMessage(i,s,e,t,h,p)):p(r.ZegoRTMLogEvent.kZegoTaskLiveSendRoomBigIM.error.ROOM_NOT_EXIST)}))}function d(e,t,i){var s=this;return new Promise((function(a,c){var l=s.getReportSeq();s.dataReport.newReport(l,r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.event);var u=s.proxyRes(s.dataReport,l,a,c),d=u.interResolve,h=u.interReject;if("string"!=typeof e||""==e)return s.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BCM+" roomid must be string and not empty"),void h(r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.error.INPUT_PARAM," param roomID error");if(!t||"string"!=typeof t)return s.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_RLM+" type must be string"),void h({errorCode:r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.error.INPUT_PARAM.code});if(t.length>o.MAX_TRANS_TYPE_LENGTH)return s.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_RLM+" type is too long"),void h({errorCode:r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.error.INPUT_PARAM.code});if(!i||"string"!=typeof i)return s.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_RLM+" data must be string"),void h({errorCode:r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.error.INPUT_PARAM.code});if(i.length>o.MAX_TRANS_DATA_LENGTH)return s.logger.error(n.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_RLM+" type is too long"),void h({errorCode:r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.error.INPUT_PARAM.code});var p="PUBLIC"==s.stateCenter.type?s.getRoomModules(e):s.stateCenter.priModules;p?(s.dataReport.addMsgInfo(l,{room_sid:r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.room_sid(p.sessionID)}),p.messageHandler.sendReliableMessage(t,i,d,h)):h(r.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.error.ROOM_NOT_EXIST)}))}function h(e){var t,i=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,r="PUBLIC"==this.stateCenter.type?this.rtm.getRoomModules(i):this.stateCenter.priModules;r?r.messageHandler.handlePushRoomMsg(e):this.logger.error(n.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}function p(e){var t,i=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,r="PUBLIC"==this.stateCenter.type?this.rtm.getRoomModules(i):this.stateCenter.priModules;r?r.messageHandler.handlePushCustomMsg(e):this.logger.error(n.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}function f(e){var t,i=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,r="PUBLIC"==this.stateCenter.type?this.rtm.getRoomModules(i):this.stateCenter.priModules;r?r.messageHandler.handlePushMergeMsg(e):this.logger.error(n.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}function g(e){var t,i=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,r="PUBLIC"==this.stateCenter.type?this.rtm.getRoomModules(i):this.stateCenter.priModules;r?r.messageHandler.handlePushTransMsg(e):this.logger.error(n.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}function m(e){var t,i=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,r="PUBLIC"==this.stateCenter.type?this.rtm.getRoomModules(i):this.stateCenter.priModules;r?r.messageHandler.handleBigImMsgRsp(e):this.logger.error(n.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}function _(){this.messageHandler=new s.MessageHandler(this.logger,this.stateCenter,this.dataReport,this.service,this.rtm,this)}t.rtmPros={_sendBroadcastMessage:c,sendBroadcastMessage:function(e,t){var i=this;return new Promise((function(n,r){c.call(i,e,t).then((function(e){n({errorCode:e.errorCode,messageID:e.messageID,extendedData:e.extendedData})})).catch((function(e){r(e)}))}))},_sendCustomCommand:l,sendCustomCommand:function(e,t,i){var n=this;return new Promise((function(r,o){l.call(n,e,t,i).then((function(e){r({errorCode:e.errorCode,extendedData:e.extendedData})})).catch((function(e){o(e)}))}))},_sendBarrageMessage:u,sendBarrageMessage:function(e,t){var i=this;return new Promise((function(n,r){u.call(i,e,t).then((function(e){n({errorCode:e.errorCode,messageID:e.messageID,extendedData:e.extendedData})})).catch((function(e){r(e)}))}))},_setRoomExtraInfo:d,setRoomExtraInfo:function(e,t,i){return d.call(this,e,t,i)},sendRelayMessage:function(e,t,i,n,r){var o=this.getRoomModules(r)||this.stateCenter.roomModulesList[0];o?o.messageHandler.sendRelayMessage(e,t,i,n):n&&n(a.errorCodeList.ROOM_NOT_EXIST,0)}},t.handlePushRoomMsg=h,t.handlePushCustomMsg=p,t.handlePushMergeMsg=f,t.handlePushTransMsg=g,t.handleBigImMsgRsp=m,t.servicePros={handlePushRoomMsg:h,handlePushCustomMsg:p,handlePushMergeMsg:f,handlePushTransMsg:g,handleBigImMsgRsp:m},t.initMessageHandler=_,t.modulePros={initMessageHandler:_}},38:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=i(8),r=i(13),o=i(14),s=i(15),a=function(){function e(e,t,i,n,r,o){var s=this;this.logger=e,this.stateCenter=t,this.dataReport=i,this.service=n,this.rtm=r,this.room=o,this.sendRoomMsgTime=0,this.sendRoomMsgInterval=500,this.bigImCallbackMap={},this.bigImLastTimeIndex=0,this.bigIMmessageList=[],this.bigImTimer=null,this.relayTimer=null,this.serverTimeOffset=0,this.datiTimeWindow=0,this.bigimTimeWindow=0,this.isReliable=!1,this.transSeqMap={},this.onRecvReliableMessage=function(e){var t=e.map((function(e){return{key:e.trans_type,value:e.trans_data,updateUser:{userID:e.trans_idname,userName:e.trans_nickname},updateTime:e.trans_send_time}}));s.stateCenter.actionListener("roomExtraInfoUpdate",s.room.roomID,t),e.forEach((function(e){s.stateCenter.actionListener("recvReliableMessage",e.trans_type,e.trans_seq,e.trans_data)}))},this.realyMessageList=[]}return e.prototype.loginRsp=function(e){var t=this;if(null!=e.body.ret_timestamp&&"string"==typeof e.body.ret_timestamp){var i=parseFloat(e.body.ret_timestamp);this.serverTimeOffset=0==i?0:e.body.ret_timestamp-(new Date).getTime()}if(e.body.bigim_time_window&&"number"==typeof e.body.bigim_time_window&&(this.bigimTimeWindow=e.body.bigim_time_window),e.body.dati_time_window&&"number"==typeof e.body.dati_time_window&&(this.datiTimeWindow=e.body.dati_time_window),e.body.trans_seqs)for(var n=0;n<e.body.trans_seqs.length;n++){var r=e.body.trans_seqs[n].trans_channel,o=e.body.trans_seqs[n].trans_seq_array;(o=o.filter((function(e){var i=e.trans_type,n=e.trans_seq;return!t.transSeqMap[i]||t.transSeqMap[i].seq<n}))).length>0&&this.fetchReliableMessage(r,o)}},e.prototype.sendReliableMessage=function(e,t,i,s){var a=this;if(this.logger.info(r.ZEGO_RTM_ACTION.MESSAGE_SEND_RELIABLE+" call"),this.isReliable)return this.logger.error(r.ZEGO_RTM_ACTION.MESSAGE_SEND_RELIABLE+" send too often"),void s(o.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.error.TRANS_FREQUENTLY);this.transSeqMap[e]||(this.transSeqMap[e]={seq:0});var c={trans_type:e,trans_data:t,trans_local_seq:this.transSeqMap[e].seq,trans_channel:"clt"};this.isReliable=!0,this.service.sendReliableMessage(c,(function(t){a.transSeqMap[e].seq=t.body.trans_seq,a.logger.info(r.ZEGO_RTM_ACTION.MESSAGE_SEND_RELIABLE+" trans "+e+" seq "+t.body.trans_seq),a.isReliable=!1,i({seq:t.header.seq,errorCode:0})}),(function(e){var t=n.errorCodeList.ROOM_INNER_ERROR;e.body&&e.body.err_code?(t=a.rtm.getServerError(e.body.err_code),a.logger.error(r.ZEGO_RTM_ACTION.MESSAGE_SEND_ROOM_MSG+"  "+t.msg)):t=e==n.errorCodeList.TIMEOUT?n.errorCodeList.IM_SEND_FAILED:e,a.isReliable=!1,s(t)}),this.room.sessionID,this.room.roomID,this.room.roomSessionID)},e.prototype.fetchReliableMessage=function(e,t){var i=this,n={trans_channel:e,fetch_array:t},o=function(e){i.handleFetchTransRsp(e)};this.service.fetchReliableMessage(n,o,o,this.room.sessionID,this.room.roomID,this.room.roomSessionID),this.logger.info(r.ZEGO_RTM_ACTION.MESSAGE_FETCH_RELIABLE+" call success")},e.prototype.handleFetchTransRsp=function(e){if(e.body&&0!=e.body.err_code)this.logger.error(r.ZEGO_RTM_ACTION.MESSAGE_RELIABLE_RSP+" trans send error "+e.body.err_code);else if(e.header&&e.body){var t=e.body.trans_fetch_results,i=[];if(Array.isArray(t)&&t.length>0)for(var n=0;n<t.length;n++){var o=t[n];if(o.err_code!==s.ERROR_CODES.FETCH_TRANS_UNKNOWN_TYPE){var a=o.trans_type,c=o.trans_seq;o.err_code!==s.ERROR_CODES.FETCH_TRANS_WRONG_SEQ?(!this.transSeqMap[a]||this.transSeqMap[a].seq<c?(this.transSeqMap[a]={seq:c},i.push(o)):this.logger.warn(r.ZEGO_RTM_ACTION.MESSAGE_RELIABLE_RSP+" fetch trans seq wrong"),i.length>0&&this.onRecvReliableMessage(i)):(this.logger.warn(r.ZEGO_RTM_ACTION.MESSAGE_RELIABLE_RSP+" fetch trans seq is wrong "+o.err_code),this.transSeqMap[a]={seq:c})}else this.logger.warn(r.ZEGO_RTM_ACTION.MESSAGE_RELIABLE_RSP+" fetch trans unknown type "+o.err_code)}}else this.logger.error(r.ZEGO_RTM_ACTION.MESSAGE_RELIABLE_RSP+" trans send error "+e)},e.prototype.handlePushTransMsg=function(e){var t=e.body.trans_type,i=e.body.trans_seq;!this.transSeqMap[t]||this.transSeqMap[t].seq<i?(this.transSeqMap[t]={seq:i},this.onRecvReliableMessage([e.body])):this.logger.warn(r.ZEGO_RTM_ACTION.MESSAGE_RELIABLE_PUSH+" trans seq wrong"),this.logger.info(r.ZEGO_RTM_ACTION.MESSAGE_RELIABLE_PUSH+" trans "+t+" seq "+i)},e.prototype.sendRoomMsg=function(e,t,i,o,s,a){var c=this;if(!this.room.isLogin())return this.logger.error(r.ZEGO_RTM_ACTION.MESSAGE_SEND_ROOM_MSG+" state error"),!1;var l=Date.parse(new Date+"");if(this.sendRoomMsgTime>0&&this.sendRoomMsgTime+this.sendRoomMsgInterval>l)return this.logger.info(r.ZEGO_RTM_ACTION.MESSAGE_SEND_ROOM_MSG+" freq error"),a&&a(n.errorCodeList.FREQ_LIMITED,0,e,o),!1;this.sendRoomMsgTime=l;var u="PRIVATE"==this.stateCenter.type?{room_header:{room_id:this.room.roomID,room_sid:this.room.roomSid||"0",room_user_session_id:this.room.roomSessionID||"0"},msg_category:e,msg_type:1,msg_content:o}:{msg_category:e,msg_type:1,msg_content:o};return this.service.sendRoomMsg(u,(function(e){s({seq:e.header.seq,errorCode:0,messageID:e.body.msg_id})}),(function(e){var t,i,o=n.errorCodeList.ROOM_INNER_ERROR;if(!e.header||!e.body)return e.code&&e.msg&&(o=e),void a({seq:0,errorCode:o.code,messageID:0});o=(t=[c.rtm.getServerError("PRIVATE"==c.stateCenter.type?e.body.code:e.body.err_code),e.body.msg_id])[0],i=t[1],c.logger.error(r.ZEGO_RTM_ACTION.MESSAGE_SEND_ROOM_MSG+"  "+o.msg),c.logger.error(r.ZEGO_RTM_ACTION.MESSAGE_SEND_ROOM_MSG+"  "+o.msg),o==n.errorCodeList.TIMEOUT&&(o=n.errorCodeList.IM_SEND_FAILED),a({seq:e.header.seq,errorCode:o.code,messageID:i})}),this.room.sessionID,this.room.roomID,this.room.roomSessionID),this.logger.info(r.ZEGO_RTM_ACTION.MESSAGE_SEND_ROOM_MSG+"  call success"),!0},e.prototype.handlePushRoomMsg=function(e){var t=this,i=this.rtm.getReportSeq();this.dataReport.newReport(i),this.dataReport.addMsgInfo(i,{room_sid:o.ZegoRTMLogEvent.kZegoTaskLiveRoomGetRoomMessage.room_sid(e.header.session_id)});var n=[];"PRIVATE"==this.stateCenter.type?e.body.chat_data.forEach((function(e){var r={fromUser:{userID:e.user_id,userName:e.user_name},message:e.msg_content,sendTime:e.send_time,messageID:e.msg_id};n.push(r),t.dataReport.addMsgInfo(i,{from_msg_id:e.id_name})})):e.body.chat_data.forEach((function(e){var r={fromUser:{userID:e.id_name,userName:e.nick_name},message:e.msg_content,sendTime:e.send_time,messageID:e.msg_id};n.push(r),t.dataReport.addMsgInfo(i,{from_msg_id:e.id_name})})),this.dataReport.uploadReport(i,o.ZegoRTMLogEvent.kZegoTaskLiveRoomGetRoomMessage.event),this.stateCenter.actionListener("IMRecvBroadcastMessage",this.room.roomID,n),this.stateCenter.actionListener("_recvRoomMsg",e.body.chat_data,e.body.server_msg_id,e.body.ret_msg_id)},e.prototype.sendCustomCommand=function(e,t,i,o){var s=this;if(!this.room.isLogin())return this.logger.error(r.ZEGO_RTM_ACTION.MESSAGE_SEND_CUSTOM_MSG+" state error"),!1;var a={from_userid:this.stateCenter.idName,from_username:this.stateCenter.nickName,request_id:this.stateCenter.getRequestId(),custom_content:t||"",room_id:this.room.roomID},c="PRIVATE"==this.stateCenter.type?{room_header:{room_id:this.room.roomID,room_sid:this.room.roomSid||"0",room_user_session_id:this.room.roomSessionID||"0"},request_id:this.stateCenter.getRequestId(),msg:t,destids:e}:{dest_id_name:e,custom_msg:JSON.stringify(a)};return this.service.sendCustomCommand(c,(function(e){i({seq:e.header.seq,errorCode:0})}),(function(e){var t,i=s.rtm.getServerError("PRIVATE"==s.stateCenter.type?e.body.code:e.body.err_code);s.logger.error(r.ZEGO_RTM_ACTION.MESSAGE_SEND_CUSTOM_MSG+" "+i.msg),t=i==n.errorCodeList.TIMEOUT?n.errorCodeList.IM_SEND_FAILED:i,o({seq:e.header.seq,errorCode:t.code})}),this.room.sessionID,this.room.roomID,this.room.roomSessionID),this.logger.info(r.ZEGO_RTM_ACTION.MESSAGE_SEND_CUSTOM_MSG+" call success"),!0},e.prototype.handlePushCustomMsg=function(e){var t,i,n,r,s,a;if("PRIVATE"==this.stateCenter.type)n=(t=[e.body.from_user_id,e.body.from_user_name,this.room.roomID,e.body.msg])[0],r=t[1],s=t[2],a=t[3];else{var c=JSON.parse(e.body.custommsg);n=(i=[c.from_userid,c.from_username,c.room_id,c.custom_content])[0],r=i[1],s=i[2],a=i[3]}var l=this.rtm.getReportSeq();this.dataReport.newReport(l),this.dataReport.uploadReport(l,o.ZegoRTMLogEvent.kZegoTaskLiveRoomGetCustomCommand.event),this.stateCenter.actionListener("IMRecvCustomCommand",s,{userID:n,userName:r},a)},e.prototype.sendBigRoomMessage=function(e,t,i,n,r,o){var s=this,a=this.bigimTimeWindow,c=this.serverTimeOffset,l=(new Date).getTime()+c,u=this.rtm.getSeq().toString();if(this.bigImCallbackMap[u]={success:r,error:o},0==a){var d={msg_category:e,msg_type:1,msg_content:n,bigmsg_client_id:u};this.sendBigRoomMessageInternal([d],(function(e){s.handleBigImMsgRsp(e)}),(function(e){o&&o(e)}))}else{var h=Math.floor(l/a);if(this.bigImLastTimeIndex<h&&0==this.bigIMmessageList.length){this.bigImLastTimeIndex=h;var p={msg_category:e,msg_type:1,msg_content:n,bigmsg_client_id:u};this.sendBigRoomMessageInternal([p],(function(e){s.handleBigImMsgRsp(e)}),(function(e){o&&o(e)}))}else this.bigIMmessageList.push({msg_category:e,msg_type:1,msg_content:n,bigmsg_client_id:u}),1==this.bigIMmessageList.length&&this.setBigImTimer(c,a)}},e.prototype.sendBigRoomMessageInternal=function(e,t,i){var o={msgs:e};this.service.sendBigRoomMessage(o,(function(e){t(e)}),(function(e){var t=n.errorCodeList.ROOM_INNER_ERROR;e.header&&e.body||(e.code&&e.msg&&(t=e),i(t)),i(t)}),this.room.sessionID,this.room.roomID,this.room.roomSessionID),this.logger.info(r.ZEGO_RTM_ACTION.MESSAGE_SEND_BIG_MSG+" sendBigRoomMessage called")},e.prototype.handleBigImMsgRsp=function(e){this.bigimTimeWindow=e.body.bigim_time_window;for(var t=0;t<e.body.msgs.length;t++){var i=e.body.msgs[t].bigmsg_client_id,n=e.body.msgs[t].bigmsg_id;if(this.bigImCallbackMap[i]){var r=this.bigImCallbackMap[i].success;null!=r&&r({seq:e.header.seq,errorCode:0,messageID:n}),delete this.bigImCallbackMap[i]}}},e.prototype.setBigImTimer=function(e,t){var i=this,n=t-((new Date).getTime()+e)%t,r=this.rtm.generateRandumNumber(t)+n;this.bigImTimer=setTimeout((function(){i.onBigImTimer()}),r)},e.prototype.onBigImTimer=function(){var e=this,t=(new Date).getTime()+this.serverTimeOffset;this.bigImLastTimeIndex=Math.floor(t/this.bigimTimeWindow);for(var i=[],n=[],r=0;r<this.bigIMmessageList.length&&!(r>=20);r++){var o=this.bigIMmessageList[r];i.push({msg_category:o.msg_category,msg_type:o.msg_type,msg_content:o.msg_content,bigmsg_client_id:o.bigmsg_client_id}),n.push(o.bigmsg_client_id)}this.bigIMmessageList.length>20?this.bigIMmessageList.splice(0,20):this.bigIMmessageList=[],this.sendBigRoomMessageInternal(i,(function(t){e.handleBigImMsgRsp(t)}),(function(t,i){for(var r=0;r<n.length;r++){var o=n[r],s=e.bigImCallbackMap[o];s&&(null!=s.error&&s.error(t,i),delete e.bigImCallbackMap[o])}})),this.bigImTimer&&clearTimeout(this.bigImTimer),this.bigImTimer=null,this.bigIMmessageList.length>0&&this.setBigImTimer(this.serverTimeOffset,this.bigimTimeWindow)},e.prototype.handlePushMergeMsg=function(e){for(var t=0;t<e.body.messages.length;t++)14001===e.body.messages[t].sub_cmd&&this.handlePushBigRooMsg(e.body.messages[t].msg_body)},e.prototype.handlePushBigRooMsg=function(e){var t;try{t=JSON.parse(e)}catch(e){return void this.logger.warn(r.ZEGO_RTM_ACTION.MESSAGE_BIG_MSG_PUSH+"parse json error")}if(t){for(var i=t.room_id,n=[],o=0;o<t.msg_data.length;o++){var s=t.msg_data[o];s.id_name!=this.stateCenter.idName?n.push({idName:s.id_name,nickName:s.nick_name,messageId:s.bigmsg_id,category:s.msg_category,type:s.msg_type,content:s.msg_content,time:s.send_time}):this.logger.info(r.ZEGO_RTM_ACTION.MESSAGE_BIG_MSG_PUSH+" self message")}0==n.length?this.logger.info(r.ZEGO_RTM_ACTION.MESSAGE_BIG_MSG_PUSH+" no other pushData except self"):this.onRecvBigRoomMessage(n,i),this.logger.info(r.ZEGO_RTM_ACTION.MESSAGE_BIG_MSG_PUSH+"call success")}else this.logger.warn(r.ZEGO_RTM_ACTION.MESSAGE_BIG_MSG_PUSH+" cann't find message body")},e.prototype.onRecvBigRoomMessage=function(e,t){var i=this.rtm.getReportSeq();this.dataReport.newReport(i);var n=[];e.forEach((function(e){var t={fromUser:{userID:e.idName,userName:e.nickName},message:e.content,sendTime:e.time,messageID:e.messageId};n.push(t)})),this.dataReport.uploadReport(i,o.ZegoRTMLogEvent.kZegoTaskLiveGetRoomBigIM.event),this.stateCenter.actionListener("IMRecvBarrageMessage",t,n),this.stateCenter.actionListener("_recvBigRoomMessage",e,t)},e.prototype.resetMessageInfo=function(){this.transSeqMap={},this.realyMessageList=[],this.relayTimer&&(clearTimeout(this.relayTimer),this.relayTimer=null),this.bigImLastTimeIndex=0,this.bigIMmessageList=[],this.bigImCallbackMap={},this.bigImTimer&&(clearTimeout(this.bigImTimer),this.bigImTimer=null),this.serverTimeOffset=0,this.datiTimeWindow=0,this.bigimTimeWindow=0},e.prototype.sendRelayMessage=function(e,t,i,n){var r=this.datiTimeWindow,o=this.serverTimeOffset;r>0?(this.realyMessageList.push({type:e,data:t,success:i,error:n}),1==this.realyMessageList.length&&this.setRelayTimer(o,r)):this.sendRelayMessageInternal(e,t,i,n)},e.prototype.sendRelayMessageInternal=function(e,t,i,o){var s=this;this.logger.info(r.ZEGO_RTM_ACTION.MESSAGE_SEND_RELAY_MSG+" call");var a={relay_type:e,relay_data:t},c=this.room;this.service.sendRelayMessage(a,(function(e){i&&i(e.header.seq,e.body.relay_result)}),(function(e){var t=n.errorCodeList.ROOM_INNER_ERROR;if(!e.header||!e.body)return e.code&&e.msg&&(t=e),void(o&&o(t,0));o&&o(s.rtm.getServerError(e.body.err_code),e.header.seq)}),c.sessionID,c.roomID,c.roomSessionID)},e.prototype.setRelayTimer=function(e,t){var i=this,n=2*t-((new Date).getTime()+e)%t,o=this.rtm.generateRandumNumber(n);this.logger.info(r.ZEGO_RTM_ACTION.MESSAGE_SEND_RELAY_MSG+" setTimer "+o),this.relayTimer=setTimeout((function(){i.onRelayTimer()}),o)},e.prototype.onRelayTimer=function(){if(0!=this.realyMessageList.length){var e=this.realyMessageList[0];this.sendRelayMessageInternal(e.type,e.data,e.success,e.error),this.relayTimer&&clearTimeout(this.relayTimer),this.relayTimer=null,this.realyMessageList.splice(0,1),this.realyMessageList.length>0&&this.setRelayTimer(this.serverTimeOffset,this.datiTimeWindow)}else this.logger.info(r.ZEGO_RTM_ACTION.MESSAGE_SEND_RELAY_MSG+"  no relay data")},e.prototype.getRoomChatInfo=function(e,t,i,n){if(this.logger.debug("zb.mh.grc call"),this.room.isLogin()){var r={room_header:{room_id:this.room.roomID,room_sid:this.room.roomSid||"0",room_user_session_id:this.room.roomSessionID||"0"},msg_id:e,msg_count:t},o=function(e,t){if(0!==e.body.code)n({errorCode:e.body.code,extendData:e.body.message||""});else{var r=e.body.msg_data.map((function(e){return{fromUser:{userID:e.user_id,userName:e.user_name},message:e.msg_content,sendTime:e.send_time,messageID:e.msg_id}}));i({chatData:r})}};this.service.sendMessage("zegochat_js.room_im_chat_fetch",r,o,o),this.logger.info("zb.mh.grc call success")}else this.logger.error("zb.mh.srm no enter room")},e}();t.MessageHandler=a},8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},IM_CONTENT_NULL:{code:1009001,msg:"message content is empty"},IM_CONTENT_TOO_LONG:{code:1009002,msg:"message content is too long"},IM_SEND_FAILED:{code:1009010,msg:"failed to send message"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},TRANS_FREQUENTLY:{code:1102022,msg:"trans send frequently"},FREQ_LIMITED:{code:1109001,msg:"frequency limited."}}}})},4119:function(e){"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__4119__}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var __webpack_exports__=__webpack_require__(4780);return __webpack_exports__}()}))},fcd4:function(e,t,i){t.f=i("cc15")},fce3:function(e,t,i){var n=i("d039"),r=i("da84"),o=r.RegExp;e.exports=n((function(){var e=o(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},fd87:function(e,t,i){var n=i("74e8");n("Int8",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,i){var n=i("4930");e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(e,t,i){var n=i("da84");e.exports=n.Promise},fed5:function(e,t){t.f=Object.getOwnPropertySymbols}}]);
//# sourceMappingURL=chunk-vendors.528a2d35.js.map