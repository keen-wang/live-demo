(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00b4":function(e,t,n){"use strict";n("ac1f");var r=n("23e7"),i=n("da84"),o=n("c65b"),s=n("e330"),a=n("1626"),c=n("861d"),l=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),u=i.Error,d=s(/./.test);r({target:"RegExp",proto:!0,forced:!l},{test:function(e){var t=this.exec;if(!a(t))return d(this,e);var n=o(t,this,e);if(null!==n&&!c(n))throw new u("RegExp exec method returned something other than an Object or null");return!!n}})},"00ee":function(e,t,n){var r=n("b622"),i=r("toStringTag"),o={};o[i]="z",e.exports="[object z]"===String(o)},"01b4":function(e,t){var n=function(){this.head=null,this.tail=null};n.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=n},"0366":function(e,t,n){var r=n("e330"),i=n("59ed"),o=n("40d5"),s=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},"03d6":function(e,t,n){var r=n("9c0e"),i=n("6ca1"),o=n("39ad")(!1),s=n("5a94")("IE_PROTO");e.exports=function(e,t){var n,a=i(e),c=0,l=[];for(n in a)n!=s&&r(a,n)&&l.push(n);while(t.length>c)r(a,n=t[c++])&&(~o(l,n)||l.push(n));return l}},"04d1":function(e,t,n){var r=n("342f"),i=r.match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},"051b":function(e,t,n){var r=n("1a14"),i=n("10db");e.exports=n("0bad")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},"0538":function(e,t,n){"use strict";var r=n("da84"),i=n("e330"),o=n("59ed"),s=n("861d"),a=n("1a2d"),c=n("f36a"),l=n("40d5"),u=r.Function,d=i([].concat),h=i([].join),p={},f=function(e,t,n){if(!a(p,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";p[t]=u("C,a","return new C("+h(r,",")+")")}return p[t](e,n)};e.exports=l?u.bind:function(e){var t=o(this),n=t.prototype,r=c(arguments,1),i=function(){var n=d(r,c(arguments));return this instanceof i?f(t,n.length,n):t.apply(e,n)};return s(n)&&(i.prototype=n),i}},"057f":function(e,t,n){var r=n("c6b6"),i=n("fc6a"),o=n("241c").f,s=n("4dae"),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(e){try{return o(e)}catch(t){return s(a)}};e.exports.f=function(e){return a&&"Window"==r(e)?c(e):o(i(e))}},"05f5":function(e,t,n){var r=n("7a41"),i=n("ef08").document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"06cf":function(e,t,n){var r=n("83ab"),i=n("c65b"),o=n("d1e7"),s=n("5c6c"),a=n("fc6a"),c=n("a04b"),l=n("1a2d"),u=n("0cfb"),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=a(e),t=c(t),u)try{return d(e,t)}catch(n){}if(l(e,t))return s(!i(o.f,e,t),e[t])}},"072d":function(e,t,n){"use strict";var r=n("0bad"),i=n("9876"),o=n("fed5"),s=n("1917"),a=n("0983"),c=n("9fbb"),l=Object.assign;e.exports=!l||n("4b8b")((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){var n=a(e),l=arguments.length,u=1,d=o.f,h=s.f;while(l>u){var p,f=c(arguments[u++]),g=d?i(f).concat(d(f)):i(f),m=g.length,_=0;while(m>_)p=g[_++],r&&!h.call(f,p)||(n[p]=f[p])}return n}:l},"07ac":function(e,t,n){var r=n("23e7"),i=n("6f53").values;r({target:"Object",stat:!0},{values:function(e){return i(e)}})},"07fa":function(e,t,n){var r=n("50c4");e.exports=function(e){return r(e.length)}},"0983":function(e,t,n){var r=n("c901");e.exports=function(e){return Object(r(e))}},"0a06":function(e,t,n){"use strict";var r=n("c532"),i=n("30b5"),o=n("f6b4"),s=n("5270"),a=n("4a7b"),c=n("848b"),l=c.validators;function u(e){this.defaults=e,this.interceptors={request:new o,response:new o}}u.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=a(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!r){var u=[s,void 0];Array.prototype.unshift.apply(u,n),u=u.concat(o),i=Promise.resolve(e);while(u.length)i=i.then(u.shift(),u.shift());return i}var d=e;while(n.length){var h=n.shift(),p=n.shift();try{d=h(d)}catch(f){p(f);break}}try{i=s(d)}catch(f){return Promise.reject(f)}while(o.length)i=i.then(o.shift(),o.shift());return i},u.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=u},"0ae2":function(e,t,n){var r=n("9876"),i=n("fed5"),o=n("1917");e.exports=function(e){var t=r(e),n=i.f;if(n){var s,a=n(e),c=o.f,l=0;while(a.length>l)c.call(e,s=a[l++])&&t.push(s)}return t}},"0b25":function(e,t,n){var r=n("da84"),i=n("5926"),o=n("50c4"),s=r.RangeError;e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=o(t);if(t!==n)throw s("Wrong length or index");return n}},"0b42":function(e,t,n){var r=n("da84"),i=n("e8b5"),o=n("68ee"),s=n("861d"),a=n("b622"),c=a("species"),l=r.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,o(t)&&(t===l||i(t.prototype))?t=void 0:s(t)&&(t=t[c],null===t&&(t=void 0))),void 0===t?l:t}},"0b99":function(e,t,n){"use strict";var r=n("19fa")(!0);n("393a")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},"0bad":function(e,t,n){e.exports=!n("4b8b")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"0cb2":function(e,t,n){var r=n("e330"),i=n("7b0b"),o=Math.floor,s=r("".charAt),a=r("".replace),c=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,d,h){var p=n+e.length,f=r.length,g=u;return void 0!==d&&(d=i(d),g=l),a(h,g,(function(i,a){var l;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,n);case"'":return c(t,p);case"<":l=d[c(a,1,-1)];break;default:var u=+a;if(0===u)return i;if(u>f){var h=o(u/10);return 0===h?i:h<=f?void 0===r[h-1]?s(a,1):r[h-1]+s(a,1):i}l=r[u-1]}return void 0===l?"":l}))}},"0cfb":function(e,t,n){var r=n("83ab"),i=n("d039"),o=n("cc12");e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0d3b":function(e,t,n){var r=n("d039"),i=n("b622"),o=n("c430"),s=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t["delete"]("b"),n+=r+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},"0d51":function(e,t,n){var r=n("da84"),i=r.String;e.exports=function(e){try{return i(e)}catch(t){return"Object"}}},"0df6":function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},"0e15":function(e,t,n){var r=n("597f");e.exports=function(e,t,n){return void 0===n?r(e,t,!1):r(e,n,!1!==t)}},"0fae":function(e,t,n){},"107c":function(e,t,n){var r=n("d039"),i=n("da84"),o=i.RegExp;e.exports=r((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},1098:function(e,t,n){"use strict";t.__esModule=!0;var r=n("17ed"),i=c(r),o=n("f893"),s=c(o),a="function"===typeof s.default&&"symbol"===typeof i.default?function(e){return typeof e}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};function c(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof s.default&&"symbol"===a(i.default)?function(e){return"undefined"===typeof e?"undefined":a(e)}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"===typeof e?"undefined":a(e)}},"10db":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},1276:function(e,t,n){"use strict";var r=n("2ba4"),i=n("c65b"),o=n("e330"),s=n("d784"),a=n("44e7"),c=n("825a"),l=n("1d80"),u=n("4840"),d=n("8aa5"),h=n("50c4"),p=n("577e"),f=n("dc4a"),g=n("4dae"),m=n("14c3"),_=n("9263"),v=n("9f7f"),E=n("d039"),A=v.UNSUPPORTED_Y,y=4294967295,S=Math.min,b=[].push,C=o(/./.exec),T=o(b),I=o("".slice),R=!E((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));s("split",(function(e,t,n){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var o=p(l(this)),s=void 0===n?y:n>>>0;if(0===s)return[];if(void 0===e)return[o];if(!a(e))return i(t,o,e,s);var c,u,d,h=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,v=new RegExp(e.source,f+"g");while(c=i(_,v,o)){if(u=v.lastIndex,u>m&&(T(h,I(o,m,c.index)),c.length>1&&c.index<o.length&&r(b,h,g(c,1)),d=c[0].length,m=u,h.length>=s))break;v.lastIndex===c.index&&v.lastIndex++}return m===o.length?!d&&C(v,"")||T(h,""):T(h,I(o,m)),h.length>s?g(h,0,s):h}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:i(t,this,e,n)}:t,[function(t,n){var r=l(this),s=void 0==t?void 0:f(t,e);return s?i(s,t,r,n):i(o,p(r),t,n)},function(e,r){var i=c(this),s=p(e),a=n(o,i,s,r,o!==t);if(a.done)return a.value;var l=u(i,RegExp),f=i.unicode,g=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(A?"g":"y"),_=new l(A?"^(?:"+i.source+")":i,g),v=void 0===r?y:r>>>0;if(0===v)return[];if(0===s.length)return null===m(_,s)?[s]:[];var E=0,b=0,C=[];while(b<s.length){_.lastIndex=A?0:b;var R,w=m(_,A?I(s,b):s);if(null===w||(R=S(h(_.lastIndex+(A?b:0)),s.length))===E)b=d(s,b,f);else{if(T(C,I(s,E,b)),C.length===v)return C;for(var k=1;k<=w.length-1;k++)if(T(C,w[k]),C.length===v)return C;b=E=R}}return T(C,I(s,E)),C}]}),!R,A)},"12f2":function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return{methods:{focus:function(){this.$refs[e].focus()}}}}},"143c":function(e,t,n){var r=n("74e8");r("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},1448:function(e,t,n){var r=n("dfb9"),i=n("b6b7");e.exports=function(e,t){return r(i(e),t)}},"145e":function(e,t,n){"use strict";var r=n("7b0b"),i=n("23cb"),o=n("07fa"),s=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n),c=i(e,a),l=i(t,a),u=arguments.length>2?arguments[2]:void 0,d=s((void 0===u?a:i(u,a))-l,a-c),h=1;l<c&&c<l+d&&(h=-1,l+=d-1,c+=d-1);while(d-- >0)l in n?n[c]=n[l]:delete n[c],c+=h,l+=h;return n}},"14c3":function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("825a"),s=n("1626"),a=n("c6b6"),c=n("9263"),l=r.TypeError;e.exports=function(e,t){var n=e.exec;if(s(n)){var r=i(n,e,t);return null!==r&&o(r),r}if("RegExp"===a(e))return i(c,e,t);throw l("RegExp#exec called on incompatible receiver")}},"14e9":function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=132)}({132:function(e,t,n){"use strict";n.r(t);var r=n(16),i=n(38),o=n.n(i),s=n(3),a=n(2),c={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function l(e){var t=e.move,n=e.size,r=e.bar,i={},o="translate"+r.axis+"("+t+"%)";return i[r.size]=n,i.transform=o,i.msTransform=o,i.webkitTransform=o,i}var u={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return c[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(e){var t=this.size,n=this.move,r=this.bar;return e("div",{class:["el-scrollbar__bar","is-"+r.key],on:{mousedown:this.clickTrackHandler}},[e("div",{ref:"thumb",class:"el-scrollbar__thumb",on:{mousedown:this.clickThumbHandler},style:l({size:t,move:n,bar:r})})])},methods:{clickThumbHandler:function(e){e.ctrlKey||2===e.button||(this.startDrag(e),this[this.bar.axis]=e.currentTarget[this.bar.offset]-(e[this.bar.client]-e.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(e){var t=Math.abs(e.target.getBoundingClientRect()[this.bar.direction]-e[this.bar.client]),n=this.$refs.thumb[this.bar.offset]/2,r=100*(t-n)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=r*this.wrap[this.bar.scrollSize]/100},startDrag:function(e){e.stopImmediatePropagation(),this.cursorDown=!0,Object(a["on"])(document,"mousemove",this.mouseMoveDocumentHandler),Object(a["on"])(document,"mouseup",this.mouseUpDocumentHandler),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(e){if(!1!==this.cursorDown){var t=this[this.bar.axis];if(t){var n=-1*(this.$el.getBoundingClientRect()[this.bar.direction]-e[this.bar.client]),r=this.$refs.thumb[this.bar.offset]-t,i=100*(n-r)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=i*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(e){this.cursorDown=!1,this[this.bar.axis]=0,Object(a["off"])(document,"mousemove",this.mouseMoveDocumentHandler),document.onselectstart=null}},destroyed:function(){Object(a["off"])(document,"mouseup",this.mouseUpDocumentHandler)}},d={name:"ElScrollbar",components:{Bar:u},props:{native:Boolean,wrapStyle:{},wrapClass:{},viewClass:{},viewStyle:{},noresize:Boolean,tag:{type:String,default:"div"}},data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},render:function(e){var t=o()(),n=this.wrapStyle;if(t){var r="-"+t+"px",i="margin-bottom: "+r+"; margin-right: "+r+";";Array.isArray(this.wrapStyle)?(n=Object(s["toObject"])(this.wrapStyle),n.marginRight=n.marginBottom=r):"string"===typeof this.wrapStyle?n+=i:n=i}var a=e(this.tag,{class:["el-scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default),c=e("div",{ref:"wrap",style:n,on:{scroll:this.handleScroll},class:[this.wrapClass,"el-scrollbar__wrap",t?"":"el-scrollbar__wrap--hidden-default"]},[[a]]),l=void 0;return l=this.native?[e("div",{ref:"wrap",class:[this.wrapClass,"el-scrollbar__wrap"],style:n},[[a]])]:[c,e(u,{attrs:{move:this.moveX,size:this.sizeWidth}}),e(u,{attrs:{vertical:!0,move:this.moveY,size:this.sizeHeight}})],e("div",{class:"el-scrollbar"},l)},methods:{handleScroll:function(){var e=this.wrap;this.moveY=100*e.scrollTop/e.clientHeight,this.moveX=100*e.scrollLeft/e.clientWidth},update:function(){var e=void 0,t=void 0,n=this.wrap;n&&(e=100*n.clientHeight/n.scrollHeight,t=100*n.clientWidth/n.scrollWidth,this.sizeHeight=e<100?e+"%":"",this.sizeWidth=t<100?t+"%":"")}},mounted:function(){this.native||(this.$nextTick(this.update),!this.noresize&&Object(r["addResizeListener"])(this.$refs.resize,this.update))},beforeDestroy:function(){this.native||!this.noresize&&Object(r["removeResizeListener"])(this.$refs.resize,this.update)},install:function(e){e.component(d.name,d)}};t["default"]=d},16:function(e,t){e.exports=n("4010")},2:function(e,t){e.exports=n("5924")},3:function(e,t){e.exports=n("8122")},38:function(e,t){e.exports=n("e62d")}})},"159b":function(e,t,n){var r=n("da84"),i=n("fdbc"),o=n("785a"),s=n("17c2"),a=n("9112"),c=function(e){if(e&&e.forEach!==s)try{a(e,"forEach",s)}catch(t){e.forEach=s}};for(var l in i)i[l]&&c(r[l]&&r[l].prototype);c(o)},1609:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},1626:function(e,t){e.exports=function(e){return"function"==typeof e}},"170b":function(e,t,n){"use strict";var r=n("ebb5"),i=n("50c4"),o=n("23cb"),s=n("b6b7"),a=r.aTypedArray,c=r.exportTypedArrayMethod;c("subarray",(function(e,t){var n=a(this),r=n.length,c=o(e,r),l=s(n);return new l(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,i((void 0===t?r:o(t,r))-c))}))},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,i=n("a640"),o=i("forEach");e.exports=o?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"17ed":function(e,t,n){e.exports={default:n("511f"),__esModule:!0}},"182d":function(e,t,n){var r=n("da84"),i=n("f8cd"),o=r.RangeError;e.exports=function(e,t){var n=i(e);if(n%t)throw o("Wrong offset");return n}},1836:function(e,t,n){var r=n("6ca1"),i=n("6438").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):i(r(e))}},1917:function(e,t){t.f={}.propertyIsEnumerable},"19aa":function(e,t,n){var r=n("da84"),i=n("3a9b"),o=r.TypeError;e.exports=function(e,t){if(i(t,e))return e;throw o("Incorrect invocation")}},"19fa":function(e,t,n){var r=n("fc5e"),i=n("c901");e.exports=function(e){return function(t,n){var o,s,a=String(i(t)),c=r(n),l=a.length;return c<0||c>=l?e?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===l||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):o:e?a.slice(c,c+2):s-56320+(o-55296<<10)+65536)}}},"1a14":function(e,t,n){var r=n("77e9"),i=n("faf5"),o=n("3397"),s=Object.defineProperty;t.f=n("0bad")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},"1a2d":function(e,t,n){var r=n("e330"),i=n("7b0b"),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},"1b40":function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return r["default"]})),n.d(t,"b",(function(){return I})),n.d(t,"c",(function(){return R})),n.d(t,"e",(function(){return w}));var r=n("2b0e");
/**
  * vue-class-component v7.2.6
  * (c) 2015-present Evan You
  * @license MIT
  */function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return a(e)||c(e)||l()}function a(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(){return"undefined"!==typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function d(e,t){h(e,t),Object.getOwnPropertyNames(t.prototype).forEach((function(n){h(e.prototype,t.prototype,n)})),Object.getOwnPropertyNames(t).forEach((function(n){h(e,t,n)}))}function h(e,t,n){var r=n?Reflect.getOwnMetadataKeys(t,n):Reflect.getOwnMetadataKeys(t);r.forEach((function(r){var i=n?Reflect.getOwnMetadata(r,t,n):Reflect.getOwnMetadata(r,t);n?Reflect.defineMetadata(r,i,e,n):Reflect.defineMetadata(r,i,e)}))}var p={__proto__:[]},f=p instanceof Array;function g(e){return function(t,n,r){var i="function"===typeof t?t:t.constructor;i.__decorators__||(i.__decorators__=[]),"number"!==typeof r&&(r=void 0),i.__decorators__.push((function(t){return e(t,n,r)}))}}function m(e){var t=i(e);return null==e||"object"!==t&&"function"!==t}function _(e,t){var n=t.prototype._init;t.prototype._init=function(){var t=this,n=Object.getOwnPropertyNames(e);if(e.$options.props)for(var r in e.$options.props)e.hasOwnProperty(r)||n.push(r);n.forEach((function(n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t},configurable:!0})}))};var r=new t;t.prototype._init=n;var i={};return Object.keys(r).forEach((function(e){void 0!==r[e]&&(i[e]=r[e])})),i}var v=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.name=t.name||e._componentTag||e.name;var n=e.prototype;Object.getOwnPropertyNames(n).forEach((function(e){if("constructor"!==e)if(v.indexOf(e)>-1)t[e]=n[e];else{var r=Object.getOwnPropertyDescriptor(n,e);void 0!==r.value?"function"===typeof r.value?(t.methods||(t.methods={}))[e]=r.value:(t.mixins||(t.mixins=[])).push({data:function(){return o({},e,r.value)}}):(r.get||r.set)&&((t.computed||(t.computed={}))[e]={get:r.get,set:r.set})}})),(t.mixins||(t.mixins=[])).push({data:function(){return _(this,e)}});var i=e.__decorators__;i&&(i.forEach((function(e){return e(t)})),delete e.__decorators__);var s=Object.getPrototypeOf(e.prototype),a=s instanceof r["default"]?s.constructor:r["default"],c=a.extend(t);return y(c,e,a),u()&&d(c,e),c}var A={prototype:!0,arguments:!0,callee:!0,caller:!0};function y(e,t,n){Object.getOwnPropertyNames(t).forEach((function(r){if(!A[r]){var i=Object.getOwnPropertyDescriptor(e,r);if(!i||i.configurable){var o=Object.getOwnPropertyDescriptor(t,r);if(!f){if("cid"===r)return;var s=Object.getOwnPropertyDescriptor(n,r);if(!m(o.value)&&s&&s.value===o.value)return}0,Object.defineProperty(e,r,o)}}}))}function S(e){return"function"===typeof e?E(e):function(t){return E(t,e)}}S.registerHooks=function(e){v.push.apply(v,s(e))};var b=S;var C="undefined"!==typeof Reflect&&"undefined"!==typeof Reflect.getMetadata;function T(e,t,n){if(C&&!Array.isArray(e)&&"function"!==typeof e&&!e.hasOwnProperty("type")&&"undefined"===typeof e.type){var r=Reflect.getMetadata("design:type",t,n);r!==Object&&(e.type=r)}}function I(e){return void 0===e&&(e={}),function(t,n){T(e,t,n),g((function(t,n){(t.props||(t.props={}))[n]=e}))(t,n)}}function R(e){return g((function(t,n){t.computed=t.computed||{},t.computed[n]={cache:!1,get:function(){return this.$refs[e||n]}}}))}function w(e,t){void 0===t&&(t={});var n=t.deep,r=void 0!==n&&n,i=t.immediate,o=void 0!==i&&i;return g((function(t,n){"object"!==typeof t.watch&&(t.watch=Object.create(null));var i=t.watch;"object"!==typeof i[e]||Array.isArray(i[e])?"undefined"===typeof i[e]&&(i[e]=[]):i[e]=[i[e]],i[e].push({handler:n,deep:r,immediate:o})}))}},"1be4":function(e,t,n){var r=n("d066");e.exports=r("document","documentElement")},"1bf2":function(e,t,n){var r=n("23e7"),i=n("56ef");r({target:"Reflect",stat:!0},{ownKeys:i})},"1c7e":function(e,t,n){var r=n("b622"),i=r("iterator"),o=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){o=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(c){}return n}},"1cdc":function(e,t,n){var r=n("342f");e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},"1d2b":function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},"1d80":function(e,t,n){var r=n("da84"),i=r.TypeError;e.exports=function(e){if(void 0==e)throw i("Can't call method on "+e);return e}},"1da1":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d3b7");function r(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){r(s,i,o,a,c,"next",e)}function c(e){r(s,i,o,a,c,"throw",e)}a(void 0)}))}}},"1dde":function(e,t,n){var r=n("d039"),i=n("b622"),o=n("2d00"),s=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[],n=t.constructor={};return n[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"219c":function(e,t,n){"use strict";var r=n("da84"),i=n("e330"),o=n("d039"),s=n("59ed"),a=n("addb"),c=n("ebb5"),l=n("04d1"),u=n("d998"),d=n("2d00"),h=n("512ce"),p=r.Array,f=c.aTypedArray,g=c.exportTypedArrayMethod,m=r.Uint16Array,_=m&&i(m.prototype.sort),v=!!_&&!(o((function(){_(new m(2),null)}))&&o((function(){_(new m(2),{})}))),E=!!_&&!o((function(){if(d)return d<74;if(l)return l<67;if(u)return!0;if(h)return h<602;var e,t,n=new m(516),r=p(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(_(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0})),A=function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!==n?-1:t!==t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}};g("sort",(function(e){return void 0!==e&&s(e),E?_(this,e):a(f(this),A(e))}),!E||v)},2266:function(e,t,n){var r=n("da84"),i=n("0366"),o=n("c65b"),s=n("825a"),a=n("0d51"),c=n("e95a"),l=n("07fa"),u=n("3a9b"),d=n("9a1f"),h=n("35a1"),p=n("2a62"),f=r.TypeError,g=function(e,t){this.stopped=e,this.result=t},m=g.prototype;e.exports=function(e,t,n){var r,_,v,E,A,y,S,b=n&&n.that,C=!(!n||!n.AS_ENTRIES),T=!(!n||!n.IS_ITERATOR),I=!(!n||!n.INTERRUPTED),R=i(t,b),w=function(e){return r&&p(r,"normal",e),new g(!0,e)},k=function(e){return C?(s(e),I?R(e[0],e[1],w):R(e[0],e[1])):I?R(e,w):R(e)};if(T)r=e;else{if(_=h(e),!_)throw f(a(e)+" is not iterable");if(c(_)){for(v=0,E=l(e);E>v;v++)if(A=k(e[v]),A&&u(m,A))return A;return new g(!1)}r=d(e,_)}y=r.next;while(!(S=o(y,r)).done){try{A=k(S.value)}catch(O){p(r,"throw",O)}if("object"==typeof A&&A&&u(m,A))return A}return new g(!1)}},"23cb":function(e,t,n){var r=n("5926"),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},"23e7":function(e,t,n){var r=n("da84"),i=n("06cf").f,o=n("9112"),s=n("6eeb"),a=n("ce4e"),c=n("e893"),l=n("94ca");e.exports=function(e,t){var n,u,d,h,p,f,g=e.target,m=e.global,_=e.stat;if(u=m?r:_?r[g]||a(g,{}):(r[g]||{}).prototype,u)for(d in t){if(p=t[d],e.noTargetGet?(f=i(u,d),h=f&&f.value):h=u[d],n=l(m?d:g+(_?".":"#")+d,e.forced),!n&&void 0!==h){if(typeof p==typeof h)continue;c(p,h)}(e.sham||h&&h.sham)&&o(p,"sham",!0),s(u,d,p,e)}}},"241c":function(e,t,n){var r=n("ca84"),i=n("7839"),o=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},2444:function(e,t,n){"use strict";(function(t){var r=n("c532"),i=n("c8af"),o=n("387f"),s={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function c(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=n("b50d")),e}function l(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}var u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:c(),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(a(t,"application/json"),l(e)):e}],transformResponse:[function(e){var t=this.transitional||u.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(s){if("SyntaxError"===a.name)throw o(a,this,"E_JSON_PARSE");throw a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(s)})),e.exports=u}).call(this,n("4362"))},2532:function(e,t,n){"use strict";var r=n("23e7"),i=n("e330"),o=n("5a34"),s=n("1d80"),a=n("577e"),c=n("ab13"),l=i("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~l(a(s(this)),a(o(e)),arguments.length>1?arguments[1]:void 0)}})},"25a1":function(e,t,n){"use strict";var r=n("ebb5"),i=n("d58f").right,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("reduceRight",(function(e){var t=arguments.length;return i(o(this),e,t,t>1?arguments[1]:void 0)}))},"25f0":function(e,t,n){"use strict";var r=n("e330"),i=n("5e77").PROPER,o=n("6eeb"),s=n("825a"),a=n("3a9b"),c=n("577e"),l=n("d039"),u=n("ad6d"),d="toString",h=RegExp.prototype,p=h[d],f=r(u),g=l((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),m=i&&p.name!=d;(g||m)&&o(RegExp.prototype,d,(function(){var e=s(this),t=c(e.source),n=e.flags,r=c(void 0===n&&a(h,e)&&!("flags"in h)?f(e):n);return"/"+t+"/"+r}),{unsafe:!0})},2626:function(e,t,n){"use strict";var r=n("d066"),i=n("9bf2"),o=n("b622"),s=n("83ab"),a=o("species");e.exports=function(e){var t=r(e),n=i.f;s&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},"262e":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d9e2");function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}},"26dd":function(e,t,n){"use strict";var r=n("6f4f"),i=n("10db"),o=n("92f0"),s={};n("051b")(s,n("cc15")("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},2877:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},2954:function(e,t,n){"use strict";var r=n("ebb5"),i=n("b6b7"),o=n("d039"),s=n("f36a"),a=r.aTypedArray,c=r.exportTypedArrayMethod,l=o((function(){new Int8Array(1).slice()}));c("slice",(function(e,t){var n=s(a(this),e,t),r=i(this),o=0,c=n.length,l=new r(c);while(c>o)l[o]=n[o++];return l}),l)},"299c":function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=140)}({140:function(e,t,n){"use strict";n.r(t);var r=n(5),i=n.n(r),o=n(18),s=n.n(o),a=n(2),c=n(3),l=n(7),u=n.n(l),d={name:"ElTooltip",mixins:[i.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0},tabindex:{type:Number,default:0}},data:function(){return{tooltipId:"el-tooltip-"+Object(c["generateId"])(),timeoutPending:null,focusing:!1}},beforeCreate:function(){var e=this;this.$isServer||(this.popperVM=new u.a({data:{node:""},render:function(e){return this.node}}).$mount(),this.debounceClose=s()(200,(function(){return e.handleClosePopper()})))},render:function(e){var t=this;this.popperVM&&(this.popperVM.node=e("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[e("div",{on:{mouseleave:function(){t.setExpectedState(!1),t.debounceClose()},mouseenter:function(){t.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])]));var n=this.getFirstElement();if(!n)return null;var r=n.data=n.data||{};return r.staticClass=this.addTooltipClass(r.staticClass),n},mounted:function(){var e=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",this.tabindex),Object(a["on"])(this.referenceElm,"mouseenter",this.show),Object(a["on"])(this.referenceElm,"mouseleave",this.hide),Object(a["on"])(this.referenceElm,"focus",(function(){if(e.$slots.default&&e.$slots.default.length){var t=e.$slots.default[0].componentInstance;t&&t.focus?t.focus():e.handleFocus()}else e.handleFocus()})),Object(a["on"])(this.referenceElm,"blur",this.handleBlur),Object(a["on"])(this.referenceElm,"click",this.removeFocusing)),this.value&&this.popperVM&&this.popperVM.$nextTick((function(){e.value&&e.updatePopper()}))},watch:{focusing:function(e){e?Object(a["addClass"])(this.referenceElm,"focusing"):Object(a["removeClass"])(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},addTooltipClass:function(e){return e?"el-tooltip "+e.replace("el-tooltip",""):"el-tooltip"},handleShowPopper:function(){var e=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.showPopper=!0}),this.openDelay),this.hideAfter>0&&(this.timeoutPending=setTimeout((function(){e.showPopper=!1}),this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(e){!1===e&&clearTimeout(this.timeoutPending),this.expectedState=e},getFirstElement:function(){var e=this.$slots.default;if(!Array.isArray(e))return null;for(var t=null,n=0;n<e.length;n++)e[n]&&e[n].tag&&(t=e[n]);return t}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var e=this.referenceElm;1===e.nodeType&&(Object(a["off"])(e,"mouseenter",this.show),Object(a["off"])(e,"mouseleave",this.hide),Object(a["off"])(e,"focus",this.handleFocus),Object(a["off"])(e,"blur",this.handleBlur),Object(a["off"])(e,"click",this.removeFocusing))},install:function(e){e.component(d.name,d)}};t["default"]=d},18:function(e,t){e.exports=n("0e15")},2:function(e,t){e.exports=n("5924")},3:function(e,t){e.exports=n("8122")},5:function(e,t){e.exports=n("e974")},7:function(e,t){e.exports=n("2b0e")}})},"2a5e":function(e,t,n){"use strict";t.__esModule=!0,t.default=s;var r=n("2b0e"),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!i.default.prototype.$isServer)if(t){var n=[],r=t.offsetParent;while(r&&e!==r&&e.contains(r))n.push(r),r=r.offsetParent;var o=t.offsetTop+n.reduce((function(e,t){return e+t.offsetTop}),0),s=o+t.offsetHeight,a=e.scrollTop,c=a+e.clientHeight;o<a?e.scrollTop=o:s>c&&(e.scrollTop=s-e.clientHeight)}else e.scrollTop=0}},"2a62":function(e,t,n){var r=n("c65b"),i=n("825a"),o=n("dc4a");e.exports=function(e,t,n){var s,a;i(e);try{if(s=o(e,"return"),!s){if("throw"===t)throw n;return n}s=r(s,e)}catch(c){a=!0,s=c}if("throw"===t)throw n;if(a)throw s;return i(s),n}},"2b0e":function(e,t,n){"use strict";n.r(t),function(e){
/*!
 * Vue.js v2.6.14
 * (c) 2014-2021 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(e){return void 0===e||null===e}function i(e){return void 0!==e&&null!==e}function o(e){return!0===e}function s(e){return!1===e}function a(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function c(e){return null!==e&&"object"===typeof e}var l=Object.prototype.toString;function u(e){return"[object Object]"===l.call(e)}function d(e){return"[object RegExp]"===l.call(e)}function h(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function p(e){return i(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function f(e){return null==e?"":Array.isArray(e)||u(e)&&e.toString===l?JSON.stringify(e,null,2):String(e)}function g(e){var t=parseFloat(e);return isNaN(t)?e:t}function m(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}m("slot,component",!0);var _=m("key,ref,slot,slot-scope,is");function v(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var E=Object.prototype.hasOwnProperty;function A(e,t){return E.call(e,t)}function y(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var S=/-(\w)/g,b=y((function(e){return e.replace(S,(function(e,t){return t?t.toUpperCase():""}))})),C=y((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),T=/\B([A-Z])/g,I=y((function(e){return e.replace(T,"-$1").toLowerCase()}));function R(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function w(e,t){return e.bind(t)}var k=Function.prototype.bind?w:R;function O(e,t){t=t||0;var n=e.length-t,r=new Array(n);while(n--)r[n]=e[n+t];return r}function N(e,t){for(var n in t)e[n]=t[n];return e}function L(e){for(var t={},n=0;n<e.length;n++)e[n]&&N(t,e[n]);return t}function P(e,t,n){}var D=function(e,t,n){return!1},M=function(e){return e};function x(e,t){if(e===t)return!0;var n=c(e),r=c(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=Array.isArray(e),o=Array.isArray(t);if(i&&o)return e.length===t.length&&e.every((function(e,n){return x(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(i||o)return!1;var s=Object.keys(e),a=Object.keys(t);return s.length===a.length&&s.every((function(n){return x(e[n],t[n])}))}catch(l){return!1}}function B(e,t){for(var n=0;n<e.length;n++)if(x(e[n],t))return n;return-1}function U(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var F="data-server-rendered",V=["component","directive","filter"],j=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],G={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:D,isReservedAttr:D,isUnknownElement:D,getTagNamespace:P,parsePlatformTagName:M,mustUseProp:D,async:!0,_lifecycleHooks:j},H=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function Q(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function W(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var q=new RegExp("[^"+H.source+".$_\\d]");function z(e){if(!q.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var Z,$="__proto__"in{},K="undefined"!==typeof window,Y="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,J=Y&&WXEnvironment.platform.toLowerCase(),X=K&&window.navigator.userAgent.toLowerCase(),ee=X&&/msie|trident/.test(X),te=X&&X.indexOf("msie 9.0")>0,ne=X&&X.indexOf("edge/")>0,re=(X&&X.indexOf("android"),X&&/iphone|ipad|ipod|ios/.test(X)||"ios"===J),ie=(X&&/chrome\/\d+/.test(X),X&&/phantomjs/.test(X),X&&X.match(/firefox\/(\d+)/)),oe={}.watch,se=!1;if(K)try{var ae={};Object.defineProperty(ae,"passive",{get:function(){se=!0}}),window.addEventListener("test-passive",null,ae)}catch(Cs){}var ce=function(){return void 0===Z&&(Z=!K&&!Y&&"undefined"!==typeof e&&(e["process"]&&"server"===e["process"].env.VUE_ENV)),Z},le=K&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ue(e){return"function"===typeof e&&/native code/.test(e.toString())}var de,he="undefined"!==typeof Symbol&&ue(Symbol)&&"undefined"!==typeof Reflect&&ue(Reflect.ownKeys);de="undefined"!==typeof Set&&ue(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var pe=P,fe=0,ge=function(){this.id=fe++,this.subs=[]};ge.prototype.addSub=function(e){this.subs.push(e)},ge.prototype.removeSub=function(e){v(this.subs,e)},ge.prototype.depend=function(){ge.target&&ge.target.addDep(this)},ge.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},ge.target=null;var me=[];function _e(e){me.push(e),ge.target=e}function ve(){me.pop(),ge.target=me[me.length-1]}var Ee=function(e,t,n,r,i,o,s,a){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Ae={child:{configurable:!0}};Ae.child.get=function(){return this.componentInstance},Object.defineProperties(Ee.prototype,Ae);var ye=function(e){void 0===e&&(e="");var t=new Ee;return t.text=e,t.isComment=!0,t};function Se(e){return new Ee(void 0,void 0,void 0,String(e))}function be(e){var t=new Ee(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Ce=Array.prototype,Te=Object.create(Ce),Ie=["push","pop","shift","unshift","splice","sort","reverse"];Ie.forEach((function(e){var t=Ce[e];W(Te,e,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var i,o=t.apply(this,n),s=this.__ob__;switch(e){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&s.observeArray(i),s.dep.notify(),o}))}));var Re=Object.getOwnPropertyNames(Te),we=!0;function ke(e){we=e}var Oe=function(e){this.value=e,this.dep=new ge,this.vmCount=0,W(e,"__ob__",this),Array.isArray(e)?($?Ne(e,Te):Le(e,Te,Re),this.observeArray(e)):this.walk(e)};function Ne(e,t){e.__proto__=t}function Le(e,t,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];W(e,o,t[o])}}function Pe(e,t){var n;if(c(e)&&!(e instanceof Ee))return A(e,"__ob__")&&e.__ob__ instanceof Oe?n=e.__ob__:we&&!ce()&&(Array.isArray(e)||u(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Oe(e)),t&&n&&n.vmCount++,n}function De(e,t,n,r,i){var o=new ge,s=Object.getOwnPropertyDescriptor(e,t);if(!s||!1!==s.configurable){var a=s&&s.get,c=s&&s.set;a&&!c||2!==arguments.length||(n=e[t]);var l=!i&&Pe(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=a?a.call(e):n;return ge.target&&(o.depend(),l&&(l.dep.depend(),Array.isArray(t)&&Be(t))),t},set:function(t){var r=a?a.call(e):n;t===r||t!==t&&r!==r||a&&!c||(c?c.call(e,t):n=t,l=!i&&Pe(t),o.notify())}})}}function Me(e,t,n){if(Array.isArray(e)&&h(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(De(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function xe(e,t){if(Array.isArray(e)&&h(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||A(e,t)&&(delete e[t],n&&n.dep.notify())}}function Be(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Be(t)}Oe.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)De(e,t[n])},Oe.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Pe(e[t])};var Ue=G.optionMergeStrategies;function Fe(e,t){if(!t)return e;for(var n,r,i,o=he?Reflect.ownKeys(t):Object.keys(t),s=0;s<o.length;s++)n=o[s],"__ob__"!==n&&(r=e[n],i=t[n],A(e,n)?r!==i&&u(r)&&u(i)&&Fe(r,i):Me(e,n,i));return e}function Ve(e,t,n){return n?function(){var r="function"===typeof t?t.call(n,n):t,i="function"===typeof e?e.call(n,n):e;return r?Fe(r,i):i}:t?e?function(){return Fe("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function je(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?Ge(n):n}function Ge(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function He(e,t,n,r){var i=Object.create(e||null);return t?N(i,t):i}Ue.data=function(e,t,n){return n?Ve(e,t,n):t&&"function"!==typeof t?e:Ve(e,t)},j.forEach((function(e){Ue[e]=je})),V.forEach((function(e){Ue[e+"s"]=He})),Ue.watch=function(e,t,n,r){if(e===oe&&(e=void 0),t===oe&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var i={};for(var o in N(i,e),t){var s=i[o],a=t[o];s&&!Array.isArray(s)&&(s=[s]),i[o]=s?s.concat(a):Array.isArray(a)?a:[a]}return i},Ue.props=Ue.methods=Ue.inject=Ue.computed=function(e,t,n,r){if(!e)return t;var i=Object.create(null);return N(i,e),t&&N(i,t),i},Ue.provide=Ve;var Qe=function(e,t){return void 0===t?e:t};function We(e,t){var n=e.props;if(n){var r,i,o,s={};if(Array.isArray(n)){r=n.length;while(r--)i=n[r],"string"===typeof i&&(o=b(i),s[o]={type:null})}else if(u(n))for(var a in n)i=n[a],o=b(a),s[o]=u(i)?i:{type:i};else 0;e.props=s}}function qe(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(u(n))for(var o in n){var s=n[o];r[o]=u(s)?N({from:o},s):{from:s}}else 0}}function ze(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"===typeof r&&(t[n]={bind:r,update:r})}}function Ze(e,t,n){if("function"===typeof t&&(t=t.options),We(t,n),qe(t,n),ze(t),!t._base&&(t.extends&&(e=Ze(e,t.extends,n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)e=Ze(e,t.mixins[r],n);var o,s={};for(o in e)a(o);for(o in t)A(e,o)||a(o);function a(r){var i=Ue[r]||Qe;s[r]=i(e[r],t[r],n,r)}return s}function $e(e,t,n,r){if("string"===typeof n){var i=e[t];if(A(i,n))return i[n];var o=b(n);if(A(i,o))return i[o];var s=C(o);if(A(i,s))return i[s];var a=i[n]||i[o]||i[s];return a}}function Ke(e,t,n,r){var i=t[e],o=!A(n,e),s=n[e],a=tt(Boolean,i.type);if(a>-1)if(o&&!A(i,"default"))s=!1;else if(""===s||s===I(e)){var c=tt(String,i.type);(c<0||a<c)&&(s=!0)}if(void 0===s){s=Ye(r,i,e);var l=we;ke(!0),Pe(s),ke(l)}return s}function Ye(e,t,n){if(A(t,"default")){var r=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"===typeof r&&"Function"!==Xe(t.type)?r.call(e):r}}var Je=/^\s*function (\w+)/;function Xe(e){var t=e&&e.toString().match(Je);return t?t[1]:""}function et(e,t){return Xe(e)===Xe(t)}function tt(e,t){if(!Array.isArray(t))return et(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(et(t[n],e))return n;return-1}function nt(e,t,n){_e();try{if(t){var r=t;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var s=!1===i[o].call(r,e,t,n);if(s)return}catch(Cs){it(Cs,r,"errorCaptured hook")}}}it(e,t,n)}finally{ve()}}function rt(e,t,n,r,i){var o;try{o=n?e.apply(t,n):e.call(t),o&&!o._isVue&&p(o)&&!o._handled&&(o.catch((function(e){return nt(e,r,i+" (Promise/async)")})),o._handled=!0)}catch(Cs){nt(Cs,r,i)}return o}function it(e,t,n){if(G.errorHandler)try{return G.errorHandler.call(null,e,t,n)}catch(Cs){Cs!==e&&ot(Cs,null,"config.errorHandler")}ot(e,t,n)}function ot(e,t,n){if(!K&&!Y||"undefined"===typeof console)throw e;console.error(e)}var st,at=!1,ct=[],lt=!1;function ut(){lt=!1;var e=ct.slice(0);ct.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&ue(Promise)){var dt=Promise.resolve();st=function(){dt.then(ut),re&&setTimeout(P)},at=!0}else if(ee||"undefined"===typeof MutationObserver||!ue(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())st="undefined"!==typeof setImmediate&&ue(setImmediate)?function(){setImmediate(ut)}:function(){setTimeout(ut,0)};else{var ht=1,pt=new MutationObserver(ut),ft=document.createTextNode(String(ht));pt.observe(ft,{characterData:!0}),st=function(){ht=(ht+1)%2,ft.data=String(ht)},at=!0}function gt(e,t){var n;if(ct.push((function(){if(e)try{e.call(t)}catch(Cs){nt(Cs,t,"nextTick")}else n&&n(t)})),lt||(lt=!0,st()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}var mt=new de;function _t(e){vt(e,mt),mt.clear()}function vt(e,t){var n,r,i=Array.isArray(e);if(!(!i&&!c(e)||Object.isFrozen(e)||e instanceof Ee)){if(e.__ob__){var o=e.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(i){n=e.length;while(n--)vt(e[n],t)}else{r=Object.keys(e),n=r.length;while(n--)vt(e[r[n]],t)}}}var Et=y((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var r="!"===e.charAt(0);return e=r?e.slice(1):e,{name:e,once:n,capture:r,passive:t}}));function At(e,t){function n(){var e=arguments,r=n.fns;if(!Array.isArray(r))return rt(r,null,arguments,t,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)rt(i[o],null,e,t,"v-on handler")}return n.fns=e,n}function yt(e,t,n,i,s,a){var c,l,u,d;for(c in e)l=e[c],u=t[c],d=Et(c),r(l)||(r(u)?(r(l.fns)&&(l=e[c]=At(l,a)),o(d.once)&&(l=e[c]=s(d.name,l,d.capture)),n(d.name,l,d.capture,d.passive,d.params)):l!==u&&(u.fns=l,e[c]=u));for(c in t)r(e[c])&&(d=Et(c),i(d.name,t[c],d.capture))}function St(e,t,n){var s;e instanceof Ee&&(e=e.data.hook||(e.data.hook={}));var a=e[t];function c(){n.apply(this,arguments),v(s.fns,c)}r(a)?s=At([c]):i(a.fns)&&o(a.merged)?(s=a,s.fns.push(c)):s=At([a,c]),s.merged=!0,e[t]=s}function bt(e,t,n){var o=t.options.props;if(!r(o)){var s={},a=e.attrs,c=e.props;if(i(a)||i(c))for(var l in o){var u=I(l);Ct(s,c,l,u,!0)||Ct(s,a,l,u,!1)}return s}}function Ct(e,t,n,r,o){if(i(t)){if(A(t,n))return e[n]=t[n],o||delete t[n],!0;if(A(t,r))return e[n]=t[r],o||delete t[r],!0}return!1}function Tt(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function It(e){return a(e)?[Se(e)]:Array.isArray(e)?wt(e):void 0}function Rt(e){return i(e)&&i(e.text)&&s(e.isComment)}function wt(e,t){var n,s,c,l,u=[];for(n=0;n<e.length;n++)s=e[n],r(s)||"boolean"===typeof s||(c=u.length-1,l=u[c],Array.isArray(s)?s.length>0&&(s=wt(s,(t||"")+"_"+n),Rt(s[0])&&Rt(l)&&(u[c]=Se(l.text+s[0].text),s.shift()),u.push.apply(u,s)):a(s)?Rt(l)?u[c]=Se(l.text+s):""!==s&&u.push(Se(s)):Rt(s)&&Rt(l)?u[c]=Se(l.text+s.text):(o(e._isVList)&&i(s.tag)&&r(s.key)&&i(t)&&(s.key="__vlist"+t+"_"+n+"__"),u.push(s)));return u}function kt(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function Ot(e){var t=Nt(e.$options.inject,e);t&&(ke(!1),Object.keys(t).forEach((function(n){De(e,n,t[n])})),ke(!0))}function Nt(e,t){if(e){for(var n=Object.create(null),r=he?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var s=e[o].from,a=t;while(a){if(a._provided&&A(a._provided,s)){n[o]=a._provided[s];break}a=a.$parent}if(!a)if("default"in e[o]){var c=e[o].default;n[o]="function"===typeof c?c.call(t):c}else 0}}return n}}function Lt(e,t){if(!e||!e.length)return{};for(var n={},r=0,i=e.length;r<i;r++){var o=e[r],s=o.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,o.context!==t&&o.fnContext!==t||!s||null==s.slot)(n.default||(n.default=[])).push(o);else{var a=s.slot,c=n[a]||(n[a]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var l in n)n[l].every(Pt)&&delete n[l];return n}function Pt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Dt(e){return e.isComment&&e.asyncFactory}function Mt(e,t,r){var i,o=Object.keys(t).length>0,s=e?!!e.$stable:!o,a=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&r&&r!==n&&a===r.$key&&!o&&!r.$hasNormal)return r;for(var c in i={},e)e[c]&&"$"!==c[0]&&(i[c]=xt(t,c,e[c]))}else i={};for(var l in t)l in i||(i[l]=Bt(t,l));return e&&Object.isExtensible(e)&&(e._normalized=i),W(i,"$stable",s),W(i,"$key",a),W(i,"$hasNormal",o),i}function xt(e,t,n){var r=function(){var e=arguments.length?n.apply(null,arguments):n({});e=e&&"object"===typeof e&&!Array.isArray(e)?[e]:It(e);var t=e&&e[0];return e&&(!t||1===e.length&&t.isComment&&!Dt(t))?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function Bt(e,t){return function(){return e[t]}}function Ut(e,t){var n,r,o,s,a;if(Array.isArray(e)||"string"===typeof e)for(n=new Array(e.length),r=0,o=e.length;r<o;r++)n[r]=t(e[r],r);else if("number"===typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(c(e))if(he&&e[Symbol.iterator]){n=[];var l=e[Symbol.iterator](),u=l.next();while(!u.done)n.push(t(u.value,n.length)),u=l.next()}else for(s=Object.keys(e),n=new Array(s.length),r=0,o=s.length;r<o;r++)a=s[r],n[r]=t(e[a],a,r);return i(n)||(n=[]),n._isVList=!0,n}function Ft(e,t,n,r){var i,o=this.$scopedSlots[e];o?(n=n||{},r&&(n=N(N({},r),n)),i=o(n)||("function"===typeof t?t():t)):i=this.$slots[e]||("function"===typeof t?t():t);var s=n&&n.slot;return s?this.$createElement("template",{slot:s},i):i}function Vt(e){return $e(this.$options,"filters",e,!0)||M}function jt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Gt(e,t,n,r,i){var o=G.keyCodes[t]||n;return i&&r&&!G.keyCodes[t]?jt(i,r):o?jt(o,e):r?I(r)!==t:void 0===e}function Ht(e,t,n,r,i){if(n)if(c(n)){var o;Array.isArray(n)&&(n=L(n));var s=function(s){if("class"===s||"style"===s||_(s))o=e;else{var a=e.attrs&&e.attrs.type;o=r||G.mustUseProp(t,a,s)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=b(s),l=I(s);if(!(c in o)&&!(l in o)&&(o[s]=n[s],i)){var u=e.on||(e.on={});u["update:"+s]=function(e){n[s]=e}}};for(var a in n)s(a)}else;return e}function Qt(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t||(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),qt(r,"__static__"+e,!1)),r}function Wt(e,t,n){return qt(e,"__once__"+t+(n?"_"+n:""),!0),e}function qt(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!==typeof e[r]&&zt(e[r],t+"_"+r,n);else zt(e,t,n)}function zt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Zt(e,t){if(t)if(u(t)){var n=e.on=e.on?N({},e.on):{};for(var r in t){var i=n[r],o=t[r];n[r]=i?[].concat(i,o):o}}else;return e}function $t(e,t,n,r){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var o=e[i];Array.isArray(o)?$t(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return r&&(t.$key=r),t}function Kt(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"===typeof r&&r&&(e[t[n]]=t[n+1])}return e}function Yt(e,t){return"string"===typeof e?t+e:e}function Jt(e){e._o=Wt,e._n=g,e._s=f,e._l=Ut,e._t=Ft,e._q=x,e._i=B,e._m=Qt,e._f=Vt,e._k=Gt,e._b=Ht,e._v=Se,e._e=ye,e._u=$t,e._g=Zt,e._d=Kt,e._p=Yt}function Xt(e,t,r,i,s){var a,c=this,l=s.options;A(i,"_uid")?(a=Object.create(i),a._original=i):(a=i,i=i._original);var u=o(l._compiled),d=!u;this.data=e,this.props=t,this.children=r,this.parent=i,this.listeners=e.on||n,this.injections=Nt(l.inject,i),this.slots=function(){return c.$slots||Mt(e.scopedSlots,c.$slots=Lt(r,i)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Mt(e.scopedSlots,this.slots())}}),u&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=Mt(e.scopedSlots,this.$slots)),l._scopeId?this._c=function(e,t,n,r){var o=pn(a,e,t,n,r,d);return o&&!Array.isArray(o)&&(o.fnScopeId=l._scopeId,o.fnContext=i),o}:this._c=function(e,t,n,r){return pn(a,e,t,n,r,d)}}function en(e,t,r,o,s){var a=e.options,c={},l=a.props;if(i(l))for(var u in l)c[u]=Ke(u,l,t||n);else i(r.attrs)&&nn(c,r.attrs),i(r.props)&&nn(c,r.props);var d=new Xt(r,c,s,o,e),h=a.render.call(null,d._c,d);if(h instanceof Ee)return tn(h,r,d.parent,a,d);if(Array.isArray(h)){for(var p=It(h)||[],f=new Array(p.length),g=0;g<p.length;g++)f[g]=tn(p[g],r,d.parent,a,d);return f}}function tn(e,t,n,r,i){var o=be(e);return o.fnContext=n,o.fnOptions=r,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function nn(e,t){for(var n in t)e[b(n)]=t[n]}Jt(Xt.prototype);var rn={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;rn.prepatch(n,n)}else{var r=e.componentInstance=an(e,Nn);r.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,r=t.componentInstance=e.componentInstance;xn(r,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,Vn(n,"mounted")),e.data.keepAlive&&(t._isMounted?Xn(n):Un(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Fn(t,!0):t.$destroy())}},on=Object.keys(rn);function sn(e,t,n,s,a){if(!r(e)){var l=n.$options._base;if(c(e)&&(e=l.extend(e)),"function"===typeof e){var u;if(r(e.cid)&&(u=e,e=bn(u,l),void 0===e))return Sn(u,t,n,s,a);t=t||{},Sr(e),i(t.model)&&un(e.options,t);var d=bt(t,e,a);if(o(e.options.functional))return en(e,d,t,n,s);var h=t.on;if(t.on=t.nativeOn,o(e.options.abstract)){var p=t.slot;t={},p&&(t.slot=p)}cn(t);var f=e.options.name||a,g=new Ee("vue-component-"+e.cid+(f?"-"+f:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:d,listeners:h,tag:a,children:s},u);return g}}}function an(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}function cn(e){for(var t=e.hook||(e.hook={}),n=0;n<on.length;n++){var r=on[n],i=t[r],o=rn[r];i===o||i&&i._merged||(t[r]=i?ln(o,i):o)}}function ln(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function un(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var o=t.on||(t.on={}),s=o[r],a=t.model.callback;i(s)?(Array.isArray(s)?-1===s.indexOf(a):s!==a)&&(o[r]=[a].concat(s)):o[r]=a}var dn=1,hn=2;function pn(e,t,n,r,i,s){return(Array.isArray(n)||a(n))&&(i=r,r=n,n=void 0),o(s)&&(i=hn),fn(e,t,n,r,i)}function fn(e,t,n,r,o){if(i(n)&&i(n.__ob__))return ye();if(i(n)&&i(n.is)&&(t=n.is),!t)return ye();var s,a,c;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===hn?r=It(r):o===dn&&(r=Tt(r)),"string"===typeof t)?(a=e.$vnode&&e.$vnode.ns||G.getTagNamespace(t),s=G.isReservedTag(t)?new Ee(G.parsePlatformTagName(t),n,r,void 0,void 0,e):n&&n.pre||!i(c=$e(e.$options,"components",t))?new Ee(t,n,r,void 0,void 0,e):sn(c,n,e,r,t)):s=sn(t,n,e,r);return Array.isArray(s)?s:i(s)?(i(a)&&gn(s,a),i(n)&&mn(n),s):ye()}function gn(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),i(e.children))for(var s=0,a=e.children.length;s<a;s++){var c=e.children[s];i(c.tag)&&(r(c.ns)||o(n)&&"svg"!==c.tag)&&gn(c,t,n)}}function mn(e){c(e.style)&&_t(e.style),c(e.class)&&_t(e.class)}function _n(e){e._vnode=null,e._staticTrees=null;var t=e.$options,r=e.$vnode=t._parentVnode,i=r&&r.context;e.$slots=Lt(t._renderChildren,i),e.$scopedSlots=n,e._c=function(t,n,r,i){return pn(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return pn(e,t,n,r,i,!0)};var o=r&&r.data;De(e,"$attrs",o&&o.attrs||n,null,!0),De(e,"$listeners",t._parentListeners||n,null,!0)}var vn,En=null;function An(e){Jt(e.prototype),e.prototype.$nextTick=function(e){return gt(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,r=n.render,i=n._parentVnode;i&&(t.$scopedSlots=Mt(i.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=i;try{En=t,e=r.call(t._renderProxy,t.$createElement)}catch(Cs){nt(Cs,t,"render"),e=t._vnode}finally{En=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof Ee||(e=ye()),e.parent=i,e}}function yn(e,t){return(e.__esModule||he&&"Module"===e[Symbol.toStringTag])&&(e=e.default),c(e)?t.extend(e):e}function Sn(e,t,n,r,i){var o=ye();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:r,tag:i},o}function bn(e,t){if(o(e.error)&&i(e.errorComp))return e.errorComp;if(i(e.resolved))return e.resolved;var n=En;if(n&&i(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),o(e.loading)&&i(e.loadingComp))return e.loadingComp;if(n&&!i(e.owners)){var s=e.owners=[n],a=!0,l=null,u=null;n.$on("hook:destroyed",(function(){return v(s,n)}));var d=function(e){for(var t=0,n=s.length;t<n;t++)s[t].$forceUpdate();e&&(s.length=0,null!==l&&(clearTimeout(l),l=null),null!==u&&(clearTimeout(u),u=null))},h=U((function(n){e.resolved=yn(n,t),a?s.length=0:d(!0)})),f=U((function(t){i(e.errorComp)&&(e.error=!0,d(!0))})),g=e(h,f);return c(g)&&(p(g)?r(e.resolved)&&g.then(h,f):p(g.component)&&(g.component.then(h,f),i(g.error)&&(e.errorComp=yn(g.error,t)),i(g.loading)&&(e.loadingComp=yn(g.loading,t),0===g.delay?e.loading=!0:l=setTimeout((function(){l=null,r(e.resolved)&&r(e.error)&&(e.loading=!0,d(!1))}),g.delay||200)),i(g.timeout)&&(u=setTimeout((function(){u=null,r(e.resolved)&&f(null)}),g.timeout)))),a=!1,e.loading?e.loadingComp:e.resolved}}function Cn(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(i(n)&&(i(n.componentOptions)||Dt(n)))return n}}function Tn(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&kn(e,t)}function In(e,t){vn.$on(e,t)}function Rn(e,t){vn.$off(e,t)}function wn(e,t){var n=vn;return function r(){var i=t.apply(null,arguments);null!==i&&n.$off(e,r)}}function kn(e,t,n){vn=e,yt(t,n||{},In,Rn,wn,e),vn=void 0}function On(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var i=0,o=e.length;i<o;i++)r.$on(e[i],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,i=e.length;r<i;r++)n.$off(e[r],t);return n}var o,s=n._events[e];if(!s)return n;if(!t)return n._events[e]=null,n;var a=s.length;while(a--)if(o=s[a],o===t||o.fn===t){s.splice(a,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?O(n):n;for(var r=O(arguments,1),i='event handler for "'+e+'"',o=0,s=n.length;o<s;o++)rt(n[o],t,r,t,i)}return t}}var Nn=null;function Ln(e){var t=Nn;return Nn=e,function(){Nn=t}}function Pn(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Dn(e){e.prototype._update=function(e,t){var n=this,r=n.$el,i=n._vnode,o=Ln(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Vn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||v(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;while(n--)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Vn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Mn(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=ye),Vn(e,"beforeMount"),r=function(){e._update(e._render(),n)},new rr(e,r,P,{before:function(){e._isMounted&&!e._isDestroyed&&Vn(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,Vn(e,"mounted")),e}function xn(e,t,r,i,o){var s=i.data.scopedSlots,a=e.$scopedSlots,c=!!(s&&!s.$stable||a!==n&&!a.$stable||s&&e.$scopedSlots.$key!==s.$key||!s&&e.$scopedSlots.$key),l=!!(o||e.$options._renderChildren||c);if(e.$options._parentVnode=i,e.$vnode=i,e._vnode&&(e._vnode.parent=i),e.$options._renderChildren=o,e.$attrs=i.data.attrs||n,e.$listeners=r||n,t&&e.$options.props){ke(!1);for(var u=e._props,d=e.$options._propKeys||[],h=0;h<d.length;h++){var p=d[h],f=e.$options.props;u[p]=Ke(p,f,t,e)}ke(!0),e.$options.propsData=t}r=r||n;var g=e.$options._parentListeners;e.$options._parentListeners=r,kn(e,r,g),l&&(e.$slots=Lt(o,i.context),e.$forceUpdate())}function Bn(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Un(e,t){if(t){if(e._directInactive=!1,Bn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Un(e.$children[n]);Vn(e,"activated")}}function Fn(e,t){if((!t||(e._directInactive=!0,!Bn(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Fn(e.$children[n]);Vn(e,"deactivated")}}function Vn(e,t){_e();var n=e.$options[t],r=t+" hook";if(n)for(var i=0,o=n.length;i<o;i++)rt(n[i],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+t),ve()}var jn=[],Gn=[],Hn={},Qn=!1,Wn=!1,qn=0;function zn(){qn=jn.length=Gn.length=0,Hn={},Qn=Wn=!1}var Zn=0,$n=Date.now;if(K&&!ee){var Kn=window.performance;Kn&&"function"===typeof Kn.now&&$n()>document.createEvent("Event").timeStamp&&($n=function(){return Kn.now()})}function Yn(){var e,t;for(Zn=$n(),Wn=!0,jn.sort((function(e,t){return e.id-t.id})),qn=0;qn<jn.length;qn++)e=jn[qn],e.before&&e.before(),t=e.id,Hn[t]=null,e.run();var n=Gn.slice(),r=jn.slice();zn(),er(n),Jn(r),le&&G.devtools&&le.emit("flush")}function Jn(e){var t=e.length;while(t--){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Vn(r,"updated")}}function Xn(e){e._inactive=!1,Gn.push(e)}function er(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Un(e[t],!0)}function tr(e){var t=e.id;if(null==Hn[t]){if(Hn[t]=!0,Wn){var n=jn.length-1;while(n>qn&&jn[n].id>e.id)n--;jn.splice(n+1,0,e)}else jn.push(e);Qn||(Qn=!0,gt(Yn))}}var nr=0,rr=function(e,t,n,r,i){this.vm=e,i&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++nr,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new de,this.newDepIds=new de,this.expression="","function"===typeof t?this.getter=t:(this.getter=z(t),this.getter||(this.getter=P)),this.value=this.lazy?void 0:this.get()};rr.prototype.get=function(){var e;_e(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(Cs){if(!this.user)throw Cs;nt(Cs,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&_t(e),ve(),this.cleanupDeps()}return e},rr.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},rr.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},rr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():tr(this)},rr.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||c(e)||this.deep){var t=this.value;if(this.value=e,this.user){var n='callback for watcher "'+this.expression+'"';rt(this.cb,this.vm,[e,t],this.vm,n)}else this.cb.call(this.vm,e,t)}}},rr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},rr.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},rr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||v(this.vm._watchers,this);var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1}};var ir={enumerable:!0,configurable:!0,get:P,set:P};function or(e,t,n){ir.get=function(){return this[t][n]},ir.set=function(e){this[t][n]=e},Object.defineProperty(e,n,ir)}function sr(e){e._watchers=[];var t=e.$options;t.props&&ar(e,t.props),t.methods&&gr(e,t.methods),t.data?cr(e):Pe(e._data={},!0),t.computed&&dr(e,t.computed),t.watch&&t.watch!==oe&&mr(e,t.watch)}function ar(e,t){var n=e.$options.propsData||{},r=e._props={},i=e.$options._propKeys=[],o=!e.$parent;o||ke(!1);var s=function(o){i.push(o);var s=Ke(o,t,n,e);De(r,o,s),o in e||or(e,"_props",o)};for(var a in t)s(a);ke(!0)}function cr(e){var t=e.$options.data;t=e._data="function"===typeof t?lr(t,e):t||{},u(t)||(t={});var n=Object.keys(t),r=e.$options.props,i=(e.$options.methods,n.length);while(i--){var o=n[i];0,r&&A(r,o)||Q(o)||or(e,"_data",o)}Pe(t,!0)}function lr(e,t){_e();try{return e.call(t,t)}catch(Cs){return nt(Cs,t,"data()"),{}}finally{ve()}}var ur={lazy:!0};function dr(e,t){var n=e._computedWatchers=Object.create(null),r=ce();for(var i in t){var o=t[i],s="function"===typeof o?o:o.get;0,r||(n[i]=new rr(e,s||P,P,ur)),i in e||hr(e,i,o)}}function hr(e,t,n){var r=!ce();"function"===typeof n?(ir.get=r?pr(t):fr(n),ir.set=P):(ir.get=n.get?r&&!1!==n.cache?pr(t):fr(n.get):P,ir.set=n.set||P),Object.defineProperty(e,t,ir)}function pr(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),ge.target&&t.depend(),t.value}}function fr(e){return function(){return e.call(this,this)}}function gr(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?P:k(t[n],e)}function mr(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)_r(e,n,r[i]);else _r(e,n,r)}}function _r(e,t,n,r){return u(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,r)}function vr(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Me,e.prototype.$delete=xe,e.prototype.$watch=function(e,t,n){var r=this;if(u(t))return _r(r,e,t,n);n=n||{},n.user=!0;var i=new rr(r,e,t,n);if(n.immediate){var o='callback for immediate watcher "'+i.expression+'"';_e(),rt(t,r,[i.value],r,o),ve()}return function(){i.teardown()}}}var Er=0;function Ar(e){e.prototype._init=function(e){var t=this;t._uid=Er++,t._isVue=!0,e&&e._isComponent?yr(t,e):t.$options=Ze(Sr(t.constructor),e||{},t),t._renderProxy=t,t._self=t,Pn(t),Tn(t),_n(t),Vn(t,"beforeCreate"),Ot(t),sr(t),kt(t),Vn(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function yr(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function Sr(e){var t=e.options;if(e.super){var n=Sr(e.super),r=e.superOptions;if(n!==r){e.superOptions=n;var i=br(e);i&&N(e.extendOptions,i),t=e.options=Ze(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function br(e){var t,n=e.options,r=e.sealedOptions;for(var i in n)n[i]!==r[i]&&(t||(t={}),t[i]=n[i]);return t}function Cr(e){this._init(e)}function Tr(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=O(arguments,1);return n.unshift(this),"function"===typeof e.install?e.install.apply(e,n):"function"===typeof e&&e.apply(null,n),t.push(e),this}}function Ir(e){e.mixin=function(e){return this.options=Ze(this.options,e),this}}function Rr(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var o=e.name||n.options.name;var s=function(e){this._init(e)};return s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.cid=t++,s.options=Ze(n.options,e),s["super"]=n,s.options.props&&wr(s),s.options.computed&&kr(s),s.extend=n.extend,s.mixin=n.mixin,s.use=n.use,V.forEach((function(e){s[e]=n[e]})),o&&(s.options.components[o]=s),s.superOptions=n.options,s.extendOptions=e,s.sealedOptions=N({},s.options),i[r]=s,s}}function wr(e){var t=e.options.props;for(var n in t)or(e.prototype,"_props",n)}function kr(e){var t=e.options.computed;for(var n in t)hr(e.prototype,n,t[n])}function Or(e){V.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&u(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"===typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}function Nr(e){return e&&(e.Ctor.options.name||e.tag)}function Lr(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!d(e)&&e.test(t)}function Pr(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var o in n){var s=n[o];if(s){var a=s.name;a&&!t(a)&&Dr(n,o,r,i)}}}function Dr(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,v(n,t)}Ar(Cr),vr(Cr),On(Cr),Dn(Cr),An(Cr);var Mr=[String,RegExp,Array],xr={name:"keep-alive",abstract:!0,props:{include:Mr,exclude:Mr,max:[String,Number]},methods:{cacheVNode:function(){var e=this,t=e.cache,n=e.keys,r=e.vnodeToCache,i=e.keyToCache;if(r){var o=r.tag,s=r.componentInstance,a=r.componentOptions;t[i]={name:Nr(a),tag:o,componentInstance:s},n.push(i),this.max&&n.length>parseInt(this.max)&&Dr(t,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Dr(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){Pr(e,(function(e){return Lr(t,e)}))})),this.$watch("exclude",(function(t){Pr(e,(function(e){return!Lr(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=Cn(e),n=t&&t.componentOptions;if(n){var r=Nr(n),i=this,o=i.include,s=i.exclude;if(o&&(!r||!Lr(o,r))||s&&r&&Lr(s,r))return t;var a=this,c=a.cache,l=a.keys,u=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;c[u]?(t.componentInstance=c[u].componentInstance,v(l,u),l.push(u)):(this.vnodeToCache=t,this.keyToCache=u),t.data.keepAlive=!0}return t||e&&e[0]}},Br={KeepAlive:xr};function Ur(e){var t={get:function(){return G}};Object.defineProperty(e,"config",t),e.util={warn:pe,extend:N,mergeOptions:Ze,defineReactive:De},e.set=Me,e.delete=xe,e.nextTick=gt,e.observable=function(e){return Pe(e),e},e.options=Object.create(null),V.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,N(e.options.components,Br),Tr(e),Ir(e),Rr(e),Or(e)}Ur(Cr),Object.defineProperty(Cr.prototype,"$isServer",{get:ce}),Object.defineProperty(Cr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Cr,"FunctionalRenderContext",{value:Xt}),Cr.version="2.6.14";var Fr=m("style,class"),Vr=m("input,textarea,option,select,progress"),jr=function(e,t,n){return"value"===n&&Vr(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Gr=m("contenteditable,draggable,spellcheck"),Hr=m("events,caret,typing,plaintext-only"),Qr=function(e,t){return $r(t)||"false"===t?"false":"contenteditable"===e&&Hr(t)?t:"true"},Wr=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),qr="http://www.w3.org/1999/xlink",zr=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Zr=function(e){return zr(e)?e.slice(6,e.length):""},$r=function(e){return null==e||!1===e};function Kr(e){var t=e.data,n=e,r=e;while(i(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(t=Yr(r.data,t));while(i(n=n.parent))n&&n.data&&(t=Yr(t,n.data));return Jr(t.staticClass,t.class)}function Yr(e,t){return{staticClass:Xr(e.staticClass,t.staticClass),class:i(e.class)?[e.class,t.class]:t.class}}function Jr(e,t){return i(e)||i(t)?Xr(e,ei(t)):""}function Xr(e,t){return e?t?e+" "+t:e:t||""}function ei(e){return Array.isArray(e)?ti(e):c(e)?ni(e):"string"===typeof e?e:""}function ti(e){for(var t,n="",r=0,o=e.length;r<o;r++)i(t=ei(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function ni(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var ri={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ii=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),oi=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),si=function(e){return ii(e)||oi(e)};function ai(e){return oi(e)?"svg":"math"===e?"math":void 0}var ci=Object.create(null);function li(e){if(!K)return!0;if(si(e))return!1;if(e=e.toLowerCase(),null!=ci[e])return ci[e];var t=document.createElement(e);return e.indexOf("-")>-1?ci[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:ci[e]=/HTMLUnknownElement/.test(t.toString())}var ui=m("text,number,password,search,email,tel,url");function di(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function hi(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function pi(e,t){return document.createElementNS(ri[e],t)}function fi(e){return document.createTextNode(e)}function gi(e){return document.createComment(e)}function mi(e,t,n){e.insertBefore(t,n)}function _i(e,t){e.removeChild(t)}function vi(e,t){e.appendChild(t)}function Ei(e){return e.parentNode}function Ai(e){return e.nextSibling}function yi(e){return e.tagName}function Si(e,t){e.textContent=t}function bi(e,t){e.setAttribute(t,"")}var Ci=Object.freeze({createElement:hi,createElementNS:pi,createTextNode:fi,createComment:gi,insertBefore:mi,removeChild:_i,appendChild:vi,parentNode:Ei,nextSibling:Ai,tagName:yi,setTextContent:Si,setStyleScope:bi}),Ti={create:function(e,t){Ii(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Ii(e,!0),Ii(t))},destroy:function(e){Ii(e,!0)}};function Ii(e,t){var n=e.data.ref;if(i(n)){var r=e.context,o=e.componentInstance||e.elm,s=r.$refs;t?Array.isArray(s[n])?v(s[n],o):s[n]===o&&(s[n]=void 0):e.data.refInFor?Array.isArray(s[n])?s[n].indexOf(o)<0&&s[n].push(o):s[n]=[o]:s[n]=o}}var Ri=new Ee("",{},[]),wi=["create","activate","update","remove","destroy"];function ki(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&i(e.data)===i(t.data)&&Oi(e,t)||o(e.isAsyncPlaceholder)&&r(t.asyncFactory.error))}function Oi(e,t){if("input"!==e.tag)return!0;var n,r=i(n=e.data)&&i(n=n.attrs)&&n.type,o=i(n=t.data)&&i(n=n.attrs)&&n.type;return r===o||ui(r)&&ui(o)}function Ni(e,t,n){var r,o,s={};for(r=t;r<=n;++r)o=e[r].key,i(o)&&(s[o]=r);return s}function Li(e){var t,n,s={},c=e.modules,l=e.nodeOps;for(t=0;t<wi.length;++t)for(s[wi[t]]=[],n=0;n<c.length;++n)i(c[n][wi[t]])&&s[wi[t]].push(c[n][wi[t]]);function u(e){return new Ee(l.tagName(e).toLowerCase(),{},[],void 0,e)}function d(e,t){function n(){0===--n.listeners&&h(e)}return n.listeners=t,n}function h(e){var t=l.parentNode(e);i(t)&&l.removeChild(t,e)}function p(e,t,n,r,s,a,c){if(i(e.elm)&&i(a)&&(e=a[c]=be(e)),e.isRootInsert=!s,!f(e,t,n,r)){var u=e.data,d=e.children,h=e.tag;i(h)?(e.elm=e.ns?l.createElementNS(e.ns,h):l.createElement(h,e),S(e),E(e,d,t),i(u)&&y(e,t),v(n,e.elm,r)):o(e.isComment)?(e.elm=l.createComment(e.text),v(n,e.elm,r)):(e.elm=l.createTextNode(e.text),v(n,e.elm,r))}}function f(e,t,n,r){var s=e.data;if(i(s)){var a=i(e.componentInstance)&&s.keepAlive;if(i(s=s.hook)&&i(s=s.init)&&s(e,!1),i(e.componentInstance))return g(e,t),v(n,e.elm,r),o(a)&&_(e,t,n,r),!0}}function g(e,t){i(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,A(e)?(y(e,t),S(e)):(Ii(e),t.push(e))}function _(e,t,n,r){var o,a=e;while(a.componentInstance)if(a=a.componentInstance._vnode,i(o=a.data)&&i(o=o.transition)){for(o=0;o<s.activate.length;++o)s.activate[o](Ri,a);t.push(a);break}v(n,e.elm,r)}function v(e,t,n){i(e)&&(i(n)?l.parentNode(n)===e&&l.insertBefore(e,t,n):l.appendChild(e,t))}function E(e,t,n){if(Array.isArray(t)){0;for(var r=0;r<t.length;++r)p(t[r],n,e.elm,null,!0,t,r)}else a(e.text)&&l.appendChild(e.elm,l.createTextNode(String(e.text)))}function A(e){while(e.componentInstance)e=e.componentInstance._vnode;return i(e.tag)}function y(e,n){for(var r=0;r<s.create.length;++r)s.create[r](Ri,e);t=e.data.hook,i(t)&&(i(t.create)&&t.create(Ri,e),i(t.insert)&&n.push(e))}function S(e){var t;if(i(t=e.fnScopeId))l.setStyleScope(e.elm,t);else{var n=e;while(n)i(t=n.context)&&i(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t),n=n.parent}i(t=Nn)&&t!==e.context&&t!==e.fnContext&&i(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t)}function b(e,t,n,r,i,o){for(;r<=i;++r)p(n[r],o,e,t,!1,n,r)}function C(e){var t,n,r=e.data;if(i(r))for(i(t=r.hook)&&i(t=t.destroy)&&t(e),t=0;t<s.destroy.length;++t)s.destroy[t](e);if(i(t=e.children))for(n=0;n<e.children.length;++n)C(e.children[n])}function T(e,t,n){for(;t<=n;++t){var r=e[t];i(r)&&(i(r.tag)?(I(r),C(r)):h(r.elm))}}function I(e,t){if(i(t)||i(e.data)){var n,r=s.remove.length+1;for(i(t)?t.listeners+=r:t=d(e.elm,r),i(n=e.componentInstance)&&i(n=n._vnode)&&i(n.data)&&I(n,t),n=0;n<s.remove.length;++n)s.remove[n](e,t);i(n=e.data.hook)&&i(n=n.remove)?n(e,t):t()}else h(e.elm)}function R(e,t,n,o,s){var a,c,u,d,h=0,f=0,g=t.length-1,m=t[0],_=t[g],v=n.length-1,E=n[0],A=n[v],y=!s;while(h<=g&&f<=v)r(m)?m=t[++h]:r(_)?_=t[--g]:ki(m,E)?(k(m,E,o,n,f),m=t[++h],E=n[++f]):ki(_,A)?(k(_,A,o,n,v),_=t[--g],A=n[--v]):ki(m,A)?(k(m,A,o,n,v),y&&l.insertBefore(e,m.elm,l.nextSibling(_.elm)),m=t[++h],A=n[--v]):ki(_,E)?(k(_,E,o,n,f),y&&l.insertBefore(e,_.elm,m.elm),_=t[--g],E=n[++f]):(r(a)&&(a=Ni(t,h,g)),c=i(E.key)?a[E.key]:w(E,t,h,g),r(c)?p(E,o,e,m.elm,!1,n,f):(u=t[c],ki(u,E)?(k(u,E,o,n,f),t[c]=void 0,y&&l.insertBefore(e,u.elm,m.elm)):p(E,o,e,m.elm,!1,n,f)),E=n[++f]);h>g?(d=r(n[v+1])?null:n[v+1].elm,b(e,d,n,f,v,o)):f>v&&T(t,h,g)}function w(e,t,n,r){for(var o=n;o<r;o++){var s=t[o];if(i(s)&&ki(e,s))return o}}function k(e,t,n,a,c,u){if(e!==t){i(t.elm)&&i(a)&&(t=a[c]=be(t));var d=t.elm=e.elm;if(o(e.isAsyncPlaceholder))i(t.asyncFactory.resolved)?L(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(o(t.isStatic)&&o(e.isStatic)&&t.key===e.key&&(o(t.isCloned)||o(t.isOnce)))t.componentInstance=e.componentInstance;else{var h,p=t.data;i(p)&&i(h=p.hook)&&i(h=h.prepatch)&&h(e,t);var f=e.children,g=t.children;if(i(p)&&A(t)){for(h=0;h<s.update.length;++h)s.update[h](e,t);i(h=p.hook)&&i(h=h.update)&&h(e,t)}r(t.text)?i(f)&&i(g)?f!==g&&R(d,f,g,n,u):i(g)?(i(e.text)&&l.setTextContent(d,""),b(d,null,g,0,g.length-1,n)):i(f)?T(f,0,f.length-1):i(e.text)&&l.setTextContent(d,""):e.text!==t.text&&l.setTextContent(d,t.text),i(p)&&i(h=p.hook)&&i(h=h.postpatch)&&h(e,t)}}}function O(e,t,n){if(o(n)&&i(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var N=m("attrs,class,staticClass,staticStyle,key");function L(e,t,n,r){var s,a=t.tag,c=t.data,l=t.children;if(r=r||c&&c.pre,t.elm=e,o(t.isComment)&&i(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(i(c)&&(i(s=c.hook)&&i(s=s.init)&&s(t,!0),i(s=t.componentInstance)))return g(t,n),!0;if(i(a)){if(i(l))if(e.hasChildNodes())if(i(s=c)&&i(s=s.domProps)&&i(s=s.innerHTML)){if(s!==e.innerHTML)return!1}else{for(var u=!0,d=e.firstChild,h=0;h<l.length;h++){if(!d||!L(d,l[h],n,r)){u=!1;break}d=d.nextSibling}if(!u||d)return!1}else E(t,l,n);if(i(c)){var p=!1;for(var f in c)if(!N(f)){p=!0,y(t,n);break}!p&&c["class"]&&_t(c["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,a){if(!r(t)){var c=!1,d=[];if(r(e))c=!0,p(t,d);else{var h=i(e.nodeType);if(!h&&ki(e,t))k(e,t,d,null,null,a);else{if(h){if(1===e.nodeType&&e.hasAttribute(F)&&(e.removeAttribute(F),n=!0),o(n)&&L(e,t,d))return O(t,d,!0),e;e=u(e)}var f=e.elm,g=l.parentNode(f);if(p(t,d,f._leaveCb?null:g,l.nextSibling(f)),i(t.parent)){var m=t.parent,_=A(t);while(m){for(var v=0;v<s.destroy.length;++v)s.destroy[v](m);if(m.elm=t.elm,_){for(var E=0;E<s.create.length;++E)s.create[E](Ri,m);var y=m.data.hook.insert;if(y.merged)for(var S=1;S<y.fns.length;S++)y.fns[S]()}else Ii(m);m=m.parent}}i(g)?T([e],0,0):i(e.tag)&&C(e)}}return O(t,d,c),t.elm}i(e)&&C(e)}}var Pi={create:Di,update:Di,destroy:function(e){Di(e,Ri)}};function Di(e,t){(e.data.directives||t.data.directives)&&Mi(e,t)}function Mi(e,t){var n,r,i,o=e===Ri,s=t===Ri,a=Bi(e.data.directives,e.context),c=Bi(t.data.directives,t.context),l=[],u=[];for(n in c)r=a[n],i=c[n],r?(i.oldValue=r.value,i.oldArg=r.arg,Fi(i,"update",t,e),i.def&&i.def.componentUpdated&&u.push(i)):(Fi(i,"bind",t,e),i.def&&i.def.inserted&&l.push(i));if(l.length){var d=function(){for(var n=0;n<l.length;n++)Fi(l[n],"inserted",t,e)};o?St(t,"insert",d):d()}if(u.length&&St(t,"postpatch",(function(){for(var n=0;n<u.length;n++)Fi(u[n],"componentUpdated",t,e)})),!o)for(n in a)c[n]||Fi(a[n],"unbind",e,e,s)}var xi=Object.create(null);function Bi(e,t){var n,r,i=Object.create(null);if(!e)return i;for(n=0;n<e.length;n++)r=e[n],r.modifiers||(r.modifiers=xi),i[Ui(r)]=r,r.def=$e(t.$options,"directives",r.name,!0);return i}function Ui(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Fi(e,t,n,r,i){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,r,i)}catch(Cs){nt(Cs,n.context,"directive "+e.name+" "+t+" hook")}}var Vi=[Ti,Pi];function ji(e,t){var n=t.componentOptions;if((!i(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(e.data.attrs)||!r(t.data.attrs))){var o,s,a,c=t.elm,l=e.data.attrs||{},u=t.data.attrs||{};for(o in i(u.__ob__)&&(u=t.data.attrs=N({},u)),u)s=u[o],a=l[o],a!==s&&Gi(c,o,s,t.data.pre);for(o in(ee||ne)&&u.value!==l.value&&Gi(c,"value",u.value),l)r(u[o])&&(zr(o)?c.removeAttributeNS(qr,Zr(o)):Gr(o)||c.removeAttribute(o))}}function Gi(e,t,n,r){r||e.tagName.indexOf("-")>-1?Hi(e,t,n):Wr(t)?$r(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Gr(t)?e.setAttribute(t,Qr(t,n)):zr(t)?$r(n)?e.removeAttributeNS(qr,Zr(t)):e.setAttributeNS(qr,t,n):Hi(e,t,n)}function Hi(e,t,n){if($r(n))e.removeAttribute(t);else{if(ee&&!te&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var r=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var Qi={create:ji,update:ji};function Wi(e,t){var n=t.elm,o=t.data,s=e.data;if(!(r(o.staticClass)&&r(o.class)&&(r(s)||r(s.staticClass)&&r(s.class)))){var a=Kr(t),c=n._transitionClasses;i(c)&&(a=Xr(a,ei(c))),a!==n._prevClass&&(n.setAttribute("class",a),n._prevClass=a)}}var qi,zi={create:Wi,update:Wi},Zi="__r",$i="__c";function Ki(e){if(i(e[Zi])){var t=ee?"change":"input";e[t]=[].concat(e[Zi],e[t]||[]),delete e[Zi]}i(e[$i])&&(e.change=[].concat(e[$i],e.change||[]),delete e[$i])}function Yi(e,t,n){var r=qi;return function i(){var o=t.apply(null,arguments);null!==o&&eo(e,i,n,r)}}var Ji=at&&!(ie&&Number(ie[1])<=53);function Xi(e,t,n,r){if(Ji){var i=Zn,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}qi.addEventListener(e,t,se?{capture:n,passive:r}:n)}function eo(e,t,n,r){(r||qi).removeEventListener(e,t._wrapper||t,n)}function to(e,t){if(!r(e.data.on)||!r(t.data.on)){var n=t.data.on||{},i=e.data.on||{};qi=t.elm,Ki(n),yt(n,i,Xi,eo,Yi,t.context),qi=void 0}}var no,ro={create:to,update:to};function io(e,t){if(!r(e.data.domProps)||!r(t.data.domProps)){var n,o,s=t.elm,a=e.data.domProps||{},c=t.data.domProps||{};for(n in i(c.__ob__)&&(c=t.data.domProps=N({},c)),a)n in c||(s[n]="");for(n in c){if(o=c[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),o===a[n])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===n&&"PROGRESS"!==s.tagName){s._value=o;var l=r(o)?"":String(o);oo(s,l)&&(s.value=l)}else if("innerHTML"===n&&oi(s.tagName)&&r(s.innerHTML)){no=no||document.createElement("div"),no.innerHTML="<svg>"+o+"</svg>";var u=no.firstChild;while(s.firstChild)s.removeChild(s.firstChild);while(u.firstChild)s.appendChild(u.firstChild)}else if(o!==a[n])try{s[n]=o}catch(Cs){}}}}function oo(e,t){return!e.composing&&("OPTION"===e.tagName||so(e,t)||ao(e,t))}function so(e,t){var n=!0;try{n=document.activeElement!==e}catch(Cs){}return n&&e.value!==t}function ao(e,t){var n=e.value,r=e._vModifiers;if(i(r)){if(r.number)return g(n)!==g(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}var co={create:io,update:io},lo=y((function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function uo(e){var t=ho(e.style);return e.staticStyle?N(e.staticStyle,t):t}function ho(e){return Array.isArray(e)?L(e):"string"===typeof e?lo(e):e}function po(e,t){var n,r={};if(t){var i=e;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=uo(i.data))&&N(r,n)}(n=uo(e.data))&&N(r,n);var o=e;while(o=o.parent)o.data&&(n=uo(o.data))&&N(r,n);return r}var fo,go=/^--/,mo=/\s*!important$/,_o=function(e,t,n){if(go.test(t))e.style.setProperty(t,n);else if(mo.test(n))e.style.setProperty(I(t),n.replace(mo,""),"important");else{var r=Eo(t);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)e.style[r]=n[i];else e.style[r]=n}},vo=["Webkit","Moz","ms"],Eo=y((function(e){if(fo=fo||document.createElement("div").style,e=b(e),"filter"!==e&&e in fo)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<vo.length;n++){var r=vo[n]+t;if(r in fo)return r}}));function Ao(e,t){var n=t.data,o=e.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var s,a,c=t.elm,l=o.staticStyle,u=o.normalizedStyle||o.style||{},d=l||u,h=ho(t.data.style)||{};t.data.normalizedStyle=i(h.__ob__)?N({},h):h;var p=po(t,!0);for(a in d)r(p[a])&&_o(c,a,"");for(a in p)s=p[a],s!==d[a]&&_o(c,a,null==s?"":s)}}var yo={create:Ao,update:Ao},So=/\s+/;function bo(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(So).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function Co(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(So).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function To(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&N(t,Io(e.name||"v")),N(t,e),t}return"string"===typeof e?Io(e):void 0}}var Io=y((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),Ro=K&&!te,wo="transition",ko="animation",Oo="transition",No="transitionend",Lo="animation",Po="animationend";Ro&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Oo="WebkitTransition",No="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Lo="WebkitAnimation",Po="webkitAnimationEnd"));var Do=K?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Mo(e){Do((function(){Do(e)}))}function xo(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),bo(e,t))}function Bo(e,t){e._transitionClasses&&v(e._transitionClasses,t),Co(e,t)}function Uo(e,t,n){var r=Vo(e,t),i=r.type,o=r.timeout,s=r.propCount;if(!i)return n();var a=i===wo?No:Po,c=0,l=function(){e.removeEventListener(a,u),n()},u=function(t){t.target===e&&++c>=s&&l()};setTimeout((function(){c<s&&l()}),o+1),e.addEventListener(a,u)}var Fo=/\b(transform|all)(,|$)/;function Vo(e,t){var n,r=window.getComputedStyle(e),i=(r[Oo+"Delay"]||"").split(", "),o=(r[Oo+"Duration"]||"").split(", "),s=jo(i,o),a=(r[Lo+"Delay"]||"").split(", "),c=(r[Lo+"Duration"]||"").split(", "),l=jo(a,c),u=0,d=0;t===wo?s>0&&(n=wo,u=s,d=o.length):t===ko?l>0&&(n=ko,u=l,d=c.length):(u=Math.max(s,l),n=u>0?s>l?wo:ko:null,d=n?n===wo?o.length:c.length:0);var h=n===wo&&Fo.test(r[Oo+"Property"]);return{type:n,timeout:u,propCount:d,hasTransform:h}}function jo(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return Go(t)+Go(e[n])})))}function Go(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Ho(e,t){var n=e.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=To(e.data.transition);if(!r(o)&&!i(n._enterCb)&&1===n.nodeType){var s=o.css,a=o.type,l=o.enterClass,u=o.enterToClass,d=o.enterActiveClass,h=o.appearClass,p=o.appearToClass,f=o.appearActiveClass,m=o.beforeEnter,_=o.enter,v=o.afterEnter,E=o.enterCancelled,A=o.beforeAppear,y=o.appear,S=o.afterAppear,b=o.appearCancelled,C=o.duration,T=Nn,I=Nn.$vnode;while(I&&I.parent)T=I.context,I=I.parent;var R=!T._isMounted||!e.isRootInsert;if(!R||y||""===y){var w=R&&h?h:l,k=R&&f?f:d,O=R&&p?p:u,N=R&&A||m,L=R&&"function"===typeof y?y:_,P=R&&S||v,D=R&&b||E,M=g(c(C)?C.enter:C);0;var x=!1!==s&&!te,B=qo(L),F=n._enterCb=U((function(){x&&(Bo(n,O),Bo(n,k)),F.cancelled?(x&&Bo(n,w),D&&D(n)):P&&P(n),n._enterCb=null}));e.data.show||St(e,"insert",(function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),L&&L(n,F)})),N&&N(n),x&&(xo(n,w),xo(n,k),Mo((function(){Bo(n,w),F.cancelled||(xo(n,O),B||(Wo(M)?setTimeout(F,M):Uo(n,a,F)))}))),e.data.show&&(t&&t(),L&&L(n,F)),x||B||F()}}}function Qo(e,t){var n=e.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=To(e.data.transition);if(r(o)||1!==n.nodeType)return t();if(!i(n._leaveCb)){var s=o.css,a=o.type,l=o.leaveClass,u=o.leaveToClass,d=o.leaveActiveClass,h=o.beforeLeave,p=o.leave,f=o.afterLeave,m=o.leaveCancelled,_=o.delayLeave,v=o.duration,E=!1!==s&&!te,A=qo(p),y=g(c(v)?v.leave:v);0;var S=n._leaveCb=U((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),E&&(Bo(n,u),Bo(n,d)),S.cancelled?(E&&Bo(n,l),m&&m(n)):(t(),f&&f(n)),n._leaveCb=null}));_?_(b):b()}function b(){S.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),h&&h(n),E&&(xo(n,l),xo(n,d),Mo((function(){Bo(n,l),S.cancelled||(xo(n,u),A||(Wo(y)?setTimeout(S,y):Uo(n,a,S)))}))),p&&p(n,S),E||A||S())}}function Wo(e){return"number"===typeof e&&!isNaN(e)}function qo(e){if(r(e))return!1;var t=e.fns;return i(t)?qo(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function zo(e,t){!0!==t.data.show&&Ho(t)}var Zo=K?{create:zo,activate:zo,remove:function(e,t){!0!==e.data.show?Qo(e,t):t()}}:{},$o=[Qi,zi,ro,co,yo,Zo],Ko=$o.concat(Vi),Yo=Li({nodeOps:Ci,modules:Ko});te&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&os(e,"input")}));var Jo={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?St(n,"postpatch",(function(){Jo.componentUpdated(e,t,n)})):Xo(e,t,n.context),e._vOptions=[].map.call(e.options,ns)):("textarea"===n.tag||ui(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",rs),e.addEventListener("compositionend",is),e.addEventListener("change",is),te&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Xo(e,t,n.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,ns);if(i.some((function(e,t){return!x(e,r[t])}))){var o=e.multiple?t.value.some((function(e){return ts(e,i)})):t.value!==t.oldValue&&ts(t.value,i);o&&os(e,"change")}}}};function Xo(e,t,n){es(e,t,n),(ee||ne)&&setTimeout((function(){es(e,t,n)}),0)}function es(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var o,s,a=0,c=e.options.length;a<c;a++)if(s=e.options[a],i)o=B(r,ns(s))>-1,s.selected!==o&&(s.selected=o);else if(x(ns(s),r))return void(e.selectedIndex!==a&&(e.selectedIndex=a));i||(e.selectedIndex=-1)}}function ts(e,t){return t.every((function(t){return!x(t,e)}))}function ns(e){return"_value"in e?e._value:e.value}function rs(e){e.target.composing=!0}function is(e){e.target.composing&&(e.target.composing=!1,os(e.target,"input"))}function os(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function ss(e){return!e.componentInstance||e.data&&e.data.transition?e:ss(e.componentInstance._vnode)}var as={bind:function(e,t,n){var r=t.value;n=ss(n);var i=n.data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i?(n.data.show=!0,Ho(n,(function(){e.style.display=o}))):e.style.display=r?o:"none"},update:function(e,t,n){var r=t.value,i=t.oldValue;if(!r!==!i){n=ss(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?Ho(n,(function(){e.style.display=e.__vOriginalDisplay})):Qo(n,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}},cs={model:Jo,show:as},ls={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function us(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?us(Cn(t.children)):e}function ds(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var o in i)t[b(o)]=i[o];return t}function hs(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function ps(e){while(e=e.parent)if(e.data.transition)return!0}function fs(e,t){return t.key===e.key&&t.tag===e.tag}var gs=function(e){return e.tag||Dt(e)},ms=function(e){return"show"===e.name},_s={name:"transition",props:ls,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(gs),n.length)){0;var r=this.mode;0;var i=n[0];if(ps(this.$vnode))return i;var o=us(i);if(!o)return i;if(this._leaving)return hs(e,i);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:a(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var c=(o.data||(o.data={})).transition=ds(this),l=this._vnode,u=us(l);if(o.data.directives&&o.data.directives.some(ms)&&(o.data.show=!0),u&&u.data&&!fs(o,u)&&!Dt(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var d=u.data.transition=N({},c);if("out-in"===r)return this._leaving=!0,St(d,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),hs(e,i);if("in-out"===r){if(Dt(o))return l;var h,p=function(){h()};St(c,"afterEnter",p),St(c,"enterCancelled",p),St(d,"delayLeave",(function(e){h=e}))}}return i}}},vs=N({tag:String,moveClass:String},ls);delete vs.mode;var Es={props:vs,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var i=Ln(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],s=ds(this),a=0;a<i.length;a++){var c=i[a];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),n[c.key]=c,(c.data||(c.data={})).transition=s;else;}if(r){for(var l=[],u=[],d=0;d<r.length;d++){var h=r[d];h.data.transition=s,h.data.pos=h.elm.getBoundingClientRect(),n[h.key]?l.push(h):u.push(h)}this.kept=e(t,null,l),this.removed=u}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(As),e.forEach(ys),e.forEach(Ss),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,r=n.style;xo(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(No,n._moveCb=function e(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(No,e),n._moveCb=null,Bo(n,t))})}})))},methods:{hasMove:function(e,t){if(!Ro)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){Co(n,e)})),bo(n,t),n.style.display="none",this.$el.appendChild(n);var r=Vo(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function As(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function ys(e){e.data.newPos=e.elm.getBoundingClientRect()}function Ss(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}var bs={Transition:_s,TransitionGroup:Es};Cr.config.mustUseProp=jr,Cr.config.isReservedTag=si,Cr.config.isReservedAttr=Fr,Cr.config.getTagNamespace=ai,Cr.config.isUnknownElement=li,N(Cr.options.directives,cs),N(Cr.options.components,bs),Cr.prototype.__patch__=K?Yo:P,Cr.prototype.$mount=function(e,t){return e=e&&K?di(e):void 0,Mn(this,e,t)},K&&setTimeout((function(){G.devtools&&le&&le.emit("init",Cr)}),0),t["default"]=Cr}.call(this,n("c8ba"))},"2b3d":function(e,t,n){"use strict";n("3ca3");var r,i=n("23e7"),o=n("83ab"),s=n("0d3b"),a=n("da84"),c=n("0366"),l=n("e330"),u=n("37e8").f,d=n("6eeb"),h=n("19aa"),p=n("1a2d"),f=n("60da"),g=n("4df4"),m=n("4dae"),_=n("6547").codeAt,v=n("5fb2"),E=n("577e"),A=n("d44e"),y=n("9861"),S=n("69f3"),b=S.set,C=S.getterFor("URL"),T=y.URLSearchParams,I=y.getState,R=a.URL,w=a.TypeError,k=a.parseInt,O=Math.floor,N=Math.pow,L=l("".charAt),P=l(/./.exec),D=l([].join),M=l(1..toString),x=l([].pop),B=l([].push),U=l("".replace),F=l([].shift),V=l("".split),j=l("".slice),G=l("".toLowerCase),H=l([].unshift),Q="Invalid authority",W="Invalid scheme",q="Invalid host",z="Invalid port",Z=/[a-z]/i,$=/[\d+-.a-z]/i,K=/\d/,Y=/^0x/i,J=/^[0-7]+$/,X=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ne=/[\0\t\n\r #/:<>?@[\\\]^|]/,re=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,ie=/[\t\n\r]/g,oe=function(e){var t,n,r,i,o,s,a,c=V(e,".");if(c.length&&""==c[c.length-1]&&c.length--,t=c.length,t>4)return e;for(n=[],r=0;r<t;r++){if(i=c[r],""==i)return e;if(o=10,i.length>1&&"0"==L(i,0)&&(o=P(Y,i)?16:8,i=j(i,8==o?1:2)),""===i)s=0;else{if(!P(10==o?X:8==o?J:ee,i))return e;s=k(i,o)}B(n,s)}for(r=0;r<t;r++)if(s=n[r],r==t-1){if(s>=N(256,5-t))return null}else if(s>255)return null;for(a=x(n),r=0;r<n.length;r++)a+=n[r]*N(256,3-r);return a},se=function(e){var t,n,r,i,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,h=function(){return L(e,d)};if(":"==h()){if(":"!=L(e,1))return;d+=2,l++,u=l}while(h()){if(8==l)return;if(":"!=h()){t=n=0;while(n<4&&P(ee,h()))t=16*t+k(h(),16),d++,n++;if("."==h()){if(0==n)return;if(d-=n,l>6)return;r=0;while(h()){if(i=null,r>0){if(!("."==h()&&r<4))return;d++}if(!P(K,h()))return;while(P(K,h())){if(o=k(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;d++}c[l]=256*c[l]+i,r++,2!=r&&4!=r||l++}if(4!=r)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;c[l++]=t}else{if(null!==u)return;d++,l++,u=l}}if(null!==u){s=l-u,l=7;while(0!=l&&s>0)a=c[l],c[l--]=c[u+s-1],c[u+--s]=a}else if(8!=l)return;return c},ae=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t},ce=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)H(t,e%256),e=O(e/256);return D(t,".")}if("object"==typeof e){for(t="",r=ae(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=M(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},le={},ue=f({},le,{" ":1,'"':1,"<":1,">":1,"`":1}),de=f({},ue,{"#":1,"?":1,"{":1,"}":1}),he=f({},de,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),pe=function(e,t){var n=_(e,0);return n>32&&n<127&&!p(t,e)?e:encodeURIComponent(e)},fe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ge=function(e,t){var n;return 2==e.length&&P(Z,L(e,0))&&(":"==(n=L(e,1))||!t&&"|"==n)},me=function(e){var t;return e.length>1&&ge(j(e,0,2))&&(2==e.length||"/"===(t=L(e,2))||"\\"===t||"?"===t||"#"===t)},_e=function(e){return"."===e||"%2e"===G(e)},ve=function(e){return e=G(e),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},Ee={},Ae={},ye={},Se={},be={},Ce={},Te={},Ie={},Re={},we={},ke={},Oe={},Ne={},Le={},Pe={},De={},Me={},xe={},Be={},Ue={},Fe={},Ve=function(e,t,n){var r,i,o,s=E(e);if(t){if(i=this.parse(s),i)throw w(i);this.searchParams=null}else{if(void 0!==n&&(r=new Ve(n,!0)),i=this.parse(s,null,r),i)throw w(i);o=I(new T),o.bindURL(this),this.searchParams=o}};Ve.prototype={type:"URL",parse:function(e,t,n){var i,o,s,a,c=this,l=t||Ee,u=0,d="",h=!1,f=!1,_=!1;e=E(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=U(e,re,"")),e=U(e,ie,""),i=g(e);while(u<=i.length){switch(o=i[u],l){case Ee:if(!o||!P(Z,o)){if(t)return W;l=ye;continue}d+=G(o),l=Ae;break;case Ae:if(o&&(P($,o)||"+"==o||"-"==o||"."==o))d+=G(o);else{if(":"!=o){if(t)return W;d="",l=ye,u=0;continue}if(t&&(c.isSpecial()!=p(fe,d)||"file"==d&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=d,t)return void(c.isSpecial()&&fe[c.scheme]==c.port&&(c.port=null));d="","file"==c.scheme?l=Le:c.isSpecial()&&n&&n.scheme==c.scheme?l=Se:c.isSpecial()?l=Ie:"/"==i[u+1]?(l=be,u++):(c.cannotBeABaseURL=!0,B(c.path,""),l=Be)}break;case ye:if(!n||n.cannotBeABaseURL&&"#"!=o)return W;if(n.cannotBeABaseURL&&"#"==o){c.scheme=n.scheme,c.path=m(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,l=Fe;break}l="file"==n.scheme?Le:Ce;continue;case Se:if("/"!=o||"/"!=i[u+1]){l=Ce;continue}l=Re,u++;break;case be:if("/"==o){l=we;break}l=xe;continue;case Ce:if(c.scheme=n.scheme,o==r)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=m(n.path),c.query=n.query;else if("/"==o||"\\"==o&&c.isSpecial())l=Te;else if("?"==o)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=m(n.path),c.query="",l=Ue;else{if("#"!=o){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=m(n.path),c.path.length--,l=xe;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=m(n.path),c.query=n.query,c.fragment="",l=Fe}break;case Te:if(!c.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,l=xe;continue}l=we}else l=Re;break;case Ie:if(l=Re,"/"!=o||"/"!=L(d,u+1))continue;u++;break;case Re:if("/"!=o&&"\\"!=o){l=we;continue}break;case we:if("@"==o){h&&(d="%40"+d),h=!0,s=g(d);for(var v=0;v<s.length;v++){var A=s[v];if(":"!=A||_){var y=pe(A,he);_?c.password+=y:c.username+=y}else _=!0}d=""}else if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(h&&""==d)return Q;u-=g(d).length+1,d="",l=ke}else d+=o;break;case ke:case Oe:if(t&&"file"==c.scheme){l=De;continue}if(":"!=o||f){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(c.isSpecial()&&""==d)return q;if(t&&""==d&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(d),a)return a;if(d="",l=Me,t)return;continue}"["==o?f=!0:"]"==o&&(f=!1),d+=o}else{if(""==d)return q;if(a=c.parseHost(d),a)return a;if(d="",l=Ne,t==Oe)return}break;case Ne:if(!P(K,o)){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()||t){if(""!=d){var S=k(d,10);if(S>65535)return z;c.port=c.isSpecial()&&S===fe[c.scheme]?null:S,d=""}if(t)return;l=Me;continue}return z}d+=o;break;case Le:if(c.scheme="file","/"==o||"\\"==o)l=Pe;else{if(!n||"file"!=n.scheme){l=xe;continue}if(o==r)c.host=n.host,c.path=m(n.path),c.query=n.query;else if("?"==o)c.host=n.host,c.path=m(n.path),c.query="",l=Ue;else{if("#"!=o){me(D(m(i,u),""))||(c.host=n.host,c.path=m(n.path),c.shortenPath()),l=xe;continue}c.host=n.host,c.path=m(n.path),c.query=n.query,c.fragment="",l=Fe}}break;case Pe:if("/"==o||"\\"==o){l=De;break}n&&"file"==n.scheme&&!me(D(m(i,u),""))&&(ge(n.path[0],!0)?B(c.path,n.path[0]):c.host=n.host),l=xe;continue;case De:if(o==r||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&ge(d))l=xe;else if(""==d){if(c.host="",t)return;l=Me}else{if(a=c.parseHost(d),a)return a;if("localhost"==c.host&&(c.host=""),t)return;d="",l=Me}continue}d+=o;break;case Me:if(c.isSpecial()){if(l=xe,"/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=r&&(l=xe,"/"!=o))continue}else c.fragment="",l=Fe;else c.query="",l=Ue;break;case xe:if(o==r||"/"==o||"\\"==o&&c.isSpecial()||!t&&("?"==o||"#"==o)){if(ve(d)?(c.shortenPath(),"/"==o||"\\"==o&&c.isSpecial()||B(c.path,"")):_e(d)?"/"==o||"\\"==o&&c.isSpecial()||B(c.path,""):("file"==c.scheme&&!c.path.length&&ge(d)&&(c.host&&(c.host=""),d=L(d,0)+":"),B(c.path,d)),d="","file"==c.scheme&&(o==r||"?"==o||"#"==o))while(c.path.length>1&&""===c.path[0])F(c.path);"?"==o?(c.query="",l=Ue):"#"==o&&(c.fragment="",l=Fe)}else d+=pe(o,de);break;case Be:"?"==o?(c.query="",l=Ue):"#"==o?(c.fragment="",l=Fe):o!=r&&(c.path[0]+=pe(o,le));break;case Ue:t||"#"!=o?o!=r&&("'"==o&&c.isSpecial()?c.query+="%27":c.query+="#"==o?"%23":pe(o,le)):(c.fragment="",l=Fe);break;case Fe:o!=r&&(c.fragment+=pe(o,ue));break}u++}},parseHost:function(e){var t,n,r;if("["==L(e,0)){if("]"!=L(e,e.length-1))return q;if(t=se(j(e,1,-1)),!t)return q;this.host=t}else if(this.isSpecial()){if(e=v(e),P(te,e))return q;if(t=oe(e),null===t)return q;this.host=t}else{if(P(ne,e))return q;for(t="",n=g(e),r=0;r<n.length;r++)t+=pe(n[r],le);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return p(fe,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&ge(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,l=t+":";return null!==i?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=ce(i),null!==o&&(l+=":"+o)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+D(s,"/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw w(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new je(e.path[0]).origin}catch(n){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+ce(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(E(e)+":",Ee)},getUsername:function(){return this.username},setUsername:function(e){var t=g(E(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=pe(t[n],he)}},getPassword:function(){return this.password},setPassword:function(e){var t=g(E(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=pe(t[n],he)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?ce(e):ce(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,ke)},getHostname:function(){var e=this.host;return null===e?"":ce(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Oe)},getPort:function(){var e=this.port;return null===e?"":E(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=E(e),""==e?this.port=null:this.parse(e,Ne))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+D(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Me))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=E(e),""==e?this.query=null:("?"==L(e,0)&&(e=j(e,1)),this.query="",this.parse(e,Ue)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){e=E(e),""!=e?("#"==L(e,0)&&(e=j(e,1)),this.fragment="",this.parse(e,Fe)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var je=function(e){var t=h(this,Ge),n=arguments.length>1?arguments[1]:void 0,r=b(t,new Ve(e,!1,n));o||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},Ge=je.prototype,He=function(e,t){return{get:function(){return C(this)[e]()},set:t&&function(e){return C(this)[t](e)},configurable:!0,enumerable:!0}};if(o&&u(Ge,{href:He("serialize","setHref"),origin:He("getOrigin"),protocol:He("getProtocol","setProtocol"),username:He("getUsername","setUsername"),password:He("getPassword","setPassword"),host:He("getHost","setHost"),hostname:He("getHostname","setHostname"),port:He("getPort","setPort"),pathname:He("getPathname","setPathname"),search:He("getSearch","setSearch"),searchParams:He("getSearchParams"),hash:He("getHash","setHash")}),d(Ge,"toJSON",(function(){return C(this).serialize()}),{enumerable:!0}),d(Ge,"toString",(function(){return C(this).serialize()}),{enumerable:!0}),R){var Qe=R.createObjectURL,We=R.revokeObjectURL;Qe&&d(je,"createObjectURL",c(Qe,R)),We&&d(je,"revokeObjectURL",c(We,R))}A(je,"URL"),i({global:!0,forced:!s,sham:!o},{URL:je})},"2ba4":function(e,t,n){var r=n("40d5"),i=Function.prototype,o=i.apply,s=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(o):function(){return s.apply(o,arguments)})},"2bb5":function(e,t,n){"use strict";t.__esModule=!0;n("8122");t.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},"2c3e":function(e,t,n){var r=n("da84"),i=n("83ab"),o=n("9f7f").MISSED_STICKY,s=n("c6b6"),a=n("9bf2").f,c=n("69f3").get,l=RegExp.prototype,u=r.TypeError;i&&o&&a(l,"sticky",{configurable:!0,get:function(){if(this!==l){if("RegExp"===s(this))return!!c(this).sticky;throw u("Incompatible receiver, RegExp required")}}})},"2caf":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("4ae1"),n("d3b7"),n("f8c9"),n("3410");function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n("d9e2"),n("a4d3"),n("e01a"),n("d28b"),n("3ca3"),n("ddb0");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){if(t&&("object"===o(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function c(e){var t=i();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}},"2cf4":function(e,t,n){var r,i,o,s,a=n("da84"),c=n("2ba4"),l=n("0366"),u=n("1626"),d=n("1a2d"),h=n("d039"),p=n("1be4"),f=n("f36a"),g=n("cc12"),m=n("1cdc"),_=n("605d"),v=a.setImmediate,E=a.clearImmediate,A=a.process,y=a.Dispatch,S=a.Function,b=a.MessageChannel,C=a.String,T=0,I={},R="onreadystatechange";try{r=a.location}catch(L){}var w=function(e){if(d(I,e)){var t=I[e];delete I[e],t()}},k=function(e){return function(){w(e)}},O=function(e){w(e.data)},N=function(e){a.postMessage(C(e),r.protocol+"//"+r.host)};v&&E||(v=function(e){var t=f(arguments,1);return I[++T]=function(){c(u(e)?e:S(e),void 0,t)},i(T),T},E=function(e){delete I[e]},_?i=function(e){A.nextTick(k(e))}:y&&y.now?i=function(e){y.now(k(e))}:b&&!m?(o=new b,s=o.port2,o.port1.onmessage=O,i=l(s.postMessage,s)):a.addEventListener&&u(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!h(N)?(i=N,a.addEventListener("message",O,!1)):i=R in g("script")?function(e){p.appendChild(g("script"))[R]=function(){p.removeChild(this),w(e)}}:function(e){setTimeout(k(e),0)}),e.exports={set:v,clear:E}},"2d00":function(e,t,n){var r,i,o=n("da84"),s=n("342f"),a=o.process,c=o.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(r=u.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),e.exports=i},"2d83":function(e,t,n){"use strict";var r=n("387f");e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},"2e67":function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"2f62":function(e,t,n){"use strict";(function(e){
/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */
function n(e){var t=Number(e.version.split(".")[0]);if(t>=2)e.mixin({beforeCreate:r});else{var n=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[r].concat(e.init):r,n.call(this,e)}}function r(){var e=this.$options;e.store?this.$store="function"===typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}var r="undefined"!==typeof window?window:"undefined"!==typeof e?e:{},i=r.__VUE_DEVTOOLS_GLOBAL_HOOK__;function o(e){i&&(e._devtoolHook=i,i.emit("vuex:init",e),i.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){i.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){i.emit("vuex:action",e,t)}),{prepend:!0}))}function s(e,t){return e.filter(t)[0]}function a(e,t){if(void 0===t&&(t=[]),null===e||"object"!==typeof e)return e;var n=s(t,(function(t){return t.original===e}));if(n)return n.copy;var r=Array.isArray(e)?[]:{};return t.push({original:e,copy:r}),Object.keys(e).forEach((function(n){r[n]=a(e[n],t)})),r}function c(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function l(e){return null!==e&&"object"===typeof e}function u(e){return e&&"function"===typeof e.then}function d(e,t){return function(){return e(t)}}var h=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"===typeof n?n():n)||{}},p={namespaced:{configurable:!0}};p.namespaced.get=function(){return!!this._rawModule.namespaced},h.prototype.addChild=function(e,t){this._children[e]=t},h.prototype.removeChild=function(e){delete this._children[e]},h.prototype.getChild=function(e){return this._children[e]},h.prototype.hasChild=function(e){return e in this._children},h.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},h.prototype.forEachChild=function(e){c(this._children,e)},h.prototype.forEachGetter=function(e){this._rawModule.getters&&c(this._rawModule.getters,e)},h.prototype.forEachAction=function(e){this._rawModule.actions&&c(this._rawModule.actions,e)},h.prototype.forEachMutation=function(e){this._rawModule.mutations&&c(this._rawModule.mutations,e)},Object.defineProperties(h.prototype,p);var f=function(e){this.register([],e,!1)};function g(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return void 0;g(e.concat(r),t.getChild(r),n.modules[r])}}f.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},f.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")}),"")},f.prototype.update=function(e){g([],this.root,e)},f.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var i=new h(t,n);if(0===e.length)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}t.modules&&c(t.modules,(function(t,i){r.register(e.concat(i),t,n)}))},f.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],r=t.getChild(n);r&&r.runtime&&t.removeChild(n)},f.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var m;var _=function(e){var t=this;void 0===e&&(e={}),!m&&"undefined"!==typeof window&&window.Vue&&N(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var r=e.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new f(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new m,this._makeLocalGettersCache=Object.create(null);var i=this,s=this,a=s.dispatch,c=s.commit;this.dispatch=function(e,t){return a.call(i,e,t)},this.commit=function(e,t,n){return c.call(i,e,t,n)},this.strict=r;var l=this._modules.root.state;S(this,l,[],this._modules.root),y(this,l),n.forEach((function(e){return e(t)}));var u=void 0!==e.devtools?e.devtools:m.config.devtools;u&&o(this)},v={state:{configurable:!0}};function E(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function A(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;S(e,n,[],e._modules.root,!0),y(e,n,t)}function y(e,t,n){var r=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var i=e._wrappedGetters,o={};c(i,(function(t,n){o[n]=d(t,e),Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})}));var s=m.config.silent;m.config.silent=!0,e._vm=new m({data:{$$state:t},computed:o}),m.config.silent=s,e.strict&&w(e),r&&(n&&e._withCommit((function(){r._data.$$state=null})),m.nextTick((function(){return r.$destroy()})))}function S(e,t,n,r,i){var o=!n.length,s=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[s],e._modulesNamespaceMap[s]=r),!o&&!i){var a=k(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit((function(){m.set(a,c,r.state)}))}var l=r.context=b(e,s,n);r.forEachMutation((function(t,n){var r=s+n;T(e,r,t,l)})),r.forEachAction((function(t,n){var r=t.root?n:s+n,i=t.handler||t;I(e,r,i,l)})),r.forEachGetter((function(t,n){var r=s+n;R(e,r,t,l)})),r.forEachChild((function(r,o){S(e,t,n.concat(o),r,i)}))}function b(e,t,n){var r=""===t,i={dispatch:r?e.dispatch:function(n,r,i){var o=O(n,r,i),s=o.payload,a=o.options,c=o.type;return a&&a.root||(c=t+c),e.dispatch(c,s)},commit:r?e.commit:function(n,r,i){var o=O(n,r,i),s=o.payload,a=o.options,c=o.type;a&&a.root||(c=t+c),e.commit(c,s,a)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return C(e,t)}},state:{get:function(){return k(e.state,n)}}}),i}function C(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach((function(i){if(i.slice(0,r)===t){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return e.getters[i]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function T(e,t,n,r){var i=e._mutations[t]||(e._mutations[t]=[]);i.push((function(t){n.call(e,r.state,t)}))}function I(e,t,n,r){var i=e._actions[t]||(e._actions[t]=[]);i.push((function(t){var i=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t);return u(i)||(i=Promise.resolve(i)),e._devtoolHook?i.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):i}))}function R(e,t,n,r){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)})}function w(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function k(e,t){return t.reduce((function(e,t){return e[t]}),e)}function O(e,t,n){return l(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function N(e){m&&e===m||(m=e,n(m))}v.state.get=function(){return this._vm._data.$$state},v.state.set=function(e){0},_.prototype.commit=function(e,t,n){var r=this,i=O(e,t,n),o=i.type,s=i.payload,a=(i.options,{type:o,payload:s}),c=this._mutations[o];c&&(this._withCommit((function(){c.forEach((function(e){e(s)}))})),this._subscribers.slice().forEach((function(e){return e(a,r.state)})))},_.prototype.dispatch=function(e,t){var n=this,r=O(e,t),i=r.type,o=r.payload,s={type:i,payload:o},a=this._actions[i];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(s,n.state)}))}catch(l){0}var c=a.length>1?Promise.all(a.map((function(e){return e(o)}))):a[0](o);return new Promise((function(e,t){c.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(s,n.state)}))}catch(l){0}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(s,n.state,e)}))}catch(l){0}t(e)}))}))}},_.prototype.subscribe=function(e,t){return E(e,this._subscribers,t)},_.prototype.subscribeAction=function(e,t){var n="function"===typeof e?{before:e}:e;return E(n,this._actionSubscribers,t)},_.prototype.watch=function(e,t,n){var r=this;return this._watcherVM.$watch((function(){return e(r.state,r.getters)}),t,n)},_.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},_.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),S(this,this.state,e,this._modules.get(e),n.preserveState),y(this,this.state)},_.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=k(t.state,e.slice(0,-1));m.delete(n,e[e.length-1])})),A(this)},_.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),this._modules.isRegistered(e)},_.prototype.hotUpdate=function(e){this._modules.update(e),A(this,!0)},_.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(_.prototype,v);var L=F((function(e,t){var n={};return B(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=V(this.$store,"mapState",e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"===typeof i?i.call(this,t,n):t[i]},n[r].vuex=!0})),n})),P=F((function(e,t){var n={};return B(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.commit;if(e){var o=V(this.$store,"mapMutations",e);if(!o)return;r=o.context.commit}return"function"===typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n})),D=F((function(e,t){var n={};return B(t).forEach((function(t){var r=t.key,i=t.val;i=e+i,n[r]=function(){if(!e||V(this.$store,"mapGetters",e))return this.$store.getters[i]},n[r].vuex=!0})),n})),M=F((function(e,t){var n={};return B(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.dispatch;if(e){var o=V(this.$store,"mapActions",e);if(!o)return;r=o.context.dispatch}return"function"===typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n})),x=function(e){return{mapState:L.bind(null,e),mapGetters:D.bind(null,e),mapMutations:P.bind(null,e),mapActions:M.bind(null,e)}};function B(e){return U(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function U(e){return Array.isArray(e)||l(e)}function F(e){return function(t,n){return"string"!==typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function V(e,t,n){var r=e._modulesNamespaceMap[n];return r}function j(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var n=e.filter;void 0===n&&(n=function(e,t,n){return!0});var r=e.transformer;void 0===r&&(r=function(e){return e});var i=e.mutationTransformer;void 0===i&&(i=function(e){return e});var o=e.actionFilter;void 0===o&&(o=function(e,t){return!0});var s=e.actionTransformer;void 0===s&&(s=function(e){return e});var c=e.logMutations;void 0===c&&(c=!0);var l=e.logActions;void 0===l&&(l=!0);var u=e.logger;return void 0===u&&(u=console),function(e){var d=a(e.state);"undefined"!==typeof u&&(c&&e.subscribe((function(e,o){var s=a(o);if(n(e,d,s)){var c=Q(),l=i(e),h="mutation "+e.type+c;G(u,h,t),u.log("%c prev state","color: #9E9E9E; font-weight: bold",r(d)),u.log("%c mutation","color: #03A9F4; font-weight: bold",l),u.log("%c next state","color: #4CAF50; font-weight: bold",r(s)),H(u)}d=s})),l&&e.subscribeAction((function(e,n){if(o(e,n)){var r=Q(),i=s(e),a="action "+e.type+r;G(u,a,t),u.log("%c action","color: #03A9F4; font-weight: bold",i),H(u)}})))}}function G(e,t,n){var r=n?e.groupCollapsed:e.group;try{r.call(e,t)}catch(i){e.log(t)}}function H(e){try{e.groupEnd()}catch(t){e.log("—— log end ——")}}function Q(){var e=new Date;return" @ "+q(e.getHours(),2)+":"+q(e.getMinutes(),2)+":"+q(e.getSeconds(),2)+"."+q(e.getMilliseconds(),3)}function W(e,t){return new Array(t+1).join(e)}function q(e,t){return W("0",t-e.toString().length)+e}var z={Store:_,install:N,version:"3.6.2",mapState:L,mapMutations:P,mapGetters:D,mapActions:M,createNamespacedHelpers:x,createLogger:j};t["a"]=z}).call(this,n("c8ba"))},"2f9a":function(e,t){e.exports=function(){}},"301c":function(e,t,n){n("e198")("asyncIterator")},"30b5":function(e,t,n){"use strict";var r=n("c532");function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},3280:function(e,t,n){"use strict";var r=n("ebb5"),i=n("2ba4"),o=n("e58c"),s=r.aTypedArray,a=r.exportTypedArrayMethod;a("lastIndexOf",(function(e){var t=arguments.length;return i(o,s(this),t>1?[e,arguments[1]]:[e])}))},3397:function(e,t,n){var r=n("7a41");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},3410:function(e,t,n){var r=n("23e7"),i=n("d039"),o=n("7b0b"),s=n("e163"),a=n("e177"),c=i((function(){s(1)}));r({target:"Object",stat:!0,forced:c,sham:!a},{getPrototypeOf:function(e){return s(o(e))}})},"342f":function(e,t,n){var r=n("d066");e.exports=r("navigator","userAgent")||""},"35a1":function(e,t,n){var r=n("f5df"),i=n("dc4a"),o=n("3f8c"),s=n("b622"),a=s("iterator");e.exports=function(e){if(void 0!=e)return i(e,a)||i(e,"@@iterator")||o[r(e)]}},"37e8":function(e,t,n){var r=n("83ab"),i=n("aed9"),o=n("9bf2"),s=n("825a"),a=n("fc6a"),c=n("df75");t.f=r&&!i?Object.defineProperties:function(e,t){s(e);var n,r=a(t),i=c(t),l=i.length,u=0;while(l>u)o.f(e,n=i[u++],r[n]);return e}},"387f":function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},3934:function(e,t,n){"use strict";var r=n("c532");e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return function(){return!0}}()},"393a":function(e,t,n){"use strict";var r=n("e444"),i=n("512c"),o=n("ba01"),s=n("051b"),a=n("8a0d"),c=n("26dd"),l=n("92f0"),u=n("ce7a"),d=n("cc15")("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",f="keys",g="values",m=function(){return this};e.exports=function(e,t,n,_,v,E,A){c(n,t,_);var y,S,b,C=function(e){if(!h&&e in w)return w[e];switch(e){case f:return function(){return new n(this,e)};case g:return function(){return new n(this,e)}}return function(){return new n(this,e)}},T=t+" Iterator",I=v==g,R=!1,w=e.prototype,k=w[d]||w[p]||v&&w[v],O=k||C(v),N=v?I?C("entries"):O:void 0,L="Array"==t&&w.entries||k;if(L&&(b=u(L.call(new e)),b!==Object.prototype&&b.next&&(l(b,T,!0),r||"function"==typeof b[d]||s(b,d,m))),I&&k&&k.name!==g&&(R=!0,O=function(){return k.call(this)}),r&&!A||!h&&!R&&w[d]||s(w,d,O),a[t]=O,a[T]=m,v)if(y={values:I?O:C(g),keys:E?O:C(f),entries:N},A)for(S in y)S in w||o(w,S,y[S]);else i(i.P+i.F*(h||R),t,y);return y}},"39ad":function(e,t,n){var r=n("6ca1"),i=n("d16a"),o=n("9d11");e.exports=function(e){return function(t,n,s){var a,c=r(t),l=i(c.length),u=o(s,l);if(e&&n!=n){while(l>u)if(a=c[u++],a!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}}},"3a34":function(module,exports,__webpack_require__){(function(global){
/*!
 * vConsole v3.11.2 (https://github.com/Tencent/vConsole)
 *
 * Tencent is pleased to support the open source community by making vConsole available.
 * Copyright (C) 2017 THL A29 Limited, a Tencent company. All rights reserved.
 * Licensed under the MIT License (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at
 * http://opensource.org/licenses/MIT
 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
 */
!function(e,t){module.exports=t()}(this||self,(function(){return function(){var __webpack_modules__={8406:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.CookieStorage=void 0;var i=n(9390),o=n(4370),s=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._defaultOptions=Object.assign({domain:null,expires:null,path:null,secure:!1},t),"undefined"!=typeof Proxy)return new Proxy(this,a)}var t,n,s;return t=e,(n=[{key:"clear",value:function(){var e=this,t=o.parseCookies(this._getCookie());Object.keys(t).forEach((function(t){return e.removeItem(t)}))}},{key:"getItem",value:function(e){var t=o.parseCookies(this._getCookie());return Object.prototype.hasOwnProperty.call(t,e)?t[e]:null}},{key:"key",value:function(e){var t=o.parseCookies(this._getCookie()),n=Object.keys(t).sort();return e<n.length?n[e]:null}},{key:"removeItem",value:function(e,t){var n=Object.assign(Object.assign(Object.assign({},this._defaultOptions),t),{expires:new Date(0)}),r=i.formatCookie(e,"",n);this._setCookie(r)}},{key:"setItem",value:function(e,t,n){var r=Object.assign(Object.assign({},this._defaultOptions),n),o=i.formatCookie(e,t,r);this._setCookie(o)}},{key:"_getCookie",value:function(){return"undefined"==typeof document||void 0===document.cookie?"":document.cookie}},{key:"_setCookie",value:function(e){document.cookie=e}},{key:"length",get:function(){var e=o.parseCookies(this._getCookie());return Object.keys(e).length}}])&&r(t.prototype,n),s&&r(t,s),e}();t.CookieStorage=s;var a={defineProperty:function(e,t,n){return e.setItem(t.toString(),String(n.value)),!0},deleteProperty:function(e,t){return e.removeItem(t.toString()),!0},get:function(e,t,n){if("string"==typeof t&&t in e)return e[t];var r=e.getItem(t.toString());return null!==r?r:void 0},getOwnPropertyDescriptor:function(e,t){if(!(t in e))return{configurable:!0,enumerable:!0,value:e.getItem(t.toString()),writable:!0}},has:function(e,t){return"string"==typeof t&&t in e||null!==e.getItem(t.toString())},ownKeys:function(e){for(var t=[],n=0;n<e.length;n++){var r=e.key(n);null!==r&&t.push(r)}return t},preventExtensions:function(e){throw new TypeError("can't prevent extensions on this proxy object")},set:function(e,t,n,r){return e.setItem(t.toString(),String(n)),!0}}},9390:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatCookie=void 0;var n=function(e){var t=e.path,n=e.domain,r=e.expires,i=e.secure,o=function(e){var t=e.sameSite;return void 0===t?null:["none","lax","strict"].indexOf(t.toLowerCase())>=0?t:null}(e);return[null==t?"":";path="+t,null==n?"":";domain="+n,null==r?"":";expires="+r.toUTCString(),void 0===i||!1===i?"":";secure",null===o?"":";SameSite="+o].join("")};t.formatCookie=function(e,t,r){return[encodeURIComponent(e),"=",encodeURIComponent(t),n(r)].join("")}},6025:function(e,t,n){"use strict";var r=n(8406);Object.defineProperty(t,"eR",{enumerable:!0,get:function(){return r.CookieStorage}});n(9390),n(4370)},4370:function(e,t){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.parseCookies=void 0,t.parseCookies=function(e){if(0===e.length)return{};var t={},r=new RegExp("\\s*;\\s*");return e.split(r).forEach((function(e){var r=n(e.split("="),2),i=r[0],o=r[1],s=decodeURIComponent(i),a=decodeURIComponent(o);t[s]=a})),t}},2582:function(e,t,n){n(1646),n(6394),n(2004),n(462),n(8407),n(2429),n(1172),n(8288),n(1274),n(8201),n(6626),n(3211),n(9952),n(15),n(9831),n(7521),n(2972),n(6956),n(5222),n(2257);var r=n(1287);e.exports=r.Symbol},6163:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},2569:function(e,t,n){var r=n(794);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},5766:function(e,t,n){var r=n(2977),i=n(97),o=n(6782),s=function(e){return function(t,n,s){var a,c=r(t),l=i(c.length),u=o(s,l);if(e&&n!=n){for(;l>u;)if((a=c[u++])!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},4805:function(e,t,n){var r=n(2938),i=n(5044),o=n(1324),s=n(97),a=n(4822),c=[].push,l=function(e){var t=1==e,n=2==e,l=3==e,u=4==e,d=6==e,h=7==e,p=5==e||d;return function(f,g,m,_){for(var v,E,A=o(f),y=i(A),S=r(g,m,3),b=s(y.length),C=0,T=_||a,I=t?T(f,b):n||h?T(f,0):void 0;b>C;C++)if((p||C in y)&&(E=S(v=y[C],C,A),e))if(t)I[C]=E;else if(E)switch(e){case 3:return!0;case 5:return v;case 6:return C;case 2:c.call(I,v)}else switch(e){case 4:return!1;case 7:c.call(I,v)}return d?-1:l||u?u:I}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},9269:function(e,t,n){var r=n(6544),i=n(3649),o=n(4061),s=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},4822:function(e,t,n){var r=n(794),i=n(4521),o=n(3649)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},9624:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},3058:function(e,t,n){var r=n(8191),i=n(9624),o=n(3649)("toStringTag"),s="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:s?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},3478:function(e,t,n){var r=n(4402),i=n(929),o=n(6683),s=n(4615);e.exports=function(e,t){for(var n=i(t),a=s.f,c=o.f,l=0;l<n.length;l++){var u=n[l];r(e,u)||a(e,u,c(t,u))}}},57:function(e,t,n){var r=n(8494),i=n(4615),o=n(4677);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},4677:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},5999:function(e,t,n){"use strict";var r=n(2670),i=n(4615),o=n(4677);e.exports=function(e,t,n){var s=r(t);s in e?i.f(e,s,o(0,n)):e[s]=n}},2219:function(e,t,n){var r=n(1287),i=n(4402),o=n(491),s=n(4615).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||s(t,e,{value:o.f(e)})}},8494:function(e,t,n){var r=n(6544);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},6668:function(e,t,n){var r=n(7583),i=n(794),o=r.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},6918:function(e,t,n){var r=n(5897);e.exports=r("navigator","userAgent")||""},4061:function(e,t,n){var r,i,o=n(7583),s=n(6918),a=o.process,c=a&&a.versions,l=c&&c.v8;l?i=(r=l.split("."))[0]<4?1:r[0]+r[1]:s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},5690:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7263:function(e,t,n){var r=n(7583),i=n(6683).f,o=n(57),s=n(1270),a=n(460),c=n(3478),l=n(4451);e.exports=function(e,t){var n,u,d,h,p,f=e.target,g=e.global,m=e.stat;if(n=g?r:m?r[f]||a(f,{}):(r[f]||{}).prototype)for(u in t){if(h=t[u],d=e.noTargetGet?(p=i(n,u))&&p.value:n[u],!l(g?u:f+(m?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;c(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),s(n,u,h,e)}}},6544:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},2938:function(e,t,n){var r=n(6163);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},5897:function(e,t,n){var r=n(1287),i=n(7583),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},7583:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},4402:function(e,t,n){var r=n(1324),i={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return i.call(r(e),t)}},4639:function(e){e.exports={}},482:function(e,t,n){var r=n(5897);e.exports=r("document","documentElement")},275:function(e,t,n){var r=n(8494),i=n(6544),o=n(6668);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},5044:function(e,t,n){var r=n(6544),i=n(9624),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},9734:function(e,t,n){var r=n(1314),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},2743:function(e,t,n){var r,i,o,s=n(9491),a=n(7583),c=n(794),l=n(57),u=n(4402),d=n(1314),h=n(9137),p=n(4639),f="Object already initialized",g=a.WeakMap;if(s||d.state){var m=d.state||(d.state=new g),_=m.get,v=m.has,E=m.set;r=function(e,t){if(v.call(m,e))throw new TypeError(f);return t.facade=e,E.call(m,e,t),t},i=function(e){return _.call(m,e)||{}},o=function(e){return v.call(m,e)}}else{var A=h("state");p[A]=!0,r=function(e,t){if(u(e,A))throw new TypeError(f);return t.facade=e,l(e,A,t),t},i=function(e){return u(e,A)?e[A]:{}},o=function(e){return u(e,A)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},4521:function(e,t,n){var r=n(9624);e.exports=Array.isArray||function(e){return"Array"==r(e)}},4451:function(e,t,n){var r=n(6544),i=/#|\.prototype\./,o=function(e,t){var n=a[s(e)];return n==l||n!=c&&("function"==typeof t?r(t):!!t)},s=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},a=o.data={},c=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},794:function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},6268:function(e){e.exports=!1},8640:function(e,t,n){var r=n(4061),i=n(6544);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},9491:function(e,t,n){var r=n(7583),i=n(9734),o=r.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},3590:function(e,t,n){var r,i=n(2569),o=n(8728),s=n(5690),a=n(4639),c=n(482),l=n(6668),u=n(9137),d=u("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"<\/script>"},f=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;f=r?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var n=s.length;n--;)delete f.prototype[s[n]];return f()};a[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=i(e),n=new h,h.prototype=null,n[d]=e):n=f(),void 0===t?n:o(n,t)}},8728:function(e,t,n){var r=n(8494),i=n(4615),o=n(2569),s=n(5432);e.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=s(t),a=r.length,c=0;a>c;)i.f(e,n=r[c++],t[n]);return e}},4615:function(e,t,n){var r=n(8494),i=n(275),o=n(2569),s=n(2670),a=Object.defineProperty;t.f=r?a:function(e,t,n){if(o(e),t=s(t,!0),o(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},6683:function(e,t,n){var r=n(8494),i=n(112),o=n(4677),s=n(2977),a=n(2670),c=n(4402),l=n(275),u=Object.getOwnPropertyDescriptor;t.f=r?u:function(e,t){if(e=s(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(c(e,t))return o(!i.f.call(e,t),e[t])}},3130:function(e,t,n){var r=n(2977),i=n(9275).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return s.slice()}}(e):i(r(e))}},9275:function(e,t,n){var r=n(8356),i=n(5690).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},4012:function(e,t){t.f=Object.getOwnPropertySymbols},8356:function(e,t,n){var r=n(4402),i=n(2977),o=n(5766).indexOf,s=n(4639);e.exports=function(e,t){var n,a=i(e),c=0,l=[];for(n in a)!r(s,n)&&r(a,n)&&l.push(n);for(;t.length>c;)r(a,n=t[c++])&&(~o(l,n)||l.push(n));return l}},5432:function(e,t,n){var r=n(8356),i=n(5690);e.exports=Object.keys||function(e){return r(e,i)}},112:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},3060:function(e,t,n){"use strict";var r=n(8191),i=n(3058);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},929:function(e,t,n){var r=n(5897),i=n(9275),o=n(4012),s=n(2569);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(s(e)),n=o.f;return n?t.concat(n(e)):t}},1287:function(e,t,n){var r=n(7583);e.exports=r},1270:function(e,t,n){var r=n(7583),i=n(57),o=n(4402),s=n(460),a=n(9734),c=n(2743),l=c.get,u=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,a){var c,l=!!a&&!!a.unsafe,h=!!a&&!!a.enumerable,p=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),(c=u(n)).source||(c.source=d.join("string"==typeof t?t:""))),e!==r?(l?!p&&e[t]&&(h=!0):delete e[t],h?e[t]=n:i(e,t,n)):h?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||a(this)}))},3955:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},460:function(e,t,n){var r=n(7583),i=n(57);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},8821:function(e,t,n){var r=n(4615).f,i=n(4402),o=n(3649)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},9137:function(e,t,n){var r=n(7836),i=n(8284),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},1314:function(e,t,n){var r=n(7583),i=n(460),o="__core-js_shared__",s=r[o]||i(o,{});e.exports=s},7836:function(e,t,n){var r=n(6268),i=n(1314);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.15.2",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},6782:function(e,t,n){var r=n(5089),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},2977:function(e,t,n){var r=n(5044),i=n(3955);e.exports=function(e){return r(i(e))}},5089:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},97:function(e,t,n){var r=n(5089),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},1324:function(e,t,n){var r=n(3955);e.exports=function(e){return Object(r(e))}},2670:function(e,t,n){var r=n(794);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},8191:function(e,t,n){var r={};r[n(3649)("toStringTag")]="z",e.exports="[object z]"===String(r)},8284:function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},7786:function(e,t,n){var r=n(8640);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},491:function(e,t,n){var r=n(3649);t.f=r},3649:function(e,t,n){var r=n(7583),i=n(7836),o=n(4402),s=n(8284),a=n(8640),c=n(7786),l=i("wks"),u=r.Symbol,d=c?u:u&&u.withoutSetter||s;e.exports=function(e){return o(l,e)&&(a||"string"==typeof l[e])||(a&&o(u,e)?l[e]=u[e]:l[e]=d("Symbol."+e)),l[e]}},1646:function(e,t,n){"use strict";var r=n(7263),i=n(6544),o=n(4521),s=n(794),a=n(1324),c=n(97),l=n(5999),u=n(4822),d=n(9269),h=n(3649),p=n(4061),f=h("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",_=p>=51||!i((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),v=d("concat"),E=function(e){if(!s(e))return!1;var t=e[f];return void 0!==t?!!t:o(e)};r({target:"Array",proto:!0,forced:!_||!v},{concat:function(e){var t,n,r,i,o,s=a(this),d=u(s,0),h=0;for(t=-1,r=arguments.length;t<r;t++)if(E(o=-1===t?s:arguments[t])){if(h+(i=c(o.length))>g)throw TypeError(m);for(n=0;n<i;n++,h++)n in o&&l(d,h,o[n])}else{if(h>=g)throw TypeError(m);l(d,h++,o)}return d.length=h,d}})},6956:function(e,t,n){var r=n(7583);n(8821)(r.JSON,"JSON",!0)},5222:function(e,t,n){n(8821)(Math,"Math",!0)},6394:function(e,t,n){var r=n(8191),i=n(1270),o=n(3060);r||i(Object.prototype,"toString",o,{unsafe:!0})},2257:function(e,t,n){var r=n(7263),i=n(7583),o=n(8821);r({global:!0},{Reflect:{}}),o(i.Reflect,"Reflect",!0)},462:function(e,t,n){n(2219)("asyncIterator")},8407:function(e,t,n){"use strict";var r=n(7263),i=n(8494),o=n(7583),s=n(4402),a=n(794),c=n(4615).f,l=n(3478),u=o.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof h?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};l(h,u);var p=h.prototype=u.prototype;p.constructor=h;var f=p.toString,g="Symbol(test)"==String(u("test")),m=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var e=a(this)?this.valueOf():this,t=f.call(e);if(s(d,e))return"";var n=g?t.slice(7,-1):t.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:h})}},2429:function(e,t,n){n(2219)("hasInstance")},1172:function(e,t,n){n(2219)("isConcatSpreadable")},8288:function(e,t,n){n(2219)("iterator")},2004:function(e,t,n){"use strict";var r=n(7263),i=n(7583),o=n(5897),s=n(6268),a=n(8494),c=n(8640),l=n(7786),u=n(6544),d=n(4402),h=n(4521),p=n(794),f=n(2569),g=n(1324),m=n(2977),_=n(2670),v=n(4677),E=n(3590),A=n(5432),y=n(9275),S=n(3130),b=n(4012),C=n(6683),T=n(4615),I=n(112),R=n(57),w=n(1270),k=n(7836),O=n(9137),N=n(4639),L=n(8284),P=n(3649),D=n(491),M=n(2219),x=n(8821),B=n(2743),U=n(4805).forEach,F=O("hidden"),V="Symbol",j=P("toPrimitive"),G=B.set,H=B.getterFor(V),Q=Object.prototype,W=i.Symbol,q=o("JSON","stringify"),z=C.f,Z=T.f,$=S.f,K=I.f,Y=k("symbols"),J=k("op-symbols"),X=k("string-to-symbol-registry"),ee=k("symbol-to-string-registry"),te=k("wks"),ne=i.QObject,re=!ne||!ne.prototype||!ne.prototype.findChild,ie=a&&u((function(){return 7!=E(Z({},"a",{get:function(){return Z(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=z(Q,t);r&&delete Q[t],Z(e,t,n),r&&e!==Q&&Z(Q,t,r)}:Z,oe=function(e,t){var n=Y[e]=E(W.prototype);return G(n,{type:V,tag:e,description:t}),a||(n.description=t),n},se=l?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof W},ae=function(e,t,n){e===Q&&ae(J,t,n),f(e);var r=_(t,!0);return f(n),d(Y,r)?(n.enumerable?(d(e,F)&&e[F][r]&&(e[F][r]=!1),n=E(n,{enumerable:v(0,!1)})):(d(e,F)||Z(e,F,v(1,{})),e[F][r]=!0),ie(e,r,n)):Z(e,r,n)},ce=function(e,t){f(e);var n=m(t),r=A(n).concat(he(n));return U(r,(function(t){a&&!le.call(n,t)||ae(e,t,n[t])})),e},le=function(e){var t=_(e,!0),n=K.call(this,t);return!(this===Q&&d(Y,t)&&!d(J,t))&&(!(n||!d(this,t)||!d(Y,t)||d(this,F)&&this[F][t])||n)},ue=function(e,t){var n=m(e),r=_(t,!0);if(n!==Q||!d(Y,r)||d(J,r)){var i=z(n,r);return!i||!d(Y,r)||d(n,F)&&n[F][r]||(i.enumerable=!0),i}},de=function(e){var t=$(m(e)),n=[];return U(t,(function(e){d(Y,e)||d(N,e)||n.push(e)})),n},he=function(e){var t=e===Q,n=$(t?J:m(e)),r=[];return U(n,(function(e){!d(Y,e)||t&&!d(Q,e)||r.push(Y[e])})),r};c||(w((W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=L(e),n=function e(n){this===Q&&e.call(J,n),d(this,F)&&d(this[F],t)&&(this[F][t]=!1),ie(this,t,v(1,n))};return a&&re&&ie(Q,t,{configurable:!0,set:n}),oe(t,e)}).prototype,"toString",(function(){return H(this).tag})),w(W,"withoutSetter",(function(e){return oe(L(e),e)})),I.f=le,T.f=ae,C.f=ue,y.f=S.f=de,b.f=he,D.f=function(e){return oe(P(e),e)},a&&(Z(W.prototype,"description",{configurable:!0,get:function(){return H(this).description}}),s||w(Q,"propertyIsEnumerable",le,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:W}),U(A(te),(function(e){M(e)})),r({target:V,stat:!0,forced:!c},{for:function(e){var t=String(e);if(d(X,t))return X[t];var n=W(t);return X[t]=n,ee[n]=t,n},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(d(ee,e))return ee[e]},useSetter:function(){re=!0},useSimple:function(){re=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!a},{create:function(e,t){return void 0===t?E(e):ce(E(e),t)},defineProperty:ae,defineProperties:ce,getOwnPropertyDescriptor:ue}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:de,getOwnPropertySymbols:he}),r({target:"Object",stat:!0,forced:u((function(){b.f(1)}))},{getOwnPropertySymbols:function(e){return b.f(g(e))}}),q&&r({target:"JSON",stat:!0,forced:!c||u((function(){var e=W();return"[null]"!=q([e])||"{}"!=q({a:e})||"{}"!=q(Object(e))}))},{stringify:function(e,t,n){for(var r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=t,(p(t)||void 0!==e)&&!se(e))return h(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!se(t))return t}),i[1]=t,q.apply(null,i)}}),W.prototype[j]||R(W.prototype,j,W.prototype.valueOf),x(W,V),N[F]=!0},8201:function(e,t,n){n(2219)("matchAll")},1274:function(e,t,n){n(2219)("match")},6626:function(e,t,n){n(2219)("replace")},3211:function(e,t,n){n(2219)("search")},9952:function(e,t,n){n(2219)("species")},15:function(e,t,n){n(2219)("split")},9831:function(e,t,n){n(2219)("toPrimitive")},7521:function(e,t,n){n(2219)("toStringTag")},2972:function(e,t,n){n(2219)("unscopables")},5441:function(e,t,n){var r=n(2582);e.exports=r},7705:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},8679:function(e){var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n=window.WeakMap;if(void 0===n){var r=Object.defineProperty,i=Date.now()%1e9;(n=function(){this.name="__st"+(1e9*Math.random()>>>0)+i+++"__"}).prototype={set:function(e,t){var n=e[this.name];return n&&n[0]===e?n[1]=t:r(e,this.name,{value:[e,t],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];if(!t)return!1;var n=t[0]===e;return t[0]=t[1]=void 0,n},has:function(e){var t=e[this.name];return!!t&&t[0]===e}}}var o=new n,s=window.msSetImmediate;if(!s){var a=[],c=String(Math.random());window.addEventListener("message",(function(e){if(e.data===c){var t=a;a=[],t.forEach((function(e){e()}))}})),s=function(e){a.push(e),window.postMessage(c,"*")}}var l=!1,u=[];function d(){l=!1;var e=u;u=[],e.sort((function(e,t){return e.uid_-t.uid_}));var t=!1;e.forEach((function(e){var n=e.takeRecords();!function(e){e.nodes_.forEach((function(t){var n=o.get(t);n&&n.forEach((function(t){t.observer===e&&t.removeTransientObservers()}))}))}(e),n.length&&(e.callback_(n,e),t=!0)})),t&&d()}function h(e,t){for(var n=e;n;n=n.parentNode){var r=o.get(n);if(r)for(var i=0;i<r.length;i++){var s=r[i],a=s.options;if(n===e||a.subtree){var c=t(a);c&&s.enqueue(c)}}}}var p,f,g=0;function m(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++g}function _(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function v(e,t){return p=new _(e,t)}function E(e){return f||((n=new _((t=p).type,t.target)).addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,(f=n).oldValue=e,f);var t,n}function A(e,t){return e===t?e:!f||(n=e)!==f&&n!==p?null:f;var n}function y(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[]}m.prototype={observe:function(e,t){var n;if(n=e,e=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(n)||n,!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var r,i=o.get(e);i||o.set(e,i=[]);for(var s=0;s<i.length;s++)if(i[s].observer===this){(r=i[s]).removeListeners(),r.options=t;break}r||(r=new y(this,e,t),i.push(r),this.nodes_.push(e)),r.addListeners()},disconnect:function(){this.nodes_.forEach((function(e){for(var t=o.get(e),n=0;n<t.length;n++){var r=t[n];if(r.observer===this){r.removeListeners(),t.splice(n,1);break}}}),this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}},y.prototype={enqueue:function(e){var t,n=this.observer.records_,r=n.length;if(n.length>0){var i=A(n[r-1],e);if(i)return void(n[r-1]=i)}else t=this.observer,u.push(t),l||(l=!0,s(d));n[r]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=o.get(e);t||o.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach((function(e){this.removeListeners_(e);for(var t=o.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}}),this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,n=e.relatedNode.namespaceURI,r=e.target;(o=new v("attributes",r)).attributeName=t,o.attributeNamespace=n;var i=null;"undefined"!=typeof MutationEvent&&e.attrChange===MutationEvent.ADDITION||(i=e.prevValue),h(r,(function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(t)||-1!==e.attributeFilter.indexOf(n)))return e.attributeOldValue?E(i):o}));break;case"DOMCharacterDataModified":var o=v("characterData",r=e.target);i=e.prevValue,h(r,(function(e){if(e.characterData)return e.characterDataOldValue?E(i):o}));break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":r=e.relatedNode;var s,a,c=e.target;"DOMNodeInserted"===e.type?(s=[c],a=[]):(s=[],a=[c]);var l=c.previousSibling,u=c.nextSibling;(o=v("childList",r)).addedNodes=s,o.removedNodes=a,o.previousSibling=l,o.nextSibling=u,h(r,(function(e){if(e.childList)return o}))}p=f=void 0}},t||(t=m),e.exports=t},6958:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var r,i=n(8826),o=n(7003),s=n(3379),a=n.n(s),c=n(9746),l=0,u={injectType:"lazyStyleTag",insert:"head",singleton:!1},d={};d.locals=c.Z.locals||{},d.use=function(){return l++||(r=a()(c.Z,u)),d},d.unuse=function(){l>0&&!--l&&(r(),r=null)};var h=d;function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t,n;return{c:function(){t=(0,i.bi)("svg"),n=(0,i.bi)("path"),(0,i.Lj)(n,"d","M599.99999 832.000004h47.999999a24 24 0 0 0 23.999999-24V376.000013a24 24 0 0 0-23.999999-24h-47.999999a24 24 0 0 0-24 24v431.999991a24 24 0 0 0 24 24zM927.999983 160.000017h-164.819997l-67.999998-113.399998A95.999998 95.999998 0 0 0 612.819989 0.00002H411.179993a95.999998 95.999998 0 0 0-82.319998 46.599999L260.819996 160.000017H95.999999A31.999999 31.999999 0 0 0 64 192.000016v32a31.999999 31.999999 0 0 0 31.999999 31.999999h32v671.999987a95.999998 95.999998 0 0 0 95.999998 95.999998h575.999989a95.999998 95.999998 0 0 0 95.999998-95.999998V256.000015h31.999999a31.999999 31.999999 0 0 0 32-31.999999V192.000016a31.999999 31.999999 0 0 0-32-31.999999zM407.679993 101.820018A12 12 0 0 1 417.999993 96.000018h187.999996a12 12 0 0 1 10.3 5.82L651.219989 160.000017H372.779994zM799.999986 928.000002H223.999997V256.000015h575.999989z m-423.999992-95.999998h47.999999a24 24 0 0 0 24-24V376.000013a24 24 0 0 0-24-24h-47.999999a24 24 0 0 0-24 24v431.999991a24 24 0 0 0 24 24z"),(0,i.Lj)(t,"class","vc-icon-delete"),(0,i.Lj)(t,"viewBox","0 0 1024 1024"),(0,i.Lj)(t,"width","200"),(0,i.Lj)(t,"height","200")},m:function(e,r){(0,i.$T)(e,t,r),(0,i.R3)(t,n)},d:function(e){e&&(0,i.og)(t)}}}function m(e){var t,n,r;return{c:function(){t=(0,i.bi)("svg"),n=(0,i.bi)("path"),r=(0,i.bi)("path"),(0,i.Lj)(n,"d","M874.154197 150.116875A511.970373 511.970373 0 1 0 1023.993986 511.991687a511.927744 511.927744 0 0 0-149.839789-361.874812z m-75.324866 648.382129A405.398688 405.398688 0 1 1 917.422301 511.991687a405.313431 405.313431 0 0 1-118.59297 286.507317z"),(0,i.Lj)(r,"d","M725.039096 299.274605a54.351559 54.351559 0 0 0-76.731613 0l-135.431297 135.431297L377.274375 299.274605a54.436817 54.436817 0 0 0-76.944756 76.987385l135.388668 135.431297-135.388668 135.473925a54.436817 54.436817 0 0 0 76.944756 76.987385l135.388668-135.431297 135.431297 135.473926a54.436817 54.436817 0 0 0 76.731613-76.987385l-135.388668-135.473926 135.388668-135.431296a54.479445 54.479445 0 0 0 0.213143-77.030014z"),(0,i.Lj)(t,"viewBox","0 0 1024 1024"),(0,i.Lj)(t,"width","200"),(0,i.Lj)(t,"height","200")},m:function(e,o){(0,i.$T)(e,t,o),(0,i.R3)(t,n),(0,i.R3)(t,r)},d:function(e){e&&(0,i.og)(t)}}}function _(e){var t,n;return{c:function(){t=(0,i.bi)("svg"),n=(0,i.bi)("path"),(0,i.Lj)(n,"fill-rule","evenodd"),(0,i.Lj)(n,"d","M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"),(0,i.Lj)(t,"class","vc-icon-copy"),(0,i.Lj)(t,"viewBox","0 0 16 16")},m:function(e,r){(0,i.$T)(e,t,r),(0,i.R3)(t,n)},d:function(e){e&&(0,i.og)(t)}}}function v(e){var t,n;return{c:function(){t=(0,i.bi)("svg"),n=(0,i.bi)("path"),(0,i.Lj)(n,"fill-rule","evenodd"),(0,i.Lj)(n,"d","M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"),(0,i.Lj)(t,"class","vc-icon-suc"),(0,i.Lj)(t,"viewBox","0 0 16 16")},m:function(e,r){(0,i.$T)(e,t,r),(0,i.R3)(t,n)},d:function(e){e&&(0,i.og)(t)}}}function E(e){var t,n,r;return{c:function(){t=(0,i.bi)("svg"),n=(0,i.bi)("path"),r=(0,i.bi)("path"),(0,i.Lj)(n,"d","M776.533333 1024 162.133333 1024C72.533333 1024 0 951.466667 0 861.866667L0 247.466667C0 157.866667 72.533333 85.333333 162.133333 85.333333L469.333333 85.333333c25.6 0 42.666667 17.066667 42.666667 42.666667s-17.066667 42.666667-42.666667 42.666667L162.133333 170.666667C119.466667 170.666667 85.333333 204.8 85.333333 247.466667l0 610.133333c0 42.666667 34.133333 76.8 76.8 76.8l610.133333 0c42.666667 0 76.8-34.133333 76.8-76.8L849.066667 554.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 307.2C938.666667 951.466667 866.133333 1024 776.533333 1024z"),(0,i.Lj)(r,"d","M256 810.666667c-12.8 0-21.333333-4.266667-29.866667-12.8C217.6 789.333333 213.333333 772.266667 213.333333 759.466667l42.666667-213.333333c0-8.533333 4.266667-17.066667 12.8-21.333333l512-512c17.066667-17.066667 42.666667-17.066667 59.733333 0l170.666667 170.666667c17.066667 17.066667 17.066667 42.666667 0 59.733333l-512 512c-4.266667 4.266667-12.8 8.533333-21.333333 12.8l-213.333333 42.666667C260.266667 810.666667 260.266667 810.666667 256 810.666667zM337.066667 576l-25.6 136.533333 136.533333-25.6L921.6 213.333333 810.666667 102.4 337.066667 576z"),(0,i.Lj)(t,"class","vc-icon-edit"),(0,i.Lj)(t,"viewBox","0 0 1024 1024"),(0,i.Lj)(t,"width","200"),(0,i.Lj)(t,"height","200")},m:function(e,o){(0,i.$T)(e,t,o),(0,i.R3)(t,n),(0,i.R3)(t,r)},d:function(e){e&&(0,i.og)(t)}}}function A(e){var t,n;return{c:function(){t=(0,i.bi)("svg"),n=(0,i.bi)("path"),(0,i.Lj)(n,"d","M581.338005 987.646578c-2.867097 4.095853-4.573702 8.669555-8.191705 12.287558a83.214071 83.214071 0 0 1-60.959939 24.029001 83.214071 83.214071 0 0 1-61.028203-24.029001c-3.618003-3.618003-5.324608-8.191705-8.123441-12.15103L24.370323 569.050448a83.418864 83.418864 0 0 1 117.892289-117.89229l369.923749 369.92375L1308.829682 24.438587A83.418864 83.418864 0 0 1 1426.721971 142.194348L581.338005 987.646578z"),(0,i.Lj)(t,"class","vc-icon-don"),(0,i.Lj)(t,"viewBox","0 0 1501 1024"),(0,i.Lj)(t,"width","200"),(0,i.Lj)(t,"height","200")},m:function(e,r){(0,i.$T)(e,t,r),(0,i.R3)(t,n)},d:function(e){e&&(0,i.og)(t)}}}function y(e){var t,n;return{c:function(){t=(0,i.bi)("svg"),n=(0,i.bi)("path"),(0,i.Lj)(n,"d","M894.976 574.464q0 78.848-29.696 148.48t-81.408 123.392-121.856 88.064-151.04 41.472q-5.12 1.024-9.216 1.536t-9.216 0.512l-177.152 0q-17.408 0-34.304-6.144t-30.208-16.896-22.016-25.088-8.704-29.696 8.192-29.696 21.504-24.576 29.696-16.384 33.792-6.144l158.72 1.024q54.272 0 102.4-19.968t83.968-53.76 56.32-79.36 20.48-97.792q0-49.152-18.432-92.16t-50.688-76.8-75.264-54.784-93.184-26.112q-2.048 0-2.56 0.512t-2.56 0.512l-162.816 0 0 80.896q0 17.408-13.824 25.6t-44.544-10.24q-8.192-5.12-26.112-17.92t-41.984-30.208-50.688-36.864l-51.2-38.912q-15.36-12.288-26.624-22.016t-11.264-24.064q0-12.288 12.8-25.6t29.184-26.624q18.432-15.36 44.032-35.84t50.688-39.936 45.056-35.328 28.16-22.016q24.576-17.408 39.936-7.168t16.384 30.72l0 81.92 162.816 0q5.12 0 10.752 1.024t10.752 2.048q79.872 8.192 149.504 41.984t121.344 87.552 80.896 123.392 29.184 147.456z"),(0,i.Lj)(t,"class","vc-icon-cancel"),(0,i.Lj)(t,"viewBox","0 0 1024 1024"),(0,i.Lj)(t,"width","200"),(0,i.Lj)(t,"height","200")},m:function(e,r){(0,i.$T)(e,t,r),(0,i.R3)(t,n)},d:function(e){e&&(0,i.og)(t)}}}function S(e){var t,n,r,o,s,a,c,l,u,d="delete"===e[0]&&g(),h="clear"===e[0]&&m(),p="copy"===e[0]&&_(),f="success"===e[0]&&v(),S="edit"===e[0]&&E(),b="done"===e[0]&&A(),C="cancel"===e[0]&&y();return{c:function(){t=(0,i.bG)("i"),d&&d.c(),n=(0,i.Dh)(),h&&h.c(),r=(0,i.Dh)(),p&&p.c(),o=(0,i.Dh)(),f&&f.c(),s=(0,i.Dh)(),S&&S.c(),a=(0,i.Dh)(),b&&b.c(),c=(0,i.Dh)(),C&&C.c(),(0,i.Lj)(t,"class","vc-icon")},m:function(g,m){(0,i.$T)(g,t,m),d&&d.m(t,null),(0,i.R3)(t,n),h&&h.m(t,null),(0,i.R3)(t,r),p&&p.m(t,null),(0,i.R3)(t,o),f&&f.m(t,null),(0,i.R3)(t,s),S&&S.m(t,null),(0,i.R3)(t,a),b&&b.m(t,null),(0,i.R3)(t,c),C&&C.m(t,null),l||(u=(0,i.oL)(t,"click",e[1]),l=!0)},p:function(e,i){i[0],"delete"===e[0]?d||((d=g()).c(),d.m(t,n)):d&&(d.d(1),d=null),"clear"===e[0]?h||((h=m()).c(),h.m(t,r)):h&&(h.d(1),h=null),"copy"===e[0]?p||((p=_()).c(),p.m(t,o)):p&&(p.d(1),p=null),"success"===e[0]?f||((f=v()).c(),f.m(t,s)):f&&(f.d(1),f=null),"edit"===e[0]?S||((S=E()).c(),S.m(t,a)):S&&(S.d(1),S=null),"done"===e[0]?b||((b=A()).c(),b.m(t,c)):b&&(b.d(1),b=null),"cancel"===e[0]?C||((C=y()).c(),C.m(t,null)):C&&(C.d(1),C=null)},i:i.ZT,o:i.ZT,d:function(e){e&&(0,i.og)(t),d&&d.d(),h&&h.d(),p&&p.d(),f&&f.d(),S&&S.d(),b&&b.d(),C&&C.d(),l=!1,u()}}}function b(e,t,n){var r=t.name;return(0,o.H3)((function(){h.use()})),(0,o.ev)((function(){h.unuse()})),e.$$set=function(e){"name"in e&&n(0,r=e.name)},[r,function(t){i.cK.call(this,e,t)}]}var C=function(e){var t,n,r,o,s;function a(t){var n;return n=e.call(this)||this,(0,i.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t,b,S,i.N8,{name:0}),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n),r=a,(o=[{key:"name",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({name:e}),(0,i.yl)()}}])&&p(r.prototype,o),s&&p(r,s),a}(i.f_)},3903:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var svelte_internal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8826),svelte__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7003),_component_icon_svelte__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6958),_logTool__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8665),_log_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5629),_logCommand_less__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3411);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function get_each_context(e,t,n){var r=e.slice();return r[28]=t[n],r}function create_if_block_2(e){var t,n,r;return{c:function(){(t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("li")).textContent="Close",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(t,"class","vc-cmd-prompted-hide")},m:function(i,o){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(i,t,o),n||(r=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(t,"click",e[5]),n=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZT,d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(t),n=!1,r()}}}function create_else_block(e){var t;return{c:function(){(t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("li")).textContent="No Prompted"},m:function(e,n){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(e,t,n)},d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(t)}}}function create_each_block(e){var t,n,r,i,o=e[28].text+"";function s(){return e[14](e[28])}return{c:function(){t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("li"),n=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.fL)(o)},m:function(e,o){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(e,t,o),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(t,n),r||(i=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(t,"click",s),r=!0)},p:function(t,r){e=t,8&r&&o!==(o=e[28].text+"")&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.rT)(n,o)},d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(t),r=!1,i()}}}function create_if_block_1(e){var t,n,r,i,o;return n=new _component_icon_svelte__WEBPACK_IMPORTED_MODULE_2__.Z({props:{name:"clear"}}),{c:function(){t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("div"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YC)(n.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(t,"class","vc-cmd-clear-btn")},m:function(s,a){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(s,t,a),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ye)(n,t,null),r=!0,i||(o=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(t,"click",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT)(e[15])),i=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZT,i:function(e){r||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(n.$$.fragment,e),r=!0)},o:function(e){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.et)(n.$$.fragment,e),r=!1},d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(t),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vp)(n),i=!1,o()}}}function create_if_block(e){var t,n,r,i,o;return n=new _component_icon_svelte__WEBPACK_IMPORTED_MODULE_2__.Z({props:{name:"clear"}}),{c:function(){t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("div"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YC)(n.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(t,"class","vc-cmd-clear-btn")},m:function(s,a){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(s,t,a),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ye)(n,t,null),r=!0,i||(o=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(t,"click",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT)(e[18])),i=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZT,i:function(e){r||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(n.$$.fragment,e),r=!0)},o:function(e){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.et)(n.$$.fragment,e),r=!1},d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(t),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vp)(n),i=!1,o()}}}function create_fragment(e){for(var t,n,r,i,o,s,a,c,l,u,d,h,p,f,g,m,_,v,E,A,y,S=e[3].length>0&&create_if_block_2(e),b=e[3],C=[],T=0;T<b.length;T+=1)C[T]=create_each_block(get_each_context(e,b,T));var I=null;b.length||(I=create_else_block(e));var R=e[1].length>0&&create_if_block_1(e),w=e[4].length>0&&create_if_block(e);return{c:function(){t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("form"),(n=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("button")).textContent="OK",r=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)(),i=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("ul"),S&&S.c(),o=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)();for(var E=0;E<C.length;E+=1)C[E].c();I&&I.c(),s=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)(),a=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("div"),R&&R.c(),c=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)(),l=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("textarea"),u=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)(),d=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("form"),(h=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("button")).textContent="Filter",p=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)(),f=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("ul"),g=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)(),m=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("div"),w&&w.c(),_=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Dh)(),v=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bG)("textarea"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(n,"class","vc-cmd-btn"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(n,"type","submit"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(i,"class","vc-cmd-prompted"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(i,"style",e[2]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(l,"class","vc-cmd-input"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(l,"placeholder","command..."),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(a,"class","vc-cmd-input-wrap"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(t,"class","vc-cmd"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(h,"class","vc-cmd-btn"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(h,"type","submit"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(f,"class","vc-cmd-prompted"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(v,"class","vc-cmd-input"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(v,"placeholder","filter..."),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(m,"class","vc-cmd-input-wrap"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(d,"class","vc-cmd vc-filter")},m:function(b,T){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(b,t,T),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(t,n),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(t,r),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(t,i),S&&S.m(i,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(i,o);for(var k=0;k<C.length;k+=1)C[k].m(i,null);I&&I.m(i,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(t,s),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(t,a),R&&R.m(a,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(a,c),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(a,l),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Bm)(l,e[1]),e[17](l),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(b,u,T),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$T)(b,d,T),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(d,h),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(d,p),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(d,f),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(d,g),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(d,m),w&&w.m(m,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(m,_),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3)(m,v),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Bm)(v,e[4]),E=!0,A||(y=[(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(l,"input",e[16]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(l,"keydown",e[10]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(l,"keyup",e[11]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(l,"focus",e[8]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(l,"blur",e[9]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(t,"submit",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT)(e[12])),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(v,"input",e[19]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oL)(d,"submit",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT)(e[13]))],A=!0)},p:function(e,t){var n=t[0];if(e[3].length>0?S?S.p(e,n):((S=create_if_block_2(e)).c(),S.m(i,o)):S&&(S.d(1),S=null),136&n){var r;for(b=e[3],r=0;r<b.length;r+=1){var s=get_each_context(e,b,r);C[r]?C[r].p(s,n):(C[r]=create_each_block(s),C[r].c(),C[r].m(i,null))}for(;r<C.length;r+=1)C[r].d(1);C.length=b.length,b.length?I&&(I.d(1),I=null):I||((I=create_else_block(e)).c(),I.m(i,null))}(!E||4&n)&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Lj)(i,"style",e[2]),e[1].length>0?R?(R.p(e,n),2&n&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(R,1)):((R=create_if_block_1(e)).c(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(R,1),R.m(a,c)):R&&((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dv)(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.et)(R,1,1,(function(){R=null})),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)()),2&n&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Bm)(l,e[1]),e[4].length>0?w?(w.p(e,n),16&n&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(w,1)):((w=create_if_block(e)).c(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(w,1),w.m(m,_)):w&&((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dv)(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.et)(w,1,1,(function(){w=null})),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gb)()),16&n&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Bm)(v,e[4])},i:function(e){E||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(R),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(w),E=!0)},o:function(e){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.et)(R),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.et)(w),E=!1},d:function(n){n&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(t),S&&S.d(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.RM)(C,n),I&&I.d(),R&&R.d(),e[17](null),n&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(u),n&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.og)(d),w&&w.d(),A=!1,(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.j7)(y)}}}function instance($$self,$$props,$$invalidate){var module=_log_model__WEBPACK_IMPORTED_MODULE_3__.W.getSingleton(_log_model__WEBPACK_IMPORTED_MODULE_3__.W,"VConsoleLogModel"),cachedObjKeys={},dispatch=(0,svelte__WEBPACK_IMPORTED_MODULE_1__.x)(),cmdElement,cmdValue="",promptedStyle="",promptedList=[],filterValue="";(0,svelte__WEBPACK_IMPORTED_MODULE_1__.H3)((function(){_logCommand_less__WEBPACK_IMPORTED_MODULE_4__.Z.use()})),(0,svelte__WEBPACK_IMPORTED_MODULE_1__.ev)((function(){_logCommand_less__WEBPACK_IMPORTED_MODULE_4__.Z.unuse()}));var evalCommand=function(e){module.evalCommand(e)},moveCursorToPos=function(e,t){e.setSelectionRange&&setTimeout((function(){e.setSelectionRange(t,t)}),1)},clearPromptedList=function(){$$invalidate(2,promptedStyle="display: none;"),$$invalidate(3,promptedList=[])},updatePromptedList=function updatePromptedList(identifier){if(""!==cmdValue){identifier||(identifier=(0,_logTool__WEBPACK_IMPORTED_MODULE_5__.oj)(cmdValue));var objName="window",keyName=cmdValue;if("."!==identifier.front.text&&"["!==identifier.front.text||(objName=identifier.front.before,keyName=""!==identifier.back.text?identifier.back.before:identifier.front.after),keyName=keyName.replace(/(^['"]+)|(['"']+$)/g,""),!cachedObjKeys[objName])try{cachedObjKeys[objName]=Object.getOwnPropertyNames(eval("("+objName+")")).sort()}catch(t){}try{if(cachedObjKeys[objName])for(var i=0;i<cachedObjKeys[objName].length&&!(promptedList.length>=100);i++){var key=String(cachedObjKeys[objName][i]),keyPattern=new RegExp("^"+keyName,"i");if(keyPattern.test(key)){var completeCmd=objName;"."===identifier.front.text||""===identifier.front.text?completeCmd+="."+key:"["===identifier.front.text&&(completeCmd+="['"+key+"']"),promptedList.push({text:key,value:completeCmd})}}}catch(t){}if(promptedList.length>0){var m=Math.min(200,31*(promptedList.length+1));$$invalidate(2,promptedStyle="display: block; height: "+m+"px; margin-top: "+(-m-2)+"px;"),$$invalidate(3,promptedList)}else clearPromptedList()}else clearPromptedList()},autoCompleteBrackets=function(e,t){if(8!==t&&46!==t&&""===e.front.after)switch(e.front.text){case"[":return $$invalidate(1,cmdValue+="]"),void moveCursorToPos(cmdElement,cmdValue.length-1);case"(":return $$invalidate(1,cmdValue+=")"),void moveCursorToPos(cmdElement,cmdValue.length-1);case"{":return $$invalidate(1,cmdValue+="}"),void moveCursorToPos(cmdElement,cmdValue.length-1)}},dispatchFilterEvent=function(){dispatch("filterText",{filterText:filterValue})},onTapClearText=function(e){"cmd"===e?($$invalidate(1,cmdValue=""),clearPromptedList()):"filter"===e&&($$invalidate(4,filterValue=""),dispatchFilterEvent())},onTapPromptedItem=function onTapPromptedItem(item){var type="";try{type=eval("typeof "+item.value)}catch(t){}$$invalidate(1,cmdValue=item.value+("function"===type?"()":"")),clearPromptedList()},onCmdFocus=function(){updatePromptedList()},onCmdBlur=function(){},onCmdKeyDown=function(e){13===e.keyCode&&(e.preventDefault(),onCmdSubmit())},onCmdKeyUp=function(e){$$invalidate(3,promptedList=[]);var t=(0,_logTool__WEBPACK_IMPORTED_MODULE_5__.oj)(e.target.value);autoCompleteBrackets(t,e.keyCode),updatePromptedList(t)},onCmdSubmit=function(){""!==cmdValue&&evalCommand(cmdValue),clearPromptedList()},onFilterSubmit=function(e){dispatchFilterEvent()},click_handler=function(e){return onTapPromptedItem(e)},click_handler_1=function(){return onTapClearText("cmd")};function textarea0_input_handler(){cmdValue=this.value,$$invalidate(1,cmdValue)}function textarea0_binding(e){svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Vn[e?"unshift":"push"]((function(){$$invalidate(0,cmdElement=e)}))}var click_handler_2=function(){return onTapClearText("filter")};function textarea1_input_handler(){filterValue=this.value,$$invalidate(4,filterValue)}return[cmdElement,cmdValue,promptedStyle,promptedList,filterValue,clearPromptedList,onTapClearText,onTapPromptedItem,onCmdFocus,onCmdBlur,onCmdKeyDown,onCmdKeyUp,onCmdSubmit,onFilterSubmit,click_handler,click_handler_1,textarea0_input_handler,textarea0_binding,click_handler_2,textarea1_input_handler]}var LogCommand=function(e){function t(t){var n;return n=e.call(this)||this,(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.S1)(_assertThisInitialized(n),t,instance,create_fragment,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.N8,{}),n}return _inheritsLoose(t,e),t}(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.f_);__webpack_exports__.Z=LogCommand},4687:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(4683),i=function(){var e=(0,r.fZ)({updateTime:0}),t=e.subscribe,n=e.set,i=e.update;return{subscribe:t,set:n,update:i,updateTime:function(){i((function(e){return e.updateTime=Date.now(),e}))}}}()},643:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var r=function(){function e(){this._onDataUpdateCallbacks=[]}return e.getSingleton=function(t,n){return n||(n=t.toString()),e.singleton[n]||(e.singleton[n]=new t),e.singleton[n]},e}();r.singleton={}},5103:function(e,t,n){"use strict";function r(e){return"[object Number]"===Object.prototype.toString.call(e)}function i(e){return"bigint"==typeof e}function o(e){return"string"==typeof e}function s(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e){return"boolean"==typeof e}function c(e){return void 0===e}function l(e){return null===e}function u(e){return"symbol"==typeof e}function d(e){return!("[object Object]"!==Object.prototype.toString.call(e)&&(r(e)||i(e)||o(e)||a(e)||s(e)||l(e)||h(e)||c(e)||u(e)))}function h(e){return"function"==typeof e}function p(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function f(e){var t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object DOMWindow]"===t||"[object global]"===t}function g(e){return null!=e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&"function"!=typeof e&&"symbol"!=typeof e&&"bigint"!=typeof e&&"undefined"!=typeof Symbol&&"function"==typeof e[Symbol.iterator]}function m(e){return Object.prototype.toString.call(e).replace(/\[object (.*)\]/,"$1")}n.d(t,{hj:function(){return r},C4:function(){return i},HD:function(){return o},kJ:function(){return s},jn:function(){return a},o8:function(){return c},Ft:function(){return l},yk:function(){return u},Kn:function(){return d},mf:function(){return h},kK:function(){return p},FJ:function(){return f},TW:function(){return g},zl:function(){return m},DV:function(){return v},PO:function(){return E},Ak:function(){return S},rE:function(){return T},hZ:function(){return w},wz:function(){return k},KL:function(){return O},Kt:function(){return L},qr:function(){return D},MH:function(){return M},QK:function(){return x},_D:function(){return B},po:function(){return U},cF:function(){return F},QI:function(){return V}});var _=/(function|class) ([^ \{\()}]{1,})[\(| ]/;function v(e){var t;if(null==e)return"";var n=_.exec((null==e||null==(t=e.constructor)?void 0:t.toString())||"");return n&&n.length>1?n[2]:""}function E(e){var t,n=Object.prototype.hasOwnProperty;if(!e||"object"!=typeof e||e.nodeType||f(e))return!1;try{if(e.constructor&&!n.call(e,"constructor")&&!n.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(t in e);return void 0===t||n.call(e,t)}var A=/[<>&" ]/g,y=function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"," ":"&nbsp;"}[e]};function S(e){return"string"!=typeof e&&"number"!=typeof e?e:String(e).replace(A,y)}var b=/[\n\t]/g,C=function(e){return{"\n":"\\n","\t":"\\t"}[e]};function T(e){return"string"!=typeof e?e:String(e).replace(b,C)}var I=function(e,t){void 0===t&&(t=0);var n="";if(o(e)){var r=e.length;t>0&&r>t&&(e=L(e,t)+"...("+O(k(e))+")"),n+='"'+T(e)+'"'}else u(e)?n+=String(e).replace(/^Symbol\((.*)\)$/i,'Symbol("$1")'):h(e)?n+=(e.name||"function")+"()":i(e)?n+=String(e)+"n":n+=String(e);return n},R=function e(t,n,r){if(void 0===r&&(r=0),d(t)||s(t))if(n.circularFinder(t)){if(s(t))n.ret+="(Circular Array)";else if(d){var i;n.ret+="(Circular "+((null==(i=t.constructor)?void 0:i.name)||"Object")+")"}}else{var o="",a="";if(n.pretty){for(var c=0;c<=r;c++)o+="  ";a="\n"}var l="{",h="}";s(t)&&(l="[",h="]"),n.ret+=l+a;for(var p=M(t),f=0;f<p.length;f++){var g=p[f];n.ret+=o;try{s(t)||(d(g)||s(g)||u(g)?n.ret+=Object.prototype.toString.call(g):n.ret+=g,n.ret+=": ")}catch(e){continue}try{var m=t[g];if(s(m))n.maxDepth>-1&&r>=n.maxDepth?n.ret+="Array("+m.length+")":e(m,n,r+1);else if(d(m)){var _;n.maxDepth>-1&&r>=n.maxDepth?n.ret+=((null==(_=m.constructor)?void 0:_.name)||"Object")+" {}":e(m,n,r+1)}else n.ret+=I(m,n.keyMaxLen)}catch(e){n.ret+="(...)"}if(n.keyMaxLen>0&&n.ret.length>=10*n.keyMaxLen){n.ret+=", (...)";break}f<p.length-1&&(n.ret+=", "),n.ret+=a}n.ret+=o.substring(0,o.length-2)+h}else n.ret+=I(t,n.keyMaxLen)};function w(e,t){void 0===t&&(t={maxDepth:-1,keyMaxLen:-1,pretty:!1});var n,r=Object.assign({ret:"",maxDepth:-1,keyMaxLen:-1,pretty:!1,circularFinder:(n=new WeakSet,function(e){if("object"==typeof e&&null!==e){if(n.has(e))return!0;n.add(e)}return!1})},t);return R(e,r),r.ret}function k(e){try{return encodeURI(e).split(/%(?:u[0-9A-F]{2})?[0-9A-F]{2}|./).length-1}catch(e){return 0}}function O(e){return e<=0?"":e>=1048576?(e/1024/1024).toFixed(1)+" MB":e>=1024?(e/1024).toFixed(1)+" KB":e+" B"}var N=/[^\x00-\xff]/g;function L(e,t){if(e.replace(N,"**").length>t)for(var n=Math.floor(t/2),r=e.length;n<r;n++){var i=e.substring(0,n);if(i.replace(N,"**").length>=t)return i}return e}var P=function(e,t){return String(e).localeCompare(String(t),void 0,{numeric:!0,sensitivity:"base"})};function D(e){return e.sort(P)}function M(e){return d(e)||s(e)?Object.keys(e):[]}function x(e){var t=M(e);return function(e){return d(e)||s(e)?Object.getOwnPropertyNames(e):[]}(e).filter((function(e){return-1===t.indexOf(e)}))}function B(e){return d(e)||s(e)?Object.getOwnPropertySymbols(e):[]}function U(e,t){window.localStorage&&(e="vConsole_"+e,localStorage.setItem(e,t))}function F(e){if(window.localStorage)return e="vConsole_"+e,localStorage.getItem(e)}function V(e){return void 0===e&&(e=""),"__vc_"+e+Math.random().toString(36).substring(2,8)}},5629:function(e,t,n){"use strict";n.d(t,{W:function(){return l}});var r=n(5103),i=n(643),o=n(4687),s=n(8665),a=n(9923);function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function i(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).LOG_METHODS=["log","info","warn","debug","error"],t.ADDED_LOG_PLUGIN_ID=[],t.maxLogNumber=1e3,t.logCounter=0,t.pluginPattern=void 0,t.origConsole={},t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n);var l=i.prototype;return l.bindPlugin=function(e){return!(this.ADDED_LOG_PLUGIN_ID.indexOf(e)>-1)&&(0===this.ADDED_LOG_PLUGIN_ID.length&&this.mockConsole(),a.O.create(e),this.ADDED_LOG_PLUGIN_ID.push(e),this.pluginPattern=new RegExp("^\\[("+this.ADDED_LOG_PLUGIN_ID.join("|")+")\\]$","i"),!0)},l.unbindPlugin=function(e){var t=this.ADDED_LOG_PLUGIN_ID.indexOf(e);return-1!==t&&(this.ADDED_LOG_PLUGIN_ID.splice(t,1),a.O.delete(e),0===this.ADDED_LOG_PLUGIN_ID.length&&this.unmockConsole(),!0)},l.mockConsole=function(){var e=this;if("function"!=typeof this.origConsole.log){var t=this.LOG_METHODS;window.console?(t.map((function(t){e.origConsole[t]=window.console[t]})),this.origConsole.time=window.console.time,this.origConsole.timeEnd=window.console.timeEnd,this.origConsole.clear=window.console.clear):window.console={},t.map((function(t){window.console[t]=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.addLog({type:t,origData:r||[]})}.bind(window.console)}));var n={};window.console.time=function(e){void 0===e&&(e=""),n[e]=Date.now()}.bind(window.console),window.console.timeEnd=function(e){void 0===e&&(e="");var t=n[e];t?(console.log(e+":",Date.now()-t+"ms"),delete n[e]):console.log(e+": 0ms")}.bind(window.console),window.console.clear=function(){e.clearLog();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.callOriginalConsole.apply(e,["clear"].concat(n))}.bind(window.console),window._vcOrigConsole=this.origConsole}},l.unmockConsole=function(){for(var e in this.origConsole)window.console[e]=this.origConsole[e];window._vcOrigConsole&&delete window._vcOrigConsole},l.callOriginalConsole=function(e){if("function"==typeof this.origConsole[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.origConsole[e].apply(window.console,n)}},l.clearLog=function(){var e=a.O.getAll();for(var t in e)e[t].update((function(e){return e.logList=[],e}))},l.clearPluginLog=function(e){a.O.get(e).update((function(e){return e.logList=[],e}))},l.addLog=function(e,t){void 0===e&&(e={type:"log",origData:[]});var n={_id:r.QI(),type:e.type,cmdType:null==t?void 0:t.cmdType,date:Date.now(),data:(0,s.b1)(e.origData||[])},i=this._extractPluginIdByLog(n);this._isRepeatedLog(i,n)?this._updateLastLogRepeated(i):(this._pushLogList(i,n),this._limitLogListLength()),null!=t&&t.noOrig||this.callOriginalConsole.apply(this,[e.type].concat(e.origData))},l.evalCommand=function(e){this.addLog({type:"log",origData:[e]},{cmdType:"input"});var t=void 0;try{t=eval.call(window,"("+e+")")}catch(n){try{t=eval.call(window,e)}catch(e){}}this.addLog({type:"log",origData:[t]},{cmdType:"output"})},l._extractPluginIdByLog=function(e){var t,n="default",i=null==(t=e.data[0])?void 0:t.origData;if(r.HD(i)){var o=i.match(this.pluginPattern);if(null!==o&&o.length>1){var s=o[1].toLowerCase();this.ADDED_LOG_PLUGIN_ID.indexOf(s)>-1&&(n=s,e.data.shift())}}return n},l._isRepeatedLog=function(e,t){var n=a.O.getRaw(e),r=n.logList[n.logList.length-1];if(!r)return!1;var i=!1;if(t.type===r.type&&t.cmdType===r.cmdType&&t.data.length===r.data.length){i=!0;for(var o=0;o<t.data.length;o++)if(t.data[o].origData!==r.data[o].origData){i=!1;break}}return i},l._updateLastLogRepeated=function(e){a.O.get(e).update((function(e){var t=e.logList,n=t[t.length-1];return n.repeated=n.repeated?n.repeated+1:2,e}))},l._pushLogList=function(e,t){a.O.get(e).update((function(e){return e.logList.push(t),e})),o.x.updateTime()},l._limitLogListLength=function(){var e=this;if(this.logCounter++,this.logCounter%10==0){this.logCounter=0;var t=a.O.getAll();for(var n in t)t[n].update((function(t){return t.logList.length>e.maxLogNumber-10&&t.logList.splice(0,t.logList.length-e.maxLogNumber+10),t}))}},i}(i.N)},9923:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});var r=n(4683),i=function(){function e(){}return e.create=function(e){return this.storeMap[e]||(this.storeMap[e]=(0,r.fZ)({logList:[]})),this.storeMap[e]},e.delete=function(e){this.storeMap[e]&&delete this.storeMap[e]},e.get=function(e){return this.storeMap[e]},e.getRaw=function(e){return(0,r.U2)(this.storeMap[e])},e.getAll=function(){return this.storeMap},e}();i.storeMap={}},8665:function(e,t,n){"use strict";n.d(t,{LH:function(){return o},oj:function(){return l},HX:function(){return u},b1:function(){return h},Tg:function(){return p}});var r=n(5103),i=function(e){var t=r.hZ(e,{maxDepth:0}),n=t.substring(0,36),i=r.DV(e);return t.length>36&&(n+="..."),r.rE(i+" "+n)},o=function(e,t){void 0===t&&(t=!0);var n="undefined",o=e;return e instanceof p?(n="uninvocatable",o="(...)"):r.kJ(e)?(n="array",o=i(e)):r.Kn(e)?(n="object",o=i(e)):r.HD(e)?(n="string",o=r.rE(e),t&&(o='"'+o+'"')):r.hj(e)?(n="number",o=String(e)):r.C4(e)?(n="bigint",o=String(e)+"n"):r.jn(e)?(n="boolean",o=String(e)):r.Ft(e)?(n="null",o="null"):r.o8(e)?(n="undefined",o="undefined"):r.mf(e)?(n="function",o=(e.name||"function")+"()"):r.yk(e)&&(n="symbol",o=String(e)),{text:o,valueType:n}},s=[".","[","(","{","}"],a=["]",")","}"],c=function(e,t,n){void 0===n&&(n=0);for(var r={text:"",pos:-1,before:"",after:""},i=e.length-1;i>=n;i--){var o=t.indexOf(e[i]);if(o>-1){r.text=t[o],r.pos=i,r.before=e.substring(n,i),r.after=e.substring(i+1,e.length);break}}return r},l=function(e){var t=c(e,s,0);return{front:t,back:c(e,a,t.pos+1)}},u=function(e,t){if(""===t)return!0;for(var n=0;n<e.data.length;n++)if("string"===typeof e.data[n].origData&&e.data[n].origData.indexOf(t)>-1)return!0;return!1},d=/(\%[csdo] )|( \%[csdo])/g,h=function(e){if(d.lastIndex=0,r.HD(e[0])&&d.test(e[0])){for(var t,n=[].concat(e),i=n.shift().split(d).filter((function(e){return void 0!==e&&""!==e})),o=n,s=[],a=!1,c="";i.length>0;){var l=i.shift();if(/ ?\%c ?/.test(l)?o.length>0?"string"!=typeof(c=o.shift())&&(c=""):(t=l,c="",a=!0):/ ?\%[sd] ?/.test(l)?(t=o.length>0?r.Kn(o[0])?r.DV(o.shift()):String(o.shift()):l,a=!0):/ ?\%o ?/.test(l)?(t=o.length>0?o.shift():l,a=!0):(t=l,a=!0),a){var u={origData:t};c&&(u.style=c),s.push(u),a=!1,t=void 0,c=""}}for(var h=0;h<o.length;h++)s.push({origData:o[h]});return s}for(var p=[],f=0;f<e.length;f++)p.push({origData:e[f]});return p},p=function(){}},9746:function(e,t,n){"use strict";var r=n(7705),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".vc-icon {\n  word-break: normal;\n  white-space: normal;\n  overflow: visible;\n}\n.vc-icon svg {\n  fill: var(--VC-FG-2);\n  height: 1em;\n  width: 1em;\n  vertical-align: -0.11em;\n}\n.vc-icon .vc-icon-delete {\n  vertical-align: -0.11em;\n}\n.vc-icon .vc-icon-copy {\n  height: 1.1em;\n  width: 1.1em;\n  vertical-align: -0.16em;\n}\n.vc-icon .vc-icon-suc {\n  fill: var(--VC-TEXTGREEN);\n  height: 1.1em;\n  width: 1.1em;\n  vertical-align: -0.16em;\n}\n",""]),t.Z=i},3283:function(e,t,n){"use strict";var r=n(7705),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,'#__vconsole {\n  --VC-BG-0: #ededed;\n  --VC-BG-1: #f7f7f7;\n  --VC-BG-2: #fff;\n  --VC-BG-3: #f7f7f7;\n  --VC-BG-4: #4c4c4c;\n  --VC-BG-5: #fff;\n  --VC-BG-6: rgba(0, 0, 0, 0.1);\n  --VC-FG-0: rgba(0, 0, 0, 0.9);\n  --VC-FG-HALF: rgba(0, 0, 0, 0.9);\n  --VC-FG-1: rgba(0, 0, 0, 0.5);\n  --VC-FG-2: rgba(0, 0, 0, 0.3);\n  --VC-FG-3: rgba(0, 0, 0, 0.1);\n  --VC-RED: #fa5151;\n  --VC-ORANGE: #fa9d3b;\n  --VC-YELLOW: #ffc300;\n  --VC-GREEN: #91d300;\n  --VC-LIGHTGREEN: #95ec69;\n  --VC-BRAND: #07c160;\n  --VC-BLUE: #10aeff;\n  --VC-INDIGO: #1485ee;\n  --VC-PURPLE: #6467f0;\n  --VC-LINK: #576b95;\n  --VC-TEXTGREEN: #06ae56;\n  --VC-FG: black;\n  --VC-BG: white;\n  --VC-BG-COLOR-ACTIVE: #ececec;\n  --VC-WARN-BG: #fff3cc;\n  --VC-WARN-BORDER: #ffe799;\n  --VC-ERROR-BG: #fedcdc;\n  --VC-ERROR-BORDER: #fdb9b9;\n  --VC-DOM-TAG-NAME-COLOR: #881280;\n  --VC-DOM-ATTRIBUTE-NAME-COLOR: #994500;\n  --VC-DOM-ATTRIBUTE-VALUE-COLOR: #1a1aa6;\n  --VC-CODE-KEY-FG: #881391;\n  --VC-CODE-PRIVATE-KEY-FG: #cfa1d3;\n  --VC-CODE-FUNC-FG: #0d22aa;\n  --VC-CODE-NUMBER-FG: #1c00cf;\n  --VC-CODE-STR-FG: #c41a16;\n  --VC-CODE-NULL-FG: #808080;\n  color: var(--VC-FG-0);\n  font-size: 13px;\n  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;\n  -webkit-user-select: auto;\n  /* global */\n}\n#__vconsole .vc-max-height {\n  max-height: 19.23076923em;\n}\n#__vconsole .vc-max-height-line {\n  max-height: 6.30769231em;\n}\n#__vconsole .vc-min-height {\n  min-height: 3.07692308em;\n}\n#__vconsole dd,\n#__vconsole dl,\n#__vconsole pre {\n  margin: 0;\n}\n#__vconsole i {\n  font-style: normal;\n}\n.vc-table .vc-table-row {\n  line-height: 1.5;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: row;\n  -moz-box-orient: horizontal;\n  -moz-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-flex-wrap: wrap;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  overflow: hidden;\n  border-bottom: 1px solid var(--VC-FG-3);\n}\n.vc-table .vc-table-row.vc-left-border {\n  border-left: 1px solid var(--VC-FG-3);\n}\n.vc-table .vc-table-row-icon {\n  margin-left: 4px;\n}\n.vc-table .vc-table-col {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -moz-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  padding: 0.23076923em 0.30769231em;\n  border-left: 1px solid var(--VC-FG-3);\n  overflow: auto;\n}\n.vc-table .vc-table-col:first-child {\n  border: none;\n}\n.vc-table .vc-table-col-value {\n  white-space: pre-wrap;\n  word-break: break-word;\n  /*white-space: nowrap;\n    text-overflow: ellipsis;*/\n  -webkit-overflow-scrolling: touch;\n}\n.vc-table .vc-small .vc-table-col {\n  padding: 0 0.30769231em;\n  font-size: 0.92307692em;\n}\n.vc-table .vc-table-col-2 {\n  -webkit-box-flex: 2;\n  -webkit-flex: 2;\n  -moz-box-flex: 2;\n  -ms-flex: 2;\n  flex: 2;\n}\n.vc-table .vc-table-col-3 {\n  -webkit-box-flex: 3;\n  -webkit-flex: 3;\n  -moz-box-flex: 3;\n  -ms-flex: 3;\n  flex: 3;\n}\n.vc-table .vc-table-col-4 {\n  -webkit-box-flex: 4;\n  -webkit-flex: 4;\n  -moz-box-flex: 4;\n  -ms-flex: 4;\n  flex: 4;\n}\n.vc-table .vc-table-col-5 {\n  -webkit-box-flex: 5;\n  -webkit-flex: 5;\n  -moz-box-flex: 5;\n  -ms-flex: 5;\n  flex: 5;\n}\n.vc-table .vc-table-col-6 {\n  -webkit-box-flex: 6;\n  -webkit-flex: 6;\n  -moz-box-flex: 6;\n  -ms-flex: 6;\n  flex: 6;\n}\n.vc-table .vc-table-row-error {\n  border-color: var(--VC-ERROR-BORDER);\n  background-color: var(--VC-ERROR-BG);\n}\n.vc-table .vc-table-row-error .vc-table-col {\n  color: var(--VC-RED);\n  border-color: var(--VC-ERROR-BORDER);\n}\n.vc-table .vc-table-col-title {\n  font-weight: bold;\n}\n.vc-table .vc-table-action {\n  display: flex;\n  justify-content: space-evenly;\n}\n.vc-table .vc-table-action .vc-icon {\n  flex: 1;\n  text-align: center;\n  display: block;\n}\n.vc-table .vc-table-action .vc-icon:hover {\n  background: var(--VC-BG-3);\n}\n.vc-table .vc-table-action .vc-icon:active {\n  background: var(--VC-BG-1);\n}\n.vc-table .vc-table-input {\n  width: 100%;\n  border: none;\n  color: var(--VC-FG-0);\n  background-color: var(--VC-BG-6);\n  height: 3.53846154em;\n}\n.vc-table .vc-table-input:focus {\n  background-color: var(--VC-FG-2);\n}\n@media (prefers-color-scheme: dark) {\n  #__vconsole:not([data-theme="light"]) {\n    --VC-BG-0: #191919;\n    --VC-BG-1: #1f1f1f;\n    --VC-BG-2: #232323;\n    --VC-BG-3: #2f2f2f;\n    --VC-BG-4: #606060;\n    --VC-BG-5: #2c2c2c;\n    --VC-BG-6: rgba(255, 255, 255, 0.2);\n    --VC-FG-0: rgba(255, 255, 255, 0.8);\n    --VC-FG-HALF: rgba(255, 255, 255, 0.6);\n    --VC-FG-1: rgba(255, 255, 255, 0.5);\n    --VC-FG-2: rgba(255, 255, 255, 0.3);\n    --VC-FG-3: rgba(255, 255, 255, 0.05);\n    --VC-RED: #fa5151;\n    --VC-ORANGE: #c87d2f;\n    --VC-YELLOW: #cc9c00;\n    --VC-GREEN: #74a800;\n    --VC-LIGHTGREEN: #28b561;\n    --VC-BRAND: #07c160;\n    --VC-BLUE: #10aeff;\n    --VC-INDIGO: #1196ff;\n    --VC-PURPLE: #8183ff;\n    --VC-LINK: #7d90a9;\n    --VC-TEXTGREEN: #259c5c;\n    --VC-FG: white;\n    --VC-BG: black;\n    --VC-BG-COLOR-ACTIVE: #282828;\n    --VC-WARN-BG: #332700;\n    --VC-WARN-BORDER: #664e00;\n    --VC-ERROR-BG: #321010;\n    --VC-ERROR-BORDER: #642020;\n    --VC-DOM-TAG-NAME-COLOR: #5DB0D7;\n    --VC-DOM-ATTRIBUTE-NAME-COLOR: #9BBBDC;\n    --VC-DOM-ATTRIBUTE-VALUE-COLOR: #f29766;\n    --VC-CODE-KEY-FG: #e36eec;\n    --VC-CODE-PRIVATE-KEY-FG: #f4c5f7;\n    --VC-CODE-FUNC-FG: #556af2;\n    --VC-CODE-NUMBER-FG: #9980ff;\n    --VC-CODE-STR-FG: #e93f3b;\n    --VC-CODE-NULL-FG: #808080;\n  }\n}\n#__vconsole[data-theme="dark"] {\n  --VC-BG-0: #191919;\n  --VC-BG-1: #1f1f1f;\n  --VC-BG-2: #232323;\n  --VC-BG-3: #2f2f2f;\n  --VC-BG-4: #606060;\n  --VC-BG-5: #2c2c2c;\n  --VC-BG-6: rgba(255, 255, 255, 0.2);\n  --VC-FG-0: rgba(255, 255, 255, 0.8);\n  --VC-FG-HALF: rgba(255, 255, 255, 0.6);\n  --VC-FG-1: rgba(255, 255, 255, 0.5);\n  --VC-FG-2: rgba(255, 255, 255, 0.3);\n  --VC-FG-3: rgba(255, 255, 255, 0.05);\n  --VC-RED: #fa5151;\n  --VC-ORANGE: #c87d2f;\n  --VC-YELLOW: #cc9c00;\n  --VC-GREEN: #74a800;\n  --VC-LIGHTGREEN: #28b561;\n  --VC-BRAND: #07c160;\n  --VC-BLUE: #10aeff;\n  --VC-INDIGO: #1196ff;\n  --VC-PURPLE: #8183ff;\n  --VC-LINK: #7d90a9;\n  --VC-TEXTGREEN: #259c5c;\n  --VC-FG: white;\n  --VC-BG: black;\n  --VC-BG-COLOR-ACTIVE: #282828;\n  --VC-WARN-BG: #332700;\n  --VC-WARN-BORDER: #664e00;\n  --VC-ERROR-BG: #321010;\n  --VC-ERROR-BORDER: #642020;\n  --VC-DOM-TAG-NAME-COLOR: #5DB0D7;\n  --VC-DOM-ATTRIBUTE-NAME-COLOR: #9BBBDC;\n  --VC-DOM-ATTRIBUTE-VALUE-COLOR: #f29766;\n  --VC-CODE-KEY-FG: #e36eec;\n  --VC-CODE-PRIVATE-KEY-FG: #f4c5f7;\n  --VC-CODE-FUNC-FG: #556af2;\n  --VC-CODE-NUMBER-FG: #9980ff;\n  --VC-CODE-STR-FG: #e93f3b;\n  --VC-CODE-NULL-FG: #808080;\n}\n.vc-mask {\n  display: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0);\n  z-index: 10001;\n  -webkit-transition: background 0.3s;\n  transition: background 0.3s;\n  -webkit-tap-highlight-color: transparent;\n  overflow-y: scroll;\n}\n.vc-panel {\n  display: none;\n  position: fixed;\n  min-height: 85%;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 10002;\n  background-color: var(--VC-BG-0);\n  -webkit-transition: -webkit-transform 0.3s;\n  transition: -webkit-transform 0.3s;\n  transition: transform 0.3s;\n  transition: transform 0.3s, -webkit-transform 0.3s;\n  -webkit-transform: translate(0, 100%);\n  transform: translate(0, 100%);\n}\n.vc-toggle .vc-switch {\n  display: none;\n}\n.vc-toggle .vc-mask {\n  background: rgba(0, 0, 0, 0.6);\n  display: block;\n}\n.vc-toggle .vc-panel {\n  -webkit-transform: translate(0, 0);\n  transform: translate(0, 0);\n}\n.vc-content {\n  background-color: var(--VC-BG-2);\n  overflow-x: hidden;\n  overflow-y: auto;\n  position: absolute;\n  top: 3.07692308em;\n  left: 0;\n  right: 0;\n  bottom: 3.07692308em;\n  -webkit-overflow-scrolling: touch;\n  margin-bottom: constant(safe-area-inset-bottom);\n  margin-bottom: env(safe-area-inset-bottom);\n}\n.vc-content.vc-has-topbar {\n  top: 5.46153846em;\n}\n.vc-plugin-box {\n  display: none;\n  position: relative;\n  min-height: 100%;\n}\n.vc-plugin-box.vc-actived {\n  display: block;\n}\n.vc-plugin-content {\n  padding-bottom: 6em;\n  -webkit-tap-highlight-color: transparent;\n}\n.vc-plugin-empty:before,\n.vc-plugin-content:empty:before {\n  content: "Empty";\n  color: var(--VC-FG-1);\n  position: absolute;\n  top: 45%;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  font-size: 1.15384615em;\n  text-align: center;\n}\n@supports (bottom: constant(safe-area-inset-bottom)) or (bottom: env(safe-area-inset-bottom)) {\n  .vc-toolbar,\n  .vc-switch {\n    bottom: constant(safe-area-inset-bottom);\n    bottom: env(safe-area-inset-bottom);\n  }\n}\n.vc-tabbar {\n  border-bottom: 1px solid var(--VC-FG-3);\n  overflow-x: auto;\n  height: 3em;\n  width: auto;\n  white-space: nowrap;\n}\n.vc-tabbar .vc-tab {\n  display: inline-block;\n  line-height: 3em;\n  padding: 0 1.15384615em;\n  border-right: 1px solid var(--VC-FG-3);\n  text-decoration: none;\n  color: var(--VC-FG-0);\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n.vc-tabbar .vc-tab:active {\n  background-color: rgba(0, 0, 0, 0.15);\n}\n.vc-tabbar .vc-tab.vc-actived {\n  background-color: var(--VC-BG-1);\n}\n.vc-toolbar {\n  border-top: 1px solid var(--VC-FG-3);\n  line-height: 3em;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: row;\n  -moz-box-orient: horizontal;\n  -moz-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n}\n.vc-toolbar .vc-tool {\n  display: none;\n  font-style: normal;\n  text-decoration: none;\n  color: var(--VC-FG-0);\n  width: 50%;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -moz-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  text-align: center;\n  position: relative;\n  -webkit-touch-callout: none;\n}\n.vc-toolbar .vc-tool.vc-toggle,\n.vc-toolbar .vc-tool.vc-global-tool {\n  display: block;\n}\n.vc-toolbar .vc-tool:active {\n  background-color: rgba(0, 0, 0, 0.15);\n}\n.vc-toolbar .vc-tool:after {\n  content: " ";\n  position: absolute;\n  top: 0.53846154em;\n  bottom: 0.53846154em;\n  right: 0;\n  border-left: 1px solid var(--VC-FG-3);\n}\n.vc-toolbar .vc-tool-last:after {\n  border: none;\n}\n.vc-topbar {\n  background-color: var(--VC-BG-1);\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: row;\n  -moz-box-orient: horizontal;\n  -moz-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-flex-wrap: wrap;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  width: 100%;\n}\n.vc-topbar .vc-toptab {\n  display: none;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -moz-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  line-height: 2.30769231em;\n  padding: 0 1.15384615em;\n  border-bottom: 1px solid var(--VC-FG-3);\n  text-decoration: none;\n  text-align: center;\n  color: var(--VC-FG-0);\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n.vc-topbar .vc-toptab.vc-toggle {\n  display: block;\n}\n.vc-topbar .vc-toptab:active {\n  background-color: rgba(0, 0, 0, 0.15);\n}\n.vc-topbar .vc-toptab.vc-actived {\n  border-bottom: 1px solid var(--VC-INDIGO);\n}\n',""]),t.Z=i},7558:function(e,t,n){"use strict";var r=n(7705),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".vc-switch {\n  display: block;\n  position: fixed;\n  right: 0.76923077em;\n  bottom: 0.76923077em;\n  color: #FFF;\n  background-color: var(--VC-BRAND);\n  line-height: 1;\n  font-size: 1.07692308em;\n  padding: 0.61538462em 1.23076923em;\n  z-index: 10000;\n  border-radius: 0.30769231em;\n  box-shadow: 0 0 0.61538462em rgba(0, 0, 0, 0.4);\n}\n",""]),t.Z=i},5670:function(e,t,n){"use strict";var r=n(7705),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,'/* color */\n.vcelm-node {\n  color: var(--VC-DOM-TAG-NAME-COLOR);\n}\n.vcelm-k {\n  color: var(--VC-DOM-ATTRIBUTE-NAME-COLOR);\n}\n.vcelm-v {\n  color: var(--VC-DOM-ATTRIBUTE-VALUE-COLOR);\n}\n.vcelm-l.vc-actived > .vcelm-node {\n  background-color: var(--VC-FG-3);\n}\n/* layout */\n.vcelm-l {\n  padding-left: 8px;\n  position: relative;\n  word-wrap: break-word;\n  line-height: 1.2;\n}\n/*.vcelm-l.vcelm-noc {\n  padding-left: 0;\n}*/\n.vcelm-l .vcelm-node:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vcelm-l.vcelm-noc .vcelm-node:active {\n  background-color: transparent;\n}\n.vcelm-t {\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n/* level */\n/* arrow */\n.vcelm-l:before {\n  content: "";\n  display: block;\n  position: absolute;\n  top: 6px;\n  left: 3px;\n  width: 0;\n  height: 0;\n  border: transparent solid 3px;\n  border-left-color: var(--VC-FG-1);\n}\n.vcelm-l.vc-toggle:before {\n  display: block;\n  top: 6px;\n  left: 0;\n  border-top-color: var(--VC-FG-1);\n  border-left-color: transparent;\n}\n.vcelm-l.vcelm-noc:before {\n  display: none;\n}\n',""]),t.Z=i},3327:function(e,t,n){"use strict";var r=n(7705),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".vc-logs-has-cmd {\n  padding-bottom: 6.15384615em;\n}\n",""]),t.Z=i},1130:function(e,t,n){"use strict";var r=n(7705),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".vc-cmd {\n  position: absolute;\n  height: 3.07692308em;\n  left: 0;\n  right: 0;\n  bottom: 3.07692308em;\n  border-top: 1px solid var(--VC-FG-3);\n  display: block !important;\n}\n.vc-cmd.vc-filter {\n  bottom: 0;\n}\n.vc-cmd-input-wrap {\n  display: block;\n  position: relative;\n  height: 2.15384615em;\n  margin-right: 3.07692308em;\n  padding: 0.46153846em 0.61538462em;\n}\n.vc-cmd-input {\n  width: 100%;\n  border: none;\n  resize: none;\n  outline: none;\n  padding: 0;\n  font-size: 0.92307692em;\n  background-color: transparent;\n  color: var(--VC-FG-0);\n}\n.vc-cmd-input::-webkit-input-placeholder {\n  line-height: 2.15384615em;\n}\n.vc-cmd-btn {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: 3.07692308em;\n  border: none;\n  background-color: var(--VC-BG-0);\n  color: var(--VC-FG-0);\n  outline: none;\n  -webkit-touch-callout: none;\n  font-size: 1em;\n}\n.vc-cmd-clear-btn {\n  position: absolute;\n  text-align: center;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: 3.07692308em;\n  line-height: 3.07692308em;\n}\n.vc-cmd-btn:active,\n.vc-cmd-clear-btn:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vc-cmd-prompted {\n  position: absolute;\n  left: 0.46153846em;\n  right: 0.46153846em;\n  background-color: var(--VC-BG-3);\n  border: 1px solid var(--VC-FG-3);\n  overflow-x: scroll;\n  display: none;\n}\n.vc-cmd-prompted li {\n  list-style: none;\n  line-height: 30px;\n  padding: 0 0.46153846em;\n  border-bottom: 1px solid var(--VC-FG-3);\n}\n.vc-cmd-prompted li:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vc-cmd-prompted-hide {\n  text-align: center;\n}\n",""]),t.Z=i},7147:function(e,t,n){"use strict";var r=n(7705),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,'.vc-log-row {\n  margin: 0;\n  padding: 0.46153846em 0.61538462em;\n  overflow: hidden;\n  line-height: 1.3;\n  border-bottom: 1px solid var(--VC-FG-3);\n  word-break: break-word;\n  position: relative;\n}\n.vc-log-info {\n  color: var(--VC-PURPLE);\n}\n.vc-log-debug {\n  color: var(--VC-YELLOW);\n}\n.vc-log-warn {\n  color: var(--VC-ORANGE);\n  border-color: var(--VC-WARN-BORDER);\n  background-color: var(--VC-WARN-BG);\n}\n.vc-log-error {\n  color: var(--VC-RED);\n  border-color: var(--VC-ERROR-BORDER);\n  background-color: var(--VC-ERROR-BG);\n}\n.vc-logrow-icon {\n  float: right;\n}\n.vc-log-repeat {\n  float: left;\n  margin-right: 0.30769231em;\n  padding: 0 6.5px;\n  color: #D7E0EF;\n  background-color: #42597F;\n  border-radius: 8.66666667px;\n}\n.vc-log-error .vc-log-repeat {\n  color: #901818;\n  background-color: var(--VC-RED);\n}\n.vc-log-warn .vc-log-repeat {\n  color: #987D20;\n  background-color: #F4BD02;\n}\n.vc-log-input,\n.vc-log-output {\n  padding-left: 0.92307692em;\n}\n.vc-log-input:before,\n.vc-log-output:before {\n  content: "›";\n  position: absolute;\n  top: 0.15384615em;\n  left: 0;\n  font-size: 1.23076923em;\n  color: #6A5ACD;\n}\n.vc-log-output:before {\n  content: "‹";\n}\n',""]),t.Z=i},1237:function(e,t,n){"use strict";var r=n(7705),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,'.vc-log-tree {\n  display: block;\n  overflow: auto;\n  position: relative;\n  -webkit-overflow-scrolling: touch;\n}\n.vc-log-tree-node {\n  display: block;\n  font-style: italic;\n  padding-left: 0.76923077em;\n  position: relative;\n}\n.vc-log-tree.vc-is-tree > .vc-log-tree-node:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vc-log-tree.vc-is-tree > .vc-log-tree-node::before {\n  content: "";\n  position: absolute;\n  top: 0.30769231em;\n  left: 0.15384615em;\n  width: 0;\n  height: 0;\n  border: transparent solid 0.30769231em;\n  border-left-color: var(--VC-FG-1);\n}\n.vc-log-tree.vc-is-tree.vc-toggle > .vc-log-tree-node::before {\n  top: 0.46153846em;\n  left: 0;\n  border-top-color: var(--VC-FG-1);\n  border-left-color: transparent;\n}\n.vc-log-tree-child {\n  margin-left: 0.76923077em;\n}\n.vc-log-tree-loadmore {\n  text-decoration: underline;\n  padding-left: 1.84615385em;\n  position: relative;\n  color: var(--VC-CODE-FUNC-FG);\n}\n.vc-log-tree-loadmore::before {\n  content: "››";\n  position: absolute;\n  top: -0.15384615em;\n  left: 0.76923077em;\n  font-size: 1.23076923em;\n  color: var(--VC-CODE-FUNC-FG);\n}\n.vc-log-tree-loadmore:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n',""]),t.Z=i},845:function(e,t,n){"use strict";var r=n(7705),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".vc-log-key {\n  color: var(--VC-CODE-KEY-FG);\n}\n.vc-log-key-private {\n  color: var(--VC-CODE-PRIVATE-KEY-FG);\n}\n.vc-log-val {\n  white-space: pre-line;\n}\n.vc-log-val-function {\n  color: var(--VC-CODE-FUNC-FG);\n  font-style: italic !important;\n}\n.vc-log-val-bigint {\n  color: var(--VC-CODE-FUNC-FG);\n}\n.vc-log-val-number,\n.vc-log-val-boolean {\n  color: var(--VC-CODE-NUMBER-FG);\n}\n.vc-log-val-string.vc-log-val-haskey {\n  color: var(--VC-CODE-STR-FG);\n  white-space: normal;\n}\n.vc-log-val-null,\n.vc-log-val-undefined,\n.vc-log-val-uninvocatable {\n  color: var(--VC-CODE-NULL-FG);\n}\n.vc-log-val-symbol {\n  color: var(--VC-CODE-STR-FG);\n}\n",""]),t.Z=i},8747:function(e,t,n){"use strict";var r=n(7705),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".vc-group .vc-group-preview {\n  -webkit-touch-callout: none;\n}\n.vc-group .vc-group-preview:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vc-group .vc-group-detail {\n  display: none;\n  padding: 0 0 0.76923077em 1.53846154em;\n  border-bottom: 1px solid var(--VC-FG-3);\n}\n.vc-group.vc-actived .vc-group-detail {\n  display: block;\n  background-color: var(--VC-BG-1);\n}\n.vc-group.vc-actived .vc-table-row {\n  background-color: var(--VC-BG-2);\n}\n.vc-group.vc-actived .vc-group-preview {\n  background-color: var(--VC-BG-1);\n}\n",""]),t.Z=i},3411:function(e,t,n){"use strict";var r,i=n(3379),o=n.n(i),s=n(1130),a=0,c={injectType:"lazyStyleTag",insert:"head",singleton:!1},l={};l.locals=s.Z.locals||{},l.use=function(){return a++||(r=o()(s.Z,c)),l},l.unuse=function(){a>0&&!--a&&(r(),r=null)},t.Z=l},3379:function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function a(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],c=t.base?o[0]+t.base:o[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var d=a(u),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(s[d].references++,s[d].updater(h)):s.push({identifier:u,updater:m(h,t),references:1}),r.push(u)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function h(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function p(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,g=0;function m(e,t){var n,r,i;if(t.singleton){var o=g++;n=f||(f=l(t)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=l(t),r=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=a(n[r]);s[i].references--}for(var o=c(e,t),l=0;l<n.length;l++){var u=a(n[l]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}n=o}}}},7003:function(e,t,n){"use strict";n.d(t,{x:function(){return r.x},ev:function(){return r.ev},H3:function(){return r.H3}});var r=n(8826)},8826:function(e,t,n){"use strict";function r(){}function i(e){return e()}function o(){return Object.create(null)}function s(e){e.forEach(i)}function a(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e){return 0===Object.keys(e).length}function u(e){if(null==e)return r;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=e.subscribe.apply(e,n);return o.unsubscribe?function(){return o.unsubscribe()}:o}function d(e){var t;return u(e,(function(e){return t=e}))(),t}function h(e,t,n){e.$$.on_destroy.push(u(t,n))}function p(e,t,n){return void 0===n&&(n=t),e.set(n),t}n.d(t,{FW:function(){return D},f_:function(){return fe},hj:function(){return $},R3:function(){return m},Lj:function(){return R},ak:function(){return ce},Vn:function(){return G},cK:function(){return V},gb:function(){return re},FI:function(){return h},x:function(){return F},YC:function(){return le},vp:function(){return de},RM:function(){return E},og:function(){return v},bG:function(){return A},cS:function(){return C},yl:function(){return J},$X:function(){return d},dv:function(){return ne},S1:function(){return pe},$T:function(){return _},oL:function(){return T},ye:function(){return ue},ZT:function(){return r},ev:function(){return U},H3:function(){return B},cl:function(){return se},AT:function(){return I},j7:function(){return s},N8:function(){return c},rT:function(){return w},Bm:function(){return k},fx:function(){return p},cz:function(){return O},Dh:function(){return b},Ld:function(){return u},bi:function(){return y},fL:function(){return S},VH:function(){return N},Ui:function(){return ie},et:function(){return oe},GQ:function(){return ae}}),new Set;var f=!1;function g(e,t,n,r){for(;e<t;){var i=e+(t-e>>1);n(i)<=r?e=i+1:t=i}return e}function m(e,t){f?(function(e){if(!e.hydrate_init){e.hydrate_init=!0;var t=e.childNodes,n=new Int32Array(t.length+1),r=new Int32Array(t.length);n[0]=-1;for(var i=0,o=0;o<t.length;o++){var s=g(1,i+1,(function(e){return t[n[e]].claim_order}),t[o].claim_order)-1;r[o]=n[s]+1;var a=s+1;n[a]=o,i=Math.max(a,i)}for(var c=[],l=[],u=t.length-1,d=n[i]+1;0!=d;d=r[d-1]){for(c.push(t[d-1]);u>=d;u--)l.push(t[u]);u--}for(;u>=0;u--)l.push(t[u]);c.reverse(),l.sort((function(e,t){return e.claim_order-t.claim_order}));for(var h=0,p=0;h<l.length;h++){for(;p<c.length&&l[h].claim_order>=c[p].claim_order;)p++;var f=p<c.length?c[p]:null;e.insertBefore(l[h],f)}}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild),t!==e.actual_end_child?e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling):t.parentNode!==e&&e.appendChild(t)}function _(e,t,n){f&&!n?m(e,t):(t.parentNode!==e||n&&t.nextSibling!==n)&&e.insertBefore(t,n||null)}function v(e){e.parentNode.removeChild(e)}function E(e,t){for(var n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function A(e){return document.createElement(e)}function y(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function S(e){return document.createTextNode(e)}function b(){return S(" ")}function C(){return S("")}function T(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function I(e){return function(t){return t.preventDefault(),e.call(this,t)}}function R(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function w(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function k(e,t){e.value=null==t?"":t}function O(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function N(e,t,n){e.classList[n?"add":"remove"](t)}function L(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}var P,D=function(){function e(e){this.e=this.n=null,this.l=e}var t=e.prototype;return t.m=function(e,t,n){void 0===n&&(n=null),this.e||(this.e=A(t.nodeName),this.t=t,this.l?this.n=this.l:this.h(e)),this.i(n)},t.h=function(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)},t.i=function(e){for(var t=0;t<this.n.length;t+=1)_(this.t,this.n[t],e)},t.p=function(e){this.d(),this.h(e),this.i(this.a)},t.d=function(){this.n.forEach(v)},e}();function M(e){P=e}function x(){if(!P)throw new Error("Function called outside component initialization");return P}function B(e){x().$$.on_mount.push(e)}function U(e){x().$$.on_destroy.push(e)}function F(){var e=x();return function(t,n){var r=e.$$.callbacks[t];if(r){var i=L(t,n);r.slice().forEach((function(t){t.call(e,i)}))}}}function V(e,t){var n=this,r=e.$$.callbacks[t.type];r&&r.slice().forEach((function(e){return e.call(n,t)}))}new Set;var j=[],G=[],H=[],Q=[],W=Promise.resolve(),q=!1;function z(){q||(q=!0,W.then(J))}function Z(e){H.push(e)}function $(e){Q.push(e)}var K=!1,Y=new Set;function J(){if(!K){K=!0;do{for(var e=0;e<j.length;e+=1){var t=j[e];M(t),X(t.$$)}for(M(null),j.length=0;G.length;)G.pop()();for(var n=0;n<H.length;n+=1){var r=H[n];Y.has(r)||(Y.add(r),r())}H.length=0}while(j.length);for(;Q.length;)Q.pop()();q=!1,K=!1,Y.clear()}}function X(e){if(null!==e.fragment){e.update(),s(e.before_update);var t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Z)}}var ee,te=new Set;function ne(){ee={r:0,c:[],p:ee}}function re(){ee.r||s(ee.c),ee=ee.p}function ie(e,t){e&&e.i&&(te.delete(e),e.i(t))}function oe(e,t,n,r){if(e&&e.o){if(te.has(e))return;te.add(e),ee.c.push((function(){te.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function se(e,t){oe(e,1,1,(function(){t.delete(e.key)}))}function ae(e,t,n,r,i,o,s,a,c,l,u,d){for(var h=e.length,p=o.length,f=h,g={};f--;)g[e[f].key]=f;var m=[],_=new Map,v=new Map;for(f=p;f--;){var E=d(i,o,f),A=n(E),y=s.get(A);y?r&&y.p(E,t):(y=l(A,E)).c(),_.set(A,m[f]=y),A in g&&v.set(A,Math.abs(f-g[A]))}var S=new Set,b=new Set;function C(e){ie(e,1),e.m(a,u),s.set(e.key,e),u=e.first,p--}for(;h&&p;){var T=m[p-1],I=e[h-1],R=T.key,w=I.key;T===I?(u=T.first,h--,p--):_.has(w)?!s.has(R)||S.has(R)?C(T):b.has(w)?h--:v.get(R)>v.get(w)?(b.add(R),C(T)):(S.add(w),h--):(c(I,s),h--)}for(;h--;){var k=e[h];_.has(k.key)||c(k,s)}for(;p;)C(m[p-1]);return m}function ce(e,t,n){var r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function le(e){e&&e.c()}function ue(e,t,n,r){var o=e.$$,c=o.fragment,l=o.on_mount,u=o.on_destroy,d=o.after_update;c&&c.m(t,n),r||Z((function(){var t=l.map(i).filter(a);u?u.push.apply(u,t):s(t),e.$$.on_mount=[]})),d.forEach(Z)}function de(e,t){var n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function he(e,t){-1===e.$$.dirty[0]&&(j.push(e),z(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function pe(e,t,n,i,a,c,l){void 0===l&&(l=[-1]);var u=P;M(e);var d=e.$$={fragment:null,ctx:null,props:c,update:r,not_equal:a,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:t.context||[]),callbacks:o(),dirty:l,skip_bound:!1},h=!1;if(d.ctx=n?n(e,t.props||{},(function(t,n){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return d.ctx&&a(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),h&&he(e,t)),n})):[],d.update(),h=!0,s(d.before_update),d.fragment=!!i&&i(d.ctx),t.target){if(t.hydrate){f=!0;var p=function(e){return Array.from(e.childNodes)}(t.target);d.fragment&&d.fragment.l(p),p.forEach(v)}else d.fragment&&d.fragment.c();t.intro&&ie(e.$$.fragment),ue(e,t.target,t.anchor,t.customElement),f=!1,J()}M(u)}"undefined"!=typeof window?window:"undefined"!=typeof globalThis&&globalThis,new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&HTMLElement;var fe=function(){function e(){}var t=e.prototype;return t.$destroy=function(){de(this,1),this.$destroy=r},t.$on=function(e,t){var n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}},t.$set=function(e){this.$$set&&!l(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)},e}()},4683:function(e,t,n){"use strict";n.d(t,{U2:function(){return r.$X},fZ:function(){return o}});var r=n(8826),i=[];function o(e,t){var n;void 0===t&&(t=r.ZT);var o=[];function s(t){if((0,r.N8)(e,t)&&(e=t,n)){for(var s=!i.length,a=0;a<o.length;a+=1){var c=o[a];c[1](),i.push(c,e)}if(s){for(var l=0;l<i.length;l+=2)i[l][0](i[l+1]);i.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(i,a){void 0===a&&(a=r.ZT);var c=[i,a];return o.push(c),1===o.length&&(n=t(s)||r.ZT),i(e),function(){var e=o.indexOf(c);-1!==e&&o.splice(e,1),0===o.length&&(n(),n=null)}}}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var __webpack_exports__={};return function(){"use strict";__webpack_require__.d(__webpack_exports__,{default:function(){return Lr}}),__webpack_require__(5441);var e,t=__webpack_require__(5103),n={one:function(e,t){void 0===t&&(t=document);try{return t.querySelector(e)||void 0}catch(e){return}},all:function(e,t){void 0===t&&(t=document);try{var n=t.querySelectorAll(e);return[].slice.call(n)}catch(e){return[]}},addClass:function(e,n){if(e)for(var r=(0,t.kJ)(e)?e:[e],i=0;i<r.length;i++){var o=(r[i].className||"").split(" ");o.indexOf(n)>-1||(o.push(n),r[i].className=o.join(" "))}},removeClass:function(e,n){if(e)for(var r=(0,t.kJ)(e)?e:[e],i=0;i<r.length;i++){for(var o=r[i].className.split(" "),s=0;s<o.length;s++)o[s]==n&&(o[s]="");r[i].className=o.join(" ").trim()}},hasClass:function(e,t){return!(!e||!e.classList)&&e.classList.contains(t)},bind:function(e,n,r,i){void 0===i&&(i=!1),e&&((0,t.kJ)(e)?e:[e]).forEach((function(e){e.addEventListener(n,r,!!i)}))},delegate:function(e,t,r,i){e&&e.addEventListener(t,(function(t){var o=n.all(r,e);if(o)e:for(var s=0;s<o.length;s++)for(var a=t.target;a;){if(a==o[s]){i.call(a,t,a);break e}if((a=a.parentNode)==e)break}}),!1)},removeChildren:function(e){for(;e.firstChild;)e.removeChild(e.lastChild);return e}},r=n,i=__webpack_require__(8826),o=__webpack_require__(7003),s=__webpack_require__(3379),a=__webpack_require__.n(s),c=__webpack_require__(7558),l=0,u={injectType:"lazyStyleTag",insert:"head",singleton:!1},d={};d.locals=c.Z.locals||{},d.use=function(){return l++||(e=a()(c.Z,u)),d},d.unuse=function(){l>0&&!--l&&(e(),e=null)};var h=d;function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t,n,r,o;return{c:function(){t=(0,i.bG)("div"),n=(0,i.fL)("vConsole"),(0,i.Lj)(t,"class","vc-switch"),(0,i.cz)(t,"right",e[2].x+"px"),(0,i.cz)(t,"bottom",e[2].y+"px"),(0,i.cz)(t,"display",e[0]?"block":"none")},m:function(s,a){(0,i.$T)(s,t,a),(0,i.R3)(t,n),e[8](t),r||(o=[(0,i.oL)(t,"touchstart",e[3]),(0,i.oL)(t,"touchend",e[4]),(0,i.oL)(t,"touchmove",e[5]),(0,i.oL)(t,"click",e[7])],r=!0)},p:function(e,n){var r=n[0];4&r&&(0,i.cz)(t,"right",e[2].x+"px"),4&r&&(0,i.cz)(t,"bottom",e[2].y+"px"),1&r&&(0,i.cz)(t,"display",e[0]?"block":"none")},i:i.ZT,o:i.ZT,d:function(n){n&&(0,i.og)(t),e[8](null),r=!1,(0,i.j7)(o)}}}function m(e,n,r){var s,a=n.show,c=void 0===a||a,l=n.position,u=void 0===l?{x:0,y:0}:l,d={hasMoved:!1,x:0,y:0,startX:0,startY:0,endX:0,endY:0},p={x:0,y:0};(0,o.H3)((function(){h.use()})),(0,o.ev)((function(){h.unuse()}));var f=function(e,n){var i=g(e,n);e=i[0],n=i[1],d.x=e,d.y=n,r(2,p.x=e,p),r(2,p.y=n,p),t.po("switch_x",e+""),t.po("switch_y",n+"")},g=function(e,t){var n=Math.max(document.documentElement.offsetWidth,window.innerWidth),r=Math.max(document.documentElement.offsetHeight,window.innerHeight);return e+s.offsetWidth>n&&(e=n-s.offsetWidth),t+s.offsetHeight>r&&(t=r-s.offsetHeight),e<0&&(e=0),t<20&&(t=20),[e,t]};return e.$$set=function(e){"show"in e&&r(0,c=e.show),"position"in e&&r(6,u=e.position)},e.$$.update=function(){66&e.$$.dirty&&s&&f(u.x,u.y)},[c,s,p,function(e){d.startX=e.touches[0].pageX,d.startY=e.touches[0].pageY,d.hasMoved=!1},function(e){d.hasMoved&&(d.startX=0,d.startY=0,d.hasMoved=!1,f(d.endX,d.endY))},function(e){if(!(e.touches.length<=0)){var t=e.touches[0].pageX-d.startX,n=e.touches[0].pageY-d.startY,i=Math.floor(d.x-t),o=Math.floor(d.y-n),s=g(i,o);i=s[0],o=s[1],r(2,p.x=i,p),r(2,p.y=o,p),d.endX=i,d.endY=o,d.hasMoved=!0,e.preventDefault()}},u,function(t){i.cK.call(this,e,t)},function(e){i.Vn[e?"unshift":"push"]((function(){r(1,s=e)}))}]}var _,v=function(e){var t,n,r,o,s;function a(t){var n;return n=e.call(this)||this,(0,i.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t,m,g,i.N8,{show:0,position:6}),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n),r=a,(o=[{key:"show",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({show:e}),(0,i.yl)()}},{key:"position",get:function(){return this.$$.ctx[6]},set:function(e){this.$set({position:e}),(0,i.yl)()}}])&&p(r.prototype,o),s&&p(r,s),a}(i.f_),E=__webpack_require__(4687),A=__webpack_require__(3283),y=0,S={injectType:"lazyStyleTag",insert:"head",singleton:!1},b={};b.locals=A.Z.locals||{},b.use=function(){return y++||(_=a()(A.Z,S)),b},b.unuse=function(){y>0&&!--y&&(_(),_=null)};var C=b;function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t,n){var r=e.slice();return r[36]=t[n][0],r[37]=t[n][1],r}function w(e,t,n){var r=e.slice();return r[40]=t[n],r[42]=n,r}function k(e,t,n){var r=e.slice();return r[36]=t[n][0],r[37]=t[n][1],r}function O(e,t,n){var r=e.slice();return r[36]=t[n][0],r[37]=t[n][1],r}function N(e,t,n){var r=e.slice();return r[40]=t[n],r[42]=n,r}function L(e,t,n){var r=e.slice();return r[36]=t[n][0],r[37]=t[n][1],r}function P(e){var t,n,r,o,s,a=e[37].name+"";function c(){return e[24](e[37])}return{c:function(){t=(0,i.bG)("a"),n=(0,i.fL)(a),(0,i.Lj)(t,"class","vc-tab"),(0,i.Lj)(t,"id",r="__vc_tab_"+e[37].id),(0,i.VH)(t,"vc-actived",e[37].id===e[2])},m:function(e,r){(0,i.$T)(e,t,r),(0,i.R3)(t,n),o||(s=(0,i.oL)(t,"click",c),o=!0)},p:function(o,s){e=o,8&s[0]&&a!==(a=e[37].name+"")&&(0,i.rT)(n,a),8&s[0]&&r!==(r="__vc_tab_"+e[37].id)&&(0,i.Lj)(t,"id",r),12&s[0]&&(0,i.VH)(t,"vc-actived",e[37].id===e[2])},d:function(e){e&&(0,i.og)(t),o=!1,s()}}}function D(e){var t,n=e[37].hasTabPanel&&P(e);return{c:function(){n&&n.c(),t=(0,i.cS)()},m:function(e,r){n&&n.m(e,r),(0,i.$T)(e,t,r)},p:function(e,r){e[37].hasTabPanel?n?n.p(e,r):((n=P(e)).c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d:function(e){n&&n.d(e),e&&(0,i.og)(t)}}}function M(e){var t,n,r,o,s,a=e[40].name+"";function c(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e)[25].apply(t,[e[37],e[42]].concat(r))}return{c:function(){t=(0,i.bG)("i"),n=(0,i.fL)(a),(0,i.Lj)(t,"class",r="vc-toptab vc-topbar-"+e[37].id+" "+e[40].className),(0,i.VH)(t,"vc-toggle",e[37].id===e[2]),(0,i.VH)(t,"vc-actived",e[40].actived)},m:function(e,r){(0,i.$T)(e,t,r),(0,i.R3)(t,n),o||(s=(0,i.oL)(t,"click",c),o=!0)},p:function(o,s){e=o,8&s[0]&&a!==(a=e[40].name+"")&&(0,i.rT)(n,a),8&s[0]&&r!==(r="vc-toptab vc-topbar-"+e[37].id+" "+e[40].className)&&(0,i.Lj)(t,"class",r),12&s[0]&&(0,i.VH)(t,"vc-toggle",e[37].id===e[2]),8&s[0]&&(0,i.VH)(t,"vc-actived",e[40].actived)},d:function(e){e&&(0,i.og)(t),o=!1,s()}}}function x(e){for(var t,n=e[37].topbarList,r=[],o=0;o<n.length;o+=1)r[o]=M(N(e,n,o));return{c:function(){for(var e=0;e<r.length;e+=1)r[e].c();t=(0,i.cS)()},m:function(e,n){for(var o=0;o<r.length;o+=1)r[o].m(e,n);(0,i.$T)(e,t,n)},p:function(e,i){if(16396&i[0]){var o;for(n=e[37].topbarList,o=0;o<n.length;o+=1){var s=N(e,n,o);r[o]?r[o].p(s,i):(r[o]=M(s),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d:function(e){(0,i.RM)(r,e),e&&(0,i.og)(t)}}}function B(e){var t,n;return{c:function(){t=(0,i.bG)("div"),(0,i.Lj)(t,"id",n="__vc_plug_"+e[37].id),(0,i.Lj)(t,"class","vc-plugin-box"),(0,i.VH)(t,"vc-actived",e[37].id===e[2])},m:function(n,r){(0,i.$T)(n,t,r),e[26](t)},p:function(e,r){8&r[0]&&n!==(n="__vc_plug_"+e[37].id)&&(0,i.Lj)(t,"id",n),12&r[0]&&(0,i.VH)(t,"vc-actived",e[37].id===e[2])},d:function(n){n&&(0,i.og)(t),e[26](null)}}}function U(e){var t,n,r,o,s,a=e[40].name+"";function c(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e)[28].apply(t,[e[37],e[42]].concat(r))}return{c:function(){t=(0,i.bG)("i"),n=(0,i.fL)(a),(0,i.Lj)(t,"class",r="vc-tool vc-tool-"+e[37].id),(0,i.VH)(t,"vc-global-tool",e[40].global),(0,i.VH)(t,"vc-toggle",e[37].id===e[2])},m:function(e,r){(0,i.$T)(e,t,r),(0,i.R3)(t,n),o||(s=(0,i.oL)(t,"click",c),o=!0)},p:function(o,s){e=o,8&s[0]&&a!==(a=e[40].name+"")&&(0,i.rT)(n,a),8&s[0]&&r!==(r="vc-tool vc-tool-"+e[37].id)&&(0,i.Lj)(t,"class",r),8&s[0]&&(0,i.VH)(t,"vc-global-tool",e[40].global),12&s[0]&&(0,i.VH)(t,"vc-toggle",e[37].id===e[2])},d:function(e){e&&(0,i.og)(t),o=!1,s()}}}function F(e){for(var t,n=e[37].toolbarList,r=[],o=0;o<n.length;o+=1)r[o]=U(w(e,n,o));return{c:function(){for(var e=0;e<r.length;e+=1)r[e].c();t=(0,i.cS)()},m:function(e,n){for(var o=0;o<r.length;o+=1)r[o].m(e,n);(0,i.$T)(e,t,n)},p:function(e,i){if(32780&i[0]){var o;for(n=e[37].toolbarList,o=0;o<n.length;o+=1){var s=w(e,n,o);r[o]?r[o].p(s,i):(r[o]=U(s),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d:function(e){(0,i.RM)(r,e),e&&(0,i.og)(t)}}}function V(e){var t,n,r,o,s,a,c,l,u,d,h,p,f,g,m,_,E,A,y,S,b;function C(t){e[22](t)}function T(t){e[23](t)}var I={};void 0!==e[0]&&(I.show=e[0]),void 0!==e[1]&&(I.position=e[1]),n=new v({props:I}),i.Vn.push((function(){return(0,i.ak)(n,"show",C)})),i.Vn.push((function(){return(0,i.ak)(n,"position",T)})),n.$on("click",e[11]);for(var w=Object.entries(e[3]),N=[],P=0;P<w.length;P+=1)N[P]=D(L(e,w,P));for(var M=Object.entries(e[3]),U=[],V=0;V<M.length;V+=1)U[V]=x(O(e,M,V));for(var j=Object.entries(e[3]),G=[],H=0;H<j.length;H+=1)G[H]=B(k(e,j,H));for(var Q=Object.entries(e[3]),W=[],q=0;q<Q.length;q+=1)W[q]=F(R(e,Q,q));return{c:function(){var r,o;t=(0,i.bG)("div"),(0,i.YC)(n.$$.fragment),s=(0,i.Dh)(),a=(0,i.bG)("div"),c=(0,i.Dh)(),l=(0,i.bG)("div"),u=(0,i.bG)("div");for(var v=0;v<N.length;v+=1)N[v].c();d=(0,i.Dh)(),h=(0,i.bG)("div");for(var y=0;y<U.length;y+=1)U[y].c();p=(0,i.Dh)(),f=(0,i.bG)("div");for(var S=0;S<G.length;S+=1)G[S].c();g=(0,i.Dh)(),m=(0,i.bG)("div");for(var b=0;b<W.length;b+=1)W[b].c();_=(0,i.Dh)(),(E=(0,i.bG)("i")).textContent="Hide",(0,i.Lj)(a,"class","vc-mask"),(0,i.cz)(a,"display",e[10]?"block":"none"),(0,i.Lj)(u,"class","vc-tabbar"),(0,i.Lj)(h,"class","vc-topbar"),(0,i.Lj)(f,"class","vc-content"),(0,i.VH)(f,"vc-has-topbar",(null==(r=e[3][e[2]])||null==(o=r.topbarList)?void 0:o.length)>0),(0,i.Lj)(E,"class","vc-tool vc-global-tool vc-tool-last vc-hide"),(0,i.Lj)(m,"class","vc-toolbar"),(0,i.Lj)(l,"class","vc-panel"),(0,i.cz)(l,"display",e[9]?"block":"none"),(0,i.Lj)(t,"id","__vconsole"),(0,i.Lj)(t,"style",A=e[7]?"font-size:"+e[7]+";":""),(0,i.Lj)(t,"data-theme",e[5]),(0,i.VH)(t,"vc-toggle",e[8])},m:function(r,o){(0,i.$T)(r,t,o),(0,i.ye)(n,t,null),(0,i.R3)(t,s),(0,i.R3)(t,a),(0,i.R3)(t,c),(0,i.R3)(t,l),(0,i.R3)(l,u);for(var v=0;v<N.length;v+=1)N[v].m(u,null);(0,i.R3)(l,d),(0,i.R3)(l,h);for(var A=0;A<U.length;A+=1)U[A].m(h,null);(0,i.R3)(l,p),(0,i.R3)(l,f);for(var C=0;C<G.length;C+=1)G[C].m(f,null);e[27](f),(0,i.R3)(l,g),(0,i.R3)(l,m);for(var T=0;T<W.length;T+=1)W[T].m(m,null);(0,i.R3)(m,_),(0,i.R3)(m,E),y=!0,S||(b=[(0,i.oL)(a,"click",e[12]),(0,i.oL)(f,"touchstart",e[16]),(0,i.oL)(f,"touchmove",e[17]),(0,i.oL)(f,"touchend",e[18]),(0,i.oL)(f,"scroll",e[19]),(0,i.oL)(E,"click",e[12])],S=!0)},p:function(e,s){var c,d,p={};if(!r&&1&s[0]&&(r=!0,p.show=e[0],(0,i.hj)((function(){return r=!1}))),!o&&2&s[0]&&(o=!0,p.position=e[1],(0,i.hj)((function(){return o=!1}))),n.$set(p),(!y||1024&s[0])&&(0,i.cz)(a,"display",e[10]?"block":"none"),8204&s[0]){var g;for(w=Object.entries(e[3]),g=0;g<w.length;g+=1){var v=L(e,w,g);N[g]?N[g].p(v,s):(N[g]=D(v),N[g].c(),N[g].m(u,null))}for(;g<N.length;g+=1)N[g].d(1);N.length=w.length}if(16396&s[0]){var E;for(M=Object.entries(e[3]),E=0;E<M.length;E+=1){var S=O(e,M,E);U[E]?U[E].p(S,s):(U[E]=x(S),U[E].c(),U[E].m(h,null))}for(;E<U.length;E+=1)U[E].d(1);U.length=M.length}if(28&s[0]){var b;for(j=Object.entries(e[3]),b=0;b<j.length;b+=1){var C=k(e,j,b);G[b]?G[b].p(C,s):(G[b]=B(C),G[b].c(),G[b].m(f,null))}for(;b<G.length;b+=1)G[b].d(1);G.length=j.length}if(12&s[0]&&(0,i.VH)(f,"vc-has-topbar",(null==(c=e[3][e[2]])||null==(d=c.topbarList)?void 0:d.length)>0),32780&s[0]){var T;for(Q=Object.entries(e[3]),T=0;T<Q.length;T+=1){var I=R(e,Q,T);W[T]?W[T].p(I,s):(W[T]=F(I),W[T].c(),W[T].m(m,_))}for(;T<W.length;T+=1)W[T].d(1);W.length=Q.length}(!y||512&s[0])&&(0,i.cz)(l,"display",e[9]?"block":"none"),(!y||128&s[0]&&A!==(A=e[7]?"font-size:"+e[7]+";":""))&&(0,i.Lj)(t,"style",A),(!y||32&s[0])&&(0,i.Lj)(t,"data-theme",e[5]),256&s[0]&&(0,i.VH)(t,"vc-toggle",e[8])},i:function(e){y||((0,i.Ui)(n.$$.fragment,e),y=!0)},o:function(e){(0,i.et)(n.$$.fragment,e),y=!1},d:function(r){r&&(0,i.og)(t),(0,i.vp)(n),(0,i.RM)(N,r),(0,i.RM)(U,r),(0,i.RM)(G,r),e[27](null),(0,i.RM)(W,r),S=!1,(0,i.j7)(b)}}}function j(e,n,r){var s,a,c=n.theme,l=void 0===c?"":c,u=n.disableScrolling,d=void 0!==u&&u,h=n.show,p=void 0!==h&&h,f=n.showSwitchButton,g=void 0===f||f,m=n.switchButtonPosition,_=void 0===m?{x:0,y:0}:m,v=n.activedPluginId,A=void 0===v?"":v,y=n.pluginList,S=void 0===y?{}:y,b=n.divContentInner,T=void 0===b?void 0:b,I=(0,o.x)(),R=!1,w="",k=!1,O=!1,N=!1,L=!0,P=0;(0,o.H3)((function(){var e=document.querySelectorAll('[name="viewport"]');if(e&&e[0]){var t=(e[e.length-1].getAttribute("content")||"").match(/initial\-scale\=\d+(\.\d+)?/),n=t?parseFloat(t[0].split("=")[1]):1;1!==n&&r(7,w=Math.floor(1/n*13)+"px")}C.use&&C.use(),a=E.x.subscribe((function(e){p&&P!==e.updateTime&&(P=e.updateTime,D())}))})),(0,o.ev)((function(){C.unuse&&C.unuse(),a&&a()}));var D=function(){!d&&L&&s&&r(6,s.scrollTop=s.scrollHeight-s.offsetHeight,s)},M=function(e){e!==A&&(r(2,A=e),I("changePanel",{pluginId:e}))},x=function(e,n,i){var o=S[n].topbarList[i],s=!0;if(t.mf(o.onClick)&&(s=o.onClick.call(e.target,e,o.data)),!1===s);else{for(var a=0;a<S[n].topbarList.length;a++)r(3,S[n].topbarList[a].actived=i===a,S);r(3,S)}},B=function(e,n,r){var i=S[n].toolbarList[r];t.mf(i.onClick)&&i.onClick.call(e.target,e,i.data)};return e.$$set=function(e){"theme"in e&&r(5,l=e.theme),"disableScrolling"in e&&r(20,d=e.disableScrolling),"show"in e&&r(21,p=e.show),"showSwitchButton"in e&&r(0,g=e.showSwitchButton),"switchButtonPosition"in e&&r(1,_=e.switchButtonPosition),"activedPluginId"in e&&r(2,A=e.activedPluginId),"pluginList"in e&&r(3,S=e.pluginList),"divContentInner"in e&&r(4,T=e.divContentInner)},e.$$.update=function(){2097152&e.$$.dirty[0]&&(!0===p?(r(9,O=!0),r(10,N=!0),setTimeout((function(){r(8,k=!0),D()}),10)):(r(8,k=!1),setTimeout((function(){r(9,O=!1),r(10,N=!1)}),330)))},[g,_,A,S,T,l,s,w,k,O,N,function(e){I("show",{show:!0})},function(e){I("show",{show:!1})},M,x,B,function(e){var t=s.scrollTop,n=s.scrollHeight,i=t+s.offsetHeight;0===t?(r(6,s.scrollTop=1,s),0===s.scrollTop&&e.target.classList&&!e.target.classList.contains("vc-cmd-input")&&(R=!0)):i===n&&(r(6,s.scrollTop=t-1,s),s.scrollTop===t&&e.target.classList&&!e.target.classList.contains("vc-cmd-input")&&(R=!0))},function(e){R&&e.preventDefault()},function(e){R=!1},function(e){p&&(L=s.scrollTop+s.offsetHeight>=s.scrollHeight-50)},d,p,function(e){r(0,g=e)},function(e){r(1,_=e)},function(e){return M(e.id)},function(e,t,n){return x(n,e.id,t)},function(e){i.Vn[e?"unshift":"push"]((function(){r(4,T=e)}))},function(e){i.Vn[e?"unshift":"push"]((function(){r(6,s=e)}))},function(e,t,n){return B(n,e.id,t)}]}var G=function(e){var t,n,r,o,s;function a(t){var n;return n=e.call(this)||this,(0,i.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t,j,V,i.N8,{theme:5,disableScrolling:20,show:21,showSwitchButton:0,switchButtonPosition:1,activedPluginId:2,pluginList:3,divContentInner:4},[-1,-1]),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,I(t,n),r=a,(o=[{key:"theme",get:function(){return this.$$.ctx[5]},set:function(e){this.$set({theme:e}),(0,i.yl)()}},{key:"disableScrolling",get:function(){return this.$$.ctx[20]},set:function(e){this.$set({disableScrolling:e}),(0,i.yl)()}},{key:"show",get:function(){return this.$$.ctx[21]},set:function(e){this.$set({show:e}),(0,i.yl)()}},{key:"showSwitchButton",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({showSwitchButton:e}),(0,i.yl)()}},{key:"switchButtonPosition",get:function(){return this.$$.ctx[1]},set:function(e){this.$set({switchButtonPosition:e}),(0,i.yl)()}},{key:"activedPluginId",get:function(){return this.$$.ctx[2]},set:function(e){this.$set({activedPluginId:e}),(0,i.yl)()}},{key:"pluginList",get:function(){return this.$$.ctx[3]},set:function(e){this.$set({pluginList:e}),(0,i.yl)()}},{key:"divContentInner",get:function(){return this.$$.ctx[4]},set:function(e){this.$set({divContentInner:e}),(0,i.yl)()}}])&&T(r.prototype,o),s&&T(r,s),a}(i.f_);function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Q=function(){function e(e,t){void 0===t&&(t="newPlugin"),this.isReady=!1,this.eventMap=new Map,this.exporter=void 0,this._id=void 0,this._name=void 0,this._vConsole=void 0,this.id=e,this.name=t,this.isReady=!1}var n,r,i,o=e.prototype;return o.on=function(e,t){return this.eventMap.set(e,t),this},o.onRemove=function(){this.unbindExporter()},o.trigger=function(e,t){var n=this.eventMap.get(e);if("function"==typeof n)n.call(this,t);else{var r="on"+e.charAt(0).toUpperCase()+e.slice(1);"function"==typeof this[r]&&this[r].call(this,t)}return this},o.bindExporter=function(){if(this._vConsole&&this.exporter){var e="default"===this.id?"log":this.id;this._vConsole[e]=this.exporter}},o.unbindExporter=function(){var e="default"===this.id?"log":this.id;this._vConsole&&this._vConsole[e]&&(this._vConsole[e]=void 0)},o.getUniqueID=function(e){return void 0===e&&(e=""),(0,t.QI)(e)},n=e,(r=[{key:"id",get:function(){return this._id},set:function(e){if("string"!=typeof e)throw"[vConsole] Plugin ID must be a string.";if(!e)throw"[vConsole] Plugin ID cannot be empty.";this._id=e.toLowerCase()}},{key:"name",get:function(){return this._name},set:function(e){if("string"!=typeof e)throw"[vConsole] Plugin name must be a string.";if(!e)throw"[vConsole] Plugin name cannot be empty.";this._name=e}},{key:"vConsole",get:function(){return this._vConsole||void 0},set:function(e){if(!e)throw"[vConsole] vConsole cannot be empty";this._vConsole=e,this.bindExporter()}}])&&H(n.prototype,r),i&&H(n,i),e}();function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=function(e){var t,n;function r(t,n,r,i){var o;return(o=e.call(this,t,n)||this).CompClass=void 0,o.compInstance=void 0,o.initialProps=void 0,o.CompClass=r,o.initialProps=i,o}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,W(t,n);var i=r.prototype;return i.onReady=function(){this.isReady=!0},i.onRenderTab=function(e){var t=document.createElement("div");this.compInstance=new this.CompClass({target:t,props:this.initialProps}),e(t.firstElementChild)},i.onRemove=function(){e.prototype.onRemove&&e.prototype.onRemove.call(this),this.compInstance&&this.compInstance.$destroy()},r}(Q),z=__webpack_require__(8665),Z=__webpack_require__(9923),$=__webpack_require__(6958);function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t,n;return(t=new $.Z({props:{name:e[0]?"success":"copy"}})).$on("click",e[1]),{c:function(){(0,i.YC)(t.$$.fragment)},m:function(e,r){(0,i.ye)(t,e,r),n=!0},p:function(e,n){var r={};1&n[0]&&(r.name=e[0]?"success":"copy"),t.$set(r)},i:function(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,i.et)(t.$$.fragment,e),n=!1},d:function(e){(0,i.vp)(t,e)}}}function X(e,n,r){var i=n.content,o=void 0===i?"":i,s=n.handler,a=void 0===s?void 0:s,c={target:document.documentElement},l=!1;return e.$$set=function(e){"content"in e&&r(2,o=e.content),"handler"in e&&r(3,a=e.handler)},[l,function(e){(function(e,t){var n=(void 0===t?{}:t).target,r=void 0===n?document.body:n,i=document.createElement("textarea"),o=document.activeElement;i.value=e,i.setAttribute("readonly",""),i.style.contain="strict",i.style.position="absolute",i.style.left="-9999px",i.style.fontSize="12pt";var s=document.getSelection(),a=!1;s.rangeCount>0&&(a=s.getRangeAt(0)),r.append(i),i.select(),i.selectionStart=0,i.selectionEnd=e.length;try{document.execCommand("copy")}catch(e){}i.remove(),a&&(s.removeAllRanges(),s.addRange(a)),o&&o.focus()})(t.mf(a)?a(o)||"":t.Kn(o)||t.kJ(o)?t.hZ(o):o,c),r(0,l=!0),setTimeout((function(){r(0,l=!1)}),600)},o,a]}var ee,te=function(e){var t,n,r,o,s;function a(t){var n;return n=e.call(this)||this,(0,i.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t,X,J,i.N8,{content:2,handler:3}),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Y(t,n),r=a,(o=[{key:"content",get:function(){return this.$$.ctx[2]},set:function(e){this.$set({content:e}),(0,i.yl)()}},{key:"handler",get:function(){return this.$$.ctx[3]},set:function(e){this.$set({handler:e}),(0,i.yl)()}}])&&K(r.prototype,o),s&&K(r,s),a}(i.f_),ne=__webpack_require__(845),re=0,ie={injectType:"lazyStyleTag",insert:"head",singleton:!1},oe={};oe.locals=ne.Z.locals||{},oe.use=function(){return re++||(ee=a()(ne.Z,ie)),oe},oe.unuse=function(){re>0&&!--re&&(ee(),ee=null)};var se=oe;function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var n,r,o,s=t.rE(e[1])+"";return{c:function(){n=(0,i.bG)("i"),r=(0,i.fL)(s),o=(0,i.fL)(":"),(0,i.Lj)(n,"class","vc-log-key"),(0,i.VH)(n,"vc-log-key-symbol","symbol"===e[2]),(0,i.VH)(n,"vc-log-key-private","private"===e[2])},m:function(e,t){(0,i.$T)(e,n,t),(0,i.R3)(n,r),(0,i.$T)(e,o,t)},p:function(e,o){2&o&&s!==(s=t.rE(e[1])+"")&&(0,i.rT)(r,s),4&o&&(0,i.VH)(n,"vc-log-key-symbol","symbol"===e[2]),4&o&&(0,i.VH)(n,"vc-log-key-private","private"===e[2])},d:function(e){e&&(0,i.og)(n),e&&(0,i.og)(o)}}}function ue(e){var t;return{c:function(){t=(0,i.fL)(e[3])},m:function(e,n){(0,i.$T)(e,t,n)},p:function(e,n){8&n&&(0,i.rT)(t,e[3])},d:function(e){e&&(0,i.og)(t)}}}function de(e){var t,n;return{c:function(){t=new i.FW,n=(0,i.cS)(),t.a=n},m:function(r,o){t.m(e[3],r,o),(0,i.$T)(r,n,o)},p:function(e,n){8&n&&t.p(e[3])},d:function(e){e&&(0,i.og)(n),e&&t.d()}}}function he(e){var t,n,r,o=void 0!==e[1]&&le(e);function s(e,t){return e[5]||"string"!==e[4]?ue:de}var a=s(e),c=a(e);return{c:function(){o&&o.c(),t=(0,i.Dh)(),n=(0,i.bG)("i"),c.c(),(0,i.Lj)(n,"class",r="vc-log-val vc-log-val-"+e[4]),(0,i.Lj)(n,"style",e[0]),(0,i.VH)(n,"vc-log-val-haskey",void 0!==e[1])},m:function(e,r){o&&o.m(e,r),(0,i.$T)(e,t,r),(0,i.$T)(e,n,r),c.m(n,null)},p:function(e,l){var u=l[0];void 0!==e[1]?o?o.p(e,u):((o=le(e)).c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),a===(a=s(e))&&c?c.p(e,u):(c.d(1),(c=a(e))&&(c.c(),c.m(n,null))),16&u&&r!==(r="vc-log-val vc-log-val-"+e[4])&&(0,i.Lj)(n,"class",r),1&u&&(0,i.Lj)(n,"style",e[0]),18&u&&(0,i.VH)(n,"vc-log-val-haskey",void 0!==e[1])},i:i.ZT,o:i.ZT,d:function(e){o&&o.d(e),e&&(0,i.og)(t),e&&(0,i.og)(n),c.d()}}}function pe(e,n,r){var i=n.origData,s=n.style,a=void 0===s?"":s,c=n.dataKey,l=void 0===c?void 0:c,u=n.keyType,d=void 0===u?"":u,h="",p="",f=!1,g=!1;return(0,o.H3)((function(){se.use()})),(0,o.ev)((function(){se.unuse()})),e.$$set=function(e){"origData"in e&&r(6,i=e.origData),"style"in e&&r(0,a=e.style),"dataKey"in e&&r(1,l=e.dataKey),"keyType"in e&&r(2,d=e.keyType)},e.$$.update=function(){if(250&e.$$.dirty&&!f){r(5,g=void 0!==l);var n=(0,z.LH)(i,g);r(4,p=n.valueType),r(3,h=n.text),g||"string"!==p||r(3,h=t.Ak(h.replace("\\n","\n").replace("\\t","\t"))),r(7,f=!0)}},[a,l,d,h,p,g,i,f]}var fe,ge=function(e){var t,n,r,o,s;function a(t){var n;return n=e.call(this)||this,(0,i.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t,pe,he,i.N8,{origData:6,style:0,dataKey:1,keyType:2}),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,ce(t,n),r=a,(o=[{key:"origData",get:function(){return this.$$.ctx[6]},set:function(e){this.$set({origData:e}),(0,i.yl)()}},{key:"style",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({style:e}),(0,i.yl)()}},{key:"dataKey",get:function(){return this.$$.ctx[1]},set:function(e){this.$set({dataKey:e}),(0,i.yl)()}},{key:"keyType",get:function(){return this.$$.ctx[2]},set:function(e){this.$set({keyType:e}),(0,i.yl)()}}])&&ae(r.prototype,o),s&&ae(r,s),a}(i.f_),me=__webpack_require__(1237),_e=0,ve={injectType:"lazyStyleTag",insert:"head",singleton:!1},Ee={};Ee.locals=me.Z.locals||{},Ee.use=function(){return _e++||(fe=a()(me.Z,ve)),Ee},Ee.unuse=function(){_e>0&&!--_e&&(fe(),fe=null)};var Ae=Ee;function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e,t,n){var r=e.slice();return r[18]=t[n],r[20]=n,r}function Ce(e,t,n){var r=e.slice();return r[18]=t[n],r}function Te(e,t,n){var r=e.slice();return r[18]=t[n],r[20]=n,r}function Ie(e){for(var t,n,r,o,s,a,c,l=[],u=new Map,d=[],h=new Map,p=[],f=new Map,g=e[5],m=function(e){return e[18]},_=0;_<g.length;_+=1){var v=Te(e,g,_),E=m(v);u.set(E,l[_]=we(E,v))}for(var A=e[9]<e[5].length&&ke(e),y=e[7],S=function(e){return e[18]},b=0;b<y.length;b+=1){var C=Ce(e,y,b),T=S(C);h.set(T,d[b]=Oe(T,C))}for(var I=e[6],R=function(e){return e[18]},w=0;w<I.length;w+=1){var k=be(e,I,w),O=R(k);f.set(O,p[w]=Le(O,k))}var N=e[10]<e[6].length&&Pe(e),L=e[8]&&De(e);return{c:function(){t=(0,i.bG)("div");for(var e=0;e<l.length;e+=1)l[e].c();n=(0,i.Dh)(),A&&A.c(),r=(0,i.Dh)();for(var c=0;c<d.length;c+=1)d[c].c();o=(0,i.Dh)();for(var u=0;u<p.length;u+=1)p[u].c();s=(0,i.Dh)(),N&&N.c(),a=(0,i.Dh)(),L&&L.c(),(0,i.Lj)(t,"class","vc-log-tree-child")},m:function(e,u){(0,i.$T)(e,t,u);for(var h=0;h<l.length;h+=1)l[h].m(t,null);(0,i.R3)(t,n),A&&A.m(t,null),(0,i.R3)(t,r);for(var f=0;f<d.length;f+=1)d[f].m(t,null);(0,i.R3)(t,o);for(var g=0;g<p.length;g+=1)p[g].m(t,null);(0,i.R3)(t,s),N&&N.m(t,null),(0,i.R3)(t,a),L&&L.m(t,null),c=!0},p:function(e,c){16928&c&&(g=e[5],(0,i.dv)(),l=(0,i.GQ)(l,c,m,1,e,g,u,t,i.cl,we,n,Te),(0,i.gb)()),e[9]<e[5].length?A?A.p(e,c):((A=ke(e)).c(),A.m(t,r)):A&&(A.d(1),A=null),16512&c&&(y=e[7],(0,i.dv)(),d=(0,i.GQ)(d,c,S,1,e,y,h,t,i.cl,Oe,o,Ce),(0,i.gb)()),17472&c&&(I=e[6],(0,i.dv)(),p=(0,i.GQ)(p,c,R,1,e,I,f,t,i.cl,Le,s,be),(0,i.gb)()),e[10]<e[6].length?N?N.p(e,c):((N=Pe(e)).c(),N.m(t,a)):N&&(N.d(1),N=null),e[8]?L?(L.p(e,c),256&c&&(0,i.Ui)(L,1)):((L=De(e)).c(),(0,i.Ui)(L,1),L.m(t,null)):L&&((0,i.dv)(),(0,i.et)(L,1,1,(function(){L=null})),(0,i.gb)())},i:function(e){if(!c){for(var t=0;t<g.length;t+=1)(0,i.Ui)(l[t]);for(var n=0;n<y.length;n+=1)(0,i.Ui)(d[n]);for(var r=0;r<I.length;r+=1)(0,i.Ui)(p[r]);(0,i.Ui)(L),c=!0}},o:function(e){for(var t=0;t<l.length;t+=1)(0,i.et)(l[t]);for(var n=0;n<d.length;n+=1)(0,i.et)(d[n]);for(var r=0;r<p.length;r+=1)(0,i.et)(p[r]);(0,i.et)(L),c=!1},d:function(e){e&&(0,i.og)(t);for(var n=0;n<l.length;n+=1)l[n].d();A&&A.d();for(var r=0;r<d.length;r+=1)d[r].d();for(var o=0;o<p.length;o+=1)p[o].d();N&&N.d(),L&&L.d()}}}function Re(e){var t,n;return t=new Ue({props:{origData:e[14](e[18]),dataKey:e[18]}}),{c:function(){(0,i.YC)(t.$$.fragment)},m:function(e,r){(0,i.ye)(t,e,r),n=!0},p:function(e,n){var r={};32&n&&(r.origData=e[14](e[18])),32&n&&(r.dataKey=e[18]),t.$set(r)},i:function(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,i.et)(t.$$.fragment,e),n=!1},d:function(e){(0,i.vp)(t,e)}}}function we(e,t){var n,r,o,s=t[20]<t[9]&&Re(t);return{key:e,first:null,c:function(){n=(0,i.cS)(),s&&s.c(),r=(0,i.cS)(),this.first=n},m:function(e,t){(0,i.$T)(e,n,t),s&&s.m(e,t),(0,i.$T)(e,r,t),o=!0},p:function(e,n){(t=e)[20]<t[9]?s?(s.p(t,n),544&n&&(0,i.Ui)(s,1)):((s=Re(t)).c(),(0,i.Ui)(s,1),s.m(r.parentNode,r)):s&&((0,i.dv)(),(0,i.et)(s,1,1,(function(){s=null})),(0,i.gb)())},i:function(e){o||((0,i.Ui)(s),o=!0)},o:function(e){(0,i.et)(s),o=!1},d:function(e){e&&(0,i.og)(n),s&&s.d(e),e&&(0,i.og)(r)}}}function ke(e){var t,n,r,o,s=e[12](e[5].length-e[9])+"";return{c:function(){t=(0,i.bG)("div"),n=(0,i.fL)(s),(0,i.Lj)(t,"class","vc-log-tree-loadmore")},m:function(s,a){(0,i.$T)(s,t,a),(0,i.R3)(t,n),r||(o=(0,i.oL)(t,"click",e[16]),r=!0)},p:function(e,t){544&t&&s!==(s=e[12](e[5].length-e[9])+"")&&(0,i.rT)(n,s)},d:function(e){e&&(0,i.og)(t),r=!1,o()}}}function Oe(e,t){var n,r,o;return r=new Ue({props:{origData:t[14](t[18]),dataKey:String(t[18]),keyType:"symbol"}}),{key:e,first:null,c:function(){n=(0,i.cS)(),(0,i.YC)(r.$$.fragment),this.first=n},m:function(e,t){(0,i.$T)(e,n,t),(0,i.ye)(r,e,t),o=!0},p:function(e,n){t=e;var i={};128&n&&(i.origData=t[14](t[18])),128&n&&(i.dataKey=String(t[18])),r.$set(i)},i:function(e){o||((0,i.Ui)(r.$$.fragment,e),o=!0)},o:function(e){(0,i.et)(r.$$.fragment,e),o=!1},d:function(e){e&&(0,i.og)(n),(0,i.vp)(r,e)}}}function Ne(e){var t,n;return t=new Ue({props:{origData:e[14](e[18]),dataKey:e[18],keyType:"private"}}),{c:function(){(0,i.YC)(t.$$.fragment)},m:function(e,r){(0,i.ye)(t,e,r),n=!0},p:function(e,n){var r={};64&n&&(r.origData=e[14](e[18])),64&n&&(r.dataKey=e[18]),t.$set(r)},i:function(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,i.et)(t.$$.fragment,e),n=!1},d:function(e){(0,i.vp)(t,e)}}}function Le(e,t){var n,r,o,s=t[20]<t[10]&&Ne(t);return{key:e,first:null,c:function(){n=(0,i.cS)(),s&&s.c(),r=(0,i.cS)(),this.first=n},m:function(e,t){(0,i.$T)(e,n,t),s&&s.m(e,t),(0,i.$T)(e,r,t),o=!0},p:function(e,n){(t=e)[20]<t[10]?s?(s.p(t,n),1088&n&&(0,i.Ui)(s,1)):((s=Ne(t)).c(),(0,i.Ui)(s,1),s.m(r.parentNode,r)):s&&((0,i.dv)(),(0,i.et)(s,1,1,(function(){s=null})),(0,i.gb)())},i:function(e){o||((0,i.Ui)(s),o=!0)},o:function(e){(0,i.et)(s),o=!1},d:function(e){e&&(0,i.og)(n),s&&s.d(e),e&&(0,i.og)(r)}}}function Pe(e){var t,n,r,o,s=e[12](e[6].length-e[10])+"";return{c:function(){t=(0,i.bG)("div"),n=(0,i.fL)(s),(0,i.Lj)(t,"class","vc-log-tree-loadmore")},m:function(s,a){(0,i.$T)(s,t,a),(0,i.R3)(t,n),r||(o=(0,i.oL)(t,"click",e[17]),r=!0)},p:function(e,t){1088&t&&s!==(s=e[12](e[6].length-e[10])+"")&&(0,i.rT)(n,s)},d:function(e){e&&(0,i.og)(t),r=!1,o()}}}function De(e){var t,n;return t=new Ue({props:{origData:e[14]("__proto__"),dataKey:"__proto__",keyType:"private"}}),{c:function(){(0,i.YC)(t.$$.fragment)},m:function(e,r){(0,i.ye)(t,e,r),n=!0},p:i.ZT,i:function(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,i.et)(t.$$.fragment,e),n=!1},d:function(e){(0,i.vp)(t,e)}}}function Me(e){var t,n,r,o,s,a,c;r=new ge({props:{origData:e[0],dataKey:e[1],keyType:e[2]}});var l=e[4]&&e[3]&&Ie(e);return{c:function(){t=(0,i.bG)("div"),n=(0,i.bG)("div"),(0,i.YC)(r.$$.fragment),o=(0,i.Dh)(),l&&l.c(),(0,i.Lj)(n,"class","vc-log-tree-node"),(0,i.Lj)(t,"class","vc-log-tree"),(0,i.VH)(t,"vc-toggle",e[3]),(0,i.VH)(t,"vc-is-tree",e[4])},m:function(u,d){(0,i.$T)(u,t,d),(0,i.R3)(t,n),(0,i.ye)(r,n,null),(0,i.R3)(t,o),l&&l.m(t,null),s=!0,a||(c=(0,i.oL)(n,"click",e[13]),a=!0)},p:function(e,n){var o=n[0],s={};1&o&&(s.origData=e[0]),2&o&&(s.dataKey=e[1]),4&o&&(s.keyType=e[2]),r.$set(s),e[4]&&e[3]?l?(l.p(e,o),24&o&&(0,i.Ui)(l,1)):((l=Ie(e)).c(),(0,i.Ui)(l,1),l.m(t,null)):l&&((0,i.dv)(),(0,i.et)(l,1,1,(function(){l=null})),(0,i.gb)()),8&o&&(0,i.VH)(t,"vc-toggle",e[3]),16&o&&(0,i.VH)(t,"vc-is-tree",e[4])},i:function(e){s||((0,i.Ui)(r.$$.fragment,e),(0,i.Ui)(l),s=!0)},o:function(e){(0,i.et)(r.$$.fragment,e),(0,i.et)(l),s=!1},d:function(e){e&&(0,i.og)(t),(0,i.vp)(r),l&&l.d(),a=!1,c()}}}function xe(e,n,r){var i,s,a,c=n.origData,l=n.dataKey,u=void 0===l?void 0:l,d=n.keyType,h=void 0===d?"":d,p=!1,f=!1,g=!1,m=!1,_=50,v=50;(0,o.H3)((function(){Ae.use()})),(0,o.ev)((function(){Ae.unuse()}));var E=function(e){"enum"===e?r(9,_+=50):"nonEnum"===e&&r(10,v+=50)};return e.$$set=function(e){"origData"in e&&r(0,c=e.origData),"dataKey"in e&&r(1,u=e.dataKey),"keyType"in e&&r(2,h=e.keyType)},e.$$.update=function(){33017&e.$$.dirty&&(p||(r(4,g=!(c instanceof z.Tg)&&(t.kJ(c)||t.Kn(c))),r(15,p=!0)),g&&f&&(r(5,i=i||t.qr(t.MH(c))),r(6,s=s||t.qr(t.QK(c))),r(7,a=a||t._D(c)),r(8,m=t.Kn(c)&&-1===s.indexOf("__proto__"))))},[c,u,h,f,g,i,s,a,m,_,v,E,function(e){return"(..."+e+" Key"+(e>1?"s":"")+" Left)"},function(){r(3,f=!f)},function(e){try{return c[e]}catch(e){return new z.Tg}},p,function(){return E("enum")},function(){return E("nonEnum")}]}var Be,Ue=function(e){var t,n,r,o,s;function a(t){var n;return n=e.call(this)||this,(0,i.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t,xe,Me,i.N8,{origData:0,dataKey:1,keyType:2}),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Se(t,n),r=a,(o=[{key:"origData",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({origData:e}),(0,i.yl)()}},{key:"dataKey",get:function(){return this.$$.ctx[1]},set:function(e){this.$set({dataKey:e}),(0,i.yl)()}},{key:"keyType",get:function(){return this.$$.ctx[2]},set:function(e){this.$set({keyType:e}),(0,i.yl)()}}])&&ye(r.prototype,o),s&&ye(r,s),a}(i.f_),Fe=Ue,Ve=__webpack_require__(7147),je=0,Ge={injectType:"lazyStyleTag",insert:"head",singleton:!1},He={};He.locals=Ve.Z.locals||{},He.use=function(){return je++||(Be=a()(Ve.Z,Ge)),He},He.unuse=function(){je>0&&!--je&&(Be(),Be=null)};var Qe=He;function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e,t,n){var r=e.slice();return r[3]=t[n],r[5]=n,r}function Ze(e){var t,n,r,o,s,a,c,l,u=[],d=new Map;r=new te({props:{handler:e[2]}});for(var h=e[0].repeated&&$e(e),p=e[0].data,f=function(e){return e[5]},g=0;g<p.length;g+=1){var m=ze(e,p,g),_=f(m);d.set(_,u[g]=Je(_,m))}return{c:function(){t=(0,i.bG)("div"),n=(0,i.bG)("div"),(0,i.YC)(r.$$.fragment),o=(0,i.Dh)(),h&&h.c(),s=(0,i.Dh)(),a=(0,i.bG)("div");for(var l=0;l<u.length;l+=1)u[l].c();(0,i.Lj)(n,"class","vc-logrow-icon"),(0,i.Lj)(a,"class","vc-log-content"),(0,i.Lj)(t,"class",c="vc-log-row vc-log-"+e[0].type),(0,i.VH)(t,"vc-log-input","input"===e[0].cmdType),(0,i.VH)(t,"vc-log-output","output"===e[0].cmdType)},m:function(e,c){(0,i.$T)(e,t,c),(0,i.R3)(t,n),(0,i.ye)(r,n,null),(0,i.R3)(t,o),h&&h.m(t,null),(0,i.R3)(t,s),(0,i.R3)(t,a);for(var d=0;d<u.length;d+=1)u[d].m(a,null);l=!0},p:function(e,n){e[0].repeated?h?h.p(e,n):((h=$e(e)).c(),h.m(t,s)):h&&(h.d(1),h=null),3&n&&(p=e[0].data,(0,i.dv)(),u=(0,i.GQ)(u,n,f,1,e,p,d,a,i.cl,Je,null,ze),(0,i.gb)()),(!l||1&n&&c!==(c="vc-log-row vc-log-"+e[0].type))&&(0,i.Lj)(t,"class",c),1&n&&(0,i.VH)(t,"vc-log-input","input"===e[0].cmdType),1&n&&(0,i.VH)(t,"vc-log-output","output"===e[0].cmdType)},i:function(e){if(!l){(0,i.Ui)(r.$$.fragment,e);for(var t=0;t<p.length;t+=1)(0,i.Ui)(u[t]);l=!0}},o:function(e){(0,i.et)(r.$$.fragment,e);for(var t=0;t<u.length;t+=1)(0,i.et)(u[t]);l=!1},d:function(e){e&&(0,i.og)(t),(0,i.vp)(r),h&&h.d();for(var n=0;n<u.length;n+=1)u[n].d()}}}function $e(e){var t,n,r=e[0].repeated+"";return{c:function(){t=(0,i.bG)("div"),n=(0,i.fL)(r),(0,i.Lj)(t,"class","vc-log-repeat")},m:function(e,r){(0,i.$T)(e,t,r),(0,i.R3)(t,n)},p:function(e,t){1&t&&r!==(r=e[0].repeated+"")&&(0,i.rT)(n,r)},d:function(e){e&&(0,i.og)(t)}}}function Ke(e){var t,n;return t=new ge({props:{origData:e[3].origData,style:e[3].style}}),{c:function(){(0,i.YC)(t.$$.fragment)},m:function(e,r){(0,i.ye)(t,e,r),n=!0},p:function(e,n){var r={};1&n&&(r.origData=e[3].origData),1&n&&(r.style=e[3].style),t.$set(r)},i:function(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,i.et)(t.$$.fragment,e),n=!1},d:function(e){(0,i.vp)(t,e)}}}function Ye(e){var t,n;return t=new Fe({props:{origData:e[3].origData}}),{c:function(){(0,i.YC)(t.$$.fragment)},m:function(e,r){(0,i.ye)(t,e,r),n=!0},p:function(e,n){var r={};1&n&&(r.origData=e[3].origData),t.$set(r)},i:function(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,i.et)(t.$$.fragment,e),n=!1},d:function(e){(0,i.vp)(t,e)}}}function Je(e,t){var n,r,o,s,a,c,l=[Ye,Ke],u=[];function d(e,t){return 1&t&&(r=!!e[1](e[3].origData)),r?0:1}return o=d(t,-1),s=u[o]=l[o](t),{key:e,first:null,c:function(){n=(0,i.cS)(),s.c(),a=(0,i.cS)(),this.first=n},m:function(e,t){(0,i.$T)(e,n,t),u[o].m(e,t),(0,i.$T)(e,a,t),c=!0},p:function(e,n){var r=o;(o=d(t=e,n))===r?u[o].p(t,n):((0,i.dv)(),(0,i.et)(u[r],1,1,(function(){u[r]=null})),(0,i.gb)(),(s=u[o])?s.p(t,n):(s=u[o]=l[o](t)).c(),(0,i.Ui)(s,1),s.m(a.parentNode,a))},i:function(e){c||((0,i.Ui)(s),c=!0)},o:function(e){(0,i.et)(s),c=!1},d:function(e){e&&(0,i.og)(n),u[o].d(e),e&&(0,i.og)(a)}}}function Xe(e){var t,n,r=e[0]&&Ze(e);return{c:function(){r&&r.c(),t=(0,i.cS)()},m:function(e,o){r&&r.m(e,o),(0,i.$T)(e,t,o),n=!0},p:function(e,n){var o=n[0];e[0]?r?(r.p(e,o),1&o&&(0,i.Ui)(r,1)):((r=Ze(e)).c(),(0,i.Ui)(r,1),r.m(t.parentNode,t)):r&&((0,i.dv)(),(0,i.et)(r,1,1,(function(){r=null})),(0,i.gb)())},i:function(e){n||((0,i.Ui)(r),n=!0)},o:function(e){(0,i.et)(r),n=!1},d:function(e){r&&r.d(e),e&&(0,i.og)(t)}}}function et(e,n,r){var i=n.log;return(0,o.H3)((function(){Qe.use()})),(0,o.ev)((function(){Qe.unuse()})),e.$$set=function(e){"log"in e&&r(0,i=e.log)},[i,function(e){return!(e instanceof z.Tg)&&(t.kJ(e)||t.Kn(e))},function(){var e=[];try{for(var n=0;n<i.data.length;n++)e.push(t.hZ(i.data[n].origData,{maxDepth:10,keyMaxLen:1e4,pretty:!1}))}catch(e){}return e.join(" ")}]}var tt,nt=function(e){var t,n,r,o,s;function a(t){var n;return n=e.call(this)||this,(0,i.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t,et,Xe,i.N8,{log:0}),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,qe(t,n),r=a,(o=[{key:"log",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({log:e}),(0,i.yl)()}}])&&We(r.prototype,o),s&&We(r,s),a}(i.f_),rt=__webpack_require__(3903),it=__webpack_require__(3327),ot=0,st={injectType:"lazyStyleTag",insert:"head",singleton:!1},at={};at.locals=it.Z.locals||{},at.use=function(){return ot++||(tt=a()(it.Z,st)),at},at.unuse=function(){ot>0&&!--ot&&(tt(),tt=null)};var ct=at;function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dt(e,t,n){var r=e.slice();return r[8]=t[n],r}function ht(e){var t;return{c:function(){t=(0,i.bG)("div"),(0,i.Lj)(t,"class","vc-plugin-empty")},m:function(e,n){(0,i.$T)(e,t,n)},p:i.ZT,i:i.ZT,o:i.ZT,d:function(e){e&&(0,i.og)(t)}}}function pt(e){for(var t,n,r=[],o=new Map,s=e[4].logList,a=function(e){return e[8]._id},c=0;c<s.length;c+=1){var l=dt(e,s,c),u=a(l);o.set(u,r[c]=gt(u,l))}return{c:function(){for(var e=0;e<r.length;e+=1)r[e].c();t=(0,i.cS)()},m:function(e,o){for(var s=0;s<r.length;s+=1)r[s].m(e,o);(0,i.$T)(e,t,o),n=!0},p:function(e,n){22&n&&(s=e[4].logList,(0,i.dv)(),r=(0,i.GQ)(r,n,a,1,e,s,o,t.parentNode,i.cl,gt,t,dt),(0,i.gb)())},i:function(e){if(!n){for(var t=0;t<s.length;t+=1)(0,i.Ui)(r[t]);n=!0}},o:function(e){for(var t=0;t<r.length;t+=1)(0,i.et)(r[t]);n=!1},d:function(e){for(var n=0;n<r.length;n+=1)r[n].d(e);e&&(0,i.og)(t)}}}function ft(e){var t,n;return t=new nt({props:{log:e[8]}}),{c:function(){(0,i.YC)(t.$$.fragment)},m:function(e,r){(0,i.ye)(t,e,r),n=!0},p:function(e,n){var r={};16&n&&(r.log=e[8]),t.$set(r)},i:function(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,i.et)(t.$$.fragment,e),n=!1},d:function(e){(0,i.vp)(t,e)}}}function gt(e,t){var n,r,o,s=("all"===t[1]||t[1]===t[8].type)&&(""===t[2]||(0,z.HX)(t[8],t[2])),a=s&&ft(t);return{key:e,first:null,c:function(){n=(0,i.cS)(),a&&a.c(),r=(0,i.cS)(),this.first=n},m:function(e,t){(0,i.$T)(e,n,t),a&&a.m(e,t),(0,i.$T)(e,r,t),o=!0},p:function(e,n){t=e,22&n&&(s=("all"===t[1]||t[1]===t[8].type)&&(""===t[2]||(0,z.HX)(t[8],t[2]))),s?a?(a.p(t,n),22&n&&(0,i.Ui)(a,1)):((a=ft(t)).c(),(0,i.Ui)(a,1),a.m(r.parentNode,r)):a&&((0,i.dv)(),(0,i.et)(a,1,1,(function(){a=null})),(0,i.gb)())},i:function(e){o||((0,i.Ui)(a),o=!0)},o:function(e){(0,i.et)(a),o=!1},d:function(e){e&&(0,i.og)(n),a&&a.d(e),e&&(0,i.og)(r)}}}function mt(e){var t,n;return(t=new rt.Z({})).$on("filterText",e[5]),{c:function(){(0,i.YC)(t.$$.fragment)},m:function(e,r){(0,i.ye)(t,e,r),n=!0},p:i.ZT,i:function(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,i.et)(t.$$.fragment,e),n=!1},d:function(e){(0,i.vp)(t,e)}}}function _t(e){var t,n,r,o,s,a=[pt,ht],c=[];function l(e,t){return e[4]&&e[4].logList.length>0?0:1}n=l(e),r=c[n]=a[n](e);var u=e[0]&&mt(e);return{c:function(){t=(0,i.bG)("div"),r.c(),o=(0,i.Dh)(),u&&u.c(),(0,i.Lj)(t,"class","vc-plugin-content"),(0,i.VH)(t,"vc-logs-has-cmd",e[0])},m:function(e,r){(0,i.$T)(e,t,r),c[n].m(t,null),(0,i.R3)(t,o),u&&u.m(t,null),s=!0},p:function(e,s){var d=s[0],h=n;(n=l(e))===h?c[n].p(e,d):((0,i.dv)(),(0,i.et)(c[h],1,1,(function(){c[h]=null})),(0,i.gb)(),(r=c[n])?r.p(e,d):(r=c[n]=a[n](e)).c(),(0,i.Ui)(r,1),r.m(t,o)),e[0]?u?(u.p(e,d),1&d&&(0,i.Ui)(u,1)):((u=mt(e)).c(),(0,i.Ui)(u,1),u.m(t,null)):u&&((0,i.dv)(),(0,i.et)(u,1,1,(function(){u=null})),(0,i.gb)()),1&d&&(0,i.VH)(t,"vc-logs-has-cmd",e[0])},i:function(e){s||((0,i.Ui)(r),(0,i.Ui)(u),s=!0)},o:function(e){(0,i.et)(r),(0,i.et)(u),s=!1},d:function(e){e&&(0,i.og)(t),c[n].d(),u&&u.d()}}}function vt(e,t,n){var r,s=i.ZT;e.$$.on_destroy.push((function(){return s()}));var a,c=t.pluginId,l=void 0===c?"default":c,u=t.showCmd,d=void 0!==u&&u,h=t.filterType,p=void 0===h?"all":h,f=!1,g="";return(0,o.H3)((function(){ct.use()})),(0,o.ev)((function(){ct.unuse()})),e.$$set=function(e){"pluginId"in e&&n(6,l=e.pluginId),"showCmd"in e&&n(0,d=e.showCmd),"filterType"in e&&n(1,p=e.filterType)},e.$$.update=function(){192&e.$$.dirty&&(f||(n(3,a=Z.O.get(l)),s(),s=(0,i.Ld)(a,(function(e){return n(4,r=e)})),n(7,f=!0)))},[d,p,g,a,r,function(e){n(2,g=e.detail.filterText||"")},l,f]}var Et=function(e){var t,n,r,o,s;function a(t){var n;return n=e.call(this)||this,(0,i.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t,vt,_t,i.N8,{pluginId:6,showCmd:0,filterType:1}),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,ut(t,n),r=a,(o=[{key:"pluginId",get:function(){return this.$$.ctx[6]},set:function(e){this.$set({pluginId:e}),(0,i.yl)()}},{key:"showCmd",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({showCmd:e}),(0,i.yl)()}},{key:"filterType",get:function(){return this.$$.ctx[1]},set:function(e){this.$set({filterType:e}),(0,i.yl)()}}])&&lt(r.prototype,o),s&&lt(r,s),a}(i.f_),At=__webpack_require__(5629),yt=function(){function e(e){this.model=void 0,this.pluginId=void 0,this.pluginId=e}return e.prototype.destroy=function(){this.model=void 0},e}();function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bt=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).model=At.W.getSingleton(At.W,"VConsoleLogModel"),t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,St(t,n);var i=r.prototype;return i.log=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.addLog.apply(this,["log"].concat(t))},i.info=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.addLog.apply(this,["info"].concat(t))},i.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.addLog.apply(this,["debug"].concat(t))},i.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.addLog.apply(this,["warn"].concat(t))},i.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.addLog.apply(this,["error"].concat(t))},i.clear=function(){this.model&&this.model.clearPluginLog(this.pluginId)},i.addLog=function(e){if(this.model){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.unshift("["+this.pluginId+"]"),this.model.addLog({type:e,origData:n},{noOrig:!0})}},r}(yt);function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tt=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n,Et,{pluginId:t,filterType:"all"})||this).model=At.W.getSingleton(At.W,"VConsoleLogModel"),r.isReady=!1,r.isShow=!1,r.isInBottom=!0,r.model.bindPlugin(t),r.exporter=new bt(t),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Ct(t,n);var i=r.prototype;return i.onReady=function(){e.prototype.onReady.call(this),this.model.maxLogNumber=Number(this.vConsole.option.maxLogNumber)||1e3},i.onRemove=function(){e.prototype.onRemove.call(this),this.model.unbindPlugin(this.id)},i.onAddTopBar=function(e){for(var t=this,n=["All","Log","Info","Warn","Error"],r=[],i=0;i<n.length;i++)r.push({name:n[i],data:{type:n[i].toLowerCase()},actived:0===i,className:"",onClick:function(e,n){if(n.type===t.compInstance.filterType)return!1;t.compInstance.filterType=n.type}});r[0].className="vc-actived",e(r)},i.onAddTool=function(e){var t=this;e([{name:"Clear",global:!1,onClick:function(e){t.model.clearPluginLog(t.id),t.vConsole.triggerEvent("clearLog")}}])},i.onUpdateOption=function(){this.vConsole.option.maxLogNumber!==this.model.maxLogNumber&&(this.model.maxLogNumber=Number(this.vConsole.option.maxLogNumber)||1e3)},r}(q);function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Rt=function(e){var n,r;function i(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).onErrorHandler=void 0,t.resourceErrorHandler=void 0,t.rejectionHandler=void 0,t}r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,It(n,r);var o=i.prototype;return o.onReady=function(){e.prototype.onReady.call(this),this.bindErrors(),this.compInstance.showCmd=!0},o.onRemove=function(){e.prototype.onRemove.call(this),this.unbindErrors()},o.bindErrors=function(){t.FJ(window)&&t.mf(window.addEventListener)&&(this.catchWindowOnError(),this.catchResourceError(),this.catchUnhandledRejection())},o.unbindErrors=function(){t.FJ(window)&&t.mf(window.addEventListener)&&(window.removeEventListener("error",this.onErrorHandler),window.removeEventListener("error",this.resourceErrorHandler),window.removeEventListener("unhandledrejection",this.rejectionHandler))},o.catchWindowOnError=function(){var e=this;this.onErrorHandler=this.onErrorHandler?this.onErrorHandler:function(t){var n=t.message;t.filename&&(n+="\n"+t.filename.replace(location.origin,"")),(t.lineno||t.colno)&&(n+=":"+t.lineno+":"+t.colno);var r=!!t.error&&!!t.error.stack&&t.error.stack.toString()||"";e.model.addLog({type:"error",origData:[n,r]},{noOrig:!0})},window.removeEventListener("error",this.onErrorHandler),window.addEventListener("error",this.onErrorHandler)},o.catchResourceError=function(){var e=this;this.resourceErrorHandler=this.resourceErrorHandler?this.resourceErrorHandler:function(t){var n=t.target;if(["link","video","script","img","audio"].indexOf(n.localName)>-1){var r=n.href||n.src||n.currentSrc;e.model.addLog({type:"error",origData:["GET <"+n.localName+"> error: "+r]},{noOrig:!0})}},window.removeEventListener("error",this.resourceErrorHandler),window.addEventListener("error",this.resourceErrorHandler,!0)},o.catchUnhandledRejection=function(){var e=this;this.rejectionHandler=this.rejectionHandler?this.rejectionHandler:function(t){var n=t&&t.reason,r="Uncaught (in promise) ",i=[r,n];n instanceof Error&&(i=[r,{name:n.name,message:n.message,stack:n.stack}]),e.model.addLog({type:"error",origData:i},{noOrig:!0})},window.removeEventListener("unhandledrejection",this.rejectionHandler),window.addEventListener("unhandledrejection",this.rejectionHandler)},i}(Tt);function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kt=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,wt(t,n);var i=r.prototype;return i.onReady=function(){e.prototype.onReady.call(this),this.printSystemInfo()},i.printSystemInfo=function(){var e=navigator.userAgent,t=[],n=e.match(/MicroMessenger\/([\d\.]+)/i),r=n&&n[1]?n[1]:null;"servicewechat.com"===location.host||console.info("[system]","Location:",location.href);var i=e.match(/(ipod).*\s([\d_]+)/i),o=e.match(/(ipad).*\s([\d_]+)/i),s=e.match(/(iphone)\sos\s([\d_]+)/i),a=e.match(/(android)\s([\d\.]+)/i),c=e.match(/(Mac OS X)\s([\d_]+)/i);t=[],a?t.push("Android "+a[2]):s?t.push("iPhone, iOS "+s[2].replace(/_/g,".")):o?t.push("iPad, iOS "+o[2].replace(/_/g,".")):i?t.push("iPod, iOS "+i[2].replace(/_/g,".")):c&&t.push("Mac, MacOS "+c[2].replace(/_/g,".")),r&&t.push("WeChat "+r),console.info("[system]","Client:",t.length?t.join(", "):"Unknown");var l=e.toLowerCase().match(/ nettype\/([^ ]+)/g);l&&l[0]&&(t=[(l=l[0].split("/"))[1]],console.info("[system]","Network:",t.length?t.join(", "):"Unknown")),console.info("[system]","UA:",e),setTimeout((function(){var e=window.performance||window.msPerformance||window.webkitPerformance;if(e&&e.timing){var t=e.timing;t.navigationStart&&console.info("[system]","navigationStart:",t.navigationStart),t.navigationStart&&t.domainLookupStart&&console.info("[system]","navigation:",t.domainLookupStart-t.navigationStart+"ms"),t.domainLookupEnd&&t.domainLookupStart&&console.info("[system]","dns:",t.domainLookupEnd-t.domainLookupStart+"ms"),t.connectEnd&&t.connectStart&&(t.connectEnd&&t.secureConnectionStart?console.info("[system]","tcp (ssl):",t.connectEnd-t.connectStart+"ms ("+(t.connectEnd-t.secureConnectionStart)+"ms)"):console.info("[system]","tcp:",t.connectEnd-t.connectStart+"ms")),t.responseStart&&t.requestStart&&console.info("[system]","request:",t.responseStart-t.requestStart+"ms"),t.responseEnd&&t.responseStart&&console.info("[system]","response:",t.responseEnd-t.responseStart+"ms"),t.domComplete&&t.domLoading&&(t.domContentLoadedEventStart&&t.domLoading?console.info("[system]","domComplete (domLoaded):",t.domComplete-t.domLoading+"ms ("+(t.domContentLoadedEventStart-t.domLoading)+"ms)"):console.info("[system]","domComplete:",t.domComplete-t.domLoading+"ms")),t.loadEventEnd&&t.loadEventStart&&console.info("[system]","loadEvent:",t.loadEventEnd-t.loadEventStart+"ms"),t.navigationStart&&t.loadEventEnd&&console.info("[system]","total (DOM):",t.loadEventEnd-t.navigationStart+"ms ("+(t.domComplete-t.navigationStart)+"ms)")}}),0)},r}(Tt),Ot=__webpack_require__(4683),Nt=__webpack_require__(643);function Lt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mt=function(){this.id="",this.name="",this.method="",this.url="",this.status=0,this.statusText="",this.readyState=0,this.header=null,this.responseType="",this.requestType=void 0,this.requestHeader=null,this.response=void 0,this.startTime=0,this.endTime=0,this.costTime=0,this.getData=null,this.postData=null,this.actived=!1,this.id=t.QI()},xt=function(e){var t,n;function r(t){var n;return(n=e.call(this)||this)._response=void 0,new Proxy(t,r.Handler)||function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Dt(t,n),r}(Mt);xt.Handler={get:function(e,t){switch(t){case"response":return e._response;default:return Reflect.get(e,t)}},set:function(e,t,n){var r;switch(t){case"response":return e._response=Bt.genResonseByResponseType(e.responseType,n),!0;case"url":var i=(null==(r=n=String(n))?void 0:r.replace(new RegExp("[/]*$"),"").split("/").pop())||"Unknown";Reflect.set(e,"name",i);var o=Bt.genGetDataByUrl(n,e.getData);Reflect.set(e,"getData",o);break;case"status":var s=String(n)||"Unknown";Reflect.set(e,"statusText",s);break;case"startTime":if(n&&e.endTime){var a=e.endTime-n;Reflect.set(e,"costTime",a)}break;case"endTime":if(n&&e.startTime){var c=n-e.startTime;Reflect.set(e,"costTime",c)}}return Reflect.set(e,t,n)}};var Bt={genGetDataByUrl:function(e,n){void 0===n&&(n={}),t.Kn(n)||(n={});var r=e?e.split("?"):[];if(r.shift(),r.length>0)for(var i,o=Lt(r=r.join("?").split("&"));!(i=o()).done;){var s=i.value.split("=");try{n[s[0]]=decodeURIComponent(s[1])}catch(e){n[s[0]]=s[1]}}return n},genResonseByResponseType:function(e,n){var r;switch(e){case"":case"text":case"json":if(t.HD(n))try{r=JSON.parse(n),r=t.hZ(r,{maxDepth:10,keyMaxLen:5e5,pretty:!0})}catch(e){r=n}else t.Kn(n)||t.kJ(n)?r=t.hZ(n,{maxDepth:10,keyMaxLen:5e5,pretty:!0}):void 0!==n&&(r=Object.prototype.toString.call(n));break;case"blob":case"document":case"arraybuffer":default:void 0!==n&&(r=Object.prototype.toString.call(n))}return r}};function Ut(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jt,Gt=(0,Ot.fZ)({}),Ht=function(e){var n,r;function i(){var t;return(t=e.call(this)||this).maxNetworkNumber=1e3,t.itemCounter=0,t._xhrOpen=void 0,t._xhrSend=void 0,t._xhrSetRequestHeader=void 0,t._fetch=void 0,t._sendBeacon=void 0,t.mockXHR(),t.mockFetch(),t.mockSendBeacon(),t}r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,Vt(n,r);var o=i.prototype;return o.unMock=function(){window.XMLHttpRequest&&(window.XMLHttpRequest.prototype.open=this._xhrOpen,window.XMLHttpRequest.prototype.send=this._xhrSend,window.XMLHttpRequest.prototype.setRequestHeader=this._xhrSetRequestHeader,this._xhrOpen=void 0,this._xhrSend=void 0,this._xhrSetRequestHeader=void 0),window.fetch&&(window.fetch=this._fetch,this._fetch=void 0),window.navigator.sendBeacon&&(window.navigator.sendBeacon=this._sendBeacon,this._sendBeacon=void 0)},o.clearLog=function(){Gt.set({})},o.updateRequest=function(e,t){var n=(0,Ot.U2)(Gt),r=!!n[e];if(r){var i=n[e];for(var o in t)i[o]=t[o];t=i}Gt.update((function(n){return n[e]=t,n})),r||(E.x.updateTime(),this.limitListLength())},o.mockXHR=function(){if(window.XMLHttpRequest){var e=this,t=window.XMLHttpRequest.prototype.open,n=window.XMLHttpRequest.prototype.send,r=window.XMLHttpRequest.prototype.setRequestHeader;e._xhrOpen=t,e._xhrSend=n,e._xhrSetRequestHeader=r,window.XMLHttpRequest.prototype.open=function(){var n=this,r=[].slice.call(arguments),i=r[0],o=r[1],s=new Mt,a=null;n._requestID=s.id,n._method=i,n._url=o;var c=n._origOnreadystatechange||n.onreadystatechange||function(){},l=function(){switch(s.readyState=n.readyState,s.responseType=n.responseType,s.requestType="xhr",n.readyState){case 0:case 1:s.status=0,s.statusText="Pending",s.startTime||(s.startTime=+new Date);break;case 2:s.status=n.status,s.statusText="Loading",s.header={};for(var t=n.getAllResponseHeaders()||"",r=t.split("\n"),i=0;i<r.length;i++){var o=r[i];if(o){var l=o.split(": "),u=l[0],d=l.slice(1).join(": ");s.header[u]=d}}break;case 3:s.status=n.status,s.statusText="Loading";break;case 4:clearInterval(a),s.status=n.status,s.statusText=String(n.status),s.endTime=+new Date,s.costTime=s.endTime-(s.startTime||s.endTime),s.response=n.response;break;default:clearInterval(a),s.status=n.status,s.statusText="Unknown"}return s.response=Bt.genResonseByResponseType(s.responseType,s.response),n._noVConsole||e.updateRequest(s.id,s),c.apply(n,arguments)};n.onreadystatechange=l,n._origOnreadystatechange=c;var u=-1;return a=setInterval((function(){u!=n.readyState&&(u=n.readyState,l.call(n))}),10),t.apply(n,r)},window.XMLHttpRequest.prototype.setRequestHeader=function(){var e=this,t=[].slice.call(arguments),n=(0,Ot.U2)(Gt),i=n[e._requestID];return i&&(i.requestHeader||(i.requestHeader={}),i.requestHeader[t[0]]=t[1]),r.apply(e,t)},window.XMLHttpRequest.prototype.send=function(){var t=this,r=[].slice.call(arguments),i=r[0],o=t,s=o._requestID,a=o._url,c=o._method,l=(0,Ot.U2)(Gt),u=l[s]||new Mt;return u.method=c?c.toUpperCase():"GET",u.url=a||"",u.name=u.url.replace(new RegExp("[/]*$"),"").split("/").pop()||"",u.getData=Bt.genGetDataByUrl(u.url,{}),u.postData=e.getFormattedBody(i),t._noVConsole||e.updateRequest(u.id,u),n.apply(t,r)}}},o.mockFetch=function(){var e=this,n=window.fetch;if(n){var r=this;this._fetch=n,window.fetch=function(i,o){var s=new Mt;e.updateRequest(s.id,s);var a,c,l="GET",u=null;if(t.HD(i)?(l=(null==o?void 0:o.method)||"GET",a=r.getURL(i),u=(null==o?void 0:o.headers)||null):(l=i.method||"GET",a=r.getURL(i.url),u=i.headers),s.method=l,s.requestType="fetch",s.requestHeader=u,s.url=a.toString(),s.name=(a.pathname.split("/").pop()||"")+a.search,s.status=0,s.statusText="Pending",s.startTime||(s.startTime=+new Date),"[object Headers]"===Object.prototype.toString.call(u)){s.requestHeader={};for(var d,h=Ut(u);!(d=h()).done;){var p=d.value,f=p[0],g=p[1];s.requestHeader[f]=g}}else s.requestHeader=u;if(a.search&&a.searchParams){s.getData={};for(var m,_=Ut(a.searchParams);!(m=_()).done;){var v=m.value,E=v[0],A=v[1];s.getData[E]=A}}null!=o&&o.body&&(s.postData=r.getFormattedBody(o.body));var y=t.HD(i)?a.toString():i;return n(y,o).then((function(e){var t=e.clone();c=t.clone(),s.endTime=+new Date,s.costTime=s.endTime-(s.startTime||s.endTime),s.status=t.status,s.statusText=String(t.status),s.header={};for(var n,r=Ut(t.headers);!(n=r()).done;){var i=n.value,o=i[0],a=i[1];s.header[o]=a}s.readyState=4;var l=t.headers.get("content-type");return l&&l.includes("application/json")?(s.responseType="json",t.clone().text()):l&&(l.includes("text/html")||l.includes("text/plain"))?(s.responseType="text",t.clone().text()):(s.responseType="","[object Object]")})).then((function(e){return s.response=Bt.genResonseByResponseType(s.responseType,e),r.updateRequest(s.id,s),c})).catch((function(e){throw r.updateRequest(s.id,s),e}))}}},o.mockSendBeacon=function(){var e=this,t=window.navigator.sendBeacon;if(t){var n=this;this._sendBeacon=t;var r=function(e){return e instanceof Blob?e.type:e instanceof FormData?"multipart/form-data":e instanceof URLSearchParams?"application/x-www-form-urlencoded;charset=UTF-8":"text/plain;charset=UTF-8"};window.navigator.sendBeacon=function(i,o){var s=new Mt;e.updateRequest(s.id,s);var a=n.getURL(i);if(s.method="POST",s.url=i,s.name=(a.pathname.split("/").pop()||"")+a.search,s.requestType="ping",s.requestHeader={"Content-Type":r(o)},s.status=0,s.statusText="Pending",a.search&&a.searchParams){s.getData={};for(var c,l=Ut(a.searchParams);!(c=l()).done;){var u=c.value,d=u[0],h=u[1];s.getData[d]=h}}s.postData=n.getFormattedBody(o),s.startTime||(s.startTime=Date.now());var p=t.call(window.navigator,i,o);return p?(s.endTime=Date.now(),s.costTime=s.endTime-(s.startTime||s.endTime),s.status=0,s.statusText="Sent",s.readyState=4):(s.status=500,s.statusText="Unknown"),n.updateRequest(s.id,s),p}}},o.getFormattedBody=function(e){if(!e)return null;var n=null;if("string"==typeof e)try{n=JSON.parse(e)}catch(t){var r=e.split("&");if(1===r.length)n=e;else{n={};for(var i,o=Ut(r);!(i=o()).done;){var s=i.value.split("=");n[s[0]]=void 0===s[1]?"undefined":s[1]}}}else if(t.TW(e)){n={};for(var a,c=Ut(e);!(a=c()).done;){var l=a.value,u=l[0],d=l[1];n[u]="string"==typeof d?d:"[object Object]"}}else n=t.PO(e)?e:"[object "+t.zl(e)+"]";return n},o.getURL=function(e){return void 0===e&&(e=""),e.startsWith("//")&&(e=""+new URL(window.location.href).protocol+e),e.startsWith("http")?new URL(e):new URL(e,window.location.href)},o.limitListLength=function(){var e=this;if(this.itemCounter++,this.itemCounter%10==0){this.itemCounter=0;var t=(0,Ot.U2)(Gt),n=Object.keys(t);n.length>this.maxNetworkNumber-10&&Gt.update((function(t){for(var r=n.splice(0,n.length-e.maxNetworkNumber+10),i=0;i<r.length;i++)t[r[i]]=void 0,delete t[r[i]];return t}))}},i}(Nt.N),Qt=__webpack_require__(8747),Wt=0,qt={injectType:"lazyStyleTag",insert:"head",singleton:!1},zt={};zt.locals=Qt.Z.locals||{},zt.use=function(){return Wt++||(jt=a()(Qt.Z,qt)),zt},zt.unuse=function(){Wt>0&&!--Wt&&(jt(),jt=null)};var Zt=zt;function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kt(e,t,n){var r=e.slice();return r[7]=t[n][0],r[8]=t[n][1],r}function Yt(e,t,n){var r=e.slice();return r[11]=t[n][0],r[12]=t[n][1],r}function Jt(e,t,n){var r=e.slice();return r[11]=t[n][0],r[12]=t[n][1],r}function Xt(e,t,n){var r=e.slice();return r[11]=t[n][0],r[12]=t[n][1],r}function en(e,t,n){var r=e.slice();return r[11]=t[n][0],r[12]=t[n][1],r}function tn(e){var t,n,r;return{c:function(){t=(0,i.fL)("("),n=(0,i.fL)(e[0]),r=(0,i.fL)(")")},m:function(e,o){(0,i.$T)(e,t,o),(0,i.$T)(e,n,o),(0,i.$T)(e,r,o)},p:function(e,t){1&t&&(0,i.rT)(n,e[0])},d:function(e){e&&(0,i.og)(t),e&&(0,i.og)(n),e&&(0,i.og)(r)}}}function nn(e){var t,n,r,o,s,a,c,l;a=new te({props:{content:e[8].requestHeader}});for(var u=Object.entries(e[8].requestHeader),d=[],h=0;h<u.length;h+=1)d[h]=rn(en(e,u,h));return{c:function(){t=(0,i.bG)("div"),n=(0,i.bG)("dl"),r=(0,i.bG)("dt"),o=(0,i.fL)("Request Headers\n                "),s=(0,i.bG)("i"),(0,i.YC)(a.$$.fragment),c=(0,i.Dh)();for(var e=0;e<d.length;e+=1)d[e].c();(0,i.Lj)(s,"class","vc-table-row-icon"),(0,i.Lj)(r,"class","vc-table-col vc-table-col-title"),(0,i.Lj)(n,"class","vc-table-row vc-left-border")},m:function(e,u){(0,i.$T)(e,t,u),(0,i.R3)(t,n),(0,i.R3)(n,r),(0,i.R3)(r,o),(0,i.R3)(r,s),(0,i.ye)(a,s,null),(0,i.R3)(t,c);for(var h=0;h<d.length;h+=1)d[h].m(t,null);l=!0},p:function(e,n){var r={};if(2&n&&(r.content=e[8].requestHeader),a.$set(r),10&n){var i;for(u=Object.entries(e[8].requestHeader),i=0;i<u.length;i+=1){var o=en(e,u,i);d[i]?d[i].p(o,n):(d[i]=rn(o),d[i].c(),d[i].m(t,null))}for(;i<d.length;i+=1)d[i].d(1);d.length=u.length}},i:function(e){l||((0,i.Ui)(a.$$.fragment,e),l=!0)},o:function(e){(0,i.et)(a.$$.fragment,e),l=!1},d:function(e){e&&(0,i.og)(t),(0,i.vp)(a),(0,i.RM)(d,e)}}}function rn(e){var t,n,r,o,s,a,c,l=e[11]+"",u=e[3](e[12])+"";return{c:function(){t=(0,i.bG)("div"),n=(0,i.bG)("div"),r=(0,i.fL)(l),o=(0,i.Dh)(),s=(0,i.bG)("div"),a=(0,i.fL)(u),c=(0,i.Dh)(),(0,i.Lj)(n,"class","vc-table-col vc-table-col-2"),(0,i.Lj)(s,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,i.Lj)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,l){(0,i.$T)(e,t,l),(0,i.R3)(t,n),(0,i.R3)(n,r),(0,i.R3)(t,o),(0,i.R3)(t,s),(0,i.R3)(s,a),(0,i.R3)(t,c)},p:function(e,t){2&t&&l!==(l=e[11]+"")&&(0,i.rT)(r,l),2&t&&u!==(u=e[3](e[12])+"")&&(0,i.rT)(a,u)},d:function(e){e&&(0,i.og)(t)}}}function on(e){var t,n,r,o,s,a,c,l;a=new te({props:{content:e[8].getData}});for(var u=Object.entries(e[8].getData),d=[],h=0;h<u.length;h+=1)d[h]=sn(Xt(e,u,h));return{c:function(){t=(0,i.bG)("div"),n=(0,i.bG)("dl"),r=(0,i.bG)("dt"),o=(0,i.fL)("Query String Parameters\n                "),s=(0,i.bG)("i"),(0,i.YC)(a.$$.fragment),c=(0,i.Dh)();for(var e=0;e<d.length;e+=1)d[e].c();(0,i.Lj)(s,"class","vc-table-row-icon"),(0,i.Lj)(r,"class","vc-table-col vc-table-col-title"),(0,i.Lj)(n,"class","vc-table-row vc-left-border")},m:function(e,u){(0,i.$T)(e,t,u),(0,i.R3)(t,n),(0,i.R3)(n,r),(0,i.R3)(r,o),(0,i.R3)(r,s),(0,i.ye)(a,s,null),(0,i.R3)(t,c);for(var h=0;h<d.length;h+=1)d[h].m(t,null);l=!0},p:function(e,n){var r={};if(2&n&&(r.content=e[8].getData),a.$set(r),10&n){var i;for(u=Object.entries(e[8].getData),i=0;i<u.length;i+=1){var o=Xt(e,u,i);d[i]?d[i].p(o,n):(d[i]=sn(o),d[i].c(),d[i].m(t,null))}for(;i<d.length;i+=1)d[i].d(1);d.length=u.length}},i:function(e){l||((0,i.Ui)(a.$$.fragment,e),l=!0)},o:function(e){(0,i.et)(a.$$.fragment,e),l=!1},d:function(e){e&&(0,i.og)(t),(0,i.vp)(a),(0,i.RM)(d,e)}}}function sn(e){var t,n,r,o,s,a,c,l=e[11]+"",u=e[3](e[12])+"";return{c:function(){t=(0,i.bG)("div"),n=(0,i.bG)("div"),r=(0,i.fL)(l),o=(0,i.Dh)(),s=(0,i.bG)("div"),a=(0,i.fL)(u),c=(0,i.Dh)(),(0,i.Lj)(n,"class","vc-table-col vc-table-col-2"),(0,i.Lj)(s,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,i.Lj)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,l){(0,i.$T)(e,t,l),(0,i.R3)(t,n),(0,i.R3)(n,r),(0,i.R3)(t,o),(0,i.R3)(t,s),(0,i.R3)(s,a),(0,i.R3)(t,c)},p:function(e,t){2&t&&l!==(l=e[11]+"")&&(0,i.rT)(r,l),2&t&&u!==(u=e[3](e[12])+"")&&(0,i.rT)(a,u)},d:function(e){e&&(0,i.og)(t)}}}function an(e){var t,n,r,o,s,a,c,l;function u(e,t){return"string"==typeof e[8].postData?ln:cn}a=new te({props:{content:e[8].postData}});var d=u(e),h=d(e);return{c:function(){t=(0,i.bG)("div"),n=(0,i.bG)("dl"),r=(0,i.bG)("dt"),o=(0,i.fL)("Request Payload\n                "),s=(0,i.bG)("i"),(0,i.YC)(a.$$.fragment),c=(0,i.Dh)(),h.c(),(0,i.Lj)(s,"class","vc-table-row-icon"),(0,i.Lj)(r,"class","vc-table-col vc-table-col-title"),(0,i.Lj)(n,"class","vc-table-row vc-left-border")},m:function(e,u){(0,i.$T)(e,t,u),(0,i.R3)(t,n),(0,i.R3)(n,r),(0,i.R3)(r,o),(0,i.R3)(r,s),(0,i.ye)(a,s,null),(0,i.R3)(t,c),h.m(t,null),l=!0},p:function(e,n){var r={};2&n&&(r.content=e[8].postData),a.$set(r),d===(d=u(e))&&h?h.p(e,n):(h.d(1),(h=d(e))&&(h.c(),h.m(t,null)))},i:function(e){l||((0,i.Ui)(a.$$.fragment,e),l=!0)},o:function(e){(0,i.et)(a.$$.fragment,e),l=!1},d:function(e){e&&(0,i.og)(t),(0,i.vp)(a),h.d()}}}function cn(e){for(var t,n=Object.entries(e[8].postData),r=[],o=0;o<n.length;o+=1)r[o]=un(Jt(e,n,o));return{c:function(){for(var e=0;e<r.length;e+=1)r[e].c();t=(0,i.cS)()},m:function(e,n){for(var o=0;o<r.length;o+=1)r[o].m(e,n);(0,i.$T)(e,t,n)},p:function(e,i){if(10&i){var o;for(n=Object.entries(e[8].postData),o=0;o<n.length;o+=1){var s=Jt(e,n,o);r[o]?r[o].p(s,i):(r[o]=un(s),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d:function(e){(0,i.RM)(r,e),e&&(0,i.og)(t)}}}function ln(e){var t,n,r,o=e[8].postData+"";return{c:function(){t=(0,i.bG)("div"),n=(0,i.bG)("pre"),r=(0,i.fL)(o),(0,i.Lj)(n,"class","vc-table-col vc-table-col-value vc-max-height-line"),(0,i.Lj)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,o){(0,i.$T)(e,t,o),(0,i.R3)(t,n),(0,i.R3)(n,r)},p:function(e,t){2&t&&o!==(o=e[8].postData+"")&&(0,i.rT)(r,o)},d:function(e){e&&(0,i.og)(t)}}}function un(e){var t,n,r,o,s,a,c,l=e[11]+"",u=e[3](e[12])+"";return{c:function(){t=(0,i.bG)("div"),n=(0,i.bG)("div"),r=(0,i.fL)(l),o=(0,i.Dh)(),s=(0,i.bG)("div"),a=(0,i.fL)(u),c=(0,i.Dh)(),(0,i.Lj)(n,"class","vc-table-col vc-table-col-2"),(0,i.Lj)(s,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,i.Lj)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,l){(0,i.$T)(e,t,l),(0,i.R3)(t,n),(0,i.R3)(n,r),(0,i.R3)(t,o),(0,i.R3)(t,s),(0,i.R3)(s,a),(0,i.R3)(t,c)},p:function(e,t){2&t&&l!==(l=e[11]+"")&&(0,i.rT)(r,l),2&t&&u!==(u=e[3](e[12])+"")&&(0,i.rT)(a,u)},d:function(e){e&&(0,i.og)(t)}}}function dn(e){var t,n,r,o,s,a,c,l;a=new te({props:{content:e[8].header}});for(var u=Object.entries(e[8].header),d=[],h=0;h<u.length;h+=1)d[h]=hn(Yt(e,u,h));return{c:function(){t=(0,i.bG)("div"),n=(0,i.bG)("dl"),r=(0,i.bG)("dt"),o=(0,i.fL)("Response Headers\n                "),s=(0,i.bG)("i"),(0,i.YC)(a.$$.fragment),c=(0,i.Dh)();for(var e=0;e<d.length;e+=1)d[e].c();(0,i.Lj)(s,"class","vc-table-row-icon"),(0,i.Lj)(r,"class","vc-table-col vc-table-col-title"),(0,i.Lj)(n,"class","vc-table-row vc-left-border")},m:function(e,u){(0,i.$T)(e,t,u),(0,i.R3)(t,n),(0,i.R3)(n,r),(0,i.R3)(r,o),(0,i.R3)(r,s),(0,i.ye)(a,s,null),(0,i.R3)(t,c);for(var h=0;h<d.length;h+=1)d[h].m(t,null);l=!0},p:function(e,n){var r={};if(2&n&&(r.content=e[8].header),a.$set(r),10&n){var i;for(u=Object.entries(e[8].header),i=0;i<u.length;i+=1){var o=Yt(e,u,i);d[i]?d[i].p(o,n):(d[i]=hn(o),d[i].c(),d[i].m(t,null))}for(;i<d.length;i+=1)d[i].d(1);d.length=u.length}},i:function(e){l||((0,i.Ui)(a.$$.fragment,e),l=!0)},o:function(e){(0,i.et)(a.$$.fragment,e),l=!1},d:function(e){e&&(0,i.og)(t),(0,i.vp)(a),(0,i.RM)(d,e)}}}function hn(e){var t,n,r,o,s,a,c,l=e[11]+"",u=e[3](e[12])+"";return{c:function(){t=(0,i.bG)("div"),n=(0,i.bG)("div"),r=(0,i.fL)(l),o=(0,i.Dh)(),s=(0,i.bG)("div"),a=(0,i.fL)(u),c=(0,i.Dh)(),(0,i.Lj)(n,"class","vc-table-col vc-table-col-2"),(0,i.Lj)(s,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,i.Lj)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,l){(0,i.$T)(e,t,l),(0,i.R3)(t,n),(0,i.R3)(n,r),(0,i.R3)(t,o),(0,i.R3)(t,s),(0,i.R3)(s,a),(0,i.R3)(t,c)},p:function(e,t){2&t&&l!==(l=e[11]+"")&&(0,i.rT)(r,l),2&t&&u!==(u=e[3](e[12])+"")&&(0,i.rT)(a,u)},d:function(e){e&&(0,i.og)(t)}}}function pn(e){var t,n,r,o,s,a,c,l,u,d,h,p,f,g,m,_,v,E,A,y,S,b,C,T,I,R,w,k,O,N,L,P,D,M,x,B,U,F,V,j,G,H,Q,W,q,z,Z,$,K,Y,J,X,ee,ne,re,ie,oe=e[8].name+"",se=e[8].method+"",ae=e[8].statusText+"",ce=e[8].costTime+"",le=e[8].url+"",ue=e[8].method+"",de=e[8].requestType+"",he=(e[8].response||"")+"";function pe(){return e[4](e[8])}E=new te({props:{content:e[8].url}});var fe=null!==e[8].requestHeader&&nn(e),ge=null!==e[8].getData&&on(e),me=null!==e[8].postData&&an(e),_e=null!==e[8].header&&dn(e);return Z=new te({props:{content:e[8].response}}),{c:function(){t=(0,i.bG)("div"),n=(0,i.bG)("dl"),r=(0,i.bG)("dd"),o=(0,i.fL)(oe),s=(0,i.bG)("dd"),a=(0,i.fL)(se),c=(0,i.bG)("dd"),l=(0,i.fL)(ae),u=(0,i.bG)("dd"),d=(0,i.fL)(ce),h=(0,i.Dh)(),p=(0,i.bG)("div"),f=(0,i.bG)("div"),g=(0,i.bG)("dl"),m=(0,i.bG)("dt"),_=(0,i.fL)("General\n                "),v=(0,i.bG)("i"),(0,i.YC)(E.$$.fragment),A=(0,i.Dh)(),y=(0,i.bG)("div"),(S=(0,i.bG)("div")).textContent="URL",b=(0,i.Dh)(),C=(0,i.bG)("div"),T=(0,i.fL)(le),I=(0,i.Dh)(),R=(0,i.bG)("div"),(w=(0,i.bG)("div")).textContent="Method",k=(0,i.Dh)(),O=(0,i.bG)("div"),N=(0,i.fL)(ue),L=(0,i.Dh)(),P=(0,i.bG)("div"),(D=(0,i.bG)("div")).textContent="Request Type",M=(0,i.Dh)(),x=(0,i.bG)("div"),B=(0,i.fL)(de),U=(0,i.Dh)(),fe&&fe.c(),F=(0,i.Dh)(),ge&&ge.c(),V=(0,i.Dh)(),me&&me.c(),j=(0,i.Dh)(),_e&&_e.c(),G=(0,i.Dh)(),H=(0,i.bG)("div"),Q=(0,i.bG)("dl"),W=(0,i.bG)("dt"),q=(0,i.fL)("Response\n                "),z=(0,i.bG)("i"),(0,i.YC)(Z.$$.fragment),$=(0,i.Dh)(),K=(0,i.bG)("div"),Y=(0,i.bG)("pre"),J=(0,i.fL)(he),X=(0,i.Dh)(),(0,i.Lj)(r,"class","vc-table-col vc-table-col-4"),(0,i.Lj)(s,"class","vc-table-col"),(0,i.Lj)(c,"class","vc-table-col"),(0,i.Lj)(u,"class","vc-table-col"),(0,i.Lj)(n,"class","vc-table-row vc-group-preview"),(0,i.VH)(n,"vc-table-row-error",e[8].status>=400),(0,i.Lj)(v,"class","vc-table-row-icon"),(0,i.Lj)(m,"class","vc-table-col vc-table-col-title"),(0,i.Lj)(g,"class","vc-table-row vc-left-border"),(0,i.Lj)(S,"class","vc-table-col vc-table-col-2"),(0,i.Lj)(C,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,i.Lj)(y,"class","vc-table-row vc-left-border vc-small"),(0,i.Lj)(w,"class","vc-table-col vc-table-col-2"),(0,i.Lj)(O,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,i.Lj)(R,"class","vc-table-row vc-left-border vc-small"),(0,i.Lj)(D,"class","vc-table-col vc-table-col-2"),(0,i.Lj)(x,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,i.Lj)(P,"class","vc-table-row vc-left-border vc-small"),(0,i.Lj)(z,"class","vc-table-row-icon"),(0,i.Lj)(W,"class","vc-table-col vc-table-col-title"),(0,i.Lj)(Q,"class","vc-table-row vc-left-border"),(0,i.Lj)(Y,"class","vc-table-col vc-max-height vc-min-height"),(0,i.Lj)(K,"class","vc-table-row vc-left-border vc-small"),(0,i.Lj)(p,"class","vc-group-detail"),(0,i.Lj)(t,"class","vc-group"),(0,i.Lj)(t,"id",ee=e[8].id),(0,i.VH)(t,"vc-actived",e[8].actived)},m:function(e,ee){(0,i.$T)(e,t,ee),(0,i.R3)(t,n),(0,i.R3)(n,r),(0,i.R3)(r,o),(0,i.R3)(n,s),(0,i.R3)(s,a),(0,i.R3)(n,c),(0,i.R3)(c,l),(0,i.R3)(n,u),(0,i.R3)(u,d),(0,i.R3)(t,h),(0,i.R3)(t,p),(0,i.R3)(p,f),(0,i.R3)(f,g),(0,i.R3)(g,m),(0,i.R3)(m,_),(0,i.R3)(m,v),(0,i.ye)(E,v,null),(0,i.R3)(f,A),(0,i.R3)(f,y),(0,i.R3)(y,S),(0,i.R3)(y,b),(0,i.R3)(y,C),(0,i.R3)(C,T),(0,i.R3)(f,I),(0,i.R3)(f,R),(0,i.R3)(R,w),(0,i.R3)(R,k),(0,i.R3)(R,O),(0,i.R3)(O,N),(0,i.R3)(f,L),(0,i.R3)(f,P),(0,i.R3)(P,D),(0,i.R3)(P,M),(0,i.R3)(P,x),(0,i.R3)(x,B),(0,i.R3)(p,U),fe&&fe.m(p,null),(0,i.R3)(p,F),ge&&ge.m(p,null),(0,i.R3)(p,V),me&&me.m(p,null),(0,i.R3)(p,j),_e&&_e.m(p,null),(0,i.R3)(p,G),(0,i.R3)(p,H),(0,i.R3)(H,Q),(0,i.R3)(Q,W),(0,i.R3)(W,q),(0,i.R3)(W,z),(0,i.ye)(Z,z,null),(0,i.R3)(H,$),(0,i.R3)(H,K),(0,i.R3)(K,Y),(0,i.R3)(Y,J),(0,i.R3)(t,X),ne=!0,re||(ie=(0,i.oL)(n,"click",pe),re=!0)},p:function(r,s){e=r,(!ne||2&s)&&oe!==(oe=e[8].name+"")&&(0,i.rT)(o,oe),(!ne||2&s)&&se!==(se=e[8].method+"")&&(0,i.rT)(a,se),(!ne||2&s)&&ae!==(ae=e[8].statusText+"")&&(0,i.rT)(l,ae),(!ne||2&s)&&ce!==(ce=e[8].costTime+"")&&(0,i.rT)(d,ce),2&s&&(0,i.VH)(n,"vc-table-row-error",e[8].status>=400);var c={};2&s&&(c.content=e[8].url),E.$set(c),(!ne||2&s)&&le!==(le=e[8].url+"")&&(0,i.rT)(T,le),(!ne||2&s)&&ue!==(ue=e[8].method+"")&&(0,i.rT)(N,ue),(!ne||2&s)&&de!==(de=e[8].requestType+"")&&(0,i.rT)(B,de),null!==e[8].requestHeader?fe?(fe.p(e,s),2&s&&(0,i.Ui)(fe,1)):((fe=nn(e)).c(),(0,i.Ui)(fe,1),fe.m(p,F)):fe&&((0,i.dv)(),(0,i.et)(fe,1,1,(function(){fe=null})),(0,i.gb)()),null!==e[8].getData?ge?(ge.p(e,s),2&s&&(0,i.Ui)(ge,1)):((ge=on(e)).c(),(0,i.Ui)(ge,1),ge.m(p,V)):ge&&((0,i.dv)(),(0,i.et)(ge,1,1,(function(){ge=null})),(0,i.gb)()),null!==e[8].postData?me?(me.p(e,s),2&s&&(0,i.Ui)(me,1)):((me=an(e)).c(),(0,i.Ui)(me,1),me.m(p,j)):me&&((0,i.dv)(),(0,i.et)(me,1,1,(function(){me=null})),(0,i.gb)()),null!==e[8].header?_e?(_e.p(e,s),2&s&&(0,i.Ui)(_e,1)):((_e=dn(e)).c(),(0,i.Ui)(_e,1),_e.m(p,G)):_e&&((0,i.dv)(),(0,i.et)(_e,1,1,(function(){_e=null})),(0,i.gb)());var u={};2&s&&(u.content=e[8].response),Z.$set(u),(!ne||2&s)&&he!==(he=(e[8].response||"")+"")&&(0,i.rT)(J,he),(!ne||2&s&&ee!==(ee=e[8].id))&&(0,i.Lj)(t,"id",ee),2&s&&(0,i.VH)(t,"vc-actived",e[8].actived)},i:function(e){ne||((0,i.Ui)(E.$$.fragment,e),(0,i.Ui)(fe),(0,i.Ui)(ge),(0,i.Ui)(me),(0,i.Ui)(_e),(0,i.Ui)(Z.$$.fragment,e),ne=!0)},o:function(e){(0,i.et)(E.$$.fragment,e),(0,i.et)(fe),(0,i.et)(ge),(0,i.et)(me),(0,i.et)(_e),(0,i.et)(Z.$$.fragment,e),ne=!1},d:function(e){e&&(0,i.og)(t),(0,i.vp)(E),fe&&fe.d(),ge&&ge.d(),me&&me.d(),_e&&_e.d(),(0,i.vp)(Z),re=!1,ie()}}}function fn(e){for(var t,n,r,o,s,a,c,l,u,d,h=e[0]>0&&tn(e),p=Object.entries(e[1]),f=[],g=0;g<p.length;g+=1)f[g]=pn(Kt(e,p,g));var m=function(e){return(0,i.et)(f[e],1,1,(function(){f[e]=null}))};return{c:function(){t=(0,i.bG)("div"),n=(0,i.bG)("dl"),r=(0,i.bG)("dd"),o=(0,i.fL)("Name "),h&&h.c(),(s=(0,i.bG)("dd")).textContent="Method",(a=(0,i.bG)("dd")).textContent="Status",(c=(0,i.bG)("dd")).textContent="Time",l=(0,i.Dh)(),u=(0,i.bG)("div");for(var e=0;e<f.length;e+=1)f[e].c();(0,i.Lj)(r,"class","vc-table-col vc-table-col-4"),(0,i.Lj)(s,"class","vc-table-col"),(0,i.Lj)(a,"class","vc-table-col"),(0,i.Lj)(c,"class","vc-table-col"),(0,i.Lj)(n,"class","vc-table-row"),(0,i.Lj)(u,"class","vc-plugin-content"),(0,i.Lj)(t,"class","vc-table")},m:function(e,p){(0,i.$T)(e,t,p),(0,i.R3)(t,n),(0,i.R3)(n,r),(0,i.R3)(r,o),h&&h.m(r,null),(0,i.R3)(n,s),(0,i.R3)(n,a),(0,i.R3)(n,c),(0,i.R3)(t,l),(0,i.R3)(t,u);for(var g=0;g<f.length;g+=1)f[g].m(u,null);d=!0},p:function(e,t){var n=t[0];if(e[0]>0?h?h.p(e,n):((h=tn(e)).c(),h.m(r,null)):h&&(h.d(1),h=null),14&n){var o;for(p=Object.entries(e[1]),o=0;o<p.length;o+=1){var s=Kt(e,p,o);f[o]?(f[o].p(s,n),(0,i.Ui)(f[o],1)):(f[o]=pn(s),f[o].c(),(0,i.Ui)(f[o],1),f[o].m(u,null))}for((0,i.dv)(),o=p.length;o<f.length;o+=1)m(o);(0,i.gb)()}},i:function(e){if(!d){for(var t=0;t<p.length;t+=1)(0,i.Ui)(f[t]);d=!0}},o:function(e){f=f.filter(Boolean);for(var t=0;t<f.length;t+=1)(0,i.et)(f[t]);d=!1},d:function(e){e&&(0,i.og)(t),h&&h.d(),(0,i.RM)(f,e)}}}function gn(e,n,r){var s;(0,i.FI)(e,Gt,(function(e){return r(1,s=e)}));var a=0,c=function(e){r(0,a=Object.keys(e).length)},l=Gt.subscribe(c);c(s);var u=function(e){(0,i.fx)(Gt,s[e].actived=!s[e].actived,s)};return(0,o.H3)((function(){Zt.use()})),(0,o.ev)((function(){l(),Zt.unuse()})),[a,s,u,function(e){return t.Kn(e)||t.kJ(e)?t.hZ(e,{maxDepth:10,keyMaxLen:1e4,pretty:!0}):e},function(e){return u(e.id)}]}var mn=function(e){var t,n;function r(t){var n;return n=e.call(this)||this,(0,i.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t,gn,fn,i.N8,{}),n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,$t(t,n),r}(i.f_);function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vn=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).model=Ht.getSingleton(Ht,"VConsoleNetworkModel"),t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,_n(t,n);var i=r.prototype;return i.add=function(e){var t=new xt(new Mt);for(var n in e)t[n]=e[n];return t.startTime=t.startTime||Date.now(),t.requestType=t.requestType||"custom",this.model.updateRequest(t.id,t),t},i.update=function(e,t){this.model.updateRequest(e,t)},i.clear=function(){this.model.clearLog()},r}(yt);function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var An,yn=function(e){var t,n;function r(t,n,r){var i;return void 0===r&&(r={}),(i=e.call(this,t,n,mn,r)||this).model=Ht.getSingleton(Ht,"VConsoleNetworkModel"),i.exporter=void 0,i.exporter=new vn(t),i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,En(t,n);var i=r.prototype;return i.onReady=function(){e.prototype.onReady.call(this),this.onUpdateOption()},i.onAddTool=function(e){var t=this;e([{name:"Clear",global:!1,onClick:function(e){t.model.clearLog()}}])},i.onRemove=function(){e.prototype.onRemove.call(this),this.model&&this.model.unMock()},i.onUpdateOption=function(){this.vConsole.option.maxNetworkNumber!==this.model.maxNetworkNumber&&(this.model.maxNetworkNumber=Number(this.vConsole.option.maxNetworkNumber)||1e3)},r}(q),Sn=__webpack_require__(8679),bn=__webpack_require__.n(Sn),Cn=(0,Ot.fZ)(),Tn=(0,Ot.fZ)(),In=__webpack_require__(5670),Rn=0,wn={injectType:"lazyStyleTag",insert:"head",singleton:!1},kn={};kn.locals=In.Z.locals||{},kn.use=function(){return Rn++||(An=a()(In.Z,wn)),kn},kn.unuse=function(){Rn>0&&!--Rn&&(An(),An=null)};var On=kn;function Nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ln(e,t){return(Ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pn(e,t,n){var r=e.slice();return r[8]=t[n],r}function Dn(e,t,n){var r=e.slice();return r[11]=t[n],r}function Mn(e){var t,n,r,o=e[0].nodeType===Node.ELEMENT_NODE&&xn(e),s=e[0].nodeType===Node.TEXT_NODE&&zn(e);return{c:function(){t=(0,i.bG)("div"),o&&o.c(),n=(0,i.Dh)(),s&&s.c(),(0,i.Lj)(t,"class","vcelm-l"),(0,i.VH)(t,"vc-actived",e[0]._isActived),(0,i.VH)(t,"vc-toggle",e[0]._isExpand),(0,i.VH)(t,"vcelm-noc",e[0]._isSingleLine)},m:function(e,a){(0,i.$T)(e,t,a),o&&o.m(t,null),(0,i.R3)(t,n),s&&s.m(t,null),r=!0},p:function(e,r){e[0].nodeType===Node.ELEMENT_NODE?o?(o.p(e,r),1&r&&(0,i.Ui)(o,1)):((o=xn(e)).c(),(0,i.Ui)(o,1),o.m(t,n)):o&&((0,i.dv)(),(0,i.et)(o,1,1,(function(){o=null})),(0,i.gb)()),e[0].nodeType===Node.TEXT_NODE?s?s.p(e,r):((s=zn(e)).c(),s.m(t,null)):s&&(s.d(1),s=null),1&r&&(0,i.VH)(t,"vc-actived",e[0]._isActived),1&r&&(0,i.VH)(t,"vc-toggle",e[0]._isExpand),1&r&&(0,i.VH)(t,"vcelm-noc",e[0]._isSingleLine)},i:function(e){r||((0,i.Ui)(o),r=!0)},o:function(e){(0,i.et)(o),r=!1},d:function(e){e&&(0,i.og)(t),o&&o.d(),s&&s.d()}}}function xn(e){var t,n,r,o,s,a,c,l,u,d,h=e[0].nodeName+"",p=(e[0].className||e[0].attributes.length)&&Bn(e),f=e[0]._isNullEndTag&&jn(e),g=e[0].childNodes.length>0&&Gn(e),m=!e[0]._isNullEndTag&&qn(e);return{c:function(){t=(0,i.bG)("span"),n=(0,i.fL)("<"),r=(0,i.fL)(h),p&&p.c(),o=(0,i.cS)(),f&&f.c(),s=(0,i.fL)(">"),g&&g.c(),a=(0,i.cS)(),m&&m.c(),c=(0,i.cS)(),(0,i.Lj)(t,"class","vcelm-node")},m:function(h,_){(0,i.$T)(h,t,_),(0,i.R3)(t,n),(0,i.R3)(t,r),p&&p.m(t,null),(0,i.R3)(t,o),f&&f.m(t,null),(0,i.R3)(t,s),g&&g.m(h,_),(0,i.$T)(h,a,_),m&&m.m(h,_),(0,i.$T)(h,c,_),l=!0,u||(d=(0,i.oL)(t,"click",e[2]),u=!0)},p:function(e,n){(!l||1&n)&&h!==(h=e[0].nodeName+"")&&(0,i.rT)(r,h),e[0].className||e[0].attributes.length?p?p.p(e,n):((p=Bn(e)).c(),p.m(t,o)):p&&(p.d(1),p=null),e[0]._isNullEndTag?f||((f=jn(e)).c(),f.m(t,s)):f&&(f.d(1),f=null),e[0].childNodes.length>0?g?(g.p(e,n),1&n&&(0,i.Ui)(g,1)):((g=Gn(e)).c(),(0,i.Ui)(g,1),g.m(a.parentNode,a)):g&&((0,i.dv)(),(0,i.et)(g,1,1,(function(){g=null})),(0,i.gb)()),e[0]._isNullEndTag?m&&(m.d(1),m=null):m?m.p(e,n):((m=qn(e)).c(),m.m(c.parentNode,c))},i:function(e){l||((0,i.Ui)(g),l=!0)},o:function(e){(0,i.et)(g),l=!1},d:function(e){e&&(0,i.og)(t),p&&p.d(),f&&f.d(),g&&g.d(e),e&&(0,i.og)(a),m&&m.d(e),e&&(0,i.og)(c),u=!1,d()}}}function Bn(e){for(var t,n=e[0].attributes,r=[],o=0;o<n.length;o+=1)r[o]=Vn(Dn(e,n,o));return{c:function(){t=(0,i.bG)("i");for(var e=0;e<r.length;e+=1)r[e].c();(0,i.Lj)(t,"class","vcelm-k")},m:function(e,n){(0,i.$T)(e,t,n);for(var o=0;o<r.length;o+=1)r[o].m(t,null)},p:function(e,i){if(1&i){var o;for(n=e[0].attributes,o=0;o<n.length;o+=1){var s=Dn(e,n,o);r[o]?r[o].p(s,i):(r[o]=Vn(s),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d:function(e){e&&(0,i.og)(t),(0,i.RM)(r,e)}}}function Un(e){var t,n=e[11].name+"";return{c:function(){t=(0,i.fL)(n)},m:function(e,n){(0,i.$T)(e,t,n)},p:function(e,r){1&r&&n!==(n=e[11].name+"")&&(0,i.rT)(t,n)},d:function(e){e&&(0,i.og)(t)}}}function Fn(e){var t,n,r,o,s,a=e[11].name+"",c=e[11].value+"";return{c:function(){t=(0,i.fL)(a),n=(0,i.fL)('="'),r=(0,i.bG)("i"),o=(0,i.fL)(c),s=(0,i.fL)('"'),(0,i.Lj)(r,"class","vcelm-v")},m:function(e,a){(0,i.$T)(e,t,a),(0,i.$T)(e,n,a),(0,i.$T)(e,r,a),(0,i.R3)(r,o),(0,i.$T)(e,s,a)},p:function(e,n){1&n&&a!==(a=e[11].name+"")&&(0,i.rT)(t,a),1&n&&c!==(c=e[11].value+"")&&(0,i.rT)(o,c)},d:function(e){e&&(0,i.og)(t),e&&(0,i.og)(n),e&&(0,i.og)(r),e&&(0,i.og)(s)}}}function Vn(e){var t,n;function r(e,t){return""!==e[11].value?Fn:Un}var o=r(e),s=o(e);return{c:function(){t=(0,i.fL)(" \n            "),s.c(),n=(0,i.cS)()},m:function(e,r){(0,i.$T)(e,t,r),s.m(e,r),(0,i.$T)(e,n,r)},p:function(e,t){o===(o=r(e))&&s?s.p(e,t):(s.d(1),(s=o(e))&&(s.c(),s.m(n.parentNode,n)))},d:function(e){e&&(0,i.og)(t),s.d(e),e&&(0,i.og)(n)}}}function jn(e){var t;return{c:function(){t=(0,i.fL)("/")},m:function(e,n){(0,i.$T)(e,t,n)},d:function(e){e&&(0,i.og)(t)}}}function Gn(e){var t,n,r,o,s=[Qn,Hn],a=[];function c(e,t){return e[0]._isExpand?1:0}return t=c(e),n=a[t]=s[t](e),{c:function(){n.c(),r=(0,i.cS)()},m:function(e,n){a[t].m(e,n),(0,i.$T)(e,r,n),o=!0},p:function(e,o){var l=t;(t=c(e))===l?a[t].p(e,o):((0,i.dv)(),(0,i.et)(a[l],1,1,(function(){a[l]=null})),(0,i.gb)(),(n=a[t])?n.p(e,o):(n=a[t]=s[t](e)).c(),(0,i.Ui)(n,1),n.m(r.parentNode,r))},i:function(e){o||((0,i.Ui)(n),o=!0)},o:function(e){(0,i.et)(n),o=!1},d:function(e){a[t].d(e),e&&(0,i.og)(r)}}}function Hn(e){for(var t,n,r=e[0].childNodes,o=[],s=0;s<r.length;s+=1)o[s]=Wn(Pn(e,r,s));var a=function(e){return(0,i.et)(o[e],1,1,(function(){o[e]=null}))};return{c:function(){for(var e=0;e<o.length;e+=1)o[e].c();t=(0,i.cS)()},m:function(e,r){for(var s=0;s<o.length;s+=1)o[s].m(e,r);(0,i.$T)(e,t,r),n=!0},p:function(e,n){if(1&n){var s;for(r=e[0].childNodes,s=0;s<r.length;s+=1){var c=Pn(e,r,s);o[s]?(o[s].p(c,n),(0,i.Ui)(o[s],1)):(o[s]=Wn(c),o[s].c(),(0,i.Ui)(o[s],1),o[s].m(t.parentNode,t))}for((0,i.dv)(),s=r.length;s<o.length;s+=1)a(s);(0,i.gb)()}},i:function(e){if(!n){for(var t=0;t<r.length;t+=1)(0,i.Ui)(o[t]);n=!0}},o:function(e){o=o.filter(Boolean);for(var t=0;t<o.length;t+=1)(0,i.et)(o[t]);n=!1},d:function(e){(0,i.RM)(o,e),e&&(0,i.og)(t)}}}function Qn(e){var t;return{c:function(){t=(0,i.fL)("...")},m:function(e,n){(0,i.$T)(e,t,n)},p:i.ZT,i:i.ZT,o:i.ZT,d:function(e){e&&(0,i.og)(t)}}}function Wn(e){var t,n,r;return(t=new Kn({props:{node:e[8]}})).$on("toggleNode",e[4]),{c:function(){(0,i.YC)(t.$$.fragment),n=(0,i.Dh)()},m:function(e,o){(0,i.ye)(t,e,o),(0,i.$T)(e,n,o),r=!0},p:function(e,n){var r={};1&n&&(r.node=e[8]),t.$set(r)},i:function(e){r||((0,i.Ui)(t.$$.fragment,e),r=!0)},o:function(e){(0,i.et)(t.$$.fragment,e),r=!1},d:function(e){(0,i.vp)(t,e),e&&(0,i.og)(n)}}}function qn(e){var t,n,r,o,s=e[0].nodeName+"";return{c:function(){t=(0,i.bG)("span"),n=(0,i.fL)("</"),r=(0,i.fL)(s),o=(0,i.fL)(">"),(0,i.Lj)(t,"class","vcelm-node")},m:function(e,s){(0,i.$T)(e,t,s),(0,i.R3)(t,n),(0,i.R3)(t,r),(0,i.R3)(t,o)},p:function(e,t){1&t&&s!==(s=e[0].nodeName+"")&&(0,i.rT)(r,s)},d:function(e){e&&(0,i.og)(t)}}}function zn(e){var t,n,r=e[1](e[0].textContent)+"";return{c:function(){t=(0,i.bG)("span"),n=(0,i.fL)(r),(0,i.Lj)(t,"class","vcelm-t vcelm-noc")},m:function(e,r){(0,i.$T)(e,t,r),(0,i.R3)(t,n)},p:function(e,t){1&t&&r!==(r=e[1](e[0].textContent)+"")&&(0,i.rT)(n,r)},d:function(e){e&&(0,i.og)(t)}}}function Zn(e){var t,n,r=e[0]&&Mn(e);return{c:function(){r&&r.c(),t=(0,i.cS)()},m:function(e,o){r&&r.m(e,o),(0,i.$T)(e,t,o),n=!0},p:function(e,n){var o=n[0];e[0]?r?(r.p(e,o),1&o&&(0,i.Ui)(r,1)):((r=Mn(e)).c(),(0,i.Ui)(r,1),r.m(t.parentNode,t)):r&&((0,i.dv)(),(0,i.et)(r,1,1,(function(){r=null})),(0,i.gb)())},i:function(e){n||((0,i.Ui)(r),n=!0)},o:function(e){(0,i.et)(r),n=!1},d:function(e){r&&r.d(e),e&&(0,i.og)(t)}}}function $n(e,t,n){var r;(0,i.FI)(e,Tn,(function(e){return n(3,r=e)}));var s=t.node,a=(0,o.x)(),c=["br","hr","img","input","link","meta"];return(0,o.H3)((function(){On.use()})),(0,o.ev)((function(){On.unuse()})),e.$$set=function(e){"node"in e&&n(0,s=e.node)},e.$$.update=function(){9&e.$$.dirty&&s&&(n(0,s._isActived=s===r,s),n(0,s._isNullEndTag=function(e){return c.indexOf(e.nodeName)>-1}(s),s),n(0,s._isSingleLine=0===s.childNodes.length||s._isNullEndTag,s))},[s,function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},function(){s._isNullEndTag||(n(0,s._isExpand=!s._isExpand,s),a("toggleNode",{node:s}))},r,function(t){i.cK.call(this,e,t)}]}var Kn=function(e){var t,n,r,o,s;function a(t){var n;return n=e.call(this)||this,(0,i.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t,$n,Zn,i.N8,{node:0}),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Ln(t,n),r=a,(o=[{key:"node",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({node:e}),(0,i.yl)()}}])&&Nn(r.prototype,o),s&&Nn(r,s),a}(i.f_),Yn=Kn;function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xn(e){var t,n,r;return(n=new Yn({props:{node:e[0]}})).$on("toggleNode",e[1]),{c:function(){t=(0,i.bG)("div"),(0,i.YC)(n.$$.fragment),(0,i.Lj)(t,"class","vc-plugin-content")},m:function(e,o){(0,i.$T)(e,t,o),(0,i.ye)(n,t,null),r=!0},p:function(e,t){var r={};1&t[0]&&(r.node=e[0]),n.$set(r)},i:function(e){r||((0,i.Ui)(n.$$.fragment,e),r=!0)},o:function(e){(0,i.et)(n.$$.fragment,e),r=!1},d:function(e){e&&(0,i.og)(t),(0,i.vp)(n)}}}function er(e,t,n){var r;return(0,i.FI)(e,Cn,(function(e){return n(0,r=e)})),[r,function(t){i.cK.call(this,e,t)}]}var tr=function(e){var t,n;function r(t){var n;return n=e.call(this)||this,(0,i.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t,er,Xn,i.N8,{}),n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Jn(t,n),r}(i.f_);function nr(e,t){return(nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rr=function(e){var t,n;function r(t,n,r){var i;return void 0===r&&(r={}),(i=e.call(this,t,n,tr,r)||this).isInited=!1,i.observer=void 0,i.nodeMap=void 0,i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,nr(t,n);var i=r.prototype;return i.onShow=function(){this.isInited||this._init()},i.onRemove=function(){e.prototype.onRemove.call(this),this.isInited&&(this.observer.disconnect(),this.isInited=!1,this.nodeMap=void 0,Cn.set(void 0))},i.onAddTool=function(e){var t=this;e([{name:"Expand",global:!1,onClick:function(e){t._expandActivedNode()}},{name:"Collapse",global:!1,onClick:function(e){t._collapseActivedNode()}}])},i._init=function(){var e=this;this.isInited=!0,this.nodeMap=new WeakMap;var t=this._generateVNode(document.documentElement);t._isExpand=!0,Tn.set(t),Cn.set(t),this.compInstance.$on("toggleNode",(function(e){Tn.set(e.detail.node)})),this.observer=new(bn())((function(t){for(var n=0;n<t.length;n++){var r=t[n];e._isInVConsole(r.target)||e._handleMutation(r)}})),this.observer.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},i._handleMutation=function(e){switch(e.type){case"childList":e.removedNodes.length>0&&this._onChildRemove(e),e.addedNodes.length>0&&this._onChildAdd(e);break;case"attributes":this._onAttributesChange(e);break;case"characterData":this._onCharacterDataChange(e)}},i._onChildRemove=function(e){var t=this.nodeMap.get(e.target);if(t){for(var n=0;n<e.removedNodes.length;n++){var r=this.nodeMap.get(e.removedNodes[n]);if(r){for(var i=0;i<t.childNodes.length;i++)if(t.childNodes[i]===r){t.childNodes.splice(i,1);break}this.nodeMap.delete(e.removedNodes[n])}}this._refreshStore()}},i._onChildAdd=function(e){var t=this.nodeMap.get(e.target);if(t){for(var n=0;n<e.addedNodes.length;n++){var r=e.addedNodes[n],i=this._generateVNode(r);if(i){var o=void 0,s=r;do{if(null===s.nextSibling)break;s.nodeType===Node.ELEMENT_NODE&&(o=this.nodeMap.get(s.nextSibling)||void 0),s=s.nextSibling}while(void 0===o);if(void 0===o)t.childNodes.push(i);else for(var a=0;a<t.childNodes.length;a++)if(t.childNodes[a]===o){t.childNodes.splice(a,0,i);break}}}this._refreshStore()}},i._onAttributesChange=function(e){this._updateVNodeAttributes(e.target),this._refreshStore()},i._onCharacterDataChange=function(e){this.nodeMap.get(e.target).textContent=e.target.textContent,this._refreshStore()},i._generateVNode=function(e){if(!this._isIgnoredNode(e)){var t={nodeType:e.nodeType,nodeName:e.nodeName.toLowerCase(),textContent:"",id:"",className:"",attributes:[],childNodes:[]};if(this.nodeMap.set(e,t),t.nodeType!=e.TEXT_NODE&&t.nodeType!=e.DOCUMENT_TYPE_NODE||(t.textContent=e.textContent),e.childNodes.length>0){t.childNodes=[];for(var n=0;n<e.childNodes.length;n++){var r=this._generateVNode(e.childNodes[n]);r&&t.childNodes.push(r)}}return this._updateVNodeAttributes(e),t}},i._updateVNodeAttributes=function(e){var t=this.nodeMap.get(e);if(e instanceof Element&&(t.id=e.id||"",t.className=e.className||"",e.hasAttributes&&e.hasAttributes())){t.attributes=[];for(var n=0;n<e.attributes.length;n++)t.attributes.push({name:e.attributes[n].name,value:e.attributes[n].value||""})}},i._expandActivedNode=function(){var e=(0,Ot.U2)(Tn);if(e._isExpand)for(var t=0;t<e.childNodes.length;t++)e.childNodes[t]._isExpand=!0;else e._isExpand=!0;this._refreshStore()},i._collapseActivedNode=function(){var e=(0,Ot.U2)(Tn);if(e._isExpand){for(var t=!1,n=0;n<e.childNodes.length;n++)e.childNodes[n]._isExpand&&(t=!0,e.childNodes[n]._isExpand=!1);t||(e._isExpand=!1),this._refreshStore()}},i._isIgnoredNode=function(e){if(e.nodeType===e.TEXT_NODE){if(""===e.textContent.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$|\n+/g,""))return!0}else if(e.nodeType===e.COMMENT_NODE)return!0;return!1},i._isInVConsole=function(e){for(var t=e;void 0!==t;){if("__vconsole"==t.id)return!0;t=t.parentElement||void 0}return!1},i._refreshStore=function(){Cn.update((function(e){return e}))},r}(q);function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){sr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ar(e,t){return(ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cr=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,ar(t,n);var i=r.prototype;return i.removeItem=function(t,n){for(var r,i,o=["","/"],s=(null==(r=location)||null==(i=r.hostname)?void 0:i.split("."))||[];s.length>1;)o.push(s.join(".")),s.shift();for(var a=0;a<o.length;a++)for(var c,l,u=(null==(c=location)||null==(l=c.pathname)?void 0:l.split("/"))||[],d="";u.length>0;){d+=("/"===d?"":"/")+u.shift();var h=or(or({},n),{},{path:d,domain:o[a]});e.prototype.removeItem.call(this,t,h)}},i.clear=function(){for(var e=Object.keys(this),t=0;t<e.length;t++)this.removeItem(e[t])},r}(__webpack_require__(6025).eR);function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ur=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).cookiesStorage=new cr,t.storages=void 0,t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,lr(t,n),r.prototype.getAllStorages=function(){return this.storages||(this.storages=[],void 0!==document.cookie&&this.storages.push({name:"cookies",storage:this.cookiesStorage}),window.localStorage&&this.storages.push({name:"localStorage",storage:localStorage}),window.sessionStorage&&this.storages.push({name:"sessionStorage",storage:sessionStorage})),this.storages},r}(Nt.N);function dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hr(e,t){return(hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pr(e,t,n){var r=e.slice();return r[15]=t[n].name,r[16]=t[n].storage,r}function fr(e,t,n){var r=e.slice();return r[19]=t[n][0],r[20]=t[n][1],r[22]=n,r}function gr(e){for(var t,n,r=Object.entries(e[16]),o=[],s=0;s<r.length;s+=1)o[s]=yr(fr(e,r,s));var a=function(e){return(0,i.et)(o[e],1,1,(function(){o[e]=null}))},c=null;return r.length||(c=mr(e)),{c:function(){for(var e=0;e<o.length;e+=1)o[e].c();t=(0,i.cS)(),c&&c.c()},m:function(e,r){for(var s=0;s<o.length;s+=1)o[s].m(e,r);(0,i.$T)(e,t,r),c&&c.m(e,r),n=!0},p:function(e,n){if(509&n){var s;for(r=Object.entries(e[16]),s=0;s<r.length;s+=1){var l=fr(e,r,s);o[s]?(o[s].p(l,n),(0,i.Ui)(o[s],1)):(o[s]=yr(l),o[s].c(),(0,i.Ui)(o[s],1),o[s].m(t.parentNode,t))}for((0,i.dv)(),s=r.length;s<o.length;s+=1)a(s);(0,i.gb)(),r.length?c&&(c.d(1),c=null):c||((c=mr(e)).c(),c.m(t.parentNode,t))}},i:function(e){if(!n){for(var t=0;t<r.length;t+=1)(0,i.Ui)(o[t]);n=!0}},o:function(e){o=o.filter(Boolean);for(var t=0;t<o.length;t+=1)(0,i.et)(o[t]);n=!1},d:function(e){(0,i.RM)(o,e),e&&(0,i.og)(t),c&&c.d(e)}}}function mr(e){var t;return{c:function(){t=(0,i.bG)("div"),(0,i.Lj)(t,"class","vc-plugin-empty")},m:function(e,n){(0,i.$T)(e,t,n)},d:function(e){e&&(0,i.og)(t)}}}function _r(e){var t,n,r,o,s,a=e[19]+"",c=e[8](e[20])+"";return{c:function(){t=(0,i.bG)("div"),n=(0,i.fL)(a),r=(0,i.Dh)(),o=(0,i.bG)("div"),s=(0,i.fL)(c),(0,i.Lj)(t,"class","vc-table-col"),(0,i.Lj)(o,"class","vc-table-col vc-table-col-2")},m:function(e,a){(0,i.$T)(e,t,a),(0,i.R3)(t,n),(0,i.$T)(e,r,a),(0,i.$T)(e,o,a),(0,i.R3)(o,s)},p:function(e,t){1&t&&a!==(a=e[19]+"")&&(0,i.rT)(n,a),1&t&&c!==(c=e[8](e[20])+"")&&(0,i.rT)(s,c)},d:function(e){e&&(0,i.og)(t),e&&(0,i.og)(r),e&&(0,i.og)(o)}}}function vr(e){var t,n,r,o,s,a,c;return{c:function(){t=(0,i.bG)("div"),n=(0,i.bG)("textarea"),r=(0,i.Dh)(),o=(0,i.bG)("div"),s=(0,i.bG)("textarea"),(0,i.Lj)(n,"class","vc-table-input"),(0,i.Lj)(t,"class","vc-table-col"),(0,i.Lj)(s,"class","vc-table-input"),(0,i.Lj)(o,"class","vc-table-col vc-table-col-2")},m:function(l,u){(0,i.$T)(l,t,u),(0,i.R3)(t,n),(0,i.Bm)(n,e[3]),(0,i.$T)(l,r,u),(0,i.$T)(l,o,u),(0,i.R3)(o,s),(0,i.Bm)(s,e[4]),a||(c=[(0,i.oL)(n,"input",e[9]),(0,i.oL)(s,"input",e[10])],a=!0)},p:function(e,t){8&t&&(0,i.Bm)(n,e[3]),16&t&&(0,i.Bm)(s,e[4])},d:function(e){e&&(0,i.og)(t),e&&(0,i.og)(r),e&&(0,i.og)(o),a=!1,(0,i.j7)(c)}}}function Er(e){var t,n,r,o,s,a;return(t=new $.Z({props:{name:"delete"}})).$on("click",(function(){return e[12](e[16],e[22])})),r=new te({props:{content:[e[19],e[20]].join("=")}}),(s=new $.Z({props:{name:"edit"}})).$on("click",(function(){return e[13](e[16],e[19],e[20],e[22])})),{c:function(){(0,i.YC)(t.$$.fragment),n=(0,i.Dh)(),(0,i.YC)(r.$$.fragment),o=(0,i.Dh)(),(0,i.YC)(s.$$.fragment)},m:function(e,c){(0,i.ye)(t,e,c),(0,i.$T)(e,n,c),(0,i.ye)(r,e,c),(0,i.$T)(e,o,c),(0,i.ye)(s,e,c),a=!0},p:function(t,n){e=t;var i={};1&n&&(i.content=[e[19],e[20]].join("=")),r.$set(i)},i:function(e){a||((0,i.Ui)(t.$$.fragment,e),(0,i.Ui)(r.$$.fragment,e),(0,i.Ui)(s.$$.fragment,e),a=!0)},o:function(e){(0,i.et)(t.$$.fragment,e),(0,i.et)(r.$$.fragment,e),(0,i.et)(s.$$.fragment,e),a=!1},d:function(e){(0,i.vp)(t,e),e&&(0,i.og)(n),(0,i.vp)(r,e),e&&(0,i.og)(o),(0,i.vp)(s,e)}}}function Ar(e){var t,n,r,o;return(t=new $.Z({props:{name:"cancel"}})).$on("click",e[7]),(r=new $.Z({props:{name:"done"}})).$on("click",(function(){return e[11](e[16],e[19],e[20],e[22])})),{c:function(){(0,i.YC)(t.$$.fragment),n=(0,i.Dh)(),(0,i.YC)(r.$$.fragment)},m:function(e,s){(0,i.ye)(t,e,s),(0,i.$T)(e,n,s),(0,i.ye)(r,e,s),o=!0},p:function(t,n){e=t},i:function(e){o||((0,i.Ui)(t.$$.fragment,e),(0,i.Ui)(r.$$.fragment,e),o=!0)},o:function(e){(0,i.et)(t.$$.fragment,e),(0,i.et)(r.$$.fragment,e),o=!1},d:function(e){(0,i.vp)(t,e),e&&(0,i.og)(n),(0,i.vp)(r,e)}}}function yr(e){var t,n,r,o,s,a,c;function l(e,t){return e[2]===e[22]?vr:_r}var u=l(e),d=u(e),h=[Ar,Er],p=[];function f(e,t){return e[2]===e[22]?0:1}return o=f(e),s=p[o]=h[o](e),{c:function(){t=(0,i.bG)("div"),d.c(),n=(0,i.Dh)(),r=(0,i.bG)("div"),s.c(),a=(0,i.Dh)(),(0,i.Lj)(r,"class","vc-table-col vc-table-col-1 vc-table-action"),(0,i.Lj)(t,"class","vc-table-row")},m:function(e,s){(0,i.$T)(e,t,s),d.m(t,null),(0,i.R3)(t,n),(0,i.R3)(t,r),p[o].m(r,null),(0,i.R3)(t,a),c=!0},p:function(e,a){u===(u=l(e))&&d?d.p(e,a):(d.d(1),(d=u(e))&&(d.c(),d.m(t,n)));var c=o;(o=f(e))===c?p[o].p(e,a):((0,i.dv)(),(0,i.et)(p[c],1,1,(function(){p[c]=null})),(0,i.gb)(),(s=p[o])?s.p(e,a):(s=p[o]=h[o](e)).c(),(0,i.Ui)(s,1),s.m(r,null))},i:function(e){c||((0,i.Ui)(s),c=!0)},o:function(e){(0,i.et)(s),c=!1},d:function(e){e&&(0,i.og)(t),d.d(),p[o].d()}}}function Sr(e){var t,n,r=e[15]===e[1]&&gr(e);return{c:function(){r&&r.c(),t=(0,i.cS)()},m:function(e,o){r&&r.m(e,o),(0,i.$T)(e,t,o),n=!0},p:function(e,n){e[15]===e[1]?r?(r.p(e,n),3&n&&(0,i.Ui)(r,1)):((r=gr(e)).c(),(0,i.Ui)(r,1),r.m(t.parentNode,t)):r&&((0,i.dv)(),(0,i.et)(r,1,1,(function(){r=null})),(0,i.gb)())},i:function(e){n||((0,i.Ui)(r),n=!0)},o:function(e){(0,i.et)(r),n=!1},d:function(e){r&&r.d(e),e&&(0,i.og)(t)}}}function br(e){for(var t,n,r,o,s=e[0],a=[],c=0;c<s.length;c+=1)a[c]=Sr(pr(e,s,c));var l=function(e){return(0,i.et)(a[e],1,1,(function(){a[e]=null}))};return{c:function(){t=(0,i.bG)("div"),(n=(0,i.bG)("div")).innerHTML='<div class="vc-table-col">Key</div> \n    <div class="vc-table-col vc-table-col-2">Value</div> \n    <div class="vc-table-col vc-table-col-1 vc-table-action"></div>',r=(0,i.Dh)();for(var e=0;e<a.length;e+=1)a[e].c();(0,i.Lj)(n,"class","vc-table-row"),(0,i.Lj)(t,"class","vc-table")},m:function(e,s){(0,i.$T)(e,t,s),(0,i.R3)(t,n),(0,i.R3)(t,r);for(var c=0;c<a.length;c+=1)a[c].m(t,null);o=!0},p:function(e,n){var r=n[0];if(511&r){var o;for(s=e[0],o=0;o<s.length;o+=1){var c=pr(e,s,o);a[o]?(a[o].p(c,r),(0,i.Ui)(a[o],1)):(a[o]=Sr(c),a[o].c(),(0,i.Ui)(a[o],1),a[o].m(t,null))}for((0,i.dv)(),o=s.length;o<a.length;o+=1)l(o);(0,i.gb)()}},i:function(e){if(!o){for(var t=0;t<s.length;t+=1)(0,i.Ui)(a[t]);o=!0}},o:function(e){a=a.filter(Boolean);for(var t=0;t<a.length;t+=1)(0,i.et)(a[t]);o=!1},d:function(e){e&&(0,i.og)(t),(0,i.RM)(a,e)}}}function Cr(e,n,r){var i=n.storages,o=void 0===i?[]:i,s=n.activedName,a=void 0===s?"":s,c=-1,l="",u="",d=function(){r(0,o),r(2,c=-1)},h=function(e,t){var n;e.removeItem(null!==(n=e.key(t))&&void 0!==n?n:""),d()},p=function(e,t,n,i){c===i?(l!==t&&e.removeItem(t),e.setItem(l,u),r(2,c=-1),d()):(r(3,l=t),r(4,u=n),r(2,c=i))};return e.$$set=function(e){"storages"in e&&r(0,o=e.storages),"activedName"in e&&r(1,a=e.activedName)},[o,a,c,l,u,h,p,function(){r(2,c=-1)},function(e){var n=(0,t.wz)(e);return n>1024?(0,t.Kt)(e,1024)+" ("+(0,t.KL)(n)+")":e},function(){l=this.value,r(3,l)},function(){u=this.value,r(4,u)},function(e,t,n,r){return p(e,t,n,r)},function(e,t){return h(e,t)},function(e,t,n,r){return p(e,t,n,r)}]}var Tr=function(e){var t,n,r,o,s;function a(t){var n;return n=e.call(this)||this,(0,i.S1)(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t,Cr,br,i.N8,{storages:0,activedName:1}),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,hr(t,n),r=a,(o=[{key:"storages",get:function(){return this.$$.ctx[0]},set:function(e){this.$set({storages:e}),(0,i.yl)()}},{key:"activedName",get:function(){return this.$$.ctx[1]},set:function(e){this.$set({activedName:e}),(0,i.yl)()}}])&&dr(r.prototype,o),s&&dr(r,s),a}(i.f_);function Ir(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wr(e,t){return(wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kr=function(e){var t,n;function r(t,n,r){var i;return void 0===r&&(r={}),(i=e.call(this,t,n,Tr,r)||this).model=ur.getSingleton(ur,"VConsoleStorageModel"),i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,wr(t,n);var i=r.prototype;return i.onShow=function(){this.compInstance.storages=this.model.getAllStorages(),this.compInstance.activedName||(this.compInstance.activedName=this.compInstance.storages[0].name)},i.onAddTopBar=function(e){for(var t=this,n=this.model.getAllStorages(),r=[],i=0;i<n.length;i++){var o=n[i].name;r.push({name:o[0].toUpperCase()+o.substring(1),data:{name:o},actived:0===i,onClick:function(e,n){if(n.name===t.compInstance.activedName)return!1;t.compInstance.activedName=n.name}})}r[0].className="vc-actived",e(r)},i.onAddTool=function(e){var t=this;e([{name:"Add",global:!1,onClick:function(){for(var e,n=Ir(t.model.getAllStorages());!(e=n()).done;){var r=e.value;if(r.name===t.compInstance.activedName){r.storage.setItem("new_"+Date.now(),"new_value"),t.compInstance.storages=t.compInstance.storages;break}}}},{name:"Refresh",global:!1,onClick:function(){t.compInstance.storages=t.model.getAllStorages()}},{name:"Clear",global:!1,onClick:function(){for(var e,n=Ir(t.model.getAllStorages());!(e=n()).done;){var r=e.value;if(r.name===t.compInstance.activedName){r.storage.clear(),t.compInstance.storages=t.compInstance.storages;break}}}}])},r}(q),Or="#__vconsole",Nr=function(){function e(e){var n=this;if(this.version="3.11.2",this.isInited=void 0,this.option={},this.compInstance=void 0,this.pluginList={},this.log=void 0,this.system=void 0,this.network=void 0,r.one(Or))console.debug("[vConsole] vConsole is already exists.");else{if(this.isInited=!1,this.option={defaultPlugins:["system","network","element","storage"]},t.Kn(e))for(var i in e)this.option[i]=e[i];this._addBuiltInPlugins();var o,s=function(){n.isInited||(n._initComponent(),n._autoRun())};if(void 0!==document)"loading"===document.readyState?r.bind(window,"DOMContentLoaded",s):s();else o=setTimeout((function e(){document&&"complete"==document.readyState?(o&&clearTimeout(o),s()):o=setTimeout(e,1)}),1)}}var n=e.prototype;return n._addBuiltInPlugins=function(){this.addPlugin(new Rt("default","Log"));var e=this.option.defaultPlugins,n={system:{proto:kt,name:"System"},network:{proto:yn,name:"Network"},element:{proto:rr,name:"Element"},storage:{proto:kr,name:"Storage"}};if(e&&t.kJ(e))for(var r=0;r<e.length;r++){var i=n[e[r]];i?this.addPlugin(new i.proto(e[r],i.name)):console.debug("[vConsole] Unrecognized default plugin ID:",e[r])}},n._initComponent=function(){var e=this;if(!r.one(Or)){var n,i=1*t.cF("switch_x"),o=1*t.cF("switch_y");"string"==typeof this.option.target?n=document.querySelector(this.option.target):this.option.target instanceof HTMLElement&&(n=this.option.target),n instanceof HTMLElement||(n=document.documentElement),this.compInstance=new G({target:n,props:{switchButtonPosition:{x:i,y:o}}}),this.compInstance.$on("show",(function(t){t.detail.show?e.show():e.hide()})),this.compInstance.$on("changePanel",(function(t){var n=t.detail.pluginId;e.showPlugin(n)}))}this._updateComponentByOptions()},n._updateComponentByOptions=function(){if(this.compInstance){if(this.compInstance.theme!==this.option.theme){var e=this.option.theme;e="light"!==e&&"dark"!==e?"":e,this.compInstance.theme=e}this.compInstance.disableScrolling!==this.option.disableLogScrolling&&(this.compInstance.disableScrolling=!!this.option.disableLogScrolling)}},n.setSwitchPosition=function(e,t){this.compInstance.switchButtonPosition={x:e,y:t}},n._autoRun=function(){for(var e in this.isInited=!0,this.pluginList)this._initPlugin(this.pluginList[e]);this._showFirstPluginWhenEmpty(),this.triggerEvent("ready")},n._showFirstPluginWhenEmpty=function(){var e=Object.keys(this.pluginList);""===this.compInstance.activedPluginId&&e.length>0&&this.showPlugin(e[0])},n.triggerEvent=function(e,n){e="on"+e.charAt(0).toUpperCase()+e.slice(1),t.mf(this.option[e])&&this.option[e].apply(this,n)},n._initPlugin=function(e){var n=this;e.vConsole=this,this.compInstance.pluginList[e.id]={id:e.id,name:e.name,hasTabPanel:!1,topbarList:[],toolbarList:[]},this.compInstance.pluginList=this.compInstance.pluginList,e.trigger("init"),e.trigger("renderTab",(function(r){n.compInstance.pluginList[e.id].hasTabPanel=!0,r&&(t.HD(r)?n.compInstance.divContentInner.innerHTML+=r:t.mf(r.appendTo)?r.appendTo(n.compInstance.divContentInner):t.kK(r)&&n.compInstance.divContentInner.insertAdjacentElement("beforeend",r))})),e.trigger("addTopBar",(function(t){if(t)for(var r=0;r<t.length;r++){var i=t[r];n.compInstance.pluginList[e.id].topbarList.push({name:i.name||"Undefined",className:i.className||"",actived:!!i.actived,data:i.data,onClick:i.onClick})}})),e.trigger("addTool",(function(t){if(t)for(var r=0;r<t.length;r++){var i=t[r];n.compInstance.pluginList[e.id].toolbarList.push({name:i.name||"Undefined",global:!!i.global,data:i.data,onClick:i.onClick})}})),e.isReady=!0,e.trigger("ready")},n._triggerPluginsEvent=function(e){for(var t in this.pluginList)this.pluginList[t].isReady&&this.pluginList[t].trigger(e)},n._triggerPluginEvent=function(e,t){var n=this.pluginList[e];n&&n.isReady&&n.trigger(t)},n.addPlugin=function(e){return void 0!==this.pluginList[e.id]?(console.debug("[vConsole] Plugin `"+e.id+"` has already been added."),!1):(this.pluginList[e.id]=e,this.isInited&&(this._initPlugin(e),this._showFirstPluginWhenEmpty()),!0)},n.removePlugin=function(e){e=(e+"").toLowerCase();var t=this.pluginList[e];if(void 0===t)return console.debug("[vConsole] Plugin `"+e+"` does not exist."),!1;t.trigger("remove");try{delete this.pluginList[e],delete this.compInstance.pluginList[e]}catch(t){this.pluginList[e]=void 0,this.compInstance.pluginList[e]=void 0}return this.compInstance.pluginList=this.compInstance.pluginList,this.compInstance.activedPluginId==e&&(this.compInstance.activedPluginId="",this._showFirstPluginWhenEmpty()),!0},n.show=function(){this.isInited&&(this.compInstance.show=!0,this._triggerPluginsEvent("showConsole"))},n.hide=function(){this.isInited&&(this.compInstance.show=!1,this._triggerPluginsEvent("hideConsole"))},n.showSwitch=function(){this.isInited&&(this.compInstance.showSwitchButton=!0)},n.hideSwitch=function(){this.isInited&&(this.compInstance.showSwitchButton=!1)},n.showPlugin=function(e){this.isInited&&(this.pluginList[e]||console.debug("[vConsole] Plugin `"+e+"` does not exist."),this.compInstance.activedPluginId&&this._triggerPluginEvent(this.compInstance.activedPluginId,"hide"),this.compInstance.activedPluginId=e,this._triggerPluginEvent(this.compInstance.activedPluginId,"show"))},n.setOption=function(e,n){if(t.HD(e))this.option[e]=n,this._triggerPluginsEvent("updateOption"),this._updateComponentByOptions();else if(t.Kn(e)){for(var r in e)this.option[r]=e[r];this._triggerPluginsEvent("updateOption"),this._updateComponentByOptions()}else console.debug("[vConsole] The first parameter of `vConsole.setOption()` must be a string or an object.")},n.destroy=function(){if(this.isInited){for(var e=Object.keys(this.pluginList),t=e.length-1;t>=0;t--)this.removePlugin(e[t]);this.compInstance.$destroy(),this.isInited=!1}},e}();Nr.VConsolePlugin=Q,Nr.VConsoleLogPlugin=Tt,Nr.VConsoleDefaultPlugin=Rt,Nr.VConsoleSystemPlugin=kt,Nr.VConsoleNetworkPlugin=yn,Nr.VConsoleElementPlugin=rr,Nr.VConsoleStoragePlugin=kr;var Lr=Nr}(),__webpack_exports__=__webpack_exports__.default,__webpack_exports__}()}))}).call(this,__webpack_require__("c8ba"))},"3a7b":function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").findIndex,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("findIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"3a9b":function(e,t,n){var r=n("e330");e.exports=r({}.isPrototypeOf)},"3bbe":function(e,t,n){var r=n("da84"),i=n("1626"),o=r.String,s=r.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw s("Can't set "+o(e)+" as a prototype")}},"3c5d":function(e,t,n){"use strict";var r=n("da84"),i=n("c65b"),o=n("ebb5"),s=n("07fa"),a=n("182d"),c=n("7b0b"),l=n("d039"),u=r.RangeError,d=r.Int8Array,h=d&&d.prototype,p=h&&h.set,f=o.aTypedArray,g=o.exportTypedArrayMethod,m=!l((function(){var e=new Uint8ClampedArray(2);return i(p,e,{length:1,0:3},1),3!==e[1]})),_=m&&o.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));g("set",(function(e){f(this);var t=a(arguments.length>1?arguments[1]:void 0,1),n=c(e);if(m)return i(p,this,n,t);var r=this.length,o=s(n),l=0;if(o+t>r)throw u("Wrong length");while(l<o)this[t+l]=n[l++]}),!m||_)},"3ca3":function(e,t,n){"use strict";var r=n("6547").charAt,i=n("577e"),o=n("69f3"),s=n("7dd0"),a="String Iterator",c=o.set,l=o.getterFor(a);s(String,"String",(function(e){c(this,{type:a,string:i(e),index:0})}),(function(){var e,t=l(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},"3f6b":function(e,t,n){e.exports={default:n("b9c7"),__esModule:!0}},"3f8c":function(e,t){e.exports={}},"3fcc":function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").map,o=n("b6b7"),s=r.aTypedArray,a=r.exportTypedArrayMethod;a("map",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(o(e))(t)}))}))},4010:function(e,t,n){"use strict";t.__esModule=!0,t.removeResizeListener=t.addResizeListener=void 0;var r=n("6dd8"),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var s="undefined"===typeof window,a=function(e){var t=e,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if(r=t.next(),r.done)break;i=r.value}var o=i,s=o.target.__resizeListeners__||[];s.length&&s.forEach((function(e){e()}))}};t.addResizeListener=function(e,t){s||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new i.default(a),e.__ro__.observe(e)),e.__resizeListeners__.push(t))},t.removeResizeListener=function(e,t){e&&e.__resizeListeners__&&(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||e.__ro__.disconnect())}},"408a":function(e,t,n){var r=n("e330");e.exports=r(1..valueOf)},"40d5":function(e,t,n){var r=n("d039");e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},"417f":function(e,t,n){"use strict";t.__esModule=!0;var r=n("2b0e"),i=s(r),o=n("5924");function s(e){return e&&e.__esModule?e:{default:e}}var a=[],c="@@clickoutsideContext",l=void 0,u=0;function d(e,t,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(n&&n.context&&r.target&&i.target)||e.contains(r.target)||e.contains(i.target)||e===r.target||n.context.popperElm&&(n.context.popperElm.contains(r.target)||n.context.popperElm.contains(i.target))||(t.expression&&e[c].methodName&&n.context[e[c].methodName]?n.context[e[c].methodName]():e[c].bindingFn&&e[c].bindingFn())}}!i.default.prototype.$isServer&&(0,o.on)(document,"mousedown",(function(e){return l=e})),!i.default.prototype.$isServer&&(0,o.on)(document,"mouseup",(function(e){a.forEach((function(t){return t[c].documentHandler(e,l)}))})),t.default={bind:function(e,t,n){a.push(e);var r=u++;e[c]={id:r,documentHandler:d(e,t,n),methodName:t.expression,bindingFn:t.value}},update:function(e,t,n){e[c].documentHandler=d(e,t,n),e[c].methodName=t.expression,e[c].bindingFn=t.value},unbind:function(e){for(var t=a.length,n=0;n<t;n++)if(a[n][c].id===e[c].id){a.splice(n,1);break}delete e[c]}}},"41b2":function(e,t,n){"use strict";t.__esModule=!0;var r=n("3f6b"),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},"41f8":function(e,t,n){"use strict";t.__esModule=!0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isVNode=o;var i=n("8122");function o(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":r(e))&&(0,i.hasOwn)(e,"componentOptions")}},"428f":function(e,t,n){var r=n("da84");e.exports=r},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"44ad":function(e,t,n){var r=n("da84"),i=n("e330"),o=n("d039"),s=n("c6b6"),a=r.Object,c=i("".split);e.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?c(e,""):a(e)}:a},"44d2":function(e,t,n){var r=n("b622"),i=n("7c73"),o=n("9bf2"),s=r("unscopables"),a=Array.prototype;void 0==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},"44de":function(e,t,n){var r=n("da84");e.exports=function(e,t){var n=r.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},"44e7":function(e,t,n){var r=n("861d"),i=n("c6b6"),o=n("b622"),s=o("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==i(e))}},"466d":function(e,t,n){"use strict";var r=n("c65b"),i=n("d784"),o=n("825a"),s=n("50c4"),a=n("577e"),c=n("1d80"),l=n("dc4a"),u=n("8aa5"),d=n("14c3");i("match",(function(e,t,n){return[function(t){var n=c(this),i=void 0==t?void 0:l(t,e);return i?r(i,t,n):new RegExp(t)[e](a(n))},function(e){var r=o(this),i=a(e),c=n(t,r,i);if(c.done)return c.value;if(!r.global)return d(r,i);var l=r.unicode;r.lastIndex=0;var h,p=[],f=0;while(null!==(h=d(r,i))){var g=a(h[0]);p[f]=g,""===g&&(r.lastIndex=u(i,s(r.lastIndex),l)),f++}return 0===f?null:p}]}))},"467f":function(e,t,n){"use strict";var r=n("2d83");e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},4726:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=59)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},15:function(e,t){e.exports=n("14e9")},19:function(e,t){e.exports=n("dcdc")},21:function(e,t){e.exports=n("d397")},26:function(e,t){e.exports=n("92fa")},3:function(e,t){e.exports=n("8122")},31:function(e,t){e.exports=n("2a5e")},40:function(e,t){e.exports=n("e452")},51:function(e,t){e.exports=n("f494")},59:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["el-cascader-panel",e.border&&"is-bordered"],on:{keydown:e.handleKeyDown}},e._l(e.menus,(function(e,t){return n("cascader-menu",{key:t,ref:"menu",refInFor:!0,attrs:{index:t,nodes:e}})})),1)},i=[];r._withStripped=!0;var o,s,a=n(26),c=n.n(a),l=n(15),u=n.n(l),d=n(19),h=n.n(d),p=n(51),f=n.n(p),g=n(3),m=function(e){return e.stopPropagation()},_={inject:["panel"],components:{ElCheckbox:h.a,ElRadio:f.a},props:{node:{required:!0},nodeId:String},computed:{config:function(){return this.panel.config},isLeaf:function(){return this.node.isLeaf},isDisabled:function(){return this.node.isDisabled},checkedValue:function(){return this.panel.checkedValue},isChecked:function(){return this.node.isSameNode(this.checkedValue)},inActivePath:function(){return this.isInPath(this.panel.activePath)},inCheckedPath:function(){var e=this;return!!this.config.checkStrictly&&this.panel.checkedNodePaths.some((function(t){return e.isInPath(t)}))},value:function(){return this.node.getValueByOption()}},methods:{handleExpand:function(){var e=this,t=this.panel,n=this.node,r=this.isDisabled,i=this.config,o=i.multiple,s=i.checkStrictly;!s&&r||n.loading||(i.lazy&&!n.loaded?t.lazyLoad(n,(function(){var t=e.isLeaf;if(t||e.handleExpand(),o){var r=!!t&&n.checked;e.handleMultiCheckChange(r)}})):t.handleExpand(n))},handleCheckChange:function(){var e=this.panel,t=this.value,n=this.node;e.handleCheckChange(t),e.handleExpand(n)},handleMultiCheckChange:function(e){this.node.doCheck(e),this.panel.calculateMultiCheckedValue()},isInPath:function(e){var t=this.node,n=e[t.level-1]||{};return n.uid===t.uid},renderPrefix:function(e){var t=this.isLeaf,n=this.isChecked,r=this.config,i=r.checkStrictly,o=r.multiple;return o?this.renderCheckbox(e):i?this.renderRadio(e):t&&n?this.renderCheckIcon(e):null},renderPostfix:function(e){var t=this.node,n=this.isLeaf;return t.loading?this.renderLoadingIcon(e):n?null:this.renderExpandIcon(e)},renderCheckbox:function(e){var t=this.node,n=this.config,r=this.isDisabled,i={on:{change:this.handleMultiCheckChange},nativeOn:{}};return n.checkStrictly&&(i.nativeOn.click=m),e("el-checkbox",c()([{attrs:{value:t.checked,indeterminate:t.indeterminate,disabled:r}},i]))},renderRadio:function(e){var t=this.checkedValue,n=this.value,r=this.isDisabled;return Object(g["isEqual"])(n,t)&&(n=t),e("el-radio",{attrs:{value:t,label:n,disabled:r},on:{change:this.handleCheckChange},nativeOn:{click:m}},[e("span")])},renderCheckIcon:function(e){return e("i",{class:"el-icon-check el-cascader-node__prefix"})},renderLoadingIcon:function(e){return e("i",{class:"el-icon-loading el-cascader-node__postfix"})},renderExpandIcon:function(e){return e("i",{class:"el-icon-arrow-right el-cascader-node__postfix"})},renderContent:function(e){var t=this.panel,n=this.node,r=t.renderLabelFn,i=r?r({node:n,data:n.data}):null;return e("span",{class:"el-cascader-node__label"},[i||n.label])}},render:function(e){var t=this,n=this.inActivePath,r=this.inCheckedPath,i=this.isChecked,o=this.isLeaf,s=this.isDisabled,a=this.config,l=this.nodeId,u=a.expandTrigger,d=a.checkStrictly,h=a.multiple,p=!d&&s,f={on:{}};return"click"===u?f.on.click=this.handleExpand:(f.on.mouseenter=function(e){t.handleExpand(),t.$emit("expand",e)},f.on.focus=function(e){t.handleExpand(),t.$emit("expand",e)}),!o||s||d||h||(f.on.click=this.handleCheckChange),e("li",c()([{attrs:{role:"menuitem",id:l,"aria-expanded":n,tabindex:p?null:-1},class:{"el-cascader-node":!0,"is-selectable":d,"in-active-path":n,"in-checked-path":r,"is-active":i,"is-disabled":p}},f]),[this.renderPrefix(e),this.renderContent(e),this.renderPostfix(e)])}},v=_,E=n(0),A=Object(E["a"])(v,o,s,!1,null,null,null);A.options.__file="packages/cascader-panel/src/cascader-node.vue";var y,S,b=A.exports,C=n(6),T=n.n(C),I={name:"ElCascaderMenu",mixins:[T.a],inject:["panel"],components:{ElScrollbar:u.a,CascaderNode:b},props:{nodes:{type:Array,required:!0},index:Number},data:function(){return{activeNode:null,hoverTimer:null,id:Object(g["generateId"])()}},computed:{isEmpty:function(){return!this.nodes.length},menuId:function(){return"cascader-menu-"+this.id+"-"+this.index}},methods:{handleExpand:function(e){this.activeNode=e.target},handleMouseMove:function(e){var t=this.activeNode,n=this.hoverTimer,r=this.$refs.hoverZone;if(t&&r)if(t.contains(e.target)){clearTimeout(n);var i=this.$el.getBoundingClientRect(),o=i.left,s=e.clientX-o,a=this.$el,c=a.offsetWidth,l=a.offsetHeight,u=t.offsetTop,d=u+t.offsetHeight;r.innerHTML='\n          <path style="pointer-events: auto;" fill="transparent" d="M'+s+" "+u+" L"+c+" 0 V"+u+' Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M'+s+" "+d+" L"+c+" "+l+" V"+d+' Z" />\n        '}else n||(this.hoverTimer=setTimeout(this.clearHoverZone,this.panel.config.hoverThreshold))},clearHoverZone:function(){var e=this.$refs.hoverZone;e&&(e.innerHTML="")},renderEmptyText:function(e){return e("div",{class:"el-cascader-menu__empty-text"},[this.t("el.cascader.noData")])},renderNodeList:function(e){var t=this.menuId,n=this.panel.isHoverMenu,r={on:{}};n&&(r.on.expand=this.handleExpand);var i=this.nodes.map((function(n,i){var o=n.hasChildren;return e("cascader-node",c()([{key:n.uid,attrs:{node:n,"node-id":t+"-"+i,"aria-haspopup":o,"aria-owns":o?t:null}},r]))}));return[].concat(i,[n?e("svg",{ref:"hoverZone",class:"el-cascader-menu__hover-zone"}):null])}},render:function(e){var t=this.isEmpty,n=this.menuId,r={nativeOn:{}};return this.panel.isHoverMenu&&(r.nativeOn.mousemove=this.handleMouseMove),e("el-scrollbar",c()([{attrs:{tag:"ul",role:"menu",id:n,"wrap-class":"el-cascader-menu__wrap","view-class":{"el-cascader-menu__list":!0,"is-empty":t}},class:"el-cascader-menu"},r]),[t?this.renderEmptyText(e):this.renderNodeList(e)])}},R=I,w=Object(E["a"])(R,y,S,!1,null,null,null);w.options.__file="packages/cascader-panel/src/cascader-menu.vue";var k=w.exports,O=n(21),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var P=0,D=function(){function e(t,n,r){L(this,e),this.data=t,this.config=n,this.parent=r||null,this.level=this.parent?this.parent.level+1:1,this.uid=P++,this.initState(),this.initChildren()}return e.prototype.initState=function(){var e=this.config,t=e.value,n=e.label;this.value=this.data[t],this.label=this.data[n],this.pathNodes=this.calculatePathNodes(),this.path=this.pathNodes.map((function(e){return e.value})),this.pathLabels=this.pathNodes.map((function(e){return e.label})),this.loading=!1,this.loaded=!1},e.prototype.initChildren=function(){var t=this,n=this.config,r=n.children,i=this.data[r];this.hasChildren=Array.isArray(i),this.children=(i||[]).map((function(r){return new e(r,n,t)}))},e.prototype.calculatePathNodes=function(){var e=[this],t=this.parent;while(t)e.unshift(t),t=t.parent;return e},e.prototype.getPath=function(){return this.path},e.prototype.getValue=function(){return this.value},e.prototype.getValueByOption=function(){return this.config.emitPath?this.getPath():this.getValue()},e.prototype.getText=function(e,t){return e?this.pathLabels.join(t):this.label},e.prototype.isSameNode=function(e){var t=this.getValueByOption();return this.config.multiple&&Array.isArray(e)?e.some((function(e){return Object(g["isEqual"])(e,t)})):Object(g["isEqual"])(e,t)},e.prototype.broadcast=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i="onParent"+Object(g["capitalize"])(e);this.children.forEach((function(t){t&&(t.broadcast.apply(t,[e].concat(n)),t[i]&&t[i].apply(t,n))}))},e.prototype.emit=function(e){var t=this.parent,n="onChild"+Object(g["capitalize"])(e);if(t){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t[n]&&t[n].apply(t,i),t.emit.apply(t,[e].concat(i))}},e.prototype.onParentCheck=function(e){this.isDisabled||this.setCheckState(e)},e.prototype.onChildCheck=function(){var e=this.children,t=e.filter((function(e){return!e.isDisabled})),n=!!t.length&&t.every((function(e){return e.checked}));this.setCheckState(n)},e.prototype.setCheckState=function(e){var t=this.children.length,n=this.children.reduce((function(e,t){var n=t.checked?1:t.indeterminate?.5:0;return e+n}),0);this.checked=e,this.indeterminate=n!==t&&n>0},e.prototype.syncCheckState=function(e){var t=this.getValueByOption(),n=this.isSameNode(e,t);this.doCheck(n)},e.prototype.doCheck=function(e){this.checked!==e&&(this.config.checkStrictly?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check")))},N(e,[{key:"isDisabled",get:function(){var e=this.data,t=this.parent,n=this.config,r=n.disabled,i=n.checkStrictly;return e[r]||!i&&t&&t.isDisabled}},{key:"isLeaf",get:function(){var e=this.data,t=this.loaded,n=this.hasChildren,r=this.children,i=this.config,o=i.lazy,s=i.leaf;if(o){var a=Object(O["isDef"])(e[s])?e[s]:!!t&&!r.length;return this.hasChildren=!a,a}return!n}}]),e}(),M=D;function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var B=function e(t,n){return t.reduce((function(t,r){return r.isLeaf?t.push(r):(!n&&t.push(r),t=t.concat(e(r.children,n))),t}),[])},U=function(){function e(t,n){x(this,e),this.config=n,this.initNodes(t)}return e.prototype.initNodes=function(e){var t=this;e=Object(g["coerceTruthyValueToArray"])(e),this.nodes=e.map((function(e){return new M(e,t.config)})),this.flattedNodes=this.getFlattedNodes(!1,!1),this.leafNodes=this.getFlattedNodes(!0,!1)},e.prototype.appendNode=function(e,t){var n=new M(e,this.config,t),r=t?t.children:this.nodes;r.push(n)},e.prototype.appendNodes=function(e,t){var n=this;e=Object(g["coerceTruthyValueToArray"])(e),e.forEach((function(e){return n.appendNode(e,t)}))},e.prototype.getNodes=function(){return this.nodes},e.prototype.getFlattedNodes=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e?this.leafNodes:this.flattedNodes;return t?n:B(this.nodes,e)},e.prototype.getNodeByValue=function(e){var t=this.getFlattedNodes(!1,!this.config.lazy).filter((function(t){return Object(g["valueEquals"])(t.path,e)||t.value===e}));return t&&t.length?t[0]:null},e}(),F=U,V=n(9),j=n.n(V),G=n(40),H=n.n(G),Q=n(31),W=n.n(Q),q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z=H.a.keys,Z={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:g["noop"],value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},$=function(e){return!e.getAttribute("aria-owns")},K=function(e,t){var n=e.parentNode;if(n){var r=n.querySelectorAll('.el-cascader-node[tabindex="-1"]'),i=Array.prototype.indexOf.call(r,e);return r[i+t]||null}return null},Y=function(e,t){if(e){var n=e.id.split("-");return Number(n[n.length-2])}},J=function(e){e&&(e.focus(),!$(e)&&e.click())},X=function(e){if(e){var t=e.querySelector("input");t?t.click():$(e)&&e.click()}},ee={name:"ElCascaderPanel",components:{CascaderMenu:k},props:{value:{},options:Array,props:Object,border:{type:Boolean,default:!0},renderLabel:Function},provide:function(){return{panel:this}},data:function(){return{checkedValue:null,checkedNodePaths:[],store:[],menus:[],activePath:[],loadCount:0}},computed:{config:function(){return j()(q({},Z),this.props||{})},multiple:function(){return this.config.multiple},checkStrictly:function(){return this.config.checkStrictly},leafOnly:function(){return!this.checkStrictly},isHoverMenu:function(){return"hover"===this.config.expandTrigger},renderLabelFn:function(){return this.renderLabel||this.$scopedSlots.default}},watch:{options:{handler:function(){this.initStore()},immediate:!0,deep:!0},value:function(){this.syncCheckedValue(),this.checkStrictly&&this.calculateCheckedNodePaths()},checkedValue:function(e){Object(g["isEqual"])(e,this.value)||(this.checkStrictly&&this.calculateCheckedNodePaths(),this.$emit("input",e),this.$emit("change",e))}},mounted:function(){this.isEmptyValue(this.value)||this.syncCheckedValue()},methods:{initStore:function(){var e=this.config,t=this.options;e.lazy&&Object(g["isEmpty"])(t)?this.lazyLoad():(this.store=new F(t,e),this.menus=[this.store.getNodes()],this.syncMenuState())},syncCheckedValue:function(){var e=this.value,t=this.checkedValue;Object(g["isEqual"])(e,t)||(this.activePath=[],this.checkedValue=e,this.syncMenuState())},syncMenuState:function(){var e=this.multiple,t=this.checkStrictly;this.syncActivePath(),e&&this.syncMultiCheckState(),t&&this.calculateCheckedNodePaths(),this.$nextTick(this.scrollIntoView)},syncMultiCheckState:function(){var e=this,t=this.getFlattedNodes(this.leafOnly);t.forEach((function(t){t.syncCheckState(e.checkedValue)}))},isEmptyValue:function(e){var t=this.multiple,n=this.config,r=n.emitPath;return!(!t&&!r)&&Object(g["isEmpty"])(e)},syncActivePath:function(){var e=this,t=this.store,n=this.multiple,r=this.activePath,i=this.checkedValue;if(Object(g["isEmpty"])(r))if(this.isEmptyValue(i))this.activePath=[],this.menus=[t.getNodes()];else{var o=n?i[0]:i,s=this.getNodeByValue(o)||{},a=(s.pathNodes||[]).slice(0,-1);this.expandNodes(a)}else{var c=r.map((function(t){return e.getNodeByValue(t.getValue())}));this.expandNodes(c)}},expandNodes:function(e){var t=this;e.forEach((function(e){return t.handleExpand(e,!0)}))},calculateCheckedNodePaths:function(){var e=this,t=this.checkedValue,n=this.multiple,r=n?Object(g["coerceTruthyValueToArray"])(t):[t];this.checkedNodePaths=r.map((function(t){var n=e.getNodeByValue(t);return n?n.pathNodes:[]}))},handleKeyDown:function(e){var t=e.target,n=e.keyCode;switch(n){case z.up:var r=K(t,-1);J(r);break;case z.down:var i=K(t,1);J(i);break;case z.left:var o=this.$refs.menu[Y(t)-1];if(o){var s=o.$el.querySelector('.el-cascader-node[aria-expanded="true"]');J(s)}break;case z.right:var a=this.$refs.menu[Y(t)+1];if(a){var c=a.$el.querySelector('.el-cascader-node[tabindex="-1"]');J(c)}break;case z.enter:X(t);break;case z.esc:case z.tab:this.$emit("close");break;default:return}},handleExpand:function(e,t){var n=this.activePath,r=e.level,i=n.slice(0,r-1),o=this.menus.slice(0,r);if(e.isLeaf||(i.push(e),o.push(e.children)),this.activePath=i,this.menus=o,!t){var s=i.map((function(e){return e.getValue()})),a=n.map((function(e){return e.getValue()}));Object(g["valueEquals"])(s,a)||(this.$emit("active-item-change",s),this.$emit("expand-change",s))}},handleCheckChange:function(e){this.checkedValue=e},lazyLoad:function(e,t){var n=this,r=this.config;e||(e=e||{root:!0,level:0},this.store=new F([],r),this.menus=[this.store.getNodes()]),e.loading=!0;var i=function(r){var i=e.root?null:e;if(r&&r.length&&n.store.appendNodes(r,i),e.loading=!1,e.loaded=!0,Array.isArray(n.checkedValue)){var o=n.checkedValue[n.loadCount++],s=n.config.value,a=n.config.leaf;if(Array.isArray(r)&&r.filter((function(e){return e[s]===o})).length>0){var c=n.store.getNodeByValue(o);c.data[a]||n.lazyLoad(c,(function(){n.handleExpand(c)})),n.loadCount===n.checkedValue.length&&n.$parent.computePresentText()}}t&&t(r)};r.lazyLoad(e,i)},calculateMultiCheckedValue:function(){this.checkedValue=this.getCheckedNodes(this.leafOnly).map((function(e){return e.getValueByOption()}))},scrollIntoView:function(){if(!this.$isServer){var e=this.$refs.menu||[];e.forEach((function(e){var t=e.$el;if(t){var n=t.querySelector(".el-scrollbar__wrap"),r=t.querySelector(".el-cascader-node.is-active")||t.querySelector(".el-cascader-node.in-active-path");W()(n,r)}}))}},getNodeByValue:function(e){return this.store.getNodeByValue(e)},getFlattedNodes:function(e){var t=!this.config.lazy;return this.store.getFlattedNodes(e,t)},getCheckedNodes:function(e){var t=this.checkedValue,n=this.multiple;if(n){var r=this.getFlattedNodes(e);return r.filter((function(e){return e.checked}))}return this.isEmptyValue(t)?[]:[this.getNodeByValue(t)]},clearCheckedNodes:function(){var e=this.config,t=this.leafOnly,n=e.multiple,r=e.emitPath;n?(this.getCheckedNodes(t).filter((function(e){return!e.isDisabled})).forEach((function(e){return e.doCheck(!1)})),this.calculateMultiCheckedValue()):this.checkedValue=r?[]:null}}},te=ee,ne=Object(E["a"])(te,r,i,!1,null,null,null);ne.options.__file="packages/cascader-panel/src/cascader-panel.vue";var re=ne.exports;re.install=function(e){e.component(re.name,re)};t["default"]=re},6:function(e,t){e.exports=n("6b7c")},9:function(e,t){e.exports=n("7f4d")}})},4840:function(e,t,n){var r=n("825a"),i=n("5087"),o=n("b622"),s=o("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||void 0==(n=r(o)[s])?t:i(n)}},"485a":function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("1626"),s=n("861d"),a=r.TypeError;e.exports=function(e,t){var n,r;if("string"===t&&o(n=e.toString)&&!s(r=i(n,e)))return r;if(o(n=e.valueOf)&&!s(r=i(n,e)))return r;if("string"!==t&&o(n=e.toString)&&!s(r=i(n,e)))return r;throw a("Can't convert object to primitive value")}},4897:function(e,t,n){"use strict";t.__esModule=!0,t.i18n=t.use=t.t=void 0;var r=n("f0d9"),i=d(r),o=n("2b0e"),s=d(o),a=n("9afc"),c=d(a),l=n("9d7e"),u=d(l);function d(e){return e&&e.__esModule?e:{default:e}}var h=(0,u.default)(s.default),p=i.default,f=!1,g=function(){var e=Object.getPrototypeOf(this||s.default).$t;if("function"===typeof e&&s.default.locale)return f||(f=!0,s.default.locale(s.default.config.lang,(0,c.default)(p,s.default.locale(s.default.config.lang)||{},{clone:!0}))),e.apply(this,arguments)},m=t.t=function(e,t){var n=g.apply(this,arguments);if(null!==n&&void 0!==n)return n;for(var r=e.split("."),i=p,o=0,s=r.length;o<s;o++){var a=r[o];if(n=i[a],o===s-1)return h(n,t);if(!n)return"";i=n}return""},_=t.use=function(e){p=e||p},v=t.i18n=function(e){g=e||g};t.default={use:_,t:m,i18n:v}},4930:function(e,t,n){var r=n("2d00"),i=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"498a":function(e,t,n){"use strict";var r=n("23e7"),i=n("58a8").trim,o=n("c8d2");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},"4a7b":function(e,t,n){"use strict";var r=n("c532");e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function s(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function c(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||o,i=t(e);r.isUndefined(i)&&t!==c||(n[e]=i)})),n}},"4a9b":function(e,t,n){var r=n("74e8");r("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},"4ae1":function(e,t,n){var r=n("23e7"),i=n("d066"),o=n("2ba4"),s=n("0538"),a=n("5087"),c=n("825a"),l=n("861d"),u=n("7c73"),d=n("d039"),h=i("Reflect","construct"),p=Object.prototype,f=[].push,g=d((function(){function e(){}return!(h((function(){}),[],e)instanceof e)})),m=!d((function(){h((function(){}))})),_=g||m;r({target:"Reflect",stat:!0,forced:_,sham:_},{construct:function(e,t){a(e),c(t);var n=arguments.length<3?e:a(arguments[2]);if(m&&!g)return h(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return o(f,r,t),new(o(s,e,r))}var i=n.prototype,d=u(l(i)?i:p),_=o(e,d,t);return l(_)?_:d}})},"4b26":function(e,t,n){"use strict";t.__esModule=!0;var r=n("2b0e"),i=s(r),o=n("5924");function s(e){return e&&e.__esModule?e:{default:e}}var a=!1,c=!1,l=void 0,u=function(){if(!i.default.prototype.$isServer){var e=h.modalDom;return e?a=!0:(a=!1,e=document.createElement("div"),h.modalDom=e,e.addEventListener("touchmove",(function(e){e.preventDefault(),e.stopPropagation()})),e.addEventListener("click",(function(){h.doOnModalClick&&h.doOnModalClick()}))),e}},d={},h={modalFade:!0,getInstance:function(e){return d[e]},register:function(e,t){e&&t&&(d[e]=t)},deregister:function(e){e&&(d[e]=null,delete d[e])},nextZIndex:function(){return h.zIndex++},modalStack:[],doOnModalClick:function(){var e=h.modalStack[h.modalStack.length-1];if(e){var t=h.getInstance(e.id);t&&t.closeOnClickModal&&t.close()}},openModal:function(e,t,n,r,s){if(!i.default.prototype.$isServer&&e&&void 0!==t){this.modalFade=s;for(var c=this.modalStack,l=0,d=c.length;l<d;l++){var h=c[l];if(h.id===e)return}var p=u();if((0,o.addClass)(p,"v-modal"),this.modalFade&&!a&&(0,o.addClass)(p,"v-modal-enter"),r){var f=r.trim().split(/\s+/);f.forEach((function(e){return(0,o.addClass)(p,e)}))}setTimeout((function(){(0,o.removeClass)(p,"v-modal-enter")}),200),n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode.appendChild(p):document.body.appendChild(p),t&&(p.style.zIndex=t),p.tabIndex=0,p.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:r})}},closeModal:function(e){var t=this.modalStack,n=u();if(t.length>0){var r=t[t.length-1];if(r.id===e){if(r.modalClass){var i=r.modalClass.trim().split(/\s+/);i.forEach((function(e){return(0,o.removeClass)(n,e)}))}t.pop(),t.length>0&&(n.style.zIndex=t[t.length-1].zIndex)}else for(var s=t.length-1;s>=0;s--)if(t[s].id===e){t.splice(s,1);break}}0===t.length&&(this.modalFade&&(0,o.addClass)(n,"v-modal-leave"),setTimeout((function(){0===t.length&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",h.modalDom=void 0),(0,o.removeClass)(n,"v-modal-leave")}),200))}};Object.defineProperty(h,"zIndex",{configurable:!0,get:function(){return c||(l=l||(i.default.prototype.$ELEMENT||{}).zIndex||2e3,c=!0),l},set:function(e){l=e}});var p=function(){if(!i.default.prototype.$isServer&&h.modalStack.length>0){var e=h.modalStack[h.modalStack.length-1];if(!e)return;var t=h.getInstance(e.id);return t}};i.default.prototype.$isServer||window.addEventListener("keydown",(function(e){if(27===e.keyCode){var t=p();t&&t.closeOnPressEscape&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction("cancel"):t.close())}})),t.default=h},"4b8b":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"4d20":function(e,t,n){var r=n("1917"),i=n("10db"),o=n("6ca1"),s=n("3397"),a=n("9c0e"),c=n("faf5"),l=Object.getOwnPropertyDescriptor;t.f=n("0bad")?l:function(e,t){if(e=o(e),t=s(t,!0),c)try{return l(e,t)}catch(n){}if(a(e,t))return i(!r.f.call(e,t),e[t])}},"4d63":function(e,t,n){var r=n("83ab"),i=n("da84"),o=n("e330"),s=n("94ca"),a=n("7156"),c=n("9112"),l=n("9bf2").f,u=n("241c").f,d=n("3a9b"),h=n("44e7"),p=n("577e"),f=n("ad6d"),g=n("9f7f"),m=n("6eeb"),_=n("d039"),v=n("1a2d"),E=n("69f3").enforce,A=n("2626"),y=n("b622"),S=n("fce3"),b=n("107c"),C=y("match"),T=i.RegExp,I=T.prototype,R=i.SyntaxError,w=o(f),k=o(I.exec),O=o("".charAt),N=o("".replace),L=o("".indexOf),P=o("".slice),D=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,M=/a/g,x=/a/g,B=new T(M)!==M,U=g.MISSED_STICKY,F=g.UNSUPPORTED_Y,V=r&&(!B||U||S||b||_((function(){return x[C]=!1,T(M)!=M||T(x)==x||"/a/i"!=T(M,"i")}))),j=function(e){for(var t,n=e.length,r=0,i="",o=!1;r<=n;r++)t=O(e,r),"\\"!==t?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+O(e,++r);return i},G=function(e){for(var t,n=e.length,r=0,i="",o=[],s={},a=!1,c=!1,l=0,u="";r<=n;r++){if(t=O(e,r),"\\"===t)t+=O(e,++r);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:k(D,P(e,r+1))&&(r+=2,c=!0),i+=t,l++;continue;case">"===t&&c:if(""===u||v(s,u))throw new R("Invalid capture group name");s[u]=!0,o[o.length]=[u,l],c=!1,u="";continue}c?u+=t:i+=t}return[i,o]};if(s("RegExp",V)){for(var H=function(e,t){var n,r,i,o,s,l,u=d(I,this),f=h(e),g=void 0===t,m=[],_=e;if(!u&&f&&g&&e.constructor===H)return e;if((f||d(I,e))&&(e=e.source,g&&(t="flags"in _?_.flags:w(_))),e=void 0===e?"":p(e),t=void 0===t?"":p(t),_=e,S&&"dotAll"in M&&(r=!!t&&L(t,"s")>-1,r&&(t=N(t,/s/g,""))),n=t,U&&"sticky"in M&&(i=!!t&&L(t,"y")>-1,i&&F&&(t=N(t,/y/g,""))),b&&(o=G(e),e=o[0],m=o[1]),s=a(T(e,t),u?this:I,H),(r||i||m.length)&&(l=E(s),r&&(l.dotAll=!0,l.raw=H(j(e),n)),i&&(l.sticky=!0),m.length&&(l.groups=m)),e!==_)try{c(s,"source",""===_?"(?:)":_)}catch(v){}return s},Q=function(e){e in H||l(H,e,{configurable:!0,get:function(){return T[e]},set:function(t){T[e]=t}})},W=u(T),q=0;W.length>q;)Q(W[q++]);I.constructor=H,H.prototype=I,m(i,"RegExp",H)}A("RegExp")},"4d64":function(e,t,n){var r=n("fc6a"),i=n("23cb"),o=n("07fa"),s=function(e){return function(t,n,s){var a,c=r(t),l=o(c),u=i(s,l);if(e&&n!=n){while(l>u)if(a=c[u++],a!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},"4d88":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"4dae":function(e,t,n){var r=n("da84"),i=n("23cb"),o=n("07fa"),s=n("8418"),a=r.Array,c=Math.max;e.exports=function(e,t,n){for(var r=o(e),l=i(t,r),u=i(void 0===n?r:n,r),d=a(c(u-l,0)),h=0;l<u;l++,h++)s(d,h,e[l]);return d.length=h,d}},"4de4":function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").filter,o=n("1dde"),s=o("filter");r({target:"Array",proto:!0,forced:!s},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,n){"use strict";var r=n("da84"),i=n("0366"),o=n("c65b"),s=n("7b0b"),a=n("9bdd"),c=n("e95a"),l=n("68ee"),u=n("07fa"),d=n("8418"),h=n("9a1f"),p=n("35a1"),f=r.Array;e.exports=function(e){var t=s(e),n=l(this),r=arguments.length,g=r>1?arguments[1]:void 0,m=void 0!==g;m&&(g=i(g,r>2?arguments[2]:void 0));var _,v,E,A,y,S,b=p(t),C=0;if(!b||this==f&&c(b))for(_=u(t),v=n?new this(_):f(_);_>C;C++)S=m?g(t[C],C):t[C],d(v,C,S);else for(A=h(t,b),y=A.next,v=n?new this:[];!(E=o(y,A)).done;C++)S=m?a(A,g,[E.value,C],!0):E.value,d(v,C,S);return v.length=C,v}},"4e4b":function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=61)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},10:function(e,t){e.exports=n("f3ad")},12:function(e,t){e.exports=n("417f")},15:function(e,t){e.exports=n("14e9")},16:function(e,t){e.exports=n("4010")},18:function(e,t){e.exports=n("0e15")},21:function(e,t){e.exports=n("d397")},22:function(e,t){e.exports=n("12f2")},3:function(e,t){e.exports=n("8122")},31:function(e,t){e.exports=n("2a5e")},33:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[n("span",[e._v(e._s(e.currentLabel))])])],2)},i=[];r._withStripped=!0;var o=n(4),s=n.n(o),a=n(3),c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={mixins:[s.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var n=this.select,r=n.remote,i=n.valueKey;if(!this.created&&!r){if(i&&"object"===("undefined"===typeof e?"undefined":c(e))&&"object"===("undefined"===typeof t?"undefined":c(t))&&e[i]===t[i])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,t){if(this.isObject){var n=this.select.valueKey;return Object(a["getValueByPath"])(e,n)===Object(a["getValueByPath"])(t,n)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var n=this.select.valueKey;return e&&e.some((function(e){return Object(a["getValueByPath"])(e,n)===Object(a["getValueByPath"])(t,n)}))}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(a["escapeRegexpString"])(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,t=e.selected,n=e.multiple,r=n?t:[t],i=this.select.cachedOptions.indexOf(this),o=r.indexOf(this);i>-1&&o<0&&this.select.cachedOptions.splice(i,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},u=l,d=n(0),h=Object(d["a"])(u,r,i,!1,null,null,null);h.options.__file="packages/select/src/option.vue";t["a"]=h.exports},37:function(e,t){e.exports=n("8bbc")},4:function(e,t){e.exports=n("d010")},5:function(e,t){e.exports=n("e974")},6:function(e,t){e.exports=n("6b7c")},61:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[e.multiple?n("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?n("span",[n("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(t){e.deleteTag(t,e.selected[0])}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(e.selected[0].currentLabel))])]),e.selected.length>1?n("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[n("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e.collapseTags?e._e():n("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(t){return n("el-tag",{key:e.getValueKey(t),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:t.hitState,type:"info","disable-transitions":""},on:{close:function(n){e.deleteTag(n,t)}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.currentLabel))])])})),1),e.filterable?n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(t){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){return!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(t)},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(t){t.target.composing||(e.query=t.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),n("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{type:"text",placeholder:e.currentPlaceholder,name:e.name,id:e.id,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur,input:e.debouncedOnInputChange},nativeOn:{keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}},[e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),n("template",{slot:"suffix"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e.showClose?n("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[n("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?n("el-option",{attrs:{value:e.query,created:""}}):e._e(),e._t("default")],2),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):n("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)},i=[];r._withStripped=!0;var o=n(4),s=n.n(o),a=n(22),c=n.n(a),l=n(6),u=n.n(l),d=n(10),h=n.n(d),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-select-dropdown el-popper",class:[{"is-multiple":e.$parent.multiple},e.popperClass],style:{minWidth:e.minWidth}},[e._t("default")],2)},f=[];p._withStripped=!0;var g=n(5),m=n.n(g),_={name:"ElSelectDropdown",componentName:"ElSelectDropdown",mixins:[m.a],props:{placement:{default:"bottom-start"},boundariesPadding:{default:0},popperOptions:{default:function(){return{gpuAcceleration:!1}}},visibleArrow:{default:!0},appendToBody:{type:Boolean,default:!0}},data:function(){return{minWidth:""}},computed:{popperClass:function(){return this.$parent.popperClass}},watch:{"$parent.inputWidth":function(){this.minWidth=this.$parent.$el.getBoundingClientRect().width+"px"}},mounted:function(){var e=this;this.referenceElm=this.$parent.$refs.reference.$el,this.$parent.popperElm=this.popperElm=this.$el,this.$on("updatePopper",(function(){e.$parent.visible&&e.updatePopper()})),this.$on("destroyPopper",this.destroyPopper)}},v=_,E=n(0),A=Object(E["a"])(v,p,f,!1,null,null,null);A.options.__file="packages/select/src/select-dropdown.vue";var y=A.exports,S=n(33),b=n(37),C=n.n(b),T=n(15),I=n.n(T),R=n(18),w=n.n(R),k=n(12),O=n.n(k),N=n(16),L=n(31),P=n.n(L),D=n(3),M={data:function(){return{hoverOption:-1}},computed:{optionsAllDisabled:function(){return this.options.filter((function(e){return e.visible})).every((function(e){return e.disabled}))}},watch:{hoverIndex:function(e){var t=this;"number"===typeof e&&e>-1&&(this.hoverOption=this.options[e]||{}),this.options.forEach((function(e){e.hover=t.hoverOption===e}))}},methods:{navigateOptions:function(e){var t=this;if(this.visible){if(0!==this.options.length&&0!==this.filteredOptionsCount&&!this.optionsAllDisabled){"next"===e?(this.hoverIndex++,this.hoverIndex===this.options.length&&(this.hoverIndex=0)):"prev"===e&&(this.hoverIndex--,this.hoverIndex<0&&(this.hoverIndex=this.options.length-1));var n=this.options[this.hoverIndex];!0!==n.disabled&&!0!==n.groupDisabled&&n.visible||this.navigateOptions(e),this.$nextTick((function(){return t.scrollToOption(t.hoverOption)}))}}else this.visible=!0}}},x=n(21),B={mixins:[s.a,u.a,c()("reference"),M],name:"ElSelect",componentName:"ElSelect",inject:{elForm:{default:""},elFormItem:{default:""}},provide:function(){return{select:this}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return!this.filterable||this.multiple||!Object(D["isIE"])()&&!Object(D["isEdge"])()&&!this.visible},showClose:function(){var e=this.multiple?Array.isArray(this.value)&&this.value.length>0:void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.selectDisabled&&this.inputHovering&&e;return t},iconClass:function(){return this.remote&&this.filterable?"":this.visible?"arrow-up is-reverse":"arrow-up"},debounce:function(){return this.remote?300:0},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):(!this.remote||""!==this.query||0!==this.options.length)&&(this.filterable&&this.query&&this.options.length>0&&0===this.filteredOptionsCount?this.noMatchText||this.t("el.select.noMatch"):0===this.options.length?this.noDataText||this.t("el.select.noData"):null)},showNewOption:function(){var e=this,t=this.options.filter((function(e){return!e.created})).some((function(t){return t.currentLabel===e.query}));return this.filterable&&this.allowCreate&&""!==this.query&&!t},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"},propPlaceholder:function(){return"undefined"!==typeof this.placeholder?this.placeholder:this.t("el.select.placeholder")}},components:{ElInput:h.a,ElSelectMenu:y,ElOption:S["a"],ElTag:C.a,ElScrollbar:I.a},directives:{Clickoutside:O.a},props:{name:String,id:String,value:{required:!0},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},automaticDropdown:Boolean,size:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:String,remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String,required:!1},defaultFirstOption:Boolean,reserveKeyword:Boolean,valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{options:[],cachedOptions:[],createdLabel:null,createdSelected:!1,selected:this.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,cachedPlaceHolder:"",optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,currentPlaceholder:"",menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1}},watch:{selectDisabled:function(){var e=this;this.$nextTick((function(){e.resetInputHeight()}))},propPlaceholder:function(e){this.cachedPlaceHolder=this.currentPlaceholder=e},value:function(e,t){this.multiple&&(this.resetInputHeight(),e&&e.length>0||this.$refs.input&&""!==this.query?this.currentPlaceholder="":this.currentPlaceholder=this.cachedPlaceHolder,this.filterable&&!this.reserveKeyword&&(this.query="",this.handleQueryChange(this.query))),this.setSelected(),this.filterable&&!this.multiple&&(this.inputLength=20),Object(D["valueEquals"])(e,t)||this.dispatch("ElFormItem","el.form.change",e)},visible:function(e){var t=this;e?(this.broadcast("ElSelectDropdown","updatePopper"),this.filterable&&(this.query=this.remote?"":this.selectedLabel,this.handleQueryChange(this.query),this.multiple?this.$refs.input.focus():(this.remote||(this.broadcast("ElOption","queryChange",""),this.broadcast("ElOptionGroup","queryChange")),this.selectedLabel&&(this.currentPlaceholder=this.selectedLabel,this.selectedLabel="")))):(this.broadcast("ElSelectDropdown","destroyPopper"),this.$refs.input&&this.$refs.input.blur(),this.query="",this.previousQuery=null,this.selectedLabel="",this.inputLength=20,this.menuVisibleOnFocus=!1,this.resetHoverIndex(),this.$nextTick((function(){t.$refs.input&&""===t.$refs.input.value&&0===t.selected.length&&(t.currentPlaceholder=t.cachedPlaceHolder)})),this.multiple||(this.selected&&(this.filterable&&this.allowCreate&&this.createdSelected&&this.createdLabel?this.selectedLabel=this.createdLabel:this.selectedLabel=this.selected.currentLabel,this.filterable&&(this.query=this.selectedLabel)),this.filterable&&(this.currentPlaceholder=this.cachedPlaceHolder))),this.$emit("visible-change",e)},options:function(){var e=this;if(!this.$isServer){this.$nextTick((function(){e.broadcast("ElSelectDropdown","updatePopper")})),this.multiple&&this.resetInputHeight();var t=this.$el.querySelectorAll("input");-1===[].indexOf.call(t,document.activeElement)&&this.setSelected(),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}},methods:{handleComposition:function(e){var t=this,n=e.target.value;if("compositionend"===e.type)this.isOnComposition=!1,this.$nextTick((function(e){return t.handleQueryChange(n)}));else{var r=n[n.length-1]||"";this.isOnComposition=!Object(x["isKorean"])(r)}},handleQueryChange:function(e){var t=this;this.previousQuery===e||this.isOnComposition||(null!==this.previousQuery||"function"!==typeof this.filterMethod&&"function"!==typeof this.remoteMethod?(this.previousQuery=e,this.$nextTick((function(){t.visible&&t.broadcast("ElSelectDropdown","updatePopper")})),this.hoverIndex=-1,this.multiple&&this.filterable&&this.$nextTick((function(){var e=15*t.$refs.input.value.length+20;t.inputLength=t.collapseTags?Math.min(50,e):e,t.managePlaceholder(),t.resetInputHeight()})),this.remote&&"function"===typeof this.remoteMethod?(this.hoverIndex=-1,this.remoteMethod(e)):"function"===typeof this.filterMethod?(this.filterMethod(e),this.broadcast("ElOptionGroup","queryChange")):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",e),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()):this.previousQuery=e)},scrollToOption:function(e){var t=Array.isArray(e)&&e[0]?e[0].$el:e.$el;if(this.$refs.popper&&t){var n=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap");P()(n,t)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()},handleMenuEnter:function(){var e=this;this.$nextTick((function(){return e.scrollToOption(e.selected)}))},emitChange:function(e){Object(D["valueEquals"])(this.value,e)||this.$emit("change",e)},getOption:function(e){for(var t=void 0,n="[object object]"===Object.prototype.toString.call(e).toLowerCase(),r="[object null]"===Object.prototype.toString.call(e).toLowerCase(),i="[object undefined]"===Object.prototype.toString.call(e).toLowerCase(),o=this.cachedOptions.length-1;o>=0;o--){var s=this.cachedOptions[o],a=n?Object(D["getValueByPath"])(s.value,this.valueKey)===Object(D["getValueByPath"])(e,this.valueKey):s.value===e;if(a){t=s;break}}if(t)return t;var c=n||r||i?"":String(e),l={value:e,currentLabel:c};return this.multiple&&(l.hitState=!1),l},setSelected:function(){var e=this;if(!this.multiple){var t=this.getOption(this.value);return t.created?(this.createdLabel=t.currentLabel,this.createdSelected=!0):this.createdSelected=!1,this.selectedLabel=t.currentLabel,this.selected=t,void(this.filterable&&(this.query=this.selectedLabel))}var n=[];Array.isArray(this.value)&&this.value.forEach((function(t){n.push(e.getOption(t))})),this.selected=n,this.$nextTick((function(){e.resetInputHeight()}))},handleFocus:function(e){this.softFocus?this.softFocus=!1:((this.automaticDropdown||this.filterable)&&(this.visible=!0,this.filterable&&(this.menuVisibleOnFocus=!0)),this.$emit("focus",e))},blur:function(){this.visible=!1,this.$refs.reference.blur()},handleBlur:function(e){var t=this;setTimeout((function(){t.isSilentBlur?t.isSilentBlur=!1:t.$emit("blur",e)}),50),this.softFocus=!1},handleClearClick:function(e){this.deleteSelected(e)},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},toggleLastOptionHitState:function(e){if(Array.isArray(this.selected)){var t=this.selected[this.selected.length-1];if(t)return!0===e||!1===e?(t.hitState=e,e):(t.hitState=!t.hitState,t.hitState)}},deletePrevTag:function(e){if(e.target.value.length<=0&&!this.toggleLastOptionHitState()){var t=this.value.slice();t.pop(),this.$emit("input",t),this.emitChange(t)}},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(e){8!==e.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var e=this;this.collapseTags&&!this.filterable||this.$nextTick((function(){if(e.$refs.reference){var t=e.$refs.reference.$el.childNodes,n=[].filter.call(t,(function(e){return"INPUT"===e.tagName}))[0],r=e.$refs.tags,i=r?Math.round(r.getBoundingClientRect().height):0,o=e.initialInputHeight||40;n.style.height=0===e.selected.length?o+"px":Math.max(r?i+(i>o?6:0):0,o)+"px",e.visible&&!1!==e.emptyText&&e.broadcast("ElSelectDropdown","updatePopper")}}))},resetHoverIndex:function(){var e=this;setTimeout((function(){e.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map((function(t){return e.options.indexOf(t)}))):e.hoverIndex=-1:e.hoverIndex=e.options.indexOf(e.selected)}),300)},handleOptionSelect:function(e,t){var n=this;if(this.multiple){var r=(this.value||[]).slice(),i=this.getValueIndex(r,e.value);i>-1?r.splice(i,1):(this.multipleLimit<=0||r.length<this.multipleLimit)&&r.push(e.value),this.$emit("input",r),this.emitChange(r),e.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else this.$emit("input",e.value),this.emitChange(e.value),this.visible=!1;this.isSilentBlur=t,this.setSoftFocus(),this.visible||this.$nextTick((function(){n.scrollToOption(e)}))},setSoftFocus:function(){this.softFocus=!0;var e=this.$refs.input||this.$refs.reference;e&&e.focus()},getValueIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n="[object object]"===Object.prototype.toString.call(t).toLowerCase();if(n){var r=this.valueKey,i=-1;return e.some((function(e,n){return Object(D["getValueByPath"])(e,r)===Object(D["getValueByPath"])(t,r)&&(i=n,!0)})),i}return e.indexOf(t)},toggleMenu:function(){this.selectDisabled||(this.menuVisibleOnFocus?this.menuVisibleOnFocus=!1:this.visible=!this.visible,this.visible&&(this.$refs.input||this.$refs.reference).focus())},selectOption:function(){this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu()},deleteSelected:function(e){e.stopPropagation();var t=this.multiple?[]:"";this.$emit("input",t),this.emitChange(t),this.visible=!1,this.$emit("clear")},deleteTag:function(e,t){var n=this.selected.indexOf(t);if(n>-1&&!this.selectDisabled){var r=this.value.slice();r.splice(n,1),this.$emit("input",r),this.emitChange(r),this.$emit("remove-tag",t.value)}e.stopPropagation()},onInputChange:function(){this.filterable&&this.query!==this.selectedLabel&&(this.query=this.selectedLabel,this.handleQueryChange(this.query))},onOptionDestroy:function(e){e>-1&&(this.optionsCount--,this.filteredOptionsCount--,this.options.splice(e,1))},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},checkDefaultFirstOption:function(){this.hoverIndex=-1;for(var e=!1,t=this.options.length-1;t>=0;t--)if(this.options[t].created){e=!0,this.hoverIndex=t;break}if(!e)for(var n=0;n!==this.options.length;++n){var r=this.options[n];if(this.query){if(!r.disabled&&!r.groupDisabled&&r.visible){this.hoverIndex=n;break}}else if(r.itemSelected){this.hoverIndex=n;break}}},getValueKey:function(e){return"[object object]"!==Object.prototype.toString.call(e.value).toLowerCase()?e.value:Object(D["getValueByPath"])(e.value,this.valueKey)}},created:function(){var e=this;this.cachedPlaceHolder=this.currentPlaceholder=this.propPlaceholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.debouncedOnInputChange=w()(this.debounce,(function(){e.onInputChange()})),this.debouncedQueryChange=w()(this.debounce,(function(t){e.handleQueryChange(t.target.value)})),this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){var e=this;this.multiple&&Array.isArray(this.value)&&this.value.length>0&&(this.currentPlaceholder=""),Object(N["addResizeListener"])(this.$el,this.handleResize);var t=this.$refs.reference;if(t&&t.$el){var n={medium:36,small:32,mini:28},r=t.$el.querySelector("input");this.initialInputHeight=r.getBoundingClientRect().height||n[this.selectSize]}this.remote&&this.multiple&&this.resetInputHeight(),this.$nextTick((function(){t&&t.$el&&(e.inputWidth=t.$el.getBoundingClientRect().width)})),this.setSelected()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(N["removeResizeListener"])(this.$el,this.handleResize)}},U=B,F=Object(E["a"])(U,r,i,!1,null,null,null);F.options.__file="packages/select/src/select.vue";var V=F.exports;V.install=function(e){e.component(V.name,V)};t["default"]=V}})},"4e71":function(e,t,n){n("e198")("observable")},"4ebc":function(e,t,n){var r=n("4d88");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"4fad":function(e,t,n){var r=n("d039"),i=n("861d"),o=n("c6b6"),s=n("d86b"),a=Object.isExtensible,c=r((function(){a(1)}));e.exports=c||s?function(e){return!!i(e)&&((!s||"ArrayBuffer"!=o(e))&&(!a||a(e)))}:a},5087:function(e,t,n){var r=n("da84"),i=n("68ee"),o=n("0d51"),s=r.TypeError;e.exports=function(e){if(i(e))return e;throw s(o(e)+" is not a constructor")}},"50c4":function(e,t,n){var r=n("5926"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},"511f":function(e,t,n){n("0b99"),n("658f"),e.exports=n("fcd4").f("iterator")},5128:function(e,t,n){"use strict";t.__esModule=!0,t.PopupManager=void 0;var r=n("2b0e"),i=h(r),o=n("7f4d"),s=h(o),a=n("4b26"),c=h(a),l=n("e62d"),u=h(l),d=n("5924");function h(e){return e&&e.__esModule?e:{default:e}}var p=1,f=void 0;t.default={props:{visible:{type:Boolean,default:!1},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},modalAppendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},beforeMount:function(){this._popupId="popup-"+p++,c.default.register(this._popupId,this)},beforeDestroy:function(){c.default.deregister(this._popupId),c.default.closeModal(this._popupId),this.restoreBodyStyle()},data:function(){return{opened:!1,bodyPaddingRight:null,computedBodyPaddingRight:0,withoutHiddenClass:!0,rendered:!1}},watch:{visible:function(e){var t=this;if(e){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,i.default.nextTick((function(){t.open()})))}else this.close()}},methods:{open:function(e){var t=this;this.rendered||(this.rendered=!0);var n=(0,s.default)({},this.$props||this,e);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);var r=Number(n.openDelay);r>0?this._openTimer=setTimeout((function(){t._openTimer=null,t.doOpen(n)}),r):this.doOpen(n)},doOpen:function(e){if(!this.$isServer&&(!this.willOpen||this.willOpen())&&!this.opened){this._opening=!0;var t=this.$el,n=e.modal,r=e.zIndex;if(r&&(c.default.zIndex=r),n&&(this._closing&&(c.default.closeModal(this._popupId),this._closing=!1),c.default.openModal(this._popupId,c.default.nextZIndex(),this.modalAppendToBody?void 0:t,e.modalClass,e.modalFade),e.lockScroll)){this.withoutHiddenClass=!(0,d.hasClass)(document.body,"el-popup-parent--hidden"),this.withoutHiddenClass&&(this.bodyPaddingRight=document.body.style.paddingRight,this.computedBodyPaddingRight=parseInt((0,d.getStyle)(document.body,"paddingRight"),10)),f=(0,u.default)();var i=document.documentElement.clientHeight<document.body.scrollHeight,o=(0,d.getStyle)(document.body,"overflowY");f>0&&(i||"scroll"===o)&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.computedBodyPaddingRight+f+"px"),(0,d.addClass)(document.body,"el-popup-parent--hidden")}"static"===getComputedStyle(t).position&&(t.style.position="absolute"),t.style.zIndex=c.default.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.doAfterOpen()}},doAfterOpen:function(){this._opening=!1},close:function(){var e=this;if(!this.willClose||this.willClose()){null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);var t=Number(this.closeDelay);t>0?this._closeTimer=setTimeout((function(){e._closeTimer=null,e.doClose()}),t):this.doClose()}},doClose:function(){this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose()},doAfterClose:function(){c.default.closeModal(this._popupId),this._closing=!1},restoreBodyStyle:function(){this.modal&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.bodyPaddingRight,(0,d.removeClass)(document.body,"el-popup-parent--hidden")),this.withoutHiddenClass=!0}}},t.PopupManager=c.default},"512c":function(e,t,n){var r=n("ef08"),i=n("5524"),o=n("9c0c"),s=n("051b"),a=n("9c0e"),c="prototype",l=function(e,t,n){var u,d,h,p=e&l.F,f=e&l.G,g=e&l.S,m=e&l.P,_=e&l.B,v=e&l.W,E=f?i:i[t]||(i[t]={}),A=E[c],y=f?r:g?r[t]:(r[t]||{})[c];for(u in f&&(n=t),n)d=!p&&y&&void 0!==y[u],d&&a(E,u)||(h=d?y[u]:n[u],E[u]=f&&"function"!=typeof y[u]?n[u]:_&&d?o(h,r):v&&y[u]==h?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[c]=e[c],t}(h):m&&"function"==typeof h?o(Function.call,h):h,m&&((E.virtual||(E.virtual={}))[u]=h,e&l.R&&A&&!A[u]&&s(A,u,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},"512ce":function(e,t,n){var r=n("342f"),i=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},5270:function(e,t,n){"use strict";var r=n("c532"),i=n("c401"),o=n("2e67"),s=n("2444"),a=n("7a77");function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){c(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]}));var t=e.adapter||s.adapter;return t(e).then((function(t){return c(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},5319:function(e,t,n){"use strict";var r=n("2ba4"),i=n("c65b"),o=n("e330"),s=n("d784"),a=n("d039"),c=n("825a"),l=n("1626"),u=n("5926"),d=n("50c4"),h=n("577e"),p=n("1d80"),f=n("8aa5"),g=n("dc4a"),m=n("0cb2"),_=n("14c3"),v=n("b622"),E=v("replace"),A=Math.max,y=Math.min,S=o([].concat),b=o([].push),C=o("".indexOf),T=o("".slice),I=function(e){return void 0===e?e:String(e)},R=function(){return"$0"==="a".replace(/./,"$0")}(),w=function(){return!!/./[E]&&""===/./[E]("a","$0")}(),k=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));s("replace",(function(e,t,n){var o=w?"$":"$0";return[function(e,n){var r=p(this),o=void 0==e?void 0:g(e,E);return o?i(o,e,r,n):i(t,h(r),e,n)},function(e,i){var s=c(this),a=h(e);if("string"==typeof i&&-1===C(i,o)&&-1===C(i,"$<")){var p=n(t,s,a,i);if(p.done)return p.value}var g=l(i);g||(i=h(i));var v=s.global;if(v){var E=s.unicode;s.lastIndex=0}var R=[];while(1){var w=_(s,a);if(null===w)break;if(b(R,w),!v)break;var k=h(w[0]);""===k&&(s.lastIndex=f(a,d(s.lastIndex),E))}for(var O="",N=0,L=0;L<R.length;L++){w=R[L];for(var P=h(w[0]),D=A(y(u(w.index),a.length),0),M=[],x=1;x<w.length;x++)b(M,I(w[x]));var B=w.groups;if(g){var U=S([P],M,D,a);void 0!==B&&b(U,B);var F=h(r(i,void 0,U))}else F=m(P,a,D,M,B,i);D>=N&&(O+=T(a,N,D)+F,N=D+P.length)}return O+T(a,N)}]}),!k||!R||w)},5377:function(e,t,n){var r=n("83ab"),i=n("9bf2"),o=n("ad6d"),s=n("d039"),a=RegExp.prototype,c=r&&s((function(){return"sy"!==Object.getOwnPropertyDescriptor(a,"flags").get.call({dotAll:!0,sticky:!0})}));c&&i.f(a,"flags",{configurable:!0,get:o})},5488:function(e,t,n){"use strict";t.__esModule=!0;var r=n("5924");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e)}return e.prototype.beforeEnter=function(e){(0,r.addClass)(e,"collapse-transition"),e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height="0",e.style.paddingTop=0,e.style.paddingBottom=0},e.prototype.enter=function(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?(e.style.height=e.scrollHeight+"px",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.height="",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},e.prototype.afterEnter=function(e){(0,r.removeClass)(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow},e.prototype.beforeLeave=function(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},e.prototype.leave=function(e){0!==e.scrollHeight&&((0,r.addClass)(e,"collapse-transition"),e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0)},e.prototype.afterLeave=function(e){(0,r.removeClass)(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom},e}();t.default={name:"ElCollapseTransition",functional:!0,render:function(e,t){var n=t.children,r={on:new o};return e("transition",r,n)}}},5524:function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},5692:function(e,t,n){var r=n("c430"),i=n("c6cd");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.3",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},"56ef":function(e,t,n){var r=n("d066"),i=n("e330"),o=n("241c"),s=n("7418"),a=n("825a"),c=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=s.f;return n?c(t,n(e)):t}},"577e":function(e,t,n){var r=n("da84"),i=n("f5df"),o=r.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},5781:function(e,t,n){(function(t){!function(t,n){e.exports=n()}(0,(function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function a(e){i(s,r,o,a,c,"next",e)}function c(e){i(s,r,o,a,c,"throw",e)}a(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t,n){return(f=p()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&h(i,n.prototype),i}).apply(null,arguments)}function g(e){var t="function"==typeof Map?new Map:void 0;return(g=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return f(e,arguments,d(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,e)})(e)}function m(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){var t=p();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function C(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function I(e,t){return e(t={exports:{}},t.exports),t.exports}var R,w,k=function(e){return e&&e.Math==Math&&e},O=k("object"==typeof globalThis&&globalThis)||k("object"==typeof window&&window)||k("object"==typeof self&&self)||k("object"==typeof T&&T)||function(){return this}()||Function("return this")(),N=function(e){try{return!!e()}catch(n){return!0}},L=!N((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),P={}.propertyIsEnumerable,D=Object.getOwnPropertyDescriptor,M={f:D&&!P.call({1:2},1)?function(e){var t=D(this,e);return!!t&&t.enumerable}:P},x=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},B={}.toString,U=function(e){return B.call(e).slice(8,-1)},F="".split,V=N((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==U(e)?F.call(e,""):Object(e)}:Object,j=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},G=function(e){return V(j(e))},H=function(e){return"function"==typeof e},Q=function(e){return"object"==typeof e?null!==e:H(e)},W=function(e){return H(e)?e:void 0},q=function(e,t){return arguments.length<2?W(O[e]):O[e]&&O[e][t]},z=q("navigator","userAgent")||"",Z=O.process,$=O.Deno,K=Z&&Z.versions||$&&$.version,Y=K&&K.v8;Y?w=(R=Y.split("."))[0]<4?1:R[0]+R[1]:z&&(!(R=z.match(/Edge\/(\d+)/))||R[1]>=74)&&(R=z.match(/Chrome\/(\d+)/))&&(w=R[1]);var J=w&&+w,X=!!Object.getOwnPropertySymbols&&!N((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&J&&J<41})),ee=X&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,te=ee?function(e){return"symbol"==typeof e}:function(e){var t=q("Symbol");return H(t)&&Object(e)instanceof t},ne=function(e){try{return String(e)}catch(n){return"Object"}},re=function(e){if(H(e))return e;throw TypeError(ne(e)+" is not a function")},ie=function(e,t){var n=e[t];return null==n?void 0:re(n)},oe=function(e,t){try{Object.defineProperty(O,e,{value:t,configurable:!0,writable:!0})}catch(r){O[e]=t}return t},se=O["__core-js_shared__"]||oe("__core-js_shared__",{}),ae=I((function(e){(e.exports=function(e,t){return se[e]||(se[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.18.2",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),ce=function(e){return Object(j(e))},le={}.hasOwnProperty,ue=Object.hasOwn||function(e,t){return le.call(ce(e),t)},de=0,he=Math.random(),pe=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++de+he).toString(36)},fe=ae("wks"),ge=O.Symbol,me=ee?ge:ge&&ge.withoutSetter||pe,_e=function(e){return ue(fe,e)&&(X||"string"==typeof fe[e])||(X&&ue(ge,e)?fe[e]=ge[e]:fe[e]=me("Symbol."+e)),fe[e]},ve=_e("toPrimitive"),Ee=function(e,t){if(!Q(e)||te(e))return e;var n,r=ie(e,ve);if(r){if(void 0===t&&(t="default"),n=r.call(e,t),!Q(n)||te(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&H(n=e.toString)&&!Q(r=n.call(e)))return r;if(H(n=e.valueOf)&&!Q(r=n.call(e)))return r;if("string"!==t&&H(n=e.toString)&&!Q(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}(e,t)},Ae=function(e){var t=Ee(e,"string");return te(t)?t:String(t)},ye=O.document,Se=Q(ye)&&Q(ye.createElement),be=function(e){return Se?ye.createElement(e):{}},Ce=!L&&!N((function(){return 7!=Object.defineProperty(be("div"),"a",{get:function(){return 7}}).a})),Te=Object.getOwnPropertyDescriptor,Ie={f:L?Te:function(e,t){if(e=G(e),t=Ae(t),Ce)try{return Te(e,t)}catch(r){}if(ue(e,t))return x(!M.f.call(e,t),e[t])}},Re=function(e){if(Q(e))return e;throw TypeError(String(e)+" is not an object")},we=Object.defineProperty,ke={f:L?we:function(e,t,n){if(Re(e),t=Ae(t),Re(n),Ce)try{return we(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Oe=L?function(e,t,n){return ke.f(e,t,x(1,n))}:function(e,t,n){return e[t]=n,e},Ne=Function.toString;H(se.inspectSource)||(se.inspectSource=function(e){return Ne.call(e)});var Le,Pe,De,Me=se.inspectSource,xe=O.WeakMap,Be=H(xe)&&/native code/.test(Me(xe)),Ue=ae("keys"),Fe=function(e){return Ue[e]||(Ue[e]=pe(e))},Ve={},je=O.WeakMap;if(Be||se.state){var Ge=se.state||(se.state=new je),He=Ge.get,Qe=Ge.has,We=Ge.set;Le=function(e,t){if(Qe.call(Ge,e))throw new TypeError("Object already initialized");return t.facade=e,We.call(Ge,e,t),t},Pe=function(e){return He.call(Ge,e)||{}},De=function(e){return Qe.call(Ge,e)}}else{var qe=Fe("state");Ve[qe]=!0,Le=function(e,t){if(ue(e,qe))throw new TypeError("Object already initialized");return t.facade=e,Oe(e,qe,t),t},Pe=function(e){return ue(e,qe)?e[qe]:{}},De=function(e){return ue(e,qe)}}var ze={set:Le,get:Pe,has:De,enforce:function(e){return De(e)?Pe(e):Le(e,{})},getterFor:function(e){return function(t){var n;if(!Q(t)||(n=Pe(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Ze=Function.prototype,$e=L&&Object.getOwnPropertyDescriptor,Ke=ue(Ze,"name"),Ye={EXISTS:Ke,PROPER:Ke&&"something"===function(){}.name,CONFIGURABLE:Ke&&(!L||L&&$e(Ze,"name").configurable)},Je=I((function(e){var t=Ye.CONFIGURABLE,n=ze.get,r=ze.enforce,i=String(String).split("String");(e.exports=function(e,n,o,s){var a,c=!!s&&!!s.unsafe,l=!!s&&!!s.enumerable,u=!!s&&!!s.noTargetGet,d=s&&void 0!==s.name?s.name:n;H(o)&&("Symbol("===String(d).slice(0,7)&&(d="["+String(d).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!ue(o,"name")||t&&o.name!==d)&&Oe(o,"name",d),(a=r(o)).source||(a.source=i.join("string"==typeof d?d:""))),e!==O?(c?!u&&e[n]&&(l=!0):delete e[n],l?e[n]=o:Oe(e,n,o)):l?e[n]=o:oe(n,o)})(Function.prototype,"toString",(function(){return H(this)&&n(this).source||Me(this)}))})),Xe=Math.ceil,et=Math.floor,tt=function(e){var t=+e;return t!=t||0===t?0:(t>0?et:Xe)(t)},nt=Math.max,rt=Math.min,it=function(e,t){var n=tt(e);return n<0?nt(n+t,0):rt(n,t)},ot=Math.min,st=function(e){return e>0?ot(tt(e),9007199254740991):0},at=function(e){return st(e.length)},ct=function(e){return function(t,n,r){var i,o=G(t),s=at(o),a=it(r,s);if(e&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},lt={includes:ct(!0),indexOf:ct(!1)},ut=lt.indexOf,dt=function(e,t){var n,r=G(e),i=0,o=[];for(n in r)!ue(Ve,n)&&ue(r,n)&&o.push(n);for(;t.length>i;)ue(r,n=t[i++])&&(~ut(o,n)||o.push(n));return o},ht=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],pt=ht.concat("length","prototype"),ft={f:Object.getOwnPropertyNames||function(e){return dt(e,pt)}},gt={f:Object.getOwnPropertySymbols},mt=q("Reflect","ownKeys")||function(e){var t=ft.f(Re(e)),n=gt.f;return n?t.concat(n(e)):t},_t=function(e,t){for(var n=mt(t),r=ke.f,i=Ie.f,o=0;o<n.length;o++){var s=n[o];ue(e,s)||r(e,s,i(t,s))}},vt=/#|\.prototype\./,Et=function(e,t){var n=yt[At(e)];return n==bt||n!=St&&(H(t)?N(t):!!t)},At=Et.normalize=function(e){return String(e).replace(vt,".").toLowerCase()},yt=Et.data={},St=Et.NATIVE="N",bt=Et.POLYFILL="P",Ct=Et,Tt=Ie.f,It=function(e,t){var n,r,i,o,s,a=e.target,c=e.global,l=e.stat;if(n=c?O:l?O[a]||oe(a,{}):(O[a]||{}).prototype)for(r in t){if(o=t[r],i=e.noTargetGet?(s=Tt(n,r))&&s.value:n[r],!Ct(c?r:a+(l?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;_t(o,i)}(e.sham||i&&i.sham)&&Oe(o,"sham",!0),Je(n,r,o,e)}},Rt=function(e,t,n){if(re(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},wt=Array.isArray||function(e){return"Array"==U(e)},kt={};kt[_e("toStringTag")]="z";var Ot="[object z]"===String(kt),Nt=_e("toStringTag"),Lt="Arguments"==U(function(){return arguments}()),Pt=Ot?U:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),Nt))?n:Lt?U(t):"Object"==(r=U(t))&&H(t.callee)?"Arguments":r},Dt=[],Mt=q("Reflect","construct"),xt=/^\s*(?:class|function)\b/,Bt=xt.exec,Ut=!xt.exec((function(){})),Ft=function(e){if(!H(e))return!1;try{return Mt(Object,Dt,e),!0}catch(n){return!1}},Vt=!Mt||N((function(){var e;return Ft(Ft.call)||!Ft(Object)||!Ft((function(){e=!0}))||e}))?function(e){if(!H(e))return!1;switch(Pt(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Ut||!!Bt.call(xt,Me(e))}:Ft,jt=_e("species"),Gt=function(e,t){return new(function(e){var t;return wt(e)&&(t=e.constructor,(Vt(t)&&(t===Array||wt(t.prototype))||Q(t)&&null===(t=t[jt]))&&(t=void 0)),void 0===t?Array:t}(e))(0===t?0:t)},Ht=[].push,Qt=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,s=7==e,a=5==e||o;return function(c,l,u,d){for(var h,p,f=ce(c),g=V(f),m=Rt(l,u,3),_=at(g),v=0,E=d||Gt,A=t?E(c,_):n||s?E(c,0):void 0;_>v;v++)if((a||v in g)&&(p=m(h=g[v],v,f),e))if(t)A[v]=p;else if(p)switch(e){case 3:return!0;case 5:return h;case 6:return v;case 2:Ht.call(A,h)}else switch(e){case 4:return!1;case 7:Ht.call(A,h)}return o?-1:r||i?i:A}},Wt={forEach:Qt(0),map:Qt(1),filter:Qt(2),some:Qt(3),every:Qt(4),find:Qt(5),findIndex:Qt(6),filterReject:Qt(7)},qt=_e("species"),zt=function(e){return J>=51||!N((function(){var t=[];return(t.constructor={})[qt]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Zt=Wt.map,$t=zt("map");It({target:"Array",proto:!0,forced:!$t},{map:function(e){return Zt(this,e,arguments.length>1?arguments[1]:void 0)}});var Kt=Wt.filter,Yt=zt("filter");It({target:"Array",proto:!0,forced:!Yt},{filter:function(e){return Kt(this,e,arguments.length>1?arguments[1]:void 0)}});var Jt=Ie.f,Xt=N((function(){Jt(1)}));It({target:"Object",stat:!0,forced:!L||Xt,sham:!L},{getOwnPropertyDescriptor:function(e,t){return Jt(G(e),t)}}),I((function(e){var t=function(e){var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(R){a=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),s=new b(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=A(s,n);if(a){if(a===u)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,s),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var u={};function d(){}function h(){}function p(){}var f={};a(f,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(C([])));m&&m!==t&&n.call(m,i)&&(f=m);var _=p.prototype=d.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;this._invoke=function(i,o){function s(){return new t((function(r,s){!function r(i,o,s,a){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}(i,o,r,s)}))}return r=r?r.then(s,s):s()}}function A(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function y(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function b(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(y,this),this.reset(!0)}function C(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=p,a(_,"constructor",p),a(p,"constructor",h),h.displayName=a(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},v(E.prototype),a(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new E(c(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},v(_),a(_,s,"Generator"),a(_,i,(function(){return this})),a(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,b.prototype={constructor:b,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=t}catch(r){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}));let en=!0,tn=!0;function nn(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function rn(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function on(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(en=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function sn(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(tn=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function an(){if("object"==typeof window){if(en)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function cn(e,t){tn&&console.warn(e+" is deprecated, please use "+t+" instead.")}function ln(e){return"[object Object]"===Object.prototype.toString.call(e)}function un(e){return ln(e)?Object.keys(e).reduce((function(t,n){const r=ln(e[n]),i=r?un(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})}),{}):e}function dn(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(t=>{e.forEach(n=>{n.type===r&&n.trackId===t.id&&function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach(i=>{i.endsWith("Id")?e(t,t.get(n[i]),r):i.endsWith("Ids")&&n[i].forEach(n=>{e(t,t.get(n),r)})}))}(e,n,i)})}),i}const hn=an;function pn(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const s=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then(n=>{let s=(n=n.filter(e=>"videoinput"===e.kind)).find(e=>t.some(t=>e.label.toLowerCase().includes(t)));return!s&&n.length&&t.includes("back")&&(s=n[n.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=r(e.video),hn("chrome: "+JSON.stringify(e)),i(e)})}e.video=r(e.video)}return hn("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,e=>{n.webkitGetUserMedia(e,t,e=>{r&&r(o(e))})})}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(o(e))))}}}function fn(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function gn(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.track.id):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}),t.stream.getTracks().forEach(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.id):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else rn(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function mn(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function _n(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach(e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{n[t]=e.stat(t)}),t[n.id]=n}),t},o=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new Promise((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])}).then(n,r)}}function vn(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>dn(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),rn(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>dn(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach(n=>{n.track===e&&(t?r=!0:t=n)}),this.getReceivers().forEach(t=>(t.track===e&&(n?r=!0:n=t),t.track===e)),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function En(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),i.apply(this,arguments)}}function An(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return En(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}function s(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const i=this.getSenders().find(e=>e.track===t);if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then(e=>o(this,e))}};e.RTCPeerConnection.prototype[t]=r[t]}));const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=s(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=c.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(n=>{this._streams[n].getTracks().find(t=>e.track===t)&&(t=this._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function yn(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function Sn(e,t){rn(e,"negotiationneeded",e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e})}var bn=Object.freeze({__proto__:null,shimMediaStream:fn,shimOnTrack:gn,shimGetSendersWithDtmf:mn,shimGetStats:_n,shimSenderReceiverGetStats:vn,shimAddTrackRemoveTrackWithNative:En,shimAddTrackRemoveTrack:An,shimPeerConnection:yn,fixNegotiationNeeded:Sn,shimGetUserMedia:pn,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),Cn=I((function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],s=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=t.parseRtpMap(s),c=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?t.parseFmtp(c[0]):{},a.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(a.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var i=0;return n.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),r+="a=rtcp-mux\r\n",n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],i=t.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,l=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));l.length>0&&l[0].length>1&&l[0][0]===c&&(n=l[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),o&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=u}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;var o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(n=i[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");i.length>0&&(n=parseInt(i[0].substr(19),10)),isNaN(n)&&(n=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};if(t.matchPrefix(e,"a=sctpmap:").length>0){var s=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,r,i){var o=t.writeRtpDescription(e.kind,n);if(o+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),o},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t}));function Tn(e,t,n,r,i){var o=Cn.writeRtpDescription(e.kind,t);if(o+=Cn.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=Cn.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var a="msid:"+(r?r.id:"-")+" "+s+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+Cn.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+Cn.localCName+"\r\n"),o}function In(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),s=r(t.parameters.apt,i);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.clockRate===s.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&!i(r,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(r.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}})),n}function Rn(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function wn(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function kn(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}var On=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function r(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var i=function(n){var r=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){r[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw kn("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=i?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var o=n.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=Cn.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(i.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(i.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),i.prototype.onicecandidate=null,i.prototype.onaddstream=null,i.prototype.ontrack=null,i.prototype.onremovestream=null,i.prototype.onsignalingstatechange=null,i.prototype.oniceconnectionstatechange=null,i.prototype.onconnectionstatechange=null,i.prototype.onicegatheringstatechange=null,i.prototype.onnegotiationneeded=null,i.prototype.ondatachannel=null,i.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},i.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},i.prototype.getConfiguration=function(){return this._config},i.prototype.getLocalStreams=function(){return this.localStreams},i.prototype.getRemoteStreams=function(){return this.remoteStreams},i.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},i.prototype.addTrack=function(t,n){if(this._isClosed)throw kn("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw kn("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},i.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},i.prototype.removeTrack=function(t){if(this._isClosed)throw kn("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw kn("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},i.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},i.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},i.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},i.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},i.prototype._gather=function(t,n){var r=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var o=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(r.usingBundle&&n>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,a=!s||0===Object.keys(s).length;if(a)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),s.component=1,s.ufrag=i.getLocalParameters().usernameFragment;var c=Cn.writeCandidate(s);o.candidate=Object.assign(o.candidate,Cn.parseCandidate(c)),o.candidate.candidate=c,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var l=Cn.getMediaSections(r._localDescription.sdp);l[o.candidate.sdpMLineIndex]+=a?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",r._localDescription.sdp=Cn.getDescription(r._localDescription.sdp)+l.join("");var u=r.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),a||r._dispatchEvent("icecandidate",o),u&&(r._dispatchEvent("icecandidate",new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange())}},e.setTimeout((function(){o.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},i.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},i.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},i.prototype._transceive=function(e,n,r){var i=In(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:Cn.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),r&&e.rtpReceiver&&i.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},i.prototype.setLocalDescription=function(e){var t,n,r=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(kn("TypeError",'Unsupported type "'+e.type+'"'));if(!Rn("setLocalDescription",e.type,r.signalingState)||r._isClosed)return Promise.reject(kn("InvalidStateError","Can not set local "+e.type+" in state "+r.signalingState));if("offer"===e.type)t=Cn.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=Cn.parseRtpParameters(e);r.transceivers[t].localCapabilities=n})),r.transceivers.forEach((function(e,t){r._gather(e.mid,t)}));else if("answer"===e.type){t=Cn.splitSections(r._remoteDescription.sdp),n=t.shift();var i=Cn.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var o=r.transceivers[t],s=o.iceGatherer,a=o.iceTransport,c=o.dtlsTransport,l=o.localCapabilities,u=o.remoteCapabilities;if((!Cn.isRejected(e)||0!==Cn.matchPrefix(e,"a=bundle-only").length)&&!o.rejected){var d=Cn.getIceParameters(e,n),h=Cn.getDtlsParameters(e,n);i&&(h.role="server"),r.usingBundle&&0!==t||(r._gather(o.mid,t),"new"===a.state&&a.start(s,d,i?"controlling":"controlled"),"new"===c.state&&c.start(h));var p=In(l,u);r._transceive(o,p.codecs.length>0,!1)}}))}return r._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?r._updateSignalingState("have-local-offer"):r._updateSignalingState("stable"),Promise.resolve()},i.prototype.setRemoteDescription=function(i){var o=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(kn("TypeError",'Unsupported type "'+i.type+'"'));if(!Rn("setRemoteDescription",i.type,o.signalingState)||o._isClosed)return Promise.reject(kn("InvalidStateError","Can not set remote "+i.type+" in state "+o.signalingState));var s={};o.remoteStreams.forEach((function(e){s[e.id]=e}));var a=[],c=Cn.splitSections(i.sdp),l=c.shift(),u=Cn.matchPrefix(l,"a=ice-lite").length>0,d=Cn.matchPrefix(l,"a=group:BUNDLE ").length>0;o.usingBundle=d;var h=Cn.matchPrefix(l,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!h&&h.substr(14).split(" ").indexOf("trickle")>=0,c.forEach((function(r,c){var h=Cn.splitLines(r),p=Cn.getKind(r),f=Cn.isRejected(r)&&0===Cn.matchPrefix(r,"a=bundle-only").length,g=h[0].substr(2).split(" ")[2],m=Cn.getDirection(r,l),_=Cn.parseMsid(r),v=Cn.getMid(r)||Cn.generateIdentifier();if(f||"application"===p&&("DTLS/SCTP"===g||"UDP/DTLS/SCTP"===g))o.transceivers[c]={mid:v,kind:p,protocol:g,rejected:!0};else{var E,A,y,S,b,C,T,I,R;!f&&o.transceivers[c]&&o.transceivers[c].rejected&&(o.transceivers[c]=o._createTransceiver(p,!0));var w,k,O=Cn.parseRtpParameters(r);f||(w=Cn.getIceParameters(r,l),(k=Cn.getDtlsParameters(r,l)).role="client"),T=Cn.parseRtpEncodingParameters(r);var N=Cn.parseRtcpParameters(r),L=Cn.matchPrefix(r,"a=end-of-candidates",l).length>0,P=Cn.matchPrefix(r,"a=candidate:").map((function(e){return Cn.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!f&&d&&c>0&&o.transceivers[c]&&(o._disposeIceAndDtlsTransports(c),o.transceivers[c].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[c].iceTransport=o.transceivers[0].iceTransport,o.transceivers[c].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[c].rtpSender&&o.transceivers[c].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[c].rtpReceiver&&o.transceivers[c].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==i.type||f)"answer"!==i.type||f||(A=(E=o.transceivers[c]).iceGatherer,y=E.iceTransport,S=E.dtlsTransport,b=E.rtpReceiver,C=E.sendEncodingParameters,I=E.localCapabilities,o.transceivers[c].recvEncodingParameters=T,o.transceivers[c].remoteCapabilities=O,o.transceivers[c].rtcpParameters=N,P.length&&"new"===y.state&&(!u&&!L||d&&0!==c?P.forEach((function(e){wn(E.iceTransport,e)})):y.setRemoteCandidates(P)),d&&0!==c||("new"===y.state&&y.start(A,w,"controlling"),"new"===S.state&&S.start(k)),!In(E.localCapabilities,E.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&E.sendEncodingParameters[0].rtx&&delete E.sendEncodingParameters[0].rtx,o._transceive(E,"sendrecv"===m||"recvonly"===m,"sendrecv"===m||"sendonly"===m),!b||"sendrecv"!==m&&"sendonly"!==m?delete E.rtpReceiver:(R=b.track,_?(s[_.stream]||(s[_.stream]=new e.MediaStream),n(R,s[_.stream]),a.push([R,b,s[_.stream]])):(s.default||(s.default=new e.MediaStream),n(R,s.default),a.push([R,b,s.default]))));else{(E=o.transceivers[c]||o._createTransceiver(p)).mid=v,E.iceGatherer||(E.iceGatherer=o._createIceGatherer(c,d)),P.length&&"new"===E.iceTransport.state&&(!L||d&&0!==c?P.forEach((function(e){wn(E.iceTransport,e)})):E.iceTransport.setRemoteCandidates(P)),I=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(I.codecs=I.codecs.filter((function(e){return"rtx"!==e.name}))),C=E.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var D,M=!1;"sendrecv"===m||"sendonly"===m?(M=!E.rtpReceiver,b=E.rtpReceiver||new e.RTCRtpReceiver(E.dtlsTransport,p),M&&(R=b.track,_&&"-"===_.stream||(_?(s[_.stream]||(s[_.stream]=new e.MediaStream,Object.defineProperty(s[_.stream],"id",{get:function(){return _.stream}})),Object.defineProperty(R,"id",{get:function(){return _.track}}),D=s[_.stream]):(s.default||(s.default=new e.MediaStream),D=s.default)),D&&(n(R,D),E.associatedRemoteMediaStreams.push(D)),a.push([R,b,D]))):E.rtpReceiver&&E.rtpReceiver.track&&(E.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===E.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),E.associatedRemoteMediaStreams=[]),E.localCapabilities=I,E.remoteCapabilities=O,E.rtpReceiver=b,E.rtcpParameters=N,E.sendEncodingParameters=C,E.recvEncodingParameters=T,o._transceive(o.transceivers[c],!1,M)}}})),void 0===o._dtlsRole&&(o._dtlsRole="offer"===i.type?"active":"passive"),o._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(s).forEach((function(t){var n=s[t];if(n.getTracks().length){if(-1===o.remoteStreams.indexOf(n)){o.remoteStreams.push(n);var i=new Event("addstream");i.stream=n,e.setTimeout((function(){o._dispatchEvent("addstream",i)}))}a.forEach((function(e){var t=e[0],i=e[1];n.id===e[2].id&&r(o,t,i,[n])}))}})),a.forEach((function(e){e[2]||r(o,e[0],e[1],[])})),e.setTimeout((function(){o&&o.transceivers&&o.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},i.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},i.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},i.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},i.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},i.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},i.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(kn("InvalidStateError","Can not call createOffer after close"));var r=n.transceivers.filter((function(e){return"audio"===e.kind})).length,i=n.transceivers.filter((function(e){return"video"===e.kind})).length,o=arguments[0];if(o){if(o.mandatory||o.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==o.offerToReceiveAudio&&(r=!0===o.offerToReceiveAudio?1:!1===o.offerToReceiveAudio?0:o.offerToReceiveAudio),void 0!==o.offerToReceiveVideo&&(i=!0===o.offerToReceiveVideo?1:!1===o.offerToReceiveVideo?0:o.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--r<0&&(e.wantReceive=!1):"video"===e.kind&&--i<0&&(e.wantReceive=!1)}));r>0||i>0;)r>0&&(n._createTransceiver("audio"),r--),i>0&&(n._createTransceiver("video"),i--);var s=Cn.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(r,i){var o=r.track,s=r.kind,a=r.mid||Cn.generateIdentifier();r.mid=a,r.iceGatherer||(r.iceGatherer=n._createIceGatherer(i,n.usingBundle));var c=e.RTCRtpSender.getCapabilities(s);t<15019&&(c.codecs=c.codecs.filter((function(e){return"rtx"!==e.name}))),c.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=r.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];o&&t>=15019&&"video"===s&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new e.RTCRtpReceiver(r.dtlsTransport,s)),r.localCapabilities=c,r.sendEncodingParameters=l})),"max-compat"!==n._config.bundlePolicy&&(s+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){s+=Tn(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),s+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,s+="a="+Cn.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(s+="a=end-of-candidates\r\n"))}));var a=new e.RTCSessionDescription({type:"offer",sdp:s});return Promise.resolve(a)},i.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(kn("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(kn("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var r=Cn.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(r+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),r+="a=ice-options:trickle\r\n";var i=Cn.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,o){if(!(o+1>i)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?r+="m=application 0 DTLS/SCTP 5000\r\n":r+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?r+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(r+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(r+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var s;e.stream&&("audio"===e.kind?s=e.stream.getAudioTracks()[0]:"video"===e.kind&&(s=e.stream.getVideoTracks()[0]),s&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var a=In(e.localCapabilities,e.remoteCapabilities);!a.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,r+=Tn(e,a,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(r+="a=rtcp-rsize\r\n")}}));var o=new e.RTCSessionDescription({type:"answer",sdp:r});return Promise.resolve(o)},i.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(r,i){if(!n._remoteDescription)return i(kn("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var s=0;s<n.transceivers.length;s++)if(n.transceivers[s].mid===e.sdpMid){o=s;break}var a=n.transceivers[o];if(!a)return i(kn("OperationError","Can not add ICE candidate"));if(a.rejected)return r();var c=Object.keys(e.candidate).length>0?Cn.parseCandidate(e.candidate):{};if("tcp"===c.protocol&&(0===c.port||9===c.port))return r();if(c.component&&1!==c.component)return r();if((0===o||o>0&&a.iceTransport!==n.transceivers[0].iceTransport)&&!wn(a.iceTransport,c))return i(kn("OperationError","Can not add ICE candidate"));var l=e.candidate.trim();0===l.indexOf("a=")&&(l=l.substr(2)),(t=Cn.getMediaSections(n._remoteDescription.sdp))[o]+="a="+(c.type?l:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=Cn.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var u=0;u<n.transceivers.length&&(n.transceivers[u].rejected||(n.transceivers[u].iceTransport.addRemoteCandidate({}),(t=Cn.getMediaSections(n._remoteDescription.sdp))[u]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=Cn.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));u++);r()}))},i.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw kn("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var o=["createOffer","createAnswer"];return o.forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(o=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),i};function Nn(e){const t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function Ln(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function Pn(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=On(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&cn("RTCIceServer.url","RTCIceServer.urls");const r="string"==typeof t;return r&&(t=[t]),t=t.filter(e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n}),delete e.url,e.urls=r?t[0]:t,!!t.length}})}(e.iceServers,t.version),an("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function Dn(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var Mn=Object.freeze({__proto__:null,shimPeerConnection:Pn,shimReplaceTrack:Dn,shimGetUserMedia:Nn,shimGetDisplayMedia:Ln});function xn(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){cn("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function Bn(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Un(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then(e=>{if(t.version<53&&!i)try{e.forEach(e=>{e.type=n[e.type]||e.type})}catch(r){if("TypeError"!==r.name)throw r;e.forEach((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(i,o)}}function Fn(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Vn(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),rn(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function jn(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){cn("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function Gn(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Hn(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then(()=>{delete t.sendEncodings}).catch(()=>{delete t.sendEncodings})))}return r})}function Qn(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Wn(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function qn(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var zn=Object.freeze({__proto__:null,shimOnTrack:Bn,shimPeerConnection:Un,shimSenderGetStats:Fn,shimReceiverGetStats:Vn,shimRemoveStream:jn,shimRTCDataChannel:Gn,shimAddTransceiver:Hn,shimGetParameters:Qn,shimCreateOffer:Wn,shimCreateAnswer:qn,shimGetUserMedia:xn,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}});function Zn(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(n=>t.call(this,n,e)),e.getVideoTracks().forEach(n=>t.call(this,n,e))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach(e=>{n.includes(e.track)&&this.removeTrack(e)})})}}function $n(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)})}),t.apply(e,arguments)}}}function Kn(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=a}function Yn(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(Jn(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Jn(e){return e&&void 0!==e.video?Object.assign({},e,{video:un(e.video)}):e}function Xn(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(cn("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function er(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function tr(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function nr(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var rr=Object.freeze({__proto__:null,shimLocalStreamsAPI:Zn,shimRemoteStreamsAPI:$n,shimCallbacksAPI:Kn,shimGetUserMedia:Yn,shimConstraints:Jn,shimRTCIceServerUrls:Xn,shimTrackEventTransceiver:er,shimCreateOfferLegacy:tr,shimAudioContext:nr});function ir(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=Cn.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,rn(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function or(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=Cn.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=Cn.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=Cn.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=i(e),n=o(arguments[0],e);let s;s=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const a={};Object.defineProperty(a,"maxMessageSize",{get:()=>s}),this._sctp=a}return s.apply(this,arguments)}}function sr(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},rn(e,"datachannel",e=>(t(e.channel,e.target),e))}function ar(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function cr(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function lr(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var ur=Object.freeze({__proto__:null,shimRTCIceCandidate:ir,shimMaxMessageSize:or,shimSendThrowTypeError:sr,shimConnectionState:ar,removeExtmapAllowMixed:cr,shimAddIceCandidateNullOrEmpty:lr});!function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=an,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=nn(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=nn(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=nn(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=nn(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:ur,extractVersion:nn,disableLog:on,disableWarnings:sn};switch(r.browser){case"chrome":if(!bn||!yn||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=bn,lr(e,r),pn(e,r),fn(e),yn(e,r),gn(e),An(e,r),mn(e),_n(e),vn(e),Sn(e,r),ir(e),ar(e),or(e,r),sr(e),cr(e,r);break;case"firefox":if(!zn||!Un||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=zn,lr(e,r),xn(e,r),Un(e,r),Bn(e),jn(e),Fn(e),Vn(e),Gn(e),Hn(e),Qn(e),Wn(e),qn(e),ir(e),ar(e),or(e,r),sr(e);break;case"edge":if(!Mn||!Pn||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),i;n("adapter.js shimming edge."),i.browserShim=Mn,Nn(e),Ln(e),Pn(e,r),Dn(e),or(e,r),sr(e);break;case"safari":if(!rr||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=rr,lr(e,r),Xn(e),tr(e),Kn(e),Zn(e),$n(e),er(e),Yn(e),nr(e),ir(e),or(e,r),sr(e),cr(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var dr=[].slice,hr=/MSIE .\./.test(z),pr=function(e){return function(t,n){var r=arguments.length>2,i=r?dr.call(arguments,2):void 0;return e(r?function(){(H(t)?t:Function(t)).apply(this,i)}:t,n)}};It({global:!0,bind:!0,forced:hr},{setTimeout:pr(O.setTimeout),setInterval:pr(O.setInterval)});var fr,gr=Object.keys||function(e){return dt(e,ht)},mr=L?Object.defineProperties:function(e,t){Re(e);for(var n,r=gr(t),i=r.length,o=0;i>o;)ke.f(e,n=r[o++],t[n]);return e},_r=q("document","documentElement"),vr=Fe("IE_PROTO"),Er=function(){},Ar=function(e){return"<script>"+e+"<\/script>"},yr=function(e){e.write(Ar("")),e.close();var t=e.parentWindow.Object;return e=null,t},Sr=function(){try{fr=new ActiveXObject("htmlfile")}catch(i){}var e,t;Sr="undefined"!=typeof document?document.domain&&fr?yr(fr):((t=be("iframe")).style.display="none",_r.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Ar("document.F=Object")),e.close(),e.F):yr(fr);for(var n=ht.length;n--;)delete Sr.prototype[ht[n]];return Sr()};Ve[vr]=!0;var br=Object.create||function(e,t){var n;return null!==e?(Er.prototype=Re(e),n=new Er,Er.prototype=null,n[vr]=e):n=Sr(),void 0===t?n:mr(n,t)},Cr=_e("unscopables"),Tr=Array.prototype;null==Tr[Cr]&&ke.f(Tr,Cr,{configurable:!0,value:br(null)});var Ir,Rr,wr,kr=function(e){Tr[Cr][e]=!0},Or={},Nr=!N((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Lr=Fe("IE_PROTO"),Pr=Object.prototype,Dr=Nr?Object.getPrototypeOf:function(e){var t=ce(e);if(ue(t,Lr))return t[Lr];var n=t.constructor;return H(n)&&t instanceof n?n.prototype:t instanceof Object?Pr:null},Mr=_e("iterator"),xr=!1;[].keys&&("next"in(wr=[].keys())?(Rr=Dr(Dr(wr)))!==Object.prototype&&(Ir=Rr):xr=!0),(null==Ir||N((function(){var e={};return Ir[Mr].call(e)!==e})))&&(Ir={}),H(Ir[Mr])||Je(Ir,Mr,(function(){return this}));var Br={IteratorPrototype:Ir,BUGGY_SAFARI_ITERATORS:xr},Ur=ke.f,Fr=_e("toStringTag"),Vr=function(e,t,n){e&&!ue(e=n?e:e.prototype,Fr)&&Ur(e,Fr,{configurable:!0,value:t})},jr=Br.IteratorPrototype,Gr=function(){return this},Hr=function(e,t,n){var r=t+" Iterator";return e.prototype=br(jr,{next:x(1,n)}),Vr(e,r,!1),Or[r]=Gr,e},Qr=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(i){}return function(n,r){return Re(n),function(e){if("object"==typeof e||H(e))return e;throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),Wr=Ye.PROPER,qr=Ye.CONFIGURABLE,zr=Br.IteratorPrototype,Zr=Br.BUGGY_SAFARI_ITERATORS,$r=_e("iterator"),Kr=function(){return this},Yr=function(e,t,n,r,i,o,s){Hr(n,t,r);var a,c,l,u=function(e){if(e===i&&g)return g;if(!Zr&&e in p)return p[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",h=!1,p=e.prototype,f=p[$r]||p["@@iterator"]||i&&p[i],g=!Zr&&f||u(i),m="Array"==t&&p.entries||f;if(m&&(a=Dr(m.call(new e)))!==Object.prototype&&a.next&&(Dr(a)!==zr&&(Qr?Qr(a,zr):H(a[$r])||Je(a,$r,Kr)),Vr(a,d,!0)),Wr&&"values"==i&&f&&"values"!==f.name&&(qr?Oe(p,"name","values"):(h=!0,g=function(){return f.call(this)})),i)if(c={values:u("values"),keys:o?g:u("keys"),entries:u("entries")},s)for(l in c)(Zr||h||!(l in p))&&Je(p,l,c[l]);else It({target:t,proto:!0,forced:Zr||h},c);return p[$r]!==g&&Je(p,$r,g,{name:i}),Or[t]=g,c},Jr=ze.set,Xr=ze.getterFor("Array Iterator"),ei=Yr(Array,"Array",(function(e,t){Jr(this,{type:"Array Iterator",target:G(e),index:0,kind:t})}),(function(){var e=Xr(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");Or.Arguments=Or.Array,kr("keys"),kr("values"),kr("entries");var ti=ft.f,ni={}.toString,ri="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ii={f:function(e){return ri&&"[object Window]"==ni.call(e)?function(e){try{return ti(e)}catch(n){return ri.slice()}}(e):ti(G(e))}},oi=!N((function(){return Object.isExtensible(Object.preventExtensions({}))})),si=I((function(e){var t=ke.f,n=!1,r=pe("meta"),i=0,o=Object.isExtensible||function(){return!0},s=function(e){t(e,r,{value:{objectID:"O"+i++,weakData:{}}})},a=e.exports={enable:function(){a.enable=function(){},n=!0;var e=ft.f,t=[].splice,i={};i[r]=1,e(i).length&&(ft.f=function(n){for(var i=e(n),o=0,s=i.length;o<s;o++)if(i[o]===r){t.call(i,o,1);break}return i},It({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:ii.f}))},fastKey:function(e,t){if(!Q(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!ue(e,r)){if(!o(e))return"F";if(!t)return"E";s(e)}return e[r].objectID},getWeakData:function(e,t){if(!ue(e,r)){if(!o(e))return!0;if(!t)return!1;s(e)}return e[r].weakData},onFreeze:function(e){return oi&&n&&o(e)&&!ue(e,r)&&s(e),e}};Ve[r]=!0})),ai=(si.enable,si.fastKey,si.getWeakData,si.onFreeze,_e("iterator")),ci=Array.prototype,li=_e("iterator"),ui=function(e){if(null!=e)return ie(e,li)||ie(e,"@@iterator")||Or[Pt(e)]},di=function(e,t){var n=arguments.length<2?ui(e):t;if(re(n))return Re(n.call(e));throw TypeError(String(e)+" is not iterable")},hi=function(e,t,n){var r,i;Re(e);try{if(!(r=ie(e,"return"))){if("throw"===t)throw n;return n}r=r.call(e)}catch(s){i=!0,r=s}if("throw"===t)throw n;if(i)throw r;return Re(r),n},pi=function(e,t){this.stopped=e,this.result=t},fi=function(e,t,n){var r,i,o,s,a,c,l,u,d=n&&n.that,h=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),g=Rt(t,d,1+h+f),m=function(e){return r&&hi(r,"normal",e),new pi(!0,e)},_=function(e){return h?(Re(e),f?g(e[0],e[1],m):g(e[0],e[1])):f?g(e,m):g(e)};if(p)r=e;else{if(!(i=ui(e)))throw TypeError(String(e)+" is not iterable");if(void 0!==(u=i)&&(Or.Array===u||ci[ai]===u)){for(o=0,s=at(e);s>o;o++)if((a=_(e[o]))&&a instanceof pi)return a;return new pi(!1)}r=di(e,i)}for(c=r.next;!(l=c.call(r)).done;){try{a=_(l.value)}catch(E){hi(r,"throw",E)}if("object"==typeof a&&a&&a instanceof pi)return a}return new pi(!1)},gi=function(e,t,n){if(e instanceof t)return e;throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")},mi=_e("iterator"),_i=!1;try{var vi=0,Ei={next:function(){return{done:!!vi++}},return:function(){_i=!0}};Ei[mi]=function(){return this},Array.from(Ei,(function(){throw 2}))}catch(ky){}var Ai=function(e,t){if(!t&&!_i)return!1;var n=!1;try{var r={};r[mi]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(ky){}return n},yi=function(e,t,n){var r,i;return Qr&&H(r=t.constructor)&&r!==n&&Q(i=r.prototype)&&i!==n.prototype&&Qr(e,i),e},Si=function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",s=O[e],a=s&&s.prototype,c=s,l={},u=function(e){var t=a[e];Je(a,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!Q(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return i&&!Q(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!Q(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(Ct(e,!H(s)||!(i||a.forEach&&!N((function(){(new s).entries().next()})))))c=n.getConstructor(t,e,r,o),si.enable();else if(Ct(e,!0)){var d=new c,h=d[o](i?{}:-0,1)!=d,p=N((function(){d.has(1)})),f=Ai((function(e){new s(e)})),g=!i&&N((function(){for(var e=new s,t=5;t--;)e[o](t,t);return!e.has(-0)}));f||((c=t((function(t,n){gi(t,c,e);var i=yi(new s,t,c);return null!=n&&fi(n,i[o],{that:i,AS_ENTRIES:r}),i}))).prototype=a,a.constructor=c),(p||g)&&(u("delete"),u("has"),r&&u("get")),(g||h)&&u(o),i&&a.clear&&delete a.clear}return l[e]=c,It({global:!0,forced:c!=s},l),Vr(c,e),i||n.setStrong(c,e,r),c},bi=function(e,t,n){for(var r in t)Je(e,r,t[r],n);return e},Ci=_e("species"),Ti=function(e){var t=q(e),n=ke.f;L&&t&&!t[Ci]&&n(t,Ci,{configurable:!0,get:function(){return this}})},Ii=ke.f,Ri=si.fastKey,wi=ze.set,ki=ze.getterFor,Oi={getConstructor:function(e,t,n,r){var i=e((function(e,o){gi(e,i,t),wi(e,{type:t,index:br(null),first:void 0,last:void 0,size:0}),L||(e.size=0),null!=o&&fi(o,e[r],{that:e,AS_ENTRIES:n})})),o=ki(t),s=function(e,t,n){var r,i,s=o(e),c=a(e,t);return c?c.value=n:(s.last=c={index:i=Ri(t,!0),key:t,value:n,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=c),r&&(r.next=c),L?s.size++:e.size++,"F"!==i&&(s.index[i]=c)),e},a=function(e,t){var n,r=o(e),i=Ri(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return bi(i.prototype,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,L?e.size=0:this.size=0},delete:function(e){var t=o(this),n=a(this,e);if(n){var r=n.next,i=n.previous;delete t.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),t.first==n&&(t.first=r),t.last==n&&(t.last=i),L?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=o(this),r=Rt(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!a(this,e)}}),bi(i.prototype,n?{get:function(e){var t=a(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),L&&Ii(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=ki(t),o=ki(r);Yr(e,t,(function(e,t){wi(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),Ti(t)}},Ni=(Si("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Oi),Ot?{}.toString:function(){return"[object "+Pt(this)+"]"});Ot||Je(Object.prototype,"toString",Ni,{unsafe:!0});var Li=function(e){if("Symbol"===Pt(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)},Pi=function(e){return function(t,n){var r,i,o=Li(j(t)),s=tt(n),a=o.length;return s<0||s>=a?e?"":void 0:(r=o.charCodeAt(s))<55296||r>56319||s+1===a||(i=o.charCodeAt(s+1))<56320||i>57343?e?o.charAt(s):r:e?o.slice(s,s+2):i-56320+(r-55296<<10)+65536}},Di={codeAt:Pi(!1),charAt:Pi(!0)},Mi=Di.charAt,xi=ze.set,Bi=ze.getterFor("String Iterator");Yr(String,"String",(function(e){xi(this,{type:"String Iterator",string:Li(e),index:0})}),(function(){var e,t=Bi(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=Mi(n,r),t.index+=e.length,{value:e,done:!1})}));var Ui={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Fi=be("span").classList,Vi=Fi&&Fi.constructor&&Fi.constructor.prototype,ji=Vi===Object.prototype?void 0:Vi,Gi=_e("iterator"),Hi=_e("toStringTag"),Qi=ei.values,Wi=function(e,t){if(e){if(e[Gi]!==Qi)try{Oe(e,Gi,Qi)}catch(ky){e[Gi]=Qi}if(e[Hi]||Oe(e,Hi,t),Ui[t])for(var n in ei)if(e[n]!==ei[n])try{Oe(e,n,ei[n])}catch(ky){e[n]=ei[n]}}};for(var qi in Ui)Wi(O[qi]&&O[qi].prototype,qi);Wi(ji,"DOMTokenList");var zi=function(e,t,n){var r=Ae(t);r in e?ke.f(e,r,x(0,n)):e[r]=n},Zi=zt("splice"),$i=Math.max,Ki=Math.min;It({target:"Array",proto:!0,forced:!Zi},{splice:function(e,t){var n,r,i,o,s,a,c=ce(this),l=at(c),u=it(e,l),d=arguments.length;if(0===d?n=r=0:1===d?(n=0,r=l-u):(n=d-2,r=Ki($i(tt(t),0),l-u)),l+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(i=Gt(c,r),o=0;o<r;o++)(s=u+o)in c&&zi(i,o,c[s]);if(i.length=r,n<r){for(o=u;o<l-r;o++)a=o+n,(s=o+r)in c?c[a]=c[s]:delete c[a];for(o=l;o>l-r+n;o--)delete c[o-1]}else if(n>r)for(o=l-r;o>u;o--)a=o+n-1,(s=o+r-1)in c?c[a]=c[s]:delete c[a];for(o=0;o<n;o++)c[o+u]=arguments[o+2];return c.length=l-r+n,i}});var Yi=function(e,t){var n=[][e];return!!n&&N((function(){n.call(null,t||function(){throw 1},1)}))},Ji=Wt.forEach,Xi=Yi("forEach")?[].forEach:function(e){return Ji(this,e,arguments.length>1?arguments[1]:void 0)};It({target:"Array",proto:!0,forced:[].forEach!=Xi},{forEach:Xi});var eo=function(e){if(e&&e.forEach!==Xi)try{Oe(e,"forEach",Xi)}catch(ky){e.forEach=Xi}};for(var to in Ui)Ui[to]&&eo(O[to]&&O[to].prototype);eo(ji);var no=[].join,ro=V!=Object,io=Yi("join",",");It({target:"Array",proto:!0,forced:ro||!io},{join:function(e){return no.call(G(this),void 0===e?",":e)}});var oo=_e("isConcatSpreadable"),so=J>=51||!N((function(){var e=[];return e[oo]=!1,e.concat()[0]!==e})),ao=zt("concat"),co=function(e){if(!Q(e))return!1;var t=e[oo];return void 0!==t?!!t:wt(e)};It({target:"Array",proto:!0,forced:!so||!ao},{concat:function(e){var t,n,r,i,o,s=ce(this),a=Gt(s,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(co(o=-1===t?s:arguments[t])){if(c+(i=at(o))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,c++)n in o&&zi(a,c,o[n])}else{if(c>=9007199254740991)throw TypeError("Maximum allowed index exceeded");zi(a,c++,o)}return a.length=c,a}});var lo=Date.prototype,uo=lo.toString,ho=lo.getTime;"Invalid Date"!=String(new Date(NaN))&&Je(lo,"toString",(function(){var e=ho.call(this);return e==e?uo.call(this):"Invalid Date"}));var po=function(){var e=Re(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},fo=O.RegExp,go={UNSUPPORTED_Y:N((function(){var e=fo("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),BROKEN_CARET:N((function(){var e=fo("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},mo=O.RegExp,_o=N((function(){var e=mo(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),vo=O.RegExp,Eo=N((function(){var e=vo("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),Ao=ze.get,yo=RegExp.prototype.exec,So=ae("native-string-replace",String.prototype.replace),bo=yo,Co=function(){var e=/a/,t=/b*/g;return yo.call(e,"a"),yo.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),To=go.UNSUPPORTED_Y||go.BROKEN_CARET,Io=void 0!==/()??/.exec("")[1];(Co||Io||To||_o||Eo)&&(bo=function(e){var t,n,r,i,o,s,a,c=this,l=Ao(c),u=Li(e),d=l.raw;if(d)return d.lastIndex=c.lastIndex,t=bo.call(d,u),c.lastIndex=d.lastIndex,t;var h=l.groups,p=To&&c.sticky,f=po.call(c),g=c.source,m=0,_=u;if(p&&(-1===(f=f.replace("y","")).indexOf("g")&&(f+="g"),_=u.slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==u.charAt(c.lastIndex-1))&&(g="(?: "+g+")",_=" "+_,m++),n=new RegExp("^(?:"+g+")",f)),Io&&(n=new RegExp("^"+g+"$(?!\\s)",f)),Co&&(r=c.lastIndex),i=yo.call(p?n:c,_),p?i?(i.input=i.input.slice(m),i[0]=i[0].slice(m),i.index=c.lastIndex,c.lastIndex+=i[0].length):c.lastIndex=0:Co&&i&&(c.lastIndex=c.global?i.index+i[0].length:r),Io&&i&&i.length>1&&So.call(i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&h)for(i.groups=s=br(null),o=0;o<h.length;o++)s[(a=h[o])[0]]=i[a[1]];return i});var Ro=bo;It({target:"RegExp",proto:!0,forced:/./.exec!==Ro},{exec:Ro});var wo=_e("species"),ko=RegExp.prototype,Oo=function(e,t,n,r){var i=_e(e),o=!N((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),s=o&&!N((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[wo]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!o||!s||n){var a=/./[i],c=t(i,""[e],(function(e,t,n,r,i){var s=t.exec;return s===Ro||s===ko.exec?o&&!i?{done:!0,value:a.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}));Je(String.prototype,e,c[0]),Je(ko,i,c[1])}r&&Oe(ko[i],"sham",!0)},No=Di.charAt,Lo=function(e,t,n){return t+(n?No(e,t).length:1)},Po=Math.floor,Do="".replace,Mo=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,xo=/\$([$&'`]|\d{1,2})/g,Bo=function(e,t,n,r,i,o){var s=n+e.length,a=r.length,c=xo;return void 0!==i&&(i=ce(i),c=Mo),Do.call(o,c,(function(o,c){var l;switch(c.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":l=i[c.slice(1,-1)];break;default:var u=+c;if(0===u)return o;if(u>a){var d=Po(u/10);return 0===d?o:d<=a?void 0===r[d-1]?c.charAt(1):r[d-1]+c.charAt(1):o}l=r[u-1]}return void 0===l?"":l}))},Uo=function(e,t){var n=e.exec;if(H(n)){var r=n.call(e,t);return null!==r&&Re(r),r}if("RegExp"===U(e))return Ro.call(e,t);throw TypeError("RegExp#exec called on incompatible receiver")},Fo=_e("replace"),Vo=Math.max,jo=Math.min,Go="$0"==="a".replace(/./,"$0"),Ho=!!/./[Fo]&&""===/./[Fo]("a","$0");Oo("replace",(function(e,t,n){var r=Ho?"$":"$0";return[function(e,n){var r=j(this),i=null==e?void 0:ie(e,Fo);return i?i.call(e,r,n):t.call(Li(r),e,n)},function(e,i){var o=Re(this),s=Li(e);if("string"==typeof i&&-1===i.indexOf(r)&&-1===i.indexOf("$<")){var a=n(t,o,s,i);if(a.done)return a.value}var c=H(i);c||(i=Li(i));var l=o.global;if(l){var u=o.unicode;o.lastIndex=0}for(var d=[];;){var h=Uo(o,s);if(null===h)break;if(d.push(h),!l)break;""===Li(h[0])&&(o.lastIndex=Lo(s,st(o.lastIndex),u))}for(var p,f="",g=0,m=0;m<d.length;m++){h=d[m];for(var _=Li(h[0]),v=Vo(jo(tt(h.index),s.length),0),E=[],A=1;A<h.length;A++)E.push(void 0===(p=h[A])?p:String(p));var y=h.groups;if(c){var S=[_].concat(E,v,s);void 0!==y&&S.push(y);var b=Li(i.apply(void 0,S))}else b=Bo(_,s,v,E,y,i);v>=g&&(f+=s.slice(g,v)+b,g=v+_.length)}return f+s.slice(g)}]}),!!N((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!Go||Ho);var Qo=_e("iterator"),Wo=!N((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Qo]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),qo=q("fetch"),zo=q("Request"),Zo=zo&&zo.prototype,$o=q("Headers"),Ko=_e("iterator"),Yo=ze.set,Jo=ze.getterFor("URLSearchParams"),Xo=ze.getterFor("URLSearchParamsIterator"),es=/\+/g,ts=Array(4),ns=function(e){return ts[e-1]||(ts[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},rs=function(e){try{return decodeURIComponent(e)}catch(ky){return e}},is=function(e){var t=e.replace(es," "),n=4;try{return decodeURIComponent(t)}catch(ky){for(;n;)t=t.replace(ns(n--),rs);return t}},os=/[!'()~]|%20/g,ss={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},as=function(e){return ss[e]},cs=function(e){return encodeURIComponent(e).replace(os,as)},ls=function(e,t){if(t)for(var n,r,i=t.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),e.push({key:is(r.shift()),value:is(r.join("="))}))},us=function(e){this.entries.length=0,ls(this.entries,e)},ds=function(e,t){if(e<t)throw TypeError("Not enough arguments")},hs=Hr((function(e,t){Yo(this,{type:"URLSearchParamsIterator",iterator:di(Jo(e).entries),kind:t})}),"Iterator",(function(){var e=Xo(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),ps=function(){gi(this,ps,"URLSearchParams");var e,t,n,r,i,o,s,a,c,l=arguments.length>0?arguments[0]:void 0,u=this,d=[];if(Yo(u,{type:"URLSearchParams",entries:d,updateURL:function(){},updateSearchParams:us}),void 0!==l)if(Q(l))if(e=ui(l))for(n=(t=di(l,e)).next;!(r=n.call(t)).done;){if((s=(o=(i=di(Re(r.value))).next).call(i)).done||(a=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");d.push({key:Li(s.value),value:Li(a.value)})}else for(c in l)ue(l,c)&&d.push({key:c,value:Li(l[c])});else ls(d,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:Li(l))},fs=ps.prototype;if(bi(fs,{append:function(e,t){ds(arguments.length,2);var n=Jo(this);n.entries.push({key:Li(e),value:Li(t)}),n.updateURL()},delete:function(e){ds(arguments.length,1);for(var t=Jo(this),n=t.entries,r=Li(e),i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){ds(arguments.length,1);for(var t=Jo(this).entries,n=Li(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){ds(arguments.length,1);for(var t=Jo(this).entries,n=Li(e),r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){ds(arguments.length,1);for(var t=Jo(this).entries,n=Li(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){ds(arguments.length,1);for(var n,r=Jo(this),i=r.entries,o=!1,s=Li(e),a=Li(t),c=0;c<i.length;c++)(n=i[c]).key===s&&(o?i.splice(c--,1):(o=!0,n.value=a));o||i.push({key:s,value:a}),r.updateURL()},sort:function(){var e,t,n,r=Jo(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function(e){for(var t,n=Jo(this).entries,r=Rt(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new hs(this,"keys")},values:function(){return new hs(this,"values")},entries:function(){return new hs(this,"entries")}},{enumerable:!0}),Je(fs,Ko,fs.entries,{name:"entries"}),Je(fs,"toString",(function(){for(var e,t=Jo(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(cs(e.key)+"="+cs(e.value));return n.join("&")}),{enumerable:!0}),Vr(ps,"URLSearchParams"),It({global:!0,forced:!Wo},{URLSearchParams:ps}),!Wo&&H($o)){var gs=function(e){if(Q(e)){var t,n=e.body;if("URLSearchParams"===Pt(n))return(t=e.headers?new $o(e.headers):new $o).has("content-type")||t.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),br(e,{body:x(0,String(n)),headers:x(0,t)})}return e};if(H(qo)&&It({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return qo(e,arguments.length>1?gs(arguments[1]):{})}}),H(zo)){var ms=function(e){return gi(this,ms,"Request"),new zo(e,arguments.length>1?gs(arguments[1]):{})};Zo.constructor=ms,ms.prototype=Zo,It({global:!0,forced:!0},{Request:ms})}}var _s=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};Oo("search",(function(e,t,n){return[function(t){var n=j(this),r=null==t?void 0:ie(t,e);return r?r.call(t,n):new RegExp(t)[e](Li(n))},function(e){var r=Re(this),i=Li(e),o=n(t,r,i);if(o.done)return o.value;var s=r.lastIndex;_s(s,0)||(r.lastIndex=0);var a=Uo(r,i);return _s(r.lastIndex,s)||(r.lastIndex=s),null===a?-1:a.index}]})),(new Date).getTime();var vs=0,Es=function(){return(new Date).getTime()+vs},As=function(){var e=new Date;return e.setTime(Es()),e.toLocaleString()};Oo("match",(function(e,t,n){return[function(t){var n=j(this),r=null==t?void 0:ie(t,e);return r?r.call(t,n):new RegExp(t)[e](Li(n))},function(e){var r=Re(this),i=Li(e),o=n(t,r,i);if(o.done)return o.value;if(!r.global)return Uo(r,i);var s=r.unicode;r.lastIndex=0;for(var a,c=[],l=0;null!==(a=Uo(r,i));){var u=Li(a[0]);c[l]=u,""===u&&(r.lastIndex=Lo(i,st(r.lastIndex),s)),l++}return 0===l?null:c}]}));var ys=_e("match"),Ss=function(e){var t;return Q(e)&&(void 0!==(t=e[ys])?!!t:"RegExp"==U(e))},bs=ke.f,Cs=ft.f,Ts=ze.enforce,Is=_e("match"),Rs=O.RegExp,ws=Rs.prototype,ks=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Os=/a/g,Ns=/a/g,Ls=new Rs(Os)!==Os,Ps=go.UNSUPPORTED_Y,Ds=L&&(!Ls||Ps||_o||Eo||N((function(){return Ns[Is]=!1,Rs(Os)!=Os||Rs(Ns)==Ns||"/a/i"!=Rs(Os,"i")})));if(Ct("RegExp",Ds)){for(var Ms=function(e,t){var n,r,i,o,s,a,c=this instanceof Ms,l=Ss(e),u=void 0===t,d=[],h=e;if(!c&&l&&u&&e.constructor===Ms)return e;if((l||e instanceof Ms)&&(e=e.source,u&&(t="flags"in h?h.flags:po.call(h))),e=void 0===e?"":Li(e),t=void 0===t?"":Li(t),h=e,_o&&"dotAll"in Os&&(r=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),n=t,Ps&&"sticky"in Os&&(i=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),Eo&&(e=(o=function(e){for(var t,n=e.length,r=0,i="",o=[],s={},a=!1,c=!1,l=0,u="";r<=n;r++){if("\\"===(t=e.charAt(r)))t+=e.charAt(++r);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:ks.test(e.slice(r+1))&&(r+=2,c=!0),i+=t,l++;continue;case">"===t&&c:if(""===u||ue(s,u))throw new SyntaxError("Invalid capture group name");s[u]=!0,o.push([u,l]),c=!1,u="";continue}c?u+=t:i+=t}return[i,o]}(e))[0],d=o[1]),s=yi(Rs(e,t),c?this:ws,Ms),(r||i||d.length)&&(a=Ts(s),r&&(a.dotAll=!0,a.raw=Ms(function(e){for(var t,n=e.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(t=e.charAt(r))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+e.charAt(++r);return i}(e),n)),i&&(a.sticky=!0),d.length&&(a.groups=d)),e!==h)try{Oe(s,"source",""===h?"(?:)":h)}catch(ky){}return s},xs=function(e){e in Ms||bs(Ms,e,{configurable:!0,get:function(){return Rs[e]},set:function(t){Rs[e]=t}})},Bs=Cs(Rs),Us=0;Bs.length>Us;)xs(Bs[Us++]);ws.constructor=Ms,Ms.prototype=ws,Je(O,"RegExp",Ms)}Ti("RegExp");var Fs=Ye.PROPER,Vs=RegExp.prototype,js=Vs.toString,Gs=N((function(){return"/a/b"!=js.call({source:"a",flags:"b"})})),Hs=Fs&&"toString"!=js.name;(Gs||Hs)&&Je(RegExp.prototype,"toString",(function(){var e=Re(this),t=Li(e.source),n=e.flags;return"/"+t+"/"+Li(void 0===n&&e instanceof RegExp&&!("flags"in Vs)?po.call(e):n)}),{unsafe:!0});var Qs=lt.indexOf,Ws=[].indexOf,qs=!!Ws&&1/[1].indexOf(1,-0)<0,zs=Yi("indexOf");It({target:"Array",proto:!0,forced:qs||!zs},{indexOf:function(e){return qs?Ws.apply(this,arguments)||0:Qs(this,e,arguments.length>1?arguments[1]:void 0)}});var Zs=N((function(){Dr(1)}));It({target:"Object",stat:!0,forced:Zs,sham:!Nr},{getPrototypeOf:function(e){return Dr(ce(e))}});var $s=q("Reflect","apply"),Ks=Function.apply,Ys=!N((function(){$s((function(){}))}));It({target:"Reflect",stat:!0,forced:Ys},{apply:function(e,t,n){return re(e),Re(n),$s?$s(e,t,n):Ks.call(e,t,n)}});var Js=Ye.EXISTS,Xs=ke.f,ea=Function.prototype,ta=ea.toString,na=/^\s*function ([^ (]*)/;L&&!Js&&Xs(ea,"name",{configurable:!0,get:function(){try{return ta.call(this).match(na)[1]}catch(ky){return""}}}),It({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var ra=_e("species"),ia=function(e,t){var n,r=Re(e).constructor;return void 0===r||null==(n=Re(r)[ra])?t:function(e){if(Vt(e))return e;throw TypeError(ne(e)+" is not a constructor")}(n)},oa=go.UNSUPPORTED_Y,sa=[].push,aa=Math.min;Oo("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=Li(j(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!Ss(e))return t.call(r,e,i);for(var o,s,a,c=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,d=new RegExp(e.source,l+"g");(o=Ro.call(d,r))&&!((s=d.lastIndex)>u&&(c.push(r.slice(u,o.index)),o.length>1&&o.index<r.length&&sa.apply(c,o.slice(1)),a=o[0].length,u=s,c.length>=i));)d.lastIndex===o.index&&d.lastIndex++;return u===r.length?!a&&d.test("")||c.push(""):c.push(r.slice(u)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=j(this),o=null==t?void 0:ie(t,e);return o?o.call(t,i,n):r.call(Li(i),t,n)},function(e,i){var o=Re(this),s=Li(e),a=n(r,o,s,i,r!==t);if(a.done)return a.value;var c=ia(o,RegExp),l=o.unicode,u=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(oa?"g":"y"),d=new c(oa?"^(?:"+o.source+")":o,u),h=void 0===i?4294967295:i>>>0;if(0===h)return[];if(0===s.length)return null===Uo(d,s)?[s]:[];for(var p=0,f=0,g=[];f<s.length;){d.lastIndex=oa?0:f;var m,_=Uo(d,oa?s.slice(f):s);if(null===_||(m=aa(st(d.lastIndex+(oa?f:0)),s.length))===p)f=Lo(s,f,l);else{if(g.push(s.slice(p,f)),g.length===h)return g;for(var v=1;v<=_.length-1;v++)if(g.push(_[v]),g.length===h)return g;f=p=m}}return g.push(s.slice(p)),g}]}),!!N((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),oa);var ca=1..valueOf,la=function(e){return ca.call(e)},ua="\t\n\v\f\r                　\u2028\u2029\ufeff",da="["+ua+"]",ha=RegExp("^"+da+da+"*"),pa=RegExp(da+da+"*$"),fa=function(e){return function(t){var n=Li(j(t));return 1&e&&(n=n.replace(ha,"")),2&e&&(n=n.replace(pa,"")),n}},ga={start:fa(1),end:fa(2),trim:fa(3)},ma=ft.f,_a=Ie.f,va=ke.f,Ea=ga.trim,Aa=O.Number,ya=Aa.prototype,Sa=function(e){var t=Ee(e,"number");return"bigint"==typeof t?t:ba(t)},ba=function(e){var t,n,r,i,o,s,a,c,l=Ee(e,"number");if(te(l))throw TypeError("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(43===(t=(l=Ea(l)).charCodeAt(0))||45===t){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(s=(o=l.slice(2)).length,a=0;a<s;a++)if((c=o.charCodeAt(a))<48||c>i)return NaN;return parseInt(o,r)}return+l};if(Ct("Number",!Aa(" 0o1")||!Aa("0b1")||Aa("+0x1"))){for(var Ca,Ta=function(e){var t=arguments.length<1?0:Aa(Sa(e)),n=this;return n instanceof Ta&&N((function(){la(n)}))?yi(Object(t),n,Ta):t},Ia=L?ma(Aa):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Ra=0;Ia.length>Ra;Ra++)ue(Aa,Ca=Ia[Ra])&&!ue(Ta,Ca)&&va(Ta,Ca,_a(Aa,Ca));Ta.prototype=ya,ya.constructor=Ta,Je(O,"Number",Ta)}var wa=ga.trim,ka=O.parseFloat,Oa=O.Symbol,Na=Oa&&Oa.iterator,La=1/ka(ua+"-0")!=-1/0||Na&&!N((function(){ka(Object(Na))}))?function(e){var t=wa(Li(e)),n=ka(t);return 0===n&&"-"==t.charAt(0)?-0:n}:ka;It({global:!0,forced:parseFloat!=La},{parseFloat:La});var Pa,Da=window.navigator&&window.navigator.userAgent||"",Ma=/AppleWebKit\/([\d.]+)/i.exec(Da),xa=(Ma&&parseFloat(Ma.pop()),/iPad/i.test(Da)),Ba=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/Macintosh/.test(Da),Ua=/iPhone/i.test(Da)&&!xa,Fa=/iPod/i.test(Da),Va=Ua||xa||Fa||Ba,ja=/Android/i.test(Da),Ga=(ja&&function(){var e=Da.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);t&&n&&parseFloat(e[1]+"."+e[2])}(),ja&&/webkit/i.test(Da),/Firefox/i.test(Da)),Ha=Ga&&function(){var e=Da.match(/Firefox\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),Qa=/Edge\//i.test(Da),Wa=Qa&&function(){var e=Da.match(/Edge\/(\d+)/i);if(e&&e[1])return e[1]}(),qa=/Edg\//i.test(Da),za=qa&&function(){var e=Da.match(/Edg\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),Za=/SogouMobileBrowser\//i.test(Da),$a=Za&&function(){var e=Da.match(/SogouMobileBrowser\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),Ka=/MetaSr\s/i.test(Da),Ya=Ka&&function(){var e=Da.match(/MetaSr(\s\d+(\.\d+)+)/);return e&&e[1]?parseFloat(e[1]):null}(),Ja=/TBS\/\d+/i.test(Da),Xa=Ja&&function(){var e=Da.match(/TBS\/(\d+)/i);if(e&&e[1])return e[1]}(),ec=/XWEB\/\d+/i.test(Da),tc=ec&&function(){var e=Da.match(/XWEB\/(\d+)/i);if(e&&e[1])return e[1]}(),nc=(/MSIE\s8\.0/.test(Da),/MSIE\/\d+/i.test(Da)&&function(){var e=/MSIE\s(\d+)\.\d/.exec(Da),t=e&&parseFloat(e[1]);!t&&/Trident\/7.0/i.test(Da)&&/rv:11.0/.test(Da)&&(t=11)}(),/(micromessenger|webbrowser)/i.test(Da)),rc=nc&&function(){var e=Da.match(/MicroMessenger\/(\d+)/i);if(e&&e[1])return e[1]}(),ic=!Ja&&/MQQBrowser\/\d+/i.test(Da)&&/COVC\/\d+/i.test(Da),oc=!Ja&&/MQQBrowser\/\d+/i.test(Da)&&!/COVC\/\d+/i.test(Da),sc=(oc||ic)&&function(){var e=Da.match(/ MQQBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),ac=!Ja&&/ QQBrowser\/\d+/i.test(Da),cc=ac&&function(){var e=Da.match(/ QQBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),lc=!Ja&&/QQBrowserLite\/\d+/i.test(Da),uc=lc&&function(){var e=Da.match(/QQBrowserLite\/([\d.]+)/);return e&&e[1]?e[1]:null}(),dc=!Ja&&/MQBHD\/\d+/i.test(Da),hc=dc&&function(){var e=Da.match(/MQBHD\/([\d.]+)/);return e&&e[1]?e[1]:null}(),pc=/Windows/i.test(Da),fc=!Va&&/MAC OS X/i.test(Da),gc=!ja&&/Linux/i.test(Da),mc=(/MicroMessenger/i.test(Da),/UCBrowser/i.test(Da)),_c=(/Electron/i.test(Da),/MiuiBrowser/i.test(Da)),vc=_c&&function(){var e=Da.match(/MiuiBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Ec=/HuaweiBrowser/i.test(Da),Ac=/Huawei/i.test(Da),yc=Ec&&function(){var e=Da.match(/HuaweiBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Sc=/SamsungBrowser/i.test(Da),bc=Sc&&function(){var e=Da.match(/SamsungBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Cc=/HeyTapBrowser/i.test(Da),Tc=Cc&&function(){var e=Da.match(/HeyTapBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Ic=/VivoBrowser/i.test(Da),Rc=Ic&&function(){var e=Da.match(/VivoBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),wc=function(){var e=Da.match(/Chrome\/(\d+)/);return e&&e[1]?Number(e[1]):null},kc=/Chrome/i.test(Da),Oc=!Qa&&!Ka&&!Za&&!Ja&&!ec&&!qa&&!ac&&!_c&&!Ec&&!Sc&&!Cc&&!Ic&&/Chrome/i.test(Da),Nc=Oc&&wc(),Lc=Oc&&function(){var e=Da.match(/Chrome\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Pc=!kc&&!oc&&!ic&&!lc&&!dc&&/Safari/i.test(Da),Dc=Pc&&function(){var e=Da.match(/Version\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Mc=/Android.*(wv|.0.0.0)/.test(Da),xc=Oc?"Chrome/"+Lc:Pc?"Safari/"+Dc:"NotSupportedBrowser",Bc="15.1"===function(){if(Ba)return Dc;if(Va){var e=Da.match(/OS (\d+)_(\d+)/i);if(e&&e[1]){var t=e[1];return e[2]&&(t+=".".concat(e[2])),t}}return null}(),Uc="file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname,Fc=function(){if($d(Pa))try{Pa=window.localStorage}catch(ky){Cf.warn(ky),Pa=!1}return Pa},Vc=new Map([[Ga,["Firefox",Ha]],[qa,["Edg",za]],[Oc,["Chrome",Lc]],[Pc,["Safari",Dc]],[Ja,["TBS",Xa]],[ec,["XWEB",tc]],[nc&&Ua,["WeChat",rc]],[ac,["QQ(Win)",cc]],[oc,["QQ(Mobile)",sc]],[ic,["QQ(Mobile X5)",sc]],[lc,["QQ(Mac)",uc]],[dc,["QQ(iPad)",hc]],[_c,["MI",vc]],[Ec,["HW",yc]],[Sc,["Samsung",bc]],[Cc,["OPPO",Tc]],[Ic,["VIVO",Rc]],[Qa,["EDGE",Wa]],[Za,["SogouMobile",$a]],[Ka,["Sogou",Ya]]]);function jc(){var e="unknown",t="unknown";return Vc.get(!0)&&(e=Vc.get(!0)[0],t=Vc.get(!0)[1]),{name:e,version:t}}var Gc=N((function(){gr(1)}));It({target:"Object",stat:!0,forced:Gc},{keys:function(e){return gr(ce(e))}});var Hc="wss://qcloud.rtc.qq.com",Qc="wss://bk.rtc.qq.com",Wc="wss://trtc.rtc.qq.com",qc="wss://webrtc.qq.com",zc="qcloud",Zc="trtc",$c="webrtc",Kc="",Yc=function(e){return Kc=e},Jc=1,Xc=2,el=20,tl=21,nl="5Y2wZK8nANNAoVw6dSAHVjNxrD1ObBM2kBPV",rl="224d130c-7b5c-415b-aaa2-79c2eb5a6df2",il=2,ol="DISCONNECTED",sl="CONNECTING",al="RECONNECTING",cl="CONNECTED",ll="new",ul="connecting",dl="failed",hl="closed",pl="disconnected",fl="connected",gl="completed",ml="join",_l="delta-join",vl="rejoin",El="leave",Al="delta-leave",yl="publish",Sl="delta-publish",bl="unpublish",Cl="subscribe",Tl="unsubscribe",Il="uplink-connection",Rl="uplink-reconnection",wl="downlink-connection",kl="downlink-reconnection",Ol="setLocalDescription",Nl="setRemoteDescription",Ll="iceConnectionState",Pl="stream-initialize",Dl="websocketConnectionState",Ml="websocketReconnectionState",xl="update-stream",Bl="recover-subscription",Ul="start-mix-transcode",Fl="stop-mix-transcode",Vl="player-error",jl="unsubscribe",Gl="subscribe_change",Hl={MANUAL:"manual",PRESET_LAYOUT:"preset-layout"},Ql={REMOTE:"$PLACE_HOLDER_REMOTE$"},Wl={IT_AUDIO_VIDEO:0,IT_PICTURE:2,IT_CANVAS:3,IT_PURE_AUDIO:4,IT_PURE_VIDEO:5},ql="string",zl="number",Zl="boolean",$l="array",Kl="object",Yl="canvas",Jl="audio",Xl="video",eu="auxiliary",tu="user",nu="environment",ru="mute",iu="unmute",ou="ended",su="playing",au="pause",cu="error",lu="loadeddata",uu="audioinput",du="videoinput",hu="detail",pu="text",fu="add",gu="remove",mu={unknown:0,wifi:1,"3g":2,"2g":3,"4g":4,wired:5},_u=-1,vu=0,Eu=1,Au="https://schedule.rtc.qq.com/api/v1/config",yu="TRTC",Su="Client",bu="LocalStream",Cu="RemoteStream",Tu="Stream",Iu="https://web.sdk.qcloud.com/trtc/webrtc/doc",Ru="".concat(Iu,"/zh-cn/"),wu={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,NONE:5},ku=Object.keys(wu),Ou=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},Nu=Object.prototype.toString;function Lu(e){return"[object Array]"===Nu.call(e)}function Pu(e){return void 0===e}function Du(e){return null!==e&&"object"==typeof e}function Mu(e){return"[object Function]"===Nu.call(e)}function xu(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Lu(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var Bu={isArray:Lu,isArrayBuffer:function(e){return"[object ArrayBuffer]"===Nu.call(e)},isBuffer:function(e){return null!==e&&!Pu(e)&&null!==e.constructor&&!Pu(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Du,isUndefined:Pu,isDate:function(e){return"[object Date]"===Nu.call(e)},isFile:function(e){return"[object File]"===Nu.call(e)},isBlob:function(e){return"[object Blob]"===Nu.call(e)},isFunction:Mu,isStream:function(e){return Du(e)&&Mu(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:xu,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)xu(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)xu(arguments[r],n);return t},extend:function(e,t,n){return xu(t,(function(t,r){e[r]=n&&"function"==typeof t?Ou(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function Uu(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Fu=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(Bu.isURLSearchParams(t))r=t.toString();else{var i=[];Bu.forEach(t,(function(e,t){null!=e&&(Bu.isArray(e)?t+="[]":e=[e],Bu.forEach(e,(function(e){Bu.isDate(e)?e=e.toISOString():Bu.isObject(e)&&(e=JSON.stringify(e)),i.push(Uu(t)+"="+Uu(e))})))})),r=i.join("&")}if(r){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function Vu(){this.handlers=[]}Vu.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},Vu.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Vu.prototype.forEach=function(e){Bu.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var ju=Vu,Gu=function(e,t,n){return Bu.forEach(n,(function(n){e=n(e,t)})),e},Hu=function(e){return!(!e||!e.__CANCEL__)},Qu="undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Wu(){throw new Error("setTimeout has not been defined")}function qu(){throw new Error("clearTimeout has not been defined")}var zu=Wu,Zu=qu;function $u(e){if(zu===setTimeout)return setTimeout(e,0);if((zu===Wu||!zu)&&setTimeout)return zu=setTimeout,setTimeout(e,0);try{return zu(e,0)}catch(n){try{return zu.call(null,e,0)}catch(n){return zu.call(this,e,0)}}}"function"==typeof Qu.setTimeout&&(zu=setTimeout),"function"==typeof Qu.clearTimeout&&(Zu=clearTimeout);var Ku,Yu=[],Ju=!1,Xu=-1;function ed(){Ju&&Ku&&(Ju=!1,Ku.length?Yu=Ku.concat(Yu):Xu=-1,Yu.length&&td())}function td(){if(!Ju){var e=$u(ed);Ju=!0;for(var t=Yu.length;t;){for(Ku=Yu,Yu=[];++Xu<t;)Ku&&Ku[Xu].run();Xu=-1,t=Yu.length}Ku=null,Ju=!1,function(e){if(Zu===clearTimeout)return clearTimeout(e);if((Zu===qu||!Zu)&&clearTimeout)return Zu=clearTimeout,clearTimeout(e);try{Zu(e)}catch(t){try{return Zu.call(null,e)}catch(t){return Zu.call(this,e)}}}(e)}}function nd(e,t){this.fun=e,this.array=t}function rd(){}nd.prototype.run=function(){this.fun.apply(null,this.array)};var id=rd,od=rd,sd=rd,ad=rd,cd=rd,ld=rd,ud=rd,dd=Qu.performance||{},hd=dd.now||dd.mozNow||dd.msNow||dd.oNow||dd.webkitNow||function(){return(new Date).getTime()},pd=new Date,fd={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Yu.push(new nd(e,t)),1!==Yu.length||Ju||$u(td)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:id,addListener:od,once:sd,off:ad,removeListener:cd,removeAllListeners:ld,emit:ud,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*hd.call(dd),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-pd)/1e3}},gd=function(e,t){Bu.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},md=function(e,t,n,r,i){return function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,r,i)},_d=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],vd=Bu.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Bu.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},Ed=Bu.isStandardBrowserEnv()?{write:function(e,t,n,r,i,o){var s=[];s.push(e+"="+encodeURIComponent(t)),Bu.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Bu.isString(r)&&s.push("path="+r),Bu.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Ad=function(e){return new Promise((function(t,n){var r=e.data,i=e.headers;Bu.isFormData(r)&&delete i["Content-Type"];var o=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",a=e.auth.password||"";i.Authorization="Basic "+btoa(s+":"+a)}var c,l,u=(c=e.baseURL,l=e.url,c&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(l)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(c,l):l);if(o.open(e.method.toUpperCase(),Fu(u,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in o?function(e){var t,n,r,i={};return e?(Bu.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=Bu.trim(e.substr(0,r)).toLowerCase(),n=Bu.trim(e.substr(r+1)),t){if(i[t]&&_d.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i}(o.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:r,config:e,request:o};!function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(md("Request failed with status code "+n.status,n.config,null,n.request,n))}(t,n,i),o=null}},o.onabort=function(){o&&(n(md("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(md("Network Error",e,null,o)),o=null},o.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(md(t,e,"ECONNABORTED",o)),o=null},Bu.isStandardBrowserEnv()){var d=Ed,h=(e.withCredentials||vd(u))&&e.xsrfCookieName?d.read(e.xsrfCookieName):void 0;h&&(i[e.xsrfHeaderName]=h)}if("setRequestHeader"in o&&Bu.forEach(i,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete i[t]:o.setRequestHeader(t,e)})),Bu.isUndefined(e.withCredentials)||(o.withCredentials=!!e.withCredentials),e.responseType)try{o.responseType=e.responseType}catch(f){if("json"!==e.responseType)throw f}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){o&&(o.abort(),n(e),o=null)})),void 0===r&&(r=null),o.send(r)}))},yd={"Content-Type":"application/x-www-form-urlencoded"};function Sd(e,t){!Bu.isUndefined(e)&&Bu.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var bd={adapter:function(){var e;return("undefined"!=typeof XMLHttpRequest||void 0!==fd&&"[object process]"===Object.prototype.toString.call(fd))&&(e=Ad),e}(),transformRequest:[function(e,t){return gd(t,"Accept"),gd(t,"Content-Type"),Bu.isFormData(e)||Bu.isArrayBuffer(e)||Bu.isBuffer(e)||Bu.isStream(e)||Bu.isFile(e)||Bu.isBlob(e)?e:Bu.isArrayBufferView(e)?e.buffer:Bu.isURLSearchParams(e)?(Sd(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Bu.isObject(e)?(Sd(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(n){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Bu.forEach(["delete","get","head"],(function(e){bd.headers[e]={}})),Bu.forEach(["post","put","patch"],(function(e){bd.headers[e]=Bu.merge(yd)}));var Cd=bd;function Td(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var Id=function(e){return Td(e),e.headers=e.headers||{},e.data=Gu(e.data,e.headers,e.transformRequest),e.headers=Bu.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Bu.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||Cd.adapter)(e).then((function(t){return Td(e),t.data=Gu(t.data,t.headers,e.transformResponse),t}),(function(t){return Hu(t)||(Td(e),t&&t.response&&(t.response.data=Gu(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},Rd=function(e,t){t=t||{};var n={},r=["url","method","params","data"],i=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];Bu.forEach(r,(function(e){void 0!==t[e]&&(n[e]=t[e])})),Bu.forEach(i,(function(r){Bu.isObject(t[r])?n[r]=Bu.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:Bu.isObject(e[r])?n[r]=Bu.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])})),Bu.forEach(o,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var s=r.concat(i).concat(o),a=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return Bu.forEach(a,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n};function wd(e){this.defaults=e,this.interceptors={request:new ju,response:new ju}}wd.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Rd(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[Id,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},wd.prototype.getUri=function(e){return e=Rd(this.defaults,e),Fu(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Bu.forEach(["delete","get","head","options"],(function(e){wd.prototype[e]=function(t,n){return this.request(Bu.merge(n||{},{method:e,url:t}))}})),Bu.forEach(["post","put","patch"],(function(e){wd.prototype[e]=function(t,n,r){return this.request(Bu.merge(r||{},{method:e,url:t,data:n}))}}));var kd=wd;function Od(e){this.message=e}Od.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Od.prototype.__CANCEL__=!0;var Nd=Od;function Ld(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new Nd(e),t(n.reason))}))}Ld.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Ld.source=function(){var e;return{token:new Ld((function(t){e=t})),cancel:e}};var Pd=Ld;function Dd(e){var t=new kd(e),n=Ou(kd.prototype.request,t);return Bu.extend(n,kd.prototype,t),Bu.extend(n,t),n}var Md=Dd(Cd);Md.Axios=kd,Md.create=function(e){return Dd(Rd(Md.defaults,e))},Md.Cancel=Nd,Md.CancelToken=Pd,Md.isCancel=Hu,Md.all=function(e){return Promise.all(e)},Md.spread=function(e){return function(t){return e.apply(null,t)}};var xd=Md,Bd=Md;xd.default=Bd;var Ud=xd,Fd={INVALID_PARAMETER:4096,INVALID_OPERATION:4097,NOT_SUPPORTED:4098,DEVICE_NOT_FOUND:4099,INITIALIZE_FAILED:4100,SIGNAL_CHANNEL_SETUP_FAILED:16385,SIGNAL_CHANNEL_ERROR:16386,ICE_TRANSPORT_ERROR:16387,JOIN_ROOM_FAILED:16388,CREATE_OFFER_FAILED:16389,SIGNAL_CHANNEL_RECONNECTION_FAILED:16390,UPLINK_RECONNECTION_FAILED:16391,DOWNLINK_RECONNECTION_FAILED:16392,REMOTE_STREAM_NOT_EXIST:16400,CLIENT_BANNED:16448,SERVER_TIMEOUT:16449,SUBSCRIPTION_TIMEOUT:16450,PLAY_NOT_ALLOWED:16451,DEVICE_AUTO_RECOVER_FAILED:16452,START_PUBLISH_CDN_FAILED:16453,STOP_PUBLISH_CDN_FAILED:16454,START_MIX_TRANSCODE_FAILED:16455,STOP_MIX_TRANSCODE_FAILED:16456,NOT_SUPPORTED_H264:16457,SWITCH_ROLE_FAILED:16458,API_CALL_TIMEOUT:16459,UNKNOWN:65535},Vd=function(e){u(n,e);var t=_(n);function n(e){var r,i=e.name,o=void 0===i?"RtcError":i,a=e.message,c=e.code,l=void 0===c?Fd.UNKNOWN:c,u=e.extraCode,d=void 0===u?0:u;return s(this,n),(r=t.call(this,a+" <".concat(function(e){for(var t in Fd)if(Fd[t]===e)return t;return"UNKNOWN"}(l)," 0x").concat(l.toString(16),">"))).code_=l,r.extraCode_=d,r.name=o,r.message_=a,r}return c(n,[{key:"getCode",value:function(){return this.code_}},{key:"getExtraCode",value:function(){return this.extraCode_}}]),n}(g(Error)),jd=new(function(){function e(){s(this,e);var t=jc(),n=t.name,r=t.version;this.configs_={sdkAppId:"",userId:"",version:"4.11.12",env:zc,browserVersion:n+r,ua:navigator.userAgent}}return c(e,[{key:"setConfig",value:function(e){var t=e.sdkAppId,n=e.env,r=e.userId;t!==this.configs_.sdkAppId&&(this.configs_.sdkAppId=String(t)),this.configs_.env=n,this.configs_.userId=r}},{key:"logEvent",value:function(e){if(!Uc){var t=n(n(n({},e),this.configs_),{},{userId:e.userId||this.configs_.userId});$d(t.code)&&(t.code="failed"===t.result?Fd.UNKNOWN:0),Ud.post(Qd(),JSON.stringify(t)).catch((function(){}))}}},{key:"logSuccessEvent",value:function(e){Uc||(this.logEvent(n(n({},e),{},{result:"success"})),this.configs_.env===zc&&this.uploadEventToKibana(n(n({},e),{},{result:"success"})))}},{key:"logFailedEvent",value:function(e){if(!Uc){var t=e.eventType,r=e.code,i=e.error,o={userId:e.userId,eventType:t,result:"failed",code:r||(i instanceof Vd?i.getExtraCode()||i.getCode():Fd.UNKNOWN)};this.logEvent(o),this.configs_.env===zc&&this.uploadEventToKibana(n(n({},o),{},{error:i}))}}},{key:"uploadEventToKibana",value:function(e){var t="stat-".concat(e.eventType,"-").concat(e.result);"delta-join"!==e.eventType&&"delta-leave"!==e.eventType&&"delta-publish"!==e.eventType||(t="".concat(e.eventType,":").concat(e.delta)),this.uploadEvent({log:t,userId:e.userId}),"failed"===e.result&&(t="stat-".concat(e.eventType,"-").concat(e.result,"-").concat(e.code),this.uploadEvent({log:t,userId:e.userId,error:e.error}))}},{key:"uploadEvent",value:function(e){var t=e.log,n=e.userId,r=e.error,i={timestamp:As(),sdkAppId:this.configs_.sdkAppId,userId:n||this.configs_.userId,version:this.configs_.version,log:t};r&&(i.errorInfo=r.message),Ud.post(Hd(),JSON.stringify(i)).catch((function(){}))}}]),e}()),Gd=function(){return function(e){var t=window.location.search.match(new RegExp("(\\?|&)"+e+"=([^&]*)(&|$)"));return t?decodeURIComponent(t[2]):""}("trtc_env")},Hd=function(){return"".concat(Kc||"https://yun.tim.qq.com","/v5/AVQualityReportSvc/C2S?sdkappid=1&cmdtype=jssdk_log")},Qd=function(){return"".concat(Kc||"https://yun.tim.qq.com","/v5/AVQualityReportSvc/C2S?sdkappid=1&cmdtype=jssdk_event")};function Wd(){var e=navigator.userAgent,t=navigator.connection,n=e.match(/NetType\/\w+/)?e.match(/NetType\/\w+/)[0]:"";"3gnet"===(n=n.toLowerCase().replace("nettype/",""))&&(n="3g");var r=t&&t.type&&t.type.toLowerCase(),i=t&&t.effectiveType&&t.effectiveType.toLowerCase();"slow-2"===i&&(i="2g");var o=n||"unknown";if(r)switch(r){case"cellular":case"wimax":o=i||"unknown";break;case"wifi":o="wifi";break;case"ethernet":o="wired";break;case"none":case"other":case"unknown":o="unknown"}return Cf.info("networkType:",o),o}var qd=function(e){if(!e||"object"!==r(e)||"[object Object]"!=Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Function.prototype.toString.call(n)===Function.prototype.toString.call(Object)};function zd(e){var t=Math.round(e/2)+1;return t>6?13e3:1e3*function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t<=1?r:e(t-1,r,n+r)}(t)}var Zd=function(e){return"function"==typeof e},$d=function(e){return void 0===e},Kd=function(e){return"string"==typeof e},Yd=function(e){return"number"==typeof e},Jd=function(e){return"boolean"==typeof e},Xd=function(e){return eh(e)==="MediaStreamTrack".toLowerCase()};function eh(e){return Reflect.apply(Object.prototype.toString,e,[]).replace(/^\[object\s(\w+)\]$/,"$1").toLowerCase()}function th(e){var t={};return t.urls="turn:".concat(e.url),$d(e.username)||$d(e.credential)||(t.username=e.username,t.credential=e.credential,t.credentialType="password",$d(e.credentialType)||(t.credentialType=e.credentialType)),t}function nh(){return performance&&performance.now?Math.floor(performance.now()):Date.now()}function rh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"big";if(!Kd(e))return 0;var n=e.split(".");return"big"===t?(Number(n[0])<<24|Number(n[1])<<16|Number(n[2])<<8|Number(n[3]))>>>0:(Number(n[3])<<24|Number(n[2])<<16|Number(n[1])<<8|Number(n[0]))>>>0}function ih(e){return oh.apply(this,arguments)}function oh(){return(oh=o(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={userId:String(t.userId),sdkAppId:String(t.sdkAppId),isStrGroupId:t.useStringRoomId,groupId:String(t.roomId),sdkVersion:"4.11.12",userSig:String(t.userSig)},r=nh(),e.next=5,Ud.post(Au,n,{timeout:1500});case 5:if(i=e.sent,jd.uploadEvent({log:"stat-schedule-delta:".concat(nh()-r),userId:t.userId}),0!==i.data.code){e.next=9;break}return e.abrupt("return",i.data.data);case 9:Cf.info("schedule failed: "+i.data.msg),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),Cf.info("schedule failed: "+e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var sh,ah,ch,lh,uh,dh,hh=function(){var e=navigator.language||navigator.userLanguage;return"zh"===e.substr(0,2)},ph=(sh=!1,ah=document.visibilityState,function(){document.visibilityState!==ah&&Cf.info("visibility change: ".concat(document.visibilityState)),sh||(document.addEventListener("visibilitychange",(function(){Cf.info("visibility change: "+document.visibilityState),ah=document.visibilityState})),sh=!0)}),fh=I((function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,i,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,s),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,i);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||i&&!a[c].once||r&&a[c].context!==r)&&l.push(a[c]);l.length?this._events[o]=1===l.length?l[0]:l:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})),gh=new fh,mh=1,_h=2,vh=3,Eh=4,Ah=5,yh=20,Sh=21,bh=22,Ch=23,Th=24,Ih=27,Rh=28,wh=29,kh=30,Oh=31,Nh=100,Lh=101,Ph=102,Dh=103,Mh=110,xh=111,Bh=112,Uh=113,Fh=114,Vh=115,jh=116,Gh=120,Hh=121,Qh=122,Wh=123,qh=130,zh=131,Zh=132,$h=133,Kh=134,Yh=135,Jh=136,Xh=137,ep=200,tp=201,np=300,rp=301,ip=O.Promise,op=/(?:ipad|iphone|ipod).*applewebkit/i.test(z),sp="process"==U(O.process),ap=O.setImmediate,cp=O.clearImmediate,lp=O.process,up=O.MessageChannel,dp=O.Dispatch,hp=0,pp={};try{ch=O.location}catch(ky){}var fp=function(e){if(pp.hasOwnProperty(e)){var t=pp[e];delete pp[e],t()}},gp=function(e){return function(){fp(e)}},mp=function(e){fp(e.data)},_p=function(e){O.postMessage(String(e),ch.protocol+"//"+ch.host)};ap&&cp||(ap=function(e){for(var t=[],n=arguments.length,r=1;n>r;)t.push(arguments[r++]);return pp[++hp]=function(){(H(e)?e:Function(e)).apply(void 0,t)},lh(hp),hp},cp=function(e){delete pp[e]},sp?lh=function(e){lp.nextTick(gp(e))}:dp&&dp.now?lh=function(e){dp.now(gp(e))}:up&&!op?(dh=(uh=new up).port2,uh.port1.onmessage=mp,lh=Rt(dh.postMessage,dh,1)):O.addEventListener&&H(O.postMessage)&&!O.importScripts&&ch&&"file:"!==ch.protocol&&!N(_p)?(lh=_p,O.addEventListener("message",mp,!1)):lh="onreadystatechange"in be("script")?function(e){_r.appendChild(be("script")).onreadystatechange=function(){_r.removeChild(this),fp(e)}}:function(e){setTimeout(gp(e),0)});var vp,Ep,Ap,yp,Sp,bp,Cp,Tp,Ip={set:ap,clear:cp},Rp=/ipad|iphone|ipod/i.test(z)&&void 0!==O.Pebble,wp=/web0s(?!.*chrome)/i.test(z),kp=Ie.f,Op=Ip.set,Np=O.MutationObserver||O.WebKitMutationObserver,Lp=O.document,Pp=O.process,Dp=O.Promise,Mp=kp(O,"queueMicrotask"),xp=Mp&&Mp.value;xp||(vp=function(){var e,t;for(sp&&(e=Pp.domain)&&e.exit();Ep;){t=Ep.fn,Ep=Ep.next;try{t()}catch(ky){throw Ep?yp():Ap=void 0,ky}}Ap=void 0,e&&e.enter()},op||sp||wp||!Np||!Lp?!Rp&&Dp&&Dp.resolve?((Cp=Dp.resolve(void 0)).constructor=Dp,Tp=Cp.then,yp=function(){Tp.call(Cp,vp)}):yp=sp?function(){Pp.nextTick(vp)}:function(){Op.call(O,vp)}:(Sp=!0,bp=Lp.createTextNode(""),new Np(vp).observe(bp,{characterData:!0}),yp=function(){bp.data=Sp=!Sp}));var Bp,Up,Fp,Vp,jp=xp||function(e){var t={fn:e,next:void 0};Ap&&(Ap.next=t),Ep||(Ep=t,yp()),Ap=t},Gp=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=re(t),this.reject=re(n)},Hp={f:function(e){return new Gp(e)}},Qp=function(e){try{return{error:!1,value:e()}}catch(ky){return{error:!0,value:ky}}},Wp="object"==typeof window,qp=Ip.set,zp=_e("species"),Zp="Promise",$p=ze.get,Kp=ze.set,Yp=ze.getterFor(Zp),Jp=ip&&ip.prototype,Xp=ip,ef=Jp,tf=O.TypeError,nf=O.document,rf=O.process,of=Hp.f,sf=of,af=!!(nf&&nf.createEvent&&O.dispatchEvent),cf=H(O.PromiseRejectionEvent),lf=!1,uf=Ct(Zp,(function(){var e=Me(Xp),t=e!==String(Xp);if(!t&&66===J)return!0;if(J>=51&&/native code/.test(e))return!1;var n=new Xp((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[zp]=r,!(lf=n.then((function(){}))instanceof r)||!t&&Wp&&!cf})),df=uf||!Ai((function(e){Xp.all(e).catch((function(){}))})),hf=function(e){var t;return!(!Q(e)||!H(t=e.then))&&t},pf=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;jp((function(){for(var r=e.value,i=1==e.state,o=0;n.length>o;){var s,a,c,l=n[o++],u=i?l.ok:l.fail,d=l.resolve,h=l.reject,p=l.domain;try{u?(i||(2===e.rejection&&_f(e),e.rejection=1),!0===u?s=r:(p&&p.enter(),s=u(r),p&&(p.exit(),c=!0)),s===l.promise?h(tf("Promise-chain cycle")):(a=hf(s))?a.call(s,d,h):d(s)):h(r)}catch(ky){p&&!c&&p.exit(),h(ky)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&gf(e)}))}},ff=function(e,t,n){var r,i;af?((r=nf.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),O.dispatchEvent(r)):r={promise:t,reason:n},!cf&&(i=O["on"+e])?i(r):"unhandledrejection"===e&&function(e,t){var n=O.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},gf=function(e){qp.call(O,(function(){var t,n=e.facade,r=e.value;if(mf(e)&&(t=Qp((function(){sp?rf.emit("unhandledRejection",r,n):ff("unhandledrejection",n,r)})),e.rejection=sp||mf(e)?2:1,t.error))throw t.value}))},mf=function(e){return 1!==e.rejection&&!e.parent},_f=function(e){qp.call(O,(function(){var t=e.facade;sp?rf.emit("rejectionHandled",t):ff("rejectionhandled",t,e.value)}))},vf=function(e,t,n){return function(r){e(t,r,n)}},Ef=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,pf(e,!0))},Af=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw tf("Promise can't be resolved itself");var r=hf(t);r?jp((function(){var n={done:!1};try{r.call(t,vf(Af,n,e),vf(Ef,n,e))}catch(ky){Ef(n,ky,e)}})):(e.value=t,e.state=1,pf(e,!1))}catch(ky){Ef({done:!1},ky,e)}}};if(uf&&(ef=(Xp=function(e){gi(this,Xp,Zp),re(e),Bp.call(this);var t=$p(this);try{e(vf(Af,t),vf(Ef,t))}catch(ky){Ef(t,ky)}}).prototype,(Bp=function(e){Kp(this,{type:Zp,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=bi(ef,{then:function(e,t){var n=Yp(this),r=of(ia(this,Xp));return r.ok=!H(e)||e,r.fail=H(t)&&t,r.domain=sp?rf.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&pf(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),Up=function(){var e=new Bp,t=$p(e);this.promise=e,this.resolve=vf(Af,t),this.reject=vf(Ef,t)},Hp.f=of=function(e){return e===Xp||e===Fp?new Up(e):sf(e)},H(ip)&&Jp!==Object.prototype)){Vp=Jp.then,lf||(Je(Jp,"then",(function(e,t){var n=this;return new Xp((function(e,t){Vp.call(n,e,t)})).then(e,t)}),{unsafe:!0}),Je(Jp,"catch",ef.catch,{unsafe:!0}));try{delete Jp.constructor}catch(ky){}Qr&&Qr(Jp,ef)}function yf(e){var t=e.retryFunction,n=e.settings,r=e.onError,i=e.onRetrying,s=e.context;return function(){for(var e=this,a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];var u=n.retries||5,d=0,h=-1,p=0,f=function(){var a=o(regeneratorRuntime.mark((function o(a,l){var g,m,_,v;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,g=s||e,o.next=4,t.apply(g,c);case 4:m=o.sent,d=0,a(m),o.next=14;break;case 9:o.prev=9,o.t0=o.catch(0),_=function(){clearTimeout(h),d=0,p=2,l(o.t0)},v=function(){2!==p&&d<u?(d++,p=1,Zd(i)&&i(d,_),h=setTimeout((function(){h=-1,f(a,l)}),n.timeout||1e3)):_()},r(o.t0,v,l);case 14:case"end":return o.stop()}}),o,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}();return new Promise(f)}}It({global:!0,wrap:!0,forced:uf},{Promise:Xp}),Vr(Xp,Zp,!1),Ti(Zp),Fp=q(Zp),It({target:Zp,stat:!0,forced:uf},{reject:function(e){var t=of(this);return t.reject.call(void 0,e),t.promise}}),It({target:Zp,stat:!0,forced:uf},{resolve:function(e){return function(e,t){if(Re(e),Q(t)&&t.constructor===e)return t;var n=Hp.f(e);return(0,n.resolve)(t),n.promise}(this,e)}}),It({target:Zp,stat:!0,forced:df},{all:function(e){var t=this,n=of(t),r=n.resolve,i=n.reject,o=Qp((function(){var n=re(t.resolve),o=[],s=0,a=1;fi(e,(function(e){var c=s++,l=!1;o.push(void 0),a++,n.call(t,e).then((function(e){l||(l=!0,o[c]=e,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=of(t),r=n.reject,i=Qp((function(){var i=re(t.resolve);fi(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Sf=function e(t){s(this,e),this.log=t.log,this.level=t.level,this.userId=t.userId,this.sdkAppId=t.sdkAppId,this.forAllJoinedClients=t.forAllJoinedClients,this.uploaded=!1},bf=function(){function e(t){s(this,e),this.id_=t.id,this.userId_=t.userId,this.sdkAppId_=t.sdkAppId,this.type_=t.type,this.isLocal_=!Jd(t.isLocal)||t.isLocal}return c(e,[{key:"setUserId",value:function(e){this.userId_=e}},{key:"setSdkAppId",value:function(e){this.sdkAppId_=e}},{key:"log",value:function(e,t){Cf.log({log:"[".concat(this.isLocal_?"":"*").concat(this.id_,"] ").concat(this.type_?this.type_+" ":"").concat(t),level:e,forAllJoinedClients:$d(this.userId_),userId:this.userId_,sdkAppId:this.sdkAppId_})}},{key:"info",value:function(e){this.log(wu.INFO,e)}},{key:"debug",value:function(e){this.log(wu.DEBUG,e)}},{key:"warn",value:function(e){this.log(wu.WARN,e)}},{key:"error",value:function(e){this.log(wu.ERROR,e)}}]),e}(),Cf=new(function(){function e(){var t=this;s(this,e),this.clients_=[],this.queue_=[],this.timeoutId_=-1,this.logLevel_=wu.DEBUG,this.logLevelToUpload_=wu.INFO,this.enableUploadLog_=!0,this.startUpload(),this.checkURLParam(),gh.on(kh,(function(e){var n=e.client;return t.clients_.push(n)})),gh.on(Oh,(function(e){e&&qd(e.config)&&ku[e.config.logLevelToUpload]&&(t.logLevelToUpload_=e.config.logLevelToUpload)}))}var t,n;return c(e,[{key:"startUpload",value:(n=o(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.upload();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:this.timeoutId_=setTimeout((function(){return t.startUpload()}),2e3);case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return n.apply(this,arguments)})},{key:"stopUpload",value:function(){-1!==this.timeoutId_&&(clearTimeout(this.timeoutId_),this.timeoutId_=-1)}},{key:"getLogsToUpload",value:function(){var e=this,t={map:new Map,splicedQueue:[]};if(this.queue_[0].forAllJoinedClients&&0===this.clients_.length)return t;for(var n=0,r=function(){if(50===n)return"break";var r=e.queue_[n];r.forAllJoinedClients?e.clients_.forEach((function(e){if(e.getIsJoined()){var n=e.getUserId(),i=e.getSDKAppId();t.map.has(n)?t.map.get(n).logs.push(r):t.map.set(n,{userId:n,sdkAppId:i,logs:[r]})}})):t.map.has(r.userId)?t.map.get(r.userId).logs.push(r):t.map.set(r.userId,{userId:r.userId,sdkAppId:r.sdkAppId,logs:[r]})};n<this.queue_.length;n++)if("break"===r())break;return t.map.size>0&&(t.splicedQueue=this.queue_.splice(0,n)),t}},{key:"upload",value:(t=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,a,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.queue_.length){e.next=2;break}return e.abrupt("return");case 2:if(t=this.getLogsToUpload(),n=t.map,r=t.splicedQueue,0!==n.size){e.next=5;break}return e.abrupt("return");case 5:e.prev=5,i=A(n.values()),o=0;case 8:if(!(o<i.length)){e.next=16;break}return s=i[o],a=s.userId,c=s.sdkAppId,l=s.logs,e.next=12,this.uploadLogWithRetry(JSON.stringify({timestamp:As(),sdkAppId:String(c),userId:a,version:"4.11.12",log:l.map((function(e){return e.log})).join("\n")}));case 12:l.forEach((function(e){return e.uploaded=!0}));case 13:o++,e.next=8;break;case 16:e.next=20;break;case 18:e.prev=18,e.t0=e.catch(5);case 20:(u=r.filter((function(e){return!e.uploaded}))).length>0&&(this.queue_=u.concat(this.queue_));case 22:case"end":return e.stop()}}),e,this,[[5,18]])}))),function(){return t.apply(this,arguments)})},{key:"uploadLogWithRetry",value:function(e){return yf({retryFunction:function(){return Ud.post(Hd(),e,{timeout:5e3})},settings:{retries:3,timeout:1e3},onError:function(e,t){t()}})()}},{key:"getPrefix",value:function(e){var t=new Date;return t.setTime(Es()),"[".concat(t.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1"),":").concat(t.getMilliseconds(),"] <").concat(ku[e],">")}},{key:"getLogLevel",value:function(){return this.logLevel_}},{key:"setLogLevel",value:function(e){$d(ku[e])||(this.logLevel_=e)}},{key:"enableUploadLog",value:function(){this.enableUploadLog_=!0}},{key:"disableUploadLog",value:function(){this.enableUploadLog_=!1}},{key:"log",value:function(e){var t=e.log,n=e.level,r=e.forAllJoinedClients,i=void 0===r||r,o=e.userId,s=e.sdkAppId;if(t="".concat(this.getPrefix(n)," ").concat(t),this.enableUploadLog_&&n>=this.logLevelToUpload_&&this.queue_.push(new Sf({log:t,level:n,userId:o,sdkAppId:s,forAllJoinedClients:i})),!(n<this.logLevel_))switch(n){case wu.ERROR:console.error(t);break;case wu.WARN:console.warn(t);break;case wu.INFO:console.log(t);break;case wu.DEBUG:console.debug(t)}}},{key:"debug",value:function(e){this.log({log:e,level:wu.DEBUG})}},{key:"info",value:function(e){this.log({log:e,level:wu.INFO})}},{key:"warn",value:function(e){this.log({log:e,level:wu.WARN})}},{key:"error",value:function(e){this.log({log:e,level:wu.ERROR})}},{key:"createLogger",value:function(e){return new bf(e)}},{key:"checkURLParam",value:function(){var e=new URLSearchParams(location.search).get("logLevelToUpload");ku[e]&&(this.logLevelToUpload_=e)}}]),e}()),Tf=!0,If=Math.floor,Rf=Number.isInteger||function(e){return!Q(e)&&isFinite(e)&&If(e)===e};It({target:"Number",stat:!0},{isInteger:Rf});var wf,kf=function(e){if(Ss(e))throw TypeError("The method doesn't accept regular expressions");return e},Of=_e("match"),Nf=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Of]=!1,"/./"[e](t)}catch(i){}}return!1},Lf=Ie.f,Pf="".startsWith,Df=Math.min,Mf=Nf("startsWith"),xf=!(Mf||(wf=Lf(String.prototype,"startsWith"),!wf||wf.writable));It({target:"String",proto:!0,forced:!xf&&!Mf},{startsWith:function(e){var t=Li(j(this));kf(e);var n=st(Df(arguments.length>1?arguments[1]:void 0,t.length)),r=Li(e);return Pf?Pf.call(t,r,n):t.slice(n,n+r.length)===r}}),It({target:"Array",stat:!0},{isArray:wt});var Bf=ga.trim,Uf=O.parseInt,Ff=O.Symbol,Vf=Ff&&Ff.iterator,jf=/^[+-]?0[Xx]/,Gf=8!==Uf(ua+"08")||22!==Uf(ua+"0x16")||Vf&&!N((function(){Uf(Object(Vf))}))?function(e,t){var n=Bf(Li(e));return Uf(n,t>>>0||(jf.test(n)?16:10))}:Uf;It({global:!0,forced:parseInt!=Gf},{parseInt:Gf});var Hf=[].slice,Qf={},Wf=function(e,t,n){if(!(t in Qf)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";Qf[t]=Function("C,a","return new C("+r.join(",")+")")}return Qf[t](e,n)},qf=Function.bind||function(e){var t=re(this),n=Hf.call(arguments,1),r=function(){var i=n.concat(Hf.call(arguments));return this instanceof r?Wf(t,i.length,i):t.apply(e,i)};return Q(t.prototype)&&(r.prototype=t.prototype),r};It({target:"Function",proto:!0},{bind:qf});var zf=Wt.findIndex,Zf=!0;"findIndex"in[]&&Array(1).findIndex((function(){Zf=!1})),It({target:"Array",proto:!0,forced:Zf},{findIndex:function(e){return zf(this,e,arguments.length>1?arguments[1]:void 0)}}),kr("findIndex");var $f=M.f,Kf=function(e){return function(t){for(var n,r=G(t),i=gr(r),o=i.length,s=0,a=[];o>s;)n=i[s++],L&&!$f.call(r,n)||a.push(e?[n,r[n]]:r[n]);return a}},Yf={entries:Kf(!0),values:Kf(!1)}.values;It({target:"Object",stat:!0},{values:function(e){return Yf(e)}});var Jf=lt.includes;It({target:"Array",proto:!0},{includes:function(e){return Jf(this,e,arguments.length>1?arguments[1]:void 0)}}),kr("includes"),It({target:"String",proto:!0,forced:!Nf("includes")},{includes:function(e){return!!~Li(j(this)).indexOf(Li(kf(e)),arguments.length>1?arguments[1]:void 0)}});var Xf="connection-state-changed",eg="connected",tg="error",ng="DISCONNECTED",rg="CONNECTING",ig="RECONNECTING",og="CONNECTED",sg={ON_PUBLISH_RESPONSE:2,NEW_ICE_CANDIDATE:4,CLINET_BANNED:8,CHANNEL_SETUP_SUCCESS:19,CHANNEL_SETUP_FAILED:80,REBUILD_SESSION_RESULT:514,JOIN_ROOM_RESULT:20,PEER_JOIN:4134,PEER_LEAVE:4135,STREAM_ADDED:16,STREAM_REMOVED:18,UPDATE_REMOTE_SDP:48,UPDATE_AUDIO_SSRC:50,UPDATE_VIDEO_SSRC:52,UPLINK_NETWORK_STATS:22,UPDATE_REMOTE_MUTE_STAT:23,CLOSE_PEER_ACK:10,SUBSCRIBE_ACK:26,PONG:775,PUBLISH_RESULT:4098,UNPUBLISH_RESULT:4100,SUBSCRIBE_RESULT:4102,UNSUBSCRIBE_RESULT:4104,SUBSCRIBE_CHANGE_RESULT:4106,UPDATE_OFFER_RESULT:4128,REMOTE_STREAM_UPDATE:4130,START_PUBLISH_TENCENT_CDN_RES:1286,STOP_PUBLISH_TENCENT_CDN_RES:1288,START_PUBLISH_GIVEN_CDN_RES:777,STOP_PUBLISH_GIVEN_CDN_RES:779,START_MIX_TRANSCODE_RES:781,STOP_MIX_TRANSCODE_RES:783,USER_LIST_RES:4137,SWITCH_ROLE_RES:4110},ag=[sg.UPDATE_REMOTE_MUTE_STAT,sg.UPLINK_NETWORK_STATS,sg.PONG,sg.REMOTE_STREAM_UPDATE,sg.USER_LIST_RES],cg={ON_PUBLISH_RESPONSE:"on-publish-response",NEW_ICE_CANDIDATE:"new-ice-candidate",CLINET_BANNED:"client-banned",CHANNEL_SETUP_SUCCESS:"channel-setup-success",CHANNEL_SETUP_FAILED:"channel-setup-failed",REBUILD_SESSION_RESULT:"channel-reconnect-result",JOIN_ROOM_RESULT:"join-room-result",PEER_JOIN:"peer-join",PEER_LEAVE:"peer-leave",STREAM_ADDED:"stream-added",STREAM_REMOVED:"stream-removed",UPDATE_REMOTE_SDP:"update-remote-sdp",UPDATE_AUDIO_SSRC:"update-audio-ssrc",UPDATE_VIDEO_SSRC:"update-video-ssrc",UPLINK_NETWORK_STATS:"uplink-network-stats",UPDATE_REMOTE_MUTE_STAT:"update-remote-mute-stat",CLOSE_PEER_ACK:"close-peer-ack",SUBSCRIBE_ACK:"subscribe-ack",REQUEST_REBUILD_SESSION:"request-rebuild-session",CLIENT_REJOIN:"client-rejoin",PONG:"pong",PUBLISH_RESULT:"publish-result",UNPUBLISH_RESULT:"unpublish-result",SUBSCRIBE_RESULT:"subscribe-result",SUBSCRIBE_CHANGE_RESULT:"subscribe-change-result",UNSUBSCRIBE_RESULT:"unsubscribe-result",UPDATE_OFFER_RESULT:"update-offer-result",REMOTE_STREAM_UPDATE:"remote-stream-update",START_PUBLISH_TENCENT_CDN_RES:"start-publish-tencent-cdn-res",STOP_PUBLISH_TENCENT_CDN_RES:"stop-publish-tencent-cdn-res",START_PUBLISH_GIVEN_CDN_RES:"start-publish-given-cdn-res",STOP_PUBLISH_GIVEN_CDN_RES:"stop-publish-given-cdn-res",START_MIX_TRANSCODE_RES:"start-mix-transcode-res",STOP_MIX_TRANSCODE_RES:"stop-mix-transcode-res",USER_LIST_RES:"user-list-res",SWITCH_ROLE_RES:"switch_role_res"},lg="on_update_track",ug="on_create_room",dg="on_quit_room",hg="on_quality_report",pg="on_rebuild_session",fg="on_mute_uplink",gg="on_constraints_config",mg="ping",_g="on_publish",vg="on_unpublish",Eg="on_sub",Ag="on_unsub",yg="on_sub_change",Sg="on_start_publishing",bg="on_stop_publishing",Cg="on_start_push_user_cdn",Tg="on_stop_push_user_cdn",Ig="on_start_mcu_mix",Rg="on_stop_mcu_mix",wg="on_get_user_list",kg="on_switch_role",Og="on_change_video_type",Ng=32768,Lg=32769,Pg=32770,Dg=32771,Mg=32772,xg=32773,Bg=32774,Ug=32775,Fg=32777,Vg=32778,jg=32779,Gg=32780,Hg=32781,Qg=32782,Wg=32783,qg=32784,zg=32785,Zg=32786,$g=32787,Kg=32788,Yg=32789,Jg=32790,Xg=32791,em=32792,tm=32793,nm=32794,rm=32795,im=32796,om=32797,sm=32798,am=32799,cm=32800,lm=32801,um=32802,dm=new Map,hm=function(e,t){var n=dm.get(e);n||(dm.set(e,[]),n=dm.get(e)),n.push(t)},pm=Object.prototype.hasOwnProperty;function fm(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(qd(e))switch(Object.prototype.toString.call(e)){case"[object File]":case"[object Map]":case"[object Set]":return 0===e.size;case"[object Object]":for(var t in e)if(pm.call(e,t))return!1;return!0}return!1}var gm=/"/g,mm=function(e,t,n,r){var i=Li(j(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+Li(r).replace(gm,"&quot;")+'"'),o+">"+i+"</"+t+">"},_m=function(e){return N((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))};It({target:"String",proto:!0,forced:_m("link")},{link:function(e){return mm(this,"a","href",e)}});var vm="AVOID_REPEATED_CALL",Em="INVALID_PARAMETER_REQUIRED",Am="INVALID_PARAMETER_TYPE",ym="INVALID_PARAMETER_EMPTY",Sm="INVALID_PARAMETER_INSTANCE",bm="INVALID_PARAMETER_RANGE",Cm="API_CALL_TIMEOUT",Tm="SIGNAL_CHANNEL_RECONNECTION_FAILED",Im="SIGNAL_CHANNEL_SETUP_FAILED",Rm="ERROR_MESSAGE",wm="SUBSCRIPTION_TIMEOUT",km="EXCHANGE_SDP_TIMEOUT",Om="DOWNLINK_RECONNECTION_FAILED",Nm="EXCHANGE_SDP_FAILED",Lm="UPLINK_RECONNECTION_FAILED",Pm="AUDIO",Dm="VIDEO",Mm="INVALID_RECORDID",xm="INVALID_PURE_AUDIO",Bm="INVALID_STREAMID",Um="INVALID_USER_DEFINE_RECORDID",Fm="INVALID_USER_DEFINE_PUSH_ARGS",Vm="INVALID_PROXY",jm="INVALID_JOIN",Gm="INVALID_ROOMID_STRING",Hm="INVALID_ROOMID_INTEGER",Qm="INVALID_SIGNAL_CHANNEL",Wm="JOIN_ROOM_TIMEOUT",qm="JOIN_ROOM_FAILED",zm="REJOIN_ROOM_FAILED",Zm="INVALID_LEAVE",$m="INVALID_PUBLISH",Km="INVALID_UNPUBLISH",Ym="INVALID_AUDIENCE",Jm="INVALID_INITIALIZE",Xm="INVALID_DUPLICATE_PUBLISHING",e_="INVALID_REMOTE_STREAM",t_="SUBSCRIBE_FAILED",n_="INVALID_ROLE",r_="INVALID_OPERATION_SWITCH_ROLE",i_="SWITCH_ROLE_TIMEOUT",o_="SWITCH_ROLE_FAILED",s_="CLIENT_BANNED",a_="INVALID_OPERATION_START_PUBLISH_CDN",c_="INVALID_OPERATION_STOP_PUBLISH_CDN",l_="INVALID_STREAM_ID",u_="START_PUBLISH_CDN_FAILED",d_="STOP_PUBLISH_CDN_FAILED",h_="START_MIX_TRANSCODE",p_="STOP_MIX_TRANSCODE",f_="INVALID_AUDIO_VOLUME",g_="ENABLE_SMALL_STREAM_PUBLISHED",m_="DISABLE_SMALL_STREAM_PUBLISHED",__="NOT_SUPPORTED_SMALL_STREAM",v_="INVALID_SMALL_STREAM_PROFILE",E_="INVALID_PARAMETER_REMOTE_STREAM",A_="REMOTE_NOT_PUBLISH_SMALL_STREAM",y_="INVALID_SWITCH_DEVICE",S_="INVALID_SWITCH_DEVICE_PUBLISHING",b_="INVALID_REPLACE_TRACK",C_="INVALID_INITIALIZE_LOCAL_STREAM",T_="INVALID_ADD_TRACK_REPETITIVE",I_="INVALID_ADD_TRACK_REMOVING",R_="INVALID_ADD_TRACK_PUBLISHING",w_="INVALID_STREAM_INITIALIZED",k_="INVALID_ADD_TRACK_NUMBER",O_="INVALID_REMOVE_AUDIO_TRACK",N_="INVALID_REMOVE_AUDIO_ADDING",L_="INVALID_REMOVE_AUDIO_ON",P_="INVALID_REMOVE_TRACK_PUBLISHING",D_="INVALID_REMOVE_TRACK_NOT_PUBLISHING",M_="INVALID_REMOVE_TRACK_NUMBER",x_="INVALID_REMOVE_TRACK_NOT_PUBLISHED",B_="START_MIX_TRANSCODE_FAILED",U_="STOP_MIX_TRANSCODE_FAILED",F_="MIX_TRANSCODE_NOT_STARTED",V_="CANNOT_LESS_THAN_ZERO",j_="MIX_PARAMS_VIDEO_FRAMERATE",G_="MIX_PARAMS_VIDEO_GOP",H_="MIX_PARAMS_AUDIO_BITRATE",Q_="MIX_PARAMS_USER_Z_ORDER",W_="MIX_PARAMS_NOT_SELF",q_="MIX_PARAMS_USER_STREAM",z_="INVALID_PLAY",Z_="INVALID_CREATE_STREAM_SOURCE",$_="INVALID_CREATE_STREAM_SCREEN",K_="INVALID_CREATE_STREAM_AUDIO",Y_="INVALID_CREATE_STREAM_SCREEN_AUDIO",J_="NOT_SUPPORTED_HTTP",X_="NOT_SUPPORTED_WEBRTC",ev="NOT_SUPPORTED_PROFILE",tv="NOT_SUPPORTED_H264ENCODE",nv="NOT_SUPPORTED_H264DECODE",rv="NOT_SUPPORTED_REPLACE_TRACK",iv="NOT_SUPPORTED_CAPTURE",ov="MICROPHONE_NOT_FOUND",sv="CAMERA_NOT_FOUND",av={AVOID_REPEATED_CALL:function(e){return"previous ".concat(e.name,"() is ongoing, please avoid repeated calls.")},INVALID_PARAMETER_REQUIRED:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value;return"'".concat(t||n.name,"' is a required param when calling ").concat(r,"(), received: ").concat(i,".")},INVALID_PARAMETER_TYPE:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value,o="".concat(t||n.name),s="";return s=Array.isArray(n.type)?n.type.join("|"):n.type,"'".concat(o,"' must be type of ").concat(s," when calling ").concat(r,"(), received type: ").concat(eh(i),".")},INVALID_PARAMETER_EMPTY:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value;return"'".concat(t||n.name,"' cannot be '").concat(i,"' when calling ").concat(r,"().")},INVALID_PARAMETER_INSTANCE:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value,o="".concat(t||n.name),s="".concat(n.instanceOf.name||n.instanceOf);return"'".concat(o,"' must be instanceof ").concat(s," when calling ").concat(r,"(), received type: ").concat(eh(i),".")},INVALID_PARAMETER_RANGE:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value;return"'".concat(t||n.name,"' must be one of ").concat(n.values.join("|")," when calling ").concat(r,"(), received: ").concat(i,".")},API_CALL_TIMEOUT:function(e){return"".concat(e.commandDesc||e.command," timeout observed.")},SIGNAL_CHANNEL_RECONNECTION_FAILED:"signal channel reconnection failed, please check your network.",SIGNAL_CHANNEL_SETUP_FAILED:function(e){return"SignalChannel setup failure: (errorCode: ".concat(e.errorCode,", errorMsg: ").concat(e.errorMsg," }).")},ERROR_MESSAGE:function(e){var t="".concat(e.type," failed");return e.message&&(t="".concat(t,": ").concat(e.message,".")),t},SUBSCRIPTION_TIMEOUT:"remote server does not respond to the subscription.",EXCHANGE_SDP_TIMEOUT:"exchange sdp timeout.",DOWNLINK_RECONNECTION_FAILED:"downlink reconnection failed, please check your network and re-join room.",EXCHANGE_SDP_FAILED:function(e){return"exchange sdp failed ".concat(e.errMsg,".")},UPDATE_OFFER_TIMEOUT:"update offer timeout observed.",UPLINK_RECONNECTION_FAILED:"uplink reconnection failed, please check your network and publish again.",AUDIO:function(e){return e.error.toString()+" <audio>"},VIDEO:function(e){return e.error.toString()+" <video>"},INVALID_RECORDID:"recordId must be an integer number.",INVALID_PURE_AUDIO:"pureAudioPushMode must be 1 or 2.",INVALID_STREAMID:"streamId must be a sting literal within 64 bytes, and not be empty.",INVALID_USER_DEFINE_RECORDID:"userDefineRecordId must be a sting literal contains (a-zA-Z),(0-9), underline and hyphen, within 64 bytes, and not be empty.",INVALID_USER_DEFINE_PUSH_ARGS:"userDefinePushArgs must be a sting literal within 256 bytes, and not be empty.",INVALID_PROXY:'proxy server url must start with "wss://".',INVALID_JOIN:"duplicate join() called.",INVALID_ROOMID_STRING:function(e){return"'".concat(e,"' must be validate string when useStringRoomId is true.")},INVALID_ROOMID_INTEGER:function(e){return"'".concat(e,"' must be an integer between [1, 4294967294] when useStringRoomId is false.")},INVALID_SIGNAL_CHANNEL:"SignalChannel is not ready yet.",JOIN_ROOM_TIMEOUT:"join room timeout.",JOIN_ROOM_FAILED:function(e){return"Failed to join room - "+e.error},REJOIN_ROOM_FAILED:function(e){return"reJoin room: ".concat(e.roomId," failed, please check your network.")},INVALID_LEAVE:"please call leave() before destroy().",INVALID_PUBLISH:"please call join() before publish().",INVALID_UNPUBLISH:"stream has not been published yet.",INVALID_AUDIENCE:"no permission to publish() under live/".concat("audience",', please call switchRole("').concat("anchor",'") firstly before publish().'),INVALID_INITIALIZE:"cannot publish stream because stream is not initialized or is switching device.",INVALID_DUPLICATE_PUBLISHING:"duplicate publishing, please unpublish and then re-publish.",INVALID_SUBSCRIBE_UNDEFINED:"stream is undefined or null.",INVALID_SUBSCRIBE_LOCAL:"stream cannot be LocalStream.",INVALID_REMOTE_STREAM:"remoteStream does not exist because it has been unpublished by remote peer.",SUBSCRIBE_FAILED:function(e){return"failed to subscribe stream, reason: ".concat(e.message,".")},INVALID_ROLE:"switchRole can only be called in live mode.",INVALID_PARAMETER_SWITCH_ROLE:"role could only be set to a value as ".concat("anchor"," or ").concat("audience","."),INVALID_OPERATION_SWITCH_ROLE:"please call join() before switchRole().",SWITCH_ROLE_TIMEOUT:"switchRole timeout.",SWITCH_ROLE_FAILED:function(e){return"switchRole failed, errCode: ".concat(e.errCode," errMsg: ").concat(e.errMsg,".")},CLIENT_BANNED:function(e){return"client was banned because of "+e.reason+"."},INVALID_OPERATION_START_PUBLISH_CDN:"please call publish() before startPublishCDNStream().",INVALID_OPERATION_STOP_PUBLISH_CDN:"please call startPublishCDNStream() before stopPublishCDNStream().",START_PUBLISH_CDN_FAILED:function(e){return"startPublishCDNStream failed, errMsg: ".concat(e.message,".")},STOP_PUBLISH_CDN_FAILED:function(e){return"stopPublishCDNStream failed, errMsg: ".concat(e.message,".")},INVALID_STREAM_ID:function(e){return"'".concat(e,"' can only consist of uppercase and lowercase english letters (a-zA-Z), numbers (0-9), hyphens and underscores.")},START_MIX_TRANSCODE:"please call startMixTranscode() after join().",STOP_MIX_TRANSCODE:"please call stopMixTranscode() after startMixTranscode().",INVALID_AUDIO_VOLUME:"interval must be a number.",ENABLE_SMALL_STREAM_PUBLISHED:"Cannot enable small stream after localStream published.",DISABLE_SMALL_STREAM_PUBLISHED:"Cannot disable small stream after localStream published.",NOT_SUPPORTED_SMALL_STREAM:"your browser does not support opening small stream.",INVALID_SMALL_STREAM_PROFILE:"small stream profile is invalid.",INVALID_PARAMETER_REMOTE_STREAM:"remoteStream is invalid.",REMOTE_NOT_PUBLISH_SMALL_STREAM:"remote peer does not publish small stream.",INVALID_SWITCH_DEVICE:"cannot switch device on current stream.",INVALID_SWITCH_DEVICE_PUBLISHING:"cannot switch device when publishing localStream.",INVALID_REPLACE_TRACK:"cannot replace track when publishing localStream.",INVALID_INITIALIZE_LOCAL_STREAM:"local stream has not initialized yet.",INVALID_ADD_TRACK_REPETITIVE:"previous addTrack is ongoing, please avoid repetitive execution.",INVALID_ADD_TRACK_REMOVING:"cannot add track when a track is removing.",INVALID_ADD_TRACK_PUBLISHING:"cannot add track when publishing localStream.",INVALID_STREAM_INITIALIZED:"your local stream haven't been initialized yet.",INVALID_ADD_TRACK_NUMBER:"a Stream has at most one audio track and one video track.",INVALID_REMOVE_AUDIO_TRACK:"remove audio track is not supported.",INVALID_REMOVE_AUDIO_ADDING:"cannot remove track when a track is adding.",INVALID_REMOVE_AUDIO_ON:"previous removeTrack is ongoing, please avoid repetitive execution.",INVALID_REMOVE_TRACK_PUBLISHING:"cannot remove track when publishing localStream.",INVALID_REMOVE_TRACK_NOT_PUBLISHING:"the track to be removed is not being publishing.",INVALID_REMOVE_TRACK_NUMBER:"remove the only video track is not supported, please use replaceTrack or muteVideo.",INVALID_REMOVE_TRACK_NOT_PUBLISHED:function(e){return"try to replace ".concat(e.kind," track but there's no previous ").concat(e.kind," being published.")},START_MIX_TRANSCODE_FAILED:function(e){return"startMixTranscode failed, errMsg: ".concat(e.message,".")},STOP_MIX_TRANSCODE_FAILED:function(e){return"stopMixTranscode failed, errMsg: ".concat(e.message,".")},MIX_TRANSCODE_NOT_STARTED:"mixTranscode has not been started.",CANNOT_LESS_THAN_ZERO:function(e){var t=e.key,n=e.rule,r=e.fnName;return e.value,"'".concat(t||n.name,"' cannot be less than 0 when calling ").concat(r,"().")},MIX_PARAMS_VIDEO_FRAMERATE:"'config.videoFramerate' should be an integer between 0 and 30, excluding 0.",MIX_PARAMS_VIDEO_GOP:"'config.videoGOP' should be an integer between 1 and 8.",MIX_PARAMS_AUDIO_BITRATE:"'config.audioBitrate' should be an integer between 32 and 192.",MIX_PARAMS_USER_Z_ORDER:function(e){return"'".concat(e,"' is required and must be between 1 and 15.")},MIX_PARAMS_NOT_SELF:"'config.mixUsers' must contain self.",MIX_PARAMS_USER_STREAM:"'config.videoWidth' and 'config.videoHeight' of output stream should be contain all mix stream.",INVALID_PLAY:"duplicate play() call observed, please stop() firstly.",INVALID_USERID:"userId cannot be all spaces.",INVALID_CREATE_STREAM_SOURCE:"LocalStream must be created by createStream() with either audio/video or audioSource/videoSource, but can not be mixed with audio/video and audioSource/videoSource.",INVALID_CREATE_STREAM_SCREEN:"screen/video cannot be both true.",INVALID_CREATE_STREAM_AUDIO:"audio/screenAudio cannot be both true.",INVALID_CREATE_STREAM_SCREEN_AUDIO:"when screen is true, screenAudio can be configured.",NOT_SUPPORTED_HTTP:"not supported in http protocol, please use https protocol.",NOT_SUPPORTED_WEBRTC:"your browser does NOT support WebRTC!",NOT_SUPPORTED_PROFILE:"your browser does not support setVideoProfile.",NOT_SUPPORTED_MEDIA:"your browser does not support navigator.mediaDevices.",NOT_SUPPORTED_H264ENCODE:"your device does not support H.264 encoding.",NOT_SUPPORTED_H264DECODE:"your device does not support H.264 decoding.",NOT_SUPPORTED_REPLACE_TRACK:"replaceTrack is not supported in this browser, please use switchDevice or addTrack instead.",NOT_SUPPORTED_CAPTURE:"captureScreen is not supported, please use chrome.",MICROPHONE_NOT_FOUND:"no microphone detected, please check your microphone and the configuration on TRTC.createStream.",CAMERA_NOT_FOUND:"no camera detected, please check your camera and the configuration on TRTC.createStream."},cv=Ru+"module-ErrorCode.html",lv=function(){if(!Fc())return!1;var e=localStorage.getItem("trtc_error_assistance");e&&!function(e){var t=e.saveTime&&(new Date).getTime()-e.saveTime>=6048e5,n=!e.saveVersion||"4.11.12"!==e.saveVersion;return t||n}(JSON.parse(e))||(Cf.log("request error info"),function(){var e=new XMLHttpRequest;if(e.open("GET","https://web.sdk.qcloud.com/trtc/webrtc/download/error-message/0.0.1/script.js",!1),e.send(null),4===e.readyState&&200===e.status){var t=document.createElement("script");t.type="text/javascript",t.text=e.responseText,document.body.appendChild(t),localStorage.setItem("trtc_error_assistance",JSON.stringify({message:e.responseText,saveTime:(new Date).getTime(),saveVersion:"4.11.12"})),document.body.removeChild(t)}}())};function uv(e){var t=e.key,n=e.data,r=e.link,i="",o="",s="";Zd(av[t])?i=av[t](n):Kd(av[t])&&(i=av[t]);var a=function(){if(window.TRTC_ERROR_INFO&&window.TRTC_ERROR_LINK)return{TRTC_ERROR_INFO:window.TRTC_ERROR_INFO,TRTC_ERROR_LINK:window.TRTC_ERROR_LINK};var e=localStorage.getItem("trtc_error_assistance");if(e){e=JSON.parse(e);var t=document.createElement("script");t.type="text/javascript",t.text=e.message,document.body.appendChild(t);var n=window.TRTC_ERROR_INFO,r=window.TRTC_ERROR_LINK;return document.body.removeChild(t),{TRTC_ERROR_INFO:n,TRTC_ERROR_LINK:r}}return{}}(),c=a.TRTC_ERROR_INFO,l=a.TRTC_ERROR_LINK;c&&c[t]&&(Zd(c[t])?o=c[t](n):Kd(c[t])&&(o=c[t])),r?s=Ru+"".concat(r.className,".html#").concat(r.className===yu?".":"").concat(r.fnName):l&&l[t]&&(s=Ru+l[t]);var u=i;return u+=" "+o,u+(o?s?"查看文档："+s:"查看文档："+cv:s?"Refer to："+s:"Refer to："+cv)}var dv=function(){function e(t){s(this,e),this.client_=t.client,this.sdkAppId_=t.sdkAppId,this.userId_=t.userId,this.userSig_=t.userSig,this.url_=t.url,this.backupUrl_=t.backupUrl,this.version_=t.version,this.urlWithParam_="".concat(this.url_,"?sdkAppid=").concat(this.sdkAppId_,"&identifier=").concat(this.userId_,"&userSig=").concat(this.userSig_),this.backupUrlWithParam_="".concat(this.backupUrl_,"?sdkAppid=").concat(this.sdkAppId_,"&identifier=").concat(this.userId_,"&userSig=").concat(this.userSig_),this.isConnected_=!1,this.isConnecting_=!1,this.socketInUse_=null,this.socket_=null,this.backupSocket_=null,this.backupTimer_=-1,this.signalInfo_={},this.currentState_=ng,this.reconnectionCount_=0,this.reconnectionTimer_=-1,this.seq_=0,this.log_=Cf.createLogger({id:"ws|"+this.userId_,userId:this.userId_,sdkAppId:this.sdkAppId_}),this.pingPongTimeoutId_=-1,this.pingTimeoutId_=-1,this.emitter_=new fh}var t;return c(e,[{key:"connect",value:function(){var e=this;this.log_.info("connect to url: ".concat(this.urlWithParam_)),this.emitter_.emit(Xf,{prevState:this.currentState_,state:rg}),this.currentState_=rg,this.socket_=new WebSocket(this.urlWithParam_),this.bindSocket(this.socket_),this.backupTimer_=setTimeout((function(){e.isConnected_||(e.log_.info("trying to connect to backupUrl"),e.tryConnectBackup())}),5e3)}},{key:"tryConnectBackup",value:function(){this.backupSocket_||(this.unbindAndCloseSocket("main"),this.log_.debug("try to connect to url: ".concat(this.backupUrlWithParam_)),this.backupSocket_=new WebSocket(this.backupUrlWithParam_),this.bindSocket(this.backupSocket_))}},{key:"bindSocket",value:function(e){e.onopen=this.onopen.bind(this),e.onclose=this.onclose.bind(this),e.onerror=this.onerror.bind(this),e.onmessage=this.onmessage.bind(this)}},{key:"unbindSocket",value:function(e){e.onopen=function(){},e.onclose=function(){},e.onerror=function(){},e.onmessage=function(){}}},{key:"unbindAndCloseSocket",value:function(e){if("main"===e){if(this.socket_){this.unbindSocket(this.socket_);try{this.socket_.close(1e3)}catch(ky){}this.socket_=null}}else if(this.backupSocket_){this.unbindSocket(this.backupSocket_);try{this.backupSocket_.close(1e3)}catch(ky){}this.backupSocket_=null}}},{key:"clearBackupTimer",value:function(){-1!==this.backupTimer_&&(clearTimeout(this.backupTimer_),this.backupTimer_=-1)}},{key:"clearReconnectionTimer",value:function(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}},{key:"onopen",value:function(e){if(!this.isConnected_){this.isConnected_=!0,this.isConnecting_=!1,this.clearBackupTimer(),e.target===this.socket_?(this.unbindAndCloseSocket("backup"),this.socketInUse_=this.socket_):(this.unbindAndCloseSocket("main"),this.socketInUse_=this.backupSocket_);var t=e.target.url;this.log_.info("websocket[".concat(t,"] is connected")),this.emitter_.emit(Xf,{prevState:this.currentState_,state:og}),this.currentState_===rg?this.addSignalEvent(Xg,"signal channel is connected"):this.currentState_===ig&&this.addSignalEvent(rm,"signal channel reconnect success"),this.currentState_=og,this.emitter_.emit(eg)}}},{key:"onclose",value:function(e){var t=e.target.url,n=e.target===this.socketInUse_;this.log_.info("websocket[".concat(t," InUse: ").concat(n,"] is closed with code: ").concat(e.code)),e.target===this.socketInUse_&&(this.isConnected_=!1,e.wasClean&&1e3===e.code?(this.emitter_.emit(Xf,{prevState:this.currentState_,state:ng}),this.currentState_=ng,this.addSignalEvent(Jg,"signal channel is disconnected")):(this.log_.warn("onclose code:".concat(e.code," reason:").concat(e.reason)),this.log_.warn("close current websocket and schedule a reconnect timeout"),this.socketInUse_.onclose=function(){},this.socketInUse_.close(4011),this.socket_=this.backupSocket_=this.socketInUse_=null,this.reconnect("main")))}},{key:"onerror",value:function(e){var t=e.target.url;this.log_.error("websocket[".concat(t,"] error observed")),this.isConnected_?e.target===this.socketInUse_&&(this.isConnected_=!1,this.unbindAndCloseSocket("main"),this.unbindAndCloseSocket("backup"),this.socketInUse_=null,this.reconnect("main")):(this.isReconnecting_||jd.logFailedEvent({userId:this.client_.getUserId(),eventType:Dl,code:Fd.UNKNOWN}),e.target==this.socket_?(this.unbindAndCloseSocket("main"),this.reconnect("backup")):(this.unbindAndCloseSocket("backup"),this.reconnect("main"))),this.isConnecting_=!1,this.isConnected_=!1}},{key:"onmessage",value:function(e){var t=this;if(this.isConnected_){var n=JSON.parse(e.data),r=n.cmd,i=n.content,o=Object.values(sg),s=Object.keys(sg)[o.indexOf(r)],a=cg[s];if(!ag.includes(r)){var c=e.target==this.socket_?this.url_:this.backupUrl_;if(this.log_.debug("websocket[".concat(c,"] received message: ").concat(e.data)),this.log_.info("Received event: [ ".concat(a||"unknown cmd: "+r," ]")),(a===cg.UPDATE_REMOTE_SDP||a===cg.UPDATE_AUDIO_SSRC||a===cg.UPDATE_VIDEO_SSRC)&&i.offersdp)try{var l=JSON.parse(i.offersdp),u=l.audiossrc,d=l.videossrc,h=l.rtxssrc;this.log_.info("ssrc info in offersdp: [ audiossrc: ".concat(u," videossrc: ").concat(d," rtxssrc: ").concat(h," ]"))}catch(g){}}switch(r){case sg.CHANNEL_SETUP_SUCCESS:this.signalInfo_.relayIp=i.relayip,this.signalInfo_.relayInnerIp=i.innerip,this.signalInfo_.signalIp=i.signalip,this.signalInfo_.localIp=i.localip,this.signalInfo_.dataPort=i.dataport,this.signalInfo_.stunPort=i.stunport,this.signalInfo_.checkSigSeq=i.checkSigSeq,this.signalInfo_.socketId=i.socketid,this.signalInfo_.tinyId=i.tinyid,this.signalInfo_.openId=i.openid,this.signalInfo_.stunPortList=i.stunportList,!i.stunportList||i.stunportList.length<=0?this.signalInfo_.stunServers="stun:"+i.relayip+":"+i.stunport:(this.signalInfo_.stunServers=[],i.stunportList.forEach((function(e){var n="stun:"+i.relayip+":"+e;t.signalInfo_.stunServers.push(n)}))),i.cgiurl&&(this.signalInfo_.logCgiUrl=i.cgiurl),i.svrTime&&function(e){vs=e-(new Date).getTime();var t=new Date;t.setTime(e),Cf.info("baseTime from server: "+t+" offset: "+vs)}(i.svrTime),this.log_.info("ChannelSetup Success: signalIp:".concat(i.signalip," relayIp:").concat(i.relayip," clientIp:").concat(i.localip," checkSigSeq:").concat(i.checkSigSeq)),this.log_.info("start ping pong"),this.startPingPong(),this.isReconnecting_&&(this.reconnectionCount_=0,this.clearReconnectionTimer(),1===i.rc&&this.emitter_.emit(cg.REQUEST_REBUILD_SESSION,{signalInfo:this.signalInfo_})),this.emitter_.emit(a,{signalInfo:this.signalInfo_});break;case sg.REBUILD_SESSION_RESULT:0===i.result?(this.log_.info("reconnect - rebuild session succeeded"),this.client_.checkConnectionsToReconnect()):(this.emitter_.emit(cg.CLIENT_REJOIN),this.log_.error("reconnect - rebuild session failed: ".concat(JSON.stringify(i))));break;case sg.CHANNEL_SETUP_FAILED:if(!this.isReconnecting_){var p="sdkAppId invalid",f="";$d(i.errorCode)||(p=i.errorCode,f=i.errorMsg);var g=new Vd({code:Fd.SIGNAL_CHANNEL_SETUP_FAILED,extraCode:p,message:uv({key:Im,data:{errorCode:p,errorMsg:f}})});this.close(),jd.logFailedEvent({userId:this.client_.getUserId(),eventType:Dl,error:g}),this.emitter_.emit(tg,g)}break;default:this.emitter_.emit(a,{data:n})}}}},{key:"addSignalEvent",value:function(e,t){hm(this.userId_,{eventId:e,eventDesc:t,timestamp:Es(),userId:this.userId_,tinyId:this.signalInfo_.tinyId})}},{key:"reconnect",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";if(this.isConnecting_||-1!==this.reconnectionTimer_)this.log_.info("signal channel is reconnecting, ignoring current reconnection");else{if(this.reconnectionCount_>=30){this.log_.warn("SDK has tried reconnect signal channel for ".concat(30," times, but all failed. please check your network"));var n=new Vd({code:Fd.SIGNAL_CHANNEL_RECONNECTION_FAILED,message:uv({key:Tm})});return jd.logFailedEvent({userId:this.client_.getUserId(),eventType:Ml,error:n}),this.addSignalEvent(im,"signal channel reconnect fail"),void this.emitter_.emit(tg,n)}this.isConnecting_=!0,this.reconnectionCount_++,this.currentState_!==ig&&(this.emitter_.emit(Xf,{prevState:this.currentState_,state:ig}),this.currentState_=ig,this.addSignalEvent(nm,"signal channel is reconnecting")),this.log_.warn("reconnecting to ".concat(t," signal channel [").concat(this.reconnectionCount_,"/").concat(30,"]"));var r=this.getReconnectionUrl(t);"main"===t?(this.socket_=new WebSocket(r),this.bindSocket(this.socket_)):(this.backupSocket_=new WebSocket(r),this.bindSocket(this.backupSocket_));var i=zd(this.reconnectionCount_);this.reconnectionTimer_=setTimeout((function(){e.log_.warn("reconnect ".concat(t," signal channel timeout(").concat(i/1e3,"s), close and try again")),e.isConnecting_=!1,e.clearReconnectionTimer(),e.unbindAndCloseSocket(t),e.reconnect("main"===t?"backup":"main")}),i)}}},{key:"isConnected",value:function(){return this.isConnected_}},{key:"isReconnecting_",get:function(){return-1!==this.reconnectionTimer_}},{key:"getReconnectionUrl",value:function(e){var t="main"===e?this.urlWithParam_:this.backupUrlWithParam_;return fm(this.signalInfo_)||-1!==t.indexOf("&rc=1")||(t+="&iip="+this.signalInfo_.relayInnerIp+"&dp="+this.signalInfo_.dataPort+"&oip="+this.signalInfo_.relayIp+"&sp="+this.signalInfo_.stunPort+"&rc=1"),t}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(this.isConnected_){var r=this.createSendMessage(e);return r.data=t,void 0!==n&&(r.srctinyid=n),this.socketInUse_.send(JSON.stringify(r)),r.seq}}},{key:"sendWithoutUA",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;if(this.isConnected_){var r=this.createSendMessage(e,!1);return r.data=t,void 0!==n&&(r.srctinyid=n),this.socketInUse_.send(JSON.stringify(r)),r.seq}}},{key:"sendWithReport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;if(this.isConnected_){var r=this.createSendMessage(e);return r.data=t,r.report=n,this.socketInUse_.send(JSON.stringify(r)),r.seq}}},{key:"sendWaitForResponse",value:function(e){var t=this,n=e.command,r=e.data,i=e.timeout,o=void 0===i?5e3:i,s=e.responseCommand,a=e.commandDesc,c=e.retry,l=void 0===c?0:c,u=0;return new Promise((function(e,i){var c,d,h=function(){if(u<l)return u++,t.log_.warn("".concat(a," timeout observed, retrying [").concat(u,"/").concat(l,"]")),void f();t.off(s,p);var e=new Vd({code:Fd.API_CALL_TIMEOUT,message:uv({key:Cm,data:{commandDesc:a,command:n}})});t.log_.warn(e),i(e)},p=function n(r){r.data.seq===d&&(clearTimeout(c),t.off(s,n),e(r))},f=function(){c=setTimeout(h,o),d=t.send(n,r,0)};t.on(s,p),f()}))}},{key:"startPingPong",value:(t=o(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,-1===this.pingPongTimeoutId_){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.ping();case 5:this.pingPongTimeoutId_=setTimeout((function(){t.pingPongTimeoutId_=-1,t.startPingPong()}),1e4),this.client_.isRelayMaybeFailed()&&this.emitter_.emit(cg.CLIENT_REJOIN),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),this.log_.warn("ping-pong failed, start signal reconnection"),this.close(),this.reconnect("main");case 14:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return t.apply(this,arguments)})},{key:"stopPingPong",value:function(){this.log_.info("stop ping pong"),clearTimeout(this.pingTimeoutId_),clearTimeout(this.pingPongTimeoutId_),this.pingTimeoutId_=-1,this.pingPongTimeoutId_=-1}},{key:"ping",value:function(){var e=this;return new Promise((function(t,n){if(-1!==e.pingTimeoutId_)return t();e.sendWithoutUA(mg),e.once(cg.PONG,(function(){clearTimeout(e.pingTimeoutId_),e.pingTimeoutId_=-1,t()})),e.pingTimeoutId_=setTimeout((function(){e.pingTimeoutId_=-1,n()}),1e4)}))}},{key:"createSendMessage",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={tag_key:e,data:"",openid:this.userId_,tinyid:this.signalInfo_.tinyId,version:this.version_,seq:++this.seq_};return t&&(n.ua=navigator.userAgent),n}},{key:"getCurrentState",value:function(){return this.currentState_}},{key:"getSocketId",value:function(){return this.signalInfo_.socketId}},{key:"close",value:function(){this.log_.info("close SignalChannel"),this.clearBackupTimer(),this.clearReconnectionTimer(),this.stopPingPong(),this.isConnecting_=!1,this.isConnected_=!1,this.socketInUse_=null,this.unbindAndCloseSocket("main"),this.unbindAndCloseSocket("backup")}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"removeListener",value:function(e,t,n){this.emitter_.removeListener(e,t,n)}},{key:"once",value:function(e,t,n){this.emitter_.once(e,t,n)}},{key:"off",value:function(e,t,n){this.emitter_.off(e,t,n)}}]),e}(),hv=Wt.find,pv=!0;"find"in[]&&Array(1).find((function(){pv=!1})),It({target:"Array",proto:!0,forced:pv},{find:function(e){return hv(this,e,arguments.length>1?arguments[1]:void 0)}}),kr("find"),Si("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Oi);var fv=I((function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))})),gv=(fv.v,fv.o,fv.s,fv.i,fv.u,fv.e,fv.p,fv.z,fv.r,fv.t,fv.c,fv.b,fv.m,fv.a,I((function(e,t){var n=function(e){return String(Number(e))===e?Number(e):e},r=function(e,t,r){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:i?t[e.name]:t;!function(e,t,r,i){if(i&&!r)t[i]=n(e[1]);else for(var o=0;o<r.length;o+=1)null!=e[o+1]&&(t[r[o]]=n(e[o+1]))}(r.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],o=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach((function(e){var t=e[0],i=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),o=n[n.length-1]);for(var s=0;s<(fv[t]||[]).length;s+=1){var a=fv[t][s];if(a.reg.test(i))return r(a,o,i)}})),t.media=n,t};var o=function(e,t){var r=t.split(/=(.+)/,2);return 2===r.length?e[r[0]]=n(r[1]):1===r.length&&t.length>1&&(e[r[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],r=e.split(" ").map(n),i=0;i<r.length;i+=3)t.push({component:r[i],ip:r[i+1],port:r[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,r=!1;return"~"!==e[0]?t=n(e):(t=n(e.substring(1,e.length)),r=!0),{scid:t,paused:r}}))}))}}))),mv=(gv.parse,gv.parseParams,gv.parseFmtpConfig,gv.parsePayloads,gv.parseRemoteCandidates,gv.parseImageAttributes,gv.parseSimulcastStreamList,/%[sdv%]/g),_v=function(e){var t=1,n=arguments,r=n.length;return e.replace(mv,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},vv=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return _v.apply(null,r)},Ev=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Av=["i","c","b","a"],yv={write:function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||Ev,r=t.innerOrder||Av,i=[];return n.forEach((function(t){fv[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(vv(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(vv(t,n,e))}))}))})),e.media.forEach((function(e){i.push(vv("m",fv.m[0],e)),r.forEach((function(t){fv[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(vv(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(vv(t,n,e))}))}))}))})),i.join("\r\n")+"\r\n"},parse:gv.parse,parseParams:gv.parseParams,parseFmtpConfig:gv.parseFmtpConfig,parsePayloads:gv.parsePayloads,parseRemoteCandidates:gv.parseRemoteCandidates,parseImageAttributes:gv.parseImageAttributes,parseSimulcastStreamList:gv.parseSimulcastStreamList},Sv=function(e){return yv.parse(e)},bv=function(e){return yv.write(e)},Cv=function(e){var t=Sv(e);return t.media.forEach((function(e){e.type===Jl&&e.fmtp.forEach((function(e){e.config+=";sprop-stereo=1;stereo=1"}))})),bv(t)};function Tv(e){var t=Sv(e);return t.media.forEach((function(e){if(e.type===Xl){var t=new Set;e.rtp.forEach((function(e){var n=e.payload;return"H264"===e.codec&&t.add(n)})),e.fmtp.forEach((function(e){var n=e.payload,r=e.config.match(/apt=(\d+)/);r&&r[1]&&t.has(Number(r[1]))&&t.add(n)}));var n=function(e){var n=e.payload;return!t.has(n)};e.rtp=e.rtp.filter(n),e.rtcpFb=e.rtcpFb.filter(n),e.fmtp=e.fmtp.filter(n),e.payloads=e.payloads.split(" ").filter((function(e){return!t.has(Number(e))})).join(" ")}})),bv(t)}var Iv,Rv=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},wv=new(function(){function e(){s(this,e),this.intervalMap_=new Map}return c(e,[{key:"setInterval",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!window||!window.requestAnimationFrame)return setInterval(e,t);var i=Rv(),o=nh(),s=o;this.intervalMap_.set(i,{rafId:null,timeoutId:null,onVisibilityChange:null});var a=function a(){if(r&&document.hidden){e();var c=setTimeout(a,t);n.setTimeoutId(i,c),o=nh(),s=o}else{(s=nh())-o>=t&&(o=s,e());var l=requestAnimationFrame(a);n.setRafId(i,l)}},c=requestAnimationFrame(a);if(this.setRafId(i,c),r){var l=function(){if(document.hidden){var e=nh()-o;if(e>=t)a();else{var r=setTimeout(a,t-e);n.setTimeoutId(i,r)}}};document.addEventListener("visibilitychange",l),this.setOnVisibilityChange(i,l)}return i}))},{key:"clearInterval",value:function(e){if(this.intervalMap_.has(e)){var t=this.intervalMap_.get(e),n=t.rafId,r=t.timeoutId,i=t.onVisibilityChange;cancelAnimationFrame(n),clearTimeout(r),document.removeEventListener("visibilitychange",i),this.intervalMap_.delete(e)}}},{key:"setTimeoutId",value:function(e,t){if(this.intervalMap_.has(e)){var n=this.intervalMap_.get(e);n.timeoutId&&clearTimeout(n.timeoutId),n.timeoutId=t}}},{key:"setRafId",value:function(e,t){if(this.intervalMap_.has(e)){var n=this.intervalMap_.get(e);n.rafId&&cancelAnimationFrame(n.rafId),n.rafId=t}}},{key:"setOnVisibilityChange",value:function(e,t){this.intervalMap_.has(e)&&(this.intervalMap_.get(e).onVisibilityChange=t)}}]),e}()),kv=new(function(){function e(){s(this,e),this.prefix_="TRTC",this.queue_=new Map,this.intervalId_=wv.setInterval(this.doFlush.bind(this),2e4),this.checkStorage()}return c(e,[{key:"getRealKey",value:function(e){return"".concat(this.prefix_,"_").concat(e)}},{key:"checkStorage",value:function(){var e=this;Fc()&&Object.keys(localStorage).filter((function(t){if(t.startsWith(e.prefix_)){var n=JSON.parse(localStorage.getItem(t));if(n&&n.expiresIn<Date.now())return!0}return!1})).forEach((function(e){return localStorage.removeItem(e)}))}},{key:"doFlush",value:function(){if(Fc())try{var e,t=b(this.queue_);try{for(t.s();!(e=t.n()).done;){var n=E(e.value,2),r=n[0],i=n[1];localStorage.setItem(r,JSON.stringify(i))}}catch(s){t.e(s)}finally{t.f()}}catch(ky){Cf.warn(ky)}}},{key:"getItem",value:function(e){if(!Fc())return null;try{var t=JSON.parse(localStorage.getItem(this.getRealKey(e)));return t&&t.expiresIn>=Date.now()?t.value:null}catch(ky){Cf.warn(ky)}}},{key:"setItem",value:function(e,t){if(Fc())try{var n={expiresIn:Date.now()+6048e5,value:t};this.queue_.set(this.getRealKey(e),n)}catch(ky){Cf.warn(ky)}}},{key:"deleteItem",value:function(e){if(!Fc())return!1;try{return e=this.getRealKey(e),this.queue_.delete(e),localStorage.removeItem(e),!0}catch(ky){return Cf.warn(ky),!1}}},{key:"clear",value:function(){if(Fc())try{localStorage.clear()}catch(ky){Cf.warn(ky)}}}]),e}()),Ov={result:!1,detail:{isBrowserSupported:!1,isWebRTCSupported:!1,isMediaDevicesSupported:!1,isH264EncodeSupported:!1,isVp8EncodeSupported:!1,isH264DecodeSupported:!1,isVp8DecodeSupported:!1}};(Iv=kv.getItem("checkResult"))&&Iv.ua===navigator.userAgent&&(Ov=Iv.checkResult,Fv());var Nv=function(){return!mc&&!Qa&&!(qa&&za<80)&&!(Ga&&Ha<56)},Lv=function(){return["RTCPeerConnection","webkitRTCPeerConnection","RTCIceGatherer"].filter((function(e){return e in window})).length>0},Pv=function(){if(!navigator.mediaDevices)return!1;var e=["getUserMedia","enumerateDevices"];return e.filter((function(e){return e in navigator.mediaDevices})).length===e.length},Dv=function(){var e=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ov.detail.isH264EncodeSupported&&!Ov.detail.isVp8EncodeSupported){e.next=2;break}return e.abrupt("return",{isH264EncodeSupported:Ov.detail.isH264EncodeSupported,isVp8EncodeSupported:Ov.detail.isVp8EncodeSupported});case 2:return t="",n=!1,r=!1,e.prev=5,i=new RTCPeerConnection,(o=document.createElement("canvas")).getContext("2d"),s=o.captureStream(0),i.addTrack(s.getVideoTracks()[0],s),e.next=13,i.createOffer();case 13:return-1!==(t=e.sent).sdp.toLowerCase().indexOf("h264")&&(n=!0),-1!==t.sdp.toLowerCase().indexOf("vp8")&&(r=!0),i.close(),Ov.detail.isH264EncodeSupported=n,Ov.detail.isVp8EncodeSupported=r,e.abrupt("return",{isH264EncodeSupported:Ov.detail.isH264EncodeSupported,isVp8EncodeSupported:Ov.detail.isVp8EncodeSupported});case 22:return e.prev=22,e.t0=e.catch(5),e.abrupt("return",{isH264EncodeSupported:!1,isVp8EncodeSupported:!1});case 25:case"end":return e.stop()}}),e,null,[[5,22]])})));return function(){return e.apply(this,arguments)}}();function Mv(){return xv.apply(this,arguments)}function xv(){return(xv=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=o(regeneratorRuntime.mark((function e(t){var n,r,i,s,a,c,l,u,d,h,p,f,g,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={encode:!1,decode:!1},r=null,e.prev=2,i=document.createElement("canvas"),s=i.getContext("2d"),i.width=640,i.height=480,a=setInterval((function(){s.fillText("test",Math.floor(640*Math.random()),Math.floor(480*Math.random()))}),33),c=-1,l=-1,r=function(){clearInterval(c),clearInterval(a),clearTimeout(l),d.close(),h.close(),u.getTracks().forEach((function(e){return e.stop()}))},l=setTimeout((function(){r(),t(n)}),3e3),u=i.captureStream(),d=new RTCPeerConnection({}),h=new RTCPeerConnection({offerToReceiveAudio:!0,offerToReceiveVideo:!0}),d.addEventListener("icecandidate",(function(e){return h.addIceCandidate(e.candidate)})),h.addEventListener("icecandidate",(function(e){return d.addIceCandidate(e.candidate)})),d.addTrack(u.getVideoTracks()[0],u),e.next=20,d.createOffer();case 20:return p=e.sent,e.next=23,d.setLocalDescription(p);case 23:return e.next=25,h.setRemoteDescription(p);case 25:return e.next=27,h.createAnswer();case 27:return f=e.sent,g=Sv(f.sdp),m=g.media[0].rtp.findIndex((function(e){return"H264"===e.codec})),g.media[0].rtp=[g.media[0].rtp[m]],g.media[0].fmtp=g.media[0].fmtp.filter((function(e){return e.payload===g.media[0].rtp[0].payload})),g.media[0].rtcpFb=g.media[0].rtcpFb.filter((function(e){return e.payload===g.media[0].rtp[0].payload})),f.sdp=bv(g),e.next=36,h.setLocalDescription(f);case 36:return e.next=38,d.setRemoteDescription(f);case 38:c=setInterval(o(regeneratorRuntime.mark((function e(){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.encode&&n.decode&&(r(),t(n)),e.next=3,d.getStats();case 3:return i=e.sent,e.next=6,h.getStats();case 6:o=e.sent,n.encode||i.forEach((function(e){"outbound-rtp"===e.type&&e.mediaType===Xl&&e.framesEncoded>0&&(n.encode=!0)})),n.decode||o.forEach((function(e){"inbound-rtp"===e.type&&e.mediaType===Xl&&e.framesDecoded>0&&(n.decode=!0)}));case 9:case"end":return e.stop()}}),e)}))),500),e.next=46;break;case 41:e.prev=41,e.t0=e.catch(2),r(),Cf.warn(e.t0),t(n);case 46:case"end":return e.stop()}}),e,null,[[2,41]])})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bv=function(){var e=o(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ov.detail.isH264DecodeSupported&&!Ov.detail.isVp8DecodeSupported){e.next=2;break}return e.abrupt("return",{isH264DecodeSupported:Ov.detail.isH264DecodeSupported,isVp8DecodeSupported:Ov.detail.isVp8DecodeSupported});case 2:return t="",n=!1,r=!1,e.prev=5,i=new RTCPeerConnection,e.next=9,i.createOffer({offerToReceiveAudio:1,offerToReceiveVideo:1});case 9:return-1!==(t=e.sent).sdp.toLowerCase().indexOf("h264")&&(n=!0),-1!==t.sdp.toLowerCase().indexOf("vp8")&&(r=!0),i.close(),e.abrupt("return",{isH264DecodeSupported:n,isVp8DecodeSupported:r});case 16:return e.prev=16,e.t0=e.catch(5),e.abrupt("return",{isH264DecodeSupported:!1,isVp8DecodeSupported:!1});case 19:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(){return e.apply(this,arguments)}}(),Uv=function(e,t){var n=null;return function(){if(n)return n;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e.apply(t||this,i)).then((function(e){return n=null,e})).catch((function(e){throw n=null,e})),n}}(function(){var e=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,a,c,l,u,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ov.result){e.next=2;break}return e.abrupt("return",Ov);case 2:return t=Nv(),n=Lv(),r=Pv(),e.next=7,Dv();case 7:return i=e.sent,o=i.isH264EncodeSupported,s=i.isVp8EncodeSupported,e.next=12,Bv();case 12:if(a=e.sent,c=a.isH264DecodeSupported,l=a.isVp8DecodeSupported,!(o&&c&&(Cc||Ic||Mc)&&wc()<79)){e.next=23;break}return e.next=18,Mv();case 18:u=e.sent,d=u.encode,h=u.decode,o=d,c=h;case 23:return Ov.result=t&&n&&r&&(o||s)&&(c||l),Ov.detail.isBrowserSupported=t,Ov.detail.isWebRTCSupported=n,Ov.detail.isMediaDevicesSupported=r,Ov.detail.isH264EncodeSupported=o,Ov.detail.isVp8EncodeSupported=s,Ov.detail.isH264DecodeSupported=c,Ov.detail.isVp8DecodeSupported=l,Fv(),kv.setItem("checkResult",{ua:navigator.userAgent,checkResult:Ov}),e.abrupt("return",Ov);case 34:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());function Fv(){Object.keys(Ov.detail).findIndex((function(e){return!Ov.detail[e]}))>=0&&Cf.error("".concat(navigator.userAgent," ").concat(JSON.stringify(Ov.detail)))}var Vv=function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia)},jv=function(){return"RTCPeerConnection"in window&&"getReceivers"in window.RTCPeerConnection.prototype},Gv=function(){return"RTCPeerConnection"in window&&"getSenders"in window.RTCPeerConnection.prototype},Hv=function(){return"RTCPeerConnection"in window&&"getTransceivers"in window.RTCPeerConnection.prototype},Qv=function(){return"RTCRtpTransceiver"in window&&"stop"in window.RTCRtpTransceiver.prototype},Wv=function(){return"RTCRtpSender"in window&&"setParameters"in window.RTCRtpSender.prototype&&Gv()},qv=function(){return!!$d(navigator.mediaDevices)&&(Cf.error(av.NOT_SUPPORTED_MEDIA),!0)},zv=function(){return"http:"===location.protocol&&!Uc&&(Cf.error(av.NOT_SUPPORTED_HTTP),!0)},Zv=function(e){return!("candidate-pair"!==e.type||!e.nominated||"in-progress"!==e.state&&"succeeded"!==e.state)&&!(Jd(e.selected)&&!e.selected)},$v=new Map([[ja,"Android"],[Va,"iOS"],[pc,"Windows"],[fc,"MacOS"],[gc,"Linux"]]),Kv=function(){var e="unknown";return $v.get(!0)&&(e=$v.get(!0)),e};function Yv(){var e="";return screen.width&&(e+=(screen.width?screen.width*window.devicePixelRatio:"")+" * "+(screen.height?screen.height*window.devicePixelRatio:"")),e}function Jv(){var e=!1;return(navigator.getUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)&&(e=!0),e}function Xv(){for(var e={isSupported:!1},t=["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"],n=0;n<t.length;n++)if(t[n]in window){e.isSupported=!0;break}return e.isSupported}function eE(){return!nc&&!Va&&!(!Nv()||!("captureStream"in HTMLCanvasElement.prototype))}Uv();var tE="stream-added",nE="stream-removed",rE="stream-updated",iE="stream-subscribed",oE="error",sE="connection-state-changed",aE="stream-added",cE="stream-removed",lE="stream-updated",uE="stream-subscribed",dE="connection-state-changed",hE="peer-join",pE="peer-leave",fE="mute-audio",gE="mute-video",mE="unmute-audio",_E="unmute-video",vE="client-banned",EE="network-quality",AE="audio-volume",yE="error",SE="player-state-changed",bE="screen-sharing-stopped",CE="connection-state-changed",TE="error",IE="player-state-changed",RE=function(){function e(t){s(this,e);var n=t.getUserId();this.log_=Cf.createLogger({id:n,userId:n,sdkAppId:t.getSDKAppId()}),this.prevReport_={},this.prevEncoderImplementation_="",this.prevQualityLimitationReason_="",this.prevDecoderImplementationMap_=new Map}var t,n,r,i;return c(e,[{key:"getSenderStats",value:(i=o(regeneratorRuntime.mark((function e(t){var n,r,i,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={audio:{bytesSent:0,packetsSent:0,audioLevel:0,totalAudioEnergy:0},video:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0,fpsCapture:0,smallFramesEncoded:0,smallFPSCapture:0,smallFramesSent:0},rtt:0},r=t.getPeerConnection(),i=t.getSSRC(),!r){e.next=14;break}return e.prev=4,e.next=7,r.getStats();case 7:e.sent.forEach((function(e){if("outbound-rtp"===e.type)if(e.mediaType===Xl){if(!Ga&&$d(e.trackId))return;e.ssrc!==i.video||$d(e.encoderImplementation)||o.prevEncoderImplementation_===e.encoderImplementation||(o.log_.info("encoderImplementation change to ".concat(e.encoderImplementation)),o.prevEncoderImplementation_=e.encoderImplementation),e.ssrc!==i.video||$d(e.qualityLimitationReason)||o.prevQualityLimitationReason_===e.qualityLimitationReason||(o.log_.info("qualityLimitationReason change to ".concat(e.qualityLimitationReason)),o.prevQualityLimitationReason_=e.qualityLimitationReason);var r=t.getSSRC();e.ssrc===r.video?(n.video.bytesSent=e.bytesSent,n.video.packetsSent=e.packetsSent,n.video.framesEncoded=e.framesEncoded):(n.video.smallBytesSent=e.bytesSent,n.video.smallFramesEncoded=e.framesEncoded)}else e.mediaType===Jl&&(n.audio.bytesSent=e.bytesSent,n.audio.packetsSent=e.packetsSent);else"candidate-pair"===e.type?Zv(e)&&Yd(e.currentRoundTripTime)&&(n.rtt=Math.floor(1e3*e.currentRoundTripTime)):"track"===e.type?($d(e.frameWidth)||(e.trackIdentifier===t.getLocalStreamVideoTrackId()?(n.video.frameWidth=e.frameWidth,n.video.frameHeight=e.frameHeight,n.video.framesSent=e.framesSent):(n.video.smallFrameWidth=e.frameWidth,n.video.smallFrameHeight=e.frameHeight,n.video.smallFramesSent=e.framesSent)),$d(e.audioLevel)||(n.audio.audioLevel=e.audioLevel||0)):"media-source"===e.type&&(e.kind===Jl?(n.audio.audioLevel=e.audioLevel||0,n.audio.totalAudioEnergy=e.totalAudioEnergy||0):e.kind===Xl&&(e.trackIdentifier===t.getLocalStreamVideoTrackId()?n.video.fpsCapture=e.framesPerSecond:n.video.smallFPSCapture=e.framesPerSecond))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this.log_.warn("failed to getStats on sender connection");case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(e){return i.apply(this,arguments)})},{key:"getReceiverStats",value:(r=o(regeneratorRuntime.mark((function e(t){var n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={tinyId:t.getTinyId(),userId:t.getUserId(),rtt:0,hasAudio:!1,hasVideo:!1,hasAuxiliary:!1,audio:{bytesReceived:0,packetsReceived:0,packetsLost:0,jitter:0,audioLevel:0,totalAudioEnergy:0},video:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesReceived:0,framesDecoded:0,frameWidth:0,frameHeight:0},auxiliary:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesReceived:0,framesDecoded:0,frameWidth:0,frameHeight:0}},!(r=t.getPeerConnection())){e.next=13;break}return e.prev=3,e.next=6,r.getStats();case 6:e.sent.forEach((function(e){if("inbound-rtp"===e.type){if(e.mediaType===Jl)n.audio.packetsReceived=e.packetsReceived,n.audio.bytesReceived=e.bytesReceived,n.audio.packetsLost=e.packetsLost,n.audio.jitter=e.jitter,n.hasAudio=!0;else if(e.mediaType===Xl){if(Ga&&0===e.bytesReceived)return;var r=t.getSSRC();e.ssrc===r.video&&(n.video.packetsReceived=e.packetsReceived,n.video.bytesReceived=e.bytesReceived,n.video.packetsLost=e.packetsLost,n.video.framesReceived=e.framesReceived,n.video.framesDecoded=e.framesDecoded,n.video.fpsDecoded=e.framesPerSecond,n.hasVideo=!0,!e.decoderImplementation||i.prevDecoderImplementationMap_.has(n.userId)&&i.prevDecoderImplementationMap_.get(n.userId)===e.decoderImplementation||(Cf.info("[".concat(n.userId,"] decoderImplementation change to ").concat(e.decoderImplementation)),i.prevDecoderImplementationMap_.set(n.userId,e.decoderImplementation))),e.ssrc===r.auxiliary&&(n.auxiliary.packetsReceived=e.packetsReceived,n.auxiliary.bytesReceived=e.bytesReceived,n.auxiliary.packetsLost=e.packetsLost,n.auxiliary.framesReceived=e.framesReceived,n.auxiliary.framesDecoded=e.framesDecoded,n.auxiliary.fpsDecoded=e.framesPerSecond,n.hasAuxiliary=!0)}}else"track"===e.type?($d(e.frameWidth)||(e.trackIdentifier===t.getMainStreamVideoTrackId()&&(n.video.frameWidth=e.frameWidth,n.video.frameHeight=e.frameHeight),e.trackIdentifier===t.getAuxStreamVideoTrackId()&&(n.auxiliary.frameWidth=e.frameWidth,n.auxiliary.frameHeight=e.frameHeight)),e.kind===Jl&&(n.audio.audioLevel=e.audioLevel||0,n.audio.totalAudioEnergy=e.totalAudioEnergy||0)):"candidate-pair"===e.type&&Zv(e)&&Yd(e.currentRoundTripTime)&&(n.rtt=Math.floor(1e3*e.currentRoundTripTime))})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.log_.warn("failed to getStats on receiver connection");case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e){return r.apply(this,arguments)})},{key:"getStats",value:(n=o(regeneratorRuntime.mark((function e(t,n){var r,i,o,s,a,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},!t){e.next=5;break}return e.next=4,this.getSenderStats(t);case 4:r=e.sent;case 5:i=[],o=b(n),e.prev=7,o.s();case 9:if((s=o.n()).done){e.next=17;break}return(a=E(s.value,2))[0],c=a[1],e.next=13,this.getReceiverStats(c);case 13:l=e.sent,i.push(l);case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),o.e(e.t0);case 22:return e.prev=22,o.f(),e.finish(22);case 25:return e.abrupt("return",{senderStats:r,receiverStats:i});case 26:case"end":return e.stop()}}),e,this,[[7,19,22,25]])}))),function(e,t){return n.apply(this,arguments)})},{key:"prepareReport",value:function(e){var t=e.stats,n=e.report,r=e.freezeMap;if(!fm(t.senderStats)&&(n.uint32_delay=t.senderStats.rtt,n.RTTReportState.uint32_delay=t.senderStats.rtt,n.AudioReportState.sentAudioLevel=t.senderStats.audio.audioLevel,n.AudioReportState.sentAudioEnergy=t.senderStats.audio.totalAudioEnergy,n.AudioReportState.uint32_audio_enc_pkg_br=t.senderStats.audio.bytesSent,n.VideoReportState.uint32_video_snd_br=t.senderStats.video.bytesSent,n.VideoReportState.uint32_send_total_pkg=t.senderStats.video.packetsSent,n.VideoReportState.VideoEncState[0].uint32_enc_width=t.senderStats.video.frameWidth,n.VideoReportState.VideoEncState[0].uint32_enc_height=t.senderStats.video.frameHeight,n.VideoReportState.VideoEncState[0].uint32_enc_fps=t.senderStats.video.framesEncoded,n.VideoReportState.VideoEncState[0].uint32_capture_fps=t.senderStats.video.fpsCapture,n.VideoReportState.VideoEncState[0].uint32_send_fps=t.senderStats.video.framesSent,t.senderStats.video.smallBytesSent)){n.VideoReportState.uint32_small_video_snd_br=t.senderStats.video.smallBytesSent;var i={uint32_enc_width:t.senderStats.video.smallFrameWidth||0,uint32_enc_height:t.senderStats.video.smallFrameHeight||0,uint32_enc_fps:t.senderStats.video.smallFramesEncoded||0,uint32_capture_fps:t.senderStats.video.smallFPSCapture||0,uint32_send_fps:t.senderStats.video.smallFramesSent||0};n.VideoReportState.VideoEncState.push(i)}t.receiverStats.forEach((function(e){var t=e.userId;if(n.RTTReportState.RTTDecState.push({uint32_delay:e.rtt,uint64_sender_uin:e.tinyId}),e.hasAudio&&(n.AudioReportState.AudioDecState.push({uint32_audio_delay:0,uint32_audio_jitter:e.audio.jitter,uint32_audio_real_recv_pkg:e.audio.packetsReceived,uint32_audio_flow:e.audio.bytesReceived,uint32_audio_real_recv_br:0,uint64_sender_uin:e.tinyId,userId:e.userId,packetsLost:e.audio.packetsLost,totalPacketsLost:e.audio.packetsLost,audioLevel:e.audio.audioLevel,audioEnergy:e.audio.totalAudioEnergy}),n.AudioReportState.uint32_audio_real_recv_pkg+=e.audio.packetsReceived,n.AudioReportState.uint32_audio_flow+=e.audio.bytesReceived,n.uint32_real_num+=e.audio.packetsReceived),e.hasVideo){var i=r.get(t+"_main"),o=i?i.duration:0;n.VideoReportState.VideoDecState.push({uint32_video_recv_fps:e.video.framesReceived,uint32_video_dec_fps:e.video.fpsDecoded,uint32_video_recv_br:e.video.bytesReceived,uint32_video_real_recv_pkg:e.video.packetsReceived,uint32_dec_height:e.video.frameHeight,uint32_dec_width:e.video.frameWidth,uint32_video_jitter:0,uint64_sender_uin:e.tinyId,userId:e.userId,packetsLost:e.video.packetsLost,totalPacketsLost:e.video.packetsLost,uint32_video_strtype:0,int32_video_freeze_ms:o}),n.VideoReportState.uint32_video_total_real_recv_pkg+=e.video.packetsReceived,n.VideoReportState.uint32_video_rcv_br+=e.video.bytesReceived}if(e.hasAuxiliary){var s=r.get(t+"_auxiliary"),a=s?s.duration:0;n.VideoReportState.VideoDecState.push({uint32_video_recv_fps:e.auxiliary.framesReceived,uint32_video_dec_fps:e.auxiliary.fpsDecoded,uint32_video_recv_br:e.auxiliary.bytesReceived,uint32_video_real_recv_pkg:e.auxiliary.packetsReceived,uint32_dec_height:e.auxiliary.frameHeight,uint32_dec_width:e.auxiliary.frameWidth,uint32_video_jitter:0,uint64_sender_uin:e.tinyId,userId:e.userId,packetsLost:e.auxiliary.packetsLost,totalPacketsLost:e.auxiliary.packetsLost,uint32_video_strtype:2,int32_video_freeze_ms:a})}})),n.uint64_end_utime=(new Date).getTime();var o=this.prevReport_;if(this.prevReport_=JSON.parse(JSON.stringify(n)),fm(o))n.AudioReportState.uint32_audio_enc_pkg_br=8*n.AudioReportState.uint32_audio_enc_pkg_br/2,n.VideoReportState.uint32_video_rcv_br=8*n.VideoReportState.uint32_video_rcv_br/2,n.VideoReportState.uint32_video_snd_br=8*n.VideoReportState.uint32_video_snd_br/2,n.VideoReportState.uint32_small_video_snd_br&&(n.VideoReportState.uint32_small_video_snd_br=8*n.VideoReportState.uint32_small_video_snd_br/2),n.VideoReportState.VideoDecState.forEach((function(e){e.uint32_video_recv_br=8*e.uint32_video_recv_br/2,n.uint32_total_send_bps=n.AudioReportState.uint32_audio_enc_pkg_br+n.VideoReportState.uint32_video_snd_br}));else{if(n.uint64_begine_utime=o.uint64_end_utime,n.uint32_real_num-=o.uint32_real_num,n.uint32_real_num<=0&&(n.uint32_real_num=0),n.AudioReportState.uint32_audio_real_recv_pkg-=o.AudioReportState.uint32_audio_real_recv_pkg,n.AudioReportState.uint32_audio_real_recv_pkg<=0&&(n.AudioReportState.uint32_audio_real_recv_pkg=0),n.AudioReportState.uint32_audio_enc_pkg_br-=o.AudioReportState.uint32_audio_enc_pkg_br,n.AudioReportState.uint32_audio_enc_pkg_br<=0&&(n.AudioReportState.uint32_audio_enc_pkg_br=0),n.AudioReportState.uint32_audio_enc_pkg_br=8*n.AudioReportState.uint32_audio_enc_pkg_br/2,n.VideoReportState.uint32_video_snd_br-=o.VideoReportState.uint32_video_snd_br,n.VideoReportState.uint32_video_snd_br<=0&&(n.VideoReportState.uint32_video_snd_br=0),n.VideoReportState.uint32_video_snd_br=8*n.VideoReportState.uint32_video_snd_br/2,n.VideoReportState.uint32_small_video_snd_br&&(n.VideoReportState.uint32_small_video_snd_br-=o.VideoReportState.uint32_small_video_snd_br,n.VideoReportState.uint32_small_video_snd_br<=0&&(n.VideoReportState.uint32_small_video_snd_br=0),n.VideoReportState.uint32_small_video_snd_br=8*n.VideoReportState.uint32_small_video_snd_br/2),n.AudioReportState.uint32_audio_flow-=o.AudioReportState.uint32_audio_flow,n.AudioReportState.uint32_audio_flow<=0&&(n.AudioReportState.uint32_audio_flow=0),n.VideoReportState.uint32_send_total_pkg-=o.VideoReportState.uint32_send_total_pkg,n.VideoReportState.uint32_send_total_pkg<=0&&(n.VideoReportState.uint32_send_total_pkg=0),n.VideoReportState.uint32_video_rcv_br-=o.VideoReportState.uint32_video_rcv_br,n.VideoReportState.uint32_video_rcv_br<=0&&(n.VideoReportState.uint32_video_rcv_br=0),n.VideoReportState.uint32_video_rcv_br=8*n.VideoReportState.uint32_video_rcv_br/2,n.VideoReportState.uint32_video_total_real_recv_pkg-=o.VideoReportState.uint32_video_total_real_recv_pkg,n.VideoReportState.uint32_video_total_real_recv_pkg<=0&&(n.VideoReportState.uint32_video_total_real_recv_pkg=0),n.VideoReportState.VideoEncState[0].uint32_enc_fps-=o.VideoReportState.VideoEncState[0].uint32_enc_fps,n.VideoReportState.VideoEncState[0].uint32_enc_fps<0&&(n.VideoReportState.VideoEncState[0].uint32_enc_fps=0),n.VideoReportState.VideoEncState[0].uint32_enc_fps=n.VideoReportState.VideoEncState[0].uint32_enc_fps/2,n.VideoReportState.VideoEncState[0].uint32_send_fps-=o.VideoReportState.VideoEncState[0].uint32_send_fps,n.VideoReportState.VideoEncState[0].uint32_send_fps<0&&(n.VideoReportState.VideoEncState[0].uint32_send_fps=0),n.VideoReportState.VideoEncState[0].uint32_send_fps=n.VideoReportState.VideoEncState[0].uint32_send_fps/2,n.VideoReportState.VideoEncState[1]){var s=0,a=0;o.VideoReportState.VideoEncState[1]&&(s=o.VideoReportState.VideoEncState[1].uint32_enc_fps,a=o.VideoReportState.VideoEncState[1].uint32_enc_fps),n.VideoReportState.VideoEncState[1].uint32_enc_fps-=s,n.VideoReportState.VideoEncState[1].uint32_enc_fps<0&&(n.VideoReportState.VideoEncState[1].uint32_enc_fps=0),n.VideoReportState.VideoEncState[1].uint32_enc_fps=n.VideoReportState.VideoEncState[1].uint32_enc_fps/2,n.VideoReportState.VideoEncState[1].uint32_send_fps-=a,n.VideoReportState.VideoEncState[1].uint32_send_fps<0&&(n.VideoReportState.VideoEncState[1].uint32_send_fps=0),n.VideoReportState.VideoEncState[1].uint32_send_fps=n.VideoReportState.VideoEncState[1].uint32_send_fps/2}for(var c=n.VideoReportState.VideoDecState.length,l=0;l<c;l++){for(var u=n.VideoReportState.VideoDecState[l],d=u.uint64_sender_uin,h=u.uint32_video_strtype,p=u.uint32_video_real_recv_pkg,f=u.uint32_video_recv_br,g=u.uint32_video_recv_fps,m=0;m<o.VideoReportState.VideoDecState.length;m++){var _=o.VideoReportState.VideoDecState[m];if(_.uint64_sender_uin===d&&_.uint32_video_strtype===h){u.packetsLost=u.totalPacketsLost-_.totalPacketsLost,(p-=_.uint32_video_real_recv_pkg)<=0&&(p=0),(f-=_.uint32_video_recv_br)<=0&&(f=0),(g-=_.uint32_video_recv_fps)<0&&(g=0);break}}n.VideoReportState.VideoDecState[l].uint32_video_real_recv_pkg=p,n.VideoReportState.VideoDecState[l].uint32_video_recv_br=8*f/2,n.VideoReportState.VideoDecState[l].uint32_video_recv_fps=g/2}c=n.AudioReportState.AudioDecState.length;for(var v=0;v<c;v++){for(var E=n.AudioReportState.AudioDecState[v],A=E.uint32_audio_real_recv_pkg,y=E.uint32_audio_flow,S=E.uint64_sender_uin,b=0;b<o.AudioReportState.AudioDecState.length;b++){var C=o.AudioReportState.AudioDecState[b];if(C.uint64_sender_uin===S){E.packetsLost=E.totalPacketsLost-C.totalPacketsLost,(A-=C.uint32_audio_real_recv_pkg)<=0&&(A=0),(y-=C.uint32_audio_flow)<=0&&(y=0);break}}n.AudioReportState.AudioDecState[v].uint32_audio_real_recv_pkg=A,n.AudioReportState.AudioDecState[v].uint32_audio_flow=y,n.AudioReportState.AudioDecState[v].uint32_audio_real_recv_br=8*y/2}n.AudioReportState.uint32_audio_real_recv_br=8*n.AudioReportState.uint32_audio_flow/2,n.uint32_real_num=n.AudioReportState.uint32_audio_real_recv_pkg+n.VideoReportState.uint32_video_total_real_recv_pkg,n.uint32_total_send_bps=n.AudioReportState.uint32_audio_enc_pkg_br+n.VideoReportState.uint32_video_snd_br,n.uint32_total_recv_bps=n.AudioReportState.uint32_audio_real_recv_br+n.VideoReportState.uint32_video_rcv_br}return n}},{key:"getStatsReport",value:(t=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uplinkConnection,r=t.downlinkConnections,i=t.freezeMap,o={uint64_begine_utime:(new Date).getTime(),uint64_end_utime:0,uint32_real_num:0,uint32_delay:0,uint32_CPU_curfreq:0,uint32_total_send_bps:0,uint32_total_recv_bps:0,AudioReportState:{uint32_audio_enc_pkg_br:0,uint32_audio_real_recv_pkg:0,uint32_audio_flow:0,uint32_audio_real_recv_br:0,uint32_audio_delay:0,uint32_audio_jitter:0,uint32_microphone_status:1,sentAudioLevel:0,sentAudioEnergy:0,AudioDecState:[]},VideoReportState:{uint32_video_delay:0,uint32_video_snd_br:0,uint32_video_total_real_recv_pkg:0,uint32_video_rcv_br:0,uint32_send_total_pkg:0,VideoEncState:[{uint32_enc_width:0,uint32_enc_height:0,uint32_capture_fps:0,uint32_enc_fps:0,uint32_send_fps:0}],VideoDecState:[]},RTTReportState:{uint32_delay:0,RTTDecState:[]}},e.next=4,this.getStats(n,r);case 4:return s=e.sent,this.prepareReport({stats:s,report:o,freezeMap:i}),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),wE=function(){function e(t){var n=t.signalChannel,r=t.connections,i=t.client;s(this,e),this.client_=i,this.signalChannel_=n,this.connections_=r,this.client_=i,this.log_=Cf.createLogger({id:"q|"+this.client_.getUserId(),userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId()}),this.uplinkConnection_=null,this.uplinkNetworkQuality_=0,this.uplinkRTT_=0,this.uplinkLoss_=0,this.downlinkNetworkQuality_=0,this.downlinkRTT_=0,this.downlinkLoss_=0,this.downlinkPrevStatMap_=new Map,this.downlinkLossAndRTTMap_=new Map,this.interval_=-1,this.emitter_=new fh,this.initialize()}var t,n;return c(e,[{key:"uplinkNetworkQuality",get:function(){return this.uplinkNetworkQuality_},set:function(e){e!==this.uplinkNetworkQuality_&&this.log_.info("uplink network quality change ".concat(this.uplinkNetworkQuality," -> ").concat(e,", rtt: ").concat(this.uplinkRTT_,", loss: ").concat(this.uplinkLoss_)),this.uplinkNetworkQuality_=e}},{key:"downlinkNetworkQuality",get:function(){return this.downlinkNetworkQuality_},set:function(e){if(e!==this.downlinkNetworkQuality_){var t=this.getAverageLossAndRTT(A(this.downlinkLossAndRTTMap_.values())),n=t.rtt,r=t.loss;this.log_.info("downlink network quality change ".concat(this.downlinkNetworkQuality," -> ").concat(e,", rtt: ").concat(n,", loss: ").concat(r))}this.downlinkNetworkQuality_=e}},{key:"initialize",value:function(){var e=this;this.signalChannel_.on(cg.UPLINK_NETWORK_STATS,(function(t){e.handleUplinkNetworkQuality(t)})),this.signalChannel_.on(Xf,this.handleSignalConnectionStateChange.bind(this)),this.start()}},{key:"handleUplinkNetworkQuality",value:function(e){if(!this.uplinkConnection_)return this.uplinkNetworkQuality=0,this.uplinkLoss_=0,void(this.uplinkRTT_=0);var t=this.uplinkConnection_.getPeerConnection();if(t&&this.isPeerConnectionDisconnected(t))return this.uplinkNetworkQuality=6,this.uplinkLoss_=0,void(this.uplinkRTT_=0);var n=e.data.content;if(0===n.result){var r=n.expectAudPkg+n.expectVidPkg,i=n.recvAudPkg+n.recvVidPkg,o=r-i;if(0===r&&0===i)return;this.uplinkLoss_=o<=0?0:Math.round(o/r*100),this.uplinkRTT_=n.rtt,this.uplinkNetworkQuality=this.getNetworkQuality(this.uplinkLoss_,this.uplinkRTT_)}}},{key:"handleDownlinkNetworkQuality",value:(n=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,a,c,l,u,d,h,p,f,g,m=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connections_&&0!==this.connections_.size){e.next=3;break}return this.downlinkNetworkQuality=0,e.abrupt("return");case 3:if(t=A(this.connections_.values()),n=t.filter((function(e){return e.getPeerConnection()&&e.getPeerConnection().connectionState===fl})),t.filter((function(e){return e.getPeerConnection()&&m.isPeerConnectionDisconnected(e.getPeerConnection())})).length!==t.length){e.next=9;break}return this.downlinkNetworkQuality=6,e.abrupt("return");case 9:r=0;case 10:if(!(r<n.length)){e.next=31;break}return i=n[r].getPeerConnection(),e.next=14,this.getStat(i);case 14:if(o=e.sent,s=o.rtt,a=o.totalPacketsLost,c=o.totalPacketsReceived,this.downlinkPrevStatMap_.has(i)){e.next=21;break}return this.downlinkPrevStatMap_.set(i,{totalPacketsLost:a,totalPacketsReceived:c}),e.abrupt("continue",28);case 21:l=0,u=this.downlinkPrevStatMap_.get(i),d=a-u.totalPacketsLost,h=c-u.totalPacketsReceived,l=d<=0||h<0?0:Math.round(d/(d+h)*100),this.downlinkPrevStatMap_.set(i,{totalPacketsLost:a,totalPacketsReceived:c}),this.downlinkLossAndRTTMap_.set(i,{rtt:s,loss:l,userId:n[r].getUserId()});case 28:r++,e.next=10;break;case 31:if(A(this.downlinkPrevStatMap_.keys()).forEach((function(e){m.isPeerConnectionDisconnected(e)&&(m.downlinkPrevStatMap_.delete(e),m.downlinkLossAndRTTMap_.delete(e))})),0!==this.downlinkLossAndRTTMap_.size){e.next=34;break}return e.abrupt("return");case 34:p=this.getAverageLossAndRTT(A(this.downlinkLossAndRTTMap_.values())),f=p.rtt,g=p.loss,this.downlinkRTT_=f,this.downlinkLoss_=g,this.downlinkNetworkQuality=this.getNetworkQuality(g,f);case 38:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getStat",value:(t=o(regeneratorRuntime.mark((function e(t){var n,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={rtt:0,totalPacketsLost:0,totalPacketsReceived:0},t&&jv()){e.next=3;break}return e.abrupt("return",n);case 3:r=t.getReceivers(),e.prev=4,i=0;case 6:if(!(i<r.length)){e.next=15;break}return o=r[i],e.next=10,o.getStats();case 10:e.sent.forEach((function(e){"candidate-pair"===e.type&&Yd(e.currentRoundTripTime)&&(n.rtt=Math.round(1e3*e.currentRoundTripTime)),"inbound-rtp"!==e.type||e.mediaType!==Jl&&e.mediaType!==Xl||(n.totalPacketsLost+=e.packetsLost,n.totalPacketsReceived+=e.packetsReceived)}));case 12:i++,e.next=6;break;case 15:return e.abrupt("return",n);case 18:return e.prev=18,e.t0=e.catch(4),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,null,[[4,18]])}))),function(e){return t.apply(this,arguments)})},{key:"getAverageLossAndRTT",value:function(e){var t={rtt:0,loss:0};return Array.isArray(e)&&e.length>0&&(e.forEach((function(e){t.rtt+=e.rtt,t.loss+=e.loss})),Object.keys(t).forEach((function(n){t[n]=Math.round(t[n]/e.length)}))),t}},{key:"getNetworkQuality",value:function(e,t){return e>50||t>500?5:e>30||t>350?4:e>20||t>200?3:e>10||t>100?2:e>=0||t>=0?1:0}},{key:"handleSignalConnectionStateChange",value:function(e){e.state===ng?(this.uplinkRTT_=0,this.uplinkLoss_=0,this.uplinkNetworkQuality=6):e.state===og&&6===this.uplinkNetworkQuality&&(this.uplinkNetworkQuality=5)}},{key:"handleUplinkConnectionStateChange",value:function(e){var t=e.state;t===ol?(this.uplinkLoss_=0,this.uplinkRTT_=0,this.uplinkNetworkQuality=6):t===cl&&6===this.uplinkNetworkQuality&&(this.uplinkNetworkQuality=5)}},{key:"isPeerConnectionDisconnected",value:function(e){return!(!e||e.connectionState!==pl&&e.connectionState!==dl&&e.connectionState!==hl)}},{key:"setUplinkConnection",value:function(e){this.uplinkConnection_=e,this.uplinkConnection_?this.uplinkConnection_.on(sE,this.handleUplinkConnectionStateChange.bind(this)):(this.uplinkNetworkQuality=0,this.uplinkRTT_=0,this.uplinkLoss_=0)}},{key:"start",value:function(){var e=this;-1===this.interval_?(this.log_.info("start network quality calculating"),this.interval_=wv.setInterval((function(){e.handleDownlinkNetworkQuality(),gh.emit(np,{client:e.client_,uplinkNetworkQuality:e.uplinkNetworkQuality,downlinkNetworkQuality:e.downlinkNetworkQuality,uplinkRTT:e.uplinkRTT_,uplinkLoss:e.uplinkLoss_,downlinkRTT:e.downlinkRTT_,downlinkLoss:e.downlinkLoss_,downlinkLossAndRTTMap:e.downlinkLossAndRTTMap_}),e.emitter_.emit(EE,{uplinkNetworkQuality:e.uplinkNetworkQuality,downlinkNetworkQuality:e.downlinkNetworkQuality,uplinkRTT:e.uplinkRTT_,uplinkLoss:e.uplinkLoss_,downlinkRTT:e.downlinkRTT_,downlinkLoss:e.downlinkLoss_})}),2e3)):this.log_.info("network quality calculating is already started")}},{key:"stop",value:function(){this.log_.info("stop network quality calculating"),-1!==this.interval_&&(wv.clearInterval(this.interval_),this.interval_=-1)}},{key:"on",value:function(e,t){this.emitter_.on(e,t)}}]),e}(),kE=function(){function e(t){s(this,e),this.log_=Cf.createLogger({id:t.client.getUserId(),userId:t.client.getUserId(),sdkAppId:t.client.getSDKAppId()}),this.localStream_=null,this.prevDevices_=[],this.initialize()}var t,n,r;return c(e,[{key:"initialize",value:(r=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.mediaDevices&&navigator.mediaDevices.addEventListener("devicechange",this.onDeviceChange.bind(this));case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"onDeviceChange",value:(n=o(regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.localStream_&&this.localStream_.getMediaStream()&&!this.localStream_.getScreen()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wy.getDevices();case 4:t=e.sent,n=t.filter((function(e){return i.prevDevices_.findIndex((function(t){var n=t.deviceId;return e.deviceId===n}))<0})),r=this.prevDevices_.filter((function(e){return t.findIndex((function(t){var n=t.deviceId;return e.deviceId===n}))<0})),n.length>0&&this.handleDeviceAdded(this.prevDevices_,n),r.length>0&&this.handleDeviceRemoved(t,r),this.prevDevices_=t;case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setLocalStream",value:(t=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,wy.getDevices();case 3:this.prevDevices_=e.sent;case 4:this.localStream_=t;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleDeviceAdded",value:function(e,t){this.log_.warn("devicesAdded: ".concat(JSON.stringify(t))),this.localStream_.updateDeviceIdInUse();var n=t.filter((function(e){return e.kind===du})),r=t.filter((function(e){return e.kind===uu})),i=e.filter((function(e){return e.kind===du})),o=e.filter((function(e){return e.kind===uu})),s=n.length>0&&0===i.length&&this.localStream_.getVideo(),a=r.length>0&&0===o.length&&this.localStream_.getAudio();if(a&&s)return this.log_.info("new microphone and camera detected, but there was no device before."),void this.localStream_.updateStream({audio:!0,video:!0,cameraId:n[0].deviceId,microphoneId:r[0].deviceId});s&&(this.log_.info("new camera detected, but there was no camera before."),this.localStream_.updateStream({audio:!1,video:!0,cameraId:n[0].deviceId})),a&&(this.log_.info("new microphone detected, but there was no microphone before."),this.localStream_.updateStream({audio:!0,video:!1,microphoneId:r[0].deviceId}))}},{key:"handleDeviceRemoved",value:function(e,t){this.log_.warn("devicesRemoved: ".concat(JSON.stringify(t))),this.localStream_.updateDeviceIdInUse();var n=!1,r=!1,i=this.localStream_.getCameraId(),o=this.localStream_.getMicrophoneId();if("default"===o){var s=this.localStream_.getMicrophoneGroupId(),a=e.filter((function(e){return"default"===e.deviceId&&e.kind===uu}))[0];a&&a.groupId!==s&&(r=!0)}if(t.forEach((function(e){var t=e.deviceId;i.length>0&&t===i?n=!0:o.length>0&&t===o&&(r=!0)})),n&&r)return this.log_.warn("current camera and microphone in use is lost, cameraId: ".concat(i,", microphoneId: ").concat(o)),void((this.localStream_.getAudio()||this.localStream_.getVideo())&&this.localStream_.updateStream({video:!0,audio:!0}));n&&(this.log_.warn("current camera in use is lost, deviceId: ".concat(i)),this.localStream_.getVideo()&&this.localStream_.updateStream({video:!0,audio:!1})),r&&(this.log_.warn("current microphone in use is lost, deviceId: ".concat(o)),this.localStream_.getAudio()&&this.localStream_.updateStream({video:!1,audio:!0}))}}]),e}(),OE=function(e){var t=Li(j(this)),n="",r=tt(e);if(r<0||1/0==r)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},NE=1..toFixed,LE=Math.floor,PE=function(e,t,n){return 0===t?n:t%2==1?PE(e,t-1,n*e):PE(e*e,t/2,n)},DE=function(e,t,n){for(var r=-1,i=n;++r<6;)i+=t*e[r],e[r]=i%1e7,i=LE(i/1e7)},ME=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=LE(r/t),r=r%t*1e7},xE=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=String(e[t]);n=""===n?r:n+OE.call("0",7-r.length)+r}return n},BE=NE&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!N((function(){NE.call({})}));It({target:"Number",proto:!0,forced:BE},{toFixed:function(e){var t,n,r,i,o=la(this),s=tt(e),a=[0,0,0,0,0,0],c="",l="0";if(s<0||s>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(c="-",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*PE(2,69,1))-69)<0?o*PE(2,-t,1):o/PE(2,t,1),n*=4503599627370496,(t=52-t)>0){for(DE(a,0,n),r=s;r>=7;)DE(a,1e7,0),r-=7;for(DE(a,PE(10,r,1),0),r=t-1;r>=23;)ME(a,1<<23),r-=23;ME(a,1<<r),DE(a,1,1),ME(a,2),l=xE(a)}else DE(a,0,n),DE(a,1<<-t,0),l=xE(a)+OE.call("0",s);return s>0?c+((i=l.length)<=s?"0."+OE.call("0",s-i)+l:l.slice(0,i-s)+"."+l.slice(i-s)):c+l}});var UE,FE=window.AudioContext||window.webkitAudioContext,VE=null,jE=function(){function e(){var t=this;s(this,e),VE||(VE=new FE),this.context_=VE,this.instant_=0,this.slow_=0,this.clip_=0,this.script_=this.context_.createScriptProcessor(2048,1,1),this.script_.onaudioprocess=function(e){var n,r=e.inputBuffer.getChannelData(0),i=0,o=0;for(n=0;n<r.length;++n)i+=r[n]*r[n],Math.abs(r[n])>.99&&(o+=1);t.instant_=Math.sqrt(i/r.length),t.slow_=.95*t.slow_+.05*t.instant_,t.clip_=o/r.length}}return c(e,[{key:"connectToSource",value:function(e,t){try{var n=new MediaStream;n.addTrack(e),this.mic_=this.context_.createMediaStreamSource(n),this.mic_.connect(this.script_),this.script_.connect(this.context_.destination),$d(t)||t(null)}catch(ky){Cf.error("soundMeter connectToSource error: "+ky),$d(t)||t(ky)}}},{key:"stop",value:function(){this.mic_.disconnect(),this.script_.disconnect()}},{key:"resume",value:function(){this.context_&&this.context_.resume()}},{key:"getVolume",value:function(){return this.instant_.toFixed(2)}}]),e}(),GE=function(){function e(t){s(this,e),this.stream_=t.stream,this.userId_=t.stream.getUserId(),this.log_=this.stream_.getLogger(),this.track_=t.track,this.div_=t.div,this.muted_=t.muted,this.outputDeviceId_=t.outputDeviceId,this.volume_=t.volume,this.emitter_=new fh,this.initializeElement(),this.state_="NONE",this.soundMeter_=null}var t,n,r,i;return c(e,[{key:"isPlaying",get:function(){return"PLAYING"===this.state_}},{key:"initializeElement",value:function(){var e=new MediaStream;e.addTrack(this.track_);var t=document.createElement(Jl);t.srcObject=e,t.muted=this.muted_,t.setAttribute("id","audio_".concat(this.stream_.getId())),t.setAttribute("autoplay","autoplay"),t.setAttribute("playsinline","playsinline"),this.div_.appendChild(t),this.element_=t,this.handleEvents()}},{key:"play",value:(i=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.outputDeviceId_){e.next=3;break}return e.next=3,this.element_.setSinkId(this.outputDeviceId_);case 3:return this.setVolume(this.volume_),e.prev=4,e.next=7,this.element_.play();case 7:e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(4),this.log_.warn("<audio> play() error: "+e.t0),!(t=e.t0.toString()+" <audio>").startsWith("NotAllowedError")){e.next=15;break}throw new Vd({code:Fd.PLAY_NOT_ALLOWED,message:t});case 15:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return i.apply(this,arguments)})},{key:"handleEvents",value:function(){this.handleElementEvent=this.handleElementEvent.bind(this),this.handleTrackEvent=this.handleTrackEvent.bind(this),this.element_.addEventListener(su,this.handleElementEvent),this.element_.addEventListener(ou,this.handleElementEvent),this.element_.addEventListener(au,this.handleElementEvent),this.element_.addEventListener(cu,this.handleElementEvent),this.track_.addEventListener(ou,this.handleTrackEvent),this.track_.addEventListener(ru,this.handleTrackEvent),this.track_.addEventListener(iu,this.handleTrackEvent),this.track_.readyState===ou&&this.handleTrackEvent({type:ou}),this.track_.muted&&this.handleTrackEvent({type:ru})}},{key:"handleElementEvent",value:(r=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.type,e.t0=n,e.next=e.t0===su?4:e.t0===ou?9:e.t0===au?12:e.t0===cu?16:27;break;case 4:return this.log_.info("stream - audio player is starting playing"),this.state_="PLAYING",gh.emit(Dh,{stream:this.stream_}),this.emitter_.emit(IE,{state:this.state_,reason:su}),e.abrupt("break",27);case 9:return this.log_.info("stream - audio player is ended"),"STOPPED"!==this.state_&&(this.state_="STOPPED",this.emitter_.emit(IE,{state:this.state_,reason:ou})),e.abrupt("break",27);case 12:return this.log_.info("stream - audio player is paused"),this.state_="PAUSED",this.emitter_.emit(IE,{state:this.state_,reason:au}),e.abrupt("break",27);case 16:if(!this.element_||!this.element_.error){e.next=26;break}return r="".concat(Kv(),"/").concat(jc().name,"/").concat(jc().version),e.next=20,wy.getSpeakers();case 20:i=e.sent,o=i[0].label,(s=i.find((function(e){return e.deviceId===a.outputDeviceId_})))&&(o=s.label),this.log_.error("stream - audio player error observed. code: ".concat(this.element_.error.code," message: ").concat(this.element_.error.message," deviceInfo: ").concat(r," speaker: ").concat(o)),jd.uploadEvent("stat-".concat(this.stream_.getType(),"-audio-").concat(Vl,"-").concat(this.element_.error.code,"-").concat(r,"-").concat(o),this.element_.error);case 26:return e.abrupt("break",27);case 27:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"handleTrackEvent",value:function(e){var t=e.type;switch(t){case ou:this.log_.info("stream - audio player track is ended"),"STOPPED"!==this.state_&&(this.state_="STOPPED",this.emitter_.emit(IE,{state:this.state_,reason:ou})),gh.emit(Xh,{stream:this.stream_,type:t});break;case ru:this.log_.info("stream - audio track is unable to provide media output"),this.stream_.isRemote()||ph(),"PAUSED"!==this.state_&&(this.state_="PAUSED",this.emitter_.emit(IE,{state:this.state_,reason:ru})),gh.emit(Jh,{stream:this.stream_,type:t});break;case iu:this.log_.info("stream - audio track is able to provide media output"),"PAUSED"===this.state_&&(this.state_="PLAYING",this.emitter_.emit(IE,{state:this.state_,reason:iu}))}}},{key:"unbindEvents",value:function(){this.element_&&(this.element_.removeEventListener(su,this.handleElementEvent),this.element_.removeEventListener(ou,this.handleElementEvent),this.element_.removeEventListener(au,this.handleElementEvent),this.element_.removeEventListener(cu,this.handleElementEvent)),this.track_&&(this.track_.removeEventListener(ou,this.handleTrackEvent),this.track_.removeEventListener(ru,this.handleTrackEvent),this.track_.removeEventListener(iu,this.handleTrackEvent))}},{key:"setSinkId",value:(n=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.outputDeviceId_===t){e.next=4;break}return e.next=3,this.element_.setSinkId(t);case 3:this.outputDeviceId_=t;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setVolume",value:function(e){this.log_.info("stream - audioElement setVolume to : ".concat(e)),this.element_.volume=e}},{key:"getAudioLevel",value:function(){return this.soundMeter_||(this.soundMeter_=new jE,this.soundMeter_.connectToSource(this.track_)),this.soundMeter_.getVolume()}},{key:"stop",value:function(){this.unbindEvents(),this.div_.removeChild(this.element_),this.element_.srcObject=null,this.soundMeter_&&(this.soundMeter_.stop(),this.soundMeter_=null),this.element_=null}},{key:"resume",value:(t=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.soundMeter_&&this.soundMeter_.resume(),e.next=4,this.element_.play();case 4:e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(0),this.log_.warn("<audio> play() error: "+e.t0),!(t=uv({key:Pm,data:{error:e.t0}})).startsWith("NotAllowedError")){e.next=12;break}throw new Vd({code:Fd.PLAY_NOT_ALLOWED,message:t});case 12:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return t.apply(this,arguments)})},{key:"on",value:function(e,t){this.emitter_.on(e,t)}}]),e}(),HE=Ye.PROPER,QE=ga.trim;It({target:"String",proto:!0,forced:(UE="trim",N((function(){return!!ua[UE]()||"​᠎"!=="​᠎"[UE]()||HE&&ua[UE].name!==UE})))},{trim:function(){return QE(this)}});var WE="".concat("trtc_autoplay","_mask"),qE="".concat("trtc_autoplay","_wrapper"),zE="".concat("trtc_autoplay","_header"),ZE="".concat("trtc_autoplay","_content"),$E="".concat("trtc_autoplay","_action_wrapper"),KE="".concat("trtc_autoplay","_question"),YE="".concat("trtc_autoplay","_collapse"),JE="".concat("trtc_autoplay","_action_confirm"),XE="".concat("trtc_autoplay","_detail"),eA="".concat("dialog","-show"),tA="".concat("dialog","-1"),nA="".concat("dialog","-2"),rA=!1,iA=function(){return!!document.querySelector(".".concat(qE))},oA="".concat(Iu,"/").concat(hh()?"zh-cn":"en","/tutorial-21-advanced-auto-play-policy.html"),sA="<br><a href='".concat(oA,"' target='_blank'>").concat(hh()?"其他方案？":"Any other solution?","</a>"),aA="".concat(hh()?"浏览器自动播放策略：在用户与页面产生交互（点击、触摸）之前，浏览器禁止播放有声媒体。该弹窗用于帮助用户恢复音视频播放。".concat(sA):"Autoplay Policy: Before user interacts with the web page (clicking, touching), page will not be allowed to play media with sound. This Dialog is used to help users resume playback. ".concat(sA)),cA=function(){function e(){if(s(this,e),this.dialogNode_=null,this.bodyPosition_="",this.content="音视频播放被浏览器拦截，请点击“恢复播放”。",hh()||(this.content='Media playback failed. Click the "Resume" to resume playback.'),!rA){var t=document.createElement("style");t.innerHTML=".".concat(WE,"{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:1500;}.").concat(WE," div:not(.").concat($E,"){display:block !important;}.").concat(qE,"{padding:14px;background:#fff;border-radius:3px;box-shadow:0px 3px 15px #434343;border:1px solid #d1cfcf;max-width:500px;}.").concat(qE," a{color:").concat("#2473E8",";}.").concat(zE,"{overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:600;}.").concat(ZE,"{margin:8px 0;}.").concat($E,"{width:100%;display:flex !important;align-items:center;justify-content:right;float:right;}.").concat(YE,"{margin-right:auto;cursor:pointer}.").concat(KE,"{height:100%;line-height:16px;cursor:pointer;}.").concat(JE,"{margin-left:8px;color:#fff;background:").concat("#2473E8",";padding:4px 12px;outline:none;border:1px solid;border-radius:3px;font-weight:bold;}.").concat(JE,":hover{opacity:0.9;}.").concat(YE,",.").concat(JE,",.").concat(ZE,",.").concat(KE,"{font-size:14px;}@media screen and (max-width:750px){.").concat(qE,"{width:80vw;}}"),document.head.appendChild(t),rA=!0}this.showDetail_=!1,this.isCollapseClicked_=!1,this.isQuestionClicked_=!1,this.addDiaLog()}return c(e,[{key:"createDiaLog",value:function(){var e=document.createElement("template");e.innerHTML='<div class="'.concat(WE,"\"><div class='").concat(qE,"'><div class='").concat(zE,"'>").concat(location.host,"</div><div class='").concat(ZE,"'>").concat(this.content,"</div><div class='").concat(XE,'\' style="visibility:hidden;width:100%;height:0;font-size:12px;color:gray;">').concat(aA,"</div><div class='").concat($E,"'></div></div></div>").trim();var t=document.createElement("button");t.className=JE,t.innerText=hh()?"恢复播放":"Resume",t.onclick=this.onConfirm.bind(this);var n=document.createElement("div");n.className=KE,n.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n    <svg class="icon" width="18" height="18" p-id="2030" t="1639646523624" version="1.1" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">\n    <path d="m464 784.35c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z" p-id="2031"/>\n    <path d="m512 960c-247.04 0-448-200.96-448-448s200.96-448 448-448 448 200.96 448 448-200.96 448-448 448zm0-831.71c-211.58 0-383.71 172.13-383.71 383.71 0 211.55 172.13 383.71 383.71 383.71 211.55 0 383.71-172.16 383.71-383.71 0-211.58-172.16-383.71-383.71-383.71z" p-id="2032"/>\n    <path d="m512 673.7c-17.665 0-32.001-14.336-32.001-31.999v-54.112c0-52.353 40-92.352 75.328-127.65 25.887-25.92 52.672-52.672 52.672-74.017 0-53.343-43.072-96.735-95.999-96.735-53.823 0-95.999 41.536-95.999 94.559 0 17.665-14.336 31.999-32.001 31.999s-32.001-14.336-32.001-31.999c0-87.424 71.775-158.56 160-158.56s160 72.095 160 160.74c0 47.904-36.32 84.192-71.424 119.3-27.84 27.776-56.576 56.512-56.576 82.336v54.112c0 17.665-14.336 32.032-32.001 32.032z" p-id="2033"/>\n    </svg>\n    ',n.onclick=this.onQuestionClick.bind(this);var r=document.createElement("div");r.className=YE,r.innerText="".concat(hh()?"详情 >":"Detail >"),r.onclick=this.onCollapseClick.bind(this);var i=e.content.firstChild,o=i.querySelector(".".concat($E));return o.appendChild(r),o.appendChild(n),o.appendChild(t),i}},{key:"addDiaLog",value:function(){iA()||(this.dialogNode_=this.createDiaLog(),document.body.appendChild(this.dialogNode_),this.dialogNode_.onclick=this.onConfirm.bind(this),this.dialogNode_.querySelector(".".concat(qE)).onclick=function(e){return e.stopPropagation()},this.bodyPosition_=document.body.style.position,document.body.style.position="fixed",Cf.warn("show autoplay dialog"),jd.uploadEvent({log:eA}))}},{key:"deleteDiaLog",value:function(){this.dialogNode_&&(document.body.removeChild(this.dialogNode_),document.body.style.position=this.bodyPosition_,this.dialogNode_=null)}},{key:"onConfirm",value:function(){Cf.warn("confirm clicked, try resume stream"),gh.emit(rp),this.deleteDiaLog()}},{key:"onCollapseClick",value:function(){var e=this.dialogNode_.querySelector(".".concat(XE));e.style.visibility="".concat(this.showDetail_?"hidden":"visible"),e.style.height="".concat(this.showDetail_?0:"fit-content"),this.showDetail_=!this.showDetail_,this.isCollapseClicked_||jd.uploadEvent({log:tA}),this.isCollapseClicked_=!0}},{key:"onQuestionClick",value:function(){window.open(oA,"_blank"),this.isQuestionClicked_||jd.uploadEvent({log:nA}),this.isQuestionClicked_=!0}}]),e}(),lA=function(){function e(t){s(this,e),this.stream_=t.stream,this.userId_=t.stream.getUserId(),this.log_=this.stream_.getLogger(),this.track_=t.track,this.div_=t.div,this.muted_=t.muted,this.objectFit_=t.objectFit,this.mirror_=t.mirror,this.emitter_=new fh,this.initializeElement(),this.state_="NONE",this.pausedRetryCount_=5}var t,n;return c(e,[{key:"isPlaying",get:function(){return"PLAYING"===this.state_}},{key:"initializeElement",value:function(){var e=new MediaStream;e.addTrack(this.track_);var t=document.createElement(Xl);t.srcObject=e,t.muted=!0;var n="width: 100%; height: 100%; object-fit: ".concat(this.objectFit_,";");this.mirror_&&(n+="transform: rotateY(180deg);"),t.setAttribute("id","video_".concat(this.stream_.getId())),t.setAttribute("style",n),t.setAttribute("autoplay","autoplay"),t.setAttribute("playsinline","playsinline"),this.div_&&this.div_.appendChild(t),this.element_=t,this.handleEvents()}},{key:"setRect",value:function(e){var t=e.width,n=e.height;this.element_&&(this.element_.style.width=t+"px",this.element_.style.height=n+"px")}},{key:"play",value:(n=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.element_.play();case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),this.log_.warn("<video> play() error: "+e.t0),!(t=e.t0.toString()+" <video>").startsWith("NotAllowedError")){e.next=11;break}throw new Vd({code:Fd.PLAY_NOT_ALLOWED,message:t});case 11:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return n.apply(this,arguments)})},{key:"handleEvents",value:function(){this.handleElementEvent=this.handleElementEvent.bind(this),this.handleTrackEvent=this.handleTrackEvent.bind(this),this.element_.addEventListener(su,this.handleElementEvent),this.element_.addEventListener(ou,this.handleElementEvent),this.element_.addEventListener(au,this.handleElementEvent),this.element_.addEventListener(cu,this.handleElementEvent),this.element_.addEventListener(lu,this.handleElementEvent),this.track_.addEventListener(ou,this.handleTrackEvent),this.track_.addEventListener(ru,this.handleTrackEvent),this.track_.addEventListener(iu,this.handleTrackEvent),this.track_.readyState===ou&&this.handleTrackEvent({type:ou}),this.track_.muted&&this.handleTrackEvent({type:ru})}},{key:"handleElementEvent",value:function(e){switch(e.type){case su:this.log_.info("stream - video player is starting playing"),this.state_="PLAYING",gh.emit(Ph,{stream:this.stream_}),this.emitter_.emit(IE,{state:this.state_,reason:su});break;case ou:this.log_.info("stream - video player is ended"),"STOPPED"!==this.state_&&(this.state_="STOPPED",this.emitter_.emit(IE,{state:this.state_,reason:ou}));break;case au:this.log_.info("stream - video player is paused"),this.state_="PAUSED",this.emitter_.emit(IE,{state:this.state_,reason:au}),this.pausedRetryCount_>0&&!iA()&&(this.log_.info("auto resume when video paused"),this.resume(),this.pausedRetryCount_--);break;case cu:if(this.element_&&this.element_.error){var t="".concat(Kv(),"/").concat(jc().name,"/").concat(jc().version);this.log_.error("stream - video player error observed. code: ".concat(this.element_.error.code," message: ").concat(this.element_.error.message," deviceInfo: ").concat(t)),jd.uploadEvent("stat-".concat(this.stream_.getType(),"-video-").concat(Vl,"-").concat(this.element_.error.code,"-").concat(t),this.element_.error)}break;case lu:gh.emit($h,{stream:this.stream_})}}},{key:"handleTrackEvent",value:function(e){var t=e.type;switch(t){case ou:this.log_.info("stream - video player track is ended"),"STOPPED"!==this.state_&&(this.state_="STOPPED",this.emitter_.emit(IE,{state:this.state_,reason:ou})),gh.emit(Yh,{stream:this.stream_,type:t});break;case ru:this.log_.info("stream - video track is unable to provide media output"),this.stream_.isRemote()||ph(),"PAUSED"!==this.state_&&(this.state_="PAUSED",this.emitter_.emit(IE,{state:this.state_,reason:ru})),gh.emit(qh,{stream:this.stream_,type:t});break;case iu:this.log_.info("stream - video track is able to provide media output"),"PAUSED"===this.state_&&(this.state_="PLAYING",this.emitter_.emit(IE,{state:this.state_,reason:iu}),gh.emit(zh,{stream:this.stream_}))}}},{key:"unbindEvents",value:function(){this.element_&&(this.element_.removeEventListener(su,this.handleElementEvent),this.element_.removeEventListener(ou,this.handleElementEvent),this.element_.removeEventListener(au,this.handleElementEvent),this.element_.removeEventListener(cu,this.handleElementEvent),this.element_.removeEventListener(lu,this.handleElementEvent)),this.track_&&(this.track_.removeEventListener(ou,this.handleTrackEvent),this.track_.removeEventListener(ru,this.handleTrackEvent),this.track_.removeEventListener(iu,this.handleTrackEvent))}},{key:"stop",value:function(){this.unbindEvents(),this.div_&&this.div_.removeChild(this.element_),this.element_.srcObject=null,this.element_=null}},{key:"resume",value:(t=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.element_.play();case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),this.log_.warn("<video> play() error: "+e.t0),!(t=uv({key:Dm,data:{error:e.t0}})).startsWith("NotAllowedError")){e.next=11;break}throw new Vd({code:Fd.PLAY_NOT_ALLOWED,message:t});case 11:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return t.apply(this,arguments)})},{key:"getVideoFrame",value:function(){var e=document.createElement("canvas");return e.width=this.element_.videoWidth,e.height=this.element_.videoHeight,e.getContext("2d").drawImage(this.element_,0,0),e.toDataURL("image/png")}},{key:"on",value:function(e,t){this.emitter_.on(e,t)}},{key:"getElement",value:function(){return this.element_?this.element_:null}}]),e}(),uA=function(){function e(t){s(this,e),this.userId_=t.userId,this.tinyId_=t.tinyId,this.client_=t.client,this.sdpSemantics_=t.client.getSdpSemantics(),this.isUplink_=t.isUplink,this.log_=Cf.createLogger({id:"n|"+this.userId_,userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId(),isLocal:this.isUplink_}),this.signalChannel_=t.signalChannel,this.peerConnection_=null,this.connectTimer_=-1,this.isErrorObserved_=!1,this.emitter_=new fh,this.currentState_=ol,this.waitForPeerConnectionConnectedPromise_=null,this.isReconnecting_=!1,this.reconnectionCount_=0,this.reconnectionTimer_=-1,this.isFirstConnection_=!0}var t;return c(e,[{key:"initialize",value:function(){var e={iceServers:this.client_.getIceServers(),iceTransportPolicy:this.client_.getIceTransportPolicy(),sdpSemantics:this.sdpSemantics_,bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",tcpCandidatePolicy:"disable",IceTransportsType:"nohost"};this.peerConnection_=new RTCPeerConnection(e),this.peerConnection_.onconnectionstatechange=this.onConnectionStateChange.bind(this)}},{key:"close",value:function(){this.log_.info("closing connection"),this.closePeerConnection()}},{key:"closePeerConnection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.peerConnection_&&(this.peerConnection_.onconnectionstatechange=function(){},this.peerConnection_.close(),this.peerConnection_=null,e&&this.emitConnectionStateChangedEvent(ol))}},{key:"getDTLSTransportState",value:function(){if(!this.peerConnection_)return"unknown";var e=null;if(this.isUplink_){if(!Gv()||0===this.peerConnection_.getSenders().length)return"unknown";e=this.peerConnection_.getSenders()[0].transport}else{if(!jv()||0===this.peerConnection_.getReceivers().length)return"unknown";e=this.peerConnection_.getReceivers()[0].transport}return e?e.state:"unknown"}},{key:"onConnectionStateChange",value:function(e){var t=this.peerConnection_.iceConnectionState,n=this.getDTLSTransportState();if(this.log_.info("onConnectionStateChange() connectionState: "+e.target.connectionState),this.log_.info("ICE Transport state: ".concat(t,", DTLS Transport state: ").concat(n)),e.target.connectionState===ul&&this.emitConnectionStateChangedEvent(sl),e.target.connectionState===dl||e.target.connectionState===hl){var r="".concat(this.isUplink_?"uplink":"downlink"," ICE/DTLS Transport connection ").concat(e.target.connectionState,". ICE Transport state: ").concat(t,", DTLS Transport state: ").concat(n),i=new Vd({message:r,code:Fd.ICE_TRANSPORT_ERROR});jd.logFailedEvent({userId:this.client_.getUserId(),eventType:Ll,error:i}),this.emitConnectionStateChangedEvent(ol),this.isErrorObserved_||this.emitter_.emit(oE,i)}if((e.target.connectionState===fl||e.target.connectionState===gl)&&(this.logSelectedCandidate(),jd.logSuccessEvent({userId:this.client_.getUserId(),eventType:Ll}),this.emitConnectionStateChangedEvent(cl),!this.isUplink_&&!this.sentSubscriptionAfterConnected_&&this.pendingSubscription_.length>0)){this.log_.info("send pending subscription after RTCPeerConnection is connected");var o=this.pendingSubscription_[0];this.doSendSubscription(o.data,o.stream,o.type),this.sentSubscriptionAfterConnected_=!0}}},{key:"emitConnectionStateChangedEvent",value:function(e){e!==this.currentState_&&(this.currentState_===al&&e===sl||(gh.emit(ep,{client:this.client_,connection:this,prevState:this.currentState_,state:e}),this.emitter_.emit(sE,{prevState:this.currentState_,state:e}),this.currentState_=e))}},{key:"hitTest",value:function(e){return(0===e||"0"===e)&&this.isUplink_||e===this.tinyId_}},{key:"addEventInternal",value:function(e,t){var n=this.client_.getUserId(),r={eventId:e,eventDesc:t,timestamp:Es(),userId:n,tinyId:this.client_.getTinyId()};this.isUplink_||(r.remoteUserId=this.userId_,r.remoteTinyId=this.tinyId_),hm(n,r)}},{key:"getPeerConnection",value:function(){return this.peerConnection_}},{key:"getClient",value:function(){return this.client_}},{key:"getUserId",value:function(){return this.userId_}},{key:"getTinyId",value:function(){return this.tinyId_}},{key:"logSelectedCandidate",value:(t=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.peerConnection_){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.peerConnection_.getStats();case 4:t=e.sent,n=b(t),e.prev=6,n.s();case 8:if((r=n.n()).done){e.next=18;break}if((i=E(r.value,2))[0],o=i[1],!Zv(o)){e.next=16;break}return s=t.get(o.localCandidateId),a=t.get(o.remoteCandidateId),s&&this.log_.info("local candidate: ".concat(s.candidateType," ").concat(s.protocol,":").concat(s.ip||s.address,":").concat(s.port," ").concat(s.networkType||""," ").concat("relay"===s.candidateType?"relayProtocol:"+s.relayProtocol:"")),a&&this.log_.info("remote candidate: ".concat(a.candidateType," ").concat(a.protocol,":").concat(a.ip||a.address,":").concat(a.port)),e.abrupt("break",18);case 16:e.next=8;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),n.e(e.t0);case 23:return e.prev=23,n.f(),e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[6,20,23,26]])}))),function(){return t.apply(this,arguments)})},{key:"getCurrentState",value:function(){return this.currentState_}},{key:"waitForPeerConnectionConnected",value:function(){var e=this;return this.waitForPeerConnectionConnectedPromise_||(this.waitForPeerConnectionConnectedPromise_=new Promise((function(t,n){if(e.currentState_===cl)return t();var r=-1,i=function n(i){i.state===cl&&(clearTimeout(r),e.emitter_.off(sE,n,e),t())};r=setTimeout((function(){e.emitter_.off(sE,i,e);var t=new Vd({code:Fd.API_CALL_TIMEOUT,message:"connection timeout"});e.peerConnection_||e.isUplink_||(t=e.genRemoteStreamNotExistError()),n(t)}),1e4),e.emitter_.on(sE,i,e)})),this.waitForPeerConnectionConnectedPromise_=this.waitForPeerConnectionConnectedPromise_.then((function(t){return e.waitForPeerConnectionConnectedPromise_=null,t})).catch((function(t){throw e.waitForPeerConnectionConnectedPromise_=null,t}))),this.waitForPeerConnectionConnectedPromise_}},{key:"getReconnectionCount",value:function(){return this.reconnectionCount_}},{key:"startReconnection",value:function(){this.isReconnecting_=!0,this.emitConnectionStateChangedEvent(al),this.reconnect(),this.addEventInternal(this.isUplink_?om:cm,"".concat(this.isUplink_?"uplink":"downlink","-connection is reconnecting"))}},{key:"stopReconnection",value:function(){this.log_.info("stop reconnection"),this.isReconnecting_=!1,this.reconnectionCount_=0,this.clearReconnectionTimer(),this.signalChannel_.off(eg,this.reconnect,this)}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"off",value:function(e,t,n){this.emitter_.off(e,t,n)}},{key:"genRemoteStreamNotExistError",value:function(){return new Vd({code:Fd.REMOTE_STREAM_NOT_EXIST,message:"because the remote user ".concat(this.userId_," unpublished stream")})}}]),e}();function dA(e,t,n,r){if(this.useStringRoomId_){if(!Kd(e)||!/^[A-Za-z\d\s!#$%&()+\-:;<=.>?@[\]^_{}|~,]{1,64}$/.test(e))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Gm,data:t,link:{className:r,fnName:n}})})}else if(!(Yd(e)&&/^[1-9]\d*$/.test(String(e))&&e<4294967295))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Hm,data:t,link:{className:r,fnName:n}})})}function hA(e,t,n,r){if(!/^[A-Za-z\d_-]*$/.test(e))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:l_,data:t,link:{className:r,fnName:n}})})}var pA,fA,gA={TRTC:{createClient:{name:"clientConfig",required:!0,type:Kl,properties:{sdkAppId:{required:!0,type:zl,allowEmpty:!1},userId:{required:!0,type:ql,allowEmpty:!1},userSig:{required:!0,type:ql,allowEmpty:!1},mode:{required:!0,type:ql,values:["rtc","live"]},useStringRoomId:{type:Zl},autoSubscribe:{type:Zl},enableAutoPlayDialog:{type:Zl},streamId:{type:ql},userDefineRecordId:{type:ql},pureAudioPushMode:{type:zl,values:[1,2]}}},createStream:{name:"streamConfig",required:!0,type:Kl,properties:{userId:{type:ql},audio:{type:Zl},video:{type:Zl},screen:{type:Zl},screenAudio:{type:Zl},microphoneId:{type:ql},cameraId:{type:ql},facingMode:{type:ql,values:[tu,nu]},audioSource:{instanceOf:MediaStreamTrack},videoSource:{instanceOf:MediaStreamTrack},mirror:{type:Zl}},validate:function(e){if(!$d(e.screen)&&e.screen&&$d(e.audio)&&(e.audio=!1),!($d(e.audio)&&$d(e.video)||$d(e.audioSource)&&$d(e.videoSource)))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Z_})});if(!$d(e.screen)&&!0===e.screen&&!0===e.video)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:$_})});if(e.audio&&e.screenAudio)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:K_})});if(!0!==e.screen&&!0===e.screenAudio)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Y_})});if(!$d(e.screen)&&!0===e.screen&&!this.isScreenShareSupported())throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:iv})})}}},CLIENT:{join:{name:"options",required:!0,properties:{roomId:{required:!0,type:[zl,ql],allowEmpty:!1,validate:dA},role:{type:[ql],values:["anchor","audience"]}}},publish:{name:"stream",required:!0,instanceOf:bu,validate:function(e){if(!this.isJoined_)throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:$m})});if("live"===this.mode_&&"audience"===this.role_)throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:Ym})});if(this.localStream_)throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:Xm})});if(!e.getIsReadyToPublish())throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:Jm})});if(this.notPublishWithoutH264Supported_)throw new Vd({code:Fd.NOT_SUPPORTED_H264,message:uv({key:tv})})}},unpublish:{name:"stream",required:!0,instanceOf:bu,validate:function(e){if(e!==this.localStream_)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Km})})}},subscribe:[{name:"stream",required:!0,instanceOf:Cu,validate:function(e){if(!e.getConnection())throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:e_})});if(this.notSubscribeWithoutH264Supported_)throw new Vd({code:Fd.NOT_SUPPORTED_H264,message:uv({key:nv})})}},{name:"options",type:Kl,properties:{audio:{type:Zl},video:{type:Zl}}}],unsubscribe:{name:"stream",required:!0,instanceOf:Cu,validate:function(e){if(!e.getConnection())throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:e_})})}},switchRole:{name:"role",required:!0,values:["anchor","audience"],validate:function(){if("live"!==this.mode_)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:n_})});if(!this.isJoined_)throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:r_})})}},startPublishCDNStream:{name:"options",required:!1,properties:{streamId:{type:ql,validate:hA},appId:{type:zl,allowEmpty:!1},bizId:{type:zl,allowEmpty:!1},url:{type:ql,allowEmpty:!1}}},startMixTranscode:{name:"config",required:!0,type:Kl,properties:{mode:{type:ql,values:["preset-layout","manual"]},streamId:{type:ql,validate:hA},videoWidth:{type:zl,notLessThanZero:!0},videoHeight:{type:zl,notLessThanZero:!0},videoBitrate:{type:zl,notLessThanZero:!0,allowEmpty:!1},videoFramerate:{type:zl,validate:function(e,t,n,r){if(e<=0||e>30)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:j_,link:{className:r,fnName:n}})})}},videoGop:{type:zl,validate:function(e,t,n,r){if(e<1||e>8)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:G_,link:{className:r,fnName:n}})})}},audioSampleRate:{type:zl,notLessThanZero:!0},audioBitrate:{type:zl,validate:function(e,t,n,r){if(e<32||e>192)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:H_,link:{className:r,fnName:n}})})}},audioChannels:{type:zl,values:[1,2]},backgroundColor:{type:zl},backgroundImage:{type:ql},mixUsers:{required:!0,type:$l,arrayItem:{require:!0,type:Kl,properties:{userId:{required:!0,type:ql},roomId:{type:[ql,zl],validate:dA},pureAudio:{type:Zl},width:{type:zl,notLessThanZero:!0},height:{type:zl,notLessThanZero:!0},locationX:{type:zl,notLessThanZero:!0},locationY:{type:zl,notLessThanZero:!0},zOrder:{type:zl},streamType:{type:ql,values:["main","auxiliary"]}}}}},validate:function(e,t,n,r,i){var o=0,s=0,a=e.mixUsers,c=[];if(a.forEach((function(e,t){if(c.push(e.userId),!e.pureAudio){if(!e.zOrder||e.zOrder<1||e>15)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Q_,data:"config.mixUsers[".concat(t,"].zOrder"),link:{className:r,fnName:n}})});e.width+e.locationX>o&&(o=e.width+e.locationX),e.height+e.locationY>s&&(s=e.height+e.locationY)}})),c.indexOf(this.getUserId())<0)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:W_,link:{className:r,fnName:n}})});if(e.videoWidth<o||e.videoHeight<s)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:q_,link:{className:r,fnName:n}})})}}},LOCAL_STREAM:{switchDevice:[{name:"type",required:!0,type:ql,values:[Jl,Xl]},{name:"deviceId",required:!0,type:ql,validate:function(){if(this.screen_&&!this.audio_||this.audioSource_||this.videoSource_)throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:y_})});if(this.publishState_===vu)throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:S_})})}}]},STREAM:{play:[{name:"elementId",required:!0,type:[ql,"HTMLDivElement"],validate:function(){if(this.isPlaying_)throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:z_})})}},{name:"options",type:Kl,properties:{objectFit:{type:ql,values:["contain","cover"]},muted:{type:Zl}}}]}};function mA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){var i=r.value;return r.value=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return vA.call(this,t,r,n,this.name_),i.apply(this,r)},r}}function _A(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){var i=r.value;return r.value=o(regeneratorRuntime.mark((function e(){var r,o,s,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=a.length,o=new Array(r),s=0;s<r;s++)o[s]=a[s];return vA.call(this,t,o,n,this.name_),e.abrupt("return",i.apply(this,o));case 3:case"end":return e.stop()}}),e,this)}))),r}}function vA(e,t,n,r){try{for(var i=0;i<e.length;i++)EA.call(this,{rule:e[i],value:t[i],key:e[i].name,fnName:n,className:r})}catch(ky){throw Cf.error(ky),ky}}function EA(e){var t=this,n=e.rule,r=e.value,i=e.key,o=e.fnName,s=e.className;if($d(r)){if(n.required)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Em,data:{key:i,rule:n,fnName:o,value:r},link:{className:s,fnName:o}})})}else{if(Array.isArray(n.type)){if(!n.type.map((function(e){return e.toLowerCase()})).includes(eh(r)))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Am,data:{key:i,rule:n,fnName:o,value:r},link:{className:s,fnName:o}})})}else if(!$d(n.type)&&eh(r)!==n.type)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Am,data:{key:i,rule:n,fnName:o,value:r},link:{className:s,fnName:o}})});if(!1===n.allowEmpty){var a=Yd(r)&&(0===r||Number.isNaN(r)),c=Kd(r)&&""===r.trim();if(a||c)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:ym,data:{key:i,rule:n,fnName:o,value:r},link:{className:s,fnName:o}})})}if(n.notLessThanZero&&Yd(r)&&r<0)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:V_,data:{key:i,rule:n,fnName:o,value:r},link:{className:s,fnName:o}})});if(Kd(n.instanceOf)){if(!r||r.name_!==n.instanceOf)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Sm,data:{key:i,rule:n,fnName:o,value:r},link:{className:s,fnName:o}})})}else if(Zd(n.instanceOf)&&!(r instanceof n.instanceOf))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Sm,data:{key:i,rule:n,fnName:o,value:r},link:{className:s,fnName:o}})});if(n.values&&!n.values.includes(r))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:bm,data:{key:i,rule:n,fnName:o,value:r},link:{className:s,fnName:o}})});var l=n.properties;qd(l)&&"object"===eh(r)&&Object.keys(l).forEach((function(e){EA.call(t,{rule:l[e],value:r&&r[e],key:"".concat(i,".").concat(e),fnName:o,className:s})}));var u=n.arrayItem;qd(u)&&function(e){return"array"===eh(e)}(r)&&r.forEach((function(e,n){EA.call(t,{rule:u,value:e,key:"".concat(i,"[").concat(n,"]"),fnName:o,className:s})})),Zd(n.validate)&&n.validate.call(this,r,i,o,s,this)}}It({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var AA=(pA=_A.apply(void 0,A(gA.STREAM.play)),C((fA=function(){function e(t){s(this,e),this.name_=Tu,this.userId_=t.userId,this.isRemote_=t.isRemote,this.type_=t.type,this.log_=Cf.createLogger({id:"s".concat(t.seq?t.seq:"","|").concat(this.userId_),userId:$d(t.client)?void 0:t.client.getUserId(),sdkAppId:$d(t.client)?void 0:t.client.getSDKAppId(),isLocal:!this.isRemote_,type:this.isRemote_?this.type_:""}),this.mirror_=!1,this.isRemote_||(this.mirror_=!0),$d(t.mirror)||(this.mirror_=t.mirror),this.client_=null,$d(t.client)||(this.client_=t.client),this.mediaStream_=null,this.div_=null,this.isPlaying_=!1,this.connection_=null,this.audioPlayer_=null,this.videoPlayer_=null,this.muted_=!1,this.objectFit_="cover",this.id_=Rv(),this.audioOutputDeviceId_=0,this.audioVolume_=1,this.emitter_=new fh,this.connectionState_=ol,this.installEvents()}var t,i,a,l,u;return c(e,[{key:"installEvents",value:function(){gh.on(rp,this.restartPlayback,this)}},{key:"uninstallEvents",value:function(){gh.off(rp,this.restartPlayback,this)}},{key:"getType",value:function(){return this.type_}},{key:"getLogger",value:function(){return this.log_}},{key:"isSubscribed",get:function(){return"main"===this.type_&&this.connection_.isMainStreamSubscribed||"auxiliary"===this.type_&&this.connection_.isAuxStreamSubscribed}},{key:"isMainVideoSubscribed",get:function(){var e=this.getSubscribedState();return"main"===this.type_&&e&&e.video}},{key:"isMainAudioSubscribed",get:function(){var e=this.getSubscribedState();return"main"===this.type_&&e&&e.audio}},{key:"isAuxVideoSubscribed",get:function(){var e=this.getSubscribedState();return"auxiliary"===this.type_&&e&&e.auxiliary}},{key:"emitConnectionStateChanged",value:function(e){e.state!==this.connectionState_&&(e.state!==ol&&this.isRemote_&&!this.isSubscribed||(this.emitter_.emit(CE,e),this.connectionState_=e.state))}},{key:"setConnection",value:function(e){this.connection_!==e&&(e instanceof uA?(null!==this.connection_&&this.connection_.off(sE,this.emitConnectionStateChanged,this),e.on(sE,this.emitConnectionStateChanged,this)):null===e&&this.connection_.off(sE,this.emitConnectionStateChanged,this),this.connection_=e)}},{key:"getConnection",value:function(){return this.connection_}},{key:"play",value:(u=o(regeneratorRuntime.mark((function e(t,n){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isPlaying_=!0,this.log_.info("stream start to play with options: ".concat(JSON.stringify(n))),(i=document.createElement("div")).setAttribute("id","player_".concat(this.id_)),i.setAttribute("style","width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;"),o=t,"object"!==r(t)&&(o=document.getElementById(t)),o.appendChild(i),this.div_=i,this.isRemote_||(this.muted_=!0),n&&!$d(n.muted)&&(this.muted_=n.muted),this.isRemote_&&"auxiliary"===this.getType()&&(this.objectFit_="contain"),n&&!$d(n.objectFit)&&(this.objectFit_=n.objectFit),gh.emit(Zh,{stream:this}),e.next=16,Promise.all([this.playAudio(),this.playVideo()]);case 16:gh.emit(Nh,{stream:this});case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"playAudio",value:(l=o(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasAudio()&&(!this.isRemote_||this.isMainAudioSubscribed)){e.next=2;break}return e.abrupt("return");case 2:if(t=this.getAudioTrack(),this.audioPlayer_||!t){e.next=17;break}return this.log_.info("stream - create AudioPlayer and play"),this.audioPlayer_=new GE({stream:this,track:t,div:this.div_,muted:this.muted_,outputDeviceId:this.audioOutputDeviceId_,volume:this.audioVolume_}),this.audioPlayer_.on(IE,(function(e){var t={type:Jl,state:e.state,reason:e.reason};gh.emit(Lh,n({stream:r},t)),r.emitter_.emit(SE,t)})),e.prev=7,e.next=10,this.audioPlayer_.play();case 10:e.next=17;break;case 12:throw e.prev=12,e.t0=e.catch(7),this.client_&&this.client_.getEnableAutoPlayDialog()&&new cA,this.emitter_.emit(TE,e.t0),e.t0;case 17:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(){return l.apply(this,arguments)})},{key:"playVideo",value:(a=o(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasVideo()&&(!this.isRemote_||this.isMainVideoSubscribed||this.isAuxVideoSubscribed)){e.next=2;break}return e.abrupt("return");case 2:if(t=this.getVideoTrack(),this.videoPlayer_||!t){e.next=18;break}return gh.emit(Kh,{stream:this}),this.log_.info("stream - create VideoPlayer and play"),this.videoPlayer_=new lA({stream:this,track:t,div:this.div_,muted:this.muted_,objectFit:this.objectFit_,mirror:this.mirror_}),this.videoPlayer_.on(IE,(function(e){var t={type:Xl,state:e.state,reason:e.reason};gh.emit(Lh,n({stream:r},t)),r.emitter_.emit(SE,t)})),e.prev=8,e.next=11,this.videoPlayer_.play();case 11:e.next=18;break;case 13:throw e.prev=13,e.t0=e.catch(8),this.client_&&this.client_.getEnableAutoPlayDialog()&&new cA,this.emitter_.emit(TE,e.t0),e.t0;case 18:case"end":return e.stop()}}),e,this,[[8,13]])}))),function(){return a.apply(this,arguments)})},{key:"stopAudio",value:function(){this.audioPlayer_&&(this.log_.info("stream - stop AudioPlayer"),this.audioPlayer_.stop(),this.audioPlayer_=null)}},{key:"stopVideo",value:function(){this.videoPlayer_&&(this.log_.info("stream - stop VideoPlayer"),this.videoPlayer_.stop(),this.videoPlayer_=null)}},{key:"restartPlayback",value:function(){this.audioPlayer_&&!this.audioPlayer_.isPlaying&&this.restartAudio(),this.videoPlayer_&&!this.videoPlayer_.isPlaying&&this.restartVideo()}},{key:"restartAudio",value:function(){this.isPlaying_&&(this.stopAudio(),this.playAudio().catch((function(e){})))}},{key:"restartVideo",value:function(){this.isPlaying_&&(this.stopVideo(),this.playVideo().catch((function(e){})))}},{key:"stop",value:function(){this.isPlaying_&&(this.isPlaying_=!1,this.stopAudio(),this.stopVideo(),this.div_.parentNode.removeChild(this.div_))}},{key:"resume",value:(i=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPlaying_){e.next=2;break}return e.abrupt("return");case 2:if(this.log_.info("stream - resume"),!this.audioPlayer_){e.next=6;break}return e.next=6,this.audioPlayer_.resume();case 6:if(!this.videoPlayer_){e.next=9;break}return e.next=9,this.videoPlayer_.resume();case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"close",value:function(){this.isPlaying_&&this.stop(),this.isRemote_||(this.mediaStream_&&(this.mediaStream_.preventEvent=1,this.mediaStream_.getTracks().forEach((function(e){e.stop()})),this.mediaStream_=null),this.uninstallEvents())}},{key:"muteAudio",value:function(){return this.addRemoteEvent(!0,Jl),this.doEnableTrack(Jl,!1)}},{key:"muteVideo",value:function(){return this.addRemoteEvent(!0,Xl),this.doEnableTrack(Xl,!1)}},{key:"unmuteAudio",value:function(){return this.addRemoteEvent(!1,Jl),this.doEnableTrack(Jl,!0)}},{key:"unmuteVideo",value:function(){return this.addRemoteEvent(!1,Xl),this.doEnableTrack(Xl,!0)}},{key:"addRemoteEvent",value:function(e,t){if(this.isRemote_&&this.client_){var n=this.client_.getUserId(),r="".concat(e?ru:iu," remote ").concat(t);hm(n,{eventId:t===Jl?e?zg:$g:e?qg:Zg,eventDesc:r,timestamp:(new Date).getTime(),userId:n,tinyId:this.client_.getTinyId(),remoteUserId:this.userId_,remoteTinyId:this.connection_.getTinyId()})}}},{key:"doEnableTrack",value:function(e,t){var n=!1;return e===Jl?this.mediaStream_.getAudioTracks().forEach((function(e){n=!0,e.enabled=t})):this.mediaStream_.getVideoTracks().forEach((function(e){n=!0,e.enabled=t})),n}},{key:"getId",value:function(){return this.id_}},{key:"getUserId",value:function(){return this.userId_}},{key:"getTinyId",value:function(){return this.connection_?this.connection_.getTinyId():""}},{key:"isPlaying",value:function(){return this.isPlaying_}},{key:"setAudioOutput",value:(t=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.audioOutputDeviceId_=t,!this.audioPlayer_){e.next=4;break}return e.next=4,this.audioPlayer_.setSinkId(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setAudioVolume",value:function(e){this.audioVolume_=e,this.log_.info("setAudioVolume to ".concat(e)),this.audioPlayer_&&this.audioPlayer_.setVolume(e)}},{key:"getAudioLevel",value:function(){var e=0;return this.audioPlayer_&&(e=this.audioPlayer_.getAudioLevel()),e}},{key:"hasAudio",value:function(){if(this.isRemote_){if(!this.connection_)return!1;var e=this.connection_.getTrackState();return"main"===this.type_&&e.audio}return!!this.getAudioTrack()}},{key:"hasVideo",value:function(){if(this.isRemote_){if(!this.connection_)return!1;var e=this.connection_.getTrackState();return"auxiliary"===this.type_?e.auxiliary:e.video}return!!this.getVideoTrack()}},{key:"getSubscribedState",value:function(){return this.isRemote_&&this.connection_?this.connection_.getSubscribeState():null}},{key:"getAudioTrack",value:function(){var e=null;if(this.mediaStream_){var t=this.mediaStream_.getAudioTracks();t.length>0&&(e=t[0])}return e}},{key:"getVideoTrack",value:function(){var e=null;if(this.mediaStream_){var t=this.mediaStream_.getVideoTracks();t.length>0&&(e=t[0])}return e}},{key:"getVideoFrame",value:function(){return this.videoPlayer_?this.videoPlayer_.getVideoFrame():null}},{key:"getMediaStream",value:function(){return this.mediaStream_}},{key:"setMediaStream",value:function(e){e!==this.mediaStream_&&(this.mediaStream_&&this.mediaStream_.getTracks().forEach((function(e){return e.stop()})),this.mediaStream_=e)}},{key:"updateVideoPlayingState",value:function(e){this.isPlaying_&&(e?(this.log_.info("playing state updated, play video"),this.playVideo().catch((function(e){}))):(this.log_.info("playing state updated, stop video"),this.stopVideo()))}},{key:"updateAudioPlayingState",value:function(e){this.isPlaying_&&(e?(this.log_.info("playing state updated, play audio"),this.playAudio().catch((function(e){}))):(this.log_.info("playing state updated, stop audio"),this.stopAudio()))}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"off",value:function(e,t,n){"*"===e?this.emitter_.removeAllListeners():this.emitter_.off(e,t,n)}},{key:"isRemote",value:function(){return this.isRemote_}},{key:"getDiv",value:function(){return this.div_}},{key:"getObjectFit",value:function(){return this.objectFit_}},{key:"getMuted",value:function(){return this.muted_}},{key:"getClient",value:function(){return this.client_}}]),e}()).prototype,"play",[pA],Object.getOwnPropertyDescriptor(fA.prototype,"play"),fA.prototype),fA),yA=function(e){u(r,e);var t=_(r);function r(e){var i;s(this,r);var o={isRemote:!0,type:e.type},a=n(n({},e),o);return(i=t.call(this,a)).name_=Cu,i.isInSubscriptionCycle_=!1,i.isStreamAddedEventEmitted_=!1,i.isAbleToCallSubscription_=!0,i}return c(r,[{key:"installEvents",value:function(){v(d(r.prototype),"installEvents",this).call(this),gh.on(Uh,this.handleStreamSubscribed,this),gh.on(Fh,this.handleStreamUnsubscribed,this)}},{key:"uninstallEvents",value:function(){v(d(r.prototype),"uninstallEvents",this).call(this),gh.off(Uh,this.handleStreamSubscribed,this),gh.off(Fh,this.handleStreamUnsubscribed,this)}},{key:"handleStreamSubscribed",value:function(e){e.client===this.client_&&e.stream===this&&this.connection_.getCurrentState()===cl&&this.emitConnectionStateChanged({prevState:ol,state:cl})}},{key:"handleStreamUnsubscribed",value:function(e){e.client===this.client_&&e.stream===this&&this.emitConnectionStateChanged({prevState:cl,state:ol})}},{key:"getType",value:function(){return v(d(r.prototype),"getType",this).call(this)}},{key:"getIsAbleToCallSubscription",value:function(){return this.isAbleToCallSubscription_}},{key:"setIsAbleToCallSubscription",value:function(e){this.isAbleToCallSubscription_=e}},{key:"setInSubscriptionCycle",value:function(e){this.isInSubscriptionCycle_=e}},{key:"isInSubscriptionCycle",value:function(){return this.isInSubscriptionCycle_}},{key:"setIsStreamAddedEventEmitted",value:function(e){this.isStreamAddedEventEmitted_=e}},{key:"getIsStreamAddedEventEmitted",value:function(){return this.isStreamAddedEventEmitted_}},{key:"getAudioTrack",value:function(){return this.connection_&&this.connection_.getTrackState().audio?v(d(r.prototype),"getAudioTrack",this).call(this):null}},{key:"getVideoTrack",value:function(){if(!this.connection_)return null;var e=this.connection_.getTrackState();return"main"===this.type_&&!e.video||"auxiliary"===this.type_&&!e.auxiliary?null:v(d(r.prototype),"getVideoTrack",this).call(this)}},{key:"close",value:function(){v(d(r.prototype),"close",this).call(this)}}]),r}(AA),SA=function(){function e(t){s(this,e),this.client_=t.client,this.subscribedStreams_=new Map,this.unsubscribedStreams_=new Map,this.subscriptedOptions_=new Map,this.autoRecoveryFlags_=new Map}var t,n,r;return c(e,[{key:"isEnabled",get:function(){return"webrtc"!==this.client_.getEnv()}},{key:"recover",value:(r=o(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getUserId(),r=t.getType(),this.hasAutoRecoveryFlag(n,r)){e.next=5;break}return e.abrupt("return");case 5:if(i=this.getUnsubscribedStream(n,r)?"unsubscribe":"subscribe",e.prev=6,Cf.warn("recover() try to recover subscription [".concat(i,"][").concat(n,"][").concat(r,"]")),"subscribe"!==i){e.next=13;break}return e.next=11,this.recoverSubscription(n,t);case 11:e.next=15;break;case 13:return e.next=15,this.recoverUnsubscription(n,t);case 15:jd.logSuccessEvent({userId:this.client_.getUserId(),eventType:Bl}),Cf.warn("recover() recover successfully [".concat(i,"][").concat(n,"][").concat(r,"]")),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),Cf.error("recover() recover failed [".concat(i,"][").concat(n,"][").concat(r,"]"),e.t0),jd.logFailedEvent({userId:this.client_.getUserId(),eventType:Bl,error:e.t0});case 23:this.deleteAutoRecoveryFlag(n,r);case 24:case"end":return e.stop()}}),e,this,[[6,19]])}))),function(e){return r.apply(this,arguments)})},{key:"recoverSubscription",value:(n=o(regeneratorRuntime.mark((function e(t,n){var r,i,o,s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getOptions(t,n.getType()),i=this.getSubscribedStream(t,n.getType()),r&&i){e.next=4;break}return e.abrupt("return");case 4:o=this.getStreamMuteState(i),s=o.isAudioMuted,a=o.isVideoMuted,this.mergeStream(i,n),this.recoverPlayingState(i),s&&i.doEnableTrack(Jl,!1),a&&i.doEnableTrack(Xl,!1);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"recoverUnsubscription",value:(t=o(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getUnsubscribedStream(t,n.getType())){e.next=3;break}return e.abrupt("return");case 3:this.mergeStream(r,n);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getStreamMuteState",value:function(e){var t={isAudioMuted:!1,isVideoMuted:!1},n=e.getMediaStream();return n&&(t.isAudioMuted=n.getAudioTracks().map((function(e){return e.enabled})).includes(!1),t.isVideoMuted=n.getVideoTracks().map((function(e){return e.enabled})).includes(!1)),t}},{key:"recoverPlayingState",value:function(e){var t=e.isPlaying(),n=e.getDiv();if(t&&n){var r=n.parentNode;e.stop(),e.play(r,{objectFit:e.getObjectFit(),muted:e.getMuted()})}}},{key:"mergeStream",value:function(e,t){var n=t.getConnection(),r=t.getMediaStream();e.setConnection(n),n.setRemoteStream(r.id,e),e.setMediaStream(r),e.updateAudioPlayingState(t.hasAudio()),e.updateVideoPlayingState(t.hasVideo())}},{key:"addSubscriptionRecord",value:function(e,t,n){var r=t.getType();if(this.subscribedStreams_.has(e))this.subscribedStreams_.get(e).set(r,t);else{var i=new Map;i.set(t.getType(),t),this.subscribedStreams_.set(e,i)}if(this.subscriptedOptions_.has(e))this.subscriptedOptions_.get(e).set(r,n);else{var o=new Map;o.set(t.getType(),n),this.subscriptedOptions_.set(e,o)}this.deleteUnsubscriptionRecord(e,r)}},{key:"addUnsubscriptionRecord",value:function(e,t){if(this.unsubscribedStreams_.has(e))this.unsubscribedStreams_.get(e).set(t.getType(),t);else{var n=new Map;n.set(t.getType(),t),this.unsubscribedStreams_.set(e,n)}this.deleteSubscriptionRecord(e,t.getType())}},{key:"getSubscribedStream",value:function(e,t){return this.subscribedStreams_.has(e)&&this.subscribedStreams_.get(e).has(t)?this.subscribedStreams_.get(e).get(t):null}},{key:"getOptions",value:function(e,t){return this.subscriptedOptions_.has(e)&&this.subscriptedOptions_.get(e).has(t)?this.subscriptedOptions_.get(e).get(t):null}},{key:"getUnsubscribedStream",value:function(e,t){return this.unsubscribedStreams_.has(e)&&this.unsubscribedStreams_.get(e).has(t)?this.unsubscribedStreams_.get(e).get(t):null}},{key:"deleteSubscriptionRecord",value:function(e,t){this.subscribedStreams_.has(e)&&this.subscribedStreams_.get(e).delete(t),this.subscriptedOptions_.has(e)&&this.subscriptedOptions_.get(e).delete(t)}},{key:"deleteUnsubscriptionRecord",value:function(e,t){this.unsubscribedStreams_.has(e)&&this.unsubscribedStreams_.get(e).delete(t)}},{key:"markAllStream",value:function(){for(var e=0,t=A(this.subscribedStreams_.entries());e<t.length;e++)for(var n=E(t[e],2),r=n[0],i=0,o=A(n[1].entries());i<o.length;i++){var s=E(o[i],1)[0];this.setAutoRecoveryFlag(r,s)}for(var a=0,c=A(this.unsubscribedStreams_.entries());a<c.length;a++)for(var l=E(c[a],2),u=l[0],d=0,h=A(l[1].entries());d<h.length;d++){var p=E(h[d],1)[0];this.setAutoRecoveryFlag(u,p)}}},{key:"setAutoRecoveryFlag",value:function(e,t){if(Cf.info("setAutoRecoveryFlag() mark [".concat(e,"][").concat(t,"]")),this.autoRecoveryFlags_.has(e))this.autoRecoveryFlags_.get(e).set(t);else{var n=new Map;n.set(t),this.autoRecoveryFlags_.set(e,n)}}},{key:"hasAutoRecoveryFlag",value:function(e,t){return!!this.isEnabled&&this.autoRecoveryFlags_.has(e)&&this.autoRecoveryFlags_.get(e).has(t)}},{key:"deleteAutoRecoveryFlag",value:function(e,t){this.autoRecoveryFlags_.has(e)&&this.autoRecoveryFlags_.get(e).delete(t)}},{key:"delete",value:function(e){this.unsubscribedStreams_.delete(e),this.subscribedStreams_.delete(e),this.subscriptedOptions_.delete(e),this.autoRecoveryFlags_.delete(e)}}]),e}(),bA=zt("slice"),CA=_e("species"),TA=[].slice,IA=Math.max;It({target:"Array",proto:!0,forced:!bA},{slice:function(e,t){var n,r,i,o=G(this),s=at(o),a=it(e,s),c=it(void 0===t?s:t,s);if(wt(o)&&(n=o.constructor,(Vt(n)&&(n===Array||wt(n.prototype))||Q(n)&&null===(n=n[CA]))&&(n=void 0),n===Array||void 0===n))return TA.call(o,a,c);for(r=new(void 0===n?Array:n)(IA(c-a,0)),i=0;a<c;a++,i++)a in o&&zi(r,i,o[a]);return r.length=i,r}}),It({target:"String",proto:!0,forced:_m("small")},{small:function(){return mm(this,"small","","")}});var RA=function(){function e(t){s(this,e),this.player_=t,this.canvas_=document.createElement(Yl),this.canvasCtx_=this.canvas_.getContext("2d")}return c(e,[{key:"setCanvasRect",value:function(e,t){this.canvas_.width=e,this.canvas_.height=t}},{key:"drawVideoToCanvas",value:function(){var e=this.player_.getElement();this.canvasCtx_.drawImage(e,0,0,this.canvas_.width,this.canvas_.height)}},{key:"generateVideoTrackFromCanvasCapture",value:function(e){return this.canvas_.captureStream(e).getVideoTracks()[0]}},{key:"generateStreamFromTrack",value:function(e){var t=new MediaStream;return t.addTrack(e),t}},{key:"destroy",value:function(){this.player_.stop(),this.canvas_=null,this.canvasCtx_=null}},{key:"canvas",get:function(){return this.canvas_}},{key:"canvasCtx",get:function(){return this.canvasCtx_}},{key:"canDrawVideoToCanvas",get:function(){if(this.player_){var e=this.player_.getElement();if(e)return e.readyState===e.HAVE_ENOUGH_DATA}return!1}}]),e}(),wA=function(){function e(t){s(this,e),this.localStream_=t,this.player_=new lA({stream:t,track:t.getVideoTrack(),muted:!0,objectFit:"cover",mirror:!1}),this.player_.play().then((function(){Cf.info("VideoGenerator: play local video success")})).catch((function(){Cf.error("VideoGenerator: Failed to play local video")})),this.processor_=new RA(this.player_)}return c(e,[{key:"generateSmallVideoTrack",value:function(e){var t=this.getSmallVideoProfile(e);this.processor_.setCanvasRect(t.width,t.height),this.player_.setRect({width:t.width,height:t.height});var n=this.processor_.generateVideoTrackFromCanvasCapture(t.frameRate);return this.interval_=wv.setInterval(this.render.bind(this),Math.ceil(1e3/t.frameRate)),n}},{key:"render",value:function(){this.processor_.canDrawVideoToCanvas&&this.processor_.drawVideoToCanvas()}},{key:"destroy",value:function(){wv.clearInterval(this.interval_),this.processor_&&this.processor_.destroy()}},{key:"getSmallVideoProfile",value:function(e){var t,n=this.localStream_.getVideoTrack(),r=this.localStream_.getVideoProfile(),i=n.getSettings(),o=i&&i.width&&i.height?{width:i.width,height:i.height}:r,s=o.width*o.height,a=e.width*e.height;return Cf.log("big stream resolution: ".concat(o.height,"*").concat(o.width," small stream resolution: ").concat(e.height,"*").concat(e.width," ")),s>a?t=s/a:(Cf.warn("Small stream resolution is larger than big stream, which is invalid. big: ".concat(o.width," * ").concat(o.height," small: ").concat(e.width," * ").concat(e.height)),t=s/19200),{width:parseInt(o.width/Math.sqrt(t)),height:parseInt(o.height/Math.sqrt(t)),frameRate:e.frameRate}}}]),e}(),kA={voiceActivityDetection:!1},OA=function(e){u(S,e);var t,n,r,i,a,l,h,p,f,g,m,E,A,y=_(S);function S(e){var t;return s(this,S),(t=y.call(this,e)).localStream_=null,t.exchangeSDPTimeout_=-1,t.smallGenerator_=null,t.isSDPExchanging_=!1,t.ssrc_={audio:0,video:0,small:0},t.canvasTrack_=null,t}return c(S,[{key:"initialize",value:function(){v(d(S.prototype),"initialize",this).call(this),this.installEvents()}},{key:"reset",value:function(){v(d(S.prototype),"close",this).call(this),this.uninstallEvents(),this.clearExchangeSDPTimeout(),this.canvasTrack_=null,this.localStream_&&this.localStream_.clearCanvas()}},{key:"close",value:function(){this.reset(),this.emitConnectionStateChangedEvent(ol),this.smallGenerator_&&(this.smallGenerator_.destroy(),this.smallGenerator_=null)}},{key:"installEvents",value:function(){this.emitter_.on(oE,this.handleError,this),this.emitter_.on(sE,this.handleConnectionStateChange,this)}},{key:"uninstallEvents",value:function(){this.emitter_.off(oE,this.handleError,this),this.emitter_.off(sE,this.handleConnectionStateChange,this)}},{key:"publish",value:(A=o(regeneratorRuntime.mark((function e(t){var n,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.localStream_=t,n=t.getMediaStream(),this.log_.info("is publishing stream: ".concat(t.getId())),r=this.localStream_.getAudioTrack(),i=this.localStream_.getVideoTrack(),r&&this.peerConnection_.addTrack(r,n),i&&(Bc&&Xd(i)?(this.canvasTrack_=this.localStream_.genCanvasTrack(i),this.peerConnection_.addTrack(this.canvasTrack_,n)):this.peerConnection_.addTrack(i,n),this.client_.getIsEnableSmallStream()&&(this.smallGenerator_=new wA(this.localStream_),o=this.smallGenerator_.generateSmallVideoTrack(this.client_.smallStreamConfig_),this.peerConnection_.addTrack(o,n))),this.updateMediaSettings(n),e.next=10,this.connect();case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return A.apply(this,arguments)})},{key:"updateMediaSettings",value:function(e){var t=this,n=this.client_.getSystemResult().detail,r=n.isH264EncodeSupported,i=n.isVp8EncodeSupported,o="";r?o="H264":i&&(o="VP8");var s={EncVideoCodec:o,EncVideoWidth:0,EncVideoHeight:0,EncVideoBr:"0",EncVideoFps:0,EncAudioCodec:"opus",EncAudioFS:0,EncAudioCh:0,EncAudioBr:"0"};"getSettings"in MediaStreamTrack.prototype?e.getTracks().forEach((function(e){var n=e.getSettings();if(e.kind===Jl){var r=1;n.channelCount&&(r=n.channelCount),s.EncAudioCh=r,s.EncAudioBr="".concat(1e3*t.localStream_.getAudioBitrate()),s.EncAudioFS=n.sampleRate}else e.kind===Xl&&(t.client_.getIsEnableSmallStream()&&(s.EncSmallVideoWidth=t.client_.smallStreamConfig.width,s.EncSmallVideoHeight=t.client_.smallStreamConfig.height,s.EncSmallVideoFps=t.client_.smallStreamConfig.framerate,s.EncSmallVideoBr="".concat(1e3*t.client_.smallStreamConfig.bitrate)),s.EncVideoWidth=n.width,s.EncVideoHeight=n.height,s.EncVideoFps=n.frameRate,s.EncVideoBr="".concat(1e3*t.localStream_.getVideoBitrate()))})):s=this.getMediaSettingsFromProfile(s),this.log_.info("updateMediaSettings: "+JSON.stringify(s)),this.signalChannel_.send(gg,s)}},{key:"getMediaSettingsFromProfile",value:function(e){var t=this.localStream_;if(t){if(t.getAudioTrack()){var n=t.getAudioProfile();e.EncAudioCh=n.channelCount,e.EncAudioBr="".concat(1e3*n.bitrate),e.EncAudioFS=n.sampleRate}if(t.getVideoTrack()){var r=t.getVideoProfile();e.EncVideoWidth=r.width,e.EncVideoHeight=r.height,e.EncVideoFps=r.frameRate,e.EncVideoBr="".concat(1e3*r.bitrate)}}return e}},{key:"addTrack",value:(E=o(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.peerConnection_){e.next=20;break}if(t.kind===Xl&&Bc&&Xd(t)&&(t=this.canvasTrack_=this.localStream_.genCanvasTrack(t)),this.log_.info("is adding ".concat(t.kind," track to current published local stream")),!(Hv()&&this.peerConnection_.getTransceivers().findIndex((function(e){return"stopped"===e.direction}))>=0)){e.next=7;break}return this.log_.warn("transceiver is stopping, negotiate sdp first"),e.next=7,this.updateOffer(gu,t);case 7:if(!(n=this.peerConnection_.getSenders().find((function(e){return e.track&&e.track.kind===t.kind})))){e.next=14;break}return this.log_.warn("sender already exists, remove sender first"),r=n.track,this.removeSender(n),e.next=14,this.updateOffer(gu,r);case 14:return i=this.localStream_.getMediaStream(),this.peerConnection_.addTrack(t,i),this.updateMediaSettings(i),e.next=19,this.updateOffer(fu,t);case 19:hm(this.userId_,{eventId:t.kind===Jl?Lg:Ng,eventDesc:"add ".concat(t.kind," track to current published stream"),timestamp:Es(),userId:this.userId_,tinyId:this.tinyId_});case 20:case"end":return e.stop()}}),e,this)}))),function(e){return E.apply(this,arguments)})},{key:"isNeedToResetOfferOrder",value:function(){if("plan-b"===this.sdpSemantics_||!this.peerConnection_||!this.peerConnection_.localDescription)return!1;for(var e=this.peerConnection_.localDescription.sdp,t=Sv(e),n=0;n<t.media.length;n++)if(0===t.media[n].mid&&t.media[n].type===Xl)return!0;return!1}},{key:"removeSender",value:function(e){var t=null;Hv()&&(t=this.peerConnection_.getTransceivers().find((function(t){return t.sender&&t.sender.track===e.track}))),this.peerConnection_.removeTrack(e),t&&Zd(t.stop)&&(this.log_.info("stop transceiver"),t.stop())}},{key:"removeTrack",value:(m=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.peerConnection_||!Gv()){e.next=14;break}if(t.kind===Xl&&Bc&&this.canvasTrack_&&(t=this.canvasTrack_,this.localStream_.clearCanvas()),this.log_.info("is removing ".concat(t.kind," track from current published local stream")),t.kind!==Xl||!this.isNeedToResetOfferOrder()){e.next=9;break}return this.reset(),this.initialize(),e.next=8,this.publish(this.localStream_);case 8:return e.abrupt("return");case 9:return(n=this.peerConnection_.getSenders().find((function(e){return e.track===t})))&&(this.removeSender(n),this.updateMediaSettings(this.localStream_.getMediaStream())),e.next=13,this.updateOffer(gu,t);case 13:hm(this.userId_,{eventId:t.kind===Jl?Dg:Pg,eventDesc:"remove ".concat(t.kind," track from current published stream"),timestamp:Es(),userId:this.userId_,tinyId:this.tinyId_});case 14:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"isReplaceTrackAvailable",value:function(){return"RTCRtpSender"in window&&"replaceTrack"in window.RTCRtpSender.prototype}},{key:"replaceTrack",value:(g=o(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.kind!==Xl||!Bc||!this.canvasTrack_){e.next=2;break}return e.abrupt("return");case 2:if(this.isReplaceTrackAvailable()&&Gv()){e.next=4;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:rv})});case 4:if(this.peerConnection_){e.next=6;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:b_})});case 6:if(0!==(n=this.peerConnection_.getSenders()).length){e.next=9;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:b_})});case 9:n.forEach((function(e){e.track&&e.track.kind===t.kind&&(r.log_.info("is replacing ".concat(t.kind," track to current published local stream")),e.replaceTrack(t))})),hm(this.userId_,{eventId:t.kind===Jl?Wg:Qg,eventDesc:"replace ".concat(t.kind," track from current published stream"),timestamp:Es(),userId:this.userId_,tinyId:this.tinyId_});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"setBandwidth",value:(f=o(regeneratorRuntime.mark((function e(t,n,r){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUplink_){e.next=2;break}return e.abrupt("return",r);case 2:if(Wv()){e.next=4;break}return e.abrupt("return",n===Xl?this.updateVideoBandwidthRestriction(r,t):this.updateAudioBandwidthRestriction(r,t));case 4:if(!(i=this.peerConnection_.getSenders().find((function(e){return e.track&&e.track.kind===n})))){e.next=20;break}return(o=i.getParameters()).encodings&&0!==o.encodings.length||(o.encodings=[{}]),"unlimited"===t?delete o.encodings[0].maxBitrate:o.encodings[0].maxBitrate=1e3*t,e.prev=9,e.next=12,i.setParameters(o);case 12:return this.log_.info(n+" bandwidth was set to "+t+" kbps"),e.abrupt("return",r);case 16:return e.prev=16,e.t0=e.catch(9),this.log_.info("failed to set bandwidth by setting maxBitrate: "+e.t0),e.abrupt("return",n===Xl?this.updateVideoBandwidthRestriction(r,t):this.updateAudioBandwidthRestriction(r,t));case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,this,[[9,16]])}))),function(e,t,n){return f.apply(this,arguments)})},{key:"setSmallStreamBandwidth",value:(p=o(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUplink_){e.next=2;break}return e.abrupt("return",n);case 2:if(Wv()){e.next=4;break}return e.abrupt("return",this.updateSmallVideoBandwidthRestriction(n,t));case 4:if(!(r=this.peerConnection_.getSenders().filter((function(e){return e.track&&e.track.kind===Xl}))[1])){e.next=20;break}return(i=r.getParameters()).encodings&&0!==i.encodings.length||(i.encodings=[{}]),"unlimited"===t?delete i.encodings[0].maxBitrate:i.encodings[0].maxBitrate=1e3*t,e.prev=9,e.next=12,r.setParameters(i);case 12:return this.log_.info("small stream bandwidth was set to "+t+" kbps"),e.abrupt("return",n);case 16:return e.prev=16,e.t0=e.catch(9),this.log_.info("failed to set small stream bandwidth by setting maxBitrate: "+e.t0),e.abrupt("return",this.updateSmallVideoBandwidthRestriction(n,t));case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this,[[9,16]])}))),function(e,t){return p.apply(this,arguments)})},{key:"updateVideoBandwidthRestriction",value:function(e,t){var n="AS";return Ga&&(n="TIAS",t*=1e3),-1===e.indexOf("b="+n+":")?e.replace(/m=video (.*)\r\nc=IN (.*)\r\n/,"m=video $1\r\nc=IN $2\r\nb="+n+":"+t+"\r\n"):e.replace(new RegExp("b="+n+":.*\r\n"),"b="+n+":"+t+"\r\n")}},{key:"updateAudioBandwidthRestriction",value:function(e,t){var n="AS";return Ga&&(n="TIAS",t*=1e3),e.replace(/m=audio (.*)\r\nc=IN (.*)\r\n/,"m=audio $1\r\nc=IN $2\r\nb="+n+":"+t+"\r\n")}},{key:"updateSmallVideoBandwidthRestriction",value:function(e,t){var n="AS";Ga&&(n="TIAS",t*=1e3);var r=/m=video (.*)\r\nc=IN (.*)\r\n/g,i=[],o=r.exec(e);for(i.push(o);null!==o;)o=r.exec(e),i.push(o);var s=i[i.length-2],a=e.slice(0,s.index),c=e.slice(s.index);return-1===e.indexOf("b="+n+":")?a+(c=c.replace(/m=video (.*)\r\nc=IN (.*)\r\n/,"m=video $1\r\nc=IN $2\r\nb="+n+":"+t+"\r\n")):a+(c=c.replace(new RegExp("b="+n+":.*\r\n"),"b="+n+":"+t+"\r\n"))}},{key:"removeBandwidthRestriction",value:function(e){return e.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"")}},{key:"removeVideoOrientation",value:function(e){return e.replace(/urn:3gpp:video-orientation/,"")}},{key:"connect",value:(h=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.exchangeSDP();case 3:return e.next=5,this.waitForPeerConnectionConnected();case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),this.closePeerConnection(!0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return h.apply(this,arguments)})},{key:"exchangeSDP",value:(l=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isSDPExchanging_=!0,e.next=4,this.createOffer();case 4:return this.log_.info("createOffer success, sending offer to remote server"),e.next=7,this.doExchangeSDP();case 7:this.isSDPExchanging_=!1,e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),this.isSDPExchanging_=!1,e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return l.apply(this,arguments)})},{key:"createOffer",value:(a=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection_.createOffer(kA);case 3:return t=e.sent,e.next=6,this.peerConnection_.setLocalDescription(t);case 6:this.updateSSRC(t.sdp),jd.logSuccessEvent({userId:this.client_.getUserId(),eventType:Ol,kind:"offer"}),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),jd.logFailedEvent({userId:this.client_.getUserId(),eventType:Ol,kind:"offer",error:e.t0}),e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return a.apply(this,arguments)})},{key:"doExchangeSDP",value:function(){var e=this;return new Promise((function(t,n){e.exchangeSDPTimeout_=setTimeout((function(){e.signalChannel_.off(cg.PUBLISH_RESULT,r),e.signalChannel_.off(cg.ON_PUBLISH_RESPONSE,r),e.clearExchangeSDPTimeout();var t=new Vd({code:Fd.API_CALL_TIMEOUT,message:uv({key:km})});n(t)}),5e3);var r=function(){var r=o(regeneratorRuntime.mark((function r(i){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e.clearExchangeSDPTimeout(),r.next=4,e.acceptAnswer(i.data.content);case 4:t(),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),n(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}(),i={type:e.peerConnection_.localDescription.type,sdp:e.removeVideoOrientation(e.peerConnection_.localDescription.sdp),screen:e.localStream_.hasScreenTrack()};e.signalChannel_.once(cg.PUBLISH_RESULT,r),e.signalChannel_.once(cg.ON_PUBLISH_RESPONSE,r),e.log_.debug("sending sdp offer: "+i.sdp),e.signalChannel_.send(_g,i,0)}))}},{key:"setSDPDirection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",r=Sv(e);return r.media.forEach((function(e){"all"!==n&&e.type!==n||(e.direction=t)})),bv(r)}},{key:"updateOffer",value:(i=o(regeneratorRuntime.mark((function e(t,n){var r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection_.createOffer(kA);case 3:return r=e.sent,Ga&&(r.sdp=this.setSDPDirection(r.sdp,"sendrecv")),e.next=7,this.peerConnection_.setLocalDescription(r);case 7:return i={action:t,trackId:n.id,kind:n.kind,type:"offer",sdp:this.peerConnection_.localDescription.sdp},this.log_.info("createOffer success, sending updated offer to remote server"),this.log_.debug("updatedOffer: "+i.sdp),e.next=12,this.signalChannel_.sendWaitForResponse({command:lg,data:i,responseCommand:cg.UPDATE_OFFER_RESULT,timeout:1e4,commandDesc:"update offer"});case 12:return o=e.sent,e.next=15,this.acceptAnswer(o.data.content);case 15:this.updateSSRC(r.sdp),jd.logSuccessEvent({userId:this.client_.getUserId(),eventType:Ol,kind:"offer"}),e.next=24;break;case 19:throw e.prev=19,e.t0=e.catch(0),this.log_.error(e.t0),jd.logFailedEvent({userId:this.client_.getUserId(),eventType:Ol,kind:"offer",error:e.t0}),e.t0;case 24:case"end":return e.stop()}}),e,this,[[0,19]])}))),function(e,t){return i.apply(this,arguments)})},{key:"acceptAnswer",value:(r=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(77392!==t.result){e.next=3;break}throw this.log_.error(av.NOT_SUPPORTED_H264ENCODE),new Vd({code:Fd.NOT_SUPPORTED_H264,message:uv({key:tv})});case 3:return n=this.localStream_.getVideoBitrate(),r=this.localStream_.getAudioBitrate(),i=this.removeVideoOrientation(t.sdp),e.prev=6,e.next=9,this.setBandwidth(n,Xl,i);case 9:return i=e.sent,e.next=12,this.setBandwidth(r,Jl,i);case 12:if(i=e.sent,!this.client_.getIsEnableSmallStream()){e.next=18;break}return o=this.client_.smallStreamConfig,e.next=17,this.setSmallStreamBandwidth(o.bitrate,i);case 17:i=e.sent;case 18:return s={type:t.type,sdp:i},e.next=21,this.peerConnection_.setRemoteDescription(s);case 21:this.log_.debug("accepted answer: "+i),jd.logSuccessEvent({userId:this.client_.getUserId(),eventType:Nl,kind:"answer"}),e.next=30;break;case 25:throw e.prev=25,e.t0=e.catch(6),jd.logFailedEvent({userId:this.client_.getUserId(),eventType:Nl,kind:"answer",error:e.t0}),this.log_.error("failed to accept remote answer "+e.t0),e.t0;case 30:case"end":return e.stop()}}),e,this,[[6,25]])}))),function(e){return r.apply(this,arguments)})},{key:"sendMutedFlag",value:function(e){var t={srctinyid:0,userid:this.userId_,flag:e};this.log_.info("send muted flag: ".concat(e)),this.signalChannel_.send(fg,t)}},{key:"getIsReconnecting",value:function(){return this.isReconnecting_}},{key:"reconnect",value:(n=o(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===this.reconnectionTimer_){e.next=3;break}return this.log_.warn("reconnect() uplink is reconnecting, ignore current reconnection"),e.abrupt("return");case 3:if(!(this.reconnectionCount_>=30)){e.next=12;break}return this.log_.warn("SDK has tried reconnect uplink for ".concat(30," times, but all failed, please check your network")),this.stopReconnection(),t=new Vd({code:Fd.UPLINK_RECONNECTION_FAILED,message:uv({key:Lm})}),jd.logFailedEvent({userId:this.client_.getUserId(),eventType:Rl,error:t}),this.addEventInternal(am,"uplink-connection reconnect fail"),this.emitConnectionStateChangedEvent(ol),this.emitter_.emit(oE,t),e.abrupt("return");case 12:if(this.signalChannel_.getCurrentState()===og){e.next=16;break}return this.log_.warn("reconnect() signal channel is not connected, suspend reconnection until signal is connected"),this.signalChannel_.once(eg,this.reconnect,this),e.abrupt("return");case 16:if(this.reconnectionCount_++,e.prev=17,this.log_.warn("reconnect() try to reconnect uplink [".concat(this.reconnectionCount_,"/").concat(30,"]")),n=zd(this.reconnectionCount_),this.reconnectionTimer_=setTimeout((function(){r.log_.warn("reconnect() uplink reconnect timeout(".concat(n/1e3,"s), try again")),r.signalChannel_.off(cg.UNPUBLISH_RESULT,r.onUnpublishResult,r),r.clearReconnectionTimer(),r.reconnect()}),n),!(this.isSDPExchanging_||this.peerConnection_&&this.peerConnection_.connectionState===ul)){e.next=23;break}return e.abrupt("return");case 23:this.signalChannel_.send(vg),this.signalChannel_.once(cg.UNPUBLISH_RESULT,this.onUnpublishResult,this),e.next=29;break;case 27:e.prev=27,e.t0=e.catch(17);case 29:case"end":return e.stop()}}),e,this,[[17,27]])}))),function(){return n.apply(this,arguments)})},{key:"onUnpublishResult",value:(t=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.reset(),this.initialize(),e.next=5,this.publish(this.localStream_);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return t.apply(this,arguments)})},{key:"clearExchangeSDPTimeout",value:function(){-1!==this.exchangeSDPTimeout_&&(clearTimeout(this.exchangeSDPTimeout_),this.exchangeSDPTimeout_=-1)}},{key:"clearReconnectionTimer",value:function(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}},{key:"handleError",value:function(e){e.getCode()===Fd.ICE_TRANSPORT_ERROR&&(this.isFirstConnection_&&(this.isFirstConnection_=!1,jd.logFailedEvent({userId:this.client_.getUserId(),eventType:Il,error:e})),this.isReconnecting_||this.startReconnection())}},{key:"handleConnectionStateChange",value:function(e){e.state===cl&&(this.isFirstConnection_&&(this.isFirstConnection_=!1,jd.logSuccessEvent({userId:this.client_.getUserId(),eventType:Il}),this.addEventInternal(em,"uplink-connection is connected")),this.isReconnecting_&&(jd.logSuccessEvent({userId:this.client_.getUserId(),eventType:Rl}),this.log_.warn("reconnect() uplink reconnect successfully"),this.addEventInternal(sm,"uplink-connection reconnect success"),this.stopReconnection()))}},{key:"updateSSRC",value:function(e){var t=this;try{var n=0;Sv(e).media.forEach((function(e){if(e.type===Jl){var r=e.ssrcs[0];r&&(t.ssrc_.audio=r.id)}else{var i=e.ssrcs[0];switch(n+=1){case 1:i&&(t.ssrc_.video=i.id);break;case 2:i&&(t.ssrc_.small=i.id)}}}))}catch(ky){}}},{key:"getLocalStreamVideoTrackId",value:function(){if(this.peerConnection_){var e=this.peerConnection_.getSenders().filter((function(e){return e.track&&e.track.kind===Xl}));if(e[0])return e[0].track.id}if(this.localStream_){var t=this.localStream_.getVideoTrack();if(t)return t.id}return""}},{key:"getSSRC",value:function(){return this.ssrc_}}]),S}(uA),NA=function(e){u(f,e);var t,n,r,i,a,l,h,p=_(f);function f(e){var t;return s(this,f),(t=p.call(this,e)).remoteStreams_=new Map,t.autoSubscribe=e.autoSubscribe,t.trackState_={audio:e.trackState.audio,video:e.trackState.video,auxiliary:e.trackState.auxiliary},t.ssrc_={audio:0,video:0,auxiliary:0},t.subscribeState_={audio:e.autoSubscribe,video:e.autoSubscribe,auxiliary:e.autoSubscribe},t.pendingSubscription_=[],t.pendingStreams_=[],t.subscriptionTimeout_=-1,t.subscriptionRetryCount_=0,t.isSubscriptionPending_=!1,t.sentSubscriptionAfterConnected_=!1,t.isSDPExchanging_=!1,t.installEvents(),t}return c(f,[{key:"isMainStreamSubscribed",get:function(){return(this.subscribeState_.audio||this.subscribeState_.video)&&(this.trackState_.audio||this.trackState_.video)}},{key:"isAuxStreamSubscribed",get:function(){return this.subscribeState_.auxiliary&&this.trackState_.auxiliary}},{key:"initialize",value:function(){v(d(f.prototype),"initialize",this).call(this),this.peerConnection_.ontrack=this.onTrack.bind(this)}},{key:"close",value:function(){var e=this;v(d(f.prototype),"close",this).call(this),this.trackState_.audio=!1,this.trackState_.video=!1,this.trackState_.auxiliary=!1,this.emitConnectionStateChangedEvent(ol),-1!==this.subscriptionTimeout_&&(clearTimeout(this.subscriptionTimeout_),this.subscriptionTimeout_=-1),this.remoteStreams_.forEach((function(t){var n=t;n.setConnection(null),n.getIsStreamAddedEventEmitted()&&e.emitter_.emit(nE,{stream:n})})),this.remoteStreams_.clear(),this.uninstallEvents()}},{key:"installEvents",value:function(){var e=this;gh.on(Mh,this.onRemoteStreamUpdate,this),this.signalChannel_.on(cg.SUBSCRIBE_CHANGE_RESULT,this.onSubscribeChangeResult,this),this.signalChannel_.on(cg.UNSUBSCRIBE_RESULT,this.onUnsubscribeResult,this),this.emitter_.on(oE,(function(t){t.getCode()===Fd.ICE_TRANSPORT_ERROR&&(e.isFirstConnection_&&(e.isFirstConnection_=!1,jd.logFailedEvent({userId:e.client_.getUserId(),eventType:wl,error:t})),e.isReconnecting_||e.startReconnection())})),this.emitter_.on(sE,(function(t){t.state===cl&&e.isFirstConnection_&&(e.isFirstConnection_=!1,jd.logSuccessEvent({userId:e.client_.getUserId(),eventType:wl}),e.addEventInternal(tm,"downlink-connection is connected"))}))}},{key:"uninstallEvents",value:function(){gh.removeListener(Mh,this.onRemoteStreamUpdate,this),this.signalChannel_.removeListener(cg.SUBSCRIBE_CHANGE_RESULT,this.onSubscribeChangeResult,this),this.signalChannel_.removeListener(cg.UNSUBSCRIBE_RESULT,this.onUnsubscribeResult,this)}},{key:"onRemoteStreamUpdate",value:function(e){if(this.hitTest(e.tinyId)&&e.client===this.client_){this.updateTrackState(e.action,e.kind);var t=e.kind===eu?rl:nl,n=this.remoteStreams_.get(t);if(!n)return;e.action===fu?this.handleRemoteAddTrack(e.kind,n):this.handleRemoteRemoveTrack(e.kind,n)}}},{key:"handleRemoteAddTrack",value:function(e,t){this.log_.info("remote add ".concat(e," track")),e===Jl?t.updateAudioPlayingState(this.subscribeState_.audio):t.updateVideoPlayingState(e===eu?this.subscribeState_.auxiliary:this.subscribeState_.video),t.getIsStreamAddedEventEmitted()?this.emitter_.emit(rE,{stream:t}):(this.emitter_.emit(tE,{stream:t}),this.currentState_===cl&&t.emitConnectionStateChanged({prevState:ol,state:cl}))}},{key:"handleRemoteRemoveTrack",value:function(e,t){t.getIsStreamAddedEventEmitted()&&(this.log_.info("remote remove ".concat(e," track")),e!==eu&&(this.trackState_.audio||this.trackState_.video)||t.isInSubscriptionCycle()?(e===Jl?t.updateAudioPlayingState(!1):t.updateVideoPlayingState(!1),this.emitter_.emit(rE,{stream:t})):(this.log_.info("remote stream ".concat(t.getType()," removed")),this.currentState_===cl&&t.emitConnectionStateChanged({prevState:cl,state:ol}),this.emitter_.emit(nE,{stream:t})))}},{key:"updateTrackState",value:function(e,t){var n=e===fu;switch(t){case Jl:this.trackState_.audio=n;break;case Xl:this.trackState_.video=n;break;case eu:this.trackState_.auxiliary=n}this.log_.info("trackState updated: ".concat(JSON.stringify(this.trackState_)))}},{key:"onTrack",value:function(e){var t=e.streams[0],n=e.track;if(this.log_.info("ontrack() kind: ".concat(n.kind," id: ").concat(n.id," streamId: ").concat(t.id)),"unified-plan"===this.sdpSemantics_){var r=function(e){var t=yv.parse(e),n={audio:[],video:[]};return t.media.forEach((function(e){if(e.ssrcs){var t=e.ssrcs[0].id>>16&255;if(e.type===Jl)n.audio.push(nl);else if(e.type==Xl){var r=t===il?nl:rl;n.video.push(r)}}})),n}(this.peerConnection_.remoteDescription.sdp);if(n.kind===Jl){if(0===r.audio.length||t.id!==nl)return void this.log_.debug("skip this invalid audio track")}else if(-1===r.video.indexOf(t.id))return void this.log_.debug("skip this invalid video track: ".concat(n.id,"  msid: ").concat(t.id))}jd.logEvent({eventType:"ontrack",kind:n.kind});var i=!1,o=this.remoteStreams_.get(t.id),s=t.id===nl?"main":"auxiliary";if($d(o)&&((o=new yA({type:s,userId:this.userId_,client:this.client_})).setConnection(this),this.remoteStreams_.set(t.id,o),i=!0),o.setMediaStream(t),n.kind===Jl?o.updateAudioPlayingState(this.subscribeState_.audio):"main"===s?o.updateVideoPlayingState(this.subscribeState_.video):o.updateVideoPlayingState(this.subscribeState_.auxiliary),("auxiliary"!==s||this.trackState_.auxiliary)&&("main"!==s||this.trackState_.audio||this.trackState_.video)){var a=this.client_.getSubscriptionManager();a&&a.hasAutoRecoveryFlag(this.userId_,s)||(i?this.emitter_.emit(tE,{stream:o}):this.emitter_.emit(rE,{stream:o}))}}},{key:"addRRTRLine",value:function(e){var t=e.split("\r\n"),n=new Map;t.forEach((function(e,r){/^a=rtcp-fb:/.test(e)&&t[r+1]&&!/^a=rtcp-fb:/.test(t[r+1])&&n.set(r+1,e.match(/^a=rtcp-fb:\d+/)[0]+" rrtr")}));for(var r=A(n),i=0;i<r.length;i++){var o=E(r[i],2),s=o[0],a=o[1];t.splice(s+i,0,a)}return t.join("\r\n")}},{key:"addSPSDescription",value:function(e){var t=Sv(e);return t.media.forEach((function(e){e.type===Xl&&e.fmtp.forEach((function(e){e.config+=";sps-pps-idr-in-keyframe=1"}))})),bv(t)}},{key:"removeSDESDescription",value:function(e){var t=["urn:ietf:params:rtp-hdrext:sdes:mid","urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id","urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id"],n=Sv(e);return n.media.forEach((function(e){e.ext=e.ext.filter((function(e){return!t.includes(e.uri)}))})),bv(n)}},{key:"isSubscriptionStateNotChanged",value:function(e,t){return"main"===e.getType()?!$d(t.audio)&&!$d(t.video)&&t.audio===this.subscribeState_.audio&&t.video===this.subscribeState_.video:"auxiliary"===e.getType()?!$d(t.video)&&this.subscribeState_.auxiliary===t.video:void 0}},{key:"subscribe",value:(h=o(regeneratorRuntime.mark((function e(t,n){var r,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.emitEvent,i=void 0===r||r,o=t.getType(),!this.peerConnection_||this.peerConnection_.connectionState!==ll&&this.peerConnection_.connectionState!==ul){e.next=5;break}return e.next=5,this.waitForPeerConnectionConnected();case 5:if(!this.isSubscriptionStateNotChanged(t,n)){e.next=12;break}if(this.peerConnection_){e.next=10;break}return this.initialize(),e.next=10,this.connect();case 10:return i&&this.emitter_.emit(iE,{stream:t,result:!0}),e.abrupt("return",t);case 12:if("main"===o?($d(n.audio)||(this.subscribeState_.audio=n.audio),$d(n.video)||(this.subscribeState_.video=n.video),this.addEventInternal(this.subscribeState_.audio?Fg:jg,this.subscribeState_.audio?"subscribe audio":"unsubscribe audio"),this.addEventInternal(this.subscribeState_.video?Fg:jg,this.subscribeState_.video?"subscribe video":"unsubscribe video")):$d(n.video)||(this.subscribeState_.auxiliary=n.video),this.log_.info("subscribe ".concat(o," stream with options ").concat(JSON.stringify(n)," current state: ").concat(JSON.stringify(this.subscribeState_))),!this.peerConnection_&&!this.isSDPExchanging_){e.next=22;break}return s=Gl,this.isMainStreamSubscribed||this.isAuxStreamSubscribed||(s=jl),e.next=19,this.sendSubscription(t,s);case 19:"main"===o?(t.updateAudioPlayingState(this.subscribeState_.audio),t.updateVideoPlayingState(this.subscribeState_.video)):t.updateVideoPlayingState(this.subscribeState_.auxiliary),e.next=25;break;case 22:return this.initialize(),e.next=25,this.connect();case 25:return i&&this.emitter_.emit(iE,{stream:t,result:!0}),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"unsubscribe",value:(l=o(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("main"!==(n=t.getType())){e.next=9;break}if(this.isMainStreamSubscribed){e.next=5;break}return this.log_.info("main stream already unsubscribed"),e.abrupt("return",t);case 5:this.subscribeState_.audio=!1,this.subscribeState_.video=!1,e.next=13;break;case 9:if(this.isAuxStreamSubscribed){e.next=12;break}return this.log_.info("auxiliary stream already unsubscribed"),e.abrupt("return",t);case 12:this.subscribeState_.auxiliary=!1;case 13:return r=jl,("main"===n&&this.isAuxStreamSubscribed||"auxiliary"===n&&this.isMainStreamSubscribed)&&(r=Gl),this.log_.info("unsubscribe ".concat(n," stream with ").concat(JSON.stringify(this.subscribeState_))),e.next=18,this.sendSubscription(t,r);case 18:return t.updateVideoPlayingState(!1),t.updateAudioPlayingState(!1),r===jl&&((i=t.getMediaStream())&&i.getTracks().forEach((function(e){return i.removeTrack(e)})),this.closePeerConnection(),this.emitConnectionStateChangedEvent(ol)),this.addEventInternal(jg,"unsubscribe audio"),this.addEventInternal(Vg,"unsubscribe video"),e.abrupt("return",t);case 24:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"sendSubscription",value:function(e,t){var n=this;return new Promise((function(r,i){var o={srctinyid:n.tinyId_,userid:n.userId_,audio:n.subscribeState_.audio,bigVideo:n.subscribeState_.video,auxVideo:n.subscribeState_.auxiliary};n.pendingSubscription_.length>0?n.log_.debug("queue the subscription for later handling"):n.doSendSubscription(o,e,t),n.pendingSubscription_.push({stream:e,type:t,data:o,callback:function(e){var o=e.code,s=e.message;if(0===o)r();else{var a=new Vd({code:o,message:uv({key:Rm,data:{type:t,message:s}})});n.log_.error(a),i(a)}}}),e.setInSubscriptionCycle(!0)}))}},{key:"doSendSubscription",value:function(e,t,n){var r=this;if(!this.peerConnection_||this.peerConnection_.connectionState!==fl&&this.peerConnection_.connectionState!==gl)return this.log_.debug("try to send subscription [".concat(n,"] when peeConnection connected")),void(this.sentSubscriptionAfterConnected_=!1);t&&this.pendingStreams_.push(t),this.log_.debug("doSendSubscription() send SUBSCRIBE command with data: ".concat(JSON.stringify(e))),n===Gl?this.signalChannel_.send(yg,e):n===jl&&this.signalChannel_.send(Ag,e),this.isSubscriptionPending_=!0,this.subscriptionTimeout_=setTimeout((function(){if(r.isSubscriptionPending_)if(r.log_.debug("subscription timeout"),r.subscriptionRetryCount_+=1,r.subscriptionRetryCount_<=3){r.log_.debug("resend subscription");var e=r.pendingSubscription_[0].data;r.doSendSubscription(e,t,n)}else r.log_.error(av.SUBSCRIPTION_TIMEOUT),r.pendingSubscription_.shift(),r.pendingStreams_.shift(),r.isSubscriptionPending_=!1,r.subscriptionRetryCount_=0,r.emitter_.emit(oE,new Vd({code:Fd.SUBSCRIPTION_TIMEOUT,message:uv({key:wm})}))}),5e3)}},{key:"onSubscribeChangeResult",value:function(e){var t=e.data.content,n=t.srctinyid;if(this.hitTest(n)){var r=this.pendingSubscription_[0];r&&r.type===Gl&&r.callback({code:t.errCode,message:t.errMsg}),this.sendNextSubscription()}}},{key:"onUnsubscribeResult",value:function(e){var t=e.data.content,n=t.srctinyid;if(this.hitTest(n)){var r=this.pendingSubscription_[0];r&&r.type===jl&&r.callback({code:t.errCode,message:t.errMsg}),this.sendNextSubscription()}}},{key:"connect",value:(a=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.exchangeSDP();case 3:return e.next=5,this.waitForPeerConnectionConnected();case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),this.closePeerConnection(!0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return a.apply(this,arguments)})},{key:"exchangeSDP",value:(i=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isSDPExchanging_=!0,e.next=4,this.createOffer();case 4:return this.log_.info("createOffer success, sending offer to remote server"),t=this.peerConnection_.localDescription,n=t.type,r=t.sdp,i={type:n,sdp:r,userid:this.userId_,srctinyid:this.tinyId_,audio:this.subscribeState_.audio,bigVideo:this.subscribeState_.video,auxVideo:this.subscribeState_.auxiliary},gh.emit(tp,{client:this.client_,connection:this,userId:this.userId_,tinyId:this.tinyId_,role:el,subscribeState:this.subscribeState_,trackState:this.trackState_}),e.next=10,this.signalChannel_.sendWaitForResponse({command:Eg,commandDesc:"exchange sdp",data:i,responseCommand:cg.SUBSCRIBE_RESULT});case 10:if(o=e.sent,this.peerConnection_){e.next=15;break}throw s=this.genRemoteStreamNotExistError(),this.log_.warn(s),s;case 15:return e.next=17,this.onSubscribeResult(o);case 17:this.isSDPExchanging_=!1,e.next=24;break;case 20:throw e.prev=20,e.t0=e.catch(0),this.isSDPExchanging_=!1,e.t0;case 24:case"end":return e.stop()}}),e,this,[[0,20]])}))),function(){return i.apply(this,arguments)})},{key:"createOffer",value:(r=o(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={voiceActivityDetection:!1},"RTCPeerConnection"in window&&"addTransceiver"in window.RTCPeerConnection.prototype&&"unified-plan"===this.sdpSemantics_?(this.peerConnection_.addTransceiver(Jl,{direction:"recvonly"}),this.peerConnection_.addTransceiver(Xl,{direction:"recvonly"}),this.peerConnection_.addTransceiver(Xl,{direction:"recvonly"})):(t.offerToReceiveAudio=!0,t.offerToReceiveVideo=!0),e.next=4,this.peerConnection_.createOffer(t);case 4:return n=e.sent,e.next=7,Bv();case 7:return e.sent.isH264DecodeSupported||(this.log_.warn("remove h264 desc from sdp"),n.sdp=Tv(n.sdp)),n.sdp=this.addRRTRLine(n.sdp),n.sdp=this.addSPSDescription(n.sdp),n.sdp=Cv(n.sdp),"unified-plan"===this.sdpSemantics_&&(n.sdp=this.removeSDESDescription(n.sdp)),e.next=16,this.peerConnection_.setLocalDescription(n);case 16:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"onSubscribeResult",value:(n=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.content||77393!==t.data.content.errCode){e.next=3;break}throw this.log_.error(av.NOT_SUPPORTED_H264DECODE),new Vd({code:Fd.NOT_SUPPORTED_H264,message:uv({key:nv})});case 3:if(n=t.data.content,r=n.type,i=n.sdp,o=n.errCode,s=n.errMsg,e.prev=4,0===o){e.next=7;break}throw new Vd({code:o,message:uv({key:Nm,data:{errMsg:s}})});case 7:return this.log_.debug("accept remote answer: "+i),e.next=10,this.peerConnection_.setRemoteDescription({type:r,sdp:i});case 10:this.updateSSRC(i),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(4),this.log_.error(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,this,[[4,13]])}))),function(e){return n.apply(this,arguments)})},{key:"updateSSRC",value:function(e){var t=this;try{Sv(e).media.forEach((function(e){if(e.type===Jl){var n=e.ssrcs.find((function(e){return e.value.includes(nl)}));n&&(t.ssrc_.audio=n.id)}else{var r=e.ssrcs.find((function(e){return e.value.includes(nl)})),i=e.ssrcs.find((function(e){return e.value.includes(rl)}));r&&(t.ssrc_.video=r.id),i&&(t.ssrc_.auxiliary=i.id)}}))}catch(ky){}}},{key:"sendNextSubscription",value:function(){void 0!==this.pendingSubscription_.shift()&&(this.subscriptionRetryCount_=0,this.isSubscriptionPending_=!1,-1!==this.subscriptionTimeout_&&(clearTimeout(this.subscriptionTimeout_),this.subscriptionTimeout_=-1));var e=this.pendingStreams_.shift();if(e&&(this.log_.debug("mark ".concat(e.getType()," stream exit subscription cycle")),e.setInSubscriptionCycle(!1)),this.pendingSubscription_.length>0){var t=this.pendingSubscription_[0];this.log_.info("schedule a pending subscription"),this.doSendSubscription(t.data,t.stream,t.type)}}},{key:"setRemoteStream",value:function(e,t){this.remoteStreams_.set(e,t)}},{key:"getSubscribeState",value:function(){return this.subscribeState_}},{key:"getTrackState",value:function(){return this.trackState_}},{key:"getSSRC",value:function(){return this.ssrc_}},{key:"getMainStream",value:function(){return this.remoteStreams_.get(nl)}},{key:"getAuxStream",value:function(){return this.remoteStreams_.get(rl)}},{key:"getMainStreamVideoTrackId",value:function(){var e=this.getMainStream();if(e){var t=e.getVideoTrack();if(t)return t.id}return""}},{key:"getAuxStreamVideoTrackId",value:function(){var e=this.getAuxStream();if(e){var t=e.getVideoTrack();if(t)return t.id}return""}},{key:"reconnect",value:(t=o(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===this.reconnectionTimer_){e.next=3;break}return this.log_.warn("reconnect() downlink is reconnecting, ignore current reconnection"),e.abrupt("return");case 3:if(!(this.reconnectionCount_>=30)){e.next=12;break}return this.log_.warn("SDK has tried reconnect downlink [".concat(this.userId_,"] for ").concat(30," times, but all failed, please check your network")),this.stopReconnection(),t=new Vd({code:Fd.DOWNLINK_RECONNECTION_FAILED,message:uv({key:Om})}),jd.logFailedEvent({userId:this.client_.getUserId(),eventType:kl,error:t}),this.addEventInternal(um,"downlink-connection reconnect fail"),this.emitConnectionStateChangedEvent(ol),this.emitter_.emit(oE,t),e.abrupt("return");case 12:if(this.signalChannel_.getCurrentState()===og){e.next=16;break}return this.log_.warn("reconnect() signal channel is not connected, suspend reconnection until signal is connected"),this.signalChannel_.once(eg,this.reconnect,this),e.abrupt("return");case 16:if(this.reconnectionCount_++,this.log_.warn("reconnect() try to reconnect downlink [".concat(this.reconnectionCount_,"/").concat(30,"]")),n=zd(this.reconnectionCount_),this.reconnectionTimer_=setTimeout((function(){r.log_.warn("reconnect() downlink [".concat(r.userId_,"] reconnect timeout(").concat(n/1e3,"s), try again")),r.clearReconnectionTimer(),r.reconnect()}),n),!(this.isSDPExchanging_||this.peerConnection_&&this.peerConnection_.connectionState===ul)){e.next=22;break}return e.abrupt("return");case 22:return e.prev=22,this.closePeerConnection(),this.sentSubscriptionAfterConnected_=!1,this.initialize(),e.next=28,this.connect();case 28:this.stopReconnection(),this.log_.warn("reconnect() downlink reconnect successfully"),jd.logSuccessEvent({userId:this.client_.getUserId(),eventType:kl}),this.addEventInternal(lm,"downlink-connection reconnect success"),this.recoverSubscription(),e.next=37;break;case 35:e.prev=35,e.t0=e.catch(22);case 37:case"end":return e.stop()}}),e,this,[[22,35]])}))),function(){return t.apply(this,arguments)})},{key:"recoverSubscription",value:function(){var e=this,t=this.client_.getSubscriptionManager();t&&A(this.remoteStreams_.values()).forEach((function(n){t.hasAutoRecoveryFlag(e.userId_,n.getType())&&t.recover(n)}))}},{key:"getIsReconnecting",value:function(){return this.isReconnecting_}},{key:"getSubscribedMainStream",value:function(){var e=null;return this.isMainStreamSubscribed&&(e=this.remoteStreams_.get(nl)),e}},{key:"clearReconnectionTimer",value:function(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}},{key:"startReconnection",value:function(){var e=this.client_.getSubscriptionManager();if(e){var t,n=b(this.remoteStreams_.values());try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.getType();("main"===i&&(this.trackState_.audio||this.trackState_.video)||"auxiliary"===i&&this.trackState_.auxiliary)&&e.setAutoRecoveryFlag(this.userId_,r.getType())}}catch(s){n.e(s)}finally{n.f()}}v(d(f.prototype),"startReconnection",this).call(this)}},{key:"getCurrentState",value:function(){return this.currentState_}}]),f}(uA),LA=function(e){return function(t,n,r,i){re(n);var o=ce(t),s=V(o),a=at(o),c=e?a-1:0,l=e?-1:1;if(r<2)for(;;){if(c in s){i=s[c],c+=l;break}if(c+=l,e?c<0:a<=c)throw TypeError("Reduce of empty array with no initial value")}for(;e?c>=0:a>c;c+=l)c in s&&(i=n(i,s[c],c,o));return i}},PA={left:LA(!1),right:LA(!0)}.left,DA=Yi("reduce");It({target:"Array",proto:!0,forced:!DA||!sp&&J>79&&J<83},{reduce:function(e){return PA(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var MA=function(){function e(){s(this,e),this.startTime=0,this.endTime=0,this.start()}return c(e,[{key:"start",value:function(){0===this.startTime&&(this.startTime=nh())}},{key:"stop",value:function(){0===this.endTime&&(this.endTime=nh())}},{key:"getDuration",value:function(){return 0===this.endTime?nh()-this.startTime:this.endTime-this.startTime}}]),e}(),xA=function(){function e(t){s(this,e),this.client_=t.client,this.intervalId_=-1,this.statsCalculator_=t.stats,this.prevStats_=null,this.renderFreezeMap_=new Map,this.remoteStreamMap_=new Map,this.dataFreezeMap_=new Map,this.monitorFreezeData_=new Map}var t,n,r;return c(e,[{key:"installEvents",value:function(){gh.on(Kh,this.handlePlayVideoStart,this),gh.on(qh,this.onVideoTrackMuted,this),gh.on(zh,this.onVideoTrackUnmuted,this),gh.on(jh,this.handleStreamStopped,this),gh.on(Fh,this.handleStreamStopped,this),gh.on(Ph,this.handleVideoPlaying,this)}},{key:"uninstallEvents",value:function(){gh.off(Kh,this.handlePlayVideoStart,this),gh.off(qh,this.onVideoTrackMuted,this),gh.off(zh,this.onVideoTrackUnmuted,this),gh.off(jh,this.handleStreamStopped,this),gh.off(Fh,this.handleStreamStopped,this),gh.off(Ph,this.handleVideoPlaying,this)}},{key:"start",value:function(){var e=this;-1===this.intervalId_&&(this.installEvents(),this.intervalId_=wv.setInterval(o(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.detectFPS();case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])}))),1e3))}},{key:"stop",value:function(){-1!==this.intervalId_&&(this.uninstallEvents(),wv.clearInterval(this.intervalId_),this.intervalId_=-1,this.renderFreezeMap_.clear(),this.dataFreezeMap_.clear(),this.remoteStreamMap_.clear())}},{key:"onVideoTrackMuted",value:function(e){var t=e.stream;if(t.getClient()===this.client_&&t.isRemote()){var n=t.userId_,r=t.type_,i="".concat(n,"_").concat(r),o=this.dataFreezeMap_.get(i),s=new MA;o?o.durationItemList.push(s):this.dataFreezeMap_.set(i,{userId:n,type:r,durationItemList:[s],isFreezing:function(){var e=this.durationItemList[this.durationItemList.length-1];return e&&0===e.endTime}})}}},{key:"onVideoTrackUnmuted",value:function(e){var t=e.stream;if(t.getClient()===this.client_&&t.isRemote()){var n=t.userId_,r=t.type_,i="".concat(n,"_").concat(r);this.stopDataFreeze({key:i,userId:n,type:r})}}},{key:"handleStreamStopped",value:function(e){var t=e.client,n=e.stream;if(t===this.client_){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i);this.stopDataFreeze({key:o,userId:r,type:i})}}},{key:"stopDataFreeze",value:function(e){var t=e.key,n=e.userId,r=e.type,i=this.dataFreezeMap_.get(t);if(i&&i.isFreezing()){var o=i.durationItemList[i.durationItemList.length-1];o.stop();var s=o.getDuration();s>500?(jd.logEvent({eventType:"videoFrozenCount",delta:s}),this.monitorFreezeData_.set(t,{userId:n,type:r,duration:s})):i.durationItemList.pop()}}},{key:"getTotalDuration",value:function(e){return e.reduce((function(e,t){var n=t.getDuration();return e+Math.min(n,5e3)}),0)}},{key:"getStats",value:(r=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,a,c,l,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.client_.getConnections(),n={},r=b(t),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=20;break}if(o=E(i.value,2),s=o[0],(a=o[1]).getPeerConnection()){e.next=9;break}return e.abrupt("continue",18);case 9:return c=a.getSubscribeState(),l=a.getTrackState(),e.next=13,this.statsCalculator_.getReceiverStats(a);case 13:u=e.sent,(d={userId:u.userId,tinyId:s,hasVideo:l.video&&c.video,hasAuxiliary:l.auxiliary&&c.auxiliary,video:{framesDecoded:0},auxiliary:{framesDecoded:0}}).hasVideo&&(d.video.framesDecoded=u.video.framesDecoded),d.hasAuxiliary&&(d.auxiliary.framesDecoded=u.auxiliary.framesDecoded),n[u.userId]=d;case 18:e.next=5;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),r.e(e.t0);case 25:return e.prev=25,r.f(),e.finish(25);case 28:return e.abrupt("return",n);case 29:case"end":return e.stop()}}),e,this,[[3,22,25,28]])}))),function(){return r.apply(this,arguments)})},{key:"detectFPS",value:(n=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getStats();case 2:if(t=e.sent,this.prevStats_){e.next=6;break}return this.prevStats_=t,e.abrupt("return");case 6:e.t0=regeneratorRuntime.keys(t);case 7:if((e.t1=e.t0()).done){e.next=17;break}if(n=e.t1.value,this.prevStats_[n]){e.next=11;break}return e.abrupt("continue",7);case 11:r=t[n].tinyId,i=this.client_.getMutedStates(),t[n].hasVideo&&this.prevStats_[n].hasVideo&&i.has(r)&&!i.get(r).videoMuted&&(o=t[n].video.framesDecoded-this.prevStats_[n].video.framesDecoded,this.handleRenderFreeze({userId:n,type:"main",fps:o})),t[n].hasAuxiliary&&this.prevStats_[n].hasAuxiliary&&(s=t[n].auxiliary.framesDecoded-this.prevStats_[n].auxiliary.framesDecoded,this.handleRenderFreeze({userId:n,type:"auxiliary",fps:s})),e.next=7;break;case 17:this.prevStats_=t;case 18:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"handleRenderFreeze",value:(t=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,a,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.userId,r=t.fps,i=t.type,o="".concat(n,"_").concat(i),s=this.renderFreezeMap_.get(o),r<=2?(a=nh(),s&&!s.isFreeze&&(s.freezeTimeline.push({startTime:a,endTime:void 0}),s.isFreeze=!0),s||this.renderFreezeMap_.set(o,{userId:n,type:i,isFreeze:!0,freezeTimeline:[{startTime:a,endTime:void 0}],renderFreezeTotal:0})):s&&s.isFreeze&&(s.isFreeze=!1,(c=s.freezeTimeline.pop()).endTime=nh(),l=c.endTime-c.startTime,s.freezeTimeline.push(c),s.renderFreezeTotal+=Math.min(5e3,l));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handlePlayVideoStart",value:function(e){var t=e.stream;if(t.getClient()===this.client_&&t.isRemote()&&t.hasVideo()){var n="".concat(t.getUserId(),"_").concat(t.getType());this.remoteStreamMap_.has(n)?this.remoteStreamMap_.get(n).remoteStream=t:this.remoteStreamMap_.set(n,{isPlayingFired:!1,remoteStream:t})}}},{key:"handleVideoPlaying",value:function(e){var t=e.stream;if(t.isRemote()&&t.getClient()===this.client_){var n="".concat(t.getUserId(),"_").concat(t.getType());this.remoteStreamMap_.has(n)&&(this.remoteStreamMap_.get(n).isPlayingFired=!0)}}},{key:"getDataFreezeDuration",value:function(e){var t={dataFreeze:0,count:0},n=this.dataFreezeMap_.get(e);if(n){if(n.isFreezing()){var r=n.durationItemList[n.durationItemList.length-1];r.stop(),r.getDuration()<500&&n.durationItemList.pop()}t.dataFreeze=this.getTotalDuration(n.durationItemList),t.count=n.durationItemList.length}return t}},{key:"getRenderFreezeDuration",value:function(e){var t=this.renderFreezeMap_.get(e),n=0,r=0;if(t)if(t.isFreeze){var i=nh()-t.freezeTimeline[t.freezeTimeline.length-1].startTime;n=t.renderFreezeTotal+Math.min(i,5e3),r=t.freezeTimeline.length}else n=t.renderFreezeTotal;return{renderFreeze:n,count:r}}},{key:"getMonitorFreeze",value:function(){return this.monitorFreezeData_}},{key:"isBlackStream",value:function(e){return!!this.remoteStreamMap_.has(e)&&!this.remoteStreamMap_.get(e).isPlayingFired}},{key:"resetMonitor",value:function(){this.monitorFreezeData_.clear()}}]),e}(),BA=function e(t){s(this,e),this.userId=t.userId,this.tinyId=t.tinyId,this.role=t.role===el?"anchor":"audience"},UA=I((function(e){!function(t){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,r,i,o,s){return n((a=n(n(t,e),n(i,s)))<<(c=o)|a>>>32-c,r);var a,c}function i(e,t,n,i,o,s,a){return r(t&n|~t&i,e,t,o,s,a)}function o(e,t,n,i,o,s,a){return r(t&i|n&~i,e,t,o,s,a)}function s(e,t,n,i,o,s,a){return r(t^n^i,e,t,o,s,a)}function a(e,t,n,i,o,s,a){return r(n^(t|~i),e,t,o,s,a)}function c(e,t){var r,c,l,u,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var h=1732584193,p=-271733879,f=-1732584194,g=271733878;for(r=0;r<e.length;r+=16)c=h,l=p,u=f,d=g,h=i(h,p,f,g,e[r],7,-680876936),g=i(g,h,p,f,e[r+1],12,-389564586),f=i(f,g,h,p,e[r+2],17,606105819),p=i(p,f,g,h,e[r+3],22,-1044525330),h=i(h,p,f,g,e[r+4],7,-176418897),g=i(g,h,p,f,e[r+5],12,1200080426),f=i(f,g,h,p,e[r+6],17,-1473231341),p=i(p,f,g,h,e[r+7],22,-45705983),h=i(h,p,f,g,e[r+8],7,1770035416),g=i(g,h,p,f,e[r+9],12,-1958414417),f=i(f,g,h,p,e[r+10],17,-42063),p=i(p,f,g,h,e[r+11],22,-1990404162),h=i(h,p,f,g,e[r+12],7,1804603682),g=i(g,h,p,f,e[r+13],12,-40341101),f=i(f,g,h,p,e[r+14],17,-1502002290),h=o(h,p=i(p,f,g,h,e[r+15],22,1236535329),f,g,e[r+1],5,-165796510),g=o(g,h,p,f,e[r+6],9,-1069501632),f=o(f,g,h,p,e[r+11],14,643717713),p=o(p,f,g,h,e[r],20,-373897302),h=o(h,p,f,g,e[r+5],5,-701558691),g=o(g,h,p,f,e[r+10],9,38016083),f=o(f,g,h,p,e[r+15],14,-660478335),p=o(p,f,g,h,e[r+4],20,-405537848),h=o(h,p,f,g,e[r+9],5,568446438),g=o(g,h,p,f,e[r+14],9,-1019803690),f=o(f,g,h,p,e[r+3],14,-187363961),p=o(p,f,g,h,e[r+8],20,1163531501),h=o(h,p,f,g,e[r+13],5,-1444681467),g=o(g,h,p,f,e[r+2],9,-51403784),f=o(f,g,h,p,e[r+7],14,1735328473),h=s(h,p=o(p,f,g,h,e[r+12],20,-1926607734),f,g,e[r+5],4,-378558),g=s(g,h,p,f,e[r+8],11,-2022574463),f=s(f,g,h,p,e[r+11],16,1839030562),p=s(p,f,g,h,e[r+14],23,-35309556),h=s(h,p,f,g,e[r+1],4,-1530992060),g=s(g,h,p,f,e[r+4],11,1272893353),f=s(f,g,h,p,e[r+7],16,-155497632),p=s(p,f,g,h,e[r+10],23,-1094730640),h=s(h,p,f,g,e[r+13],4,681279174),g=s(g,h,p,f,e[r],11,-358537222),f=s(f,g,h,p,e[r+3],16,-722521979),p=s(p,f,g,h,e[r+6],23,76029189),h=s(h,p,f,g,e[r+9],4,-640364487),g=s(g,h,p,f,e[r+12],11,-421815835),f=s(f,g,h,p,e[r+15],16,530742520),h=a(h,p=s(p,f,g,h,e[r+2],23,-995338651),f,g,e[r],6,-198630844),g=a(g,h,p,f,e[r+7],10,1126891415),f=a(f,g,h,p,e[r+14],15,-1416354905),p=a(p,f,g,h,e[r+5],21,-57434055),h=a(h,p,f,g,e[r+12],6,1700485571),g=a(g,h,p,f,e[r+3],10,-1894986606),f=a(f,g,h,p,e[r+10],15,-1051523),p=a(p,f,g,h,e[r+1],21,-2054922799),h=a(h,p,f,g,e[r+8],6,1873313359),g=a(g,h,p,f,e[r+15],10,-30611744),f=a(f,g,h,p,e[r+6],15,-1560198380),p=a(p,f,g,h,e[r+13],21,1309151649),h=a(h,p,f,g,e[r+4],6,-145523070),g=a(g,h,p,f,e[r+11],10,-1120210379),f=a(f,g,h,p,e[r+2],15,718787259),p=a(p,f,g,h,e[r+9],21,-343485551),h=n(h,c),p=n(p,l),f=n(f,u),g=n(g,d);return[h,p,f,g]}function l(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function u(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){var t,n,r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function h(e){return unescape(encodeURIComponent(e))}function p(e){return function(e){return l(c(u(e),8*e.length))}(h(e))}function f(e,t){return function(e,t){var n,r,i=u(e),o=[],s=[];for(o[15]=s[15]=void 0,i.length>16&&(i=c(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],s[n]=1549556828^i[n];return r=c(o.concat(u(t)),512+8*t.length),l(c(s.concat(r),640))}(h(e),h(t))}function g(e,t,n){return t?n?f(t,e):d(f(t,e)):n?p(e):d(p(e))}e.exports?e.exports=g:t.md5=g}(T)})),FA=function(){function e(t){s(this,e),this.client_=t.client,this.signalChannel_=t.signalChannel,this.log_=Cf.createLogger({id:"mix|"+this.client_.getUserId(),userId:t.client.getUserId(),sdkAppId:t.client.getSDKAppId()}),this.isMixing_=!1,this.config_=null,this.data_=null,this.remoteStreamMap_=new Map,this.installEvents()}var t,n,r,i;return c(e,[{key:"isPresetLayoutMode",get:function(){return this.config_&&this.config_.mode===Hl.PRESET_LAYOUT}},{key:"installEvents",value:function(){gh.on(Uh,this.onStreamSubscribed,this),gh.on(Fh,this.onStreamUnsubscribed,this),this.client_.on("stream-removed",this.onStreamRemoved,this)}},{key:"uninstallEvents",value:function(){gh.off(Uh,this.onStreamSubscribed,this),gh.off(Fh,this.onStreamUnsubscribed,this),this.client_.off("stream-removed",this.onStreamRemoved,this)}},{key:"stop",value:function(){this.uninstallEvents()}},{key:"onStreamSubscribed",value:function(e){var t=e.client,n=e.stream;t===this.client_&&(this.remoteStreamMap_.set(n.getId(),{remoteStream:n,isUsed:!1}),this.isMixing_&&this.hasAvailablePlaceHolder()&&this.startMixTranscode(this.config_))}},{key:"onStreamUnsubscribed",value:function(e){var t=e.client,n=e.stream;t===this.client_&&this.onStreamRemoved({stream:n})}},{key:"onStreamRemoved",value:function(e){var t=e.stream;if(this.remoteStreamMap_.has(t.getId())){var n=this.remoteStreamMap_.get(t.getId()).isUsed;this.remoteStreamMap_.delete(t.getId()),this.isMixing_&&this.isPresetLayoutMode&&n&&this.startMixTranscode(this.config_)}}},{key:"startMixTranscode",value:(i=o(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.resetIsUsedFlag(),this.config_=t,n=this.getInputParam(t,this.remoteStreamMap_),r=this.getOutputParam(t),i=this.getOutputSessionId({config:t,roomId:this.client_.getRoomId(),userId:this.client_.getUserId()}),!this.isMixing_||!this.data_||i===this.data_.outputSessionId){e.next=10;break}return this.log_.info("startMixTranscode() streamId changed, stop mixing before start"),e.next=10,this.doStopMixTranscode();case 10:return e.next=12,this.doStartMixTranscode({outputSessionId:i,inputParam:n,outputParam:r});case 12:e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(0),this.resetIsUsedFlag(),e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e){return i.apply(this,arguments)})},{key:"doStartMixTranscode",value:(r=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,a,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.outputSessionId,r=t.inputParam,i=t.outputParam,o={roomid:String(this.client_.getRoomId()),sdkAppID:String(this.client_.getSDKAppId()),socketid:this.signalChannel_.getSocketId(),mcuRequestTime:Date.now(),outputSessionId:n,inputParam:r,outputParam:i},this.data_=o,this.log_.info("startMixTranscode: ".concat(JSON.stringify(o))),this.isMixing_=!0,e.prev=5,e.next=8,this.signalChannel_.sendWaitForResponse({command:Ig,data:o,timeout:5e3,responseCommand:cg.START_MIX_TRANSCODE_RES,commandDesc:"startMixTranscode"});case 8:if(s=e.sent,a=s.data.content,c=a.errCode,l=a.errMsg,0===c){e.next=15;break}throw-102083===c&&(l="Please enable relayed-push in ".concat("https://console.cloud.tencent.com/trtc"," and try later, refer to ").concat(Ru,"tutorial-26-advanced-publish-cdn-stream.html")),this.log_.error("startMixTranscode failed, errCode: ".concat(c," errMsg: ").concat(l)),this.isMixing_=!1,new Vd({code:Fd.START_MIX_TRANSCODE_FAILED,message:uv({key:B_,data:{message:l},link:{className:"Client",fnName:"startMixTranscode"}})});case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(5),this.isMixing_=!1,e.t0;case 21:case"end":return e.stop()}}),e,this,[[5,17]])}))),function(e){return r.apply(this,arguments)})},{key:"stopMixTranscode",value:(n=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isMixing_){e.next=2;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:F_})});case 2:return e.next=4,this.doStopMixTranscode();case 4:this.resetIsUsedFlag();case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"doStopMixTranscode",value:(t=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={roomid:String(this.client_.getRoomId()),sdkAppID:String(this.client_.getSDKAppId()),socketid:this.signalChannel_.getSocketId(),userid:this.client_.getUserId(),mcuRequestTime:Date.now(),outPutSessionId:this.data_.outputSessionId,streamType:this.data_.outputParam.streamType},this.log_.info("stopMixTranscode: ".concat(JSON.stringify(t))),e.next=4,this.signalChannel_.sendWaitForResponse({command:Rg,data:t,timeout:5e3,responseCommand:cg.STOP_MIX_TRANSCODE_RES,commandDesc:"stopMixTranscode"});case 4:if(n=e.sent,r=n.data.content,i=r.errCode,o=r.errMsg,0!==i){e.next=10;break}this.isMixing_=!1,e.next=12;break;case 10:throw this.log_.error("stopMixTranscode failed, errCode: ".concat(i," errMsg: ").concat(o)),new Vd({code:Fd.STOP_MIX_TRANSCODE_FAILED,message:uv({key:U_,data:{message:o},link:{className:"Client",fnName:"stopMixTranscode"}})});case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getOutputSessionId",value:function(e){var t=e.config,n=e.userId,r=e.roomId;return Kd(t.streamId)&&t.streamId.length>0?t.streamId:UA("".concat(r,"_").concat(n,"_main"))}},{key:"getInputParam",value:function(e,t){var n=this,r=e.mixUsers.map((function(e){return{userid:e.userId,roomid:String(e.roomId||n.client_.getRoomId()),width:e.width||0,height:e.height||0,locationX:e.locationX||0,locationY:e.locationY||0,zOrder:e.zOrder,streamType:$d(e.streamType)||"auxiliary"!==e.streamType?0:1,inputType:e.pureAudio?Wl.IT_PURE_AUDIO:Wl.IT_AUDIO_VIDEO}}));return e.mode===Hl.PRESET_LAYOUT&&(r.forEach((function(e){if(e.userid===Ql.REMOTE){var n=A(t.values()).find((function(e){return!e.isUsed}));n&&(e.userid=n.remoteStream.getUserId(),e.streamType="auxiliary"===n.remoteStream.getType()?1:0,n.isUsed=!0)}})),r=r.filter((function(e){return e.userid!==Ql.REMOTE}))),r}},{key:"getOutputParam",value:function(e){var t=e.streamId||"";return{streamId:t,streamType:t.length>0?1:0,videoWidth:$d(e.videoWidth)?640:e.videoWidth,videoHeight:$d(e.videoHeight)?480:e.videoHeight,videoBitrate:e.videoBitrate||0,videoFramerate:e.videoFramerate||15,videoGOP:e.videoGOP||2,audioSampleRate:e.audioSampleRate||48e3,audioBitrate:e.audioBitrate||64,audioChannels:e.audioChannels||1,backgroundColor:e.backgroundColor||0,backgroundImage:e.backgroundImage||"",extraInfo:"",VCodec:2,ACodec:0}}},{key:"hasAvailablePlaceHolder",value:function(){return!!this.isPresetLayoutMode&&this.data_.inputParam.length!==this.config_.mixUsers.length}},{key:"resetIsUsedFlag",value:function(){this.remoteStreamMap_.forEach((function(e){return e.isUsed=!1}))}}]),e}(),VA=function(){function e(t){s(this,e),this.client_=t.client,this.signalChannel_=t.signalChannel,this.isPublishingTencentCDN_=!1,this.publishTencentStreamRetryCount_=0,this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1}var t,n,r,i,a;return c(e,[{key:"getIsPublishingTencentCDN",value:function(){return this.isPublishingTencentCDN_}},{key:"getIsPublishingGivenCDN",value:function(){return this.isPublishingGivenCDN_}},{key:"startPublishTencentCDN",value:(a=o(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.streamId)||(r="".concat(this.client_.getRoomId(),"_").concat(this.client_.getUserId(),"_main"),/^[A-Za-z\d_-]*$/.test(r)||(r=UA(r)),n="".concat(this.client_.getSDKAppId(),"_").concat(r)),i={roomid:String(this.client_.getRoomId()),sdkAppID:String(this.client_.getSDKAppId()),requestTime:Date.now(),sessionId:UA("".concat(this.client_.getRoomId(),"_").concat(this.client_.getUserId(),"_main")),streamId:n,streamType:0},this.isPublishingTencentCDN_=!0,this.publishTencentStreamRetryCount_=0,e.next=7,this.doStartPublishTencentCDN(i);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"doStartPublishTencentCDN",value:(i=o(regeneratorRuntime.mark((function e(t){var n,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Cf.info("startPublishTencentCDN: "+JSON.stringify(t)),e.next=4,this.signalChannel_.sendWaitForResponse({command:Sg,data:t,timeout:2e3,responseCommand:cg.START_PUBLISH_TENCENT_CDN_RES,commandDesc:"startPublishCDNStream",retry:2});case 4:if(n=e.sent,r=n.data.content,i=r.errCode,o=r.errMsg,0===i){e.next=11;break}throw this.isPublishingTencentCDN_=!1,-102083===i&&(o="Please enable relayed-push in ".concat("https://console.cloud.tencent.com/trtc"," and try later, refer to ").concat(Ru,"tutorial-26-advanced-publish-cdn-stream.html")),Cf.error("startPublishTencentCDN failed, errCode: ".concat(i,", errMsg: ").concat(o)),new Vd({code:Fd.START_PUBLISH_CDN_FAILED,message:uv({key:u_,data:{message:o},link:{className:"Client",fnName:"startPublishCDNStream"}})});case 11:e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(0),this.isPublishingTencentCDN_=!1,e.t0;case 17:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(e){return i.apply(this,arguments)})},{key:"stopPublishTencentCDN",value:(r=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={roomid:String(this.client_.getRoomId()),sdkAppID:String(this.client_.getSDKAppId()),requestTime:Date.now(),sessionId:UA("".concat(this.client_.getRoomId(),"_").concat(this.client_.getUserId(),"_main"))},Cf.info("stopPublishTencentCDN: "+JSON.stringify(t)),e.next=4,this.signalChannel_.sendWaitForResponse({command:bg,data:t,timeout:5e3,responseCommand:cg.STOP_PUBLISH_TENCENT_CDN_RES,commandDesc:"stopPublishCDNStream"});case 4:if(n=e.sent,r=n.data.content,i=r.errCode,o=r.errMsg,0!==i){e.next=10;break}this.isPublishingTencentCDN_=!1,e.next=17;break;case 10:if(-102069!==i){e.next=15;break}Cf.warn("stopPublishTencentCDN failed, can not stopPublishTencentCDN in auto relayed-push mode"),this.isPublishingTencentCDN_=!1,e.next=17;break;case 15:throw Cf.error("stopPublishTencentCDN failed, errCode: ".concat(i," errMsg: ").concat(o)),new Vd({code:Fd.STOP_PUBLISH_CDN_FAILED,message:uv({key:d_,data:{message:o},link:{className:"Client",fnName:"stopPublishCDNStream"}})});case 17:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"startPublishGivenCDN",value:(n=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={roomid:String(this.client_.getRoomId()),sdkAppID:String(this.client_.getSDKAppId()),socketid:this.signalChannel_.getSocketId(),pushRequestTime:Date.now(),pushAppid:t.appId,pushBizId:t.bizId,pushCdnUrl:t.url,pushStreamType:"main"},Cf.info("startPublishGivenCDN: "+JSON.stringify(n)),this.publishGivenCDNData_=n,this.isPublishingGivenCDN_=!0,e.prev=4,e.next=7,this.signalChannel_.sendWaitForResponse({command:Cg,data:n,timeout:5e3,responseCommand:cg.START_PUBLISH_GIVEN_CDN_RES,commandDesc:"startPublishCDNStream"});case 7:if(r=e.sent,i=r.data.content,o=i.errCode,s=i.errMsg,0===o){e.next=13;break}throw Cf.error("startPublishGivenCDN failed, errCode: ".concat(o,", errMsg: ").concat(s)),this.isPublishingGivenCDN_=!1,new Vd({code:Fd.START_PUBLISH_CDN_FAILED,message:uv({key:u_,data:{message:s},link:{className:"Client",fnName:"startPublishCDNStream"}})});case 13:e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(4),this.isPublishingGivenCDN_=!1,e.t0;case 19:case"end":return e.stop()}}),e,this,[[4,15]])}))),function(e){return n.apply(this,arguments)})},{key:"stopPublishGivenCDN",value:(t=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,a,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.publishGivenCDNData_,n=t.pushAppid,r=t.pushBizId,i=t.pushCdnUrl,o=t.pushStreamType,s={roomid:String(this.client_.getRoomId()),sdkAppID:String(this.client_.getSDKAppId()),socketid:this.signalChannel_.getSocketId(),pushRequestTime:Date.now(),pushAppid:n,pushBizId:r,pushCdnUrl:i,pushStreamType:o},Cf.info("stopPublishGivenCDN: "+JSON.stringify(s)),e.next=5,this.signalChannel_.sendWaitForResponse({command:Tg,data:s,timeout:5e3,responseCommand:cg.STOP_PUBLISH_GIVEN_CDN_RES,commandDesc:"stopPublishCDNStream"});case 5:if(a=e.sent,c=a.data.content,l=c.errCode,u=c.errMsg,0!==l){e.next=11;break}this.isPublishingGivenCDN_=!1,e.next=13;break;case 11:throw Cf.error("stopPublishGivenCDN failed, errCode: ".concat(l," errMsg: ").concat(u)),new Vd({code:Fd.STOP_PUBLISH_CDN_FAILED,message:uv({key:d_,data:{message:u},link:{className:"Client",fnName:"stopPublishCDNStream"}})});case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),jA=function(){function e(t){s(this,e),this.client_=t.client,this.durationMap_=new Map,this.installEvents()}return c(e,[{key:"installEvents",value:function(){gh.on(Uh,this.handleSubscribed,this),gh.on(Mh,this.handleStreamTrackUpdated,this),gh.on(Fh,this.handleStreamStopped,this),gh.on(jh,this.handleStreamStopped,this)}},{key:"uninstallEvents",value:function(){gh.off(Uh,this.handleSubscribed,this),gh.off(Vh,this.handleStreamTrackUpdated,this),gh.off(Fh,this.handleStreamStopped,this),gh.off(jh,this.handleStreamStopped,this)}},{key:"handleSubscribed",value:function(e){var t=e.client,n=e.stream;if(t===this.client_){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i);if(n.hasAudio())if(n.isMainAudioSubscribed){var s=new MA,a=this.durationMap_.get(o);a?this.isRecording(a.audio)||a.audio.push(s):this.durationMap_.set(o,{userId:r,type:i,audio:[s],video:[]})}else this.stopDurationItem(o,Jl);if(n.hasVideo())if("main"===i&&n.isMainVideoSubscribed||"auxiliary"===i&&n.isAuxVideoSubscribed){var c=new MA,l=this.durationMap_.get(o);l?this.isRecording(l.video)||l.video.push(c):this.durationMap_.set(o,{userId:r,type:i,audio:[],video:[c]})}else this.stopDurationItem(o,Xl)}}},{key:"handleStreamStopped",value:function(e){var t=e.client,n=e.stream;if(this.clientHitTest(t)){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i);this.stopDurationItem(o,Jl),this.stopDurationItem(o,Xl)}}},{key:"handleStreamTrackUpdated",value:function(e){var t=e.client,n=e.userId,r=e.tinyId,i=e.kind,o=e.action;if(this.clientHitTest(t)&&this.client_.getConnections().has(r)){var s=i===eu?i:"main",a="".concat(n,"_").concat(s);if(o===fu){var c=this.client_.getConnections().get(r).getSubscribeState();if(i===Jl&&!c.audio||i===Xl&&!c.video||i===eu&&!c.auxiliary)return;var l=new MA,u=this.durationMap_.get(a);u?(i!==Jl||this.isRecording(u.audio)||u.audio.push(l),i===Jl||this.isRecording(u.video)||u.video.push(l)):this.durationMap_.set(a,{userId:n,type:s,audio:i===Jl?[l]:[],video:i===Jl?[]:[l]})}else this.stopDurationItem(a,i===Jl?Jl:Xl)}}},{key:"isRecording",value:function(e){return e.findIndex((function(e){return 0===e.endTime}))>=0}},{key:"stopDurationItem",value:function(e,t){if(this.durationMap_.has(e)){var n=this.durationMap_.get(e)[t].find((function(e){return 0===e.endTime}));n&&n.stop()}}},{key:"clientHitTest",value:function(e){return this.client_===e}},{key:"getDuration",value:function(e,t){return this.durationMap_.has(e)?this.durationMap_.get(e)[t].reduce((function(e,t){return e+t.getDuration()}),0):0}},{key:"getDurationMap",value:function(){return this.durationMap_}},{key:"reset",value:function(){this.durationMap_.clear()}}]),e}(),GA=ii.f,HA=N((function(){return!Object.getOwnPropertyNames(1)}));It({target:"Object",stat:!0,forced:HA},{getOwnPropertyNames:GA});var QA,WA,qA,zA,ZA,$A,KA,YA,JA,XA,ey,ty,ny,ry,iy={unknown:0,wifi:1,"4g":2,"3g":3,"2g":4,wired:5},oy={msg_user_info:0,uint32_video_avg_fps:0,uint32_video_width:0,uint32_video_height:0,uint32_video_avg_bitrate:0,uint32_video_block_time:0,uint32_video_play_time:0,uint32_audio_block_time:0,uint32_audio_play_time:0,uint32_audio_play_db:0,uint32_avg_down_loss:0,uint32_stream_type:0,uint32_video_render_first:0,uint32_video_block_count:0,uint32_audio_block_count:0,uint32_audio_bitrate:0,uint32_video_black_screen_subjective:0,uint32_audio_recv_bitrate:0,uint32_video_external_block_time:0},sy=function e(t){s(this,e),this.str_identifier=String(t.userId),this.uint64_tinyid=Number(t.tinyId),this.uint32_role=t.role},ay=function(){function e(t){var n=this;s(this,e),this.frameWorkType_=t.frameWorkType||30,this.client_=t.client,this.keyPrefix_="key_point",this.storageKey_="".concat(this.keyPrefix_,"_").concat(this.client_.getUserId()),this.log_=Cf.createLogger({id:"kpm|"+this.client_.getUserId(),userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId()}),this.upload=yf({retryFunction:this.upload,settings:{timeout:500,retries:3},onError:function(e,t){return t()}}),Object.getOwnPropertyNames(this.__proto__).forEach((function(e){e.startsWith("handle")&&Zd(n[e])&&(n[e]=function(e){var t=e.fn,n=e.context;return o(regeneratorRuntime.mark((function e(){var r,i,o,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,r=s.length,i=new Array(r),o=0;o<r;o++)i[o]=s[o];return e.next=4,t.apply(n||this,i);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),Cf.error("".concat(t.name,"() error observed ")+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}({fn:n[e],context:n}))})),this.initData(),this.installEvents(),this.intervalId_=wv.setInterval(this.setStorage.bind(this),2e4)}var t,r,i;return c(e,[{key:"initData",value:function(){this.firstPublishedUserList_=[],this.networkQuality_={totalUplinkRTT:0,totalUplinkLoss:0,count:0,totalDownlinkRTTAndLossMap:new Map},this.basicInfo={string_sdk_version:"4.11.12",uint32_os_type:15,string_device_name:"",string_http_user_agent:navigator.userAgent,string_os_version:"",uint32_avg_rtt:0,uint32_avg_up_loss:0,uint32_scene:"live"===this.client_.getMode()?1:0,uint32_joining_duration:0,uint32_networkType:iy[Wd()],uint32_framework:this.frameWorkType_},this.pathJoinRoom_={uint64_start_time:0,uint64_init_audio_start_time:0,uint64_init_audio_end_time:0,uint64_init_camera_start_time:0,uint64_init_camera_end_time:0,uint64_send_request_acc_ip_cmd_start_time:0,uint64_send_request_acc_ip_cmd_end_time:0,uint64_send_request_enter_room_cmd_start_time:0,uint64_send_request_enter_room_cmd_end_time:0,uint64_send_first_video_frame_time:0,uint64_recv_userlist_time:0,uint64_end_time:0,int32_init_audio_ret:0,int32_init_camera_ret:0,int32_send_request_acc_ip_cmd_ret:0,int32_send_request_enter_room_cmd_ret:0,int32_end_ret:0},this.pathLeaveRoom_={uint64_start_time:0,uint64_send_request_exit_room_cmd_start_time:0,uint64_send_request_exit_room_cmd_end_time:0,uint64_end_time:0,int32_send_request_exit_room_cmd_ret:0,int32_end_ret:0},this.pathMainVideoMap_=new Map,this.pathMainAudioMap_=new Map,this.pathAuxiliaryMap_=new Map,this.localStreamStats_={totalVideoBitrate:0,totalVideoFPS:0,totalVideoHeight:0,totalVideoWidth:0,totalAudioLevel:0,videoCount:0,audioLevelCount:0,publishStartTime:0,statsToReport:{uint32_audio_capture_db:0,uint32_video_big_capture_fps:0,uint32_video_big_bitrate:0,uint32_video_big_resolution:0}},this.remoteStreamStatsMap_=new Map}},{key:"installEvents",value:function(){gh.on(mh,this.handleJoinStart,this),gh.on(Rh,this.handleWSStart,this),gh.on(wh,this.handleWSEnd,this),gh.on(_h,this.handleJoinSendCMD,this),gh.on(vh,this.handleJoinReceivedCMDResponce,this),gh.on(Eh,this.handleJoinSuccess,this),gh.on(Ah,this.handleJoinFailed,this),gh.on(Th,this.handleReceivedPublishUserList,this),gh.on(ep,this.handleConnectionStateChanged,this),gh.on(yh,this.handleLeaveStart,this),gh.on(bh,this.handleLeaveSuccess,this),gh.on(Sh,this.handleLeaveSendCMD,this),gh.on(tp,this.handleSendSubscribeCMD,this),gh.on(Ph,this.handleVideoPlaying,this),gh.on(Dh,this.handleAudioPlaying,this),gh.on(np,this.handleNetworkQuality,this),gh.on(Ch,this.handleHeartbeatStats,this),gh.on(xh,this.handleRemoteStreamAdded,this),gh.on(Bh,this.handleRemoteStreamSubscribeStart,this),gh.on(Uh,this.handleRemoteStreamSubscribed,this),gh.on($h,this.handleVideoLoadedData,this),gh.on(Zh,this.handlePlayStream,this),gh.on(Ih,this.handlePublishStart,this),gh.on(Hh,this.handleLocalStreamInitStart,this),gh.on(Qh,this.handleLocalStreamInitEnd,this),gh.on(Wh,this.handleLocalStreamInitFailed,this)}},{key:"uninstallEvents",value:function(){gh.off(mh,this.handleJoinStart,this),gh.off(Rh,this.handleWSStart,this),gh.off(wh,this.handleWSEnd,this),gh.off(_h,this.handleJoinSendCMD,this),gh.off(vh,this.handleJoinReceivedCMDResponce,this),gh.off(Th,this.handleReceivedPublishUserList,this),gh.off(ep,this.handleConnectionStateChanged,this),gh.off(yh,this.handleLeaveStart,this),gh.off(bh,this.handleLeaveSuccess,this),gh.off(Eh,this.handleJoinSuccess,this),gh.off(Ah,this.handleJoinFailed,this),gh.off(Sh,this.handleLeaveSendCMD,this),gh.off(tp,this.handleSendSubscribeCMD,this),gh.off(Ph,this.handleVideoPlaying,this),gh.off(Dh,this.handleAudioPlaying,this),gh.off(np,this.handleNetworkQuality,this),gh.off(Ch,this.handleHeartbeatStats,this),gh.off(xh,this.handleRemoteStreamAdded,this),gh.off(Bh,this.handleRemoteStreamSubscribeStart,this),gh.off(Uh,this.handleRemoteStreamSubscribed,this),gh.off($h,this.handleVideoLoadedData,this),gh.off(Zh,this.handlePlayStream,this),gh.off(Ih,this.handlePublishStart,this),gh.off(Hh,this.handleLocalStreamInitStart,this),gh.off(Qh,this.handleLocalStreamInitEnd,this),gh.off(Wh,this.handleLocalStreamInitFailed,this)}},{key:"handleJoinStart",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_start_time&&(this.pathJoinRoom_.uint64_start_time=Date.now(),this.checkStorage())}},{key:"handleWSStart",value:function(e){var t=e.client;this.hitTest(t)&&0===this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_start_time&&(this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_start_time=Date.now())}},{key:"handleWSEnd",value:function(e){var t=e.client,n=e.error;this.hitTest(t)&&0===this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_end_time&&(this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_end_time=Date.now(),n&&(this.pathJoinRoom_.int32_send_request_acc_ip_cmd_ret=n instanceof Vd?Number(n.getExtraCode()||n.getCode()):Fd.UNKNOWN,this.pathJoinRoom_.int32_end_ret=2))}},{key:"handleJoinSendCMD",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_send_request_enter_room_cmd_start_time&&(this.pathJoinRoom_.uint64_send_request_enter_room_cmd_start_time=Date.now())}},{key:"handleJoinReceivedCMDResponce",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_send_request_enter_room_cmd_end_time&&(this.pathJoinRoom_.uint64_send_request_enter_room_cmd_end_time=Date.now(),this.pathJoinRoom_.int32_send_request_enter_room_cmd_ret=e.code,0!==e.code&&(this.pathJoinRoom_.int32_end_ret=3))}},{key:"handleJoinSuccess",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_end_time&&(this.pathJoinRoom_.uint64_end_time=Date.now(),this.pathJoinRoom_.int32_end_ret=0)}},{key:"handleJoinFailed",value:function(e){var t=e.client;this.hitTest(t)&&(this.pathJoinRoom_.uint64_end_time=Date.now(),0===this.pathJoinRoom_.int32_end_ret&&(this.pathJoinRoom_.int32_end_ret=3),this.prepareReport(),this.report())}},{key:"handleReceivedPublishUserList",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_recv_userlist_time&&(this.pathJoinRoom_.uint64_recv_userlist_time=Date.now(),this.firstPublishedUserList_=e.data.content.userlist)}},{key:"handleConnectionStateChanged",value:function(e){var t=e.client,n=e.state,r=e.connection;if(this.hitTest(t)&&n===cl){this.client_.getUplinkConnection()===r&&0===this.pathJoinRoom_.uint64_send_first_video_frame_time&&this.localStreamStats_.publishStartTime>this.pathJoinRoom_.uint64_end_time&&this.localStreamStats_.publishStartTime-this.pathJoinRoom_.uint64_end_time<=100&&(this.pathJoinRoom_.uint64_send_first_video_frame_time=Date.now());var i=this.pathMainVideoMap_.get("".concat(r.getUserId(),"_").concat("main"));i&&0===i.statsToReport.uint64_pc_connected_time&&(i.statsToReport.uint64_pc_connected_time=Date.now())}}},{key:"handleLeaveStart",value:function(e){this.hitTest(e.client)&&(this.pathLeaveRoom_.uint64_start_time=Date.now())}},{key:"handleLeaveSuccess",value:function(e){this.hitTest(e.client)&&0===this.pathLeaveRoom_.uint64_end_time&&(this.pathLeaveRoom_.uint64_end_time=Date.now(),0!==this.pathJoinRoom_.uint64_end_time?this.basicInfo.uint32_joining_duration=this.pathLeaveRoom_.uint64_end_time-this.pathJoinRoom_.uint64_end_time:this.log_.warn("pathJoinRoom endTime is 0"),this.report())}},{key:"handleLeaveSendCMD",value:function(e){this.hitTest(e.client)&&(this.pathLeaveRoom_.uint64_send_request_exit_room_cmd_start_time=Date.now(),this.pathLeaveRoom_.uint64_send_request_exit_room_cmd_end_time=Date.now())}},{key:"handleRemoteStreamAdded",value:function(e){var t=e.client,r=e.stream;if(this.hitTest(t)){var i=r.getUserId(),o=r.getType(),s="".concat(i,"_").concat(o),a=this.remoteStreamStatsMap_.get(s);if(a)a.stream=r;else{var c={userId:i,totalVideoFPS:0,totalVideoBitrate:0,totalAudioLevel:0,totalAudioBitrate:0,totalLoss:0,audioCount:0,audioLevelCount:0,videoCount:0,networkQualityCount:0,streamAddedTime:Date.now(),subscribeStartTime:0,subscribedTime:0,playStreamTime:0,statsToReport:n({},oy),stream:r};c.statsToReport.msg_user_info=new sy({userId:i,tinyId:r.getTinyId(),role:el}),c.statsToReport.uint32_stream_type="main"===o?2:7,this.remoteStreamStatsMap_.set(s,c)}}}},{key:"handleRemoteStreamSubscribeStart",value:function(e){var t=e.client,n=e.stream;if(this.hitTest(t)){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i),s=this.remoteStreamStatsMap_.get(o);s&&0===s.subscribeStartTime&&(s.subscribeStartTime=Date.now())}}},{key:"handleSendSubscribeCMD",value:function(e){if(this.hitTest(e.client)){var t=new sy(e),n=Date.now(),r="".concat(e.userId,"_").concat("main");e.trackState.video&&e.subscribeState.video&&!this.pathMainVideoMap_.has(r)&&this.pathMainVideoMap_.set(r,{statsToReport:{msg_user_info:t,uint64_start_enter_time:this.pathJoinRoom_.uint64_start_time,uint64_render_first_frame_time:0,uint64_combine_first_frame_time:0,uint64_pc_connected_time:0},userId:e.userId,sendSubscribeCMDTime:n}),e.trackState.audio&&e.subscribeState.audio&&!this.pathMainAudioMap_.has(r)&&this.pathMainAudioMap_.set(r,{statsToReport:{msg_user_info:t,uint64_start_enter_time:this.pathJoinRoom_.uint64_start_time,uint64_play_first_frame_time:0},userId:e.userId,sendSubscribeCMDTime:n});var i="".concat(e.userId,"_").concat("auxiliary");e.trackState.auxiliary&&e.subscribeState.auxiliary&&!this.pathAuxiliaryMap_.has(i)&&this.pathAuxiliaryMap_.set(i,{sendSubscribeCMDTime:n})}}},{key:"handleRemoteStreamSubscribed",value:function(e){var t=e.client,n=e.stream;if(this.hitTest(t)){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i),s=this.remoteStreamStatsMap_.get(o);s&&0===s.subscribedTime&&(s.subscribedTime=Date.now(),s.stream=n)}}},{key:"handlePlayStream",value:function(e){var t=e.stream;if(t.isRemote()&&t.getConnection()&&this.hitTest(t.getConnection().getClient())){var n=t.getConnection().getUserId(),r="".concat(n,"_").concat(t.getType());if(this.remoteStreamStatsMap_.has(r)){var i=this.remoteStreamStatsMap_.get(r);0===i.playStreamTime&&(i.playStreamTime=Date.now())}}}},{key:"handleVideoLoadedData",value:function(e){var t=e.stream;if(t.isRemote()&&t.getConnection()&&this.hitTest(t.getConnection().getClient())){var n=t.getConnection().getUserId(),r="".concat(n,"_").concat(t.getType());if(this.pathMainVideoMap_.has(r)){var i=this.pathMainVideoMap_.get(r);0===i.statsToReport.uint64_combine_first_frame_time&&(i.statsToReport.uint64_combine_first_frame_time=Date.now())}}}},{key:"handleVideoPlaying",value:function(e){var t=e.stream;if(t.isRemote()&&t.getConnection()&&this.hitTest(t.getConnection().getClient())){var n=t.getConnection().getUserId(),r="".concat(n,"_").concat(t.getType()),i=Date.now();if(this.pathMainVideoMap_.has(r)){var o=this.pathMainVideoMap_.get(r);if(0===o.statsToReport.uint64_render_first_frame_time&&(o.statsToReport.uint64_render_first_frame_time=i),this.remoteStreamStatsMap_.has(r)){var s=this.remoteStreamStatsMap_.get(r),a=s.statsToReport,c=s.playStreamTime,l=s.subscribedTime;0===a.uint32_video_render_first&&c-l<=100&&(a.uint32_video_render_first=i-o.sendSubscribeCMDTime)}}if("auxiliary"===t.getType()&&this.pathAuxiliaryMap_.has(r)&&this.remoteStreamStatsMap_.has(r)){var u=this.remoteStreamStatsMap_.get(r),d=u.statsToReport,h=u.playStreamTime,p=u.subscribedTime;0===d.uint32_video_render_first&&h-p<=100&&(d.uint32_video_render_first=i-this.pathAuxiliaryMap_.get(r).sendSubscribeCMDTime)}}}},{key:"handleAudioPlaying",value:function(e){if(e.stream.isRemote()&&e.stream.getConnection()&&this.hitTest(e.stream.getConnection().getClient())){var t=e.stream.getConnection().getUserId(),n="".concat(t,"_").concat(e.stream.getType());if(this.pathMainAudioMap_.has(n)){var r=this.pathMainAudioMap_.get(n);0===r.statsToReport.uint64_play_first_frame_time&&(r.statsToReport.uint64_play_first_frame_time=Date.now())}}}},{key:"handleNetworkQuality",value:function(e){var t=this;this.hitTest(e.client)&&(this.networkQuality_.totalUplinkLoss+=e.uplinkLoss,this.networkQuality_.totalUplinkRTT+=e.uplinkRTT,this.networkQuality_.count++,e.downlinkLossAndRTTMap.forEach((function(e){var n=e.rtt,r=e.loss,i=e.userId,o=t.networkQuality_.totalDownlinkRTTAndLossMap.get(i);o?(o.totalRTT+=n,o.totalLoss+=r,o.count++):t.networkQuality_.totalDownlinkRTTAndLossMap.set(i,{totalRTT:n,totalLoss:r,count:1})})))}},{key:"handleHeartbeatStats",value:function(e){var t=this;if(this.hitTest(e.client)){var n=e.stats,r=n.VideoReportState,i=n.AudioReportState;r.VideoEncState[0]&&(this.localStreamStats_.totalVideoBitrate+=r.uint32_video_snd_br,this.localStreamStats_.totalVideoFPS+=r.VideoEncState[0].uint32_enc_fps,this.localStreamStats_.totalVideoWidth+=r.VideoEncState[0].uint32_enc_width,this.localStreamStats_.totalVideoHeight+=r.VideoEncState[0].uint32_enc_height,this.localStreamStats_.videoCount++),r.VideoDecState.forEach((function(e){var n=0===e.uint32_video_strtype,r=2===e.uint32_video_strtype,i="".concat(e.userId,"_").concat(n?"main":"auxiliary");if(t.remoteStreamStatsMap_.has(i)){var o=t.remoteStreamStatsMap_.get(i);(n&&o.stream.isMainVideoSubscribed||r&&o.stream.isAuxVideoSubscribed)&&(o.totalVideoFPS+=e.uint32_video_recv_fps,o.totalVideoBitrate+=e.uint32_video_recv_br,o.videoCount++,0===o.statsToReport.uint32_video_width&&(o.statsToReport.uint32_video_width=e.uint32_dec_width),0===o.statsToReport.uint32_video_height&&(o.statsToReport.uint32_video_height=e.uint32_dec_height))}})),i&&(i.AudioDecState.forEach((function(e){var n="".concat(e.userId,"_").concat("main");if(t.remoteStreamStatsMap_.has(n)){var r=t.remoteStreamStatsMap_.get(n);r.stream.isMainAudioSubscribed&&(r.totalAudioBitrate+=e.uint32_audio_real_recv_br,r.audioCount++,Math.floor(100*e.audioLevel)>0&&(r.totalAudioLevel+=e.audioLevel,r.audioLevelCount++))}})),Math.floor(100*i.sentAudioLevel)>0&&(this.localStreamStats_.totalAudioLevel+=i.sentAudioLevel,this.localStreamStats_.audioLevelCount++))}}},{key:"handlePublishStart",value:function(e){var t=e.client;this.hitTest(t)&&0===this.localStreamStats_.publishStartTime&&(this.localStreamStats_.publishStartTime=Date.now())}},{key:"handleLocalStreamInitStart",value:function(e){var t=e.audio,n=e.video;t&&0===this.pathJoinRoom_.uint64_init_audio_start_time&&(this.pathJoinRoom_.uint64_init_audio_start_time=Date.now()),n&&0===this.pathJoinRoom_.uint64_init_camera_start_time&&(this.pathJoinRoom_.uint64_init_camera_start_time=Date.now())}},{key:"handleLocalStreamInitEnd",value:function(e){var t=e.audio,n=e.video;t&&0===this.pathJoinRoom_.uint64_init_audio_end_time&&(this.pathJoinRoom_.uint64_init_audio_end_time=Date.now()),n&&0===this.pathJoinRoom_.uint64_init_camera_end_time&&(this.pathJoinRoom_.uint64_init_camera_end_time=Date.now())}},{key:"handleLocalStreamInitFailed",value:function(e){var t=e.audio,n=e.video,r=e.error,i=r instanceof Vd?r.getExtraCode()||r.getCode():{NotFoundError:1,NotAllowedError:2,NotReadableError:3,OverConstrainedError:4,AbortError:5}[r.name]||Fd.UNKNOWN;t&&0===this.pathJoinRoom_.uint64_init_audio_end_time&&(this.pathJoinRoom_.int32_init_audio_ret=i,this.pathJoinRoom_.uint64_init_audio_end_time=Date.now()),n&&0===this.pathJoinRoom_.uint64_init_camera_end_time&&(this.pathJoinRoom_.int32_init_camera_ret=i,this.pathJoinRoom_.uint64_init_camera_end_time=Date.now())}},{key:"hasVideoFlag",value:function(e){return this.firstPublishedUserList_.findIndex((function(t){return t.userid===e&&1&t.flag}))>=0}},{key:"hasAudioFlag",value:function(e){return this.firstPublishedUserList_.findIndex((function(t){return t.userid===e&&8&t.flag}))>=0}},{key:"hasAuxFlag",value:function(e){return this.firstPublishedUserList_.findIndex((function(t){return t.userid===e&&4&t.flag}))>=0}},{key:"hitTest",value:function(e){return e===this.client_}},{key:"checkStorage",value:(i=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=kv.getItem(this.storageKey_))){e.next=6;break}return e.next=5,this.upload(t);case 5:kv.deleteItem(this.storageKey_);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.log_.warn(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return i.apply(this,arguments)})},{key:"setStorage",value:function(){this.prepareReport();var e=this.getReportData();0!==e.msg_path_enter_room.uint64_start_time&&kv.setItem(this.storageKey_,e)}},{key:"prepareReport",value:function(){var e=this;if(this.networkQuality_.count>0&&(this.basicInfo.uint32_avg_rtt=Math.floor(this.networkQuality_.totalUplinkRTT/this.networkQuality_.count),this.basicInfo.uint32_avg_up_loss=Math.floor(this.networkQuality_.totalUplinkLoss/this.networkQuality_.count)),this.localStreamStats_.videoCount>0){this.localStreamStats_.statsToReport.uint32_video_big_capture_fps=Math.floor(this.localStreamStats_.totalVideoFPS/this.localStreamStats_.videoCount),this.localStreamStats_.statsToReport.uint32_video_big_bitrate=Math.floor(this.localStreamStats_.totalVideoBitrate/this.localStreamStats_.videoCount);var t=Math.floor(this.localStreamStats_.totalVideoWidth/this.localStreamStats_.videoCount),n=Math.floor(this.localStreamStats_.totalVideoHeight/this.localStreamStats_.videoCount);this.localStreamStats_.statsToReport.uint32_video_big_resolution=t<<16|n}this.localStreamStats_.audioLevelCount>0&&(this.localStreamStats_.statsToReport.uint32_audio_capture_db=Math.floor(this.localStreamStats_.totalAudioLevel/this.localStreamStats_.audioLevelCount*100)),this.remoteStreamStatsMap_.forEach((function(t,n){var r=t.userId;if(e.networkQuality_.totalDownlinkRTTAndLossMap.has(r)){var i=e.networkQuality_.totalDownlinkRTTAndLossMap.get(r),o=i.totalLoss,s=i.count;t.statsToReport.uint32_avg_down_loss=Math.floor(o/s)}t.videoCount>0&&(t.statsToReport.uint32_video_avg_fps=Math.floor(t.totalVideoFPS/t.videoCount),t.statsToReport.uint32_video_avg_bitrate=Math.floor(t.totalVideoBitrate/t.videoCount)),t.audioCount>0&&(t.statsToReport.uint32_audio_recv_bitrate=t.statsToReport.uint32_audio_bitrate=Math.floor(t.totalAudioBitrate/t.audioCount)),t.audioLevelCount>0&&(t.statsToReport.uint32_audio_play_db=Math.floor(t.totalAudioLevel/t.audioLevelCount*100));var a=e.client_.getCallDurationCalculator();a&&(t.statsToReport.uint32_audio_play_time=a.getDuration(n,Jl),t.statsToReport.uint32_video_play_time=a.getDuration(n,Xl)),t.statsToReport.uint32_video_render_first=Math.min(t.statsToReport.uint32_video_render_first,5e3);var c=e.client_.getBadCaseDetector();if(c){var l=c.getDataFreezeDuration(n),u=l.dataFreeze,d=l.count,h=c.getRenderFreezeDuration(n).renderFreeze;t.statsToReport.uint32_video_block_count=d,t.statsToReport.uint32_video_block_time=Math.min(u,t.statsToReport.uint32_video_play_time),t.statsToReport.uint32_video_external_block_time=Math.min(h,t.statsToReport.uint32_video_play_time),c.isBlackStream(n)&&0===t.statsToReport.uint32_video_avg_fps?t.statsToReport.uint32_video_black_screen_subjective=1:t.statsToReport.uint32_video_black_screen_subjective=0}(0===t.subscribeStartTime||t.subscribeStartTime-t.streamAddedTime>100||0===t.playStreamTime)&&(e.pathMainAudioMap_.delete(n),e.pathMainVideoMap_.delete(n),t.statsToReport.uint32_video_render_first=0)})),this.pathMainAudioMap_.forEach((function(t,n){e.hasAudioFlag(t.userId)?t.statsToReport.uint64_play_first_frame_time-t.statsToReport.uint64_start_enter_time>5e3&&(t.statsToReport.uint64_play_first_frame_time=t.statsToReport.uint64_start_enter_time+5e3):e.pathMainAudioMap_.delete(n)})),this.pathMainVideoMap_.forEach((function(t,n){e.hasVideoFlag(t.userId)?t.statsToReport.uint64_render_first_frame_time-t.statsToReport.uint64_start_enter_time>5e3&&(t.statsToReport.uint64_render_first_frame_time=t.statsToReport.uint64_start_enter_time+5e3):e.pathMainVideoMap_.delete(n)})),this.pathJoinRoom_.uint64_end_time-this.pathJoinRoom_.uint64_start_time>5e3&&(this.pathJoinRoom_.uint64_end_time=this.pathJoinRoom_.uint64_start_time+5e3)}},{key:"getReportData",value:function(){var e=this.client_.getSignalInfo();return{uint32_sdk_app_id:Number(this.client_.getSDKAppId()),msg_user_info:new sy({userId:this.client_.getUserId(),tinyId:this.client_.getTinyId(),role:"anchor"===this.client_.getRole()?el:tl}),msg_basic_info:this.basicInfo,uint32_acc_ip:rh(e.relayIp),uint32_client_ip:rh(e.localIp,"small"),uint32_acc_port:0,uint64_timestamp:Date.now(),uint32_seq:Math.floor(Math.random()*Math.pow(2,31)),msg_path_enter_room:this.pathJoinRoom_,msg_path_exit_room:this.pathLeaveRoom_,msg_path_recv_video:A(this.pathMainVideoMap_.values()).map((function(e){return e.statsToReport})),msg_quality_statistics:A(this.remoteStreamStatsMap_.values()).map((function(e){return e.statsToReport})),str_room_name:String(this.client_.getRoomId()),msg_path_recv_audio:A(this.pathMainAudioMap_.values()).map((function(e){return e.statsToReport})),uint32_info_client_ip:rh(e.localIp,"small"),error_code:[],msg_local_statistics:this.localStreamStats_.statsToReport}}},{key:"report",value:(r=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.getReportData(),e.next=4,this.upload(t);case 4:kv.deleteItem(this.storageKey_),this.initData(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.log_.warn(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return r.apply(this,arguments)})},{key:"upload",value:(t=o(regeneratorRuntime.mark((function e(t){var n,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Uc&&0!==t.msg_path_enter_room.uint64_start_time){e.next=2;break}return e.abrupt("return");case 2:return n=Math.floor(Math.random()*Math.pow(2,31)),r=Number(this.client_.getSDKAppId()),i="".concat("https://yun.tim.qq.com","/v5/AVQualityReportSvc/C2S?random=").concat(n,"&sdkappid=").concat(r,"&cmdtype=jssdk_new_endreport"),e.next=7,Ud.post(i,JSON.stringify(t));case 7:if("ok"===(o=e.sent).data){e.next=10;break}throw"key point upload failed: ".concat(o.data);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function cy(){return function(e,t,n){var r=n.value,i=new Map;return n.value=o(regeneratorRuntime.mark((function e(){var n,o,s,a,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.get(this)){e.next=2;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:vm,data:{name:t}})});case 2:for(e.prev=2,i.set(this,!0),n=c.length,o=new Array(n),s=0;s<n;s++)o[s]=c[s];return e.next=7,r.apply(this,o);case 7:return a=e.sent,i.set(this,!1),e.abrupt("return",a);case 12:throw e.prev=12,e.t0=e.catch(2),i.set(this,!1),e.t0;case 16:case"end":return e.stop()}}),e,this,[[2,12]])}))),n}}var ly=(QA=cy(),WA=_A(gA.CLIENT.join),qA=cy(),zA=cy(),ZA=_A(gA.CLIENT.publish),$A=cy(),KA=_A(gA.CLIENT.unpublish),YA=_A.apply(void 0,A(gA.CLIENT.subscribe)),JA=_A(gA.CLIENT.unsubscribe),XA=cy(),ey=_A(gA.CLIENT.switchRole),ty=_A(gA.CLIENT.startPublishCDNStream),ny=_A(gA.CLIENT.startMixTranscode),C((ry=function(){function e(t){var n,r=this;if(s(this,e),this.name_=Su,this.mode_=t.mode,this.sdpSemantics_="plan-b",$d(t.sdpSemantics)?function(){if(!Qv())return!1;if($d(window.RTCRtpTransceiver))return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var e=new RTCPeerConnection,t=!1;try{e.addTransceiver(Jl),t=!0}catch(ky){}return e.close(),t}()&&(this.sdpSemantics_="unified-plan"):this.sdpSemantics_=t.sdpSemantics,this.sdkAppId_=t.sdkAppId,this.userId_=t.userId,this.log_=Cf.createLogger({id:"c".concat(t.seq,"|").concat(this.userId_),userId:this.userId_,sdkAppId:this.sdkAppId_}),this.userSig_=t.userSig,this.roomId_=0,this.useStringRoomId_=t.useStringRoomId||!1,this.recordId_=null,this.pureAudioPushMode_=null,this.version_=t.version,this.log_.info("using sdpSemantics: "+this.sdpSemantics_),!$d(t.recordId)){if(!Number.isInteger(Number(t.recordId)))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Mm})});this.recordId_=t.recordId}this.signalChannel_=null,this.isScreenShareOnly_=0,$d(t.isScreenShareOnly)||(this.isScreenShareOnly_=t.isScreenShareOnly?1:0),this.role_="anchor",this.privateMapKey_="",this.tinyId_=0,this.env_="",this.proxy_=null,this.connections_=new Map,this.mutedStates_=new Map,this.userMap_=new Map,this.syncUserListInterval_=-1,this.localStream_=null,this.uplinkConnection_=null,this.emitter_=new fh,this.signalInfo_={},this.isSignalReady_=!1,this.isJoined_=!1,this.heartbeat_=-1,this.lastHeartBeatTime_=-1,this.stats_=new RE(this),this.joinTimeout_=-1,this.networkQuality_=null,this.badCaseDetector_=null,this.autoSubscribe_=!!$d(t.autoSubscribe)||t.autoSubscribe,this.startJoinTimestamp_=0,this.joinedTimestamp_=0,this.joinOptions_={},this.basis_={browser:jc().name+"/"+jc().version,os:Kv(),displayResolution:Yv(),isScreenShareSupported:Vv(),isWebRTCSupported:Lv(),isGetUserMediaSupported:Jv(),isWebAudioSupported:Xv(),isWebSocketsSupported:"WebSocket"in window&&2===window.WebSocket.CLOSING,isWebCodecSupported:(n={AudioDecoder:!1,AudioEncoder:!1,VideoDecoder:!1,VideoEncoder:!1,ImageDecoder:!1},$d(window.AudioDecoder)||(n.AudioDecoder=!0),$d(window.AudioEncoder)||(n.AudioEncoder=!0),$d(window.VideoDecoder)||(n.VideoDecoder=!0),$d(window.VideoEncoder)||(n.VideoEncoder=!0),$d(window.ImageDecoder)||(n.ImageDecoder=!0),n),isMediaSessionSupported:"mediaSession"in navigator&&!$d(navigator.mediaSession.setActionHandler),isWebTransportSupported:!$d(window.WebTransport)},this.initBussinessInfo_(t),this.publishedCDN_=!1,this.publishCDNData_=null,this.mixedMCU_=!1,this.mixTranscodeData_=null,this.checkSystemResult_=null,this.enableAudioVolumeEvaluation_=!1,this.audioVolumeIntervalId_=null,this.mixTranscodeManager_=null,this.publishCDNManager_=null,this.keyPointManager_=new ay({client:this,frameWorkType:t.frameWorkType}),this.getUserList=yf({retryFunction:this.getUserList,settings:{retries:3},onError:function(e,t){return t()},onRetrying:function(e){r.log_.info("retrying to get user list [".concat(e,"/3]"))}}),this.isPublishing_=!1,this.isEnableSmallStream_=!1,this.smallStreamConfig_={bitrate:100,frameRate:15,height:120,width:160},this.turnServers_=[],this.iceTransportPolicy_=t.iceTransportPolicy,this.schedule_={domains:null,iceServers:null,iceTransportPolicy:null},this.enableAutoPlayDialog_=!!$d(t.enableAutoPlayDialog)||t.enableAutoPlayDialog}var t,r,i,a,l,u,d,h,p,f,g,m,_,v,y,S,C,T,I,R,w,k,O,N;return c(e,[{key:"initBussinessInfo_",value:function(e){this.bussinessInfo_=e.bussinessInfo;var t={};if(Kd(e.bussinessInfo)&&(t=JSON.parse(e.bussinessInfo)),!$d(e.pureAudioPushMode)){if(!Number.isInteger(Number(e.pureAudioPushMode)))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:xm})});this.pureAudioPushMode_=e.pureAudioPushMode,t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.pure_audio_push_mod=this.pureAudioPushMode_}if(!$d(e.streamId)){if(!(Kd(e.streamId)&&String(e.streamId)&&String(e.streamId).length<=64))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Bm})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_streamid_main=e.streamId}if(!$d(e.userDefineRecordId)){if(null===e.userDefineRecordId.match(/^[A-Za-z0-9_-]{1,64}$/gi))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Um})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_record_id=e.userDefineRecordId}if(!$d(e.userDefinePushArgs)){if(!(Kd(e.userDefinePushArgs)&&String(e.userDefinePushArgs)&&String(e.userDefinePushArgs).length<=256))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Fm})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_push_args=e.userDefinePushArgs}fm(t)||(this.bussinessInfo_=JSON.stringify(t))}},{key:"setProxyServer",value:function(e){if(this.log_.info("set proxy server: ".concat(JSON.stringify(e))),Kd(e)){if(!e.startsWith("wss://"))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:Vm})});this.proxy_=e}else if(qd(e)){var t=e.websocketProxy,n=e.loggerProxy;t&&(this.proxy_=t),n&&Yc(n)}}},{key:"schedule",value:(N=o(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ih({userId:this.userId_,sdkAppId:this.sdkAppId_,roomId:t,useStringRoomId:this.useStringRoomId_,version:this.version_,userSig:this.userSig_});case 2:(r=e.sent)&&(this.log_.info("schedule: ".concat(JSON.stringify(r))),this.schedule_=n(n({},this.schedule_),r),gh.emit(Oh,this.schedule_));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"getSignalChannelUrl",value:function(){var e={mainUrl:Hc,backupUrl:Qc},t=Gd();return t?e.mainUrl=e.backupUrl="wss://".concat(t,".rtc.qq.com"):this.proxy_?e.mainUrl=e.backupUrl=this.proxy_:Array.isArray(this.schedule_.domains)&&this.schedule_.domains.length>0&&(e.mainUrl=e.backupUrl="wss://".concat(this.schedule_.domains[0]),this.schedule_.domains[1]&&(e.backupUrl="wss://".concat(this.schedule_.domains[1]))),e}},{key:"getUserId",value:function(){return this.userId_}},{key:"getUserSig",value:function(){return this.userSig_}},{key:"getRole",value:function(){return this.role_}},{key:"getSignalInfo",value:function(){return this.signalInfo_}},{key:"getRoomId",value:function(){return this.roomId_}},{key:"getSDKAppId",value:function(){return this.sdkAppId_}},{key:"getTinyId",value:function(){return this.tinyId_}},{key:"setTurnServer",value:function(e){this.log_.info("set turn server: "+JSON.stringify(e));var t=[];Array.isArray(e)?e.forEach((function(e){return t.push(th(e))})):qd(e)&&t.push(th(e)),this.turnServers_=t}},{key:"getIceTransportPolicy",value:function(){return this.iceTransportPolicy_||this.schedule_.iceTransportPolicy||"all"}},{key:"initialize",value:function(){var e=this;return new Promise((function(t,n){e.log_.info("setup signal channel");var r=e.getSignalChannelUrl(),i=r.mainUrl,o=r.backupUrl;e.signalChannel_=new dv({sdkAppId:e.sdkAppId_,userId:e.userId_,userSig:e.userSig_,url:i,backupUrl:o,version:e.version_,client:e}),e.networkQuality_||(e.networkQuality_=new wE({connections:e.connections_,signalChannel:e.signalChannel_,userId:e.userId_,client:e}),e.networkQuality_.on(EE,(function(t){e.emitter_.emit(EE,t)}))),e.deviceDetector_||(e.deviceDetector_=new kE({client:e})),e.subscriptionManager_||(e.subscriptionManager_=new SA({client:e})),e.badCaseDetector_||(e.badCaseDetector_=new xA({client:e,stats:e.stats_})),e.callDurationCalculator_||(e.callDurationCalculator_=new jA({client:e})),e.mixTranscodeManager_||(e.mixTranscodeManager_=new FA({client:e,signalChannel:e.signalChannel_})),e.publishCDNManager_||(e.publishCDNManager_=new VA({client:e,signalChannel:e.signalChannel_})),e.signalChannel_.on(Xf,(function(t){switch(e.log_.info("SignalChannel state changed from ".concat(t.prevState," to ").concat(t.state)),t.state){case og:t.prevState===ig?(e.log_.warn("signal channel reconnect successfully"),e.syncUserList(),jd.logSuccessEvent({userId:e.userId_,eventType:Ml})):t.prevState===rg&&jd.logSuccessEvent({userId:e.userId_,eventType:Dl})}e.emitter_.emit(dE,t)})),e.signalChannel_.on(tg,(function(t){e.isSignalReady_?(e.closeUplink(),e.closeConnections(),e.emitter_.emit(yE,t)):(gh.emit(wh,{client:e,error:t}),n(t))})),e.signalChannel_.on(cg.CHANNEL_SETUP_SUCCESS,(function(n){e.signalInfo_=n.signalInfo,e.tinyId_=e.signalInfo_.tinyId,e.isSignalReady_||(e.isSignalReady_=!0,gh.emit(wh,{client:e}),t())})),e.signalChannel_.on(cg.PEER_JOIN,e.onPeerJoin,e),e.signalChannel_.on(cg.PEER_LEAVE,e.onPeerLeave,e),e.signalChannel_.on(cg.STREAM_ADDED,(function(t){e.onRemoteStreamAdded(t.data)})),e.signalChannel_.on(cg.STREAM_REMOVED,(function(t){e.onRemoteStreamRemoved(t.data)})),e.signalChannel_.on(cg.UPDATE_REMOTE_MUTE_STAT,(function(t){gh.emit(Th,{client:e,data:t.data}),e.onPublishedUserList(t.data),e.onUpdateRemoteMuteStat(t.data)})),e.signalChannel_.on(cg.CLINET_BANNED,(function(t){var n=t.data.content,r=n.type;"banned"===n.type?r="you got banned by account admin":"kick"===n.type?r="duplicated userId joining the room":"user_time_out"===n.type&&e.log_.warn("last heart beat time: ".concat(e.lastHeartBeatTime_," interval: ").concat(Date.now()-e.lastHeartBeatTime_)),jd.uploadEvent({log:"stat-banned:".concat(n.type),userId:e.userId_}),e.log_.error("user was banned because of [".concat(n.type,"]")),e.reset(),e.onClientBanned(r)})),e.signalChannel_.on(cg.REQUEST_REBUILD_SESSION,(function(t){e.signalInfo_=t.signalInfo;var n=[];e.connections_&&n.push(0);var r,i=[],o=b(e.connections_);try{for(o.s();!(r=o.n()).done;){var s=E(r.value,2),a=s[0],c=s[1];n.push(a);var l=c.getPeerConnection();if(l){var u=l.remoteDescription;u&&i.push(u.sdp)}}}catch(p){o.e(p)}finally{o.f()}var d={socketid:e.signalInfo_.socketId,tinyid:e.tinyId_,appid:e.sdkAppId_,openid:e.userId_,sessionid:String(e.roomId_),sids:n,relayInfo:e.signalInfo_.relayInnerIp,remotesdp:i,useStrRoomid:!!e.useStringRoomId_&&1};e.log_.debug("reconnect - rebuild session with data: ".concat(JSON.stringify(d))),e.signalChannel_.send(pg,d)})),e.signalChannel_.on(cg.CLIENT_REJOIN,(function(){e.reJoin()})),gh.emit(Rh,{client:e}),e.signalChannel_.connect()}))}},{key:"join",value:(O=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isJoined_){e.next=2;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:jm})});case 2:return e.next=4,Uv();case 4:if(this.checkSystemResult_=e.sent,(n=Gd())||(n=zc,this.proxy_&&(this.proxy_.startsWith(Wc)?n=Zc:this.proxy_.startsWith(qc)&&(n=$c))),this.env_=n,jd.setConfig({env:n,sdkAppId:this.sdkAppId_,userId:this.userId_}),this.uploadTrtcStats(),r=this.checkSystemResult_.detail,i=r.isH264EncodeSupported,o=r.isVp8EncodeSupported,Lv()&&(i||o)){e.next=13;break}throw new Vd({code:Fd.NOT_SUPPORTED,message:uv({key:X_})});case 13:if(this.joinOptions_=t,this.startJoinTimestamp_=nh(),gh.emit(mh,{client:this}),hm(this.userId_,{eventId:Kg,eventDesc:"joining room",timestamp:Es(),userId:this.userId_,tinyId:this.tinyId_}),e.prev=17,this.proxy_||this.schedule_.domains){e.next=21;break}return e.next=21,this.schedule(t.roomId);case 21:return e.next=23,this.initialize(t);case 23:return e.next=25,this.doJoin(t);case 25:gh.emit(Eh,{client:this}),this.joinedTimestamp_=nh(),s=this.joinedTimestamp_-this.startJoinTimestamp_,jd.logSuccessEvent({userId:this.userId_,eventType:_l,delta:s}),jd.logSuccessEvent({userId:this.userId_,eventType:ml}),jd.uploadEvent({log:"stat-autoplay-dialog:".concat(this.enableAutoPlayDialog_),userId:this.userId_}),e.next=39;break;case 33:throw e.prev=33,e.t0=e.catch(17),gh.emit(Ah,{client:this,error:e.t0}),jd.logFailedEvent({userId:this.userId_,eventType:ml,error:e.t0}),this.reset(),e.t0;case 39:case"end":return e.stop()}}),e,this,[[17,33]])}))),function(e){return O.apply(this,arguments)})},{key:"uploadTrtcStats",value:(k=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,a,c,l,u,d,h,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wy.getMicrophones();case 3:r=e.sent,t=r&&r.length,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,e.next=12,wy.getCameras();case 12:i=e.sent,n=i&&i.length,e.next=18;break;case 16:e.prev=16,e.t1=e.catch(9);case 18:o={microphone:t,camera:n},s=this.checkSystemResult_.detail,a=s.isH264EncodeSupported,c=s.isVp8EncodeSupported,l=s.isH264DecodeSupported,u=s.isVp8DecodeSupported,d={webRTC:this.basis_.isWebRTCSupported,getUserMedia:this.basis_.isGetUserMediaSupported,webSocket:this.basis_.isWebSocketsSupported,screenShare:this.basis_.isScreenShareSupported,webAudio:this.basis_.isWebAudioSupported,h264Encode:a,h264Decode:l,vp8Encode:c,vp8Decode:u},h={browser:this.basis_.browser,os:this.basis_.os,trtc:d,devices:o},p={isWebCodecSupported:this.basis_.isWebCodecSupported,isMediaSessionSupported:this.basis_.isMediaSessionSupported,isWebTransportSupported:this.basis_.isWebTransportSupported},jd.uploadEvent({log:"trtcstats-"+JSON.stringify(h),userId:this.userId_}),this.log_.info("TrtcStats-"+JSON.stringify(h)),jd.uploadEvent({log:"trtcadvancedstats-"+JSON.stringify(p),userId:this.userId_});case 26:case"end":return e.stop()}}),e,this,[[0,7],[9,16]])}))),function(){return k.apply(this,arguments)})},{key:"getVersion",value:function(){var e=this.version_.split(".");return 1e3*parseInt(e[0])+100*parseInt(e[1])+parseInt(e[2])}},{key:"doJoin",value:function(e){var t=this;return new Promise((function(n,r){if(!t.isSignalReady_)throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:Qm})});t.roomId_=e.roomId,$d(e.role)||(t.role_=e.role);var i="";$d(e.privateMapKey)||(i=e.privateMapKey),t.privateMapKey_=i,t.log_.info("Join() => joining room: ".concat(e.roomId," useStringRoomId: ").concat(t.useStringRoomId_," mode: ").concat(t.mode_," role: ").concat(t.role_));var o=t.signalInfo_,s={openid:o.openId,tinyid:o.tinyId,peerconnectionport:"",useStrRoomid:!!t.useStringRoomId_&&1,roomid:String(e.roomId),sdkAppID:String(t.sdkAppId_),socketid:o.socketId,userSig:t.userSig_,privMapEncrypt:i,privMap:"",relayip:o.relayInnerIp,dataport:o.dataPort,stunport:o.stunPort,checkSigSeq:o.checkSigSeq,pstnBizType:0,pstnPhoneNumber:null,recordId:t.recordId_,role:"user",jsSdkVersion:String(t.getVersion()),sdpSemantics:t.sdpSemantics_,browserVersion:xc,closeLocalMedia:!0,trtcscene:"live"===t.mode_?Xc:Jc,trtcrole:"anchor"===t.role_?el:tl,bussinessInfo:t.bussinessInfo_,isAuxUser:t.isScreenShareOnly_,autoSubscribe:t.autoSubscribe_};t.joinTimeout_=setTimeout((function(){t.log_.error("join room timeout observed"),r(new Vd({code:Fd.JOIN_ROOM_FAILED,message:uv({key:Wm})}))}),5e3),gh.emit(_h,{client:t});var a={AbilityOption:{GeneralLimit:{CPULimit:{uint32_CPU_num:String(navigator.hardwareConcurrency||0),str_CPU_name:String(navigator.platform),uint32_CPU_maxfreq:String(0),model:"",uint32_total_memory:String(0)},uint32_terminal_type:String(ja?4:Ua?2:xa?3:fc?12:pc?5:gc?13:1),uint32_device_type:String(0),str_os_verion:ja?"Android":Ua?"iPhone":xa?"iPad":fc?"Mac":pc?"Windows":gc?"Linux":"unknown",uint32_link_type:String(1),str_client_version:"4.11.12",uint32_net_type:String(mu[Wd()]),ua:navigator.userAgent,version:""}}},c=t.getSystemResult().detail,l=c.isH264EncodeSupported,u=c.isVp8EncodeSupported,d="";l?d="H264":u&&(d="VP8");var h={EncVideoCodec:d,EncVideoWidth:0,EncVideoHeight:0,EncVideoBr:"0",EncVideoFps:0,EncAudioCodec:"opus",EncAudioFS:0,EncAudioCh:0,EncAudioBr:"0"};a.AbilityOption.AVLimit=h,t.signalChannel_.sendWithReport(ug,s,a),t.signalChannel_.once(cg.JOIN_ROOM_RESULT,(function(e){clearTimeout(t.joinTimeout_),t.joinTimeout_=-1;var i=e.data.content.ret;gh.emit(vh,{client:t,code:i}),i?(t.log_.error("Join room failed result: "+i+" error: "+e.data.content.error),r(new Vd({code:Fd.JOIN_ROOM_FAILED,extraCode:i,message:uv({key:qm,data:{error:e.data.content.error}})}))):(t.isJoined_=!0,t.log_.info("Join room success, start heartbeat"),t.startHeartbeat(),t.badCaseDetector_&&t.badCaseDetector_.start(),t.syncUserList(),t.startSyncUserListInterval(),n())}))}))}},{key:"connectSignalBeforeReJoin",value:function(){var e=this;return new Promise((function(t,n){e.log_.warn("connectSignalBeforeReJoin() try to connect signal before reJoin"),e.isSignalReady_=!1,e.signalChannel_.close(),e.signalChannel_.once(cg.CHANNEL_SETUP_SUCCESS,(function(n){e.log_.warn("connectSignalBeforeReJoin() signal setup successfully"),t()})),e.signalChannel_.once(tg,(function(t){e.log_.warn("connectSignalBeforeReJoin() signal setup failed"),n(t)})),e.signalChannel_.connect()}))}},{key:"reJoin",value:(w=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isJoined_){e.next=3;break}return this.log_.warn("reJoin() you haven't join room yet, abort reJoin"),e.abrupt("return");case 3:return this.isJoined_=!1,e.prev=4,this.log_.warn("reJoin() try to reJoin room: ".concat(this.joinOptions_.roomId)),this.subscriptionManager_&&this.subscriptionManager_.markAllStream(),e.next=9,this.connectSignalBeforeReJoin();case 9:return e.next=11,this.doJoin(this.joinOptions_);case 11:if(this.log_.warn("reJoin() reJoin successfully"),jd.logSuccessEvent({userId:this.userId_,eventType:vl}),this.checkConnectionsToReconnect(),e.prev=14,!this.uplinkConnection_||!this.localStream_||this.uplinkConnection_.getIsReconnecting()){e.next=18;break}return e.next=18,this.republish();case 18:e.next=22;break;case 20:e.prev=20,e.t0=e.catch(14);case 22:e.next=29;break;case 24:e.prev=24,e.t1=e.catch(4),this.log_.warn("reJoin() reJoin failed"+e.t1),jd.logFailedEvent({userId:this.userId_,eventType:vl,error:e.t1}),this.emitter_.emit(yE,new Vd({code:Fd.JOIN_ROOM_FAILED,message:uv({key:zm,data:{roomId:this.joinOptions_.roomId}})}));case 29:case"end":return e.stop()}}),e,this,[[4,24],[14,20]])}))),function(){return w.apply(this,arguments)})},{key:"republish",value:(R=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.log_.warn("republish() try to re-publish localStream"),t=this.localStream_,e.next=5,this.doUnpublish(t);case 5:return e.next=7,this.publish(t);case 7:this.log_.warn("republish() re-publish localStream successfully"),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),this.log_.warn("republish() re-publish localStream failed "+e.t0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return R.apply(this,arguments)})},{key:"leave",value:(I=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gh.emit(yh,{client:this}),hm(this.userId_,{eventId:Yg,eventDesc:"leaving room",timestamp:Es(),userId:this.userId_,tinyId:this.tinyId_}),e.prev=2,e.next=5,this.doHeartbeat();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:this.doLeave(),gh.emit(bh,{client:this}),jd.logSuccessEvent({userId:this.userId_,eventType:El}),t=Math.floor((nh()-this.joinedTimestamp_)/1e3),jd.logSuccessEvent({userId:this.userId_,eventType:Al,delta:t});case 14:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(){return I.apply(this,arguments)})},{key:"doLeave",value:function(){this.isJoined_&&(gh.emit(Sh,{client:this}),this.log_.info("leave() => leaving room"),this.signalChannel_.send(dg),this.reset())}},{key:"clearNetworkQuality",value:function(){this.networkQuality_&&(this.networkQuality_.stop(),this.networkQuality_=null)}},{key:"closeConnections",value:function(){var e=this;this.connections_.forEach((function(t){e.closeDownLink(t.getTinyId())}))}},{key:"destroy",value:function(){if(this.isJoined_)throw this.log_.warn("please call leave() before destroy() client"),new Vd({code:Fd.INVALID_OPERATION,message:uv({key:Zm})});this.log_.info("destroying SignalChannel"),this.signalChannel_&&(this.signalChannel_.close(),this.signalChannel_=null)}},{key:"reset",value:function(){this.keyPointManager_&&this.keyPointManager_.prepareReport(),this.mixTranscodeManager_&&(this.mixTranscodeManager_.stop(),this.mixTranscodeManager_=null),this.publishCDNManager_&&(this.publishCDNManager_=null),this.userMap_.clear(),this.stopSyncUserListInterval(),this.stopHeartbeat(),this.closeConnections(),this.mutedStates_.clear(),this.clearNetworkQuality(),this.badCaseDetector_&&this.callDurationCalculator_&&this.uploadAllCallStats(),this.closeUplink(),this.isJoined_=!1,this.isSignalReady_=!1,this.destroy()}},{key:"startSyncUserListInterval",value:function(){"live"===this.mode_&&"audience"===this.role_&&-1===this.syncUserListInterval_&&(this.syncUserListInterval_=wv.setInterval(this.syncUserList.bind(this),1e4))}},{key:"stopSyncUserListInterval",value:function(){wv.clearInterval(this.syncUserListInterval_),this.syncUserListInterval_=-1}},{key:"syncUserList",value:(T=o(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getUserList();case 3:t=e.sent,0!==this.userMap_.size&&this.userMap_.forEach((function(e){t.findIndex((function(t){return t.userId===e.userId}))<0&&(n.log_.info("peer leave detected: ".concat(e.userId)),n.cleanUser({userId:e.userId,tinyId:e.tinyId}))})),t.forEach((function(e){var t=e.userId;n.userMap_.has(t)||t===n.userId_||(n.userMap_.set(t,e),n.emitter_.emit(hE,{userId:t}))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.log_.warn("sync user list failed: "+e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return T.apply(this,arguments)})},{key:"getUserList",value:function(){var e=this;return new Promise((function(t,n){e.signalChannel_.send(wg),e.signalChannel_.once(cg.USER_LIST_RES,(function(e){var n=e.data.content.userlist.map((function(e){var t=e.userid,n=e.srctinyid,r=e.role;return new BA({userId:t,tinyId:n,role:r})}));t(n)})),setTimeout(n,2e3)}))}},{key:"publish",value:(C=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setPublishState(vu),this.isPublishing_=!0,n=nh(),gh.emit(Ih,{client:this,stream:t}),this.log_.info("publish() => publishing local stream"),r=new OA({userId:this.userId_,tinyId:this.tinyId_,client:this,isUplink:!0,signalChannel:this.signalChannel_}),t.setConnection(r),r.initialize(),r.on(oE,(function(e){var t=e.getCode();t!==Fd.ICE_TRANSPORT_ERROR&&(t===Fd.UPLINK_RECONNECTION_FAILED&&s.closeUplink(),s.emitter_.emit(yE,e))})),e.prev=9,e.next=12,r.publish(t);case 12:this.localStream_=e.sent,this.localStream_.getBeautyStatus()&&this.log_.info("beauty stream is published successfully"),this.log_.info("local stream is published successfully"),this.isPublishing_=!1,t.setPublishState(Eu),this.uplinkConnection_=r,i=nh(),o=i-n,jd.logSuccessEvent({userId:this.userId_,eventType:yl}),jd.logSuccessEvent({userId:this.userId_,eventType:Sl,delta:o}),t.hasAudio()&&hm(this.userId_,{eventId:Lg,eventDesc:"publish audio track",timestamp:Es(),userId:this.userId_,tinyId:this.tinyId_}),t.hasVideo()&&hm(this.userId_,{eventId:Ng,eventDesc:"publish video track",timestamp:Es(),userId:this.userId_,tinyId:this.tinyId_}),this.networkQuality_&&this.networkQuality_.setUplinkConnection(this.uplinkConnection_),this.deviceDetector_&&this.deviceDetector_.setLocalStream(this.localStream_),gh.emit(Gh,{localStream:this.localStream_,client:this}),this.notPublishWithoutH264Supported_=!1,e.next=39;break;case 30:throw e.prev=30,e.t0=e.catch(9),e.t0 instanceof Vd&&e.t0.getCode()===Fd.NOT_SUPPORTED_H264&&(this.notPublishWithoutH264Supported_=!0),t.setPublishState(_u),r.close(),this.log_.error("failed to publish stream "+e.t0),this.isPublishing_=!1,jd.logFailedEvent({userId:this.userId_,eventType:yl,error:e.t0}),e.t0;case 39:case"end":return e.stop()}}),e,this,[[9,30]])}))),function(e){return C.apply(this,arguments)})},{key:"unpublish",value:(S=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log_.info("unpublish() => unpublishing local stream"),e.prev=1,e.next=4,this.doUnpublish();case 4:jd.logSuccessEvent({userId:this.userId_,eventType:bl}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),jd.logFailedEvent({userId:this.userId_,eventType:bl,error:e.t0}),e.t0;case 11:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return S.apply(this,arguments)})},{key:"doUnpublish",value:function(){var e=this;return this.signalChannel_.sendWaitForResponse({command:vg,commandDesc:"unpublish",responseCommand:cg.UNPUBLISH_RESULT}).then((function(){e.closeUplink()})).catch((function(){e.closeUplink()}))}},{key:"closeUplink",value:function(){this.uplinkConnection_&&(this.uplinkConnection_.getIsReconnecting()&&this.uplinkConnection_.stopReconnection(),this.uplinkConnection_.close(),this.uplinkConnection_=null,this.networkQuality_&&this.networkQuality_.setUplinkConnection(null),this.localStream_.hasAudio()&&hm(this.userId_,{eventId:Dg,eventDesc:"unpublish audio track",timestamp:Es(),userId:this.userId_,tinyId:this.tinyId_}),this.localStream_.hasVideo()&&hm(this.userId_,{eventId:Pg,eventDesc:"unpublish video track",timestamp:Es(),userId:this.userId_,tinyId:this.tinyId_}),this.localStream_.setConnection(null),this.localStream_=null,this.deviceDetector_&&this.deviceDetector_.setLocalStream(null))}},{key:"closeDownLink",value:function(e){var t=this.connections_.get(e);t&&(t.getIsReconnecting()&&t.stopReconnection(),this.subscriptionManager_&&this.subscriptionManager_.delete(t.getUserId()),t.close(),this.connections_.delete(e),this.mutedStates_.delete(e))}},{key:"subscribe",value:(y=o(regeneratorRuntime.mark((function e(t,n){var r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log_.info("subscribe() => subscribe to [".concat(t.getUserId(),"] ").concat(t.getType()," stream with options: ").concat(JSON.stringify(n))),$d(n)&&(n={audio:!0,video:!0}),$d(n.video)&&(n.video=!0),$d(n.audio)&&(n.audio=!0),e.prev=4,r=t.getConnection(),gh.emit(Bh,{client:this,stream:t}),e.next=9,r.subscribe(t,n);case 9:this.subscriptionManager_&&this.subscriptionManager_.addSubscriptionRecord(t.getUserId(),t,n),this.notSubscribeWithoutH264Supported_=!1,jd.logSuccessEvent({userId:this.userId_,eventType:Cl}),e.next=22;break;case 14:throw e.prev=14,e.t0=e.catch(4),(i=e.t0 instanceof Vd?e.t0.getCode():Fd.UNKNOWN)===Fd.NOT_SUPPORTED_H264&&(this.notSubscribeWithoutH264Supported_=!0),o=new Vd({code:i,message:uv({key:t_,data:{message:e.t0.message}})}),jd.logFailedEvent({userId:this.userId_,eventType:Cl,error:o}),this.log_.error(o),o;case 22:case"end":return e.stop()}}),e,this,[[4,14]])}))),function(e,t){return y.apply(this,arguments)})},{key:"unsubscribe",value:(v=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log_.info("unsubscribe() => unsubscribe to [".concat(t.getUserId(),"] ").concat(t.getType()," stream")),e.prev=1,n=t.getConnection(),e.next=5,n.unsubscribe(t);case 5:this.subscriptionManager_&&this.subscriptionManager_.addUnsubscriptionRecord(t.getUserId(),t),gh.emit(Fh,{client:this,stream:t}),jd.logSuccessEvent({userId:this.userId_,eventType:Tl}),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(1),jd.logFailedEvent({userId:this.userId_,eventType:Tl,error:e.t0}),e.t0;case 14:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return v.apply(this,arguments)})},{key:"switchRole",value:(_=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.role_!==t){e.next=2;break}return e.abrupt("return");case 2:if("audience"!==t||!this.localStream_){e.next=5;break}return e.next=5,this.unpublish(this.localStream_);case 5:return this.log_.info("switchRole() => switch role to: "+t),e.next=8,this.doSwitchRole(t);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"doSwitchRole",value:function(e){var t=this;return new Promise((function(n,r){var i={trtcscene:"live"===t.mode_?Xc:Jc,trtcrole:"anchor"===e?el:tl};t.log_.info("switchRole signal data: "+JSON.stringify(i));var o=setTimeout((function(){t.log_.error("switchRole timeout observed"),t.signalChannel_.off(cg.SWITCH_ROLE_RES,s),r(new Vd({code:Fd.SWITCH_ROLE_FAILED,message:uv({key:i_})}))}),5e3),s=function(i){clearTimeout(o);var s=i.data.content,a=s.errCode,c=s.errMsg;0===a?(t.role_=e,n()):(t.log_.error("switchRole failed, errCode: ".concat(a,", errMsg: ").concat(c)),r(new Vd({code:Fd.SWITCH_ROLE_FAILED,message:uv({key:o_,data:{errMsg:c,errCode:a}})})))};t.signalChannel_.once(cg.SWITCH_ROLE_RES,s),t.signalChannel_.send(kg,i)}))}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"off",value:function(e,t,n){"*"===e?this.emitter_.removeAllListeners():this.emitter_.off(e,t,n)}},{key:"getRemoteMutedState",value:function(){var e=this,t=[];return this.mutedStates_.forEach((function(r,i,o){var s=e.connections_.get(i);s&&t.push(n({userId:s.getUserId()},r))})),t}},{key:"getTransportStats",value:(m=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={rtt:0,downlinksRTT:{}},!this.uplinkConnection_){e.next=6;break}return e.next=4,this.stats_.getSenderStats(this.uplinkConnection_);case 4:n=e.sent,t.rtt=n.rtt;case 6:r=b(this.connections_),e.prev=7,r.s();case 9:if((i=r.n()).done){e.next=17;break}return(o=E(i.value,2))[0],s=o[1],e.next=13,this.stats_.getReceiverStats(s);case 13:a=e.sent,t.downlinksRTT[a.userId]=a.rtt;case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:return e.abrupt("return",t);case 26:case"end":return e.stop()}}),e,this,[[7,19,22,25]])}))),function(){return m.apply(this,arguments)})},{key:"getLocalAudioStats",value:(g=o(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t={})[this.userId_]={bytesSent:0,packetsSent:0},!this.uplinkConnection_){e.next=7;break}return e.next=5,this.stats_.getSenderStats(this.uplinkConnection_);case 5:n=e.sent,t[this.userId_]={bytesSent:n.audio.bytesSent,packetsSent:n.audio.packetsSent};case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"getLocalVideoStats",value:(f=o(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t={})[this.userId_]={bytesSent:0,packetsSent:0,framesEncoded:0,framesSent:0,frameWidth:0,frameHeight:0},!this.uplinkConnection_){e.next=7;break}return e.next=5,this.stats_.getSenderStats(this.uplinkConnection_);case 5:n=e.sent,t[this.userId_]={bytesSent:n.video.bytesSent,packetsSent:n.video.packetsSent,framesEncoded:n.video.framesEncoded,framesSent:n.video.framesSent,frameWidth:n.video.frameWidth,frameHeight:n.video.frameHeight};case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"getRemoteAudioStats",value:(p=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},n=b(this.connections_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=12;break}return(i=E(r.value,2))[0],o=i[1],e.next=8,this.stats_.getReceiverStats(o);case 8:(s=e.sent).hasAudio&&(t[s.userId]={bytesReceived:s.audio.bytesReceived,packetsReceived:s.audio.packetsReceived,packetsLost:s.audio.packetsLost});case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:return e.abrupt("return",t);case 21:case"end":return e.stop()}}),e,this,[[2,14,17,20]])}))),function(){return p.apply(this,arguments)})},{key:"getRemoteVideoStats",value:(h=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,a,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c.length>0&&void 0!==c[0]?c[0]:"main",n={},r=b(this.connections_),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=14;break}return(o=E(i.value,2))[0],s=o[1],e.next=9,this.stats_.getReceiverStats(s);case 9:a=e.sent,"main"===t&&a.hasVideo&&(n[a.userId]={bytesReceived:a.video.bytesReceived,packetsReceived:a.video.packetsReceived,packetsLost:a.video.packetsLost,framesDecoded:a.video.framesDecoded,frameWidth:a.video.frameWidth,frameHeight:a.video.frameHeight}),"auxiliary"===t&&a.hasAuxiliary&&(n[a.userId]={bytesReceived:a.auxiliary.bytesReceived,packetsReceived:a.auxiliary.packetsReceived,packetsLost:a.auxiliary.packetsLost,framesDecoded:a.auxiliary.framesDecoded,frameWidth:a.auxiliary.frameWidth,frameHeight:a.auxiliary.frameHeight});case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e,this,[[3,16,19,22]])}))),function(){return h.apply(this,arguments)})},{key:"getSdpSemantics",value:function(){return this.sdpSemantics_}},{key:"getIceServers",value:function(){return 0===this.turnServers_.length&&this.schedule_.iceServers?this.schedule_.iceServers:this.turnServers_}},{key:"getConnections",value:function(){return this.connections_}},{key:"getMutedStates",value:function(){return this.mutedStates_}},{key:"startHeartbeat",value:function(){-1===this.heartbeat_&&(this.log_.info("startHeartbeat..."),this.heartbeat_=wv.setInterval(this.doHeartbeat.bind(this),2e3))}},{key:"stopHeartbeat",value:function(){-1!==this.heartbeat_&&(this.log_.info("stopHeartbeat"),wv.clearInterval(this.heartbeat_),this.heartbeat_=-1,this.lastHeartBeatTime_=-1)}},{key:"doHeartbeat",value:(d=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.badCaseDetector_.getMonitorFreeze(),e.next=3,this.stats_.getStatsReport({uplinkConnection:this.uplinkConnection_,downlinkConnections:this.connections_,freezeMap:t});case 3:if(n=e.sent,gh.emit(Ch,{client:this,stats:n}),this.badCaseDetector_.resetMonitor(),this.signalChannel_){e.next=8;break}return e.abrupt("return");case 8:r=this.signalChannel_.isConnected()?(c=this.userId_,l=void 0,(l=dm.get(c))?dm.delete(c):l=[],l):[],i={WebRTCQualityReq:n,eventList:r,sdkAppId:this.sdkAppId_,tinyid:this.tinyId_,roomid:this.roomId_,socketid:this.signalInfo_.socketId,clientip:this.signalInfo_.localIp,serverip:this.signalInfo_.relayIp,cpunumber:navigator.hardwareConcurrency||0,cpudevice:navigator.platform,devicename:navigator.platform,ostype:navigator.platform,mode:this.localStream_?this.localStream_.getScreen()?"screen":Xl:""},o=0,this.localStream_&&this.localStream_.getMediaStream()&&(s=this.localStream_.getMediaStream().getAudioTracks(),o=s.length>0&&s[0].muted?3:1),i.WebRTCQualityReq.AudioReportState.uint32_microphone_status=o,this.signalChannel_.send(hg,i),a=Date.now(),this.lastHeartBeatTime_>0&&a-this.lastHeartBeatTime_>1e4&&this.log_.warn("heartbeat took ".concat(a-this.lastHeartBeatTime_)),this.lastHeartBeatTime_=a;case 17:case"end":return e.stop()}var c,l}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"onRemoteStreamAdded",value:function(e){var t=e.content,n=t.srcopenid,r=t.srctinyid;if(null!==n){this.userMap_.has(n)||(this.userMap_.set(n,new BA({userId:n,tinyId:r,role:"anchor"})),this.emitter_.emit(hE,{userId:n}));var i=this.connections_.get(r);if(i){if(i.getIsReconnecting())return;this.log_.warn("duplicated stream-added observed, rebuild the connection"),i.close(),this.connections_.delete(r)}var o={audio:t.audio,video:t.bigVideo,auxiliary:t.auxVideo};this.log_.info("remote peer [".concat(n,"] published stream. trackState: ").concat(JSON.stringify(o))),this.createDownlinkConnection({userId:n,tinyId:r,trackState:o})}else this.log_.warn("received null userId on stream added")}},{key:"createDownlinkConnection",value:function(e){var t=this,n=e.userId,r=e.tinyId,i=e.trackState,o=new NA({userId:n,tinyId:r,client:this,isUplink:!1,signalChannel:this.signalChannel_,autoSubscribe:this.autoSubscribe_,trackState:i});this.connections_.set(r,o),this.installDownlinkEvents(o,n,r),this.autoSubscribe_?(o.initialize(),o.connect().catch((function(){var e=o.getTrackState();o.getMainStream()||!e.audio&&!e.video||t.initRemoteStream({type:"main",userId:n,downlinkConnection:o}),!o.getAuxStream()&&e.auxiliary&&t.initRemoteStream({type:"auxiliary",userId:n,downlinkConnection:o})}))):((i.audio||i.video)&&this.initRemoteStream({type:"main",userId:n,downlinkConnection:o}),i.auxiliary&&this.initRemoteStream({type:"auxiliary",userId:n,downlinkConnection:o}))}},{key:"initRemoteStream",value:function(e){var t=e.type,n=e.userId,r=e.downlinkConnection,i=new yA({type:t,userId:n,client:this});i.setConnection(r),r.setRemoteStream("main"===t?nl:rl,i),i.setIsStreamAddedEventEmitted(!0),gh.emit(xh,{client:this,stream:i}),this.emitter_.emit(aE,{stream:i})}},{key:"installDownlinkEvents",value:function(e,t,n){var r=this;e.on(tE,(function(e){e.stream.setIsStreamAddedEventEmitted(!0),gh.emit(xh,{client:r,stream:e.stream}),r.emitter_.emit(aE,{stream:e.stream})})),e.on(nE,(function(e){e.stream.stop(),e.stream.setIsStreamAddedEventEmitted(!1),r.subscriptionManager_&&r.subscriptionManager_.deleteAutoRecoveryFlag(e.stream.getUserId(),e.stream.getType()),gh.emit(jh,{client:r,stream:e.stream}),r.emitter_.emit(cE,{stream:e.stream})})),e.on(rE,(function(e){gh.emit(Vh,{client:r,stream:e.stream}),r.emitter_.emit(lE,{stream:e.stream})})),e.on(iE,(function(e){gh.emit(Uh,{client:r,stream:e.stream}),r.emitter_.emit(uE,{stream:e.stream})})),e.on(oE,(function(e){var t=e.getCode();t!==Fd.ICE_TRANSPORT_ERROR&&(t===Fd.DOWNLINK_RECONNECTION_FAILED&&r.closeDownLink(n),r.emitter_.emit(yE,e))}))}},{key:"onRemoteStreamRemoved",value:function(e){var t=e.content,n=t.srctinyid,r=t.srcopenid,i=this.connections_.get(n);i&&(void 0===r&&(r=i.getUserId()),this.log_.info("remote peer [".concat(r,"] unpublished stream")),this.closeDownLink(n))}},{key:"onPeerJoin",value:function(e){var t=e.data.content,n=t.srctinyid,r=t.userid,i=t.role;this.userMap_.has(r)||(this.userMap_.set(r,new BA({userId:r,tinyId:n,role:i})),this.emitter_.emit(hE,{userId:r}))}},{key:"onPeerLeave",value:function(e){var t=e.data.content,n=t.srctinyid,r=t.userid;this.log_.info("peer leave [".concat(r,"]")),this.cleanUser({userId:r,tinyId:n})}},{key:"cleanUser",value:function(e){var t=e.userId,n=e.tinyId;this.userMap_.delete(t),this.closeDownLink(n),this.emitter_.emit(pE,{userId:t})}},{key:"onPublishedUserList",value:function(e){var t=this;try{var n=e.content.userlist.map((function(e){return e.userid}));this.connections_.forEach((function(e){var r=e.getUserId(),i=e.getTinyId();n.findIndex((function(e){return e===r}))<0&&(t.log_.info("peer unpublished detected [".concat(r,"]")),t.closeDownLink(i))})),e.content.userlist.forEach((function(e){var n=e.userid,r=e.srctinyid,i=e.flag;if(n!==t.userId_){var o=!!(1&i),s=!!(8&i),a=!!(4&i);if(t.connections_.has(r)){var c=t.connections_.get(r).getTrackState(),l=c.audio,u=c.video,d=c.auxiliary;!u&&o&&gh.emit(Mh,{client:t,tinyId:r,userId:n,action:fu,kind:Xl}),!l&&s&&gh.emit(Mh,{client:t,tinyId:r,userId:n,action:fu,kind:Jl}),!d&&a&&gh.emit(Mh,{client:t,tinyId:r,userId:n,action:fu,kind:eu}),u&&!o&&gh.emit(Mh,{client:t,tinyId:r,userId:n,action:gu,kind:Xl}),l&&!s&&gh.emit(Mh,{client:t,tinyId:r,userId:n,action:gu,kind:Jl}),d&&!a&&gh.emit(Mh,{client:t,tinyId:r,userId:n,action:gu,kind:eu})}else t.log_.info("peer published detected [".concat(n,"]")),t.onRemoteStreamAdded({content:{audio:s,auxVideo:a,bigVideo:o,srcopenid:n,srctinyid:r}})}}))}catch(ky){}}},{key:"onUpdateRemoteMuteStat",value:function(e){var t=this;e.content.userlist.forEach((function(e){var n=e.srctinyid,r=e.userid;if(0!==n&&n!==t.tinyId_){var i=t.connections_.get(n);if(i){var o=i.getMainStream();if(o&&o.getIsStreamAddedEventEmitted()){var s=!!(1&e.flag),a=!!(8&e.flag),c=!!(2&e.flag),l=!!(64&e.flag),u=!!(16&e.flag),d=t.mutedStates_.get(n);if(void 0===d)return t.mutedStates_.set(n,{hasAudio:a,hasVideo:s,hasSmall:c,audioMuted:l,videoMuted:u}),s?u?t.emitter_.emit(gE,{userId:r}):t.emitter_.emit(_E,{userId:r}):t.emitter_.emit(gE,{userId:r}),void(a?l?t.emitter_.emit(fE,{userId:r}):t.emitter_.emit(mE,{userId:r}):t.emitter_.emit(fE,{userId:r}));var h=!l&&a;(!d.audioMuted&&d.hasAudio)!==h&&(h?t.emitter_.emit(mE,{userId:r}):t.emitter_.emit(fE,{userId:r}));var p=!u&&s;(!d.videoMuted&&d.hasVideo)!==p&&(p?t.emitter_.emit(_E,{userId:r}):t.emitter_.emit(gE,{userId:r})),t.mutedStates_.set(n,{hasAudio:a,hasVideo:s,hasSmall:c,audioMuted:l,videoMuted:u})}}else t.mutedStates_.delete(n)}}))}},{key:"onClientBanned",value:function(e){this.emitter_.emit(vE,new Vd({code:Fd.CLIENT_BANNED,message:uv({key:s_,data:{reason:e}})}))}},{key:"getEnv",value:function(){return this.env_}},{key:"getSubscriptionManager",value:function(){return this.subscriptionManager_}},{key:"startPublishCDNStream",value:(u=o(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:{},this.localStream_){e.next=3;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:a_})});case 3:return this.log_.info("startPublishCDNStream params: ".concat(JSON.stringify(t))),e.next=6,this.publishCDNManager_.startPublishTencentCDN(t);case 6:if(!(t.appId&&t.bizId&&t.url)){e.next=9;break}return e.next=9,this.publishCDNManager_.startPublishGivenCDN(t);case 9:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"stopPublishCDNStream",value:(l=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.publishCDNManager_.getIsPublishingTencentCDN()){e.next=2;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:c_})});case 2:return this.log_.info("stopPublishCDNStream"),e.next=5,this.publishCDNManager_.stopPublishTencentCDN();case 5:if(!this.publishCDNManager_.getIsPublishingGivenCDN()){e.next=8;break}return e.next=8,this.publishCDNManager_.stopPublishGivenCDN();case 8:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"startMixTranscode",value:(a=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isJoined_&&this.mixTranscodeManager_){e.next=2;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:h_})});case 2:return $d(t.mode)&&(t.mode=Hl.MANUAL),e.prev=3,this.log_.info("startMixTranscode with config ".concat(JSON.stringify(t))),jd.uploadEvent({log:"mix-transcode-mode:".concat(t.mode),userId:this.userId_}),e.next=8,this.mixTranscodeManager_.startMixTranscode(t);case 8:jd.logSuccessEvent({userId:this.userId_,eventType:Ul}),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(3),jd.logFailedEvent({userId:this.userId_,eventType:Ul,error:e.t0}),e.t0;case 15:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(e){return a.apply(this,arguments)})},{key:"stopMixTranscode",value:(i=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isJoined_&&this.mixTranscodeManager_){e.next=2;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:p_})});case 2:return e.prev=2,e.next=5,this.mixTranscodeManager_.stopMixTranscode();case 5:jd.logSuccessEvent({userId:this.userId_,eventType:Fl}),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),jd.logFailedEvent({userId:this.userId_,eventType:Fl,error:e.t0}),e.t0;case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return i.apply(this,arguments)})},{key:"getSystemResult",value:function(){return this.checkSystemResult_}},{key:"enableAudioVolumeEvaluation",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Yd(t))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:f_})});if(this.log_.info("enableAudioVolumeEvaluation with interval: "+t),t<=0)return this.enableAudioVolumeEvaluation_=!1,wv.clearInterval(this.audioVolumeIntervalId_),void(this.audioVolumeIntervalId_=null);t=Math.floor(Math.max(t,16)),this.audioVolumeIntervalId_&&(wv.clearInterval(this.audioVolumeIntervalId_),this.audioVolumeIntervalId_=null),this.enableAudioVolumeEvaluation_=!0,this.audioVolumeIntervalId_=wv.setInterval((function(){var t=[];if(e.localStream_){var n=Math.floor(100*e.localStream_.getAudioLevel());t.push({userId:e.userId_,audioVolume:n,stream:e.localStream_})}e.connections_.forEach((function(e){var n=e.getSubscribedMainStream();if(n){var r=Math.floor(100*n.getAudioLevel());t.push({userId:e.getUserId(),audioVolume:r,stream:n})}})),e.emitter_.emit(AE,{result:t})}),t,n)}},{key:"uploadAllCallStats",value:function(){var e=this;this.callDurationCalculator_.getDurationMap().forEach((function(t,n){var r={userId:t.userId,type:t.type,duration:e.callDurationCalculator_.getDuration(n,Xl),dataFreeze:e.badCaseDetector_.getDataFreezeDuration(n).dataFreeze,renderFreeze:e.badCaseDetector_.getRenderFreezeDuration(n).renderFreeze};jd.uploadEvent({log:"callStats-"+JSON.stringify(r),userId:e.userId_})})),this.badCaseDetector_.stop(),this.callDurationCalculator_.reset()}},{key:"enableSmallStream",value:(r=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPublished()&&!this.isPublishing_){e.next=2;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:g_})});case 2:if(!eE()){e.next=7;break}this.setIsEnableSmallStream(!0),this.log_.info("SmallStream successfully enabled"),e.next=8;break;case 7:throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:__})});case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"disableSmallStream",value:(t=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPublished()&&!this.isPublishing_){e.next=2;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:m_})});case 2:this.setIsEnableSmallStream(!1),this.log_.info("SmallStream successfully disabled");case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setSmallStreamProfile",value:function(e){var t=this;e&&e.framerate&&(e.frameRate=e.framerate),Object.keys(this.smallStreamConfig_).forEach((function(n){e[n]&&(t.smallStreamConfig_[n]=e[n])})),this.log_.info("setSmallStreamProfile: bitrate=".concat(this.smallStreamConfig_.bitrate,", frameRate=").concat(this.smallStreamConfig_.frameRate,", height=").concat(this.smallStreamConfig_.height,", width=").concat(this.smallStreamConfig_.width));var n=this.smallStreamConfig_,r=n.width,i=n.height,o=n.bitrate,s=n.frameRate;if(r<0||i<0||o<0||s<0)throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:v_})})}},{key:"setRemoteVideoStreamType",value:function(e,t){switch(this.log_.info("setRemoteVideoStreamType: streamType=".concat(e.getType(),", set ").concat(t)),t){case"big":case"small":this.changeVideoType(e,t)}}},{key:"changeVideoType",value:function(e,t){if(!(e instanceof yA))throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:E_})});if(!e.getConnection())throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:e_})});var n=this.getRemoteMutedState().filter((function(t){return t.userId===e.getUserId()}))[0];if("small"===t&&n&&!n.hasSmall)throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:A_})});this.log_.info("change video type: streamType=".concat(e.getType(),", set ").concat(t));var r=e.getConnection().getTinyId(),i=1;"big"===t&&(i=0),this.signalChannel_.send(Og,{type:i,srctinyid:r})}},{key:"setIsEnableSmallStream",value:function(e){this.isEnableSmallStream_=e}},{key:"getIsEnableSmallStream",value:function(){return this.isEnableSmallStream_}},{key:"smallStreamConfig",get:function(){return this.smallStreamConfig_}},{key:"isPublished",value:function(){return!!this.localStream_}},{key:"getUplinkConnection",value:function(){return this.uplinkConnection_}},{key:"getLocalStream",value:function(){return this.localStream_}},{key:"getMode",value:function(){return this.mode_}},{key:"getBadCaseDetector",value:function(){return this.badCaseDetector_}},{key:"getCallDurationCalculator",value:function(){return this.callDurationCalculator_}},{key:"getIsJoined",value:function(){return this.isJoined_}},{key:"getAllConnections",value:function(){var e=A(this.connections_.values());return this.uplinkConnection_&&e.push(this.uplinkConnection_),e}},{key:"isRelayMaybeFailed",value:function(){var e=this.getAllConnections();if(0===e.length)return!1;for(var t=0;t<e.length;t++)if(e[t].getReconnectionCount()<6)return!1;return!0}},{key:"getUseStringRoomId",value:function(){return this.useStringRoomId_}},{key:"checkConnectionsToReconnect",value:function(){var e=this;this.getAllConnections().forEach((function(t){if(!t.getIsReconnecting()){var n=t.getPeerConnection();n&&n.connectionState===hl&&(e.log_.warn("[".concat(t.getUserId(),"] pc is closed but not reconnect")),t.startReconnection())}}))}},{key:"getEnableAutoPlayDialog",value:function(){return this.enableAutoPlayDialog_}}]),e}()).prototype,"join",[QA,WA],Object.getOwnPropertyDescriptor(ry.prototype,"join"),ry.prototype),C(ry.prototype,"leave",[qA],Object.getOwnPropertyDescriptor(ry.prototype,"leave"),ry.prototype),C(ry.prototype,"publish",[zA,ZA],Object.getOwnPropertyDescriptor(ry.prototype,"publish"),ry.prototype),C(ry.prototype,"unpublish",[$A,KA],Object.getOwnPropertyDescriptor(ry.prototype,"unpublish"),ry.prototype),C(ry.prototype,"subscribe",[YA],Object.getOwnPropertyDescriptor(ry.prototype,"subscribe"),ry.prototype),C(ry.prototype,"unsubscribe",[JA],Object.getOwnPropertyDescriptor(ry.prototype,"unsubscribe"),ry.prototype),C(ry.prototype,"switchRole",[XA,ey],Object.getOwnPropertyDescriptor(ry.prototype,"switchRole"),ry.prototype),C(ry.prototype,"startPublishCDNStream",[ty],Object.getOwnPropertyDescriptor(ry.prototype,"startPublishCDNStream"),ry.prototype),C(ry.prototype,"startMixTranscode",[ny],Object.getOwnPropertyDescriptor(ry.prototype,"startMixTranscode"),ry.prototype),ry),uy=yf({retryFunction:function(){var e=o(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!qv()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,dy(t);case 4:if(n=e.sent,Cf.info("getUserMedia with constraints: "+JSON.stringify(n)),!n.audio){e.next=13;break}return e.next=9,wy.getMicrophones();case 9:if(r=e.sent,Cf.info("microphones: ".concat(JSON.stringify(r))),0!==r.length){e.next=13;break}throw new Vd({code:Fd.DEVICE_NOT_FOUND,message:uv({key:ov})});case 13:if(!n.video){e.next=20;break}return e.next=16,wy.getCameras();case 16:if(i=e.sent,Cf.info("cameras: ".concat(JSON.stringify(i))),0!==i.length){e.next=20;break}throw new Vd({code:Fd.DEVICE_NOT_FOUND,message:uv({key:sv})});case 20:return e.next=22,navigator.mediaDevices.getUserMedia(n);case 22:return e.abrupt("return",e.sent);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),settings:{retries:3,timeout:500},onError:function(e,t,n){"NotReadableError"===e.name?t():n(e)},onRetrying:function(e){Cf.warn("getUserMedia NotReadableError observed, retrying [".concat(e,"/3]"))}});function dy(e){return hy.apply(this,arguments)}function hy(){return(hy=o(regeneratorRuntime.mark((function e(t){var r,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={echoCancellation:t.echoCancellation,autoGainControl:t.autoGainControl,noiseSuppression:t.noiseSuppression},t.audio){e.next=5;break}r=!1,e.next=15;break;case 5:if(fm(t.microphoneId)){e.next=9;break}r=n({deviceId:{exact:t.microphoneId},sampleRate:t.sampleRate,channelCount:t.channelCount},r),e.next=15;break;case 9:return r=n({sampleRate:t.sampleRate,channelCount:t.channelCount},r),e.next=12,wy.getMicrophones();case 12:i=e.sent,(o=i.filter((function(e){return e.deviceId.length>0}))).length>0&&(r.deviceId={exact:o[0].deviceId});case 15:return s={},s=!$d(t.facingMode)&&t.video?{facingMode:t.facingMode,width:t.width,height:t.height,frameRate:t.frameRate}:!fm(t.cameraId)&&t.video?{deviceId:{exact:t.cameraId},width:t.width,height:t.height,frameRate:t.frameRate}:!!t.video&&(!!$d(t.width)||{width:t.width,height:t.height,frameRate:t.frameRate}),e.abrupt("return",{audio:r,video:s});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var py=function(){var e=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,a,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!qv()){e.next=2;break}return e.abrupt("return");case 2:if(n=null,!(Oc&&Nc<74||Pc)){e.next=27;break}return r=gy(t),Cf.info("getDisplayMedia with constraints: "+JSON.stringify(r)),e.next=8,navigator.mediaDevices.getDisplayMedia(r);case 8:if(i=e.sent,!t.screenAudio){e.next=14;break}return Cf.warn("Your browser not support capture system audio"),e.abrupt("return",i);case 14:if(!t.audio){e.next=24;break}return o=fy(t),Cf.info("getUserMedia with constraints: "+JSON.stringify(o)),e.next=19,navigator.mediaDevices.getUserMedia(o);case 19:return n=e.sent,i.addTrack(n.getAudioTracks()[0]),e.abrupt("return",i);case 24:return e.abrupt("return",i);case 25:e.next=53;break;case 27:if(!t.screenAudio){e.next=37;break}return t.audioConstraints={echoCancellation:!0,noiseSuppression:!0,sampleRate:44100},s=gy(t),Cf.info("getDisplayMedia with constraints: "+JSON.stringify(s)),e.next=33,navigator.mediaDevices.getDisplayMedia(s);case 33:return a=e.sent,e.abrupt("return",a);case 37:return c=gy(t),Cf.info("getDisplayMedia with constraints: "+JSON.stringify(c)),e.next=41,navigator.mediaDevices.getDisplayMedia(c);case 41:if(l=e.sent,!t.audio){e.next=52;break}return u=fy(t),Cf.info("getUserMedia with constraints: "+JSON.stringify(u)),e.next=47,navigator.mediaDevices.getUserMedia(u);case 47:return n=e.sent,l.addTrack(n.getAudioTracks()[0]),e.abrupt("return",l);case 52:return e.abrupt("return",l);case 53:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function fy(e){var t={echoCancellation:e.echoCancellation,autoGainControl:e.autoGainControl,noiseSuppression:e.noiseSuppression,sampleRate:e.sampleRate,channelCount:e.channelCount};return $d(e.microphoneId)||(t.deviceId={exact:e.microphoneId}),{audio:t,video:!1}}function gy(e){var t={},n={width:e.width,height:e.height,frameRate:e.frameRate};return $d(e.screenSource)||(n.displaySurface=e.screenSource),t.video=n,$d(e.audioConstraints)||(t.audio=e.audioConstraints),t}var my=new Map;my.set("120p",{width:160,height:120,frameRate:15,bitrate:200}),my.set("180p",{width:320,height:180,frameRate:15,bitrate:350}),my.set("240p",{width:320,height:240,frameRate:15,bitrate:400}),my.set("360p",{width:640,height:360,frameRate:15,bitrate:800}),my.set("480p",{width:640,height:480,frameRate:15,bitrate:900}),my.set("720p",{width:1280,height:720,frameRate:15,bitrate:1500}),my.set("1080p",{width:1920,height:1080,frameRate:15,bitrate:2e3}),my.set("1440p",{width:2560,height:1440,frameRate:30,bitrate:4860}),my.set("4K",{width:3840,height:2160,frameRate:30,bitrate:9e3});var _y=new Map;_y.set("480p",{width:640,height:480,frameRate:5,bitrate:900}),_y.set("480p_2",{width:640,height:480,frameRate:30,bitrate:1e3}),_y.set("720p",{width:1280,height:720,frameRate:5,bitrate:1200}),_y.set("720p_2",{width:1280,height:720,frameRate:30,bitrate:3e3}),_y.set("1080p",{width:1920,height:1080,frameRate:5,bitrate:1600}),_y.set("1080p_2",{width:1920,height:1080,frameRate:30,bitrate:4e3});var vy,Ey,Ay=new Map;Ay.set("standard",{sampleRate:48e3,channelCount:1,bitrate:40}),Ay.set("standard-stereo",{sampleRate:48e3,channelCount:2,bitrate:64}),Ay.set("high",{sampleRate:48e3,channelCount:1,bitrate:128}),Ay.set("high-stereo",{sampleRate:48e3,channelCount:2,bitrate:192});var yy,Sy,by,Cy=(vy=_A.apply(void 0,A(gA.LOCAL_STREAM.switchDevice)),C((Ey=function(e){u(E,e);var t,i,a,l,h,p,f,g,m=_(E);function E(e){var t;s(this,E);var r=n(n({},e),{isRemote:!1,type:"local"});return e.screen&&(r.mirror=!1),(t=m.call(this,r)).name_=bu,t.client_=null,t.video_=e.video,t.audio_=e.audio,t.cameraId_=e.cameraId,t.cameraGroupId_="",t.facingMode_=e.facingMode,t.microphoneId_=e.microphoneId,t.microphoneGroupId_="",t.videoSource_=e.videoSource,t.audioSource_=e.audioSource,t.screen_=e.screen,t.screenSource_=e.screenSource,t.screenAudio_=e.screenAudio,t.audioProfile_={echoCancellation:!!$d(e.echoCancellation)||e.echoCancellation,autoGainControl:!!$d(e.autoGainControl)||e.autoGainControl,noiseSuppression:!!$d(e.noiseSuppression)||e.noiseSuppression,sampleRate:48e3,channelCount:1,bitrate:40},t.videoProfile_={width:640,height:480,frameRate:15,bitrate:900},t.screenProfile_={width:1920,height:1080,frameRate:5,bitrate:1600},t.videoBitrate_=t.screen_?1600:900,t.videoSetting_=null,t.mutedFlag_=0,t.beautyStatus_=!1,t.recoverCaptureCount_=0,t.initState(),t.canvas_=null,t.canvasInterval_=-1,t.log_.info("stream created: "+t.id_),t}return c(E,[{key:"initState",value:function(){this.isAddingTrack_=!1,this.isRemovingTrack_=!1,this.setIsReadyToPublish(!1),this.setPublishState(_u)}},{key:"installEvents",value:function(){v(d(E.prototype),"installEvents",this).call(this),gh.on(Gh,this.onStreamPublished,this),gh.on(Yh,this.onVideoTrackStopped,this),gh.on(qh,this.onVideoTrackStopped,this),gh.on(Xh,this.onAudioTrackStopped,this),gh.on(Jh,this.onAudioTrackStopped,this)}},{key:"uninstallEvents",value:function(){v(d(E.prototype),"uninstallEvents",this).call(this),gh.off(Gh,this.onStreamPublished,this),gh.off(Yh,this.onVideoTrackStopped,this),gh.off(qh,this.onVideoTrackStopped,this),gh.off(Xh,this.onAudioTrackStopped,this),gh.off(Jh,this.onAudioTrackStopped,this)}},{key:"initialize",value:function(){var e=this;return new Promise((function(t,n){if(zv())n(new Vd({code:Fd.INVALID_OPERATION,message:uv({key:J_})}));else{if($d(e.audio_)){var r=new MediaStream;return $d(e.audioSource_)||(r.addTrack(e.audioSource_),e.updateAudioPlayingState(!0)),$d(e.videoSource_)||(r.addTrack(e.videoSource_),e.updateVideoPlayingState(!0)),e.setMediaStream(r),jd.logSuccessEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:Pl,kind:"custom"}),e.setIsReadyToPublish(!0),t()}e.screen_?(e.log_.info("initialize stream audio: "+e.audio_+" screenAudio: "+e.screenAudio_+" screen: "+e.screen_),py({audio:e.audio_,screenAudio:e.screenAudio_,microphoneId:e.microphoneId_,screenSource:e.screenSource_,width:e.screenProfile_.width,height:e.screenProfile_.height,frameRate:e.screenProfile_.frameRate,sampleRate:e.audioProfile_.sampleRate,channelCount:e.audioProfile_.channelCount,autoGainControl:e.audioProfile_.autoGainControl,noiseSuppression:e.audioProfile_.noiseSuppression,echoCancellation:e.audioProfile_.echoCancellation}).then((function(n){e.setMediaStream(n),e.updateAudioPlayingState(e.audio_||e.screenAudio_),e.updateVideoPlayingState(!0);var r=e.getVideoTrack();return e.listenForScreenSharingStopped(r),e.setVideoContentHint(hu),e.updateDeviceIdInUse(),e.setIsReadyToPublish(!0),e.log_.info(JSON.stringify(r.getSettings())),jd.logSuccessEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:Pl,kind:"getDisplayMedia"}),t()})).catch((function(t){jd.logFailedEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:Pl,kind:"getDisplayMedia",error:t}),e.log_.error("getDisplayMedia error observed "+t),n(t instanceof Vd?t:new Vd({code:Fd.INITIALIZE_FAILED,name:t.name,message:t.message}))}))):(gh.emit(Hh,{stream:e,audio:e.audio_,video:e.video_}),e.log_.info("initialize stream audio: "+e.audio_+" video: "+e.video_),uy({audio:e.audio_,video:e.video_,facingMode:e.facingMode_,cameraId:e.cameraId_,microphoneId:e.microphoneId_,width:e.videoProfile_.width,height:e.videoProfile_.height,frameRate:e.videoProfile_.frameRate,sampleRate:e.audioProfile_.sampleRate,channelCount:e.audioProfile_.channelCount,autoGainControl:e.audioProfile_.autoGainControl,noiseSuppression:e.audioProfile_.noiseSuppression,echoCancellation:e.audioProfile_.echoCancellation}).then((function(n){return gh.emit(Qh,{stream:e,audio:e.audio_,video:e.video_}),"getSettings"in MediaStreamTrack.prototype&&(e.videoSetting_=n.getVideoTracks().length>0&&n.getVideoTracks()[0].getSettings()),e.setMediaStream(n),e.updateAudioPlayingState(e.audio_),e.updateVideoPlayingState(e.video_),e.updateDeviceIdInUse(),e.log_.info("gotStream hasAudio: "+e.hasAudio()+" hasVideo: "+e.hasVideo()),e.setIsReadyToPublish(!0),jd.logSuccessEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:Pl,kind:"getUserMedia"}),t()})).catch((function(t){gh.emit(Wh,{stream:e,audio:e.audio_,video:e.video_,error:t}),jd.logFailedEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:Pl,kind:"getUserMedia",error:t}),e.log_.error("getUserMedia error observed "+t),n(t instanceof Vd?t:new Vd({code:Fd.INITIALIZE_FAILED,name:t.name,message:t.message}))})))}}))}},{key:"listenForScreenSharingStopped",value:function(e){var t=this;e.addEventListener("ended",(function(e){t.log_.info("screen sharing was stopped because the video track is ended"),t.emitter_.emit(bE)}))}},{key:"muteAudio",value:function(){var e=v(d(E.prototype),"muteAudio",this).call(this);return e&&(this.log_.info("localStream mute audio"),this.sendMutedFlag(Jl,!0)),e}},{key:"muteVideo",value:function(){var e=v(d(E.prototype),"muteVideo",this).call(this);return e&&(this.log_.info("localStream mute video"),this.sendMutedFlag(Xl,!0)),e}},{key:"unmuteAudio",value:function(){var e=v(d(E.prototype),"unmuteAudio",this).call(this);return e&&(this.log_.info("localStream unmute audio"),this.sendMutedFlag(Jl,!1)),e}},{key:"unmuteVideo",value:function(){var e=v(d(E.prototype),"unmuteVideo",this).call(this);return e&&(this.log_.info("localStream unmute video"),this.sendMutedFlag(Xl,!1)),e}},{key:"sendMutedFlag",value:function(e,t){this.setMutedFlag(e,t);var n=this.getConnection();if(n){n.sendMutedFlag(this.mutedFlag_);var r=n.getUserId(),i=n.getTinyId(),o="".concat(t?ru:iu," local ").concat(e," track");hm(r,{eventId:e===Jl?t?Mg:Bg:t?xg:Ug,eventDesc:o,timestamp:Es(),userId:r,tinyId:i})}}},{key:"setMutedFlag",value:function(e,t){e===Jl?t?this.mutedFlag_|=4:this.mutedFlag_&=-5:t?this.mutedFlag_|=1:this.mutedFlag_&=-2,this.log_.info("set ".concat(e," muted state: [").concat(t?ru:iu,"]"))}},{key:"setAudioProfile",value:function(e){var t;"object"===r(e)?t=e:void 0===(t=Ay.get(e))&&(t=Ay.get("standard")),this.log_.info("setAudioProfile: "+JSON.stringify(t)),this.audioProfile_=n(n({},this.audioProfile_),t)}},{key:"setVideoProfile",value:(g=o(regeneratorRuntime.mark((function e(t){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.connection_||Wv()){e.next=2;break}throw new Vd({code:Fd.NOT_SUPPORTED,message:uv({key:ev})});case 2:if(qd(t)?r=n(n({},this.videoProfile_),t):Kd(t)&&(r=my.get(t),$d(r)&&(r=my.get("480p"))),this.log_.info("setVideoProfile "+JSON.stringify(r)),!(i=this.getVideoTrack())){e.next=8;break}return e.next=8,i.applyConstraints(r);case 8:if(this.videoBitrate_===r.bitrate){e.next=13;break}if(!this.connection_){e.next=12;break}return e.next=12,this.connection_.setBandwidth(r.bitrate,Xl);case 12:this.videoBitrate_=r.bitrate;case 13:this.videoProfile_=r;case 14:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"getVideoBitrate",value:function(){return this.videoBitrate_}},{key:"getAudioBitrate",value:function(){return this.audioProfile_.bitrate}},{key:"setScreenProfile",value:function(e){var t=e;"object"!==r(e)&&void 0===(t=_y.get(e))&&(t=_y.get("1080p")),this.log_.info("setScreenProfile "+JSON.stringify(e)),this.screenProfile_=t,this.videoBitrate_=t.bitrate}},{key:"getVideoProfile",value:function(){return this.screen_?this.screenProfile_:this.videoProfile_}},{key:"getAudioProfile",value:function(){return this.audioProfile_}},{key:"setVideoContentHint",value:function(e){var t=this.getVideoTrack();t&&"contentHint"in t&&(this.log_.info("set video track contentHint to: "+e),t.contentHint=e,t.contentHint!==e&&this.log_.warn("Invalid video track contentHint: "+e))}},{key:"switchDevice",value:(f=o(regeneratorRuntime.mark((function e(t,n){var r,i,o,s,a,c,l,u,d,h,p,f,g,m,_,v,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t===Jl)){e.next=8;break}if(this.microphoneId_!==n){e.next=4;break}return e.abrupt("return");case 4:this.microphoneId_=n,this.audio_=!0,e.next=12;break;case 8:if(this.cameraId_!==n){e.next=10;break}return e.abrupt("return");case 10:n===tu||n===nu?this.facingMode_=n:this.cameraId_=n,this.video_=!0;case 12:if(this.getMediaStream()){e.next=14;break}return e.abrupt("return");case 14:return this.setIsReadyToPublish(!1),this.log_.info("switchDevice "+t+" to: "+n),r||((i=this.getVideoTrack())&&i.stop(),Ac&&(o=this.getAudioTrack())&&(this.log_.info("stop audio track first in huawei env"),o.stop())),r&&(s=this.getAudioTrack(),a=this.getMicrophoneTrackMixed(),s&&s.stop(),a&&a.stop()),e.next=20,uy({audio:this.audio_&&t===Jl||Ac,video:this.video_&&t===Xl,facingMode:n===tu||n===nu?n:void 0,cameraId:this.cameraId_,microphoneId:this.microphoneId_,width:this.videoProfile_.width,height:this.videoProfile_.height,frameRate:this.videoProfile_.frameRate,sampleRate:this.audioProfile_.sampleRate,channelCount:this.audioProfile_.channelCount});case 20:if(c=e.sent,l=null,!r){e.next=27;break}(u=c.getAudioTracks()[0])&&this.isAudioTrackMixed()?(d=this.getAudioTrack(),h=wy.AudioMixerPlugin.getAudioTrackMap(),p=wy.AudioMixerPlugin.mix({targetTrack:u,sourceList:h.get(d.id).sourceList,trackList:h.get(d.id).trackList}),l=p):l=u,e.next=36;break;case 27:if(!(l=c.getVideoTracks()[0])||!this.isVideoTrackBeautified()){e.next=32;break}return e.next=31,this.generateBeautyTrack(l);case 31:l=e.sent;case 32:if(!(f=c.getAudioTracks()[0])||!Ac){e.next=36;break}return e.next=36,this.replaceTrack_(f);case 36:return e.next=38,this.replaceTrack_(l);case 38:this.updateDeviceIdInUse(),(g=this.getConnection())&&(m=g.getUserId(),_=g.getTinyId(),v=Gg,E="switch camera",r&&(v=Hg,E="switch microphone"),hm(m,{eventId:v,eventDesc:E,timestamp:Es(),userId:m,tinyId:_})),this.log_.info("switch ".concat(r?"microphone":"camera"," success ")),this.setIsReadyToPublish(!0);case 43:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"addTrack",value:(p=o(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isAddingTrack_){e.next=2;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:T_})});case 2:if(!this.isRemovingTrack_){e.next=4;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:I_})});case 4:if(this.publishState_!==vu){e.next=6;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:R_})});case 6:if(n=this.getMediaStream()){e.next=9;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:w_})});case 9:if(!(t.kind===Jl&&n.getAudioTracks().length>0||t.kind===Xl&&n.getVideoTracks().length>0)){e.next=11;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:k_})});case 11:if(t.kind===Xl&&"getSettings"in MediaStreamTrack.prototype&&(r=t.getSettings(),!this.videoSetting_||r.width===this.videoSetting_.width&&r.height===this.videoSetting_.height||this.log_.warn("video resolution of the track (".concat(r.width," x ").concat(r.height,") shall be kept the same as the previous: ").concat(this.videoSetting_.width," x ").concat(this.videoSetting_.height,". It may cause abnormal Cloud Recording."))),e.prev=12,this.isAddingTrack_=!0,this.keepMuteState(t),n.addTrack(t),!(i=this.getConnection())){e.next=20;break}return e.next=20,i.addTrack(t);case 20:t.kind===Jl?(this.audio_=!0,this.updateAudioPlayingState(!0)):(this.video_=!0,this.updateVideoPlayingState(!0)),this.isAddingTrack_=!1,e.next=29;break;case 24:throw e.prev=24,e.t0=e.catch(12),n.removeTrack(t),this.isAddingTrack_=!1,e.t0;case 29:case"end":return e.stop()}}),e,this,[[12,24]])}))),function(e){return p.apply(this,arguments)})},{key:"removeTrack",value:(h=o(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.kind!==Jl){e.next=2;break}throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:O_})});case 2:if(!this.isAddingTrack_){e.next=4;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:N_})});case 4:if(!this.isRemovingTrack_){e.next=6;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:L_})});case 6:if(this.publishState_!==vu){e.next=8;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:P_})});case 8:if(n=this.getMediaStream()){e.next=11;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:w_})});case 11:if(-1!==n.getTracks().indexOf(t)){e.next=13;break}throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:D_})});case 13:if(1!==n.getTracks().length){e.next=15;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:M_})});case 15:if(e.prev=15,this.isRemovingTrack_=!0,!(r=this.getConnection())){e.next=21;break}return e.next=21,r.removeTrack(t);case 21:n.removeTrack(t),t.kind===Jl?(this.audio_=!1,this.updateAudioPlayingState(!1)):(this.video_=!1,this.updateVideoPlayingState(!1)),this.isRemovingTrack_=!1,e.next=30;break;case 26:throw e.prev=26,e.t0=e.catch(15),this.isRemovingTrack_=!1,e.t0;case 30:case"end":return e.stop()}}),e,this,[[15,26]])}))),function(e){return h.apply(this,arguments)})},{key:"replaceTrack",value:(l=o(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getMediaStream()){e.next=3;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:C_})});case 3:if(this.publishState_!==vu){e.next=5;break}throw new Vd({code:Fd.INVALID_OPERATION,message:uv({key:b_})});case 5:if(!(t.kind===Jl&&n.getAudioTracks().length<=0||t.kind===Xl&&n.getVideoTracks().length<=0)){e.next=7;break}throw new Vd({code:Fd.INVALID_PARAMETER,message:uv({key:x_,data:t})});case 7:if(t.kind===Xl&&"getSettings"in MediaStreamTrack.prototype&&(r=t.getSettings(),!this.videoSetting_||r.width===this.videoSetting_.width&&r.height===this.videoSetting_.height||this.log_.warn("video resolution of the track (".concat(r.width," x ").concat(r.height,") shall be kept the same as the previous: ").concat(this.videoSetting_.width," x ").concat(this.videoSetting_.height,". It may cause abnormal Cloud Recording."))),this.keepMuteState(t),t.kind===Jl?(n.removeTrack(n.getAudioTracks()[0]),n.addTrack(t),v(d(E.prototype),"restartAudio",this).call(this)):(n.removeTrack(n.getVideoTracks()[0]),n.addTrack(t),v(d(E.prototype),"restartVideo",this).call(this)),!(i=this.getConnection())){e.next=14;break}return e.next=14,i.replaceTrack(t);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"updateStream",value:(a=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,a,c,l,u,d,h,p,f,g,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mediaStream_){e.next=2;break}return e.abrupt("return");case 2:return this.log_.info("updateStream() try to recover local stream"),e.prev=3,e.next=6,wy.getCameras();case 6:return n=e.sent,e.next=9,wy.getMicrophones();case 9:if(r=e.sent,i=this.audio_&&t.audio,(o=this.video_&&t.video)&&0===n.length&&(o=!1,this.log_.info("updateStream() video flag is true, but no camera detected, set video to false")),i&&0===r.length&&(i=!1,this.log_.info("updateStream() audio flag is true, but no microphone detected, set audio to false")),!1!==i||!1!==o){e.next=17;break}return this.log_.info("updateStream() both audio and video are false, recover stream aborted"),e.abrupt("return");case 17:return s=t&&n.findIndex((function(e){return e.deviceId===t.cameraId}))>=0,a=t&&r.findIndex((function(e){return e.deviceId===t.microphoneId}))>=0,e.next=21,uy({audio:i,video:o,cameraId:s?t.cameraId:void 0,microphoneId:a?t.microphoneId:void 0,facingMode:this.facingMode_,width:this.videoProfile_.width,height:this.videoProfile_.height,frameRate:this.videoProfile_.frameRate,sampleRate:this.audioProfile_.sampleRate,channelCount:this.audioProfile_.channelCount});case 21:c=e.sent,l=c.getTracks(),u=0;case 24:if(!(u<l.length)){e.next=49;break}if((d=l[u]).kind!==Jl||!this.isAudioTrackMixed()){e.next=37;break}if(h=this.getAudioTrack(),p=wy.AudioMixerPlugin.getAudioTrackMap(),(f=p.get(h.id)).hasMicrophone){e.next=33;break}return d.stop(),e.abrupt("continue",46);case 33:return g=wy.AudioMixerPlugin.mix({targetTrack:d,sourceList:f.sourceList,trackList:f.trackList}),e.next=36,this.replaceTrack_(g);case 36:return e.abrupt("continue",46);case 37:if(d.kind!==Xl||!this.isVideoTrackBeautified()){e.next=44;break}return e.next=40,this.generateBeautyTrack(d);case 40:return m=e.sent,e.next=43,this.replaceTrack_(m);case 43:return e.abrupt("continue",46);case 44:return e.next=46,this.replaceTrack_(d);case 46:u++,e.next=24;break;case 49:this.updateDeviceIdInUse(),jd.logSuccessEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:xl}),this.log_.info("updateStream() recover local stream successfully"),e.next=59;break;case 54:e.prev=54,e.t0=e.catch(3),jd.logFailedEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:xl,error:e.t0}),this.log_.error("updateStream() failed to recover local stream, "+e.t0),this.emitter_.emit(TE,new Vd({code:Fd.DEVICE_AUTO_RECOVER_FAILED,message:e.t0.message}));case 59:case"end":return e.stop()}}),e,this,[[3,54]])}))),function(e){return a.apply(this,arguments)})},{key:"replaceTrack_",value:(i=o(regeneratorRuntime.mark((function e(t){var n,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.mediaStream_.getAudioTracks(),r=this.mediaStream_.getVideoTracks(),!(t.kind===Jl&&n.length<=0||t.kind===Xl&&r.length<=0)){e.next=5;break}return this.log_.info("there is no previous ".concat(t.kind," track, replacement ignored")),e.abrupt("return");case 5:if(this.keepMuteState(t),t.kind===Jl?(this.mediaStream_.removeTrack(n[0]),this.mediaStream_.addTrack(t),v(d(E.prototype),"restartAudio",this).call(this)):("getSettings"in MediaStreamTrack.prototype&&(i=t.getSettings(),!this.videoSetting_||i.width===this.videoSetting_.width&&i.height===this.videoSetting_.height||this.log_.warn("the resolution of video track to be replaced (".concat(i.width," x ").concat(i.height,") is different from the previous video settings (").concat(this.videoSetting_.width," x ").concat(this.videoSetting_.height,"). It may cause a cloud recording exception"))),this.mediaStream_.removeTrack(r[0]),this.mediaStream_.addTrack(t),v(d(E.prototype),"restartVideo",this).call(this)),!(o=this.getConnection())){e.next=11;break}return e.next=11,o.replaceTrack(t);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"updateDeviceIdInUse",value:function(){var e=this;if(!this.mediaStream_)return this.cameraId_="",this.cameraGroupId_="",this.microphoneId_="",void(this.microphoneGroupId_="");"getSettings"in MediaStreamTrack.prototype&&this.mediaStream_.getTracks().forEach((function(t){if(t.kind===Jl&&e.isAudioTrackMixed()){var n=e.getMicrophoneTrackMixed();if(n){var r=n.getSettings(),i=r.deviceId,o=r.groupId;i&&(e.microphoneId_=i,e.microphoneGroupId_=o)}}else if(t.kind===Xl&&e.isVideoTrackBeautified()){var s=e.getBeautyOriginTrack();if(s){var a=s.getSettings(),c=a.deviceId,l=a.groupId;c&&(e.cameraId_=c,e.cameraGroupId_=l)}}else{var u=t.getSettings(),d=u.deviceId,h=u.groupId;d&&(t.kind===Jl?(e.microphoneId_=d,e.microphoneGroupId_=h):t.kind!==Xl||e.screen_||(e.cameraId_=d,e.cameraGroupId_=h))}}));var t=this.mediaStream_.getAudioTracks(),n=this.mediaStream_.getVideoTracks();t&&0===t.length&&(this.microphoneId_="",this.microphoneGroupId_=""),n&&0===n.length&&(this.cameraId_="",this.cameraGroupId_="")}},{key:"isAudioTrackMixed",value:function(){if(wy.AudioMixerPlugin){var e=wy.AudioMixerPlugin.getAudioTrackMap(),t=this.getAudioTrack();if(e&&t&&e.has(t.id))return!0}return!1}},{key:"getMicrophoneTrackMixed",value:function(){if(wy.AudioMixerPlugin){var e=wy.AudioMixerPlugin.getAudioTrackMap(),t=this.getAudioTrack();if(e&&t&&e.has(t.id)){var n=e.get(t.id);return n.hasMicrophone?n.microphoneTrack:null}}return null}},{key:"isVideoTrackBeautified",value:function(){if(wy.beautyTrackMap){var e=wy.beautyTrackMap,t=this.getVideoTrack();if(t&&e.has(t.id))return!0}return!1}},{key:"getBeautyOriginTrack",value:function(){if(wy.beautyTrackMap){var e=wy.beautyTrackMap,t=this.getVideoTrack();if(t&&e.has(t.id)){var n=e.get(t.id);if(n.originTrack)return n.originTrack}}return null}},{key:"generateBeautyTrack",value:(t=o(regeneratorRuntime.mark((function e(t){var n,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,r=this.getVideoTrack(),i=wy.beautyTrackMap.get(r.id),o=i.param,i.type){e.next=8;break}n=i.pluginInstance.generateBeautyTrack(t),e.next=22;break;case 8:e.t0=i.type,e.next="beauty"===e.t0?11:"virtual"===e.t0?13:"mixed"===e.t0?17:21;break;case 11:return n=i.pluginInstance.generateBeautyTrack(t),e.abrupt("break",22);case 13:return e.next=15,i.pluginInstance.generateVirtualTrack({videoTrack:t,type:o.type,img:o.img});case 15:return n=e.sent,e.abrupt("break",22);case 17:return e.next=19,i.pluginInstance.generateMixedTrack({videoTrack:t,type:o.type,img:o.img});case 19:return n=e.sent,e.abrupt("break",22);case 21:return e.abrupt("break",22);case 22:return i.pluginInstance.deleteSource(r.id),this.log_.info("regenerate beauty track, track id = ".concat(t.id)),e.abrupt("return",n);case 25:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getScreen",value:function(){return this.screen_}},{key:"hasScreenTrack",value:function(){if(this.screen_)return!0;var e=this.getVideoTrack();return!!e&&(e.contentHint===hu||e.contentHint===pu)}},{key:"getVideo",value:function(){return this.video_}},{key:"getAudio",value:function(){return this.audio_}},{key:"getCameraId",value:function(){return this.cameraId_}},{key:"getMicrophoneId",value:function(){return this.microphoneId_}},{key:"getMicrophoneGroupId",value:function(){return this.microphoneGroupId_}},{key:"getIsReadyToPublish",value:function(){return this.isReadyToPublish_}},{key:"setIsReadyToPublish",value:function(e){this.isReadyToPublish_=e}},{key:"setPublishState",value:function(e){this.publishState_=e}},{key:"setBeautyStatus",value:function(e){this.beautyStatus_=!!e}},{key:"getBeautyStatus",value:function(){return this.beautyStatus_}},{key:"onStreamPublished",value:function(e){var t=e.localStream,n=e.client;if(t===this){this.client_=n,this.log_.setUserId(n.getUserId()),this.log_.setSdkAppId(n.getSDKAppId());var r=this.getAudioTrack(),i=this.getVideoTrack();if(r){var o=!r.enabled;this.setMutedFlag(Jl,o)}if(i){var s=!i.enabled;this.setMutedFlag(Xl,s)}this.connection_&&this.connection_.sendMutedFlag(this.mutedFlag_)}}},{key:"keepMuteState",value:function(e){e instanceof MediaStreamTrack&&this.mutedFlag_&(e.kind===Xl?1:4)&&(e.enabled=!1,this.log_.warn("prev ".concat(e.kind," track is muted, keep mute state")))}},{key:"onVideoTrackStopped",value:function(e){var t=e.stream,n=e.type;t!==this||!this.video_||!this.cameraId_||this.recoverCaptureCount_>10||(Va||ja)&&n===ru||(this.recoverCaptureCount_+=1,jd.uploadEvent({log:"stat-local-video-".concat(n),userId:this.userId_}),this.updateStream({audio:!1,video:!0,cameraId:this.cameraId_}))}},{key:"onAudioTrackStopped",value:function(e){var t=e.stream,n=e.type;t!==this||!this.audio_||!this.microphoneId_||this.recoverCaptureCount_>10||(Va||ja)&&n===ru||(this.recoverCaptureCount_+=1,jd.uploadEvent({log:"stat-local-audio-".concat(n),userId:this.userId_}),this.updateStream({audio:!0,video:!1,microphoneId:this.microphoneId_}))}},{key:"setAudioVolume",value:function(e){v(d(E.prototype),"setAudioVolume",this).call(this,e)}},{key:"clearCanvas",value:function(){this.canvasInterval_&&(wv.clearInterval(this.canvasInterval_),this.canvasInterval_=-1,this.canvas_=null)}},{key:"genCanvasTrack",value:function(e){var t=this;this.log_.info("gen canvas track");var n=e.getSettings(),r=n.width,i=n.height,o=n.frameRate;this.canvas_=document.createElement("canvas");var s=this.canvas_.getContext("2d");return this.canvas_.width=r,this.canvas_.height=i,this.canvasInterval_=wv.setInterval((function(){if(t.hasVideo()){var e=t.getVideoTrack().getSettings();e.width===t.canvas_.width&&e.height===t.canvas_.height||(t.canvas_.width=e.width,t.canvas_.height=e.height)}t.videoPlayer_&&t.videoPlayer_.element_&&s.drawImage(t.videoPlayer_.element_,0,0,t.canvas_.width,t.canvas_.height)}),Math.max(66,Math.floor(1e3/o))),this.canvas_.captureStream().getVideoTracks()[0]}}]),E}(AA)).prototype,"switchDevice",[vy],Object.getOwnPropertyDescriptor(Ey.prototype,"switchDevice"),Ey.prototype),Ey),Ty=0,Iy=0,Ry=(yy=mA(gA.TRTC.createClient),Sy=mA(gA.TRTC.createStream),C((by=function(){function e(){s(this,e),this.name_=yu,this.VERSION="4.11.12",this.Logger={loggerManager:Cf,LogLevel:{TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,NONE:5},setLogLevel:function(e){Cf.setLogLevel(e),hh()&&e<=1&&lv()},enableUploadLog:function(){Cf.enableUploadLog()},disableUploadLog:function(){Cf.disableUploadLog()}}}var t,r,i,a,l;return c(e,[{key:"checkSystemRequirements",value:(l=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uv();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})},{key:"isScreenShareSupported",value:function(){return Vv()}},{key:"isSmallStreamSupported",value:function(){return eE()}},{key:"getDevices",value:(a=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zv()&&!qv()){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:return t=e.sent,e.abrupt("return",t.filter((function(e){return e.kind!==uu||"communications"!=e.deviceId})).map((function(e,t){var n=e.label;e.label||(n=e.kind+"_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),r})));case 6:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"getCameras",value:(i=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zv()&&!qv()){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:return t=e.sent,e.abrupt("return",t.filter((function(e){return e.kind===du})).map((function(e,t){var n=e.label;e.label||(n="camera_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),r})));case 6:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"getMicrophones",value:(r=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zv()&&!qv()){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:return t=e.sent,e.abrupt("return",t.filter((function(e){return e.kind===uu&&"communications"!==e.deviceId})).map((function(e,t){var n=e.label;e.label||(n="microphone_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),r})));case 6:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"getSpeakers",value:(t=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zv()&&!qv()){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:return t=e.sent,e.abrupt("return",t.filter((function(e){return"audiooutput"===e.kind})).map((function(e,t){var n=e.label;e.label||(n="speaker_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),r})));case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"createClient",value:function(e){Tf&&(Tf=!1,Cf.getLogLevel()!=wy.Logger.LogLevel.NONE&&(console.info("******************************************************************************"),console.info("*   TRTC Web SDK"),console.info("*   API Document: "+"".concat(Ru,"index.html")),console.info("*   Changelog: https://cloud.tencent.com/document/product/647/38958"),console.info("*   Report issues: https://github.com/tencentyun/TRTCSDK/issues"),console.info("******************************************************************************")),Cf.info("TRTC Web SDK Version: 4.11.12"),Cf.info("UserAgent: "+navigator.userAgent),Cf.info("URL of current page: "+location.href));var t={version:this.VERSION},r=new ly(n(n(n({},t),e),{},{seq:++Ty}));return gh.emit(kh,{client:r}),r}},{key:"createStream",value:function(e){return new Cy(n(n({},e),{},{seq:++Iy}))}}]),e}()).prototype,"createClient",[yy],Object.getOwnPropertyDescriptor(by.prototype,"createClient"),by.prototype),C(by.prototype,"createStream",[Sy],Object.getOwnPropertyDescriptor(by.prototype,"createStream"),by.prototype),by);zv();var wy=new Ry;return wy}))}).call(this,n("c8ba"))},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("e330"),i=n("1d80"),o=n("577e"),s=n("5899"),a=r("".replace),c="["+s+"]",l=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),d=function(e){return function(t){var n=o(i(t));return 1&e&&(n=a(n,l,"")),2&e&&(n=a(n,u,"")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},5924:function(e,t,n){"use strict";t.__esModule=!0,t.isInContainer=t.getScrollContainer=t.isScroll=t.getStyle=t.once=t.off=t.on=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.hasClass=g,t.addClass=m,t.removeClass=_,t.setStyle=E;var i=n("2b0e"),o=s(i);function s(e){return e&&e.__esModule?e:{default:e}}var a=o.default.prototype.$isServer,c=/([\:\-\_]+(.))/g,l=/^moz([A-Z])/,u=a?0:Number(document.documentMode),d=function(e){return(e||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},h=function(e){return e.replace(c,(function(e,t,n,r){return r?n.toUpperCase():n})).replace(l,"Moz$1")},p=t.on=function(){return!a&&document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)}}(),f=t.off=function(){return!a&&document.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)}}();t.once=function(e,t,n){var r=function r(){n&&n.apply(this,arguments),f(e,t,r)};p(e,t,r)};function g(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function m(e,t){if(e){for(var n=e.className,r=(t||"").split(" "),i=0,o=r.length;i<o;i++){var s=r[i];s&&(e.classList?e.classList.add(s):g(e,s)||(n+=" "+s))}e.classList||e.setAttribute("class",n)}}function _(e,t){if(e&&t){for(var n=t.split(" "),r=" "+e.className+" ",i=0,o=n.length;i<o;i++){var s=n[i];s&&(e.classList?e.classList.remove(s):g(e,s)&&(r=r.replace(" "+s+" "," ")))}e.classList||e.setAttribute("class",d(r))}}var v=t.getStyle=u<9?function(e,t){if(!a){if(!e||!t)return null;t=h(t),"float"===t&&(t="styleFloat");try{switch(t){case"opacity":try{return e.filters.item("alpha").opacity/100}catch(n){return 1}default:return e.style[t]||e.currentStyle?e.currentStyle[t]:null}}catch(n){return e.style[t]}}}:function(e,t){if(!a){if(!e||!t)return null;t=h(t),"float"===t&&(t="cssFloat");try{var n=document.defaultView.getComputedStyle(e,"");return e.style[t]||n?n[t]:null}catch(r){return e.style[t]}}};function E(e,t,n){if(e&&t)if("object"===("undefined"===typeof t?"undefined":r(t)))for(var i in t)t.hasOwnProperty(i)&&E(e,i,t[i]);else t=h(t),"opacity"===t&&u<9?e.style.filter=isNaN(n)?"":"alpha(opacity="+100*n+")":e.style[t]=n}var A=t.isScroll=function(e,t){if(!a){var n=null!==t&&void 0!==t,r=v(e,n?t?"overflow-y":"overflow-x":"overflow");return r.match(/(scroll|auto|overlay)/)}};t.getScrollContainer=function(e,t){if(!a){var n=e;while(n){if([window,document,document.documentElement].includes(n))return window;if(A(n,t))return n;n=n.parentNode}return n}},t.isInContainer=function(e,t){if(a||!e||!t)return!1;var n=e.getBoundingClientRect(),r=void 0;return r=[window,document,document.documentElement,null,void 0].includes(t)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:t.getBoundingClientRect(),n.top<r.bottom&&n.bottom>r.top&&n.right>r.left&&n.left<r.right}},5926:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){var t=+e;return t!==t||0===t?0:(t>0?r:n)(t)}},"597f":function(e,t){e.exports=function(e,t,n,r){var i,o=0;function s(){var s=this,a=Number(new Date)-o,c=arguments;function l(){o=Number(new Date),n.apply(s,c)}function u(){i=void 0}r&&!i&&l(),i&&clearTimeout(i),void 0===r&&a>e?l():!0!==t&&(i=setTimeout(r?u:l,void 0===r?e-a:e))}return"boolean"!==typeof t&&(r=n,n=t,t=void 0),s}},"59ed":function(e,t,n){var r=n("da84"),i=n("1626"),o=n("0d51"),s=r.TypeError;e.exports=function(e){if(i(e))return e;throw s(o(e)+" is not a function")}},"5a0c":function(e,t,n){!function(t,n){e.exports=n()}(0,(function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",o="minute",s="hour",a="day",c="week",l="month",u="quarter",d="year",h="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},_=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},v={s:_,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+_(r,2,"0")+":"+_(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,l),o=n-i<0,s=t.clone().add(r+(o?-1:1),l);return+(-(r+(n-i)/(o?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:d,w:c,d:a,D:h,h:s,m:o,s:i,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},E="en",A={};A[E]=m;var y=function(e){return e instanceof T},S=function(e,t,n){var r;if(!e)return E;if("string"==typeof e)A[e]&&(r=e),t&&(A[e]=t,r=e);else{var i=e.name;A[i]=e,r=i}return!n&&r&&(E=r),r||!n&&E},b=function(e,t){if(y(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new T(n)},C=v;C.l=S,C.i=y,C.w=function(e,t){return b(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function m(e){this.$L=S(e.locale,null,!0),this.parse(e)}var _=m.prototype;return _.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(f);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},_.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},_.$utils=function(){return C},_.isValid=function(){return!(this.$d.toString()===p)},_.isSame=function(e,t){var n=b(e);return this.startOf(t)<=n&&n<=this.endOf(t)},_.isAfter=function(e,t){return b(e)<this.startOf(t)},_.isBefore=function(e,t){return this.endOf(t)<b(e)},_.$g=function(e,t,n){return C.u(e)?this[t]:this.set(n,e)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(e,t){var n=this,r=!!C.u(t)||t,u=C.p(e),p=function(e,t){var i=C.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(a)},f=function(e,t){return C.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,m=this.$M,_=this.$D,v="set"+(this.$u?"UTC":"");switch(u){case d:return r?p(1,0):p(31,11);case l:return r?p(1,m):p(0,m+1);case c:var E=this.$locale().weekStart||0,A=(g<E?g+7:g)-E;return p(r?_-A:_+(6-A),m);case a:case h:return f(v+"Hours",0);case s:return f(v+"Minutes",1);case o:return f(v+"Seconds",2);case i:return f(v+"Milliseconds",3);default:return this.clone()}},_.endOf=function(e){return this.startOf(e,!1)},_.$set=function(e,t){var n,c=C.p(e),u="set"+(this.$u?"UTC":""),p=(n={},n[a]=u+"Date",n[h]=u+"Date",n[l]=u+"Month",n[d]=u+"FullYear",n[s]=u+"Hours",n[o]=u+"Minutes",n[i]=u+"Seconds",n[r]=u+"Milliseconds",n)[c],f=c===a?this.$D+(t-this.$W):t;if(c===l||c===d){var g=this.clone().set(h,1);g.$d[p](f),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},_.set=function(e,t){return this.clone().$set(e,t)},_.get=function(e){return this[C.p(e)]()},_.add=function(r,u){var h,p=this;r=Number(r);var f=C.p(u),g=function(e){var t=b(p);return C.w(t.date(t.date()+Math.round(e*r)),p)};if(f===l)return this.set(l,this.$M+r);if(f===d)return this.set(d,this.$y+r);if(f===a)return g(1);if(f===c)return g(7);var m=(h={},h[o]=t,h[s]=n,h[i]=e,h)[f]||1,_=this.$d.getTime()+r*m;return C.w(_,this)},_.subtract=function(e,t){return this.add(-1*e,t)},_.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=C.z(this),o=this.$H,s=this.$m,a=this.$M,c=n.weekdays,l=n.months,u=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].substr(0,o)},d=function(e){return C.s(o%12||12,e,"0")},h=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:C.s(a+1,2,"0"),MMM:u(n.monthsShort,a,l,3),MMMM:u(l,a),D:this.$D,DD:C.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,c,2),ddd:u(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:C.s(o,2,"0"),h:d(1),hh:d(2),a:h(o,s,!0),A:h(o,s,!1),m:String(s),mm:C.s(s,2,"0"),s:String(this.$s),ss:C.s(this.$s,2,"0"),SSS:C.s(this.$ms,3,"0"),Z:i};return r.replace(g,(function(e,t){return t||f[e]||i.replace(":","")}))},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(r,h,p){var f,g=C.p(h),m=b(r),_=(m.utcOffset()-this.utcOffset())*t,v=this-m,E=C.m(this,m);return E=(f={},f[d]=E/12,f[l]=E,f[u]=E/3,f[c]=(v-_)/6048e5,f[a]=(v-_)/864e5,f[s]=v/n,f[o]=v/t,f[i]=v/e,f)[g]||v,p?E:C.a(E)},_.daysInMonth=function(){return this.endOf(l).$D},_.$locale=function(){return A[this.$L]},_.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=S(e,t,!0);return r&&(n.$L=r),n},_.clone=function(){return C.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},m}(),I=T.prototype;return b.prototype=I,[["$ms",r],["$s",i],["$m",o],["$H",s],["$W",a],["$M",l],["$y",d],["$D",h]].forEach((function(e){I[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),b.extend=function(e,t){return e.$i||(e(t,T,b),e.$i=!0),b},b.locale=S,b.isDayjs=y,b.unix=function(e){return b(1e3*e)},b.en=A[E],b.Ls=A,b.p={},b}))},"5a34":function(e,t,n){var r=n("da84"),i=n("44e7"),o=r.TypeError;e.exports=function(e){if(i(e))throw o("The method doesn't accept regular expressions");return e}},"5a94":function(e,t,n){var r=n("b367")("keys"),i=n("8b1a");e.exports=function(e){return r[e]||(r[e]=i(e))}},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5c96":function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=45)}([function(e,t){e.exports=n("d940")},function(e,t){e.exports=n("5924")},function(e,t){e.exports=n("8122")},function(e,t){e.exports=n("d010")},function(e,t){e.exports=n("6b7c")},function(e,t){e.exports=n("e974")},function(e,t){e.exports=n("2b0e")},function(e,t){e.exports=n("7f4d")},function(e,t){e.exports=n("f3ad")},function(e,t){e.exports=n("2bb5")},function(e,t){e.exports=n("417f")},function(e,t){e.exports=n("5128")},function(e,t){e.exports=n("4897")},function(e,t){e.exports=n("eedf")},function(e,t){e.exports=n("4010")},function(e,t){e.exports=n("a742")},function(e,t){e.exports=n("0e15")},function(e,t){e.exports=n("dcdc")},function(e,t){e.exports=n("14e9")},function(e,t){e.exports=n("d397")},function(e,t){e.exports=n("d7d1")},function(e,t){e.exports=n("5488")},function(e,t){e.exports=n("41f8")},function(e,t){e.exports=n("12f2")},function(e,t){e.exports=n("92fa")},function(e,t){e.exports=n("597f")},function(e,t){e.exports=n("299c")},function(e,t){e.exports=n("2a5e")},function(e,t){e.exports=n("845f")},function(e,t){e.exports=n("8bbc")},function(e,t){e.exports=n("e62d")},function(e,t){e.exports=n("7fc1")},function(e,t){e.exports=n("c56a")},function(e,t){e.exports=n("c284")},function(e,t){e.exports=n("e452")},function(e,t){e.exports=n("9619")},function(e,t){e.exports=n("4e4b")},function(e,t){e.exports=n("e772")},function(e,t){e.exports=n("c098")},function(e,t){e.exports=n("722f")},function(e,t){e.exports=n("a15e")},function(e,t){e.exports=n("e450")},function(e,t){e.exports=n("4726")},function(e,t){e.exports=n("f494")},function(e,t){e.exports=n("6ac9")},function(e,t,n){e.exports=n(46)},function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"el-pager",on:{click:e.onPagerClick}},[e.pageCount>0?n("li",{staticClass:"number",class:{active:1===e.currentPage,disabled:e.disabled}},[e._v("1")]):e._e(),e.showPrevMore?n("li",{staticClass:"el-icon more btn-quickprev",class:[e.quickprevIconClass,{disabled:e.disabled}],on:{mouseenter:function(t){e.onMouseenter("left")},mouseleave:function(t){e.quickprevIconClass="el-icon-more"}}}):e._e(),e._l(e.pagers,(function(t){return n("li",{key:t,staticClass:"number",class:{active:e.currentPage===t,disabled:e.disabled}},[e._v(e._s(t))])})),e.showNextMore?n("li",{staticClass:"el-icon more btn-quicknext",class:[e.quicknextIconClass,{disabled:e.disabled}],on:{mouseenter:function(t){e.onMouseenter("right")},mouseleave:function(t){e.quicknextIconClass="el-icon-more"}}}):e._e(),e.pageCount>1?n("li",{staticClass:"number",class:{active:e.currentPage===e.pageCount,disabled:e.disabled}},[e._v(e._s(e.pageCount))]):e._e()],2)},i=[];r._withStripped=!0;var o={name:"ElPager",props:{currentPage:Number,pageCount:Number,pagerCount:Number,disabled:Boolean},watch:{showPrevMore:function(e){e||(this.quickprevIconClass="el-icon-more")},showNextMore:function(e){e||(this.quicknextIconClass="el-icon-more")}},methods:{onPagerClick:function(e){var t=e.target;if("UL"!==t.tagName&&!this.disabled){var n=Number(e.target.textContent),r=this.pageCount,i=this.currentPage,o=this.pagerCount-2;-1!==t.className.indexOf("more")&&(-1!==t.className.indexOf("quickprev")?n=i-o:-1!==t.className.indexOf("quicknext")&&(n=i+o)),isNaN(n)||(n<1&&(n=1),n>r&&(n=r)),n!==i&&this.$emit("change",n)}},onMouseenter:function(e){this.disabled||("left"===e?this.quickprevIconClass="el-icon-d-arrow-left":this.quicknextIconClass="el-icon-d-arrow-right")}},computed:{pagers:function(){var e=this.pagerCount,t=(e-1)/2,n=Number(this.currentPage),r=Number(this.pageCount),i=!1,o=!1;r>e&&(n>e-t&&(i=!0),n<r-t&&(o=!0));var s=[];if(i&&!o)for(var a=r-(e-2),c=a;c<r;c++)s.push(c);else if(!i&&o)for(var l=2;l<e;l++)s.push(l);else if(i&&o)for(var u=Math.floor(e/2)-1,d=n-u;d<=n+u;d++)s.push(d);else for(var h=2;h<r;h++)s.push(h);return this.showPrevMore=i,this.showNextMore=o,s}},data:function(){return{current:null,showPrevMore:!1,showNextMore:!1,quicknextIconClass:"el-icon-more",quickprevIconClass:"el-icon-more"}}},s=o;function a(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}var c=a(s,r,i,!1,null,null,null);c.options.__file="packages/pagination/src/pager.vue";var l=c.exports,u=n(36),d=n.n(u),h=n(37),p=n.n(h),f=n(8),g=n.n(f),m=n(4),_=n.n(m),v=n(2),E={name:"ElPagination",props:{pageSize:{type:Number,default:10},small:Boolean,total:Number,pageCount:Number,pagerCount:{type:Number,validator:function(e){return(0|e)===e&&e>4&&e<22&&e%2===1},default:7},currentPage:{type:Number,default:1},layout:{default:"prev, pager, next, jumper, ->, total"},pageSizes:{type:Array,default:function(){return[10,20,30,40,50,100]}},popperClass:String,prevText:String,nextText:String,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean},data:function(){return{internalCurrentPage:1,internalPageSize:0,lastEmittedPage:-1,userChangePageSize:!1}},render:function(e){var t=this.layout;if(!t)return null;if(this.hideOnSinglePage&&(!this.internalPageCount||1===this.internalPageCount))return null;var n=e("div",{class:["el-pagination",{"is-background":this.background,"el-pagination--small":this.small}]}),r={prev:e("prev"),jumper:e("jumper"),pager:e("pager",{attrs:{currentPage:this.internalCurrentPage,pageCount:this.internalPageCount,pagerCount:this.pagerCount,disabled:this.disabled},on:{change:this.handleCurrentChange}}),next:e("next"),sizes:e("sizes",{attrs:{pageSizes:this.pageSizes}}),slot:e("slot",[this.$slots.default?this.$slots.default:""]),total:e("total")},i=t.split(",").map((function(e){return e.trim()})),o=e("div",{class:"el-pagination__rightwrapper"}),s=!1;return n.children=n.children||[],o.children=o.children||[],i.forEach((function(e){"->"!==e?s?o.children.push(r[e]):n.children.push(r[e]):s=!0})),s&&n.children.unshift(o),n},components:{Prev:{render:function(e){return e("button",{attrs:{type:"button",disabled:this.$parent.disabled||this.$parent.internalCurrentPage<=1},class:"btn-prev",on:{click:this.$parent.prev}},[this.$parent.prevText?e("span",[this.$parent.prevText]):e("i",{class:"el-icon el-icon-arrow-left"})])}},Next:{render:function(e){return e("button",{attrs:{type:"button",disabled:this.$parent.disabled||this.$parent.internalCurrentPage===this.$parent.internalPageCount||0===this.$parent.internalPageCount},class:"btn-next",on:{click:this.$parent.next}},[this.$parent.nextText?e("span",[this.$parent.nextText]):e("i",{class:"el-icon el-icon-arrow-right"})])}},Sizes:{mixins:[_.a],props:{pageSizes:Array},watch:{pageSizes:{immediate:!0,handler:function(e,t){Object(v["valueEquals"])(e,t)||Array.isArray(e)&&(this.$parent.internalPageSize=e.indexOf(this.$parent.pageSize)>-1?this.$parent.pageSize:this.pageSizes[0])}}},render:function(e){var t=this;return e("span",{class:"el-pagination__sizes"},[e("el-select",{attrs:{value:this.$parent.internalPageSize,popperClass:this.$parent.popperClass||"",size:"mini",disabled:this.$parent.disabled},on:{input:this.handleChange}},[this.pageSizes.map((function(n){return e("el-option",{attrs:{value:n,label:n+t.t("el.pagination.pagesize")}})}))])])},components:{ElSelect:d.a,ElOption:p.a},methods:{handleChange:function(e){e!==this.$parent.internalPageSize&&(this.$parent.internalPageSize=e=parseInt(e,10),this.$parent.userChangePageSize=!0,this.$parent.$emit("update:pageSize",e),this.$parent.$emit("size-change",e))}}},Jumper:{mixins:[_.a],components:{ElInput:g.a},data:function(){return{userInput:null}},watch:{"$parent.internalCurrentPage":function(){this.userInput=null}},methods:{handleKeyup:function(e){var t=e.keyCode,n=e.target;13===t&&this.handleChange(n.value)},handleInput:function(e){this.userInput=e},handleChange:function(e){this.$parent.internalCurrentPage=this.$parent.getValidCurrentPage(e),this.$parent.emitChange(),this.userInput=null}},render:function(e){return e("span",{class:"el-pagination__jump"},[this.t("el.pagination.goto"),e("el-input",{class:"el-pagination__editor is-in-pagination",attrs:{min:1,max:this.$parent.internalPageCount,value:null!==this.userInput?this.userInput:this.$parent.internalCurrentPage,type:"number",disabled:this.$parent.disabled},nativeOn:{keyup:this.handleKeyup},on:{input:this.handleInput,change:this.handleChange}}),this.t("el.pagination.pageClassifier")])}},Total:{mixins:[_.a],render:function(e){return"number"===typeof this.$parent.total?e("span",{class:"el-pagination__total"},[this.t("el.pagination.total",{total:this.$parent.total})]):""}},Pager:l},methods:{handleCurrentChange:function(e){this.internalCurrentPage=this.getValidCurrentPage(e),this.userChangePageSize=!0,this.emitChange()},prev:function(){if(!this.disabled){var e=this.internalCurrentPage-1;this.internalCurrentPage=this.getValidCurrentPage(e),this.$emit("prev-click",this.internalCurrentPage),this.emitChange()}},next:function(){if(!this.disabled){var e=this.internalCurrentPage+1;this.internalCurrentPage=this.getValidCurrentPage(e),this.$emit("next-click",this.internalCurrentPage),this.emitChange()}},getValidCurrentPage:function(e){e=parseInt(e,10);var t="number"===typeof this.internalPageCount,n=void 0;return t?e<1?n=1:e>this.internalPageCount&&(n=this.internalPageCount):(isNaN(e)||e<1)&&(n=1),(void 0===n&&isNaN(e)||0===n)&&(n=1),void 0===n?e:n},emitChange:function(){var e=this;this.$nextTick((function(){(e.internalCurrentPage!==e.lastEmittedPage||e.userChangePageSize)&&(e.$emit("current-change",e.internalCurrentPage),e.lastEmittedPage=e.internalCurrentPage,e.userChangePageSize=!1)}))}},computed:{internalPageCount:function(){return"number"===typeof this.total?Math.max(1,Math.ceil(this.total/this.internalPageSize)):"number"===typeof this.pageCount?Math.max(1,this.pageCount):null}},watch:{currentPage:{immediate:!0,handler:function(e){this.internalCurrentPage=this.getValidCurrentPage(e)}},pageSize:{immediate:!0,handler:function(e){this.internalPageSize=isNaN(e)?10:e}},internalCurrentPage:{immediate:!0,handler:function(e){this.$emit("update:currentPage",e),this.lastEmittedPage=-1}},internalPageCount:function(e){var t=this.internalCurrentPage;e>0&&0===t?this.internalCurrentPage=1:t>e&&(this.internalCurrentPage=0===e?1:e,this.userChangePageSize&&this.emitChange()),this.userChangePageSize=!1}},install:function(e){e.component(E.name,E)}},A=E,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"dialog-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[n("div",{key:e.key,ref:"dialog",class:["el-dialog",{"is-fullscreen":e.fullscreen,"el-dialog--center":e.center},e.customClass],style:e.style,attrs:{role:"dialog","aria-modal":"true","aria-label":e.title||"dialog"}},[n("div",{staticClass:"el-dialog__header"},[e._t("title",[n("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.title))])]),e.showClose?n("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:e.handleClose}},[n("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2),e.rendered?n("div",{staticClass:"el-dialog__body"},[e._t("default")],2):e._e(),e.$slots.footer?n("div",{staticClass:"el-dialog__footer"},[e._t("footer")],2):e._e()])])])},S=[];y._withStripped=!0;var b=n(11),C=n.n(b),T=n(9),I=n.n(T),R=n(3),w=n.n(R),k={name:"ElDialog",mixins:[C.a,w.a,I.a],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:""},top:{type:String,default:"15vh"},beforeClose:Function,center:{type:Boolean,default:!1},destroyOnClose:Boolean},data:function(){return{closed:!1,key:0}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick((function(){t.$refs.dialog.scrollTop=0})),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener("scroll",this.updatePopper),this.closed||this.$emit("close"),this.destroyOnClose&&this.$nextTick((function(){t.key++})))}},computed:{style:function(){var e={};return this.fullscreen||(e.marginTop=this.top,this.width&&(e.width=this.width)),e}},methods:{getMigratingConfig:function(){return{props:{size:"size is removed."}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),this.closed=!0)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")},afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},O=k,N=a(O,y,S,!1,null,null,null);N.options.__file="packages/dialog/src/component.vue";var L=N.exports;L.install=function(e){e.component(L.name,L)};var P=L,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.close,expression:"close"}],staticClass:"el-autocomplete",attrs:{"aria-haspopup":"listbox",role:"combobox","aria-expanded":e.suggestionVisible,"aria-owns":e.id}},[n("el-input",e._b({ref:"input",on:{input:e.handleInput,change:e.handleChange,focus:e.handleFocus,blur:e.handleBlur,clear:e.handleClear},nativeOn:{keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),e.highlight(e.highlightedIndex-1)},function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),e.highlight(e.highlightedIndex+1)},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleKeyEnter(t)},function(t){return!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.close(t)}]}},"el-input",[e.$props,e.$attrs],!1),[e.$slots.prepend?n("template",{slot:"prepend"},[e._t("prepend")],2):e._e(),e.$slots.append?n("template",{slot:"append"},[e._t("append")],2):e._e(),e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),e.$slots.suffix?n("template",{slot:"suffix"},[e._t("suffix")],2):e._e()],2),n("el-autocomplete-suggestions",{ref:"suggestions",class:[e.popperClass?e.popperClass:""],attrs:{"visible-arrow":"","popper-options":e.popperOptions,"append-to-body":e.popperAppendToBody,placement:e.placement,id:e.id}},e._l(e.suggestions,(function(t,r){return n("li",{key:r,class:{highlighted:e.highlightedIndex===r},attrs:{id:e.id+"-item-"+r,role:"option","aria-selected":e.highlightedIndex===r},on:{click:function(n){e.select(t)}}},[e._t("default",[e._v("\n        "+e._s(t[e.valueKey])+"\n      ")],{item:t})],2)})),0)],1)},M=[];D._withStripped=!0;var x=n(16),B=n.n(x),U=n(10),F=n.n(U),V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-autocomplete-suggestion el-popper",class:{"is-loading":!e.parent.hideLoading&&e.parent.loading},style:{width:e.dropdownWidth},attrs:{role:"region"}},[n("el-scrollbar",{attrs:{tag:"ul","wrap-class":"el-autocomplete-suggestion__wrap","view-class":"el-autocomplete-suggestion__list"}},[!e.parent.hideLoading&&e.parent.loading?n("li",[n("i",{staticClass:"el-icon-loading"})]):e._t("default")],2)],1)])},j=[];V._withStripped=!0;var G=n(5),H=n.n(G),Q=n(18),W=n.n(Q),q={components:{ElScrollbar:W.a},mixins:[H.a,w.a],componentName:"ElAutocompleteSuggestions",data:function(){return{parent:this.$parent,dropdownWidth:""}},props:{options:{default:function(){return{gpuAcceleration:!1}}},id:String},methods:{select:function(e){this.dispatch("ElAutocomplete","item-click",e)}},updated:function(){var e=this;this.$nextTick((function(t){e.popperJS&&e.updatePopper()}))},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$refs.input.$refs.input||this.$parent.$refs.input.$refs.textarea,this.referenceList=this.$el.querySelector(".el-autocomplete-suggestion__list"),this.referenceList.setAttribute("role","listbox"),this.referenceList.setAttribute("id",this.id)},created:function(){var e=this;this.$on("visible",(function(t,n){e.dropdownWidth=n+"px",e.showPopper=t}))}},z=q,Z=a(z,V,j,!1,null,null,null);Z.options.__file="packages/autocomplete/src/autocomplete-suggestions.vue";var $=Z.exports,K=n(23),Y=n.n(K),J={name:"ElAutocomplete",mixins:[w.a,Y()("input"),I.a],inheritAttrs:!1,componentName:"ElAutocomplete",components:{ElInput:g.a,ElAutocompleteSuggestions:$},directives:{Clickoutside:F.a},props:{valueKey:{type:String,default:"value"},popperClass:String,popperOptions:Object,placeholder:String,clearable:{type:Boolean,default:!1},disabled:Boolean,name:String,size:String,value:String,maxlength:Number,minlength:Number,autofocus:Boolean,fetchSuggestions:Function,triggerOnFocus:{type:Boolean,default:!0},customItem:String,selectWhenUnmatched:{type:Boolean,default:!1},prefixIcon:String,suffixIcon:String,label:String,debounce:{type:Number,default:300},placement:{type:String,default:"bottom-start"},hideLoading:Boolean,popperAppendToBody:{type:Boolean,default:!0},highlightFirstItem:{type:Boolean,default:!1}},data:function(){return{activated:!1,suggestions:[],loading:!1,highlightedIndex:-1,suggestionDisabled:!1}},computed:{suggestionVisible:function(){var e=this.suggestions,t=Array.isArray(e)&&e.length>0;return(t||this.loading)&&this.activated},id:function(){return"el-autocomplete-"+Object(v["generateId"])()}},watch:{suggestionVisible:function(e){var t=this.getInput();t&&this.broadcast("ElAutocompleteSuggestions","visible",[e,t.offsetWidth])}},methods:{getMigratingConfig:function(){return{props:{"custom-item":"custom-item is removed, use scoped slot instead.",props:"props is removed, use value-key instead."}}},getData:function(e){var t=this;this.suggestionDisabled||(this.loading=!0,this.fetchSuggestions(e,(function(e){t.loading=!1,t.suggestionDisabled||(Array.isArray(e)?(t.suggestions=e,t.highlightedIndex=t.highlightFirstItem?0:-1):console.error("[Element Error][Autocomplete]autocomplete suggestions must be an array"))})))},handleInput:function(e){if(this.$emit("input",e),this.suggestionDisabled=!1,!this.triggerOnFocus&&!e)return this.suggestionDisabled=!0,void(this.suggestions=[]);this.debouncedGetData(e)},handleChange:function(e){this.$emit("change",e)},handleFocus:function(e){this.activated=!0,this.$emit("focus",e),this.triggerOnFocus&&this.debouncedGetData(this.value)},handleBlur:function(e){this.$emit("blur",e)},handleClear:function(){this.activated=!1,this.$emit("clear")},close:function(e){this.activated=!1},handleKeyEnter:function(e){var t=this;this.suggestionVisible&&this.highlightedIndex>=0&&this.highlightedIndex<this.suggestions.length?(e.preventDefault(),this.select(this.suggestions[this.highlightedIndex])):this.selectWhenUnmatched&&(this.$emit("select",{value:this.value}),this.$nextTick((function(e){t.suggestions=[],t.highlightedIndex=-1})))},select:function(e){var t=this;this.$emit("input",e[this.valueKey]),this.$emit("select",e),this.$nextTick((function(e){t.suggestions=[],t.highlightedIndex=-1}))},highlight:function(e){if(this.suggestionVisible&&!this.loading)if(e<0)this.highlightedIndex=-1;else{e>=this.suggestions.length&&(e=this.suggestions.length-1);var t=this.$refs.suggestions.$el.querySelector(".el-autocomplete-suggestion__wrap"),n=t.querySelectorAll(".el-autocomplete-suggestion__list li"),r=n[e],i=t.scrollTop,o=r.offsetTop;o+r.scrollHeight>i+t.clientHeight&&(t.scrollTop+=r.scrollHeight),o<i&&(t.scrollTop-=r.scrollHeight),this.highlightedIndex=e;var s=this.getInput();s.setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)}},getInput:function(){return this.$refs.input.getInput()}},mounted:function(){var e=this;this.debouncedGetData=B()(this.debounce,this.getData),this.$on("item-click",(function(t){e.select(t)}));var t=this.getInput();t.setAttribute("role","textbox"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-controls","id"),t.setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)},beforeDestroy:function(){this.$refs.suggestions.$destroy()}},X=J,ee=a(X,D,M,!1,null,null,null);ee.options.__file="packages/autocomplete/src/autocomplete.vue";var te=ee.exports;te.install=function(e){e.component(te.name,te)};var ne,re,ie=te,oe=n(13),se=n.n(oe),ae=n(28),ce=n.n(ae),le={name:"ElDropdown",componentName:"ElDropdown",mixins:[w.a,I.a],directives:{Clickoutside:F.a},components:{ElButton:se.a,ElButtonGroup:ce.a},provide:function(){return{dropdown:this}},props:{trigger:{type:String,default:"hover"},type:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},placement:{type:String,default:"bottom-end"},visibleArrow:{default:!0},showTimeout:{type:Number,default:250},hideTimeout:{type:Number,default:150},tabindex:{type:Number,default:0},disabled:{type:Boolean,default:!1}},data:function(){return{timeout:null,visible:!1,triggerElm:null,menuItems:null,menuItemsArray:null,dropdownElm:null,focusing:!1,listId:"dropdown-menu-"+Object(v["generateId"])()}},computed:{dropdownSize:function(){return this.size||(this.$ELEMENT||{}).size}},mounted:function(){this.$on("menu-item-click",this.handleMenuItemClick)},watch:{visible:function(e){this.broadcast("ElDropdownMenu","visible",e),this.$emit("visible-change",e)},focusing:function(e){var t=this.$el.querySelector(".el-dropdown-selfdefine");t&&(e?t.className+=" focusing":t.className=t.className.replace("focusing",""))}},methods:{getMigratingConfig:function(){return{props:{"menu-align":"menu-align is renamed to placement."}}},show:function(){var e=this;this.disabled||(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.visible=!0}),"click"===this.trigger?0:this.showTimeout))},hide:function(){var e=this;this.disabled||(this.removeTabindex(),this.tabindex>=0&&this.resetTabindex(this.triggerElm),clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.visible=!1}),"click"===this.trigger?0:this.hideTimeout))},handleClick:function(){this.disabled||(this.visible?this.hide():this.show())},handleTriggerKeyDown:function(e){var t=e.keyCode;[38,40].indexOf(t)>-1?(this.removeTabindex(),this.resetTabindex(this.menuItems[0]),this.menuItems[0].focus(),e.preventDefault(),e.stopPropagation()):13===t?this.handleClick():[9,27].indexOf(t)>-1&&this.hide()},handleItemKeyDown:function(e){var t=e.keyCode,n=e.target,r=this.menuItemsArray.indexOf(n),i=this.menuItemsArray.length-1,o=void 0;[38,40].indexOf(t)>-1?(o=38===t?0!==r?r-1:0:r<i?r+1:i,this.removeTabindex(),this.resetTabindex(this.menuItems[o]),this.menuItems[o].focus(),e.preventDefault(),e.stopPropagation()):13===t?(this.triggerElmFocus(),n.click(),this.hideOnClick&&(this.visible=!1)):[9,27].indexOf(t)>-1&&(this.hide(),this.triggerElmFocus())},resetTabindex:function(e){this.removeTabindex(),e.setAttribute("tabindex","0")},removeTabindex:function(){this.triggerElm.setAttribute("tabindex","-1"),this.menuItemsArray.forEach((function(e){e.setAttribute("tabindex","-1")}))},initAria:function(){this.dropdownElm.setAttribute("id",this.listId),this.triggerElm.setAttribute("aria-haspopup","list"),this.triggerElm.setAttribute("aria-controls",this.listId),this.splitButton||(this.triggerElm.setAttribute("role","button"),this.triggerElm.setAttribute("tabindex",this.tabindex),this.triggerElm.setAttribute("class",(this.triggerElm.getAttribute("class")||"")+" el-dropdown-selfdefine"))},initEvent:function(){var e=this,t=this.trigger,n=this.show,r=this.hide,i=this.handleClick,o=this.splitButton,s=this.handleTriggerKeyDown,a=this.handleItemKeyDown;this.triggerElm=o?this.$refs.trigger.$el:this.$slots.default[0].elm;var c=this.dropdownElm;this.triggerElm.addEventListener("keydown",s),c.addEventListener("keydown",a,!0),o||(this.triggerElm.addEventListener("focus",(function(){e.focusing=!0})),this.triggerElm.addEventListener("blur",(function(){e.focusing=!1})),this.triggerElm.addEventListener("click",(function(){e.focusing=!1}))),"hover"===t?(this.triggerElm.addEventListener("mouseenter",n),this.triggerElm.addEventListener("mouseleave",r),c.addEventListener("mouseenter",n),c.addEventListener("mouseleave",r)):"click"===t&&this.triggerElm.addEventListener("click",i)},handleMenuItemClick:function(e,t){this.hideOnClick&&(this.visible=!1),this.$emit("command",e,t)},triggerElmFocus:function(){this.triggerElm.focus&&this.triggerElm.focus()},initDomOperation:function(){this.dropdownElm=this.popperElm,this.menuItems=this.dropdownElm.querySelectorAll("[tabindex='-1']"),this.menuItemsArray=[].slice.call(this.menuItems),this.initEvent(),this.initAria()}},render:function(e){var t=this,n=this.hide,r=this.splitButton,i=this.type,o=this.dropdownSize,s=this.disabled,a=function(e){t.$emit("click",e),n()},c=null;if(r)c=e("el-button-group",[e("el-button",{attrs:{type:i,size:o,disabled:s},nativeOn:{click:a}},[this.$slots.default]),e("el-button",{ref:"trigger",attrs:{type:i,size:o,disabled:s},class:"el-dropdown__caret-button"},[e("i",{class:"el-dropdown__icon el-icon-arrow-down"})])]);else{c=this.$slots.default;var l=c[0].data||{},u=l.attrs,d=void 0===u?{}:u;s&&!d.disabled&&(d.disabled=!0,l.attrs=d)}var h=s?null:this.$slots.dropdown;return e("div",{class:"el-dropdown",directives:[{name:"clickoutside",value:n}],attrs:{"aria-disabled":s}},[c,h])}},ue=le,de=a(ue,ne,re,!1,null,null,null);de.options.__file="packages/dropdown/src/dropdown.vue";var he=de.exports;he.install=function(e){e.component(he.name,he)};var pe=he,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-dropdown-menu el-popper",class:[e.size&&"el-dropdown-menu--"+e.size]},[e._t("default")],2)])},ge=[];fe._withStripped=!0;var me={name:"ElDropdownMenu",componentName:"ElDropdownMenu",mixins:[H.a],props:{visibleArrow:{type:Boolean,default:!0},arrowOffset:{type:Number,default:0}},data:function(){return{size:this.dropdown.dropdownSize}},inject:["dropdown"],created:function(){var e=this;this.$on("updatePopper",(function(){e.showPopper&&e.updatePopper()})),this.$on("visible",(function(t){e.showPopper=t}))},mounted:function(){this.dropdown.popperElm=this.popperElm=this.$el,this.referenceElm=this.dropdown.$el,this.dropdown.initDomOperation()},watch:{"dropdown.placement":{immediate:!0,handler:function(e){this.currentPlacement=e}}}},_e=me,ve=a(_e,fe,ge,!1,null,null,null);ve.options.__file="packages/dropdown/src/dropdown-menu.vue";var Ee=ve.exports;Ee.install=function(e){e.component(Ee.name,Ee)};var Ae=Ee,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"el-dropdown-menu__item",class:{"is-disabled":e.disabled,"el-dropdown-menu__item--divided":e.divided},attrs:{"aria-disabled":e.disabled,tabindex:e.disabled?null:-1},on:{click:e.handleClick}},[e.icon?n("i",{class:e.icon}):e._e(),e._t("default")],2)},Se=[];ye._withStripped=!0;var be={name:"ElDropdownItem",mixins:[w.a],props:{command:{},disabled:Boolean,divided:Boolean,icon:String},methods:{handleClick:function(e){this.dispatch("ElDropdown","menu-item-click",[this.command,this])}}},Ce=be,Te=a(Ce,ye,Se,!1,null,null,null);Te.options.__file="packages/dropdown/src/dropdown-item.vue";var Ie=Te.exports;Ie.install=function(e){e.component(Ie.name,Ie)};var Re=Ie,we=we||{};we.Utils=we.Utils||{},we.Utils.focusFirstDescendant=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(we.Utils.attemptFocus(n)||we.Utils.focusFirstDescendant(n))return!0}return!1},we.Utils.focusLastDescendant=function(e){for(var t=e.childNodes.length-1;t>=0;t--){var n=e.childNodes[t];if(we.Utils.attemptFocus(n)||we.Utils.focusLastDescendant(n))return!0}return!1},we.Utils.attemptFocus=function(e){if(!we.Utils.isFocusable(e))return!1;we.Utils.IgnoreUtilFocusChanges=!0;try{e.focus()}catch(t){}return we.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===e},we.Utils.isFocusable=function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},we.Utils.triggerEvent=function(e,t){var n=void 0;n=/^mouse|click/.test(t)?"MouseEvents":/^key/.test(t)?"KeyboardEvent":"HTMLEvents";for(var r=document.createEvent(n),i=arguments.length,o=Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];return r.initEvent.apply(r,[t].concat(o)),e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+t,r),e},we.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27};var ke=we.Utils,Oe=function(e,t){this.domNode=t,this.parent=e,this.subMenuItems=[],this.subIndex=0,this.init()};Oe.prototype.init=function(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()},Oe.prototype.gotoSubIndex=function(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e},Oe.prototype.addListeners=function(){var e=this,t=ke.keys,n=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,(function(r){r.addEventListener("keydown",(function(r){var i=!1;switch(r.keyCode){case t.down:e.gotoSubIndex(e.subIndex+1),i=!0;break;case t.up:e.gotoSubIndex(e.subIndex-1),i=!0;break;case t.tab:ke.triggerEvent(n,"mouseleave");break;case t.enter:case t.space:i=!0,r.currentTarget.click();break}return i&&(r.preventDefault(),r.stopPropagation()),!1}))}))};var Ne=Oe,Le=function(e){this.domNode=e,this.submenu=null,this.init()};Le.prototype.init=function(){this.domNode.setAttribute("tabindex","0");var e=this.domNode.querySelector(".el-menu");e&&(this.submenu=new Ne(this,e)),this.addListeners()},Le.prototype.addListeners=function(){var e=this,t=ke.keys;this.domNode.addEventListener("keydown",(function(n){var r=!1;switch(n.keyCode){case t.down:ke.triggerEvent(n.currentTarget,"mouseenter"),e.submenu&&e.submenu.gotoSubIndex(0),r=!0;break;case t.up:ke.triggerEvent(n.currentTarget,"mouseenter"),e.submenu&&e.submenu.gotoSubIndex(e.submenu.subMenuItems.length-1),r=!0;break;case t.tab:ke.triggerEvent(n.currentTarget,"mouseleave");break;case t.enter:case t.space:r=!0,n.currentTarget.click();break}r&&n.preventDefault()}))};var Pe=Le,De=function(e){this.domNode=e,this.init()};De.prototype.init=function(){var e=this.domNode.childNodes;[].filter.call(e,(function(e){return 1===e.nodeType})).forEach((function(e){new Pe(e)}))};var Me,xe,Be=De,Ue=n(1),Fe={name:"ElMenu",render:function(e){var t=e("ul",{attrs:{role:"menubar"},key:+this.collapse,style:{backgroundColor:this.backgroundColor||""},class:{"el-menu--horizontal":"horizontal"===this.mode,"el-menu--collapse":this.collapse,"el-menu":!0}},[this.$slots.default]);return this.collapseTransition?e("el-menu-collapse-transition",[t]):t},componentName:"ElMenu",mixins:[w.a,I.a],provide:function(){return{rootMenu:this}},components:{"el-menu-collapse-transition":{functional:!0,render:function(e,t){var n={props:{mode:"out-in"},on:{beforeEnter:function(e){e.style.opacity=.2},enter:function(e){Object(Ue["addClass"])(e,"el-opacity-transition"),e.style.opacity=1},afterEnter:function(e){Object(Ue["removeClass"])(e,"el-opacity-transition"),e.style.opacity=""},beforeLeave:function(e){e.dataset||(e.dataset={}),Object(Ue["hasClass"])(e,"el-menu--collapse")?(Object(Ue["removeClass"])(e,"el-menu--collapse"),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth,Object(Ue["addClass"])(e,"el-menu--collapse")):(Object(Ue["addClass"])(e,"el-menu--collapse"),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth,Object(Ue["removeClass"])(e,"el-menu--collapse")),e.style.width=e.scrollWidth+"px",e.style.overflow="hidden"},leave:function(e){Object(Ue["addClass"])(e,"horizontal-collapse-transition"),e.style.width=e.dataset.scrollWidth+"px"}}};return e("transition",n,t.children)}}},props:{mode:{type:String,default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:Array,uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0}},data:function(){return{activeIndex:this.defaultActive,openedMenus:this.defaultOpeneds&&!this.collapse?this.defaultOpeneds.slice(0):[],items:{},submenus:{}}},computed:{hoverBackground:function(){return this.backgroundColor?this.mixColor(this.backgroundColor,.2):""},isMenuPopup:function(){return"horizontal"===this.mode||"vertical"===this.mode&&this.collapse}},watch:{defaultActive:function(e){this.items[e]||(this.activeIndex=null),this.updateActiveIndex(e)},defaultOpeneds:function(e){this.collapse||(this.openedMenus=e)},collapse:function(e){e&&(this.openedMenus=[]),this.broadcast("ElSubmenu","toggle-collapse",e)}},methods:{updateActiveIndex:function(e){var t=this.items[e]||this.items[this.activeIndex]||this.items[this.defaultActive];t?(this.activeIndex=t.index,this.initOpenedMenu()):this.activeIndex=null},getMigratingConfig:function(){return{props:{theme:"theme is removed."}}},getColorChannels:function(e){if(e=e.replace("#",""),/^[0-9a-fA-F]{3}$/.test(e)){e=e.split("");for(var t=2;t>=0;t--)e.splice(t,0,e[t]);e=e.join("")}return/^[0-9a-fA-F]{6}$/.test(e)?{red:parseInt(e.slice(0,2),16),green:parseInt(e.slice(2,4),16),blue:parseInt(e.slice(4,6),16)}:{red:255,green:255,blue:255}},mixColor:function(e,t){var n=this.getColorChannels(e),r=n.red,i=n.green,o=n.blue;return t>0?(r*=1-t,i*=1-t,o*=1-t):(r+=(255-r)*t,i+=(255-i)*t,o+=(255-o)*t),"rgb("+Math.round(r)+", "+Math.round(i)+", "+Math.round(o)+")"},addItem:function(e){this.$set(this.items,e.index,e)},removeItem:function(e){delete this.items[e.index]},addSubmenu:function(e){this.$set(this.submenus,e.index,e)},removeSubmenu:function(e){delete this.submenus[e.index]},openMenu:function(e,t){var n=this.openedMenus;-1===n.indexOf(e)&&(this.uniqueOpened&&(this.openedMenus=n.filter((function(e){return-1!==t.indexOf(e)}))),this.openedMenus.push(e))},closeMenu:function(e){var t=this.openedMenus.indexOf(e);-1!==t&&this.openedMenus.splice(t,1)},handleSubmenuClick:function(e){var t=e.index,n=e.indexPath,r=-1!==this.openedMenus.indexOf(t);r?(this.closeMenu(t),this.$emit("close",t,n)):(this.openMenu(t,n),this.$emit("open",t,n))},handleItemClick:function(e){var t=this,n=e.index,r=e.indexPath,i=this.activeIndex,o=null!==e.index;o&&(this.activeIndex=e.index),this.$emit("select",n,r,e),("horizontal"===this.mode||this.collapse)&&(this.openedMenus=[]),this.router&&o&&this.routeToItem(e,(function(e){if(t.activeIndex=i,e){if("NavigationDuplicated"===e.name)return;console.error(e)}}))},initOpenedMenu:function(){var e=this,t=this.activeIndex,n=this.items[t];if(n&&"horizontal"!==this.mode&&!this.collapse){var r=n.indexPath;r.forEach((function(t){var n=e.submenus[t];n&&e.openMenu(t,n.indexPath)}))}},routeToItem:function(e,t){var n=e.route||e.index;try{this.$router.push(n,(function(){}),t)}catch(r){console.error(r)}},open:function(e){var t=this,n=this.submenus[e.toString()].indexPath;n.forEach((function(e){return t.openMenu(e,n)}))},close:function(e){this.closeMenu(e)}},mounted:function(){this.initOpenedMenu(),this.$on("item-click",this.handleItemClick),this.$on("submenu-click",this.handleSubmenuClick),"horizontal"===this.mode&&new Be(this.$el),this.$watch("items",this.updateActiveIndex)}},Ve=Fe,je=a(Ve,Me,xe,!1,null,null,null);je.options.__file="packages/menu/src/menu.vue";var Ge=je.exports;Ge.install=function(e){e.component(Ge.name,Ge)};var He,Qe,We=Ge,qe=n(21),ze=n.n(qe),Ze={inject:["rootMenu"],computed:{indexPath:function(){var e=[this.index],t=this.$parent;while("ElMenu"!==t.$options.componentName)t.index&&e.unshift(t.index),t=t.$parent;return e},parentMenu:function(){var e=this.$parent;while(e&&-1===["ElMenu","ElSubmenu"].indexOf(e.$options.componentName))e=e.$parent;return e},paddingStyle:function(){if("vertical"!==this.rootMenu.mode)return{};var e=20,t=this.$parent;if(this.rootMenu.collapse)e=20;else while(t&&"ElMenu"!==t.$options.componentName)"ElSubmenu"===t.$options.componentName&&(e+=20),t=t.$parent;return{paddingLeft:e+"px"}}}},$e={props:{transformOrigin:{type:[Boolean,String],default:!1},offset:H.a.props.offset,boundariesPadding:H.a.props.boundariesPadding,popperOptions:H.a.props.popperOptions},data:H.a.data,methods:H.a.methods,beforeDestroy:H.a.beforeDestroy,deactivated:H.a.deactivated},Ke={name:"ElSubmenu",componentName:"ElSubmenu",mixins:[Ze,w.a,$e],components:{ElCollapseTransition:ze.a},props:{index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0}},data:function(){return{popperJS:null,timeout:null,items:{},submenus:{},mouseInChild:!1}},watch:{opened:function(e){var t=this;this.isMenuPopup&&this.$nextTick((function(e){t.updatePopper()}))}},computed:{appendToBody:function(){return void 0===this.popperAppendToBody?this.isFirstLevel:this.popperAppendToBody},menuTransitionName:function(){return this.rootMenu.collapse?"el-zoom-in-left":"el-zoom-in-top"},opened:function(){return this.rootMenu.openedMenus.indexOf(this.index)>-1},active:function(){var e=!1,t=this.submenus,n=this.items;return Object.keys(n).forEach((function(t){n[t].active&&(e=!0)})),Object.keys(t).forEach((function(n){t[n].active&&(e=!0)})),e},hoverBackground:function(){return this.rootMenu.hoverBackground},backgroundColor:function(){return this.rootMenu.backgroundColor||""},activeTextColor:function(){return this.rootMenu.activeTextColor||""},textColor:function(){return this.rootMenu.textColor||""},mode:function(){return this.rootMenu.mode},isMenuPopup:function(){return this.rootMenu.isMenuPopup},titleStyle:function(){return"horizontal"!==this.mode?{color:this.textColor}:{borderBottomColor:this.active?this.rootMenu.activeTextColor?this.activeTextColor:"":"transparent",color:this.active?this.activeTextColor:this.textColor}},isFirstLevel:function(){var e=!0,t=this.$parent;while(t&&t!==this.rootMenu){if(["ElSubmenu","ElMenuItemGroup"].indexOf(t.$options.componentName)>-1){e=!1;break}t=t.$parent}return e}},methods:{handleCollapseToggle:function(e){e?this.initPopper():this.doDestroy()},addItem:function(e){this.$set(this.items,e.index,e)},removeItem:function(e){delete this.items[e.index]},addSubmenu:function(e){this.$set(this.submenus,e.index,e)},removeSubmenu:function(e){delete this.submenus[e.index]},handleClick:function(){var e=this.rootMenu,t=this.disabled;"hover"===e.menuTrigger&&"horizontal"===e.mode||e.collapse&&"vertical"===e.mode||t||this.dispatch("ElMenu","submenu-click",this)},handleMouseenter:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.showTimeout;if("ActiveXObject"in window||"focus"!==e.type||e.relatedTarget){var r=this.rootMenu,i=this.disabled;"click"===r.menuTrigger&&"horizontal"===r.mode||!r.collapse&&"vertical"===r.mode||i||(this.dispatch("ElSubmenu","mouse-enter-child"),clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.rootMenu.openMenu(t.index,t.indexPath)}),n),this.appendToBody&&this.$parent.$el.dispatchEvent(new MouseEvent("mouseenter")))}},handleMouseleave:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.rootMenu;"click"===n.menuTrigger&&"horizontal"===n.mode||!n.collapse&&"vertical"===n.mode||(this.dispatch("ElSubmenu","mouse-leave-child"),clearTimeout(this.timeout),this.timeout=setTimeout((function(){!e.mouseInChild&&e.rootMenu.closeMenu(e.index)}),this.hideTimeout),this.appendToBody&&t&&"ElSubmenu"===this.$parent.$options.name&&this.$parent.handleMouseleave(!0))},handleTitleMouseenter:function(){if("horizontal"!==this.mode||this.rootMenu.backgroundColor){var e=this.$refs["submenu-title"];e&&(e.style.backgroundColor=this.rootMenu.hoverBackground)}},handleTitleMouseleave:function(){if("horizontal"!==this.mode||this.rootMenu.backgroundColor){var e=this.$refs["submenu-title"];e&&(e.style.backgroundColor=this.rootMenu.backgroundColor||"")}},updatePlacement:function(){this.currentPlacement="horizontal"===this.mode&&this.isFirstLevel?"bottom-start":"right-start"},initPopper:function(){this.referenceElm=this.$el,this.popperElm=this.$refs.menu,this.updatePlacement()}},created:function(){var e=this;this.$on("toggle-collapse",this.handleCollapseToggle),this.$on("mouse-enter-child",(function(){e.mouseInChild=!0,clearTimeout(e.timeout)})),this.$on("mouse-leave-child",(function(){e.mouseInChild=!1,clearTimeout(e.timeout)}))},mounted:function(){this.parentMenu.addSubmenu(this),this.rootMenu.addSubmenu(this),this.initPopper()},beforeDestroy:function(){this.parentMenu.removeSubmenu(this),this.rootMenu.removeSubmenu(this)},render:function(e){var t=this,n=this.active,r=this.opened,i=this.paddingStyle,o=this.titleStyle,s=this.backgroundColor,a=this.rootMenu,c=this.currentPlacement,l=this.menuTransitionName,u=this.mode,d=this.disabled,h=this.popperClass,p=this.$slots,f=this.isFirstLevel,g=e("transition",{attrs:{name:l}},[e("div",{ref:"menu",directives:[{name:"show",value:r}],class:["el-menu--"+u,h],on:{mouseenter:function(e){return t.handleMouseenter(e,100)},mouseleave:function(){return t.handleMouseleave(!0)},focus:function(e){return t.handleMouseenter(e,100)}}},[e("ul",{attrs:{role:"menu"},class:["el-menu el-menu--popup","el-menu--popup-"+c],style:{backgroundColor:a.backgroundColor||""}},[p.default])])]),m=e("el-collapse-transition",[e("ul",{attrs:{role:"menu"},class:"el-menu el-menu--inline",directives:[{name:"show",value:r}],style:{backgroundColor:a.backgroundColor||""}},[p.default])]),_="horizontal"===a.mode&&f||"vertical"===a.mode&&!a.collapse?"el-icon-arrow-down":"el-icon-arrow-right";return e("li",{class:{"el-submenu":!0,"is-active":n,"is-opened":r,"is-disabled":d},attrs:{role:"menuitem","aria-haspopup":"true","aria-expanded":r},on:{mouseenter:this.handleMouseenter,mouseleave:function(){return t.handleMouseleave(!1)},focus:this.handleMouseenter}},[e("div",{class:"el-submenu__title",ref:"submenu-title",on:{click:this.handleClick,mouseenter:this.handleTitleMouseenter,mouseleave:this.handleTitleMouseleave},style:[i,o,{backgroundColor:s}]},[p.title,e("i",{class:["el-submenu__icon-arrow",_]})]),this.isMenuPopup?g:m])}},Ye=Ke,Je=a(Ye,He,Qe,!1,null,null,null);Je.options.__file="packages/menu/src/submenu.vue";var Xe=Je.exports;Xe.install=function(e){e.component(Xe.name,Xe)};var et=Xe,tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"el-menu-item",class:{"is-active":e.active,"is-disabled":e.disabled},style:[e.paddingStyle,e.itemStyle,{backgroundColor:e.backgroundColor}],attrs:{role:"menuitem",tabindex:"-1"},on:{click:e.handleClick,mouseenter:e.onMouseEnter,focus:e.onMouseEnter,blur:e.onMouseLeave,mouseleave:e.onMouseLeave}},["ElMenu"===e.parentMenu.$options.componentName&&e.rootMenu.collapse&&e.$slots.title?n("el-tooltip",{attrs:{effect:"dark",placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._t("title")],2),n("div",{staticStyle:{position:"absolute",left:"0",top:"0",height:"100%",width:"100%",display:"inline-block","box-sizing":"border-box",padding:"0 20px"}},[e._t("default")],2)]):[e._t("default"),e._t("title")]],2)},nt=[];tt._withStripped=!0;var rt=n(26),it=n.n(rt),ot={name:"ElMenuItem",componentName:"ElMenuItem",mixins:[Ze,w.a],components:{ElTooltip:it.a},props:{index:{default:null,validator:function(e){return"string"===typeof e||null===e}},route:[String,Object],disabled:Boolean},computed:{active:function(){return this.index===this.rootMenu.activeIndex},hoverBackground:function(){return this.rootMenu.hoverBackground},backgroundColor:function(){return this.rootMenu.backgroundColor||""},activeTextColor:function(){return this.rootMenu.activeTextColor||""},textColor:function(){return this.rootMenu.textColor||""},mode:function(){return this.rootMenu.mode},itemStyle:function(){var e={color:this.active?this.activeTextColor:this.textColor};return"horizontal"!==this.mode||this.isNested||(e.borderBottomColor=this.active?this.rootMenu.activeTextColor?this.activeTextColor:"":"transparent"),e},isNested:function(){return this.parentMenu!==this.rootMenu}},methods:{onMouseEnter:function(){("horizontal"!==this.mode||this.rootMenu.backgroundColor)&&(this.$el.style.backgroundColor=this.hoverBackground)},onMouseLeave:function(){("horizontal"!==this.mode||this.rootMenu.backgroundColor)&&(this.$el.style.backgroundColor=this.backgroundColor)},handleClick:function(){this.disabled||(this.dispatch("ElMenu","item-click",this),this.$emit("click",this))}},mounted:function(){this.parentMenu.addItem(this),this.rootMenu.addItem(this)},beforeDestroy:function(){this.parentMenu.removeItem(this),this.rootMenu.removeItem(this)}},st=ot,at=a(st,tt,nt,!1,null,null,null);at.options.__file="packages/menu/src/menu-item.vue";var ct=at.exports;ct.install=function(e){e.component(ct.name,ct)};var lt=ct,ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"el-menu-item-group"},[n("div",{staticClass:"el-menu-item-group__title",style:{paddingLeft:e.levelPadding+"px"}},[e.$slots.title?e._t("title"):[e._v(e._s(e.title))]],2),n("ul",[e._t("default")],2)])},dt=[];ut._withStripped=!0;var ht={name:"ElMenuItemGroup",componentName:"ElMenuItemGroup",inject:["rootMenu"],props:{title:{type:String}},data:function(){return{paddingLeft:20}},computed:{levelPadding:function(){var e=20,t=this.$parent;if(this.rootMenu.collapse)return 20;while(t&&"ElMenu"!==t.$options.componentName)"ElSubmenu"===t.$options.componentName&&(e+=20),t=t.$parent;return e}}},pt=ht,ft=a(pt,ut,dt,!1,null,null,null);ft.options.__file="packages/menu/src/menu-item-group.vue";var gt=ft.exports;gt.install=function(e){e.component(gt.name,gt)};var mt=gt,_t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"is-exceed":e.inputExceed,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?n("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?n("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?n("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?n("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.getSuffixVisible()?n("span",{staticClass:"el-input__suffix"},[n("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible&&e.isWordLimitVisible?e._e():[e._t("suffix"),e.suffixIcon?n("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?n("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(e){e.preventDefault()},click:e.clear}}):e._e(),e.showPwdVisible?n("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e(),e.isWordLimitVisible?n("span",{staticClass:"el-input__count"},[n("span",{staticClass:"el-input__count-inner"},[e._v("\n            "+e._s(e.textLength)+"/"+e._s(e.upperLimit)+"\n          ")])]):e._e()],2),e.validateState?n("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?n("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:n("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1)),e.isWordLimitVisible&&"textarea"===e.type?n("span",{staticClass:"el-input__count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()],2)},vt=[];_t._withStripped=!0;var Et=void 0,At="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",yt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function St(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),r=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),i=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),o=yt.map((function(e){return e+":"+t.getPropertyValue(e)})).join(";");return{contextStyle:o,paddingSize:r,borderSize:i,boxSizing:n}}function bt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Et||(Et=document.createElement("textarea"),document.body.appendChild(Et));var r=St(e),i=r.paddingSize,o=r.borderSize,s=r.boxSizing,a=r.contextStyle;Et.setAttribute("style",a+";"+At),Et.value=e.value||e.placeholder||"";var c=Et.scrollHeight,l={};"border-box"===s?c+=o:"content-box"===s&&(c-=i),Et.value="";var u=Et.scrollHeight-i;if(null!==t){var d=u*t;"border-box"===s&&(d=d+i+o),c=Math.max(d,c),l.minHeight=d+"px"}if(null!==n){var h=u*n;"border-box"===s&&(h=h+i+o),c=Math.min(h,c)}return l.height=c+"px",Et.parentNode&&Et.parentNode.removeChild(Et),Et=null,l}var Ct=n(7),Tt=n.n(Ct),It=n(19),Rt={name:"ElInput",componentName:"ElInput",mixins:[w.a,I.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return Tt()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"===typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(e){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(e){this.focused=!1,this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize,t=this.type;if("textarea"===t)if(e){var n=e.minRows,r=e.maxRows;this.textareaCalcStyle=bt(this.$refs.textarea,n,r)}else this.textareaCalcStyle={minHeight:bt(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit("focus",e)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(e){var t=e.target.value,n=t[t.length-1]||"";this.isComposing=!Object(It["isKorean"])(n)},handleCompositionEnd:function(e){this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit("input",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit("change",e.target.value)},calcIconOffset:function(e){var t=[].slice.call(this.$el.querySelectorAll(".el-input__"+e)||[]);if(t.length){for(var n=null,r=0;r<t.length;r++)if(t[r].parentNode===this.$el){n=t[r];break}if(n){var i={suffix:"append",prefix:"prepend"},o=i[e];this.$slots[o]?n.style.transform="translateX("+("suffix"===e?"-":"")+this.$el.querySelector(".el-input-group__"+o).offsetWidth+"px)":n.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){var e=this;this.passwordVisible=!this.passwordVisible,this.$nextTick((function(){e.focus()}))},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},wt=Rt,kt=a(wt,_t,vt,!1,null,null,null);kt.options.__file="packages/input/src/input.vue";var Ot=kt.exports;Ot.install=function(e){e.component(Ot.name,Ot)};var Nt=Ot,Lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["el-input-number",e.inputNumberSize?"el-input-number--"+e.inputNumberSize:"",{"is-disabled":e.inputNumberDisabled},{"is-without-controls":!e.controls},{"is-controls-right":e.controlsAtRight}],on:{dragstart:function(e){e.preventDefault()}}},[e.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":e.minDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.decrease(t)}}},[n("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-down":"minus")})]):e._e(),e.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":e.maxDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.increase(t)}}},[n("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-up":"plus")})]):e._e(),n("el-input",{ref:"input",attrs:{value:e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label},on:{blur:e.handleBlur,focus:e.handleFocus,input:e.handleInput,change:e.handleInputChange},nativeOn:{keydown:[function(t){return!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.increase(t))},function(t){return!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.decrease(t))}]}})],1)},Pt=[];Lt._withStripped=!0;var Dt={bind:function(e,t,n){var r=null,i=void 0,o=function(){return n.context[t.expression].apply()},s=function(){Date.now()-i<100&&o(),clearInterval(r),r=null};Object(Ue["on"])(e,"mousedown",(function(e){0===e.button&&(i=Date.now(),Object(Ue["once"])(document,"mouseup",s),clearInterval(r),r=setInterval(o,100))}))}},Mt={name:"ElInputNumber",mixins:[Y()("input")],inject:{elForm:{default:""},elFormItem:{default:""}},directives:{repeatClick:Dt},components:{ElInput:g.a},props:{step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String,placeholder:String,precision:{type:Number,validator:function(e){return e>=0&&e===parseInt(e,10)}}},data:function(){return{currentValue:0,userInput:null}},watch:{value:{immediate:!0,handler:function(e){var t=void 0===e?e:Number(e);if(void 0!==t){if(isNaN(t))return;if(this.stepStrictly){var n=this.getPrecision(this.step),r=Math.pow(10,n);t=Math.round(t/this.step)*r*this.step/r}void 0!==this.precision&&(t=this.toPrecision(t,this.precision))}t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),this.currentValue=t,this.userInput=null,this.$emit("input",t)}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},numPrecision:function(){var e=this.value,t=this.step,n=this.getPrecision,r=this.precision,i=n(t);return void 0!==r?(i>r&&console.warn("[Element Warn][InputNumber]precision should not be less than the decimal places of step"),r):Math.max(n(e),i)},controlsAtRight:function(){return this.controls&&"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputNumberDisabled:function(){return this.disabled||!!(this.elForm||{}).disabled},displayValue:function(){if(null!==this.userInput)return this.userInput;var e=this.currentValue;if("number"===typeof e){if(this.stepStrictly){var t=this.getPrecision(this.step),n=Math.pow(10,t);e=Math.round(e/this.step)*n*this.step/n}void 0!==this.precision&&(e=e.toFixed(this.precision))}return e}},methods:{toPrecision:function(e,t){return void 0===t&&(t=this.numPrecision),parseFloat(Math.round(e*Math.pow(10,t))/Math.pow(10,t))},getPrecision:function(e){if(void 0===e)return 0;var t=e.toString(),n=t.indexOf("."),r=0;return-1!==n&&(r=t.length-n-1),r},_increase:function(e,t){if("number"!==typeof e&&void 0!==e)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*e+n*t)/n)},_decrease:function(e,t){if("number"!==typeof e&&void 0!==e)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*e-n*t)/n)},increase:function(){if(!this.inputNumberDisabled&&!this.maxDisabled){var e=this.value||0,t=this._increase(e,this.step);this.setCurrentValue(t)}},decrease:function(){if(!this.inputNumberDisabled&&!this.minDisabled){var e=this.value||0,t=this._decrease(e,this.step);this.setCurrentValue(t)}},handleBlur:function(e){this.$emit("blur",e)},handleFocus:function(e){this.$emit("focus",e)},setCurrentValue:function(e){var t=this.currentValue;"number"===typeof e&&void 0!==this.precision&&(e=this.toPrecision(e,this.precision)),e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),t!==e&&(this.userInput=null,this.$emit("input",e),this.$emit("change",e,t),this.currentValue=e)},handleInput:function(e){this.userInput=e},handleInputChange:function(e){var t=""===e?void 0:Number(e);isNaN(t)&&""!==e||this.setCurrentValue(t),this.userInput=null},select:function(){this.$refs.input.select()}},mounted:function(){var e=this.$refs.input.$refs.input;e.setAttribute("role","spinbutton"),e.setAttribute("aria-valuemax",this.max),e.setAttribute("aria-valuemin",this.min),e.setAttribute("aria-valuenow",this.currentValue),e.setAttribute("aria-disabled",this.inputNumberDisabled)},updated:function(){if(this.$refs&&this.$refs.input){var e=this.$refs.input.$refs.input;e.setAttribute("aria-valuenow",this.currentValue)}}},xt=Mt,Bt=a(xt,Lt,Pt,!1,null,null,null);Bt.options.__file="packages/input-number/src/input-number.vue";var Ut=Bt.exports;Ut.install=function(e){e.component(Ut.name,Ut)};var Ft=Ut,Vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-radio",class:[e.border&&e.radioSize?"el-radio--"+e.radioSize:"",{"is-disabled":e.isDisabled},{"is-focus":e.focus},{"is-bordered":e.border},{"is-checked":e.model===e.label}],attrs:{role:"radio","aria-checked":e.model===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.stopPropagation(),t.preventDefault(),e.model=e.isDisabled?e.model:e.label}}},[n("span",{staticClass:"el-radio__input",class:{"is-disabled":e.isDisabled,"is-checked":e.model===e.label}},[n("span",{staticClass:"el-radio__inner"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],ref:"radio",staticClass:"el-radio__original",attrs:{type:"radio","aria-hidden":"true",name:e.name,disabled:e.isDisabled,tabindex:"-1",autocomplete:"off"},domProps:{value:e.label,checked:e._q(e.model,e.label)},on:{focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},change:[function(t){e.model=e.label},e.handleChange]}})]),n("span",{staticClass:"el-radio__label",on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])},jt=[];Vt._withStripped=!0;var Gt={name:"ElRadio",mixins:[w.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElRadio",props:{value:{},label:{},disabled:Boolean,name:String,border:Boolean,size:String},data:function(){return{focus:!1}},computed:{isGroup:function(){var e=this.$parent;while(e){if("ElRadioGroup"===e.$options.componentName)return this._radioGroup=e,!0;e=e.$parent}return!1},model:{get:function(){return this.isGroup?this._radioGroup.value:this.value},set:function(e){this.isGroup?this.dispatch("ElRadioGroup","input",[e]):this.$emit("input",e),this.$refs.radio&&(this.$refs.radio.checked=this.model===this.label)}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},radioSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._radioGroup.radioGroupSize||e},isDisabled:function(){return this.isGroup?this._radioGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this.isGroup&&this.model!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.model),e.isGroup&&e.dispatch("ElRadioGroup","handleChange",e.model)}))}}},Ht=Gt,Qt=a(Ht,Vt,jt,!1,null,null,null);Qt.options.__file="packages/radio/src/radio.vue";var Wt=Qt.exports;Wt.install=function(e){e.component(Wt.name,Wt)};var qt=Wt,zt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e._elTag,{tag:"component",staticClass:"el-radio-group",attrs:{role:"radiogroup"},on:{keydown:e.handleKeydown}},[e._t("default")],2)},Zt=[];zt._withStripped=!0;var $t=Object.freeze({LEFT:37,UP:38,RIGHT:39,DOWN:40}),Kt={name:"ElRadioGroup",componentName:"ElRadioGroup",inject:{elFormItem:{default:""}},mixins:[w.a],props:{value:{},size:String,fill:String,textColor:String,disabled:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},_elTag:function(){var e=(this.$vnode.data||{}).tag;return e&&"component"!==e||(e="div"),e},radioGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},created:function(){var e=this;this.$on("handleChange",(function(t){e.$emit("change",t)}))},mounted:function(){var e=this.$el.querySelectorAll("[type=radio]"),t=this.$el.querySelectorAll("[role=radio]")[0];![].some.call(e,(function(e){return e.checked}))&&t&&(t.tabIndex=0)},methods:{handleKeydown:function(e){var t=e.target,n="INPUT"===t.nodeName?"[type=radio]":"[role=radio]",r=this.$el.querySelectorAll(n),i=r.length,o=[].indexOf.call(r,t),s=this.$el.querySelectorAll("[role=radio]");switch(e.keyCode){case $t.LEFT:case $t.UP:e.stopPropagation(),e.preventDefault(),0===o?(s[i-1].click(),s[i-1].focus()):(s[o-1].click(),s[o-1].focus());break;case $t.RIGHT:case $t.DOWN:o===i-1?(e.stopPropagation(),e.preventDefault(),s[0].click(),s[0].focus()):(s[o+1].click(),s[o+1].focus());break;default:break}}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[this.value])}}},Yt=Kt,Jt=a(Yt,zt,Zt,!1,null,null,null);Jt.options.__file="packages/radio/src/radio-group.vue";var Xt=Jt.exports;Xt.install=function(e){e.component(Xt.name,Xt)};var en=Xt,tn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-radio-button",class:[e.size?"el-radio-button--"+e.size:"",{"is-active":e.value===e.label},{"is-disabled":e.isDisabled},{"is-focus":e.focus}],attrs:{role:"radio","aria-checked":e.value===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.stopPropagation(),t.preventDefault(),e.value=e.isDisabled?e.value:e.label}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"el-radio-button__orig-radio",attrs:{type:"radio",name:e.name,disabled:e.isDisabled,tabindex:"-1",autocomplete:"off"},domProps:{value:e.label,checked:e._q(e.value,e.label)},on:{change:[function(t){e.value=e.label},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}),n("span",{staticClass:"el-radio-button__inner",style:e.value===e.label?e.activeStyle:null,on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])},nn=[];tn._withStripped=!0;var rn={name:"ElRadioButton",mixins:[w.a],inject:{elForm:{default:""},elFormItem:{default:""}},props:{label:{},disabled:Boolean,name:String},data:function(){return{focus:!1}},computed:{value:{get:function(){return this._radioGroup.value},set:function(e){this._radioGroup.$emit("input",e)}},_radioGroup:function(){var e=this.$parent;while(e){if("ElRadioGroup"===e.$options.componentName)return e;e=e.$parent}return!1},activeStyle:function(){return{backgroundColor:this._radioGroup.fill||"",borderColor:this._radioGroup.fill||"",boxShadow:this._radioGroup.fill?"-1px 0 0 0 "+this._radioGroup.fill:"",color:this._radioGroup.textColor||""}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},size:function(){return this._radioGroup.radioGroupSize||this._elFormItemSize||(this.$ELEMENT||{}).size},isDisabled:function(){return this.disabled||this._radioGroup.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this._radioGroup&&this.value!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.dispatch("ElRadioGroup","handleChange",e.value)}))}}},on=rn,sn=a(on,tn,nn,!1,null,null,null);sn.options.__file="packages/radio/src/radio-button.vue";var an=sn.exports;an.install=function(e){e.component(an.name,an)};var cn=an,ln=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-checkbox",class:[e.border&&e.checkboxSize?"el-checkbox--"+e.checkboxSize:"",{"is-disabled":e.isDisabled},{"is-bordered":e.border},{"is-checked":e.isChecked}],attrs:{id:e.id}},[n("span",{staticClass:"el-checkbox__input",class:{"is-disabled":e.isDisabled,"is-checked":e.isChecked,"is-indeterminate":e.indeterminate,"is-focus":e.focus},attrs:{tabindex:!!e.indeterminate&&0,role:!!e.indeterminate&&"checkbox","aria-checked":!!e.indeterminate&&"mixed"}},[n("span",{staticClass:"el-checkbox__inner"}),e.trueLabel||e.falseLabel?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var n=e.model,r=t.target,i=r.checked?e.trueLabel:e.falseLabel;if(Array.isArray(n)){var o=null,s=e._i(n,o);r.checked?s<0&&(e.model=n.concat([o])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=i},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var n=e.model,r=t.target,i=!!r.checked;if(Array.isArray(n)){var o=e.label,s=e._i(n,o);r.checked?s<0&&(e.model=n.concat([o])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=i},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})]),e.$slots.default||e.label?n("span",{staticClass:"el-checkbox__label"},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])},un=[];ln._withStripped=!0;var dn={name:"ElCheckbox",mixins:[w.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):(this.$emit("input",e),this.selfModel=e)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){var e=this.$parent;while(e){if("ElCheckboxGroup"===e.$options.componentName)return this._checkboxGroup=e,!0;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var e=this._checkboxGroup,t=e.max,n=e.min;return!(!t&&!n)&&this.model.length>=t&&!this.isChecked||this.model.length<=n&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||e}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;if(!this.isLimitExceeded){var n=void 0;n=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",n,e),this.$nextTick((function(){t.isGroup&&t.dispatch("ElCheckboxGroup","change",[t._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}}},hn=dn,pn=a(hn,ln,un,!1,null,null,null);pn.options.__file="packages/checkbox/src/checkbox.vue";var fn=pn.exports;fn.install=function(e){e.component(fn.name,fn)};var gn=fn,mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-checkbox-button",class:[e.size?"el-checkbox-button--"+e.size:"",{"is-disabled":e.isDisabled},{"is-checked":e.isChecked},{"is-focus":e.focus}],attrs:{role:"checkbox","aria-checked":e.isChecked,"aria-disabled":e.isDisabled}},[e.trueLabel||e.falseLabel?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox-button__original",attrs:{type:"checkbox",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var n=e.model,r=t.target,i=r.checked?e.trueLabel:e.falseLabel;if(Array.isArray(n)){var o=null,s=e._i(n,o);r.checked?s<0&&(e.model=n.concat([o])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=i},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox-button__original",attrs:{type:"checkbox",name:e.name,disabled:e.isDisabled},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var n=e.model,r=t.target,i=!!r.checked;if(Array.isArray(n)){var o=e.label,s=e._i(n,o);r.checked?s<0&&(e.model=n.concat([o])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=i},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}),e.$slots.default||e.label?n("span",{staticClass:"el-checkbox-button__inner",style:e.isChecked?e.activeStyle:null},[e._t("default",[e._v(e._s(e.label))])],2):e._e()])},_n=[];mn._withStripped=!0;var vn={name:"ElCheckboxButton",mixins:[w.a],inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},props:{value:{},label:{},disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number]},computed:{model:{get:function(){return this._checkboxGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this._checkboxGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):void 0!==this.value?this.$emit("input",e):this.selfModel=e}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},_checkboxGroup:function(){var e=this.$parent;while(e){if("ElCheckboxGroup"===e.$options.componentName)return e;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},activeStyle:function(){return{backgroundColor:this._checkboxGroup.fill||"",borderColor:this._checkboxGroup.fill||"",color:this._checkboxGroup.textColor||"","box-shadow":"-1px 0 0 0 "+this._checkboxGroup.fill}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},size:function(){return this._checkboxGroup.checkboxGroupSize||this._elFormItemSize||(this.$ELEMENT||{}).size},isLimitDisabled:function(){var e=this._checkboxGroup,t=e.max,n=e.min;return!(!t&&!n)&&this.model.length>=t&&!this.isChecked||this.model.length<=n&&this.isChecked},isDisabled:function(){return this._checkboxGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled}},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;if(!this.isLimitExceeded){var n=void 0;n=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",n,e),this.$nextTick((function(){t._checkboxGroup&&t.dispatch("ElCheckboxGroup","change",[t._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()}},En=vn,An=a(En,mn,_n,!1,null,null,null);An.options.__file="packages/checkbox/src/checkbox-button.vue";var yn=An.exports;yn.install=function(e){e.component(yn.name,yn)};var Sn=yn,bn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-checkbox-group",attrs:{role:"group","aria-label":"checkbox-group"}},[e._t("default")],2)},Cn=[];bn._withStripped=!0;var Tn={name:"ElCheckboxGroup",componentName:"ElCheckboxGroup",mixins:[w.a],inject:{elFormItem:{default:""}},props:{value:{},disabled:Boolean,min:Number,max:Number,size:String,fill:String,textColor:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[e])}}},In=Tn,Rn=a(In,bn,Cn,!1,null,null,null);Rn.options.__file="packages/checkbox/src/checkbox-group.vue";var wn=Rn.exports;wn.install=function(e){e.component(wn.name,wn)};var kn=wn,On=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-switch",class:{"is-disabled":e.switchDisabled,"is-checked":e.checked},attrs:{role:"switch","aria-checked":e.checked,"aria-disabled":e.switchDisabled},on:{click:function(t){return t.preventDefault(),e.switchValue(t)}}},[n("input",{ref:"input",staticClass:"el-switch__input",attrs:{type:"checkbox",id:e.id,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:e.switchDisabled},on:{change:e.handleChange,keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.switchValue(t)}}}),e.inactiveIconClass||e.inactiveText?n("span",{class:["el-switch__label","el-switch__label--left",e.checked?"":"is-active"]},[e.inactiveIconClass?n("i",{class:[e.inactiveIconClass]}):e._e(),!e.inactiveIconClass&&e.inactiveText?n("span",{attrs:{"aria-hidden":e.checked}},[e._v(e._s(e.inactiveText))]):e._e()]):e._e(),n("span",{ref:"core",staticClass:"el-switch__core",style:{width:e.coreWidth+"px"}}),e.activeIconClass||e.activeText?n("span",{class:["el-switch__label","el-switch__label--right",e.checked?"is-active":""]},[e.activeIconClass?n("i",{class:[e.activeIconClass]}):e._e(),!e.activeIconClass&&e.activeText?n("span",{attrs:{"aria-hidden":!e.checked}},[e._v(e._s(e.activeText))]):e._e()]):e._e()])},Nn=[];On._withStripped=!0;var Ln={name:"ElSwitch",mixins:[Y()("input"),I.a,w.a],inject:{elForm:{default:""}},props:{value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:Number,default:40},activeIconClass:{type:String,default:""},inactiveIconClass:{type:String,default:""},activeText:String,inactiveText:String,activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String},data:function(){return{coreWidth:this.width}},created:function(){~[this.activeValue,this.inactiveValue].indexOf(this.value)||this.$emit("input",this.inactiveValue)},computed:{checked:function(){return this.value===this.activeValue},switchDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{checked:function(){this.$refs.input.checked=this.checked,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[this.value])}},methods:{handleChange:function(e){var t=this,n=this.checked?this.inactiveValue:this.activeValue;this.$emit("input",n),this.$emit("change",n),this.$nextTick((function(){t.$refs.input.checked=t.checked}))},setBackgroundColor:function(){var e=this.checked?this.activeColor:this.inactiveColor;this.$refs.core.style.borderColor=e,this.$refs.core.style.backgroundColor=e},switchValue:function(){!this.switchDisabled&&this.handleChange()},getMigratingConfig:function(){return{props:{"on-color":"on-color is renamed to active-color.","off-color":"off-color is renamed to inactive-color.","on-text":"on-text is renamed to active-text.","off-text":"off-text is renamed to inactive-text.","on-value":"on-value is renamed to active-value.","off-value":"off-value is renamed to inactive-value.","on-icon-class":"on-icon-class is renamed to active-icon-class.","off-icon-class":"off-icon-class is renamed to inactive-icon-class."}}}},mounted:function(){this.coreWidth=this.width||40,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.$refs.input.checked=this.checked}},Pn=Ln,Dn=a(Pn,On,Nn,!1,null,null,null);Dn.options.__file="packages/switch/src/component.vue";var Mn=Dn.exports;Mn.install=function(e){e.component(Mn.name,Mn)};var xn=Mn,Bn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[e.multiple?n("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?n("span",[n("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(t){e.deleteTag(t,e.selected[0])}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(e.selected[0].currentLabel))])]),e.selected.length>1?n("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[n("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e.collapseTags?e._e():n("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(t){return n("el-tag",{key:e.getValueKey(t),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:t.hitState,type:"info","disable-transitions":""},on:{close:function(n){e.deleteTag(n,t)}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.currentLabel))])])})),1),e.filterable?n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(t){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){return!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(t)},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(t){t.target.composing||(e.query=t.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),n("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{type:"text",placeholder:e.currentPlaceholder,name:e.name,id:e.id,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur,input:e.debouncedOnInputChange},nativeOn:{keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}},[e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),n("template",{slot:"suffix"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e.showClose?n("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[n("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?n("el-option",{attrs:{value:e.query,created:""}}):e._e(),e._t("default")],2),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):n("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)},Un=[];Bn._withStripped=!0;var Fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-select-dropdown el-popper",class:[{"is-multiple":e.$parent.multiple},e.popperClass],style:{minWidth:e.minWidth}},[e._t("default")],2)},Vn=[];Fn._withStripped=!0;var jn={name:"ElSelectDropdown",componentName:"ElSelectDropdown",mixins:[H.a],props:{placement:{default:"bottom-start"},boundariesPadding:{default:0},popperOptions:{default:function(){return{gpuAcceleration:!1}}},visibleArrow:{default:!0},appendToBody:{type:Boolean,default:!0}},data:function(){return{minWidth:""}},computed:{popperClass:function(){return this.$parent.popperClass}},watch:{"$parent.inputWidth":function(){this.minWidth=this.$parent.$el.getBoundingClientRect().width+"px"}},mounted:function(){var e=this;this.referenceElm=this.$parent.$refs.reference.$el,this.$parent.popperElm=this.popperElm=this.$el,this.$on("updatePopper",(function(){e.$parent.visible&&e.updatePopper()})),this.$on("destroyPopper",this.destroyPopper)}},Gn=jn,Hn=a(Gn,Fn,Vn,!1,null,null,null);Hn.options.__file="packages/select/src/select-dropdown.vue";var Qn=Hn.exports,Wn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[n("span",[e._v(e._s(e.currentLabel))])])],2)},qn=[];Wn._withStripped=!0;var zn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zn={mixins:[w.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var n=this.select,r=n.remote,i=n.valueKey;if(!this.created&&!r){if(i&&"object"===("undefined"===typeof e?"undefined":zn(e))&&"object"===("undefined"===typeof t?"undefined":zn(t))&&e[i]===t[i])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,t){if(this.isObject){var n=this.select.valueKey;return Object(v["getValueByPath"])(e,n)===Object(v["getValueByPath"])(t,n)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var n=this.select.valueKey;return e&&e.some((function(e){return Object(v["getValueByPath"])(e,n)===Object(v["getValueByPath"])(t,n)}))}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(v["escapeRegexpString"])(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,t=e.selected,n=e.multiple,r=n?t:[t],i=this.select.cachedOptions.indexOf(this),o=r.indexOf(this);i>-1&&o<0&&this.select.cachedOptions.splice(i,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},$n=Zn,Kn=a($n,Wn,qn,!1,null,null,null);Kn.options.__file="packages/select/src/option.vue";var Yn=Kn.exports,Jn=n(29),Xn=n.n(Jn),er=n(14),tr=n(27),nr=n.n(tr),rr={data:function(){return{hoverOption:-1}},computed:{optionsAllDisabled:function(){return this.options.filter((function(e){return e.visible})).every((function(e){return e.disabled}))}},watch:{hoverIndex:function(e){var t=this;"number"===typeof e&&e>-1&&(this.hoverOption=this.options[e]||{}),this.options.forEach((function(e){e.hover=t.hoverOption===e}))}},methods:{navigateOptions:function(e){var t=this;if(this.visible){if(0!==this.options.length&&0!==this.filteredOptionsCount&&!this.optionsAllDisabled){"next"===e?(this.hoverIndex++,this.hoverIndex===this.options.length&&(this.hoverIndex=0)):"prev"===e&&(this.hoverIndex--,this.hoverIndex<0&&(this.hoverIndex=this.options.length-1));var n=this.options[this.hoverIndex];!0!==n.disabled&&!0!==n.groupDisabled&&n.visible||this.navigateOptions(e),this.$nextTick((function(){return t.scrollToOption(t.hoverOption)}))}}else this.visible=!0}}},ir={mixins:[w.a,_.a,Y()("reference"),rr],name:"ElSelect",componentName:"ElSelect",inject:{elForm:{default:""},elFormItem:{default:""}},provide:function(){return{select:this}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return!this.filterable||this.multiple||!Object(v["isIE"])()&&!Object(v["isEdge"])()&&!this.visible},showClose:function(){var e=this.multiple?Array.isArray(this.value)&&this.value.length>0:void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.selectDisabled&&this.inputHovering&&e;return t},iconClass:function(){return this.remote&&this.filterable?"":this.visible?"arrow-up is-reverse":"arrow-up"},debounce:function(){return this.remote?300:0},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):(!this.remote||""!==this.query||0!==this.options.length)&&(this.filterable&&this.query&&this.options.length>0&&0===this.filteredOptionsCount?this.noMatchText||this.t("el.select.noMatch"):0===this.options.length?this.noDataText||this.t("el.select.noData"):null)},showNewOption:function(){var e=this,t=this.options.filter((function(e){return!e.created})).some((function(t){return t.currentLabel===e.query}));return this.filterable&&this.allowCreate&&""!==this.query&&!t},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"},propPlaceholder:function(){return"undefined"!==typeof this.placeholder?this.placeholder:this.t("el.select.placeholder")}},components:{ElInput:g.a,ElSelectMenu:Qn,ElOption:Yn,ElTag:Xn.a,ElScrollbar:W.a},directives:{Clickoutside:F.a},props:{name:String,id:String,value:{required:!0},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},automaticDropdown:Boolean,size:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:String,remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String,required:!1},defaultFirstOption:Boolean,reserveKeyword:Boolean,valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{options:[],cachedOptions:[],createdLabel:null,createdSelected:!1,selected:this.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,cachedPlaceHolder:"",optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,currentPlaceholder:"",menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1}},watch:{selectDisabled:function(){var e=this;this.$nextTick((function(){e.resetInputHeight()}))},propPlaceholder:function(e){this.cachedPlaceHolder=this.currentPlaceholder=e},value:function(e,t){this.multiple&&(this.resetInputHeight(),e&&e.length>0||this.$refs.input&&""!==this.query?this.currentPlaceholder="":this.currentPlaceholder=this.cachedPlaceHolder,this.filterable&&!this.reserveKeyword&&(this.query="",this.handleQueryChange(this.query))),this.setSelected(),this.filterable&&!this.multiple&&(this.inputLength=20),Object(v["valueEquals"])(e,t)||this.dispatch("ElFormItem","el.form.change",e)},visible:function(e){var t=this;e?(this.broadcast("ElSelectDropdown","updatePopper"),this.filterable&&(this.query=this.remote?"":this.selectedLabel,this.handleQueryChange(this.query),this.multiple?this.$refs.input.focus():(this.remote||(this.broadcast("ElOption","queryChange",""),this.broadcast("ElOptionGroup","queryChange")),this.selectedLabel&&(this.currentPlaceholder=this.selectedLabel,this.selectedLabel="")))):(this.broadcast("ElSelectDropdown","destroyPopper"),this.$refs.input&&this.$refs.input.blur(),this.query="",this.previousQuery=null,this.selectedLabel="",this.inputLength=20,this.menuVisibleOnFocus=!1,this.resetHoverIndex(),this.$nextTick((function(){t.$refs.input&&""===t.$refs.input.value&&0===t.selected.length&&(t.currentPlaceholder=t.cachedPlaceHolder)})),this.multiple||(this.selected&&(this.filterable&&this.allowCreate&&this.createdSelected&&this.createdLabel?this.selectedLabel=this.createdLabel:this.selectedLabel=this.selected.currentLabel,this.filterable&&(this.query=this.selectedLabel)),this.filterable&&(this.currentPlaceholder=this.cachedPlaceHolder))),this.$emit("visible-change",e)},options:function(){var e=this;if(!this.$isServer){this.$nextTick((function(){e.broadcast("ElSelectDropdown","updatePopper")})),this.multiple&&this.resetInputHeight();var t=this.$el.querySelectorAll("input");-1===[].indexOf.call(t,document.activeElement)&&this.setSelected(),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}},methods:{handleComposition:function(e){var t=this,n=e.target.value;if("compositionend"===e.type)this.isOnComposition=!1,this.$nextTick((function(e){return t.handleQueryChange(n)}));else{var r=n[n.length-1]||"";this.isOnComposition=!Object(It["isKorean"])(r)}},handleQueryChange:function(e){var t=this;this.previousQuery===e||this.isOnComposition||(null!==this.previousQuery||"function"!==typeof this.filterMethod&&"function"!==typeof this.remoteMethod?(this.previousQuery=e,this.$nextTick((function(){t.visible&&t.broadcast("ElSelectDropdown","updatePopper")})),this.hoverIndex=-1,this.multiple&&this.filterable&&this.$nextTick((function(){var e=15*t.$refs.input.value.length+20;t.inputLength=t.collapseTags?Math.min(50,e):e,t.managePlaceholder(),t.resetInputHeight()})),this.remote&&"function"===typeof this.remoteMethod?(this.hoverIndex=-1,this.remoteMethod(e)):"function"===typeof this.filterMethod?(this.filterMethod(e),this.broadcast("ElOptionGroup","queryChange")):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",e),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()):this.previousQuery=e)},scrollToOption:function(e){var t=Array.isArray(e)&&e[0]?e[0].$el:e.$el;if(this.$refs.popper&&t){var n=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap");nr()(n,t)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()},handleMenuEnter:function(){var e=this;this.$nextTick((function(){return e.scrollToOption(e.selected)}))},emitChange:function(e){Object(v["valueEquals"])(this.value,e)||this.$emit("change",e)},getOption:function(e){for(var t=void 0,n="[object object]"===Object.prototype.toString.call(e).toLowerCase(),r="[object null]"===Object.prototype.toString.call(e).toLowerCase(),i="[object undefined]"===Object.prototype.toString.call(e).toLowerCase(),o=this.cachedOptions.length-1;o>=0;o--){var s=this.cachedOptions[o],a=n?Object(v["getValueByPath"])(s.value,this.valueKey)===Object(v["getValueByPath"])(e,this.valueKey):s.value===e;if(a){t=s;break}}if(t)return t;var c=n||r||i?"":String(e),l={value:e,currentLabel:c};return this.multiple&&(l.hitState=!1),l},setSelected:function(){var e=this;if(!this.multiple){var t=this.getOption(this.value);return t.created?(this.createdLabel=t.currentLabel,this.createdSelected=!0):this.createdSelected=!1,this.selectedLabel=t.currentLabel,this.selected=t,void(this.filterable&&(this.query=this.selectedLabel))}var n=[];Array.isArray(this.value)&&this.value.forEach((function(t){n.push(e.getOption(t))})),this.selected=n,this.$nextTick((function(){e.resetInputHeight()}))},handleFocus:function(e){this.softFocus?this.softFocus=!1:((this.automaticDropdown||this.filterable)&&(this.visible=!0,this.filterable&&(this.menuVisibleOnFocus=!0)),this.$emit("focus",e))},blur:function(){this.visible=!1,this.$refs.reference.blur()},handleBlur:function(e){var t=this;setTimeout((function(){t.isSilentBlur?t.isSilentBlur=!1:t.$emit("blur",e)}),50),this.softFocus=!1},handleClearClick:function(e){this.deleteSelected(e)},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},toggleLastOptionHitState:function(e){if(Array.isArray(this.selected)){var t=this.selected[this.selected.length-1];if(t)return!0===e||!1===e?(t.hitState=e,e):(t.hitState=!t.hitState,t.hitState)}},deletePrevTag:function(e){if(e.target.value.length<=0&&!this.toggleLastOptionHitState()){var t=this.value.slice();t.pop(),this.$emit("input",t),this.emitChange(t)}},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(e){8!==e.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var e=this;this.collapseTags&&!this.filterable||this.$nextTick((function(){if(e.$refs.reference){var t=e.$refs.reference.$el.childNodes,n=[].filter.call(t,(function(e){return"INPUT"===e.tagName}))[0],r=e.$refs.tags,i=r?Math.round(r.getBoundingClientRect().height):0,o=e.initialInputHeight||40;n.style.height=0===e.selected.length?o+"px":Math.max(r?i+(i>o?6:0):0,o)+"px",e.visible&&!1!==e.emptyText&&e.broadcast("ElSelectDropdown","updatePopper")}}))},resetHoverIndex:function(){var e=this;setTimeout((function(){e.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map((function(t){return e.options.indexOf(t)}))):e.hoverIndex=-1:e.hoverIndex=e.options.indexOf(e.selected)}),300)},handleOptionSelect:function(e,t){var n=this;if(this.multiple){var r=(this.value||[]).slice(),i=this.getValueIndex(r,e.value);i>-1?r.splice(i,1):(this.multipleLimit<=0||r.length<this.multipleLimit)&&r.push(e.value),this.$emit("input",r),this.emitChange(r),e.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else this.$emit("input",e.value),this.emitChange(e.value),this.visible=!1;this.isSilentBlur=t,this.setSoftFocus(),this.visible||this.$nextTick((function(){n.scrollToOption(e)}))},setSoftFocus:function(){this.softFocus=!0;var e=this.$refs.input||this.$refs.reference;e&&e.focus()},getValueIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n="[object object]"===Object.prototype.toString.call(t).toLowerCase();if(n){var r=this.valueKey,i=-1;return e.some((function(e,n){return Object(v["getValueByPath"])(e,r)===Object(v["getValueByPath"])(t,r)&&(i=n,!0)})),i}return e.indexOf(t)},toggleMenu:function(){this.selectDisabled||(this.menuVisibleOnFocus?this.menuVisibleOnFocus=!1:this.visible=!this.visible,this.visible&&(this.$refs.input||this.$refs.reference).focus())},selectOption:function(){this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu()},deleteSelected:function(e){e.stopPropagation();var t=this.multiple?[]:"";this.$emit("input",t),this.emitChange(t),this.visible=!1,this.$emit("clear")},deleteTag:function(e,t){var n=this.selected.indexOf(t);if(n>-1&&!this.selectDisabled){var r=this.value.slice();r.splice(n,1),this.$emit("input",r),this.emitChange(r),this.$emit("remove-tag",t.value)}e.stopPropagation()},onInputChange:function(){this.filterable&&this.query!==this.selectedLabel&&(this.query=this.selectedLabel,this.handleQueryChange(this.query))},onOptionDestroy:function(e){e>-1&&(this.optionsCount--,this.filteredOptionsCount--,this.options.splice(e,1))},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},checkDefaultFirstOption:function(){this.hoverIndex=-1;for(var e=!1,t=this.options.length-1;t>=0;t--)if(this.options[t].created){e=!0,this.hoverIndex=t;break}if(!e)for(var n=0;n!==this.options.length;++n){var r=this.options[n];if(this.query){if(!r.disabled&&!r.groupDisabled&&r.visible){this.hoverIndex=n;break}}else if(r.itemSelected){this.hoverIndex=n;break}}},getValueKey:function(e){return"[object object]"!==Object.prototype.toString.call(e.value).toLowerCase()?e.value:Object(v["getValueByPath"])(e.value,this.valueKey)}},created:function(){var e=this;this.cachedPlaceHolder=this.currentPlaceholder=this.propPlaceholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.debouncedOnInputChange=B()(this.debounce,(function(){e.onInputChange()})),this.debouncedQueryChange=B()(this.debounce,(function(t){e.handleQueryChange(t.target.value)})),this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){var e=this;this.multiple&&Array.isArray(this.value)&&this.value.length>0&&(this.currentPlaceholder=""),Object(er["addResizeListener"])(this.$el,this.handleResize);var t=this.$refs.reference;if(t&&t.$el){var n={medium:36,small:32,mini:28},r=t.$el.querySelector("input");this.initialInputHeight=r.getBoundingClientRect().height||n[this.selectSize]}this.remote&&this.multiple&&this.resetInputHeight(),this.$nextTick((function(){t&&t.$el&&(e.inputWidth=t.$el.getBoundingClientRect().width)})),this.setSelected()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(er["removeResizeListener"])(this.$el,this.handleResize)}},or=ir,sr=a(or,Bn,Un,!1,null,null,null);sr.options.__file="packages/select/src/select.vue";var ar=sr.exports;ar.install=function(e){e.component(ar.name,ar)};var cr=ar;Yn.install=function(e){e.component(Yn.name,Yn)};var lr=Yn,ur=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-group__wrap"},[n("li",{staticClass:"el-select-group__title"},[e._v(e._s(e.label))]),n("li",[n("ul",{staticClass:"el-select-group"},[e._t("default")],2)])])},dr=[];ur._withStripped=!0;var hr={mixins:[w.a],name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},data:function(){return{visible:!0}},watch:{disabled:function(e){this.broadcast("ElOption","handleGroupDisabled",e)}},methods:{queryChange:function(){this.visible=this.$children&&Array.isArray(this.$children)&&this.$children.some((function(e){return!0===e.visible}))}},created:function(){this.$on("queryChange",this.queryChange)},mounted:function(){this.disabled&&this.broadcast("ElOption","handleGroupDisabled",this.disabled)}},pr=hr,fr=a(pr,ur,dr,!1,null,null,null);fr.options.__file="packages/select/src/option-group.vue";var gr=fr.exports;gr.install=function(e){e.component(gr.name,gr)};var mr=gr,_r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.buttonSize?"el-button--"+e.buttonSize:"",{"is-disabled":e.buttonDisabled,"is-loading":e.loading,"is-plain":e.plain,"is-round":e.round,"is-circle":e.circle}],attrs:{disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?n("i",{staticClass:"el-icon-loading"}):e._e(),e.icon&&!e.loading?n("i",{class:e.icon}):e._e(),e.$slots.default?n("span",[e._t("default")],2):e._e()])},vr=[];_r._withStripped=!0;var Er={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(e){this.$emit("click",e)}}},Ar=Er,yr=a(Ar,_r,vr,!1,null,null,null);yr.options.__file="packages/button/src/button.vue";var Sr=yr.exports;Sr.install=function(e){e.component(Sr.name,Sr)};var br=Sr,Cr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-button-group"},[e._t("default")],2)},Tr=[];Cr._withStripped=!0;var Ir={name:"ElButtonGroup"},Rr=Ir,wr=a(Rr,Cr,Tr,!1,null,null,null);wr.options.__file="packages/button/src/button-group.vue";var kr=wr.exports;kr.install=function(e){e.component(kr.name,kr)};var Or=kr,Nr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-table",class:[{"el-table--fit":e.fit,"el-table--striped":e.stripe,"el-table--border":e.border||e.isGroup,"el-table--hidden":e.isHidden,"el-table--group":e.isGroup,"el-table--fluid-height":e.maxHeight,"el-table--scrollable-x":e.layout.scrollX,"el-table--scrollable-y":e.layout.scrollY,"el-table--enable-row-hover":!e.store.states.isComplex,"el-table--enable-row-transition":0!==(e.store.states.data||[]).length&&(e.store.states.data||[]).length<100},e.tableSize?"el-table--"+e.tableSize:""],on:{mouseleave:function(t){e.handleMouseLeave(t)}}},[n("div",{ref:"hiddenColumns",staticClass:"hidden-columns"},[e._t("default")],2),e.showHeader?n("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"headerWrapper",staticClass:"el-table__header-wrapper"},[n("table-header",{ref:"tableHeader",style:{width:e.layout.bodyWidth?e.layout.bodyWidth+"px":""},attrs:{store:e.store,border:e.border,"default-sort":e.defaultSort}})],1):e._e(),n("div",{ref:"bodyWrapper",staticClass:"el-table__body-wrapper",class:[e.layout.scrollX?"is-scrolling-"+e.scrollPosition:"is-scrolling-none"],style:[e.bodyHeight]},[n("table-body",{style:{width:e.bodyWidth},attrs:{context:e.context,store:e.store,stripe:e.stripe,"row-class-name":e.rowClassName,"row-style":e.rowStyle,highlight:e.highlightCurrentRow}}),e.data&&0!==e.data.length?e._e():n("div",{ref:"emptyBlock",staticClass:"el-table__empty-block",style:e.emptyBlockStyle},[n("span",{staticClass:"el-table__empty-text"},[e._t("empty",[e._v(e._s(e.emptyText||e.t("el.table.emptyText")))])],2)]),e.$slots.append?n("div",{ref:"appendWrapper",staticClass:"el-table__append-wrapper"},[e._t("append")],2):e._e()],1),e.showSummary?n("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"},{name:"mousewheel",rawName:"v-mousewheel",value:e.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"footerWrapper",staticClass:"el-table__footer-wrapper"},[n("table-footer",{style:{width:e.layout.bodyWidth?e.layout.bodyWidth+"px":""},attrs:{store:e.store,border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,"default-sort":e.defaultSort}})],1):e._e(),e.fixedColumns.length>0?n("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"fixedWrapper",staticClass:"el-table__fixed",style:[{width:e.layout.fixedWidth?e.layout.fixedWidth+"px":""},e.fixedHeight]},[e.showHeader?n("div",{ref:"fixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[n("table-header",{ref:"fixedTableHeader",style:{width:e.bodyWidth},attrs:{fixed:"left",border:e.border,store:e.store}})],1):e._e(),n("div",{ref:"fixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:e.layout.headerHeight+"px"},e.fixedBodyHeight]},[n("table-body",{style:{width:e.bodyWidth},attrs:{fixed:"left",store:e.store,stripe:e.stripe,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"row-style":e.rowStyle}}),e.$slots.append?n("div",{staticClass:"el-table__append-gutter",style:{height:e.layout.appendHeight+"px"}}):e._e()],1),e.showSummary?n("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"}],ref:"fixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[n("table-footer",{style:{width:e.bodyWidth},attrs:{fixed:"left",border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,store:e.store}})],1):e._e()]):e._e(),e.rightFixedColumns.length>0?n("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"rightFixedWrapper",staticClass:"el-table__fixed-right",style:[{width:e.layout.rightFixedWidth?e.layout.rightFixedWidth+"px":"",right:e.layout.scrollY?(e.border?e.layout.gutterWidth:e.layout.gutterWidth||0)+"px":""},e.fixedHeight]},[e.showHeader?n("div",{ref:"rightFixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[n("table-header",{ref:"rightFixedTableHeader",style:{width:e.bodyWidth},attrs:{fixed:"right",border:e.border,store:e.store}})],1):e._e(),n("div",{ref:"rightFixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:e.layout.headerHeight+"px"},e.fixedBodyHeight]},[n("table-body",{style:{width:e.bodyWidth},attrs:{fixed:"right",store:e.store,stripe:e.stripe,"row-class-name":e.rowClassName,"row-style":e.rowStyle,highlight:e.highlightCurrentRow}}),e.$slots.append?n("div",{staticClass:"el-table__append-gutter",style:{height:e.layout.appendHeight+"px"}}):e._e()],1),e.showSummary?n("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"}],ref:"rightFixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[n("table-footer",{style:{width:e.bodyWidth},attrs:{fixed:"right",border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,store:e.store}})],1):e._e()]):e._e(),e.rightFixedColumns.length>0?n("div",{ref:"rightFixedPatch",staticClass:"el-table__fixed-right-patch",style:{width:e.layout.scrollY?e.layout.gutterWidth+"px":"0",height:e.layout.headerHeight+"px"}}):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.resizeProxyVisible,expression:"resizeProxyVisible"}],ref:"resizeProxy",staticClass:"el-table__column-resize-proxy"})])},Lr=[];Nr._withStripped=!0;var Pr=n(17),Dr=n.n(Pr),Mr=n(35),xr=n(38),Br=n.n(xr),Ur="undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Fr=function(e,t){e&&e.addEventListener&&e.addEventListener(Ur?"DOMMouseScroll":"mousewheel",(function(e){var n=Br()(e);t&&t.apply(this,[e,n])}))},Vr={bind:function(e,t){Fr(e,t.value)}},jr=n(6),Gr=n.n(jr),Hr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qr=function(e){var t=e.target;while(t&&"HTML"!==t.tagName.toUpperCase()){if("TD"===t.tagName.toUpperCase())return t;t=t.parentNode}return null},Wr=function(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":Hr(e))},qr=function(e,t,n,r,i){if(!t&&!r&&(!i||Array.isArray(i)&&!i.length))return e;n="string"===typeof n?"descending"===n?-1:1:n&&n<0?-1:1;var o=r?null:function(n,r){return i?(Array.isArray(i)||(i=[i]),i.map((function(t){return"string"===typeof t?Object(v["getValueByPath"])(n,t):t(n,r,e)}))):("$key"!==t&&Wr(n)&&"$value"in n&&(n=n.$value),[Wr(n)?Object(v["getValueByPath"])(n,t):n])},s=function(e,t){if(r)return r(e.value,t.value);for(var n=0,i=e.key.length;n<i;n++){if(e.key[n]<t.key[n])return-1;if(e.key[n]>t.key[n])return 1}return 0};return e.map((function(e,t){return{value:e,index:t,key:o?o(e,t):null}})).sort((function(e,t){var r=s(e,t);return r||(r=e.index-t.index),r*n})).map((function(e){return e.value}))},zr=function(e,t){var n=null;return e.columns.forEach((function(e){e.id===t&&(n=e)})),n},Zr=function(e,t){for(var n=null,r=0;r<e.columns.length;r++){var i=e.columns[r];if(i.columnKey===t){n=i;break}}return n},$r=function(e,t){var n=(t.className||"").match(/el-table_[^\s]+/gm);return n?zr(e,n[0]):null},Kr=function(e,t){if(!e)throw new Error("row is required when get row identity");if("string"===typeof t){if(t.indexOf(".")<0)return e[t];for(var n=t.split("."),r=e,i=0;i<n.length;i++)r=r[n[i]];return r}if("function"===typeof t)return t.call(null,e)},Yr=function(e,t){var n={};return(e||[]).forEach((function(e,r){n[Kr(e,t)]={row:e,index:r}})),n};function Jr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xr(e,t){var n={},r=void 0;for(r in e)n[r]=e[r];for(r in t)if(Jr(t,r)){var i=t[r];"undefined"!==typeof i&&(n[r]=i)}return n}function ei(e){return void 0!==e&&(e=parseInt(e,10),isNaN(e)&&(e=null)),e}function ti(e){return"undefined"!==typeof e&&(e=ei(e),isNaN(e)&&(e=80)),e}function ni(e){return"number"===typeof e?e:"string"===typeof e?/^\d+(?:px)?$/.test(e)?parseInt(e,10):e:null}function ri(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function ii(e,t,n){var r=!1,i=e.indexOf(t),o=-1!==i,s=function(){e.push(t),r=!0},a=function(){e.splice(i,1),r=!0};return"boolean"===typeof n?n&&!o?s():!n&&o&&a():o?a():s(),r}function oi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hasChildren",i=function(e){return!(Array.isArray(e)&&e.length)};function o(e,s,a){t(e,s,a),s.forEach((function(e){if(e[r])t(e,null,a+1);else{var s=e[n];i(s)||o(e,s,a+1)}}))}e.forEach((function(e){if(e[r])t(e,null,0);else{var s=e[n];i(s)||o(e,s,0)}}))}var si={data:function(){return{states:{defaultExpandAll:!1,expandRows:[]}}},methods:{updateExpandRows:function(){var e=this.states,t=e.data,n=void 0===t?[]:t,r=e.rowKey,i=e.defaultExpandAll,o=e.expandRows;if(i)this.states.expandRows=n.slice();else if(r){var s=Yr(o,r);this.states.expandRows=n.reduce((function(e,t){var n=Kr(t,r),i=s[n];return i&&e.push(t),e}),[])}else this.states.expandRows=[]},toggleRowExpansion:function(e,t){var n=ii(this.states.expandRows,e,t);n&&(this.table.$emit("expand-change",e,this.states.expandRows.slice()),this.scheduleLayout())},setExpandRowKeys:function(e){this.assertRowKey();var t=this.states,n=t.data,r=t.rowKey,i=Yr(n,r);this.states.expandRows=e.reduce((function(e,t){var n=i[t];return n&&e.push(n.row),e}),[])},isRowExpanded:function(e){var t=this.states,n=t.expandRows,r=void 0===n?[]:n,i=t.rowKey;if(i){var o=Yr(r,i);return!!o[Kr(e,i)]}return-1!==r.indexOf(e)}}},ai={data:function(){return{states:{_currentRowKey:null,currentRow:null}}},methods:{setCurrentRowKey:function(e){this.assertRowKey(),this.states._currentRowKey=e,this.setCurrentRowByKey(e)},restoreCurrentRowKey:function(){this.states._currentRowKey=null},setCurrentRowByKey:function(e){var t=this.states,n=t.data,r=void 0===n?[]:n,i=t.rowKey,o=null;i&&(o=Object(v["arrayFind"])(r,(function(t){return Kr(t,i)===e}))),t.currentRow=o},updateCurrentRow:function(e){var t=this.states,n=this.table,r=t.currentRow;if(e&&e!==r)return t.currentRow=e,void n.$emit("current-change",e,r);!e&&r&&(t.currentRow=null,n.$emit("current-change",null,r))},updateCurrentRowData:function(){var e=this.states,t=this.table,n=e.rowKey,r=e._currentRowKey,i=e.data||[],o=e.currentRow;if(-1===i.indexOf(o)&&o){if(n){var s=Kr(o,n);this.setCurrentRowByKey(s)}else e.currentRow=null;null===e.currentRow&&t.$emit("current-change",null,o)}else r&&(this.setCurrentRowByKey(r),this.restoreCurrentRowKey())}}},ci=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},li={data:function(){return{states:{expandRowKeys:[],treeData:{},indent:16,lazy:!1,lazyTreeNodeMap:{},lazyColumnIdentifier:"hasChildren",childrenColumnName:"children"}}},computed:{normalizedData:function(){if(!this.states.rowKey)return{};var e=this.states.data||[];return this.normalize(e)},normalizedLazyNode:function(){var e=this.states,t=e.rowKey,n=e.lazyTreeNodeMap,r=e.lazyColumnIdentifier,i=Object.keys(n),o={};return i.length?(i.forEach((function(e){if(n[e].length){var i={children:[]};n[e].forEach((function(e){var n=Kr(e,t);i.children.push(n),e[r]&&!o[n]&&(o[n]={children:[]})})),o[e]=i}})),o):o}},watch:{normalizedData:"updateTreeData",normalizedLazyNode:"updateTreeData"},methods:{normalize:function(e){var t=this.states,n=t.childrenColumnName,r=t.lazyColumnIdentifier,i=t.rowKey,o=t.lazy,s={};return oi(e,(function(e,t,n){var r=Kr(e,i);Array.isArray(t)?s[r]={children:t.map((function(e){return Kr(e,i)})),level:n}:o&&(s[r]={children:[],lazy:!0,level:n})}),n,r),s},updateTreeData:function(){var e=this.normalizedData,t=this.normalizedLazyNode,n=Object.keys(e),r={};if(n.length){var i=this.states,o=i.treeData,s=i.defaultExpandAll,a=i.expandRowKeys,c=i.lazy,l=[],u=function(e,t){var n=s||a&&-1!==a.indexOf(t);return!!(e&&e.expanded||n)};n.forEach((function(t){var n=o[t],i=ci({},e[t]);if(i.expanded=u(n,t),i.lazy){var s=n||{},a=s.loaded,c=void 0!==a&&a,d=s.loading,h=void 0!==d&&d;i.loaded=!!c,i.loading=!!h,l.push(t)}r[t]=i}));var d=Object.keys(t);c&&d.length&&l.length&&d.forEach((function(e){var n=o[e],i=t[e].children;if(-1!==l.indexOf(e)){if(0!==r[e].children.length)throw new Error("[ElTable]children must be an empty array.");r[e].children=i}else{var s=n||{},a=s.loaded,c=void 0!==a&&a,d=s.loading,h=void 0!==d&&d;r[e]={lazy:!0,loaded:!!c,loading:!!h,expanded:u(n,e),children:i,level:""}}}))}this.states.treeData=r,this.updateTableScrollY()},updateTreeExpandKeys:function(e){this.states.expandRowKeys=e,this.updateTreeData()},toggleTreeExpansion:function(e,t){this.assertRowKey();var n=this.states,r=n.rowKey,i=n.treeData,o=Kr(e,r),s=o&&i[o];if(o&&s&&"expanded"in s){var a=s.expanded;t="undefined"===typeof t?!s.expanded:t,i[o].expanded=t,a!==t&&this.table.$emit("expand-change",e,t),this.updateTableScrollY()}},loadOrToggle:function(e){this.assertRowKey();var t=this.states,n=t.lazy,r=t.treeData,i=t.rowKey,o=Kr(e,i),s=r[o];n&&s&&"loaded"in s&&!s.loaded?this.loadData(e,o,s):this.toggleTreeExpansion(e)},loadData:function(e,t,n){var r=this,i=this.table.load,o=this.states.treeData;i&&!o[t].loaded&&(o[t].loading=!0,i(e,n,(function(n){if(!Array.isArray(n))throw new Error("[ElTable] data must be an array");var i=r.states,o=i.lazyTreeNodeMap,s=i.treeData;s[t].loading=!1,s[t].loaded=!0,s[t].expanded=!0,n.length&&r.$set(o,t,n),r.table.$emit("expand-change",e,!0)})))}}},ui=function(e,t){var n=t.sortingColumn;return n&&"string"!==typeof n.sortable?qr(e,t.sortProp,t.sortOrder,n.sortMethod,n.sortBy):e},di=function e(t){var n=[];return t.forEach((function(t){t.children?n.push.apply(n,e(t.children)):n.push(t)})),n},hi=Gr.a.extend({data:function(){return{states:{rowKey:null,data:[],isComplex:!1,_columns:[],originColumns:[],columns:[],fixedColumns:[],rightFixedColumns:[],leafColumns:[],fixedLeafColumns:[],rightFixedLeafColumns:[],leafColumnsLength:0,fixedLeafColumnsLength:0,rightFixedLeafColumnsLength:0,isAllSelected:!1,selection:[],reserveSelection:!1,selectOnIndeterminate:!1,selectable:null,filters:{},filteredData:null,sortingColumn:null,sortProp:null,sortOrder:null,hoverRow:null}}},mixins:[si,ai,li],methods:{assertRowKey:function(){var e=this.states.rowKey;if(!e)throw new Error("[ElTable] prop row-key is required")},updateColumns:function(){var e=this.states,t=e._columns||[];e.fixedColumns=t.filter((function(e){return!0===e.fixed||"left"===e.fixed})),e.rightFixedColumns=t.filter((function(e){return"right"===e.fixed})),e.fixedColumns.length>0&&t[0]&&"selection"===t[0].type&&!t[0].fixed&&(t[0].fixed=!0,e.fixedColumns.unshift(t[0]));var n=t.filter((function(e){return!e.fixed}));e.originColumns=[].concat(e.fixedColumns).concat(n).concat(e.rightFixedColumns);var r=di(n),i=di(e.fixedColumns),o=di(e.rightFixedColumns);e.leafColumnsLength=r.length,e.fixedLeafColumnsLength=i.length,e.rightFixedLeafColumnsLength=o.length,e.columns=[].concat(i).concat(r).concat(o),e.isComplex=e.fixedColumns.length>0||e.rightFixedColumns.length>0},scheduleLayout:function(e){e&&this.updateColumns(),this.table.debouncedUpdateLayout()},isSelected:function(e){var t=this.states.selection,n=void 0===t?[]:t;return n.indexOf(e)>-1},clearSelection:function(){var e=this.states;e.isAllSelected=!1;var t=e.selection;t.length&&(e.selection=[],this.table.$emit("selection-change",[]))},cleanSelection:function(){var e=this.states,t=e.data,n=e.rowKey,r=e.selection,i=void 0;if(n){i=[];var o=Yr(r,n),s=Yr(t,n);for(var a in o)o.hasOwnProperty(a)&&!s[a]&&i.push(o[a].row)}else i=r.filter((function(e){return-1===t.indexOf(e)}));if(i.length){var c=r.filter((function(e){return-1===i.indexOf(e)}));e.selection=c,this.table.$emit("selection-change",c.slice())}},toggleRowSelection:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=ii(this.states.selection,e,t);if(r){var i=(this.states.selection||[]).slice();n&&this.table.$emit("select",i,e),this.table.$emit("selection-change",i)}},_toggleAllSelection:function(){var e=this.states,t=e.data,n=void 0===t?[]:t,r=e.selection,i=e.selectOnIndeterminate?!e.isAllSelected:!(e.isAllSelected||r.length);e.isAllSelected=i;var o=!1;n.forEach((function(t,n){e.selectable?e.selectable.call(null,t,n)&&ii(r,t,i)&&(o=!0):ii(r,t,i)&&(o=!0)})),o&&this.table.$emit("selection-change",r?r.slice():[]),this.table.$emit("select-all",r)},updateSelectionByRowKey:function(){var e=this.states,t=e.selection,n=e.rowKey,r=e.data,i=Yr(t,n);r.forEach((function(e){var r=Kr(e,n),o=i[r];o&&(t[o.index]=e)}))},updateAllSelected:function(){var e=this.states,t=e.selection,n=e.rowKey,r=e.selectable,i=e.data||[];if(0!==i.length){var o=void 0;n&&(o=Yr(t,n));for(var s=function(e){return o?!!o[Kr(e,n)]:-1!==t.indexOf(e)},a=!0,c=0,l=0,u=i.length;l<u;l++){var d=i[l],h=r&&r.call(null,d,l);if(s(d))c++;else if(!r||h){a=!1;break}}0===c&&(a=!1),e.isAllSelected=a}else e.isAllSelected=!1},updateFilters:function(e,t){Array.isArray(e)||(e=[e]);var n=this.states,r={};return e.forEach((function(e){n.filters[e.id]=t,r[e.columnKey||e.id]=t})),r},updateSort:function(e,t,n){this.states.sortingColumn&&this.states.sortingColumn!==e&&(this.states.sortingColumn.order=null),this.states.sortingColumn=e,this.states.sortProp=t,this.states.sortOrder=n},execFilter:function(){var e=this,t=this.states,n=t._data,r=t.filters,i=n;Object.keys(r).forEach((function(n){var r=t.filters[n];if(r&&0!==r.length){var o=zr(e.states,n);o&&o.filterMethod&&(i=i.filter((function(e){return r.some((function(t){return o.filterMethod.call(null,t,e,o)}))})))}})),t.filteredData=i},execSort:function(){var e=this.states;e.data=ui(e.filteredData,e)},execQuery:function(e){e&&e.filter||this.execFilter(),this.execSort()},clearFilter:function(e){var t=this.states,n=this.table.$refs,r=n.tableHeader,i=n.fixedTableHeader,o=n.rightFixedTableHeader,s={};r&&(s=Tt()(s,r.filterPanels)),i&&(s=Tt()(s,i.filterPanels)),o&&(s=Tt()(s,o.filterPanels));var a=Object.keys(s);if(a.length)if("string"===typeof e&&(e=[e]),Array.isArray(e)){var c=e.map((function(e){return Zr(t,e)}));a.forEach((function(e){var t=c.find((function(t){return t.id===e}));t&&(s[e].filteredValue=[])})),this.commit("filterChange",{column:c,values:[],silent:!0,multi:!0})}else a.forEach((function(e){s[e].filteredValue=[]})),t.filters={},this.commit("filterChange",{column:{},values:[],silent:!0})},clearSort:function(){var e=this.states;e.sortingColumn&&(this.updateSort(null,null,null),this.commit("changeSortCondition",{silent:!0}))},setExpandRowKeysAdapter:function(e){this.setExpandRowKeys(e),this.updateTreeExpandKeys(e)},toggleRowExpansionAdapter:function(e,t){var n=this.states.columns.some((function(e){var t=e.type;return"expand"===t}));n?this.toggleRowExpansion(e,t):this.toggleTreeExpansion(e,t)}}});hi.prototype.mutations={setData:function(e,t){var n=e._data!==t;e._data=t,this.execQuery(),this.updateCurrentRowData(),this.updateExpandRows(),e.reserveSelection?(this.assertRowKey(),this.updateSelectionByRowKey()):n?this.clearSelection():this.cleanSelection(),this.updateAllSelected(),this.updateTableScrollY()},insertColumn:function(e,t,n,r){var i=e._columns;r&&(i=r.children,i||(i=r.children=[])),"undefined"!==typeof n?i.splice(n,0,t):i.push(t),"selection"===t.type&&(e.selectable=t.selectable,e.reserveSelection=t.reserveSelection),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},removeColumn:function(e,t,n){var r=e._columns;n&&(r=n.children,r||(r=n.children=[])),r&&r.splice(r.indexOf(t),1),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},sort:function(e,t){var n=t.prop,r=t.order,i=t.init;if(n){var o=Object(v["arrayFind"])(e.columns,(function(e){return e.property===n}));o&&(o.order=r,this.updateSort(o,n,r),this.commit("changeSortCondition",{init:i}))}},changeSortCondition:function(e,t){var n=e.sortingColumn,r=e.sortProp,i=e.sortOrder;null===i&&(e.sortingColumn=null,e.sortProp=null);var o={filter:!0};this.execQuery(o),t&&(t.silent||t.init)||this.table.$emit("sort-change",{column:n,prop:r,order:i}),this.updateTableScrollY()},filterChange:function(e,t){var n=t.column,r=t.values,i=t.silent,o=this.updateFilters(n,r);this.execQuery(),i||this.table.$emit("filter-change",o),this.updateTableScrollY()},toggleAllSelection:function(){this.toggleAllSelection()},rowSelectedChanged:function(e,t){this.toggleRowSelection(t),this.updateAllSelected()},setHoverRow:function(e,t){e.hoverRow=t},setCurrentRow:function(e,t){this.updateCurrentRow(t)}},hi.prototype.commit=function(e){var t=this.mutations;if(!t[e])throw new Error("Action not found: "+e);for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t[e].apply(this,[this.states].concat(r))},hi.prototype.updateTableScrollY=function(){Gr.a.nextTick(this.table.updateScrollY)};var pi=hi;function fi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Table is required.");var n=new pi;return n.table=e,n.toggleAllSelection=B()(10,n._toggleAllSelection),Object.keys(t).forEach((function(e){n.states[e]=t[e]})),n}function gi(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n],i=void 0;"string"===typeof r?i=function(){return this.store.states[r]}:"function"===typeof r?i=function(){return r.call(this,this.store.states)}:console.error("invalid value type"),i&&(t[n]=i)})),t}var mi=n(30),_i=n.n(mi);function vi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ei=function(){function e(t){for(var n in vi(this,e),this.observers=[],this.table=null,this.store=null,this.columns=null,this.fit=!0,this.showHeader=!0,this.height=null,this.scrollX=!1,this.scrollY=!1,this.bodyWidth=null,this.fixedWidth=null,this.rightFixedWidth=null,this.tableHeight=null,this.headerHeight=44,this.appendHeight=0,this.footerHeight=44,this.viewportHeight=null,this.bodyHeight=null,this.fixedBodyHeight=null,this.gutterWidth=_i()(),t)t.hasOwnProperty(n)&&(this[n]=t[n]);if(!this.table)throw new Error("table is required for Table Layout");if(!this.store)throw new Error("store is required for Table Layout")}return e.prototype.updateScrollY=function(){var e=this.height;if(null===e)return!1;var t=this.table.bodyWrapper;if(this.table.$el&&t){var n=t.querySelector(".el-table__body"),r=this.scrollY,i=n.offsetHeight>this.bodyHeight;return this.scrollY=i,r!==i}return!1},e.prototype.setHeight=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"height";if(!Gr.a.prototype.$isServer){var r=this.table.$el;if(e=ni(e),this.height=e,!r&&(e||0===e))return Gr.a.nextTick((function(){return t.setHeight(e,n)}));"number"===typeof e?(r.style[n]=e+"px",this.updateElsHeight()):"string"===typeof e&&(r.style[n]=e,this.updateElsHeight())}},e.prototype.setMaxHeight=function(e){this.setHeight(e,"max-height")},e.prototype.getFlattenColumns=function(){var e=[],t=this.table.columns;return t.forEach((function(t){t.isColumnGroup?e.push.apply(e,t.columns):e.push(t)})),e},e.prototype.updateElsHeight=function(){var e=this;if(!this.table.$ready)return Gr.a.nextTick((function(){return e.updateElsHeight()}));var t=this.table.$refs,n=t.headerWrapper,r=t.appendWrapper,i=t.footerWrapper;if(this.appendHeight=r?r.offsetHeight:0,!this.showHeader||n){var o=n?n.querySelector(".el-table__header tr"):null,s=this.headerDisplayNone(o),a=this.headerHeight=this.showHeader?n.offsetHeight:0;if(this.showHeader&&!s&&n.offsetWidth>0&&(this.table.columns||[]).length>0&&a<2)return Gr.a.nextTick((function(){return e.updateElsHeight()}));var c=this.tableHeight=this.table.$el.clientHeight,l=this.footerHeight=i?i.offsetHeight:0;null!==this.height&&(this.bodyHeight=c-a-l+(i?1:0)),this.fixedBodyHeight=this.scrollX?this.bodyHeight-this.gutterWidth:this.bodyHeight;var u=!(this.store.states.data&&this.store.states.data.length);this.viewportHeight=this.scrollX?c-(u?0:this.gutterWidth):c,this.updateScrollY(),this.notifyObservers("scrollable")}},e.prototype.headerDisplayNone=function(e){if(!e)return!0;var t=e;while("DIV"!==t.tagName){if("none"===getComputedStyle(t).display)return!0;t=t.parentElement}return!1},e.prototype.updateColumnsWidth=function(){if(!Gr.a.prototype.$isServer){var e=this.fit,t=this.table.$el.clientWidth,n=0,r=this.getFlattenColumns(),i=r.filter((function(e){return"number"!==typeof e.width}));if(r.forEach((function(e){"number"===typeof e.width&&e.realWidth&&(e.realWidth=null)})),i.length>0&&e){r.forEach((function(e){n+=e.width||e.minWidth||80}));var o=this.scrollY?this.gutterWidth:0;if(n<=t-o){this.scrollX=!1;var s=t-o-n;if(1===i.length)i[0].realWidth=(i[0].minWidth||80)+s;else{var a=i.reduce((function(e,t){return e+(t.minWidth||80)}),0),c=s/a,l=0;i.forEach((function(e,t){if(0!==t){var n=Math.floor((e.minWidth||80)*c);l+=n,e.realWidth=(e.minWidth||80)+n}})),i[0].realWidth=(i[0].minWidth||80)+s-l}}else this.scrollX=!0,i.forEach((function(e){e.realWidth=e.minWidth}));this.bodyWidth=Math.max(n,t),this.table.resizeState.width=this.bodyWidth}else r.forEach((function(e){e.width||e.minWidth?e.realWidth=e.width||e.minWidth:e.realWidth=80,n+=e.realWidth})),this.scrollX=n>t,this.bodyWidth=n;var u=this.store.states.fixedColumns;if(u.length>0){var d=0;u.forEach((function(e){d+=e.realWidth||e.width})),this.fixedWidth=d}var h=this.store.states.rightFixedColumns;if(h.length>0){var p=0;h.forEach((function(e){p+=e.realWidth||e.width})),this.rightFixedWidth=p}this.notifyObservers("columns")}},e.prototype.addObserver=function(e){this.observers.push(e)},e.prototype.removeObserver=function(e){var t=this.observers.indexOf(e);-1!==t&&this.observers.splice(t,1)},e.prototype.notifyObservers=function(e){var t=this,n=this.observers;n.forEach((function(n){switch(e){case"columns":n.onColumnsChange(t);break;case"scrollable":n.onScrollableChange(t);break;default:throw new Error("Table Layout don't have event "+e+".")}}))},e}(),Ai=Ei,yi={created:function(){this.tableLayout.addObserver(this)},destroyed:function(){this.tableLayout.removeObserver(this)},computed:{tableLayout:function(){var e=this.layout;if(!e&&this.table&&(e=this.table.layout),!e)throw new Error("Can not find table layout.");return e}},mounted:function(){this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout)},updated:function(){this.__updated__||(this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout),this.__updated__=!0)},methods:{onColumnsChange:function(e){var t=this.$el.querySelectorAll("colgroup > col");if(t.length){var n=e.getFlattenColumns(),r={};n.forEach((function(e){r[e.id]=e}));for(var i=0,o=t.length;i<o;i++){var s=t[i],a=s.getAttribute("name"),c=r[a];c&&s.setAttribute("width",c.realWidth||c.width)}}},onScrollableChange:function(e){for(var t=this.$el.querySelectorAll("colgroup > col[name=gutter]"),n=0,r=t.length;n<r;n++){var i=t[n];i.setAttribute("width",e.scrollY?e.gutterWidth:"0")}for(var o=this.$el.querySelectorAll("th.gutter"),s=0,a=o.length;s<a;s++){var c=o[s];c.style.width=e.scrollY?e.gutterWidth+"px":"0",c.style.display=e.scrollY?"":"none"}}}},Si="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ci={name:"ElTableBody",mixins:[yi],components:{ElCheckbox:Dr.a,ElTooltip:it.a},props:{store:{required:!0},stripe:Boolean,context:{},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:String,highlight:Boolean},render:function(e){var t=this,n=this.data||[];return e("table",{class:"el-table__body",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(t){return e("col",{attrs:{name:t.id},key:t.id})}))]),e("tbody",[n.reduce((function(e,n){return e.concat(t.wrappedRowRender(n,e.length))}),[]),e("el-tooltip",{attrs:{effect:this.table.tooltipEffect,placement:"top",content:this.tooltipContent},ref:"tooltip"})])])},computed:bi({table:function(){return this.$parent}},gi({data:"data",columns:"columns",treeIndent:"indent",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length},hasExpandColumn:function(e){return e.columns.some((function(e){var t=e.type;return"expand"===t}))}}),{firstDefaultColumnIndex:function(){return Object(v["arrayFindIndex"])(this.columns,(function(e){var t=e.type;return"default"===t}))}}),watch:{"store.states.hoverRow":function(e,t){var n=this;if(this.store.states.isComplex&&!this.$isServer){var r=window.requestAnimationFrame;r||(r=function(e){return setTimeout(e,16)}),r((function(){var r=n.$el.querySelectorAll(".el-table__row"),i=r[t],o=r[e];i&&Object(Ue["removeClass"])(i,"hover-row"),o&&Object(Ue["addClass"])(o,"hover-row")}))}}},data:function(){return{tooltipContent:""}},created:function(){this.activateTooltip=B()(50,(function(e){return e.handleShowPopper()}))},methods:{getKeyOfRow:function(e,t){var n=this.table.rowKey;return n?Kr(e,n):t},isColumnHidden:function(e){return!0===this.fixed||"left"===this.fixed?e>=this.leftFixedLeafCount:"right"===this.fixed?e<this.columnsCount-this.rightFixedLeafCount:e<this.leftFixedLeafCount||e>=this.columnsCount-this.rightFixedLeafCount},getSpan:function(e,t,n,r){var i=1,o=1,s=this.table.spanMethod;if("function"===typeof s){var a=s({row:e,column:t,rowIndex:n,columnIndex:r});Array.isArray(a)?(i=a[0],o=a[1]):"object"===("undefined"===typeof a?"undefined":Si(a))&&(i=a.rowspan,o=a.colspan)}return{rowspan:i,colspan:o}},getRowStyle:function(e,t){var n=this.table.rowStyle;return"function"===typeof n?n.call(null,{row:e,rowIndex:t}):n||null},getRowClass:function(e,t){var n=["el-table__row"];this.table.highlightCurrentRow&&e===this.store.states.currentRow&&n.push("current-row"),this.stripe&&t%2===1&&n.push("el-table__row--striped");var r=this.table.rowClassName;return"string"===typeof r?n.push(r):"function"===typeof r&&n.push(r.call(null,{row:e,rowIndex:t})),this.store.states.expandRows.indexOf(e)>-1&&n.push("expanded"),n},getCellStyle:function(e,t,n,r){var i=this.table.cellStyle;return"function"===typeof i?i.call(null,{rowIndex:e,columnIndex:t,row:n,column:r}):i},getCellClass:function(e,t,n,r){var i=[r.id,r.align,r.className];this.isColumnHidden(t)&&i.push("is-hidden");var o=this.table.cellClassName;return"string"===typeof o?i.push(o):"function"===typeof o&&i.push(o.call(null,{rowIndex:e,columnIndex:t,row:n,column:r})),i.push("el-table__cell"),i.join(" ")},getColspanRealWidth:function(e,t,n){if(t<1)return e[n].realWidth;var r=e.map((function(e){var t=e.realWidth;return t})).slice(n,n+t);return r.reduce((function(e,t){return e+t}),-1)},handleCellMouseEnter:function(e,t){var n=this.table,r=Qr(e);if(r){var i=$r(n,r),o=n.hoverState={cell:r,column:i,row:t};n.$emit("cell-mouse-enter",o.row,o.column,o.cell,e)}var s=e.target.querySelector(".cell");if(Object(Ue["hasClass"])(s,"el-tooltip")&&s.childNodes.length){var a=document.createRange();a.setStart(s,0),a.setEnd(s,s.childNodes.length);var c=a.getBoundingClientRect().width,l=(parseInt(Object(Ue["getStyle"])(s,"paddingLeft"),10)||0)+(parseInt(Object(Ue["getStyle"])(s,"paddingRight"),10)||0);if((c+l>s.offsetWidth||s.scrollWidth>s.offsetWidth)&&this.$refs.tooltip){var u=this.$refs.tooltip;this.tooltipContent=r.innerText||r.textContent,u.referenceElm=r,u.$refs.popper&&(u.$refs.popper.style.display="none"),u.doDestroy(),u.setExpectedState(!0),this.activateTooltip(u)}}},handleCellMouseLeave:function(e){var t=this.$refs.tooltip;t&&(t.setExpectedState(!1),t.handleClosePopper());var n=Qr(e);if(n){var r=this.table.hoverState||{};this.table.$emit("cell-mouse-leave",r.row,r.column,r.cell,e)}},handleMouseEnter:B()(30,(function(e){this.store.commit("setHoverRow",e)})),handleMouseLeave:B()(30,(function(){this.store.commit("setHoverRow",null)})),handleContextMenu:function(e,t){this.handleEvent(e,t,"contextmenu")},handleDoubleClick:function(e,t){this.handleEvent(e,t,"dblclick")},handleClick:function(e,t){this.store.commit("setCurrentRow",t),this.handleEvent(e,t,"click")},handleEvent:function(e,t,n){var r=this.table,i=Qr(e),o=void 0;i&&(o=$r(r,i),o&&r.$emit("cell-"+n,t,o,i,e)),r.$emit("row-"+n,t,o,e)},rowRender:function(e,t,n){var r=this,i=this.$createElement,o=this.treeIndent,s=this.columns,a=this.firstDefaultColumnIndex,c=s.map((function(e,t){return r.isColumnHidden(t)})),l=this.getRowClass(e,t),u=!0;n&&(l.push("el-table__row--level-"+n.level),u=n.display);var d=u?null:{display:"none"};return i("tr",{style:[d,this.getRowStyle(e,t)],class:l,key:this.getKeyOfRow(e,t),on:{dblclick:function(t){return r.handleDoubleClick(t,e)},click:function(t){return r.handleClick(t,e)},contextmenu:function(t){return r.handleContextMenu(t,e)},mouseenter:function(e){return r.handleMouseEnter(t)},mouseleave:this.handleMouseLeave}},[s.map((function(l,u){var d=r.getSpan(e,l,t,u),h=d.rowspan,p=d.colspan;if(!h||!p)return null;var f=bi({},l);f.realWidth=r.getColspanRealWidth(s,p,u);var g={store:r.store,_self:r.context||r.table.$vnode.context,column:f,row:e,$index:t};return u===a&&n&&(g.treeNode={indent:n.level*o,level:n.level},"boolean"===typeof n.expanded&&(g.treeNode.expanded=n.expanded,"loading"in n&&(g.treeNode.loading=n.loading),"noLazyChildren"in n&&(g.treeNode.noLazyChildren=n.noLazyChildren))),i("td",{style:r.getCellStyle(t,u,e,l),class:r.getCellClass(t,u,e,l),attrs:{rowspan:h,colspan:p},on:{mouseenter:function(t){return r.handleCellMouseEnter(t,e)},mouseleave:r.handleCellMouseLeave}},[l.renderCell.call(r._renderProxy,r.$createElement,g,c[u])])}))])},wrappedRowRender:function(e,t){var n=this,r=this.$createElement,i=this.store,o=i.isRowExpanded,s=i.assertRowKey,a=i.states,c=a.treeData,l=a.lazyTreeNodeMap,u=a.childrenColumnName,d=a.rowKey;if(this.hasExpandColumn&&o(e)){var h=this.table.renderExpanded,p=this.rowRender(e,t);return h?[[p,r("tr",{key:"expanded-row__"+p.key},[r("td",{attrs:{colspan:this.columnsCount},class:"el-table__cell el-table__expanded-cell"},[h(this.$createElement,{row:e,$index:t,store:this.store})])])]]:(console.error("[Element Error]renderExpanded is required."),p)}if(Object.keys(c).length){s();var f=Kr(e,d),g=c[f],m=null;g&&(m={expanded:g.expanded,level:g.level,display:!0},"boolean"===typeof g.lazy&&("boolean"===typeof g.loaded&&g.loaded&&(m.noLazyChildren=!(g.children&&g.children.length)),m.loading=g.loading));var _=[this.rowRender(e,t,m)];if(g){var v=0,E=function e(r,i){r&&r.length&&i&&r.forEach((function(r){var o={display:i.display&&i.expanded,level:i.level+1},s=Kr(r,d);if(void 0===s||null===s)throw new Error("for nested data item, row-key is required.");if(g=bi({},c[s]),g&&(o.expanded=g.expanded,g.level=g.level||o.level,g.display=!(!g.expanded||!o.display),"boolean"===typeof g.lazy&&("boolean"===typeof g.loaded&&g.loaded&&(o.noLazyChildren=!(g.children&&g.children.length)),o.loading=g.loading)),v++,_.push(n.rowRender(r,t+v,o)),g){var a=l[s]||r[u];e(a,g)}}))};g.display=!0;var A=l[f]||e[u];E(A,g)}return _}return this.rowRender(e,t)}}},Ti=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"}},[e.multiple?n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[n("div",{staticClass:"el-table-filter__content"},[n("el-scrollbar",{attrs:{"wrap-class":"el-table-filter__wrap"}},[n("el-checkbox-group",{staticClass:"el-table-filter__checkbox-group",model:{value:e.filteredValue,callback:function(t){e.filteredValue=t},expression:"filteredValue"}},e._l(e.filters,(function(t){return n("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)],1)],1),n("div",{staticClass:"el-table-filter__bottom"},[n("button",{class:{"is-disabled":0===e.filteredValue.length},attrs:{disabled:0===e.filteredValue.length},on:{click:e.handleConfirm}},[e._v(e._s(e.t("el.table.confirmFilter")))]),n("button",{on:{click:e.handleReset}},[e._v(e._s(e.t("el.table.resetFilter")))])])]):n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[n("ul",{staticClass:"el-table-filter__list"},[n("li",{staticClass:"el-table-filter__list-item",class:{"is-active":void 0===e.filterValue||null===e.filterValue},on:{click:function(t){e.handleSelect(null)}}},[e._v(e._s(e.t("el.table.clearFilter")))]),e._l(e.filters,(function(t){return n("li",{key:t.value,staticClass:"el-table-filter__list-item",class:{"is-active":e.isActive(t)},attrs:{label:t.value},on:{click:function(n){e.handleSelect(t.value)}}},[e._v(e._s(t.text))])}))],2)])])},Ii=[];Ti._withStripped=!0;var Ri=[];!Gr.a.prototype.$isServer&&document.addEventListener("click",(function(e){Ri.forEach((function(t){var n=e.target;t&&t.$el&&(n===t.$el||t.$el.contains(n)||t.handleOutsideClick&&t.handleOutsideClick(e))}))}));var wi={open:function(e){e&&Ri.push(e)},close:function(e){var t=Ri.indexOf(e);-1!==t&&Ri.splice(e,1)}},ki=n(31),Oi=n.n(ki),Ni={name:"ElTableFilterPanel",mixins:[H.a,_.a],directives:{Clickoutside:F.a},components:{ElCheckbox:Dr.a,ElCheckboxGroup:Oi.a,ElScrollbar:W.a},props:{placement:{type:String,default:"bottom-end"}},methods:{isActive:function(e){return e.value===this.filterValue},handleOutsideClick:function(){var e=this;setTimeout((function(){e.showPopper=!1}),16)},handleConfirm:function(){this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleReset:function(){this.filteredValue=[],this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleSelect:function(e){this.filterValue=e,"undefined"!==typeof e&&null!==e?this.confirmFilter(this.filteredValue):this.confirmFilter([]),this.handleOutsideClick()},confirmFilter:function(e){this.table.store.commit("filterChange",{column:this.column,values:e}),this.table.store.updateAllSelected()}},data:function(){return{table:null,cell:null,column:null}},computed:{filters:function(){return this.column&&this.column.filters},filterValue:{get:function(){return(this.column.filteredValue||[])[0]},set:function(e){this.filteredValue&&("undefined"!==typeof e&&null!==e?this.filteredValue.splice(0,1,e):this.filteredValue.splice(0,1))}},filteredValue:{get:function(){return this.column&&this.column.filteredValue||[]},set:function(e){this.column&&(this.column.filteredValue=e)}},multiple:function(){return!this.column||this.column.filterMultiple}},mounted:function(){var e=this;this.popperElm=this.$el,this.referenceElm=this.cell,this.table.bodyWrapper.addEventListener("scroll",(function(){e.updatePopper()})),this.$watch("showPopper",(function(t){e.column&&(e.column.filterOpened=t),t?wi.open(e):wi.close(e)}))},watch:{showPopper:function(e){!0===e&&parseInt(this.popperJS._popper.style.zIndex,10)<b["PopupManager"].zIndex&&(this.popperJS._popper.style.zIndex=b["PopupManager"].nextZIndex())}}},Li=Ni,Pi=a(Li,Ti,Ii,!1,null,null,null);Pi.options.__file="packages/table/src/filter-panel.vue";var Di=Pi.exports,Mi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xi=function e(t){var n=[];return t.forEach((function(t){t.children?(n.push(t),n.push.apply(n,e(t.children))):n.push(t)})),n},Bi=function(e){var t=1,n=function e(n,r){if(r&&(n.level=r.level+1,t<n.level&&(t=n.level)),n.children){var i=0;n.children.forEach((function(t){e(t,n),i+=t.colSpan})),n.colSpan=i}else n.colSpan=1};e.forEach((function(e){e.level=1,n(e)}));for(var r=[],i=0;i<t;i++)r.push([]);var o=xi(e);return o.forEach((function(e){e.children?e.rowSpan=1:e.rowSpan=t-e.level+1,r[e.level-1].push(e)})),r},Ui={name:"ElTableHeader",mixins:[yi],render:function(e){var t=this,n=this.store.states.originColumns,r=Bi(n,this.columns),i=r.length>1;return i&&(this.$parent.isGroup=!0),e("table",{class:"el-table__header",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(t){return e("col",{attrs:{name:t.id},key:t.id})})),this.hasGutter?e("col",{attrs:{name:"gutter"}}):""]),e("thead",{class:[{"is-group":i,"has-gutter":this.hasGutter}]},[this._l(r,(function(n,r){return e("tr",{style:t.getHeaderRowStyle(r),class:t.getHeaderRowClass(r)},[n.map((function(i,o){return e("th",{attrs:{colspan:i.colSpan,rowspan:i.rowSpan},on:{mousemove:function(e){return t.handleMouseMove(e,i)},mouseout:t.handleMouseOut,mousedown:function(e){return t.handleMouseDown(e,i)},click:function(e){return t.handleHeaderClick(e,i)},contextmenu:function(e){return t.handleHeaderContextMenu(e,i)}},style:t.getHeaderCellStyle(r,o,n,i),class:t.getHeaderCellClass(r,o,n,i),key:i.id},[e("div",{class:["cell",i.filteredValue&&i.filteredValue.length>0?"highlight":"",i.labelClassName]},[i.renderHeader?i.renderHeader.call(t._renderProxy,e,{column:i,$index:o,store:t.store,_self:t.$parent.$vnode.context}):i.label,i.sortable?e("span",{class:"caret-wrapper",on:{click:function(e){return t.handleSortClick(e,i)}}},[e("i",{class:"sort-caret ascending",on:{click:function(e){return t.handleSortClick(e,i,"ascending")}}}),e("i",{class:"sort-caret descending",on:{click:function(e){return t.handleSortClick(e,i,"descending")}}})]):"",i.filterable?e("span",{class:"el-table__column-filter-trigger",on:{click:function(e){return t.handleFilterClick(e,i)}}},[e("i",{class:["el-icon-arrow-down",i.filterOpened?"el-icon-arrow-up":""]})]):""])])})),t.hasGutter?e("th",{class:"el-table__cell gutter"}):""])}))])])},props:{fixed:String,store:{required:!0},border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},components:{ElCheckbox:Dr.a},computed:Mi({table:function(){return this.$parent},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},gi({columns:"columns",isAllSelected:"isAllSelected",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length}})),created:function(){this.filterPanels={}},mounted:function(){var e=this;this.$nextTick((function(){var t=e.defaultSort,n=t.prop,r=t.order,i=!0;e.store.commit("sort",{prop:n,order:r,init:i})}))},beforeDestroy:function(){var e=this.filterPanels;for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].$destroy(!0)},methods:{isCellHidden:function(e,t){for(var n=0,r=0;r<e;r++)n+=t[r].colSpan;var i=n+t[e].colSpan-1;return!0===this.fixed||"left"===this.fixed?i>=this.leftFixedLeafCount:"right"===this.fixed?n<this.columnsCount-this.rightFixedLeafCount:i<this.leftFixedLeafCount||n>=this.columnsCount-this.rightFixedLeafCount},getHeaderRowStyle:function(e){var t=this.table.headerRowStyle;return"function"===typeof t?t.call(null,{rowIndex:e}):t},getHeaderRowClass:function(e){var t=[],n=this.table.headerRowClassName;return"string"===typeof n?t.push(n):"function"===typeof n&&t.push(n.call(null,{rowIndex:e})),t.join(" ")},getHeaderCellStyle:function(e,t,n,r){var i=this.table.headerCellStyle;return"function"===typeof i?i.call(null,{rowIndex:e,columnIndex:t,row:n,column:r}):i},getHeaderCellClass:function(e,t,n,r){var i=[r.id,r.order,r.headerAlign,r.className,r.labelClassName];0===e&&this.isCellHidden(t,n)&&i.push("is-hidden"),r.children||i.push("is-leaf"),r.sortable&&i.push("is-sortable");var o=this.table.headerCellClassName;return"string"===typeof o?i.push(o):"function"===typeof o&&i.push(o.call(null,{rowIndex:e,columnIndex:t,row:n,column:r})),i.push("el-table__cell"),i.join(" ")},toggleAllSelection:function(e){e.stopPropagation(),this.store.commit("toggleAllSelection")},handleFilterClick:function(e,t){e.stopPropagation();var n=e.target,r="TH"===n.tagName?n:n.parentNode;if(!Object(Ue["hasClass"])(r,"noclick")){r=r.querySelector(".el-table__column-filter-trigger")||r;var i=this.$parent,o=this.filterPanels[t.id];o&&t.filterOpened?o.showPopper=!1:(o||(o=new Gr.a(Di),this.filterPanels[t.id]=o,t.filterPlacement&&(o.placement=t.filterPlacement),o.table=i,o.cell=r,o.column=t,!this.$isServer&&o.$mount(document.createElement("div"))),setTimeout((function(){o.showPopper=!0}),16))}},handleHeaderClick:function(e,t){!t.filters&&t.sortable?this.handleSortClick(e,t):t.filterable&&!t.sortable&&this.handleFilterClick(e,t),this.$parent.$emit("header-click",t,e)},handleHeaderContextMenu:function(e,t){this.$parent.$emit("header-contextmenu",t,e)},handleMouseDown:function(e,t){var n=this;if(!this.$isServer&&!(t.children&&t.children.length>0)&&this.draggingColumn&&this.border){this.dragging=!0,this.$parent.resizeProxyVisible=!0;var r=this.$parent,i=r.$el,o=i.getBoundingClientRect().left,s=this.$el.querySelector("th."+t.id),a=s.getBoundingClientRect(),c=a.left-o+30;Object(Ue["addClass"])(s,"noclick"),this.dragState={startMouseLeft:e.clientX,startLeft:a.right-o,startColumnLeft:a.left-o,tableLeft:o};var l=r.$refs.resizeProxy;l.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};var u=function(e){var t=e.clientX-n.dragState.startMouseLeft,r=n.dragState.startLeft+t;l.style.left=Math.max(c,r)+"px"},d=function i(){if(n.dragging){var o=n.dragState,a=o.startColumnLeft,c=o.startLeft,d=parseInt(l.style.left,10),h=d-a;t.width=t.realWidth=h,r.$emit("header-dragend",t.width,c-a,t,e),n.store.scheduleLayout(),document.body.style.cursor="",n.dragging=!1,n.draggingColumn=null,n.dragState={},r.resizeProxyVisible=!1}document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",i),document.onselectstart=null,document.ondragstart=null,setTimeout((function(){Object(Ue["removeClass"])(s,"noclick")}),0)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",d)}},handleMouseMove:function(e,t){if(!(t.children&&t.children.length>0)){var n=e.target;while(n&&"TH"!==n.tagName)n=n.parentNode;if(t&&t.resizable&&!this.dragging&&this.border){var r=n.getBoundingClientRect(),i=document.body.style;r.width>12&&r.right-e.pageX<8?(i.cursor="col-resize",Object(Ue["hasClass"])(n,"is-sortable")&&(n.style.cursor="col-resize"),this.draggingColumn=t):this.dragging||(i.cursor="",Object(Ue["hasClass"])(n,"is-sortable")&&(n.style.cursor="pointer"),this.draggingColumn=null)}}},handleMouseOut:function(){this.$isServer||(document.body.style.cursor="")},toggleOrder:function(e){var t=e.order,n=e.sortOrders;if(""===t)return n[0];var r=n.indexOf(t||null);return n[r>n.length-2?0:r+1]},handleSortClick:function(e,t,n){e.stopPropagation();var r=t.order===n?null:n||this.toggleOrder(t),i=e.target;while(i&&"TH"!==i.tagName)i=i.parentNode;if(i&&"TH"===i.tagName&&Object(Ue["hasClass"])(i,"noclick"))Object(Ue["removeClass"])(i,"noclick");else if(t.sortable){var o=this.store.states,s=o.sortProp,a=void 0,c=o.sortingColumn;(c!==t||c===t&&null===c.order)&&(c&&(c.order=null),o.sortingColumn=t,s=t.property),a=t.order=r||null,o.sortProp=s,o.sortOrder=a,this.store.commit("changeSortCondition")}}},data:function(){return{draggingColumn:null,dragging:!1,dragState:{}}}},Fi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vi={name:"ElTableFooter",mixins:[yi],render:function(e){var t=this,n=[];return this.summaryMethod?n=this.summaryMethod({columns:this.columns,data:this.store.states.data}):this.columns.forEach((function(e,r){if(0!==r){var i=t.store.states.data.map((function(t){return Number(t[e.property])})),o=[],s=!0;i.forEach((function(e){if(!isNaN(e)){s=!1;var t=(""+e).split(".")[1];o.push(t?t.length:0)}}));var a=Math.max.apply(null,o);n[r]=s?"":i.reduce((function(e,t){var n=Number(t);return isNaN(n)?e:parseFloat((e+t).toFixed(Math.min(a,20)))}),0)}else n[r]=t.sumText})),e("table",{class:"el-table__footer",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(t){return e("col",{attrs:{name:t.id},key:t.id})})),this.hasGutter?e("col",{attrs:{name:"gutter"}}):""]),e("tbody",{class:[{"has-gutter":this.hasGutter}]},[e("tr",[this.columns.map((function(r,i){return e("td",{key:i,attrs:{colspan:r.colSpan,rowspan:r.rowSpan},class:[].concat(t.getRowClasses(r,i),["el-table__cell"])},[e("div",{class:["cell",r.labelClassName]},[n[i]])])})),this.hasGutter?e("th",{class:"el-table__cell gutter"}):""])])])},props:{fixed:String,store:{required:!0},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},computed:Fi({table:function(){return this.$parent},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},gi({columns:"columns",isAllSelected:"isAllSelected",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length}})),methods:{isCellHidden:function(e,t,n){if(!0===this.fixed||"left"===this.fixed)return e>=this.leftFixedLeafCount;if("right"===this.fixed){for(var r=0,i=0;i<e;i++)r+=t[i].colSpan;return r<this.columnsCount-this.rightFixedLeafCount}return!(this.fixed||!n.fixed)||(e<this.leftFixedCount||e>=this.columnsCount-this.rightFixedCount)},getRowClasses:function(e,t){var n=[e.id,e.align,e.labelClassName];return e.className&&n.push(e.className),this.isCellHidden(t,this.columns,e)&&n.push("is-hidden"),e.children||n.push("is-leaf"),n}}},ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gi=1,Hi={name:"ElTable",mixins:[_.a,I.a],directives:{Mousewheel:Vr},props:{data:{type:Array,default:function(){return[]}},size:String,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],context:{},showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:function(){return{hasChildren:"hasChildren",children:"children"}}},lazy:Boolean,load:Function},components:{TableHeader:Ui,TableFooter:Vi,TableBody:Ci,ElCheckbox:Dr.a},methods:{getMigratingConfig:function(){return{events:{expand:"expand is renamed to expand-change"}}},setCurrentRow:function(e){this.store.commit("setCurrentRow",e)},toggleRowSelection:function(e,t){this.store.toggleRowSelection(e,t,!1),this.store.updateAllSelected()},toggleRowExpansion:function(e,t){this.store.toggleRowExpansionAdapter(e,t)},clearSelection:function(){this.store.clearSelection()},clearFilter:function(e){this.store.clearFilter(e)},clearSort:function(){this.store.clearSort()},handleMouseLeave:function(){this.store.commit("setHoverRow",null),this.hoverState&&(this.hoverState=null)},updateScrollY:function(){var e=this.layout.updateScrollY();e&&(this.layout.notifyObservers("scrollable"),this.layout.updateColumnsWidth())},handleFixedMousewheel:function(e,t){var n=this.bodyWrapper;if(Math.abs(t.spinY)>0){var r=n.scrollTop;t.pixelY<0&&0!==r&&e.preventDefault(),t.pixelY>0&&n.scrollHeight-n.clientHeight>r&&e.preventDefault(),n.scrollTop+=Math.ceil(t.pixelY/5)}else n.scrollLeft+=Math.ceil(t.pixelX/5)},handleHeaderFooterMousewheel:function(e,t){var n=t.pixelX,r=t.pixelY;Math.abs(n)>=Math.abs(r)&&(this.bodyWrapper.scrollLeft+=t.pixelX/5)},syncPostion:Object(Mr["throttle"])(20,(function(){var e=this.bodyWrapper,t=e.scrollLeft,n=e.scrollTop,r=e.offsetWidth,i=e.scrollWidth,o=this.$refs,s=o.headerWrapper,a=o.footerWrapper,c=o.fixedBodyWrapper,l=o.rightFixedBodyWrapper;s&&(s.scrollLeft=t),a&&(a.scrollLeft=t),c&&(c.scrollTop=n),l&&(l.scrollTop=n);var u=i-r-1;this.scrollPosition=t>=u?"right":0===t?"left":"middle"})),bindEvents:function(){this.bodyWrapper.addEventListener("scroll",this.syncPostion,{passive:!0}),this.fit&&Object(er["addResizeListener"])(this.$el,this.resizeListener)},unbindEvents:function(){this.bodyWrapper.removeEventListener("scroll",this.syncPostion,{passive:!0}),this.fit&&Object(er["removeResizeListener"])(this.$el,this.resizeListener)},resizeListener:function(){if(this.$ready){var e=!1,t=this.$el,n=this.resizeState,r=n.width,i=n.height,o=t.offsetWidth;r!==o&&(e=!0);var s=t.offsetHeight;(this.height||this.shouldUpdateHeight)&&i!==s&&(e=!0),e&&(this.resizeState.width=o,this.resizeState.height=s,this.doLayout())}},doLayout:function(){this.shouldUpdateHeight&&this.layout.updateElsHeight(),this.layout.updateColumnsWidth()},sort:function(e,t){this.store.commit("sort",{prop:e,order:t})},toggleAllSelection:function(){this.store.commit("toggleAllSelection")}},computed:ji({tableSize:function(){return this.size||(this.$ELEMENT||{}).size},bodyWrapper:function(){return this.$refs.bodyWrapper},shouldUpdateHeight:function(){return this.height||this.maxHeight||this.fixedColumns.length>0||this.rightFixedColumns.length>0},bodyWidth:function(){var e=this.layout,t=e.bodyWidth,n=e.scrollY,r=e.gutterWidth;return t?t-(n?r:0)+"px":""},bodyHeight:function(){var e=this.layout,t=e.headerHeight,n=void 0===t?0:t,r=e.bodyHeight,i=e.footerHeight,o=void 0===i?0:i;if(this.height)return{height:r?r+"px":""};if(this.maxHeight){var s=ni(this.maxHeight);if("number"===typeof s)return{"max-height":s-o-(this.showHeader?n:0)+"px"}}return{}},fixedBodyHeight:function(){if(this.height)return{height:this.layout.fixedBodyHeight?this.layout.fixedBodyHeight+"px":""};if(this.maxHeight){var e=ni(this.maxHeight);if("number"===typeof e)return e=this.layout.scrollX?e-this.layout.gutterWidth:e,this.showHeader&&(e-=this.layout.headerHeight),e-=this.layout.footerHeight,{"max-height":e+"px"}}return{}},fixedHeight:function(){return this.maxHeight?this.showSummary?{bottom:0}:{bottom:this.layout.scrollX&&this.data.length?this.layout.gutterWidth+"px":""}:this.showSummary?{height:this.layout.tableHeight?this.layout.tableHeight+"px":""}:{height:this.layout.viewportHeight?this.layout.viewportHeight+"px":""}},emptyBlockStyle:function(){if(this.data&&this.data.length)return null;var e="100%";return this.layout.appendHeight&&(e="calc(100% - "+this.layout.appendHeight+"px)"),{width:this.bodyWidth,height:e}}},gi({selection:"selection",columns:"columns",tableData:"data",fixedColumns:"fixedColumns",rightFixedColumns:"rightFixedColumns"})),watch:{height:{immediate:!0,handler:function(e){this.layout.setHeight(e)}},maxHeight:{immediate:!0,handler:function(e){this.layout.setMaxHeight(e)}},currentRowKey:{immediate:!0,handler:function(e){this.rowKey&&this.store.setCurrentRowKey(e)}},data:{immediate:!0,handler:function(e){this.store.commit("setData",e)}},expandRowKeys:{immediate:!0,handler:function(e){e&&this.store.setExpandRowKeysAdapter(e)}}},created:function(){var e=this;this.tableId="el-table_"+Gi++,this.debouncedUpdateLayout=Object(Mr["debounce"])(50,(function(){return e.doLayout()}))},mounted:function(){var e=this;this.bindEvents(),this.store.updateColumns(),this.doLayout(),this.resizeState={width:this.$el.offsetWidth,height:this.$el.offsetHeight},this.store.states.columns.forEach((function(t){t.filteredValue&&t.filteredValue.length&&e.store.commit("filterChange",{column:t,values:t.filteredValue,silent:!0})})),this.$ready=!0},destroyed:function(){this.unbindEvents()},data:function(){var e=this.treeProps,t=e.hasChildren,n=void 0===t?"hasChildren":t,r=e.children,i=void 0===r?"children":r;this.store=fi(this,{rowKey:this.rowKey,defaultExpandAll:this.defaultExpandAll,selectOnIndeterminate:this.selectOnIndeterminate,indent:this.indent,lazy:this.lazy,lazyColumnIdentifier:n,childrenColumnName:i});var o=new Ai({store:this.store,table:this,fit:this.fit,showHeader:this.showHeader});return{layout:o,isHidden:!1,renderExpanded:null,resizeProxyVisible:!1,resizeState:{width:null,height:null},isGroup:!1,scrollPosition:"left"}}},Qi=Hi,Wi=a(Qi,Nr,Lr,!1,null,null,null);Wi.options.__file="packages/table/src/table.vue";var qi=Wi.exports;qi.install=function(e){e.component(qi.name,qi)};var zi=qi,Zi={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:"",className:"el-table-column--selection"},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},$i={selection:{renderHeader:function(e,t){var n=t.store;return e("el-checkbox",{attrs:{disabled:n.states.data&&0===n.states.data.length,indeterminate:n.states.selection.length>0&&!this.isAllSelected,value:this.isAllSelected},nativeOn:{click:this.toggleAllSelection}})},renderCell:function(e,t){var n=t.row,r=t.column,i=t.store,o=t.$index;return e("el-checkbox",{nativeOn:{click:function(e){return e.stopPropagation()}},attrs:{value:i.isSelected(n),disabled:!!r.selectable&&!r.selectable.call(null,n,o)},on:{input:function(){i.commit("rowSelectedChanged",n)}}})},sortable:!1,resizable:!1},index:{renderHeader:function(e,t){var n=t.column;return n.label||"#"},renderCell:function(e,t){var n=t.$index,r=t.column,i=n+1,o=r.index;return"number"===typeof o?i=n+o:"function"===typeof o&&(i=o(n)),e("div",[i])},sortable:!1},expand:{renderHeader:function(e,t){var n=t.column;return n.label||""},renderCell:function(e,t){var n=t.row,r=t.store,i=["el-table__expand-icon"];r.states.expandRows.indexOf(n)>-1&&i.push("el-table__expand-icon--expanded");var o=function(e){e.stopPropagation(),r.toggleRowExpansion(n)};return e("div",{class:i,on:{click:o}},[e("i",{class:"el-icon el-icon-arrow-right"})])},sortable:!1,resizable:!1,className:"el-table__expand-column"}};function Ki(e,t){var n=t.row,r=t.column,i=t.$index,o=r.property,s=o&&Object(v["getPropByPath"])(n,o).v;return r&&r.formatter?r.formatter(n,r,s,i):s}function Yi(e,t){var n=t.row,r=t.treeNode,i=t.store;if(!r)return null;var o=[],s=function(e){e.stopPropagation(),i.loadOrToggle(n)};if(r.indent&&o.push(e("span",{class:"el-table__indent",style:{"padding-left":r.indent+"px"}})),"boolean"!==typeof r.expanded||r.noLazyChildren)o.push(e("span",{class:"el-table__placeholder"}));else{var a=["el-table__expand-icon",r.expanded?"el-table__expand-icon--expanded":""],c=["el-icon-arrow-right"];r.loading&&(c=["el-icon-loading"]),o.push(e("div",{class:a,on:{click:s}},[e("i",{class:c})]))}return o}var Ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xi=1,eo={name:"ElTableColumn",props:{type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{},minWidth:{},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:function(){return["ascending","descending",null]},validator:function(e){return e.every((function(e){return["ascending","descending",null].indexOf(e)>-1}))}}},data:function(){return{isSubColumn:!1,columns:[]}},computed:{owner:function(){var e=this.$parent;while(e&&!e.tableId)e=e.$parent;return e},columnOrTableParent:function(){var e=this.$parent;while(e&&!e.tableId&&!e.columnId)e=e.$parent;return e},realWidth:function(){return ei(this.width)},realMinWidth:function(){return ti(this.minWidth)},realAlign:function(){return this.align?"is-"+this.align:null},realHeaderAlign:function(){return this.headerAlign?"is-"+this.headerAlign:this.realAlign}},methods:{getPropsData:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(t,n){return Array.isArray(n)&&n.forEach((function(n){t[n]=e[n]})),t}),{})},getColumnElIndex:function(e,t){return[].indexOf.call(e,t)},setColumnWidth:function(e){return this.realWidth&&(e.width=this.realWidth),this.realMinWidth&&(e.minWidth=this.realMinWidth),e.minWidth||(e.minWidth=80),e.realWidth=void 0===e.width?e.minWidth:e.width,e},setColumnForcedProps:function(e){var t=e.type,n=$i[t]||{};return Object.keys(n).forEach((function(t){var r=n[t];void 0!==r&&(e[t]="className"===t?e[t]+" "+r:r)})),e},setColumnRenders:function(e){var t=this;this.$createElement;this.renderHeader?console.warn("[Element Warn][TableColumn]Comparing to render-header, scoped-slot header is easier to use. We recommend users to use scoped-slot header."):"selection"!==e.type&&(e.renderHeader=function(n,r){var i=t.$scopedSlots.header;return i?i(r):e.label});var n=e.renderCell;return"expand"===e.type?(e.renderCell=function(e,t){return e("div",{class:"cell"},[n(e,t)])},this.owner.renderExpanded=function(e,n){return t.$scopedSlots.default?t.$scopedSlots.default(n):t.$slots.default}):(n=n||Ki,e.renderCell=function(r,i){var o=null;o=t.$scopedSlots.default?t.$scopedSlots.default(i):n(r,i);var s=Yi(r,i),a={class:"cell",style:{}};return e.showOverflowTooltip&&(a.class+=" el-tooltip",a.style={width:(i.column.realWidth||i.column.width)-1+"px"}),r("div",a,[s,o])}),e},registerNormalWatchers:function(){var e=this,t=["label","property","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],n={prop:"property",realAlign:"align",realHeaderAlign:"headerAlign",realWidth:"width"},r=t.reduce((function(e,t){return e[t]=t,e}),n);Object.keys(r).forEach((function(t){var r=n[t];e.$watch(t,(function(t){e.columnConfig[r]=t}))}))},registerComplexWatchers:function(){var e=this,t=["fixed"],n={realWidth:"width",realMinWidth:"minWidth"},r=t.reduce((function(e,t){return e[t]=t,e}),n);Object.keys(r).forEach((function(t){var r=n[t];e.$watch(t,(function(t){e.columnConfig[r]=t;var n="fixed"===r;e.owner.store.scheduleLayout(n)}))}))}},components:{ElCheckbox:Dr.a},beforeCreate:function(){this.row={},this.column={},this.$index=0,this.columnId=""},created:function(){var e=this.columnOrTableParent;this.isSubColumn=this.owner!==e,this.columnId=(e.tableId||e.columnId)+"_column_"+Xi++;var t=this.type||"default",n=""===this.sortable||this.sortable,r=Ji({},Zi[t],{id:this.columnId,type:t,property:this.prop||this.property,align:this.realAlign,headerAlign:this.realHeaderAlign,showOverflowTooltip:this.showOverflowTooltip||this.showTooltipWhenOverflow,filterable:this.filters||this.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,filterOpened:!1,sortable:n,index:this.index}),i=["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],o=["sortMethod","sortBy","sortOrders"],s=["selectable","reserveSelection"],a=["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"],c=this.getPropsData(i,o,s,a);c=Xr(r,c);var l=ri(this.setColumnRenders,this.setColumnWidth,this.setColumnForcedProps);c=l(c),this.columnConfig=c,this.registerNormalWatchers(),this.registerComplexWatchers()},mounted:function(){var e=this.owner,t=this.columnOrTableParent,n=this.isSubColumn?t.$el.children:t.$refs.hiddenColumns.children,r=this.getColumnElIndex(n,this.$el);e.store.commit("insertColumn",this.columnConfig,r,this.isSubColumn?t.columnConfig:null)},destroyed:function(){if(this.$parent){var e=this.$parent;this.owner.store.commit("removeColumn",this.columnConfig,this.isSubColumn?e.columnConfig:null)}},render:function(e){return e("div",this.$slots.default)},install:function(e){e.component(eo.name,eo)}},to=eo,no=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.ranged?n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],ref:"reference",staticClass:"el-date-editor el-range-editor el-input__inner",class:["el-date-editor--"+e.type,e.pickerSize?"el-range-editor--"+e.pickerSize:"",e.pickerDisabled?"is-disabled":"",e.pickerVisible?"is-active":""],on:{click:e.handleRangeClick,mouseenter:e.handleMouseEnter,mouseleave:function(t){e.showClose=!1},keydown:e.handleKeydown}},[n("i",{class:["el-input__icon","el-range__icon",e.triggerClass]}),n("input",e._b({staticClass:"el-range-input",attrs:{autocomplete:"off",placeholder:e.startPlaceholder,disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,name:e.name&&e.name[0]},domProps:{value:e.displayValue&&e.displayValue[0]},on:{input:e.handleStartInput,change:e.handleStartChange,focus:e.handleFocus}},"input",e.firstInputId,!1)),e._t("range-separator",[n("span",{staticClass:"el-range-separator"},[e._v(e._s(e.rangeSeparator))])]),n("input",e._b({staticClass:"el-range-input",attrs:{autocomplete:"off",placeholder:e.endPlaceholder,disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,name:e.name&&e.name[1]},domProps:{value:e.displayValue&&e.displayValue[1]},on:{input:e.handleEndInput,change:e.handleEndChange,focus:e.handleFocus}},"input",e.secondInputId,!1)),e.haveTrigger?n("i",{staticClass:"el-input__icon el-range__close-icon",class:[e.showClose?""+e.clearIcon:""],on:{click:e.handleClickIcon}}):e._e()],2):n("el-input",e._b({directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],ref:"reference",staticClass:"el-date-editor",class:"el-date-editor--"+e.type,attrs:{readonly:!e.editable||e.readonly||"dates"===e.type||"week"===e.type,disabled:e.pickerDisabled,size:e.pickerSize,name:e.name,placeholder:e.placeholder,value:e.displayValue,validateEvent:!1},on:{focus:e.handleFocus,input:function(t){return e.userInput=t},change:e.handleChange},nativeOn:{keydown:function(t){return e.handleKeydown(t)},mouseenter:function(t){return e.handleMouseEnter(t)},mouseleave:function(t){e.showClose=!1}}},"el-input",e.firstInputId,!1),[n("i",{staticClass:"el-input__icon",class:e.triggerClass,attrs:{slot:"prefix"},on:{click:e.handleFocus},slot:"prefix"}),e.haveTrigger?n("i",{staticClass:"el-input__icon",class:[e.showClose?""+e.clearIcon:""],attrs:{slot:"suffix"},on:{click:e.handleClickIcon},slot:"suffix"}):e._e()])},ro=[];no._withStripped=!0;var io=n(0),oo={props:{appendToBody:H.a.props.appendToBody,offset:H.a.props.offset,boundariesPadding:H.a.props.boundariesPadding,arrowOffset:H.a.props.arrowOffset},methods:H.a.methods,data:function(){return Tt()({visibleArrow:!0},H.a.data)},beforeDestroy:H.a.beforeDestroy},so={date:"yyyy-MM-dd",month:"yyyy-MM",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss",week:"yyyywWW",timerange:"HH:mm:ss",daterange:"yyyy-MM-dd",monthrange:"yyyy-MM",datetimerange:"yyyy-MM-dd HH:mm:ss",year:"yyyy"},ao=["date","datetime","time","time-select","week","month","year","daterange","monthrange","timerange","datetimerange","dates"],co=function(e,t){return"timestamp"===t?e.getTime():Object(io["formatDate"])(e,t)},lo=function(e,t){return"timestamp"===t?new Date(Number(e)):Object(io["parseDate"])(e,t)},uo=function(e,t){if(Array.isArray(e)&&2===e.length){var n=e[0],r=e[1];if(n&&r)return[co(n,t),co(r,t)]}return""},ho=function(e,t,n){if(Array.isArray(e)||(e=e.split(n)),2===e.length){var r=e[0],i=e[1];return[lo(r,t),lo(i,t)]}return[]},po={default:{formatter:function(e){return e?""+e:""},parser:function(e){return void 0===e||""===e?null:e}},week:{formatter:function(e,t){var n=Object(io["getWeekNumber"])(e),r=e.getMonth(),i=new Date(e);1===n&&11===r&&(i.setHours(0,0,0,0),i.setDate(i.getDate()+3-(i.getDay()+6)%7));var o=Object(io["formatDate"])(i,t);return o=/WW/.test(o)?o.replace(/WW/,n<10?"0"+n:n):o.replace(/W/,n),o},parser:function(e,t){return po.date.parser(e,t)}},date:{formatter:co,parser:lo},datetime:{formatter:co,parser:lo},daterange:{formatter:uo,parser:ho},monthrange:{formatter:uo,parser:ho},datetimerange:{formatter:uo,parser:ho},timerange:{formatter:uo,parser:ho},time:{formatter:co,parser:lo},month:{formatter:co,parser:lo},year:{formatter:co,parser:lo},number:{formatter:function(e){return e?""+e:""},parser:function(e){var t=Number(e);return isNaN(e)?null:t}},dates:{formatter:function(e,t){return e.map((function(e){return co(e,t)}))},parser:function(e,t){return("string"===typeof e?e.split(", "):e).map((function(e){return e instanceof Date?e:lo(e,t)}))}}},fo={left:"bottom-start",center:"bottom",right:"bottom-end"},go=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-";if(!e)return null;var i=(po[n]||po["default"]).parser,o=t||so[n];return i(e,o,r)},mo=function(e,t,n){if(!e)return null;var r=(po[n]||po["default"]).formatter,i=t||so[n];return r(e,i)},_o=function(e,t){var n=function(e,t){var n=e instanceof Date,r=t instanceof Date;return n&&r?e.getTime()===t.getTime():!n&&!r&&e===t},r=e instanceof Array,i=t instanceof Array;return r&&i?e.length===t.length&&e.every((function(e,r){return n(e,t[r])})):!r&&!i&&n(e,t)},vo=function(e){return"string"===typeof e||e instanceof String},Eo=function(e){return null===e||void 0===e||vo(e)||Array.isArray(e)&&2===e.length&&e.every(vo)},Ao={mixins:[w.a,oo],inject:{elForm:{default:""},elFormItem:{default:""}},props:{size:String,format:String,valueFormat:String,readonly:Boolean,placeholder:String,startPlaceholder:String,endPlaceholder:String,prefixIcon:String,clearIcon:{type:String,default:"el-icon-circle-close"},name:{default:"",validator:Eo},disabled:Boolean,clearable:{type:Boolean,default:!0},id:{default:"",validator:Eo},popperClass:String,editable:{type:Boolean,default:!0},align:{type:String,default:"left"},value:{},defaultValue:{},defaultTime:{},rangeSeparator:{default:"-"},pickerOptions:{},unlinkPanels:Boolean,validateEvent:{type:Boolean,default:!0}},components:{ElInput:g.a},directives:{Clickoutside:F.a},data:function(){return{pickerVisible:!1,showClose:!1,userInput:null,valueOnOpen:null,unwatchPickerOptions:null}},watch:{pickerVisible:function(e){this.readonly||this.pickerDisabled||(e?(this.showPicker(),this.valueOnOpen=Array.isArray(this.value)?[].concat(this.value):this.value):(this.hidePicker(),this.emitChange(this.value),this.userInput=null,this.validateEvent&&this.dispatch("ElFormItem","el.form.blur"),this.$emit("blur",this),this.blur()))},parsedValue:{immediate:!0,handler:function(e){this.picker&&(this.picker.value=e)}},defaultValue:function(e){this.picker&&(this.picker.defaultValue=e)},value:function(e,t){_o(e,t)||this.pickerVisible||!this.validateEvent||this.dispatch("ElFormItem","el.form.change",e)}},computed:{ranged:function(){return this.type.indexOf("range")>-1},reference:function(){var e=this.$refs.reference;return e.$el||e},refInput:function(){return this.reference?[].slice.call(this.reference.querySelectorAll("input")):[]},valueIsEmpty:function(){var e=this.value;if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(e[t])return!1}else if(e)return!1;return!0},triggerClass:function(){return this.prefixIcon||(-1!==this.type.indexOf("time")?"el-icon-time":"el-icon-date")},selectionMode:function(){return"week"===this.type?"week":"month"===this.type?"month":"year"===this.type?"year":"dates"===this.type?"dates":"day"},haveTrigger:function(){return"undefined"!==typeof this.showTrigger?this.showTrigger:-1!==ao.indexOf(this.type)},displayValue:function(){var e=mo(this.parsedValue,this.format,this.type,this.rangeSeparator);return Array.isArray(this.userInput)?[this.userInput[0]||e&&e[0]||"",this.userInput[1]||e&&e[1]||""]:null!==this.userInput?this.userInput:e?"dates"===this.type?e.join(", "):e:""},parsedValue:function(){if(!this.value)return this.value;if("time-select"===this.type)return this.value;var e=Object(io["isDateObject"])(this.value)||Array.isArray(this.value)&&this.value.every(io["isDateObject"]);return e?this.value:this.valueFormat?go(this.value,this.valueFormat,this.type,this.rangeSeparator)||this.value:Array.isArray(this.value)?this.value.map((function(e){return new Date(e)})):new Date(this.value)},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},pickerSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},pickerDisabled:function(){return this.disabled||(this.elForm||{}).disabled},firstInputId:function(){var e={},t=void 0;return t=this.ranged?this.id&&this.id[0]:this.id,t&&(e.id=t),e},secondInputId:function(){var e={},t=void 0;return this.ranged&&(t=this.id&&this.id[1]),t&&(e.id=t),e}},created:function(){this.popperOptions={boundariesPadding:0,gpuAcceleration:!1},this.placement=fo[this.align]||fo.left,this.$on("fieldReset",this.handleFieldReset)},methods:{focus:function(){this.ranged?this.handleFocus():this.$refs.reference.focus()},blur:function(){this.refInput.forEach((function(e){return e.blur()}))},parseValue:function(e){var t=Object(io["isDateObject"])(e)||Array.isArray(e)&&e.every(io["isDateObject"]);return this.valueFormat&&!t&&go(e,this.valueFormat,this.type,this.rangeSeparator)||e},formatToValue:function(e){var t=Object(io["isDateObject"])(e)||Array.isArray(e)&&e.every(io["isDateObject"]);return this.valueFormat&&t?mo(e,this.valueFormat,this.type,this.rangeSeparator):e},parseString:function(e){var t=Array.isArray(e)?this.type:this.type.replace("range","");return go(e,this.format,t)},formatToString:function(e){var t=Array.isArray(e)?this.type:this.type.replace("range","");return mo(e,this.format,t)},handleMouseEnter:function(){this.readonly||this.pickerDisabled||!this.valueIsEmpty&&this.clearable&&(this.showClose=!0)},handleChange:function(){if(this.userInput){var e=this.parseString(this.displayValue);e&&(this.picker.value=e,this.isValidValue(e)&&(this.emitInput(e),this.userInput=null))}""===this.userInput&&(this.emitInput(null),this.emitChange(null),this.userInput=null)},handleStartInput:function(e){this.userInput?this.userInput=[e.target.value,this.userInput[1]]:this.userInput=[e.target.value,null]},handleEndInput:function(e){this.userInput?this.userInput=[this.userInput[0],e.target.value]:this.userInput=[null,e.target.value]},handleStartChange:function(e){var t=this.parseString(this.userInput&&this.userInput[0]);if(t){this.userInput=[this.formatToString(t),this.displayValue[1]];var n=[t,this.picker.value&&this.picker.value[1]];this.picker.value=n,this.isValidValue(n)&&(this.emitInput(n),this.userInput=null)}},handleEndChange:function(e){var t=this.parseString(this.userInput&&this.userInput[1]);if(t){this.userInput=[this.displayValue[0],this.formatToString(t)];var n=[this.picker.value&&this.picker.value[0],t];this.picker.value=n,this.isValidValue(n)&&(this.emitInput(n),this.userInput=null)}},handleClickIcon:function(e){this.readonly||this.pickerDisabled||(this.showClose?(this.valueOnOpen=this.value,e.stopPropagation(),this.emitInput(null),this.emitChange(null),this.showClose=!1,this.picker&&"function"===typeof this.picker.handleClear&&this.picker.handleClear()):this.pickerVisible=!this.pickerVisible)},handleClose:function(){if(this.pickerVisible&&(this.pickerVisible=!1,"dates"===this.type)){var e=go(this.valueOnOpen,this.valueFormat,this.type,this.rangeSeparator)||this.valueOnOpen;this.emitInput(e)}},handleFieldReset:function(e){this.userInput=""===e?null:e},handleFocus:function(){var e=this.type;-1===ao.indexOf(e)||this.pickerVisible||(this.pickerVisible=!0),this.$emit("focus",this)},handleKeydown:function(e){var t=this,n=e.keyCode;return 27===n?(this.pickerVisible=!1,void e.stopPropagation()):9!==n?13===n?((""===this.userInput||this.isValidValue(this.parseString(this.displayValue)))&&(this.handleChange(),this.pickerVisible=this.picker.visible=!1,this.blur()),void e.stopPropagation()):void(this.userInput?e.stopPropagation():this.picker&&this.picker.handleKeydown&&this.picker.handleKeydown(e)):void(this.ranged?setTimeout((function(){-1===t.refInput.indexOf(document.activeElement)&&(t.pickerVisible=!1,t.blur(),e.stopPropagation())}),0):(this.handleChange(),this.pickerVisible=this.picker.visible=!1,this.blur(),e.stopPropagation()))},handleRangeClick:function(){var e=this.type;-1===ao.indexOf(e)||this.pickerVisible||(this.pickerVisible=!0),this.$emit("focus",this)},hidePicker:function(){this.picker&&(this.picker.resetView&&this.picker.resetView(),this.pickerVisible=this.picker.visible=!1,this.destroyPopper())},showPicker:function(){var e=this;this.$isServer||(this.picker||this.mountPicker(),this.pickerVisible=this.picker.visible=!0,this.updatePopper(),this.picker.value=this.parsedValue,this.picker.resetView&&this.picker.resetView(),this.$nextTick((function(){e.picker.adjustSpinners&&e.picker.adjustSpinners()})))},mountPicker:function(){var e=this;this.picker=new Gr.a(this.panel).$mount(),this.picker.defaultValue=this.defaultValue,this.picker.defaultTime=this.defaultTime,this.picker.popperClass=this.popperClass,this.popperElm=this.picker.$el,this.picker.width=this.reference.getBoundingClientRect().width,this.picker.showTime="datetime"===this.type||"datetimerange"===this.type,this.picker.selectionMode=this.selectionMode,this.picker.unlinkPanels=this.unlinkPanels,this.picker.arrowControl=this.arrowControl||this.timeArrowControl||!1,this.$watch("format",(function(t){e.picker.format=t}));var t=function(){var t=e.pickerOptions;if(t&&t.selectableRange){var n=t.selectableRange,r=po.datetimerange.parser,i=so.timerange;n=Array.isArray(n)?n:[n],e.picker.selectableRange=n.map((function(t){return r(t,i,e.rangeSeparator)}))}for(var o in t)t.hasOwnProperty(o)&&"selectableRange"!==o&&(e.picker[o]=t[o]);e.format&&(e.picker.format=e.format)};t(),this.unwatchPickerOptions=this.$watch("pickerOptions",(function(){return t()}),{deep:!0}),this.$el.appendChild(this.picker.$el),this.picker.resetView&&this.picker.resetView(),this.picker.$on("dodestroy",this.doDestroy),this.picker.$on("pick",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.userInput=null,e.pickerVisible=e.picker.visible=n,e.emitInput(t),e.picker.resetView&&e.picker.resetView()})),this.picker.$on("select-range",(function(t,n,r){0!==e.refInput.length&&(r&&"min"!==r?"max"===r&&(e.refInput[1].setSelectionRange(t,n),e.refInput[1].focus()):(e.refInput[0].setSelectionRange(t,n),e.refInput[0].focus()))}))},unmountPicker:function(){this.picker&&(this.picker.$destroy(),this.picker.$off(),"function"===typeof this.unwatchPickerOptions&&this.unwatchPickerOptions(),this.picker.$el.parentNode.removeChild(this.picker.$el))},emitChange:function(e){_o(e,this.valueOnOpen)||(this.$emit("change",e),this.valueOnOpen=e,this.validateEvent&&this.dispatch("ElFormItem","el.form.change",e))},emitInput:function(e){var t=this.formatToValue(e);_o(this.value,t)||this.$emit("input",t)},isValidValue:function(e){return this.picker||this.mountPicker(),!this.picker.isValidValue||e&&this.picker.isValidValue(e)}}},yo=Ao,So=a(yo,no,ro,!1,null,null,null);So.options.__file="packages/date-picker/src/picker.vue";var bo=So.exports,Co=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-enter":e.handleEnter,"after-leave":e.handleLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts,"has-time":e.showTime},e.popperClass]},[n("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?n("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(t,r){return n("button",{key:r,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(n){e.handleShortcutClick(t)}}},[e._v(e._s(t.text))])})),0):e._e(),n("div",{staticClass:"el-picker-panel__body"},[e.showTime?n("div",{staticClass:"el-date-picker__time-header"},[n("span",{staticClass:"el-date-picker__editor-wrap"},[n("el-input",{attrs:{placeholder:e.t("el.datepicker.selectDate"),value:e.visibleDate,size:"small"},on:{input:function(t){return e.userInputDate=t},change:e.handleVisibleDateChange}})],1),n("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleTimePickClose,expression:"handleTimePickClose"}],staticClass:"el-date-picker__editor-wrap"},[n("el-input",{ref:"input",attrs:{placeholder:e.t("el.datepicker.selectTime"),value:e.visibleTime,size:"small"},on:{focus:function(t){e.timePickerVisible=!0},input:function(t){return e.userInputTime=t},change:e.handleVisibleTimeChange}}),n("time-picker",{ref:"timepicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.timePickerVisible},on:{pick:e.handleTimePick,mounted:e.proxyTimePickerDataProperties}})],1)]):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:"time"!==e.currentView,expression:"currentView !== 'time'"}],staticClass:"el-date-picker__header",class:{"el-date-picker__header--bordered":"year"===e.currentView||"month"===e.currentView}},[n("button",{staticClass:"el-picker-panel__icon-btn el-date-picker__prev-btn el-icon-d-arrow-left",attrs:{type:"button","aria-label":e.t("el.datepicker.prevYear")},on:{click:e.prevYear}}),n("button",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-picker-panel__icon-btn el-date-picker__prev-btn el-icon-arrow-left",attrs:{type:"button","aria-label":e.t("el.datepicker.prevMonth")},on:{click:e.prevMonth}}),n("span",{staticClass:"el-date-picker__header-label",attrs:{role:"button"},on:{click:e.showYearPicker}},[e._v(e._s(e.yearLabel))]),n("span",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-date-picker__header-label",class:{active:"month"===e.currentView},attrs:{role:"button"},on:{click:e.showMonthPicker}},[e._v(e._s(e.t("el.datepicker.month"+(e.month+1))))]),n("button",{staticClass:"el-picker-panel__icon-btn el-date-picker__next-btn el-icon-d-arrow-right",attrs:{type:"button","aria-label":e.t("el.datepicker.nextYear")},on:{click:e.nextYear}}),n("button",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-picker-panel__icon-btn el-date-picker__next-btn el-icon-arrow-right",attrs:{type:"button","aria-label":e.t("el.datepicker.nextMonth")},on:{click:e.nextMonth}})]),n("div",{staticClass:"el-picker-panel__content"},[n("date-table",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],attrs:{"selection-mode":e.selectionMode,"first-day-of-week":e.firstDayOfWeek,value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"cell-class-name":e.cellClassName,"disabled-date":e.disabledDate},on:{pick:e.handleDatePick}}),n("year-table",{directives:[{name:"show",rawName:"v-show",value:"year"===e.currentView,expression:"currentView === 'year'"}],attrs:{value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"disabled-date":e.disabledDate},on:{pick:e.handleYearPick}}),n("month-table",{directives:[{name:"show",rawName:"v-show",value:"month"===e.currentView,expression:"currentView === 'month'"}],attrs:{value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"disabled-date":e.disabledDate},on:{pick:e.handleMonthPick}})],1)])],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.footerVisible&&"date"===e.currentView,expression:"footerVisible && currentView === 'date'"}],staticClass:"el-picker-panel__footer"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:"dates"!==e.selectionMode,expression:"selectionMode !== 'dates'"}],staticClass:"el-picker-panel__link-btn",attrs:{size:"mini",type:"text"},on:{click:e.changeToNow}},[e._v("\n        "+e._s(e.t("el.datepicker.now"))+"\n      ")]),n("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{plain:"",size:"mini"},on:{click:e.confirm}},[e._v("\n        "+e._s(e.t("el.datepicker.confirm"))+"\n      ")])],1)])])},To=[];Co._withStripped=!0;var Io=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-time-panel el-popper",class:e.popperClass},[n("div",{staticClass:"el-time-panel__content",class:{"has-seconds":e.showSeconds}},[n("time-spinner",{ref:"spinner",attrs:{"arrow-control":e.useArrow,"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,date:e.date},on:{change:e.handleChange,"select-range":e.setSelectionRange}})],1),n("div",{staticClass:"el-time-panel__footer"},[n("button",{staticClass:"el-time-panel__btn cancel",attrs:{type:"button"},on:{click:e.handleCancel}},[e._v(e._s(e.t("el.datepicker.cancel")))]),n("button",{staticClass:"el-time-panel__btn",class:{confirm:!e.disabled},attrs:{type:"button"},on:{click:function(t){e.handleConfirm()}}},[e._v(e._s(e.t("el.datepicker.confirm")))])])])])},Ro=[];Io._withStripped=!0;var wo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-time-spinner",class:{"has-seconds":e.showSeconds}},[e.arrowControl?e._e():[n("el-scrollbar",{ref:"hours",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(t){e.emitSelectRange("hours")},mousemove:function(t){e.adjustCurrentSpinner("hours")}}},e._l(e.hoursList,(function(t,r){return n("li",{key:r,staticClass:"el-time-spinner__item",class:{active:r===e.hours,disabled:t},on:{click:function(n){e.handleClick("hours",{value:r,disabled:t})}}},[e._v(e._s(("0"+(e.amPmMode?r%12||12:r)).slice(-2))+e._s(e.amPm(r)))])})),0),n("el-scrollbar",{ref:"minutes",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(t){e.emitSelectRange("minutes")},mousemove:function(t){e.adjustCurrentSpinner("minutes")}}},e._l(e.minutesList,(function(t,r){return n("li",{key:r,staticClass:"el-time-spinner__item",class:{active:r===e.minutes,disabled:!t},on:{click:function(t){e.handleClick("minutes",{value:r,disabled:!1})}}},[e._v(e._s(("0"+r).slice(-2)))])})),0),n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.showSeconds,expression:"showSeconds"}],ref:"seconds",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(t){e.emitSelectRange("seconds")},mousemove:function(t){e.adjustCurrentSpinner("seconds")}}},e._l(60,(function(t,r){return n("li",{key:r,staticClass:"el-time-spinner__item",class:{active:r===e.seconds},on:{click:function(t){e.handleClick("seconds",{value:r,disabled:!1})}}},[e._v(e._s(("0"+r).slice(-2)))])})),0)],e.arrowControl?[n("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(t){e.emitSelectRange("hours")}}},[n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),n("ul",{ref:"hours",staticClass:"el-time-spinner__list"},e._l(e.arrowHourList,(function(t,r){return n("li",{key:r,staticClass:"el-time-spinner__item",class:{active:t===e.hours,disabled:e.hoursList[t]}},[e._v(e._s(void 0===t?"":("0"+(e.amPmMode?t%12||12:t)).slice(-2)+e.amPm(t)))])})),0)]),n("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(t){e.emitSelectRange("minutes")}}},[n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),n("ul",{ref:"minutes",staticClass:"el-time-spinner__list"},e._l(e.arrowMinuteList,(function(t,r){return n("li",{key:r,staticClass:"el-time-spinner__item",class:{active:t===e.minutes}},[e._v("\n          "+e._s(void 0===t?"":("0"+t).slice(-2))+"\n        ")])})),0)]),e.showSeconds?n("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(t){e.emitSelectRange("seconds")}}},[n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),n("ul",{ref:"seconds",staticClass:"el-time-spinner__list"},e._l(e.arrowSecondList,(function(t,r){return n("li",{key:r,staticClass:"el-time-spinner__item",class:{active:t===e.seconds}},[e._v("\n          "+e._s(void 0===t?"":("0"+t).slice(-2))+"\n        ")])})),0)]):e._e()]:e._e()],2)},ko=[];wo._withStripped=!0;var Oo={components:{ElScrollbar:W.a},directives:{repeatClick:Dt},props:{date:{},defaultValue:{},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:String,default:""}},computed:{hours:function(){return this.date.getHours()},minutes:function(){return this.date.getMinutes()},seconds:function(){return this.date.getSeconds()},hoursList:function(){return Object(io["getRangeHours"])(this.selectableRange)},minutesList:function(){return Object(io["getRangeMinutes"])(this.selectableRange,this.hours)},arrowHourList:function(){var e=this.hours;return[e>0?e-1:void 0,e,e<23?e+1:void 0]},arrowMinuteList:function(){var e=this.minutes;return[e>0?e-1:void 0,e,e<59?e+1:void 0]},arrowSecondList:function(){var e=this.seconds;return[e>0?e-1:void 0,e,e<59?e+1:void 0]}},data:function(){return{selectableRange:[],currentScrollbar:null}},mounted:function(){var e=this;this.$nextTick((function(){!e.arrowControl&&e.bindScrollEvent()}))},methods:{increase:function(){this.scrollDown(1)},decrease:function(){this.scrollDown(-1)},modifyDateField:function(e,t){switch(e){case"hours":this.$emit("change",Object(io["modifyTime"])(this.date,t,this.minutes,this.seconds));break;case"minutes":this.$emit("change",Object(io["modifyTime"])(this.date,this.hours,t,this.seconds));break;case"seconds":this.$emit("change",Object(io["modifyTime"])(this.date,this.hours,this.minutes,t));break}},handleClick:function(e,t){var n=t.value,r=t.disabled;r||(this.modifyDateField(e,n),this.emitSelectRange(e),this.adjustSpinner(e,n))},emitSelectRange:function(e){"hours"===e?this.$emit("select-range",0,2):"minutes"===e?this.$emit("select-range",3,5):"seconds"===e&&this.$emit("select-range",6,8),this.currentScrollbar=e},bindScrollEvent:function(){var e=this,t=function(t){e.$refs[t].wrap.onscroll=function(n){e.handleScroll(t,n)}};t("hours"),t("minutes"),t("seconds")},handleScroll:function(e){var t=Math.min(Math.round((this.$refs[e].wrap.scrollTop-(.5*this.scrollBarHeight(e)-10)/this.typeItemHeight(e)+3)/this.typeItemHeight(e)),"hours"===e?23:59);this.modifyDateField(e,t)},adjustSpinners:function(){this.adjustSpinner("hours",this.hours),this.adjustSpinner("minutes",this.minutes),this.adjustSpinner("seconds",this.seconds)},adjustCurrentSpinner:function(e){this.adjustSpinner(e,this[e])},adjustSpinner:function(e,t){if(!this.arrowControl){var n=this.$refs[e].wrap;n&&(n.scrollTop=Math.max(0,t*this.typeItemHeight(e)))}},scrollDown:function(e){var t=this;this.currentScrollbar||this.emitSelectRange("hours");var n=this.currentScrollbar,r=this.hoursList,i=this[n];if("hours"===this.currentScrollbar){var o=Math.abs(e);e=e>0?1:-1;var s=r.length;while(s--&&o)i=(i+e+r.length)%r.length,r[i]||o--;if(r[i])return}else i=(i+e+60)%60;this.modifyDateField(n,i),this.adjustSpinner(n,i),this.$nextTick((function(){return t.emitSelectRange(t.currentScrollbar)}))},amPm:function(e){var t="a"===this.amPmMode.toLowerCase();if(!t)return"";var n="A"===this.amPmMode,r=e<12?" am":" pm";return n&&(r=r.toUpperCase()),r},typeItemHeight:function(e){return this.$refs[e].$el.querySelector("li").offsetHeight},scrollBarHeight:function(e){return this.$refs[e].$el.offsetHeight}}},No=Oo,Lo=a(No,wo,ko,!1,null,null,null);Lo.options.__file="packages/date-picker/src/basic/time-spinner.vue";var Po=Lo.exports,Do={mixins:[_.a],components:{TimeSpinner:Po},props:{visible:Boolean,timeArrowControl:Boolean},watch:{visible:function(e){var t=this;e?(this.oldValue=this.value,this.$nextTick((function(){return t.$refs.spinner.emitSelectRange("hours")}))):this.needInitAdjust=!0},value:function(e){var t=this,n=void 0;e instanceof Date?n=Object(io["limitTimeRange"])(e,this.selectableRange,this.format):e||(n=this.defaultValue?new Date(this.defaultValue):new Date),this.date=n,this.visible&&this.needInitAdjust&&(this.$nextTick((function(e){return t.adjustSpinners()})),this.needInitAdjust=!1)},selectableRange:function(e){this.$refs.spinner.selectableRange=e},defaultValue:function(e){Object(io["isDate"])(this.value)||(this.date=e?new Date(e):new Date)}},data:function(){return{popperClass:"",format:"HH:mm:ss",value:"",defaultValue:null,date:new Date,oldValue:new Date,selectableRange:[],selectionRange:[0,2],disabled:!1,arrowControl:!1,needInitAdjust:!0}},computed:{showSeconds:function(){return-1!==(this.format||"").indexOf("ss")},useArrow:function(){return this.arrowControl||this.timeArrowControl||!1},amPmMode:function(){return-1!==(this.format||"").indexOf("A")?"A":-1!==(this.format||"").indexOf("a")?"a":""}},methods:{handleCancel:function(){this.$emit("pick",this.oldValue,!1)},handleChange:function(e){this.visible&&(this.date=Object(io["clearMilliseconds"])(e),this.isValidValue(this.date)&&this.$emit("pick",this.date,!0))},setSelectionRange:function(e,t){this.$emit("select-range",e,t),this.selectionRange=[e,t]},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];if(!t){var n=Object(io["clearMilliseconds"])(Object(io["limitTimeRange"])(this.date,this.selectableRange,this.format));this.$emit("pick",n,e,t)}},handleKeydown:function(e){var t=e.keyCode,n={38:-1,40:1,37:-1,39:1};if(37===t||39===t){var r=n[t];return this.changeSelectionRange(r),void e.preventDefault()}if(38===t||40===t){var i=n[t];return this.$refs.spinner.scrollDown(i),void e.preventDefault()}},isValidValue:function(e){return Object(io["timeWithinRange"])(e,this.selectableRange,this.format)},adjustSpinners:function(){return this.$refs.spinner.adjustSpinners()},changeSelectionRange:function(e){var t=[0,3].concat(this.showSeconds?[6]:[]),n=["hours","minutes"].concat(this.showSeconds?["seconds"]:[]),r=t.indexOf(this.selectionRange[0]),i=(r+e+t.length)%t.length;this.$refs.spinner.emitSelectRange(n[i])}},mounted:function(){var e=this;this.$nextTick((function(){return e.handleConfirm(!0,!0)})),this.$emit("mounted")}},Mo=Do,xo=a(Mo,Io,Ro,!1,null,null,null);xo.options.__file="packages/date-picker/src/panel/time.vue";var Bo=xo.exports,Uo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"el-year-table",on:{click:e.handleYearTableClick}},[n("tbody",[n("tr",[n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+0)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+1)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+1))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+2)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+2))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+3)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+3))])])]),n("tr",[n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+4)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+4))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+5)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+5))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+6)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+6))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+7)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+7))])])]),n("tr",[n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+8)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+8))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+9)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+9))])]),n("td"),n("td")])])])},Fo=[];Uo._withStripped=!0;var Vo=function(e){var t=Object(io["getDayCountOfYear"])(e),n=new Date(e,0,1);return Object(io["range"])(t).map((function(e){return Object(io["nextDate"])(n,e)}))},jo={props:{disabledDate:{},value:{},defaultValue:{validator:function(e){return null===e||e instanceof Date&&Object(io["isDate"])(e)}},date:{}},computed:{startYear:function(){return 10*Math.floor(this.date.getFullYear()/10)}},methods:{getCellStyle:function(e){var t={},n=new Date;return t.disabled="function"===typeof this.disabledDate&&Vo(e).every(this.disabledDate),t.current=Object(v["arrayFindIndex"])(Object(v["coerceTruthyValueToArray"])(this.value),(function(t){return t.getFullYear()===e}))>=0,t.today=n.getFullYear()===e,t.default=this.defaultValue&&this.defaultValue.getFullYear()===e,t},handleYearTableClick:function(e){var t=e.target;if("A"===t.tagName){if(Object(Ue["hasClass"])(t.parentNode,"disabled"))return;var n=t.textContent||t.innerText;this.$emit("pick",Number(n))}}}},Go=jo,Ho=a(Go,Uo,Fo,!1,null,null,null);Ho.options.__file="packages/date-picker/src/basic/year-table.vue";var Qo=Ho.exports,Wo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"el-month-table",on:{click:e.handleMonthTableClick,mousemove:e.handleMouseMove}},[n("tbody",e._l(e.rows,(function(t,r){return n("tr",{key:r},e._l(t,(function(t,r){return n("td",{key:r,class:e.getCellStyle(t)},[n("div",[n("a",{staticClass:"cell"},[e._v(e._s(e.t("el.datepicker.months."+e.months[t.text])))])])])})),0)})),0)])},qo=[];Wo._withStripped=!0;var zo=function(e,t){var n=Object(io["getDayCountOfMonth"])(e,t),r=new Date(e,t,1);return Object(io["range"])(n).map((function(e){return Object(io["nextDate"])(r,e)}))},Zo=function(e){return new Date(e.getFullYear(),e.getMonth())},$o=function(e){return"number"===typeof e||"string"===typeof e?Zo(new Date(e)).getTime():e instanceof Date?Zo(e).getTime():NaN},Ko={props:{disabledDate:{},value:{},selectionMode:{default:"month"},minDate:{},maxDate:{},defaultValue:{validator:function(e){return null===e||Object(io["isDate"])(e)||Array.isArray(e)&&e.every(io["isDate"])}},date:{},rangeState:{default:function(){return{endDate:null,selecting:!1}}}},mixins:[_.a],watch:{"rangeState.endDate":function(e){this.markRange(this.minDate,e)},minDate:function(e,t){$o(e)!==$o(t)&&this.markRange(this.minDate,this.maxDate)},maxDate:function(e,t){$o(e)!==$o(t)&&this.markRange(this.minDate,this.maxDate)}},data:function(){return{months:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],tableRows:[[],[],[]],lastRow:null,lastColumn:null}},methods:{cellMatchesDate:function(e,t){var n=new Date(t);return this.date.getFullYear()===n.getFullYear()&&Number(e.text)===n.getMonth()},getCellStyle:function(e){var t=this,n={},r=this.date.getFullYear(),i=new Date,o=e.text,s=this.defaultValue?Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue]:[];return n.disabled="function"===typeof this.disabledDate&&zo(r,o).every(this.disabledDate),n.current=Object(v["arrayFindIndex"])(Object(v["coerceTruthyValueToArray"])(this.value),(function(e){return e.getFullYear()===r&&e.getMonth()===o}))>=0,n.today=i.getFullYear()===r&&i.getMonth()===o,n.default=s.some((function(n){return t.cellMatchesDate(e,n)})),e.inRange&&(n["in-range"]=!0,e.start&&(n["start-date"]=!0),e.end&&(n["end-date"]=!0)),n},getMonthOfCell:function(e){var t=this.date.getFullYear();return new Date(t,e,1)},markRange:function(e,t){e=$o(e),t=$o(t)||e;var n=[Math.min(e,t),Math.max(e,t)];e=n[0],t=n[1];for(var r=this.rows,i=0,o=r.length;i<o;i++)for(var s=r[i],a=0,c=s.length;a<c;a++){var l=s[a],u=4*i+a,d=new Date(this.date.getFullYear(),u).getTime();l.inRange=e&&d>=e&&d<=t,l.start=e&&d===e,l.end=t&&d===t}},handleMouseMove:function(e){if(this.rangeState.selecting){var t=e.target;if("A"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName){var n=t.parentNode.rowIndex,r=t.cellIndex;this.rows[n][r].disabled||n===this.lastRow&&r===this.lastColumn||(this.lastRow=n,this.lastColumn=r,this.$emit("changerange",{minDate:this.minDate,maxDate:this.maxDate,rangeState:{selecting:!0,endDate:this.getMonthOfCell(4*n+r)}}))}}},handleMonthTableClick:function(e){var t=e.target;if("A"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName&&!Object(Ue["hasClass"])(t,"disabled")){var n=t.cellIndex,r=t.parentNode.rowIndex,i=4*r+n,o=this.getMonthOfCell(i);"range"===this.selectionMode?this.rangeState.selecting?(o>=this.minDate?this.$emit("pick",{minDate:this.minDate,maxDate:o}):this.$emit("pick",{minDate:o,maxDate:this.minDate}),this.rangeState.selecting=!1):(this.$emit("pick",{minDate:o,maxDate:null}),this.rangeState.selecting=!0):this.$emit("pick",i)}}},computed:{rows:function(){for(var e=this,t=this.tableRows,n=this.disabledDate,r=[],i=$o(new Date),o=0;o<3;o++)for(var s=t[o],a=function(t){var a=s[t];a||(a={row:o,column:t,type:"normal",inRange:!1,start:!1,end:!1}),a.type="normal";var c=4*o+t,l=new Date(e.date.getFullYear(),c).getTime();a.inRange=l>=$o(e.minDate)&&l<=$o(e.maxDate),a.start=e.minDate&&l===$o(e.minDate),a.end=e.maxDate&&l===$o(e.maxDate);var u=l===i;u&&(a.type="today"),a.text=c;var d=new Date(l);a.disabled="function"===typeof n&&n(d),a.selected=Object(v["arrayFind"])(r,(function(e){return e.getTime()===d.getTime()})),e.$set(s,t,a)},c=0;c<4;c++)a(c);return t}}},Yo=Ko,Jo=a(Yo,Wo,qo,!1,null,null,null);Jo.options.__file="packages/date-picker/src/basic/month-table.vue";var Xo=Jo.exports,es=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"el-date-table",class:{"is-week-mode":"week"===e.selectionMode},attrs:{cellspacing:"0",cellpadding:"0"},on:{click:e.handleClick,mousemove:e.handleMouseMove}},[n("tbody",[n("tr",[e.showWeekNumber?n("th",[e._v(e._s(e.t("el.datepicker.week")))]):e._e(),e._l(e.WEEKS,(function(t,r){return n("th",{key:r},[e._v(e._s(e.t("el.datepicker.weeks."+t)))])}))],2),e._l(e.rows,(function(t,r){return n("tr",{key:r,staticClass:"el-date-table__row",class:{current:e.isWeekActive(t[1])}},e._l(t,(function(t,r){return n("td",{key:r,class:e.getCellClasses(t)},[n("div",[n("span",[e._v("\n          "+e._s(t.text)+"\n        ")])])])})),0)}))],2)])},ts=[];es._withStripped=!0;var ns=["sun","mon","tue","wed","thu","fri","sat"],rs=function(e){return"number"===typeof e||"string"===typeof e?Object(io["clearTime"])(new Date(e)).getTime():e instanceof Date?Object(io["clearTime"])(e).getTime():NaN},is=function(e,t){var n="function"===typeof t?Object(v["arrayFindIndex"])(e,t):e.indexOf(t);return n>=0?[].concat(e.slice(0,n),e.slice(n+1)):e},os={mixins:[_.a],props:{firstDayOfWeek:{default:7,type:Number,validator:function(e){return e>=1&&e<=7}},value:{},defaultValue:{validator:function(e){return null===e||Object(io["isDate"])(e)||Array.isArray(e)&&e.every(io["isDate"])}},date:{},selectionMode:{default:"day"},showWeekNumber:{type:Boolean,default:!1},disabledDate:{},cellClassName:{},minDate:{},maxDate:{},rangeState:{default:function(){return{endDate:null,selecting:!1}}}},computed:{offsetDay:function(){var e=this.firstDayOfWeek;return e>3?7-e:-e},WEEKS:function(){var e=this.firstDayOfWeek;return ns.concat(ns).slice(e,e+7)},year:function(){return this.date.getFullYear()},month:function(){return this.date.getMonth()},startDate:function(){return Object(io["getStartDateOfMonth"])(this.year,this.month)},rows:function(){var e=this,t=new Date(this.year,this.month,1),n=Object(io["getFirstDayOfMonth"])(t),r=Object(io["getDayCountOfMonth"])(t.getFullYear(),t.getMonth()),i=Object(io["getDayCountOfMonth"])(t.getFullYear(),0===t.getMonth()?11:t.getMonth()-1);n=0===n?7:n;for(var o=this.offsetDay,s=this.tableRows,a=1,c=this.startDate,l=this.disabledDate,u=this.cellClassName,d="dates"===this.selectionMode?Object(v["coerceTruthyValueToArray"])(this.value):[],h=rs(new Date),p=0;p<6;p++){var f=s[p];this.showWeekNumber&&(f[0]||(f[0]={type:"week",text:Object(io["getWeekNumber"])(Object(io["nextDate"])(c,7*p+1))}));for(var g=function(t){var s=f[e.showWeekNumber?t+1:t];s||(s={row:p,column:t,type:"normal",inRange:!1,start:!1,end:!1}),s.type="normal";var g=7*p+t,m=Object(io["nextDate"])(c,g-o).getTime();s.inRange=m>=rs(e.minDate)&&m<=rs(e.maxDate),s.start=e.minDate&&m===rs(e.minDate),s.end=e.maxDate&&m===rs(e.maxDate);var _=m===h;if(_&&(s.type="today"),p>=0&&p<=1){var E=n+o<0?7+n+o:n+o;t+7*p>=E?s.text=a++:(s.text=i-(E-t%7)+1+7*p,s.type="prev-month")}else a<=r?s.text=a++:(s.text=a++-r,s.type="next-month");var A=new Date(m);s.disabled="function"===typeof l&&l(A),s.selected=Object(v["arrayFind"])(d,(function(e){return e.getTime()===A.getTime()})),s.customClass="function"===typeof u&&u(A),e.$set(f,e.showWeekNumber?t+1:t,s)},m=0;m<7;m++)g(m);if("week"===this.selectionMode){var _=this.showWeekNumber?1:0,E=this.showWeekNumber?7:6,A=this.isWeekActive(f[_+1]);f[_].inRange=A,f[_].start=A,f[E].inRange=A,f[E].end=A}}return s}},watch:{"rangeState.endDate":function(e){this.markRange(this.minDate,e)},minDate:function(e,t){rs(e)!==rs(t)&&this.markRange(this.minDate,this.maxDate)},maxDate:function(e,t){rs(e)!==rs(t)&&this.markRange(this.minDate,this.maxDate)}},data:function(){return{tableRows:[[],[],[],[],[],[]],lastRow:null,lastColumn:null}},methods:{cellMatchesDate:function(e,t){var n=new Date(t);return this.year===n.getFullYear()&&this.month===n.getMonth()&&Number(e.text)===n.getDate()},getCellClasses:function(e){var t=this,n=this.selectionMode,r=this.defaultValue?Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue]:[],i=[];return"normal"!==e.type&&"today"!==e.type||e.disabled?i.push(e.type):(i.push("available"),"today"===e.type&&i.push("today")),"normal"===e.type&&r.some((function(n){return t.cellMatchesDate(e,n)}))&&i.push("default"),"day"!==n||"normal"!==e.type&&"today"!==e.type||!this.cellMatchesDate(e,this.value)||i.push("current"),!e.inRange||"normal"!==e.type&&"today"!==e.type&&"week"!==this.selectionMode||(i.push("in-range"),e.start&&i.push("start-date"),e.end&&i.push("end-date")),e.disabled&&i.push("disabled"),e.selected&&i.push("selected"),e.customClass&&i.push(e.customClass),i.join(" ")},getDateOfCell:function(e,t){var n=7*e+(t-(this.showWeekNumber?1:0))-this.offsetDay;return Object(io["nextDate"])(this.startDate,n)},isWeekActive:function(e){if("week"!==this.selectionMode)return!1;var t=new Date(this.year,this.month,1),n=t.getFullYear(),r=t.getMonth();if("prev-month"===e.type&&(t.setMonth(0===r?11:r-1),t.setFullYear(0===r?n-1:n)),"next-month"===e.type&&(t.setMonth(11===r?0:r+1),t.setFullYear(11===r?n+1:n)),t.setDate(parseInt(e.text,10)),Object(io["isDate"])(this.value)){var i=(this.value.getDay()-this.firstDayOfWeek+7)%7-1,o=Object(io["prevDate"])(this.value,i);return o.getTime()===t.getTime()}return!1},markRange:function(e,t){e=rs(e),t=rs(t)||e;var n=[Math.min(e,t),Math.max(e,t)];e=n[0],t=n[1];for(var r=this.startDate,i=this.rows,o=0,s=i.length;o<s;o++)for(var a=i[o],c=0,l=a.length;c<l;c++)if(!this.showWeekNumber||0!==c){var u=a[c],d=7*o+c+(this.showWeekNumber?-1:0),h=Object(io["nextDate"])(r,d-this.offsetDay).getTime();u.inRange=e&&h>=e&&h<=t,u.start=e&&h===e,u.end=t&&h===t}},handleMouseMove:function(e){if(this.rangeState.selecting){var t=e.target;if("SPAN"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName){var n=t.parentNode.rowIndex-1,r=t.cellIndex;this.rows[n][r].disabled||n===this.lastRow&&r===this.lastColumn||(this.lastRow=n,this.lastColumn=r,this.$emit("changerange",{minDate:this.minDate,maxDate:this.maxDate,rangeState:{selecting:!0,endDate:this.getDateOfCell(n,r)}}))}}},handleClick:function(e){var t=e.target;if("SPAN"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName){var n=t.parentNode.rowIndex-1,r="week"===this.selectionMode?1:t.cellIndex,i=this.rows[n][r];if(!i.disabled&&"week"!==i.type){var o=this.getDateOfCell(n,r);if("range"===this.selectionMode)this.rangeState.selecting?(o>=this.minDate?this.$emit("pick",{minDate:this.minDate,maxDate:o}):this.$emit("pick",{minDate:o,maxDate:this.minDate}),this.rangeState.selecting=!1):(this.$emit("pick",{minDate:o,maxDate:null}),this.rangeState.selecting=!0);else if("day"===this.selectionMode)this.$emit("pick",o);else if("week"===this.selectionMode){var s=Object(io["getWeekNumber"])(o),a=o.getFullYear()+"w"+s;this.$emit("pick",{year:o.getFullYear(),week:s,value:a,date:o})}else if("dates"===this.selectionMode){var c=this.value||[],l=i.selected?is(c,(function(e){return e.getTime()===o.getTime()})):[].concat(c,[o]);this.$emit("pick",l)}}}}}},ss=os,as=a(ss,es,ts,!1,null,null,null);as.options.__file="packages/date-picker/src/basic/date-table.vue";var cs=as.exports,ls={mixins:[_.a],directives:{Clickoutside:F.a},watch:{showTime:function(e){var t=this;e&&this.$nextTick((function(e){var n=t.$refs.input.$el;n&&(t.pickerWidth=n.getBoundingClientRect().width+10)}))},value:function(e){"dates"===this.selectionMode&&this.value||(Object(io["isDate"])(e)?this.date=new Date(e):this.date=this.getDefaultValue())},defaultValue:function(e){Object(io["isDate"])(this.value)||(this.date=e?new Date(e):new Date)},timePickerVisible:function(e){var t=this;e&&this.$nextTick((function(){return t.$refs.timepicker.adjustSpinners()}))},selectionMode:function(e){"month"===e?"year"===this.currentView&&"month"===this.currentView||(this.currentView="month"):"dates"===e&&(this.currentView="date")}},methods:{proxyTimePickerDataProperties:function(){var e=this,t=function(t){e.$refs.timepicker.format=t},n=function(t){e.$refs.timepicker.value=t},r=function(t){e.$refs.timepicker.date=t},i=function(t){e.$refs.timepicker.selectableRange=t};this.$watch("value",n),this.$watch("date",r),this.$watch("selectableRange",i),t(this.timeFormat),n(this.value),r(this.date),i(this.selectableRange)},handleClear:function(){this.date=this.getDefaultValue(),this.$emit("pick",null)},emit:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e)if(Array.isArray(e)){var o=e.map((function(e){return t.showTime?Object(io["clearMilliseconds"])(e):Object(io["clearTime"])(e)}));this.$emit.apply(this,["pick",o].concat(r))}else this.$emit.apply(this,["pick",this.showTime?Object(io["clearMilliseconds"])(e):Object(io["clearTime"])(e)].concat(r));else this.$emit.apply(this,["pick",e].concat(r));this.userInputDate=null,this.userInputTime=null},showMonthPicker:function(){this.currentView="month"},showYearPicker:function(){this.currentView="year"},prevMonth:function(){this.date=Object(io["prevMonth"])(this.date)},nextMonth:function(){this.date=Object(io["nextMonth"])(this.date)},prevYear:function(){"year"===this.currentView?this.date=Object(io["prevYear"])(this.date,10):this.date=Object(io["prevYear"])(this.date)},nextYear:function(){"year"===this.currentView?this.date=Object(io["nextYear"])(this.date,10):this.date=Object(io["nextYear"])(this.date)},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},handleTimePick:function(e,t,n){if(Object(io["isDate"])(e)){var r=this.value?Object(io["modifyTime"])(this.value,e.getHours(),e.getMinutes(),e.getSeconds()):Object(io["modifyWithTimeString"])(this.getDefaultValue(),this.defaultTime);this.date=r,this.emit(this.date,!0)}else this.emit(e,!0);n||(this.timePickerVisible=t)},handleTimePickClose:function(){this.timePickerVisible=!1},handleMonthPick:function(e){"month"===this.selectionMode?(this.date=Object(io["modifyDate"])(this.date,this.year,e,1),this.emit(this.date)):(this.date=Object(io["changeYearMonthAndClampDate"])(this.date,this.year,e),this.currentView="date")},handleDatePick:function(e){if("day"===this.selectionMode){var t=this.value?Object(io["modifyDate"])(this.value,e.getFullYear(),e.getMonth(),e.getDate()):Object(io["modifyWithTimeString"])(e,this.defaultTime);this.checkDateWithinRange(t)||(t=Object(io["modifyDate"])(this.selectableRange[0][0],e.getFullYear(),e.getMonth(),e.getDate())),this.date=t,this.emit(this.date,this.showTime)}else"week"===this.selectionMode?this.emit(e.date):"dates"===this.selectionMode&&this.emit(e,!0)},handleYearPick:function(e){"year"===this.selectionMode?(this.date=Object(io["modifyDate"])(this.date,e,0,1),this.emit(this.date)):(this.date=Object(io["changeYearMonthAndClampDate"])(this.date,e,this.month),this.currentView="month")},changeToNow:function(){this.disabledDate&&this.disabledDate(new Date)||!this.checkDateWithinRange(new Date)||(this.date=new Date,this.emit(this.date))},confirm:function(){if("dates"===this.selectionMode)this.emit(this.value);else{var e=this.value?this.value:Object(io["modifyWithTimeString"])(this.getDefaultValue(),this.defaultTime);this.date=new Date(e),this.emit(e)}},resetView:function(){"month"===this.selectionMode?this.currentView="month":"year"===this.selectionMode?this.currentView="year":this.currentView="date"},handleEnter:function(){document.body.addEventListener("keydown",this.handleKeydown)},handleLeave:function(){this.$emit("dodestroy"),document.body.removeEventListener("keydown",this.handleKeydown)},handleKeydown:function(e){var t=e.keyCode,n=[38,40,37,39];this.visible&&!this.timePickerVisible&&(-1!==n.indexOf(t)&&(this.handleKeyControl(t),e.stopPropagation(),e.preventDefault()),13===t&&null===this.userInputDate&&null===this.userInputTime&&this.emit(this.date,!1))},handleKeyControl:function(e){var t={year:{38:-4,40:4,37:-1,39:1,offset:function(e,t){return e.setFullYear(e.getFullYear()+t)}},month:{38:-4,40:4,37:-1,39:1,offset:function(e,t){return e.setMonth(e.getMonth()+t)}},week:{38:-1,40:1,37:-1,39:1,offset:function(e,t){return e.setDate(e.getDate()+7*t)}},day:{38:-7,40:7,37:-1,39:1,offset:function(e,t){return e.setDate(e.getDate()+t)}}},n=this.selectionMode,r=31536e6,i=this.date.getTime(),o=new Date(this.date.getTime());while(Math.abs(i-o.getTime())<=r){var s=t[n];if(s.offset(o,s[e]),"function"!==typeof this.disabledDate||!this.disabledDate(o)){this.date=o,this.$emit("pick",o,!0);break}}},handleVisibleTimeChange:function(e){var t=Object(io["parseDate"])(e,this.timeFormat);t&&this.checkDateWithinRange(t)&&(this.date=Object(io["modifyDate"])(t,this.year,this.month,this.monthDate),this.userInputTime=null,this.$refs.timepicker.value=this.date,this.timePickerVisible=!1,this.emit(this.date,!0))},handleVisibleDateChange:function(e){var t=Object(io["parseDate"])(e,this.dateFormat);if(t){if("function"===typeof this.disabledDate&&this.disabledDate(t))return;this.date=Object(io["modifyTime"])(t,this.date.getHours(),this.date.getMinutes(),this.date.getSeconds()),this.userInputDate=null,this.resetView(),this.emit(this.date,!0)}},isValidValue:function(e){return e&&!isNaN(e)&&("function"!==typeof this.disabledDate||!this.disabledDate(e))&&this.checkDateWithinRange(e)},getDefaultValue:function(){return this.defaultValue?new Date(this.defaultValue):new Date},checkDateWithinRange:function(e){return!(this.selectableRange.length>0)||Object(io["timeWithinRange"])(e,this.selectableRange,this.format||"HH:mm:ss")}},components:{TimePicker:Bo,YearTable:Qo,MonthTable:Xo,DateTable:cs,ElInput:g.a,ElButton:se.a},data:function(){return{popperClass:"",date:new Date,value:"",defaultValue:null,defaultTime:null,showTime:!1,selectionMode:"day",shortcuts:"",visible:!1,currentView:"date",disabledDate:"",cellClassName:"",selectableRange:[],firstDayOfWeek:7,showWeekNumber:!1,timePickerVisible:!1,format:"",arrowControl:!1,userInputDate:null,userInputTime:null}},computed:{year:function(){return this.date.getFullYear()},month:function(){return this.date.getMonth()},week:function(){return Object(io["getWeekNumber"])(this.date)},monthDate:function(){return this.date.getDate()},footerVisible:function(){return this.showTime||"dates"===this.selectionMode},visibleTime:function(){return null!==this.userInputTime?this.userInputTime:Object(io["formatDate"])(this.value||this.defaultValue,this.timeFormat)},visibleDate:function(){return null!==this.userInputDate?this.userInputDate:Object(io["formatDate"])(this.value||this.defaultValue,this.dateFormat)},yearLabel:function(){var e=this.t("el.datepicker.year");if("year"===this.currentView){var t=10*Math.floor(this.year/10);return e?t+" "+e+" - "+(t+9)+" "+e:t+" - "+(t+9)}return this.year+" "+e},timeFormat:function(){return this.format?Object(io["extractTimeFormat"])(this.format):"HH:mm:ss"},dateFormat:function(){return this.format?Object(io["extractDateFormat"])(this.format):"yyyy-MM-dd"}}},us=ls,ds=a(us,Co,To,!1,null,null,null);ds.options.__file="packages/date-picker/src/panel/date.vue";var hs=ds.exports,ps=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-range-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts,"has-time":e.showTime},e.popperClass]},[n("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?n("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(t,r){return n("button",{key:r,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(n){e.handleShortcutClick(t)}}},[e._v(e._s(t.text))])})),0):e._e(),n("div",{staticClass:"el-picker-panel__body"},[e.showTime?n("div",{staticClass:"el-date-range-picker__time-header"},[n("span",{staticClass:"el-date-range-picker__editors-wrap"},[n("span",{staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{ref:"minInput",staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startDate"),value:e.minVisibleDate},on:{input:function(t){return e.handleDateInput(t,"min")},change:function(t){return e.handleDateChange(t,"min")}}})],1),n("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleMinTimeClose,expression:"handleMinTimeClose"}],staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startTime"),value:e.minVisibleTime},on:{focus:function(t){e.minTimePickerVisible=!0},input:function(t){return e.handleTimeInput(t,"min")},change:function(t){return e.handleTimeChange(t,"min")}}}),n("time-picker",{ref:"minTimePicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.minTimePickerVisible},on:{pick:e.handleMinTimePick,mounted:function(t){e.$refs.minTimePicker.format=e.timeFormat}}})],1)]),n("span",{staticClass:"el-icon-arrow-right"}),n("span",{staticClass:"el-date-range-picker__editors-wrap is-right"},[n("span",{staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endDate"),value:e.maxVisibleDate,readonly:!e.minDate},on:{input:function(t){return e.handleDateInput(t,"max")},change:function(t){return e.handleDateChange(t,"max")}}})],1),n("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleMaxTimeClose,expression:"handleMaxTimeClose"}],staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endTime"),value:e.maxVisibleTime,readonly:!e.minDate},on:{focus:function(t){e.minDate&&(e.maxTimePickerVisible=!0)},input:function(t){return e.handleTimeInput(t,"max")},change:function(t){return e.handleTimeChange(t,"max")}}}),n("time-picker",{ref:"maxTimePicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.maxTimePickerVisible},on:{pick:e.handleMaxTimePick,mounted:function(t){e.$refs.maxTimePicker.format=e.timeFormat}}})],1)])]):e._e(),n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-left"},[n("div",{staticClass:"el-date-range-picker__header"},[n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevYear}}),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevMonth}}),e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.leftNextYear}}):e._e(),e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-right",class:{"is-disabled":!e.enableMonthArrow},attrs:{type:"button",disabled:!e.enableMonthArrow},on:{click:e.leftNextMonth}}):e._e(),n("div",[e._v(e._s(e.leftLabel))])]),n("date-table",{attrs:{"selection-mode":"range",date:e.leftDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,"first-day-of-week":e.firstDayOfWeek},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1),n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-right"},[n("div",{staticClass:"el-date-range-picker__header"},[e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.rightPrevYear}}):e._e(),e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-left",class:{"is-disabled":!e.enableMonthArrow},attrs:{type:"button",disabled:!e.enableMonthArrow},on:{click:e.rightPrevMonth}}):e._e(),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",attrs:{type:"button"},on:{click:e.rightNextYear}}),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-right",attrs:{type:"button"},on:{click:e.rightNextMonth}}),n("div",[e._v(e._s(e.rightLabel))])]),n("date-table",{attrs:{"selection-mode":"range",date:e.rightDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,"first-day-of-week":e.firstDayOfWeek},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1)])],2),e.showTime?n("div",{staticClass:"el-picker-panel__footer"},[n("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{size:"mini",type:"text"},on:{click:e.handleClear}},[e._v("\n        "+e._s(e.t("el.datepicker.clear"))+"\n      ")]),n("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{plain:"",size:"mini",disabled:e.btnDisabled},on:{click:function(t){e.handleConfirm(!1)}}},[e._v("\n        "+e._s(e.t("el.datepicker.confirm"))+"\n      ")])],1):e._e()])])},fs=[];ps._withStripped=!0;var gs=function(e){return Array.isArray(e)?[new Date(e[0]),new Date(e[1])]:e?[new Date(e),Object(io["nextDate"])(new Date(e),1)]:[new Date,Object(io["nextDate"])(new Date,1)]},ms={mixins:[_.a],directives:{Clickoutside:F.a},computed:{btnDisabled:function(){return!(this.minDate&&this.maxDate&&!this.selecting&&this.isValidValue([this.minDate,this.maxDate]))},leftLabel:function(){return this.leftDate.getFullYear()+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+(this.leftDate.getMonth()+1))},rightLabel:function(){return this.rightDate.getFullYear()+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+(this.rightDate.getMonth()+1))},leftYear:function(){return this.leftDate.getFullYear()},leftMonth:function(){return this.leftDate.getMonth()},leftMonthDate:function(){return this.leftDate.getDate()},rightYear:function(){return this.rightDate.getFullYear()},rightMonth:function(){return this.rightDate.getMonth()},rightMonthDate:function(){return this.rightDate.getDate()},minVisibleDate:function(){return null!==this.dateUserInput.min?this.dateUserInput.min:this.minDate?Object(io["formatDate"])(this.minDate,this.dateFormat):""},maxVisibleDate:function(){return null!==this.dateUserInput.max?this.dateUserInput.max:this.maxDate||this.minDate?Object(io["formatDate"])(this.maxDate||this.minDate,this.dateFormat):""},minVisibleTime:function(){return null!==this.timeUserInput.min?this.timeUserInput.min:this.minDate?Object(io["formatDate"])(this.minDate,this.timeFormat):""},maxVisibleTime:function(){return null!==this.timeUserInput.max?this.timeUserInput.max:this.maxDate||this.minDate?Object(io["formatDate"])(this.maxDate||this.minDate,this.timeFormat):""},timeFormat:function(){return this.format?Object(io["extractTimeFormat"])(this.format):"HH:mm:ss"},dateFormat:function(){return this.format?Object(io["extractDateFormat"])(this.format):"yyyy-MM-dd"},enableMonthArrow:function(){var e=(this.leftMonth+1)%12,t=this.leftMonth+1>=12?1:0;return this.unlinkPanels&&new Date(this.leftYear+t,e)<new Date(this.rightYear,this.rightMonth)},enableYearArrow:function(){return this.unlinkPanels&&12*this.rightYear+this.rightMonth-(12*this.leftYear+this.leftMonth+1)>=12}},data:function(){return{popperClass:"",value:[],defaultValue:null,defaultTime:null,minDate:"",maxDate:"",leftDate:new Date,rightDate:Object(io["nextMonth"])(new Date),rangeState:{endDate:null,selecting:!1,row:null,column:null},showTime:!1,shortcuts:"",visible:"",disabledDate:"",cellClassName:"",firstDayOfWeek:7,minTimePickerVisible:!1,maxTimePickerVisible:!1,format:"",arrowControl:!1,unlinkPanels:!1,dateUserInput:{min:null,max:null},timeUserInput:{min:null,max:null}}},watch:{minDate:function(e){var t=this;this.dateUserInput.min=null,this.timeUserInput.min=null,this.$nextTick((function(){if(t.$refs.maxTimePicker&&t.maxDate&&t.maxDate<t.minDate){var e="HH:mm:ss";t.$refs.maxTimePicker.selectableRange=[[Object(io["parseDate"])(Object(io["formatDate"])(t.minDate,e),e),Object(io["parseDate"])("23:59:59",e)]]}})),e&&this.$refs.minTimePicker&&(this.$refs.minTimePicker.date=e,this.$refs.minTimePicker.value=e)},maxDate:function(e){this.dateUserInput.max=null,this.timeUserInput.max=null,e&&this.$refs.maxTimePicker&&(this.$refs.maxTimePicker.date=e,this.$refs.maxTimePicker.value=e)},minTimePickerVisible:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.minTimePicker.date=t.minDate,t.$refs.minTimePicker.value=t.minDate,t.$refs.minTimePicker.adjustSpinners()}))},maxTimePickerVisible:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.maxTimePicker.date=t.maxDate,t.$refs.maxTimePicker.value=t.maxDate,t.$refs.maxTimePicker.adjustSpinners()}))},value:function(e){if(e){if(Array.isArray(e))if(this.minDate=Object(io["isDate"])(e[0])?new Date(e[0]):null,this.maxDate=Object(io["isDate"])(e[1])?new Date(e[1]):null,this.minDate)if(this.leftDate=this.minDate,this.unlinkPanels&&this.maxDate){var t=this.minDate.getFullYear(),n=this.minDate.getMonth(),r=this.maxDate.getFullYear(),i=this.maxDate.getMonth();this.rightDate=t===r&&n===i?Object(io["nextMonth"])(this.maxDate):this.maxDate}else this.rightDate=Object(io["nextMonth"])(this.leftDate);else this.leftDate=gs(this.defaultValue)[0],this.rightDate=Object(io["nextMonth"])(this.leftDate)}else this.minDate=null,this.maxDate=null},defaultValue:function(e){if(!Array.isArray(this.value)){var t=gs(e),n=t[0],r=t[1];this.leftDate=n,this.rightDate=e&&e[1]&&this.unlinkPanels?r:Object(io["nextMonth"])(this.leftDate)}}},methods:{handleClear:function(){this.minDate=null,this.maxDate=null,this.leftDate=gs(this.defaultValue)[0],this.rightDate=Object(io["nextMonth"])(this.leftDate),this.$emit("pick",null)},handleChangeRange:function(e){this.minDate=e.minDate,this.maxDate=e.maxDate,this.rangeState=e.rangeState},handleDateInput:function(e,t){if(this.dateUserInput[t]=e,e.length===this.dateFormat.length){var n=Object(io["parseDate"])(e,this.dateFormat);if(n){if("function"===typeof this.disabledDate&&this.disabledDate(new Date(n)))return;"min"===t?(this.minDate=Object(io["modifyDate"])(this.minDate||new Date,n.getFullYear(),n.getMonth(),n.getDate()),this.leftDate=new Date(n),this.unlinkPanels||(this.rightDate=Object(io["nextMonth"])(this.leftDate))):(this.maxDate=Object(io["modifyDate"])(this.maxDate||new Date,n.getFullYear(),n.getMonth(),n.getDate()),this.rightDate=new Date(n),this.unlinkPanels||(this.leftDate=Object(io["prevMonth"])(n)))}}},handleDateChange:function(e,t){var n=Object(io["parseDate"])(e,this.dateFormat);n&&("min"===t?(this.minDate=Object(io["modifyDate"])(this.minDate,n.getFullYear(),n.getMonth(),n.getDate()),this.minDate>this.maxDate&&(this.maxDate=this.minDate)):(this.maxDate=Object(io["modifyDate"])(this.maxDate,n.getFullYear(),n.getMonth(),n.getDate()),this.maxDate<this.minDate&&(this.minDate=this.maxDate)))},handleTimeInput:function(e,t){var n=this;if(this.timeUserInput[t]=e,e.length===this.timeFormat.length){var r=Object(io["parseDate"])(e,this.timeFormat);r&&("min"===t?(this.minDate=Object(io["modifyTime"])(this.minDate,r.getHours(),r.getMinutes(),r.getSeconds()),this.$nextTick((function(e){return n.$refs.minTimePicker.adjustSpinners()}))):(this.maxDate=Object(io["modifyTime"])(this.maxDate,r.getHours(),r.getMinutes(),r.getSeconds()),this.$nextTick((function(e){return n.$refs.maxTimePicker.adjustSpinners()}))))}},handleTimeChange:function(e,t){var n=Object(io["parseDate"])(e,this.timeFormat);n&&("min"===t?(this.minDate=Object(io["modifyTime"])(this.minDate,n.getHours(),n.getMinutes(),n.getSeconds()),this.minDate>this.maxDate&&(this.maxDate=this.minDate),this.$refs.minTimePicker.value=this.minDate,this.minTimePickerVisible=!1):(this.maxDate=Object(io["modifyTime"])(this.maxDate,n.getHours(),n.getMinutes(),n.getSeconds()),this.maxDate<this.minDate&&(this.minDate=this.maxDate),this.$refs.maxTimePicker.value=this.minDate,this.maxTimePickerVisible=!1))},handleRangePick:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.defaultTime||[],i=Object(io["modifyWithTimeString"])(e.minDate,r[0]),o=Object(io["modifyWithTimeString"])(e.maxDate,r[1]);this.maxDate===o&&this.minDate===i||(this.onPick&&this.onPick(e),this.maxDate=o,this.minDate=i,setTimeout((function(){t.maxDate=o,t.minDate=i}),10),n&&!this.showTime&&this.handleConfirm())},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},handleMinTimePick:function(e,t,n){this.minDate=this.minDate||new Date,e&&(this.minDate=Object(io["modifyTime"])(this.minDate,e.getHours(),e.getMinutes(),e.getSeconds())),n||(this.minTimePickerVisible=t),(!this.maxDate||this.maxDate&&this.maxDate.getTime()<this.minDate.getTime())&&(this.maxDate=new Date(this.minDate))},handleMinTimeClose:function(){this.minTimePickerVisible=!1},handleMaxTimePick:function(e,t,n){this.maxDate&&e&&(this.maxDate=Object(io["modifyTime"])(this.maxDate,e.getHours(),e.getMinutes(),e.getSeconds())),n||(this.maxTimePickerVisible=t),this.maxDate&&this.minDate&&this.minDate.getTime()>this.maxDate.getTime()&&(this.minDate=new Date(this.maxDate))},handleMaxTimeClose:function(){this.maxTimePickerVisible=!1},leftPrevYear:function(){this.leftDate=Object(io["prevYear"])(this.leftDate),this.unlinkPanels||(this.rightDate=Object(io["nextMonth"])(this.leftDate))},leftPrevMonth:function(){this.leftDate=Object(io["prevMonth"])(this.leftDate),this.unlinkPanels||(this.rightDate=Object(io["nextMonth"])(this.leftDate))},rightNextYear:function(){this.unlinkPanels?this.rightDate=Object(io["nextYear"])(this.rightDate):(this.leftDate=Object(io["nextYear"])(this.leftDate),this.rightDate=Object(io["nextMonth"])(this.leftDate))},rightNextMonth:function(){this.unlinkPanels?this.rightDate=Object(io["nextMonth"])(this.rightDate):(this.leftDate=Object(io["nextMonth"])(this.leftDate),this.rightDate=Object(io["nextMonth"])(this.leftDate))},leftNextYear:function(){this.leftDate=Object(io["nextYear"])(this.leftDate)},leftNextMonth:function(){this.leftDate=Object(io["nextMonth"])(this.leftDate)},rightPrevYear:function(){this.rightDate=Object(io["prevYear"])(this.rightDate)},rightPrevMonth:function(){this.rightDate=Object(io["prevMonth"])(this.rightDate)},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isValidValue([this.minDate,this.maxDate])&&this.$emit("pick",[this.minDate,this.maxDate],e)},isValidValue:function(e){return Array.isArray(e)&&e&&e[0]&&e[1]&&Object(io["isDate"])(e[0])&&Object(io["isDate"])(e[1])&&e[0].getTime()<=e[1].getTime()&&("function"!==typeof this.disabledDate||!this.disabledDate(e[0])&&!this.disabledDate(e[1]))},resetView:function(){this.minDate&&null==this.maxDate&&(this.rangeState.selecting=!1),this.minDate=this.value&&Object(io["isDate"])(this.value[0])?new Date(this.value[0]):null,this.maxDate=this.value&&Object(io["isDate"])(this.value[0])?new Date(this.value[1]):null}},components:{TimePicker:Bo,DateTable:cs,ElInput:g.a,ElButton:se.a}},_s=ms,vs=a(_s,ps,fs,!1,null,null,null);vs.options.__file="packages/date-picker/src/panel/date-range.vue";var Es=vs.exports,As=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-range-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts},e.popperClass]},[n("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?n("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(t,r){return n("button",{key:r,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(n){e.handleShortcutClick(t)}}},[e._v(e._s(t.text))])})),0):e._e(),n("div",{staticClass:"el-picker-panel__body"},[n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-left"},[n("div",{staticClass:"el-date-range-picker__header"},[n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevYear}}),e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.leftNextYear}}):e._e(),n("div",[e._v(e._s(e.leftLabel))])]),n("month-table",{attrs:{"selection-mode":"range",date:e.leftDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1),n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-right"},[n("div",{staticClass:"el-date-range-picker__header"},[e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.rightPrevYear}}):e._e(),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",attrs:{type:"button"},on:{click:e.rightNextYear}}),n("div",[e._v(e._s(e.rightLabel))])]),n("month-table",{attrs:{"selection-mode":"range",date:e.rightDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1)])],2)])])},ys=[];As._withStripped=!0;var Ss=function(e){return Array.isArray(e)?[new Date(e[0]),new Date(e[1])]:e?[new Date(e),Object(io["nextMonth"])(new Date(e))]:[new Date,Object(io["nextMonth"])(new Date)]},bs={mixins:[_.a],directives:{Clickoutside:F.a},computed:{btnDisabled:function(){return!(this.minDate&&this.maxDate&&!this.selecting&&this.isValidValue([this.minDate,this.maxDate]))},leftLabel:function(){return this.leftDate.getFullYear()+" "+this.t("el.datepicker.year")},rightLabel:function(){return this.rightDate.getFullYear()+" "+this.t("el.datepicker.year")},leftYear:function(){return this.leftDate.getFullYear()},rightYear:function(){return this.rightDate.getFullYear()===this.leftDate.getFullYear()?this.leftDate.getFullYear()+1:this.rightDate.getFullYear()},enableYearArrow:function(){return this.unlinkPanels&&this.rightYear>this.leftYear+1}},data:function(){return{popperClass:"",value:[],defaultValue:null,defaultTime:null,minDate:"",maxDate:"",leftDate:new Date,rightDate:Object(io["nextYear"])(new Date),rangeState:{endDate:null,selecting:!1,row:null,column:null},shortcuts:"",visible:"",disabledDate:"",format:"",arrowControl:!1,unlinkPanels:!1}},watch:{value:function(e){if(e){if(Array.isArray(e))if(this.minDate=Object(io["isDate"])(e[0])?new Date(e[0]):null,this.maxDate=Object(io["isDate"])(e[1])?new Date(e[1]):null,this.minDate)if(this.leftDate=this.minDate,this.unlinkPanels&&this.maxDate){var t=this.minDate.getFullYear(),n=this.maxDate.getFullYear();this.rightDate=t===n?Object(io["nextYear"])(this.maxDate):this.maxDate}else this.rightDate=Object(io["nextYear"])(this.leftDate);else this.leftDate=Ss(this.defaultValue)[0],this.rightDate=Object(io["nextYear"])(this.leftDate)}else this.minDate=null,this.maxDate=null},defaultValue:function(e){if(!Array.isArray(this.value)){var t=Ss(e),n=t[0],r=t[1];this.leftDate=n,this.rightDate=e&&e[1]&&n.getFullYear()!==r.getFullYear()&&this.unlinkPanels?r:Object(io["nextYear"])(this.leftDate)}}},methods:{handleClear:function(){this.minDate=null,this.maxDate=null,this.leftDate=Ss(this.defaultValue)[0],this.rightDate=Object(io["nextYear"])(this.leftDate),this.$emit("pick",null)},handleChangeRange:function(e){this.minDate=e.minDate,this.maxDate=e.maxDate,this.rangeState=e.rangeState},handleRangePick:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.defaultTime||[],i=Object(io["modifyWithTimeString"])(e.minDate,r[0]),o=Object(io["modifyWithTimeString"])(e.maxDate,r[1]);this.maxDate===o&&this.minDate===i||(this.onPick&&this.onPick(e),this.maxDate=o,this.minDate=i,setTimeout((function(){t.maxDate=o,t.minDate=i}),10),n&&this.handleConfirm())},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},leftPrevYear:function(){this.leftDate=Object(io["prevYear"])(this.leftDate),this.unlinkPanels||(this.rightDate=Object(io["prevYear"])(this.rightDate))},rightNextYear:function(){this.unlinkPanels||(this.leftDate=Object(io["nextYear"])(this.leftDate)),this.rightDate=Object(io["nextYear"])(this.rightDate)},leftNextYear:function(){this.leftDate=Object(io["nextYear"])(this.leftDate)},rightPrevYear:function(){this.rightDate=Object(io["prevYear"])(this.rightDate)},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isValidValue([this.minDate,this.maxDate])&&this.$emit("pick",[this.minDate,this.maxDate],e)},isValidValue:function(e){return Array.isArray(e)&&e&&e[0]&&e[1]&&Object(io["isDate"])(e[0])&&Object(io["isDate"])(e[1])&&e[0].getTime()<=e[1].getTime()&&("function"!==typeof this.disabledDate||!this.disabledDate(e[0])&&!this.disabledDate(e[1]))},resetView:function(){this.minDate=this.value&&Object(io["isDate"])(this.value[0])?new Date(this.value[0]):null,this.maxDate=this.value&&Object(io["isDate"])(this.value[0])?new Date(this.value[1]):null}},components:{MonthTable:Xo,ElInput:g.a,ElButton:se.a}},Cs=bs,Ts=a(Cs,As,ys,!1,null,null,null);Ts.options.__file="packages/date-picker/src/panel/month-range.vue";var Is=Ts.exports,Rs=function(e){return"daterange"===e||"datetimerange"===e?Es:"monthrange"===e?Is:hs},ws={mixins:[bo],name:"ElDatePicker",props:{type:{type:String,default:"date"},timeArrowControl:Boolean},watch:{type:function(e){this.picker?(this.unmountPicker(),this.panel=Rs(e),this.mountPicker()):this.panel=Rs(e)}},created:function(){this.panel=Rs(this.type)},install:function(e){e.component(ws.name,ws)}},ks=ws,Os=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],ref:"popper",staticClass:"el-picker-panel time-select el-popper",class:e.popperClass,style:{width:e.width+"px"}},[n("el-scrollbar",{attrs:{noresize:"","wrap-class":"el-picker-panel__content"}},e._l(e.items,(function(t){return n("div",{key:t.value,staticClass:"time-select-item",class:{selected:e.value===t.value,disabled:t.disabled,default:t.value===e.defaultValue},attrs:{disabled:t.disabled},on:{click:function(n){e.handleClick(t)}}},[e._v(e._s(t.value))])})),0)],1)])},Ns=[];Os._withStripped=!0;var Ls=function(e){var t=(e||"").split(":");if(t.length>=2){var n=parseInt(t[0],10),r=parseInt(t[1],10);return{hours:n,minutes:r}}return null},Ps=function(e,t){var n=Ls(e),r=Ls(t),i=n.minutes+60*n.hours,o=r.minutes+60*r.hours;return i===o?0:i>o?1:-1},Ds=function(e){return(e.hours<10?"0"+e.hours:e.hours)+":"+(e.minutes<10?"0"+e.minutes:e.minutes)},Ms=function(e,t){var n=Ls(e),r=Ls(t),i={hours:n.hours,minutes:n.minutes};return i.minutes+=r.minutes,i.hours+=r.hours,i.hours+=Math.floor(i.minutes/60),i.minutes=i.minutes%60,Ds(i)},xs={components:{ElScrollbar:W.a},watch:{value:function(e){var t=this;e&&this.$nextTick((function(){return t.scrollToOption()}))}},methods:{handleClick:function(e){e.disabled||this.$emit("pick",e.value)},handleClear:function(){this.$emit("pick",null)},scrollToOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".selected",t=this.$refs.popper.querySelector(".el-picker-panel__content");nr()(t,t.querySelector(e))},handleMenuEnter:function(){var e=this,t=-1!==this.items.map((function(e){return e.value})).indexOf(this.value),n=-1!==this.items.map((function(e){return e.value})).indexOf(this.defaultValue),r=(t?".selected":n&&".default")||".time-select-item:not(.disabled)";this.$nextTick((function(){return e.scrollToOption(r)}))},scrollDown:function(e){var t=this.items,n=t.length,r=t.length,i=t.map((function(e){return e.value})).indexOf(this.value);while(r--)if(i=(i+e+n)%n,!t[i].disabled)return void this.$emit("pick",t[i].value,!0)},isValidValue:function(e){return-1!==this.items.filter((function(e){return!e.disabled})).map((function(e){return e.value})).indexOf(e)},handleKeydown:function(e){var t=e.keyCode;if(38===t||40===t){var n={40:1,38:-1},r=n[t.toString()];return this.scrollDown(r),void e.stopPropagation()}}},data:function(){return{popperClass:"",start:"09:00",end:"18:00",step:"00:30",value:"",defaultValue:"",visible:!1,minTime:"",maxTime:"",width:0}},computed:{items:function(){var e=this.start,t=this.end,n=this.step,r=[];if(e&&t&&n){var i=e;while(Ps(i,t)<=0)r.push({value:i,disabled:Ps(i,this.minTime||"-1:-1")<=0||Ps(i,this.maxTime||"100:100")>=0}),i=Ms(i,n)}return r}}},Bs=xs,Us=a(Bs,Os,Ns,!1,null,null,null);Us.options.__file="packages/date-picker/src/panel/time-select.vue";var Fs=Us.exports,Vs={mixins:[bo],name:"ElTimeSelect",componentName:"ElTimeSelect",props:{type:{type:String,default:"time-select"}},beforeCreate:function(){this.panel=Fs},install:function(e){e.component(Vs.name,Vs)}},js=Vs,Gs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-time-range-picker el-picker-panel el-popper",class:e.popperClass},[n("div",{staticClass:"el-time-range-picker__content"},[n("div",{staticClass:"el-time-range-picker__cell"},[n("div",{staticClass:"el-time-range-picker__header"},[e._v(e._s(e.t("el.datepicker.startTime")))]),n("div",{staticClass:"el-time-range-picker__body el-time-panel__content",class:{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl}},[n("time-spinner",{ref:"minSpinner",attrs:{"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,date:e.minDate},on:{change:e.handleMinChange,"select-range":e.setMinSelectionRange}})],1)]),n("div",{staticClass:"el-time-range-picker__cell"},[n("div",{staticClass:"el-time-range-picker__header"},[e._v(e._s(e.t("el.datepicker.endTime")))]),n("div",{staticClass:"el-time-range-picker__body el-time-panel__content",class:{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl}},[n("time-spinner",{ref:"maxSpinner",attrs:{"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,date:e.maxDate},on:{change:e.handleMaxChange,"select-range":e.setMaxSelectionRange}})],1)])]),n("div",{staticClass:"el-time-panel__footer"},[n("button",{staticClass:"el-time-panel__btn cancel",attrs:{type:"button"},on:{click:function(t){e.handleCancel()}}},[e._v(e._s(e.t("el.datepicker.cancel")))]),n("button",{staticClass:"el-time-panel__btn confirm",attrs:{type:"button",disabled:e.btnDisabled},on:{click:function(t){e.handleConfirm()}}},[e._v(e._s(e.t("el.datepicker.confirm")))])])])])},Hs=[];Gs._withStripped=!0;var Qs=Object(io["parseDate"])("00:00:00","HH:mm:ss"),Ws=Object(io["parseDate"])("23:59:59","HH:mm:ss"),qs=function(e){return Object(io["modifyDate"])(Qs,e.getFullYear(),e.getMonth(),e.getDate())},zs=function(e){return Object(io["modifyDate"])(Ws,e.getFullYear(),e.getMonth(),e.getDate())},Zs=function(e,t){return new Date(Math.min(e.getTime()+t,zs(e).getTime()))},$s={mixins:[_.a],components:{TimeSpinner:Po},computed:{showSeconds:function(){return-1!==(this.format||"").indexOf("ss")},offset:function(){return this.showSeconds?11:8},spinner:function(){return this.selectionRange[0]<this.offset?this.$refs.minSpinner:this.$refs.maxSpinner},btnDisabled:function(){return this.minDate.getTime()>this.maxDate.getTime()},amPmMode:function(){return-1!==(this.format||"").indexOf("A")?"A":-1!==(this.format||"").indexOf("a")?"a":""}},data:function(){return{popperClass:"",minDate:new Date,maxDate:new Date,value:[],oldValue:[new Date,new Date],defaultValue:null,format:"HH:mm:ss",visible:!1,selectionRange:[0,2],arrowControl:!1}},watch:{value:function(e){Array.isArray(e)?(this.minDate=new Date(e[0]),this.maxDate=new Date(e[1])):Array.isArray(this.defaultValue)?(this.minDate=new Date(this.defaultValue[0]),this.maxDate=new Date(this.defaultValue[1])):this.defaultValue?(this.minDate=new Date(this.defaultValue),this.maxDate=Zs(new Date(this.defaultValue),36e5)):(this.minDate=new Date,this.maxDate=Zs(new Date,36e5))},visible:function(e){var t=this;e&&(this.oldValue=this.value,this.$nextTick((function(){return t.$refs.minSpinner.emitSelectRange("hours")})))}},methods:{handleClear:function(){this.$emit("pick",null)},handleCancel:function(){this.$emit("pick",this.oldValue)},handleMinChange:function(e){this.minDate=Object(io["clearMilliseconds"])(e),this.handleChange()},handleMaxChange:function(e){this.maxDate=Object(io["clearMilliseconds"])(e),this.handleChange()},handleChange:function(){this.isValidValue([this.minDate,this.maxDate])&&(this.$refs.minSpinner.selectableRange=[[qs(this.minDate),this.maxDate]],this.$refs.maxSpinner.selectableRange=[[this.minDate,zs(this.maxDate)]],this.$emit("pick",[this.minDate,this.maxDate],!0))},setMinSelectionRange:function(e,t){this.$emit("select-range",e,t,"min"),this.selectionRange=[e,t]},setMaxSelectionRange:function(e,t){this.$emit("select-range",e,t,"max"),this.selectionRange=[e+this.offset,t+this.offset]},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.$refs.minSpinner.selectableRange,n=this.$refs.maxSpinner.selectableRange;this.minDate=Object(io["limitTimeRange"])(this.minDate,t,this.format),this.maxDate=Object(io["limitTimeRange"])(this.maxDate,n,this.format),this.$emit("pick",[this.minDate,this.maxDate],e)},adjustSpinners:function(){this.$refs.minSpinner.adjustSpinners(),this.$refs.maxSpinner.adjustSpinners()},changeSelectionRange:function(e){var t=this.showSeconds?[0,3,6,11,14,17]:[0,3,8,11],n=["hours","minutes"].concat(this.showSeconds?["seconds"]:[]),r=t.indexOf(this.selectionRange[0]),i=(r+e+t.length)%t.length,o=t.length/2;i<o?this.$refs.minSpinner.emitSelectRange(n[i]):this.$refs.maxSpinner.emitSelectRange(n[i-o])},isValidValue:function(e){return Array.isArray(e)&&Object(io["timeWithinRange"])(this.minDate,this.$refs.minSpinner.selectableRange)&&Object(io["timeWithinRange"])(this.maxDate,this.$refs.maxSpinner.selectableRange)},handleKeydown:function(e){var t=e.keyCode,n={38:-1,40:1,37:-1,39:1};if(37===t||39===t){var r=n[t];return this.changeSelectionRange(r),void e.preventDefault()}if(38===t||40===t){var i=n[t];return this.spinner.scrollDown(i),void e.preventDefault()}}}},Ks=$s,Ys=a(Ks,Gs,Hs,!1,null,null,null);Ys.options.__file="packages/date-picker/src/panel/time-range.vue";var Js=Ys.exports,Xs={mixins:[bo],name:"ElTimePicker",props:{isRange:Boolean,arrowControl:Boolean},data:function(){return{type:""}},watch:{isRange:function(e){this.picker?(this.unmountPicker(),this.type=e?"timerange":"time",this.panel=e?Js:Bo,this.mountPicker()):(this.type=e?"timerange":"time",this.panel=e?Js:Bo)}},created:function(){this.type=this.isRange?"timerange":"time",this.panel=this.isRange?Js:Bo},install:function(e){e.component(Xs.name,Xs)}},ea=Xs,ta=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("transition",{attrs:{name:e.transition},on:{"after-enter":e.handleAfterEnter,"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&e.showPopper,expression:"!disabled && showPopper"}],ref:"popper",staticClass:"el-popover el-popper",class:[e.popperClass,e.content&&"el-popover--plain"],style:{width:e.width+"px"},attrs:{role:"tooltip",id:e.tooltipId,"aria-hidden":e.disabled||!e.showPopper?"true":"false"}},[e.title?n("div",{staticClass:"el-popover__title",domProps:{textContent:e._s(e.title)}}):e._e(),e._t("default",[e._v(e._s(e.content))])],2)]),n("span",{ref:"wrapper",staticClass:"el-popover__reference-wrapper"},[e._t("reference")],2)],1)},na=[];ta._withStripped=!0;var ra={name:"ElPopover",mixins:[H.a],props:{trigger:{type:String,default:"click",validator:function(e){return["click","focus","hover","manual"].indexOf(e)>-1}},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200},title:String,disabled:Boolean,content:String,reference:{},popperClass:String,width:{},visibleArrow:{default:!0},arrowOffset:{type:Number,default:0},transition:{type:String,default:"fade-in-linear"},tabindex:{type:Number,default:0}},computed:{tooltipId:function(){return"el-popover-"+Object(v["generateId"])()}},watch:{showPopper:function(e){this.disabled||(e?this.$emit("show"):this.$emit("hide"))}},mounted:function(){var e=this,t=this.referenceElm=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!t&&this.$refs.wrapper.children&&(t=this.referenceElm=this.$refs.wrapper.children[0]),t&&(Object(Ue["addClass"])(t,"el-popover__reference"),t.setAttribute("aria-describedby",this.tooltipId),t.setAttribute("tabindex",this.tabindex),n.setAttribute("tabindex",0),"click"!==this.trigger&&(Object(Ue["on"])(t,"focusin",(function(){e.handleFocus();var n=t.__vue__;n&&"function"===typeof n.focus&&n.focus()})),Object(Ue["on"])(n,"focusin",this.handleFocus),Object(Ue["on"])(t,"focusout",this.handleBlur),Object(Ue["on"])(n,"focusout",this.handleBlur)),Object(Ue["on"])(t,"keydown",this.handleKeydown),Object(Ue["on"])(t,"click",this.handleClick)),"click"===this.trigger?(Object(Ue["on"])(t,"click",this.doToggle),Object(Ue["on"])(document,"click",this.handleDocumentClick)):"hover"===this.trigger?(Object(Ue["on"])(t,"mouseenter",this.handleMouseEnter),Object(Ue["on"])(n,"mouseenter",this.handleMouseEnter),Object(Ue["on"])(t,"mouseleave",this.handleMouseLeave),Object(Ue["on"])(n,"mouseleave",this.handleMouseLeave)):"focus"===this.trigger&&(this.tabindex<0&&console.warn("[Element Warn][Popover]a negative taindex means that the element cannot be focused by tab key"),t.querySelector("input, textarea")?(Object(Ue["on"])(t,"focusin",this.doShow),Object(Ue["on"])(t,"focusout",this.doClose)):(Object(Ue["on"])(t,"mousedown",this.doShow),Object(Ue["on"])(t,"mouseup",this.doClose)))},beforeDestroy:function(){this.cleanup()},deactivated:function(){this.cleanup()},methods:{doToggle:function(){this.showPopper=!this.showPopper},doShow:function(){this.showPopper=!0},doClose:function(){this.showPopper=!1},handleFocus:function(){Object(Ue["addClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!0)},handleClick:function(){Object(Ue["removeClass"])(this.referenceElm,"focusing")},handleBlur:function(){Object(Ue["removeClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!1)},handleMouseEnter:function(){var e=this;clearTimeout(this._timer),this.openDelay?this._timer=setTimeout((function(){e.showPopper=!0}),this.openDelay):this.showPopper=!0},handleKeydown:function(e){27===e.keyCode&&"manual"!==this.trigger&&this.doClose()},handleMouseLeave:function(){var e=this;clearTimeout(this._timer),this.closeDelay?this._timer=setTimeout((function(){e.showPopper=!1}),this.closeDelay):this.showPopper=!1},handleDocumentClick:function(e){var t=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!t&&this.$refs.wrapper.children&&(t=this.referenceElm=this.$refs.wrapper.children[0]),this.$el&&t&&!this.$el.contains(e.target)&&!t.contains(e.target)&&n&&!n.contains(e.target)&&(this.showPopper=!1)},handleAfterEnter:function(){this.$emit("after-enter")},handleAfterLeave:function(){this.$emit("after-leave"),this.doDestroy()},cleanup:function(){(this.openDelay||this.closeDelay)&&clearTimeout(this._timer)}},destroyed:function(){var e=this.reference;Object(Ue["off"])(e,"click",this.doToggle),Object(Ue["off"])(e,"mouseup",this.doClose),Object(Ue["off"])(e,"mousedown",this.doShow),Object(Ue["off"])(e,"focusin",this.doShow),Object(Ue["off"])(e,"focusout",this.doClose),Object(Ue["off"])(e,"mousedown",this.doShow),Object(Ue["off"])(e,"mouseup",this.doClose),Object(Ue["off"])(e,"mouseleave",this.handleMouseLeave),Object(Ue["off"])(e,"mouseenter",this.handleMouseEnter),Object(Ue["off"])(document,"click",this.handleDocumentClick)}},ia=ra,oa=a(ia,ta,na,!1,null,null,null);oa.options.__file="packages/popover/src/main.vue";var sa=oa.exports,aa=function(e,t,n){var r=t.expression?t.value:t.arg,i=n.context.$refs[r];i&&(Array.isArray(i)?i[0].$refs.reference=e:i.$refs.reference=e)},ca={bind:function(e,t,n){aa(e,t,n)},inserted:function(e,t,n){aa(e,t,n)}};Gr.a.directive("popover",ca),sa.install=function(e){e.directive("popover",ca),e.component(sa.name,sa)},sa.directive=ca;var la=sa,ua={name:"ElTooltip",mixins:[H.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0},tabindex:{type:Number,default:0}},data:function(){return{tooltipId:"el-tooltip-"+Object(v["generateId"])(),timeoutPending:null,focusing:!1}},beforeCreate:function(){var e=this;this.$isServer||(this.popperVM=new Gr.a({data:{node:""},render:function(e){return this.node}}).$mount(),this.debounceClose=B()(200,(function(){return e.handleClosePopper()})))},render:function(e){var t=this;this.popperVM&&(this.popperVM.node=e("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[e("div",{on:{mouseleave:function(){t.setExpectedState(!1),t.debounceClose()},mouseenter:function(){t.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])]));var n=this.getFirstElement();if(!n)return null;var r=n.data=n.data||{};return r.staticClass=this.addTooltipClass(r.staticClass),n},mounted:function(){var e=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",this.tabindex),Object(Ue["on"])(this.referenceElm,"mouseenter",this.show),Object(Ue["on"])(this.referenceElm,"mouseleave",this.hide),Object(Ue["on"])(this.referenceElm,"focus",(function(){if(e.$slots.default&&e.$slots.default.length){var t=e.$slots.default[0].componentInstance;t&&t.focus?t.focus():e.handleFocus()}else e.handleFocus()})),Object(Ue["on"])(this.referenceElm,"blur",this.handleBlur),Object(Ue["on"])(this.referenceElm,"click",this.removeFocusing)),this.value&&this.popperVM&&this.popperVM.$nextTick((function(){e.value&&e.updatePopper()}))},watch:{focusing:function(e){e?Object(Ue["addClass"])(this.referenceElm,"focusing"):Object(Ue["removeClass"])(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},addTooltipClass:function(e){return e?"el-tooltip "+e.replace("el-tooltip",""):"el-tooltip"},handleShowPopper:function(){var e=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.showPopper=!0}),this.openDelay),this.hideAfter>0&&(this.timeoutPending=setTimeout((function(){e.showPopper=!1}),this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(e){!1===e&&clearTimeout(this.timeoutPending),this.expectedState=e},getFirstElement:function(){var e=this.$slots.default;if(!Array.isArray(e))return null;for(var t=null,n=0;n<e.length;n++)e[n]&&e[n].tag&&(t=e[n]);return t}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var e=this.referenceElm;1===e.nodeType&&(Object(Ue["off"])(e,"mouseenter",this.show),Object(Ue["off"])(e,"mouseleave",this.hide),Object(Ue["off"])(e,"focus",this.handleFocus),Object(Ue["off"])(e,"blur",this.handleBlur),Object(Ue["off"])(e,"click",this.removeFocusing))},install:function(e){e.component(ua.name,ua)}},da=ua,ha=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"msgbox-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-message-box__wrapper",attrs:{tabindex:"-1",role:"dialog","aria-modal":"true","aria-label":e.title||"dialog"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[n("div",{staticClass:"el-message-box",class:[e.customClass,e.center&&"el-message-box--center"]},[null!==e.title?n("div",{staticClass:"el-message-box__header"},[n("div",{staticClass:"el-message-box__title"},[e.icon&&e.center?n("div",{class:["el-message-box__status",e.icon]}):e._e(),n("span",[e._v(e._s(e.title))])]),e.showClose?n("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){e.handleAction(e.distinguishCancelAndClose?"close":"cancel")},keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction(e.distinguishCancelAndClose?"close":"cancel")}}},[n("i",{staticClass:"el-message-box__close el-icon-close"})]):e._e()]):e._e(),n("div",{staticClass:"el-message-box__content"},[n("div",{staticClass:"el-message-box__container"},[e.icon&&!e.center&&""!==e.message?n("div",{class:["el-message-box__status",e.icon]}):e._e(),""!==e.message?n("div",{staticClass:"el-message-box__message"},[e._t("default",[e.dangerouslyUseHTMLString?n("p",{domProps:{innerHTML:e._s(e.message)}}):n("p",[e._v(e._s(e.message))])])],2):e._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showInput,expression:"showInput"}],staticClass:"el-message-box__input"},[n("el-input",{ref:"input",attrs:{type:e.inputType,placeholder:e.inputPlaceholder},nativeOn:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputEnter(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),n("div",{staticClass:"el-message-box__errormsg",style:{visibility:e.editorErrorMessage?"visible":"hidden"}},[e._v(e._s(e.editorErrorMessage))])],1)]),n("div",{staticClass:"el-message-box__btns"},[e.showCancelButton?n("el-button",{class:[e.cancelButtonClasses],attrs:{loading:e.cancelButtonLoading,round:e.roundButton,size:"small"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction("cancel")}},nativeOn:{click:function(t){e.handleAction("cancel")}}},[e._v("\n          "+e._s(e.cancelButtonText||e.t("el.messagebox.cancel"))+"\n        ")]):e._e(),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showConfirmButton,expression:"showConfirmButton"}],ref:"confirm",class:[e.confirmButtonClasses],attrs:{loading:e.confirmButtonLoading,round:e.roundButton,size:"small"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction("confirm")}},nativeOn:{click:function(t){e.handleAction("confirm")}}},[e._v("\n          "+e._s(e.confirmButtonText||e.t("el.messagebox.confirm"))+"\n        ")])],1)])])])},pa=[];ha._withStripped=!0;var fa=n(12),ga=n.n(fa),ma=n(39),_a=n.n(ma),va=void 0,Ea={success:"success",info:"info",warning:"warning",error:"error"},Aa={mixins:[C.a,_.a],props:{modal:{default:!0},lockScroll:{default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{default:!0},closeOnPressEscape:{default:!0},closeOnHashChange:{default:!0},center:{default:!1,type:Boolean},roundButton:{default:!1,type:Boolean}},components:{ElInput:g.a,ElButton:se.a},computed:{icon:function(){var e=this.type,t=this.iconClass;return t||(e&&Ea[e]?"el-icon-"+Ea[e]:"")},confirmButtonClasses:function(){return"el-button--primary "+this.confirmButtonClass},cancelButtonClasses:function(){return""+this.cancelButtonClass}},methods:{getSafeClose:function(){var e=this,t=this.uid;return function(){e.$nextTick((function(){t===e.uid&&e.doClose()}))}},doClose:function(){var e=this;this.visible&&(this.visible=!1,this._closing=!0,this.onClose&&this.onClose(),va.closeDialog(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose(),setTimeout((function(){e.action&&e.callback(e.action,e)})))},handleWrapperClick:function(){this.closeOnClickModal&&this.handleAction(this.distinguishCancelAndClose?"close":"cancel")},handleInputEnter:function(){if("textarea"!==this.inputType)return this.handleAction("confirm")},handleAction:function(e){("prompt"!==this.$type||"confirm"!==e||this.validate())&&(this.action=e,"function"===typeof this.beforeClose?(this.close=this.getSafeClose(),this.beforeClose(e,this,this.close)):this.doClose())},validate:function(){if("prompt"===this.$type){var e=this.inputPattern;if(e&&!e.test(this.inputValue||""))return this.editorErrorMessage=this.inputErrorMessage||Object(fa["t"])("el.messagebox.error"),Object(Ue["addClass"])(this.getInputElement(),"invalid"),!1;var t=this.inputValidator;if("function"===typeof t){var n=t(this.inputValue);if(!1===n)return this.editorErrorMessage=this.inputErrorMessage||Object(fa["t"])("el.messagebox.error"),Object(Ue["addClass"])(this.getInputElement(),"invalid"),!1;if("string"===typeof n)return this.editorErrorMessage=n,Object(Ue["addClass"])(this.getInputElement(),"invalid"),!1}}return this.editorErrorMessage="",Object(Ue["removeClass"])(this.getInputElement(),"invalid"),!0},getFirstFocus:function(){var e=this.$el.querySelector(".el-message-box__btns .el-button"),t=this.$el.querySelector(".el-message-box__btns .el-message-box__title");return e||t},getInputElement:function(){var e=this.$refs.input.$refs;return e.input||e.textarea},handleClose:function(){this.handleAction("close")}},watch:{inputValue:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(n){"prompt"===t.$type&&null!==e&&t.validate()}))}},visible:function(e){var t=this;e&&(this.uid++,"alert"!==this.$type&&"confirm"!==this.$type||this.$nextTick((function(){t.$refs.confirm.$el.focus()})),this.focusAfterClosed=document.activeElement,va=new _a.a(this.$el,this.focusAfterClosed,this.getFirstFocus())),"prompt"===this.$type&&(e?setTimeout((function(){t.$refs.input&&t.$refs.input.$el&&t.getInputElement().focus()}),500):(this.editorErrorMessage="",Object(Ue["removeClass"])(this.getInputElement(),"invalid")))}},mounted:function(){var e=this;this.$nextTick((function(){e.closeOnHashChange&&window.addEventListener("hashchange",e.close)}))},beforeDestroy:function(){this.closeOnHashChange&&window.removeEventListener("hashchange",this.close),setTimeout((function(){va.closeDialog()}))},data:function(){return{uid:1,title:void 0,message:"",type:"",iconClass:"",customClass:"",showInput:!1,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,action:"",confirmButtonText:"",cancelButtonText:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonClass:"",confirmButtonDisabled:!1,cancelButtonClass:"",editorErrorMessage:null,callback:null,dangerouslyUseHTMLString:!1,focusAfterClosed:null,isOnComposition:!1,distinguishCancelAndClose:!1}}},ya=Aa,Sa=a(ya,ha,pa,!1,null,null,null);Sa.options.__file="packages/message-box/src/main.vue";var ba=Sa.exports,Ca=n(22),Ta="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ia={title:null,message:"",type:"",iconClass:"",showInput:!1,showClose:!0,modalFade:!0,lockScroll:!0,closeOnClickModal:!0,closeOnPressEscape:!0,closeOnHashChange:!0,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,confirmButtonPosition:"right",confirmButtonHighlight:!1,cancelButtonHighlight:!1,confirmButtonText:"",cancelButtonText:"",confirmButtonClass:"",cancelButtonClass:"",customClass:"",beforeClose:null,dangerouslyUseHTMLString:!1,center:!1,roundButton:!1,distinguishCancelAndClose:!1},Ra=Gr.a.extend(ba),wa=void 0,ka=void 0,Oa=[],Na=function(e){if(wa){var t=wa.callback;"function"===typeof t&&(ka.showInput?t(ka.inputValue,e):t(e)),wa.resolve&&("confirm"===e?ka.showInput?wa.resolve({value:ka.inputValue,action:e}):wa.resolve(e):!wa.reject||"cancel"!==e&&"close"!==e||wa.reject(e))}},La=function(){ka=new Ra({el:document.createElement("div")}),ka.callback=Na},Pa=function e(){if(ka||La(),ka.action="",(!ka.visible||ka.closeTimer)&&Oa.length>0){wa=Oa.shift();var t=wa.options;for(var n in t)t.hasOwnProperty(n)&&(ka[n]=t[n]);void 0===t.callback&&(ka.callback=Na);var r=ka.callback;ka.callback=function(t,n){r(t,n),e()},Object(Ca["isVNode"])(ka.message)?(ka.$slots.default=[ka.message],ka.message=null):delete ka.$slots.default,["modal","showClose","closeOnClickModal","closeOnPressEscape","closeOnHashChange"].forEach((function(e){void 0===ka[e]&&(ka[e]=!0)})),document.body.appendChild(ka.$el),Gr.a.nextTick((function(){ka.visible=!0}))}},Da=function e(t,n){if(!Gr.a.prototype.$isServer){if("string"===typeof t||Object(Ca["isVNode"])(t)?(t={message:t},"string"===typeof arguments[1]&&(t.title=arguments[1])):t.callback&&!n&&(n=t.callback),"undefined"!==typeof Promise)return new Promise((function(r,i){Oa.push({options:Tt()({},Ia,e.defaults,t),callback:n,resolve:r,reject:i}),Pa()}));Oa.push({options:Tt()({},Ia,e.defaults,t),callback:n}),Pa()}};Da.setDefaults=function(e){Da.defaults=e},Da.alert=function(e,t,n){return"object"===("undefined"===typeof t?"undefined":Ta(t))?(n=t,t=""):void 0===t&&(t=""),Da(Tt()({title:t,message:e,$type:"alert",closeOnPressEscape:!1,closeOnClickModal:!1},n))},Da.confirm=function(e,t,n){return"object"===("undefined"===typeof t?"undefined":Ta(t))?(n=t,t=""):void 0===t&&(t=""),Da(Tt()({title:t,message:e,$type:"confirm",showCancelButton:!0},n))},Da.prompt=function(e,t,n){return"object"===("undefined"===typeof t?"undefined":Ta(t))?(n=t,t=""):void 0===t&&(t=""),Da(Tt()({title:t,message:e,showCancelButton:!0,showInput:!0,$type:"prompt"},n))},Da.close=function(){ka.doClose(),ka.visible=!1,Oa=[],wa=null};var Ma=Da,xa=Ma,Ba=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-breadcrumb",attrs:{"aria-label":"Breadcrumb",role:"navigation"}},[e._t("default")],2)},Ua=[];Ba._withStripped=!0;var Fa={name:"ElBreadcrumb",props:{separator:{type:String,default:"/"},separatorClass:{type:String,default:""}},provide:function(){return{elBreadcrumb:this}},mounted:function(){var e=this.$el.querySelectorAll(".el-breadcrumb__item");e.length&&e[e.length-1].setAttribute("aria-current","page")}},Va=Fa,ja=a(Va,Ba,Ua,!1,null,null,null);ja.options.__file="packages/breadcrumb/src/breadcrumb.vue";var Ga=ja.exports;Ga.install=function(e){e.component(Ga.name,Ga)};var Ha=Ga,Qa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"el-breadcrumb__item"},[n("span",{ref:"link",class:["el-breadcrumb__inner",e.to?"is-link":""],attrs:{role:"link"}},[e._t("default")],2),e.separatorClass?n("i",{staticClass:"el-breadcrumb__separator",class:e.separatorClass}):n("span",{staticClass:"el-breadcrumb__separator",attrs:{role:"presentation"}},[e._v(e._s(e.separator))])])},Wa=[];Qa._withStripped=!0;var qa={name:"ElBreadcrumbItem",props:{to:{},replace:Boolean},data:function(){return{separator:"",separatorClass:""}},inject:["elBreadcrumb"],mounted:function(){var e=this;this.separator=this.elBreadcrumb.separator,this.separatorClass=this.elBreadcrumb.separatorClass;var t=this.$refs.link;t.setAttribute("role","link"),t.addEventListener("click",(function(t){var n=e.to,r=e.$router;n&&r&&(e.replace?r.replace(n):r.push(n))}))}},za=qa,Za=a(za,Qa,Wa,!1,null,null,null);Za.options.__file="packages/breadcrumb/src/breadcrumb-item.vue";var $a=Za.exports;$a.install=function(e){e.component($a.name,$a)};var Ka=$a,Ya=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"el-form",class:[e.labelPosition?"el-form--label-"+e.labelPosition:"",{"el-form--inline":e.inline}]},[e._t("default")],2)},Ja=[];Ya._withStripped=!0;var Xa={name:"ElForm",componentName:"ElForm",provide:function(){return{elForm:this}},props:{model:Object,rules:Object,labelPosition:String,labelWidth:String,labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1}},watch:{rules:function(){this.fields.forEach((function(e){e.removeValidateEvents(),e.addValidateEvents()})),this.validateOnRuleChange&&this.validate((function(){}))}},computed:{autoLabelWidth:function(){if(!this.potentialLabelWidthArr.length)return 0;var e=Math.max.apply(Math,this.potentialLabelWidthArr);return e?e+"px":""}},data:function(){return{fields:[],potentialLabelWidthArr:[]}},created:function(){var e=this;this.$on("el.form.addField",(function(t){t&&e.fields.push(t)})),this.$on("el.form.removeField",(function(t){t.prop&&e.fields.splice(e.fields.indexOf(t),1)}))},methods:{resetFields:function(){this.model?this.fields.forEach((function(e){e.resetField()})):console.warn("[Element Warn][Form]model is required for resetFields to work.")},clearValidate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length?"string"===typeof e?this.fields.filter((function(t){return e===t.prop})):this.fields.filter((function(t){return e.indexOf(t.prop)>-1})):this.fields;t.forEach((function(e){e.clearValidate()}))},validate:function(e){var t=this;if(this.model){var n=void 0;"function"!==typeof e&&window.Promise&&(n=new window.Promise((function(t,n){e=function(e){e?t(e):n(e)}})));var r=!0,i=0;0===this.fields.length&&e&&e(!0);var o={};return this.fields.forEach((function(n){n.validate("",(function(n,s){n&&(r=!1),o=Tt()({},o,s),"function"===typeof e&&++i===t.fields.length&&e(r,o)}))})),n||void 0}console.warn("[Element Warn][Form]model is required for validate to work!")},validateField:function(e,t){e=[].concat(e);var n=this.fields.filter((function(t){return-1!==e.indexOf(t.prop)}));n.length?n.forEach((function(e){e.validate("",t)})):console.warn("[Element Warn]please pass correct props!")},getLabelWidthIndex:function(e){var t=this.potentialLabelWidthArr.indexOf(e);if(-1===t)throw new Error("[ElementForm]unpected width ",e);return t},registerLabelWidth:function(e,t){if(e&&t){var n=this.getLabelWidthIndex(t);this.potentialLabelWidthArr.splice(n,1,e)}else e&&this.potentialLabelWidthArr.push(e)},deregisterLabelWidth:function(e){var t=this.getLabelWidthIndex(e);this.potentialLabelWidthArr.splice(t,1)}}},ec=Xa,tc=a(ec,Ya,Ja,!1,null,null,null);tc.options.__file="packages/form/src/form.vue";var nc=tc.exports;nc.install=function(e){e.component(nc.name,nc)};var rc=nc,ic=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-form-item",class:[{"el-form-item--feedback":e.elForm&&e.elForm.statusIcon,"is-error":"error"===e.validateState,"is-validating":"validating"===e.validateState,"is-success":"success"===e.validateState,"is-required":e.isRequired||e.required,"is-no-asterisk":e.elForm&&e.elForm.hideRequiredAsterisk},e.sizeClass?"el-form-item--"+e.sizeClass:""]},[n("label-wrap",{attrs:{"is-auto-width":e.labelStyle&&"auto"===e.labelStyle.width,"update-all":"auto"===e.form.labelWidth}},[e.label||e.$slots.label?n("label",{staticClass:"el-form-item__label",style:e.labelStyle,attrs:{for:e.labelFor}},[e._t("label",[e._v(e._s(e.label+e.form.labelSuffix))])],2):e._e()]),n("div",{staticClass:"el-form-item__content",style:e.contentStyle},[e._t("default"),n("transition",{attrs:{name:"el-zoom-in-top"}},["error"===e.validateState&&e.showMessage&&e.form.showMessage?e._t("error",[n("div",{staticClass:"el-form-item__error",class:{"el-form-item__error--inline":"boolean"===typeof e.inlineMessage?e.inlineMessage:e.elForm&&e.elForm.inlineMessage||!1}},[e._v("\n          "+e._s(e.validateMessage)+"\n        ")])],{error:e.validateMessage}):e._e()],2)],2)],1)},oc=[];ic._withStripped=!0;var sc,ac,cc=n(40),lc=n.n(cc),uc={props:{isAutoWidth:Boolean,updateAll:Boolean},inject:["elForm","elFormItem"],render:function(){var e=arguments[0],t=this.$slots.default;if(!t)return null;if(this.isAutoWidth){var n=this.elForm.autoLabelWidth,r={};if(n&&"auto"!==n){var i=parseInt(n,10)-this.computedWidth;i&&(r.marginLeft=i+"px")}return e("div",{class:"el-form-item__label-wrap",style:r},[t])}return t[0]},methods:{getLabelWidth:function(){if(this.$el&&this.$el.firstElementChild){var e=window.getComputedStyle(this.$el.firstElementChild).width;return Math.ceil(parseFloat(e))}return 0},updateLabelWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"update";this.$slots.default&&this.isAutoWidth&&this.$el.firstElementChild&&("update"===e?this.computedWidth=this.getLabelWidth():"remove"===e&&this.elForm.deregisterLabelWidth(this.computedWidth))}},watch:{computedWidth:function(e,t){this.updateAll&&(this.elForm.registerLabelWidth(e,t),this.elFormItem.updateComputedLabelWidth(e))}},data:function(){return{computedWidth:0}},mounted:function(){this.updateLabelWidth("update")},updated:function(){this.updateLabelWidth("update")},beforeDestroy:function(){this.updateLabelWidth("remove")}},dc=uc,hc=a(dc,sc,ac,!1,null,null,null);hc.options.__file="packages/form/src/label-wrap.vue";var pc=hc.exports,fc={name:"ElFormItem",componentName:"ElFormItem",mixins:[w.a],provide:function(){return{elFormItem:this}},inject:["elForm"],props:{label:String,labelWidth:String,prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:String},components:{LabelWrap:pc},watch:{error:{immediate:!0,handler:function(e){this.validateMessage=e,this.validateState=e?"error":""}},validateStatus:function(e){this.validateState=e}},computed:{labelFor:function(){return this.for||this.prop},labelStyle:function(){var e={};if("top"===this.form.labelPosition)return e;var t=this.labelWidth||this.form.labelWidth;return t&&(e.width=t),e},contentStyle:function(){var e={},t=this.label;if("top"===this.form.labelPosition||this.form.inline)return e;if(!t&&!this.labelWidth&&this.isNested)return e;var n=this.labelWidth||this.form.labelWidth;return"auto"===n?"auto"===this.labelWidth?e.marginLeft=this.computedLabelWidth:"auto"===this.form.labelWidth&&(e.marginLeft=this.elForm.autoLabelWidth):e.marginLeft=n,e},form:function(){var e=this.$parent,t=e.$options.componentName;while("ElForm"!==t)"ElFormItem"===t&&(this.isNested=!0),e=e.$parent,t=e.$options.componentName;return e},fieldValue:function(){var e=this.form.model;if(e&&this.prop){var t=this.prop;return-1!==t.indexOf(":")&&(t=t.replace(/:/,".")),Object(v["getPropByPath"])(e,t,!0).v}},isRequired:function(){var e=this.getRules(),t=!1;return e&&e.length&&e.every((function(e){return!e.required||(t=!0,!1)})),t},_formSize:function(){return this.elForm.size},elFormItemSize:function(){return this.size||this._formSize},sizeClass:function(){return this.elFormItemSize||(this.$ELEMENT||{}).size}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1,computedLabelWidth:""}},methods:{validate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v["noop"];this.validateDisabled=!1;var r=this.getFilteredRule(e);if((!r||0===r.length)&&void 0===this.required)return n(),!0;this.validateState="validating";var i={};r&&r.length>0&&r.forEach((function(e){delete e.trigger})),i[this.prop]=r;var o=new lc.a(i),s={};s[this.prop]=this.fieldValue,o.validate(s,{firstFields:!0},(function(e,r){t.validateState=e?"error":"success",t.validateMessage=e?e[0].message:"",n(t.validateMessage,r),t.elForm&&t.elForm.$emit("validate",t.prop,!e,t.validateMessage||null)}))},clearValidate:function(){this.validateState="",this.validateMessage="",this.validateDisabled=!1},resetField:function(){var e=this;this.validateState="",this.validateMessage="";var t=this.form.model,n=this.fieldValue,r=this.prop;-1!==r.indexOf(":")&&(r=r.replace(/:/,"."));var i=Object(v["getPropByPath"])(t,r,!0);this.validateDisabled=!0,Array.isArray(n)?i.o[i.k]=[].concat(this.initialValue):i.o[i.k]=this.initialValue,this.$nextTick((function(){e.validateDisabled=!1})),this.broadcast("ElTimeSelect","fieldReset",this.initialValue)},getRules:function(){var e=this.form.rules,t=this.rules,n=void 0!==this.required?{required:!!this.required}:[],r=Object(v["getPropByPath"])(e,this.prop||"");return e=e?r.o[this.prop||""]||r.v:[],[].concat(t||e||[]).concat(n)},getFilteredRule:function(e){var t=this.getRules();return t.filter((function(t){return!t.trigger||""===e||(Array.isArray(t.trigger)?t.trigger.indexOf(e)>-1:t.trigger===e)})).map((function(e){return Tt()({},e)}))},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")},updateComputedLabelWidth:function(e){this.computedLabelWidth=e?e+"px":""},addValidateEvents:function(){var e=this.getRules();(e.length||void 0!==this.required)&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))},removeValidateEvents:function(){this.$off()}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var e=this.fieldValue;Array.isArray(e)&&(e=[].concat(e)),Object.defineProperty(this,"initialValue",{value:e}),this.addValidateEvents()}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}},gc=fc,mc=a(gc,ic,oc,!1,null,null,null);mc.options.__file="packages/form/src/form-item.vue";var _c=mc.exports;_c.install=function(e){e.component(_c.name,_c)};var vc=_c,Ec=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-tabs__active-bar",class:"is-"+e.rootTabs.tabPosition,style:e.barStyle})},Ac=[];Ec._withStripped=!0;var yc={name:"TabBar",props:{tabs:Array},inject:["rootTabs"],computed:{barStyle:{get:function(){var e=this,t={},n=0,r=0,i=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"width":"height",o="width"===i?"x":"y",s=function(e){return e.toLowerCase().replace(/( |^)[a-z]/g,(function(e){return e.toUpperCase()}))};this.tabs.every((function(t,o){var a=Object(v["arrayFind"])(e.$parent.$refs.tabs||[],(function(e){return e.id.replace("tab-","")===t.paneName}));if(!a)return!1;if(t.active){r=a["client"+s(i)];var c=window.getComputedStyle(a);return"width"===i&&e.tabs.length>1&&(r-=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)),"width"===i&&(n+=parseFloat(c.paddingLeft)),!1}return n+=a["client"+s(i)],!0}));var a="translate"+s(o)+"("+n+"px)";return t[i]=r+"px",t.transform=a,t.msTransform=a,t.webkitTransform=a,t}}}},Sc=yc,bc=a(Sc,Ec,Ac,!1,null,null,null);bc.options.__file="packages/tabs/src/tab-bar.vue";var Cc=bc.exports;function Tc(){}var Ic,Rc,wc=function(e){return e.toLowerCase().replace(/( |^)[a-z]/g,(function(e){return e.toUpperCase()}))},kc={name:"TabNav",components:{TabBar:Cc},inject:["rootTabs"],props:{panes:Array,currentName:String,editable:Boolean,onTabClick:{type:Function,default:Tc},onTabRemove:{type:Function,default:Tc},type:String,stretch:Boolean},data:function(){return{scrollable:!1,navOffset:0,isFocus:!1,focusable:!0}},computed:{navStyle:function(){var e=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"X":"Y";return{transform:"translate"+e+"(-"+this.navOffset+"px)"}},sizeName:function(){return-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"width":"height"}},methods:{scrollPrev:function(){var e=this.$refs.navScroll["offset"+wc(this.sizeName)],t=this.navOffset;if(t){var n=t>e?t-e:0;this.navOffset=n}},scrollNext:function(){var e=this.$refs.nav["offset"+wc(this.sizeName)],t=this.$refs.navScroll["offset"+wc(this.sizeName)],n=this.navOffset;if(!(e-n<=t)){var r=e-n>2*t?n+t:e-t;this.navOffset=r}},scrollToActiveTab:function(){if(this.scrollable){var e=this.$refs.nav,t=this.$el.querySelector(".is-active");if(t){var n=this.$refs.navScroll,r=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition),i=t.getBoundingClientRect(),o=n.getBoundingClientRect(),s=r?e.offsetWidth-o.width:e.offsetHeight-o.height,a=this.navOffset,c=a;r?(i.left<o.left&&(c=a-(o.left-i.left)),i.right>o.right&&(c=a+i.right-o.right)):(i.top<o.top&&(c=a-(o.top-i.top)),i.bottom>o.bottom&&(c=a+(i.bottom-o.bottom))),c=Math.max(c,0),this.navOffset=Math.min(c,s)}}},update:function(){if(this.$refs.nav){var e=this.sizeName,t=this.$refs.nav["offset"+wc(e)],n=this.$refs.navScroll["offset"+wc(e)],r=this.navOffset;if(n<t){var i=this.navOffset;this.scrollable=this.scrollable||{},this.scrollable.prev=i,this.scrollable.next=i+n<t,t-i<n&&(this.navOffset=t-n)}else this.scrollable=!1,r>0&&(this.navOffset=0)}},changeTab:function(e){var t=e.keyCode,n=void 0,r=void 0,i=void 0;-1!==[37,38,39,40].indexOf(t)&&(i=e.currentTarget.querySelectorAll("[role=tab]"),r=Array.prototype.indexOf.call(i,e.target),n=37===t||38===t?0===r?i.length-1:r-1:r<i.length-1?r+1:0,i[n].focus(),i[n].click(),this.setFocus())},setFocus:function(){this.focusable&&(this.isFocus=!0)},removeFocus:function(){this.isFocus=!1},visibilityChangeHandler:function(){var e=this,t=document.visibilityState;"hidden"===t?this.focusable=!1:"visible"===t&&setTimeout((function(){e.focusable=!0}),50)},windowBlurHandler:function(){this.focusable=!1},windowFocusHandler:function(){var e=this;setTimeout((function(){e.focusable=!0}),50)}},updated:function(){this.update()},render:function(e){var t=this,n=this.type,r=this.panes,i=this.editable,o=this.stretch,s=this.onTabClick,a=this.onTabRemove,c=this.navStyle,l=this.scrollable,u=this.scrollNext,d=this.scrollPrev,h=this.changeTab,p=this.setFocus,f=this.removeFocus,g=l?[e("span",{class:["el-tabs__nav-prev",l.prev?"":"is-disabled"],on:{click:d}},[e("i",{class:"el-icon-arrow-left"})]),e("span",{class:["el-tabs__nav-next",l.next?"":"is-disabled"],on:{click:u}},[e("i",{class:"el-icon-arrow-right"})])]:null,m=this._l(r,(function(n,r){var o,c=n.name||n.index||r,l=n.isClosable||i;n.index=""+r;var u=l?e("span",{class:"el-icon-close",on:{click:function(e){a(n,e)}}}):null,d=n.$slots.label||n.label,h=n.active?0:-1;return e("div",{class:(o={"el-tabs__item":!0},o["is-"+t.rootTabs.tabPosition]=!0,o["is-active"]=n.active,o["is-disabled"]=n.disabled,o["is-closable"]=l,o["is-focus"]=t.isFocus,o),attrs:{id:"tab-"+c,"aria-controls":"pane-"+c,role:"tab","aria-selected":n.active,tabindex:h},key:"tab-"+c,ref:"tabs",refInFor:!0,on:{focus:function(){p()},blur:function(){f()},click:function(e){f(),s(n,c,e)},keydown:function(e){!l||46!==e.keyCode&&8!==e.keyCode||a(n,e)}}},[d,u])}));return e("div",{class:["el-tabs__nav-wrap",l?"is-scrollable":"","is-"+this.rootTabs.tabPosition]},[g,e("div",{class:["el-tabs__nav-scroll"],ref:"navScroll"},[e("div",{class:["el-tabs__nav","is-"+this.rootTabs.tabPosition,o&&-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"is-stretch":""],ref:"nav",style:c,attrs:{role:"tablist"},on:{keydown:h}},[n?null:e("tab-bar",{attrs:{tabs:r}}),m])])])},mounted:function(){var e=this;Object(er["addResizeListener"])(this.$el,this.update),document.addEventListener("visibilitychange",this.visibilityChangeHandler),window.addEventListener("blur",this.windowBlurHandler),window.addEventListener("focus",this.windowFocusHandler),setTimeout((function(){e.scrollToActiveTab()}),0)},beforeDestroy:function(){this.$el&&this.update&&Object(er["removeResizeListener"])(this.$el,this.update),document.removeEventListener("visibilitychange",this.visibilityChangeHandler),window.removeEventListener("blur",this.windowBlurHandler),window.removeEventListener("focus",this.windowFocusHandler)}},Oc=kc,Nc=a(Oc,Ic,Rc,!1,null,null,null);Nc.options.__file="packages/tabs/src/tab-nav.vue";var Lc,Pc,Dc=Nc.exports,Mc={name:"ElTabs",components:{TabNav:Dc},props:{type:String,activeName:String,closable:Boolean,addable:Boolean,value:{},editable:Boolean,tabPosition:{type:String,default:"top"},beforeLeave:Function,stretch:Boolean},provide:function(){return{rootTabs:this}},data:function(){return{currentName:this.value||this.activeName,panes:[]}},watch:{activeName:function(e){this.setCurrentName(e)},value:function(e){this.setCurrentName(e)},currentName:function(e){var t=this;this.$refs.nav&&this.$nextTick((function(){t.$refs.nav.$nextTick((function(e){t.$refs.nav.scrollToActiveTab()}))}))}},methods:{calcPaneInstances:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.$slots.default){var n=this.$slots.default.filter((function(e){return e.tag&&e.componentOptions&&"ElTabPane"===e.componentOptions.Ctor.options.name})),r=n.map((function(e){var t=e.componentInstance;return t})),i=!(r.length===this.panes.length&&r.every((function(t,n){return t===e.panes[n]})));(t||i)&&(this.panes=r)}else 0!==this.panes.length&&(this.panes=[])},handleTabClick:function(e,t,n){e.disabled||(this.setCurrentName(t),this.$emit("tab-click",e,n))},handleTabRemove:function(e,t){e.disabled||(t.stopPropagation(),this.$emit("edit",e.name,"remove"),this.$emit("tab-remove",e.name))},handleTabAdd:function(){this.$emit("edit",null,"add"),this.$emit("tab-add")},setCurrentName:function(e){var t=this,n=function(){t.currentName=e,t.$emit("input",e)};if(this.currentName!==e&&this.beforeLeave){var r=this.beforeLeave(e,this.currentName);r&&r.then?r.then((function(){n(),t.$refs.nav&&t.$refs.nav.removeFocus()}),(function(){})):!1!==r&&n()}else n()}},render:function(e){var t,n=this.type,r=this.handleTabClick,i=this.handleTabRemove,o=this.handleTabAdd,s=this.currentName,a=this.panes,c=this.editable,l=this.addable,u=this.tabPosition,d=this.stretch,h=c||l?e("span",{class:"el-tabs__new-tab",on:{click:o,keydown:function(e){13===e.keyCode&&o()}},attrs:{tabindex:"0"}},[e("i",{class:"el-icon-plus"})]):null,p={props:{currentName:s,onTabClick:r,onTabRemove:i,editable:c,type:n,panes:a,stretch:d},ref:"nav"},f=e("div",{class:["el-tabs__header","is-"+u]},[h,e("tab-nav",p)]),g=e("div",{class:"el-tabs__content"},[this.$slots.default]);return e("div",{class:(t={"el-tabs":!0,"el-tabs--card":"card"===n},t["el-tabs--"+u]=!0,t["el-tabs--border-card"]="border-card"===n,t)},["bottom"!==u?[f,g]:[g,f]])},created:function(){this.currentName||this.setCurrentName("0"),this.$on("tab-nav-update",this.calcPaneInstances.bind(null,!0))},mounted:function(){this.calcPaneInstances()},updated:function(){this.calcPaneInstances()}},xc=Mc,Bc=a(xc,Lc,Pc,!1,null,null,null);Bc.options.__file="packages/tabs/src/tabs.vue";var Uc=Bc.exports;Uc.install=function(e){e.component(Uc.name,Uc)};var Fc=Uc,Vc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.lazy||e.loaded||e.active?n("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"el-tab-pane",attrs:{role:"tabpanel","aria-hidden":!e.active,id:"pane-"+e.paneName,"aria-labelledby":"tab-"+e.paneName}},[e._t("default")],2):e._e()},jc=[];Vc._withStripped=!0;var Gc={name:"ElTabPane",componentName:"ElTabPane",props:{label:String,labelContent:Function,name:String,closable:Boolean,disabled:Boolean,lazy:Boolean},data:function(){return{index:null,loaded:!1}},computed:{isClosable:function(){return this.closable||this.$parent.closable},active:function(){var e=this.$parent.currentName===(this.name||this.index);return e&&(this.loaded=!0),e},paneName:function(){return this.name||this.index}},updated:function(){this.$parent.$emit("tab-nav-update")}},Hc=Gc,Qc=a(Hc,Vc,jc,!1,null,null,null);Qc.options.__file="packages/tabs/src/tab-pane.vue";var Wc=Qc.exports;Wc.install=function(e){e.component(Wc.name,Wc)};var qc,zc,Zc=Wc,$c={name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String,effect:{type:String,default:"light",validator:function(e){return-1!==["dark","light","plain"].indexOf(e)}}},methods:{handleClose:function(e){e.stopPropagation(),this.$emit("close",e)},handleClick:function(e){this.$emit("click",e)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(e){var t=this.type,n=this.tagSize,r=this.hit,i=this.effect,o=["el-tag",t?"el-tag--"+t:"",n?"el-tag--"+n:"",i?"el-tag--"+i:"",r&&"is-hit"],s=e("span",{class:o,style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&e("i",{class:"el-tag__close el-icon-close",on:{click:this.handleClose}})]);return this.disableTransitions?s:e("transition",{attrs:{name:"el-zoom-in-center"}},[s])}},Kc=$c,Yc=a(Kc,qc,zc,!1,null,null,null);Yc.options.__file="packages/tag/src/tag.vue";var Jc=Yc.exports;Jc.install=function(e){e.component(Jc.name,Jc)};var Xc=Jc,el=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-tree",class:{"el-tree--highlight-current":e.highlightCurrent,"is-dragging":!!e.dragState.draggingNode,"is-drop-not-allow":!e.dragState.allowDrop,"is-drop-inner":"inner"===e.dragState.dropType},attrs:{role:"tree"}},[e._l(e.root.childNodes,(function(t){return n("el-tree-node",{key:e.getNodeKey(t),attrs:{node:t,props:e.props,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent},on:{"node-expand":e.handleNodeExpand}})})),e.isEmpty?n("div",{staticClass:"el-tree__empty-block"},[n("span",{staticClass:"el-tree__empty-text"},[e._v(e._s(e.emptyText))])]):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.dragState.showDropIndicator,expression:"dragState.showDropIndicator"}],ref:"dropIndicator",staticClass:"el-tree__drop-indicator"})],2)},tl=[];el._withStripped=!0;var nl="$treeNodeId",rl=function(e,t){t&&!t[nl]&&Object.defineProperty(t,nl,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},il=function(e,t){return e?t[e]:t[nl]},ol=function(e,t){var n=e;while(n&&"BODY"!==n.tagName){if(n.__vue__&&n.__vue__.$options.name===t)return n.__vue__;n=n.parentNode}return null},sl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function al(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var cl=function(e){for(var t=!0,n=!0,r=!0,i=0,o=e.length;i<o;i++){var s=e[i];(!0!==s.checked||s.indeterminate)&&(t=!1,s.disabled||(r=!1)),(!1!==s.checked||s.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:r,half:!t&&!n}},ll=function e(t){if(0!==t.childNodes.length){var n=cl(t.childNodes),r=n.all,i=n.none,o=n.half;r?(t.checked=!0,t.indeterminate=!1):o?(t.checked=!1,t.indeterminate=!0):i&&(t.checked=!1,t.indeterminate=!1);var s=t.parent;s&&0!==s.level&&(t.store.checkStrictly||e(s))}},ul=function(e,t){var n=e.store.props,r=e.data||{},i=n[t];if("function"===typeof i)return i(r,e);if("string"===typeof i)return r[i];if("undefined"===typeof i){var o=r[t];return void 0===o?"":o}},dl=0,hl=function(){function e(t){for(var n in al(this,e),this.id=dl++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1);var r=this.store;if(!r)throw new Error("[Node]store is required!");r.registerNode(this);var i=r.props;if(i&&"undefined"!==typeof i.isLeaf){var o=ul(this,"isLeaf");"boolean"===typeof o&&(this.isLeafByUser=o)}if(!0!==r.lazy&&this.data?(this.setData(this.data),r.defaultExpandAll&&(this.expanded=!0)):this.level>0&&r.lazy&&r.defaultExpandAll&&this.expand(),Array.isArray(this.data)||rl(this,this.data),this.data){var s=r.defaultExpandedKeys,a=r.key;a&&s&&-1!==s.indexOf(this.key)&&this.expand(null,r.autoExpandParent),a&&void 0!==r.currentNodeKey&&this.key===r.currentNodeKey&&(r.currentNode=this,r.currentNode.isCurrent=!0),r.lazy&&r._initDefaultCheckedNode(this),this.updateLeafState()}}return e.prototype.setData=function(e){Array.isArray(e)||rl(this,e),this.data=e,this.childNodes=[];var t=void 0;t=0===this.level&&this.data instanceof Array?this.data:ul(this,"children")||[];for(var n=0,r=t.length;n<r;n++)this.insertChild({data:t[n]})},e.prototype.contains=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function n(r){for(var i=r.childNodes||[],o=!1,s=0,a=i.length;s<a;s++){var c=i[s];if(c===e||t&&n(c)){o=!0;break}}return o};return n(this)},e.prototype.remove=function(){var e=this.parent;e&&e.removeChild(this)},e.prototype.insertChild=function(t,n,r){if(!t)throw new Error("insertChild error: child is required.");if(!(t instanceof e)){if(!r){var i=this.getChildren(!0)||[];-1===i.indexOf(t.data)&&("undefined"===typeof n||n<0?i.push(t.data):i.splice(n,0,t.data))}Tt()(t,{parent:this,store:this.store}),t=new e(t)}t.level=this.level+1,"undefined"===typeof n||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()},e.prototype.insertBefore=function(e,t){var n=void 0;t&&(n=this.childNodes.indexOf(t)),this.insertChild(e,n)},e.prototype.insertAfter=function(e,t){var n=void 0;t&&(n=this.childNodes.indexOf(t),-1!==n&&(n+=1)),this.insertChild(e,n)},e.prototype.removeChild=function(e){var t=this.getChildren()||[],n=t.indexOf(e.data);n>-1&&t.splice(n,1);var r=this.childNodes.indexOf(e);r>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(r,1)),this.updateLeafState()},e.prototype.removeChildByData=function(e){for(var t=null,n=0;n<this.childNodes.length;n++)if(this.childNodes[n].data===e){t=this.childNodes[n];break}t&&this.removeChild(t)},e.prototype.expand=function(e,t){var n=this,r=function(){if(t){var r=n.parent;while(r.level>0)r.expanded=!0,r=r.parent}n.expanded=!0,e&&e()};this.shouldLoadData()?this.loadData((function(e){e instanceof Array&&(n.checked?n.setChecked(!0,!0):n.store.checkStrictly||ll(n),r())})):r()},e.prototype.doCreateChildren=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e){t.insertChild(Tt()({data:e},n),void 0,!0)}))},e.prototype.collapse=function(){this.expanded=!1},e.prototype.shouldLoadData=function(){return!0===this.store.lazy&&this.store.load&&!this.loaded},e.prototype.updateLeafState=function(){if(!0!==this.store.lazy||!0===this.loaded||"undefined"===typeof this.isLeafByUser){var e=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}else this.isLeaf=this.isLeafByUser},e.prototype.setChecked=function(e,t,n,r){var i=this;if(this.indeterminate="half"===e,this.checked=!0===e,!this.store.checkStrictly){if(!this.shouldLoadData()||this.store.checkDescendants){var o=cl(this.childNodes),s=o.all,a=o.allWithoutDisable;this.isLeaf||s||!a||(this.checked=!1,e=!1);var c=function(){if(t){for(var n=i.childNodes,o=0,s=n.length;o<s;o++){var a=n[o];r=r||!1!==e;var c=a.disabled?a.checked:r;a.setChecked(c,t,!0,r)}var l=cl(n),u=l.half,d=l.all;d||(i.checked=d,i.indeterminate=u)}};if(this.shouldLoadData())return void this.loadData((function(){c(),ll(i)}),{checked:!1!==e});c()}var l=this.parent;l&&0!==l.level&&(n||ll(l))}},e.prototype.getChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0===this.level)return this.data;var t=this.data;if(!t)return null;var n=this.store.props,r="children";return n&&(r=n.children||"children"),void 0===t[r]&&(t[r]=null),e&&!t[r]&&(t[r]=[]),t[r]},e.prototype.updateChildren=function(){var e=this,t=this.getChildren()||[],n=this.childNodes.map((function(e){return e.data})),r={},i=[];t.forEach((function(e,t){var o=e[nl],s=!!o&&Object(v["arrayFindIndex"])(n,(function(e){return e[nl]===o}))>=0;s?r[o]={index:t,data:e}:i.push({index:t,data:e})})),this.store.lazy||n.forEach((function(t){r[t[nl]]||e.removeChildByData(t)})),i.forEach((function(t){var n=t.index,r=t.data;e.insertChild({data:r},n)})),this.updateLeafState()},e.prototype.loadData=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!0!==this.store.lazy||!this.store.load||this.loaded||this.loading&&!Object.keys(n).length)e&&e.call(this);else{this.loading=!0;var r=function(r){t.loaded=!0,t.loading=!1,t.childNodes=[],t.doCreateChildren(r,n),t.updateLeafState(),e&&e.call(t,r)};this.store.load(this,r)}},sl(e,[{key:"label",get:function(){return ul(this,"label")}},{key:"key",get:function(){var e=this.store.key;return this.data?this.data[e]:null}},{key:"disabled",get:function(){return ul(this,"disabled")}},{key:"nextSibling",get:function(){var e=this.parent;if(e){var t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}},{key:"previousSibling",get:function(){var e=this.parent;if(e){var t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}}]),e}(),pl=hl,fl="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function gl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ml=function(){function e(t){var n=this;for(var r in gl(this,e),this.currentNode=null,this.currentNodeKey=null,t)t.hasOwnProperty(r)&&(this[r]=t[r]);if(this.nodesMap={},this.root=new pl({data:this.data,store:this}),this.lazy&&this.load){var i=this.load;i(this.root,(function(e){n.root.doCreateChildren(e),n._initDefaultCheckedNodes()}))}else this._initDefaultCheckedNodes()}return e.prototype.filter=function(e){var t=this.filterNodeMethod,n=this.lazy,r=function r(i){var o=i.root?i.root.childNodes:i.childNodes;if(o.forEach((function(n){n.visible=t.call(n,e,n.data,n),r(n)})),!i.visible&&o.length){var s=!0;s=!o.some((function(e){return e.visible})),i.root?i.root.visible=!1===s:i.visible=!1===s}e&&(!i.visible||i.isLeaf||n||i.expand())};r(this)},e.prototype.setData=function(e){var t=e!==this.root.data;t?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()},e.prototype.getNode=function(e){if(e instanceof pl)return e;var t="object"!==("undefined"===typeof e?"undefined":fl(e))?e:il(this.key,e);return this.nodesMap[t]||null},e.prototype.insertBefore=function(e,t){var n=this.getNode(t);n.parent.insertBefore({data:e},n)},e.prototype.insertAfter=function(e,t){var n=this.getNode(t);n.parent.insertAfter({data:e},n)},e.prototype.remove=function(e){var t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))},e.prototype.append=function(e,t){var n=t?this.getNode(t):this.root;n&&n.insertChild({data:e})},e.prototype._initDefaultCheckedNodes=function(){var e=this,t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach((function(t){var r=n[t];r&&r.setChecked(!0,!e.checkStrictly)}))},e.prototype._initDefaultCheckedNode=function(e){var t=this.defaultCheckedKeys||[];-1!==t.indexOf(e.key)&&e.setChecked(!0,!this.checkStrictly)},e.prototype.setDefaultCheckedKey=function(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())},e.prototype.registerNode=function(e){var t=this.key;if(t&&e&&e.data){var n=e.key;void 0!==n&&(this.nodesMap[e.key]=e)}},e.prototype.deregisterNode=function(e){var t=this,n=this.key;n&&e&&e.data&&(e.childNodes.forEach((function(e){t.deregisterNode(e)})),delete this.nodesMap[e.key])},e.prototype.getCheckedNodes=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=function r(i){var o=i.root?i.root.childNodes:i.childNodes;o.forEach((function(i){(i.checked||t&&i.indeterminate)&&(!e||e&&i.isLeaf)&&n.push(i.data),r(i)}))};return r(this),n},e.prototype.getCheckedKeys=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getCheckedNodes(t).map((function(t){return(t||{})[e.key]}))},e.prototype.getHalfCheckedNodes=function(){var e=[],t=function t(n){var r=n.root?n.root.childNodes:n.childNodes;r.forEach((function(n){n.indeterminate&&e.push(n.data),t(n)}))};return t(this),e},e.prototype.getHalfCheckedKeys=function(){var e=this;return this.getHalfCheckedNodes().map((function(t){return(t||{})[e.key]}))},e.prototype._getAllNodes=function(){var e=[],t=this.nodesMap;for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},e.prototype.updateChildren=function(e,t){var n=this.nodesMap[e];if(n){for(var r=n.childNodes,i=r.length-1;i>=0;i--){var o=r[i];this.remove(o.data)}for(var s=0,a=t.length;s<a;s++){var c=t[s];this.append(c,n.data)}}},e.prototype._setCheckedKeys=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2],r=this._getAllNodes().sort((function(e,t){return t.level-e.level})),i=Object.create(null),o=Object.keys(n);r.forEach((function(e){return e.setChecked(!1,!1)}));for(var s=0,a=r.length;s<a;s++){var c=r[s],l=c.data[e].toString(),u=o.indexOf(l)>-1;if(u){var d=c.parent;while(d&&d.level>0)i[d.data[e]]=!0,d=d.parent;c.isLeaf||this.checkStrictly?c.setChecked(!0,!1):(c.setChecked(!0,!0),t&&function(){c.setChecked(!1,!1);var e=function e(t){var n=t.childNodes;n.forEach((function(t){t.isLeaf||t.setChecked(!1,!1),e(t)}))};e(c)}())}else c.checked&&!i[l]&&c.setChecked(!1,!1)}},e.prototype.setCheckedNodes=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.key,r={};e.forEach((function(e){r[(e||{})[n]]=!0})),this._setCheckedKeys(n,t,r)},e.prototype.setCheckedKeys=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.defaultCheckedKeys=e;var n=this.key,r={};e.forEach((function(e){r[e]=!0})),this._setCheckedKeys(n,t,r)},e.prototype.setDefaultExpandedKeys=function(e){var t=this;e=e||[],this.defaultExpandedKeys=e,e.forEach((function(e){var n=t.getNode(e);n&&n.expand(null,t.autoExpandParent)}))},e.prototype.setChecked=function(e,t,n){var r=this.getNode(e);r&&r.setChecked(!!t,n)},e.prototype.getCurrentNode=function(){return this.currentNode},e.prototype.setCurrentNode=function(e){var t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0},e.prototype.setUserCurrentNode=function(e){var t=e[this.key],n=this.nodesMap[t];this.setCurrentNode(n)},e.prototype.setCurrentNodeKey=function(e){if(null===e||void 0===e)return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);var t=this.getNode(e);t&&this.setCurrentNode(t)},e}(),_l=ml,vl=function(){var e=this,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{directives:[{name:"show",rawName:"v-show",value:t.node.visible,expression:"node.visible"}],ref:"node",staticClass:"el-tree-node",class:{"is-expanded":t.expanded,"is-current":t.node.isCurrent,"is-hidden":!t.node.visible,"is-focusable":!t.node.disabled,"is-checked":!t.node.disabled&&t.node.checked},attrs:{role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.draggable},on:{click:function(e){return e.stopPropagation(),t.handleClick(e)},contextmenu:function(t){return e.handleContextMenu(t)},dragstart:function(e){return e.stopPropagation(),t.handleDragStart(e)},dragover:function(e){return e.stopPropagation(),t.handleDragOver(e)},dragend:function(e){return e.stopPropagation(),t.handleDragEnd(e)},drop:function(e){return e.stopPropagation(),t.handleDrop(e)}}},[r("div",{staticClass:"el-tree-node__content",style:{"padding-left":(t.node.level-1)*t.tree.indent+"px"}},[r("span",{class:[{"is-leaf":t.node.isLeaf,expanded:!t.node.isLeaf&&t.expanded},"el-tree-node__expand-icon",t.tree.iconClass?t.tree.iconClass:"el-icon-caret-right"],on:{click:function(e){return e.stopPropagation(),t.handleExpandIconClick(e)}}}),t.showCheckbox?r("el-checkbox",{attrs:{indeterminate:t.node.indeterminate,disabled:!!t.node.disabled},on:{change:t.handleCheckChange},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.node.checked,callback:function(e){t.$set(t.node,"checked",e)},expression:"node.checked"}}):t._e(),t.node.loading?r("span",{staticClass:"el-tree-node__loading-icon el-icon-loading"}):t._e(),r("node-content",{attrs:{node:t.node}})],1),r("el-collapse-transition",[!t.renderAfterExpand||t.childNodeRendered?r("div",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"expanded"}],staticClass:"el-tree-node__children",attrs:{role:"group","aria-expanded":t.expanded}},t._l(t.node.childNodes,(function(e){return r("el-tree-node",{key:t.getNodeKey(e),attrs:{"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:e},on:{"node-expand":t.handleChildNodeExpand}})})),1):t._e()])],1)},El=[];vl._withStripped=!0;var Al={name:"ElTreeNode",componentName:"ElTreeNode",mixins:[w.a],props:{node:{default:function(){return{}}},props:{},renderContent:Function,renderAfterExpand:{type:Boolean,default:!0},showCheckbox:{type:Boolean,default:!1}},components:{ElCollapseTransition:ze.a,ElCheckbox:Dr.a,NodeContent:{props:{node:{required:!0}},render:function(e){var t=this.$parent,n=t.tree,r=this.node,i=r.data,o=r.store;return t.renderContent?t.renderContent.call(t._renderProxy,e,{_self:n.$vnode.context,node:r,data:i,store:o}):n.$scopedSlots.default?n.$scopedSlots.default({node:r,data:i}):e("span",{class:"el-tree-node__label"},[r.label])}}},data:function(){return{tree:null,expanded:!1,childNodeRendered:!1,oldChecked:null,oldIndeterminate:null}},watch:{"node.indeterminate":function(e){this.handleSelectChange(this.node.checked,e)},"node.checked":function(e){this.handleSelectChange(e,this.node.indeterminate)},"node.expanded":function(e){var t=this;this.$nextTick((function(){return t.expanded=e})),e&&(this.childNodeRendered=!0)}},methods:{getNodeKey:function(e){return il(this.tree.nodeKey,e.data)},handleSelectChange:function(e,t){this.oldChecked!==e&&this.oldIndeterminate!==t&&this.tree.$emit("check-change",this.node.data,e,t),this.oldChecked=e,this.indeterminate=t},handleClick:function(){var e=this.tree.store;e.setCurrentNode(this.node),this.tree.$emit("current-change",e.currentNode?e.currentNode.data:null,e.currentNode),this.tree.currentNode=this,this.tree.expandOnClickNode&&this.handleExpandIconClick(),this.tree.checkOnClickNode&&!this.node.disabled&&this.handleCheckChange(null,{target:{checked:!this.node.checked}}),this.tree.$emit("node-click",this.node.data,this.node,this)},handleContextMenu:function(e){this.tree._events["node-contextmenu"]&&this.tree._events["node-contextmenu"].length>0&&(e.stopPropagation(),e.preventDefault()),this.tree.$emit("node-contextmenu",e,this.node.data,this.node,this)},handleExpandIconClick:function(){this.node.isLeaf||(this.expanded?(this.tree.$emit("node-collapse",this.node.data,this.node,this),this.node.collapse()):(this.node.expand(),this.$emit("node-expand",this.node.data,this.node,this)))},handleCheckChange:function(e,t){var n=this;this.node.setChecked(t.target.checked,!this.tree.checkStrictly),this.$nextTick((function(){var e=n.tree.store;n.tree.$emit("check",n.node.data,{checkedNodes:e.getCheckedNodes(),checkedKeys:e.getCheckedKeys(),halfCheckedNodes:e.getHalfCheckedNodes(),halfCheckedKeys:e.getHalfCheckedKeys()})}))},handleChildNodeExpand:function(e,t,n){this.broadcast("ElTreeNode","tree-node-expand",t),this.tree.$emit("node-expand",e,t,n)},handleDragStart:function(e){this.tree.draggable&&this.tree.$emit("tree-node-drag-start",e,this)},handleDragOver:function(e){this.tree.draggable&&(this.tree.$emit("tree-node-drag-over",e,this),e.preventDefault())},handleDrop:function(e){e.preventDefault()},handleDragEnd:function(e){this.tree.draggable&&this.tree.$emit("tree-node-drag-end",e,this)}},created:function(){var e=this,t=this.$parent;t.isTree?this.tree=t:this.tree=t.tree;var n=this.tree;n||console.warn("Can not find node's tree.");var r=n.props||{},i=r["children"]||"children";this.$watch("node.data."+i,(function(){e.node.updateChildren()})),this.node.expanded&&(this.expanded=!0,this.childNodeRendered=!0),this.tree.accordion&&this.$on("tree-node-expand",(function(t){e.node!==t&&e.node.collapse()}))}},yl=Al,Sl=a(yl,vl,El,!1,null,null,null);Sl.options.__file="packages/tree/src/tree-node.vue";var bl=Sl.exports,Cl={name:"ElTree",mixins:[w.a],components:{ElTreeNode:bl},data:function(){return{store:null,root:null,currentNode:null,treeItems:null,checkboxItems:[],dragState:{showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0}}},props:{data:{type:Array},emptyText:{type:String,default:function(){return Object(fa["t"])("el.tree.emptyText")}},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{default:function(){return{children:"children",label:"label",disabled:"disabled"}}},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},iconClass:String},computed:{children:{set:function(e){this.data=e},get:function(){return this.data}},treeItemArray:function(){return Array.prototype.slice.call(this.treeItems)},isEmpty:function(){var e=this.root.childNodes;return!e||0===e.length||e.every((function(e){var t=e.visible;return!t}))}},watch:{defaultCheckedKeys:function(e){this.store.setDefaultCheckedKey(e)},defaultExpandedKeys:function(e){this.store.defaultExpandedKeys=e,this.store.setDefaultExpandedKeys(e)},data:function(e){this.store.setData(e)},checkboxItems:function(e){Array.prototype.forEach.call(e,(function(e){e.setAttribute("tabindex",-1)}))},checkStrictly:function(e){this.store.checkStrictly=e}},methods:{filter:function(e){if(!this.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");this.store.filter(e)},getNodeKey:function(e){return il(this.nodeKey,e.data)},getNodePath:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");var t=this.store.getNode(e);if(!t)return[];var n=[t.data],r=t.parent;while(r&&r!==this.root)n.push(r.data),r=r.parent;return n.reverse()},getCheckedNodes:function(e,t){return this.store.getCheckedNodes(e,t)},getCheckedKeys:function(e){return this.store.getCheckedKeys(e)},getCurrentNode:function(){var e=this.store.getCurrentNode();return e?e.data:null},getCurrentKey:function(){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");var e=this.getCurrentNode();return e?e[this.nodeKey]:null},setCheckedNodes:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");this.store.setCheckedNodes(e,t)},setCheckedKeys:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");this.store.setCheckedKeys(e,t)},setChecked:function(e,t,n){this.store.setChecked(e,t,n)},getHalfCheckedNodes:function(){return this.store.getHalfCheckedNodes()},getHalfCheckedKeys:function(){return this.store.getHalfCheckedKeys()},setCurrentNode:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");this.store.setUserCurrentNode(e)},setCurrentKey:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");this.store.setCurrentNodeKey(e)},getNode:function(e){return this.store.getNode(e)},remove:function(e){this.store.remove(e)},append:function(e,t){this.store.append(e,t)},insertBefore:function(e,t){this.store.insertBefore(e,t)},insertAfter:function(e,t){this.store.insertAfter(e,t)},handleNodeExpand:function(e,t,n){this.broadcast("ElTreeNode","tree-node-expand",t),this.$emit("node-expand",e,t,n)},updateKeyChildren:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");this.store.updateChildren(e,t)},initTabIndex:function(){this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]");var e=this.$el.querySelectorAll(".is-checked[role=treeitem]");e.length?e[0].setAttribute("tabindex",0):this.treeItems[0]&&this.treeItems[0].setAttribute("tabindex",0)},handleKeydown:function(e){var t=e.target;if(-1!==t.className.indexOf("el-tree-node")){var n=e.keyCode;this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]");var r=this.treeItemArray.indexOf(t),i=void 0;[38,40].indexOf(n)>-1&&(e.preventDefault(),i=38===n?0!==r?r-1:0:r<this.treeItemArray.length-1?r+1:0,this.treeItemArray[i].focus()),[37,39].indexOf(n)>-1&&(e.preventDefault(),t.click());var o=t.querySelector('[type="checkbox"]');[13,32].indexOf(n)>-1&&o&&(e.preventDefault(),o.click())}}},created:function(){var e=this;this.isTree=!0,this.store=new _l({key:this.nodeKey,data:this.data,lazy:this.lazy,props:this.props,load:this.load,currentNodeKey:this.currentNodeKey,checkStrictly:this.checkStrictly,checkDescendants:this.checkDescendants,defaultCheckedKeys:this.defaultCheckedKeys,defaultExpandedKeys:this.defaultExpandedKeys,autoExpandParent:this.autoExpandParent,defaultExpandAll:this.defaultExpandAll,filterNodeMethod:this.filterNodeMethod}),this.root=this.store.root;var t=this.dragState;this.$on("tree-node-drag-start",(function(n,r){if("function"===typeof e.allowDrag&&!e.allowDrag(r.node))return n.preventDefault(),!1;n.dataTransfer.effectAllowed="move";try{n.dataTransfer.setData("text/plain","")}catch(i){}t.draggingNode=r,e.$emit("node-drag-start",r.node,n)})),this.$on("tree-node-drag-over",(function(n,r){var i=ol(n.target,"ElTreeNode"),o=t.dropNode;o&&o!==i&&Object(Ue["removeClass"])(o.$el,"is-drop-inner");var s=t.draggingNode;if(s&&i){var a=!0,c=!0,l=!0,u=!0;"function"===typeof e.allowDrop&&(a=e.allowDrop(s.node,i.node,"prev"),u=c=e.allowDrop(s.node,i.node,"inner"),l=e.allowDrop(s.node,i.node,"next")),n.dataTransfer.dropEffect=c?"move":"none",(a||c||l)&&o!==i&&(o&&e.$emit("node-drag-leave",s.node,o.node,n),e.$emit("node-drag-enter",s.node,i.node,n)),(a||c||l)&&(t.dropNode=i),i.node.nextSibling===s.node&&(l=!1),i.node.previousSibling===s.node&&(a=!1),i.node.contains(s.node,!1)&&(c=!1),(s.node===i.node||s.node.contains(i.node))&&(a=!1,c=!1,l=!1);var d=i.$el.getBoundingClientRect(),h=e.$el.getBoundingClientRect(),p=void 0,f=a?c?.25:l?.45:1:-1,g=l?c?.75:a?.55:0:1,m=-9999,_=n.clientY-d.top;p=_<d.height*f?"before":_>d.height*g?"after":c?"inner":"none";var v=i.$el.querySelector(".el-tree-node__expand-icon").getBoundingClientRect(),E=e.$refs.dropIndicator;"before"===p?m=v.top-h.top:"after"===p&&(m=v.bottom-h.top),E.style.top=m+"px",E.style.left=v.right-h.left+"px","inner"===p?Object(Ue["addClass"])(i.$el,"is-drop-inner"):Object(Ue["removeClass"])(i.$el,"is-drop-inner"),t.showDropIndicator="before"===p||"after"===p,t.allowDrop=t.showDropIndicator||u,t.dropType=p,e.$emit("node-drag-over",s.node,i.node,n)}})),this.$on("tree-node-drag-end",(function(n){var r=t.draggingNode,i=t.dropType,o=t.dropNode;if(n.preventDefault(),n.dataTransfer.dropEffect="move",r&&o){var s={data:r.node.data};"none"!==i&&r.node.remove(),"before"===i?o.node.parent.insertBefore(s,o.node):"after"===i?o.node.parent.insertAfter(s,o.node):"inner"===i&&o.node.insertChild(s),"none"!==i&&e.store.registerNode(s),Object(Ue["removeClass"])(o.$el,"is-drop-inner"),e.$emit("node-drag-end",r.node,o.node,i,n),"none"!==i&&e.$emit("node-drop",r.node,o.node,i,n)}r&&!o&&e.$emit("node-drag-end",r.node,null,i,n),t.showDropIndicator=!1,t.draggingNode=null,t.dropNode=null,t.allowDrop=!0}))},mounted:function(){this.initTabIndex(),this.$el.addEventListener("keydown",this.handleKeydown)},updated:function(){this.treeItems=this.$el.querySelectorAll("[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]")}},Tl=Cl,Il=a(Tl,el,tl,!1,null,null,null);Il.options.__file="packages/tree/src/tree.vue";var Rl=Il.exports;Rl.install=function(e){e.component(Rl.name,Rl)};var wl=Rl,kl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-alert-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-alert",class:[e.typeClass,e.center?"is-center":"","is-"+e.effect],attrs:{role:"alert"}},[e.showIcon?n("i",{staticClass:"el-alert__icon",class:[e.iconClass,e.isBigIcon]}):e._e(),n("div",{staticClass:"el-alert__content"},[e.title||e.$slots.title?n("span",{staticClass:"el-alert__title",class:[e.isBoldTitle]},[e._t("title",[e._v(e._s(e.title))])],2):e._e(),e.$slots.default&&!e.description?n("p",{staticClass:"el-alert__description"},[e._t("default")],2):e._e(),e.description&&!e.$slots.default?n("p",{staticClass:"el-alert__description"},[e._v(e._s(e.description))]):e._e(),n("i",{directives:[{name:"show",rawName:"v-show",value:e.closable,expression:"closable"}],staticClass:"el-alert__closebtn",class:{"is-customed":""!==e.closeText,"el-icon-close":""===e.closeText},on:{click:function(t){e.close()}}},[e._v(e._s(e.closeText))])])])])},Ol=[];kl._withStripped=!0;var Nl={success:"el-icon-success",warning:"el-icon-warning",error:"el-icon-error"},Ll={name:"ElAlert",props:{title:{type:String,default:""},description:{type:String,default:""},type:{type:String,default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,default:"light",validator:function(e){return-1!==["light","dark"].indexOf(e)}}},data:function(){return{visible:!0}},methods:{close:function(){this.visible=!1,this.$emit("close")}},computed:{typeClass:function(){return"el-alert--"+this.type},iconClass:function(){return Nl[this.type]||"el-icon-info"},isBigIcon:function(){return this.description||this.$slots.default?"is-big":""},isBoldTitle:function(){return this.description||this.$slots.default?"is-bold":""}}},Pl=Ll,Dl=a(Pl,kl,Ol,!1,null,null,null);Dl.options.__file="packages/alert/src/main.vue";var Ml=Dl.exports;Ml.install=function(e){e.component(Ml.name,Ml)};var xl=Ml,Bl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-notification-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["el-notification",e.customClass,e.horizontalClass],style:e.positionStyle,attrs:{role:"alert"},on:{mouseenter:function(t){e.clearTimer()},mouseleave:function(t){e.startTimer()},click:e.click}},[e.type||e.iconClass?n("i",{staticClass:"el-notification__icon",class:[e.typeClass,e.iconClass]}):e._e(),n("div",{staticClass:"el-notification__group",class:{"is-with-icon":e.typeClass||e.iconClass}},[n("h2",{staticClass:"el-notification__title",domProps:{textContent:e._s(e.title)}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.message,expression:"message"}],staticClass:"el-notification__content"},[e._t("default",[e.dangerouslyUseHTMLString?n("p",{domProps:{innerHTML:e._s(e.message)}}):n("p",[e._v(e._s(e.message))])])],2),e.showClose?n("div",{staticClass:"el-notification__closeBtn el-icon-close",on:{click:function(t){return t.stopPropagation(),e.close(t)}}}):e._e()])])])},Ul=[];Bl._withStripped=!0;var Fl={success:"success",info:"info",warning:"warning",error:"error"},Vl={data:function(){return{visible:!1,title:"",message:"",duration:4500,type:"",showClose:!0,customClass:"",iconClass:"",onClose:null,onClick:null,closed:!1,verticalOffset:0,timer:null,dangerouslyUseHTMLString:!1,position:"top-right"}},computed:{typeClass:function(){return this.type&&Fl[this.type]?"el-icon-"+Fl[this.type]:""},horizontalClass:function(){return this.position.indexOf("right")>-1?"right":"left"},verticalProperty:function(){return/^top-/.test(this.position)?"top":"bottom"},positionStyle:function(){var e;return e={},e[this.verticalProperty]=this.verticalOffset+"px",e}},watch:{closed:function(e){e&&(this.visible=!1,this.$el.addEventListener("transitionend",this.destroyElement))}},methods:{destroyElement:function(){this.$el.removeEventListener("transitionend",this.destroyElement),this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},click:function(){"function"===typeof this.onClick&&this.onClick()},close:function(){this.closed=!0,"function"===typeof this.onClose&&this.onClose()},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration))},keydown:function(e){46===e.keyCode||8===e.keyCode?this.clearTimer():27===e.keyCode?this.closed||this.close():this.startTimer()}},mounted:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration)),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},jl=Vl,Gl=a(jl,Bl,Ul,!1,null,null,null);Gl.options.__file="packages/notification/src/main.vue";var Hl=Gl.exports,Ql=Gr.a.extend(Hl),Wl=void 0,ql=[],zl=1,Zl=function e(t){if(!Gr.a.prototype.$isServer){t=Tt()({},t);var n=t.onClose,r="notification_"+zl++,i=t.position||"top-right";t.onClose=function(){e.close(r,n)},Wl=new Ql({data:t}),Object(Ca["isVNode"])(t.message)&&(Wl.$slots.default=[t.message],t.message="REPLACED_BY_VNODE"),Wl.id=r,Wl.$mount(),document.body.appendChild(Wl.$el),Wl.visible=!0,Wl.dom=Wl.$el,Wl.dom.style.zIndex=b["PopupManager"].nextZIndex();var o=t.offset||0;return ql.filter((function(e){return e.position===i})).forEach((function(e){o+=e.$el.offsetHeight+16})),o+=16,Wl.verticalOffset=o,ql.push(Wl),Wl}};["success","warning","info","error"].forEach((function(e){Zl[e]=function(t){return("string"===typeof t||Object(Ca["isVNode"])(t))&&(t={message:t}),t.type=e,Zl(t)}})),Zl.close=function(e,t){var n=-1,r=ql.length,i=ql.filter((function(t,r){return t.id===e&&(n=r,!0)}))[0];if(i&&("function"===typeof t&&t(i),ql.splice(n,1),!(r<=1)))for(var o=i.position,s=i.dom.offsetHeight,a=n;a<r-1;a++)ql[a].position===o&&(ql[a].dom.style[i.verticalProperty]=parseInt(ql[a].dom.style[i.verticalProperty],10)-s-16+"px")},Zl.closeAll=function(){for(var e=ql.length-1;e>=0;e--)ql[e].close()};var $l=Zl,Kl=$l,Yl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-slider",class:{"is-vertical":e.vertical,"el-slider--with-input":e.showInput},attrs:{role:"slider","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled}},[e.showInput&&!e.range?n("el-input-number",{ref:"input",staticClass:"el-slider__input",attrs:{step:e.step,disabled:e.sliderDisabled,controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:e.inputSize},on:{change:e.emitChange},model:{value:e.firstValue,callback:function(t){e.firstValue=t},expression:"firstValue"}}):e._e(),n("div",{ref:"slider",staticClass:"el-slider__runway",class:{"show-input":e.showInput,disabled:e.sliderDisabled},style:e.runwayStyle,on:{click:e.onSliderClick}},[n("div",{staticClass:"el-slider__bar",style:e.barStyle}),n("slider-button",{ref:"button1",attrs:{vertical:e.vertical,"tooltip-class":e.tooltipClass},model:{value:e.firstValue,callback:function(t){e.firstValue=t},expression:"firstValue"}}),e.range?n("slider-button",{ref:"button2",attrs:{vertical:e.vertical,"tooltip-class":e.tooltipClass},model:{value:e.secondValue,callback:function(t){e.secondValue=t},expression:"secondValue"}}):e._e(),e._l(e.stops,(function(t,r){return e.showStops?n("div",{key:r,staticClass:"el-slider__stop",style:e.getStopStyle(t)}):e._e()})),e.markList.length>0?[n("div",e._l(e.markList,(function(t,r){return n("div",{key:r,staticClass:"el-slider__stop el-slider__marks-stop",style:e.getStopStyle(t.position)})})),0),n("div",{staticClass:"el-slider__marks"},e._l(e.markList,(function(t,r){return n("slider-marker",{key:r,style:e.getStopStyle(t.position),attrs:{mark:t.mark}})})),1)]:e._e()],2)],1)},Jl=[];Yl._withStripped=!0;var Xl=n(41),eu=n.n(Xl),tu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"button",staticClass:"el-slider__button-wrapper",class:{hover:e.hovering,dragging:e.dragging},style:e.wrapperStyle,attrs:{tabindex:"0"},on:{mouseenter:e.handleMouseEnter,mouseleave:e.handleMouseLeave,mousedown:e.onButtonDown,touchstart:e.onButtonDown,focus:e.handleMouseEnter,blur:e.handleMouseLeave,keydown:[function(t){return!("button"in t)&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.onLeftKeyDown(t)},function(t){return!("button"in t)&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])||"button"in t&&2!==t.button?null:e.onRightKeyDown(t)},function(t){return!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.onLeftKeyDown(t))},function(t){return!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.onRightKeyDown(t))}]}},[n("el-tooltip",{ref:"tooltip",attrs:{placement:"top","popper-class":e.tooltipClass,disabled:!e.showTooltip}},[n("span",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.formatValue))]),n("div",{staticClass:"el-slider__button",class:{hover:e.hovering,dragging:e.dragging}})])],1)},nu=[];tu._withStripped=!0;var ru={name:"ElSliderButton",components:{ElTooltip:it.a},props:{value:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:String},data:function(){return{hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:null,oldValue:this.value}},computed:{disabled:function(){return this.$parent.sliderDisabled},max:function(){return this.$parent.max},min:function(){return this.$parent.min},step:function(){return this.$parent.step},showTooltip:function(){return this.$parent.showTooltip},precision:function(){return this.$parent.precision},currentPosition:function(){return(this.value-this.min)/(this.max-this.min)*100+"%"},enableFormat:function(){return this.$parent.formatTooltip instanceof Function},formatValue:function(){return this.enableFormat&&this.$parent.formatTooltip(this.value)||this.value},wrapperStyle:function(){return this.vertical?{bottom:this.currentPosition}:{left:this.currentPosition}}},watch:{dragging:function(e){this.$parent.dragging=e}},methods:{displayTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!0)},hideTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!1)},handleMouseEnter:function(){this.hovering=!0,this.displayTooltip()},handleMouseLeave:function(){this.hovering=!1,this.hideTooltip()},onButtonDown:function(e){this.disabled||(e.preventDefault(),this.onDragStart(e),window.addEventListener("mousemove",this.onDragging),window.addEventListener("touchmove",this.onDragging),window.addEventListener("mouseup",this.onDragEnd),window.addEventListener("touchend",this.onDragEnd),window.addEventListener("contextmenu",this.onDragEnd))},onLeftKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)-this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitChange())},onRightKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)+this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitChange())},onDragStart:function(e){this.dragging=!0,this.isClick=!0,"touchstart"===e.type&&(e.clientY=e.touches[0].clientY,e.clientX=e.touches[0].clientX),this.vertical?this.startY=e.clientY:this.startX=e.clientX,this.startPosition=parseFloat(this.currentPosition),this.newPosition=this.startPosition},onDragging:function(e){if(this.dragging){this.isClick=!1,this.displayTooltip(),this.$parent.resetSize();var t=0;"touchmove"===e.type&&(e.clientY=e.touches[0].clientY,e.clientX=e.touches[0].clientX),this.vertical?(this.currentY=e.clientY,t=(this.startY-this.currentY)/this.$parent.sliderSize*100):(this.currentX=e.clientX,t=(this.currentX-this.startX)/this.$parent.sliderSize*100),this.newPosition=this.startPosition+t,this.setPosition(this.newPosition)}},onDragEnd:function(){var e=this;this.dragging&&(setTimeout((function(){e.dragging=!1,e.hideTooltip(),e.isClick||(e.setPosition(e.newPosition),e.$parent.emitChange())}),0),window.removeEventListener("mousemove",this.onDragging),window.removeEventListener("touchmove",this.onDragging),window.removeEventListener("mouseup",this.onDragEnd),window.removeEventListener("touchend",this.onDragEnd),window.removeEventListener("contextmenu",this.onDragEnd))},setPosition:function(e){var t=this;if(null!==e&&!isNaN(e)){e<0?e=0:e>100&&(e=100);var n=100/((this.max-this.min)/this.step),r=Math.round(e/n),i=r*n*(this.max-this.min)*.01+this.min;i=parseFloat(i.toFixed(this.precision)),this.$emit("input",i),this.$nextTick((function(){t.displayTooltip(),t.$refs.tooltip&&t.$refs.tooltip.updatePopper()})),this.dragging||this.value===this.oldValue||(this.oldValue=this.value)}}}},iu=ru,ou=a(iu,tu,nu,!1,null,null,null);ou.options.__file="packages/slider/src/button.vue";var su=ou.exports,au={name:"ElMarker",props:{mark:{type:[String,Object]}},render:function(){var e=arguments[0],t="string"===typeof this.mark?this.mark:this.mark.label;return e("div",{class:"el-slider__marks-text",style:this.mark.style||{}},[t])}},cu={name:"ElSlider",mixins:[w.a],inject:{elForm:{default:""}},props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},value:{type:[Number,Array],default:0},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},inputSize:{type:String,default:"small"},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:Function,disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String},debounce:{type:Number,default:300},label:{type:String},tooltipClass:String,marks:Object},components:{ElInputNumber:eu.a,SliderButton:su,SliderMarker:au},data:function(){return{firstValue:null,secondValue:null,oldValue:null,dragging:!1,sliderSize:1}},watch:{value:function(e,t){this.dragging||Array.isArray(e)&&Array.isArray(t)&&e.every((function(e,n){return e===t[n]}))||this.setValues()},dragging:function(e){e||this.setValues()},firstValue:function(e){this.range?this.$emit("input",[this.minValue,this.maxValue]):this.$emit("input",e)},secondValue:function(){this.range&&this.$emit("input",[this.minValue,this.maxValue])},min:function(){this.setValues()},max:function(){this.setValues()}},methods:{valueChanged:function(){var e=this;return this.range?![this.minValue,this.maxValue].every((function(t,n){return t===e.oldValue[n]})):this.value!==this.oldValue},setValues:function(){if(this.min>this.max)console.error("[Element Error][Slider]min should not be greater than max.");else{var e=this.value;this.range&&Array.isArray(e)?e[1]<this.min?this.$emit("input",[this.min,this.min]):e[0]>this.max?this.$emit("input",[this.max,this.max]):e[0]<this.min?this.$emit("input",[this.min,e[1]]):e[1]>this.max?this.$emit("input",[e[0],this.max]):(this.firstValue=e[0],this.secondValue=e[1],this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",[this.minValue,this.maxValue]),this.oldValue=e.slice())):this.range||"number"!==typeof e||isNaN(e)||(e<this.min?this.$emit("input",this.min):e>this.max?this.$emit("input",this.max):(this.firstValue=e,this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",e),this.oldValue=e)))}},setPosition:function(e){var t=this.min+e*(this.max-this.min)/100;if(this.range){var n=void 0;n=Math.abs(this.minValue-t)<Math.abs(this.maxValue-t)?this.firstValue<this.secondValue?"button1":"button2":this.firstValue>this.secondValue?"button1":"button2",this.$refs[n].setPosition(e)}else this.$refs.button1.setPosition(e)},onSliderClick:function(e){if(!this.sliderDisabled&&!this.dragging){if(this.resetSize(),this.vertical){var t=this.$refs.slider.getBoundingClientRect().bottom;this.setPosition((t-e.clientY)/this.sliderSize*100)}else{var n=this.$refs.slider.getBoundingClientRect().left;this.setPosition((e.clientX-n)/this.sliderSize*100)}this.emitChange()}},resetSize:function(){this.$refs.slider&&(this.sliderSize=this.$refs.slider["client"+(this.vertical?"Height":"Width")])},emitChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.range?[e.minValue,e.maxValue]:e.value)}))},getStopStyle:function(e){return this.vertical?{bottom:e+"%"}:{left:e+"%"}}},computed:{stops:function(){var e=this;if(!this.showStops||this.min>this.max)return[];if(0===this.step)return[];for(var t=(this.max-this.min)/this.step,n=100*this.step/(this.max-this.min),r=[],i=1;i<t;i++)r.push(i*n);return this.range?r.filter((function(t){return t<100*(e.minValue-e.min)/(e.max-e.min)||t>100*(e.maxValue-e.min)/(e.max-e.min)})):r.filter((function(t){return t>100*(e.firstValue-e.min)/(e.max-e.min)}))},markList:function(){var e=this;if(!this.marks)return[];var t=Object.keys(this.marks);return t.map(parseFloat).sort((function(e,t){return e-t})).filter((function(t){return t<=e.max&&t>=e.min})).map((function(t){return{point:t,position:100*(t-e.min)/(e.max-e.min),mark:e.marks[t]}}))},minValue:function(){return Math.min(this.firstValue,this.secondValue)},maxValue:function(){return Math.max(this.firstValue,this.secondValue)},barSize:function(){return this.range?100*(this.maxValue-this.minValue)/(this.max-this.min)+"%":100*(this.firstValue-this.min)/(this.max-this.min)+"%"},barStart:function(){return this.range?100*(this.minValue-this.min)/(this.max-this.min)+"%":"0%"},precision:function(){var e=[this.min,this.max,this.step].map((function(e){var t=(""+e).split(".")[1];return t?t.length:0}));return Math.max.apply(null,e)},runwayStyle:function(){return this.vertical?{height:this.height}:{}},barStyle:function(){return this.vertical?{height:this.barSize,bottom:this.barStart}:{width:this.barSize,left:this.barStart}},sliderDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},mounted:function(){var e=void 0;this.range?(Array.isArray(this.value)?(this.firstValue=Math.max(this.min,this.value[0]),this.secondValue=Math.min(this.max,this.value[1])):(this.firstValue=this.min,this.secondValue=this.max),this.oldValue=[this.firstValue,this.secondValue],e=this.firstValue+"-"+this.secondValue):("number"!==typeof this.value||isNaN(this.value)?this.firstValue=this.min:this.firstValue=Math.min(this.max,Math.max(this.min,this.value)),this.oldValue=this.firstValue,e=this.firstValue),this.$el.setAttribute("aria-valuetext",e),this.$el.setAttribute("aria-label",this.label?this.label:"slider between "+this.min+" and "+this.max),this.resetSize(),window.addEventListener("resize",this.resetSize)},beforeDestroy:function(){window.removeEventListener("resize",this.resetSize)}},lu=cu,uu=a(lu,Yl,Jl,!1,null,null,null);uu.options.__file="packages/slider/src/main.vue";var du=uu.exports;du.install=function(e){e.component(du.name,du)};var hu=du,pu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-loading-fade"},on:{"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-loading-mask",class:[e.customClass,{"is-fullscreen":e.fullscreen}],style:{backgroundColor:e.background||""}},[n("div",{staticClass:"el-loading-spinner"},[e.spinner?n("i",{class:e.spinner}):n("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[n("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]),e.text?n("p",{staticClass:"el-loading-text"},[e._v(e._s(e.text))]):e._e()])])])},fu=[];pu._withStripped=!0;var gu={data:function(){return{text:null,spinner:null,background:null,fullscreen:!0,visible:!1,customClass:""}},methods:{handleAfterLeave:function(){this.$emit("after-leave")},setText:function(e){this.text=e}}},mu=gu,_u=a(mu,pu,fu,!1,null,null,null);_u.options.__file="packages/loading/src/loading.vue";var vu=_u.exports,Eu=n(32),Au=n.n(Eu),yu=Gr.a.extend(vu),Su={install:function(e){if(!e.prototype.$isServer){var t=function(t,r){r.value?e.nextTick((function(){r.modifiers.fullscreen?(t.originalPosition=Object(Ue["getStyle"])(document.body,"position"),t.originalOverflow=Object(Ue["getStyle"])(document.body,"overflow"),t.maskStyle.zIndex=b["PopupManager"].nextZIndex(),Object(Ue["addClass"])(t.mask,"is-fullscreen"),n(document.body,t,r)):(Object(Ue["removeClass"])(t.mask,"is-fullscreen"),r.modifiers.body?(t.originalPosition=Object(Ue["getStyle"])(document.body,"position"),["top","left"].forEach((function(e){var n="top"===e?"scrollTop":"scrollLeft";t.maskStyle[e]=t.getBoundingClientRect()[e]+document.body[n]+document.documentElement[n]-parseInt(Object(Ue["getStyle"])(document.body,"margin-"+e),10)+"px"})),["height","width"].forEach((function(e){t.maskStyle[e]=t.getBoundingClientRect()[e]+"px"})),n(document.body,t,r)):(t.originalPosition=Object(Ue["getStyle"])(t,"position"),n(t,t,r)))})):(Au()(t.instance,(function(e){if(t.instance.hiding){t.domVisible=!1;var n=r.modifiers.fullscreen||r.modifiers.body?document.body:t;Object(Ue["removeClass"])(n,"el-loading-parent--relative"),Object(Ue["removeClass"])(n,"el-loading-parent--hidden"),t.instance.hiding=!1}}),300,!0),t.instance.visible=!1,t.instance.hiding=!0)},n=function(t,n,r){n.domVisible||"none"===Object(Ue["getStyle"])(n,"display")||"hidden"===Object(Ue["getStyle"])(n,"visibility")?n.domVisible&&!0===n.instance.hiding&&(n.instance.visible=!0,n.instance.hiding=!1):(Object.keys(n.maskStyle).forEach((function(e){n.mask.style[e]=n.maskStyle[e]})),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(Ue["addClass"])(t,"el-loading-parent--relative"),r.modifiers.fullscreen&&r.modifiers.lock&&Object(Ue["addClass"])(t,"el-loading-parent--hidden"),n.domVisible=!0,t.appendChild(n.mask),e.nextTick((function(){n.instance.hiding?n.instance.$emit("after-leave"):n.instance.visible=!0})),n.domInserted=!0)};e.directive("loading",{bind:function(e,n,r){var i=e.getAttribute("element-loading-text"),o=e.getAttribute("element-loading-spinner"),s=e.getAttribute("element-loading-background"),a=e.getAttribute("element-loading-custom-class"),c=r.context,l=new yu({el:document.createElement("div"),data:{text:c&&c[i]||i,spinner:c&&c[o]||o,background:c&&c[s]||s,customClass:c&&c[a]||a,fullscreen:!!n.modifiers.fullscreen}});e.instance=l,e.mask=l.$el,e.maskStyle={},n.value&&t(e,n)},update:function(e,n){e.instance.setText(e.getAttribute("element-loading-text")),n.oldValue!==n.value&&t(e,n)},unbind:function(e,n){e.domInserted&&(e.mask&&e.mask.parentNode&&e.mask.parentNode.removeChild(e.mask),t(e,{value:!1,modifiers:n.modifiers})),e.instance&&e.instance.$destroy()}})}}},bu=Su,Cu=Gr.a.extend(vu),Tu={text:null,fullscreen:!0,body:!1,lock:!1,customClass:""},Iu=void 0;Cu.prototype.originalPosition="",Cu.prototype.originalOverflow="",Cu.prototype.close=function(){var e=this;this.fullscreen&&(Iu=void 0),Au()(this,(function(t){var n=e.fullscreen||e.body?document.body:e.target;Object(Ue["removeClass"])(n,"el-loading-parent--relative"),Object(Ue["removeClass"])(n,"el-loading-parent--hidden"),e.$el&&e.$el.parentNode&&e.$el.parentNode.removeChild(e.$el),e.$destroy()}),300),this.visible=!1};var Ru=function(e,t,n){var r={};e.fullscreen?(n.originalPosition=Object(Ue["getStyle"])(document.body,"position"),n.originalOverflow=Object(Ue["getStyle"])(document.body,"overflow"),r.zIndex=b["PopupManager"].nextZIndex()):e.body?(n.originalPosition=Object(Ue["getStyle"])(document.body,"position"),["top","left"].forEach((function(t){var n="top"===t?"scrollTop":"scrollLeft";r[t]=e.target.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]+"px"})),["height","width"].forEach((function(t){r[t]=e.target.getBoundingClientRect()[t]+"px"}))):n.originalPosition=Object(Ue["getStyle"])(t,"position"),Object.keys(r).forEach((function(e){n.$el.style[e]=r[e]}))},wu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Gr.a.prototype.$isServer){if(e=Tt()({},Tu,e),"string"===typeof e.target&&(e.target=document.querySelector(e.target)),e.target=e.target||document.body,e.target!==document.body?e.fullscreen=!1:e.body=!0,e.fullscreen&&Iu)return Iu;var t=e.body?document.body:e.target,n=new Cu({el:document.createElement("div"),data:e});return Ru(e,t,n),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(Ue["addClass"])(t,"el-loading-parent--relative"),e.fullscreen&&e.lock&&Object(Ue["addClass"])(t,"el-loading-parent--hidden"),t.appendChild(n.$el),Gr.a.nextTick((function(){n.visible=!0})),e.fullscreen&&(Iu=n),n}},ku=wu,Ou={install:function(e){e.use(bu),e.prototype.$loading=ku},directive:bu,service:ku},Nu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("i",{class:"el-icon-"+e.name})},Lu=[];Nu._withStripped=!0;var Pu={name:"ElIcon",props:{name:String}},Du=Pu,Mu=a(Du,Nu,Lu,!1,null,null,null);Mu.options.__file="packages/icon/src/icon.vue";var xu=Mu.exports;xu.install=function(e){e.component(xu.name,xu)};var Bu=xu,Uu={name:"ElRow",componentName:"ElRow",props:{tag:{type:String,default:"div"},gutter:Number,type:String,justify:{type:String,default:"start"},align:String},computed:{style:function(){var e={};return this.gutter&&(e.marginLeft="-"+this.gutter/2+"px",e.marginRight=e.marginLeft),e}},render:function(e){return e(this.tag,{class:["el-row","start"!==this.justify?"is-justify-"+this.justify:"",this.align?"is-align-"+this.align:"",{"el-row--flex":"flex"===this.type}],style:this.style},this.$slots.default)},install:function(e){e.component(Uu.name,Uu)}},Fu=Uu,Vu="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ju={name:"ElCol",props:{span:{type:Number,default:24},tag:{type:String,default:"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},computed:{gutter:function(){var e=this.$parent;while(e&&"ElRow"!==e.$options.componentName)e=e.$parent;return e?e.gutter:0}},render:function(e){var t=this,n=[],r={};return this.gutter&&(r.paddingLeft=this.gutter/2+"px",r.paddingRight=r.paddingLeft),["span","offset","pull","push"].forEach((function(e){(t[e]||0===t[e])&&n.push("span"!==e?"el-col-"+e+"-"+t[e]:"el-col-"+t[e])})),["xs","sm","md","lg","xl"].forEach((function(e){if("number"===typeof t[e])n.push("el-col-"+e+"-"+t[e]);else if("object"===Vu(t[e])){var r=t[e];Object.keys(r).forEach((function(t){n.push("span"!==t?"el-col-"+e+"-"+t+"-"+r[t]:"el-col-"+e+"-"+r[t])}))}})),e(this.tag,{class:["el-col",n],style:r},this.$slots.default)},install:function(e){e.component(ju.name,ju)}},Gu=ju,Hu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition-group",{class:["el-upload-list","el-upload-list--"+e.listType,{"is-disabled":e.disabled}],attrs:{tag:"ul",name:"el-list"}},e._l(e.files,(function(t){return n("li",{key:t.uid,class:["el-upload-list__item","is-"+t.status,e.focusing?"focusing":""],attrs:{tabindex:"0"},on:{keydown:function(n){if(!("button"in n)&&e._k(n.keyCode,"delete",[8,46],n.key,["Backspace","Delete","Del"]))return null;!e.disabled&&e.$emit("remove",t)},focus:function(t){e.focusing=!0},blur:function(t){e.focusing=!1},click:function(t){e.focusing=!1}}},[e._t("default",["uploading"!==t.status&&["picture-card","picture"].indexOf(e.listType)>-1?n("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.url,alt:""}}):e._e(),n("a",{staticClass:"el-upload-list__item-name",on:{click:function(n){e.handleClick(t)}}},[n("i",{staticClass:"el-icon-document"}),e._v(e._s(t.name)+"\n      ")]),n("label",{staticClass:"el-upload-list__item-status-label"},[n("i",{class:{"el-icon-upload-success":!0,"el-icon-circle-check":"text"===e.listType,"el-icon-check":["picture-card","picture"].indexOf(e.listType)>-1}})]),e.disabled?e._e():n("i",{staticClass:"el-icon-close",on:{click:function(n){e.$emit("remove",t)}}}),e.disabled?e._e():n("i",{staticClass:"el-icon-close-tip"},[e._v(e._s(e.t("el.upload.deleteTip")))]),"uploading"===t.status?n("el-progress",{attrs:{type:"picture-card"===e.listType?"circle":"line","stroke-width":"picture-card"===e.listType?6:2,percentage:e.parsePercentage(t.percentage)}}):e._e(),"picture-card"===e.listType?n("span",{staticClass:"el-upload-list__item-actions"},[e.handlePreview&&"picture-card"===e.listType?n("span",{staticClass:"el-upload-list__item-preview",on:{click:function(n){e.handlePreview(t)}}},[n("i",{staticClass:"el-icon-zoom-in"})]):e._e(),e.disabled?e._e():n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(n){e.$emit("remove",t)}}},[n("i",{staticClass:"el-icon-delete"})])]):e._e()],{file:t})],2)})),0)},Qu=[];Hu._withStripped=!0;var Wu=n(33),qu=n.n(Wu),zu={name:"ElUploadList",mixins:[_.a],data:function(){return{focusing:!1}},components:{ElProgress:qu.a},props:{files:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},handlePreview:Function,listType:String},methods:{parsePercentage:function(e){return parseInt(e,10)},handleClick:function(e){this.handlePreview&&this.handlePreview(e)}}},Zu=zu,$u=a(Zu,Hu,Qu,!1,null,null,null);$u.options.__file="packages/upload/src/upload-list.vue";var Ku=$u.exports,Yu=n(24),Ju=n.n(Yu);function Xu(e,t,n){var r=void 0;r=n.response?""+(n.response.error||n.response):n.responseText?""+n.responseText:"fail to post "+e+" "+n.status;var i=new Error(r);return i.status=n.status,i.method="post",i.url=e,i}function ed(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(n){return t}}function td(e){if("undefined"!==typeof XMLHttpRequest){var t=new XMLHttpRequest,n=e.action;t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var r=new FormData;e.data&&Object.keys(e.data).forEach((function(t){r.append(t,e.data[t])})),r.append(e.filename,e.file,e.file.name),t.onerror=function(t){e.onError(t)},t.onload=function(){if(t.status<200||t.status>=300)return e.onError(Xu(n,e,t));e.onSuccess(ed(t))},t.open("post",n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var i=e.headers||{};for(var o in i)i.hasOwnProperty(o)&&null!==i[o]&&t.setRequestHeader(o,i[o]);return t.send(r),t}}var nd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-upload-dragger",class:{"is-dragover":e.dragover},on:{drop:function(t){return t.preventDefault(),e.onDrop(t)},dragover:function(t){return t.preventDefault(),e.onDragover(t)},dragleave:function(t){t.preventDefault(),e.dragover=!1}}},[e._t("default")],2)},rd=[];nd._withStripped=!0;var id={name:"ElUploadDrag",props:{disabled:Boolean},inject:{uploader:{default:""}},data:function(){return{dragover:!1}},methods:{onDragover:function(){this.disabled||(this.dragover=!0)},onDrop:function(e){if(!this.disabled&&this.uploader){var t=this.uploader.accept;this.dragover=!1,t?this.$emit("file",[].slice.call(e.dataTransfer.files).filter((function(e){var n=e.type,r=e.name,i=r.indexOf(".")>-1?"."+r.split(".").pop():"",o=n.replace(/\/.*$/,"");return t.split(",").map((function(e){return e.trim()})).filter((function(e){return e})).some((function(e){return/\..+$/.test(e)?i===e:/\/\*$/.test(e)?o===e.replace(/\/\*$/,""):!!/^[^\/]+\/[^\/]+$/.test(e)&&n===e}))}))):this.$emit("file",e.dataTransfer.files)}}}},od=id,sd=a(od,nd,rd,!1,null,null,null);sd.options.__file="packages/upload/src/upload-dragger.vue";var ad,cd,ld=sd.exports,ud={inject:["uploader"],components:{UploadDragger:ld},props:{type:String,action:{type:String,required:!0},name:{type:String,default:"file"},data:Object,headers:Object,withCredentials:Boolean,multiple:Boolean,accept:String,onStart:Function,onProgress:Function,onSuccess:Function,onError:Function,beforeUpload:Function,drag:Boolean,onPreview:{type:Function,default:function(){}},onRemove:{type:Function,default:function(){}},fileList:Array,autoUpload:Boolean,listType:String,httpRequest:{type:Function,default:td},disabled:Boolean,limit:Number,onExceed:Function},data:function(){return{mouseover:!1,reqs:{}}},methods:{isImage:function(e){return-1!==e.indexOf("image")},handleChange:function(e){var t=e.target.files;t&&this.uploadFiles(t)},uploadFiles:function(e){var t=this;if(this.limit&&this.fileList.length+e.length>this.limit)this.onExceed&&this.onExceed(e,this.fileList);else{var n=Array.prototype.slice.call(e);this.multiple||(n=n.slice(0,1)),0!==n.length&&n.forEach((function(e){t.onStart(e),t.autoUpload&&t.upload(e)}))}},upload:function(e){var t=this;if(this.$refs.input.value=null,!this.beforeUpload)return this.post(e);var n=this.beforeUpload(e);n&&n.then?n.then((function(n){var r=Object.prototype.toString.call(n);if("[object File]"===r||"[object Blob]"===r){for(var i in"[object Blob]"===r&&(n=new File([n],e.name,{type:e.type})),e)e.hasOwnProperty(i)&&(n[i]=e[i]);t.post(n)}else t.post(e)}),(function(){t.onRemove(null,e)})):!1!==n?this.post(e):this.onRemove(null,e)},abort:function(e){var t=this.reqs;if(e){var n=e;e.uid&&(n=e.uid),t[n]&&t[n].abort()}else Object.keys(t).forEach((function(e){t[e]&&t[e].abort(),delete t[e]}))},post:function(e){var t=this,n=e.uid,r={headers:this.headers,withCredentials:this.withCredentials,file:e,data:this.data,filename:this.name,action:this.action,onProgress:function(n){t.onProgress(n,e)},onSuccess:function(r){t.onSuccess(r,e),delete t.reqs[n]},onError:function(r){t.onError(r,e),delete t.reqs[n]}},i=this.httpRequest(r);this.reqs[n]=i,i&&i.then&&i.then(r.onSuccess,r.onError)},handleClick:function(){this.disabled||(this.$refs.input.value=null,this.$refs.input.click())},handleKeydown:function(e){e.target===e.currentTarget&&(13!==e.keyCode&&32!==e.keyCode||this.handleClick())}},render:function(e){var t=this.handleClick,n=this.drag,r=this.name,i=this.handleChange,o=this.multiple,s=this.accept,a=this.listType,c=this.uploadFiles,l=this.disabled,u=this.handleKeydown,d={class:{"el-upload":!0},on:{click:t,keydown:u}};return d.class["el-upload--"+a]=!0,e("div",Ju()([d,{attrs:{tabindex:"0"}}]),[n?e("upload-dragger",{attrs:{disabled:l},on:{file:c}},[this.$slots.default]):this.$slots.default,e("input",{class:"el-upload__input",attrs:{type:"file",name:r,multiple:o,accept:s},ref:"input",on:{change:i}})])}},dd=ud,hd=a(dd,ad,cd,!1,null,null,null);hd.options.__file="packages/upload/src/upload.vue";var pd=hd.exports;function fd(){}var gd,md,_d={name:"ElUpload",mixins:[I.a],components:{ElProgress:qu.a,UploadList:Ku,Upload:pd},provide:function(){return{uploader:this}},inject:{elForm:{default:""}},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},data:Object,multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,dragger:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:String,type:{type:String,default:"select"},beforeUpload:Function,beforeRemove:Function,onRemove:{type:Function,default:fd},onChange:{type:Function,default:fd},onPreview:{type:Function},onSuccess:{type:Function,default:fd},onProgress:{type:Function,default:fd},onError:{type:Function,default:fd},fileList:{type:Array,default:function(){return[]}},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:Function,disabled:Boolean,limit:Number,onExceed:{type:Function,default:fd}},data:function(){return{uploadFiles:[],dragOver:!1,draging:!1,tempIndex:1}},computed:{uploadDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{listType:function(e){"picture-card"!==e&&"picture"!==e||(this.uploadFiles=this.uploadFiles.map((function(e){if(!e.url&&e.raw)try{e.url=URL.createObjectURL(e.raw)}catch(t){console.error("[Element Error][Upload]",t)}return e})))},fileList:{immediate:!0,handler:function(e){var t=this;this.uploadFiles=e.map((function(e){return e.uid=e.uid||Date.now()+t.tempIndex++,e.status=e.status||"success",e}))}}},methods:{handleStart:function(e){e.uid=Date.now()+this.tempIndex++;var t={status:"ready",name:e.name,size:e.size,percentage:0,uid:e.uid,raw:e};if("picture-card"===this.listType||"picture"===this.listType)try{t.url=URL.createObjectURL(e)}catch(n){return void console.error("[Element Error][Upload]",n)}this.uploadFiles.push(t),this.onChange(t,this.uploadFiles)},handleProgress:function(e,t){var n=this.getFile(t);this.onProgress(e,n,this.uploadFiles),n.status="uploading",n.percentage=e.percent||0},handleSuccess:function(e,t){var n=this.getFile(t);n&&(n.status="success",n.response=e,this.onSuccess(e,n,this.uploadFiles),this.onChange(n,this.uploadFiles))},handleError:function(e,t){var n=this.getFile(t),r=this.uploadFiles;n.status="fail",r.splice(r.indexOf(n),1),this.onError(e,n,this.uploadFiles),this.onChange(n,this.uploadFiles)},handleRemove:function(e,t){var n=this;t&&(e=this.getFile(t));var r=function(){n.abort(e);var t=n.uploadFiles;t.splice(t.indexOf(e),1),n.onRemove(e,t)};if(this.beforeRemove){if("function"===typeof this.beforeRemove){var i=this.beforeRemove(e,this.uploadFiles);i&&i.then?i.then((function(){r()}),fd):!1!==i&&r()}}else r()},getFile:function(e){var t=this.uploadFiles,n=void 0;return t.every((function(t){return n=e.uid===t.uid?t:null,!n})),n},abort:function(e){this.$refs["upload-inner"].abort(e)},clearFiles:function(){this.uploadFiles=[]},submit:function(){var e=this;this.uploadFiles.filter((function(e){return"ready"===e.status})).forEach((function(t){e.$refs["upload-inner"].upload(t.raw)}))},getMigratingConfig:function(){return{props:{"default-file-list":"default-file-list is renamed to file-list.","show-upload-list":"show-upload-list is renamed to show-file-list.","thumbnail-mode":"thumbnail-mode has been deprecated, you can implement the same effect according to this case: http://element.eleme.io/#/zh-CN/component/upload#yong-hu-tou-xiang-shang-chuan"}}}},beforeDestroy:function(){this.uploadFiles.forEach((function(e){e.url&&0===e.url.indexOf("blob:")&&URL.revokeObjectURL(e.url)}))},render:function(e){var t=this,n=void 0;this.showFileList&&(n=e(Ku,{attrs:{disabled:this.uploadDisabled,listType:this.listType,files:this.uploadFiles,handlePreview:this.onPreview},on:{remove:this.handleRemove}},[function(e){if(t.$scopedSlots.file)return t.$scopedSlots.file({file:e.file})}]));var r={props:{type:this.type,drag:this.drag,action:this.action,multiple:this.multiple,"before-upload":this.beforeUpload,"with-credentials":this.withCredentials,headers:this.headers,name:this.name,data:this.data,accept:this.accept,fileList:this.uploadFiles,autoUpload:this.autoUpload,listType:this.listType,disabled:this.uploadDisabled,limit:this.limit,"on-exceed":this.onExceed,"on-start":this.handleStart,"on-progress":this.handleProgress,"on-success":this.handleSuccess,"on-error":this.handleError,"on-preview":this.onPreview,"on-remove":this.handleRemove,"http-request":this.httpRequest},ref:"upload-inner"},i=this.$slots.trigger||this.$slots.default,o=e("upload",r,[i]);return e("div",["picture-card"===this.listType?n:"",this.$slots.trigger?[o,this.$slots.default]:o,this.$slots.tip,"picture-card"!==this.listType?n:""])}},vd=_d,Ed=a(vd,gd,md,!1,null,null,null);Ed.options.__file="packages/upload/src/index.vue";var Ad=Ed.exports;Ad.install=function(e){e.component(Ad.name,Ad)};var yd=Ad,Sd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-progress",class:["el-progress--"+e.type,e.status?"is-"+e.status:"",{"el-progress--without-text":!e.showText,"el-progress--text-inside":e.textInside}],attrs:{role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===e.type?n("div",{staticClass:"el-progress-bar"},[n("div",{staticClass:"el-progress-bar__outer",style:{height:e.strokeWidth+"px"}},[n("div",{staticClass:"el-progress-bar__inner",style:e.barStyle},[e.showText&&e.textInside?n("div",{staticClass:"el-progress-bar__innerText"},[e._v(e._s(e.content))]):e._e()])])]):n("div",{staticClass:"el-progress-circle",style:{height:e.width+"px",width:e.width+"px"}},[n("svg",{attrs:{viewBox:"0 0 100 100"}},[n("path",{staticClass:"el-progress-circle__track",style:e.trailPathStyle,attrs:{d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none"}}),n("path",{staticClass:"el-progress-circle__path",style:e.circlePathStyle,attrs:{d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0}})])]),e.showText&&!e.textInside?n("div",{staticClass:"el-progress__text",style:{fontSize:e.progressTextSize+"px"}},[e.status?n("i",{class:e.iconClass}):[e._v(e._s(e.content))]],2):e._e()])},bd=[];Sd._withStripped=!0;var Cd={name:"ElProgress",props:{type:{type:String,default:"line",validator:function(e){return["line","circle","dashboard"].indexOf(e)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(e){return e>=0&&e<=100}},status:{type:String,validator:function(e){return["success","exception","warning"].indexOf(e)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var e={};return e.width=this.percentage+"%",e.backgroundColor=this.getCurrentColor(this.percentage),e},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var e=this.radius,t="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(t?"":"-")+e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"-":"")+2*e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"":"-")+2*e+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){var e=-1*this.perimeter*(1-this.rate)/2;return e+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var e=void 0;if(this.color)e=this.getCurrentColor(this.percentage);else switch(this.status){case"success":e="#13ce66";break;case"exception":e="#ff4949";break;case"warning":e="#e6a23c";break;default:e="#20a0ff"}return e},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"===typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(e){return"function"===typeof this.color?this.color(e):"string"===typeof this.color?this.color:this.getLevelColor(e)},getLevelColor:function(e){for(var t=this.getColorArray().sort((function(e,t){return e.percentage-t.percentage})),n=0;n<t.length;n++)if(t[n].percentage>e)return t[n].color;return t[t.length-1].color},getColorArray:function(){var e=this.color,t=100/e.length;return e.map((function(e,n){return"string"===typeof e?{color:e,percentage:(n+1)*t}:e}))}}},Td=Cd,Id=a(Td,Sd,bd,!1,null,null,null);Id.options.__file="packages/progress/src/progress.vue";var Rd=Id.exports;Rd.install=function(e){e.component(Rd.name,Rd)};var wd=Rd,kd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"el-spinner"},[n("svg",{staticClass:"el-spinner-inner",style:{width:e.radius/2+"px",height:e.radius/2+"px"},attrs:{viewBox:"0 0 50 50"}},[n("circle",{staticClass:"path",attrs:{cx:"25",cy:"25",r:"20",fill:"none",stroke:e.strokeColor,"stroke-width":e.strokeWidth}})])])},Od=[];kd._withStripped=!0;var Nd={name:"ElSpinner",props:{type:String,radius:{type:Number,default:100},strokeWidth:{type:Number,default:5},strokeColor:{type:String,default:"#efefef"}}},Ld=Nd,Pd=a(Ld,kd,Od,!1,null,null,null);Pd.options.__file="packages/spinner/src/spinner.vue";var Dd=Pd.exports;Dd.install=function(e){e.component(Dd.name,Dd)};var Md=Dd,xd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-message-fade"},on:{"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["el-message",e.type&&!e.iconClass?"el-message--"+e.type:"",e.center?"is-center":"",e.showClose?"is-closable":"",e.customClass],style:e.positionStyle,attrs:{role:"alert"},on:{mouseenter:e.clearTimer,mouseleave:e.startTimer}},[e.iconClass?n("i",{class:e.iconClass}):n("i",{class:e.typeClass}),e._t("default",[e.dangerouslyUseHTMLString?n("p",{staticClass:"el-message__content",domProps:{innerHTML:e._s(e.message)}}):n("p",{staticClass:"el-message__content"},[e._v(e._s(e.message))])]),e.showClose?n("i",{staticClass:"el-message__closeBtn el-icon-close",on:{click:e.close}}):e._e()],2)])},Bd=[];xd._withStripped=!0;var Ud={success:"success",info:"info",warning:"warning",error:"error"},Fd={data:function(){return{visible:!1,message:"",duration:3e3,type:"info",iconClass:"",customClass:"",onClose:null,showClose:!1,closed:!1,verticalOffset:20,timer:null,dangerouslyUseHTMLString:!1,center:!1}},computed:{typeClass:function(){return this.type&&!this.iconClass?"el-message__icon el-icon-"+Ud[this.type]:""},positionStyle:function(){return{top:this.verticalOffset+"px"}}},watch:{closed:function(e){e&&(this.visible=!1)}},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},close:function(){this.closed=!0,"function"===typeof this.onClose&&this.onClose(this)},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration))},keydown:function(e){27===e.keyCode&&(this.closed||this.close())}},mounted:function(){this.startTimer(),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},Vd=Fd,jd=a(Vd,xd,Bd,!1,null,null,null);jd.options.__file="packages/message/src/main.vue";var Gd=jd.exports,Hd=n(15),Qd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wd=Gr.a.extend(Gd),qd=void 0,zd=[],Zd=1,$d=function e(t){if(!Gr.a.prototype.$isServer){t=t||{},"string"===typeof t&&(t={message:t});var n=t.onClose,r="message_"+Zd++;t.onClose=function(){e.close(r,n)},qd=new Wd({data:t}),qd.id=r,Object(Ca["isVNode"])(qd.message)&&(qd.$slots.default=[qd.message],qd.message=null),qd.$mount(),document.body.appendChild(qd.$el);var i=t.offset||20;return zd.forEach((function(e){i+=e.$el.offsetHeight+16})),qd.verticalOffset=i,qd.visible=!0,qd.$el.style.zIndex=b["PopupManager"].nextZIndex(),zd.push(qd),qd}};["success","warning","info","error"].forEach((function(e){$d[e]=function(t){return Object(Hd["isObject"])(t)&&!Object(Ca["isVNode"])(t)?$d(Qd({},t,{type:e})):$d({type:e,message:t})}})),$d.close=function(e,t){for(var n=zd.length,r=-1,i=void 0,o=0;o<n;o++)if(e===zd[o].id){i=zd[o].$el.offsetHeight,r=o,"function"===typeof t&&t(zd[o]),zd.splice(o,1);break}if(!(n<=1||-1===r||r>zd.length-1))for(var s=r;s<n-1;s++){var a=zd[s].$el;a.style["top"]=parseInt(a.style["top"],10)-i-16+"px"}},$d.closeAll=function(){for(var e=zd.length-1;e>=0;e--)zd[e].close()};var Kd=$d,Yd=Kd,Jd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-badge"},[e._t("default"),n("transition",{attrs:{name:"el-zoom-in-center"}},[n("sup",{directives:[{name:"show",rawName:"v-show",value:!e.hidden&&(e.content||0===e.content||e.isDot),expression:"!hidden && (content || content === 0 || isDot)"}],staticClass:"el-badge__content",class:["el-badge__content--"+e.type,{"is-fixed":e.$slots.default,"is-dot":e.isDot}],domProps:{textContent:e._s(e.content)}})])],2)},Xd=[];Jd._withStripped=!0;var eh={name:"ElBadge",props:{value:[String,Number],max:Number,isDot:Boolean,hidden:Boolean,type:{type:String,validator:function(e){return["primary","success","warning","info","danger"].indexOf(e)>-1}}},computed:{content:function(){if(!this.isDot){var e=this.value,t=this.max;return"number"===typeof e&&"number"===typeof t&&t<e?t+"+":e}}}},th=eh,nh=a(th,Jd,Xd,!1,null,null,null);nh.options.__file="packages/badge/src/main.vue";var rh=nh.exports;rh.install=function(e){e.component(rh.name,rh)};var ih=rh,oh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-card",class:e.shadow?"is-"+e.shadow+"-shadow":"is-always-shadow"},[e.$slots.header||e.header?n("div",{staticClass:"el-card__header"},[e._t("header",[e._v(e._s(e.header))])],2):e._e(),n("div",{staticClass:"el-card__body",style:e.bodyStyle},[e._t("default")],2)])},sh=[];oh._withStripped=!0;var ah={name:"ElCard",props:{header:{},bodyStyle:{},shadow:{type:String}}},ch=ah,lh=a(ch,oh,sh,!1,null,null,null);lh.options.__file="packages/card/src/main.vue";var uh=lh.exports;uh.install=function(e){e.component(uh.name,uh)};var dh=uh,hh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-rate",attrs:{role:"slider","aria-valuenow":e.currentValue,"aria-valuetext":e.text,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0"},on:{keydown:e.handleKey}},[e._l(e.max,(function(t,r){return n("span",{key:r,staticClass:"el-rate__item",style:{cursor:e.rateDisabled?"auto":"pointer"},on:{mousemove:function(n){e.setCurrentValue(t,n)},mouseleave:e.resetCurrentValue,click:function(n){e.selectValue(t)}}},[n("i",{staticClass:"el-rate__icon",class:[e.classes[t-1],{hover:e.hoverIndex===t}],style:e.getIconStyle(t)},[e.showDecimalIcon(t)?n("i",{staticClass:"el-rate__decimal",class:e.decimalIconClass,style:e.decimalStyle}):e._e()])])})),e.showText||e.showScore?n("span",{staticClass:"el-rate__text",style:{color:e.textColor}},[e._v(e._s(e.text))]):e._e()],2)},ph=[];hh._withStripped=!0;var fh={name:"ElRate",mixins:[I.a],inject:{elForm:{default:""}},data:function(){return{pointerAtLeftHalf:!0,currentValue:this.value,hoverIndex:-1}},props:{value:{type:Number,default:0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:[Array,Object],default:function(){return["#F7BA2A","#F7BA2A","#F7BA2A"]}},voidColor:{type:String,default:"#C6D1DE"},disabledVoidColor:{type:String,default:"#EFF2F7"},iconClasses:{type:[Array,Object],default:function(){return["el-icon-star-on","el-icon-star-on","el-icon-star-on"]}},voidIconClass:{type:String,default:"el-icon-star-off"},disabledVoidIconClass:{type:String,default:"el-icon-star-on"},disabled:{type:Boolean,default:!1},allowHalf:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},showScore:{type:Boolean,default:!1},textColor:{type:String,default:"#1f2d3d"},texts:{type:Array,default:function(){return["极差","失望","一般","满意","惊喜"]}},scoreTemplate:{type:String,default:"{value}"}},computed:{text:function(){var e="";return this.showScore?e=this.scoreTemplate.replace(/\{\s*value\s*\}/,this.rateDisabled?this.value:this.currentValue):this.showText&&(e=this.texts[Math.ceil(this.currentValue)-1]),e},decimalStyle:function(){var e="";return this.rateDisabled?e=this.valueDecimal+"%":this.allowHalf&&(e="50%"),{color:this.activeColor,width:e}},valueDecimal:function(){return 100*this.value-100*Math.floor(this.value)},classMap:function(){var e;return Array.isArray(this.iconClasses)?(e={},e[this.lowThreshold]=this.iconClasses[0],e[this.highThreshold]={value:this.iconClasses[1],excluded:!0},e[this.max]=this.iconClasses[2],e):this.iconClasses},decimalIconClass:function(){return this.getValueFromMap(this.value,this.classMap)},voidClass:function(){return this.rateDisabled?this.disabledVoidIconClass:this.voidIconClass},activeClass:function(){return this.getValueFromMap(this.currentValue,this.classMap)},colorMap:function(){var e;return Array.isArray(this.colors)?(e={},e[this.lowThreshold]=this.colors[0],e[this.highThreshold]={value:this.colors[1],excluded:!0},e[this.max]=this.colors[2],e):this.colors},activeColor:function(){return this.getValueFromMap(this.currentValue,this.colorMap)},classes:function(){var e=[],t=0,n=this.currentValue;for(this.allowHalf&&this.currentValue!==Math.floor(this.currentValue)&&n--;t<n;t++)e.push(this.activeClass);for(;t<this.max;t++)e.push(this.voidClass);return e},rateDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{value:function(e){this.currentValue=e,this.pointerAtLeftHalf=this.value!==Math.floor(this.value)}},methods:{getMigratingConfig:function(){return{props:{"text-template":"text-template is renamed to score-template."}}},getValueFromMap:function(e,t){var n=Object.keys(t).filter((function(n){var r=t[n],i=!!Object(Hd["isObject"])(r)&&r.excluded;return i?e<n:e<=n})).sort((function(e,t){return e-t})),r=t[n[0]];return Object(Hd["isObject"])(r)?r.value:r||""},showDecimalIcon:function(e){var t=this.rateDisabled&&this.valueDecimal>0&&e-1<this.value&&e>this.value,n=this.allowHalf&&this.pointerAtLeftHalf&&e-.5<=this.currentValue&&e>this.currentValue;return t||n},getIconStyle:function(e){var t=this.rateDisabled?this.disabledVoidColor:this.voidColor;return{color:e<=this.currentValue?this.activeColor:t}},selectValue:function(e){this.rateDisabled||(this.allowHalf&&this.pointerAtLeftHalf?(this.$emit("input",this.currentValue),this.$emit("change",this.currentValue)):(this.$emit("input",e),this.$emit("change",e)))},handleKey:function(e){if(!this.rateDisabled){var t=this.currentValue,n=e.keyCode;38===n||39===n?(this.allowHalf?t+=.5:t+=1,e.stopPropagation(),e.preventDefault()):37!==n&&40!==n||(this.allowHalf?t-=.5:t-=1,e.stopPropagation(),e.preventDefault()),t=t<0?0:t,t=t>this.max?this.max:t,this.$emit("input",t),this.$emit("change",t)}},setCurrentValue:function(e,t){if(!this.rateDisabled){if(this.allowHalf){var n=t.target;Object(Ue["hasClass"])(n,"el-rate__item")&&(n=n.querySelector(".el-rate__icon")),Object(Ue["hasClass"])(n,"el-rate__decimal")&&(n=n.parentNode),this.pointerAtLeftHalf=2*t.offsetX<=n.clientWidth,this.currentValue=this.pointerAtLeftHalf?e-.5:e}else this.currentValue=e;this.hoverIndex=e}},resetCurrentValue:function(){this.rateDisabled||(this.allowHalf&&(this.pointerAtLeftHalf=this.value!==Math.floor(this.value)),this.currentValue=this.value,this.hoverIndex=-1)}},created:function(){this.value||this.$emit("input",0)}},gh=fh,mh=a(gh,hh,ph,!1,null,null,null);mh.options.__file="packages/rate/src/main.vue";var _h=mh.exports;_h.install=function(e){e.component(_h.name,_h)};var vh=_h,Eh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-steps",class:[!e.simple&&"el-steps--"+e.direction,e.simple&&"el-steps--simple"]},[e._t("default")],2)},Ah=[];Eh._withStripped=!0;var yh={name:"ElSteps",mixins:[I.a],props:{space:[Number,String],active:Number,direction:{type:String,default:"horizontal"},alignCenter:Boolean,simple:Boolean,finishStatus:{type:String,default:"finish"},processStatus:{type:String,default:"process"}},data:function(){return{steps:[],stepOffset:0}},methods:{getMigratingConfig:function(){return{props:{center:"center is removed."}}}},watch:{active:function(e,t){this.$emit("change",e,t)},steps:function(e){e.forEach((function(e,t){e.index=t}))}}},Sh=yh,bh=a(Sh,Eh,Ah,!1,null,null,null);bh.options.__file="packages/steps/src/steps.vue";var Ch=bh.exports;Ch.install=function(e){e.component(Ch.name,Ch)};var Th=Ch,Ih=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-step",class:[!e.isSimple&&"is-"+e.$parent.direction,e.isSimple&&"is-simple",e.isLast&&!e.space&&!e.isCenter&&"is-flex",e.isCenter&&!e.isVertical&&!e.isSimple&&"is-center"],style:e.style},[n("div",{staticClass:"el-step__head",class:"is-"+e.currentStatus},[n("div",{staticClass:"el-step__line",style:e.isLast?"":{marginRight:e.$parent.stepOffset+"px"}},[n("i",{staticClass:"el-step__line-inner",style:e.lineStyle})]),n("div",{staticClass:"el-step__icon",class:"is-"+(e.icon?"icon":"text")},["success"!==e.currentStatus&&"error"!==e.currentStatus?e._t("icon",[e.icon?n("i",{staticClass:"el-step__icon-inner",class:[e.icon]}):e._e(),e.icon||e.isSimple?e._e():n("div",{staticClass:"el-step__icon-inner"},[e._v(e._s(e.index+1))])]):n("i",{staticClass:"el-step__icon-inner is-status",class:["el-icon-"+("success"===e.currentStatus?"check":"close")]})],2)]),n("div",{staticClass:"el-step__main"},[n("div",{ref:"title",staticClass:"el-step__title",class:["is-"+e.currentStatus]},[e._t("title",[e._v(e._s(e.title))])],2),e.isSimple?n("div",{staticClass:"el-step__arrow"}):n("div",{staticClass:"el-step__description",class:["is-"+e.currentStatus]},[e._t("description",[e._v(e._s(e.description))])],2)])])},Rh=[];Ih._withStripped=!0;var wh={name:"ElStep",props:{title:String,icon:String,description:String,status:String},data:function(){return{index:-1,lineStyle:{},internalStatus:""}},beforeCreate:function(){this.$parent.steps.push(this)},beforeDestroy:function(){var e=this.$parent.steps,t=e.indexOf(this);t>=0&&e.splice(t,1)},computed:{currentStatus:function(){return this.status||this.internalStatus},prevStatus:function(){var e=this.$parent.steps[this.index-1];return e?e.currentStatus:"wait"},isCenter:function(){return this.$parent.alignCenter},isVertical:function(){return"vertical"===this.$parent.direction},isSimple:function(){return this.$parent.simple},isLast:function(){var e=this.$parent;return e.steps[e.steps.length-1]===this},stepsCount:function(){return this.$parent.steps.length},space:function(){var e=this.isSimple,t=this.$parent.space;return e?"":t},style:function(){var e={},t=this.$parent,n=t.steps.length,r="number"===typeof this.space?this.space+"px":this.space?this.space:100/(n-(this.isCenter?0:1))+"%";return e.flexBasis=r,this.isVertical||(this.isLast?e.maxWidth=100/this.stepsCount+"%":e.marginRight=-this.$parent.stepOffset+"px"),e}},methods:{updateStatus:function(e){var t=this.$parent.$children[this.index-1];e>this.index?this.internalStatus=this.$parent.finishStatus:e===this.index&&"error"!==this.prevStatus?this.internalStatus=this.$parent.processStatus:this.internalStatus="wait",t&&t.calcProgress(this.internalStatus)},calcProgress:function(e){var t=100,n={};n.transitionDelay=150*this.index+"ms",e===this.$parent.processStatus?(this.currentStatus,t=0):"wait"===e&&(t=0,n.transitionDelay=-150*this.index+"ms"),n.borderWidth=t&&!this.isSimple?"1px":0,"vertical"===this.$parent.direction?n.height=t+"%":n.width=t+"%",this.lineStyle=n}},mounted:function(){var e=this,t=this.$watch("index",(function(n){e.$watch("$parent.active",e.updateStatus,{immediate:!0}),e.$watch("$parent.processStatus",(function(){var t=e.$parent.active;e.updateStatus(t)}),{immediate:!0}),t()}))}},kh=wh,Oh=a(kh,Ih,Rh,!1,null,null,null);Oh.options.__file="packages/steps/src/step.vue";var Nh=Oh.exports;Nh.install=function(e){e.component(Nh.name,Nh)};var Lh=Nh,Ph=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.carouselClasses,on:{mouseenter:function(t){return t.stopPropagation(),e.handleMouseEnter(t)},mouseleave:function(t){return t.stopPropagation(),e.handleMouseLeave(t)}}},[n("div",{staticClass:"el-carousel__container",style:{height:e.height}},[e.arrowDisplay?n("transition",{attrs:{name:"carousel-arrow-left"}},[n("button",{directives:[{name:"show",rawName:"v-show",value:("always"===e.arrow||e.hover)&&(e.loop||e.activeIndex>0),expression:"(arrow === 'always' || hover) && (loop || activeIndex > 0)"}],staticClass:"el-carousel__arrow el-carousel__arrow--left",attrs:{type:"button"},on:{mouseenter:function(t){e.handleButtonEnter("left")},mouseleave:e.handleButtonLeave,click:function(t){t.stopPropagation(),e.throttledArrowClick(e.activeIndex-1)}}},[n("i",{staticClass:"el-icon-arrow-left"})])]):e._e(),e.arrowDisplay?n("transition",{attrs:{name:"carousel-arrow-right"}},[n("button",{directives:[{name:"show",rawName:"v-show",value:("always"===e.arrow||e.hover)&&(e.loop||e.activeIndex<e.items.length-1),expression:"(arrow === 'always' || hover) && (loop || activeIndex < items.length - 1)"}],staticClass:"el-carousel__arrow el-carousel__arrow--right",attrs:{type:"button"},on:{mouseenter:function(t){e.handleButtonEnter("right")},mouseleave:e.handleButtonLeave,click:function(t){t.stopPropagation(),e.throttledArrowClick(e.activeIndex+1)}}},[n("i",{staticClass:"el-icon-arrow-right"})])]):e._e(),e._t("default")],2),"none"!==e.indicatorPosition?n("ul",{class:e.indicatorsClasses},e._l(e.items,(function(t,r){return n("li",{key:r,class:["el-carousel__indicator","el-carousel__indicator--"+e.direction,{"is-active":r===e.activeIndex}],on:{mouseenter:function(t){e.throttledIndicatorHover(r)},click:function(t){t.stopPropagation(),e.handleIndicatorClick(r)}}},[n("button",{staticClass:"el-carousel__button"},[e.hasLabel?n("span",[e._v(e._s(t.label))]):e._e()])])})),0):e._e()])},Dh=[];Ph._withStripped=!0;var Mh=n(25),xh=n.n(Mh),Bh={name:"ElCarousel",props:{initialIndex:{type:Number,default:0},height:String,trigger:{type:String,default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:String,indicator:{type:Boolean,default:!0},arrow:{type:String,default:"hover"},type:String,loop:{type:Boolean,default:!0},direction:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}}},data:function(){return{items:[],activeIndex:-1,containerWidth:0,timer:null,hover:!1}},computed:{arrowDisplay:function(){return"never"!==this.arrow&&"vertical"!==this.direction},hasLabel:function(){return this.items.some((function(e){return e.label.toString().length>0}))},carouselClasses:function(){var e=["el-carousel","el-carousel--"+this.direction];return"card"===this.type&&e.push("el-carousel--card"),e},indicatorsClasses:function(){var e=["el-carousel__indicators","el-carousel__indicators--"+this.direction];return this.hasLabel&&e.push("el-carousel__indicators--labels"),"outside"!==this.indicatorPosition&&"card"!==this.type||e.push("el-carousel__indicators--outside"),e}},watch:{items:function(e){e.length>0&&this.setActiveItem(this.initialIndex)},activeIndex:function(e,t){this.resetItemPosition(t),t>-1&&this.$emit("change",e,t)},autoplay:function(e){e?this.startTimer():this.pauseTimer()},loop:function(){this.setActiveItem(this.activeIndex)},interval:function(){this.pauseTimer(),this.startTimer()}},methods:{handleMouseEnter:function(){this.hover=!0,this.pauseTimer()},handleMouseLeave:function(){this.hover=!1,this.startTimer()},itemInStage:function(e,t){var n=this.items.length;return t===n-1&&e.inStage&&this.items[0].active||e.inStage&&this.items[t+1]&&this.items[t+1].active?"left":!!(0===t&&e.inStage&&this.items[n-1].active||e.inStage&&this.items[t-1]&&this.items[t-1].active)&&"right"},handleButtonEnter:function(e){var t=this;"vertical"!==this.direction&&this.items.forEach((function(n,r){e===t.itemInStage(n,r)&&(n.hover=!0)}))},handleButtonLeave:function(){"vertical"!==this.direction&&this.items.forEach((function(e){e.hover=!1}))},updateItems:function(){this.items=this.$children.filter((function(e){return"ElCarouselItem"===e.$options.name}))},resetItemPosition:function(e){var t=this;this.items.forEach((function(n,r){n.translateItem(r,t.activeIndex,e)}))},playSlides:function(){this.activeIndex<this.items.length-1?this.activeIndex++:this.loop&&(this.activeIndex=0)},pauseTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},startTimer:function(){this.interval<=0||!this.autoplay||this.timer||(this.timer=setInterval(this.playSlides,this.interval))},resetTimer:function(){this.pauseTimer(),this.startTimer()},setActiveItem:function(e){if("string"===typeof e){var t=this.items.filter((function(t){return t.name===e}));t.length>0&&(e=this.items.indexOf(t[0]))}if(e=Number(e),isNaN(e)||e!==Math.floor(e))console.warn("[Element Warn][Carousel]index must be an integer.");else{var n=this.items.length,r=this.activeIndex;this.activeIndex=e<0?this.loop?n-1:0:e>=n?this.loop?0:n-1:e,r===this.activeIndex&&this.resetItemPosition(r),this.resetTimer()}},prev:function(){this.setActiveItem(this.activeIndex-1)},next:function(){this.setActiveItem(this.activeIndex+1)},handleIndicatorClick:function(e){this.activeIndex=e},handleIndicatorHover:function(e){"hover"===this.trigger&&e!==this.activeIndex&&(this.activeIndex=e)}},created:function(){var e=this;this.throttledArrowClick=xh()(300,!0,(function(t){e.setActiveItem(t)})),this.throttledIndicatorHover=xh()(300,(function(t){e.handleIndicatorHover(t)}))},mounted:function(){var e=this;this.updateItems(),this.$nextTick((function(){Object(er["addResizeListener"])(e.$el,e.resetItemPosition),e.initialIndex<e.items.length&&e.initialIndex>=0&&(e.activeIndex=e.initialIndex),e.startTimer()}))},beforeDestroy:function(){this.$el&&Object(er["removeResizeListener"])(this.$el,this.resetItemPosition),this.pauseTimer()}},Uh=Bh,Fh=a(Uh,Ph,Dh,!1,null,null,null);Fh.options.__file="packages/carousel/src/main.vue";var Vh=Fh.exports;Vh.install=function(e){e.component(Vh.name,Vh)};var jh=Vh,Gh={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function Hh(e){var t=e.move,n=e.size,r=e.bar,i={},o="translate"+r.axis+"("+t+"%)";return i[r.size]=n,i.transform=o,i.msTransform=o,i.webkitTransform=o,i}var Qh={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return Gh[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(e){var t=this.size,n=this.move,r=this.bar;return e("div",{class:["el-scrollbar__bar","is-"+r.key],on:{mousedown:this.clickTrackHandler}},[e("div",{ref:"thumb",class:"el-scrollbar__thumb",on:{mousedown:this.clickThumbHandler},style:Hh({size:t,move:n,bar:r})})])},methods:{clickThumbHandler:function(e){e.ctrlKey||2===e.button||(this.startDrag(e),this[this.bar.axis]=e.currentTarget[this.bar.offset]-(e[this.bar.client]-e.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(e){var t=Math.abs(e.target.getBoundingClientRect()[this.bar.direction]-e[this.bar.client]),n=this.$refs.thumb[this.bar.offset]/2,r=100*(t-n)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=r*this.wrap[this.bar.scrollSize]/100},startDrag:function(e){e.stopImmediatePropagation(),this.cursorDown=!0,Object(Ue["on"])(document,"mousemove",this.mouseMoveDocumentHandler),Object(Ue["on"])(document,"mouseup",this.mouseUpDocumentHandler),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(e){if(!1!==this.cursorDown){var t=this[this.bar.axis];if(t){var n=-1*(this.$el.getBoundingClientRect()[this.bar.direction]-e[this.bar.client]),r=this.$refs.thumb[this.bar.offset]-t,i=100*(n-r)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=i*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(e){this.cursorDown=!1,this[this.bar.axis]=0,Object(Ue["off"])(document,"mousemove",this.mouseMoveDocumentHandler),document.onselectstart=null}},destroyed:function(){Object(Ue["off"])(document,"mouseup",this.mouseUpDocumentHandler)}},Wh={name:"ElScrollbar",components:{Bar:Qh},props:{native:Boolean,wrapStyle:{},wrapClass:{},viewClass:{},viewStyle:{},noresize:Boolean,tag:{type:String,default:"div"}},data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},render:function(e){var t=_i()(),n=this.wrapStyle;if(t){var r="-"+t+"px",i="margin-bottom: "+r+"; margin-right: "+r+";";Array.isArray(this.wrapStyle)?(n=Object(v["toObject"])(this.wrapStyle),n.marginRight=n.marginBottom=r):"string"===typeof this.wrapStyle?n+=i:n=i}var o=e(this.tag,{class:["el-scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default),s=e("div",{ref:"wrap",style:n,on:{scroll:this.handleScroll},class:[this.wrapClass,"el-scrollbar__wrap",t?"":"el-scrollbar__wrap--hidden-default"]},[[o]]),a=void 0;return a=this.native?[e("div",{ref:"wrap",class:[this.wrapClass,"el-scrollbar__wrap"],style:n},[[o]])]:[s,e(Qh,{attrs:{move:this.moveX,size:this.sizeWidth}}),e(Qh,{attrs:{vertical:!0,move:this.moveY,size:this.sizeHeight}})],e("div",{class:"el-scrollbar"},a)},methods:{handleScroll:function(){var e=this.wrap;this.moveY=100*e.scrollTop/e.clientHeight,this.moveX=100*e.scrollLeft/e.clientWidth},update:function(){var e=void 0,t=void 0,n=this.wrap;n&&(e=100*n.clientHeight/n.scrollHeight,t=100*n.clientWidth/n.scrollWidth,this.sizeHeight=e<100?e+"%":"",this.sizeWidth=t<100?t+"%":"")}},mounted:function(){this.native||(this.$nextTick(this.update),!this.noresize&&Object(er["addResizeListener"])(this.$refs.resize,this.update))},beforeDestroy:function(){this.native||!this.noresize&&Object(er["removeResizeListener"])(this.$refs.resize,this.update)},install:function(e){e.component(Wh.name,Wh)}},qh=Wh,zh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.ready,expression:"ready"}],staticClass:"el-carousel__item",class:{"is-active":e.active,"el-carousel__item--card":"card"===e.$parent.type,"is-in-stage":e.inStage,"is-hover":e.hover,"is-animating":e.animating},style:e.itemStyle,on:{click:e.handleItemClick}},["card"===e.$parent.type?n("div",{directives:[{name:"show",rawName:"v-show",value:!e.active,expression:"!active"}],staticClass:"el-carousel__mask"}):e._e(),e._t("default")],2)},Zh=[];zh._withStripped=!0;var $h=.83,Kh={name:"ElCarouselItem",props:{name:String,label:{type:[String,Number],default:""}},data:function(){return{hover:!1,translate:0,scale:1,active:!1,ready:!1,inStage:!1,animating:!1}},methods:{processIndex:function(e,t,n){return 0===t&&e===n-1?-1:t===n-1&&0===e?n:e<t-1&&t-e>=n/2?n+1:e>t+1&&e-t>=n/2?-2:e},calcCardTranslate:function(e,t){var n=this.$parent.$el.offsetWidth;return this.inStage?n*((2-$h)*(e-t)+1)/4:e<t?-(1+$h)*n/4:(3+$h)*n/4},calcTranslate:function(e,t,n){var r=this.$parent.$el[n?"offsetHeight":"offsetWidth"];return r*(e-t)},translateItem:function(e,t,n){var r=this.$parent.type,i=this.parentDirection,o=this.$parent.items.length;if("card"!==r&&void 0!==n&&(this.animating=e===t||e===n),e!==t&&o>2&&this.$parent.loop&&(e=this.processIndex(e,t,o)),"card"===r)"vertical"===i&&console.warn("[Element Warn][Carousel]vertical direction is not supported in card mode"),this.inStage=Math.round(Math.abs(e-t))<=1,this.active=e===t,this.translate=this.calcCardTranslate(e,t),this.scale=this.active?1:$h;else{this.active=e===t;var s="vertical"===i;this.translate=this.calcTranslate(e,t,s),this.scale=1}this.ready=!0},handleItemClick:function(){var e=this.$parent;if(e&&"card"===e.type){var t=e.items.indexOf(this);e.setActiveItem(t)}}},computed:{parentDirection:function(){return this.$parent.direction},itemStyle:function(){var e="vertical"===this.parentDirection?"translateY":"translateX",t=e+"("+this.translate+"px) scale("+this.scale+")",n={transform:t};return Object(v["autoprefixer"])(n)}},created:function(){this.$parent&&this.$parent.updateItems()},destroyed:function(){this.$parent&&this.$parent.updateItems()}},Yh=Kh,Jh=a(Yh,zh,Zh,!1,null,null,null);Jh.options.__file="packages/carousel/src/item.vue";var Xh=Jh.exports;Xh.install=function(e){e.component(Xh.name,Xh)};var ep=Xh,tp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-collapse",attrs:{role:"tablist","aria-multiselectable":"true"}},[e._t("default")],2)},np=[];tp._withStripped=!0;var rp={name:"ElCollapse",componentName:"ElCollapse",props:{accordion:Boolean,value:{type:[Array,String,Number],default:function(){return[]}}},data:function(){return{activeNames:[].concat(this.value)}},provide:function(){return{collapse:this}},watch:{value:function(e){this.activeNames=[].concat(e)}},methods:{setActiveNames:function(e){e=[].concat(e);var t=this.accordion?e[0]:e;this.activeNames=e,this.$emit("input",t),this.$emit("change",t)},handleItemClick:function(e){if(this.accordion)this.setActiveNames(!this.activeNames[0]&&0!==this.activeNames[0]||this.activeNames[0]!==e.name?e.name:"");else{var t=this.activeNames.slice(0),n=t.indexOf(e.name);n>-1?t.splice(n,1):t.push(e.name),this.setActiveNames(t)}}},created:function(){this.$on("item-click",this.handleItemClick)}},ip=rp,op=a(ip,tp,np,!1,null,null,null);op.options.__file="packages/collapse/src/collapse.vue";var sp=op.exports;sp.install=function(e){e.component(sp.name,sp)};var ap=sp,cp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-collapse-item",class:{"is-active":e.isActive,"is-disabled":e.disabled}},[n("div",{attrs:{role:"tab","aria-expanded":e.isActive,"aria-controls":"el-collapse-content-"+e.id,"aria-describedby":"el-collapse-content-"+e.id}},[n("div",{staticClass:"el-collapse-item__header",class:{focusing:e.focusing,"is-active":e.isActive},attrs:{role:"button",id:"el-collapse-head-"+e.id,tabindex:e.disabled?void 0:0},on:{click:e.handleHeaderClick,keyup:function(t){return!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.handleEnterClick(t))},focus:e.handleFocus,blur:function(t){e.focusing=!1}}},[e._t("title",[e._v(e._s(e.title))]),n("i",{staticClass:"el-collapse-item__arrow el-icon-arrow-right",class:{"is-active":e.isActive}})],2)]),n("el-collapse-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"el-collapse-item__wrap",attrs:{role:"tabpanel","aria-hidden":!e.isActive,"aria-labelledby":"el-collapse-head-"+e.id,id:"el-collapse-content-"+e.id}},[n("div",{staticClass:"el-collapse-item__content"},[e._t("default")],2)])])],1)},lp=[];cp._withStripped=!0;var up={name:"ElCollapseItem",componentName:"ElCollapseItem",mixins:[w.a],components:{ElCollapseTransition:ze.a},data:function(){return{contentWrapStyle:{height:"auto",display:"block"},contentHeight:0,focusing:!1,isClick:!1,id:Object(v["generateId"])()}},inject:["collapse"],props:{title:String,name:{type:[String,Number],default:function(){return this._uid}},disabled:Boolean},computed:{isActive:function(){return this.collapse.activeNames.indexOf(this.name)>-1}},methods:{handleFocus:function(){var e=this;setTimeout((function(){e.isClick?e.isClick=!1:e.focusing=!0}),50)},handleHeaderClick:function(){this.disabled||(this.dispatch("ElCollapse","item-click",this),this.focusing=!1,this.isClick=!0)},handleEnterClick:function(){this.dispatch("ElCollapse","item-click",this)}}},dp=up,hp=a(dp,cp,lp,!1,null,null,null);hp.options.__file="packages/collapse/src/collapse-item.vue";var pp=hp.exports;pp.install=function(e){e.component(pp.name,pp)};var fp=pp,gp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:function(){return e.toggleDropDownVisible(!1)},expression:"() => toggleDropDownVisible(false)"}],ref:"reference",class:["el-cascader",e.realSize&&"el-cascader--"+e.realSize,{"is-disabled":e.isDisabled}],on:{mouseenter:function(t){e.inputHover=!0},mouseleave:function(t){e.inputHover=!1},click:function(){return e.toggleDropDownVisible(!e.readonly||void 0)},keydown:e.handleKeyDown}},[n("el-input",{ref:"input",class:{"is-focus":e.dropDownVisible},attrs:{size:e.realSize,placeholder:e.placeholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1},on:{focus:e.handleFocus,blur:e.handleBlur,input:e.handleInput},model:{value:e.multiple?e.presentText:e.inputValue,callback:function(t){e.multiple?e.presentText:e.inputValue=t},expression:"multiple ? presentText : inputValue"}},[n("template",{slot:"suffix"},[e.clearBtnVisible?n("i",{key:"clear",staticClass:"el-input__icon el-icon-circle-close",on:{click:function(t){return t.stopPropagation(),e.handleClear(t)}}}):n("i",{key:"arrow-down",class:["el-input__icon","el-icon-arrow-down",e.dropDownVisible&&"is-reverse"],on:{click:function(t){t.stopPropagation(),e.toggleDropDownVisible()}}})])],2),e.multiple?n("div",{staticClass:"el-cascader__tags"},[e._l(e.presentTags,(function(t){return n("el-tag",{key:t.key,attrs:{type:"info",size:e.tagSize,hit:t.hitState,closable:t.closable,"disable-transitions":""},on:{close:function(n){e.deleteTag(t)}}},[n("span",[e._v(e._s(t.text))])])})),e.filterable&&!e.isDisabled?n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.inputValue,expression:"inputValue",modifiers:{trim:!0}}],staticClass:"el-cascader__search-input",attrs:{type:"text",placeholder:e.presentTags.length?"":e.placeholder},domProps:{value:e.inputValue},on:{input:[function(t){t.target.composing||(e.inputValue=t.target.value.trim())},function(t){return e.handleInput(e.inputValue,t)}],click:function(t){t.stopPropagation(),e.toggleDropDownVisible(!0)},keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.handleDelete(t)},blur:function(t){e.$forceUpdate()}}}):e._e()],2):e._e(),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.handleDropdownLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.dropDownVisible,expression:"dropDownVisible"}],ref:"popper",class:["el-popper","el-cascader__dropdown",e.popperClass]},[n("el-cascader-panel",{directives:[{name:"show",rawName:"v-show",value:!e.filtering,expression:"!filtering"}],ref:"panel",attrs:{options:e.options,props:e.config,border:!1,"render-label":e.$scopedSlots.default},on:{"expand-change":e.handleExpandChange,close:function(t){e.toggleDropDownVisible(!1)}},model:{value:e.checkedValue,callback:function(t){e.checkedValue=t},expression:"checkedValue"}}),e.filterable?n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.filtering,expression:"filtering"}],ref:"suggestionPanel",staticClass:"el-cascader__suggestion-panel",attrs:{tag:"ul","view-class":"el-cascader__suggestion-list"},nativeOn:{keydown:function(t){return e.handleSuggestionKeyDown(t)}}},[e.suggestions.length?e._l(e.suggestions,(function(t,r){return n("li",{key:t.uid,class:["el-cascader__suggestion-item",t.checked&&"is-checked"],attrs:{tabindex:-1},on:{click:function(t){e.handleSuggestionClick(r)}}},[n("span",[e._v(e._s(t.text))]),t.checked?n("i",{staticClass:"el-icon-check"}):e._e()])})):e._t("empty",[n("li",{staticClass:"el-cascader__empty-text"},[e._v(e._s(e.t("el.cascader.noMatch")))])])],2):e._e()],1)])],1)},mp=[];gp._withStripped=!0;var _p=n(42),vp=n.n(_p),Ep=n(34),Ap=n.n(Ep),yp=Ap.a.keys,Sp={expandTrigger:{newProp:"expandTrigger",type:String},changeOnSelect:{newProp:"checkStrictly",type:Boolean},hoverThreshold:{newProp:"hoverThreshold",type:Number}},bp={props:{placement:{type:String,default:"bottom-start"},appendToBody:H.a.props.appendToBody,visibleArrow:{type:Boolean,default:!0},arrowOffset:H.a.props.arrowOffset,offset:H.a.props.offset,boundariesPadding:H.a.props.boundariesPadding,popperOptions:H.a.props.popperOptions},methods:H.a.methods,data:H.a.data,beforeDestroy:H.a.beforeDestroy},Cp={medium:36,small:32,mini:28},Tp={name:"ElCascader",directives:{Clickoutside:F.a},mixins:[bp,w.a,_.a,I.a],inject:{elForm:{default:""},elFormItem:{default:""}},components:{ElInput:g.a,ElTag:Xn.a,ElScrollbar:W.a,ElCascaderPanel:vp.a},props:{value:{},options:Array,props:Object,size:String,placeholder:{type:String,default:function(){return Object(fa["t"])("el.cascader.placeholder")}},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:Function,separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,debounce:{type:Number,default:300},beforeFilter:{type:Function,default:function(){return function(){}}},popperClass:String},data:function(){return{dropDownVisible:!1,checkedValue:this.value,inputHover:!1,inputValue:null,presentText:null,presentTags:[],checkedNodes:[],filtering:!1,suggestions:[],inputInitialHeight:0,pressDeleteCount:0}},computed:{realSize:function(){var e=(this.elFormItem||{}).elFormItemSize;return this.size||e||(this.$ELEMENT||{}).size},tagSize:function(){return["small","mini"].indexOf(this.realSize)>-1?"mini":"small"},isDisabled:function(){return this.disabled||(this.elForm||{}).disabled},config:function(){var e=this.props||{},t=this.$attrs;return Object.keys(Sp).forEach((function(n){var r=Sp[n],i=r.newProp,o=r.type,s=t[n]||t[Object(v["kebabCase"])(n)];Object(It["isDef"])(n)&&!Object(It["isDef"])(e[i])&&(o===Boolean&&""===s&&(s=!0),e[i]=s)})),e},multiple:function(){return this.config.multiple},leafOnly:function(){return!this.config.checkStrictly},readonly:function(){return!this.filterable||this.multiple},clearBtnVisible:function(){return!(!this.clearable||this.isDisabled||this.filtering||!this.inputHover)&&(this.multiple?!!this.checkedNodes.filter((function(e){return!e.isDisabled})).length:!!this.presentText)},panel:function(){return this.$refs.panel}},watch:{disabled:function(){this.computePresentContent()},value:function(e){Object(v["isEqual"])(e,this.checkedValue)||(this.checkedValue=e,this.computePresentContent())},checkedValue:function(e){var t=this.value,n=this.dropDownVisible,r=this.config,i=r.checkStrictly,o=r.multiple;Object(v["isEqual"])(e,t)&&!Object(Hd["isUndefined"])(t)||(this.computePresentContent(),o||i||!n||this.toggleDropDownVisible(!1),this.$emit("input",e),this.$emit("change",e),this.dispatch("ElFormItem","el.form.change",[e]))},options:{handler:function(){this.$nextTick(this.computePresentContent)},deep:!0},presentText:function(e){this.inputValue=e},presentTags:function(e,t){this.multiple&&(e.length||t.length)&&this.$nextTick(this.updateStyle)},filtering:function(e){this.$nextTick(this.updatePopper)}},mounted:function(){var e=this,t=this.$refs.input;t&&t.$el&&(this.inputInitialHeight=t.$el.offsetHeight||Cp[this.realSize]||40),this.isEmptyValue(this.value)||this.computePresentContent(),this.filterHandler=B()(this.debounce,(function(){var t=e.inputValue;if(t){var n=e.beforeFilter(t);n&&n.then?n.then(e.getSuggestions):!1!==n?e.getSuggestions():e.filtering=!1}else e.filtering=!1})),Object(er["addResizeListener"])(this.$el,this.updateStyle)},beforeDestroy:function(){Object(er["removeResizeListener"])(this.$el,this.updateStyle)},methods:{getMigratingConfig:function(){return{props:{"expand-trigger":"expand-trigger is removed, use `props.expandTrigger` instead.","change-on-select":"change-on-select is removed, use `props.checkStrictly` instead.","hover-threshold":"hover-threshold is removed, use `props.hoverThreshold` instead"},events:{"active-item-change":"active-item-change is renamed to expand-change"}}},toggleDropDownVisible:function(e){var t=this;if(!this.isDisabled){var n=this.dropDownVisible,r=this.$refs.input;e=Object(It["isDef"])(e)?e:!n,e!==n&&(this.dropDownVisible=e,e&&this.$nextTick((function(){t.updatePopper(),t.panel.scrollIntoView()})),r.$refs.input.setAttribute("aria-expanded",e),this.$emit("visible-change",e))}},handleDropdownLeave:function(){this.filtering=!1,this.inputValue=this.presentText,this.doDestroy()},handleKeyDown:function(e){switch(e.keyCode){case yp.enter:this.toggleDropDownVisible();break;case yp.down:this.toggleDropDownVisible(!0),this.focusFirstNode(),e.preventDefault();break;case yp.esc:case yp.tab:this.toggleDropDownVisible(!1);break}},handleFocus:function(e){this.$emit("focus",e)},handleBlur:function(e){this.$emit("blur",e)},handleInput:function(e,t){!this.dropDownVisible&&this.toggleDropDownVisible(!0),t&&t.isComposing||(e?this.filterHandler():this.filtering=!1)},handleClear:function(){this.presentText="",this.panel.clearCheckedNodes()},handleExpandChange:function(e){this.$nextTick(this.updatePopper.bind(this)),this.$emit("expand-change",e),this.$emit("active-item-change",e)},focusFirstNode:function(){var e=this;this.$nextTick((function(){var t=e.filtering,n=e.$refs,r=n.popper,i=n.suggestionPanel,o=null;if(t&&i)o=i.$el.querySelector(".el-cascader__suggestion-item");else{var s=r.querySelector(".el-cascader-menu");o=s.querySelector('.el-cascader-node[tabindex="-1"]')}o&&(o.focus(),!t&&o.click())}))},computePresentContent:function(){var e=this;this.$nextTick((function(){e.config.multiple?(e.computePresentTags(),e.presentText=e.presentTags.length?" ":null):e.computePresentText()}))},isEmptyValue:function(e){var t=this.multiple,n=this.panel.config.emitPath;return!(!t&&!n)&&Object(v["isEmpty"])(e)},computePresentText:function(){var e=this.checkedValue,t=this.config;if(!this.isEmptyValue(e)){var n=this.panel.getNodeByValue(e);if(n&&(t.checkStrictly||n.isLeaf))return void(this.presentText=n.getText(this.showAllLevels,this.separator))}this.presentText=null},computePresentTags:function(){var e=this.isDisabled,t=this.leafOnly,n=this.showAllLevels,r=this.separator,i=this.collapseTags,o=this.getCheckedNodes(t),s=[],a=function(t){return{node:t,key:t.uid,text:t.getText(n,r),hitState:!1,closable:!e&&!t.isDisabled}};if(o.length){var c=o[0],l=o.slice(1),u=l.length;s.push(a(c)),u&&(i?s.push({key:-1,text:"+ "+u,closable:!1}):l.forEach((function(e){return s.push(a(e))})))}this.checkedNodes=o,this.presentTags=s},getSuggestions:function(){var e=this,t=this.filterMethod;Object(Hd["isFunction"])(t)||(t=function(e,t){return e.text.includes(t)});var n=this.panel.getFlattedNodes(this.leafOnly).filter((function(n){return!n.isDisabled&&(n.text=n.getText(e.showAllLevels,e.separator)||"",t(n,e.inputValue))}));this.multiple?this.presentTags.forEach((function(e){e.hitState=!1})):n.forEach((function(t){t.checked=Object(v["isEqual"])(e.checkedValue,t.getValueByOption())})),this.filtering=!0,this.suggestions=n,this.$nextTick(this.updatePopper)},handleSuggestionKeyDown:function(e){var t=e.keyCode,n=e.target;switch(t){case yp.enter:n.click();break;case yp.up:var r=n.previousElementSibling;r&&r.focus();break;case yp.down:var i=n.nextElementSibling;i&&i.focus();break;case yp.esc:case yp.tab:this.toggleDropDownVisible(!1);break}},handleDelete:function(){var e=this.inputValue,t=this.pressDeleteCount,n=this.presentTags,r=n.length-1,i=n[r];this.pressDeleteCount=e?0:t+1,i&&this.pressDeleteCount&&(i.hitState?this.deleteTag(i):i.hitState=!0)},handleSuggestionClick:function(e){var t=this.multiple,n=this.suggestions[e];if(t){var r=n.checked;n.doCheck(!r),this.panel.calculateMultiCheckedValue()}else this.checkedValue=n.getValueByOption(),this.toggleDropDownVisible(!1)},deleteTag:function(e){var t=this.checkedValue,n=e.node.getValueByOption(),r=t.find((function(e){return Object(v["isEqual"])(e,n)}));this.checkedValue=t.filter((function(e){return!Object(v["isEqual"])(e,n)})),this.$emit("remove-tag",r)},updateStyle:function(){var e=this.$el,t=this.inputInitialHeight;if(!this.$isServer&&e){var n=this.$refs.suggestionPanel,r=e.querySelector(".el-input__inner");if(r){var i=e.querySelector(".el-cascader__tags"),o=null;if(n&&(o=n.$el)){var s=o.querySelector(".el-cascader__suggestion-list");s.style.minWidth=r.offsetWidth+"px"}if(i){var a=Math.round(i.getBoundingClientRect().height),c=Math.max(a+6,t)+"px";r.style.height=c,this.dropDownVisible&&this.updatePopper()}}}},getCheckedNodes:function(e){return this.panel.getCheckedNodes(e)}}},Ip=Tp,Rp=a(Ip,gp,mp,!1,null,null,null);Rp.options.__file="packages/cascader/src/cascader.vue";var wp=Rp.exports;wp.install=function(e){e.component(wp.name,wp)};var kp=wp,Op=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.hide,expression:"hide"}],class:["el-color-picker",e.colorDisabled?"is-disabled":"",e.colorSize?"el-color-picker--"+e.colorSize:""]},[e.colorDisabled?n("div",{staticClass:"el-color-picker__mask"}):e._e(),n("div",{staticClass:"el-color-picker__trigger",on:{click:e.handleTrigger}},[n("span",{staticClass:"el-color-picker__color",class:{"is-alpha":e.showAlpha}},[n("span",{staticClass:"el-color-picker__color-inner",style:{backgroundColor:e.displayedColor}}),e.value||e.showPanelColor?e._e():n("span",{staticClass:"el-color-picker__empty el-icon-close"})]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.value||e.showPanelColor,expression:"value || showPanelColor"}],staticClass:"el-color-picker__icon el-icon-arrow-down"})]),n("picker-dropdown",{ref:"dropdown",class:["el-color-picker__panel",e.popperClass||""],attrs:{color:e.color,"show-alpha":e.showAlpha,predefine:e.predefine},on:{pick:e.confirmValue,clear:e.clearValue},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}})],1)},Np=[];Op._withStripped=!0;var Lp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Pp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Dp=function(e,t,n){return[e,t*n/((e=(2-t)*n)<1?e:2-e)||0,e/2]},Mp=function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)},xp=function(e){return"string"===typeof e&&-1!==e.indexOf("%")},Bp=function(e,t){Mp(e)&&(e="100%");var n=xp(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)},Up={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Fp=function(e){var t=e.r,n=e.g,r=e.b,i=function(e){e=Math.min(Math.round(e),255);var t=Math.floor(e/16),n=e%16;return""+(Up[t]||t)+(Up[n]||n)};return isNaN(t)||isNaN(n)||isNaN(r)?"":"#"+i(t)+i(n)+i(r)},Vp={A:10,B:11,C:12,D:13,E:14,F:15},jp=function(e){return 2===e.length?16*(Vp[e[0].toUpperCase()]||+e[0])+(Vp[e[1].toUpperCase()]||+e[1]):Vp[e[1].toUpperCase()]||+e[1]},Gp=function(e,t,n){t/=100,n/=100;var r=t,i=Math.max(n,.01),o=void 0,s=void 0;return n*=2,t*=n<=1?n:2-n,r*=i<=1?i:2-i,s=(n+t)/2,o=0===n?2*r/(i+r):2*t/(n+t),{h:e,s:100*o,v:100*s}},Hp=function(e,t,n){e=Bp(e,255),t=Bp(t,255),n=Bp(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o=void 0,s=void 0,a=r,c=r-i;if(s=0===r?0:c/r,r===i)o=0;else{switch(r){case e:o=(t-n)/c+(t<n?6:0);break;case t:o=(n-e)/c+2;break;case n:o=(e-t)/c+4;break}o/=6}return{h:360*o,s:100*s,v:100*a}},Qp=function(e,t,n){e=6*Bp(e,360),t=Bp(t,100),n=Bp(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),s=n*(1-i*t),a=n*(1-(1-i)*t),c=r%6,l=[n,s,o,o,a,n][c],u=[a,n,n,s,o,o][c],d=[o,o,a,n,n,s][c];return{r:Math.round(255*l),g:Math.round(255*u),b:Math.round(255*d)}},Wp=function(){function e(t){for(var n in Pp(this,e),this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="",t=t||{},t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.doOnChange()}return e.prototype.set=function(e,t){if(1!==arguments.length||"object"!==("undefined"===typeof e?"undefined":Lp(e)))this["_"+e]=t,this.doOnChange();else for(var n in e)e.hasOwnProperty(n)&&this.set(n,e[n])},e.prototype.get=function(e){return this["_"+e]},e.prototype.toRgb=function(){return Qp(this._hue,this._saturation,this._value)},e.prototype.fromString=function(e){var t=this;if(!e)return this._hue=0,this._saturation=100,this._value=100,void this.doOnChange();var n=function(e,n,r){t._hue=Math.max(0,Math.min(360,e)),t._saturation=Math.max(0,Math.min(100,n)),t._value=Math.max(0,Math.min(100,r)),t.doOnChange()};if(-1!==e.indexOf("hsl")){var r=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,t){return t>2?parseFloat(e):parseInt(e,10)}));if(4===r.length?this._alpha=Math.floor(100*parseFloat(r[3])):3===r.length&&(this._alpha=100),r.length>=3){var i=Gp(r[0],r[1],r[2]),o=i.h,s=i.s,a=i.v;n(o,s,a)}}else if(-1!==e.indexOf("hsv")){var c=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,t){return t>2?parseFloat(e):parseInt(e,10)}));4===c.length?this._alpha=Math.floor(100*parseFloat(c[3])):3===c.length&&(this._alpha=100),c.length>=3&&n(c[0],c[1],c[2])}else if(-1!==e.indexOf("rgb")){var l=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,t){return t>2?parseFloat(e):parseInt(e,10)}));if(4===l.length?this._alpha=Math.floor(100*parseFloat(l[3])):3===l.length&&(this._alpha=100),l.length>=3){var u=Hp(l[0],l[1],l[2]),d=u.h,h=u.s,p=u.v;n(d,h,p)}}else if(-1!==e.indexOf("#")){var f=e.replace("#","").trim();if(!/^(?:[0-9a-fA-F]{3}){1,2}|[0-9a-fA-F]{8}$/.test(f))return;var g=void 0,m=void 0,_=void 0;3===f.length?(g=jp(f[0]+f[0]),m=jp(f[1]+f[1]),_=jp(f[2]+f[2])):6!==f.length&&8!==f.length||(g=jp(f.substring(0,2)),m=jp(f.substring(2,4)),_=jp(f.substring(4,6))),8===f.length?this._alpha=Math.floor(jp(f.substring(6))/255*100):3!==f.length&&6!==f.length||(this._alpha=100);var v=Hp(g,m,_),E=v.h,A=v.s,y=v.v;n(E,A,y)}},e.prototype.compare=function(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1},e.prototype.doOnChange=function(){var e=this._hue,t=this._saturation,n=this._value,r=this._alpha,i=this.format;if(this.enableAlpha)switch(i){case"hsl":var o=Dp(e,t/100,n/100);this.value="hsla("+e+", "+Math.round(100*o[1])+"%, "+Math.round(100*o[2])+"%, "+r/100+")";break;case"hsv":this.value="hsva("+e+", "+Math.round(t)+"%, "+Math.round(n)+"%, "+r/100+")";break;default:var s=Qp(e,t,n),a=s.r,c=s.g,l=s.b;this.value="rgba("+a+", "+c+", "+l+", "+r/100+")"}else switch(i){case"hsl":var u=Dp(e,t/100,n/100);this.value="hsl("+e+", "+Math.round(100*u[1])+"%, "+Math.round(100*u[2])+"%)";break;case"hsv":this.value="hsv("+e+", "+Math.round(t)+"%, "+Math.round(n)+"%)";break;case"rgb":var d=Qp(e,t,n),h=d.r,p=d.g,f=d.b;this.value="rgb("+h+", "+p+", "+f+")";break;default:this.value=Fp(Qp(e,t,n))}},e}(),qp=Wp,zp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-color-dropdown"},[n("div",{staticClass:"el-color-dropdown__main-wrapper"},[n("hue-slider",{ref:"hue",staticStyle:{float:"right"},attrs:{color:e.color,vertical:""}}),n("sv-panel",{ref:"sl",attrs:{color:e.color}})],1),e.showAlpha?n("alpha-slider",{ref:"alpha",attrs:{color:e.color}}):e._e(),e.predefine?n("predefine",{attrs:{color:e.color,colors:e.predefine}}):e._e(),n("div",{staticClass:"el-color-dropdown__btns"},[n("span",{staticClass:"el-color-dropdown__value"},[n("el-input",{attrs:{"validate-event":!1,size:"mini"},on:{blur:e.handleConfirm},nativeOn:{keyup:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleConfirm(t)}},model:{value:e.customInput,callback:function(t){e.customInput=t},expression:"customInput"}})],1),n("el-button",{staticClass:"el-color-dropdown__link-btn",attrs:{size:"mini",type:"text"},on:{click:function(t){e.$emit("clear")}}},[e._v("\n        "+e._s(e.t("el.colorpicker.clear"))+"\n      ")]),n("el-button",{staticClass:"el-color-dropdown__btn",attrs:{plain:"",size:"mini"},on:{click:e.confirmValue}},[e._v("\n        "+e._s(e.t("el.colorpicker.confirm"))+"\n      ")])],1)],1)])},Zp=[];zp._withStripped=!0;var $p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-color-svpanel",style:{backgroundColor:e.background}},[n("div",{staticClass:"el-color-svpanel__white"}),n("div",{staticClass:"el-color-svpanel__black"}),n("div",{staticClass:"el-color-svpanel__cursor",style:{top:e.cursorTop+"px",left:e.cursorLeft+"px"}},[n("div")])])},Kp=[];$p._withStripped=!0;var Yp=!1,Jp=function(e,t){if(!Gr.a.prototype.$isServer){var n=function(e){t.drag&&t.drag(e)},r=function e(r){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",e),document.onselectstart=null,document.ondragstart=null,Yp=!1,t.end&&t.end(r)};e.addEventListener("mousedown",(function(e){Yp||(document.onselectstart=function(){return!1},document.ondragstart=function(){return!1},document.addEventListener("mousemove",n),document.addEventListener("mouseup",r),Yp=!0,t.start&&t.start(e))}))}},Xp={name:"el-sl-panel",props:{color:{required:!0}},computed:{colorValue:function(){var e=this.color.get("hue"),t=this.color.get("value");return{hue:e,value:t}}},watch:{colorValue:function(){this.update()}},methods:{update:function(){var e=this.color.get("saturation"),t=this.color.get("value"),n=this.$el,r=n.clientWidth,i=n.clientHeight;this.cursorLeft=e*r/100,this.cursorTop=(100-t)*i/100,this.background="hsl("+this.color.get("hue")+", 100%, 50%)"},handleDrag:function(e){var t=this.$el,n=t.getBoundingClientRect(),r=e.clientX-n.left,i=e.clientY-n.top;r=Math.max(0,r),r=Math.min(r,n.width),i=Math.max(0,i),i=Math.min(i,n.height),this.cursorLeft=r,this.cursorTop=i,this.color.set({saturation:r/n.width*100,value:100-i/n.height*100})}},mounted:function(){var e=this;Jp(this.$el,{drag:function(t){e.handleDrag(t)},end:function(t){e.handleDrag(t)}}),this.update()},data:function(){return{cursorTop:0,cursorLeft:0,background:"hsl(0, 100%, 50%)"}}},ef=Xp,tf=a(ef,$p,Kp,!1,null,null,null);tf.options.__file="packages/color-picker/src/components/sv-panel.vue";var nf=tf.exports,rf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-color-hue-slider",class:{"is-vertical":e.vertical}},[n("div",{ref:"bar",staticClass:"el-color-hue-slider__bar",on:{click:e.handleClick}}),n("div",{ref:"thumb",staticClass:"el-color-hue-slider__thumb",style:{left:e.thumbLeft+"px",top:e.thumbTop+"px"}})])},of=[];rf._withStripped=!0;var sf={name:"el-color-hue-slider",props:{color:{required:!0},vertical:Boolean},data:function(){return{thumbLeft:0,thumbTop:0}},computed:{hueValue:function(){var e=this.color.get("hue");return e}},watch:{hueValue:function(){this.update()}},methods:{handleClick:function(e){var t=this.$refs.thumb,n=e.target;n!==t&&this.handleDrag(e)},handleDrag:function(e){var t=this.$el.getBoundingClientRect(),n=this.$refs.thumb,r=void 0;if(this.vertical){var i=e.clientY-t.top;i=Math.min(i,t.height-n.offsetHeight/2),i=Math.max(n.offsetHeight/2,i),r=Math.round((i-n.offsetHeight/2)/(t.height-n.offsetHeight)*360)}else{var o=e.clientX-t.left;o=Math.min(o,t.width-n.offsetWidth/2),o=Math.max(n.offsetWidth/2,o),r=Math.round((o-n.offsetWidth/2)/(t.width-n.offsetWidth)*360)}this.color.set("hue",r)},getThumbLeft:function(){if(this.vertical)return 0;var e=this.$el,t=this.color.get("hue");if(!e)return 0;var n=this.$refs.thumb;return Math.round(t*(e.offsetWidth-n.offsetWidth/2)/360)},getThumbTop:function(){if(!this.vertical)return 0;var e=this.$el,t=this.color.get("hue");if(!e)return 0;var n=this.$refs.thumb;return Math.round(t*(e.offsetHeight-n.offsetHeight/2)/360)},update:function(){this.thumbLeft=this.getThumbLeft(),this.thumbTop=this.getThumbTop()}},mounted:function(){var e=this,t=this.$refs,n=t.bar,r=t.thumb,i={drag:function(t){e.handleDrag(t)},end:function(t){e.handleDrag(t)}};Jp(n,i),Jp(r,i),this.update()}},af=sf,cf=a(af,rf,of,!1,null,null,null);cf.options.__file="packages/color-picker/src/components/hue-slider.vue";var lf=cf.exports,uf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-color-alpha-slider",class:{"is-vertical":e.vertical}},[n("div",{ref:"bar",staticClass:"el-color-alpha-slider__bar",style:{background:e.background},on:{click:e.handleClick}}),n("div",{ref:"thumb",staticClass:"el-color-alpha-slider__thumb",style:{left:e.thumbLeft+"px",top:e.thumbTop+"px"}})])},df=[];uf._withStripped=!0;var hf={name:"el-color-alpha-slider",props:{color:{required:!0},vertical:Boolean},watch:{"color._alpha":function(){this.update()},"color.value":function(){this.update()}},methods:{handleClick:function(e){var t=this.$refs.thumb,n=e.target;n!==t&&this.handleDrag(e)},handleDrag:function(e){var t=this.$el.getBoundingClientRect(),n=this.$refs.thumb;if(this.vertical){var r=e.clientY-t.top;r=Math.max(n.offsetHeight/2,r),r=Math.min(r,t.height-n.offsetHeight/2),this.color.set("alpha",Math.round((r-n.offsetHeight/2)/(t.height-n.offsetHeight)*100))}else{var i=e.clientX-t.left;i=Math.max(n.offsetWidth/2,i),i=Math.min(i,t.width-n.offsetWidth/2),this.color.set("alpha",Math.round((i-n.offsetWidth/2)/(t.width-n.offsetWidth)*100))}},getThumbLeft:function(){if(this.vertical)return 0;var e=this.$el,t=this.color._alpha;if(!e)return 0;var n=this.$refs.thumb;return Math.round(t*(e.offsetWidth-n.offsetWidth/2)/100)},getThumbTop:function(){if(!this.vertical)return 0;var e=this.$el,t=this.color._alpha;if(!e)return 0;var n=this.$refs.thumb;return Math.round(t*(e.offsetHeight-n.offsetHeight/2)/100)},getBackground:function(){if(this.color&&this.color.value){var e=this.color.toRgb(),t=e.r,n=e.g,r=e.b;return"linear-gradient(to right, rgba("+t+", "+n+", "+r+", 0) 0%, rgba("+t+", "+n+", "+r+", 1) 100%)"}return null},update:function(){this.thumbLeft=this.getThumbLeft(),this.thumbTop=this.getThumbTop(),this.background=this.getBackground()}},data:function(){return{thumbLeft:0,thumbTop:0,background:null}},mounted:function(){var e=this,t=this.$refs,n=t.bar,r=t.thumb,i={drag:function(t){e.handleDrag(t)},end:function(t){e.handleDrag(t)}};Jp(n,i),Jp(r,i),this.update()}},pf=hf,ff=a(pf,uf,df,!1,null,null,null);ff.options.__file="packages/color-picker/src/components/alpha-slider.vue";var gf=ff.exports,mf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-color-predefine"},[n("div",{staticClass:"el-color-predefine__colors"},e._l(e.rgbaColors,(function(t,r){return n("div",{key:e.colors[r],staticClass:"el-color-predefine__color-selector",class:{selected:t.selected,"is-alpha":t._alpha<100},on:{click:function(t){e.handleSelect(r)}}},[n("div",{style:{"background-color":t.value}})])})),0)])},_f=[];mf._withStripped=!0;var vf={props:{colors:{type:Array,required:!0},color:{required:!0}},data:function(){return{rgbaColors:this.parseColors(this.colors,this.color)}},methods:{handleSelect:function(e){this.color.fromString(this.colors[e])},parseColors:function(e,t){return e.map((function(e){var n=new qp;return n.enableAlpha=!0,n.format="rgba",n.fromString(e),n.selected=n.value===t.value,n}))}},watch:{"$parent.currentColor":function(e){var t=new qp;t.fromString(e),this.rgbaColors.forEach((function(e){e.selected=t.compare(e)}))},colors:function(e){this.rgbaColors=this.parseColors(e,this.color)},color:function(e){this.rgbaColors=this.parseColors(this.colors,e)}}},Ef=vf,Af=a(Ef,mf,_f,!1,null,null,null);Af.options.__file="packages/color-picker/src/components/predefine.vue";var yf=Af.exports,Sf={name:"el-color-picker-dropdown",mixins:[H.a,_.a],components:{SvPanel:nf,HueSlider:lf,AlphaSlider:gf,ElInput:g.a,ElButton:se.a,Predefine:yf},props:{color:{required:!0},showAlpha:Boolean,predefine:Array},data:function(){return{customInput:""}},computed:{currentColor:function(){var e=this.$parent;return e.value||e.showPanelColor?e.color.value:""}},methods:{confirmValue:function(){this.$emit("pick")},handleConfirm:function(){this.color.fromString(this.customInput)}},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$el},watch:{showPopper:function(e){var t=this;!0===e&&this.$nextTick((function(){var e=t.$refs,n=e.sl,r=e.hue,i=e.alpha;n&&n.update(),r&&r.update(),i&&i.update()}))},currentColor:{immediate:!0,handler:function(e){this.customInput=e}}}},bf=Sf,Cf=a(bf,zp,Zp,!1,null,null,null);Cf.options.__file="packages/color-picker/src/components/picker-dropdown.vue";var Tf=Cf.exports,If={name:"ElColorPicker",mixins:[w.a],props:{value:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:String,popperClass:String,predefine:Array},inject:{elForm:{default:""},elFormItem:{default:""}},directives:{Clickoutside:F.a},computed:{displayedColor:function(){return this.value||this.showPanelColor?this.displayedRgb(this.color,this.showAlpha):"transparent"},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},colorSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},colorDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{value:function(e){e?e&&e!==this.color.value&&this.color.fromString(e):this.showPanelColor=!1},color:{deep:!0,handler:function(){this.showPanelColor=!0}},displayedColor:function(e){if(this.showPicker){var t=new qp({enableAlpha:this.showAlpha,format:this.colorFormat});t.fromString(this.value);var n=this.displayedRgb(t,this.showAlpha);e!==n&&this.$emit("active-change",e)}}},methods:{handleTrigger:function(){this.colorDisabled||(this.showPicker=!this.showPicker)},confirmValue:function(){var e=this.color.value;this.$emit("input",e),this.$emit("change",e),this.dispatch("ElFormItem","el.form.change",e),this.showPicker=!1},clearValue:function(){this.$emit("input",null),this.$emit("change",null),null!==this.value&&this.dispatch("ElFormItem","el.form.change",null),this.showPanelColor=!1,this.showPicker=!1,this.resetColor()},hide:function(){this.showPicker=!1,this.resetColor()},resetColor:function(){var e=this;this.$nextTick((function(t){e.value?e.color.fromString(e.value):e.showPanelColor=!1}))},displayedRgb:function(e,t){if(!(e instanceof qp))throw Error("color should be instance of Color Class");var n=e.toRgb(),r=n.r,i=n.g,o=n.b;return t?"rgba("+r+", "+i+", "+o+", "+e.get("alpha")/100+")":"rgb("+r+", "+i+", "+o+")"}},mounted:function(){var e=this.value;e&&this.color.fromString(e),this.popperElm=this.$refs.dropdown.$el},data:function(){var e=new qp({enableAlpha:this.showAlpha,format:this.colorFormat});return{color:e,showPicker:!1,showPanelColor:!1}},components:{PickerDropdown:Tf}},Rf=If,wf=a(Rf,Op,Np,!1,null,null,null);wf.options.__file="packages/color-picker/src/main.vue";var kf=wf.exports;kf.install=function(e){e.component(kf.name,kf)};var Of=kf,Nf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-transfer"},[n("transfer-panel",e._b({ref:"leftPanel",attrs:{data:e.sourceData,title:e.titles[0]||e.t("el.transfer.titles.0"),"default-checked":e.leftDefaultChecked,placeholder:e.filterPlaceholder||e.t("el.transfer.filterPlaceholder")},on:{"checked-change":e.onSourceCheckedChange}},"transfer-panel",e.$props,!1),[e._t("left-footer")],2),n("div",{staticClass:"el-transfer__buttons"},[n("el-button",{class:["el-transfer__button",e.hasButtonTexts?"is-with-texts":""],attrs:{type:"primary",disabled:0===e.rightChecked.length},nativeOn:{click:function(t){return e.addToLeft(t)}}},[n("i",{staticClass:"el-icon-arrow-left"}),void 0!==e.buttonTexts[0]?n("span",[e._v(e._s(e.buttonTexts[0]))]):e._e()]),n("el-button",{class:["el-transfer__button",e.hasButtonTexts?"is-with-texts":""],attrs:{type:"primary",disabled:0===e.leftChecked.length},nativeOn:{click:function(t){return e.addToRight(t)}}},[void 0!==e.buttonTexts[1]?n("span",[e._v(e._s(e.buttonTexts[1]))]):e._e(),n("i",{staticClass:"el-icon-arrow-right"})])],1),n("transfer-panel",e._b({ref:"rightPanel",attrs:{data:e.targetData,title:e.titles[1]||e.t("el.transfer.titles.1"),"default-checked":e.rightDefaultChecked,placeholder:e.filterPlaceholder||e.t("el.transfer.filterPlaceholder")},on:{"checked-change":e.onTargetCheckedChange}},"transfer-panel",e.$props,!1),[e._t("right-footer")],2)],1)},Lf=[];Nf._withStripped=!0;var Pf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-transfer-panel"},[n("p",{staticClass:"el-transfer-panel__header"},[n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleAllCheckedChange},model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}},[e._v("\n      "+e._s(e.title)+"\n      "),n("span",[e._v(e._s(e.checkedSummary))])])],1),n("div",{class:["el-transfer-panel__body",e.hasFooter?"is-with-footer":""]},[e.filterable?n("el-input",{staticClass:"el-transfer-panel__filter",attrs:{size:"small",placeholder:e.placeholder},nativeOn:{mouseenter:function(t){e.inputHover=!0},mouseleave:function(t){e.inputHover=!1}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[n("i",{class:["el-input__icon","el-icon-"+e.inputIcon],attrs:{slot:"prefix"},on:{click:e.clearQuery},slot:"prefix"})]):e._e(),n("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!e.hasNoMatch&&e.data.length>0,expression:"!hasNoMatch && data.length > 0"}],staticClass:"el-transfer-panel__list",class:{"is-filterable":e.filterable},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},e._l(e.filteredData,(function(t){return n("el-checkbox",{key:t[e.keyProp],staticClass:"el-transfer-panel__item",attrs:{label:t[e.keyProp],disabled:t[e.disabledProp]}},[n("option-content",{attrs:{option:t}})],1)})),1),n("p",{directives:[{name:"show",rawName:"v-show",value:e.hasNoMatch,expression:"hasNoMatch"}],staticClass:"el-transfer-panel__empty"},[e._v(e._s(e.t("el.transfer.noMatch")))]),n("p",{directives:[{name:"show",rawName:"v-show",value:0===e.data.length&&!e.hasNoMatch,expression:"data.length === 0 && !hasNoMatch"}],staticClass:"el-transfer-panel__empty"},[e._v(e._s(e.t("el.transfer.noData")))])],1),e.hasFooter?n("p",{staticClass:"el-transfer-panel__footer"},[e._t("default")],2):e._e()])},Df=[];Pf._withStripped=!0;var Mf={mixins:[_.a],name:"ElTransferPanel",componentName:"ElTransferPanel",components:{ElCheckboxGroup:Oi.a,ElCheckbox:Dr.a,ElInput:g.a,OptionContent:{props:{option:Object},render:function(e){var t=function e(t){return"ElTransferPanel"===t.$options.componentName?t:t.$parent?e(t.$parent):t},n=t(this),r=n.$parent||n;return n.renderContent?n.renderContent(e,this.option):r.$scopedSlots.default?r.$scopedSlots.default({option:this.option}):e("span",[this.option[n.labelProp]||this.option[n.keyProp]])}}},props:{data:{type:Array,default:function(){return[]}},renderContent:Function,placeholder:String,title:String,filterable:Boolean,format:Object,filterMethod:Function,defaultChecked:Array,props:Object},data:function(){return{checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}},watch:{checked:function(e,t){if(this.updateAllChecked(),this.checkChangeByUser){var n=e.concat(t).filter((function(n){return-1===e.indexOf(n)||-1===t.indexOf(n)}));this.$emit("checked-change",e,n)}else this.$emit("checked-change",e),this.checkChangeByUser=!0},data:function(){var e=this,t=[],n=this.filteredData.map((function(t){return t[e.keyProp]}));this.checked.forEach((function(e){n.indexOf(e)>-1&&t.push(e)})),this.checkChangeByUser=!1,this.checked=t},checkableData:function(){this.updateAllChecked()},defaultChecked:{immediate:!0,handler:function(e,t){var n=this;if(!t||e.length!==t.length||!e.every((function(e){return t.indexOf(e)>-1}))){var r=[],i=this.checkableData.map((function(e){return e[n.keyProp]}));e.forEach((function(e){i.indexOf(e)>-1&&r.push(e)})),this.checkChangeByUser=!1,this.checked=r}}}},computed:{filteredData:function(){var e=this;return this.data.filter((function(t){if("function"===typeof e.filterMethod)return e.filterMethod(e.query,t);var n=t[e.labelProp]||t[e.keyProp].toString();return n.toLowerCase().indexOf(e.query.toLowerCase())>-1}))},checkableData:function(){var e=this;return this.filteredData.filter((function(t){return!t[e.disabledProp]}))},checkedSummary:function(){var e=this.checked.length,t=this.data.length,n=this.format,r=n.noChecked,i=n.hasChecked;return r&&i?e>0?i.replace(/\${checked}/g,e).replace(/\${total}/g,t):r.replace(/\${total}/g,t):e+"/"+t},isIndeterminate:function(){var e=this.checked.length;return e>0&&e<this.checkableData.length},hasNoMatch:function(){return this.query.length>0&&0===this.filteredData.length},inputIcon:function(){return this.query.length>0&&this.inputHover?"circle-close":"search"},labelProp:function(){return this.props.label||"label"},keyProp:function(){return this.props.key||"key"},disabledProp:function(){return this.props.disabled||"disabled"},hasFooter:function(){return!!this.$slots.default}},methods:{updateAllChecked:function(){var e=this,t=this.checkableData.map((function(t){return t[e.keyProp]}));this.allChecked=t.length>0&&t.every((function(t){return e.checked.indexOf(t)>-1}))},handleAllCheckedChange:function(e){var t=this;this.checked=e?this.checkableData.map((function(e){return e[t.keyProp]})):[]},clearQuery:function(){"circle-close"===this.inputIcon&&(this.query="")}}},xf=Mf,Bf=a(xf,Pf,Df,!1,null,null,null);Bf.options.__file="packages/transfer/src/transfer-panel.vue";var Uf=Bf.exports,Ff={name:"ElTransfer",mixins:[w.a,_.a,I.a],components:{TransferPanel:Uf,ElButton:se.a},props:{data:{type:Array,default:function(){return[]}},titles:{type:Array,default:function(){return[]}},buttonTexts:{type:Array,default:function(){return[]}},filterPlaceholder:{type:String,default:""},filterMethod:Function,leftDefaultChecked:{type:Array,default:function(){return[]}},rightDefaultChecked:{type:Array,default:function(){return[]}},renderContent:Function,value:{type:Array,default:function(){return[]}},format:{type:Object,default:function(){return{}}},filterable:Boolean,props:{type:Object,default:function(){return{label:"label",key:"key",disabled:"disabled"}}},targetOrder:{type:String,default:"original"}},data:function(){return{leftChecked:[],rightChecked:[]}},computed:{dataObj:function(){var e=this.props.key;return this.data.reduce((function(t,n){return(t[n[e]]=n)&&t}),{})},sourceData:function(){var e=this;return this.data.filter((function(t){return-1===e.value.indexOf(t[e.props.key])}))},targetData:function(){var e=this;return"original"===this.targetOrder?this.data.filter((function(t){return e.value.indexOf(t[e.props.key])>-1})):this.value.reduce((function(t,n){var r=e.dataObj[n];return r&&t.push(r),t}),[])},hasButtonTexts:function(){return 2===this.buttonTexts.length}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}},methods:{getMigratingConfig:function(){return{props:{"footer-format":"footer-format is renamed to format."}}},onSourceCheckedChange:function(e,t){this.leftChecked=e,void 0!==t&&this.$emit("left-check-change",e,t)},onTargetCheckedChange:function(e,t){this.rightChecked=e,void 0!==t&&this.$emit("right-check-change",e,t)},addToLeft:function(){var e=this.value.slice();this.rightChecked.forEach((function(t){var n=e.indexOf(t);n>-1&&e.splice(n,1)})),this.$emit("input",e),this.$emit("change",e,"left",this.rightChecked)},addToRight:function(){var e=this,t=this.value.slice(),n=[],r=this.props.key;this.data.forEach((function(t){var i=t[r];e.leftChecked.indexOf(i)>-1&&-1===e.value.indexOf(i)&&n.push(i)})),t="unshift"===this.targetOrder?n.concat(t):t.concat(n),this.$emit("input",t),this.$emit("change",t,"right",this.leftChecked)},clearQuery:function(e){"left"===e?this.$refs.leftPanel.query="":"right"===e&&(this.$refs.rightPanel.query="")}}},Vf=Ff,jf=a(Vf,Nf,Lf,!1,null,null,null);jf.options.__file="packages/transfer/src/main.vue";var Gf=jf.exports;Gf.install=function(e){e.component(Gf.name,Gf)};var Hf=Gf,Qf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"el-container",class:{"is-vertical":e.isVertical}},[e._t("default")],2)},Wf=[];Qf._withStripped=!0;var qf={name:"ElContainer",componentName:"ElContainer",props:{direction:String},computed:{isVertical:function(){return"vertical"===this.direction||"horizontal"!==this.direction&&(!(!this.$slots||!this.$slots.default)&&this.$slots.default.some((function(e){var t=e.componentOptions&&e.componentOptions.tag;return"el-header"===t||"el-footer"===t})))}}},zf=qf,Zf=a(zf,Qf,Wf,!1,null,null,null);Zf.options.__file="packages/container/src/main.vue";var $f=Zf.exports;$f.install=function(e){e.component($f.name,$f)};var Kf=$f,Yf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"el-header",style:{height:e.height}},[e._t("default")],2)},Jf=[];Yf._withStripped=!0;var Xf={name:"ElHeader",componentName:"ElHeader",props:{height:{type:String,default:"60px"}}},eg=Xf,tg=a(eg,Yf,Jf,!1,null,null,null);tg.options.__file="packages/header/src/main.vue";var ng=tg.exports;ng.install=function(e){e.component(ng.name,ng)};var rg=ng,ig=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("aside",{staticClass:"el-aside",style:{width:e.width}},[e._t("default")],2)},og=[];ig._withStripped=!0;var sg={name:"ElAside",componentName:"ElAside",props:{width:{type:String,default:"300px"}}},ag=sg,cg=a(ag,ig,og,!1,null,null,null);cg.options.__file="packages/aside/src/main.vue";var lg=cg.exports;lg.install=function(e){e.component(lg.name,lg)};var ug=lg,dg=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"el-main"},[e._t("default")],2)},hg=[];dg._withStripped=!0;var pg={name:"ElMain",componentName:"ElMain"},fg=pg,gg=a(fg,dg,hg,!1,null,null,null);gg.options.__file="packages/main/src/main.vue";var mg=gg.exports;mg.install=function(e){e.component(mg.name,mg)};var _g=mg,vg=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"el-footer",style:{height:e.height}},[e._t("default")],2)},Eg=[];vg._withStripped=!0;var Ag={name:"ElFooter",componentName:"ElFooter",props:{height:{type:String,default:"60px"}}},yg=Ag,Sg=a(yg,vg,Eg,!1,null,null,null);Sg.options.__file="packages/footer/src/main.vue";var bg=Sg.exports;bg.install=function(e){e.component(bg.name,bg)};var Cg,Tg,Ig=bg,Rg={name:"ElTimeline",props:{reverse:{type:Boolean,default:!1}},provide:function(){return{timeline:this}},render:function(){var e=arguments[0],t=this.reverse,n={"el-timeline":!0,"is-reverse":t},r=this.$slots.default||[];return t&&(r=r.reverse()),e("ul",{class:n},[r])}},wg=Rg,kg=a(wg,Cg,Tg,!1,null,null,null);kg.options.__file="packages/timeline/src/main.vue";var Og=kg.exports;Og.install=function(e){e.component(Og.name,Og)};var Ng=Og,Lg=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"el-timeline-item"},[n("div",{staticClass:"el-timeline-item__tail"}),e.$slots.dot?e._e():n("div",{staticClass:"el-timeline-item__node",class:["el-timeline-item__node--"+(e.size||""),"el-timeline-item__node--"+(e.type||"")],style:{backgroundColor:e.color}},[e.icon?n("i",{staticClass:"el-timeline-item__icon",class:e.icon}):e._e()]),e.$slots.dot?n("div",{staticClass:"el-timeline-item__dot"},[e._t("dot")],2):e._e(),n("div",{staticClass:"el-timeline-item__wrapper"},[e.hideTimestamp||"top"!==e.placement?e._e():n("div",{staticClass:"el-timeline-item__timestamp is-top"},[e._v("\n      "+e._s(e.timestamp)+"\n    ")]),n("div",{staticClass:"el-timeline-item__content"},[e._t("default")],2),e.hideTimestamp||"bottom"!==e.placement?e._e():n("div",{staticClass:"el-timeline-item__timestamp is-bottom"},[e._v("\n      "+e._s(e.timestamp)+"\n    ")])])])},Pg=[];Lg._withStripped=!0;var Dg={name:"ElTimelineItem",inject:["timeline"],props:{timestamp:String,hideTimestamp:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},type:String,color:String,size:{type:String,default:"normal"},icon:String}},Mg=Dg,xg=a(Mg,Lg,Pg,!1,null,null,null);xg.options.__file="packages/timeline/src/item.vue";var Bg=xg.exports;Bg.install=function(e){e.component(Bg.name,Bg)};var Ug=Bg,Fg=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",e._b({class:["el-link",e.type?"el-link--"+e.type:"",e.disabled&&"is-disabled",e.underline&&!e.disabled&&"is-underline"],attrs:{href:e.disabled?null:e.href},on:{click:e.handleClick}},"a",e.$attrs,!1),[e.icon?n("i",{class:e.icon}):e._e(),e.$slots.default?n("span",{staticClass:"el-link--inner"},[e._t("default")],2):e._e(),e.$slots.icon?[e.$slots.icon?e._t("icon"):e._e()]:e._e()],2)},Vg=[];Fg._withStripped=!0;var jg={name:"ElLink",props:{type:{type:String,default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:String,icon:String},methods:{handleClick:function(e){this.disabled||this.href||this.$emit("click",e)}}},Gg=jg,Hg=a(Gg,Fg,Vg,!1,null,null,null);Hg.options.__file="packages/link/src/main.vue";var Qg=Hg.exports;Qg.install=function(e){e.component(Qg.name,Qg)};var Wg=Qg,qg=function(e,t){var n=t._c;return n("div",t._g(t._b({class:[t.data.staticClass,"el-divider","el-divider--"+t.props.direction]},"div",t.data.attrs,!1),t.listeners),[t.slots().default&&"vertical"!==t.props.direction?n("div",{class:["el-divider__text","is-"+t.props.contentPosition]},[t._t("default")],2):t._e()])},zg=[];qg._withStripped=!0;var Zg={name:"ElDivider",props:{direction:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}},contentPosition:{type:String,default:"center",validator:function(e){return-1!==["left","center","right"].indexOf(e)}}}},$g=Zg,Kg=a($g,qg,zg,!0,null,null,null);Kg.options.__file="packages/divider/src/main.vue";var Yg=Kg.exports;Yg.install=function(e){e.component(Yg.name,Yg)};var Jg=Yg,Xg=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-image"},[e.loading?e._t("placeholder",[n("div",{staticClass:"el-image__placeholder"})]):e.error?e._t("error",[n("div",{staticClass:"el-image__error"},[e._v(e._s(e.t("el.image.error")))])]):n("img",e._g(e._b({staticClass:"el-image__inner",class:{"el-image__inner--center":e.alignCenter,"el-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.src},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners)),e.preview?[e.showViewer?n("image-viewer",{attrs:{"z-index":e.zIndex,"initial-index":e.imageIndex,"on-close":e.closeViewer,"url-list":e.previewSrcList}}):e._e()]:e._e()],2)},em=[];Xg._withStripped=!0;var tm=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"viewer-fade"}},[n("div",{ref:"el-image-viewer__wrapper",staticClass:"el-image-viewer__wrapper",style:{"z-index":e.viewerZIndex},attrs:{tabindex:"-1"}},[n("div",{staticClass:"el-image-viewer__mask",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleMaskClick(t)}}}),n("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:e.hide}},[n("i",{staticClass:"el-icon-close"})]),e.isSingle?e._e():[n("span",{staticClass:"el-image-viewer__btn el-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[n("i",{staticClass:"el-icon-arrow-left"})]),n("span",{staticClass:"el-image-viewer__btn el-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[n("i",{staticClass:"el-icon-arrow-right"})])],n("div",{staticClass:"el-image-viewer__btn el-image-viewer__actions"},[n("div",{staticClass:"el-image-viewer__actions__inner"},[n("i",{staticClass:"el-icon-zoom-out",on:{click:function(t){e.handleActions("zoomOut")}}}),n("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){e.handleActions("zoomIn")}}}),n("i",{staticClass:"el-image-viewer__actions__divider"}),n("i",{class:e.mode.icon,on:{click:e.toggleMode}}),n("i",{staticClass:"el-image-viewer__actions__divider"}),n("i",{staticClass:"el-icon-refresh-left",on:{click:function(t){e.handleActions("anticlocelise")}}}),n("i",{staticClass:"el-icon-refresh-right",on:{click:function(t){e.handleActions("clocelise")}}})])]),n("div",{staticClass:"el-image-viewer__canvas"},e._l(e.urlList,(function(t,r){return r===e.index?n("img",{key:t,ref:"img",refInFor:!0,staticClass:"el-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}}):e._e()})),0)],2)])},nm=[];tm._withStripped=!0;var rm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},im={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},om=Object(v["isFirefox"])()?"DOMMouseScroll":"mousewheel",sm={name:"elImageViewer",props:{urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!1,mode:im.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}},computed:{isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.urlList[this.index]},imgStyle:function(){var e=this.transform,t=e.scale,n=e.deg,r=e.offsetX,i=e.offsetY,o=e.enableTransition,s={transform:"scale("+t+") rotate("+n+"deg)",transition:o?"transform .3s":"","margin-left":r+"px","margin-top":i+"px"};return this.mode===im.CONTAIN&&(s.maxWidth=s.maxHeight="100%"),s},viewerZIndex:function(){var e=b["PopupManager"].nextZIndex();return this.zIndex>e?this.zIndex:e}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg:function(e){var t=this;this.$nextTick((function(e){var n=t.$refs.img[0];n.complete||(t.loading=!0)}))}},methods:{hide:function(){this.deviceSupportUninstall(),this.onClose()},deviceSupportInstall:function(){var e=this;this._keyDownHandler=function(t){t.stopPropagation();var n=t.keyCode;switch(n){case 27:e.hide();break;case 32:e.toggleMode();break;case 37:e.prev();break;case 38:e.handleActions("zoomIn");break;case 39:e.next();break;case 40:e.handleActions("zoomOut");break}},this._mouseWheelHandler=Object(v["rafThrottle"])((function(t){var n=t.wheelDelta?t.wheelDelta:-t.detail;n>0?e.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):e.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),Object(Ue["on"])(document,"keydown",this._keyDownHandler),Object(Ue["on"])(document,om,this._mouseWheelHandler)},deviceSupportUninstall:function(){Object(Ue["off"])(document,"keydown",this._keyDownHandler),Object(Ue["off"])(document,om,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(e){this.loading=!1},handleImgError:function(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown:function(e){var t=this;if(!this.loading&&0===e.button){var n=this.transform,r=n.offsetX,i=n.offsetY,o=e.pageX,s=e.pageY;this._dragHandler=Object(v["rafThrottle"])((function(e){t.transform.offsetX=r+e.pageX-o,t.transform.offsetY=i+e.pageY-s})),Object(Ue["on"])(document,"mousemove",this._dragHandler),Object(Ue["on"])(document,"mouseup",(function(e){Object(Ue["off"])(document,"mousemove",t._dragHandler)})),e.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var e=Object.keys(im),t=Object.values(im),n=t.indexOf(this.mode),r=(n+1)%e.length;this.mode=im[e[r]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var e=this.urlList.length;this.index=(this.index-1+e)%e}},next:function(){if(!this.isLast||this.infinite){var e=this.urlList.length;this.index=(this.index+1)%e}},handleActions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var n=rm({zoomRate:.2,rotateDeg:90,enableTransition:!0},t),r=n.zoomRate,i=n.rotateDeg,o=n.enableTransition,s=this.transform;switch(e){case"zoomOut":s.scale>.2&&(s.scale=parseFloat((s.scale-r).toFixed(3)));break;case"zoomIn":s.scale=parseFloat((s.scale+r).toFixed(3));break;case"clocelise":s.deg+=i;break;case"anticlocelise":s.deg-=i;break}s.enableTransition=o}}},mounted:function(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["el-image-viewer__wrapper"].focus()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},am=sm,cm=a(am,tm,nm,!1,null,null,null);cm.options.__file="packages/image/src/image-viewer.vue";var lm=cm.exports,um=function(){return void 0!==document.documentElement.style.objectFit},dm={NONE:"none",CONTAIN:"contain",COVER:"cover",FILL:"fill",SCALE_DOWN:"scale-down"},hm="",pm={name:"ElImage",mixins:[_.a],inheritAttrs:!1,components:{ImageViewer:lm},props:{src:String,fit:String,lazy:Boolean,scrollContainer:{},previewSrcList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3}},data:function(){return{loading:!0,error:!1,show:!this.lazy,imageWidth:0,imageHeight:0,showViewer:!1}},computed:{imageStyle:function(){var e=this.fit;return!this.$isServer&&e?um()?{"object-fit":e}:this.getImageStyle(e):{}},alignCenter:function(){return!this.$isServer&&!um()&&this.fit!==dm.FILL},preview:function(){var e=this.previewSrcList;return Array.isArray(e)&&e.length>0},imageIndex:function(){var e=0,t=this.previewSrcList.indexOf(this.src);return t>=0&&(e=t),e}},watch:{src:function(e){this.show&&this.loadImage()},show:function(e){e&&this.loadImage()}},mounted:function(){this.lazy?this.addLazyLoadListener():this.loadImage()},beforeDestroy:function(){this.lazy&&this.removeLazyLoadListener()},methods:{loadImage:function(){var e=this;if(!this.$isServer){this.loading=!0,this.error=!1;var t=new Image;t.onload=function(n){return e.handleLoad(n,t)},t.onerror=this.handleError.bind(this),Object.keys(this.$attrs).forEach((function(n){var r=e.$attrs[n];t.setAttribute(n,r)})),t.src=this.src}},handleLoad:function(e,t){this.imageWidth=t.width,this.imageHeight=t.height,this.loading=!1,this.error=!1},handleError:function(e){this.loading=!1,this.error=!0,this.$emit("error",e)},handleLazyLoad:function(){Object(Ue["isInContainer"])(this.$el,this._scrollContainer)&&(this.show=!0,this.removeLazyLoadListener())},addLazyLoadListener:function(){if(!this.$isServer){var e=this.scrollContainer,t=null;t=Object(Hd["isHtmlElement"])(e)?e:Object(Hd["isString"])(e)?document.querySelector(e):Object(Ue["getScrollContainer"])(this.$el),t&&(this._scrollContainer=t,this._lazyLoadHandler=xh()(200,this.handleLazyLoad),Object(Ue["on"])(t,"scroll",this._lazyLoadHandler),this.handleLazyLoad())}},removeLazyLoadListener:function(){var e=this._scrollContainer,t=this._lazyLoadHandler;!this.$isServer&&e&&t&&(Object(Ue["off"])(e,"scroll",t),this._scrollContainer=null,this._lazyLoadHandler=null)},getImageStyle:function(e){var t=this.imageWidth,n=this.imageHeight,r=this.$el,i=r.clientWidth,o=r.clientHeight;if(!t||!n||!i||!o)return{};var s=t/n,a=i/o;if(e===dm.SCALE_DOWN){var c=t<i&&n<o;e=c?dm.NONE:dm.CONTAIN}switch(e){case dm.NONE:return{width:"auto",height:"auto"};case dm.CONTAIN:return s<a?{width:"auto"}:{height:"auto"};case dm.COVER:return s<a?{height:"auto"}:{width:"auto"};default:return{}}},clickHandler:function(){this.preview&&(hm=document.body.style.overflow,document.body.style.overflow="hidden",this.showViewer=!0)},closeViewer:function(){document.body.style.overflow=hm,this.showViewer=!1}}},fm=pm,gm=a(fm,Xg,em,!1,null,null,null);gm.options.__file="packages/image/src/main.vue";var mm=gm.exports;mm.install=function(e){e.component(mm.name,mm)};var _m=mm,vm=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-calendar"},[n("div",{staticClass:"el-calendar__header"},[n("div",{staticClass:"el-calendar__title"},[e._v("\n      "+e._s(e.i18nDate)+"\n    ")]),0===e.validatedRange.length?n("div",{staticClass:"el-calendar__button-group"},[n("el-button-group",[n("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(t){e.selectDate("prev-month")}}},[e._v("\n          "+e._s(e.t("el.datepicker.prevMonth"))+"\n        ")]),n("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(t){e.selectDate("today")}}},[e._v("\n          "+e._s(e.t("el.datepicker.today"))+"\n        ")]),n("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(t){e.selectDate("next-month")}}},[e._v("\n          "+e._s(e.t("el.datepicker.nextMonth"))+"\n        ")])],1)],1):e._e()]),0===e.validatedRange.length?n("div",{key:"no-range",staticClass:"el-calendar__body"},[n("date-table",{attrs:{date:e.date,"selected-day":e.realSelectedDay,"first-day-of-week":e.realFirstDayOfWeek},on:{pick:e.pickDay}})],1):n("div",{key:"has-range",staticClass:"el-calendar__body"},e._l(e.validatedRange,(function(t,r){return n("date-table",{key:r,attrs:{date:t[0],"selected-day":e.realSelectedDay,range:t,"hide-header":0!==r,"first-day-of-week":e.realFirstDayOfWeek},on:{pick:e.pickDay}})})),1)])},Em=[];vm._withStripped=!0;var Am,ym,Sm=n(20),bm=n.n(Sm),Cm={props:{selectedDay:String,range:{type:Array,validator:function(e){if(!e||!e.length)return!0;var t=e[0],n=e[1];return Object(io["validateRangeInOneMonth"])(t,n)}},date:Date,hideHeader:Boolean,firstDayOfWeek:Number},inject:["elCalendar"],methods:{toNestedArr:function(e){return Object(io["range"])(e.length/7).map((function(t,n){var r=7*n;return e.slice(r,r+7)}))},getFormateDate:function(e,t){if(!e||-1===["prev","current","next"].indexOf(t))throw new Error("invalid day or type");var n=this.curMonthDatePrefix;return"prev"===t?n=this.prevMonthDatePrefix:"next"===t&&(n=this.nextMonthDatePrefix),e=("00"+e).slice(-2),n+"-"+e},getCellClass:function(e){var t=e.text,n=e.type,r=[n];if("current"===n){var i=this.getFormateDate(t,n);i===this.selectedDay&&r.push("is-selected"),i===this.formatedToday&&r.push("is-today")}return r},pickDay:function(e){var t=e.text,n=e.type,r=this.getFormateDate(t,n);this.$emit("pick",r)},cellRenderProxy:function(e){var t=e.text,n=e.type,r=this.$createElement,i=this.elCalendar.$scopedSlots.dateCell;if(!i)return r("span",[t]);var o=this.getFormateDate(t,n),s=new Date(o),a={isSelected:this.selectedDay===o,type:n+"-month",day:o};return i({date:s,data:a})}},computed:{WEEK_DAYS:function(){return Object(io["getI18nSettings"])().dayNames},prevMonthDatePrefix:function(){var e=new Date(this.date.getTime());return e.setDate(0),bm.a.format(e,"yyyy-MM")},curMonthDatePrefix:function(){return bm.a.format(this.date,"yyyy-MM")},nextMonthDatePrefix:function(){var e=new Date(this.date.getFullYear(),this.date.getMonth()+1,1);return bm.a.format(e,"yyyy-MM")},formatedToday:function(){return this.elCalendar.formatedToday},isInRange:function(){return this.range&&this.range.length},rows:function(){var e=[];if(this.isInRange){var t=this.range,n=t[0],r=t[1],i=Object(io["range"])(r.getDate()-n.getDate()+1).map((function(e,t){return{text:n.getDate()+t,type:"current"}})),o=i.length%7;o=0===o?0:7-o;var s=Object(io["range"])(o).map((function(e,t){return{text:t+1,type:"next"}}));e=i.concat(s)}else{var a=this.date,c=Object(io["getFirstDayOfMonth"])(a);c=0===c?7:c;var l="number"===typeof this.firstDayOfWeek?this.firstDayOfWeek:1,u=(7+c-l)%7,d=Object(io["getPrevMonthLastDays"])(a,u).map((function(e){return{text:e,type:"prev"}})),h=Object(io["getMonthDays"])(a).map((function(e){return{text:e,type:"current"}}));e=[].concat(d,h);var p=Object(io["range"])(42-e.length).map((function(e,t){return{text:t+1,type:"next"}}));e=e.concat(p)}return this.toNestedArr(e)},weekDays:function(){var e=this.firstDayOfWeek,t=this.WEEK_DAYS;return"number"!==typeof e||0===e?t.slice():t.slice(e).concat(t.slice(0,e))}},render:function(){var e=this,t=arguments[0],n=this.hideHeader?null:t("thead",[this.weekDays.map((function(e){return t("th",{key:e},[e])}))]);return t("table",{class:{"el-calendar-table":!0,"is-range":this.isInRange},attrs:{cellspacing:"0",cellpadding:"0"}},[n,t("tbody",[this.rows.map((function(n,r){return t("tr",{class:{"el-calendar-table__row":!0,"el-calendar-table__row--hide-border":0===r&&e.hideHeader},key:r},[n.map((function(n,r){return t("td",{key:r,class:e.getCellClass(n),on:{click:e.pickDay.bind(e,n)}},[t("div",{class:"el-calendar-day"},[e.cellRenderProxy(n)])])}))])}))])])}},Tm=Cm,Im=a(Tm,Am,ym,!1,null,null,null);Im.options.__file="packages/calendar/src/date-table.vue";var Rm=Im.exports,wm=["prev-month","today","next-month"],km=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Om=864e5,Nm={name:"ElCalendar",mixins:[_.a],components:{DateTable:Rm,ElButton:se.a,ElButtonGroup:ce.a},props:{value:[Date,String,Number],range:{type:Array,validator:function(e){return!Array.isArray(e)||2===e.length&&e.every((function(e){return"string"===typeof e||"number"===typeof e||e instanceof Date}))}},firstDayOfWeek:{type:Number,default:1}},provide:function(){return{elCalendar:this}},methods:{pickDay:function(e){this.realSelectedDay=e},selectDate:function(e){if(-1===wm.indexOf(e))throw new Error("invalid type "+e);var t="";t="prev-month"===e?this.prevMonthDatePrefix+"-01":"next-month"===e?this.nextMonthDatePrefix+"-01":this.formatedToday,t!==this.formatedDate&&this.pickDay(t)},toDate:function(e){if(!e)throw new Error("invalid val");return e instanceof Date?e:new Date(e)},rangeValidator:function(e,t){var n=this.realFirstDayOfWeek,r=t?n:0===n?6:n-1,i=(t?"start":"end")+" of range should be "+km[r]+".";return e.getDay()===r||(console.warn("[ElementCalendar]",i,"Invalid range will be ignored."),!1)}},computed:{prevMonthDatePrefix:function(){var e=new Date(this.date.getTime());return e.setDate(0),bm.a.format(e,"yyyy-MM")},curMonthDatePrefix:function(){return bm.a.format(this.date,"yyyy-MM")},nextMonthDatePrefix:function(){var e=new Date(this.date.getFullYear(),this.date.getMonth()+1,1);return bm.a.format(e,"yyyy-MM")},formatedDate:function(){return bm.a.format(this.date,"yyyy-MM-dd")},i18nDate:function(){var e=this.date.getFullYear(),t=this.date.getMonth()+1;return e+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+t)},formatedToday:function(){return bm.a.format(this.now,"yyyy-MM-dd")},realSelectedDay:{get:function(){return this.value?this.formatedDate:this.selectedDay},set:function(e){this.selectedDay=e;var t=new Date(e);this.$emit("input",t)}},date:function(){if(this.value)return this.toDate(this.value);if(this.realSelectedDay){var e=this.selectedDay.split("-");return new Date(e[0],e[1]-1,e[2])}return this.validatedRange.length?this.validatedRange[0][0]:this.now},validatedRange:function(){var e=this,t=this.range;if(!t)return[];if(t=t.reduce((function(t,n,r){var i=e.toDate(n);return e.rangeValidator(i,0===r)&&(t=t.concat(i)),t}),[]),2===t.length){var n=t,r=n[0],i=n[1];if(r>i)return console.warn("[ElementCalendar]end time should be greater than start time"),[];if(Object(io["validateRangeInOneMonth"])(r,i))return[[r,i]];var o=[],s=new Date(r.getFullYear(),r.getMonth()+1,1),a=this.toDate(s.getTime()-Om);if(!Object(io["validateRangeInOneMonth"])(s,i))return console.warn("[ElementCalendar]start time and end time interval must not exceed two months"),[];o.push([r,a]);var c=this.realFirstDayOfWeek,l=s.getDay(),u=0;return l!==c&&(0===c?u=7-l:(u=c-l,u=u>0?u:7+u)),s=this.toDate(s.getTime()+u*Om),s.getDate()<i.getDate()&&o.push([s,i]),o}return[]},realFirstDayOfWeek:function(){return this.firstDayOfWeek<1||this.firstDayOfWeek>6?0:Math.floor(this.firstDayOfWeek)}},data:function(){return{selectedDay:"",now:new Date}}},Lm=Nm,Pm=a(Lm,vm,Em,!1,null,null,null);Pm.options.__file="packages/calendar/src/main.vue";var Dm=Pm.exports;Dm.install=function(e){e.component(Dm.name,Dm)};var Mm=Dm,xm=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-fade-in"}},[e.visible?n("div",{staticClass:"el-backtop",style:{right:e.styleRight,bottom:e.styleBottom},on:{click:function(t){return t.stopPropagation(),e.handleClick(t)}}},[e._t("default",[n("el-icon",{attrs:{name:"caret-top"}})])],2):e._e()])},Bm=[];xm._withStripped=!0;var Um=function(e){return Math.pow(e,3)},Fm=function(e){return e<.5?Um(2*e)/2:1-Um(2*(1-e))/2},Vm={name:"ElBacktop",props:{visibilityHeight:{type:Number,default:200},target:[String],right:{type:Number,default:40},bottom:{type:Number,default:40}},data:function(){return{el:null,container:null,visible:!1}},computed:{styleBottom:function(){return this.bottom+"px"},styleRight:function(){return this.right+"px"}},mounted:function(){this.init(),this.throttledScrollHandler=xh()(300,this.onScroll),this.container.addEventListener("scroll",this.throttledScrollHandler)},methods:{init:function(){if(this.container=document,this.el=document.documentElement,this.target){if(this.el=document.querySelector(this.target),!this.el)throw new Error("target is not existed: "+this.target);this.container=this.el}},onScroll:function(){var e=this.el.scrollTop;this.visible=e>=this.visibilityHeight},handleClick:function(e){this.scrollToTop(),this.$emit("click",e)},scrollToTop:function(){var e=this.el,t=Date.now(),n=e.scrollTop,r=window.requestAnimationFrame||function(e){return setTimeout(e,16)},i=function i(){var o=(Date.now()-t)/500;o<1?(e.scrollTop=n*(1-Fm(o)),r(i)):e.scrollTop=0};r(i)}},beforeDestroy:function(){this.container.removeEventListener("scroll",this.throttledScrollHandler)}},jm=Vm,Gm=a(jm,xm,Bm,!1,null,null,null);Gm.options.__file="packages/backtop/src/main.vue";var Hm=Gm.exports;Hm.install=function(e){e.component(Hm.name,Hm)};var Qm=Hm,Wm=function(e,t){if(e===window&&(e=document.documentElement),1!==e.nodeType)return[];var n=window.getComputedStyle(e,null);return t?n[t]:n},qm=function(e){return Object.keys(e||{}).map((function(t){return[t,e[t]]}))},zm=function(e,t){return e===window||e===document?document.documentElement[t]:e[t]},Zm=function(e){return zm(e,"offsetHeight")},$m=function(e){return zm(e,"clientHeight")},Km="ElInfiniteScroll",Ym={delay:{type:Number,default:200},distance:{type:Number,default:0},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Jm=function(e,t){return Object(Hd["isHtmlElement"])(e)?qm(Ym).reduce((function(n,r){var i=r[0],o=r[1],s=o.type,a=o.default,c=e.getAttribute("infinite-scroll-"+i);switch(c=Object(Hd["isUndefined"])(t[c])?c:t[c],s){case Number:c=Number(c),c=Number.isNaN(c)?a:c;break;case Boolean:c=Object(Hd["isDefined"])(c)?"false"!==c&&Boolean(c):a;break;default:c=s(c)}return n[i]=c,n}),{}):{}},Xm=function(e){return e.getBoundingClientRect().top},e_=function(e){var t=this[Km],n=t.el,r=t.vm,i=t.container,o=t.observer,s=Jm(n,r),a=s.distance,c=s.disabled;if(!c){var l=i.getBoundingClientRect();if(l.width||l.height){var u=!1;if(i===n){var d=i.scrollTop+$m(i);u=i.scrollHeight-d<=a}else{var h=Zm(n)+Xm(n)-Xm(i),p=Zm(i),f=Number.parseFloat(Wm(i,"borderBottomWidth"));u=h-p+f<=a}u&&Object(Hd["isFunction"])(e)?e.call(r):o&&(o.disconnect(),this[Km].observer=null)}}},t_={name:"InfiniteScroll",inserted:function(e,t,n){var r=t.value,i=n.context,o=Object(Ue["getScrollContainer"])(e,!0),s=Jm(e,i),a=s.delay,c=s.immediate,l=B()(a,e_.bind(e,r));if(e[Km]={el:e,vm:i,container:o,onScroll:l},o&&(o.addEventListener("scroll",l),c)){var u=e[Km].observer=new MutationObserver(l);u.observe(o,{childList:!0,subtree:!0}),l()}},unbind:function(e){var t=e[Km],n=t.container,r=t.onScroll;n&&n.removeEventListener("scroll",r)},install:function(e){e.directive(t_.name,t_)}},n_=t_,r_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-page-header"},[n("div",{staticClass:"el-page-header__left",on:{click:function(t){e.$emit("back")}}},[n("i",{staticClass:"el-icon-back"}),n("div",{staticClass:"el-page-header__title"},[e._t("title",[e._v(e._s(e.title))])],2)]),n("div",{staticClass:"el-page-header__content"},[e._t("content",[e._v(e._s(e.content))])],2)])},i_=[];r_._withStripped=!0;var o_={name:"ElPageHeader",props:{title:{type:String,default:function(){return Object(fa["t"])("el.pageHeader.title")}},content:String}},s_=o_,a_=a(s_,r_,i_,!1,null,null,null);a_.options.__file="packages/page-header/src/main.vue";var c_=a_.exports;c_.install=function(e){e.component(c_.name,c_)};var l_=c_,u_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["el-cascader-panel",e.border&&"is-bordered"],on:{keydown:e.handleKeyDown}},e._l(e.menus,(function(e,t){return n("cascader-menu",{key:t,ref:"menu",refInFor:!0,attrs:{index:t,nodes:e}})})),1)},d_=[];u_._withStripped=!0;var h_,p_,f_=n(43),g_=n.n(f_),m_=function(e){return e.stopPropagation()},__={inject:["panel"],components:{ElCheckbox:Dr.a,ElRadio:g_.a},props:{node:{required:!0},nodeId:String},computed:{config:function(){return this.panel.config},isLeaf:function(){return this.node.isLeaf},isDisabled:function(){return this.node.isDisabled},checkedValue:function(){return this.panel.checkedValue},isChecked:function(){return this.node.isSameNode(this.checkedValue)},inActivePath:function(){return this.isInPath(this.panel.activePath)},inCheckedPath:function(){var e=this;return!!this.config.checkStrictly&&this.panel.checkedNodePaths.some((function(t){return e.isInPath(t)}))},value:function(){return this.node.getValueByOption()}},methods:{handleExpand:function(){var e=this,t=this.panel,n=this.node,r=this.isDisabled,i=this.config,o=i.multiple,s=i.checkStrictly;!s&&r||n.loading||(i.lazy&&!n.loaded?t.lazyLoad(n,(function(){var t=e.isLeaf;if(t||e.handleExpand(),o){var r=!!t&&n.checked;e.handleMultiCheckChange(r)}})):t.handleExpand(n))},handleCheckChange:function(){var e=this.panel,t=this.value,n=this.node;e.handleCheckChange(t),e.handleExpand(n)},handleMultiCheckChange:function(e){this.node.doCheck(e),this.panel.calculateMultiCheckedValue()},isInPath:function(e){var t=this.node,n=e[t.level-1]||{};return n.uid===t.uid},renderPrefix:function(e){var t=this.isLeaf,n=this.isChecked,r=this.config,i=r.checkStrictly,o=r.multiple;return o?this.renderCheckbox(e):i?this.renderRadio(e):t&&n?this.renderCheckIcon(e):null},renderPostfix:function(e){var t=this.node,n=this.isLeaf;return t.loading?this.renderLoadingIcon(e):n?null:this.renderExpandIcon(e)},renderCheckbox:function(e){var t=this.node,n=this.config,r=this.isDisabled,i={on:{change:this.handleMultiCheckChange},nativeOn:{}};return n.checkStrictly&&(i.nativeOn.click=m_),e("el-checkbox",Ju()([{attrs:{value:t.checked,indeterminate:t.indeterminate,disabled:r}},i]))},renderRadio:function(e){var t=this.checkedValue,n=this.value,r=this.isDisabled;return Object(v["isEqual"])(n,t)&&(n=t),e("el-radio",{attrs:{value:t,label:n,disabled:r},on:{change:this.handleCheckChange},nativeOn:{click:m_}},[e("span")])},renderCheckIcon:function(e){return e("i",{class:"el-icon-check el-cascader-node__prefix"})},renderLoadingIcon:function(e){return e("i",{class:"el-icon-loading el-cascader-node__postfix"})},renderExpandIcon:function(e){return e("i",{class:"el-icon-arrow-right el-cascader-node__postfix"})},renderContent:function(e){var t=this.panel,n=this.node,r=t.renderLabelFn,i=r?r({node:n,data:n.data}):null;return e("span",{class:"el-cascader-node__label"},[i||n.label])}},render:function(e){var t=this,n=this.inActivePath,r=this.inCheckedPath,i=this.isChecked,o=this.isLeaf,s=this.isDisabled,a=this.config,c=this.nodeId,l=a.expandTrigger,u=a.checkStrictly,d=a.multiple,h=!u&&s,p={on:{}};return"click"===l?p.on.click=this.handleExpand:(p.on.mouseenter=function(e){t.handleExpand(),t.$emit("expand",e)},p.on.focus=function(e){t.handleExpand(),t.$emit("expand",e)}),!o||s||u||d||(p.on.click=this.handleCheckChange),e("li",Ju()([{attrs:{role:"menuitem",id:c,"aria-expanded":n,tabindex:h?null:-1},class:{"el-cascader-node":!0,"is-selectable":u,"in-active-path":n,"in-checked-path":r,"is-active":i,"is-disabled":h}},p]),[this.renderPrefix(e),this.renderContent(e),this.renderPostfix(e)])}},v_=__,E_=a(v_,h_,p_,!1,null,null,null);E_.options.__file="packages/cascader-panel/src/cascader-node.vue";var A_,y_,S_=E_.exports,b_={name:"ElCascaderMenu",mixins:[_.a],inject:["panel"],components:{ElScrollbar:W.a,CascaderNode:S_},props:{nodes:{type:Array,required:!0},index:Number},data:function(){return{activeNode:null,hoverTimer:null,id:Object(v["generateId"])()}},computed:{isEmpty:function(){return!this.nodes.length},menuId:function(){return"cascader-menu-"+this.id+"-"+this.index}},methods:{handleExpand:function(e){this.activeNode=e.target},handleMouseMove:function(e){var t=this.activeNode,n=this.hoverTimer,r=this.$refs.hoverZone;if(t&&r)if(t.contains(e.target)){clearTimeout(n);var i=this.$el.getBoundingClientRect(),o=i.left,s=e.clientX-o,a=this.$el,c=a.offsetWidth,l=a.offsetHeight,u=t.offsetTop,d=u+t.offsetHeight;r.innerHTML='\n          <path style="pointer-events: auto;" fill="transparent" d="M'+s+" "+u+" L"+c+" 0 V"+u+' Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M'+s+" "+d+" L"+c+" "+l+" V"+d+' Z" />\n        '}else n||(this.hoverTimer=setTimeout(this.clearHoverZone,this.panel.config.hoverThreshold))},clearHoverZone:function(){var e=this.$refs.hoverZone;e&&(e.innerHTML="")},renderEmptyText:function(e){return e("div",{class:"el-cascader-menu__empty-text"},[this.t("el.cascader.noData")])},renderNodeList:function(e){var t=this.menuId,n=this.panel.isHoverMenu,r={on:{}};n&&(r.on.expand=this.handleExpand);var i=this.nodes.map((function(n,i){var o=n.hasChildren;return e("cascader-node",Ju()([{key:n.uid,attrs:{node:n,"node-id":t+"-"+i,"aria-haspopup":o,"aria-owns":o?t:null}},r]))}));return[].concat(i,[n?e("svg",{ref:"hoverZone",class:"el-cascader-menu__hover-zone"}):null])}},render:function(e){var t=this.isEmpty,n=this.menuId,r={nativeOn:{}};return this.panel.isHoverMenu&&(r.nativeOn.mousemove=this.handleMouseMove),e("el-scrollbar",Ju()([{attrs:{tag:"ul",role:"menu",id:n,"wrap-class":"el-cascader-menu__wrap","view-class":{"el-cascader-menu__list":!0,"is-empty":t}},class:"el-cascader-menu"},r]),[t?this.renderEmptyText(e):this.renderNodeList(e)])}},C_=b_,T_=a(C_,A_,y_,!1,null,null,null);T_.options.__file="packages/cascader-panel/src/cascader-menu.vue";var I_=T_.exports,R_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function w_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var k_=0,O_=function(){function e(t,n,r){w_(this,e),this.data=t,this.config=n,this.parent=r||null,this.level=this.parent?this.parent.level+1:1,this.uid=k_++,this.initState(),this.initChildren()}return e.prototype.initState=function(){var e=this.config,t=e.value,n=e.label;this.value=this.data[t],this.label=this.data[n],this.pathNodes=this.calculatePathNodes(),this.path=this.pathNodes.map((function(e){return e.value})),this.pathLabels=this.pathNodes.map((function(e){return e.label})),this.loading=!1,this.loaded=!1},e.prototype.initChildren=function(){var t=this,n=this.config,r=n.children,i=this.data[r];this.hasChildren=Array.isArray(i),this.children=(i||[]).map((function(r){return new e(r,n,t)}))},e.prototype.calculatePathNodes=function(){var e=[this],t=this.parent;while(t)e.unshift(t),t=t.parent;return e},e.prototype.getPath=function(){return this.path},e.prototype.getValue=function(){return this.value},e.prototype.getValueByOption=function(){return this.config.emitPath?this.getPath():this.getValue()},e.prototype.getText=function(e,t){return e?this.pathLabels.join(t):this.label},e.prototype.isSameNode=function(e){var t=this.getValueByOption();return this.config.multiple&&Array.isArray(e)?e.some((function(e){return Object(v["isEqual"])(e,t)})):Object(v["isEqual"])(e,t)},e.prototype.broadcast=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i="onParent"+Object(v["capitalize"])(e);this.children.forEach((function(t){t&&(t.broadcast.apply(t,[e].concat(n)),t[i]&&t[i].apply(t,n))}))},e.prototype.emit=function(e){var t=this.parent,n="onChild"+Object(v["capitalize"])(e);if(t){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t[n]&&t[n].apply(t,i),t.emit.apply(t,[e].concat(i))}},e.prototype.onParentCheck=function(e){this.isDisabled||this.setCheckState(e)},e.prototype.onChildCheck=function(){var e=this.children,t=e.filter((function(e){return!e.isDisabled})),n=!!t.length&&t.every((function(e){return e.checked}));this.setCheckState(n)},e.prototype.setCheckState=function(e){var t=this.children.length,n=this.children.reduce((function(e,t){var n=t.checked?1:t.indeterminate?.5:0;return e+n}),0);this.checked=e,this.indeterminate=n!==t&&n>0},e.prototype.syncCheckState=function(e){var t=this.getValueByOption(),n=this.isSameNode(e,t);this.doCheck(n)},e.prototype.doCheck=function(e){this.checked!==e&&(this.config.checkStrictly?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check")))},R_(e,[{key:"isDisabled",get:function(){var e=this.data,t=this.parent,n=this.config,r=n.disabled,i=n.checkStrictly;return e[r]||!i&&t&&t.isDisabled}},{key:"isLeaf",get:function(){var e=this.data,t=this.loaded,n=this.hasChildren,r=this.children,i=this.config,o=i.lazy,s=i.leaf;if(o){var a=Object(It["isDef"])(e[s])?e[s]:!!t&&!r.length;return this.hasChildren=!a,a}return!n}}]),e}(),N_=O_;function L_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var P_=function e(t,n){return t.reduce((function(t,r){return r.isLeaf?t.push(r):(!n&&t.push(r),t=t.concat(e(r.children,n))),t}),[])},D_=function(){function e(t,n){L_(this,e),this.config=n,this.initNodes(t)}return e.prototype.initNodes=function(e){var t=this;e=Object(v["coerceTruthyValueToArray"])(e),this.nodes=e.map((function(e){return new N_(e,t.config)})),this.flattedNodes=this.getFlattedNodes(!1,!1),this.leafNodes=this.getFlattedNodes(!0,!1)},e.prototype.appendNode=function(e,t){var n=new N_(e,this.config,t),r=t?t.children:this.nodes;r.push(n)},e.prototype.appendNodes=function(e,t){var n=this;e=Object(v["coerceTruthyValueToArray"])(e),e.forEach((function(e){return n.appendNode(e,t)}))},e.prototype.getNodes=function(){return this.nodes},e.prototype.getFlattedNodes=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e?this.leafNodes:this.flattedNodes;return t?n:P_(this.nodes,e)},e.prototype.getNodeByValue=function(e){var t=this.getFlattedNodes(!1,!this.config.lazy).filter((function(t){return Object(v["valueEquals"])(t.path,e)||t.value===e}));return t&&t.length?t[0]:null},e}(),M_=D_,x_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B_=Ap.a.keys,U_={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:v["noop"],value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},F_=function(e){return!e.getAttribute("aria-owns")},V_=function(e,t){var n=e.parentNode;if(n){var r=n.querySelectorAll('.el-cascader-node[tabindex="-1"]'),i=Array.prototype.indexOf.call(r,e);return r[i+t]||null}return null},j_=function(e,t){if(e){var n=e.id.split("-");return Number(n[n.length-2])}},G_=function(e){e&&(e.focus(),!F_(e)&&e.click())},H_=function(e){if(e){var t=e.querySelector("input");t?t.click():F_(e)&&e.click()}},Q_={name:"ElCascaderPanel",components:{CascaderMenu:I_},props:{value:{},options:Array,props:Object,border:{type:Boolean,default:!0},renderLabel:Function},provide:function(){return{panel:this}},data:function(){return{checkedValue:null,checkedNodePaths:[],store:[],menus:[],activePath:[],loadCount:0}},computed:{config:function(){return Tt()(x_({},U_),this.props||{})},multiple:function(){return this.config.multiple},checkStrictly:function(){return this.config.checkStrictly},leafOnly:function(){return!this.checkStrictly},isHoverMenu:function(){return"hover"===this.config.expandTrigger},renderLabelFn:function(){return this.renderLabel||this.$scopedSlots.default}},watch:{options:{handler:function(){this.initStore()},immediate:!0,deep:!0},value:function(){this.syncCheckedValue(),this.checkStrictly&&this.calculateCheckedNodePaths()},checkedValue:function(e){Object(v["isEqual"])(e,this.value)||(this.checkStrictly&&this.calculateCheckedNodePaths(),this.$emit("input",e),this.$emit("change",e))}},mounted:function(){this.isEmptyValue(this.value)||this.syncCheckedValue()},methods:{initStore:function(){var e=this.config,t=this.options;e.lazy&&Object(v["isEmpty"])(t)?this.lazyLoad():(this.store=new M_(t,e),this.menus=[this.store.getNodes()],this.syncMenuState())},syncCheckedValue:function(){var e=this.value,t=this.checkedValue;Object(v["isEqual"])(e,t)||(this.activePath=[],this.checkedValue=e,this.syncMenuState())},syncMenuState:function(){var e=this.multiple,t=this.checkStrictly;this.syncActivePath(),e&&this.syncMultiCheckState(),t&&this.calculateCheckedNodePaths(),this.$nextTick(this.scrollIntoView)},syncMultiCheckState:function(){var e=this,t=this.getFlattedNodes(this.leafOnly);t.forEach((function(t){t.syncCheckState(e.checkedValue)}))},isEmptyValue:function(e){var t=this.multiple,n=this.config,r=n.emitPath;return!(!t&&!r)&&Object(v["isEmpty"])(e)},syncActivePath:function(){var e=this,t=this.store,n=this.multiple,r=this.activePath,i=this.checkedValue;if(Object(v["isEmpty"])(r))if(this.isEmptyValue(i))this.activePath=[],this.menus=[t.getNodes()];else{var o=n?i[0]:i,s=this.getNodeByValue(o)||{},a=(s.pathNodes||[]).slice(0,-1);this.expandNodes(a)}else{var c=r.map((function(t){return e.getNodeByValue(t.getValue())}));this.expandNodes(c)}},expandNodes:function(e){var t=this;e.forEach((function(e){return t.handleExpand(e,!0)}))},calculateCheckedNodePaths:function(){var e=this,t=this.checkedValue,n=this.multiple,r=n?Object(v["coerceTruthyValueToArray"])(t):[t];this.checkedNodePaths=r.map((function(t){var n=e.getNodeByValue(t);return n?n.pathNodes:[]}))},handleKeyDown:function(e){var t=e.target,n=e.keyCode;switch(n){case B_.up:var r=V_(t,-1);G_(r);break;case B_.down:var i=V_(t,1);G_(i);break;case B_.left:var o=this.$refs.menu[j_(t)-1];if(o){var s=o.$el.querySelector('.el-cascader-node[aria-expanded="true"]');G_(s)}break;case B_.right:var a=this.$refs.menu[j_(t)+1];if(a){var c=a.$el.querySelector('.el-cascader-node[tabindex="-1"]');G_(c)}break;case B_.enter:H_(t);break;case B_.esc:case B_.tab:this.$emit("close");break;default:return}},handleExpand:function(e,t){var n=this.activePath,r=e.level,i=n.slice(0,r-1),o=this.menus.slice(0,r);if(e.isLeaf||(i.push(e),o.push(e.children)),this.activePath=i,this.menus=o,!t){var s=i.map((function(e){return e.getValue()})),a=n.map((function(e){return e.getValue()}));Object(v["valueEquals"])(s,a)||(this.$emit("active-item-change",s),this.$emit("expand-change",s))}},handleCheckChange:function(e){this.checkedValue=e},lazyLoad:function(e,t){var n=this,r=this.config;e||(e=e||{root:!0,level:0},this.store=new M_([],r),this.menus=[this.store.getNodes()]),e.loading=!0;var i=function(r){var i=e.root?null:e;if(r&&r.length&&n.store.appendNodes(r,i),e.loading=!1,e.loaded=!0,Array.isArray(n.checkedValue)){var o=n.checkedValue[n.loadCount++],s=n.config.value,a=n.config.leaf;if(Array.isArray(r)&&r.filter((function(e){return e[s]===o})).length>0){var c=n.store.getNodeByValue(o);c.data[a]||n.lazyLoad(c,(function(){n.handleExpand(c)})),n.loadCount===n.checkedValue.length&&n.$parent.computePresentText()}}t&&t(r)};r.lazyLoad(e,i)},calculateMultiCheckedValue:function(){this.checkedValue=this.getCheckedNodes(this.leafOnly).map((function(e){return e.getValueByOption()}))},scrollIntoView:function(){if(!this.$isServer){var e=this.$refs.menu||[];e.forEach((function(e){var t=e.$el;if(t){var n=t.querySelector(".el-scrollbar__wrap"),r=t.querySelector(".el-cascader-node.is-active")||t.querySelector(".el-cascader-node.in-active-path");nr()(n,r)}}))}},getNodeByValue:function(e){return this.store.getNodeByValue(e)},getFlattedNodes:function(e){var t=!this.config.lazy;return this.store.getFlattedNodes(e,t)},getCheckedNodes:function(e){var t=this.checkedValue,n=this.multiple;if(n){var r=this.getFlattedNodes(e);return r.filter((function(e){return e.checked}))}return this.isEmptyValue(t)?[]:[this.getNodeByValue(t)]},clearCheckedNodes:function(){var e=this.config,t=this.leafOnly,n=e.multiple,r=e.emitPath;n?(this.getCheckedNodes(t).filter((function(e){return!e.isDisabled})).forEach((function(e){return e.doCheck(!1)})),this.calculateMultiCheckedValue()):this.checkedValue=r?[]:null}}},W_=Q_,q_=a(W_,u_,d_,!1,null,null,null);q_.options.__file="packages/cascader-panel/src/cascader-panel.vue";var z_=q_.exports;z_.install=function(e){e.component(z_.name,z_)};var Z_,$_,K_=z_,Y_={name:"ElAvatar",props:{size:{type:[Number,String],validator:function(e){return"string"===typeof e?["large","medium","small"].includes(e):"number"===typeof e}},shape:{type:String,default:"circle",validator:function(e){return["circle","square"].includes(e)}},icon:String,src:String,alt:String,srcSet:String,error:Function,fit:{type:String,default:"cover"}},data:function(){return{isImageExist:!0}},computed:{avatarClass:function(){var e=this.size,t=this.icon,n=this.shape,r=["el-avatar"];return e&&"string"===typeof e&&r.push("el-avatar--"+e),t&&r.push("el-avatar--icon"),n&&r.push("el-avatar--"+n),r.join(" ")}},methods:{handleError:function(){var e=this.error,t=e?e():void 0;!1!==t&&(this.isImageExist=!1)},renderAvatar:function(){var e=this.$createElement,t=this.icon,n=this.src,r=this.alt,i=this.isImageExist,o=this.srcSet,s=this.fit;return i&&n?e("img",{attrs:{src:n,alt:r,srcSet:o},on:{error:this.handleError},style:{"object-fit":s}}):t?e("i",{class:t}):this.$slots.default}},render:function(){var e=arguments[0],t=this.avatarClass,n=this.size,r="number"===typeof n?{height:n+"px",width:n+"px",lineHeight:n+"px"}:{};return e("span",{class:t,style:r},[this.renderAvatar()])}},J_=Y_,X_=a(J_,Z_,$_,!1,null,null,null);X_.options.__file="packages/avatar/src/main.vue";var ev=X_.exports;ev.install=function(e){e.component(ev.name,ev)};var tv=ev,nv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-drawer-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-drawer__wrapper",attrs:{tabindex:"-1"}},[n("div",{staticClass:"el-drawer__container",class:e.visible&&"el-drawer__open",attrs:{role:"document",tabindex:"-1"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[n("div",{ref:"drawer",staticClass:"el-drawer",class:[e.direction,e.customClass],style:e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize,attrs:{"aria-modal":"true","aria-labelledby":"el-drawer__title","aria-label":e.title,role:"dialog",tabindex:"-1"}},[e.withHeader?n("header",{staticClass:"el-drawer__header",attrs:{id:"el-drawer__title"}},[e._t("title",[n("span",{attrs:{role:"heading",title:e.title}},[e._v(e._s(e.title))])]),e.showClose?n("button",{staticClass:"el-drawer__close-btn",attrs:{"aria-label":"close "+(e.title||"drawer"),type:"button"},on:{click:e.closeDrawer}},[n("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2):e._e(),e.rendered?n("section",{staticClass:"el-drawer__body"},[e._t("default")],2):e._e()])])])])},rv=[];nv._withStripped=!0;var iv={name:"ElDrawer",mixins:[C.a,w.a],props:{appendToBody:{type:Boolean,default:!1},beforeClose:{type:Function},customClass:{type:String,default:""},closeOnPressEscape:{type:Boolean,default:!0},destroyOnClose:{type:Boolean,default:!1},modal:{type:Boolean,default:!0},direction:{type:String,default:"rtl",validator:function(e){return-1!==["ltr","rtl","ttb","btt"].indexOf(e)}},modalAppendToBody:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},size:{type:[Number,String],default:"30%"},title:{type:String,default:""},visible:{type:Boolean},wrapperClosable:{type:Boolean,default:!0},withHeader:{type:Boolean,default:!0}},computed:{isHorizontal:function(){return"rtl"===this.direction||"ltr"===this.direction},drawerSize:function(){return"number"===typeof this.size?this.size+"px":this.size}},data:function(){return{closed:!1,prevActiveElement:null}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.appendToBody&&document.body.appendChild(this.$el),this.prevActiveElement=document.activeElement):(this.closed||(this.$emit("close"),!0===this.destroyOnClose&&(this.rendered=!1)),this.$nextTick((function(){t.prevActiveElement&&t.prevActiveElement.focus()})))}},methods:{afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),!0===this.destroyOnClose&&(this.rendered=!1),this.closed=!0)},handleWrapperClick:function(){this.wrapperClosable&&this.closeDrawer()},closeDrawer:function(){"function"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},handleClose:function(){this.closeDrawer()}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},ov=iv,sv=a(ov,nv,rv,!1,null,null,null);sv.options.__file="packages/drawer/src/main.vue";var av=sv.exports;av.install=function(e){e.component(av.name,av)};var cv=av,lv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",e._b({attrs:{trigger:"click"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},"el-popover",e.$attrs,!1),[n("div",{staticClass:"el-popconfirm"},[n("p",{staticClass:"el-popconfirm__main"},[e.hideIcon?e._e():n("i",{staticClass:"el-popconfirm__icon",class:e.icon,style:{color:e.iconColor}}),e._v("\n      "+e._s(e.title)+"\n    ")]),n("div",{staticClass:"el-popconfirm__action"},[n("el-button",{attrs:{size:"mini",type:e.cancelButtonType},on:{click:e.cancel}},[e._v("\n        "+e._s(e.displayCancelButtonText)+"\n      ")]),n("el-button",{attrs:{size:"mini",type:e.confirmButtonType},on:{click:e.confirm}},[e._v("\n        "+e._s(e.displayConfirmButtonText)+"\n      ")])],1)]),e._t("reference",null,{slot:"reference"})],2)},uv=[];lv._withStripped=!0;var dv=n(44),hv=n.n(dv),pv={name:"ElPopconfirm",props:{title:{type:String},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonType:{type:String,default:"primary"},cancelButtonType:{type:String,default:"text"},icon:{type:String,default:"el-icon-question"},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1}},components:{ElPopover:hv.a,ElButton:se.a},data:function(){return{visible:!1}},computed:{displayConfirmButtonText:function(){return this.confirmButtonText||Object(fa["t"])("el.popconfirm.confirmButtonText")},displayCancelButtonText:function(){return this.cancelButtonText||Object(fa["t"])("el.popconfirm.cancelButtonText")}},methods:{confirm:function(){this.visible=!1,this.$emit("confirm")},cancel:function(){this.visible=!1,this.$emit("cancel")}}},fv=pv,gv=a(fv,lv,uv,!1,null,null,null);gv.options.__file="packages/popconfirm/src/main.vue";var mv=gv.exports;mv.install=function(e){e.component(mv.name,mv)};var _v=mv,vv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.uiLoading?[n("div",e._b({class:["el-skeleton",e.animated?"is-animated":""]},"div",e.$attrs,!1),[e._l(e.count,(function(t){return[e.loading?e._t("template",e._l(e.rows,(function(r){return n("el-skeleton-item",{key:t+"-"+r,class:{"el-skeleton__paragraph":1!==r,"is-first":1===r,"is-last":r===e.rows&&e.rows>1},attrs:{variant:"p"}})}))):e._e()]}))],2)]:[e._t("default",null,null,e.$attrs)]],2)},Ev=[];vv._withStripped=!0;var Av={name:"ElSkeleton",props:{animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:4},loading:{type:Boolean,default:!0},throttle:{type:Number,default:0}},watch:{loading:{handler:function(e){var t=this;this.throttle<=0?this.uiLoading=e:e?(clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout((function(){t.uiLoading=t.loading}),this.throttle)):this.uiLoading=e},immediate:!0}},data:function(){return{uiLoading:this.throttle<=0&&this.loading}}},yv=Av,Sv=a(yv,vv,Ev,!1,null,null,null);Sv.options.__file="packages/skeleton/src/index.vue";var bv=Sv.exports;bv.install=function(e){e.component(bv.name,bv)};var Cv=bv,Tv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["el-skeleton__item","el-skeleton__"+e.variant]},["image"===e.variant?n("img-placeholder"):e._e()],1)},Iv=[];Tv._withStripped=!0;var Rv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M64 896V128h896v768H64z m64-128l192-192 116.352 116.352L640 448l256 307.2V192H128v576z m224-480a96 96 0 1 1-0.064 192.064A96 96 0 0 1 352 288z"}})])},wv=[];Rv._withStripped=!0;var kv={name:"ImgPlaceholder"},Ov=kv,Nv=a(Ov,Rv,wv,!1,null,null,null);Nv.options.__file="packages/skeleton/src/img-placeholder.vue";var Lv,Pv=Nv.exports,Dv={name:"ElSkeletonItem",props:{variant:{type:String,default:"text"}},components:(Lv={},Lv[Pv.name]=Pv,Lv)},Mv=Dv,xv=a(Mv,Tv,Iv,!1,null,null,null);xv.options.__file="packages/skeleton/src/item.vue";var Bv=xv.exports;Bv.install=function(e){e.component(Bv.name,Bv)};var Uv=Bv,Fv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-empty"},[n("div",{staticClass:"el-empty__image",style:e.imageStyle},[e.image?n("img",{attrs:{src:e.image,ondragstart:"return false"}}):e._t("image",[n("img-empty")])],2),n("div",{staticClass:"el-empty__description"},[e.$slots.description?e._t("description"):n("p",[e._v(e._s(e.emptyDescription))])],2),e.$slots.default?n("div",{staticClass:"el-empty__bottom"},[e._t("default")],2):e._e()])},Vv=[];Fv._withStripped=!0;var jv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[n("defs",[n("linearGradient",{attrs:{id:"linearGradient-1-"+e.id,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"}},[n("stop",{attrs:{"stop-color":"#FCFCFD",offset:"0%"}}),n("stop",{attrs:{"stop-color":"#EEEFF3",offset:"100%"}})],1),n("linearGradient",{attrs:{id:"linearGradient-2-"+e.id,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"}},[n("stop",{attrs:{"stop-color":"#FCFCFD",offset:"0%"}}),n("stop",{attrs:{"stop-color":"#E9EBEF",offset:"100%"}})],1),n("rect",{attrs:{id:"path-3-"+e.id,x:"0",y:"0",width:"17",height:"36"}})],1),n("g",{attrs:{id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[n("g",{attrs:{id:"B-type",transform:"translate(-1268.000000, -535.000000)"}},[n("g",{attrs:{id:"Group-2",transform:"translate(1268.000000, 535.000000)"}},[n("path",{attrs:{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:"#F7F8FC"}}),n("polygon",{attrs:{id:"Rectangle-Copy-14",fill:"#E5E7E9",transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"}}),n("g",{attrs:{id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"}},[n("polygon",{attrs:{id:"Rectangle-Copy-10",fill:"#E5E7E9",transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"}}),n("polygon",{attrs:{id:"Rectangle-Copy-11",fill:"#EDEEF2",points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"}}),n("rect",{attrs:{id:"Rectangle-Copy-12",fill:"url(#linearGradient-1-"+e.id+")",transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"}}),n("polygon",{attrs:{id:"Rectangle-Copy-13",fill:"#F8F9FB",transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"}})]),n("rect",{attrs:{id:"Rectangle-Copy-15",fill:"url(#linearGradient-2-"+e.id+")",x:"13",y:"45",width:"40",height:"36"}}),n("g",{attrs:{id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"}},[n("mask",{attrs:{id:"mask-4-"+e.id,fill:"white"}},[n("use",{attrs:{"xlink:href":"#path-3-"+e.id}})]),n("use",{attrs:{id:"Mask",fill:"#E0E3E9",transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":"#path-3-"+e.id}}),n("polygon",{attrs:{id:"Rectangle-Copy",fill:"#D5D7DE",mask:"url(#mask-4-"+e.id+")",transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 -1.70530257e-13 16"}})]),n("polygon",{attrs:{id:"Rectangle-Copy-18",fill:"#F8F9FB",transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"}})])])])])},Gv=[];jv._withStripped=!0;var Hv=0,Qv={name:"ImgEmpty",data:function(){return{id:++Hv}}},Wv=Qv,qv=a(Wv,jv,Gv,!1,null,null,null);qv.options.__file="packages/empty/src/img-empty.vue";var zv,Zv=qv.exports,$v={name:"ElEmpty",components:(zv={},zv[Zv.name]=Zv,zv),props:{image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}},computed:{emptyDescription:function(){return this.description||Object(fa["t"])("el.empty.description")},imageStyle:function(){return{width:this.imageSize?this.imageSize+"px":""}}}},Kv=$v,Yv=a(Kv,Fv,Vv,!1,null,null,null);Yv.options.__file="packages/empty/src/index.vue";var Jv=Yv.exports;Jv.install=function(e){e.component(Jv.name,Jv)};var Xv,eE=Jv,tE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nE={name:"ElDescriptionsRow",props:{row:{type:Array}},inject:["elDescriptions"],render:function(e){var t=this.elDescriptions,n=(this.row||[]).map((function(e){return tE({},e,{label:e.slots.label||e.props.label},["labelClassName","contentClassName","labelStyle","contentStyle"].reduce((function(n,r){return n[r]=e.props[r]||t[r],n}),{}))}));return"vertical"===t.direction?e("tbody",[e("tr",{class:"el-descriptions-row"},[n.map((function(n){var r;return e("th",{class:(r={"el-descriptions-item__cell":!0,"el-descriptions-item__label":!0,"has-colon":!t.border&&t.colon,"is-bordered-label":t.border},r[n.labelClassName]=!0,r),style:n.labelStyle,attrs:{colSpan:n.props.span}},[n.label])}))]),e("tr",{class:"el-descriptions-row"},[n.map((function(t){return e("td",{class:["el-descriptions-item__cell","el-descriptions-item__content",t.contentClassName],style:t.contentStyle,attrs:{colSpan:t.props.span}},[t.slots.default])}))])]):t.border?e("tbody",[e("tr",{class:"el-descriptions-row"},[n.map((function(n){var r;return[e("th",{class:(r={"el-descriptions-item__cell":!0,"el-descriptions-item__label":!0,"is-bordered-label":t.border},r[n.labelClassName]=!0,r),style:n.labelStyle,attrs:{colSpan:"1"}},[n.label]),e("td",{class:["el-descriptions-item__cell","el-descriptions-item__content",n.contentClassName],style:n.contentStyle,attrs:{colSpan:2*n.props.span-1}},[n.slots.default])]}))])]):e("tbody",[e("tr",{class:"el-descriptions-row"},[n.map((function(n){var r;return e("td",{class:"el-descriptions-item el-descriptions-item__cell",attrs:{colSpan:n.props.span}},[e("div",{class:"el-descriptions-item__container"},[e("span",{class:(r={"el-descriptions-item__label":!0,"has-colon":t.colon},r[n.labelClassName]=!0,r),style:n.labelStyle},[n.props.label]),e("span",{class:["el-descriptions-item__content",n.contentClassName],style:n.contentStyle},[n.slots.default])])])}))])])}},rE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iE={name:"ElDescriptions",components:(Xv={},Xv[nE.name]=nE,Xv),props:{border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,default:"horizontal"},size:{type:String},title:{type:String,default:""},extra:{type:String,default:""},labelStyle:{type:Object},contentStyle:{type:Object},labelClassName:{type:String,default:""},contentClassName:{type:String,default:""},colon:{type:Boolean,default:!0}},computed:{descriptionsSize:function(){return this.size||(this.$ELEMENT||{}).size}},provide:function(){return{elDescriptions:this}},methods:{getOptionProps:function(e){if(e.componentOptions){var t=e.componentOptions,n=t.propsData,r=void 0===n?{}:n,i=t.Ctor,o=void 0===i?{}:i,s=(o.options||{}).props||{},a={};for(var c in s){var l=s[c],u=l.default;void 0!==u&&(a[c]=Object(Hd["isFunction"])(u)?u.call(e):u)}return rE({},a,r)}return{}},getSlots:function(e){var t=this,n=e.componentOptions||{},r=e.children||n.children||[],i={};return r.forEach((function(e){if(!t.isEmptyElement(e)){var n=e.data&&e.data.slot||"default";i[n]=i[n]||[],"template"===e.tag?i[n].push(e.children):i[n].push(e)}})),rE({},i)},isEmptyElement:function(e){return!(e.tag||e.text&&""!==e.text.trim())},filledNode:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.props||(e.props={}),t>n&&(e.props.span=n),r&&(e.props.span=n),e},getRows:function(){var e=this,t=(this.$slots.default||[]).filter((function(e){return e.tag&&e.componentOptions&&"ElDescriptionsItem"===e.componentOptions.Ctor.options.name})),n=t.map((function(t){return{props:e.getOptionProps(t),slots:e.getSlots(t),vnode:t}})),r=[],i=[],o=this.column;return n.forEach((function(n,s){var a=n.props.span||1;if(s===t.length-1)return i.push(e.filledNode(n,a,o,!0)),void r.push(i);a<o?(o-=a,i.push(n)):(i.push(e.filledNode(n,a,o)),r.push(i),o=e.column,i=[])})),r}},render:function(){var e=arguments[0],t=this.title,n=this.extra,r=this.border,i=this.descriptionsSize,o=this.$slots,s=this.getRows();return e("div",{class:"el-descriptions"},[t||n||o.title||o.extra?e("div",{class:"el-descriptions__header"},[e("div",{class:"el-descriptions__title"},[o.title?o.title:t]),e("div",{class:"el-descriptions__extra"},[o.extra?o.extra:n])]):null,e("div",{class:"el-descriptions__body"},[e("table",{class:["el-descriptions__table",{"is-bordered":r},i?"el-descriptions--"+i:""]},[s.map((function(t){return e(nE,{attrs:{row:t}})}))])])])},install:function(e){e.component(iE.name,iE)}},oE=iE,sE={name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},contentClassName:{type:String,default:""},contentStyle:{type:Object},labelClassName:{type:String,default:""},labelStyle:{type:Object}},render:function(){return null},install:function(e){e.component(sE.name,sE)}},aE=sE,cE=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-result"},[n("div",{staticClass:"el-result__icon"},[e._t("icon",[n(e.iconElement,{tag:"component",class:e.iconElement})])],2),e.title||e.$slots.title?n("div",{staticClass:"el-result__title"},[e._t("title",[n("p",[e._v(e._s(e.title))])])],2):e._e(),e.subTitle||e.$slots.subTitle?n("div",{staticClass:"el-result__subtitle"},[e._t("subTitle",[n("p",[e._v(e._s(e.subTitle))])])],2):e._e(),e.$slots.extra?n("div",{staticClass:"el-result__extra"},[e._t("extra")],2):e._e()])},lE=[];cE._withStripped=!0;var uE=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M34.5548098,16.4485711 C33.9612228,15.8504763 32.9988282,15.8504763 32.4052412,16.4485711 L32.4052412,16.4485711 L21.413757,27.5805811 L21.413757,27.5805811 L21.4034642,27.590855 C21.0097542,27.9781674 20.3766105,27.9729811 19.9892981,27.5792711 L19.9892981,27.5792711 L15.5947588,23.1121428 C15.0011718,22.514048 14.0387772,22.514048 13.4451902,23.1121428 C12.8516033,23.7102376 12.8516033,24.6799409 13.4451902,25.2780357 L13.4451902,25.2780357 L19.6260786,31.5514289 C20.2196656,32.1495237 21.1820602,32.1495237 21.7756472,31.5514289 L21.7756472,31.5514289 L34.5548098,18.614464 C35.1483967,18.0163692 35.1483967,17.0466659 34.5548098,16.4485711 Z"}})])},dE=[];uE._withStripped=!0;var hE={name:"IconSuccess"},pE=hE,fE=a(pE,uE,dE,!1,null,null,null);fE.options.__file="packages/result/src/icon-success.vue";var gE=fE.exports,mE=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M32.57818,15.42182 C32.0157534,14.8593933 31.1038797,14.8593933 30.541453,15.42182 L30.541453,15.42182 L24.0006789,21.9625941 L17.458547,15.42182 C16.8961203,14.8593933 15.9842466,14.8593933 15.42182,15.42182 C14.8593933,15.9842466 14.8593933,16.8961203 15.42182,17.458547 L15.42182,17.458547 L21.9639519,23.9993211 L15.42182,30.541453 C14.8593933,31.1038797 14.8593933,32.0157534 15.42182,32.57818 C15.9842466,33.1406067 16.8961203,33.1406067 17.458547,32.57818 L17.458547,32.57818 L24.0006789,26.0360481 L30.541453,32.57818 C31.1038797,33.1406067 32.0157534,33.1406067 32.57818,32.57818 C33.1406067,32.0157534 33.1406067,31.1038797 32.57818,30.541453 L32.57818,30.541453 L26.0374059,23.9993211 L32.57818,17.458547 C33.1406067,16.8961203 33.1406067,15.9842466 32.57818,15.42182 Z"}})])},_E=[];mE._withStripped=!0;var vE={name:"IconError"},EE=vE,AE=a(EE,mE,_E,!1,null,null,null);AE.options.__file="packages/result/src/icon-error.vue";var yE=AE.exports,SE=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M24,31 C22.8954305,31 22,31.8954305 22,33 C22,34.1045695 22.8954305,35 24,35 C25.1045695,35 26,34.1045695 26,33 C26,31.8954305 25.1045695,31 24,31 Z M24,14 C23.1715729,14 22.5,14.6715729 22.5,15.5 L22.5,15.5 L22.5,27.5 C22.5,28.3284271 23.1715729,29 24,29 C24.8284271,29 25.5,28.3284271 25.5,27.5 L25.5,27.5 L25.5,15.5 C25.5,14.6715729 24.8284271,14 24,14 Z"}})])},bE=[];SE._withStripped=!0;var CE={name:"IconWarning"},TE=CE,IE=a(TE,SE,bE,!1,null,null,null);IE.options.__file="packages/result/src/icon-warning.vue";var RE=IE.exports,wE=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M24,19 L21,19 C20.1715729,19 19.5,19.6715729 19.5,20.5 C19.5,21.3284271 20.1715729,22 21,22 L21,22 L22.5,22 L22.5,31 L21,31 C20.1715729,31 19.5,31.6715729 19.5,32.5 C19.5,33.3284271 20.1715729,34 21,34 L21,34 L27,34 C27.8284271,34 28.5,33.3284271 28.5,32.5 C28.5,31.6715729 27.8284271,31 27,31 L27,31 L25.5,31 L25.5,20.5 C25.5,19.6715729 24.8284271,19 24,19 L24,19 Z M24,13 C22.8954305,13 22,13.8954305 22,15 C22,16.1045695 22.8954305,17 24,17 C25.1045695,17 26,16.1045695 26,15 C26,13.8954305 25.1045695,13 24,13 Z"}})])},kE=[];wE._withStripped=!0;var OE={name:"IconInfo"},NE=OE,LE=a(NE,wE,kE,!1,null,null,null);LE.options.__file="packages/result/src/icon-info.vue";var PE,DE=LE.exports,ME={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},xE={name:"ElResult",components:(PE={},PE[gE.name]=gE,PE[yE.name]=yE,PE[RE.name]=RE,PE[DE.name]=DE,PE),props:{title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,default:"info"}},computed:{iconElement:function(){var e=this.icon;return e&&ME[e]?ME[e]:"icon-info"}}},BE=xE,UE=a(BE,cE,lE,!1,null,null,null);UE.options.__file="packages/result/src/index.vue";var FE=UE.exports;FE.install=function(e){e.component(FE.name,FE)};var VE=FE,jE=[A,P,ie,pe,Ae,Re,We,et,lt,mt,Nt,Ft,qt,en,cn,gn,Sn,kn,xn,cr,lr,mr,br,Or,zi,to,ks,js,ea,la,da,Ha,Ka,rc,vc,Fc,Zc,Xc,wl,xl,hu,Bu,Fu,Gu,yd,wd,Md,ih,dh,vh,Th,Lh,jh,qh,ep,ap,fp,kp,Of,Hf,Kf,rg,ug,_g,Ig,Ng,Ug,Wg,Jg,_m,Mm,Qm,l_,K_,tv,cv,_v,Cv,Uv,eE,oE,aE,VE,ze.a],GE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ga.a.use(t.locale),ga.a.i18n(t.i18n),jE.forEach((function(t){e.component(t.name,t)})),e.use(n_),e.use(Ou.directive),e.prototype.$ELEMENT={size:t.size||"",zIndex:t.zIndex||2e3},e.prototype.$loading=Ou.service,e.prototype.$msgbox=xa,e.prototype.$alert=xa.alert,e.prototype.$confirm=xa.confirm,e.prototype.$prompt=xa.prompt,e.prototype.$notify=Kl,e.prototype.$message=Yd};"undefined"!==typeof window&&window.Vue&&GE(window.Vue);t["default"]={version:"2.15.6",locale:ga.a.use,i18n:ga.a.i18n,install:GE,CollapseTransition:ze.a,Loading:Ou,Pagination:A,Dialog:P,Autocomplete:ie,Dropdown:pe,DropdownMenu:Ae,DropdownItem:Re,Menu:We,Submenu:et,MenuItem:lt,MenuItemGroup:mt,Input:Nt,InputNumber:Ft,Radio:qt,RadioGroup:en,RadioButton:cn,Checkbox:gn,CheckboxButton:Sn,CheckboxGroup:kn,Switch:xn,Select:cr,Option:lr,OptionGroup:mr,Button:br,ButtonGroup:Or,Table:zi,TableColumn:to,DatePicker:ks,TimeSelect:js,TimePicker:ea,Popover:la,Tooltip:da,MessageBox:xa,Breadcrumb:Ha,BreadcrumbItem:Ka,Form:rc,FormItem:vc,Tabs:Fc,TabPane:Zc,Tag:Xc,Tree:wl,Alert:xl,Notification:Kl,Slider:hu,Icon:Bu,Row:Fu,Col:Gu,Upload:yd,Progress:wd,Spinner:Md,Message:Yd,Badge:ih,Card:dh,Rate:vh,Steps:Th,Step:Lh,Carousel:jh,Scrollbar:qh,CarouselItem:ep,Collapse:ap,CollapseItem:fp,Cascader:kp,ColorPicker:Of,Transfer:Hf,Container:Kf,Header:rg,Aside:ug,Main:_g,Footer:Ig,Timeline:Ng,TimelineItem:Ug,Link:Wg,Divider:Jg,Image:_m,Calendar:Mm,Backtop:Qm,InfiniteScroll:n_,PageHeader:l_,CascaderPanel:K_,Avatar:tv,Drawer:cv,Popconfirm:_v,Skeleton:Cv,SkeletonItem:Uv,Empty:eE,Descriptions:oE,DescriptionsItem:aE,Result:VE}}])["default"]},"5cc6":function(e,t,n){var r=n("74e8");r("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},"5cce":function(e,t){e.exports={version:"0.24.0"}},"5e77":function(e,t,n){var r=n("83ab"),i=n("1a2d"),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,l=a&&(!r||r&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},"5f02":function(e,t,n){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},"5f96":function(e,t,n){"use strict";var r=n("ebb5"),i=n("e330"),o=r.aTypedArray,s=r.exportTypedArrayMethod,a=i([].join);s("join",(function(e){return a(o(this),e)}))},"5fb2":function(e,t,n){"use strict";var r=n("da84"),i=n("e330"),o=2147483647,s=36,a=1,c=26,l=38,u=700,d=72,h=128,p="-",f=/[^\0-\u007E]/,g=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",_=s-a,v=r.RangeError,E=i(g.exec),A=Math.floor,y=String.fromCharCode,S=i("".charCodeAt),b=i([].join),C=i([].push),T=i("".replace),I=i("".split),R=i("".toLowerCase),w=function(e){var t=[],n=0,r=e.length;while(n<r){var i=S(e,n++);if(i>=55296&&i<=56319&&n<r){var o=S(e,n++);56320==(64512&o)?C(t,((1023&i)<<10)+(1023&o)+65536):(C(t,i),n--)}else C(t,i)}return t},k=function(e){return e+22+75*(e<26)},O=function(e,t,n){var r=0;e=n?A(e/u):e>>1,e+=A(e/t);while(e>_*c>>1)e=A(e/_),r+=s;return A(r+(_+1)*e/(e+l))},N=function(e){var t=[];e=w(e);var n,r,i=e.length,l=h,u=0,f=d;for(n=0;n<e.length;n++)r=e[n],r<128&&C(t,y(r));var g=t.length,_=g;g&&C(t,p);while(_<i){var E=o;for(n=0;n<e.length;n++)r=e[n],r>=l&&r<E&&(E=r);var S=_+1;if(E-l>A((o-u)/S))throw v(m);for(u+=(E-l)*S,l=E,n=0;n<e.length;n++){if(r=e[n],r<l&&++u>o)throw v(m);if(r==l){var T=u,I=s;while(1){var R=I<=f?a:I>=f+c?c:I-f;if(T<R)break;var N=T-R,L=s-R;C(t,y(k(R+N%L))),T=A(N/L),I+=s}C(t,y(k(T))),f=O(u,S,_==g),u=0,_++}}u++,l++}return b(t,"")};e.exports=function(e){var t,n,r=[],i=I(T(R(e),g,"."),".");for(t=0;t<i.length;t++)n=i[t],C(r,E(f,n)?"xn--"+N(n):n);return b(r,".")}},"605d":function(e,t,n){var r=n("c6b6"),i=n("da84");e.exports="process"==r(i.process)},6069:function(e,t){e.exports="object"==typeof window},"60bd":function(e,t,n){"use strict";var r=n("da84"),i=n("d039"),o=n("e330"),s=n("ebb5"),a=n("e260"),c=n("b622"),l=c("iterator"),u=r.Uint8Array,d=o(a.values),h=o(a.keys),p=o(a.entries),f=s.aTypedArray,g=s.exportTypedArrayMethod,m=u&&u.prototype,_=!i((function(){m[l].call([1])})),v=!!m&&m.values&&m[l]===m.values&&"values"===m.values.name,E=function(){return d(f(this))};g("entries",(function(){return p(f(this))}),_),g("keys",(function(){return h(f(this))}),_),g("values",E,_||!v,{name:"values"}),g(l,E,_||!v,{name:"values"})},"60da":function(e,t,n){"use strict";var r=n("83ab"),i=n("e330"),o=n("c65b"),s=n("d039"),a=n("df75"),c=n("7418"),l=n("d1e7"),u=n("7b0b"),d=n("44ad"),h=Object.assign,p=Object.defineProperty,f=i([].concat);e.exports=!h||s((function(){if(r&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=h({},e)[n]||a(h({},t)).join("")!=i}))?function(e,t){var n=u(e),i=arguments.length,s=1,h=c.f,p=l.f;while(i>s){var g,m=d(arguments[s++]),_=h?f(a(m),h(m)):a(m),v=_.length,E=0;while(v>E)g=_[E++],r&&!o(p,m,g)||(n[g]=m[g])}return n}:h},6167:function(e,t,n){"use strict";var r,i;"function"===typeof Symbol&&Symbol.iterator;(function(o,s){r=s,i="function"===typeof r?r.call(t,n,t,e):r,void 0===i||(e.exports=i)})(0,(function(){var e=window,t={placement:"bottom",gpuAcceleration:!0,offset:0,boundariesElement:"viewport",boundariesPadding:5,preventOverflowOrder:["left","right","top","bottom"],flipBehavior:"flip",arrowElement:"[x-arrow]",arrowOffset:0,modifiers:["shift","offset","preventOverflow","keepTogether","arrow","flip","applyStyle"],modifiersIgnored:[],forceAbsolute:!1};function n(e,n,r){this._reference=e.jquery?e[0]:e,this.state={};var i="undefined"===typeof n||null===n,o=n&&"[object Object]"===Object.prototype.toString.call(n);return this._popper=i||o?this.parse(o?n:{}):n.jquery?n[0]:n,this._options=Object.assign({},t,r),this._options.modifiers=this._options.modifiers.map(function(e){if(-1===this._options.modifiersIgnored.indexOf(e))return"applyStyle"===e&&this._popper.setAttribute("x-placement",this._options.placement),this.modifiers[e]||e}.bind(this)),this.state.position=this._getPosition(this._popper,this._reference),d(this._popper,{position:this.state.position,top:0}),this.update(),this._setupEventListeners(),this}function r(t){var n=t.style.display,r=t.style.visibility;t.style.display="block",t.style.visibility="hidden";t.offsetWidth;var i=e.getComputedStyle(t),o=parseFloat(i.marginTop)+parseFloat(i.marginBottom),s=parseFloat(i.marginLeft)+parseFloat(i.marginRight),a={width:t.offsetWidth+s,height:t.offsetHeight+o};return t.style.display=n,t.style.visibility=r,a}function i(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function o(e){var t=Object.assign({},e);return t.right=t.left+t.width,t.bottom=t.top+t.height,t}function s(e,t){var n,r=0;for(n in e){if(e[n]===t)return r;r++}return null}function a(t,n){var r=e.getComputedStyle(t,null);return r[n]}function c(t){var n=t.offsetParent;return n!==e.document.body&&n?n:e.document.documentElement}function l(t){var n=t.parentNode;return n?n===e.document?e.document.body.scrollTop||e.document.body.scrollLeft?e.document.body:e.document.documentElement:-1!==["scroll","auto"].indexOf(a(n,"overflow"))||-1!==["scroll","auto"].indexOf(a(n,"overflow-x"))||-1!==["scroll","auto"].indexOf(a(n,"overflow-y"))?n:l(t.parentNode):t}function u(t){return t!==e.document.body&&("fixed"===a(t,"position")||(t.parentNode?u(t.parentNode):t))}function d(e,t){function n(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}Object.keys(t).forEach((function(r){var i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&n(t[r])&&(i="px"),e.style[r]=t[r]+i}))}function h(e){var t={};return e&&"[object Function]"===t.toString.call(e)}function p(e){var t={width:e.offsetWidth,height:e.offsetHeight,left:e.offsetLeft,top:e.offsetTop};return t.right=t.left+t.width,t.bottom=t.top+t.height,t}function f(e){var t=e.getBoundingClientRect(),n=-1!=navigator.userAgent.indexOf("MSIE"),r=n&&"HTML"===e.tagName?-e.scrollTop:t.top;return{left:t.left,top:r,right:t.right,bottom:t.bottom,width:t.right-t.left,height:t.bottom-r}}function g(e,t,n){var r=f(e),i=f(t);if(n){var o=l(t);i.top+=o.scrollTop,i.bottom+=o.scrollTop,i.left+=o.scrollLeft,i.right+=o.scrollLeft}var s={top:r.top-i.top,left:r.left-i.left,bottom:r.top-i.top+r.height,right:r.left-i.left+r.width,width:r.width,height:r.height};return s}function m(t){for(var n=["","ms","webkit","moz","o"],r=0;r<n.length;r++){var i=n[r]?n[r]+t.charAt(0).toUpperCase()+t.slice(1):t;if("undefined"!==typeof e.document.body.style[i])return i}return null}return n.prototype.destroy=function(){return this._popper.removeAttribute("x-placement"),this._popper.style.left="",this._popper.style.position="",this._popper.style.top="",this._popper.style[m("transform")]="",this._removeEventListeners(),this._options.removeOnDestroy&&this._popper.remove(),this},n.prototype.update=function(){var e={instance:this,styles:{}};e.placement=this._options.placement,e._originalPlacement=this._options.placement,e.offsets=this._getOffsets(this._popper,this._reference,e.placement),e.boundaries=this._getBoundaries(e,this._options.boundariesPadding,this._options.boundariesElement),e=this.runModifiers(e,this._options.modifiers),"function"===typeof this.state.updateCallback&&this.state.updateCallback(e)},n.prototype.onCreate=function(e){return e(this),this},n.prototype.onUpdate=function(e){return this.state.updateCallback=e,this},n.prototype.parse=function(t){var n={tagName:"div",classNames:["popper"],attributes:[],parent:e.document.body,content:"",contentType:"text",arrowTagName:"div",arrowClassNames:["popper__arrow"],arrowAttributes:["x-arrow"]};t=Object.assign({},n,t);var r=e.document,i=r.createElement(t.tagName);if(a(i,t.classNames),c(i,t.attributes),"node"===t.contentType?i.appendChild(t.content.jquery?t.content[0]:t.content):"html"===t.contentType?i.innerHTML=t.content:i.textContent=t.content,t.arrowTagName){var o=r.createElement(t.arrowTagName);a(o,t.arrowClassNames),c(o,t.arrowAttributes),i.appendChild(o)}var s=t.parent.jquery?t.parent[0]:t.parent;if("string"===typeof s){if(s=r.querySelectorAll(t.parent),s.length>1&&console.warn("WARNING: the given `parent` query("+t.parent+") matched more than one element, the first one will be used"),0===s.length)throw"ERROR: the given `parent` doesn't exists!";s=s[0]}return s.length>1&&s instanceof Element===!1&&(console.warn("WARNING: you have passed as parent a list of elements, the first one will be used"),s=s[0]),s.appendChild(i),i;function a(e,t){t.forEach((function(t){e.classList.add(t)}))}function c(e,t){t.forEach((function(t){e.setAttribute(t.split(":")[0],t.split(":")[1]||"")}))}},n.prototype._getPosition=function(e,t){var n=c(t);if(this._options.forceAbsolute)return"absolute";var r=u(t,n);return r?"fixed":"absolute"},n.prototype._getOffsets=function(e,t,n){n=n.split("-")[0];var i={};i.position=this.state.position;var o="fixed"===i.position,s=g(t,c(e),o),a=r(e);return-1!==["right","left"].indexOf(n)?(i.top=s.top+s.height/2-a.height/2,i.left="left"===n?s.left-a.width:s.right):(i.left=s.left+s.width/2-a.width/2,i.top="top"===n?s.top-a.height:s.bottom),i.width=a.width,i.height=a.height,{popper:i,reference:s}},n.prototype._setupEventListeners=function(){if(this.state.updateBound=this.update.bind(this),e.addEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var t=l(this._reference);t!==e.document.body&&t!==e.document.documentElement||(t=e),t.addEventListener("scroll",this.state.updateBound),this.state.scrollTarget=t}},n.prototype._removeEventListeners=function(){e.removeEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement&&this.state.scrollTarget&&(this.state.scrollTarget.removeEventListener("scroll",this.state.updateBound),this.state.scrollTarget=null),this.state.updateBound=null},n.prototype._getBoundaries=function(t,n,r){var i,o,s={};if("window"===r){var a=e.document.body,u=e.document.documentElement;o=Math.max(a.scrollHeight,a.offsetHeight,u.clientHeight,u.scrollHeight,u.offsetHeight),i=Math.max(a.scrollWidth,a.offsetWidth,u.clientWidth,u.scrollWidth,u.offsetWidth),s={top:0,right:i,bottom:o,left:0}}else if("viewport"===r){var d=c(this._popper),h=l(this._popper),f=p(d),g=function(e){return e==document.body?Math.max(document.documentElement.scrollTop,document.body.scrollTop):e.scrollTop},m=function(e){return e==document.body?Math.max(document.documentElement.scrollLeft,document.body.scrollLeft):e.scrollLeft},_="fixed"===t.offsets.popper.position?0:g(h),v="fixed"===t.offsets.popper.position?0:m(h);s={top:0-(f.top-_),right:e.document.documentElement.clientWidth-(f.left-v),bottom:e.document.documentElement.clientHeight-(f.top-_),left:0-(f.left-v)}}else s=c(this._popper)===r?{top:0,left:0,right:r.clientWidth,bottom:r.clientHeight}:p(r);return s.left+=n,s.right-=n,s.top=s.top+n,s.bottom=s.bottom-n,s},n.prototype.runModifiers=function(e,t,n){var r=t.slice();return void 0!==n&&(r=this._options.modifiers.slice(0,s(this._options.modifiers,n))),r.forEach(function(t){h(t)&&(e=t.call(this,e))}.bind(this)),e},n.prototype.isModifierRequired=function(e,t){var n=s(this._options.modifiers,e);return!!this._options.modifiers.slice(0,n).filter((function(e){return e===t})).length},n.prototype.modifiers={},n.prototype.modifiers.applyStyle=function(e){var t,n={position:e.offsets.popper.position},r=Math.round(e.offsets.popper.left),i=Math.round(e.offsets.popper.top);return this._options.gpuAcceleration&&(t=m("transform"))?(n[t]="translate3d("+r+"px, "+i+"px, 0)",n.top=0,n.left=0):(n.left=r,n.top=i),Object.assign(n,e.styles),d(this._popper,n),this._popper.setAttribute("x-placement",e.placement),this.isModifierRequired(this.modifiers.applyStyle,this.modifiers.arrow)&&e.offsets.arrow&&d(e.arrowElement,e.offsets.arrow),e},n.prototype.modifiers.shift=function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var i=e.offsets.reference,s=o(e.offsets.popper),a={y:{start:{top:i.top},end:{top:i.top+i.height-s.height}},x:{start:{left:i.left},end:{left:i.left+i.width-s.width}}},c=-1!==["bottom","top"].indexOf(n)?"x":"y";e.offsets.popper=Object.assign(s,a[c][r])}return e},n.prototype.modifiers.preventOverflow=function(e){var t=this._options.preventOverflowOrder,n=o(e.offsets.popper),r={left:function(){var t=n.left;return n.left<e.boundaries.left&&(t=Math.max(n.left,e.boundaries.left)),{left:t}},right:function(){var t=n.left;return n.right>e.boundaries.right&&(t=Math.min(n.left,e.boundaries.right-n.width)),{left:t}},top:function(){var t=n.top;return n.top<e.boundaries.top&&(t=Math.max(n.top,e.boundaries.top)),{top:t}},bottom:function(){var t=n.top;return n.bottom>e.boundaries.bottom&&(t=Math.min(n.top,e.boundaries.bottom-n.height)),{top:t}}};return t.forEach((function(t){e.offsets.popper=Object.assign(n,r[t]())})),e},n.prototype.modifiers.keepTogether=function(e){var t=o(e.offsets.popper),n=e.offsets.reference,r=Math.floor;return t.right<r(n.left)&&(e.offsets.popper.left=r(n.left)-t.width),t.left>r(n.right)&&(e.offsets.popper.left=r(n.right)),t.bottom<r(n.top)&&(e.offsets.popper.top=r(n.top)-t.height),t.top>r(n.bottom)&&(e.offsets.popper.top=r(n.bottom)),e},n.prototype.modifiers.flip=function(e){if(!this.isModifierRequired(this.modifiers.flip,this.modifiers.preventOverflow))return console.warn("WARNING: preventOverflow modifier is required by flip modifier in order to work, be sure to include it before flip!"),e;if(e.flipped&&e.placement===e._originalPlacement)return e;var t=e.placement.split("-")[0],n=i(t),r=e.placement.split("-")[1]||"",s=[];return s="flip"===this._options.flipBehavior?[t,n]:this._options.flipBehavior,s.forEach(function(a,c){if(t===a&&s.length!==c+1){t=e.placement.split("-")[0],n=i(t);var l=o(e.offsets.popper),u=-1!==["right","bottom"].indexOf(t);(u&&Math.floor(e.offsets.reference[t])>Math.floor(l[n])||!u&&Math.floor(e.offsets.reference[t])<Math.floor(l[n]))&&(e.flipped=!0,e.placement=s[c+1],r&&(e.placement+="-"+r),e.offsets.popper=this._getOffsets(this._popper,this._reference,e.placement).popper,e=this.runModifiers(e,this._options.modifiers,this._flip))}}.bind(this)),e},n.prototype.modifiers.offset=function(e){var t=this._options.offset,n=e.offsets.popper;return-1!==e.placement.indexOf("left")?n.top-=t:-1!==e.placement.indexOf("right")?n.top+=t:-1!==e.placement.indexOf("top")?n.left-=t:-1!==e.placement.indexOf("bottom")&&(n.left+=t),e},n.prototype.modifiers.arrow=function(e){var t=this._options.arrowElement,n=this._options.arrowOffset;if("string"===typeof t&&(t=this._popper.querySelector(t)),!t)return e;if(!this._popper.contains(t))return console.warn("WARNING: `arrowElement` must be child of its popper element!"),e;if(!this.isModifierRequired(this.modifiers.arrow,this.modifiers.keepTogether))return console.warn("WARNING: keepTogether modifier is required by arrow modifier in order to work, be sure to include it before arrow!"),e;var i={},s=e.placement.split("-")[0],a=o(e.offsets.popper),c=e.offsets.reference,l=-1!==["left","right"].indexOf(s),u=l?"height":"width",d=l?"top":"left",h=l?"left":"top",p=l?"bottom":"right",f=r(t)[u];c[p]-f<a[d]&&(e.offsets.popper[d]-=a[d]-(c[p]-f)),c[d]+f>a[p]&&(e.offsets.popper[d]+=c[d]+f-a[p]);var g=c[d]+(n||c[u]/2-f/2),m=g-a[d];return m=Math.max(Math.min(a[u]-f-8,m),8),i[d]=m,i[h]="",e.offsets.arrow=i,e.arrowElement=t,e},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r){r=Object(r);for(var i=Object.keys(r),o=0,s=i.length;o<s;o++){var a=i[o],c=Object.getOwnPropertyDescriptor(r,a);void 0!==c&&c.enumerable&&(t[a]=r[a])}}}return t}}),n}))},"621a":function(e,t,n){"use strict";var r=n("da84"),i=n("e330"),o=n("83ab"),s=n("a981"),a=n("5e77"),c=n("9112"),l=n("e2cc"),u=n("d039"),d=n("19aa"),h=n("5926"),p=n("50c4"),f=n("0b25"),g=n("77a7"),m=n("e163"),_=n("d2bb"),v=n("241c").f,E=n("9bf2").f,A=n("81d5"),y=n("4dae"),S=n("d44e"),b=n("69f3"),C=a.PROPER,T=a.CONFIGURABLE,I=b.get,R=b.set,w="ArrayBuffer",k="DataView",O="prototype",N="Wrong length",L="Wrong index",P=r[w],D=P,M=D&&D[O],x=r[k],B=x&&x[O],U=Object.prototype,F=r.Array,V=r.RangeError,j=i(A),G=i([].reverse),H=g.pack,Q=g.unpack,W=function(e){return[255&e]},q=function(e){return[255&e,e>>8&255]},z=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Z=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},$=function(e){return H(e,23,4)},K=function(e){return H(e,52,8)},Y=function(e,t){E(e[O],t,{get:function(){return I(this)[t]}})},J=function(e,t,n,r){var i=f(n),o=I(e);if(i+t>o.byteLength)throw V(L);var s=I(o.buffer).bytes,a=i+o.byteOffset,c=y(s,a,a+t);return r?c:G(c)},X=function(e,t,n,r,i,o){var s=f(n),a=I(e);if(s+t>a.byteLength)throw V(L);for(var c=I(a.buffer).bytes,l=s+a.byteOffset,u=r(+i),d=0;d<t;d++)c[l+d]=u[o?d:t-d-1]};if(s){var ee=C&&P.name!==w;if(u((function(){P(1)}))&&u((function(){new P(-1)}))&&!u((function(){return new P,new P(1.5),new P(NaN),ee&&!T})))ee&&T&&c(P,"name",w);else{D=function(e){return d(this,M),new P(f(e))},D[O]=M;for(var te,ne=v(P),re=0;ne.length>re;)(te=ne[re++])in D||c(D,te,P[te]);M.constructor=D}_&&m(B)!==U&&_(B,U);var ie=new x(new D(2)),oe=i(B.setInt8);ie.setInt8(0,2147483648),ie.setInt8(1,2147483649),!ie.getInt8(0)&&ie.getInt8(1)||l(B,{setInt8:function(e,t){oe(this,e,t<<24>>24)},setUint8:function(e,t){oe(this,e,t<<24>>24)}},{unsafe:!0})}else D=function(e){d(this,M);var t=f(e);R(this,{bytes:j(F(t),0),byteLength:t}),o||(this.byteLength=t)},M=D[O],x=function(e,t,n){d(this,B),d(e,M);var r=I(e).byteLength,i=h(t);if(i<0||i>r)throw V("Wrong offset");if(n=void 0===n?r-i:p(n),i+n>r)throw V(N);R(this,{buffer:e,byteLength:n,byteOffset:i}),o||(this.buffer=e,this.byteLength=n,this.byteOffset=i)},B=x[O],o&&(Y(D,"byteLength"),Y(x,"buffer"),Y(x,"byteLength"),Y(x,"byteOffset")),l(B,{getInt8:function(e){return J(this,1,e)[0]<<24>>24},getUint8:function(e){return J(this,1,e)[0]},getInt16:function(e){var t=J(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=J(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return Z(J(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return Z(J(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return Q(J(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return Q(J(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){X(this,1,e,W,t)},setUint8:function(e,t){X(this,1,e,W,t)},setInt16:function(e,t){X(this,2,e,q,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){X(this,2,e,q,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){X(this,4,e,z,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){X(this,4,e,z,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){X(this,4,e,$,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){X(this,8,e,K,t,arguments.length>2?arguments[2]:void 0)}});S(D,w),S(x,k),e.exports={ArrayBuffer:D,DataView:x}},6438:function(e,t,n){var r=n("03d6"),i=n("9742").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},"649e":function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").some,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("some",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},6547:function(e,t,n){var r=n("e330"),i=n("5926"),o=n("577e"),s=n("1d80"),a=r("".charAt),c=r("".charCodeAt),l=r("".slice),u=function(e){return function(t,n){var r,u,d=o(s(t)),h=i(n),p=d.length;return h<0||h>=p?e?"":void 0:(r=c(d,h),r<55296||r>56319||h+1===p||(u=c(d,h+1))<56320||u>57343?e?a(d,h):r:e?l(d,h,h+2):u-56320+(r-55296<<10)+65536)}};e.exports={codeAt:u(!1),charAt:u(!0)}},"658f":function(e,t,n){n("6858");for(var r=n("ef08"),i=n("051b"),o=n("8a0d"),s=n("cc15")("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var l=a[c],u=r[l],d=u&&u.prototype;d&&!d[s]&&i(d,s,l),o[l]=o.Array}},"65f0":function(e,t,n){var r=n("0b42");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},6858:function(e,t,n){"use strict";var r=n("2f9a"),i=n("ea34"),o=n("8a0d"),s=n("6ca1");e.exports=n("393a")(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},"68ee":function(e,t,n){var r=n("e330"),i=n("d039"),o=n("1626"),s=n("f5df"),a=n("d066"),c=n("8925"),l=function(){},u=[],d=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=r(h.exec),f=!h.exec(l),g=function(e){if(!o(e))return!1;try{return d(l,u,e),!0}catch(t){return!1}},m=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,c(e))}catch(t){return!0}};m.sham=!0,e.exports=!d||i((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?m:g},"693d":function(e,t,n){"use strict";var r=n("ef08"),i=n("9c0e"),o=n("0bad"),s=n("512c"),a=n("ba01"),c=n("e34a").KEY,l=n("4b8b"),u=n("b367"),d=n("92f0"),h=n("8b1a"),p=n("cc15"),f=n("fcd4"),g=n("e198"),m=n("0ae2"),_=n("4ebc"),v=n("77e9"),E=n("7a41"),A=n("0983"),y=n("6ca1"),S=n("3397"),b=n("10db"),C=n("6f4f"),T=n("1836"),I=n("4d20"),R=n("fed5"),w=n("1a14"),k=n("9876"),O=I.f,N=w.f,L=T.f,P=r.Symbol,D=r.JSON,M=D&&D.stringify,x="prototype",B=p("_hidden"),U=p("toPrimitive"),F={}.propertyIsEnumerable,V=u("symbol-registry"),j=u("symbols"),G=u("op-symbols"),H=Object[x],Q="function"==typeof P&&!!R.f,W=r.QObject,q=!W||!W[x]||!W[x].findChild,z=o&&l((function(){return 7!=C(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=O(H,t);r&&delete H[t],N(e,t,n),r&&e!==H&&N(H,t,r)}:N,Z=function(e){var t=j[e]=C(P[x]);return t._k=e,t},$=Q&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},K=function(e,t,n){return e===H&&K(G,t,n),v(e),t=S(t,!0),v(n),i(j,t)?(n.enumerable?(i(e,B)&&e[B][t]&&(e[B][t]=!1),n=C(n,{enumerable:b(0,!1)})):(i(e,B)||N(e,B,b(1,{})),e[B][t]=!0),z(e,t,n)):N(e,t,n)},Y=function(e,t){v(e);var n,r=m(t=y(t)),i=0,o=r.length;while(o>i)K(e,n=r[i++],t[n]);return e},J=function(e,t){return void 0===t?C(e):Y(C(e),t)},X=function(e){var t=F.call(this,e=S(e,!0));return!(this===H&&i(j,e)&&!i(G,e))&&(!(t||!i(this,e)||!i(j,e)||i(this,B)&&this[B][e])||t)},ee=function(e,t){if(e=y(e),t=S(t,!0),e!==H||!i(j,t)||i(G,t)){var n=O(e,t);return!n||!i(j,t)||i(e,B)&&e[B][t]||(n.enumerable=!0),n}},te=function(e){var t,n=L(y(e)),r=[],o=0;while(n.length>o)i(j,t=n[o++])||t==B||t==c||r.push(t);return r},ne=function(e){var t,n=e===H,r=L(n?G:y(e)),o=[],s=0;while(r.length>s)!i(j,t=r[s++])||n&&!i(H,t)||o.push(j[t]);return o};Q||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===H&&t.call(G,n),i(this,B)&&i(this[B],e)&&(this[B][e]=!1),z(this,e,b(1,n))};return o&&q&&z(H,e,{configurable:!0,set:t}),Z(e)},a(P[x],"toString",(function(){return this._k})),I.f=ee,w.f=K,n("6438").f=T.f=te,n("1917").f=X,R.f=ne,o&&!n("e444")&&a(H,"propertyIsEnumerable",X,!0),f.f=function(e){return Z(p(e))}),s(s.G+s.W+s.F*!Q,{Symbol:P});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;re.length>ie;)p(re[ie++]);for(var oe=k(p.store),se=0;oe.length>se;)g(oe[se++]);s(s.S+s.F*!Q,"Symbol",{for:function(e){return i(V,e+="")?V[e]:V[e]=P(e)},keyFor:function(e){if(!$(e))throw TypeError(e+" is not a symbol!");for(var t in V)if(V[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),s(s.S+s.F*!Q,"Object",{create:J,defineProperty:K,defineProperties:Y,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ne});var ae=l((function(){R.f(1)}));s(s.S+s.F*ae,"Object",{getOwnPropertySymbols:function(e){return R.f(A(e))}}),D&&s(s.S+s.F*(!Q||l((function(){var e=P();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))}))),"JSON",{stringify:function(e){var t,n,r=[e],i=1;while(arguments.length>i)r.push(arguments[i++]);if(n=t=r[1],(E(t)||void 0!==e)&&!$(e))return _(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!$(t))return t}),r[1]=t,M.apply(D,r)}}),P[x][U]||n("051b")(P[x],U,P[x].valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},"69f3":function(e,t,n){var r,i,o,s=n("7f9a"),a=n("da84"),c=n("e330"),l=n("861d"),u=n("9112"),d=n("1a2d"),h=n("c6cd"),p=n("f772"),f=n("d012"),g="Object already initialized",m=a.TypeError,_=a.WeakMap,v=function(e){return o(e)?i(e):r(e,{})},E=function(e){return function(t){var n;if(!l(t)||(n=i(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}};if(s||h.state){var A=h.state||(h.state=new _),y=c(A.get),S=c(A.has),b=c(A.set);r=function(e,t){if(S(A,e))throw new m(g);return t.facade=e,b(A,e,t),t},i=function(e){return y(A,e)||{}},o=function(e){return S(A,e)}}else{var C=p("state");f[C]=!0,r=function(e,t){if(d(e,C))throw new m(g);return t.facade=e,u(e,C,t),t},i=function(e){return d(e,C)?e[C]:{}},o=function(e){return d(e,C)}}e.exports={set:r,get:i,has:o,enforce:v,getterFor:E}},"6ac9":function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=79)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},2:function(e,t){e.exports=n("5924")},3:function(e,t){e.exports=n("8122")},5:function(e,t){e.exports=n("e974")},7:function(e,t){e.exports=n("2b0e")},79:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("transition",{attrs:{name:e.transition},on:{"after-enter":e.handleAfterEnter,"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&e.showPopper,expression:"!disabled && showPopper"}],ref:"popper",staticClass:"el-popover el-popper",class:[e.popperClass,e.content&&"el-popover--plain"],style:{width:e.width+"px"},attrs:{role:"tooltip",id:e.tooltipId,"aria-hidden":e.disabled||!e.showPopper?"true":"false"}},[e.title?n("div",{staticClass:"el-popover__title",domProps:{textContent:e._s(e.title)}}):e._e(),e._t("default",[e._v(e._s(e.content))])],2)]),n("span",{ref:"wrapper",staticClass:"el-popover__reference-wrapper"},[e._t("reference")],2)],1)},i=[];r._withStripped=!0;var o=n(5),s=n.n(o),a=n(2),c=n(3),l={name:"ElPopover",mixins:[s.a],props:{trigger:{type:String,default:"click",validator:function(e){return["click","focus","hover","manual"].indexOf(e)>-1}},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200},title:String,disabled:Boolean,content:String,reference:{},popperClass:String,width:{},visibleArrow:{default:!0},arrowOffset:{type:Number,default:0},transition:{type:String,default:"fade-in-linear"},tabindex:{type:Number,default:0}},computed:{tooltipId:function(){return"el-popover-"+Object(c["generateId"])()}},watch:{showPopper:function(e){this.disabled||(e?this.$emit("show"):this.$emit("hide"))}},mounted:function(){var e=this,t=this.referenceElm=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!t&&this.$refs.wrapper.children&&(t=this.referenceElm=this.$refs.wrapper.children[0]),t&&(Object(a["addClass"])(t,"el-popover__reference"),t.setAttribute("aria-describedby",this.tooltipId),t.setAttribute("tabindex",this.tabindex),n.setAttribute("tabindex",0),"click"!==this.trigger&&(Object(a["on"])(t,"focusin",(function(){e.handleFocus();var n=t.__vue__;n&&"function"===typeof n.focus&&n.focus()})),Object(a["on"])(n,"focusin",this.handleFocus),Object(a["on"])(t,"focusout",this.handleBlur),Object(a["on"])(n,"focusout",this.handleBlur)),Object(a["on"])(t,"keydown",this.handleKeydown),Object(a["on"])(t,"click",this.handleClick)),"click"===this.trigger?(Object(a["on"])(t,"click",this.doToggle),Object(a["on"])(document,"click",this.handleDocumentClick)):"hover"===this.trigger?(Object(a["on"])(t,"mouseenter",this.handleMouseEnter),Object(a["on"])(n,"mouseenter",this.handleMouseEnter),Object(a["on"])(t,"mouseleave",this.handleMouseLeave),Object(a["on"])(n,"mouseleave",this.handleMouseLeave)):"focus"===this.trigger&&(this.tabindex<0&&console.warn("[Element Warn][Popover]a negative taindex means that the element cannot be focused by tab key"),t.querySelector("input, textarea")?(Object(a["on"])(t,"focusin",this.doShow),Object(a["on"])(t,"focusout",this.doClose)):(Object(a["on"])(t,"mousedown",this.doShow),Object(a["on"])(t,"mouseup",this.doClose)))},beforeDestroy:function(){this.cleanup()},deactivated:function(){this.cleanup()},methods:{doToggle:function(){this.showPopper=!this.showPopper},doShow:function(){this.showPopper=!0},doClose:function(){this.showPopper=!1},handleFocus:function(){Object(a["addClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!0)},handleClick:function(){Object(a["removeClass"])(this.referenceElm,"focusing")},handleBlur:function(){Object(a["removeClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!1)},handleMouseEnter:function(){var e=this;clearTimeout(this._timer),this.openDelay?this._timer=setTimeout((function(){e.showPopper=!0}),this.openDelay):this.showPopper=!0},handleKeydown:function(e){27===e.keyCode&&"manual"!==this.trigger&&this.doClose()},handleMouseLeave:function(){var e=this;clearTimeout(this._timer),this.closeDelay?this._timer=setTimeout((function(){e.showPopper=!1}),this.closeDelay):this.showPopper=!1},handleDocumentClick:function(e){var t=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!t&&this.$refs.wrapper.children&&(t=this.referenceElm=this.$refs.wrapper.children[0]),this.$el&&t&&!this.$el.contains(e.target)&&!t.contains(e.target)&&n&&!n.contains(e.target)&&(this.showPopper=!1)},handleAfterEnter:function(){this.$emit("after-enter")},handleAfterLeave:function(){this.$emit("after-leave"),this.doDestroy()},cleanup:function(){(this.openDelay||this.closeDelay)&&clearTimeout(this._timer)}},destroyed:function(){var e=this.reference;Object(a["off"])(e,"click",this.doToggle),Object(a["off"])(e,"mouseup",this.doClose),Object(a["off"])(e,"mousedown",this.doShow),Object(a["off"])(e,"focusin",this.doShow),Object(a["off"])(e,"focusout",this.doClose),Object(a["off"])(e,"mousedown",this.doShow),Object(a["off"])(e,"mouseup",this.doClose),Object(a["off"])(e,"mouseleave",this.handleMouseLeave),Object(a["off"])(e,"mouseenter",this.handleMouseEnter),Object(a["off"])(document,"click",this.handleDocumentClick)}},u=l,d=n(0),h=Object(d["a"])(u,r,i,!1,null,null,null);h.options.__file="packages/popover/src/main.vue";var p=h.exports,f=function(e,t,n){var r=t.expression?t.value:t.arg,i=n.context.$refs[r];i&&(Array.isArray(i)?i[0].$refs.reference=e:i.$refs.reference=e)},g={bind:function(e,t,n){f(e,t,n)},inserted:function(e,t,n){f(e,t,n)}},m=n(7),_=n.n(m);_.a.directive("popover",g),p.install=function(e){e.directive("popover",g),e.component(p.name,p)},p.directive=g;t["default"]=p}})},"6b7c":function(e,t,n){"use strict";t.__esModule=!0;var r=n("4897");t.default={methods:{t:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.t.apply(this,t)}}}},"6c57":function(e,t,n){var r=n("23e7"),i=n("da84");r({global:!0},{globalThis:i})},"6ca1":function(e,t,n){var r=n("9fbb"),i=n("c901");e.exports=function(e){return r(i(e))}},"6dd8":function(e,t,n){"use strict";n.r(t),function(e){var n=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),r="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,i=function(){return"undefined"!==typeof e&&e.Math===Math?e:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")()}(),o=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)}}(),s=2;function a(e,t){var n=!1,r=!1,i=0;function a(){n&&(n=!1,e()),r&&l()}function c(){o(a)}function l(){var e=Date.now();if(n){if(e-i<s)return;r=!0}else n=!0,r=!1,setTimeout(c,t);i=e}return l}var c=20,l=["top","right","bottom","left","width","height","size","weight"],u="undefined"!==typeof MutationObserver,d=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=a(this.refresh.bind(this),c)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t,r=l.some((function(e){return!!~n.indexOf(e)}));r&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),h=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},p=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||i},f=C(0,0,0,0);function g(e){return parseFloat(e)||0}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){var r=e["border-"+n+"-width"];return t+g(r)}),0)}function _(e){for(var t=["top","right","bottom","left"],n={},r=0,i=t;r<i.length;r++){var o=i[r],s=e["padding-"+o];n[o]=g(s)}return n}function v(e){var t=e.getBBox();return C(0,0,t.width,t.height)}function E(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return f;var r=p(e).getComputedStyle(e),i=_(r),o=i.left+i.right,s=i.top+i.bottom,a=g(r.width),c=g(r.height);if("border-box"===r.boxSizing&&(Math.round(a+o)!==t&&(a-=m(r,"left","right")+o),Math.round(c+s)!==n&&(c-=m(r,"top","bottom")+s)),!y(e)){var l=Math.round(a+o)-t,u=Math.round(c+s)-n;1!==Math.abs(l)&&(a-=l),1!==Math.abs(u)&&(c-=u)}return C(i.left,i.top,a,c)}var A=function(){return"undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof p(e).SVGGraphicsElement}:function(e){return e instanceof p(e).SVGElement&&"function"===typeof e.getBBox}}();function y(e){return e===p(e).document.documentElement}function S(e){return r?A(e)?v(e):E(e):f}function b(e){var t=e.x,n=e.y,r=e.width,i=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return h(s,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),s}function C(e,t,n,r){return{x:e,y:t,width:n,height:r}}var T=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=C(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=S(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),I=function(){function e(e,t){var n=b(t);h(this,{target:e,contentRect:n})}return e}(),R=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof p(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new T(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof p(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new I(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),w="undefined"!==typeof WeakMap?new WeakMap:new n,k=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=d.getInstance(),r=new R(t,n,this);w.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach((function(e){k.prototype[e]=function(){var t;return(t=w.get(this))[e].apply(t,arguments)}}));var O=function(){return"undefined"!==typeof i.ResizeObserver?i.ResizeObserver:k}();t["default"]=O}.call(this,n("c8ba"))},"6eeb":function(e,t,n){var r=n("da84"),i=n("1626"),o=n("1a2d"),s=n("9112"),a=n("ce4e"),c=n("8925"),l=n("69f3"),u=n("5e77").CONFIGURABLE,d=l.get,h=l.enforce,p=String(String).split("String");(e.exports=function(e,t,n,c){var l,d=!!c&&!!c.unsafe,f=!!c&&!!c.enumerable,g=!!c&&!!c.noTargetGet,m=c&&void 0!==c.name?c.name:t;i(n)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(n,"name")||u&&n.name!==m)&&s(n,"name",m),l=h(n),l.source||(l.source=p.join("string"==typeof m?m:""))),e!==r?(d?!g&&e[t]&&(f=!0):delete e[t],f?e[t]=n:s(e,t,n)):f?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return i(this)&&d(this).source||c(this)}))},"6f4f":function(e,t,n){var r=n("77e9"),i=n("85e7"),o=n("9742"),s=n("5a94")("IE_PROTO"),a=function(){},c="prototype",l=function(){var e,t=n("05f5")("iframe"),r=o.length,i="<",s=">";t.style.display="none",n("9141").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+s+"document.F=Object"+i+"/script"+s),e.close(),l=e.F;while(r--)delete l[c][o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(a[c]=r(e),n=new a,a[c]=null,n[s]=e):n=l(),void 0===t?n:i(n,t)}},"6f53":function(e,t,n){var r=n("83ab"),i=n("e330"),o=n("df75"),s=n("fc6a"),a=n("d1e7").f,c=i(a),l=i([].push),u=function(e){return function(t){var n,i=s(t),a=o(i),u=a.length,d=0,h=[];while(u>d)n=a[d++],r&&!c(i,n)||l(h,e?[n,i[n]]:i[n]);return h}};e.exports={entries:u(!0),values:u(!1)}},7037:function(e,t,n){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,r(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},7039:function(e,t,n){var r=n("23e7"),i=n("d039"),o=n("057f").f,s=i((function(){return!Object.getOwnPropertyNames(1)}));r({target:"Object",stat:!0,forced:s},{getOwnPropertyNames:o})},7156:function(e,t,n){var r=n("1626"),i=n("861d"),o=n("d2bb");e.exports=function(e,t,n){var s,a;return o&&r(s=t.constructor)&&s!==n&&i(a=s.prototype)&&a!==n.prototype&&o(e,a),e}},"722f":function(e,t,n){"use strict";t.__esModule=!0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n("e452"),o=s(i);function s(e){return e&&e.__esModule?e:{default:e}}var a,c=c||{};c.Dialog=function(e,t,n){var i=this;if(this.dialogNode=e,null===this.dialogNode||"dialog"!==this.dialogNode.getAttribute("role"))throw new Error("Dialog() requires a DOM element with ARIA role of dialog.");"string"===typeof t?this.focusAfterClosed=document.getElementById(t):"object"===("undefined"===typeof t?"undefined":r(t))?this.focusAfterClosed=t:this.focusAfterClosed=null,"string"===typeof n?this.focusFirst=document.getElementById(n):"object"===("undefined"===typeof n?"undefined":r(n))?this.focusFirst=n:this.focusFirst=null,this.focusFirst?this.focusFirst.focus():o.default.focusFirstDescendant(this.dialogNode),this.lastFocus=document.activeElement,a=function(e){i.trapFocus(e)},this.addListeners()},c.Dialog.prototype.addListeners=function(){document.addEventListener("focus",a,!0)},c.Dialog.prototype.removeListeners=function(){document.removeEventListener("focus",a,!0)},c.Dialog.prototype.closeDialog=function(){var e=this;this.removeListeners(),this.focusAfterClosed&&setTimeout((function(){e.focusAfterClosed.focus()}))},c.Dialog.prototype.trapFocus=function(e){o.default.IgnoreUtilFocusChanges||(this.dialogNode.contains(e.target)?this.lastFocus=e.target:(o.default.focusFirstDescendant(this.dialogNode),this.lastFocus===document.activeElement&&o.default.focusLastDescendant(this.dialogNode),this.lastFocus=document.activeElement))},t.default=c.Dialog},"72f7":function(e,t,n){"use strict";var r=n("ebb5").exportTypedArrayMethod,i=n("d039"),o=n("da84"),s=n("e330"),a=o.Uint8Array,c=a&&a.prototype||{},l=[].toString,u=s([].join);i((function(){l.call({})}))&&(l=function(){return u(this)});var d=c.toString!=l;r("toString",l,d)},"735e":function(e,t,n){"use strict";var r=n("ebb5"),i=n("c65b"),o=n("81d5"),s=r.aTypedArray,a=r.exportTypedArrayMethod;a("fill",(function(e){var t=arguments.length;return i(o,s(this),e,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}))},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,n){var r=n("428f"),i=n("1a2d"),o=n("e538"),s=n("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||s(t,e,{value:o.f(e)})}},"74e8":function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("c65b"),s=n("83ab"),a=n("8aa7"),c=n("ebb5"),l=n("621a"),u=n("19aa"),d=n("5c6c"),h=n("9112"),p=n("eac5"),f=n("50c4"),g=n("0b25"),m=n("182d"),_=n("a04b"),v=n("1a2d"),E=n("f5df"),A=n("861d"),y=n("d9b5"),S=n("7c73"),b=n("3a9b"),C=n("d2bb"),T=n("241c").f,I=n("a078"),R=n("b727").forEach,w=n("2626"),k=n("9bf2"),O=n("06cf"),N=n("69f3"),L=n("7156"),P=N.get,D=N.set,M=k.f,x=O.f,B=Math.round,U=i.RangeError,F=l.ArrayBuffer,V=F.prototype,j=l.DataView,G=c.NATIVE_ARRAY_BUFFER_VIEWS,H=c.TYPED_ARRAY_CONSTRUCTOR,Q=c.TYPED_ARRAY_TAG,W=c.TypedArray,q=c.TypedArrayPrototype,z=c.aTypedArrayConstructor,Z=c.isTypedArray,$="BYTES_PER_ELEMENT",K="Wrong length",Y=function(e,t){z(e);var n=0,r=t.length,i=new e(r);while(r>n)i[n]=t[n++];return i},J=function(e,t){M(e,t,{get:function(){return P(this)[t]}})},X=function(e){var t;return b(V,e)||"ArrayBuffer"==(t=E(e))||"SharedArrayBuffer"==t},ee=function(e,t){return Z(e)&&!y(t)&&t in e&&p(+t)&&t>=0},te=function(e,t){return t=_(t),ee(e,t)?d(2,e[t]):x(e,t)},ne=function(e,t,n){return t=_(t),!(ee(e,t)&&A(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?M(e,t,n):(e[t]=n.value,e)};s?(G||(O.f=te,k.f=ne,J(q,"buffer"),J(q,"byteOffset"),J(q,"byteLength"),J(q,"length")),r({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:te,defineProperty:ne}),e.exports=function(e,t,n){var s=e.match(/\d+$/)[0]/8,c=e+(n?"Clamped":"")+"Array",l="get"+e,d="set"+e,p=i[c],_=p,v=_&&_.prototype,E={},y=function(e,t){var n=P(e);return n.view[l](t*s+n.byteOffset,!0)},b=function(e,t,r){var i=P(e);n&&(r=(r=B(r))<0?0:r>255?255:255&r),i.view[d](t*s+i.byteOffset,r,!0)},k=function(e,t){M(e,t,{get:function(){return y(this,t)},set:function(e){return b(this,t,e)},enumerable:!0})};G?a&&(_=t((function(e,t,n,r){return u(e,v),L(function(){return A(t)?X(t)?void 0!==r?new p(t,m(n,s),r):void 0!==n?new p(t,m(n,s)):new p(t):Z(t)?Y(_,t):o(I,_,t):new p(g(t))}(),e,_)})),C&&C(_,W),R(T(p),(function(e){e in _||h(_,e,p[e])})),_.prototype=v):(_=t((function(e,t,n,r){u(e,v);var i,a,c,l=0,d=0;if(A(t)){if(!X(t))return Z(t)?Y(_,t):o(I,_,t);i=t,d=m(n,s);var h=t.byteLength;if(void 0===r){if(h%s)throw U(K);if(a=h-d,a<0)throw U(K)}else if(a=f(r)*s,a+d>h)throw U(K);c=a/s}else c=g(t),a=c*s,i=new F(a);D(e,{buffer:i,byteOffset:d,byteLength:a,length:c,view:new j(i)});while(l<c)k(e,l++)})),C&&C(_,W),v=_.prototype=S(q)),v.constructor!==_&&h(v,"constructor",_),h(v,H,_),Q&&h(v,Q,c),E[c]=_,r({global:!0,forced:_!=p,sham:!G},E),$ in _||h(_,$,s),$ in v||h(v,$,s),w(c)}):e.exports=function(){}},"77a7":function(e,t,n){var r=n("da84"),i=r.Array,o=Math.abs,s=Math.pow,a=Math.floor,c=Math.log,l=Math.LN2,u=function(e,t,n){var r,u,d,h=i(n),p=8*n-t-1,f=(1<<p)-1,g=f>>1,m=23===t?s(2,-24)-s(2,-77):0,_=e<0||0===e&&1/e<0?1:0,v=0;e=o(e),e!=e||e===1/0?(u=e!=e?1:0,r=f):(r=a(c(e)/l),d=s(2,-r),e*d<1&&(r--,d*=2),e+=r+g>=1?m/d:m*s(2,1-g),e*d>=2&&(r++,d/=2),r+g>=f?(u=0,r=f):r+g>=1?(u=(e*d-1)*s(2,t),r+=g):(u=e*s(2,g-1)*s(2,t),r=0));while(t>=8)h[v++]=255&u,u/=256,t-=8;r=r<<t|u,p+=t;while(p>0)h[v++]=255&r,r/=256,p-=8;return h[--v]|=128*_,h},d=function(e,t){var n,r=e.length,i=8*r-t-1,o=(1<<i)-1,a=o>>1,c=i-7,l=r-1,u=e[l--],d=127&u;u>>=7;while(c>0)d=256*d+e[l--],c-=8;n=d&(1<<-c)-1,d>>=-c,c+=t;while(c>0)n=256*n+e[l--],c-=8;if(0===d)d=1-a;else{if(d===o)return n?NaN:u?-1/0:1/0;n+=s(2,t),d-=a}return(u?-1:1)*n*s(2,d-t)};e.exports={pack:u,unpack:d}},"77e9":function(e,t,n){var r=n("7a41");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"785a":function(e,t,n){var r=n("cc12"),i=r("span").classList,o=i&&i.constructor&&i.constructor.prototype;e.exports=o===Object.prototype?void 0:o},"7a41":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},"7a77":function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},"7aac":function(e,t,n){"use strict";var r=n("c532");e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"7b0b":function(e,t,n){var r=n("da84"),i=n("1d80"),o=r.Object;e.exports=function(e){return o(i(e))}},"7b3e":function(e,t,n){"use strict";var r,i=n("a3de");
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */
function o(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,o=n in document;if(!o){var s=document.createElement("div");s.setAttribute(n,"return;"),o="function"===typeof s[n]}return!o&&r&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=o},"7c73":function(e,t,n){var r,i=n("825a"),o=n("37e8"),s=n("7839"),a=n("d012"),c=n("1be4"),l=n("cc12"),u=n("f772"),d=">",h="<",p="prototype",f="script",g=u("IE_PROTO"),m=function(){},_=function(e){return h+f+d+e+h+"/"+f+d},v=function(e){e.write(_("")),e.close();var t=e.parentWindow.Object;return e=null,t},E=function(){var e,t=l("iframe"),n="java"+f+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(_("document.F=Object")),e.close(),e.F},A=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}A="undefined"!=typeof document?document.domain&&r?v(r):E():v(r);var e=s.length;while(e--)delete A[p][s[e]];return A()};a[g]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(m[p]=i(e),n=new m,m[p]=null,n[g]=e):n=A(),void 0===t?n:o.f(n,t)}},"7db0":function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").find,o=n("44d2"),s="find",a=!0;s in[]&&Array(1)[s]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(s)},"7dd0":function(e,t,n){"use strict";var r=n("23e7"),i=n("c65b"),o=n("c430"),s=n("5e77"),a=n("1626"),c=n("9ed3"),l=n("e163"),u=n("d2bb"),d=n("d44e"),h=n("9112"),p=n("6eeb"),f=n("b622"),g=n("3f8c"),m=n("ae93"),_=s.PROPER,v=s.CONFIGURABLE,E=m.IteratorPrototype,A=m.BUGGY_SAFARI_ITERATORS,y=f("iterator"),S="keys",b="values",C="entries",T=function(){return this};e.exports=function(e,t,n,s,f,m,I){c(n,t,s);var R,w,k,O=function(e){if(e===f&&M)return M;if(!A&&e in P)return P[e];switch(e){case S:return function(){return new n(this,e)};case b:return function(){return new n(this,e)};case C:return function(){return new n(this,e)}}return function(){return new n(this)}},N=t+" Iterator",L=!1,P=e.prototype,D=P[y]||P["@@iterator"]||f&&P[f],M=!A&&D||O(f),x="Array"==t&&P.entries||D;if(x&&(R=l(x.call(new e)),R!==Object.prototype&&R.next&&(o||l(R)===E||(u?u(R,E):a(R[y])||p(R,y,T)),d(R,N,!0,!0),o&&(g[N]=T))),_&&f==b&&D&&D.name!==b&&(!o&&v?h(P,"name",b):(L=!0,M=function(){return i(D,this)})),f)if(w={values:O(b),keys:m?M:O(S),entries:O(C)},I)for(k in w)(A||L||!(k in P))&&p(P,k,w[k]);else r({target:t,proto:!0,forced:A||L},w);return o&&!I||P[y]===M||p(P,y,M,{name:f}),g[t]=M,w}},"7f4d":function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t]||{};for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];void 0!==o&&(e[i]=o)}}return e}},"7f9a":function(e,t,n){var r=n("da84"),i=n("1626"),o=n("8925"),s=r.WeakMap;e.exports=i(s)&&/native code/.test(o(s))},"7fc1":function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=126)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},126:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-checkbox-group",attrs:{role:"group","aria-label":"checkbox-group"}},[e._t("default")],2)},i=[];r._withStripped=!0;var o=n(4),s=n.n(o),a={name:"ElCheckboxGroup",componentName:"ElCheckboxGroup",mixins:[s.a],inject:{elFormItem:{default:""}},props:{value:{},disabled:Boolean,min:Number,max:Number,size:String,fill:String,textColor:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[e])}}},c=a,l=n(0),u=Object(l["a"])(c,r,i,!1,null,null,null);u.options.__file="packages/checkbox/src/checkbox-group.vue";var d=u.exports;d.install=function(e){e.component(d.name,d)};t["default"]=d},4:function(e,t){e.exports=n("d010")}})},8119:function(e,t,n){n("693d"),n("dfe5"),n("301c"),n("4e71"),e.exports=n("5524").Symbol},8122:function(e,t,n){"use strict";t.__esModule=!0,t.isEmpty=t.isEqual=t.arrayEquals=t.looseEqual=t.capitalize=t.kebabCase=t.autoprefixer=t.isFirefox=t.isEdge=t.isIE=t.coerceTruthyValueToArray=t.arrayFind=t.arrayFindIndex=t.escapeRegexpString=t.valueEquals=t.generateId=t.getValueByPath=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.noop=l,t.hasOwn=u,t.toObject=h,t.getPropByPath=p,t.rafThrottle=v,t.objToArray=E;var i=n("2b0e"),o=a(i),s=n("a742");function a(e){return e&&e.__esModule?e:{default:e}}var c=Object.prototype.hasOwnProperty;function l(){}function u(e,t){return c.call(e,t)}function d(e,t){for(var n in t)e[n]=t[n];return e}function h(e){for(var t={},n=0;n<e.length;n++)e[n]&&d(t,e[n]);return t}t.getValueByPath=function(e,t){t=t||"";for(var n=t.split("."),r=e,i=null,o=0,s=n.length;o<s;o++){var a=n[o];if(!r)break;if(o===s-1){i=r[a];break}r=r[a]}return i};function p(e,t,n){var r=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var i=t.split("."),o=0,s=i.length;o<s-1;++o){if(!r&&!n)break;var a=i[o];if(!(a in r)){if(n)throw new Error("please transfer a valid prop path to form item!");break}r=r[a]}return{o:r,k:i[o],v:r?r[i[o]]:null}}t.generateId=function(){return Math.floor(1e4*Math.random())},t.valueEquals=function(e,t){if(e===t)return!0;if(!(e instanceof Array))return!1;if(!(t instanceof Array))return!1;if(e.length!==t.length)return!1;for(var n=0;n!==e.length;++n)if(e[n]!==t[n])return!1;return!0},t.escapeRegexpString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(e).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")};var f=t.arrayFindIndex=function(e,t){for(var n=0;n!==e.length;++n)if(t(e[n]))return n;return-1},g=(t.arrayFind=function(e,t){var n=f(e,t);return-1!==n?e[n]:void 0},t.coerceTruthyValueToArray=function(e){return Array.isArray(e)?e:e?[e]:[]},t.isIE=function(){return!o.default.prototype.$isServer&&!isNaN(Number(document.documentMode))},t.isEdge=function(){return!o.default.prototype.$isServer&&navigator.userAgent.indexOf("Edge")>-1},t.isFirefox=function(){return!o.default.prototype.$isServer&&!!window.navigator.userAgent.match(/firefox/i)},t.autoprefixer=function(e){if("object"!==("undefined"===typeof e?"undefined":r(e)))return e;var t=["transform","transition","animation"],n=["ms-","webkit-"];return t.forEach((function(t){var r=e[t];t&&r&&n.forEach((function(n){e[n+t]=r}))})),e},t.kebabCase=function(e){var t=/([^-])([A-Z])/g;return e.replace(t,"$1-$2").replace(t,"$1-$2").toLowerCase()},t.capitalize=function(e){return(0,s.isString)(e)?e.charAt(0).toUpperCase()+e.slice(1):e},t.looseEqual=function(e,t){var n=(0,s.isObject)(e),r=(0,s.isObject)(t);return n&&r?JSON.stringify(e)===JSON.stringify(t):!n&&!r&&String(e)===String(t)}),m=t.arrayEquals=function(e,t){if(e=e||[],t=t||[],e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!g(e[n],t[n]))return!1;return!0},_=(t.isEqual=function(e,t){return Array.isArray(e)&&Array.isArray(t)?m(e,t):g(e,t)},t.isEmpty=function(e){if(null==e)return!0;if("boolean"===typeof e)return!1;if("number"===typeof e)return!e;if(e instanceof Error)return""===e.message;switch(Object.prototype.toString.call(e)){case"[object String]":case"[object Array]":return!e.length;case"[object File]":case"[object Map]":case"[object Set]":return!e.size;case"[object Object]":return!Object.keys(e).length}return!1});function v(e){var t=!1;return function(){for(var n=this,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];t||(t=!0,window.requestAnimationFrame((function(r){e.apply(n,i),t=!1})))}}function E(e){return Array.isArray(e)?e:_(e)?[]:[e]}},"81d5":function(e,t,n){"use strict";var r=n("7b0b"),i=n("23cb"),o=n("07fa");e.exports=function(e){var t=r(this),n=o(t),s=arguments.length,a=i(s>1?arguments[1]:void 0,n),c=s>2?arguments[2]:void 0,l=void 0===c?n:i(c,n);while(l>a)t[a++]=e;return t}},"825a":function(e,t,n){var r=n("da84"),i=n("861d"),o=r.String,s=r.TypeError;e.exports=function(e){if(i(e))return e;throw s(o(e)+" is not an object")}},"82f8":function(e,t,n){"use strict";var r=n("ebb5"),i=n("4d64").includes,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},"83ab":function(e,t,n){var r=n("d039");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"83b9":function(e,t,n){"use strict";var r=n("d925"),i=n("e683");e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},8418:function(e,t,n){"use strict";var r=n("a04b"),i=n("9bf2"),o=n("5c6c");e.exports=function(e,t,n){var s=r(t);s in e?i.f(e,s,o(0,n)):e[s]=n}},"845f":function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=87)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},87:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-button-group"},[e._t("default")],2)},i=[];r._withStripped=!0;var o={name:"ElButtonGroup"},s=o,a=n(0),c=Object(a["a"])(s,r,i,!1,null,null,null);c.options.__file="packages/button/src/button-group.vue";var l=c.exports;l.install=function(e){e.component(l.name,l)};t["default"]=l}})},"848b":function(e,t,n){"use strict";var r=n("5cce").version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};function s(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");var r=Object.keys(e),i=r.length;while(i-- >0){var o=r[i],s=t[o];if(s){var a=e[o],c=void 0===a||s(a,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+o)}}i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:s,validators:i}},"84c3":function(e,t,n){var r=n("74e8");r("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},"85e7":function(e,t,n){var r=n("1a14"),i=n("77e9"),o=n("9876");e.exports=n("0bad")?Object.defineProperties:function(e,t){i(e);var n,s=o(t),a=s.length,c=0;while(a>c)r.f(e,n=s[c++],t[n]);return e}},"861d":function(e,t,n){var r=n("1626");e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},8925:function(e,t,n){var r=n("e330"),i=n("1626"),o=n("c6cd"),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},"8a0d":function(e,t){e.exports={}},"8a59":function(e,t,n){var r=n("74e8");r("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"8aa7":function(e,t,n){var r=n("da84"),i=n("d039"),o=n("1c7e"),s=n("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,a=r.ArrayBuffer,c=r.Int8Array;e.exports=!s||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new a(2),1,void 0).length}))},"8b09":function(e,t,n){var r=n("74e8");r("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},"8b1a":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},"8bbc":function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=130)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},130:function(e,t,n){"use strict";n.r(t);var r,i,o={name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String,effect:{type:String,default:"light",validator:function(e){return-1!==["dark","light","plain"].indexOf(e)}}},methods:{handleClose:function(e){e.stopPropagation(),this.$emit("close",e)},handleClick:function(e){this.$emit("click",e)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(e){var t=this.type,n=this.tagSize,r=this.hit,i=this.effect,o=["el-tag",t?"el-tag--"+t:"",n?"el-tag--"+n:"",i?"el-tag--"+i:"",r&&"is-hit"],s=e("span",{class:o,style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&e("i",{class:"el-tag__close el-icon-close",on:{click:this.handleClose}})]);return this.disableTransitions?s:e("transition",{attrs:{name:"el-zoom-in-center"}},[s])}},s=o,a=n(0),c=Object(a["a"])(s,r,i,!1,null,null,null);c.options.__file="packages/tag/src/tag.vue";var l=c.exports;l.install=function(e){e.component(l.name,l)};t["default"]=l}})},"8c4f":function(e,t,n){"use strict";
/*!
  * vue-router v3.5.3
  * (c) 2021 Evan You
  * @license MIT
  */function r(e,t){for(var n in t)e[n]=t[n];return e}var i=/[!'()*]/g,o=function(e){return"%"+e.charCodeAt(0).toString(16)},s=/%2C/g,a=function(e){return encodeURIComponent(e).replace(i,o).replace(s,",")};function c(e){try{return decodeURIComponent(e)}catch(t){0}return e}function l(e,t,n){void 0===t&&(t={});var r,i=n||d;try{r=i(e||"")}catch(a){r={}}for(var o in t){var s=t[o];r[o]=Array.isArray(s)?s.map(u):u(s)}return r}var u=function(e){return null==e||"object"===typeof e?e:String(e)};function d(e){var t={};return e=e.trim().replace(/^(\?|#|&)/,""),e?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),r=c(n.shift()),i=n.length>0?c(n.join("=")):null;void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]})),t):t}function h(e){var t=e?Object.keys(e).map((function(t){var n=e[t];if(void 0===n)return"";if(null===n)return a(t);if(Array.isArray(n)){var r=[];return n.forEach((function(e){void 0!==e&&(null===e?r.push(a(t)):r.push(a(t)+"="+a(e)))})),r.join("&")}return a(t)+"="+a(n)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var p=/\/?$/;function f(e,t,n,r){var i=r&&r.options.stringifyQuery,o=t.query||{};try{o=g(o)}catch(a){}var s={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",query:o,params:t.params||{},fullPath:v(t,i),matched:e?_(e):[]};return n&&(s.redirectedFrom=v(n,i)),Object.freeze(s)}function g(e){if(Array.isArray(e))return e.map(g);if(e&&"object"===typeof e){var t={};for(var n in e)t[n]=g(e[n]);return t}return e}var m=f(null,{path:"/"});function _(e){var t=[];while(e)t.unshift(e),e=e.parent;return t}function v(e,t){var n=e.path,r=e.query;void 0===r&&(r={});var i=e.hash;void 0===i&&(i="");var o=t||h;return(n||"/")+o(r)+i}function E(e,t,n){return t===m?e===t:!!t&&(e.path&&t.path?e.path.replace(p,"")===t.path.replace(p,"")&&(n||e.hash===t.hash&&A(e.query,t.query)):!(!e.name||!t.name)&&(e.name===t.name&&(n||e.hash===t.hash&&A(e.query,t.query)&&A(e.params,t.params))))}function A(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var n=Object.keys(e).sort(),r=Object.keys(t).sort();return n.length===r.length&&n.every((function(n,i){var o=e[n],s=r[i];if(s!==n)return!1;var a=t[n];return null==o||null==a?o===a:"object"===typeof o&&"object"===typeof a?A(o,a):String(o)===String(a)}))}function y(e,t){return 0===e.path.replace(p,"/").indexOf(t.path.replace(p,"/"))&&(!t.hash||e.hash===t.hash)&&S(e.query,t.query)}function S(e,t){for(var n in t)if(!(n in e))return!1;return!0}function b(e){for(var t=0;t<e.matched.length;t++){var n=e.matched[t];for(var r in n.instances){var i=n.instances[r],o=n.enteredCbs[r];if(i&&o){delete n.enteredCbs[r];for(var s=0;s<o.length;s++)i._isBeingDestroyed||o[s](i)}}}}var C={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var n=t.props,i=t.children,o=t.parent,s=t.data;s.routerView=!0;var a=o.$createElement,c=n.name,l=o.$route,u=o._routerViewCache||(o._routerViewCache={}),d=0,h=!1;while(o&&o._routerRoot!==o){var p=o.$vnode?o.$vnode.data:{};p.routerView&&d++,p.keepAlive&&o._directInactive&&o._inactive&&(h=!0),o=o.$parent}if(s.routerViewDepth=d,h){var f=u[c],g=f&&f.component;return g?(f.configProps&&T(g,s,f.route,f.configProps),a(g,s,i)):a()}var m=l.matched[d],_=m&&m.components[c];if(!m||!_)return u[c]=null,a();u[c]={component:_},s.registerRouteInstance=function(e,t){var n=m.instances[c];(t&&n!==e||!t&&n===e)&&(m.instances[c]=t)},(s.hook||(s.hook={})).prepatch=function(e,t){m.instances[c]=t.componentInstance},s.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==m.instances[c]&&(m.instances[c]=e.componentInstance),b(l)};var v=m.props&&m.props[c];return v&&(r(u[c],{route:l,configProps:v}),T(_,s,l,v)),a(_,s,i)}};function T(e,t,n,i){var o=t.props=I(n,i);if(o){o=t.props=r({},o);var s=t.attrs=t.attrs||{};for(var a in o)e.props&&a in e.props||(s[a]=o[a],delete o[a])}}function I(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0;default:0}}function R(e,t,n){var r=e.charAt(0);if("/"===r)return e;if("?"===r||"#"===r)return t+e;var i=t.split("/");n&&i[i.length-1]||i.pop();for(var o=e.replace(/^\//,"").split("/"),s=0;s<o.length;s++){var a=o[s];".."===a?i.pop():"."!==a&&i.push(a)}return""!==i[0]&&i.unshift(""),i.join("/")}function w(e){var t="",n="",r=e.indexOf("#");r>=0&&(t=e.slice(r),e=e.slice(0,r));var i=e.indexOf("?");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{path:e,query:n,hash:t}}function k(e){return e.replace(/\/+/g,"/")}var O=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},N=K,L=B,P=U,D=j,M=$,x=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function B(e,t){var n,r=[],i=0,o=0,s="",a=t&&t.delimiter||"/";while(null!=(n=x.exec(e))){var c=n[0],l=n[1],u=n.index;if(s+=e.slice(o,u),o=u+c.length,l)s+=l[1];else{var d=e[o],h=n[2],p=n[3],f=n[4],g=n[5],m=n[6],_=n[7];s&&(r.push(s),s="");var v=null!=h&&null!=d&&d!==h,E="+"===m||"*"===m,A="?"===m||"*"===m,y=n[2]||a,S=f||g;r.push({name:p||i++,prefix:h||"",delimiter:y,optional:A,repeat:E,partial:v,asterisk:!!_,pattern:S?H(S):_?".*":"[^"+G(y)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&r.push(s),r}function U(e,t){return j(B(e,t),t)}function F(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function V(e){return encodeURI(e).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function j(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"===typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",W(t)));return function(t,r){for(var i="",o=t||{},s=r||{},a=s.pretty?F:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var u,d=o[l.name];if(null==d){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(O(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<d.length;h++){if(u=a(d[h]),!n[c].test(u))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(u)+"`");i+=(0===h?l.prefix:l.delimiter)+u}}else{if(u=l.asterisk?V(d):a(d),!n[c].test(u))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+u+'"');i+=l.prefix+u}}else i+=l}return i}}function G(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function H(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Q(e,t){return e.keys=t,e}function W(e){return e&&e.sensitive?"":"i"}function q(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Q(e,t)}function z(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(K(e[i],t,n).source);var o=new RegExp("(?:"+r.join("|")+")",W(n));return Q(o,t)}function Z(e,t,n){return $(B(e,n),t,n)}function $(e,t,n){O(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,o="",s=0;s<e.length;s++){var a=e[s];if("string"===typeof a)o+=G(a);else{var c=G(a.prefix),l="(?:"+a.pattern+")";t.push(a),a.repeat&&(l+="(?:"+c+l+")*"),l=a.optional?a.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")",o+=l}}var u=G(n.delimiter||"/"),d=o.slice(-u.length)===u;return r||(o=(d?o.slice(0,-u.length):o)+"(?:"+u+"(?=$))?"),o+=i?"$":r&&d?"":"(?="+u+"|$)",Q(new RegExp("^"+o,W(n)),t)}function K(e,t,n){return O(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?q(e,t):O(e)?z(e,t,n):Z(e,t,n)}N.parse=L,N.compile=P,N.tokensToFunction=D,N.tokensToRegExp=M;var Y=Object.create(null);function J(e,t,n){t=t||{};try{var r=Y[e]||(Y[e]=N.compile(e));return"string"===typeof t.pathMatch&&(t[0]=t.pathMatch),r(t,{pretty:!0})}catch(i){return""}finally{delete t[0]}}function X(e,t,n,i){var o="string"===typeof e?{path:e}:e;if(o._normalized)return o;if(o.name){o=r({},e);var s=o.params;return s&&"object"===typeof s&&(o.params=r({},s)),o}if(!o.path&&o.params&&t){o=r({},o),o._normalized=!0;var a=r(r({},t.params),o.params);if(t.name)o.name=t.name,o.params=a;else if(t.matched.length){var c=t.matched[t.matched.length-1].path;o.path=J(c,a,"path "+t.path)}else 0;return o}var u=w(o.path||""),d=t&&t.path||"/",h=u.path?R(u.path,d,n||o.append):d,p=l(u.query,o.query,i&&i.options.parseQuery),f=o.hash||u.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:h,query:p,hash:f}}var ee,te=[String,Object],ne=[String,Array],re=function(){},ie={name:"RouterLink",props:{to:{type:te,required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:ne,default:"click"}},render:function(e){var t=this,n=this.$router,i=this.$route,o=n.resolve(this.to,i,this.append),s=o.location,a=o.route,c=o.href,l={},u=n.options.linkActiveClass,d=n.options.linkExactActiveClass,h=null==u?"router-link-active":u,p=null==d?"router-link-exact-active":d,g=null==this.activeClass?h:this.activeClass,m=null==this.exactActiveClass?p:this.exactActiveClass,_=a.redirectedFrom?f(null,X(a.redirectedFrom),null,n):a;l[m]=E(i,_,this.exactPath),l[g]=this.exact||this.exactPath?l[m]:y(i,_);var v=l[m]?this.ariaCurrentValue:null,A=function(e){oe(e)&&(t.replace?n.replace(s,re):n.push(s,re))},S={click:oe};Array.isArray(this.event)?this.event.forEach((function(e){S[e]=A})):S[this.event]=A;var b={class:l},C=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:c,route:a,navigate:A,isActive:l[g],isExactActive:l[m]});if(C){if(1===C.length)return C[0];if(C.length>1||!C.length)return 0===C.length?e():e("span",{},C)}if("a"===this.tag)b.on=S,b.attrs={href:c,"aria-current":v};else{var T=se(this.$slots.default);if(T){T.isStatic=!1;var I=T.data=r({},T.data);for(var R in I.on=I.on||{},I.on){var w=I.on[R];R in S&&(I.on[R]=Array.isArray(w)?w:[w])}for(var k in S)k in I.on?I.on[k].push(S[k]):I.on[k]=A;var O=T.data.attrs=r({},T.data.attrs);O.href=c,O["aria-current"]=v}else b.on=S}return e(this.tag,b,this.$slots.default)}};function oe(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function se(e){if(e)for(var t,n=0;n<e.length;n++){if(t=e[n],"a"===t.tag)return t;if(t.children&&(t=se(t.children)))return t}}function ae(e){if(!ae.installed||ee!==e){ae.installed=!0,ee=e;var t=function(e){return void 0!==e},n=function(e,n){var r=e.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(e,n)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",C),e.component("RouterLink",ie);var r=e.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}}var ce="undefined"!==typeof window;function le(e,t,n,r,i){var o=t||[],s=n||Object.create(null),a=r||Object.create(null);e.forEach((function(e){ue(o,s,a,e,i)}));for(var c=0,l=o.length;c<l;c++)"*"===o[c]&&(o.push(o.splice(c,1)[0]),l--,c--);return{pathList:o,pathMap:s,nameMap:a}}function ue(e,t,n,r,i,o){var s=r.path,a=r.name;var c=r.pathToRegexpOptions||{},l=he(s,i,c.strict);"boolean"===typeof r.caseSensitive&&(c.sensitive=r.caseSensitive);var u={path:l,regex:de(l,c),components:r.components||{default:r.component},alias:r.alias?"string"===typeof r.alias?[r.alias]:r.alias:[],instances:{},enteredCbs:{},name:a,parent:i,matchAs:o,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};if(r.children&&r.children.forEach((function(r){var i=o?k(o+"/"+r.path):void 0;ue(e,t,n,r,u,i)})),t[u.path]||(e.push(u.path),t[u.path]=u),void 0!==r.alias)for(var d=Array.isArray(r.alias)?r.alias:[r.alias],h=0;h<d.length;++h){var p=d[h];0;var f={path:p,children:r.children};ue(e,t,n,f,i,u.path||"/")}a&&(n[a]||(n[a]=u))}function de(e,t){var n=N(e,[],t);return n}function he(e,t,n){return n||(e=e.replace(/\/$/,"")),"/"===e[0]||null==t?e:k(t.path+"/"+e)}function pe(e,t){var n=le(e),r=n.pathList,i=n.pathMap,o=n.nameMap;function s(e){le(e,r,i,o)}function a(e,t){var n="object"!==typeof e?o[e]:void 0;le([t||e],r,i,o,n),n&&n.alias.length&&le(n.alias.map((function(e){return{path:e,children:[t]}})),r,i,o,n)}function c(){return r.map((function(e){return i[e]}))}function l(e,n,s){var a=X(e,n,!1,t),c=a.name;if(c){var l=o[c];if(!l)return h(null,a);var u=l.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!==typeof a.params&&(a.params={}),n&&"object"===typeof n.params)for(var d in n.params)!(d in a.params)&&u.indexOf(d)>-1&&(a.params[d]=n.params[d]);return a.path=J(l.path,a.params,'named route "'+c+'"'),h(l,a,s)}if(a.path){a.params={};for(var p=0;p<r.length;p++){var f=r[p],g=i[f];if(fe(g.regex,a.path,a.params))return h(g,a,s)}}return h(null,a)}function u(e,n){var r=e.redirect,i="function"===typeof r?r(f(e,n,null,t)):r;if("string"===typeof i&&(i={path:i}),!i||"object"!==typeof i)return h(null,n);var s=i,a=s.name,c=s.path,u=n.query,d=n.hash,p=n.params;if(u=s.hasOwnProperty("query")?s.query:u,d=s.hasOwnProperty("hash")?s.hash:d,p=s.hasOwnProperty("params")?s.params:p,a){o[a];return l({_normalized:!0,name:a,query:u,hash:d,params:p},void 0,n)}if(c){var g=ge(c,e),m=J(g,p,'redirect route with path "'+g+'"');return l({_normalized:!0,path:m,query:u,hash:d},void 0,n)}return h(null,n)}function d(e,t,n){var r=J(n,t.params,'aliased route with path "'+n+'"'),i=l({_normalized:!0,path:r});if(i){var o=i.matched,s=o[o.length-1];return t.params=i.params,h(s,t)}return h(null,t)}function h(e,n,r){return e&&e.redirect?u(e,r||n):e&&e.matchAs?d(e,n,e.matchAs):f(e,n,r,t)}return{match:l,addRoute:a,getRoutes:c,addRoutes:s}}function fe(e,t,n){var r=t.match(e);if(!r)return!1;if(!n)return!0;for(var i=1,o=r.length;i<o;++i){var s=e.keys[i-1];s&&(n[s.name||"pathMatch"]="string"===typeof r[i]?c(r[i]):r[i])}return!0}function ge(e,t){return R(e,t.parent?t.parent.path:"/",!0)}var me=ce&&window.performance&&window.performance.now?window.performance:Date;function _e(){return me.now().toFixed(3)}var ve=_e();function Ee(){return ve}function Ae(e){return ve=e}var ye=Object.create(null);function Se(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,t=window.location.href.replace(e,""),n=r({},window.history.state);return n.key=Ee(),window.history.replaceState(n,"",t),window.addEventListener("popstate",Te),function(){window.removeEventListener("popstate",Te)}}function be(e,t,n,r){if(e.app){var i=e.options.scrollBehavior;i&&e.app.$nextTick((function(){var o=Ie(),s=i.call(e,t,n,r?o:null);s&&("function"===typeof s.then?s.then((function(e){Pe(e,o)})).catch((function(e){0})):Pe(s,o))}))}}function Ce(){var e=Ee();e&&(ye[e]={x:window.pageXOffset,y:window.pageYOffset})}function Te(e){Ce(),e.state&&e.state.key&&Ae(e.state.key)}function Ie(){var e=Ee();if(e)return ye[e]}function Re(e,t){var n=document.documentElement,r=n.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:i.left-r.left-t.x,y:i.top-r.top-t.y}}function we(e){return Ne(e.x)||Ne(e.y)}function ke(e){return{x:Ne(e.x)?e.x:window.pageXOffset,y:Ne(e.y)?e.y:window.pageYOffset}}function Oe(e){return{x:Ne(e.x)?e.x:0,y:Ne(e.y)?e.y:0}}function Ne(e){return"number"===typeof e}var Le=/^#\d/;function Pe(e,t){var n="object"===typeof e;if(n&&"string"===typeof e.selector){var r=Le.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(r){var i=e.offset&&"object"===typeof e.offset?e.offset:{};i=Oe(i),t=Re(r,i)}else we(e)&&(t=ke(e))}else n&&we(e)&&(t=ke(e));t&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:t.x,top:t.y,behavior:e.behavior}):window.scrollTo(t.x,t.y))}var De=ce&&function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"function"===typeof window.history.pushState)}();function Me(e,t){Ce();var n=window.history;try{if(t){var i=r({},n.state);i.key=Ee(),n.replaceState(i,"",e)}else n.pushState({key:Ae(_e())},"",e)}catch(o){window.location[t?"replace":"assign"](e)}}function xe(e){Me(e,!0)}function Be(e,t,n){var r=function(i){i>=e.length?n():e[i]?t(e[i],(function(){r(i+1)})):r(i+1)};r(0)}var Ue={redirected:2,aborted:4,cancelled:8,duplicated:16};function Fe(e,t){return He(e,t,Ue.redirected,'Redirected when going from "'+e.fullPath+'" to "'+We(t)+'" via a navigation guard.')}function Ve(e,t){var n=He(e,t,Ue.duplicated,'Avoided redundant navigation to current location: "'+e.fullPath+'".');return n.name="NavigationDuplicated",n}function je(e,t){return He(e,t,Ue.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+t.fullPath+'" with a new navigation.')}function Ge(e,t){return He(e,t,Ue.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+t.fullPath+'" via a navigation guard.')}function He(e,t,n,r){var i=new Error(r);return i._isRouter=!0,i.from=e,i.to=t,i.type=n,i}var Qe=["params","query","hash"];function We(e){if("string"===typeof e)return e;if("path"in e)return e.path;var t={};return Qe.forEach((function(n){n in e&&(t[n]=e[n])})),JSON.stringify(t,null,2)}function qe(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function ze(e,t){return qe(e)&&e._isRouter&&(null==t||e.type===t)}function Ze(e){return function(t,n,r){var i=!1,o=0,s=null;$e(e,(function(e,t,n,a){if("function"===typeof e&&void 0===e.cid){i=!0,o++;var c,l=Xe((function(t){Je(t)&&(t=t.default),e.resolved="function"===typeof t?t:ee.extend(t),n.components[a]=t,o--,o<=0&&r()})),u=Xe((function(e){var t="Failed to resolve async component "+a+": "+e;s||(s=qe(e)?e:new Error(t),r(s))}));try{c=e(l,u)}catch(h){u(h)}if(c)if("function"===typeof c.then)c.then(l,u);else{var d=c.component;d&&"function"===typeof d.then&&d.then(l,u)}}})),i||r()}}function $e(e,t){return Ke(e.map((function(e){return Object.keys(e.components).map((function(n){return t(e.components[n],e.instances[n],e,n)}))})))}function Ke(e){return Array.prototype.concat.apply([],e)}var Ye="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function Je(e){return e.__esModule||Ye&&"Module"===e[Symbol.toStringTag]}function Xe(e){var t=!1;return function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];if(!t)return t=!0,e.apply(this,n)}}var et=function(e,t){this.router=e,this.base=tt(t),this.current=m,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function tt(e){if(!e)if(ce){var t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}function nt(e,t){var n,r=Math.max(e.length,t.length);for(n=0;n<r;n++)if(e[n]!==t[n])break;return{updated:t.slice(0,n),activated:t.slice(n),deactivated:e.slice(n)}}function rt(e,t,n,r){var i=$e(e,(function(e,r,i,o){var s=it(e,t);if(s)return Array.isArray(s)?s.map((function(e){return n(e,r,i,o)})):n(s,r,i,o)}));return Ke(r?i.reverse():i)}function it(e,t){return"function"!==typeof e&&(e=ee.extend(e)),e.options[t]}function ot(e){return rt(e,"beforeRouteLeave",at,!0)}function st(e){return rt(e,"beforeRouteUpdate",at)}function at(e,t){if(t)return function(){return e.apply(t,arguments)}}function ct(e){return rt(e,"beforeRouteEnter",(function(e,t,n,r){return lt(e,n,r)}))}function lt(e,t,n){return function(r,i,o){return e(r,i,(function(e){"function"===typeof e&&(t.enteredCbs[n]||(t.enteredCbs[n]=[]),t.enteredCbs[n].push(e)),o(e)}))}}et.prototype.listen=function(e){this.cb=e},et.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},et.prototype.onError=function(e){this.errorCbs.push(e)},et.prototype.transitionTo=function(e,t,n){var r,i=this;try{r=this.router.match(e,this.current)}catch(s){throw this.errorCbs.forEach((function(e){e(s)})),s}var o=this.current;this.confirmTransition(r,(function(){i.updateRoute(r),t&&t(r),i.ensureURL(),i.router.afterHooks.forEach((function(e){e&&e(r,o)})),i.ready||(i.ready=!0,i.readyCbs.forEach((function(e){e(r)})))}),(function(e){n&&n(e),e&&!i.ready&&(ze(e,Ue.redirected)&&o===m||(i.ready=!0,i.readyErrorCbs.forEach((function(t){t(e)}))))}))},et.prototype.confirmTransition=function(e,t,n){var r=this,i=this.current;this.pending=e;var o=function(e){!ze(e)&&qe(e)&&(r.errorCbs.length?r.errorCbs.forEach((function(t){t(e)})):console.error(e)),n&&n(e)},s=e.matched.length-1,a=i.matched.length-1;if(E(e,i)&&s===a&&e.matched[s]===i.matched[a])return this.ensureURL(),e.hash&&be(this.router,i,e,!1),o(Ve(i,e));var c=nt(this.current.matched,e.matched),l=c.updated,u=c.deactivated,d=c.activated,h=[].concat(ot(u),this.router.beforeHooks,st(l),d.map((function(e){return e.beforeEnter})),Ze(d)),p=function(t,n){if(r.pending!==e)return o(je(i,e));try{t(e,i,(function(t){!1===t?(r.ensureURL(!0),o(Ge(i,e))):qe(t)?(r.ensureURL(!0),o(t)):"string"===typeof t||"object"===typeof t&&("string"===typeof t.path||"string"===typeof t.name)?(o(Fe(i,e)),"object"===typeof t&&t.replace?r.replace(t):r.push(t)):n(t)}))}catch(s){o(s)}};Be(h,p,(function(){var n=ct(d),s=n.concat(r.router.resolveHooks);Be(s,p,(function(){if(r.pending!==e)return o(je(i,e));r.pending=null,t(e),r.router.app&&r.router.app.$nextTick((function(){b(e)}))}))}))},et.prototype.updateRoute=function(e){this.current=e,this.cb&&this.cb(e)},et.prototype.setupListeners=function(){},et.prototype.teardown=function(){this.listeners.forEach((function(e){e()})),this.listeners=[],this.current=m,this.pending=null};var ut=function(e){function t(t,n){e.call(this,t,n),this._startLocation=dt(this.base)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,n=t.options.scrollBehavior,r=De&&n;r&&this.listeners.push(Se());var i=function(){var n=e.current,i=dt(e.base);e.current===m&&i===e._startLocation||e.transitionTo(i,(function(e){r&&be(t,e,n,!0)}))};window.addEventListener("popstate",i),this.listeners.push((function(){window.removeEventListener("popstate",i)}))}},t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){Me(k(r.base+e.fullPath)),be(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){xe(k(r.base+e.fullPath)),be(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.ensureURL=function(e){if(dt(this.base)!==this.current.fullPath){var t=k(this.base+this.current.fullPath);e?Me(t):xe(t)}},t.prototype.getCurrentLocation=function(){return dt(this.base)},t}(et);function dt(e){var t=window.location.pathname,n=t.toLowerCase(),r=e.toLowerCase();return!e||n!==r&&0!==n.indexOf(k(r+"/"))||(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var ht=function(e){function t(t,n,r){e.call(this,t,n),r&&pt(this.base)||ft()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,n=t.options.scrollBehavior,r=De&&n;r&&this.listeners.push(Se());var i=function(){var t=e.current;ft()&&e.transitionTo(gt(),(function(n){r&&be(e.router,n,t,!0),De||vt(n.fullPath)}))},o=De?"popstate":"hashchange";window.addEventListener(o,i),this.listeners.push((function(){window.removeEventListener(o,i)}))}},t.prototype.push=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){_t(e.fullPath),be(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){vt(e.fullPath),be(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;gt()!==t&&(e?_t(t):vt(t))},t.prototype.getCurrentLocation=function(){return gt()},t}(et);function pt(e){var t=dt(e);if(!/^\/#/.test(t))return window.location.replace(k(e+"/#"+t)),!0}function ft(){var e=gt();return"/"===e.charAt(0)||(vt("/"+e),!1)}function gt(){var e=window.location.href,t=e.indexOf("#");return t<0?"":(e=e.slice(t+1),e)}function mt(e){var t=window.location.href,n=t.indexOf("#"),r=n>=0?t.slice(0,n):t;return r+"#"+e}function _t(e){De?Me(mt(e)):window.location.hash=e}function vt(e){De?xe(mt(e)):window.location.replace(mt(e))}var Et=function(e){function t(t,n){e.call(this,t,n),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,n){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index+1).concat(e),r.index++,t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index).concat(e),t&&t(e)}),n)},t.prototype.go=function(e){var t=this,n=this.index+e;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,(function(){var e=t.current;t.index=n,t.updateRoute(r),t.router.afterHooks.forEach((function(t){t&&t(r,e)}))}),(function(e){ze(e,Ue.duplicated)&&(t.index=n)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(et),At=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=pe(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!De&&!1!==e.fallback,this.fallback&&(t="hash"),ce||(t="abstract"),this.mode=t,t){case"history":this.history=new ut(this,e.base);break;case"hash":this.history=new ht(this,e.base,this.fallback);break;case"abstract":this.history=new Et(this,e.base);break;default:0}},yt={currentRoute:{configurable:!0}};function St(e,t){return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function bt(e,t,n){var r="hash"===n?"#"+t:t;return e?k(e+"/"+r):r}At.prototype.match=function(e,t,n){return this.matcher.match(e,t,n)},yt.currentRoute.get=function(){return this.history&&this.history.current},At.prototype.init=function(e){var t=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var n=t.apps.indexOf(e);n>-1&&t.apps.splice(n,1),t.app===e&&(t.app=t.apps[0]||null),t.app||t.history.teardown()})),!this.app){this.app=e;var n=this.history;if(n instanceof ut||n instanceof ht){var r=function(e){var r=n.current,i=t.options.scrollBehavior,o=De&&i;o&&"fullPath"in e&&be(t,e,r,!1)},i=function(e){n.setupListeners(),r(e)};n.transitionTo(n.getCurrentLocation(),i,i)}n.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},At.prototype.beforeEach=function(e){return St(this.beforeHooks,e)},At.prototype.beforeResolve=function(e){return St(this.resolveHooks,e)},At.prototype.afterEach=function(e){return St(this.afterHooks,e)},At.prototype.onReady=function(e,t){this.history.onReady(e,t)},At.prototype.onError=function(e){this.history.onError(e)},At.prototype.push=function(e,t,n){var r=this;if(!t&&!n&&"undefined"!==typeof Promise)return new Promise((function(t,n){r.history.push(e,t,n)}));this.history.push(e,t,n)},At.prototype.replace=function(e,t,n){var r=this;if(!t&&!n&&"undefined"!==typeof Promise)return new Promise((function(t,n){r.history.replace(e,t,n)}));this.history.replace(e,t,n)},At.prototype.go=function(e){this.history.go(e)},At.prototype.back=function(){this.go(-1)},At.prototype.forward=function(){this.go(1)},At.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},At.prototype.resolve=function(e,t,n){t=t||this.history.current;var r=X(e,t,n,this),i=this.match(r,t),o=i.redirectedFrom||i.fullPath,s=this.history.base,a=bt(s,o,this.mode);return{location:r,route:i,href:a,normalizedTo:r,resolved:i}},At.prototype.getRoutes=function(){return this.matcher.getRoutes()},At.prototype.addRoute=function(e,t){this.matcher.addRoute(e,t),this.history.current!==m&&this.history.transitionTo(this.history.getCurrentLocation())},At.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==m&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(At.prototype,yt),At.install=ae,At.version="3.5.3",At.isNavigationFailure=ze,At.NavigationFailureType=Ue,At.START_LOCATION=m,ce&&window.Vue&&window.Vue.use(At),t["a"]=At},"8df4":function(e,t,n){"use strict";var r=n("7a77");function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e,t=new i((function(t){e=t}));return{token:t,cancel:e}},e.exports=i},"8eb7":function(e,t){var n,r,i,o,s,a,c,l,u,d,h,p,f,g,m,_=!1;function v(){if(!_){_=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),v=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(p=/\b(iPhone|iP[ao]d)/.exec(e),f=/\b(iP[ao]d)/.exec(e),d=/Android/i.exec(e),g=/FBAN\/\w+;/i.exec(e),m=/Mobile/i.exec(e),h=!!/Win64/.exec(e),t){n=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,n&&document&&document.documentMode&&(n=document.documentMode);var E=/(?:Trident\/(\d+.\d+))/.exec(e);a=E?parseFloat(E[1])+4:n,r=t[2]?parseFloat(t[2]):NaN,i=t[3]?parseFloat(t[3]):NaN,o=t[4]?parseFloat(t[4]):NaN,o?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),s=t&&t[1]?parseFloat(t[1]):NaN):s=NaN}else n=r=i=s=o=NaN;if(v){if(v[1]){var A=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);c=!A||parseFloat(A[1].replace("_","."))}else c=!1;l=!!v[2],u=!!v[3]}else c=l=u=!1}}var E={ie:function(){return v()||n},ieCompatibilityMode:function(){return v()||a>n},ie64:function(){return E.ie()&&h},firefox:function(){return v()||r},opera:function(){return v()||i},webkit:function(){return v()||o},safari:function(){return E.webkit()},chrome:function(){return v()||s},windows:function(){return v()||l},osx:function(){return v()||c},linux:function(){return v()||u},iphone:function(){return v()||p},mobile:function(){return v()||p||f||d||m},nativeApp:function(){return v()||g},android:function(){return v()||d},ipad:function(){return v()||f}};e.exports=E},"907a":function(e,t,n){"use strict";var r=n("ebb5"),i=n("07fa"),o=n("5926"),s=r.aTypedArray,a=r.exportTypedArrayMethod;a("at",(function(e){var t=s(this),n=i(t),r=o(e),a=r>=0?r:n+r;return a<0||a>=n?void 0:t[a]}))},"90e3":function(e,t,n){var r=n("e330"),i=0,o=Math.random(),s=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+o,36)}},9112:function(e,t,n){var r=n("83ab"),i=n("9bf2"),o=n("5c6c");e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9141:function(e,t,n){var r=n("ef08").document;e.exports=r&&r.documentElement},9263:function(e,t,n){"use strict";var r=n("c65b"),i=n("e330"),o=n("577e"),s=n("ad6d"),a=n("9f7f"),c=n("5692"),l=n("7c73"),u=n("69f3").get,d=n("fce3"),h=n("107c"),p=c("native-string-replace",String.prototype.replace),f=RegExp.prototype.exec,g=f,m=i("".charAt),_=i("".indexOf),v=i("".replace),E=i("".slice),A=function(){var e=/a/,t=/b*/g;return r(f,e,"a"),r(f,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),y=a.BROKEN_CARET,S=void 0!==/()??/.exec("")[1],b=A||S||y||d||h;b&&(g=function(e){var t,n,i,a,c,d,h,b=this,C=u(b),T=o(e),I=C.raw;if(I)return I.lastIndex=b.lastIndex,t=r(g,I,T),b.lastIndex=I.lastIndex,t;var R=C.groups,w=y&&b.sticky,k=r(s,b),O=b.source,N=0,L=T;if(w&&(k=v(k,"y",""),-1===_(k,"g")&&(k+="g"),L=E(T,b.lastIndex),b.lastIndex>0&&(!b.multiline||b.multiline&&"\n"!==m(T,b.lastIndex-1))&&(O="(?: "+O+")",L=" "+L,N++),n=new RegExp("^(?:"+O+")",k)),S&&(n=new RegExp("^"+O+"$(?!\\s)",k)),A&&(i=b.lastIndex),a=r(f,w?n:b,L),w?a?(a.input=E(a.input,N),a[0]=E(a[0],N),a.index=b.lastIndex,b.lastIndex+=a[0].length):b.lastIndex=0:A&&a&&(b.lastIndex=b.global?a.index+a[0].length:i),S&&a&&a.length>1&&r(p,a[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)})),a&&R)for(a.groups=d=l(null),c=0;c<R.length;c++)h=R[c],d[h[0]]=a[h[1]];return a}),e.exports=g},"92f0":function(e,t,n){var r=n("1a14").f,i=n("9c0e"),o=n("cc15")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},"92fa":function(e,t){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function r(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}}e.exports=function(e){return e.reduce((function(e,t){var i,o,s,a,c;for(s in t)if(i=e[s],o=t[s],i&&n.test(s))if("class"===s&&("string"===typeof i&&(c=i,e[s]=i={},i[c]=!0),"string"===typeof o&&(c=o,t[s]=o={},o[c]=!0)),"on"===s||"nativeOn"===s||"hook"===s)for(a in o)i[a]=r(i[a],o[a]);else if(Array.isArray(i))e[s]=i.concat(o);else if(Array.isArray(o))e[s]=[i].concat(o);else for(a in o)i[a]=o[a];else e[s]=t[s];return e}),{})}},"94ca":function(e,t,n){var r=n("d039"),i=n("1626"),o=/#|\.prototype\./,s=function(e,t){var n=c[a(e)];return n==u||n!=l&&(i(t)?r(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},9619:function(e,t,n){var r=n("597f"),i=n("0e15");e.exports={throttle:r,debounce:i}},"96cf":function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(L){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),s=new k(r||[]);return o._invoke=T(e,n,s),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",f="completed",g={};function m(){}function _(){}function v(){}var E={};c(E,o,(function(){return this}));var A=Object.getPrototypeOf,y=A&&A(A(O([])));y&&y!==n&&r.call(y,o)&&(E=y);var S=v.prototype=m.prototype=Object.create(E);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,s,a){var c=u(e[i],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"===typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;function o(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}this._invoke=o}function T(e,t,n){var r=d;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===i)throw o;return N()}n.method=i,n.arg=o;while(1){var s=n.delegate;if(s){var a=I(s,n);if(a){if(a===g)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=u(e,t,n);if("normal"===c.type){if(r=n.done?f:h,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=f,n.method="throw",n.arg=c.arg)}}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=u(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function O(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function n(){while(++i<e.length)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:N}}function N(){return{value:t,done:!0}}return _.prototype=v,c(S,"constructor",v),c(v,"constructor",_),_.displayName=c(v,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,a,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},b(C.prototype),c(C.prototype,s,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new C(l(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(S),c(S,a,"Generator"),c(S,o,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(w),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},9742:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},9861:function(e,t,n){"use strict";n("e260");var r=n("23e7"),i=n("da84"),o=n("d066"),s=n("c65b"),a=n("e330"),c=n("0d3b"),l=n("6eeb"),u=n("e2cc"),d=n("d44e"),h=n("9ed3"),p=n("69f3"),f=n("19aa"),g=n("1626"),m=n("1a2d"),_=n("0366"),v=n("f5df"),E=n("825a"),A=n("861d"),y=n("577e"),S=n("7c73"),b=n("5c6c"),C=n("9a1f"),T=n("35a1"),I=n("d6d6"),R=n("b622"),w=n("addb"),k=R("iterator"),O="URLSearchParams",N=O+"Iterator",L=p.set,P=p.getterFor(O),D=p.getterFor(N),M=o("fetch"),x=o("Request"),B=o("Headers"),U=x&&x.prototype,F=B&&B.prototype,V=i.RegExp,j=i.TypeError,G=i.decodeURIComponent,H=i.encodeURIComponent,Q=a("".charAt),W=a([].join),q=a([].push),z=a("".replace),Z=a([].shift),$=a([].splice),K=a("".split),Y=a("".slice),J=/\+/g,X=Array(4),ee=function(e){return X[e-1]||(X[e-1]=V("((?:%[\\da-f]{2}){"+e+"})","gi"))},te=function(e){try{return G(e)}catch(t){return e}},ne=function(e){var t=z(e,J," "),n=4;try{return G(t)}catch(r){while(n)t=z(t,ee(n--),te);return t}},re=/[!'()~]|%20/g,ie={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},oe=function(e){return ie[e]},se=function(e){return z(H(e),re,oe)},ae=h((function(e,t){L(this,{type:N,iterator:C(P(e).entries),kind:t})}),"Iterator",(function(){var e=D(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),ce=function(e){this.entries=[],this.url=null,void 0!==e&&(A(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===Q(e,0)?Y(e,1):e:y(e)))};ce.prototype={type:O,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,a,c,l=T(e);if(l){t=C(e,l),n=t.next;while(!(r=s(n,t)).done){if(i=C(E(r.value)),o=i.next,(a=s(o,i)).done||(c=s(o,i)).done||!s(o,i).done)throw j("Expected sequence with length 2");q(this.entries,{key:y(a.value),value:y(c.value)})}}else for(var u in e)m(e,u)&&q(this.entries,{key:u,value:y(e[u])})},parseQuery:function(e){if(e){var t,n,r=K(e,"&"),i=0;while(i<r.length)t=r[i++],t.length&&(n=K(t,"="),q(this.entries,{key:ne(Z(n)),value:ne(W(n,"="))}))}},serialize:function(){var e,t=this.entries,n=[],r=0;while(r<t.length)e=t[r++],q(n,se(e.key)+"="+se(e.value));return W(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var le=function(){f(this,ue);var e=arguments.length>0?arguments[0]:void 0;L(this,new ce(e))},ue=le.prototype;if(u(ue,{append:function(e,t){I(arguments.length,2);var n=P(this);q(n.entries,{key:y(e),value:y(t)}),n.updateURL()},delete:function(e){I(arguments.length,1);var t=P(this),n=t.entries,r=y(e),i=0;while(i<n.length)n[i].key===r?$(n,i,1):i++;t.updateURL()},get:function(e){I(arguments.length,1);for(var t=P(this).entries,n=y(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){I(arguments.length,1);for(var t=P(this).entries,n=y(e),r=[],i=0;i<t.length;i++)t[i].key===n&&q(r,t[i].value);return r},has:function(e){I(arguments.length,1);var t=P(this).entries,n=y(e),r=0;while(r<t.length)if(t[r++].key===n)return!0;return!1},set:function(e,t){I(arguments.length,1);for(var n,r=P(this),i=r.entries,o=!1,s=y(e),a=y(t),c=0;c<i.length;c++)n=i[c],n.key===s&&(o?$(i,c--,1):(o=!0,n.value=a));o||q(i,{key:s,value:a}),r.updateURL()},sort:function(){var e=P(this);w(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){var t,n=P(this).entries,r=_(e,arguments.length>1?arguments[1]:void 0),i=0;while(i<n.length)t=n[i++],r(t.value,t.key,this)},keys:function(){return new ae(this,"keys")},values:function(){return new ae(this,"values")},entries:function(){return new ae(this,"entries")}},{enumerable:!0}),l(ue,k,ue.entries,{name:"entries"}),l(ue,"toString",(function(){return P(this).serialize()}),{enumerable:!0}),d(le,O),r({global:!0,forced:!c},{URLSearchParams:le}),!c&&g(B)){var de=a(F.has),he=a(F.set),pe=function(e){if(A(e)){var t,n=e.body;if(v(n)===O)return t=e.headers?new B(e.headers):new B,de(t,"content-type")||he(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),S(e,{body:b(0,y(n)),headers:b(0,t)})}return e};if(g(M)&&r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return M(e,arguments.length>1?pe(arguments[1]):{})}}),g(x)){var fe=function(e){return f(this,U),new x(e,arguments.length>1?pe(arguments[1]):{})};U.constructor=fe,fe.prototype=U,r({global:!0,forced:!0},{Request:fe})}}e.exports={URLSearchParams:le,getState:P}},9876:function(e,t,n){var r=n("03d6"),i=n("9742");e.exports=Object.keys||function(e){return r(e,i)}},"99af":function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("d039"),s=n("e8b5"),a=n("861d"),c=n("7b0b"),l=n("07fa"),u=n("8418"),d=n("65f0"),h=n("1dde"),p=n("b622"),f=n("2d00"),g=p("isConcatSpreadable"),m=9007199254740991,_="Maximum allowed index exceeded",v=i.TypeError,E=f>=51||!o((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),A=h("concat"),y=function(e){if(!a(e))return!1;var t=e[g];return void 0!==t?!!t:s(e)},S=!E||!A;r({target:"Array",proto:!0,forced:S},{concat:function(e){var t,n,r,i,o,s=c(this),a=d(s,0),h=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?s:arguments[t],y(o)){if(i=l(o),h+i>m)throw v(_);for(n=0;n<i;n++,h++)n in o&&u(a,h,o[n])}else{if(h>=m)throw v(_);u(a,h++,o)}return a.length=h,a}})},"9a1f":function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("59ed"),s=n("825a"),a=n("0d51"),c=n("35a1"),l=r.TypeError;e.exports=function(e,t){var n=arguments.length<2?c(e):t;if(o(n))return s(i(n,e));throw l(a(e)+" is not iterable")}},"9a8c":function(e,t,n){"use strict";var r=n("e330"),i=n("ebb5"),o=n("145e"),s=r(o),a=i.aTypedArray,c=i.exportTypedArrayMethod;c("copyWithin",(function(e,t){return s(a(this),e,t,arguments.length>2?arguments[2]:void 0)}))},"9ab4":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));function r(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}},"9afc":function(e,t,n){"use strict";var r=function(e){return i(e)&&!o(e)};function i(e){return!!e&&"object"===typeof e}function o(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||c(e)}var s="function"===typeof Symbol&&Symbol.for,a=s?Symbol.for("react.element"):60103;function c(e){return e.$$typeof===a}function l(e){return Array.isArray(e)?[]:{}}function u(e,t){var n=t&&!0===t.clone;return n&&r(e)?p(l(e),e,t):e}function d(e,t,n){var i=e.slice();return t.forEach((function(t,o){"undefined"===typeof i[o]?i[o]=u(t,n):r(t)?i[o]=p(e[o],t,n):-1===e.indexOf(t)&&i.push(u(t,n))})),i}function h(e,t,n){var i={};return r(e)&&Object.keys(e).forEach((function(t){i[t]=u(e[t],n)})),Object.keys(t).forEach((function(o){r(t[o])&&e[o]?i[o]=p(e[o],t[o],n):i[o]=u(t[o],n)})),i}function p(e,t,n){var r=Array.isArray(t),i=Array.isArray(e),o=n||{arrayMerge:d},s=r===i;if(s){if(r){var a=o.arrayMerge||d;return a(e,t,n)}return h(e,t,n)}return u(t,n)}p.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return p(e,n,t)}))};var f=p;e.exports=f},"9bdd":function(e,t,n){var r=n("825a"),i=n("2a62");e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(s){i(e,"throw",s)}}},"9bf2":function(e,t,n){var r=n("da84"),i=n("83ab"),o=n("0cfb"),s=n("aed9"),a=n("825a"),c=n("a04b"),l=r.TypeError,u=Object.defineProperty,d=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",f="writable";t.f=i?s?function(e,t,n){if(a(e),t=c(t),a(n),"function"===typeof e&&"prototype"===t&&"value"in n&&f in n&&!n[f]){var r=d(e,t);r&&r[f]&&(e[t]=n.value,n={configurable:p in n?n[p]:r[p],enumerable:h in n?n[h]:r[h],writable:!1})}return u(e,t,n)}:u:function(e,t,n){if(a(e),t=c(t),a(n),o)try{return u(e,t,n)}catch(r){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9c0c":function(e,t,n){var r=n("1609");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"9c0e":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"9d11":function(e,t,n){var r=n("fc5e"),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},"9d7e":function(e,t,n){"use strict";t.__esModule=!0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){function t(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return 1===n.length&&"object"===r(n[0])&&(n=n[0]),n&&n.hasOwnProperty||(n={}),e.replace(o,(function(t,r,o,s){var a=void 0;return"{"===e[s-1]&&"}"===e[s+t.length]?o:(a=(0,i.hasOwn)(n,o)?n[o]:null,null===a||void 0===a?"":a)}))}return t};var i=n("8122"),o=/(%|)\{([0-9a-zA-Z_]+)\}/g},"9ed3":function(e,t,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),o=n("5c6c"),s=n("d44e"),a=n("3f8c"),c=function(){return this};e.exports=function(e,t,n,l){var u=t+" Iterator";return e.prototype=i(r,{next:o(+!l,n)}),s(e,u,!1,!0),a[u]=c,e}},"9f7f":function(e,t,n){var r=n("d039"),i=n("da84"),o=i.RegExp,s=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),a=s||r((function(){return!o("a","y").sticky})),c=s||r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:c,MISSED_STICKY:a,UNSUPPORTED_Y:s}},"9fbb":function(e,t,n){var r=n("4d88");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},a04b:function(e,t,n){var r=n("c04e"),i=n("d9b5");e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},a078:function(e,t,n){var r=n("0366"),i=n("c65b"),o=n("5087"),s=n("7b0b"),a=n("07fa"),c=n("9a1f"),l=n("35a1"),u=n("e95a"),d=n("ebb5").aTypedArrayConstructor;e.exports=function(e){var t,n,h,p,f,g,m=o(this),_=s(e),v=arguments.length,E=v>1?arguments[1]:void 0,A=void 0!==E,y=l(_);if(y&&!u(y)){f=c(_,y),g=f.next,_=[];while(!(p=i(g,f)).done)_.push(p.value)}for(A&&v>2&&(E=r(E,arguments[2])),n=a(_),h=new(d(m))(n),t=0;n>t;t++)h[t]=A?E(_[t],t):_[t];return h}},a15b:function(e,t,n){"use strict";var r=n("23e7"),i=n("e330"),o=n("44ad"),s=n("fc6a"),a=n("a640"),c=i([].join),l=o!=Object,u=a("join",",");r({target:"Array",proto:!0,forced:l||!u},{join:function(e){return c(s(this),void 0===e?",":e)}})},a15e:function(e,t,n){"use strict";n.r(t);var r=n("41b2"),i=n.n(r),o=n("1098"),s=n.n(o),a=/%[sdj%]/g,c=function(){};function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1,i=t[0],o=t.length;if("function"===typeof i)return i.apply(null,t.slice(1));if("string"===typeof i){for(var s=String(i).replace(a,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch(n){return"[Circular]"}break;default:return e}})),c=t[r];r<o;c=t[++r])s+=" "+c;return s}return i}function u(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"pattern"===e}function d(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!u(t)||"string"!==typeof e||e))}function h(e,t,n){var r=[],i=0,o=e.length;function s(e){r.push.apply(r,e),i++,i===o&&n(r)}e.forEach((function(e){t(e,s)}))}function p(e,t,n){var r=0,i=e.length;function o(s){if(s&&s.length)n(s);else{var a=r;r+=1,a<i?t(e[a],o):n([])}}o([])}function f(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n])})),t}function g(e,t,n,r){if(t.first){var i=f(e);return p(i,n,r)}var o=t.firstFields||[];!0===o&&(o=Object.keys(e));var s=Object.keys(e),a=s.length,c=0,l=[],u=function(e){l.push.apply(l,e),c++,c===a&&r(l)};s.forEach((function(t){var r=e[t];-1!==o.indexOf(t)?p(r,n,u):h(r,n,u)}))}function m(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:t,field:t.field||e.fullField}}}function _(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===("undefined"===typeof r?"undefined":s()(r))&&"object"===s()(e[n])?e[n]=i()({},e[n],r):e[n]=r}return e}function v(e,t,n,r,i,o){!e.required||n.hasOwnProperty(e.field)&&!d(t,o||e.type)||r.push(l(i.messages.required,e.fullField))}var E=v;function A(e,t,n,r,i){(/^\s+$/.test(t)||""===t)&&r.push(l(i.messages.whitespace,e.fullField))}var y=A,S={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},b={integer:function(e){return b.number(e)&&parseInt(e,10)===e},float:function(e){return b.number(e)&&!b.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===("undefined"===typeof e?"undefined":s()(e))&&!b.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&!!e.match(S.email)&&e.length<255},url:function(e){return"string"===typeof e&&!!e.match(S.url)},hex:function(e){return"string"===typeof e&&!!e.match(S.hex)}};function C(e,t,n,r,i){if(e.required&&void 0===t)E(e,t,n,r,i);else{var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;o.indexOf(a)>-1?b[a](t)||r.push(l(i.messages.types[a],e.fullField,e.type)):a&&("undefined"===typeof t?"undefined":s()(t))!==e.type&&r.push(l(i.messages.types[a],e.fullField,e.type))}}var T=C;function I(e,t,n,r,i){var o="number"===typeof e.len,s="number"===typeof e.min,a="number"===typeof e.max,c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=t,d=null,h="number"===typeof t,p="string"===typeof t,f=Array.isArray(t);if(h?d="number":p?d="string":f&&(d="array"),!d)return!1;f&&(u=t.length),p&&(u=t.replace(c,"_").length),o?u!==e.len&&r.push(l(i.messages[d].len,e.fullField,e.len)):s&&!a&&u<e.min?r.push(l(i.messages[d].min,e.fullField,e.min)):a&&!s&&u>e.max?r.push(l(i.messages[d].max,e.fullField,e.max)):s&&a&&(u<e.min||u>e.max)&&r.push(l(i.messages[d].range,e.fullField,e.min,e.max))}var R=I,w="enum";function k(e,t,n,r,i){e[w]=Array.isArray(e[w])?e[w]:[],-1===e[w].indexOf(t)&&r.push(l(i.messages[w],e.fullField,e[w].join(", ")))}var O=k;function N(e,t,n,r,i){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(l(i.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){var o=new RegExp(e.pattern);o.test(t)||r.push(l(i.messages.pattern.mismatch,e.fullField,t,e.pattern))}}var L=N,P={required:E,whitespace:y,type:T,range:R,enum:O,pattern:L};function D(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t,"string")&&!e.required)return n();P.required(e,t,r,o,i,"string"),d(t,"string")||(P.type(e,t,r,o,i),P.range(e,t,r,o,i),P.pattern(e,t,r,o,i),!0===e.whitespace&&P.whitespace(e,t,r,o,i))}n(o)}var M=D;function x(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),void 0!==t&&P.type(e,t,r,o,i)}n(o)}var B=x;function U(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),void 0!==t&&(P.type(e,t,r,o,i),P.range(e,t,r,o,i))}n(o)}var F=U;function V(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),void 0!==t&&P.type(e,t,r,o,i)}n(o)}var j=V;function G(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),d(t)||P.type(e,t,r,o,i)}n(o)}var H=G;function Q(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),void 0!==t&&(P.type(e,t,r,o,i),P.range(e,t,r,o,i))}n(o)}var W=Q;function q(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),void 0!==t&&(P.type(e,t,r,o,i),P.range(e,t,r,o,i))}n(o)}var z=q;function Z(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t,"array")&&!e.required)return n();P.required(e,t,r,o,i,"array"),d(t,"array")||(P.type(e,t,r,o,i),P.range(e,t,r,o,i))}n(o)}var $=Z;function K(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),void 0!==t&&P.type(e,t,r,o,i)}n(o)}var Y=K,J="enum";function X(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();P.required(e,t,r,o,i),t&&P[J](e,t,r,o,i)}n(o)}var ee=X;function te(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t,"string")&&!e.required)return n();P.required(e,t,r,o,i),d(t,"string")||P.pattern(e,t,r,o,i)}n(o)}var ne=te;function re(e,t,n,r,i){var o=[],s=e.required||!e.required&&r.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();if(P.required(e,t,r,o,i),!d(t)){var a=void 0;a="number"===typeof t?new Date(t):t,P.type(e,a,r,o,i),a&&P.range(e,a.getTime(),r,o,i)}}n(o)}var ie=re;function oe(e,t,n,r,i){var o=[],a=Array.isArray(t)?"array":"undefined"===typeof t?"undefined":s()(t);P.required(e,t,r,o,i,a),n(o)}var se=oe;function ae(e,t,n,r,i){var o=e.type,s=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(d(t,o)&&!e.required)return n();P.required(e,t,r,s,i,o),d(t,o)||P.type(e,t,r,s,i)}n(s)}var ce=ae,le={string:M,method:B,number:F,boolean:j,regexp:H,integer:W,float:z,array:$,object:Y,enum:ee,pattern:ne,date:ie,url:ce,hex:ce,email:ce,required:se};function ue(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var de=ue();function he(e){this.rules=null,this._messages=de,this.define(e)}he.prototype={messages:function(e){return e&&(this._messages=_(ue(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==("undefined"===typeof e?"undefined":s()(e))||Array.isArray(e))throw new Error("Rules must be an object");this.rules={};var t=void 0,n=void 0;for(t in e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],o=e,a=n,u=r;if("function"===typeof a&&(u=a,a={}),this.rules&&0!==Object.keys(this.rules).length){if(a.messages){var d=this.messages();d===de&&(d=ue()),_(d,a.messages),a.messages=d}else a.messages=this.messages();var h=void 0,p=void 0,f={},v=a.keys||Object.keys(this.rules);v.forEach((function(n){h=t.rules[n],p=o[n],h.forEach((function(r){var s=r;"function"===typeof s.transform&&(o===e&&(o=i()({},o)),p=o[n]=s.transform(p)),s="function"===typeof s?{validator:s}:i()({},s),s.validator=t.getValidationMethod(s),s.field=n,s.fullField=s.fullField||n,s.type=t.getType(s),s.validator&&(f[n]=f[n]||[],f[n].push({rule:s,value:p,source:o,field:n}))}))}));var E={};g(f,a,(function(e,t){var n=e.rule,r=("object"===n.type||"array"===n.type)&&("object"===s()(n.fields)||"object"===s()(n.defaultField));function o(e,t){return i()({},t,{fullField:n.fullField+"."+e})}function u(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=s;if(Array.isArray(u)||(u=[u]),u.length&&c("async-validator:",u),u.length&&n.message&&(u=[].concat(n.message)),u=u.map(m(n)),a.first&&u.length)return E[n.field]=1,t(u);if(r){if(n.required&&!e.value)return u=n.message?[].concat(n.message).map(m(n)):a.error?[a.error(n,l(a.messages.required,n.field))]:[],t(u);var d={};if(n.defaultField)for(var h in e.value)e.value.hasOwnProperty(h)&&(d[h]=n.defaultField);for(var p in d=i()({},d,e.rule.fields),d)if(d.hasOwnProperty(p)){var f=Array.isArray(d[p])?d[p]:[d[p]];d[p]=f.map(o.bind(null,p))}var g=new he(d);g.messages(a.messages),e.rule.options&&(e.rule.options.messages=a.messages,e.rule.options.error=a.error),g.validate(e.value,e.rule.options||a,(function(e){t(e&&e.length?u.concat(e):e)}))}else t(u)}r=r&&(n.required||!n.required&&e.value),n.field=e.field;var d=n.validator(n,e.value,u,e.source,a);d&&d.then&&d.then((function(){return u()}),(function(e){return u(e)}))}),(function(e){A(e)}))}else u&&u();function A(e){var t=void 0,n=void 0,r=[],i={};function o(e){Array.isArray(e)?r=r.concat.apply(r,e):r.push(e)}for(t=0;t<e.length;t++)o(e[t]);if(r.length)for(t=0;t<r.length;t++)n=r[t].field,i[n]=i[n]||[],i[n].push(r[t]);else r=null,i=null;u(r,i)}},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!le.hasOwnProperty(e.type))throw new Error(l("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?le.required:le[this.getType(e)]||!1}},he.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");le[e]=t},he.messages=de;t["default"]=he},a3de:function(e,t,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},a434:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("23cb"),s=n("5926"),a=n("07fa"),c=n("7b0b"),l=n("65f0"),u=n("8418"),d=n("1dde"),h=d("splice"),p=i.TypeError,f=Math.max,g=Math.min,m=9007199254740991,_="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var n,r,i,d,h,v,E=c(this),A=a(E),y=o(e,A),S=arguments.length;if(0===S?n=r=0:1===S?(n=0,r=A-y):(n=S-2,r=g(f(s(t),0),A-y)),A+n-r>m)throw p(_);for(i=l(E,r),d=0;d<r;d++)h=y+d,h in E&&u(i,d,E[h]);if(i.length=r,n<r){for(d=y;d<A-r;d++)h=d+r,v=d+n,h in E?E[v]=E[h]:delete E[v];for(d=A;d>A-r+n;d--)delete E[d-1]}else if(n>r)for(d=A-r;d>y;d--)h=d+r-1,v=d+n-1,h in E?E[v]=E[h]:delete E[v];for(d=0;d<n;d++)E[d+y]=arguments[d+2];return E.length=A-r+n,i}})},a4b4:function(e,t,n){var r=n("342f");e.exports=/web0s(?!.*chrome)/i.test(r)},a4d3:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("d066"),s=n("2ba4"),a=n("c65b"),c=n("e330"),l=n("c430"),u=n("83ab"),d=n("4930"),h=n("d039"),p=n("1a2d"),f=n("e8b5"),g=n("1626"),m=n("861d"),_=n("3a9b"),v=n("d9b5"),E=n("825a"),A=n("7b0b"),y=n("fc6a"),S=n("a04b"),b=n("577e"),C=n("5c6c"),T=n("7c73"),I=n("df75"),R=n("241c"),w=n("057f"),k=n("7418"),O=n("06cf"),N=n("9bf2"),L=n("37e8"),P=n("d1e7"),D=n("f36a"),M=n("6eeb"),x=n("5692"),B=n("f772"),U=n("d012"),F=n("90e3"),V=n("b622"),j=n("e538"),G=n("746f"),H=n("d44e"),Q=n("69f3"),W=n("b727").forEach,q=B("hidden"),z="Symbol",Z="prototype",$=V("toPrimitive"),K=Q.set,Y=Q.getterFor(z),J=Object[Z],X=i.Symbol,ee=X&&X[Z],te=i.TypeError,ne=i.QObject,re=o("JSON","stringify"),ie=O.f,oe=N.f,se=w.f,ae=P.f,ce=c([].push),le=x("symbols"),ue=x("op-symbols"),de=x("string-to-symbol-registry"),he=x("symbol-to-string-registry"),pe=x("wks"),fe=!ne||!ne[Z]||!ne[Z].findChild,ge=u&&h((function(){return 7!=T(oe({},"a",{get:function(){return oe(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=ie(J,t);r&&delete J[t],oe(e,t,n),r&&e!==J&&oe(J,t,r)}:oe,me=function(e,t){var n=le[e]=T(ee);return K(n,{type:z,tag:e,description:t}),u||(n.description=t),n},_e=function(e,t,n){e===J&&_e(ue,t,n),E(e);var r=S(t);return E(n),p(le,r)?(n.enumerable?(p(e,q)&&e[q][r]&&(e[q][r]=!1),n=T(n,{enumerable:C(0,!1)})):(p(e,q)||oe(e,q,C(1,{})),e[q][r]=!0),ge(e,r,n)):oe(e,r,n)},ve=function(e,t){E(e);var n=y(t),r=I(n).concat(be(n));return W(r,(function(t){u&&!a(Ae,n,t)||_e(e,t,n[t])})),e},Ee=function(e,t){return void 0===t?T(e):ve(T(e),t)},Ae=function(e){var t=S(e),n=a(ae,this,t);return!(this===J&&p(le,t)&&!p(ue,t))&&(!(n||!p(this,t)||!p(le,t)||p(this,q)&&this[q][t])||n)},ye=function(e,t){var n=y(e),r=S(t);if(n!==J||!p(le,r)||p(ue,r)){var i=ie(n,r);return!i||!p(le,r)||p(n,q)&&n[q][r]||(i.enumerable=!0),i}},Se=function(e){var t=se(y(e)),n=[];return W(t,(function(e){p(le,e)||p(U,e)||ce(n,e)})),n},be=function(e){var t=e===J,n=se(t?ue:y(e)),r=[];return W(n,(function(e){!p(le,e)||t&&!p(J,e)||ce(r,le[e])})),r};if(d||(X=function(){if(_(ee,this))throw te("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?b(arguments[0]):void 0,t=F(e),n=function(e){this===J&&a(n,ue,e),p(this,q)&&p(this[q],t)&&(this[q][t]=!1),ge(this,t,C(1,e))};return u&&fe&&ge(J,t,{configurable:!0,set:n}),me(t,e)},ee=X[Z],M(ee,"toString",(function(){return Y(this).tag})),M(X,"withoutSetter",(function(e){return me(F(e),e)})),P.f=Ae,N.f=_e,L.f=ve,O.f=ye,R.f=w.f=Se,k.f=be,j.f=function(e){return me(V(e),e)},u&&(oe(ee,"description",{configurable:!0,get:function(){return Y(this).description}}),l||M(J,"propertyIsEnumerable",Ae,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:X}),W(I(pe),(function(e){G(e)})),r({target:z,stat:!0,forced:!d},{for:function(e){var t=b(e);if(p(de,t))return de[t];var n=X(t);return de[t]=n,he[n]=t,n},keyFor:function(e){if(!v(e))throw te(e+" is not a symbol");if(p(he,e))return he[e]},useSetter:function(){fe=!0},useSimple:function(){fe=!1}}),r({target:"Object",stat:!0,forced:!d,sham:!u},{create:Ee,defineProperty:_e,defineProperties:ve,getOwnPropertyDescriptor:ye}),r({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:Se,getOwnPropertySymbols:be}),r({target:"Object",stat:!0,forced:h((function(){k.f(1)}))},{getOwnPropertySymbols:function(e){return k.f(A(e))}}),re){var Ce=!d||h((function(){var e=X();return"[null]"!=re([e])||"{}"!=re({a:e})||"{}"!=re(Object(e))}));r({target:"JSON",stat:!0,forced:Ce},{stringify:function(e,t,n){var r=D(arguments),i=t;if((m(t)||void 0!==e)&&!v(e))return f(t)||(t=function(e,t){if(g(i)&&(t=a(i,this,e,t)),!v(t))return t}),r[1]=t,s(re,null,r)}})}if(!ee[$]){var Te=ee.valueOf;M(ee,$,(function(e){return a(Te,this)}))}H(X,z),U[q]=!0},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},a742:function(e,t,n){"use strict";t.__esModule=!0,t.isDefined=t.isUndefined=t.isFunction=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isString=a,t.isObject=c,t.isHtmlElement=l;var i=n("2b0e"),o=s(i);function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return"[object String]"===Object.prototype.toString.call(e)}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function l(e){return e&&e.nodeType===Node.ELEMENT_NODE}var u=function(e){var t={};return e&&"[object Function]"===t.toString.call(e)};"object"===("undefined"===typeof Int8Array?"undefined":r(Int8Array))||!o.default.prototype.$isServer&&"function"===typeof document.childNodes||(t.isFunction=u=function(e){return"function"===typeof e||!1}),t.isFunction=u;t.isUndefined=function(e){return void 0===e},t.isDefined=function(e){return void 0!==e&&null!==e}},a79d:function(e,t,n){"use strict";var r=n("23e7"),i=n("c430"),o=n("fea9"),s=n("d039"),a=n("d066"),c=n("1626"),l=n("4840"),u=n("cdf9"),d=n("6eeb"),h=!!o&&s((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));if(r({target:"Promise",proto:!0,real:!0,forced:h},{finally:function(e){var t=l(this,a("Promise")),n=c(e);return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),!i&&c(o)){var p=a("Promise").prototype["finally"];o.prototype["finally"]!==p&&d(o.prototype,"finally",p,{unsafe:!0})}},a975:function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").every,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("every",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},a981:function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},a9e3:function(e,t,n){"use strict";var r=n("83ab"),i=n("da84"),o=n("e330"),s=n("94ca"),a=n("6eeb"),c=n("1a2d"),l=n("7156"),u=n("3a9b"),d=n("d9b5"),h=n("c04e"),p=n("d039"),f=n("241c").f,g=n("06cf").f,m=n("9bf2").f,_=n("408a"),v=n("58a8").trim,E="Number",A=i[E],y=A.prototype,S=i.TypeError,b=o("".slice),C=o("".charCodeAt),T=function(e){var t=h(e,"number");return"bigint"==typeof t?t:I(t)},I=function(e){var t,n,r,i,o,s,a,c,l=h(e,"number");if(d(l))throw S("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=v(l),t=C(l,0),43===t||45===t){if(n=C(l,2),88===n||120===n)return NaN}else if(48===t){switch(C(l,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(o=b(l,2),s=o.length,a=0;a<s;a++)if(c=C(o,a),c<48||c>i)return NaN;return parseInt(o,r)}return+l};if(s(E,!A(" 0o1")||!A("0b1")||A("+0x1"))){for(var R,w=function(e){var t=arguments.length<1?0:A(T(e)),n=this;return u(y,n)&&p((function(){_(n)}))?l(Object(t),n,w):t},k=r?f(A):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),O=0;k.length>O;O++)c(A,R=k[O])&&!c(w,R)&&m(w,R,g(A,R));w.prototype=y,y.constructor=w,a(i,E,w)}},ab13:function(e,t,n){var r=n("b622"),i=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(r){}}return!1}},ab36:function(e,t,n){var r=n("861d"),i=n("9112");e.exports=function(e,t){r(t)&&"cause"in t&&i(e,"cause",t.cause)}},ac1f:function(e,t,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},addb:function(e,t,n){var r=n("4dae"),i=Math.floor,o=function(e,t){var n=e.length,c=i(n/2);return n<8?s(e,t):a(e,o(r(e,0,c),t),o(r(e,c),t),t)},s=function(e,t){var n,r,i=e.length,o=1;while(o<i){r=o,n=e[o];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},a=function(e,t,n,r){var i=t.length,o=n.length,s=0,a=0;while(s<i||a<o)e[s+a]=s<i&&a<o?r(t[s],n[a])<=0?t[s++]:n[a++]:s<i?t[s++]:n[a++];return e};e.exports=o},ae93:function(e,t,n){"use strict";var r,i,o,s=n("d039"),a=n("1626"),c=n("7c73"),l=n("e163"),u=n("6eeb"),d=n("b622"),h=n("c430"),p=d("iterator"),f=!1;[].keys&&(o=[].keys(),"next"in o?(i=l(l(o)),i!==Object.prototype&&(r=i)):f=!0);var g=void 0==r||s((function(){var e={};return r[p].call(e)!==e}));g?r={}:h&&(r=c(r)),a(r[p])||u(r,p,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},aed9:function(e,t,n){var r=n("83ab"),i=n("d039");e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},b041:function(e,t,n){"use strict";var r=n("00ee"),i=n("f5df");e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(e,t,n){var r=n("83ab"),i=n("5e77").EXISTS,o=n("e330"),s=n("9bf2").f,a=Function.prototype,c=o(a.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(l.exec),d="name";r&&!i&&s(a,d,{configurable:!0,get:function(){try{return u(l,c(this))[1]}catch(e){return""}}})},b367:function(e,t,n){var r=n("5524"),i=n("ef08"),o="__core-js_shared__",s=i[o]||(i[o]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("e444")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},b39a:function(e,t,n){"use strict";var r=n("da84"),i=n("2ba4"),o=n("ebb5"),s=n("d039"),a=n("f36a"),c=r.Int8Array,l=o.aTypedArray,u=o.exportTypedArrayMethod,d=[].toLocaleString,h=!!c&&s((function(){d.call(new c(1))})),p=s((function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()}))||!s((function(){c.prototype.toLocaleString.call([1,2])}));u("toLocaleString",(function(){return i(d,h?a(l(this)):l(this),a(arguments))}),p)},b50d:function(e,t,n){"use strict";var r=n("c532"),i=n("467f"),o=n("7aac"),s=n("30b5"),a=n("83b9"),c=n("c345"),l=n("3934"),u=n("2d83"),d=n("2444"),h=n("7a77");e.exports=function(e){return new Promise((function(t,n){var p,f=e.data,g=e.headers,m=e.responseType;function _(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(f)&&delete g["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var E=e.auth.username||"",A=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(E+":"+A)}var y=a(e.baseURL,e.url);function S(){if(v){var r="getAllResponseHeaders"in v?c(v.getAllResponseHeaders()):null,o=m&&"text"!==m&&"json"!==m?v.response:v.responseText,s={data:o,status:v.status,statusText:v.statusText,headers:r,config:e,request:v};i((function(e){t(e),_()}),(function(e){n(e),_()}),s),v=null}}if(v.open(e.method.toUpperCase(),s(y,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=S:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(S)},v.onabort=function(){v&&(n(u("Request aborted",e,"ECONNABORTED",v)),v=null)},v.onerror=function(){n(u("Network Error",e,null,v)),v=null},v.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||d.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(u(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},r.isStandardBrowserEnv()){var b=(e.withCredentials||l(y))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;b&&(g[e.xsrfHeaderName]=b)}"setRequestHeader"in v&&r.forEach(g,(function(e,t){"undefined"===typeof f&&"content-type"===t.toLowerCase()?delete g[t]:v.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),m&&"json"!==m&&(v.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){v&&(n(!e||e&&e.type?new h("canceled"):e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),f||(f=null),v.send(f)}))}},b575:function(e,t,n){var r,i,o,s,a,c,l,u,d=n("da84"),h=n("0366"),p=n("06cf").f,f=n("2cf4").set,g=n("1cdc"),m=n("d4c3"),_=n("a4b4"),v=n("605d"),E=d.MutationObserver||d.WebKitMutationObserver,A=d.document,y=d.process,S=d.Promise,b=p(d,"queueMicrotask"),C=b&&b.value;C||(r=function(){var e,t;v&&(e=y.domain)&&e.exit();while(i){t=i.fn,i=i.next;try{t()}catch(n){throw i?s():o=void 0,n}}o=void 0,e&&e.enter()},g||v||_||!E||!A?!m&&S&&S.resolve?(l=S.resolve(void 0),l.constructor=S,u=h(l.then,l),s=function(){u(r)}):v?s=function(){y.nextTick(r)}:(f=h(f,d),s=function(){f(r)}):(a=!0,c=A.createTextNode(""),new E(r).observe(c,{characterData:!0}),s=function(){c.data=a=!a})),e.exports=C||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,s()),o=t}},b622:function(e,t,n){var r=n("da84"),i=n("5692"),o=n("1a2d"),s=n("90e3"),a=n("4930"),c=n("fdbf"),l=i("wks"),u=r.Symbol,d=u&&u["for"],h=c?u:u&&u.withoutSetter||s;e.exports=function(e){if(!o(l,e)||!a&&"string"!=typeof l[e]){var t="Symbol."+e;a&&o(u,e)?l[e]=u[e]:l[e]=c&&d?d(t):h(t)}return l[e]}},b64b:function(e,t,n){var r=n("23e7"),i=n("7b0b"),o=n("df75"),s=n("d039"),a=s((function(){o(1)}));r({target:"Object",stat:!0,forced:a},{keys:function(e){return o(i(e))}})},b6b7:function(e,t,n){var r=n("ebb5"),i=n("4840"),o=r.TYPED_ARRAY_CONSTRUCTOR,s=r.aTypedArrayConstructor;e.exports=function(e){return s(i(e,e[o]))}},b727:function(e,t,n){var r=n("0366"),i=n("e330"),o=n("44ad"),s=n("7b0b"),a=n("07fa"),c=n("65f0"),l=i([].push),u=function(e){var t=1==e,n=2==e,i=3==e,u=4==e,d=6==e,h=7==e,p=5==e||d;return function(f,g,m,_){for(var v,E,A=s(f),y=o(A),S=r(g,m),b=a(y),C=0,T=_||c,I=t?T(f,b):n||h?T(f,0):void 0;b>C;C++)if((p||C in y)&&(v=y[C],E=S(v,C,A),e))if(t)I[C]=E;else if(E)switch(e){case 3:return!0;case 5:return v;case 6:return C;case 2:l(I,v)}else switch(e){case 4:return!1;case 7:l(I,v)}return d?-1:i||u?u:I}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},b980:function(e,t,n){var r=n("d039"),i=n("5c6c");e.exports=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)}))},b9c7:function(e,t,n){n("e507"),e.exports=n("5524").Object.assign},ba01:function(e,t,n){e.exports=n("051b")},bb2f:function(e,t,n){var r=n("d039");e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bc3a:function(e,t,n){e.exports=n("cee4")},bee2:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,"a",(function(){return i}))},bf19:function(e,t,n){"use strict";var r=n("23e7"),i=n("c65b");r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return i(URL.prototype.toString,this)}})},c04e:function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("861d"),s=n("d9b5"),a=n("dc4a"),c=n("485a"),l=n("b622"),u=r.TypeError,d=l("toPrimitive");e.exports=function(e,t){if(!o(e)||s(e))return e;var n,r=a(e,d);if(r){if(void 0===t&&(t="default"),n=i(r,e,t),!o(n)||s(n))return n;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),c(e,t)}},c098:function(e,t,n){e.exports=n("d4af")},c19f:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("621a"),s=n("2626"),a="ArrayBuffer",c=o[a],l=i[a];r({global:!0,forced:l!==c},{ArrayBuffer:c}),s(a)},c1ac:function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").filter,o=n("1448"),s=r.aTypedArray,a=r.exportTypedArrayMethod;a("filter",(function(e){var t=i(s(this),e,arguments.length>1?arguments[1]:void 0);return o(this,t)}))},c284:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=90)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},90:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-progress",class:["el-progress--"+e.type,e.status?"is-"+e.status:"",{"el-progress--without-text":!e.showText,"el-progress--text-inside":e.textInside}],attrs:{role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===e.type?n("div",{staticClass:"el-progress-bar"},[n("div",{staticClass:"el-progress-bar__outer",style:{height:e.strokeWidth+"px"}},[n("div",{staticClass:"el-progress-bar__inner",style:e.barStyle},[e.showText&&e.textInside?n("div",{staticClass:"el-progress-bar__innerText"},[e._v(e._s(e.content))]):e._e()])])]):n("div",{staticClass:"el-progress-circle",style:{height:e.width+"px",width:e.width+"px"}},[n("svg",{attrs:{viewBox:"0 0 100 100"}},[n("path",{staticClass:"el-progress-circle__track",style:e.trailPathStyle,attrs:{d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none"}}),n("path",{staticClass:"el-progress-circle__path",style:e.circlePathStyle,attrs:{d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0}})])]),e.showText&&!e.textInside?n("div",{staticClass:"el-progress__text",style:{fontSize:e.progressTextSize+"px"}},[e.status?n("i",{class:e.iconClass}):[e._v(e._s(e.content))]],2):e._e()])},i=[];r._withStripped=!0;var o={name:"ElProgress",props:{type:{type:String,default:"line",validator:function(e){return["line","circle","dashboard"].indexOf(e)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(e){return e>=0&&e<=100}},status:{type:String,validator:function(e){return["success","exception","warning"].indexOf(e)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var e={};return e.width=this.percentage+"%",e.backgroundColor=this.getCurrentColor(this.percentage),e},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var e=this.radius,t="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(t?"":"-")+e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"-":"")+2*e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"":"-")+2*e+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){var e=-1*this.perimeter*(1-this.rate)/2;return e+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var e=void 0;if(this.color)e=this.getCurrentColor(this.percentage);else switch(this.status){case"success":e="#13ce66";break;case"exception":e="#ff4949";break;case"warning":e="#e6a23c";break;default:e="#20a0ff"}return e},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"===typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(e){return"function"===typeof this.color?this.color(e):"string"===typeof this.color?this.color:this.getLevelColor(e)},getLevelColor:function(e){for(var t=this.getColorArray().sort((function(e,t){return e.percentage-t.percentage})),n=0;n<t.length;n++)if(t[n].percentage>e)return t[n].color;return t[t.length-1].color},getColorArray:function(){var e=this.color,t=100/e.length;return e.map((function(e,n){return"string"===typeof e?{color:e,percentage:(n+1)*t}:e}))}}},s=o,a=n(0),c=Object(a["a"])(s,r,i,!1,null,null,null);c.options.__file="packages/progress/src/progress.vue";var l=c.exports;l.install=function(e){e.component(l.name,l)};t["default"]=l}})},c345:function(e,t,n){"use strict";var r=n("c532"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},c401:function(e,t,n){"use strict";var r=n("c532"),i=n("2444");e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},c430:function(e,t){e.exports=!1},c532:function(e,t,n){"use strict";var r=n("1d2b"),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function s(e){return"undefined"===typeof e}function a(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function c(e){return"[object ArrayBuffer]"===i.call(e)}function l(e){return"undefined"!==typeof FormData&&e instanceof FormData}function u(e){var t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function d(e){return"string"===typeof e}function h(e){return"number"===typeof e}function p(e){return null!==e&&"object"===typeof e}function f(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function g(e){return"[object Date]"===i.call(e)}function m(e){return"[object File]"===i.call(e)}function _(e){return"[object Blob]"===i.call(e)}function v(e){return"[object Function]"===i.call(e)}function E(e){return p(e)&&v(e.pipe)}function A(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function S(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function b(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function C(){var e={};function t(t,n){f(e[n])&&f(t)?e[n]=C(e[n],t):f(t)?e[n]=C({},t):o(t)?e[n]=t.slice():e[n]=t}for(var n=0,r=arguments.length;n<r;n++)b(arguments[n],t);return e}function T(e,t,n){return b(t,(function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e}function I(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}e.exports={isArray:o,isArrayBuffer:c,isBuffer:a,isFormData:l,isArrayBufferView:u,isString:d,isNumber:h,isObject:p,isPlainObject:f,isUndefined:s,isDate:g,isFile:m,isBlob:_,isFunction:v,isStream:E,isURLSearchParams:A,isStandardBrowserEnv:S,forEach:b,merge:C,extend:T,trim:y,stripBOM:I}},c56a:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||!t)throw new Error("instance & callback is required");var i=!1,o=function(){i||(i=!0,t&&t.apply(null,arguments))};r?e.$once("after-leave",o):e.$on("after-leave",o),setTimeout((function(){o()}),n+100)}},c607:function(e,t,n){var r=n("da84"),i=n("83ab"),o=n("fce3"),s=n("c6b6"),a=n("9bf2").f,c=n("69f3").get,l=RegExp.prototype,u=r.TypeError;i&&o&&a(l,"dotAll",{configurable:!0,get:function(){if(this!==l){if("RegExp"===s(this))return!!c(this).dotAll;throw u("Incompatible receiver, RegExp required")}}})},c65b:function(e,t,n){var r=n("40d5"),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},c6b6:function(e,t,n){var r=n("e330"),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},c6cd:function(e,t,n){var r=n("da84"),i=n("ce4e"),o="__core-js_shared__",s=r[o]||i(o,{});e.exports=s},c770:function(e,t,n){var r=n("e330"),i=r("".replace),o=function(e){return String(Error(e).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,a=s.test(o);e.exports=function(e,t){if(a&&"string"==typeof e)while(t--)e=i(e,s,"");return e}},c8af:function(e,t,n){"use strict";var r=n("c532");e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},c8d2:function(e,t,n){var r=n("5e77").PROPER,i=n("d039"),o=n("5899"),s="​᠎";e.exports=function(e){return i((function(){return!!o[e]()||s[e]()!==s||r&&o[e].name!==e}))}},c901:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},ca84:function(e,t,n){var r=n("e330"),i=n("1a2d"),o=n("fc6a"),s=n("4d64").indexOf,a=n("d012"),c=r([].push);e.exports=function(e,t){var n,r=o(e),l=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&c(u,n);while(t.length>l)i(r,n=t[l++])&&(~s(u,n)||c(u,n));return u}},ca91:function(e,t,n){"use strict";var r=n("ebb5"),i=n("d58f").left,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("reduce",(function(e){var t=arguments.length;return i(o(this),e,t,t>1?arguments[1]:void 0)}))},caad:function(e,t,n){"use strict";var r=n("23e7"),i=n("4d64").includes,o=n("44d2");r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},cb29:function(e,t,n){var r=n("23e7"),i=n("81d5"),o=n("44d2");r({target:"Array",proto:!0},{fill:i}),o("fill")},cc12:function(e,t,n){var r=n("da84"),i=n("861d"),o=r.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},cc15:function(e,t,n){var r=n("b367")("wks"),i=n("8b1a"),o=n("ef08").Symbol,s="function"==typeof o,a=e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))};a.store=r},cca6:function(e,t,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cd26:function(e,t,n){"use strict";var r=n("ebb5"),i=r.aTypedArray,o=r.exportTypedArrayMethod,s=Math.floor;o("reverse",(function(){var e,t=this,n=i(t).length,r=s(n/2),o=0;while(o<r)e=t[o],t[o++]=t[--n],t[n]=e;return t}))},cdf9:function(e,t,n){var r=n("825a"),i=n("861d"),o=n("f069");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),s=n.resolve;return s(t),n.promise}},ce4e:function(e,t,n){var r=n("da84"),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},ce7a:function(e,t,n){var r=n("9c0e"),i=n("0983"),o=n("5a94")("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},cee4:function(e,t,n){"use strict";var r=n("c532"),i=n("1d2b"),o=n("0a06"),s=n("4a7b"),a=n("2444");function c(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n.create=function(t){return c(s(e,t))},n}var l=c(a);l.Axios=o,l.Cancel=n("7a77"),l.CancelToken=n("8df4"),l.isCancel=n("2e67"),l.VERSION=n("5cce").version,l.all=function(e){return Promise.all(e)},l.spread=n("0df6"),l.isAxiosError=n("5f02"),e.exports=l,e.exports.default=l},cfc3:function(e,t,n){var r=n("74e8");r("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},d010:function(e,t,n){"use strict";function r(e,t,n){this.$children.forEach((function(i){var o=i.$options.componentName;o===e?i.$emit.apply(i,[t].concat(n)):r.apply(i,[e,t].concat([n]))}))}t.__esModule=!0,t.default={methods:{dispatch:function(e,t,n){var r=this.$parent||this.$root,i=r.$options.componentName;while(r&&(!i||i!==e))r=r.$parent,r&&(i=r.$options.componentName);r&&r.$emit.apply(r,[t].concat(n))},broadcast:function(e,t,n){r.call(this,e,t,n)}}}},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){var r=n("da84"),i=n("1626"),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},d139:function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").find,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("find",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},d16a:function(e,t,n){var r=n("fc5e"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},d1e7:function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},d28b:function(e,t,n){var r=n("746f");r("iterator")},d2b2:function(e,t,n){!function(t,n){e.exports=n()}("undefined"!=typeof self&&self,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.LoggerStateCenter=t.ZegoDataReport=t.ZegoLogger=t.MODULE_TIPS=t.LinkedList=t.ListNode=t.getReportSeq=t.getSeq=t.REPORT_ACTION=t.E_CLIENT_TYPE=t.SERVER_ERROR_CODE=t.ENUM_STREAM_UPDATE_CMD=t.MINIUM_HEARTBEAT_INTERVAL=t.ENUM_NETWORK_STATE=t.ENUM_RUN_STATE=t.MAX_MIX_TASK_ID_LENGTH=t.MAX_ROOM_ID_LENGTH=t.MAX_USER_NAME_LENGTH=t.MAX_USER_ID_LENGTH=t.MAX_STREAM_ID_LENGTH=t.MAX_TRY_HEARTBEAT_COUNT=t.SEND_MSG_TIMEOUT=t.SEND_MSG_RESET=t.MAX_TRY_CONNECT_COUNT=t.ENUM_CONNECT_STATE=t.ENUM_SCREEM_RESOLUTION_TYPE=t.ENUM_RESOLUTION_TYPE=t.ENUM_SIGNAL_STATE=t.ERROR_CODES=t.ENUM_REMOTE_TYPE=t.LOG_LEVEL=t.ENUM_LOG_LEVEL=t.ROOMVERSION=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.12.0",t.ROOMVERSION="V1",function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.warn=2]="warn",e[e.error=3]="error",e[e.report=99]="report",e[e.disable=100]="disable"}(t.ENUM_LOG_LEVEL||(t.ENUM_LOG_LEVEL={})),t.LOG_LEVEL={debug:0,info:1,warn:2,error:3,report:99,disable:100},function(e){e[e.disable=0]="disable",e[e.websocket=1]="websocket",e[e.https=2]="https"}(t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={})),t.ERROR_CODES={ROOM_SESSION_ID_ERR:1000000152},function(e){e[e.disconnected=0]="disconnected",e[e.connecting=1]="connecting",e[e.connected=2]="connected"}(t.ENUM_SIGNAL_STATE||(t.ENUM_SIGNAL_STATE={})),t.ENUM_RESOLUTION_TYPE={LOW:{width:320,height:240,frameRate:15,bitRate:300},MEDIUM:{width:640,height:480,frameRate:15,bitRate:800},HIGH:{width:1280,height:720,frameRate:20,bitRate:1500}},t.ENUM_SCREEM_RESOLUTION_TYPE={LOW:{frameRate:20,bitRate:800},MEDIUM:{frameRate:15,bitRate:1200},HIGH:{frameRate:5,bitRate:2e3}},t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},t.MAX_TRY_CONNECT_COUNT=1,t.SEND_MSG_RESET=2,t.SEND_MSG_TIMEOUT=1,t.MAX_TRY_HEARTBEAT_COUNT=5,t.MAX_STREAM_ID_LENGTH=256,t.MAX_USER_ID_LENGTH=64,t.MAX_USER_NAME_LENGTH=256,t.MAX_ROOM_ID_LENGTH=128,t.MAX_MIX_TASK_ID_LENGTH=256,function(e){e[e.logout=0]="logout",e[e.trylogin=1]="trylogin",e[e.login=2]="login"}(t.ENUM_RUN_STATE||(t.ENUM_RUN_STATE={})),function(e){e[e.offline=0]="offline",e[e.online=1]="online"}(t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={})),t.MINIUM_HEARTBEAT_INTERVAL=3e3,t.ENUM_STREAM_UPDATE_CMD={added:12001,deleted:12002,updated:12003},t.SERVER_ERROR_CODE=1e4,function(e){e[e.ClientType_None=0]="ClientType_None",e[e.ClientType_H5=1]="ClientType_H5",e[e.ClientType_SmallProgram=2]="ClientType_SmallProgram",e[e.ClientType_Webrtc=3]="ClientType_Webrtc"}(t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={})),t.REPORT_ACTION={eventStart:"eventStart",eventEndWithMsgInfo:"eventEndWithMsgInfo",addEventMsg:"addEventMsg",addEvent:"addEvent",eventEnd:"eventEnd",addMsgInfo:"addMsgInfo"},t.getSeq=(r=1,function(){return r++}),t.getReportSeq=function(){var e=1;return function(){return e++}}();var i=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id?this._id:null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),e.prototype.hasNext=function(){return this.next&&this.next.id},e.prototype.hasPrev=function(){return this.prev&&this.prev.id},e}();t.ListNode=i;var o=function(){function e(){this.start=new i,this.end=new i,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}return e.prototype.insertBefore=function(e,t){var n=new i(this._idCounter,t);return n.next=e,n.prev=e.prev,e.prev&&(e.prev.next=n),e.prev=n,++this._idCounter,++this._numNodes,n},e.prototype.addLast=function(e){return this.insertBefore(this.end,e)},e.prototype.add=function(e){return this.addLast(e)},e.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},e.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},e.prototype.size=function(){return this._numNodes},e.prototype.getFromFirst=function(e){var t=0,n=this.start.next;if(e>=0)for(;t<e&&null!==n;)n=n.next,++t;else n=null;if(null===n)throw"Index out of bounds.";return n},e.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},e.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},e.prototype.removeFirst=function(){var e=null;return this._numNodes>0&&this.start.next&&(e=this.remove(this.start.next)),e},e.prototype.removeLast=function(){var e=null;return this._numNodes>0&&this.end.prev&&(e=this.remove(this.end.prev)),e},e.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},e.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},e.prototype.find=function(e){for(var t=this.start,n=!1,r=null;t.hasNext()&&!n;)e(t=t.next)&&(r=t,n=!0);return r},e.prototype.map=function(e){for(var t=this.start,n=[];t.hasNext();)e(t=t.next)&&n.push(t);return n},e.prototype.push=function(e){return this.addLast(e)},e.prototype.unshift=function(e){this._numNodes>0?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(){return this.removeFirst()},e}();t.LinkedList=o,t.MODULE_TIPS={MESSAGE:"未引入消息模块"};var s=n(21);Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return s.ZegoLogger}}),Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return s.ZegoDataReport}}),Object.defineProperty(t,"LoggerStateCenter",{enumerable:!0,get:function(){return s.LoggerStateCenter}}),Object.defineProperty(t,"createZegoWebSocket",{enumerable:!0,get:function(){return s.createZegoWebSocket}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={SERVER:{code:0,msg:"liverooom cmd error"},SUCCESS:{code:0,msg:"success."},INIT:{code:2000000001,msg:"init sdk wrong"},NOT_LOGIN:{code:1000002,msg:"not login"},NETWORK_BROKEN:{code:1000017,msg:"network is broken"},INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},INIT_SDK_WRONG:{code:1101e3,msg:"init sdk wrong"},USER_ID_NULL:{code:1002005,msg:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,msg:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,msg:"user ID is too long"},USER_NAME_NULL:{code:1002008,msg:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,msg:"username is too long"},ROOM_ID_NULL:{code:1002011,msg:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,msg:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,msg:"room ID is too long"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},LOGIN_TIMEOUT:{code:1002031,msg:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,msg:"users logging into the room exceeds the maximum number"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,msg:"kickout may be the same user ID login other"},NETWORK_RECOVERY:{code:1002051,msg:"network recovery"},ROOM_RETRY_TIMEOUT:{code:1002053,msg:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,msg:"server has sent a signal to kick out"},REPEATEDLY_LOGIN:{code:1002056,msg:"user repeatedly login"},REPEATEDLY_ENTER_ROOM:{code:1002057,msg:"user repeatedly enter room"},ALREADY_LOGIN:{code:1002058,msg:"user already logged in"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,msg:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,msg:"parse json error."},LOGIN_PROCESSING:{code:1102012,msg:"login is processing."},LIVEROMM_REQUEST_ERROR:{code:1102013,msg:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,msg:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,msg:"user login state is wrong."},TOKEN_ERROR:{code:1102016,msg:"token error"},DIAPATCH_ERROR:{code:1102017,msg:"dispatch error"},TOKEN_EXPIRED:{code:1102018,msg:"token expired"},SUBCMD_ERROR:{code:1102019,msg:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,msg:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,msg:"biz channel error."}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientUtil=void 0;var r=n(22),i=n(0),o=n(1),s=function(){function e(){}return e.checkConfigParam=function(e,t,n){return e&&"number"==typeof e&&this.checkInteger(e)?!(!t||"string"!=typeof t&&!Array.isArray(t)||""==t)||(n.error("ccp.0 server must be string or string array and not empty"),!1):(n.error("ccp.0 appid must be positive integer number and not empty"),!1)},e.checkPriConfigParam=function(e,t,n,r,i){return e&&"number"==typeof e&&this.checkInteger(e)?t&&"string"==typeof t?"object"!=typeof n||"string"!=typeof n.deviceID?(i.error("ccp.0 deviceID must be string and not empty"),!1):1===r||0===r||(i.error("ccp.0 anType must be 0 or 1"),!1):(i.error("ccp.0 dispatchServer must be string and not empty"),!1):(i.error("ccp.0 appid must be positive integer number and not empty"),!1)},e.checkIllegalCharacters=function(e){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e)&&/^[^:/]*$/g.test(e)},e.isUrl=function(e){return!!(e.startsWith("rtmp://")||e.startsWith("https://")&&e.endsWith(".flv")||e.startsWith("https://")&&e.endsWith(".m3u8"))},e.registerCallback=function(e,t,n){var r,i;t.success&&(r=t.success,n[e+"SuccessCallback"]=r),t.error&&(i=t.error,n[e+"ErrorCallback"]=i)},e.actionErrorCallback=function(e,t){return t[e+"ErrorCallback"]},e.actionSuccessCallback=function(e,t){return t[e+"SuccessCallback"]},e.logReportCallback=function(t,n,r,i){e.registerCallback(t,{success:function(t,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];e.dataReportEvent(n,r,t,i,o)}},i)},e.proxyRes=function(t,n,r,i){return{interResolve:function(e){t.uploadReport(n),r(e)},interReject:function(r,o){var s;void 0===o&&(o=""),(s=r.code<2e9&&r.code>1e9?e.decodeServerError(r.code,r.msg):{code:r.code,message:r.msg})&&t.addMsgInfo(n,{error:s.code,message:s.message+o}),t.uploadReport(n),i({errorCode:r.code})}}},e.getServerError=function(e){var t={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};if(0===e)return o.errorCodeList.SUCCESS;var n=o.errorCodeList.ROOM_INNER_ERROR;if(n.code=e,e>1e9){var r=t[e];n.msg=r?"liveroom cmd error, code: "+e+", message: "+r:t[1e9]+e}else n.msg=t[e]?t[e]+" code:"+e:"unknown error code:"+e;return n},e.unregisterCallback=function(e,t){delete t[e+"SuccessCallback"],delete t[e+"ErrorCallback"]},e.decodeServerError=function(e,t){var n={code:-1,message:"server error"};return n.code=e>1e9?e-1e9+52e6:e+2002e6,t&&(n.message=t),n},e.getLiveRoomError=function(e){return e>1e9?{1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR"}[e-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[e]||"ROOM_INNER_ERROR"},e.getKickoutError=function(e){var t={code:e,message:"kickout reason = "+e};switch(e){case 1:t.code=63000001,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:t.code=63000002,t.message="zpush manual kickout",t.name="MANUAL_KICKOUT";break;case 3:t.code=63000003,t.message="kickout reason = "+e;break;case 4:t.code=63000004,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 5:t.code=63000005,t.message="zpush token expired",t.name="TOKEN_EXPIRED";break;default:t.code=e,t.message="kickout reason = "+e}return t},e.dataReportEvent=function(e,t,n,r,i){switch(n){case"eventStart":e.eventStart(t,r);break;case"eventEndWithMsgInfo":e.eventEndWithMsgInfo(t,r,i[0]);break;case"addEventMsg":e.addEventMsg(t,r,i[0],i[1]);break;case"addEvent":e.addEvent(t,r);break;case"eventEnd":e.eventEnd(t,r);break;case"addMsgInfo":e.addMsgInfo(t,i[0])}},e.isKeepTryLogin=function(e){switch(e){case 1002:case 1003:return!0;default:return!1}},e.mergeUserList=function(e,t,n,r){e.debug("msl.0 call");var i,o=[],s=[];n||(n=[]);for(var a=0;a<n.length;a++){i=!1;for(var c=0;c<t.length;c++)if(n[a].userID===t[c].userID){i=!0;break}i||o.push(n[a])}for(var l=0;l<t.length;l++){i=!1;for(var u=0;u<n.length;u++)if(t[l].userID===n[u].userID){i=!0;break}i||s.push(t[l])}for(t.splice(0),a=0;a<n.length;a++)t.push(t[a]);r(o,s),e.debug("msl.0 call success")},e.checkInteger=function(e,t){return 0==t?"number"==typeof e&&e%1==0&&e>=0:"number"==typeof e&&e%1==0&&e>0},e.checkValidNumber=function(e,t,n){return t=t||1,n=n||1e4,"number"==typeof e&&e%1==0&&e>=t&&e<=n},e.generateRandumNumber=function(e){return parseInt(Math.random()*(e+1)+"",10)},e.uuid=function(e,t){var n,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||r.length,e)for(n=0;n<e;n++)i[n]=r[0|Math.random()*t];else{var o=void 0;for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",n=0;n<36;n++)i[n]||(o=0|16*Math.random(),i[n]=r[19==n?3&o|8:o])}return i.join("")},e.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var r=0;r<n;r++){var i=parseInt(e[r]),o=parseInt(t[r]);if(i>o)return 1;if(i<o)return-1}return 0},e.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),n=-1!=e.indexOf("Firefox"),r=null!=window.opr,i=e.indexOf("Chrome")&&window.chrome,o=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return t?"IE":n?"Firefox":r?"Opera":i?"Chrome":o?"Safari":"Unkown"},e.isTestEnv=function(e){return-1!=e.indexOf("wss://wssliveroom-test.zego.im/ws")||-1!=e.indexOf("wss://test2-wsliveroom-api.zego.im/ws")||-1!=e.indexOf("wss://wsliveroom-test.zegocloud.com/ws")||-1!=e.indexOf("wss://wsliveroom-test.zego.im/ws")||-1!=e.indexOf("wss://webliveroom-test.zego.im/ws")||-1!=e.indexOf("wss://webliveroom-test-bak.zego.im/ws")||-1!=e.indexOf("wss://webliveroom-hk-test.zegocloud.com/ws")||-1!=e.indexOf("wss://webliveroom-hk-test-bak.zegocloud.com/ws")},e.getLogLevel=function(e){return i.LOG_LEVEL[e]},e.getUint64=function(e,t,n){var r=n.getUint32(e,t),i=n.getUint32(e+4,t),o=t?r+Math.pow(2,32)*i:Math.pow(2,32)*r+i;return Number.isSafeInteger(o)||console.warn(o,"exceeds MAX_SAFE_INTEGER. Precision may be lost"),o},e.decodeTokenExpire=function(t){try{var n=Uint8Array.from(r.Base64.base64decode(t),(function(e){return e.charCodeAt(0)})),i=new DataView(n.buffer),o=void 0;return o="function"==typeof i.getBigInt64?i.getBigUint64(0):e.getUint64(0,!1,i),Number(o>0?o:i.getBigUint64(0,!0))}catch(e){console.error("token error")}return-1},e}();t.ClientUtil=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_RTM_ACTION=void 0,function(e){e.ZEGOEXPRESSWEBRTM_CONSTRUCTOR="zm.0",e.ZEGOEXPRESSWEBRTM_BIND_WINDOW_LISTENER="zm.wl",e.ZEGOEXPRESSWEBRTM_SET_LOG_CONFIG="zm.slf",e.ZEGOEXPRESSWEBRTM_SET_DEBUG_VERBOSE="zm.sdv",e.ZEGOEXPRESSWEBRTM_LOGIN_ROOM="zm.lg",e.ZEGOEXPRESSWEBRTM_LOGOUT_ROOM="zm.lo",e.ZEGOEXPRESSWEBRTM_SET_CLOUD_SETTING_URLS="zm.scsu",e.ZEGOEXPRESSWEBRTM_ON="zm.on",e.ZEGOEXPRESSWEBRTM_OFF="zm.off",e.ZEGOEXPRESSWEBRTM_RENEWTOKEN="zm.rntk",e.ZEGOEXPRESSWEBRTM_RESETTOKENTIMER="zm.rstt",e.ZEGOEXPRESSWEBRTM_ENABLE_MULTI_ROOM="zm.emr",e.ZEGOEXPRESSWEBRTM_SEND_PB="zm.spb",e.ZEGOEXPRESSWEBRTM_GET_HEADER="zm.gh",e.ROOM_LOGIN_ROOM="zm.rm.lg",e.ROOM_TRY_LOGIN="zm.rm.tl",e.ROOM_OPEN_HANDLER="zm.rm.op",e.ROOM_HANDLE_LOGINRSP="zm.rm.lgr",e.ROOM_CLOSEHANDLER="zm.rm.clh",e.ROOM_LOGOUT="zm.rm.lo",e.ROOM_RESET_ROOM="zm.rm.rr",e.ROOM_DISCONNECT="zm.rm.dcn",e.ROOM_KICK_OUT="zm.rm.kco",e.ROOM_STATUS_CALLBACK="zm.rm.scb",e.ROOM_RESETTOKEN_TIMER="zm.rm.rst",e.HEARTBEAT_START="zm.hb.st",e.HEARTBEAT_HEARTBEAT_RSP="zm.hb.rsp",e.HEARTBEAT_RESET="zm.hb.rst",e.SERVICE_PUSH="zm.sv.ps",e.SERVICE_SEND="zm.sv.sd",e.USER_LOGIN_RSP="zm.us.lgr",e.USER_FETCH_USER="zm.us.ftu",e.USER_FETCH_USER_RSP="zm.us.urp",e.USER_USER_PUSH="zm.us.uph",e.USER_MERGE_SEQ="zm.us.mg",e.USER_MERGE_TIMEOUT="zm.us.mto",e.USER_MERGE="zm.us.mg",e.USER_HB_PATCH="zm.us.pt",e.STATE_ACTION="zm.st.at",e.ON_LISTENER="ON_LISTENER"}(t.ZEGO_RTM_ACTION||(t.ZEGO_RTM_ACTION={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTMLogEvent=void 0;var r=n(1),i=function(e){return e};t.ZegoRTMLogEvent={kZegoTaskInitSetting:{event:"/sdk/init",error:{kInvalidParamError:r.errorCodeList.INPUT_PARAM},system_info:navigator?navigator.appVersion:""},kZegoTaskSetDebug:{event:"/sdk/set_debug",debug:i},kZegoTaskSetLog:{event:"/sdk/set_log_config",error:{kInvalidParamError:r.errorCodeList.INPUT_PARAM},log_level:function(e){return e},remote_log_level:i,log_url:i},kZegoTaskLoginRoom:{event:"/sdk/login",user_update:i,max_member_count:i,message:i,token:i,error:{ROOM_ID_NULL:r.errorCodeList.ROOM_ID_NULL,INPUT_PARAM:r.errorCodeList.INPUT_PARAM,ROOM_ID_TOO_LONG:r.errorCodeList.ROOM_ID_TOO_LONG,ROOM_ID_INVALID_CHARACTER:r.errorCodeList.ROOM_ID_INVALID_CHARACTER,USER_ID_NULL:r.errorCodeList.USER_ID_NULL,USER_ID_TOO_LONG:r.errorCodeList.USER_ID_TOO_LONG,USER_ID_INVALID_CHARACTER:r.errorCodeList.USER_ID_INVALID_CHARACTER,USER_NAME_NULL:r.errorCodeList.USER_NAME_NULL,USER_NAME_TOO_LONG:r.errorCodeList.USER_NAME_TOO_LONG,REPEATEDLY_LOGIN:r.errorCodeList.REPEATEDLY_LOGIN,LOGIN_TIMEOUT:r.errorCodeList.LOGIN_TIMEOUT,INNER_ERROR:r.errorCodeList.ROOM_INNER_ERROR,NETWORK_BROKEN:r.errorCodeList.NETWORK_BROKEN},subEvent:{create_socket:{event:"create_socket",server:i,try_cnt:i},liveroom_login:{event:"liveroom_login",server:i,respond_info:i}}},kZegoTaskReNewToken:{event:"/sdk/reNewToken",error:{INPUT_PARAM:r.errorCodeList.INPUT_PARAM,NOT_LOGIN:r.errorCodeList.NOT_LOGIN}},kZegoTaskLogoutRoom:{event:"/sdk/logout",error:{INPUT_PARAM:r.errorCodeList.INPUT_PARAM,ROOM_NOT_EXIST:r.errorCodeList.ROOM_NOT_EXIST}},kZegoTaskReLoginRoom:{event:"/sdk/relogin",error:{ROOM_ID_NULL:r.errorCodeList.ROOM_ID_NULL,ROOM_DISCONNECT:r.errorCodeList.NETWORK_BROKEN},subEvent:{create_socket:{event:"create_socket",server:i,try_cnt:i},liveroom_login:{event:"liveroom_login",server:i,respond_info:i}}},kZegoTaskKickout:{event:"/sdk/kickout",user_id:i,error:{}},kZegoTaskRoomKickout:{event:"/sdk/room_kickout",user_id:i,room_id:i,message:i},kZegoTaskLiveRoomHB:{event:"/liveroom/hb",room_sid:i,error:{NOT_LOGIN:r.errorCodeList.NOT_LOGIN,HB_TIMEOUT:r.errorCodeList.TIMEOUT}},kZegoTaskLiveRoomGetUserUpdateInfo:{event:"/liveroom/get_user_update_info",user_update_type:i},kZegoListener:{event:"/sdk/listener"},kZegoEnableMultiRoom:{event:"sdk/enable_multi_room",error:{kInvalidParamError:r.errorCodeList.INPUT_PARAM,kAlreadyLoginError:r.errorCodeList.ALREADY_LOGIN}},kZegoTaskCloudSettingCache:{event:"/cloud_setting/cache"},kZegoTaskCloudSettingRefresh:{event:"/cloud_setting/refresh"},kZegoTaskCloudSettingRequest:{event:"/cloud_setting/request"}}},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeartBeatHandler=void 0;var r=n(0),i=n(2),o=n(1),s=n(3),a=n(4),c=3,l=function(){function e(e,t,n,r,i){this.logger=e,this.stateCenter=t,this.dataReport=n,this.service=r,this.room=i,this.tryHeartbeatCount=0,this.heartbeatTimer=null,this.loginHeartbeatTimer=null,this.initCount=0}return e.prototype.init=function(e){var t,n=this;if("PRIVATE"==this.stateCenter.type){t=e.body.hb_interval<r.MINIUM_HEARTBEAT_INTERVAL?r.MINIUM_HEARTBEAT_INTERVAL:e.body.hb_interval;var i=e.body.hb_timeout||4e4;c=i/t+1}else t=e.body.hearbeat_interval<r.MINIUM_HEARTBEAT_INTERVAL?r.MINIUM_HEARTBEAT_INTERVAL:e.body.hearbeat_interval;this.tryHeartbeatCount=0,this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.loginHeartbeatTimer=setTimeout((function(){n.start(t)}),t),this.initCount++},e.prototype.start=function(e){var t=this;this.logger.info(s.ZEGO_RTM_ACTION.HEARTBEAT_START+" call");var n=r.getReportSeq();if(this.dataReport.newReport(n,a.ZegoRTMLogEvent.kZegoTaskLiveRoomHB.event),this.dataReport.addMsgInfo(n,{room_sid:a.ZegoRTMLogEvent.kZegoTaskLiveRoomHB.room_sid(this.room.sessionID)}),!this.room.isLogin())return this.logger.error(s.ZEGO_RTM_ACTION.HEARTBEAT_START+" state error"),this.dataReport.addMsgInfo(n,{error:a.ZegoRTMLogEvent.kZegoTaskLiveRoomHB.error.NOT_LOGIN.code,message:a.ZegoRTMLogEvent.kZegoTaskLiveRoomHB.error.NOT_LOGIN.msg}),void this.dataReport.uploadReport(n);if(++this.tryHeartbeatCount>c)return this.logger.error(s.ZEGO_RTM_ACTION.HEARTBEAT_START+" come to try limit"),this.dataReport.addMsgInfo(n,{error:a.ZegoRTMLogEvent.kZegoTaskLiveRoomHB.error.HB_TIMEOUT.code,message:a.ZegoRTMLogEvent.kZegoTaskLiveRoomHB.error.HB_TIMEOUT.msg}),this.dataReport.uploadReport(n),void this.hbLogout(o.errorCodeList.HEARTBEAT_TIMEOUT);var l=function(e){var r="PRIVATE"==t.stateCenter.type?e.body&&e.body.code:e.body&&e.body.err_code;if(e.header&&e.body){if(0!==r){var s=i.ClientUtil.decodeServerError(e.body.err_code||e.body.code,e.body.err_message||e.body.message);t.dataReport.addMsgInfo(n,{error:s.code,message:s.message+e.body.err_code})}}else t.dataReport.addMsgInfo(n,{error:e.code>0?e.code:o.errorCodeList.ROOM_INNER_ERROR.code,message:e.msg?e.msg:o.errorCodeList.ROOM_INNER_ERROR});t.dataReport.uploadReport(n),"PRIVATE"==t.stateCenter.type?t.handlePrivateHeartbeatRsp(e):t.handleHeartbeatRsp(e)};this.service.heartBeat(l,l,this.room.sessionID,this.room.roomID,this.room.roomSessionID),this.heartbeatInterval=e;var u=this.heartbeatInterval;this.initCount>=2?(u=Math.round(Math.random()*(this.heartbeatInterval+1)),this.initCount=1):u=this.heartbeatInterval,this.heartbeatTimer=setTimeout((function(){t.start(t.heartbeatInterval)}),u),this.logger.info(s.ZEGO_RTM_ACTION.HEARTBEAT_START+" call success")},e.prototype.handleHeartbeatRsp=function(e){return e.body&&e.body.err_code&&0!==e.body.err_code?(this.logger.error(s.ZEGO_RTM_ACTION.HEARTBEAT_HEARTBEAT_RSP+" disconnect, server error=",e.body.err_code),e.body.err_code==r.ERROR_CODES.ROOM_SESSION_ID_ERR?void this.hbLogout(o.errorCodeList.HEARTBEAT_TIMEOUT):void this.hbLogout(i.ClientUtil.getServerError(e.body.err_code))):e.header&&e.body?(this.tryHeartbeatCount=0,this.heartbeatInterval=e.body.hearbeat_interval,this.heartbeatInterval<r.MINIUM_HEARTBEAT_INTERVAL&&(this.heartbeatInterval=r.MINIUM_HEARTBEAT_INTERVAL),this.heartbeatRspNotiFy(e),void this.logger.info(s.ZEGO_RTM_ACTION.HEARTBEAT_HEARTBEAT_RSP+" call success")):(this.logger.error(s.ZEGO_RTM_ACTION.HEARTBEAT_HEARTBEAT_RSP+" disconnect, error=",JSON.stringify(e)),void this.hbLogout(e))},e.prototype.handlePrivateHeartbeatRsp=function(e){if(0!==e.body.code)return this.logger.error(s.ZEGO_RTM_ACTION.HEARTBEAT_HEARTBEAT_RSP+" disconnect, server error=",e.body.code),e.body.code==r.ERROR_CODES.ROOM_SESSION_ID_ERR?void this.hbLogout(o.errorCodeList.HEARTBEAT_TIMEOUT):void this.hbLogout(i.ClientUtil.getServerError(e.body.code));this.tryHeartbeatCount=0,this.heartbeatInterval=e.body.hb_interval,this.heartbeatInterval<r.MINIUM_HEARTBEAT_INTERVAL&&(this.heartbeatInterval=r.MINIUM_HEARTBEAT_INTERVAL),this.heartbeatRspNotiFy(e),this.logger.info(s.ZEGO_RTM_ACTION.HEARTBEAT_HEARTBEAT_RSP+" call success")},e.prototype.heartbeatRspNotiFy=function(e){},e.prototype.hbLogout=function(e){},e.prototype.resetHeartbeat=function(){clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null,clearTimeout(this.loginHeartbeatTimer),this.loginHeartbeatTimer=null,this.tryHeartbeatCount=0,this.initCount=0,this.logger.info(s.ZEGO_RTM_ACTION.HEARTBEAT_RESET+" call success")},e}();t.HeartBeatHandler=l},function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.UserHandler=void 0;var i=n(0),o=n(2),s=n(3),a=n(4),c=function(){function e(e,t,n,r,i){this.logger=e,this.stateCenter=t,this.dataReport=n,this.service=r,this.room=i,this.userQuerying=!1,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=[],this.userSeqMergeMap=null,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}}return e.prototype.loginRsp=function(e,t){this.anchor_info=e.body.anchor_info||this.anchor_info,this.userListInterval=e.body.userlist_interval||this.userListInterval,this.userListMergeInterval=e.body.userlist_merge_timeout||this.userListMergeInterval,e.body.anchor_info&&(this.stateCenter.actionListener("getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name),this.stateCenter.actionListener("_getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name)),e.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,e.body.online_count),this.logger.info(s.ZEGO_RTM_ACTION.USER_LOGIN_RSP+"  userStateUpdate "+this.stateCenter.userStateUpdate),this.stateCenter.userStateUpdate&&this.fetchUserList(t)},e.prototype.patchUserList=function(e){var t=this;e.body.server_user_seq!==this.userSeq&&this.stateCenter.userStateUpdate&&!this.userSeqMergeMap&&(this.logger.info(s.ZEGO_RTM_ACTION.USER_HB_PATCH+" call update user "+this.userSeq+" server "+e.body.server_user_seq),this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout((function(){t.handleMergeTimeout()}),this.userListMergeInterval)),this.minUserSeq=e.body.server_user_seq,null!=e.body.online_count&&0!=e.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,e.body.online_count)},e.prototype.resetUserHandler=function(){this.userQuerying=!1,this.lastUserQueryTime=0,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=void 0,this.userSeqMergeMap={},this.userSeqMergeTimer=void 0,this.userQueryTimer=void 0,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}},e.prototype.fetchUserList=function(e){this.userQuerying?this.logger.warn(s.ZEGO_RTM_ACTION.USER_FETCH_USER+" is already querying"):(this.userQuerying=!0,this.userTempList=[],this.fetchUserListWithPage(0,e||0),this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER+" the first time call"))},e.prototype.fetchUserListWithPage=function(e,t){var n,r=this,o=function(e){"PRIVATE"==r.stateCenter.type?r.handleFetchUserListPrivateRsp(e):r.handleFetchUserListRsp(e,t)};n="PRIVATE"==this.stateCenter.type?{room_header:{room_id:this.room.roomID,room_sid:this.room.roomSid,room_user_session_id:this.room.roomSessionID},mark:"0"}:{user_index:e,sort_type:0},"V1"===i.ROOMVERSION?this.service.fetchUserList(n,o,o,this.room.sessionID,this.room.roomID,this.room.roomSessionID):this.service.fetchUserListV2({marker:0===e?"":e+"",mode:0,limit:100},o,o,this.room.sessionID,this.room.roomID,this.room.roomSessionID)},e.prototype.handleFetchUserListRsp=function(e,t){var n=this;if(e.body&&0!=e.body.err_code)return this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,void this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER_RSP+" fetch error "+e.body.err_code);if(!e.header||!e.body)return this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,void this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER_RSP+" fetch error "+e);if(this.stateCenter.userStateUpdate){this.userTempList=r(r([],this.userTempList),e.body.user_baseinfos);var a=e.body.ret_user_index;if(a!=e.body.server_user_index)return this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER_RSP+" fetch another page"),void this.fetchUserListWithPage(a+1,t);this.userSeq=e.body.server_user_seq;for(var c=[],l=[],u=0;u<this.userTempList.length;u++){var d={userID:this.userTempList[u].id_name,userName:this.userTempList[u].nick_name,role:this.userTempList[u].role};c.push(d),l.push({idName:this.userTempList[u].id_name,nickName:this.userTempList[u].nick_name,role:this.userTempList[u].role})}this.stateCenter.actionListener("_getTotalUserList",this.room.roomID,l),t==i.ENUM_RUN_STATE.login?(this.userList&&o.ClientUtil.mergeUserList(this.logger,this.userList,c,(function(e,t){0!==e.length&&n.onUserStateUpdate(n.room.roomID,"ADD",e),0!==t.length&&n.onUserStateUpdate(n.room.roomID,"DELETE",t)})),this.userList=c):(this.userList=c,0!==c.length&&this.onUserStateUpdate(this.room.roomID,"ADD",c)),this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.userTempList=[],this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER_RSP+" call success user_list "+c+" count "+c.length)}},e.prototype.handlePushUserStateUpdateMsg=function(e){if(this.logger.info(s.ZEGO_RTM_ACTION.USER_USER_PUSH+" call"),this.stateCenter.userStateUpdate)if(this.userSeq!==e.body.user_list_seq)if(this.userSeq+e.body.user_actions.length===e.body.user_list_seq){this.userSeq=e.body.user_list_seq;var t,n,r=[];if("PRIVATE"==this.stateCenter.type){t=0,n=1;for(var i=0;i<e.body.user_actions.length;i++){var o={action:e.body.user_actions[i].action,idName:e.body.user_actions[i].user_id,nickName:e.body.user_actions[i].user_name,role:e.body.user_actions[i].role,loginTime:e.body.user_actions[i].login_time};r.push(o)}}else{for(t=1,n=2,i=0;i<e.body.user_actions.length;i++)o={action:e.body.user_actions[i].Action,idName:e.body.user_actions[i].IdName,nickName:e.body.user_actions[i].NickName,role:e.body.user_actions[i].Role,loginTime:e.body.user_actions[i].LoginTime},r.push(o);this.stateCenter.actionListener("_userStateUpdate",e.body.room_id,r)}var a=[],c=[];r.forEach((function(e){e.action==t?a.push({userID:e.idName,userName:e.nickName,role:e.role}):e.action==n&&c.push({userID:e.idName,userName:e.nickName,role:e.role})})),this.userList&&(this.userList=this.userList.concat(a).filter((function(e){return!c.some((function(t){return t.userID==e.userID}))}))),0!==a.length&&this.onUserStateUpdate(e.body.room_id||e.body.room_pushheader.room_id,"ADD",a),0!==c.length&&this.onUserStateUpdate(e.body.room_id||e.body.room_pushheader.room_id,"DELETE",c),this.logger.info(s.ZEGO_RTM_ACTION.USER_USER_PUSH+" call success")}else this.mergeUserByUserSeq(e.body.user_list_seq,e.body.user_actions);else this.logger.warn(s.ZEGO_RTM_ACTION.USER_USER_PUSH+" user_list_seq is the same with local seq");else this.logger.info(s.ZEGO_RTM_ACTION.USER_USER_PUSH+" userStateUpdate is false")},e.prototype.onUserStateUpdate=function(e,t,n){var r=this,o=i.getReportSeq();this.dataReport.newReport(o,a.ZegoRTMLogEvent.kZegoTaskLiveRoomGetUserUpdateInfo.event);var s=n.filter((function(e){return e.userID!==r.stateCenter.idName}));0!=s.length&&("PRIVATE"!==this.stateCenter.type&&(s=s.map((function(e){return{userID:e.userID,userName:e.userName}}))),this.stateCenter.actionListener("roomUserUpdate",e,t,s),this.dataReport.addMsgInfo(o,{user_update_type:"ADD"==t?a.ZegoRTMLogEvent.kZegoTaskLiveRoomGetUserUpdateInfo.user_update_type("added"):a.ZegoRTMLogEvent.kZegoTaskLiveRoomGetUserUpdateInfo.user_update_type("deleted")}),this.dataReport.uploadReport(o))},e.prototype.mergeUserByUserSeq=function(e,t){var n=this;this.userSeqMergeMap||(this.logger.warn(s.ZEGO_RTM_ACTION.USER_MERGE_SEQ+" new merge userlist "+this.userSeq+" server "+e),this.userSeqMergeMap={},this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout((function(){n.handleMergeTimeout()}),this.userListMergeInterval)),this.userSeqMergeMap[e]=t,this.logger.warn(s.ZEGO_RTM_ACTION.USER_MERGE_SEQ+"  merge userlist "+this.userSeq+" server "+e+" userlist "+t.length)},e.prototype.mergeUser=function(e){var t=this;this.logger.info(s.ZEGO_RTM_ACTION.USER_MERGE+" merge userlist "+this.userSeq+" userSeqList "+e.join(",")),this.userSeq=e[e.length-1],this.lastUserQueryTime=Date.now()+this.userListInterval;var n={};e.forEach((function(e){t.userSeqMergeMap&&t.userSeqMergeMap[e].forEach((function(e){n[e.IdName]=e}))})),this.userSeqMergeMap=null;var r=Object.values(n).map((function(e){return{action:e.Action,idName:e.IdName,nickName:e.NickName,role:e.Role,loginTime:e.LoginTime?String(e.LoginTime):""}}));r.sort((function(e,t){return e.loginTime.localeCompare(t.loginTime)}));var i=[],o=[];r.forEach((function(e){1==e.action?i.push({userID:e.idName,userName:e.nickName,role:e.role}):2==e.action&&o.push({userID:e.idName,userName:e.nickName,role:e.role})})),this.userList=this.userList&&this.userList.concat(i).filter((function(e){return!o.some((function(t){return t.userID==e.userID}))})),0!==i.length&&this.onUserStateUpdate(this.room.roomID,"ADD",i),0!==o.length&&this.onUserStateUpdate(this.room.roomID,"DELETE",o),this.stateCenter.actionListener("_userStateUpdate",this.room.roomID,r)},e.prototype.handleMergeTimeout=function(){var e=this,t=Object.keys(this.userSeqMergeMap).map((function(e){return+e})).sort((function(e,t){return e-t}));if(t[t.length-1]-t[0]+1===t.length||t[t.length-1]>=this.minUserSeq)this.mergeUser(t);else{this.userSeqMergeMap=null;var n=this.lastUserQueryTime-Date.now();this.logger.info(s.ZEGO_RTM_ACTION.USER_MERGE_TIMEOUT+"  fetch merge userlist "+this.userSeq+" userSeqList "+t.join(",")+" wait "+n),n>0?(this.userQueryTimer&&clearTimeout(this.userQueryTimer),this.userQueryTimer=setTimeout((function(){e.fetchUserList()}),n)):this.fetchUserList()}},e.prototype.loginPrivateRsp=function(e){this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER," userStateUpdate "+this.stateCenter.userStateUpdate),this.stateCenter.userStateUpdate&&this.fetchUserList()},e.prototype.handleFetchUserListPrivateRsp=function(e){if(this.logger.debug(s.ZEGO_RTM_ACTION.USER_FETCH_USER+" call"),e.body.code&&0!==e.body.code)return this.userQuerying=!1,void this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER+" fetch error "+e.body.code+" "+e.body.message);if(this.stateCenter.userStateUpdate){this.userTempList=r(r([],this.userTempList),e.body.users),this.userSeq=e.body.userlist_seq,this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER+" set user Seq "+this.userSeq);for(var t=[],n=0;n<this.userTempList.length;n++){var i={userID:this.userTempList[n].user_id,userName:this.userTempList[n].user_name,role:this.userTempList[n].role};t.push(i)}this.userQuerying=!1,this.onUserStateUpdate(this.room.roomID,"ADD",t),this.userTempList=[],this.logger.info(s.ZEGO_RTM_ACTION.USER_FETCH_USER+" call success user_list "+t+" count "+t.length)}},e}();t.UserHandler=c},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.LiveRoomService=void 0;var o=n(0),s=n(12),a=n(3),c=n(1),l=function(){function e(e,t,n){this.stateCenter=e,this.logger=t,this.rtm=n,this.service=new s.ZegoSocketService(this.stateCenter.ENV),this.cmdSeq=0,this.responseRouters={}}return e.prototype.checkResponse=function(e){return e.header.appid!==this.stateCenter.appid||e.header.user_id!==this.stateCenter.userid},e.prototype.handleSendCommandMsgRsp=function(e){var t=this,n=this.service.sendCommandMap[e.header.seq];if(null!=n){var r=n._data;delete this.service.sendCommandMap[e.header.seq],this.service.sendCommandList.remove(n),0===e.body.err_code?setTimeout((function(){r&&null!=r.success&&r.success(e,t.cmdSeq)}),0):setTimeout((function(){r&&null!=r.error&&r.error(e,t.cmdSeq)}),0)}},e.prototype.onPush=function(){var e=this;this.service.onMessage=function(t){t instanceof ArrayBuffer?e.stateCenter.actionListener("_protobufResponse",t):t.header?(0!==t.body.err_code?t.body.err_message&&e.logger.error(a.ZEGO_RTM_ACTION.SERVICE_PUSH+" cmd="+t.header.cmd+", err_code="+t.body.err_code+", err_message="+t.body.err_message+" "):e.logger.info(a.ZEGO_RTM_ACTION.SERVICE_PUSH+" cmd="+t.header.cmd+", msg="+JSON.stringify(t)+" "),["login","logout"].indexOf(t.header.cmd)>-1?e.handleSendCommandMsgRsp(t):e.checkResponse(t)?e.logger.error(a.ZEGO_RTM_ACTION.SERVICE_PUSH+"  check session fail."):(e.logger.info(a.ZEGO_RTM_ACTION.SERVICE_PUSH+" cmd="+t.header.cmd+",function="+!!e.responseRouters[t.header.cmd]),e.handleSendCommandMsgRsp(t),e.responseRouters[t.header.cmd]&&e.responseRouters[t.header.cmd](t,e.cmdSeq))):e.logger.error(a.ZEGO_RTM_ACTION.SERVICE_PUSH+" msg type error ")}},e.prototype.handlePushKickout=function(e){var t,n,r,o;if(void 0===(null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.protocol)||1===(null===(n=null==e?void 0:e.body)||void 0===n?void 0:n.protocol))i([],this.stateCenter.roomModulesList).forEach((function(t){return t.roomHandler.handlePushKickout(e,!0)}));else{var s=null===(r=null==e?void 0:e.header)||void 0===r?void 0:r.room_id,c=this.stateCenter.roomModulesList.find((function(e){return e.roomID==s}));if(!c)return void this.logger.error(a.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(null===(o=e.header)||void 0===o?void 0:o.room_id));c.roomHandler.handlePushKickout(e)}},e.prototype.handlePushCustomMsg=function(e){},e.prototype.handlePushRoomMsg=function(e){},e.prototype.handlePushUserStateUpdateMsg=function(e){var t,n=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,r=this.stateCenter.roomModulesList.find((function(e){return e.roomID==n}));r?r.userHandler.handlePushUserStateUpdateMsg(e):this.logger.error(a.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))},e.prototype.handlePushMergeMsg=function(e){},e.prototype.handlePushTransMsg=function(e){},e.prototype.handleBigImMsgRsp=function(e){},e.prototype.handlePushSignalMsg=function(e){},e.prototype.handlePushTokenExpire=function(e){this.stateCenter.actionListener("_tokenExpired",e)},e.prototype.closeHandler=function(e){this.service.closeHandler(e)},e.prototype.openHandler=function(e){this.service.openHandler(e)},e.prototype.errorHandler=function(e){this.service.errorHandler(e)},e.prototype.getHeader=function(e,t,n,r){return{Protocol:"V1"===o.ROOMVERSION?"req":"req_v2",cmd:e,appid:this.stateCenter.appid,seq:++this.cmdSeq,user_id:this.stateCenter.userid,session_id:t||"",room_id:n||"",room_session_id:r||"",biz_version:this.stateCenter.bizVersion||""}},e.prototype.startCheck=function(){this.service.startCheck()},e.prototype.stopCheck=function(){this.service.stopCheck()},e.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},e.prototype.createSocket=function(e){var t=this;this.service.createSocket(e),this.responseRouters=r(r({},this.responseRouters),{push_kickout:function(e){t.handlePushKickout(e)},push_custommsg:function(e){t.handlePushCustomMsg(e)},push_im_chat:function(e){t.handlePushRoomMsg(e)},push_userlist_update:function(e){t.handlePushUserStateUpdateMsg(e)},push_merge_message:function(e){t.handlePushMergeMsg(e)},push_trans:function(e){t.handlePushTransMsg(e)},push_signal:function(e){t.handlePushSignalMsg(e)},push_token_expire:function(e){t.handlePushTokenExpire(e)}})},e.prototype.closeSocket=function(){this.service.closeSocket()},e.prototype.sendMessage=function(e,t,n,r,i,o){var s,l,u;if(this.service.isDisConnect())return this.logger.error(a.ZEGO_RTM_ACTION.SERVICE_SEND+" socket is disconnect"),r(c.errorCodeList.SOCKET_CLOSE),0;var d=(null==o?void 0:o.roomID)?o.roomID:null===(s=this.stateCenter.roomModulesList[0])||void 0===s?void 0:s.roomID,h=(null==o?void 0:o.roomSessionID)?o.roomSessionID:null===(l=this.stateCenter.roomModulesList[0])||void 0===l?void 0:l.roomSessionID,p=(null==o?void 0:o.sessionID)?o.sessionID:null===(u=this.stateCenter.roomModulesList[0])||void 0===u?void 0:u.sessionID,f=i||this.getHeader(e,p,d,h);return this.logger.info(a.ZEGO_RTM_ACTION.SERVICE_SEND+" sendMsg:"+JSON.stringify({header:f,body:t})),this.service.sendMessage(f,t,n,r)},e.prototype.on=function(e,t){this.responseRouters[e]=t},e.prototype.login=function(e,t,n){var r=this.getHeader(e.isMulti?"enter":"login",e.sessionID,e.roomID,e.roomSessionID),i={id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,role:this.stateCenter.role,token:e.token,version:this.stateCenter.sdKVersion,room_name:e.roomID,user_state_flag:this.stateCenter.userStateUpdate?1:0,room_create_flag:this.stateCenter.roomCreateFlag,client_type:0===this.stateCenter.ENV?o.E_CLIENT_TYPE.ClientType_Webrtc:o.E_CLIENT_TYPE.ClientType_SmallProgram,third_token:e.thirdToken,user_count_limit:this.stateCenter.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",login_logic:this.stateCenter.isMultiRoom?3:1,proto_format:this.stateCenter.protoFormat};return this.sendMessage("",i,t,n,r)},e.prototype.logout=function(e,t,n){var r=e.isMulti?"quit":"logout",i={reserve:0};return"logout"==r&&(i.login_logic=this.stateCenter.isMultiRoom?3:1),this.sendMessage(r,i,t,n,void 0,{sessionID:e.sessionID,roomID:e.roomID,roomSessionID:e.roomSessionID})},e.prototype.heartBeat=function(e,t,n,r,i){return this.sendMessage("hb",{reserve:0},e,t,void 0,{sessionID:n,roomID:r,roomSessionID:i})},e.prototype.fetchUserList=function(e,t,n,r,i,o){return this.sendMessage("user_list",e,t,n,void 0,{sessionID:r,roomID:i,roomSessionID:o})},e.prototype.fetchUserListV2=function(e,t,n,r,i,o){return this.sendMessage("user_list_v2",e,t,n,void 0,{sessionID:r,roomID:i,roomSessionID:o})},e.prototype.fetchReliableMessage=function(e,t,n,r,i,o){return this.sendMessage("trans_fetch",e,t,n,void 0,{sessionID:r,roomID:i,roomSessionID:o})},e.prototype.sendReliableMessage=function(e,t,n,r,i,o){return this.sendMessage("trans",e,t,n,void 0,{sessionID:r,roomID:i,roomSessionID:o})},e.prototype.sendRoomMsg=function(e,t,n,r,i,o){return this.sendMessage("im_chat",e,t,n,void 0,{sessionID:r,roomID:i,roomSessionID:o})},e.prototype.sendCustomCommand=function(e,t,n,r,i,o){return this.sendMessage("custommsg",e,t,n,void 0,{sessionID:r,roomID:i,roomSessionID:o})},e.prototype.sendBigRoomMessage=function(e,t,n,r,i,o){return this.sendMessage("bigim_chat",e,t,n,void 0,{sessionID:r,roomID:i,roomSessionID:o})},e.prototype.sendRelayMessage=function(e,t,n,r,i,o){return this.sendMessage("relay",e,t,n,void 0,{sessionID:r,roomID:i,roomSessionID:o})},e.prototype.sendSignalCmd=function(e,t,n,r,i,o){return this.sendMessage("signal",e,t,n,void 0,{sessionID:r,roomID:i,roomSessionID:o})},e.prototype.sendPB=function(e){return this.service.isDisConnect()||this.stateCenter.networkState==o.ENUM_NETWORK_STATE.offline?(this.logger.error(a.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_PB+" socket is disconnected"),!1):this.service.sendPB(e)},e}();t.LiveRoomService=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSocketService=void 0;var r=n(0),i=n(1),o=function(){function e(e){this.socket=null,this.sendCommandList=new r.LinkedList,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.ENV=e}return e.prototype.createSocket=function(e){this.socket=r.createZegoWebSocket(e,this.ENV%2)},e.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},e.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},e.prototype.sendMessage=function(e,t,n,r,i){void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i={timeOut:6e3});var o={header:e,body:t},s={data:o,seq:e.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:i.timeOut,success:n,error:r},a=this.sendCommandList.push(s);return this.sendCommandMap[s.seq]=a,this.socket&&this.socket.send(JSON.stringify(o)),e.seq},e.prototype.sendPB=function(e){return this.socket&&this.socket.send(e),!0},e.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data&&t._data.error&&setTimeout((function(){t&&t._data&&t._data.error&&t._data.error(i.errorCodeList.TIMEOUT,t._data.data.header.seq,t._data.data.body.custom_msg)}),0),t=e.getFirst()},e.prototype.checkMessageListTimeout=function(e,t){for(var n=e.getFirst(),r=Date.parse(new Date+""),o=0;!(null==n||n._data&&n._data.sendTime+n._data.timeOut>r||(n._data&&delete t[n._data.data.header.seq],e.remove(n),n._data&&null==n._data.error||n._data&&n._data.sendTime+this.sendDataDropTimeout<r||setTimeout((function(){n&&n._data&&n._data.error&&n._data.error(i.errorCodeList.TIMEOUT,n._data.data.header.seq,n._data.data.body.custom_msg)}),0),++o>=this.sendDataCheckOnceCount));)n=e.getFirst()},e.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},e.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},e.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(n){t.socket.binaryType="arraybuffer",t.responseHandler(),e(n)})},e.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){var n="string"==typeof t.data?JSON.parse(t.data):t.data;e.onMessage(n)})},e.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},e.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},e.prototype.onMessage=function(e){},e}();t.ZegoSocketService=o},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoExpressWebRTM=t.ZegoDataReport=t.ZegoLogger=t.getSeq=t.getReportSeq=t.ZegoExpressWebRTMEngine=void 0;var r=n(20);Object.defineProperty(t,"ZegoExpressWebRTM",{enumerable:!0,get:function(){return r.ZegoExpressWebRTM}});var i=n(33),o=n(0),s=function(){function e(t,n,s){void 0===s&&(s=0),this.logger=new o.ZegoLogger(s),this.dataReport=new o.ZegoDataReport(this.logger),this.cloudSetting=new i.ZegoSetting,this.zegoWebRTM=new r.ZegoExpressWebRTM(t,n,this.logger,this.dataReport,this.cloudSetting,e.version,s)}return e.prototype.enableMultiRoom=function(e){return this.zegoWebRTM.enableMultiRoom(e)},e.prototype.loginRoom=function(e,t,n,r){return this.zegoWebRTM.loginRoom(e,t,n,r)},e.prototype.logoutRoom=function(e){return this.zegoWebRTM.logoutRoom(e)},e.prototype.renewToken=function(e,t){return this.zegoWebRTM.renewToken(e,t)},e.prototype.sendBarrageMessage=function(e,t){return this.zegoWebRTM.sendBarrageMessage(e,t)},e.prototype.sendBroadcastMessage=function(e,t){return this.zegoWebRTM.sendBroadcastMessage(e,t)},e.prototype.sendCustomCommand=function(e,t,n){return this.zegoWebRTM.sendCustomCommand(e,t,n)},e.prototype.setRoomExtraInfo=function(e,t,n){return this.zegoWebRTM.setRoomExtraInfo(e,t,n)},e.prototype.setLogConfig=function(e){return this.zegoWebRTM.setLogConfig(e)},e.prototype.setDebugVerbose=function(e){return this.zegoWebRTM.setDebugVerbose(e)},e.prototype.on=function(e,t){return this.zegoWebRTM.on(e,t)},e.prototype.getVersion=function(){return this.zegoWebRTM.getVersion()},e.prototype.off=function(e,t){return this.zegoWebRTM.off(e,t)},e.prototype.loginHall=function(e,t,n){return this.zegoWebRTM.loginHall(e,t,n)},e.prototype.logoutHall=function(){return this.zegoWebRTM.logoutHall()},e.prototype.enterRoom=function(e,t){return this.zegoWebRTM.enterRoom(e,t)},e.prototype.leaveRoom=function(){return this.zegoWebRTM.leaveRoom()},e.use=function(e){r.ZegoExpressWebRTM.use(e)},e.version=o.PROTO_VERSION,e}();t.ZegoExpressWebRTMEngine=s;var a=n(0);Object.defineProperty(t,"getReportSeq",{enumerable:!0,get:function(){return a.getReportSeq}}),Object.defineProperty(t,"getSeq",{enumerable:!0,get:function(){return a.getSeq}}),Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return a.ZegoLogger}}),Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return a.ZegoDataReport}})},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoExpressWebRTM=void 0;var s=n(0),a=n(1),c=n(2),l=n(0),u=n(23),d=n(24),h=n(26),p=n(27),f=n(28),g=n(30),m=n(3),_=n(4),v=n(11),E=n(31),A=n(32),y=function(){function e(e,t,n,r,i,o,a){var d=this;this.logger=n,this.dataReport=r,this.cloudSetting=i,this.version=o,this.stateCenter=new p.StateCenter(this.logger,this.dataReport),this.stateCenter.ENV=a,this.getReportSeq=l.getReportSeq,this.getSeq=s.getSeq,this.proxyRes=c.ClientUtil.proxyRes,this.actionSuccessCallback=c.ClientUtil.actionSuccessCallback,this.actionErrorCallback=c.ClientUtil.actionErrorCallback,this.getServerError=c.ClientUtil.getServerError,this.generateRandumNumber=c.ClientUtil.generateRandumNumber,this.unregisterCallback=c.ClientUtil.unregisterCallback,this.logReportCallback=c.ClientUtil.logReportCallback,this.registerCallback=c.ClientUtil.registerCallback;var h=l.getReportSeq();if(this.dataReport.newReport(h),(0==a||1==a)&&this.setDebug(t),c.ClientUtil.checkConfigParam(e,t,this.logger)){if(this.stateCenter.appid=e,this.stateCenter.configOK=!0,this.stateCenter.sdKVersion=this.version,0==a||1==a){this.stateCenter.settingConfig=new A.ZegoSettingConfig,this.cloudSetting.setLog(this.logger),this.cloudSetting.init({product:u.CLOUD_SETTING.product,appID:e,urls:u.CLOUD_SETTING.URL,pollingFreq:u.CLOUD_SETTING.POLLING_FREQ,env:a,pollingNotify:function(e,t){d.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR," setting file changed "+e+" "+JSON.stringify(t)),d.stateCenter.actionListener("_cloudSettingNotify",e,t)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment});var f="";0===a?f="rtc":1===a&&(f="xcx"),this.cloudSetting.setEnvVariable("environment",f);var y=this.cloudSetting.getSettingCache(u.INIT),S=this.cloudSetting.getSettingCache(u.ROOM_BASIC);Promise.all([y,S]).then((function(e){var t=null==e?void 0:e[0];d.stateCenter.settingConfig.setSetting(null==t?void 0:t.setting);var n=d.stateCenter.settingConfig.getSetting("remote_log_level",!0);n&&(d.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR+"  setting remote_log_level "+n),d.logger.setRemoteLogLevel(n));var r=null==e?void 0:e[1];d.stateCenter.settingConfig.setSetting(null==r?void 0:r.setting);var i=l.getReportSeq();d.dataReport.newReport(i,_.ZegoRTMLogEvent.kZegoTaskCloudSettingCache.event),d.dataReport.addMsgInfo(i,{files:[{name:u.INIT,content:null==t?void 0:t.setting,versions:null==t?void 0:t.versions},{name:u.ROOM_BASIC,content:null==r?void 0:r.setting,versions:null==r?void 0:r.versions}]}),d.dataReport.uploadReport(i)})).catch((function(e){d.logger.warn(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR+"  initConfig "+JSON.stringify(e))})),"string"==typeof t?(this.stateCenter.server=t,this.stateCenter.serverBak=t):Array.isArray(t)&&t.length>0&&(this.stateCenter.server=t[0],this.stateCenter.serverBak=t[1]||t[0]),this.service=new v.LiveRoomService(this.stateCenter,this.logger,this)}else 2!=a&&3!=a||(this.service=new E.LiveRoomPrivateService(this.stateCenter,this.logger,this),this.module=new g.LiveRoomModules(this.stateCenter,this.logger,this.dataReport,this.service,this),this.stateCenter.priModules=this.module,this.module._dispatchServer=t,this.stateCenter.type="PRIVATE");if(0==a||2==a)this.bindWindowListener(),this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR+"  "+navigator.appVersion),this.stateCenter.networkState=navigator?navigator.onLine?s.ENUM_NETWORK_STATE.online:s.ENUM_NETWORK_STATE.offline:s.ENUM_NETWORK_STATE.online,this.dataReport.addMsgInfo(h,{system_info:_.ZegoRTMLogEvent.kZegoTaskInitSetting.system_info});else if(1==a||3==a){this.bindWxListener();try{var b=wx.getSystemInfoSync(),C={brand:b.brand,model:b.model,system:b.system,platform:b.platform,version:b.version,SDKVersion:b.SDKVersion};this.dataReport.addMsgInfo(h,{system_info:C})}catch(e){this.logger.warn(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR+" get system info error")}}this.logger.setSessionInfo(this.stateCenter.appid,"","","","",this.version)}else this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR+" init sdk error"),this.dataReport.addMsgInfo(h,_.ZegoRTMLogEvent.kZegoTaskInitSetting.error.kInvalidParamError);this.dataReport.uploadReport(h,_.ZegoRTMLogEvent.kZegoTaskInitSetting.event)}return Object.defineProperty(e.prototype,"modules",{get:function(){return{service:this.service}},enumerable:!1,configurable:!0}),e.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i),n=c.ClientUtil.getBrowser(),r=t?"pagehide":"Firefox"===n?"beforeunload":"unload";window.addEventListener(r,(function(){e.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_BIND_WINDOW_LISTENER+" "+r),"PUBLIC"===e.stateCenter.type?e.logoutRoom():e.leaveRoom(),e.logoutRoom()})),window.addEventListener("offline",(function(){e.netOffLineHandle()})),window.addEventListener("online",(function(){e.netOnLineHandle()}))},e.prototype.bindWxListener=function(){var e=this;wx.onNetworkStatusChange((function(t){t.isConnected?e.netOnLineHandle():e.netOffLineHandle()}))},e.prototype.netOnLineHandle=function(){var e=this;this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_BIND_WINDOW_LISTENER+"network is online"),this.stateCenter.networkState=s.ENUM_NETWORK_STATE.online,this.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.service.isDisConnect()?t.roomTryHandler.active():t.roomTryHandler&&(t.roomTryHandler.stopMaxTime(),t.roomHandler.roomStateHandle("CONNECTED",{code:0,msg:""}))}))},e.prototype.netOffLineHandle=function(){this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_BIND_WINDOW_LISTENER+" network is broken"),this.stateCenter.networkState=s.ENUM_NETWORK_STATE.offline,this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.onactive=function(t,n){e.roomHandler.disconnectedHandle(n)},e.roomTryHandler.startMaxTime(),e.roomHandler.roomStateHandle("CONNECTING",a.errorCodeList.NETWORK_BROKEN))}))},e.prototype.setLogConfig=function(e){this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SET_LOG_CONFIG+" call");var t=l.getReportSeq();if(this.dataReport.newReport(t),e.logLevel&&["debug","info","warn","error","report","disable"].includes(e.logLevel)&&(this.logger.setLogLevel(e.logLevel),this.dataReport.addMsgInfo(t,{log_level:_.ZegoRTMLogEvent.kZegoTaskSetLog.log_level(e.logLevel)})),e.remoteLogLevel&&["debug","info","warn","error","report","disable"].includes(e.remoteLogLevel)&&this.dataReport.addMsgInfo(t,{remote_log_level:_.ZegoRTMLogEvent.kZegoTaskSetLog.remote_log_level(e.remoteLogLevel)}),"string"==typeof e.logURL&&(e.logURL.startsWith("wss://")||e.logURL.startsWith("https://")))this.logger.setLogServer(e.logURL),this.dataReport.addMsgInfo(t,{log_url:_.ZegoRTMLogEvent.kZegoTaskSetLog.log_url(e.logURL)}),this.dataReport.uploadReport(t,_.ZegoRTMLogEvent.kZegoTaskSetLog.event);else if(e.logURL)return this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SET_LOG_CONFIG+"log url must be a wss or https url"),this.dataReport.addMsgInfo(t,_.ZegoRTMLogEvent.kZegoTaskSetLog.error.kInvalidParamError),this.dataReport.uploadReport(t,_.ZegoRTMLogEvent.kZegoTaskSetLog.event),!1;return this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SET_LOG_CONFIG+" call success"),!0},e.prototype.setDebugVerbose=function(e){var t=l.getReportSeq();this.dataReport.newReport(t),"boolean"==typeof e&&(this.stateCenter.debug=e,this.stateCenter.debugCustom=!0,this.dataReport.addMsgInfo(t,{debug:_.ZegoRTMLogEvent.kZegoTaskSetDebug.debug(e?"true":"false")})),this.dataReport.uploadReport(t,_.ZegoRTMLogEvent.kZegoTaskSetDebug.event),this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SET_DEBUG_VERBOSE+" call success")},e.prototype.setDebug=function(e){"string"==typeof e&&e.indexOf("wss")>-1?this.stateCenter.debug=c.ClientUtil.isTestEnv(e):Array.isArray(e)&&e.length>0&&e.every((function(e){return"string"==typeof e&&e.indexOf("wss")>-1}))?this.stateCenter.debug=c.ClientUtil.isTestEnv(e[0])||c.ClientUtil.isTestEnv(e[1]):this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR+" server wrong"),this.stateCenter.testEnvironment=this.stateCenter.debug},e.prototype.renewToken=function(e,t){var n,r=this,i=l.getReportSeq();if(this.dataReport.newReport(i),void 0!==t&&("string"!=typeof t||""==t))return this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" roomID must be string and no empty"),!1;var o=this.getRoomModules(t)||this.stateCenter.roomModulesList[0];return o?"string"==typeof e&&o.roomTryHandler?(e===o.roomTryHandler.token?this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" token has not changed"):(this.stateCenter.configRoomAuth?this.service.sendMessage("renew_token",{token:e},(function(t){var n,i;null===(n=o.roomTryHandler)||void 0===n||n.renewLocalToken(e,null===(i=null==t?void 0:t.body)||void 0===i?void 0:i.token_remain_time),r.stateCenter.configCheckToken=!0,r.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" "+JSON.stringify(t))}),(function(t){var n,i,s=null===(n=null==t?void 0:t.body)||void 0===n?void 0:n.err_code;s&&1000002014===s?(r.stateCenter.configCheckToken=!1,null===(i=o.roomTryHandler)||void 0===i||i.renewLocalToken(e),r.logger.warn(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" "+JSON.stringify(t))):r.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" "+JSON.stringify(t))}),void 0,{sessionID:o.sessionID,roomID:t,roomSessionID:o.roomSessionID}):null===(n=o.roomTryHandler)||void 0===n||n.renewLocalToken(e),this.cloudSetting.setToken(e)),this.dataReport.uploadReport(i,_.ZegoRTMLogEvent.kZegoTaskReNewToken.event),!0):"string"!=typeof e||o.roomTryHandler?(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" token must be string and not empty"),this.dataReport.addMsgInfo(i,{error:_.ZegoRTMLogEvent.kZegoTaskReNewToken.error.INPUT_PARAM.code,message:_.ZegoRTMLogEvent.kZegoTaskReNewToken.error.INPUT_PARAM.msg+" param token error"}),this.dataReport.uploadReport(i,_.ZegoRTMLogEvent.kZegoTaskReNewToken.event),!1):(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" calling must after loginRoom"),this.dataReport.addMsgInfo(i,{error:_.ZegoRTMLogEvent.kZegoTaskReNewToken.error.NOT_LOGIN.code,message:_.ZegoRTMLogEvent.kZegoTaskReNewToken.error.NOT_LOGIN.msg}),this.dataReport.uploadReport(i,_.ZegoRTMLogEvent.kZegoTaskReNewToken.event),!1):(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_RENEWTOKEN+" calling must after loginRoom"),this.dataReport.addMsgInfo(i,{error:_.ZegoRTMLogEvent.kZegoTaskReNewToken.error.NOT_LOGIN.code,message:_.ZegoRTMLogEvent.kZegoTaskReNewToken.error.NOT_LOGIN.msg}),this.dataReport.uploadReport(i,_.ZegoRTMLogEvent.kZegoTaskReNewToken.event),!1)},e.prototype.setCloudSettingURLs=function(e){var t=this;this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SET_CLOUD_SETTING_URLS+" call "),Array.isArray(e)&&e.length>0&&e.every((function(e){return"string"==typeof e&&e.indexOf("http")>-1}))&&this.cloudSetting.init({product:u.CLOUD_SETTING.product,appID:this.stateCenter.appid,urls:e,pollingFreq:u.CLOUD_SETTING.POLLING_FREQ,env:this.stateCenter.ENV,pollingNotify:function(e,n){t.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SET_CLOUD_SETTING_URLS," setting file changed "+e+" "+JSON.stringify(n)),t.stateCenter.actionListener("_cloudSettingNotify",e,n)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment})},e.prototype.loginRoom=function(e,t,n,a){var c=this;return new Promise((function(l,u){return r(c,void 0,void 0,(function(){var r,c,p,g,v,E,A=this;return i(this,(function(i){switch(i.label){case 0:return 1!==this.stateCenter.ENV?[3,2]:[4,new Promise((function(e){wx.getNetworkType({success:function(t){A.stateCenter.networkState="none"===t.networkType?s.ENUM_NETWORK_STATE.offline:s.ENUM_NETWORK_STATE.online,e()},fail:function(t){A.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_CONSTRUCTOR+" network "+JSON.stringify(t)),A.stateCenter.networkState=s.ENUM_NETWORK_STATE.online,e()}})}))];case 1:i.sent(),i.label=2;case 2:return r=this.loginReport(l,u,t,a),c=r.interResolve,p=r.interReject,!(a=a||{}).maxMemberCount&&(a.maxMemberCount=0),(g=h.checkParams({roomID:{order:0,value:e,rules:[{name:h.RULE_PARAM_NAME.NOT_EMPTY,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.ROOM_ID_NULL},{name:h.RULE_PARAM_NAME.TYPE_STRING,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM,extMsg:"roomID must be string"},{name:h.RULE_PARAM_NAME.MAX_LENGTH_128,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.ROOM_ID_TOO_LONG},{name:h.RULE_PARAM_NAME.ILLEGAL_CHARACTERS,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.ROOM_ID_INVALID_CHARACTER}]},token:{order:1,value:t,rules:[{name:h.RULE_PARAM_NAME.NOT_EMPTY,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM},{name:h.RULE_PARAM_NAME.TYPE_STRING,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM}]},user:{order:2,value:n,rules:[{name:h.RULE_PARAM_NAME.NOT_EMPTY,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM,extMsg:" param user error."},{name:h.RULE_PARAM_NAME.TYPE_OBJECT,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM,extMsg:" param user error."}]},"user.userID":{order:3,value:n.userID,rules:[{name:h.RULE_PARAM_NAME.NOT_EMPTY,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.USER_ID_NULL,extMsg:" param user error."},{name:h.RULE_PARAM_NAME.TYPE_STRING,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM,extMsg:" param userID error."},{name:h.RULE_PARAM_NAME.MAX_LENGTH_100,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.USER_ID_TOO_LONG},{name:h.RULE_PARAM_NAME.ILLEGAL_CHARACTERS,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.USER_ID_INVALID_CHARACTER}]},"user.userName":{order:4,value:n.userName,rules:[{name:h.RULE_PARAM_NAME.TYPE_STRING,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM,extMsg:" userName must be string."},{name:h.RULE_PARAM_NAME.MAX_LENGTH_256,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.USER_NAME_TOO_LONG}]},config:{order:5,value:a,rules:[]},"config.maxMemberCount":{order:6,value:a.maxMemberCount,rules:[{name:h.RULE_PARAM_NAME.TYPE_INTEGER,error:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INPUT_PARAM,extMsg:" maxMemberCount must be integer number."}]}},{action:m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGIN_ROOM,logger:this.logger}))!==h.RULE_SUCCESS?(p(g.error,g.extMsg),[2]):(this.cloudSetting.setUserID(n.userID),this.cloudSetting.setToken(t),this.cloudSetting.activePolling(),this.stateCenter.onListener("roomLoginResponse",(function(e){A.stateCenter.settingFetched||(A.getCloudSetting(),A.stateCenter.actionListener("_settingCanFetch"),A.stateCenter.settingFetched=!0)})),(v=this.getRoomModules(e))?(p(_.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.REPEATEDLY_LOGIN),[2]):(v=new f.LiveRoomModules(e,this.stateCenter,this.logger,this.dataReport,this.service,this),this.stateCenter.roomModulesList.length>0&&1==this.stateCenter.isMultiRoom?v.isMulti=!0:o([],this.stateCenter.roomModulesList).forEach((function(e){return e.roomHandler.logout()})),this.stateCenter.roomModulesList.push(v),v.roomTryHandler||(v.roomTryHandler=new d.RetryRoomHandler(this.logger,this.stateCenter,v)),E=this.stateCenter.settingConfig.getSetting("room_server",!0),Array.isArray(E)&&E.length>0&&(this.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGIN_ROOM," setting room_server "+E),this.stateCenter.server=E[0],this.stateCenter.serverBak=E[1]||E[0]),v.roomTryHandler.init(this.stateCenter.roomRetryTime),v.roomTryHandler.initRoom(v.roomHandler,e,t,n,this.stateCenter.server,this.stateCenter.serverBak,a),v.roomTryHandler.setLoginRoomCallback(c,p),v.roomTryHandler.active(!0),this.stateCenter.setMultiRoom=!0,[2]))}}))}))}))},e.prototype.getCloudSetting=function(){var e=this;this.cloudSetting.fetchMultiSetting([u.INIT,u.ROOM_BASIC]).then((function(t){var n;e.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGIN_ROOM," settingConfig "+JSON.stringify(t)),e.stateCenter.settingConfig.setSetting(null===(n=null==t?void 0:t[u.INIT])||void 0===n?void 0:n.setting,["remote_log_level"]);var r=e.stateCenter.settingConfig.getSetting("remote_log_level",!0);r&&(e.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGIN_ROOM+"  setting remote_log_level "+r),e.logger.setRemoteLogLevel(r))})).catch((function(t){e.logger.warn(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGIN_ROOM," settingConfig "+JSON.stringify(t))})),this.stateCenter.onListener("_cloudSettingNotify",(function(t,n){var r=l.getReportSeq();e.dataReport.newReport(r,_.ZegoRTMLogEvent.kZegoTaskCloudSettingRefresh.event);var i=e.cloudSetting.getEnvVariables();if(e.dataReport.addMsgInfo(r,{params:i,files:[{name:t,content:n.setting,versions:n.versions}]}),e.dataReport.uploadReport(r),t===u.INIT){e.stateCenter.settingConfig.setSetting(null==n?void 0:n.setting,["remote_log_level"]);var o=e.stateCenter.settingConfig.getSetting("remote_log_level");o&&(e.logger.info(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGIN_ROOM," setting remote_log_level "+o),e.logger.setRemoteLogLevel(o))}}))},e.prototype.cloudReportNotify=function(e,t,n){if("request_start"===t){var r=l.getReportSeq();this.dataReport.newReport(r,_.ZegoRTMLogEvent.kZegoTaskCloudSettingRequest.event),this.stateCenter.settingConfig.requestList[e]=r}else if("request_end"===t){var i=this.stateCenter.settingConfig.requestList[e];i&&(this.dataReport.addMsgInfo(i,{request_detail:null==n?void 0:n.reportData,files:null==n?void 0:n.files,error:null==n?void 0:n.code,request_params:null==n?void 0:n.params}),this.dataReport.uploadReport(i))}},e.prototype.loginReport=function(e,t,n,r){var i=this;0!==this.stateCenter.reportSeqList.login&&(this.dataReport.uploadReport(this.stateCenter.reportSeqList.login),this.stateCenter.reportSeqList.login=0,c.ClientUtil.unregisterCallback(_.ZegoRTMLogEvent.kZegoTaskLoginRoom.event,this.stateCenter.reportList));var o=l.getReportSeq();this.stateCenter.reportSeqList.login=o,this.dataReport.newReport(o,_.ZegoRTMLogEvent.kZegoTaskLoginRoom.event);var s=this.cloudSetting.getEnvVariable("deviceid");return this.dataReport.addMsgInfo(o,{deviceid:s}),"string"==typeof n&&this.dataReport.addMsgInfo(o,{token:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.token(n),isMulti:this.stateCenter.isMultiRoom}),r&&(r.userUpdate&&"boolean"==typeof r.userUpdate&&this.dataReport.addMsgInfo(o,{user_update:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.user_update(r.userUpdate+"")}),r.maxMemberCount&&"number"==typeof r.maxMemberCount&&this.dataReport.addMsgInfo(o,{max_member_count:_.ZegoRTMLogEvent.kZegoTaskLoginRoom.max_member_count(r.maxMemberCount+"")})),c.ClientUtil.logReportCallback(_.ZegoRTMLogEvent.kZegoTaskLoginRoom.event,this.dataReport,o,this.stateCenter.reportList),{interResolve:function(t){i.dataReport.uploadReport(o),i.stateCenter.reportSeqList.login=0,c.ClientUtil.unregisterCallback(_.ZegoRTMLogEvent.kZegoTaskLoginRoom.event,i.stateCenter.reportList),e(t)},interReject:function(e,n){var r,s;void 0===n&&(n=""),e.code<2e9&&e.code>1e9||e.code<1e6?(r=c.ClientUtil.decodeServerError(e.code,e.msg),s=c.ClientUtil.getLiveRoomError(e.code)):r={code:e.code,message:e.msg},r&&i.dataReport.addMsgInfo(o,{error:r.code,message:r.message+n}),i.dataReport.uploadReport(o),i.stateCenter.reportSeqList.login=0,c.ClientUtil.unregisterCallback(_.ZegoRTMLogEvent.kZegoTaskLoginRoom.event,i.stateCenter.reportList),s&&a.errorCodeList[s]&&(e.code=a.errorCodeList[s].code),e.code&&e.msg&&""!==n?t({code:e.code,msg:e.msg+n}):t(e)}}},e.prototype.logoutRoom=function(e){var t=l.getReportSeq();if(this.dataReport.newReport(t),this.dataReport.addMsgInfo(t,{roomid:e,isMulti:this.stateCenter.isMultiRoom}),void 0===e)o([],this.stateCenter.roomModulesList).forEach((function(e){return e.roomHandler.logout(!0)})),this.cloudSetting.uninit();else{if("string"!=typeof e||""==e)return this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGOUT_ROOM+" roomID must be string and not empty"),this.dataReport.addMsgInfo(t,{error:_.ZegoRTMLogEvent.kZegoTaskLogoutRoom.error.INPUT_PARAM.code,message:_.ZegoRTMLogEvent.kZegoTaskLogoutRoom.error.INPUT_PARAM.msg+" param roomID error"}),void this.dataReport.uploadReport(t,_.ZegoRTMLogEvent.kZegoTaskLogoutRoom.event);var n=this.getRoomModules(e);n?(n.roomHandler.logout(),0===this.stateCenter.roomModulesList.length&&this.cloudSetting.uninit(),this.dataReport.uploadReport(t,_.ZegoRTMLogEvent.kZegoTaskLogoutRoom.event)):(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_LOGOUT_ROOM+" room not exist"),this.dataReport.addMsgInfo(t,{error:_.ZegoRTMLogEvent.kZegoTaskLogoutRoom.error.ROOM_NOT_EXIST.code,message:_.ZegoRTMLogEvent.kZegoTaskLogoutRoom.error.ROOM_NOT_EXIST.msg}),this.dataReport.uploadReport(t,_.ZegoRTMLogEvent.kZegoTaskLogoutRoom.event))}},e.prototype.loginHall=function(e,t,n){var o=this;return new Promise((function(e,t){return r(o,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))}))},e.prototype.loginHallReport=function(e,t,n,r){},e.prototype.logoutHall=function(){},e.prototype.enterRoom=function(e,t){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype.leaveRoom=function(){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype.sendCustomCommand=function(e,t,n){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype._sendCustomCommand=function(e,t,n){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype.sendBroadcastMessage=function(e,t){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype._sendBroadcastMessage=function(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=1),new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype.setRoomExtraInfo=function(e,t,n){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype._setRoomExtraInfo=function(e,t,n){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype.sendBarrageMessage=function(e,t){return new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype._sendBarrageMessage=function(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=1),new Promise((function(e,t){console.error(s.MODULE_TIPS.MESSAGE),t()}))},e.prototype.sendRelayMessage=function(e,t,n,r,i){console.error(s.MODULE_TIPS.MESSAGE)},e.prototype.requestJoinLive=function(e,t,n,r,i){return console.error(s.MODULE_TIPS.MESSAGE),!1},e.prototype.inviteJoinLive=function(e,t,n,r,i){return console.error(s.MODULE_TIPS.MESSAGE),!1},e.prototype.endJoinLive=function(e,t,n,r){return console.error(s.MODULE_TIPS.MESSAGE),!1},e.prototype.respondJoinLive=function(e,t,n,r,i){return console.error(s.MODULE_TIPS.MESSAGE),!1},e.prototype.getVersion=function(){return this.version},e.prototype.setSdkBizVersion=function(e){"string"==typeof e&&""!==e&&(this.stateCenter.bizVersion=e)},e.prototype.on=function(e,t){return this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_ON+" listener callBack must be funciton"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),!0):(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_ON+" event "+e+" no found"),!1)},e.prototype.off=function(e,t){if(!this.stateCenter.listenerList[e])return this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_OFF+" listener no found"),!1;var n=this.stateCenter.listenerList[e];return t?n.splice(n.indexOf(t),1):this.stateCenter.listenerList[e]=[],!0},e.prototype._on=function(e,t){return this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_ON+" listener callBack must be funciton"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),!0):(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_ON+" event "+e+" no found"),!1)},e.prototype._off=function(e,t){if(!this.stateCenter.listenerList[e])return this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_OFF+" listener no found"),!1;var n=this.stateCenter.listenerList[e];return t?n.splice(n.indexOf(t),1):this.stateCenter.listenerList[e]=[],!0},e.prototype.isTestEnvironment=function(){return this.stateCenter.testEnvironment},e.prototype.isLogin=function(e){var t=this.getRoomModules(e)||this.stateCenter.roomModulesList[0];return!!t&&t.isLogin()},e.prototype.getMultiRoom=function(){return this.stateCenter.isMultiRoom},e.prototype.getAppID=function(){return this.stateCenter.appid},e.prototype.getUserID=function(){return this.stateCenter.idName},e.prototype.getToken=function(e){return(this.getRoomModules(e)||this.stateCenter.roomModulesList[0]).token},e.prototype.getAnType=function(){return this.module.anType},e.prototype.getRoomSid=function(){return this.module.roomSid},e.prototype.setRoomCreateFlag=function(e){this.stateCenter.roomCreateFlag=e},e.prototype.setRole=function(e){this.stateCenter.role=e},e.prototype.getSessionId=function(e){var t=this.getRoomModules(e)||this.stateCenter.roomModulesList[0];return t?t.sessionID:"0"},e.prototype.getRoomSessionID=function(e){var t=this.getRoomModules(e)||this.stateCenter.roomModulesList[0];return t?t.roomSessionID:"0"},e.prototype.enableMultiRoom=function(e){var t=l.getReportSeq();return this.dataReport.newReport(t,_.ZegoRTMLogEvent.kZegoEnableMultiRoom.event),this.dataReport.addMsgInfo(t,{isMulti:e}),"boolean"!=typeof e?(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_ENABLE_MULTI_ROOM+" param must be boolean"),this.dataReport.uploadReport(t,void 0,_.ZegoRTMLogEvent.kZegoEnableMultiRoom.error.kAlreadyLoginError),!1):this.stateCenter.roomModulesList.length>0||this.stateCenter.setMultiRoom?(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_ENABLE_MULTI_ROOM+" multi room can only be set once before first login"),this.dataReport.uploadReport(t,void 0,_.ZegoRTMLogEvent.kZegoEnableMultiRoom.error.kAlreadyLoginError),!1):(this.dataReport.uploadReport(t),this.stateCenter.isMultiRoom=e,this.stateCenter.setMultiRoom=!0,!0)},e.prototype.getRoomModules=function(e){return this.stateCenter.roomModulesList.find((function(t){return t.roomID==e}))},e.prototype.dispatchBodyData=function(){return{seq:1,timestamp:(new Date).getTime,app_id:this.stateCenter.appid,user_id:this.stateCenter.idName,user_name:this.stateCenter.nickName,net_type:2,device_id:this.module.deviceID,login_token:this.module.hallToken,an_type:this.module.anType}},e.use=function(t){switch(t.type){case"message":t.install(e,f.LiveRoomModules,v.LiveRoomService,g.LiveRoomModules,E.LiveRoomPrivateService);break;case"live":t.install(e,f.LiveRoomModules,v.LiveRoomService);break;case"privates":t.install(e,g.LiveRoomModules,E.LiveRoomPrivateService)}},e.prototype.resetRoomTokenTimer=function(e,t){var n=this.getRoomModules(e)||this.stateCenter.roomModulesList[0];n&&t&&t>0&&n.roomHandler.resetTokenTimer(1e3*t-this.stateCenter.local_time_deviation)},e.prototype.setProtoFormat=function(e){if(void 0===e&&(e="json"),!["json","pb"].includes(e))throw new Error("Failed to execute 'setProtoFormat': Arguments 'format' must be 'json' or 'pb'.");this.stateCenter.protoFormat=e},e.prototype.setSdkLoginRelateService=function(e){Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))&&(this.stateCenter.relateService=e)},e.prototype.sendMessageByService=function(e,t,n,r,i,o){return this.service.sendMessage(e,t,n,r,i,o)},e.prototype.getHeader=function(e){var t=this.stateCenter.roomModulesList[0];if(t&&t.isLogin()){var n=t.roomID,r=t.sessionID,i=t.roomSessionID;return this.service.getHeader(e,r,n,i)}this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_GET_HEADER+" room no found or no login")},e.prototype.sendPB=function(e){return e instanceof Uint8Array?this.service.sendPB(e):(this.logger.error(m.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_PB+" type error"),!1)},e.prototype.onPushBizChannel=function(e){e&&this.service.on("push_biz_channel",e)},e.prototype.getRoomID=function(){return this.stateCenter.roomid},e.prototype.getServerTimeOffset=function(){return this.stateCenter.serverTimeOffset},e}();t.ZegoExpressWebRTM=y},function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.E_CLIENT_TYPE=t.ENUM_LOG_LEVEL=t.ENUM_REMOTE_TYPE=t.ZEGO_ENV=t.ZEGO_BROWSER_TYPE=void 0,function(e){e[e.IE=0]="IE",e[e.FIREFOX=1]="FIREFOX",e[e.CHROME=2]="CHROME",e[e.SAFARI=3]="SAFARI",e[e.OPERA=4]="OPERA",e[e.WEIXIN=5]="WEIXIN",e[e.WEIXINMINI=6]="WEIXINMINI",e[e.UNKOWN=7]="UNKOWN"}(t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={})),function(e){e[e.BROWSER=0]="BROWSER",e[e.WEIXINMINI=1]="WEIXINMINI"}(t.ZEGO_ENV||(t.ZEGO_ENV={})),function(e){e[e.DISABLE=0]="DISABLE",e[e.WEBSOCKET=1]="WEBSOCKET",e[e.HTTPS=2]="HTTPS"}(t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={})),t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},function(e){e[e.ClientType_None=0]="ClientType_None",e[e.ClientType_H5=1]="ClientType_H5",e[e.ClientType_SmallPragram=2]="ClientType_SmallPragram",e[e.ClientType_Webrtc=3]="ClientType_Webrtc"}(t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStateCenter=void 0;var r=function(){function e(){this._testEnvironment=!0,this._ENV=0,this._debug=!0}return e.getInstance=function(){return e.instance||(e.instance=new e,e.instance.init()),e.instance},e.prototype.init=function(){},Object.defineProperty(e.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ENV",{get:function(){return this._ENV},set:function(e){this._ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e},enumerable:!1,configurable:!0}),e.instance=new e,e}();t.LoggerStateCenter=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=void 0;var r=n(0),i=function(){function e(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}return e.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},e.prototype.onopen=function(e){},e.prototype.onerror=function(e){},e.prototype.onclose=function(e){},e.prototype.onmessage=function(e){},e.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},e.prototype.close=function(){this._websocket&&this._websocket.close()},e}();t.ZegoWeiXinMiniWebSocket=i,t.createZegoWebSocket=function(e,t){return t%2===r.ZEGO_ENV.BROWSER?new WebSocket(e):new i(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStateCenter=t.createZegoWebSocket=t.ZegoDataReport=t.ZegoLogger=void 0;var r=n(1);Object.defineProperty(t,"LoggerStateCenter",{enumerable:!0,get:function(){return r.LoggerStateCenter}});var i=n(2);Object.defineProperty(t,"createZegoWebSocket",{enumerable:!0,get:function(){return i.createZegoWebSocket}});var o=n(4);Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return o.ZegoDataReport}});var s=n(5);Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return s.ZegoLogger}})},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoDataReport=void 0;var i=function(){function e(e){this.dataStatistics={},this.logger=e}return e.prototype.newReport=function(e,t){this.dataStatistics[e]={event_time:Date.now(),time_consumed:0,seq:e,error:0,message:"success",event:t,events:[]}},e.prototype.addMsgExt=function(e,t){this.dataStatistics[e]?this.dataStatistics[e].msg_ext=t:console.warn(e+" not exist")},e.prototype.addMsgInfo=function(e,t){this.dataStatistics[e]?Object.assign(this.dataStatistics[e],t):console.warn(e+" not exist")},e.prototype.eventStart=function(e,t){this.dataStatistics[e]?null!=this.dataStatistics[e].events?this.dataStatistics[e].events.push({event:t,event_time:Date.now(),time_consumed:0}):this.logger.warn("zd.es.0 no events"):this.logger.warn("zd.es.0 no seq match")},e.prototype.eventEnd=function(e,t,n){if(this.dataStatistics[e]){var r=this.dataStatistics[e].events;if(r&&0!==r.length){for(var i=r.length-1;i>=0;i--)if(r[i].event==t&&0==r[i].time_consumed){r[i].time_consumed=Date.now()-r[i].event_time;break}}else this.logger.info("zd.ee.0 no events")}else this.logger.info("zd.ee.0 no seq match")},e.prototype.eventEndWithMsg=function(e,t,n){if(this.dataStatistics[e]){var i=this.dataStatistics[e].events;if(i){for(var o=i.length-1;o>=0;o--)if(i[o].event==t&&0==i[o].time_consumed){i[o].time_consumed=Date.now()-i[o].event_time,null==i[o].msg_ext&&(i[o].msg_ext={}),i[o].msg_ext=r({},n);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},e.prototype.eventEndWithMsgInfo=function(e,t,n){if(this.dataStatistics[e]){var r=this.dataStatistics[e].events;if(r){for(var i=r.length-1;i>=0;i--)if(r[i].event==t&&0==r[i].time_consumed){r[i].time_consumed=Date.now()-r[i].event_time,Object.assign(r[i],n);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},e.prototype.addEventInfo=function(e,t,n,r){if(this.dataStatistics[e]){var i=this.dataStatistics[e].events;if(null!=i){for(var o=i.length-1;o>=0;o--)if(i[o].event==t&&null!=i[o].time_consumed){null==i[o].msg_ext?i[o].msg_ext={}:i[o].msg_ext&&(i[o].msg_ext[n]=r);break}}else this.logger.warn("zd.aei.0 no events")}else this.logger.warn("zd.aei.0 no seq match")},e.prototype.addEventMsg=function(e,t,n,r){if(this.dataStatistics[e]){var i=this.dataStatistics[e].events;if(null!=i){for(var o=i.length-1;o>=0;o--)if(i[o].event==t){i[o][n]=r;break}}else this.logger.warn("zd.aem.0 no events")}else this.logger.warn("zd.aem.0 no seq match")},e.prototype.addEvent=function(e,t,n){this.dataStatistics[e]?this.dataStatistics[e].events&&(n?this.dataStatistics[e].events.push({event:t,event_time:Date.now(),msg_ext:n}):this.dataStatistics[e].events.push({event:t,event_time:Date.now()})):this.logger.warn("zd.ae.0 no seq match")},e.prototype.uploadReport=function(e,t,n,r){var i=this.dataStatistics[e];null!=i&&(t&&(i.event=t),i.time_consumed=Date.now()-i.event_time,n&&this.addMsgInfo(e,{error:n.code,message:n.message||n.msg+" "+(r||"")}),this.logger.report(i),delete this.dataStatistics[e])},e}();t.ZegoDataReport=i},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLogger=void 0;var i=n(0),o=n(2),s=n(1),a=n(6),c=function(){function e(e){this.logLevel=i.ENUM_LOG_LEVEL.INFO,this.logRemoteLevel=0,this.websocket=null,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCache=[],this.logCacheSend=[],this.logCacheMax=100,this.existUserID=!1,this.stateCenter=s.LoggerStateCenter.getInstance(),this.env=e}return e.prototype.setLogLevel=function(e){var t=i.ENUM_LOG_LEVEL[e];return void 0!==t&&(this.logLevel=t,!0)},e.prototype.setRemoteLogLevel=function(e){var t=i.ENUM_LOG_LEVEL[e];return void 0!==t&&(this.logRemoteLevel=t,!0)},e.prototype.setSessionInfo=function(e,t,n,r,i,o){this.appid=e,this.roomid=t,this.sessionid=n,this.userid=r,this.userName=i,this.version=o},e.prototype.report=function(e){var t=this.logReportParamList(i.ENUM_LOG_LEVEL.REPORT,e);this.logLevel!==i.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=i.ENUM_LOG_LEVEL.REPORT&&console.debug(t),this.RemoteLog(i.ENUM_LOG_LEVEL.REPORT,t,!0)},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(i.ENUM_LOG_LEVEL.DEBUG,e.join(""));this.logLevel!==i.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=i.ENUM_LOG_LEVEL.DEBUG&&console.debug(n),this.log(i.ENUM_LOG_LEVEL.DEBUG,n)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(i.ENUM_LOG_LEVEL.INFO,e.join(""));this.logLevel!==i.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=i.ENUM_LOG_LEVEL.INFO&&console.info(n),this.log(i.ENUM_LOG_LEVEL.INFO,n)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(i.ENUM_LOG_LEVEL.WARN,e.join(""));this.logLevel!==i.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=i.ENUM_LOG_LEVEL.WARN&&console.warn(n),this.log(i.ENUM_LOG_LEVEL.WARN,n)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(i.ENUM_LOG_LEVEL.ERROR,e.join(""));this.logLevel!==i.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=i.ENUM_LOG_LEVEL.ERROR&&(console.error(n),window?this.stateCenter.debug&&window.alert(e.join("").substr(e.join("").indexOf(" ")+1,4500)):wx&&this.stateCenter.debug&&wx.showModal({title:"",content:e.join("").substr(e.join("").indexOf(" ")+1,4500)})),this.log(i.ENUM_LOG_LEVEL.ERROR,n)},e.prototype.log=function(e,t){this.logRemoteLevel!==i.ENUM_LOG_LEVEL.DISABLE&&this.logRemoteLevel<=e&&this.RemoteLog(e,t)},e.prototype.setLogServer=function(e){try{return e.startsWith("wss:")?(this.logType=i.ENUM_REMOTE_TYPE.WEBSOCKET,this.openWebSocketLogServer(e)):e.startsWith("https:")?(this.logType=i.ENUM_REMOTE_TYPE.HTTPS,this.openHttpsLogServer(e)):this.logType=i.ENUM_REMOTE_TYPE.DISABLE,!0}catch(e){return this.error(JSON.stringify(e)),!1}},e.prototype.stopLogServer=function(){this.logType==i.ENUM_REMOTE_TYPE.WEBSOCKET?this.stopWebSocketServer():this.logType==i.ENUM_REMOTE_TYPE.HTTPS&&(this.SendHttpsLog(),this.stopHttpsServer()),this.logType=i.ENUM_REMOTE_TYPE.DISABLE},e.prototype.stopWebSocketServer=function(){this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null)},e.prototype.openHttpsLogServer=function(e){var t=this;this.url=e,e&&(this.stopHttpsServer(),this.logUploadTimer||(this.logUploadTimer=setInterval((function(){t.SendHttpsLog()}),this.logUploadInterval)))},e.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},e.prototype.RemoteLog=function(e,t,n){if(void 0===n&&(n=!1),""!=this.url)if(this.logType==i.ENUM_REMOTE_TYPE.WEBSOCKET)this.RemoteWebSocketLog(e,t);else if(this.logType==i.ENUM_REMOTE_TYPE.HTTPS)this.RemoteHttpsLog(e,t,n);else if(this.logLevel!==i.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=e)for(this.logCacheSend.push(t);this.logCacheSend.length>this.logCacheMax;)this.logCacheSend.shift()},e.prototype.RemoteWebSocketLog=function(e,t){if("string"==typeof t&&t.length>4e3)console.info("log over maximum, ignore");else if(null==this.websocket||2==this.websocket.readyState||3==this.websocket.readyState){var n=this.url;this.url="",this.setLogServer(n),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)}else if(0==this.websocket.readyState)this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t);else if(1==this.websocket.readyState)if(this.logCacheSend.length>0){for(var i="",o=0;o<this.logCacheSend.length;o++){(i+this.logCacheSend[o]).length>4e3&&(this.websocket.send(i),i="");var s=JSON.parse(this.logCacheSend[o]);s=r(r({},s),{userid:s.userid||this.userid,roomid:s.roomid||this.roomid,userName:s.roomid||this.userName}),i=i+JSON.stringify(s)+"\n"}t=i+t,this.logCacheSend=[],this.websocket.send(t)}else this.websocket.send(t);else console.warn("wrong socket state:"+this.websocket.readyState),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)},e.prototype.RemoteHttpsLog=function(e,t,n){this.logCacheSend.push(t),(this.logCacheSend.length>=this.logCacheMax||!0===n)&&this.SendHttpsLog()},e.prototype.logParamList=function(e,t){var n=a.getCurrentTime(),r=[t.substr(0,t.indexOf(" "))||t,t.substr(t.indexOf(" ")+1,4500)||t],i={time:n,level:e,action:r[0],content:r[1],appid:this.appid,roomid:this.roomid,userid:this.userid,userName:this.userName,sessionid:this.sessionid};return JSON.stringify(i)},e.prototype.logReportParamList=function(e,t){var n=a.getCurrentTime();return t=r(r({},t),{time:n,level:e,console:this.env%2===i.ZEGO_ENV.BROWSER?"rtc":"xcx",appid:this.appid,room_id:this.roomid,roomid:this.roomid,userid:this.userid,id_name:this.userid,userName:this.userName,sessionid:this.sessionid,sdk_version:this.version,test_environment:this.stateCenter.testEnvironment,version:this.version,event_id:this.appid+"_"+this.userid+"_"+t.event_time+"_"+t.seq}),JSON.stringify(t)},e.prototype.openWebSocketLogServer=function(e){if(this.url!=e){if(this.url=e,!e)return;this.stopWebSocketServer(),this.websocket=o.createZegoWebSocket(e,this.env),this.websocket.onopen=function(){},this.websocket.onclose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn("onclose   websocket error:",e)},this.websocket.onmessage=function(){},this.websocket.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn("open log websocket error:",e)}}},e.prototype.SendHttpsLog=function(){0!=this.logCacheSend.length&&(this.env%2===i.ZEGO_ENV.BROWSER?this.SendHttpsLogWeb():this.SendHttpsLogWeChatMini())},e.prototype.SendHttpsLogWeb=function(){var e=this,t=this.logCacheSend.join("\n"),n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status){if(0==n.responseText.length)return;try{var t=JSON.parse(n.responseText).interval;"number"==typeof t&&e.logUploadInterval!==t&&(e.timeInterval=t,e.openHttpsLogServer(e.url))}catch(e){console.log("send result failed "+e)}}else console.log("send failed "+n.status)},n.open("POST",this.url,!0),0==this.env?n.send(t):2==this.env&&(n.setRequestHeader("content-type","application/json"),n.send(JSON.stringify({user_id:this.userid,log:t}))),this.logCacheSend=[]},e.prototype.SendHttpsLogWeChatMini=function(){var e=this;!this.existUserID&&this.userid&&this.logCacheSend.forEach((function(t){Array.isArray(t)&&t.forEach((function(n,r){var i=JSON.parse(n);i&&""==JSON.parse(n).userid?(i.userid=e.userid,i.id_name=e.userid,t[r]=JSON.stringify(i)):e.existUserID=!0}))}));var t=this.logCacheSend.join("\n"),n=1==this.env?t:JSON.stringify({user_id:this.userid,log:t});wx.request({url:this.url,data:n,method:"POST",success:function(t){if(0!=t.data.length){var n=t&&t.data&&t.data.interval;"number"==typeof n&&e.logUploadInterval!==n&&(e.timeInterval=n,e.openHttpsLogServer(e.url))}},fail:function(e){console.log("send failed "+e.statusCode)}}),this.logCacheSend=[]},e}();t.ZegoLogger=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTime=t.getCurrentEnv=t.getBrowser=void 0;var r=n(0);t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),n=-1!=e.indexOf("Firefox"),i=null!=window.opr,o=e.indexOf("Chrome")&&window.chrome,s=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version"),a=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0];return t?r.ZEGO_BROWSER_TYPE.IE:n?r.ZEGO_BROWSER_TYPE.FIREFOX:i?r.ZEGO_BROWSER_TYPE.OPERA:o?r.ZEGO_BROWSER_TYPE.CHROME:s?r.ZEGO_BROWSER_TYPE.SAFARI:a?r.ZEGO_BROWSER_TYPE.WEIXIN:r.ZEGO_BROWSER_TYPE.UNKOWN},t.getCurrentEnv=function(){var e=window.navigator.userAgent;return new Promise((function(t){-1==e.indexOf("MicroMessage")?t(r.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv((function(e){e.miniprogram}))}))};var i=["00","01","02","03","04","05","06","07","08","09"];t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(i[e.getMonth()+1]||e.getMonth()+1)+"/",(i[e.getDate()]||e.getDate())+" ",(i[e.getHours()]||e.getHours())+":",(i[e.getMinutes()]||e.getMinutes())+":",i[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")}}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;var r=function(){function e(){}return e.base64encode=function(t){var n,r,i,o,s,a;for(i=t.length,r=0,n="";r<i;){if(o=255&t.charCodeAt(r++),r==i){n+=e.base64EncodeChars.charAt(o>>2),n+=e.base64EncodeChars.charAt((3&o)<<4),n+="==";break}if(s=t.charCodeAt(r++),r==i){n+=e.base64EncodeChars.charAt(o>>2),n+=e.base64EncodeChars.charAt((3&o)<<4|(240&s)>>4),n+=e.base64EncodeChars.charAt((15&s)<<2),n+="=";break}a=t.charCodeAt(r++),n+=e.base64EncodeChars.charAt(o>>2),n+=e.base64EncodeChars.charAt((3&o)<<4|(240&s)>>4),n+=e.base64EncodeChars.charAt((15&s)<<2|(192&a)>>6),n+=e.base64EncodeChars.charAt(63&a)}return n},e.base64decode=function(t){var n,r,i,o,s,a,c;for(a=t.length,s=0,c="";s<a;){do{n=e.base64DecodeChars[255&t.charCodeAt(s++)]}while(s<a&&-1==n);if(-1==n)break;do{r=e.base64DecodeChars[255&t.charCodeAt(s++)]}while(s<a&&-1==r);if(-1==r)break;c+=String.fromCharCode(n<<2|(48&r)>>4);do{if(61==(i=255&t.charCodeAt(s++)))return c;i=e.base64DecodeChars[i]}while(s<a&&-1==i);if(-1==i)break;c+=String.fromCharCode((15&r)<<4|(60&i)>>2);do{if(61==(o=255&t.charCodeAt(s++)))return c;o=e.base64DecodeChars[o]}while(s<a&&-1==o);if(-1==o)break;c+=String.fromCharCode((3&i)<<6|o)}return c},e.utf16to8=function(e){var t,n,r,i;for(t="",r=e.length,n=0;n<r;n++)(i=e.charCodeAt(n))>=1&&i<=127?t+=e.charAt(n):i>2047?(t+=String.fromCharCode(224|i>>12&15),t+=String.fromCharCode(128|i>>6&63),t+=String.fromCharCode(128|i>>0&63)):(t+=String.fromCharCode(192|i>>6&31),t+=String.fromCharCode(128|i>>0&63));return t},e.utf8to16=function(e){var t,n,r,i,o,s;for(t="",r=e.length,n=0;n<r;)switch((i=e.charCodeAt(n++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(n-1);break;case 12:case 13:o=e.charCodeAt(n++),t+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=e.charCodeAt(n++),s=e.charCodeAt(n++),t+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&s)<<0)}return t},e.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e.base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],e}();t.Base64=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROOM_BASIC=t.INIT=t.CLOUD_SETTING=void 0,t.CLOUD_SETTING={product:"Web_SDK",URL:["https://cloud-setting-api.zego.im/cloud-setting/get","https://cloud-setting-api.zegocloud.com/cloud-setting/get"],POLLING_FREQ:300,ONLINE:!1},t.INIT="init",t.ROOM_BASIC="room"},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.RetryRoomHandler=void 0;var o=n(25),s=n(0),a=n(3),c=n(1),l=n(2),u=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.logger=t,i.stateCenter=n,i.room=r,i.loginRoomCallback={},i}return i(t,e),t.prototype.renewLocalToken=function(e,t){this.token=e,this.room.token=this.token;var n=(new Date).getTime(),r=void 0;t&&"number"==typeof t?r=1e3*t:["03","04"].includes(e.substring(0,2))&&(r=1e3*l.ClientUtil.decodeTokenExpire(e.substring(2))-n),r&&this.roomHandler.resetTokenTimer(r-this.stateCenter.local_time_deviation),this.stateCenter.actionListener("_tokenRenewed",e,this.room.roomID)},t.prototype.initRoom=function(e,t,n,r,i,o,s){this.roomHandler=e,this.roomID=t,this.renewLocalToken(n),this.user=r,this.server=i,this.serverBak=o||i,this.config=s},t.prototype.active=function(e){var t=this;if(this.logger.info(a.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" retry call"),this.roomHandler.setRunState(s.ENUM_RUN_STATE.trylogin),this.room.isMulti&&this.room.service.isDisConnect())this.logger.info(a.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" service is disconnected, multi room stop retry");else if(this.stateCenter.networkState!=s.ENUM_NETWORK_STATE.offline)if(this.retryTimer)this.logger.info(a.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" has actived, ignore");else if(this.isOverTime)this.logger.info(a.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" retry over time, stop retry");else{if(1==this.retryActiveCount)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var n=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1));this.retryActiveInterval=n>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:n}this.retryTimer=setTimeout((function(){t.roomHandler.login(t.retryActiveCount%2==1?t.server:t.serverBak,t.roomID,t.token,t.user,t.config,(function(e){t.handleLoginFinish(e)}),(function(e,n){t.handleLoginFinish(!1,e,n)})),t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null,t.retryActiveCount++}),e?0:1e3*this.retryActiveInterval)}else this.logger.info(a.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" network is broken, stop retry")},t.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.maxTimer=setTimeout((function(){e.logger.info(a.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" over max time "+e.RETRY_MAX_TIME+"s, stop retry"),e.isOverTime=!0,e.roomHandler.resetRoom(),e.stopMaxTime(),e.invalid(),e.onactive(!1,c.errorCodeList.LOGIN_TIMEOUT),e.loginRoomCallback.fail&&(e.loginRoomCallback.fail(c.errorCodeList.LOGIN_TIMEOUT),e.loginRoomCallback.fail=void 0)}),1e3*this.RETRY_MAX_TIME))},t.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},t.prototype.onactive=function(e,t){},t.prototype.handleError=function(e,t){if(this.RETRY_MAX_TIME<3)return!1;if(t){var n=e.code+"";return!["1000002002","1000005030","1000005035","1010","1011","1013","1014","1015","1016","1017","1018","1019","1020","1021","1023"].includes(n)&&(!!["1100040001","1100040100"].includes(n)||this.room.lastRunState==s.ENUM_RUN_STATE.login&&(this.room.sessionID="",this.invalid(),!0))}return!0},t.prototype.setLoginRoomCallback=function(e,t){this.loginRoomCallback.success=e,this.loginRoomCallback.fail=t},t.prototype.handleLoginFinish=function(e,t,n){t?this.handleError(t,n)?(!this.maxTimer&&this.startMaxTime(),this.active()):(this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(e,t),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(t),this.loginRoomCallback.fail=void 0)):(this.stopMaxTime(),this.invalid(),this.onactive(e,{code:0,msg:""}),this.loginRoomCallback.success&&(this.loginRoomCallback.success(e),this.loginRoomCallback.fail=void 0))},t}(o.TryHandler);t.RetryRoomHandler=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TryHandler=void 0;var r=function(){function e(e,t){this.logger=e,this.stateCenter=t,this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1}return e.prototype.init=function(e,t,n,r){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof n&&(this.RETRY_CONTINUE_COUNT=n),"number"==typeof r&&(this.RETRY_MAX_TIME_INTERVAL=r)},e.prototype.invalid=function(){this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryStartTime=0,this.retryActiveCount=1},e}();t.TryHandler=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkParams=t.RULE_SUCCESS=t.RULE_PARAM_NAME=void 0;var r,i=n(2);!function(e){e.NOT_EMPTY="NOT_EMPTY",e.ILLEGAL_CHARACTERS="ILLEGAL_CHARACTERS",e.TYPE_STRING="TYPE_STRING",e.TYPE_INTEGER="TYPE_INTEGER",e.TYPE_OBJECT="TYPE_OBJECT",e.MAX_LENGTH_10="MAX_LENGTH_10",e.MAX_LENGTH_64="MAX_LENGTH_64",e.MAX_LENGTH_100="MAX_LENGTH_100",e.MAX_LENGTH_128="MAX_LENGTH_128",e.MAX_LENGTH_256="MAX_LENGTH_256",e.MAX_LENGTH_1024="MAX_LENGTH_1024"}(r=t.RULE_PARAM_NAME||(t.RULE_PARAM_NAME={})),t.RULE_SUCCESS={error:{code:0,msg:"suc"}};var o={NOT_EMPTY:function(e,n,r,i,o){return void 0===n||""===n||null===n?(i.error(r+" "+e+" is empty"),o):t.RULE_SUCCESS},ILLEGAL_CHARACTERS:function(e,n,r,o,s){return i.ClientUtil.checkIllegalCharacters(n)?t.RULE_SUCCESS:(o.error(r+" "+e+" contains illegal characters"),s)},TYPE_STRING:function(e,n,r,i,o){return"string"!=typeof n?(i.error(r+" "+e+" must be string"),o):t.RULE_SUCCESS},TYPE_INTEGER:function(e,n,r,o,s){return i.ClientUtil.checkInteger(n,!1)?t.RULE_SUCCESS:(o.error(r+" "+e+"  must be integer number"),s)},TYPE_OBJECT:function(e,n,r,i,o){return n&&"object"==typeof n?t.RULE_SUCCESS:(i.error(r+" "+e+"  must be object"),o)},MAX_LENGTH_10:function(e,n,r,i,o){return n.length>10?(i.error(r+" "+e+" is too long"),o):t.RULE_SUCCESS},MAX_LENGTH_64:function(e,n,r,i,o){return n.length>64?(i.error(r+" "+e+" is too long"),o):t.RULE_SUCCESS},MAX_LENGTH_100:function(e,n,r,i,o){return n.length>100?(i.error(r+" "+e+" is too long"),o):t.RULE_SUCCESS},MAX_LENGTH_128:function(e,n,r,i,o){return n.length>128?(i.error(r+" "+e+" is too long"),o):t.RULE_SUCCESS},MAX_LENGTH_256:function(e,n,r,i,o){return n.length>256?(i.error(r+" "+e+" is too long"),o):t.RULE_SUCCESS},MAX_LENGTH_1024:function(e,n,r,i,o){return n.length>1024?(i.error(r+" "+e+" is too long"),o):t.RULE_SUCCESS}};t.checkParams=function(e,n){var i=[],s={};for(var a in e)s[e[a].order]=e[a],e[a].key=a;for(var c in s)i.push(s[c]);for(var l=0;l<i.length;l++)for(var u=i[l].rules,d=0;d<u.length;d++){var h={key:i[l].key,value:i[l].value,action:n.action,logger:n.logger},p=h.key,f=h.value,g=h.action,m=h.logger,_=u[d].name?""+u[d].name:"";if((void 0===f&&_===r.NOT_EMPTY||void 0!==f)&&o[_]){var v=o[_](p,f,g,m,u[d]);if(v!=t.RULE_SUCCESS)return v}}return t.RULE_SUCCESS}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0;var r=n(0),i=n(3),o=n(4),s=function(){function e(e,t){this.logger=e,this.dataReport=t,this._debug=!1,this._testEnvironment=!1,this._env=0,this.type="PUBLIC",this.debugCustom=!1,this.configOK=!1,this.role=2,this.relateService=[],this.maxMemberCount=0,this.roomCreateFlag=1,this.local_time_deviation=0,this.callbackList={},this.listenerList={roomUserUpdate:[],roomOnlineUserCountUpdate:[],getAnchorInfo:[],_getAnchorInfo:[],IMRecvCustomCommand:[],IMRecvBroadcastMessage:[],recvReliableMessage:[],roomExtraInfoUpdate:[],IMRecvBarrageMessage:[],recvJoinLiveRequest:[],recvInviteJoinLiveRequest:[],recvEndJoinLiveCommand:[],roomLoginResponse:[],HBResponse:[],roomStateUpdate:[],_roomStateUpdate:[],_getTotalUserList:[],_userStateUpdate:[],_recvBigRoomMessage:[],_recvRoomMsg:[],_kickout:[],tokenWillExpire:[],_tokenExpired:[],hallStateUpdate:[],_hallStateUpdate:[],roomTokenWillExpire:[],_tokenRenewed:[],_protobufResponse:[],_cloudSettingNotify:[],_settingCanFetch:[]},this.reportList={},this.reportSeqList={login:0,relogin:0},this.networkState=r.ENUM_NETWORK_STATE.offline,this.roomRetryTime=300,this.roomModulesList=[],this.isMultiRoom=!1,this.setMultiRoom=!1,this.protoFormat="json",this.settingFetched=!1,this.configRoomAuth=!1,this.configCheckToken=!1,this._sdkVersion="unknown"}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,r.LoggerStateCenter.getInstance().debug=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e,r.LoggerStateCenter.getInstance().testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ENV",{get:function(){return this._env},set:function(e){this._env=e,r.LoggerStateCenter.getInstance().ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomid",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].roomID:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverTimeOffset",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].messageHandler.serverTimeOffset:0},enumerable:!1,configurable:!0}),e.prototype.getRequestId=function(){return this.idName+"-"+r.getSeq()},e.prototype.actionListener=function(e){for(var t=this,n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];if(this.listenerList[e]){var a=r.getReportSeq();this.dataReport.newReport(a,o.ZegoRTMLogEvent.kZegoListener.event),this.dataReport.addMsgInfo(a,{listener:e,params:n}),this.dataReport.uploadReport(a)}this.listenerList[e]&&this.listenerList[e].forEach((function(r){try{r.apply(void 0,n)}catch(n){t.logger.error(i.ZEGO_RTM_ACTION.STATE_ACTION+" ",e," ",JSON.stringify(n))}}))},e.prototype.onListener=function(e,t){return this.listenerList[e]?"function"!=typeof t?(this.logger.error(i.ZEGO_RTM_ACTION.ON_LISTENER+" listener callBack must be funciton"),!1):(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0):(this.logger.error(i.ZEGO_RTM_ACTION.ON_LISTENER+" event "+e+" no found"),!1)},Object.defineProperty(e.prototype,"sdKVersion",{get:function(){return this._sdkVersion},set:function(e){this._sdkVersion=e},enumerable:!1,configurable:!0}),e}();t.StateCenter=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveRoomModules=void 0;var r=n(0),i=n(9),o=n(29),s=n(10),a=n(2),c=n(1),l=function(){function e(e,t,n,a,c,l){this.roomID=e,this.stateCenter=t,this.logger=n,this.dataReport=a,this.service=c,this.rtm=l,this.runState=r.ENUM_RUN_STATE.logout,this.lastRunState=r.ENUM_RUN_STATE.logout,this.lastRoomState="DISCONNECTED",this.roomState="DISCONNECTED",this.roomSessionID="0",this.sessionID="0",this.isMulti=!1,this.token="",this.thirdToken="",this.roomHandler=new o.RoomHandler(this.logger,this.stateCenter,this.dataReport,this.service,this),this.heartBeatHandler=new i.HeartBeatHandler(this.logger,this.stateCenter,this.dataReport,this.service,this),this.userHandler=new s.UserHandler(this.logger,this.stateCenter,this.dataReport,this.service,this),this.initMessageHandler(),this.initLiveHandler(),this.init()}return e.prototype.initMessageHandler=function(){},e.prototype.initLiveHandler=function(){},e.prototype.init=function(){this.bindHeatBeatHandler(),this.bindRoomHandler(),this.bindMessageHandler(),this.bindLiveHandler()},e.prototype.bindHeatBeatHandler=function(){var e=this;this.heartBeatHandler.hbLogout=function(t){e.roomHandler.handleHbLogout(t)},this.heartBeatHandler.heartbeatRspNotiFy=function(t){e.messageHandler&&e.messageHandler.loginRsp(t),e.userHandler.patchUserList(t),e.HBResponse(t)}},e.prototype.bindRoomHandler=function(){var e=this;this.roomHandler.loginSuccessCallBack=function(t,n){e.heartBeatHandler.init(n),e.service.startCheck(),e.userHandler.loginRsp(n,t),e.messageHandler&&e.messageHandler.loginRsp(n),e.isMulti||e.handleMultiRoom(),e.roomLoginResponse(n)},this.roomHandler.resetRoomCallBack=function(){e.heartBeatHandler.resetHeartbeat(),e.liveHandler&&e.liveHandler.resetLiveHandler(),e.messageHandler&&e.messageHandler.resetMessageInfo(),e.userHandler.resetUserHandler(),e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.stopMaxTime(),e.roomTryHandler=void 0)}},e.prototype.bindUserHandler=function(){},e.prototype.bindMessageHandler=function(){},e.prototype.bindLiveHandler=function(){},e.prototype.HBResponse=function(e){this.stateCenter.actionListener("HBResponse",e)},e.prototype.roomLoginResponse=function(e){this.stateCenter.actionListener("roomLoginResponse",e)},e.prototype.handleMultiRoom=function(){this.stateCenter.roomModulesList.forEach((function(e){e.runState!==r.ENUM_RUN_STATE.login&&e.roomTryHandler&&1==e.isMulti&&(e.roomTryHandler.onactive=function(t,n){if(n&&0!==n.code){if(0!==n.code){var r=a.ClientUtil.getLiveRoomError(n.code);r&&c.errorCodeList[r]&&(n=c.errorCodeList[r])}e.roomHandler.roomStateHandle("DISCONNECTED",n,n.msg)}else e.roomHandler.roomStateHandle("CONNECTED",n)},e.roomTryHandler.startMaxTime(),e.roomTryHandler.active())}))},e.prototype.isLogin=function(){return this.runState===r.ENUM_RUN_STATE.login},e}();t.LiveRoomModules=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RoomHandler=void 0;var r=n(0),i=n(2),o=n(3),s=n(1),a=n(4),c=function(){function e(e,t,n,r,i){this.logger=e,this.stateCenter=t,this.dataReport=n,this.service=r,this.room=i,this.tryLoginTimer=null,this.tryLoginCount=0,this.tryLoginInterval=1e4,this.tokenTimer=null,this.beforeExpire=30,this.loginCallback={}}return e.prototype.resetTokenTimer=function(e){var t=this;e=(e=(e-=3e4)<0?0:e)>2147483648?2147483648:e,this.logger.info(o.ZEGO_RTM_ACTION.ROOM_RESETTOKEN_TIMER+"  call: "+e),this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=setTimeout((function(){t.stateCenter.actionListener("tokenWillExpire",t.room.roomID),t.stateCenter.actionListener("roomTokenWillExpire",t.room.roomID)}),e)},e.prototype.stopTokenTimer=function(){this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=null},e.prototype.setRunState=function(e){this.room.runState!==e&&(this.room.lastRunState=this.room.runState,this.room.runState=e)},e.prototype.resetTryLogin=function(){this.tryLoginTimer&&clearTimeout(this.tryLoginTimer),this.tryLoginTimer=null},e.prototype.resetRoom=function(e){var t=this;if(this.logger.info(o.ZEGO_RTM_ACTION.ROOM_RESET_ROOM+" call"),this.stateCenter.roomModulesList.length>1&&!e&&(this.room.isMulti=!0),this.resetTryLogin(),"0"!==this.room.sessionID&&this.room.runState!==r.ENUM_RUN_STATE.logout&&!this.service.isDisConnect()){var n=function(e){t.handleLogoutRsp(e)};this.service.logout(this.room,n,n)}this.setRunState(r.ENUM_RUN_STATE.logout),this.room.sessionID="",this.room.roomSessionID="",this.room.isMulti||(this.stateCenter.userid="",this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.sessionID,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),this.service.closeSocket()),this.resetRoomCallBack(),this.stateCenter.roomModulesList=this.stateCenter.roomModulesList.filter((function(e){return e!==t.room}));var i=this.stateCenter.roomModulesList[0];i&&(i.isMulti=!1,i.runState!==r.ENUM_RUN_STATE.login&&i.roomTryHandler&&(i.roomTryHandler.startMaxTime(),i.roomTryHandler.active())),this.logger.info(o.ZEGO_RTM_ACTION.ROOM_RESET_ROOM+" call success")},e.prototype.resetRoomCallBack=function(){},e.prototype.loginSuccessCallBack=function(e,t){},e.prototype.handlePushKickout=function(e,t){var n=this;if(this.logger.info(o.ZEGO_RTM_ACTION.ROOM_KICK_OUT+"  call "+JSON.stringify(e)),this.room.sessionID===e.header.session_id){var c=r.getReportSeq();this.dataReport.newReport(c,a.ZegoRTMLogEvent.kZegoTaskKickout.event),this.dataReport.addMsgInfo(c,{user_id:a.ZegoRTMLogEvent.kZegoTaskKickout.user_id(this.stateCenter.idName)});var l=i.ClientUtil.getKickoutError(e.body.reason);this.dataReport.addMsgInfo(c,{error:l.code,message:l.message}),this.dataReport.uploadReport(c);var u=this.room.roomTryHandler;if(u)if(u.onactive=function(e,t){n.disconnectedHandle(t),n.stateCenter.actionListener("_kickout",t)},e.body.need_relogin&&1==e.body.need_relogin)this.room.sessionID="",u.startMaxTime(),u.active();else{this.setRunState(r.ENUM_RUN_STATE.logout),this.resetRoom(t);var d={};e&&e.body.custom_reason?d.custom_kickout_message=e.body.custom_reason:l.name&&s.errorCodeList[l.name]&&(d.custom_kickout_message=s.errorCodeList[l.name].msg+"; kickout reason: "+e.body.reason),l.name&&s.errorCodeList[l.name]?this.disconnectedHandle(s.errorCodeList[l.name],JSON.stringify(d)):this.disconnectedHandle(s.errorCodeList.ROOM_INNER_ERROR,JSON.stringify(d)),this.stateCenter.actionListener("_kickout",{code:s.errorCodeList.MANUAL_KICKOUT.code,msg:s.errorCodeList.MANUAL_KICKOUT.msg+e.body.reason})}else this.logger.info(o.ZEGO_RTM_ACTION.ROOM_KICK_OUT+" try handler no found")}else this.logger.info(o.ZEGO_RTM_ACTION.ROOM_KICK_OUT+" session id wrong, ignore")},e.prototype.handleHbLogout=function(e){var t=this,n=this.room.roomTryHandler;n&&(n.onactive=function(e,n){t.disconnectedHandle(n)},[s.errorCodeList.HEARTBEAT_TIMEOUT,s.errorCodeList.SOCKET_CLOSE,s.errorCodeList.TIMEOUT].includes(e)||e.msg.endsWith("1000002001")||e.msg.endsWith("1000000152")||e.msg.endsWith("1000000105")?(n.startMaxTime(),n.active()):(n.stopMaxTime(),n.invalid(),this.resetRoom(),this.disconnectedHandle(e)))},e.prototype.onDisconnect=function(e){var t=this;if(this.logger.error(o.ZEGO_RTM_ACTION.ROOM_DISCONNECT+" "+e.msg),"string"==typeof e.code&&"Error.Network"===e.code)this.dataReport.addMsgInfo(this.stateCenter.reportSeqList.relogin,{error:a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.error.ROOM_DISCONNECT.code,message:a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.error.ROOM_DISCONNECT.msg});else if("number"==typeof e.code){var n=void 0;(n=e.code<2e9&&e.code>1e9||e.code<1e6?i.ClientUtil.decodeServerError(e.code,e.msg):{code:e.code,message:e.msg})&&this.dataReport.addMsgInfo(this.stateCenter.reportSeqList.relogin,{error:n.code,message:n.message})}this.dataReport.uploadReport(this.stateCenter.reportSeqList.relogin),this.stateCenter.reportSeqList.relogin=0,i.ClientUtil.unregisterCallback(a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.event,this.stateCenter.reportList);var r=this.room.roomTryHandler;r?(r.onactive=function(e,n){n&&0!==n.code?t.roomStateHandle("DISCONNECTED",n):t.roomStateHandle("CONNECTED",n)},r.startMaxTime(),r.active()):this.logger.error(o.ZEGO_RTM_ACTION.ROOM_DISCONNECT+" try handler no found")},e.prototype.onConnecting=function(e){this.roomStateHandle("CONNECTING",e)},e.prototype.disconnectedHandle=function(e,t){e&&0!==e.code?(this.stopTokenTimer(),this.roomStateHandle("DISCONNECTED",e,t)):this.roomStateHandle("CONNECTED",e,t)},e.prototype.roomStateHandle=function(e,t,n){this.logger.info(o.ZEGO_RTM_ACTION.ROOM_STATUS_CALLBACK+" "+e+" "+JSON.stringify(t)),this.room.lastRoomState=this.room.roomState,this.room.roomState=e,this.room.roomState!==this.room.lastRoomState&&(this.stateCenter.actionListener("_roomStateUpdate",this.room.roomID,e,t?t.code:0,n),this.stateCenter.actionListener("roomStateUpdate",this.room.roomID,e,t?t.code:0,n))},e.prototype.login=function(e,t,n,c,l,u,d){if(this.logger.info(o.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" call:",t,n),!this.room.isMulti&&this.logger.setSessionInfo(this.stateCenter.appid,t,"",c.userID,"",this.stateCenter.sdKVersion),l&&(l.userUpdate&&"boolean"==typeof l.userUpdate&&(this.stateCenter.userStateUpdate=l.userUpdate),l.maxMemberCount&&"number"==typeof l.maxMemberCount&&(this.stateCenter.maxMemberCount=l.maxMemberCount)),!this.stateCenter.configOK)return this.logger.error(o.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" init sdk wrong"),void d(s.errorCodeList.INIT);if(this.room.runState!==r.ENUM_RUN_STATE.trylogin&&this.setRunState(r.ENUM_RUN_STATE.trylogin),this.room.roomID=t,this.room.token=n,this.room.thirdToken=n,this.stateCenter.idName=c.userID,this.stateCenter.nickName=c.userName||c.userID,this.loginCallback.success=u,this.loginCallback.fail=d,0===this.stateCenter.reportSeqList.login){var h=r.getReportSeq();this.stateCenter.reportSeqList.relogin=h,this.dataReport.newReport(h,a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.event),this.dataReport.addMsgInfo(h,{server:e}),i.ClientUtil.logReportCallback(a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.event,this.dataReport,h,this.stateCenter.reportList)}this.resetTryLogin(),this.onConnecting({code:0,msg:""}),this.tryLogin(e),this.logger.info(o.ZEGO_RTM_ACTION.ROOM_LOGIN_ROOM+" call success")},e.prototype.tryLogin=function(e){var t=this;if(this.room.runState===r.ENUM_RUN_STATE.trylogin){var n=0!==this.stateCenter.reportSeqList.login?a.ZegoRTMLogEvent.kZegoTaskLoginRoom.event:a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.event;if(this.service.isDisConnect())try{this.service.closeSocket(),this.logger.debug(o.ZEGO_RTM_ACTION.ROOM_TRY_LOGIN+" new websocket"),i.ClientUtil.actionSuccessCallback(n,this.stateCenter.reportList)&&(this.tryLoginCount>1&&i.ClientUtil.actionSuccessCallback(n,this.stateCenter.reportList)(r.REPORT_ACTION.eventEnd,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.create_socket.event),i.ClientUtil.actionSuccessCallback(n,this.stateCenter.reportList)(r.REPORT_ACTION.eventStart,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.create_socket.event),i.ClientUtil.actionSuccessCallback(n,this.stateCenter.reportList)(r.REPORT_ACTION.addEventMsg,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.create_socket.event,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.create_socket.server("server"),e)),this.service.createSocket(e),this.service.openHandler((function(){t.openHandler()})),this.service.closeHandler((function(e){t.logger.error(o.ZEGO_RTM_ACTION.ROOM_TRY_LOGIN+" close "+JSON.stringify(e.code?e.code:e)),t.service.closeSocket(),t.closeHandler(e)})),this.service.errorHandler((function(e){t.logger.error(o.ZEGO_RTM_ACTION.ROOM_TRY_LOGIN+" error "+JSON.stringify(e.code?e.code:e)),t.service.closeSocket(),t.closeHandler(e)}))}catch(e){this.logger.error(o.ZEGO_RTM_ACTION.ROOM_TRY_LOGIN+"  websocket err:"+JSON.stringify(e))}else{this.logger.info(o.ZEGO_RTM_ACTION.ROOM_TRY_LOGIN+" use current websocket and sent login"),i.ClientUtil.actionSuccessCallback(n,this.stateCenter.reportList)&&i.ClientUtil.actionSuccessCallback(n,this.stateCenter.reportList)(r.REPORT_ACTION.eventStart,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.liveroom_login.event);var s=function(e,n){t.handleLoginRsp(e,n)};this.service.login(this.room,s,s)}this.tryLoginTimer=setTimeout((function(){t.logger.info(o.ZEGO_RTM_ACTION.ROOM_TRY_LOGIN+" over time no response, login timeout"),t.loginCallback.fail&&t.loginCallback.fail(a.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.LOGIN_TIMEOUT)}),this.tryLoginInterval),this.logger.info(o.ZEGO_RTM_ACTION.ROOM_TRY_LOGIN+" call success")}else this.logger.error("zb.rh.tl state error")},e.prototype.openHandler=function(){var e=this;this.logger.info(o.ZEGO_RTM_ACTION.ROOM_OPEN_HANDLER+" websocket.onpen call");var t=0!==this.stateCenter.reportSeqList.login?a.ZegoRTMLogEvent.kZegoTaskLoginRoom.event:a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.event;i.ClientUtil.actionSuccessCallback(t,this.stateCenter.reportList)&&i.ClientUtil.actionSuccessCallback(t,this.stateCenter.reportList)(r.REPORT_ACTION.eventEndWithMsgInfo,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.create_socket.event,{try_cnt:this.tryLoginCount}),this.service.onPush(),i.ClientUtil.actionSuccessCallback(t,this.stateCenter.reportList)&&i.ClientUtil.actionSuccessCallback(t,this.stateCenter.reportList)(r.REPORT_ACTION.eventStart,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.liveroom_login.event);var n=function(t,n){e.handleLoginRsp(t,n)};this.service.login(this.room,n,n)},e.prototype.handleLoginRsp=function(e,t){var n=0!==this.stateCenter.reportSeqList.login?a.ZegoRTMLogEvent.kZegoTaskLoginRoom.event:a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.event;if(i.ClientUtil.actionSuccessCallback(n,this.stateCenter.reportList)&&i.ClientUtil.actionSuccessCallback(n,this.stateCenter.reportList)(r.REPORT_ACTION.eventEndWithMsgInfo,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.liveroom_login.event),this.room.runState===r.ENUM_RUN_STATE.trylogin)if(e.header&&e.body){if(e.header.seq!==t&&0==this.room.isMulti)return void this.logger.error(o.ZEGO_RTM_ACTION.ROOM_HANDLE_LOGINRSP+" in wrong seq, local=",t+"",",recv=",e.header.seq);0!==e.body.err_code?(this.logger.error(o.ZEGO_RTM_ACTION.ROOM_HANDLE_LOGINRSP+" server error=",e.body.err_code),this.handleLoginFail(e)):(this.logger.info(o.ZEGO_RTM_ACTION.ROOM_HANDLE_LOGINRSP+" call success."),this.handleLoginSuccess(e))}else this.logger.error(o.ZEGO_RTM_ACTION.ROOM_HANDLE_LOGINRSP+" "+JSON.stringify(e)),this.handleLoginFail(e);else this.logger.error(o.ZEGO_RTM_ACTION.ROOM_HANDLE_LOGINRSP+" state error")},e.prototype.handleLoginFail=function(e){this.resetTryLogin();var t=a.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.INNER_ERROR;e.header&&e.body?t=i.ClientUtil.getServerError(e.body.err_code):e.code&&e.msg&&(t=e),this.loginCallback.fail&&this.loginCallback.fail(t,!0)},e.prototype.handleLoginSuccess=function(e){var t,n={},o=this.room.lastRunState;this.setRunState(r.ENUM_RUN_STATE.login),this.stateCenter.userid=e.body.user_id,this.room.sessionID=e.body.session_id,this.room.roomSessionID=e.body.room_session_id;var s=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.token_remain_time;if(this.stateCenter.configRoomAuth=s>0,e.body.ret_timestamp&&["03","04"].includes(this.room.token.substring(0,2))){var c=(new Date).getTime(),l=c-e.body.ret_timestamp;this.stateCenter.local_time_deviation=l<5e3?0:l;var u=s>0?1e3*s:1e3*i.ClientUtil.decodeTokenExpire(this.room.token.substring(2))-c;this.resetTokenTimer(u-this.stateCenter.local_time_deviation)}if(!this.room.isMulti&&this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.sessionID,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),e.body.config_info){var d=this.stateCenter.settingConfig.getSetting("remote_log_level",!0)||e.body.config_info.log_level;this.logger.setRemoteLogLevel(d),n.log_level=d,""==e.body.config_info.log_url||this.logger.url||(this.logger.setLogServer(e.body.config_info.log_url),n.log_url=e.body.config_info.log_url)}e.body.cluster_env&&1===e.body.cluster_env&&(this.stateCenter.testEnvironment=!0,n.test_environment="true",!this.stateCenter.debugCustom&&(this.stateCenter.debug=!0));var h=0!==this.stateCenter.reportSeqList.login?a.ZegoRTMLogEvent.kZegoTaskLoginRoom.event:a.ZegoRTMLogEvent.kZegoTaskReLoginRoom.event;i.ClientUtil.actionSuccessCallback(h,this.stateCenter.reportList)&&i.ClientUtil.actionSuccessCallback(h,this.stateCenter.reportList)(r.REPORT_ACTION.addEventMsg,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.liveroom_login.event,a.ZegoRTMLogEvent.kZegoTaskLoginRoom.subEvent.liveroom_login.respond_info("respond_info"),n),this.resetTryLogin(),this.loginSuccessCallBack(o,e),this.loginCallback.success&&this.loginCallback.success(!0),this.roomStateHandle("CONNECTED",{code:0,msg:""})},e.prototype.closeHandler=function(e){this.logger.error(o.ZEGO_RTM_ACTION.ROOM_CLOSEHANDLER+" room websocket close "+JSON.stringify(e.code?e.code:e)),this.room.runState!==r.ENUM_RUN_STATE.logout?this.room.runState===r.ENUM_RUN_STATE.trylogin?(this.resetTryLogin(),this.loginCallback.fail&&this.loginCallback.fail(1006==e.code?a.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.LOGIN_TIMEOUT:e)):this.room.runState===r.ENUM_RUN_STATE.login&&(this.logger.info(o.ZEGO_RTM_ACTION.ROOM_CLOSEHANDLER+" is called because of network broken"),this.resetTryLogin(),this.onDisconnect(a.ZegoRTMLogEvent.kZegoTaskLoginRoom.error.NETWORK_BROKEN)):this.logger.info(o.ZEGO_RTM_ACTION.ROOM_CLOSEHANDLER+" onclose logout flow call websocket.close")},e.prototype.logout=function(e){this.logger.info(o.ZEGO_RTM_ACTION.ROOM_LOGOUT+" call"),this.room.runState!==r.ENUM_RUN_STATE.logout?(this.resetRoom(e),this.roomStateHandle("DISCONNECTED",{code:0,msg:""}),this.stopTokenTimer(),this.logger.info(o.ZEGO_RTM_ACTION.ROOM_LOGOUT+" call success")):this.logger.warn("zb.rh.lo at logout")},e.prototype.handleLogoutRsp=function(e){this.logger.info(o.ZEGO_RTM_ACTION.ROOM_LOGOUT+" result=",e.body&&e.body.err_code?e.body.err_code:"-1")},e}();t.RoomHandler=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveRoomModules=void 0;var r=n(0),i=n(9),o=n(10),s=function(){function e(e,t,n,s,a){this.stateCenter=e,this.logger=t,this.dataReport=n,this.service=s,this.rtm=a,this.roomID="",this._dispatchServer="",this.deviceID="",this.deviceType="",this.anType=0,this.sessionExpire="",this.pri_roomID="",this.roomSid="0",this.roomFlag=1,this.timeStamp=0,this.netType=2,this.userSeq=0,this.hallRunState=r.ENUM_RUN_STATE.logout,this.hallToken="",this.roomSessionID="",this.lastHallRunState=r.ENUM_RUN_STATE.logout,this.runRoomState=r.ENUM_RUN_STATE.logout,this.lastRunRoomState=r.ENUM_RUN_STATE.logout,this.lastHallState="DISCONNECTED",this.hallState="DISCONNECTED",this.lastRoomState="DISCONNECTED",this.roomState="DISCONNECTED",this.sessionID="",this.initHandler(),this.heartBeatHandler=new i.HeartBeatHandler(this.logger,this.stateCenter,this.dataReport,this.service,this),this.userHandler=new o.UserHandler(this.logger,this.stateCenter,this.dataReport,this.service,this),this.initMessageHandler(),this.init()}return e.prototype.initMessageHandler=function(){},e.prototype.initHandler=function(){},e.prototype.init=function(){this.bindSocketHandler(),this.bindHeatBeatHandler(),this.bindMessageHandler(),this.bindLiveHandler()},e.prototype.bindSocketHandler=function(){var e=this;this.service.handlePushUserStateUpdateMsg=function(t){e.userHandler.handlePushUserStateUpdateMsg(t)}},e.prototype.bindHeatBeatHandler=function(){var e=this;this.heartBeatHandler.hbLogout=function(e){},this.heartBeatHandler.heartbeatRspNotiFy=function(t){e.HBResponse(t)}},e.prototype.bindHallHandler=function(){},e.prototype.bindUserHandler=function(){},e.prototype.bindMessageHandler=function(){},e.prototype.bindLiveHandler=function(){},e.prototype.bindRoomHandler=function(){},e.prototype.handleHbLogout=function(e){},e.prototype.HBResponse=function(e){this.stateCenter.actionListener("HBResponse",e)},e.prototype.roomLoginResponse=function(e){this.stateCenter.actionListener("roomLoginResponse",e)},e.prototype.isLogin=function(){return this.hallRunState===r.ENUM_RUN_STATE.login},e}();t.LiveRoomModules=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.LiveRoomPrivateService=void 0;var o=n(12),s=n(0),a=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.stateCenter=t,i.logger=n,i.service=new o.ZegoSocketService(i.stateCenter.ENV),i.cmdSeq=0,i.responseRouters={},i}return i(t,e),t.prototype.checkResponse=function(e){return e.header.app_id!==this.stateCenter.appid||e.header.user_uid!==this.stateCenter.userid||this.stateCenter.priModules.hallRunState!==s.ENUM_RUN_STATE.login},t.prototype.handleHallKickout=function(e){},t.prototype.handlePushKickout=function(e){},t.prototype.handlePushCustomMsg=function(e){},t.prototype.handlePushRoomMsg=function(e){},t.prototype.handlePushUserStateUpdateMsg=function(e){},t.prototype.handlePushMergeMsg=function(e){},t.prototype.handlePushTransMsg=function(e){},t.prototype.handleBigImMsgRsp=function(e){},t.prototype.handlePushSignalMsg=function(e){},t.prototype.closeHandler=function(e){this.service.closeHandler(e)},t.prototype.openHandler=function(e){this.service.openHandler(e)},t.prototype.errorHandler=function(e){this.service.errorHandler(e)},t.prototype.getHeader=function(e){return{cmd:e,seq:++this.cmdSeq,timestamp:Math.ceil((new Date).getTime()/1e3)+"",app_id:this.stateCenter.appid,user_uid:this.stateCenter.userid||"0",session_id:this.stateCenter.priModules.sessionID||"0"}},t.prototype.startCheck=function(){this.service.startCheck()},t.prototype.stopCheck=function(){this.service.stopCheck()},t.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},t.prototype.closeSocket=function(){this.service.closeSocket()},t.prototype.on=function(e,t){this.responseRouters[e]=t},t}(n(11).LiveRoomService);t.LiveRoomPrivateService=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSettingConfig=void 0;var r=function(){function e(){this.defaultSetting={remote_log_level:"info"},this.requestList={},this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.setSetting=function(e,t){var n=Array.isArray(t)&&t.length>0;for(var r in e)for(var i in e[r])if(!i.endsWith("_ctrlmode")){if(n&&-1==t.indexOf(i))continue;var o=e[r][i+"_ctrlmode"];1===o||2===o?this.setting[i]=e[r][i]:this.defaultSetting[i]&&(this.setting[i]=this.defaultSetting[i]),"number"==typeof o&&(this.setting[i+"_ctrlmode"]=e[r][i+"_ctrlmode"])}},e.prototype.getSetting=function(e,t){return void 0===t&&(t=!1),t?2==this.setting[e+"_ctrlmode"]?this.setting[e]:void 0:this.setting[e]},e}();t.ZegoSettingConfig=r},function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){return r={},t.m=n=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_SETTING_ACTION=void 0,(t=t.ZEGO_SETTING_ACTION||(t.ZEGO_SETTING_ACTION={})).CONSTRUCTOR="zs.0",t.SETTING_INIT="zs.ii.0",t.SETTING_FETCH_SETTING="zs.fs.0",t.SETTING__FETCH_SETTING="zs.fs.1",t.SETTING_GET_CLOUD_SETTING="zs.gcs.0",t.SETTING_POLLING_SETTING="zs.ps.0",t.SETTINGCACHEHANDLER_GET_CACHE_SETTING="zs.sch.gcs.0",t.SETTINGCACHEHANDLER_STORE_SETTING="zs.sch.ss.0",t.SETTINGFETCHHANDLER_FETCHSETTING="zs.sfh.fs.0"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorList=void 0,t.errorList={NOT_INIT:{code:1001,msg:"not init"},FILE_REQUEST_FAIL:{code:1002,msg:"fetch request fail"},INFLATE_DATA_FAIL:{code:1003,msg:"inflate fail"},MULTI_FILE_NOT_EXIST:{code:1004,msg:"get multi file fail"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUUID=t.checkValidNumber=t.analyzeKey=t.getCurrentTime=t.getBrowser=void 0,t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),n=-1!=e.indexOf("Firefox"),r=null!=window.opr,i=e.indexOf("Chrome")&&window.chrome,o=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0],t?"IE":n?"FIREFOX":r?"OPERA":i?"CHROME":o?"SAFARI":e?"WEIXIN":"UNKOWN"};var r=["00","01","02","03","04","05","06","07","08","09"];t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(r[e.getMonth()+1]||e.getMonth()+1)+"/",(r[e.getDate()]||e.getDate())+" ",(r[e.getHours()]||e.getHours())+":",(r[e.getMinutes()]||e.getMinutes())+":",r[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},t.analyzeKey=function(e){return e=e.split("_"),{level:Number(e[0]),timestamp:e[1],seq:e[2]}},t.checkValidNumber=function(e,t,n){return t=t||1,n=n||1e4,"number"==typeof e&&e%1==0&&t<=e&&e<=n},t.generateUUID=function(e){if(0===(e=void 0===e?0:e)?n=localStorage.getItem("z_deviceID"):wx.getStorageSync("z_deviceID"),n)return n;var t=(new Date).getTime(),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(36)}));return 0===e?localStorage.setItem("z_deviceID",n):wx.setStorageSync("z_deviceID",n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSetting=void 0;var r=n(4);Object.defineProperty(t,"ZegoSetting",{enumerable:!0,get:function(){return r.ZegoSetting}})},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,(s=i?[2&s[0],i.value]:s)[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSetting=void 0;var s=n(5),a=n(6),c=n(10),l=n(0),u=n(12),d=n(1),h=n(2);function p(){this.fileList=[],this.publicEnvVariable={},this.proEnvVariable={},this.pollingTimer=null,this.inited=!1,this.log=new s.ZegoLog}Object.defineProperty(p.prototype,"envVariable",{get:function(){return Object.assign({},this.publicEnvVariable,this.proEnvVariable)},enumerable:!1,configurable:!0}),p.prototype.init=function(e){var t=this;return h.checkValidNumber(e.pollingFreq)?(this.options=Object.assign({},u.INIT_CONFIG,e),this.getPublicEnvVariable(),this.settingFetchHandler=new c.SettingFetchHandler(this.options,this.log),this.settingFetchHandler.setDataReport(this.options.reportNotify),e=Math.round(60*Math.random()),this.log.info(l.ZEGO_SETTING_ACTION.SETTING_INIT+" delay "+e),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null),this.delayTimer=setTimeout((function(){t.pollingSetting(1e3*t.options.pollingFreq)}),1e3*e),this.settingCacheHandler=new a.SettingCacheHandler("setting_"+(this.options.online?"online_":"test_")+this.options.product+"_"+this.options.appID,this.log,this.options.env),this.inited=!0):(this.log.error(l.ZEGO_SETTING_ACTION.SETTING_INIT+" pollingFreq must be integer number"),!1)},p.prototype.uninit=function(){this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null)},p.prototype.setEnvVariable=function(e,t){this.proEnvVariable[e]=String(t)},p.prototype.getEnvVariable=function(e){return this.envVariable[e]},p.prototype.setEnvVariables=function(e){var t=this;Object.keys(e).forEach((function(n){"string"!=typeof e[n]&&"number"!=typeof e[n]&&t.log.error("zs.sev env "+n+" type error"),t.proEnvVariable[n]=String(e[n])}))},p.prototype.getEnvVariables=function(){return this.envVariable},p.prototype.enablePolling=function(e,t){var n=this;t?t.forEach((function(t){var r=n.fileList.find((function(e){return e.fileName===t}));r&&(r.needPolling=e)})):this.fileList.forEach((function(t){return t.needPolling=e}))},p.prototype.setToken=function(e){this.token=e},p.prototype.setUserID=function(e){this.userID=e},p.prototype.getSettingCache=function(e){return i(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(i){switch(i.label){case 0:return this.inited?(t=this.fileList.find((function(t){return t.fileName===e})))?[2,Promise.resolve({setting:t.setting,versions:t.versions})]:[3,1]:[2,Promise.reject(d.errorList.NOT_INIT)];case 1:return n=this._getFileName(e),[4,this.settingCacheHandler.getCacheSetting(n)];case 2:return(n=i.sent())&&(this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:0,needPolling:!1,setting:n.setting,versions:n.versions}),r={setting:n.setting,versions:n.versions}),[2,Promise.resolve(r)]}}))}))},p.prototype.fetchSetting=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n=!0),this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" call "+e),this.inited?(this.activePolling(),0<Object.keys(t).length?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(e,r(r({},this.envVariable),t))):(t=this.fileList.find((function(t){return t.fileName===e})))?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file exist"),(new Date).getTime()-t.fetchedTime<1e3*this.options.pollingFreq?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),t.needPolling=n,Promise.resolve({setting:t.setting,versions:t.versions})):this._fetchSetting(e,t,n)):(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file not found"),this._fetchSetting(e,t,n))):Promise.reject(d.errorList.NOT_INIT)},p.prototype.fetchMultiSetting=function(e,t,n){var s=this;return void 0===t&&(t={}),void 0===n&&(n=!0),this.inited?(this.activePolling(),0<Object.keys(t).length?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(e,r(r({},this.envVariable),t))):new Promise((function(t,r){var a={},c=[];if(e.forEach((function(e){return i(s,void 0,void 0,(function(){var t;return o(this,(function(n){return(t=this.fileList.find((function(t){return t.fileName===e})))&&(new Date).getTime()-t.fetchedTime<1e3*this.options.pollingFreq?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),a[e]={setting:t.setting,versions:t.versions}):c.push(e),[2]}))}))})),!(0<c.length))return t(a);s._getCloudSetting(c,s.envVariable).then((function(e){return s.handleFetchFiles(e,n),Object.assign(a,e),t(a)})).catch((function(e){c.forEach((function(e){return i(s,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return(t=this.fileList.find((function(t){return t.fileName==e})))?t.fetchedTime=(new Date).getTime():this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:n,setting:{},versions:{}}),[4,this.settingCacheHandler.getCacheSetting(e)];case 1:return t=r.sent(),a[e]={setting:t.setting,versions:t.versions},[2]}}))}))})),0<Object.keys(a).length?t(a):r(e)}))}))):Promise.reject(d.errorList.NOT_INIT)},p.prototype.setLog=function(e){this.log=e},p.prototype._getCloudSetting=function(e,t){var n=this;return new Promise((function(r,s){return i(n,void 0,void 0,(function(){var n,i,a,c,u;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),a=e instanceof Array,[4,this.settingFetchHandler.fetchSetting(a?e:[e],t,this.token,this.userID)];case 1:return n=o.sent(),a?(i={},e.forEach((function(e){var t,r;0==(null===(t=n[e])||void 0===t?void 0:t.code)&&void 0!==(null===(r=n[e])||void 0===r?void 0:r.data)&&(i[e]={setting:null===(r=n[e])||void 0===r?void 0:r.data,versions:null===(e=n[e])||void 0===e?void 0:e.versions})})),0<Object.keys(i).length?r(i):s(d.errorList.MULTI_FILE_NOT_EXIST)):0===(null===(a=n[e])||void 0===a?void 0:a.code)&&null!==(c=n[e])&&void 0!==c&&c.data?r({setting:null===(c=n[e])||void 0===c?void 0:c.data,versions:null===(c=n[e])||void 0===c?void 0:c.versions}):s({code:null===(u=n[e])||void 0===u?void 0:u.code,msg:null===(u=n[e])||void 0===u?void 0:u.message}),[3,3];case 2:return u=o.sent(),s(u),this.log.info(l.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" fail"),[3,3];case 3:return[2]}}))}))}))},p.prototype.handleFetchFiles=function(e,t){var n=this;Object.keys(e).forEach((function(r){var i=n.fileList.find((function(e){return e.fileName==r}));i?(i.fetchedTime=(new Date).getTime(),i.setting=e[r].setting,i.versions=e[r].versions,i.needPolling=t):n.fileList.find((function(e){return e.fileName===r}))||n.fileList.push({fileName:r,fetchedTime:(new Date).getTime(),needPolling:t,setting:e[r].setting,versions:e[r].versions}),i=n._getFileName(r),n.settingCacheHandler.storeSetting(i,e[r])}))},p.prototype._fetchSetting=function(e,t,n){var r=this;return new Promise((function(s,a){r.log.info(l.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call"),r._getCloudSetting(e,r.envVariable).then((function(i){t?(t.fetchedTime=(new Date).getTime(),t.setting=i.setting,t.versions=i.versions,t.needPolling=n):r.fileList.find((function(t){return t.fileName===e}))||r.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:n,setting:i.setting,versions:i.versions});var o=r._getFileName(e);r.settingCacheHandler.storeSetting(o,i),s(i),r.log.info(l.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call suc")})).catch((function(c){return i(r,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:t?t.fetchedTime=(new Date).getTime():this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:n,setting:{},versions:{}}),r=this._getFileName(e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.settingCacheHandler.getCacheSetting(r)];case 2:return r=i.sent(),s(r),[3,4];case 3:return i.sent(),a(c),[3,4];case 4:return this.log.info(l.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" setting not contain or fetch file fail"),[2]}}))}))}))}))},p.prototype.getPublicEnvVariable=function(){var e;0==this.options.env?(this.publicEnvVariable.userAgent=navigator.userAgent,this.publicEnvVariable.platform=navigator.platform,this.publicEnvVariable.browser=h.getBrowser(),this.publicEnvVariable.deviceid=h.generateUUID()):1==this.options.env&&(e=wx.getSystemInfoSync(),this.publicEnvVariable.brand=e.brand,this.publicEnvVariable.model=e.model,this.publicEnvVariable.system=e.system,this.publicEnvVariable.platform=e.platform,this.publicEnvVariable.wechatVersion=e.version,this.publicEnvVariable.wechatSDKVersion=e.SDKVersion,this.publicEnvVariable.deviceid=h.generateUUID(this.options.env))},p.prototype.pollingSetting=function(e){return i(this,void 0,void 0,(function(){var t,n,r,s=this;return o(this,(function(a){switch(a.label){case 0:if(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" call "+e),t=[],this.fileList.forEach((function(e){e.fileName,e.needPolling&&t.push(e.fileName)})),!(0<t.length))return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.settingFetchHandler.fetchSetting(t,this.envVariable,this.token,this.userID)];case 2:return n=a.sent(),this.fileList.forEach((function(e){return i(s,void 0,void 0,(function(){var t,r,i,s;return o(this,(function(o){switch(o.label){case 0:return e.fetchedTime=(new Date).getTime(),t=this._getFileName(e.fileName),n[e.fileName]&&0===n[e.fileName].code&&n[e.fileName].data?(r=JSON.stringify(n[e.fileName].data),i=JSON.stringify(e.setting),s={setting:n[e.fileName].data,versions:null===(s=n[e.fileName])||void 0===s?void 0:s.versions},i!==r&&(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" "+e.fileName+" setting changed"),e.setting=s.setting,e.versions=s.versions,this.options.pollingNotify(e.fileName,s)),[4,this.settingCacheHandler.getCacheSetting(t)]):[3,2];case 1:i=o.sent(),r=JSON.stringify(i),i=JSON.stringify(s),r!==i&&this.settingCacheHandler.storeSetting(t,s),o.label=2;case 2:return[2]}}))}))})),[3,4];case 3:return r=a.sent(),this.log.error(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" fetch fail "+JSON.stringify(r)),[3,4];case 4:return[3,6];case 5:this.log.info(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" polling no file"),a.label=6;case 6:return this.pollingTimer&&clearTimeout(this.pollingTimer),this.pollingTimer=setTimeout((function(){s.pollingSetting(e)}),e),[2]}}))}))},p.prototype._getFileName=function(e){return e},p.prototype.activePolling=function(){this.pollingTimer||this.pollingSetting(1e3*this.options.pollingFreq)},n=p,t.ZegoSetting=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLog=void 0;var r=(i.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},i.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},i.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},i.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},i.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},i);function i(){}t.ZegoLog=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,(s=i?[2&s[0],i.value]:s)[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingCacheHandler=void 0;var o=n(0),s=n(7);function a(e,t,n){void 0===n&&(n=0),this.storeName=e,this.log=t,this.store=s.createZegoStore(e,n)}a.prototype.getCacheSetting=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.log.info(o.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_GET_CACHE_SETTING+" call"),[4,this.store.getItem(e)];case 1:return[2,t.sent()||""]}}))}))},a.prototype.storeSetting=function(e,t){return r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return this.log.info(o.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_STORE_SETTING+" call"),[4,this.store.setItem(e,t)];case 1:return n.sent(),[2]}}))}))},n=a,t.SettingCacheHandler=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoStore=t.ZegoWechatMiniStore=void 0;var r=n(8),i=n(9),o=(s.prototype.getItem=function(e){var t=this;return new Promise((function(n,r){try{n(wx.getStorageSync(t.keyPrefix+e))}catch(n){r(n)}}))},s.prototype.setItem=function(e,t){var n=this;return new Promise((function(r,i){try{wx.setStorageSync(n.keyPrefix+e,t),r()}catch(r){i(r)}}))},s.prototype.removeItem=function(e){var t=this;return new Promise((function(n,r){try{n(wx.removeStorageSync(t.keyPrefix+e))}catch(n){r(n)}}))},s.prototype.clear=function(){return new Promise((function(e,t){try{wx.clearStorageSync(),e()}catch(e){t(e)}}))},s.prototype.keys=function(){var e=this;return new Promise((function(t,n){try{var r=wx.getStorageInfoSync().keys,i=[];r.forEach((function(t){0==t.indexOf(e.keyPrefix)&&i.push(t.replace(e.keyPrefix,""))})),i.sort(),t(i)}catch(t){n(t)}}))},s);function s(e){this.storeName=e,this.keyPrefix=e+"/",this.storeName}t.ZegoWechatMiniStore=o,t.createZegoStore=function(e,t){return t===i.ZEGO_ENV.BROWSER?r.createInstance({name:e}):new o(e)}},function(t,n){t.exports=e},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SOCKET_DISCONNECT=t.ENUM_REMOTE_TYPE=t.ZEGO_BROWSER_TYPE=t.ZEGO_ENV=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.0.2",(r=t.ZEGO_ENV||(t.ZEGO_ENV={}))[r.BROWSER=0]="BROWSER",r[r.WEIXINMINI=1]="WEIXINMINI",(r=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[r.IE=0]="IE",r[r.FIREFOX=1]="FIREFOX",r[r.CHROME=2]="CHROME",r[r.SAFARI=3]="SAFARI",r[r.OPERA=4]="OPERA",r[r.WEIXIN=5]="WEIXIN",r[r.WEIXINMINI=6]="WEIXINMINI",r[r.UNKOWN=7]="UNKOWN",(r=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[r.DISABLE=0]="DISABLE",r[r.WEBSOCKET=1]="WEBSOCKET",r[r.HTTPS=2]="HTTPS",t.SOCKET_DISCONNECT=-1},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingFetchHandler=void 0;var i=n(0),o=n(11),s=n(2);function a(e,t){this.options=e,this.log=t,this.seq=0}a.prototype.setOptions=function(e){this.options=e},a.prototype.setDataReport=function(e){this.reportFunc=e},a.prototype.fetchSetting=function(e,t,n,a){var c=this;return new Promise((function(l,u){var d={product:c.options.product,files:e,param:r(r({},t),{deviceid:void 0}),appid:c.options.appID,token:n,id_name:a,timestamp:(new Date).getTime(),biztype:0,deviceid:t.deviceid||s.generateUUID(c.options.env),compress:!1,mode:c.options.online?"online":"test"},h=c.seq++;c.reportFunc&&c.reportFunc(h,"request_start"),o.fetch(c.options.urls,d,c.options.env||0).then((function(e){var t,n=e.code,r=(e.msg,e.data);e=e.reportData,c.log.info(i.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+n),r&&(t=[],Object.keys(r).forEach((function(e){t.push({name:e,error:r[e].code})}))),c.reportFunc&&c.reportFunc(h,"request_end",{code:n,reportData:e,params:d,files:t}),l(r)})).catch((function(e){var t=e.code,n=e.msg;e.data,e=e.reportData,c.log.warn(i.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+t),c.reportFunc&&c.reportFunc(h,"request_end",{code:t,params:d,reportData:e}),u({code:t,msg:n})}))}))},n=a,t.SettingFetchHandler=n},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=void 0;var i=n(1);t.fetch=function e(t,n,o,s,a,c){return void 0===s&&(s=5),void 0===a&&(a=0),void 0===c&&(c=[]),new Promise((function(l,u){a=a||(new Date).getTime();var d,h,p,f=(new Date).getTime();0===o?(d=new XMLHttpRequest,h=t[(s+1)%2]||t[0],d.open("post",h),1==n.compress&&(d.responseType="arraybuffer"),d.ontimeout=function(){},d.onreadystatechange=function(){var p,g,m,_;4==d.readyState&&(200<=d.status&&d.status<300||304==d.status?(m=void 0,1==n.compress||(m=d.responseText),_=(new Date).getTime()-f,p=(g=JSON.parse(m)).code,m=g.message,g=g.data,c.push({timestamp:f,url:h,error:p,duration:_}),0===p?l({code:p,msg:m,data:g,reportData:c}):u({code:p,msg:m,reportData:c})):(m=(new Date).getTime()-f,c.push({timestamp:f,url:h,error:d.status,duration:m}),_=(new Date).getTime()-a,0<s&&_<8e3?e(t,n,o,--s,a,c).then((function(e){l(e)})).catch((function(e){u(e)})):u(r(r({},i.errorList.FILE_REQUEST_FAIL),{reportData:c}))))},d.timeout=8e3,d.send(JSON.stringify(n))):(p=t[(s+1)%2]||t[0],wx.request({url:p,data:n,method:"POST",success:function(d){var h=(m=d.data).code,g=m.message,m=m.data;void 0!==h?0===h?l({code:h,msg:g,data:m,reportData:c}):u({code:h,msg:g,reportData:c}):(g=(new Date).getTime()-f,c.push({timestamp:f,url:p,error:i.errorList.FILE_REQUEST_FAIL.code,msg:d.data,duration:g}),0<s?e(t,n,o,--s,a,c).then((function(e){l(e)})).catch((function(e){u(e)})):u(r(r({},i.errorList.FILE_REQUEST_FAIL),{reportData:c})))},fail:function(d){var h=(new Date).getTime()-f;c.push({timestamp:f,url:p,error:i.errorList.FILE_REQUEST_FAIL.code,msg:d.errMsg,duration:h}),0<s?e(t,n,o,--s,a,c).then((function(e){l(e)})).catch((function(e){u(e)})):u(r(r({},i.errorList.FILE_REQUEST_FAIL),{reportData:c}))}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INIT_CONFIG=void 0,t.INIT_CONFIG={env:0}}],t.c=r,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3);function t(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return n[e].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n,r}(n(34))},function(e,t,n){(function(t){e.exports=function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,(function(e){var n=t[s][1][e];return i(n||e)}),l,l.exports,e,t,n,r)}return n[s].exports}for(var o=!1,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,n,r){(function(e){"use strict";var t,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(u),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),t=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,t=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}n.exports=function(e){1!==l.push(e)||r||t()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var s=f((function(){t(i,r)}));"error"===s.status&&r(s.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(i);return this.state!==c?d(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=f(h,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},l.reject=function(e){var t=new this(i);return o.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,c=-1,l=new this(i);++c<n;)u(e[c],c);return l;function u(e,i){t.resolve(e).then((function(e){s[i]=e,++a!==n||r||(r=!0,o.resolve(l,s))}),(function(e){r||(r=!0,o.reject(l,e))}))}},l.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s,a=-1,c=new this(i);++a<n;)s=e[a],t.resolve(s).then((function(e){r||(r=!0,o.resolve(c,e))}),(function(e){r||(r=!0,o.reject(c,e))}));return c}},{1:1}],3:[function(e,n,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var s=Promise;function a(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function l(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d=void 0,h={},p=Object.prototype.toString;function f(e){return"boolean"==typeof d?s.resolve(d):function(e){return new s((function(t){var n=e.transaction("local-forage-detect-blob-support","readwrite"),r=o([""]);n.objectStore("local-forage-detect-blob-support").put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return d=e}))}function g(e){var t=h[e.name],n={};n.promise=new s((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function m(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function _(e,t){var n=h[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function v(e,t){return new s((function(n,r){if(h[e.name]=h[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);g(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var s=i.open.apply(i,o);t&&(s.onupgradeneeded=function(t){var n=s.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore("local-forage-detect-blob-support")}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),r(s.error)},s.onsuccess=function(){n(s.result),m(e)}}))}function E(e){return v(e,!1)}function A(e){return v(e,!0)}function y(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function S(e){return o([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(atob(e.data))],{type:e.type})}function b(e){return e&&e.__local_forage_encoded_blob}function C(e){var t=this,n=t._initReady().then((function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(n,e,e),n}function T(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return s.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),A(e)})).then((function(){return function(e){g(e);for(var t=h[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,E(e).then((function(t){return e.db=t,y(e)?A(e):t})).then((function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(t){throw _(e,t),t}))}(e).then((function(){T(e,t,n,r-1)}))})).catch(n);n(i)}}var I={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var i=h[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},h[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=C);var o=[];function a(){return s.resolve()}for(var c=0;c<i.forages.length;c++){var l=i.forages[c];l!==t&&o.push(l._initReady().catch(a))}var u=i.forages.slice(0);return s.all(o).then((function(){return n.db=i.db,E(n)})).then((function(e){return n.db=e,y(n,t._defaultConfig.version)?A(n):e})).then((function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var o=u[r];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))},_support:function(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=new s((function(t,r){n.ready().then((function(){T(n._dbInfo,"readonly",(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;b(r)&&(r=S(r));var i=e(r,n.key,a++);void 0!==i?t(i):n.continue()}else t()},s.onerror=function(){r(s.error)}}catch(e){r(e)}}))})).catch(r)}));return a(r,t),r},getItem:function(e,t){var n=this;e=l(e);var r=new s((function(t,r){n.ready().then((function(){T(n._dbInfo,"readonly",(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),b(e)&&(e=S(e)),t(e)},s.onerror=function(){r(s.error)}}catch(e){r(e)}}))})).catch(r)}));return a(r,t),r},setItem:function(e,t,n){var r=this;e=l(e);var i=new s((function(n,i){var o;r.ready().then((function(){return o=r._dbInfo,"[object Blob]"===p.call(t)?f(o.db).then((function(e){return e?t:(n=t,new s((function(e,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){var r=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):t})).then((function(t){T(r._dbInfo,"readwrite",(function(o,s){if(o)return i(o);try{var a=s.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=a.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),n(t)},s.onabort=s.onerror=function(){var e=c.error?c.error:c.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return a(i,n),i},removeItem:function(e,t){var n=this;e=l(e);var r=new s((function(t,r){n.ready().then((function(){T(n._dbInfo,"readwrite",(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return a(r,t),r},clear:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){T(t._dbInfo,"readwrite",(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return a(n,e),n},length:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){T(t._dbInfo,"readonly",(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return a(n,e),n},key:function(e,t){var n=this,r=new s((function(t,r){e<0?t(null):n.ready().then((function(){T(n._dbInfo,"readonly",(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName),a=!1,c=s.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||a?t(n.key):(a=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}}))})).catch(r)}));return a(r,t),r},keys:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){T(t._dbInfo,"readonly",(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];o.onsuccess=function(){var t=o.result;t?(s.push(t.key),t.continue()):e(s)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return a(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var c=e.name===n.name&&o._dbInfo.db,l=c?s.resolve(o._dbInfo.db):E(e).then((function(t){var n=h[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t}));r=e.storeName?l.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;g(e);var r=h[e.name],o=r.forages;t.close();for(var a=0;a<o.length;a++){var c=o[a];c._dbInfo.db=null,c._dbInfo.version=n}return new s((function(t,r){var o=i.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,m(n._dbInfo)}})).catch((function(t){throw(_(e,t)||s.resolve()).catch((function(){})),t}))}})):l.then((function(t){g(e);var n=h[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new s((function(t,n){var r=i.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)m(r[t]._dbInfo)})).catch((function(t){throw(_(e,t)||s.resolve()).catch((function(){})),t}))}))}else r=s.reject("Invalid arguments");return a(r,t),r}},R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=/^~~local_forage_type~([^~]+)~/,k="__lfsc__:".length,O=k+"arbf".length,N=Object.prototype.toString;function L(e){var t,n,r,i,o,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var l=new ArrayBuffer(s),u=new Uint8Array(l);for(t=0;t<a;t+=4)n=R.indexOf(e[t]),r=R.indexOf(e[t+1]),i=R.indexOf(e[t+2]),o=R.indexOf(e[t+3]),u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|i>>2,u[c++]=(3&i)<<6|63&o;return l}function P(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=R[n[t]>>2],r+=R[(3&n[t])<<4|n[t+1]>>4],r+=R[(15&n[t+1])<<2|n[t+2]>>6],r+=R[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var D={serialize:function(e,t){var n="";if(e&&(n=N.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===N.call(e.buffer))){var r,i="__lfsc__:";e instanceof ArrayBuffer?(r=e,i+="arbf"):(r=e.buffer,"[object Int8Array]"===n?i+="si08":"[object Uint8Array]"===n?i+="ui08":"[object Uint8ClampedArray]"===n?i+="uic8":"[object Int16Array]"===n?i+="si16":"[object Uint16Array]"===n?i+="ur16":"[object Int32Array]"===n?i+="si32":"[object Uint32Array]"===n?i+="ui32":"[object Float32Array]"===n?i+="fl32":"[object Float64Array]"===n?i+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(i+P(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n="~~local_forage_type~"+e.type+"~"+P(this.result);t("__lfsc__:blob"+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if("__lfsc__:"!==e.substring(0,k))return JSON.parse(e);var t,n=e.substring(O),r=e.substring(k,O);if("blob"===r&&w.test(n)){var i=n.match(w);t=i[1],n=n.substring(i[0].length)}var s=L(n);switch(r){case"arbf":return s;case"blob":return o([s],{type:t});case"si08":return new Int8Array(s);case"ui08":return new Uint8Array(s);case"uic8":return new Uint8ClampedArray(s);case"si16":return new Int16Array(s);case"ur16":return new Uint16Array(s);case"si32":return new Int32Array(s);case"ui32":return new Uint32Array(s);case"fl32":return new Float32Array(s);case"fl64":return new Float64Array(s);default:throw new Error("Unkown type: "+r)}},stringToBuffer:L,bufferToString:P};function M(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function x(e,t,n,r,i,o){e.executeSql(n,r,i,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?o(e,s):M(e,t,(function(){e.executeSql(n,r,i,o)}),o)}),o):o(e,s)}),o)}function B(e,t,n,r){var i=this;e=l(e);var o=new s((function(o,s){i.ready().then((function(){void 0===t&&(t=null);var a=t,c=i._dbInfo;c.serializer.serialize(t,(function(t,l){l?s(l):c.db.transaction((function(n){x(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(a)}),(function(e,t){s(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(B.apply(i,[e,a,n,r-1]));s(t)}}))}))})).catch(s)}));return a(o,n),o}function U(e){return new s((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);t({db:e,storeNames:i})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}var F={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new s((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(i){M(i,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=D,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new s((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){x(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var o=r.rows,s=o.length,a=0;a<s;a++){var c=o.item(a),l=c.value;if(l&&(l=i.serializer.deserialize(l)),void 0!==(l=e(l,c.key,a+1)))return void t(l)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},getItem:function(e,t){var n=this;e=l(e);var r=new s((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){x(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},setItem:function(e,t,n){return B.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=l(e);var r=new s((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){x(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},clear:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){x(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},length:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){x(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},key:function(e,t){var n=this,r=new s((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){x(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},keys:function(e){var t=this,n=new s((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){x(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;return a(r=e.name?new s((function(t){var r;r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(U(r))})).then((function(e){return new s((function(t,n){e.db.transaction((function(r){function i(e){return new s((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var o=[],a=0,c=e.storeNames.length;a<c;a++)o.push(i(e.storeNames[a]));s.all(o).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):s.reject("Invalid arguments"),t),r}};function V(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function j(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0}var G={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=V(e,this._defaultConfig),j()?(this._dbInfo=t,t.serializer=D,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,s=1,a=0;a<o;a++){var c=localStorage.key(a);if(0===c.indexOf(r)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,c.substring(i),s++)))return l}}}));return a(r,t),r},getItem:function(e,t){var n=this;e=l(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return a(r,t),r},setItem:function(e,t,n){var r=this;e=l(e);var i=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new s((function(i,o){var s=r._dbInfo;s.serializer.serialize(t,(function(t,r){if(r)o(r);else try{localStorage.setItem(s.keyPrefix+e,t),i(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return a(i,n),i},removeItem:function(e,t){var n=this;e=l(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return a(r,t),r},clear:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return a(n,e),n},length:function(e){var t=this.keys().then((function(e){return e.length}));return a(t,e),t},key:function(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return a(r,t),r},keys:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r}));return a(n,e),n},dropInstance:function(e,t){if(t=u.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return a(r=e.name?new s((function(t){e.storeName?t(V(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):s.reject("Invalid arguments"),t),r}},H=function(e,t){for(var n,r,i=e.length,o=0;o<i;){if((n=e[o])===(r=t)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;o++}return!1},Q=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},W={},q={},z={INDEXEDDB:I,WEBSQL:F,LOCALSTORAGE:G},Z=[z.INDEXEDDB._driver,z.WEBSQL._driver,z.LOCALSTORAGE._driver],$=["dropInstance"],K=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat($),Y={description:"",driver:Z.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function J(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function X(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Q(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ee=new(function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),z)if(z.hasOwnProperty(n)){var r=z[n],i=r._driver;this[n]=i,W[i]||this.defineDriver(r)}this._defaultConfig=X({},Y),this._config=X({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new s((function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(i);for(var o=K.concat("_initStorage"),c=0,l=o.length;c<l;c++){var u=o[c];if((!H($,u)||e[u])&&"function"!=typeof e[u])return void n(i)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=s.reject(t);return a(n,arguments[arguments.length-1]),n}},n=0,r=$.length;n<r;n++){var i=$[n];e[i]||(e[i]=t(i))}}();var d=function(n){W[r]&&console.info("Redefining LocalForage driver: "+r),W[r]=e,q[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,n):d(!!e._support):d(!0)}catch(e){n(e)}}));return c(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=W[e]?s.resolve(W[e]):s.reject(new Error("Driver not found."));return c(r,t,n),r},e.prototype.getSerializer=function(e){var t=s.resolve(D);return c(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Q(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function a(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}var l=null!==this._driverSet?this._driverSet.catch((function(){return s.resolve()})):s.resolve();return this._driverSet=l.then((function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var i=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(a).catch(n)}o();var c=new Error("No available storage method found.");return r._driverSet=s.reject(c),r._driverSet}()}}(i)}))})).catch((function(){o();var e=new Error("No available storage method found.");return r._driverSet=s.reject(e),r._driverSet})),c(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!q[e]},e.prototype._extend=function(e){X(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=K.length;e<t;e++)J(this,K[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ee},{3:3}]},{},[4])(4)}).call(this,n(35))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}])}))},d2bb:function(e,t,n){var r=n("e330"),i=n("825a"),o=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(n,[]),t=n instanceof Array}catch(s){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},d397:function(e,t,n){"use strict";function r(e){return void 0!==e&&null!==e}function i(e){var t=/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi;return t.test(e)}t.__esModule=!0,t.isDef=r,t.isKorean=i},d3b7:function(e,t,n){var r=n("00ee"),i=n("6eeb"),o=n("b041");r||i(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(e,t,n){var r=n("9bf2").f,i=n("1a2d"),o=n("b622"),s=o("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,s)&&r(e,s,{configurable:!0,value:t})}},d4af:function(e,t,n){"use strict";var r=n("8eb7"),i=n("7b3e"),o=10,s=40,a=800;function c(e){var t=0,n=0,r=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=t*o,i=n*o,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||i)&&e.deltaMode&&(1==e.deltaMode?(r*=s,i*=s):(r*=a,i*=a)),r&&!t&&(t=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:i}}c.getEventType=function(){return r.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},e.exports=c},d4c3:function(e,t,n){var r=n("342f"),i=n("da84");e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==i.Pebble},d4ec:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("d9e2");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},d58f:function(e,t,n){var r=n("da84"),i=n("59ed"),o=n("7b0b"),s=n("44ad"),a=n("07fa"),c=r.TypeError,l=function(e){return function(t,n,r,l){i(n);var u=o(t),d=s(u),h=a(u),p=e?h-1:0,f=e?-1:1;if(r<2)while(1){if(p in d){l=d[p],p+=f;break}if(p+=f,e?p<0:h<=p)throw c("Reduce of empty array with no initial value")}for(;e?p>=0:h>p;p+=f)p in d&&(l=n(l,d[p],p,u));return l}};e.exports={left:l(!1),right:l(!0)}},d5d6:function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").forEach,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("forEach",(function(e){i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},d6d6:function(e,t,n){var r=n("da84"),i=r.TypeError;e.exports=function(e,t){if(e<t)throw i("Not enough arguments");return e}},d784:function(e,t,n){"use strict";n("ac1f");var r=n("e330"),i=n("6eeb"),o=n("9263"),s=n("d039"),a=n("b622"),c=n("9112"),l=a("species"),u=RegExp.prototype;e.exports=function(e,t,n,d){var h=a(e),p=!s((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),f=p&&!s((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!p||!f||n){var g=r(/./[h]),m=t(h,""[e],(function(e,t,n,i,s){var a=r(e),c=t.exec;return c===o||c===u.exec?p&&!s?{done:!0,value:g(t,n,i)}:{done:!0,value:a(n,t,i)}:{done:!1}}));i(String.prototype,e,m[0]),i(u,h,m[1])}d&&c(u[h],"sham",!0)}},d7d1:function(e,t,n){"use strict";var r;(function(i){var o={},s=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,a="\\d\\d?",c="\\d{3}",l="\\d{4}",u="[^\\s]+",d=/\[([^]*?)\]/gm,h=function(){};function p(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")}function f(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}function g(e){return function(t,n,r){var i=r[e].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~i&&(t.month=i)}}function m(e,t){e=String(e),t=t||2;while(e.length<t)e="0"+e;return e}var _=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],v=["January","February","March","April","May","June","July","August","September","October","November","December"],E=f(v,3),A=f(_,3);o.i18n={dayNamesShort:A,dayNames:_,monthNamesShort:E,monthNames:v,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10)*e%10]}};var y={D:function(e){return e.getDay()},DD:function(e){return m(e.getDay())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return e.getDate()},dd:function(e){return m(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return m(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return m(String(e.getFullYear()),4).substr(2)},yyyy:function(e){return m(e.getFullYear(),4)},h:function(e){return e.getHours()%12||12},hh:function(e){return m(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return m(e.getHours())},m:function(e){return e.getMinutes()},mm:function(e){return m(e.getMinutes())},s:function(e){return e.getSeconds()},ss:function(e){return m(e.getSeconds())},S:function(e){return Math.round(e.getMilliseconds()/100)},SS:function(e){return m(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return m(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+m(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)}},S={d:[a,function(e,t){e.day=t}],Do:[a+u,function(e,t){e.day=parseInt(t,10)}],M:[a,function(e,t){e.month=t-1}],yy:[a,function(e,t){var n=new Date,r=+(""+n.getFullYear()).substr(0,2);e.year=""+(t>68?r-1:r)+t}],h:[a,function(e,t){e.hour=t}],m:[a,function(e,t){e.minute=t}],s:[a,function(e,t){e.second=t}],yyyy:[l,function(e,t){e.year=t}],S:["\\d",function(e,t){e.millisecond=100*t}],SS:["\\d{2}",function(e,t){e.millisecond=10*t}],SSS:[c,function(e,t){e.millisecond=t}],D:[a,h],ddd:[u,h],MMM:[u,g("monthNamesShort")],MMMM:[u,g("monthNames")],a:[u,function(e,t,n){var r=t.toLowerCase();r===n.amPm[0]?e.isPm=!1:r===n.amPm[1]&&(e.isPm=!0)}],ZZ:["[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z",function(e,t){var n,r=(t+"").match(/([+-]|\d\d)/gi);r&&(n=60*r[1]+parseInt(r[2],10),e.timezoneOffset="+"===r[0]?n:-n)}]};S.dd=S.d,S.dddd=S.ddd,S.DD=S.D,S.mm=S.m,S.hh=S.H=S.HH=S.h,S.MM=S.M,S.ss=S.s,S.A=S.a,o.masks={default:"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/D/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},o.format=function(e,t,n){var r=n||o.i18n;if("number"===typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date in fecha.format");t=o.masks[t]||t||o.masks["default"];var i=[];return t=t.replace(d,(function(e,t){return i.push(t),"@@@"})),t=t.replace(s,(function(t){return t in y?y[t](e,r):t.slice(1,t.length-1)})),t.replace(/@@@/g,(function(){return i.shift()}))},o.parse=function(e,t,n){var r=n||o.i18n;if("string"!==typeof t)throw new Error("Invalid format in fecha.parse");if(t=o.masks[t]||t,e.length>1e3)return null;var i={},a=[],c=[];t=t.replace(d,(function(e,t){return c.push(t),"@@@"}));var l=p(t).replace(s,(function(e){if(S[e]){var t=S[e];return a.push(t[1]),"("+t[0]+")"}return e}));l=l.replace(/@@@/g,(function(){return c.shift()}));var u=e.match(new RegExp(l,"i"));if(!u)return null;for(var h=1;h<u.length;h++)a[h-1](i,u[h],r);var f,g=new Date;return!0===i.isPm&&null!=i.hour&&12!==+i.hour?i.hour=+i.hour+12:!1===i.isPm&&12===+i.hour&&(i.hour=0),null!=i.timezoneOffset?(i.minute=+(i.minute||0)-+i.timezoneOffset,f=new Date(Date.UTC(i.year||g.getFullYear(),i.month||0,i.day||1,i.hour||0,i.minute||0,i.second||0,i.millisecond||0))):f=new Date(i.year||g.getFullYear(),i.month||0,i.day||1,i.hour||0,i.minute||0,i.second||0,i.millisecond||0),f},e.exports?e.exports=o:(r=function(){return o}.call(t,n,t,e),void 0===r||(e.exports=r))})()},d81d:function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").map,o=n("1dde"),s=o("map");r({target:"Array",proto:!0,forced:!s},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},d86b:function(e,t,n){var r=n("d039");e.exports=r((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},d925:function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},d940:function(e,t,n){"use strict";t.__esModule=!0,t.validateRangeInOneMonth=t.extractTimeFormat=t.extractDateFormat=t.nextYear=t.prevYear=t.nextMonth=t.prevMonth=t.changeYearMonthAndClampDate=t.timeWithinRange=t.limitTimeRange=t.clearMilliseconds=t.clearTime=t.modifyWithTimeString=t.modifyTime=t.modifyDate=t.range=t.getRangeMinutes=t.getMonthDays=t.getPrevMonthLastDays=t.getRangeHours=t.getWeekNumber=t.getStartDateOfMonth=t.nextDate=t.prevDate=t.getFirstDayOfMonth=t.getDayCountOfYear=t.getDayCountOfMonth=t.parseDate=t.formatDate=t.isDateObject=t.isDate=t.toDate=t.getI18nSettings=void 0;var r=n("d7d1"),i=s(r),o=n("4897");function s(e){return e&&e.__esModule?e:{default:e}}var a=["sun","mon","tue","wed","thu","fri","sat"],c=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],l=function(e,t){for(var n=[],r=e;r<=t;r++)n.push(r);return n},u=t.getI18nSettings=function(){return{dayNamesShort:a.map((function(e){return(0,o.t)("el.datepicker.weeks."+e)})),dayNames:a.map((function(e){return(0,o.t)("el.datepicker.weeks."+e)})),monthNamesShort:c.map((function(e){return(0,o.t)("el.datepicker.months."+e)})),monthNames:c.map((function(e,t){return(0,o.t)("el.datepicker.month"+(t+1))})),amPm:["am","pm"]}},d=t.toDate=function(e){return h(e)?new Date(e):null},h=t.isDate=function(e){return null!==e&&void 0!==e&&(!isNaN(new Date(e).getTime())&&!Array.isArray(e))},p=(t.isDateObject=function(e){return e instanceof Date},t.formatDate=function(e,t){return e=d(e),e?i.default.format(e,t||"yyyy-MM-dd",u()):""},t.parseDate=function(e,t){return i.default.parse(e,t||"yyyy-MM-dd",u())}),f=t.getDayCountOfMonth=function(e,t){return 3===t||5===t||8===t||10===t?30:1===t?e%4===0&&e%100!==0||e%400===0?29:28:31},g=(t.getDayCountOfYear=function(e){var t=e%400===0||e%100!==0&&e%4===0;return t?366:365},t.getFirstDayOfMonth=function(e){var t=new Date(e.getTime());return t.setDate(1),t.getDay()},t.prevDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(e.getFullYear(),e.getMonth(),e.getDate()-t)});t.nextDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},t.getStartDateOfMonth=function(e,t){var n=new Date(e,t,1),r=n.getDay();return g(n,0===r?7:r)},t.getWeekNumber=function(e){if(!h(e))return null;var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},t.getRangeHours=function(e){var t=[],n=[];if((e||[]).forEach((function(e){var t=e.map((function(e){return e.getHours()}));n=n.concat(l(t[0],t[1]))})),n.length)for(var r=0;r<24;r++)t[r]=-1===n.indexOf(r);else for(var i=0;i<24;i++)t[i]=!1;return t},t.getPrevMonthLastDays=function(e,t){if(t<=0)return[];var n=new Date(e.getTime());n.setDate(0);var r=n.getDate();return _(t).map((function(e,n){return r-(t-n-1)}))},t.getMonthDays=function(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),n=t.getDate();return _(n).map((function(e,t){return t+1}))};function m(e,t,n,r){for(var i=t;i<n;i++)e[i]=r}t.getRangeMinutes=function(e,t){var n=new Array(60);return e.length>0?e.forEach((function(e){var r=e[0],i=e[1],o=r.getHours(),s=r.getMinutes(),a=i.getHours(),c=i.getMinutes();o===t&&a!==t?m(n,s,60,!0):o===t&&a===t?m(n,s,c+1,!0):o!==t&&a===t?m(n,0,c+1,!0):o<t&&a>t&&m(n,0,60,!0)})):m(n,0,60,!0),n};var _=t.range=function(e){return Array.apply(null,{length:e}).map((function(e,t){return t}))},v=t.modifyDate=function(e,t,n,r){return new Date(t,n,r,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},E=t.modifyTime=function(e,t,n,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t,n,r,e.getMilliseconds())},A=(t.modifyWithTimeString=function(e,t){return null!=e&&t?(t=p(t,"HH:mm:ss"),E(e,t.getHours(),t.getMinutes(),t.getSeconds())):e},t.clearTime=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},t.clearMilliseconds=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),0)},t.limitTimeRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"HH:mm:ss";if(0===t.length)return e;var r=function(e){return i.default.parse(i.default.format(e,n),n)},o=r(e),s=t.map((function(e){return e.map(r)}));if(s.some((function(e){return o>=e[0]&&o<=e[1]})))return e;var a=s[0][0],c=s[0][0];s.forEach((function(e){a=new Date(Math.min(e[0],a)),c=new Date(Math.max(e[1],a))}));var l=o<a?a:c;return v(l,e.getFullYear(),e.getMonth(),e.getDate())}),y=(t.timeWithinRange=function(e,t,n){var r=A(e,t,n);return r.getTime()===e.getTime()},t.changeYearMonthAndClampDate=function(e,t,n){var r=Math.min(e.getDate(),f(t,n));return v(e,t,n,r)});t.prevMonth=function(e){var t=e.getFullYear(),n=e.getMonth();return 0===n?y(e,t-1,11):y(e,t,n-1)},t.nextMonth=function(e){var t=e.getFullYear(),n=e.getMonth();return 11===n?y(e,t+1,0):y(e,t,n+1)},t.prevYear=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.getFullYear(),r=e.getMonth();return y(e,n-t,r)},t.nextYear=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.getFullYear(),r=e.getMonth();return y(e,n+t,r)},t.extractDateFormat=function(e){return e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim()},t.extractTimeFormat=function(e){return e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?y{2,4}/g,"").trim()},t.validateRangeInOneMonth=function(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},d9b5:function(e,t,n){var r=n("da84"),i=n("d066"),o=n("1626"),s=n("3a9b"),a=n("fdbf"),c=r.Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return o(t)&&s(t.prototype,c(e))}},d9e2:function(e,t,n){var r=n("23e7"),i=n("da84"),o=n("2ba4"),s=n("e5cb"),a="WebAssembly",c=i[a],l=7!==Error("e",{cause:7}).cause,u=function(e,t){var n={};n[e]=s(e,t,l),r({global:!0,forced:l},n)},d=function(e,t){if(c&&c[e]){var n={};n[e]=s(a+"."+e,t,l),r({target:a,stat:!0,forced:l},n)}};u("Error",(function(e){return function(t){return o(e,this,arguments)}})),u("EvalError",(function(e){return function(t){return o(e,this,arguments)}})),u("RangeError",(function(e){return function(t){return o(e,this,arguments)}})),u("ReferenceError",(function(e){return function(t){return o(e,this,arguments)}})),u("SyntaxError",(function(e){return function(t){return o(e,this,arguments)}})),u("TypeError",(function(e){return function(t){return o(e,this,arguments)}})),u("URIError",(function(e){return function(t){return o(e,this,arguments)}})),d("CompileError",(function(e){return function(t){return o(e,this,arguments)}})),d("LinkError",(function(e){return function(t){return o(e,this,arguments)}})),d("RuntimeError",(function(e){return function(t){return o(e,this,arguments)}}))},da84:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dc4a:function(e,t,n){var r=n("59ed");e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},dca8:function(e,t,n){var r=n("23e7"),i=n("bb2f"),o=n("d039"),s=n("861d"),a=n("f183").onFreeze,c=Object.freeze,l=o((function(){c(1)}));r({target:"Object",stat:!0,forced:l,sham:!i},{freeze:function(e){return c&&s(e)?c(a(e)):e}})},dcdc:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=120)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},120:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-checkbox",class:[e.border&&e.checkboxSize?"el-checkbox--"+e.checkboxSize:"",{"is-disabled":e.isDisabled},{"is-bordered":e.border},{"is-checked":e.isChecked}],attrs:{id:e.id}},[n("span",{staticClass:"el-checkbox__input",class:{"is-disabled":e.isDisabled,"is-checked":e.isChecked,"is-indeterminate":e.indeterminate,"is-focus":e.focus},attrs:{tabindex:!!e.indeterminate&&0,role:!!e.indeterminate&&"checkbox","aria-checked":!!e.indeterminate&&"mixed"}},[n("span",{staticClass:"el-checkbox__inner"}),e.trueLabel||e.falseLabel?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var n=e.model,r=t.target,i=r.checked?e.trueLabel:e.falseLabel;if(Array.isArray(n)){var o=null,s=e._i(n,o);r.checked?s<0&&(e.model=n.concat([o])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=i},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var n=e.model,r=t.target,i=!!r.checked;if(Array.isArray(n)){var o=e.label,s=e._i(n,o);r.checked?s<0&&(e.model=n.concat([o])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=i},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})]),e.$slots.default||e.label?n("span",{staticClass:"el-checkbox__label"},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])},i=[];r._withStripped=!0;var o=n(4),s=n.n(o),a={name:"ElCheckbox",mixins:[s.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):(this.$emit("input",e),this.selfModel=e)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){var e=this.$parent;while(e){if("ElCheckboxGroup"===e.$options.componentName)return this._checkboxGroup=e,!0;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var e=this._checkboxGroup,t=e.max,n=e.min;return!(!t&&!n)&&this.model.length>=t&&!this.isChecked||this.model.length<=n&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||e}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;if(!this.isLimitExceeded){var n=void 0;n=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",n,e),this.$nextTick((function(){t.isGroup&&t.dispatch("ElCheckboxGroup","change",[t._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}}},c=a,l=n(0),u=Object(l["a"])(c,r,i,!1,null,null,null);u.options.__file="packages/checkbox/src/checkbox.vue";var d=u.exports;d.install=function(e){e.component(d.name,d)};t["default"]=d},4:function(e,t){e.exports=n("d010")}})},ddb0:function(e,t,n){var r=n("da84"),i=n("fdbc"),o=n("785a"),s=n("e260"),a=n("9112"),c=n("b622"),l=c("iterator"),u=c("toStringTag"),d=s.values,h=function(e,t){if(e){if(e[l]!==d)try{a(e,l,d)}catch(r){e[l]=d}if(e[u]||a(e,u,t),i[t])for(var n in s)if(e[n]!==s[n])try{a(e,n,s[n])}catch(r){e[n]=s[n]}}};for(var p in i)h(r[p]&&r[p].prototype,p);h(o,"DOMTokenList")},df75:function(e,t,n){var r=n("ca84"),i=n("7839");e.exports=Object.keys||function(e){return r(e,i)}},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,r="/"===s.charAt(0))}return t=n(i(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),s="/"===o(e,-1);return e=n(i(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&s&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,c=0;c<s;c++)if(i[c]!==o[c]){a=c;break}var l=[];for(c=a;c<i.length;c++)l.push("..");return l=l.concat(o.slice(a)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),47===t){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},dfb9:function(e,t,n){var r=n("07fa");e.exports=function(e,t){var n=0,i=r(t),o=new e(i);while(i>n)o[n]=t[n++];return o}},dfe5:function(e,t){},e01a:function(e,t,n){"use strict";var r=n("23e7"),i=n("83ab"),o=n("da84"),s=n("e330"),a=n("1a2d"),c=n("1626"),l=n("3a9b"),u=n("577e"),d=n("9bf2").f,h=n("e893"),p=o.Symbol,f=p&&p.prototype;if(i&&c(p)&&(!("description"in f)||void 0!==p().description)){var g={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=l(f,this)?new p(e):void 0===e?p():p(e);return""===e&&(g[t]=!0),t};h(m,p),m.prototype=f,f.constructor=m;var _="Symbol(test)"==String(p("test")),v=s(f.toString),E=s(f.valueOf),A=/^Symbol\((.*)\)[^)]+$/,y=s("".replace),S=s("".slice);d(f,"description",{configurable:!0,get:function(){var e=E(this),t=v(e);if(a(g,e))return"";var n=_?S(t,7,-1):y(t,A,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:m})}},e163:function(e,t,n){var r=n("da84"),i=n("1a2d"),o=n("1626"),s=n("7b0b"),a=n("f772"),c=n("e177"),l=a("IE_PROTO"),u=r.Object,d=u.prototype;e.exports=c?u.getPrototypeOf:function(e){var t=s(e);if(i(t,l))return t[l];var n=t.constructor;return o(n)&&t instanceof n?n.prototype:t instanceof u?d:null}},e177:function(e,t,n){var r=n("d039");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e198:function(e,t,n){var r=n("ef08"),i=n("5524"),o=n("e444"),s=n("fcd4"),a=n("1a14").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},e260:function(e,t,n){"use strict";var r=n("fc6a"),i=n("44d2"),o=n("3f8c"),s=n("69f3"),a=n("9bf2").f,c=n("7dd0"),l=n("c430"),u=n("83ab"),d="Array Iterator",h=s.set,p=s.getterFor(d);e.exports=c(Array,"Array",(function(e,t){h(this,{type:d,target:r(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");var f=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!l&&u&&"values"!==f.name)try{a(f,"name",{value:"values"})}catch(g){}},e2cc:function(e,t,n){var r=n("6eeb");e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},e330:function(e,t,n){var r=n("40d5"),i=Function.prototype,o=i.bind,s=i.call,a=r&&o.bind(s,s);e.exports=r?function(e){return e&&a(e)}:function(e){return e&&function(){return s.apply(e,arguments)}}},e34a:function(e,t,n){var r=n("8b1a")("meta"),i=n("7a41"),o=n("9c0e"),s=n("1a14").f,a=0,c=Object.isExtensible||function(){return!0},l=!n("4b8b")((function(){return c(Object.preventExtensions({}))})),u=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[r].i},h=function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[r].w},p=function(e){return l&&f.NEED&&c(e)&&!o(e,r)&&u(e),e},f=e.exports={KEY:r,NEED:!1,fastKey:d,getWeak:h,onFreeze:p}},e391:function(e,t,n){var r=n("577e");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},e439:function(e,t,n){var r=n("23e7"),i=n("d039"),o=n("fc6a"),s=n("06cf").f,a=n("83ab"),c=i((function(){s(1)})),l=!a||c;r({target:"Object",stat:!0,forced:l,sham:!a},{getOwnPropertyDescriptor:function(e,t){return s(o(e),t)}})},e444:function(e,t){e.exports=!0},e450:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=104)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},10:function(e,t){e.exports=n("f3ad")},104:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["el-input-number",e.inputNumberSize?"el-input-number--"+e.inputNumberSize:"",{"is-disabled":e.inputNumberDisabled},{"is-without-controls":!e.controls},{"is-controls-right":e.controlsAtRight}],on:{dragstart:function(e){e.preventDefault()}}},[e.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":e.minDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.decrease(t)}}},[n("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-down":"minus")})]):e._e(),e.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":e.maxDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.increase(t)}}},[n("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-up":"plus")})]):e._e(),n("el-input",{ref:"input",attrs:{value:e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label},on:{blur:e.handleBlur,focus:e.handleFocus,input:e.handleInput,change:e.handleInputChange},nativeOn:{keydown:[function(t){return!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.increase(t))},function(t){return!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.decrease(t))}]}})],1)},i=[];r._withStripped=!0;var o=n(10),s=n.n(o),a=n(22),c=n.n(a),l=n(30),u={name:"ElInputNumber",mixins:[c()("input")],inject:{elForm:{default:""},elFormItem:{default:""}},directives:{repeatClick:l["a"]},components:{ElInput:s.a},props:{step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String,placeholder:String,precision:{type:Number,validator:function(e){return e>=0&&e===parseInt(e,10)}}},data:function(){return{currentValue:0,userInput:null}},watch:{value:{immediate:!0,handler:function(e){var t=void 0===e?e:Number(e);if(void 0!==t){if(isNaN(t))return;if(this.stepStrictly){var n=this.getPrecision(this.step),r=Math.pow(10,n);t=Math.round(t/this.step)*r*this.step/r}void 0!==this.precision&&(t=this.toPrecision(t,this.precision))}t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),this.currentValue=t,this.userInput=null,this.$emit("input",t)}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},numPrecision:function(){var e=this.value,t=this.step,n=this.getPrecision,r=this.precision,i=n(t);return void 0!==r?(i>r&&console.warn("[Element Warn][InputNumber]precision should not be less than the decimal places of step"),r):Math.max(n(e),i)},controlsAtRight:function(){return this.controls&&"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputNumberDisabled:function(){return this.disabled||!!(this.elForm||{}).disabled},displayValue:function(){if(null!==this.userInput)return this.userInput;var e=this.currentValue;if("number"===typeof e){if(this.stepStrictly){var t=this.getPrecision(this.step),n=Math.pow(10,t);e=Math.round(e/this.step)*n*this.step/n}void 0!==this.precision&&(e=e.toFixed(this.precision))}return e}},methods:{toPrecision:function(e,t){return void 0===t&&(t=this.numPrecision),parseFloat(Math.round(e*Math.pow(10,t))/Math.pow(10,t))},getPrecision:function(e){if(void 0===e)return 0;var t=e.toString(),n=t.indexOf("."),r=0;return-1!==n&&(r=t.length-n-1),r},_increase:function(e,t){if("number"!==typeof e&&void 0!==e)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*e+n*t)/n)},_decrease:function(e,t){if("number"!==typeof e&&void 0!==e)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*e-n*t)/n)},increase:function(){if(!this.inputNumberDisabled&&!this.maxDisabled){var e=this.value||0,t=this._increase(e,this.step);this.setCurrentValue(t)}},decrease:function(){if(!this.inputNumberDisabled&&!this.minDisabled){var e=this.value||0,t=this._decrease(e,this.step);this.setCurrentValue(t)}},handleBlur:function(e){this.$emit("blur",e)},handleFocus:function(e){this.$emit("focus",e)},setCurrentValue:function(e){var t=this.currentValue;"number"===typeof e&&void 0!==this.precision&&(e=this.toPrecision(e,this.precision)),e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),t!==e&&(this.userInput=null,this.$emit("input",e),this.$emit("change",e,t),this.currentValue=e)},handleInput:function(e){this.userInput=e},handleInputChange:function(e){var t=""===e?void 0:Number(e);isNaN(t)&&""!==e||this.setCurrentValue(t),this.userInput=null},select:function(){this.$refs.input.select()}},mounted:function(){var e=this.$refs.input.$refs.input;e.setAttribute("role","spinbutton"),e.setAttribute("aria-valuemax",this.max),e.setAttribute("aria-valuemin",this.min),e.setAttribute("aria-valuenow",this.currentValue),e.setAttribute("aria-disabled",this.inputNumberDisabled)},updated:function(){if(this.$refs&&this.$refs.input){var e=this.$refs.input.$refs.input;e.setAttribute("aria-valuenow",this.currentValue)}}},d=u,h=n(0),p=Object(h["a"])(d,r,i,!1,null,null,null);p.options.__file="packages/input-number/src/input-number.vue";var f=p.exports;f.install=function(e){e.component(f.name,f)};t["default"]=f},2:function(e,t){e.exports=n("5924")},22:function(e,t){e.exports=n("12f2")},30:function(e,t,n){"use strict";var r=n(2);t["a"]={bind:function(e,t,n){var i=null,o=void 0,s=function(){return n.context[t.expression].apply()},a=function(){Date.now()-o<100&&s(),clearInterval(i),i=null};Object(r["on"])(e,"mousedown",(function(e){0===e.button&&(o=Date.now(),Object(r["once"])(document,"mouseup",a),clearInterval(i),i=setInterval(s,100))}))}}}})},e452:function(e,t,n){"use strict";t.__esModule=!0;var r=r||{};r.Utils=r.Utils||{},r.Utils.focusFirstDescendant=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(r.Utils.attemptFocus(n)||r.Utils.focusFirstDescendant(n))return!0}return!1},r.Utils.focusLastDescendant=function(e){for(var t=e.childNodes.length-1;t>=0;t--){var n=e.childNodes[t];if(r.Utils.attemptFocus(n)||r.Utils.focusLastDescendant(n))return!0}return!1},r.Utils.attemptFocus=function(e){if(!r.Utils.isFocusable(e))return!1;r.Utils.IgnoreUtilFocusChanges=!0;try{e.focus()}catch(t){}return r.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===e},r.Utils.isFocusable=function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},r.Utils.triggerEvent=function(e,t){var n=void 0;n=/^mouse|click/.test(t)?"MouseEvents":/^key/.test(t)?"KeyboardEvent":"HTMLEvents";for(var r=document.createEvent(n),i=arguments.length,o=Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];return r.initEvent.apply(r,[t].concat(o)),e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+t,r),e},r.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27},t.default=r.Utils},e507:function(e,t,n){var r=n("512c");r(r.S+r.F,"Object",{assign:n("072d")})},e538:function(e,t,n){var r=n("b622");t.f=r},e58c:function(e,t,n){"use strict";var r=n("2ba4"),i=n("fc6a"),o=n("5926"),s=n("07fa"),a=n("a640"),c=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,d=a("lastIndexOf"),h=u||!d;e.exports=h?function(e){if(u)return r(l,this,arguments)||0;var t=i(this),n=s(t),a=n-1;for(arguments.length>1&&(a=c(a,o(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:l},e5cb:function(e,t,n){"use strict";var r=n("d066"),i=n("1a2d"),o=n("9112"),s=n("3a9b"),a=n("d2bb"),c=n("e893"),l=n("7156"),u=n("e391"),d=n("ab36"),h=n("c770"),p=n("b980"),f=n("c430");e.exports=function(e,t,n,g){var m=g?2:1,_=e.split("."),v=_[_.length-1],E=r.apply(null,_);if(E){var A=E.prototype;if(!f&&i(A,"cause")&&delete A.cause,!n)return E;var y=r("Error"),S=t((function(e,t){var n=u(g?t:e,void 0),r=g?new E(e):new E;return void 0!==n&&o(r,"message",n),p&&o(r,"stack",h(r.stack,2)),this&&s(A,this)&&l(r,this,S),arguments.length>m&&d(r,arguments[m]),r}));if(S.prototype=A,"Error"!==v&&(a?a(S,y):c(S,y,{name:!0})),c(S,E),!f)try{A.name!==v&&o(A,"name",v),A.constructor=S}catch(b){}return S}}},e62d:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){if(i.default.prototype.$isServer)return 0;if(void 0!==s)return s;var e=document.createElement("div");e.className="el-scrollbar__wrap",e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var r=n.offsetWidth;return e.parentNode.removeChild(e),s=t-r,s};var r=n("2b0e"),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var s=void 0},e667:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e671:function(e,t,n){(function(t,n){!function(t,n){e.exports=n()}(0,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function r(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var i=function(e){return e&&e.Math==Math&&e},o=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof e&&e)||Function("return this")(),s=function(e){try{return!!e()}catch(e){return!0}},a=!s((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),c={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u={f:l&&!c.call({1:2},1)?function(e){var t=l(this,e);return!!t&&t.enumerable}:c},d=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},h={}.toString,p=function(e){return h.call(e).slice(8,-1)},f="".split,g=s((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==p(e)?f.call(e,""):Object(e)}:Object,m=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},_=function(e){return g(m(e))},v=function(e){return"object"==typeof e?null!==e:"function"==typeof e},E=function(e,t){if(!v(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!v(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!v(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!v(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},A={}.hasOwnProperty,y=function(e,t){return A.call(e,t)},S=o.document,b=v(S)&&v(S.createElement),C=function(e){return b?S.createElement(e):{}},T=!a&&!s((function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a})),I=Object.getOwnPropertyDescriptor,R={f:a?I:function(e,t){if(e=_(e),t=E(t,!0),T)try{return I(e,t)}catch(e){}if(y(e,t))return d(!u.f.call(e,t),e[t])}},w=/#|\.prototype\./,k=function(e,t){var n=N[O(e)];return n==P||n!=L&&("function"==typeof t?s(t):!!t)},O=k.normalize=function(e){return String(e).replace(w,".").toLowerCase()},N=k.data={},L=k.NATIVE="N",P=k.POLYFILL="P",D=k,M={},x=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},B=function(e,t,n){if(x(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},U=function(e){if(!v(e))throw TypeError(String(e)+" is not an object");return e},F=Object.defineProperty,V={f:a?F:function(e,t,n){if(U(e),t=E(t,!0),U(n),T)try{return F(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},j=a?function(e,t,n){return V.f(e,t,d(1,n))}:function(e,t,n){return e[t]=n,e},G=R.f,H=function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t},Q=function(e,t){var n,r,i,s,a,c,l,u,d=e.target,h=e.global,p=e.stat,f=e.proto,g=h?o:p?o[d]:(o[d]||{}).prototype,m=h?M:M[d]||(M[d]={}),_=m.prototype;for(i in t)n=!D(h?i:d+(p?".":"#")+i,e.forced)&&g&&y(g,i),a=m[i],n&&(c=e.noTargetGet?(u=G(g,i))&&u.value:g[i]),s=n&&c?c:t[i],n&&typeof a==typeof s||(l=e.bind&&n?B(s,o):e.wrap&&n?H(s):f&&"function"==typeof s?B(Function.call,s):s,(e.sham||s&&s.sham||a&&a.sham)&&j(l,"sham",!0),m[i]=l,f&&(y(M,r=d+"Prototype")||j(M,r,{}),M[r][i]=s,e.real&&_&&!_[i]&&j(_,i,s)))},W=Math.ceil,q=Math.floor,z=function(e){return isNaN(e=+e)?0:(e>0?q:W)(e)},Z=Math.min,$=function(e){return e>0?Z(z(e),9007199254740991):0},K=Math.max,Y=Math.min,J=function(e,t){var n=z(e);return n<0?K(n+t,0):Y(n,t)},X=function(e){return function(t,n,r){var i,o=_(t),s=$(o.length),a=J(r,s);if(e&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},ee={includes:X(!0),indexOf:X(!1)},te={},ne=ee.indexOf,re=function(e,t){var n,r=_(e),i=0,o=[];for(n in r)!y(te,n)&&y(r,n)&&o.push(n);for(;t.length>i;)y(r,n=t[i++])&&(~ne(o,n)||o.push(n));return o},ie=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],oe=Object.keys||function(e){return re(e,ie)},se=a?Object.defineProperties:function(e,t){U(e);for(var n,r=oe(t),i=r.length,o=0;i>o;)V.f(e,n=r[o++],t[n]);return e};Q({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperties:se});var ae=r((function(e){var t=M.Object,n=e.exports=function(e,n){return t.defineProperties(e,n)};t.defineProperties.sham&&(n.sham=!0)})),ce=function(e){return"function"==typeof e?e:void 0},le=function(e,t){return arguments.length<2?ce(M[e])||ce(o[e]):M[e]&&M[e][t]||o[e]&&o[e][t]},ue=le("JSON","stringify"),de=/[\uD800-\uDFFF]/g,he=/^[\uD800-\uDBFF]$/,pe=/^[\uDC00-\uDFFF]$/,fe=function(e,t,n){var r=n.charAt(t-1),i=n.charAt(t+1);return he.test(e)&&!pe.test(i)||pe.test(e)&&!he.test(r)?"\\u"+e.charCodeAt(0).toString(16):e},ge=s((function(){return'"\\udf06\\ud834"'!==ue("\udf06\ud834")||'"\\udead"'!==ue("\udead")}));ue&&Q({target:"JSON",stat:!0,forced:ge},{stringify:function(e,t,n){var r=ue.apply(null,arguments);return"string"==typeof r?r.replace(de,fe):r}}),M.JSON||(M.JSON={stringify:JSON.stringify});var me,_e,ve=function(e,t,n){return M.JSON.stringify.apply(null,arguments)},Ee=Array.isArray||function(e){return"Array"==p(e)},Ae=function(e){return Object(m(e))},ye=function(e,t,n){var r=E(t);r in e?V.f(e,r,d(0,n)):e[r]=n},Se="__core-js_shared__",be=o[Se]||function(e,t){try{j(o,e,t)}catch(i){o[e]=t}return t}(Se,{}),Ce=r((function(e){(e.exports=function(e,t){return be[e]||(be[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.4.3",mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),Te=0,Ie=Math.random(),Re=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Te+Ie).toString(36)},we=!!Object.getOwnPropertySymbols&&!s((function(){return!String(Symbol())})),ke=we&&!Symbol.sham&&"symbol"==typeof Symbol(),Oe=Ce("wks"),Ne=o.Symbol,Le=ke?Ne:Re,Pe=function(e){return y(Oe,e)||(we&&y(Ne,e)?Oe[e]=Ne[e]:Oe[e]=Le("Symbol."+e)),Oe[e]},De=Pe("species"),Me=function(e,t){var n;return Ee(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Ee(n.prototype)?v(n)&&null===(n=n[De])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},xe=le("navigator","userAgent")||"",Be=o.process,Ue=Be&&Be.versions,Fe=Ue&&Ue.v8;Fe?_e=(me=Fe.split("."))[0]+me[1]:xe&&(!(me=xe.match(/Edge\/(\d+)/))||me[1]>=74)&&(me=xe.match(/Chrome\/(\d+)/))&&(_e=me[1]);var Ve=_e&&+_e,je=Pe("species"),Ge=function(e){return Ve>=51||!s((function(){var t=[];return(t.constructor={})[je]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},He=Pe("isConcatSpreadable"),Qe=9007199254740991,We="Maximum allowed index exceeded",qe=Ve>=51||!s((function(){var e=[];return e[He]=!1,e.concat()[0]!==e})),ze=Ge("concat"),Ze=function(e){if(!v(e))return!1;var t=e[He];return void 0!==t?!!t:Ee(e)};Q({target:"Array",proto:!0,forced:!qe||!ze},{concat:function(e){var t,n,r,i,o,s=Ae(this),a=Me(s,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(Ze(o=-1===t?s:arguments[t])){if(c+(i=$(o.length))>Qe)throw TypeError(We);for(n=0;n<i;n++,c++)n in o&&ye(a,c,o[n])}else{if(c>=Qe)throw TypeError(We);ye(a,c++,o)}return a.length=c,a}});var $e=function(e){return M[e+"Prototype"]},Ke=$e("Array").concat,Ye=Array.prototype,Je=function(e){var t=e.concat;return e===Ye||e instanceof Array&&t===Ye.concat?Ke:t},Xe=!s((function(){return Object.isExtensible(Object.preventExtensions({}))})),et=r((function(e){var t=V.f,n=Re("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},s=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!v(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!y(e,n)){if(!i(e))return"F";if(!t)return"E";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!y(e,n)){if(!i(e))return!0;if(!t)return!1;o(e)}return e[n].weakData},onFreeze:function(e){return Xe&&s.REQUIRED&&i(e)&&!y(e,n)&&o(e),e}};te[n]=!0})),tt={},nt=Pe("iterator"),rt=Array.prototype,it=function(e){return void 0!==e&&(tt.Array===e||rt[nt]===e)},ot={};ot[Pe("toStringTag")]="z";var st,at,ct,lt="[object z]"===String(ot),ut=Pe("toStringTag"),dt="Arguments"==p(function(){return arguments}()),ht=lt?p:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),ut))?n:dt?p(t):"Object"==(r=p(t))&&"function"==typeof t.callee?"Arguments":r},pt=Pe("iterator"),ft=function(e){if(null!=e)return e[pt]||e["@@iterator"]||tt[ht(e)]},gt=function(e,t,n,r){try{return r?t(U(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&U(i.call(e)),t}},mt=r((function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,n,r,i,o){var s,a,c,l,u,d,h,p=B(n,r,i?2:1);if(o)s=e;else{if("function"!=typeof(a=ft(e)))throw TypeError("Target is not iterable");if(it(a)){for(c=0,l=$(e.length);l>c;c++)if((u=i?p(U(h=e[c])[0],h[1]):p(e[c]))&&u instanceof t)return u;return new t(!1)}s=a.call(e)}for(d=s.next;!(h=d.call(s)).done;)if("object"==typeof(u=gt(s,p,h.value,i))&&u&&u instanceof t)return u;return new t(!1)}).stop=function(e){return new t(!0,e)}})),_t=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},vt=lt?{}.toString:function(){return"[object "+ht(this)+"]"},Et=V.f,At=Pe("toStringTag"),yt=function(e,t,n,r){if(e){var i=n?e:e.prototype;y(i,At)||Et(i,At,{configurable:!0,value:t}),r&&!lt&&j(i,"toString",vt)}},St=[].push,bt=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,s=5==e||o;return function(a,c,l,u){for(var d,h,p=Ae(a),f=g(p),m=B(c,l,3),_=$(f.length),v=0,E=u||Me,A=t?E(a,_):n?E(a,0):void 0;_>v;v++)if((s||v in f)&&(h=m(d=f[v],v,p),e))if(t)A[v]=h;else if(h)switch(e){case 3:return!0;case 5:return d;case 6:return v;case 2:St.call(A,d)}else if(i)return!1;return o?-1:r||i?i:A}},Ct={forEach:bt(0),map:bt(1),filter:bt(2),some:bt(3),every:bt(4),find:bt(5),findIndex:bt(6)},Tt=Ce("native-function-to-string",Function.toString),It=o.WeakMap,Rt="function"==typeof It&&/native code/.test(Tt.call(It)),wt=Ce("keys"),kt=function(e){return wt[e]||(wt[e]=Re(e))},Ot=o.WeakMap;if(Rt){var Nt=new Ot,Lt=Nt.get,Pt=Nt.has,Dt=Nt.set;st=function(e,t){return Dt.call(Nt,e,t),t},at=function(e){return Lt.call(Nt,e)||{}},ct=function(e){return Pt.call(Nt,e)}}else{var Mt=kt("state");te[Mt]=!0,st=function(e,t){return j(e,Mt,t),t},at=function(e){return y(e,Mt)?e[Mt]:{}},ct=function(e){return y(e,Mt)}}var xt={set:st,get:at,has:ct,enforce:function(e){return ct(e)?at(e):st(e,{})},getterFor:function(e){return function(t){var n;if(!v(t)||(n=at(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Bt=V.f,Ut=Ct.forEach,Ft=xt.set,Vt=xt.getterFor,jt=function(e,t,n){var r,i=-1!==e.indexOf("Map"),c=-1!==e.indexOf("Weak"),l=i?"set":"add",u=o[e],d=u&&u.prototype,h={};if(a&&"function"==typeof u&&(c||d.forEach&&!s((function(){(new u).entries().next()})))){r=t((function(t,n){Ft(_t(t,r,e),{type:e,collection:new u}),null!=n&&mt(n,t[l],t,i)}));var p=Vt(e);Ut(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(e){var t="add"==e||"set"==e;!(e in d)||c&&"clear"==e||j(r.prototype,e,(function(n,r){var i=p(this).collection;if(!t&&c&&!v(n))return"get"==e&&void 0;var o=i[e](0===n?0:n,r);return t?this:o}))})),c||Bt(r.prototype,"size",{configurable:!0,get:function(){return p(this).collection.size}})}else r=n.getConstructor(t,e,i,l),et.REQUIRED=!0;return yt(r,e,!1,!0),h[e]=r,Q({global:!0,forced:!0},h),c||n.setStrong(r,e,i),r},Gt=le("document","documentElement"),Ht=kt("IE_PROTO"),Qt=function(){},Wt=function(){var e,t=C("iframe"),n=ie.length;for(t.style.display="none",Gt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Wt=e.F;n--;)delete Wt.prototype[ie[n]];return Wt()},qt=Object.create||function(e,t){var n;return null!==e?(Qt.prototype=U(e),n=new Qt,Qt.prototype=null,n[Ht]=e):n=Wt(),void 0===t?n:se(n,t)};te[Ht]=!0;var zt,Zt,$t,Kt=function(e,t,n,r){r&&r.enumerable?e[t]=n:j(e,t,n)},Yt=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:Kt(e,r,t[r],n);return e},Jt=!s((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Xt=kt("IE_PROTO"),en=Object.prototype,tn=Jt?Object.getPrototypeOf:function(e){return e=Ae(e),y(e,Xt)?e[Xt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?en:null},nn=(Pe("iterator"),!1);[].keys&&("next"in($t=[].keys())?(Zt=tn(tn($t)))!==Object.prototype&&(zt=Zt):nn=!0),null==zt&&(zt={});var rn={IteratorPrototype:zt,BUGGY_SAFARI_ITERATORS:nn},on=rn.IteratorPrototype,sn=function(){return this},an=function(e,t,n){var r=t+" Iterator";return e.prototype=qt(on,{next:d(1,n)}),yt(e,r,!1,!0),tt[r]=sn,e},cn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return U(n),function(e){if(!v(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),ln=rn.IteratorPrototype,un=rn.BUGGY_SAFARI_ITERATORS,dn=Pe("iterator"),hn="keys",pn="values",fn="entries",gn=function(){return this},mn=function(e,t,n,r,i,o,s){an(n,t,r);var a,c,l,u=function(e){if(e===i&&g)return g;if(!un&&e in p)return p[e];switch(e){case hn:case pn:case fn:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",h=!1,p=e.prototype,f=p[dn]||p["@@iterator"]||i&&p[i],g=!un&&f||u(i),m="Array"==t&&p.entries||f;if(m&&(a=tn(m.call(new e)),ln!==Object.prototype&&a.next&&(yt(a,d,!0,!0),tt[d]=gn)),i==pn&&f&&f.name!==pn&&(h=!0,g=function(){return f.call(this)}),s&&p[dn]!==g&&j(p,dn,g),tt[t]=g,i)if(c={values:u(pn),keys:o?g:u(hn),entries:u(fn)},s)for(l in c)(un||h||!(l in p))&&Kt(p,l,c[l]);else Q({target:t,proto:!0,forced:un||h},c);return c},_n=Pe("species"),vn=function(e){var t=le(e),n=V.f;a&&t&&!t[_n]&&n(t,_n,{configurable:!0,get:function(){return this}})},En=V.f,An=et.fastKey,yn=xt.set,Sn=xt.getterFor,bn=(jt("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(e,t,n,r){var i=e((function(e,o){_t(e,i,t),yn(e,{type:t,index:qt(null),first:void 0,last:void 0,size:0}),a||(e.size=0),null!=o&&mt(o,e[r],e,n)})),o=Sn(t),s=function(e,t,n){var r,i,s=o(e),l=c(e,t);return l?l.value=n:(s.last=l={index:i=An(t,!0),key:t,value:n,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=l),r&&(r.next=l),a?s.size++:e.size++,"F"!==i&&(s.index[i]=l)),e},c=function(e,t){var n,r=o(e),i=An(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Yt(i.prototype,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,a?e.size=0:this.size=0},delete:function(e){var t=this,n=o(t),r=c(t,e);if(r){var i=r.next,s=r.previous;delete n.index[r.index],r.removed=!0,s&&(s.next=i),i&&(i.previous=s),n.first==r&&(n.first=i),n.last==r&&(n.last=s),a?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=o(this),r=B(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),Yt(i.prototype,n?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),a&&En(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=Sn(t),o=Sn(r);mn(e,t,(function(e,t){yn(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),vn(t)}}),function(e){return function(t,n){var r,i,o=String(m(t)),s=z(n),a=o.length;return s<0||s>=a?e?"":void 0:(r=o.charCodeAt(s))<55296||r>56319||s+1===a||(i=o.charCodeAt(s+1))<56320||i>57343?e?o.charAt(s):r:e?o.slice(s,s+2):i-56320+(r-55296<<10)+65536}}),Cn={codeAt:bn(!1),charAt:bn(!0)},Tn=Cn.charAt,In="String Iterator",Rn=xt.set,wn=xt.getterFor(In);mn(String,"String",(function(e){Rn(this,{type:In,string:String(e),index:0})}),(function(){var e,t=wn(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=Tn(n,r),t.index+=e.length,{value:e,done:!1})}));var kn="Array Iterator",On=xt.set,Nn=xt.getterFor(kn);mn(Array,"Array",(function(e,t){On(this,{type:kn,target:_(e),index:0,kind:t})}),(function(){var e=Nn(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),tt.Arguments=tt.Array;var Ln=Pe("toStringTag");for(var Pn in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Dn=o[Pn],Mn=Dn&&Dn.prototype;Mn&&!Mn[Ln]&&j(Mn,Ln,Pn),tt[Pn]=tt.Array}var xn=M.Map,Bn=Pe("match"),Un=function(e){if(function(e){var t;return v(e)&&(void 0!==(t=e[Bn])?!!t:"RegExp"==p(e))}(e))throw TypeError("The method doesn't accept regular expressions");return e},Fn=Pe("match"),Vn=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[Fn]=!1,"/./"[e](t)}catch(e){}}return!1},jn="".endsWith,Gn=Math.min,Hn=Vn("endsWith");Q({target:"String",proto:!0,forced:!Hn},{endsWith:function(e){var t=String(m(this));Un(e);var n=arguments.length>1?arguments[1]:void 0,r=$(t.length),i=void 0===n?r:Gn($(n),r),o=String(e);return jn?jn.call(t,o,i):t.slice(i-o.length,i)===o}});var Qn=$e("String").endsWith,Wn=String.prototype,qn=function(e){var t=e.endsWith;return"string"==typeof e||e===Wn||e instanceof String&&t===Wn.endsWith?Qn:t},zn=function(e,t){var n=[][e];return!n||!s((function(){n.call(null,t||function(){throw 1},1)}))},Zn=Ct.forEach,$n=zn("forEach")?function(e){return Zn(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach;Q({target:"Array",proto:!0,forced:[].forEach!=$n},{forEach:$n});var Kn=$e("Array").forEach,Yn=Array.prototype,Jn={DOMTokenList:!0,NodeList:!0},Xn=function(e){var t=e.forEach;return e===Yn||e instanceof Array&&t===Yn.forEach||Jn.hasOwnProperty(ht(e))?Kn:t},er={f:Object.getOwnPropertySymbols},tr=Object.assign,nr=!tr||s((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=tr({},e)[n]||oe(tr({},t)).join("")!=r}))?function(e,t){for(var n=Ae(e),r=arguments.length,i=1,o=er.f,s=u.f;r>i;)for(var c,l=g(arguments[i++]),d=o?oe(l).concat(o(l)):oe(l),h=d.length,p=0;h>p;)c=d[p++],a&&!s.call(l,c)||(n[c]=l[c]);return n}:tr;Q({target:"Object",stat:!0,forced:Object.assign!==nr},{assign:nr});var rr=M.Object.assign,ir=s((function(){oe(1)}));Q({target:"Object",stat:!0,forced:ir},{keys:function(e){return oe(Ae(e))}});var or=M.Object.keys,sr=function(e){return function(t,n,r,i){x(n);var o=Ae(t),s=g(o),a=$(o.length),c=e?a-1:0,l=e?-1:1;if(r<2)for(;;){if(c in s){i=s[c],c+=l;break}if(c+=l,e?c<0:a<=c)throw TypeError("Reduce of empty array with no initial value")}for(;e?c>=0:a>c;c+=l)c in s&&(i=n(i,s[c],c,o));return i}},ar={left:sr(!1),right:sr(!0)}.left;Q({target:"Array",proto:!0,forced:zn("reduce")},{reduce:function(e){return ar(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var cr=$e("Array").reduce,lr=Array.prototype,ur=function(e){var t=e.reduce;return e===lr||e instanceof Array&&t===lr.reduce?cr:t};Q({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperty:V.f});var dr=r((function(e){var t=M.Object,n=e.exports=function(e,n,r){return t.defineProperty(e,n,r)};t.defineProperty.sham&&(n.sham=!0)})),hr=dr,pr="\t\n\v\f\r                　\u2028\u2029\ufeff",fr="["+pr+"]",gr=RegExp("^"+fr+fr+"*"),mr=RegExp(fr+fr+"*$"),_r=function(e){return function(t){var n=String(m(t));return 1&e&&(n=n.replace(gr,"")),2&e&&(n=n.replace(mr,"")),n}},vr={start:_r(1),end:_r(2),trim:_r(3)},Er=vr.trim,Ar=o.parseInt,yr=/^[+-]?0[Xx]/,Sr=8!==Ar(pr+"08")||22!==Ar(pr+"0x16")?function(e,t){var n=Er(String(e));return Ar(n,t>>>0||(yr.test(n)?16:10))}:Ar;Q({global:!0,forced:parseInt!=Sr},{parseInt:Sr});var br=M.parseInt;let Cr=!0,Tr=!0;function Ir(e,t,n){const r=e.match(t);return r&&r.length>=n&&br(r[n],10)}function Rr(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=o,i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);const r=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[e,r])},hr(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function wr(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Cr=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function kr(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Tr=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Or(){if("object"==typeof window){if(Cr)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Nr(e,t){Tr&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Lr(e){const{navigator:t}=e,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=Ir(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=Ir(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=Ir(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=Ir(t.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n}function Pr(e){return"[object Object]"===Object.prototype.toString.call(e)}function Dr(e){var t;return Pr(e)?ur(t=or(e)).call(t,(function(t,n){const r=Pr(e[n]),i=r?Dr(e[n]):e[n],o=r&&!or(i).length;return void 0===i||o?t:rr(t,{[n]:i})}),{}):e}function Mr(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new xn;if(null===t)return i;const o=[];return Xn(e).call(e,e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),Xn(o).call(o,t=>{Xn(e).call(e,n=>{n.type===r&&n.trackId===t.id&&function e(t,n,r){var i;n&&!r.has(n.id)&&(r.set(n.id,n),Xn(i=or(n)).call(i,i=>{if(qn(i).call(i,"Id"))e(t,t.get(n[i]),r);else if(qn(i).call(i,"Ids")){var o;Xn(o=n[i]).call(o,n=>{e(t,t.get(n),r)})}}))}(e,n,i)})}),i}var xr=R.f,Br=s((function(){xr(1)}));Q({target:"Object",stat:!0,forced:!a||Br,sham:!a},{getOwnPropertyDescriptor:function(e,t){return xr(_(e),t)}});var Ur=r((function(e){var t=M.Object,n=e.exports=function(e,n){return t.getOwnPropertyDescriptor(e,n)};t.getOwnPropertyDescriptor.sham&&(n.sham=!0)})),Fr=Ct.filter;Q({target:"Array",proto:!0,forced:!Ge("filter")},{filter:function(e){return Fr(this,e,arguments.length>1?arguments[1]:void 0)}});var Vr=$e("Array").filter,jr=Array.prototype,Gr=function(e){var t=e.filter;return e===jr||e instanceof Array&&t===jr.filter?Vr:t},Hr=o.Promise,Qr=Pe("iterator"),Wr=!1;try{var qr=0,zr={next:function(){return{done:!!qr++}},return:function(){Wr=!0}};zr[Qr]=function(){return this},Array.from(zr,(function(){throw 2}))}catch(e){}var Zr,$r,Kr,Yr=function(e,t){if(!t&&!Wr)return!1;var n=!1;try{var r={};r[Qr]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Jr=Pe("species"),Xr=function(e,t){var n,r=U(e).constructor;return void 0===r||null==(n=U(r)[Jr])?t:x(n)},ei=/(iphone|ipod|ipad).*applewebkit/i.test(xe),ti=o.location,ni=o.setImmediate,ri=o.clearImmediate,ii=o.process,oi=o.MessageChannel,si=o.Dispatch,ai=0,ci={},li="onreadystatechange",ui=function(e){if(ci.hasOwnProperty(e)){var t=ci[e];delete ci[e],t()}},di=function(e){return function(){ui(e)}},hi=function(e){ui(e.data)},pi=function(e){o.postMessage(e+"",ti.protocol+"//"+ti.host)};ni&&ri||(ni=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return ci[++ai]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},Zr(ai),ai},ri=function(e){delete ci[e]},"process"==p(ii)?Zr=function(e){ii.nextTick(di(e))}:si&&si.now?Zr=function(e){si.now(di(e))}:oi&&!ei?(Kr=($r=new oi).port2,$r.port1.onmessage=hi,Zr=B(Kr.postMessage,Kr,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||s(pi)?Zr=li in C("script")?function(e){Gt.appendChild(C("script")).onreadystatechange=function(){Gt.removeChild(this),ui(e)}}:function(e){setTimeout(di(e),0)}:(Zr=pi,o.addEventListener("message",hi,!1)));var fi,gi,mi,_i,vi,Ei,Ai,yi,Si={set:ni,clear:ri},bi=R.f,Ci=Si.set,Ti=o.MutationObserver||o.WebKitMutationObserver,Ii=o.process,Ri=o.Promise,wi="process"==p(Ii),ki=bi(o,"queueMicrotask"),Oi=ki&&ki.value;Oi||(fi=function(){var e,t;for(wi&&(e=Ii.domain)&&e.exit();gi;){t=gi.fn,gi=gi.next;try{t()}catch(e){throw gi?_i():mi=void 0,e}}mi=void 0,e&&e.enter()},wi?_i=function(){Ii.nextTick(fi)}:Ti&&!ei?(vi=!0,Ei=document.createTextNode(""),new Ti(fi).observe(Ei,{characterData:!0}),_i=function(){Ei.data=vi=!vi}):Ri&&Ri.resolve?(Ai=Ri.resolve(void 0),yi=Ai.then,_i=function(){yi.call(Ai,fi)}):_i=function(){Ci.call(o,fi)});var Ni,Li,Pi,Di=Oi||function(e){var t={fn:e,next:void 0};mi&&(mi.next=t),gi||(gi=t,_i()),mi=t},Mi=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=x(t),this.reject=x(n)},xi={f:function(e){return new Mi(e)}},Bi=function(e,t){if(U(e),v(t)&&t.constructor===e)return t;var n=xi.f(e);return(0,n.resolve)(t),n.promise},Ui=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Fi=Si.set,Vi=Pe("species"),ji="Promise",Gi=xt.get,Hi=xt.set,Qi=xt.getterFor(ji),Wi=Hr,qi=o.TypeError,zi=o.document,Zi=o.process,$i=Ce("inspectSource"),Ki=(le("fetch"),xi.f),Yi=Ki,Ji="process"==p(Zi),Xi=!!(zi&&zi.createEvent&&o.dispatchEvent),eo="unhandledrejection",to=D(ji,(function(){if($i(Wi)===String(Wi)){if(66===Ve)return!0;if(!Ji&&"function"!=typeof PromiseRejectionEvent)return!0}if(!Wi.prototype.finally)return!0;if(Ve>=51&&/native code/.test(Wi))return!1;var e=Wi.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[Vi]=t,!(e.then((function(){}))instanceof t)})),no=to||!Yr((function(e){Wi.all(e).catch((function(){}))})),ro=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},io=function(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;Di((function(){for(var i=t.value,o=1==t.state,s=0;r.length>s;){var a,c,l,u=r[s++],d=o?u.ok:u.fail,h=u.resolve,p=u.reject,f=u.domain;try{d?(o||(2===t.rejection&&co(e,t),t.rejection=1),!0===d?a=i:(f&&f.enter(),a=d(i),f&&(f.exit(),l=!0)),a===u.promise?p(qi("Promise-chain cycle")):(c=ro(a))?c.call(a,h,p):h(a)):p(i)}catch(e){f&&!l&&f.exit(),p(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&so(e,t)}))}},oo=function(e,t,n){var r,i;Xi?((r=zi.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),o.dispatchEvent(r)):r={promise:t,reason:n},(i=o["on"+e])?i(r):e===eo&&function(e,t){var n=o.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},so=function(e,t){Fi.call(o,(function(){var n,r=t.value;if(ao(t)&&(n=Ui((function(){Ji?Zi.emit("unhandledRejection",r,e):oo(eo,e,r)})),t.rejection=Ji||ao(t)?2:1,n.error))throw n.value}))},ao=function(e){return 1!==e.rejection&&!e.parent},co=function(e,t){Fi.call(o,(function(){Ji?Zi.emit("rejectionHandled",e):oo("rejectionhandled",e,t.value)}))},lo=function(e,t,n,r){return function(i){e(t,n,i,r)}},uo=function(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,io(e,t,!0))},ho=function(e,t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(e===n)throw qi("Promise can't be resolved itself");var i=ro(n);i?Di((function(){var r={done:!1};try{i.call(n,lo(ho,e,r,t),lo(uo,e,r,t))}catch(n){uo(e,r,n,t)}})):(t.value=n,t.state=1,io(e,t,!1))}catch(n){uo(e,{done:!1},n,t)}}};to&&(Wi=function(e){_t(this,Wi,ji),x(e),Ni.call(this);var t=Gi(this);try{e(lo(ho,this,t),lo(uo,this,t))}catch(e){uo(this,t,e)}},(Ni=function(e){Hi(this,{type:ji,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Yt(Wi.prototype,{then:function(e,t){var n=Qi(this),r=Ki(Xr(this,Wi));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Ji?Zi.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&io(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),Li=function(){var e=new Ni,t=Gi(e);this.promise=e,this.resolve=lo(ho,e,t),this.reject=lo(uo,e,t)},xi.f=Ki=function(e){return e===Wi||e===Pi?new Li(e):Yi(e)}),Q({global:!0,wrap:!0,forced:to},{Promise:Wi}),yt(Wi,ji,!1,!0),vn(ji),Pi=le(ji),Q({target:ji,stat:!0,forced:to},{reject:function(e){var t=Ki(this);return t.reject.call(void 0,e),t.promise}}),Q({target:ji,stat:!0,forced:!0},{resolve:function(e){return Bi(this===Pi?Wi:this,e)}}),Q({target:ji,stat:!0,forced:no},{all:function(e){var t=this,n=Ki(t),r=n.resolve,i=n.reject,o=Ui((function(){var n=x(t.resolve),o=[],s=0,a=1;mt(e,(function(e){var c=s++,l=!1;o.push(void 0),a++,n.call(t,e).then((function(e){l||(l=!0,o[c]=e,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=Ki(t),r=n.reject,i=Ui((function(){var i=x(t.resolve);mt(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),Q({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=xi.f(t),r=n.resolve,i=n.reject,o=Ui((function(){var n=x(t.resolve),i=[],o=0,s=1;mt(e,(function(e){var a=o++,c=!1;i.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,i[a]={status:"fulfilled",value:e},--s||r(i))}),(function(e){c||(c=!0,i[a]={status:"rejected",reason:e},--s||r(i))}))})),--s||r(i)}));return o.error&&i(o.value),n.promise}}),Q({target:"Promise",proto:!0,real:!0},{finally:function(e){var t=Xr(this,le("Promise")),n="function"==typeof e;return this.then(n?function(n){return Bi(t,e()).then((function(){return n}))}:e,n?function(n){return Bi(t,e()).then((function(){throw n}))}:e)}});var po=M.Promise,fo=po,go=Ct.map;Q({target:"Array",proto:!0,forced:!Ge("map")},{map:function(e){return go(this,e,arguments.length>1?arguments[1]:void 0)}});var mo=$e("Array").map,_o=Array.prototype,vo=function(e){var t=e.map;return e===_o||e instanceof Array&&t===_o.map?mo:t},Eo=Math.max,Ao=Math.min,yo=9007199254740991,So="Maximum allowed length exceeded";Q({target:"Array",proto:!0,forced:!Ge("splice")},{splice:function(e,t){var n,r,i,o,s,a,c=Ae(this),l=$(c.length),u=J(e,l),d=arguments.length;if(0===d?n=r=0:1===d?(n=0,r=l-u):(n=d-2,r=Ao(Eo(z(t),0),l-u)),l+n-r>yo)throw TypeError(So);for(i=Me(c,r),o=0;o<r;o++)(s=u+o)in c&&ye(i,o,c[s]);if(i.length=r,n<r){for(o=u;o<l-r;o++)a=o+n,(s=o+r)in c?c[a]=c[s]:delete c[a];for(o=l;o>l-r+n;o--)delete c[o-1]}else if(n>r)for(o=l-r;o>u;o--)a=o+n-1,(s=o+r-1)in c?c[a]=c[s]:delete c[a];for(o=0;o<n;o++)c[o+u]=arguments[o+2];return c.length=l-r+n,i}});var bo=$e("Array").splice,Co=Array.prototype,To=function(e){var t=e.splice;return e===Co||e instanceof Array&&t===Co.splice?bo:t},Io=ee.indexOf,Ro=[].indexOf,wo=!!Ro&&1/[1].indexOf(1,-0)<0,ko=zn("indexOf");Q({target:"Array",proto:!0,forced:wo||ko},{indexOf:function(e){return wo?Ro.apply(this,arguments)||0:Io(this,e,arguments.length>1?arguments[1]:void 0)}});var Oo=$e("Array").indexOf,No=Array.prototype,Lo=function(e){var t=e.indexOf;return e===No||e instanceof Array&&t===No.indexOf?Oo:t},Po=Pe("species"),Do=[].slice,Mo=Math.max;Q({target:"Array",proto:!0,forced:!Ge("slice")},{slice:function(e,t){var n,r,i,o=_(this),s=$(o.length),a=J(e,s),c=J(void 0===t?s:t,s);if(Ee(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Ee(n.prototype)?v(n)&&null===(n=n[Po])&&(n=void 0):n=void 0,n===Array||void 0===n))return Do.call(o,a,c);for(r=new(void 0===n?Array:n)(Mo(c-a,0)),i=0;a<c;a++,i++)a in o&&ye(r,i,o[a]);return r.length=i,r}});var xo=$e("Array").slice,Bo=Array.prototype,Uo=function(e){var t=e.slice;return e===Bo||e instanceof Array&&t===Bo.slice?xo:t},Fo=Ct.find,Vo="find",jo=!0;Vo in[]&&Array(1).find((function(){jo=!1})),Q({target:"Array",proto:!0,forced:jo},{find:function(e){return Fo(this,e,arguments.length>1?arguments[1]:void 0)}});var Go=$e("Array").find,Ho=Array.prototype,Qo=function(e){var t=e.find;return e===Ho||e instanceof Array&&t===Ho.find?Go:t},Wo=[].slice,qo={},zo=function(e,t,n){if(!(t in qo)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";qo[t]=Function("C,a","return new C("+r.join(",")+")")}return qo[t](e,n)},Zo=Function.bind||function(e){var t=x(this),n=Wo.call(arguments,1),r=function(){var i=n.concat(Wo.call(arguments));return this instanceof r?zo(t,i.length,i):t.apply(e,i)};return v(t.prototype)&&(r.prototype=t.prototype),r};Q({target:"Function",proto:!0},{bind:Zo});var $o=$e("Function").bind,Ko=Function.prototype,Yo=function(e){var t=e.bind;return e===Ko||e instanceof Function&&t===Ko.bind?$o:t},Jo=ee.includes;Q({target:"Array",proto:!0},{includes:function(e){return Jo(this,e,arguments.length>1?arguments[1]:void 0)}});var Xo=$e("Array").includes;Q({target:"String",proto:!0,forced:!Vn("includes")},{includes:function(e){return!!~String(m(this)).indexOf(Un(e),arguments.length>1?arguments[1]:void 0)}});var es=$e("String").includes,ts=Array.prototype,ns=String.prototype,rs=function(e){var t=e.includes;return e===ts||e instanceof Array&&t===ts.includes?Xo:"string"==typeof e||e===ns||e instanceof String&&t===ns.includes?es:t},is=Ct.some;Q({target:"Array",proto:!0,forced:zn("some")},{some:function(e){return is(this,e,arguments.length>1?arguments[1]:void 0)}});var os=$e("Array").some,ss=Array.prototype,as=function(e){var t=e.some;return e===ss||e instanceof Array&&t===ss.some?os:t};const cs=Or;function ls(e){const t=e&&e.navigator;if(!t.mediaDevices)return;const n=Lr(e),r=function(e){var t;if("object"!=typeof e||e.mandatory||e.optional)return e;const n={};var r;return Xn(t=or(e)).call(t,t=>{if("require"===t||"advanced"===t||"mediaSource"===t)return;const r="object"==typeof e[t]?e[t]:{ideal:e[t]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+Uo(t).call(t,1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){n.optional=n.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",t)]=r.ideal,n.optional.push(e),e={},e[i("max",t)]=r.ideal,n.optional.push(e)):(e[i("",t)]=r.ideal,n.optional.push(e))}var o;void 0!==r.exact&&"number"!=typeof r.exact?(n.mandatory=n.mandatory||{},n.mandatory[i("",t)]=r.exact):Xn(o=["min","max"]).call(o,e=>{void 0!==r[e]&&(n.mandatory=n.mandatory||{},n.mandatory[i(e,t)]=r[e])})}),e.advanced&&(n.optional=Je(r=n.optional||[]).call(r,e.advanced)),n},i=function(e,i){if(n.version>=61)return i(e);if((e=JSON.parse(ve(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(ve(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const s=n.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||s)){let n;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?n=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(n=["front"]),n)return t.mediaDevices.enumerateDevices().then(t=>{t=Gr(t).call(t,e=>"videoinput"===e.kind);let s=Qo(t).call(t,e=>as(n).call(n,t=>{var n;return rs(n=e.label.toLowerCase()).call(n,t)}));return!s&&t.length&&rs(n).call(n,"back")&&(s=t[t.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=r(e.video),cs("chrome: "+ve(e)),i(e)})}e.video=r(e.video)}return cs("chrome: "+ve(e)),i(e)},o=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(e,n,r){i(e,e=>{t.webkitGetUserMedia(e,n,e=>{r&&r(o(e))})})};if(t.getUserMedia=Yo(s).call(s,t),t.mediaDevices.getUserMedia){var a;const e=Yo(a=t.mediaDevices.getUserMedia).call(a,t.mediaDevices);t.mediaDevices.getUserMedia=function(t){return i(t,t=>e(t).then(e=>{var n;if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw Xn(n=e.getTracks()).call(n,e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>fo.reject(o(e))))}}}function us(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function ds(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){hr(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{var n;t.stream.addEventListener("addtrack",n=>{let r;var i;r=e.RTCPeerConnection.prototype.getReceivers?Qo(i=this.getReceivers()).call(i,e=>e.track&&e.track.id===n.track.id):{track:n.track};const o=new Event("track");o.track=n.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)}),Xn(n=t.stream.getTracks()).call(n,n=>{let r;var i;r=e.RTCPeerConnection.prototype.getReceivers?Qo(i=this.getReceivers()).call(i,e=>e.track&&e.track.id===n.id):{track:n};const o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Rr(e,"track",e=>(e.transceiver||hr(e,"transceiver",{value:{receiver:e.receiver}}),e))}function hs(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){var e;return this._senders=this._senders||[],Uo(e=this._senders).call(e)};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t;r.apply(this,arguments);const n=Lo(t=this._senders).call(t,e);var i;-1!==n&&To(i=this._senders).call(i,n,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r;this._senders=this._senders||[],n.apply(this,[e]),Xn(r=e.getTracks()).call(r,e=>{this._senders.push(t(this,e))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t;this._senders=this._senders||[],r.apply(this,[e]),Xn(t=e.getTracks()).call(t,e=>{var t;const n=Qo(t=this._senders).call(t,t=>t.track===e);var r,i;n&&To(r=this._senders).call(r,Lo(i=this._senders).call(i,n),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return Xn(e).call(e,e=>e._pc=this),e},hr(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ps(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={},n=e.result();return Xn(n).call(n,e=>{var n;const r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};Xn(n=e.names()).call(n,t=>{r[t]=e.stat(t)}),t[r.id]=r}),t},o=function(e){var t;return new xn(vo(t=or(e)).call(t,t=>[t,e[t]]))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new fo((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])}).then(n,r)}}function fs(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return Xn(e).call(e,e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>Mr(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return Xn(e).call(e,e=>e._pc=this),e}),Rr(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>Mr(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var n,r;const e=arguments[0];let t,i,o;return Xn(n=this.getSenders()).call(n,n=>{n.track===e&&(t?o=!0:t=n)}),Xn(r=this.getReceivers()).call(r,t=>(t.track===e&&(i?o=!0:i=t),t.track===e)),o||t&&i?fo.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():i?i.getStats():fo.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function gs(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},vo(e=or(this._shimmedLocalStreams)).call(e,e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var r;if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const i=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===Lo(r=this._shimmedLocalStreams[n.id]).call(r,i)&&this._shimmedLocalStreams[n.id].push(i):this._shimmedLocalStreams[n.id]=[n,i],i};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t,r,i;this._shimmedLocalStreams=this._shimmedLocalStreams||{},Xn(t=e.getTracks()).call(t,e=>{var t;if(Qo(t=this.getSenders()).call(t,t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const o=this.getSenders();n.apply(this,arguments);const s=Gr(r=this.getSenders()).call(r,e=>-1===Lo(o).call(o,e));this._shimmedLocalStreams[e.id]=Je(i=[e]).call(i,s)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Xn(t=or(this._shimmedLocalStreams)).call(t,t=>{var n;const r=Lo(n=this._shimmedLocalStreams[t]).call(n,e);var i;-1!==r&&To(i=this._shimmedLocalStreams[t]).call(i,r,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),i.apply(this,arguments)}}function ms(e){var t;if(!e.RTCPeerConnection)return;const n=Lr(e);if(e.RTCPeerConnection.prototype.addTrack&&n.version>=65)return gs(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=r.apply(this);return this._reverseStreams=this._reverseStreams||{},vo(e).call(e,e=>this._reverseStreams[e.id])};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},Xn(n=t.getTracks()).call(n,e=>{var t;if(Qo(t=this.getSenders()).call(t,t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}i.apply(this,[t])};const o=e.RTCPeerConnection.prototype.removeStream;function s(e,t){var n;let r=t.sdp;return Xn(n=or(e._reverseStreams||[])).call(n,t=>{const n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}function a(e,t){var n;let r=t.sdp;return Xn(n=or(e._reverseStreams||[])).call(n,t=>{const n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r,i,o;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const s=Uo([]).call(arguments,1);if(1!==s.length||!Qo(r=s[0].getTracks()).call(r,e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const a=Qo(i=this.getSenders()).call(i,e=>e.track===t);if(a)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const c=this._streams[n.id];if(c)c.addTrack(t),fo.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return Qo(o=this.getSenders()).call(o,e=>e.track===t)},Xn(t=["createOffer","createAnswer"]).call(t,(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=s(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then(e=>s(this,e))}};e.RTCPeerConnection.prototype[t]=r[t]}));const c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=a(this,arguments[0]),c.apply(this,arguments)):c.apply(this,arguments)};const l=Ur(e.RTCPeerConnection.prototype,"localDescription");hr(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=l.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let n;this._streams=this._streams||{},Xn(t=or(this._streams)).call(t,t=>{var r;Qo(r=this._streams[t].getTracks()).call(r,t=>e.track===t)&&(n=this._streams[t])}),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function _s(e){const t=Lr(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),!e.RTCPeerConnection)return;var n;t.version<53&&Xn(n=["setLocalDescription","setRemoteDescription","addIceCandidate"]).call(n,(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?fo.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),fo.resolve())}}function vs(e){Rr(e,"negotiationneeded",e=>{if("stable"===e.target.signalingState)return e})}var Es=Object.freeze({__proto__:null,shimMediaStream:us,shimOnTrack:ds,shimGetSendersWithDtmf:hs,shimGetStats:ps,shimSenderReceiverGetStats:fs,shimAddTrackRemoveTrackWithNative:gs,shimAddTrackRemoveTrack:ms,shimPeerConnection:_s,fixNegotiationNeeded:vs,shimGetUserMedia:ls,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),As="".startsWith,ys=Math.min,Ss=Vn("startsWith");Q({target:"String",proto:!0,forced:!Ss},{startsWith:function(e){var t=String(m(this));Un(e);var n=$(ys(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return As?As.call(t,r,n):t.slice(n,n+r.length)===r}});var bs,Cs=$e("String").startsWith,Ts=String.prototype,Is=function(e){var t=e.startsWith;return"string"==typeof e||e===Ts||e instanceof String&&t===Ts.startsWith?Cs:t},Rs=vr.trim;Q({target:"String",proto:!0,forced:(bs="trim",s((function(){return!!pr[bs]()||"​᠎"!="​᠎"[bs]()||pr[bs].name!==bs})))},{trim:function(){return Rs(this)}});var ws=$e("String").trim,ks=String.prototype,Os=function(e){var t=e.trim;return"string"==typeof e||e===ks||e instanceof String&&t===ks.trim?ws:t},Ns=r((function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){var t;return vo(t=Os(e).call(e).split("\n")).call(t,(function(e){return Os(e).call(e)}))},t.splitSections=function(e){var t=e.split("\nm=");return vo(t).call(t,(function(e,t){var n;return Os(n=t>0?"m="+e:e).call(n)+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){var r;return Gr(r=t.splitLines(e)).call(r,(function(e){return 0===Lo(e).call(e,n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===Lo(e).call(e,"a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:br(t[1],10),protocol:t[2].toLowerCase(),priority:br(t[3],10),ip:t[4],address:t[4],port:br(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=br(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:br(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=br(t[1],10),n.channels=3===t.length?br(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t,n=e.substr(9).split(" ");return{id:br(n[0],10),direction:Lo(t=n[0]).call(t,"/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(Lo(e).call(e," ")+1).split(";"),i=0;i<r.length;i++){var o,s;t=Os(o=r[i]).call(o).split("="),n[Os(s=t[0]).call(s)]=t[1]}return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&or(e.parameters).length){var r,i=[];Xn(r=or(e.parameters)).call(r,(function(t){e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(Lo(e).call(e," ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t,n="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&Xn(t=e.rtcpFeedback).call(t,(function(e){n+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),n},t.parseSsrcMedia=function(e){var t=Lo(e).call(e," "),n={ssrc:br(e.substr(7,t-7),10)},r=Lo(e).call(e,":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:vo(t).call(t,(function(e){return br(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){var r=t.matchPrefix(e+n,"a=fingerprint:");return{role:"auto",fingerprints:vo(r).call(r,t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n,r="a=setup:"+t+"\r\n";return Xn(n=e.fingerprints).call(n,(function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},t.getIceParameters=function(e,n){var r=t.splitLines(e);return r=Je(r).call(r,t.splitLines(n)),{usernameFragment:Gr(r).call(r,(function(e){return 0===Lo(e).call(e,"a=ice-ufrag:")}))[0].substr(12),password:Gr(r).call(r,(function(e){return 0===Lo(e).call(e,"a=ice-pwd:")}))[0].substr(10)}},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n,r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(e)[0].split(" "),o=3;o<i.length;o++){var s=i[o],a=t.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(a){var c,l=t.parseRtpMap(a),u=t.matchPrefix(e,"a=fmtp:"+s+" ");switch(l.parameters=u.length?t.parseFmtp(u[0]):{},l.rtcpFeedback=vo(c=t.matchPrefix(e,"a=rtcp-fb:"+s+" ")).call(c,t.parseRtcpFb),r.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(l.name.toUpperCase())}}}return Xn(n=t.matchPrefix(e,"a=extmap:")).call(n,(function(e){r.headerExtensions.push(t.parseExtmap(e))})),r},t.writeRtpDescription=function(e,n){var r,i,o,s="";s+="m="+e+" ",s+=n.codecs.length>0?"9":"0",s+=" UDP/TLS/RTP/SAVPF ",s+=vo(r=n.codecs).call(r,(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",s+="c=IN IP4 0.0.0.0\r\n",s+="a=rtcp:9 IN IP4 0.0.0.0\r\n",Xn(i=n.codecs).call(i,(function(e){s+=t.writeRtpMap(e),s+=t.writeFmtp(e),s+=t.writeRtcpFb(e)}));var a,c=0;return Xn(o=n.codecs).call(o,(function(e){e.maxptime>c&&(c=e.maxptime)})),c>0&&(s+="a=maxptime:"+c+"\r\n"),s+="a=rtcp-mux\r\n",n.headerExtensions&&Xn(a=n.headerExtensions).call(a,(function(e){s+=t.writeExtmap(e)})),s},t.parseRtpEncodingParameters=function(e){var n,r,i,o,s,a,c,l=[],u=t.parseRtpParameters(e),d=-1!==Lo(n=u.fecMechanisms).call(n,"RED"),h=-1!==Lo(r=u.fecMechanisms).call(r,"ULPFEC"),p=Gr(i=vo(o=t.matchPrefix(e,"a=ssrc:")).call(o,(function(e){return t.parseSsrcMedia(e)}))).call(i,(function(e){return"cname"===e.attribute})),f=p.length>0&&p[0].ssrc,g=vo(s=t.matchPrefix(e,"a=ssrc-group:FID")).call(s,(function(e){var t=e.substr(17).split(" ");return vo(t).call(t,(function(e){return br(e,10)}))}));g.length>0&&g[0].length>1&&g[0][0]===f&&(c=g[0][1]),Xn(a=u.codecs).call(a,(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:f,codecPayloadType:br(e.parameters.apt,10)};f&&c&&(t.rtx={ssrc:c}),l.push(t),d&&((t=JSON.parse(ve(t))).fec={ssrc:f,mechanism:h?"red+ulpfec":"red"},l.push(t))}})),0===l.length&&f&&l.push({ssrc:f});var m,_,v=t.matchPrefix(e,"b=");return v.length&&(v=0===Lo(m=v[0]).call(m,"b=TIAS:")?br(v[0].substr(7),10):0===Lo(_=v[0]).call(_,"b=AS:")?1e3*br(v[0].substr(5),10)*.95-16e3:void 0,Xn(l).call(l,(function(e){e.maxBitrate=v}))),l},t.parseRtcpParameters=function(e){var n,r,i={},o=Gr(n=vo(r=t.matchPrefix(e,"a=ssrc:")).call(r,(function(e){return t.parseSsrcMedia(e)}))).call(n,(function(e){return"cname"===e.attribute}))[0];o&&(i.cname=o.value,i.ssrc=o.ssrc);var s=t.matchPrefix(e,"a=rtcp-rsize");i.reducedSize=s.length>0,i.compound=0===s.length;var a=t.matchPrefix(e,"a=rtcp-mux");return i.mux=a.length>0,i},t.parseMsid=function(e){var n,r,i,o=t.matchPrefix(e,"a=msid:");if(1===o.length)return{stream:(i=o[0].substr(7).split(" "))[0],track:i[1]};var s=Gr(n=vo(r=t.matchPrefix(e,"a=ssrc:")).call(r,(function(e){return t.parseSsrcMedia(e)}))).call(n,(function(e){return"msid"===e.attribute}));return s.length>0?{stream:(i=s[0].value.split(" "))[0],track:i[1]}:void 0},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,r,i){var o=t.writeRtpDescription(e.kind,n);if(o+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),o},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:br(n[1],10),protocol:n[2],fmt:Uo(n).call(n,3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:br(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t}));function Ls(e,t,n,r,i){var o=Ns.writeRtpDescription(e.kind,t);if(o+=Ns.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=Ns.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var a="msid:"+(r?r.id:"-")+" "+s+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+Ns.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+Ns.localCName+"\r\n"),o}function Ps(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),s=r(t.parameters.apt,i);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.clockRate===s.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&!i(r,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(r.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}})),n}function Ds(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function Ms(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function xs(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}var Bs=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function r(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var i=function(n){var r=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){r[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw xs("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=i?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var o=n.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=Ns.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(i.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(i.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),i.prototype.onicecandidate=null,i.prototype.onaddstream=null,i.prototype.ontrack=null,i.prototype.onremovestream=null,i.prototype.onsignalingstatechange=null,i.prototype.oniceconnectionstatechange=null,i.prototype.onconnectionstatechange=null,i.prototype.onicegatheringstatechange=null,i.prototype.onnegotiationneeded=null,i.prototype.ondatachannel=null,i.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},i.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},i.prototype.getConfiguration=function(){return this._config},i.prototype.getLocalStreams=function(){return this.localStreams},i.prototype.getRemoteStreams=function(){return this.remoteStreams},i.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},i.prototype.addTrack=function(t,n){if(this._isClosed)throw xs("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw xs("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},i.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},i.prototype.removeTrack=function(t){if(this._isClosed)throw xs("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw xs("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},i.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},i.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},i.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},i.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},i.prototype._gather=function(t,n){var r=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var o=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(r.usingBundle&&n>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,a=!s||0===Object.keys(s).length;if(a)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),s.component=1,s.ufrag=i.getLocalParameters().usernameFragment;var c=Ns.writeCandidate(s);o.candidate=Object.assign(o.candidate,Ns.parseCandidate(c)),o.candidate.candidate=c,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var l=Ns.getMediaSections(r._localDescription.sdp);l[o.candidate.sdpMLineIndex]+=a?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",r._localDescription.sdp=Ns.getDescription(r._localDescription.sdp)+l.join("");var u=r.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),a||r._dispatchEvent("icecandidate",o),u&&(r._dispatchEvent("icecandidate",new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange())}},e.setTimeout((function(){o.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},i.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},i.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},i.prototype._transceive=function(e,n,r){var i=Ps(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:Ns.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),r&&e.rtpReceiver&&i.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},i.prototype.setLocalDescription=function(e){var t,n,r=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(xs("TypeError",'Unsupported type "'+e.type+'"'));if(!Ds("setLocalDescription",e.type,r.signalingState)||r._isClosed)return Promise.reject(xs("InvalidStateError","Can not set local "+e.type+" in state "+r.signalingState));if("offer"===e.type)t=Ns.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=Ns.parseRtpParameters(e);r.transceivers[t].localCapabilities=n})),r.transceivers.forEach((function(e,t){r._gather(e.mid,t)}));else if("answer"===e.type){t=Ns.splitSections(r._remoteDescription.sdp),n=t.shift();var i=Ns.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var o=r.transceivers[t],s=o.iceGatherer,a=o.iceTransport,c=o.dtlsTransport,l=o.localCapabilities,u=o.remoteCapabilities;if((!Ns.isRejected(e)||0!==Ns.matchPrefix(e,"a=bundle-only").length)&&!o.rejected){var d=Ns.getIceParameters(e,n),h=Ns.getDtlsParameters(e,n);i&&(h.role="server"),r.usingBundle&&0!==t||(r._gather(o.mid,t),"new"===a.state&&a.start(s,d,i?"controlling":"controlled"),"new"===c.state&&c.start(h));var p=Ps(l,u);r._transceive(o,p.codecs.length>0,!1)}}))}return r._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?r._updateSignalingState("have-local-offer"):r._updateSignalingState("stable"),Promise.resolve()},i.prototype.setRemoteDescription=function(i){var o=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(xs("TypeError",'Unsupported type "'+i.type+'"'));if(!Ds("setRemoteDescription",i.type,o.signalingState)||o._isClosed)return Promise.reject(xs("InvalidStateError","Can not set remote "+i.type+" in state "+o.signalingState));var s={};o.remoteStreams.forEach((function(e){s[e.id]=e}));var a=[],c=Ns.splitSections(i.sdp),l=c.shift(),u=Ns.matchPrefix(l,"a=ice-lite").length>0,d=Ns.matchPrefix(l,"a=group:BUNDLE ").length>0;o.usingBundle=d;var h=Ns.matchPrefix(l,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!h&&h.substr(14).split(" ").indexOf("trickle")>=0,c.forEach((function(r,c){var h=Ns.splitLines(r),p=Ns.getKind(r),f=Ns.isRejected(r)&&0===Ns.matchPrefix(r,"a=bundle-only").length,g=h[0].substr(2).split(" ")[2],m=Ns.getDirection(r,l),_=Ns.parseMsid(r),v=Ns.getMid(r)||Ns.generateIdentifier();if(f||"application"===p&&("DTLS/SCTP"===g||"UDP/DTLS/SCTP"===g))o.transceivers[c]={mid:v,kind:p,protocol:g,rejected:!0};else{var E,A,y,S,b,C,T,I,R;!f&&o.transceivers[c]&&o.transceivers[c].rejected&&(o.transceivers[c]=o._createTransceiver(p,!0));var w,k,O=Ns.parseRtpParameters(r);f||(w=Ns.getIceParameters(r,l),(k=Ns.getDtlsParameters(r,l)).role="client"),T=Ns.parseRtpEncodingParameters(r);var N=Ns.parseRtcpParameters(r),L=Ns.matchPrefix(r,"a=end-of-candidates",l).length>0,P=Ns.matchPrefix(r,"a=candidate:").map((function(e){return Ns.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!f&&d&&c>0&&o.transceivers[c]&&(o._disposeIceAndDtlsTransports(c),o.transceivers[c].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[c].iceTransport=o.transceivers[0].iceTransport,o.transceivers[c].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[c].rtpSender&&o.transceivers[c].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[c].rtpReceiver&&o.transceivers[c].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==i.type||f)"answer"!==i.type||f||(A=(E=o.transceivers[c]).iceGatherer,y=E.iceTransport,S=E.dtlsTransport,b=E.rtpReceiver,C=E.sendEncodingParameters,I=E.localCapabilities,o.transceivers[c].recvEncodingParameters=T,o.transceivers[c].remoteCapabilities=O,o.transceivers[c].rtcpParameters=N,P.length&&"new"===y.state&&(!u&&!L||d&&0!==c?P.forEach((function(e){Ms(E.iceTransport,e)})):y.setRemoteCandidates(P)),d&&0!==c||("new"===y.state&&y.start(A,w,"controlling"),"new"===S.state&&S.start(k)),!Ps(E.localCapabilities,E.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&E.sendEncodingParameters[0].rtx&&delete E.sendEncodingParameters[0].rtx,o._transceive(E,"sendrecv"===m||"recvonly"===m,"sendrecv"===m||"sendonly"===m),!b||"sendrecv"!==m&&"sendonly"!==m?delete E.rtpReceiver:(R=b.track,_?(s[_.stream]||(s[_.stream]=new e.MediaStream),n(R,s[_.stream]),a.push([R,b,s[_.stream]])):(s.default||(s.default=new e.MediaStream),n(R,s.default),a.push([R,b,s.default]))));else{(E=o.transceivers[c]||o._createTransceiver(p)).mid=v,E.iceGatherer||(E.iceGatherer=o._createIceGatherer(c,d)),P.length&&"new"===E.iceTransport.state&&(!L||d&&0!==c?P.forEach((function(e){Ms(E.iceTransport,e)})):E.iceTransport.setRemoteCandidates(P)),I=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(I.codecs=I.codecs.filter((function(e){return"rtx"!==e.name}))),C=E.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var D,M=!1;"sendrecv"===m||"sendonly"===m?(M=!E.rtpReceiver,b=E.rtpReceiver||new e.RTCRtpReceiver(E.dtlsTransport,p),M&&(R=b.track,_&&"-"===_.stream||(_?(s[_.stream]||(s[_.stream]=new e.MediaStream,Object.defineProperty(s[_.stream],"id",{get:function(){return _.stream}})),Object.defineProperty(R,"id",{get:function(){return _.track}}),D=s[_.stream]):(s.default||(s.default=new e.MediaStream),D=s.default)),D&&(n(R,D),E.associatedRemoteMediaStreams.push(D)),a.push([R,b,D]))):E.rtpReceiver&&E.rtpReceiver.track&&(E.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===E.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),E.associatedRemoteMediaStreams=[]),E.localCapabilities=I,E.remoteCapabilities=O,E.rtpReceiver=b,E.rtcpParameters=N,E.sendEncodingParameters=C,E.recvEncodingParameters=T,o._transceive(o.transceivers[c],!1,M)}}})),void 0===o._dtlsRole&&(o._dtlsRole="offer"===i.type?"active":"passive"),o._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(s).forEach((function(t){var n=s[t];if(n.getTracks().length){if(-1===o.remoteStreams.indexOf(n)){o.remoteStreams.push(n);var i=new Event("addstream");i.stream=n,e.setTimeout((function(){o._dispatchEvent("addstream",i)}))}a.forEach((function(e){var t=e[0],i=e[1];n.id===e[2].id&&r(o,t,i,[n])}))}})),a.forEach((function(e){e[2]||r(o,e[0],e[1],[])})),e.setTimeout((function(){o&&o.transceivers&&o.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},i.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},i.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},i.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},i.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},i.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},i.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(xs("InvalidStateError","Can not call createOffer after close"));var r=n.transceivers.filter((function(e){return"audio"===e.kind})).length,i=n.transceivers.filter((function(e){return"video"===e.kind})).length,o=arguments[0];if(o){if(o.mandatory||o.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==o.offerToReceiveAudio&&(r=!0===o.offerToReceiveAudio?1:!1===o.offerToReceiveAudio?0:o.offerToReceiveAudio),void 0!==o.offerToReceiveVideo&&(i=!0===o.offerToReceiveVideo?1:!1===o.offerToReceiveVideo?0:o.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--r<0&&(e.wantReceive=!1):"video"===e.kind&&--i<0&&(e.wantReceive=!1)}));r>0||i>0;)r>0&&(n._createTransceiver("audio"),r--),i>0&&(n._createTransceiver("video"),i--);var s=Ns.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(r,i){var o=r.track,s=r.kind,a=r.mid||Ns.generateIdentifier();r.mid=a,r.iceGatherer||(r.iceGatherer=n._createIceGatherer(i,n.usingBundle));var c=e.RTCRtpSender.getCapabilities(s);t<15019&&(c.codecs=c.codecs.filter((function(e){return"rtx"!==e.name}))),c.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=r.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];o&&t>=15019&&"video"===s&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new e.RTCRtpReceiver(r.dtlsTransport,s)),r.localCapabilities=c,r.sendEncodingParameters=l})),"max-compat"!==n._config.bundlePolicy&&(s+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){s+=Ls(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),s+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,s+="a="+Ns.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(s+="a=end-of-candidates\r\n"))}));var a=new e.RTCSessionDescription({type:"offer",sdp:s});return Promise.resolve(a)},i.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(xs("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(xs("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var r=Ns.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(r+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),r+="a=ice-options:trickle\r\n";var i=Ns.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,o){if(!(o+1>i)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?r+="m=application 0 DTLS/SCTP 5000\r\n":r+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?r+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(r+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(r+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var s;e.stream&&("audio"===e.kind?s=e.stream.getAudioTracks()[0]:"video"===e.kind&&(s=e.stream.getVideoTracks()[0]),s&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var a=Ps(e.localCapabilities,e.remoteCapabilities);!a.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,r+=Ls(e,a,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(r+="a=rtcp-rsize\r\n")}}));var o=new e.RTCSessionDescription({type:"answer",sdp:r});return Promise.resolve(o)},i.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(r,i){if(!n._remoteDescription)return i(xs("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var s=0;s<n.transceivers.length;s++)if(n.transceivers[s].mid===e.sdpMid){o=s;break}var a=n.transceivers[o];if(!a)return i(xs("OperationError","Can not add ICE candidate"));if(a.rejected)return r();var c=Object.keys(e.candidate).length>0?Ns.parseCandidate(e.candidate):{};if("tcp"===c.protocol&&(0===c.port||9===c.port))return r();if(c.component&&1!==c.component)return r();if((0===o||o>0&&a.iceTransport!==n.transceivers[0].iceTransport)&&!Ms(a.iceTransport,c))return i(xs("OperationError","Can not add ICE candidate"));var l=e.candidate.trim();0===l.indexOf("a=")&&(l=l.substr(2)),(t=Ns.getMediaSections(n._remoteDescription.sdp))[o]+="a="+(c.type?l:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=Ns.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var u=0;u<n.transceivers.length&&(n.transceivers[u].rejected||(n.transceivers[u].iceTransport.addRemoteCandidate({}),(t=Ns.getMediaSections(n._remoteDescription.sdp))[u]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=Ns.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));u++);r()}))},i.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw xs("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var o=["createOffer","createAnswer"];return o.forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(o=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),i};function Us(e){var t;const n=e&&e.navigator,r=Yo(t=n.mediaDevices.getUserMedia).call(t,n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return r(e).catch(e=>fo.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function Fs(e){var t;"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=Yo(t=e.navigator.getDisplayMedia).call(t,e.navigator)))}function Vs(e){const t=Lr(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Ur(e.MediaStreamTrack.prototype,"enabled");hr(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&hr(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=Bs(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let n=!1;return e=JSON.parse(ve(e)),Gr(e).call(e,e=>{if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&Nr("RTCIceServer.url","RTCIceServer.urls");const r="string"==typeof t;return r&&(t=[t]),t=Gr(t).call(t,e=>{if(0===Lo(e).call(e,"stun:"))return!1;const t=Is(e).call(e,"turn")&&!Is(e).call(e,"turn:[")&&rs(e).call(e,"transport=udp");return t&&!n?(n=!0,!0):t&&!n}),delete e.url,e.urls=r?t[0]:t,!!t.length}})}(e.iceServers,t.version),Or("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function js(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var Gs=Object.freeze({__proto__:null,shimPeerConnection:Vs,shimReplaceTrack:js,shimGetUserMedia:Us,shimGetDisplayMedia:Fs});function Hs(e){const t=Lr(e),n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){Nr("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i;const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=Yo(i=n.mediaDevices.getUserMedia).call(i,n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(ve(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(ve(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function Qs(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&hr(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ws(e){const t=Lr(e);if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;var n;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&Xn(n=["setLocalDescription","setRemoteDescription","addIceCandidate"]).call(n,(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.version<68&&arguments[0]&&""===arguments[0].candidate?fo.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),fo.resolve())};const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;return o.apply(this,[e||null]).then(e=>{if(t.version<53&&!n)try{Xn(e).call(e,e=>{e.type=i[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;Xn(e).call(e,(t,n)=>{e.set(n,rr({},t,{type:i[t.type]||t.type}))})}return e}).then(n,r)}}function qs(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return Xn(e).call(e,e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):fo.resolve(new xn)}}function zs(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return Xn(e).call(e,e=>e._pc=this),e}),Rr(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Zs(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t;Nr("removeStream","removeTrack"),Xn(t=this.getSenders()).call(t,t=>{var n;t.track&&rs(n=e.getTracks()).call(n,t.track)&&this.removeTrack(t)})})}function $s(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}var Ks=Object.freeze({__proto__:null,shimOnTrack:Qs,shimPeerConnection:Ws,shimSenderGetStats:qs,shimReceiverGetStats:zs,shimRemoveStream:Zs,shimRTCDataChannel:$s,shimGetUserMedia:Hs,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,fo.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}});function Ys(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n,r,i;this._localStreams||(this._localStreams=[]),rs(n=this._localStreams).call(n,e)||this._localStreams.push(e),Xn(r=e.getAudioTracks()).call(r,n=>t.call(this,n,e)),Xn(i=e.getVideoTracks()).call(i,n=>t.call(this,n,e))},e.RTCPeerConnection.prototype.addTrack=function(e,n){var r;return n&&(this._localStreams?rs(r=this._localStreams).call(r,n)||this._localStreams.push(n):this._localStreams=[n]),t.call(this,e,n)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t,n,r;this._localStreams||(this._localStreams=[]);const i=Lo(t=this._localStreams).call(t,e);if(-1===i)return;To(n=this._localStreams).call(n,i,1);const o=e.getTracks();Xn(r=this.getSenders()).call(r,e=>{rs(o).call(o,e.track)&&this.removeTrack(e)})})}}function Js(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){hr(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{var t;Xn(t=e.streams).call(t,e=>{var t;if(this._remoteStreams||(this._remoteStreams=[]),rs(t=this._remoteStreams).call(t,e))return;this._remoteStreams.push(e);const n=new Event("addstream");n.stream=e,this.dispatchEvent(n)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){var n;Xn(n=t.streams).call(n,t=>{var n;if(e._remoteStreams||(e._remoteStreams=[]),Lo(n=e._remoteStreams).call(n,t)>=0)return;e._remoteStreams.push(t);const r=new Event("addstream");r.stream=t,e.dispatchEvent(r)})}),t.apply(e,arguments)}}}function Xs(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),fo.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),fo.resolve()):i};let a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),fo.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),fo.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),fo.resolve()):r},t.addIceCandidate=a}function ea(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n;const e=t.mediaDevices,r=Yo(n=e.getUserMedia).call(n,e);t.mediaDevices.getUserMedia=e=>r(ta(e))}var r;!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=Yo(r=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}).call(r,t))}function ta(e){return e&&void 0!==e.video?rr({},e,{video:Dr(e.video)}):e}function na(e){const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(Nr("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(ve(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&hr(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function ra(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&hr(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ia(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){var n,r;void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=Qo(n=this.getTransceivers()).call(n,e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const i=Qo(r=this.getTransceivers()).call(r,e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveVideo||i||this.addTransceiver("video")}return t.apply(this,arguments)}}var oa=Object.freeze({__proto__:null,shimLocalStreamsAPI:Ys,shimRemoteStreamsAPI:Js,shimCallbacksAPI:Xs,shimGetUserMedia:ea,shimConstraints:ta,shimRTCIceServerUrls:na,shimTrackEventTransceiver:ra,shimCreateOfferLegacy:ia});function sa(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){var n;if("object"==typeof e&&e.candidate&&0===Lo(n=e.candidate).call(n,"a=")&&((e=JSON.parse(ve(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=Ns.parseCandidate(e.candidate),i=rr(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Rr(e,"icecandidate",t=>(t.candidate&&hr(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function aa(e){if(!e.RTCPeerConnection)return;const t=Lr(e);"sctp"in e.RTCPeerConnection.prototype||hr(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=Ns.splitSections(e.sdp);return t.shift(),as(t).call(t,e=>{var t;const n=Ns.parseMLine(e);return n&&"application"===n.kind&&-1!==Lo(t=n.protocol).call(t,"SCTP")})},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=br(t[1],10);return n!=n?-1:n},i=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=Ns.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=br(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&hr(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=i(e),n=o(arguments[0],e);let s;s=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const a={};hr(a,"maxMessageSize",{get:()=>s}),this._sctp=a}return s.apply(this,arguments)}}function ca(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},Rr(e,"datachannel",e=>(t(e.channel,e.target),e))}function la(e){var t;if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype;hr(n,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),hr(n,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),Xn(t=["setLocalDescription","setRemoteDescription"]).call(t,e=>{const t=n[e];n[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}})}function ua(e){if(!e.RTCPeerConnection)return;const t=Lr(e);if("chrome"===t.browser&&t.version>=71)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t,r;return e&&e.sdp&&-1!==Lo(t=e.sdp).call(t,"\na=extmap-allow-mixed")&&(e.sdp=Gr(r=e.sdp.split("\n")).call(r,e=>"a=extmap-allow-mixed"!==Os(e).call(e)).join("\n")),n.apply(this,arguments)}}var da,ha,pa=Object.freeze({__proto__:null,shimRTCIceCandidate:sa,shimMaxMessageSize:aa,shimSendThrowTypeError:ca,shimConnectionState:la,removeAllowExtmapMixed:ua});!function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=Or,r=Lr(e),i={browserDetails:r,commonShim:pa,extractVersion:Ir,disableLog:wr,disableWarnings:kr};switch(r.browser){case"chrome":if(!Es||!_s||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;n("adapter.js shimming chrome."),i.browserShim=Es,ls(e),us(e),_s(e),ds(e),ms(e),hs(e),ps(e),fs(e),vs(e),sa(e),la(e),aa(e),ca(e),ua(e);break;case"firefox":if(!Ks||!Ws||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Ks,Hs(e),Ws(e),Qs(e),Zs(e),qs(e),zs(e),$s(e),sa(e),la(e),aa(e),ca(e);break;case"edge":if(!Gs||!Vs||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),i;n("adapter.js shimming edge."),i.browserShim=Gs,Us(e),Fs(e),Vs(e),js(e),aa(e),ca(e);break;case"safari":if(!oa||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=oa,na(e),ia(e),Xs(e),Ys(e),Js(e),ra(e),ea(e),sa(e),aa(e),ca(e),ua(e);break;default:n("Unsupported browser!")}}({window:window}),function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(da||(da={})),function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(ha||(ha={}));const fa=new(r((function(t,n){
/*!@license
	 * UAParser.js v0.7.28
	 * Lightweight JavaScript-based User-Agent string parser
	 * https://github.com/faisalman/ua-parser-js
	 *
	 * Copyright © 2012-2021 Faisal Salman <f@faisalman.com>
	 * Licensed under MIT License
	 */
!function(e,r){var i="function",o="object",s="string",a="model",c="name",l="type",u="vendor",d="version",h="architecture",p="console",f="mobile",g="tablet",m="smarttv",_="wearable",v="embedded",E={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return typeof e===s&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:r},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===t?e:e.substring(0,255)}},A={rgx:function(e,t){for(var n,s,a,c,l,u,d=0;d<t.length&&!l;){var h=t[d],p=t[d+1];for(n=s=0;n<h.length&&!l;)if(l=h[n++].exec(e))for(a=0;a<p.length;a++)u=l[++s],typeof(c=p[a])===o&&c.length>0?2==c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,u):this[c[0]]=c[1]:3==c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=u?u.replace(c[1],c[2]):r:this[c[0]]=u?c[1].call(this,u,c[2]):r:4==c.length&&(this[c[0]]=u?c[3].call(this,u.replace(c[1],c[2])):r):this[c]=u||r;d+=2}},str:function(e,t){for(var n in t)if(typeof t[n]===o&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(E.has(t[n][i],e))return"?"===n?r:n}else if(E.has(t[n],e))return"?"===n?r:n;return e}},y={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},S={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[c,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[c,d],[/opios[\/\s]+([\w\.]+)/i],[d,[c,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[d,[c,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[c,d],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[d,[c,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[d,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[d,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[c,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[d,[c,"IE"]],[/yabrowser\/([\w\.]+)/i],[d,[c,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure Browser"],d],[/focus\/([\w\.]+)/i],[d,[c,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[d,[c,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[d,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[c,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[d,[c,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[d,[c,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[c,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 Browser"],d],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],d],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[c,d],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[c],[/;fbav\/([\w\.]+);/i],[d,[c,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[c,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[c,d],[/\bgsa\/([\w\.]+)\s.*safari\//i],[d,[c,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[d,[c,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[c,"Chrome WebView"],d],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[d,[c,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[c,d],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[d,[c,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[d,c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[c,[d,A.str,y.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[c,d],[/(navigator|netscape)\/([\w\.-]+)/i],[[c,"Netscape"],d],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[d,[c,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[c,d]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,E.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[h,/ower/,"",E.lowerize]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,E.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[a,[u,"Samsung"],[l,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[a,[u,"Samsung"],[l,f]],[/\((ip(?:hone|od)[\s\w]*);/i],[a,[u,"Apple"],[l,f]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[a,[u,"Apple"],[l,g]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[a,[u,"Huawei"],[l,g]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[a,[u,"Huawei"],[l,f]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[a,/_/g," "],[u,"Xiaomi"],[l,f]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[a,/_/g," "],[u,"Xiaomi"],[l,g]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[a,[u,"OPPO"],[l,f]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[a,[u,"Vivo"],[l,f]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[a,[u,"Realme"],[l,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[a,[u,"Motorola"],[l,f]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[u,"Motorola"],[l,g]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[a,[u,"LG"],[l,g]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[a,[u,"LG"],[l,f]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[a,[u,"Lenovo"],[l,g]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[a,/_/g," "],[u,"Nokia"],[l,f]],[/droid.+;\s(pixel\sc)[\s)]/i],[a,[u,"Google"],[l,g]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[a,[u,"Google"],[l,f]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[u,"Sony"],[l,f]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[a,"Xperia Tablet"],[u,"Sony"],[l,g]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[a,[u,"OnePlus"],[l,f]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[a,[u,"Amazon"],[l,g]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[a,"Fire Phone"],[u,"Amazon"],[l,f]],[/\((playbook);[\w\s\),;-]+(rim)/i],[a,u,[l,g]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[a,[u,"BlackBerry"],[l,f]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[a,[u,"ASUS"],[l,g]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[a,[u,"ASUS"],[l,f]],[/(nexus\s9)/i],[a,[u,"HTC"],[l,g]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[u,[a,/_/g," "],[l,f]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[a,[u,"Acer"],[l,g]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[a,[u,"Meizu"],[l,f]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[u,a,[l,f]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[u,a,[l,g]],[/\s(surface\sduo)\s/i],[a,[u,"Microsoft"],[l,g]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[a,[u,"Fairphone"],[l,f]],[/\s(u304aa)\sbuild/i],[a,[u,"AT&T"],[l,f]],[/sie-(\w*)/i],[a,[u,"Siemens"],[l,f]],[/[;\/]\s?(rct\w+)\sbuild/i],[a,[u,"RCA"],[l,g]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[a,[u,"Dell"],[l,g]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[a,[u,"Verizon"],[l,g]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[a,[u,"Barnes & Noble"],[l,g]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[a,[u,"NuVision"],[l,g]],[/;\s(k88)\sbuild/i],[a,[u,"ZTE"],[l,g]],[/;\s(nx\d{3}j)\sbuild/i],[a,[u,"ZTE"],[l,f]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[a,[u,"Swiss"],[l,f]],[/[;\/]\s?(zur\d{3})\sbuild/i],[a,[u,"Swiss"],[l,g]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[a,[u,"Zeki"],[l,g]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[u,"Dragon Touch"],a,[l,g]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[a,[u,"Insignia"],[l,g]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[a,[u,"NextBook"],[l,g]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[u,"Voice"],a,[l,f]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[u,"LvTel"],a,[l,f]],[/;\s(ph-1)\s/i],[a,[u,"Essential"],[l,f]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[a,[u,"Envizen"],[l,g]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[a,[u,"MachSpeed"],[l,g]],[/[;\/]\s?tu_(1491)\sbuild/i],[a,[u,"Rotor"],[l,g]],[/(shield[\w\s]+)\sbuild/i],[a,[u,"Nvidia"],[l,g]],[/(sprint)\s(\w+)/i],[u,a,[l,f]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[u,"Microsoft"],[l,f]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[a,[u,"Zebra"],[l,g]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[a,[u,"Zebra"],[l,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[u,a,[l,p]],[/droid.+;\s(shield)\sbuild/i],[a,[u,"Nvidia"],[l,p]],[/(playstation\s[345portablevi]+)/i],[a,[u,"Sony"],[l,p]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[a,[u,"Microsoft"],[l,p]],[/smart-tv.+(samsung)/i],[u,[l,m]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[u,"Samsung"],[l,m]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[u,"LG"],[l,m]],[/(apple)\s?tv/i],[u,[a,"Apple TV"],[l,m]],[/crkey/i],[[a,"Chromecast"],[u,"Google"],[l,m]],[/droid.+aft([\w])(\sbuild\/|\))/i],[a,[u,"Amazon"],[l,m]],[/\(dtv[\);].+(aquos)/i],[a,[u,"Sharp"],[l,m]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[u,E.trim],[a,E.trim],[l,m]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[l,m]],[/((pebble))app\/[\d\.]+\s/i],[u,a,[l,_]],[/droid.+;\s(glass)\s\d/i],[a,[u,"Google"],[l,_]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[a,[u,"Zebra"],[l,_]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[u,[l,v]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[a,[l,f]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[a,[l,g]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[l,E.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[u,"Generic"]],[/(phone)/i],[[l,f]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[d,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[c,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,c]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[c,d],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[c,[d,A.str,y.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[c,"Windows"],[d,A.str,y.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[c,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[c,"Mac OS"],[d,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[c,d],[/\(bb(10);/i],[d,[c,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[d,[c,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[c,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[c,"webOS"]],[/crkey\/([\d\.]+)/i],[d,[c,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[c,"Chromium OS"],d],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[c,d],[/(sunos)\s?([\w\.\d]*)/i],[[c,"Solaris"],d],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[c,d]]},b=function(t,n){if("object"==typeof t&&(n=t,t=r),!(this instanceof b))return new b(t,n).getResult();var i=t||(void 0!==e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:""),o=n?E.extend(S,n):S;return this.getBrowser=function(){var e={name:r,version:r};return A.rgx.call(e,i,o.browser),e.major=E.major(e.version),e},this.getCPU=function(){var e={architecture:r};return A.rgx.call(e,i,o.cpu),e},this.getDevice=function(){var e={vendor:r,model:r,type:r};return A.rgx.call(e,i,o.device),e},this.getEngine=function(){var e={name:r,version:r};return A.rgx.call(e,i,o.engine),e},this.getOS=function(){var e={name:r,version:r};return A.rgx.call(e,i,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===s&&e.length>255?E.trim(e,255):e,this},this.setUA(i),this};b.VERSION="0.7.28",b.BROWSER={NAME:c,MAJOR:"major",VERSION:d},b.CPU={ARCHITECTURE:h},b.DEVICE={MODEL:a,VENDOR:u,TYPE:l,CONSOLE:p,MOBILE:f,SMARTTV:m,TABLET:g,WEARABLE:_,EMBEDDED:v},b.ENGINE={NAME:c,VERSION:d},b.OS={NAME:c,VERSION:d},t.exports&&(n=t.exports=b),n.UAParser=b;var C=void 0!==e&&(e.jQuery||e.Zepto);if(C&&!C.ua){var T=new b;C.ua=T.getResult(),C.ua.get=function(){return T.getUA()},C.ua.set=function(e){T.setUA(e);var t=T.getResult();for(var n in t)C.ua[n]=t[n]}}}("object"==typeof window?window:e)})));let ga=fa.getResult();function ma(e){return e&&fa.setUA(e),ga=fa.getResult(),{name:_a(ga),version:va(ga),os:Ea(ga),osVersion:ga.os.version}}function _a(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return ha.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return ha.CHROME;case"Safari":case"Mobile Safari":return ha.SAFARI;case"Edge":return ha.EDGE;case"Firefox":return ha.FIREFOX;case"QQBrowser":return ha.QQ;case"Opera":return ha.OPERA;case"WeChat":return ha.WECHAT;default:return e.browser.name||""}}function va(e){let t;return t="Blink"===e.engine.name?e.engine.version||"":e.browser.version||"",t.split(".")[0]}function Ea(e){switch(e.os.name){case"Windows":return e.os.version?e.os.name+" "+e.os.version:e.os.name;default:return e.os.name||""}}function Aa(){return ma().os}function ya(){const e=ma();return!!("WebKit"===ga.engine.name&&e.os===da.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==ha.SAFARI||Ra()&&e.name!==ha.SAFARI)}function Sa(){const e=ma();if(ya()){if(e.os===da.MAC_OS)return!0;if(e.os===da.IOS){const e=ga.os.version&&ga.os.version.split(".");if(e&&14===Number(e[0])&&e[1]&&Number(e[1])>=3)return!0;if(e&&Number(e[0])>14)return!0}}return!1}function ba(){return"WebKit"===ga.engine.name}function Ca(){return ma().name===ha.CHROME}function Ta(){return ma().name===ha.SAFARI}function Ia(){return ma().name===ha.FIREFOX}function Ra(){return ma().os===da.IOS}function wa(){const e=ma();if(e.os!==da.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])}function ka(){const e=ma();if(e.os!==da.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&0===Number(t[1])}function Oa(){const e=ma();if(e.os!==da.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=1}function Na(){return Ta()&&navigator.maxTouchPoints>0}function La(){return ma().name===ha.WECHAT}function Pa(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function Da(){const e=ma();return e.name!==ha.EDGE&&e.name!==ha.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}Q({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Ma=M.Date.now,xa=[].slice,Ba=/MSIE .\./.test(xe),Ua=function(e){return function(t,n){var r=arguments.length>2,i=r?xa.call(arguments,2):void 0;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};Q({global:!0,bind:!0,forced:Ba},{setTimeout:Ua(o.setTimeout),setInterval:Ua(o.setInterval)});var Fa=M.setTimeout,Va=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},ja=Object.prototype.toString;function Ga(e){return"[object Array]"===ja.call(e)}function Ha(e){return null!==e&&"object"==typeof e}function Qa(e){return"[object Function]"===ja.call(e)}function Wa(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Ga(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var qa={isArray:Ga,isArrayBuffer:function(e){return"[object ArrayBuffer]"===ja.call(e)},isBuffer:function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Ha,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===ja.call(e)},isFile:function(e){return"[object File]"===ja.call(e)},isBlob:function(e){return"[object Blob]"===ja.call(e)},isFunction:Qa,isStream:function(e){return Ha(e)&&Qa(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:Wa,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)Wa(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)Wa(arguments[r],n);return t},extend:function(e,t,n){return Wa(t,(function(t,r){e[r]=n&&"function"==typeof t?Va(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function za(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Za=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(qa.isURLSearchParams(t))r=t.toString();else{var i=[];qa.forEach(t,(function(e,t){null!=e&&(qa.isArray(e)?t+="[]":e=[e],qa.forEach(e,(function(e){qa.isDate(e)?e=e.toISOString():qa.isObject(e)&&(e=JSON.stringify(e)),i.push(za(t)+"="+za(e))})))})),r=i.join("&")}if(r){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function $a(){this.handlers=[]}$a.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},$a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},$a.prototype.forEach=function(e){qa.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var Ka=$a,Ya=function(e,t,n){return qa.forEach(n,(function(n){e=n(e,t)})),e},Ja=function(e){return!(!e||!e.__CANCEL__)},Xa=function(e,t){qa.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},ec=function(e,t,n,r,i){return function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,r,i)},tc=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],nc=qa.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=qa.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},rc=qa.isStandardBrowserEnv()?{write:function(e,t,n,r,i,o){var s=[];s.push(e+"="+encodeURIComponent(t)),qa.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),qa.isString(r)&&s.push("path="+r),qa.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},ic=function(e){return new Promise((function(t,n){var r=e.data,i=e.headers;qa.isFormData(r)&&delete i["Content-Type"];var o=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",a=e.auth.password||"";i.Authorization="Basic "+btoa(s+":"+a)}if(o.open(e.method.toUpperCase(),Za(e.url,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var r,i,s,a,c,l="getAllResponseHeaders"in o?(r=o.getAllResponseHeaders(),c={},r?(qa.forEach(r.split("\n"),(function(e){if(a=e.indexOf(":"),i=qa.trim(e.substr(0,a)).toLowerCase(),s=qa.trim(e.substr(a+1)),i){if(c[i]&&tc.indexOf(i)>=0)return;c[i]="set-cookie"===i?(c[i]?c[i]:[]).concat([s]):c[i]?c[i]+", "+s:s}})),c):c):null,u={data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:l,config:e,request:o};!function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(ec("Request failed with status code "+n.status,n.config,null,n.request,n))}(t,n,u),o=null}},o.onabort=function(){o&&(n(ec("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(ec("Network Error",e,null,o)),o=null},o.ontimeout=function(){n(ec("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",o)),o=null},qa.isStandardBrowserEnv()){var c=rc,l=(e.withCredentials||nc(e.url))&&e.xsrfCookieName?c.read(e.xsrfCookieName):void 0;l&&(i[e.xsrfHeaderName]=l)}if("setRequestHeader"in o&&qa.forEach(i,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete i[t]:o.setRequestHeader(t,e)})),e.withCredentials&&(o.withCredentials=!0),e.responseType)try{o.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){o&&(o.abort(),n(e),o=null)})),void 0===r&&(r=null),o.send(r)}))},oc={"Content-Type":"application/x-www-form-urlencoded"};function sc(e,t){!qa.isUndefined(e)&&qa.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var ac={adapter:function(){var e;return("undefined"!=typeof n&&"[object process]"===Object.prototype.toString.call(n)||"undefined"!=typeof XMLHttpRequest)&&(e=ic),e}(),transformRequest:[function(e,t){return Xa(t,"Accept"),Xa(t,"Content-Type"),qa.isFormData(e)||qa.isArrayBuffer(e)||qa.isBuffer(e)||qa.isStream(e)||qa.isFile(e)||qa.isBlob(e)?e:qa.isArrayBufferView(e)?e.buffer:qa.isURLSearchParams(e)?(sc(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):qa.isObject(e)?(sc(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};qa.forEach(["delete","get","head"],(function(e){ac.headers[e]={}})),qa.forEach(["post","put","patch"],(function(e){ac.headers[e]=qa.merge(oc)}));var cc=ac;function lc(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var uc=function(e){var t,n;return lc(e),e.baseURL&&!function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}(e.url)&&(e.url=(t=e.baseURL,(n=e.url)?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t)),e.headers=e.headers||{},e.data=Ya(e.data,e.headers,e.transformRequest),e.headers=qa.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),qa.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||cc.adapter)(e).then((function(t){return lc(e),t.data=Ya(t.data,t.headers,e.transformResponse),t}),(function(t){return Ja(t)||(lc(e),t&&t.response&&(t.response.data=Ya(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},dc=function(e,t){t=t||{};var n={};return qa.forEach(["url","method","params","data"],(function(e){void 0!==t[e]&&(n[e]=t[e])})),qa.forEach(["headers","auth","proxy"],(function(r){qa.isObject(t[r])?n[r]=qa.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:qa.isObject(e[r])?n[r]=qa.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])})),qa.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n};function hc(e){this.defaults=e,this.interceptors={request:new Ka,response:new Ka}}hc.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=dc(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[uc,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},hc.prototype.getUri=function(e){return e=dc(this.defaults,e),Za(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},qa.forEach(["delete","get","head","options"],(function(e){hc.prototype[e]=function(t,n){return this.request(qa.merge(n||{},{method:e,url:t}))}})),qa.forEach(["post","put","patch"],(function(e){hc.prototype[e]=function(t,n,r){return this.request(qa.merge(r||{},{method:e,url:t,data:n}))}}));var pc=hc;function fc(e){this.message=e}fc.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},fc.prototype.__CANCEL__=!0;var gc=fc;function mc(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new gc(e),t(n.reason))}))}mc.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},mc.source=function(){var e;return{token:new mc((function(t){e=t})),cancel:e}};var _c=mc;function vc(e){var t=new pc(e),n=Va(pc.prototype.request,t);return qa.extend(n,pc.prototype,t),qa.extend(n,t),n}var Ec=vc(cc);Ec.Axios=pc,Ec.create=function(e){return vc(dc(Ec.defaults,e))},Ec.Cancel=gc,Ec.CancelToken=_c,Ec.isCancel=Ja,Ec.all=function(e){return Promise.all(e)},Ec.spread=function(e){return function(t){return e.apply(null,t)}};var Ac=Ec,yc=Ec;Ac.default=yc;var Sc=Ac;function bc(){const e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}const Cc={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},Tc=Ma(),Ic=e=>{for(const t in Cc)if(Object.prototype.hasOwnProperty.call(Cc,t)&&Cc[t]===e)return t;return"DEFAULT"},Rc=new class{constructor(){this.logLevel=Cc.DEBUG,this.uploadState="collecting",this.uploadLogWaitingList=[],this.uploadLogUploadingList=[],this.uploadErrorCount=0,this.currentLogID=0}debug(...e){var t;const n=Je(t=[Cc.DEBUG]).call(t,e);this.log.apply(this,n)}info(...e){var t;const n=Je(t=[Cc.INFO]).call(t,e);this.log.apply(this,n)}warning(...e){var t;const n=Je(t=[Cc.WARNING]).call(t,e);this.log.apply(this,n)}error(...e){var t;const n=Je(t=[Cc.ERROR]).call(t,e);this.log.apply(this,n)}upload(...e){var t;const n=Je(t=[Cc.DEBUG]).call(t,e);this.uploadLog.apply(this,n)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){Vc("UPLOAD_LOG",!0)}disableLogUpload(){Vc("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}log(...e){var t,n,r,i;if(Ma()-Tc<100)return void Fa(()=>{this.log(...e)},Ma()-Tc);const o=Math.max(0,Math.min(4,e[0]));if(e[0]=bc()+" Agora-SDK [".concat(Ic(o),"]:"),this.appendLogToWaitingList(o,e),o<this.logLevel)return;const s=bc()+" %cAgora-SDK [".concat(Ic(o),"]:");let a=[];switch(o){case Cc.DEBUG:a=Je(t=[s,"color: #64B5F6;"]).call(t,Uo(e).call(e,1)),console.log.apply(console,a);break;case Cc.INFO:a=Je(n=[s,"color: #1E88E5; font-weight: bold;"]).call(n,Uo(e).call(e,1)),console.log.apply(console,a);break;case Cc.WARNING:a=Je(r=[s,"color: #FB8C00; font-weight: bold;"]).call(r,Uo(e).call(e,1)),console.warn.apply(console,a);break;case Cc.ERROR:a=Je(i=[s,"color: #B00020; font-weight: bold;"]).call(i,Uo(e).call(e,1)),console.error.apply(console,a)}}uploadLog(...e){if(Ma()-Tc<100)return void Fa(()=>{this.uploadLog(...e)},Ma()-Tc);const t=Math.max(0,Math.min(4,e[0]));e[0]=bc()+" Agora-SDK [".concat(Ic(t),"]:"),this.appendLogToWaitingList(t,e)}appendLogToWaitingList(e,...t){if(!jc("UPLOAD_LOG"))return;let n="";Xn(t).call(t,e=>{"object"==typeof e&&(e=ve(e)),n+="".concat(e," ")}),this.uploadLogWaitingList.push({payload_str:n,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){var e;const t=this.uploadLogUploadingList,n={sdk_version:kc,process_id:jc("PROCESS_ID"),payload:ve(t)},r=await Sc.post(this.url||(this.proxyServerURL?Je(e="https://".concat(this.proxyServerURL,"/ls/?h=")).call(e,jc("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(jc("LOG_UPLOAD_SERVER"),"/upload/v1")),n,{responseType:"text"});if("OK"!==r.data)throw new Error("unexpected upload log response: "+r.data);this.uploadLogUploadingList=[]}uploadLogInterval(){var e;0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=To(e=this.uploadLogWaitingList).call(e,0,10)),this.uploadLogs().then(()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout(()=>this.uploadLogInterval(),3e3)}).catch(e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout(()=>this.uploadLogInterval(),200):window.setTimeout(()=>this.uploadLogInterval(),1e3)}))}},wc="v4.8.1-0-ge9003043(1/5/2022, 3:55:58 PM)",kc=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;const t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){var n;const e=t[1],r=t[2];return Je(n="".concat(e,".")).call(n,r)}const r=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(r&&r[1]&&r[2]){var i;const e=r[1],t=r[2];return Je(i="".concat(e,".")).call(i,100*(Number(t)+1))}return"4.0.0.999"}("4.8.1"),Oc=function(){try{return!0===JSON.parse("true")}catch(e){return!0}}(),Nc={username:"test",password:"111111",turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1},Lc={"90p":Wc(160,90),"90p_1":Wc(160,90),"120p":Wc(160,120,15,30,65),"120p_1":Wc(160,120,15,30,65),"120p_3":Wc(120,120,15,30,50),"120p_4":Wc(212,120),"180p":Wc(320,180,15,30,140),"180p_1":Wc(320,180,15,30,140),"180p_3":Wc(180,180,15,30,100),"180p_4":Wc(240,180,15,30,120),"240p":Wc(320,240,15,40,200),"240p_1":Wc(320,240,15,40,200),"240p_3":Wc(240,240,15,40,140),"240p_4":Wc(424,240,15,40,220),"360p":Wc(640,360,15,80,400),"360p_1":Wc(640,360,15,80,400),"360p_3":Wc(360,360,15,80,260),"360p_4":Wc(640,360,30,80,600),"360p_6":Wc(360,360,30,80,400),"360p_7":Wc(480,360,15,80,320),"360p_8":Wc(480,360,30,80,490),"360p_9":Wc(640,360,15,80,800),"360p_10":Wc(640,360,24,80,800),"360p_11":Wc(640,360,24,80,1e3),"480p":Wc(640,480,15,100,500),"480p_1":Wc(640,480,15,100,500),"480p_2":Wc(640,480,30,100,1e3),"480p_3":Wc(480,480,15,100,400),"480p_4":Wc(640,480,30,100,750),"480p_6":Wc(480,480,30,100,600),"480p_8":Wc(848,480,15,100,610),"480p_9":Wc(848,480,30,100,930),"480p_10":Wc(640,480,10,100,400),"720p":Wc(1280,720,15,120,1130),"720p_1":Wc(1280,720,15,120,1130),"720p_2":Wc(1280,720,30,120,2e3),"720p_3":Wc(1280,720,30,120,1710),"720p_5":Wc(960,720,15,120,910),"720p_6":Wc(960,720,30,120,1380),"1080p":Wc(1920,1080,15,120,2080),"1080p_1":Wc(1920,1080,15,120,2080),"1080p_2":Wc(1920,1080,30,120,3e3),"1080p_3":Wc(1920,1080,30,120,3150),"1080p_5":Wc(1920,1080,60,120,4780),"1440p":Wc(2560,1440,30,120,4850),"1440p_1":Wc(2560,1440,30,120,4850),"1440p_2":Wc(2560,1440,60,120,7350),"4k":Wc(3840,2160,30,120,8910),"4k_1":Wc(3840,2160,30,120,8910),"4k_3":Wc(3840,2160,60,120,13500)},Pc={"480p":qc(640,480,5),"480p_1":qc(640,480,5),"480p_2":qc(640,480,30),"480p_3":qc(640,480,15),"720p":qc(1280,720,5),"720p_1":qc(1280,720,5),"720p_2":qc(1280,720,30),"720p_3":qc(1280,720,15),"1080p":qc(1920,1080,5),"1080p_1":qc(1920,1080,5),"1080p_2":qc(1920,1080,30),"1080p_3":qc(1920,1080,15)},Dc={"1SL1TL":zc(1,1),"3SL3TL":zc(3,3),"2SL3TL":zc(2,3)};function Mc(e){return"string"==typeof e?rr({},Lc[e]):e}function xc(e){return"string"==typeof e?rr({},Pc[e]):e}function Bc(e){return"string"==typeof e?rr({},Dc[e]):e}const Uc={speech_low_quality:Qc(16e3,!1),speech_standard:Qc(32e3,!1,18),music_standard:Qc(48e3,!1),standard_stereo:Qc(48e3,!0,56),high_quality:Qc(48e3,!1,128),high_quality_stereo:Qc(48e3,!0,192)};function Fc(e){return"string"==typeof e?rr({},Uc[e]):e}function Vc(e,t,n){var r,i;rs(r=or(Gc)).call(r,e)&&(!n&&rs(i=or(Hc)).call(i,e)||(Gc[e]=t))}function jc(e){return Gc[e]}const Gc={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TCC:!0,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,SDK_FALLBACK:!0,ENUMERATE_DEVICES_INTERVAL:!0,H264_PROFILE_LEVEL_ID:"",SDP_LOGGING:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},USE_NEW_TOKEN:!0},Hc={};function Qc(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function Wc(e,t,n,r,i){return{width:e,height:t,frameRate:n,bitrateMin:r,bitrateMax:i}}function qc(e,t,n,r,i){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:r,bitrateMax:i}}function zc(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}Oc||(Gc.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],Gc.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],Gc.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],Gc.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],Gc.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],Gc.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],Gc.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",Gc.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",Gc.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",Gc.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",Gc.AREAS=["NORTH_AMERICA","OVERSEA"]);const Zc=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],$c=[],Kc=[];function Yc(e){rs($c).call($c,e)||$c.push(e)}function Jc(e){const t=Lo($c).call($c,e);-1!==t&&To($c).call($c,t,1)}function Xc(e){rs(Kc).call(Kc,e)||Kc.push(e)}function el(e){const t=Lo(Kc).call(Kc,e);-1!==t&&To(Kc).call(Kc,t,1)}var tl=[],nl=tl.sort,rl=s((function(){tl.sort(void 0)})),il=s((function(){tl.sort(null)})),ol=zn("sort");Q({target:"Array",proto:!0,forced:rl||!il||ol},{sort:function(e){return void 0===e?nl.call(Ae(this)):nl.call(Ae(this),x(e))}});var sl=$e("Array").sort,al=Array.prototype,cl=function(e){var t=e.sort;return e===al||e instanceof Array&&t===al.sort?sl:t};Q({target:"Array",stat:!0},{isArray:Ee});var ll,ul,dl,hl=M.Array.isArray;!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P"}(ll||(ll={}));class pl extends Error{constructor(e,t="",n){var r;super(t),this.name="AgoraRTCException",this.code=e,this.message=Je(r="AgoraRTCError ".concat(this.code,": ")).call(r,t),this.data=n}toString(){var e;return this.data?Je(e="data: ".concat(ve(this.data),"\n")).call(e,this.stack):"".concat(this.stack)}print(e="error"){return"error"===e&&Rc.error(this.toString()),"warning"===e&&Rc.warning(this.toString()),this}throw(){throw this.print(),this}}function fl(e,t){if("boolean"!=typeof e)throw new pl(ll.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function gl(e,t,n){var r;if(!rs(n).call(n,e))throw new pl(ll.INVALID_PARAMS,Je(r="".concat(t," can only be set as ")).call(r,ve(n)))}function ml(e,t,n=1,r=1e4,i=!0){var o,s;if(e<n||e>r||i&&!function(e){return"number"==typeof e&&e%1==0}(e))throw new pl(ll.INVALID_PARAMS,Je(o=Je(s="invalid ".concat(t,": the value range is [")).call(s,n,", ")).call(o,r,"]. integer only"))}function _l(e,t,n=1,r=255,i=!0){if(null==e)throw new pl(ll.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));var o,s,a;if(!Sl(e,n,r,i))throw new pl(ll.INVALID_PARAMS,Je(o=Je(s=Je(a="Invalid ".concat(t||"string param",": Length of the string: [")).call(a,n,",")).call(s,r,"].")).call(o,i?" ASCII characters only.":""))}function vl(e,t){if(!hl(e))throw new pl(ll.INVALID_PARAMS,"".concat(t," should be an array"))}function El(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw Rc.error("Invalid Channel Name ".concat(e)),new pl(ll.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function Al(e){var t,n;if(n=e,!("number"==typeof n&&Math.floor(n)===n&&0<=n&&n<=4294967295||Sl(e,1,255)))throw Rc.error(Je(t="Invalid UID ".concat(e," ")).call(t,typeof e)),new pl(ll.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");"string"==typeof e&&Rc.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function yl(e){return null==e}function Sl(e,t=1,n=255,r=!0){return"string"==typeof e&&e.length<=n&&e.length>=t&&(!r||function(e){if("string"!=typeof e)return!1;for(let t=0;t<e.length;t+=1){const n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}(e))}!function(e){e.FREE="free",e.UPLOADING="uploading"}(ul||(ul={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata"}(dl||(dl={}));const bl={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};Q({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991});var Cl=9007199254740991;Q({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991});var Tl=-9007199254740991;function Il(e){return _l(e.reportId,"params.reportId",0,100,!1),_l(e.category,"params.category",0,100,!1),_l(e.event,"params.event",0,100,!1),_l(e.label,"params.label",0,100,!1),ml(e.value,"params.value",Tl,Cl,!1),!0}const Rl={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};var wl,kl,Ol,Nl,Ll,Pl,Dl,Ml,xl,Bl,Ul,Fl,Vl,jl,Gl,Hl,Ql,Wl,ql,zl,Zl;function $l(e){return ml(e.timeout,"config.timeout",0,1e5),ml(e.timeoutFactor,"config.timeoutFactor",0,100,!1),ml(e.maxRetryCount,"config.maxRetryConfig",0,1/0),ml(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function Kl(e){if(!hl(e)||e.length<1)return!1;try{Xn(e).call(e,e=>{if(!e.urls)throw Error()})}catch(e){return!1}return!0}function Yl(e){return _l(e.turnServerURL,"turnServerURL"),_l(e.username,"username"),_l(e.password,"password"),e.udpport&&ml(e.udpport,"udpport",1,99999,!0),e.forceturn&&fl(e.forceturn,"forceturn"),e.security&&fl(e.security,"security"),e.tcpport&&ml(e.tcpport,"tcpport",1,99999,!0),!0}function Jl(e){return void 0!==e.level&&gl(e.level,"level",[1,2,3]),!0}!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics"}(wl||(wl={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAT="io.agora.pb.Wrtc.JoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed"}(kl||(kl={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(Ol||(Ol={})),function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",e.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(Nl||(Nl={})),function(e){e.TRACER="tracer"}(Ll||(Ll={})),function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(Pl||(Pl={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(Dl||(Dl={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(Ml||(Ml={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(xl||(xl={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Bl||(Bl={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Ul||(Ul={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(Fl||(Fl={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost"}(Vl||(Vl={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED"}(jl||(jl={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(Gl||(Gl={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response"}(Hl||(Hl={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc"}(Ql||(Ql={})),function(e){e.PUBLISH_STATS="publish_stats",e.PUBLISH_RELATED_STATS="publish_related_stats",e.SUBSCRIBE_STATS="subscribe_stats",e.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length"}(Wl||(Wl={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio"}(ql||(ql={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(zl||(zl={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer"}(Zl||(Zl={}));const Xl={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},eu={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},tu={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},nu={uplinkNetworkQuality:0,downlinkNetworkQuality:0},ru={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};var iu,ou;!function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls"}(iu||(iu={})),function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(ou||(ou={}));const su={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},au={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function cu(e,t){_l(e.url,"".concat(t,".url"),1,1e3,!1),yl(e.x)||ml(e.x,"".concat(t,".x"),0,1e4),yl(e.y)||ml(e.y,"".concat(t,".y"),0,1e4),yl(e.width)||ml(e.width,"".concat(t,".width"),0,1e4),yl(e.height)||ml(e.height,"".concat(t,".height"),0,1e4),yl(e.zOrder)||ml(e.zOrder,"".concat(t,".zOrder"),0,255),yl(e.alpha)||ml(e.alpha,"".concat(t,".alpha"),0,1,!1)}const lu={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},uu={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};var du,hu,pu,fu,gu,mu,_u,vu,Eu,Au,yu;function Su(e){if(!e.channelName)throw new pl(ll.INVALID_PARAMS,"invalid channelName in info");if(!e.uid||"number"!=typeof e.uid)throw new pl(ll.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&_l(e.token,"info.token",1,2047),Al(e.uid),El(e.channelName),!0}function bu(e){return gl(e,"mediaSource",["screen","window","application"]),!0}!function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(du||(du={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(hu||(hu={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(pu||(pu={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(fu||(fu={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(gu||(gu={})),function(e){e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low"}(mu||(mu={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response"}(_u||(_u={})),function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track"}(vu||(vu={})),function(e){e.SCREEN_TRACK="screen_track",e.LOW_STREAM="low_stream"}(Eu||(Eu={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(Au||(Au={})),function(e){e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(yu||(yu={}));const Cu=["AFRICA","ASIA","CHINA","EUROPE","GLOBAL","INDIA","JAPAN","NORTH_AMERICA","OCEANIA","OVERSEA","SOUTH_AMERICA","KOREA"];var Tu;!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(Tu||(Tu={}));const Iu={CHINA:{},ASIA:{CODE:Tu.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Tu.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Tu.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Tu.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Tu.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Tu.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Tu.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Tu.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Tu.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Tu.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Tu.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};var Ru,wu,ku,Ou,Nu,Lu,Pu,Du;Oc&&(Iu.CHINA={CODE:Tu.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(e){e.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(Ru||(Ru={}));class Mu{constructor(){this._events={},this.addListener=this.on}getListeners(e){var t;return this._events[e]?vo(t=this._events[e]).call(t,e=>e.listener):[]}on(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;const n=this._events[e],r=this._indexOfListener(n,t);-1!==r&&To(n).call(n,r,1),0===this._events[e].length&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e,...t){var n;this._events[e]||(this._events[e]=[]);const r=vo(n=this._events[e]).call(n,e=>e);for(let i=0;i<r.length;i+=1){const n=r[i];n.once&&this.off(e,n.listener),n.listener.apply(this,t||[])}}_indexOfListener(e,t){let n=e.length;for(;n--;)if(e[n].listener===t)return n;return-1}}class xu extends Mu{constructor(e,t){super()}}!function(e){e.SEND="sendonly",e.RECV="recvonly",e.SENDRECV="sendrecv",e.INACTIVE="inactive"}(wu||(wu={})),function(e){e.VIDEO="video",e.AUDIO="audio"}(ku||(ku={})),function(e){e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack"}(Ou||(Ou={})),function(e){e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected"}(Nu||(Nu={})),function(e){e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost"}(Lu||(Lu={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Pu||(Pu={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Du||(Du={}));const Bu={join:["startJoin","startRequestAp","startJoinGateway","finishJoin"],publish:["startPublish"]},Uu={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1};function Fu(){return Uu}var Vu=ie.concat("length","prototype"),ju={f:Object.getOwnPropertyNames||function(e){return re(e,Vu)}},Gu=le("Reflect","ownKeys")||function(e){var t=ju.f(U(e)),n=er.f;return n?t.concat(n(e)):t};Q({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){for(var t,n,r=_(e),i=R.f,o=Gu(r),s={},a=0;o.length>a;)void 0!==(n=i(r,t=o[a++]))&&ye(s,t,n);return s}});var Hu=M.Object.getOwnPropertyDescriptors,Qu=ju.f,Wu={}.toString,qu="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],zu={f:function(e){return qu&&"[object Window]"==Wu.call(e)?function(e){try{return Qu(e)}catch(e){return qu.slice()}}(e):Qu(_(e))}},Zu={f:Pe},$u=V.f,Ku=function(e){var t=M.Symbol||(M.Symbol={});y(t,e)||$u(t,e,{value:Zu.f(e)})},Yu=Ct.forEach,Ju=kt("hidden"),Xu="Symbol",ed=Pe("toPrimitive"),td=xt.set,nd=xt.getterFor(Xu),rd=Object.prototype,id=o.Symbol,od=le("JSON","stringify"),sd=R.f,ad=V.f,cd=zu.f,ld=u.f,ud=Ce("symbols"),dd=Ce("op-symbols"),hd=Ce("string-to-symbol-registry"),pd=Ce("symbol-to-string-registry"),fd=Ce("wks"),gd=o.QObject,md=!gd||!gd.prototype||!gd.prototype.findChild,_d=a&&s((function(){return 7!=qt(ad({},"a",{get:function(){return ad(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=sd(rd,t);r&&delete rd[t],ad(e,t,n),r&&e!==rd&&ad(rd,t,r)}:ad,vd=function(e,t){var n=ud[e]=qt(id.prototype);return td(n,{type:Xu,tag:e,description:t}),a||(n.description=t),n},Ed=we&&"symbol"==typeof id.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof id},Ad=function(e,t,n){e===rd&&Ad(dd,t,n),U(e);var r=E(t,!0);return U(n),y(ud,r)?(n.enumerable?(y(e,Ju)&&e[Ju][r]&&(e[Ju][r]=!1),n=qt(n,{enumerable:d(0,!1)})):(y(e,Ju)||ad(e,Ju,d(1,{})),e[Ju][r]=!0),_d(e,r,n)):ad(e,r,n)},yd=function(e,t){U(e);var n=_(t),r=oe(n).concat(Td(n));return Yu(r,(function(t){a&&!Sd.call(n,t)||Ad(e,t,n[t])})),e},Sd=function(e){var t=E(e,!0),n=ld.call(this,t);return!(this===rd&&y(ud,t)&&!y(dd,t))&&(!(n||!y(this,t)||!y(ud,t)||y(this,Ju)&&this[Ju][t])||n)},bd=function(e,t){var n=_(e),r=E(t,!0);if(n!==rd||!y(ud,r)||y(dd,r)){var i=sd(n,r);return!i||!y(ud,r)||y(n,Ju)&&n[Ju][r]||(i.enumerable=!0),i}},Cd=function(e){var t=cd(_(e)),n=[];return Yu(t,(function(e){y(ud,e)||y(te,e)||n.push(e)})),n},Td=function(e){var t=e===rd,n=cd(t?dd:_(e)),r=[];return Yu(n,(function(e){!y(ud,e)||t&&!y(rd,e)||r.push(ud[e])})),r};if(we||(Kt((id=function(){if(this instanceof id)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=Re(e),n=function(e){this===rd&&n.call(dd,e),y(this,Ju)&&y(this[Ju],t)&&(this[Ju][t]=!1),_d(this,t,d(1,e))};return a&&md&&_d(rd,t,{configurable:!0,set:n}),vd(t,e)}).prototype,"toString",(function(){return nd(this).tag})),u.f=Sd,V.f=Ad,R.f=bd,ju.f=zu.f=Cd,er.f=Td,a&&ad(id.prototype,"description",{configurable:!0,get:function(){return nd(this).description}})),ke||(Zu.f=function(e){return vd(Pe(e),e)}),Q({global:!0,wrap:!0,forced:!we,sham:!we},{Symbol:id}),Yu(oe(fd),(function(e){Ku(e)})),Q({target:Xu,stat:!0,forced:!we},{for:function(e){var t=String(e);if(y(hd,t))return hd[t];var n=id(t);return hd[t]=n,pd[n]=t,n},keyFor:function(e){if(!Ed(e))throw TypeError(e+" is not a symbol");if(y(pd,e))return pd[e]},useSetter:function(){md=!0},useSimple:function(){md=!1}}),Q({target:"Object",stat:!0,forced:!we,sham:!a},{create:function(e,t){return void 0===t?qt(e):yd(qt(e),t)},defineProperty:Ad,defineProperties:yd,getOwnPropertyDescriptor:bd}),Q({target:"Object",stat:!0,forced:!we},{getOwnPropertyNames:Cd,getOwnPropertySymbols:Td}),Q({target:"Object",stat:!0,forced:s((function(){er.f(1)}))},{getOwnPropertySymbols:function(e){return er.f(Ae(e))}}),od){var Id=!we||s((function(){var e=id();return"[null]"!=od([e])||"{}"!=od({a:e})||"{}"!=od(Object(e))}));Q({target:"JSON",stat:!0,forced:Id},{stringify:function(e,t,n){for(var r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=t,(v(t)||void 0!==e)&&!Ed(e))return Ee(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Ed(t))return t}),i[1]=t,od.apply(null,i)}})}id.prototype[ed]||j(id.prototype,ed,id.prototype.valueOf),yt(id,Xu),te[Ju]=!0;var Rd,wd=M.Object.getOwnPropertySymbols,kd=dr,Od=function(e,t,n){return t in e?kd(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};!function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5"}(Rd||(Rd={}));var Nd=$e("Array").entries,Ld=Array.prototype,Pd={DOMTokenList:!0,NodeList:!0},Dd=function(e){var t=e.entries;return e===Ld||e instanceof Array&&t===Ld.entries||Pd.hasOwnProperty(ht(e))?Nd:t},Md=function(e){var t,n,r,i,o,s=Ae(e),a="function"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,u=void 0!==l,d=0,h=ft(s);if(u&&(l=B(l,c>2?arguments[2]:void 0,2)),null==h||a==Array&&it(h))for(n=new a(t=$(s.length));t>d;d++)ye(n,d,u?l(s[d],d):s[d]);else for(o=(i=h.call(s)).next,n=new a;!(r=o.call(i)).done;d++)ye(n,d,u?gt(i,l,[r.value,d],!0):r.value);return n.length=d,n},xd=!Yr((function(e){Array.from(e)}));Q({target:"Array",stat:!0,forced:xd},{from:Md});var Bd=M.Array.from,Ud=$e("Array").keys,Fd=Array.prototype,Vd={DOMTokenList:!0,NodeList:!0},jd=function(e){var t=e.keys;return e===Fd||e instanceof Array&&t===Fd.keys||Vd.hasOwnProperty(ht(e))?Ud:t};function Gd(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}let Hd=0,Qd=0;function Wd(e,t,n){return new fo((r,i)=>{t.timeout=t.timeout||jc("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!n?(t.data=ve(t.data),Hd+=Cp(t.data)):n&&(t.data.size?Hd+=t.data.size:t.data instanceof FormData?Hd+=function(e){let t=0;return/DingTalk/i.test(navigator.userAgent)&&e.realFormData&&(e=e.realFormData),Xn(e).call(e,e=>{t+="string"==typeof e?Cp(e):e.size}),t+138}(t.data):Hd+=Cp(ve(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,Sc.request(t).then(e=>{"string"==typeof e.data?Qd+=Cp(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?Qd+=e.data.byteLength:Qd+=Cp(ve(e.data)),r(e.data)}).catch(e=>{Sc.isCancel(e)?i(new pl(ll.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?i(new pl(ll.NETWORK_TIMEOUT,e.message)):e.response?i(new pl(ll.NETWORK_RESPONSE_ERROR,e.response.status)):i(new pl(ll.NETWORK_ERROR,e.message))})})}async function qd(e,t){const n=new Blob([t.data],{type:"buffer"});return await Wd(e,function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=Gd(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=Gd(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}({},t,{data:n,headers:{"Content-Type":"application/octet-stream"}}),!0)}const zd=new class extends Mu{constructor(){super(),this._moduleName="network-indicator",this._networkState=Pu.ONLINE,window.addEventListener("online",()=>{this.networkState=Pu.ONLINE}),window.addEventListener("offline",()=>{this.networkState=Pu.OFFLINE})}set networkState(e){Rc.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+e),this.emit(Du.NETWORK_STATE_CHANGE,e,this._networkState),e===Pu.ONLINE?this.emit(Du.ONLINE):e===Pu.OFFLINE&&(this.onlineWaiter=new fo(e=>{this.once(Du.ONLINE,()=>{this.onlineWaiter=void 0,e(Pu.ONLINE)})}),this.emit(Du.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}},Zd={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function $d(e,t){const n=t.timeout*Math.pow(t.timeoutFactor,e);return Math.min(t.maxRetryTimeout,n)}function Kd(e,t,n,r){const i=rr({},Zd,r);let o=i.timeout;const s=async()=>{await Ip(o),o*=i.timeoutFactor,o=Math.min(i.maxRetryTimeout,o)};let a=!1;const c=new fo(async(r,o)=>{t=t||(()=>!1),n=n||(()=>!0);for(let c=0;c<i.maxRetryCount;c+=1){if(a)return o(new pl(ll.OPERATION_ABORTED));try{const n=await e();if(!t(n,c))return r(n);if(c+1===i.maxRetryCount)return r(n);await s()}catch(e){if(!n(e,c))return o(e);if(c+1===i.maxRetryCount)return o(e);await s()}}});return c.cancel=()=>a=!0,c}let Yd=!1;const Jd=new class extends Mu{};function Xd(){const e=ma();if(!Yd){const t=n=>{n.preventDefault(),Yd=!1,"Android"!==e.os||"Chrome"!==e.name&&e.name!==ha.WECHAT?(document.body.removeEventListener("touchstart",t,!0),document.body.removeEventListener("mousedown",t,!0)):document.body.removeEventListener("click",t,!0)};Yd=!0,"Android"!==e.os||"Chrome"!==e.name&&e.name!==ha.WECHAT?(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0)):document.body.addEventListener("click",t,!0),Rc.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),Jd.onAutoplayFailed?Jd.onAutoplayFailed():Jd.onAudioAutoplayFailed?Rc.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):Rc.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),Jd.emit("autoplay-failed")}}function eh(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function th(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=eh(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=eh(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}function nh(e={report:ih}){return function(t,n,r){const i=t[n];if("function"==typeof i){const o="AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name;r.value=function(...t){var r;const s=e.report.reportApiInvoke(this._sessionId||null,{name:Je(r="".concat(o,".")).call(r,n),options:t,tag:Ll.TRACER});try{const e=i.apply(this,t);return s.onSuccess(),e}catch(e){throw s.onError(e),e}}}return r}}function rh(e={report:ih}){return function(t,n,r){const i=t[n];if("function"==typeof i){const o="AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name;r.value=async function(...t){var r;const s=e.report.reportApiInvoke(this._sessionId||null,{name:Je(r="".concat(o,".")).call(r,n),options:t,tag:Ll.TRACER});try{const e=await i.apply(this,t);return s.onSuccess(),e}catch(e){throw s.onError(e),e}}}return r}}const ih=new class{constructor(){var e,t;this.baseInfoMap=new xn,this.clientList=$c,this.keyEventUploadPendingItems=[],this.normalEventUploadPendingItems=[],this.apiInvokeUploadPendingItems=[],this.apiInvokeCount=0,this.ltsList=[],this.lastSendNormalEventTime=Ma(),this.customReportCount=0,this.eventUploadTimer=window.setInterval(Yo(e=this.doSend).call(e,this),jc("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(Yo(t=this.appendSessionId).call(t,this),jc("EVENT_REPORT_SEND_INTERVAL"))}reportApiInvoke(e,t,n){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const r=Ma();this.apiInvokeCount+=1;const i=this.apiInvokeCount,o=()=>({tag:t.tag,invokeId:i,sid:e,name:t.name,apiInvokeTime:r,options:t.options,states:t.states||null}),s=!!jc("SHOW_REPORT_INVOKER_LOG");s&&Rc.info("".concat(t.name," start"),t.options);let a=!1;Ip(t.timeout).then(()=>{a||(this.sendApiInvoke(th({},o(),{error:ll.API_INVOKE_TIMEOUT,success:!1})),Rc.debug("".concat(t.name," timeout")))});const c=new pl(ll.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const r=()=>{if(a)throw c;return a=!0,this.sendApiInvoke(th({},o(),{success:!0},t.reportResult&&{result:e})),s&&Rc.info("".concat(t.name," onSuccess")),e};return n?zp(r,t.name+"Success",n,()=>a=!0):r()},onError:e=>{const r=()=>{if(a)throw e;a=!0,this.sendApiInvoke(th({},o(),{success:!1,error:e.toString()})),s&&Rc.info("".concat(t.name," onFailure"),e.toString())};return n?zp(r,t.name+"Error",n,()=>a=!0):r()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const n=Ma(),r=this.createBaseInfo(e,n);r.cname=t.cname;const i=rr({},{willUploadConsoleLog:jc("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:Oc?"global":"oversea",areas:jc("AREAS")&&jc("AREAS").join(",")},t.extend),o=Ma(),s=th({},r,{eventType:wl.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:wc,lts:o,elapse:o-n,extend:ve(i),mode:t.mode,process:jc("PROCESS_ID"),success:!0,version:kc});this.send({type:kl.SESSION,data:s},!0)}joinChooseServer(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=th({},r,{eventType:wl.JOIN_CHOOSE_SERVER,lts:i,eventElapse:i-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:i-n.startTime,success:t.succ,chooseServerAddrList:ve(t.serverList),uid:t.uid?br(t.uid):null,cid:t.cid?br(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0});this.send({type:kl.JOIN_CHOOSE_SERVER,data:o},!0)}reqUserAccount(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=th({},r,{eventType:wl.REQ_USER_ACCOUNT,lts:i,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:i-n.startTime,eventElapse:i-t.lts,extend:ve(t.extend)});this.send({type:kl.REQ_USER_ACCOUNT,data:o},!0)}joinGateway(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info;t.vid&&(r.vid=t.vid),r.uid=t.uid,r.cid=t.cid;const i=Ma(),o=th({},r,{eventType:wl.JOIN_GATEWAY,lts:i,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,elapse:i-n.startTime,eventElapse:i-t.lts});t.succ&&(n.lastJoinSuccessTime=i),this.send({type:kl.JOIN_GATEWAT,data:o},!0)}joinChannelTimeout(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=Ma(),i=th({},n.info,{lts:r,timeout:t,elapse:r-n.startTime});this.send({type:kl.JOIN_CHANNEL_TIMEOUT,data:i},!0)}publish(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=th({},r,{eventType:wl.PUBLISH,lts:i,eventElapse:t.eventElapse,elapse:i-n.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:kl.PUBLISH,data:o},!0)}subscribe(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=th({},r,{eventType:wl.SUBSCRIBE,lts:i,eventElapse:t.eventElapse,elapse:i-n.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid});"string"==typeof t.peerid?o.peerSuid=t.peerid:o.peer=t.peerid,this.send({type:kl.SUBSCRIBE,data:o},!0)}wsCompressorInit(e){var t;const n=[...jd(t=this.baseInfoMap).call(t)],r=n.length?n[0]:"UnableToGetSid",i=this.baseInfoMap.get(r);if(!i)return;const o=i.info,s=Ma(),a=th({},o,{eventType:wl.WS_COMPRESSOR_INIT,lts:s,eventElapse:e.eventElapse,elapse:s-i.startTime,status:e.status?1:2});this.send({type:kl.WS_COMPRESSOR_INIT,data:a},!0)}firstRemoteFrame(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Ma(),a=th({},o,{},r,{elapse:s-i.startTime,eventType:t,lts:s});this.send({type:n,data:a},!0)}onGatewayStream(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=th({},i.info,{},r,{eventType:t,lts:Ma()});this.send({type:n,data:o},!0)}streamSwitch(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=th({},r,{eventType:wl.STREAM_SWITCH,lts:i,isDual:t.isdual,elapse:i-n.startTime,success:t.succ});this.send({type:kl.STREAM_SWITCH,data:o},!0)}requestProxyAppCenter(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=th({},r,{eventType:wl.REQUEST_PROXY_APPCENTER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:kl.REQUEST_PROXY_APPCENTER,data:o},!0)}requestProxyWorkerManager(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=th({},r,{eventType:wl.REQUEST_PROXY_WORKER_MANAGER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:kl.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}setProxyServer(e){this.proxyServer=e,e?Rc.debug("reportProxyServerurl: ".concat(e)):Rc.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=th({},r,{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:i,elapse:i-n.startTime,joinChannelSuccessElapse:i-(n.lastJoinSuccessTime||i)});this.send({type:kl.PEER_PUBLISH_STATUS,data:o},!0)}workerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=Tp(th({},r,{},t,{elapse:i-n.startTime,lts:i,productType:"WebRTC"}),"payload",1300);Xn(o).call(o,e=>this.send({type:kl.WORKER_EVENT,data:e},!0))}apworkerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=th({},r,{},t,{elapse:i-n.startTime,lts:i});this.send({type:kl.AP_WORKER_EVENT,data:o},!0)}joinWebProxyAP(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=th({},r,{},t,{elapse:i-n.startTime,lts:i,extend:t.extend||void 0});this.send({type:kl.JOIN_WEB_PROXY_AP,data:o},!0)}WebSocketQuit(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=th({},r,{},t,{elapse:i-n.startTime,lts:i});this.send({type:kl.WEBSOCKET_QUIT,data:o},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>jc("CUSTOM_REPORT_LIMIT"))throw new pl(ll.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const n=vo(t).call(t,t=>({type:kl.USER_ANALYTICS,data:th({sid:e},t)})),r={msgType:"EventMessages",sentTs:Math.round(Ma()/1e3),payloads:vo(n).call(n,e=>ve(e))};try{await this.postDataToStatsCollector(r)}catch(e){throw Rc.error("send custom report message failed",e.toString()),new pl(ll.CUSTOM_REPORT_SEND_FAILED,e.message)}}autoplayFailed(e,t,n,r){if(!e)return;const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Ma(),a=th({},o,{vid:void 0===o.vid?0:Number(o.vid),lts:s,elapse:s-i.startTime,cbRegistered:Jd.onAutoplayFailed||Jd.onAudioAutoplayFailed?1:-1,errorMsg:n,mediaType:t,trackId:r,extend:void 0});this.send({type:kl.AUTOPLAY_FAILED,data:a},!0)}sendApiInvoke(e){const t=jc("NOT_REPORT_EVENT");if(e.tag&&rs(t)&&rs(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const n=this.baseInfoMap.get(e.sid);if(!n)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:r,uid:i,cid:o}=n.info;e.lts=e.lts||Ma();const s={invokeId:e.invokeId,sid:e.sid,cname:r,cid:o,uid:i,lts:e.lts,success:e.success,elapse:e.lts-n.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?ve(e.options):void 0,execStates:e.states?ve(e.states):void 0,execResult:e.result?ve(e.result):void 0,errorCode:e.error?ve(e.error):void 0};return this.send({type:kl.API_INVOKE,data:s},!1),!0}appendSessionId(){var e;Xn(e=this.clientList).call(e,e=>{if(e._sessionId){const t=this.apiInvokeUploadPendingItems.length;for(let n=0;n<t;n++){const t=this.apiInvokeUploadPendingItems.shift();t&&(t.sid=e._sessionId,this.sendApiInvoke(rr({},t)))}}})}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);var n;this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>jc("NORMAL_EVENT_QUEUE_CAPACITY")&&To(n=this.normalEventUploadPendingItems).call(n,0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Ma()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const n=[],r=[];for(;e.length;){const t=e.shift();n.length<20?n.push(t):r.push(t)}e.push(...r);for(const a of[...n]){var i,o;-1!==Lo(i=this.ltsList).call(i,a.data.lts)?(a.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(a.data.lts)):(this.ltsList.push(a.data.lts),cl(o=this.ltsList).call(o,(e,t)=>e-t))}t||(this.lastSendNormalEventTime=Ma());const s={msgType:"EventMessages",sentTs:Math.round(Ma()/1e3),payloads:vo(n).call(n,e=>ve(e)),vid:(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(n[0])};return n.length&&this.postDataToStatsCollector(s).catch((e=>n=>{var r,i,o;jc("EVENT_REPORT_RETRY")&&(t?this.keyEventUploadPendingItems=Je(r=this.keyEventUploadPendingItems).call(r,e):(this.normalEventUploadPendingItems=Je(i=this.normalEventUploadPendingItems).call(i,e),this.normalEventUploadPendingItems.length>jc("NORMAL_EVENT_QUEUE_CAPACITY")&&(To(o=this.normalEventUploadPendingItems).call(o,0,this.normalEventUploadPendingItems.length-jc("NORMAL_EVENT_QUEUE_CAPACITY")),Rc.warning("report: drop normal events"))))})(n)),e}async postDataToStatsCollector(e,t=!1){var n,r,i;zd.networkState===Pu.OFFLINE&&await fo.race([zd.onlineWaiter,Ip(2*Zd.maxRetryTimeout)]);const o=t?"/events/proto-raws":"/events/messages";let s=this.url||(this.proxyServer?Je(n=Je(r="https://".concat(this.proxyServer,"/rs/?h=")).call(r,jc("EVENT_REPORT_DOMAIN"),"&p=6443&d=")).call(n,o):Je(i="https://".concat(jc("EVENT_REPORT_DOMAIN"),":6443")).call(i,o));for(let u=0;u<2;u+=1){var a,c,l;1===u&&(s=this.backupUrl||(this.proxyServer?Je(a=Je(c="https://".concat(this.proxyServer,"/rs/?h=")).call(c,jc("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=")).call(a,o):Je(l="https://".concat(jc("EVENT_REPORT_BACKUP_DOMAIN"),":6443")).call(l,o)));try{t?await qd(s,{timeout:1e4,data:e}):await Wd(s,{timeout:1e4,data:e})}catch(e){if(1===u)throw e;continue}return}}createBaseInfo(e,t){const n=rr({},Rl);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n}reportResourceTiming(e,t){const n=performance.getEntriesByName(e),r=n[n.length-1];r&&this.reportApiInvoke(t,{name:"Client.resourceTiming",options:r,tag:Ll.TRACER}).onSuccess()}};class oh extends Mu{constructor(e,t){super(),this._hints=[],this._isClosed=!1,this._ID=t||kp(8,"track-"),this._originMediaStreamTrack=e,this._mediaStreamTrack=e,Xc(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){if(!e){const e=ih.reportApiInvoke(null,{name:Nl.GET_MEDIA_STREAM_TRACK,options:[],tag:Ll.TRACER});this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?e.onSuccess(this._mediaStreamTrack.label):e.onSuccess("")}return this._mediaStreamTrack}close(){this._isClosed=!0,el(this)}}let sh=1;class ah{constructor(e){var t;this.lockingPromise=fo.resolve(),this.locks=0,this.name="",this.lockId=sh++,e&&(this.name=e),Rc.debug(Je(t="[lock-".concat(this.name,"-")).call(t,this.lockId,"] is created."))}get isLocked(){return this.locks>0}lock(e){var t,n,r;let i;this.locks+=1,Rc.debug(Je(t=Je(n=Je(r="[lock-".concat(this.name,"-")).call(r,this.lockId,"] is locked, current queue ")).call(n,this.locks,". ")).call(t,"string"==typeof e?e:""));const o=new fo(t=>{i=()=>{var n,r,i;this.locks-=1,Rc.debug(Je(n=Je(r=Je(i="[lock-".concat(this.name,"-")).call(i,this.lockId,"] is not locked, current queue ")).call(r,this.locks,". ")).call(n,"string"==typeof e?e:"")),t()}}),s=this.lockingPromise.then(()=>i);return this.lockingPromise=this.lockingPromise.then(()=>o),s}}function ch(e,t){return function(n,r,i){const o=n[r];if("function"!=typeof o)throw new Error("Cannot use mutex on object property.");return i.value=async function(...n){var i;const s=this[t];var a;if(!s)throw new Error(Je(a="mutex property key ".concat(t," doesn't exist on ")).call(a,e));const c=await s.lock(Je(i="From ".concat(e,".")).call(i,r));try{return await o.apply(this,n)}finally{c()}},i}}class lh extends oh{constructor(e,t){super(e,t),this._enabled=!0,this._muted=!1,this._isClosed=!1,this._trackProcessors=[],this._handleTrackEnded=()=>{this.onTrackEnded()},this._enabledMutex=new ah("".concat(t)),e.addEventListener("ended",this._handleTrackEnded)}get muted(){return this._muted}get enabled(){return this._enabled}getTrackLabel(){return this._originMediaStreamTrack.label}close(){var e;this._isClosed||(this.stop(),Xn(e=this._trackProcessors).call(e,e=>e.destroy()),this._trackProcessors=[],this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,Rc.debug("[".concat(this.getTrackId(),"] close")),this.emit(vu.NEED_CLOSE),super.close())}async _registerTrackProcessor(e){var t;if(-1!==Lo(t=this._trackProcessors).call(t,e))return;const n=this._trackProcessors[this._trackProcessors.length-1];this._trackProcessors.push(e),e.onOutputChange=async()=>{const t=e.output||this._originMediaStreamTrack;this._mediaStreamTrack=t,this._updatePlayerSource(),await Mp(this,vu.NEED_REPLACE_TRACK,this)},n?(n.onOutputChange=async()=>{n.output&&await e.setInput(n.output)},await e.setInput(n.output||n.input||this._originMediaStreamTrack)):await e.setInput(this._originMediaStreamTrack)}_getOutputFromProcessors(){if(0===this._trackProcessors.length)return this._originMediaStreamTrack;const e=this._trackProcessors[this._trackProcessors.length-1];return e.output||e.input||this._originMediaStreamTrack}async _updateOriginMediaStreamTrack(e,t){if(e!==this._originMediaStreamTrack){if(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop(),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._trackProcessors.length>0){await this._trackProcessors[0].setInput(e);const t=this._getOutputFromProcessors();this._mediaStreamTrack=t}else this._mediaStreamTrack=this._originMediaStreamTrack;this._updatePlayerSource(),await Mp(this,vu.NEED_REPLACE_TRACK,this)}}_getDefaultPlayerConfig(){return{}}onTrackEnded(){Rc.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Au.TRACK_ENDED)}stateCheck(e,t){var n,r,i;if(Rc.debug(Je(n=Je(r=Je(i="check track state, [muted: ".concat(this._muted,", enabled: ")).call(i,this._enabled,"] to [")).call(r,e,": ")).call(n,t,"]")),fl(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new pl(ll.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new pl(ll.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}}var uh;!function(e){e.IOS_15_INTERRUPTION_START="ios15-interruption-start",e.IOS_15_INTERRUPTION_END="ios15-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change"}(uh||(uh={}));const dh=window.AudioContext||window.webkitAudioContext;let hh=null;const ph=new class extends Mu{constructor(){super(...arguments),this.onLocalAudioTrackMute=()=>{Rc.info("ios15-interruption-start"),this.emit(uh.IOS_15_INTERRUPTION_START)},this.onLocalAudioTrackUnmute=async()=>{Rc.info("ios15-interruption-end"),"running"!==this.curState||this.duringInterruption?Rc.info("ios15-interruption-end-canceled"):(hh&&await hh.suspend(),this.emit(uh.IOS_15_INTERRUPTION_END))}}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(e){Rc.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){Rc.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function fh(){dh?(Rc.info("create audio context"),hh=new dh,ph.curState=hh.state,hh.onstatechange=()=>{var e;ph.prevState=ph.curState,ph.curState=hh?hh.state:void 0,(Ra()||Na())&&"running"===ph.prevState&&"interrupted"===ph.curState&&(Rc.info("ios-interruption-start"),ph.emit(uh.IOS_INTERRUPTION_START)),(Ra()||Na())&&"interrupted"===ph.prevState&&"running"===ph.curState&&(Rc.info("ios-interruption-end"),ph.emit(uh.IOS_INTERRUPTION_END)),ph.prevState!==ph.curState&&(Rc.debug("AudioContext State Change",Je(e="".concat(ph.prevState,"=>")).call(e,ph.curState)),ph.emit(uh.STATE_CHANGE))},async function(e){const t=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let n,r=!1,i=!1,o=!1;function s(t){"running"===e.state?a(!1):Ra()||Na()?"suspended"===e.state&&(a(!0),t&&e.resume().then(l,l)):"closed"!==e.state&&(a(!0),t&&e.resume().then(l,l))}function a(e){if(r!==e){r=e;for(let n=0,r=t;n<r.length;n+=1){const t=r[n];e?window.addEventListener(t,u,{capture:!0,passive:!0}):window.removeEventListener(t,u,{capture:!0,passive:!0})}}}function c(){s(!0)}function l(){s(!1)}function u(){s(!0)}function d(e){if(!o)if(n.paused)if(e){h(!1),o=!0;let t=void 0;try{t=n.play(),t?t.then(p,p):(n.addEventListener("playing",p),n.addEventListener("abort",p),n.addEventListener("error",p))}catch(e){p()}}else h(!0);else h(!1)}function h(e){if(i!==e){i=e;for(let n=0,r=t;n<r.length;n++){const t=r[n];e?window.addEventListener(t,f,{capture:!0,passive:!0}):window.removeEventListener(t,f,{capture:!0,passive:!0})}}}function p(){n.removeEventListener("playing",p),n.removeEventListener("abort",p),n.removeEventListener("error",p),o=!1,d(!1)}function f(){d(!0)}if(Ra()){const t=e.createMediaStreamDestination(),r=document.createElement("div");r.innerHTML="<audio x-webkit-airplay='deny'></audio>",n=r.children.item(0),n.controls=!1,n.disableRemotePlayback=!0,n.preload="auto",n.srcObject=t.stream,d(!0)}ph.on(uh.STATE_CHANGE,c),s(!1)}(hh)):Rc.error("your browser is not support web audio")}function gh(){if(!hh){if(fh(),!hh)throw new pl(ll.NOT_SUPPORTED,"can not create audio context");return hh}return hh}function mh(e){if(function(){if(null!==_h)return _h;const e=gh(),t=e.createBufferSource(),n=e.createGain(),r=e.createGain();t.connect(n),t.connect(r),t.disconnect(n);let i=!1;try{t.disconnect(n)}catch(e){i=!0}return t.disconnect(),_h=i,i}())return;Rc.debug("polyfill audio node");const t=e.connect,n=e.disconnect;e.connect=(n,r,i)=>{var o;return e._inputNodes||(e._inputNodes=[]),rs(o=e._inputNodes).call(o,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,r,i)):t.call(e,n,r)),e},e.disconnect=(r,i,o)=>{n.call(e),r?Up(e._inputNodes,r):e._inputNodes=[];for(const n of e._inputNodes)t.call(e,n)}}let _h=null;function vh(e,t){const n=1/t,r=gh();let i=r.createGain();i.gain.value=0,i.connect(r.destination);let o=!1;const s=()=>{if(o)return void(i=null);const t=r.createOscillator();t.onended=s,t.connect(i),t.start(0),t.stop(r.currentTime+n),e(r.currentTime)};return s(),()=>{o=!0}}class Eh extends Mu{constructor(){super(),this.isPlayed=!1,this.audioOutputLevel=0,this.isDestroyed=!1,this.isNoAudioInput=!1,this._noAudioInputCount=0,this.context=gh(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),mh(this.outputNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.smoothingTimeConstant=.4,this.analyserNode.fftSize=2048}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(Zl.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){const n=e.outputBuffer.getChannelData(t);for(let e=0;e<n.length;e+=1)n[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!Fu().webAudioMediaStreamDest)throw new pl(ll.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){"running"!==this.context.state&&Vp(()=>{ph.emit("autoplay-failed")}),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1}getAccurateVolumeLevel(){if(!this.context||Ra()||Na()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const e=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(e);let t=0;for(let n=0;n<e.length;n++)t+=n<64?Math.abs(10*e[n]):Math.abs(6*e[n]/15);return t/e.length/255}async checkHasAudioInput(e=0){if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;if(Ra()||Na()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return!1;const t=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(t);let n=!1;for(let r=0;r<t.length;r++)0!==t[r]&&(n=!0);return n?(this.isNoAudioInput=!1,!0):(await Ip(200),await this.checkHasAudioInput(e?e+1:1)&&n)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}setMute(e){e?(this.disconnect(),this.audioOutputLevel=0):this.connect()}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){this.sourceNode&&this.sourceNode.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){this.sourceNode&&this.sourceNode.connect(this.outputNode),this.outputNode.connect(this.analyserNode)}}class Ah extends Eh{constructor(e,t){var n;if(super(),this.isCurrentTrackCloned=!1,this.isRemoteTrack=!1,this.rebuildWebAudio=async()=>{if(Rc.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void Rc.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then(()=>Rc.info("resume success")),Rc.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0;const t=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(t),mh(this.sourceNode),this.analyserNode=this.context.createAnalyser();const n=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(n,this.context.currentTime),mh(this.outputNode),this.connect(),this.audioElement.srcObject=t,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()},"audio"!==e.kind)throw new pl(ll.UNEXPECTED_ERROR);this.track=e;const r=new MediaStream([this.track]);this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(r),mh(this.sourceNode),this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=r;const i=ma();t&&i.os===da.IOS&&Number(null===(n=i.osVersion)||void 0===n?void 0:n.split(".")[0])<15&&(ph.on(uh.STATE_CHANGE,()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()}),this.checkHasAudioInput().then(e=>{e||document.body.addEventListener("click",this.rebuildWebAudio,!0)}))}get isFreeze(){return!1}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;const t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),mh(this.sourceNode),this.sourceNode.connect(this.outputNode),this.audioElement.srcObject=t}destroy(){this.audioElement.srcObject=null,this.audioElement.remove(),ph.off("state-change",this.rebuildWebAudio),super.destroy()}}async function yh(e,t){const n=(e,t)=>e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t,r={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:n(t.height,1080),maxWidth:n(t.width,1920)}}};return t.frameRate&&"number"!=typeof t.frameRate?(r.video.mandatory.maxFrameRate=t.frameRate.max,r.video.mandatory.minFrameRate=t.frameRate.min):"number"==typeof t.frameRate&&(r.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(r)}async function Sh(e){const t=await bh(e.mediaSource),n=await function(e){return new fo((t,n)=>{const r=document.createElement("div");r.innerText="share screen",r.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const i=document.createElement("div");i.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const o=document.createElement("div");o.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",o.setAttribute("style","height: 12%;");const s=document.createElement("div");s.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const a=document.createElement("div");a.setAttribute("style","text-align: right; padding: 16px 0;");const c=document.createElement("button");c.innerHTML="cancel",c.setAttribute("style","width: 85px;"),c.onclick=()=>{document.body.removeChild(l);const e=new Error("NotAllowedError");e.name="NotAllowedError",n(e)},a.appendChild(c),i.appendChild(o),i.appendChild(s),i.appendChild(a);const l=document.createElement("div");l.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),l.appendChild(r),l.appendChild(i),document.body.appendChild(l),vo(e).call(e,e=>{if(e.id){const n=document.createElement("div");n.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let r=e.thumbnail;const{width:i}=r.getSize();i>1920&&(r=r.resize({width:1920})),n.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+r.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",n.onclick=()=>{document.body.removeChild(l),t(e.id)},s.appendChild(n)}})})}(t);return await yh(n,e)}async function bh(e){let t=["window","screen"];"application"!==e&&"window"!==e||(t=["window"]),"screen"===e&&(t=["screen"]);const n=Th();if(!n)throw new pl(ll.ELECTRON_IS_NULL);let r=null;try{r=n.desktopCapturer.getSources({types:t})}catch(e){r=null}r&&r.then||(r=new fo((e,r)=>{n.desktopCapturer.getSources({types:t},(t,n)=>{t?r(t):e(n)})}));try{return await r}catch(e){throw new pl(ll.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.toString())}}let Ch=null;function Th(){if(Ch)return Ch;try{return Ch=window.require("electron"),Ch}catch(e){return null}}const Ih=new ah("safari");let Rh=!1,wh=!1;async function kh(e,t){let n=0,r=null;for(;n<2;)try{r=await Oh(e,t,n>0);break}catch(e){var i,o;if(e instanceof pl)throw Rc.error(Je(o="[".concat(t,"] ")).call(o,e.toString())),e;const r=Nh(e.name||e.code||e,e.message);if(r.code===ll.MEDIA_OPTION_INVALID){Rc.debug("[".concat(t,"] detect media option invalid, retry")),n+=1,await Ip(500);continue}throw Rc.error(Je(i="[".concat(t,"] ")).call(i,r.toString())),r}if(!r)throw new pl(ll.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return r}async function Oh(e,t,n){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new pl(ll.NOT_SUPPORTED,"can not find getUserMedia");n&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const r=Fu(),i=new MediaStream;if(e.audioSource&&i.addTrack(e.audioSource),e.videoSource&&i.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return Rc.debug("Using Video Source/ Audio Source"),i;if(e.screen)if(Th())e.screen.sourceId?Lh(i,await yh(e.screen.sourceId,e.screen)):Lh(i,await Sh(e.screen));else if(Ca()&&e.screen.extensionId&&e.screen.mandatory){if(!r.getStreamFromExtension)throw new pl(ll.NOT_SUPPORTED,"This browser does not support screen sharing");Rc.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));const n=await(s=e.screen.extensionId,a=t,new fo((e,t)=>{try{chrome.runtime.sendMessage(s,{getStream:!0},n=>{if(!n||!n.streamId)return Rc.error("[".concat(a,"] No response from Chrome Plugin. Plugin not installed properly"),n),void t(new pl(ll.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(n.streamId)})}catch(e){var n;Rc.error(Je(n="[".concat(a,"] AgoraRTC screensharing plugin is not accessible(")).call(n,s,")"),e.toString()),t(new pl(ll.CHROME_PLUGIN_NOT_INSTALL))}}));e.screen.mandatory.chromeMediaSourceId=n,Lh(i,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(r.getDisplayMedia){e.screen.mediaSource&&bu(e.screen.mediaSource);const n={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource};Rc.debug("[".concat(t,"] getDisplayMedia:"),ve({video:n,audio:!!e.screenAudio})),Lh(i,await navigator.mediaDevices.getDisplayMedia({video:n,audio:!!e.screenAudio}))}else{if(!Ia())throw Rc.error("[".concat(t,"] This browser does not support screenSharing")),new pl(ll.NOT_SUPPORTED,"This browser does not support screen sharing");{var o;e.screen.mediaSource&&bu(e.screen.mediaSource);const n={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};Rc.debug(Je(o="[".concat(t,"] getUserMedia: ")).call(o,ve(n))),Lh(i,await navigator.mediaDevices.getUserMedia(n))}}var s,a;if(!e.video&&!e.audio)return i;const c={video:e.video,audio:e.audio};Rc.debug("[".concat(t,"] GetUserMedia"),ve(c)),ma();let l,u=null;(Ta()||Ra()||ya())&&(u=await Ih.lock());try{l=await navigator.mediaDevices.getUserMedia(c)}catch(e){throw u&&u(),e}return c.audio&&(Rh=!0),c.video&&(wh=!0),Lh(i,l),u&&u(),i}function Nh(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":var n;return new pl(ll.MEDIA_OPTION_INVALID,Je(n="".concat(e,": ")).call(n,t));case"NotFoundError":case"DevicesNotFoundError":var r;return new pl(ll.DEVICE_NOT_FOUND,Je(r="".concat(e,": ")).call(r,t));case"NotSupportedError":var i;return new pl(ll.NOT_SUPPORTED,Je(i="".concat(e,": ")).call(i,t));case"NotReadableError":var o;return new pl(ll.NOT_READABLE,Je(o="".concat(e,": ")).call(o,t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":var s;return new pl(ll.PERMISSION_DENIED,Je(s="".concat(e,": ")).call(s,t));case"ConstraintNotSatisfiedError":var a;return new pl(ll.CONSTRAINT_NOT_SATISFIED,Je(a="".concat(e,": ")).call(a,t));default:var c;return Rc.error("getUserMedia unexpected error",e),new pl(ll.UNEXPECTED_ERROR,Je(c="".concat(e,": ")).call(c,t))}}function Lh(e,t){const n=e.getVideoTracks()[0],r=e.getAudioTracks()[0],i=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(r&&e.removeTrack(r),e.addTrack(o)),i&&(n&&e.removeTrack(n),e.addTrack(i))}const Ph=new class extends Mu{constructor(){super(),this._state=Pl.IDLE,this.isAccessMicrophonePermission=!1,this.isAccessCameraPermission=!1,this.lastAccessMicrophonePermission=!1,this.lastAccessCameraPermission=!1,this.checkdeviceMatched=!1,this.deviceInfoMap=new xn,this.init().then(()=>{var e;navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",Yo(e=this.updateDevicesInfo).call(e,this)),window.setInterval(()=>!La()&&jc("ENUMERATE_DEVICES_INTERVAL")&&this.updateDevicesInfo(),6e4)}).catch(e=>Rc.error(e.toString()))}get state(){return this._state}set state(e){e!==this._state&&(this.emit(Dl.STATE_CHANGE,e),this._state=e)}async enumerateDevices(e,t,n=!1){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new pl(ll.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const r=await navigator.mediaDevices.enumerateDevices(),i=this.checkMediaDeviceInfoIsOk(r);let o=!this.isAccessMicrophonePermission&&e,s=!this.isAccessCameraPermission&&t;i.audio&&(o=!1),i.video&&(s=!1);let a=null,c=null,l=null;if(!n&&(o||s)){if(Ih.isLocked&&(Rc.debug("[device manager] wait GUM lock"),(await Ih.lock())(),Rc.debug("[device manager] GUM unlock")),Rh&&(o=!1,this.isAccessMicrophonePermission=!0),wh&&(s=!1,this.isAccessCameraPermission=!0),Rc.debug("[device manager] check media device permissions",e,t,o,s),o&&s){try{l=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(e){const t=Nh(e.name||e.code||e,e.message);if(t.code===ll.PERMISSION_DENIED)throw t;Rc.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(o){try{a=await navigator.mediaDevices.getUserMedia({audio:e})}catch(e){const t=Nh(e.name||e.code||e,e.message);if(t.code===ll.PERMISSION_DENIED)throw t;Rc.warning("getUserMedia failed in getDevices",t)}this.isAccessMicrophonePermission=!0}else if(s){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(e){const t=Nh(e.name||e.code||e,e.message);if(t.code===ll.PERMISSION_DENIED)throw t;Rc.warning("getUserMedia failed in getDevices",t)}this.isAccessCameraPermission=!0}Rc.debug("[device manager] mic permission",e,"cam permission",t)}try{var u,d,h;const e=await navigator.mediaDevices.enumerateDevices();return a&&Xn(u=a.getTracks()).call(u,e=>e.stop()),c&&Xn(d=c.getTracks()).call(d,e=>e.stop()),l&&Xn(h=l.getTracks()).call(h,e=>e.stop()),a=null,c=null,l=null,e}catch(e){var p,f,g;return a&&Xn(p=a.getTracks()).call(p,e=>e.stop()),c&&Xn(f=c.getTracks()).call(f,e=>e.stop()),l&&Xn(g=l.getTracks()).call(g,e=>e.stop()),a=null,c=null,l=null,new pl(ll.ENUMERATE_DEVICES_FAILED,e.toString()).throw()}}async getRecordingDevices(e=!1){const t=await this.enumerateDevices(!0,!1,e);return Gr(t).call(t,e=>"audioinput"===e.kind)}async getCamerasDevices(e=!1){const t=await this.enumerateDevices(!1,!0,e);return Gr(t).call(t,e=>"videoinput"===e.kind)}async getSpeakers(e=!1){const t=await this.enumerateDevices(!0,!1,e);return Gr(t).call(t,e=>"audiooutput"===e.kind)}searchDeviceNameById(e){const t=this.deviceInfoMap.get(e);return t?t.device.label||t.device.deviceId:null}searchDeviceIdByName(e){var t;let n=null;return Xn(t=this.deviceInfoMap).call(t,t=>{t.device.label===e&&(n=t.device.deviceId)}),n}async getDeviceById(e){const t=await this.enumerateDevices(!0,!0,!0),n=Qo(t).call(t,t=>t.deviceId===e);if(!n)throw new pl(ll.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return n}async init(){this.state=Pl.INITING;try{await this.updateDevicesInfo(),this.state=Pl.INITEND}catch(e){throw Rc.warning("Device Detection functionality cannot start properly.",e.toString()),this.state=Pl.IDLE,function(){return"boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname}()||new pl(ll.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e}}async updateDevicesInfo(){var e;const t=await this.enumerateDevices(!0,!0,!0),n=Ma(),r=[];if(t[0]&&t[0].label&&!1===this.checkdeviceMatched){this.checkdeviceMatched=!0;const e=Qo(t).call(t,e=>"audioinput"===e.kind&&"default"===e.deviceId),n=Qo(t).call(t,e=>"audiooutput"===e.kind&&"default"===e.deviceId);if(e&&n)if(n.groupId===e.groupId){var i;Rc.debug(Je(i="[device-check] default input ".concat(e.label," and output ")).call(i,n.label," is the same group"))}else{var o;Rc.warning(Je(o="[device-check] default input ".concat(e.label," and output ")).call(o,n.label," is not the same group"))}else Rc.debug("[device-check] default input or output not found")}const s=this.checkMediaDeviceInfoIsOk(t);if(Xn(t).call(t,e=>{if(!e.deviceId)return;const t=this.deviceInfoMap.get(e.deviceId);if("ACTIVE"!==(t?t.state:"INACTIVE")){const t={initAt:n,updateAt:n,device:e,state:"ACTIVE"};this.deviceInfoMap.set(e.deviceId,t),r.push(t)}t&&(t.updateAt=n)}),Xn(e=this.deviceInfoMap).call(e,(e,t)=>{"ACTIVE"===e.state&&e.updateAt!==n&&(e.state="INACTIVE",r.push(e))}),this.state!==Pl.INITEND)return s.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(s.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));Xn(r).call(r,e=>{switch(e.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Dl.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(Dl.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(Dl.PLAYOUT_DEVICE_CHANGED,e)}}),s.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),s.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=Gr(e).call(e,e=>"audioinput"===e.kind),n=Gr(e).call(e,e=>"videoinput"===e.kind),r={audio:!1,video:!1};for(const i of t)if(i.label&&i.deviceId){r.audio=!0;break}for(const i of n)if(i.label&&i.deviceId){r.video=!0;break}return r}},Dh=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended"],Mh=new class{constructor(){this.elementMap=new xn,this.elementStateMap=new xn,this.elementsNeedToResume=[],this.sinkIdMap=new xn,this.autoResumeAfterInterruption=()=>{var e,t;Xn(e=Bd(Dd(t=this.elementMap).call(t))).call(e,([e,t])=>{const n=this.elementStateMap.get(e),r=t.srcObject.getAudioTracks()[0];wa()?r&&"live"===r.readyState&&"running"===ph.curState&&(Rc.debug("auto resume after interruption for iOS 15"),t.pause(),t.play()):n&&"paused"===n&&r&&"live"===r.readyState&&"running"===ph.curState&&(Rc.debug("auto resume after interruption for iOS"),t.play())})},this.autoResumeAfterInterruptionOnIOS15=()=>{var e,t;Xn(e=Bd(Dd(t=this.elementMap).call(t))).call(e,([e,t])=>{const n=t.srcObject.getAudioTracks()[0];n&&"live"===n.readyState&&(Rc.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),t.pause(),t.play())})},this.autoResumeAudioElement(),ph.on(uh.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),ph.on(uh.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),ph.on(uh.STATE_CHANGE,()=>{Ra()&&"suspended"===ph.prevState&&"running"===ph.curState&&this.autoResumeAfterInterruption()})}async setSinkID(e,t){const n=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),n)try{await n.setSinkId(t)}catch(e){throw new pl(ll.PERMISSION_DENIED,"can not set sink id: "+e.toString())}}play(e,t,n,r){if(this.elementMap.has(t))return;const i=document.createElement("audio");i.autoplay=!0,i.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,i),this.elementMap.set(t,i),this.elementStateMap.set(t,dl.INIT),this.setVolume(t,n);const o=this.sinkIdMap.get(t);if(o)try{i.setSinkId(o).catch(e=>{Rc.warning("[".concat(t,"] set sink id failed"),e.toString())})}catch(e){Rc.warning("[".concat(t,"] set sink id failed"),e.toString())}const s=i.play();s&&s.then&&s.catch(e=>{r&&ih.autoplayFailed(r,"audio",e.message,t),Rc.warning("audio element play warning",e.toString()),this.elementMap.has(t)&&"NotAllowedError"===e.name&&(Rc.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(i),Vp(()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),Xd()}))})}updateTrack(e,t){const n=this.elementMap.get(e);n&&(n.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)}setVolume(e,t){const n=this.elementMap.get(e);n&&(t=Math.max(0,Math.min(100,t)),n.volume=t/100)}stop(e){var t,n;const r=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!r)return;const i=Lo(t=this.elementsNeedToResume).call(t,r);To(n=this.elementsNeedToResume).call(n,i,1),r.srcObject=null,r.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){Xn(Dh).call(Dh,n=>{t.addEventListener(n,t=>{var n,r;const i=this.elementStateMap.get(e),o="pause"===t.type?"paused":t.type;Rc.debug(Je(n=Je(r="[".concat(e,"] audio-element-status change ")).call(r,i," => ")).call(n,o)),this.elementStateMap.set(e,o)})})}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){const e=()=>{var e;Xn(e=this.elementsNeedToResume).call(e,e=>{e.play().then(e=>{Rc.debug("Auto resume audio element success")}).catch(e=>{Rc.warning("Auto resume audio element failed!",e)})}),this.elementsNeedToResume=[]};new fo(e=>{document.body?e():window.addEventListener("load",()=>e())}).then(()=>{const t=ma();"Android"!==t.os||"Chrome"!==t.name&&t.name!==ha.WECHAT?(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)):document.body.addEventListener("click",e,!0)})}};function xh(){return function(e,t,n){const r=e[t];"function"==typeof r&&(n.value=function(...e){this._isClosed&&new pl(ll.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");const t=r.apply(this,e);return t instanceof fo?new fo((e,n)=>{t.then(e).catch(n)}):t})}}function Bh(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uh(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=Bh(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=Bh(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}var Fh=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Ur(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&hr(t,n,s),s},Vh=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class jh extends lh{constructor(e,t,n){super(e,n),this.trackMediaType="audio",this._enabled=!0,this._volume=100,this._useAudioElement=!1,this._bypassWebAudio=!1,this._encoderConfig=t,this._source=new Ah(e)}get isPlaying(){return this._useAudioElement?Mh.isPlaying(this.getTrackId()):this._source.isPlayed}setVolume(e){ml(e,"volume",0,1e3);const t=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),e]},300);this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&Mh.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return Rc.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio.")),void t.onSuccess();const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,Mp(this,vu.NEED_REPLACE_TRACK,this).then(()=>{Rc.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(e=>{Rc.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)}))}catch(e){}t.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){const t=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[this.getTrackId(),e]});if(!this._useAudioElement)throw new pl(ll.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{await Mh.setSinkID(this.getTrackId(),e)}catch(e){throw t.onError(e),e}t.onSuccess()}async setEnabled(e,t,n){if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{var r;n||(this._enabled=!0),await Mp(this,vu.NEED_ENABLE_TRACK,this),Rc.info(Je(r="[".concat(this.getTrackId(),"] setEnabled to ")).call(r,e," success"))}catch(e){throw n||(this._enabled=!1),Rc.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}}else{this._originMediaStreamTrack.enabled=!1,n||(this._enabled=!1);try{await Mp(this,vu.NEED_DISABLE_TRACK,this)}catch(e){throw n||(this._enabled=!0),Rc.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}}}async setMuted(e){var t;e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._mediaStreamTrack.enabled=!e,Rc.debug(Je(t="[".concat(this.getTrackId(),"] start set muted: ")).call(t,e)),e?await Mp(this,vu.NEED_MUTE_TRACK,this):await Mp(this,vu.NEED_UNMUTE_TRACK,this))}getStats(){Hp(()=>{Rc.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning");const e=xp(this,vu.GET_STATS);return e||Uh({},Xl)}setAudioFrameCallback(e,t=4096){if(!e)return this._source.removeAllListeners(Zl.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Zl.ON_AUDIO_BUFFER),this._source.on(Zl.ON_AUDIO_BUFFER,t=>e(t))}play(){const e=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(Rc.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Mh.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),e.onSuccess()}stop(){const e=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Mh.stop(this.getTrackId()):this._source.stop(),e.onSuccess()}close(){super.close(),this._source.destroy()}_updatePlayerSource(){Rc.debug("[".concat(this.getTrackId(),"] update player source track")),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Mh.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),e.addEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=e,this._source.updateTrack(this._originMediaStreamTrack),this._mediaStreamTrack!==this._source.outputTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mp(this,vu.NEED_REPLACE_TRACK,this)))}renewMediaStreamTrack(){return fo.resolve(void 0)}}Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[String]),Vh("design:returntype",fo)],jh.prototype,"setPlaybackDevice",null),Fh([ch("LocalAudioTrack","_enabledMutex"),xh(),Vh("design:type",Function),Vh("design:paramtypes",[Boolean,Object,Boolean]),Vh("design:returntype",fo)],jh.prototype,"setEnabled",null),Fh([ch("LocalAudioTrack","_enabledMutex"),xh(),rh({report:ih}),Vh("design:type",Function),Vh("design:paramtypes",[Boolean]),Vh("design:returntype",fo)],jh.prototype,"setMuted",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[]),Vh("design:returntype",Object)],jh.prototype,"getStats",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[Object,Number]),Vh("design:returntype",void 0)],jh.prototype,"setAudioFrameCallback",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[]),Vh("design:returntype",void 0)],jh.prototype,"play",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[]),Vh("design:returntype",void 0)],jh.prototype,"stop",null);class Gh extends jh{constructor(e,t,n,r){super(e,t.encoderConfig?Fc(t.encoderConfig):{},r),this._deviceName="default",this._enabled=!0,this._config=t,this._constraints=n,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),wa()&&ph.bindInterruptDetectorTrack(this)}async setDevice(e){var t,n;const r=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.MIC_AUDIO_TRACK_SET_DEVICE,options:[this.getTrackId(),e]});if(Rc.info(Je(t="[".concat(this.getTrackId(),"] start set device to ")).call(t,e)),this._enabled)try{const t=await Ph.getDeviceById(e),n={};n.audio=Uh({},this._constraints),n.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let r=null;try{r=await kh(n,this.getTrackId())}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await kh({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw r.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await Ph.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw r.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}r.onSuccess(),Rc.info(Je(n="[".concat(this.getTrackId(),"] set device to ")).call(n,e," success"))}async setEnabled(e,t,n){if(t)return Rc.debug("[".concat(this.getTrackId,"] setEnabled false (do not close microphone)")),await super.setEnabled(e);if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),n||(this._enabled=!1);try{await Mp(this,vu.NEED_DISABLE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.toString()),e}return}const r=Uh({},this._constraints),i=Ph.searchDeviceIdByName(this._deviceName);i&&!r.deviceId&&(r.deviceId=i);try{n||(this._enabled=!0);const e=await kh({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await Mp(this,vu.NEED_ENABLE_TRACK,this)}catch(e){throw n||(this._enabled=!1),Rc.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.toString()),e}Rc.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),wa()&&ph.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Ra()||Na())&&this._enabled&&!this._isClosed&&ph.duringInterruption){const e=async()=>{ph.off(uh.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Rc.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};ph.on(uh.IOS_INTERRUPTION_END,e)}else Rc.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Au.TRACK_ENDED)}async renewMediaStreamTrack(){const e=Uh({},this._constraints),t=Ph.searchDeviceIdByName(this._deviceName);t&&!e.deviceId&&(e.deviceId=t);const n=await kh({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!0)}}Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[String]),Vh("design:returntype",fo)],Gh.prototype,"setDevice",null),Fh([ch("MicrophoneAudioTrack","_enabledMutex"),xh(),Vh("design:type",Function),Vh("design:paramtypes",[Boolean,Boolean,Boolean]),Vh("design:returntype",fo)],Gh.prototype,"setEnabled",null);class Hh extends jh{constructor(e,t,n,r){super(t.createOutputTrack(),n,r),this.source=e,this._bufferSource=t,this._bufferSource.on(Zl.AUDIO_SOURCE_STATE_CHANGE,e=>{this.emit(Au.SOURCE_STATE_CHANGE,e)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){const t=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),e,this.duration]});e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer(),t.onSuccess()}pauseProcessAudioBuffer(){const e=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),e.onSuccess()}seekAudioBuffer(e){const t=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(e),t.onSuccess()}resumeProcessAudioBuffer(){const e=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),e.onSuccess()}stopProcessAudioBuffer(){const e=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),e.onSuccess()}}Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[Object]),Vh("design:returntype",void 0)],Hh.prototype,"startProcessAudioBuffer",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[]),Vh("design:returntype",void 0)],Hh.prototype,"pauseProcessAudioBuffer",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[Number]),Vh("design:returntype",void 0)],Hh.prototype,"seekAudioBuffer",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[]),Vh("design:returntype",void 0)],Hh.prototype,"resumeProcessAudioBuffer",null),Fh([xh(),Vh("design:type",Function),Vh("design:paramtypes",[]),Vh("design:returntype",void 0)],Hh.prototype,"stopProcessAudioBuffer",null);class Qh extends jh{constructor(){const e=gh().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,kp(8,"track-mix-"));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}get isActive(){for(const e of this.trackList)if(e._enabled&&!e._isClosed&&!e.muted)return!0;return!1}hasAudioTrack(e){var t;return-1!==Lo(t=this.trackList).call(t,e)}addAudioTrack(e){var t;-1===Lo(t=this.trackList).call(t,e)?(Rc.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):Rc.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){var t;if(-1!==Lo(t=this.trackList).call(t,e)){Rc.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}Up(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){var e;const t={};Xn(e=this.trackList).call(e,e=>{e._encoderConfig&&((e._encoderConfig.bitrate||0)>(t.bitrate||0)&&(t.bitrate=e._encoderConfig.bitrate),(e._encoderConfig.sampleRate||0)>(t.sampleRate||0)&&(t.sampleRate=e._encoderConfig.sampleRate),(e._encoderConfig.sampleSize||0)>(t.sampleSize||0)&&(t.sampleSize=e._encoderConfig.sampleSize),e._encoderConfig.stereo&&(t.stereo=!0))}),this._encoderConfig=t}}class Wh extends Mu{constructor(){super(...arguments),this.resultStorage=new xn}setLocalAudioStats(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))}setLocalVideoStats(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))}setRemoteAudioStats(e,t){const n=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",n,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const n=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",n,this.checkVideoDecode(t))}record(e,t,n){this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const r=this.resultStorage.get(e);if(r&&(r.result.push(n),r.result.length>=5)){var i;const n=rs(i=r.result).call(i,!0);r.isPrevNormal&&!n&&this.emit("exception",qh[e],e,t),!r.isPrevNormal&&n&&this.emit("exception",qh[e]+2e3,e+"_RECOVER",t),r.isPrevNormal=n,r.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof Qh&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}checkFramerateInput(e,t){let n=null;t._encoderConfig&&t._encoderConfig.frameRate&&(n=fp(t._encoderConfig.frameRate));const r=e.captureFrameRate;return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof Qh&&!t.isActive||!!t.muted||0!==e.sendBitrate}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const qh={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},zh=new class{markSubscribeStart(e,t){var n;performance.mark(Je(n="agora-web-sdk/".concat(e,"/subscribe-")).call(n,t))}markPublishStart(e,t){var n;performance.mark(Je(n="agora-web-sdk/".concat(e,"/publish-")).call(n,t))}measureFromSubscribeStart(e,t){var n;const r=performance.getEntriesByName(Je(n="agora-web-sdk/".concat(e,"/subscribe-")).call(n,t));if(r.length>0){const e=r[r.length-1];return performance.now()-e.startTime}return 0}measureFromPublishStart(e,t){var n;const r=performance.getEntriesByName(Je(n="agora-web-sdk/".concat(e,"/publish-")).call(n,t));if(r.length>0){const e=r[r.length-1];return Math.round(performance.now()-e.startTime)}return 0}};function Zh(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function $h(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=Zh(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=Zh(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}class Kh{constructor(e){this.localStats=new xn,this.remoteStats=new xn,this.trafficStatsPeerList=[],this.updateStats=()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))},this.store=e,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new Wh,this.exceptionMonitor.on("exception",(e,t,n)=>{this.onStatsException&&this.onStatsException(e,t,n)})}reset(){this.localStats=new xn,this.remoteStats=new xn,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(Ou.LocalAudioTrack)||$h({},Xl)}getLocalVideoTrackStats(){return this.localStats.get(Ou.LocalVideoTrack)||$h({},eu)}getRemoteAudioTrackStats(e){const t=(e,t)=>{var n;if(!this.trafficStats)return t;const r=Qo(n=this.trafficStats.peer_delay).call(n,t=>t.peer_uid===e);return r&&(t.publishDuration=r.B_ppad+(Ma()-this.trafficStats.timestamp)),t},n={};if(e){var r;const i=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.audioStats;i&&(n[e]=t(e,i))}else{var i,o;Xn(i=Bd(Dd(o=this.remoteStats).call(o))).call(i,([e,{audioStats:r}])=>{r&&(n[e]=t(e,r))})}return n}getRemoteNetworkQualityStats(e){const t={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.networkStats;r&&(t[e]=r)}else{var r,i;Xn(r=Bd(Dd(i=this.remoteStats).call(i))).call(r,([e,{networkStats:n}])=>{n&&(t[e]=n)})}return t}getRemoteVideoTrackStats(e){const t=(e,t)=>{var n;if(!this.trafficStats)return t;const r=Qo(n=this.trafficStats.peer_delay).call(n,t=>t.peer_uid===e);return r&&(t.publishDuration=r.B_ppvd+(Ma()-this.trafficStats.timestamp)),t},n={};if(e){var r;const i=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.videoStats;i&&(n[e]=t(e,i))}else{var i,o;Xn(i=Bd(Dd(o=this.remoteStats).call(o))).call(i,([e,{videoStats:r}])=>{r&&(n[e]=t(e,r))})}return n}getRTCStats(){var e;let t=0,n=0,r=0,i=0;const o=this.localStats.get(Ou.LocalAudioTrack);o&&(t+=o.sendBytes,n+=o.sendBitrate);const s=this.localStats.get(Ou.LocalVideoTrack);s&&(t+=s.sendBytes,n+=s.sendBitrate);const a=this.localStats.get(Ou.LocalVideoLowTrack);a&&(t+=a.sendBytes,n+=a.sendBitrate),Xn(e=this.remoteStats).call(e,({audioStats:e,videoStats:t})=>{e&&(r+=e.receiveBytes,i+=e.receiveBitrate),t&&(r+=t.receiveBytes,i+=t.receiveBitrate)});let c=1;return this.trafficStats&&(c+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:c,SendBitrate:n,SendBytes:t,RecvBytes:r,RecvBitrate:i,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(e){this.localStats.set(e,void 0)}removeLocalStats(e){e?this.localStats.delete(e):this.localStats.clear()}addRemoteStats(e){this.remoteStats.set(e,{})}removeRemoteStats(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}addP2PChannel(e){this.p2pChannel=e}updateTrafficStats(e){var t;const n=Gr(t=e.peer_delay).call(t,e=>{var t;return-1===Lo(t=this.trafficStatsPeerList).call(t,e.peer_uid)});Xn(n).call(n,e=>{var t;const n=null===(t=this.p2pChannel)||void 0===t?void 0:t.getRemoteMedia(e.peer_uid),r=null!=n&&n.videoSSRC?zh.measureFromSubscribeStart(this.store.clientId,n.videoSSRC):0,i=null!=n&&n.audioSSRC?zh.measureFromSubscribeStart(this.store.clientId,n.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,r>i?r:i),this.trafficStatsPeerList.push(e.peer_uid))}),this.trafficStats=e}updateUplinkStats(e){var t;this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&Rc.debug(Je(t="[".concat(this.store.clientId,"]: Period fir changes to ")).call(t,e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,n){if(!e)return!1;const r=!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime,i=!n||t.framesDecodeCount>n.framesDecodeCount;return r||!i}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}updateLocalStats(e){var t,n;Xn(t=Bd(Dd(n=this.localStats).call(n))).call(t,([t,n])=>{switch(t){case Ou.LocalVideoTrack:case Ou.LocalVideoLowTrack:{const i=n,o=$h({},eu),s=e.getStats(),a=e.getLocalMedia(t);if(s){var r;const t=Qo(r=s.videoSend).call(r,e=>e.ssrc===(null==a?void 0:a.ssrcs[0].ssrcId));if(t){const n=e.getLocalVideoSize(),r=e.getEncoderConfig(Ou.LocalVideoTrack);"H264"!==t.codec&&"VP8"!==t.codec&&"VP9"!==t.codec&&"AV1X"!==t.codec||(o.codecType=t.codec),o.sendBytes=t.bytes,o.sendBitrate=i?8*Math.max(0,o.sendBytes-i.sendBytes):0,t.inputFrame?(o.captureFrameRate=t.inputFrame.frameRate,o.captureResolutionHeight=t.inputFrame.height,o.captureResolutionWidth=t.inputFrame.width):n&&(o.captureResolutionWidth=n.width,o.captureResolutionHeight=n.height),t.sentFrame?(o.sendFrameRate=t.sentFrame.frameRate,o.sendResolutionHeight=t.sentFrame.height,o.sendResolutionWidth=t.sentFrame.width):n&&(o.sendResolutionWidth=n.width,o.sendResolutionHeight=n.height),t.avgEncodeMs&&(o.encodeDelay=t.avgEncodeMs),r&&r.bitrateMax&&(o.targetSendBitrate=1e3*r.bitrateMax),o.sendPackets=t.packets,o.sendPacketsLost=t.packetsLost,o.totalDuration=i?i.totalDuration+1:1,o.totalFreezeTime=i?i.totalFreezeTime:0,this.isLocalVideoFreeze(t)&&(o.totalFreezeTime+=1)}this.trafficStats&&(o.sendPacketsLost=this.trafficStats.B_pvlr4/100)}this.localStats.set(t,o),o&&a&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,a.track,o);break}case Ou.LocalAudioTrack:{const r=n,o=$h({},Xl),s=e.getStats(),a=e.getLocalMedia(t);if(s){var i;const t=Qo(i=s.audioSend).call(i,e=>e.ssrc===(null==a?void 0:a.ssrcs[0].ssrcId));if(t){if("opus"!==t.codec&&"aac"!==t.codec||(o.codecType=t.codec),t.inputLevel)o.sendVolumeLevel=Math.round(32767*t.inputLevel);else{const t=e.getLocalAudioVolume();t&&(o.sendVolumeLevel=Math.round(32767*t))}o.sendBytes=t.bytes,o.sendPackets=t.packets,o.sendPacketsLost=t.packetsLost,o.sendBitrate=r?8*Math.max(0,o.sendBytes-r.sendBytes):0}}this.trafficStats&&(o.sendPacketsLost=this.trafficStats.B_pvlr4/100),this.localStats.set(Ou.LocalAudioTrack,o),o&&a&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,a.track,o);break}}})}updateRemoteStats(e){var t,n;Xn(t=Bd(Dd(n=this.remoteStats).call(n))).call(t,([t,{videoStats:n,audioStats:r,videoPcStats:i}])=>{var o,s,a;const c=r,l=n,u=i,d=$h({},tu),h=$h({},ru),p=$h({},nu),{audioTrack:f,videoTrack:g,audioSSRC:m,videoSSRC:_}=e.getRemoteMedia(t),v=e.getStats(),E=null==v?void 0:Qo(o=v.audioRecv).call(o,e=>e.ssrc===m),A=null==v?void 0:Qo(s=v.videoRecv).call(s,e=>e.ssrc===_),y=this.trafficStats&&Qo(a=this.trafficStats.peer_delay).call(a,e=>e.peer_uid===t);if(E&&("opus"!==E.codec&&"aac"!==E.codec||(d.codecType=E.codec),E.outputLevel?d.receiveLevel=Math.round(32767*E.outputLevel):f&&(d.receiveLevel=Math.round(32767*f.getVolumeLevel())),d.receiveBytes=E.bytes,d.receivePackets=E.packets,d.receivePacketsLost=E.packetsLost,d.packetLossRate=d.receivePacketsLost/(d.receivePackets+d.receivePacketsLost),d.receiveBitrate=c?8*Math.max(0,d.receiveBytes-c.receiveBytes):0,d.totalDuration=c?c.totalDuration+1:1,d.totalFreezeTime=c?c.totalFreezeTime:0,d.freezeRate=d.totalFreezeTime/d.totalDuration,d.receiveDelay=E.jitterBufferMs,d.totalDuration>10&&Kh.isRemoteAudioFreeze(f)&&(d.totalFreezeTime+=1)),A){"H264"!==A.codec&&"VP8"!==A.codec&&"VP9"!==A.codec&&"AV1X"!==A.codec||(h.codecType=A.codec),h.receiveBytes=A.bytes,h.receiveBitrate=l?8*Math.max(0,h.receiveBytes-l.receiveBytes):0,h.decodeFrameRate=A.decodeFrameRate<0?0:A.decodeFrameRate,h.renderFrameRate=A.decodeFrameRate<0?0:A.decodeFrameRate,A.outputFrame&&(h.renderFrameRate=A.outputFrame.frameRate),A.receivedFrame?(h.receiveFrameRate=A.receivedFrame.frameRate,h.receiveResolutionHeight=A.receivedFrame.height,h.receiveResolutionWidth=A.receivedFrame.width):g&&(h.receiveResolutionHeight=g._videoHeight||0,h.receiveResolutionWidth=g._videoWidth||0),void 0!==A.framesRateFirefox&&(h.receiveFrameRate=Math.round(A.framesRateFirefox)),h.receivePackets=A.packets,h.receivePacketsLost=A.packetsLost,h.packetLossRate=h.receivePacketsLost/(h.receivePackets+h.receivePacketsLost),h.totalDuration=l?l.totalDuration+1:1,h.totalFreezeTime=l?l.totalFreezeTime:0,h.receiveDelay=A.jitterBufferMs||0;const t=!!_&&e.getRemoteVideoIsReady(_);g&&t&&Kh.isRemoteVideoFreeze(g,A,u)&&(h.totalFreezeTime+=1),h.freezeRate=h.totalFreezeTime/h.totalDuration}y&&(d.end2EndDelay=y.B_ad,h.end2EndDelay=y.B_vd,d.transportDelay=y.B_ed,h.transportDelay=y.B_ed,d.currentPacketLossRate=y.B_ealr4/100,h.currentPacketLossRate=y.B_evlr4/100,p.uplinkNetworkQuality=y.B_punq?y.B_punq:0,p.downlinkNetworkQuality=y.B_pdnq?y.B_pdnq:0),this.remoteStats.set(t,{audioStats:d,videoStats:h,videoPcStats:A,networkStats:p}),f&&this.exceptionMonitor.setRemoteAudioStats(f,d),g&&this.exceptionMonitor.setRemoteVideoStats(g,h)})}}var Yh="".repeat||function(e){var t=String(m(this)),n="",r=z(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},Jh=Math.ceil,Xh=function(e){return function(t,n,r){var i,o,s=String(m(t)),a=s.length,c=void 0===r?" ":String(r),l=$(n);return l<=a||""==c?s:(i=l-a,(o=Yh.call(c,Jh(i/c.length))).length>i&&(o=o.slice(0,i)),e?s+o:o+s)}},ep={start:Xh(!1),end:Xh(!0)},tp=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(xe),np=ep.start;Q({target:"String",proto:!0,forced:tp},{padStart:function(e){return np(this,e,arguments.length>1?arguments[1]:void 0)}});var rp=$e("String").padStart,ip=String.prototype,op=function(e){var t=e.padStart;return"string"==typeof e||e===ip||e instanceof String&&t===ip.padStart?rp:t};function sp(e){return(new TextEncoder).encode(e)}const ap=async e=>{const t=Qp("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),n=await window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),r=sp(e),i=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,r);return Wp(new Uint8Array(i))},cp=async e=>function(e,t){let n="";const r=new Uint8Array(e);return Xn(r).call(r,e=>{var r;n+=op(r=e.toString(t)).call(r,2,"0")}),n}(await crypto.subtle.digest("SHA-256",sp(e)),16);function lp(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function up(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=lp(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=lp(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}function dp(e){if(!e.address||!e.tcp)throw new pl(ll.UNEXPECTED_RESPONSE,"Invalid address format ".concat(e));return e.address.match(/^[\.\:\d]+$/)?"".concat(e.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(Rc.info("Cannot recognized as IP address ".concat(e.address,". Used As Host instead")),Je(t="".concat(e.address,":")).call(t,e.tcp));var t}function hp(e){var t;return e.match(/^[\.\:\d]+$/)?Je(t="".concat(e.replace(/[^\d]/g,"-"),".")).call(t,jc("TURN_DOMAIN")):(Rc.info("Cannot recognized as IP address ".concat(e,". Used As Host instead")),e)}function pp(e,t){var n;const r=jc("GATEWAY_DOMAINS");let i=r[1]&&-1!==Lo(t).call(t,r[1])?1:0;return e.addresses=e.addresses||[],{gatewayAddrs:vo(n=e.addresses).call(n,e=>{var t,n,o;return e.ip.match(/^[\.\:\d]+$/)?Je(t=Je(n="".concat(e.ip.replace(/[^\d]/g,"-"),".")).call(n,r[i++%r.length],":")).call(t,e.port):(Rc.info("Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),Je(o="".concat(e.ip,":")).call(o,e.port))}),uid:e.uid,cid:e.cid,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function fp(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function gp(e){var t;const n=e._encoderConfig;if(!n)return{};const r={resolution:n.width&&n.height?Je(t="".concat(fp(n.width),"x")).call(t,fp(n.height)):void 0,maxVideoBW:n.bitrateMax,minVideoBW:n.bitrateMin};return"number"==typeof n.frameRate?(r.maxFrameRate=n.frameRate,r.minFrameRate=n.frameRate):n.frameRate&&(r.maxFrameRate=n.frameRate.max||n.frameRate.ideal||n.frameRate.exact||n.frameRate.min,r.minFrameRate=n.frameRate.min||n.frameRate.ideal||n.frameRate.exact||n.frameRate.max),r}function mp(e,t,n){var r,i,o;const s=Qo(r=t.videoSend).call(r,t=>t.ssrc===e);if(!s)return null;const a=null==n||null===(i=Qo(o=n.videoSend).call(o,t=>t.ssrc===e))||void 0===i?void 0:i.inputFrame,c={id:kp(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:s.ssrc.toString()};return s.inputFrame&&(a&&s.inputFrame.height===a.height||(c.A_fhi=s.inputFrame.height?s.inputFrame.height.toString():"0"),a&&s.inputFrame.width===a.width||(c.A_fwi=s.inputFrame.width?s.inputFrame.width.toString():"0"),a&&s.inputFrame.frameRate===a.frameRate||(c.A_fri=s.inputFrame.frameRate?s.inputFrame.frameRate.toString():"0")),c}function _p(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function vp(e,t){var n;let r,i,o=void 0;switch(t){case Rd.CHOOSE_SERVER:r=4096,i="choose server";break;case Rd.CLOUD_PROXY:r=1048576,i="proxy";break;case Rd.CLOUD_PROXY_5:r=4194304,i="proxy5";break;default:throw new pl(ll.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(Xn(n=e.response_body).call(n,t=>{var n;t.buffer&&t.buffer.flag===r&&(o={code:t.buffer.code,addresses:vo(n=t.buffer.edges_services).call(n,e=>up({},e,{ticket:t.buffer.cert})),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:up({},t.buffer.detail,{},e.detail),flag:t.buffer.flag,opid:e.opid})}),!o)throw new pl(ll.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(i," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return o}async function Ep(e,t){var n;return await fo.all(vo(n=e.addresses).call(n,async e=>({address:e.ip,tcpport:e.port,udpport:e.port,username:t?t.toString():Nc.username,password:t?await cp(t.toString()):Nc.password})))}function Ap(e,t){const n=t._videoHeight||t.getMediaStreamTrack(!0).getSettings().height;return n?n/fp(e.height):4}var yp;function Sp(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function bp(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=Sp(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=Sp(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}function Cp(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function Tp(e,t,n){const r=e[t];if(!r||"string"!=typeof r)return[e];e[t]="";const i=Cp(ve(e));let o=0;const s=[];let a=0;for(let c=0;c<r.length;c++)a+=r.charCodeAt(c)<=127?1:3,a<=n-i||(s[s.length]=bp({},e,{[t]:r.substring(o,c)}),o=c,a=r.charCodeAt(c)<=127?1:3);return o!==r.length-1&&(s[s.length]=bp({},e,{[t]:r.substring(o)})),s}function Ip(e){return new fo(t=>{window.setTimeout(t,e)})}function Rp(e){const t=new pl(ll.TIMEOUT,"timeout");return new fo((n,r)=>{window.setTimeout(()=>r(t),e)})}function wp(e,t){return t===1/0?e:fo.race([e,Rp(t)])}function kp(e=7,t){var n,r;const i=Math.random().toString(16).substr(2,e).toLowerCase();return i.length===e?Je(n="".concat(t)).call(n,i):Je(r="".concat(t)).call(r,i)+kp(e-i.length,"")}function Op(){return kp(32,"").toUpperCase()}const Np=()=>{};function Lp(e){return new fo((t,n)=>{let r=!1;const i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);const o=Ra()?"canplay":"playing";i.addEventListener(o,()=>{const e=i.videoWidth,n=i.videoHeight;!e&&Ia()||(r=!0,i.srcObject=null,i.remove(),t([e,n]))}),i.srcObject=new MediaStream([e]),i.play().catch(Np),Fa(()=>{r||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))},4e3)})}function Pp(e){return fo.all(vo(e).call(e,e=>e.then(e=>{throw e},e=>e))).then(e=>{throw e},e=>e)}function Dp(e,t,...n){return 0===e.getListeners(t).length?fo.reject(new pl(ll.UNEXPECTED_ERROR,"can not emit promise")):new fo((r,i)=>{e.emit(t,...n,r,i)})}function Mp(e,t,...n){return 0===e.getListeners(t).length?fo.resolve():Dp(e,t,...n)}function xp(e,t,...n){return 0===e.getListeners(t).length?null:Bp(e,t,...n)}function Bp(e,t,...n){let r=null,i=null;if(e.emit(t,...n,e=>{r=e},e=>{i=e}),null!==i)throw i;if(null===r)throw new pl(ll.UNEXPECTED_ERROR,"handler is not sync");return r}function Up(e,t){const n=Lo(e).call(e,t);-1!==n&&To(e).call(e,n,1)}function Fp(e){const t=[];return Xn(e).call(e,e=>{-1===Lo(t).call(t,e)&&t.push(e)}),t}function Vp(e){fo.resolve().then(e)}function jp(e){return JSON.parse(ve(e))}const Gp={};function Hp(e,t){Gp[t]||(Gp[t]=!0,e())}function Qp(e){const t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length));for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}function Wp(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}const qp=new class{constructor(){this.fnMap=new xn}throttleByKey(e,t,n,r,...i){if(this.fnMap.has(t)){const o=this.fnMap.get(t);if(o.threshold!==n){o.fn(...o.args),clearTimeout(o.timer);const s=window.setTimeout(()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)},n);this.fnMap.set(t,{fn:e,threshold:n,timer:s,args:i,skipFn:r})}else o.skipFn&&o.skipFn(...o.args),this.fnMap.set(t,bp({},o,{fn:e,args:i,skipFn:r}))}else{const o=window.setTimeout(()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)},n);this.fnMap.set(t,{fn:e,threshold:n,timer:o,args:i,skipFn:r})}}},zp=Yo(yp=qp.throttleByKey).call(yp,qp),Zp=async({fragementLength:e,referenceList:t,asyncMapHandler:n,allFailedhandler:r,promisesCollector:i})=>{let o=0;const s=e;let a,c=0;const l=async()=>{const e=(()=>{const e=o*s,r=e+s,i=Uo(t).call(t,e,r);return vo(i).call(i,n)})();i&&i.push(...e);try{a=await Pp(e)}catch(e){if(c+=s,o++,!(c>=t.length))return void await l();r(e)}Xn(e).call(e,e=>e.cancel())};return await l(),a};var $p=$e("Array").values,Kp=Array.prototype,Yp={DOMTokenList:!0,NodeList:!0},Jp=function(e){var t=e.values;return e===Kp||e instanceof Array&&t===Kp.values||Yp.hasOwnProperty(ht(e))?$p:t};const Xp={[Ml.ACCESS_POINT]:{[Ul.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[Ul.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[Ul.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[Ul.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voice service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[Ul.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[Ml.UNILBS]:{[Bl.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[Bl.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[Bl.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[Bl.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[Bl.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[Bl.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[Bl.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[Bl.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[Bl.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[Bl.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[Bl.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[Bl.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[Ml.STRING_UID_ALLOCATOR]:{[xl.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[xl.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[xl.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function ef(e){const t=Xp[Math.floor(e/1e4)];if(!t)return{desc:"unkonw error",retry:!1};const n=t[e%1e4];if(!n){if(Math.floor(e/1e4)===Ml.ACCESS_POINT){const t=e%1e4;if("1"===t.toString()[0])return{desc:e.toString(),retry:!1};if("2"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return n}const tf={[Fl.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[Fl.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[Fl.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[Fl.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[Fl.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[Fl.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[Fl.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[Fl.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[Fl.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[Fl.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[Fl.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[Fl.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Fl.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Fl.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[Fl.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[Fl.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[Fl.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[Fl.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[Fl.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[Fl.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[Fl.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[Fl.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[Fl.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[Fl.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[Fl.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[Fl.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[Fl.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[Fl.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[Fl.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[Fl.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[Fl.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[Fl.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[Fl.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[Fl.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[Fl.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[Fl.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[Fl.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[Fl.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[Fl.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[Fl.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[Fl.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[Fl.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Fl.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[Fl.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[Fl.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[Fl.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[Fl.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[Fl.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[Fl.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[Fl.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[Fl.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[Fl.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[Fl.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[Fl.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[Fl.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[Fl.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"}};function nf(e){const t=tf[e];return t||{desc:"UNKNOW_ERROR_".concat(e),action:"failed"}}var rf=r((function(e,t){e.exports=function(){var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{DataViewIndexOutOfBoundsError:function(){return j},DecodeError:function(){return E},Decoder:function(){return Q},EXT_TIMESTAMP:function(){return A},Encoder:function(){return O},ExtData:function(){return _},ExtensionCodec:function(){return R},decode:function(){return q},decodeArrayStream:function(){return ee},decodeAsync:function(){return X},decodeMulti:function(){return z},decodeMultiStream:function(){return te},decodeStream:function(){return ne},decodeTimestampExtension:function(){return T},decodeTimestampToTimeSpec:function(){return C},encode:function(){return L},encodeDateToTimeSpec:function(){return S},encodeTimeSpecToTimestamp:function(){return y},encodeTimestampExtension:function(){return b}});var r=4294967295;function i(e,t,n){var r=Math.floor(n/4294967296),i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function o(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}var s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},c="undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function l(e){for(var t=e.length,n=0,r=0;r<t;){var i=e.charCodeAt(r++);if(0!=(4294967168&i))if(0==(4294965248&i))n+=2;else{if(i>=55296&&i<=56319&&r<t){var o=e.charCodeAt(r);56320==(64512&o)&&(++r,i=((1023&i)<<10)+(1023&o)+65536)}n+=0==(4294901760&i)?3:4}else n++}return n}var u=c?new TextEncoder:void 0,d=c?"undefined"!=typeof n?200:0:r,h=(null==u?void 0:u.encodeInto)?function(e,t,n){u.encodeInto(e,t.subarray(n))}:function(e,t,n){t.set(u.encode(e),n)};function p(e,t,n){for(var r=t,i=r+n,o=[],c="";r<i;){var l=e[r++];if(0==(128&l))o.push(l);else if(192==(224&l)){var u=63&e[r++];o.push((31&l)<<6|u)}else if(224==(240&l)){u=63&e[r++];var d=63&e[r++];o.push((31&l)<<12|u<<6|d)}else if(240==(248&l)){var h=(7&l)<<18|(u=63&e[r++])<<12|(d=63&e[r++])<<6|63&e[r++];h>65535&&(h-=65536,o.push(h>>>10&1023|55296),h=56320|1023&h),o.push(h)}else o.push(l);o.length>=4096&&(c+=String.fromCharCode.apply(String,a([],s(o))),o.length=0)}return o.length>0&&(c+=String.fromCharCode.apply(String,a([],s(o)))),c}var f,g=c?new TextDecoder:null,m=c?"undefined"!=typeof n?200:0:r,_=function(e,t){this.type=e,this.data=t},v=(f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),E=function(e){function t(n){var r=e.call(this,n)||this,i=Object.create(t.prototype);return Object.setPrototypeOf(r,i),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:t.name}),r}return v(t,e),t}(Error),A=-1;function y(e){var t,n=e.sec,r=e.nsec;if(n>=0&&r>=0&&n<=17179869183){if(0===r&&n<=4294967295){var o=new Uint8Array(4);return(t=new DataView(o.buffer)).setUint32(0,n),o}var s=n/4294967296,a=4294967295&n;return o=new Uint8Array(8),(t=new DataView(o.buffer)).setUint32(0,r<<2|3&s),t.setUint32(4,a),o}return o=new Uint8Array(12),(t=new DataView(o.buffer)).setUint32(0,r),i(t,4,n),o}function S(e){var t=e.getTime(),n=Math.floor(t/1e3),r=1e6*(t-1e3*n),i=Math.floor(r/1e9);return{sec:n+i,nsec:r-1e9*i}}function b(e){return e instanceof Date?y(S(e)):null}function C(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:var n=t.getUint32(0);return{sec:4294967296*(3&n)+t.getUint32(4),nsec:n>>>2};case 12:return{sec:o(t,4),nsec:t.getUint32(0)};default:throw new E("Unrecognized data size for timestamp (expected 4, 8, or 12): "+e.length)}}function T(e){var t=C(e);return new Date(1e3*t.sec+t.nsec/1e6)}var I={type:A,encode:b,decode:T},R=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(I)}return e.prototype.register=function(e){var t=e.type,n=e.encode,r=e.decode;if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{var i=1+t;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}},e.prototype.tryToEncode=function(e,t){for(var n=0;n<this.builtInEncoders.length;n++)if(null!=(r=this.builtInEncoders[n])&&null!=(i=r(e,t)))return new _(-1-n,i);for(n=0;n<this.encoders.length;n++){var r,i;if(null!=(r=this.encoders[n])&&null!=(i=r(e,t)))return new _(n,i)}return e instanceof _?e:null},e.prototype.decode=function(e,t,n){var r=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return r?r(e,t,n):new _(t,e)},e.defaultCodec=new e,e}();function w(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}var k=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},O=function(){function e(e,t,n,r,i,o,s,a){void 0===e&&(e=R.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=100),void 0===r&&(r=2048),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===s&&(s=!1),void 0===a&&(a=!1),this.extensionCodec=e,this.context=t,this.maxDepth=n,this.initialBufferSize=r,this.sortKeys=i,this.forceFloat32=o,this.ignoreUndefined=s,this.forceIntegerToFloat=a,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.getUint8Array()},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth "+t);null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),n=new Uint8Array(t),r=new DataView(t);n.set(this.bytes),this.view=r,this.bytes=n},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too long string: "+e+" bytes in UTF-8");this.writeU8(219),this.writeU32(e)}},e.prototype.encodeString=function(e){if(e.length>d){var t=l(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),h(e,this.bytes,this.pos),this.pos+=t}else t=l(e),this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,n){for(var r=e.length,i=n,o=0;o<r;){var s=e.charCodeAt(o++);if(0!=(4294967168&s)){if(0==(4294965248&s))t[i++]=s>>6&31|192;else{if(s>=55296&&s<=56319&&o<r){var a=e.charCodeAt(o);56320==(64512&a)&&(++o,s=((1023&s)<<10)+(1023&a)+65536)}0==(4294901760&s)?(t[i++]=s>>12&15|224,t[i++]=s>>6&63|128):(t[i++]=s>>18&7|240,t[i++]=s>>12&63|128,t[i++]=s>>6&63|128)}t[i++]=63&s|128}else t[i++]=s}}(e,this.bytes,this.pos),this.pos+=t},e.prototype.encodeObject=function(e,t){var n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(e));this.encodeMap(e,t)}},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: "+t);this.writeU8(198),this.writeU32(t)}var n=w(e);this.writeU8a(n)},e.prototype.encodeArray=function(e,t){var n,r,i=e.length;if(i<16)this.writeU8(144+i);else if(i<65536)this.writeU8(220),this.writeU16(i);else{if(!(i<4294967296))throw new Error("Too large array: "+i);this.writeU8(221),this.writeU32(i)}try{for(var o=k(e),s=o.next();!s.done;s=o.next()){var a=s.value;this.doEncode(a,t+1)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.countWithoutUndefined=function(e,t){var n,r,i=0;try{for(var o=k(t),s=o.next();!s.done;s=o.next())void 0!==e[s.value]&&i++}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},e.prototype.encodeMap=function(e,t){var n,r,i=Object.keys(e);this.sortKeys&&i.sort();var o=this.ignoreUndefined?this.countWithoutUndefined(e,i):i.length;if(o<16)this.writeU8(128+o);else if(o<65536)this.writeU8(222),this.writeU16(o);else{if(!(o<4294967296))throw new Error("Too large map object: "+o);this.writeU8(223),this.writeU32(o)}try{for(var s=k(i),a=s.next();!a.done;a=s.next()){var c=a.value,l=e[c];this.ignoreUndefined&&void 0===l||(this.encodeString(c),this.doEncode(l,t+1))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: "+t);this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),function(e,t,n){var r=n/4294967296,i=n;e.setUint32(t,r),e.setUint32(t+4,i)}(this.view,this.pos,e),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),i(this.view,this.pos,e),this.pos+=8},e}(),N={};function L(e,t){return void 0===t&&(t=N),new O(t.extensionCodec,t.context,t.maxDepth,t.initialBufferSize,t.sortKeys,t.forceFloat32,t.ignoreUndefined,t.forceIntegerToFloat).encode(e)}function P(e){return(e<0?"-":"")+"0x"+Math.abs(e).toString(16).padStart(2,"0")}var D=function(){function e(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var n=0;n<this.maxKeyLength;n++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,n){var r,i,o=this.caches[n-1];try{e:for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),a=s.next();!a.done;a=s.next()){for(var c=a.value,l=c.bytes,u=0;u<n;u++)if(l[u]!==e[t+u])continue e;return c.str}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return null},e.prototype.store=function(e,t){var n=this.caches[e.length-1],r={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=r:n.push(r)},e.prototype.decode=function(e,t,n){var r=this.find(e,t,n);if(null!=r)return this.hit++,r;this.miss++;var i=p(e,t,n),o=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(o,i),i},e}(),M=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},x=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}},B=function(e){return this instanceof B?(this.v=e,this):new B(e)},U=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof B?Promise.resolve(n.value.v).then(c,l):u(o[0][2],n)}catch(e){u(o[0][3],e)}var n}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}},F=new DataView(new ArrayBuffer(0)),V=new Uint8Array(F.buffer),j=function(){try{F.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")}(),G=new j("Insufficient data"),H=new D,Q=function(){function e(e,t,n,i,o,s,a,c){void 0===e&&(e=R.defaultCodec),void 0===t&&(t=void 0),void 0===n&&(n=r),void 0===i&&(i=r),void 0===o&&(o=r),void 0===s&&(s=r),void 0===a&&(a=r),void 0===c&&(c=H),this.extensionCodec=e,this.context=t,this.maxStrLength=n,this.maxBinLength=i,this.maxArrayLength=o,this.maxMapLength=s,this.maxExtLength=a,this.keyDecoder=c,this.totalPos=0,this.pos=0,this.view=F,this.bytes=V,this.headByte=-1,this.stack=[]}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=w(e),this.view=function(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=w(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}(this.bytes),this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),n=w(e),r=new Uint8Array(t.length+n.length);r.set(t),r.set(n,t.length),this.setBuffer(r)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view,n=this.pos;return new RangeError("Extra "+(t.byteLength-n)+" of "+t.byteLength+" byte(s) found at buffer["+e+"]")},e.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},e.prototype.decodeMulti=function(e){return M(this,(function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))},e.prototype.decodeAsync=function(e){var t,n,r,i,o,s,a,c;return o=this,s=void 0,c=function(){var o,s,a,c,l,u,d,h;return M(this,(function(p){switch(p.label){case 0:o=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),t=x(e),p.label=2;case 2:return[4,t.next()];case 3:if((n=p.sent()).done)return[3,5];if(a=n.value,o)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{s=this.doDecodeSync(),o=!0}catch(e){if(!(e instanceof j))throw e}this.totalPos+=this.pos,p.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return c=p.sent(),r={error:c},[3,12];case 7:return p.trys.push([7,,10,11]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,9];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:if(o){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,s]}throw u=(l=this).headByte,d=l.pos,h=l.totalPos,new RangeError("Insufficient data in parsing "+P(u)+" at "+h+" ("+d+" in the current buffer)")}}))},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof a?i:new a((function(e){e(i)}))).then(n,r)}i((c=c.apply(o,s||[])).next())}))},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return U(this,arguments,(function(){var n,r,i,o,s,a,c,l,u;return M(this,(function(d){switch(d.label){case 0:n=t,r=-1,d.label=1;case 1:d.trys.push([1,13,14,19]),i=x(e),d.label=2;case 2:return[4,B(i.next())];case 3:if((o=d.sent()).done)return[3,12];if(s=o.value,t&&0===r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),n&&(r=this.readArraySize(),n=!1,this.complete()),d.label=4;case 4:d.trys.push([4,9,,10]),d.label=5;case 5:return[4,B(this.doDecodeSync())];case 6:return[4,d.sent()];case 7:return d.sent(),0==--r?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((a=d.sent())instanceof j))throw a;return[3,10];case 10:this.totalPos+=this.pos,d.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return c=d.sent(),l={error:c},[3,19];case 14:return d.trys.push([14,,17,18]),o&&!o.done&&(u=i.return)?[4,B(u.call(i))]:[3,16];case 15:d.sent(),d.label=16;case 16:return[3,18];case 17:if(l)throw l.error;return[7];case 18:return[7];case 19:return[2]}}))}))},e.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){if(0!=(r=e-128)){this.pushMapState(r),this.complete();continue e}t={}}else if(e<160){if(0!=(r=e-144)){this.pushArrayState(r),this.complete();continue e}t=[]}else{var n=e-160;t=this.decodeUtf8String(n,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e)n=this.lookU8(),t=this.decodeUtf8String(n,1);else if(218===e)n=this.lookU16(),t=this.decodeUtf8String(n,2);else if(219===e)n=this.lookU32(),t=this.decodeUtf8String(n,4);else if(220===e){if(0!==(r=this.readU16())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(221===e){if(0!==(r=this.readU32())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(222===e){if(0!==(r=this.readU16())){this.pushMapState(r),this.complete();continue e}t={}}else if(223===e){if(0!==(r=this.readU32())){this.pushMapState(r),this.complete();continue e}t={}}else if(196===e){var r=this.lookU8();t=this.decodeBinary(r,1)}else if(197===e)r=this.lookU16(),t=this.decodeBinary(r,2);else if(198===e)r=this.lookU32(),t=this.decodeBinary(r,4);else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e)r=this.lookU8(),t=this.decodeExtension(r,1);else if(200===e)r=this.lookU16(),t=this.decodeExtension(r,2);else{if(201!==e)throw new E("Unrecognized type byte: "+P(e));r=this.lookU32(),t=this.decodeExtension(r,4)}this.complete();for(var i=this.stack;i.length>0;){var o=i[i.length-1];if(0===o.type){if(o.array[o.position]=t,o.position++,o.position!==o.size)continue e;i.pop(),t=o.array}else{if(1===o.type){if("string"!=(s=typeof t)&&"number"!==s)throw new E("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new E("The key __proto__ is not allowed");o.key=t,o.type=2;continue e}if(o.map[o.key]=t,o.readCount++,o.readCount!==o.size){o.key=null,o.type=1;continue e}i.pop(),t=o.map}}return t}var s},e.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new E("Unrecognized array type byte: "+P(e))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new E("Max length exceeded: map length ("+e+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new E("Max length exceeded: array length ("+e+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:e,array:new Array(e),position:0})},e.prototype.decodeUtf8String=function(e,t){var n;if(e>this.maxStrLength)throw new E("Max length exceeded: UTF-8 byte length ("+e+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+t+e)throw G;var r,i=this.pos+t;return r=this.stateIsMapKey()&&(null===(n=this.keyDecoder)||void 0===n?void 0:n.canBeCached(e))?this.keyDecoder.decode(this.bytes,i,e):e>m?function(e,t,n){var r=e.subarray(t,t+n);return g.decode(r)}(this.bytes,i,e):p(this.bytes,i,e),this.pos+=t+e,r},e.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new E("Max length exceeded: bin length ("+e+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(e+t))throw G;var n=this.pos+t,r=this.bytes.subarray(n,n+e);return this.pos+=t+e,r},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new E("Max length exceeded: ext length ("+e+") > maxExtLength ("+this.maxExtLength+")");var n=this.view.getInt8(this.pos+t),r=this.decodeBinary(e,t+1);return this.extensionCodec.decode(r,n,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e,t,n=(e=this.view,t=this.pos,4294967296*e.getUint32(t)+e.getUint32(t+4));return this.pos+=8,n},e.prototype.readI64=function(){var e=o(this.view,this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}(),W={};function q(e,t){return void 0===t&&(t=W),new Q(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decode(e)}function z(e,t){return void 0===t&&(t=W),new Q(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeMulti(e)}var Z=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},$=function(e){return this instanceof $?(this.v=e,this):new $(e)},K=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof $?Promise.resolve(n.value.v).then(c,l):u(o[0][2],n)}catch(e){u(o[0][3],e)}var n}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}};function Y(e){if(null==e)throw new Error("Assertion Failure: value must not be null nor undefined")}function J(e){return null!=e[Symbol.asyncIterator]?e:function(e){return K(this,arguments,(function(){var t,n,r,i;return Z(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,$(t.read())];case 3:return n=o.sent(),r=n.done,i=n.value,r?[4,$(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return Y(i),[4,$(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e)}function X(e,t){return void 0===t&&(t=W),n=this,r=void 0,o=function(){var n;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(r){return n=J(e),[2,new Q(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeAsync(n)]}))},new((i=void 0)||(i=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(s,a)}c((o=o.apply(n,r||[])).next())}));var n,r,i,o}function ee(e,t){void 0===t&&(t=W);var n=J(e);return new Q(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeArrayStream(n)}function te(e,t){void 0===t&&(t=W);var n=J(e);return new Q(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeStream(n)}function ne(e,t){return void 0===t&&(t=W),te(e,t)}return t}()})),of=Math.min;Q({target:"Array",proto:!0},{copyWithin:[].copyWithin||function(e,t){var n=Ae(this),r=$(n.length),i=J(e,r),o=J(t,r),s=arguments.length>2?arguments[2]:void 0,a=of((void 0===s?r:J(s,r))-o,r-i),c=1;for(o<i&&i<o+a&&(c=-1,o+=a-1,i+=a-1);a-- >0;)o in n?n[i]=n[o]:delete n[i],i+=c,o+=c;return n}});var sf=$e("Array").copyWithin,af=Array.prototype,cf=function(e){var t=e.copyWithin;return e===af||e instanceof Array&&t===af.copyWithin?sf:t},lf=Ct.every;Q({target:"Array",proto:!0,forced:zn("every")},{every:function(e){return lf(this,e,arguments.length>1?arguments[1]:void 0)}});var uf=$e("Array").every,df=Array.prototype,hf=function(e){var t=e.every;return e===df||e instanceof Array&&t===df.every?uf:t},pf=et.getWeakData,ff=xt.set,gf=xt.getterFor,mf=Ct.find,_f=Ct.findIndex,vf=0,Ef=function(e){return e.frozen||(e.frozen=new Af)},Af=function(){this.entries=[]},yf=function(e,t){return mf(e.entries,(function(e){return e[0]===t}))};Af.prototype={get:function(e){var t=yf(this,e);if(t)return t[1]},has:function(e){return!!yf(this,e)},set:function(e,t){var n=yf(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=_f(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}};var Sf={getConstructor:function(e,t,n,r){var i=e((function(e,o){_t(e,i,t),ff(e,{type:t,id:vf++,frozen:void 0}),null!=o&&mt(o,e[r],e,n)})),o=gf(t),s=function(e,t,n){var r=o(e),i=pf(U(t),!0);return!0===i?Ef(r).set(t,n):i[r.id]=n,e};return Yt(i.prototype,{delete:function(e){var t=o(this);if(!v(e))return!1;var n=pf(e);return!0===n?Ef(t).delete(e):n&&y(n,t.id)&&delete n[t.id]},has:function(e){var t=o(this);if(!v(e))return!1;var n=pf(e);return!0===n?Ef(t).has(e):n&&y(n,t.id)}}),Yt(i.prototype,n?{get:function(e){var t=o(this);if(v(e)){var n=pf(e);return!0===n?Ef(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return s(this,e,t)}}:{add:function(e){return s(this,e,!0)}}),i}},bf=(r((function(e){var t,n=xt.enforce,r=!o.ActiveXObject&&"ActiveXObject"in o,i=Object.isExtensible,s=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},a=e.exports=jt("WeakMap",s,Sf);if(Rt&&r){t=Sf.getConstructor(s,"WeakMap",!0),et.REQUIRED=!0;var c=a.prototype,l=c.delete,u=c.has,d=c.get,h=c.set;Yt(c,{delete:function(e){if(v(e)&&!i(e)){var r=n(this);return r.frozen||(r.frozen=new t),l.call(this,e)||r.frozen.delete(e)}return l.call(this,e)},has:function(e){if(v(e)&&!i(e)){var r=n(this);return r.frozen||(r.frozen=new t),u.call(this,e)||r.frozen.has(e)}return u.call(this,e)},get:function(e){if(v(e)&&!i(e)){var r=n(this);return r.frozen||(r.frozen=new t),u.call(this,e)?d.call(this,e):r.frozen.get(e)}return d.call(this,e)},set:function(e,r){if(v(e)&&!i(e)){var o=n(this);o.frozen||(o.frozen=new t),u.call(this,e)?h.call(this,e,r):o.frozen.set(e,r)}else h.call(this,e,r);return this}})}})),Math.min),Cf=[].lastIndexOf,Tf=!!Cf&&1/[1].lastIndexOf(1,-0)<0,If=zn("lastIndexOf"),Rf=Tf||If?function(e){if(Tf)return Cf.apply(this,arguments)||0;var t=_(this),n=$(t.length),r=n-1;for(arguments.length>1&&(r=bf(r,z(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:Cf;Q({target:"Array",proto:!0,forced:Rf!==[].lastIndexOf},{lastIndexOf:Rf});var wf=$e("Array").lastIndexOf,kf=Array.prototype,Of=function(e){var t=e.lastIndexOf;return e===kf||e instanceof Array&&t===kf.lastIndexOf?wf:t};const Nf=()=>function(e){var t;const n=vo(t=window.atob(e).split("")).call(t,e=>e.charCodeAt(0));return new Uint8Array(n,0,n.length/Uint8Array.BYTES_PER_ELEMENT)}("AGFzbQEAAAABMAlgA39/fwF/YAF/AGACf38AYAF/AX9gAn9/AX9gA39/fwBgBH9/f38AYAABf2AAAAI6AgNlbnYWZW1zY3JpcHRlbl9yZXNpemVfaGVhcAADA2VudhVlbXNjcmlwdGVuX21lbWNweV9iaWcAAAMjIggAAAAAAQEDAQEEBAQEAQEGAQYCBQUAAgAHAwEDAAIHAQMEBQFwAQYGBQYBAYACgAIGCQF/AUHQ48ACCweUAQoGbWVtb3J5AgARX193YXNtX2NhbGxfY3RvcnMAAhlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQAGbWFsbG9jABwEZnJlZQAdEF9fZXJybm9fbG9jYXRpb24AGwx6bGliQ29tcHJlc3MAGglzdGFja1NhdmUAIQxzdGFja1Jlc3RvcmUAIgpzdGFja0FsbG9jACMJCwEAQQELBRgZDA0PCq6FAiIDAAELpQcBBH8gAEH//wNxIQMgAEEQdiEEQQEhACACQQFGBEAgAyABLQAAaiIAQfH/A2sgACAAQfD/A0sbIgAgBGoiA0EQdCIEQYCAPGogBCADQfD/A0sbIAByDwsgAQR/IAJBEE8EQAJAAkACQCACQa8rSwRAA0AgAkGwK2shAkHbAiEFIAEhAANAIAMgAC0AAGoiAyAEaiADIAAtAAFqIgNqIAMgAC0AAmoiA2ogAyAALQADaiIDaiADIAAtAARqIgNqIAMgAC0ABWoiA2ogAyAALQAGaiIDaiADIAAtAAdqIgNqIAMgAC0ACGoiA2ogAyAALQAJaiIDaiADIAAtAApqIgNqIAMgAC0AC2oiA2ogAyAALQAMaiIDaiADIAAtAA1qIgNqIAMgAC0ADmoiA2ogAyAALQAPaiIDaiEEIABBEGohACAFQQFrIgUNAAsgBEHx/wNwIQQgA0Hx/wNwIQMgAUGwK2ohASACQa8rSw0ACyACRQ0DIAJBEEkNAQsDQCADIAEtAABqIgAgBGogACABLQABaiIAaiAAIAEtAAJqIgBqIAAgAS0AA2oiAGogACABLQAEaiIAaiAAIAEtAAVqIgBqIAAgAS0ABmoiAGogACABLQAHaiIAaiAAIAEtAAhqIgBqIAAgAS0ACWoiAGogACABLQAKaiIAaiAAIAEtAAtqIgBqIAAgAS0ADGoiAGogACABLQANaiIAaiAAIAEtAA5qIgBqIAAgAS0AD2oiA2ohBCABQRBqIQEgAkEQayICQQ9LDQALIAJFDQELIAJBAWshBiACQQNxIgUEQCABIQADQCACQQFrIQIgAyAALQAAaiIDIARqIQQgAEEBaiIBIQAgBUEBayIFDQALCyAGQQNJDQADQCADIAEtAABqIgAgAS0AAWoiBSABLQACaiIGIAEtAANqIgMgBiAFIAAgBGpqamohBCABQQRqIQEgAkEEayICDQALCyAEQfH/A3AhBCADQfH/A3AhAwsgBEEQdCADcg8LAkAgAkUNACACQQFrIQYgAkEDcSIFBEAgASEAA0AgAkEBayECIAMgAC0AAGoiAyAEaiEEIABBAWoiASEAIAVBAWsiBQ0ACwsgBkEDSQ0AA0AgAyABLQAAaiIAIAEtAAFqIgUgAS0AAmoiBiABLQADaiIDIAYgBSAAIARqampqIQQgAUEEaiEBIAJBBGsiAg0ACwsgBEHx/wNwQRB0IANB8f8DayADIANB8P8DSxtyBSAACwsKACAAIAEgAhADC4UJAQJ/IAFFBEBBAA8LIABBf3MhAAJAIAJFDQAgAUEDcUUNACABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACACQQFrIgRBACABQQFqIgNBA3EbRQRAIAMhASAEIQIMAQsgAS0AASAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEDAkAgAkECayIERQ0AIANBA3FFDQAgAS0AAiAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUEDaiEDAkAgAkEDayIERQ0AIANBA3FFDQAgAS0AAyAAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAkEEayECIAFBBGohAQwCCyADIQEgBCECDAELIAMhASAEIQILIAJBH0sEQANAIAEoAhwgASgCGCABKAIUIAEoAhAgASgCDCABKAIIIAEoAgQgASgCACAAcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAc3MiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzcyIAQQZ2QfwHcUGAGGooAgAgAEH/AXFBAnRBgCBqKAIAcyAAQQ52QfwHcUGAEGooAgBzIABBFnZB/AdxQYAIaigCAHNzIgBBBnZB/AdxQYAYaigCACAAQf8BcUECdEGAIGooAgBzIABBDnZB/AdxQYAQaigCAHMgAEEWdkH8B3FBgAhqKAIAcyEAIAFBIGohASACQSBrIgJBH0sNAAsLIAJBA0sEQANAIAEoAgAgAHMiAEEGdkH8B3FBgBhqKAIAIABB/wFxQQJ0QYAgaigCAHMgAEEOdkH8B3FBgBBqKAIAcyAAQRZ2QfwHcUGACGooAgBzIQAgAUEEaiEBIAJBBGsiAkEDSw0ACwsCQCACRQ0AIAJBAXEEfyABLQAAIABB/wFxc0ECdEGACGooAgAgAEEIdnMhACABQQFqIQEgAkEBawUgAgshAyACQQFGDQADQCABLQABIAEtAAAgAEH/AXFzQQJ0QYAIaigCACAAQQh2cyIAQf8BcXNBAnRBgAhqKAIAIABBCHZzIQAgAUECaiEBIANBAmsiAw0ACwsgAEF/cwsKACAAIAEgAhAFC9wEAQN/AkBByN8ALQAAQTFHDQAgAEUNACAAQQA2AhggACgCICIBRQRAIABBADYCKCAAQQE2AiBBASEBCyAAKAIkRQRAIABBAjYCJAsgACgCKEEBQcQtIAERAAAiAUUNACAAIAE2AhwgAUEPNgIwIAFBADYCHCABQQA2AhggAUEqNgIEIAEgADYCACABQQs2AlAgAUGAgAI2AiwgAUH//wE2AjQgAUGAEDYCTCABQQQ2AlggAUH/DzYCVCABIAAoAihBgIACQQIgACgCIBEAADYCOCABIAAoAiggASgCLEECIAAoAiARAAA2AkAgACgCKCABKAJMQQIgACgCIBEAACECIAFBADYCwC0gASACNgJEIAFBgAg2ApwtIAEgACgCKEGACEEEIAAoAiARAAAiAjYCCCABIAEoApwtIgNBAnQ2AgwCQAJAIAEoAjhFDQAgASgCQEUNACACRQ0AIAEoAkQNAQsgAUGaBTYCBCAAQbjfACgCADYCGCAAEAgPCyABQQA2AogBIAFBCTYChAEgAUEIOgAkIAEgAiADQQNsajYCmC0gASACIANBfnFqNgKkLSAAEAkNACAAKAIcIgAgACgCLEEBdDYCPCAAKAJEIgEgACgCTEEBdEECayIDakEAOwEAIAEgAxAgIABBADYCtC0gAEKAgICAIDcCdCAAQgA3AmggAEKAgICAIDcCXCAAQQA2AkggACAAKAKEAUEMbCIBQYTIAGovAQA2ApABIAAgAUGAyABqLwEANgKMASAAIAFBgsgAai8BADYCgAEgACABQYbIAGovAQA2AnwLC6kCAQN/AkAgAEUNACAAKAIgRQ0AIAAoAiQiA0UNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgJBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIAJBmgVGDQAgAkEqRw0BCwJ/An8CfyABKAIIIgIEQCAAKAIoIAIgAxECACAAKAIcIQELIAEoAkQiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAkAiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAEoAjgiAgsEQCAAKAIoIAIgACgCJBECACAAKAIcIQELIAAoAiggASAAKAIkEQIAIABBADYCHAsLlgIBA39BfiECAkAgAEUNACAAKAIgRQ0AIAAoAiRFDQAgACgCHCIBRQ0AIAEoAgAgAEcNAAJAAkAgASgCBCIDQTlrDjkBAgICAgICAgICAgIBAgICAQICAgICAgICAgICAgICAgICAQICAgICAgICAgICAQICAgICAgICAgEACyADQZoFRg0AIANBKkcNAQsgAEECNgIsIABBADYCCCAAQgA3AhQgAUEANgIUIAEgASgCCDYCECABKAIYIgJBf0wEQCABQQAgAmsiAjYCGAsgAUE5QSpB8QAgAhsgAkECRhs2AgQgAAJ/IAJBAkYEQEEAQQBBABAGDAELQQBBAEEAEAQLNgIwQQAhAiABQQA2AiggARAQCyACC9wIAQt/IAAoAiwiB0GGAmshCyAAKAJ0IQUgByEBA0AgACgCPCAFayAAKAJsIghrIQYgASALaiAITQRAIAAoAjgiASABIAdqIAcgBmsQHxogACAAKAJwIAdrNgJwIAAgACgCbCAHayIINgJsIAAgACgCXCAHazYCXCAAKAJMIgRBAWshCiAAKAJEIARBAXRqIQMgACgCLCEBIARBA3EiAgRAA0AgA0ECayIDQQAgAy8BACIFIAFrIgkgBSAJSRs7AQAgBEEBayEEIAJBAWsiAg0ACwsgCkEDTwRAA0AgA0ECayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EEayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EGayICQQAgAi8BACICIAFrIgUgAiAFSRs7AQAgA0EIayIDQQAgAy8BACICIAFrIgUgAiAFSRs7AQAgBEEEayIEDQALCyABQQFrIQogACgCQCABQQF0aiEDIAEhBCABQQNxIgIEQANAIANBAmsiA0EAIAMvAQAiBSABayIJIAUgCUkbOwEAIARBAWshBCACQQFrIgINAAsLIApBA08EQANAIANBAmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBGsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBBmsiAkEAIAIvAQAiAiABayIFIAIgBUkbOwEAIANBCGsiA0EAIAMvAQAiAiABayIFIAIgBUkbOwEAIARBBGsiBA0ACwsgBiAHaiEGCwJAIAAoAgAiASgCBCIERQ0AIAAoAnQhAiAGIAQgBCAGSxsiAwRAIAAoAjghBSABIAQgA2s2AgQgBSAIaiACaiABKAIAIAMQHyEEAkACQAJAIAEoAhwoAhhBAWsOAgABAgsgASABKAIwIAQgAxAENgIwDAELIAEgASgCMCAEIAMQBjYCMAsgASABKAIAIANqNgIAIAEgASgCCCADajYCCCAAKAJ0IQILIAAgAiADaiIFNgJ0AkAgACgCtC0iAyAFakEDSQ0AIAAgACgCOCIJIAAoAmwgA2siAWoiBC0AACICNgJIIAAgACgCVCIIIAQtAAEgAiAAKAJYIgZ0c3EiBDYCSANAIANFDQEgACABIAlqLQACIAQgBnRzIAhxIgQ2AkggACgCQCAAKAI0IAFxQQF0aiAAKAJEIARBAXRqIgIvAQA7AQAgAiABOwEAIAAgA0EBayIDNgK0LSABQQFqIQEgAyAFakECSw0ACwsgBUGFAksNACAAKAIAKAIERQ0AIAAoAiwhAQwBCwsCQCAAKAI8IgQgACgCwC0iAU0NACAAKAJ0IAAoAmxqIgMgAUsEQCAAKAI4IANqIAQgA2siAUGCAiABQYICSRsiARAgIAAgASADajYCwC0PCyADQYICaiIDIAFNDQAgACgCOCABaiAEIAFrIgQgAyABayIBIAEgBEsbIgEQICAAIAAoAsAtIAFqNgLALQsLsSwBCn8CQCAARQ0AIAAoAiBFDQAgACgCJEUNACAAKAIcIgFFDQAgASgCACAARw0AAkACQCABKAIEIgNBOWsOOQECAgICAgICAgICAgECAgIBAgICAgICAgICAgICAgICAgIBAgICAgICAgICAgIBAgICAgICAgICAQALIANBmgVGDQAgA0EqRw0BCwJAAkAgACgCDEUNACAAKAIEIgIEQCAAKAIARQ0BCyADQZoFRw0BCyAAQbDfACgCADYCGA8LIAAoAhBFBEAgAEG83wAoAgA2AhgPCyABKAIoIQUgAUEDNgIoAkAgASgCFARAIAEQEwJAIAAoAhAiAyABKAIUIgQgAyAESRsiAkUNACAAKAIMIAEoAhAgAhAfGiAAIAAoAgwgAmo2AgwgASABKAIQIAJqNgIQIAAgACgCFCACajYCFCAAIAAoAhAgAmsiAzYCECABIAEoAhQgAmsiBDYCFCAEDQAgASABKAIINgIQQQAhBAsgAwRAIAEoAgQhAwwCCyABQX82AigPCyACDQAgBUEBdEF3QQAgBUEEShtqQQZIDQAgAEG83wAoAgA2AhgPCwJAAkACQAJAAn8CQAJAAkACQAJAAkAgA0EqRwRAIANBmgVHDQEgACgCBEUNAiAAQbzfACgCADYCGA8LIAEoAjBBDHRBgPABayEDQQAhAgJAIAEoAogBQQFKDQAgASgChAEiBUECSA0AQcAAIQIgBUEGSA0AQYABQcABIAVBBkYbIQILIAEgBEEBajYCFCABKAIIIARqIAIgA3IiAkEgciACIAEoAmwbIgJBCHY6AAAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQR9wIAJyQR9zOgAAIAEoAmwEQCAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQRh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEQdjoAACAAKAIwIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACQQh2OgAAIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAsgAEEAQQBBABAENgIwIAFB8QA2AgQgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBCABKAIEIQMLAkACQAJAAkACQAJAAkAgA0E5RgR/IABBAEEAQQAQBjYCMCABIAEoAhQiAkEBajYCFCACIAEoAghqQR86AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakGLAToAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQg6AAAgASgCHCICDQIgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AAAgASABKAIUIgJBAWo2AhQgAiABKAIIakEAOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBADoAAEECIQIgASgChAEiA0EJRwRAQQQgASgCiAFBAUpBAnQgA0ECSBshAgsgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEgASgCFCICQQFqNgIUIAIgASgCCGpBAzoAACABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIUDQEgASgCBAUgAwtBxQBrDiMCBgYGAwYGBgYGBgYGBgYGBgYGBgYGBAYGBgYGBgYGBgYGBQYLIAFBfzYCKA8LIAIoAiQhAyACKAIcIQQgAigCECEFIAIoAiwhBiACKAIAIQggASABKAIUIgdBAWo2AhRBAiECIAcgASgCCGogBkEAR0EBdCAIQQBHciAFQQBHQQJ0ciAEQQBHQQN0ciADQQBHQQR0cjoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAhwoAgQhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIANBCHY6AAAgASgCHC8BBiEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcLQAHIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADOgAAIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABKAIcKAIMIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAEoAhwiAigCEAR/IAIoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcBSACCygCLARAIAAgACgCMCABKAIIIAEoAhQQBjYCMAsgAUHFADYCBCABQQA2AiALIAEoAhwiBCgCECIDBEAgASgCFCICIAQvARQgASgCICIGayIFaiABKAIMIgRLBEADQCABKAIIIAJqIAMgBmogBCACayIEEB8aIAEgASgCDCIDNgIUAkAgAiADTw0AIAEoAhwoAixFDQAgACAAKAIwIAEoAgggAmogAyACaxAGNgIwCyABIAEoAiAgBGo2AiAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIGIAMgBkkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQEQCABQX82AigPCyABKAIgIQYgASgCHCgCECEDQQAhAiAFIARrIgUgASgCDCIESw0ACwsgASgCCCACaiADIAZqIAUQHxogASABKAIUIAVqIgM2AhQCQCACIANPDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCACaiADIAJrEAY2AjALIAFBADYCIAsgAUHJADYCBAsgASgCHCgCHARAIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCHCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLAkAgASgCHCgCLEUNACABKAIUIgIgBU0NACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAFBADYCIAsgAUHbADYCBAsCQCABKAIcKAIkRQ0AIAEoAhQiAiEFA0ACQCACIAEoAgxHDQACQCACIAVNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCAFaiACIAVrEAY2AjALIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQC0EAIQJBACEFIAEoAhRFDQAgAUF/NgIoDwsgASgCHCgCJCEDIAEgASgCICIEQQFqNgIgIAMgBGotAAAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAMEQCABKAIUIQIMAQsLIAEoAhwoAixFDQAgASgCFCICIAVNDQAgACAAKAIwIAEoAgggBWogAiAFaxAGNgIwCyABQecANgIECyABKAIcKAIsBEAgASgCDCABKAIUIgJBAmpJBEAgACgCHCICEBMCQCAAKAIQIgMgAigCFCIEIAMgBEkbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrNgIQIAIgAigCFCADayIDNgIUIAMNACACIAIoAgg2AhALIAEoAhQNBUEAIQILIAAoAjAhAyABIAJBAWo2AhQgASgCCCACaiADOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAEEAQQBBABAGNgIwCyABQfEANgIEIAAoAhwiAhATAkAgACgCECIDIAIoAhQiBCADIARJGyIDRQ0AIAAoAgwgAigCECADEB8aIAAgACgCDCADajYCDCACIAIoAhAgA2o2AhAgACAAKAIUIANqNgIUIAAgACgCECADazYCECACIAIoAhQgA2siAzYCFCADDQAgAiACKAIINgIQCyABKAIURQ0AIAFBfzYCKA8LIAAoAgQNAQsgASgCdA0AIAEoAgRBmgVGDQgLIAEoAoQBIgJFBEAgAUEDEAwMBAsCQAJAIAEoAogBQQJrDgIAAQQLA0ACQAJAIAEoAnQNACABEAogASgCdA0AIAFBADYCtC0MAQsgAUEANgJgIAEoAjggASgCbGotAAAhAiABKAKkLSABKAKgLSIDQQF0akEAOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAjoAACABIAJBAnRqQZQBaiICIAIvAQBBAWo7AQAgASABKAJ0QQFrNgJ0IAEgASgCbEEBaiICNgJsIAEoAqAtIAEoApwtQQFrRw0BIAEgASgCXCIEQQBOBH8gASgCOCAEagVBAAsgAiAEa0EAEBQgASABKAJsNgJcIAEoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAEoAgAoAhANAQwHCwsgASgCoC1FDQcgASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNBQwHCwNAAkACQAJAIAEoAnQiAkGDAk8EQCABQQA2AmAMAQsgARAKIAEoAnQiAgRAIAFBADYCYCACQQJLDQEgASgCbCEDDAILIAFBADYCtC0gASgCoC1FDQogASABKAJcIgNBAE4EfyABKAI4IANqBUEACyABKAJsIANrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEEUNCAwKCyABKAJsIgNFBEBBACEDDAELIAEoAjggA2oiBkEBayIFLQAAIgQgBi0AAEcNACAEIAUtAAJHDQAgBCAFLQADRw0AIAZBggJqIQlBfyEIAkACQAJAAkACQAJAA0AgBiAIaiIFLQAEIARGBEAgBCAFLQAFRw0CIAQgBS0ABkcNAyAEIAUtAAdHDQQgBCAGIAhBCGoiCmoiBy0AAEcNByAEIAUtAAlHDQUgBCAFLQAKRw0GIAVBC2ohByAIQfYBSg0HIAohCCAEIActAABGDQEMBwsLIAVBBGohBwwFCyAFQQVqIQcMBAsgBUEGaiEHDAMLIAVBB2ohBwwCCyAFQQlqIQcMAQsgBUEKaiEHCyABIAIgByAJa0GCAmoiBCACIARJGyICNgJgIAJBA0kNACABKAKkLSABKAKgLSIDQQF0akEBOwEAIAEgA0EBajYCoC0gAyABKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAWpBmAlqIgIgAi8BAEEBajsBACABQYDJAC0AAEECdGpBiBNqIgIgAi8BAEEBajsBACABKAJgIQIgAUEANgJgIAEgASgCdCACazYCdCABIAIgASgCbGoiAjYCbCABKAKgLSABKAKcLUEBa0cNAgwBCyABKAI4IANqLQAAIQIgASgCpC0gASgCoC0iA0EBdGpBADsBACABIANBAWo2AqAtIAMgASgCmC1qIAI6AAAgASACQQJ0akGUAWoiAiACLwEAQQFqOwEAIAEgASgCdEEBazYCdCABIAEoAmxBAWoiAjYCbCABKAKgLSABKAKcLUEBa0cNAQsgASABKAJcIgRBAE4EfyABKAI4IARqBUEACyACIARrQQAQFCABIAEoAmw2AlwgASgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgASgCACgCEA0ACwwECyABQX82AigPCyABQX82AigPCyABQQMgAkEMbEGIyABqKAIAEQQACyICQX5xQQJGBEAgAUGaBTYCBAsgAkF9cQ0BCyAAKAIQDQMgAUF/NgIoDwsgAkEBRw0BCyABQQBBAEEAEBIgASgCRCICIAEoAkxBAXRBAmsiA2pBADsBACACIAMQICABKAJ0RQRAIAFBADYCtC0gAUEANgJcIAFBADYCbAsgACgCHCICEBMCQCAAKAIQIgQgAigCFCIDIAMgBEsbIgNFDQAgACgCDCACKAIQIAMQHxogACAAKAIMIANqNgIMIAIgAigCECADajYCECAAIAAoAhQgA2o2AhQgACAAKAIQIANrIgQ2AhAgAiACKAIUIANrIgM2AhQgAw0AIAIgAigCCDYCEAsgBA0AIAFBfzYCKAsLC7YNAQt/IAAoAgAiBCgCBCEJQQEhCAJAIAQoAhAiAyAAKAK8LUEqakEDdSICSQ0AIAAoAiwiBSAAKAIMQQVrIgYgBSAGSRshCiABQQRHIQsDQCAKIAMgAmsiAyAAKAJsIAAoAlxrIgYgBCgCBGoiAkH//wMgAkH//wNJGyIFIAMgBUkbIgNLBEAgAiADRw0CIAFFDQIgCyADRXENAgsgAEEAQQAgAUEERiACIANGcSIHEBIgACgCFCAAKAIIakEEayADOgAAIAAoAhQgACgCCGpBA2sgA0EIdjoAACAAKAIUIAAoAghqQQJrIANBf3MiAjoAACAAKAIUIAAoAghqQQFrIAJBCHY6AAAgACgCACICKAIcIgQQEwJAIAIoAhAiBSAEKAIUIgwgBSAMSRsiBUUNACACKAIMIAQoAhAgBRAfGiACIAIoAgwgBWo2AgwgBCAEKAIQIAVqNgIQIAIgAigCFCAFajYCFCACIAIoAhAgBWs2AhAgBCAEKAIUIAVrIgI2AhQgAg0AIAQgBCgCCDYCEAsCfyAGBEAgACgCACgCDCAAKAI4IAAoAlxqIAMgBiADIAZJGyICEB8aIAAoAgAiBCAEKAIMIAJqNgIMIAQgBCgCECACazYCECAEIAQoAhQgAmo2AhQgACAAKAJcIAJqNgJcIAMgAmshAwsgAwsEQCAAKAIAIgIoAgwhBSADIAIoAgQiBiADIAZJGyIEBEAgAiAGIARrNgIEIAUgAigCACAEEB8hBQJAAkACQCACKAIcKAIYQQFrDgIAAQILIAIgAigCMCAFIAQQBDYCMAwBCyACIAIoAjAgBSAEEAY2AjALIAIgAigCACAEajYCACACIAIoAgggBGo2AgggACgCACICKAIMIQULIAIgAyAFajYCDCACIAIoAhAgA2s2AhAgAiACKAIUIANqNgIUCyAAKAIAIQQgBwRAQQAhCAwCCyAEKAIQIgMgACgCvC1BKmpBA3UiAk8NAAsLAkAgCSAEKAIEayIDRQRAIAAoAmwhAgwBCwJAIAAoAiwiAiADTQRAIABBAjYCsC0gACgCOCAEKAIAIAJrIAIQHxogACAAKAIsIgQ2AmwgBCECDAELAkAgACgCPCAAKAJsIgRrIANLDQAgACAEIAJrIgQ2AmwgACgCOCIFIAIgBWogBBAfGiAAKAKwLSICQQFLDQAgACACQQFqNgKwLQsgACgCOCAAKAJsaiAAKAIAKAIAIANrIAMQHxogACAAKAJsIANqIgI2AmwgACgCLCEECyAAIAI2AlwgACAEIAAoArQtIgVrIgQgAyADIARLGyAFajYCtC0LIAIgACgCwC1LBEAgACACNgLALQtBAyEDAkAgCEUNACAAKAIAIgQoAgQhAwJAAkAgAUF7cUUNACADDQBBASEDIAIgACgCXEYNAiAAKAI8IAJBf3NqIQVBACEDDAELIAMgACgCPCACQX9zaiIFTQ0AIAAoAlwiByAAKAIsIgZIDQAgACACIAZrIgM2AmwgACAHIAZrNgJcIAAoAjgiAiACIAZqIAMQHxogACgCsC0iA0EBTQRAIAAgA0EBajYCsC0LIAAoAiwgBWohBSAAKAIAIgQoAgQhAwsCQCADIAUgAyAFSRsiAkUEQCAAKAJsIQMMAQsgACgCbCEFIAAoAjghBiAEIAMgAms2AgQgBSAGaiAEKAIAIAIQHyEDAkACQAJAIAQoAhwoAhhBAWsOAgABAgsgBCAEKAIwIAMgAhAENgIwDAELIAQgBCgCMCADIAIQBjYCMAsgBCAEKAIAIAJqNgIAIAQgBCgCCCACajYCCCAAIAAoAmwgAmoiAzYCbAsgAyAAKALALUsEQCAAIAM2AsAtCyADIAAoAlwiBmsiBCAAKAIsIgMgACgCDCAAKAK8LUEqakEDdWsiAkH//wMgAkH//wNJGyICIAIgA0sbSQRAQQAhAyABRQ0BIAFBBEYgBEEAR3JFDQEgAiAESQ0BIAAoAgAoAgQNAQtBACEFIAAgACgCOCAGaiACIAQgAiAESRsiAwJ/IAFBBEYEQCAAKAIAKAIERSACIARPcSEFCyAFCxASIAAgACgCXCADajYCXCAAKAIAIgAoAhwiAxATAkAgACgCECICIAMoAhQiBCACIARJGyICRQ0AIAAoAgwgAygCECACEB8aIAAgACgCDCACajYCDCADIAMoAhAgAmo2AhAgACAAKAIUIAJqNgIUIAAgACgCECACazYCECADIAMoAhQgAmsiADYCFCAADQAgAyADKAIINgIQC0ECQQAgBRshAwsgAwu5CwENfwJAA0ACQAJAIAAoAnRBhQJNBEAgABAKIAAoAnQhAgJAIAENACACQYYCTw0AQQAPCyACRQ0EIAJBA0kNAQsgACAAKAJUIAAoAmwiAiAAKAI4ai0AAiAAKAJIIAAoAlh0c3EiAzYCSCAAKAJAIAIgACgCNHFBAXRqIAAoAkQgA0EBdGoiBC8BACIDOwEAIAQgAjsBACADRQ0AIAAoAixBhgJrIAIgA2tJDQAgACAAIAMQDiICNgJgDAELIAAoAmAhAgsCQCACQQNPBEAgACgCpC0gACgCoC0iA0EBdGogACgCbCAAKAJwayIEOwEAIAAgA0EBajYCoC0gAyAAKAKYLWogAkEDayICOgAAIAJB/wFxQYDNAGotAABBAnQgAGpBmAlqIgIgAi8BAEEBajsBACAAIARBAWtB//8DcSICIAJBB3ZBgAJqIAJBgAJJG0GAyQBqLQAAQQJ0akGIE2oiAiACLwEAQQFqOwEAIAAgACgCdCAAKAJgIgJrIgM2AnQgACgCnC1BAWshBiAAKAKgLSEHAkAgA0EDSQ0AIAIgACgCgAFLDQAgACACQQFrIgM2AmAgACgCSCEEIAAoAmwhAiAAKAI0IQggACgCQCEJIAAoAkQhCiAAKAJUIQsgACgCOCEMIAAoAlghDQNAIAAgAiIFQQFqIgI2AmwgACAFIAxqLQADIAQgDXRzIAtxIgQ2AkggCSACIAhxQQF0aiAKIARBAXRqIg4vAQA7AQAgDiACOwEAIAAgA0EBayIDNgJgIAMNAAsgACAFQQJqIgI2AmwgBiAHRw0DDAILIABBADYCYCAAIAAoAmwgAmoiAjYCbCAAIAAoAjggAmoiAy0AACIENgJIIAAgACgCVCADLQABIAQgACgCWHRzcTYCSCAGIAdHDQIMAQsgACgCOCAAKAJsai0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBACAAIAAoAnRBAWs2AnQgACAAKAJsQQFqIgI2AmwgACgCoC0gACgCnC1BAWtHDQELQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQALQQAPCyAAIAAoAmwiAkECIAJBAkkbNgK0LSABQQRGBEBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EBEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALQQNBAiAAKAIAKAIQGw8LAkAgACgCoC1FDQBBACEDIAAgACgCXCIEQQBOBH8gACgCOCAEagUgAwsgAiAEa0EAEBQgACAAKAJsNgJcIAAoAgAiAigCHCIDEBMCQCACKAIQIgQgAygCFCIFIAQgBUkbIgRFDQAgAigCDCADKAIQIAQQHxogAiACKAIMIARqNgIMIAMgAygCECAEajYCECACIAIoAhQgBGo2AhQgAiACKAIQIARrNgIQIAMgAygCFCAEayICNgIUIAINACADIAMoAgg2AhALIAAoAgAoAhANAEEADwtBAQukBAEQfyAAKAJ8IgMgA0ECdiAAKAJ4IgQgACgCjAFJGyEJQQAgACgCbCIDIAAoAixrQYYCaiICIAIgA0sbIQwgACgCdCIHIAAoApABIgIgAiAHSxshDSAAKAI4Ig4gA2oiBUGCAmohDyAEIAVqIgMtAAAhCiADQQFrLQAAIQsgACgCNCEQIAAoAkAhEQNAAkACQCABIA5qIgMgBGoiAi0AACAKRw0AIAJBAWstAAAgC0cNACADLQAAIAUtAABHDQBBAiEGIAMtAAEgBS0AAUcNAAJAAkACQAJAAkACQAJAA0AgBSAGaiICLQABIAMtAANHDQYgAi0AAiADLQAERw0FIAItAAMgAy0ABUcNBCACLQAEIAMtAAZHDQMgAi0ABSADLQAHRw0CIAItAAYgAy0ACEcNASACLQAHIAMtAAlGBEAgBkH5AUshCCAFIAZBCGoiBmohAiAIDQggAy0ACiEIIANBCGohAyACLQAAIAhGDQEMCAsLIAJBB2ohAgwGCyACQQZqIQIMBQsgAkEFaiECDAQLIAJBBGohAgwDCyACQQNqIQIMAgsgAkECaiECDAELIAJBAWohAgsgAiAPayICQYICaiIDIARMDQAgACABNgJwIAMgDU4EQCADIQQMAgsgAyAFai0AACEKIAIgBWotAIECIQsgAyEECyAJQQFrIglFDQAgDCARIAEgEHFBAXRqLwEAIgFJDQELCyAHIAQgBCAHSxsL3Q4BB38DQAJAAkACQCAAKAJ0QYUCSw0AIAAQCiAAKAJ0IQICQCABDQAgAkGGAk8NAEEADwsgAkUNAiACQQJLDQAgACAAKAJgIgI2AnggACAAKAJwNgJkQQIhAyAAQQI2AmAMAQtBAiEDIAAgACgCVCAAKAJsIgIgACgCOGotAAIgACgCSCAAKAJYdHNxIgQ2AkggACgCQCACIAAoAjRxQQF0aiAAKAJEIARBAXRqIgUvAQAiBDsBACAFIAI7AQAgACAAKAJgIgI2AnggACAAKAJwNgJkIABBAjYCYCAERQ0AAkAgAiAAKAKAAU8NACAAKAIsQYYCayAAKAJsIARrSQ0AIAAgACAEEA4iAzYCYCADQQVLDQAgACgCiAFBAUcEQCADQQNHDQFBAyEDIAAoAmwgACgCcGtBgSBJDQELQQIhAyAAQQI2AmALIAAoAnghAgsCQCACQQNJDQAgAiADSQ0AIAAoAnQhBCAAKAKkLSAAKAKgLSIDQQF0aiAAKAJsIgUgACgCZEF/c2oiBjsBACAAIANBAWo2AqAtIAMgACgCmC1qIAJBA2siAjoAACACQf8BcUGAzQBqLQAAQQJ0IABqQZgJaiICIAIvAQBBAWo7AQAgACAGQQFrQf//A3EiAiACQQd2QYACaiACQYACSRtBgMkAai0AAEECdGpBiBNqIgIgAi8BAEEBajsBACAAIAAoAngiAkECayIDNgJ4IAAgACgCdCACa0EBajYCdCAEIAVqQQNrIQUgACgCnC1BAWshByAAKAJsIQIgACgCoC0hCANAIAAgAiIEQQFqIgI2AmwgAiAFTQRAIAAgACgCVCAEIAAoAjhqLQADIAAoAkggACgCWHRzcSIGNgJIIAAoAkAgACgCNCACcUEBdGogACgCRCAGQQF0aiIGLwEAOwEAIAYgAjsBAAsgACADQQFrIgM2AnggAw0ACyAAQQI2AmAgAEEANgJoIAAgBEECaiICNgJsIAcgCEcNAkEAIQMgACAAKAJcIgRBAE4EfyAAKAI4IARqBSADCyACIARrQQAQFCAAIAAoAmw2AlwgACgCACICKAIcIgMQEwJAIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACgCACgCEA0CQQAPCyAAKAJoBEAgACgCbCAAKAI4akEBay0AACECIAAoAqQtIAAoAqAtIgNBAXRqQQA7AQAgACADQQFqNgKgLSADIAAoApgtaiACOgAAIAAgAkECdGpBlAFqIgIgAi8BAEEBajsBAAJAIAAoAqAtIAAoApwtQQFrRw0AQQAhAyAAIAAoAlwiAkEATgR/IAAoAjggAmoFIAMLIAAoAmwgAmtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATIAIoAhAiBCADKAIUIgUgBCAFSRsiBEUNACACKAIMIAMoAhAgBBAfGiACIAIoAgwgBGo2AgwgAyADKAIQIARqNgIQIAIgAigCFCAEajYCFCACIAIoAhAgBGs2AhAgAyADKAIUIARrIgI2AhQgAg0AIAMgAygCCDYCEAsgACAAKAJsQQFqNgJsIAAgACgCdEEBazYCdCAAKAIAKAIQDQJBAA8FIABBATYCaCAAIAAoAmxBAWo2AmwgACAAKAJ0QQFrNgJ0DAILAAsLIAAoAmgEQCAAKAJsIAAoAjhqQQFrLQAAIQIgACgCpC0gACgCoC0iA0EBdGpBADsBACAAIANBAWo2AqAtIAMgACgCmC1qIAI6AAAgACACQQJ0akGUAWoiAiACLwEAQQFqOwEAIABBADYCaAsgACAAKAJsIgJBAiACQQJJGzYCtC0gAUEERgRAQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBARAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQC0EDQQIgACgCACgCEBsPCwJAIAAoAqAtRQ0AQQAhAyAAIAAoAlwiBEEATgR/IAAoAjggBGoFIAMLIAIgBGtBABAUIAAgACgCbDYCXCAAKAIAIgIoAhwiAxATAkAgAigCECIEIAMoAhQiBSAEIAVJGyIERQ0AIAIoAgwgAygCECAEEB8aIAIgAigCDCAEajYCDCADIAMoAhAgBGo2AhAgAiACKAIUIARqNgIUIAIgAigCECAEazYCECADIAMoAhQgBGsiAjYCFCACDQAgAyADKAIINgIQCyAAKAIAKAIQDQBBAA8LQQELYQAgAEEANgK8LSAAQQA7AbgtIABBuBZqQajPADYCACAAIABB/BRqNgKwFiAAQawWakGUzwA2AgAgACAAQYgTajYCpBYgAEGgFmpBgM8ANgIAIAAgAEGUAWo2ApgWIAAQEQvwBAEDfyAAQZQBaiECA0AgAiABQQJ0IgNqQQA7AQAgAiADQQRyakEAOwEAIAFBAmoiAUGeAkcNAAsgAEEAOwH8FCAAQQA7AYgTIABBxBVqQQA7AQAgAEHAFWpBADsBACAAQbwVakEAOwEAIABBuBVqQQA7AQAgAEG0FWpBADsBACAAQbAVakEAOwEAIABBrBVqQQA7AQAgAEGoFWpBADsBACAAQaQVakEAOwEAIABBoBVqQQA7AQAgAEGcFWpBADsBACAAQZgVakEAOwEAIABBlBVqQQA7AQAgAEGQFWpBADsBACAAQYwVakEAOwEAIABBiBVqQQA7AQAgAEGEFWpBADsBACAAQYAVakEAOwEAIABB/BNqQQA7AQAgAEH4E2pBADsBACAAQfQTakEAOwEAIABB8BNqQQA7AQAgAEHsE2pBADsBACAAQegTakEAOwEAIABB5BNqQQA7AQAgAEHgE2pBADsBACAAQdwTakEAOwEAIABB2BNqQQA7AQAgAEHUE2pBADsBACAAQdATakEAOwEAIABBzBNqQQA7AQAgAEHIE2pBADsBACAAQcQTakEAOwEAIABBwBNqQQA7AQAgAEG8E2pBADsBACAAQbgTakEAOwEAIABBtBNqQQA7AQAgAEGwE2pBADsBACAAQawTakEAOwEAIABBqBNqQQA7AQAgAEGkE2pBADsBACAAQaATakEAOwEAIABBnBNqQQA7AQAgAEGYE2pBADsBACAAQZQTakEAOwEAIABBkBNqQQA7AQAgAEGME2pBADsBACAAQgA3AqwtIABBlAlqQQE7AQAgAEEANgKoLSAAQQA2AqAtC7IDAQJ/IAAgAC8BuC0gA0H//wNxIgUgACgCvC0iBHRyIgM7AbgtAkACQAJ/IARBDk4EQCAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAM6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAAQbktai0AADoAACAAIAVBECAAKAK8LSIEa3YiAzsBuC0gBEENawwBCyAEQQNqCyIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGohBCAAQbktai0AACEDDAELIARBAUgNASAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQLIAQgAzoAAAsgAEEANgK8LSAAQQA7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAjoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAJBCHY6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiACQX9zIgM6AAAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiADQQh2OgAAIAAoAgggACgCFGogASACEB8aIAAgACgCFCACajYCFAusAQEBfwJAIAACfyAAKAK8LSIBQRBGBEAgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIAAoAhQiAUEBajYCFCABIAAoAghqIABBuS1qLQAAOgAAIABBADsBuC1BAAwBCyABQQhIDQEgACAAKAIUIgFBAWo2AhQgASAAKAIIaiAALQC4LToAACAAIABBuS1qLQAAOwG4LSAAKAK8LUEIaws2ArwtCwuhEwENfwJ/AkACQAJAIAAoAoQBQQFOBEAgACgCACIGKAIsQQJHDQNB/4D/n38hBANAAkAgBEEBcUUNACAAIAVBAnRqLwGUAUUNAEEAIQQMBAsCQCAEQQJxRQ0AIAAgBUECdEEEcmovAZQBRQ0AQQAhBAwECyAEQQJ2IQQgBUECaiIFQSBHDQALDAELIAJBBWoiBQwDCwJAIAAvAbgBDQAgAC8BvAENACAALwHIAQ0AQSAhBQNAIAAgBUECdCIEai8BlAENASAAIARBBHJqLwGUAQ0BIAAgBEEIcmovAZQBDQEgACAEQQxyai8BlAENAUEAIQQgBUEEaiIFQYACRw0ACwwBC0EBIQQLIAYgBDYCLAsgACAAQZgWahAVIAAgAEGkFmoQFSAALwGWASEEIAAgAEGcFmooAgAiCkECdGpB//8DOwGaASAKQQBOBEBBB0GKASAEGyEJQQRBAyAEGyELIABBwBVqIQ4gAEHEFWohDyAAQbwVaiEQQX8hDANAIAQhBSAAIAgiDUEBaiIIQQJ0ai8BlgEhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgAEGKE2ovAQAhBCAAIABBqBZqKAIAIgpBAnRqQY4TakH//wM7AQBBACEHIApBAE4EQEEHQYoBIAQbIQlBBEEDIAQbIQsgAEHAFWohDiAAQcQVaiEPIABBvBVqIRBBfyEMQQAhCANAIAQhBSAAIAgiDUEBaiIIQQJ0akGKE2ovAQAhBAJAAkAgB0EBaiIGIAlODQAgBCAFRw0AIAYhBwwBCwJ/IAYgC0gEQCAAIAVBAnRqQfwUaiIHLwEAIAZqDAELIAUEQCAFIAxHBEAgACAFQQJ0akH8FGoiBiAGLwEAQQFqOwEACyAQIgcvAQBBAWoMAQsgB0EJTARAIA4iBy8BAEEBagwBCyAPIgcvAQBBAWoLIQYgByAGOwEAQQAhBwJ/IARFBEBBAyELQYoBDAELQQNBBCAEIAVGIgYbIQtBBkEHIAYbCyEJIAUhDAsgCiANRw0ACwsgACAAQbAWahAVIAAgACgCqC0Cf0ESIABBuhVqLwEADQAaQREgAEGCFWovAQANABpBECAAQbYVai8BAA0AGkEPIABBhhVqLwEADQAaQQ4gAEGyFWovAQANABpBDSAAQYoVai8BAA0AGkEMIABBrhVqLwEADQAaQQsgAEGOFWovAQANABpBCiAAQaoVai8BAA0AGkEJIABBkhVqLwEADQAaQQggAEGmFWovAQANABpBByAAQZYVai8BAA0AGkEGIABBohVqLwEADQAaQQUgAEGaFWovAQANABpBBCAAQZ4Vai8BAA0AGkEDQQIgAEH+FGovAQAbCyIIQQNsaiIEQRFqNgKoLSAEQRtqQQN2IgQgACgCrC1BCmpBA3YiBSAEIAVJGwshBAJAAkAgAUUNACACQQRqIARLDQAgACABIAIgAxASDAELIAAoArwtIQYCQCAEIAVHBEAgACgCiAFBBEcNAQsgACAALwG4LSADQQJqQf//A3EiBCAGdHIiBTsBuC0gAAJ/IAZBDk4EQCAAIAAoAhQiBkEBajYCFCAGIAAoAghqIAU6AAAgACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAAQbktai0AADoAACAAIARBECAAKAK8LSIFa3Y7AbgtIAVBDWsMAQsgBkEDags2ArwtIABBwM8AQcDYABAWDAELIAAvAbgtIANBBGpB//8DcSIHIAZ0ciEFAkAgBkEOTgRAIAAgBTsBuC0gACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAFOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUENayEEIAdBECAFa3YhBQwBCyAGQQNqIQQLIAAgBDYCvC0gAEGcFmooAgAiCkGA/gNqQf//A3EiByAEdCEGIABBqBZqKAIAIQkCfyAEQQxOBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBC2shBCAHQRAgBWt2DAELIARBBWohBCAFIAZyCyEFIAAgBDYCvC0gCUH//wNxIgcgBHQhBgJ/IARBDE4EQCAAIAUgBnIiBDsBuC0gACAAKAIUIgVBAWo2AhQgBSAAKAIIaiAEOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAEG5LWotAAA6AAAgACgCvC0iBUELayEEIAdBECAFa3YMAQsgBEEFaiEEIAUgBnILIQUgACAENgK8LSAIQf3/A2pB//8DcSIHIAR0IQYCfyAEQQ1OBEAgACAFIAZyIgQ7AbgtIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBDoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIABBuS1qLQAAOgAAIAAoArwtIgVBDGshBCAHQRAgBWt2DAELIARBBGohBCAFIAZyCyEGIAAgBDYCvC1BACEFIABBuS1qIQ0DQCAAIAYgACAFQZDcAGotAABBAnRqQf4Uai8BACIHIAR0ciIGOwG4LSAAAn8gBEEOTgRAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogBjoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIA0tAAA6AAAgACAHQRAgACgCvC0iBGt2IgY7AbgtIARBDWsMAQsgBEEDagsiBDYCvC0gBSAIRyEHIAVBAWohBSAHDQALIAAgAEGUAWoiBCAKEBcgACAAQYgTaiIFIAkQFyAAIAQgBRAWCyAAEBEgAwRAAkACfyAAKAK8LSIEQQlOBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAALQC4LToAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIQQgAEG5LWotAAAMAQsgBEEBSA0BIAAgACgCFCIEQQFqNgIUIAQgACgCCGohBCAALQC4LQshBSAEIAU6AAALIABBADYCvC0gAEEAOwG4LQsLsRUBFX8jAEEgayEKIAEoAgAhCSABKAIIIgIoAgAhBSACKAIMIQ0gAEKAgICA0McANwLQKEF/IRACQCANQQBKBEBBACECA0ACQCAJIAJBAnRqIgMvAQAEQCAAIAAoAtAoQQFqIgM2AtAoIAAgA0ECdGpB3BZqIAI2AgAgACACakHYKGpBADoAACACIRAMAQsgA0EAOwECCyACQQFqIgIgDUcNAAsgACgC0CgiBEEBSg0BCwNAIAAgBEEBaiICNgLQKCAAIAJBAnRqQdwWaiAQQQFqIgNBACAQQQJIIgQbIgI2AgAgCSACQQJ0IgdqQQE7AQAgACACakHYKGpBADoAACAAIAAoAqgtQQFrNgKoLSAFBEAgACAAKAKsLSAFIAdqLwECazYCrC0LIAMgECAEGyEQIAAoAtAoIgRBAkgNAAsLIAEgEDYCBCAEQQF2IQgDQCAAIAhBAnRqQdwWaigCACELAkAgCCICQQF0IgMgBEoNACAAIAtqQdgoaiEPIAkgC0ECdGohBiAIIQUDQAJAIAMgBE4EQCADIQIMAQsgCSAAQdwWaiICIANBAXIiBEECdGooAgAiDkECdGovAQAiByAJIAIgA0ECdGooAgAiDEECdGovAQAiAk8EQCACIAdHBEAgAyECDAILIAMhAiAAQdgoaiIDIA5qLQAAIAMgDGotAABLDQELIAQhAgsgBi8BACIEIAkgACACQQJ0akHcFmooAgAiA0ECdGovAQAiB0kEQCAFIQIMAgsCQCAEIAdHDQAgDy0AACAAIANqQdgoai0AAEsNACAFIQIMAgsgACAFQQJ0akHcFmogAzYCACACIQUgAkEBdCIDIAAoAtAoIgRMDQALCyAAIAJBAnRqQdwWaiALNgIAIAhBAk4EQCAIQQFrIQggACgC0CghBAwBCwsgACgC0CghAwNAIA0hCCAAIANBAWsiBDYC0CggACgC4BYhCyAAIAAgA0ECdGpB3BZqKAIAIg02AuAWQQEhAgJAIANBA0gNACAAIA1qQdgoaiEPQQIhAyAJIA1BAnRqIQZBASEFA0ACQCADIAROBEAgAyECDAELIAkgAEHcFmoiAiADQQFyIgRBAnRqKAIAIg5BAnRqLwEAIgcgCSACIANBAnRqKAIAIgxBAnRqLwEAIgJPBEAgAiAHRwRAIAMhAgwCCyADIQIgAEHYKGoiAyAOai0AACADIAxqLQAASw0BCyAEIQILIAYvAQAiBCAJIAAgAkECdGpB3BZqKAIAIgNBAnRqLwEAIgdJBEAgBSECDAILAkAgBCAHRw0AIA8tAAAgACADakHYKGotAABLDQAgBSECDAILIAAgBUECdGpB3BZqIAM2AgAgAiEFIAJBAXQiAyAAKALQKCIETA0ACwtBAiEDIABB3BZqIgYgAkECdGogDTYCACAAIAAoAtQoQQFrIgQ2AtQoIAAoAuAWIQIgBiAEQQJ0aiALNgIAIAAgACgC1ChBAWsiBDYC1CggBiAEQQJ0aiACNgIAIAkgCEECdGoiDiAJIAJBAnRqIgQvAQAgCSALQQJ0aiIFLwEAajsBACAAQdgoaiIMIAhqIg8gAiAMai0AACICIAsgDGotAAAiByACIAdLG0EBajoAACAEIAg7AQIgBSAIOwECIAAgCDYC4BZBASEFQQEhAgJAIAAoAtAoIgRBAkgNAANAAn8gAyADIARODQAaIAkgBiADQQFyIgRBAnRqKAIAIgtBAnRqLwEAIgIgCSAGIANBAnRqKAIAIg1BAnRqLwEAIgdPBEAgAyACIAdHDQEaIAMgCyAMai0AACAMIA1qLQAASw0BGgsgBAshAiAOLwEAIgQgCSAAIAJBAnRqQdwWaigCACIDQQJ0ai8BACIHSQRAIAUhAgwCCwJAIAQgB0cNACAPLQAAIAAgA2pB2ChqLQAASw0AIAUhAgwCCyAAIAVBAnRqQdwWaiADNgIAIAIhBSACQQF0IgMgACgC0CgiBEwNAAsLIAhBAWohDSAAIAJBAnRqQdwWaiAINgIAIAAoAtAoIgNBAUoNAAsgACAAKALUKEEBayICNgLUKCAAQdwWaiIDIAJBAnRqIAAoAuAWNgIAIAEoAgQhByABKAIIIgIoAhAhBiACKAIIIREgAigCBCETIAIoAgAhEiABKAIAIQwgAEHUFmoiAUIANwEAIABBzBZqIhRCADcBACAAQcQWaiIVQgA3AQAgAEG8FmoiFkIANwEAQQAhCCAMIAMgACgC1ChBAnRqKAIAQQJ0akEAOwECAkAgACgC1CgiAkG7BEoNACACQQFqIQJBACEOA0AgDCAAIAJBAnRqQdwWaigCACIEQQJ0Ig1qIgUgDCAFLwECQQJ0ai8BAiIDQQFqIAYgAyAGSBsiDzsBAiADIAZOIQMCQCAEIAdKDQAgACAPQQF0akG8FmoiCyALLwEAQQFqOwEAQQAhCyAEIBFOBEAgEyAEIBFrQQJ0aigCACELCyAAIAAoAqgtIAUvAQAiBCALIA9qbGo2AqgtIBJFDQAgACAAKAKsLSALIA0gEmovAQJqIARsajYCrC0LIAMgDmohDiACQQFqIgJBvQRHDQALIA5FDQAgACAGQQF0akG8FmohDwNAIAYhAgNAIAAgAiIDQQFrIgJBAXRqQbwWaiIELwEAIgVFDQALIAQgBUEBazsBACAAIANBAXRqQbwWaiICIAIvAQBBAmo7AQAgDyAPLwEAQQFrIgI7AQAgDkECSiEDIA5BAmshDiADDQALIAZFDQBBvQQhBQNAIAJB//8DcSEDIAUhAgNAIAMEQCAAIAJBAWsiAkECdGpB3BZqKAIAIgQgB0oNASAMIARBAnRqIgQvAQIiBSAGRwRAIAAgACgCqC0gBC8BACAGIAVrbGo2AqgtIAQgBjsBAgsgA0EBayEDIAIhBQwBCwsgBkEBayIGRQ0BIAAgBkEBdGpBvBZqLwEAIQIMAAsACyAKIBYvAQBBAXQiAjsBAiAKIAIgAEG+FmovAQBqQQF0IgI7AQQgCiACIABBwBZqLwEAakEBdCICOwEGIAogAiAAQcIWai8BAGpBAXQiAjsBCCAKIAIgFS8BAGpBAXQiAjsBCiAKIAIgAEHGFmovAQBqQQF0IgI7AQwgCiACIABByBZqLwEAakEBdCICOwEOIAogAiAAQcoWai8BAGpBAXQiAjsBECAKIAIgFC8BAGpBAXQiAjsBEiAKIAIgAEHOFmovAQBqQQF0IgI7ARQgCiACIABB0BZqLwEAakEBdCICOwEWIAogAiAAQdIWai8BAGpBAXQiAjsBGCAKIAEvAQAgAmpBAXQiAjsBGiAKIABB1hZqLwEAIAJqQQF0IgI7ARwgCiACIABB2BZqLwEAakEBdDsBHiAQQQBOBEADQCAJIAhBAnRqIgcvAQIiBARAIAogBEEBdGoiACAALwEAIgBBAWo7AQAgBEEDcSEDQQAhAiAEQQFrQQNPBEAgBEH8/wNxIQUDQCAAQQN2QQFxIABBAnZBAXEgAEECcSACIABBAXFyQQJ0cnJBAXRyIgRBAXQhAiAAQQR2IQAgBUEEayIFDQALCyADBEADQCACIABBAXFyIgRBAXQhAiAAQQF2IQAgA0EBayIDDQALCyAHIAQ7AQALIAggEEchACAIQQFqIQggAA0ACwsL2QgBCn8CQCAAKAKgLUUEQCAAKAK8LSEDDAELIABBuS1qIQgDQCAEQQFqIQogACgCmC0gBGotAAAhBQJAIAACfyAAKAKkLSAEQQF0ai8BACIHRQRAIAEgBUECdGoiAy8BAiEEIAAgAC8BuC0gAy8BACIFIAAoArwtIgN0ciIHOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAgsgAyAEagwBCyAFQYDNAGotAAAiC0ECdCIJQYAIciABaiIDLwEGIQQgACAALwG4LSADLwEEIgwgACgCvC0iBnRyIgM7AbgtIAACf0EQIARrIAZIBEAgACAAKAIUIgZBAWo2AhQgBiAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIGa3YiAzsBuC0gBCAGakEQawwBCyAEIAZqCyIENgK8LSALQQhrQRNNBEAgACADIAUgCUGw3ABqKAIAa0H//wNxIgYgBHRyIgM7AbgtIAACf0EQIAlBwNkAaigCACIFayAESARAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogAzoAACAAIAAoAhQiBEEBajYCFCAEIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBGt2IgM7AbgtIAQgBWpBEGsMAQsgBCAFagsiBDYCvC0LIAIgB0EBayIFIAVBB3ZBgAJqIAVBgAJJG0GAyQBqLQAAIgtBAnQiCWoiBi8BAiEHIAAgAyAGLwEAIgwgBHRyIgY7AbgtIAACf0EQIAdrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAGOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAxBECAAKAK8LSIEa3YiBjsBuC0gBCAHakEQawwBCyAEIAdqCyIDNgK8LSALQQRJDQEgACAGIAUgCUGw3QBqKAIAa0H//wNxIgUgA3RyIgc7AbgtQRAgCUHA2gBqKAIAIgRrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAHOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAoiBCAAKAKgLUkNAAsLIAFBgghqLwEAIQQgACAALwG4LSABLwGACCIKIAN0ciIFOwG4LUEQIARrIANIBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAFOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAEG5LWotAAA6AAAgACAKQRAgACgCvC0iA2t2OwG4LSAAIAMgBGpBEGs2ArwtDwsgACADIARqNgK8LQuXCwEMfyACQQBOBEBBBEEDIAEvAQIiChshBkEHQYoBIAobIQMgAEG5LWohCEF/IQcDQCAKIQkgASALIgxBAWoiC0ECdGovAQIhCgJAAkAgBUEBaiIEIANODQAgCSAKRw0AIAQhBQwBCwJAIAQgBkgEQCAAIAlBAnRqIgVB/BRqIQ0gBUH+FGohDiAAKAK8LSEFA0AgDi8BACEDIAAgAC8BuC0gDS8BACIGIAV0ciIHOwG4LSAAAn9BECADayAFSARAIAAgACgCFCIFQQFqNgIUIAUgACgCCGogBzoAACAAIAAoAhQiBUEBajYCFCAFIAAoAghqIAgtAAA6AAAgACAGQRAgACgCvC0iBWt2OwG4LSADIAVqQRBrDAELIAMgBWoLIgU2ArwtIARBAWsiBA0ACwwBCyAAAn8gCQRAAkAgByAJRgRAIAAoArwtIQMgBCEFDAELIAAgCUECdGoiBEH+FGovAQAhAyAAIAAvAbgtIARB/BRqLwEAIgYgACgCvC0iBHRyIgc7AbgtIAACf0EQIANrIARIBEAgACAAKAIUIgRBAWo2AhQgBCAAKAIIaiAHOgAAIAAgACgCFCIEQQFqNgIUIAQgACgCCGogCC0AADoAACAAIAZBECAAKAK8LSIEa3Y7AbgtIAMgBGpBEGsMAQsgAyAEagsiAzYCvC0LIAAvAbgtIAAvAbwVIgcgA3RyIQQCQEEQIAAvAb4VIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQf3/A2pB//8DcSIFIAN0ciIEOwG4LSADQQ9OBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBDmsMAgsgA0ECagwBCyAFQQlMBEAgAC8BuC0gAC8BwBUiByAAKAK8LSIDdHIhBAJAQRAgAC8BwhUiBmsgA0gEQCAAIAQ7AbgtIAAgACgCFCIDQQFqNgIUIAMgACgCCGogBDoAACAAIAAoAhQiA0EBajYCFCADIAAoAghqIAgtAAA6AAAgBiAAKAK8LSIEakEQayEDIAdBECAEa3YhBAwBCyADIAZqIQMLIAAgAzYCvC0gACAEIAVB/v8DakH//wNxIgUgA3RyIgQ7AbgtIANBDk4EQCAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAAgBUEQIAAoArwtIgNrdjsBuC0gA0ENawwCCyADQQNqDAELIAAvAbgtIAAvAcQVIgcgACgCvC0iA3RyIQQCQEEQIAAvAcYVIgZrIANIBEAgACAEOwG4LSAAIAAoAhQiA0EBajYCFCADIAAoAghqIAQ6AAAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAILQAAOgAAIAYgACgCvC0iBGpBEGshAyAHQRAgBGt2IQQMAQsgAyAGaiEDCyAAIAM2ArwtIAAgBCAFQfb/A2pB//8DcSIFIAN0ciIEOwG4LSADQQpOBEAgACAAKAIUIgNBAWo2AhQgAyAAKAIIaiAEOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogCC0AADoAACAAIAVBECAAKAK8LSIDa3Y7AbgtIANBCWsMAQsgA0EHags2ArwtC0EAIQUCfyAKRQRAQYoBIQNBAwwBC0EGQQcgCSAKRiIEGyEDQQNBBCAEGwshBiAJIQcLIAIgDEcNAAsLCwkAIAEgAmwQHAsGACABEB0LXwEBfyMAQUBqIgMkACADQQA2AjAgA0IANwMoIAMgADYCCCADIAI2AhQgAyABNgIMIAMgAUEDbDYCGCADQQhqEAcgA0EIahALIANBCGoQCCADKAIcIQEgA0FAayQAIAELBgBB1N8AC6QuAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBB2N8AKAIAIgZBECAAQQtqQXhxIABBC0kbIgRBA3YiAXYiAEEDcQRAIABBf3NBAXEgAWoiAkEDdCIDQYjgAGooAgAiAUEIaiEAAkAgASgCCCIEIANBgOAAaiIDRgRAQdjfACAGQX4gAndxNgIADAELIAQgAzYCDCADIAQ2AggLIAEgAkEDdCICQQNyNgIEIAEgAmoiASABKAIEQQFyNgIEDA0LIARB4N8AKAIAIghNDQEgAARAAkAgACABdEECIAF0IgBBACAAa3JxIgBBACAAa3FBAWsiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2aiICQQN0IgNBiOAAaigCACIBKAIIIgAgA0GA4ABqIgNGBEBB2N8AIAZBfiACd3EiBjYCAAwBCyAAIAM2AgwgAyAANgIICyABQQhqIQAgASAEQQNyNgIEIAEgBGoiAyACQQN0IgUgBGsiAkEBcjYCBCABIAVqIAI2AgAgCARAIAhBA3YiBUEDdEGA4ABqIQRB7N8AKAIAIQECfyAGQQEgBXQiBXFFBEBB2N8AIAUgBnI2AgAgBAwBCyAEKAIICyEFIAQgATYCCCAFIAE2AgwgASAENgIMIAEgBTYCCAtB7N8AIAM2AgBB4N8AIAI2AgAMDQtB3N8AKAIAIglFDQEgCUEAIAlrcUEBayIAIABBDHZBEHEiAHYiAUEFdkEIcSICIAByIAEgAnYiAEECdkEEcSIBciAAIAF2IgBBAXZBAnEiAXIgACABdiIAQQF2QQFxIgFyIAAgAXZqQQJ0QYjiAGooAgAiAygCBEF4cSAEayEBIAMhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAEayICIAEgASACSyICGyEBIAAgAyACGyEDIAAhAgwBCwsgAyAEaiILIANNDQIgAygCGCEKIAMgAygCDCIFRwRAIAMoAggiAEHo3wAoAgBJGiAAIAU2AgwgBSAANgIIDAwLIANBFGoiAigCACIARQRAIAMoAhAiAEUNBCADQRBqIQILA0AgAiEHIAAiBUEUaiICKAIAIgANACAFQRBqIQIgBSgCECIADQALIAdBADYCAAwLC0F/IQQgAEG/f0sNACAAQQtqIgBBeHEhBEHc3wAoAgAiCEUNAEEfIQcgBEH///8HTQRAIABBCHYiACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAEIABBFWp2QQFxckEcaiEHC0EAIARrIQECQAJAAkAgB0ECdEGI4gBqKAIAIgJFBEBBACEADAELQQAhACAEQQBBGSAHQQF2ayAHQR9GG3QhAwNAAkAgAigCBEF4cSAEayIGIAFPDQAgAiEFIAYiAQ0AQQAhASACIQAMAwsgACACKAIUIgYgBiACIANBHXZBBHFqKAIQIgJGGyAAIAYbIQAgA0EBdCEDIAINAAsLIAAgBXJFBEBBAiAHdCIAQQAgAGtyIAhxIgBFDQMgAEEAIABrcUEBayIAIABBDHZBEHEiAHYiAkEFdkEIcSIDIAByIAIgA3YiAEECdkEEcSICciAAIAJ2IgBBAXZBAnEiAnIgACACdiIAQQF2QQFxIgJyIAAgAnZqQQJ0QYjiAGooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIARrIgYgAUkhAyAGIAEgAxshASAAIAUgAxshBSAAKAIQIgIEfyACBSAAKAIUCyIADQALCyAFRQ0AIAFB4N8AKAIAIARrTw0AIAQgBWoiByAFTQ0BIAUoAhghCSAFIAUoAgwiA0cEQCAFKAIIIgBB6N8AKAIASRogACADNgIMIAMgADYCCAwKCyAFQRRqIgIoAgAiAEUEQCAFKAIQIgBFDQQgBUEQaiECCwNAIAIhBiAAIgNBFGoiAigCACIADQAgA0EQaiECIAMoAhAiAA0ACyAGQQA2AgAMCQsgBEHg3wAoAgAiAE0EQEHs3wAoAgAhAQJAIAAgBGsiAkEQTwRAQeDfACACNgIAQezfACABIARqIgM2AgAgAyACQQFyNgIEIAAgAWogAjYCACABIARBA3I2AgQMAQtB7N8AQQA2AgBB4N8AQQA2AgAgASAAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIECyABQQhqIQAMCwsgBEHk3wAoAgAiA0kEQEHk3wAgAyAEayIBNgIAQfDfAEHw3wAoAgAiACAEaiICNgIAIAIgAUEBcjYCBCAAIARBA3I2AgQgAEEIaiEADAsLQQAhACAEQS9qIggCf0Gw4wAoAgAEQEG44wAoAgAMAQtBvOMAQn83AgBBtOMAQoCggICAgAQ3AgBBsOMAIAxBDGpBcHFB2KrVqgVzNgIAQcTjAEEANgIAQZTjAEEANgIAQYAgCyIBaiIGQQAgAWsiB3EiBSAETQ0KQZDjACgCACIBBEBBiOMAKAIAIgIgBWoiCSACTQ0LIAEgCUkNCwtBlOMALQAAQQRxDQUCQAJAQfDfACgCACIBBEBBmOMAIQADQCABIAAoAgAiAk8EQCACIAAoAgRqIAFLDQMLIAAoAggiAA0ACwtBABAeIgNBf0YNBiAFIQZBtOMAKAIAIgBBAWsiASADcQRAIAUgA2sgASADakEAIABrcWohBgsgBCAGTw0GIAZB/v///wdLDQZBkOMAKAIAIgAEQEGI4wAoAgAiASAGaiICIAFNDQcgACACSQ0HCyAGEB4iACADRw0BDAgLIAYgA2sgB3EiBkH+////B0sNBSAGEB4iAyAAKAIAIAAoAgRqRg0EIAMhAAsCQCAEQTBqIAZNDQAgAEF/Rg0AQbjjACgCACIBIAggBmtqQQAgAWtxIgFB/v///wdLBEAgACEDDAgLIAEQHkF/RwRAIAEgBmohBiAAIQMMCAtBACAGaxAeGgwFCyAAIQMgAEF/Rw0GDAQLAAtBACEFDAcLQQAhAwwFCyADQX9HDQILQZTjAEGU4wAoAgBBBHI2AgALIAVB/v///wdLDQEgBRAeIgNBABAeIgBPDQEgA0F/Rg0BIABBf0YNASAAIANrIgYgBEEoak0NAQtBiOMAQYjjACgCACAGaiIANgIAQYzjACgCACAASQRAQYzjACAANgIACwJAAkACQEHw3wAoAgAiAQRAQZjjACEAA0AgAyAAKAIAIgIgACgCBCIFakYNAiAAKAIIIgANAAsMAgtB6N8AKAIAIgBBACAAIANNG0UEQEHo3wAgAzYCAAtBACEAQZzjACAGNgIAQZjjACADNgIAQfjfAEF/NgIAQfzfAEGw4wAoAgA2AgBBpOMAQQA2AgADQCAAQQN0IgFBiOAAaiABQYDgAGoiAjYCACABQYzgAGogAjYCACAAQQFqIgBBIEcNAAtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiAWsiAjYCAEHw3wAgASADaiIBNgIAIAEgAkEBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCAAwCCyABIANPDQAgASACSQ0AIAAoAgxBCHENACAAIAUgBmo2AgRB8N8AIAFBeCABa0EHcUEAIAFBCGpBB3EbIgBqIgI2AgBB5N8AQeTfACgCACAGaiIDIABrIgA2AgAgAiAAQQFyNgIEIAEgA2pBKDYCBEH03wBBwOMAKAIANgIADAELQejfACgCACADSwRAQejfACADNgIACyADIAZqIQJBmOMAIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQZjjACEAA0AgASAAKAIAIgJPBEAgAiAAKAIEaiICIAFLDQMLIAAoAgghAAwACwALIAAgAzYCACAAIAAoAgQgBmo2AgQgA0F4IANrQQdxQQAgA0EIakEHcRtqIgcgBEEDcjYCBCACQXggAmtBB3FBACACQQhqQQdxG2oiBiAHayAEayECIAQgB2ohBCABIAZGBEBB8N8AIAQ2AgBB5N8AQeTfACgCACACaiIANgIAIAQgAEEBcjYCBAwDCyAGQezfACgCAEYEQEHs3wAgBDYCAEHg3wBB4N8AKAIAIAJqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwDCyAGKAIEIgBBA3FBAUYEQCAAQXhxIQgCQCAAQf8BTQRAIAYoAggiASAAQQN2IgVBA3RBgOAAakYaIAEgBigCDCIARgRAQdjfAEHY3wAoAgBBfiAFd3E2AgAMAgsgASAANgIMIAAgATYCCAwBCyAGKAIYIQkCQCAGIAYoAgwiA0cEQCAGKAIIIgAgAzYCDCADIAA2AggMAQsCQCAGQRRqIgAoAgAiAQ0AIAZBEGoiACgCACIBDQBBACEDDAELA0AgACEFIAEiA0EUaiIAKAIAIgENACADQRBqIQAgAygCECIBDQALIAVBADYCAAsgCUUNAAJAIAYgBigCHCIBQQJ0QYjiAGoiACgCAEYEQCAAIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAGRhtqIAM2AgAgA0UNAQsgAyAJNgIYIAYoAhAiAARAIAMgADYCECAAIAM2AhgLIAYoAhQiAEUNACADIAA2AhQgACADNgIYCyAGIAhqIQYgAiAIaiECCyAGIAYoAgRBfnE2AgQgBCACQQFyNgIEIAIgBGogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGA4ABqIQACf0HY3wAoAgAiAkEBIAF0IgFxRQRAQdjfACABIAJyNgIAIAAMAQsgACgCCAshASAAIAQ2AgggASAENgIMIAQgADYCDCAEIAE2AggMAwtBHyEAIAJB////B00EQCACQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgEgAUGA4B9qQRB2QQRxIgF0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAXIgA3JrIgBBAXQgAiAAQRVqdkEBcXJBHGohAAsgBCAANgIcIARCADcCECAAQQJ0QYjiAGohAQJAQdzfACgCACIDQQEgAHQiBXFFBEBB3N8AIAMgBXI2AgAgASAENgIAIAQgATYCGAwBCyACQQBBGSAAQQF2ayAAQR9GG3QhACABKAIAIQMDQCADIgEoAgRBeHEgAkYNAyAAQR12IQMgAEEBdCEAIAEgA0EEcWpBEGoiBSgCACIDDQALIAUgBDYCACAEIAE2AhgLIAQgBDYCDCAEIAQ2AggMAgtB5N8AIAZBKGsiAEF4IANrQQdxQQAgA0EIakEHcRsiBWsiBzYCAEHw3wAgAyAFaiIFNgIAIAUgB0EBcjYCBCAAIANqQSg2AgRB9N8AQcDjACgCADYCACABIAJBJyACa0EHcUEAIAJBJ2tBB3EbakEvayIAIAAgAUEQakkbIgVBGzYCBCAFQaDjACkCADcCECAFQZjjACkCADcCCEGg4wAgBUEIajYCAEGc4wAgBjYCAEGY4wAgAzYCAEGk4wBBADYCACAFQRhqIQADQCAAQQc2AgQgAEEIaiEDIABBBGohACACIANLDQALIAEgBUYNAyAFIAUoAgRBfnE2AgQgASAFIAFrIgZBAXI2AgQgBSAGNgIAIAZB/wFNBEAgBkEDdiICQQN0QYDgAGohAAJ/QdjfACgCACIDQQEgAnQiAnFFBEBB2N8AIAIgA3I2AgAgAAwBCyAAKAIICyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCAwEC0EfIQAgAUIANwIQIAZB////B00EQCAGQQh2IgAgAEGA/j9qQRB2QQhxIgB0IgIgAkGA4B9qQRB2QQRxIgJ0IgMgA0GAgA9qQRB2QQJxIgN0QQ92IAAgAnIgA3JrIgBBAXQgBiAAQRVqdkEBcXJBHGohAAsgASAANgIcIABBAnRBiOIAaiECAkBB3N8AKAIAIgNBASAAdCIFcUUEQEHc3wAgAyAFcjYCACACIAE2AgAgASACNgIYDAELIAZBAEEZIABBAXZrIABBH0YbdCEAIAIoAgAhAwNAIAMiAigCBEF4cSAGRg0EIABBHXYhAyAAQQF0IQAgAiADQQRxakEQaiIFKAIAIgMNAAsgBSABNgIAIAEgAjYCGAsgASABNgIMIAEgATYCCAwDCyABKAIIIgAgBDYCDCABIAQ2AgggBEEANgIYIAQgATYCDCAEIAA2AggLIAdBCGohAAwFCyACKAIIIgAgATYCDCACIAE2AgggAUEANgIYIAEgAjYCDCABIAA2AggLQeTfACgCACIAIARNDQBB5N8AIAAgBGsiATYCAEHw3wBB8N8AKAIAIgAgBGoiAjYCACACIAFBAXI2AgQgACAEQQNyNgIEIABBCGohAAwDC0HU3wBBMDYCAEEAIQAMAgsCQCAJRQ0AAkAgBSgCHCICQQJ0QYjiAGoiACgCACAFRgRAIAAgAzYCACADDQFB3N8AIAhBfiACd3EiCDYCAAwCCyAJQRBBFCAJKAIQIAVGG2ogAzYCACADRQ0BCyADIAk2AhggBSgCECIABEAgAyAANgIQIAAgAzYCGAsgBSgCFCIARQ0AIAMgADYCFCAAIAM2AhgLAkAgAUEPTQRAIAUgASAEaiIAQQNyNgIEIAAgBWoiACAAKAIEQQFyNgIEDAELIAUgBEEDcjYCBCAHIAFBAXI2AgQgASAHaiABNgIAIAFB/wFNBEAgAUEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACICQQEgAXQiAXFFBEBB2N8AIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBzYCCCABIAc2AgwgByAANgIMIAcgATYCCAwBC0EfIQAgAUH///8HTQRAIAFBCHYiACAAQYD+P2pBEHZBCHEiAHQiAiACQYDgH2pBEHZBBHEiAnQiBCAEQYCAD2pBEHZBAnEiBHRBD3YgACACciAEcmsiAEEBdCABIABBFWp2QQFxckEcaiEACyAHIAA2AhwgB0IANwIQIABBAnRBiOIAaiECAkACQCAIQQEgAHQiBHFFBEBB3N8AIAQgCHI2AgAgAiAHNgIAIAcgAjYCGAwBCyABQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQQDQCAEIgIoAgRBeHEgAUYNAiAAQR12IQQgAEEBdCEAIAIgBEEEcWpBEGoiAygCACIEDQALIAMgBzYCACAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIICyAFQQhqIQAMAQsCQCAKRQ0AAkAgAygCHCICQQJ0QYjiAGoiACgCACADRgRAIAAgBTYCACAFDQFB3N8AIAlBfiACd3E2AgAMAgsgCkEQQRQgCigCECADRhtqIAU2AgAgBUUNAQsgBSAKNgIYIAMoAhAiAARAIAUgADYCECAAIAU2AhgLIAMoAhQiAEUNACAFIAA2AhQgACAFNgIYCwJAIAFBD00EQCADIAEgBGoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARBA3I2AgQgCyABQQFyNgIEIAEgC2ogATYCACAIBEAgCEEDdiIEQQN0QYDgAGohAkHs3wAoAgAhAAJ/QQEgBHQiBCAGcUUEQEHY3wAgBCAGcjYCACACDAELIAIoAggLIQQgAiAANgIIIAQgADYCDCAAIAI2AgwgACAENgIIC0Hs3wAgCzYCAEHg3wAgATYCAAsgA0EIaiEACyAMQRBqJAAgAAvMDAEHfwJAIABFDQAgAEEIayICIABBBGsoAgAiAUF4cSIAaiEFAkAgAUEBcQ0AIAFBA3FFDQEgAiACKAIAIgFrIgJB6N8AKAIASQ0BIAAgAWohACACQezfACgCAEcEQCABQf8BTQRAIAIoAggiBCABQQN2IgdBA3RBgOAAakYaIAQgAigCDCIBRgRAQdjfAEHY3wAoAgBBfiAHd3E2AgAMAwsgBCABNgIMIAEgBDYCCAwCCyACKAIYIQYCQCACIAIoAgwiA0cEQCACKAIIIgEgAzYCDCADIAE2AggMAQsCQCACQRRqIgEoAgAiBA0AIAJBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAQJAIAIgAigCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAwsgBkEQQRQgBigCECACRhtqIAM2AgAgA0UNAgsgAyAGNgIYIAIoAhAiAQRAIAMgATYCECABIAM2AhgLIAIoAhQiAUUNASADIAE2AhQgASADNgIYDAELIAUoAgQiAUEDcUEDRw0AQeDfACAANgIAIAUgAUF+cTYCBCACIABBAXI2AgQgACACaiAANgIADwsgAiAFTw0AIAUoAgQiAUEBcUUNAAJAIAFBAnFFBEAgBUHw3wAoAgBGBEBB8N8AIAI2AgBB5N8AQeTfACgCACAAaiIANgIAIAIgAEEBcjYCBCACQezfACgCAEcNA0Hg3wBBADYCAEHs3wBBADYCAA8LIAVB7N8AKAIARgRAQezfACACNgIAQeDfAEHg3wAoAgAgAGoiADYCACACIABBAXI2AgQgACACaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIIIgQgAUEDdiIHQQN0QYDgAGpGGiAEIAUoAgwiAUYEQEHY3wBB2N8AKAIAQX4gB3dxNgIADAILIAQgATYCDCABIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgNHBEAgBSgCCCIBQejfACgCAEkaIAEgAzYCDCADIAE2AggMAQsCQCAFQRRqIgEoAgAiBA0AIAVBEGoiASgCACIEDQBBACEDDAELA0AgASEHIAQiA0EUaiIBKAIAIgQNACADQRBqIQEgAygCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIEQQJ0QYjiAGoiASgCAEYEQCABIAM2AgAgAw0BQdzfAEHc3wAoAgBBfiAEd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAM2AgAgA0UNAQsgAyAGNgIYIAUoAhAiAQRAIAMgATYCECABIAM2AhgLIAUoAhQiAUUNACADIAE2AhQgASADNgIYCyACIABBAXI2AgQgACACaiAANgIAIAJB7N8AKAIARw0BQeDfACAANgIADwsgBSABQX5xNgIEIAIgAEEBcjYCBCAAIAJqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QYDgAGohAAJ/QdjfACgCACIEQQEgAXQiAXFFBEBB2N8AIAEgBHI2AgAgAAwBCyAAKAIICyEBIAAgAjYCCCABIAI2AgwgAiAANgIMIAIgATYCCA8LQR8hASACQgA3AhAgAEH///8HTQRAIABBCHYiASABQYD+P2pBEHZBCHEiAXQiBCAEQYDgH2pBEHZBBHEiBHQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASAEciADcmsiAUEBdCAAIAFBFWp2QQFxckEcaiEBCyACIAE2AhwgAUECdEGI4gBqIQQCQAJAAkBB3N8AKAIAIgNBASABdCIFcUUEQEHc3wAgAyAFcjYCACAEIAI2AgAgAiAENgIYDAELIABBAEEZIAFBAXZrIAFBH0YbdCEBIAQoAgAhAwNAIAMiBCgCBEF4cSAARg0CIAFBHXYhAyABQQF0IQEgBCADQQRxakEQaiIFKAIAIgMNAAsgBSACNgIAIAIgBDYCGAsgAiACNgIMIAIgAjYCCAwBCyAEKAIIIgAgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAA2AggLQfjfAEH43wAoAgBBAWsiAkF/IAIbNgIACwtVAQJ/QdDfACgCACIBIABBA2pBfHEiAmohAAJAIAJBAU5BACAAIAFNGw0APwBBEHQgAEkEQCAAEABFDQELQdDfACAANgIAIAEPC0HU3wBBMDYCAEF/C4IEAQN/IAJBgARPBEAgACABIAIQARogAA8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCACQQFIBEAgACECDAELIABBA3FFBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANPDQEgAkEDcQ0ACwsCQCADQXxxIgRBwABJDQAgAiAEQUBqIgVLDQADQCACIAEoAgA2AgAgAiABKAIENgIEIAIgASgCCDYCCCACIAEoAgw2AgwgAiABKAIQNgIQIAIgASgCFDYCFCACIAEoAhg2AhggAiABKAIcNgIcIAIgASgCIDYCICACIAEoAiQ2AiQgAiABKAIoNgIoIAIgASgCLDYCLCACIAEoAjA2AjAgAiABKAI0NgI0IAIgASgCODYCOCACIAEoAjw2AjwgAUFAayEBIAJBQGsiAiAFTQ0ACwsgAiAETw0BA0AgAiABKAIANgIAIAFBBGohASACQQRqIgIgBEkNAAsMAQsgA0EESQRAIAAhAgwBCyAAIANBBGsiBEsEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAIgAS0AAToAASACIAEtAAI6AAIgAiABLQADOgADIAFBBGohASACQQRqIgIgBE0NAAsLIAIgA0kEQANAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANHDQALCyAAC9YCAQJ/AkAgAUUNACAAIAFqIgJBAWtBADoAACAAQQA6AAAgAUEDSQ0AIAJBAmtBADoAACAAQQA6AAEgAkEDa0EAOgAAIABBADoAAiABQQdJDQAgAkEEa0EAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgNqIgJBADYCACACIAEgA2tBfHEiA2oiAUEEa0EANgIAIANBCUkNACACQQA2AgggAkEANgIEIAFBCGtBADYCACABQQxrQQA2AgAgA0EZSQ0AIAJBADYCGCACQQA2AhQgAkEANgIQIAJBADYCDCABQRBrQQA2AgAgAUEUa0EANgIAIAFBGGtBADYCACABQRxrQQA2AgAgAyACQQRxQRhyIgNrIgFBIEkNACACIANqIQIDQCACQgA3AxggAkIANwMQIAJCADcDCCACQgA3AwAgAkEgaiECIAFBIGsiAUEfSw0ACwsLBAAjAAsGACAAJAALEAAjACAAa0FwcSIAJAAgAAsLvVYIAEGECAvxQJYwB3csYQ7uulEJmRnEbQeP9GpwNaVj6aOVZJ4yiNsOpLjceR7p1eCI2dKXK0y2Cb18sX4HLbjnkR2/kGQQtx3yILBqSHG5895BvoR91Noa6+TdbVG11PTHhdODVphsE8Coa2R6+WL97Mllik9cARTZbAZjYz0P+vUNCI3IIG47XhBpTORBYNVycWei0eQDPEfUBEv9hQ3Sa7UKpfqotTVsmLJC1sm720D5vKzjbNgydVzfRc8N1txZPdGrrDDZJjoA3lGAUdfIFmHQv7X0tCEjxLNWmZW6zw+lvbieuAIoCIgFX7LZDMYk6Quxh3xvLxFMaFirHWHBPS1mtpBB3HYGcdsBvCDSmCoQ1e+JhbFxH7W2BqXkv58z1LjooskHeDT5AA+OqAmWGJgO4bsNan8tPW0Il2xkkQFcY+b0UWtrYmFsHNgwZYVOAGLy7ZUGbHulARvB9AiCV8QP9cbZsGVQ6bcS6ri+i3yIufzfHd1iSS3aFfN804xlTNT7WGGyTc5RtTp0ALyj4jC71EGl30rXldg9bcTRpPv01tNq6WlD/NluNEaIZ63QuGDacy0EROUdAzNfTAqqyXwN3TxxBVCqQQInEBALvoYgDMkltWhXs4VvIAnUZrmf5GHODvneXpjJ2SkimNCwtKjXxxc9s1mBDbQuO1y9t61susAgg7jttrO/mgzitgOa0rF0OUfV6q930p0VJtsEgxbccxILY+OEO2SUPmptDahaanoLzw7knf8JkyeuAAqxngd9RJMP8NKjCIdo8gEe/sIGaV1XYvfLZ2WAcTZsGecGa252G9T+4CvTiVp62hDMSt1nb9+5+fnvvo5DvrcX1Y6wYOij1tZ+k9GhxMLYOFLy30/xZ7vRZ1e8pt0GtT9LNrJI2isN2EwbCq/2SgM2YHoEQcPvYN9V32eo745uMXm+aUaMs2HLGoNmvKDSbyU24mhSlXcMzANHC7u5FgIiLyYFVb47usUoC72yklq0KwRqs1yn/9fCMc/QtYue2Swdrt5bsMJkmybyY+yco2p1CpNtAqkGCZw/Ng7rhWcHchNXAAWCSr+VFHq44q4rsXs4G7YMm47Skg2+1eW379x8Id/bC9TS04ZC4tTx+LPdaG6D2h/NFr6BWya59uF3sG93R7cY5loIiHBqD//KOwZmXAsBEf+eZY9prmL40/9rYUXPbBZ44gqg7tIN11SDBE7CswM5YSZnp/cWYNBNR2lJ23duPkpq0a7cWtbZZgvfQPA72DdTrrypxZ673n/Pskfp/7UwHPK9vYrCusowk7NTpqO0JAU20LqTBtfNKVfeVL9n2SMuemazuEphxAIbaF2UK28qN74LtKGODMMb3wVaje8CLQAAAABBMRsZgmI2MsNTLSsExWxkRfR3fYanWlbHlkFPCIrZyEm7wtGK6O/6y9n04wxPtaxNfq61ji2Dns8cmIdREsJKECPZU9Nw9HiSQe9hVdeuLhTmtTfXtZgcloSDBVmYG4IYqQCb2/otsJrLNqldXXfmHGxs/98/QdSeDlrNoiSEleMVn4wgRrKnYXepvqbh6PHn0PPoJIPew2Wyxdqqrl1d659GRCjMa29p/XB2rmsxOe9aKiAsCQcLbTgcEvM2Rt+yB13GcVRw7TBla/T38yq7tsIxonWRHIk0oAeQ+7yfF7qNhA553qklOO+yPP9583O+SOhqfRvFQTwq3lgFT3nwRH5i6YctT8LGHFTbAYoVlEC7Do2D6COmwtk4vw3FoDhM9Lshj6eWCs6WjRMJAMxcSDHXRYti+m7KU+F3VF27uhVsoKPWP42Ilw6WkVCY194RqczH0vrh7JPL+vVc12JyHeZ5a961VECfhE9ZWBIOFhkjFQ/acDgkm0EjPadr/WXmWuZ8JQnLV2Q40E6jrpEB4p+KGCHMpzNg/bwqr+Ekre7QP7QtgxKfbLIJhqskSMnqFVPQKUZ++2h3ZeL2eT8vt0gkNnQbCR01KhIE8rxTS7ONSFJw3mV5Me9+YP7z5ue/wv3+fJHQ1T2gy8z6NoqDuweRmnhUvLE5ZaeoS5iDOwqpmCLJ+rUJiMuuEE9d718ObPRGzT/ZbYwOwnRDElrzAiNB6sFwbMGAQXfYR9c2lwbmLY7FtQClhIQbvBqKQXFbu1pomOh3Q9nZbFoeTy0VX342DJwtGyfdHAA+EgCYuVMxg6CQYq6L0VO1khbF9N1X9O/ElKfC79WW2fbpvAeuqI0ct2veMZwq7yqF7XlryqxIcNNvG134LipG4eE23magB8V/Y1ToVCJl803l87ICpMKpG2eRhDAmoJ8puK7F5Pmf3v06zPPWe/3oz7xrqYD9WrKZPgmfsn84hKuwJBws8RUHNTJGKh5zdzEHtOFwSPXQa1E2g0Z6d7JdY07X+ssP5uHSzLXM+Y2E1+BKEpavCyONtshwoJ2JQbuERl0jAwdsOBrEPxUxhQ4OKEKYT2cDqVR+wPp5VYHLYkwfxTiBXvQjmJ2nDrPclhWqGwBU5VoxT/yZYmLX2FN5zhdP4UlWfvpQlS3Xe9QczGITio0tUruWNJHoux/Q2aAG7PN+Xq3CZUdukUhsL6BTdeg2EjqpBwkjalQkCCtlPxHkeaeWpUi8j2YbkaQnKoq94LzL8qGN0Oti3v3AI+/m2b3hvBT80KcNP4OKJn6ykT+5JNBw+BXLaTtG5kJ6d/1btWtl3PRafsU3CVPudjhI97GuCbjwnxKhM8w/inL9JJMAAAAAN2rCAW7UhANZvkYC3KgJB+vCywayfI0EhRZPBbhREw6PO9EP1oWXDeHvVQxk+RoJU5PYCAotngo9R1wLcKMmHEfJ5B0ed6IfKR1gHqwLLxubYe0awt+rGPW1aRnI8jUS/5j3E6YmsRGRTHMQFFo8FSMw/hR6jrgWTeR6F+BGTTjXLI85jpLJO7n4Czo87kQ/C4SGPlI6wDxlUAI9WBdeNm99nDc2w9o1AakYNIS/VzGz1ZUw6mvTMt0BETOQ5Wskp4+pJf4x7yfJWy0mTE1iI3snoCIimeYgFfMkISi0eCof3rorRmD8KXEKPij0HHEtw3azLJrI9S6tojcvwI2acPfnWHGuWR5zmTPcchwlk3crT1F2cvEXdEWb1XV43Il+T7ZLfxYIDX0hYs98pHSAeZMeQnjKoAR6/crGe7AuvGyHRH5t3vo4b+mQ+m5shrVrW+x3agJSMWg1OPNpCH+vYj8VbWNmqythUcHpYNTXpmXjvWRkugMiZo1p4Gcgy9dIF6EVSU4fU0t5dZFK/GPeT8sJHE6St1pMpd2YTZiaxEav8AZH9k5ARcEkgkREMs1Bc1gPQCrmSUIdjItDUGjxVGcCM1U+vHVXCda3VozA+FO7qjpS4hR8UNV+vlHoOeJa31MgW4btZlmxh6RYNJHrXQP7KVxaRW9ebS+tX4AbNeG3cffg7s+x4tmlc+Ncszzma9n+5zJnuOUFDXrkOEom7w8g5O5WnqLsYfRg7eTiL+jTiO3pijar671caerwuBP9x9LR/J5sl/6pBlX/LBAa+ht62PtCxJ75da5c+EjpAPN/g8LyJj2E8BFXRvGUQQn0oyvL9fqVjffN/0/2YF142Vc3utgOifzaOeM+27z1cd6Ln7Pf0iH13eVLN9zYDGvX72ap1rbY79SBsi3VBKRi0DPOoNFqcObTXRok0hD+XsUnlJzEfiraxklAGMfMVlfC+zyVw6KC08GV6BHAqK9Ny5/Fj8rGe8nI8RELyXQHRMxDbYbNGtPAzy25As5Alq+Rd/xtkC5CK5IZKOmTnD6mlqtUZJfy6iKVxYDglPjHvJ/PrX6elhM4nKF5+p0kb7WYEwV3mUq7MZt90fOaMDWJjQdfS4xe4Q2OaYvPj+ydgIrb90KLgkkEibUjxoiIZJqDvw5YguawHoDR2tyBVMyThGOmUYU6GBeHDXLVhqDQ4qmXuiCozgRmqvlupKt8eOuuSxIprxKsb60lxq2sGIHxpy/rM6Z2VXWkQT+3pcQp+KDzQzqhqv18o52XvqLQc8S15xkGtL6nQLaJzYK3DNvNsjuxD7NiD0mxVWWLsGgi17tfSBW6BvZTuDGckbm0it68g+AcvdpeWr/tNJi+AAAAAGVnvLiLyAmq7q+1EleXYo8y8N433F9rJbk4153vKLTFik8IfWTgvW8BhwHXuL/WSt3YavIzd9/gVhBjWJ9XGVD6MKXoFJ8Q+nH4rELIwHvfrafHZ0MIcnUmb87NcH+tlRUYES37t6Q/ntAYhyfozxpCj3OirCDGsMlHegg+rzKgW8iOGLVnOwrQAIeyaThQLwxf7Jfi8FmFh5flPdGHhmW04DrdWk+Pzz8oM3eGEOTq43dYUg3Y7UBov1H4ofgr8MSfl0gqMCJaT1ee4vZvSX+TCPXHfadA1RjA/G1O0J81K7cjjcUYlp+gfyonGUf9unwgQQKSj/QQ9+hIqD1YFJtYP6gjtpAdMdP3oYlqz3YUD6jKrOEHf76EYMMG0nCgXrcXHOZZuKn0PN8VTIXnwtHggH5pDi/Le2tId8OiDw3Lx2ixcynHBGFMoLjZ9ZhvRJD/0/x+UGbuGzfaVk0nuQ4oQAW2xu+wpKOIDBwasNuBf9dnOZF40iv0H26TA/cmO2aQmoOIPy+R7ViTKVRgRLQxB/gM36hNHrrP8abs35L+ibguRmcXm1QCcCfsu0jwcd4vTMkwgPnbVedFY5ygP2v5x4PTF2g2wXIPinnLN13krlDhXED/VE4lmOj2c4iLrhbvNxb4QIIEnSc+vCQf6SFBeFWZr9fgi8qwXDM7tlntXtHlVbB+UEfVGez/bCE7YglGh9rn6TLIgo6OcNSe7Six+VGQX1bkgjoxWDqDCY+n5m4zHwjBhg1tpjq1pOFAvcGG/AUvKUkXSk71r/N2IjKWEZ6KeL4rmB3ZlyBLyfR4Lq5IwMAB/dKlZkFqHF6W93k5Kk+Xlp9d8vEj5QUZa01gftf1jtFi5+u23l9SjgnCN+m1etlGAGi8IbzQ6jHfiI9WYzBh+dYiBJ5qmr2mvQfYwQG/Nm60rVMJCBWaTnId/ynOpRGGe7d04ccPzdkQkqi+rCpGERk4I3algHVmxtgQAXpg/q7PcpvJc8oi8aRXR5YY76k5rf3MXhFFBu5NdmOJ8c6NJkTc6EH4ZFF5L/k0HpNB2rEmU7/WmuvpxvmzjKFFC2IO8BkHaUyhvlGbPNs2J4Q1mZKWUP4uLpm5VCb83uieEnFdjHcW4TTOLjapq0mKEUXmPwMggYO7dpHg4xP2XFv9WelJmD5V8SEGgmxEYT7Uqs6Lxs+pN344QX/WXSbDbrOJdnzW7srEb9YdWQqxoeHkHhTzgXmoS9dpyxOyDnerXKHCuTnGfgGA/qmc5ZkVJAs2oDZuURyOpxZmhsJx2j4s3m8sSbnTlPCBBAmV5rixe0kNox4usRtIPtJDLVlu+8P22+mmkWdRH6mwzHrODHSUYblm8QYF3gAAAAB3BzCW7g5hLJkJUboHbcQZcGr0j+ljpTWeZJWjDtuIMnncuKTg1ekel9LZiAm2TCt+sXy957gtB5C/HZEdtxBkarAg8vO5cUiEvkHeGtrUfW3d5Ov01LVRg9OFxxNsmFZka6jA/WL5eoplyewUAVxPYwZs2foPPWONCA31O24gyExpEF7VYEHkomdxcjwD5NFLBNRH0g2F/aUKtWs1taj6QrKYbNu7ydasvPlAMths40XfXHXc1g3Pq9E9WSbZMKxR3gA6yNdRgL/QYRYhtPS1VrPEI8+6lZm4vaUPKAK4nl8FiAjGDNmysQvpJC9vfIdYaEwRwWEdq7ZmLT123EGQAdtxBpjSILzv1RAqcbGFiQa2tR+fv+Sl6LjUM3gHyaIPAPk0lgmojuEOmBh/ag27CG09LZFkbJfmY1wBa2tR9BxsYWKFZTDY8mIATmwGle0bAaV7ggj0wfUPxFdlsNnGErfpUIu+uOr8uYh8Yt0d3xXaLUmM03zz+9RMZU2yYVg6tVHOo7wAdNS7MOJK36VBPdiV16TRxG3T1vT7Q2npajRu2fytZ4hG2mC40EQELXMzAx3lqgpMX90NfMlQBXE8JwJBqr4LEBDJDCCGV2i1JSBvhbO5ZtQJzmHkn17e+Q4p2cmYsNCYIsfXqLRZsz0XLrQNgbe9XDvAumyt7biDIJq/s7YDtuIMdLHSmurVRzmd0nevBNsmFXPcFoPjYwsSlGQ7hA1taj56alqo5A7PC5MJ/50KAK4nfQeesfAPk0SHCKPSHgHyaGkGwv73YlddgGVnyxlsNnFuawbn/tQbdonTK+AQ2npaZ91KzPm532+Ovu/5F7e+Q2CwjtXW1qPoodGTfjjYwsRP3/JS0btn8aa8V2c/tQbdSLI2S9gNK9qvChtMNgNK9kEEemDfYO/DqGffVTFuju9Gab55y2GzjLxmgxolb9KgUmjiNswMd5W7C0cDIgIWuVUFJi/Fuju+sr0LKCu0WpJcs2oEwtf/p7XQzzEs2Z6LW96uHZtkwrDsY/ImdWqjnAJtkwqcCQap6w42P3IHZ4UFAFcTlb9KguK4ehR7sSuuDLYbOJLSjpvl1b4NfNzvtwvb3yGG09LU8dTiQmjds/gf2oNugb4Wzfa5JltvsHfhGLdHd4gIWub/D2pwZgY7yhEBC1yPZZ7/+GKuaWFr/9MWbM9FoArieNcN0u5OBINUOQOzwqdnJmHQYBb3SWlHTT5ud9uu0WpK2dZa3EDfC2Y32DvwqbyuU967nsVHss9/MLX/6b298hzKusKKU7OTMCS0o6a60DYFzdcGk1TeVykj2We/s2Z6LsRhSrhdaBsCKm8rlLQLvjfDDI6hWgXfGy0C740AAAAAGRsxQTI2YoIrLVPDZGzFBH139EVWWqeGT0GWx8jZigjRwrtJ+u/oiuP02custU8Mta5+TZ6DLY6HmBzPSsISUVPZIxB49HDTYe9Bki6u11U3teYUHJi11wWDhJaCG5hZmwCpGLAt+tupNsua5nddXf9sbBzUQT/fzVoOnpWEJKKMnxXjp7JGIL6pd2Hx6OGm6PPQ58PegyTaxbJlXV2uqkRGn+tva8wodnD9aTkxa64gKlrvCwcJLBIcOG3fRjbzxl0Hsu1wVHH0a2Uwuyrz96IxwraJHJF1kAegNBefvPsOhI26JaneeTyy7zhz83n/auhIvkHFG31Y3io88HlPBelifkTCTy2H21QcxpQVigGNDrtApiPog7842cI4oMUNIbv0TAqWp48TjZbOXMwACUXXMUhu+mKLd+FTyrq7XVSjoGwViI0/1pGWDpfe15hQx8ypEezh+tL1+suTcmLXXGt55h1AVLXeWU+EnxYOElgPFSMZJDhw2j0jQZtl/WunfOZa5lfLCSVO0DhkAZGuoxiKn+Izp8whKrz9YK0k4a+0P9DunxKDLYYJsmzJSCSr0FMV6vt+RiniZXdoLz959jYkSLcdCRt0BBIqNUtTvPJSSI2zeWXecGB+7zHn5vP+/v3Cv9XQkXzMy6A9g4o2+pqRB7uxvFR4qKdlOTuDmEsimKkKCbX6yRCuy4hf711PRvRsDm3ZP810wg6M81oSQ+pBIwLBbHDB2HdBgJc210eOLeYGpQC1xbwbhIRxQYoaaFq7W0N36JhabNnZFS1PHgw2fl8nGy2cPgAc3bmYABKggzFTi65ikJK1U9Hd9MUWxO/0V+/Cp5T22ZbVrge86bccjaicMd5rhSrvKspree3TcEis+F0bb+FGKi5m3jbhf8UHoFToVGNN82UiArLz5RupwqQwhJFnKZ+gJuTFrrj93p/51vPMOs/o/XuAqWu8mbJa/bKfCT6rhDh/LBwksDUHFfEeKkYyBzF3c0hw4bRRa9D1ekaDNmNdsnfL+tdO0uHmD/nMtczg14SNr5YSSraNIwudoHDIhLtBiQMjXUYaOGwHMRU/xCgODoVnT5hCflSpA1V5+sBMYsuBgTjFH5gj9F6zDqedqhWW3OVUABv8TzFa12Jimc55U9hJ4U8XUPp+VnvXLZVizBzULY2KEzSWu1Ifu+iRBqDZ0F5+8+xHZcKtbEiRbnVToC86EjboIwkHqQgkVGoRP2Urlqd55I+8SKWkkRtmvYoqJ/LLvODr0I2hwP3eYtnm7yMUvOG9DafQ/CaKgz8/kbJ+cNAkuWnLFfhC5kY7W/13etxla7XFflr07lMJN/dIOHa4Ca6xoRKf8Io/zDOTJP1yAAAAAAHCajcDhNRuAka+WQcJqNwGy8LrBI18sgVPFoUOE1G4D9E7jw2XhdYMVe/hCRr5ZAjYk1MKni0KC1xHPRwmo3Ad5MlHH6J3Hh5gHSkbLwusGu1hmxir38IZabX1EjXyyBP3mP8RsSamEHNMkRU8WhQU/jAjFriOehd65E04TUbgOY8s1zvJko46C/i5P0TuPD6GhAs8wDpSPQJQZTZeF1g3nH1vNdrDNjQYqQExV7+EMJXVszLTa+ozEQHdJGvlkCWpj6cn7zH+Ji1bySNiTUwioCd7IOaZIiEk8xUqeLQoK7reHyn8YEYoPgpxLXEc9CyzdsMu9ciaLzeirXCajcBxWOf3cx5ZrnLcM5l3kyUcdlFPK3QX8XJ11ZtFfonceH9Ltk99DQgWfM9iIXmAdKR4Qh6TegSgynvGyv1svC6wbX5Eh284+t5u+pDpa7WGbGp37FtoMVICafM4NWKvfwhjbRU/YSurZmDpwVFlptfUZGS942YiA7pn4GmNSNfLIEkVoRdLUx9OSpF1eU/eY/xOHAnLTFq3kk2Y3aVGxJqYRwbwr0VATvZEgiTBQc0yREAPWHNCSeYqQ4uMHVTxaFBVMwJnV3W8Pla31glT+MCMUjqqu1B8FOJRvn7VWuI56FsgU99ZZu2GWKSHsV3rkTRcKfsDXm9FWl+tL23hNRuA4Pdxt+Kxz+7jc6XZ5jyzXOf+2WvluGcy5HoNBe8mSjju5CAP7KKeVu1g9GHoL+Lk6e2I0+urNorqaVy9/RO48PzR0sf+l2ye/1UGqfoaECz72Hob+Z7EQvhcrnXzAOlI8sKDf/CEPSbxRlcR9AlBlPXLK6P3jZX69k//zdl4XWDYujdX2vyJDts+4znecfW837Ofi931IdLcN0vl12sM2NapZu/U79i21S2ygdBipATRoM4z0+ZwatIkGl3FXv4QxJyUJ8baKn7HGEBJwldWzMOVPPvB04KiwBHolctNr6jKj8WfyMl7xskLEfHMRAd0zYZtQ8/A0xrOArktka+WQJBt/HeSK0Iuk+koGZamPpyXZFSrlSLq8pTggMWfvMf4nn6tz5w4E5ad+nmhmLVvJJl3BRObMbtKmvPRfY2JNTCMS18Hjg3hXo/Pi2mKgJ3si0L324kESYKIxiO1g5pkiIJYDr+AHrDmgdza0YSTzFSFUaZjhxcYOobVcg2p4tCgqCC6l6pmBM6rpG75rut4fK8pEkutb6wSrK3GJafxgRimM+svpHVVdqW3P0Gg+CnEoTpD86N8/aqivpedtcRz0LQGGee2QKe+t4LNibLN2wyzD7E7sUkPYrCLZVW71yJouhVIX7hT9ga5kZwxvN6KtL0c4IO/Wl7avpg07QAAAAC4vGdlqgnIixK1r+6PYpdXN97wMiVrX9yd1zi5xbQo730IT4pvveBk1wGHAUrWv7jyatjd4N93M1hjEFZQGVef6KUw+voQnxRCrPhx33vAyGfHp611cghDzc5vJpWtf3AtERgVP6S3+4cY0J4az+gnonOPQrDGIKwIekfJoDKvPhiOyFsKO2e1socA0C9QOGmX7F8MhVnw4j3ll4dlhofR3TrgtM+PT1p3Myg/6uQQhlJYd+NA7dgN+FG/aPAr+KFIl5/EWiIwKuKeV09/SW/2x/UIk9VAp31t/MAYNZ/QTo0jtyuflhjFJyp/oLr9RxkCQSB8EPSPkqhI6PebFFg9I6g/WDEdkLaJoffTFHbPaqzKqA++fwfhBsNghF6gcNLmHBe39Km4WUwV3zzRwueFaX6A4HvLLw7Dd0hryw0PonOxaMdhBMcp2bigTERvmPX80/+Q7mZQflbaNxsOuSdNtgVAKKSw78YcDIijgduwGjln138r0niRk24f9Dsm9wODmpBmkS8/iCmTWO20RGBUDPgHMR5NqN+m8c+6/pLf7EYuuIlUmxdn7CdwAnHwSLvJTC/e2/mAMGNF51VrP6Cc04PH+cE2aBd5ig9y5F03y1zhUK5OVP9A9uiYJa6LiHMWN+8WBIJA+Lw+J50h6R8kmVV4QYvg168zXLDK7Vm2O1Xl0V5HUH6w/+wZ1WI7IWzah0YJyDLp53COjoIo7Z7UkFH5sYLkVl86WDE6p48Jgx8zbuYNhsEItTqmbb1A4aQF/IbBF0kpL6/1TkoyInbzip4Rlpgrvnggl9kdePTJS8BIri7S/QHAakFmpfeWXhxPKjl5XZ+Wl+Uj8fJNaxkF9dd+YOdi0Y5f3rbrwgmOUnq16TdoAEbZ0LwhvIjfMeowY1aPItb5YZpqngQHvaa9vwHB2K20bjYVCAlTHXJOmqXOKf+3e4YRD8fhdJIQ2c0qrL6oOBkRRoCldiPYxmZ1YHoBEHLPrv7Kc8mbV6TxIu8Ylkf9rTmpRRFezHZN7gbO8Ylj3EQmjWT4Qej5L3lRQZMeNFMmsdrrmta/s/nG6QtFoYwZ8A5ioUxpBzybUb6EJzbblpKZNS4u/lAmVLmZnuje/IxdcRI04RZ3qTYuzhGKSasDP+ZFu4OBIOPgkXZbXPYTSelZ/fFVPphsggYh1D5hRMaLzqp+N6nP1n9BOG7DJl18domzxMru1lkd1m/hobEK8xQe5EuoeYETy2nXq3cOsrnCoVwBfsY5nKn+gCQVmeU2oDYLjhxRboZmFqc+2nHCLG/eLJTTuUkJBIHwsbjmlaMNSXsbsS4eQ9I+SPtuWS3p2/bDUWeRpsywqR90DM56ZrlhlN4FBvEAAAAAAAAAAAMAAAAEAAQACAAEAAQAAAAEAAUAEAAIAAQAAAAEAAYAIAAgAAQAAAAEAAQAEAAQAAUAAAAIABAAIAAgAAUAAAAIABAAgACAAAUAAAAIACAAgAAAAQUAAAAgAIAAAgEABAUAAAAgAAIBAgEAEAUAQYHJAAu2EAECAwQEBQUGBgYGBwcHBwgICAgICAgICQkJCQkJCQkKCgoKCgoKCgoKCgoKCgoKCwsLCwsLCwsLCwsLCwsLCwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDwAAEBESEhMTFBQUFBUVFRUWFhYWFhYWFhcXFxcXFxcXGBgYGBgYGBgYGBgYGBgYGBkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0AAQIDBAUGBwgICQkKCgsLDAwMDA0NDQ0ODg4ODw8PDxAQEBAQEBAQERERERERERESEhISEhISEhMTExMTExMTFBQUFBQUFBQUFBQUFBQUFBUVFRUVFRUVFRUVFRUVFRUWFhYWFhYWFhYWFhYWFhYWFxcXFxcXFxcXFxcXFxcXFxgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxscwCcAAMAsAAABAQAAHgEAAA8AAABALAAAQC0AAAAAAAAeAAAADwAAAAAAAADALQAAAAAAABMAAAAHAAAAAAAAAAwACACMAAgATAAIAMwACAAsAAgArAAIAGwACADsAAgAHAAIAJwACABcAAgA3AAIADwACAC8AAgAfAAIAPwACAACAAgAggAIAEIACADCAAgAIgAIAKIACABiAAgA4gAIABIACACSAAgAUgAIANIACAAyAAgAsgAIAHIACADyAAgACgAIAIoACABKAAgAygAIACoACACqAAgAagAIAOoACAAaAAgAmgAIAFoACADaAAgAOgAIALoACAB6AAgA+gAIAAYACACGAAgARgAIAMYACAAmAAgApgAIAGYACADmAAgAFgAIAJYACABWAAgA1gAIADYACAC2AAgAdgAIAPYACAAOAAgAjgAIAE4ACADOAAgALgAIAK4ACABuAAgA7gAIAB4ACACeAAgAXgAIAN4ACAA+AAgAvgAIAH4ACAD+AAgAAQAIAIEACABBAAgAwQAIACEACAChAAgAYQAIAOEACAARAAgAkQAIAFEACADRAAgAMQAIALEACABxAAgA8QAIAAkACACJAAgASQAIAMkACAApAAgAqQAIAGkACADpAAgAGQAIAJkACABZAAgA2QAIADkACAC5AAgAeQAIAPkACAAFAAgAhQAIAEUACADFAAgAJQAIAKUACABlAAgA5QAIABUACACVAAgAVQAIANUACAA1AAgAtQAIAHUACAD1AAgADQAIAI0ACABNAAgAzQAIAC0ACACtAAgAbQAIAO0ACAAdAAgAnQAIAF0ACADdAAgAPQAIAL0ACAB9AAgA/QAIABMACQATAQkAkwAJAJMBCQBTAAkAUwEJANMACQDTAQkAMwAJADMBCQCzAAkAswEJAHMACQBzAQkA8wAJAPMBCQALAAkACwEJAIsACQCLAQkASwAJAEsBCQDLAAkAywEJACsACQArAQkAqwAJAKsBCQBrAAkAawEJAOsACQDrAQkAGwAJABsBCQCbAAkAmwEJAFsACQBbAQkA2wAJANsBCQA7AAkAOwEJALsACQC7AQkAewAJAHsBCQD7AAkA+wEJAAcACQAHAQkAhwAJAIcBCQBHAAkARwEJAMcACQDHAQkAJwAJACcBCQCnAAkApwEJAGcACQBnAQkA5wAJAOcBCQAXAAkAFwEJAJcACQCXAQkAVwAJAFcBCQDXAAkA1wEJADcACQA3AQkAtwAJALcBCQB3AAkAdwEJAPcACQD3AQkADwAJAA8BCQCPAAkAjwEJAE8ACQBPAQkAzwAJAM8BCQAvAAkALwEJAK8ACQCvAQkAbwAJAG8BCQDvAAkA7wEJAB8ACQAfAQkAnwAJAJ8BCQBfAAkAXwEJAN8ACQDfAQkAPwAJAD8BCQC/AAkAvwEJAH8ACQB/AQkA/wAJAP8BCQAAAAcAQAAHACAABwBgAAcAEAAHAFAABwAwAAcAcAAHAAgABwBIAAcAKAAHAGgABwAYAAcAWAAHADgABwB4AAcABAAHAEQABwAkAAcAZAAHABQABwBUAAcANAAHAHQABwADAAgAgwAIAEMACADDAAgAIwAIAKMACABjAAgA4wAIAAAABQAQAAUACAAFABgABQAEAAUAFAAFAAwABQAcAAUAAgAFABIABQAKAAUAGgAFAAYABQAWAAUADgAFAB4ABQABAAUAEQAFAAkABQAZAAUABQAFABUABQANAAUAHQAFAAMABQATAAUACwAFABsABQAHAAUAFwAFAEHg2QALTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAAAwAAAAQAAAAEAAAABAAAAAQAAAAFAAAABQAAAAUAAAAFAEHQ2gALZQEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAUAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAoAAAAKAAAACwAAAAsAAAAMAAAADAAAAA0AAAANAEGA3AALIwIAAAADAAAABwAAAAAAAAAQERIACAcJBgoFCwQMAw0CDgEPAEG03AALaQEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACgAAAAwAAAAOAAAAEAAAABQAAAAYAAAAHAAAACAAAAAoAAAAMAAAADgAAABAAAAAUAAAAGAAAABwAAAAgAAAAKAAAADAAAAA4ABBtN0AC5oCAQAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAABAAAAAYAAAAIAAAADAAAAAAAEAAIABAAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAAAAgAAAAMAAAAEAAAABgAABuZWVkIGRpY3Rpb25hcnkAc3RyZWFtIGVuZAAAZmlsZSBlcnJvcgBzdHJlYW0gZXJyb3IAZGF0YSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBpbmNvbXBhdGlibGUgdmVyc2lvbgAAAAAoLwAAOC8AAEMvAABELwAATy8AAFwvAABnLwAAey8AAIgvAABDLwAAMS4yLjExAEHQ3wALA9AxUA==");let Lf,Pf;async function Df(){var e,t;if(Lf)return Lf;const r={};let i,o={};for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(o[i]=r[i]);let s=!1,a=!1,c=!1;s="object"==typeof window,a="function"==typeof importScripts,c="object"==typeof n&&"object"==typeof n.versions&&"string"==typeof n.versions.node;let l="";(s||a)&&(a?l=self.location.href:"undefined"!=typeof document&&document.currentScript&&(l=document.currentScript.src),l=0!==Lo(l).call(l,"blob:")?l.substr(0,Of(l).call(l,"/")+1):""),r.print||Yo(e=console.log).call(e,console);const u=r.printErr||Yo(t=console.warn).call(t,console);for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i]);let d;o=null,"object"!=typeof WebAssembly&&N("no native wasm support detected");let h=!1;function p(e){const t=r["_"+e];var n;return n="Cannot call unknown function "+e+", make sure it is exported",t||N("Assertion failed: "+n),t}function f(e,t,n,r,i){const o={string:function(e){let t=0;if(null!=e&&0!==e){const n=1+(e.length<<2);t=W(n),function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;const i=n+r-1;for(let o=0;o<e.length;++o){let r=e.charCodeAt(o);if(r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++o)),r<=127){if(n>=i)break;t[n++]=r}else if(r<=2047){if(n+1>=i)break;t[n++]=192|r>>6,t[n++]=128|63&r}else if(r<=65535){if(n+2>=i)break;t[n++]=224|r>>12,t[n++]=128|r>>6&63,t[n++]=128|63&r}else{if(n+3>=i)break;t[n++]=240|r>>18,t[n++]=128|r>>12&63,t[n++]=128|r>>6&63,t[n++]=128|63&r}}t[n]=0})(e,_,t,n)}(e,t,n)}return t},array:function(e){const t=W(e.length);var n,r;return n=e,r=t,m.set(n,r),t}},s=p(e),a=[];let c=0;if(r)for(let u=0;u<r.length;u++){const e=o[n[u]];e?(0===c&&(c=H()),a[u]=e(r[u])):a[u]=r[u]}let l=s.apply(null,a);return l=function(e){return"string"===t?(n=e)?function(e,t,n){const r=t+n;let i=t,o="";for(;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&g)return g.decode(e.subarray(t,i));for(;t<i;){let n=e[t++];if(!(128&n)){o+=String.fromCharCode(n);continue}const r=63&e[t++];if(192==(224&n)){o+=String.fromCharCode((31&n)<<6|r);continue}const i=63&e[t++];if(n=224==(240&n)?(15&n)<<12|r<<6|i:(7&n)<<18|r<<12|i<<6|63&e[t++],n<65536)o+=String.fromCharCode(n);else{const e=n-65536;o+=String.fromCharCode(55296|e>>10,56320|1023&e)}}return o}(_,n,r):"":"boolean"===t?Boolean(e):e;var n,r}(l),0!==c&&Q(c),l}const g="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;let m,_,v,E,A,y,S,b,C;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");const T=[],I=[],R=[],w=[];I.push({func:function(){U()}});let k=0,O=null;function N(e){throw r.onAbort&&r.onAbort(e),u(e+=""),h=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}r.preloadedImages={},r.preloadedAudios={};let L="deflate.wasm";var P,D;function M(e){for(;e.length>0;){const t=e.shift();if("function"==typeof t){t(r);continue}const n=t.func;"number"==typeof n?void 0===t.arg?C.get(n)():C.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}}D="data:application/octet-stream;base64,",Is(P=L).call(P,D)||(L=function(e){return r.locateFile?r.locateFile(e,l):l+e}(L));const x={emscripten_memcpy_big:function(e,t,n){cf(_).call(_,e,t,t+n)},emscripten_resize_heap:function(e){N("OOM")}};await async function(){const e={env:x,wasi_snapshot_preview1:x};function t(e,t){const n=e.exports;var i;r.asm=n,d=r.asm.memory,i=d.buffer,r.HEAP8=m=new Int8Array(i),r.HEAP16=v=new Int16Array(i),r.HEAP32=A=new Int32Array(i),r.HEAPU8=_=new Uint8Array(i),r.HEAPU16=E=new Uint16Array(i),r.HEAPU32=y=new Uint32Array(i),r.HEAPF32=S=new Float32Array(i),r.HEAPF64=b=new Float64Array(i),C=r.asm.__indirect_function_table,function(e){if(k--,r.monitorRunDependencies&&r.monitorRunDependencies(k),0==k&&O){const e=O;O=null,e()}}()}function n(e){t(e.instance)}function i(t){return new fo((e,t)=>{e(Nf().buffer)}).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){u("failed to asynchronously prepare wasm: "+e),N(e)}))}if(k++,r.monitorRunDependencies&&r.monitorRunDependencies(k),r.instantiateWasm)try{return r.instantiateWasm(e,t)}catch(e){return u("Module.instantiateWasm callback failed with error: "+e),!1}return await i(n),{}}();let B,U=r.___wasm_call_ctors=function(){return(U=r.___wasm_call_ctors=r.asm.__wasm_call_ctors).apply(null,arguments)},F=r._malloc=function(){return(F=r._malloc=r.asm.malloc).apply(null,arguments)},V=r._free=function(){return(V=r._free=r.asm.free).apply(null,arguments)},j=r.___errno_location=function(){return(j=r.___errno_location=r.asm.__errno_location).apply(null,arguments)},G=r._zlibCompress=function(){return(G=r._zlibCompress=r.asm.zlibCompress).apply(null,arguments)},H=r.stackSave=function(){return(H=r.stackSave=r.asm.stackSave).apply(null,arguments)},Q=r.stackRestore=function(){return(Q=r.stackRestore=r.asm.stackRestore).apply(null,arguments)},W=r.stackAlloc=function(){return(W=r.stackAlloc=r.asm.stackAlloc).apply(null,arguments)};function q(e){function t(){B||(B=!0,r.calledRun=!0,h||(M(I),M(R),r.onRuntimeInitialized&&r.onRuntimeInitialized(),function(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)e=r.postRun.shift(),w.unshift(e);var e;M(w)}()))}k>0||(function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)e=r.preRun.shift(),T.unshift(e);var e;M(T)}(),k>0||(r.setStatus?(r.setStatus("Running..."),Fa((function(){Fa((function(){r.setStatus("")}),1),t()}),1)):t()))}if(r.ccall=f,r.cwrap=function(e,t,n,r){const i=hf(n=n||[]).call(n,(function(e){return"number"===e}));return"string"!==t&&i&&!r?p(e):function(){return f(e,t,n,arguments)}},r.allocate=function(e,t){let n;return n=1==t?W(e.length):F(e.length),e.subarray||Uo(e)?_.set(e,n):_.set(new Uint8Array(e),n),n},O=function e(){B||q(),B||(O=e)},r.run=q,r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return q(),Lf=r,r}const Mf=Uint8Array.BYTES_PER_ELEMENT,xf={bytesReceived:"br",frameDropped:"fd",frameReceived:"fr",googJitterReceived:"jr",isAudioMute:"am",isFreeze:"fz",mediaType:"mt",packetsLost:"pl",packetsReceived:"pr",peerId:"pid",id:"id",ssrc:"ssrc",timestamp:"ts",type:"tp",frameRateInput:"fi",frameRateSent:"fs",googRtt:"rt",isVideoMute:"vm"},Bf={stats:"sts",state:"st",stream_id:"stid",session_id:"seid",stream_type:"stt",app_id:"aid",channel_key:"ck",channel_name:"cn",sdk_version:"sv",browser:"b",process_id:"pcid",mode:"m",codec:"c",role:"r",has_changed_gateway:"hcg",ap_response:"ar",extends:"es",details:"d",features:"ft",p2p_id:"ppid",sdp:"sdp",audio:"a",video:"v",attributes:"at",hq:"h",lq:"l",stereo:"str",speech:"spe",extend:"e",pingpongElapse:"ppe"},Uf={_message:"m",_type:"t",_id:"id"},Ff={join_v2:"j2",publish:"pub",publish_related_stats:"prs",ping:"pi",traffic_stats:"ts",ping_back:"pib",publish_stats:"pubs"};let Vf;class jf{constructor(){}async init(){if(!Vf){const e=await(async()=>(Pf||(Pf=await Df()),{zlibCompress:e=>{var t;const n=new Uint8Array(e),r=Mf*n.byteLength,i=Pf._malloc(r),o=Pf._malloc(3*r);for(let c=0;c<r;c++)Pf.HEAP8[i/Mf+c]=n[c];const s=Pf._zlibCompress(i,r,o),a=new Uint8Array(Uo(t=Pf.HEAP8).call(t,o,o+s));return Pf._free(i),Pf._free(o),a}}))();Vf=e.zlibCompress}this.zlibCompress=Vf}msgPackCompress(e){return rf.encode(e)}compress(e){const t=Ma(),n=this.compressKeyAndValue(JSON.parse(ve(e))),r=this.msgPackCompress(n),i=this.zlibCompress(r),o=new Uint8Array([49,49,49,50,...Bd(i)]);return{origin:rr({},e),originLength:ve(e).length,shortKeyAndValue:n,msgpackSer:r,compressed:o,compressedLength:o.length,time:Ma()-t}}compressKeyAndValue(e){return this._ObjectKeyCompress(this._typeCompress(e))}_typeCompress(e){const t=e._type;if(!t)return e;const n=Ff[t];return e._type=n||t,e}_ObjectKeyCompress(e){const t=e._message;if(t){const n=t.stats;n&&(t.stats=this._statsCompress(n)),e._message=this._messageCompress(t)}return this._reportCompress(e)}_statsCompress(e){return this._keyCompress(e,xf)}_messageCompress(e){return this._keyCompress(e,Bf)}_reportCompress(e){return this._keyCompress(e,Uf)}_keyCompress(e,t){const n={},r=or(e);return ur(r).call(r,(r,i)=>{const o=e[i];return t[i]?n[t[i]]=o:n[i]=o,n},n),n}}class Gf extends Mu{constructor(e){super(),this.lowPriorityQueue=[],this.highPriorityQueue=[],this.AgoraWebSocketManager=e}get queue(){return[...this.highPriorityQueue,...this.lowPriorityQueue]}reset(){this.lowPriorityQueue=[],this.highPriorityQueue=[]}pushMessage(e,t=!1){t?this.highPriorityQueue.push(e):this.lowPriorityQueue.push(e),this.sendMessage()}sendMessage(){const e=this.queue.length;let t=0;t=e<5?15*e:60+3*(e-4),Fa(()=>{this._sendMessage()},t)}_sendMessage(){var e;if(!this.queue.length)return;const t=this.AgoraWebSocketManager.getConnection();if(!t||1!==t.readyState)return;const n=this.queue.shift();return rs(e=this.lowPriorityQueue).call(e,n)?this.lowPriorityQueue.shift():this.highPriorityQueue.shift(),t.send(n.compressed),n}}class Hf extends Mu{constructor(e,t,n=!1,r=!1){super(),this.connectionID=0,this.currentURLIndex=0,this.reconnectMode="tryNext",this._state="closed",this.reconnectCount=0,this.isCompressorInitSuccess=!1,this.tryDoubleDomain=!1,this.wsInflateLength=0,this.wsDeflateLength=0,this.closeEstablishingWs=()=>{},this.name=e,this.retryConfig=t,this.useCompress=n,this.tryDoubleDomain=r}get url(){return this.websocket?this.websocket.url:null}get ipPortTuple(){if(!this.url)return[void 0,void 0];const e=/^wss:\/\/(\d+-\d+-\d+-\d+)\..+:(\d+)\/?$/.exec(this.url);return e&&e[1]&&e[2]?[e[1].split("-").join("."),e[2]]:[void 0,void 0]}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(iu.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(iu.CONNECTED):"closed"===this._state?this.emit(iu.CLOSED):"failed"===this._state&&this.emit(iu.FAILED))}getConnection(){return this.websocket||void 0}init(e){const t=(t,n)=>{this.urls=e;const r=this.urls[this.currentURLIndex];this.state="connecting",this.messageSender=new Gf(this),this.createWebSocketConnection(r).then(t).catch(n),this.once(iu.CLOSED,()=>n(new pl(ll.WS_DISCONNECT))),this.once(iu.CONNECTED,()=>t())};return new fo((e,n)=>{this.compressor=new jf,this.compressor.init().then(()=>{var r;Rc.debug("websocket compressor initialized successfully"),ih.wsCompressorInit({status:!0,ec:null,eventElapse:1}),this.isCompressorInitSuccess=!0,this.compress=Yo(r=this.compressor.compress).call(r,this.compressor),t(e,n)}).catch(r=>{t(e,n),Rc.debug("websocket compressor failed to initialize"),ih.wsCompressorInit({status:!1,ec:r?r.message||r.toString():"Empty Error",eventElapse:1})})})}close(e,t){if(this.currentURLIndex=0,this.reconnectCount=0,this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const e=this.websocket;t?Fa(()=>e.close(),500):e.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void Rc.warning("[".concat(this.name,"] can not reconnect, no websocket"));void 0!==e&&(this.reconnectMode=e),Rc.debug("[".concat(this.name,"] reconnect is triggered initiative"));const n=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),n&&Yo(n).call(n,this.websocket)({code:9999,reason:t})}sendMessage(e,t=!1){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new pl(ll.WS_ABORT,"websocket is not ready");try{let n=null;if(this.isCompressorInitSuccess&&this.useCompress&&jc("WEBSOCKET_COMPRESS"))n=this.compress(e),this.setWsInflateData(n);else{if(this.isCompressorInitSuccess&&this.useCompress){const t=this.compress(e);this.setWsInflateData(t)}const t=ve(e);n={compressed:t,compressedLength:t.length,origin:e}}t?this.websocket.send(n.compressed):this.messageSender.pushMessage(n)}catch(e){throw new pl(ll.WS_ERR,"send websocket message error"+e.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){const e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e,t){return this.connectionID+=1,this.connectionID,new fo((n,r)=>{var i,o;const s=()=>{Rc.debug("[".concat(this.name,"] websocket opened:"),e),this.reconnectMode="retry",this.state="connected",this.reconnectCount=0,n()},a=async e=>{var t,i,o,s;if(Rc.debug(Je(t=Je(i=Je(o=Je(s="[".concat(this.name,"] websocket close ")).call(s,this.websocket&&this.websocket.url,", code: ")).call(o,e.code,", reason: ")).call(i,e.reason,", current mode: ")).call(t,this.reconnectMode)),this.reconnectCount<this.retryConfig.maxRetryCount){"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const t=xp(this,iu.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,i=await this.reconnectWithAction(t);if("closed"===this.state)return void Rc.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!i)return r(new pl(ll.WS_DISCONNECT,"websocket reconnect failed: ".concat(e.code))),void this.close(!0);n()}else r(new pl(ll.WS_DISCONNECT,"websocket close: ".concat(e.code))),this.close()},c=e=>{this.emit(iu.ON_MESSAGE,e)};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),jc("GATEWAY_WSS_ADDRESS")&&Is(i=this.name).call(i,"gateway")&&(e=jc("GATEWAY_WSS_ADDRESS")),Rc.debug(Je(o="[".concat(this.name,"] start connect, url: ")).call(o,e)),this.chooseBestWebsocketConnection(e,!!t).then(e=>{this.websocket=e,s&&s(),e.onclose=a,e.onmessage=c}).catch(e=>{if("closed"!==this.state){if(e instanceof pl&&e.code===ll.WS_ERR){var t;const n=new pl(ll.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return Rc.error(Je(t="[".concat(this.name,"]")).call(t,n)),void r(n)}a&&a(e)}else r(new pl(ll.WS_DISCONNECT,"websocket is closed: ".concat(e.toString())))})})}async reconnectWithAction(e,t){var n,r;if(!t&&this.reconnectCount>=this.retryConfig.maxRetryCount)return!1;if(!this.urls)return!1;if("closed"===this.state)return!1;this.onlineReconnectListener||zd.networkState!==Pu.OFFLINE||(this.onlineReconnectListener=zd.onlineWaiter&&zd.onlineWaiter.then(()=>{this.onlineReconnectListener=void 0}));const i=$d(this.reconnectCount,this.retryConfig);if(Rc.debug(Je(n=Je(r="[".concat(this.name,"] wait ")).call(r,i,"ms to reconnect websocket, mode: ")).call(n,e)),await fo.race([Ip(i),this.onlineReconnectListener||new fo(()=>{})]),"closed"===this.state)return!1;this.reconnectCount+=1;try{if("retry"===e){const e=this.urls[this.currentURLIndex];await this.createWebSocketConnection(e)}else if("tryNext"===e){var o,s;if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return await this.reconnectWithAction("recover");Rc.debug(Je(o=Je(s="[".concat(this.name,"] websocket url length: ")).call(s,this.urls.length," current index: ")).call(o,this.currentURLIndex));const e=this.urls[this.currentURLIndex];await this.createWebSocketConnection(e)}else if("recover"===e){Rc.debug("[".concat(this.name,"] request new urls")),this.urls=await Dp(this,iu.REQUEST_NEW_URLS),this.currentURLIndex=0;const e=this.urls[this.currentURLIndex];await this.createWebSocketConnection(e)}return!0}catch(t){return Rc.error("[".concat(this.name,"] reconnect failed"),t.toString()),await this.reconnectWithAction(e)}}async chooseBestWebsocketConnection(e,t){return new fo((n,r)=>{let i=!1;const o=[];this.closeEstablishingWs=()=>{Rc.debug("[choose-best-ws] close establishing websockets"),Xn(o).call(o,e=>{e.onclose=null,e.onopen=null,e.onmessage=null,e.close()}),r(new pl(ll.WS_ABORT,"choose best websocket aborted"))};const s=jc("GATEWAY_DOMAINS");let a;const c=Lo(e).call(e,"?h="),l=Qo(s).call(s,t=>-1!==c?rs(e).call(e,t,c):rs(e).call(e,t));Rc.debug("[choose-best-ws] currentDomain: ",l,", domains: ",s);let u=!this.tryDoubleDomain||t||!l;if(!u&&l){try{Xn(s).call(s,t=>{const n=-1===c?e.replace(l,t):e.substr(0,c)+e.substr(c).replace(l,t),r=new WebSocket(n);r.binaryType="arraybuffer",o.push(r),Rc.debug("[choose-best-ws] ws is connecting:",r.url)})}catch(e){for(Rc.debug("[choose-best-ws] ws create failed, fallback to single url"),Xn(o).call(o,e=>e.close());o.length;)o.pop();u=!0}Xn(o).call(o,e=>{e.onopen=()=>{var t;i||(Xn(t=Gr(o).call(o,t=>t!==e)).call(t,e=>{Rc.debug("[choose-best-ws]close backup websocket: ".concat(e.url)),e.close()}),i=!0,n(e))},e.onclose=e=>{a=e,i||Qo(o).call(o,e=>!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING))||(Rc.debug("[choose-best-ws] all websocket is closed"),i=!0,r(a))},e.onmessage=t=>{var n;Rc.debug(Je(n="[choose-best-ws]".concat(e.url," onmessage: ")).call(n,t.data))}}),Ip(5e3).then(()=>{Xn(o).call(o,e=>{e.readyState!==WebSocket.OPEN&&e.close()})})}if(u){let t;Rc.debug("[choose-best-ws] use single url: ",e);try{t=new WebSocket(e),o.push(t),t.binaryType="arraybuffer"}catch(e){var d;const n=new pl(ll.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return Rc.error(Je(d="[".concat(this.name,"]")).call(d,n)),void r(n)}t.onopen=()=>{n(t)},t.onclose=e=>{r(e)},t.onmessage=e=>{var n;Rc.debug(Je(n="[choose-best-ws]".concat(t.url," onmessage: ")).call(n,e.data))},Ip(5e3).then(()=>{t&&t.readyState!==WebSocket.OPEN&&t.close()})}}).finally(()=>{this.closeEstablishingWs=void 0})}}class Qf{constructor(e){this.input=[],this.size=e}add(e){var t;this.input.push(e),this.input.length>this.size&&To(t=this.input).call(t,0,1)}mean(){var e;return 0===this.input.length?0:ur(e=this.input).call(e,(e,t)=>e+t)/this.input.length}}class Wf extends Mu{constructor(e){super(),this._connectionState=Gl.CLOSED,this.openConnectionTime=Ma(),this.lastMsgTime=Ma(),this.uploadCache=[],this.rttRolling=new Qf(5),this.pingpongTimeoutCount=0,this.onWebsocketMessage=e=>{if(e.data instanceof ArrayBuffer)return void this.emit(Hl.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Ma(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")&&(this.emit(t._type,t._message),t._type===ql.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===ql.ON_USER_BANNED))switch(t._message.error_code){case 14:this.close("UID_BANNED");break;case 15:this.close("IP_BANNED");break;case 16:this.close("CHANNEL_BANNED")}},this.clientId=e.clientId,this.spec=e,this.websocket=new Hf("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===Gl.CONNECTED&&this.reconnect("retry",jl.OFFLINE)})}get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===Gl.CONNECTED?this.emit(Hl.WS_CONNECTED):e===Gl.RECONNECTING?this.emit(Hl.WS_RECONNECTING,this._websocketReconnectReason):e===Gl.CLOSED&&this.emit(Hl.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}async request(e,t,n,r){var i,o,s,a,c;const l=kp(6,""),u={_id:l,_type:e,_message:t},d=this.websocket.connectionID,h=()=>new fo((t,n)=>{if(this.connectionState===Gl.CONNECTED)return t();const r=()=>{this.off(Hl.WS_CLOSED,i),t()},i=()=>{this.off(Hl.WS_CONNECTED,r),n(new pl(ll.WS_ABORT))};this.once(Hl.WS_CONNECTED,r),this.once(Hl.WS_CLOSED,i),e!==Ql.PUBLISH&&e!==Ql.SUBSCRIBE&&e!==Ql.UNSUBSCRIBE&&e!==Ql.UNPUBLISH&&e!==Ql.CONTROL||this.once(Hl.DISCONNECT_P2P,()=>{n(new pl(ll.DISCONNECT_P2P))})});if(this.connectionState!==Gl.CONNECTING&&this.connectionState!==Gl.RECONNECTING||e===Ql.JOIN||e===Ql.REJOIN||await h(),this.websocket.sendMessage(u,!0),r)return;const p=new fo((n,r)=>{let i=!1;const o=(r,o)=>{i=!0,n({isSuccess:"success"===r,message:o||{}}),this.off(Hl.WS_CLOSED,s),this.off(Hl.WS_RECONNECTING,s),this.emit(Hl.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(l),o);const s=()=>{r(new pl(ll.WS_ABORT,"type: ".concat(e))),this.off(Hl.WS_CLOSED,s),this.off(Hl.WS_RECONNECTING,s),this.off("res-@".concat(l),o)};this.once(Hl.WS_CLOSED,s),this.once(Hl.WS_RECONNECTING,s),Ip(jc("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==d||i||(Rc.warning("ws request timeout, type: ".concat(e)),this.emit(Hl.REQUEST_TIMEOUT,e,t))})});let f=null;try{f=await p}catch(r){if(this.connectionState===Gl.CLOSED||e===Ql.LEAVE)throw new pl(ll.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===Ql.JOIN||e===Ql.REJOIN?null:(await h(),await this.request(e,t))}if(f.isSuccess)return f.message;const g=Number(f.message.error_code||f.message.code),m=nf(g),_=new pl(ll.UNEXPECTED_RESPONSE,Je(i="".concat(m.desc,": ")).call(i,f.message.error_str),{code:g,data:f.message});return"success"===m.action?f.message:(Rc.warning(Je(o=Je(s=Je(a=Je(c="[".concat(this.websocket.connectionID,"] unexpected response from type ")).call(c,e,", error_code: ")).call(a,g,", message: ")).call(s,m.desc,", action: ")).call(o,m.action)),"failed"===m.action?_.throw():"quit"===m.action?(this.initError=_,this.close(),_.throw()):(g===Fl.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=f.message.option,Rc.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",jl.MULTI_IP)):this.reconnect(m.action,jl.SERVER_ERROR),e===Ql.JOIN||e===Ql.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new fo(n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)})}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=jc("MAX_UPLOAD_CACHE")||50;var r;this.uploadCache.push(n),this.uploadCache.length>t&&To(r=this.uploadCache).call(r,0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{var e;if(this.connectionState!==Gl.CONNECTED)return;const t=To(e=this.uploadCache).call(e,0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(t._type,t._message)},jc("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,new fo((t,n)=>{this.once(Hl.WS_CONNECTED,()=>t(this.joinResponse)),this.once(Hl.WS_CLOSED,()=>n(this.initError||new pl(ll.WS_ABORT))),this.connectionState=Gl.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4)})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||"LEAVE",this.connectionState=Gl.CLOSED,this.websocket.close()}async join(){var e;if(!this.joinResponse){const e=await Dp(this,Hl.REQUEST_JOIN_INFO),t=await this.request(Ql.JOIN,e);if(!t)return this.emit(Hl.REPORT_JOIN_GATEWAY,ll.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(Hl.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=Gl.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(Yo(e=this.handlePingPong).call(e,this),3e3),!0}async rejoin(){var e,t;if(!this.reconnectToken)throw new pl(ll.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const n=Bp(this,Hl.REQUEST_REJOIN_INFO);n.token=this.reconnectToken;const r=await this.request(Ql.REJOIN,n);return!!r&&(this.connectionState=Gl.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(Yo(e=this.handlePingPong).call(e,this),3e3),r.peers&&Xn(t=r.peers).call(t,e=>{this.emit(ql.ON_USER_ONLINE,{uid:e.uid}),e.audio_mute?this.emit(ql.MUTE_AUDIO,{uid:e.uid}):this.emit(ql.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(ql.MUTE_VIDEO,{uid:e.uid}):this.emit(ql.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(ql.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(ql.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(ql.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(ql.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(ql.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id}),e.audio&&this.emit(ql.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0}),e.video&&this.emit(ql.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0})}),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){Rc.debug("[".concat(this.clientId,"] receive notification: "),e);const t=nf(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close("UID_BANNED"),void this.close()):void this.reconnect(t.action,jl.SERVER_ERROR);Rc.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=jc("PING_PONG_TIME_OUT"),t=Ma();this.pingpongTimeoutCount>=e&&(Rc.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>jc("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",jl.TIMEOUT):this.request(Ql.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const e=Ma()-t;this.rttRolling.add(e),jc("REPORT_STATS")&&this.send(Ql.PING_BACK,{pingpongElapse:e})}).catch(e=>{})}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(Wl.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(iu.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(iu.CLOSED,()=>{this.connectionState=Gl.CLOSED}),this.websocket.on(iu.FAILED,()=>{this._disconnectedReason="NETWORK_ERROR",this.connectionState=Gl.CLOSED}),this.websocket.on(iu.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===Gl.CONNECTED?this.connectionState=Gl.RECONNECTING:this.connectionState=Gl.CONNECTING}),this.websocket.on(iu.WILL_RECONNECT,(e,t)=>{if(Bp(this,Hl.IS_P2P_DISCONNECTED)&&"retry"===e)return this.reconnectToken=void 0,this.emit(Hl.NEED_RENEW_SESSION),this.emit(Hl.DISCONNECT_P2P),t("tryNext");"retry"!==e&&(this.reconnectToken=void 0,this.emit(Hl.NEED_RENEW_SESSION),this.emit(Hl.DISCONNECT_P2P)),t(e)}),this.websocket.on(iu.CONNECTED,()=>{this.openConnectionTime=Ma(),this.reconnectToken?this.rejoin().catch(e=>{var t;Rc.warning(Je(t="[".concat(this.clientId,"] rejoin failed ")).call(t,e)),this.reconnect("tryNext",jl.SERVER_ERROR)}):this.join().catch(e=>{if(this.emit(Hl.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof pl&&e.code===ll.UNEXPECTED_RESPONSE&&e.data.code===Fl.ERR_NO_AUTHORIZED)return Rc.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",jl.SERVER_ERROR);Rc.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",jl.SERVER_ERROR):(this.initError=e,this.close())})}),this.websocket.on(iu.REQUEST_NEW_URLS,(e,t)=>{Dp(this,Hl.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})}}function qf(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function zf(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=qf(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=qf(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}const Zf=new xn;class $f extends Mu{constructor(e,t){super(),this.inChannelInfo={joinAt:null,duration:0},this._state="DISCONNECTED",this.isSignalRecover=!1,this.hasChangeBGPAddress=!1,this.joinGatewayStartTime=0,this._signalTimeout=!1,this.store=e,this.spec=t,this.signal=new Wf(zf({},t,{retryConfig:t.websocketRetryConfig})),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(_u.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(_u.CONNECTION_STATE_CHANGE,e,t)}async join(e,t){var n,r;this.store.joinGatewayStart(),"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const i=Ma();let o=Zf.get(e.cname);if(o||(o=new xn,Zf.set(e.cname,o)),o.has(e.uid)){const t=new pl(ll.UID_CONFLICT);throw ih.joinGateway(e.sid,{lts:i,succ:!1,ec:t.message,addr:null,uid:e.uid,cid:e.cid}),t}o.set(e.uid,!0),this.joinInfo=e,this.key=t;const s=e.proxyServer?vo(n=e.gatewayAddrs).call(n,t=>{var n,r;const i=t.split(":");return Je(n=Je(r="wss://".concat(e.proxyServer,"/ws/?h=")).call(r,i[0],"&p=")).call(n,i[1])}):vo(r=e.gatewayAddrs).call(r,e=>"wss://".concat(e));let a=0;this.joinGatewayStartTime=i;try{a=(await this.signal.init(s)).uid}catch(t){throw Rc.error("[".concat(this.store.clientId,"] User join failed"),t.toString()),ih.joinGateway(e.sid,{lts:i,succ:!1,ec:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid}),o.delete(e.uid),this.signal.close(),t}return this.state="CONNECTED",this.inChannelInfo.joinAt=Ma(),Rc.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(e=>{Rc.warning("[".concat(this.store.clientId,"] get traffic stats error"),e.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(_u.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(_u.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(_u.NETWORK_QUALITY,{uplinkNetworkQuality:_p(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:_p(this._statsCollector.trafficStats.B_dnq)}):this.emit(_u.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),this.store.joinGatewayEnd(),a}async leave(e=!1){if("DISCONNECTED"!==this.state){this.state="DISCONNECTING";try{e||this.signal.connectionState!==Gl.CONNECTED||await wp(this.signal.request(Ql.LEAVE,void 0,!0),3e3)}catch(e){Rc.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),e)}this.signal.close(),this.reset(),this.state="DISCONNECTED"}}async publish(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pl(ll.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const r={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:jc("PUB_EXTEND")};try{return(await this.signal.request(Ql.PUBLISH,r,!0))._message}catch(r){if(n&&r.data&&r.data.code===Fl.ERR_PUBLISH_REQUEST_INVALID)return Rc.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),r.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw r}}async unpublish(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pl(ll.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(Ql.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(e){Rc.warning("unpublish warning: ",e)}}async subscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pl(ll.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,tcc:!!jc("SUBSCRIBE_TCC"),extend:jc("SUB_EXTEND"),ssrcId:t.ssrcId};try{return(await this.signal.request(Ql.SUBSCRIBE,r,!0))._message}catch(r){if(n&&r.data&&r.data.code===Fl.ERR_SUBSCRIBE_REQUEST_INVALID)return Rc.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),r.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw r}}async unsubscribe(e,t){try{await this.signal.request(Ql.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(e){Rc.warning("unsubscribe warning: ",e)}}async reconnectPC(e){const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=e;return{gatewayEstablishParams:await this.signal.request(Ql.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}},!0)}}getGatewayInfo(){return this.signal.request(Ql.GATEWAY_INFO)}renewToken(e){return this.signal.request(Ql.RENEW_TOKEN,e)}async setClientRole(e,t){if(t&&(this._clientRoleOptions=rr({},t)),"CONNECTED"!==this.state)return void(this.role=e);let n=void 0;n="audience"===e?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,await this.signal.request(Ql.SET_CLIENT_ROLE,{role:e,level:n}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(Ql.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setStreamFallbackOption(e,t){await this.signal.request(Ql.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(Ql.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Ma()-this.inChannelInfo.joinAt),zf({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(Ql.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Ma()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=Zf.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){const t=e.match(/(wss\:\/\/)?([^:]+):(\d+)/);return t?{username:Nc.username,password:Nc.password,turnServerURL:t[2],tcpport:br(t[3])+30,udpport:br(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex])||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(zf({},Nc,{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){var e;if("CONNECTED"!==this.state)return;const t=await this.signal.request(Ql.TRAFFIC_STATS,void 0,!0);t.timestamp=Ma(),Xn(e=t.peer_delay).call(e,e=>{var t;const n=this._statsCollector.trafficStats&&Qo(t=this._statsCollector.trafficStats.peer_delay).call(t,t=>t.peer_uid===e.peer_uid);n&&n.B_st!==e.B_st&&Vp(()=>{this.emit(_u.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)})}),this._statsCollector.updateTrafficStats(t)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new pl(ll.UNEXPECTED_ERROR,"can not generate join message, no join info");const t=rr({},this.joinInfo.apResponse);let n=jc("REPORT_APP_SCENARIO");if("string"!=typeof n)try{n=ve(n)}catch(e){n=void 0}n&&n.length>128&&(n=void 0);const r=zf({p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:kc,browser:navigator.userAgent,process_id:jc("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:jc("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:n},e);return this.joinInfo.stringUid&&(r.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(r.aes_mode=this.joinInfo.aesmode,jc("ENCRYPT_AES")?(r.aes_secret=this.joinInfo.aespassword,r.aes_encrypt=!0):r.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(r.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(r.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),r}getRejoinMessage(){if(!this.joinInfo)throw new pl(ll.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(Hl.WS_RECONNECTING,e=>{this.joinInfo&&ih.WebSocketQuit(this.joinInfo.sid,{lts:Ma(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||jl.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",ih.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Ma())}),this.signal.on(Hl.WS_CLOSED,e=>{let t;switch(e){case"LEAVE":t=jl.LEAVE;break;case"UID_BANNED":case"IP_BANNED":case"CHANNEL_BANNED":case"SERVER_ERROR":t=jl.SERVER_ERROR;break;default:t=jl.NETWORK_ERROR}Rc.debug("[signal] websocket closed, reason: ".concat(t||"undefined -> "+jl.NETWORK_ERROR)),this.joinInfo&&ih.WebSocketQuit(this.joinInfo.sid,{lts:Ma(),succ:"LEAVE"===e?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this.reset(),this._disconnectedReason=e,this.state="DISCONNECTED"}),this.signal.on(Hl.WS_CONNECTED,()=>{var e,t,n;if((this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo)&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(Rc.debug(Je(e=Je(t=Je(n="[".concat(this.store.clientId,"] patch to send set client role, role: ")).call(n,this.role,", mode: ")).call(t,this.spec.mode,", level: ")).call(e,this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),ih.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid}),this.joinInfo.useLocalAccessPoint)){const e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);var r;if(!e)return void Rc.error(Je(r="[".concat(this.store.clientId,"] set local access point after joined failed: ")).call(r,e));Vc("EVENT_REPORT_DOMAIN",e[1]),Vc("EVENT_REPORT_BACKUP_DOMAIN",e[1]),Vc("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}}),this.signal.on(ql.ON_UPLINK_STATS,e=>{this._statsCollector.updateUplinkStats(e)}),this.signal.on(Hl.REQUEST_RECOVER,(e,t,n)=>{if(!this.joinInfo)return n(new pl(ll.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Dp(this,_u.REQUEST_NEW_GATEWAY_LIST).then(t).catch(n)}),this.signal.on(Hl.REQUEST_JOIN_INFO,async e=>{var t;this.updateTurnConfigFromSignal();const{iceParameters:n,dtlsParameters:r,rtpCapabilities:i}=await Dp(this,_u.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(t=this.joinInfo)||void 0===t?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:n,dtlsParameters:r,rtpCapabilities:i}}))}),this.signal.on(Hl.REQUEST_REJOIN_INFO,e=>{e(this.getRejoinMessage())}),this.signal.on(Hl.REPORT_JOIN_GATEWAY,(e,t)=>{this.joinInfo&&ih.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:e,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid})}),this.signal.on(Hl.IS_P2P_DISCONNECTED,e=>{e(Bp(this,_u.IS_P2P_DISCONNECTED))}),this.signal.on(Hl.DISCONNECT_P2P,()=>{this.emit(_u.DISCONNECT_P2P)}),this.signal.on(Hl.NEED_RENEW_SESSION,()=>{this.emit(_u.NEED_RENEW_SESSION)}),this.signal.on(Hl.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(Hl.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0}),this.signal.on(Hl.JOIN_RESPONSE,e=>{this.emit(_u.JOIN_RESPONSE,e)})}async tryUnsubBeforeResub(e,t){try{await this.signal.request(Ql.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(e){throw Rc.warning("unsubscribe warning",e),e}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(Ql.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(e){throw Rc.warning("unpublish warning: ",e),e}}async muteLocal(e,t){const n={action:Qo(e).call(e,e=>e.stream_type===mu.Audio)?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(Ql.CONTROL,n,!0,!0)}catch(e){throw Rc.warning("gateway unmuteLocal warning: ",e),e}}async unmuteLocal(e,t){const n={action:Qo(e).call(e,e=>e.stream_type===mu.Audio)?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(Ql.CONTROL,n,!0,!0)}catch(e){throw Rc.warning("gateway muteLocal warning: ",e),e}}uploadStats(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){const t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return{response:await this.signal.request(Ql.RESTART_ICE,t,!0)}}catch(e){throw Rc.warning("P2PChannel.restartICE warning: ",e),e}}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,jl.P2P_FAILED)}}var Kf=Pe("iterator"),Yf=!s((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Kf]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),Jf=2147483647,Xf=/[^\0-\u007E]/,eg=/[.\u3002\uFF0E\uFF61]/g,tg="Overflow: input needs wider integers to process",ng=Math.floor,rg=String.fromCharCode,ig=function(e){return e+22+75*(e<26)},og=function(e,t,n){var r=0;for(e=n?ng(e/700):e>>1,e+=ng(e/t);e>455;r+=36)e=ng(e/35);return ng(r+36*e/(e+38))},sg=function(e){var t,n,r=[],i=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}(e)).length,o=128,s=0,a=72;for(t=0;t<e.length;t++)(n=e[t])<128&&r.push(rg(n));var c=r.length,l=c;for(c&&r.push("-");l<i;){var u=Jf;for(t=0;t<e.length;t++)(n=e[t])>=o&&n<u&&(u=n);var d=l+1;if(u-o>ng((Jf-s)/d))throw RangeError(tg);for(s+=(u-o)*d,o=u,t=0;t<e.length;t++){if((n=e[t])<o&&++s>Jf)throw RangeError(tg);if(n==o){for(var h=s,p=36;;p+=36){var f=p<=a?1:p>=a+26?26:p-a;if(h<f)break;var g=h-f,m=36-f;r.push(rg(ig(f+g%m))),h=ng(g/m)}r.push(rg(ig(h))),a=og(s,d,l==c),s=0,++l}}++s,++o}return r.join("")},ag=function(e){var t=ft(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return U(t.call(e))},cg=le("fetch"),lg=le("Headers"),ug=Pe("iterator"),dg="URLSearchParams",hg="URLSearchParamsIterator",pg=xt.set,fg=xt.getterFor(dg),gg=xt.getterFor(hg),mg=/\+/g,_g=Array(4),vg=function(e){return _g[e-1]||(_g[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},Eg=function(e){try{return decodeURIComponent(e)}catch(r){return e}},Ag=function(e){var t=e.replace(mg," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(vg(n--),Eg);return t}},yg=/[!'()~]|%20/g,Sg={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},bg=function(e){return Sg[e]},Cg=function(e){return encodeURIComponent(e).replace(yg,bg)},Tg=function(e,t){if(t)for(var n,r,i=t.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),e.push({key:Ag(r.shift()),value:Ag(r.join("="))}))},Ig=function(e){this.entries.length=0,Tg(this.entries,e)},Rg=function(e,t){if(e<t)throw TypeError("Not enough arguments")},wg=an((function(e,t){pg(this,{type:hg,iterator:ag(fg(e).entries),kind:t})}),"Iterator",(function(){var e=gg(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),kg=function(){_t(this,kg,dg);var e,t,n,r,i,o,s,a,c,l=arguments.length>0?arguments[0]:void 0,u=this,d=[];if(pg(u,{type:dg,entries:d,updateURL:function(){},updateSearchParams:Ig}),void 0!==l)if(v(l))if("function"==typeof(e=ft(l)))for(n=(t=e.call(l)).next;!(r=n.call(t)).done;){if((s=(o=(i=ag(U(r.value))).next).call(i)).done||(a=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");d.push({key:s.value+"",value:a.value+""})}else for(c in l)y(l,c)&&d.push({key:c,value:l[c]+""});else Tg(d,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:l+"")},Og=kg.prototype;Yt(Og,{append:function(e,t){Rg(arguments.length,2);var n=fg(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){Rg(arguments.length,1);for(var t=fg(this),n=t.entries,r=e+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){Rg(arguments.length,1);for(var t=fg(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){Rg(arguments.length,1);for(var t=fg(this).entries,n=e+"",r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){Rg(arguments.length,1);for(var t=fg(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){Rg(arguments.length,1);for(var n,r=fg(this),i=r.entries,o=!1,s=e+"",a=t+"",c=0;c<i.length;c++)(n=i[c]).key===s&&(o?i.splice(c--,1):(o=!0,n.value=a));o||i.push({key:s,value:a}),r.updateURL()},sort:function(){var e,t,n,r=fg(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function(e){for(var t,n=fg(this).entries,r=B(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new wg(this,"keys")},values:function(){return new wg(this,"values")},entries:function(){return new wg(this,"entries")}},{enumerable:!0}),Kt(Og,ug,Og.entries),Kt(Og,"toString",(function(){for(var e,t=fg(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(Cg(e.key)+"="+Cg(e.value));return n.join("&")}),{enumerable:!0}),yt(kg,dg),Q({global:!0,forced:!Yf},{URLSearchParams:kg}),Yf||"function"!=typeof cg||"function"!=typeof lg||Q({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,i=[e];return arguments.length>1&&(v(t=arguments[1])&&(n=t.body,ht(n)===dg&&((r=t.headers?new lg(t.headers):new lg).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=qt(t,{body:d(0,String(n)),headers:d(0,r)}))),i.push(t)),cg.apply(this,i)}});var Ng,Lg={URLSearchParams:kg,getState:fg},Pg=Cn.codeAt,Dg=o.URL,Mg=Lg.URLSearchParams,xg=Lg.getState,Bg=xt.set,Ug=xt.getterFor("URL"),Fg=Math.floor,Vg=Math.pow,jg="Invalid scheme",Gg="Invalid host",Hg="Invalid port",Qg=/[A-Za-z]/,Wg=/[\d+\-.A-Za-z]/,qg=/\d/,zg=/^(0x|0X)/,Zg=/^[0-7]+$/,$g=/^\d+$/,Kg=/^[\dA-Fa-f]+$/,Yg=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,Jg=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Xg=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,em=/[\u0009\u000A\u000D]/g,tm=function(e,t){var n,r,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return Gg;if(!(n=rm(t.slice(1,-1))))return Gg;e.host=n}else if(dm(e)){if(t=function(e){var t,n,r=[],i=e.toLowerCase().replace(eg,".").split(".");for(t=0;t<i.length;t++)n=i[t],r.push(Xf.test(n)?"xn--"+sg(n):n);return r.join(".")}(t),Yg.test(t))return Gg;if(null===(n=nm(t)))return Gg;e.host=n}else{if(Jg.test(t))return Gg;for(n="",r=Md(t),i=0;i<r.length;i++)n+=lm(r[i],om);e.host=n}},nm=function(e){var t,n,r,i,o,s,a,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=zg.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)s=0;else{if(!(10==o?$g:8==o?Zg:Kg).test(i))return e;s=parseInt(i,o)}n.push(s)}for(r=0;r<t;r++)if(s=n[r],r==t-1){if(s>=Vg(256,5-t))return null}else if(s>255)return null;for(a=n.pop(),r=0;r<n.length;r++)a+=n[r]*Vg(256,3-r);return a},rm=function(e){var t,n,r,i,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,h=function(){return e.charAt(d)};if(":"==h()){if(":"!=e.charAt(1))return;d+=2,u=++l}for(;h();){if(8==l)return;if(":"!=h()){for(t=n=0;n<4&&Kg.test(h());)t=16*t+parseInt(h(),16),d++,n++;if("."==h()){if(0==n)return;if(d-=n,l>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;d++}if(!qg.test(h()))return;for(;qg.test(h());){if(o=parseInt(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;d++}c[l]=256*c[l]+i,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;c[l++]=t}else{if(null!==u)return;d++,u=++l}}if(null!==u)for(s=l-u,l=7;0!=l&&s>0;)a=c[l],c[l--]=c[u+s-1],c[u+--s]=a;else if(8!=l)return;return c},im=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=Fg(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},om={},sm=nr({},om,{" ":1,'"':1,"<":1,">":1,"`":1}),am=nr({},sm,{"#":1,"?":1,"{":1,"}":1}),cm=nr({},am,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),lm=function(e,t){var n=Pg(e,0);return n>32&&n<127&&!y(t,e)?e:encodeURIComponent(e)},um={ftp:21,file:null,http:80,https:443,ws:80,wss:443},dm=function(e){return y(um,e.scheme)},hm=function(e){return""!=e.username||""!=e.password},pm=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},fm=function(e,t){var n;return 2==e.length&&Qg.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},gm=function(e){var t;return e.length>1&&fm(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},mm=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&fm(t[0],!0)||t.pop()},_m=function(e){return"."===e||"%2e"===e.toLowerCase()},vm={},Em={},Am={},ym={},Sm={},bm={},Cm={},Tm={},Im={},Rm={},wm={},km={},Om={},Nm={},Lm={},Pm={},Dm={},Mm={},xm={},Bm={},Um={},Fm=function(e,t,n,r){var i,o,s,a,c,l=n||vm,u=0,d="",h=!1,p=!1,f=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(Xg,"")),t=t.replace(em,""),i=Md(t);u<=i.length;){switch(o=i[u],l){case vm:if(!o||!Qg.test(o)){if(n)return jg;l=Am;continue}d+=o.toLowerCase(),l=Em;break;case Em:if(o&&(Wg.test(o)||"+"==o||"-"==o||"."==o))d+=o.toLowerCase();else{if(":"!=o){if(n)return jg;d="",l=Am,u=0;continue}if(n&&(dm(e)!=y(um,d)||"file"==d&&(hm(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=d,n)return void(dm(e)&&um[e.scheme]==e.port&&(e.port=null));d="","file"==e.scheme?l=Nm:dm(e)&&r&&r.scheme==e.scheme?l=ym:dm(e)?l=Tm:"/"==i[u+1]?(l=Sm,u++):(e.cannotBeABaseURL=!0,e.path.push(""),l=xm)}break;case Am:if(!r||r.cannotBeABaseURL&&"#"!=o)return jg;if(r.cannotBeABaseURL&&"#"==o){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,l=Um;break}l="file"==r.scheme?Nm:bm;continue;case ym:if("/"!=o||"/"!=i[u+1]){l=bm;continue}l=Im,u++;break;case Sm:if("/"==o){l=Rm;break}l=Mm;continue;case bm:if(e.scheme=r.scheme,o==Ng)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==o||"\\"==o&&dm(e))l=Cm;else if("?"==o)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",l=Bm;else{if("#"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),l=Mm;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",l=Um}break;case Cm:if(!dm(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,l=Mm;continue}l=Rm}else l=Im;break;case Tm:if(l=Im,"/"!=o||"/"!=d.charAt(u+1))continue;u++;break;case Im:if("/"!=o&&"\\"!=o){l=Rm;continue}break;case Rm:if("@"==o){h&&(d="%40"+d),h=!0,s=Md(d);for(var g=0;g<s.length;g++){var m=s[g];if(":"!=m||f){var _=lm(m,cm);f?e.password+=_:e.username+=_}else f=!0}d=""}else if(o==Ng||"/"==o||"?"==o||"#"==o||"\\"==o&&dm(e)){if(h&&""==d)return"Invalid authority";u-=Md(d).length+1,d="",l=wm}else d+=o;break;case wm:case km:if(n&&"file"==e.scheme){l=Pm;continue}if(":"!=o||p){if(o==Ng||"/"==o||"?"==o||"#"==o||"\\"==o&&dm(e)){if(dm(e)&&""==d)return Gg;if(n&&""==d&&(hm(e)||null!==e.port))return;if(a=tm(e,d))return a;if(d="",l=Dm,n)return;continue}"["==o?p=!0:"]"==o&&(p=!1),d+=o}else{if(""==d)return Gg;if(a=tm(e,d))return a;if(d="",l=Om,n==km)return}break;case Om:if(!qg.test(o)){if(o==Ng||"/"==o||"?"==o||"#"==o||"\\"==o&&dm(e)||n){if(""!=d){var v=parseInt(d,10);if(v>65535)return Hg;e.port=dm(e)&&v===um[e.scheme]?null:v,d=""}if(n)return;l=Dm;continue}return Hg}d+=o;break;case Nm:if(e.scheme="file","/"==o||"\\"==o)l=Lm;else{if(!r||"file"!=r.scheme){l=Mm;continue}if(o==Ng)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==o)e.host=r.host,e.path=r.path.slice(),e.query="",l=Bm;else{if("#"!=o){gm(i.slice(u).join(""))||(e.host=r.host,e.path=r.path.slice(),mm(e)),l=Mm;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",l=Um}}break;case Lm:if("/"==o||"\\"==o){l=Pm;break}r&&"file"==r.scheme&&!gm(i.slice(u).join(""))&&(fm(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),l=Mm;continue;case Pm:if(o==Ng||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&fm(d))l=Mm;else if(""==d){if(e.host="",n)return;l=Dm}else{if(a=tm(e,d))return a;if("localhost"==e.host&&(e.host=""),n)return;d="",l=Dm}continue}d+=o;break;case Dm:if(dm(e)){if(l=Mm,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=Ng&&(l=Mm,"/"!=o))continue}else e.fragment="",l=Um;else e.query="",l=Bm;break;case Mm:if(o==Ng||"/"==o||"\\"==o&&dm(e)||!n&&("?"==o||"#"==o)){if(".."===(c=(c=d).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(mm(e),"/"==o||"\\"==o&&dm(e)||e.path.push("")):_m(d)?"/"==o||"\\"==o&&dm(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&fm(d)&&(e.host&&(e.host=""),d=d.charAt(0)+":"),e.path.push(d)),d="","file"==e.scheme&&(o==Ng||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",l=Bm):"#"==o&&(e.fragment="",l=Um)}else d+=lm(o,am);break;case xm:"?"==o?(e.query="",l=Bm):"#"==o?(e.fragment="",l=Um):o!=Ng&&(e.path[0]+=lm(o,om));break;case Bm:n||"#"!=o?o!=Ng&&("'"==o&&dm(e)?e.query+="%27":e.query+="#"==o?"%23":lm(o,om)):(e.fragment="",l=Um);break;case Um:o!=Ng&&(e.fragment+=lm(o,sm))}u++}},Vm=function(e){var t,n,r=_t(this,Vm,"URL"),i=arguments.length>1?arguments[1]:void 0,o=String(e),s=Bg(r,{type:"URL"});if(void 0!==i)if(i instanceof Vm)t=Ug(i);else if(n=Fm(t={},String(i)))throw TypeError(n);if(n=Fm(s,o,null,t))throw TypeError(n);var c=s.searchParams=new Mg,l=xg(c);l.updateSearchParams(s.query),l.updateURL=function(){s.query=String(c)||null},a||(r.href=Gm.call(r),r.origin=Hm.call(r),r.protocol=Qm.call(r),r.username=Wm.call(r),r.password=qm.call(r),r.host=zm.call(r),r.hostname=Zm.call(r),r.port=$m.call(r),r.pathname=Km.call(r),r.search=Ym.call(r),r.searchParams=Jm.call(r),r.hash=Xm.call(r))},jm=Vm.prototype,Gm=function(){var e=Ug(this),t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,l=t+":";return null!==i?(l+="//",hm(e)&&(l+=n+(r?":"+r:"")+"@"),l+=im(i),null!==o&&(l+=":"+o)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},Hm=function(){var e=Ug(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&dm(e)?t+"://"+im(e.host)+(null!==n?":"+n:""):"null"},Qm=function(){return Ug(this).scheme+":"},Wm=function(){return Ug(this).username},qm=function(){return Ug(this).password},zm=function(){var e=Ug(this),t=e.host,n=e.port;return null===t?"":null===n?im(t):im(t)+":"+n},Zm=function(){var e=Ug(this).host;return null===e?"":im(e)},$m=function(){var e=Ug(this).port;return null===e?"":String(e)},Km=function(){var e=Ug(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Ym=function(){var e=Ug(this).query;return e?"?"+e:""},Jm=function(){return Ug(this).searchParams},Xm=function(){var e=Ug(this).fragment;return e?"#"+e:""},e_=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(a&&se(jm,{href:e_(Gm,(function(e){var t=Ug(this),n=String(e),r=Fm(t,n);if(r)throw TypeError(r);xg(t.searchParams).updateSearchParams(t.query)})),origin:e_(Hm),protocol:e_(Qm,(function(e){var t=Ug(this);Fm(t,String(e)+":",vm)})),username:e_(Wm,(function(e){var t=Ug(this),n=Md(String(e));if(!pm(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=lm(n[r],cm)}})),password:e_(qm,(function(e){var t=Ug(this),n=Md(String(e));if(!pm(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=lm(n[r],cm)}})),host:e_(zm,(function(e){var t=Ug(this);t.cannotBeABaseURL||Fm(t,String(e),wm)})),hostname:e_(Zm,(function(e){var t=Ug(this);t.cannotBeABaseURL||Fm(t,String(e),km)})),port:e_($m,(function(e){var t=Ug(this);pm(t)||(""==(e=String(e))?t.port=null:Fm(t,e,Om))})),pathname:e_(Km,(function(e){var t=Ug(this);t.cannotBeABaseURL||(t.path=[],Fm(t,e+"",Dm))})),search:e_(Ym,(function(e){var t=Ug(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Fm(t,e,Bm)),xg(t.searchParams).updateSearchParams(t.query)})),searchParams:e_(Jm),hash:e_(Xm,(function(e){var t=Ug(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Fm(t,e,Um)):t.fragment=null}))}),Kt(jm,"toJSON",(function(){return Gm.call(this)}),{enumerable:!0}),Kt(jm,"toString",(function(){return Gm.call(this)}),{enumerable:!0}),Dg){var t_=Dg.createObjectURL,n_=Dg.revokeObjectURL;t_&&Kt(Vm,"createObjectURL",(function(e){return t_.apply(Dg,arguments)})),n_&&Kt(Vm,"revokeObjectURL",(function(e){return n_.apply(Dg,arguments)}))}yt(Vm,"URL"),Q({global:!0,forced:!Yf,sham:!a},{URL:Vm});var r_=M.URL;function i_(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}!function(){var t;function n(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},o=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e];for(var n=0;n<t.length;++n){var r=t[n];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function s(e,t){if(t)e:{var n=o;e=e.split(".");for(var r=0;r<e.length-1;r++){var s=e[r];if(!(s in n))break e;n=n[s]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:n(e)}}if(s("Symbol",(function(e){function t(e,t){this.A=e,i(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}})),s("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<t.length;r++){var s=o[t[r]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&i(s.prototype,e,{configurable:!0,writable:!0,value:function(){return a(n(this))}})}return e})),"function"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var l;e:{var u={};try{u.__proto__={a:!0},l=u.a;break e}catch(e){}l=!1}r=l?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var d=r;function h(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function p(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function f(e,t){return e.h=3,{value:t}}function g(e){this.g=new h,this.G=e}function m(e,t,n,r){try{var i=t.call(e.g.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.m=!1,i;var o=i.value}catch(t){return e.g.j=null,e.g.s(t),_(e)}return e.g.j=null,r.call(e.g,o),_(e)}function _(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function v(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){p(e.g);var n=e.g.j;return n?m(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),_(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function E(e,t){return t=new v(new g(t)),d&&e.prototype&&d(t,e.prototype),t}if(h.prototype.o=function(e){this.v=e},h.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},h.prototype.return=function(e){this.l={return:e},this.h=this.u},g.prototype.o=function(e){return p(this.g),this.g.j?m(this,this.g.j.next,e,this.g.o):(this.g.o(e),_(this))},g.prototype.s=function(e){return p(this.g),this.g.j?m(this,this.g.j.throw,e,this.g.o):(this.g.s(e),_(this))},s("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var A=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},y=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},S=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"==typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},b=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},C="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,T=C.FormData,I=C.XMLHttpRequest&&C.XMLHttpRequest.prototype.send,R=C.Request&&C.fetch,w=C.navigator&&C.navigator.sendBeacon,k=C.Element&&C.Element.prototype,O=C.Symbol&&Symbol.toStringTag;O&&(Blob.prototype[O]||(Blob.prototype[O]="Blob"),"File"in C&&!File.prototype[O]&&(File.prototype[O]="File"));try{new File([],"")}catch(e){C.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),O&&Object.defineProperty(e,O,{value:"File"}),e}}var N=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},L=function(e){this.i=[];var t=this;e&&A(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];A(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?A(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?y(e.value):e.value,t.append(e.name,n))}))};if((t=L.prototype).append=function(e,t,n){b(arguments,2),this.i.push(S(e,t,n))},t.delete=function(e){b(arguments,1);var t=[];e=String(e),A(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},t.entries=function e(){var t,n=this;return E(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=f(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},t.forEach=function(e,t){b(arguments,1);for(var n=c(this),r=n.next();!r.done;r=n.next()){var i=c(r.value);r=i.next().value,i=i.next().value,e.call(t,i,r,this)}},t.get=function(e){b(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},t.getAll=function(e){b(arguments,1);var t=[];return e=String(e),A(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},t.has=function(e){b(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},t.keys=function e(){var t,n,r,i,o=this;return E(e,(function(e){if(1==e.h&&(t=c(o),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,i=c(r),f(e,i.next().value));n=t.next(),e.h=2}))},t.set=function(e,t,n){b(arguments,2),e=String(e);var r=[],i=S(e,t,n),o=!0;A(this.i,(function(t){t[0]===e?o&&(o=!r.push(i)):r.push(t)})),o&&r.push(i),this.i=r},t.values=function e(){var t,n,r,i,o=this;return E(e,(function(e){if(1==e.h&&(t=c(o),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,(i=c(r)).next(),f(e,i.next().value));n=t.next(),e.h=2}))},L.prototype._asNative=function(){for(var e=new T,t=c(this),n=t.next();!n.done;n=t.next()){var r=c(n.value);n=r.next().value,r=r.next().value,e.append(n,r)}return e},L.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,r){return"string"==typeof e?t.push(n+N(y(r))+'"\r\n\r\n'+y(e)+"\r\n"):t.push(n+N(y(r))+'"; filename="'+N(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},L.prototype[Symbol.iterator]=function(){return this.entries()},L.prototype.toString=function(){return"[object FormData]"},k&&!k.matches&&(k.matches=k.matchesSelector||k.mozMatchesSelector||k.msMatchesSelector||k.oMatchesSelector||k.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),O&&(L.prototype[O]="FormData"),I){var P=C.XMLHttpRequest.prototype.setRequestHeader;C.XMLHttpRequest.prototype.setRequestHeader=function(e,t){P.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},C.XMLHttpRequest.prototype.send=function(e){e instanceof L?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),I.call(this,e)):I.call(this,e)}}R&&(C.fetch=function(e,t){return t&&t.body&&t.body instanceof L&&(t.body=t.body._blob()),R.call(this,e,t)}),w&&(C.navigator.sendBeacon=function(e,t){return t instanceof L&&(t=t._asNative()),w.call(this,e,t)}),C.FormData=L}}();let o_=1;function s_(e,t,n,r,i){o_+=1;const o={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Ma()/1e3),seq:o_,requestId:o_,version:kc,cname:n.cname},s={service_name:t,json_body:ve(o)};let a,c,l=e[0];return Kd(async()=>{a=Ma();const e=await Wd(l,{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Ma()-a,0!==e.code){const t=new pl(ll.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:c});throw Rc.error(t.toString()),t}const n=JSON.parse(e.json_body);if(200!==n.code){var i;const e=new pl(ll.UNEXPECTED_RESPONSE,Je(i="live streaming app center error, code: ".concat(n.code,", reason: ")).call(i,n.reason),{code:n.code,responseTime:c});throw Rc.error(e.toString()),e}if(!n.servers||0===n.servers.length){const e=new pl(ll.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:n.code,responseTime:c});throw Rc.error(e.toString()),e}const o=function(e,t){var n;return{addressList:vo(n=e.servers).call(n,e=>{var n,r,i;return Je(n=Je(r=Je(i="wss://".concat(e.address.replace(/\./g,"-"),".")).call(i,jc("WORKER_DOMAIN"),":")).call(r,e.wss,"?serviceName=")).call(n,encodeURIComponent(t))}),workerToken:e.workerToken,vid:e.vid}}(n,t);return jc("LIVE_STREAMING_ADDRESS")&&(o.addressList=jc("LIVE_STREAMING_ADDRESS")instanceof Array?jc("LIVE_STREAMING_ADDRESS"):[jc("LIVE_STREAMING_ADDRESS")]),function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=i_(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=i_(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}({},o,{responseTime:c})},(r,i)=>(ih.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:ve(r.addressList),firstSuccess:0===i,responseTime:c,serverIp:e[i%e.length]}),!1),(r,i)=>(ih.apworkerEvent(n.sid,{success:!1,sc:r.data&&r.data.code||200,serviceName:t,responseTime:c,serverIp:e[i%e.length]}),!!(r.code!==ll.OPERATION_ABORTED&&r.code!==ll.UNEXPECTED_RESPONSE||r.data&&r.data.retry)&&(l=e[(i+1)%e.length],!0)),i)}let a_=1;function c_({url:e,areaCode:t},n,r,i){const o=Ma(),[s,a]=p_(n,t,[Rd.CHOOSE_SERVER]);let c=zd.networkState;return Kd(async()=>{c&&zd.networkState===Pu.OFFLINE&&zd.onlineWaiter&&await fo.race([zd.onlineWaiter,Ip(i&&i.maxRetryTimeout||Zd.maxRetryTimeout)]),c=zd.networkState;const t=await Wd(e,{data:s,cancelToken:r,headers:{"Content-Type":"multipart/form-data;"}},!0);ih.reportResourceTiming(e,n.sid),u_(t,e,n,o,[Rd.CHOOSE_SERVER]);const a=vp(t,Rd.CHOOSE_SERVER);return d_(a),pp(a,e)},t=>(t&&ih.joinChooseServer(n.sid,{lts:o,succ:!0,csAddr:e,opid:a,serverList:t.gatewayAddrs,ec:null,cid:t.cid.toString(),uid:t.uid.toString(),csIp:t.csIp,unilbsServerIds:[Rd.CHOOSE_SERVER].toString()}),!1),t=>t.code!==ll.OPERATION_ABORTED&&(t.code===ll.CAN_NOT_GET_GATEWAY_SERVER?t.data.retry:(ih.joinChooseServer(n.sid,{lts:o,succ:!1,csAddr:e,serverList:null,opid:a,ec:t.code,csIp:t.data&&t.data.csIp,unilbsServerIds:[Rd.CHOOSE_SERVER].toString(),extend:ve({networkState:c})}),Rc.warning("[".concat(n.clientId,"] Choose server network error, retry"),t),!0)),i)}function l_({url:e,areaCode:t,serviceIds:n},r,i,o){const s=Ma(),[a,c]=p_(r,t,n);let l=void 0;return Kd(async()=>{l&&zd.networkState===Pu.OFFLINE&&zd.onlineWaiter&&await fo.race([zd.onlineWaiter,Ip(o&&o.maxRetryTimeout||Zd.maxRetryTimeout)]),l=zd.networkState;const t=await Wd(e,{data:a,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0);ih.reportResourceTiming(e,r.sid),u_(t,e,r,s,n);const c=vp(t,Rd.CHOOSE_SERVER),u=vp(t,"proxy5"===r.cloudProxyServer?Rd.CLOUD_PROXY_5:Rd.CLOUD_PROXY);return d_(c),{gatewayInfo:pp(c,e),proxyInfo:u,url:e}},t=>{var i;return t.gatewayInfo&&ih.joinChooseServer(r.sid,{lts:s,succ:!0,csAddr:e,serverList:t.gatewayInfo.gatewayAddrs,ec:null,opid:c,cid:t.gatewayInfo.cid.toString(),uid:t.gatewayInfo.uid.toString(),csIp:t.gatewayInfo.csIp,unilbsServerIds:n.toString()}),t.proxyInfo&&ih.joinWebProxyAP(r.sid,{lts:s,sucess:1,apServerAddr:e,turnServerAddrList:vo(i=t.proxyInfo.addresses).call(i,e=>e.ip).join(","),errorCode:null,eventType:r.cloudProxyServer,unilbsServerIds:n.toString()}),!1},t=>t.code!==ll.OPERATION_ABORTED&&(t.code===ll.CAN_NOT_GET_GATEWAY_SERVER?t.data.retry:(ih.joinWebProxyAP(r.sid,{lts:s,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:r.cloudProxyServer,unilbsServerIds:n.toString(),extend:ve({networkState:l})}),Rc.warning("[".concat(r.clientId,"] multi unilbs network error, retry"),t),!0)),o)}const u_=(e,t,n,r,i)=>{var o,s,a;const c=[];if(Xn(o=e.response_body).call(o,o=>{const s=o.buffer.code;if(0!==s){const a=ef(s),l={error:new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,a.desc,{retry:a.retry,csIp:e.detail[502]}),flag:o.buffer.flag};c.push(l),4096===l.flag?ih.joinChooseServer(n.sid,{lts:r,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:l.error.message,csIp:l.error.data&&l.error.data.csIp,unilbsServerIds:i.toString()}):1048576!==l.flag&&4194304!==l.flag||ih.joinWebProxyAP(n.sid,{lts:r,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:l.error.code,eventType:n.cloudProxyServer,unilbsServerIds:i.toString()})}}),c.length)throw Rc.warning(Je(s=Je(a="[".concat(n.clientId,"] multi unilbs ")).call(a,t," failed, ")).call(s,vo(c).call(c,e=>{var t,n;return Je(t=Je(n="flag: ".concat(e.flag,", message: ")).call(n,e.error.message,", retry: ")).call(t,e.error.data.retry)}).join(" | "))),new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,vo(c).call(c,e=>{var t;return Je(t="flag: ".concat(e.flag,", message: ")).call(t,e.error.message)}).join(" | "),{retry:!!Qo(c).call(c,e=>e.error.data.retry),csIp:e.detail[502]})},d_=e=>{if(e.addresses&&0===e.addresses.length&&0===e.code)throw new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(jc("GATEWAY_ADDRESS")&&jc("GATEWAY_ADDRESS").length>0){var t;Rc.debug("assign gateway address to",jc("GATEWAY_ADDRESS"));const n=vo(t=jc("GATEWAY_ADDRESS")).call(t,t=>({ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket}));e.addresses=n}},h_=(e,t)=>{if(e.response_body&&e.response_body.length){const t=e.response_body[0];if(0!==t.buffer.code){var n;const e=ef(t.buffer.code);throw new pl(ll.UPDATE_TICKET_FAILED,Je(n="[".concat(t.buffer.code,"]: ")).call(n,e.desc),{retry:e.retry})}return t.buffer.ticket}throw Rc.debug("update ticket request received ap response without response body:",t),new pl(ll.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},p_=(e,t,n)=>{var r;const i=Math.floor(Math.random()*10**12),o={appid:e.appId,client_ts:Ma(),opid:i,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:{6:e.stringUid,11:t,12:jc("USE_NEW_TOKEN")?"1":void 0},key:e.token,service_ids:n,uid:e.uid||0}}]};Xn(r=o.request_bodies).call(r,t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=ve({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))});const s=new FormData;return s.append("request",ve(o)),[s,i]},f_=(e,t)=>{var n;const r=Math.floor(Math.random()*10**12),i={appid:e.appId,client_ts:Ma(),opid:r,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:vo(n=e.apResponse.addresses).call(n,e=>({ip:e.ip,port:e.port}))}}]},o=new FormData;return o.append("request",ve(i)),[o,r]},g_=()=>{const e=jc("AREAS");return 0===e.length&&e.push("GLOBAL"),ur(e).call(e,(e,t,n)=>{const r=m_(t);var i;return r?0===n?r:Je(i="".concat(e,",")).call(i,r):e},"")},m_=e=>{var t,n,r,i,o;return"OVERSEA"===e?Je(t=Je(n=Je(r=Je(i=Je(o="".concat(Tu.ASIA,",")).call(o,Tu.EUROPE,",")).call(i,Tu.AFRICA,",")).call(r,Tu.NORTH_AMERICA,",")).call(n,Tu.SOUTH_AMERICA,",")).call(t,Tu.OCEANIA):Tu[e]},__={GLOBAL:{ASIA:["CHINA","JAPAN","INDIA","KOREA"],EUROPE:[],NORTH_AMERICA:[],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},v_=or(__.GLOBAL),E_=["CHINA","NORTH_AMERICA","EUROPE","ASIA","JAPAN","INDIA","OCEANIA","SOUTH_AMERICA","AFRICA","KOREA"],A_=function(e,t){let n=[];if(rs(e).call(e,"GLOBAL")){const i=["GLOBAL","OVERSEA"],o=or(Iu);if("GLOBAL"===t)throw new pl(ll.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if("CHINA"===t)n=["OVERSEA"];else if(r=t,rs(v_).call(v_,r)){const e=__.GLOBAL[t]||[],r=[...i,t,...e];n=Gr(o).call(o,e=>!rs(r).call(r,e))}else if(function(e){let t=!1;return Xn(v_).call(v_,n=>{var r;rs(r=__.GLOBAL[n]).call(r,e)&&(t=!0)}),t}(t)){const e=function(e){let t;return Xn(v_).call(v_,n=>{var r;rs(r=__.GLOBAL[n]).call(r,e)&&(t=n)}),t}(t),r=[...i,e,t];n=Gr(o).call(o,e=>!rs(r).call(r,e))}else n=e;n=function(e){const t=[];return Xn(E_).call(E_,n=>{rs(e).call(e,n)&&t.push(n)}),Je(t).call(t,Gr(e).call(e,e=>!rs(E_).call(E_,e)))}(n)}else n=e;var r;return n};function y_(e){const t=ih.reportApiInvoke(null,{name:Nl.SET_AREA,options:e,tag:Ll.TRACER});try{var n;let t=[];if("string"==typeof e&&(t=[e]),hl(e)&&(Xn(e).call(e,e=>{if(!rs(Cu).call(Cu,e))throw new pl(ll.INVALID_PARAMS,"invalid area code")}),t=e),"[object Object]"===Object.prototype.toString.call(e)){const{areaCode:n,excludedArea:r}=e;if(!n)throw new pl(ll.INVALID_PARAMS,"area code is needed");let i=n;"string"==typeof n&&(i=[n]),t=r?A_(i,r):i}Vc("AREAS",t);const r=(e=>{const t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return vo(e).call(e,e=>{const n=Iu[e],r=or(n);r&&vo(r).call(r,e=>{var r;"CODE"!==e&&(t[e]=Je(r=t[e]).call(r,n[e]))})}),t})(t);vo(n=or(r)).call(n,e=>{Vc(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?r[e][0]:r[e])}),Rc.debug("set area success:",t.join(","))}catch(e){throw t.onError(e),e}t.onSuccess()}async function S_(e,t,n){const r=async function(e,t,n){var r,i;const o=vo(r=Uo(i=jc("WEBCS_DOMAIN")).call(i,0,jc("AJAX_REQUEST_CONCURRENT"))).call(r,t=>{var n;return{url:e.proxyServer?Je(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:g_()}});let s=null;const a=[],c=async()=>await Zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:r=>(Rc.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),c_(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:a}),l=async()=>{var r;if(await Ip(1e3),null!==s)return s;const i=vo(r=jc("WEBCS_DOMAIN_BACKUP_LIST")).call(r,t=>{var n;return{url:e.proxyServer?Je(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:g_()}});return await Zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(Rc.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),c_(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:a})};try{return s=await Pp([c(),l()]),a.length&&Xn(a).call(a,e=>e.cancel&&"function"==typeof e.cancel&&e.cancel()),s}catch(e){throw e[0]}}(e,t,n);return{gatewayInfo:await r}}async function b_(e,t,n,r){var i,o;if("disabled"===e.cloudProxyServer)return r?await S_(e,t,n):void 0;let s;if("443only"===e.cloudProxyServer||"normal"===e.cloudProxyServer){var a;let i;r?"normal"!==e.cloudProxyServer?[i,s]=await fo.all([T_(e,t,n),S_(e,t,n)]):(i=await T_(e,t,n),e.proxyServer=i.addresses[0],ih.setProxyServer(e.proxyServer),Rc.setProxyServer(e.proxyServer),s=await S_(e,t,n)):(s=void 0,"normal"!==e.cloudProxyServer?i=await T_(e,t,n):(i=await T_(e,t,n),e.proxyServer=i.addresses[0],ih.setProxyServer(e.proxyServer),Rc.setProxyServer(e.proxyServer))),e.turnServer={mode:"manual",servers:vo(a=i.addresses).call(a,t=>({turnServerURL:t,tcpport:"proxy3"===e.cloudProxyServer?void 0:i.serverResponse.tcpport?i.serverResponse.tcpport:Nc.tcpport,udpport:"proxy4"===e.cloudProxyServer?void 0:i.serverResponse.udpport?i.serverResponse.udpport:Nc.udpport,username:i.serverResponse.username||Nc.username,password:i.serverResponse.password||Nc.password,forceturn:"proxy4"!==e.cloudProxyServer&&"proxy5"!==e.cloudProxyServer,security:"proxy5"===e.cloudProxyServer}))}}else{const{proxyInfo:r,gatewayInfo:i}=await async function(e,t,n){var r,i;const o=jc("PROXY_SERVER_TYPE3"),s=(e,t)=>{var n;let r=o;return hl(r)&&(r=t%2==0?o[1]:o[0]),Je(n="https://".concat(r,"/ap/?url=")).call(n,e)},a=vo(r=Uo(i=jc("WEBCS_DOMAIN")).call(i,0,jc("AJAX_REQUEST_CONCURRENT"))).call(r,(t,n)=>({url:s("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),areaCode:g_(),serviceIds:[Rd.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?Rd.CLOUD_PROXY_5:Rd.CLOUD_PROXY]}));let c=null;const l=[],u=async()=>await Zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:a,asyncMapHandler:r=>(Rc.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),l_(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:l}),d=async()=>{var r;if(await Ip(1e3),null!==c)return c;const i=vo(r=jc("WEBCS_DOMAIN_BACKUP_LIST")).call(r,(e,t)=>({url:s("".concat(e,"/api/v2/transpond/webrtc?v=2"),t),areaCode:g_(),serviceIds:[11,18]}));return await Zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(Rc.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),l_(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:l})};let h,p,f;try{({gatewayInfo:h,proxyInfo:p,url:f}=await Pp([u(),d()]))}catch(e){throw e[0]}if(l.length&&Xn(l).call(l,e=>e.cancel&&"function"==typeof e.cancel&&e.cancel()),!h||!p)throw new pl(ll.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(hl(o)&&f){const t=new r_(f).host;rs(o).call(o,t)&&(e.proxyServer=t,Rc.setProxyServer(t),ih.setProxyServer(t))}return c={gatewayInfo:h,proxyInfo:await Ep(p,h.uid)},c}(e,t,n);s={gatewayInfo:i},e.turnServer={mode:"manual",servers:vo(r).call(r,t=>({turnServerURL:t.address,tcpport:"proxy3"===e.cloudProxyServer?void 0:t.tcpport?t.tcpport:Nc.tcpport,udpport:"proxy4"===e.cloudProxyServer?void 0:t.udpport?t.udpport:Nc.udpport,username:t.username||Nc.username,password:t.password||Nc.password,forceturn:"proxy4"!==e.cloudProxyServer&&"proxy5"!==e.cloudProxyServer,security:"proxy5"===e.cloudProxyServer}))}}return Rc.debug(Je(i=Je(o="[".concat(e.clientId,"] set proxy server: ")).call(o,e.proxyServer,", mode: ")).call(i,e.cloudProxyServer)),s}async function C_(e,t,n,r){var i;const o=Uo(i=jc("ACCOUNT_REGISTER")).call(i,0,jc("AJAX_REQUEST_CONCURRENT"));let s=[];return s=t.proxyServer?vo(o).call(o,e=>{var n;return Je(n="https://".concat(t.proxyServer,"/ap/?url=")).call(n,e+"/api/v1")}):vo(o).call(o,e=>"https://".concat(e,"/api/v1")),(await async function(e,t,n,r,i){const o=Ma(),s={sid:n.sid,opid:10,appid:n.appId,string_uid:t};let a=e[0];const c=await Kd(()=>Wd(a+"".concat(-1===Lo(a).call(a,"?")?"?":"&","action=stringuid"),{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(n,r)=>{if(0===n.code){var i;if(n.uid<=0||n.uid>=Math.pow(2,32))throw Rc.error(Je(i="Invalid Uint Uid ".concat(t," => ")).call(i,n.uid),n),ih.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:ll.INVALID_UINT_UID_FROM_STRING_UID,extend:s}),new pl(ll.INVALID_UINT_UID_FROM_STRING_UID);return ih.reqUserAccount(s.sid,{lts:o,success:!0,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:null,extend:s}),!1}const c=ef(n.code);return c.retry&&(a=e[(r+1)%e.length]),ih.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:c.desc,extend:s}),c.retry},(t,n)=>t.code!==ll.OPERATION_ABORTED&&(ih.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:null,errorCode:t.code,extend:s}),a=e[(n+1)%e.length],!0),i);if(0!==c.code){const e=ef(c.code);throw new pl(ll.UNEXPECTED_RESPONSE,e.desc)}return c}(s,e,t,n,r)).uid}async function T_(e,t,n){var r,i;let o=Ma();const s=vo(r=jc("normal"===e.cloudProxyServer?"PROXY_CS":"WEBCS_DOMAIN")).call(r,t=>{var n;return e.proxyServer?Je(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v1"):"https://".concat(t,"/api/v1")});if("proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer||"proxy5"===e.cloudProxyServer){const r=vo(s).call(s,e=>({url:e,areaCode:g_()}));let i=null;i=await Zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:r,asyncMapHandler:r=>function({url:e,areaCode:t},n,r,i){const o=Ma(),s={opid:133,flag:"proxy5"===n.cloudProxyServer?4194304:1048576,ts:+new Date,key:n.token,cname:n.cname,sid:n.sid,detail:{6:n.stringUid,11:t},uid:n.uid||0};return Kd(async()=>await Wd(e,{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":69}}),t=>{var r;if(0===t.code)return ih.joinWebProxyAP(n.sid,{lts:o,sucess:1,apServerAddr:e,turnServerAddrList:vo(r=t.addresses).call(r,e=>e.ip).join(","),errorCode:null,eventType:n.cloudProxyServer}),!1;const i=ef(t.code);throw new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,i.desc,{retry:i.retry})},t=>{return t.code!==ll.OPERATION_ABORTED&&(t.code===ll.CAN_NOT_GET_GATEWAY_SERVER?(ih.joinWebProxyAP(s.sid,{lts:o,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:n.cloudProxyServer}),Rc.warning(Je(r=Je(i=Je(a="[".concat(n.clientId,"] proxy ap server ")).call(a,e," failed, message: ")).call(i,t.message,", retry: ")).call(r,t.data.retry)),t.data.retry):(ih.joinWebProxyAP(s.sid,{lts:o,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:n.cloudProxyServer}),!0));var r,i,a},i)}(r,e,t,n),allFailedhandler:()=>{throw Rc.error("[".concat(e.clientId,"] can not get proxy server after trying several times")),new pl(ll.CAN_NOT_GET_PROXY_SERVER)}});const o=i.addresses;if(!o||0===o.length)throw Rc.error("[".concat(e.clientId,"] can not get proxy server, empty proxy server list")),new pl(ll.CAN_NOT_GET_PROXY_SERVER,"empty proxy server list");return{addresses:vo(o).call(o,e=>e.ip),serverResponse:{tcpport:o[0].port||443,udpport:o[0].port||Nc.udpport,username:Nc.username,password:Nc.password}}}let a=null;a=await Zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:r=>function(e,t,n,r){const i=Ma(),o={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,uid:t.uid,cname:t.cname,ts:Math.floor(Ma()/1e3),version:kc,seq:0,requestId:1};return Kd(async()=>({res:await Wd(e,{data:{service_name:"webrtc_proxy",json_body:ve(o)},cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}}),url:e}),e=>{if(!e.res.json_body)throw Rc.debug("[".concat(t.clientId,"] Get proxy server failed: no json_body")),new pl(ll.UNEXPECTED_RESPONSE,ve(e.res));const n=JSON.parse(e.res.json_body);var r,i;if(200!==n.code)throw Rc.debug(Je(r=Je(i="[".concat(t.clientId,"] Get proxy server failed: response code [")).call(i,n.code,"], reason [")).call(r,n.reason,"]")),new pl(ll.UNEXPECTED_RESPONSE,ve(e.res));return Rc.debug("[".concat(t.clientId,"] App return server length"),n.servers.length),!1},t=>t.code!==ll.OPERATION_ABORTED&&(ih.requestProxyAppCenter(o.sid,{lts:i,succ:!1,APAddr:e,workerManagerList:null,ec:t.code,response:t.message}),!0),r)}(r,e,t,n),allFailedhandler:()=>{throw Rc.error("[".concat(e.clientId,"] can not get proxy server after trying several times")),new pl(ll.CAN_NOT_GET_PROXY_SERVER)}});const c=JSON.parse(a.res.json_body),l=vo(i=c.servers).call(i,dp);if("443only"===e.cloudProxyServer)return{addresses:l,serverResponse:{tcpport:443,udpport:Nc.udpport,username:Nc.username,password:Nc.password}};ih.requestProxyAppCenter(e.sid,{lts:o,succ:!0,APAddr:a.url,workerManagerList:ve(l),ec:null,response:ve(a.res)}),o=Ma();const u=vo(l).call(l,r=>function(e,t,n,r){const i=Ma();let o=e;Is(e).call(e,"http")||(o="https://".concat(e,":4000/v2/machine"));const s={command:"request",gatewayType:"http",appId:t.appId,cname:t.cname,uid:(t.uid||"").toString(),sdkVersion:"2.3.1",sid:t.sid,seq:1,ts:Ma(),requestId:3,clientRequest:{appId:t.appId,cname:t.cname,uid:(t.uid||"").toString(),sid:t.sid}};return Kd(async()=>({res:await Wd(o,{data:s,cancelToken:n}),url:e}),e=>{if(!e.res.serverResponse)throw new pl(ll.UNEXPECTED_RESPONSE,"requeet worker manager server failed: serverResponse is undefined");return!1},t=>t.code!==ll.OPERATION_ABORTED&&(ih.requestProxyWorkerManager(s.sid,{lts:i,succ:!1,workerManagerAddr:e,ec:t.code,response:t.message}),!0),r)}(r,e,t,n));let d=null;try{d=await Pp(u)}catch(t){throw Rc.error("[".concat(e.clientId,"] can not get worker manager after trying several times")),new pl(ll.CAN_NOT_GET_PROXY_SERVER)}return Xn(u).call(u,e=>e.cancel()),ih.requestProxyWorkerManager(e.sid,{lts:o,succ:!0,workerManagerAddr:d.url,ec:null,response:ve(d.res)}),{addresses:[d.url],serverResponse:d.res.serverResponse}}async function I_(e,t,n){var r,i;const o=vo(r=Uo(i=jc("CDS_AP")).call(i,0,jc("AJAX_REQUEST_CONCURRENT"))).call(r,t=>{var n;return e.proxyServer?Je(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v1"):"https://".concat(t,"/api/v1?action=config")}),s=vo(o).call(o,r=>function(e,t,n,r){const i=ma(),o={flag:64,cipher_method:0,features:{device:i.name,system:i.os,system_general:navigator.userAgent,vendor:t.appId,version:kc,cname:t.cname,sid:t.sid,session_id:t.sid,detail:"",proxyServer:t.proxyServer}};return Kd(()=>Wd(e,{data:o,timeout:1e3,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}}),void 0,e=>e.code!==ll.OPERATION_ABORTED,r)}(r,e,t,n));let a=null,c=null,l={};try{a=await Pp(s)}catch(e){if(e.code===ll.OPERATION_ABORTED)throw e;c=e}if(Xn(s).call(s,e=>e.cancel()),ih.reportApiInvoke(e.sid,{name:Nl.REQUEST_CONFIG_DISTRIBUTE,options:{error:c,res:a}}).onSuccess(),a&&a.test_tags)try{l=function(e){if(!e.test_tags)return{};const t=e.test_tags,n=or(t),r={};return Xn(n).call(n,e=>{var n;const i=Os(n=Uo(e).call(e,4)).call(n),o=JSON.parse(t[e])[1];r[i]=o}),r}(a)}catch(e){}return l}async function R_(e,t,n,r){var i,o;const s=vo(i=Uo(o=jc("UAP_AP")).call(o,0,jc("AJAX_REQUEST_CONCURRENT"))).call(i,e=>{var n;return t.proxyServer?Je(n="https://".concat(t.proxyServer,"/ap/?url=")).call(n,e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")});return await s_(s,e,t,n,r)}async function w_(e,t,n){var r,i;const o=vo(r=Uo(i=jc("UAP_AP")).call(i,0,jc("AJAX_REQUEST_CONCURRENT"))).call(r,t=>{var n;return e.proxyServer?Je(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v1?action=uap"):"https://".concat(t,"/api/v1?action=uap")}),s=vo(o).call(o,r=>function(e,t,n,r){const i={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:Ma(),version:kc,cname:t.cname,uid:t.uid.toString(),requestId:a_,seq:a_};a_+=1;const o={service_name:"tele_channel",json_body:ve(i)};return Kd(async()=>{var t;const r=await Wd(e,{data:o,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==r.code){const e=new pl(ll.UNEXPECTED_RESPONSE,"cross channel ap error, code"+r.code,{retry:!0});throw Rc.error(e.toString()),e}const i=JSON.parse(r.json_body);if(200!==i.code){var s;const e=new pl(ll.UNEXPECTED_RESPONSE,Je(s="cross channel app center error, code: ".concat(i.code,", reason: ")).call(s,i.reason));throw Rc.error(e.toString()),e}if(!i.servers||0===i.servers.length){const e=new pl(ll.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw Rc.error(e.toString()),e}return{vid:i.vid,workerToken:i.workerToken,addressList:vo(t=i.servers).call(t,e=>{var t,n;return Je(t=Je(n="wss://".concat(e.address.replace(/\./g,"-"),".")).call(n,jc("WORKER_DOMAIN"),":")).call(t,e.wss)})}},void 0,e=>!!(e.code!==ll.OPERATION_ABORTED&&e.code!==ll.UNEXPECTED_RESPONSE||e.data&&e.data.retry),r)}(r,e,t,n));try{const e=await Pp(s);return Xn(s).call(s,e=>e.cancel()),e}catch(e){throw e[0]}}async function k_(e,t,n){let r=null;const i=[],o=async o=>{var s;const a=vo(s=jc(o?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN")).call(s,t=>{var n;return e.proxyServer?Je(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2")});return o&&(await Ip(1e3),null!==r)?r:await Zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:a,asyncMapHandler:r=>{var i;return Rc.debug(Je(i="[".concat(e.clientId,"] update ticket, Connect to ")).call(i,o?"backup":""," choose_server:"),r),function(e,t,n,r){const[i]=f_(t,[Rd.CHOOSE_SERVER]);let o=zd.networkState;return Kd(async()=>{o&&zd.networkState===Pu.OFFLINE&&zd.onlineWaiter&&await fo.race([zd.onlineWaiter,Ip(r&&r.maxRetryTimeout||Zd.maxRetryTimeout)]),o=zd.networkState;const t=await Wd(e,{data:i,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);return h_(t,e)},()=>!1,e=>e.code!==ll.OPERATION_ABORTED&&(e.code===ll.UPDATE_TICKET_FAILED?e.data.retry:(Rc.warning("[".concat(t.clientId,"] update ticket network error, retry"),e),!0)),r)}(r,e,t,n)},allFailedhandler:e=>{throw e[0]},promisesCollector:i})};try{return r=await Pp([o(!1),o(!0)]),i.length&&Xn(i).call(i,e=>e.cancel&&"function"==typeof e.cancel&&e.cancel()),r}catch(e){throw e[0]}}function O_(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function N_(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=O_(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=O_(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}class L_ extends Mu{constructor(){super(),this.retryConfig={timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4},this.mutex=new ah("config-distribute"),this.mutableParamsRead=!1}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),this.updateConfigDistribute(),this.interval=window.setInterval(()=>{this.updateConfigDistribute()},jc("CONFIG_DISTRIBUTE_INTERVAL"))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,ih.reportApiInvoke(null,{options:void 0,name:Nl.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Ll.TRACER}).onSuccess(ve(Hc))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void Rc.debug("[config-distribute] get config distribute interrupted have no joininfo");let e;const t=await this.mutex.lock();try{e=await I_(this.joinInfo,this.cancelToken,this.retryConfig),Rc.debug("[config-distribute] get config distribute",ve(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(e){const t=new pl(ll.NETWORK_RESPONSE_ERROR,e);Rc.warning("[config-distribute] ".concat(t.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&void 0!==t.uplink.max_bitrate&&void 0!==t.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(Ru.UPDATE_BITRATE_LIMIT,e):this.emit(Ru.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&N_({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t,n;const r=cl(t=Gr(n=or(e)).call(n,e=>/^webrtc_ng_global_parameter/.test(e))).call(t);for(let o=0;o<r.length;o++)for(let t=r.length-1;t>o;t--){const n=r[t];if("number"==typeof e[n].__priority){const i=e[n].__priority,o=r[t-1];if("number"==typeof e[o].__priority){if(!(i>e[o].__priority))continue;{const e=n;r[t]=r[t-1],r[t-1]=e}}else{const e=n;r[t]=r[t-1],r[t-1]=e}}}const i={};Xn(r).call(r,t=>{var n;const r=e[t],o=r.__expires;Xn(n=or(r)).call(n,e=>{"__priority"!==e&&"__expires"!==e&&!Object.prototype.hasOwnProperty.call(i,e)&&r[e]&&(i[e]=N_({value:r[e]},o&&{expires:o}))})});try{const e=ve(i),t=window.btoa(e);window.localStorage.setItem("websdk_ng_global_parameter",t),Rc.debug("Caching global parameters ".concat(e))}catch(e){Rc.error("Error caching global parameters:",e.message)}}}function P_(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function D_(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=P_(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=P_(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}class M_ extends Mu{constructor(e,t,n,r){super(),this.reconnectMode="retry",this.reqId=0,this.commandReqId=0,this.handleWebSocketOpen=()=>{this.reconnectMode="retry",this.startPingPong()},this.handleWebSocketMessage=e=>{if(!e.data)return;const t=JSON.parse(e.data);var n;t.requestId?this.emit(Je(n="@".concat(t.requestId,"-")).call(n,t.sid),t):this.serviceMode===ou.INJECT?this.emit(du.INJECT_STREAM_STATUS,t):(ih.workerEvent(this.spec.sid,{actionType:"status",serverCode:t.code,workerType:this.serviceMode===ou.TRANSCODE?1:2}),this.emit(du.PUBLISH_STREAM_STATUS,t))},this.spec=t,this.token=e,this.serviceMode=r,this.websocket=new Hf("live-streaming",n),this.websocket.on(iu.CONNECTED,this.handleWebSocketOpen),this.websocket.on(iu.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(iu.REQUEST_NEW_URLS,(e,t)=>{Dp(this,du.REQUEST_NEW_ADDRESS).then(e).catch(t)}),this.websocket.on(iu.RECONNECTING,()=>{this.websocket.reconnectMode=this.reconnectMode})}init(e){return this.websocket.init(e)}async request(e,t,n,r){this.reqId+=1,"request"===e&&(this.commandReqId+=1);const i=this.commandReqId,o=this.reqId;if(!o||!this.websocket)throw new pl(ll.UNEXPECTED_ERROR);const s=D_({command:e,sdkVersion:"4.8.1"===kc?"0.0.1":kc,seq:o,requestId:o,allocate:n,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Ma()/1e3)},t);if("closed"===this.websocket.state)throw new pl(ll.WS_DISCONNECT);const a=()=>new fo((e,t)=>{this.websocket.once(iu.CLOSED,()=>t(new pl(ll.WS_ABORT))),this.websocket.once(iu.CONNECTED,e)});"connected"!==this.websocket.state&&await a(),s.clientRequest&&(s.clientRequest.workerToken=this.token);const c=new fo((e,t)=>{var n;const r=()=>{t(new pl(ll.WS_ABORT))};this.websocket.once(iu.RECONNECTING,r),this.websocket.once(iu.CLOSED,r),this.once(Je(n="@".concat(o,"-")).call(n,this.spec.sid),t=>{e(t)})});r&&ih.workerEvent(this.spec.sid,D_({},r,{requestId:i,actionType:"request",payload:ve(t.clientRequest),serverCode:0,code:0}));const l=Ma();this.websocket.sendMessage(s);let u=null;try{u=await c}catch(r){if("closed"===this.websocket.state)throw r;return await a(),await this.request(e,t,n)}return r&&ih.workerEvent(this.spec.sid,D_({},r,{requestId:i,actionType:"response",payload:ve(u.serverResponse),serverCode:u.code,success:200===u.code,responseTime:Ma()-l})),200!==u.code&&this.handleResponseError(u),u}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const e="4.8.1"===kc?"0.0.1":kc;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Ma()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case pu.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void Rc.warning("live stream response already exists stream");case pu.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case pu.LIVE_STREAM_RESPONSE_BAD_STREAM:case pu.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new pl(ll.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case pu.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case pu.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new pl(ll.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case pu.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const t=new pl(ll.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(du.WARNING,t,e.serverResponse.url)}case pu.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const t=new pl(ll.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(du.WARNING,t,e.serverResponse.url)}case pu.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case pu.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new pl(ll.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case pu.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const t=new pl(ll.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(du.WARNING,t,e.serverResponse.url)}case pu.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case pu.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case pu.LIVE_STREAM_RESPONSE_WORKER_LOST:case pu.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case pu.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case pu.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case pu.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case pu.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case pu.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new pl(ll.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(Np)},6e3)}}function x_(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function B_(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=x_(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=x_(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}class U_ extends Mu{constructor(e,t=Zd,n=Zd){super(),this.retryTimeout=1e4,this.streamingTasks=new xn,this.isStartingStreamingTask=!1,this.taskMutex=new ah("live-streaming"),this.cancelToken=Sc.CancelToken.source(),this.injectConfig=B_({},uu),this.injectLoopTimes=0,this.lastTaskId=1,this.statusError=new xn,this.spec=e,this.httpRetryConfig=n,this.wsRetryConfig=t}async setTranscodingConfig(e){var t;const n=B_({},lu,{},e);var r,i;66!==n.videoCodecProfile&&77!==n.videoCodecProfile&&100!==n.videoCodecProfile&&(Rc.debug(Je(r="[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ")).call(r,n.videoCodecProfile," -> 100")),n.videoCodecProfile=100),n.transcodingUsers||(n.transcodingUsers=n.userConfigs),n.transcodingUsers&&(n.transcodingUsers=vo(i=n.transcodingUsers).call(i,e=>B_({},su,{},e,{zOrder:e.zOrder?e.zOrder+1:1}))),function(e){var t,n;yl(e.width)||ml(e.width,"config.width",0,1e4),yl(e.height)||ml(e.height,"config.height",0,1e4),yl(e.videoBitrate)||ml(e.videoBitrate,"config.videoBitrate",1,1e6),yl(e.videoFrameRate)||ml(e.videoFrameRate,"config.videoFrameRate"),yl(e.lowLatency)||fl(e.lowLatency,"config.lowLatency"),yl(e.audioSampleRate)||gl(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),yl(e.audioBitrate)||ml(e.audioBitrate,"config.audioBitrate",1,128),yl(e.audioChannels)||gl(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),yl(e.videoGop)||ml(e.videoGop,"config.videoGop"),yl(e.videoCodecProfile)||gl(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),yl(e.userCount)||ml(e.userCount,"config.userCount",0,17),yl(e.backgroundColor)||ml(e.backgroundColor,"config.backgroundColor",0,16777215),yl(e.userConfigExtraInfo)||_l(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&!yl(e.transcodingUsers)&&(vl(e.transcodingUsers,"config.transcodingUsers"),Xn(t=e.transcodingUsers).call(t,(e,t)=>{Al(e.uid),yl(e.x)||ml(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),yl(e.y)||ml(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),yl(e.width)||ml(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),yl(e.height)||ml(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),yl(e.zOrder)||ml(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),yl(e.alpha)||ml(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)})),yl(e.watermark)||cu(e.watermark,"watermark"),yl(e.backgroundImage)||cu(e.backgroundImage,"backgroundImage"),e.images&&!yl(e.images)&&(vl(e.images,"config.images"),Xn(n=e.images).call(n,(e,t)=>{cu(e,"images[".concat(t,"]"))}))}(n);const o=[];var s,a;n.images&&o.push(...vo(s=n.images).call(s,e=>B_({},au,{},e,{zOrder:255}))),n.backgroundImage&&(o.push(B_({},au,{},n.backgroundImage,{zOrder:0})),delete n.backgroundImage),n.watermark&&(o.push(B_({},au,{},n.watermark,{zOrder:255})),delete n.watermark),n.images=o,n.transcodingUsers&&(n.userConfigs=vo(a=n.transcodingUsers).call(a,e=>B_({},e)),n.userCount=n.transcodingUsers.length,delete n.transcodingUsers);const c=vo(t=n.userConfigs||[]).call(t,e=>"number"==typeof e.uid?fo.resolve(e.uid):C_(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig)),l=await fo.all(c);if(Xn(l).call(l,(e,t)=>{n.userConfigs&&n.userConfigs[t]&&(n.userConfigs[t].uid=e)}),this.transcodingConfig=n,this.connection)try{var u,d,h;const e=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:vo(u=Bd(Jp(d=this.streamingTasks).call(d))).call(u,e=>e.taskId).join("#")});Rc.debug(Je(h="[".concat(this.spec.clientId,"] update live transcoding config success, code: ")).call(h,e.code,", config:"),ve(this.transcodingConfig))}catch(e){var p;if(!e.data||!e.data.retry)throw e;e.data.changeAddress&&this.connection.tryNextAddress(),Xn(p=this.streamingTasks).call(p,t=>{Rc.warning("[".concat(this.spec.clientId,"] live streaming receive error"),e.toString(),"try to republish",t.url),this.startLiveStreamingTask(t.url,t.mode,e).then(()=>{var e;Rc.debug(Je(e="[".concat(this.spec.clientId,"] live streaming republish ")).call(e,t.url," success"))}).catch(e=>{Rc.error("[".concat(this.spec.clientId,"] live streaming republish failed"),t.url,e.toString()),this.onLiveStreamError&&this.onLiveStreamError(t.url,e)})})}}setInjectStreamConfig(e,t){this.injectConfig=rr({},this.injectConfig,e),this.injectLoopTimes=t}async startLiveStreamingTask(e,t,n){var r,i,o,s;if(Qo(r=Bd(Jp(i=this.streamingTasks).call(i))).call(r,e=>e.mode===ou.INJECT)&&t===ou.INJECT)return new pl(ll.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw();if(!this.transcodingConfig&&t===ou.TRANSCODE)throw new pl(ll.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");let a={command:"PublishStream",ts:Ma(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};Rc.debug(Je(o=Je(s="[".concat(this.spec.clientId,"] start live streaming ")).call(s,e,", mode: ")).call(o,t));const c=await this.taskMutex.lock();if(!this.connection&&n)return void c();if(this.streamingTasks.get(e)&&!n)return c(),new pl(ll.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(e){throw c(),e}switch(t){case ou.TRANSCODE:a.transcodingConfig=B_({},this.transcodingConfig);break;case ou.RAW:break;case ou.INJECT:a={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Ma(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(a.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const l=this.lastTaskId++;try{var u;const r=new fo((t,r)=>{Ip(this.retryTimeout).then(()=>{if(n)return r(n);const t=this.statusError.get(e);return t?(this.statusError.delete(e),r(t)):void 0})}),i=await fo.race([this.connection.request("request",{clientRequest:a},!0,{url:e,command:"PublishStream",workerType:t===ou.TRANSCODE?1:2,requestByUser:!n,tid:l.toString()}),r]);this.isStartingStreamingTask=!1,Rc.debug(Je(u="[".concat(this.spec.clientId,"] live streaming started, code: ")).call(u,i.code)),this.streamingTasks.set(e,{clientRequest:a,mode:t,url:e,taskId:l}),c()}catch(r){if(c(),this.isStartingStreamingTask=!1,!r.data||!r.data.retry||n)throw r;return r.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,r)):await this.startLiveStreamingTask(e,t,r)}}stopLiveStreamingTask(e){return new fo((t,n)=>{const r=this.streamingTasks.get(e);if(!r||!this.connection)return new pl(ll.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const i=r.mode;r.abortTask=()=>{Rc.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:i===ou.INJECT?"UninjectStream":"UnpublishStream",url:r.url}},!1,{url:e,command:"UnPublishStream",workerType:i===ou.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then(n=>{var r;Rc.debug(Je(r="[".concat(this.spec.clientId,"] stop live streaming success, code: ")).call(r,n.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&i!==ou.INJECT&&(this.connection&&this.connection.close(),this.connection=void 0),t(),i===ou.INJECT&&this.onInjectStatusChange&&this.onInjectStatusChange(5,this.spec.uid,e)}).catch(n)})}async controlInjectStream(e,t,n,r){const i=this.streamingTasks.get(e);if(!i||!this.connection||i.mode!==ou.INJECT)throw new pl(ll.INVALID_OPERATION,"can not find inject stream task to control");return(await this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:t,audioVolume:n,position:r}})).serverResponse}resetAllTask(){var e;const t=Bd(Jp(e=this.streamingTasks).call(e));this.terminate();for(const n of t)this.startLiveStreamingTask(n.url,n.mode).catch(e=>{this.onLiveStreamError&&this.onLiveStreamError(n.url,e)})}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new xn,this.isStartingStreamingTask=!1,this.statusError=new xn,this.cancelToken=Sc.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new pl(ll.UNEXPECTED_ERROR,"live streaming connection has already connected");const t=await Dp(this,hu.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new M_(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(du.WARNING,(e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)),this.connection.on(du.PUBLISH_STREAM_STATUS,e=>this.handlePublishStreamServer(e)),this.connection.on(du.INJECT_STREAM_STATUS,e=>this.handleInjectStreamServerStatus(e)),this.connection.on(du.REQUEST_NEW_ADDRESS,(t,n)=>{if(!this.connection)return n(new pl(ll.UNEXPECTED_ERROR,"can not get new live streaming address list"));Dp(this,hu.REQUEST_WORKER_MANAGER_LIST,e).then(e=>{this.uapResponse=e,t(e.addressList)}).catch(n)}),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){const t=e.serverStatus&&e.serverStatus.url||"empty_url",n=this.streamingTasks.get(t),r=e.reason;switch(e.code){case pu.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case pu.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case pu.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case pu.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const r=new pl(ll.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(n)return Rc.error(r.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,r);if(!this.isStartingStreamingTask)return;this.statusError.set(t,r)}case pu.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const e=new pl(ll.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,r);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)}case pu.LIVE_STREAM_RESPONSE_WORKER_LOST:case pu.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var i;if(!this.connection)return;this.connection.tryNextAddress();const t=Bd(Jp(i=this.streamingTasks).call(i));for(const n of t)n.abortTask?n.abortTask():(Rc.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",n.url),this.startLiveStreamingTask(n.url,n.mode,new pl(ll.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then(()=>{Rc.debug("[".concat(this.spec.clientId,"] republish live stream success"),n.url)}).catch(e=>{Rc.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(n.url,e)}));return}}}handleInjectStreamServerStatus(e){const t=Number(e.uid),n=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(0,t,n));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(1,t,n),void this.streamingTasks.delete(n);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(2,t,n),void this.streamingTasks.delete(n);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(10,t,n),void this.streamingTasks.delete(n);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(3,t,n),void this.streamingTasks.delete(n);default:return void Rc.debug("inject stream server status",e)}}hasUrl(e){return this.streamingTasks.has(e)}}class F_{constructor(){this.destChannelMediaInfos=new xn}setSrcChannelInfo(e){Su(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){Su(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){El(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function V_(e){if(!(e instanceof F_))return new pl(ll.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const t=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfo();return t?0===n.size?new pl(ll.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new pl(ll.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}class j_ extends Mu{constructor(e,t,n){super(),this.requestId=1,this.onOpen=()=>{this.emit("open"),this.startHeartBeatCheck()},this.onClose=e=>{this.emit("close"),this.dispose()},this.onMessage=e=>{const t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(this.emit("status",t.serverStatus),void this.emit(t.serverStatus.command,t.serverStatus)):void 0;this.emit("req_".concat(t.requestId),t)},this.joinInfo=e,this.clientId=t,this.ws=new Hf("cross-channel-".concat(this.clientId),n),this.ws.on(iu.RECONNECTING,()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")}),this.ws.on(iu.CONNECTED,this.onOpen),this.ws.on(iu.ON_MESSAGE,this.onMessage),this.ws.on(iu.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(e){const t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new fo((t,n)=>{const r=window.setTimeout(()=>{n(new pl(ll.TIMEOUT,"wait status timeout, status: ".concat(e)))},5e3);this.once(e,i=>{window.clearTimeout(r),i.state&&0!==i.state?n(new pl(ll.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)}),this.once("dispose",()=>{window.clearTimeout(r),n(new pl(ll.WS_ABORT))})})}async request(e){if("closed"===this.ws.state)throw new pl(ll.WS_DISCONNECT);const t=()=>new fo((e,t)=>{this.ws.once(iu.CLOSED,()=>t(new pl(ll.WS_ABORT))),this.ws.once(iu.CONNECTED,e)});"connected"!==this.ws.state&&await t();const n=this.sendMessage(e),r=new fo((e,t)=>{const r=()=>{t(new pl(ll.WS_ABORT))};this.ws.once(iu.RECONNECTING,r),this.ws.once(iu.CLOSED,r),this.once("req_".concat(n),e),Ip(3e3).then(()=>{this.removeAllListeners("req_".concat(n)),this.ws.off(iu.RECONNECTING,r),this.ws.off(iu.CLOSED,r),t(new pl(ll.TIMEOUT,"cross channel ws request timeout"))})}),i=await r;if(!i||200!==i.code)throw new pl(ll.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(ve(i)));return i}async connect(e){this.ws.removeAllListeners(iu.REQUEST_NEW_URLS),this.ws.on(iu.REQUEST_NEW_URLS,t=>{t(e)}),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){const t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer=window.setInterval(()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})},3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class G_ extends Mu{constructor(e,t,n,r){super(),this.cancelToken=Sc.CancelToken.source(),this.requestId=0,this._state="RELAY_STATE_IDLE",this.errorCode="RELAY_OK",this.onStatus=e=>{var t;Rc.debug(Je(t="[".concat(this.clientId,"] ChannelMediaStatus: ")).call(t,ve(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&this.emit("event","PACKET_RECEIVED_AUDIO_FROM_SRC"),"onVideoPacketReceived"===e.command&&this.emit("event","PACKET_RECEIVED_VIDEO_FROM_SRC"),"onSrcTokenPrivilegeDidExpire"===e.command&&(this.errorCode="SRC_TOKEN_EXPIRED",this.state="RELAY_STATE_FAILURE"),"onDestTokenPrivilegeDidExpire"===e.command&&(this.errorCode="DEST_TOKEN_EXPIRED",this.state="RELAY_STATE_FAILURE"))},this.onReconnect=async()=>{Rc.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event","NETWORK_DISCONNECTED"),this.state="RELAY_STATE_IDLE",this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch(e=>{"RELAY_STATE_IDLE"!==this.state&&(Rc.error("auto restart channel media relay failed",e.toString()),this.errorCode="SERVER_CONNECTION_LOST",this.state="RELAY_STATE_FAILURE")})},this.joinInfo=e,this.clientId=t,this.signal=new j_(this.joinInfo,this.clientId,n),this.httpRetryConfig=r}set state(e){e!==this._state&&("RELAY_STATE_FAILURE"!==e&&(this.errorCode="RELAY_OK"),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}async startChannelMediaRelay(e){if("RELAY_STATE_IDLE"!==this.state)throw new pl(ll.INVALID_OPERATION);this.state="RELAY_STATE_CONNECTING",await this.connect(),Rc.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(e){if(e.data&&e.data.serverResponse&&"SetSourceChannel"===e.data.serverResponse.command)throw new pl(ll.CROSS_CHANNEL_FAILED_JOIN_SRC);if(e.data&&e.data.serverResponse&&"SetDestChannelStatus"===e.serverResponse.command)throw new pl(ll.CROSS_CHANNEL_FAILED_JOIN_DEST);if(e.data&&e.data.serverResponse&&"StartPacketTransfer"===e.serverResponse.command)throw new pl(ll.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw e}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if("RELAY_STATE_RUNNING"!==this.state)throw new pl(ll.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),Rc.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state="RELAY_STATE_IDLE",this.dispose()}dispose(){Rc.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Sc.CancelToken.source(),this.state="RELAY_STATE_IDLE",this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const e=await w_(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event","NETWORK_CONNECTED"),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){const t=this.genMessage(gu.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),Rc.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const n=this.genMessage(gu.SetSdkProfile,e);await this.signal.request(n),Rc.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const r=this.genMessage(gu.SetSourceChannel,e);await this.signal.request(r),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event","PACKET_JOINED_SRC_CHANNEL"),Rc.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const i=this.genMessage(gu.SetSourceUserId,e);await this.signal.request(i),Rc.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const o=this.genMessage(gu.SetDestChannel,e);await this.signal.request(o),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event","PACKET_JOINED_DEST_CHANNEL"),Rc.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const s=this.genMessage(gu.StartPacketTransfer,e);await this.signal.request(s),this.emit("event","PACKET_SENT_TO_DEST_CHANNEL"),this.state="RELAY_STATE_RUNNING",Rc.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success"))}async sendUpdateMessage(e){const t=this.genMessage(gu.UpdateDestChannel,e);await this.signal.request(t),this.emit("event","PACKET_UPDATE_DEST_CHANNEL"),Rc.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const e=this.genMessage(gu.StopPacketTransfer);await this.signal.request(e),Rc.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){const n=[],r=[],i=[];this.requestId+=1;const o={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:kc,sid:this.joinInfo.sid,ts:Ma(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.8.1"===o.sdkVersion&&(o.sdkVersion="0.0.1");let s=null,a=null;switch(e){case gu.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case gu.SetSourceChannel:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new pl(ll.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceChannel",uid:"0",channelName:a.channelName,token:a.token||this.joinInfo.appId},o;case gu.SetSourceUserId:if(a=t&&t.getSrcChannelMediaInfo(),!a)throw new pl(ll.UNEXPECTED_ERROR,"can not find source config");return o.clientRequest={command:"SetSourceUserId",uid:a.uid+""},o;case gu.SetDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new pl(ll.UNEXPECTED_ERROR,"can not find dest config");return Xn(s).call(s,e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)}),o.clientRequest={command:"SetDestChannel",channelName:n,uid:r,token:i},o;case gu.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case gu.Reconnect:return o.clientRequest={command:"Reconnect"},o;case gu.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case gu.UpdateDestChannel:if(s=t&&t.getDestChannelMediaInfo(),!s)throw new pl(ll.UNEXPECTED_ERROR,"can not find dest config");return Xn(s).call(s,e=>{n.push(e.channelName),r.push(e.uid+""),i.push(e.token||this.joinInfo.appId)}),o.clientRequest={command:"UpdateDestChannel",channelName:n,uid:r,token:i},o}return o}}class H_{constructor(e){this.freezeTimeCounterList=[],this.timeUpdatedCount=0,this.freezeTime=0,this.playbackTime=0,this.lastTimeUpdatedTime=0,this._videoElementStatus=dl.NONE,this.isGettingVideoDimensions=!1,this.handleVideoEvents=e=>{switch(e.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=dl.PLAYING;break;case"loadeddata":this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded();break;case"canplay":this.videoElementStatus=dl.CANPLAY;break;case"stalled":this.videoElementStatus=dl.STALLED;break;case"suspend":this.videoElementStatus=dl.SUSPEND;break;case"pause":this.videoElementStatus=dl.PAUSED,!Ra()&&!Na()&&this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(Rc.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=dl.WAITING;break;case"abort":this.videoElementStatus=dl.ABORT;break;case"ended":this.videoElementStatus=dl.ENDED;break;case"emptied":this.videoElementStatus=dl.EMPTIED;break;case"timeupdate":{const e=Ma();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=e);const t=e-this.lastTimeUpdatedTime;for(this.lastTimeUpdatedTime=e,t>500&&(this.freezeTime+=t),this.playbackTime+=t;this.playbackTime>=6e3;)this.playbackTime-=6e3,this.freezeTimeCounterList.push(Math.min(6e3,this.freezeTime)),this.freezeTime=Math.max(0,this.freezeTime-6e3);break}}},this.startGetVideoDimensions=()=>{const e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement&&this.videoElement.videoWidth*this.videoElement.videoHeight>4)return Rc.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);Fa(e,500)};!this.isGettingVideoDimensions&&e()},this.autoResumeAfterInterruption=()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===ph.curState&&(ka()?(Rc.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()):Oa()?(Rc.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.load(),this.videoElement.play()):(Rc.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 14")),this.videoElement.play()))},this.autoResumeAfterInterruptionOnIOS15=()=>{this.videoElement&&this.videoTrack&&"live"===this.videoTrack.readyState&&(ka()?(Rc.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.0")),this.videoElement.pause(),this.videoElement.play()):Oa()&&(Rc.debug("[track-".concat(this.trackId,"] video element paused, auto resume for iOS 15.1")),this.videoElement.load(),this.videoElement.play()))},this.slot=e.element,this.trackId=e.trackId,this.updateConfig(e),ph.on(uh.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),ph.on(uh.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15)}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){var t,n;e!==this._videoElementStatus&&(Rc.debug(Je(t=Je(n="[".concat(this.trackId,"] video-element-status change ")).call(n,this._videoElementStatus," => ")).call(t,e)),this._videoElementStatus=e)}updateConfig(e){this.config=e,this.trackId=e.trackId;const t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){if(this.videoElement){const t=this.videoElement.play();t&&t.catch&&t.catch(t=>{e&&ih.autoplayFailed(e,"video",t.message,this.trackId),"NotAllowedError"===t.name?(Rc.warning("detected video element autoplay failed",t),this.handleAutoPlayFailed()):Rc.warning("[".concat(this.trackId,"] play warning: "),t)});const n=ma();("Safari"===n.name&&15===Number(n.version)||wa())&&t&&t.finally&&t.finally(()=>{this.config.mirror&&this.videoElement&&(this.videoElement.style.transform="rotateY(180deg)")})}}getCurrentFrame(){if(!this.videoElement)return new ImageData(2,2);const e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const t=e.getContext("2d");if(!t)return Rc.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);const n=t.getImageData(0,0,e.width,e.height);return e.remove(),n}destroy(){if(ph.off(uh.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),ph.off(uh.IOS_15_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15),this.videoElement&&(this.videoElement.srcObject=null,this.videoElement.remove(),this.videoElement=void 0),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(e){}this.container=void 0}this.freezeTimeCounterList=[]}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",this.createVideoElement(),this.container.appendChild(this.videoElement)):this.removeVideoElement(),this.slot.appendChild(this.container)}createVideoElement(){this.videoElement||(this.videoElementStatus=dl.INIT,this.videoElement=document.createElement("video"),this.videoElement.onerror=()=>this.videoElementStatus=dl.ERROR,this.container&&this.container.appendChild(this.videoElement),Xn(Q_).call(Q_,e=>{this.videoElement&&this.videoElement.addEventListener(e,this.handleVideoEvents)}),this.videoElementCheckInterval=window.setInterval(()=>{!document.getElementById("video_".concat(this.trackId))&&this.videoElement&&(this.videoElementStatus=dl.DESTROYED)},1e3)),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),this.videoElement.style.left="0",this.videoElement.style.top="0";const e=ma();"Safari"===e.name&&15===Number(e.version)||wa()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Ia()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,Ia()&&this.videoElement.load());const t=this.videoElement.play();void 0!==t&&t.catch(e=>{Rc.debug("[".concat(this.trackId,"] playback interrupted"),e.toString())})}removeVideoElement(){if(this.videoElement){Xn(Q_).call(Q_,e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)}),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0);try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=void 0,this.videoElementStatus=dl.NONE}}handleAutoPlayFailed(){const e=ma();if(this.videoElement){const t=n=>{n.preventDefault(),this.videoElement&&(this.videoElement.play().then(()=>{var e;Rc.debug(Je(e="[".concat(this.trackId,"] Video element for trackId:")).call(e,this.trackId," autoplay resumed."))}).catch(e=>{Rc.error(e)}),"Android"!==e.os||"Chrome"!==e.name&&e.name!==ha.WECHAT?(document.body.removeEventListener("touchstart",t,!0),document.body.removeEventListener("mousedown",t,!0)):document.body.removeEventListener("click",t,!0))};"Android"!==e.os||"Chrome"!==e.name&&e.name!==ha.WECHAT?(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0)):document.body.addEventListener("click",t,!0),Xd()}}getVideoElement(){return this.videoElement}getContainerElement(){return this.container}}const Q_=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate"];function W_(e,t,n){const r=e.createShader(n);if(!r)return new pl(ll.WEBGL_INTERNAL_ERROR,"can not create shader").throw();if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(r);return e.deleteShader(r),new pl(ll.WEBGL_INTERNAL_ERROR,"error compiling shader:"+t).throw()}return r}function q_(e,t,n,r){const i=[];for(let o=0;o<t.length;++o){const n=0===o?e.VERTEX_SHADER:e.FRAGMENT_SHADER;i.push(W_(e,t[o],n))}return function(e,t,n,r){const i=e.createProgram();if(!i)throw new pl(ll.WEBGL_INTERNAL_ERROR,"can not create webgl program");if(Xn(t).call(t,t=>{e.attachShader(i,t)}),n&&Xn(n).call(n,(t,n)=>{e.bindAttribLocation(i,r?r[n]:n,t)}),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS)){const t=e.getProgramInfoLog(i);throw e.deleteProgram(i),new pl(ll.WEBGL_INTERNAL_ERROR,"error in program linking:"+t)}return i}(e,i,n,r)}var z_;!document.documentMode&&window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(z_=HTMLCanvasElement.prototype.getContext,function(){let e=arguments;const t=e[0];return"webgl"===t&&(e=Uo([]).call(arguments),e[0]="experimental-webgl"),z_.apply(null,e)}));const Z_=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function $_(e){const t=new Uint8Array([99,114,121,112,116,105,105]),n=t.length,r=e,i=r.length,o=new Uint8Array(i),s=new Uint8Array(256);for(let d=0;d<256;d++)s[d]=d;let a=0;for(let d=0;d<256;d++)a=(a+s[d]+t[d%n])%256,[s[d],s[a]]=[s[a],s[d]];let c,l=0;a=0;for(let d=0;d<0+i;d++)l=(l+1)%256,a=(a+s[l])%256,[s[l],s[a]]=[s[a],s[l]],c=s[(s[l]+s[a])%256],d>=0&&(o[d-0]=r[d-0]^c);const u=String.fromCharCode.apply(null,Bd(o));return Function("var winSize = 5; return `"+u+"`")()}function K_(e,t){const n=$_(t),r=q_(e,[$_(Z_),n]);{const t=e.getAttribLocation(r,"a_position"),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(t);const i=2,o=e.FLOAT,s=!1,a=0,c=0;e.vertexAttribPointer(t,i,o,s,a,c)}{const t=e.getAttribLocation(r,"a_texCoord"),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(t);const i=2,o=e.FLOAT,s=!1,a=0,c=0;e.vertexAttribPointer(t,i,o,s,a,c)}return r}const Y_=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];class J_{constructor(e,t){this.gl=e,this.kernel=t||Y_,this.program=K_(this.gl,this.kernel)}setUniforms(){const e=this.gl.getUniformLocation(this.program,"u_flipY");this.gl.uniform1f(e,1)}}class X_ extends J_{constructor(e,t,n,r){super(e,t),this.denoiseLevel=5,this.xOffset=1/n,this.yOffset=1/r}setUniforms(){const e=this.gl.getUniformLocation(this.program,"u_flipY"),t=this.gl.getUniformLocation(this.program,"u_singleStepOffset"),n=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform2f(t,this.xOffset,this.yOffset),this.gl.uniform1f(n,this.denoiseLevel),this.gl.uniform1f(e,1)}setParameters(e){void 0!==e.denoiseLevel&&(this.denoiseLevel=e.denoiseLevel)}setSize(e,t){this.xOffset=1/e,this.yOffset=1/t}}const ev=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];class tv extends X_{constructor(e,t,n){super(e,ev,t,n)}}const nv=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];class rv extends X_{constructor(e,t,n){super(e,nv,t,n)}}const iv=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];class ov extends X_{constructor(e,t,n){super(e,iv,t,n)}}const sv=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144],av=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],cv=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],lv=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];class uv extends X_{constructor(e,t,n,r){super(e,sv,n,r),this.lightLevel=.1,this.rednessLevel=.5,this.mskin_he_max=175/180*3.141593,this.mskin_he_min=115/180*3.141593,this.mskin_hc_max=173/180*3.141593,this.mskin_hc_min=116/180*3.141593,this.mskin_hc_axis=2.04203545,this.mfacts_rotate_c=0,this.mfacts_rotate_le=0,this.mfacts_rotate_ge=0,this.tab_addr=null,this.lutTextures=[],this.inputTexture=t,this.init()}setUniforms(){const e=this.gl.getUniformLocation(this.program,"u_flipY"),t=this.gl.getUniformLocation(this.program,"u_denoiseLevel");this.gl.uniform1f(t,this.denoiseLevel),this.gl.uniform1f(e,1);const n=this.gl.getUniformLocation(this.program,"light");this.gl.uniform1f(n,this.lightLevel);const r=this.gl.getUniformLocation(this.program,"redness");this.gl.uniform1f(r,this.rednessLevel);const i=this.gl.getUniformLocation(this.program,"skin_he_max"),o=this.gl.getUniformLocation(this.program,"skin_he_min"),s=this.gl.getUniformLocation(this.program,"skin_hc_max"),a=this.gl.getUniformLocation(this.program,"skin_hc_min"),c=this.gl.getUniformLocation(this.program,"skin_hc_axis"),l=this.gl.getUniformLocation(this.program,"facts_rotate_c"),u=this.gl.getUniformLocation(this.program,"facts_rotate_le"),d=this.gl.getUniformLocation(this.program,"facts_rotate_ge");this.gl.uniform1f(i,this.mskin_he_max),this.gl.uniform1f(o,this.mskin_he_min),this.gl.uniform1f(s,this.mskin_hc_max),this.gl.uniform1f(a,this.mskin_hc_min),this.gl.uniform1f(c,this.mskin_hc_axis),this.gl.uniform1f(l,this.mfacts_rotate_c),this.gl.uniform1f(u,this.mfacts_rotate_le),this.gl.uniform1f(d,this.mfacts_rotate_ge);const h=this.gl.getUniformLocation(this.program,"u_originImage");this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.uniform1i(h,2);const p=["lighten_lut"],f=[this.gl.TEXTURE3];for(let g=0;g<p.length;g++){const e=this.gl.getUniformLocation(this.program,p[g]);this.gl.activeTexture(f[g]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[g]),this.gl.uniform1i(e,g+3)}}setParameters(e){void 0!==e.denoiseLevel&&(this.denoiseLevel=e.denoiseLevel),void 0!==e.lightLevel&&(this.lightLevel=e.lightLevel),void 0!==e.rednessLevel&&(this.rednessLevel=e.rednessLevel,this.updateRedness(this.rednessLevel)),e.lighteningContrastLevel&&this.updateLut(e.lighteningContrastLevel)}init(){this.tab_addr=new Uint8Array(cv);const e=[this.tab_addr],t=[256],n=[1];for(let r=0;r<e.length;r++){const i=this.gl.createTexture();if(!i)throw new pl(ll.WEBGL_INTERNAL_ERROR,"create lut texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,t[r],n[r],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,e[r]),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.lutTextures.push(i)}}updateRedness(e){const t=3.141593;let n,r,i=e,o=i;i>1&&(i=1),i<0&&(i=0),o>1&&(o=1),o<0&&(o=0),this.mfacts_rotate_c=.8*i,o<.8&&(o=0),this.mskin_he_max=175/180*t,this.mskin_hc_max=173/180*t,this.mskin_he_min=(115-4*o)/180*t,this.mskin_hc_min=(116-4*o)/180*t,this.mskin_hc_axis=(117-4*o)/180*t,this.mskin_hc_axis<this.mskin_hc_min&&(this.mskin_hc_axis=this.mskin_hc_min),this.mskin_hc_min<t/2&&(this.mskin_hc_min=t/2),this.mskin_hc_axis<t/2&&(this.mskin_hc_axis=t/2),this.mskin_he_min<t/2&&(this.mskin_he_min=t/2),this.mskin_hc_max>t&&(this.mskin_hc_max=t),this.mskin_hc_axis>t&&(this.mskin_hc_axis=t),this.mskin_he_max>t&&(this.mskin_he_max=t),n=this.mskin_he_max-this.mskin_hc_max,r=this.mskin_hc_max-this.mskin_hc_axis,this.mfacts_rotate_ge=n>.01?this.mfacts_rotate_c*r/n:this.mfacts_rotate_c,n=this.mskin_hc_min-this.mskin_he_min,r=this.mskin_hc_axis-this.mskin_hc_min,this.mfacts_rotate_le=n>.01?this.mfacts_rotate_c*r/n:this.mfacts_rotate_c}updateLut(e){let t=null;if(0===e&&(t=cv),1===e&&(t=lv),2===e&&(t=av),!t)throw new pl(ll.WEBGL_INTERNAL_ERROR,"invalid ylut_table value:"+e);this.tab_addr=new Uint8Array(t);const n=[this.tab_addr],r=[256],i=[1];for(let o=0;o<n.length;o++)this.gl.bindTexture(this.gl.TEXTURE_2D,this.lutTextures[o]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,r[o],i[o],0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,n[o])}}class dv{constructor(){this.gl=null,this.canvas=null,this.programs=[],this.commonProgram=null,this.inputTexture=null,this.outputTextures=[],this.fbos=[],this.originalFrameWidth=0,this.originalFrameHeight=0,this.enableBeauty=!1,this.denoiseLevel=5,this.lightLevel=.35,this.rednessLevel=.5,this.lighteningContrastLevel=1}setEnableBeauty(e){this.enableBeauty=!!e}init(e,t,n){if(!Fu().supportWebGL)throw new pl(ll.NOT_SUPPORTED,"your browser is not support webGL");if(this.gl=n.getContext("webgl"),!this.gl)throw new pl(ll.WEBGL_INTERNAL_ERROR,"can not get webgl context");if(this.initGL(e,t),!this.inputTexture)throw new pl(ll.WEBGL_INTERNAL_ERROR,"can not find input texture");this.canvas=n,this.programs.push(new J_(this.gl)),this.programs.push(new tv(this.gl,e,t)),this.programs.push(new rv(this.gl,e,t)),this.programs.push(new ov(this.gl,e,t)),this.programs.push(new uv(this.gl,this.inputTexture,e,t)),this.commonProgram=this.programs[0].program,this.setDenoiseLevel(this.denoiseLevel),this.setLightLevel(this.lightLevel),this.setRednessLevel(this.rednessLevel),this.setContrastLevel(this.lighteningContrastLevel)}render(e){if(!this.gl||!this.commonProgram||!this.canvas)return void Rc.warning("video effect manager is not init!");let t=0;if(this.originalFrameHeight===e.videoWidth&&this.originalFrameWidth===e.videoHeight)t=2;else if(this.originalFrameHeight!==e.videoHeight||this.originalFrameWidth!==e.videoWidth){var n,r,i;if(Rc.debug(Je(n=Je(r=Je(i="beauty effect: resolution changed ".concat(this.originalFrameWidth,"x")).call(i,this.originalFrameHeight," -> ")).call(r,e.videoWidth,"x")).call(n,e.videoHeight)),0===e.videoHeight||0===e.videoWidth)return void Rc.debug("beauty effect: skip 0 resolution frame");this.canvas.width=e.videoWidth,this.canvas.height=e.videoHeight,e.setAttribute("width",e.videoWidth.toString()),e.setAttribute("height",e.videoHeight.toString()),this.release(),this.init(e.videoWidth,e.videoHeight,this.canvas)}this.gl.viewport(0,0,e.videoWidth,e.videoHeight),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e);const o=this.enableBeauty?this.programs.length-1:0;for(let a=0;a<=o;a++){const e=this.programs[a].program;this.gl.useProgram(e);const n=this.gl.getUniformLocation(e,"u_image");this.programs[a].setUniforms(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[t+a%2]),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.outputTextures[t+a%2]),this.gl.uniform1i(n,0)}this.gl.useProgram(this.commonProgram);const s=this.gl.getUniformLocation(this.commonProgram,"u_flipY");this.gl.uniform1f(s,-1),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}setDenoiseLevel(e){var t;Xn(t=this.programs).call(t,t=>{t instanceof X_&&t.setParameters({denoiseLevel:e})}),this.denoiseLevel=e}setLightLevel(e){var t;Xn(t=this.programs).call(t,t=>{t instanceof X_&&t.setParameters({lightLevel:e})}),this.lightLevel=e}setRednessLevel(e){var t;Xn(t=this.programs).call(t,t=>{t instanceof X_&&t.setParameters({rednessLevel:e})}),this.rednessLevel=e}setContrastLevel(e){var t;Xn(t=this.programs).call(t,t=>{t instanceof X_&&t.setParameters({lighteningContrastLevel:e})}),this.lighteningContrastLevel=e}setSize(e,t){var n;Xn(n=this.programs).call(n,n=>{n instanceof X_&&n.setSize(e,t)})}release(){this.gl=null,this.commonProgram=null,this.inputTexture=null,this.programs=[],this.outputTextures=[],this.fbos=[]}initGL(e,t){if(!this.gl)throw new pl(ll.WEBGL_INTERNAL_ERROR,"can not find webgl context");this.inputTexture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.inputTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);for(let n=0;n<4;n++){const r=this.gl.createTexture();if(!r)throw new pl(ll.WEBGL_INTERNAL_ERROR,"create texture failed");this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),n<2?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,t,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null):this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,t,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null);const i=this.gl.createFramebuffer();if(!i)throw new pl(ll.WEBGL_INTERNAL_ERROR,"create frame buffer failed");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,i),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,r,0),this.outputTextures.push(r),this.fbos.push(i)}this.gl.viewport(0,0,e,t),this.originalFrameWidth=e,this.originalFrameHeight=t}}class hv{constructor(){this.targetFrameRate=0,this.recordedFrameCount=0,this.recordingTime=2}async startRecordBeautyEffectOutput(e,t=4){if(this.recordID)throw new pl(ll.UNEXPECTED_ERROR,"another beauty effect recording is in progress");const n=kp(6,"");return this.recordID=n,this.targetFrameRate=e,this.recordedFrameCount=0,this.recordingTime=t,await Ip(1e3*this.recordingTime),this.recordID!==n?(this.recordID=void 0,!0):(this.recordID=void 0,this.recordedFrameCount<this.targetFrameRate*this.recordingTime/2?(Rc.warning("detect beauty effect overload, current framerate",this.recordedFrameCount/2),!1):(Rc.debug("beauty effect current framerate",this.recordedFrameCount/2),!0))}stopRecordBeautyEffectOutput(){this.targetFrameRate=0,this.recordedFrameCount=0,this.recordID=void 0}addFrame(){this.recordID&&(this.recordedFrameCount+=1)}}class pv extends class{get output(){return this._output}async setInput(e){if(e!==this.input){if(e.kind!==this.kind)throw new pl(ll.UNEXPECTED_ERROR);this.input&&this.removeInput(),this.input=e,await this._setInput(e)}}removeInput(){this.input=void 0,this._removeInput()}async updateOutput(e){this.output!==e&&(this._output=e,this.onOutputChange&&await this.onOutputChange())}replaceOriginMediaStream(e,t){var n,r;const i=Qo(n=e.getTracks()).call(n,e=>e.kind===this.kind);i&&e.removeTrack(i);const o=Qo(r=t.getTracks()).call(r,e=>e.kind===this.kind);void 0===this.output&&o&&e.addTrack(o),this.output&&(Rc.debug("replace ".concat(this.output.kind," track to origin media stream")),e.addTrack(this.output))}}{constructor(){super(),this.kind="video",this.fps=15,this.overloadDetector=new hv,this.enabled=!1,this.stopChromeBackgroundLoop=null,this.lastRenderTime=0,this.fps=30,this.manager=new dv}async setBeautyEffectOptions(e,t){if(function(e){void 0!==e.smoothnessLevel&&ml(e.smoothnessLevel,"options.smoothnessLevel",0,1,!1),void 0!==e.lighteningLevel&&ml(e.lighteningLevel,"options.lighteningLevel",0,1,!1),void 0!==e.rednessLevel&&ml(e.rednessLevel,"options.rednessLevel",0,1,!1),void 0!==e.lighteningContrastLevel&&gl(e.lighteningContrastLevel,"options.lighteningContrastLevel",[0,1,2])}(t),void 0!==t.smoothnessLevel){const e=Math.max(.1,10*t.smoothnessLevel);this.manager.setDenoiseLevel(e)}if(void 0!==t.lighteningLevel){const e=Math.max(.1,t.lighteningLevel/2);this.manager.setLightLevel(e)}if(void 0!==t.rednessLevel){const e=Math.max(.01,t.rednessLevel);this.manager.setRednessLevel(e)}if(void 0!==t.lighteningContrastLevel){const e=t.lighteningContrastLevel;this.manager.setContrastLevel(e)}this.enabled!==e&&(this.manager.setEnableBeauty(e),this.enabled=e,e?this.input&&await this.startEffect():await this.stopEffect())}destroy(){this.onOutputChange=void 0,this.stopEffect(),this.enabled=!1}async startEffect(){const e=ma();if(!this.input)return void Rc.warning("video track is null, fail to start video effect!");if(this.input&&this.output&&this.input!==this.output)return void Rc.warning("video effect is already enabled");const t=await this.renderWithWebGL();await this.updateOutput(t),Rc.info("start video effect, output:",this.output),this.overloadDetector.startRecordBeautyEffectOutput(this.fps).then(e=>{e||this.onOverload&&this.onOverload()});const n=()=>{this.enabled&&requestAnimationFrame(n);const e=Ma(),t=1e3/this.fps,r=this.lastRenderTime?e-this.lastRenderTime:t;r<t||(this.lastRenderTime=e-(r-t),this.video&&this.video.paused&&this.video.play(),this.enabled&&this.video&&(this.manager.render(this.video),this.output&&this.output.requestFrame&&this.output.requestFrame(),this.overloadDetector.addFrame()))};requestAnimationFrame(n),e.name===ha.CHROME&&document.addEventListener("visibilitychange",()=>{document.hidden?this.stopChromeBackgroundLoop=vh(()=>{this.enabled&&this.video&&this.manager.render(this.video),this.output&&this.output.requestFrame&&this.output.requestFrame(),this.overloadDetector.addFrame()},this.fps):this.stopChromeBackgroundLoop&&(this.stopChromeBackgroundLoop(),this.stopChromeBackgroundLoop=null)},!1)}async stopEffect(){Rc.info("stop video effect"),this.overloadDetector.stopRecordBeautyEffectOutput(),this.manager.release(),this.canvas&&this.canvas.remove(),this.video&&this.video.remove(),this.canvas=void 0,this.video=void 0,await this.updateOutput(this.input)}async _setInput(e){this.enabled&&!this.video&&await this.startEffect()}_removeInput(){this.stopEffect()}async renderWithWebGL(){var e;if(!this.input)throw new pl(ll.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not renderWithWebGL, no input");this.canvas&&(this.canvas.remove(),this.canvas=void 0),this.video&&(this.video.remove(),this.video=void 0),this.canvas=document.createElement("canvas"),this.video=document.createElement("video"),this.video.setAttribute("autoplay",""),this.video.setAttribute("muted",""),this.video.muted=!0,this.video.setAttribute("playsinline",""),this.video.setAttribute("style","display:none"),this.video.srcObject=new MediaStream([this.input]);const t=new fo(e=>{const t=()=>{this.video&&this.video.removeEventListener("playing",t),e(void 0)};this.video&&this.video.addEventListener("playing",t)});this.video.play(),await t;const n=this.input.getSettings(),r=n.width||this.video.videoWidth,i=n.height||this.video.videoHeight;if(n.frameRate&&this.fps!==n.frameRate&&(this.fps=n.frameRate,Rc.debug("beauty video processor: set fps to",this.fps)),Rc.debug(Je(e="beauty video processor: width ".concat(r," height ")).call(e,i)),!r||!i)throw new pl(ll.BEAUTY_PROCESSOR_INTERNAL_ERROR,"can not get track resolution");this.canvas.width=r,this.canvas.height=i,this.video.setAttribute("width",r.toString()),this.video.setAttribute("height",i.toString()),this.manager.init(r,i,this.canvas);const o=Fu();return this.canvas.captureStream(o.supportRequestFrame?0:this.fps).getVideoTracks()[0]}}function fv(e){const t={};if(e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId}),!e.encoderConfig)return t;const n=Mc(e.encoderConfig);return t.width=n.width,t.height=n.height,!Pa()&&n.frameRate&&(t.frameRate=n.frameRate),ma().name===ha.EDGE&&"object"==typeof t.frameRate&&(t.frameRate.max=60),Ia()&&(t.frameRate={ideal:30,max:30}),t}function gv(e){const t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&Ca()&&(t.extensionId=e.extensionId),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);const n=e.encoderConfig?xc(e.encoderConfig):null;return t.mandatory={chromeMediaSource:"desktop",maxWidth:n?n.width:void 0,maxHeight:n?n.height:void 0},n&&n.frameRate&&("number"==typeof n.frameRate?(t.mandatory.maxFrameRate=n.frameRate,t.mandatory.minFrameRate=n.frameRate):(t.mandatory.maxFrameRate=n.frameRate.max||n.frameRate.ideal||n.frameRate.exact||void 0,t.mandatory.minFrameRate=n.frameRate.min||n.frameRate.ideal||n.frameRate.exact||void 0),t.frameRate=n.frameRate),n&&n.width&&(t.width=n.width),n&&n.height&&(t.height=n.height),t}function mv(e){const t={};if(Pa()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC,Ca()&&(t.googAutoGainControl=e.AGC,t.googAutoGainControl2=e.AGC)),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,Ca()&&(t.googNoiseSuppression=e.ANS))),e.encoderConfig){const n=Fc(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),Ca()&&2===t.channelCount&&(t.googAutoGainControl=!1,t.googAutoGainControl2=!1,t.echoCancellation=!1,t.googNoiseSuppression=!1),ma().os===da.ANDROID&&(t.sampleRate=void 0),t}var _v,vv;!function(e){e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE"}(_v||(_v={})),function(e){e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(vv||(vv={}));var Ev=new class{constructor(){this._clientSize=null,this.getClientWidth=()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth,this.getClientHeight=()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight,this.getStyle=e=>window.getComputedStyle(e,null),this.checkCssVisibleProperty=e=>{var t;let n=!0;const r=this.getStyle(e),{display:i,visibility:o,opacity:s,filter:a}=r;if(("none"===i||rs(t=["hidden","collapse"]).call(t,o)||Number(s)<.1)&&(n=!1),!n)return!1;if(a){var c;const e=Gr(c=a.split(" ")).call(c,e=>{var t;const n=e.split("(")[0];return rs(t=["brightness","blur","opacity"]).call(t,n)}),t=vo(e).call(e,e=>{const[t,n]=e.split(/\(|\)/);return[t,Number(n.match(/^[0-9\.]+/))]});Xn(t).call(t,e=>{const[t,r]=e;switch(t){case"brightness":(r<.1||r>3)&&(n=!1);break;case"blur":r>3&&(n=!1);break;case"opacity":r<.1&&(n=!1)}})}return n},this.checkPropertyUpToAllParentNodes=(e,t)=>{let n=!0,r=!0;const i=e=>t(e);let o=e;for(;o&&r;)i(o)||(n=!1,r=!1),o=o.parentElement,o||(r=!1);return n},this.checkActualCssVisibleIncludeInherit=e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty),this.getSizeAboutClient=e=>{const{width:t,height:n,left:r,right:i,top:o,bottom:s}=e.getBoundingClientRect(),a=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:n,left:r,right:i,top:o,bottom:s,clientWidth:a,clientHeight:c,clientMin:Math.min(a,c)}},this.checkActualSize=()=>{const{width:e,height:t,clientMin:n}=this._clientSize;return this.checkSizeIsVisible(e,t,n)},this.elementFromPoint=(e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null,this.checkCoverForAPoint=(e,t,n)=>{const r=this.elementFromPoint(e,t);return null!==r&&r!==n},this.getPointPositionList=()=>{const{width:e,height:t,left:n,top:r}=this._clientSize,i=e/6,o=t/6,s=[],a=10**6;for(let c=0;c<5;c++)for(let e=0;e<5;e++){const t=(n*a+(0===c?.1:4===c?(i*c*a-1e5)/a:i*c)*a)/a,l=(r*a+(0===e?.1:4===e?(o*e*a-1e5)/a:o*e)*a)/a;s.push({x:t,y:l})}return[...s]},this.checkElementCover=e=>{var t;const n=this.getPointPositionList();return Gr(t=vo(n).call(n,t=>this.checkCoverForAPoint(t.x,t.y,e))).call(t,e=>!!e).length>6},this.checkSizeIsVisible=(e,t,n)=>(e>50||n/e<=10)&&(t>50||n/t<=10),this.checkSizeOfPartInClient=()=>{const{left:e,right:t,top:n,bottom:r,clientHeight:i,clientWidth:o,clientMin:s}=this._clientSize;let a,c,l,u;if(e<0)a=0;else{if(!(e<o))return!1;a=e}if(t<0)return!1;if(c=t<o?t:o,n<0)l=0;else{if(!(n<i))return!1;l=n}if(r<0)return!1;u=r<i?r:i;const d=c-a,h=u-l;return this.checkSizeIsVisible(d,h,s)},this.returnHiddenResult=e=>(this._clientSize=null,{visible:!1,reason:e}),this.checkOneElementVisible=e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(_v.COVERED);{const e=this.checkActualSize(),t=this.checkSizeOfPartInClient();return e&&!t?this.returnHiddenResult(_v.POSITION):e?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(_v.SIZE)}}return this.returnHiddenResult(_v.STYLE)}return this.returnHiddenResult(vv.UNMOUNTED)}return this.returnHiddenResult(vv.INVALID_HTML_ELEMENT)},this.checkElementIsMountedOnDom=e=>this.checkPropertyUpToAllParentNodes(e,e=>"HTML"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement)}};function Av(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function yv(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=Av(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=Av(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}var Sv=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Ur(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&hr(t,n,s),s},bv=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class Cv extends lh{constructor(e,t,n,r,i){super(e,i),this.trackMediaType="video",this._videoVisibleTimer=null,this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1},this._enabled=!0,this.updateMediaStreamTrackResolution(),this._encoderConfig=t,this._scalabiltyMode=n,this._optimizationMode=r}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==dl.PLAYING)}play(e,t={}){const n=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof e?e:"HTMLElement",t]});if(!(e instanceof HTMLElement)){const t=document.getElementById(e.toString());var r;t?e=t:(Rc.warning(Je(r="[".concat(this.getTrackId(),'] can not find "#')).call(r,e,'" element, use document.body')),e=document.body)}Rc.debug("[".concat(this.getTrackId(),"] start video playback"),ve(t));const i=yv({},this._getDefaultPlayerConfig(),{},t,{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(this._player=new H_(i),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=window.setInterval(()=>{try{const e=this.getVideoElementVisibleStatus();this.emit(Au.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}},jc("CHECK_VIDEO_VISIBLE_INTERVAL")),n.onSuccess()}stop(){const e=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return e.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._player.destroy(),this._player=void 0,Rc.debug("[".concat(this.getTrackId(),"] stop video playback")),e.onSuccess()}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.enabled=!1;try{await Mp(this,vu.NEED_DISABLE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}return t||(this._enabled=!1),void Rc.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Mp(this,vu.NEED_ENABLE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),e}Rc.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}async setMuted(e){var t;e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._mediaStreamTrack.enabled=!e,Rc.debug(Je(t="[".concat(this.getTrackId(),"] start set muted: ")).call(t,e)),e?await Mp(this,vu.NEED_MUTE_TRACK,this):await Mp(this,vu.NEED_UNMUTE_TRACK,this))}getStats(){Hp(()=>{Rc.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning");const e=xp(this,vu.GET_STATS);return e||yv({},eu)}async setBeautyEffect(e,t={}){const n=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.LOCAL_VIDEO_TRACK_BEAUTY,options:[this.getTrackId(),e,t]});if(e||this._videoBeautyProcessor){if(Aa()===da.IOS||Aa()===da.ANDROID){const e=new pl(ll.INVALID_OPERATION,"can not enable beauty effect on mobile device");throw n.onError(e),e}if(!this._enabled&&e){const e=new pl(ll.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled");throw n.onError(e),e}Rc.info("[".concat(this.getTrackId(),"] start setBeautyEffect"),e,ve(t));try{this._videoBeautyProcessor?await this._videoBeautyProcessor.setBeautyEffectOptions(e,t):(this._videoBeautyProcessor=new pv,this._videoBeautyProcessor.onOverload=()=>{Vp(()=>this.emit(Au.BEAUTY_EFFECT_OVERLOAD))},await this._videoBeautyProcessor.setBeautyEffectOptions(e,t),await this._registerTrackProcessor(this._videoBeautyProcessor))}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setBeautyEffect error"),e.toString()),n.onError(e),e}Rc.info("[".concat(this.getTrackId(),"] setBeautyEffect success")),n.onSuccess()}}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}clone(e,t,n,r){const i=this._mediaStreamTrack.clone();return new Cv(i,e,t,n,r)}async setBitrateLimit(e){var t;if(Rc.debug(Je(t="[".concat(this.getTrackId(),"] set bitrate limit, ")).call(t,ve(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await Mp(this,vu.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return e.throw()}}}async setOptimizationMode(e){var t;if("motion"!==e&&"detail"!==e&&"balanced"!==e)return void Rc.error(ll.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const n=this._optimizationMode;try{this._optimizationMode=e,await Mp(this,vu.SET_OPTIMIZATION_MODE,this)}catch(e){throw this._optimizationMode=n,Rc.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.toString()),e}Rc.info(Je(t="[".concat(this.getTrackId(),"] set optimization mode success (")).call(t,e,")"))}setScalabiltyMode(e){var t;if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return Rc.error(ll.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=e,Rc.info(Je(t="[".concat(this.getTrackId(),"] set scalability mode success (")).call(t,e,")"))}updateMediaStreamTrackResolution(){Lp(this._originMediaStreamTrack).then(([e,t])=>{this._videoHeight=t,this._videoWidth=e}).catch(Np)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:o}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=Ev.checkOneElementVisible(i),t=rr({},e);return t.visible||ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess("Not visible because of ".concat(t.reason)),t}return}catch(e){throw new pl(ll.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}async renewMediaStreamTrack(){}}Sv([xh(),bv("design:type",Function),bv("design:paramtypes",[Object,Object]),bv("design:returntype",void 0)],Cv.prototype,"play",null),Sv([ch("LocalVideoTrack","_enabledMutex"),xh(),bv("design:type",Function),bv("design:paramtypes",[Boolean,Boolean]),bv("design:returntype",fo)],Cv.prototype,"setEnabled",null),Sv([ch("LocalVideoTrack","_enabledMutex"),xh(),rh({report:ih}),bv("design:type",Function),bv("design:paramtypes",[Boolean]),bv("design:returntype",fo)],Cv.prototype,"setMuted",null),Sv([xh(),bv("design:type",Function),bv("design:paramtypes",[]),bv("design:returntype",Object)],Cv.prototype,"getStats",null),Sv([xh(),bv("design:type",Function),bv("design:paramtypes",[Boolean,Object]),bv("design:returntype",fo)],Cv.prototype,"setBeautyEffect",null),Sv([xh(),bv("design:type",Function),bv("design:paramtypes",[]),bv("design:returntype",ImageData)],Cv.prototype,"getCurrentFrameData",null),Sv([xh(),bv("design:type",Function),bv("design:paramtypes",[Object]),bv("design:returntype",fo)],Cv.prototype,"setBitrateLimit",null),Sv([xh(),bv("design:type",Function),bv("design:paramtypes",[String]),bv("design:returntype",fo)],Cv.prototype,"setOptimizationMode",null),Sv([xh(),bv("design:type",Function),bv("design:paramtypes",[Object]),bv("design:returntype",void 0)],Cv.prototype,"setScalabiltyMode",null),Sv([xh(),bv("design:type",Function),bv("design:paramtypes",[]),bv("design:returntype",void 0)],Cv.prototype,"updateMediaStreamTrackResolution",null);class Tv extends Cv{constructor(e,t,n,r,i,o){super(e,t.encoderConfig?Mc(t.encoderConfig):{},r,i,o),this._enabled=!0,this._deviceName="default",this.tryResumeVideoForIOS15WeChat=async()=>{wa()&&La()&&this._enabled&&!this._isClosed&&(Rc.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.setEnabled(!1),await this.setEnabled(!0))},this._config=t,this._constraints=n,this._deviceName=e.label,this._config.encoderConfig&&(this._encoderConfig=Mc(this._config.encoderConfig)),ph.on(uh.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),ph.on(uh.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}async setDevice(e){var t;const n=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CAM_VIDEO_TRACK_SET_DEVICE,options:[this.getTrackId(),e]});if(Rc.info(Je(t="[".concat(this.getTrackId(),"] set device to ")).call(t,e)),this._enabled)try{const t=await Ph.getDeviceById(e),n={};n.video=yv({},this._constraints),n.video.deviceId={exact:e},n.video.facingMode=void 0,this._originMediaStreamTrack.stop();let r=null;try{r=await kh(n,this.getTrackId())}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await kh({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw n.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await Ph.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw n.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}Rc.info("[".concat(this.getTrackId(),"] setDevice success")),n.onSuccess()}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),t||(this._enabled=!1);try{await Mp(this,vu.NEED_DISABLE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),e}return void Rc.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}const n=yv({},this._constraints),r=Ph.searchDeviceIdByName(this._deviceName);r&&!n.deviceId&&(n.deviceId={exact:r});try{const e=await kh({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),await Mp(this,vu.NEED_ENABLE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.toString()),e}this.updateMediaStreamTrackResolution(),Rc.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}async setEncoderConfiguration(e,t){const n=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[this.getTrackId(),e]});if(!this._enabled){const e=new pl(ll.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");throw n.onError(e),e}e=Mc(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin);const r=jp(this._config);r.encoderConfig=e;const i=fv(r);(Ta()||Ra()||Na())&&(i.deviceId=void 0),Rc.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),ve(e),ve(i));try{await this._originMediaStreamTrack.applyConstraints(i),this.updateMediaStreamTrackResolution()}catch(e){const t=new pl(ll.UNEXPECTED_ERROR,e.toString());throw Rc.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),n.onError(t),t}this._config=r,this._constraints=i,this._encoderConfig=e;try{await Mp(this,vu.NEED_UPDATE_VIDEO_ENCODER,this)}catch(e){return n.onError(e),e.throw()}n.onSuccess()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Ra()||Na())&&this._enabled&&!this._isClosed&&ph.duringInterruption){const e=async()=>{ph.off(uh.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Rc.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};ph.on(uh.IOS_INTERRUPTION_END,e)}else Rc.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Au.TRACK_ENDED)}async renewMediaStreamTrack(){const e=yv({},this._constraints),t=Ph.searchDeviceIdByName(this._deviceName);t&&!e.deviceId&&(e.deviceId={exact:t});const n=await kh({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}close(){super.close(),ph.off(uh.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat),ph.off(uh.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}}Sv([xh(),bv("design:type",Function),bv("design:paramtypes",[String]),bv("design:returntype",fo)],Tv.prototype,"setDevice",null),Sv([ch("CameraVideoTrack","_enabledMutex"),xh(),bv("design:type",Function),bv("design:paramtypes",[Boolean,Boolean]),bv("design:returntype",fo)],Tv.prototype,"setEnabled",null),Sv([xh(),bv("design:type",Function),bv("design:paramtypes",[Object,Boolean]),bv("design:returntype",fo)],Tv.prototype,"setEncoderConfiguration",null);class Iv{constructor(e,t){this._trust_in_room_=!0,this._trust_audio_enabled_state_=!0,this._trust_video_enabled_state_=!0,this._trust_audio_mute_state_=!0,this._trust_video_mute_state_=!0,this._trust_stream_added_state_=!0,this._audio_muted_=!1,this._video_muted_=!1,this._audio_enabled_=!0,this._video_enabled_=!0,this._audio_added_=!1,this._video_added_=!1,this.uid=e,this._uintid=t}get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}}var Rv=Ct.findIndex,wv="findIndex",kv=!0;wv in[]&&Array(1).findIndex((function(){kv=!1})),Q({target:"Array",proto:!0,forced:kv},{findIndex:function(e){return Rv(this,e,arguments.length>1?arguments[1]:void 0)}});var Ov=$e("Array").findIndex,Nv=Array.prototype,Lv=function(e){var t=e.findIndex;return e===Nv||e instanceof Array&&t===Nv.findIndex?Ov:t};Ku("asyncIterator");var Pv=Zu.f("asyncIterator");Ku("hasInstance"),Ku("isConcatSpreadable"),Ku("iterator"),Ku("match"),Ku("matchAll"),Ku("replace"),Ku("search"),Ku("species"),Ku("split"),Ku("toPrimitive"),Ku("toStringTag"),Ku("unscopables"),yt(Math,"Math",!0),yt(o.JSON,"JSON",!0);var Dv=M.Symbol;Ku("asyncDispose"),Ku("dispose"),Ku("observable"),Ku("patternMatch"),Ku("replaceAll");var Mv=Dv,xv=xt.set,Bv=xt.getterFor("AggregateError"),Uv=function(e,t){var n=this;if(!(n instanceof Uv))return new Uv(e,t);cn&&(n=cn(new Error(t),tn(n)));var r=[];return mt(e,r.push,r),a?xv(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==t&&j(n,"message",String(t)),n};Uv.prototype=qt(Error.prototype,{constructor:d(5,Uv),message:d(5,""),name:d(5,"AggregateError")}),a&&V.f(Uv.prototype,"errors",{get:function(){return Bv(this).errors},configurable:!0}),Q({global:!0},{AggregateError:Uv}),Q({target:"Promise",stat:!0},{try:function(e){var t=xi.f(this),n=Ui(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var Fv="No one promise resolved";Q({target:"Promise",stat:!0},{any:function(e){var t=this,n=xi.f(t),r=n.resolve,i=n.reject,o=Ui((function(){var n=x(t.resolve),o=[],s=0,a=1,c=!1;mt(e,(function(e){var l=s++,u=!1;o.push(void 0),a++,n.call(t,e).then((function(e){u||c||(c=!0,r(e))}),(function(e){u||c||(u=!0,o[l]=e,--a||i(new(le("AggregateError"))(o,Fv)))}))})),--a||i(new(le("AggregateError"))(o,Fv))}));return o.error&&i(o.value),n.promise}});var Vv=po,jv=function(e){this.wrapped=e};function Gv(e){var t,n;function r(t,n){try{var o=e[t](n),s=o.value,a=s instanceof jv;Vv.resolve(a?s.wrapped:s).then((function(e){a?r("return"===t?"return":"next",e):i(o.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Vv((function(o,s){var a={key:e,arg:i,resolve:o,reject:s,next:null};n?n=n.next=a:(t=n=a,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Mv&&Pv&&(Gv.prototype[Pv]=function(){return this}),Gv.prototype.next=function(e){return this._invoke("next",e)},Gv.prototype.throw=function(e){return this._invoke("throw",e)},Gv.prototype.return=function(e){return this._invoke("return",e)};var Hv=Gv,Qv=function(e){return function(){return new Hv(e.apply(this,arguments))}},Wv=function(e){return new jv(e)},qv=ft,zv=Zu.f("iterator"),Zv=zv,$v=function(e){var t;if(void 0!==Mv){if(Pv&&null!=(t=e[Pv]))return t.call(e);if(Zv&&null!=(t=qv(e)))return t.call(e)}throw new TypeError("Object is not async iterable")},Kv=function(e,t){var n={},r=!1;function i(n,i){return r=!0,i=new Vv((function(t){t(e[n](i))})),{done:!1,value:t(i)}}return"function"==typeof Mv&&Zv&&(n[Zv]=function(){return this}),n.next=function(e){return r?(r=!1,e):i("next",e)},"function"==typeof e.throw&&(n.throw=function(e){if(r)throw r=!1,e;return i("throw",e)}),"function"==typeof e.return&&(n.return=function(e){return r?(r=!1,e):i("return",e)}),n},Yv=r((function(e,t){e.exports=(()=>{var e={8:(e,t,n)=>{n.r(t),n.d(t,{Parser:()=>S,Printer:()=>R,parse:()=>N,print:()=>L});const r="\n",i="".concat("\r").concat(r),o=" ";let s;function a(e){return e>="0"&&e<="9"}function c(e){return e>="!"&&e<="~"}function l(e){return c(e)||e>=""&&e<="ÿ"}function u(e){return"!"===e||e>="#"&&e<="'"||e>="*"&&e<="+"||e>="-"&&e<="."||e>="0"&&e<="9"||e>="A"&&e<="Z"||e>="^"&&e<="~"}function d(e){return e>="1"&&e<="9"}function h(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function p(e){return"d"===e||"h"===e||"m"===e||"s"===e}function f(e){return e>""&&e<"\t"||e>"\v"&&e<"\f"||e>""&&e<"ÿ"}function g(e){return h(e)||a(e)||"+"===e||"/"===e}function m(e){return a(e)||h(e)||"+"===e||"/"===e||"-"===e||"_"===e}function _(e){return h(e)||a(e)||"+"===e||"/"===e}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.VERSION="v",e.ORIGIN="o",e.SESSION_NAME="s",e.INFORMATION="i",e.URI="u",e.EMAIL="e",e.PHONE="p",e.CONNECTION="c",e.BANDWIDTH="b",e.TIME="t",e.REPEAT="r",e.ZONE_ADJUSTMENTS="z",e.KEY="k",e.ATTRIBUTE="a",e.MEDIA="m"}(s||(s={}));class y{consumeText(e,t){let n=t;for(;n<e.length;){const t=e[n];if("\0"===t||"\r"===t||t===r)break;n+=1}if(n-t==0)throw new Error("Invalid text, at ".concat(e));return n}consumeUnicastAddress(e,t,n){return this.consumeTill(e,t,o)}consumeOneOrMore(e,t,n){let r=t;for(;n(e[r]);)r++;if(r-t==0)throw new Error("Invalid rule at ".concat(t,"."));return r}consumeSpace(e,t){if(e[t]===o)return t+1;throw new Error("Invalid space at ".concat(t,"."))}consumeIP4Address(e,t){let n=t;for(let r=0;r<4;r++)if(n=this.consumeDecimalUChar(e,n),3!==r){if("."!==e[n])throw new Error("Invalid IP4 address.");n++}return n}consumeDecimalUChar(e,t){let n=t;for(let i=0;i<3&&a(e[n]);i++,n++);if(n-t==0)throw new Error("Invalid decimal uchar.");const r=parseInt(e.slice(t,n));if(r>=0&&r<=255)return n;throw new Error("Invalid decimal uchar")}consumeIP6Address(e,t){let n=this.consumeHexpart(e,t);return":"===e[n]?(n+=1,n=this.consumeIP4Address(e,n),n):n}consumeHexpart(e,t){let n=t;if(":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}if(n=this.consumeHexseq(e,n),":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}return n}consumeHexseq(e,t){let n=t;for(;n=this.consumeHex4(e,n),":"===e[n]&&":"!==e[n+1];)n+=1;return n}consumeHex4(e,t){let n=0;for(;n<4;n++)if(!((r=e[t+n])>="0"&&r<="9"||r>="a"&&r<="f"||r>="A"&&r<="F")){if(0===n)throw new Error("Invalid hex 4");break}var r;return t+n}consumeFQDN(e,t){let n=t;for(;a(e[n])||h(e[n])||"-"===e[n]||"."===e[n];)n+=1;if(n-t<4)throw new Error("Invalid FQDN");return n}consumeExtnAddr(e,t){return this.consumeOneOrMore(e,t,l)}consumeMulticastAddress(e,t,n){switch(n){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e,t);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(n){return this.consumeExtnAddr(e,t)}}}consumeIP6MulticastAddress(e,t){const n=this.consumeHexpart(e,t);return"/"===e[n]?this.consumeInteger(e,n+1):n}consumeIP4MulticastAddress(e,t){let n=t+3;const r=e.slice(t,n),i=parseInt(r);if(i<224||i>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let o=0;o<3;o++){if("."!==e[n])throw new Error("Invalid IP4 multicast address.");n+=1,n=this.consumeDecimalUChar(e,n)}return"/"===e[n]&&(n+=1),n=this.consumeTTL(e,n),"/"===e[n]&&(n=this.consumeInteger(e,n)),n}consumeInteger(e,t){if(!d(e[t]))throw new Error("Invalid integer.");for(t+=1;a(e[t]);)t+=1;return t}consumeTTL(e,t){if("0"===e[t])return t+1;if(!d(e[t]))throw new Error("Invalid TTL.");t+=1;for(let n=0;n<2&&a(e[t]);n++)t+=1;return t}consumeToken(e,t){return this.consumeOneOrMore(e,t,u)}consumeTime(e,t){let n=t;if("0"===e[n])return n+1;for(d(e[n])&&(n+=1);a(e[n]);)n++;if(n-t<10)throw new Error("Invalid time");return n}consumeAddress(e,t){return this.consumeTill(e,t,o)}consumeTypedTime(e,t){let n=t;return n=this.consumeOneOrMore(e,n,a),p(e[n])?n+1:n}consumeRepeatInterval(e,t){if(!d(e[t]))throw new Error("Invalid repeat interval");for(t+=1;a(e[t]);)t+=1;return p(e[t])&&(t+=1),t}consumePort(e,t){return this.consumeOneOrMore(e,t,a)}consume(e,t,n){for(let r=0;r<n.length;r++){if(t+r>=e.length)throw new Error("consume exceeding value length");if(e[t+r]!==n[r])throw new Error("consume ".concat(n," failed at ").concat(r))}return t+n.length}consumeTill(e,t,n){let r=t;for(;r<e.length&&("string"!=typeof n||e[r]!==n)&&("function"!=typeof n||!n(e[r]));)r++;return r}}class S extends y{constructor(){super(),A(this,"records",[]),A(this,"currentLine",0)}parse(e){const t=this.probeEOL(e);this.records=e.split(t).filter(e=>!!e.trim()).map(this.parseLine),this.currentLine=0;const n=this.parseVersion(),r=this.parseOrigin(),i=this.parseSessionName(),o=this.parseInformation(),s=this.parseUri(),a=this.parseEmail(),c=this.parsePhone(),l=this.parseConnection(),u=this.parseBandWidth(),d=this.parseTimeFields(),h=this.parseKey(),p=this.parseSessionAttribute(),f=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:n,origin:r,sessionName:i,information:o,uri:s,emails:a,phones:c,connection:l,bandwidths:u,timeFields:d,key:h,attributes:p,mediaDescriptions:f}}getCurrentRecord(){const e=this.records[this.currentLine];if(!e)throw new Error("Record doesn't exit.");return e}probeEOL(e){for(let t=0;t<e.length;t++)if(e[t]===r)return"\r"===e[t-1]?i:r;throw new Error("Invalid newline character.")}parseLine(e,t){if(e.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const n=e[0];if("="!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:n,value:e.slice(2),line:t,cur:0}}parseSessionAttribute(){const e=new C;for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(t,e=>u(e)&&":"!==e),_cur:0};":"===t.value[t.cur]&&(t.cur+=1,n.attValue=this.extractOneOrMore(t,f)),e.parse(n),this.currentLine++}return e.digest()}parseMediaAttributes(e){const t=new T(e);for(;this.currentLine<this.records.length;){const e=this.getCurrentRecord();if(e.type!==s.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(e,e=>u(e)&&":"!==e),_cur:0};":"===e.value[e.cur]&&(e.cur+=1,n.attValue=this.extractOneOrMore(e,f)),t.parse(n),this.currentLine++}return t.digest()}parseKey(){const e=this.getCurrentRecord();if(e.type===s.KEY){if("prompt"===e.value||"clear:"===e.value||"base64:"===e.value||"uri:"===e.value)return e.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const e=this.getCurrentRecord();if(e.type===s.ZONE_ADJUSTMENTS){const t=[];for(;;)try{const n=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);let r=!1;"-"===e.value[e.cur]&&(r=!0,e.cur+=1);const i=this.extract(e,this.consumeTypedTime);t.push({time:n,typedTime:i,back:r})}catch(e){break}if(0===t.length)throw new Error("Invalid zone adjustments");return this.currentLine++,t}return[]}parseRepeat(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.REPEAT)break;{const n=this.extract(t,this.consumeRepeatInterval),r=this.parseTypedTime(t);e.push({repeatInterval:n,typedTimes:r}),this.currentLine++}}return e}parseTypedTime(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error("Invalid typed time.");return t}parseTime(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);const n=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:n}}parseBandWidth(){const e=[];for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==s.BANDWIDTH)break;{const n=this.extractOneOrMore(t,u);if(":"!==t.value[t.cur])throw new Error("Invalid bandwidth field.");t.cur++;const r=this.extractOneOrMore(t,a);e.push({bwtype:n,bandwidth:r}),this.currentLine++}}return e}parseVersion(){const e=this.getCurrentRecord();if(e.type!==s.VERSION)throw new Error("first sdp record must be version");const t=e.value.slice(0,this.consumeOneOrMore(e.value,0,a));if(t.length!==e.value.length)throw new Error('invalid proto version, "v='.concat(e.value,'"'));return this.currentLine++,t}parseOrigin(){const e=this.getCurrentRecord();if(e.type!==s.ORIGIN)throw new Error("second line of sdp must be origin");const t=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const r=this.extractOneOrMore(e,a);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const o=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const c=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:n,sessVersion:r,nettype:i,addrtype:o,unicastAddress:c}}parseSessionName(){const e=this.getCurrentRecord();if(e.type===s.SESSION_NAME){const t=this.extract(e,this.consumeText);return this.currentLine++,t}}parseInformation(){const e=this.getCurrentRecord();if(e.type!==s.INFORMATION)return;const t=this.extract(e,this.consumeText);return this.currentLine++,t}parseUri(){const e=this.getCurrentRecord();if(e.type===s.URI)return this.currentLine++,e.value}parseEmail(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.EMAIL)break;e.push(t.value),this.currentLine++}return e}parsePhone(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==s.PHONE)break;e.push(t.value),this.currentLine++}return e}parseConnection(){const e=this.getCurrentRecord();if(e.type===s.CONNECTION){const t=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const r=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:n,address:r}}}parseMedia(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);let n=this.extract(e,this.consumePort);"/"===e.value[e.cur]&&(e.cur+=1,n+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);const r=[];for(r.push(this.extract(e,this.consumeToken));"/"===e.value[e.cur];)e.cur+=1,r.push(this.extract(e,this.consumeToken));if(0===r.length)throw new Error("Invalid proto");const i=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:n,protos:r,fmts:i}}parseTimeFields(){const e=[];for(;this.getCurrentRecord().type===s.TIME;){const t=this.parseTime(),n=this.parseRepeat(),r=this.parseZone();e.push({time:t,repeats:n,zones:r})}return e}parseMediaDescription(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.MEDIA;){const t=this.parseMedia(),n=this.parseInformation(),r=this.parseConnections(),i=this.parseBandWidth(),o=this.parseKey(),s=this.parseMediaAttributes(t);e.push({media:t,information:n,connections:r,bandwidths:i,key:o,attributes:s})}return e}parseConnections(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===s.CONNECTION;)e.push(this.parseConnection());return e}parseFmt(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error("Invalid fmts");return t}extract(e,t,...n){const r=t.call(this,e.value,e.cur,...n),i=e.value.slice(e.cur,r);return e.cur=r,i}extractOneOrMore(e,t){const n=this.consumeOneOrMore(e.value,e.cur,t),r=e.value.slice(e.cur,n);return e.cur=n,r}consumeSpaceForRecord(e){if(e.value[e.cur]!==o)throw new Error("Invalid space at ".concat(e.cur,"."));e.cur+=1}}class b extends y{constructor(...e){super(...e),A(this,"attributes",void 0),A(this,"digested",!1)}extractOneOrMore(e,t,n){const r=this.consumeOneOrMore(e.attValue,e._cur,t),i=e.attValue.slice(e._cur,r),[o,s]=n||[];if("number"==typeof o&&i.length<o)throw new Error("error in length, should be more or equal than ".concat(o," characters."));if("number"==typeof s&&i.length>s)throw new Error("error in length, should be less or equal than ".concat(s," characters."));return e._cur=r,i}consumeAttributeSpace(e){if(e.attValue[e._cur]!==o)throw new Error("Invalid space at ".concat(e._cur,"."));e._cur+=1}extract(e,t,...n){if(!e.attValue)throw new Error("Nothing to extract from attValue.");const r=t.call(this,e.attValue,e._cur,...n),i=e.attValue.slice(e._cur,r);return e._cur=r,i}atEnd(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}peekChar(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}peek(e,t){if(!e.attValue)throw new Error;for(let n=0;n<t.length;n++)if(t[n]!==e.attValue[e._cur+n])return!1;return!0}parseIceUfrag(e){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e,g,[4,256])}parseIcePwd(e){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e,g,[22,256])}parseIceOptions(e){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const t=[];for(;!this.atEnd(e);){t.push(this.extractOneOrMore(e,g));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t}parseFingerprint(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:n})}parseExtmap(e){const t=this.extractOneOrMore(e,a);let n;"/"===this.peekChar(e)&&(this.extract(e,this.consume,"/"),n=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeTill,o),i=E(E({entry:parseInt(t,10)},n&&{direction:n}),{},{extensionName:r});this.peekChar(e)===o&&(this.consumeAttributeSpace(e),i.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(i)}parseSetup(e){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const t=this.extract(e,this.consumeTill);if("active"!==t&&"passive"!==t&&"actpass"!==t&&"holdconn"!==t)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=t}}class C extends b{constructor(...e){super(...e),A(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"group":this.parseGroup(e);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"fingerprint":this.parseFingerprint(e);break;case"setup":this.parseSetup(e);break;case"tls-id":this.parseTlsId(e);break;case"identity":this.parseIdentity(e);break;case"extmap":this.parseExtmap(e);break;case"msid-semantic":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing session attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;)this.consumeAttributeSpace(e),n.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:n})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(e){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e,m)}parseIdentity(e){const t=this.extractOneOrMore(e,_),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.extract(e,this.consume,"=");const r=this.extractOneOrMore(e,e=>e!==o&&f(e));n.push({name:t,value:r})}this.attributes.identities.push({assertionValue:t,extensions:n})}parseMsidSemantic(e){this.peekChar(e)===o&&this.consumeAttributeSpace(e);const t={semantic:this.extract(e,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(e)}catch(e){break}if("*"===this.peekChar(e)){this.extract(e,this.consume,"*"),t.applyForAll=!0;break}{const n=this.extract(e,this.consumeTill,o);t.identifierList.push(n)}}this.attributes.msidSemantic=t}}class T extends b{constructor(e){super(),A(this,"attributes",void 0),-1!==e.protos.indexOf("RTP")||e.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"extmap":this.parseExtmap(e);break;case"setup":this.parseSetup(e);break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"candidate":this.parseCandidate(e);break;case"remote-candidate":this.parseRemoteCandidate(e);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e);break;case"rtpmap":this.parseRtpmap(e);break;case"ptime":this.parsePtime(e);break;case"maxptime":this.parseMaxPtime(e);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e);break;case"ssrc":this.parseSSRC(e);break;case"fmtp":this.parseFmtp(e);break;case"rtcp-fb":this.parseRtcpFb(e);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e);break;case"mid":this.parseMid(e);break;case"msid":this.parseMsid(e);break;case"imageattr":this.parseImageAttr(e);break;case"rid":this.parseRid(e);break;case"simulcast":this.parseSimulcast(e);break;case"sctp-port":this.parseSctpPort(e);break;case"max-message-size":this.parseMaxMessageSize(e);break;case"ssrc-group":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing media attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}parseCandidate(e){const t=this.extractOneOrMore(e,g,[1,32]);this.consumeAttributeSpace(e);const n=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const i=this.extractOneOrMore(e,a,[1,10]);this.consumeAttributeSpace(e);const s=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const l=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,"typ"),this.consumeAttributeSpace(e);const u={foundation:t,componentId:n,transport:r,priority:i,connectionAddress:s,port:l,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e," raddr")&&(this.extract(e,this.consume," raddr"),this.consumeAttributeSpace(e),u.relAddr=this.extract(e,this.consumeAddress)),this.peek(e," rport")&&(this.extract(e,this.consume," rport"),this.consumeAttributeSpace(e),u.relPort=this.extract(e,this.consumePort));this.peekChar(e)===o;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),u.extension[t]=this.extractOneOrMore(e,c)}this.attributes.candidates.push(u)}parseRemoteCandidate(e){const t=[];for(;;){const n=this.extractOneOrMore(e,a,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumePort);t.push({componentId:n,connectionAddress:r,port:i});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,"/");this.extract(e,this.consume,"/");const r={encodingName:n,clockRate:this.extractOneOrMore(e,a)};this.atEnd(e)||"/"!==this.peekChar(e)||(this.extract(e,this.consume,"/"),r.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));const i=this.attributes.payloads.find(e=>e.payloadType===parseInt(t,10));i?i.rtpMap=r:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:r,rtcpFeedbacks:[]})}parsePtime(e){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e,this.consumeTill)}parseMaxPtime(e){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e,this.consumeTill)}parseDirection(e){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e.attField}parseSSRC(e){const t=this.extractOneOrMore(e,a);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,":");let r;":"===this.peekChar(e)&&(this.extract(e,this.consume,":"),r=this.extract(e,this.consumeTill));const i=this.attributes.ssrcs.find(e=>e.ssrcId===parseInt(t,10));i?i.attributes[n]=r:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:{[n]:r}})}parseFmtp(e){const t=this.extract(e,this.consumeTill,o);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill),r={};n.split(";").forEach(e=>{let[t,n]=e.split("=");t=t.trim(),n="string"==typeof n?n.trim():n,"string"==typeof t&&t.length>0&&(r[t]=n)});const i=this.attributes.payloads.find(e=>e.payloadType===parseInt(t,10));i?i.fmtp={parameters:r}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:r}})}parseFmtParameters(e){const t={},n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");for(t[n]=r;";"===e.attValue[e._cur];){const n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");t[n]=r}return t}parseRtcpFb(e){let t="";t="*"===this.peekChar(e)?this.extract(e,this.consume,"*"):this.extract(e,this.consumeTill,o),this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,o);let r;switch(n){case"trr-int":r={type:n,interval:this.extract(e,this.consumeTill)};break;case"ack":case"nack":default:{const t={type:n};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===o&&(t.additional=this.extract(e,this.consumeTill))),r=t}}if("*"===t)this.attributes.rtcpFeedbackWildcards.push(r);else{const e=this.attributes.payloads.find(e=>e.payloadType===parseInt(t,10));e?e.rtcpFeedbacks.push(r):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[r]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(e){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const t={port:this.extract(e,this.consumePort)};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,u),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,u),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}parseMsid(e){const t={id:this.extractOneOrMore(e,u,[1,64])};this.peekChar(e)===o&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,u,[1,64])),this.attributes.msids.push(t)}parseImageAttr(e){this.attributes.imageattr.push(e.attValue)}parseRid(e){const t=this.extractOneOrMore(e,e=>h(e)||a(e)||"_"===e||"-"===e);this.consumeAttributeSpace(e);const n={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===o){if(this.consumeAttributeSpace(e),this.peek(e,"pt=")){this.extract(e,this.consume,"pt=");const t=[];for(;;){const n=this.extract(e,this.consumeToken);t.push(n);try{this.extract(e,this.consume,",")}catch(e){break}}n.payloads=t,this.peekChar(e)===o&&this.extract(e,this.consume,o)}for(;;){const t=this.extract(e,this.consumeToken);switch(t){case"depend":{const r={type:t,rids:this.extract(e,this.consume,"=").split(",")};n.params.push(r);break}case"max-width":case"height-width":case"max-fps":case"max-fs":case"max-br":case"max-pps":case"max-bpp":default:{const r={type:t};"="===this.peekChar(e)&&(this.extract(e,this.consume,"="),r.val=this.extract(e,this.consumeTill,";")),n.params.push(r)}}try{this.extract(e,this.consume,";")}catch(e){break}}}this.attributes.rids.push(n)}parseSimulcast(e){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}parseSctpPort(e){this.attributes.sctpPort=this.extractOneOrMore(e,a,[1,5])}parseMaxMessageSize(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,a,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(e){this.attributes.mid=this.extract(e,this.consumeToken)}parseSSRCGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;;)try{this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeInteger);n.push(parseInt(t,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:n})}}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class R{constructor(){I(this,"eol",i)}print(e,t){let n="";return t&&(this.eol=t),n+=this.printVersion(e.version),n+=this.printOrigin(e.origin),n+=this.printSessionName(e.sessionName),n+=this.printInformation(e.information),n+=this.printUri(e.uri),n+=this.printEmail(e.emails),n+=this.printPhone(e.phones),n+=this.printConnection(e.connection),n+=this.printBandwidth(e.bandwidths),n+=this.printTimeFields(e.timeFields),n+=this.printKey(e.key),n+=this.printSessionAttributes(e.attributes),n+=this.printMediaDescription(e.mediaDescriptions),n}printVersion(e){return"v=".concat(e).concat(this.eol)}printOrigin(e){return"o=".concat(e.username," ").concat(e.sessId," ").concat(e.sessVersion," ").concat(e.nettype," ").concat(e.addrtype," ").concat(e.unicastAddress).concat(this.eol)}printSessionName(e){return e?"s=".concat(e).concat(this.eol):""}printInformation(e){return e?"i=".concat(e).concat(this.eol):""}printUri(e){return e?"u=".concat(e).concat(this.eol):""}printEmail(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printPhone(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printConnection(e){return e?"c=".concat(e.nettype," ").concat(e.addrtype," ").concat(e.address).concat(this.eol):""}printBandwidth(e){let t="";for(const n of e)t+="b=".concat(n.bwtype,":").concat(n.bandwidth).concat(this.eol);return t}printTimeFields(e){let t="";for(const n of e){t+="t=".concat(n.time.startTime," ").concat(n.time.startTime).concat(this.eol);for(const e of n.repeats)t+="r=".concat(e.repeatInterval," ").concat(e.typedTimes.join(" ")).concat(this.eol);n.zoneAdjustments&&(t+="z=",t+="z=".concat(n.zoneAdjustments.map(e=>"".concat(e.time," ").concat(e.back?"-":""," ").concat(e.typedTime)).join(" ")).concat(this.eol),t+=this.eol)}return t}printKey(e){return e?"k=".concat(e).concat(this.eol):""}printAttributes(e){let t="";for(const n of e)t+="a=".concat(n.attField).concat(n.attValue?":".concat(n.attValue):"").concat(this.eol);return t}printMediaDescription(e){let t="";for(const n of e)t+=this.printMedia(n.media),t+=this.printInformation(n.information),t+=this.printConnections(n.connections),t+=this.printBandwidth(n.bandwidths),t+=this.printKey(n.key),t+=this.printMediaAttributes(n);return t}printConnections(e){let t="";for(const n of e)t+=this.printConnection(n);return t}printMedia(e){return"m=".concat(e.mediaType," ").concat(e.port," ").concat(e.protos.join("/")," ").concat(e.fmts.join(" ")).concat(this.eol)}printSessionAttributes(e){return new k(this.eol).print(e)}printMediaAttributes(e){return new O(this.eol).print(e)}}class w{constructor(e){I(this,"eol",void 0),this.eol=e}printIceUfrag(e){return void 0===e?"":"a=ice-ufrag:".concat(e).concat(this.eol)}printIcePwd(e){return void 0===e?"":"a=ice-pwd:".concat(e).concat(this.eol)}printIceOptions(e){return void 0===e?"":"a=ice-options:".concat(e.join(o)).concat(this.eol)}printFingerprints(e){return e.length>0?e.map(e=>"a=fingerprint:".concat(e.hashFunction).concat(o).concat(e.fingerprint)).join(this.eol)+this.eol:""}printExtmap(e){return e.map(e=>"a=extmap:".concat(e.entry).concat(e.direction?"/".concat(e.direction):"").concat(o).concat(e.extensionName).concat(e.extensionAttributes?"".concat(o).concat(e.extensionAttributes):"").concat(this.eol)).join("")}printSetup(e){return void 0===e?"":"a=setup:".concat(e).concat(this.eol)}printUnrecognized(e){return e.map(e=>"a=".concat(e.attField).concat(e.attValue?":".concat(e.attValue):"").concat(this.eol)).join("")}}class k extends w{print(e){let t="";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized),t}printGroups(e){let t="";return e.length>0&&(t+=e.map(e=>"a=group:".concat(e.semantic).concat(e.identificationTag.map(e=>"".concat(o).concat(e)).join("")).concat(this.eol)).join("")),t}printIceLite(e){return void 0===e?"":"a=ice-lite"+this.eol}printTlsId(e){return e?"a=tls-id:".concat(e).concat(this.eol):""}printIdentity(e){return 0===e.length?"":e.map(e=>"a=identity:".concat(e.assertionValue).concat(e.extensions.map(e=>"".concat(o).concat(e.name).concat(e.value?"=".concat(e.value):"")))).join(this.eol)+this.eol}printMsidSemantic(e){if(!e)return"";let t="a=msid-semantic:".concat(e.semantic);return e.applyForAll?t+="".concat(o,"*"):e.identifierList.length>0&&(t+=e.identifierList.map(e=>"".concat(o).concat(e))),t+this.eol}}class O extends w{print(e){const t=e.attributes;let n="";return n+=this.printRTCP(t.rtcp),n+=this.printIceUfrag(t.iceUfrag),n+=this.printIcePwd(t.icePwd),n+=this.printIceOptions(t.iceOptions),n+=this.printCandidates(t.candidates),n+=this.printRemoteCandidatesList(t.remoteCandidatesList),n+=this.printEndOfCandidates(t.endOfCandidates),n+=this.printFingerprints(t.fingerprints),n+=this.printSetup(t.setup),n+=this.printMid(t.mid),n+=this.printExtmap(t.extmaps),n+=this.printRTPRelated(t),n+=this.printPtime(t.ptime),n+=this.printMaxPtime(t.maxPtime),n+=this.printDirection(t.direction),n+=this.printSSRCGroups(t.ssrcGroups),n+=this.printSSRC(t.ssrcs),n+=this.printRTCPMux(t.rtcpMux),n+=this.printRTCPMuxOnly(t.rtcpMuxOnly),n+=this.printRTCPRsize(t.rtcpRsize),n+=this.printMSId(t.msids),n+=this.printImageattr(t.imageattr),n+=this.printRid(t.rids),n+=this.printSimulcast(t.simulcast),n+=this.printSCRPPort(t.sctpPort),n+=this.printMaxMessageSize(t.maxMessageSize),n+=this.printUnrecognized(t.unrecognized),n}printCandidates(e){return e.map(e=>"a=candidate:".concat(e.foundation).concat(o).concat(e.componentId).concat(o).concat(e.transport).concat(o).concat(e.priority).concat(o).concat(e.connectionAddress).concat(o).concat(e.port).concat(o,"typ").concat(o).concat(e.type).concat(e.relAddr?"".concat(o,"raddr").concat(o).concat(e.relAddr):"").concat(e.relPort?"".concat(o,"rport").concat(o).concat(e.relPort):"").concat(Object.keys(e.extension).map(t=>"".concat(o).concat(t).concat(o).concat(e.extension[t])).join("")).concat(this.eol)).join("")}printRemoteCandidatesList(e){return e.map(e=>"a=remote-candidates:".concat(e.join(o)).concat(this.eol)).join("")}printEndOfCandidates(e){return void 0===e?"":"a=end-of-candidates"+this.eol}printRTPRelated(e){if(!e.payloads)return"";const t=e.payloads;let n="";n+=e.rtcpFeedbackWildcards.map(e=>this.printRTCPFeedback("*",e)).join("");for(const r of t)n+=this.printRtpMap(r.payloadType,r.rtpMap),n+=this.printFmtp(r.payloadType,r.fmtp),n+=r.rtcpFeedbacks.map(e=>this.printRTCPFeedback(r.payloadType,e)).join("");return n}printFmtp(e,t){if(!t)return"";const n=Object.keys(t.parameters);return 1===n.length&&void 0===t.parameters[n[0]]?"a=fmtp:".concat(e).concat(o).concat(n[0]).concat(this.eol):"a=fmtp:".concat(e).concat(o).concat(Object.keys(t.parameters).map(e=>"".concat(e,"=").concat(t.parameters[e])).join(";")).concat(this.eol)}printRtpMap(e,t){return t?"a=rtpmap:".concat(e).concat(o).concat(t.encodingName,"/").concat(t.clockRate).concat(t.encodingParameters?"/".concat(t.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(e,t){let n="a=rtcp-fb:".concat(e).concat(o),r=t;switch(r.type){case"trr-int":n+="ttr-int".concat(o).concat(r.interval);break;case"ack":case"nack":default:r=r,n+="".concat(r.type),r.parameter&&(n+="".concat(o).concat(r.parameter),r.additional&&(n+="".concat(o).concat(r.additional)))}return n+this.eol}printPtime(e){return void 0===e?"":"a=ptime:".concat(e).concat(this.eol)}printMaxPtime(e){return void 0===e?"":"a=maxptime:".concat(e).concat(this.eol)}printDirection(e){return void 0===e?"":"a=".concat(e).concat(this.eol)}printSSRC(e){return e.map(e=>Object.keys(e.attributes).map(t=>"a=ssrc:".concat(e.ssrcId.toString(10)).concat(o).concat(t).concat(e.attributes[t]?":".concat(e.attributes[t]):"").concat(this.eol)).join("")).join("")}printRTCPMux(e){return void 0===e?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(e){return void 0===e?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(e){return void 0===e?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(e){if(void 0===e)return"";let t="a=rtcp:".concat(e.port);return e.netType&&(t+="".concat(o).concat(e.netType)),e.addressType&&(t+="".concat(o).concat(e.addressType)),e.address&&(t+="".concat(o).concat(e.address)),t+this.eol}printMSId(e){return e.map(e=>"a=msid:".concat(e.id).concat(e.appdata?"".concat(o).concat(e.appdata):"").concat(this.eol)).join("")}printImageattr(e){return e.map(e=>"a=imageattr:".concat(e).concat(this.eol)).join("")}printRid(e){return e.map(e=>{let t="a=rid:".concat(e.id).concat(o).concat(e.direction);return e.payloads&&(t+="".concat(o,"pt=").concat(e.payloads.join(","))),e.params.length>0&&(t+="".concat(o).concat(e.params.map(e=>"depend"===e.type?"depend=".concat(e.rids.join(",")):"".concat(e.type,"=").concat(e.val)).join(";"))),t+this.eol}).join("")}printSimulcast(e){return void 0===e?"":"a=simulcast:".concat(e).concat(this.eol)}printSCRPPort(e){return void 0===e?"":"a=sctp-port:".concat(e).concat(this.eol)}printMaxMessageSize(e){return void 0===e?"":"a=max-message-size:".concat(e)}printMid(e){return void 0===e?"":"a=mid:".concat(e).concat(this.eol)}printSSRCGroups(e){return e.map(e=>"a=ssrc-group:".concat(e.semantic).concat(e.ssrcIds.map(e=>"".concat(o).concat(e.toString(10))).join("")).concat(this.eol)).join("")}}function N(e){return(new S).parse(e)}function L(e,t){return(new R).print(e,t)}}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8)})()}));function Jv(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xv(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=Jv(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=Jv(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}function eE(e,t,n,r,i){var o;let s=[],a=[],c=[],l=[],u=!1,d=!1;const h=Yv.parse(e);if(Xn(o=h.mediaDescriptions).call(o,e=>{"video"!==e.media.mediaType||u||(a=e.attributes.payloads,l=e.attributes.extmaps,u=!0),"audio"!==e.media.mediaType||d||(s=e.attributes.payloads,c=e.attributes.extmaps,d=!0)}),!l||0===a.length)throw new Error("Cannot get video capabilities from SDP.");if(!c||0===s.length)throw new Error("Cannot get audio capabilities from SDP.");return Xn(a).call(a,e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=br(e.rtpMap.clockRate))}),Xn(s).call(s,e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=br(e.rtpMap.clockRate))}),t&&(s=Gr(s).call(s,e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}),a=Gr(a).call(a,e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),n&&(a=Gr(a).call(a,e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")})),r&&(null==r?void 0:r.length)>0&&(s=Gr(s).call(s,e=>{var t;return rs(r).call(r,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")})),i&&(null==i?void 0:i.length)>0&&(a=Gr(a).call(a,e=>{var t;return rs(i).call(i,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")})),{audioCodecs:s,videoCodecs:a,audioExtensions:c,videoExtensions:l}}function tE(e){const t=Yv.parse(e);let n,r;for(const i of t.mediaDescriptions){if(!n){const e=i.attributes.iceUfrag,t=i.attributes.icePwd;if(!e||!t)throw new Error("Cannot get iceUfrag or icePwd from SDP.");n={iceUfrag:e,icePwd:t}}if(!r){const e=i.attributes.fingerprints;e.length>0&&(r={fingerprints:e})}}if(!r&&t.attributes.fingerprints.length>0&&(r={fingerprints:t.attributes.fingerprints}),!r||!n)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:n,dtlsParameters:r}}function nE(e){var t,n,r;const{dtls:i,ice:o,rtpCapabilities:s,cname:a}=e,{candidates:c,defaultIp:l,defaultPort:u}=cE(o.candidates),d={fingerprints:vo(t=i.fingerprints).call(t,e=>({hashFunction:e.algorithm,fingerprint:e.fingerprint}))},h={iceUfrag:o.iceUfrag,icePwd:o.icePwd};let p;switch(i.role){case"server":p="passive";break;case"client":p="active";break;case"auto":p="actpass"}return Xn(n=s.audioCodecs).call(n,e=>{hl(e.rtcpFeedbacks)||(e.rtcpFeedbacks=[])}),Xn(r=s.videoCodecs).call(r,e=>{hl(e.rtcpFeedbacks)||(e.rtcpFeedbacks=[])}),s.audioExtensions||(s.audioExtensions=[]),s.videoExtensions||(s.videoExtensions=[]),{dtlsParameters:d,iceParameters:h,candidates:c,rtpCapabilities:s,setup:p,cname:a,defaultIp:l,defaultPort:u}}function rE(e,t,n){const r=[],i=[];return Xn(e).call(e,({ssrcId:e,rtx:o})=>{var s;const a=kp(8,"track-"),c={ssrcId:e,attributes:Xv({label:a,mslabel:n=n||kp(10,""),msid:Je(s="".concat(n," ")).call(s,a)},t&&{cname:t})};if(r.push(c),void 0!==o){var l;const s={ssrcId:o,attributes:Xv({label:a,mslabel:n,msid:Je(l="".concat(n," ")).call(l,a)},t&&{cname:t})};r.push(s),i.push({semantic:"FID",ssrcIds:[e,o]})}}),e.length>1&&i.push({semantic:"SIM",ssrcIds:vo(e).call(e,({ssrcId:e})=>e)}),{ssrcs:r,ssrcGroups:i}}function iE(e,t){var n;t instanceof jh&&Xn(n=e.attributes.payloads).call(n,e=>{var n;if("opus"!==(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase()))return;e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime="10",e.fmtp.parameters.useinbandfec="1";const r=t._encoderConfig;r&&(r.bitrate&&!Ia()&&(e.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*r.bitrate))),r.sampleRate&&(e.fmtp.parameters.maxplaybackrate="".concat(r.sampleRate),e.fmtp.parameters["sprop-maxcapturerate"]="".concat(r.sampleRate)),r.stereo&&(e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"))})}function oE(e){var t;const n=Lv(t=e.attributes.unrecognized).call(t,e=>"x-google-flag"===e.attField&&"conference"===e.attValue);var r;-1!==n&&To(r=e.attributes.unrecognized).call(r,n,1)}function sE(e,t){var n,r;if(!(t instanceof Cv&&t._encoderConfig&&-1===Lo(n=t._hints).call(n,Eu.SCREEN_TRACK)))return;const i=t._encoderConfig;var o,s;Fu().supportMinBitrate&&i.bitrateMin&&Xn(o=e.attributes.payloads).call(o,e=>{var t,n;rs(t=["h264","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-min-bitrate"]="".concat(i.bitrateMin))}),Fu().supportMinBitrate&&!rs(r=t._hints).call(r,Eu.LOW_STREAM)&&i.bitrateMax&&Xn(s=e.attributes.payloads).call(s,e=>{var t,n;rs(t=["h264","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-start-bitrate"]="".concat(Math.floor(i.bitrateMax)))})}function aE(e,t,n){if(!t)return;let r,i;if("video"===e.media.mediaType?(r=n.videoExtensions,i=n.videoCodecs):(r=n.audioExtensions,i=n.audioCodecs),!0===t.tcc){const t=Qo(r).call(r,e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName);if(t){var o;Qo(o=e.attributes.extmaps).call(o,e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName)||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"});const n=function(e,t){return Gr(t).call(t,t=>!!Qo(e).call(e,e=>{var n;return e.payloadType===t.payloadType&&!!Qo(n=e.rtcpFeedbacks).call(n,e=>"transport-cc"===e.type)}))}(i,e.attributes.payloads);Xn(n).call(n,e=>{var t;Qo(t=e.rtcpFeedbacks).call(t,e=>"transport-cc"===e.type)||e.rtcpFeedbacks.push({type:"transport-cc"})})}}else if(!1===t.tcc){var s,a;const t=Lv(s=e.attributes.extmaps).call(s,e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName);var c;-1!==t&&To(c=e.attributes.extmaps).call(c,t,1),Xn(a=e.attributes.payloads).call(a,e=>{var t;const n=Lv(t=e.rtcpFeedbacks).call(t,e=>"transport-cc"===e.type);var r;-1!==n&&To(r=e.rtcpFeedbacks).call(r,n,1)})}if(!0===t.remb){const t=Qo(r).call(r,e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName);if(t){var l;Qo(l=e.attributes.extmaps).call(l,e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName)||e.attributes.extmaps.push({entry:t.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"});const n=function(e,t){return Gr(t).call(t,t=>!!Qo(e).call(e,e=>{var n;return e.payloadType===t.payloadType&&!!Qo(n=e.rtcpFeedbacks).call(n,e=>"goog-remb"===e.type)}))}(i,e.attributes.payloads);Xn(n).call(n,e=>{var t;Qo(t=e.rtcpFeedbacks).call(t,e=>"goog-remb"===e.type)||e.rtcpFeedbacks.push({type:"goog-remb"})})}}else if(!1===t.remb){var u,d;const t=Lv(u=e.attributes.extmaps).call(u,e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName);var h;-1!==t&&To(h=e.attributes.extmaps).call(h,t,1),Xn(d=e.attributes.payloads).call(d,e=>{var t;const n=Lv(t=e.rtcpFeedbacks).call(t,e=>"goog-remb"===e.type);var r;-1!==n&&To(r=e.rtcpFeedbacks).call(r,n,1)})}}function cE(e){var t;const n=[];Xn(e).call(e,e=>{const t={foundation:e.foundation,componentId:"1",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}};n.push(t),n.push(Xv({},t,{componentId:"2"}))});const r=n[0].connectionAddress||"0.0.0.0",i=n[0].port||"9";return Rc.debug(Je(t="choose highest priority candidate IP:port ".concat(r,":")).call(t,i," as default ICE connection address")),{candidates:n,defaultIp:r,defaultPort:i}}class lE{constructor(e){e=jp(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:o,localCapabilities:s,sdkCodec:a,cname:c,ip:l,port:u}=e,d=Yv.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=i,this.candidates=r,this.iceParameters=t,this.dtlsParameters=n,this.setup=o,this.localCapabilities=s,this.cname=c,this.ip=l,this.port=u,this.addressType=-1===Lo(l).call(l,":")?"IP4":"IP6";for(let m=0;m<d.mediaDescriptions.length;m++){var h;const e=d.mediaDescriptions[m];if(e.media.port=this.port,Xn(h=e.connections).call(h,e=>{e.address=this.ip,e.addrtype=this.addressType}),e.attributes.rtcp?(e.attributes.rtcp.address=this.ip,e.attributes.rtcp.port=this.port,e.attributes.rtcp.addressType=this.addressType):e.attributes.rtcp={port:u,address:l,netType:"IN",addressType:this.addressType},e.attributes.iceUfrag=t.iceUfrag,e.attributes.icePwd=t.icePwd,e.attributes.fingerprints=n.fingerprints,e.attributes.candidates=r,e.attributes.setup=o,"video"===e.media.mediaType){var p,f;e.media.fmts=vo(p=i.videoCodecs).call(p,e=>e.payloadType.toString(10));const t=Gr(f=i.videoCodecs).call(f,e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:rs(n=t.encodingName.toLowerCase()).call(n,a)});if(0===t.length)throw new Error("Codec ".concat(a," not supported by remote SDP."));e.attributes.payloads=t,e.attributes.extmaps=i.videoExtensions}var g;"audio"===e.media.mediaType&&(e.media.fmts=vo(g=i.audioCodecs).call(g,e=>e.payloadType.toString(10)),e.attributes.payloads=i.audioCodecs,e.attributes.extmaps=i.audioExtensions),d.mediaDescriptions[m]=this.mungMediaDesc(e)}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}toString(){return Yv.print(this.sessionDesc)}send(e,t,n){var r,i,o;const{ssrcs:s,ssrcGroups:a}=rE(t,this.cname),c=Qo(r=this.sessionDesc.mediaDescriptions).call(r,t=>e===ku.VIDEO?"video"===t.media.mediaType:"audio"===t.media.mediaType),l=s[0].attributes.label,u=s[0].attributes.mslabel;return c.attributes.ssrcs=Je(i=c.attributes.ssrcs).call(i,s),c.attributes.ssrcGroups=Je(o=c.attributes.ssrcGroups).call(o,a),{id:l,mslabel:u}}stopSending(e){var t;Xn(t=this.sessionDesc.mediaDescriptions).call(t,t=>{var n,r;const i=[],o=[],s=[];Xn(n=t.attributes.ssrcs).call(n,t=>{rs(e).call(e,t.attributes.label||"")?s.push(t):i.push(t)}),Xn(r=t.attributes.ssrcGroups).call(r,e=>{var t;rs(t=vo(s).call(s,e=>e.ssrcId)).call(t,e.ssrcIds[0])||o.push(e)}),t.attributes.ssrcs=i,t.attributes.ssrcGroups=o})}mute(e){var t;const n=Qo(t=this.sessionDesc.mediaDescriptions).call(t,t=>t.attributes.mid===e);if(!n)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));n.attributes.direction="inactive"}unmute(e){var t;const n=Qo(t=this.sessionDesc.mediaDescriptions).call(t,t=>t.attributes.mid===e);if(!n)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));n.attributes.direction="sendonly"}receive(e,t,n){Xn(e).call(e,(e,t)=>{var n;const r=e._mediaStreamTrack,i=Lv(n=this.sessionDesc.mediaDescriptions).call(n,e=>e.attributes.mid===r.kind),o=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[i],e);this.sessionDesc.mediaDescriptions[i]=o})}stopReceiving(e){}restartICE(e,t,n,r){var i;e=jp(e),t=jp(t),this.iceParameters=e,this.candidates=t,this.ip=n,this.port=r,this.addressType=-1===Lo(n).call(n,":")?"IP4":"IP6",Xn(i=this.sessionDesc.mediaDescriptions).call(i,t=>{var i;t.media.port=this.port,Xn(i=t.connections).call(i,e=>{e.address=n,e.addrtype=this.addressType}),t.attributes.rtcp?(t.attributes.rtcp.address=this.ip,t.attributes.rtcp.port=this.port,t.attributes.rtcp.addressType=this.addressType):t.attributes.rtcp={port:r,address:n,netType:"IN",addressType:this.addressType},t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd,t.attributes.candidates=this.candidates})}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}mungRecvMediaDsec(e,t){const n=jp(e);return iE(n,t),sE(n,t),n}updateRecvMedia(e,t){var n;const r=Lv(n=this.sessionDesc.mediaDescriptions).call(n,t=>t.attributes.mid===e);if(-1!==r){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],t);this.sessionDesc.mediaDescriptions[r]=e}}bumpMid(e){this.currentMidIndex+=e}updateTrackLabel(e,t,n){var r;const i=Qo(r=this.sessionDesc.mediaDescriptions).call(r,t=>e===ku.VIDEO?"video"===t.attributes.mid:"audio"===t.attributes.mid);if(i){var o;const e=Qo(o=i.attributes.ssrcs).call(o,e=>e.attributes.label===t);var s;e&&(e.attributes.label=n,null===(s=e.attributes.msid)||void 0===s||s.replace(t,n))}}mungMediaDesc(e){const t=jp(e);return oE(t),function(e){var t,n;const r=Qo(t=e.attributes.extmaps).call(t,e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName);var i,o;r&&To(i=e.attributes.extmaps).call(i,Lo(o=e.attributes.extmaps).call(o,r),1),Xn(n=e.attributes.payloads).call(n,e=>{var t;const n=Lv(t=e.rtcpFeedbacks).call(t,e=>"transport-cc"===e.type);var r;-1!==n&&To(r=e.rtcpFeedbacks).call(r,n,1)})}(t),t}}function uE(e){if(Array.isArray(e))return e.map((function(e){return e}));if(!dE(e))return e;var t={};for(var n in e)dE(e[n])||Array.isArray(e[n])?t[n]=uE(e[n]):t[n]=e[n];return t}function dE(e){return!("object"!=typeof e||Array.isArray(e)||!e)}var hE=function(){function e(e){this.input=[],this.size=e}return e.prototype.add=function(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)},e.prototype.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},e}(),pE=function(e,t){return(pE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */function fE(e,t){function n(){this.constructor=e}pE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var gE=function(){return(gE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function mE(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function _E(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var vE,EE={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[]},AE={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0},yE={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},SE={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},bE={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},CE=function(){function e(e,t){var n=this;this.videoIsReady=!1,this.videoIsReady2={},this.stats=uE(EE),this.isFirstVideoReceived={},this.isFirstVideoDecoded={},this.isFirstAudioReceived={},this.isFirstAudioDecoded={},this.lossRateWindowStats=[],this.pc=e,this.options=t,this.intervalTimer=window.setInterval((function(){return mE(n,void 0,void 0,(function(){return _E(this,(function(e){return this.updateStats(),[2]}))}))}),this.options.updateInterval)}return e.prototype.getStats=function(){return this.stats},e.prototype.setVideoIsReady=function(e){this.videoIsReady=e},e.prototype.setVideoIsReady2=function(e,t){this.videoIsReady2[e]=t},e.prototype.getVideoIsReady=function(e){return this.videoIsReady2[e]||!1},e.prototype.setIsFirstAudioDecoded=function(e){},e.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},e.prototype.calcLossRate=function(e){var t=this;this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var n=this.lossRateWindowStats.length,r=0,i=0,o=0,s=0,a=function(a){e[a].forEach((function(e,c){if(t.lossRateWindowStats[n-1][a][c]&&t.lossRateWindowStats[0][a][c]){var l=t.lossRateWindowStats[n-1][a][c].packets-t.lossRateWindowStats[0][a][c].packets,u=t.lossRateWindowStats[n-1][a][c].packetsLost-t.lossRateWindowStats[0][a][c].packetsLost;"videoSend"===a||"audioSend"===a?(r+=l,o+=u):(i+=l,s+=u),Number.isNaN(l)||Number.isNaN(l)?e.packetLostRate=0:e.packetLostRate=l<=0||u<=0?0:u/(l+u)}}))},c=0,l=["videoSend","audioSend","videoRecv","audioRecv"];c<l.length;c++)a(l[c]);e.sendPacketLossRate=r<=0||o<=0?0:o/(r+o),e.recvPacketLossRate=i<=0||s<=0?0:s/(i+s)},e}(),TE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._stats=EE,t.lastDecodeVideoReceiverStats=new Map,t}return fE(t,e),t.prototype.updateStats=function(){return mE(this,void 0,void 0,(function(){var e,t,n,r;return _E(this,(function(i){switch(i.label){case 0:return[4,this._getStats()];case 1:return e=i.sent(),t=this.statsResponsesToObjects(e),this._stats=uE(EE),n=t.filter((function(e){return"ssrc"===e.type})),this.processSSRCStats(n),(r=t.find((function(e){return"VideoBwe"===e.type})))&&this.processBandwidthStats(r),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}}))}))},t.prototype.processBandwidthStats=function(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)},t.prototype.processSSRCStats=function(e){var t=this;e.forEach((function(e){var n=e.id.includes("send");switch(e.mediaType+"_"+(n?"send":"recv")){case"video_send":var r=uE(yE);r.codec=e.googCodecName,r.adaptionChangeReason="none",e.googCpuLimitedResolution&&(r.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(r.adaptionChangeReason="bandwidth"),r.avgEncodeMs=Number(e.googAvgEncodeMs),r.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},r.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},r.firsCount=Number(e.googFirReceived),r.nacksCount=Number(e.googNacksReceived),r.plisCount=Number(e.googPlisReceived),r.frameCount=Number(e.framesEncoded),r.bytes=Number(e.bytesSent),r.packets=Number(e.packetsSent),r.packetsLost=Number(e.packetsLost),r.ssrc=Number(e.ssrc),r.rttMs=Number(e.googRtt||0),t._stats.videoSend.push(r),t._stats.rtt=r.rttMs;break;case"video_recv":var i=uE(AE),o=t.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(i.codec=e.googCodecName,i.targetDelayMs=Number(e.googTargetDelayMs),i.renderDelayMs=Number(e.googRenderDelayMs),i.currentDelayMs=Number(e.googCurrentDelayMs),i.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),i.decodeMs=Number(e.googDecodeMs),i.maxDecodeMs=Number(e.googMaxDecodeMs),i.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},i.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},i.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},i.jitterBufferMs=Number(e.googJitterBufferMs),i.firsCount=Number(e.googFirsSent),i.nacksCount=Number(e.googNacksSent),i.plisCount=Number(e.googPlisSent),i.framesDecodeCount=Number(e.framesDecoded),i.bytes=Number(e.bytesReceived),i.packets=Number(e.packetsReceived),i.packetsLost=Number(e.packetsLost),i.ssrc=Number(e.ssrc),i.packets>0&&!t.isFirstVideoReceived[i.ssrc]&&(t.onFirstVideoReceived&&t.onFirstVideoReceived(i.ssrc),t.isFirstVideoReceived[i.ssrc]=!0),i.framesDecodeCount>0&&!t.isFirstVideoDecoded[i.ssrc]&&(t.onFirstVideoDecoded&&t.onFirstVideoDecoded(i.ssrc,i.decodedFrame.width,i.decodedFrame.height),t.isFirstVideoDecoded[i.ssrc]=!0),o){var s=o.stats,a=Date.now()-o.lts;i.framesDecodeFreezeTime=s.framesDecodeFreezeTime,i.framesDecodeInterval=s.framesDecodeInterval,i.framesDecodeCount>s.framesDecodeCount&&t.isFirstVideoDecoded?(o.lts=Date.now(),i.framesDecodeInterval=a,i.framesDecodeInterval>=t.options.freezeRateLimit&&(t.getVideoIsReady(parseInt(e.ssrc,10))?i.framesDecodeFreezeTime+=i.framesDecodeInterval:t.setVideoIsReady2(parseInt(e.ssrc,10),!0))):i.framesDecodeCount<o.stats.framesDecodeCount&&(i.framesDecodeInterval=0)}t.lastDecodeVideoReceiverStats.set(i.ssrc,{stats:gE({},i),lts:Date.now()}),t._stats.videoRecv.push(i);break;case"audio_recv":var c=uE(bE);c.codec=e.googCodecName,c.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,c.decodingCNG=Number(e.googDecodingCNG),c.decodingCTN=Number(e.googDecodingCTN),c.decodingCTSG=Number(e.googDecodingCTSG),c.decodingNormal=Number(e.googDecodingNormal),c.decodingPLC=Number(e.googDecodingPLC),c.decodingPLCCNG=Number(e.googDecodingPLCCNG),c.expandRate=Number(e.googExpandRate),c.accelerateRate=Number(e.googAccelerateRate),c.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),c.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),c.speechExpandRate=Number(e.googSpeechExpandRate),c.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),c.jitterBufferMs=Number(e.googJitterBufferMs),c.jitterMs=Number(e.googJitterReceived),c.bytes=Number(e.bytesReceived),c.packets=Number(e.packetsReceived),c.packetsLost=Number(e.packetsLost),c.ssrc=Number(e.ssrc),c.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),c.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),c.receivedFrames>0&&!t.isFirstAudioReceived[c.ssrc]&&(t.onFirstAudioReceived&&t.onFirstAudioReceived(c.ssrc),t.isFirstAudioReceived[c.ssrc]=!0),c.decodingNormal>0&&!t.isFirstAudioDecoded[c.ssrc]&&(t.onFirstAudioDecoded&&t.onFirstAudioDecoded(c.ssrc),t.isFirstAudioDecoded[c.ssrc]=!0),t._stats.audioRecv.push(c);break;case"audio_send":var l=uE(SE);l.codec=e.googCodecName,l.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,l.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),l.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),l.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),l.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),l.bytes=Number(e.bytesSent),l.packets=Number(e.packetsSent),l.packetsLost=Number(e.packetsLost),l.ssrc=Number(e.ssrc),l.rttMs=Number(e.googRtt||0),t._stats.rtt=l.rttMs,t._stats.audioSend.push(l)}}))},t.prototype._getStats=function(){var e=this;return new Promise((function(t,n){e.pc.getStats(t,n)}))},t.prototype.statsResponsesToObjects=function(e){var t=[];return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t.push(n)})),t},t}(CE);!function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(vE||(vE={}));var IE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._stats=EE,t.lastDecodeVideoReceiverStats=new Map,t.lastVideoFramesRecv=new Map,t.lastVideoFramesSent=new Map,t.lastVideoFramesDecode=new Map,t.lastVideoJBDelay=new Map,t.lastAudioJBDelay=new Map,t.mediaBytesSent=new Map,t.mediaBytesRetransmit=new Map,t.mediaBytesTargetEncode=new Map,t.lastEncoderMs=new Map,t}return fE(t,e),t.prototype.updateStats=function(){return mE(this,void 0,void 0,(function(){var e,t=this;return _E(this,(function(n){switch(n.label){case 0:return e=this,[4,this.pc.getStats()];case 1:return e.report=n.sent(),this._stats=uE(EE),this.report.forEach((function(e){switch(e.type){case vE.OUTBOUND:"audio"===e.mediaType?t.processAudioOutboundStats(e):"video"===e.mediaType&&t.processVideoOutboundStats(e);break;case vE.INBOUND:"audio"===e.mediaType?t.processAudioInboundStats(e):"video"===e.mediaType&&t.processVideoInboundStats(e);break;case vE.TRANSPORT:var n=t.report.get(e.selectedCandidatePairId);n&&t.processCandidatePairStats(n);break;case vE.CANDIDATE_PAIR:e.selected&&t.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}}))}))},t.prototype.processCandidatePairStats=function(e){this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}))},t.prototype.processAudioInboundStats=function(e){var t=this._stats.audioRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=uE(bE),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,e.trackId&&this.processAudioTrackReceiverStats(e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0)},t.prototype.processVideoInboundStats=function(e){var t=this._stats.videoRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=uE(AE),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded;var n=this.lastDecodeVideoReceiverStats.get(t.ssrc),r=this.lastVideoFramesDecode.get(t.ssrc),i=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){var o=t.decodedFrame?t.decodedFrame.width:0,s=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,o,s),this.isFirstVideoDecoded[t.ssrc]=!0}if(n){var a=n.stats,c=i-n.lts;t.framesDecodeFreezeTime=a.framesDecodeFreezeTime,t.framesDecodeInterval=a.framesDecodeInterval,t.framesDecodeCount>a.framesDecodeCount&&this.isFirstVideoDecoded?(n.lts=Date.now(),t.framesDecodeInterval=c,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<a.framesDecodeCount&&(t.framesDecodeInterval=0)}r&&i-r.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-r.count)/((i-r.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:t.decodeFrameRate})):r?t.decodeFrameRate=r.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:0}),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),e.trackId&&this.processVideoTrackReceiverStats(e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:gE({},t),lts:n?n.lts:Date.now()})},t.prototype.processVideoOutboundStats=function(e){var t=this._stats.videoSend.find((function(t){return t.ssrc===e.ssrc}));t||(t=uE(yE),this._stats.videoSend.push(t));var n=this.mediaBytesSent.get(e.ssrc);if(n?n.add(e.bytesSent):((i=new hE(10)).add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,i)),void 0!==e.retransmittedBytesSent){var r=this.mediaBytesRetransmit.get(e.ssrc);r?r.add(e.retransmittedBytesSent):((i=new hE(10)).add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,i))}if(e.totalEncodedBytesTarget){var i,o=this.mediaBytesTargetEncode.get(e.ssrc);o?o.add(e.totalEncodedBytesTarget):((i=new hE(10)).add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,i))}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,e.totalEncodeTime&&e.framesEncoded){var s=this.lastEncoderMs.get(e.ssrc);if(!s||s.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{var a=e.framesEncoded-s.lastFrameCount,c=e.totalEncodeTime-s.lastEncoderTime;t.avgEncodeMs=1e3*c/a}this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lts:Date.now()})}if(e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),e.trackId&&this.processVideoTrackSenderStats(e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{var l=this.findRemoteStatsId(e.ssrc,vE.REMOTE_INBOUND);l&&this.processRemoteInboundStats(l,t)}},t.prototype.processAudioOutboundStats=function(e){var t=this._stats.audioSend.find((function(t){return t.ssrc===e.ssrc}));if(t||(t=uE(SE),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.trackId&&this.processAudioTrackSenderStats(e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{var n=this.findRemoteStatsId(e.ssrc,vE.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}},t.prototype.findRemoteStatsId=function(e,t){var n=Array.from(this.report.values()).find((function(n){return n.type===t&&n.ssrc===e}));return n?n.id:null},t.prototype.processVideoMediaSource=function(e,t){var n=this.report.get(e);n&&n.width&&n.height&&n.framesPerSecond&&(t.inputFrame={width:n.width,height:n.height,frameRate:n.framesPerSecond})},t.prototype.processAudioMediaSource=function(e,t){var n=this.report.get(e);n&&(t.inputLevel=n.audioLevel)},t.prototype.processVideoTrackSenderStats=function(e,t){var n=this.report.get(e);if(n){var r=0,i=Date.now(),o=this.lastVideoFramesSent.get(t.ssrc);o&&i-o.lts>=800?(r=Math.round((n.framesSent-o.count)/((i-o.lts)/1e3)),this.lastVideoFramesSent.set(t.ssrc,{count:n.framesSent,lts:i,rate:r})):o?r=o.rate:this.lastVideoFramesSent.set(t.ssrc,{count:n.framesSent,lts:i,rate:0}),t.sentFrame={width:n.frameWidth,height:n.frameHeight,frameRate:r}}},t.prototype.processVideoTrackReceiverStats=function(e,t){var n=this.report.get(e);if(n){var r=this.lastVideoFramesRecv.get(t.ssrc),i=Date.now();t.framesReceivedCount=n.framesReceived;var o=0;if(r&&i-r.lts>=800?(o=Math.round((n.framesReceived-r.count)/((i-r.lts)/1e3)),this.lastVideoFramesRecv.set(t.ssrc,{count:n.framesReceived,lts:i,rate:o})):r?o=r.rate:this.lastVideoFramesRecv.set(t.ssrc,{count:n.framesReceived,lts:i,rate:0}),t.receivedFrame={width:n.frameWidth||0,height:n.frameHeight||0,frameRate:o||0},t.decodedFrame={width:n.frameWidth||0,height:n.frameHeight||0,frameRate:t.decodeFrameRate||0},t.outputFrame={width:n.frameWidth||0,height:n.frameHeight||0,frameRate:t.decodeFrameRate||0},n.jitterBufferDelay&&n.jitterBufferEmittedCount){var s=this.lastVideoJBDelay.get(t.ssrc);this.lastVideoJBDelay.set(t.ssrc,{jitterBufferDelay:n.jitterBufferDelay,jitterBufferEmittedCount:n.jitterBufferEmittedCount}),s||(s={jitterBufferDelay:0,jitterBufferEmittedCount:0});var a=1e3*(n.jitterBufferDelay-s.jitterBufferDelay)/(n.jitterBufferEmittedCount-s.jitterBufferEmittedCount);t.jitterBufferMs=a,t.currentDelayMs=Math.round(a)}}},t.prototype.processAudioTrackSenderStats=function(e,t){var n=this.report.get(e);n&&(t.aecReturnLoss=n.echoReturnLoss||0,t.aecReturnLossEnhancement=n.echoReturnLossEnhancement||0)},t.prototype.processAudioTrackReceiverStats=function(e,t){var n=this.report.get(e);if(n){if(n.removedSamplesForAcceleration&&n.totalSamplesReceived&&(t.accelerateRate=n.removedSamplesForAcceleration/n.totalSamplesReceived),n.jitterBufferDelay&&n.jitterBufferEmittedCount){var r=this.lastAudioJBDelay.get(t.ssrc);this.lastAudioJBDelay.set(t.ssrc,{jitterBufferDelay:n.jitterBufferDelay,jitterBufferEmittedCount:n.jitterBufferEmittedCount}),r||(r={jitterBufferDelay:0,jitterBufferEmittedCount:0});var i=1e3*(n.jitterBufferDelay-r.jitterBufferDelay)/(n.jitterBufferEmittedCount-r.jitterBufferEmittedCount);t.jitterBufferMs=Math.round(i)}t.outputLevel=n.audioLevel;var o=1920;n.totalSamplesDuration&&n.totalSamplesReceived&&(o=n.totalSamplesReceived/n.totalSamplesDuration/50,t.receivedFrames=Math.round(n.totalSamplesReceived/o)),n.concealedSamples&&(t.droppedFrames=Math.round(n.concealedSamples/o))}},t.prototype.processRemoteInboundStats=function(e,t){var n=this.report.get(e);n&&(t.packetsLost=n.packetsLost,n.roundTripTime&&(t.rttMs=1e3*n.roundTripTime))},t.prototype.getCodecFromCodecStats=function(e){var t=this.report.get(e);if(!t)return"";var n=t.mimeType.match(/\/(.*)$/);return n&&n[1]?n[1]:""},t.prototype.updateSendBitrate=function(){var e=0,t=null,n=null;this.mediaBytesSent.forEach((function(t){e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((function(e){t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((function(e){n=null===n?e.diffMean():n+e.diffMean()}));var r=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*r/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==n&&(this._stats.bitrate.targetEncoded=8*n/(this.options.updateInterval/1e3))},t}(CE),RE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fE(t,e),t.prototype.updateStats=function(){return Promise.resolve()},t}(CE);function wE(e,t,n,r){void 0===t&&(t=250),void 0===n&&(n=8),void 0===r&&(r=500);var i,o=(i=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i))&&i[0]?Number(i[0].split("/")[1]):null;return o?o<76?new TE(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r}):new IE(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r}):function(e){return!!window.RTCStatsReport&&e.getStats()instanceof Promise}(e)?new IE(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r}):new RE(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r})}function kE(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}var OE=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Ur(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&hr(t,n,s),s},NE=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class LE extends xu{constructor(e,t){super(e,t),this.useRTX=!1,this.localCandidateCount=0,this.allCandidatesReceived=!1,this.mutex=new ah("P2PConnection-mutex"),this.store=t,this.peerConnection=new RTCPeerConnection(LE.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.statsFilter=wE(this.peerConnection,void 0,void 0,Ia()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}async establish(){try{const e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=tE(e.sdp),n=eE(e.sdp,!this.useRTX,!1,["opus"]);return this.localCapabilities=n,this.initialOffer=e,function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=kE(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=kE(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}({},t,{rtpCapabilities:n,offerSDP:e.sdp})}catch(e){throw new pl(ll.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,n,r,i,o,s,a){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new lE({remoteIceParameters:e,remoteDtlsParameters:t,candidates:n,remoteRTPCapabilities:r,remoteSetup:i,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:o,ip:s,port:a});const c=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:c})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}send(e,t){var n=this;return Qv((function*(){const r=yield Wv(n.mutex.lock());try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const i=vo(e).call(e,e=>n.peerConnection.addTrack(e._mediaStreamTrack)),o=yield Wv(n.peerConnection.createOffer()),s=Yv.parse(o.sdp),a=vo(e).call(e,e=>{var t;const r=e._mediaStreamTrack,i=Qo(t=s.mediaDescriptions).call(t,e=>e.attributes.mid===r.kind);if(!i)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t,n){var r;const i=Gr(r=e.attributes.ssrcs).call(r,e=>e.attributes.label===t),o=e.attributes.ssrcGroups;if(0===i.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(o&&i.length>1){const e=Qo(o).call(o,e=>{var t;return-1!==Lo(t=e.ssrcIds).call(t,i[0].ssrcId)});return e?[{ssrcId:e.ssrcIds[0],rtx:n?e.ssrcIds[1]:void 0}]:[{ssrcId:i[0].ssrcId}]}return[{ssrcId:i[0].ssrcId}]}(i,r.id,n.useRTX)});let c;try{c=yield a}catch(e){throw Xn(i).call(i,e=>{Ta()&&e.replaceTrack(null),n.peerConnection.removeTrack(e)}),e}const l=n.mungSendOfferSDP(o.sdp,e);n.remoteSDP.receive(e,t,c);const u=n.remoteSDP.toString();return yield Wv(n.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield Wv(n.applySendEncodings(i,e)),yield Wv(n.peerConnection.setRemoteDescription({type:"answer",sdp:u})),vo(e).call(e,(e,t)=>{const n=e._mediaStreamTrack.id;return{localSSRC:a[t],id:n}})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{r()}}))()}async stopSending(e){try{var t;if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const n=Gr(t=this.peerConnection.getSenders()).call(t,t=>{var n;return-1!==Lo(e).call(e,(null===(n=t.track)||void 0===n?void 0:n.id)||"")});if(n.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");vo(n).call(n,e=>{Ta()&&e.replaceTrack(null),this.peerConnection.removeTrack(e)});const r=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(r),this.remoteSDP.stopReceiving(e);const i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{id:n,mslabel:i}=this.remoteSDP.send(e,t,r),o=new fo((t,r)=>{const o=Fa(()=>{r(new Error("Cannot receive track, id: ".concat(n)))},1e4),s=r=>{const a=ma();if("Safari"===a.name&&11===Number(a.version)&&r.track.id!==n&&r.streams[0].id===i){var c;const i=r.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(e,n,r.track.id),this.peerConnection.removeEventListener("track",s),clearTimeout(o),void t(i)}if(r.track.id===n)return this.peerConnection.removeEventListener("track",s),clearTimeout(o),void t(r.track)};this.peerConnection.addEventListener("track",s)}),s=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:s});const a=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(a),{track:await o,id:n}}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(n)}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){}async unmuteRemote(e){}async muteLocal(e){try{var t;if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const n=Gr(t=this.peerConnection.getSenders()).call(t,t=>{var n;return-1!==Lo(e).call(e,(null===(n=t.track)||void 0===n?void 0:n.id)||"")});if(n.length!==e.length)throw new Error("sender' length doesn't match mids' length.");vo(n).call(n,e=>{if(Ta()&&e.track)e.track.enabled=!1;else{var t;const n=e.getParameters();Xn(t=n.encodings).call(t,e=>e.active=!1),e.setParameters(n)}})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{var t;if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const n=Gr(t=this.peerConnection.getSenders()).call(t,t=>{var n;return-1!==Lo(e).call(e,(null===(n=t.track)||void 0===n?void 0:n.id)||"")});if(n.length!==e.length)throw new Error("Senders' length doesn't match mids' length.");vo(n).call(n,async e=>{if(Ta()&&e.track)e.track.enabled=!0;else{var t;const n=e.getParameters();Xn(t=n.encodings).call(t,e=>e.active=!0),await e.setParameters(n)}});const r=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(r);const i=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}async reEstablish(){const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:tE(e.sdp).iceParameters,restartICE:async(t,n,r,i)=>this.restartICE(e,t,n,r,i),restartOfferSDP:e.sdp}}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const e=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(e.sdp,[t]);this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind,t);const r=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){var n;const r=Gr(n=this.peerConnection.getSenders()).call(n,t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e});1===r.length&&await this.applySendEncodings(r,[t])}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){var n;const r=Qo(n=this.peerConnection.getSenders()).call(n,e=>{var n;return(null===(n=e.track)||void 0===n?void 0:n.id)===t});r&&await r.replaceTrack(e._mediaStreamTrack)}async restartICE(e,t,n,r,i){try{if(!this.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");this.remoteSDP.restartICE(t,n,r,i);const o=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(e),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(e.toString()))}}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,Rc.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},Fa(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,Rc.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},jc("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[],sdpSemantics:"plan-b"};var n,r;return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(Kl(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...LE.turnServerConfigToIceServers(e.turnServer.servers)),t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...LE.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),Xn(n=Je(r=e.turnServer.servers).call(r,e.turnServer.serversFromGateway||[])).call(n,e=>{e.forceturn&&(t.iceTransportPolicy="relay")}))),t}static turnServerConfigToIceServers(e){const t=[];return Xn(e).call(e,e=>{var n,r,i;e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(n="turns:".concat(hp(e.turnServerURL),":")).call(n,e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(r="turn:".concat(e.turnServerURL,":")).call(r,e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(i="turn:".concat(e.turnServerURL,":")).call(i,e.tcpport,"?transport=tcp")}))}),t}async applySendEncodings(e,t){try{if(!Fu().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let i=0;i<e.length;i++){var n;const o=e[i],s=t[i];if(!s)continue;const a={},c={};if(s instanceof Cv)switch(s._optimizationMode){case"motion":a.degradationPreference="maintain-framerate";break;case"detail":a.degradationPreference="maintain-resolution";break;default:a.degradationPreference="balanced"}if(jc("DSCP_TYPE")&&Da()){var r;const e=jc("DSCP_TYPE");rs(r=["very-low","low","medium","high"]).call(r,e)&&(c.networkPriority=e)}const l=o.getParameters(),u=null===(n=l.encodings)||void 0===n?void 0:n[0];u&&rr(u,c),rr(l,a),await o.setParameters(l)}}catch(e){Rc.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(e,t){const n=Yv.parse(e);return Xn(t).call(t,(e,t)=>{var r;const i=e._mediaStreamTrack,o=Qo(r=n.mediaDescriptions).call(r,e=>e.attributes.mid===i.kind);o&&iE(o,e)}),Yv.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0}}function PE(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(...e){const n=this.mutex,i=await n.lock("Locking from P2PConnection.".concat(t));try{return await r.apply(this,e)}finally{i()}},n}OE([PE,NE("design:type",Function),NE("design:paramtypes",[Object,Object,Array,Object,String,String,String,String]),NE("design:returntype",fo)],LE.prototype,"connect",null),OE([PE,NE("design:type",Function),NE("design:paramtypes",[Array]),NE("design:returntype",fo)],LE.prototype,"stopSending",null),OE([PE,NE("design:type",Function),NE("design:paramtypes",[String,Array,String,Object]),NE("design:returntype",fo)],LE.prototype,"receive",null),OE([PE,NE("design:type",Function),NE("design:paramtypes",[Array]),NE("design:returntype",fo)],LE.prototype,"stopReceiving",null),OE([PE,NE("design:type",Function),NE("design:paramtypes",[String]),NE("design:returntype",fo)],LE.prototype,"muteRemote",null),OE([PE,NE("design:type",Function),NE("design:paramtypes",[String]),NE("design:returntype",fo)],LE.prototype,"unmuteRemote",null),OE([PE,NE("design:type",Function),NE("design:paramtypes",[Array]),NE("design:returntype",fo)],LE.prototype,"muteLocal",null),OE([PE,NE("design:type",Function),NE("design:paramtypes",[Array]),NE("design:returntype",fo)],LE.prototype,"unmuteLocal",null),OE([PE,NE("design:type",Function),NE("design:paramtypes",[]),NE("design:returntype",fo)],LE.prototype,"reEstablish",null),OE([PE,NE("design:type",Function),NE("design:paramtypes",[]),NE("design:returntype",void 0)],LE.prototype,"close",null),OE([PE,NE("design:type",Function),NE("design:paramtypes",[String,lh]),NE("design:returntype",fo)],LE.prototype,"updateEncoderConfig",null),OE([PE,NE("design:type",Function),NE("design:paramtypes",[String,lh]),NE("design:returntype",fo)],LE.prototype,"updateSendParameters",null),OE([PE,NE("design:type",Function),NE("design:paramtypes",[lh,String]),NE("design:returntype",fo)],LE.prototype,"replaceTrack",null),OE([PE,NE("design:type",Function),NE("design:paramtypes",[Object,Object,Array,String,String]),NE("design:returntype",fo)],LE.prototype,"restartICE",null);const DE=4e4;class ME{constructor(e){e=jp(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:o,localCapabilities:s,cname:a,ip:c,port:l}=e,u=Yv.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=i,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=s,this.setup=o,this.cname=a,this.ip=c,this.port=l,this.addressType=-1===Lo(c).call(c,":")?"IP4":"IP6";for(const f of u.mediaDescriptions){var d,h,p;if(f.media.port=this.port,Xn(d=f.connections).call(d,e=>{e.address=this.ip,e.addrtype=this.addressType}),f.attributes.rtcp?(f.attributes.rtcp.address=this.ip,f.attributes.rtcp.port=this.port,f.attributes.rtcp.addressType=this.addressType):f.attributes.rtcp={port:l,address:c,netType:"IN",addressType:this.addressType},f.attributes.iceUfrag=t.iceUfrag,f.attributes.icePwd=t.icePwd,f.attributes.fingerprints=n.fingerprints,f.attributes.candidates=r,f.attributes.setup=o,"video"===f.media.mediaType&&(f.media.fmts=vo(h=i.videoCodecs).call(h,e=>e.payloadType.toString(10)),f.attributes.payloads=i.videoCodecs,f.attributes.extmaps=i.videoExtensions,jc("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=rE([{ssrcId:DE,rtx:jc("USE_RTX")?40001:void 0}],this.cname);f.attributes.ssrcs=e,f.attributes.ssrcGroups=t}if("audio"===f.media.mediaType&&(f.media.fmts=vo(p=i.audioCodecs).call(p,e=>e.payloadType.toString(10)),f.attributes.payloads=i.audioCodecs,f.attributes.extmaps=i.audioExtensions,jc("PRELOAD_MEDIA_COUNT")>0)){const{ssrcs:e,ssrcGroups:t}=rE([{ssrcId:2e4}],this.cname);f.attributes.ssrcs=e,f.attributes.ssrcGroups=t}}this.sessionDesc=u,this.currentMidIndex=u.mediaDescriptions.length-1}get localCapabilities(){return jp(this._localCapabilities)}get rtpCapabilities(){return jp(this._rtpCapabilities)}get candidates(){return jp(this._candidates)}get iceParameters(){return jp(this._iceParameters)}get dtlsParameters(){return jp(this._dtlsParameters)}preloadRemoteMedia(){const e=jc("PRELOAD_MEDIA_COUNT"),t=this.rtpCapabilities,n=this.candidates,r=this.dtlsParameters,i=this.iceParameters;for(let a=1;a<e;a++){var o,s;const e=2*a+2e4,c=2*a+DE,{ssrcs:l,ssrcGroups:u}=rE([{ssrcId:e}],this.cname),{ssrcs:d,ssrcGroups:h}=rE([{ssrcId:c,rtx:jc("USE_RTX")?c+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:this.port,protos:["UDP","TLS","RTP","SAVPF"],fmts:vo(o=t.videoCodecs).call(o,e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:this.addressType,address:this.ip}],bandwidths:[],attributes:{iceUfrag:i.iceUfrag,icePwd:i.icePwd,unrecognized:[],candidates:n,extmaps:t.videoExtensions,fingerprints:r.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:d,ssrcGroups:h,rtcpFeedbackWildcards:[],payloads:t.videoCodecs,rtcp:{port:this.port,netType:"IN",addressType:this.addressType,address:this.ip},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*a)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:this.port,protos:["UDP","TLS","RTP","SAVPF"],fmts:vo(s=t.audioCodecs).call(s,e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:this.addressType,address:this.ip}],bandwidths:[],attributes:{iceUfrag:i.iceUfrag,icePwd:i.icePwd,unrecognized:[],candidates:n,extmaps:t.audioExtensions,fingerprints:r.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:l,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:t.audioCodecs,rtcp:{port:this.port,netType:"IN",addressType:this.addressType,address:this.ip},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*a+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return Yv.print(this.sessionDesc)}send(e,t,n,r){const{ssrcs:i,ssrcGroups:o}=rE(t,this.cname,n),s=this.findPreloadMediaDesc(i);if(s){if(r&&(r.tcc||r.remb)){var a;const e=Lo(a=this.sessionDesc.mediaDescriptions).call(a,s);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(s,r),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e);if(Ta()){if(-1!==t&&1!==t){const e=jp(this.sessionDesc.mediaDescriptions[t]);return e.attributes.direction="sendonly",e.attributes.ssrcs=i,e.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(e,r),{mid:e.attributes.mid,needExchangeSDP:!0}}{const t=this.createOrRecycleSendMedia(e,i,o,"sendonly",r);return this.updateBundleMids(),{mid:t.attributes.mid,needExchangeSDP:!0}}}if(-1!==t){const e=jp(this.sessionDesc.mediaDescriptions[t]);return e.attributes.direction="sendonly",e.attributes.ssrcs=i,e.attributes.ssrcGroups=o,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(e,r),{mid:e.attributes.mid,needExchangeSDP:!0}}{const t=this.createOrRecycleSendMedia(e,i,o,"sendonly",r);return this.updateBundleMids(),{mid:t.attributes.mid,needExchangeSDP:!0}}}}stopSending(e){var t;const n=Gr(t=this.sessionDesc.mediaDescriptions).call(t,t=>t.attributes.mid&&-1!==Lo(e).call(e,t.attributes.mid));if(n.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");Xn(n).call(n,e=>{"0"===e.attributes.mid||Ia()||Ta()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")}),this.updateBundleMids()}mute(e){var t;const n=Qo(t=this.sessionDesc.mediaDescriptions).call(t,t=>t.attributes.mid===e);if(!n)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));n.attributes.direction="inactive"}unmute(e){var t;const n=Qo(t=this.sessionDesc.mediaDescriptions).call(t,t=>t.attributes.mid===e);if(!n)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));n.attributes.direction="sendonly"}muteRemote(e){var t;const n=Gr(t=this.sessionDesc.mediaDescriptions).call(t,t=>rs(e).call(e,t.attributes.mid||""));if(n.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");Xn(n).call(n,e=>{e.attributes.direction="inactive"})}unmuteRemote(e){var t;const n=Gr(t=this.sessionDesc.mediaDescriptions).call(t,t=>rs(e).call(e,t.attributes.mid||""));if(n.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");Xn(n).call(n,e=>{e.attributes.direction="recvonly"})}receive(e,t,n){Xn(e).call(e,(e,r)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,n[r])}),this.updateBundleMids()}stopReceiving(e){var t;const n=Gr(t=this.sessionDesc.mediaDescriptions).call(t,t=>-1!==Lo(e).call(e,t.attributes.mid));if(n.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");Xn(n).call(n,e=>{e.media.port="0",e.attributes.direction="inactive"}),this.updateBundleMids()}restartICE(e,t,n,r){var i,o;e=jp(e),t=jp(t),this._iceParameters=e,this._candidates=t,this.ip=n,this.port=r,this.addressType=-1===Lo(i=this.ip).call(i,":")?"IP4":"IP6",Xn(o=this.sessionDesc.mediaDescriptions).call(o,t=>{var i;"0"!==t.media.port&&(t.media.port=this.port),Xn(i=t.connections).call(i,e=>{e.address=this.ip,e.addrtype=this.addressType}),t.attributes.rtcp?(t.attributes.rtcp.address=this.ip,t.attributes.rtcp.port=this.port,t.attributes.rtcp.addressType=this.addressType):t.attributes.rtcp={port:r,address:n,netType:"IN",addressType:this.addressType},t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd,t.attributes.candidates=this.candidates})}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}findAvailableMediaIndex(e){var t;return Lv(t=this.sessionDesc.mediaDescriptions).call(t,t=>t.media.mediaType===e&&"0"!==t.media.port&&("sendonly"===t.attributes.direction||"sendrecv"===t.attributes.direction)&&0===t.attributes.ssrcs.length)}createOrRecycleRecvMedia(e,t,n,r,i){const o=e._mediaStreamTrack.kind;let s;var a,c,l,u,d;o===ku.VIDEO?(jc("H264_PROFILE_LEVEL_ID")&&"h264"===r&&(s=Gr(c=this.rtpCapabilities.videoCodecs).call(c,e=>{var t,n,i;return rs(t=(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"").call(t,r)&&(null==e||null===(i=e.fmtp)||void 0===i?void 0:i.parameters["profile-level-id"])===jc("H264_PROFILE_LEVEL_ID")})),s&&0!==(null===(a=s)||void 0===a?void 0:a.length)||(s=Gr(l=this.rtpCapabilities.videoCodecs).call(l,e=>{var t,n;return rs(t=(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"").call(t,r)})),0===s.length&&(Rc.warning(Je(u="codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ")).call(u,null===(d=this.rtpCapabilities.videoCodecs[0].rtpMap)||void 0===d?void 0:d.encodingName)),s=this.rtpCapabilities.videoCodecs)):s=this.rtpCapabilities.audioCodecs;const h=o===ku.VIDEO?this.rtpCapabilities.videoExtensions:this.rtpCapabilities.audioExtensions;this.currentMidIndex+=1;const p="".concat(this.currentMidIndex);let f={media:{mediaType:o,port:this.port,protos:["UDP","TLS","RTP","SAVPF"],fmts:vo(s).call(s,e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:this.addressType,address:this.ip}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:h,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:this.port,netType:"IN",addressType:this.addressType,address:this.ip},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(p)}};f=this.mungRecvMediaDsec(f,e,i);const g=this.findFirstClosedMedia(o);if(g){var m;const e=Lo(m=this.sessionDesc.mediaDescriptions).call(m,g);this.sessionDesc.mediaDescriptions[e]=f}else this.sessionDesc.mediaDescriptions.push(f);return f}createOrRecycleSendMedia(e,t,n,r,i){const o=e===ku.VIDEO?this.rtpCapabilities.videoCodecs:this.rtpCapabilities.audioCodecs,s=e===ku.VIDEO?this.rtpCapabilities.videoExtensions:this.rtpCapabilities.audioExtensions;this.currentMidIndex+=1;const a="".concat(this.currentMidIndex);let c={media:{mediaType:e,port:this.port,protos:["UDP","TLS","RTP","SAVPF"],fmts:vo(o).call(o,e=>e.payloadType.toString(10))},connections:[{nettype:"IN",addrtype:this.addressType,address:this.ip}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:s,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:o,rtcp:{port:this.port,netType:"IN",addressType:this.addressType,address:this.ip},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(a)}};c=this.mungSendMediaDesc(c,i);const l=this.findFirstClosedMedia(e);if(l){var u;const e=Lo(u=this.sessionDesc.mediaDescriptions).call(u,l);this.sessionDesc.mediaDescriptions[e]=c}else this.sessionDesc.mediaDescriptions.push(c);return c}updateBundleMids(){var e,t;this.sessionDesc.attributes.groups[0].identificationTag=vo(e=Gr(t=this.sessionDesc.mediaDescriptions).call(t,e=>"0"!==e.media.port)).call(e,e=>e.attributes.mid)}mungRecvMediaDsec(e,t,n){const r=jp(e);return oE(r),iE(r,t),sE(r,t),function(e){var t;if("video"!==e.media.mediaType)return;const n=ma();if(n.name!==ha.SAFARI&&n.os!==da.IOS)return;const r=Lv(t=e.attributes.extmaps).call(t,e=>/video-orientation/g.test(e.extensionName));var i;-1!==r&&To(i=e.attributes.extmaps).call(i,r,1)}(r),aE(r,n,this.localCapabilities),r}mungSendMediaDesc(e,t){const n=jp(e);return aE(n,t,this.localCapabilities),n}updateRecvMedia(e,t){var n;const r=Lv(n=this.sessionDesc.mediaDescriptions).call(n,t=>t.attributes.mid===e);if(-1!==r){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],t);this.sessionDesc.mediaDescriptions[r]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){var t;return Qo(t=this.sessionDesc.mediaDescriptions).call(t,t=>Ia()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port)}findPreloadMediaDesc(e){var t;return Qo(t=this.sessionDesc.mediaDescriptions).call(t,t=>{var n,r;return(null===(n=t.attributes)||void 0===n||null===(r=n.ssrcs[0])||void 0===r?void 0:r.ssrcId)===e[0].ssrcId})}}function xE(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}var BE=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Ur(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&hr(t,n,s),s},UE=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class FE extends xu{constructor(e,t){super(e,t),this.useRTX=jc("USE_RTX"),this.localCandidateCount=0,this.allCandidatesReceived=!1,this.mutex=new ah("P2PConnection-mutex"),this.store=t,this.peerConnection=new RTCPeerConnection(FE.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),this.statsFilter=wE(this.peerConnection,void 0,void 0,Ia()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=tE(e.sdp),n=await async function(e,t,n,r){const i=new RTCPeerConnection;i.addTransceiver("video",{direction:"sendrecv"}),i.addTransceiver("audio",{direction:"sendrecv"});const o=await i.createOffer();if(!o.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const s=eE(o.sdp,e,t,n,r);try{i.close()}catch(e){}return s}(!this.useRTX,!1,["opus"]);return this.localCapabilities=n,this.initialOffer=e,function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=xE(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=xE(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}({},t,{rtpCapabilities:n,offerSDP:e.sdp})}catch(e){throw new pl(ll.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async connect(e,t,n,r,i,o,s,a){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new ME({remoteIceParameters:e,remoteDtlsParameters:t,candidates:n,remoteRTPCapabilities:r,remoteSetup:i,localCapabilities:this.localCapabilities,cname:o,ip:s,port:a});const c=this.remoteSDP.toString(),l=this.logSDPExchange(this.initialOffer.sdp||"","offer","local","connect");await this.peerConnection.setLocalDescription(this.initialOffer),null==l||l(c),await this.peerConnection.setRemoteDescription({type:"answer",sdp:c});const u=this.peerConnection.getTransceivers()[0];if(null!=u&&u.receiver&&this.tryBindTransportEvents(u.receiver),jc("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia();const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t)}}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.toString()))}}send(e,t){var n=this;return Qv((function*(){const r=yield Wv(n.mutex.lock());try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const i=[];Xn(e).call(e,e=>{const t=n.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});i.push(t)}),Ia()&&!0===jc("SIMULCAST")&&(yield Wv(n.applySimulcastForFirefox(i,e)));const o=yield Wv(n.peerConnection.createOffer()),s=n.remoteSDP.predictReceivingMids(e.length),a=n.mungSendOfferSDP(o.sdp,e,s),c=Yv.parse(a),l=vo(s).call(s,e=>{var t;const r=Qo(t=c.mediaDescriptions).call(t,t=>t.attributes.mid===e);if(!r)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t){var n,r;const i=[],o=Gr(n=e.attributes.ssrcGroups).call(n,e=>"FID"===e.semantic),s=Qo(r=e.attributes.ssrcGroups).call(r,e=>"SIM"===e.semantic),a=e.attributes.ssrcs;var c;if(s)Xn(c=s.ssrcIds).call(c,e=>{var n;const r=null===(n=Qo(o).call(o,t=>t.ssrcIds[0]===e))||void 0===n?void 0:n.ssrcIds[1];i.push({ssrcId:e,rtx:t?r:void 0})});else if(o.length>0){const e=o[0].ssrcIds[0],n=o[0].ssrcIds[1];i.push({ssrcId:e,rtx:t?n:void 0})}else{if(0===a.length)throw new Error("No ssrcs found on local media description.");i.push({ssrcId:a[0].ssrcId})}return i}(r,n.useRTX)});let u;try{u=yield l}catch(e){throw Xn(i).call(i,e=>{var t;return null===(t=e.stop)||void 0===t?void 0:t.call(e)}),n.remoteSDP.bumpMid(i.length),e}n.remoteSDP.receive(e,t,u);const d=n.remoteSDP.toString(),h=n.logSDPExchange(a,"offer","local","send");return yield Wv(n.peerConnection.setLocalDescription({type:"offer",sdp:a})),yield Wv(n.applySimulcastEncodings(i,e)),yield Wv(n.applySendEncodings(i,e)),null==h||h(d),yield Wv(n.peerConnection.setRemoteDescription({type:"answer",sdp:d})),vo(i).call(i,(e,t)=>{const n=s[t];return{localSSRC:l[t],id:n,transceiver:e}})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(e.toString()))}finally{r()}}))()}async stopSending(e){try{var t;if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const n=Gr(t=this.peerConnection.getTransceivers()).call(t,t=>-1!==Lo(e).call(e,t.mid));if(n.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");vo(n).call(n,e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)});const r=await this.peerConnection.createOffer(),i=this.logSDPExchange(r.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(r),this.remoteSDP.stopReceiving(e);const o=this.remoteSDP.toString();null==i||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.toString()))}}async receive(e,t,n,r){try{var i;if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:o,needExchangeSDP:s}=this.remoteSDP.send(e,t,n,r);if(s){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r),Rc.debug("[P2PConnection] receive ".concat(e," by exchanging SDP."))}else Rc.debug("[P2PConnection] receive ".concat(e," no need to exchange SDP."));const a=Qo(i=this.peerConnection.getTransceivers()).call(i,e=>e.mid===o);if(!a)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:a.receiver.track,id:o}}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(e.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(e.toString()))}}async muteLocal(e){try{var t;if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const n=Gr(t=this.peerConnection.getTransceivers()).call(t,t=>t.mid&&-1!==Lo(e).call(e,t.mid));if(n.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");vo(n).call(n,e=>{e.direction="inactive"});const r=await this.peerConnection.createOffer(),i=this.logSDPExchange(r.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(r),this.remoteSDP.muteRemote(e);const o=this.remoteSDP.toString();null==i||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.toString()))}}async unmuteLocal(e){try{var t;if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const n=Gr(t=this.peerConnection.getTransceivers()).call(t,t=>t.mid&&-1!==Lo(e).call(e,t.mid));if(n.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");vo(n).call(n,async(e,t)=>{e.direction="sendonly"});const r=await this.peerConnection.createOffer(),i=this.logSDPExchange(r.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(r),this.remoteSDP.unmuteRemote(e);const o=this.remoteSDP.toString();null==i||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.toString()))}}async reEstablish(){const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error("Cannot get SDP from restart offer.");return{iceParameters:tE(e.sdp).iceParameters,restartICE:async(t,n,r,i)=>this.restartICE(e,t,n,r,i),restartOfferSDP:e.sdp}}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const i=this.remoteSDP.toString(),o=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==o||o(i),await this.peerConnection.setRemoteDescription({type:"answer",sdp:i})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,e.toString())}}async updateSendParameters(e,t){var n;const r=Gr(n=this.peerConnection.getTransceivers()).call(n,t=>t.mid===e);1===r.length&&(this.isVP8Simulcast(t)?Ia()||await this.applySimulcastEncodings(r,[t]):await this.applySendEncodings(r,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){var n;const r=Qo(n=this.peerConnection.getTransceivers()).call(n,e=>e.mid===t);r&&await r.sender.replaceTrack(e._mediaStreamTrack)}async restartICE(e,t,n,r,i){try{if(!this.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");this.remoteSDP.restartICE(t,n,r,i);const o=this.remoteSDP.toString(),s=this.logSDPExchange(e.sdp||"","offer","local","restartICE");await this.peerConnection.setLocalDescription(e),null==s||s(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(e){throw new pl(ll.EXCHANGE_SDP_FAILED,"P2PConnection.restartICE failed; ".concat(e.toString()))}}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,Rc.debug("[pc-".concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},Fa(()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,Rc.debug("[pc-".concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},jc("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(e){const t={iceServers:[]};var n,r;return e.iceServers?t.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(Kl(e.turnServer.servers)?t.iceServers=e.turnServer.servers:(t.iceServers&&t.iceServers.push(...FE.turnServerConfigToIceServers(e.turnServer.servers)),t.iceServers&&e.turnServer.serversFromGateway&&t.iceServers.push(...FE.turnServerConfigToIceServers(e.turnServer.serversFromGateway)),Xn(n=Je(r=e.turnServer.servers).call(r,e.turnServer.serversFromGateway||[])).call(n,e=>{e.forceturn&&(t.iceTransportPolicy="relay")}))),t}static turnServerConfigToIceServers(e){const t=[];return Xn(e).call(e,e=>{var n,r,i;e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(n="turns:".concat(hp(e.turnServerURL),":")).call(n,e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(r="turn:".concat(e.turnServerURL,":")).call(r,e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(i="turn:".concat(e.turnServerURL,":")).call(i,e.tcpport,"?transport=tcp")}))}),t}tryBindTransportEvents(e){e.transport&&(this.transportEventReceiver=e,e.transport.onstatechange=()=>{var t,n;null!==(t=e.transport)&&void 0!==t&&t.state&&(null===(n=this.onDTLSTransportStateChange)||void 0===n||n.call(this,e.transport.state))},e.transport.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,e.error)},e.transport.iceTransport&&(e.transport.iceTransport.onstatechange=()=>{var t,n,r;null!==(t=e.transport)&&void 0!==t&&t.iceTransport.state&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,null===(r=e.transport)||void 0===r?void 0:r.iceTransport.state))}))}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async applySendEncodings(e,t){try{if(!Fu().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let u=0;u<e.length;u++){const d=e[u],h=t[u];if(h&&h instanceof Cv){var n,r,i;if(this.isVP8Simulcast(h))continue;const e={},t={};switch(h._optimizationMode){case"motion":e.degradationPreference="maintain-framerate";break;case"detail":e.degradationPreference="maintain-resolution";break;default:e.degradationPreference="balanced"}var o,s,a,c;if(null!==(n=h._encoderConfig)&&void 0!==n&&n.bitrateMax&&(t.maxBitrate=1e3*(null===(o=h._encoderConfig)||void 0===o?void 0:o.bitrateMax)),rs(r=h._hints).call(r,Eu.LOW_STREAM)&&(null!==(s=h._encoderConfig)&&void 0!==s&&s.frameRate&&(t.maxFramerate=fp(h._encoderConfig.frameRate)),null!==(a=h._encoderConfig)&&void 0!==a&&a.scaleResolutionDownBy&&(null===(c=h._encoderConfig)||void 0===c?void 0:c.scaleResolutionDownBy)>1&&(t.scaleResolutionDownBy=h._encoderConfig.scaleResolutionDownBy)),jc("DSCP_TYPE")&&Da()){var l;const e=jc("DSCP_TYPE");rs(l=["very-low","low","medium","high"]).call(l,e)&&(t.networkPriority=e)}const u=d.sender.getParameters(),p=null===(i=u.encodings)||void 0===i?void 0:i[0];Ia()&&!p&&(e.encodings=[t]),p&&rr(p,t),rr(u,e),await d.sender.setParameters(u)}}}catch(e){Rc.debug("Apply RTPSendEncodings failed.")}}mungSendOfferSDP(e,t,n){const r=Yv.parse(e);return Xn(t).call(t,(e,t)=>{var i;const o=n[t],s=Qo(i=r.mediaDescriptions).call(i,e=>e.attributes.mid===o);s&&(iE(s,e),function(e,t,n){var r;if(Ia())return;if("video"!==e.media.mediaType)return;if(!(t instanceof Cv))return;if("vp9"!==n&&"vp8"!==n)return;if("vp8"===n&&!jc("SIMULCAST"))return;if(void 0===t._scalabiltyMode||t._scalabiltyMode.numSpatialLayers<=1)return;const i="vp8"===n?2:t._scalabiltyMode.numSpatialLayers,o=e.attributes.ssrcs[0],s=Qo(r=e.attributes.ssrcGroups).call(r,e=>"FID"===e.semantic&&e.ssrcIds[0]===o.ssrcId),a={semantic:"SIM",ssrcIds:[o.ssrcId]};for(let c=1;c<i;c++)e.attributes.ssrcs.push({ssrcId:o.ssrcId+c,attributes:jp(o.attributes)}),a.ssrcIds.push(o.ssrcId+c),s&&(e.attributes.ssrcs.push({ssrcId:s.ssrcIds[1]+c,attributes:jp(o.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[o.ssrcId+c,s.ssrcIds[1]+c]}));e.attributes.ssrcGroups.unshift(a)}(s,e,this.store.codec))}),Yv.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let a=0;a<e.length;a++){var n,r,i,o,s;const c=e[a],l=t[a];if(l instanceof Cv&&!rs(n=l._hints).call(n,Eu.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(i=l._encoderConfig)||void 0===i?void 0:i.bitrateMax)>200&&null!==(o=l._scalabiltyMode)&&void 0!==o&&o.numSpatialLayers&&(null===(s=l._scalabiltyMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(rr(n,e))}}}async applySimulcastEncodings(e,t){if(!Ia()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof Cv&&this.isVP8Simulcast(r)){const t=e[n],i={},o={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};i.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:o.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:o.medium,scaleResolutionDownBy:4}];const s=t.sender.getParameters();await t.sender.setParameters(rr(s,i))}}}isVP8Simulcast(e){var t,n,r,i,o;return e instanceof Cv&&jc("SIMULCAST")&&"vp8"===this.store.codec&&!rs(t=e._hints).call(t,Eu.LOW_STREAM)&&(null===(n=e._encoderConfig)||void 0===n?void 0:n.bitrateMax)&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&(null===(i=e._scalabiltyMode)||void 0===i?void 0:i.numSpatialLayers)&&(null===(o=e._scalabiltyMode)||void 0===o?void 0:o.numSpatialLayers)>1}logSDPExchange(e,t,n,r){var i,o;if((jc("UPLOAD_LOG")||jc("SDP_LOGGING"))&&(Rc.upload(Je(i=Je(o="exchanging ".concat(n," ")).call(o,t," SDP during P2PConnection.")).call(i,r,"\n"),e),"offer"===t))return e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}}}function VE(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(...e){const n=this.mutex,i=await n.lock("Locking from P2PConnection.".concat(t));try{return await r.apply(this,e)}finally{i()}},n}function jE(e,t){let n=document.createElement("video"),r=document.createElement("canvas");n.setAttribute("style","display:none"),r.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),r.width=fp(t.width),r.height=fp(t.height);const i=fp(t.framerate||15);document.body.append(n),document.body.append(r);let o=e._mediaStreamTrack;n.srcObject=new MediaStream([o]),n.play();const s=r.getContext("2d");if(!s)throw new pl(ll.UNEXPECTED_ERROR,"can not get canvas context");const a=Fu(),c=r.captureStream(a.supportRequestFrame?0:i).getVideoTracks()[0],l=vh(()=>(()=>{if(n.paused&&n.play(),n.videoHeight>2&&n.videoWidth>2){const e=n.videoWidth,o=n.videoHeight/e,s=r.width*o;var t,i,a;Math.abs(s-r.height)>=2&&(Rc.debug("adjust low stream resolution",Je(t=Je(i=Je(a="".concat(r.width,"x")).call(a,r.height," -> ")).call(i,r.width,"x")).call(t,s)),r.height=s)}s.drawImage(n,0,0,r.width,r.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,n.srcObject=new MediaStream([o]))})(),i),u=c.stop;return c.stop=()=>{u.call(c),l(),n.remove(),r.width=0,r.remove(),r=null,n=null,Rc.debug("clean low stream renderer")},c}function GE(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function HE(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=GE(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=GE(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}BE([VE,UE("design:type",Function),UE("design:paramtypes",[Object,Object,Array,Object,String,String,String,String]),UE("design:returntype",fo)],FE.prototype,"connect",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[Array]),UE("design:returntype",fo)],FE.prototype,"stopSending",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[String,Array,String,Object]),UE("design:returntype",fo)],FE.prototype,"receive",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[Array]),UE("design:returntype",fo)],FE.prototype,"stopReceiving",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[String]),UE("design:returntype",fo)],FE.prototype,"muteRemote",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[String]),UE("design:returntype",fo)],FE.prototype,"unmuteRemote",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[Array]),UE("design:returntype",fo)],FE.prototype,"muteLocal",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[Array]),UE("design:returntype",fo)],FE.prototype,"unmuteLocal",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[]),UE("design:returntype",fo)],FE.prototype,"reEstablish",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[]),UE("design:returntype",void 0)],FE.prototype,"close",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[String,lh]),UE("design:returntype",fo)],FE.prototype,"updateEncoderConfig",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[String,lh]),UE("design:returntype",fo)],FE.prototype,"updateSendParameters",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[lh,String]),UE("design:returntype",fo)],FE.prototype,"replaceTrack",null),BE([VE,UE("design:type",Function),UE("design:paramtypes",[Object,Object,Array,String,String]),UE("design:returntype",fo)],FE.prototype,"restartICE",null);class QE extends oh{constructor(e,t,n,r){var i,o,s;super(e,Je(i=Je(o=Je(s="track-".concat(e.kind,"-")).call(s,t,"-")).call(o,r.clientId,"_")).call(i,kp(5,""))),this._isDestroyed=!1,this._userId=t,this._uintId=n,this.store=r}getUserId(){return this._userId}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource()}_destroy(){this._isDestroyed=!0,Rc.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}}class WE extends QE{constructor(e,t,n,r){super(e,t,n,r),this._videoVisibleTimer=null,this.trackMediaType="video",this.updateMediaStreamTrackResolution()}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==dl.PLAYING)}getStats(){return Hp(()=>{Rc.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),xp(this,vu.GET_STATS)||HE({},ru)}play(e,t={}){const n=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof e?e:"HTMLElement",t]});if("string"==typeof e){const t=document.getElementById(e);var r;t?e=t:(Rc.warning(Je(r="[".concat(this.getTrackId(),'] can not find "#')).call(r,e,'" element, use document.body')),e=document.body)}Rc.debug("[".concat(this.getTrackId(),"] start video playback"),ve(t));const i=HE({fit:"cover"},t,{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(this._player=new H_(i),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,performance.now()),this.emit(yu.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=window.setInterval(()=>{try{const e=this.getVideoElementVisibleStatus();this.emit(yu.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}},jc("CHECK_VIDEO_VISIBLE_INTERVAL")),n.onSuccess()}stop(){const e=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return e.onSuccess();this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._player.destroy(),this._player=void 0,Rc.debug("[".concat(this.getTrackId(),"] stop video playback")),e.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){Lp(this._originMediaStreamTrack).then(([e,t])=>{this._videoHeight=t,this._videoWidth=e}).catch(Np)}_updatePlayerSource(){Rc.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:o}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=Ev.checkOneElementVisible(i),t=rr({},e);return t.visible||ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess("Not visible because of ".concat(t.reason)),t}return}catch(e){throw new pl(ll.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}}class qE extends QE{constructor(e,t,n,r){super(e,t,n,r),this.trackMediaType="audio",this._useAudioElement=!0,this._volume=100,this._source=new Ah(e,!0),this._source.once(Zl.RECEIVE_TRACK_BUFFER,()=>{this.emit(yu.FIRST_FRAME_DECODED)})}get isPlaying(){return this._useAudioElement?Mh.isPlaying(this.getTrackId()):this._source.isPlayed}setAudioFrameCallback(e,t=4096){if(!e)return this._source.removeAllListeners(Zl.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(Zl.ON_AUDIO_BUFFER),this._source.on(Zl.ON_AUDIO_BUFFER,t=>e(t))}setVolume(e){const t=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),e]},300);this._volume=e,this._useAudioElement?Mh.setVolume(this.getTrackId(),e):this._source.setVolume(e/100),t.onSuccess()}async setPlaybackDevice(e){const t=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[this.getTrackId(),e]});if(!this._useAudioElement)throw new pl(ll.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{await Mh.setSinkID(this.getTrackId(),e)}catch(e){throw t.onError(e),e}t.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Hp(()=>{Rc.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),xp(this,vu.GET_STATS)||HE({},tu)}play(){const e=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(Rc.debug("[".concat(this.getTrackId(),"] use audio element to play")),Mh.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play(),e.onSuccess()}stop(){const e=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Mh.stop(this.getTrackId()):this._source.stop(),e.onSuccess()}_destroy(){super._destroy(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){Rc.debug("[".concat(this.getTrackId(),"] update player source track")),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Mh.updateTrack(this.getTrackId(),this._mediaStreamTrack)}}function zE(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZE(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=zE(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=zE(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}class $E extends Mu{constructor(){super(),this.uploadUnplinkStarted=!1,this.uploadDownlinkStarted=!1}startUploadUplinkStats(){this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&(this.uploadUplinkStats(t,this.lastStats),this.lastStats=t)},3e3),this.uplinkStatsUploadSlowInterval&&window.clearInterval(this.uplinkStatsUploadSlowInterval),this.uplinkStatsUploadSlowInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&this.uploadSlowUplinkStats(t)},6e4),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&this.uploadRelatedUplinkStats(t,this.lastStats),this.lastStats=t},1e3))}uploadUplinkStats(e,t){var n;const r=(null===(n=this.requestLocalMedia)||void 0===n?void 0:n.call(this))||[];Xn(r).call(r,([n,{track:r,ssrcs:i}])=>{switch(n){case Ou.LocalVideoLowTrack:case Ou.LocalVideoTrack:{const o=function(e,t,n){var r,i;const o=Qo(r=t.videoSend).call(r,t=>t.ssrc===e);if(!o)return null;const s={id:kp(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:o.ssrc.toString()};switch(s.A_vstd=n._originMediaStreamTrack&&!n._originMediaStreamTrack.enabled||!n._mediaStreamTrack.enabled?"1":"0",o.sentFrame&&(s.A_fhs=o.sentFrame.height.toString(),s.A_frs=o.sentFrame.frameRate.toString(),s.A_fws=o.sentFrame.width.toString()),o.adaptionChangeReason){case"none":s.A_ac="0";break;case"cpu":s.A_ac="1";break;case"bandwidth":s.A_ac="2";break;case"other":s.A_ac="3"}return s.A_lvps=bl[n._player?n._player.videoElementStatus:"uninit"].toString(),s.A_nr=null===(i=o.nacksCount)||void 0===i?void 0:i.toString(),o.avgEncodeMs&&(s.A_aem=o.avgEncodeMs.toFixed(0).toString()),s}(i[0].ssrcId,e,r),s=mp(i[0].ssrcId,e,t);o&&Vp(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Wl.PUBLISH_STATS,{stream_type:n===Ou.LocalVideoLowTrack?"low":"high",stats:ZE({},o,{},s)})});break}case Ou.LocalAudioTrack:{const t=function(e,t,n){var r;const i=Qo(r=t.audioSend).call(r,t=>t.ssrc===e);if(!i)return null;const o={id:kp(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:i.ssrc.toString()};return o.A_astd=n._originMediaStreamTrack.enabled&&n._mediaStreamTrack.enabled?"0":"1",i.inputLevel?o.A_ail=Math.round(100*i.inputLevel).toString():o.A_ail=Math.round(100*n._source.getAccurateVolumeLevel()).toString(),o.A_apil=Math.round(100*n._source.getAccurateVolumeLevel()).toString(),o}(i[0].ssrcId,e,r);t&&Vp(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Wl.PUBLISH_STATS,{stream_type:"high",stats:t})});break}}const o=function(e){const t={id:"bweforvideo",timestamp:new Date(e.timestamp).toISOString(),type:"VideoBwe"};return e.bitrate.retransmit&&(t.A_rb=e.bitrate.retransmit.toString()),e.bitrate.targetEncoded&&(t.A_teb=e.bitrate.targetEncoded.toString()),t.A_aeb=e.bitrate.actualEncoded.toString(),t.A_tb=e.bitrate.transmit.toString(),void 0!==e.sendBandwidth&&(t.A_asb=e.sendBandwidth.toString()),t}(e);o&&Vp(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Wl.PUBLISH_STATS,{stream_type:n===Ou.LocalVideoLowTrack?"low":"high",stats:o})})})}uploadSlowUplinkStats(e){var t,n;const r=Gr(t=(null===(n=this.requestLocalMedia)||void 0===n?void 0:n.call(this))||[]).call(t,([e])=>e===Ou.LocalVideoLowTrack||e===Ou.LocalVideoTrack);Xn(r).call(r,([t,{ssrcs:n}])=>{const r=mp(n[0].ssrcId,e);r&&Vp(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Wl.PUBLISH_STATS,{stream_type:t===Ou.LocalVideoLowTrack?"low":"high",stats:r})})})}uploadRelatedUplinkStats(e,t){var n,r;const i=Gr(n=(null===(r=this.requestLocalMedia)||void 0===r?void 0:r.call(this))||[]).call(n,([e])=>e===Ou.LocalVideoLowTrack||e===Ou.LocalVideoTrack);Xn(i).call(i,([t,{ssrcs:n}])=>{const r=function(e,t){var n;const r=Qo(n=t.videoSend).call(n,t=>t.ssrc===e);return r?{mediaType:"video",isVideoMute:!1,frameRateInput:r.inputFrame&&r.inputFrame.frameRate.toString(),frameRateSent:r.sentFrame&&r.sentFrame.frameRate.toString(),googRtt:r.rttMs.toString()}:null}(n[0].ssrcId,e);r&&Vp(()=>{var e;null===(e=this.requestUpload)||void 0===e||e.call(this,Wl.PUBLISH_RELATED_STATS,{stream_type:t===Ou.LocalVideoLowTrack?"low":"high",stats:r})})})}stopUploadUplinkStats(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0)}startUploadDownlinkStats(){this.uploadDownlinkStarted||(this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&(this.uploadDownlinkStats(t,this.lastStats),this.lastStats=t)},3e3),this.downlinkStatsUploadSlowInterval&&window.clearInterval(this.downlinkStatsUploadSlowInterval),this.downlinkStatsUploadSlowInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&this.uploadSlowDownlinkStats(t)},6e4),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval(()=>{var e;const t=null===(e=this.requestStats)||void 0===e?void 0:e.call(this);t&&(this.uploadRelatedDownlinkStats(t,this.lastStats),this.lastStats=t)},1e3))}uploadDownlinkStats(e,t){var n;const r=(null===(n=this.requestRemoteMedia)||void 0===n?void 0:n.call(this))||[];Xn(r).call(r,([t,n])=>{if(n.has(ku.VIDEO)&&t.videoTrack){const n=t.videoTrack?function(e,t,n){var r;const i=Qo(r=t.videoRecv).call(r,t=>t.ssrc===e);if(!i)return null;const o={id:kp(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:i.ssrc.toString()};var s;return o.bytesReceived=i.bytes.toString(),o.packetsLost=i.packetsLost.toString(),o.packetsReceived=i.packets.toString(),i.framesRateFirefox&&(o.A_frr=i.framesRateFirefox.toString()),i.receivedFrame&&(o.A_frr=i.receivedFrame.frameRate.toString()),o.A_frd=i.decodeFrameRate.toString(),i.outputFrame&&(o.A_fro=i.outputFrame.frameRate.toString()),void 0!==i.jitterBufferMs&&(o.A_jbm=Math.floor(i.jitterBufferMs).toString()),void 0!==i.currentDelayMs&&(o.A_cdm=Math.floor(i.currentDelayMs).toString()),o.A_fs=i.firsCount.toString(),o.A_ns=i.nacksCount.toString(),o.A_ps=i.plisCount.toString(),n&&(o.A_vrtd=n._originMediaStreamTrack.enabled&&n._mediaStreamTrack.enabled?"0":"1"),n._player&&n._player.freezeTimeCounterList.length>0&&(o.A_vrft=To(s=n._player.freezeTimeCounterList).call(s,0,1)[0].toString()),o.A_rvps=bl[n._player?n._player.videoElementStatus:"uninit"].toString(),o}(t._videoSSRC,e,t.videoTrack):void 0;n&&Vp(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Wl.SUBSCRIBE_STATS,{stream_id:t.uid,stats:n})})}if(n.has(ku.AUDIO)&&t.audioTrack){const n=t.audioTrack?function(e,t,n){var r;const i=Qo(r=t.audioRecv).call(r,t=>t.ssrc===e);if(!i)return null;const o={id:kp(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:i.ssrc.toString()};return o.bytesReceived=i.bytes.toString(),o.packetsLost=i.packetsLost.toString(),o.packetsReceived=i.packets.toString(),i.outputLevel?o.A_aol=Math.round(100*i.outputLevel).toString():o.A_aol=Math.round(100*n._source.getAccurateVolumeLevel()).toString(),o.A_apol=Math.round(100*n._source.getAccurateVolumeLevel()).toString(),n&&(o.A_artd=n._originMediaStreamTrack.enabled&&n._mediaStreamTrack.enabled?"0":"1"),o.A_jr=i.jitterMs.toString(),o.A_jbm=Math.floor(i.jitterBufferMs).toString(),o.A_cdm=Math.floor(i.jitterBufferMs).toString(),o.A_raps=bl[Mh.getPlayerState(n.getTrackId())].toString(),o}(t._audioSSRC,e,t.audioTrack):void 0;n&&Vp(()=>{var e;return null===(e=this.requestUpload)||void 0===e?void 0:e.call(this,Wl.SUBSCRIBE_STATS,{stream_id:t.uid,stats:n})})}})}uploadSlowDownlinkStats(e){}uploadRelatedDownlinkStats(e,t){var n;const r=(null===(n=this.requestRemoteMedia)||void 0===n?void 0:n.call(this))||[];Xn(r).call(r,([n,r])=>{if(r.has(ku.VIDEO)&&n.videoTrack){var i;const r=!0===(n._videoSSRC&&(null===(i=this.requestVideoIsReady)||void 0===i?void 0:i.call(this,n._videoSSRC))||!1),o=function(e,t,n,r,i,o){var s,a;const c=Qo(s=n.videoRecv).call(s,t=>t.ssrc===e),l=i?Qo(a=i.videoRecv).call(a,t=>t.ssrc===e):void 0;if(!c)return null;const u=Kh.isRemoteVideoFreeze(o,c,l)&&t,d={mediaType:"video",isVideoMute:!1,peerId:r,frameRateReceived:c.receivedFrame&&c.receivedFrame.frameRate.toString(),frameRateDecoded:c.decodedFrame&&c.decodedFrame.frameRate.toString(),isFreeze:u,bytesReceived:c.bytes.toString(),packetsReceived:c.packets.toString(),packetsLost:c.packetsLost.toString()};return c.framesRateFirefox&&(d.frameRateDecoded=c.framesRateFirefox.toString(),d.frameRateReceived=c.framesRateFirefox.toString()),d}(n._videoSSRC,r,e,n.uid,t,n.videoTrack);o&&Vp(()=>{var e;null===(e=this.requestUpload)||void 0===e||e.call(this,Wl.SUBSCRIBE_RELATED_STATS,{stream_id:n.uid,stats:o})})}if(r.has(ku.AUDIO)&&n.audioTrack){const t=function(e,t,n,r){var i;const o=Qo(i=t.audioRecv).call(i,t=>t.ssrc===e);if(!o)return null;const s=Kh.isRemoteAudioFreeze(r);return{mediaType:"audio",isAudioMute:!1,peerId:n,googJitterReceived:o.jitterMs.toString(),isFreeze:s,bytesReceived:o.bytes.toString(),packetsReceived:o.packets.toString(),packetsLost:o.packetsLost.toString(),frameReceived:o.receivedFrames.toString(),frameDropped:o.droppedFrames.toString()}}(n._audioSSRC,e,n.uid,n.audioTrack);t&&Vp(()=>{var e;null===(e=this.requestUpload)||void 0===e||e.call(this,Wl.SUBSCRIBE_RELATED_STATS,{stream_id:n.uid,stats:t})})}})}stopUploadDownlinkStats(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}}function KE(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function YE(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=KE(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=KE(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}var JE=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Ur(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&hr(t,n,s),s},XE=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class eA extends Mu{constructor(e,t){super(),this.localTrackMap=new xn,this.remoteUserMap=new xn,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.isPlanB=!1,this.iceFailedCount=0,this.dtlsFailedCount=0,this.mutex=new ah("P2PChannel-mutex"),this._state=Nu.Disconnected,this.handleMuteLocalTrack=async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection)return void n(new pl(ll.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));await this.waitTillConnected();const i=this.filterTobeMutedTracks(e);if(0===i.length)return void t();await this.connection.muteLocal(vo(i).call(i,([,{id:e}])=>e));const o=this.createMuteMessage(i);await Mp(this,Lu.RequestMuteLocal,o),t()}catch(e){n(e)}finally{r()}},this.handleUnmuteLocalTrack=async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection)return void n(new pl(ll.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));await this.waitTillConnected();const i=this.filterTobeUnmutedTracks(e);if(0===i.length)return void t();await this.connection.unmuteLocal(vo(i).call(i,([,{id:e}])=>e));const o=this.createUnmuteMessage(i);await Mp(this,Lu.RequestUnmuteLocal,o),t()}catch(e){n(e)}finally{r()}},this.handleUpdateVideoEncoder=async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const n=this.localTrackMap.get(Ou.LocalVideoTrack);if(!this.connection||!n||n.track!==e)return void t();await this.waitTillConnected();const{id:i,track:o}=n;await this.connection.updateSendParameters(i,o),await this.connection.updateEncoderConfig(i,o),t()}catch(e){n(e)}finally{r()}},this.handleSetOptimizationMode=async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");try{const n=this.localTrackMap.get(Ou.LocalVideoTrack);if(!this.connection||!n||n.track!==e)return;await this.waitTillConnected();const{id:i,track:o}=n;await this.connection.updateSendParameters(i,o),t()}catch(e){n(e)}finally{r()}},this.handleReplaceTrack=async(e,t,n)=>{try{var r,i;const n=Qo(r=Bd(Dd(i=this.localTrackMap).call(i))).call(r,([,{track:t}])=>e===t);if(!this.connection||!n)return void t();if(await this.waitTillConnected(),await this.connection.replaceTrack(e,n[1].id),this.isPlanB){const t=n[1];t.id=e._mediaStreamTrack.id,this.localTrackMap.set(n[0],t)}t()}catch(e){n(e)}},this.handleGetLocalVideoStats=e=>{e(this.statsCollector.getLocalVideoTrackStats())},this.handleGetLocalAudioStats=e=>{e(this.statsCollector.getLocalAudioTrackStats())},this.handleGetRemoteVideoStats=e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid],this.handleGetRemoteAudioStats=e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid],this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new $E,this.bindStatsUploaderEvents(),this.isPlanB=!Fu().supportUnifiedPlan||jc("CHROME_FORCE_PLAN_B")&&Da()}get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(Lu.StateChange,t,this._state)}async startP2PConnection(e){return this.state=Nu.New,this.connection=this.isPlanB?new LE(e,this.store):new FE(e,this.store),this.bindConnectionEvents(this.connection),this.store.peerConnectionStart(),this.connection.establish()}async connect(e,t,n,r,i,o,s,a){if(!this.connection)throw new pl(ll.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");await this.connection.connect(e,t,n,r,i,o,s,a),this.state=Nu.Connected}publish(e,t,n){var r=this;return Qv((function*(){const i=yield Wv(r.mutex.lock("From P2PChannel.publish"));if(r.connection){r.store.pubId=r.store.pubId+1,zh.markPublishStart(r.store.clientId,r.store.pubId);try{yield Wv(r.waitTillConnected());const o=r.filterTobePublishedTracks(e,t,n);if(0===o.length)return;yield*Kv($v(r.doPublish(r.connection,o)),Wv)}finally{i()}}else{var o;if(r.state===Nu.Disconnected)throw new pl(ll.UNEXPECTED_ERROR,"PeerConnection already disconnected.");r.throwIfTrackTypeNotMatch(e);const t=Gr(e).call(e,e=>{var t;return-1===Lo(t=r.pendingLocalTracks).call(t,e)});r.pendingLocalTracks=Je(o=r.pendingLocalTracks).call(o,t)}}))()}doPublish(e,t){var n=this;return Qv((function*(){Xn(t).call(t,({track:e,type:t})=>{const r=performance.now();n.store.publish(e.getTrackId(),t===Ou.LocalAudioTrack?"audio":"video",r)});const r=yield Wv(e.send(vo(t).call(t,({track:e})=>e),n.store.codec)),i=(yield Wv(r.next())).value,o=n.createGatewayPublishMessage(t,i);let s;try{s=yield o}catch(e){throw r.throw(e),(null==e?void 0:e.code)===ll.WS_ABORT&&Xn(t).call(t,({track:e})=>{var t;-1===Lo(t=n.pendingLocalTracks).call(t,e)&&n.pendingLocalTracks.push(e)}),e}const a=n.mapPubResToRemoteConfig(o,s),c=(yield Wv(r.next(a))).value;Xn(t).call(t,({type:e})=>{n.statsCollector.addLocalStats(e)}),n.bindLocalTrackEvents(t),n.assignLocalTracks(t,c),n.statsUploader.startUploadUplinkStats(),Xn(t).call(t,({track:e,type:t})=>{const r=performance.now();n.store.publish(e.getTrackId(),t===Ou.LocalAudioTrack?"audio":"video",void 0,r)})}))()}publishLowStream(e){var t=this;return Qv((function*(){if(!t.connection)return;const n=yield Wv(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const i=t.localTrackMap.get(Ou.LocalVideoTrack);if(!i)throw new pl(ll.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(Ou.LocalVideoLowTrack))throw new pl(ll.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));yield Wv(t.waitTillConnected());const o=[{track:t.getLowVideoTrack(i.track,e),type:Ou.LocalVideoLowTrack}];if(yield*Kv($v(t.doPublish(t.connection,o)),Wv),i.track.muted||!i.track.enabled){var r;const e=null===(r=t.localTrackMap.get(Ou.LocalVideoLowTrack))||void 0===r?void 0:r.id;void 0!==e&&(yield Wv(t.connection.muteLocal([e])))}}finally{n()}}))()}async republish(){this.pendingLocalTracks.length>0&&(Rc.debug("Emit P2PChannelEvents.RequestRePublish to republish tracks."),await Dp(this,Lu.RequestRePublish,this.pendingLocalTracks),this.emit(Lu.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async reSubscribe(e){var t;for(let r=this.pendingRemoteTracks.length-1;r>=0;r--){const{user:e,kind:t}=this.pendingRemoteTracks[r];var n;(t!==ku.AUDIO||e._audio_added_&&e._audioSSRC)&&(t!==ku.VIDEO||e._video_added_&&e._videoSSRC)||To(n=this.pendingRemoteTracks).call(n,r,1)}if(e)await Dp(this,Lu.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:r,kind:i}of this.pendingRemoteTracks)await this.subscribe(r,i,i===ku.VIDEO?r._videoSSRC:r._audioSSRC);Xn(t=this.pendingRemoteTracks).call(t,({user:e})=>{this.emit(Lu.MediaReconnectEnd,e.uid)}),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection)return void Xn(e).call(e,e=>{var t;const n=Lo(t=this.pendingLocalTracks).call(t,e);var r;-1!==n&&To(r=this.pendingLocalTracks).call(r,n,1)});await this.waitTillConnected();const t=this.filterTobeUnpublishedTracks(e);return 0!==t.length?this.doUnpublish(this.connection,t):void 0}async unpublishLowStream(){if(!this.connection)return;const e=this.localTrackMap.get(Ou.LocalVideoLowTrack);if(!e)return;await this.waitTillConnected();const t=[[Ou.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){const n=this.createGatewayUnpublishMessage(t);return await e.stopSending(vo(t).call(t,([,{id:e}])=>e)),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t),Xn(t).call(t,([e])=>{this.statsCollector.removeLocalStats(e)}),0===this.localTrackMap.size&&this.statsUploader.stopUploadUplinkStats(),n}async subscribe(e,t,n,r){var i,o;if(!this.connection)throw new pl(ll.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(null!==(i=this.remoteUserMap.get(e))&&void 0!==i&&i.has(t))return;let s,a;if(await this.waitTillConnected(),r){const n=Qo(r).call(r,({stream_type:e})=>e===t);var c,l;if(!n)throw new pl(ll.UNEXPECTED_ERROR,Je(c=Je(l="Cannot subscribe to remote ".concat(t," for user: ")).call(l,e.uid," because subscribe answer from gateway does not contain stream_type: ")).call(c,t,"."));const i=await this.connection.receive(t,n.ssrcs,String(e.uid),n.attributes);s=i.track,a=i.id}else{const r=await this.connection.receive(t,[{ssrcId:n}],String(e.uid),void 0);s=r.track,a=r.id}var u,d;t===ku.AUDIO?e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(s):(e._audioTrack=new qE(s,e.uid,e._uintid,this.store),Rc.info(Je(u="[".concat(this.store.p2pId,"] create remote audio track: ")).call(u,e._audioTrack.getTrackId())),this.bindRemoteTrackEvents(e,e._audioTrack)):e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(s):(e._videoTrack=new WE(s,e.uid,e._uintid,this.store),Rc.info(Je(d="[".concat(this.store.p2pId,"] create remote video track: ")).call(d,e._videoTrack.getTrackId())),this.bindRemoteTrackEvents(e,e._videoTrack));const h=this.remoteUserMap.get(e);h?h.set(t,a):this.remoteUserMap.set(e,new xn([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadDownlinkStats();const p=Lv(o=this.pendingRemoteTracks).call(o,({user:n,kind:r})=>n.uid===e.uid&&t===r);var f;-1!==p&&(To(f=this.pendingRemoteTracks).call(f,p,1),this.emit(Lu.MediaReconnectEnd,e.uid))}async unsubscribe(e,t){var n;const r=Gr(n=this.pendingRemoteTracks).call(n,({user:n,kind:r})=>void 0!==t?n.uid===e.uid&&t===r:n.uid===e.uid);if(Xn(r).call(r,e=>{var t,n;const r=Lo(t=this.pendingRemoteTracks).call(t,e);To(n=this.pendingRemoteTracks).call(n,r,1)}),!this.connection)return void Xn(r).call(r,({kind:t})=>{var n;if(t===ku.AUDIO)null===(n=e._audioTrack)||void 0===n||n._destroy(),e._audioTrack=void 0;else if(t===ku.VIDEO){var r;null===(r=e._videoTrack)||void 0===r||r._destroy(),e._videoTrack=void 0}});const i=this.filterTobeUnSubscribedTracks(e,t);if(0===i.length)return;await this.connection.stopReceiving(vo(i).call(i,([,{id:e}])=>e));const o=this.createUnsubscribeMessage(i);return this.withdrawRemoteTracks(i),0===this.remoteUserMap.size&&this.statsUploader.stopUploadDownlinkStats(),Xn(i).call(i,([e,{kind:t}])=>{var n,r;if(t===ku.VIDEO&&e._videoSSRC&&(null===(n=this.connection)||void 0===n||n.setStatsRemoteVideoIsReady(e._videoSSRC,!1)),t===ku.VIDEO)this.unbindRemoteTrackEvents(e._videoTrack),null===(r=e._videoTrack)||void 0===r||r._destroy(),e._videoTrack=void 0;else if(t===ku.AUDIO){var i;this.unbindRemoteTrackEvents(e._audioTrack),null===(i=e._audioTrack)||void 0===i||i._destroy(),e._audioTrack=void 0}}),o}async muteRemote(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);if(!n)return void Rc.warning("P2PChannel.unmuteRemote has no remote user ".concat(e.uid,"."));const r=n.get(t);var i;if(!r)return void Rc.warning(Je(i="P2PChannel.unmuteRemote has no remote user ".concat(e.uid," media type ")).call(i,t,"."));const o=t===ku.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==o&&this.connection.setStatsRemoteVideoIsReady(o,!1),await this.connection.muteRemote(r)}async unmuteRemote(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);if(!n)return void Rc.warning("P2PChannel.unmuteRemote has no remote user ".concat(e.uid,"."));const r=n.get(t);var i;r?await this.connection.unmuteRemote(r):Rc.warning(Je(i="P2PChannel.unmuteRemote has no remote user ".concat(e.uid," media type ")).call(i,t,"."))}getAllTracks(e){const t=this.localTrackMap.get(Ou.LocalAudioTrack);if((null==t?void 0:t.track)instanceof Qh){var n,r,i,o,s;const a=t.track;return Je(n=vo(r=Gr(i=Gr(o=Bd(Dd(s=this.localTrackMap).call(s))).call(o,([e])=>e!==Ou.LocalAudioTrack)).call(i,([t])=>!(e&&t===Ou.LocalVideoLowTrack))).call(r,([,{track:e}])=>e)).call(n,a.trackList)}var a,c,l;return vo(a=Gr(c=Bd(Dd(l=this.localTrackMap).call(l))).call(c,([t])=>!(e&&t===Ou.LocalVideoLowTrack))).call(a,([,{track:e}])=>e)}reportPublishEvent(e,t,n,r,i){if(e){var o;const n=this.localTrackMap.get(Ou.LocalAudioTrack),s=r?this.localTrackMap.get(Ou.LocalVideoLowTrack):this.localTrackMap.get(Ou.LocalVideoTrack);ih.publish(this.store.sessionId,{eventElapse:zh.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==s?void 0:s.track.getTrackLabel(),screenshare:-1!==(null==s?void 0:Lo(o=s.track._hints).call(o,Eu.SCREEN_TRACK)),audio:!!n,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var s,a;n||(n=[]);const o=Qo(n).call(n,e=>e instanceof jh),c=r?null===(s=this.localTrackMap.get(Ou.LocalVideoTrack))||void 0===s?void 0:s.track:Qo(n).call(n,e=>e instanceof Cv);ih.publish(this.store.sessionId,{eventElapse:zh.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==o?void 0:o.getTrackLabel(),videoName:null==c?void 0:c.getTrackLabel(),screenshare:-1!==(null==c?void 0:Lo(a=c._hints).call(a,Eu.SCREEN_TRACK)),audio:!!o,video:!!c,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}reportSubscribeEvent(e,t,n,r){const i=r===ku.VIDEO?n._videoSSRC:n._audioSSRC;i&&ih.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===ku.VIDEO,audio:r===ku.AUDIO,peerid:n.uid,subscribeRequestid:r===ku.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:zh.measureFromSubscribeStart(this.store.clientId,i)})}reset(){Rc.debug("P2PChannel.reset"),this.mutex=new ah("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=Nu.Disconnected}getStats(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(Ou.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(Ou.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof Cv||t&&t.track instanceof jh?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t,n;const r=Qo(t=Bd(jd(n=this.remoteUserMap).call(n))).call(t,t=>t.uid===e);return r?{audioTrack:r.audioTrack,audioSSRC:r._audioSSRC,videoTrack:r.videoTrack,videoSSRC:r._videoSSRC}:{}}getAudioLevels(){var e,t;let n=vo(e=Bd(Dd(t=this.remoteUserMap).call(t))).call(e,([e])=>({uid:e.uid,level:e.audioTrack?100*e.audioTrack._source.getAccurateVolumeLevel():0}));const r=this.localTrackMap.get(Ou.LocalAudioTrack);return r&&n.push({level:100*r.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),n=cl(n).call(n,(e,t)=>e.level-t.level),n}async disconnectForReconnect(){var e,t,n,r;this.connection&&(Rc.debug("P2PChannel.disconnectForReconnect closing P2PConnection"),this.state=Nu.Reconnecting,this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,0!==this.localTrackMap.size&&(Xn(e=Bd(Dd(t=this.localTrackMap).call(t))).call(e,([e,{track:t}])=>{var n;switch(e){case Ou.LocalVideoTrack:rs(n=t._hints).call(n,Eu.LOW_STREAM)?t.close():this.pendingLocalTracks.push(t);break;case Ou.LocalAudioTrack:var r;t instanceof Qh?this.pendingLocalTracks=Je(r=this.pendingLocalTracks).call(r,t.trackList):this.pendingLocalTracks.push(t);break;case Ou.LocalVideoLowTrack:}}),this.emit(Lu.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Xn(n=Bd(Dd(r=this.remoteUserMap).call(r))).call(n,([e,t])=>{var n;Xn(n=Bd(jd(t).call(t))).call(n,t=>{this.setPendingRemoteMedia(e,t)}),this.emit(Lu.MediaReconnectStart,e.uid)}),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),Rc.debug("P2PChannel disconnected, waiting to reconnect."))}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:i}=n;if((e instanceof Iv?e.uid:e)===r.uid&&t===i)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async reEstablish(){if(this.connection)return this.connection.reEstablish()}getUplinkNetworkQuality(){var e,t,n;if(!this.connection)return 0;const r=this.connection.getStats(),i=this.localTrackMap.get(Ou.LocalVideoTrack),o=this.localTrackMap.get(Ou.LocalAudioTrack),s=Qo(e=r.videoSend).call(e,e=>e.ssrc===(null==i?void 0:i.ssrcs[0].ssrcId)),a=Qo(t=r.audioSend).call(t,e=>e.ssrc===(null==o?void 0:o.ssrcs[0].ssrcId));if(!s||!a)return 1;const c=xp(this,Lu.NeedSignalRTT),l=s?s.rttMs:void 0,u=a?a.rttMs:void 0,d=l&&u?(l+u)/2:l||u,h=(d&&c?(d+c)/2:d||c)||0,p=100*r.sendPacketLossRate*.7/50+.3*h/1500,f=p<.17?1:p<.36?2:p<.59?3:p<.1?4:5,g=null==i?void 0:i.track;if(g&&g._encoderConfig&&-1===Lo(n=g._hints).call(n,Eu.SCREEN_TRACK)){const e=g._encoderConfig.bitrateMax,t=r.bitrate.actualEncoded;if(e&&t){const n=(1e3*e-t)/(1e3*e);return Zc[n<.15?0:n<.3?1:n<.45?2:n<.6?3:4][f]}}return f}getDownlinkNetworkQuality(){var e,t;if(!this.connection)return 0;const n=this.connection.getStats();let r=0;return Xn(e=Bd(Dd(t=this.remoteUserMap).call(t))).call(e,([e])=>{var t,i;const o=e._audioSSRC,s=e._videoSSRC,a=Qo(t=n.audioRecv).call(t,e=>e.ssrc===o),c=Qo(i=n.videoRecv).call(i,e=>e.ssrc===s);if(!a&&!c)return void(r+=1);const l=xp(this,Lu.NeedSignalRTT),u=n.rtt,d=(u&&l?(u+l)/2:u||l)||0,h=a?a.jitterMs:void 0,p=n.recvPacketLossRate;let f=.7*p*100/50+.3*d/1500;h&&(f=.6*p*100/50+.2*d/1500+.2*h/400),r+=f<.1?1:f<.17?2:f<.36?3:f<.59?4:5}),this.remoteUserMap.size>0?Math.round(r/this.remoteUserMap.size):r}async muteLocalTrack(e){return new fo((t,n)=>{this.handleMuteLocalTrack(e,t,n)})}filterTobePublishedTracks(e,t,n){const r=[],i=Fu(),o=this.getAllTracks();e=Fp(e=Gr(e).call(e,e=>-1===Lo(o).call(o,e)));let s=!1,a=!1;for(const c of e){if(c instanceof Cv&&(this.localTrackMap.has(Ou.LocalVideoTrack)||s?new pl(ll.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:Ou.LocalVideoTrack}),s=!0),t)){const e=this.getLowVideoTrack(c,n);r.push({track:e,type:Ou.LocalVideoLowTrack})}if(c instanceof jh){const e=this.localTrackMap.get(Ou.LocalAudioTrack);if(e){if(!(e.track instanceof Qh))throw new pl(ll.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new pl(ll.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0)}else if(a){const e=Qo(r).call(r,({type:e})=>e===Ou.LocalAudioTrack);if(!(e.track instanceof Qh))throw new pl(ll.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new pl(ll.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c)}else{if(!i.webAudioMediaStreamDest||c instanceof Qh||c._bypassWebAudio)r.push({track:c,type:Ou.LocalAudioTrack});else{const e=new Qh;e.addAudioTrack(c),r.push({track:e,type:Ou.LocalAudioTrack})}a=!0}}}return r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=Fp(e=Gr(e).call(e,e=>-1!==Lo(n).call(n,e)));for(const r of e){if(r instanceof jh){const e=this.localTrackMap.get(Ou.LocalAudioTrack);if(!e)continue;e.track instanceof Qh?(e.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),0===e.track.trackList.length&&(t.push([Ou.LocalAudioTrack,e]),e.track.close())):t.push([Ou.LocalAudioTrack,e])}if(r instanceof Cv){const e=this.localTrackMap.get(Ou.LocalVideoTrack);if(!e)continue;t.push([Ou.LocalVideoTrack,e]);const n=this.localTrackMap.get(Ou.LocalVideoLowTrack);n&&t.push([Ou.LocalVideoLowTrack,n])}}return t}bindLocalTrackEvents(e){Xn(e).call(e,({track:e,type:t})=>{switch(t){case Ou.LocalVideoTrack:e.addListener(vu.GET_STATS,this.handleGetLocalVideoStats),e.addListener(vu.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(vu.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(vu.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),e.addListener(vu.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),e.addListener(vu.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(vu.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(vu.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Ou.LocalAudioTrack:this.bindLocalAudioTrackEvents(e);break;case Ou.LocalVideoLowTrack:}})}bindLocalAudioTrackEvents(e,t){var n;e instanceof Qh?Xn(n=e.trackList).call(n,e=>{e.addListener(vu.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(vu.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(vu.GET_STATS,this.handleGetLocalAudioStats),e.addListener(vu.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(vu.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.addListener(vu.GET_STATS,this.handleGetLocalAudioStats),e.addListener(vu.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(vu.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(vu.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(vu.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(vu.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){var t;e||(e=Bd(Dd(t=this.localTrackMap).call(t))),Xn(e).call(e,([e,{track:t}])=>{switch(e){case Ou.LocalVideoTrack:t.off(vu.GET_STATS,this.handleGetLocalVideoStats),t.off(vu.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(vu.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(vu.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(vu.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),t.off(vu.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(vu.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(vu.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case Ou.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);break;case Ou.LocalVideoLowTrack:}})}unbindLocalAudioTrackEvents(e){var t;e instanceof Qh?Xn(t=e.trackList).call(t,e=>{e.off(vu.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(vu.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(vu.GET_STATS,this.handleGetLocalAudioStats),e.off(vu.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(vu.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)}):(e.off(vu.GET_STATS,this.handleGetLocalAudioStats),e.off(vu.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(vu.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(vu.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(vu.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(vu.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof WE&&t.addListener(vu.GET_STATS,t=>{t(this.handleGetRemoteVideoStats(e))}),t instanceof qE&&t.addListener(vu.GET_STATS,t=>{t(this.handleGetRemoteAudioStats(e))})}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(vu.GET_STATS)}unbindAllRemoteTrackEvents(){var e,t;Xn(e=Bd(Dd(t=this.remoteUserMap).call(t))).call(e,([e,t])=>{t.has(ku.AUDIO)&&this.unbindRemoteTrackEvents(e._audioTrack),t.has(ku.VIDEO)&&this.unbindRemoteTrackEvents(e._videoTrack)})}createGatewayPublishMessage(e,t){return vo(e).call(e,({track:e,type:n},r)=>{var i;let o,s;switch(n){case Ou.LocalAudioTrack:o=mu.Audio,s={dtx:e instanceof Gh&&e._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Ou.LocalVideoTrack:o=rs(i=e._hints).call(i,Eu.SCREEN_TRACK)?mu.Screen:mu.High,s=YE({},gp(e),{codec:this.store.codec});break;case Ou.LocalVideoLowTrack:o=mu.Low,s=YE({},gp(e),{codec:this.store.codec})}return{stream_type:o,attributes:s,ssrcs:t[r]}})}createGatewayUnpublishMessage(e){return vo(e).call(e,([e,{track:t,ssrcs:n,id:r}])=>{var i;let o;switch(e){case Ou.LocalVideoTrack:o=rs(i=t._hints).call(i,Eu.SCREEN_TRACK)?mu.Screen:mu.High;break;case Ou.LocalAudioTrack:o=mu.Audio;break;case Ou.LocalVideoLowTrack:o=mu.Low}return{stream_type:o,ssrcs:n,mid:r}})}assignLocalTracks(e,t){Xn(e).call(e,({track:e,type:n},r)=>{this.localTrackMap.set(n,{track:e,id:t[r].id,ssrcs:t[r].localSSRC})})}withdrawLocalTracks(e){Xn(e).call(e,([e])=>{this.localTrackMap.delete(e)})}async waitTillConnected(){return new fo((e,t)=>{switch(this.state){case Nu.New:case Nu.Reconnecting:{const n=(r,i)=>i===Nu.Disconnected?(this.off(Lu.StateChange,n),void t(new pl(ll.UNEXPECTED_ERROR,"PeerConnection already disconnected."))):i===Nu.Connected?(this.off(Lu.StateChange,n),void e(void 0)):void 0;this.on(Lu.StateChange,n);break}case Nu.Connected:e(void 0);break;case Nu.Disconnected:t(new pl(ll.UNEXPECTED_ERROR,"PeerConnection already disconnected."))}})}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var n;Rc.info(Je(n="[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(")).call(n,t,")")),this.emit(Lu.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"failed"===t&&("failed"===e.iceConnectionState?(Fa(()=>this.emit(Lu.P2PLost),0),this.iceFailedCount+=1,await Ip($d(this.iceFailedCount,Zd)),this.emit(Lu.RequestRestartICE)):await this.requestReconnect())},e.onICEConnectionStateChange=e=>{var t;Rc.info(Je(t="[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(")).call(t,e,")")),this.emit(Lu.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{var t;Rc.info(Je(t="[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(")).call(t,e,")"))},e.onDTLSTransportStateChange=e=>{var t;Rc.info(Je(t="[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(")).call(t,e,")"))},e.onDTLSTransportError=e=>{var t;Rc.info(Je(t="[p2pId: ".concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(")).call(t,e,")"))},e.onFirstAudioDecoded=e=>{var t,n;const r=Qo(t=Bd(jd(n=this.remoteUserMap).call(n))).call(t,t=>t._audioSSRC===e);var i;r&&(null===(i=r.audioTrack)||void 0===i||i.emit(yu.FIRST_FRAME_DECODED),ih.firstRemoteFrame(this.store.sessionId,wl.FIRST_AUDIO_DECODE,kl.FIRST_AUDIO_DECODE,{peer:r._uintid,subscribeElapse:zh.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t,n;const r=Qo(t=Bd(jd(n=this.remoteUserMap).call(n))).call(t,t=>t._audioSSRC===e);r&&ih.firstRemoteFrame(this.store.sessionId,wl.FIRST_AUDIO_RECEIVED,kl.FIRST_AUDIO_RECEIVED,{peer:r._uintid,subscribeElapse:zh.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{var r,i;const o=Qo(r=Bd(jd(i=this.remoteUserMap).call(i))).call(r,t=>t._videoSSRC===e);o&&ih.firstRemoteFrame(this.store.sessionId,wl.FIRST_VIDEO_DECODE,kl.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:zh.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoReceived=e=>{var t,n;const r=Qo(t=Bd(jd(n=this.remoteUserMap).call(n))).call(t,t=>t._videoSSRC===e);r&&ih.firstRemoteFrame(this.store.sessionId,wl.FIRST_VIDEO_RECEIVED,kl.FIRST_VIDEO_RECEIVED,{peer:r._uintid,subscribeElapse:zh.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0}filterTobeMutedTracks(e){var t,n;const r=[],i=this.getAllTracks();if(-1===Lo(i).call(i,e))return r;const o=this.localTrackMap.get(Ou.LocalAudioTrack);if(e instanceof jh&&(null==o?void 0:o.track)instanceof Qh)return o.track.isActive||r.push([Ou.LocalAudioTrack,o]),r;const s=Qo(t=Bd(Dd(n=this.localTrackMap).call(n))).call(t,([,{track:t}])=>e===t);if(s&&(r.push(s),s[0]===Ou.LocalVideoTrack)){const e=this.localTrackMap.get(Ou.LocalVideoLowTrack);e&&r.push([Ou.LocalVideoLowTrack,e])}return r}filterTobeUnmutedTracks(e){var t,n;const r=[],i=this.localTrackMap.get(Ou.LocalAudioTrack);if(e instanceof jh&&(null==i?void 0:i.track)instanceof Qh)return i.track.isActive&&r.push([Ou.LocalAudioTrack,i]),r;const o=Qo(t=Bd(Dd(n=this.localTrackMap).call(n))).call(t,([,{track:t}])=>e===t);if(o)if(o[0]===Ou.LocalVideoTrack){r.push(o);const e=this.localTrackMap.get(Ou.LocalVideoLowTrack);e&&r.push([Ou.LocalVideoLowTrack,e])}else r.push(o);return r}createMuteMessage(e){return vo(e).call(e,([e,{track:t,ssrcs:n,id:r}])=>{var i;let o;switch(e){case Ou.LocalAudioTrack:o=mu.Audio;break;case Ou.LocalVideoTrack:o=rs(i=t._hints).call(i,Eu.SCREEN_TRACK)?mu.Screen:mu.High;break;case Ou.LocalVideoLowTrack:o=mu.Low}return{stream_type:o,ssrcs:n,mid:r}})}createUnmuteMessage(e){return vo(e).call(e,([e,{track:t,ssrcs:n,id:r}])=>{var i;let o;switch(e){case Ou.LocalAudioTrack:o=mu.Audio;break;case Ou.LocalVideoTrack:o=rs(i=t._hints).call(i,Eu.SCREEN_TRACK)?mu.Screen:mu.High;break;case Ou.LocalVideoLowTrack:o=mu.Low}return{stream_type:o,ssrcs:n,mid:r}})}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else{var i;Xn(i=Bd(Dd(r).call(r))).call(i,([t,r])=>{n.push([e,{kind:t,id:r}])})}return n}createUnsubscribeMessage(e){const t=[];return Xn(e).call(e,([e,{kind:n,id:r}])=>{switch(n){case ku.VIDEO:return void(e._videoSSRC&&t.push({stream_type:ku.VIDEO,ssrcId:e._videoSSRC}));case ku.AUDIO:return void(e._audioSSRC&&t.push({stream_type:ku.AUDIO,ssrcId:e._audioSSRC}))}}),t}withdrawRemoteTracks(e){Xn(e).call(e,([e,{kind:t}])=>{const n=this.remoteUserMap.get(e);n&&(n.delete(t),0===Bd(Dd(n).call(n)).length&&this.remoteUserMap.delete(e))})}async updateBitrateLimit(e){const t=this.localTrackMap.get(Ou.LocalVideoTrack),n=this.localTrackMap.get(Ou.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(e,t){return vo(e).call(e,({stream_type:e},n)=>{var r;return null===(r=Qo(t).call(t,({stream_type:t})=>e===t))||void 0===r?void 0:r.attributes})}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>{var e;return Bd(Dd(e=this.localTrackMap).call(e))},this.statsUploader.requestRemoteMedia=()=>{var e;return Bd(Dd(e=this.remoteUserMap).call(e))},this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.connection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(Lu.RequestUploadStats,e,t)}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await Ip($d(this.dtlsFailedCount,Zd)),this.emit(Lu.RequestReconnect)}async reconnectP2P(){var e,t;const n=Bd(Dd(e=this.localTrackMap).call(e)),r=this.createGatewayUnpublishMessage(n);Bd(Dd(t=this.remoteUserMap).call(t)),r.length>0&&await Dp(this,Lu.RequestUnpublishForReconnectPC,r),this.disconnectForReconnect(),this.emit(Lu.RequestReconnectPC)}canPublishLowStream(){var e;return this.localTrackMap.has(Ou.LocalVideoTrack)||as(e=this.pendingLocalTracks).call(e,e=>e instanceof Cv)}throwIfTrackTypeNotMatch(e){if(Gr(e).call(e,e=>e instanceof Cv).length>1)throw new pl(ll.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(Gr(e).call(e,e=>e instanceof jh).length>1&&(as(e).call(e,e=>e instanceof jh&&e._bypassWebAudio)||!Fu().webAudioMediaStreamDest))throw new pl(ll.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const i of e){var t,n,r;if(i instanceof Cv&&as(t=this.pendingLocalTracks).call(t,e=>e instanceof Cv))throw new pl(ll.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(i instanceof jh&&as(n=this.pendingLocalTracks).call(n,e=>e instanceof jh)&&(!Fu().webAudioMediaStreamDest||i._bypassWebAudio||as(r=this.pendingLocalTracks).call(r,e=>e instanceof jh&&e._bypassWebAudio)))throw new pl(ll.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=Fu().supportDualStreamEncoding,r=YE({},{width:160,height:120,framerate:15,bitrate:50},{},t);let i;i=n?e._mediaStreamTrack.clone():jE(e,r);const o=new Cv(i,YE({},n&&{scaleResolutionDownBy:Ap(r,e)},{frameRate:r.framerate,bitrateMax:r.bitrate,bitrateMin:r.bitrate}));return o._hints.push(Eu.LOW_STREAM),o}}function tA(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(...e){const n=this.mutex,i=await n.lock("From P2PChannel.".concat(t));try{return await r.apply(this,e)}finally{i()}},n}JE([tA,XE("design:type",Function),XE("design:paramtypes",[Object]),XE("design:returntype",fo)],eA.prototype,"startP2PConnection",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[Object,Object,Array,Object,String,String,String,String]),XE("design:returntype",fo)],eA.prototype,"connect",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[Array]),XE("design:returntype",fo)],eA.prototype,"unpublish",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[]),XE("design:returntype",fo)],eA.prototype,"unpublishLowStream",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[Iv,String,Number,Array]),XE("design:returntype",fo)],eA.prototype,"subscribe",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[Iv,String]),XE("design:returntype",fo)],eA.prototype,"unsubscribe",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[Iv,String]),XE("design:returntype",fo)],eA.prototype,"muteRemote",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[Iv,String]),XE("design:returntype",fo)],eA.prototype,"unmuteRemote",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[]),XE("design:returntype",fo)],eA.prototype,"disconnectForReconnect",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[]),XE("design:returntype",fo)],eA.prototype,"reEstablish",null),JE([tA,XE("design:type",Function),XE("design:paramtypes",[Object]),XE("design:returntype",fo)],eA.prototype,"updateBitrateLimit",null);var nA=s((function(){tn(1)}));Q({target:"Object",stat:!0,forced:nA,sham:!Jt},{getPrototypeOf:function(e){return tn(Ae(e))}});var rA=M.Object.getPrototypeOf,iA=Dv;function oA(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var sA,aA="function"==typeof iA&&iA.observable||"@@observable",cA=function(){return Math.random().toString(36).substring(7).split("").join(".")},lA={INIT:"@@redux/INIT"+cA(),REPLACE:"@@redux/REPLACE"+cA(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+cA()}};function uA(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==rA(t);)t=rA(t);return rA(e)===t}function dA(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(oA(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(oA(1));return n(dA)(e,t)}if("function"!=typeof e)throw new Error(oA(2));var i=e,o=t,s=[],a=s,c=!1;function l(){a===s&&(a=Uo(s).call(s))}function u(){if(c)throw new Error(oA(3));return o}function d(e){if("function"!=typeof e)throw new Error(oA(4));if(c)throw new Error(oA(5));var t=!0;return l(),a.push(e),function(){if(t){if(c)throw new Error(oA(6));t=!1,l();var n=Lo(a).call(a,e);To(a).call(a,n,1),s=null}}}function h(e){if(!uA(e))throw new Error(oA(7));if(void 0===e.type)throw new Error(oA(8));if(c)throw new Error(oA(9));try{c=!0,o=i(o,e)}finally{c=!1}for(var t=s=a,n=0;n<t.length;n++)(0,t[n])();return e}function p(e){if("function"!=typeof e)throw new Error(oA(10));i=e,h({type:lA.REPLACE})}function f(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(oA(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[aA]=function(){return this},e}return h({type:lA.INIT}),(r={dispatch:h,subscribe:d,getState:u,replaceReducer:p})[aA]=f,r}function hA(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function pA(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=hA(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=hA(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}!function(e){e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_UID="SET_UID",e.SET_PUB_ID="SET_PUB_ID",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE"}(sA||(sA={}));class fA{constructor(e,t,n){const r={codec:e,mode:t,clientId:n,sessionId:null,p2pId:0,pubId:0,subId:0,keyMetrics:{publish:[],subscribe:[]}};this.reducer=function(e=r,t){switch(t.type){case sA.SET_SESSION_ID:return pA({},e,{sessionId:t.sessionId});case sA.SET_P2P_ID:return pA({},e,{p2pId:t.p2pId});case sA.SET_UID:return pA({},e,{uid:t.uid});case sA.SET_PUB_ID:return pA({},e,{pubId:t.pubId});case sA.KEY_METRIC_CLIENT_CREATED:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{clientCreated:t.metric})});case sA.KEY_METRIC_JOIN_START:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{joinStart:t.metric})});case sA.KEY_METRIC_JOIN_END:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{joinEnd:t.metric})});case sA.KEY_METRIC_REQUEST_AP_START:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{requestAPStart:t.metric})});case sA.KEY_METRIC_REQUEST_AP_END:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{requestAPEnd:t.metric})});case sA.KEY_METRIC_JOIN_GATEWAY_START:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{joinGatewayStart:t.metric})});case sA.KEY_METRIC_JOIN_GATEWAY_END:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{joinGatewayEnd:t.metric})});case sA.KEY_METRIC_PEER_CONNECTION_START:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{peerConnectionStart:t.metric})});case sA.KEY_METRIC_PEER_CONNECTION_END:return pA({},e,{keyMetrics:pA({},e.keyMetrics,{peerConnectionEnd:t.metric})});case sA.KEY_METRIC_PUBLISH:{const n=e.keyMetrics.publish,r=Lv(n).call(n,e=>e.trackId===t.metric.trackId);return-1!==r?(n[r]=pA({},n[r],{},t.metric),pA({},e,{keyMetrics:pA({},e.keyMetrics,{publish:[...n]})})):pA({},e,{keyMetrics:pA({},e.keyMetrics,{publish:[...e.keyMetrics.publish,t.metric]})})}case sA.KEY_METRIC_SUBSCRIBE:{const n=e.keyMetrics.subscribe,r=Lv(n).call(n,e=>e.userId===t.metric.userId&&e.type===t.metric.type);return-1!==r?(n[r]=pA({},n[r],{},t.metric),pA({},e,{keyMetrics:pA({},e.keyMetrics,{subscribe:[...n]})})):pA({},e,{keyMetrics:pA({},e.keyMetrics,{subscribe:[...e.keyMetrics.subscribe,t.metric]})})}default:return e}},this.store=dA(this.reducer)}set sessionId(e){this.store.dispatch({type:sA.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.store.getState().sessionId}get codec(){return this.store.getState().codec}get clientId(){return this.store.getState().clientId}set p2pId(e){this.store.dispatch({type:sA.SET_P2P_ID,p2pId:e})}get p2pId(){return this.store.getState().p2pId}set uid(e){this.store.dispatch({type:sA.SET_UID,uid:e})}get uid(){return this.store.getState().uid}set pubId(e){this.store.dispatch({type:sA.SET_PUB_ID,pubId:e})}get pubId(){return this.store.getState().pubId}clientCreated(){this.store.dispatch({type:sA.KEY_METRIC_CLIENT_CREATED,metric:performance.now()})}joinStart(){this.store.dispatch({type:sA.KEY_METRIC_JOIN_START,metric:performance.now()})}joinEnd(){this.store.dispatch({type:sA.KEY_METRIC_JOIN_END,metric:performance.now()})}requestAPStart(){this.store.dispatch({type:sA.KEY_METRIC_REQUEST_AP_START,metric:performance.now()})}requestAPEnd(){this.store.dispatch({type:sA.KEY_METRIC_REQUEST_AP_END,metric:performance.now()})}joinGatewayStart(){this.store.dispatch({type:sA.KEY_METRIC_JOIN_GATEWAY_START,metric:performance.now()})}joinGatewayEnd(){this.store.dispatch({type:sA.KEY_METRIC_JOIN_GATEWAY_END,metric:performance.now()})}peerConnectionStart(){this.store.dispatch({type:sA.KEY_METRIC_PEER_CONNECTION_START,metric:performance.now()})}peerConnectionEnd(){this.store.dispatch({type:sA.KEY_METRIC_PEER_CONNECTION_END,metric:performance.now()})}publish(e,t,n,r){this.store.dispatch({type:sA.KEY_METRIC_PUBLISH,metric:pA({trackId:e,type:t},n&&{publishStart:n},{},r&&{publishEnd:r})})}subscribe(e,t,n,r,i){this.store.dispatch({type:sA.KEY_METRIC_SUBSCRIBE,metric:pA({userId:e,type:t},n&&{subscribeStart:n},{},r&&{subscribeEnd:r},{},i&&{firstFrame:i})})}get keyMetrics(){return this.store.getState().keyMetrics}}let gA;const mA=()=>"HTTPS"===(gA||gA||(gA=(window.location.protocol.split(":")[0]||"").toUpperCase(),gA)),_A=()=>void 0!==window.isSecureContext;class vA{constructor(e,t){var n;this.name=e,this.time=performance.now(),this.sequence=Lo(n=Bu[t]).call(n,e)}setElapse(e){this.elapse=e}}const EA=new xn;function AA(e,t){const n=new yA(e,t);return EA.set(e,n),n}class yA{constructor(e,t){this.records=[],this._id=e,this._group=t,this._localTimeStamp=Ma(),this._performanceTimeStamp=performance.now()}checkPoint(e){var t;const n=new vA(e,this._group);-1===n.sequence&&Rc.warning("[".concat(this._id,"] check point record failed, cannot get the sequence")),this.records.push(n);const r=Qo(t=this.records).call(t,e=>e.sequence===n.sequence-1);r&&n.setElapse(n.time-r.time)}getRecord(e){var t;return Qo(t=this.records).call(t,t=>t&&t.name===e)}resetRecords(){this.records.length=0}}function SA(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function bA(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=SA(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=SA(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}var CA,TA,IA,RA,wA,kA,OA=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Ur(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&hr(t,n,s),s},NA=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class LA extends Mu{constructor(e){var t,n,r,i;let o;if(super(),this._users=[],this._sessionId=null,this._leaveMutex=new ah("client-leave"),this._publishMutex=new ah("client-publish"),this._renewTokenMutex=new ah("client-renewtoken"),this._subscribeMutex=new xn,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._turnServer={servers:[],mode:"auto"},this._cloudProxyServerMode="disabled",this._isDualStreamEnabled=!1,this._streamFallbackTypeCacheMap=new xn,this._remoteStreamTypeCacheMap=new xn,this._axiosCancelSource=Sc.CancelToken.source(),this._networkQualitySensitivity="normal",this._useLocalAccessPoint=!1,this._joinAndNotLeaveYet=!1,this._handleLocalTrackEnable=(e,t,n)=>{this.publish(e,!1).then(t).catch(n)},this._handleLocalTrackDisable=(e,t,n)=>{this.unpublish(e,!1).then(t).catch(n)},this._handleUserOnline=e=>{var t;this.isStringUID&&"string"!=typeof e.uid&&Rc.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const n=Qo(t=this._users).call(t,t=>t.uid===e.uid);if(n)n._trust_in_room_=!0;else{const t=new Iv(e.uid,e.uint_id||e.uid);this._users.push(t),Rc.debug("[".concat(this._clientId,"] user online"),e.uid),this.emit(Vl.USER_JOINED,t)}},this._handleUserOffline=e=>{var t;const n=Qo(t=this._users).call(t,t=>t.uid===e.uid);n&&(this._handleRemoveStream(e),Up(this._users,n),this._remoteStreamTypeCacheMap.delete(n.uid),this._streamFallbackTypeCacheMap.delete(n.uid),Rc.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.emit(Vl.USER_LEAVED,n,e.reason))},this._handleAddAudioOrVideoStream=(e,t,n,r,i,o)=>{var s,a,c;const l=Qo(s=this._users).call(s,e=>e.uid===t);if(!l)return void Rc.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));Rc.debug(Je(a=Je(c="[".concat(this._clientId,"] stream added with uid ")).call(c,t,", type ")).call(a,e));const u="audio"===e?l.hasAudio:l.hasVideo;var d,h;l._uintid||(l._uintid=i||t),l._trust_stream_added_state_=!0,"audio"===e?(l._audio_added_=!0,void 0!==n&&(l._audioSSRC=n),void 0!==r&&(l._cname=r),o&&(l._audioOrtc=o)):(l._video_added_=!0,void 0!==n&&(l._videoSSRC=n),void 0!==r&&(l._cname=r),o&&(l._videoOrtc=o)),("audio"===e?l.hasAudio:l.hasVideo)&&!u&&(Rc.info(Je(d=Je(h="[".concat(this._clientId,"] remote user ")).call(h,l.uid," published ")).call(d,e)),this.emit(Vl.USER_PUBLISHED,l,e)),"video"===e?ih.onGatewayStream(this._sessionId,wl.ON_ADD_VIDEO_STREAM,kl.ON_ADD_VIDEO_STREAM,{peer:i||t}):ih.onGatewayStream(this._sessionId,wl.ON_ADD_AUDIO_STREAM,kl.ON_ADD_AUDIO_STREAM,{peer:i||t}),this._p2pChannel.hasPendingRemoteMedia(l,e)&&this.subscribe(l,e).catch(e=>{Rc.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})},this._handleRemoveStream=async e=>{var t,n;const r=Qo(t=this._users).call(t,t=>t.uid===e.uid);if(!r)return void Rc.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));Rc.debug(Je(n="[".concat(this._clientId,"] stream removed with uid ")).call(n,e.uid));let i=()=>{};r.hasAudio&&r.hasVideo?i=()=>{var e,t;Rc.info(Je(e="[".concat(this._clientId,"] remote user ")).call(e,r.uid," unpublished audio track")),this.emit(Vl.USER_UNPUBLISHED,r,"audio"),Rc.info(Je(t="[".concat(this._clientId,"] remote user ")).call(t,r.uid," unpublished video track")),this.emit(Vl.USER_UNPUBLISHED,r,"video")}:r.hasVideo?i=()=>{var e;Rc.info(Je(e="[".concat(this._clientId,"] remote user ")).call(e,r.uid," unpublished video track")),this.emit(Vl.USER_UNPUBLISHED,r,"video")}:r.hasAudio&&(i=()=>{var e;Rc.info(Je(e="[".concat(this._clientId,"] remote user ")).call(e,r.uid," unpublished audio track")),this.emit(Vl.USER_UNPUBLISHED,r,"audio")}),r._trust_stream_added_state_=!0,r._audio_added_=!1,r._video_added_=!1;const o=await this._p2pChannel.unsubscribe(r);o&&await this._gateway.unsubscribe(o,r.uid),r._audioSSRC=void 0,r._videoSSRC=void 0,r._audioOrtc=void 0,r._videoOrtc=void 0,ih.onGatewayStream(this._sessionId,wl.ON_REMOVE_STREAM,kl.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),i()},this._handleSetStreamLocalEnable=async(e,t,n)=>{var r,i,o,s;const a=Qo(r=this._users).call(r,e=>e.uid===t);if(!a)return void Rc.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));Rc.debug(Je(i=Je(o=Je(s="[".concat(this._clientId,"] local ")).call(s,e," ")).call(o,n?"enabled":"disabled"," with uid ")).call(i,t));const c="audio"===e?a.hasAudio:a.hasVideo;if("audio"===e){a._trust_audio_enabled_state_=!0;const e=a._audio_enabled_;if(a._audio_enabled_=n,a._audio_enabled_===e)return;{var l,u;const e=a._audio_enabled_?"enable-local-audio":"disable-local-audio";Rc.debug(Je(l=Je(u="[".concat(this._clientId,"] user-info-updated, uid: ")).call(u,t,", msg: ")).call(l,e)),this.emit(Vl.USER_INFO_UPDATED,t,e)}}else{a._trust_video_enabled_state_=!0;const e=a._video_enabled_;if(a._video_enabled_=n,a._video_enabled_===e)return;{var d,h;const e=a._video_enabled_?"enable-local-video":"disable-local-video";Rc.debug(Je(d=Je(h="[".concat(this._clientId,"] user-info-update, uid: ")).call(h,t,", msg: ")).call(d,e)),this.emit(Vl.USER_INFO_UPDATED,t,e)}}const p="audio"===e?a.hasAudio:a.hasVideo;var f,g,m,_;return c!==p?!c&&p?(Rc.info(Je(f=Je(g="[".concat(this._clientId,"] remote user ")).call(g,t," published ")).call(f,e)),void this.emit(Vl.USER_PUBLISHED,a,e)):("video"===e&&a._videoTrack&&a._videoTrack._destroy(),"audio"===e&&a._audioTrack,await this._p2pChannel.muteRemote(a,e),Rc.info(Je(m=Je(_="[".concat(this._clientId,"] remote user ")).call(_,t," unpublished ")).call(m,e)),void this.emit(Vl.USER_UNPUBLISHED,a,e)):void 0},this._handleMuteStream=async(e,t,n)=>{var r;Rc.debug("[".concat(this._clientId,"] receive mute message"),e,t,n);const i=Qo(r=this._users).call(r,t=>t.uid===e);var o;if(!i)return void Rc.warning(Je(o="[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ")).call(o,e));const s="audio"===t?i.hasAudio:i.hasVideo;if("audio"===t){i._trust_audio_mute_state_=!0;const t=i._audio_muted_;if(i._audio_muted_=n,i._audio_muted_===t)return;{var a,c;const t=i._audio_muted_?"mute-audio":"unmute-audio";Rc.debug(Je(a=Je(c="[".concat(this._clientId,"] user-info-update, uid: ")).call(c,e,", msg: ")).call(a,t)),this.emit(Vl.USER_INFO_UPDATED,e,t)}}else{i._trust_video_mute_state_=!0;const t=i._video_muted_;if(i._video_muted_=n,i._video_muted_===t)return;{var l,u;const t=i._video_muted_?"mute-video":"unmute-video";Rc.debug(Je(l=Je(u="[".concat(this._clientId,"] user-info-update, uid: ")).call(u,e,", msg: ")).call(l,t)),this.emit(Vl.USER_INFO_UPDATED,e,t)}}const d="audio"===t?i.hasAudio:i.hasVideo;var h,p,f,g;return s!==d?!s&&d?(Rc.info(Je(h=Je(p="[".concat(this._clientId,"] remote user ")).call(p,e," published ")).call(h,t)),void this.emit(Vl.USER_PUBLISHED,i,t)):("video"===t&&i._videoTrack&&i._videoTrack._destroy(),"audio"===t&&i._audioTrack,await this._p2pChannel.muteRemote(i,t),Rc.info(Je(f=Je(g="[".concat(this._clientId,"] remote user ")).call(g,e," unpublished ")).call(f,t)),void this.emit(Vl.USER_UNPUBLISHED,i,t)):void 0},this._handleP2PLost=async e=>{Rc.debug("[".concat(this._clientId,"] receive p2p lost"),e),br(e.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():Rc.warning("P2PLost stream not found",e)},this._handleTokenWillExpire=()=>{Rc.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.emit(Vl.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)},this._handleBeforeUnload=e=>{"beforeunload"===e.type&&void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),Rc.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))},this._handleUpdateNetworkQuality=()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(Vl.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.emit(Vl.NETWORK_QUALITY,e)},this._codec=e.codec,this._mode=e.mode,e.proxyServer&&(this._proxyServer=e.proxyServer,ih.setProxyServer(this._proxyServer),Rc.setProxyServer(this._proxyServer)),e.turnServer&&(this._turnServer=bA({},this._turnServer,{mode:"manual"},e.turnServer)),this._clientId=kp(5,"client-"),this.store=new fA(e.codec,e.mode,this._clientId),this.store.clientCreated(),Rc.info(Je(t=Je(n=Je(r=Je(i="[".concat(this._clientId,"] Initializing AgoraRTC client v")).call(i,kc," build: ")).call(r,wc,", mode: ")).call(n,this._mode,", codec: ")).call(t,this._codec)),this._performanceRecorder=AA(this._clientId,"join"),e.clientRoleOptions)try{Jl(e.clientRoleOptions),o=rr({},e.clientRoleOptions)}catch(e){var s;Rc.warning(Je(s="[".concat(this._clientId,"] ")).call(s,e.toString()))}this._statsCollector=new Kh(this.store),this._statsCollector.onStatsException=(e,t,n)=>{var r,i,o;Rc.debug(Je(r=Je(i=Je(o="[".concat(this._clientId,"] receive exception msg, code: ")).call(o,e,", msg: ")).call(i,t,", uid: ")).call(r,n)),this.emit(Vl.EXCEPTION,{code:e,msg:t,uid:n})},this._statsCollector.onUploadPublishDuration=(e,t,n,r)=>{var i;const o=Qo(i=this._users).call(i,t=>t.uid===e);o&&ih.peerPublishStatus(this._sessionId,{subscribeElapse:r,audioPublishDuration:t,videoPublishDuration:n,peer:o._uintid})},this._gateway=new $f(this.store,{clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:e.websocketRetryConfig||Zd,httpRetryConfig:e.httpRetryConfig||Zd,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:o}),this._config=e,this._configDistribute=new L_,this._p2pChannel=new eA(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents()}get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}async join(e,t,n,r,i){var o;this._performanceRecorder.checkPoint("startJoin"),this.store.joinStart();const s=mA(),a=_A()?window.isSecureContext:"Browser Not Support",c=()=>{Rc.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser")};_A()?window.isSecureContext||c():s||c();const l=ih.reportApiInvoke(this._sessionId,{name:Nl.JOIN,options:[e,t,n,r],states:{isHttps:s,isSecureContext:a},tag:Ll.TRACER});try{if(!n&&null!==n)throw new pl(ll.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&_l(n,"token",1,2047),_l(e,"appid",1,2047),El(t),r&&Al(r),i&&_l(i,"optionalInfo",1,2047)}catch(e){throw l.onError(e),e}if(Rc.info(Je(o="[".concat(this._clientId,"] start join channel ")).call(o,t)),this._leaveMutex.isLocked&&(Rc.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),Rc.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,"DISCONNECTED"!==this.connectionState){const e=new pl(ll.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw l.onError(e),e}this._sessionId||(this._sessionId=Op(),this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING";const u={clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof r?r:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:n||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,useLocalAccessPoint:this._useLocalAccessPoint};if("string"==typeof r&&(u.stringUid=r,this._uintUid?(u.uid=this._uintUid,this._uintUid=void 0):u.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret){if(u.aesmode=this._encryptionMode,u.aespassword=await ap(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new pl(ll.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(u.aessalt=this._encryptionSalt)}this._startSession(this._sessionId,{channel:t,appId:e}),Fa(()=>{"CONNECTING"===this.connectionState&&ih.joinChannelTimeout(this._sessionId,5)},5e3);try{var d;let r;if("443only"===u.cloudProxyServer)u.proxyServer=jc("PROXY_SERVER_TYPE2");else if("proxy3"===u.cloudProxyServer||"proxy4"===u.cloudProxyServer||"proxy5"===u.cloudProxyServer){const e=jc("PROXY_SERVER_TYPE3");hl(e)?u.proxyServer=e[0]:u.proxyServer=e}if(ih.setProxyServer(u.proxyServer),Rc.setProxyServer(u.proxyServer),this._performanceRecorder.checkPoint("startRequestAp"),this.store.requestAPStart(),u.stringUid&&!u.uid&&"normal"===u.cloudProxyServer){var h;await b_(u,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd,!1);const e=await C_(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd);Rc.debug(Je(h="getUserAccount Success ".concat(u.stringUid," => ")).call(h,e)),u.uid=e,r=await S_(u,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd)}else if(u.stringUid&&!u.uid){var p;const e=await C_(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd);Rc.debug(Je(p="getUserAccount Success ".concat(u.stringUid," => ")).call(p,e)),u.uid=e,r=await b_(u,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd,!0)}else r=await b_(u,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd,!0);if(!this._joinAndNotLeaveYet)throw new pl(ll.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this.store.requestAPEnd(),this._performanceRecorder.checkPoint("startJoinGateway"),this._configDistribute.startGetConfigDistribute(u,this._axiosCancelSource.token),this._configDistribute.on(Ru.UPDATE_BITRATE_LIMIT,e=>{this._p2pChannel.updateBitrateLimit(e)}),this._key=n||e,this._joinInfo=bA({},u,{cid:r.gatewayInfo.cid,uid:u.uid?u.uid:r.gatewayInfo.uid,vid:r.gatewayInfo.vid,apResponse:r.gatewayInfo.res,uni_lbs_ip:r.gatewayInfo.uni_lbs_ip,gatewayAddrs:r.gatewayInfo.gatewayAddrs});const i=await this._gateway.join(this._joinInfo,this._key);if(!this._joinAndNotLeaveYet)throw new pl(ll.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));return l.onSuccess(i),this._appId=e,this._channelName=u.cname,this._uid=i,this.store.uid=i,this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(Ta()?"beforeunload":"pagehide",this._handleBeforeUnload),Rc.info(Je(d="[".concat(this._clientId,"] Joining channel success: ")).call(d,t)),Fa(()=>{Rc.startUpload()},5e3),this._performanceRecorder.checkPoint("finishJoin"),this.store.joinEnd(),Yc(this),i}catch(e){const t=hl(e)?e[0]:e;throw Rc.error("[".concat(this._clientId,"] Joining channel failed, rollback"),t),t.code!==ll.OPERATION_ABORTED&&(this._gateway.state="DISCONNECTED",this._reset()),l.onError(t),t}}async leave(){const e=ih.reportApiInvoke(this._sessionId,{name:Nl.LEAVE,options:[],tag:Ll.TRACER});Rc.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(Ta()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),Jc(this);const t=await this._leaveMutex.lock();if("DISCONNECTED"===this.connectionState)return Rc.info("[".concat(this._clientId,"] Leaving channel repeated, success")),t(),e.onSuccess();await this._gateway.leave("CONNECTED"!==this.connectionState),Rc.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,t(),e.onSuccess()}async publish(e,t=!0){var n;hl(e)||(e=[e]);const r=ih.reportApiInvoke(this._sessionId,{name:Nl.PUBLISH,options:vo(e).call(e,e=>e?Object(e).toString():"null"),tag:Ll.TRACER});if(0===e.length){const e=new pl(ll.INVALID_PARAMS,"track list is empty");return r.onError(e),e.throw()}if("audience"===this._gateway.role){const e=new pl(ll.INVALID_OPERATION,"audience can not publish stream");return r.onError(e),e.throw()}for(const s of e){if(!(s instanceof lh)){const e=new pl(ll.INVALID_PARAMS,"parameter is not local track");return r.onError(e),e.throw()}if(!s._enabled&&t){const e=new pl(ll.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(s.getTrackId()));return r.onError(e),e.throw()}}Rc.info(Je(n="[".concat(this._clientId,"] Publishing tracks, id ")).call(n,vo(e).call(e,e=>"".concat(e.getTrackId()," ")))),await this._configDistribute.awaitConfigDistributeComplete(),t&&Xn(e).call(e,e=>{const t=this._configDistribute.getBitrateLimit();e instanceof Cv&&t&&e.setBitrateLimit(t.uplink)});const i=await this._publishMutex.lock();try{var o;await this._publishHighStream(e),r.onSuccess(vo(e).call(e,e=>e.trackMediaType+":"+e.getTrackLabel()).toString()),Rc.info(Je(o="[".concat(this._clientId,"] Publish success, id ")).call(o,vo(e).call(e,e=>"".concat(e.getTrackId()," "))))}catch(e){throw r.onError(e),Rc.error("[".concat(this._clientId,"] publish error"),e.toString()),e}finally{i()}}async unpublish(e,t=!0){var n;if(!this._joinInfo||void 0===this._uid)throw new pl(ll.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");e?hl(e)||(e=[e]):e=this._p2pChannel.getAllTracks();const r=ih.reportApiInvoke(this._sessionId,{name:Nl.UNPUBLISH,options:vo(e).call(e,e=>e.getTrackId()),tag:Ll.TRACER});Rc.info(Je(n="[".concat(this._clientId,"] Unpublish tracks, tracks ")).call(n,vo(e).call(e,e=>"".concat(e.getTrackId()," "))," "));const i=await this._publishMutex.lock();try{var o;const t=await this._p2pChannel.unpublish(e);t&&await this._gateway.unpublish(t,this._uid),Rc.info(Je(o="[".concat(this._clientId,"] Unpublish success,tracks ")).call(o,vo(e).call(e,e=>"".concat(e.getTrackId())))),r.onSuccess()}catch(e){throw r.onError(e),Rc.error("[".concat(this._clientId,"] unpublish error"),e.toString()),e}finally{i&&i()}}async subscribe(e,t){var n,r,i;gl(t,"mediaType",["audio","video"]);const o=ih.reportApiInvoke(this._sessionId,{name:Nl.SUBSCRIBE,options:[e.uid,t],tag:Ll.TRACER});if(!this._joinInfo){const e=new pl(ll.INVALID_OPERATION,"Can't subscribe stream, not joined");throw o.onError(e),e}if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState){const e=new pl(ll.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));throw o.onError(e),e}if(!Qo(n=this._users).call(n,t=>t===e)){var s;const t=new pl(ll.INVALID_REMOTE_USER,"user is not in the channel");throw Rc.error(Je(s="[".concat(this._clientId,"] can not subscribe ")).call(s,e.uid,", this user is not in the channel")),o.onError(t),t}if(!e.hasAudio&&!e.hasVideo){var a;const t=new pl(ll.INVALID_REMOTE_USER,"user is not published");throw Rc.error(Je(a="[".concat(this._clientId,"] can not subscribe ")).call(a,e.uid,", user is not published")),o.onError(t),t}if("audio"===t&&(!e.hasAudio||void 0===e._audioSSRC)||"video"===t&&(!e.hasVideo||void 0===e._videoSSRC)){var c,l;const n=new pl(ll.REMOTE_USER_IS_NOT_PUBLISHED);throw Rc.error(Je(c=Je(l="[".concat(this._clientId,"] can not subscribe ")).call(l,e.uid," with mediaType ")).call(c,t,", remote track is not published")),o.onError(n),n}const u="audio"===t?e._audioSSRC:e._videoSSRC,d="audio"===t?e._audioOrtc:e._videoOrtc,h={stream_type:"audio"===t?ku.AUDIO:ku.VIDEO,ssrcId:u};let p=this._subscribeMutex.get(e.uid);p||(p=new ah("sub-".concat(e.uid)),this._subscribeMutex.set(e.uid,p)),Rc.info(Je(r=Je(i="[".concat(this._clientId,"] subscribe user ")).call(i,e.uid,", mediaType: ")).call(r,t));const f=await p.lock();try{var g,m;if(this._p2pChannel.hasRemoteMedia(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{zh.markSubscribeStart(this.store.clientId,u),this.store.subscribe(e.uid,t,performance.now()),await this._p2pChannel.subscribe(e,t,u,d),await this._gateway.subscribe(e.uid,h,!0),this.store.subscribe(e.uid,t,void 0,performance.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(n){if(this._p2pChannel.reportSubscribeEvent(!1,null==n?void 0:n.code,e,t),(null==n?void 0:n.code)!==ll.WS_ABORT)throw n;this._p2pChannel.setPendingRemoteMedia(e,t)}Rc.info(Je(g=Je(m="[".concat(this._clientId,"] subscribe success user ")).call(m,e.uid,", mediaType: ")).call(g,t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(e=>{Rc.warning("[".concat(this._clientId,"] auto set fallback failed"),e)});const r="audio"===t?e._audioTrack:e._videoTrack;if(!r){const e=new pl(ll.UNEXPECTED_ERROR,"can not find remote track in user object");return o.onError(e),e.throw()}return o.onSuccess(r.getTrackId()),r}catch(t){var _;throw o.onError(t),Rc.error(Je(_="[".concat(this._clientId,"] subscribe user ")).call(_,e.uid," error"),t),t}finally{f()}}async unsubscribe(e,t){var n,r,i;if(t&&gl(t,"mediaType",["audio","video"]),!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");const o=ih.reportApiInvoke(this._sessionId,{name:Nl.UNSUBSCRIBE,options:[e.uid,t],tag:Ll.TRACER});if(!Qo(n=this._users).call(n,t=>t===e)){var s;const t=new pl(ll.INVALID_REMOTE_USER,"user is not in the channel");throw Rc.error(Je(s="[".concat(this._clientId,"] can not subscribe ")).call(s,e.uid,", user is not in the channel")),o.onError(t),t}Rc.info(Je(r=Je(i="[".concat(this._clientId,"] unsubscribe uid: ")).call(i,e.uid,", mediaType: ")).call(r,t));let a=this._subscribeMutex.get(e.uid);a||(a=new ah("sub-".concat(e.uid)),this._subscribeMutex.set(e.uid,a));const c=await a.lock();try{var l,u;const n=await this._p2pChannel.unsubscribe(e,t);n&&await this._gateway.unsubscribe(n,e.uid),Rc.info(Je(l=Je(u="[".concat(this._clientId,"] unsubscribe success uid: ")).call(u,e.uid,", mediaType: ")).call(l,t)),o.onSuccess()}catch(t){if(t.code===ll.DISCONNECT_P2P)return void Rc.warning("disconnecting p2p, abort unsubscribe request.");var d;throw Rc.error(Je(d="[".concat(this._clientId,"] unsubscribe user ")).call(d,e.uid," error"),t.toString()),t}finally{c()}}setLowStreamParameter(e){!function(e){if(!e)throw new pl(ll.INVALID_PARAMS);yl(e.width)||ml(e.width,"streamParameter.width"),yl(e.height)||ml(e.height,"streamParameter.height"),yl(e.framerate)||ml(e.framerate,"streamParameter.framerate"),yl(e.bitrate)||ml(e.bitrate,"streamParameter.bitrate")}(e);const t=ih.reportApiInvoke(this._sessionId,{name:Nl.SET_LOW_STREAM_PARAMETER,options:[e],tag:Ll.TRACER});(!e.width&&e.height||e.width&&!e.height)&&Rc.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),Rc.info("[".concat(this._clientId,"] set low stream parameter to"),ve(e));const n=this._configDistribute.getLowStreamConfigDistribute();n&&n.bitrate&&e.bitrate&&n.bitrate<e.bitrate&&(e.bitrate=n.bitrate),this._lowStreamParameter=e,t.onSuccess()}async enableDualStream(){const e=ih.reportApiInvoke(this._sessionId,{name:Nl.ENABLE_DUAL_STREAM,options:[],tag:Ll.TRACER});if(!Fu().supportDualStream){ih.streamSwitch(this._sessionId,{lts:Ma(),isdual:!0,succ:!1});const t=new pl(ll.NOT_SUPPORTED,"Your browser is not support dual stream");throw e.onError(t),t}if(this._isDualStreamEnabled){const t=new pl(ll.INVALID_OPERATION,"Dual stream is already enabled");throw e.onError(t),t}if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(r){throw ih.streamSwitch(this._sessionId,{lts:Ma(),isdual:!0,succ:!1}),e.onError(r),r}this._isDualStreamEnabled=!0,ih.streamSwitch(this._sessionId,{lts:Ma(),isdual:!0,succ:!0}),Rc.info("[".concat(this._clientId,"] enable dual stream")),e.onSuccess()}async disableDualStream(){if(!this._isDualStreamEnabled)return;if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");const e=ih.reportApiInvoke(this._sessionId,{name:Nl.DISABLE_DUAL_STREAM,options:[],tag:Ll.TRACER});if(this._p2pChannel.getLocalMedia(Ou.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(r){throw ih.streamSwitch(this._sessionId,{lts:Ma(),isdual:!1,succ:!1}),e.onError(r),r}this._isDualStreamEnabled=!1,ih.streamSwitch(this._sessionId,{lts:Ma(),isdual:!1,succ:!0}),Rc.info("[".concat(this._clientId,"] disable dual stream")),e.onSuccess()}async setClientRole(e,t){!function(e){gl(e,"role",["audience","host"])}(e),t&&Jl(t);const n=ih.reportApiInvoke(this._sessionId,{name:Nl.SET_CLIENT_ROLE,options:[e,t],tag:Ll.TRACER});if("rtc"===this._mode){Rc.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole"));const e=new pl(ll.INVALID_OPERATION,"rtc mode can not use setClientRole");return n.onError(e),e.throw()}if(t&&t.level&&"host"===e){const e=new pl(ll.INVALID_OPERATION,"host mode can not set audience latency level");return n.onError(e),e.throw()}try{var r,i;if("audience"===e&&this._p2pChannel.hasLocalMedia()){const e=new pl(ll.INVALID_OPERATION,"can not set client role to audience when publishing stream");return n.onError(e),e.throw()}await this._gateway.setClientRole(e,t),Rc.info(Je(r=Je(i="[".concat(this._clientId,"] set client role to ")).call(i,e,", level: ")).call(r,t&&t.level)),n.onSuccess()}catch(e){throw n.onError(e),e}}setProxyServer(e){if(_l(e,"proxyServer"),"DISCONNECTED"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new pl(ll.INVALID_OPERATION,"You have already set the proxy");this._proxyServer=e,ih.setProxyServer(this._proxyServer),Rc.setProxyServer(this._proxyServer)}setTurnServer(e){if(hl(e)||(e=[e]),"DISCONNECTED"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new pl(ll.INVALID_OPERATION,"You have already set the proxy");var t;if(Kl(e))return this._turnServer={servers:e,mode:"original-manual"},void Rc.info(Je(t="[".concat(this._clientId,"] Set original turnserver success: ")).call(t,vo(e).call(e,e=>e.urls).join(","),"."));Xn(e).call(e,e=>Yl(e)),this._turnServer={servers:e,mode:"manual"},Rc.info("[".concat(this._clientId,"] Set turnserver success."))}startProxyServer(e){const t=ih.reportApiInvoke(this._sessionId,{name:Nl.START_PROXY_SERVER,options:[],tag:Ll.TRACER});if("DISCONNECTED"!==this.connectionState){const e=new pl(ll.INVALID_OPERATION,"Start proxy server before join channel");throw t.onError(e),e}if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint){const e=new pl(ll.INVALID_OPERATION,"You have already set the proxy");throw t.onError(e),e}const n=[1,2,3,4,5];switch(void 0===e&&(e=1),e){case 1:this._cloudProxyServerMode="normal";break;case 2:this._cloudProxyServerMode="443only";break;case 3:this._cloudProxyServerMode="proxy3";break;case 4:this._cloudProxyServerMode="proxy4";break;case 5:this._cloudProxyServerMode="proxy5";break;default:{const e=new pl(ll.INVALID_PARAMS,"proxy server mode must be ".concat(n.join("|")));throw t.onError(e),e}}Rc.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),t.onSuccess()}stopProxyServer(){const e=ih.reportApiInvoke(this._sessionId,{name:Nl.STOP_PROXY_SERVER,options:[],tag:Ll.TRACER});if("DISCONNECTED"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"Stop proxy server after leave channel");ih.setProxyServer(),Rc.setProxyServer(),this._cloudProxyServerMode="disabled",Rc.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},e.onSuccess()}setLocalAccessPoints(e,t){if(vl(e,"serverList"),_l(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new pl(ll.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=vo(e).call(e,e=>{var r;return n.test(e)?Je(r="".concat(e.replace(/\./g,"-"),".")).call(r,t):e}),this._useLocalAccessPoint=!0,Vc("WEBCS_DOMAIN",e),Vc("WEBCS_DOMAIN_BACKUP_LIST",e),Vc("GATEWAY_DOMAINS",[t]),Vc("EVENT_REPORT_DOMAIN",e[0]),Vc("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),Vc("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),Rc.info("set local access point success")}async setRemoteVideoStreamType(e,t){var n,r;gl(t,"streamType",[0,1]);const i=ih.reportApiInvoke(this._sessionId,{name:Nl.SET_REMOTE_VIDEO_STREAM_TYPE,options:[e,t],tag:Ll.TRACER});try{await this._gateway.setRemoteVideoStreamType(e,t),Fa(()=>{var t;const n=Qo(t=this._users).call(t,t=>t.uid===e);n&&n.videoTrack&&n.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(e){throw i.onError(e),Rc.error("[".concat(this._clientId,"] set remote video stream type error"),e.toString()),e}Rc.info(Je(n=Je(r="[".concat(this._clientId,"] set remote ")).call(r,e," video stream type to ")).call(n,t)),this._remoteStreamTypeCacheMap.set(e,t),i.onSuccess()}async setStreamFallbackOption(e,t){var n,r;gl(t,"fallbackType",[0,1,2]);const i=ih.reportApiInvoke(this._sessionId,{name:Nl.SET_STREAM_FALLBACK_OPTION,options:["too long to show",t],tag:Ll.TRACER});try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw i.onError(e),Rc.error("[".concat(this._clientId,"] set stream fallback option"),e.toString()),e}Rc.info(Je(n=Je(r="[".concat(this._clientId,"] set remote ")).call(r,e," stream fallback type to ")).call(n,t)),this._streamFallbackTypeCacheMap.set(e,t),i.onSuccess()}setEncryptionConfig(e,t,n){!function(e){gl(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),_l(t,"secret");const r=["aes-128-gcm2","aes-256-gcm2"];if(rs(r).call(r,e)){if(!n||!(n instanceof Uint8Array&&32===n.length))throw new pl(ll.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new pl(ll.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||Rc.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=Wp(n))}async renewToken(e){_l(e,"token",1,2047);const t=ih.reportApiInvoke(this._sessionId,{name:Nl.RENEW_TOKEN,options:[e],tag:Ll.TRACER});if(!this._key||!this._joinInfo){const e=new pl(ll.INVALID_OPERATION,"renewToken should not be called before user join");return t.onError(e),e.throw()}const n=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const r=await this._renewTokenMutex.lock();try{if(jc("USE_NEW_TOKEN")){Rc.debug("start renew token with ticket from unilbs");const t=await k_(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd);Rc.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:t})}else Rc.debug("start renew token without ticket"),await this._gateway.renewToken({token:e});Rc.debug("[".concat(this._clientId,"] renewToken success")),t.onSuccess()}catch(e){throw this._key=n,this._joinInfo.token=n,t.onError(e),Rc.error("[".concat(this._clientId,"] renewToken failed"),e.toString()),e}finally{r()}}enableAudioVolumeIndicator(){const e=ih.reportApiInvoke(this._sessionId,{name:Nl.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:Ll.TRACER});if(this._audioVolumeIndicationInterval)return Rc.warning("you have already enabled audio volume indicator!"),e.onSuccess();this._audioVolumeIndicationInterval=window.setInterval(()=>{const e=this._p2pChannel.getAudioLevels();this.emit(Vl.VOLUME_INDICATOR,e)},jc("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3),e.onSuccess()}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}startLiveStreaming(e,t){const n=ih.reportApiInvoke(this._sessionId,{name:Nl.START_LIVE_STREAMING,options:[e,t],tag:Ll.TRACER});if(!t){if("h264"!==this._codec){const e=new pl(ll.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");return n.onError(e),fo.reject(e)}if(!this._p2pChannel.hasLocalMedia()){const e=new pl(ll.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");return n.onError(e),fo.reject(e)}}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e)){const e=new pl(ll.LIVE_STREAMING_TASK_CONFLICT);return n.onError(e),fo.reject(e)}const r=t?ou.TRANSCODE:ou.RAW;return this._createLiveStreamingClient(r).startLiveStreamingTask(e,r).then(()=>n.onSuccess()).catch(e=>{throw n.onError(e),e})}setLiveTranscoding(e){const t=ih.reportApiInvoke(this._sessionId,{name:Nl.SET_LIVE_TRANSCODING,options:[e],tag:Ll.TRACER});return this._createLiveStreamingClient(ou.TRANSCODE).setTranscodingConfig(e).then(()=>t.onSuccess()).catch(e=>{throw t.onError(e),e})}stopLiveStreaming(e){var t;const n=ih.reportApiInvoke(this._sessionId,{name:Nl.STOP_LIVE_STREAMING,options:[e],tag:Ll.TRACER}),r=Gr(t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient]).call(t,t=>t&&t.hasUrl(e));if(!r.length){const e=new pl(ll.INVALID_PARAMS,"can not find live streaming url to stop");return n.onError(e),fo.reject(e)}return fo.all(vo(r).call(r,t=>t&&t.stopLiveStreamingTask(e))).then(()=>n.onSuccess()).catch(e=>{throw n.onError(e),e})}async addInjectStreamUrl(e,t){const n=ih.reportApiInvoke(this._sessionId,{name:Nl.ADD_INJECT_STREAM_URL,options:[e,t],tag:Ll.TRACER});try{if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const n=this._createLiveStreamingClient(ou.INJECT);n.setInjectStreamConfig(t,0),await n.startLiveStreamingTask(e,ou.INJECT)}catch(e){throw n.onError(e),e}n.onSuccess()}async removeInjectStreamUrl(){const e=ih.reportApiInvoke(this._sessionId,{name:Nl.REMOVE_INJECT_STREAM_URL,options:[],tag:Ll.TRACER});try{var t,n;const e=this._createLiveStreamingClient(ou.INJECT),r=Qo(t=Bd(Jp(n=e.streamingTasks).call(n))).call(t,e=>e.mode===ou.INJECT);if(!this._joinInfo||!r)throw new pl(ll.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await e.stopLiveStreamingTask(r.url)}catch(t){throw e.onError(t),t}e.onSuccess()}async startChannelMediaRelay(e){const t=ih.reportApiInvoke(this._sessionId,{name:Nl.START_CHANNEL_MEDIA_RELAY,options:[e],tag:Ll.TRACER});try{V_(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}catch(e){return t.onError(e),e.throw()}t.onSuccess()}async updateChannelMediaRelay(e){const t=ih.reportApiInvoke(this._sessionId,{name:Nl.UPDATE_CHANNEL_MEDIA_RELAY,options:[e],tag:Ll.TRACER});try{V_(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}catch(e){return t.onError(e),e.throw()}t.onSuccess()}async stopChannelMediaRelay(){const e=ih.reportApiInvoke(this._sessionId,{name:Nl.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:Ll.TRACER});try{const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay()}catch(r){return e.onError(r),r.throw()}e.onSuccess()}sendStreamMessage(e,t=!0){if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof e&&(e=(new TextEncoder).encode(e)),new Blob([e]).size>1024)throw new pl(ll.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(Ql.DATA_STREAM,{payload:Wp(e)},!t)}sendMetadata(e){if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new pl(ll.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Ql.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Wp(e)})}async sendCustomReportMessage(e){hl(e)||(e=[e]),Xn(e).call(e,Il);const t=ih.reportApiInvoke(this._sessionId,{name:Nl.SEND_CUSTOM_REPORT_MESSAGE,options:[ve(e)],tag:Ll.TRACER});if(!this._joinInfo){const e=new pl(ll.INVALID_OPERATION,"can not send custom report, not joined");return t.onError(e),e.throw()}await ih.sendCustomReportMessage(this._joinInfo.sid,e),t.onSuccess()}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){gl(t.spatialLayer,"spatialLayer",[0,1,2,3]),gl(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw Rc.error("[".concat(this._clientId,"] pick SVC layer failed"),e.toString()),e}}_reset(){var e;Rc.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=Sc.CancelToken.source(),this._streamFallbackTypeCacheMap=new xn,this._remoteStreamTypeCacheMap=new xn,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,Xn(e=this._users).call(e,e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy()}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._p2pChannel.reset(),this._publishMutex=new ah("client-publish"),this._subscribeMutex=new xn,this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0)}_startSession(e,t){var n,r,i;const o=e||Op();e?Rc.debug(Je(n="[".concat(this._clientId,"] new Session ")).call(n,o)):Rc.debug(Je(r=Je(i="[".concat(this._clientId,"] renewSession ")).call(i,this._sessionId," => ")).call(r,o)),this._sessionId=o,this.store.sessionId=o,t?ih.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:t.channel,appid:t.appId,mode:this._mode}):this._joinInfo?ih.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&ih.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=o),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=o)}async _publishHighStream(e){if(!this._joinInfo||void 0===this._uid)throw new pl(ll.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&jc("FORCE_TURN")&&!jc("TURN_ENABLE_TCP")&&!jc("TURN_ENABLE_UDP"))throw new pl(ll.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");Rc.debug("[".concat(this._clientId,"] publish high stream"));try{const n=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter),r=(await n.next()).value;if(r){var t;let i;try{i=await this._gateway.publish(this._uid,r,!0)}catch(e){if(e.code!==ll.DISCONNECT_P2P)throw n.throw(e),e}await n.next((null===(t=i)||void 0===t?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const t of e)t.muted&&await this._p2pChannel.muteLocalTrack(t)}catch(t){if(this._p2pChannel.reportPublishEvent(!1,null==t?void 0:t.code,e),(null==t?void 0:t.code)===ll.WS_ABORT)return;throw t}}async _publishLowStream(){if(!this._joinInfo||void 0===this._uid)throw new pl(ll.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));Rc.debug("[".concat(this._clientId,"] publish low stream"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const e=await this._p2pChannel.publishLowStream(this._lowStreamParameter),n=(await e.next()).value;if(n){var t;let r;try{r=await this._gateway.publish(this._uid,n,!0)}catch(t){if(t.code!==ll.DISCONNECT_P2P)throw e.throw(t),t}e.next((null===(t=r)||void 0===t?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(e){if(this._p2pChannel.reportPublishEvent(!1,null==e?void 0:e.code,void 0,!0),(null==e?void 0:e.code)===ll.WS_ABORT)return;throw e}}_createLiveStreamingClient(e){if(!this._joinInfo||!this._appId)return new pl(ll.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const t=()=>new U_(this._joinInfo,this._config.websocketRetryConfig||Zd,this._config.httpRetryConfig||Zd),n=e=>{e.onLiveStreamError=(e,t)=>{ih.reportApiInvoke(this._sessionId,{name:Nl.ON_LIVE_STREAM_ERROR,options:[e,t],tag:Ll.TRACER}).onSuccess(),this.emit(Vl.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{ih.reportApiInvoke(this._sessionId,{name:Nl.ON_LIVE_STREAM_WARNING,options:[e,t],tag:Ll.TRACER}).onSuccess(),this.emit(Vl.LIVE_STREAMING_WARNING,e,t)},e.on(hu.REQUEST_WORKER_MANAGER_LIST,(e,t,n)=>{if(!this._joinInfo)return n(new pl(ll.INVALID_OPERATION,"can not find join info to get worker manager"));R_(e,this._joinInfo,this._axiosCancelSource.token,Zd).then(t).catch(n)})};switch(e){case ou.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=t(),n(this._liveRawStreamingClient)),this._liveRawStreamingClient;case ou.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=t(),n(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case ou.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=t(),this._injectStreamingClient.on(hu.REQUEST_WORKER_MANAGER_LIST,(e,t,n)=>{if(!this._joinInfo)return n(new pl(ll.INVALID_OPERATION,"can not find join info to get worker manager"));R_(e,this._joinInfo,this._axiosCancelSource.token,Zd).then(t).catch(n)}),this._injectStreamingClient.onInjectStatusChange=(e,t,n)=>{this.emit(Vl.INJECT_STREAM_STATUS,e,t,n)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new G_(this._joinInfo,this._clientId,this._config.websocketRetryConfig||Zd,this._config.httpRetryConfig||Zd),this._channelMediaRelayClient.on("state",e=>{"RELAY_STATE_FAILURE"===e&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(Vl.CHANNEL_MEDIA_RELAY_STATE,e)}),this._channelMediaRelayClient.on("event",e=>{this.emit(Vl.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._channelMediaRelayClient):new pl(ll.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){this._gateway.on(_u.DISCONNECT_P2P,async()=>{await this._p2pChannel.disconnectForReconnect()}),this._gateway.on(_u.CONNECTION_STATE_CHANGE,(e,t,n)=>{var r,i;const o=()=>{this.emit(Vl.CONNECTION_STATE_CHANGE,e,t,n)};if(ih.reportApiInvoke(this._sessionId,{name:Nl.CONNECTION_STATE_CHANGE,options:[e,t,n],tag:Ll.TRACER}).onSuccess(ve({cur:e,prev:t,reason:n})),Rc.info(Je(r=Je(i="[".concat(this._clientId,"] connection state change: ")).call(i,t," -> ")).call(r,e)),"DISCONNECTED"===e)return this._reset(),void o();var s;if("RECONNECTING"===e)Xn(s=this._users).call(s,e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_stream_added_state_=!1}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===e){var a,c;Xn(a=this._streamFallbackTypeCacheMap).call(a,(e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch(e=>Rc.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e))}),Xn(c=this._remoteStreamTypeCacheMap).call(c,(e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch(e=>Rc.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e))}),this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout(()=>{var e;if("CONNECTED"!==this.connectionState)return;this._userOfflineTimeout=void 0;const t=Gr(e=this._users).call(e,e=>!e._trust_in_room_);Xn(t).call(t,e=>{var t;Rc.debug(Je(t="[".concat(this._clientId,"] user offline timeout, emit user offline ")).call(t,e.uid)),this._handleUserOffline({uid:e.uid})})},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{var e;"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,Xn(e=this._users).call(e,e=>{var t,n,r,i,o;e._trust_audio_mute_state_||(Rc.debug(Je(t="[".concat(this._clientId,"] auto dispatch audio unmute event ")).call(t,e.uid)),this._handleMuteStream(e.uid,"audio",!1)),e._trust_video_mute_state_||(Rc.debug(Je(n="[".concat(this._clientId,"] auto dispatch video unmute event ")).call(n,e.uid)),this._handleMuteStream(e.uid,"video",!1)),e._trust_audio_enabled_state_||(Rc.debug(Je(r="[".concat(this._clientId,"] auto dispatch enable local audio ")).call(r,e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),!e._trust_video_enabled_state_&&e._video_enabled_&&(Rc.debug(Je(i="[".concat(this._clientId,"] auto dispatch enable local video ")).call(i,e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_stream_added_state_||(Rc.debug(Je(o="[".concat(this._clientId,"] auto dispatch stream remove ")).call(o,e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))}))},1e3)}o()}),this._gateway.on(_u.REQUEST_NEW_GATEWAY_LIST,(e,t)=>{if(!this._joinInfo)return t(new pl(ll.UNEXPECTED_ERROR,"can not recover, no join info"));S_(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd).then(t=>{var n;this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res),e(vo(n=t.gatewayInfo.gatewayAddrs).call(n,e=>{if(this._joinInfo&&this._joinInfo.proxyServer){var t,n;const r=e.split(":");return Je(t=Je(n="wss://".concat(this._joinInfo.proxyServer,"/ws/?h=")).call(n,r[0],"&p=")).call(t,r[1])}return"wss://".concat(e)}))}).catch(t)}),this._gateway.on(_u.NETWORK_QUALITY,e=>{"normal"===this._networkQualitySensitivity&&this.emit(Vl.NETWORK_QUALITY,e)}),this._gateway.on(_u.STREAM_TYPE_CHANGE,(e,t)=>{this.emit(Vl.STREAM_TYPE_CHANGED,e,t),ih.reportApiInvoke(this._sessionId,{name:Nl.STREAM_TYPE_CHANGE,options:[e,t],tag:Ll.TRACER}).onSuccess(ve({uid:e,streamType:t}))}),this._gateway.on(_u.IS_P2P_DISCONNECTED,e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)}),this._gateway.on(_u.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.on(_u.REQUEST_P2P_CONNECTION_PARAMS,async(e,t,n)=>{try{t(await this._p2pChannel.startP2PConnection(e))}catch(e){n(e)}}),this._gateway.on(_u.JOIN_RESPONSE,e=>{const{dtlsParameters:t,iceParameters:n,candidates:r,rtpCapabilities:i,setup:o,cname:s,defaultIp:a,defaultPort:c}=nE(e.ortc);this._p2pChannel.connect(n,t,r,i,o,s,a,c)}),this._gateway.signal.on(ql.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(ql.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(ql.ON_ADD_AUDIO_STREAM,e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc)),this._gateway.signal.on(ql.ON_ADD_VIDEO_STREAM,e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc)),this._gateway.signal.on(ql.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(ql.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(ql.MUTE_AUDIO,e=>this._handleMuteStream(e.uid,"audio",!0)),this._gateway.signal.on(ql.UNMUTE_AUDIO,e=>this._handleMuteStream(e.uid,"audio",!1)),this._gateway.signal.on(ql.MUTE_VIDEO,e=>this._handleMuteStream(e.uid,"video",!0)),this._gateway.signal.on(ql.UNMUTE_VIDEO,e=>this._handleMuteStream(e.uid,"video",!1)),this._gateway.signal.on(ql.RECEIVE_METADATA,e=>{const t=Qp(e.metadata);this.emit(Vl.RECEIVE_METADATA,e.uid,t)}),this._gateway.signal.on(ql.ON_DATA_STREAM,e=>{e.seq&&delete e.seq,e.payload=Qp(e.payload),this.emit(Vl.STREAM_MESSAGE,e.uid,e.payload),this.onStreamMessage&&this.onStreamMessage(e)}),this._gateway.signal.on(ql.ON_CRYPT_ERROR,()=>{Hp(()=>{Rc.warning("[".concat(this._clientId,"] on crypt error")),this.emit(Vl.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(ql.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(ql.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{Rc.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0),this.emit(Vl.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()}),this._gateway.signal.on(ql.ON_STREAM_FALLBACK_UPDATE,e=>{var t,n;Rc.debug(Je(t=Je(n="[".concat(this._clientId,"] stream fallback peerId: ")).call(n,e.stream_id,", attr: ")).call(t,e.stream_type)),this.emit(Vl.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")}),this._gateway.signal.on(ql.ON_PUBLISH_STREAM,e=>{var t;this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,ve({proxy:e.proxy})),Rc.info(Je(t="[".concat(this._clientId,"] on publish stream, ")).call(t,ve(e))),void 0!==e.proxy&&this.emit(Vl.IS_USING_CLOUD_PROXY,!!e.proxy))}),this._gateway.signal.on(ql.ENABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)}),this._gateway.signal.on(ql.DISABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)}),this._gateway.signal.on(Hl.REQUEST_TIMEOUT,(e,t)=>{if(this._joinInfo)switch(e){case Ql.PUBLISH:{if(!t)return;const e=(t=t).ortc;if(e){var n,r,i,o;const s=as(e).call(e,({stream_type:e})=>e===mu.Audio),a=as(e).call(e,({stream_type:e})=>e!==mu.Audio),c=as(e).call(e,({stream_type:e})=>e===mu.Screen||e===mu.ScreenLow);"offer"===t.state&&ih.publish(this._joinInfo.sid,{eventElapse:zh.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:ll.TIMEOUT,audio:s,video:a,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:c,audioName:s?null===(n=Qo(e).call(e,({stream_type:e})=>e===mu.Audio))||void 0===n||null===(r=n.ssrcs[0])||void 0===r?void 0:r.ssrcId.toString():void 0,videoName:a?null===(i=Qo(e).call(e,({stream_type:e})=>e!==mu.Audio))||void 0===i||null===(o=i.ssrcs[0])||void 0===o?void 0:o.ssrcId.toString():void 0})}break}case Ql.SUBSCRIBE:(t=t)&&ih.subscribe(this._joinInfo.sid,{succ:!1,ec:ll.TIMEOUT,audio:t.stream_type===ku.AUDIO,video:t.stream_type===ku.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:zh.measureFromSubscribeStart(this.store.clientId,t.ssrcId)})}}),this._gateway.signal.on(ql.ON_P2P_OK,e=>{this.uid===this._uid&&void 0!==e.proxy&&this.emit(Vl.IS_USING_CLOUD_PROXY,!!e.proxy)})}_handleP2PChannelEvents(){this._p2pChannel.on(Lu.RequestMuteLocal,async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===ll.DISCONNECT_P2P?t():n(e)}else t()}),this._p2pChannel.on(Lu.RequestUnmuteLocal,async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(e){e.code===ll.DISCONNECT_P2P?t():n(e)}else t()}),this._p2pChannel.on(Lu.RequestRePublish,(e,t,n)=>{this.publish(e,!1).then(t).catch(n)}),this._p2pChannel.on(Lu.RequestReSubscribe,async(e,t,n)=>{try{for(const{user:t,kind:n}of e)n===ku.VIDEO?await this.subscribe(t,"video"):await this.subscribe(t,"audio");t()}catch(e){n(e)}}),this._p2pChannel.on(Lu.RequestUploadStats,(e,t)=>{this._gateway.uploadStats(e,t)}),this._p2pChannel.on(Lu.MediaReconnectStart,e=>{this.emit(Vl.MEDIA_RECONNECT_START,e)}),this._p2pChannel.on(Lu.MediaReconnectEnd,e=>{this.emit(Vl.MEDIA_RECONNECT_END,e)}),this._p2pChannel.on(Lu.NeedSignalRTT,e=>{e(this._gateway.getSignalRTT())}),this._p2pChannel.on(Lu.RequestRestartICE,async()=>{const e=await this._p2pChannel.reEstablish();if(e){const{response:t}=await this._gateway.restartICE({iceParameters:e.iceParameters}),{candidates:n,iceParameters:r,defaultIp:i,defaultPort:o}=function(e){const t=e.ice,{candidates:n,defaultIp:r,defaultPort:i}=cE(t.candidates);return{candidates:n,iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd},defaultIp:r,defaultPort:i}}(t);await e.restartICE(r,n,i,o)}}),this._p2pChannel.on(Lu.RequestReconnect,async()=>{this._gateway.reconnect()}),this._p2pChannel.on(Lu.RequestReconnectPC,async()=>{var e;const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=await this._p2pChannel.startP2PConnection({turnServer:null===(e=this._joinInfo)||void 0===e?void 0:e.turnServer}),{gatewayEstablishParams:i}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:n,rtpCapabilities:r}),{dtlsParameters:o,iceParameters:s,candidates:a,rtpCapabilities:c,setup:l,cname:u,defaultIp:d,defaultPort:h}=nE(i);await this._p2pChannel.connect(s,o,a,c,l,u,d,h),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()}),this._p2pChannel.on(Lu.RequestUnpublishForReconnectPC,async(e,t,n)=>{this._joinInfo&&void 0!==this._uid?(await this._gateway.unpublish(e,this._uid),t()):n()}),this._p2pChannel.on(Lu.P2PLost,()=>{this.emit(Vl.P2P_LOST,this.store.uid)})}getKeyMetrics(){return this.store.keyMetrics}}function PA(e){return ml(e.timeout,"config.timeout",0,1e5),ml(e.timeoutFactor,"config.timeoutFactor",0,100,!1),ml(e.maxRetryCount,"config.maxRetryConfig",0,1/0),ml(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function DA(e){return _l(e.turnServerURL,"turnServerURL"),_l(e.username,"username"),_l(e.password,"password"),e.udpport&&ml(e.udpport,"udpport",1,99999,!0),e.forceturn&&fl(e.forceturn,"forceturn"),e.security&&fl(e.security,"security"),e.tcpport&&ml(e.tcpport,"tcpport",1,99999,!0),!0}function MA(e){return void 0!==e.level&&gl(e.level,"level",[1,2,3]),!0}function xA(e){return _l(e.reportId,"params.reportId",0,100,!1),_l(e.category,"params.category",0,100,!1),_l(e.event,"params.event",0,100,!1),_l(e.label,"params.label",0,100,!1),ml(e.value,"params.value",Tl,Cl,!1),!0}OA([nh({report:ih}),NA("design:type",Function),NA("design:paramtypes",[String]),NA("design:returntype",void 0)],LA.prototype,"setProxyServer",null),OA([nh(),NA("design:type",Function),NA("design:paramtypes",[Object]),NA("design:returntype",void 0)],LA.prototype,"setTurnServer",null),OA([nh({report:ih}),NA("design:type",Function),NA("design:paramtypes",[Array,String]),NA("design:returntype",void 0)],LA.prototype,"setLocalAccessPoints",null),OA([nh({report:ih}),NA("design:type",Function),NA("design:paramtypes",[String,String,Uint8Array]),NA("design:returntype",void 0)],LA.prototype,"setEncryptionConfig",null),OA([rh({report:ih}),NA("design:type",Function),NA("design:paramtypes",[Object,Object]),NA("design:returntype",fo)],LA.prototype,"pickSVCLayer",null),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost"}(CA||(CA={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE"}(TA||(TA={})),function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(IA||(IA={})),function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(RA||(RA={})),function(e){e.FREE="free",e.UPLOADING="uploading"}(wA||(wA={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied"}(kA||(kA={}));const BA={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};var UA,FA,VA,jA,GA,HA,QA,WA,qA,zA,ZA,$A,KA,YA,JA,XA,ey,ty,ny;!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics"}(UA||(UA={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAT="io.agora.pb.Wrtc.JoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics"}(FA||(FA={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(VA||(VA={})),function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",e.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange"}(jA||(jA={})),function(e){e.TRACER="tracer"}(GA||(GA={})),function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(HA||(HA={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(QA||(QA={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(WA||(WA={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(qA||(qA={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(zA||(zA={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(ZA||(ZA={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}($A||($A={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(KA||(KA={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success"}(YA||(YA={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v2",e.REJOIN="rejoin",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer"}(JA||(JA={})),function(e){e.PUBLISH_STATS="publish_stats",e.PUBLISH_RELATED_STATS="publish_related_stats",e.SUBSCRIBE_STATS="subscribe_stats",e.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length"}(XA||(XA={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio"}(ey||(ey={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(ty||(ty={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer"}(ny||(ny={}));const ry={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},iy={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},oy={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},sy={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};var ay,cy,ly,uy,dy,hy,py,fy,gy,my,_y,vy,Ey,Ay;!function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls"}(ay||(ay={})),function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(cy||(cy={})),function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(ly||(ly={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(uy||(uy={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(dy||(dy={})),function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN"}(hy||(hy={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(py||(py={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(fy||(fy={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid"}(gy||(gy={})),function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_CLOSE="@need_close",e.NEED_ADD_TRACK="@need_add_track",e.NEED_REMOVE_TRACK="@need_remove_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.SET_VIDEO_TRACK_MUTED="@set_video_track_muted",e.SET_AUDIO_TRACK_MUTED="@set_audio_track_muted"}(my||(my={})),function(e){e.SCREEN_TRACK="screen_track",e.LOW_STREAM="low_stream"}(_y||(_y={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload"}(vy||(vy={})),function(e){e.FIRST_FRAME_DECODED="first-frame-decoded"}(Ey||(Ey={})),function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(Ay||(Ay={}));const yy={CHINA:{},ASIA:{CODE:Ay.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Ay.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Ay.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Ay.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Ay.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Ay.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Ay.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Ay.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Ay.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Ay.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Ay.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};var Sy,by,Cy;function Ty(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function Iy(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=Ty(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=Ty(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}function Ry(e={report:ky}){return function(t,n,r){const i=t[n];if("function"==typeof i){const o="AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name;r.value=function(...t){var r;const s=e.report.reportApiInvoke(this._sessionId||null,{name:Je(r="".concat(o,".")).call(r,n),options:t,tag:GA.TRACER});try{const e=i.apply(this,t);return s.onSuccess(),e}catch(e){throw s.onError(e),e}}}return r}}function wy(e={report:ky}){return function(t,n,r){const i=t[n];if("function"==typeof i){const o="AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name;r.value=async function(...t){var r;const s=e.report.reportApiInvoke(this._sessionId||null,{name:Je(r="".concat(o,".")).call(r,n),options:t,tag:GA.TRACER});try{const e=await i.apply(this,t);return s.onSuccess(),e}catch(e){throw s.onError(e),e}}}return r}}Oc&&(yy.CHINA={CODE:Ay.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(e){e.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(Sy||(Sy={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(by||(by={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Cy||(Cy={}));const ky=new class{constructor(){var e,t;this.baseInfoMap=new xn,this.clientList=$c,this.keyEventUploadPendingItems=[],this.normalEventUploadPendingItems=[],this.apiInvokeUploadPendingItems=[],this.apiInvokeCount=0,this.ltsList=[],this.lastSendNormalEventTime=Ma(),this.customReportCount=0,this.eventUploadTimer=window.setInterval(Yo(e=this.doSend).call(e,this),jc("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(Yo(t=this.appendSessionId).call(t,this),jc("EVENT_REPORT_SEND_INTERVAL"))}reportApiInvoke(e,t,n){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const r=Ma();this.apiInvokeCount+=1;const i=this.apiInvokeCount,o=()=>({tag:t.tag,invokeId:i,sid:e,name:t.name,apiInvokeTime:r,options:t.options,states:t.states||null}),s=!!jc("SHOW_REPORT_INVOKER_LOG");s&&Rc.info("".concat(t.name," start"),t.options);let a=!1;Ip(t.timeout).then(()=>{a||(this.sendApiInvoke(Iy({},o(),{error:ll.API_INVOKE_TIMEOUT,success:!1})),Rc.debug("".concat(t.name," timeout")))});const c=new pl(ll.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const r=()=>{if(a)throw c;return a=!0,this.sendApiInvoke(Iy({},o(),{success:!0},t.reportResult&&{result:e})),s&&Rc.info("".concat(t.name," onSuccess")),e};return n?zp(r,t.name+"Success",n,()=>a=!0):r()},onError:e=>{const r=()=>{if(a)throw e;a=!0,this.sendApiInvoke(Iy({},o(),{success:!1,error:e.toString()})),s&&Rc.info("".concat(t.name," onFailure"),e.toString())};return n?zp(r,t.name+"Error",n,()=>a=!0):r()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const n=Ma(),r=this.createBaseInfo(e,n);r.cname=t.cname;const i=rr({},{willUploadConsoleLog:jc("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:Oc?"global":"oversea",areas:jc("AREAS")&&jc("AREAS").join(",")},t.extend),o=Ma(),s=Iy({},r,{eventType:UA.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:wc,lts:o,elapse:o-n,extend:ve(i),mode:t.mode,process:jc("PROCESS_ID"),success:!0,version:kc});this.send({type:FA.SESSION,data:s},!0)}joinChooseServer(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=Iy({},r,{eventType:UA.JOIN_CHOOSE_SERVER,lts:i,eventElapse:i-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:i-n.startTime,success:t.succ,chooseServerAddrList:ve(t.serverList),uid:t.uid?br(t.uid):null,cid:t.cid?br(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0});this.send({type:FA.JOIN_CHOOSE_SERVER,data:o},!0)}reqUserAccount(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=Iy({},r,{eventType:UA.REQ_USER_ACCOUNT,lts:i,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:i-n.startTime,eventElapse:i-t.lts,extend:ve(t.extend)});this.send({type:FA.REQ_USER_ACCOUNT,data:o},!0)}joinGateway(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info;t.vid&&(r.vid=t.vid),r.uid=t.uid,r.cid=t.cid;const i=Ma(),o=Iy({},r,{eventType:UA.JOIN_GATEWAY,lts:i,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,elapse:i-n.startTime,eventElapse:i-t.lts});t.succ&&(n.lastJoinSuccessTime=i),this.send({type:FA.JOIN_GATEWAT,data:o},!0)}joinChannelTimeout(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=Ma(),i=Iy({},n.info,{lts:r,timeout:t,elapse:r-n.startTime});this.send({type:FA.JOIN_CHANNEL_TIMEOUT,data:i},!0)}publish(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=Iy({},r,{eventType:UA.PUBLISH,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:FA.PUBLISH,data:o},!0)}subscribe(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=Iy({},r,{eventType:UA.SUBSCRIBE,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid});"string"==typeof t.peerid?o.peerSuid=t.peerid:o.peer=t.peerid,this.send({type:FA.SUBSCRIBE,data:o},!0)}firstRemoteFrame(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=i.info,s=Ma(),a=Iy({},o,{},r,{elapse:s-i.startTime,eventType:t,lts:s});this.send({type:n,data:a},!0)}onGatewayStream(e,t,n,r){const i=this.baseInfoMap.get(e);if(!i)return;const o=Iy({},i.info,{},r,{eventType:t,lts:Ma()});this.send({type:n,data:o},!0)}streamSwitch(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=Iy({},r,{eventType:UA.STREAM_SWITCH,lts:i,isDual:t.isdual,elapse:i-n.startTime,success:t.succ});this.send({type:FA.STREAM_SWITCH,data:o},!0)}requestProxyAppCenter(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=Iy({},r,{eventType:UA.REQUEST_PROXY_APPCENTER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:FA.REQUEST_PROXY_APPCENTER,data:o},!0)}requestProxyWorkerManager(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=Iy({},r,{eventType:UA.REQUEST_PROXY_WORKER_MANAGER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:FA.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}setProxyServer(e){this.proxyServer=e,e?Rc.debug("reportProxyServerurl: ".concat(e)):Rc.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=Iy({},r,{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:i,elapse:i-n.startTime,joinChannelSuccessElapse:i-(n.lastJoinSuccessTime||i)});this.send({type:FA.PEER_PUBLISH_STATUS,data:o},!0)}workerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=Tp(Iy({},r,{},t,{elapse:i-n.startTime,lts:i,productType:"WebRTC"}),"payload",1300);Xn(o).call(o,e=>this.send({type:FA.WORKER_EVENT,data:e},!0))}apworkerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=Iy({},r,{},t,{elapse:i-n.startTime,lts:i});this.send({type:FA.AP_WORKER_EVENT,data:o},!0)}joinWebProxyAP(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=Iy({},r,{},t,{elapse:i-n.startTime,lts:i,extend:t.extend||void 0});this.send({type:FA.JOIN_WEB_PROXY_AP,data:o},!0)}WebSocketQuit(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,i=Ma(),o=Iy({},r,{},t,{elapse:i-n.startTime,lts:i});this.send({type:FA.WEBSOCKET_QUIT,data:o},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>jc("CUSTOM_REPORT_LIMIT"))throw new pl(ll.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval(()=>{this.customReportCount=0},5e3));const n=vo(t).call(t,t=>({type:FA.USER_ANALYTICS,data:Iy({sid:e},t)})),r={msgType:"EventMessages",sentTs:Math.round(Ma()/1e3),payloads:vo(n).call(n,e=>ve(e))};try{await this.postDataToStatsCollector(r)}catch(e){throw Rc.error("send custom report message failed",e.toString()),new pl(ll.CUSTOM_REPORT_SEND_FAILED,e.message)}}sendApiInvoke(e){const t=jc("NOT_REPORT_EVENT");if(e.tag&&rs(t)&&rs(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const n=this.baseInfoMap.get(e.sid);if(!n)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:r,uid:i,cid:o}=n.info;e.lts=e.lts||Ma();const s={invokeId:e.invokeId,sid:e.sid,cname:r,cid:o,uid:i,lts:e.lts,success:e.success,elapse:e.lts-n.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?ve(e.options):void 0,execStates:e.states?ve(e.states):void 0,execResult:e.result?ve(e.result):void 0,errorCode:e.error?ve(e.error):void 0};return this.send({type:FA.API_INVOKE,data:s},!1),!0}appendSessionId(){var e;Xn(e=this.clientList).call(e,e=>{if(e._sessionId){const t=this.apiInvokeUploadPendingItems.length;for(let n=0;n<t;n++){const t=this.apiInvokeUploadPendingItems.shift();t&&(t.sid=e._sessionId,this.sendApiInvoke(rr({},t)))}}})}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);var n;this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>jc("NORMAL_EVENT_QUEUE_CAPACITY")&&To(n=this.normalEventUploadPendingItems).call(n,0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Ma()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const n=[],r=[];for(;e.length;){const t=e.shift();n.length<20?n.push(t):r.push(t)}e.push(...r);for(const a of[...n]){var i,o;-1!==Lo(i=this.ltsList).call(i,a.data.lts)?(a.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(a.data.lts)):(this.ltsList.push(a.data.lts),cl(o=this.ltsList).call(o,(e,t)=>e-t))}t||(this.lastSendNormalEventTime=Ma());const s={msgType:"EventMessages",sentTs:Math.round(Ma()/1e3),payloads:vo(n).call(n,e=>ve(e)),vid:(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(n[0])};return n.length&&this.postDataToStatsCollector(s).catch((e=>n=>{var r,i,o;jc("EVENT_REPORT_RETRY")&&(t?this.keyEventUploadPendingItems=Je(r=this.keyEventUploadPendingItems).call(r,e):(this.normalEventUploadPendingItems=Je(i=this.normalEventUploadPendingItems).call(i,e),this.normalEventUploadPendingItems.length>jc("NORMAL_EVENT_QUEUE_CAPACITY")&&(To(o=this.normalEventUploadPendingItems).call(o,0,this.normalEventUploadPendingItems.length-jc("NORMAL_EVENT_QUEUE_CAPACITY")),Rc.warning("report: drop normal events"))))})(n)),e}async postDataToStatsCollector(e,t=!1){var n,r,i;zd.networkState===by.OFFLINE&&await fo.race([zd.onlineWaiter,Ip(2*Zd.maxRetryTimeout)]);const o=t?"/events/proto-raws":"/events/messages";let s=this.url||(this.proxyServer?Je(n=Je(r="https://".concat(this.proxyServer,"/rs/?h=")).call(r,jc("EVENT_REPORT_DOMAIN"),"&p=6443&d=")).call(n,o):Je(i="https://".concat(jc("EVENT_REPORT_DOMAIN"),":6443")).call(i,o));for(let u=0;u<2;u+=1){var a,c,l;1===u&&(s=this.backupUrl||(this.proxyServer?Je(a=Je(c="https://".concat(this.proxyServer,"/rs/?h=")).call(c,jc("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=")).call(a,o):Je(l="https://".concat(jc("EVENT_REPORT_BACKUP_DOMAIN"),":6443")).call(l,o)));try{t?await qd(s,{timeout:1e4,data:e}):await Wd(s,{timeout:1e4,data:e})}catch(e){if(1===u)throw e;continue}return}}createBaseInfo(e,t){const n=rr({},BA);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n}};class Oy extends Mu{constructor(e){super(),this._connectionState=KA.CLOSED,this.openConnectionTime=Ma(),this.lastMsgTime=Ma(),this.uploadCache=[],this.rttRolling=new Qf(5),this.pingpongTimeoutCount=0,this.onWebsocketMessage=e=>{if(e.data instanceof ArrayBuffer)return void this.emit(YA.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Ma(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")&&(this.emit(t._type,t._message),t._type===ey.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===ey.ON_USER_BANNED))switch(t._message.error_code){case 14:this.close("UID_BANNED");break;case 15:this.close("IP_BANNED");break;case 16:this.close("CHANNEL_BANNED")}},this.clientId=e.clientId,this.spec=e,this.websocket=new Hf("gateway-".concat(this.clientId),this.spec.retryConfig,!0),this.handleWebsocketEvents(),window.addEventListener("offline",()=>{this.connectionState===KA.CONNECTED&&this.reconnect("retry",TA.OFFLINE)})}get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===KA.CONNECTED?this.emit(YA.WS_CONNECTED):e===KA.RECONNECTING?this.emit(YA.WS_RECONNECTING,this._websocketReconnectReason):e===KA.CLOSED&&this.emit(YA.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket?this.websocket.url:null}get rtt(){return this.rttRolling.mean()}async request(e,t,n,r){var i,o,s,a,c;const l=kp(6,""),u={_id:l,_type:e,_message:t},d=this.websocket.connectionID,h=()=>new fo((e,t)=>{if(this.connectionState===KA.CONNECTED)return e();const n=()=>{this.off(YA.WS_CLOSED,r),e()},r=()=>{this.off(YA.WS_CONNECTED,n),t(new pl(hy.WS_ABORT))};this.once(YA.WS_CONNECTED,n),this.once(YA.WS_CLOSED,r)});if(this.connectionState!==KA.CONNECTING&&this.connectionState!==KA.RECONNECTING||e===JA.JOIN||e===JA.REJOIN||await h(),this.websocket.sendMessage(u,!0),r)return;const p=new fo((n,r)=>{let i=!1;const o=(r,o)=>{i=!0,n({isSuccess:"success"===r,message:o||{}}),this.off(YA.WS_CLOSED,s),this.off(YA.WS_RECONNECTING,s),this.emit(YA.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(l),o);const s=()=>{r(new pl(hy.WS_ABORT,"type: ".concat(e))),this.off(YA.WS_CLOSED,s),this.off(YA.WS_RECONNECTING,s),this.off("res-@".concat(l),o)};this.once(YA.WS_CLOSED,s),this.once(YA.WS_RECONNECTING,s),Ip(jc("SIGNAL_REQUEST_TIMEOUT")).then(()=>{this.websocket.connectionID!==d||i||(Rc.warning("ws request timeout, type: ".concat(e)),this.emit(YA.REQUEST_TIMEOUT,e,t))})});let f=null;try{f=await p}catch(r){if(this.connectionState===KA.CLOSED||e===JA.LEAVE)throw new pl(hy.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?r.throw():e===JA.JOIN||e===JA.REJOIN?null:(await h(),await this.request(e,t))}if(f.isSuccess)return f.message;const g=Number(f.message.error_code||f.message.code),m=nf(g),_=new pl(hy.UNEXPECTED_RESPONSE,Je(i="".concat(m.desc,": ")).call(i,f.message.error_str),{code:g,data:f.message});return"success"===m.action?f.message:(Rc.warning(Je(o=Je(s=Je(a=Je(c="[".concat(this.websocket.connectionID,"] unexpected response from type ")).call(c,e,", error_code: ")).call(a,g,", message: ")).call(s,m.desc,", action: ")).call(o,m.action)),"failed"===m.action?_.throw():"quit"===m.action?(this.initError=_,this.close(),_.throw()):(g===$A.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=f.message.option,Rc.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",TA.MULTI_IP)):this.reconnect(m.action,TA.SERVER_ERROR),e===JA.JOIN||e===JA.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new fo(n=>{const r=i=>{(!t||t(i))&&(this.off(e,r),n(i))};this.on(e,r)})}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(e){const t=jc("MAX_UPLOAD_CACHE")||50;var r;this.uploadCache.push(n),this.uploadCache.length>t&&To(r=this.uploadCache).call(r,0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval(()=>{var e;if(this.connectionState!==KA.CONNECTED)return;const t=To(e=this.uploadCache).call(e,0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(t._type,t._message)},jc("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,new fo((t,n)=>{this.once(YA.WS_CONNECTED,()=>t(this.joinResponse)),this.once(YA.WS_CLOSED,()=>n(this.initError||new pl(hy.WS_ABORT))),this.connectionState=KA.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval(()=>{this.handleWsInflateData()},2e4)})}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||"LEAVE",this.connectionState=KA.CLOSED,this.websocket.close()}async join(){var e;if(!this.joinResponse){const e=Bp(this,YA.REQUEST_JOIN_INFO),t=await this.request(JA.JOIN,e);if(!t)return this.emit(YA.REPORT_JOIN_GATEWAY,hy.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=KA.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(Yo(e=this.handlePingPong).call(e,this),3e3),!0}async rejoin(){var e,t;if(!this.reconnectToken)throw new pl(hy.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const n=Bp(this,YA.REQUEST_REJOIN_INFO);n.token=this.reconnectToken;const r=await this.request(JA.REJOIN,n);return!!r&&(this.connectionState=KA.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(Yo(e=this.handlePingPong).call(e,this),3e3),r.peers&&Xn(t=r.peers).call(t,e=>{this.emit(ey.ON_USER_ONLINE,{uid:e.uid}),e.audio_mute?this.emit(ey.MUTE_AUDIO,{uid:e.uid}):this.emit(ey.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(ey.MUTE_VIDEO,{uid:e.uid}):this.emit(ey.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(ey.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(ey.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(ey.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(ey.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(ey.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id}),e.audio&&this.emit(ey.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0}),e.video&&this.emit(ey.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0})}),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){Rc.debug("[".concat(this.clientId,"] receive notification: "),e);const t=nf(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close("UID_BANNED"),void this.close()):void this.reconnect(t.action,TA.SERVER_ERROR);Rc.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=jc("PING_PONG_TIME_OUT"),t=Ma();this.pingpongTimeoutCount>=e&&(Rc.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>jc("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",TA.TIMEOUT):this.request(JA.PING,void 0,!0).then(()=>{this.pingpongTimeoutCount=0;const e=Ma()-t;this.rttRolling.add(e),jc("REPORT_STATS")&&this.send(JA.PING_BACK,{pingpongElapse:e})}).catch(e=>{})}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(XA.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(ay.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(ay.CLOSED,()=>{this.connectionState=KA.CLOSED}),this.websocket.on(ay.FAILED,()=>{this._disconnectedReason="NETWORK_ERROR",this.connectionState=KA.CLOSED}),this.websocket.on(ay.RECONNECTING,e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===KA.CONNECTED?this.connectionState=KA.RECONNECTING:this.connectionState=KA.CONNECTING}),this.websocket.on(ay.WILL_RECONNECT,(e,t)=>{if(Bp(this,YA.IS_P2P_DISCONNECTED)&&"retry"===e)return this.reconnectToken=void 0,this.emit(YA.NEED_RENEW_SESSION),this.emit(YA.DISCONNECT_P2P),t("tryNext");"retry"!==e&&(this.reconnectToken=void 0,this.emit(YA.NEED_RENEW_SESSION),this.emit(YA.DISCONNECT_P2P)),t(e)}),this.websocket.on(ay.CONNECTED,()=>{this.openConnectionTime=Ma(),this.reconnectToken?this.rejoin().catch(e=>{var t;Rc.warning(Je(t="[".concat(this.clientId,"] rejoin failed ")).call(t,e)),this.reconnect("tryNext",TA.SERVER_ERROR)}):this.join().catch(e=>{if(this.emit(YA.REPORT_JOIN_GATEWAY,e.message||e.code,this.url||""),e instanceof pl&&e.code===hy.UNEXPECTED_RESPONSE&&e.data.code===$A.ERR_NO_AUTHORIZED)return Rc.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",TA.SERVER_ERROR);Rc.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",TA.SERVER_ERROR):(this.initError=e,this.close())})}),this.websocket.on(ay.REQUEST_NEW_URLS,(e,t)=>{Dp(this,YA.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})}}var Ny,Ly;!function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5"}(Ny||(Ny={}));class Py extends Mu{constructor(e,t){super(),this._hints=[],this._isClosed=!1,this._ID=t||kp(8,"track-"),this._originMediaStreamTrack=e,this._mediaStreamTrack=e,Xc(this)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){if(!e){const e=ky.reportApiInvoke(null,{name:jA.GET_MEDIA_STREAM_TRACK,options:[],tag:GA.TRACER});this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?e.onSuccess(this._mediaStreamTrack.label):e.onSuccess("")}return this._mediaStreamTrack}close(){this._isClosed=!0,el(this)}}class Dy extends Py{constructor(e,t){super(e,t),this._enabled=!0,this._muted=!1,this._isClosed=!1,this._trackProcessors=[],this._handleTrackEnded=()=>{this.onTrackEnded()},this._enabledMutex=new ah("".concat(t)),e.addEventListener("ended",this._handleTrackEnded)}get muted(){return this._muted}get enabled(){return this._enabled}getTrackLabel(){return this._originMediaStreamTrack.label}close(){var e;this._isClosed||(this.stop(),Xn(e=this._trackProcessors).call(e,e=>e.destroy()),this._trackProcessors=[],this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,Rc.debug("[".concat(this.getTrackId(),"] close")),this.emit(vu.NEED_CLOSE),super.close())}async _registerTrackProcessor(e){var t;if(-1!==Lo(t=this._trackProcessors).call(t,e))return;const n=this._trackProcessors[this._trackProcessors.length-1];this._trackProcessors.push(e),e.onOutputChange=async()=>{const t=e.output||this._originMediaStreamTrack;this._mediaStreamTrack=t,this._updatePlayerSource(),await Mp(this,vu.NEED_REPLACE_TRACK,this._mediaStreamTrack)},n?(n.onOutputChange=async()=>{n.output&&await e.setInput(n.output)},await e.setInput(n.output||n.input||this._originMediaStreamTrack)):await e.setInput(this._originMediaStreamTrack)}_getOutputFromProcessors(){if(0===this._trackProcessors.length)return this._originMediaStreamTrack;const e=this._trackProcessors[this._trackProcessors.length-1];return e.output||e.input||this._originMediaStreamTrack}async _updateOriginMediaStreamTrack(e,t){if(e!==this._originMediaStreamTrack){if(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop(),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._trackProcessors.length>0){await this._trackProcessors[0].setInput(e);const t=this._getOutputFromProcessors();this._mediaStreamTrack=t}else this._mediaStreamTrack=this._originMediaStreamTrack;this._updatePlayerSource(),await Mp(this,vu.NEED_REPLACE_TRACK,this._mediaStreamTrack)}}_getDefaultPlayerConfig(){return{}}onTrackEnded(){Rc.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Au.TRACK_ENDED)}stateCheck(e,t){var n,r,i;if(Rc.debug(Je(n=Je(r=Je(i="check track state, [muted: ".concat(this._muted,", enabled: ")).call(i,this._enabled,"] to [")).call(r,e,": ")).call(n,t,"]")),"muted"===e&&!Fu().webAudioMediaStreamDest)throw new pl(ll.NOT_SUPPORTED,"current environment does not support set mute").print();if(fl(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new pl(ll.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new pl(ll.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}}function My(){return function(e,t,n){const r=e[t];"function"==typeof r&&(n.value=function(...e){this._isClosed&&new pl(ll.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");const t=r.apply(this,e);return t instanceof fo?new fo((e,n)=>{t.then(e).catch(n)}):t})}}function xy(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function By(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=xy(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=xy(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}!function(e){e.IOS_15_INTERRUPTION_START="ios15-interruption-start",e.IOS_15_INTERRUPTION_END="ios15-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end"}(Ly||(Ly={}));var Uy=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Ur(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&hr(t,n,s),s},Fy=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class Vy extends Dy{constructor(e,t,n){super(e,n),this.trackMediaType="audio",this._enabled=!0,this._volume=100,this._useAudioElement=!1,this._bypassWebAudio=!1,this._encoderConfig=t,this._source=new Ah(e)}get isPlaying(){return this._useAudioElement?Mh.isPlaying(this.getTrackId()):this._source.isPlayed}setVolume(e){ml(e,"volume",0,1e3);const t=ih.reportApiInvoke(null,{tag:GA.TRACER,name:jA.LOCAL_AUDIO_TRACK_SET_VOLUME,options:[this.getTrackId(),e]},300);this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&Mh.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void Rc.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,Mp(this,my.NEED_REPLACE_TRACK,this._mediaStreamTrack).then(()=>{Rc.debug("[".concat(this.getTrackId(),"] replace web audio track success"))}).catch(e=>{Rc.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)}))}catch(e){}t.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){const t=ih.reportApiInvoke(null,{tag:GA.TRACER,name:jA.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[this.getTrackId(),e]});if(!this._useAudioElement)throw new pl(ll.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{await Mh.setSinkID(this.getTrackId(),e)}catch(e){throw t.onError(e),e}t.onSuccess()}async setEnabled(e,t,n){var r;if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e);const i=await this._enabledMutex.lock();if(!e){this._originMediaStreamTrack.enabled=!1;try{await Mp(this,my.NEED_REMOVE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),i(),e}return n||(this._enabled=!1),i()}this._originMediaStreamTrack.enabled=!0;try{await Mp(this,my.NEED_ADD_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),i(),e}Rc.info(Je(r="[".concat(this.getTrackId(),"] setEnabled to ")).call(r,e," success")),n||(this._enabled=!0),i()}async setMuted(e){var t,n;if(this._bypassWebAudio)return Rc.debug(Je(n="[".concat(this.getTrackId(),"] setMuted:")).call(n,e," fallback to setEnabled because no pass through.")),void await this.setEnabled(!e);if(e!==this._muted){if(this.stateCheck("muted",e),this._muted=e,ma().name===RA.FIREFOX)return Rc.debug("[".concat(this.getTrackId(),"] firefox set mute fallback to set enabled")),void await this.setEnabled(!e,void 0,!0);this._mediaStreamTrack.enabled=!e,Rc.debug(Je(t="[".concat(this.getTrackId(),"] start set muted: ")).call(t,e)),await Mp(this,my.SET_AUDIO_TRACK_MUTED,{track:this,muted:e})}}getStats(){Hp(()=>{Rc.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")},"localAudioTrackGetStatsWarning");const e=xp(this,my.GET_STATS);return e||By({},ry)}setAudioFrameCallback(e,t=4096){if(!e)return this._source.removeAllListeners(ny.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(ny.ON_AUDIO_BUFFER),this._source.on(ny.ON_AUDIO_BUFFER,t=>e(t))}play(){const e=ih.reportApiInvoke(null,{tag:GA.TRACER,name:jA.LOCAL_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(Rc.debug("[".concat(this.getTrackId(),"] start audio playback in element")),Mh.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),e.onSuccess()}stop(){const e=ih.reportApiInvoke(null,{tag:GA.TRACER,name:jA.LOCAL_AUDIO_TRACK_STOP,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Mh.stop(this.getTrackId()):this._source.stop(),e.onSuccess()}close(){super.close(),this._source.destroy()}_updatePlayerSource(){Rc.debug("[".concat(this.getTrackId(),"] update player source track")),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Mh.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),e.addEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=e,this._source.updateTrack(this._originMediaStreamTrack),this._mediaStreamTrack!==this._source.outputTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Mp(this,my.NEED_REPLACE_TRACK,this._mediaStreamTrack)))}renewMediaStreamTrack(){return fo.resolve(void 0)}}Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[String]),Fy("design:returntype",fo)],Vy.prototype,"setPlaybackDevice",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[Boolean,Object,Boolean]),Fy("design:returntype",fo)],Vy.prototype,"setEnabled",null),Uy([My(),rh({report:ih}),Fy("design:type",Function),Fy("design:paramtypes",[Boolean]),Fy("design:returntype",fo)],Vy.prototype,"setMuted",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[]),Fy("design:returntype",Object)],Vy.prototype,"getStats",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[Object,Number]),Fy("design:returntype",void 0)],Vy.prototype,"setAudioFrameCallback",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[]),Fy("design:returntype",void 0)],Vy.prototype,"play",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[]),Fy("design:returntype",void 0)],Vy.prototype,"stop",null);class jy extends Vy{constructor(e,t,n,r){super(e,t.encoderConfig?Fc(t.encoderConfig):{},r),this._deviceName="default",this._enabled=!0,this._config=t,this._constraints=n,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),wa()&&ph.bindInterruptDetectorTrack(this)}async setDevice(e){var t,n;const r=ih.reportApiInvoke(null,{tag:GA.TRACER,name:jA.MIC_AUDIO_TRACK_SET_DEVICE,options:[this.getTrackId(),e]});if(Rc.info(Je(t="[".concat(this.getTrackId(),"] start set device to ")).call(t,e)),this._enabled)try{const t=await Ph.getDeviceById(e),n={};n.audio=By({},this._constraints),n.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let r=null;try{r=await kh(n,this.getTrackId())}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await kh({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getAudioTracks()[0],!1),this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw r.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await Ph.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(e){throw r.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}r.onSuccess(),Rc.info(Je(n="[".concat(this.getTrackId(),"] set device to ")).call(n,e," success"))}async setEnabled(e,t,n){if(t)return Rc.debug("[".concat(this.getTrackId,"] setEnabled false (do not close microphone)")),await super.setEnabled(e);if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e);const r=await this._enabledMutex.lock();if(!e){this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),n||(this._enabled=!1);try{await Mp(this,my.NEED_REMOVE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.toString()),r(),e}return void r()}const i=By({},this._constraints),o=Ph.searchDeviceIdByName(this._deviceName);o&&!i.deviceId&&(i.deviceId=o);try{const e=await kh({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await Mp(this,my.NEED_ADD_TRACK,this)}catch(e){throw r(),Rc.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.toString()),e}n||(this._enabled=!0),Rc.info("[".concat(this.getTrackId(),"] setEnabled success")),r()}close(){super.close(),wa()&&ph.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((Ra()||Na())&&this._enabled&&!this._isClosed&&ph.duringInterruption){const e=async()=>{ph.off(Ly.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Rc.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};ph.on(Ly.IOS_INTERRUPTION_END,e)}else Rc.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(vy.TRACK_ENDED)}async renewMediaStreamTrack(){const e=By({},this._constraints),t=Ph.searchDeviceIdByName(this._deviceName);t&&!e.deviceId&&(e.deviceId=t);const n=await kh({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(n.getAudioTracks()[0],!0)}}Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[String]),Fy("design:returntype",fo)],jy.prototype,"setDevice",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[Boolean,Boolean,Boolean]),Fy("design:returntype",fo)],jy.prototype,"setEnabled",null);class Gy extends Vy{constructor(e,t,n,r){super(t.createOutputTrack(),n,r),this.source=e,this._bufferSource=t,this._bufferSource.on(ny.AUDIO_SOURCE_STATE_CHANGE,e=>{this.emit(vy.SOURCE_STATE_CHANGE,e)});try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){const t=ih.reportApiInvoke(null,{tag:GA.TRACER,name:jA.BUFFER_AUDIO_TRACK_START,options:[this.getTrackId(),e,this.duration]});e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer(),t.onSuccess()}pauseProcessAudioBuffer(){const e=ih.reportApiInvoke(null,{tag:GA.TRACER,name:jA.BUFFER_AUDIO_TRACK_PAUSE,options:[this.getTrackId()]});this._bufferSource.pauseProcessAudioBuffer(),e.onSuccess()}seekAudioBuffer(e){const t=ih.reportApiInvoke(null,{tag:GA.TRACER,name:jA.BUFFER_AUDIO_TRACK_SEEK,options:[this.getTrackId()]});this._bufferSource.seekAudioBuffer(e),t.onSuccess()}resumeProcessAudioBuffer(){const e=ih.reportApiInvoke(null,{tag:GA.TRACER,name:jA.BUFFER_AUDIO_TRACK_RESUME,options:[this.getTrackId()]});this._bufferSource.resumeProcessAudioBuffer(),e.onSuccess()}stopProcessAudioBuffer(){const e=ih.reportApiInvoke(null,{tag:GA.TRACER,name:jA.BUFFER_AUDIO_TRACK_STOP,options:[this.getTrackId()]});this._bufferSource.stopProcessAudioBuffer(),e.onSuccess()}}Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[Object]),Fy("design:returntype",void 0)],Gy.prototype,"startProcessAudioBuffer",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[]),Fy("design:returntype",void 0)],Gy.prototype,"pauseProcessAudioBuffer",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[Number]),Fy("design:returntype",void 0)],Gy.prototype,"seekAudioBuffer",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[]),Fy("design:returntype",void 0)],Gy.prototype,"resumeProcessAudioBuffer",null),Uy([My(),Fy("design:type",Function),Fy("design:paramtypes",[]),Fy("design:returntype",void 0)],Gy.prototype,"stopProcessAudioBuffer",null);class Hy extends Vy{constructor(){const e=gh().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,kp(8,"track-mix-"));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}this.destNode=e,this.trackList=[]}get isActive(){var e;return!(!this.trackList.length||!Qo(e=this.trackList).call(e,e=>!e.muted))}getSubTrackLabels(){var e;return vo(e=this.trackList).call(e,e=>e.getTrackLabel())}hasAudioTrack(e){var t;return-1!==Lo(t=this.trackList).call(t,e)}addAudioTrack(e){var t;-1===Lo(t=this.trackList).call(t,e)?(Rc.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):Rc.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){var t;if(-1!==Lo(t=this.trackList).call(t,e)){Rc.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}Up(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){var e;const t={};Xn(e=this.trackList).call(e,e=>{e._encoderConfig&&((e._encoderConfig.bitrate||0)>(t.bitrate||0)&&(t.bitrate=e._encoderConfig.bitrate),(e._encoderConfig.sampleRate||0)>(t.sampleRate||0)&&(t.sampleRate=e._encoderConfig.sampleRate),(e._encoderConfig.sampleSize||0)>(t.sampleSize||0)&&(t.sampleSize=e._encoderConfig.sampleSize),e._encoderConfig.stereo&&(t.stereo=!0))}),this._encoderConfig=t}}class Qy extends Mu{constructor(){super(...arguments),this.resultStorage=new xn}setLocalAudioStats(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))}setLocalVideoStats(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))}setRemoteAudioStats(e,t){const n=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",n,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const n=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",n,this.checkVideoDecode(t))}record(e,t,n){this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const r=this.resultStorage.get(e);if(r&&(r.result.push(n),r.result.length>=5)){var i;const n=rs(i=r.result).call(i,!0);r.isPrevNormal&&!n&&this.emit("exception",Wy[e],e,t),!r.isPrevNormal&&n&&this.emit("exception",Wy[e]+2e3,e+"_RECOVER",t),r.isPrevNormal=n,r.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof Hy&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}checkFramerateInput(e,t){let n=null;t._encoderConfig&&t._encoderConfig.frameRate&&(n=Xy(t._encoderConfig.frameRate));const r=e.captureFrameRate;return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof Hy&&!t.isActive||!!t.muted||0!==e.sendBitrate}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const Wy={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003};function qy(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function zy(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=qy(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=qy(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}class Zy{constructor(e){this.localConnectionsMap=new xn,this.remoteConnectionsMap=new xn,this.trafficStatsPeerList=[],this.updateStats=()=>{var e,t;Xn(e=this.remoteConnectionsMap).call(e,e=>{var t;const n=e.audioStats,r=e.videoStats,i=e.pcStats,o=zy({},tu),s=zy({},ru),a=zy({},nu),c=e.connection.pc.getStats(),l=c.audioRecv[0],u=c.videoRecv[0],d=i?i.videoRecv[0]:void 0,h=!0===e.connection.pc._statsFilter.videoIsReady,p=this.trafficStats&&Qo(t=this.trafficStats.peer_delay).call(t,t=>t.peer_uid===e.connection.getUserId());if(l){"opus"!==l.codec&&"aac"!==l.codec||(o.codecType=l.codec),l.outputLevel?o.receiveLevel=Math.round(32767*l.outputLevel):e.connection.user.audioTrack&&(o.receiveLevel=Math.round(32767*e.connection.user.audioTrack.getVolumeLevel())),o.receiveBytes=l.bytes,o.receivePackets=l.packets,o.receivePacketsLost=l.packetsLost,o.packetLossRate=o.receivePacketsLost/(o.receivePackets+o.receivePacketsLost),o.receiveBitrate=n?8*Math.max(0,o.receiveBytes-n.receiveBytes):0,o.totalDuration=n?n.totalDuration+1:1,o.totalFreezeTime=n?n.totalFreezeTime:0,o.freezeRate=o.totalFreezeTime/o.totalDuration,o.receiveDelay=l.jitterBufferMs;const t=e.connection.user.audioTrack;o.totalDuration>10&&Zy.isRemoteAudioFreeze(t)&&(o.totalFreezeTime+=1)}if(u){"H264"!==u.codec&&"VP8"!==u.codec&&"VP9"!==u.codec&&"AV1X"!==u.codec||(s.codecType=u.codec),s.receiveBytes=u.bytes,s.receiveBitrate=r?8*Math.max(0,s.receiveBytes-r.receiveBytes):0,s.decodeFrameRate=u.decodeFrameRate,s.renderFrameRate=u.decodeFrameRate,u.outputFrame&&(s.renderFrameRate=u.outputFrame.frameRate),u.receivedFrame?(s.receiveFrameRate=u.receivedFrame.frameRate,s.receiveResolutionHeight=u.receivedFrame.height,s.receiveResolutionWidth=u.receivedFrame.width):e.connection.user.videoTrack&&(s.receiveResolutionHeight=e.connection.user.videoTrack._videoHeight||0,s.receiveResolutionWidth=e.connection.user.videoTrack._videoWidth||0),void 0!==u.framesRateFirefox&&(s.receiveFrameRate=Math.round(u.framesRateFirefox)),s.receivePackets=u.packets,s.receivePacketsLost=u.packetsLost,s.packetLossRate=s.receivePacketsLost/(s.receivePackets+s.receivePacketsLost),s.totalDuration=r?r.totalDuration+1:1,s.totalFreezeTime=r?r.totalFreezeTime:0,s.receiveDelay=u.jitterBufferMs||0;const t=e.connection.user.videoTrack;e.connection.subscribeOptions.video&&h&&Zy.isRemoteVideoFreeze(t,u,d)&&(s.totalFreezeTime+=1),s.freezeRate=s.totalFreezeTime/s.totalDuration}p&&(o.end2EndDelay=p.B_ad,s.end2EndDelay=p.B_vd,o.transportDelay=p.B_ed,s.transportDelay=p.B_ed,o.currentPacketLossRate=p.B_ealr4/100,s.currentPacketLossRate=p.B_evlr4/100,a.uplinkNetworkQuality=p.B_punq?p.B_punq:0,a.downlinkNetworkQuality=p.B_pdnq?p.B_punq:0),e.audioStats=o,e.videoStats=s,e.pcStats=c,e.networkStats=a,e.connection.user.audioTrack&&this.exceptionMonitor.setRemoteAudioStats(e.connection.user.audioTrack,o),e.connection.user.videoTrack&&this.exceptionMonitor.setRemoteVideoStats(e.connection.user.videoTrack,s)}),Xn(t=this.localConnectionsMap).call(t,e=>{const t=e.audioStats,n=e.videoStats,r=zy({},Xl),i=zy({},eu),o=e.connection.pc.getStats(),s=o.audioSend[0],a=o.videoSend[0],c=e.connection.getUserId();s&&("opus"!==s.codec&&"aac"!==s.codec||(r.codecType=s.codec),s.inputLevel?r.sendVolumeLevel=Math.round(32767*s.inputLevel):e.connection.audioTrack&&(r.sendVolumeLevel=Math.round(32767*e.connection.audioTrack.getVolumeLevel())),r.sendBytes=s.bytes,r.sendPackets=s.packets,r.sendPacketsLost=s.packetsLost,r.sendBitrate=t?8*Math.max(0,r.sendBytes-t.sendBytes):0),a&&("H264"!==a.codec&&"VP8"!==a.codec&&"VP9"!==a.codec&&"AV1X"!==a.codec||(i.codecType=a.codec),i.sendBytes=a.bytes,i.sendBitrate=n?8*Math.max(0,i.sendBytes-n.sendBytes):0,a.inputFrame?(i.captureFrameRate=a.inputFrame.frameRate,i.captureResolutionHeight=a.inputFrame.height,i.captureResolutionWidth=a.inputFrame.width):e.connection.videoTrack&&(i.captureResolutionWidth=e.connection.videoTrack._videoWidth||0,i.captureResolutionHeight=e.connection.videoTrack._videoHeight||0),a.sentFrame?(i.sendFrameRate=a.sentFrame.frameRate,i.sendResolutionHeight=a.sentFrame.height,i.sendResolutionWidth=a.sentFrame.width):e.connection.videoTrack&&(i.sendResolutionWidth=e.connection.videoTrack._videoWidth||0,i.sendResolutionHeight=e.connection.videoTrack._videoHeight||0),a.avgEncodeMs&&(i.encodeDelay=a.avgEncodeMs),e.connection.videoTrack&&e.connection.videoTrack._encoderConfig&&e.connection.videoTrack._encoderConfig.bitrateMax&&(i.targetSendBitrate=1e3*e.connection.videoTrack._encoderConfig.bitrateMax),i.sendPackets=a.packets,i.sendPacketsLost=a.packetsLost,i.totalDuration=n?n.totalDuration+1:1,i.totalFreezeTime=n?n.totalFreezeTime:0,this.isLocalVideoFreeze(a)&&(i.totalFreezeTime+=1)),this.trafficStats&&(r.sendPacketsLost=this.trafficStats.B_palr4/100,i.sendPacketsLost=this.trafficStats.B_pvlr4/100),e.audioStats=r,e.videoStats=i,e.audioStats&&e.connection.audioTrack&&this.exceptionMonitor.setLocalAudioStats(c,e.connection.audioTrack,e.audioStats),e.videoStats&&e.connection.videoTrack&&this.exceptionMonitor.setLocalVideoStats(c,e.connection.videoTrack,e.videoStats)})},this.clientId=e,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new Qy,this.exceptionMonitor.on("exception",(e,t,n)=>{this.onStatsException&&this.onStatsException(e,t,n)})}reset(){this.localConnectionsMap=new xn,this.remoteConnectionsMap=new xn,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(e){const t=this.localConnectionsMap.get(e);return t&&t.audioStats?t.audioStats:zy({},Xl)}getLocalVideoTrackStats(e){const t=this.localConnectionsMap.get(e);return t&&t.videoStats?t.videoStats:zy({},eu)}getRemoteAudioTrackStats(e){var t;const n=this.remoteConnectionsMap.get(e);if(!n||!n.audioStats)return zy({},tu);if(!this.trafficStats)return n.audioStats;const r=Qo(t=this.trafficStats.peer_delay).call(t,e=>e.peer_uid===n.connection.user.uid);return r&&(n.audioStats.publishDuration=r.B_ppad+(Ma()-this.trafficStats.timestamp)),n.audioStats}getRemoteNetworkQualityStats(e){const t=this.remoteConnectionsMap.get(e);return t&&t.networkStats?t.networkStats:zy({},nu)}getRemoteVideoTrackStats(e){var t;const n=this.remoteConnectionsMap.get(e);if(!n||!n.videoStats)return zy({},ru);if(!this.trafficStats)return n.videoStats;const r=Qo(t=this.trafficStats.peer_delay).call(t,e=>e.peer_uid===n.connection.user.uid);return r&&(n.videoStats.publishDuration=r.B_ppvd+(Ma()-this.trafficStats.timestamp)),n.videoStats}getRTCStats(){var e,t;let n=0,r=0,i=0,o=0;Xn(e=this.localConnectionsMap).call(e,e=>{e.audioStats&&(n+=e.audioStats.sendBytes,r+=e.audioStats.sendBitrate),e.videoStats&&(n+=e.videoStats.sendBytes,r+=e.videoStats.sendBitrate)}),Xn(t=this.remoteConnectionsMap).call(t,e=>{e.audioStats&&(i+=e.audioStats.receiveBytes,o+=e.audioStats.receiveBitrate),e.videoStats&&(i+=e.videoStats.receiveBytes,o+=e.videoStats.receiveBitrate)});let s=1;return this.trafficStats&&(s+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:s,SendBitrate:r,SendBytes:n,RecvBytes:i,RecvBitrate:o,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}removeConnection(e){this.localConnectionsMap.delete(e),this.remoteConnectionsMap.delete(e)}addLocalConnection(e){const t=e.connectionId;this.localConnectionsMap.has(t)||this.localConnectionsMap.set(t,{connection:e})}addRemoteConnection(e){const t=e.connectionId;this.remoteConnectionsMap.has(t)||this.remoteConnectionsMap.set(t,{connection:e})}updateTrafficStats(e){var t;const n=Gr(t=e.peer_delay).call(t,e=>{var t;return-1===Lo(t=this.trafficStatsPeerList).call(t,e.peer_uid)});Xn(n).call(n,e=>{var t,n;const r=Qo(t=Bd(Jp(n=this.remoteConnectionsMap).call(n))).call(t,t=>t.connection._userId===e.peer_uid);void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,r?Ma()-r.connection.startTime:0),this.trafficStatsPeerList.push(e.peer_uid))}),this.trafficStats=e}updateUplinkStats(e){var t;this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&Rc.debug(Je(t="[".concat(this.clientId,"]: Period fir changes to ")).call(t,e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,n){if(!e)return!1;const r=!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime,i=!n||t.framesDecodeCount>n.framesDecodeCount;return r||!i}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}}function $y(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ky(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=$y(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=$y(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}function Yy(e){if(!e.address||!e.tcp)throw new pl(ll.UNEXPECTED_RESPONSE,"Invalid address format ".concat(e));return e.address.match(/^[\.\:\d]+$/)?"".concat(e.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(Rc.info("Cannot recognized as IP address ".concat(e.address,". Used As Host instead")),Je(t="".concat(e.address,":")).call(t,e.tcp));var t}function Jy(e,t){var n;const r=jc("GATEWAY_DOMAINS");let i=r[1]&&-1!==Lo(t).call(t,r[1])?1:0;return e.addresses=e.addresses||[],{gatewayAddrs:vo(n=e.addresses).call(n,e=>{var t,n,o;return e.ip.match(/^[\.\:\d]+$/)?Je(t=Je(n="".concat(e.ip.replace(/[^\d]/g,"-"),".")).call(n,r[i++%r.length],":")).call(t,e.port):(Rc.info("Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),Je(o="".concat(e.ip,":")).call(o,e.port))}),uid:e.uid,cid:e.cid,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function Xy(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function eS(e,t){const n=e.videoSend[0];if(!n)return null;const r=t&&t.videoSend[0]?t.videoSend[0].inputFrame:void 0,i={id:kp(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:n.ssrc.toString()};return n.inputFrame&&(r&&n.inputFrame.height===r.height||(i.A_fhi=n.inputFrame.height?n.inputFrame.height.toString():"0"),r&&n.inputFrame.width===r.width||(i.A_fwi=n.inputFrame.width?n.inputFrame.width.toString():"0"),r&&n.inputFrame.frameRate===r.frameRate||(i.A_fri=n.inputFrame.frameRate?n.inputFrame.frameRate.toString():"0")),i}function tS(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function nS(e,t){const n={};if(e.height&&e.width){const r=t._videoHeight||t.getMediaStreamTrack(!0).getSettings().height;n.scaleResolutionDownBy=r?r/Xy(e.height):4}return n.maxFramerate=e.framerate?Xy(e.framerate):void 0,n.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,n}function rS(e,t){var n;let r,i,o=void 0;switch(t){case Ny.CHOOSE_SERVER:r=4096,i="choose server";break;case Ny.CLOUD_PROXY:r=1048576,i="proxy";break;case Ny.CLOUD_PROXY_5:r=4194304,i="proxy5";break;default:throw new pl(ll.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(Xn(n=e.response_body).call(n,t=>{var n;t.buffer&&t.buffer.flag===r&&(o={code:t.buffer.code,addresses:vo(n=t.buffer.edges_services).call(n,e=>Ky({},e,{ticket:t.buffer.cert})),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:Ky({},t.buffer.detail,{},e.detail),flag:t.buffer.flag,opid:e.opid})}),!o)throw new pl(ll.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(i," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return o}function iS(e){var t;return vo(t=e.addresses).call(t,e=>({address:e.ip,tcpport:e.port,udpport:e.port,username:Nc.username,password:Nc.password}))}function oS(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function sS(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=oS(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=oS(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}const aS=new xn;class cS extends Mu{constructor(e){super(),this.inChannelInfo={joinAt:null,duration:0},this._state="DISCONNECTED",this.needToSendUnpubUnsub=new xn,this.isSignalRecover=!1,this.hasChangeBGPAddress=!1,this.joinGatewayStartTime=0,this._signalTimeout=!1,this.clientId=e.clientId,this.spec=e,this.signal=new Oy(sS({},e,{retryConfig:e.websocketRetryConfig})),this._statsCollector=e.statsCollector,this.role=e.role||"audience",this._clientRoleOptions=e.clientRoleOptions,this.handleSignalEvents()}get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(gy.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(gy.CONNECTION_STATE_CHANGE,e,t)}async join(e,t){var n,r;"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const i=Ma();let o=aS.get(e.cname);if(o||(o=new xn,aS.set(e.cname,o)),o.has(e.uid)){const t=new pl(ll.UID_CONFLICT);throw ky.joinGateway(e.sid,{lts:i,succ:!1,ec:t.message,addr:null,uid:e.uid,cid:e.cid}),t}o.set(e.uid,!0),this.joinInfo=e,this.key=t;const s=e.proxyServer?vo(n=e.gatewayAddrs).call(n,t=>{var n,r;const i=t.split(":");return Je(n=Je(r="wss://".concat(e.proxyServer,"/ws/?h=")).call(r,i[0],"&p=")).call(n,i[1])}):vo(r=e.gatewayAddrs).call(r,e=>"wss://".concat(e));let a=0;this.joinGatewayStartTime=i;try{a=(await this.signal.init(s)).uid}catch(t){throw Rc.error("[".concat(this.clientId,"] User join failed"),t.toString()),ky.joinGateway(e.sid,{lts:i,succ:!1,ec:t.message,addr:this.signal.url,uid:e.uid,cid:e.cid}),o.delete(e.uid),this.signal.close(),t}return this.state="CONNECTED",this.inChannelInfo.joinAt=Ma(),Rc.debug("[".concat(this.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval(()=>{this.updateTrafficStats().catch(e=>{Rc.warning("[".concat(this.clientId,"] get traffic stats error"),e.toString())})},3e3),this.networkQualityInterval=window.setInterval(()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(gy.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(gy.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(gy.NETWORK_QUALITY,{uplinkNetworkQuality:tS(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:tS(this._statsCollector.trafficStats.B_dnq)}):this.emit(gy.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})},2e3),a}async leave(e=!1){if("DISCONNECTED"!==this.state){this.state="DISCONNECTING";try{e||this.signal.connectionState!==KA.CONNECTED||await wp(this.signal.request(JA.LEAVE,void 0,!0),3e3)}catch(e){Rc.warning("[".concat(this.clientId,"] leave request failed, ignore"),e)}this.signal.close(),this.reset(),this.state="DISCONNECTED"}}async publish(e,t){if(!this.joinInfo)throw new pl(ll.UNEXPECTED_ERROR,"publish no joinInfo");const n=e.getUserId(),r=e.videoTrack?function(e){var t;const n=e._encoderConfig;if(!n)return{};const r={resolution:n.width&&n.height?Je(t="".concat(Xy(n.width),"x")).call(t,Xy(n.height)):void 0,maxVideoBW:n.bitrateMax,minVideoBW:n.bitrateMin};return"number"==typeof n.frameRate?(r.maxFrameRate=n.frameRate,r.minFrameRate=n.frameRate):n.frameRate&&(r.maxFrameRate=n.frameRate.max||n.frameRate.ideal||n.frameRate.exact||n.frameRate.min,r.minFrameRate=n.frameRate.min||n.frameRate.ideal||n.frameRate.exact||n.frameRate.max),r}(e.videoTrack):{};if(e.on(ty.NEED_ANSWER,(i,o,s)=>{var a;const c={state:"offer",stream_type:t,p2p_id:e.pc.ID,sdp:ve(i),audio:!!e.audioTrack,video:!!e.videoTrack,screen:e.videoTrack&&-1!==Lo(a=e.videoTrack._hints).call(a,Eu.SCREEN_TRACK),attributes:r,dtx:e.audioTrack instanceof jy&&e.audioTrack._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1,mode:this.spec.mode,codec:this.spec.codec,extend:jc("PUB_EXTEND")};if(e.audioTrack&&e.audioTrack instanceof Hy&&e.audioTrack){const t={stream_id:this.joinInfo&&(this.joinInfo.stringUid||this.joinInfo.uid),action:""};e.audioTrack.isActive?t.action="unmute_local_audio":t.action="mute_local_audio",this.sendControl(t)}if(e.videoTrack){const t={stream_id:this.joinInfo&&(this.joinInfo.stringUid||this.joinInfo.uid),action:""};e.videoTrack.muted?t.action="mute_local_video":t.action="unmute_local_video",this.sendControl(t)}this.signal.request(JA.PUBLISH,c,!0).then(e=>{n&&this.needToSendUnpubUnsub.set(n,!0),o(JSON.parse(e.sdp))}).catch(t=>{if(i.retry&&t.data&&t.data.code===$A.ERR_PUBLISH_REQUEST_INVALID)return Rc.warning("[".concat(this.clientId,"] receiver publish error code, retry"),t.toString()),Dp(e,ty.NEED_UNPUB).then(()=>{i.retry=!1,Dp(e,ty.NEED_ANSWER,i).then(o).catch(s)});t.code!==ll.WS_ABORT&&s(t)})}),e.on(ty.NEED_RENEGOTIATE,(n,r,i)=>{const o={state:"negotiation",stream_type:t,p2p_id:e.pc.ID,sdp:n};this.signal.request(JA.PUBLISH,o,!0).then(e=>{r(JSON.parse(e.sdp))}).catch(e=>{e.code!==ll.WS_ABORT&&i(e)})}),e.on(ty.NEED_UNPUB,r=>n&&!this.needToSendUnpubUnsub.has(n)?r(!1):"RECONNECTING"===this.state?r(!0):void this.signal.request(JA.UNPUBLISH,{stream_id:e.getUserId(),stream_type:t},!0).then(()=>r(!1)).catch(e=>{Rc.warning("unpublish warning: ",e),r(!0)})),e.on(ty.NEED_UPLOAD,(e,n)=>{this.signal.upload(e,{stream_type:t,stats:n})}),e.on(ty.NEED_SIGNAL_RTT,e=>{e(this.signal.rtt)}),e.on(ty.NEED_CONTROL,(e,t,n)=>{let r;if("video"===e.type&&e.muted)r="mute_local_video";else if("video"!==e.type||e.muted)if("audio"===e.type&&e.muted)r="mute_local_audio";else{if("audio"!==e.type||e.muted)return;r="unmute_local_audio"}else r="unmute_local_video";const i={stream_id:this.joinInfo&&(this.joinInfo.stringUid||this.joinInfo.uid),action:r};this.sendControl(i).then(t).catch(n)}),"RECONNECTING"!==this.state){if("CONNECTED"!==this.state)return new pl(ll.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state)).throw();await e.startP2PConnection()}else e.readyToReconnectPC()}async subscribe(e){if(!this.joinInfo)throw new pl(ll.UNEXPECTED_ERROR,"subscribe no joinInfo");const t=e.getUserId();if(e.on(ty.NEED_ANSWER,(n,r,i)=>{const o=e.subscribeOptions,s={stream_id:e.getUserId(),audio:!!o.audio,video:!!o.video,mode:this.spec.mode,codec:this.spec.codec,p2p_id:e.pc.ID,sdp:ve(n),tcc:!!jc("SUBSCRIBE_TCC"),extend:jc("SUB_EXTEND")};this.signal.request(JA.SUBSCRIBE,s,!0).then(e=>{this.needToSendUnpubUnsub.set(t,!0),r(JSON.parse(e.sdp))}).catch(t=>{if(n.retry&&t.data&&t.data.code===$A.ERR_SUBSCRIBE_REQUEST_INVALID)return Rc.warning("[".concat(this.clientId,"] receiver subscribe error code, retry"),t.toString()),Dp(e,ty.NEED_UNSUB).then(()=>{n.retry=!1,Dp(e,ty.NEED_ANSWER,n).then(r).catch(i)});t.code!==ll.WS_ABORT&&i(t)})}),e.on(ty.NEED_UNSUB,n=>this.needToSendUnpubUnsub.has(t)?"RECONNECTING"===this.state?n(!0):void this.signal.request(JA.UNSUBSCRIBE,{stream_id:e.getUserId()},!0).then(()=>n(!1)).catch(e=>{Rc.warning("unsubscribe warning",e),n(!0)}):n(!1)),e.on(ty.NEED_UPLOAD,(t,n)=>{this.signal.upload(t,{stream_id:e.getUserId(),stats:n})}),e.on(ty.NEED_SIGNAL_RTT,e=>{e(this.signal.rtt)}),"RECONNECTING"!==this.state){if("CONNECTED"!==this.state)return new pl(ll.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state)).throw();await e.startP2PConnection()}else e.readyToReconnectPC()}async subscribeChange(e,t){var n,r;if(!this.joinInfo)throw new pl(ll.UNEXPECTED_ERROR,"subscribe no joinInfo");if(await e.setSubscribeOptions(t),"RECONNECTING"!==this.state){if("CONNECTED"!==this.state)return new pl(ll.INVALID_OPERATION,"can not subscribe change when connection state is ".concat(this.state)).throw();Rc.debug(Je(n=Je(r="[".concat(this.clientId,"] send subscribe change, audio: ")).call(r,t.audio,", video: ")).call(n,t.video)),await this.signal.request(JA.SUBSCRIBE_CHANGE,{stream_id:e.getUserId(),audio:!!t.audio,video:!!t.video},!0)}}async sendControl(e){this.signal.request(JA.CONTROL,e,!0,!0)}async unsubscribe(e){await e.closeP2PConnection()}getGatewayInfo(){return this.signal.request(JA.GATEWAY_INFO)}renewToken(e){return this.signal.request(JA.RENEW_TOKEN,{token:e})}async setClientRole(e,t){if(t&&(this._clientRoleOptions=rr({},t)),"CONNECTED"!==this.state)return void(this.role=e);let n=void 0;n="audience"===e?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,await this.signal.request(JA.SET_CLIENT_ROLE,{role:e,level:n}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(JA.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setStreamFallbackOption(e,t){await this.signal.request(JA.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(JA.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Ma()-this.inChannelInfo.joinAt),sS({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(JA.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Ma()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=aS.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.needToSendUnpubUnsub=new xn,this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){const t=e.match(/(wss\:\/\/)?([^:]+):(\d+)/);return t?{username:Nc.username,password:Nc.password,turnServerURL:t[2],tcpport:br(t[3])+30,udpport:br(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex])||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(sS({},Nc,{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){var e;if("CONNECTED"!==this.state)return;const t=await this.signal.request(JA.TRAFFIC_STATS,void 0,!0);t.timestamp=Ma(),Xn(e=t.peer_delay).call(e,e=>{var t;const n=this._statsCollector.trafficStats&&Qo(t=this._statsCollector.trafficStats.peer_delay).call(t,t=>t.peer_uid===e.peer_uid);n&&n.B_st!==e.B_st&&Vp(()=>{this.emit(gy.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)})}),this._statsCollector.updateTrafficStats(t)}getJoinMessage(){if(!this.joinInfo||!this.key)throw new pl(ll.UNEXPECTED_ERROR,"can not generate join message, no join info");const e=rr({},this.joinInfo.apResponse);let t=jc("REPORT_APP_SCENARIO");if("string"!=typeof t)try{t=ve(t)}catch(e){t=void 0}t&&t.length>128&&(t=void 0);const n={session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:kc,browser:navigator.userAgent,process_id:jc("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:e,extend:jc("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:t};return this.joinInfo.stringUid&&(n.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(n.aes_mode=this.joinInfo.aesmode,jc("ENCRYPT_AES")?(n.aes_secret=this.joinInfo.aespassword,n.aes_encrypt=!0):n.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(n.aes_salt=this.joinInfo.aessalt)),e.addresses[this.signal.websocket.currentURLIndex]&&(n.ap_response.ticket=e.addresses[this.signal.websocket.currentURLIndex].ticket,delete e.addresses),n}getRejoinMessage(){if(!this.joinInfo)throw new pl(ll.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(YA.WS_RECONNECTING,e=>{this.joinInfo&&ky.WebSocketQuit(this.joinInfo.sid,{lts:Ma(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||TA.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",ky.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode}),this.isSignalRecover=!1,this.joinGatewayStartTime=Ma())}),this.signal.on(YA.WS_CLOSED,e=>{let t;switch(e){case"LEAVE":t=TA.LEAVE;break;case"UID_BANNED":case"IP_BANNED":case"CHANNEL_BANNED":case"SERVER_ERROR":t=TA.SERVER_ERROR;break;default:t=TA.NETWORK_ERROR}Rc.debug("[signal] websocket closed, reason: ".concat(t||"undefined -> "+TA.NETWORK_ERROR)),this.joinInfo&&ky.WebSocketQuit(this.joinInfo.sid,{lts:Ma(),succ:"LEAVE"===e?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this.reset(),this._disconnectedReason=e,this.state="DISCONNECTED"}),this.signal.on(YA.WS_CONNECTED,()=>{var e,t,n;if((this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo)&&("audience"===this.role&&this._clientRoleOptions&&this._clientRoleOptions.level&&(Rc.debug(Je(e=Je(t=Je(n="[".concat(this.clientId,"] patch to send set client role, role: ")).call(n,this.role,", mode: ")).call(t,this.spec.mode,", level: ")).call(e,this._clientRoleOptions&&this._clientRoleOptions.level)),this.setClientRole(this.role,this._clientRoleOptions)),ky.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid}),this.joinInfo.useLocalAccessPoint)){const e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);var r;if(!e)return void Rc.error(Je(r="[".concat(this.clientId,"] set local access point after joined failed: ")).call(r,e));Vc("EVENT_REPORT_DOMAIN",e[1]),Vc("EVENT_REPORT_BACKUP_DOMAIN",e[1]),Vc("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}}),this.signal.on(ey.ON_UPLINK_STATS,e=>{this._statsCollector.updateUplinkStats(e)}),this.signal.on(YA.REQUEST_RECOVER,(e,t,n)=>{if(!this.joinInfo)return n(new pl(ll.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,Dp(this,gy.REQUEST_NEW_GATEWAY_LIST).then(t).catch(n)}),this.signal.on(YA.REQUEST_JOIN_INFO,e=>{e(this.getJoinMessage())}),this.signal.on(YA.REQUEST_REJOIN_INFO,e=>{e(this.getRejoinMessage())}),this.signal.on(YA.REPORT_JOIN_GATEWAY,(e,t)=>{this.joinInfo&&ky.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:e,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid})}),this.signal.on(YA.IS_P2P_DISCONNECTED,e=>{e(Bp(this,gy.IS_P2P_DISCONNECTED))}),this.signal.on(YA.DISCONNECT_P2P,()=>{this.needToSendUnpubUnsub=new xn,this.emit(gy.DISCONNECT_P2P)}),this.signal.on(YA.NEED_RENEW_SESSION,()=>{this.emit(gy.NEED_RENEW_SESSION)}),this.signal.on(YA.REQUEST_SUCCESS,()=>{this._signalTimeout=!1}),this.signal.on(YA.REQUEST_TIMEOUT,()=>{this._signalTimeout=!0})}}function lS(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}let uS=1;function dS(e,t,n,r,i){uS+=1;const o={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Ma()/1e3),seq:uS,requestId:uS,version:kc,cname:n.cname},s={service_name:t,json_body:ve(o)};let a,c,l=e[0];return Kd(async()=>{a=Ma();const e=await Wd(l,{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Ma()-a,0!==e.code){const t=new pl(ll.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:c});throw Rc.error(t.toString()),t}const n=JSON.parse(e.json_body);if(200!==n.code){var i;const e=new pl(ll.UNEXPECTED_RESPONSE,Je(i="live streaming app center error, code: ".concat(n.code,", reason: ")).call(i,n.reason),{code:n.code,responseTime:c});throw Rc.error(e.toString()),e}if(!n.servers||0===n.servers.length){const e=new pl(ll.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:n.code,responseTime:c});throw Rc.error(e.toString()),e}const o=function(e,t){var n;return{addressList:vo(n=e.servers).call(n,e=>{var n,r;return Je(n=Je(r="wss://".concat(e.address.replace(/\./g,"-"),".edge.agora.io:")).call(r,e.wss,"?serviceName=")).call(n,encodeURIComponent(t))}),workerToken:e.workerToken,vid:e.vid}}(n,t);return jc("LIVE_STREAMING_ADDRESS")&&(o.addressList=jc("LIVE_STREAMING_ADDRESS")instanceof Array?jc("LIVE_STREAMING_ADDRESS"):[jc("LIVE_STREAMING_ADDRESS")]),function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=lS(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=lS(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}({},o,{responseTime:c})},(r,i)=>(ky.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:ve(r.addressList),firstSuccess:0===i,responseTime:c,serverIp:e[i%e.length]}),!1),(r,i)=>(ky.apworkerEvent(n.sid,{success:!1,sc:r.data&&r.data.code||200,serviceName:t,responseTime:c,serverIp:e[i%e.length]}),!!(r.code!==ll.OPERATION_ABORTED&&r.code!==ll.UNEXPECTED_RESPONSE||r.data&&r.data.retry)&&(l=e[(i+1)%e.length],!0)),i)}function hS({url:e,areaCode:t},n,r,i){const o=Ma(),[s,a]=mS(n,t,[Ny.CHOOSE_SERVER]);let c=zd.networkState;return Kd(async()=>{c&&zd.networkState===by.OFFLINE&&zd.onlineWaiter&&await fo.race([zd.onlineWaiter,Ip(i&&i.maxRetryTimeout||Zd.maxRetryTimeout)]),c=zd.networkState;const t=await Wd(e,{data:s,cancelToken:r,headers:{"Content-Type":"multipart/form-data;"}},!0);fS(t,e,n,o,[Ny.CHOOSE_SERVER]);const a=rS(t,Ny.CHOOSE_SERVER);return gS(a),Jy(a,e)},t=>(t&&ky.joinChooseServer(n.sid,{lts:o,succ:!0,csAddr:e,opid:a,serverList:t.gatewayAddrs,ec:null,cid:t.cid.toString(),uid:t.uid.toString(),csIp:t.csIp,unilbsServerIds:[Ny.CHOOSE_SERVER].toString()}),!1),t=>t.code!==ll.OPERATION_ABORTED&&(t.code===ll.CAN_NOT_GET_GATEWAY_SERVER?t.data.retry:(ky.joinChooseServer(n.sid,{lts:o,succ:!1,csAddr:e,serverList:null,opid:a,ec:t.code,csIp:t.data&&t.data.csIp,unilbsServerIds:[Ny.CHOOSE_SERVER].toString(),extend:ve({networkState:c})}),Rc.warning("[".concat(n.clientId,"] Choose server network error, retry"),t),!0)),i)}function pS({url:e,areaCode:t,serviceIds:n},r,i,o){const s=Ma(),[a,c]=mS(r,t,n);let l=void 0;return Kd(async()=>{l&&zd.networkState===by.OFFLINE&&zd.onlineWaiter&&await fo.race([zd.onlineWaiter,Ip(o&&o.maxRetryTimeout||Zd.maxRetryTimeout)]),l=zd.networkState;const t=await Wd(e,{data:a,cancelToken:i,headers:{"Content-Type":"multipart/form-data;"}},!0);fS(t,e,r,s,n);const c=rS(t,Ny.CHOOSE_SERVER),u=rS(t,"proxy5"===r.cloudProxyServer?Ny.CLOUD_PROXY_5:Ny.CLOUD_PROXY);return gS(c),{gatewayInfo:Jy(c,e),proxyInfo:u,url:e}},t=>{var i;return t.gatewayInfo&&ky.joinChooseServer(r.sid,{lts:s,succ:!0,csAddr:e,serverList:t.gatewayInfo.gatewayAddrs,ec:null,opid:c,cid:t.gatewayInfo.cid.toString(),uid:t.gatewayInfo.uid.toString(),csIp:t.gatewayInfo.csIp,unilbsServerIds:n.toString()}),t.proxyInfo&&ky.joinWebProxyAP(r.sid,{lts:s,sucess:1,apServerAddr:e,turnServerAddrList:vo(i=t.proxyInfo.addresses).call(i,e=>e.ip).join(","),errorCode:null,eventType:r.cloudProxyServer,unilbsServerIds:n.toString()}),!1},t=>t.code!==ll.OPERATION_ABORTED&&(t.code===ll.CAN_NOT_GET_GATEWAY_SERVER?t.data.retry:(ky.joinWebProxyAP(r.sid,{lts:s,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:r.cloudProxyServer,unilbsServerIds:n.toString(),extend:ve({networkState:l})}),Rc.warning("[".concat(r.clientId,"] multi unilbs network error, retry"),t),!0)),o)}const fS=(e,t,n,r,i)=>{var o,s,a;const c=[];if(Xn(o=e.response_body).call(o,o=>{const s=o.buffer.code;if(0!==s){const a=ef(s),l={error:new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,a.desc,{retry:a.retry,csIp:e.detail[502]}),flag:o.buffer.flag};c.push(l),4096===l.flag?ky.joinChooseServer(n.sid,{lts:r,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:l.error.message,csIp:l.error.data&&l.error.data.csIp,unilbsServerIds:i.toString()}):1048576!==l.flag&&4194304!==l.flag||ky.joinWebProxyAP(n.sid,{lts:r,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:l.error.code,eventType:n.cloudProxyServer,unilbsServerIds:i.toString()})}}),c.length)throw Rc.warning(Je(s=Je(a="[".concat(n.clientId,"] multi unilbs ")).call(a,t," failed, ")).call(s,vo(c).call(c,e=>{var t,n;return Je(t=Je(n="flag: ".concat(e.flag,", message: ")).call(n,e.error.message,", retry: ")).call(t,e.error.data.retry)}).join(" | "))),new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,vo(c).call(c,e=>{var t;return Je(t="flag: ".concat(e.flag,", message: ")).call(t,e.error.message)}).join(" | "),{retry:!!Qo(c).call(c,e=>e.error.data.retry),csIp:e.detail[502]})},gS=e=>{if(e.addresses&&0===e.addresses.length&&0===e.code)throw new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(jc("GATEWAY_ADDRESS")&&jc("GATEWAY_ADDRESS").length>0){var t;Rc.debug("assign gateway address to",jc("GATEWAY_ADDRESS"));const n=vo(t=jc("GATEWAY_ADDRESS")).call(t,t=>({ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket}));e.addresses=n}},mS=(e,t,n)=>{var r;const i=Math.floor(Math.random()*10**12),o={appid:e.appId,client_ts:Ma(),opid:i,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:{6:e.stringUid,11:t},key:e.token,service_ids:n,uid:e.uid||0}}]};Xn(r=o.request_bodies).call(r,t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=ve({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))});const s=new FormData;return s.append("request",ve(o)),[s,i]};async function _S(e,t,n){const r=async function(e,t,n){var r,i;const o=vo(r=Uo(i=jc("WEBCS_DOMAIN")).call(i,0,jc("AJAX_REQUEST_CONCURRENT"))).call(r,t=>{var n;return{url:e.proxyServer?Je(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:g_()}});let s=null;const a=[],c=async()=>await Zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:r=>(Rc.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),hS(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:a}),l=async()=>{var r;if(await Ip(1e3),null!==s)return s;const i=vo(r=jc("WEBCS_DOMAIN_BACKUP_LIST")).call(r,t=>{var n;return{url:e.proxyServer?Je(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:g_()}});return await Zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(Rc.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),hS(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:a})};return s=await Pp([c(),l()]),a.length&&Xn(a).call(a,e=>e.cancel&&"function"==typeof e.cancel&&e.cancel()),s}(e,t,n);return{gatewayInfo:await r}}async function vS(e,t,n,r){var i,o;if("disabled"===e.cloudProxyServer)return r?await _S(e,t,n):void 0;let s;if("443only"===e.cloudProxyServer||"normal"===e.cloudProxyServer){var a;let i;r?"normal"!==e.cloudProxyServer?[i,s]=await fo.all([AS(e,t,n),_S(e,t,n)]):(i=await AS(e,t,n),e.proxyServer=i.addresses[0],ky.setProxyServer(e.proxyServer),Rc.setProxyServer(e.proxyServer),s=await _S(e,t,n)):(s=void 0,"normal"!==e.cloudProxyServer?i=await AS(e,t,n):(i=await AS(e,t,n),e.proxyServer=i.addresses[0],ky.setProxyServer(e.proxyServer),Rc.setProxyServer(e.proxyServer))),e.turnServer={mode:"manual",servers:vo(a=i.addresses).call(a,t=>({turnServerURL:t,tcpport:"proxy3"===e.cloudProxyServer?void 0:i.serverResponse.tcpport?i.serverResponse.tcpport:Nc.tcpport,udpport:"proxy4"===e.cloudProxyServer?void 0:i.serverResponse.udpport?i.serverResponse.udpport:Nc.udpport,username:i.serverResponse.username||Nc.username,password:i.serverResponse.password||Nc.password,forceturn:"proxy4"!==e.cloudProxyServer&&"proxy5"!==e.cloudProxyServer,security:"proxy5"===e.cloudProxyServer}))}}else{const{proxyInfo:r,gatewayInfo:i}=await async function(e,t,n){var r,i;const o=jc("PROXY_SERVER_TYPE3"),s=(e,t)=>{var n;let r=o;return hl(r)&&(r=t%2==0?o[1]:o[0]),Je(n="https://".concat(r,"/ap/?url=")).call(n,e)},a=vo(r=Uo(i=jc("WEBCS_DOMAIN")).call(i,0,jc("AJAX_REQUEST_CONCURRENT"))).call(r,(t,n)=>({url:s("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),areaCode:g_(),serviceIds:[Ny.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?Ny.CLOUD_PROXY_5:Ny.CLOUD_PROXY]}));let c=null;const l=[],u=async()=>await Zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:a,asyncMapHandler:r=>(Rc.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),pS(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:l}),d=async()=>{var r;if(await Ip(1e3),null!==c)return c;const i=vo(r=jc("WEBCS_DOMAIN_BACKUP_LIST")).call(r,(e,t)=>({url:s("".concat(e,"/api/v2/transpond/webrtc?v=2"),t),areaCode:g_(),serviceIds:[11,18]}));return await Zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:i,asyncMapHandler:r=>(Rc.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),pS(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:l})},{gatewayInfo:h,proxyInfo:p,url:f}=await Pp([u(),d()]);if(l.length&&Xn(l).call(l,e=>e.cancel&&"function"==typeof e.cancel&&e.cancel()),!h||!p)throw new pl(ll.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(hl(o)&&f){const t=new r_(f).host;rs(o).call(o,t)&&(e.proxyServer=t,Rc.setProxyServer(t),ky.setProxyServer(t))}return c={gatewayInfo:h,proxyInfo:iS(p)},c}(e,t,n);s={gatewayInfo:i},e.turnServer={mode:"manual",servers:vo(r).call(r,t=>({turnServerURL:t.address,tcpport:"proxy3"===e.cloudProxyServer?void 0:t.tcpport?t.tcpport:Nc.tcpport,udpport:"proxy4"===e.cloudProxyServer?void 0:t.udpport?t.udpport:Nc.udpport,username:t.username||Nc.username,password:t.password||Nc.password,forceturn:"proxy4"!==e.cloudProxyServer&&"proxy5"!==e.cloudProxyServer,security:"proxy5"===e.cloudProxyServer}))}}return Rc.debug(Je(i=Je(o="[".concat(e.clientId,"] set proxy server: ")).call(o,e.proxyServer,", mode: ")).call(i,e.cloudProxyServer)),s}async function ES(e,t,n,r){var i;const o=Uo(i=jc("ACCOUNT_REGISTER")).call(i,0,jc("AJAX_REQUEST_CONCURRENT"));let s=[];return s=t.proxyServer?vo(o).call(o,e=>{var n;return Je(n="https://".concat(t.proxyServer,"/ap/?url=")).call(n,e+"/api/v1")}):vo(o).call(o,e=>"https://".concat(e,"/api/v1")),(await async function(e,t,n,r,i){const o=Ma(),s={sid:n.sid,opid:10,appid:n.appId,string_uid:t};let a=e[0];const c=await Kd(()=>Wd(a+"".concat(-1===Lo(a).call(a,"?")?"?":"&","action=stringuid"),{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}}),(n,r)=>{if(0===n.code){var i;if(n.uid<=0||n.uid>=Math.pow(2,32))throw Rc.error(Je(i="Invalid Uint Uid ".concat(t," => ")).call(i,n.uid),n),ky.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:ll.INVALID_UINT_UID_FROM_STRING_UID,extend:s}),new pl(ll.INVALID_UINT_UID_FROM_STRING_UID);return ky.reqUserAccount(s.sid,{lts:o,success:!0,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:null,extend:s}),!1}const c=ef(n.code);return c.retry&&(a=e[(r+1)%e.length]),ky.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:n.uid,errorCode:c.desc,extend:s}),c.retry},(t,n)=>t.code!==ll.OPERATION_ABORTED&&(ky.reqUserAccount(s.sid,{lts:o,success:!1,serverAddr:a,stringUid:s.string_uid,uid:null,errorCode:t.code,extend:s}),a=e[(n+1)%e.length],!0),i);if(0!==c.code){const e=ef(c.code);throw new pl(ll.UNEXPECTED_RESPONSE,e.desc)}return c}(s,e,t,n,r)).uid}async function AS(e,t,n){var r,i;let o=Ma();const s=vo(r=jc("normal"===e.cloudProxyServer?"PROXY_CS":"WEBCS_DOMAIN")).call(r,t=>{var n;return e.proxyServer?Je(n="https://".concat(e.proxyServer,"/ap/?url=")).call(n,t+"/api/v1"):"https://".concat(t,"/api/v1")});if("proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer||"proxy5"===e.cloudProxyServer){const r=vo(s).call(s,e=>({url:e,areaCode:g_()}));let i=null;i=await Zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:r,asyncMapHandler:r=>function({url:e,areaCode:t},n,r,i){const o=Ma(),s={opid:133,flag:"proxy5"===n.cloudProxyServer?4194304:1048576,ts:+new Date,key:n.token,cname:n.cname,sid:n.sid,detail:{6:n.stringUid,11:t},uid:n.uid||0};return Kd(async()=>await Wd(e,{data:s,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":69}}),t=>{var r;if(0===t.code)return ky.joinWebProxyAP(n.sid,{lts:o,sucess:1,apServerAddr:e,turnServerAddrList:vo(r=t.addresses).call(r,e=>e.ip).join(","),errorCode:null,eventType:n.cloudProxyServer}),!1;const i=ef(t.code);throw new pl(ll.CAN_NOT_GET_GATEWAY_SERVER,i.desc,{retry:i.retry})},t=>{return t.code!==ll.OPERATION_ABORTED&&(t.code===ll.CAN_NOT_GET_GATEWAY_SERVER?(ky.joinWebProxyAP(s.sid,{lts:o,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:n.cloudProxyServer}),Rc.warning(Je(r=Je(i=Je(a="[".concat(n.clientId,"] proxy ap server ")).call(a,e," failed, message: ")).call(i,t.message,", retry: ")).call(r,t.data.retry)),t.data.retry):(ky.joinWebProxyAP(s.sid,{lts:o,sucess:0,apServerAddr:e,turnServerAddrList:null,errorCode:t.code,eventType:n.cloudProxyServer}),!0));var r,i,a},i)}(r,e,t,n),allFailedhandler:()=>{throw Rc.error("[".concat(e.clientId,"] can not get proxy server after trying several times")),new pl(ll.CAN_NOT_GET_PROXY_SERVER)}});const o=i.addresses;if(!o||0===o.length)throw Rc.error("[".concat(e.clientId,"] can not get proxy server, empty proxy server list")),new pl(ll.CAN_NOT_GET_PROXY_SERVER,"empty proxy server list");return{addresses:vo(o).call(o,e=>e.ip),serverResponse:{tcpport:o[0].port||443,udpport:o[0].port||Nc.udpport,username:Nc.username,password:Nc.password}}}let a=null;a=await Zp({fragementLength:jc("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:r=>function(e,t,n,r){const i=Ma(),o={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,uid:t.uid,cname:t.cname,ts:Math.floor(Ma()/1e3),version:kc,seq:0,requestId:1};return Kd(async()=>({res:await Wd(e,{data:{service_name:"webrtc_proxy",json_body:ve(o)},cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}}),url:e}),e=>{if(!e.res.json_body)throw Rc.debug("[".concat(t.clientId,"] Get proxy server failed: no json_body")),new pl(ll.UNEXPECTED_RESPONSE,ve(e.res));const n=JSON.parse(e.res.json_body);var r,i;if(200!==n.code)throw Rc.debug(Je(r=Je(i="[".concat(t.clientId,"] Get proxy server failed: response code [")).call(i,n.code,"], reason [")).call(r,n.reason,"]")),new pl(ll.UNEXPECTED_RESPONSE,ve(e.res));return Rc.debug("[".concat(t.clientId,"] App return server length"),n.servers.length),!1},t=>t.code!==ll.OPERATION_ABORTED&&(ky.requestProxyAppCenter(o.sid,{lts:i,succ:!1,APAddr:e,workerManagerList:null,ec:t.code,response:t.message}),!0),r)}(r,e,t,n),allFailedhandler:()=>{throw Rc.error("[".concat(e.clientId,"] can not get proxy server after trying several times")),new pl(ll.CAN_NOT_GET_PROXY_SERVER)}});const c=JSON.parse(a.res.json_body),l=vo(i=c.servers).call(i,Yy);if("443only"===e.cloudProxyServer)return{addresses:l,serverResponse:{tcpport:443,udpport:Nc.udpport,username:Nc.username,password:Nc.password}};ky.requestProxyAppCenter(e.sid,{lts:o,succ:!0,APAddr:a.url,workerManagerList:ve(l),ec:null,response:ve(a.res)}),o=Ma();const u=vo(l).call(l,r=>function(e,t,n,r){const i=Ma();let o=e;Is(e).call(e,"http")||(o="https://".concat(e,":4000/v2/machine"));const s={command:"request",gatewayType:"http",appId:t.appId,cname:t.cname,uid:(t.uid||"").toString(),sdkVersion:"2.3.1",sid:t.sid,seq:1,ts:Ma(),requestId:3,clientRequest:{appId:t.appId,cname:t.cname,uid:(t.uid||"").toString(),sid:t.sid}};return Kd(async()=>({res:await Wd(o,{data:s,cancelToken:n}),url:e}),e=>{if(!e.res.serverResponse)throw new pl(ll.UNEXPECTED_RESPONSE,"requeet worker manager server failed: serverResponse is undefined");return!1},t=>t.code!==ll.OPERATION_ABORTED&&(ky.requestProxyWorkerManager(s.sid,{lts:i,succ:!1,workerManagerAddr:e,ec:t.code,response:t.message}),!0),r)}(r,e,t,n));let d=null;try{d=await Pp(u)}catch(t){throw Rc.error("[".concat(e.clientId,"] can not get worker manager after trying several times")),new pl(ll.CAN_NOT_GET_PROXY_SERVER)}return Xn(u).call(u,e=>e.cancel()),ky.requestProxyWorkerManager(e.sid,{lts:o,succ:!0,workerManagerAddr:d.url,ec:null,response:ve(d.res)}),{addresses:[d.url],serverResponse:d.res.serverResponse}}async function yS(e,t,n,r){var i,o;const s=vo(i=Uo(o=jc("UAP_AP")).call(o,0,jc("AJAX_REQUEST_CONCURRENT"))).call(i,e=>{var n;return t.proxyServer?Je(n="https://".concat(t.proxyServer,"/ap/?url=")).call(n,e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")});return await dS(s,e,t,n,r)}Q({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var SS=M.Number.isNaN,bS=zv;Q({target:"Object",stat:!0,sham:!a},{create:qt});var CS=M.Object,TS=function(e,t){return CS.create(e,t)};Q({target:"Object",stat:!0},{setPrototypeOf:cn});var IS=M.Object.setPrototypeOf,RS=r((function(e,t){!function(e){function t(e){if(hl(e))return vo(e).call(e,(function(e){return e}));if(!n(e))return e;var r={};for(var i in e)n(e[i])||hl(e[i])?r[i]=t(e[i]):r[i]=e[i];return r}function n(e){return!("object"!=typeof e||hl(e)||!e)}function r(){var e=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i);return e&&e[0]?Number(e[0].split("/")[1]):null}function i(e){return!!window.RTCStatsReport&&e.getStats()instanceof fo}var o=function(){function e(e){this.input=[],this.size=e}return e.prototype.add=function(e){var t;this.input.push(e),this.input.length>this.size&&To(t=this.input).call(t,0,1)},e.prototype.diffMean=function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length},e}(),s=function(e,t){return(s=IS||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};
/*! *****************************************************************************
	    Copyright (c) Microsoft Corporation. All rights reserved.
	    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	    this file except in compliance with the License. You may obtain a copy of the
	    License at http://www.apache.org/licenses/LICENSE-2.0
	       THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	    MERCHANTABLITY OR NON-INFRINGEMENT.
	       See the Apache Version 2.0 License for specific language governing permissions
	    and limitations under the License.
	    ***************************************************************************** */function a(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?TS(t):(n.prototype=t.prototype,new n)}var c=function(){return(c=rr||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function l(e,t,n,r){return new(n||(n=fo))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof iA&&(o[bS]=function(){return this}),o;function a(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var d,h={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[]},p={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0},f={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},g={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},m={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0},_=function(){function e(e,n){var r=this;this.videoIsReady=!1,this.stats=t(h),this.isFirstVideoReceived=!1,this.isFirstVideoDecoded=!1,this.isFirstAudioReceived=!1,this.isFirstAudioDecoded=!1,this.lossRateWindowStats=[],this.pc=e,this.options=n,this.intervalTimer=window.setInterval((function(){return l(r,void 0,void 0,(function(){return u(this,(function(e){return this.updateStats(),[2]}))}))}),this.options.updateInterval)}return e.prototype.getStats=function(){return this.stats},e.prototype.setVideoIsReady=function(e){this.videoIsReady=e},e.prototype.setIsFirstAudioDecoded=function(e){this.isFirstAudioDecoded=e},e.prototype.destroy=function(){window.clearInterval(this.intervalTimer),this.pc=void 0},e.prototype.calcLossRate=function(e){var t,n=this;this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&To(t=this.lossRateWindowStats).call(t,0,1);for(var r=this.lossRateWindowStats.length,i=0,o=0,s=0,a=0,c=function(t){var c;Xn(c=e[t]).call(c,(function(e,c){if(n.lossRateWindowStats[r-1][t][c]&&n.lossRateWindowStats[0][t][c]){var l=n.lossRateWindowStats[r-1][t][c].packets-n.lossRateWindowStats[0][t][c].packets,u=n.lossRateWindowStats[r-1][t][c].packetsLost-n.lossRateWindowStats[0][t][c].packetsLost;"videoSend"===t||"audioSend"===t?(i+=l,s+=u):(o+=l,a+=u),SS(l)||SS(l)?e.packetLostRate=0:e.packetLostRate=l<=0||u<=0?0:u/(l+u)}}))},l=0,u=["videoSend","audioSend","videoRecv","audioRecv"];l<u.length;l++)c(u[l]);e.sendPacketLossRate=i<=0||s<=0?0:s/(i+s),e.recvPacketLossRate=o<=0||a<=0?0:a/(o+a)},e}(),v=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._stats=h,t.lastDecodeVideoReceiverStats=new xn,t}return a(n,e),n.prototype.updateStats=function(){return l(this,void 0,void 0,(function(){var e,n,r,i;return u(this,(function(o){switch(o.label){case 0:return[4,this._getStats()];case 1:return e=o.sent(),n=this.statsResponsesToObjects(e),this._stats=t(h),r=Gr(n).call(n,(function(e){return"ssrc"===e.type})),this.processSSRCStats(r),(i=Qo(n).call(n,(function(e){return"VideoBwe"===e.type})))&&this.processBandwidthStats(i),this._stats.timestamp=Ma(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}}))}))},n.prototype.processBandwidthStats=function(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)},n.prototype.processSSRCStats=function(e){var n=this;Xn(e).call(e,(function(e){var r,i=rs(r=e.id).call(r,"send");switch(e.mediaType+"_"+(i?"send":"recv")){case"video_send":var o=t(f);o.codec=e.googCodecName,o.adaptionChangeReason="none",e.googCpuLimitedResolution&&(o.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(o.adaptionChangeReason="bandwidth"),o.avgEncodeMs=Number(e.googAvgEncodeMs),o.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},o.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},o.firsCount=Number(e.googFirReceived),o.nacksCount=Number(e.googNacksReceived),o.plisCount=Number(e.googPlisReceived),o.frameCount=Number(e.framesEncoded),o.bytes=Number(e.bytesSent),o.packets=Number(e.packetsSent),o.packetsLost=Number(e.packetsLost),o.ssrc=Number(e.ssrc),o.rttMs=Number(e.googRtt||0),n._stats.videoSend.push(o),n._stats.rtt=o.rttMs;break;case"video_recv":var s=t(p),a=n.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(s.codec=e.googCodecName,s.targetDelayMs=Number(e.googTargetDelayMs),s.renderDelayMs=Number(e.googRenderDelayMs),s.currentDelayMs=Number(e.googCurrentDelayMs),s.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),s.decodeMs=Number(e.googDecodeMs),s.maxDecodeMs=Number(e.googMaxDecodeMs),s.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},s.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},s.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},s.jitterBufferMs=Number(e.googJitterBufferMs),s.firsCount=Number(e.googFirsSent),s.nacksCount=Number(e.googNacksSent),s.plisCount=Number(e.googPlisSent),s.framesDecodeCount=Number(e.framesDecoded),s.bytes=Number(e.bytesReceived),s.packets=Number(e.packetsReceived),s.packetsLost=Number(e.packetsLost),s.ssrc=Number(e.ssrc),s.packets>0&&!n.isFirstVideoReceived&&(n.onFirstVideoReceived&&n.onFirstVideoReceived(),n.isFirstVideoReceived=!0),s.framesDecodeCount>0&&!n.isFirstVideoDecoded&&(n.onFirstVideoDecoded&&n.onFirstVideoDecoded(s.decodedFrame.width,s.decodedFrame.height),n.isFirstVideoDecoded=!0),a){var l=a.stats,u=Ma()-a.lts;s.framesDecodeFreezeTime=l.framesDecodeFreezeTime,s.framesDecodeInterval=l.framesDecodeInterval,s.framesDecodeCount>l.framesDecodeCount&&n.isFirstVideoDecoded?(a.lts=Ma(),s.framesDecodeInterval=u,s.framesDecodeInterval>=n.options.freezeRateLimit&&(n.videoIsReady?s.framesDecodeFreezeTime+=s.framesDecodeInterval:n.setVideoIsReady(!0))):s.framesDecodeCount<a.stats.framesDecodeCount&&(s.framesDecodeInterval=0)}n.lastDecodeVideoReceiverStats.set(s.ssrc,{stats:c({},s),lts:Ma()}),n._stats.videoRecv.push(s);break;case"audio_recv":var d=t(m);d.codec=e.googCodecName,d.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,d.decodingCNG=Number(e.googDecodingCNG),d.decodingCTN=Number(e.googDecodingCTN),d.decodingCTSG=Number(e.googDecodingCTSG),d.decodingNormal=Number(e.googDecodingNormal),d.decodingPLC=Number(e.googDecodingPLC),d.decodingPLCCNG=Number(e.googDecodingPLCCNG),d.expandRate=Number(e.googExpandRate),d.accelerateRate=Number(e.googAccelerateRate),d.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),d.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),d.speechExpandRate=Number(e.googSpeechExpandRate),d.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),d.jitterBufferMs=Number(e.googJitterBufferMs),d.jitterMs=Number(e.googJitterReceived),d.bytes=Number(e.bytesReceived),d.packets=Number(e.packetsReceived),d.packetsLost=Number(e.packetsLost),d.ssrc=Number(e.ssrc),d.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),d.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),d.receivedFrames>0&&!n.isFirstAudioReceived&&(n.onFirstAudioReceived&&n.onFirstAudioReceived(),n.isFirstAudioReceived=!0),d.decodingNormal>0&&!n.isFirstAudioDecoded&&(n.onFirstAudioDecoded&&n.onFirstAudioDecoded(),n.isFirstAudioDecoded=!0),n._stats.audioRecv.push(d);break;case"audio_send":var h=t(g);h.codec=e.googCodecName,h.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,h.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),h.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),h.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),h.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),h.bytes=Number(e.bytesSent),h.packets=Number(e.packetsSent),h.packetsLost=Number(e.packetsLost),h.ssrc=Number(e.ssrc),h.rttMs=Number(e.googRtt||0),n._stats.rtt=h.rttMs,n._stats.audioSend.push(h)}}))},n.prototype._getStats=function(){var e=this;return new fo((function(t,n){e.pc.getStats(t,n)}))},n.prototype.statsResponsesToObjects=function(e){var t=[],n=e.result();return Xn(n).call(n,(function(e){var n,r={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};Xn(n=e.names()).call(n,(function(t){r[t]=e.stat(t)})),t.push(r)})),t},n}(_);!function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(d||(d={}));var E=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._stats=h,t.lastDecodeVideoReceiverStats=new xn,t.lastVideoFramesRecv=new xn,t.lastVideoFramesSent=new xn,t.lastVideoFramesDecode=new xn,t.lastVideoJBDelay=new xn,t.lastAudioJBDelay=new xn,t.mediaBytesSent=new xn,t.mediaBytesRetransmit=new xn,t.mediaBytesTargetEncode=new xn,t.lastEncoderMs=new xn,t}return a(n,e),n.prototype.updateStats=function(){return l(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){var i;switch(r.label){case 0:return e=this,[4,this.pc.getStats()];case 1:return e.report=r.sent(),this._stats=t(h),Xn(i=this.report).call(i,(function(e){switch(e.type){case d.OUTBOUND:"audio"===e.mediaType?n.processAudioOutboundStats(e):"video"===e.mediaType&&n.processVideoOutboundStats(e);break;case d.INBOUND:"audio"===e.mediaType?n.processAudioInboundStats(e):"video"===e.mediaType&&n.processVideoInboundStats(e);break;case d.TRANSPORT:var t=n.report.get(e.selectedCandidatePairId);t&&n.processCandidatePairStats(t);break;case d.CANDIDATE_PAIR:e.selected&&n.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Ma(),this.calcLossRate(this._stats),this.stats=this._stats,[2]}}))}))},n.prototype.processCandidatePairStats=function(e){var t,n;this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),Xn(t=this._stats.videoSend).call(t,(function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),Xn(n=this._stats.audioSend).call(n,(function(t){!t.rttMs&&e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)}))},n.prototype.processAudioInboundStats=function(e){var n,r=Qo(n=this._stats.audioRecv).call(n,(function(t){return t.ssrc===e.ssrc}));r||(r=t(m),this._stats.audioRecv.push(r)),r.ssrc=e.ssrc,r.packets=e.packetsReceived,r.packetsLost=e.packetsLost,r.bytes=e.bytesReceived,r.jitterMs=1e3*e.jitter,e.trackId&&this.processAudioTrackReceiverStats(e.trackId,r),e.codecId&&(r.codec=this.getCodecFromCodecStats(e.codecId)),r.receivedFrames||(r.receivedFrames=e.packetsReceived),r.droppedFrames||(r.droppedFrames=e.packetsLost),r.receivedFrames>0&&!this.isFirstAudioReceived&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(),this.isFirstAudioReceived=!0),r.outputLevel&&r.outputLevel>0&&!this.isFirstAudioDecoded&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(),this.isFirstAudioDecoded=!0)},n.prototype.processVideoInboundStats=function(e){var n,r=Qo(n=this._stats.videoRecv).call(n,(function(t){return t.ssrc===e.ssrc}));r||(r=t(p),this._stats.videoRecv.push(r)),r.ssrc=e.ssrc,r.packets=e.packetsReceived,r.packetsLost=e.packetsLost,r.bytes=e.bytesReceived,r.firsCount=e.firCount,r.nacksCount=e.nackCount,r.plisCount=e.pliCount,r.framesDecodeCount=e.framesDecoded;var i=this.lastDecodeVideoReceiverStats.get(r.ssrc),o=this.lastVideoFramesDecode.get(r.ssrc),s=Ma();if(r.framesDecodeCount>0&&!this.isFirstVideoDecoded){var a=r.decodedFrame?r.decodedFrame.width:0,l=r.decodedFrame?r.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(a,l),this.isFirstVideoDecoded=!0}if(i){var u=i.stats,d=s-i.lts;r.framesDecodeFreezeTime=u.framesDecodeFreezeTime,r.framesDecodeInterval=u.framesDecodeInterval,r.framesDecodeCount>u.framesDecodeCount&&this.isFirstVideoDecoded?(i.lts=Ma(),r.framesDecodeInterval=d,r.framesDecodeInterval>=this.options.freezeRateLimit&&(this.videoIsReady?r.framesDecodeFreezeTime+=r.framesDecodeInterval:this.setVideoIsReady(!0))):r.framesDecodeCount<u.framesDecodeCount&&(r.framesDecodeInterval=0)}o&&s-o.lts>=800?(r.decodeFrameRate=Math.round((r.framesDecodeCount-o.count)/((s-o.lts)/1e3)),this.lastVideoFramesDecode.set(r.ssrc,{count:r.framesDecodeCount,lts:s,rate:r.decodeFrameRate})):o?r.decodeFrameRate=o.rate:this.lastVideoFramesDecode.set(r.ssrc,{count:r.framesDecodeCount,lts:s,rate:0}),e.totalDecodeTime&&(r.decodeMs=1e3*e.totalDecodeTime),e.trackId&&this.processVideoTrackReceiverStats(e.trackId,r),e.codecId&&(r.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(r.framesRateFirefox=e.framerateMean),r.packets>0&&!this.isFirstVideoReceived&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(),this.isFirstVideoReceived=!0),this.lastDecodeVideoReceiverStats.set(r.ssrc,{stats:c({},r),lts:i?i.lts:Ma()})},n.prototype.processVideoOutboundStats=function(e){var n,r=Qo(n=this._stats.videoSend).call(n,(function(t){return t.ssrc===e.ssrc}));r||(r=t(f),this._stats.videoSend.push(r));var i=this.mediaBytesSent.get(e.ssrc);if(i?i.add(e.bytesSent):((a=new o(10)).add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,a)),void 0!==e.retransmittedBytesSent){var s=this.mediaBytesRetransmit.get(e.ssrc);s?s.add(e.retransmittedBytesSent):((a=new o(10)).add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,a))}if(e.totalEncodedBytesTarget){var a,c=this.mediaBytesTargetEncode.get(e.ssrc);c?c.add(e.totalEncodedBytesTarget):((a=new o(10)).add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,a))}if(r.ssrc=e.ssrc,r.bytes=e.bytesSent,r.packets=e.packetsSent,r.firsCount=e.firCount,r.nacksCount=e.nackCount,r.plisCount=e.pliCount,r.frameCount=e.framesEncoded,r.adaptionChangeReason=e.qualityLimitationReason,e.totalEncodeTime&&e.framesEncoded){var l=this.lastEncoderMs.get(e.ssrc);if(!l||l.lastFrameCount>e.framesEncoded)r.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{var u=e.framesEncoded-l.lastFrameCount,h=e.totalEncodeTime-l.lastEncoderTime;r.avgEncodeMs=1e3*h/u}this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lts:Ma()})}if(e.codecId&&(r.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,r),e.trackId&&this.processVideoTrackSenderStats(e.trackId,r),e.remoteId)this.processRemoteInboundStats(e.remoteId,r);else{var p=this.findRemoteStatsId(e.ssrc,d.REMOTE_INBOUND);p&&this.processRemoteInboundStats(p,r)}},n.prototype.processAudioOutboundStats=function(e){var n,r=Qo(n=this._stats.audioSend).call(n,(function(t){return t.ssrc===e.ssrc}));if(r||(r=t(g),this._stats.audioSend.push(r)),r.ssrc=e.ssrc,r.packets=e.packetsSent,r.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,r),e.codecId&&(r.codec=this.getCodecFromCodecStats(e.codecId)),e.trackId&&this.processAudioTrackSenderStats(e.trackId,r),e.remoteId)this.processRemoteInboundStats(e.remoteId,r);else{var i=this.findRemoteStatsId(e.ssrc,d.REMOTE_INBOUND);i&&this.processRemoteInboundStats(i,r)}},n.prototype.findRemoteStatsId=function(e,t){var n,r,i=Qo(n=Bd(Jp(r=this.report).call(r))).call(n,(function(n){return n.type===t&&n.ssrc===e}));return i?i.id:null},n.prototype.processVideoMediaSource=function(e,t){var n=this.report.get(e);n&&n.width&&n.height&&n.framesPerSecond&&(t.inputFrame={width:n.width,height:n.height,frameRate:n.framesPerSecond})},n.prototype.processAudioMediaSource=function(e,t){var n=this.report.get(e);n&&(t.inputLevel=n.audioLevel)},n.prototype.processVideoTrackSenderStats=function(e,t){var n=this.report.get(e);if(n){var r=0,i=Ma(),o=this.lastVideoFramesSent.get(t.ssrc);o&&i-o.lts>=800?(r=Math.round((n.framesSent-o.count)/((i-o.lts)/1e3)),this.lastVideoFramesSent.set(t.ssrc,{count:n.framesSent,lts:i,rate:r})):o?r=o.rate:this.lastVideoFramesSent.set(t.ssrc,{count:n.framesSent,lts:i,rate:0}),t.sentFrame={width:n.frameWidth,height:n.frameHeight,frameRate:r}}},n.prototype.processVideoTrackReceiverStats=function(e,t){var n=this.report.get(e);if(n){var r=this.lastVideoFramesRecv.get(t.ssrc),i=Ma();t.framesReceivedCount=n.framesReceived;var o=0;if(r&&i-r.lts>=800?(o=Math.round((n.framesReceived-r.count)/((i-r.lts)/1e3)),this.lastVideoFramesRecv.set(t.ssrc,{count:n.framesReceived,lts:i,rate:o})):r?o=r.rate:this.lastVideoFramesRecv.set(t.ssrc,{count:n.framesReceived,lts:i,rate:0}),t.receivedFrame={width:n.frameWidth||0,height:n.frameHeight||0,frameRate:o||0},t.decodedFrame={width:n.frameWidth||0,height:n.frameHeight||0,frameRate:t.decodeFrameRate||0},t.outputFrame={width:n.frameWidth||0,height:n.frameHeight||0,frameRate:t.decodeFrameRate||0},n.jitterBufferDelay&&n.jitterBufferEmittedCount){var s=this.lastVideoJBDelay.get(t.ssrc);this.lastVideoJBDelay.set(t.ssrc,{jitterBufferDelay:n.jitterBufferDelay,jitterBufferEmittedCount:n.jitterBufferEmittedCount}),s||(s={jitterBufferDelay:0,jitterBufferEmittedCount:0});var a=1e3*(n.jitterBufferDelay-s.jitterBufferDelay)/(n.jitterBufferEmittedCount-s.jitterBufferEmittedCount);t.jitterBufferMs=a,t.currentDelayMs=Math.round(a)}}},n.prototype.processAudioTrackSenderStats=function(e,t){var n=this.report.get(e);n&&(t.aecReturnLoss=n.echoReturnLoss||0,t.aecReturnLossEnhancement=n.echoReturnLossEnhancement||0)},n.prototype.processAudioTrackReceiverStats=function(e,t){var n=this.report.get(e);if(n){if(n.removedSamplesForAcceleration&&n.totalSamplesReceived&&(t.accelerateRate=n.removedSamplesForAcceleration/n.totalSamplesReceived),n.jitterBufferDelay&&n.jitterBufferEmittedCount){var r=this.lastAudioJBDelay.get(t.ssrc);this.lastAudioJBDelay.set(t.ssrc,{jitterBufferDelay:n.jitterBufferDelay,jitterBufferEmittedCount:n.jitterBufferEmittedCount}),r||(r={jitterBufferDelay:0,jitterBufferEmittedCount:0});var i=1e3*(n.jitterBufferDelay-r.jitterBufferDelay)/(n.jitterBufferEmittedCount-r.jitterBufferEmittedCount);t.jitterBufferMs=Math.round(i)}t.outputLevel=n.audioLevel;var o=1920;n.totalSamplesDuration&&n.totalSamplesReceived&&(o=n.totalSamplesReceived/n.totalSamplesDuration/50,t.receivedFrames=Math.round(n.totalSamplesReceived/o)),n.concealedSamples&&(t.droppedFrames=Math.round(n.concealedSamples/o))}},n.prototype.processRemoteInboundStats=function(e,t){var n=this.report.get(e);n&&(t.packetsLost=n.packetsLost,n.roundTripTime&&(t.rttMs=1e3*n.roundTripTime))},n.prototype.getCodecFromCodecStats=function(e){var t=this.report.get(e);if(!t)return"";var n=t.mimeType.match(/\/(.*)$/);return n&&n[1]?n[1]:""},n.prototype.updateSendBitrate=function(){var e,t,n,r=0,i=null,o=null;Xn(e=this.mediaBytesSent).call(e,(function(e){r+=e.diffMean()})),Xn(t=this.mediaBytesRetransmit).call(t,(function(e){i=null===i?e.diffMean():i+e.diffMean()})),Xn(n=this.mediaBytesTargetEncode).call(n,(function(e){o=null===o?e.diffMean():o+e.diffMean()}));var s=null!==i?r-i:r;this._stats.bitrate={actualEncoded:8*s/(this.options.updateInterval/1e3),transmit:8*r/(this.options.updateInterval/1e3)},null!==i&&(this._stats.bitrate.retransmit=8*i/(this.options.updateInterval/1e3)),null!==o&&(this._stats.bitrate.targetEncoded=8*o/(this.options.updateInterval/1e3))},n}(_),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.updateStats=function(){return fo.resolve()},t}(_);function y(e,t,n,o){void 0===t&&(t=250),void 0===n&&(n=8),void 0===o&&(o=500);var s=r();return s?s<76?new v(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:o}):new E(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:o}):i(e)?new E(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:o}):new A(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:o})}e.createWebRTCStatsFilter=y,e.AgoraWebRTCStatsFilter=_,hr(e,"__esModule",{value:!0})}(t)}));class wS{constructor(e){this.localCandidateCount=0,this.allCandidateReceived=!1,this.audioTrack=null,this.videoTrack=null,this.mediaStream=new MediaStream,this.ID=NS,NS+=1,this.spec=e,this.createPeerConnection(),this.statsFilter=RS.createWebRTCStatsFilter(this.pc,void 0,void 0,Ia()?1200:void 0)}get _statsFilter(){return this.statsFilter}getStats(){return this.statsFilter.getStats()}async createOfferSDP(){try{const e=await this.pc.createOffer(this.offerOptions);if(!e.sdp)throw new Error("offer sdp is empty");return e.sdp}catch(e){throw Rc.error("create offer error:",e.toString()),new pl(ll.CREATE_OFFER_FAILED,e.toString())}}async setOfferSDP(e){try{await this.pc.setLocalDescription({type:"offer",sdp:e})}catch(e){throw Rc.error("set local offer error",e.toString()),new pl(ll.CREATE_OFFER_FAILED,e.toString())}}async setAnswerSDP(e){try{await this.pc.setRemoteDescription({type:"answer",sdp:e})}catch(e){if("InvalidStateError"!==e.name||"stable"!==this.pc.signalingState)throw Rc.error("set remote answer error",e.toString()),new pl(ll.SET_ANSWER_FAILED,e.toString());Rc.debug("[pc-".concat(this.ID,"] ignore invalidstate error"))}}close(){this.onICEConnectionStateChange=void 0,this.onConnectionStateChange=void 0;try{this.pc.oniceconnectionstatechange=null,this.pc.onconnectionstatechange=null,this.pc.onsignalingstatechange=null,this.pc.onicecandidateerror=null,this.pc.onicecandidate=null,this.pc.close(),this.pc=null,this.audioTransceiver=void 0,this.videoTransceiver=void 0}catch(e){}this.statsFilter.destroy()}createPeerConnection(){const e={iceServers:[]},t=e=>{const t=[];return Xn(e).call(e,e=>{var n,r,i,o;e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(n="turns:".concat((o=e.turnServerURL,o.match(/^[\.\:\d]+$/)?"".concat(o.replace(/[^\d]/g,"-"),".edge.agora.io"):(Rc.info("Cannot recognized as IP address ".concat(o,". Used As Host instead")),o)),":")).call(n,e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(r="turn:".concat(e.turnServerURL,":")).call(r,e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:Je(i="turn:".concat(e.turnServerURL,":")).call(i,e.tcpport,"?transport=tcp")}))}),t};var n,r;this.spec.iceServers?e.iceServers=this.spec.iceServers:this.spec.turnServer&&"off"!==this.spec.turnServer.mode&&(Kl(this.spec.turnServer.servers)?e.iceServers=this.spec.turnServer.servers:(e.iceServers&&e.iceServers.push(...t(this.spec.turnServer.servers)),e.iceServers&&this.spec.turnServer.serversFromGateway&&e.iceServers.push(...t(this.spec.turnServer.serversFromGateway)),Xn(n=Je(r=this.spec.turnServer.servers).call(r,this.spec.turnServer.serversFromGateway||[])).call(n,t=>{t.forceturn&&(e.iceTransportPolicy="relay")}))),jc("CHROME_FORCE_PLAN_B")&&Da()&&(e.sdpSemantics="plan-b",Fu().supportUnifiedPlan=!1),this.pc=new RTCPeerConnection(e,{optional:[{googDscp:!0}]}),this.pc.oniceconnectionstatechange=()=>{this.onICEConnectionStateChange&&this.onICEConnectionStateChange(this.pc.iceConnectionState)},this.pc.onconnectionstatechange=()=>{this.onConnectionStateChange&&this.onConnectionStateChange(this.pc.connectionState)},this.pc.onsignalingstatechange=()=>{this.pc&&"closed"===this.pc.connectionState&&this.onConnectionStateChange&&this.onConnectionStateChange(this.pc.connectionState)},this.pc.onicecandidate=e=>{if(!e.candidate)return this.pc.onicecandidate=null,this.allCandidateReceived=!0,void Rc.debug("[pc-".concat(this.ID,"] local candidate count"),this.localCandidateCount);this.localCandidateCount+=1},Fa(()=>{this.allCandidateReceived||(this.allCandidateReceived=!0,Rc.debug("[pc-".concat(this.ID,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))},jc("CANDIDATE_TIMEOUT"))}}class kS extends wS{constructor(e){super(e)}async setOfferSDP(e){const t=jc("CUSTOM_PUB_OFFER_MODIFIER");return t&&(e=t(e)),await super.setOfferSDP(e)}async setAnswerSDP(e){const t=jc("CUSTOM_PUB_ANSWER_MODIFIER");return t&&(e=t(e)),await super.setAnswerSDP(e)}getAnswerSDP(){return this.pc.remoteDescription}getOfferSDP(){return this.pc.localDescription}async addStream(e){const t=e.getTracks();for(const n of t)await this.addTrack(n)}async replaceTrack(e){var t;if(!Fu().supportReplaceTrack){const t="audio"===e.kind?this.audioTrack:this.videoTrack;if(!t)throw new pl(ll.UNEXPECTED_ERROR,"can not find replaced track");return await this.removeTrack(t),await this.addTrack(e),!0}const n=this.getSender(e.kind),r=Qo(t=this.mediaStream.getTracks()).call(t,t=>t.kind===e.kind);r&&this.mediaStream.removeTrack(r),this.mediaStream.addTrack(e);try{await n.replaceTrack(e),"audio"===e.kind?this.audioTrack=e:this.videoTrack=e}catch(e){throw new pl(ll.SENDER_REPLACE_FAILED,e.toString())}return!1}async removeTrack(e){const t=this.getSender(e.kind);this.mediaStream.removeTrack(e);try{const e=ma();"Safari"===e.name&&"11"===e.version&&await t.replaceTrack(null),this.pc.removeTrack(t)}catch(e){Rc.warning("[pc-".concat(this.ID,"] remove track error, ignore"),e)}"audio"===e.kind?(this.audioTrack=null,this.audioSender=void 0,this.audioTransceiver&&(this.audioTransceiver.direction="inactive"),this.audioTransceiver=void 0):(this.videoTrack=null,this.videoSender=void 0,this.videoTransceiver&&(this.videoTransceiver.direction="inactive"),this.videoTransceiver=void 0)}onOfferSettled({videoActive:e,audioActive:t}){if(Ia())Rc.debug("firefox do not set sender parameter");else{if(this.audioSender){const e={networkQuality:void 0,active:!0};jc("DSCP_TYPE")&&(e.networkQuality=jc("DSCP_TYPE")),this.audioTrack&&(e.active=!!t),this.setAudioRtpEncodingParameters(e).catch(e=>{Rc.debug("set audio sender`s network priority failed")})}if(this.videoSender){const t={networkQuality:void 0,active:!0};jc("DSCP_TYPE")&&(t.networkQuality=jc("DSCP_TYPE")),this.videoTrack&&(t.active=!!e),this.setVideoRtpEncodingParameters(t).catch(e=>{Rc.debug("set video sender`s network priority failed")})}}}async addTrack(e){const t=Fu();if("audio"===e.kind&&this.audioTrack||"video"===e.kind&&this.videoTrack)throw new pl(ll.UNEXPECTED_ERROR,"Can't add multiple stream");let n,r;this.mediaStream.addTrack(e),t.supportUnifiedPlan?(n=await async function(e,t,n){var r;const i=Qo(r=e.getTransceivers()).call(r,e=>"inactive"===e.direction&&e.receiver.track.kind===t.kind);return i?(i.direction="sendrecv",await i.sender.replaceTrack(t),i):e.addTransceiver(t,{direction:"sendrecv",streams:[n]})}(this.pc,e,this.mediaStream),r=n.sender):r=this.pc.addTrack(e,this.mediaStream),"audio"===e.kind?(this.audioTrack=e,this.audioSender=r,this.audioTransceiver=n):(this.videoTrack=e,this.videoSender=r,this.videoTransceiver=n)}async setRtpSenderParameters(e,t){const n=this.videoSender||(this.videoTransceiver?this.videoTransceiver.sender:void 0);if(!n)return;const r=n.getParameters();r.degradationPreference=t;try{await n.setParameters(r)}catch(e){Rc.debug("[".concat(this.ID,"] ignore RtpSender.setParameters"),e.toString())}}async setVideoRtpEncodingParameters(e){const t=this.videoSender||(this.videoTransceiver?this.videoTransceiver.sender:void 0);if(!t)throw new pl(ll.LOW_STREAM_ENCODING_ERROR,"Low stream has no video sender.");const n=t.getParameters();if(!n.encodings||!n.encodings[0])throw new pl(ll.LOW_STREAM_ENCODING_ERROR,"Low stream RtpEncodingParameters is empty.");e.scaleResolutionDownBy&&(n.encodings[0].scaleResolutionDownBy=e.scaleResolutionDownBy),e.maxBitrate&&(n.encodings[0].maxBitrate=e.maxBitrate),e.maxFramerate&&(n.encodings[0].maxFramerate=e.maxFramerate),void 0!==e.active&&(Rc.debug("set video sender encoding active:",e.active),n.encodings[0].active=e.active);const r=["very-low","low","medium","high"];return e.networkPriority&&rs(r).call(r,e.networkPriority)&&(Rc.debug("set video sender network quality:",e.networkPriority),n.encodings[0].networkPriority=e.networkPriority),await t.setParameters(n),t.getParameters()}async setAudioRtpEncodingParameters(e){const t=this.audioSender||(this.audioTransceiver?this.audioTransceiver.sender:void 0);if(!t)throw new pl(ll.SET_ENCODING_PARAMETER_ERROR,"pc has no audio sender.");const n=t.getParameters();if(!n.encodings||!n.encodings[0])throw new pl(ll.SET_ENCODING_PARAMETER_ERROR,"pc RtpEncodingParameters is empty.");void 0!==e.active&&(Rc.debug("set audio sender encoding active:",e.active),n.encodings[0].active=e.active);const r=["very-low","low","medium","high"];return e.networkPriority&&rs(r).call(r,e.networkPriority)&&(Rc.debug("set audio sender network quality:",e.networkPriority),n.encodings[0].networkPriority=e.networkPriority),await t.setParameters(n),t.getParameters()}getSender(e){let t=null;if(Fu().supportUnifiedPlan){var n;const r=Qo(n=this.pc.getTransceivers()).call(n,t=>t.sender.track&&t.sender.track.kind===e);t=r?r.sender:null}else{var r;t=Qo(r=this.pc.getSenders()).call(r,t=>t.track&&t.track.kind===e)||null}if(!t)throw new pl(ll.SENDER_NOT_FOUND);return t}close(){this.audioSender=void 0,this.videoSender=void 0,super.close()}}class OS extends wS{constructor(e){super(e),this.statsFilter.onFirstAudioDecoded=()=>this.onFirstAudioDecoded&&this.onFirstAudioDecoded(),this.statsFilter.onFirstVideoDecoded=(e,t)=>this.onFirstVideoDecoded&&this.onFirstVideoDecoded(e,t),this.statsFilter.onFirstAudioReceived=()=>this.onFirstAudioReceived&&this.onFirstAudioReceived(),this.statsFilter.onFirstVideoReceived=()=>this.onFirstVideoReceived&&this.onFirstVideoReceived(),Fu().supportUnifiedPlan?(this.audioTransceiver=this.pc.addTransceiver("audio",{direction:"recvonly"}),this.videoTransceiver=this.pc.addTransceiver("video",{direction:"recvonly"})):this.offerOptions={offerToReceiveAudio:!0,offerToReceiveVideo:!0},this.pc.ontrack=e=>{"audio"===e.track.kind?this.audioTrack=e.track:this.videoTrack=e.track,this.onTrack&&this.onTrack(e.track,e.streams[0])}}async setOfferSDP(e){const t=jc("CUSTOM_SUB_OFFER_MODIFIER");return t&&(e=t(e)),await super.setOfferSDP(e)}async setAnswerSDP(e){const t=jc("CUSTOM_SUB_ANSWER_MODIFIER");return t&&(e=t(e)),await super.setAnswerSDP(e)}}let NS=1,LS=1;class PS extends Mu{constructor(e,t){super(),this.startTime=Ma(),this.createTime=Ma(),this.readyToReconnect=!1,this._connectionState="disconnected",this.currentReconnectCount=0,this.ID=LS,LS+=1,this.joinInfo=e,this._userId=t,this.createPC()}get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this.emit(ty.CONNECTION_STATE_CHANGE,e,this._connectionState),this._connectionState=e)}get connectionId(){var e,t;return Je(e=Je(t="".concat(this.joinInfo.clientId,"-")).call(t,this.type?this.type:"sub(".concat(this._userId,")"),"-")).call(e,this.ID)}getUserId(){return this._userId}startUploadStats(){this.statsUploadInterval=window.setInterval(()=>{const e=this.pc.getStats();this.uploadStats(e,this.lastUploadPCStats),this.lastUploadPCStats=e},3e3),this.statsUploadSlowInterval=window.setInterval(()=>{const e=this.pc.getStats();this.uploadSlowStats(e)},6e4),this.relatedStatsUploadInterval=window.setInterval(()=>{const e=this.pc.getStats();this.uploadRelatedStats(e,this.lastRelatedPcStats),this.lastRelatedPcStats=e},1e3)}stopUploadStats(){this.statsUploadInterval&&window.clearInterval(this.statsUploadInterval),this.relatedStatsUploadInterval&&window.clearInterval(this.relatedStatsUploadInterval),this.statsUploadInterval=void 0,this.relatedStatsUploadInterval=void 0}createWaitConnectionConnectedPromise(){return new fo((e,t)=>{"disconnected"===this.connectionState?t():"connected"===this.connectionState?e():this.once(ty.CONNECTION_STATE_CHANGE,n=>{"connected"===n?e():t()})})}async reconnectPC(e){if(this.readyToReconnect=!1,e&&this.onPCDisconnected(e),this.currentReconnectCount>1/0)throw Rc.debug("[".concat(this.connectionId,"] cannot reconnect pc")),e||new pl(hy.UNEXPECTED_ERROR);if(this.stopUploadStats(),Rc.debug("[".concat(this.connectionId,"] start reconnect pc")),this.connectionState="connecting",this.currentReconnectCount+=1,await this.closePC())return Rc.debug("[".concat(this.connectionId,"] abort reconnect pc, wait ws")),void this.readyToReconnectPC();this.createPC(),await this.startP2PConnection(),this.currentReconnectCount=0}readyToReconnectPC(){this.stopUploadStats(),this.readyToReconnect=!0,this.pc.onICEConnectionStateChange=void 0,this.connectionState="connecting"}updateICEPromise(){this.removeAllListeners(ty.GATEWAY_P2P_LOST),this.icePromise=new fo((e,t)=>{let n=!0;this.pc.onICEConnectionStateChange=r=>{var i,o;Rc.info(Je(i=Je(o="[".concat(this.connectionId,"] ice-state: ")).call(o,this.type," p2p ")).call(i,r)),"connected"===r&&e(),"failed"!==r&&"closed"!==r||(n&&this.emit(ty.P2P_LOST),n=!1,this.reconnectPC(new pl(hy.ICE_FAILED)).catch(e=>{t(e)}))},this.pc.onConnectionStateChange=e=>{var r,i;Rc.info(Je(r=Je(i="[".concat(this.connectionId,"] connection-state: ")).call(i,this.type," p2p ")).call(r,e)),"failed"!==e&&"closed"!==e||(n&&this.emit(ty.P2P_LOST),n=!1,this.reconnectPC(new pl(hy.PC_CLOSED)).catch(e=>{t(e)}))},this.removeAllListeners(ty.GATEWAY_P2P_LOST),this.once(ty.GATEWAY_P2P_LOST,e=>{var r;if(this.pc.ID.toString()===e.toString()){if(Rc.info(Je(r="[".concat(this.connectionId,"] ")).call(r,this.type," p2p gateway lost")),n&&this.emit(ty.P2P_LOST),n=!1,this.pc.allCandidateReceived&&0===this.pc.localCandidateCount)return this.disconnectedReason=new pl(hy.NO_ICE_CANDIDATE,"can not get candidate in this pc"),void this.closeP2PConnection(!0);this.reconnectPC(new pl(hy.GATEWAY_P2P_LOST)).catch(e=>{t(e)})}})})}}function DS(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function MS(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=DS(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=DS(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}var xS=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Ur(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&hr(t,n,s),s},BS=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class US extends Dy{constructor(e,t,n,r,i){super(e,i),this.trackMediaType="video",this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1},this._enabled=!0,this.updateMediaStreamTrackResolution(),this._encoderConfig=t,this._scalabiltyMode=n,this._optimizationMode=r}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==kA.PLAYING)}play(e,t={}){const n=ky.reportApiInvoke(null,{tag:GA.TRACER,name:jA.LOCAL_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof e?e:"HTMLElement",t]});if(!(e instanceof HTMLElement)){const t=document.getElementById(e.toString());var r;t?e=t:(Rc.warning(Je(r="[".concat(this.getTrackId(),'] can not find "#')).call(r,e,'" element, use document.body')),e=document.body)}Rc.debug("[".concat(this.getTrackId(),"] start video playback"),ve(t));const i=MS({},this._getDefaultPlayerConfig(),{},t,{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(this._player=new H_(i),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),n.onSuccess()}stop(){const e=ky.reportApiInvoke(null,{tag:GA.TRACER,name:jA.LOCAL_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return e.onSuccess();this._player.destroy(),this._player=void 0,Rc.debug("[".concat(this.getTrackId(),"] stop video playback")),e.onSuccess()}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e);const n=await this._enabledMutex.lock();if(!e){this._originMediaStreamTrack.enabled=!1;try{await Mp(this,my.NEED_REMOVE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),n(),e}return t||(this._enabled=!1),Rc.info("[".concat(this.getTrackId(),"] setEnabled to false success")),n()}this._originMediaStreamTrack.enabled=!0;try{await Mp(this,my.NEED_ADD_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.toString()),n(),e}Rc.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0),n()}async setMuted(e){var t;if(e!==this._muted){if(this.stateCheck("muted",e),this._muted=e,ma().name===RA.FIREFOX)return Rc.debug("[".concat(this.getTrackId(),"] firefox set mute fallback to set enabled")),void await this.setEnabled(!e,!0);this._mediaStreamTrack.enabled=!e,Rc.debug(Je(t="[".concat(this.getTrackId(),"] start set muted: ")).call(t,e)),await Mp(this,my.SET_VIDEO_TRACK_MUTED,{track:this,muted:e})}}getStats(){Hp(()=>{Rc.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")},"localVideoTrackGetStatsWarning");const e=xp(this,my.GET_STATS);return e||MS({},iy)}async setBeautyEffect(e,t={}){const n=ky.reportApiInvoke(null,{tag:GA.TRACER,name:jA.LOCAL_VIDEO_TRACK_BEAUTY,options:[this.getTrackId(),e,t]});if(e||this._videoBeautyProcessor){if(Aa()===IA.IOS||Aa()===IA.ANDROID){const e=new pl(ll.INVALID_OPERATION,"can not enable beauty effect on mobile device");throw n.onError(e),e}if(!this._enabled&&e){const e=new pl(ll.TRACK_IS_DISABLED,"can not enable beauty effect when track is disabled");throw n.onError(e),e}Rc.info("[".concat(this.getTrackId(),"] start setBeautyEffect"),e,ve(t));try{this._videoBeautyProcessor?await this._videoBeautyProcessor.setBeautyEffectOptions(e,t):(this._videoBeautyProcessor=new pv,this._videoBeautyProcessor.onOverload=()=>{Vp(()=>this.emit(vy.BEAUTY_EFFECT_OVERLOAD))},await this._videoBeautyProcessor.setBeautyEffectOptions(e,t),await this._registerTrackProcessor(this._videoBeautyProcessor))}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setBeautyEffect error"),e.toString()),n.onError(e),e}Rc.info("[".concat(this.getTrackId(),"] setBeautyEffect success")),n.onSuccess()}}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}clone(e,t,n,r){const i=this._mediaStreamTrack.clone();return new US(i,e,t,n,r)}async setBitrateLimit(e){var t;if(Rc.debug(Je(t="[".concat(this.getTrackId(),"] set bitrate limit, ")).call(t,ve(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await Mp(this,my.NEED_RESET_REMOTE_SDP)}catch(e){return e.throw()}}}async setOptimizationMode(e){var t;if("motion"===e||"detail"===e||"balanced"===e){try{this._optimizationMode=e,await Mp(this,my.SET_OPTIMIZATION_MODE,e)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.toString()),e}Rc.info(Je(t="[".concat(this.getTrackId(),"] set optimization mode success (")).call(t,e,")"))}else Rc.error(ll.INVALID_PARAMS,"optimization mode must be motion, detail or balanced")}setScalabiltyMode(e){var t;if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return Rc.error(ll.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=e,Rc.info(Je(t="[".concat(this.getTrackId(),"] set scalability mode success (")).call(t,e,")"))}updateMediaStreamTrackResolution(){Lp(this._originMediaStreamTrack).then(([e,t])=>{this._videoHeight=t,this._videoWidth=e}).catch(Np)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async renewMediaStreamTrack(){}}xS([My(),BS("design:type",Function),BS("design:paramtypes",[Object,Object]),BS("design:returntype",void 0)],US.prototype,"play",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[Boolean,Boolean]),BS("design:returntype",fo)],US.prototype,"setEnabled",null),xS([My(),wy({report:ky}),BS("design:type",Function),BS("design:paramtypes",[Boolean]),BS("design:returntype",fo)],US.prototype,"setMuted",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[]),BS("design:returntype",Object)],US.prototype,"getStats",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[Boolean,Object]),BS("design:returntype",fo)],US.prototype,"setBeautyEffect",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[]),BS("design:returntype",ImageData)],US.prototype,"getCurrentFrameData",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[Object]),BS("design:returntype",fo)],US.prototype,"setBitrateLimit",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[String]),BS("design:returntype",fo)],US.prototype,"setOptimizationMode",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[Object]),BS("design:returntype",void 0)],US.prototype,"setScalabiltyMode",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[]),BS("design:returntype",void 0)],US.prototype,"updateMediaStreamTrackResolution",null);class FS extends US{constructor(e,t,n,r,i,o){super(e,t.encoderConfig?Mc(t.encoderConfig):{},r,i,o),this._enabled=!0,this._deviceName="default",this.tryResumeVideoForIOS15WeChat=async()=>{wa()&&La()&&this._mediaStreamTrack.muted&&this._enabled&&!this._isClosed&&(Rc.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.setEnabled(!1),await this.setEnabled(!0))},this._config=t,this._constraints=n,this._deviceName=e.label,this._config.encoderConfig&&(this._encoderConfig=Mc(this._config.encoderConfig)),ph.on(uh.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}async setDevice(e){var t;const n=ky.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CAM_VIDEO_TRACK_SET_DEVICE,options:[this.getTrackId(),e]});if(Rc.info(Je(t="[".concat(this.getTrackId(),"] set device to ")).call(t,e)),this._enabled)try{const t=await Ph.getDeviceById(e),n={};n.video=MS({},this._constraints),n.video.deviceId={exact:e},n.video.facingMode=void 0,this._originMediaStreamTrack.stop();let r=null;try{r=await kh(n,this.getTrackId())}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setDevice failed"),e.toString()),r=await kh({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),e}await this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw n.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}else try{const t=await Ph.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(e){throw n.onError(e),Rc.error("[".concat(this.getTrackId(),"] setDevice error"),e.toString()),e}Rc.info("[".concat(this.getTrackId(),"] setDevice success")),n.onSuccess()}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}Rc.info("[".concat(this.getTrackId(),"] start setEnabled"),e);const n=await this._enabledMutex.lock();if(!e){this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),t||(this._enabled=!1);try{await Mp(this,my.NEED_REMOVE_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.toString()),n(),e}return Rc.info("[".concat(this.getTrackId(),"] setEnabled to false success")),n()}const r=MS({},this._constraints),i=Ph.searchDeviceIdByName(this._deviceName);i&&!r.deviceId&&(r.deviceId={exact:i});try{const e=await kh({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),await Mp(this,my.NEED_ADD_TRACK,this)}catch(e){throw Rc.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.toString()),n(),e}this.updateMediaStreamTrackResolution(),Rc.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0),n()}async setEncoderConfiguration(e,t){const n=ky.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG,options:[this.getTrackId(),e]});if(!this._enabled){const e=new pl(ll.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");throw n.onError(e),e}e=Mc(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin);const r=jp(this._config);r.encoderConfig=e;const i=fv(r);Rc.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),ve(e),ve(i));try{await this._originMediaStreamTrack.applyConstraints(i),this.updateMediaStreamTrackResolution()}catch(e){const t=new pl(ll.UNEXPECTED_ERROR,e.toString());throw Rc.error("[".concat(this.getTrackId(),"] applyConstraints error"),t.toString()),n.onError(t),t}this._config=r,this._constraints=i,this._encoderConfig=e;try{await Mp(this,my.NEED_RENEGOTIATE)}catch(e){return n.onError(e),e.throw()}n.onSuccess()}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((Ra()||Na())&&this._enabled&&!this._isClosed&&ph.duringInterruption){const e=async()=>{ph.off(uh.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(Rc.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};ph.on(uh.IOS_INTERRUPTION_END,e)}else Rc.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(vy.TRACK_ENDED)}async renewMediaStreamTrack(){const e=MS({},this._constraints),t=Ph.searchDeviceIdByName(this._deviceName);t&&!e.deviceId&&(e.deviceId={exact:t});const n=await kh({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(n.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}close(){super.close(),ph.off(uh.IOS_15_INTERRUPTION_END,this.tryResumeVideoForIOS15WeChat)}}function VS(e,t){const n=e.match(/a=rtpmap:(\d+) opus/);if(!n||!n[0]||!n[1])return e;const r=n[1],i=e.match("a=fmtp:".concat(r,".*\r\n"));if(!i||!i[0])return e;let o="a=fmtp:".concat(r," minptime=10;useinbandfec=1;");var s;return t.bitrate&&!Ia()&&(o+="maxaveragebitrate=".concat(Math.floor(1e3*t.bitrate),";")),t.sampleRate&&(o+=Je(s="maxplaybackrate=".concat(t.sampleRate,";sprop-maxcapturerate=")).call(s,t.sampleRate,";")),t.stereo&&(o+="stereo=1;sprop-stereo-1;"),o+="\r\n",e.replace(i[0],o)}function jS(e){return e.replace("minptime=10","minptime=10;stereo=1;sprop-stereo=1")}function GS(e,t,n){let r=!1;switch(t){case"h264":return e;case"vp8":if(!jc("SIMULCAST"))return e;r=!0,n&&(n.numSpatialLayers=2);case"vp9":r=!0;case"av1":r=!0}if(r){var i;const t=Yo(i=RegExp.prototype.test).call(i,/^([a-z])=(.*)/),r=e.split("m=");let v,E,A=null,y=null,S=null,b=[],C=[],T=[],I=[],R=null,w=null,k=0;const O=[],N=[];for(let e=0;e<r.length;++e)if(A=r[e].match(/a=msid-semantic:/),A){A=r[e];break}for(let e=0;e<r.length;++e)if(y=r[e].match(/audio /),y){v=e,y="m="+r[e];break}for(let e=0;e<r.length;++e)if(S=r[e].match(/video /),S){E=e,S="m="+r[e];break}var o,s;if(A&&(b=Gr(o=A.split(/(\r\n|\r|\n)/)).call(o,t)),b.length>0&&(I=Je(I).call(I,b)),y&&(C=Gr(s=y.split(/(\r\n|\r|\n)/)).call(s,t)),!S)return e;{var a;T=Gr(a=S.split(/(\r\n|\r|\n)/)).call(a,t);for(let e=0;e<T.length;++e)if(null===R&&(R=T[e].match(/cname:/),null!==R)){R="cname:"+T[e].split("cname:")[1];break}for(let e=0;e<T.length;++e)if(null===w&&(w=T[e].match(/a=msid:/),null!==w&&(w="msid:"+T[e].split(":")[1])),T[e].match(/a=ssrc-group:FID/)){const t=T[e].split(" ");k=e,O.push(Number(t[1])),t[2]&&N.push(Number(t[2])),T.length=k;break}for(let e=1;e<n.numSpatialLayers;++e)O.push(O[0]+e),N.length>0&&N.push(N[0]+e);let r="a=ssrc-group:SIM ";const i="a=ssrc-group:FID ";for(let e=0;e<O.length;++e)r=Je(r).call(r,String(O[e])),e<O.length-1&&(r=Je(r).call(r," "));T.push(r);for(let e=0;e<n.numSpatialLayers;++e){var c,l;const t=Je(c=Je(l=Je(i).call(i,String(O[e]))).call(l," ")).call(c,String(N[e]));T.push(t)}for(let t=0;t<n.numSpatialLayers;++t){var u,d,h,p;if(null===R||null===w)return e;const n=Je(u=Je(d="a=ssrc:".concat(String(O[t]))).call(d," ")).call(u,R),r=Je(h=Je(p="a=ssrc:".concat(String(O[t]))).call(p," ")).call(h,w);T.push(n),T.push(r)}for(let t=0;t<n.numSpatialLayers;++t){var f,g,m,_;if(null===R||null===w)return e;const n=Je(f=Je(g="a=ssrc:".concat(String(N[t]))).call(g," ")).call(f,R),r=Je(m=Je(_="a=ssrc:".concat(String(N[t]))).call(_," ")).call(m,w);T.push(n),T.push(r)}}v&&E&&v>E?(I=Je(I).call(I,T),I=Je(I).call(I,C)):(I=Je(I).call(I,C),I=Je(I).call(I,T)),e=I.join("\r\n")+"\r\n"}return e}xS([My(),BS("design:type",Function),BS("design:paramtypes",[String]),BS("design:returntype",fo)],FS.prototype,"setDevice",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[Boolean,Boolean]),BS("design:returntype",fo)],FS.prototype,"setEnabled",null),xS([My(),BS("design:type",Function),BS("design:paramtypes",[Object,Boolean]),BS("design:returntype",fo)],FS.prototype,"setEncoderConfiguration",null);const HS=(e,t)=>{let n=null;if("h264"===t?n=e.match(/a=rtpmap:(\d+) H264.*\r\n/)||e.match(/a=rtpmap:(\d+) H264.*\n/):"vp8"===t?n=e.match(/a=rtpmap:(\d+) VP8.*\r\n/)||e.match(/a=rtpmap:(\d+) VP8.*\n/):"vp9"===t?n=e.match(/a=rtpmap:(\d+) VP9.*\r\n/)||e.match(/a=rtpmap:(\d+) VP9.*\n/):"av1"===t&&(n=e.match(/a=rtpmap:(\d+) AV1.*\r\n/)||e.match(/a=rtpmap:(\d+) AV1.*\n/)),n&&n[1])return n[1]};function QS(e,t){const n=(e,t)=>{const i=HS(e,t);return i?n(r(e,i),t):e},r=(e,t)=>{var n,r;const i=Yo(n=RegExp.prototype.test).call(n,/^([a-z])=(.*)/),o=["a=rtpmap:".concat(t),"a=rtcp-fb:".concat(t),"a=fmtp:".concat(t)],s=Gr(r=e.split(/(\r\n|\r|\n)/)).call(r,i),a=[];Xn(s).call(s,(e,t)=>{Xn(o).call(o,n=>{rs(e).call(e,n)&&a.push(t)})});const c=Lv(s).call(s,e=>rs(e).call(e,"apt=".concat(t)));let l;if(c){a.push(c,c-1);const e=s[c-1].match(/a=rtpmap:(\d+) rtx.*/);l=e&&e[1]}Xn(a).call(a,e=>{s[e]=""});const u=Lv(s).call(s,e=>rs(e).call(e,"m=video"));return s[u]=s[u].replace(" ".concat(t),""),l&&(s[u]=s[u].replace(" ".concat(l),"")),Gr(s).call(s,e=>!!e).join("\r\n")+"\r\n"};return Xn(t).call(t,t=>{e=n(e,t)}),e}function WS(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function qS(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=WS(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=WS(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}class zS extends PS{constructor(e,t,n,r){super(t,t.stringUid||t.uid),this.suspendTracks=[],this.type="pub",this.detecting=!1,this._waitingSuccessResponse=!1,this.handleMuteVideoTrack=({track:e,muted:t},n,r)=>{this.setVideoTrackMuteState(t).then(n).catch(r)},this.handleMuteAudioTrack=({track:e,muted:t},n,r)=>{this.setAudioTrackMuteState(t,e).then(n).catch(r)},this.renegotiateWithGateway=async()=>(Rc.debug("[pc-".concat(this.pc.ID,"] renegotiate start")),new fo(async(e,t)=>{this.connectionState="connecting";const n=r=>{"connected"===r&&(this.off(ty.CONNECTION_STATE_CHANGE,n),e()),"disconnected"===r&&(this.off(ty.CONNECTION_STATE_CHANGE,n),t(new pl(hy.OPERATION_ABORTED,"renegotiate abort")))};this.on(ty.CONNECTION_STATE_CHANGE,n),Ia()&&jc("SIMULCAST")&&this.videoTrack&&this.videoTrack._scalabiltyMode&&await this.addSimulcast4Firefox(this.videoTrack._scalabiltyMode);let r=await this.pc.createOfferSDP();if(this.audioTrack&&this.audioTrack._encoderConfig&&(r=VS(r,this.audioTrack._encoderConfig)),this.videoTrack&&this.videoTrack._scalabiltyMode&&("vp9"!==this.codec&&"vp8"!==this.codec?(this.videoTrack._scalabiltyMode.numSpatialLayers=1,this.videoTrack._scalabiltyMode.numTemporalLayers=1):(this.videoTrack._scalabiltyMode.numSpatialLayers>1||this.videoTrack._scalabiltyMode.numTemporalLayers>1)&&(r=GS(r,this.codec,this.videoTrack._scalabiltyMode)),Rc.debug("renegoation spatial layers: ",this.videoTrack._scalabiltyMode.numSpatialLayers)),await this.pc.setOfferSDP(r),this.audioTrack instanceof Hy){const e={videoActive:this.videoTrack&&!this.videoTrack.muted,audioActive:this.audioTrack&&this.audioTrack.isActive};this.pc.onOfferSettled(e)}const i=await Dp(this,ty.NEED_RENEGOTIATE,r);this.videoTrack&&!Ia()&&jc("SIMULCAST")&&this.videoTrack._scalabiltyMode&&this.setSimulcastVideoRtpEncodingParameters(this.videoTrack._scalabiltyMode);const o=function(e,t){var n,r,i;const o=Yo(n=RegExp.prototype.test).call(n,/^([a-z])=(.*)/),s=Gr(r=e.split(/(\r\n|\r|\n)/)).call(r,o),a=Gr(i=t.split(/(\r\n|\r|\n)/)).call(i,o);let c=null;const l=new xn;return Xn(s).call(s,e=>{const t=e.match(/m=(audio|video)/);if(t&&t[1])return void(c=t[1]);if(!c)return;const n=e.match(/\=(sendrecv|recvonly|sendonly|inactive)/);n&&n[1]&&l.set(c,n[1])}),c=null,vo(a).call(a,e=>{const t=e.match(/m=(audio|video)/);if(t&&t[1])return c=t[1],e;if(!c)return e;const n=e.match(/\=(sendrecv|recvonly|sendonly|inactive)/);if(n&&n[1]){const t=l.get(c);if(t&&t!==n[1])return e.replace(n[1],t)}return e}).join("\r\n")+"\r\n"}(r,this.updateAnswerSDP(i.sdp));await this.pc.setAnswerSDP(o),Rc.debug("[pc-".concat(this.pc.ID,"] renegotiate success")),this.connectionState="connected"})),this.handleStreamRenegotiate=(e,t)=>{"connected"===this.connectionState?this.renegotiateWithGateway().then(e).catch(t):e()},this.handleReplaceTrack=(e,t,n)=>{if(this.audioTrack instanceof Hy&&"audio"===e.kind)return t();this.pc.replaceTrack(e).then(e=>e?this.renegotiateWithGateway():fo.resolve()).then(t).catch(n)},this.handleCloseAudioTrack=e=>{},this.handleCloseVideoTrack=()=>{this.lowStreamConnection&&this.lowStreamConnection.videoTrack&&this.lowStreamConnection.videoTrack.close()},this.handleGetSessionID=e=>{e(this.joinInfo.sid)},this.handleGetLocalVideoStats=e=>{e(this.statsCollector.getLocalVideoTrackStats(this.connectionId))},this.handleGetLocalAudioStats=e=>{e(this.statsCollector.getLocalAudioTrackStats(this.connectionId))},this.handleSetOptimizationMode=(e,t,n)=>{this.videoTrack&&this.setRtpSenderParametersByTrackConfig(this.videoTrack).then(t).catch(n)},this.isLowStreamConnection=!!r,this.codec=n,this.statsCollector=e,this.statsCollector.addLocalConnection(this)}getAllTracks(){let e=[];return this.videoTrack&&e.push(this.videoTrack),this.audioTrack&&this.audioTrack instanceof Hy?e=Je(e).call(e,this.audioTrack.trackList):this.audioTrack&&e.push(this.audioTrack),e.push(...this.suspendTracks),e}async addTracks(e){const t=Fu();if("connecting"===this.connectionState)try{return await this.createWaitConnectionConnectedPromise(),await this.addTracks(e)}catch(e){throw new pl(hy.OPERATION_ABORTED,"publish abort")}let n=!1;const r=this.getAllTracks();e=Fp(e=Gr(e).call(e,e=>-1===Lo(r).call(r,e)));for(let i=0;i<e.length;i+=1){const r=e[i];if(!(r instanceof Dy))return new pl(hy.INVALID_LOCAL_TRACK).throw();if(r instanceof US&&this.disabledVideoTrack){if(this.disabledVideoTrack!==r)return new pl(hy.EXIST_DISABLED_VIDEO_TRACK).throw();this.disabledVideoTrack=void 0}if(r instanceof US&&this.videoTrack)return new pl(hy.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw();if(r instanceof Vy){if(this.audioTrack&&this.audioTrack._bypassWebAudio)throw Rc.error("One of the audio track was created with config bypassWebAudio set to true, there is no way to publish multiple audio tracks."),new pl(hy.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS);if(this.audioTrack instanceof Hy)0===this.audioTrack.trackList.length&&await this.pc.setAudioRtpEncodingParameters({active:!0}),this.audioTrack.addAudioTrack(r);else if(t.webAudioMediaStreamDest)if(r._bypassWebAudio){if(this.audioTrack)throw Rc.error("Can not publish another audio track with bypassWebAudio set to true."),new pl(hy.CAN_NOT_PUBLISH_MULTIPLE_AUDIO_TRACKS);Rc.debug("[".concat(this.connectionId,"] audio track doesn't not pass through WebAudio, use original audio track to publish")),n=await this.addTrackWithPC(r)}else{const e=new Hy;r.muted?this.suspendTracks.push(r):e.addAudioTrack(r),n=await this.addTrackWithPC(e)}else Rc.debug("[".concat(this.connectionId,"] your browser does not support mixing track, use original audio track to publish")),n=await this.addTrackWithPC(r)}else if(r instanceof US&&this.isLowStreamConnection){const e=qS({},{width:160,height:120,framerate:15,bitrate:50},{},this.lowStreamParameter);let i;if(t.supportDualStreamEncoding)Rc.debug("[".concat(this.connectionId,"] creating low stream using rtp encoding.")),this.lowStreamEncoding=nS(e,r),i=r.clone({bitrateMax:e.bitrate,bitrateMin:e.bitrate});else{Rc.debug("[".concat(this.connectionId,"] creating low stream using canvas."));const t=jE(r,e);i=new US(t,{bitrateMax:e.bitrate,bitrateMin:e.bitrate})}i._hints.push(_y.LOW_STREAM),n=await this.addTrackWithPC(i),this.bindTrackEvents(i)}else this.detecting=!0,Fa(()=>{this.detecting=!1},8e3),n=await this.addTrackWithPC(r)}await this.updateControlMessage(),n&&await this.renegotiateWithGateway(),Xn(e).call(e,e=>this.bindTrackEvents(e))}async removeTracks(e,t){const n=this.getAllTracks();e=Fp(e=Gr(e).call(e,e=>-1!==Lo(n).call(n,e)||e===this.disabledVideoTrack));const r=[];for(let o=0;o<e.length;o+=1){const n=e[o];if(this.unbindTrackEvents(n),this.audioTrack instanceof Hy&&n instanceof Vy)this.audioTrack.removeAudioTrack(n),Up(this.suspendTracks,n),0===this.audioTrack.trackList.length&&(r.push(this.audioTrack),this.audioTrack=void 0);else if(n instanceof Vy)r.push(n),this.audioTrack=void 0;else if(n instanceof US){if(t){if(this.disabledVideoTrack===n)return void(this.disabledVideoTrack=void 0)}else this.disabledVideoTrack=this.videoTrack;r.push(n),this.isLowStreamConnection&&n.close(),this.videoTrack=void 0}}if(this.videoTrack||this.audioTrack){if(0===r.length)return;if("connecting"===this.connectionState)try{await this.createWaitConnectionConnectedPromise()}catch(e){return}for(const e of r){var i;Rc.debug(Je(i="[".concat(this.connectionId,"] remove ")).call(i,e.trackMediaType," from pc")),await this.pc.removeTrack(e._mediaStreamTrack);const t=ma();"Safari"===t.name&&"11"===t.version&&await e.renewMediaStreamTrack()}await this.renegotiateWithGateway()}else await this.closeP2PConnection()}async updateControlMessage(){this.audioTrack instanceof Hy&&"connected"===this.connectionState&&(this.audioTrack&&await Dp(this,ty.NEED_CONTROL,{type:"audio",muted:!this.audioTrack.isActive}),this.videoTrack&&await Dp(this,ty.NEED_CONTROL,{type:"video",muted:this.videoTrack.muted}))}async setSimulcastVideoRtpEncodingParameters(e){const t=this.pc.getSender("video");if(!t)throw new pl(hy.LOW_STREAM_ENCODING_ERROR,"Low stream has no video sender.");const n=t.getParameters();if(!n.encodings||!n.encodings[0])throw new pl(hy.LOW_STREAM_ENCODING_ERROR,"Low stream RtpEncodingParameters is empty.");if(this.videoTrack&&this.videoTrack._encoderConfig&&this.videoTrack._encoderConfig.bitrateMax&&this.videoTrack._encoderConfig.bitrateMax>200&&e.numSpatialLayers>1){const e={high:1e3*(this.videoTrack._encoderConfig.bitrateMax-50),medium:5e4};n.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:e.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:e.medium,scaleResolutionDownBy:4}]}await t.setParameters(n)}startP2PConnection(){return new fo(async(e,t)=>{if(!this.audioTrack&&!this.videoTrack)return t(new pl(hy.UNEXPECTED_ERROR,"no track to publish"));const n=r=>{if("connected"===r&&(this.off(ty.CONNECTION_STATE_CHANGE,n),e()),"disconnected"===r){if(this.off(ty.CONNECTION_STATE_CHANGE,n),this.disconnectedReason)return t(this.disconnectedReason);t(new pl(hy.OPERATION_ABORTED,"publish abort"))}};this.on(ty.CONNECTION_STATE_CHANGE,n),this.disconnectedReason=void 0,this.connectionState="connecting",this._waitingSuccessResponse=!0,this.startTime=Ma();try{var r;!this.pc.audioTrack&&this.audioTrack&&await this.pc.addTrack(this.audioTrack._mediaStreamTrack),!this.pc.videoTrack&&this.videoTrack&&await this.pc.addTrack(this.videoTrack._mediaStreamTrack),Ia()&&jc("SIMULCAST")&&this.videoTrack&&this.videoTrack._scalabiltyMode&&await this.addSimulcast4Firefox(this.videoTrack._scalabiltyMode);let e=await this.pc.createOfferSDP();jc("REMOVE_NEW_CODECS")&&(e="vp9"===this.codec?QS(e,["av1"]):"av1"===this.codec?QS(e,["vp9"]):QS(e,["vp9","av1"]));const t=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1X/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),t}(e);if(this.videoTrack&&!rs(r=t.video).call(r,this.codec.toUpperCase())&&Rc.warning("current codec is not supported, support list: ".concat(t.video.join(","))),this.audioTrack&&this.audioTrack._encoderConfig&&(e=VS(e,this.audioTrack._encoderConfig)),this.videoTrack&&!Ia()&&this.videoTrack._scalabiltyMode&&("vp9"!==this.codec&&"vp8"!==this.codec?(this.videoTrack._scalabiltyMode.numSpatialLayers=1,this.videoTrack._scalabiltyMode.numTemporalLayers=1):(this.videoTrack._scalabiltyMode.numSpatialLayers>1||this.videoTrack._scalabiltyMode.numTemporalLayers>1)&&(e=GS(e,this.codec,this.videoTrack._scalabiltyMode)),Rc.debug("spatial layers: ",this.videoTrack._scalabiltyMode.numSpatialLayers)),await this.pc.setOfferSDP(e),this.audioTrack instanceof Hy){const e={videoActive:this.videoTrack&&!this.videoTrack.muted,audioActive:this.audioTrack&&this.audioTrack.isActive};this.pc.onOfferSettled(e)}this.videoTrack&&this.setRtpSenderParametersByTrackConfig(this.videoTrack),Rc.debug("[".concat(this.connectionId,"] create and set offer success"));const n={messageType:"OFFER",sdp:e,offererSessionId:104,retry:!0};Fu().supportDualStreamEncoding&&this.isLowStreamConnection&&this.lowStreamEncoding&&this.videoTrack&&await this.setLowStreamEncoding(this.lowStreamEncoding,this.videoTrack),this.videoTrack&&!Ia()&&jc("SIMULCAST")&&this.videoTrack._scalabiltyMode&&this.setSimulcastVideoRtpEncodingParameters(this.videoTrack._scalabiltyMode);const i=await Dp(this,ty.NEED_ANSWER,n),o=this.updateAnswerSDP(i.sdp);await this.pc.setAnswerSDP(o),Rc.debug("[".concat(this.connectionId,"] set answer success")),await this.icePromise,this.connectionState="connected",this.startUploadStats()}catch(e){this.off(ty.CONNECTION_STATE_CHANGE,n),this.connectionState="disconnected",this.reportPublishEvent(!1,e.code),Rc.error("[".concat(this.connectionId,"] connection error"),e.toString()),t(e)}})}reportPublishEvent(e,t,n){var r;this._waitingSuccessResponse=!1,ky.publish(this.joinInfo.sid,{lts:this.startTime,succ:e,ec:t,audioName:this.audioTrack&&(this.audioTrack instanceof Hy?this.audioTrack.getSubTrackLabels().join(","):this.audioTrack.getTrackLabel()),videoName:this.videoTrack&&this.videoTrack.getTrackLabel(),screenshare:!(!this.videoTrack||-1===Lo(r=this.videoTrack._hints).call(r,_y.SCREEN_TRACK)),audio:!!this.audioTrack,video:!!this.videoTrack,p2pid:this.pc.ID,publishRequestid:this.ID,extend:n})}async closeP2PConnection(e){const t=this.getAllTracks();var n;Xn(t).call(t,e=>{this.unbindTrackEvents(e)}),this.isLowStreamConnection&&this.videoTrack&&this.videoTrack.close(),this.videoTrack=void 0,this.audioTrack instanceof Hy&&(Xn(n=this.audioTrack.trackList).call(n,e=>{this.audioTrack.removeAudioTrack(e)}),this.audioTrack.close()),this.audioTrack=void 0,this.stopUploadStats(),this.statsCollector.removeConnection(this.connectionId),await this.closePC(e),this.connectionState="disconnected",this.removeAllListeners()}getNetworkQuality(){var e;const t=this.pc.getStats();if(!t.videoSend[0]&&!t.audioSend[0])return 1;const n=xp(this,ty.NEED_SIGNAL_RTT),r=t.videoSend[0]?t.videoSend[0].rttMs:void 0,i=t.audioSend[0]?t.audioSend[0].rttMs:void 0,o=r&&i?(r+i)/2:r||i,s=(o&&n?(o+n)/2:o||n)||0,a=100*t.sendPacketLossRate*.7/50+.3*s/1500,c=a<.17?1:a<.36?2:a<.59?3:a<.1?4:5;if(this.videoTrack&&this.videoTrack._encoderConfig&&-1===Lo(e=this.videoTrack._hints).call(e,_y.SCREEN_TRACK)){const e=this.videoTrack._encoderConfig.bitrateMax,n=t.bitrate.actualEncoded;if(e&&n){const t=(1e3*e-n)/(1e3*e);return Zc[t<.15?0:t<.3?1:t<.45?2:t<.6?3:4][c]}}return c}handleUpdateBitrateLimit(e){this.videoTrack&&this.videoTrack.setBitrateLimit(e)}async setAudioTrackMuteState(e,t){if(!(this.audioTrack instanceof Hy))return void Rc.debug("[".concat(this.connectionId,"] set audio mute in unsupported environment"));const n=this.audioTrack;try{var r;if(e)n.removeAudioTrack(t),0===n.trackList.length&&(Rc.debug(Je(r="[".concat(this.connectionId,"] set audio encoding active, id: ")).call(r,t.getTrackId(),", state: ",!1)),await this.pc.setAudioRtpEncodingParameters({active:!1})),this.suspendTracks.push(t);else await this.pc.setAudioRtpEncodingParameters({active:!0}),n.addAudioTrack(t),Up(this.suspendTracks,t)}catch(e){var i;Rc.warning(Je(i="[".concat(this.connectionId,"] set audio muted error ")).call(i,e,", fallback to set enabled"))}await Dp(this,ty.NEED_CONTROL,{type:"audio",muted:!(!this.audioTrack||this.audioTrack.isActive)})}async setVideoTrackMuteState(e){const t=!e;let n=!1;if(ma().name===RA.FIREFOX)n=!0;else try{var r,i;Rc.debug(Je(r=Je(i="[".concat(this.connectionId,"] set video encoding active, id: ")).call(i,this.videoTrack&&this.videoTrack.getTrackId(),", state: ")).call(r,t)),await this.pc.setVideoRtpEncodingParameters({active:t})}catch(e){var o;Rc.warning(Je(o="[".concat(this.connectionId,"] set video encoding active error ")).call(o,e,", fallback to set enabled")),n=!0}var s,a;n&&this.videoTrack&&(Rc.debug(Je(s=Je(a="[".concat(this.connectionId,"] set video encoding active fallback to enabled on firefox, type: ")).call(a,this.videoTrack&&this.videoTrack.getTrackId(),", state: ")).call(s,t)),this.videoTrack.getMediaStreamTrack().enabled=t),this.lowStreamConnection&&this.lowStreamConnection.setVideoTrackMuteState(e),!this.isLowStreamConnection&&await Dp(this,ty.NEED_CONTROL,{type:"video",muted:e})}uploadStats(e,t){const n=this.audioTrack?function(e,t){const n=e.audioSend[0];if(!n)return null;const r={id:kp(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:n.ssrc.toString()};return r.A_astd=t._originMediaStreamTrack.enabled&&t._mediaStreamTrack.enabled?"0":"1",n.inputLevel?r.A_ail=Math.round(100*n.inputLevel).toString():r.A_ail=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),r.A_apil=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),r}(e,this.audioTrack):void 0,r=this.videoTrack?function(e,t){const n=e.videoSend[0];if(!n)return null;const r={id:kp(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:n.ssrc.toString()};switch(r.A_vstd=t._originMediaStreamTrack&&!t._originMediaStreamTrack.enabled||!t._mediaStreamTrack.enabled?"1":"0",n.sentFrame&&(r.A_fhs=n.sentFrame.height.toString(),r.A_frs=n.sentFrame.frameRate.toString(),r.A_fws=n.sentFrame.width.toString()),n.adaptionChangeReason){case"none":r.A_ac="0";break;case"cpu":r.A_ac="1";break;case"bandwidth":r.A_ac="2";break;case"other":r.A_ac="3"}return r.A_nr=n.nacksCount.toString(),n.avgEncodeMs&&(r.A_aem=n.avgEncodeMs.toFixed(0).toString()),r}(e,this.videoTrack):void 0,i=eS(e,t),o=function(e){const t={id:"bweforvideo",timestamp:new Date(e.timestamp).toISOString(),type:"VideoBwe"};return e.bitrate.retransmit&&(t.A_rb=e.bitrate.retransmit.toString()),e.bitrate.targetEncoded&&(t.A_teb=e.bitrate.targetEncoded.toString()),t.A_aeb=e.bitrate.actualEncoded.toString(),t.A_tb=e.bitrate.transmit.toString(),void 0!==e.sendBandwidth&&(t.A_asb=e.sendBandwidth.toString()),t}(e);n&&Vp(()=>this.emit(ty.NEED_UPLOAD,XA.PUBLISH_STATS,n)),r&&Vp(()=>this.emit(ty.NEED_UPLOAD,XA.PUBLISH_STATS,qS({},r,{},i))),o&&Vp(()=>this.emit(ty.NEED_UPLOAD,XA.PUBLISH_STATS,o))}uploadSlowStats(e){const t=eS(e);t&&Vp(()=>this.emit(ty.NEED_UPLOAD,XA.PUBLISH_STATS,t))}uploadRelatedStats(e){const t=function(e){const t=e.videoSend[0];return t?{mediaType:"video",isVideoMute:!1,frameRateInput:t.inputFrame&&t.inputFrame.frameRate.toString(),frameRateSent:t.sentFrame&&t.sentFrame.frameRate.toString(),googRtt:t.rttMs.toString()}:null}(e);t&&(t.isVideoMute=!(!this.videoTrack||!this.videoTrack.muted),Vp(()=>{this.emit(ty.NEED_UPLOAD,XA.PUBLISH_RELATED_STATS,t)}))}async addSimulcast4Firefox(e){if(Ia()&&this.videoTrack&&this.videoTrack._encoderConfig&&this.videoTrack._encoderConfig.bitrateMax&&this.videoTrack._encoderConfig.bitrateMax>200&&e.numSpatialLayers>1&&"vp8"===this.codec){const e=this.pc.getSender("video");if(e){const t=e.getParameters();Rc.debug("getParameters : ",t),t||Rc.error("[".concat(this.connectionId,"] get sender parameter error."));const n={high:1e3*(this.videoTrack._encoderConfig.bitrateMax-50),medium:5e4};t.encodings=[{rid:"m",active:!0,maxBitrate:n.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:n.high}],await e.setParameters(t),Rc.debug("setParameters : ",t)}}}bindTrackEvents(e){var t;e.addListener(my.NEED_RESET_REMOTE_SDP,Yo(t=this.handleResetRemoteSdp).call(t,this)),this.isLowStreamConnection||(e instanceof Vy?(e.addListener(my.GET_STATS,this.handleGetLocalAudioStats),e.addListener(my.NEED_CLOSE,this.handleCloseAudioTrack),e.addListener(my.SET_AUDIO_TRACK_MUTED,this.handleMuteAudioTrack)):e instanceof US&&(e.addListener(my.GET_STATS,this.handleGetLocalVideoStats),e.addListener(my.NEED_CLOSE,this.handleCloseVideoTrack),e.addListener(my.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),e.addListener(my.SET_VIDEO_TRACK_MUTED,this.handleMuteVideoTrack)),e.addListener(my.NEED_RENEGOTIATE,this.handleStreamRenegotiate),e.addListener(my.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(my.NEED_SESSION_ID,this.handleGetSessionID))}unbindTrackEvents(e){this.isLowStreamConnection||(e instanceof Vy?(e.off(my.GET_STATS,this.handleGetLocalAudioStats),e.off(my.NEED_CLOSE,this.handleCloseAudioTrack),e.off(my.SET_AUDIO_TRACK_MUTED,this.handleMuteAudioTrack)):e instanceof US&&(e.off(my.GET_STATS,this.handleGetLocalVideoStats),e.off(my.NEED_CLOSE,this.handleCloseVideoTrack),e.off(my.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode),e.off(my.SET_VIDEO_TRACK_MUTED,this.handleMuteVideoTrack)),e.off(my.NEED_RENEGOTIATE,this.handleStreamRenegotiate),e.off(my.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(my.NEED_SESSION_ID,this.handleGetSessionID))}async addTrackWithPC(e){if("connecting"===this.connectionState)return new pl(hy.INVALID_OPERATION,"last publish operation has not finished").throw();const t=this.videoTrack;let n=!1;return this.audioTrack&&e instanceof Hy?(this.audioTrack=e,Rc.debug("[".concat(this.connectionId,"] replace pc audio track")),n=await this.pc.replaceTrack(e._mediaStreamTrack)):this.videoTrack&&e instanceof US?(this.videoTrack=e,Rc.debug("[".concat(this.connectionId,"] replace pc video track")),n=await this.pc.replaceTrack(e._mediaStreamTrack)):e instanceof Vy?(this.audioTrack=e,Rc.debug("[".concat(this.connectionId,"] add audio track to pc")),await this.pc.addTrack(e._mediaStreamTrack),n=!0):e instanceof US&&(this.videoTrack=e,Rc.debug("[".concat(this.connectionId,"] add video track to pc")),await this.pc.addTrack(e._mediaStreamTrack),n=!0),"connected"===this.connectionState&&this.videoTrack!==t&&this.videoTrack&&await this.setRtpSenderParametersByTrackConfig(this.videoTrack),"disconnected"!==this.connectionState&&n}handleResetRemoteSdp(){return new fo((e,t)=>{var n;Rc.info("[pc-".concat(this.pc.ID,"] start reset remote sdp"));const r=this.pc.getOfferSDP(),i=this.pc.getAnswerSDP();if(!i||!r)return e();const o=i.sdp;let s;this.videoTrack&&this.videoTrack._encoderConfig&&-1===Lo(n=this.videoTrack._hints).call(n,_y.SCREEN_TRACK)&&(s=function(e,t){var n,r;const i=t.bitrateMin;let o=t.bitrateMax;const s=Yo(n=RegExp.prototype.test).call(n,/^([a-z])=(.*)/),a=Gr(r=e.split(/(\r\n|\r|\n)/)).call(r,s);if(o){let e="AS";ma().name===ha.FIREFOX&&(o=1e3*(o>>>0),e="TIAS");const t=Lv(a).call(a,t=>rs(t).call(t,e));var c;t>0&&(a[t]=Je(c="b=".concat(e,":")).call(c,o))}if(i){const e=Lv(a).call(a,e=>rs(e).call(e,"x-google-min-bitrate"));e>0&&(a[e]=a[e].replace(/x-google-min-bitrate=(.*)/,"x-google-min-bitrate=".concat(i)))}return a.join("\r\n")+"\r\n"}(o,this.videoTrack._encoderConfig)),o!==s?this.pc.setOfferSDP(r.sdp).then(()=>{if(s)return this.pc.setAnswerSDP(s)}).then(e).catch(e=>{var n;Rc.error(Je(n="[pc-".concat(this.pc.ID,"] reset remote sdp error, ")).call(n,e)),t(e)}):Rc.debug("[pc-".concat(this.pc.ID,"] remote sdp have no not changed"))})}async setRtpSenderParametersByTrackConfig(e){if(!Fu().supportSetRtpSenderParameters)return void Rc.debug("[".concat(this.connectionId,"] do not support set pc rtp sender, skip"));const t={};let n="balanced";"motion"===e._optimizationMode?n="maintain-framerate":"detail"===e._optimizationMode&&(n="maintain-resolution"),Rc.debug("[".concat(this.connectionId,"] set pc rtp sender"),t,n),await this.pc.setRtpSenderParameters(t,n)}updateAnswerSDP(e){var t,n;return e=e.replace(/a=x-google-flag:conference\r\n/g,""),this.videoTrack&&Lo(t=this.videoTrack._hints).call(t,_y.SCREEN_TRACK),this.videoTrack&&this.videoTrack._encoderConfig&&-1===Lo(n=this.videoTrack._hints).call(n,_y.SCREEN_TRACK)&&(e=function(e,t,n){const r=Fu(),i=n.bitrateMin;let o=n.bitrateMax;const s=e.match(/m=video.*\r\n/)||e.match(/m=video.*\n/);if(s&&s.length>0&&r.supportMinBitrate&&i){const n=HS(e,t);if(n)if(jc("SIMULCAST")){var a,c;const t=o?.7*o:300;e=e.replace(s[0],Je(a=Je(c="".concat(s[0],"a=fmtp:")).call(c,n," x-google-start-bitrate=")).call(a,t,"\r\n"))}else{var l,u;e=e.replace(s[0],Je(l=Je(u="".concat(s[0],"a=fmtp:")).call(u,n," x-google-min-bitrate=")).call(l,i,"\r\n"))}}if(s&&s.length>0&&o){var d,h;let t="AS";ma().name===ha.FIREFOX&&(o=1e3*(o>>>0),t="TIAS"),e=e.replace(s[0],Je(d=Je(h="".concat(s[0],"b=")).call(h,t,":")).call(d,o,"\r\n"))}return e}(e,this.codec,this.videoTrack._encoderConfig)),this.audioTrack&&this.audioTrack._encoderConfig&&(e=VS(e,this.audioTrack._encoderConfig)),function(e){const t=ma();return t.name!==ha.SAFARI&&t.os!==da.IOS?e:e.replace(/a=.*video-orientation\r\n/g,"")}(e)}createPC(){this.pc=new kS({turnServer:this.joinInfo.turnServer}),this.updateICEPromise()}async closePC(e){return this.pc.onICEConnectionStateChange=void 0,this.pc.close(),!e&&await Dp(this,ty.NEED_UNPUB)}onPCDisconnected(e){this.reportPublishEvent(!1,e.code)}async setLowStreamEncoding(e,t){try{const n=await this.pc.setVideoRtpEncodingParameters(e),r=t.getMediaStreamTrack();if(e.scaleResolutionDownBy&&n.encodings[0].scaleResolutionDownBy!==e.scaleResolutionDownBy){const n=t._videoHeight||r.getSettings().height,i=t._videoWidth||r.getSettings().width;n&&i&&await r.applyConstraints({height:n/e.scaleResolutionDownBy,width:i/e.scaleResolutionDownBy})}e.maxFramerate&&n.encodings[0].maxFramerate!==e.maxFramerate&&await r.applyConstraints({frameRate:e.maxFramerate})}catch(e){if(e instanceof pl)throw e;throw new pl(hy.LOW_STREAM_ENCODING_ERROR,e.message)}}}function ZS(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function $S(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=ZS(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=ZS(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}class KS extends Py{constructor(e,t,n,r){var i,o,s;super(e,Je(i=Je(o=Je(s="track-".concat(e.kind,"-")).call(s,t,"-")).call(o,r,"_")).call(i,kp(5,""))),this._isDestroyed=!1,this._userId=t,this._uintId=n}getUserId(){return this._userId}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource()}_destroy(){this._isDestroyed=!0,Rc.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}}class YS extends KS{constructor(e,t,n,r){super(e,t,n,r),this.trackMediaType="video",this.updateMediaStreamTrackResolution()}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==kA.PLAYING)}getStats(){return Hp(()=>{Rc.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")},"remoteVideoTrackGetStatsWarning"),xp(this,my.GET_STATS)||$S({},sy)}play(e,t={}){const n=ky.reportApiInvoke(null,{tag:GA.TRACER,name:Nl.REMOTE_VIDEO_TRACK_PLAY,options:[this.getTrackId(),"string"==typeof e?e:"HTMLElement",t]});if("string"==typeof e){const t=document.getElementById(e);var r;t?e=t:(Rc.warning(Je(r="[".concat(this.getTrackId(),'] can not find "#')).call(r,e,'" element, use document.body')),e=document.body)}Rc.debug("[".concat(this.getTrackId(),"] start video playback"),ve(t));const i=$S({fit:"cover"},t,{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(this._player=new H_(i),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.emit(Ey.FIRST_FRAME_DECODED)}),this._player.play(),n.onSuccess()}stop(){const e=ky.reportApiInvoke(null,{tag:GA.TRACER,name:Nl.REMOTE_VIDEO_TRACK_STOP,options:[this.getTrackId()]});if(!this._player)return e.onSuccess();this._player.destroy(),this._player=void 0,Rc.debug("[".concat(this.getTrackId(),"] stop video playback")),e.onSuccess()}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){Lp(this._originMediaStreamTrack).then(([e,t])=>{this._videoHeight=t,this._videoWidth=e}).catch(Np)}_updatePlayerSource(){Rc.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:i,slot:o}=r;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){const e=Ev.checkOneElementVisible(i),t=rr({},e);return t.visible||ky.reportApiInvoke(null,{tag:GA.TRACER,name:Nl.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]}).onSuccess("Not visible because of ".concat(t.reason)),t}return}catch(e){throw new pl(ll.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}}class JS extends KS{constructor(e,t,n,r){super(e,t,n,r),this.trackMediaType="audio",this._useAudioElement=!0,this._volume=100,this._source=new Ah(e,!0),this._source.once(ny.RECEIVE_TRACK_BUFFER,()=>{this.emit(Ey.FIRST_FRAME_DECODED)})}get isPlaying(){return this._useAudioElement?Mh.isPlaying(this.getTrackId()):this._source.isPlayed}setAudioFrameCallback(e,t=4096){if(!e)return this._source.removeAllListeners(ny.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(ny.ON_AUDIO_BUFFER),this._source.on(ny.ON_AUDIO_BUFFER,t=>e(t))}setVolume(e){const t=ky.reportApiInvoke(null,{tag:GA.TRACER,name:Nl.REMOTE_AUDIO_SET_VOLUME,options:[this.getTrackId(),e]},300);this._volume=e,this._useAudioElement?Mh.setVolume(this.getTrackId(),e):this._source.setVolume(e/100),t.onSuccess()}async setPlaybackDevice(e){const t=ky.reportApiInvoke(null,{tag:GA.TRACER,name:Nl.REMOTE_AUDIO_SET_OUTPUT_DEVICE,options:[this.getTrackId(),e]});if(!this._useAudioElement)throw new pl(ll.NOT_SUPPORTED,"your browser does not support setting the audio output device");try{await Mh.setSinkID(this.getTrackId(),e)}catch(e){throw t.onError(e),e}t.onSuccess()}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Hp(()=>{Rc.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")},"remoteAudioTrackGetStatsWarning"),xp(this,my.GET_STATS)||$S({},oy)}play(){const e=ky.reportApiInvoke(null,{tag:GA.TRACER,name:Nl.REMOTE_AUDIO_TRACK_PLAY,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(Rc.debug("[".concat(this.getTrackId(),"] use audio element to play")),Mh.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play(),e.onSuccess()}stop(){const e=ky.reportApiInvoke(null,{tag:GA.TRACER,name:Nl.REMOTE_AUDIO_TRACK_STOP,options:[this.getTrackId()]});Rc.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?Mh.stop(this.getTrackId()):this._source.stop(),e.onSuccess()}_destroy(){super._destroy(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){Rc.debug("[".concat(this.getTrackId(),"] update player source track")),this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&Mh.updateTrack(this.getTrackId(),this._mediaStreamTrack)}}class XS extends PS{constructor(e,t,n,r){super(n,e.uid),this.type="sub",this.unusedTracks=[],this.onTrack=e=>{var t,n;if("audio"===e.kind&&!this.subscribeOptions.audio||"video"===e.kind&&!this.subscribeOptions.video)return this.unusedTracks.push(e),void Rc.debug(Je(n="[".concat(this.connectionId,"] unused ontrack event, kind: ")).call(n,e.kind));Rc.debug(Je(t="[".concat(this.connectionId,"] emit pc ontrack after subscribe ")).call(t,e.kind),e);const r="audio"===e.kind?this.user._audioTrack:this.user._videoTrack;var i,o;r?r._updateOriginMediaStreamTrack(e):"audio"===e.kind?(this.pc._statsFilter.setIsFirstAudioDecoded(!1),this.user._audioTrack=new JS(e,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Rc.info(Je(i="[".concat(this.connectionId,"] create remote audio track: ")).call(i,this.user._audioTrack.getTrackId())),this.bindTrackEvents(this.user._audioTrack)):(this.user._videoTrack=new YS(e,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Rc.info(Je(o="[".concat(this.connectionId,"] create remote video track: ")).call(o,this.user._videoTrack.getTrackId())),this.bindTrackEvents(this.user._videoTrack))},this.handleGetRemoteAudioStats=e=>{e(this.statsCollector.getRemoteAudioTrackStats(this.connectionId))},this.handleGetRemoteVideoStats=e=>{e(this.statsCollector.getRemoteVideoTrackStats(this.connectionId))},this.handleGetSessionID=e=>{e(this.joinInfo.sid)},this.user=e,this.statsCollector=t,this.statsCollector.addRemoteConnection(this),this.subscribeOptions=r}async startP2PConnection(){return new fo(async(e,t)=>{const n=r=>{if("connected"===r&&(ky.subscribe(this.joinInfo.sid,{lts:this.startTime,succ:!0,video:this.subscribeOptions.video,audio:this.subscribeOptions.audio,peerid:this.user.uid,ec:null,subscribeRequestid:this.ID,p2pid:this.pc.ID}),this.off(ty.CONNECTION_STATE_CHANGE,n),e()),"disconnected"===r){if(this.off(ty.CONNECTION_STATE_CHANGE,n),this.disconnectedReason)return t(this.disconnectedReason);t(new pl(ll.OPERATION_ABORTED,"subscribe abort"))}};if(this.on(ty.CONNECTION_STATE_CHANGE,n),this.disconnectedReason=void 0,this.connectionState="connecting",this.startTime=Ma(),!this.subscribeOptions)return void t(new pl(ll.UNEXPECTED_ERROR,"no subscribe options"));const r=new MediaStream,i=new fo(e=>{this.pc.onTrack=(t,n)=>{var i,o;if("audio"===t.kind&&!this.subscribeOptions.audio||"video"===t.kind&&!this.subscribeOptions.video)return this.unusedTracks.push(t),void Rc.debug(Je(o="[".concat(this.connectionId,"] unused ontrack event ")).call(o,t.kind));r.addTrack(t);const s={audio:r.getAudioTracks().length>0,video:r.getVideoTracks().length>0};Rc.debug(Je(i="[".concat(this.connectionId,"] subscribe ontrack: ")).call(i,t.kind),n,t),function(e,t){var n,r;const i=cl(n=or(e)).call(n),o=cl(r=or(t)).call(r);for(let s=0;s<i.length;s+=1){if(i[s]!==o[s])return!1;if(e[i[s]]!==t[i[s]])return!1}return!0}(s,this.subscribeOptions)&&(this.pc.onTrack=this.onTrack,Rc.debug("[".concat(this.connectionId,"] get all subscribed tracks")),e(r))}});try{const e=function(e){return ma().name!==ha.FIREFOX?e:e.replace("/recvonly http://www.webrtc.org/experiments/rtp-hdrext/playout-delay"," http://www.webrtc.org/experiments/rtp-hdrext/playout-delay")}(jS(await this.pc.createOfferSDP()));await this.pc.setOfferSDP(e),Rc.debug("[".concat(this.connectionId,"] create and set offer success"));const t={messageType:"OFFER",sdp:e,offererSessionId:104,retry:!0},n=await Dp(this,ty.NEED_ANSWER,t);await this.pc.setAnswerSDP(jS(n.sdp)),Rc.debug("[".concat(this.connectionId,"] set answer success"));const r=await fo.all([i,this.icePromise]),a=r[0].getAudioTracks()[0],c=r[0].getVideoTracks()[0];var o,s;a&&(this.user._audioTrack?this.user._audioTrack._updateOriginMediaStreamTrack(a):(this.user._audioTrack=new JS(a,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Rc.info(Je(o="[".concat(this.connectionId,"] create remote audio track: ")).call(o,this.user._audioTrack.getTrackId())),this.bindTrackEvents(this.user._audioTrack))),c&&(this.user._videoTrack?this.user._videoTrack._updateOriginMediaStreamTrack(c):(this.user._videoTrack=new YS(c,this.getUserId(),this.user._uintid,this.joinInfo.clientId),Rc.info(Je(s="[".concat(this.connectionId,"] create remote video track: ")).call(s,this.user._videoTrack.getTrackId())),this.bindTrackEvents(this.user._videoTrack))),this.connectionState="connected",this.startUploadStats()}catch(e){this.off(ty.CONNECTION_STATE_CHANGE,n),this.connectionState="disconnected",ky.subscribe(this.joinInfo.sid,{lts:this.startTime,succ:!1,video:this.subscribeOptions.video,audio:this.subscribeOptions.audio,peerid:this.user.uid,ec:e.code,subscribeRequestid:this.ID,p2pid:this.pc.ID}),t(e)}})}async closeP2PConnection(e){"disconnected"!==this.connectionState&&(this.stopUploadStats(),this.statsCollector.removeConnection(this.connectionId),this.connectionState="disconnected",await this.setSubscribeOptions({audio:!1,video:!1}),await this.closePC(e),this.removeAllListeners())}getNetworkQuality(){const e=this.pc.getStats();if(!e.audioRecv[0]&&!e.videoRecv[0])return 1;const t=xp(this,ty.NEED_SIGNAL_RTT),n=e.rtt,r=(n&&t?(n+t)/2:n||t)||0,i=e.audioRecv[0]?e.audioRecv[0].jitterMs:void 0,o=e.recvPacketLossRate;let s=.7*o*100/50+.3*r/1500;return i&&(s=.6*o*100/50+.2*r/1500+.2*i/400),s<.1?1:s<.17?2:s<.36?3:s<.59?4:5}uploadStats(e){const t=this.user.audioTrack?function(e,t){const n=e.audioRecv[0];if(!n)return null;const r={id:kp(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:n.ssrc.toString()};return r.bytesReceived=n.bytes.toString(),r.packetsLost=n.packetsLost.toString(),r.packetsReceived=n.packets.toString(),n.outputLevel?r.A_aol=Math.round(100*n.outputLevel).toString():r.A_aol=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),r.A_apol=Math.round(100*t._source.getAccurateVolumeLevel()).toString(),t&&(r.A_artd=t._originMediaStreamTrack.enabled&&t._mediaStreamTrack.enabled?"0":"1"),r.A_jr=n.jitterMs.toString(),r.A_jbm=Math.floor(n.jitterBufferMs).toString(),r.A_cdm=Math.floor(n.jitterBufferMs).toString(),r}(e,this.user.audioTrack):void 0,n=this.user.videoTrack?function(e,t){const n=e.videoRecv[0];if(!n)return null;const r={id:kp(10,""),timestamp:new Date(e.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:n.ssrc.toString()};var i;return r.bytesReceived=n.bytes.toString(),r.packetsLost=n.packetsLost.toString(),r.packetsReceived=n.packets.toString(),n.framesRateFirefox&&(r.A_frr=n.framesRateFirefox.toString()),n.receivedFrame&&(r.A_frr=n.receivedFrame.frameRate.toString()),r.A_frd=n.decodeFrameRate.toString(),n.outputFrame&&(r.A_fro=n.outputFrame.frameRate.toString()),void 0!==n.jitterBufferMs&&(r.A_jbm=Math.floor(n.jitterBufferMs).toString()),void 0!==n.currentDelayMs&&(r.A_cdm=Math.floor(n.currentDelayMs).toString()),r.A_fs=n.firsCount.toString(),r.A_ns=n.nacksCount.toString(),r.A_ps=n.plisCount.toString(),t&&(r.A_vrtd=t._originMediaStreamTrack.enabled&&t._mediaStreamTrack.enabled?"0":"1"),t._player&&t._player.freezeTimeCounterList.length>0&&(r.A_vrft=To(i=t._player.freezeTimeCounterList).call(i,0,1)[0].toString()),r}(e,this.user.videoTrack):void 0;t&&Vp(()=>this.emit(ty.NEED_UPLOAD,XA.SUBSCRIBE_STATS,t)),n&&Vp(()=>this.emit(ty.NEED_UPLOAD,XA.SUBSCRIBE_STATS,n))}uploadSlowStats(e){}uploadRelatedStats(e,t){const n=!0===this.pc._statsFilter.videoIsReady,r=function(e,t,n){const r=e.audioRecv[0];if(!r)return null;const i=Zy.isRemoteAudioFreeze(n);return{mediaType:"audio",isAudioMute:!1,peerId:t,googJitterReceived:r.jitterMs.toString(),isFreeze:i,bytesReceived:r.bytes.toString(),packetsReceived:r.packets.toString(),packetsLost:r.packetsLost.toString(),frameReceived:r.receivedFrames.toString(),frameDropped:r.droppedFrames.toString()}}(e,this.getUserId(),this.user.audioTrack),i=function(e,t,n,r,i){const o=t.videoRecv[0],s=r?r.videoRecv[0]:void 0;if(!o)return null;const a=Zy.isRemoteVideoFreeze(i,o,s)&&e,c={mediaType:"video",isVideoMute:!1,peerId:n,frameRateReceived:o.receivedFrame&&o.receivedFrame.frameRate.toString(),frameRateDecoded:o.decodedFrame&&o.decodedFrame.frameRate.toString(),isFreeze:a,bytesReceived:o.bytes.toString(),packetsReceived:o.packets.toString(),packetsLost:o.packetsLost.toString()};return o.framesRateFirefox&&(c.frameRateDecoded=o.framesRateFirefox.toString(),c.frameRateReceived=o.framesRateFirefox.toString()),c}(n,e,this.getUserId(),t,this.user.videoTrack);r&&Vp(()=>{this.emit(ty.NEED_UPLOAD,XA.SUBSCRIBE_RELATED_STATS,r)}),i&&Vp(()=>{this.emit(ty.NEED_UPLOAD,XA.SUBSCRIBE_RELATED_STATS,i)})}emitOnTrackFromUnusedTracks(){if(!this.subscribeOptions)return;const e=this.subscribeOptions.video;if(this.subscribeOptions.audio){var t;const e=Qo(t=this.unusedTracks).call(t,e=>"audio"===e.kind&&"live"===e.readyState);Up(this.unusedTracks,e),e&&this.onTrack(e)}if(e){var n;const e=Qo(n=this.unusedTracks).call(n,e=>"video"===e.kind&&"live"===e.readyState);Up(this.unusedTracks,e),e&&this.onTrack(e)}}async setSubscribeOptions(e){var t,n,r,i;if(e.audio!==this.subscribeOptions.audio||e.video!==this.subscribeOptions.video){if("connecting"===this.connectionState)try{await this.createWaitConnectionConnectedPromise()}catch(e){throw new pl(ll.OPERATION_ABORTED,"can not update subscribe options, operation abort")}e.audio===this.subscribeOptions.audio&&e.video===this.subscribeOptions.video||(Rc.debug(Je(t=Je(n=Je(r=Je(i="[".concat(this.connectionId,"] update subscribe options [a: ")).call(i,this.subscribeOptions.audio,", v: ")).call(r,this.subscribeOptions.video,"] -> [a: ")).call(n,e.audio,", v: ")).call(t,e.video,"]")),this.subscribeOptions=e,!e.audio&&this.user._audioTrack&&(this.unusedTracks.push(this.user._audioTrack._originMediaStreamTrack),this.user._audioTrack._destroy(),this.unbindTrackEvents(this.user._audioTrack),this.user._audioTrack=void 0),!e.video&&this.user._videoTrack&&(this.unusedTracks.push(this.user._videoTrack._originMediaStreamTrack),this.user._videoTrack._destroy(),this.unbindTrackEvents(this.user._videoTrack),this.user._videoTrack=void 0),this.emitOnTrackFromUnusedTracks())}}createPC(){this.pc=new OS({turnServer:this.joinInfo.turnServer}),this.pc.onFirstAudioDecoded=()=>{this.user.audioTrack&&this.user.audioTrack.emit(Ey.FIRST_FRAME_DECODED),ky.firstRemoteFrame(this.joinInfo.sid,UA.FIRST_AUDIO_DECODE,FA.FIRST_AUDIO_DECODE,{peer:this.user._uintid,subscribeElapse:Ma()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.pc.onFirstAudioReceived=()=>{ky.firstRemoteFrame(this.joinInfo.sid,UA.FIRST_AUDIO_RECEIVED,FA.FIRST_AUDIO_RECEIVED,{peer:this.user._uintid,subscribeElapse:Ma()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.pc.onFirstVideoDecoded=(e,t)=>{ky.firstRemoteFrame(this.joinInfo.sid,UA.FIRST_VIDEO_DECODE,FA.FIRST_VIDEO_DECODE,{peer:this.user._uintid,videowidth:e,videoheight:t,subscribeElapse:Ma()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.pc.onFirstVideoReceived=()=>{ky.firstRemoteFrame(this.joinInfo.sid,UA.FIRST_VIDEO_RECEIVED,FA.FIRST_VIDEO_RECEIVED,{peer:this.user._uintid,subscribeElapse:Ma()-this.startTime,subscribeRequestid:this.ID,p2pid:this.pc.ID})},this.updateICEPromise()}async closePC(e){return this.pc.audioTrack&&this.pc.audioTrack.stop(),this.pc.videoTrack&&this.pc.videoTrack.stop(),this.pc.onTrack=void 0,this.pc.onICEConnectionStateChange=void 0,this.pc.close(),!e&&await Dp(this,ty.NEED_UNSUB)}onPCDisconnected(e){ky.subscribe(this.joinInfo.sid,{lts:this.startTime,succ:!1,video:this.subscribeOptions.video,audio:this.subscribeOptions.audio,peerid:this.user.uid,ec:e.code,subscribeRequestid:this.ID,p2pid:this.pc.ID})}bindTrackEvents(e){e instanceof JS?e.addListener(my.GET_STATS,this.handleGetRemoteAudioStats):e instanceof YS&&e.addListener(my.GET_STATS,this.handleGetRemoteVideoStats)}unbindTrackEvents(e){e instanceof JS?e.off(my.GET_STATS,this.handleGetRemoteAudioStats):e instanceof YS&&e.off(my.GET_STATS,this.handleGetRemoteVideoStats)}}class eb{constructor(e,t){this._trust_in_room_=!0,this._trust_audio_enabled_state_=!0,this._trust_video_enabled_state_=!0,this._trust_audio_mute_state_=!0,this._trust_video_mute_state_=!0,this._trust_stream_added_state_=!0,this._audio_muted_=!1,this._video_muted_=!1,this._audio_enabled_=!0,this._video_enabled_=!0,this._audio_added_=!1,this._video_added_=!1,this.uid=e,this._uintid=t}get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio)return this._audioTrack}get videoTrack(){if(this.hasVideo)return this._videoTrack}}function tb(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function nb(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=tb(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=tb(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}var rb=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Ur(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&hr(t,n,s),s},ib=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class ob extends Mu{constructor(e){var t,n,r,i;let o;if(super(),this._users=[],this._sessionId=null,this._bindEnabledTracks=[],this._leaveMutex=new ah("client-leave"),this._publishMutex=new ah("client-publish"),this._subscribeMutex=new xn,this._remoteStream=new xn,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._turnServer={servers:[],mode:"auto"},this._cloudProxyServerMode="disabled",this._isDualStreamEnabled=!1,this._streamFallbackTypeCacheMap=new xn,this._remoteStreamTypeCacheMap=new xn,this._axiosCancelSource=Sc.CancelToken.source(),this._networkQualitySensitivity="normal",this._useLocalAccessPoint=!1,this._handleLocalTrackEnable=(e,t,n)=>{this.publish(e,!1).then(t).catch(n)},this._handleLocalTrackDisable=(e,t,n)=>{this.unpublish(e,!1).then(t).catch(n)},this._handleUserOnline=e=>{var t;this.isStringUID&&"string"!=typeof e.uid&&Rc.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const n=Qo(t=this._users).call(t,t=>t.uid===e.uid);if(n)n._trust_in_room_=!0;else{const t=new eb(e.uid,e.uint_id||e.uid);this._users.push(t),Rc.debug("[".concat(this._clientId,"] user online"),e.uid),this.emit(CA.USER_JOINED,t)}},this._handleUserOffline=e=>{var t;const n=Qo(t=this._users).call(t,t=>t.uid===e.uid);n&&(this._handleRemoveStream(e),Up(this._users,n),this._remoteStreamTypeCacheMap.delete(n.uid),this._streamFallbackTypeCacheMap.delete(n.uid),Rc.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.emit(CA.USER_LEAVED,n,e.reason))},this._handleAddAudioOrVideoStream=(e,t,n)=>{var r,i,o;const s=Qo(r=this._users).call(r,e=>e.uid===t);if(!s)return void Rc.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));Rc.debug(Je(i=Je(o="[".concat(this._clientId,"] stream added with uid ")).call(o,t,", type ")).call(i,e));const a="audio"===e?s.hasAudio:s.hasVideo;var c,l;s._uintid||(s._uintid=n||t),s._trust_stream_added_state_=!0,"audio"===e?s._audio_added_=!0:s._video_added_=!0,("audio"===e?s.hasAudio:s.hasVideo)&&!a&&(Rc.info(Je(c=Je(l="[".concat(this._clientId,"] remote user ")).call(l,s.uid," published ")).call(c,e)),this.emit(CA.USER_PUBLISHED,s,e)),"video"===e?ky.onGatewayStream(this._sessionId,UA.ON_ADD_VIDEO_STREAM,FA.ON_ADD_VIDEO_STREAM,{peer:n||t}):ky.onGatewayStream(this._sessionId,UA.ON_ADD_AUDIO_STREAM,FA.ON_ADD_AUDIO_STREAM,{peer:n||t});const u=this._remoteStream.get(t);u&&u.readyToReconnect&&"connecting"===u.connectionState&&u.reconnectPC().catch(e=>{Rc.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})},this._handleRemoveStream=e=>{var t,n;const r=Qo(t=this._users).call(t,t=>t.uid===e.uid);if(!r)return void Rc.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));Rc.debug(Je(n="[".concat(this._clientId,"] stream removed with uid ")).call(n,e.uid));let i=()=>{};r.hasAudio&&r.hasVideo?i=()=>{var e,t;Rc.info(Je(e="[".concat(this._clientId,"] remote user ")).call(e,r.uid," unpublished audio track")),this.emit(CA.USER_UNPUBLISHED,r,"audio"),Rc.info(Je(t="[".concat(this._clientId,"] remote user ")).call(t,r.uid," unpublished video track")),this.emit(CA.USER_UNPUBLISHED,r,"video")}:r.hasVideo?i=()=>{var e;Rc.info(Je(e="[".concat(this._clientId,"] remote user ")).call(e,r.uid," unpublished video track")),this.emit(CA.USER_UNPUBLISHED,r,"video")}:r.hasAudio&&(i=()=>{var e;Rc.info(Je(e="[".concat(this._clientId,"] remote user ")).call(e,r.uid," unpublished audio track")),this.emit(CA.USER_UNPUBLISHED,r,"audio")}),r._trust_stream_added_state_=!0,r._audio_added_=!1,r._video_added_=!1;const o=this._remoteStream.get(r.uid);o&&(o.closeP2PConnection(),this._remoteStream.delete(r.uid)),ky.onGatewayStream(this._sessionId,UA.ON_REMOVE_STREAM,FA.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),i()},this._handleSetStreamLocalEnable=(e,t,n)=>{var r,i,o,s,a,c;const l=Qo(r=this._users).call(r,e=>e.uid===t);if(!l)return void Rc.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));Rc.debug(Je(i=Je(o=Je(s="[".concat(this._clientId,"] local ")).call(s,e," ")).call(o,n?"enabled":"disabled"," with uid ")).call(i,t));const u="audio"===e?l.hasAudio:l.hasVideo;if("audio"===e){l._trust_audio_enabled_state_=!0;const e=l._audio_enabled_;if(l._audio_enabled_=n,l._audio_enabled_===e)return;{var d,h;const e=l._audio_enabled_?"enable-local-audio":"disable-local-audio";Rc.debug(Je(d=Je(h="[".concat(this._clientId,"] user-info-updated, uid: ")).call(h,t,", msg: ")).call(d,e)),this.emit(CA.USER_INFO_UPDATED,t,e)}}else{l._trust_video_enabled_state_=!0;const e=l._video_enabled_;if(l._video_enabled_=n,l._video_enabled_===e)return;{var p,f;const e=l._video_enabled_?"enable-local-video":"disable-local-video";Rc.debug(Je(p=Je(f="[".concat(this._clientId,"] user-info-update, uid: ")).call(f,t,", msg: ")).call(p,e)),this.emit(CA.USER_INFO_UPDATED,t,e)}}const g="audio"===e?l.hasAudio:l.hasVideo;if(u===g)return;var m,_;if(!u&&g)return Rc.info(Je(m=Je(_="[".concat(this._clientId,"] remote user ")).call(_,t," published ")).call(m,e)),void this.emit(CA.USER_PUBLISHED,l,e);const v=this._remoteStream.get(t);if(v){const e=nb({},v.subscribeOptions);e.audio=!!l.hasAudio&&e.audio,e.video=!!l.hasVideo&&e.video,e.audio||e.video?v.setSubscribeOptions(e):(v.closeP2PConnection().catch(e=>{Rc.warning("close sub pc error",e)}),this._remoteStream.delete(l.uid))}Rc.info(Je(a=Je(c="[".concat(this._clientId,"] remote user ")).call(c,l.uid," unpublished ")).call(a,e)),this.emit(CA.USER_UNPUBLISHED,l,e)},this._handleMuteStream=(e,t,n)=>{var r,i,o;Rc.debug("[".concat(this._clientId,"] receive mute message"),e,t,n);const s=Qo(r=this._users).call(r,t=>t.uid===e);var a;if(!s)return void Rc.warning(Je(a="[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ")).call(a,e));const c="audio"===t?s.hasAudio:s.hasVideo;if("audio"===t){s._trust_audio_mute_state_=!0;const t=s._audio_muted_;if(s._audio_muted_=n,s._audio_muted_===t)return;{var l,u;const t=s._audio_muted_?"mute-audio":"unmute-audio";Rc.debug(Je(l=Je(u="[".concat(this._clientId,"] user-info-update, uid: ")).call(u,e,", msg: ")).call(l,t)),this.emit(CA.USER_INFO_UPDATED,e,t)}}else{s._trust_video_mute_state_=!0;const t=s._video_muted_;if(s._video_muted_=n,s._video_muted_===t)return;{var d,h;const t=s._video_muted_?"mute-video":"unmute-video";Rc.debug(Je(d=Je(h="[".concat(this._clientId,"] user-info-update, uid: ")).call(h,e,", msg: ")).call(d,t)),this.emit(CA.USER_INFO_UPDATED,e,t)}}const p="audio"===t?s.hasAudio:s.hasVideo;if(c===p)return;var f,g;if(!c&&p)return Rc.info(Je(f=Je(g="[".concat(this._clientId,"] remote user ")).call(g,e," published ")).call(f,t)),void this.emit(CA.USER_PUBLISHED,s,t);const m=this._remoteStream.get(e);if(m){const e=nb({},m.subscribeOptions);e.audio=!!s.hasAudio&&e.audio,e.video=!!s.hasVideo&&e.video,"video"===t&&m.pc._statsFilter.setVideoIsReady(!1),e.audio||e.video?m.setSubscribeOptions(e):(m.closeP2PConnection().catch(e=>{Rc.warning("close sub pc error",e)}),this._remoteStream.delete(s.uid))}Rc.info(Je(i=Je(o="[".concat(this._clientId,"] remote user ")).call(o,e," unpublished ")).call(i,t)),this.emit(CA.USER_UNPUBLISHED,s,t)},this._handleP2PLost=e=>{Rc.debug("[".concat(this._clientId,"] receive p2p lost"),e);let t=null;if(this._highStream&&this._highStream.pc.ID===e.p2pid)t=this._highStream;else if(this._lowStream&&this._lowStream.pc.ID===e.p2pid)t=this._lowStream;else{var n;Xn(n=this._remoteStream).call(n,n=>{n.pc.ID===e.p2pid&&(t=n)})}t?t.emit(ty.GATEWAY_P2P_LOST,e.p2pid):Rc.warning("P2PLost stream not found",e)},this._handleTokenWillExpire=()=>{Rc.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.emit(CA.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)},this._handleBeforeUnload=e=>{void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),Rc.info("[".concat(this._clientId,"] auto leave onbeforeunload")))},this._handleUpdateNetworkQuality=()=>{var e;if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.emit(CA.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const t={downlinkNetworkQuality:0,uplinkNetworkQuality:0};this._highStream&&!this._highStream.detecting&&(t.uplinkNetworkQuality=this._highStream.getNetworkQuality());let n=0;Xn(e=this._remoteStream).call(e,e=>n+=e.getNetworkQuality()),this._remoteStream.size>0&&(t.downlinkNetworkQuality=Math.round(n/this._remoteStream.size)),this.emit(CA.NETWORK_QUALITY,t)},this._codec=e.codec,this._mode=e.mode,e.proxyServer&&(this._proxyServer=e.proxyServer,ky.setProxyServer(this._proxyServer),Rc.setProxyServer(this._proxyServer)),e.turnServer&&(this._turnServer=nb({},this._turnServer,{mode:"manual"},e.turnServer)),this._clientId=kp(5,"client-"),Rc.info(Je(t=Je(n=Je(r=Je(i="[".concat(this._clientId,"] Initializing AgoraRTC client v")).call(i,kc," build: ")).call(r,wc,", mode: ")).call(n,this._mode,", codec: ")).call(t,this._codec)),this._performanceRecorder=AA(this._clientId,"join"),e.clientRoleOptions)try{MA(e.clientRoleOptions),o=rr({},e.clientRoleOptions)}catch(e){var s;Rc.warning(Je(s="[".concat(this._clientId,"] ")).call(s,e.toString()))}this._statsCollector=new Zy(this._clientId),this._statsCollector.onStatsException=(e,t,n)=>{var r,i,o;Rc.debug(Je(r=Je(i=Je(o="[".concat(this._clientId,"] receive exception msg, code: ")).call(o,e,", msg: ")).call(i,t,", uid: ")).call(r,n)),this.emit(CA.EXCEPTION,{code:e,msg:t,uid:n})},this._statsCollector.onUploadPublishDuration=(e,t,n,r)=>{var i;const o=Qo(i=this._users).call(i,t=>t.uid===e);o&&ky.peerPublishStatus(this._sessionId,{subscribeElapse:r,audioPublishDuration:t,videoPublishDuration:n,peer:o._uintid})},this._gateway=new cS({clientId:this._clientId,mode:this._mode,codec:this._codec,websocketRetryConfig:e.websocketRetryConfig||Zd,httpRetryConfig:e.httpRetryConfig||Zd,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:o}),this._config=e,this._configDistribute=new L_,this._handleGatewayEvents()}get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._highStream?this._highStream.getAllTracks():[]}get uid(){return this._uid}get channelName(){return this._channelName}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}async join(e,t,n,r,i){var o;this._performanceRecorder.checkPoint("startJoin");const s=mA(),a=_A()?window.isSecureContext:"Browser Not Support",c=()=>{Rc.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser")};_A()?window.isSecureContext||c():s||c();const l=ky.reportApiInvoke(this._sessionId,{name:jA.JOIN,options:[e,t,n,r],states:{isHttps:s,isSecureContext:a},tag:GA.TRACER});try{if(!n&&null!==n)throw new pl(ll.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&_l(n,"token",1,2047),_l(e,"appid",1,2047),El(t),r&&Al(r),i&&_l(i,"optionalInfo",1,2047)}catch(e){throw l.onError(e),e}if(Rc.info(Je(o="[".concat(this._clientId,"] start join channel ")).call(o,t)),this._leaveMutex.isLocked&&(Rc.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),Rc.debug("[".concat(this._clientId,"] join: continue"))),"DISCONNECTED"!==this.connectionState){const e=new pl(ll.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw l.onError(e),e}this._sessionId||(this._sessionId=Op()),this._gateway.state="CONNECTING";const u={clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof r?r:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:n||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:i,useLocalAccessPoint:this._useLocalAccessPoint};"string"==typeof r&&(u.stringUid=r,this._uintUid?(u.uid=this._uintUid,this._uintUid=void 0):u.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret&&(u.aesmode=this._encryptionMode,u.aespassword=await ap(this._encryptionSecret),this._encryptionSalt&&(u.aessalt=this._encryptionSalt)),this._startSession(this._sessionId,{channel:t,appId:e}),Fa(()=>{"CONNECTING"===this.connectionState&&ky.joinChannelTimeout(this._sessionId,5)},5e3);try{var d;let r;if("443only"===u.cloudProxyServer)u.proxyServer=jc("PROXY_SERVER_TYPE2");else if("proxy3"===u.cloudProxyServer||"proxy4"===u.cloudProxyServer||"proxy5"===u.cloudProxyServer){const e=jc("PROXY_SERVER_TYPE3");hl(e)?u.proxyServer=e[0]:u.proxyServer=e}if(ky.setProxyServer(u.proxyServer),Rc.setProxyServer(u.proxyServer),this._performanceRecorder.checkPoint("startRequestAp"),u.stringUid&&!u.uid&&"normal"===u.cloudProxyServer){var h;await vS(u,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd,!1);const e=await ES(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd);Rc.debug(Je(h="getUserAccount Success ".concat(u.stringUid," => ")).call(h,e)),u.uid=e,r=await _S(u,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd)}else if(u.stringUid&&!u.uid){var p;const e=await ES(u.stringUid,u,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd);Rc.debug(Je(p="getUserAccount Success ".concat(u.stringUid," => ")).call(p,e)),u.uid=e,r=await vS(u,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd,!0)}else r=await vS(u,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd,!0);this._performanceRecorder.checkPoint("startJoinGateway"),this._configDistribute.startGetConfigDistribute(u,this._axiosCancelSource.token),this._configDistribute.on(Sy.UPDATE_BITRATE_LIMIT,e=>{this._highStream&&this._highStream.handleUpdateBitrateLimit(e.uplink),e.low_stream_uplink&&this._lowStream&&this._lowStream.handleUpdateBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}),this._key=n||e,this._joinInfo=nb({},u,{cid:r.gatewayInfo.cid,uid:u.uid?u.uid:r.gatewayInfo.uid,vid:r.gatewayInfo.vid,apResponse:r.gatewayInfo.res,uni_lbs_ip:r.gatewayInfo.uni_lbs_ip,gatewayAddrs:r.gatewayInfo.gatewayAddrs});const i=await this._gateway.join(this._joinInfo,this._key);return l.onSuccess(i),this._appId=e,this._channelName=u.cname,this._uid=i,this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener("beforeunload",this._handleBeforeUnload),Rc.info(Je(d="[".concat(this._clientId,"] Joining channel success: ")).call(d,t)),Fa(()=>{Rc.startUpload()},5e3),this._performanceRecorder.checkPoint("finishJoin"),Yc(this),i}catch(e){const t=hl(e)?e[0]:e;throw Rc.error("[".concat(this._clientId,"] Joining channel failed, rollback"),t),t.code!==ll.OPERATION_ABORTED&&(this._gateway.state="DISCONNECTED",this._reset()),l.onError(t),t}}async leave(){const e=ky.reportApiInvoke(this._sessionId,{name:jA.LEAVE,options:[],tag:GA.TRACER});Rc.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener("beforeunload",this._handleBeforeUnload),this._reset(),Jc(this);const t=await this._leaveMutex.lock();if("DISCONNECTED"===this.connectionState)return Rc.info("[".concat(this._clientId,"] Leaving channel repeated, success")),t(),e.onSuccess();await this._gateway.leave("CONNECTED"!==this.connectionState),Rc.info("[".concat(this._clientId,"] Leaving channel success")),t(),e.onSuccess()}async publish(e,t=!0){var n,r;hl(e)||(e=[e]);const i=ky.reportApiInvoke(this._sessionId,{name:jA.PUBLISH,options:vo(e).call(e,e=>e?Object(e).toString():"null"),tag:GA.TRACER});if(0===e.length){const e=new pl(ll.INVALID_PARAMS,"track list is empty");return i.onError(e),e.throw()}if("audience"===this._gateway.role){const e=new pl(ll.INVALID_OPERATION,"audience can not publish stream");return i.onError(e),e.throw()}for(const s of e){if(!(s instanceof Dy)){const e=new pl(ll.INVALID_PARAMS,"pamameter is not local track");return i.onError(e),e.throw()}if(!s._enabled&&t){const e=new pl(ll.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(s.getTrackId()));return i.onError(e),e.throw()}}if(Rc.info(Je(n="[".concat(this._clientId,"] Publishing tracks, id ")).call(n,vo(e).call(e,e=>"".concat(e.getTrackId()," ")))),await this._configDistribute.awaitConfigDistributeComplete(),t&&Xn(e).call(e,e=>{var t;const n=this._configDistribute.getBitrateLimit();var r;e instanceof US&&n&&e.setBitrateLimit(n.uplink),-1===Lo(t=this._bindEnabledTracks).call(t,e)&&(e.addListener(my.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.addListener(my.NEED_REMOVE_TRACK,this._handleLocalTrackDisable),this._bindEnabledTracks.push(e),Ia()&&e.muted&&Rc.debug(Je(r="[".concat(this._clientId,"] on firefox publish a muted track ")).call(r,e.getTrackId(),", skip the pub operation and wait unmute")))}),Ia()&&0===(e=Gr(e).call(e,e=>!e.muted)).length)return void i.onSuccess(vo(e).call(e,e=>e.trackMediaType+":"+e.getTrackLabel()).toString());const o=await this._publishMutex.lock();try{const t=await this._publishHighStream(e),n=(t.audioTrack,t.videoTrack);this._isDualStreamEnabled&&n&&!this._lowStream&&await this._publishLowStream(n),o(),i.onSuccess(vo(e).call(e,e=>e.trackMediaType+":"+e.getTrackLabel()).toString())}catch(n){throw o(),t&&Xn(e).call(e,e=>{var t,n;const r=Lo(t=this._bindEnabledTracks).call(t,e);-1!==r&&(e.off(my.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.off(my.NEED_REMOVE_TRACK,this._handleLocalTrackDisable),To(n=this._bindEnabledTracks).call(n,r,1))}),i.onError(n),Rc.error("[".concat(this._clientId,"] publish error"),n.toString()),n}Rc.info(Je(r="[".concat(this._clientId,"] Publish success, id ")).call(r,vo(e).call(e,e=>"".concat(e.getTrackId()," "))))}async unpublish(e,t=!0){var n;const r=await this._publishMutex.lock();let i,o,s;try{var a,c;if(!this._highStream)return Rc.warning("[".concat(this._clientId,"] Could not find tracks to unpublish")),void(r&&r());if(i=this._highStream.getAllTracks(),e?hl(e)||(e=[e]):e=this._highStream.getAllTracks(),o=function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1){const r=e[n];if(Gr(e).call(e,e=>e===r).length!==Gr(t).call(t,e=>e===r).length)return!1}return!0}(i,e),s=ky.reportApiInvoke(this._sessionId,{name:jA.UNPUBLISH,options:vo(e).call(e,e=>e.getTrackId()),tag:GA.TRACER}),Rc.info(Je(a=Je(c="[".concat(this._clientId,"] Unpublish tracks, tracks ")).call(c,vo(e).call(e,e=>"".concat(e.getTrackId()," ")),", isClosePC: ")).call(a,o)),!this._highStream)return Rc.warning("[".concat(this._clientId,"] Could not find tracks to unpublish")),void(r&&r())}catch(e){throw r&&r(),e}try{this._lowStream&&Gr(e).call(e,e=>"video"===e.trackMediaType).length>0&&(await this._lowStream.closeP2PConnection(),this._lowStream=void 0),o?await this._highStream.closeP2PConnection():await this._highStream.removeTracks(e,t),r&&r()}catch(e){if(e.code!==ll.OPERATION_ABORTED)throw s.onError(e),Rc.error("[".concat(this._clientId,"] unpublish error"),e.toString()),r&&r(),e;Rc.debug("[".concat(this._clientId,"] ignore unpub operation abort")),r&&r()}this._highStream&&"disconnected"===this._highStream.connectionState&&(this._highStream=void 0,this._lowStream=void 0),t&&Xn(e).call(e,e=>{var t,n;const r=Lo(t=this._bindEnabledTracks).call(t,e);-1!==r&&(e.off(my.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.off(my.NEED_REMOVE_TRACK,this._handleLocalTrackDisable),To(n=this._bindEnabledTracks).call(n,r,1))}),Rc.info(Je(n="[".concat(this._clientId,"] Unpublish success,tracks ")).call(n,vo(e).call(e,e=>"".concat(e.getTrackId())))),s.onSuccess()}async subscribe(e,t){var n,r,i,o,s;gl(t,"mediaType",["audio","video"]);const a=ky.reportApiInvoke(this._sessionId,{name:jA.SUBSCRIBE,options:[e.uid,t],tag:GA.TRACER});if(!this._joinInfo){const e=new pl(ll.INVALID_OPERATION,"Can't subscribe stream, not joined");throw a.onError(e),e}if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState){const e=new pl(ll.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));throw a.onError(e),e}if(!Qo(n=this._users).call(n,t=>t===e)){var c;const t=new pl(ll.INVALID_REMOTE_USER,"user is not in the channel");throw Rc.error(Je(c="[".concat(this._clientId,"] can not subscribe ")).call(c,e.uid,", this user is not in the channel")),a.onError(t),t}if(!e.hasAudio&&!e.hasVideo){var l;const t=new pl(ll.INVALID_REMOTE_USER,"user is not published");throw Rc.error(Je(l="[".concat(this._clientId,"] can not subscribe ")).call(l,e.uid,", user is not published")),a.onError(t),t}const u={audio:"audio"===t,video:"video"===t};if(!e.hasAudio&&u.audio||!e.hasVideo&&u.video){var d,h;const n=new pl(ll.REMOTE_USER_IS_NOT_PUBLISHED);throw Rc.error(Je(d=Je(h="[".concat(this._clientId,"] can not subscribe ")).call(h,e.uid," with mediaType ")).call(d,t,", remote track is not published")),a.onError(n),n}let p=this._subscribeMutex.get(e.uid);p||(p=new ah("sub-".concat(e.uid)),this._subscribeMutex.set(e.uid,p)),Rc.info(Je(r=Je(i="[".concat(this._clientId,"] subscribe user ")).call(i,e.uid,", mediaType: ")).call(r,t));const f=await p.lock();let g=this._remoteStream.get(e.uid);try{if(g)u.audio=u.audio||g.subscribeOptions.audio,u.video=u.video||g.subscribeOptions.video,await this._gateway.subscribeChange(g,u);else{g=new XS(e,this._statsCollector,this._joinInfo,u),this._remoteStream.set(e.uid,g);try{await this._gateway.subscribe(g)}catch(t){throw this._remoteStream.delete(e.uid),t}g.on(ty.CONNECTION_STATE_CHANGE,(t,n)=>{"connecting"===t?this.emit(CA.MEDIA_RECONNECT_START,e.uid):"connected"===t&&this.emit(CA.MEDIA_RECONNECT_END,e.uid)})}f()}catch(t){var m;throw a.onError(t),f(),Rc.error(Je(m="[".concat(this._clientId,"] subscribe user ")).call(m,e.uid," error"),t),t}Rc.info(Je(o=Je(s="[".concat(this._clientId,"] subscribe success user ")).call(s,e.uid,", mediaType: ")).call(o,t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch(e=>{Rc.warning("[".concat(this._clientId,"] auto set fallback failed"),e)});const _="audio"===t?e.audioTrack:e.videoTrack;if(!_){const e=new pl(ll.UNEXPECTED_ERROR,"can not find remote track in user object");return a.onError(e),e.throw()}return a.onSuccess(_.getTrackId()),_}async unsubscribe(e,t){var n,r,i,o,s;t&&gl(t,"mediaType",["audio","video"]);const a=ky.reportApiInvoke(this._sessionId,{name:jA.UNSUBSCRIBE,options:[e.uid,t],tag:GA.TRACER});if(!Qo(n=this._users).call(n,t=>t===e)){var c;const t=new pl(ll.INVALID_REMOTE_USER,"user is not in the channel");throw Rc.error(Je(c="[".concat(this._clientId,"] can not subscribe ")).call(c,e.uid,", user is not in the channel")),a.onError(t),t}Rc.info(Je(r=Je(i="[".concat(this._clientId,"] unsubscribe uid: ")).call(i,e.uid,", mediaType: ")).call(r,t));let l=this._subscribeMutex.get(e.uid);l||(l=new ah("sub-".concat(e.uid)),this._subscribeMutex.set(e.uid,l));const u=await l.lock(),d=this._remoteStream.get(e.uid);var h;if(!d)return Rc.warning(Je(h="[".concat(this._clientId,"]: you have not subscribe the remote user ")).call(h,e.uid)),a.onSuccess(),void u();const p=nb({},d.subscribeOptions);"audio"===t?p.audio=!1:"video"===t?(p.video=!1,d.pc._statsFilter.setVideoIsReady(!1)):(p.audio=!1,p.video=!1);try{p.audio||p.video?await this._gateway.subscribeChange(d,p):(await d.closeP2PConnection(),this._remoteStream.delete(e.uid)),u()}catch(t){var f;if(t.code!==ll.OPERATION_ABORTED)throw a.onError(t),u(),Rc.error(Je(f="[".concat(this._clientId,"] unsubscribe user ")).call(f,e.uid," error"),t.toString()),t;u(),Rc.debug("[".concat(this._clientId,"] ignore unsub operation abort"))}Rc.info(Je(o=Je(s="[".concat(this._clientId,"] unsubscribe success uid: ")).call(s,e.uid,", mediaType: ")).call(o,t)),a.onSuccess()}setLowStreamParameter(e){!function(e){if(!e)throw new pl(hy.INVALID_PARAMS);yl(e.width)||ml(e.width,"streamParameter.width"),yl(e.height)||ml(e.height,"streamParameter.height"),yl(e.framerate)||ml(e.framerate,"streamParameter.framerate"),yl(e.bitrate)||ml(e.bitrate,"streamParameter.bitrate")}(e);const t=ky.reportApiInvoke(this._sessionId,{name:jA.SET_LOW_STREAM_PARAMETER,options:[e],tag:GA.TRACER});(!e.width&&e.height||e.width&&!e.height)&&Rc.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),Rc.info("[".concat(this._clientId,"] set low stream parameter to"),ve(e));const n=this._configDistribute.getLowStreamConfigDistribute();n&&n.bitrate&&e.bitrate&&n.bitrate<e.bitrate&&(e.bitrate=n.bitrate),this._lowStreamParameter=e,t.onSuccess()}async enableDualStream(){const e=ky.reportApiInvoke(this._sessionId,{name:jA.ENABLE_DUAL_STREAM,options:[],tag:GA.TRACER});if(!Fu().supportDualStream){ky.streamSwitch(this._sessionId,{lts:Ma(),isdual:!0,succ:!1});const t=new pl(ll.NOT_SUPPORTED,"Your browser is not support dual stream");throw e.onError(t),t}if(this._isDualStreamEnabled){const t=new pl(ll.INVALID_OPERATION,"Dual stream is already enabled");throw e.onError(t),t}if(this._highStream&&"connected"===this._highStream.connectionState&&this._highStream.videoTrack)try{await this._publishLowStream(this._highStream.videoTrack)}catch(r){throw ky.streamSwitch(this._sessionId,{lts:Ma(),isdual:!0,succ:!1}),e.onError(r),r}this._isDualStreamEnabled=!0,ky.streamSwitch(this._sessionId,{lts:Ma(),isdual:!0,succ:!0}),Rc.info("[".concat(this._clientId,"] enable dual stream")),e.onSuccess()}async disableDualStream(){const e=ky.reportApiInvoke(this._sessionId,{name:jA.DISABLE_DUAL_STREAM,options:[],tag:GA.TRACER});if(this._lowStream)try{await this._lowStream.closeP2PConnection()}catch(r){throw ky.streamSwitch(this._sessionId,{lts:Ma(),isdual:!1,succ:!1}),e.onError(r),r}this._lowStream=void 0,this._isDualStreamEnabled=!1,this._highStream&&(this._highStream.lowStreamConnection=void 0),ky.streamSwitch(this._sessionId,{lts:Ma(),isdual:!1,succ:!0}),Rc.info("[".concat(this._clientId,"] disable dual stream")),e.onSuccess()}async setClientRole(e,t){!function(e){gl(e,"role",["audience","host"])}(e),t&&MA(t);const n=ky.reportApiInvoke(this._sessionId,{name:jA.SET_CLIENT_ROLE,options:[e,t],tag:GA.TRACER});if("rtc"===this._mode){Rc.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole"));const e=new pl(ll.INVALID_OPERATION,"rtc mode can not use setClientRole");return n.onError(e),e.throw()}if(t&&t.level&&"host"===e){const e=new pl(ll.INVALID_OPERATION,"host mode can not set audience latency level");return n.onError(e),e.throw()}try{var r,i;if("audience"===e&&this._highStream){const e=new pl(ll.INVALID_OPERATION,"can not set client role to audience when publishing stream");return n.onError(e),e.throw()}await this._gateway.setClientRole(e,t),Rc.info(Je(r=Je(i="[".concat(this._clientId,"] set client role to ")).call(i,e,", level: ")).call(r,t&&t.level)),n.onSuccess()}catch(e){throw n.onError(e),e}}setProxyServer(e){if(_l(e,"proxyServer"),"DISCONNECTED"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new pl(ll.INVALID_OPERATION,"You have already set the proxy");this._proxyServer=e,ky.setProxyServer(this._proxyServer),Rc.setProxyServer(this._proxyServer)}setTurnServer(e){if(hl(e)||(e=[e]),"DISCONNECTED"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new pl(ll.INVALID_OPERATION,"You have already set the proxy");var t;if(function(e){if(!hl(e)||e.length<1)return!1;try{Xn(e).call(e,e=>{if(!e.urls)throw Error()})}catch(e){return!1}return!0}(e))return this._turnServer={servers:e,mode:"original-manual"},void Rc.info(Je(t="[".concat(this._clientId,"] Set original turnserver success: ")).call(t,vo(e).call(e,e=>e.urls).join(","),"."));Xn(e).call(e,e=>DA(e)),this._turnServer={servers:e,mode:"manual"},Rc.info("[".concat(this._clientId,"] Set turnserver success."))}startProxyServer(e){const t=ky.reportApiInvoke(this._sessionId,{name:jA.START_PROXY_SERVER,options:[],tag:GA.TRACER});if("DISCONNECTED"!==this.connectionState){const e=new pl(ll.INVALID_OPERATION,"Start proxy server before join channel");throw t.onError(e),e}if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint){const e=new pl(ll.INVALID_OPERATION,"You have already set the proxy");throw t.onError(e),e}const n=[1,2,3,4,5];switch(void 0===e&&(e=1),e){case 1:this._cloudProxyServerMode="normal";break;case 2:this._cloudProxyServerMode="443only";break;case 3:this._cloudProxyServerMode="proxy3";break;case 4:this._cloudProxyServerMode="proxy4";break;case 5:this._cloudProxyServerMode="proxy5";break;default:{const e=new pl(ll.INVALID_PARAMS,"proxy server mode must be ".concat(n.join("|")));throw t.onError(e),e}}Rc.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),t.onSuccess()}stopProxyServer(){const e=ky.reportApiInvoke(this._sessionId,{name:jA.STOP_PROXY_SERVER,options:[],tag:GA.TRACER});if("DISCONNECTED"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"Stop proxy server after leave channel");ky.setProxyServer(),Rc.setProxyServer(),this._cloudProxyServerMode="disabled",Rc.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]},e.onSuccess()}setLocalAccessPoints(e,t){if(vl(e,"serverList"),_l(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new pl(ll.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=vo(e).call(e,e=>{var r;return n.test(e)?Je(r="".concat(e.replace(/\./g,"-"),".")).call(r,t):e}),this._useLocalAccessPoint=!0,Vc("WEBCS_DOMAIN",e),Vc("WEBCS_DOMAIN_BACKUP_LIST",e),Vc("GATEWAY_DOMAINS",[t]),Vc("EVENT_REPORT_DOMAIN",e[0]),Vc("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),Vc("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),Rc.info("set local access point success")}async setRemoteVideoStreamType(e,t){var n,r;gl(t,"streamType",[0,1]);const i=ky.reportApiInvoke(this._sessionId,{name:jA.SET_REMOTE_VIDEO_STREAM_TYPE,options:[e,t],tag:GA.TRACER});try{await this._gateway.setRemoteVideoStreamType(e,t),Fa(()=>{var t;const n=Qo(t=this._users).call(t,t=>t.uid===e);n&&n.videoTrack&&n.videoTrack.updateMediaStreamTrackResolution()},2e3)}catch(e){throw i.onError(e),Rc.error("[".concat(this._clientId,"] set remote video stream type error"),e.toString()),e}Rc.info(Je(n=Je(r="[".concat(this._clientId,"] set remote ")).call(r,e," video stream type to ")).call(n,t)),this._remoteStreamTypeCacheMap.set(e,t),i.onSuccess()}async setStreamFallbackOption(e,t){var n,r;gl(t,"fallbackType",[0,1,2]);const i=ky.reportApiInvoke(this._sessionId,{name:jA.SET_STREAM_FALLBACK_OPTION,options:["too long to show",t],tag:GA.TRACER});try{await this._gateway.setStreamFallbackOption(e,t)}catch(e){throw i.onError(e),Rc.error("[".concat(this._clientId,"] set stream fallback option"),e.toString()),e}Rc.info(Je(n=Je(r="[".concat(this._clientId,"] set remote ")).call(r,e," stream fallback type to ")).call(n,t)),this._streamFallbackTypeCacheMap.set(e,t),i.onSuccess()}setEncryptionConfig(e,t,n){!function(e){gl(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),_l(t,"secret");const r=["aes-128-gcm2","aes-256-gcm2"];if(rs(r).call(r,e)){if(!n||!(n instanceof Uint8Array&&32===n.length))throw new pl(ll.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new pl(ll.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||Rc.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=Wp(n))}async renewToken(e){_l(e,"token",1,2047);const t=ky.reportApiInvoke(this._sessionId,{name:jA.RENEW_TOKEN,options:[e],tag:GA.TRACER});if(!this._key){const e=new pl(ll.INVALID_OPERATION,"renewToken should not be called before user join");return t.onError(e),e.throw()}this._key=e;try{await this._gateway.renewToken(e)}catch(e){throw t.onError(e),Rc.error("[".concat(this._clientId,"] renewToken failed"),e.toString()),e}Rc.debug("[".concat(this._clientId,"] renewToken success")),t.onSuccess()}enableAudioVolumeIndicator(){const e=ky.reportApiInvoke(this._sessionId,{name:jA.ENABLE_AUDIO_VOLUME_INDICATOR,options:[],tag:GA.TRACER});if(this._audioVolumeIndicationInterval)return Rc.warning("you have already enabled audio volume indicator!"),e.onSuccess();this._audioVolumeIndicationInterval=window.setInterval(()=>{var e,t,n;let r=cl(e=vo(t=Bd(Jp(n=this._remoteStream).call(n))).call(t,e=>({level:e.user.audioTrack?100*e.user.audioTrack._source.getAccurateVolumeLevel():0,uid:e.getUserId()}))).call(e,(e,t)=>e.level-t.level);this._highStream&&this._highStream.audioTrack&&(r.push({level:100*this._highStream.audioTrack._source.getAccurateVolumeLevel(),uid:this._highStream._userId}),r=cl(r).call(r,(e,t)=>e.level-t.level)),this.emit(CA.VOLUME_INDICATOR,r)},jc("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3),e.onSuccess()}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}startLiveStreaming(e,t){const n=ky.reportApiInvoke(this._sessionId,{name:jA.START_LIVE_STREAMING,options:[e,t],tag:GA.TRACER});if(!t){if("h264"!==this._codec){const e=new pl(ll.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");return n.onError(e),fo.reject(e)}if(!this._highStream){const e=new pl(ll.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");return n.onError(e),fo.reject(e)}}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e)){const e=new pl(ll.LIVE_STREAMING_TASK_CONFLICT);return n.onError(e),fo.reject(e)}const r=t?cy.TRANSCODE:cy.RAW;return this._createLiveStreamingClient(r).startLiveStreamingTask(e,r).then(()=>n.onSuccess()).catch(e=>{throw n.onError(e),e})}setLiveTranscoding(e){const t=ky.reportApiInvoke(this._sessionId,{name:jA.SET_LIVE_TRANSCODING,options:[e],tag:GA.TRACER});return this._createLiveStreamingClient(cy.TRANSCODE).setTranscodingConfig(e).then(()=>t.onSuccess()).catch(e=>{throw t.onError(e),e})}stopLiveStreaming(e){var t;const n=ky.reportApiInvoke(this._sessionId,{name:jA.STOP_LIVE_STREAMING,options:[e],tag:GA.TRACER}),r=Gr(t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient]).call(t,t=>t&&t.hasUrl(e));if(!r.length){const e=new pl(ll.INVALID_PARAMS,"can not find live streaming url to stop");return n.onError(e),fo.reject(e)}return fo.all(vo(r).call(r,t=>t&&t.stopLiveStreamingTask(e))).then(()=>n.onSuccess()).catch(e=>{throw n.onError(e),e})}async addInjectStreamUrl(e,t){const n=ky.reportApiInvoke(this._sessionId,{name:jA.ADD_INJECT_STREAM_URL,options:[e,t],tag:GA.TRACER});try{if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");const n=this._createLiveStreamingClient(cy.INJECT);n.setInjectStreamConfig(t,0),await n.startLiveStreamingTask(e,cy.INJECT)}catch(e){throw n.onError(e),e}n.onSuccess()}async removeInjectStreamUrl(){const e=ky.reportApiInvoke(this._sessionId,{name:jA.REMOVE_INJECT_STREAM_URL,options:[],tag:GA.TRACER});try{var t,n;const e=this._createLiveStreamingClient(cy.INJECT),r=Qo(t=Bd(Jp(n=e.streamingTasks).call(n))).call(t,e=>e.mode===cy.INJECT);if(!this._joinInfo||!r)throw new pl(ll.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");await e.stopLiveStreamingTask(r.url)}catch(t){throw e.onError(t),t}e.onSuccess()}async startChannelMediaRelay(e){const t=ky.reportApiInvoke(this._sessionId,{name:jA.START_CHANNEL_MEDIA_RELAY,options:[e],tag:GA.TRACER});try{V_(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}catch(e){return t.onError(e),e.throw()}t.onSuccess()}async updateChannelMediaRelay(e){const t=ky.reportApiInvoke(this._sessionId,{name:jA.UPDATE_CHANNEL_MEDIA_RELAY,options:[e],tag:GA.TRACER});try{V_(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}catch(e){return t.onError(e),e.throw()}t.onSuccess()}async stopChannelMediaRelay(){const e=ky.reportApiInvoke(this._sessionId,{name:jA.STOP_CHANNEL_MEDIA_RELAY,options:[],tag:GA.TRACER});try{const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay()}catch(r){return e.onError(r),r.throw()}e.onSuccess()}sendStreamMessage(e,t=!0){if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof e&&(e=(new TextEncoder).encode(e)),new Blob([e]).size>1024)throw new pl(ll.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(JA.DATA_STREAM,{payload:Wp(e)},!t)}sendMetadata(e){if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new pl(ll.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(JA.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Wp(e)})}async sendCustomReportMessage(e){hl(e)||(e=[e]),Xn(e).call(e,xA);const t=ky.reportApiInvoke(this._sessionId,{name:jA.SEND_CUSTOM_REPORT_MESSAGE,options:[ve(e)],tag:GA.TRACER});if(!this._joinInfo){const e=new pl(ll.INVALID_OPERATION,"can not send custom report, not joined");return t.onError(e),e.throw()}await ky.sendCustomReportMessage(this._joinInfo.sid,e),t.onSuccess()}getLocalAudioStats(){if(!this._highStream)return ry;const e=this._statsCollector.getLocalAudioTrackStats(this._highStream.connectionId);return Ta()&&this._highStream&&this._highStream.audioTrack&&(this._highStream.audioTrack instanceof Hy?!this._highStream.audioTrack.isActive:!this._highStream.audioTrack.enabled)&&(e.sendVolumeLevel=0),e}getRemoteAudioStats(){var e;const t={};return Xn(e=this._remoteStream).call(e,(e,n)=>{t[n]=this._statsCollector.getRemoteAudioTrackStats(e.connectionId)}),t}getLocalVideoStats(){return this._highStream?this._statsCollector.getLocalVideoTrackStats(this._highStream.connectionId):iy}getRemoteVideoStats(){var e;const t={};return Xn(e=this._remoteStream).call(e,(e,n)=>{t[n]=this._statsCollector.getRemoteVideoTrackStats(e.connectionId)}),t}getRemoteNetworkQuality(){var e;const t={};return Xn(e=this._remoteStream).call(e,(e,n)=>{t[n]=this._statsCollector.getRemoteNetworkQualityStats(e.connectionId)}),t}async pickSVCLayer(e,t){gl(t.spatialLayer,"spatialLayer",[0,1,2,3]),gl(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(e){throw Rc.error("[".concat(this._clientId,"] pick SVC layer failed"),e.toString()),e}}_reset(){var e,t,n;Rc.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=Sc.CancelToken.source(),this._streamFallbackTypeCacheMap=new xn,this._remoteStreamTypeCacheMap=new xn,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,Xn(e=this._users).call(e,e=>{e.audioTrack&&(e.audioTrack.stop(),e.audioTrack._isDestroyed=!0),e.videoTrack&&(e.videoTrack.stop(),e.videoTrack._isDestroyed=!0)}),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),this._highStream&&(this._highStream.closeP2PConnection(!0),this._highStream=void 0),Xn(t=this._bindEnabledTracks).call(t,e=>{e.off(my.NEED_ADD_TRACK,this._handleLocalTrackEnable),e.off(my.NEED_REMOVE_TRACK,this._handleLocalTrackDisable)}),this._bindEnabledTracks=[],this._lowStream&&(this._lowStream.closeP2PConnection(!0),this._lowStream=void 0),Xn(n=this._remoteStream).call(n,e=>{e.closeP2PConnection(!0)}),this._remoteStream=new xn,this._publishMutex=new ah("client-publish"),this._subscribeMutex=new xn,this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0)}_startSession(e,t){var n,r,i;const o=e||Op();e?Rc.debug(Je(n="[".concat(this._clientId,"] new Session ")).call(n,o)):Rc.debug(Je(r=Je(i="[".concat(this._clientId,"] renewSession ")).call(i,this._sessionId," => ")).call(r,o)),this._sessionId=o,t?ky.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:t.channel,appid:t.appId,mode:this._mode}):this._joinInfo?ky.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&ky.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=o),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=o)}async _publishHighStream(e){if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&jc("FORCE_TURN")&&!jc("TURN_ENABLE_TCP")&&!jc("TURN_ENABLE_UDP"))throw new pl(ll.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");if(Rc.debug("[".concat(this._clientId,"] publish high stream")),this._highStream)return await this._highStream.addTracks(e),this._highStream;this._highStream=new zS(this._statsCollector,this._joinInfo,this._codec),this._highStream.on(ty.P2P_LOST,()=>{this._highStream&&this.emit(CA.P2P_LOST,this._highStream.getUserId())}),await this._highStream.addTracks(e);try{await this._gateway.publish(this._highStream,"high")}catch(e){throw this._highStream=void 0,e}return this._highStream.on(ty.CONNECTION_STATE_CHANGE,(e,t)=>{this._highStream&&("connected"===e?this.emit(CA.MEDIA_RECONNECT_END,this._highStream.getUserId()):"connecting"===e&&this.emit(CA.MEDIA_RECONNECT_START,this._highStream.getUserId()))}),this._highStream}async _publishLowStream(e){if(!this._joinInfo)throw new pl(ll.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pl(ll.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if(!this._highStream||"connected"!==this._highStream.connectionState)throw new pl(ll.UNEXPECTED_ERROR,"Could not find high stream");if(this._lowStream)return new pl(ll.UNEXPECTED_ERROR,"[".concat(this._clientId,"] Can't publish low stream when stream already publish")).throw();Rc.debug("[".concat(this._clientId,"] publish low stream")),this._lowStream=new zS(this._statsCollector,this._joinInfo,this._codec,!0);const t=this._configDistribute.getLowStreamConfigDistribute();t&&t.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&t.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=t.bitrate)),this._lowStream.lowStreamParameter=this._lowStreamParameter,await this._lowStream.addTracks([e]);try{await this._gateway.publish(this._lowStream,"low")}catch(e){throw this._lowStream=void 0,e}this._highStream.lowStreamConnection=this._lowStream}_createLiveStreamingClient(e){if(!this._joinInfo||!this._appId)return new pl(ll.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const t=()=>new U_(this._joinInfo,this._config.websocketRetryConfig||Zd,this._config.httpRetryConfig||Zd),n=e=>{e.onLiveStreamError=(e,t)=>{ky.reportApiInvoke(this._sessionId,{name:jA.ON_LIVE_STREAM_ERROR,options:[e,t],tag:GA.TRACER}).onSuccess(),this.emit(CA.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{ky.reportApiInvoke(this._sessionId,{name:jA.ON_LIVE_STREAM_WARNING,options:[e,t],tag:GA.TRACER}).onSuccess(),this.emit(CA.LIVE_STREAMING_WARNING,e,t)},e.on(uy.REQUEST_WORKER_MANAGER_LIST,(e,t,n)=>{if(!this._joinInfo)return n(new pl(ll.INVALID_OPERATION,"can not find join info to get worker manager"));yS(e,this._joinInfo,this._axiosCancelSource.token,Zd).then(t).catch(n)})};switch(e){case cy.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=t(),n(this._liveRawStreamingClient)),this._liveRawStreamingClient;case cy.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=t(),n(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case cy.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=t(),this._injectStreamingClient.on(uy.REQUEST_WORKER_MANAGER_LIST,(e,t,n)=>{if(!this._joinInfo)return n(new pl(ll.INVALID_OPERATION,"can not find join info to get worker manager"));yS(e,this._joinInfo,this._axiosCancelSource.token,Zd).then(t).catch(n)}),this._injectStreamingClient.onInjectStatusChange=(e,t,n)=>{this.emit(CA.INJECT_STREAM_STATUS,e,t,n)}),this._injectStreamingClient}}_createChannelMediaRelayClient(){return this._joinInfo?(this._channelMediaRelayClient||(this._channelMediaRelayClient=new G_(this._joinInfo,this._clientId,this._config.websocketRetryConfig||Zd,this._config.httpRetryConfig||Zd),this._channelMediaRelayClient.on("state",e=>{"RELAY_STATE_FAILURE"===e&&this._channelMediaRelayClient&&this._channelMediaRelayClient.dispose(),this.emit(CA.CHANNEL_MEDIA_RELAY_STATE,e)}),this._channelMediaRelayClient.on("event",e=>{this.emit(CA.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._channelMediaRelayClient):new pl(ll.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw()}_handleGatewayEvents(){this._gateway.on(_u.DISCONNECT_P2P,()=>{var e;Rc.debug("[".concat(this._clientId,"] start full reconnect")),this._highStream&&"disconnected"!==this._highStream.connectionState&&(Rc.debug("[".concat(this._clientId,"] ready to reconnect high stream")),this._highStream.readyToReconnectPC()),this._lowStream&&"disconnected"!==this._lowStream.connectionState&&(Rc.debug("[".concat(this._clientId,"] ready to reconnect low stream")),this._lowStream.readyToReconnectPC()),Xn(e=this._remoteStream).call(e,(e,t)=>{var n;Rc.debug(Je(n="[".concat(this._clientId,"] ready to reconnect remote stream ")).call(n,t)),e.readyToReconnectPC()})}),this._gateway.on(_u.CONNECTION_STATE_CHANGE,(e,t,n)=>{var r,i;const o=()=>{this.emit(CA.CONNECTION_STATE_CHANGE,e,t,n)};if(Rc.info(Je(r=Je(i="[".concat(this._clientId,"] connection state change: ")).call(i,t," -> ")).call(r,e)),"DISCONNECTED"===e)return this._reset(),void o();var s,a;if("RECONNECTING"===e)this._highStream&&"connecting"===this._highStream.connectionState&&(Rc.debug("[".concat(this._clientId,"] ready to reconnect high stream")),this._highStream.readyToReconnectPC()),this._lowStream&&"connecting"===this._lowStream.connectionState&&(Rc.debug("[".concat(this._clientId,"] ready to reconnect low stream")),this._lowStream.readyToReconnectPC()),Xn(s=this._remoteStream).call(s,(e,t)=>{var n;"connecting"===e.connectionState&&(Rc.debug(Je(n="[".concat(this._clientId,"] ready to reconnect remote stream ")).call(n,t)),e.readyToReconnectPC())}),Xn(a=this._users).call(a,e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_stream_added_state_=!1}),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===e){var c,l;Xn(c=this._streamFallbackTypeCacheMap).call(c,(e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch(e=>Rc.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e))}),Xn(l=this._remoteStreamTypeCacheMap).call(l,(e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch(e=>Rc.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e))}),this._highStream&&"connecting"===this._highStream.connectionState?this._highStream.reconnectPC().then(()=>{this._lowStream&&"connecting"===this._lowStream.connectionState&&this._lowStream.reconnectPC().catch(e=>{Rc.error("[".concat(this._clientId,"] republish low stream error"),e.toString()),this.emit(CA.ERROR,{reason:e})})}).catch(e=>{Rc.error("[".concat(this._clientId,"] republish high stream error"),e.toString()),this.emit(CA.ERROR,{reason:e})}):this._lowStream&&"connecting"===this._lowStream.connectionState&&this._lowStream.reconnectPC().catch(e=>{Rc.error("[".concat(this._clientId,"] republish low stream error"),e.toString()),this.emit(CA.ERROR,{reason:e})}),this._userOfflineTimeout=window.setTimeout(()=>{var e;if("CONNECTED"!==this.connectionState)return;this._userOfflineTimeout=void 0;const t=Gr(e=this._users).call(e,e=>!e._trust_in_room_);Xn(t).call(t,e=>{var t;Rc.debug(Je(t="[".concat(this._clientId,"] user offline timeout, emit user offline ")).call(t,e.uid)),this._handleUserOffline({uid:e.uid})})},3e3),this._streamRemovedTimeout=window.setTimeout(()=>{var e;"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,Xn(e=this._users).call(e,e=>{var t,n,r,i,o;e._trust_audio_mute_state_||(Rc.debug(Je(t="[".concat(this._clientId,"] auto dispatch audio unmute event ")).call(t,e.uid)),this._handleMuteStream(e.uid,"audio",!1)),e._trust_video_mute_state_||(Rc.debug(Je(n="[".concat(this._clientId,"] auto dispatch video unmute event ")).call(n,e.uid)),this._handleMuteStream(e.uid,"video",!1)),e._trust_audio_enabled_state_||(Rc.debug(Je(r="[".concat(this._clientId,"] auto dispatch enable local audio ")).call(r,e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),!e._trust_video_enabled_state_&&e._video_enabled_&&(Rc.debug(Je(i="[".concat(this._clientId,"] auto dispatch enable local video ")).call(i,e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_stream_added_state_||(Rc.debug(Je(o="[".concat(this._clientId,"] auto dispatch stream remove ")).call(o,e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))}))},1e3)}o()}),this._gateway.on(_u.REQUEST_NEW_GATEWAY_LIST,(e,t)=>{if(!this._joinInfo)return t(new pl(ll.UNEXPECTED_ERROR,"can not recover, no join info"));_S(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Zd).then(t=>{var n;this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res),e(vo(n=t.gatewayInfo.gatewayAddrs).call(n,e=>{if(this._joinInfo&&this._joinInfo.proxyServer){var t,n;const r=e.split(":");return Je(t=Je(n="wss://".concat(this._joinInfo.proxyServer,"/ws/?h=")).call(n,r[0],"&p=")).call(t,r[1])}return"wss://".concat(e)}))}).catch(t)}),this._gateway.on(_u.NETWORK_QUALITY,e=>{"normal"===this._networkQualitySensitivity&&this.emit(CA.NETWORK_QUALITY,e)}),this._gateway.on(_u.STREAM_TYPE_CHANGE,(e,t)=>{this.emit(CA.STREAM_TYPE_CHANGED,e,t),ky.reportApiInvoke(this._sessionId,{name:jA.STREAM_TYPE_CHANGE,options:[e,t],tag:GA.TRACER}).onSuccess(ve({uid:e,streamType:t}))}),this._gateway.on(_u.IS_P2P_DISCONNECTED,e=>{var t,n,r;const i=[];return this._highStream&&i.push(this._highStream),Xn(t=this._remoteStream).call(t,e=>i.push(e)),0===i.length||0===Gr(i).call(i,e=>"connected"===e.connectionState).length?e(!0):(Rc.debug(Je(n="[".concat(this._clientId,"] ")).call(n,vo(r=Gr(i).call(i,e=>"connected"===e.connectionState)).call(r,e=>e.connectionId)," is connected")),void e(!1))}),this._gateway.on(_u.NEED_RENEW_SESSION,()=>{this._startSession()}),this._gateway.signal.on(ey.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(ey.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(ey.ON_ADD_AUDIO_STREAM,e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.uint_id)),this._gateway.signal.on(ey.ON_ADD_VIDEO_STREAM,e=>this._handleAddAudioOrVideoStream("video",e.uid,e.uint_id)),this._gateway.signal.on(ey.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(ey.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(ey.MUTE_AUDIO,e=>this._handleMuteStream(e.uid,"audio",!0)),this._gateway.signal.on(ey.UNMUTE_AUDIO,e=>this._handleMuteStream(e.uid,"audio",!1)),this._gateway.signal.on(ey.MUTE_VIDEO,e=>this._handleMuteStream(e.uid,"video",!0)),this._gateway.signal.on(ey.UNMUTE_VIDEO,e=>this._handleMuteStream(e.uid,"video",!1)),this._gateway.signal.on(ey.RECEIVE_METADATA,e=>{const t=Qp(e.metadata);this.emit(CA.RECEIVE_METADATA,e.uid,t)}),this._gateway.signal.on(ey.ON_DATA_STREAM,e=>{e.seq&&delete e.seq,e.payload=Qp(e.payload),this.emit(CA.STREAM_MESSAGE,e.uid,e.payload),this.onStreamMessage&&this.onStreamMessage(e)}),this._gateway.signal.on(ey.ON_CRYPT_ERROR,()=>{Hp(()=>{Rc.warning("[".concat(this._clientId,"] on crypt error")),this.emit(CA.CRYPT_ERROR)},this._sessionId)}),this._gateway.signal.on(ey.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(ey.ON_TOKEN_PRIVILEGE_DID_EXPIRE,()=>{Rc.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._reset(),this._gateway.leave(!0),this.emit(CA.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}),this._gateway.signal.on(ey.ON_STREAM_FALLBACK_UPDATE,e=>{var t,n;Rc.debug(Je(t=Je(n="[".concat(this._clientId,"] stream fallback peerId: ")).call(n,e.stream_id,", attr: ")).call(t,e.stream_type)),this.emit(CA.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")}),this._gateway.signal.on(ey.ON_PUBLISH_STREAM,e=>{var t;this.uid===this._uid&&(this._highStream&&this._highStream._waitingSuccessResponse&&"connected"===this._highStream.connectionState?(this._highStream.reportPublishEvent(!0,null,ve({proxy:e.proxy})),Rc.info(Je(t="[".concat(this._clientId,"] on publish stream, ")).call(t,ve(e))),void 0!==e.proxy&&this.emit(CA.IS_USING_CLOUD_PROXY,!!e.proxy)):this._lowStream?this._lowStream.reportPublishEvent(!0,null,ve({proxy:e.proxy})):Rc.warning("get on_publish_stream message but cannot handle"))}),this._gateway.signal.on(ey.ENABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)}),this._gateway.signal.on(ey.DISABLE_LOCAL_VIDEO,e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)}),this._gateway.signal.on(YA.REQUEST_TIMEOUT,(e,t)=>{if(this._joinInfo)switch(e){case JA.PUBLISH:{var n;if(!t)return;const e="high"===t.stream_type?this._highStream:this._lowStream;if(!e)return;"offer"===t.state&&ky.publish(this._joinInfo.sid,{lts:e.startTime,succ:!1,ec:ll.TIMEOUT,audio:t.audio,video:t.video,p2pid:t.p2p_id,publishRequestid:e.ID,screenshare:!(!e.videoTrack||-1===Lo(n=e.videoTrack._hints).call(n,_y.SCREEN_TRACK)),audioName:e.audioTrack&&(e.audioTrack instanceof Hy?e.audioTrack.getSubTrackLabels().join(","):e.audioTrack.getTrackLabel()),videoName:e.videoTrack&&e.videoTrack.getTrackLabel()});break}case JA.SUBSCRIBE:{const e=t.stream_id,n=this._remoteStream.get(e);if(!n)return;t&&ky.subscribe(this._joinInfo.sid,{lts:n.startTime,succ:!1,ec:ll.TIMEOUT,audio:!!t.audio,video:!!t.video,peerid:t.stream_id,subscribeRequestid:n.ID,p2pid:n.pc.ID});break}}})}}async function sb(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection;t.addTransceiver("video",{direction:"recvonly"}),t.addTransceiver("audio",{direction:"recvonly"});const n=(await t.createOffer()).sdp;if(!n)return e;t.close(),t=null,e=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1X/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),t}(n)}catch(e){throw new pl(ll.CREATE_OFFER_FAILED,e.toString&&e.toString()).print()}return e}function ab(){const e=ih.reportApiInvoke(null,{name:Nl.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Ll.TRACER});let t=!1;try{const e=window.RTCPeerConnection,n=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket;t=!!(e&&n&&r)}catch(e){return Rc.error("check system requirement failed: ",e),!1}let n=!1;const r=ma();r.name===ha.CHROME&&Number(r.version)>=58&&(!ba()||Sa())&&(n=!0),r.name===ha.FIREFOX&&Number(r.version)>=56&&(n=!0),r.name===ha.OPERA&&Number(r.version)>=45&&(n=!0),r.name===ha.SAFARI&&Number(r.version)>=11&&(n=!0),(La()||ma().name===ha.QQ)&&(n=!0),Rc.debug("checkSystemRequirements, api:",t,"browser",n);const i=t&&n;return e.onSuccess(i),i}rb([Ry({report:ky}),ib("design:type",Function),ib("design:paramtypes",[String]),ib("design:returntype",void 0)],ob.prototype,"setProxyServer",null),rb([Ry(),ib("design:type",Function),ib("design:paramtypes",[Object]),ib("design:returntype",void 0)],ob.prototype,"setTurnServer",null),rb([Ry({report:ky}),ib("design:type",Function),ib("design:paramtypes",[Array,String]),ib("design:returntype",void 0)],ob.prototype,"setLocalAccessPoints",null),rb([Ry({report:ky}),ib("design:type",Function),ib("design:paramtypes",[String,String,Uint8Array]),ib("design:returntype",void 0)],ob.prototype,"setEncryptionConfig",null),rb([wy({report:ky}),ib("design:type",Function),ib("design:paramtypes",[Object,Object]),ib("design:returntype",fo)],ob.prototype,"pickSVCLayer",null);class cb extends Eh{constructor(e,t={}){super(),this.startPlayTime=0,this.startPlayOffset=0,this.pausePlayTime=0,this.currentLoopCount=0,this._currentState="stopped",this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}set currentState(e){e!==this._currentState&&(this._currentState=e,this.emit(Zl.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):Rc.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}startSourceNode(){var e;this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=Yo(e=this.handleSourceNodeEnded).call(e,this))}createSourceNode(){const e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const lb=new xn;async function ub(e,t){let n=null;if("string"==typeof e){const t=lb.get(e);if(t)return Rc.debug("use cached audio resource: ",e),t;try{n=(await Kd(()=>Sc.get(e,{responseType:"arraybuffer"}),void 0,void 0,{maxRetryCount:3})).data}catch(e){throw new pl(ll.FETCH_AUDIO_FILE_FAILED,e.toString())}}else{const t=new fo((t,n)=>{const r=new FileReader;r.onload=e=>{e.target?t(e.target.result):n(new pl(ll.READ_LOCAL_AUDIO_FILE_ERROR))},r.onerror=()=>{n(new pl(ll.READ_LOCAL_AUDIO_FILE_ERROR))},r.readAsArrayBuffer(e)});n=await t}const r=await function(e){const t=gh();return new fo((n,r)=>{t.decodeAudioData(e,e=>{n(e)},e=>{r(new pl(ll.DECODE_AUDIO_FILE_FAILED,e.toString()))})})}(n);return"string"==typeof e&&t&&lb.set(e,r),r}function db(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function hb(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=db(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=db(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}function pb(e,t,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=hb({},r,{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?Rc.debug("[".concat(e,"] set content hint to"),n.optimizationMode):Rc.debug("[".concat(e,"] set content hint failed")))):Rc.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}function fb(e,t){var n=or(e);if(wd){var r=wd(e);t&&(r=Gr(r).call(r,(function(t){return Ur(e,t).enumerable}))),n.push.apply(n,r)}return n}function gb(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)Xn(n=fb(Object(r),!0)).call(n,(function(t){Od(e,t,r[t])}));else if(Hu)ae(e,Hu(r));else{var i;Xn(i=fb(Object(r))).call(i,(function(t){hr(e,t,Ur(r,t))}))}}return e}function mb(e,t,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=gb({},r,{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?Rc.debug("[".concat(e,"] set content hint to"),n.optimizationMode):Rc.debug("[".concat(e,"] set content hint failed")))):Rc.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var _b=M.setInterval;const vb=ma().name,Eb=ma().name;class Ab{constructor(e,t){this.id=0,Ab.count+=1,this.id=Ab.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{const t=document.createElement("audio");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(!this.peerPair)return;const e=async(e,t)=>{const n="offer"===t?await e.createOffer():await e.createAnswer();return await e.setLocalDescription(n),"complete"===e.iceGatheringState?e.localDescription:new fo(t=>{e.onicegatheringstatechange=()=>{"complete"===e.iceGatheringState&&t(e.localDescription)}})},t=async(e,t)=>await e.setRemoteDescription(t);try{const n=await e(this.peerPair[0],"offer");await t(this.peerPair[1],n);const r=await e(this.peerPair[1],"answer");await t(this.peerPair[0],r)}catch(e){throw new pl(ll.LOCAL_AEC_ERROR,e.toString()).print()}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(e).connect(t)}catch(e){throw new pl(ll.LOCAL_AEC_ERROR,e.toString()).print()}if(!t)throw new pl(ll.LOCAL_AEC_ERROR,"no dest node when local aec").print();const n=t.stream.getAudioTracks()[0];return this.audioTrack=n,n}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const e=this.element,t=await this.getTracksFromMediaElement(e);this.peerPair&&this.peerPair[0].addTrack(t),await this.switchSdp()}close(){var e;Rc.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&Xn(e=this.peerPair).call(e,e=>{e.close()}),this.peerPair=void 0,this.audioPlayerElement=void 0}}Ab.count=0;var yb=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Ur(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&hr(t,n,s),s},Sb=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const bb=window.AudioContext||window.webkitAudioContext;class Cb{constructor(){this.units=[]}processExternalMediaAEC(e){var t;if(!this._doesEnvironmentNeedAEC())return Rc.debug("the system does not need to process local aec"),-1;this.context||(this.context=new bb);let n=Qo(t=this.units).call(t,t=>t&&t.getElement()===e);return n||(n=new Ab(e,this.context),this.units.push(n)),n.startEchoCancellation(),Rc.debug("start processing local audio echo cancellation, id is",n.id),n.id}_doesEnvironmentNeedAEC(){return ma().name!==ha.SAFARI}}yb([nh({report:ih}),Sb("design:type",Function),Sb("design:paramtypes",[HTMLAudioElement]),Sb("design:returntype",Number)],Cb.prototype,"processExternalMediaAEC",null);const Tb=new Cb;var Ib,Rb,wb,kb;function Ob(e){return Ph.enumerateDevices(!0,!0,e)}function Nb(e){return Ph.getRecordingDevices(e)}function Lb(e){return Ph.getCamerasDevices(e)}function Pb(e){return Ph.getSpeakers(e)}function Db(){return new F_}function Mb(e){Rc.setLogLevel(e)}function xb(){Rc.enableLogUpload()}function Bb(){Rc.disableLogUpload()}async function Ub(e,t){var n;if(Rc.debug(Je(n="loadModule: ".concat(e.name,", loadOption: ")).call(n,ve(t))),!e.moduleInit)throw Rc.debug("Invalid Plugin"),new pl(ll.INVALID_PLUGIN,"invalid plugin");try{await e.moduleInit({logger:Rc,report:ih},t)}catch(e){throw new pl(ll.UNEXPECTED_ERROR,"unexpected error in loadModule",e)}}function Fb(e){Tb.processExternalMediaAEC(e)}Vc("PROCESS_ID",Je(Ib=Je(Rb=Je(wb=Je(kb="process-".concat(kp(8,""),"-")).call(kb,kp(4,""),"-")).call(wb,kp(4,""),"-")).call(Rb,kp(4,""),"-")).call(Ib,kp(12,""))),function(){const e=ma();Uu.getDisplayMedia=function(e){return!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia)}(),Uu.getStreamFromExtension=e.name===ha.CHROME&&Number(e.version)>34,Uu.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),Uu.supportMinBitrate=e.name===ha.CHROME||e.name===ha.EDGE,Uu.supportSetRtpSenderParameters=function(){const e=ma();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!Da()||!(!Ta()&&!ya())||e.name===ha.FIREFOX&&Number(e.version)>=64)}(),e.name===ha.SAFARI&&(Number(e.version)>=14?Uu.supportDualStream=!0:Uu.supportDualStream=!1),Uu.webAudioMediaStreamDest=function(){const e=ma();return!(e.name===ha.SAFARI&&Number(e.version)<12)}(),Uu.supportReplaceTrack=function(){return!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack}(),Uu.supportWebGL="undefined"!=typeof WebGLRenderingContext,Uu.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,Da()||(Uu.webAudioWithAEC=!0),Uu.supportShareAudio=function(){const e=ma();return(e.os===da.WIN_10||e.os===da.WIN_81||e.os===da.WIN_7||e.os===da.LINUX||e.os===da.MAC_OS)&&e.name===ha.CHROME&&Number(e.version)>=74}(),Uu.supportDualStreamEncoding=function(){const e=ma();return"Safari"===e.name&&Number(e.version)>=14}(),Rc.info("browser compatibility",ve(Uu),ve(e))}(),function(){const e=window.localStorage.getItem("websdk_ng_global_parameter");if(e)try{var t;const n=JSON.parse(window.atob(e)),r=Ma();Rc.debug("Loading global parameters from cache",n),Xn(t=or(n)).call(t,e=>{if(Object.prototype.hasOwnProperty.call(Gc,e)){const{value:t,expires:i}=n[e];if(i&&i<=r)return;Hc[e]=t,Gc[e]=t}})}catch(t){Rc.error("Error loading mutableParamsCache: ".concat(e),t.message)}}();const Vb={__CLIENT_LIST__:$c,__TRACK_LIST__:Kc,VERSION:kc,BUILD:wc,setParameter:Vc,getParameter:jc,getSupportedCodec:sb,checkSystemRequirements:ab,getDevices:Ob,getMicrophones:Nb,getCameras:Lb,getElectronScreenSources:bh,getPlaybackDevices:Pb,createClient:function(e={codec:"vp8",mode:"rtc"}){const t=ih.reportApiInvoke(null,{name:Nl.CREATE_CLIENT,options:[e],tag:Ll.TRACER});try{!function(e){gl(e.codec,"config.codec",["vp8","vp9","av1","h264"]),gl(e.mode,"config.mode",["rtc","live"]),void 0!==e.proxyServer&&_l(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&Yl(e.turnServer),void 0!==e.httpRetryConfig&&$l(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&$l(e.websocketRetryConfig)}(e)}catch(e){throw t.onError(e),e}return t.onSuccess(),new LA(bA({forceWaitGatewayResponse:!0},e,{role:"rtc"===e.mode?"host":e.role}))},createCameraVideoTrack:async function(e={encoderConfig:"480p_1"}){const t=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CREATE_CAM_VIDEO_TRACK,options:[hb({},e)]}),n=fv(e),r=kp(8,"track-cam-");let i=null;Rc.info("start create camera video track with config",ve(e),"trackId",r);try{i=(await kh({video:n},r)).getVideoTracks()[0]||null}catch(e){throw t.onError(e),e}if(!i){const e=new pl(ll.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw()}e.optimizationMode&&pb(r,i,e,e.encoderConfig&&Mc(e.encoderConfig));const o=new Tv(i,e,n,e.scalabiltyMode?Bc(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r);return t.onSuccess(o.getTrackId()),Rc.info("create camera video success, trackId:",r),o},createCustomVideoTrack:function(e){const t=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),n=new Cv(e.mediaStreamTrack,{bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?Bc(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode);return t.onSuccess(n.getTrackId()),Rc.info("create custom video track success with config",e,"trackId",n.getTrackId()),n},createScreenVideoTrack:async function(e={},t="disable"){const n=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CREATE_SCREEN_VIDEO_TRACK,options:[hb({},e),t]});e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const r=gv(e),i=kp(8,"track-scr");let o=null,s=null;const a=Fu();if(!a.supportShareAudio&&"enable"===t){const e=new pl(ll.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return n.onError(e),e.throw()}Rc.info("start create screen video track with config",e,"withAudio",t,"trackId",i);try{const e=await kh({screen:r,screenAudio:"auto"===t?a.supportShareAudio:"enable"===t},i);o=e.getVideoTracks()[0]||null,s=e.getAudioTracks()[0]||null}catch(e){throw n.onError(e),e}if(!o){const e=new pl(ll.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(e),e.throw()}if(!s&&"enable"===t){o&&o.stop();const e=new pl(ll.SHARE_AUDIO_NOT_ALLOWED);return n.onError(e),e.throw()}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(pb(i,o,e,e.encoderConfig&&xc(e.encoderConfig)),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const c=new Cv(o,e.encoderConfig?xc(e.encoderConfig):{},e.scalabiltyMode?Bc(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i);if(c._hints.push(Eu.SCREEN_TRACK),!s)return n.onSuccess(c.getTrackId()),Rc.info("create screen video track success","video:",c.getTrackId()),c;const l=new jh(s);return n.onSuccess([c.getTrackId(),l.getTrackId()]),Rc.info("create screen video track success","video:",c.getTrackId(),"audio:",l.getTrackId()),[c,l]},createMicrophoneAndCameraTracks:async function(e={},t={encoderConfig:"480p_1"}){var n,r,i,o;const s=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CREATE_MIC_AND_CAM_TRACKS,options:[e,t]}),a=fv(t),c=mv(e),l=kp(8,"track-mic-"),u=kp(8,"track-cam-");let d=null,h=null;Rc.info(Je(n=Je(r=Je(i="start create camera video track(".concat(u,") and microphone audio track(")).call(i,l,") with config, audio: ")).call(r,ve(e),", video: ")).call(n,ve(t)));try{var p;const e=await kh({audio:c,video:a},Je(p="".concat(l,"-")).call(p,u));d=e.getAudioTracks()[0],h=e.getVideoTracks()[0]}catch(e){throw s.onError(e),e}if(!d||!h){const e=new pl(ll.UNEXPECTED_ERROR,"can not find tracks in media stream");return s.onError(e),e.throw()}t.optimizationMode&&pb(u,h,t,t.encoderConfig&&Mc(t.encoderConfig));const f=new Gh(d,e,c,l),g=new Tv(h,t,a,t.scalabiltyMode?Bc(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,u);return s.onSuccess([f.getTrackId(),g.getTrackId()]),Rc.info(Je(o="create camera video track(".concat(u,") and microphone audio track(")).call(o,l,") success")),[f,g]},createMicrophoneAudioTrack:async function(e={}){const t=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CREATE_MIC_AUDIO_TRACK,options:[e]}),n=mv(e),r=kp(8,"track-mic-");let i=null;Rc.info("start create microphone audio track with config",ve(e),"trackId",r);try{i=(await kh({audio:n},r)).getAudioTracks()[0]||null}catch(e){throw t.onError(e),e}if(!i){const e=new pl(ll.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw()}const o=new Gh(i,e,n,r);return t.onSuccess(o.getTrackId()),Rc.info("create microphone audio track success, trackId:",r),o},createCustomAudioTrack:function(e){const t=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),n=new jh(e.mediaStreamTrack,e.encoderConfig?Fc(e.encoderConfig):{});return Rc.info("create custom audio track success with config",e,"trackId",n.getTrackId()),t.onSuccess(n.getTrackId()),n},createBufferSourceAudioTrack:async function(e){const t=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CREATE_BUFFER_AUDIO_TRACK,options:[e]}),n=kp(8,"track-buf-");Rc.info("start create buffer source audio track with config",ve(e),"trackId",n);const r=e.source;if(!(e.source instanceof AudioBuffer))try{e.source=await ub(e.source,e.cacheOnlineFile)}catch(e){return t.onError(e),e.throw()}const i=new cb(e.source),o=new Hh(r,i,e.encoderConfig?Fc(e.encoderConfig):{},n);return Rc.info("create buffer source audio track success, trackId:",n),t.onSuccess(o.getTrackId()),o},setLogLevel:Mb,enableLogUpload:xb,disableLogUpload:Bb,createChannelMediaRelayConfiguration:Db,checkAudioTrackIsActive:async function(e,t=5e3){const n=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof jh||e instanceof qE)){const e=new pl(ll.INVALID_TRACK,"the parameter is not a audio track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof jh?e.getTrackLabel():"remote_track",i=e.getVolumeLevel();let o=i,s=i;const a=Ma();return new fo(i=>{const c=_b(()=>{const l=e.getVolumeLevel();o=l>o?l:o,s=l<s?l:s;const u=o-s>1e-4,d=Ma()-a;if(u||d>t){var h;clearInterval(c);const t=u,s={duration:d,deviceLabel:r,maxVolumeLevel:o,result:t};Rc.info(Je(h="[track-".concat(e.getTrackId(),"] check audio track active completed. ")).call(h,ve(s))),n.onSuccess(s),i(t)}},200)})},checkVideoTrackIsActive:async function(e,t=5e3){var n;const r=ih.reportApiInvoke(null,{tag:Ll.TRACER,name:Nl.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof Cv||e instanceof WE)){const e=new pl(ll.INVALID_TRACK,"the parameter is not a video track");return r.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const i=e instanceof Cv?e.getTrackLabel():"remote_track",o=e.getMediaStreamTrack(!0),s=document.createElement("video");s.style.width="1px",s.style.height="1px",s.setAttribute("muted",""),s.muted=!0,s.setAttribute("playsinline",""),s.controls=!1,(Ta()||ya())&&(s.style.opacity="0.01",s.style.position="fixed",s.style.left="0",s.style.top="0",document.body.appendChild(s)),s.srcObject=new MediaStream([o]),s.play();const a=document.createElement("canvas");a.width=160,a.height=120;let c=0,l=0;try{const e=Ma();c=await function(e,t,n,r){let i,o=0,s=null;return new fo((a,c)=>{function l(){o>r&&i&&(i(),a(o));const t=n.getContext("2d");if(!t){const e=new pl(ll.UNEXPECTED_ERROR,"can not get canvas 2d context.");return Rc.error(e.toString()),void c(e)}t.drawImage(e,0,0,160,120);const l=t.getImageData(0,0,n.width,n.height),u=Math.floor(l.data.length/3);if(s){for(let e=0;e<u;e+=3)if(l.data[e]!==s[e])return o+=1,void(s=l.data);s=l.data}else s=l.data}Fa(()=>{i&&(i(),a(o))},t),i=vh(()=>{l()},30)})}(s,t,a,4),l=Ma()-e}catch(e){throw r.onError(e),e}vb===ha.SAFARI&&(s.pause(),s.remove()),s.srcObject=null;const u=c>4,d={duration:l,changedPicNum:c,deviceLabel:i,result:u};return Rc.info(Je(n="[track-".concat(e.getTrackId(),"] check video track active completed. ")).call(n,ve(d))),r.onSuccess(d),u},setArea:y_,loadModule:Ub,processExternalMediaAEC:Fb},jb={__CLIENT_LIST__:$c,__TRACK_LIST__:Kc,VERSION:kc,BUILD:wc,setParameter:Vc,getParameter:jc,getSupportedCodec:sb,checkSystemRequirements:ab,getDevices:Ob,getMicrophones:Nb,getCameras:Lb,getElectronScreenSources:bh,getPlaybackDevices:Pb,createClient:function(e={codec:"vp8",mode:"rtc"}){const t=ky.reportApiInvoke(null,{name:jA.CREATE_CLIENT,options:[e],tag:GA.TRACER});try{!function(e){gl(e.codec,"config.codec",["vp8","vp9","av1","h264"]),gl(e.mode,"config.mode",["rtc","live"]),void 0!==e.proxyServer&&_l(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&DA(e.turnServer),void 0!==e.httpRetryConfig&&PA(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&PA(e.websocketRetryConfig)}(e)}catch(e){throw t.onError(e),e}return t.onSuccess(),new ob(nb({forceWaitGatewayResponse:!0},e,{role:"rtc"===e.mode?"host":e.role}))},createCameraVideoTrack:async function(e={encoderConfig:"480p_1"}){const t=ky.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CREATE_CAM_VIDEO_TRACK,options:[gb({},e)]}),n=fv(e),r=kp(8,"track-cam-");let i=null;Rc.info("start create camera video track with config",ve(e),"trackId",r);try{i=(await kh({video:n},r)).getVideoTracks()[0]||null}catch(e){throw t.onError(e),e}if(!i){const e=new pl(hy.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw()}e.optimizationMode&&mb(r,i,e,e.encoderConfig&&Mc(e.encoderConfig));const o=new FS(i,e,n,e.scalabiltyMode?Bc(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,r);return t.onSuccess(o.getTrackId()),Rc.info("create camera video success, trackId:",r),o},createCustomVideoTrack:function(e){const t=ky.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),n=new US(e.mediaStreamTrack,{bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?Bc(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode);return t.onSuccess(n.getTrackId()),Rc.info("create custom video track success with config",e,"trackId",n.getTrackId()),n},createScreenVideoTrack:async function(e={},t="disable"){const n=ky.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CREATE_SCREEN_VIDEO_TRACK,options:[gb({},e),t]});e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const r=gv(e),i=kp(8,"track-scr");let o=null,s=null;const a=Fu();if(!a.supportShareAudio&&"enable"===t){const e=new pl(hy.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return n.onError(e),e.throw()}Rc.info("start create screen video track with config",e,"withAudio",t,"trackId",i);try{const e=await kh({screen:r,screenAudio:"auto"===t?a.supportShareAudio:"enable"===t},i);o=e.getVideoTracks()[0]||null,s=e.getAudioTracks()[0]||null}catch(e){throw n.onError(e),e}if(!o){const e=new pl(hy.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(e),e.throw()}if(!s&&"enable"===t){o&&o.stop();const e=new pl(hy.SHARE_AUDIO_NOT_ALLOWED);return n.onError(e),e.throw()}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(mb(i,o,e,e.encoderConfig&&xc(e.encoderConfig)),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const c=new US(o,e.encoderConfig?xc(e.encoderConfig):{},e.scalabiltyMode?Bc(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,i);if(c._hints.push(_y.SCREEN_TRACK),!s)return n.onSuccess(c.getTrackId()),Rc.info("create screen video track success","video:",c.getTrackId()),c;const l=new Vy(s);return n.onSuccess([c.getTrackId(),l.getTrackId()]),Rc.info("create screen video track success","video:",c.getTrackId(),"audio:",l.getTrackId()),[c,l]},createMicrophoneAndCameraTracks:async function(e={},t={encoderConfig:"480p_1"}){var n,r,i,o;const s=ky.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CREATE_MIC_AND_CAM_TRACKS,options:[e,t]}),a=fv(t),c=mv(e),l=kp(8,"track-mic-"),u=kp(8,"track-cam-");let d=null,h=null;Rc.info(Je(n=Je(r=Je(i="start create camera video track(".concat(u,") and microphone audio track(")).call(i,l,") with config, audio: ")).call(r,ve(e),", video: ")).call(n,ve(t)));try{var p;const e=await kh({audio:c,video:a},Je(p="".concat(l,"-")).call(p,u));d=e.getAudioTracks()[0],h=e.getVideoTracks()[0]}catch(e){throw s.onError(e),e}if(!d||!h){const e=new pl(hy.UNEXPECTED_ERROR,"can not find tracks in media stream");return s.onError(e),e.throw()}t.optimizationMode&&mb(u,h,t,t.encoderConfig&&Mc(t.encoderConfig));const f=new jy(d,e,c,l),g=new FS(h,t,a,t.scalabiltyMode?Bc(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,u);return s.onSuccess([f.getTrackId(),g.getTrackId()]),Rc.info(Je(o="create camera video track(".concat(u,") and microphone audio track(")).call(o,l,") success")),[f,g]},createMicrophoneAudioTrack:async function(e={}){const t=ky.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CREATE_MIC_AUDIO_TRACK,options:[e]}),n=mv(e),r=kp(8,"track-mic-");let i=null;Rc.info("start create microphone audio track with config",ve(e),"trackId",r);try{i=(await kh({audio:n},r)).getAudioTracks()[0]||null}catch(e){throw t.onError(e),e}if(!i){const e=new pl(hy.UNEXPECTED_ERROR,"can not find track in media stream");return t.onError(e),e.throw()}const o=new jy(i,e,n,r);return t.onSuccess(o.getTrackId()),Rc.info("create microphone audio track success, trackId:",r),o},createCustomAudioTrack:function(e){const t=ky.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),n=new Vy(e.mediaStreamTrack,e.encoderConfig?Fc(e.encoderConfig):{});return Rc.info("create custom audio track success with config",e,"trackId",n.getTrackId()),t.onSuccess(n.getTrackId()),n},createBufferSourceAudioTrack:async function(e){const t=ky.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CREATE_BUFFER_AUDIO_TRACK,options:[e]}),n=kp(8,"track-buf-");Rc.info("start create buffer source audio track with config",ve(e),"trackId",n);const r=e.source;if(!(e.source instanceof AudioBuffer))try{e.source=await ub(e.source,e.cacheOnlineFile)}catch(e){return t.onError(e),e.throw()}const i=new cb(e.source),o=new Gy(r,i,e.encoderConfig?Fc(e.encoderConfig):{},n);return Rc.info("create buffer source audio track success, trackId:",n),t.onSuccess(o.getTrackId()),o},setLogLevel:Mb,enableLogUpload:xb,disableLogUpload:Bb,createChannelMediaRelayConfiguration:Db,checkAudioTrackIsActive:async function(e,t=5e3){const n=ky.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof Vy||e instanceof JS)){const e=new pl(hy.INVALID_TRACK,"the parameter is not a audio track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof Vy?e.getTrackLabel():"remote_track",i=e.getVolumeLevel();let o=i,s=i;const a=Ma();return new fo(i=>{const c=_b(()=>{const l=e.getVolumeLevel();o=l>o?l:o,s=l<s?l:s;const u=o-s>1e-4,d=Ma()-a;if(u||d>t){var h;clearInterval(c);const t=u,s={duration:d,deviceLabel:r,maxVolumeLevel:o,result:t};Rc.info(Je(h="[track-".concat(e.getTrackId(),"] check audio track active completed. ")).call(h,ve(s))),n.onSuccess(s),i(t)}},200)})},checkVideoTrackIsActive:async function(e,t=5e3){var n;const r=ky.reportApiInvoke(null,{tag:GA.TRACER,name:jA.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof US||e instanceof YS)){const e=new pl(hy.INVALID_TRACK,"the parameter is not a video track");return r.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const i=e instanceof US?e.getTrackLabel():"remote_track",o=e.getMediaStreamTrack(!0),s=document.createElement("video");s.style.width="1px",s.style.height="1px",s.setAttribute("muted",""),s.muted=!0,s.setAttribute("playsinline",""),s.controls=!1,(Ta()||ya())&&(s.style.opacity="0.01",s.style.position="fixed",s.style.left="0",s.style.top="0",document.body.appendChild(s)),s.srcObject=new MediaStream([o]),s.play();const a=document.createElement("canvas");a.width=160,a.height=120;let c=0,l=0;try{const e=Ma();c=await function(e,t,n,r){let i,o=0,s=null;return new fo((a,c)=>{function l(){o>r&&i&&(i(),a(o));const t=n.getContext("2d");if(!t){const e=new pl(hy.UNEXPECTED_ERROR,"can not get canvas 2d context.");return Rc.error(e.toString()),void c(e)}t.drawImage(e,0,0,160,120);const l=t.getImageData(0,0,n.width,n.height),u=Math.floor(l.data.length/3);if(s){for(let e=0;e<u;e+=3)if(l.data[e]!==s[e])return o+=1,void(s=l.data);s=l.data}else s=l.data}Fa(()=>{i&&(i(),a(o))},t),i=vh(()=>{l()},30)})}(s,t,a,4),l=Ma()-e}catch(e){throw r.onError(e),e}Eb===RA.SAFARI&&(s.pause(),s.remove()),s.srcObject=null;const u=c>4,d={duration:l,changedPicNum:c,deviceLabel:i,result:u};return Rc.info(Je(n="[track-".concat(e.getTrackId(),"] check video track active completed. ")).call(n,ve(d))),r.onSuccess(d),u},setArea:y_,loadModule:Ub,processExternalMediaAEC:Fb},Gb=jc("SDK_FALLBACK")?jb:Vb;return ae(Gb,{onAudioAutoplayFailed:{get:()=>Jd.onAudioAutoplayFailed,set:e=>{Jd.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>Jd.onAutoplayFailed,set:e=>{Jd.onAutoplayFailed=e}}}),Ph.on(Dl.CAMERA_DEVICE_CHANGED,e=>{Rc.info("camera device changed",ve(e)),Gb.onCameraChanged&&Gb.onCameraChanged(e)}),Ph.on(Dl.RECORDING_DEVICE_CHANGED,e=>{Rc.info("microphone device changed",ve(e)),Gb.onMicrophoneChanged&&Gb.onMicrophoneChanged(e)}),Ph.on(Dl.PLAYOUT_DEVICE_CHANGED,e=>{Rc.debug("playout device changed",ve(e)),Gb.onPlaybackDeviceChanged&&Gb.onPlaybackDeviceChanged(e)}),Mh.onAutoplayFailed=()=>{Rc.info("detect audio element autoplay failed"),Jd.onAudioAutoplayFailed&&Jd.onAudioAutoplayFailed()},ph.on("autoplay-failed",()=>{Rc.info("detect webaudio autoplay failed"),Jd.onAudioAutoplayFailed&&Jd.onAudioAutoplayFailed()}),window&&(window.__ARTC__=Gb),Gb}))}).call(this,n("c8ba"),n("4362"))},e683:function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},e6cf:function(e,t,n){"use strict";var r,i,o,s,a=n("23e7"),c=n("c430"),l=n("da84"),u=n("d066"),d=n("c65b"),h=n("fea9"),p=n("6eeb"),f=n("e2cc"),g=n("d2bb"),m=n("d44e"),_=n("2626"),v=n("59ed"),E=n("1626"),A=n("861d"),y=n("19aa"),S=n("8925"),b=n("2266"),C=n("1c7e"),T=n("4840"),I=n("2cf4").set,R=n("b575"),w=n("cdf9"),k=n("44de"),O=n("f069"),N=n("e667"),L=n("01b4"),P=n("69f3"),D=n("94ca"),M=n("b622"),x=n("6069"),B=n("605d"),U=n("2d00"),F=M("species"),V="Promise",j=P.getterFor(V),G=P.set,H=P.getterFor(V),Q=h&&h.prototype,W=h,q=Q,z=l.TypeError,Z=l.document,$=l.process,K=O.f,Y=K,J=!!(Z&&Z.createEvent&&l.dispatchEvent),X=E(l.PromiseRejectionEvent),ee="unhandledrejection",te="rejectionhandled",ne=0,re=1,ie=2,oe=1,se=2,ae=!1,ce=D(V,(function(){var e=S(W),t=e!==String(W);if(!t&&66===U)return!0;if(c&&!q["finally"])return!0;if(U>=51&&/native code/.test(e))return!1;var n=new W((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))},i=n.constructor={};return i[F]=r,ae=n.then((function(){}))instanceof r,!ae||!t&&x&&!X})),le=ce||!C((function(e){W.all(e)["catch"]((function(){}))})),ue=function(e){var t;return!(!A(e)||!E(t=e.then))&&t},de=function(e,t){var n,r,i,o=t.value,s=t.state==re,a=s?e.ok:e.fail,c=e.resolve,l=e.reject,u=e.domain;try{a?(s||(t.rejection===se&&me(t),t.rejection=oe),!0===a?n=o:(u&&u.enter(),n=a(o),u&&(u.exit(),i=!0)),n===e.promise?l(z("Promise-chain cycle")):(r=ue(n))?d(r,n,c,l):c(n)):l(o)}catch(h){u&&!i&&u.exit(),l(h)}},he=function(e,t){e.notified||(e.notified=!0,R((function(){var n,r=e.reactions;while(n=r.get())de(n,e);e.notified=!1,t&&!e.rejection&&fe(e)})))},pe=function(e,t,n){var r,i;J?(r=Z.createEvent("Event"),r.promise=t,r.reason=n,r.initEvent(e,!1,!0),l.dispatchEvent(r)):r={promise:t,reason:n},!X&&(i=l["on"+e])?i(r):e===ee&&k("Unhandled promise rejection",n)},fe=function(e){d(I,l,(function(){var t,n=e.facade,r=e.value,i=ge(e);if(i&&(t=N((function(){B?$.emit("unhandledRejection",r,n):pe(ee,n,r)})),e.rejection=B||ge(e)?se:oe,t.error))throw t.value}))},ge=function(e){return e.rejection!==oe&&!e.parent},me=function(e){d(I,l,(function(){var t=e.facade;B?$.emit("rejectionHandled",t):pe(te,t,e.value)}))},_e=function(e,t,n){return function(r){e(t,r,n)}},ve=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=ie,he(e,!0))},Ee=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw z("Promise can't be resolved itself");var r=ue(t);r?R((function(){var n={done:!1};try{d(r,t,_e(Ee,n,e),_e(ve,n,e))}catch(i){ve(n,i,e)}})):(e.value=t,e.state=re,he(e,!1))}catch(i){ve({done:!1},i,e)}}};if(ce&&(W=function(e){y(this,q),v(e),d(r,this);var t=j(this);try{e(_e(Ee,t),_e(ve,t))}catch(n){ve(t,n)}},q=W.prototype,r=function(e){G(this,{type:V,done:!1,notified:!1,parent:!1,reactions:new L,rejection:!1,state:ne,value:void 0})},r.prototype=f(q,{then:function(e,t){var n=H(this),r=K(T(this,W));return n.parent=!0,r.ok=!E(e)||e,r.fail=E(t)&&t,r.domain=B?$.domain:void 0,n.state==ne?n.reactions.add(r):R((function(){de(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=j(e);this.promise=e,this.resolve=_e(Ee,t),this.reject=_e(ve,t)},O.f=K=function(e){return e===W||e===o?new i(e):Y(e)},!c&&E(h)&&Q!==Object.prototype)){s=Q.then,ae||(p(Q,"then",(function(e,t){var n=this;return new W((function(e,t){d(s,n,e,t)})).then(e,t)}),{unsafe:!0}),p(Q,"catch",q["catch"],{unsafe:!0}));try{delete Q.constructor}catch(Ae){}g&&g(Q,q)}a({global:!0,wrap:!0,forced:ce},{Promise:W}),m(W,V,!1,!0),_(V),o=u(V),a({target:V,stat:!0,forced:ce},{reject:function(e){var t=K(this);return d(t.reject,void 0,e),t.promise}}),a({target:V,stat:!0,forced:c||ce},{resolve:function(e){return w(c&&this===o?W:this,e)}}),a({target:V,stat:!0,forced:le},{all:function(e){var t=this,n=K(t),r=n.resolve,i=n.reject,o=N((function(){var n=v(t.resolve),o=[],s=0,a=1;b(e,(function(e){var c=s++,l=!1;a++,d(n,t,e).then((function(e){l||(l=!0,o[c]=e,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=K(t),r=n.reject,i=N((function(){var i=v(t.resolve);b(e,(function(e){d(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e772:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=53)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},3:function(e,t){e.exports=n("8122")},33:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[n("span",[e._v(e._s(e.currentLabel))])])],2)},i=[];r._withStripped=!0;var o=n(4),s=n.n(o),a=n(3),c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={mixins:[s.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var n=this.select,r=n.remote,i=n.valueKey;if(!this.created&&!r){if(i&&"object"===("undefined"===typeof e?"undefined":c(e))&&"object"===("undefined"===typeof t?"undefined":c(t))&&e[i]===t[i])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,t){if(this.isObject){var n=this.select.valueKey;return Object(a["getValueByPath"])(e,n)===Object(a["getValueByPath"])(t,n)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var n=this.select.valueKey;return e&&e.some((function(e){return Object(a["getValueByPath"])(e,n)===Object(a["getValueByPath"])(t,n)}))}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(a["escapeRegexpString"])(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,t=e.selected,n=e.multiple,r=n?t:[t],i=this.select.cachedOptions.indexOf(this),o=r.indexOf(this);i>-1&&o<0&&this.select.cachedOptions.splice(i,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},u=l,d=n(0),h=Object(d["a"])(u,r,i,!1,null,null,null);h.options.__file="packages/select/src/option.vue";t["a"]=h.exports},4:function(e,t){e.exports=n("d010")},53:function(e,t,n){"use strict";n.r(t);var r=n(33);r["a"].install=function(e){e.component(r["a"].name,r["a"])},t["default"]=r["a"]}})},e893:function(e,t,n){var r=n("1a2d"),i=n("56ef"),o=n("06cf"),s=n("9bf2");e.exports=function(e,t,n){for(var a=i(t),c=s.f,l=o.f,u=0;u<a.length;u++){var d=a[u];r(e,d)||n&&r(n,d)||c(e,d,l(t,d))}}},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},e91f:function(e,t,n){"use strict";var r=n("ebb5"),i=n("4d64").indexOf,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("indexOf",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},e95a:function(e,t,n){var r=n("b622"),i=n("3f8c"),o=r("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},e974:function(e,t,n){"use strict";t.__esModule=!0;var r=n("2b0e"),i=s(r),o=n("5128");function s(e){return e&&e.__esModule?e:{default:e}}var a=i.default.prototype.$isServer?function(){}:n("6167"),c=function(e){return e.stopPropagation()};t.default={props:{transformOrigin:{type:[Boolean,String],default:!0},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:{},popper:{},offset:{default:0},value:Boolean,visibleArrow:Boolean,arrowOffset:{type:Number,default:35},appendToBody:{type:Boolean,default:!0},popperOptions:{type:Object,default:function(){return{gpuAcceleration:!1}}}},data:function(){return{showPopper:!1,currentPlacement:""}},watch:{value:{immediate:!0,handler:function(e){this.showPopper=e,this.$emit("input",e)}},showPopper:function(e){this.disabled||(e?this.updatePopper():this.destroyPopper(),this.$emit("input",e))}},methods:{createPopper:function(){var e=this;if(!this.$isServer&&(this.currentPlacement=this.currentPlacement||this.placement,/^(top|bottom|left|right)(-start|-end)?$/g.test(this.currentPlacement))){var t=this.popperOptions,n=this.popperElm=this.popperElm||this.popper||this.$refs.popper,r=this.referenceElm=this.referenceElm||this.reference||this.$refs.reference;!r&&this.$slots.reference&&this.$slots.reference[0]&&(r=this.referenceElm=this.$slots.reference[0].elm),n&&r&&(this.visibleArrow&&this.appendArrow(n),this.appendToBody&&document.body.appendChild(this.popperElm),this.popperJS&&this.popperJS.destroy&&this.popperJS.destroy(),t.placement=this.currentPlacement,t.offset=this.offset,t.arrowOffset=this.arrowOffset,this.popperJS=new a(r,n,t),this.popperJS.onCreate((function(t){e.$emit("created",e),e.resetTransformOrigin(),e.$nextTick(e.updatePopper)})),"function"===typeof t.onUpdate&&this.popperJS.onUpdate(t.onUpdate),this.popperJS._popper.style.zIndex=o.PopupManager.nextZIndex(),this.popperElm.addEventListener("click",c))}},updatePopper:function(){var e=this.popperJS;e?(e.update(),e._popper&&(e._popper.style.zIndex=o.PopupManager.nextZIndex())):this.createPopper()},doDestroy:function(e){!this.popperJS||this.showPopper&&!e||(this.popperJS.destroy(),this.popperJS=null)},destroyPopper:function(){this.popperJS&&this.resetTransformOrigin()},resetTransformOrigin:function(){if(this.transformOrigin){var e={top:"bottom",bottom:"top",left:"right",right:"left"},t=this.popperJS._popper.getAttribute("x-placement").split("-")[0],n=e[t];this.popperJS._popper.style.transformOrigin="string"===typeof this.transformOrigin?this.transformOrigin:["top","bottom"].indexOf(t)>-1?"center "+n:n+" center"}},appendArrow:function(e){var t=void 0;if(!this.appended){for(var n in this.appended=!0,e.attributes)if(/^_v-/.test(e.attributes[n].name)){t=e.attributes[n].name;break}var r=document.createElement("div");t&&r.setAttribute(t,""),r.setAttribute("x-arrow",""),r.className="popper__arrow",e.appendChild(r)}}},beforeDestroy:function(){this.doDestroy(!0),this.popperElm&&this.popperElm.parentNode===document.body&&(this.popperElm.removeEventListener("click",c),document.body.removeChild(this.popperElm))},deactivated:function(){this.$options.beforeDestroy[0].call(this)}}},e9c4:function(e,t,n){var r=n("23e7"),i=n("da84"),o=n("d066"),s=n("2ba4"),a=n("e330"),c=n("d039"),l=i.Array,u=o("JSON","stringify"),d=a(/./.exec),h=a("".charAt),p=a("".charCodeAt),f=a("".replace),g=a(1..toString),m=/[\uD800-\uDFFF]/g,_=/^[\uD800-\uDBFF]$/,v=/^[\uDC00-\uDFFF]$/,E=function(e,t,n){var r=h(n,t-1),i=h(n,t+1);return d(_,e)&&!d(v,i)||d(v,e)&&!d(_,r)?"\\u"+g(p(e,0),16):e},A=c((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&r({target:"JSON",stat:!0,forced:A},{stringify:function(e,t,n){for(var r=0,i=arguments.length,o=l(i);r<i;r++)o[r]=arguments[r];var a=s(u,null,o);return"string"==typeof a?f(a,m,E):a}})},ea34:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},eac5:function(e,t,n){var r=n("861d"),i=Math.floor;e.exports=Number.isInteger||function(e){return!r(e)&&isFinite(e)&&i(e)===e}},ebb5:function(e,t,n){"use strict";var r,i,o,s=n("a981"),a=n("83ab"),c=n("da84"),l=n("1626"),u=n("861d"),d=n("1a2d"),h=n("f5df"),p=n("0d51"),f=n("9112"),g=n("6eeb"),m=n("9bf2").f,_=n("3a9b"),v=n("e163"),E=n("d2bb"),A=n("b622"),y=n("90e3"),S=c.Int8Array,b=S&&S.prototype,C=c.Uint8ClampedArray,T=C&&C.prototype,I=S&&v(S),R=b&&v(b),w=Object.prototype,k=c.TypeError,O=A("toStringTag"),N=y("TYPED_ARRAY_TAG"),L=y("TYPED_ARRAY_CONSTRUCTOR"),P=s&&!!E&&"Opera"!==h(c.opera),D=!1,M={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},x={BigInt64Array:8,BigUint64Array:8},B=function(e){if(!u(e))return!1;var t=h(e);return"DataView"===t||d(M,t)||d(x,t)},U=function(e){if(!u(e))return!1;var t=h(e);return d(M,t)||d(x,t)},F=function(e){if(U(e))return e;throw k("Target is not a typed array")},V=function(e){if(l(e)&&(!E||_(I,e)))return e;throw k(p(e)+" is not a typed array constructor")},j=function(e,t,n,r){if(a){if(n)for(var i in M){var o=c[i];if(o&&d(o.prototype,e))try{delete o.prototype[e]}catch(s){try{o.prototype[e]=t}catch(l){}}}R[e]&&!n||g(R,e,n?t:P&&b[e]||t,r)}},G=function(e,t,n){var r,i;if(a){if(E){if(n)for(r in M)if(i=c[r],i&&d(i,e))try{delete i[e]}catch(o){}if(I[e]&&!n)return;try{return g(I,e,n?t:P&&I[e]||t)}catch(o){}}for(r in M)i=c[r],!i||i[e]&&!n||g(i,e,t)}};for(r in M)i=c[r],o=i&&i.prototype,o?f(o,L,i):P=!1;for(r in x)i=c[r],o=i&&i.prototype,o&&f(o,L,i);if((!P||!l(I)||I===Function.prototype)&&(I=function(){throw k("Incorrect invocation")},P))for(r in M)c[r]&&E(c[r],I);if((!P||!R||R===w)&&(R=I.prototype,P))for(r in M)c[r]&&E(c[r].prototype,R);if(P&&v(T)!==R&&E(T,R),a&&!d(R,O))for(r in D=!0,m(R,O,{get:function(){return u(this)?this[N]:void 0}}),M)c[r]&&f(c[r],N,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_CONSTRUCTOR:L,TYPED_ARRAY_TAG:D&&N,aTypedArray:F,aTypedArrayConstructor:V,exportTypedArrayMethod:j,exportTypedArrayStaticMethod:G,isView:B,isTypedArray:U,TypedArray:I,TypedArrayPrototype:R}},eedf:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=86)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},86:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.buttonSize?"el-button--"+e.buttonSize:"",{"is-disabled":e.buttonDisabled,"is-loading":e.loading,"is-plain":e.plain,"is-round":e.round,"is-circle":e.circle}],attrs:{disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?n("i",{staticClass:"el-icon-loading"}):e._e(),e.icon&&!e.loading?n("i",{class:e.icon}):e._e(),e.$slots.default?n("span",[e._t("default")],2):e._e()])},i=[];r._withStripped=!0;var o={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(e){this.$emit("click",e)}}},s=o,a=n(0),c=Object(a["a"])(s,r,i,!1,null,null,null);c.options.__file="packages/button/src/button.vue";var l=c.exports;l.install=function(e){e.component(l.name,l)};t["default"]=l}})},ef08:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},f069:function(e,t,n){"use strict";var r=n("59ed"),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},f0d9:function(e,t,n){"use strict";t.__esModule=!0,t.default={el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},empty:{description:"暂无数据"}}}},f183:function(e,t,n){var r=n("23e7"),i=n("e330"),o=n("d012"),s=n("861d"),a=n("1a2d"),c=n("9bf2").f,l=n("241c"),u=n("057f"),d=n("4fad"),h=n("90e3"),p=n("bb2f"),f=!1,g=h("meta"),m=0,_=function(e){c(e,g,{value:{objectID:"O"+m++,weakData:{}}})},v=function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,g)){if(!d(e))return"F";if(!t)return"E";_(e)}return e[g].objectID},E=function(e,t){if(!a(e,g)){if(!d(e))return!0;if(!t)return!1;_(e)}return e[g].weakData},A=function(e){return p&&f&&d(e)&&!a(e,g)&&_(e),e},y=function(){S.enable=function(){},f=!0;var e=l.f,t=i([].splice),n={};n[g]=1,e(n).length&&(l.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===g){t(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},S=e.exports={enable:y,fastKey:v,getWeakData:E,onFreeze:A};o[g]=!0},f36a:function(e,t,n){var r=n("e330");e.exports=r([].slice)},f3ad:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=73)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},11:function(e,t){e.exports=n("2bb5")},21:function(e,t){e.exports=n("d397")},4:function(e,t){e.exports=n("d010")},73:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"is-exceed":e.inputExceed,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?n("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?n("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?n("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?n("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.getSuffixVisible()?n("span",{staticClass:"el-input__suffix"},[n("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible&&e.isWordLimitVisible?e._e():[e._t("suffix"),e.suffixIcon?n("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?n("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(e){e.preventDefault()},click:e.clear}}):e._e(),e.showPwdVisible?n("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e(),e.isWordLimitVisible?n("span",{staticClass:"el-input__count"},[n("span",{staticClass:"el-input__count-inner"},[e._v("\n            "+e._s(e.textLength)+"/"+e._s(e.upperLimit)+"\n          ")])]):e._e()],2),e.validateState?n("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?n("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:n("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1)),e.isWordLimitVisible&&"textarea"===e.type?n("span",{staticClass:"el-input__count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()],2)},i=[];r._withStripped=!0;var o=n(4),s=n.n(o),a=n(11),c=n.n(a),l=void 0,u="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",d=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function h(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),r=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),i=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),o=d.map((function(e){return e+":"+t.getPropertyValue(e)})).join(";");return{contextStyle:o,paddingSize:r,borderSize:i,boxSizing:n}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l||(l=document.createElement("textarea"),document.body.appendChild(l));var r=h(e),i=r.paddingSize,o=r.borderSize,s=r.boxSizing,a=r.contextStyle;l.setAttribute("style",a+";"+u),l.value=e.value||e.placeholder||"";var c=l.scrollHeight,d={};"border-box"===s?c+=o:"content-box"===s&&(c-=i),l.value="";var p=l.scrollHeight-i;if(null!==t){var f=p*t;"border-box"===s&&(f=f+i+o),c=Math.max(f,c),d.minHeight=f+"px"}if(null!==n){var g=p*n;"border-box"===s&&(g=g+i+o),c=Math.min(g,c)}return d.height=c+"px",l.parentNode&&l.parentNode.removeChild(l),l=null,d}var f=n(9),g=n.n(f),m=n(21),_={name:"ElInput",componentName:"ElInput",mixins:[s.a,c.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return g()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"===typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(e){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(e){this.focused=!1,this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize,t=this.type;if("textarea"===t)if(e){var n=e.minRows,r=e.maxRows;this.textareaCalcStyle=p(this.$refs.textarea,n,r)}else this.textareaCalcStyle={minHeight:p(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit("focus",e)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(e){var t=e.target.value,n=t[t.length-1]||"";this.isComposing=!Object(m["isKorean"])(n)},handleCompositionEnd:function(e){this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit("input",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit("change",e.target.value)},calcIconOffset:function(e){var t=[].slice.call(this.$el.querySelectorAll(".el-input__"+e)||[]);if(t.length){for(var n=null,r=0;r<t.length;r++)if(t[r].parentNode===this.$el){n=t[r];break}if(n){var i={suffix:"append",prefix:"prepend"},o=i[e];this.$slots[o]?n.style.transform="translateX("+("suffix"===e?"-":"")+this.$el.querySelector(".el-input-group__"+o).offsetWidth+"px)":n.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){var e=this;this.passwordVisible=!this.passwordVisible,this.$nextTick((function(){e.focus()}))},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},v=_,E=n(0),A=Object(E["a"])(v,r,i,!1,null,null,null);A.options.__file="packages/input/src/input.vue";var y=A.exports;y.install=function(e){e.component(y.name,y)};t["default"]=y},9:function(e,t){e.exports=n("7f4d")}})},f494:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=108)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},108:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-radio",class:[e.border&&e.radioSize?"el-radio--"+e.radioSize:"",{"is-disabled":e.isDisabled},{"is-focus":e.focus},{"is-bordered":e.border},{"is-checked":e.model===e.label}],attrs:{role:"radio","aria-checked":e.model===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.stopPropagation(),t.preventDefault(),e.model=e.isDisabled?e.model:e.label}}},[n("span",{staticClass:"el-radio__input",class:{"is-disabled":e.isDisabled,"is-checked":e.model===e.label}},[n("span",{staticClass:"el-radio__inner"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],ref:"radio",staticClass:"el-radio__original",attrs:{type:"radio","aria-hidden":"true",name:e.name,disabled:e.isDisabled,tabindex:"-1",autocomplete:"off"},domProps:{value:e.label,checked:e._q(e.model,e.label)},on:{focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},change:[function(t){e.model=e.label},e.handleChange]}})]),n("span",{staticClass:"el-radio__label",on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])},i=[];r._withStripped=!0;var o=n(4),s=n.n(o),a={name:"ElRadio",mixins:[s.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElRadio",props:{value:{},label:{},disabled:Boolean,name:String,border:Boolean,size:String},data:function(){return{focus:!1}},computed:{isGroup:function(){var e=this.$parent;while(e){if("ElRadioGroup"===e.$options.componentName)return this._radioGroup=e,!0;e=e.$parent}return!1},model:{get:function(){return this.isGroup?this._radioGroup.value:this.value},set:function(e){this.isGroup?this.dispatch("ElRadioGroup","input",[e]):this.$emit("input",e),this.$refs.radio&&(this.$refs.radio.checked=this.model===this.label)}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},radioSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._radioGroup.radioGroupSize||e},isDisabled:function(){return this.isGroup?this._radioGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this.isGroup&&this.model!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.model),e.isGroup&&e.dispatch("ElRadioGroup","handleChange",e.model)}))}}},c=a,l=n(0),u=Object(l["a"])(c,r,i,!1,null,null,null);u.options.__file="packages/radio/src/radio.vue";var d=u.exports;d.install=function(e){e.component(d.name,d)};t["default"]=d},4:function(e,t){e.exports=n("d010")}})},f5df:function(e,t,n){var r=n("da84"),i=n("00ee"),o=n("1626"),s=n("c6b6"),a=n("b622"),c=a("toStringTag"),l=r.Object,u="Arguments"==s(function(){return arguments}()),d=function(e,t){try{return e[t]}catch(n){}};e.exports=i?s:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=d(t=l(e),c))?n:u?s(t):"Object"==(r=s(t))&&o(t.callee)?"Arguments":r}},f6b4:function(e,t,n){"use strict";var r=n("c532");function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},f772:function(e,t,n){var r=n("5692"),i=n("90e3"),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},f893:function(e,t,n){e.exports={default:n("8119"),__esModule:!0}},f8c9:function(e,t,n){var r=n("23e7"),i=n("da84"),o=n("d44e");r({global:!0},{Reflect:{}}),o(i.Reflect,"Reflect",!0)},f8cd:function(e,t,n){var r=n("da84"),i=n("5926"),o=r.RangeError;e.exports=function(e){var t=i(e);if(t<0)throw o("The argument can't be less than 0");return t}},faf5:function(e,t,n){e.exports=!n("0bad")&&!n("4b8b")((function(){return 7!=Object.defineProperty(n("05f5")("div"),"a",{get:function(){return 7}}).a}))},fb2c:function(e,t,n){var r=n("74e8");r("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},fb6a:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("e8b5"),s=n("68ee"),a=n("861d"),c=n("23cb"),l=n("07fa"),u=n("fc6a"),d=n("8418"),h=n("b622"),p=n("1dde"),f=n("f36a"),g=p("slice"),m=h("species"),_=i.Array,v=Math.max;r({target:"Array",proto:!0,forced:!g},{slice:function(e,t){var n,r,i,h=u(this),p=l(h),g=c(e,p),E=c(void 0===t?p:t,p);if(o(h)&&(n=h.constructor,s(n)&&(n===_||o(n.prototype))?n=void 0:a(n)&&(n=n[m],null===n&&(n=void 0)),n===_||void 0===n))return f(h,g,E);for(r=new(void 0===n?_:n)(v(E-g,0)),i=0;g<E;g++,i++)g in h&&d(r,i,h[g]);return r.length=i,r}})},fc5e:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},fc6a:function(e,t,n){var r=n("44ad"),i=n("1d80");e.exports=function(e){return r(i(e))}},fcc3:function(module,exports,__webpack_require__){!function(e,t){module.exports=t(__webpack_require__("d2b2"))}("undefined"!=typeof self&&self,(function(__WEBPACK_EXTERNAL_MODULE__4119__){return function(){var __webpack_modules__={4537:function(e){"use strict";e.exports=function(e,t){for(var n=new Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,s(e))}}))}},7419:function(e,t){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),i=new Array(123),o=0;o<64;)i[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;n.encode=function(e,t,n){for(var i,o=null,s=[],a=0,c=0;t<n;){var l=e[t++];switch(c){case 0:s[a++]=r[l>>2],i=(3&l)<<4,c=1;break;case 1:s[a++]=r[i|l>>4],i=(15&l)<<2,c=2;break;case 2:s[a++]=r[i|l>>6],s[a++]=r[63&l],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=r[i],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";n.decode=function(e,t,n){for(var r,o=n,a=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&a>1)break;if(void 0===(l=i[l]))throw Error(s);switch(a){case 0:r=l,a=1;break;case 1:t[n++]=r<<2|(48&l)>>4,r=l,a=2;break;case 2:t[n++]=(15&r)<<4|(60&l)>>2,r=l,a=3;break;case 3:t[n++]=(3&r)<<6|l,a=0}}if(1===a)throw Error(s);return n-o},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},9211:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},945:function(e){"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function s(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,r),e.readFloatLE=s.bind(null,i),e.readFloatBE=s.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,i,o+t),e((s<<31|a/4294967296)>>>0,i,o+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=r*Math.pow(2,-c))>>>0,i,o+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function s(e,t,n,r,i){var o=e(r,i+t),s=e(r,i+n),a=2*(s>>31)+1,c=s>>>20&2047,l=4294967296*(1048575&s)+o;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=s.bind(null,i,0,4),e.readDoubleBE=s.bind(null,o,4,0)}(),e}function n(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function r(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},6662:function(e){"use strict";e.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return e(n);s+n>r&&(o=e(r),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},4997:function(e,t){"use strict";var n=t;n.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},n.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],s=0;t<n;)(r=e[t++])<128?o[s++]=r:r>191&&r<224?o[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},n.write=function(e,t,n){for(var r,i,o=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},2100:function(e,t,n){"use strict";e.exports=n(9482)},9482:function(e,t,n){"use strict";var r=t;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(1173),r.BufferWriter=n(3155),r.Reader=n(1408),r.BufferReader=n(593),r.util=n(9693),r.rpc=n(5994),r.roots=n(5054),r.configure=i,i()},1408:function(e,t,n){"use strict";e.exports=c;var r,i=n(9693),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new r(e):u(e)})(e)}:u};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=d(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},593:function(e,t,n){"use strict";e.exports=o;var r=n(1408);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(9693);function o(e){r.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},5054:function(e){"use strict";e.exports={}},5994:function(e,t,n){"use strict";t.Service=n(7948)},7948:function(e,t,n){"use strict";e.exports=i;var r=n(9693);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,i,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:function(e,t,n){"use strict";e.exports=i;var r=n(9693);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},9693:function(e,t,n){"use strict";var r=t;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(4537),r.base64=n(7419),r.EventEmitter=n(9211),r.float=n(945),r.inquire=n(7199),r.utf8=n(4997),r.pool=n(6662),r.LongBits=n(1945),r.isNode=Boolean(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},1173:function(e,t,n){"use strict";e.exports=d;var r,i=n(9693),o=i.LongBits,s=i.base64,a=i.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(d.create=function(){return new r})()}:function(){return new d}};function p(e,t,n){t[n]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function m(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}d.create=h(),d.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var _=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(i.isString(e)){var n=d.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(_,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},d._configure=function(e){r=e,d.create=h(),r._configure()}},3155:function(e,t,n){"use strict";e.exports=o;var r=n(1173);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(9693);function o(){r.call(this)}function s(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},8835:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRealTimeSequentialDataManager=void 0;var r=n(3504),i=function(){function e(e,t){this.dataChannelManager=new r.DataChannelListener(e,t)}return e.prototype.startBroadcasting=function(e){return this.dataChannelManager.startBroadcasting(e)},e.prototype.stopBroadcasting=function(e){return this.dataChannelManager.stopBroadcasting(e)},e.prototype.sendRealTimeSequentialData=function(e,t){return this.dataChannelManager.sendRealTimeSequentialData(e,t)},e.prototype.startSubscribing=function(e){return this.dataChannelManager.startSubscribing(e)},e.prototype.stopSubscribing=function(e){return this.dataChannelManager.stopSubscribing(e)},e.prototype.on=function(e,t){this.dataChannelManager.on(e,t)},e.prototype.off=function(e,t){this.dataChannelManager.off(e,t)},e}();t.ZegoRealTimeSequentialDataManager=i},1297:function(e,t){"use strict";var n,r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRangeAudioMode=t.ZegoRangeAudioMicrophoneState=t.ZegoMixStreamRenderMode=void 0,(i=t.ZegoMixStreamRenderMode||(t.ZegoMixStreamRenderMode={}))[i.AspectFill=0]="AspectFill",i[i.AspectFit=1]="AspectFit",(r=t.ZegoRangeAudioMicrophoneState||(t.ZegoRangeAudioMicrophoneState={}))[r.Off=0]="Off",r[r.TurningOn=1]="TurningOn",r[r.On=2]="On",(n=t.ZegoRangeAudioMode||(t.ZegoRangeAudioMode={}))[n.World=0]="World",n[n.Team=1]="Team"},3116:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoExpressRangeAudio=void 0;var i=r(n(2760)),o=function(){function e(e){this.zegoAudioListener=i.default.getInstance(e)}return e.getInstance=function(t){if(!e.instance){if(!t)throw Error("create instance failed.");e.instance=new e(t)}return e.instance},e.prototype.on=function(e,t){return this.zegoAudioListener.on(e,t)},e.prototype.off=function(e,t){return this.zegoAudioListener.off(e,t)},e.prototype.setAudioReceiveRange=function(e){this.zegoAudioListener.setAudioReceiveRange(e)},e.prototype.updateSelfPosition=function(e,t,n,r){this.zegoAudioListener.updateSelfPosition(e,t,n,r)},e.prototype.updateAudioSource=function(e,t){this.zegoAudioListener.updateAudioSource(e,t)},e.prototype.enableSpatializer=function(e){return this.zegoAudioListener.enableSpatializer(e)},e.prototype.enableMicrophone=function(e){return this.zegoAudioListener.enableMicrophone(e)},e.prototype.enableSpeaker=function(e){return this.zegoAudioListener.enableSpeaker(e)},e.prototype.setRangeAudioMode=function(e){this.zegoAudioListener.setRangeAudioMode(e)},e.prototype.setTeamID=function(e){this.zegoAudioListener.setRangeAudioTeamID(e)},e.prototype.isAudioContextRunning=function(){return"running"===this.zegoAudioListener.getAudioContextState()},e.prototype.resumeAudioContext=function(){return this.zegoAudioListener.resumeAudioContext()},e}();t.ZegoExpressRangeAudio=o},4780:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoExpressEngine=t.ClientUtil=void 0;var s=n(9880),a=o(n(3126)),c=o(n(9869)),l=o(n(3824)),u=o(n(7526)),d=o(n(577)),h=n(2777),p=n(4897),f=n(957);s.ZegoExpressEngine.use(a.default),s.ZegoExpressEngine.use(c.default),s.ZegoExpressEngine.use(l.default),s.ZegoExpressEngine.use(u.default),s.ZegoExpressEngine.use(d.default),s.ZegoExpressEngine.use(h.RangeAudio),s.ZegoExpressEngine.use(p.DataChannel),s.ZegoExpressEngine.use(f.BeautyEffect);var g=n(9880);Object.defineProperty(t,"ClientUtil",{enumerable:!0,get:function(){return g.ClientUtil}});var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(s.ZegoExpressEngine);t.ZegoExpressEngine=m},9880:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ClientUtil=t.ZegoExpressEngine=void 0;var o=n(4119),s=n(5321),a=function(e){function t(t,n){var r=this;return o.ZegoExpressWebRTMEngine.version="2.13.0",(r=e.call(this,t,n)||this).zegoWebRTC=new s.ZegoWebRTC(r.logger,r.dataReport,r.zegoWebRTM),r}return i(t,e),t.use=function(e){o.ZegoExpressWebRTMEngine.use(e),s.ZegoWebRTC.use(e)},t.prototype.checkSystemRequirements=function(e,t){return void 0===t&&(t=0),this.zegoWebRTC.checkSystemRequirements(t,e)},t.prototype.off=function(e,t){return this.zegoWebRTM.stateCenter.listenerList[e]?this.zegoWebRTM.off(e,t):!!this.zegoWebRTC.stateCenter.listenerList[e]&&this.zegoWebRTC.off(e,t)},t.prototype.on=function(e,t){return this.zegoWebRTM.stateCenter.listenerList[e]?this.zegoWebRTM.on(e,t):!!this.zegoWebRTC.stateCenter.listenerList[e]&&this.zegoWebRTC.on(e,t)},t.prototype.createStream=function(e){return this.zegoWebRTC.createStream(e)},t.prototype.getElectronScreenSources=function(){return this.zegoWebRTC.getElectronScreenSources()},t.prototype.destroyStream=function(e){return this.zegoWebRTC.destroyStream(e)},t.prototype.startPublishingStream=function(e,t,n){return this.zegoWebRTC.startPublishingStream(e,t,n)},t.prototype.stopPublishingStream=function(e){return this.zegoWebRTC.stopPublishingStream(e)},t.prototype.setVideoConfig=function(e,t){return this.zegoWebRTC.setVideoConfig(e,t)},t.prototype.setAudioConfig=function(e,t){return this.zegoWebRTC.setAudioConfig(e,t)},t.prototype.replaceTrack=function(e,t){return this.zegoWebRTC.replaceTrack(e,t)},t.prototype.setCaptureVolume=function(e,t){return this.zegoWebRTC.setCaptureVolume(e,t)},t.prototype.setStreamExtraInfo=function(e,t){return this.zegoWebRTC.setStreamExtraInfo(e,t)},t.prototype.addPublishCdnUrl=function(e,t){return 3===arguments.length?this.zegoWebRTC.addPublishCdnUrl(arguments[0],arguments[2]):this.zegoWebRTC.addPublishCdnUrl(e,t)},t.prototype.removePublishCdnUrl=function(e,t){return 3===arguments.length?this.zegoWebRTC.removePublishCdnUrl(arguments[0],arguments[2]):this.zegoWebRTC.removePublishCdnUrl(e,t)},t.prototype.mutePublishStreamVideo=function(e,t,n){return this.zegoWebRTC.mutePublishStreamVideo(e,t,n)},t.prototype.mutePublishStreamAudio=function(e,t){return this.zegoWebRTC.mutePublishStreamAudio(e,t)},t.prototype.setEffectsBeauty=function(e,t,n){return this.zegoWebRTC.setBeautyEffect(e,t,n)},t.prototype.startPlayingStream=function(e,t){return this.zegoWebRTC.startPlayingStream(e,t)},t.prototype.stopPlayingStream=function(e){return this.zegoWebRTC.stopPlayingStream(e)},t.prototype.mutePlayStreamVideo=function(e,t){return this.zegoWebRTC.mutePlayStreamVideo(e,t)},t.prototype.mutePlayStreamAudio=function(e,t){return this.zegoWebRTC.mutePlayStreamAudio(e,t)},t.prototype.startMixerTask=function(e){return this.zegoWebRTC.startMixerTask(e)},t.prototype.stopMixerTask=function(e){return this.zegoWebRTC.stopMixerTask(e)},t.prototype.setMixerTaskConfig=function(e){return this.zegoWebRTC.setMixerTaskConfig(e)},t.prototype.startMixingAudio=function(e,t){return this.zegoWebRTC.startMixingAudio(e,t)},t.prototype.stopMixingAudio=function(e,t){return this.zegoWebRTC.stopMixingAudio(e,t)},t.prototype.setMixingAudioVolume=function(e,t,n){return this.zegoWebRTC.setMixingAudioVolume(e,t,n)},t.prototype.enumDevices=function(){return this.zegoWebRTC.enumDevices()},t.prototype.useVideoDevice=function(e,t){return this.zegoWebRTC.useVideoDevice(e,t)},t.prototype.useAudioDevice=function(e,t){return this.zegoWebRTC.useAudioDevice(e,t)},t.prototype.setSoundLevelDelegate=function(e,t){return this.zegoWebRTC.setSoundLevelDelegate(e,t)},t.prototype.isMicrophoneMuted=function(){return this.zegoWebRTC.isMicrophoneMuted()},t.prototype.muteMicrophone=function(e){return this.zegoWebRTC.muteMicrophone(e)},t.prototype.createRangeAudioInstance=function(){return this.zegoWebRTC.createRangeAudioInstance()},t.prototype.createRealTimeSequentialDataManager=function(e){return this.zegoWebRTC.createRealTimeSequentialDataManager(e)},t.prototype.destroyRealTimeSequentialDataManager=function(e){this.zegoWebRTC.destroyRealTimeSequentialDataManager(e)},t}(o.ZegoExpressWebRTMEngine);t.ZegoExpressEngine=a;var c=n(608);Object.defineProperty(t,"ClientUtil",{enumerable:!0,get:function(){return c.ClientUtil}})},1089:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_WECHATMINI_ACTION=t.ZEGO_WEBRTC_ACTION=void 0,(r=t.ZEGO_WEBRTC_ACTION||(t.ZEGO_WEBRTC_ACTION={})).CONSTRUCTOR="zc.0",r.CHECK_SUPPORT="zc.csr",r.CREATE_STREAM="zc.cs",r.DESTROY_STREAM="zc.ds",r.START_PUBLISHING_STREAM="zc.sps.0",r.START_PLAYING_STREAM="zc.sps.1",r.STOP_PUBLISHING_STREAM="zc.sps.0.0",r.STOP_PLAYING_STREAM="zc.sps.1.0",r.ON_STREAM="zc.os",r.ON_PUSH_STREAM_UPDATE="zc.opsu",r.BIND_WINDOW_LISTENER="zc.wl",r.SET_AUDIO_OUTPUT="zc.sao",r.SET_CUSTOM_SIGNAL_URL="zc.scsu",r.SET_TURN_OVER_TCP_ONLY="zc.stoto",r.RDH_ACTIVE="zc.rdh.a",r.RDH_MAX_TIME="zc.rdh.m",r.RDH_WEBRTC_URL_RSP="zc.rdh.hfwur",r.PUBLISH_STATE_HANDLE="zc.psh.0",r.PLAY_STATE_HANDLE="zc.psh.1",r.STATECENTER_ACTION_LISTENER="zc.sc.al",r.STATECENTER_SET_SETTING="zc.sc.ss",r.SIGNAL_SET_SESSION_INFO="zc.s.ssi",r.SIGNAL_RESET_CONNECT_TIMER="zc.s.rct",r.SIGNAL_BIND_WEBSOCKET_HANDLE="zc.s.bwh",r.SIGNAL_RESET_CHECK_MESSAGE="zc.s.rcm",r.SIGNAL_UPDATE_TOKEN="zc.s.ut",r.SIGNAL_SEND_MESSAGE_WITH_CALLBACK="zc.s.smwc",r.SIGNAL_CONNECT_SERVER="zc.s.cs.0",r.SIGNAL_START_CONNECT_TIMER="zc.s.sct",r.SIGNAL_DISCONNECT_SERVER="zc.s.dc",r.SIGNAL_CREATE_SESSION="zc.s.cs.1",r.SIGNAL_REMOVE_SESSION="zc.s.rs",r.SIGNAL_SEND_REMOVE_SESSION="zc.s.srs",r.SIGNAL_SEND_MESSAGE="zc.s.sm",r.SIGNAL_HANDLE_RESPOND_DATA="zc.s.hrd",r.SIGNAL_ADD_SESSION="zc.s.as",r.SIGNAL_HANDLE_PUSH_DATA="zc.s.hpd",r.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA="zc.s.hprsd",r.SIGNAL_SEND_MEDIA_DESC="zc.s.smd",r.SIGNAL_SEND_CANDIDATE_INFO="zc.s.sci",r.SIGNAL_SEND_MEDIA_DESC_ACK="zc.s.smda",r.SIGNAL_SEND_CANDIDATE_INFO_ACK="zc.s.scia",r.SIGNAL_SEND_CLOSE_SESSION_ACK="zc.s.scsa",r.SIGNAL_SEND_RESET_SESSION_ACK="zc.s.srsa",r.SIGNAL_REGISTER_PUSH_CALLBACK="zc.s.rpc",r.SIGNAL_CHECK_MESSAGE_TIMEOUT="zc.s.cmt",r.SIGNAL_SEND_HEARTBEAT="zc.s.sh",r.SIGNAL_QUALITY_REPORT="zc.s.qr",r.SIGNAL_SEND_STREAM_STATUS="zc.s.sss",r.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM="zc.s.apvs",r.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM="zc.s.apas",r.SIGNAL_SEND_BROADCAST_STATUS="zc.s.sbs",r.SIGNAL_SEND_NET_PROBE="zc.s.snp",r.SIGNAL_SEND_NET_QUALITY_INFO_PUSH_ACK="zc.s.npa",r.PUBLISHER_START_PUBLISH="zc.p.0.sp.0",r.PUBLISHER_PUBLISH_SUCCESS="zc.p.ps",r.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS="zc.p.0.ocpss",r.PUBLISHER_HANDLE_CREATE_SESSION_WITH_SDP="zc.p.0.hcsws",r.PUBLISHER_ON_CREATE_OFFER_SUCCESS="zc.p.0.ocos",r.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS="zc.p.0.oslds",r.PUBLISHER_ON_GET_REMOTE_DESCRIPTION="zc.p.0.ogrd",r.PUBLISHER_ON_RECV_MEDIA_DESC="zc.p.0.ormd",r.PUBLISHER_ON_RECV_CANDIDATE_INFO="zc.p.0.orci.0",r.PUBLISHER_ON_RECV_PUBLISH_EVENT="zc.p.0.orpe",r.PUBLISHER_ON_RECV_CLIENT_INFO="zc.p.0.orci.1",r.PUBLISHER_ON_ICE_CANDIDATE="zc.p.0.oic",r.PUBLISHER_ON_CONNECTION_STATE_CHANGE="zc.p.0.ocsc",r.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE="zc.p.0.oicsc",r.PUBLISHER_RESET_PUBLISH="zc.p.0.rp",r.PUBLISHER_SET_PLAYER_QUALITY_TIMER="zc.p.0.spqt",r.PUBLISHER_UPLOAD_PUBLISH_QUALITY="zc.p.0.upq",r.PUBLISHER_ON_RECV_RESET_SESSION="zc.p.0.orrs",r.PUBLISHER_ON_RECV_CLOSE_SESSION="zc.p.0.orcs",r.PUBLISHER_SEND_CANDIDATE_INFO="zc.p.0.sci",r.PUBLISHER_STATE_ERROR="zc.p.0.psr",r.PUBLISHER_STOP_PUBLISH="zc.p.0.sp.1",r.PUBLISHER_ON_DISCONNECT="zc.p.0.od",r.PUBLISHER_START_SOUND_LEVEL="zc.p.0.ssl.0",r.PUBLISHER_STOP_SOUND_LEVEL="zc.p.0.ssl.1",r.PUBLISHER_HANDLE_ENC_BITRATE="zc.p.0.heb",r.PUBLISHER_ON_RECV_NET_QUALITY_INFO="zc.p.0.nqi",r.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC="zc.p.0.orumd",r.PLAYER_START_PLAY="zc.p.1.sp.0",r.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS="zc.p.ocpss.1",r.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP="zc.p.hcsws.1",r.PLAYER_ON_CREATE_OFFER_SUCCESS="zc.p.ocos.1",r.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS="zc.p.oslds.1",r.PLAYER_ON_RECV_MEDIA_DESC="zc.p.ormd.1",r.PLAYER_ON_RECV_CANDIDATE_INFO="zc.p.orci.1",r.PLAYER_ON_RECV_PLAY_EVENT="zc.p.orpe.1",r.PLAYER_ON_RECV_CLIENT_INFO="zc.p.orci.1.1",r.PLAYER_ON_ICE_CANDIDATE="zc.p.oic.1",r.PLAYER_ON_CONNECTION_STATE_CHANGE="zc.p.ocsc.1",r.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE="zc.p.oicsc.1",r.PLAYER_RESET_PLAY="zc.p.rp.1",r.PLAYER_SET_PLAYER_QUALITY_TIMER="zc.p.spqt.1",r.PLAYER_UPLOAD_PLAYER_QUALITY="zc.p.upq.1",r.PLAYER_ON_RECV_RESET_SESSION="zc.p.orrs.1",r.PLAYER_ON_RECV_CLOSE_SESSION="zc.p.orcs.1",r.PLAYER_ON_RECV_STREAM_STATUS="zc.p.orss.1",r.PLAYER_ON_GOT_REMOTE_STREAM="zc.p.ogrs.1",r.PLAYER_SEND_CANDIDATE_INFO="zc.p.sci.1",r.PLAYER_STATE_ERROR="zc.p.psr.1",r.PLAYER_STOP_PLAY="zc.p.1.sp.1",r.PLAYER_ON_DISCONNECT="zc.p.od.1",r.PLAYER_START_SOUND_LEVEL="zc.p.ssl.1",r.PLAYER_STOP_SOUND_LEVEL="zc.p.ssl.1.1",r.PLAYER_ON_RECV_NET_QUALITY_INFO="zc.p.1.nqi",r.PUBLISH_SET_CAPTURE_VOLUME="zc.p.scv",r.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe",r.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ="zc.sh.msbss",r.STREAMHANDLER_MERGE_STREAM="zc.sh.ms",r.STREAMHANDLER_PATCH_STREAM_LIST="zc.sh.psl",(n=t.ZEGO_WECHATMINI_ACTION||(t.ZEGO_WECHATMINI_ACTION={})).ADD_PUBLISH_CDN_URL="zw.apcu",n.REMOVE_PUBLISH_CDN_URL="zw.rpcu",n.STOP_MIXER_TASK="zw.smt",n.ON_STREAM="zw.os",n.ON_PUSH_STREAM_UPDATE="zw.opsu",n.ON_PUBLISH_STATE_UPDATE="zw.w.opsu",n.ON_PUBLISH_STATE_UPDATE_HANDLE="zw.w.opsuh",n.WECHATMINI_SETPREFERPLAYSOURCETYPE="zw.w.sppst.1",n.WECHATMINI_BIND_LISTENER="zw.w.bl",n.WECHATMINI_DELETE_LISTENER="zw.w.dl",n.WECHATMINI_UPDATE_PLAYER_STATE="zw.w.ups",n.WECHATMINI_UPDATE_PLAYER_NET_STATUS="zw.w.upns",n.WECHATMINI_SET_CUSTOM_SIGNAL_URL="zw.w.scsu",n.WECHATMINI_GET_NEXT_URL="zw.w.gnu",n.WECHATMINI_BIND_STREAM_CENTER_HANDLER="zw.w.bsch",n.WECHATMINI_BIND_RTM_LISTENER="zw.w.brl",n.PUBLISHMODULE_SET_PREFER_PUBLISH_SOURCE_TYPE="zw.pu.sppst.0",n.PUBLISHMODULE_START_PUBLISHING_STREAM="zw.pu.sps.0",n.PUBLISHMODULE_STOP_PUBLISHING_STREAM="zw.pu.sps.0.0",n.PUBLISHMODULE_FETCH_PUBLISH_STREAM_URL="zw.pu.fpsu.0",n.PUBLISHMODULE_HANDLE_FETCH_STREAM_PUBLISH_URL_RSP="zw.pu.hfspur.0",n.PUBLISHMODULE_DO_PUBLISH_STREAM="zw.pu.dps.0",n.PUBLISHMODULE_UPDATE_STREAM_INFO="zw.pu.upi",n.PUBLISHMODULE_HANDLE_STREAM_UPDATE_RSP="zw.pu.hsur",n.PLAYMODULE_START_PLAYING_STREAM="zw.pl.sps.1",n.PLAYMODULE_STOP_PLAYING_STREAM="zw.pl.sps.1.0",n.PLAYMODULE_START_PLAYING_STREAM_FROM_CDN="zw.pl.spsfc",n.PLAYMODULE_START_PLAYING_STREAM_FROM_BGP="zw.pl.spsfb",n.PLAYMODULE_DO_PLAY_STREAM="zw.pl.dps",n.PLAYMODULE_FETCH_PLAY_STREAM_URL="zw.pl.fpsu",n.PLAYMODULE_HANDLE_FETCH_STREAM_URL_RSP="zw.pl.hfsur",n.STREAMCENTERWECHAT_RESET="zw.scw.r.0",n.STREAMCENTERWECHAT_START_PUBLISHING_STREAM="zw.scw.sps.0",n.STREAMCENTERWECHAT_START_PLAYING_STREAM="zw.scw.sps.1",n.STREAMCENTERWECHAT_START_PLAYER="zw.scw.sp.0",n.STREAMCENTERWECHAT_ON_STREAM_URL_UPDATE="zw.scw.opuu.0",n.STREAMCENTERWECHAT_UPDATE_PLAYER_STATE="zw.scw.ups.0",n.STREAMCENTERWECHAT_UPDATE_PLAYER_NET_STATUS="zw.scw.upns",n.STREAMCENTERWECHAT_UPDATE_PUBLISHING_STATE="zw.scw.ups.0.0",n.STREAMCENTERWECHAT_UPDATE_PLAYING_STATE="zw.scw.ups.1.0",n.STREAMCENTERWECHAT_GET_NEXT_URL="zw.scw.gnu",n.STREAMCENTERWECHAT_STOP_PUBLISHING_STREAM="zw.scw.sps.0.0",n.STREAMCENTERWECHAT_STOP_PLAYING_STREAM="zw.scw.sps.1.0",n.STREAMCENTERWECHAT_STOP_PLAYER="zw.scw.sp.1",n.STREAMCENTERWECHAT_ON_PLAY_START="zw.scw.ops.0",n.STREAMCENTERWECHAT_ON_PLAY_STOP="zw.scw.ops.1",n.STREAMCENTERWECHAT_ON_PLAY_RETRY="zw.scw.opr",n.PLAYWECHAT_TRY_START_PLAYER="zw.pw.tsp.0",n.PLAYWECHAT_UPDATE_EVENT="zw.pw.ue",n.PLAYWECHAT_GET_PLAY_URL="zw.pw.gpu"},9595:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RTC=t.ZegoSettingConfig=void 0;var n=function(){function e(){this.defaultSetting={publish_video_codec:"H264",camera_video_bitrate:800,screen_video_bitrate:1500,custom_video_bitrate:0,l3_play_buffer_ms:500,AEC:!0,AGC:!0,ANS:!0,resource_mode:0,bitrate_mode:"default"},this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.setSetting=function(e,t){var n=Array.isArray(t)&&t.length>0;for(var r in e)for(var i in e[r])if(!i.endsWith("_ctrlmode")){if(n&&-1==t.indexOf(i))continue;var o=e[r][i+"_ctrlmode"];1===o||2===o?this.setting[i]=e[r][i]:this.defaultSetting[i]&&(this.setting[i]=this.defaultSetting[i]),"number"==typeof o&&(this.setting[i+"_ctrlmode"]=e[r][i+"_ctrlmode"])}},e.prototype.getSetting=function(e,t){return void 0===t&&(t=!1),t?2==this.setting[e+"_ctrlmode"]?this.setting[e]:void 0:this.setting[e]},e}();t.ZegoSettingConfig=n,t.RTC="rtc"},7325:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0;var r=n(6706),i=n(608),o=n(1089),s=n(9595),a=n(6706),c=n(3529),l=function(){function e(e,t){this.logger=e,this.dataReport=t,this.debug=!1,this.testEnvironment=!1,this.pullLimited=!0,this.configOK=!1,this.relateService=[],this.role=2,this.maxMemberCount=0,this.roomCreateFlag=1,this.callbackList={},this.publishStreamList={},this.streamUrlMap={},this.cmdCallback={},this.customUrl=[],this.customPlayUrl=[],this.turnOverTcpOnly=!1,this.customSetTcpOrUdp=!1,this.supportUdp=!1,this.audioEffectBuffer={},this.audioBitRate=48e3,this.cdnSeq=0,this.listenerList={roomStreamUpdate:[],streamExtraInfoUpdate:[],playerStateUpdate:[],publisherStateUpdate:[],screenSharingEnded:[],publishQualityUpdate:[],playQualityUpdate:[],remoteCameraStatusUpdate:[],remoteMicStatusUpdate:[],soundLevelUpdate:[],capturedSoundLevelUpdate:[],videoDeviceStateChanged:[],audioDeviceStateChanged:[],deviceError:[],_deviceError:[],_remoteCameraStatusUpdate:[],_remoteMicStatusUpdate:[],_streamUpdated:[],receiveRealTimeSequentialData:[],beautyEffectOverload:[]},this.reportList={},this.reportSeqList={startPublish:{},rePublish:{},startPlay:{},rePlay:{},stopPublish:{},stopPlay:{}},this.streamTrigger={},this.audioStreamList={},this.deviceInfos=null,this.deviceChangeTimer=null,this.deviceStateOut=!1,this.networkState=a.ENUM_NETWORK_STATE.offline,this.streamRetryTime=300,this.checkList=[],this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""},this.streamConnectTime=0,this.clientIP="",this.type="PUBLIC",this.roomList=[],this.isMultiRoom=!1,this.browser="",this.logReportCallback=i.ClientUtil.logReportCallback,this.unregisterCallback=i.ClientUtil.unregisterCallback,this.checkIllegalCharacters=i.ClientUtil.checkIllegalCharacters,this.decodeServerError=i.ClientUtil.decodeServerError,this.getLiveRoomError=i.ClientUtil.getLiveRoomError,this.getServerError=i.ClientUtil.getServerError,this.mergeStreamList=i.ClientUtil.mergeStreamList,this.checkInteger=i.ClientUtil.checkInteger,this.isUrl=i.ClientUtil.isUrl,this.actionSuccessCallback=i.ClientUtil.actionSuccessCallback,this.checkValidNumber=i.ClientUtil.checkValidNumber,this.getDevices=i.ClientUtil.getDevices,this.settingConfig=new s.ZegoSettingConfig}return e.prototype.getRequestId=function(){return this.idName+"-"+a.getSeq()},e.prototype.getSignalCmdContent=function(e,t,n,r){var i={request_id:t,room_id:e,from_userid:this.idName,from_username:this.nickName,to_userid:n};return null!=r&&(i.result=r),JSON.stringify(i)},e.prototype.actionListener=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(!["playQualityUpdate","publishQualityUpdate","soundLevelUpdate","capturedSoundLevelUpdate"].includes(e)&&this.listenerList[e]){var s=r.getReportSeq();this.dataReport.newReport(s,c.ZegoRTCLogEvent.kZegoListener.event),this.dataReport.addMsgInfo(s,{listener:e,params:n}),this.dataReport.uploadReport(s)}this.listenerList[e]&&this.listenerList[e].forEach((function(r){try{setTimeout((function(){r.apply(void 0,n)}),0)}catch(n){t.logger.error(o.ZEGO_WEBRTC_ACTION.STATECENTER_ACTION_LISTENER+" "+e+" "+n)}}))},e.prototype.getRoomByRoomID=function(e){return this.roomList.find((function(t){return t.roomID==e}))},e.prototype.getPlayRoom=function(e){return this.roomList.find((function(t){return!!t.streamList.find((function(t){return t.stream_id==e}))}))},e}();t.StateCenter=l},5740:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStreamCenter=void 0,t.ZegoStreamCenter=function(){this.publisherList={},this.playerList={}}},7560:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamHandler=void 0;var r=n(6706),i=n(2752),o=n(1089),s=function(){function e(e,t,n,r,i){this.logger=e,this.stateCenter=t,this.rtm=n,this.streamCenter=r,this.roomID=i,this.minStreamSeq=0,this.streamSeq=0,this.streamQuerying=!1,this.streamSeqMergeMap=null,this.streamListHBMergeInterval=2e3,this.streamListMergeInterval=5e3}return e.prototype.setCDNInfo=function(e,t){e.urlFlv=t.urls_flv instanceof Array?t.urls_flv[0]:"string"==typeof t.urls_flv?t.urls_flv:"",e.urlHls=t.urls_m3u8 instanceof Array?t.urls_m3u8[0]:"string"==typeof t.urls_m3u8?t.urls_m3u8:"",e.urlHttpsFlv=t.urls_https_flv instanceof Array?t.urls_https_flv[0]:"string"==typeof t.urls_https_flv?t.urls_https_flv:"",e.urlHttpsHls=t.urls_https_m3u8 instanceof Array?t.urls_https_m3u8[0]:"string"==typeof t.urls_https_m3u8?t.urls_https_m3u8:"",e.urlRtmp=t.urls_rtmp instanceof Array?t.urls_rtmp[0]:"string"==typeof t.urls_rtmp?t.urls_rtmp:""},e.prototype.onStreamUpdated=function(e,t,n){},e.prototype.onStreamExtraInfoUpdated=function(e,t){},e.prototype.handleStreamStart=function(e,t){this.logger.info("zb.sh.hss call stream update"),this.room=t,e.body?(this.streamListHBMergeInterval=e.body.stream_list_hb_wait_merge_time||2e3,this.streamListMergeInterval=e.body.stream_list_push_merge_timeout||5e3,this.streamQuerying=!1,this.handleFullUpdateStream(e.body.stream_seq,e.body.stream_info||[]),this.handleReconnectStream(e.body.stream_info),this.logger.info("zb.sh.hss call end")):this.logger.error("zb.sh.hss server response wrong")},e.prototype.onPublishStateUpdate=function(e,t,n){},e.prototype.updateStreamInfo=function(e,t,n,o){var s,a,c,l=this;if(void 0===n&&(n=""),this.logger.info("zb.sh.usi call"),"PUBLIC"===this.stateCenter.type){var u={stream_id:e,extra_info:n},d=JSON.stringify(u);a={sub_cmd:t,stream_msg:d,third_token:null===(s=this.room)||void 0===s?void 0:s.token},c="stream"}else a={room_header:{room_id:this.roomID,room_sid:this.rtm.getRoomSid()||"0",room_user_session_id:this.rtm.getRoomSessionID()||"0"},stream_id:e,extra_info:n,title:"",stream_sid:this.stateCenter.publishStreamList[e].sid},c=t;var h=this.room;this.room.streamInfoList[e]={},this.room.streamInfoList[e].seq=this.rtm.service.sendMessage(c,a,(function(e,t){l.handleStreamUpdateRsp(e)}),(function(s,a){var c=l.room;if(c&&!c.isResetRoom&&!l.rtm.service.isDisConnect()&&s.code&&s.code==i.errorCodeList.TIMEOUT.code&&c.streamInfoList[e].seq==a)2001==t&&l.stateCenter.publishStreamList[e]&&l.stateCenter.publishStreamList[e].state==r.ENUM_PUBLISH_STREAM_STATE.update_info||2002==t?setTimeout((function(){l.updateStreamInfo(e,t,n,o)}),0):o&&o(i.errorCodeList.TIMEOUT);else if(s.body&&s.body.err_code){var u=l.stateCenter.getServerError(s.body.err_code);[1011,1000002002].includes(u.code)&&(u=i.errorCodeList.TOKEN_EXPIRED),o&&o(u,a),t===r.ENUM_STREAM_SUB_CMD.liveBegin&&l.onPublishStateUpdate(r.ENUM_PUBLISH_STATE_UPDATE.error,e,u)}}),void 0,{sessionID:null==h?void 0:h.sessionID,roomID:null==h?void 0:h.roomID,roomSessionID:null==h?void 0:h.roomSessionID}),this.logger.info("zb.sh.usi call success cmd "+t)},e.prototype.handleStreamUpdateRsp=function(e){var t,n,i;if(this.rtm.service.isDisConnect())this.logger.error("zb.sh.hsur not login");else if(0==e.body.err_code){this.logger.info("zb.sh.hsur stream seq "+this.streamSeq+" server seq "+e.body.stream_seq),"PUBLIC"===this.stateCenter.type?this.streamSeq=e.body.stream_seq:this.streamSeq++;var o=this.room;if(o)if("PUBLIC"===this.stateCenter.type){(null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.token_remain_time)&&(this.stateCenter.getRoomByRoomID(null===(n=null==e?void 0:e.header)||void 0===n?void 0:n.room_id)?this.rtm.resetRoomTokenTimer(e.header.room_id,e.body.token_remain_time):this.logger.error("zb.sh.hsur room no found ignore "+JSON.stringify(null===(i=e.header)||void 0===i?void 0:i.room_id)));for(var s=function(t){var n=e.body.stream_info[t].stream_id,i=a.stateCenter.publishStreamList[n];if(!i)return a.logger.info("hsur.0 stream is not exist"),{value:void 0};i.state==r.ENUM_PUBLISH_STREAM_STATE.update_info&&(i.state=r.ENUM_PUBLISH_STREAM_STATE.publishing,o.streamList.find((function(e){return e.stream_id==n}))||o.streamList.push(e.body.stream_info[t]),a.onPublishStateUpdate(r.ENUM_PUBLISH_STATE_UPDATE.start,n,{code:0,message:""})),delete o.streamInfoList[n]},a=this,c=0;c<e.body.stream_info.length;c++){var l=s(c);if("object"==typeof l)return l.value}}else{var u=e.body.stream_id;this.stateCenter.publishStreamList[u]&&this.stateCenter.publishStreamList[u].state==r.ENUM_PUBLISH_STREAM_STATE.update_info&&(this.stateCenter.publishStreamList[u].state=r.ENUM_PUBLISH_STREAM_STATE.publishing,this.stateCenter.publishStreamList[u].sid=e.body.stream_sid,this.stateCenter.publishStreamList[u].ver=e.body.stream_ver,o.streamList.find((function(e){return e.stream_id==u}))||o.streamList.push({stream_id:e.body.stream_id,stream_seq:e.body.stream_seq,stream_sid:e.body.stream_sid,stream_ver:e.body.stream_ver,user_id:"",user_name:""}),this.onPublishStateUpdate(0,u,{code:0,message:""})),delete o.streamInfoList[u]}else this.logger.info("hsur.0 room no found")}else this.logger.error("zb.sh.hsur stream update error "+e.body.err_code)},e.prototype.handleFetchStreamListRsp=function(e){this.logger.info("zb.sh.hfslr call"),this.streamQuerying=!1,0===e.body.err_code?this.streamSeq!==e.body.stream_seq?(this.handleFullUpdateStream(e.body.stream_seq,e.body.stream_info),this.logger.info("zb.sh.hfslr call success")):this.logger.info("zb.sh.hfslr same seq"):this.logger.info("zb.sh.hfslr server error=",e.body.err_code)},e.prototype.handleFullUpdateStream=function(e,t){var n=this;this.logger.info("zb.sh.hfus call"),this.streamSeq=e,this.logger.debug("zb.sh.hfus server seq "+this.streamSeq),this.stateCenter.mergeStreamList(this.stateCenter.idName,this.room.streamList,t,(function(e,t,i){0!==e.length&&(n.logger.debug("zb.sh.hfus callback addstream"),n.onStreamUpdated(n.roomID,r.ENUM_STREAM_UPDATE_TYPE.added,n.makeCallbackStreamList(e))),0!==t.length&&(n.logger.debug("zb.sh.hfus callback delstream"),n.onStreamUpdated(n.roomID,r.ENUM_STREAM_UPDATE_TYPE.deleted,n.makeCallbackStreamList(t))),0!==i.length&&(n.logger.debug("zb.sh.hfus callback updatestream"),n.onStreamExtraInfoUpdated(n.roomID,n.makeCallbackStreamList(i)))})),this.logger.info("zb.sh.hfus call success")},e.prototype.handlePushStreamUpdateMsg=function(e){if(this.logger.info("zb.sh.hpsum call"),e.body.stream_info&&0!==e.body.stream_info.length){if(e.body.stream_info.length+this.streamSeq!==e.body.stream_seq)return this.logger.info("zb.sh.hpsum call updatestream"),void this.fetchStreamList();switch(this.streamSeq=e.body.stream_seq,e.body.stream_cmd){case r.ENUM_STREAM_UPDATE_CMD.added:this.handleAddedStreamList(e.body.stream_info);break;case r.ENUM_STREAM_UPDATE_CMD.deleted:this.handleDeletedStreamList(e.body.stream_info);break;case r.ENUM_STREAM_UPDATE_CMD.updated:this.handleUpdatedStreamList(e.body.stream_info)}this.logger.info("zb.sh.hpsum call success")}else this.logger.info("zb.sh.hpsum, emtpy list")},e.prototype.handlePriPushStreamUpdateMsg=function(e){if(this.logger.info("zb.sh.hpsum call"),e.body.streams_info&&0!==e.body.streams_info.length){if(e.body.streams_info.length+this.streamSeq!==e.body.stream_seq)return this.logger.info("zb.sh.hpsum call updatestream"),void this.mergeStreamByStreamSeq(e.body.stream_cmd,e.body.stream_seq,e.body.streams_info);switch(this.streamSeq=e.body.stream_seq,e.body.stream_cmd){case r.ENUM_STREAM_UPDATE_CMD_PRI.added:this.handleAddedStreamList(e.body.streams_info);break;case r.ENUM_STREAM_UPDATE_CMD_PRI.deleted:this.handleDeletedStreamList(e.body.streams_info);break;case r.ENUM_STREAM_UPDATE_CMD_PRI.updated:this.handleUpdatedStreamList(e.body.streams_info)}this.logger.info("zb.sh.hpsum call success")}else this.logger.info("zb.sh.hpsum, emtpy list")},e.prototype.handleAddedStreamList=function(e){this.logger.debug("zb.sh.hasl call");for(var t,n=[],i=0;i<e.length;i++)if(e[i].anchor_id_name!=this.stateCenter.idName&&e[i].user_id!==this.stateCenter.idName){t=!1;for(var o=0;o<this.room.streamList.length;o++)if(e[i].stream_id===this.room.streamList[o].stream_id){t=!0;break}t||n.push(e[i])}else this.logger.debug("hdsl.0 have self stream added");if(0!==n.length){this.logger.debug("zb.sh.hasl callback addstream");for(var s=0;s<n.length;s++)this.room.streamList.push(n[s]);this.onStreamUpdated(this.roomID,r.ENUM_STREAM_UPDATE_TYPE.added,this.makeCallbackStreamList(n))}this.logger.info("zb.sh.hasl call success")},e.prototype.handleDeletedStreamList=function(e){this.logger.debug("zb.sh.hdsl call");for(var t=[],n=0;n<e.length;n++)if(e[n].anchor_id_name!=this.stateCenter.idName&&e[n].user_id!==this.stateCenter.idName){for(var i=this.room.streamList.length-1;i>=0;i--)if(e[n].stream_id===this.room.streamList[i].stream_id){this.room.streamList.splice(i--,1),t.push(e[n]);break}}else this.logger.debug("zb.sh.hdsl have self stream deleted");0!==t.length&&(this.logger.debug("zb.sh.hdsl callback delstream"),this.onStreamUpdated(this.roomID,r.ENUM_STREAM_UPDATE_TYPE.deleted,this.makeCallbackStreamList(t))),this.logger.info("zb.sh.hdsl call")},e.prototype.handleUpdatedStreamList=function(e){this.logger.debug("zb.sh.husl call");for(var t=[],n=0;n<e.length;n++)if(e[n].anchor_id_name!=this.stateCenter.idName&&e[n].user_id!==this.stateCenter.idName){for(var r=0;r<this.room.streamList.length;r++)if(e[n].stream_id===this.room.streamList[r].stream_id){e[n].extra_info!==this.room.streamList[r].extra_info&&(this.room.streamList[r]=e[n],t.push(e[n]));break}}else this.logger.debug("hsul.0 have self stream updated");0!==t.length&&(this.logger.debug("zb.sh.husl callback updatestream"),this.onStreamExtraInfoUpdated(this.roomID,this.makeCallbackStreamList(t))),this.logger.info("zb.sh.husl call success")},e.prototype.fetchStreamList=function(){if(this.logger.info("zb.sh.fsl call"),this.rtm.service.isDisConnect())this.logger.info("zb.sh.fsl state error");else if(this.streamQuerying)this.logger.info("zb.sh.fsl already doing");else if(this.streamQuerying=!0,this.logger.debug("zb.sh.fsl send fetch request"),"PUBLIC"===this.stateCenter.type){var e={reserve:0},t=this.room;this.rtm.service.sendMessage("stream_info",e,this.handleFetchStreamListRsp.bind(this),(function(e,t){}),void 0,{roomID:null==t?void 0:t.roomID,sessionID:null==t?void 0:t.sessionID,roomSessionID:null==t?void 0:t.roomSessionID}),this.logger.info("zb.sh.fsl call success")}else{if(!this.rtm.isLogin(this.roomID))return void this.logger.info("zb.sh.fsl room state error");e={room_header:{room_id:this.roomID,room_sid:this.rtm.getRoomSid()||"0",room_user_session_id:this.rtm.getRoomSessionID()||"0"}},this.rtm.service.sendMessage("zegochat_js.room_info_req",e,this.handleFetchStreamListRsp.bind(this),(function(e,t){}))}},e.prototype.handleReconnectStream=function(e){this.logger.info("zb.sh.hrs call");var t=this.streamCenter.publisherList,n=this.streamCenter.playerList,i=function(n){if(t[n].roomID!==o.roomID)return"continue";if(t[n].publisher.state!=r.ENUM_PUBLISH_STATE.publishing||e.find((function(e){return e.stream_id==n}))){if(t[n].publisher.state==r.ENUM_PUBLISH_STATE.stop&&e.find((function(e){return e.stream_id==n}))){s=void 0,s="PUBLIC"===o.stateCenter.type?r.ENUM_STREAM_SUB_CMD.liveEnd:r.ENUM_STREAM_CMD_PRI.liveEnd,o.updateStreamInfo(n,s);for(var i=0;i<o.room.streamList.length;i++)if(o.room.streamList[i].stream_id==n){o.room.streamList.splice(i--,1);break}}}else{var s=void 0;s="PUBLIC"===o.stateCenter.type?r.ENUM_STREAM_SUB_CMD.liveBegin:r.ENUM_STREAM_CMD_PRI.liveBegin,o.updateStreamInfo(n,s,o.stateCenter.publishStreamList[n].extra_info)}},o=this;for(var s in t)i(s);for(var s in t)t[s].roomID===this.roomID&&t[s].isReDispatch&&(this.logger.info("zb.sh.hrs "+s+"retry dispatch"),(a=t[s].retryDispatchHandler).stopMaxTime(),a.invalid(),a.initStream(s,t[s].publishOption,!0),a.active(0),t[s].isReDispatch=!1);for(var s in n){var a;n[s].roomID===this.roomID&&n[s].isReDispatch&&(this.logger.info("zb.sh.hrs "+s+"retry dispatch"),(a=n[s].retryDispatchHandler).stopMaxTime(),a.invalid(),a.initStream(s,n[s].playOption,!1),a.active(0),n[s].isReDispatch=!1)}this.logger.info("zb.sh.hrs end")},e.prototype.makeCallbackStreamList=function(e){var t=[];if("PUBLIC"===this.stateCenter.type){if(e&&e.length>0)for(var n=0;n<e.length;n++){var r={user:{userID:e[n].anchor_id_name,userName:e[n].anchor_nick_name},extraInfo:e[n].extra_info,streamID:e[n].stream_id,roomID:"",urlFlv:"",urlRtmp:"",urlHls:"",urlHttpsFlv:"",urlHttpsHls:"",streamGID:e[n].stream_gid,closeType:e[n].close_type};this.setCDNInfo(r,e[n]),t.push(r)}}else if(e&&e.length>0)for(n=0;n<e.length;n++)r={user_id:e[n].user_id,user_name:e[n].user_name,stream_id:e[n].stream_id,stream_sid:e[n].stream_sid,extra_info:e[n].extra_info,title:e[n].title,stream_ver:e[n].stream_ver},t.push(r);return t},e.prototype.sendBizChannelRequest=function(e,t,n,r){var i=this;void 0===r&&(r=!1),e=Object.assign(e,{is_retry_req:r?1:0});var o=this.room;this.rtm.service.sendMessage("biz_channel",e,(function(e,n){t(e.header.seq,e.body.cmd,e.body.rsp_body)}),(function(r,o){var s=r.body.err_code,a=r.body.rsp_body;"number"!=typeof s||2002!==s?n(s,o,a):i.sendBizChannelRequest(e,t,n,!0)}),void 0,{roomID:null==o?void 0:o.roomID,sessionID:null==o?void 0:o.sessionID,roomSessionID:null==o?void 0:o.roomSessionID})},e.prototype.updateStreamExtraInfo=function(e,t,n,r){},e.prototype.setStreamExtraInfo=function(e,t,n,r){},e.prototype._publishTarget=function(e,t,n){},e.prototype.patchStreamList=function(e){var t=this;e.body.stream_seq===this.streamSeq||this.streamSeqMergeMap||(this.logger.info(o.ZEGO_WEBRTC_ACTION.STREAMHANDLER_PATCH_STREAM_LIST+" call update stream "+this.streamSeq+" server "+e.body.stream_seq),this.streamSeqMergeTimer&&clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=setTimeout((function(){t.handleMergeTimeout()}),this.streamListHBMergeInterval)),this.minStreamSeq=e.body.stream_seq},e.prototype.mergeStreamByStreamSeq=function(e,t,n){var r=this;this.streamSeqMergeMap||(this.logger.warn(o.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ+" new merge stream list "+this.streamSeq+" server "+t),this.streamSeqMergeMap={},this.streamSeqMergeTimer&&clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=setTimeout((function(){r.handleMergeTimeout()}),this.streamListMergeInterval)),this.logger.info(o.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ+" "+this.streamSeqMergeMap+" "+e+" "+t+" "+n),this.streamSeqMergeMap[t]={cmd:e,streamList:n}},e.prototype.handleMergeTimeout=function(){if(this.streamSeqMergeMap){var e=Object.keys(this.streamSeqMergeMap).map((function(e){return+e})).sort((function(e,t){return e-t}));e[e.length-1]-e[0]+1===e.length||e[e.length-1]>=this.minStreamSeq?this.mergeStream(e):(this.streamSeqMergeMap=null,this.fetchStreamList())}},e.prototype.mergeStream=function(e){var t=this;this.logger.info(o.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM+" merge streamList "+this.streamSeq+" streamSeqList "+e.join(","));var n=e[e.length-1],i=[];e.forEach((function(e){if(t.streamSeqMergeMap&&t.streamSeqMergeMap[e])switch(t.streamSeqMergeMap[e].cmd){case r.ENUM_STREAM_UPDATE_CMD.added:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=i.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&i.splice(t),i.push(e)}));break;case r.ENUM_STREAM_UPDATE_CMD.deleted:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=i.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&i.splice(t)}));break;case r.ENUM_STREAM_UPDATE_CMD.updated:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=i.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&i.splice(t),i.push(e)}))}})),this.streamSeqMergeMap=null,this.logger.info(o.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM+" "+i),this.handleFullUpdateStream(n,i)},e.prototype.reset=function(){this.minStreamSeq=0,this.streamSeqMergeMap=null,this.streamSeqMergeTimer&&(clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=void 0),this.streamListHBMergeInterval=2e3,this.streamListMergeInterval=5e3},e.prototype.getRoomInfo=function(){var e=this;return new Promise((function(t,n){if(e.rtm.isLogin(e.roomID)){var r=function(e,r){if(0!==e.body.code)n({errorCode:e.body.code,extendData:e.body.message});else{var i=e.body.streams_info.map((function(e){return{streamID:e.stream_id,user:{userID:e.user_id,userName:e.user_name},extraInfo:e.extra_info}}));t({streamList:i})}},i={room_header:{room_id:e.roomID,room_sid:e.rtm.getRoomSid()||"0",room_user_session_id:e.rtm.getRoomSessionID()||"0"}};e.rtm.service.sendMessage("zegochat_js.room_info_req",i,r,r)}else e.logger.error("zn.rh.gri no enter room")}))},e}();t.StreamHandler=s},6706:function(e,t,n){"use strict";var r,i,o,s,a,c,l,u,d,h,p,f;Object.defineProperty(t,"__esModule",{value:!0}),t.ENUM_PUBLISH_STATE_UPDATE=t.LinkedList=t.ListNode=t.E_CLIENT_TYPE=t.ENUM_SOURCE_TYPE=t.ENUM_DISPATCH_TYPE=t.ENUM_BROADCASTER_STATUS=t.ENUM_PLAY_SOURCE_TYPE=t.ENUM_PUBLISH_STATE_NEGO=t.ENUM_PUSH_SIGNAL_SUB_CMD=t.ENUM_SIGNAL_SUB_CMD=t.QUALITYLEVEL=t.SERVER_ERROR_CODE=t.ENUM_STREAM_UPDATE_CMD_PRI=t.ENUM_STREAM_UPDATE_CMD=t.MINIUM_HEARTBEAT_INTERVAL=t.STREAM_DELETE_REASON=t.ENUM_NETWORK_STATE=t.ENUM_RUN_STATE=t.ENUM_STREAM_UPDATE_TYPE=t.ENUM_STREAM_CMD_PRI=t.ENUM_STREAM_SUB_CMD=t.ENUM_PUBLISH_STREAM_STATE=t.MAX_RETRY_CONNECT_INTERVAL=t.MAX_TRANS_DATA_LENGTH=t.MAX_TRANS_TYPE_LENGTH=t.MAX_MESSAGE_LENGTH=t.MAX_ROOM_ID_LENGTH=t.MAX_USER_NAME_LENGTH=t.MAX_USER_ID_LENGTH=t.MAX_STREAM_ID_LENGTH=t.MAX_TRY_HEARTBEAT_COUNT=t.SEND_MSG_TIMEOUT=t.SEND_MSG_RESET=t.MAX_TRY_CONNECT_COUNT=t.ENUM_CONNECT_STATE=t.ENUM_PROBE_STATE=t.ENUM_PLAY_STATE_NEGO=t.ENUM_PLAYER_STATE=t.ENUM_PLAY_STATE=t.ENUM_PUBLISH_STATE=t.ENUM_SCREEM_RESOLUTION_TYPE=t.ENUM_RESOLUTION_TYPE=t.ENUM_SIGNAL_STATE=t.ERROR_CODES=t.ENUM_REMOTE_TYPE=t.LOG_LEVEL=t.ENUM_LOG_LEVEL=t.ROOMVERSION=t.PROTO_VERSION=void 0,t.ZegoExpressWebRTM=t.ZegoDataReport=t.ZegoLogger=t.ZegoExpressWebRTMEngine=t.getReportSeq=t.getSeq=t.QUALITY_CONSTANT=t.QualityGrade=t.REPORT_ACTION=t.ENUM_RETRY_STATE=t.ENUM_PLAY_STATE_UPDATE=void 0,t.PROTO_VERSION="2.13.0",t.ROOMVERSION="V1",(f=t.ENUM_LOG_LEVEL||(t.ENUM_LOG_LEVEL={}))[f.debug=0]="debug",f[f.info=1]="info",f[f.warn=2]="warn",f[f.error=3]="error",f[f.report=99]="report",f[f.disable=100]="disable",t.LOG_LEVEL={debug:0,info:1,warn:2,error:3,report:99,disable:100},(p=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[p.disable=0]="disable",p[p.websocket=1]="websocket",p[p.https=2]="https",t.ERROR_CODES={ROOM_SESSION_ID_ERR:1000000152,FETCH_TRANS_UNKNOWN_CHANNEL:1000001108,FETCH_TRANS_UNKNOWN_TYPE:1000001109,FETCH_TRANS_WRONG_SEQ:1000001110},(h=t.ENUM_SIGNAL_STATE||(t.ENUM_SIGNAL_STATE={}))[h.disconnected=0]="disconnected",h[h.connecting=1]="connecting",h[h.connected=2]="connected",t.ENUM_RESOLUTION_TYPE={LOW:{width:320,height:240,frameRate:15,bitRate:300},MEDIUM:{width:640,height:480,frameRate:15,bitRate:800},HIGH:{width:1280,height:720,frameRate:20,bitRate:1500}},t.ENUM_SCREEM_RESOLUTION_TYPE={LOW:{frameRate:20,bitRate:800},MEDIUM:{frameRate:15,bitRate:1500},HIGH:{frameRate:5,bitRate:2e3}},t.ENUM_PUBLISH_STATE={start:0,waitingSessionRsp:1,waitingOfferRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,publishing:6,stop:7,didNotStart:8},t.ENUM_PLAY_STATE={start:0,waitingSessionRsp:1,waitingOfferRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,playing:6,stop:7,didNotStart:8},t.ENUM_PLAYER_STATE={start:0,playing:1,stop:2},t.ENUM_PLAY_STATE_NEGO={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8},(d=t.ENUM_PROBE_STATE||(t.ENUM_PROBE_STATE={}))[d.tryProbe=0]="tryProbe",d[d.probed=2]="probed",t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},t.MAX_TRY_CONNECT_COUNT=3,t.SEND_MSG_RESET=2,t.SEND_MSG_TIMEOUT=1,t.MAX_TRY_HEARTBEAT_COUNT=5,t.MAX_STREAM_ID_LENGTH=256,t.MAX_USER_ID_LENGTH=64,t.MAX_USER_NAME_LENGTH=256,t.MAX_ROOM_ID_LENGTH=128,t.MAX_MESSAGE_LENGTH=1024,t.MAX_TRANS_TYPE_LENGTH=128,t.MAX_TRANS_DATA_LENGTH=4096,t.MAX_RETRY_CONNECT_INTERVAL=12,t.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},t.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},t.ENUM_STREAM_CMD_PRI={liveBegin:"zegochat_js.room_stream_create_req",liveEnd:"zegochat_js.room_stream_delete_req",liveUpdate:"zegochat_js.room_stream_update_req"},t.ENUM_STREAM_UPDATE_TYPE={added:1,deleted:0},(u=t.ENUM_RUN_STATE||(t.ENUM_RUN_STATE={}))[u.logout=0]="logout",u[u.trylogin=1]="trylogin",u[u.login=2]="login",(l=t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={}))[l.offline=0]="offline",l[l.online=1]="online",t.STREAM_DELETE_REASON={0:{code:1,description:"user_stop_publishing_stream_normal"},1:{code:2,description:"user_heart_beat_timeout"},2:{code:3,description:"user_repeat_login"},3:{code:4,description:"user_kicked_out"},4:{code:5,description:"user_offline"},100:{code:6,description:"remove_by_server"}},t.MINIUM_HEARTBEAT_INTERVAL=3e3,t.ENUM_STREAM_UPDATE_CMD={added:12001,deleted:12002,updated:12003},t.ENUM_STREAM_UPDATE_CMD_PRI={added:1,updated:2,deleted:3},t.SERVER_ERROR_CODE=1e4,(c=t.QUALITYLEVEL||(t.QUALITYLEVEL={}))[c.low=1]="low",c[c.stantard=2]="stantard",c[c.hight=3]="hight",c[c.custome=4]="custome",t.ENUM_SIGNAL_SUB_CMD={none:0,joinLiveRequest:1001,joinLiveResult:1002,joinLiveInvite:1003,joinLiveStop:1004},t.ENUM_PUSH_SIGNAL_SUB_CMD={none:0,pushJoinLiveRequest:11001,pushJoinLiveResult:11002,pushJoinLiveInvite:11003,pushJoinLiveStop:11004},t.ENUM_PUBLISH_STATE_NEGO={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8},(a=t.ENUM_PLAY_SOURCE_TYPE||(t.ENUM_PLAY_SOURCE_TYPE={}))[a.cdn=0]="cdn",a[a.ultra=1]="ultra",(s=t.ENUM_BROADCASTER_STATUS||(t.ENUM_BROADCASTER_STATUS={}))[s.stop=0]="stop",s[s.start=1]="start",(o=t.ENUM_DISPATCH_TYPE||(t.ENUM_DISPATCH_TYPE={}))[o.cdn=0]="cdn",o[o.ultra=1]="ultra",o[o.customUrl=2]="customUrl",(i=t.ENUM_SOURCE_TYPE||(t.ENUM_SOURCE_TYPE={}))[i.CDN=0]="CDN",i[i.BGP=1]="BGP",(r=t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))[r.ClientType_None=0]="ClientType_None",r[r.ClientType_H5=1]="ClientType_H5",r[r.ClientType_SmallPragram=2]="ClientType_SmallPragram",r[r.ClientType_Webrtc=3]="ClientType_Webrtc";var g=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this._id=null,this.next=null,this.prev=null,this._id=e,this._data=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id?this._id:null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),e.prototype.hasNext=function(){return this.next&&this.next.id},e.prototype.hasPrev=function(){return this.prev&&this.prev.id},e}();t.ListNode=g;var m,_,v=function(){function e(){this.start=new g,this.end=new g,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}return e.prototype.insertBefore=function(e,t){var n=new g(this._idCounter,t);return n.next=e,n.prev=e.prev,e.prev&&(e.prev.next=n),e.prev=n,++this._idCounter,++this._numNodes,n},e.prototype.addLast=function(e){return this.insertBefore(this.end,e)},e.prototype.add=function(e){return this.addLast(e)},e.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},e.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},e.prototype.size=function(){return this._numNodes},e.prototype.getFromFirst=function(e){var t=0,n=this.start.next;if(e>=0)for(;t<e&&null!==n;)n=n.next,++t;else n=null;if(null===n)throw"Index out of bounds.";return n},e.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},e.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},e.prototype.removeFirst=function(){var e=null;return this._numNodes>0&&this.start.next&&(e=this.remove(this.start.next)),e},e.prototype.removeLast=function(){var e=null;return this._numNodes>0&&this.end.prev&&(e=this.remove(this.end.prev)),e},e.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},e.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},e.prototype.find=function(e){for(var t=this.start,n=!1,r=null;t.hasNext()&&!n;)e(t=t.next)&&(r=t,n=!0);return r},e.prototype.map=function(e){for(var t=this.start,n=[];t.hasNext();)e(t=t.next)&&n.push(t);return n},e.prototype.push=function(e){return this.addLast(e)},e.prototype.unshift=function(e){this._numNodes>0?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(){return this.removeFirst()},e}();t.LinkedList=v,t.ENUM_PUBLISH_STATE_UPDATE={start:0,error:1,retry:2},t.ENUM_PLAY_STATE_UPDATE={start:0,error:1,retry:2,stop:3},t.ENUM_RETRY_STATE={didNotStart:0,retrying:1,finished:2},t.REPORT_ACTION={eventStart:"eventStart",eventEndWithMsgInfo:"eventEndWithMsgInfo",addEventMsg:"addEventMsg",addEvent:"addEvent",eventEnd:"eventEnd",addMsgInfo:"addMsgInfo"},(_=t.QualityGrade||(t.QualityGrade={}))[_.Unknown=-1]="Unknown",_[_.Excellent=0]="Excellent",_[_.Good=1]="Good",_[_.Middle=2]="Middle",_[_.Poor=3]="Poor",_[_.Die=4]="Die",(m=t.QUALITY_CONSTANT||(t.QUALITY_CONSTANT={}))[m.MinQuality=0]="MinQuality",m[m.DieQuality=0]="DieQuality",m[m.PoorMinQuality=1]="PoorMinQuality",m[m.MiddleMinQuality=30]="MiddleMinQuality",m[m.GoodMinQuality=60]="GoodMinQuality",m[m.ExcellentMinQuality=85]="ExcellentMinQuality",m[m.MaxQuality=100]="MaxQuality";var E=n(4119);Object.defineProperty(t,"getSeq",{enumerable:!0,get:function(){return E.getSeq}}),Object.defineProperty(t,"getReportSeq",{enumerable:!0,get:function(){return E.getReportSeq}}),Object.defineProperty(t,"ZegoExpressWebRTMEngine",{enumerable:!0,get:function(){return E.ZegoExpressWebRTMEngine}}),Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return E.ZegoLogger}}),Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return E.ZegoDataReport}}),Object.defineProperty(t,"ZegoExpressWebRTM",{enumerable:!0,get:function(){return E.ZegoExpressWebRTM}})},2752:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},STREAMID_TOO_LONG:{code:1000014,message:"stream ID is too long"},STREAM_ID_NULL:{code:1000015,message:"streamID is empty"},STREAM_ID_INVALID_CHARACTER:{code:1000016,message:"stream ID contains illegal characters"},NETWORK_BROKEN:{code:1000017,message:"network is broken"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},INPUT_PARAM:{code:1100001,message:"input param error."},TIMEOUT:{code:1100002,message:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},INIT_SDK_WRONG:{code:1101e3,message:"init sdk wrong"},WX_GET_SETTING_FAIL:{code:1101001,message:"wx get setting fail"},USER_ID_NULL:{code:1002005,message:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,message:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,message:"user ID is too long"},USER_NAME_NULL:{code:1002008,message:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,message:"username is too long"},ROOM_ID_NULL:{code:1002011,message:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,message:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,message:"room ID is too long"},LOGIN_TIMEOUT:{code:1002031,message:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,message:"users logging into the room exceeds the maximum number"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,message:"kickout may be the same user ID login other"},ROOM_RETRY_TIMEOUT:{code:1002053,message:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,message:"server has sent a signal to kick out"},ROOM_INNER_ERROR:{code:1002099,message:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,message:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,message:"parse json error."},LOGIN_PROCESSING:{code:1102012,message:"login is processing."},LIVEROOM_REQUEST_ERROR:{code:1102013,message:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,message:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,message:"user login state is wrong."},TOKEN_ERROR:{code:1102016,message:"token error"},DISPATCH_ERROR:{code:1102017,message:"dispatch error"},TOKEN_EXPIRED:{code:1102018,message:"token expired"},SUBCMD_ERROR:{code:1102019,message:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,message:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},DISPATCH_TIMEOUT:{code:1102022,message:"dispatch request timeout"},CONNECT_FAILED:{code:1102023,message:"connect signal fail"},PUBLISHER_MEDIA_SERVER_FORBID:{code:1003025,message:"stream is forbided by media server"},PUBLISHER_EXTRA_INFO_TOO_LONG:{code:1003051,message:"stream extra info is too long"},PUBLISHER_PARAM:{code:1103001,message:"input param error"},PUBLISHER_BROWSER_NOT_SUPPORT:{code:1103002,message:"browser do not support"},PUBLISHER_DISPATCH_FAIL:{code:1103003,message:"dispatch request error"},PUBLISHER_SCREEN_FAILED:{code:1103010,message:"screen fail"},ENUMERATE_DEVICES_FAIL:{code:1103011,message:"enumerate devices fail"},PUBLISHER_DISPATCH_REQUEST_FAIL:{code:1103020,message:"dispatch request fail"},PUBLISHER_SESSION_REQUEST_FAIL:{code:1103021,message:"session request fail"},PUBLISHER_CREATE_OFFER_ERROR:{code:1103022,message:"create offer error"},PUBLISHER_SET_LOCAL_DESC_ERROR:{code:1103023,message:"setLocalDescription error"},PUBLISHER_MEDIA_DESC_ERROR:{code:1103024,message:"mediaDesc error"},PUBLISHER_SET_REMOTE_DESC_ERROR:{code:1103025,message:"other side offer error"},PUBLISHER_CANDIDATE_ERROR:{code:1103026,message:"candidate error"},PUBLISHER_SESSION_CLOSED:{code:1103027,message:"server session closed"},PUBLISHER_MEDIA_CONNECTION_ERROR:{code:1103028,message:"ice connection error"},PUBLISHER_SERVER_NEGO_TIMEOUT:{code:1103030,message:"negotiation timeout"},PUBLISH_DEVICE_OUT_ERR:{code:1103041,message:"device change "},PUBLISH_SCREEN_CANCELED:{code:1103042,message:"screen canceled"},PUBLISH_SCREEN_NOT_SUPPORT:{code:1103043,message:"screen not support"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},REPEATED_PULL:{code:1103049,message:"repeated pull same stream"},PUBLISHER_WEBSOCKET_DISCONNECTED:{code:1103050,message:"websocket disconnected"},PUBLISHER_RETRY_TIMEOUT:{code:1103051,message:"publisher retry timeout"},PUBLISHER_HTTPS_REQUIRED:{code:1103053,message:"https is required"},PUBLISHER_NO_PREVIEW:{code:1103054,message:"no preview"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISHER_IS_PUBLISHING:{code:1103056,message:"publish is publishing"},PUBLISHER_CLIENT_IP_CHANGED:{code:1103058,message:"client ip changed"},PUBLISHER_TTL_OVERTIME:{code:1103059,message:"ttl over time"},PUBLISHER_SESSION_TIMEOUT:{code:1103060,message:"session request timeout"},PUBLISHER_GET_USER_MEDIA_FAIL:{code:1103061,message:"get media fail"},PUBLISHER_DEVICE_NO_ALLOWED:{code:1103064,message:"get device not allowed"},PUBLISHER_DEVICE_NO_READABLE:{code:1103065,message:"device is not readable"},PUBLISHER_OVER_CONSTRAINED:{code:1103066,message:"device does not meet constraints"},PUBLISHER_UPDATE_SDP_TIMEOUT:{code:1103067,message:"update sdp time out"},PUBLISHER_UPDATE_SDP_FAIL:{code:1103068,message:"update sdp fail"},PLAYER_PARAM:{code:1104001,message:"input parm error"},PLAYER_DISPATCH_REQUEST_FAIL:{code:1104020,message:"dispatch request fail"},PLAYER_SESSION_REQUEST_FAIL:{code:1104021,message:"session request fail"},PLAYER_CREATE_OFFER_ERROR:{code:1104022,message:"create offer error"},PLAYER_SET_LOCAL_DESC_ERROR:{code:1104023,message:"setLocalDescription error"},PLAYER_MEDIA_DESC_ERROR:{code:1104024,message:"mediaDesc error"},PLAYER_SET_REMOTE_DESC_ERROR:{code:1104025,message:"other side offer error"},PLAYER_CANDIDATE_ERROR:{code:1104026,message:"candidate error"},PLAYER_SESSION_CLOSED:{code:1104027,message:"server session closed"},PLAYER_MEDIA_CONNECTION_ERROR:{code:1104028,message:"ice connection error"},PLAYER_WEBSOCKET_DISCONNECTED:{code:1104029,message:"websocket disconnected"},PLAYER_SERVER_NEGO_TIMEOUT:{code:1104030,message:"negotiation timeout"},PLAYER_RETRY_TIMEOUT:{code:1104031,message:"player retry timeout"},PLAYER_IS_PLAYING:{code:1104032,message:"player is playing"},PLAYER_CLIENT_IP_CHANGED:{code:1104033,message:"client ip changed"},PLAYER_TTL_OVERTIME:{code:1104034,message:"ttl is over time"},PLAYER_SESSION_RESET:{code:1104035,message:"reset session push"},PLAYER_SESSION_TIMEOUT:{code:1104036,message:"session request timeout"},PLAYER_PROBE_TIMEOUT:{code:1104037,message:"probe time out"},PLAYER_UNSUPPORTED_PROTOCOL:{code:1104038,message:"resource mode is not supported"},DEVICE_ERROR_TYPE_UNPLUGGED:{code:1006006,message:"the device is unplugged"},IM_CONTENT_NULL:{code:1009001,message:"message content is empty"},IM_CONTENT_TOO_LONG:{code:1009002,message:"message content is too long"},IM_SEND_FAILED:{code:1009010,message:"failed to send message"},FREQ_LIMITED:{code:1109001,message:"frequency limited."}}},3529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWechatLogEvent=t.ZegoRTCLogEvent=void 0;var r=n(2752),i=function(e){return e};t.ZegoRTCLogEvent={kZegoTaskCreateStream:{event:"/sdk/create_stream",error:{kBrowserNotSupportError:r.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kParamError:r.errorCodeList.PUBLISHER_PARAM,kScreenCancelError:r.errorCodeList.PUBLISH_SCREEN_CANCELED,kScreenFailedError:r.errorCodeList.PUBLISHER_SCREEN_FAILED,kScreenNotSupportError:r.errorCodeList.PUBLISH_SCREEN_NOT_SUPPORT,kHttpsRequiredError:r.errorCodeList.PUBLISHER_HTTPS_REQUIRED,kGetUserMediaError:r.errorCodeList.PUBLISHER_GET_USER_MEDIA_FAIL,kDeviceNoAllowedError:r.errorCodeList.PUBLISHER_DEVICE_NO_ALLOWED,kDeviceNoReadableError:r.errorCodeList.PUBLISHER_DEVICE_NO_READABLE,kDeviceOverConstrainedError:r.errorCodeList.PUBLISHER_OVER_CONSTRAINED},stream_type:i,screen:i,camera:i,custom:i},kZegoTaskPublishStart:{event:"/sdk/api/publish_request",error:{kPublishParamError:r.errorCodeList.PUBLISHER_PARAM,kPublishNetworkTimeoutError:r.errorCodeList.TIMEOUT,kPublishDispatchTimeoutError:r.errorCodeList.DISPATCH_TIMEOUT,kPublishDispatchError:r.errorCodeList.DISPATCH_ERROR,kPublishNetworkBrokenError:r.errorCodeList.NETWORK_BROKEN,kPublishNoPreviewError:r.errorCodeList.PUBLISH_NO_PREVIEW,kPublishNoLoginError:r.errorCodeList.NOT_LOGIN,kPublishRetryTimeoutError:r.errorCodeList.PUBLISHER_RETRY_TIMEOUT,kMediaServerForbidError:r.errorCodeList.PUBLISHER_MEDIA_SERVER_FORBID,kPublishTokenExpiredError:r.errorCodeList.TOKEN_EXPIRED,kPublishSessionClosedError:r.errorCodeList.PUBLISHER_SESSION_CLOSED,kPublishNegoTimeoutError:r.errorCodeList.PUBLISHER_SERVER_NEGO_TIMEOUT,kCreateOfferError:r.errorCodeList.PUBLISHER_CREATE_OFFER_ERROR,kSetLocalDescError:r.errorCodeList.PUBLISHER_SET_LOCAL_DESC_ERROR,kSessionTimeoutError:r.errorCodeList.PUBLISHER_SESSION_TIMEOUT,kSessionRequestError:r.errorCodeList.PUBLISHER_SESSION_REQUEST_FAIL,kSetRemoteDescError:r.errorCodeList.PUBLISHER_SET_REMOTE_DESC_ERROR,kMediaConnectionError:r.errorCodeList.PUBLISHER_MEDIA_CONNECTION_ERROR,kWebsocketDisconnectedError:r.errorCodeList.PUBLISHER_WEBSOCKET_DISCONNECTED,kMediaDescError:r.errorCodeList.PUBLISHER_MEDIA_DESC_ERROR,kCandidateError:r.errorCodeList.PUBLISHER_CANDIDATE_ERROR,kIsPublishing:r.errorCodeList.PUBLISHER_IS_PUBLISHING,kClientIPChangedError:r.errorCodeList.PUBLISHER_CLIENT_IP_CHANGED,kTTLOverTimeError:r.errorCodeList.PUBLISHER_TTL_OVERTIME,kUpdateMediaDescriptionTimeOut:r.errorCodeList.PUBLISHER_UPDATE_SDP_TIMEOUT,kUpdateMediaDescriptionError:r.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL},publishOption:i,message:i,session_id:i,stream:i,video_en_codec_id:i,cap_w:i,cap_h:i,w:i,h:i,video_en_fps:i,video_en_bps:i,audio_c_channel_count:i,audio_en_bps:i,aec_level:i,ans_level:i,agc:i,traffic_control_min_video_bitrate:i},kZegoTaskVideoCaptureSize:{event:"/sdk/api/publish_video_c_size",session_id:i,w:i,h:i},kZegoTaskVideoPlaySize:{event:"/sdk/play_video_size_changed",session_id:i,w:i,h:i},kZegoTaskRePublish:{event:"/sdk/republish",stream:i},kZegoTaskPublishStop:{event:"/sdk/stop_publish",error:{kParamError:r.errorCodeList.PUBLISHER_PARAM},stream:i},kZegoTaskPlayStart:{event:"/sdk/api/play_request",error:{kStreamIDNullError:r.errorCodeList.STREAM_ID_NULL,kPlayParamError:r.errorCodeList.PLAYER_PARAM,kPlayStreamIDToLongError:r.errorCodeList.STREAMID_TOO_LONG,kPlayStreamIDInvalidCharacterError:r.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPlayNoLoginError:r.errorCodeList.NOT_LOGIN,kPlayRepeatedPullError:r.errorCodeList.REPEATED_PULL,kPlayNetworkTimeoutError:r.errorCodeList.TIMEOUT,kPlayDispatchTimeoutError:r.errorCodeList.DISPATCH_TIMEOUT,kPlayDispatchError:r.errorCodeList.DISPATCH_ERROR,kPlayNetworkBrokenError:r.errorCodeList.NETWORK_BROKEN,kPlayUnsupportedResourceMode:r.errorCodeList.PLAYER_UNSUPPORTED_PROTOCOL,kPlayRetryTimeoutError:r.errorCodeList.PLAYER_RETRY_TIMEOUT,kPlaySessionClosedError:r.errorCodeList.PLAYER_SESSION_CLOSED,kPlaySessionResetError:r.errorCodeList.PLAYER_SESSION_RESET,kPlayNegoTimeoutError:r.errorCodeList.PLAYER_SERVER_NEGO_TIMEOUT,kCreateOfferError:r.errorCodeList.PLAYER_CREATE_OFFER_ERROR,kSetLocalDescError:r.errorCodeList.PLAYER_SET_LOCAL_DESC_ERROR,kSessionRequestError:r.errorCodeList.PLAYER_SESSION_REQUEST_FAIL,kSessionTimeoutError:r.errorCodeList.PLAYER_SESSION_TIMEOUT,kSetRemoteDescError:r.errorCodeList.PLAYER_SET_REMOTE_DESC_ERROR,kMediaConnectionError:r.errorCodeList.PLAYER_MEDIA_CONNECTION_ERROR,kWebsocketDisconnectedError:r.errorCodeList.PLAYER_WEBSOCKET_DISCONNECTED,kCandidateError:r.errorCodeList.PLAYER_CANDIDATE_ERROR,kMediaDescError:r.errorCodeList.PLAYER_MEDIA_DESC_ERROR,kIsPlaying:r.errorCodeList.PLAYER_IS_PLAYING,kClientIPChangedError:r.errorCodeList.PLAYER_CLIENT_IP_CHANGED,kTTLOverTimeError:r.errorCodeList.PLAYER_TTL_OVERTIME,kProbeTimeOutError:r.errorCodeList.PLAYER_PROBE_TIMEOUT},playOption:i,message:i,session_id:i,stream:i,audio_activate:i,video_activate:i},kZegoTaskRePlay:{event:"/sdk/replay",stream:i},kZegoTaskPlayStop:{event:"/sdk/stop_play",error:{kParamError:r.errorCodeList.PUBLISHER_PARAM},stream:i},kZegoTaskEnumDevices:{event:"/device/list",error:{kBrowserNotSupportError:r.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:r.errorCodeList.ENUMERATE_DEVICES_FAIL},dev_list:i},kZegoTaskAudioOutput:{event:"/device/audio_capture",error:{kBrowserNotSupportError:r.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:r.errorCodeList.ENUMERATE_DEVICES_FAIL},session_id:i,device:i},kZegoTaskVideoCapture:{event:"/device/video_capture",error:{kBrowserNotSupportError:r.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:r.errorCodeList.ENUMERATE_DEVICES_FAIL},session_id:i,device:i},kZegoTaskDeviceInterrupt:{event:"/device/interrupt",error:{kBrowserNotSupportError:r.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:r.errorCodeList.ENUMERATE_DEVICES_FAIL},session_id:i,interrupt:i},kZegoTaskSetDebug:"/sdk/set_debug",kZegoTaskSetLog:"/sdk/set_log_config",kZegoTaskCheckSystemRequirements:{event:"/sdk/check_system",capability:i},kZegoTaskRemoteCameraUpdate:{event:"/sdk/remote_camera_update",stream:i,status:i},kZegoTaskRemoteMicUpdate:{event:"/sdk/remote_mic_update",stream:i,status:i},kZegoTaskDestroyStream:{event:"/sdk/destroy_stream",error:{kLocalStreamError:r.errorCodeList.LOCALSTREAM_WRONG}},kZegoTaskScreenSharingEnded:"/sdk/screen_share_end",kZegoTaskAudioOutputChanged:{event:"/device/api/audio_output",session_id:i,stream:i,device:i,reason:i},kZegoEventPublishStat:"/sdk/publish_stat_report",kZegoEventPlayStat:"/sdk/play_stat_report",kZegoTaskLiveRoomGetStreamUpdateInfo:{event:"/liveroom/get_stream_update_info",stream_update_type:i,update_stream:i},kZegoTaskLiveRoomGetStreamExtraInfo:{event:"/liveroom/get_stream_extra_info",update_stream:i},kZegoTaskPlayDecodeFirstVideoFrame:{event:"/sdk/play_decode_first_video_frame",session_id:i,fft_consumed:i},kZegoVisibilityChange:{event:"/app/background"},kZegoSetCaptureVolume:{event:"/sdk/set_capture_volume",error:{kParamError:r.errorCodeList.INPUT_PARAM}},kZegoListener:{event:"/sdk/listener"},kZegoNetProbe:{event:"/sdk/net_probe"},kZegoNetProbeResult:{event:"/sdk/net_probe_result"},kZegoTaskCloudSettingCache:{event:"/cloud_setting/cache"},kZegoTaskCloudSettingRefresh:{event:"/cloud_setting/refresh"}},t.ZegoWechatLogEvent={kZegoTaskCheckSystemRequirements:{event:"/sdk/check_system",error:{kCheckSystemGetSettingFailError:r.errorCodeList.WX_GET_SETTING_FAIL},capability:i},kZegoTaskPublishStart:{event:"/sdk/api/publish_request",error:{kPublishStreamIDNullError:r.errorCodeList.STREAM_ID_NULL,kPublishParamError:r.errorCodeList.PUBLISHER_PARAM,kPublishStreamIDTooLongError:r.errorCodeList.STREAMID_TOO_LONG,kPublishStreamIDInvalidCharacterError:r.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPublishNetworkTimeoutError:r.errorCodeList.TIMEOUT,kPublishDispatchTimeoutError:r.errorCodeList.DISPATCH_TIMEOUT,kPublishDispatchError:r.errorCodeList.DISPATCH_ERROR,kPublishNetworkBrokenError:r.errorCodeList.NETWORK_BROKEN,kPublishNoLoginError:r.errorCodeList.NOT_LOGIN,kPublishRetryTimeoutError:r.errorCodeList.PUBLISHER_RETRY_TIMEOUT,kIsPublishing:r.errorCodeList.PUBLISHER_IS_PUBLISHING},publishOption:i,stream:i,message:i},kZegoTaskPlayStart:{event:"/sdk/api/play_request",error:{kPlayStreamIDNullError:r.errorCodeList.STREAM_ID_NULL,kPlayParamError:r.errorCodeList.PLAYER_PARAM,kPlayStreamIDTooLongError:r.errorCodeList.STREAMID_TOO_LONG,kPlayStreamIDInvalidCharacterError:r.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPlayNoLoginError:r.errorCodeList.NOT_LOGIN,kPlayRepeatedPullError:r.errorCodeList.REPEATED_PULL,kPlayNetworkTimeoutError:r.errorCodeList.TIMEOUT,kPlayDispatchTimeoutError:r.errorCodeList.DISPATCH_TIMEOUT,kPlayDispatchError:r.errorCodeList.DISPATCH_ERROR,kPlayNetworkBrokenError:r.errorCodeList.NETWORK_BROKEN,kPlayRetryTimeoutError:r.errorCodeList.PLAYER_RETRY_TIMEOUT,kIsPlaying:r.errorCodeList.PLAYER_IS_PLAYING},playOption:i,message:i,session_id:i,stream:i,audio_activate:i,video_activate:i},kZegoEventPublishStat:"/sdk/publish_stat_report",kZegoEventPlayStat:"/sdk/play_stat_report",kZegoTaskRePublish:"/sdk/republish",kZegoTaskRePlay:"/sdk/replay",kZegoTaskPublishStop:{event:"/sdk/stop_publish",error:{kParamError:r.errorCodeList.PUBLISHER_PARAM},stream:i},kZegoTaskPlayStop:{event:"/sdk/stop_play",error:{kParamError:r.errorCodeList.PUBLISHER_PARAM},stream:i},kZegoTaskLiveRoomGetStreamUpdateInfo:{event:"/liveroom/get_stream_update_info",stream_update_type:i,update_stream:i},kZegoTaskLiveRoomGetStreamExtraInfo:{event:"/liveroom/get_stream_extra_info",update_stream:i}}},2367:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_WEBRTC_ACTION=void 0,(n=t.ZEGO_WEBRTC_ACTION||(t.ZEGO_WEBRTC_ACTION={})).SET_VIDEO_CONFIG="zc.svc",n.SET_AUDIO_CONFIG="zc.sac",n.REPLACE_TRACK="zc.rp",n.SET_BEAUTY_EFFECT="zc.sbe",n.ENABLE_STREAM="zc.es",n.ENABLE_MIC_ONLY="zc.emo",n.ACTIVATE_SEI_INSERT="zc.asi",n.MUTE_PUBLISH_STREAM_VIDEO="zc.mpsv.0",n.MUTE_PUBLISH_STREAM_AUDIO="zc.mpsa.0",n.MUTE_MIC="zc.mm",n.MUTE_PLAY_STREAM_VIDEO="zc.mpsv.1",n.MUTE_PLAY_STREAM_AUDIO="zc.mpsa.1",n.ADD_TRACK="zc.at",n.REMOVE_TRACK="zc.rt",n.HANDLE_TRACK="zc.ht"},4495:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.AdvancedModule=void 0;var s=n(2367),a=n(5098),c=n(8706),l=function(){function e(e,t,n,r){this.logger=e,this.dataReport=t,this.streamCenter=n,this.stateCenter=r,this.screenShotReady=!1}return e.prototype.setVideoConfig=function(e,t){var n=this;return this.logger.info(s.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" call"),new Promise((function(r,i){var o=n.stateCenter.getReportSeq();return n.dataReport.newReport(o,c.ZegoRTCLogEvent.kZegoSetVideoConfig.event),e instanceof MediaStream?t&&"object"==typeof t&&0!=Object.keys(t).length?t.width&&!n.stateCenter.checkValidNumber(t.width)?(n.logger.error(s.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints width integer number, range[1, 10000]"),n.dataReport.addMsgInfo(o,{error:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.code,message:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.message+" constraints width integer number, range[1, 10000]"}),n.dataReport.uploadReport(o),void i({errorCode:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.message+" constraints wrong"})):t.height&&!n.stateCenter.checkValidNumber(t.height)?(n.logger.error(s.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints height integer number, range[1, 10000]"),n.dataReport.addMsgInfo(o,{error:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.code,message:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.message+" constraints height integer number, range[1, 10000]"}),n.dataReport.uploadReport(o),void i({errorCode:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.message+" constraints wrong"})):void n.setPublishStreamConstraints(e,t,(function(e){n.dataReport.uploadReport(o),r(e)})):(n.logger.error(s.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" constraints wrong"),n.dataReport.addMsgInfo(o,c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError),n.dataReport.uploadReport(o),void i({errorCode:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.message+" constraints wrong"})):(n.logger.error(s.ZEGO_WEBRTC_ACTION.SET_VIDEO_CONFIG+" localStream not found"),n.dataReport.addMsgInfo(o,c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kLocalStreamError),n.dataReport.uploadReport(o),void i({errorCode:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoSetVideoConfig.error.kParamError.message+" localStream no found"}))}))},e.prototype.setAudioConfig=function(e,t){var n=this;return this.logger.info(s.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" call"),new Promise((function(r){var i=n.stateCenter.getReportSeq();return n.dataReport.newReport(i,c.ZegoRTCLogEvent.kZegoSetAudioConfig.event),e instanceof MediaStream?!t||"object"!=typeof t||0==Object.keys(t).length||void 0!==t.AEC&&"boolean"!=typeof t.AEC||void 0!==t.AGC&&"boolean"!=typeof t.AGC||void 0!==t.ANS&&"boolean"!=typeof t.ANS?(n.logger.error(s.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" constraints wrong"),n.dataReport.addMsgInfo(i,c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError),n.dataReport.uploadReport(i),void r({errorCode:c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.message+" constraints wrong"})):void n.setPublishStreamConstraints(e,t,(function(e){n.dataReport.uploadReport(i),r(e)})):(n.logger.error(s.ZEGO_WEBRTC_ACTION.SET_AUDIO_CONFIG+" localStream not found"),n.dataReport.addMsgInfo(i,c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError),n.dataReport.uploadReport(i),void r({errorCode:c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoSetAudioConfig.error.kParamError.message+" localStream no found"}))}))},e.prototype.enableStream=function(e,t){if(this.logger.info(s.ZEGO_WEBRTC_ACTION.ENABLE_STREAM+" call"),"boolean"!=typeof t.video&&"boolean"!=typeof t.audio)return this.logger.error(s.ZEGO_WEBRTC_ACTION.ENABLE_STREAM+" option error"),!1;var n=!0,r=!0;return"boolean"==typeof t.video&&(n=this.enableCamera(e,t.video,t.retain)),"boolean"==typeof t.audio&&(r=this.enableMicrophone(e,t.audio)),n&&r},e.prototype.enableMicrophoneOnly=function(e){if(this.logger.info(s.ZEGO_WEBRTC_ACTION.ENABLE_MIC_ONLY+" call"),"boolean"!=typeof e)return!1;for(var t=0;t<this.streamCenter.previewStreamList.length;t++)if(!this.streamCenter.previewStreamList[t].enableMicrophoneOnly(e,this.streamCenter))return this.logger.error("zsc.emo.0 previewer "+t+" change mic mute state failed"),!1;return this.streamCenter.isMicEnabled=e,!0},e.prototype.replaceTrack=function(e,t){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){return n=this.stateCenter.getReportSeq(),this.dataReport.newReport(n,c.ZegoRTCLogEvent.kZegoReplaceTrack.event),e instanceof MediaStream?t&&t instanceof MediaStreamTrack?(r=this._replaceTrack(e,t),this.dataReport.uploadReport(n),[2,r]):(this.logger.error(s.ZEGO_WEBRTC_ACTION.REPLACE_TRACK+" mediastream track no found"),this.dataReport.uploadReport(n,void 0,c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError),[2,{errorCode:c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError.message+" mediastream track no found"}]):(this.logger.error(s.ZEGO_WEBRTC_ACTION.REPLACE_TRACK+" localStream not found"),this.dataReport.uploadReport(n,void 0,c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError),[2,{errorCode:c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError.message+" localStream no found"}])}))}))},e.prototype.setPublishStreamConstraints=function(e,t,n){var r=this,i=null;for(var o in this.logger.info("zsc.spsc.0 constraints",JSON.stringify(t)),this.streamCenter.publisherList)this.streamCenter.publisherList[o].localStream==e&&(i=this.streamCenter.publisherList[o]);if(!i)return this.logger.error("zsc.spsc.0 publisher not found"),void(n&&n({errorCode:a.errorCodeList.PUBLISH_NOT_PUBLISH.code,extendedData:a.errorCodeList.PUBLISH_NOT_PUBLISH.message}));this.logger.info("zsc.spsc.0 streamId ",i.streamID);var s=null==i?void 0:i.publisher.previewer;if(!s)return this.logger.error("zsc.spsc.0 preview no found"),void(n&&n({errorCode:a.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:a.errorCodeList.PUBLISH_NO_PREVIEW.message}));var c=!1,l=!1;(t.width||t.height||t.frameRate)&&(s.mediaStreamConfig.videoQuality=4,c=!0),void 0===t.ANS&&void 0===t.AGC&&void 0===t.AEC||(l=!0);var u=s.localStream,d=s.videoTrack,h=s.audioTrack;c&&!d?(this.logger.error("zsc.spsc.0 video track not found"),n&&n({errorCode:a.errorCodeList.TRACK_NOT_FOUND.code,extendedData:a.errorCodeList.TRACK_NOT_FOUND.message})):t.video=!0,l&&!h?(this.logger.error("zsc.spsc.0 audio track not found"),n&&n({errorCode:a.errorCodeList.TRACK_NOT_FOUND.code,extendedData:a.errorCodeList.TRACK_NOT_FOUND.message})):t.audio=!0;var p=JSON.parse(JSON.stringify(s.mediaStreamConfig)),f=Object.assign(s.mediaStreamConfig,t),g=s.getMediaStreamConstraints(f,!0);this.logger.info("zsc.spsc.0 applyConstraints ",JSON.stringify(g));var m=[];if(c&&m.push(d.applyConstraints(g.video)),l&&(h.stop(),m.push(navigator.mediaDevices.getUserMedia({video:!1,audio:g.audio}))),t.maxBitrate){var _=i.publisher.peerConnection.getSenders().find((function(e){return e.track&&"video"===e.track.kind})),v=_.getParameters();_?(v.encodings||(v.encodings=[{}]),v.encodings[0].maxBitrate=1e3*t.maxBitrate,m.push(_.setParameters(v))):this.logger.error("zsc.spsc.0 video sender no found")}if(m.length>0)Promise.all(m).then((function(e){if(r.logger.info("zsc.spsc.0 set constraints success",e[1]),l){var o=(c?e[1]:e[0]).getAudioTracks()[0];o.enabled=0===i.publisher.mic_status;var s=i.publisher.peerConnection.getSenders().find((function(e){return"audio"===e.track.kind}));if(s&&(s.replaceTrack(o),u)){var a=r.streamCenter.checkPreview(u);a&&(a.replacePreviewTrack(o),a.gainNode=null)}}t.maxBitrate&&i.publisher&&(i.publisher.videoInfo.bitRate=t.maxBitrate),n&&n({errorCode:0,extendedData:""})})).catch((function(e){r.logger.error("zsc.spsc.0 fail reason ",e.name,JSON.stringify(e)),n&&n({errorCode:a.errorCodeList.PUBLISHER_CONSTRAINTS_ERROR.code,extendedData:e.name+" "+(e.constraint?"constraint:"+e.constraint:"")})}));else{if(this.logger.warn("zsc.spsc.0 constaints is no changes"),l){var E=s.getMediaStreamConstraints(p);this.logger.info("zsc.spsc.0 oldMediaStreamConstraints ",JSON.stringify(E)),navigator.mediaDevices.getUserMedia({video:!1,audio:E.audio}).then((function(e){var t=e.getAudioTracks()[0],n=(s.audioTrack,i.publisher.peerConnection.getSenders().find((function(e){return null!==e.track&&e.track.kind===h.kind})));if(n){n.replaceTrack(t);var o=r.streamCenter.checkPreview(u);o&&o.replacePreviewTrack(t)}r.logger.info("zsc.spsc.0.1 setbackup suc ")})).catch((function(e){r.logger.error("zsc.spsc.0.1 setbackup fail "+e.name)}))}n&&n({errorCode:a.errorCodeList.PUBLISHER_CONSTRAINTS_ERROR.code,extendedData:"constraints is no changes"})}},e.prototype.useVideoDevice=function(e,t){var n=this;return this.logger.info("zc.uvd.0 call"),new Promise((function(r){var i=n.stateCenter.getReportSeq();if(n.dataReport.newReport(i,c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.event),n.dataReport.addMsgInfo(i,{device:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.device(t)}),!(e instanceof MediaStream))return n.logger.error("zc.uvd.0 localStream not found"),n.dataReport.addMsgInfo(i,c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kLocalStreamError),n.dataReport.uploadReport(i),void r({errorCode:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.message});if("string"!=typeof t)return n.logger.error("zc.uvd.0 deviceID must be string"),n.dataReport.addMsgInfo(i,{error:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.code,message:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.message+" deviceID must be string"}),n.dataReport.uploadReport(i),void r({errorCode:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kParamError.message});var o=function(t){var o,s;n.dataReport.uploadReport(i);var a=n.streamCenter.checkPublish(e);a&&(a.cameraLabel=(null===(s=null===(o=a.publisher.previewer)||void 0===o?void 0:o.videoTrack)||void 0===s?void 0:s.label)||a.cameraLabel),r(t)};n.stateCenter.getDevices((function(i){if(!i.cameras.find((function(e){return e.deviceID==t})))return n.logger.error("zc.uvd.0 device is not found"),void r({errorCode:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kDevicesNoFoundError.code,extendedData:c.ZegoRTCLogEvent.kZegoTaskUseVideoDevice.error.kDevicesNoFoundError.message});n.switchDevice("video",e,t,o)}),(function(r){n.logger.warn("zc.uvd.0 getDevices err:",r),n.switchDevice("video",e,t,o)}))}))},e.prototype.useAudioDevice=function(e,t){var n=this;return this.logger.info("zc.uad.1 call"),new Promise((function(r){var i=n.stateCenter.getReportSeq();n.dataReport.newReport(i,c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.event),n.dataReport.addMsgInfo(i,{device:c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.device(t)});var o=function(e,t){n.logger.error("zc.uad.1 "+t);var o=e;o.message=o.message+(t?" "+t:""),n.dataReport.addMsgInfo(i,o),n.dataReport.uploadReport(i),r({errorCode:o.code,extendedData:o.message})},s=function(t){var o;n.dataReport.uploadReport(i);var s=n.streamCenter.checkPublish(e);s&&(s.microLabel=(null===(o=e.getAudioTracks()[0])||void 0===o?void 0:o.label)||s.microLabel),r(t)};e instanceof MediaStream?"string"==typeof t?n.stateCenter.getDevices((function(i){if(!i.microphones.find((function(e){return e.deviceID==t})))return n.logger.error("zc.uad.1 device is not found"),void r({errorCode:c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kDevicesNoFoundError.code,extendedData:c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kDevicesNoFoundError.message});n.switchDevice("audio",e,t,s)}),(function(r){n.logger.warn("zc.uad.1 getDevices err:",r),n.switchDevice("audio",e,t,s)})):o(c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kParamError,"deviceID must be string"):o(c.ZegoRTCLogEvent.kZegoTaskUseAudioDevice.error.kLocalStreamError,"localStream not found")}))},e.prototype.publishTarget=function(e){var t=this,n=this.stateCenter.getReportSeq();switch(e.type){case"addpush":this.dataReport.newReport(n,c.ZegoRTCLogEvent.kZegoTaskAddPublishCdnUrl.event);break;case"delpush":case"clearpush":this.dataReport.newReport(n,c.ZegoRTCLogEvent.kZegoTaskRemovePublishCdnUrl.event)}return this.dataReport.addMsgInfo(n,{stream:c.ZegoRTCLogEvent.kZegoTaskRemovePublishCdnUrl.stream(e.streamID),target_url:c.ZegoRTCLogEvent.kZegoTaskRemovePublishCdnUrl.target_url(e.pushUrl)}),new Promise((function(r,i){var o=function(e,r){t.logger.error("zb.pt"+(r||e.message)),t.dataReport.addMsgInfo(n,{error:e.code,message:e.message+(r||"")}),t.dataReport.uploadReport(n),i({errorCode:e.code,extendedData:e.message+(r?" "+r:"")})};if(-1==["addpush","delpush","clearpush"].indexOf(e.type))return t.logger.error("zb.sh.pt cdn push type error"),void o(a.errorCodeList.PUBLISHER_CDN_PUSH_ERROR,"type error");if(e.streamID&&"string"==typeof e.streamID)if(e.pushUrl&&"string"==typeof e.pushUrl)if(t.stateCenter.publishStreamList[e.streamID]){var s=t.streamCenter.getRoomByStreamID(e.streamID);s?s.streamHandler._publishTarget(e,(function(e){t.dataReport.uploadReport(n),r(e)}),o):o(c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kNoLoginError)}else o(c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kPublishStreamNoFoundError);else o(c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kParamError,"push url error");else o(c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kParamError,"stream id type error")}))},e.prototype.handleTrack=function(e,t,n,r,c){var l;return i(this,void 0,void 0,(function(){var u,d,h,p,f,g,m,_,v,E,A=this;return o(this,(function(y){switch(y.label){case 0:return t instanceof MediaStream?n instanceof MediaStreamTrack&&"audio"!=n.kind?(u=this.streamCenter.checkPreview(t))?"video"===n.kind&&(null===(l=u.videoEffect)||void 0===l?void 0:l.enabled)?(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" need to disable video beauty effect first"),c&&c({errorCode:a.errorCodeList.VIDEO_EFFECT_IS_RUNNING.code,extendedData:"need to disable video beauty effect before add or remove track"}),[2]):"ADD"==e&&(t.getTracks().length>=2||t.getTracks().find((function(e){return e.kind==n.kind})))?(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" only stream which have one track and kind no exist can add track"),c&&c({errorCode:a.errorCodeList.TRACK_CAN_NOT_ADD.code,extendedData:a.errorCodeList.TRACK_CAN_NOT_ADD.message}),[2]):"REMOVE"!=e||1!=t.getTracks().length&&t.getTracks().includes(n)?!(d=this.streamCenter.checkPublish(t))||5===d.publisher.stateNego&&1!=d.publisher.isUpdateSDP?d?(h=d.publisher,p=u,f=d.publisher.peerConnection,h.isUpdateSDP=!0,"ADD"!=e?[3,1]:(f.addTrack(n,t),[3,4])):[3,6]:(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" publish state wrong"),c&&c({errorCode:a.errorCodeList.PUBLISHER_STATE_WRONG.code,extendedData:a.errorCodeList.PUBLISHER_STATE_WRONG.message}),[2]):(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" not supported"),c({errorCode:a.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code,extendedData:a.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message}),[2]):(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" stream no found"),c&&c({errorCode:a.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:a.errorCodeList.PUBLISH_NO_PREVIEW.message}),[2]):(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" only can handle video track"),c({errorCode:a.errorCodeList.INPUT_PARAM.code,extendedData:a.errorCodeList.INPUT_PARAM.message}),[2]):(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" stream wrong"),c({errorCode:a.errorCodeList.INPUT_PARAM.code,extendedData:a.errorCodeList.INPUT_PARAM.message}),[2]);case 1:return window.RTCPeerConnection&&window.RTCPeerConnection.prototype.getTransceivers&&window.RTCRtpTransceiver.prototype.stop?[4,f.getSenders().find((function(e){return e.track&&e.track==n}))]:(this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" not supported getTransceivers"),c({errorCode:a.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.code,extendedData:a.errorCodeList.HANDLE_TRACK_NOT_SUPPORTED.message}),[2]);case 2:return g=y.sent(),[4,f.getTransceivers().find((function(e){return e.sender==g}))];case 3:if(m=y.sent(),!(g&&m&&m.stop))return this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" sender no found"),c&&c({errorCode:a.errorCodeList.TRACK_NOT_FOUND.code,extendedData:a.errorCodeList.TRACK_NOT_FOUND.message}),[2];try{f.removeTrack(g),m.stop()}catch(e){this.logger.error(s.ZEGO_WEBRTC_ACTION.HANDLE_TRACK+" "+e),e&&e({errorCode:a.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.code,extendedData:a.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.message+" "+e})}y.label=4;case 4:return _={},v=this.streamCenter.previewStreamList.find((function(e){return e.localStream.getTracks().find((function(e){return e==n}))})),_=v&&"ADD"==e?v.videoInfo:{},[4,f.createOffer()];case 5:return E=y.sent(),h.onCreateOfferSuccess(E,!0,_,(function(s){return i(A,void 0,void 0,(function(){var i;return o(this,(function(o){return 0!==s?c&&c({errorCode:a.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.code,extendedData:a.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL.message}):(i="video"==n.kind?"videoTrack":"audioTrack","ADD"==e?(t.addTrack(n),p[i]=n,"video"==n.kind&&1==n.enabled?h.sendStreamStatus(0,h.mic_status):1==n.enabled&&h.sendStreamStatus(h.camera_status,0)):("video"==n.kind?h.sendStreamStatus(2,h.mic_status):h.sendStreamStatus(h.camera_status,2),t.removeTrack(n),p[i]=null),u.mediaStreamConfig.video="ADD"==e,r({errorCode:0,extendedData:""})),[2]}))}))})),[3,7];case 6:"ADD"==e?t.addTrack(n):t.removeTrack(n),r({errorCode:0,extendedData:""}),u.mediaStreamConfig.video="ADD"==e,y.label=7;case 7:return[2]}}))}))},e.prototype.switchDevice=function(e,t,n,i){var o=this,s=this.streamCenter.checkPublish(t);if(s&&s.publisher&&5!==s.publisher.stateNego)return this.logger.error("zsc.sd.0 stream is publishing"),void(i&&i({errorCode:a.errorCodeList.PUBLISHER_STREAM_NO_FOUND.code,extendedData:a.errorCodeList.PUBLISHER_STREAM_NO_FOUND.message}));var c=this.streamCenter.checkPreview(t);if(!c)return this.logger.error("zsc.sd.0 preview no found"),void(i&&i({errorCode:a.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:a.errorCodeList.PUBLISH_NO_PREVIEW.message}));if("video"===e&&0==c.mediaStreamConfig.video)return this.logger.error("zsc.sd.0 camera can not be changed when video is false"),void(i&&i({errorCode:a.errorCodeList.VIDEO_DEVICE_FALSE.code,extendedData:a.errorCodeList.VIDEO_DEVICE_FALSE.message}));if("audio"===e&&0==c.mediaStreamConfig.audio)return this.logger.error("zsc.sd.0 microphone can not be changed when audio is false"),void(i&&i({errorCode:a.errorCodeList.AUDIO_DEVICE_FALSE.code,extendedData:a.errorCodeList.AUDIO_DEVICE_FALSE.message}));c.mediaStreamConfig.videoInput!==n&&delete c.mediaStreamConfig.facingMode;var l,u={};"video"===e?(u.videoInput=n,l=c.videoTrack):(u.audioInput=n,l=c.audioTrack);var d=this.stateCenter.browser;this.logger.info("zsc.sd.0 browser "+d),"firefox"===d&&l.stop();var h=r(r({},c.mediaStreamConfig),u),p=c.getMediaStreamConstraints(h),f=function(t,n){n.getTracks().forEach((function(t){if(t.kind===e){var n=c["video"===e?"videoTrack":"audioTrack"];t.enabled=n.enabled,n&&n.stop(),s?s.publisher.replacePublishedTrack(t):c&&c.replacePreviewTrack(t)}})),c.restartSoundLevel()};"audio"==e?p.video=!1:p.audio=!1,navigator.mediaDevices.getUserMedia(p).then((function(t){Object.assign(c.mediaStreamConfig,u),f(0,t),o.logger.info("zsc.sd.0 swtich "+e+" device success"),i&&i({errorCode:0,extendedData:""})}),(function(t){var n,r;"video"==e?null===(n=c.videoTrack)||void 0===n||n.stop():null===(r=c.audioTrack)||void 0===r||r.stop(),o.logger.warn("zsc.sd.0 swtich "+e+" device failed, stop last device and retry. ",t+""),navigator.mediaDevices.getUserMedia(p).then((function(t){Object.assign(c.mediaStreamConfig,u),f(0,t),o.logger.info("zsc.sd.0 swtich "+e+" device success"),i&&i({errorCode:0,extendedData:""})}),(function(t){o.logger.warn("zsc.sd.0 swtich "+e+" device failed and recover last device. ",t+"");var n=c.getMediaStreamConstraints(c.mediaStreamConfig),r=a.errorCodeList.VIDEO_DEVICE_FALSE;"audio"===e&&(r=a.errorCodeList.AUDIO_DEVICE_FALSE),navigator.mediaDevices.getUserMedia(n).then((function(n){f(0,n),o.logger.info("zsc.sd.0 recover last "+e+" device success"),i&&i({errorCode:r.code,extendedData:r.message+" "+JSON.stringify(t)})}),(function(t){o.logger.error("zsc.sd.0 swtich "+e+" device and recover failed, please recreate stream. ",t+""),i&&i({errorCode:r.code,extendedData:r.message+" "+JSON.stringify(t)})}))}))}))},e.prototype._replaceTrack=function(e,t){var n=this.streamCenter.checkPreview(e),r=this.streamCenter.checkPublish(e);return r?r.publisher.replacePublishedTrack(t):n?n.localStream.getTracks().find((function(e){return e.kind===t.kind}))?(n.replacePreviewTrack(t),{errorCode:0,extendedData:""}):(this.logger.error("zc.rt.0 track no found"),{errorCode:a.errorCodeList.TRACK_NOT_FOUND.code,extendedData:a.errorCodeList.TRACK_NOT_FOUND.message}):(this.logger.error("zc.rt.0 preview no found"),{errorCode:a.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:a.errorCodeList.PUBLISH_NO_PREVIEW.message})},e.prototype.enableMicrophone=function(e,t){var n=this.streamCenter.checkPreview(e);return n?n.enableMicrophone(t,this.streamCenter):(this.logger.error("zsc.em.0 no preview"),!1)},e.prototype.enableCamera=function(e,t,n){var r=this.streamCenter.checkPreview(e);return r?r.enableCamera(t,this.streamCenter,n):(this.logger.error("zsc.ec.0 no preview"),!1)},e.prototype.setBeautyEffect=function(e,t,n){var r=this;return new Promise((function(i,o){if(!(e instanceof MediaStream))return r.logger.error(s.ZEGO_WEBRTC_ACTION.SET_BEAUTY_EFFECT+" localStream not found"),void o({errorCode:c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError.code,extendedData:c.ZegoRTCLogEvent.kZegoReplaceTrack.error.kParamError.message+" localStream no found"});t=!!t;var l=function(e){i(e)},u=r.streamCenter.checkPreview(e);if(!u)return r.logger.error("zc.sbe.0 preview no found"),void l({errorCode:a.errorCodeList.PUBLISH_NO_PREVIEW.code,extendedData:a.errorCodeList.PUBLISH_NO_PREVIEW.message});u.setBeautyEffect(t,n).then((function(){l({errorCode:0,extendedData:""})})).catch((function(e){o({errorCode:-1,extendedData:e.toString()})}))}))},e}();t.AdvancedModule=l},4378:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.signal=t.publisher=t.publishModule=t.playModule=t.preview=t.streamHandler=t.zegoWebRTC=t.ENUM_PUBLISH_STREAM_STATE=t.ENUM_STREAM_CMD_PRI=t.ENUM_STREAM_SUB_CMD=t.PROTO_VERSION=void 0;var s=n(2367),a=n(5098),c=n(8706),l=n(7248);t.PROTO_VERSION="2.13.0",t.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},t.ENUM_STREAM_CMD_PRI={liveBegin:"zegochat_js.room_stream_create_req",liveEnd:"zegochat_js.room_stream_delete_req",liveUpdate:"zegochat_js.room_stream_update_req"},t.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},t.zegoWebRTC={mutePublishStreamVideo:function(e,t,n){this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" call");var r=this.stateCenter.getReportSeq();if(this.dataReport.newReport(r,c.ZegoRTCLogEvent.kZegoTaskMutePublishVideo),"boolean"!=typeof t||void 0!==n&&"boolean"!=typeof n)return this.logger.error(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" option error"),!1;var i=this.rtcModules.advancedModule.enableStream(e,{video:!t,retain:n});return this.dataReport.uploadReport(r),this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_VIDEO+" end"),i},mutePublishStreamAudio:function(e,t){this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" call");var n=this.stateCenter.getReportSeq();if(this.dataReport.newReport(n,c.ZegoRTCLogEvent.kZegoTaskMutePublishAudio),"boolean"!=typeof t)return this.logger.error(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" option error"),!1;var r=this.rtcModules.advancedModule.enableStream(e,{audio:!t});return this.dataReport.uploadReport(n),this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PUBLISH_STREAM_AUDIO+" end"),r},mutePlayStreamVideo:function(e,t){this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_VIDEO+" call "+e+" "+t);var n=this.stateCenter.getReportSeq();this.dataReport.newReport(n,c.ZegoRTCLogEvent.kZegoTaskMutePlayVideo);var r=this.rtcModules.playModule.mutePlayStream(e,"video",t);return this.dataReport.uploadReport(n),this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_VIDEO+" end"),r},mutePlayStreamAudio:function(e,t){this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_AUDIO+" call "+e+" "+t);var n=this.stateCenter.getReportSeq();this.dataReport.newReport(n,c.ZegoRTCLogEvent.kZegoTaskMutePlayAudio);var r=this.rtcModules.playModule.mutePlayStream(e,"audio",t);return this.dataReport.uploadReport(n),this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_PLAY_STREAM_AUDIO+"end"),r},muteMicrophone:function(e){this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_MIC+" call");var t=this.stateCenter.getReportSeq();if(this.dataReport.newReport(t,c.ZegoRTCLogEvent.kZegoTaskMuteMicrophone),"boolean"!=typeof e)return this.logger.error(s.ZEGO_WEBRTC_ACTION.MUTE_MIC+" option error"),!1;var n=this.rtcModules.advancedModule.enableMicrophoneOnly(!e);return this.dataReport.uploadReport(t),this.logger.info(s.ZEGO_WEBRTC_ACTION.MUTE_MIC+" end"),n},activateSEIInsert:function(e){var t=e.stream,n=e.action,r=e.infoType;return this.rtcModules.publishModule.activateSEIInsert(t,n,r)},getAudioInfo:function(e,t,n){if(!e)return this.logger.error("localStream is empty!"),!1;var i=r({},n);return new l.MediaUtil(this.ac,i).connectToSource(e,(function(e){t(e)}))},startRecord:function(e){var t=this,n=this.streamCenter.checkPreview(e);if(n){var r=e.clone(),i=r.getAudioTracks();i.length>0&&n.hasEmptyAudioTrack&&i.forEach((function(e){r.removeTrack(e)})),this.recordedBlobs=[];var o={mimeType:"video/webm;codecs=vp9"};MediaRecorder.isTypeSupported(o.mimeType)||(o={mimeType:"video/webm;codecs=vp8,opus"},MediaRecorder.isTypeSupported(o.mimeType)||(o={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(o.mimeType)||(o={mimeType:"video/webm"},MediaRecorder.isTypeSupported(o.mimeType)||(o={mimeType:""}))));try{this.mediaRecorder=new MediaRecorder(r,o)}catch(e){return void this.logger.error("Exception while creating ZegoMediaRecorder:",e)}this.mediaRecorder.onstop=function(e){t.logger.warn("Recorder stopped: "+e)},this.mediaRecorder.ondataavailable=this.handleDataAvailable.bind(this),this.mediaRecorder.start(10)}else this.logger.error("stream is not from zego!")},stopRecord:function(){this.mediaRecorder?this.mediaRecorder.stop():this.logger.warn("please invoke startRecord first")},resumeRecord:function(){this.mediaRecorder?this.mediaRecorder.resume():this.logger.warn("please invoke startRecord first")},pauseRecord:function(){this.mediaRecorder?this.mediaRecorder.pause():this.logger.warn("please invoke startRecord first")},saveRecord:function(e){if(this.mediaRecorder&&this.recordedBlobs){var t=new Blob(this.recordedBlobs,{type:"video/webm"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.style.display="none",r.href=n,r.download=e+".webm",document.body.appendChild(r),r.click(),setTimeout((function(){document.body.removeChild(r),window.URL.revokeObjectURL(n)}),100)}else this.logger.warn("please invoke startRecord first")},handleDataAvailable:function(e){e.data&&e.data.size>0&&this.recordedBlobs.push(e.data)},takeSnapShot:function(e,t){if(e&&0!==e.videoHeight){var n=document.createElement("canvas");n.width=e.videoWidth,n.height=e.videoHeight;var r=n.getContext("2d");r&&r.drawImage(e,0,0,n.width,n.height),t.src=n.toDataURL("image/jpeg")}else this.logger.error("video can not empty")},saveSnapShot:function(e,t){if(e&&0!==e.videoHeight){var n=document.createElement("canvas");n.width=e.videoWidth,n.height=e.videoHeight;var r=n.getContext("2d");r&&r.drawImage(e,0,0,n.width,n.height),n.toBlob((function(e){var n=window.URL.createObjectURL(e),r=document.createElement("a");r.style.display="none",r.href=n,r.download=t+".jpeg",document.body.appendChild(r),r.click(),setTimeout((function(){document.body.removeChild(r),window.URL.revokeObjectURL(n)}),100)}))}else this.logger.error("video can not empty")},setStreamExtraInfo:function(e,t){var n=this;return new Promise((function(r,i){var o=n.stateCenter.getReportSeq();n.dataReport.newReport(o,c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.event),n.dataReport.addMsgInfo(o,{stream:c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.stream(e),stream_extra_info:c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.stream_extra_info(t)});var s=function(e,t){n.logger.error("zb.ssei "+t),n.dataReport.addMsgInfo(o,{error:e.code,message:e.message+" "+t}),n.dataReport.uploadReport(o),i({errorCode:e.code,extendedData:e.message+" "+t})};if("string"==typeof e&&""!=e)if("string"==typeof t&&""!=t)if(n.RTM.service.isDisConnect())s(c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.error.kNoLoginError,"not login");else if(n.stateCenter.publishStreamList[e]){var a=n.streamCenter.getRoomByStreamID(e);a?(n.dataReport.addMsgInfo(o,{room_sid:c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.room_sid(a.sessionID)}),a.streamHandler.setStreamExtraInfo(e,t,r,s),n.dataReport.uploadReport(o)):s(c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.error.kNoLoginError,"not login")}else s(c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.error.kPublishStreamNoFoundError,"publish stream no found");else s(c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.error.kParamError,"extraInfo must be string and no empty");else s(c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.error.kParamError,"streamID must be string and not empty")}))},addTrack:function(e,t){var n=this;return new Promise((function(r,i){n.logger.info(s.ZEGO_WEBRTC_ACTION.ADD_TRACK+" call"),n.rtcModules.advancedModule.handleTrack("ADD",e,t,r,i)}))},removeTrack:function(e,t){var n=this;return new Promise((function(r,i){n.logger.info(s.ZEGO_WEBRTC_ACTION.REMOVE_TRACK+" call"),n.rtcModules.advancedModule.handleTrack("REMOVE",e,t,r,i)}))}},t.streamHandler={_publishTarget:function(e,n,r){var i=this;this.logger.info("zb.sh.ptcall");var o=Math.ceil((new Date).getTime()/1e3),s=e.streamID;this.stateCenter.testEnvironment&&(s="zegotest-"+this.stateCenter.appid+"-"+e.streamID);var l={appid:this.stateCenter.appid,biz_type:0,timestamp:o,seq:this.stateCenter.cdnSeq++,version:1*t.PROTO_VERSION,stream_id:s,pushurl:e.pushUrl},u={channel:"media",cmd:e.type,req_body:JSON.stringify(l)};this.logger.debug("zb.sh.pt send command"),this.sendBizChannelRequest(u,(function(t,o,s){if(i.logger.info("zb.sh.pt receive message"),0!=s.length){var l=JSON.parse(s),u=l.code,d=l.message;u&&0!=u?(i.logger.error("zb.sh.pt "+e.type+" error code: "+u+" "+d),r(a.errorCodeList.UNKNOWN_SERVER_ERROR," cmd: "+e.type+" "+u+" "+d)):(i.logger.info("zb.sh.pt "+e.type+" success"),n&&n({errorCode:0,extendedData:""}))}else r(c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kNoResponseError)}),(function(t,n,o){i.logger.info("zb.sh.pt error: "+t);var s=c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kUnknownServerError;2001==t?c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kInvalidChannelError:2002==t&&(s=c.ZegoRTCLogEvent.kZegoTaskPublishTarget.error.kBizChannelError),i.logger.error("zb.sh.pt "),r(s," cmd: "+e.type+" "+t+"   ")}))},updateStreamExtraInfo:function(e,n,r,i){var o;this.logger.info("zb.sh.usei call"),o="PUBLIC"===this.stateCenter.type?t.ENUM_STREAM_SUB_CMD.liveUpdate:t.ENUM_STREAM_CMD_PRI.liveUpdate,this.stateCenter.publishStreamList[e]&&this.stateCenter.publishStreamList[e].state>=t.ENUM_PUBLISH_STREAM_STATE.update_info?(this.stateCenter.publishStreamList[e].extra_info=n,this.updateStreamInfo(e,o,n),r({errorCode:0})):i(c.ZegoRTCLogEvent.kZegoTaskLiveRoomSendStreamExtraInfo.error.kUpdateStreamInfoFailError)},setStreamExtraInfo:function(e,t,n,r){this.updateStreamExtraInfo(e,t,n,r)}},t.preview={enableCamera:function(e,t,n){var r,i,o,s=this;if(!this.localStream)return this.logger.error("zp.ec.2 no localStream"),!1;var a=this.videoTrack;if((!n||e)&&a&&(a.enabled=e,"chrome"===this.stateCenter.browser&&e&&void 0!==typeof a.getSettings().width&&a.getSettings().width>0)){var c=a.getSettings().width-1,l=a.getSettings().height-1;a.applyConstraints({width:c,height:l}),setTimeout((function(){a.applyConstraints({width:s.videoInfo.width,height:s.videoInfo.height})}),200)}var u=null===(r=t.checkPublish(this.localStream))||void 0===r?void 0:r.publisher;if(u){var d=null===(i=u.peerConnection)||void 0===i?void 0:i.getSenders().find((function(e){var t;return"video"===(null===(t=e.track)||void 0===t?void 0:t.kind)}));if(n&&!e){var h=this.videoTrack.clone();null==d||d.replaceTrack(h),h.stop()}else e&&((null===(o=this.videoEffect)||void 0===o?void 0:o.enabled)&&this.videoEffect.output?null==d||d.replaceTrack(this.videoEffect.output):null==d||d.replaceTrack(this.videoTrack));var p=e?0:20,f=this.isAudioEnabled&&t.isMicEnabled?0:20;u.camera_status===p&&u.mic_status===f||u.sendStreamStatus(p,f)}return this.logger.info("zp.ec.2 call success"),!0},enableMicrophone:function(e,t){var n;if(!this.localStream)return this.logger.error("zp.em.2 no localStream"),!1;this.localStream.getAudioTracks().forEach((function(t){t.enabled=e})),this.audioTrack&&(this.audioTrack.enabled=e&&t.isMicEnabled);var r=null===(n=t.checkPublish(this.localStream))||void 0===n?void 0:n.publisher;if(r&&r.signal){var i=r.camera_status,o=e&&t.isMicEnabled?0:20;r.camera_status===i&&r.mic_status===o||r.sendStreamStatus(i,o)}return this.isAudioEnabled=e,this.logger.debug("zp.em.2 call success"),!0},replacePreviewTrack:function(e,t){var n;return void 0===t&&(t=!1),i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return e&&e.kind&&this.localStream?(r="audio"===e.kind?"audioTrack":"videoTrack",t||!(null===(n=this.videoEffect)||void 0===n?void 0:n.enabled)||"video"!==e.kind?[3,2]:[4,this.videoEffect.setInput(e)]):[2];case 1:return o.sent(),[3,3];case 2:(i=this.localStream.getTracks().find((function(t){return t.kind===e.kind})))&&this.localStream.removeTrack(i),this.localStream.addTrack(e),o.label=3;case 3:return t||(this[r]=e),[2]}}))}))}},t.playModule={mutePlayStream:function(e,t,n){var r=this;return this.logger.info("zsc.mps.0 call "+t+" "+n),new Promise((function(i,o){if("string"!=typeof e||""==e)return r.logger.error("zsc.mps.0 streamID must be string and not empty"),void o(!1);if("boolean"!=typeof n)return r.logger.error("zsc.mps.0 mute must be boolean"),void o(!1);var s=r.streamCenter.playerList[e];if(!s)return r.logger.error("zsc.mps.0 player not found"),void o(!1);if("video"===t){if(s.playOption&&!1===s.playOption.video||s.player&&0!==s.player.cameraStatus)return r.logger.error("zsc.mps.0 stream no contain video"),void o(!1);s.player.signal.ActivatePlayVideoStream(r.stateCenter.getSeq(),s.player.sessionId,n,(function(){r.logger.info("zsc.mps.0 suc");var e=r.stateCenter.getReportSeq();s.player.playMediaStatus.video=!n,r.dataReport.newReport(e,c.ZegoRTCLogEvent.kZegoPlayContentChanged.event),r.dataReport.addMsgInfo(e,{session_id:c.ZegoRTCLogEvent.kZegoPlayContentChanged.session_id(s.player.sessionId),video_activate:c.ZegoRTCLogEvent.kZegoPlayContentChanged.video_activate(s.player.playMediaStatus.video?1:0),audio_activate:c.ZegoRTCLogEvent.kZegoPlayContentChanged.audio_activate(s.player.playMediaStatus.audio?1:0)}),r.playVideoStatus=r.dataReport.uploadReport(e),i(!0)}),(function(){r.logger.error("zsc.mps.0 fail"),o(!1)}))}else if("audio"===t){if(s.playOption&&!1===s.playOption.audio||s.player&&0!==s.player.micStatus)return r.logger.error("zsc.mps.0 stream no contain audio"),void o(!1);s.player.signal.ActivatePlayAudioStream(r.stateCenter.getSeq(),s.player.sessionId,n,(function(){r.logger.info("zsc.mps.0 suc");var e=r.stateCenter.getReportSeq();s.player.playMediaStatus.audio=!n,r.dataReport.newReport(e,c.ZegoRTCLogEvent.kZegoPlayContentChanged.event),r.dataReport.addMsgInfo(e,{session_id:c.ZegoRTCLogEvent.kZegoPlayContentChanged.session_id(s.player.sessionId),video_activate:c.ZegoRTCLogEvent.kZegoPlayContentChanged.video_activate(s.player.playMediaStatus.video?1:0),audio_activate:c.ZegoRTCLogEvent.kZegoPlayContentChanged.audio_activate(s.player.playMediaStatus.audio?1:0)}),r.dataReport.uploadReport(e),i(!0)}),(function(){r.logger.error("zsc.mps.0 fail"),o(!1)}))}else o(!1)}))},setStreamAudioOutput:function(e,t){var n=this;return!(null==t||0==t.length||!e||(this.logger.debug("zsc.ssao.0 device "+t),e?"undefined"!==e.sinkId?(e.setSinkId(t).then((function(){n.logger.info("zsc.ssao.0 success device: "+t)})).catch((function(e){n.logger.info("zsc.ssao.0 "+e.name)})),0):(this.logger.error("zsc.ssao.0 browser does not suppport"),1):(this.logger.error("zsc.ssao.0 no localVideo"),1)))}},t.publishModule={activateSEIInsert:function(e,t,n){void 0===n&&(n=0);var r=this.streamCenter.checkPreview(e);if(!r)return this.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" stream is not created"),!1;if(0!==t&&1!==t)return this.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" value of “action” should be 0 or 1"),!1;r.activatesSEIConfig={action:t,infoType:n};var i=this.streamCenter.checkPublish(e);return i&&(null==i||i.publisher.activateSEIInsert(t,n)),!0}},t.publisher={activateSEIInsert:function(e,t){var n=this;return new Promise((function(r,i){return n.signal?(n.signal&&n.signal.activateSEIInsert(n.stateCenter.getSeq(),n.sessionId,n.peerID,e,t,(function(e,t,i){var o=!1;0===i.result?(n.logger.info(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" called success"),o=!0):1===i.result?(n.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" "+i.peer_id+" invalid param."),o=!1):2===i.result&&(n.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" peer not exist"),o=!1),r(o)}),(function(e){1===e&&n.logger.error(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" request timeout")})),!1):r(!1)}))},replacePublishedTrack:function(e,t){var n,r;return void 0===t&&(t=!1),i(this,void 0,void 0,(function(){var i,s,c,l,u,d,h,p;return o(this,(function(o){switch(o.label){case 0:return i=this.localStream,s=this.previewer,c=s.videoEffect,l=e.kind,u=s[l+"Track"],d=null===(n=this.peerConnection)||void 0===n?void 0:n.getSenders().find((function(e){return e.track.kind===l})),u?(h=0,p=0,"video"===l?(h=t?!0===u.enabled?0:20:!0===e.enabled?0:20,p=i.getAudioTracks()[0]&&1==i.getAudioTracks()[0].enabled?0:20):"audio"===l&&(p=!0===e.enabled?0:20,h=1==(null===(r=s.videoTrack)||void 0===r?void 0:r.enabled)?0:20),[4,s.replacePreviewTrack(e,t)]):[3,2];case 1:return o.sent(),d?("audio"!==l&&!t&&(null==c?void 0:c.enabled)||d.replaceTrack(e),this.camera_status===h&&this.mic_status===p||this.sendStreamStatus(h,p)):this.logger.info("zc.rt.1 replace remote track will work after stream published"),this.logger.info("zc.rt.1 replace remote track success"),[2,{errorCode:0,extendedData:""}];case 2:return this.logger.error("zc.rt.1 publisher track no found"),[2,{errorCode:a.errorCodeList.TRACK_NOT_FOUND.code,extendedData:a.errorCodeList.TRACK_NOT_FOUND.message}]}}))}))}},t.signal={activateSEIInsert:function(e,t,n,r,i,o,a){this.logger.info(s.ZEGO_WEBRTC_ACTION.ACTIVATE_SEI_INSERT+" call "+t);var c={peer_id:n,action:r,info_type:i};this.sendMessageWithCallback("ActivateSEIInsertReq",e,t,c,o,a)}}},5098:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},INPUT_PARAM:{code:1100001,message:"input param error."},PUBLISH_NOT_PUBLISH:{code:1103040,message:"publisher not found"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},TRACK_NOT_FOUND:{code:1103047,message:"track is not found"},DEVICE_NOT_FOUND:{code:1103048,message:"device is not found"},PUBLISHER_CONSTRAINTS_ERROR:{code:1103029,message:"constraint error"},PUBLISHER_CDN_PUSH_ERROR:{code:1103052,message:"publisher cdn push error"},VIDEO_DEVICE_FALSE:{code:1103045,message:"video is false"},AUDIO_DEVICE_FALSE:{code:1103046,message:"audio is false"},UNKNOWN_SERVER_ERROR:{code:1100999,message:"unknown server error"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISH_TARGET_NO_RESPONSE:{code:1103063,message:"publish target no response"},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},INVALID_CHANNEL:{code:1102024,message:"invalid channel"},PUBLISHER_EXTRA_INFO_NULL:{code:1003050,message:"extra info of publishing stream is null"},PUBLISHER_UPDATE_STREAM_INFO_FAIL:{code:1103062,message:"update stream info fail"},TRACK_CAN_NOT_ADD:{code:1103063,message:"only stream which have one track and kind no exist can add track"},TRACK_CAN_NOT_REMOVE:{code:1103064,message:"stream which only has one track can not remove "},PUBLISHER_UPDATE_SDP_FAIL:{code:1103068,message:"update sdp fail"},PUBLISHER_STATE_WRONG:{code:1103069,message:"publisher state wrong"},HANDLE_TRACK_NOT_SUPPORTED:{code:1103070,message:"not support remove track"},VIDEO_EFFECT_IS_RUNNING:{code:1103071,message:"video effect processor is running"}}},3824:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4495),i=n(4378);t.default={type:"Advance",install:function(e,t,n,o,s,a,c,l){for(var u in Object.defineProperty(t.prototype,"initAdvance",{value:function(){this.advancedModule=new r.AdvancedModule(this.logger,this.dataReport,this.streamCenter,this.stateCenter)},writable:!1}),i.zegoWebRTC)Object.defineProperty(e.prototype,u,{value:i.zegoWebRTC[u],writable:!1});for(var u in i.streamHandler)Object.defineProperty(n.prototype,u,{value:i.streamHandler[u],writable:!1});for(var u in i.preview)Object.defineProperty(o.prototype,u,{value:i.preview[u],writable:!1});for(var u in i.playModule)Object.defineProperty(s.prototype,u,{value:i.playModule[u],writable:!1});for(var u in i.publishModule)Object.defineProperty(a.prototype,u,{value:i.publishModule[u],writable:!1});for(var u in i.publisher)Object.defineProperty(c.prototype,u,{value:i.publisher[u],writable:!1});for(var u in i.signal)Object.defineProperty(l.prototype,u,{value:i.signal[u],writable:!1})}}},8706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTCLogEvent=void 0;var r=n(5098),i=function(e){return e};t.ZegoRTCLogEvent={kZegoSetVideoConfig:{event:"/sdk/set_video_config",error:{kParamError:r.errorCodeList.INPUT_PARAM,kLocalStreamError:r.errorCodeList.LOCALSTREAM_WRONG}},kZegoSetAudioConfig:{event:"/sdk/set_audio_config",error:{kParamError:r.errorCodeList.INPUT_PARAM}},kZegoReplaceTrack:{event:"/sdk/replace_track",error:{kParamError:r.errorCodeList.INPUT_PARAM}},kZegoTaskUseVideoDevice:{event:"/device/api/video_c",error:{kParamError:r.errorCodeList.INPUT_PARAM,kDevicesNoFoundError:r.errorCodeList.DEVICE_NOT_FOUND,kLocalStreamError:r.errorCodeList.LOCALSTREAM_WRONG},device:i},kZegoTaskUseAudioDevice:{event:"/device/api/audio_c",error:{kParamError:r.errorCodeList.INPUT_PARAM,kDevicesNoFoundError:r.errorCodeList.DEVICE_NOT_FOUND,kLocalStreamError:r.errorCodeList.LOCALSTREAM_WRONG},device:i},kZegoTaskPublishTarget:{event:"/sdk/publish_target",error:{kParamError:r.errorCodeList.INPUT_PARAM,kPublishStreamNoFoundError:r.errorCodeList.PUBLISHER_STREAM_NO_FOUND,kNoLoginError:r.errorCodeList.NOT_LOGIN,kNoResponseError:r.errorCodeList.PUBLISH_TARGET_NO_RESPONSE,kBizChannelError:r.errorCodeList.BIZ_CHANNEL_ERROR,kInvalidChannelError:r.errorCodeList.INVALID_CHANNEL,kUnknownServerError:r.errorCodeList.UNKNOWN_SERVER_ERROR}},kZegoTaskAddPublishCdnUrl:{event:"/sdk/add_publish_cdn_url",error:{kParamError:r.errorCodeList.INPUT_PARAM}},kZegoTaskRemovePublishCdnUrl:{event:"/sdk/remove_publish_cdn_url",error:{kParamError:r.errorCodeList.INPUT_PARAM},stream:i,target_url:i},kZegoTaskClearPublishCdnUrl:{event:"/sdk/clear_publish_cdn_url",error:{kParamError:r.errorCodeList.INPUT_PARAM}},kZegoPlayContentChanged:{event:"/sdk/play_content_changed",session_id:i,video_activate:i,audio_activate:i},kZegoTaskMutePublishVideo:"/sdk/mute_publish_video",kZegoTaskMutePublishAudio:"/sdk/mute_publish_audio",kZegoTaskMuteMicrophone:"/sdk/mute_microphone",kZegoTaskMutePlayVideo:"/sdk/mute_play_video",kZegoTaskMutePlayAudio:"/sdk/mute_play_audio",kZegoTaskLiveRoomSendStreamExtraInfo:{event:"/liveroom/send_stream_extra_info",error:{kParamError:r.errorCodeList.INPUT_PARAM,kExtraInfoNullError:r.errorCodeList.PUBLISHER_EXTRA_INFO_NULL,kNoLoginError:r.errorCodeList.NOT_LOGIN,kPublishStreamNoFoundError:r.errorCodeList.PUBLISHER_STREAM_NO_FOUND,kUpdateStreamInfoFailError:r.errorCodeList.PUBLISHER_UPDATE_STREAM_INFO_FAIL},stream:i,stream_extra_info:i,room_sid:i}}},7248:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaUtil=void 0;var n=function(){function e(e,t){var n=this,r=t.type,i=t.channels,o=void 0===i?1:i,s=t.bufferSize,a=void 0===s?0:s,c=t.sampleBit,l=void 0===c?16:c,u=t.sampleRate,d=void 0===u?44100:u;this.instant=0,this.slow=0,this.clip=0,this.context=e,this.type=r,this.channels=o,this.bufferSize=a,this.sampleBit=l,this.sampleRate=d,this.script=e.createScriptProcessor(a,o,o),(new Date).getTime(),this.script.addEventListener("audioprocess",(function(e){var t,i=e.inputBuffer.getChannelData(0),o=0,s=0;for(t=0;t<i.length;++t)o+=i[t]*i[t],Math.abs(i[t])>.99&&(s+=1);if(n.instant=Math.sqrt(o/i.length),n.slow=.95*n.slow+.05*n.instant,n.clip=s/i.length,"pcm"===r||"wav"===r){for(var a=[],c=0;c<n.channels;c++)a.push(e.inputBuffer.getChannelData(c));n.recorderBuffer(a)}})),"pcm"!==r&&"wav"!==r||this.initRecorderBuffer(r)}return e.prototype.connectToSource=function(e,t){try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),void 0!==t&&t(null)}catch(e){console.error(e),void 0!==t&&t(e)}return this},e.prototype.recorderBuffer=function(e){this.worker.postMessage({command:"record",val:e})},e.prototype.initRecorderBuffer=function(e){var t=this;this.worker=this.inlineWorker((function(){var e,t,n,r,i,o,s=[];function a(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?32768*i:32767*i,!0)}}function c(e,t,n){for(var r=0;r<n.length;r++,t++){var i=Math.max(-1,Math.min(1,n[r])),o=i<0?128*i:127*i;o+=128,e.setInt8(t,o)}}function l(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}function u(e,t){for(var n=new Float32Array(t.length/e),r=0,i=0;r<n.length;)n[r]=t[i],i+=e,r++;return n}function d(e,t,n){for(var r=new Float32Array(t*e.length),i=0,o=0;o<n[0].length;o++)r.set(n[0][o],i),i+=n[0][o].length;return r}function h(e,t){for(var n=new Float32Array(e.length+t.length),r=0;r<e.length+t.length;r+=2)n[r]=e[r/2>>0],n[r+1]=t[r/2>>0];return n}function p(t){var n,r;if(1==e)n=d(s[0],i,s),1!=t&&(r=u(t,n));else if(2==e){var o=d(s[0],i,s),a=d(s[1],i,s);1!=t?r=h(u(t,o),u(t,a)):n=h(o,a)}return 1!=t?r:n}this.onmessage=function(u){switch(u.data.command){case"init":d=u.data.val,e=d.sampleChannel,t=d.sampleBit,n=d.sampleRate,r=d.oldSampleRate,i=d.bufferSize,o=d.type;break;case"record":!function(i){for(var u=0;u<e;u++)s[u]||(s[u]=[]),s[u].push(i[u]);var d=Math.round(r/n);"pcm"===o?function(e){var n=function(e,n){var r;8==n?r=e.length:16==n&&(r=e.length,r*=2);var i=new ArrayBuffer(r),o=new DataView(i);return 8==n?c(o,0,e):16==t&&a(o,0,e),o}(p(e),t);self.postMessage({command:"exportPcmLive",val:n})}(d):"wav"===o&&function(r){var i=function(r,i){var o;8==i?o=r.length:16==t&&(o=r.length,o*=2);var s=new ArrayBuffer(o+44),u=new DataView(s),d=n,h=t,p=e;return l(u,0,"RIFF"),u.setUint32(4,36+o,!0),l(u,8,"WAVE"),l(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,1,!0),u.setUint16(22,p,!0),u.setUint32(24,d,!0),u.setUint32(28,d*p*(h/8),!0),u.setUint16(32,p*(h/8),!0),u.setUint16(34,h,!0),l(u,36,"data"),u.setUint32(40,o,!0),8==t?c(u,44,r):16==t&&a(u,44,r),u}(p(r),t);self.postMessage({command:"exportWav",val:i})}(d),s=[]}(u.data.val)}var d}})),this.worker.postMessage({command:"init",val:{sampleChannel:this.channels,sampleBit:this.sampleBit,sampleRate:this.sampleRate,oldSampleRate:this.context.sampleRate,bufferSize:this.bufferSize,type:e}}),this.worker.onmessage=function(e){switch(e.data.command){case"exportPcmLive":t.onReceiveBuffer(e.data.val);break;case"exportWav":t.onReceiveWav(e.data.val)}}},e.prototype.onReceiveBuffer=function(e){},e.prototype.onReceiveWav=function(e){},e.prototype.writeString=function(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},e.prototype.writeBuffer=function(e,t,n){for(var r=0;r<n.byteLength;r++)e.setUint8(t+r,n[r])},e.prototype.concatenation=function(e){for(var t=0,n=0;n<e.length;++n)t+=e[n].buffer.byteLength;var r=new Uint8Array(t),i=0;for(n=0;n<e.length;++n)r.set(new Uint8Array(e[n].buffer),i),i+=e[n].buffer.byteLength;return r},e.prototype.encodeWave=function(e){var t=this.concatenation(e),n=t.byteLength,r=new ArrayBuffer(n+44),i=new DataView(r),o=this.sampleRate,s=this.sampleBit,a=this.channels;return this.writeString(i,0,"RIFF"),i.setUint32(4,36+n,!0),this.writeString(i,8,"WAVE"),this.writeString(i,12,"fmt "),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,a,!0),i.setUint32(24,o,!0),i.setUint32(28,o*a*(s/8),!0),i.setUint16(32,a*(s/8),!0),i.setUint16(34,s,!0),this.writeString(i,36,"data"),i.setUint32(40,n,!0),this.writeBuffer(i,44,t),i},e.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()},e.prototype.inlineWorker=function(e){if(Worker&&e){var t=e.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],n=URL.createObjectURL(new window.Blob([t],{type:"text/javascript"}));return new Worker(n)}return null},e}();t.MediaUtil=n},2523:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_WEBRTC_ACTION=void 0,(n=t.ZEGO_WEBRTC_ACTION||(t.ZEGO_WEBRTC_ACTION={})).PRELOAD_EFFECT="zc.pe.0",n.PLAY_EFFECT="zc.pe.1",n.PAUSE_EFFECT="zc.pe.2",n.RESUME_EFFECT="zc.re",n.STOP_EFFECT="zc.se",n.UNLOAD_EFFECT="zc.ue",n.SET_EFFECT_VOLUME="zc.sev",n.START_MIXING_AUDIO="zc.sma.0",n.STOP_MIXING_AUDIO="zc.sma.1",n.MIXING_BUFFER="zc.mb",n.STOP_MIXING_BUFFER="zc.smb",n.SET_MIXING_AUDIO_VOLUME="zc.smav",n.PUBLISHER_PLAY_EFFECT="zc.p.0.pe.0",n.PUBLISHER_PAUSE_EFFECT="zc.p.0.pe.1",n.PUBLISHER_RESUME_EFFECT="zc.p.0.re",n.PUBLISHER_STOP_EFFECT="zc.p.0.se",n.PUBLISHER_START_MIXING_AUDIO="zc.p.0.sma.0",n.PUBLISHER_STOP_MIXING_AUDIO="zc.p.0.sma.1",n.PUBLISHER_MIXING_BUFFER="zc.p.0.mb",n.PUBLISHER_SET_MIXING_AUDIO_VOLUME="zc.p.0.smav"},4194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioMix=void 0;var r=n(4853),i=function(){function e(e,t,n,r){this.logger=e,this.stateCenter=t,this.ac=n,this.mediaEleSources=r,this.audioBufferList=[],this.loop=!1,this.replace=!1,this.effectEndedCallBack=null,this.effectEndedListener=null,this.startTimes=0,this.startOffset=0,this.pauseTimes=0,this.resumeOffset=0,this.paused=!1,this.isMixAudio=!1,this.isMixingBuffer=!1,this.audioCurrentTimer=null}return e.prototype.preloadEffect=function(e,t){var n=this;this.logger.info("amu.pe.0 start preload effect");var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||304==r.status){var e=r.response;n.ac.resume(),n.ac.decodeAudioData(e,(function(e){n.logger.info("amu.pe.0 effect preload success"),t("",e)}),(function(e){t(e)}))}else{var i=r.statusText;t(i)}},r.send()},e.prototype.playEffect=function(e,t,n,r,i){var o=this;!0!==this.isMixAudio?this.audioBuffer?(this.startOffset=e||0,this.loop=t||!1,this.replace=n||!1,this.effectEndedCallBack=i,this.mixEffect(this.audioBuffer,(function(){o.buffSource.loop=!!t,e?o.buffSource.start(0,e/1e3):o.buffSource.start(0),o.startTimes=Date.now(),o.effectEndedListener=o.effectEndedHandler.bind(o),o.buffSource.addEventListener("ended",o.effectEndedListener),r&&r()}))):this.logger.error("amu.pe.1 no audio buffer found"):this.logger.error("amu.pe.1 audio is mixing")},e.prototype.mixingBuffer=function(e,t){var n=this;!0!==this.isMixAudio||0!=this.audioBufferList.length||0!=this.isMixingBuffer?(this.ac.resume(),this.ac.decodeAudioData(e,(function(e){n.audioBufferList.push(e),1==n.audioBufferList.length&&n.playRealTimeEffect(n.audioBufferList[0]),n.isMixingBuffer=!0,t&&t()}),(function(e){n.logger.error("amu.mb.0 "+e),t&&t({code:r.errorCodeList.PUBLISHER_DECODE_AUDIO_FAIL.code,message:r.errorCodeList.PUBLISHER_DECODE_AUDIO_FAIL.message+" "+e})}))):this.logger.error("amu.mb.0 audio is mixing")},e.prototype.stopMingBuffer=function(){return this.isMixingBuffer=!1,this.stopMixingAudio()},e.prototype.playRealTimeEffect=function(e){var t=this;this.mixEffect(e,(function(){t.buffSource&&t.buffSource.start(0),t.buffSource&&t.buffSource.addEventListener("ended",(function(){t.audioBufferList.shift(),t.audioBufferList.length>0&&t.isMixAudio&&t.playRealTimeEffect(t.audioBufferList[0])}))}))},e.prototype.pauseEffect=function(){this.audioBufferList.length>0?this.logger.error("amu.pe.0 real time buffer can not be paused"):(this.stopMixingAudio(),this.resumeOffset=(this.pauseTimes-this.startTimes+this.startOffset)%(1e3*this.audioBuffer.duration),this.paused=!0)},e.prototype.resumeEffect=function(){this.audioBufferList.length>0?this.logger.error("amu.pe.0 real time buffer can not be resume"):(this.playEffect(this.resumeOffset,this.loop,this.replace,void 0,this.effectEndedCallBack),this.startOffset=this.resumeOffset,this.paused=!1)},e.prototype.mixEffect=function(e,t){this.localStream?(this.ac.resume(),this.gainNode=this.ac.createGain(),this.buffSource=this.ac.createBufferSource(),this.buffSource.buffer=e,this.buffSource.connect(this.gainNode),this.gainNode.connect(this.ac.destination),this.replaceTrack()&&t()):this.logger.error("amu.me.0 localStream can not be found")},e.prototype.startMixingAudio=function(e,t){if(this.replace=t||!1,this.isMixAudio)return this.logger.error("amu.sma.0 audio is mixing"),!1;if(!this.localStream)return this.logger.error("amu.sma.0 localStream can not be found"),!1;if(e.captureStream=e.captureStream||e.mozCaptureStream||e.webkitCaptureStream,this.ac.resume(),this.gainNode=this.ac.createGain(),"safari"===this.stateCenter.browser){var n=this.mediaEleSources.find((function(t){return t.audio===e}));if(n)this.mixAudio=n.node;else{var r=this.ac.createMediaElementSource(e);this.mixAudio=r,this.mediaEleSources.push({audio:e,node:r})}e.currentTime=e.currentTime,this.audioCurrentTimer=setInterval((function(){e.currentTime=e.currentTime+.45}),6e3)}else this.mixAudio=this.ac.createMediaStreamSource(e.captureStream());return this.mixAudio.connect(this.gainNode),this.replaceTrack()},e.prototype.replaceTrack=function(){this.streamSource=this.ac.createMediaStreamSource(this.localStream),this.destination=this.ac.createMediaStreamDestination(),!this.replace&&this.streamSource.connect(this.destination),this.gainNode.connect(this.destination);var e=this.destination.stream.getAudioTracks()[0],t=this.peerConnection.getSenders().find((function(t){return t.track.kind===e.kind}));return t?(this.micTrack=this.localStream.getAudioTracks()[0],t.replaceTrack(e),this.localStream.removeTrack(this.micTrack),this.localStream.addTrack(e),this.isMixAudio=!0,!0):(this.logger.error("amu.rt.0 no sender"),!1)},e.prototype.stopMixingAudio=function(){var e=this;return this.paused?(this.logger.info("amu.sma.1 audioEffect paused"),!0):this.isMixAudio?this.localStream?(this.peerConnection.getSenders().find((function(t){return t.track.kind===e.micTrack.kind})),this.mixAudio?(this.mixAudio.disconnect(this.gainNode),this.mixAudio=null,this.audioCurrentTimer&&(clearInterval(this.audioCurrentTimer),this.audioCurrentTimer=null)):this.buffSource&&(this.buffSource.removeEventListener("ended",this.effectEndedListener),this.buffSource.stop(),this.pauseTimes=Date.now(),this.buffSource.disconnect(this.gainNode),this.buffSource=null),this.gainNode.disconnect(this.destination),this.isMixAudio=!1,this.audioBufferList=[],!0):(this.logger.error("amu.sma.1 localStream can not be found"),!1):(this.logger.warn("amu.sma.1 no mixing audio found"),!0)},e.prototype.setMixingAudioVolume=function(e){return this.gainNode?(this.gainNode.gain.value=e,!0):(this.logger.error("amu.sma.2 no mixing audio found"),!1)},e.prototype.effectEndedHandler=function(){this.stopMixingAudio(),this.effectEndedCallBack&&this.effectEndedCallBack()},e}();t.AudioMix=i},6459:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioMixModule=void 0;var r=n(2523),i=n(4234),o=function(){function e(e,t,n,r,i){this.logger=e,this.dataReport=t,this.stateCenter=n,this.streamCenter=r,this.ac=i,this.buffer=null,this.blank=null,"safari"==this.stateCenter.browser&&null==this.blank&&null==this.buffer&&(this.ac.resume(),this.buffer=this.ac.createBuffer(1,1,this.ac.sampleRate),this.blank=this.ac.createBufferSource(),this.blank.buffer=this.buffer,this.blank.connect(this.ac.destination),this.blank.start())}return e.prototype.preloadEffect=function(e,t,n){e&&"string"==typeof e&&t&&"string"==typeof t?this.stateCenter.audioEffectBuffer[e]?this.logger.error(r.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" audio buffer already exists"):(this.logger.info(r.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" start preload effect"),this._preloadEffect(this.ac,e,t,n)):this.logger.error(r.ZEGO_WEBRTC_ACTION.PRELOAD_EFFECT+" params error")},e.prototype.playEffect=function(e,t,n){e.streamID&&"string"==typeof e.streamID&&e.effectID&&"string"==typeof e.effectID?this.stateCenter.audioEffectBuffer[e.effectID]?this._playEffect(e,t,n):this.logger.error(r.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" audio buffer doesn't exists"):this.logger.error(r.ZEGO_WEBRTC_ACTION.PLAY_EFFECT+" params error")},e.prototype.pauseEffect=function(e,t){return e&&"string"==typeof e?(t&&"string"!=typeof t&&this.logger.error(r.ZEGO_WEBRTC_ACTION.PAUSE_EFFECT+" effect "),this._pauseEffect(e,t)):(this.logger.error(r.ZEGO_WEBRTC_ACTION.PAUSE_EFFECT+" streamID format error"),!1)},e.prototype.resumeEffect=function(e,t){return e&&"string"==typeof e?(t&&"string"!=typeof t&&this.logger.error(r.ZEGO_WEBRTC_ACTION.RESUME_EFFECT+" effect "),this._resumeEffect(e,t)):(this.logger.error(r.ZEGO_WEBRTC_ACTION.RESUME_EFFECT+" streamID format error"),!1)},e.prototype.stopEffect=function(e,t){return e&&"string"==typeof e?(t&&"string"!=typeof t&&this.logger.error(r.ZEGO_WEBRTC_ACTION.STOP_EFFECT+" effect "),this._stopEffect(e,t)):(this.logger.error(r.ZEGO_WEBRTC_ACTION.STOP_EFFECT+" streamID format error"),!1)},e.prototype.unloadEffect=function(e){return e&&"string"==typeof e?(delete this.stateCenter.audioEffectBuffer[e],!0):(this.logger.error(r.ZEGO_WEBRTC_ACTION.UNLOAD_EFFECT+" params error"),!1)},e.prototype.setEffectVolume=function(e,t,n){if(!e||"string"!=typeof e)return this.logger.error(r.ZEGO_WEBRTC_ACTION.SET_EFFECT_VOLUME+" streamID format error"),!1;n&&"string"!=typeof n&&this.logger.error(r.ZEGO_WEBRTC_ACTION.SET_EFFECT_VOLUME+" effect ");var i=this.streamCenter.getPublisher(e);return i?i.setEffectVolume(t/100,n):(this.logger.error(r.ZEGO_WEBRTC_ACTION.SET_EFFECT_VOLUME+" publisher doesn't exist"),!1)},e.prototype.startMixingAudio=function(e,t){return this.logger.info(r.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" call "+e),e&&"string"==typeof e?t?(this.logger.info(r.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" end "+e),Array.isArray(t)&&0!==t.length?this._startMixingAudio(e,t):(this.logger.error(r.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" audio param type error"),!1)):(this.logger.error(r.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" no audio"),!1):(this.logger.error(r.ZEGO_WEBRTC_ACTION.START_MIXING_AUDIO+" stream id type error"),!1)},e.prototype.stopMixingAudio=function(e,t){return e&&"string"==typeof e?Array.isArray(t)&&0!==t.length||void 0===t?this._stopMixingAudio(e,t):(this.logger.error(r.ZEGO_WEBRTC_ACTION.STOP_MIXING_AUDIO+" audio param type error"),!1):(this.logger.error(r.ZEGO_WEBRTC_ACTION.STOP_MIXING_AUDIO+" param streamID format error"),!1)},e.prototype.mixingBuffer=function(e,t,n,i){this.logger.info(r.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" call streamID: "+e+" sourceID:"+t),e&&"string"==typeof e?t&&"string"==typeof t?(this._mixingBuffer(e,t,n,i),this.logger.info(r.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" end")):this.logger.error(r.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" param source id format error"):this.logger.error(r.ZEGO_WEBRTC_ACTION.MIXING_BUFFER+" param streamid format error")},e.prototype.stopMixingBuffer=function(e,t){return this.logger.info(r.ZEGO_WEBRTC_ACTION.STOP_MIXING_BUFFER+" call streamID: "+e+" sourceID:"+t),e&&"string"==typeof e?t&&"string"==typeof t?this._stopMixingBuffer(e,t):(this.logger.error(r.ZEGO_WEBRTC_ACTION.STOP_MIXING_BUFFER+" param source id format error"),!1):(this.logger.error(r.ZEGO_WEBRTC_ACTION.STOP_MIXING_BUFFER+" param streamid format error"),!1)},e.prototype.setMixingAudioVolume=function(e,t,n){return this.logger.info(r.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" call"),"string"!=typeof e||""==e?(this.logger.error(r.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" stream ID must be string and not empty"),!1):"number"!=typeof t||t<0||t>100?(this.logger.error(r.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" volume must be a number between 0 and 100"),!1):n&&n instanceof HTMLMediaElement?this._setMixingAudioVolume(e,t,n):(this.logger.error(r.ZEGO_WEBRTC_ACTION.SET_MIXING_AUDIO_VOLUME+" no audio"),!1)},e.prototype.getSoundLevel=function(e,t,n){this.logger.info("zc.gsl call");var r=this.stateCenter.getReportSeq();this.dataReport.newReport(r,i.ZegoRTCLogEvent.kZegoTaskGetSoundLevel.event);try{this.ac.resume();var o=this.ac.createMediaStreamSource(e),s=this.ac.createScriptProcessor(4096,1,1);this.stateCenter.audioStreamList[e.id]={mic:o,script:s},o.connect(s),s.connect(this.ac.destination),s.onaudioprocess=function(e){for(var n=e.inputBuffer.getChannelData(0),r=0,i=0;i<n.length;i++)r<n[i]&&(r=n[i]);t(r)},this.dataReport.uploadReport(r)}catch(e){n(e),this.dataReport.addMsgInfo(r,i.ZegoRTCLogEvent.kZegoTaskGetSoundLevel.error.kGetSoundLevelError),this.dataReport.uploadReport(r)}this.logger.info("zc.gsl call success")},e.prototype.stopSoundLevel=function(e){this.logger.info("zc.ssl call");var t=this.stateCenter.getReportSeq();this.dataReport.newReport(t,i.ZegoRTCLogEvent.kZegoTaskStopSoundLevel);var n=this.stateCenter.audioStreamList[e.id];n.mic.disconnect(),n.script.disconnect(),delete this.stateCenter.audioStreamList[e.id],this.dataReport.uploadReport(t)},e.prototype._preloadEffect=function(e,t,n,r){var i=this,o=new XMLHttpRequest;o.open("GET",n,!0),o.responseType="arraybuffer",o.onload=function(){if(200==o.status||304==o.status){var n=o.response;e.decodeAudioData(n,(function(e){i.logger.info("zc.pe.0 effect preload success"),i.stateCenter.audioEffectBuffer[t]=e,r&&r()}),(function(e){i.logger.error("zc.pe.0 effect preload fail "+e),r&&r(e)}))}else{var s=o.statusText;i.logger.error("zc.pe.0 effect preload fail "+s),r&&r(s)}},o.send()},e.prototype._playEffect=function(e,t,n){var r=this.stateCenter.audioEffectBuffer[e.effectID],i=this.streamCenter.getPublisher(e.streamID);i?r?i.playEffect(e,r,t,n):this.logger.error("zc.pe.1 no audio buffer found"):this.logger.error("zc.pe.1 publisher doesn't exist")},e.prototype._pauseEffect=function(e,t){var n=this.streamCenter.getPublisher(e);return n?n.pauseEffect(t):(this.logger.error("zc.pe.2 publisher doesn't exist"),!1)},e.prototype._resumeEffect=function(e,t){var n=this.streamCenter.getPublisher(e);return n?n.resumeEffect(t):(this.logger.error("zc.re.0 publisher doesn't exist"),!1)},e.prototype._stopEffect=function(e,t){var n=this.streamCenter.getPublisher(e);return n?n.stopEffect(t):(this.logger.error("zc.re.0 publisher doesn't exist"),!1)},e.prototype._setMixingAudioVolume=function(e,t,n){var r=this.streamCenter.getPublisher(e);return r?r.setMixingAudioVolume(t/100,n):(this.logger.error("zc.sma.2 publisher doesn't exist"),!1)},e.prototype._startMixingAudio=function(e,t){var n=this.streamCenter.getPublisher(e);return n?n.startMixingAudio(t):(this.logger.error("zc.sma.0 publisher doesn't exist"),!1)},e.prototype._stopMixingAudio=function(e,t){var n=this.streamCenter.getPublisher(e);return n?n.stopMixingAudio(t):(this.logger.error("zc.sma.1 publisher doesn't exist"),!1)},e.prototype._mixingBuffer=function(e,t,n,r){var i=this.streamCenter.getPublisher(e);i?n instanceof ArrayBuffer?i.mixingBuffer(t,n,r):this.logger.error("zc.mb.0 array buffer not found"):this.logger.error("zc.mb.0 publisher doesn't exist")},e.prototype._stopMixingBuffer=function(e,t){var n=this.streamCenter.getPublisher(e);return n?n.stopMixingBuffer(t):(this.logger.error("zc.sma.1 publisher doesn't exist"),!1)},e}();t.AudioMixModule=o},6214:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publisher=void 0;var r=n(2523),i=n(4194);t.publisher={playEffect:function(e,t,n,o){if(this.logger.info(r.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+""+this.streamId+" call"),this.effectList.find((function(n){return n.effectID==e.effectID&&n.audioBuffer==t})))this.logger.warn(r.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+""+this.streamId+" effect alreadly exist ");else{this.streamCenter.soundLevelDelegate&&this.stopSoundLevel();var s=new i.AudioMix(this.logger,this.stateCenter,this.ac,this.mediaEleSources);s.localStream=this.localStream,s.peerConnection=this.peerConnection,s.audioBuffer=t,this.effectList.push({audioMix:s,effectID:e.effectID,audioBuffer:t}),s.playEffect(e.playTime,e.loop,!1,n,o),this.streamCenter.soundLevelDelegate&&this.startSoundLevel(),this.logger.info(r.ZEGO_WEBRTC_ACTION.PUBLISHER_PLAY_EFFECT+""+this.streamId+" play effect "+e.effectID+" success")}},pauseEffect:function(e){var t=this.effectList.find((function(t){return t.effectID==e}));if(t)this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),t.audioMix.pauseEffect(),this.streamCenter.soundLevelDelegate&&this.startSoundLevel(),this.logger.info(r.ZEGO_WEBRTC_ACTION.PUBLISHER_PAUSE_EFFECT+" "+this.streamId+" pause "+e+" success");else{if(void 0!==e)return this.logger.error(r.ZEGO_WEBRTC_ACTION.PUBLISHER_PAUSE_EFFECT+" "+this.streamId+" no effect ID found"),!1;this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),this.effectList.forEach((function(e){return e.audioMix.pauseEffect()})),this.streamCenter.soundLevelDelegate&&this.startSoundLevel()}return!0},resumeEffect:function(e){var t=this.effectList.find((function(t){return t.effectID==e}));if(t)this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),t.audioMix.resumeEffect(),this.streamCenter.soundLevelDelegate&&this.startSoundLevel(),this.logger.info(r.ZEGO_WEBRTC_ACTION.PUBLISHER_RESUME_EFFECT+" "+this.streamId+" resume"+e+" success");else{if(void 0!==e)return this.logger.error(r.ZEGO_WEBRTC_ACTION.PUBLISHER_RESUME_EFFECT+" "+this.streamId+" no effect ID found"),!1;this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),this.effectList.forEach((function(e){return e.audioMix.resumeEffect()})),this.streamCenter.soundLevelDelegate&&this.startSoundLevel()}return!1},stopEffect:function(e){var t=this.effectList.find((function(t){return t.effectID==e}));if(t)this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),t.audioMix.stopMixingAudio(),this.effectList.splice(this.effectList.indexOf(t),1),this.streamCenter.soundLevelDelegate&&this.startSoundLevel(),this.logger.info(r.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_EFFECT+" "+this.streamId+" pause "+e+" success");else{if(void 0!==e)return this.logger.error(r.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_EFFECT+" "+this.streamId+" no effect ID found"),!1;this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),this.effectList.forEach((function(e){return e.audioMix.stopMixingAudio()})),this.effectList=[],this.streamCenter.soundLevelDelegate&&this.startSoundLevel()}return!0},setEffectVolume:function(e,t){var n=this.effectList.find((function(e){return e.effectID==t}));if(n)n.audioMix.setMixingAudioVolume(e),this.logger.info("zp.sev.0 "+this.streamId+" set volume "+t+" success");else{if(void 0!==t)return this.logger.error("zp.sev.0 "+this.streamId+" no effect ID found"),!1;this.effectList.forEach((function(t){return t.audioMix.setMixingAudioVolume(e)}))}return!0},startMixingAudio:function(e){var t=this;return this.logger.info(r.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" "+this.streamId+" call"),this.localStream?(this.micTrack||(this.micTrack=this.localStream.getAudioTracks().length>0?this.localStream.getAudioTracks()[0]:null),e.forEach((function(e){if(t.audioMixList.find((function(t){return t.media==e})))t.logger.info(r.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" "+t.streamId+" mix audio already exist");else{t.streamCenter.soundLevelDelegate&&t.stopSoundLevel();var n=new i.AudioMix(t.logger,t.stateCenter,t.ac,t.mediaEleSources);n.localStream=t.localStream,n.peerConnection=t.peerConnection,t.audioMixList.push({audioMix:n,media:e}),n.startMixingAudio(e),t.streamCenter.soundLevelDelegate&&t.startSoundLevel()}})),!0):(this.logger.error(r.ZEGO_WEBRTC_ACTION.PUBLISHER_START_MIXING_AUDIO+" localStream not found"),!1)},stopMixingAudio:function(e){var t=this;return this.logger.info(r.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_MIXING_AUDIO+" "+this.streamId+" call"),e?e.forEach((function(e){for(var n=0;n<t.audioMixList.length;n++)if(t.audioMixList[n].media==e){t.audioMixList[n].audioMix.stopMixingAudio()&&t.audioMixList.splice(n--,1);break}})):(this.audioMixList.forEach((function(e){return e.audioMix.stopMixingAudio()})),this.audioMixList=[]),!0},mixingBuffer:function(e,t,n){var o=this;if(this.logger.info(r.ZEGO_WEBRTC_ACTION.PUBLISHER_MIXING_BUFFER+" "+this.streamId+" call"),this.micTrack||(this.micTrack=this.localStream.getAudioTracks().length>0?this.localStream.getAudioTracks()[0]:null),this.arrayBufferMap[e])this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),this.arrayBufferMap[e].mixingBuffer(t,(function(){o.streamCenter.soundLevelDelegate&&o.startSoundLevel(),n&&n()}));else{this.streamCenter.soundLevelDelegate&&this.stopSoundLevel();var s=new i.AudioMix(this.logger,this.stateCenter,this.ac,this.mediaEleSources);s.localStream=this.localStream,s.peerConnection=this.peerConnection,this.arrayBufferMap[e]=s,s.mixingBuffer(t,(function(){o.streamCenter.soundLevelDelegate&&o.startSoundLevel(),n&&n()}))}},stopMixingBuffer:function(e){if(e&&this.arrayBufferMap[e])return this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),this.arrayBufferMap[e].stopMingBuffer(),delete this.arrayBufferMap[e],this.streamCenter.soundLevelDelegate&&this.startSoundLevel(),!0;if(void 0===e){for(var t in this.streamCenter.soundLevelDelegate&&this.stopSoundLevel(),this.arrayBufferMap)this.arrayBufferMap[t].stopMingBuffer();return this.streamCenter.soundLevelDelegate&&this.startSoundLevel(),!0}return this.logger.warn(r.ZEGO_WEBRTC_ACTION.PUBLISHER_MIXING_BUFFER+" "+this.streamId+" arrayBuffer no found"),!1},setMixingAudioVolume:function(e,t){this.logger.info(r.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" "+this.streamId+" call");var n=this.audioMixList.find((function(e){return e.media===t}));return n?(n.audioMix.setMixingAudioVolume(e),this.logger.info(r.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" "+this.streamId+" call success"),!0):(this.logger.error(r.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_MIXING_AUDIO_VOLUME+" "+this.streamId+" audio is not mixing"),!1)}}},4853:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={GET_SOUND_LEVEL_FAIL:{code:1000019,message:"get sound level error"},PUBLISHER_DECODE_AUDIO_FAIL:{code:1103057,message:"decode audio data fail"}}},7526:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6459),i=n(6214);t.default={type:"AudioMix",install:function(e,t){for(var n in Object.defineProperty(e.prototype,"initAudioMix",{value:function(){this.audioMixModule=new r.AudioMixModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.ac)}}),i.publisher)Object.defineProperty(t.prototype,n,{value:i.publisher[n],writable:!1})}}},4234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTCLogEvent=void 0;var r=n(4853);t.ZegoRTCLogEvent={kZegoTaskGetSoundLevel:{event:"/sdk/get_sound_level",error:{kGetSoundLevelError:r.errorCodeList.GET_SOUND_LEVEL_FAIL}},kZegoTaskStopSoundLevel:"/sdk/stop_sound_level"}},4897:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataChannel=void 0;var r=n(8835);t.DataChannel={type:"DataChannel",install:function(e){Object.defineProperty(e.prototype,"createRealTimeSequentialDataManager",{value:function(e){this.enableDataChannel(!0);var t=this.stateCenter.getRoomByRoomID(e);return t?t.dataChannelManager?null:(t.dataChannelManager=new r.ZegoRealTimeSequentialDataManager(this,e),t.dataChannelManager):(this.logger.error("zc.crsdm room no exist"),null)},writable:!1}),Object.defineProperty(e.prototype,"destroyRealTimeSequentialDataManager",{value:function(e){var t=this.stateCenter.roomList.find((function(t){return t.dataChannelManager==e}));t&&(e.dataChannelManager.reset(),t.dataChannelManager=null)},writable:!1})}}},3504:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataChannelListener=void 0;var i=function(){function e(e,t){this.zegoWebRTC=e,this.roomID=t,this.pubDataChannelList=[],this.subDataChannelList=[],this.listenerList={receiveRealTimeSequentialData:[]},this.logger=e.logger}return e.prototype.startBroadcasting=function(e,t){return n(this,void 0,void 0,(function(){var t,n,i,o;return r(this,(function(r){switch(r.label){case 0:return this.logger.info("dc.sb.0 call"),this.pubDataChannelList.includes(e)?(this.logger.error("dc.sb.0 datachannel already exist"),[2,!1]):(t=this.zegoWebRTC.streamCenter.publisherList[e])&&t.publisher.dataChannel?(this.pubDataChannelList.push(e),[2,!0]):t&&!t.publisher.dataChannel?(this.logger.error("dc.sb.0 publish datachannel no exist, try other stream ID"),[2,!1]):this.broadcastStream?[3,2]:(n=document.createElement("canvas"),i=this,[4,this.zegoWebRTC.createStream({custom:{source:n}})]);case 1:i.broadcastStream=r.sent(),r.label=2;case 2:return(o=this.zegoWebRTC.startPublishingStream(e,this.broadcastStream,{roomID:this.roomID},!0))&&this.pubDataChannelList.push(e),this.logger.info("dc.sb.0 end"),[2,o]}}))}))},e.prototype.stopBroadcasting=function(e){this.logger.info("dc.sb.1 call"),this.pubDataChannelList=this.pubDataChannelList.filter((function(t){return t!==e}));var t=this.zegoWebRTC.streamCenter.publisherList[e];return t?(t.room.roomID==this.roomID&&t.isDataChannel&&this.zegoWebRTC.stopPublishingStream(e),this.logger.info("dc.sb.1 end"),!0):(this.logger.error("dc.sb.1 datachannel no found"),!1)},e.prototype.sendRealTimeSequentialData=function(e,t){if(!t instanceof ArrayBuffer)return this.logger.error("dc.srsd data type wrong"),!1;var n=this.zegoWebRTC.streamCenter.publisherList[e];return n&&this.pubDataChannelList.includes(e)?this.sendBCMessage(n.publisher,t):(this.logger.error("dc.srsd datachannel no found"),!1)},e.prototype.sendBCMessage=function(e,t){var n;if(!e.dataChannelState)return!1;for(var r=new Uint8Array(t),i=0,o=t.byteLength,s=e.send_seq,a=0,c=(new Date).getTime(),l=0;o>0;){o>1151?l=1141:(l=o,a=1);var u=new Uint8Array(l+10);u[0]=1,u[1]=a,u[2]=e.send_seq>>8&255,u[3]=255&e.send_seq,u[4]=s>>8&255,u[5]=255&s,u[6]=c>>24&255,u[7]=c>>16&255,u[8]=c>>8&255,u[9]=255&c;for(var d=0;d<l;d++)u[d+10]=r[d+i];o-=l,i+=l,e.send_seq++,e.send_seq>=65536&&(e.send_seq=0),null===(n=e.dataChannel)||void 0===n||n.send(u)}return!0},e.prototype.startSubscribing=function(e,t){var i,o;return n(this,void 0,void 0,(function(){var t,n;return r(this,(function(r){switch(r.label){case 0:return this.logger.info("dc.ss.0 call"),this.subDataChannelList.includes(e)?(this.logger.error("dc.ss.0 datachannel already exist"),[2,!1]):(t=this.zegoWebRTC.streamCenter.playerList[e])?[3,2]:[4,this.zegoWebRTC.startPlayingStream(e,void 0,!0)];case 1:r.sent(),t=this.zegoWebRTC.streamCenter.playerList[e],r.label=2;case 2:return(n=t.player).dataChannel?(!(null===(i=n.onDataChannelList)||void 0===i?void 0:i.includes(this.onReceivedDataChannel.bind(this)))&&(null===(o=n.onDataChannelList)||void 0===o||o.push(this.onReceivedDataChannel.bind(this))),this.subDataChannelList.push(e),this.logger.info("dc.ss.0 end"),[2,!0]):(this.logger.error("dc.ss.0 datachannel no exist, try other stream ID"),[2,!1])}}))}))},e.prototype.stopSubscribing=function(e){this.logger.info("dc.ss.1 call"),this.subDataChannelList=this.subDataChannelList.filter((function(t){return t!==e}));var t=this.zegoWebRTC.streamCenter.playerList[e];return t?(t.room.roomID==this.roomID&&t.isDataChannel&&this.zegoWebRTC.stopPlayingStream(e),this.logger.info("dc.ss.1 end"),!0):(this.logger.error("dc.ss.1 datachannel no subscribe"),!1)},e.prototype.on=function(e,t){this.bindListener(e,t)},e.prototype.off=function(e,t){this.deleteListener(e,t)},e.prototype.bindListener=function(e,t){return this.listenerList[e]?"function"!=typeof t?(this.logger.error("zc.o.0 listener callBack must be funciton"),!1):(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0):(this.logger.error("dc.o.0 event "+e+" no found"),!1)},e.prototype.deleteListener=function(e,t){if(!this.listenerList[e])return this.logger.error("dc.o.1 listener no found"),!1;var n=this.listenerList[e];return t?n.splice(n.indexOf(t),1):this.listenerList[e]=[],!0},e.prototype.actionListener=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.listenerList[e]&&this.listenerList[e].forEach((function(r){try{setTimeout((function(){r.apply(void 0,n)}),0)}catch(n){t.logger.error("dc.al "+e+" "+n)}}))},e.prototype.onReceivedDataChannel=function(e,t,n){this.actionListener("receiveRealTimeSequentialData",e,t,n)},e.prototype.reset=function(){var e=this;for(var t in this.logger.info("dc.rs call"),this.pubDataChannelList.forEach((function(t){var n=e.zegoWebRTC.streamCenter.publisherList[t];n&&n.room.roomID==e.roomID&&n.isDataChannel&&e.zegoWebRTC.stopPublishingStream(t)})),this.subDataChannelList.forEach((function(t){var n=e.zegoWebRTC.streamCenter.playerList[t];n&&n.room.roomID==e.roomID&&n.isDataChannel&&e.zegoWebRTC.stopPlayingStream(t)})),this.listenerList)this.listenerList[t]=[];this.broadcastStream&&this.zegoWebRTC.destroyStream(this.broadcastStream),this.broadcastStream=void 0,this.logger.info("dc.rs end")},e}();t.DataChannelListener=i},5906:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.streamHandler=t.zegoWebRTC=void 0;var r=n(817),i=n(6145),o="2.13.0",s=1e4,a={},c="addMsgInfo";function l(e){var t,n,i,o,a="",c=r.errorCodeList;return e.errorCode<2e9&&e.errorCode>1e9?(i={1:"MIXER_START_REQUEST_ERROR",2:"MIXER_START_REQUEST_ERROR",3:"MIXER_AUTHENTICATION_FAILED",150:"MIXER_INPUT_STREAM_NOT_EXISTS",151:"MIXER_START_REQUEST_ERROR",152:"MIXER_STOP_REQUEST_ERROR",153:"MIXER_INPUT_PARAMETERS_ERROR",154:"MIXER_EXCEED_MAX_OUTPUT_COUNT",155:"MIXER_INPUT_PARAMETERS_ERROR",156:"MIXER_VIDEO_CONFIG_INVALID",157:"MIXER_NO_SERVICES",158:"MIXER_EXCEED_MAX_INPUT_COUNT",159:"MIXER_START_REQUEST_ERROR",160:"MIXER_NOT_OWNER_STOPMIXER",170:"MIXER_WATERMARK_PARAMETERS_ERROR",171:"MIXER_WATERMARK_NULL",175:"MIXER_REPEAT_INPUT",190:"MIXER_START_REQUEST_ERROR"},o="MIXER_INNER_ERROR",(n=e.errorCode-s)>1e9&&i[n-1e9]&&(o=i[n-1e9]),t=c[a=o]):e.errorCode<1e6&&(t=this.stateCenter.decodeServerError(e.errorCode,e.extendedData),a=this.stateCenter.getLiveRoomError(e.errorCode)),{reportErr:t,actualError:c[a]}}t.zegoWebRTC={startMixerTask:function(e){var t=this;return new Promise((function(n,r){var o=t.stateCenter.getReportSeq();t.dataReport.newReport(o,i.ZegoRTCLogEvent.kZegoTaskMixStart.event),t.stateCenter.logReportCallback("kZegoTaskMixStart"+e.taskID,t.dataReport,o,t.stateCenter.reportList);var s={errorCode:1005027,extendedData:"mix stream input parameters are wrong"};if(null==e?void 0:e.inputList.find((function(e){return(void 0===e.streamID||null===e.streamID)&&(s.extendedData=s.extendedData+". streamID should be of string type",!0)})))return t.dataReport.addMsgInfo(o,s),t.dataReport.uploadReport(o),t.stateCenter.unregisterCallback("kZegoTaskMixStart"+e.taskID,t.stateCenter.reportList),void r(s);e.outputConfig&&e.outputConfig.outputFps&&(e.outputConfig.outputFPS=e.outputConfig.outputFps);var a=function(n){var i=l(n),s=i.reportErr,a=i.actualError;s?t.dataReport.addMsgInfo(o,s):t.dataReport.addMsgInfo(o,n),t.dataReport.uploadReport(o),t.stateCenter.unregisterCallback("kZegoTaskMixStart"+e.taskID,t.stateCenter.reportList),a&&(n.errorCode=null==a?void 0:a.code,n.extendedData=(null==a?void 0:a.message)||""),r(n)},c=t.stateCenter.roomList[0];c?c.streamHandler.updateMixStream(e,(function(r){t.dataReport.uploadReport(o),t.stateCenter.unregisterCallback("kZegoTaskMixStart"+e.taskID,t.stateCenter.reportList),n(r)}),a):a({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kNoLoginError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kNoLoginError.message})}))},setMixerTaskConfig:function(e){var t=this;return new Promise((function(n,r){var o=t.stateCenter.getReportSeq();t.dataReport.newReport(o,i.ZegoRTCLogEvent.kZegoTaskMixConfig.event),t.stateCenter.logReportCallback("kZegoTaskMixConfig",t.dataReport,o,t.stateCenter.reportList);var s=t.stateCenter.roomList[0];s?s.streamHandler.setMixerTaskConfig(e).then((function(e){t.dataReport.uploadReport(o),t.stateCenter.unregisterCallback("kZegoTaskMixConfig",t.stateCenter.reportList),n(e)})).catch((function(e){t.dataReport.addMsgInfo(o,e),t.dataReport.uploadReport(o),t.stateCenter.unregisterCallback("kZegoTaskMixConfig",t.stateCenter.reportList),r(e)})):r({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kNoLoginError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kNoLoginError.message})}))},stopMixerTask:function(e){var t=this;return new Promise((function(n,r){var o=t.stateCenter.getReportSeq();if(t.dataReport.newReport(o,i.ZegoRTCLogEvent.kZegoTaskMixStop.event),!e||"string"!=typeof e||e.length>256||!t.stateCenter.checkIllegalCharacters(e))return t.logger.error("zb.rh.lg taskID must be string less 256"),t.dataReport.addMsgInfo(o,{error:i.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.code,message:i.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.message+" param taskID error"}),t.dataReport.uploadReport(o),void r({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStop.error.kParamError.message+" param taskID error"});var s=function(e){var n=l(e),i=n.reportErr,s=n.actualError;i?t.dataReport.addMsgInfo(o,i):t.dataReport.addMsgInfo(o,e),t.dataReport.uploadReport(o),s&&(e.errorCode=null==s?void 0:s.code,e.extendedData=(null==s?void 0:s.message)||""),r(e)},a=t.stateCenter.roomList[0];a?a.streamHandler.stopMixStream(e,(function(e){t.dataReport.uploadReport(o),n(e)}),s):s({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStop.error.kNoLoginError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStop.error.kNoLoginError.message})}))}},t.streamHandler={setMixerTaskConfig:function(e){var t=this;return new Promise((function(n,r){var o,s={},l={};if(e&&e.videoCodec){var u=e.videoCodec.toLowerCase();if(-1==["vp8","h264"].indexOf(u))return t.logger.error("zb.sh.ums param videoCode error"),r({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kVideoConfigInvalidError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kVideoConfigInvalidError.message}),!1;s.videoCodec=u,l.video_codec=u}if(e.backgroundColor){if(!t.stateCenter.checkInteger(e.backgroundColor))return t.logger.error("zb.sh.ums param backgroundColor must be integer number"),r({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;s.backgroundColor=e.backgroundColor,l.background_color=e.backgroundColor}if(e.backgroundImage){if("string"!=typeof e.backgroundImage)return t.logger.error("zb.sh.ums param outputBgImage error"),r({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kParamError.message}),!1;if(!e.backgroundImage.startsWith("preset-id://")||!e.backgroundImage.endsWith(".jpg")&&!e.backgroundImage.endsWith(".png"))return t.logger.error("zb.sh.ums illegal input background image URL"),r({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kBackgroundImageUrlInvalidError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixConfig.error.kBackgroundImageUrlInvalidError.message}),!1;s.backgroundImage=e.backgroundImage,l.background_image=e.backgroundImage}e.waterMark&&(s.waterMark=e.waterMark,l.water_mark=e.waterMark),e.extraParams&&(s.extraParams||(s.extraParams=[]),(o=s.extraParams).push.apply(o,e.extraParams)),s=a,t.stateCenter.actionSuccessCallback("kZegoTaskMixConfig",t.stateCenter.reportList)&&t.stateCenter.actionSuccessCallback("kZegoTaskMixConfig",t.stateCenter.reportList)(c,void 0,{config:i.ZegoRTCLogEvent.kZegoTaskMixConfig.config(l)}),n({errorCode:0,extendedData:""})}))},stopMixStream:function(e,t,n,a,c){var l=this;this.logger.info("zb.sh.sms call");var u={id_name:this.stateCenter.idName,live_channel:this.roomID,appid:this.stateCenter.appid,version:o};"string"==typeof e&&(u.task_id=e),null!=a?this.stateCenter.testEnvironment?u.stream_id="zegotest-"+this.stateCenter.appid+"-"+a:u.stream_id=a:null!=c&&(u.mixurl=c);var d={channel:"zeus",cmd:"stop_mix",req_body:JSON.stringify(u)};return this.sendBizChannelRequest(d,(function(){t&&t({errorCode:0})}),(function(e){var t;"number"==typeof e?n&&n({errorCode:l.stateCenter.getServerError(s+e).code,extendedData:""}):(l.logger.error("zb.sh.sms stop mix fail "+JSON.stringify(e)),t=e==r.errorCodeList.TIMEOUT?i.ZegoRTCLogEvent.kZegoTaskMixStop.error.kRequestError:i.ZegoRTCLogEvent.kZegoTaskMixStop.error.kInternalError,n&&n({errorCode:t.code,extendedData:t.message}))})),!0},updateMixStream:function(e,t,n){var l,u=this;if(this.logger.info("zb.sh.ums call"),!e.noTaskID&&!e.taskID)return this.logger.error("zb.sh.ums no taskId found"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDNullError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDNullError.message}),!1;if(!e.noTaskID&&"string"!=typeof e.taskID)return this.logger.error("zb.rh.lg taskId must be string"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.noTaskID&&e.taskID.length>256)return this.logger.error("zb.sh.ums taskId is too long"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDToLongError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDToLongError.message}),!1;if(!e.noTaskID&&!this.stateCenter.checkIllegalCharacters(e.taskID))return this.logger.error("zb.sh.ums task ID contains illegal characters"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDInvalidCharacterError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kTaskIDInvalidCharacterError.message}),!1;if(!e.inputList||0==e.inputList.length)return this.logger.error("zb.sh.ums input list wrong"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputListNullError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInputListNullError.message}),!1;e.inputList.forEach((function(e){"AUDIO"===e.contentType&&(!e.layout&&(e.layout={top:0,left:0,bottom:0,right:0}),e.layout.top=0,e.layout.left=0,e.layout.bottom=1,e.layout.right=1)}));for(var d=e.inputList.every((function(e){return"AUDIO"===e.contentType})),h=0;h<e.inputList.length;h++){var p=e.inputList[h],f={errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message};if("object"!=typeof p.layout)return this.logger.error("zb.sh.ums input layout must be object"),n(f),!1;if(!(this.stateCenter.checkInteger(p.layout.top,!1)&&this.stateCenter.checkInteger(p.layout.bottom,!1)&&this.stateCenter.checkInteger(p.layout.left,!1)&&this.stateCenter.checkInteger(p.layout.right,!1)))return this.logger.error("zb.sh.ums top、left、bottom、right must be integer number"),n(f),!1;if(void 0!==p.renderMode&&![0,1].includes(p.renderMode))return this.logger.error("zb.sh.ums render_mode is wrong"),n(f),!1}if(!e.outputList||0==e.outputList.length)return this.logger.error("zb.sh.ums no output list found"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputListNullError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputListNullError.message}),!1;if(e.outputList.some((function(e){return"string"==typeof e&&!u.stateCenter.isUrl(e)&&!u.stateCenter.checkIllegalCharacters(e)||"object"==typeof e&&e.target&&!u.stateCenter.isUrl(e.target)&&!u.stateCenter.checkIllegalCharacters(e.target)})))return this.logger.error("zb.sh.ums stream output target is incorrect"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.message}),!1;if(!(d||e.outputConfig&&"object"==typeof e.outputConfig))return this.logger.error("zb.sh.ums no output config found"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputNoTargetError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputNoTargetError.message}),!1;if(d&&(void 0===e.outputConfig&&(e.outputConfig={outputBitrate:0,outputFPS:0,outputWidth:0,outputHeight:0}),e.outputConfig.outputBitrate=.001,e.outputConfig.outputFPS=1,e.outputConfig.outputWidth=1,e.outputConfig.outputHeight=1),!(d||e.outputConfig.outputBitrate&&this.stateCenter.checkInteger(e.outputConfig.outputBitrate)))return this.logger.error("zb.sh.ums bitrate param is required and must be integer number"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.outputConfig.outputFPS||!this.stateCenter.checkInteger(e.outputConfig.outputFPS))return this.logger.error("zb.sh.ums fps param is required and must be integer number"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.outputConfig.outputWidth||!this.stateCenter.checkInteger(e.outputConfig.outputWidth))return this.logger.error("zb.sh.ums width param is required and must be integer number"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(!e.outputConfig.outputHeight||!this.stateCenter.checkInteger(e.outputConfig.outputHeight))return this.logger.error("zb.sh.ums height param is required and must be integer number"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(void 0!==e.outputConfig.outputAudioCodecID&&!this.stateCenter.checkInteger(e.outputConfig.outputAudioCodecID,!1))return this.logger.error("zb.sh.ums AudioCodecID param must be integer number"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(void 0!==e.outputConfig.outputAudioBitrate&&!this.stateCenter.checkInteger(e.outputConfig.outputAudioBitrate))return this.logger.error("zb.sh.ums AudioBitrate param must be integer number"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;if(void 0!==e.outputConfig.outputAudioChannels&&!this.stateCenter.checkInteger(e.outputConfig.outputAudioChannels,!1))return this.logger.error("zb.sh.ums AudioChannels param must be integer number"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kParamError.message}),!1;var g=0;e.outputConfig.singleStreamPassThrough&&"boolean"==typeof e.outputConfig.singleStreamPassThrough&&(g=e.outputConfig.singleStreamPassThrough?1:0);var m={task_id:e.taskID,id_name:this.stateCenter.idName,live_channel:this.roomID,appid:this.stateCenter.appid,version:o,bypass:g},_=a;_&&(_.videoCodec&&(m.extra_params=[{key:"video_encode",value:_.videoCodec}]),_.backgroundColor&&(m.output_bg_color=_.backgroundColor),_.backgroundImage&&(m.output_bg_image=_.backgroundImage),_.waterMark&&(m.watermark=_.waterMark),_.extraParams&&(!m.extra_params&&(m.extra_params=[]),(l=m.extra_params).push.apply(l,_.extraParams)));var v=[];for(h=0;h<e.inputList.length;h++){var E=e.inputList[h],A=E.streamID;this.stateCenter.testEnvironment&&(A="zegotest-"+this.stateCenter.appid+"-"+E.streamID),v.push({stream_id:A,content_control:"AUDIO"===E.contentType?1:0,rect:{layer:h,top:E.layout.top,left:E.layout.left,bottom:E.layout.bottom,right:E.layout.right},render_mode:E.renderMode})}m.MixInput=v,this.stateCenter.actionSuccessCallback("kZegoTaskMixStart"+e.taskID,this.stateCenter.reportList)&&this.stateCenter.actionSuccessCallback("kZegoTaskMixStart"+e.taskID,this.stateCenter.reportList)(c,void 0,{mix_stream_id:i.ZegoRTCLogEvent.kZegoTaskMixStart.mix_stream_id(e.taskID),stream_cnt:i.ZegoRTCLogEvent.kZegoTaskMixStart.stream_cnt(v.length),input_stream_list:i.ZegoRTCLogEvent.kZegoTaskMixStart.input_stream_list(v)});var y=[];e.outputList.forEach((function(t){var r={},o="";if("string"==typeof t)o=t;else{if("object"!=typeof t||!t.target)return u.logger.error("zb.sh.ums output target required"),n({errorCode:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.code,extendedData:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kOutputTargetInvalidError.message}),!1;o=t.target}o.startsWith("rtmp://")||o.startsWith("https://")&&o.endsWith(".flv")||o.startsWith("https://")&&o.endsWith(".m3u8")?r.mixurl=o:u.stateCenter.testEnvironment?r.stream_id="zegotest-"+u.stateCenter.appid+"-"+o:r.stream_id=o,r.bitrate=1e3*e.outputConfig.outputBitrate,r.fps=e.outputConfig.outputFPS,r.width=e.outputConfig.outputWidth,r.height=e.outputConfig.outputHeight,e.outputConfig.outputAudioCodecID&&(r.audio_enc_id=e.outputConfig.outputAudioCodecID),"vp8"===_.videoCodec?r.audio_enc_id=3:"h264"===_.videoCodec&&(r.audio_enc_id=0),e.outputConfig.outputAudioBitrate&&(r.audio_bitrate=1e3*e.outputConfig.outputAudioBitrate),e.outputConfig.outputAudioChannels&&(r.audio_channel_cnt=e.outputConfig.outputAudioChannels),u.stateCenter.testEnvironment?r.testenv=1:r.testenv=0,y.push(r)})),m.MixOutput=y,this.stateCenter.actionSuccessCallback("kZegoTaskMixStart"+e.taskID,this.stateCenter.reportList)&&this.stateCenter.actionSuccessCallback("kZegoTaskMixStart"+e.taskID,this.stateCenter.reportList)(c,void 0,{output_target_list:i.ZegoRTCLogEvent.kZegoTaskMixStart.output_target_list(y)});var S={channel:"zeus",cmd:"start_mix",req_body:JSON.stringify(m)};return this.logger.debug("zb.sh.ums send command"),this.sendBizChannelRequest(S,(function(e,r,i){u.logger.debug("zb.sh.ums receive message");var o="zegotest-"+u.stateCenter.appid+"-";if(0!=i.length){for(var s=JSON.parse(i),a=[],c=0;c<s.play.length;c++){var l={rtmpURL:"",hlsURL:"",flvURL:""},d=s.play[c].stream_alias||"";u.stateCenter.testEnvironment&&d&&d.startsWith(o)&&(d=d.slice(o.length)),l.streamID=d,s.play[c].rtmp_url&&s.play[c].rtmp_url.length>0&&(l.rtmpURL=s.play[c].rtmp_url),s.play[c].hls_url&&s.play[c].hls_url.length>0&&(l.hlsURL=s.play[c].hls_url),s.play[c].hdl_url&&s.play[c].hdl_url.length>0&&(l.flvURL=s.play[c].hdl_url),a.push(l)}if(t){var h={mixerOutputList:a};t({errorCode:0,extendedData:JSON.stringify(h)})}}else n&&n({errorCode:u.stateCenter.getServerError(10001).code,extendedData:""})}),(function(e,t,o){if("number"==typeof e){u.logger.debug("zb.sh.ums error: "+e);var a=[];if(1000000150==e&&0!=o.length)for(var c=JSON.parse(o),l="zegotest-"+u.stateCenter.appid+"-",d=0;d<c.non_exist_streams.length;d++){var h=c.non_exist_streams[d];u.stateCenter.testEnvironment&&h.startsWith(l)?a.push(h.slice(l.length)):a.push(h)}n&&n({errorCode:u.stateCenter.getServerError(s+e).code,extendedData:""})}else{var p;u.logger.debug("zb.sh.ums error code "+e.code),p=e==r.errorCodeList.TIMEOUT?i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kRequestError:i.ZegoRTCLogEvent.kZegoTaskMixStart.error.kInternalError,n&&n({errorCode:p.code,extendedData:p.message})}})),!0}}},817:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},INPUT_PARAM:{code:1100001,message:"input param error."},TIMEOUT:{code:1100002,message:"network timeout."},MIXER_NO_SERVICES:{code:1005e3,message:"no mix stream service"},MIXER_TASK_ID_NULL:{code:1005001,message:"mixer task is null"},MIXER_TASK_ID_TOO_LONG:{code:1005002,message:"task ID is too long"},MIXER_TASK_ID_INVALID_CHARACTER:{code:1005003,message:"task ID contains illegal characters"},MIXER_NO_OUTPUT_TARGET:{code:1005005,message:"task configuration does not specify output"},MIXER_OUTPUT_TARGET_INVALID:{code:1005006,message:"stream output target is incorrect"},MIXER_START_REQUEST_ERROR:{code:1005010,message:"start mixer task fail, possibly due to network reasons"},MIXER_STOP_REQUEST_ERROR:{code:1005011,message:"stop mixer task fail, possibly due to network reasons"},MIXER_NOT_OWNER_STOP_MIXER:{code:1005012,message:" maxed task must be stopped by the start user of the task"},MIXER_INPUTLIST_NULL:{code:1005020,message:"Mixed stream task input list is null"},MIXER_OUTPUTLIST_NULL:{code:1005021,message:"Mixed stream task output list is null"},MIXER_VIDEO_CONFIG_INVALID:{code:1005023,message:"invalid mixed stream task video configuration"},MIXER_EXCEED_MAX_INPUT_COUNT:{code:1005025,message:"more than the maximum number of input streams"},MIXER_INPUT_STREAM_NOT_EXISTS:{code:1005026,message:"Input stream does not exist"},MIXER_EXCEED_MAX_OUTPUT_COUNT:{code:1005030,message:"more than the maximum number of output streams"},MIXER_AUTHENTICATION_FAILED:{code:1005050,message:"mixed stream authentication failed"},MIXER_WATERMARK_NULL:{code:1005061,mag:"input watermark is null"},MIXER_WATERMARK_PARAMETERS_ERROR:{code:1005062,message:"input watermark parameter is wrong"},MIXER_WATERMARK_URL_INVALID:{code:1005063,message:"illegal input watermark URL"},MIXER_BACKGROUND_IMAGE_URL_INVALID:{code:1005067,message:"illegal input background image URL"},MIXER_REPEAT_INPUT:{code:1005099,message:"mix stream input repeat"},MIXER_INNER_ERROR:{code:1005099,message:"mixer internal error"}}},577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5906);t.default={type:"MixStream",install:function(e,t){for(var n in r.zegoWebRTC)Object.defineProperty(e.prototype,n,{value:r.zegoWebRTC[n],writable:!1});for(var n in r.streamHandler)Object.defineProperty(t.prototype,n,{value:r.streamHandler[n],writable:!1})}}},6145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTCLogEvent=void 0;var r=n(817),i=function(e){return e};t.ZegoRTCLogEvent={kZegoTaskMixStart:{event:"/mix/start_mix",error:{kParamError:r.errorCodeList.INPUT_PARAM,kTaskIDNullError:r.errorCodeList.MIXER_TASK_ID_NULL,kTaskIDToLongError:r.errorCodeList.MIXER_TASK_ID_TOO_LONG,kTaskIDInvalidCharacterError:r.errorCodeList.MIXER_TASK_ID_INVALID_CHARACTER,kInputListNullError:r.errorCodeList.MIXER_INPUTLIST_NULL,kOutputListNullError:r.errorCodeList.MIXER_OUTPUTLIST_NULL,kOutputTargetInvalidError:r.errorCodeList.MIXER_OUTPUT_TARGET_INVALID,kOutputNoTargetError:r.errorCodeList.MIXER_NO_OUTPUT_TARGET,kRequestError:r.errorCodeList.MIXER_START_REQUEST_ERROR,kInternalError:r.errorCodeList.MIXER_INNER_ERROR,kNoLoginError:r.errorCodeList.NOT_LOGIN},mix_stream_id:i,stream_cnt:i,input_stream_list:i,output_target_list:i},kZegoTaskMixStop:{event:"/mix/stop_mix",error:{kParamError:r.errorCodeList.INPUT_PARAM,kTaskIDNullError:r.errorCodeList.MIXER_TASK_ID_NULL,kRequestError:r.errorCodeList.MIXER_STOP_REQUEST_ERROR,kInternalError:r.errorCodeList.MIXER_INNER_ERROR,kNoLoginError:r.errorCodeList.NOT_LOGIN}},kZegoTaskMixConfig:{event:"/mix/config_mix",error:{kParamError:r.errorCodeList.INPUT_PARAM,kVideoConfigInvalidError:r.errorCodeList.MIXER_VIDEO_CONFIG_INVALID,kBackgroundImageUrlInvalidError:r.errorCodeList.MIXER_BACKGROUND_IMAGE_URL_INVALID,kNoLoginError:r.errorCodeList.NOT_LOGIN},config:i}}},2760:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(2730)),a=o(n(5947)),c=o(n(1646)),l=o(n(1576)),u=n(7803),d=n(1297),h=function(){function e(e){var t=this;this.isSpatial=!1,this.audioSourceList=[],this.speakingUserIdList=[],this._audioCtx=null,this.zegoRTC=e,this.zegoRTC.on("roomStreamUpdate",(function(e,n,r){var i=r.map((function(e){return e.streamID}));"DELETE"===n?t.speakingUserIdList=t.speakingUserIdList.filter((function(e){var n=!i.includes(e);if(!n){var r=t.audioSourceMap[e];r&&r.isPlaying&&r.stopPlayingAudio()}return n})):"ADD"===n&&(t.speakingUserIdList=t.speakingUserIdList.concat(i),r.forEach((function(e){if(!t.audioSourceMap[e.streamID]){var n=t.getStreamInfo(e.extraInfo),r=n.teamID,i=n.sendMode,o=new s.default({userID:e.streamID,teamID:r,sendMode:i},{audioCtx:t.audioCtx,zegoRTC:t.zegoRTC,isSpatial:t.isSpatial,maxDistance:t.rangeListener.recvRange});t.audioSourceList.push(o),t.playStreamHandler.handlePlayAudioTask()}}))),t.playStreamHandler.setAudioSourceList(t.speakingAudioSourceList)})),this.zegoRTC.on("playerStateUpdate",(function(e){var n=t.audioSourceMap[e.streamID];n&&("NO_PLAY"===e.state?n.isPlaying=!1:n.isPlaying=!0)})),this.zegoRTC.on("streamExtraInfoUpdate",(function(e,n){n.forEach((function(e){var n=t.audioSourceMap[e.streamID];if(n){var r=t.getStreamInfo(e.extraInfo),i=r.teamID,o=r.sendMode;i!==n.teamID&&(n.teamID=i,t.enableSpatializer(t.isSpatial)),void 0!==o&&(n.sendMode=o),t.playStreamHandler.handlePlayAudioTask()}}))})),this.zegoRTC.RTM._on("_roomStateUpdate",(function(e,n){"CONNECTED"===n?(t.roomID=e,t.rangeListener.userID=t.zegoRTC.RTM.getUserID()):"DISCONNECTED"===n&&(t.roomID=void 0,t.rangeListener.reset(),t.audioSourceList=[])}));var n=window.AudioContext||window.webkitAudioContext;this._audioCtx=this.zegoRTC&&this.zegoRTC.ac||new n,this.rangeListener=a.default.getInstance(this.audioCtx,this.zegoRTC),this.playStreamHandler=c.default.getInstance(this.rangeListener),this.eventManager=l.default.getInstance()}return Object.defineProperty(e.prototype,"audioSourceMap",{get:function(){return this.audioSourceList.reduce((function(e,t){return t.userID&&(e[t.userID]=t),e}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speakingAudioSourceList",{get:function(){var e=this;return this.audioSourceList.filter((function(t){return!!e.speakingUserIdList.includes(t.userID)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playingAudioSourceList",{get:function(){return this.audioSourceList.filter((function(e){return e.isPlaying}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioCtx",{get:function(){if(!this._audioCtx){var e=window.AudioContext||window.webkitAudioContext;this._audioCtx=new e}return this._audioCtx},enumerable:!1,configurable:!0}),e.getInstance=function(t){return e.instance||(e.instance=new e(t)),e.instance},e.prototype.resumeAudioContext=function(){return r(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){return[2,new Promise((function(t){e.audioCtx.onstatechange=function(){"running"===e.audioCtx.state&&t(!0)},e.audioCtx.suspend(),e.audioCtx.resume(),setTimeout((function(){t(!1)}),3e3)}))]}))}))},e.prototype.getAudioContextState=function(){return this.audioCtx.state},e.prototype.getStreamInfo=function(e){var t=void 0,n=void 0;try{var r=JSON.parse(e);t=r.range_audio_team_id,[d.ZegoRangeAudioMode.World,d.ZegoRangeAudioMode.Team].includes(r.range_audio_mode)&&(n=r.range_audio_mode)}catch(e){}return{teamID:t,sendMode:n}},e.prototype.setAudioReceiveRange=function(e){if(!u.checkNumber(e))throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' requires to be type number.");if((e=Number(e))<0)throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' can not be less than 0.");this.rangeListener.recvRange=e,this.audioSourceList.forEach((function(t){t.setMaxDistance(e)}))},e.prototype.updateSelfPosition=function(e,t,n,r){var i=function(e){return"Failed to execute 'updateSelfPosition': Argument '"+e+"' requires an array of type number.\""};if(!u.checkCoordinate(e))throw new Error(i("position"));if(!u.checkCoordinate(t))throw new Error(i("axisForward"));if(!u.checkCoordinate(n))throw new Error(i("axisRight"));if(!u.checkCoordinate(r))throw new Error(i("axisUp"));this.rangeListener&&this.rangeListener.updateSelfPosition(e,t,r),this.playStreamHandler.setListener(this.rangeListener)},e.prototype.updateAudioSource=function(e,t){if(e=String(e),!u.checkCoordinate(t))throw new Error("Failed to execute 'updateAudioSource': Arguments 'position' must be an array of type number.");var n=this.audioSourceMap[e];n?n.setPosition(t):(n=new s.default({userID:e,position:t},{audioCtx:this.audioCtx,zegoRTC:this.zegoRTC,isSpatial:this.isSpatial,maxDistance:this.rangeListener.recvRange}),this.enableSpatializer(this.isSpatial),this.audioSourceList.push(n)),this.playStreamHandler.setAudioSourceList(this.speakingAudioSourceList)},e.prototype.enableMicrophone=function(e){if(void 0===e&&(e=!0),!this.rangeListener.userID)throw new Error("Enable mic failed. Please log in room first.");return e?this.rangeListener.startPublishingStream():this.rangeListener.stopPublishingStream()},e.prototype.enableSpeaker=function(e){if(void 0===e&&(e=!0),!this.roomID)throw new Error("Enable speaker failed. Please log in room first.");this.playStreamHandler.isEnable=e,e?(this.playStreamHandler.startPlayingAudioStream(),this.playStreamHandler.handlePlayAudioTask()):this.playStreamHandler.stopPlayingAudioStream()},e.prototype.enableSpatializer=function(e){var t=this;void 0===e&&(e=!0),this.isSpatial=!!e,this.audioSourceList.forEach((function(n){var r=!(![n.teamID,t.rangeListener.teamID].includes(void 0)&&t.rangeListener.teamID===n.teamID)&&e;n.enableSpatializer(r)})),e&&this.rangeListener.updateListenerEffect()},e.prototype.setRangeAudioTeamID=function(e){this.rangeListener.setTeamID(e),this.enableSpatializer(this.isSpatial),this.playStreamHandler.handlePlayAudioTask()},e.prototype.setRangeAudioMode=function(e){this.rangeListener.setSendMode(e),this.rangeListener.setRecvMode(e),this.playStreamHandler.handlePlayAudioTask()},e.prototype.on=function(e,t){return this.eventManager.addEventHandler(e,t)},e.prototype.off=function(e,t){return this.eventManager.removeEventHandler(e,t)},e}();t.default=h},2777:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RangeAudio=void 0;var r=n(3116);t.RangeAudio={type:"RangeAudio",install:function(e){Object.defineProperty(e.prototype,"createRangeAudioInstance",{value:function(){return this.rangeAudio||(this.rangeAudio=r.ZegoExpressRangeAudio.getInstance(this)),this.rangeAudio},writable:!1})}}},2730:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1297),s=function(){function e(e,t){this.panner=null,this.isSpatial=!1,this.autoPlay=!0,this.position=null,this.stream=null,this.sourceNode=null,this.isPlaying=!1,this.distance=null,this.audioCtx=t.audioCtx,this.zegoRTC=t.zegoRTC,this.isSpatial=t.isSpatial,this.maxDistance=t.maxDistance||1e5,this.userID=e.userID,this.teamID=e.teamID,this.sendMode=void 0!==e.sendMode?e.sendMode:o.ZegoRangeAudioMode.World,e.position&&(this.position=e.position)}return Object.defineProperty(e.prototype,"audioWrapper",{get:function(){var e=document.getElementById("#zg-audio-source-wrapper");return e||((e=document.createElement("div")).setAttribute("id","zg-audio-source-wrapper"),document.body.appendChild(e)),e},enumerable:!1,configurable:!0}),e.prototype.createPanner=function(){var e=this.position||[0,0,0],t=this.maxDistance;return new PannerNode(this.audioCtx,{panningModel:"HRTF",distanceModel:"linear",refDistance:1,maxDistance:t,rolloffFactor:1,coneOuterGain:.4,positionX:e[1],positionY:e[0],positionZ:-e[0]})},e.prototype.startPlayingAudio=function(){return r(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return(e=document.getElementById("zg-audio-source-"+this.userID))?[3,2]:((e=document.createElement("audio")).setAttribute("autoplay","autoplay"),e.setAttribute("id","zg-audio-source-"+this.userID),e.setAttribute("crossorigin","anonymous"),t=this,[4,this.zegoRTC.startPlayingStream(this.userID)]);case 1:t.stream=n.sent(),this.audioWrapper.appendChild(e),this.stream&&(e.srcObject=this.stream,this.sourceNode=this.audioCtx.createMediaStreamSource(this.stream)),this.panner||(this.panner=this.createPanner()),this.sourceNode&&this.enableSpatializer(this.isSpatial,!0),"suspended"===this.audioCtx.state&&this.audioCtx.resume(),n.label=2;case 2:return e&&e.parentNode&&e.parentNode.removeChild(e),[2]}}))}))},e.prototype.stopPlayingAudio=function(){this.isPlaying&&this.zegoRTC.stopPlayingStream(this.userID),this.stream=null,this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=null)},e.prototype.setPosition=function(e){this.position=e,this.panner&&(this.panner.positionX.value=e[1],this.panner.positionY.value=e[2],this.panner.positionZ.value=-e[0])},e.prototype.setMaxDistance=function(e){this.maxDistance=e,this.panner&&(this.panner.maxDistance=this.maxDistance)},e.prototype.getDistanceFromListener=function(e){var t=this.position,n=e.position;if(!n||!t)return null;var r=[t[0]-n[0],t[1]-n[1],t[2]-n[2]];return this.distance=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2)),this.distance},e.prototype.enableSpatializer=function(e,t){void 0===t&&(t=!1),(t||this.isSpatial!==e)&&(this.isSpatial=e,this.sourceNode&&(e&&this.panner?(this.sourceNode.disconnect(),this.sourceNode.connect(this.panner).connect(this.audioCtx.destination)):e||(this.sourceNode.disconnect(),this.sourceNode.connect(this.audioCtx.destination))))},e}();t.default=s},1576:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.handlerListMap={microphoneStateUpdate:[]}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.addEventHandler=function(e,t){if(!this.handlerListMap[e])return!1;if("function"!=typeof t)throw new Error("Params callBack is not a Function");return-1==this.handlerListMap[e].indexOf(t)&&this.handlerListMap[e].push(t),!0},e.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter((function(e){return e!==t})):[],!0)},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.handlerListMap[e]&&this.handlerListMap[e].forEach((function(n){try{setTimeout((function(){n.apply(void 0,t)}),0)}catch(t){console.error("dispatch "+e+" "+t)}}))},e}();t.default=n},1646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1297),i=function(){function e(e){this.isEnable=!1,this.interval=3e3,this.timer=null,this.audioSourceList=[],this.hasChanged=!1,this.maxPlayingQuantity=20,this.rangeListener=e}return e.getInstance=function(t){return e.instance||(e.instance=new e(t)),e.instance},e.prototype.setListener=function(e){this.rangeListener=e,this.hasChanged=!0},e.prototype.setAudioSourceList=function(e){this.audioSourceList=e,this.hasChanged=!0},e.prototype.startPlayingAudioStream=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.playAudioTask()},e.prototype.playAudioTask=function(){var e=this;this.hasChanged&&(this.hasChanged=!1,this.handlePlayAudioTask()),this.timer=window.setTimeout((function(){e.playAudioTask()}),this.interval)},e.prototype.handlePlayAudioTask=function(){var e=this;if(this.isEnable){var t=this.getTeamAudioSourceGroup(),n=t.teamList,i=t.otherList,o=0;n.forEach((function(t){o<e.maxPlayingQuantity&&(t.isPlaying||t.startPlayingAudio(),o++)}));var s=this.rangeListener.recvMode===r.ZegoRangeAudioMode.World;s&&(i.forEach((function(t){t.distance=t.getDistanceFromListener(e.rangeListener)})),i.sort((function(e,t){return null===e.distance?1:null===t.distance||e.distance<t.distance?-1:e.distance>t.distance?1:0}))),i.forEach((function(t){s&&o<e.maxPlayingQuantity&&t.sendMode!==r.ZegoRangeAudioMode.Team&&null!==t.distance&&(null===e.rangeListener.recvRange||t.distance<=e.rangeListener.recvRange)?(t.isPlaying||t.startPlayingAudio(),o++):t.stopPlayingAudio()}))}else this.stopPlayingAudioStream()},e.prototype.getTeamAudioSourceGroup=function(){var e=this,t=[],n=[];return this.audioSourceList.forEach((function(r){[r.teamID,e.rangeListener.teamID].includes(void 0)||r.teamID!==e.rangeListener.teamID?n.push(r):t.push(r)})),{teamList:t,otherList:n}},e.prototype.stopPlayingAudioStream=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.audioSourceList.forEach((function(e){e.stopPlayingAudio()}))},e}();t.default=i},5947:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1297),o=r(n(1576)),s=function(){function e(e,t){var n=this;this.recvMode=i.ZegoRangeAudioMode.World,this.sendMode=i.ZegoRangeAudioMode.World,this.recvRange=null,this.position=null,this.forwardAxis=[1,0,0],this.upAxis=[0,0,1],this.audioStream=null,this.isPublishing=!1,this.zegoRTC=t,this.audioCtx=e,this.audioListener=this.audioCtx.listener,this.eventHandler=o.default.getInstance(),this.zegoRTC.on("publisherStateUpdate",(function(e){var t=e.streamID,r=e.state,o=e.errorCode,s=e.extendedData;t===n.userID&&("NO_PUBLISH"===r?(n.isPublishing=!1,n.stopPublishingStream()):n.isPublishing=!0);var a={NO_PUBLISH:i.ZegoRangeAudioMicrophoneState.Off,PUBLISH_REQUESTING:i.ZegoRangeAudioMicrophoneState.TurningOn,PUBLISHING:i.ZegoRangeAudioMicrophoneState.On};n.eventHandler.emit("microphoneStateUpdate",a[r],o,s)}))}return e.getInstance=function(t,n){return e.instance||(e.instance=new e(t,n)),e.instance},e.prototype.updateSelfPosition=function(e,t,n){this.position=e,this.forwardAxis=t,Array.isArray(n)&&(this.upAxis=n),this.updateListenerEffect()},e.prototype.updateListenerEffect=function(){this.position&&(this.audioListener.positionX?(this.audioListener.positionX.value=this.position[1],this.audioListener.positionY.value=this.position[2],this.audioListener.positionZ.value=-this.position[0]):this.audioListener.setPosition(this.position[1],this.position[2],-this.position[0]),this.audioListener.forwardX?(this.audioListener.forwardX.value=this.forwardAxis[1],this.audioListener.forwardY.value=this.forwardAxis[2],this.audioListener.forwardZ.value=-this.forwardAxis[0],this.audioListener.upX.value=this.upAxis[1],this.audioListener.upY.value=this.upAxis[2],this.audioListener.upZ.value=-this.upAxis[0]):this.audioListener.setOrientation(this.forwardAxis[1],this.forwardAxis[2],-this.forwardAxis[0],this.upAxis[1],this.upAxis[2],-this.upAxis[0]))},e.prototype.startPublishingStream=function(){var e=this;this.zegoRTC.createStream({camera:{video:!1,audio:!0,audioBitrate:30}}).then((function(t){if(!e.userID)throw e.zegoRTC.destroyStream(t),Error("Enable mic failed. Please log in room first.");e.audioStream&&e.audioStream!==t&&e.zegoRTC.destroyStream(e.audioStream),e.audioStream=t;var n={range_audio_team_id:e.teamID,range_audio_mode:e.sendMode};e.zegoRTC.startPublishingStream(e.userID,t,{extraInfo:JSON.stringify(n)})})).catch((function(e){throw e}))},e.prototype.stopPublishingStream=function(){this.isPublishing&&this.userID&&this.zegoRTC.stopPublishingStream(this.userID),this.isPublishing=!1,this.audioStream&&(this.zegoRTC.destroyStream(this.audioStream),this.audioStream=null)},e.prototype.setRecvMode=function(e){this.recvMode=e},e.prototype.setSendMode=function(e){this.sendMode=e,this.updateSteamExtraInfo()},e.prototype.setTeamID=function(e){this.teamID=e,this.updateSteamExtraInfo()},e.prototype.updateSteamExtraInfo=function(){this.userID&&this.isPublishing&&this.zegoRTC.setStreamExtraInfo(this.userID,JSON.stringify({range_audio_team_id:this.teamID||void 0,range_audio_mode:this.sendMode}))},e.prototype.reset=function(){this.audioStream&&this.stopPublishingStream(),this.userID=void 0},e}();t.default=s},7803:function(e,t){"use strict";function n(e){return!isNaN(Number(e))&&Number.MAX_SAFE_INTEGER>=Number(e)&&Number(e)>=-Number.MAX_SAFE_INTEGER}Object.defineProperty(t,"__esModule",{value:!0}),t.checkCoordinate=t.checkBoolean=t.checkNumber=void 0,t.checkNumber=n,t.checkBoolean=function(e){return!1},t.checkCoordinate=function(e){if(Array.isArray(e)){for(var t=0;t<3;t++)if(!n(e[t]))return!1;return!0}return!1}},3524:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.preview=void 0;var s=o(n(954)),a=n(3471);t.preview={setBeautyEffect:function(e,t){return r(this,void 0,void 0,(function(){var n,o,c,l=this;return i(this,(function(u){switch(u.label){case 0:if(!this.videoTrack)return this.logger.error("zc.p.0.sbe.0 video track no found"),[2];if("undefined"==typeof WebGLRenderingContext)throw n=a.errorCodeList.VIDEO_EFFECT_NOT_SUPPORT,o=n.code,c=n.message,Error({errorCode:o,extendedData:c});return s.default?this.videoEffect?this.videoTrack===this.videoEffect.input?[3,2]:[4,this.videoEffect.setInput(this.videoTrack)]:[3,4]:[3,7];case 1:u.sent(),u.label=2;case 2:return[4,this.videoEffect.setBeautyEffectOptions(e,t)];case 3:return u.sent(),[3,6];case 4:return this.videoEffect=new s.default(this.logger,this.videoTrack),this.videoEffect.onOverload=function(e){l.stateCenter.actionListener("beautyEffectOverload",l.localStream,e)},this.videoEffect.onOutputChange=function(e){return r(l,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){return this.videoTrack&&this.localStream&&(t=this.videoTrack,e&&(t=e),this.localStream.getVideoTracks()[0]!==t&&(void 0===(n=null===(r=this.streamCenter.checkPublish(this.localStream))||void 0===r?void 0:r.publisher)?this.replacePreviewTrack(t,!!e):n.replacePublishedTrack(t,!0))),[2]}))}))},[4,this.videoEffect.setBeautyEffectOptions(e,t)];case 5:u.sent(),u.label=6;case 6:return[3,8];case 7:this.logger.error("zc.p.0.sbe.0 beauty effect module no found"),u.label=8;case 8:return[2]}}))}))}}},3048:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PUBLISH_SET_BEAUTY_EFFECT=void 0;var s=o(n(8606)),a=o(n(5683)),c=o(n(8302));t.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe.2";var l=function(){function e(e){this.logger=e,this.gl=null,this.effectConfig={sharpenIntensity:.5,whitenIntensity:.5,rosyIntensity:.5,smoothIntensity:.5},this.originResolution={width:0,height:0},this.shaderList=[],this.frameBufferList=[],this.outputTextureList=[],this.inputTexture=null,this.enableBeauty=!1}return e.prototype.setEnableBeauty=function(e){this.enableBeauty=!!e},e.prototype.init=function(e,n,o){return r(this,void 0,void 0,(function(){var r,l,u;return i(this,(function(i){return"undefined"!=typeof WebGLRenderingContext?(this.gl=o.getContext("webgl"),this.gl?(this.initGL(e,n),this.inputTexture?(this.canvasEl=o,(r=new s.default(this.gl,e,n)).setConstUniforms(),(l=new a.default(this.gl,e,n)).setConstUniforms(),(u=new c.default(this.gl,e,n)).setConstUniforms(),this.shaderList=[r,l,u],this.setEffectConfig(this.effectConfig),[2]):[2,this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" input texture not found")]):[2,this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" not get webgl context")]):[2,this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" not support webgl!")]}))}))},e.prototype.render=function(e){return r(this,void 0,void 0,(function(){var n,r,o,s,a=this;return i(this,(function(i){switch(i.label){case 0:return(n=this.gl)&&this.canvasEl?this.originResolution.height===e.videoHeight&&this.originResolution.width===e.videoWidth||!(Math.abs(this.originResolution.height-e.videoHeight)>2||Math.abs(this.originResolution.width-e.videoWidth)>2)?[3,3]:0===e.videoHeight||0===e.videoWidth?[2]:(this.canvasEl.width=e.videoWidth,this.canvasEl.height=e.videoHeight,e.setAttribute("width",e.videoWidth.toString()),e.setAttribute("height",e.videoHeight.toString()),!this.gl||this.gl.isContextLost()?[3,1]:(this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" resolution changed, reset resolution"),this.resetResolution(e.videoWidth,e.videoHeight),[3,3])):(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" video effect manager is not init!"),[2]);case 1:return this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" resolution changed and gl context lost, restart effect"),this.release(),[4,this.init(e.videoWidth,e.videoHeight,this.canvasEl)];case 2:i.sent(),i.label=3;case 3:return r=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],o=[0,1,2,0,2,3],s=[0,0,1,0,1,1,0,1],n.viewport(0,0,e.width,e.height),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.inputTexture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),this.shaderList.forEach((function(e,t){var i=e.program;if(i){e.renderPreTextures&&e.renderPreTextures(r,o,s),n.useProgram(i),e.render();var c=n.getUniformLocation(i,"uTexture"),l=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,l),n.bufferData(n.ARRAY_BUFFER,new Float32Array(r),n.STATIC_DRAW);var u=n.createBuffer();n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,u),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),n.STATIC_DRAW);var d=n.getAttribLocation(i,"aPosition");n.enableVertexAttribArray(d),n.vertexAttribPointer(d,3,n.FLOAT,!1,0,0);var h=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,h),n.bufferData(n.ARRAY_BUFFER,new Float32Array(s),n.STATIC_DRAW);var p=n.getAttribLocation(i,"aTexCoordinate");n.enableVertexAttribArray(p),n.vertexAttribPointer(p,2,n.FLOAT,!1,0,0);var f=t===a.shaderList.length-1?null:a.outputTextureList[t],g=t===a.shaderList.length-1?null:a.frameBufferList[t];n.bindFramebuffer(n.FRAMEBUFFER,g),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0),n.activeTexture(n.TEXTURE0),f&&n.bindTexture(n.TEXTURE_2D,f),n.uniform1i(c,0)}})),[2]}}))}))},e.prototype.setEffectConfig=function(e){var t=this;isNaN(e.sharpenIntensity)||(this.effectConfig.sharpenIntensity=e.sharpenIntensity),isNaN(e.whitenIntensity)||(this.effectConfig.whitenIntensity=e.whitenIntensity),isNaN(e.rosyIntensity)||(this.effectConfig.rosyIntensity=e.rosyIntensity),isNaN(e.smoothIntensity)||(this.effectConfig.smoothIntensity=e.smoothIntensity),this.shaderList.forEach((function(e){e.setEffectConfig(t.effectConfig)}))},e.prototype.release=function(){var e=this;this.shaderList.forEach((function(t){var n;t.program&&(null===(n=e.gl)||void 0===n||n.deleteProgram(t.program))})),this.outputTextureList.forEach((function(t){var n;t&&(null===(n=e.gl)||void 0===n||n.deleteTexture(t))})),this.frameBufferList.forEach((function(t){var n;t&&(null===(n=e.gl)||void 0===n||n.deleteFramebuffer(t))})),this.inputTexture=this.gl=null,this.shaderList=[],this.outputTextureList=[],this.frameBufferList=[]},e.prototype.initGL=function(e,n){var r=this.gl;if(!r)return this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" webgl context not found");this.inputTexture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.inputTexture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR);for(var i=0;3>i;i++){var o=r.createTexture();if(!o)return this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" create texture failed");r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,n,0,r.RGBA,r.UNSIGNED_BYTE,null);var s=r.createFramebuffer();if(!s)return this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" create frame buffer failed");r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0),this.outputTextureList.push(o),this.frameBufferList.push(s)}r.viewport(0,0,e,n),this.originResolution.width=e,this.originResolution.height=n},e.prototype.resetResolution=function(e,n){var r=this.gl;if(!r)return this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" can not find webgl context");this.outputTextureList.forEach((function(t){r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,n,0,r.RGBA,r.UNSIGNED_BYTE,null)})),r.viewport(0,0,e,n),this.originResolution.width=e,this.originResolution.height=n},e}();t.default=l},3471:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={VIDEO_EFFECT_NOT_SUPPORT:{code:1103072,message:"not support beauty effect"}}},957:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeautyEffect=void 0;var r=n(3524);t.BeautyEffect={type:"BeautyEffect",install:function(e){for(var t in r.preview)Object.defineProperty(e.prototype,t,{value:r.preview[t],writable:!1})}}},836:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.logger=e,this.recordedFrameCount=0,this.targetFrameRate=0,this.recordingDuration=0}return e.prototype.startRecordBeautyEffectOutput=function(e){return n(this,void 0,void 0,(function(){var t,n,i,o,s=this;return r(this,(function(r){switch(r.label){case 0:return t=6,this.recordID?(this.logger.warn("zc.p.0.sbe.3 detector is already recording"),[2,{result:!0}]):(n=(new Date).getTime(),this.recordID=n,this.targetFrameRate=e,this.recordedFrameCount=0,this.recordingDuration=t,[4,new Promise((function(e){window.setTimeout(e,1e3*s.recordingDuration)}))]);case 1:return r.sent(),this.recordID!==n?(this.recordID=void 0,[2,{result:!0}]):(this.recordID=void 0,i=this.targetFrameRate*this.recordingDuration,o=this.recordedFrameCount/t,this.recordedFrameCount<i/2?(this.logger.warn("zc.p.0.sbe.3 detect effect overload: current fps: "+o),[2,{result:!1,targetFPS:this.targetFrameRate,currentFPS:o}]):(this.logger.info("zc.p.0.sbe.3 detect effect current fps: "+o),[2,{result:!0}]))}}))}))},e.prototype.stopRecordBeautyEffectOutput=function(){this.recordedFrameCount=this.targetFrameRate=0,this.recordID=void 0},e.prototype.addFrame=function(){this.recordID&&(this.recordedFrameCount+=1)},e}();t.default=i},5683:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(6976)),a=n(1199),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.width=n,i.height=r,i.type="LightShader",i.uLightIntensity=null,i.uRedIntensity=null,i.whitenIntensity=.5,i.rosyIntensity=.5,i.program=i.makeProgram(a.lightVS,a.lightFS),i}return i(t,e),t.prototype.setEffectConfig=function(e){isNaN(e.whitenIntensity)||(this.whitenIntensity=e.whitenIntensity/100),isNaN(e.rosyIntensity)||(this.rosyIntensity=e.rosyIntensity/100)},t.prototype.render=function(){var e=this.gl;e.uniform1f(this.uLightIntensity,this.whitenIntensity),e.uniform1f(this.uRedIntensity,this.rosyIntensity)},t.prototype.setConstUniforms=function(){var e=this.program;if(e){var t=this.gl;t.useProgram(e),this.uLightIntensity=t.getUniformLocation(e,"intensity"),t.uniform1f(this.uLightIntensity,this.whitenIntensity),this.uRedIntensity=t.getUniformLocation(e,"rosyIntensity"),t.uniform1f(this.uRedIntensity,this.rosyIntensity);var n=t.getUniformLocation(e,"uPMVMatrix");t.uniformMatrix4fv(n,!1,[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1])}},t}(s.default);t.default=c},6976:function(e,t){"use strict";function n(e){for(var t=e,n="",r=0;r<t.length;r++){var i=t.charCodeAt(r),o=i;i>=65&&i<=90&&(o=(i-65-13+26)%26+65),i>=97&&i<=122&&(o=(i-97-13+26)%26+97),n+=String.fromCharCode(o)}return n}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.gl=e,this.program=null,this.program=null}return e.prototype.setEffectConfig=function(e){},e.prototype.setConstUniforms=function(){},e.prototype.render=function(){},e.prototype.renderPreTextures=function(e,t,n){},e.prototype.makeProgram=function(e,t){var r=this.gl,i=n(e),o=n(t),s=this.makeShader(i,r.VERTEX_SHADER),a=this.makeShader(o,r.FRAGMENT_SHADER),c=r.createProgram();return r.attachShader(c,s),r.attachShader(c,a),r.linkProgram(c),r.getProgramParameter(c,r.LINK_STATUS),c},e.prototype.makeShader=function(e,t){var n=this.gl,r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS),r},e}();t.default=r},8606:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(6976)),a=n(1199),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.width=n,i.height=r,i.type="BlurShader",i.blurXProgram=null,i.blurYProgram=null,i.diffProgram=null,i.uIntensity=null,i.smoothIntensity=.5,i.blurTextureList=[],i.blurBufferList=[],i.blurXProgram=i.makeProgram(a.borderBlurVS,a.borderBlurFS),i.setBorderBlurProgram(i.blurXProgram,1/(n||1),0),i.blurYProgram=i.makeProgram(a.borderBlurVS,a.borderBlurFS),i.setBorderBlurProgram(i.blurYProgram,0,1/(r||1)),i.diffProgram=i.makeProgram(a.diffBlurVS,a.diffBlurFS),i.setDiffBlurProgram(i.diffProgram),i.program=i.makeProgram(a.mixBlurVS,a.mixBlurFS),i.initBlurBuffer(),i}return i(t,e),t.prototype.setEffectConfig=function(e){isNaN(e.smoothIntensity)||(this.smoothIntensity=e.smoothIntensity/100)},t.prototype.render=function(){this.gl.uniform1f(this.uIntensity,this.smoothIntensity)},t.prototype.initBlurBuffer=function(){var e=this.gl;this.blurTextureList=[],this.blurTextureList=[];for(var t=0;t<3;t++){var n=e.createTexture();if(!n)return;e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null);var r=e.createFramebuffer();if(!r)return;e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),this.blurTextureList.push(n),this.blurBufferList.push(r)}},t.prototype.renderPreTextures=function(e,t,n){var r=this,i=this.gl,o=[0,1,0],s=[1,1,2];[this.blurXProgram,this.blurYProgram,this.diffProgram].forEach((function(a,c){if(a){i.useProgram(a);var l=i.getUniformLocation(a,"uTexture");i.uniform1i(l,o[c]);var u=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,u),i.bufferData(i.ARRAY_BUFFER,new Float32Array(e),i.STATIC_DRAW);var d=i.createBuffer();i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,d),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),i.STATIC_DRAW);var h=i.getAttribLocation(a,"aPosition");i.enableVertexAttribArray(h),i.vertexAttribPointer(h,3,i.FLOAT,!1,0,0);var p=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,p),i.bufferData(i.ARRAY_BUFFER,new Float32Array(n),i.STATIC_DRAW);var f=i.getAttribLocation(a,"aTexCoordinate");i.enableVertexAttribArray(f),i.vertexAttribPointer(f,2,i.FLOAT,!1,0,0),i.bindFramebuffer(i.FRAMEBUFFER,r.blurBufferList[c]),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0),i.activeTexture(i.TEXTURE0+s[c]),i.bindTexture(i.TEXTURE_2D,r.blurTextureList[c])}}))},t.prototype.setConstUniforms=function(){var e=this.width,t=this.height,n=this.program;if(n){var r=this.gl;r.useProgram(n);var i=r.getUniformLocation(n,"widthOffset");r.uniform1f(i,1/e);var o=r.getUniformLocation(n,"heightOffset");r.uniform1f(o,1/t),this.uIntensity=r.getUniformLocation(n,"blurAlpha"),r.uniform1f(this.uIntensity,this.smoothIntensity);var s=r.getUniformLocation(n,"blurTexture");r.uniform1i(s,1);var a=r.getUniformLocation(n,"blurDiffTexture");r.uniform1i(a,2)}},t.prototype.setBorderBlurProgram=function(e,t,n){var r=this.gl;r.useProgram(e);var i=r.getUniformLocation(e,"texBlurWidthOffset");r.uniform1f(i,t);var o=r.getUniformLocation(e,"texBlurHeightOffset");r.uniform1f(o,n)},t.prototype.setDiffBlurProgram=function(e){var t=this.gl;t.useProgram(e);var n=t.getUniformLocation(e,"blurTexture");t.uniform1i(n,1)},t}(s.default);t.default=c},1199:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mixBlurFS=t.mixBlurVS=t.diffBlurFS=t.diffBlurVS=t.borderBlurFS=t.borderBlurVS=t.sharpnessFS=t.sharpnessVS=t.lightFS=t.lightVS=void 0,t.lightVS="cerpvfvba uvtuc sybng;\nnggevohgr irp2 nGrkPbbeqvangr;\nnggevohgr irp4 nCbfvgvba;\nhavsbez zng4 hCZIZngevk;\ninelvat irp2 iGrkPbbeq;\nibvq znva() {\n    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n    iGrkPbbeq = nGrkPbbeqvangr;\n}",t.lightFS="cerpvfvba uvtuc sybng;\ninelvat irp2 iGrkPbbeq;\nhavsbez fnzcyre2Q hGrkgher;\nhavsbez sybng vagrafvgl;\nhavsbez sybng ebflVagrafvgl;\nirp3 oevtugarffNaqPbagenfg(irp3 pbybe){\n  sybng v = vagrafvgl * 1.0;\n  sybng CV = 3.1415926;\n  sybng O = 0.12 * v;\n  sybng p = 0.1 * v;\n  sybng x = gna((45. + 44. * p) / 180.0 * CV);\n  pbybe = ((pbybe*255.0 - 127.5 * (1.0 - O)) * x + 127.5 * (1.0 + O)) / 255.0;\n  erghea pbybe;\n}\nibvq znva() {\n  irp4 grkgherPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);\n  grkgherPbybe = irp4(oevtugarffNaqPbagenfg(grkgherPbybe.eto), grkgherPbybe.j);\n  grkgherPbybe.e = zva(grkgherPbybe.e + 0.06 * ebflVagrafvgl, 1.0);\n  ty_SentPbybe = grkgherPbybe;\n}",t.sharpnessVS="\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez sybng vzntrJvqguSnpgbe;\nhavsbez sybng vzntrUrvtugSnpgbe;\nhavsbez sybng funecarff; \ninelvat irp2 iGrkPbbeq;\ninelvat irp2 yrsgGrkgherPbbeqvangr;\ninelvat irp2 evtugGrkgherPbbeqvangr;\ninelvat irp2 gbcGrkgherPbbeqvangr;\ninelvat irp2 obggbzGrkgherPbbeqvangr;\ninelvat sybng pragreZhygvcyvre;\ninelvat sybng rqtrZhygvcyvre;\nibvq znva() {\n  ty_Cbfvgvba = nCbfvgvba;\n  irp2 jvqguFgrc = irp2(vzntrJvqguSnpgbe, 0.0);\n  irp2 urvtugFgrc = irp2(0.0, vzntrUrvtugSnpgbe);\n  iGrkPbbeq = nGrkPbbeqvangr.kl;\n  yrsgGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - jvqguFgrc;\n  evtugGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + jvqguFgrc;\n  gbcGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + urvtugFgrc;\n  obggbzGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - urvtugFgrc;\n  pragreZhygvcyvre = 1.0 + 4.0 * funecarff;\n  rqtrZhygvcyvre = funecarff;\n}\n",t.sharpnessFS="\ncerpvfvba uvtuc sybng;\ninelvat uvtuc irp2 iGrkPbbeq;\ninelvat uvtuc irp2 yrsgGrkgherPbbeqvangr;\ninelvat uvtuc irp2 evtugGrkgherPbbeqvangr;\ninelvat uvtuc irp2 gbcGrkgherPbbeqvangr;\ninelvat uvtuc irp2 obggbzGrkgherPbbeqvangr;\ninelvat uvtuc sybng pragreZhygvcyvre;\ninelvat uvtuc sybng rqtrZhygvcyvre;\nhavsbez fnzcyre2Q hGrkgher;\nibvq znva() {\n  zrqvhzc irp4 nPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);\n  zrqvhzc irp3 grkgherPbybe = nPbybe.eto;\n  zrqvhzc irp3 yrsgGrkgherPbybe = grkgher2Q(hGrkgher, yrsgGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 evtugGrkgherPbybe = grkgher2Q(hGrkgher, evtugGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 gbcGrkgherPbybe = grkgher2Q(hGrkgher, gbcGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 obggbzGrkgherPbybe = grkgher2Q(hGrkgher, obggbzGrkgherPbbeqvangr).eto;\n  ty_SentPbybe = irp4((grkgherPbybe * pragreZhygvcyvre - (yrsgGrkgherPbybe * rqtrZhygvcyvre + evtugGrkgherPbybe * rqtrZhygvcyvre + gbcGrkgherPbybe * rqtrZhygvcyvre + obggbzGrkgherPbybe * rqtrZhygvcyvre)), nPbybe.n);\n}",t.borderBlurVS="nggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez uvtuc sybng grkOyheJvqguBssfrg;\nhavsbez uvtuc sybng grkOyheUrvtugBssfrg;\ninelvat irp2 i_grkpbbeq0;\ninelvat irp4 grkgherFuvsg_1;\ninelvat irp4 grkgherFuvsg_2;\ninelvat irp4 grkgherFuvsg_3;\ninelvat irp4 grkgherFuvsg_4;\nibvq znva()\n{\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n\n  irp2 fvatyrFgrcBssfrg = irp2(grkOyheJvqguBssfrg, grkOyheUrvtugBssfrg)*2.5;\n\n  grkgherFuvsg_1 = irp4(nGrkPbbeqvangr.kl - fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + fvatyrFgrcBssfrg);\n  grkgherFuvsg_2 = irp4(nGrkPbbeqvangr.kl - 2.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 2.0 * fvatyrFgrcBssfrg);\n  grkgherFuvsg_3 = irp4(nGrkPbbeqvangr.kl - 3.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 3.0 * fvatyrFgrcBssfrg);\n  grkgherFuvsg_4 = irp4(nGrkPbbeqvangr.kl - 4.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 4.0 * fvatyrFgrcBssfrg);\n}",t.borderBlurFS="cerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\ninelvat uvtuc irp4 grkgherFuvsg_1;\ninelvat uvtuc irp4 grkgherFuvsg_2;\ninelvat uvtuc irp4 grkgherFuvsg_3;\ninelvat uvtuc irp4 grkgherFuvsg_4;\nibvq znva(ibvq) { \n  zrqvhzc irp3 fhz = grkgher2Q(hGrkgher, i_grkpbbeq0).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.mj).eto;\n  ty_SentPbybe = irp4(fhz * 0.1111, 1.0); \n}",t.diffBlurVS="nggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez zng4 hCZIZngevk;\ninelvat irp2 i_grkpbbeq0;\nibvq znva()\n{\n  // ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n}",t.diffBlurFS="cerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\nhavsbez fnzcyre2Q oyheGrkgher;\nibvq znva(ibvq) {\n  irp4 vPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);\n  irp4 zrnaPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);\n  irp4 qvssPbybe = vPbybe - zrnaPbybe;\n  qvssPbybe.e = zva(qvssPbybe.e * 50.0 * qvssPbybe.e, 1.0);\n  qvssPbybe.t = zva(qvssPbybe.t * 50.0 * qvssPbybe.t, 1.0);\n  qvssPbybe.o = zva(qvssPbybe.o * 50.0 * qvssPbybe.o, 1.0);\n  ty_SentPbybe = irp4(qvssPbybe.eto, 1.0);\n}",t.mixBlurVS="\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\ninelvat irp2 i_grkpbbeq0;\nhavsbez sybng jvqguBssfrg;\nhavsbez sybng urvtugBssfrg;\ninelvat irp2 grkgherFuvsg_1;\ninelvat irp2 grkgherFuvsg_2;\ninelvat irp2 grkgherFuvsg_3;\ninelvat irp2 grkgherFuvsg_4;\nibvq znva()\n{\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n  grkgherFuvsg_1 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,urvtugBssfrg));\n  grkgherFuvsg_2 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,-urvtugBssfrg));\n  grkgherFuvsg_3 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,urvtugBssfrg));\n  grkgherFuvsg_4 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,-urvtugBssfrg));\n}\n",t.mixBlurFS="\ncerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\nhavsbez fnzcyre2Q oyheGrkgher;\nhavsbez fnzcyre2Q oyheQvssGrkgher;\nhavsbez ybjc sybng oyheNycun;\nibvq znva(ibvq) {\n  ybjc irp4 vPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);\n  ybjc irp4 zrnaPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);\n  ybjc irp4 inePbybe = grkgher2Q(oyheQvssGrkgher, i_grkpbbeq0);\n  ybjc sybng nycun = oyheNycun * 1.0;\n  ybjc sybng gurgn = 0.1;\n  zrqvhzc sybng c = pynzc((zva(vPbybe.e, zrnaPbybe.e - 0.1) - 0.2) * 4.0, 0.0, 1.0);\n  zrqvhzc sybng zrnaIne = znk(znk(inePbybe.e, inePbybe.t), inePbybe.o);\n  zrqvhzc sybng xZva = 0.1;\n  ybjc irp3 erfhygPbybe;\n  xZva = (1.0 - zrnaIne / (zrnaIne + gurgn)) * c * nycun;\n  erfhygPbybe = zvk(vPbybe.eto, zrnaPbybe.eto, xZva);\n  erfhygPbybe = zvk(vPbybe.eto, erfhygPbybe, zva(1.0,nycun));\n  ty_SentPbybe = irp4(erfhygPbybe,1.0);\n}"},8302:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(6976)),a=n(1199),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.width=n,i.height=r,i.type="SharpnessShader",i.uIntensity=null,i.sharpenIntensity=.5,i.program=i.makeProgram(a.sharpnessVS,a.sharpnessFS),i}return i(t,e),t.prototype.setEffectConfig=function(e){isNaN(e.sharpenIntensity)||(this.sharpenIntensity=e.sharpenIntensity/100)},t.prototype.render=function(){this.gl.uniform1f(this.uIntensity,.5*this.sharpenIntensity)},t.prototype.setConstUniforms=function(){var e=this.width,t=this.height,n=this.program;if(n){var r=this.gl;r.useProgram(n);var i=r.getUniformLocation(n,"imageWidthFactor");r.uniform1f(i,1/e);var o=r.getUniformLocation(n,"imageHeightFactor");r.uniform1f(o,1/t),this.uIntensity=r.getUniformLocation(n,"sharpness"),r.uniform1f(this.uIntensity,.5*this.sharpenIntensity)}},t}(s.default);t.default=c},954:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PUBLISH_SET_BEAUTY_EFFECT=void 0;var s=o(n(836)),a=o(n(3048));t.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe.1";var c=function(){function e(e,t){this.logger=e,this.kind="video",this._enabled=!1,this.lastRenderTime=0,this.animationFrameId=0,this.backgroundLoop=null,this.setInput(t,!0),this.fps=15,this.detector=new s.default(e),this.backgroundLoop&&clearTimeout(this.backgroundLoop),this.backgroundLoop=null,this.lastRenderTime=0,this.manager=new a.default(e)}return Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},enumerable:!1,configurable:!0}),e.prototype.setBeautyEffectOptions=function(e,n){return void 0===n&&(n={}),r(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return e&&this.manager.setEffectConfig(n),this.enabled===e?[3,6]:(this.manager.setEnableBeauty(e),this.enabled!==e&&this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" effect enabled "+e+"; options: "+JSON.stringify(n)),this.enabled=e,e?this.input?[4,this.startEffect()]:[3,2]:[3,3]);case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return[4,this.stopEffect()];case 4:r.sent(),r.label=5;case 5:r.label=6;case 6:return[2]}}))}))},e.prototype.startEffect=function(){return r(this,void 0,void 0,(function(){var e,n,o=this;return i(this,(function(s){switch(s.label){case 0:return this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" call start effect"),this.input?this.input&&this.output&&this.input!==this.output?(this.logger.warn(t.PUBLISH_SET_BEAUTY_EFFECT+" video effect is already enabled"),[2]):[4,this.startWebGLProcessor()]:(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" start effect failed, input track is null"),[2]);case 1:return e=s.sent(),[4,this.updateOutput(e)];case 2:return s.sent(),this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" start effect success"),this.detector.startRecordBeautyEffectOutput(this.fps).then((function(e){if(!e.result&&o.onOverload){var t=e.targetFPS,n=e.currentFPS;o.onOverload({targetFPS:t,currentFPS:n})}})),n=function(){return r(o,void 0,void 0,(function(){var e,t,r;return i(this,(function(i){switch(i.label){case 0:return this.enabled&&(this.animationFrameId=requestAnimationFrame(n)),e=Date.now(),t=1e3/this.fps,(r=this.lastRenderTime?e-this.lastRenderTime:t)>=t?(this.lastRenderTime=e-(r-t),this.videoEl&&this.videoEl.paused&&this.videoEl.play(),this.enabled&&this.videoEl?[4,this.manager.render(this.videoEl)]:[3,2]):[3,2];case 1:i.sent(),this.output&&this.output.requestFrame&&this.output.requestFrame(),this.detector.addFrame(),i.label=2;case 2:return[2]}}))}))},this.animationFrameId=requestAnimationFrame(n),document.addEventListener("visibilitychange",(function(){if(document.hidden){var e=function(){o.enabled&&o.videoEl&&o.manager.render(o.videoEl),o.output&&o.output.requestFrame&&o.output.requestFrame(),o.detector.addFrame(),o.backgroundLoop=window.setTimeout(e,Math.floor(1e3/o.fps))};e()}else o.backgroundLoop&&(clearTimeout(o.backgroundLoop),o.backgroundLoop=null)}),!1),[2]}}))}))},e.prototype.stopEffect=function(){return r(this,void 0,void 0,(function(){var e=this;return i(this,(function(n){switch(n.label){case 0:return this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" call stop effect"),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0),this.detector.stopRecordBeautyEffectOutput(),this.manager.release(),[4,this.updateOutput()];case 1:return n.sent(),void 0===this.removeDomTimer&&(this.removeDomTimer=window.setTimeout((function(){!1===e.enabled&&e.destroy()}),18e4)),[2]}}))}))},e.prototype.destroy=function(){this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" destroy hidden elements"),this.canvasEl&&this.canvasEl.remove(),this.videoEl&&this.videoEl.remove(),this.videoEl=this.canvasEl=void 0,this.removeDomTimer&&(clearTimeout(this.removeDomTimer),this.removeDomTimer=void 0)},e.prototype.startWebGLProcessor=function(){return r(this,void 0,void 0,(function(){var e,n,r,o,s=this;return i(this,(function(i){switch(i.label){case 0:return this.input?(this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" start webgl processor"),this.removeDomTimer&&(clearTimeout(this.removeDomTimer),this.removeDomTimer=void 0),this.canvasEl&&this.videoEl?[3,2]:(this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" create elements"),this.canvasEl&&(this.canvasEl.remove(),this.canvasEl=void 0),this.videoEl&&(this.videoEl.remove(),this.videoEl=void 0),this.canvasEl=document.createElement("canvas"),this.videoEl=document.createElement("video"),this.videoEl.setAttribute("autoplay",""),this.videoEl.setAttribute("muted",""),this.videoEl.muted=!0,this.videoEl.setAttribute("playsinline",""),this.videoEl.setAttribute("style","display:none"),this.videoEl.srcObject=new MediaStream([this.input]),e=new Promise((function(e){var t=function(){s.videoEl&&s.videoEl.removeEventListener("playing",t),e(void 0)};s.videoEl&&s.videoEl.addEventListener("playing",t)})),this.videoEl.play(),[4,e])):(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" input track is null"),[2]);case 1:i.sent(),i.label=2;case 2:return n=this.input.getSettings(),r=n.width||this.videoEl.videoWidth,o=n.height||this.videoEl.videoHeight,n.frameRate&&(this.fps,n.frameRate),n.frameRate&&this.fps!==n.frameRate&&(this.fps=n.frameRate,this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" set target fps: "+this.fps)),this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" beauty video processor: width "+n.width+" height "+n.height),r&&o?(this.canvasEl.width=r,this.canvasEl.height=o,this.videoEl.setAttribute("width",r.toString()),this.videoEl.setAttribute("height",o.toString()),this.manager.init(r,o,this.canvasEl),[2,this.canvasEl.captureStream().getVideoTracks()[0]]):(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" resolution of track is wrong"),[2])}}))}))},e.prototype.setInput=function(e,n){return void 0===n&&(n=!1),r(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return e===this.input?[3,6]:e.kind!==this.kind?(this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" kind of track is not video"),[2]):(this.output&&this.input===this.output&&this.logger.error(t.PUBLISH_SET_BEAUTY_EFFECT+" input track is same as effect track"),this.logger.info(t.PUBLISH_SET_BEAUTY_EFFECT+" change input track"),n?this.input?[4,this.removeInput()]:[3,2]:[3,5]);case 1:r.sent(),r.label=2;case 2:return this.input=e,this.enabled&&!this.videoEl?[4,this.startEffect()]:[3,4];case 3:r.sent(),r.label=4;case 4:return[3,6];case 5:this.input=e,this.videoEl&&(this.videoEl.srcObject=new MediaStream([this.input])),r.label=6;case 6:return[2]}}))}))},e.prototype.removeInput=function(){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this.input=void 0,[4,this.stopEffect()];case 1:return e.sent(),[2]}}))}))},e.prototype.updateOutput=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.output===e?[3,3]:(this._output=e,this.onOutputChange?[4,this.onOutputChange(this._output)]:[3,2]);case 1:t.sent(),t.label=2;case 2:t.label=3;case 3:return[2]}}))}))},e.prototype.onOutputChange=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))},e.prototype.onOverload=function(e){},e}();t.default=c},608:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientUtil=void 0;var o=n(6706),s=n(3529),a=n(4395),c=function(){function e(){}return e.checkIllegalCharacters=function(e){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e)&&/^[^:/]*$/g.test(e)},e.isUrl=function(e){return!!(e.startsWith("rtmp://")||e.startsWith("https://")&&e.endsWith(".flv")||e.startsWith("https://")&&e.endsWith(".m3u8"))},e.registerCallback=function(e,t,n){var r,i;t.success&&(r=t.success,n[e+"SuccessCallback"]=r),t.error&&(i=t.error,n[e+"ErrorCallback"]=i)},e.actionErrorCallback=function(e,t){return t[e+"ErrorCallback"]},e.actionSuccessCallback=function(e,t){return t[e+"SuccessCallback"]},e.logReportCallback=function(t,n,r,i){e.registerCallback(t,{success:function(t,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];e.dataReportEvent(n,r,t,i,o)}},i)},e.actionLogReportCallback=function(t,n,r,i,o){e.actionSuccessCallback(t,n)&&e.actionSuccessCallback(t,n)(r,i)},e.getServerError=function(e){var t={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};if(0===e)return{code:0,message:""};var n={code:0,message:"liveroom cmd error"};if(n.code=e,e>1e9){var r=t[e];n.message=r?"liveroom cmd error, code: "+e+", message: "+r:t[1e9]+e}else n.message=t[e]?t[e]+" code:"+e:"unknown error code:"+e;return n},e.unregisterCallback=function(e,t){delete t[e+"SuccessCallback"],delete t[e+"ErrorCallback"]},e.decodeServerError=function(e,t){var n={code:-1,message:"server error"};return e>1e9&&(n.code=e-1e9+52e6),t&&(n.message=t),n},e.getLiveRoomError=function(e){return e>1e9?{1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR"}[e-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[e]||"ROOM_INNER_ERROR"},e.getKickoutError=function(e){var t={};switch(e){case 1:t.code=63000001,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:t.code=63000002,t.message="zpush manual kickout",t.name="MANUAL_KICKOUT";break;case 3:t.code=63000003,t.message="kickout reason = "+e;break;case 4:t.code=63000004,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 5:t.code=63000005,t.message="zpush token expired",t.name="TOKEN_EXPIRED";break;default:t.code=e,t.message="kickout reason = "+e}return t},e.dataReportEvent=function(e,t,n,r,i){switch(n){case"eventStart":e.eventStart(t,r);break;case"eventEndWithMsgInfo":e.eventEndWithMsgInfo(t,r,i[0]);break;case"addEventMsg":e.addEventMsg(t,r,i[0],i[1]);break;case"addEvent":e.addEvent(t,r);break;case"eventEnd":e.eventEnd(t,r);break;case"addMsgInfo":e.addMsgInfo(t,i[0])}},e.isKeepTryLogin=function(e){switch(e){case 1002:case 1003:return!0;default:return!1}},e.mergeStreamList=function(e,t,n,r){var i,o=[],s=[],a=[];n||(n=[]);for(var c=0;c<n.length;c++)if(n[c].anchor_id_name!=e&&n[c].user_id!=e){i=!1;for(var l=0;l<t.length;l++)if(n[c].stream_id===t[l].stream_id){n[c].extra_info!==t[l].extra_info&&a.push(n[c]),i=!0;break}i||o.push(n[c])}for(var u=0;u<t.length;u++){i=!1;for(var d=0;d<n.length;d++)if(t[u].stream_id===n[d].stream_id){i=!0;break}i||s.push(t[u])}for(t.splice(0),c=0;c<n.length;c++)t.push(n[c]);r(o,s,a)},e.checkInteger=function(e,t){return 0==t?"number"==typeof e&&e%1==0&&e>=0:"number"==typeof e&&e%1==0&&e>0},e.checkValidNumber=function(e,t,n){return t=t||1,n=n||1e4,"number"==typeof e&&e%1==0&&e>=t&&e<=n},e.uuid=function(e,t){var n,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||r.length,e)for(n=0;n<e;n++)i[n]=r[0|Math.random()*t];else{var o=void 0;for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",n=0;n<36;n++)i[n]||(o=0|16*Math.random(),i[n]=r[19==n?3&o|8:o])}return i.join("")},e.supportDetection=function(e,t,n,o){return r(this,void 0,void 0,(function(){var r,s,a,c,l,u,d,h;return i(this,(function(i){switch(i.label){case 0:return r={webRTC:!1,customCapture:!1,camera:!1,microphone:!1,videoCodec:{H264:!1,H265:!1,VP8:!1,VP9:!1},screenSharing:e,errInfo:{}},o&&"screenSharing"===o?(t({result:e,errInfo:r.errInfo}),[2]):o&&"customCapture"!==o||(((s=document.createElement("video")).captureStream||s.mozCaptureStream)&&(r.customCapture=!0),"customCapture"!==o)?(a=navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,c="https:"!==window.location.protocol&&"file:"!==window.location.protocol&&-1==window.location.hostname.indexOf("127.0.0.1")&&-1==window.location.hostname.indexOf("localhost"),o&&"camera"!==o&&"microphone"!==o?[3,9]:a?c?(r.camera=!1,console.error("webrtc requires https or localhost"),[3,9]):[3,1]:[3,9]):(t({result:r.customCapture,errInfo:r.errInfo}),[2]);case 1:if(o&&"camera"!==o)return[3,5];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,navigator.mediaDevices.getUserMedia({video:!0})];case 3:return(l=i.sent())&&(r.camera=!0)&&l.getTracks().forEach((function(e){return e.stop()})),[3,5];case 4:return u=i.sent(),r.errInfo.camera={name:u.name,message:u.message},console.error("camera devices detect error: ",u.name,u.message),[3,5];case 5:if(o&&"microphone"!==o)return[3,9];i.label=6;case 6:return i.trys.push([6,8,,9]),[4,navigator.mediaDevices.getUserMedia({audio:!0})];case 7:return(d=i.sent())&&(r.microphone=!0)&&d.getTracks().forEach((function(e){return e.stop()})),[3,9];case 8:return h=i.sent(),r.errInfo.microphone={name:h.name,message:h.message},console.error("microphone devices detect error: ",h.name,h.message),[3,9];case 9:return"camera"===o||"microphone"===o?(t({result:r[o],errInfo:r.errInfo}),[2]):(this.supportVideoCodeType((function(e,n){o||(r.videoCodec.H264=e.H264,r.videoCodec.H265=e.H265,r.videoCodec.VP8=e.VP8,r.videoCodec.VP9=e.VP9,r.webRTC=e.webRTC),n&&("string"==typeof n?r.errInfo.extendedDate=n:r.errInfo.webRTC={name:n.name,message:n.message},console.error("videoCodec detect error: "+n)),t&&t(o?{result:e[o],errInfo:r.errInfo}:r)}),n,o),[2])}}))}))},e.getDevices=function(e,t){void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((function(t){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var s=t[o];"audioinput"===s.kind&&n.push({deviceName:s.label,deviceID:s.deviceId}),"audiooutput"===s.kind&&r.push({deviceName:s.label,deviceID:s.deviceId}),"videoinput"===s.kind&&i.push({deviceName:s.label,deviceID:s.deviceId})}e&&e({microphones:n,speakers:r,cameras:i})})).catch((function(e){console.error("enumerate devices wrong "+e),t&&t(s.ZegoRTCLogEvent.kZegoTaskEnumDevices.error.kEnumDevicesError)})):t&&t(s.ZegoRTCLogEvent.kZegoTaskEnumDevices.error.kBrowserNotSupportError)},e.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var r=0;r<n;r++){var i=parseInt(e[r]),o=parseInt(t[r]);if(i>o)return 1;if(i<o)return-1}return 0},e.isSupportLive=function(e,t){var n=wx.getSystemInfoSync().SDKVersion,r={code:0,msg:""};this.compareVersion(n,"1.7.0")<0&&(r={code:10001,msg:"当前微信版本过低，无法使用相关组件"},e&&e(r)),wx.getSetting({success:function(t){var n=t.authSetting;n["scope.camera"]&&n["scope.record"]||(r={code:10002,msg:"需要摄像头和录音功能的授权"}),e&&e(r)},fail:function(e){console.error("get setting error",e),t&&t(e)}})},e.supportVideoCodeType=function(e,t,n){return r(this,void 0,void 0,(function(){var r,o,s,c,l,u,d,h,p,f;return i(this,(function(i){switch(i.label){case 0:return r={webRTC:!1,H264:!1,VP8:!1,VP9:!1,H265:!1},n?1!==t||"VP8"!==n&&"H264"!==n?[3,2]:[4,(f=new a.CheckModule).checkSupportByType(n)]:[3,2];case 1:return"boolean"==typeof(o=i.sent())?(r[n]=o,[2,e(r)]):(r[n]=!1,[2,e(r,o)]);case 2:if("webRTC"!==n&&1!==t)return[3,7];i.label=3;case 3:return i.trys.push([3,5,,6]),[4,(new RTCPeerConnection).createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 4:return i.sent(),r.webRTC=!0,[3,6];case 5:return s=i.sent(),e&&e(r,s),[3,6];case 6:if("webRTC"===n)return[2,e(r)];i.label=7;case 7:if(1===t){for(c="",u=[],d=0,h=l=["VP8","H264"];d<h.length;d++)p=h[d],f=new a.CheckModule,u.push(f.checkSupportByType(p));return Promise.all(u).then((function(t){t.forEach((function(e,t){"boolean"==typeof e?r[l[t]]=!0:(r[l[t]]=!1,c=e)})),c?e(r,c):e(r)})),[2]}try{(new RTCPeerConnection).createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then((function(t){if(r.webRTC=!0,t&&t.sdp){var i=t.sdp.split("\r\n");if(r.H264=i.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("H264/")>-1})),"H264"===n)return e(r);if(r.VP8=i.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("VP8/")>-1})),"VP8"===n)return e(r);r.VP9=i.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("VP9/")>-1})),r.H265=i.some((function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("H265/")>-1})),e&&e(r)}}))}catch(t){e&&e(r,t)}return[2]}}))}))},e.getPublisherStateType=function(e){return 0==e||1==e?0==e?"PUBLISHING":"NO_PUBLISH":"PUBLISH_REQUESTING"},e.getPlayerStateType=function(e){return 0==e||1==e?0==e?"PLAYING":"NO_PLAY":"PLAY_REQUESTING"},e.getSteamUpdateType=function(e){return 0==e?"DELETE":"ADD"},e.checkScreenParams=function(t,n){if("object"==typeof t&&void 0!==t.videoQuality&&!e.checkInteger(t.videoQuality))return n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," videoQuality must be integer number"),!1;if("object"==typeof t&&void 0!==t.sourceID&&"string"!=typeof t.sourceID)return n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," sourceID must be string"),!1;if("object"==typeof t&&4===t.videoQuality){if(void 0===t.bitRate)return n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate is required when videoQuality is 4"),!1;if(!e.checkInteger(t.bitRate))return n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number"),!1;if(t.bitRate>10240)return n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps"),!1;if(void 0===t.frameRate)return n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," frameRate is required when videoQuality is 4"),!1;if(!e.checkInteger(t.frameRate))return n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," frameRate must be integer number"),!1;if(void 0===t.width)return n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," width is required when videoQuality is 4"),!1;if(!e.checkInteger(t.width))return n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," width must be integer number"),!1;if(void 0===t.height)return n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," height is required when videoQuality is 4"),!1;if(!e.checkInteger(t.height))return n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," height must be integer number"),!1}return!0},e.checkCameraParams=function(t,n){return t.width&&e.checkValidNumber(t.width)?t.height&&e.checkValidNumber(t.height)?t.frameRate&&e.checkValidNumber(t.frameRate)?!(!t.bitRate||!e.checkValidNumber(t.bitRate))||(n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number"),!1):(n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," frameRate must be integer number"),!1):(n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," height must be integer number"),!1):(n(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," width must be integer number"),!1)},e.isParamEmpty=function(e){return null!=e&&""!==e},e.isTypeString=function(e){return"string"==typeof e},e.isTooLong=function(e,t){return!(e.length>=t)},e.isReDispatch=function(e){var t=e.message.match(/action:(\d+)/),n=t?Number(t[1]):NaN;return[s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kTTLOverTimeError,s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kClientIPChangedError,s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kTTLOverTimeError,s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kClientIPChangedError].includes(e)||[6].includes(n)},e.arrAvg=function(e,t,n){return e.push(t),e.length>n&&e.shift(),e.reduce((function(e,t){return e+t}))/e.length},e.getNetQuality=function(e,t,n){return void 0!==n?.15*this.calcQualityOfJitter(n)+.85*Math.min(this.calcQualityOfRtt(e),this.calcQualityOfLostRate(t,!1)):Math.min(this.calcQualityOfRtt(e),this.calcQualityOfLostRate(t,!0))},e.calcQualityOfRtt=function(e){return e<600?97-Math.pow(.09*e,1.1):18*Math.exp(.002*(600-e))},e.calcQualityOfJitter=function(e){return e<=50?98-Math.pow(e,1.15):o.QUALITY_CONSTANT.PoorMinQuality},e.calcQualityOfLostRate=function(e,t){if(t){var n=e;return n<=55?99-Math.pow(.8*n,1.18):o.QUALITY_CONSTANT.PoorMinQuality}var r=100*e;return r<=40?96-Math.pow(r,1.22):o.QUALITY_CONSTANT.PoorMinQuality},e.quality2QualityGrade=function(e){return o.QualityGrade.Unknown,e>=o.QUALITY_CONSTANT.ExcellentMinQuality?o.QualityGrade.Excellent:e>=o.QUALITY_CONSTANT.GoodMinQuality?o.QualityGrade.Good:e>=o.QUALITY_CONSTANT.MiddleMinQuality?o.QualityGrade.Middle:e>=o.QUALITY_CONSTANT.PoorMinQuality?o.QualityGrade.Poor:o.QualityGrade.Die},e}();t.ClientUtil=c},6502:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryHandler=void 0;var n=function(){function e(){this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1}return e.prototype.init=function(e,t,n,r){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof n&&(this.RETRY_CONTINUE_COUNT=n),"number"==typeof r&&(this.RETRY_MAX_TIME_INTERVAL=r)},e.prototype.invalid=function(){this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryStartTime=0,this.retryActiveCount=1},e}();t.RetryHandler=n},4767:function(e,t){"use strict";var n=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.SdpUtil=void 0;var r=function(){function e(){}return e.zegoSdp=function(e){var t=e.split("\r\n"),r=[],i=[];t.forEach((function(e){var t=e.match(/a=rtpmap:(\d+)\s+((H264\/90000)|(opus\/48000\/2))/);t&&t[1]&&t[2]&&("H264/90000"===t[2]&&r.push(t[1]),"opus/48000/2"===t[2]&&i.push(t[1]))}));var o=[];return t.map((function(e){var t=!0,s=e.match(/((a=rtcp-fb:)|(a=rtpmap:)|(a=fmtp:))(\d+)/);if(s&&s[5]&&(n(n([],r),i).some((function(e){return e==s[5]}))||(t=!1)),e.indexOf("m=video")>-1){var a=e.split(" ");e=n([a[0],a[1],a[2]],r).join(" ")}else e.indexOf("m=audio")>-1&&(a=e.split(" "),e=n([a[0],a[1],a[2]],i).join(" "));t&&o.push(e)})),o.join("\r\n")},e.getSDPByVideDecodeType=function(e,t,r){var i={str:"",arr:[],obj:{H264:[],H265:[],VP8:[],VP9:[],OTHER:[]}};if(!e.includes("m=video"))return e;var o=/m=video.+/.exec(e)[0];o=o.match(/[\s|\d]+/g)[1].replace(" ",""),i.str=o,i.arr=i.str.split(" "),i.arr.forEach((function(t){var n=new RegExp("a=rtpmap:"+t+".+").exec(e)[0];n.includes("H264")?i.obj.H264.push(t):n.includes("H265")?i.obj.H265.push(t):n.includes("VP8")?i.obj.VP8.push(t):n.includes("VP9")?i.obj.VP9.push(t):i.obj.OTHER.push(t)})),i.obj.OTHER.forEach((function(t){var n=new RegExp("a=fmtp:"+t+".+apt=(\\d+)").exec(e),r=n&&n[1];r&&(i.obj.H264.includes(r)?i.obj.H264.push(t):i.obj.H265.includes(r)?i.obj.H265.push(t):i.obj.VP8.includes(r)?i.obj.VP8.push(t):i.obj.VP9.includes(r)&&i.obj.VP9.push(t))}));var s=[];if("VP9"===t?s=n(n(n([],i.obj.H265),i.obj.H264),i.obj.VP8):"VP8"===t?s=n(n(n([],i.obj.H265),i.obj.H264),i.obj.VP9):"H264"===t?s=n(n(n([],i.obj.H265),i.obj.VP8),i.obj.VP9):"H265"===t&&(s=n(n(n([],i.obj.VP8),i.obj.H264),i.obj.VP9)),r&&"H264"==t){var a=[];i.obj.H264.forEach((function(t){var n=new RegExp("a=fmtp:"+t+".+\\s\\n","g").exec(e);(null==n?void 0:n.find((function(e){return e.includes("profile-level-id=42e01f")})))||a.push(t)})),a.length==i.obj.H264.length&&(a=[]),s=s.concat(a)}return s.forEach((function(t){var n=i.arr.indexOf(t);i.arr.splice(n,1);var r=new RegExp("a=rtpmap:"+t+".+\\s\\n","g"),o=new RegExp("a=rtcp-fb:"+t+".+\\s\\n","g"),s=new RegExp("a=fmtp:"+t+".+\\s\\n","g");e=(e=(e=e.replace(r,"")).replace(o,"")).replace(s,"")})),e=e.replace(o,i.arr.join(" "))},e}();t.SdpUtil=r},5321:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWebRTC=void 0;var s=n(6706),a=n(608),c=n(7325),l=n(1089),u=n(3529),d=n(908),h=n(3409),p=n(7560),f=n(1547),g=o(n(5515)),m=n(3770),_=n(4865),v=n(361),E=n(5019),A=n(9595),y=n(9595),S=function(){function e(e,t,n,r){var i=this;void 0===r&&(r=0),this.mediaEleSources=[],this.logger=e,this.dataReport=t,this.ac=new("undefined"!=typeof webkitAudioContext?webkitAudioContext:AudioContext),this.checkAudioContext(),this.stateCenter=new c.StateCenter(this.logger,this.dataReport),this.stateCenter.clientType="webrtc",this.stateCenter.type=2===r?"PRIVATE":"PUBLIC",this.RTM=n,this.streamCenter=new h.ZegoStreamCenterWeb(this.logger,this.stateCenter,this.dataReport,this.RTM,this.ac,this.mediaEleSources),this.rtcModules=new d.RTCModules(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.RTM,this.ac),this.stateCenter.getSeq=s.getSeq,this.stateCenter.getReportSeq=s.getReportSeq,this.stateCenter.networkState=navigator?navigator.onLine?s.ENUM_NETWORK_STATE.online:s.ENUM_NETWORK_STATE.offline:s.ENUM_NETWORK_STATE.online,this.stateCenter.browser=g.browserDetails.browser,this.stateCenter.settingConfig=new y.ZegoSettingConfig,this.RTM.cloudSetting.setEnvVariable("sdk_version",s.PROTO_VERSION),this.RTM.cloudSetting.getSettingCache(A.RTC).then((function(e){i.logger.info(l.ZEGO_WEBRTC_ACTION.CONSTRUCTOR+" streamConfig "+JSON.stringify(e));var t=s.getReportSeq();i.dataReport.newReport(t,u.ZegoRTCLogEvent.kZegoTaskCloudSettingCache.event),i.dataReport.addMsgInfo(t,{files:[{name:A.RTC,content:null==e?void 0:e.setting,versions:null==e?void 0:e.versions}]}),i.dataReport.uploadReport(t),i.stateCenter.settingConfig.setSetting(null==e?void 0:e.setting)})).catch((function(e){i.logger.warn(l.ZEGO_WEBRTC_ACTION.CONSTRUCTOR+" streamConfig "+JSON.stringify(e))}))}return e.prototype.checkAudioContext=function(){var e=this;if(this.ac&&"suspended"===this.ac.state){var t=function(){e.ac.resume(),window.removeEventListener("click",t),window.removeEventListener("touchstart",t)};window.addEventListener("click",t),window.addEventListener("touchstart",t)}},e.prototype.mutePublishStreamVideo=function(e,t,n){return!1},e.prototype.mutePublishStreamAudio=function(e,t){return!1},e.prototype.mutePlayStreamVideo=function(e,t){return new Promise((function(e,t){console.error("should install advanced module"),e(!1)}))},e.prototype.mutePlayStreamAudio=function(e,t){return new Promise((function(e,t){console.error("should install advanced module"),e(!1)}))},e.prototype.muteMicrophone=function(e){return!1},e.prototype.isMicrophoneMuted=function(){return!this.streamCenter.isMicEnabled},e.prototype.setAudioOutput=function(e,t){return this.logger.info(l.ZEGO_WEBRTC_ACTION.SET_AUDIO_OUTPUT+" call"),"string"!=typeof t?(this.logger.error("audiooutput is not string"),!1):this.rtcModules.playModule.setStreamAudioOutput(e,t)},e.prototype.setCustomSignalUrl=function(e){if(this.logger.info(l.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" call: "+e),e&&0!=e.length){var t=!0;e.forEach((function(e){return 0!=e.indexOf("wss://")&&(t=!1)})),t?this.stateCenter.customUrl=e:this.logger.error(l.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" url is not correct")}else this.logger.error(l.ZEGO_WEBRTC_ACTION.SET_CUSTOM_SIGNAL_URL+" param error")},e.prototype.setGWNode=function(e){"string"==typeof e&&e.length>0&&(this.streamCenter.gwNode=e)},e.prototype.setQualityMonitorCycle=function(e){return"number"==typeof e&&e>=1e3?(this.streamCenter.setQualityMonitorCycle(e),!0):(this.logger.error("zc.sqmc.0 time must be number and bigger than 1000"),!1)},e.prototype.startPlayingStream=function(e,t,n){return this.logger.info(l.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" call by user"),this.rtcModules.playModule.startPlayingStream(e,t,n)},e.prototype.stopPlayingStream=function(e){this.logger.info(l.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call by user"),this.rtcModules.playModule.stopPlayingStream(e)},e.prototype.setTurnOverTcpOnly=function(e){this.logger.info(l.ZEGO_WEBRTC_ACTION.SET_TURN_OVER_TCP_ONLY+" call "+e),"boolean"==typeof e?this.stateCenter.turnOverTcpOnly=e:this.logger.error("zc.p.stoto.0 param must be param")},e.prototype.createStream=function(e){return this.rtcModules.publishModule.createStream(e)},e.prototype.destroyStream=function(e){this.rtcModules.publishModule.destroyStream(e)},e.prototype.startPublishingStream=function(e,t,n,r){return this.logger.info(l.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" call by user"),this.rtcModules.publishModule.startPublishingStream(e,t,n,r)},e.prototype.activateSEIInsert=function(e){return console.error("should install advanced module"),!1},e.prototype.stopPublishingStream=function(e){return this.logger.info(l.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" call by user"),this.rtcModules.publishModule.stopPublishingStream(e)},e.prototype.setVideoConfig=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setVideoConfig(e,t):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.setAudioConfig=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setAudioConfig(e,t):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.replaceTrack=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.replaceTrack(e,t):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.preloadEffect=function(e,t,n){void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.preloadEffect(e,t,n):console.error("未引入混音模块")},e.prototype.playEffect=function(e,t,n){void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.playEffect(e,t,n):console.error("未引入混音模块")},e.prototype.pauseEffect=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.pauseEffect(e,t):(console.error("未引入混音模块"),!1)},e.prototype.resumeEffect=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.resumeEffect(e,t):(console.error("未引入混音模块"),!1)},e.prototype.stopEffect=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopEffect(e,t):(console.error("未引入混音模块"),!1)},e.prototype.unloadEffect=function(e){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.unloadEffect(e):(console.error("未引入混音模块"),!1)},e.prototype.setEffectVolume=function(e,t,n){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.setEffectVolume(e,t,n):(console.error("未引入混音模块"),!1)},e.prototype.startMixingAudio=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.startMixingAudio(e,t):(console.error("未引入混音模块"),!1)},e.prototype.stopMixingAudio=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopMixingAudio(e,t):(console.error("未引入混音模块"),!1)},e.prototype.mixingBuffer=function(e,t,n,r){void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.mixingBuffer(e,t,n,r):console.error("未引入混音模块")},e.prototype.stopMixingBuffer=function(e,t){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopMixingBuffer(e,t):(console.error("未引入混音模块"),!1)},e.prototype.setMixingAudioVolume=function(e,t,n){return void 0!==this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.setMixingAudioVolume(e,t,n):(console.error("未引入混音模块"),!1)},e.prototype.checkSystemRequirements=function(t,n){var r=this,i=navigator&&navigator.mediaDevices&&(e.screenShotReady||"getDisplayMedia"in navigator.mediaDevices);return this.logger.info(l.ZEGO_WEBRTC_ACTION.CHECK_SUPPORT+" call"+navigator.userAgent),new Promise((function(e){var o=s.getReportSeq();r.dataReport.newReport(o,u.ZegoRTCLogEvent.kZegoTaskCheckSystemRequirements.event);var c=n||"all",l=function(t){r.dataReport.addMsgInfo(o,{capability:u.ZegoRTCLogEvent.kZegoTaskCheckSystemRequirements.capability(t)}),r.dataReport.uploadReport(o);var n=r.stateCenter.checkList.indexOf(c);r.stateCenter.checkList.splice(n,1),e(t)};return["webRTC","customCapture","camera","microphone","screenSharing","H264","VP8","all"].includes(c)&&[0,1].includes(t)?r.stateCenter.checkList.includes(c)||r.stateCenter.checkList.includes("all")?l({result:!1,errInfo:{extendedDate:"The last test of the same type has not returned a result "}}):(r.stateCenter.checkList.push(c),void a.ClientUtil.supportDetection(i,l,t,n)):l({result:!1,errInfo:{extendedDate:"param error"}})}))},e.prototype.enumDevices=function(){var e=this;return this.logger.info("zc.ed.0 call"),new Promise((function(t,n){var r=s.getReportSeq();e.dataReport.newReport(r,u.ZegoRTCLogEvent.kZegoTaskEnumDevices.event),e.rtcModules.publishModule.recordDevices((function(n){var i=[];n.cameras.forEach((function(e){return i.push({device:e.deviceName,type:0})})),n.microphones.forEach((function(e){return i.push({device:e.deviceName,type:1})})),n.speakers.forEach((function(e){return i.push({device:e.deviceName,type:2})})),e.dataReport.addMsgInfo(r,{dev_list:u.ZegoRTCLogEvent.kZegoTaskEnumDevices.dev_list(i)}),e.dataReport.uploadReport(r),t(n)}),(function(t){e.dataReport.addMsgInfo(r,t),e.dataReport.uploadReport(r),n(t)}))}))},e.prototype.getAudioInfo=function(e,t,n){},e.prototype.getSoundLevel=function(e,t,n){this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.getSoundLevel(e,t,n):console.error("未引入混音模块")},e.prototype.stopSoundLevel=function(e){this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopSoundLevel(e):console.error("未引入混音模块")},e.handleDataAvailable=function(t){t.data&&t.data.size>0&&e.recordedBlobs.push(t.data)},e.prototype.startRecord=function(e){},e.prototype.stopRecord=function(){},e.prototype.resumeRecord=function(){},e.prototype.pauseRecord=function(){},e.prototype.saveRecord=function(e){},e.prototype.takeSnapShot=function(e,t){},e.prototype.saveSnapShot=function(e,t){},e.prototype.useVideoDevice=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.useVideoDevice(e,t):new Promise((function(e,t){e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.useAudioDevice=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.useAudioDevice(e,t):(console.error("should use advanced module first"),new Promise((function(e,t){e({errorCode:-1,extendedData:"should install advanced module"})})))},e.prototype.getElectronScreenSources=function(){return this.rtcModules.publishModule.getElectronScreenSources()},e.prototype.setSoundLevelDelegate=function(e,t){this.logger.info("zc.ssd.0 call"),"boolean"==typeof e?t&&(!this.stateCenter.checkInteger(t)||t<100||t>3e3)?this.logger.error("zc.ssd.0 soundLevel interval must be integer number which is between 100 and 3000"):this.streamCenter.setSoundLevelDelegate(e,t):this.logger.error("zc.ssd.0 param 1 must be boolean")},e.prototype.on=function(e,t){return this.rtcModules.bindListener(e,t)},e.prototype.off=function(e,t){return this.rtcModules.deleteListener(e,t)},e.prototype.getVersion=function(){return s.PROTO_VERSION},e.prototype.setStreamExtraInfo=function(e,t){return new Promise((function(e,t){console.error("should use advanced module first"),t()}))},e.prototype.addPublishCdnUrl=function(e,t){return this.logger.info("zg.cm.apu call ",e,t),this.rtcModules.advancedModule?this.rtcModules.advancedModule.publishTarget({type:"addpush",streamID:e,pushUrl:t}):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.removePublishCdnUrl=function(e,t){return this.logger.info("zg.cm.apu call ",e,t),this.rtcModules.advancedModule?this.rtcModules.advancedModule.publishTarget({type:"delpush",streamID:e,pushUrl:t}):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.startMixerTask=function(e){return new Promise((function(e,t){console.error("未引入混流模块"),t()}))},e.prototype.setMixerTaskConfig=function(e){return new Promise((function(e,t){console.error("未引入混流模块"),t()}))},e.prototype.stopMixerTask=function(e){return new Promise((function(e,t){console.error("未引入混流模块"),t()}))},e.prototype.setCaptureVolume=function(e,t){return this.rtcModules.publishModule.setCaptureVolume(e,t)},e.prototype.getRoomInfo=function(){var e=this.stateCenter.roomList[0];return null==e?void 0:e.streamHandler.getRoomInfo()},e.use=function(t){switch(t.type){case"AudioMix":t.install(d.RTCModules,f.ZegoPublish);break;case"MixStream":t.install(e,p.StreamHandler,d.RTCModules);break;case"Advance":t.install(e,d.RTCModules,p.StreamHandler,m.ZegoPreview,_.PlayModule,v.PublishModule,f.ZegoPublish,E.ZegoSignal);break;case"BeautyEffect":t.install(m.ZegoPreview);break;case"RangeAudio":case"DataChannel":t.install(e)}},e.prototype.createRangeAudioInstance=function(){throw new Error("should use range audio module")},e.prototype.createRealTimeSequentialDataManager=function(e){throw new Error("should use datachannel module")},e.prototype.destroyRealTimeSequentialDataManager=function(e){throw new Error("should use datachannel module")},e.prototype.enableDataChannel=function(e){"boolean"==typeof e&&(this.streamCenter.isDataChannelEnabled=e)},e.prototype.addTrack=function(e,t){return new Promise((function(e,t){throw new Error("use advanced module first")}))},e.prototype.removeTrack=function(e,t){return new Promise((function(e,t){throw new Error("use advanced module first")}))},e.prototype.setBeautyEffect=function(e,t,n){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setBeautyEffect(e,t,n):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.screenShotReady=!1,e}();t.ZegoWebRTC=S,window.addEventListener("message",(function(e){var t=e.data.type,n=e.origin;n!==window.location.origin&&console.warn("ScreenStream: you should discard foreign event from origin:",n),"SS_PING"===t&&(S.screenShotReady=!0)}))},4395:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckModule=void 0;var o=n(4767),s=function(){function e(){var e=this;this.iceconnectionstatechangeTimes=0,this.isCheckAll=!1;var t=document.createElement("canvas");t.getContext("2d").fillStyle="rgba(255, 255, 255, 0)";try{this.localStream=t.captureStream()}catch(e){console.error("canvas captureStream error",e)}this.timer=setTimeout((function(){e.resolve("Detection timeout"),e.hangup()}),5e3)}return e.prototype.checkSupportByType=function(e){return r(this,void 0,void 0,(function(){var t,n,r=this;return i(this,(function(i){switch(i.label){case 0:return this.checkType=e,t={},this.localPc=new RTCPeerConnection(t),this.remotePc=new RTCPeerConnection(t),n=new Promise((function(e){return r.resolve=e})),this.localPc.addEventListener("icecandidate",(function(e){return r.onIceCandidate(r.localPc,e)})),this.remotePc.addEventListener("icecandidate",(function(e){return r.onIceCandidate(r.remotePc,e)})),this.remotePc.addEventListener("iceconnectionstatechange",(function(t){"connected"===r.remotePc.iceConnectionState&&(r.iceconnectionstatechangeResult=!0),2==++r.iceconnectionstatechangeTimes&&r.iceCandidate&&(clearTimeout(r.timer),"connected"===r.remotePc.iceConnectionState?r.resolve(!0):r.resolve("The browser does not support "+e+" format"),r.hangup())})),this.localStream.getTracks().forEach((function(e){return r.localPc.addTrack(e,r.localStream)})),[4,this.check(e)];case 1:return i.sent(),[4,n];case 2:return[2,i.sent()]}}))}))},e.prototype.check=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.localPc.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 1:return(t=r.sent()).sdp=o.SdpUtil.getSDPByVideDecodeType(t.sdp,e),this.onCreateOfferSuccess(t),[3,3];case 2:return n=r.sent(),this.onCreateSessionDescriptionError(n),[3,3];case 3:return[2]}}))}))},e.prototype.onCreateOfferSuccess=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.localPc.setLocalDescription(e)];case 1:return i.sent(),[3,3];case 2:return t=i.sent(),this.onSetSessionDescriptionError(t),[2];case 3:return i.trys.push([3,5,,6]),[4,this.remotePc.setRemoteDescription(e)];case 4:return i.sent(),[3,6];case 5:return n=i.sent(),this.onSetSessionDescriptionError(n),[2];case 6:return i.trys.push([6,9,,10]),[4,this.remotePc.createAnswer()];case 7:return r=i.sent(),[4,this.onCreateAnswerSuccess(r)];case 8:return i.sent(),[3,10];case 9:return o=i.sent(),this.onCreateSessionDescriptionError(o),[2];case 10:return[2]}}))}))},e.prototype.onCreateAnswerSuccess=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.remotePc.setLocalDescription(e)];case 1:return r.sent(),[3,3];case 2:return t=r.sent(),this.onSetSessionDescriptionError(t),[2];case 3:return r.trys.push([3,5,,6]),[4,this.localPc.setRemoteDescription(e)];case 4:return r.sent(),[3,6];case 5:return n=r.sent(),this.onSetSessionDescriptionError(n),[2];case 6:return[2]}}))}))},e.prototype.onIceCandidate=function(e,t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getOtherPc(e).addIceCandidate(t.candidate)];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),console.error(this.checkType,this.getPcName(e)+" addIceCandidate error",n),clearTimeout(this.timer),this.hangup(),this.resolve(n),[3,3];case 3:return"remotePc"===this.getPcName(e)&&t.candidate&&(this.iceCandidate=!0),this.iceconnectionstatechangeResult&&"localPc"===this.getPcName(e)&&(clearTimeout(this.timer),this.hangup(),this.resolve(!0)),[2]}}))}))},e.prototype.getOtherPc=function(e){return e===this.localPc?this.remotePc:this.localPc},e.prototype.getPcName=function(e){return e===this.localPc?"localPc":"remotePc"},e.prototype.onCreateSessionDescriptionError=function(e){console.error("Failed to create session description: "+e.toString()),clearTimeout(this.timer),this.hangup(),this.resolve(e)},e.prototype.onSetSessionDescriptionError=function(e){console.error("Failed to set session description: "+e.toString()),clearTimeout(this.timer),this.hangup(),this.resolve(e)},e.prototype.hangup=function(){this.localPc.close(),this.remotePc.close(),this.iceconnectionstatechangeTimes=0,this.localStream.getTracks().forEach((function(e){return e.stop()}))},e}();t.CheckModule=s},8493:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.RetryDispatchHandler=void 0;var o=n(6502),s=n(6706),a=n(1089),c=n(3529),l=n(2752),u=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.retryActiveCount=1,o.RETRY_MAX_TIME=90,o.logger=t,o.stateCenter=n,o.rtm=r,o.streamCenter=i,o}return i(t,e),t.prototype.initStream=function(e,t,n){this.streamID=e,this.playOption=t,this.isPublish=n},t.prototype.active=function(e){var t=this;if(this.logger.info(a.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" retry call "+this.streamID),this.stateCenter.networkState==s.ENUM_NETWORK_STATE.offline)return this.logger.info(a.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" network is broken, stop retry"),!1;if(this.retryTimer)return this.logger.info(a.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" has active, ignore"),!1;if(this.isOverTime)return this.logger.warn(a.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" retry over time, stop retry"),!1;if(!this.rtm.isLogin()){this.stopMaxTime(),this.invalid();var n=this.isPublish?this.streamCenter.publisherList[this.streamID]:this.streamCenter.playerList[this.streamID];n&&(n.isReDispatch=!0)}var r,i=this.retryActiveCount-1;if("PUBLIC"===this.stateCenter.type){var o=this.playOption&&2==this.playOption.resourceMode?1:0;r={stream_id:this.streamID,ptype:this.isPublish?"push":"pull",signals:this.streamCenter.getAllInUseUrl(),header_kvs:[{key:"grpc-metadata-push",value:this.playOption&&this.playOption.cdnUrl||""}],retry:i,center_ability:!0,dispatch_type:o}}else r={stream_id:this.streamID,dispatch_type:this.isPublish?1:2,stream_type:3,an_type:this.rtm.getAnType()};return this.retryTimer=setTimeout((function(){t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null,t.retryActiveCount++;var e=t.streamCenter.getRoomByStreamID(t.streamID),n=t.rtm.service.sendMessage("webrtc_url",r,(function(e,n){t.handleFetchWebRtcUrlRsp(e)}),(function(e,n){t.handleFetchWebRtcUrlRsp(e)}),void 0,{sessionID:null==e?void 0:e.sessionID,roomID:null==e?void 0:e.roomID,roomSessionID:null==e?void 0:e.roomSessionID});t.isPublish&&n?t.streamCenter.publisherList[t.streamID]&&(t.streamCenter.publisherList[t.streamID].seq=n):n&&t.streamCenter.playerList[t.streamID]&&(t.streamCenter.playerList[t.streamID].seq=n)}),"number"==typeof e?e:1e3*this.retryActiveInterval),this.logger.info(a.ZEGO_WEBRTC_ACTION.RDH_ACTIVE+" call success"),!0},t.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.maxTimer=setTimeout((function(){e.logger.warn(a.ZEGO_WEBRTC_ACTION.RDH_MAX_TIME+" "+e.streamID+" dispatch over max time "+e.RETRY_MAX_TIME+"s stop retry"),e.isOverTime=!0,e.invalid();var t=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError;t.message=t.message+" try max limit",e.isPublish?e.streamCenter.onPublishStateUpdate(s.ENUM_PUBLISH_STATE_UPDATE.error,e.streamID,t):e.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.error,e.streamID,t)}),1e3*this.RETRY_MAX_TIME))},t.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},t.prototype.onactive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.handleFetchWebRtcUrlRsp=function(e){if(e.code&&[l.errorCodeList.TIMEOUT.code].includes(e.code))this.active();else{if(e.code&&[l.errorCodeList.SOCKET_CLOSE.code].includes(e.code))return this.stopMaxTime(),this.invalid(),void(this.isPublish?this.streamCenter.publisherList[this.streamID].isReDispatch=!0:this.streamCenter.playerList[this.streamID].isReDispatch=!0);var t=e,n=t.body.stream_id,r=!1;if(this.isPublish&&(!this.streamCenter.publisherList[n]||t.header.seq!==this.streamCenter.publisherList[this.streamID].seq))return this.logger.warn(a.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" seq is not match, ignore "+this.streamID),this.stopMaxTime(),void this.invalid();if(!(this.isPublish||this.streamCenter.playerList[this.streamID]&&t.header.seq===this.streamCenter.playerList[this.streamID].seq))return this.logger.warn(a.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" seq is not match, ignore "+this.streamID),this.stopMaxTime(),void this.invalid();if("PUBLIC"===this.stateCenter.type){if(this.stateCenter.clientIP=t.body.clientip||"",0!==t.body.err_code&&2==t.body.need_action)return this.retryActiveInterval=t.body.action_delay/1e3||Math.floor(3*Math.random())+3,2==this.retryActiveCount&&((p=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError).message=p.message+(t.body.err_code?" server error:"+t.body.err_code:""),"push"===t.body.ptype?this.streamCenter.onPublishStateUpdate(s.ENUM_PUBLISH_STATE_UPDATE.retry,n,p):this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.retry,n,p)),void this.active();if(0!==t.body.err_code&&1!==t.body.need_action&&![3102].includes(t.body.err_code))return this.retryActiveInterval=Math.floor(3*Math.random())+3,2==this.retryActiveCount&&((p=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError).message=p.message+(t.body.err_code?" server error:"+t.body.err_code:""),"push"===t.body.ptype?this.streamCenter.onPublishStateUpdate(s.ENUM_PUBLISH_STATE_UPDATE.retry,n,p):this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.retry,n,p)),void this.active();if(this.stopMaxTime(),this.invalid(),t.body.urls&&Array.isArray(t.body.urls)&&t.body.urls.length>0?r=!0:this.logger.error(a.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" signal url is empty"),"push"===t.body.ptype&&this.streamCenter.publisherList[n]){if(!r)return void this.streamCenter.onPublishStateUpdate(s.ENUM_PUBLISH_STATE_UPDATE.error,n,c.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError);var i=this.streamCenter.publisherList[n];this.stateCenter.publishStreamList[n]?(i.ttl=t.body.hosts_ttl?(new Date).getTime()+1e3*t.body.hosts_ttl:0,i.isCenterNode="boolean"==typeof t.body.is_center_node&&t.body.is_center_node,i.serverUrls=t.body.urls,this.streamCenter.startPublishingStream(n)):this.logger.error(a.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" no streamid to publish")}else if("pull"==t.body.ptype&&this.streamCenter.playerList[n]){if(!r)return(p=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError).message=p.message+(t.body.err_code?" server error:"+t.body.err_code:""),3102===t.body.err_code&&(p=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayUnsupportedResourceMode),void this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.error,n,p);(f=this.streamCenter.playerList[n]).ttl=t.body.hosts_ttl?(new Date).getTime()+1e3*t.body.hosts_ttl:0,f.isCenterNode="boolean"==typeof t.body.is_center_node&&t.body.is_center_node,f.serverUrls=t.body.urls,this.streamCenter.startPlayingStream(n,this.streamCenter.playSuccessCallBackList[n])}}else{this.stopMaxTime(),this.invalid();var o=[],u=t.body.stream_url_info&&t.body.stream_url_info.stream_url,d=t.body.stream_url_info&&t.body.stream_url_info.ip_infos,h=/^ws(s)?:\/\/(.*?)\//;if(t.body.stream_url_info&&u&&d?r=!0:this.logger.error(a.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" signal url is empty"),d&&d.forEach((function(e){var t=e.ip_address+":"+e.port;o.push(u.replace(h.exec(u)[2],t))})),this.isPublish&&this.streamCenter.publisherList[n]){if(!r)return void this.streamCenter.onPublishStateUpdate(s.ENUM_PUBLISH_STATE_UPDATE.error,n,c.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError);i=this.streamCenter.publisherList[n],this.stateCenter.publishStreamList[n]?(i.serverUrls=o,this.streamCenter.startPublishingStream(n)):this.logger.error(a.ZEGO_WEBRTC_ACTION.RDH_WEBRTC_URL_RSP+" no streamid to publish")}else if(!this.isPublish&&this.streamCenter.playerList[n]){var p,f;if(!r)return(p=c.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError).message=p.message+(t.body.err_code?" server error:"+t.body.err_code:""),void this.streamCenter.onPlayStateUpdate(s.ENUM_PLAY_STATE_UPDATE.error,n,p);(f=this.streamCenter.playerList[n]).serverUrls=o,this.streamCenter.startPlayingStream(n,this.streamCenter.playSuccessCallBackList[n])}}}},t}(o.RetryHandler);t.RetryDispatchHandler=u},6014:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.RetryStreamHandler=void 0;var o=n(6706),s=n(6502),a=n(3529),c=n(1089),l=n(608),u=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.logger=t,o.stateCenter=n,o.streamCenter=r,o.isPublish=i,o.serverUrls=[],o}return i(t,e),t.prototype.initStream=function(e,t){this.streamID=e,this.serverUrls=t},t.prototype.activePublish=function(e){var t=this;if(this.logger.info("zc.tsh.a retry call "+this.streamID),this.stateCenter.networkState==o.ENUM_NETWORK_STATE.offline)return this.logger.info("zc.tsh.a network is broken, stop retry"),!1;if(this.retryTimer)return this.logger.info("zc.tsh.a has active, ignore"),!1;if(this.isOverTime)return this.logger.warn("zc.tsh.a retry over time, stop retry"),!1;if(1==this.retryActiveCount)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var n=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1));this.retryActiveInterval=n>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:n}var r=this.streamCenter.publisherList[this.streamID].publisher,i=this.serverUrls,s=r.signal?r.signal.server:"";i.forEach((function(e,n){return n<=i.indexOf(s)&&t.serverUrls.push(e)})),i.splice(0,i.indexOf(s)+1);var a=this.serverUrls[this.retryActiveCount%this.serverUrls.length==0?this.serverUrls.length-1:this.retryActiveCount%this.serverUrls.length-1];return this.retryTimer=setTimeout((function(){t.logger.warn("zc.tsh.a stream "+t.streamID+" connect signal server "+a),t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null,t.retryActiveCount++,t.streamCenter.connectPublishServer(t.streamID,a)}),"number"==typeof e?e:1e3*this.retryActiveInterval),this.logger.info("zc.tsh.a call success"),!0},t.prototype.activePull=function(e,t){var n=this;if(this.logger.info("zc.tsh.a retry call "+this.streamID),t&&(this.playStreamSuccess=t),this.stateCenter.networkState==o.ENUM_NETWORK_STATE.offline)return this.logger.info("zc.tsh.a network is broken, stop retry"),!1;if(this.retryTimer)return this.logger.info("zc.tsh.a has active, ignore"),!1;if(this.isOverTime)return this.logger.warn("zc.tsh.a retry over time, stop retry"),!1;if(1==this.retryActiveCount)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var r=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1));this.retryActiveInterval=r>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:r}var i=this.streamCenter.playerList[this.streamID].player,s=this.serverUrls,a=i.signal?i.signal.server:"";s.forEach((function(e,t){return t<=s.indexOf(a)&&n.serverUrls.push(e)})),s.splice(0,s.indexOf(a)+1);var c=this.serverUrls[this.retryActiveCount%this.serverUrls.length==0?this.serverUrls.length-1:this.retryActiveCount%this.serverUrls.length-1];return this.retryTimer=setTimeout((function(){n.logger.warn("zc.tsh.a stream "+n.streamID+" connect signal server "+c),n.retryTimer&&clearTimeout(n.retryTimer),n.retryTimer=null,n.retryActiveCount++,n.streamCenter.connectPlayServer(n.streamID,n.playStreamSuccess,c)}),"number"==typeof e?e:1e3*this.retryActiveInterval),this.logger.info("zc.tsh.a call success"),!0},t.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.maxTimer=setTimeout((function(){if(e.logger.warn(e.streamID+" over max time "+e.RETRY_MAX_TIME+"s, stop retry"),e.isOverTime=!0,e.invalid(),e.isPublish){if(!e.streamCenter.publisherList[e.streamID])return void e.logger.info("zc.tsh.smt streamID "+e.streamID+" publish no found");e.publishStateHandle(o.ENUM_PUBLISH_STATE_UPDATE.error,e.streamID,a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishRetryTimeoutError,!0)}else{if(!e.streamCenter.playerList[e.streamID])return void e.logger.info("zc.tsh.smt streamID "+e.streamID+" play no found");e.playStateHandle(o.ENUM_PLAY_STATE_UPDATE.error,e.streamID,a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayRetryTimeoutError,!0)}}),1e3*this.RETRY_MAX_TIME))},t.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},t.prototype.onactive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.retryNextSignal=function(e){if(this.stateCenter.networkState==o.ENUM_NETWORK_STATE.offline)return!0;if(this.isPublish){var t=this.streamCenter.publisherList[this.streamID];if(t.publisher.state==o.ENUM_PUBLISH_STATE.stop&&[a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionTimeoutError.code,a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNegoTimeoutError.code].includes(e.code))return!0;if(t.isCenterNode&&t.publisher.signal&&t.publisher.signal.websocket&&1==t.publisher.signal.websocket.readyState)return!1;if(!t.isCenterNode&&[a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishSessionClosedError.code].includes(e.code)){var n=(r=e.message.match(/reason:(\d+)/))?r[1]:"";return!["26"].includes(n)}return!0}var r,i=this.streamCenter.playerList[this.streamID];return!(i.player.state!=o.ENUM_PLAY_STATE.stop||![a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionTimeoutError.code,a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNegoTimeoutError.code].includes(e.code))||!(i.isCenterNode&&i.player.signal&&i.player.signal.websocket&&1==i.player.signal.websocket.readyState)&&(!(!i.isCenterNode&&[a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlaySessionClosedError.code].includes(e.code))||(n=(r=e.message.match(/reason:(\d+)/))?r[1]:"",!["24","26","28"].includes(n)))},t.prototype.publishStateHandle=function(e,t,n,r){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" call "+t+" "+(n?n.code+"":""));var i=r||this.RETRY_MAX_TIME<3;if(!i&&n&&(l.ClientUtil.isReDispatch(n)||0==this.serverUrls.length))return this.stopMaxTime(),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,void this.streamCenter.onPublishStateUpdate(e,t,n);var s=this.streamCenter.publisherList[t],u=s.publisher;if(!i&&n&&0!==n.code){!this.maxTimer&&!i&&this.startMaxTime(),this.stateCenter.publishStreamList[t].state=o.ENUM_PUBLISH_STREAM_STATE.retryPublish;var d=u.localStream,h=u.videoInfo,p=u.mediaStreamConfig,f=u.publishOption;if(0!=u.sessionId&&u.signal&&u.shouldSendCloseSession()&&(u.signal.sendCloseSession(o.getSeq(),u.sessionId,1),u.signal.removeSession(u.sessionId),u.closeSessionSignal=!0),u.resetPublish(),!i&&!this.retryNextSignal(n)){if(s.isCenterNode&&u.gwNodeTTL<(new Date).getTime()&&0!==u.gwNodeList.length)u.gwNode="",u.gwNodeList=[],u.gwNodeTTL=0;else if(s.isCenterNode){var g=u.gwNodeList.findIndex((function(e){return e==u.gwNode}));u.gwNode=u.gwNodeList[++g%u.gwNodeList.length]}return void setTimeout((function(){u.startPublish(t,d,h,p,f)}),3e3)}this.streamCenter.removeStreamFromSignal(!0,t)}if(i)return this.stopMaxTime(),this.invalid(),1===e&&u.resetPublish(),void this.streamCenter.onPublishStateUpdate(e,t,n);if(n&&0!==n.code&&this.activePublish(void 0)){var m=o.getReportSeq();this.streamCenter.dataReport.newReport(m),this.streamCenter.dataReport.addMsgInfo(m,{stream:a.ZegoRTCLogEvent.kZegoTaskRePublish.stream(this.streamID)}),this.streamCenter.dataReport.uploadReport(m,a.ZegoRTCLogEvent.kZegoTaskRePublish.event),this.streamCenter.onPublishStateUpdate(2,t,n)}this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISH_STATE_HANDLE+" end "+t)},t.prototype.playStateHandle=function(e,t,n,r){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" call "+t+" "+(n?n.code+"":""));var i=r||this.RETRY_MAX_TIME<3;if(!i&&n&&(l.ClientUtil.isReDispatch(n)||0==this.serverUrls.length))return this.stopMaxTime(),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,void this.streamCenter.onPlayStateUpdate(e,t,n);if(n&&0!==n.code){!this.maxTimer&&!i&&this.startMaxTime();var s=this.streamCenter.playerList[t],u=s.player,d=u.playOption;if(0!=u.sessionId&&u.signal&&u.shouldSendCloseSession()&&(u.signal.sendCloseSession(o.getSeq(),u.sessionId,1),u.signal.removeSession(u.sessionId),u.closeSessionSignal=!0),u.resetPlay(),!i&&!this.retryNextSignal(n)){if(s.isCenterNode&&u.gwNodeTTL<(new Date).getTime()&&0!==u.gwNodeList.length)u.gwNode="",u.gwNodeList=[],u.gwNodeTTL=0;else if(s.isCenterNode){var h=u.gwNodeList.findIndex((function(e){return e==u.gwNode}));u.gwNode=u.gwNodeList[++h%u.gwNodeList.length]}return void setTimeout((function(){u.startPlay(t,u.getRemoteStreamSuc,d)}),3e3)}this.streamCenter.removeStreamFromSignal(!1,t)}if(i)return this.stopMaxTime(),this.invalid(),void this.streamCenter.onPlayStateUpdate(e,t,n);if(n&&0!==n.code&&this.activePull(void 0)){var p=o.getReportSeq();this.streamCenter.dataReport.newReport(p),this.streamCenter.dataReport.addMsgInfo(p,{stream:a.ZegoRTCLogEvent.kZegoTaskRePlay.stream(this.streamID)}),this.streamCenter.dataReport.uploadReport(p,a.ZegoRTCLogEvent.kZegoTaskRePlay.event),this.streamCenter.onPlayStateUpdate(2,t,n)}this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAY_STATE_HANDLE+" end "+t)},t}(s.RetryHandler);t.RetryStreamHandler=u},908:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCModules=void 0;var o=n(6706),s=n(3529),a=n(608),c=n(7560),l=n(361),u=n(4865),d=n(1089),h=n(2752),p=n(9595),f=function(){function e(e,t,n,r,i,o){this.logger=e,this.dataReport=t,this.stateCenter=n,this.streamCenter=r,this.rtm=i,this.ac=o,this.mediaEleSources=[],this.publishModule=new l.PublishModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.rtm),this.playModule=new u.PlayModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.rtm),this.initAdvance(),this.initAudioMix(),this.init()}return e.prototype.init=function(){this.bindWindowListener(),this.bindRTMListener(),this.bindStreamCenterHandler()},e.prototype.initAudioMix=function(){},e.prototype.initAdvance=function(){},e.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i),n=this.stateCenter.browser,r=t?"pagehide":"firefox"===n?"beforeunload":"unload";window.addEventListener(r,(function(){for(var t in window.event&&(window.event.cancelBubble=!0),e.streamCenter.publisherList)e.publishModule.stopPublishingStream(t);for(var t in e.streamCenter.playerList)e.playModule.stopPlayingStream(t)})),window.addEventListener("message",(function(t){var n=t.data,r=n.type,i=n.streamId,o=n.canRequestAudioTrack;"SS_DIALOG_SUCCESS"===r&&e.screenStreamFrom(i,o,a.ClientUtil.actionSuccessCallback("screenShare",e.stateCenter.callbackList)),"SS_DIALOG_CANCEL"===r&&a.ClientUtil.actionSuccessCallback("screenShare",e.stateCenter.callbackList)(!1,null,r)})),window.addEventListener("offline",(function(){for(var t in e.logger.info("zc.off.0 newtwork is broken"),e.stateCenter.networkState=o.ENUM_NETWORK_STATE.offline,e.streamCenter.publisherList)(n=e.streamCenter.publisherList[t].retryStreamHandler).startMaxTime(),n.invalid();for(var t in e.streamCenter.playerList){var n;(n=e.streamCenter.playerList[t].retryStreamHandler).startMaxTime(),n.invalid()}})),window.addEventListener("online",(function(t){for(var n in e.logger.info("zc.on.0 network is online"),e.stateCenter.networkState=o.ENUM_NETWORK_STATE.online,e.streamCenter.publisherList){var r=e.streamCenter.publisherList[n].publisher,i=e.streamCenter.publisherList[n].retryStreamHandler;r.state==o.ENUM_PUBLISH_STATE.stop||r.stateNego!==o.ENUM_PUBLISH_STATE_NEGO.iceConnected?!i.isOverTime&&i.publishStateHandle(o.ENUM_PUBLISH_STATE_UPDATE.error,n,s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNetworkBrokenError):r.state==o.ENUM_PUBLISH_STATE.publishing&&i.stopMaxTime()}for(var n in e.streamCenter.playerList){var a=e.streamCenter.playerList[n].player;i=e.streamCenter.playerList[n].retryStreamHandler,a.state==o.ENUM_PLAY_STATE.stop||a.stateNego!==o.ENUM_PLAY_STATE_NEGO.iceConnected?!i.isOverTime&&i.playStateHandle(o.ENUM_PLAY_STATE_UPDATE.error,n,s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNetworkBrokenError):a.state==o.ENUM_PLAY_STATE.playing&&i.stopMaxTime()}})),window.addEventListener("visibilitychange",(function(t){if(Object.keys(e.streamCenter.publisherList).length>0||Object.keys(e.streamCenter.playerList).length>0){var n=o.getReportSeq();e.dataReport.newReport(n,s.ZegoRTCLogEvent.kZegoVisibilityChange.event),e.dataReport.uploadReport(n)}}))},e.prototype.bindRTMListener=function(){var e,t,n=this;this.rtm._on("_settingCanFetch",(function(e){return r(n,void 0,void 0,(function(){var e=this;return i(this,(function(t){return this.rtm.cloudSetting.fetchSetting(p.RTC).then((function(t){e.logger.info("zc.scf stream config "+JSON.stringify(t)),e.rtm._on("_cloudSettingNotify",(function(t,n){var r=o.getReportSeq();e.dataReport.newReport(r,s.ZegoRTCLogEvent.kZegoTaskCloudSettingRefresh.event);var i=e.rtm.cloudSetting.getEnvVariables();e.dataReport.addMsgInfo(r,{params:i,files:[{name:t,content:n.setting,versions:n.versions}]}),e.dataReport.uploadReport(r),p.RTC}))})),[2]}))}))})),this.rtm._on("roomLoginResponse",(function(e){n.logger.info("zc.rlr call "+JSON.stringify(e));var t=e.header.room_id;n.stateCenter.appid=n.rtm.getAppID(),n.stateCenter.idName=n.rtm.getUserID(),n.stateCenter.testEnvironment=n.rtm.isTestEnvironment(),n.stateCenter.isMultiRoom=n.rtm.getMultiRoom(),n.streamCenter.setSessionInfo(n.stateCenter.appid,n.stateCenter.idName,n.stateCenter.testEnvironment);var r=n.rtm.getToken(t),i=n.rtm.getSessionId(t),o=n.rtm.getRoomSessionID(t),s=n.stateCenter.getRoomByRoomID(t);if(!s){var a=new c.StreamHandler(n.logger,n.stateCenter,n.rtm,n.streamCenter,t);n.bindStreamHandler(a),s={roomID:t,streamHandler:a,sessionID:i,roomSessionID:o,token:r,isResetRoom:!1,streamList:[],streamInfoList:[]},n.stateCenter.roomList.push(s)}s.sessionID=i,s.roomSessionID=o,s.streamHandler.handleStreamStart(e,s),n.logger.info("zc.rlr end "+t)})),this.rtm._on("HBResponse",(function(e){var t,r=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,i=n.stateCenter.getRoomByRoomID(r);"PUBLIC"===n.stateCenter.type&&(null==i||i.streamHandler.patchStreamList(e))})),this.rtm._on("_roomStateUpdate",(function(e,t,r,i){if("DISCONNECTED"==t){n.logger.info("zc.rsu "+e+" disconnected "+(r?r+" ":"")+(i||""));var o=n.stateCenter.getRoomByRoomID(e);if(o){var s=n.stateCenter.roomList.findIndex((function(t){return t.roomID==e}));o.isResetRoom=!0,o.streamHandler.reset(),n.streamCenter.reset(e),n.stateCenter.roomList.splice(s,1)}}else n.logger.info("zc.rsu "+e+" state: "+t)})),this.rtm._on("_tokenRenewed",(function(e,t){n.logger.info("zc.tr roomID:"+t+" "+e);var r=n.stateCenter.getRoomByRoomID(t);r&&(r.token=e)})),this.rtm._on("_tokenExpired",(function(e){var t,r;((null===(r=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.stop_stream)||void 0===r?void 0:r.stream_id_list)||[]).forEach((function(e){n.publishModule.stopPublishingStream(e,h.errorCodeList.TOKEN_EXPIRED)}))})),this.rtm.service.on("stream",(function(e){var t,r=(null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id)||"",i=n.stateCenter.getRoomByRoomID(r);i?i.streamHandler.handleStreamUpdateRsp(e):n.logger.error(d.ZEGO_WEBRTC_ACTION.ON_STREAM+" room no found")})),null===(e=this.rtm.service)||void 0===e||e.on("push_stream_update",(function(e){var t,r=(null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id)||"",i=n.stateCenter.getRoomByRoomID(r);i?i.streamHandler.handlePushStreamUpdateMsg(e):n.logger.error(d.ZEGO_WEBRTC_ACTION.ON_PUSH_STREAM_UPDATE+" room no found")})),null===(t=this.rtm.service)||void 0===t||t.on("zegochat_js.push_room_stream_update_req",(function(e){var t,r=(null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id)||"",i=n.stateCenter.getRoomByRoomID(r);i?i.streamHandler.handlePriPushStreamUpdateMsg(e):n.logger.error(d.ZEGO_WEBRTC_ACTION.ON_STREAM+" room no found")}))},e.prototype.bindStreamCenterHandler=function(){var e=this;this.streamCenter.onPlayStateUpdate=function(t,n,r){var i=e.stateCenter.reportSeqList.startPlay[n],o=e.streamCenter.playerList[n];if(1==t&&o&&a.ClientUtil.isReDispatch(r)){var s=o.player,c=o.retryDispatchHandler,l=o.playOption;return 0!=s.sessionId&&s.signal&&s.shouldSendCloseSession()&&(s.signal.sendCloseSession(e.stateCenter.getSeq(),s.sessionId,1),s.signal.removeSession(s.sessionId),s.closeSessionSignal=!0),s.resetPlay(),c.stopMaxTime(),c.invalid(),c.initStream(n,l,!1),void(e.rtm.isLogin()?(c.startMaxTime(),c.active(0)):e.streamCenter.playerList[n].isReDispatch=!0)}o&&o.player&&(0==t||1==t)&&i&&(e.dataReport.eventEndWithMsgInfo(i,"PlayState",{type:t}),1==t&&r&&e.dataReport.addMsgInfo(i,r),e.dataReport.uploadReport(i),delete e.stateCenter.reportSeqList.startPlay[n]),1===t&&e.streamCenter.playErrorCallBackList[n]?(e.streamCenter.playErrorCallBackList[n]({errorCode:r&&r.code,extendedData:r&&r.message}),delete e.streamCenter.playErrorCallBackList[n],e.logger.info("zc.opsu.1 stop play called by sdk"),e.playModule.stopPlayingStream(n,r)):e.stateCenter.actionListener("playerStateUpdate",{state:a.ClientUtil.getPlayerStateType(t),streamID:n,errorCode:r&&r.code,extendedData:r&&r.message})},this.streamCenter.onPublishStateUpdate=function(t,n,r){e.onPublishStateUpdateHandle(t,n,r)},this.streamCenter.onPublishQualityUpdate=function(t,n){e.stateCenter.actionListener("publishQualityUpdate",t,n)},this.streamCenter.onPlayQualityUpdate=function(t,n){e.stateCenter.actionListener("playQualityUpdate",t,n)},this.streamCenter.onRemoteCameraStatusUpdate=function(t,n,r){var i=o.getReportSeq();e.dataReport.newReport(i,s.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.event),e.dataReport.addMsgInfo(i,{stream:s.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.stream(t),status:s.ZegoRTCLogEvent.kZegoTaskRemoteCameraUpdate.status(n)}),e.dataReport.uploadReport(i),e.stateCenter.actionListener("remoteCameraStatusUpdate",t,n),e.stateCenter.actionListener("_remoteCameraStatusUpdate",t,r)},this.streamCenter.onRemoteMicStatusUpdate=function(t,n,r){var i=o.getReportSeq();e.dataReport.newReport(i,s.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.event),e.dataReport.addMsgInfo(i,{stream:s.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.stream(t),status:s.ZegoRTCLogEvent.kZegoTaskRemoteMicUpdate.status(n)}),e.dataReport.uploadReport(i),e.stateCenter.actionListener("remoteMicStatusUpdate",t,n),e.stateCenter.actionListener("_remoteMicStatusUpdate",t,r)},this.streamCenter.onSoundLevelUpdate=function(t){e.stateCenter.actionListener("soundLevelUpdate",t)},this.streamCenter.onMicSoundLevelUpdate=function(t){e.stateCenter.actionListener("capturedSoundLevelUpdate",t)}},e.prototype.bindStreamHandler=function(e){var t=this;e.onStreamUpdated=function(e,n,r){var i;i="PRIVATE"===t.stateCenter.type?r.map((function(e){return{streamID:e.stream_id,user:{userID:e.user_id,userName:e.user_name},extraInfo:e.extra_info,title:e.title,streamVer:e.stream_ver}})):r.map((function(e){return{streamID:e.streamID,user:e.user,extraInfo:e.extraInfo,urlsFLV:e.urlFlv,urlsRTMP:e.urlRtmp,urlsHLS:e.urlHls,urlsHttpsFLV:e.urlHttpsFlv,urlsHttpsHLS:e.urlHttpsHls}}));var c={};if(0===n){var l=r.map((function(e){return{stream_id:e.streamID,code:o.STREAM_DELETE_REASON[e.closeType]&&o.STREAM_DELETE_REASON[e.closeType].code||0,description:o.STREAM_DELETE_REASON[e.closeType]&&o.STREAM_DELETE_REASON[e.closeType].description||"unknown"}}));c.stream_delete_reason=l}var u=o.getReportSeq();if(t.dataReport.newReport(u,s.ZegoRTCLogEvent.kZegoTaskLiveRoomGetStreamUpdateInfo.event),t.dataReport.addMsgInfo(u,{stream_update_type:s.ZegoRTCLogEvent.kZegoTaskLiveRoomGetStreamUpdateInfo.stream_update_type(1===n?"added":"deleted"),update_stream:s.ZegoRTCLogEvent.kZegoTaskLiveRoomGetStreamUpdateInfo.update_stream(i)}),t.dataReport.uploadReport(u),t.stateCenter.actionListener("roomStreamUpdate",e,a.ClientUtil.getSteamUpdateType(n),i,Object.keys(c).length>0?JSON.stringify(c):""),t.stateCenter.actionListener("_streamUpdated",n,r),1===n){var d=[];i.forEach((function(e){e.extraInfo&&d.push({streamID:e.streamID,user:e.user,extraInfo:e.extraInfo})})),d.length>0&&t.stateCenter.actionListener("streamExtraInfoUpdate",e,d)}},e.onPublishStateUpdate=function(e,n,r){t.logger.info("zb.opsu ",n);var i=t.stateCenter.reportSeqList.startPublish[n],o=t.streamCenter.publisherList[n];o&&o.publisher&&(0==e||1==e)&&i&&(t.dataReport.eventEndWithMsgInfo(i,"PublishState",{type:e}),1==e&&t.dataReport.addMsgInfo(i,r),t.dataReport.uploadReport(i),delete t.stateCenter.reportSeqList.startPublish[n]),t.stateCenter.actionListener("publisherStateUpdate",{state:a.ClientUtil.getPublisherStateType(e),streamID:n,errorCode:r.code,extendedData:r.message})},e.onStreamExtraInfoUpdated=function(e,n){var r;r="PUBLIC"===t.stateCenter.type?n.map((function(e){return{streamID:e.streamID,user:e.user,extraInfo:e.extraInfo}})):n.map((function(e){return{streamID:e.stream_id,user:{userID:e.user_id,userName:e.user_name},extraInfo:e.extra_info,title:e.title,streamVer:e.stream_ver}}));var i=o.getReportSeq();t.dataReport.newReport(i,s.ZegoRTCLogEvent.kZegoTaskLiveRoomGetStreamExtraInfo.event),t.dataReport.addMsgInfo(i,{update_stream:s.ZegoRTCLogEvent.kZegoTaskLiveRoomGetStreamExtraInfo.update_stream(r)}),t.dataReport.uploadReport(i),t.stateCenter.actionListener("streamExtraInfoUpdate",e,r)}},e.prototype.screenStreamFrom=function(e,t,n){var r={};r.audio={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e}},r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxWidth:window.screen.width,maxHeight:window.screen.height}},!t&&(r.audio=!1),navigator.mediaDevices.getUserMedia(r).then((function(e){n(!0,e)})).catch((function(e){n(!1,null,e)}))},e.prototype.onPublishStateUpdateHandle=function(e,t,n){var r=this;this.logger.info("zc.opsuh.0 call");var i=this.streamCenter.publisherList[t],s=i.room;if(s)if(0==e){if(this.stateCenter.publishStreamList[t])if([o.ENUM_PUBLISH_STREAM_STATE.tryPublish,o.ENUM_PUBLISH_STREAM_STATE.retryPublish].includes(this.stateCenter.publishStreamList[t].state)&&!s.streamList.find((function(e){return e.stream_id==t}))){var c;this.stateCenter.publishStreamList[t].state=o.ENUM_PUBLISH_STREAM_STATE.update_info,c="PUBLIC"===this.stateCenter.type?o.ENUM_STREAM_SUB_CMD.liveBegin:o.ENUM_STREAM_CMD_PRI.liveBegin,s.streamHandler.updateStreamInfo(t,c,this.stateCenter.publishStreamList[t].extra_info,(function(e){"PRIVATE"===r.stateCenter.type&&r.stateCenter.publishStreamList[t]&&r.stateCenter.publishStreamList[t].state==o.ENUM_PUBLISH_STREAM_STATE.update_info&&(r.stateCenter.publishStreamList[t].state=o.ENUM_PUBLISH_STREAM_STATE.stop,s.streamHandler.onPublishStateUpdate(1,t,e),r.publishModule.stopPublishingStream(t))}))}else this.stateCenter.publishStreamList[t].state=o.ENUM_PUBLISH_STREAM_STATE.publishing,this.WebrtcOnPublishStateUpdateHandle(e,t,n)}else{if(1==e&&i&&a.ClientUtil.isReDispatch(n)){var l=i.publisher,u=i.retryDispatchHandler,d=i.publishOption;return 0!=l.sessionId&&l.signal&&l.shouldSendCloseSession()&&(l.signal.sendCloseSession(this.stateCenter.getSeq(),l.sessionId,1),l.signal.removeSession(l.sessionId),l.closeSessionSignal=!0),l.resetPublish(),u.stopMaxTime(),u.invalid(),u.initStream(t,d,!0),void(this.rtm.isLogin()?(u.startMaxTime(),u.active(0)):this.streamCenter.publisherList[t].isReDispatch=!0)}s.streamHandler.onPublishStateUpdate(e,t,n),1==e&&(this.logger.info("zc.opsuh.0 stop publish called by sdk"),this.publishModule.stopPublishingStream(t,n))}else this.logger.error("zc.opsuh.0 room not exist")},e.prototype.WebrtcOnPublishStateUpdateHandle=function(e,t,n){if(this.stateCenter.publishStreamList[t].state==o.ENUM_PUBLISH_STREAM_STATE.publishing){var r=this.streamCenter.getRoomByStreamID(t);r&&r.streamHandler.onPublishStateUpdate(e,t,n)}},e.prototype.bindListener=function(e,t){return this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error("zc.o.0 listener callBack must be funciton"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),!0):(this.logger.error("zc.o.0 event "+e+" no found"),!1)},e.prototype.deleteListener=function(e,t){if(!this.stateCenter.listenerList[e])return this.logger.error("zc.o.1 listener no found"),!1;var n=this.stateCenter.listenerList[e];return t?n.splice(n.indexOf(t),1):this.stateCenter.listenerList[e]=[],!0},e}();t.RTCModules=f},4865:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayModule=void 0;var i=n(1089),o=n(6706),s=n(3529),a=n(608),c=function(){function e(e,t,n,r,i){this.logger=e,this.dataReport=t,this.stateCenter=n,this.streamCenter=r,this.rtm=i}return e.prototype.startPlayingStream=function(e,t,n){var r=this;return this.logger.info(i.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" call ",e),new Promise((function(i,o){return r._handlePlayStream(e,t,i,o,n)}))},e.prototype._handlePlayStream=function(e,t,n,c,l){var u=this,d=o.getReportSeq();this.stateCenter.reportSeqList.startPlay[e]=d,this.dataReport.newReport(d,s.ZegoRTCLogEvent.kZegoTaskPlayStart.event);var h,p=function(t,n){u.logger.error(i.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM+" "+(n||t.message)),u.dataReport.uploadReport(d,void 0,t,n),delete u.stateCenter.reportSeqList.startPlay[e],c&&c(r(r({},t),{errorCode:t.code,extendedData:t.message+(n?" "+n:"")}))};if(void 0===e||"string"!=typeof e||""===e)return p(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayParamError,"stream id type error"),!1;if(e.length>o.MAX_STREAM_ID_LENGTH)return p(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayStreamIDToLongError,"stream id length limit "+o.MAX_STREAM_ID_LENGTH),!1;if(!a.ClientUtil.checkIllegalCharacters(e))return p(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayStreamIDInvalidCharacterError),!1;if(void 0!==t&&"object"!=typeof t)return p(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayParamError,"playOption must be object"),!1;if(this.stateCenter.customUrl&&0!=this.stateCenter.customUrl.length)this.logger.info("zc.p.sps.1 customUrl "+JSON.stringify(this.stateCenter.customUrl)),h=this.stateCenter.customUrl;else{var f=this.stateCenter.settingConfig.getSetting("signal_nodes",!0);f&&f instanceof Array&&f.length>0&&(h=f,this.logger.info("zc.p.sps.1 setting config signal_nodes "+JSON.stringify(f)))}if(h)return this.streamCenter.setPlayStateStart(e,t,l)?(this.streamCenter.onPlayStateUpdate(o.ENUM_PLAY_STATE_UPDATE.retry,e,{code:0,message:""}),this.streamCenter.playerList[e].serverUrls=h,this.streamCenter.startPlayingStream(e,(function(e){n&&n(e)}))):(p(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayRepeatedPullError,"cannot start play"),!1);if(this.dataReport.addMsgInfo(d,{stream:s.ZegoRTCLogEvent.kZegoTaskPlayStart.stream(e),playOption:s.ZegoRTCLogEvent.kZegoTaskPlayStart.playOption(t)}),this.rtm.service.isDisConnect())return p(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNoLoginError),!1;this.stateCenter.pullLimited||(e=NaN+e),t&&t.videoCodec&&(t.videoCodec=t.videoCodec.toUpperCase());var g=this.stateCenter.settingConfig.getSetting("resource_mode",!0);if(g&&(this.logger.info(i.ZEGO_WEBRTC_ACTION.START_PLAYING_STREAM," setting resource_mode "+g),!t&&(t={}),t.resourceMode=g),!this.streamCenter.setPlayStateStart(e,t,l))return p(s.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayRepeatedPullError,"cannot start play"),!1;this.streamCenter.onPlayStateUpdate(o.ENUM_PLAY_STATE_UPDATE.retry,e,{code:0,message:""}),this.streamCenter.playSuccessCallBackList[e]=function(e){n&&n(e)},c&&(this.streamCenter.playErrorCallBackList[e]=c);var m=this.streamCenter.playerList[e].retryDispatchHandler;return m.stopMaxTime(),m.invalid(),m.initStream(e,t,!1),m.startMaxTime(),m.active(0)},e.prototype.stopPlayingStream=function(e,t){this.logger.info(i.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call",e);var n=o.getReportSeq();if(this.stateCenter.reportSeqList.stopPlay[e]=n,this.dataReport.newReport(n,s.ZegoRTCLogEvent.kZegoTaskPlayStop.event),this.dataReport.addMsgInfo(n,{stream:s.ZegoRTCLogEvent.kZegoTaskPlayStop.stream(e)}),"string"!=typeof e||""===e)return this.logger.error(i.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" streamid must be string and not empty"),this.dataReport.uploadReport(n,void 0,s.ZegoRTCLogEvent.kZegoTaskPlayStop.error.kParamError,"stream id type error"),void delete this.stateCenter.reportSeqList.stopPlay[e];var r=this.streamCenter.playerList[e],a=r&&r.player&&r.player.state!==o.ENUM_PLAY_STATE.stop;for(var c in this.streamCenter.stopPlayingStream(e),this.stateCenter.streamUrlMap)if(this.stateCenter.streamUrlMap[c]===e){delete this.stateCenter.streamUrlMap[c];break}this.dataReport.uploadReport(n),a&&this.streamCenter.onPlayStateUpdate(o.ENUM_PLAY_STATE_UPDATE.error,e,t||{code:0,message:""}),this.logger.debug(i.ZEGO_WEBRTC_ACTION.STOP_PLAYING_STREAM+" call success")},e.prototype.mutePlayStream=function(e,t,n){return new Promise((function(e,t){e(!1)}))},e.prototype.setStreamAudioOutput=function(e,t){return!1},e}();t.PlayModule=c},5634:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayStreamQuality=void 0;var r=n(6706),i=n(1089),o=n(3529),s=n(608),a=function(){function e(e,t,n,i){this.player=t,this.logger=n,this.dataReport=i,this.playQualityList=[],this.maxQualityListCount=10,this.qualityTimer=null,this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,audioPacketsReceived:0,videoPacketsReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0,audioBitrate:0},this.decodeStartTime=0,this.netQuality=0,this.probeTime=0,this.probeInterval=6e4,this.probeState=r.ENUM_PROBE_STATE.probed,this.probeTimer=null,this.probeTimeoutInterval=3e4,this.qualityUpload=!1,this.qualityUploadInterval=3e4,this.qualityUploadLastTime=0,this.cumulativeQuality={},this.audioBreakThreshold=200,this.videoBreakThreshold=500,this.videoBreak={breakStartTime:void 0,cumulativeBreakDuration:0,cumulativeDecodeDuration:0,decodeStartTime:void 0,decodeEndTime:void 0,totalDuration:0,noBreakNoDecodeDuration:0,resumeRecv:!0},this.audioBreak={breakStartTime:void 0,cumulativeBreakDuration:0,cumulativeDecodeDuration:0,decodeStartTime:void 0,decodeEndTime:void 0,totalDuration:0,noBreakNoDecodeDuration:0,resumeRecv:!0},this.lastSampleTime=0,this.videoBreakReport={breakDuration:0,breakCancelDuration:0,decodeTime:0},this.audioBreakReport={breakDuration:0,breakCancelDuration:0,decodeTime:0},this.totalQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0,audioBytesReceived:0},this.currentSecondQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0},this.onBreakEnd=function(e,t,n,r){if(void 0===r&&(r="video"),t.breakStartTime){var i=e-t.breakStartTime;i>=n&&(t.cumulativeBreakDuration+=i),t.breakStartTime=void 0}},this.p2pNetStats={p2pLostRate:0,p2pRTT:0},this.sampleTimes=0,this.qualitySampleInterval=1e3,this.qualityTimeInterval=e}return Object.defineProperty(e.prototype,"streamId",{get:function(){return this.player.streamId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.player.sessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"peerID",{get:function(){return this.player.peerID},enumerable:!1,configurable:!0}),e.prototype.getPlayStats=function(e,t){var n=this;if(null!=e){var a=this.sampleTimes%parseInt((this.qualityTimeInterval/this.qualitySampleInterval).toString())==0;this.sampleTimes,parseInt((this.qualityTimeInterval/this.qualitySampleInterval).toString()),a&&this.getP2PNetStats();for(var c,l=document.querySelectorAll("video, audio"),u=0;u<l.length;u++)l[u].srcObject===this.player.playStream&&(c=l[u]);var d={sampleTimeWindow:this.qualityTimeInterval,audioFractionLost:0,audioPacketsLost:0,audioPacketsLostRate:0,audioBitrate:0,audioLevel:0,audioSendLevel:0,audioSamplingRate:0,audioCodec:"opus",audioQuality:0,audioFPS:0,videoQuality:0,videoPacketsLost:0,videoPacketsLostRate:0,videoBitrate:0,videoFPS:0,playData:0,nackCount:0,pliCount:0,audioJitter:0,videoFractionLost:0,videoFramesDecoded:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoFramesDropped:0,totalRoundTripTime:0,currentRoundTripTime:0,googBandwidthLimitedResolution:void 0,videoCodecName:"",audioCodecName:"",googCpuLimitedResolution:void 0,googAvailableSendBandwidth:0,audioMuteState:this.player.audioMuteState,videoMuteState:this.player.videoMuteState,muted:c?c.muted:void 0,paused:c?c.paused:void 0,volume:c?c.volume:void 0,sinkId:c?c.sinkId:void 0},h=this.lastPlayStats.time,p=0,f=0,g=0,m=0,_=0,v=0,E=0,A=null,y=null;e.forEach((function(e){["ssrc","inbound-rtp"].includes(e.type)&&("video"==e.mediaType||e.id.indexOf("VideoStream")>=0)&&(A=e),("inbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesReceived)&&("audio"==e.mediaType||e.id.indexOf("AudioStream")>=0)&&(y=e)}));var S=function(e,t,r,o,s,a,c,l,u){if(void 0===l&&(l=c),void 0===u&&(u="video"),s>1e3&&(s=1e3),o.breakStartTime)if(r)if(0===t)e-o.breakStartTime>=22e3&&n.onBreakEnd(e,o,s,u),a.breakDuration+=1e3;else if(c>=s)if(c<500)if(c+l<1e3){var d=e-(1e3-l);n.onBreakEnd(d,o,s,u),o.breakStartTime=e-c,a.breakDuration+=l+c,a.decodeTime+=1e3-(l+c)}else n.onBreakEnd(e-1e3+l,o,s,u),o.breakStartTime=e-1e3+l,a.breakDuration+=1e3;else c>=500&&(n.onBreakEnd(e-c,o,s,u),o.breakStartTime=e-c,a.breakDuration+=1e3);else l<=s?(n.onBreakEnd(e-1e3+l,o,s,u),o.breakStartTime=void 0,a.breakDuration+=l,a.decodeTime+=1e3-l):a.breakDuration+=1e3;else{o.resumeRecv=!1;var h=e-1e3,p=h-o.breakStartTime;p<=0&&(n.logger.error(i.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" breakCancelDuration less than 0.  ("+o.breakStartTime+", "+h+")"),p=0),o.breakStartTime=void 0,o.noBreakNoDecodeDuration+=p,a.breakCancelDuration+=p}else r?0===t?o.resumeRecv?(o.breakStartTime=e-1e3,a.breakDuration+=1e3):o.noBreakNoDecodeDuration+=1e3:l>s?o.resumeRecv?(o.breakStartTime=e-l,a.breakDuration+=l,a.decodeTime+=1e3-l):o.noBreakNoDecodeDuration+=1e3:a.decodeTime+=1e3:o.decodeStartTime&&(0===t?(o.resumeRecv=!1,o.noBreakNoDecodeDuration+=1e3):a.decodeTime+=1e3);r&&t&&(o.resumeRecv=!0)},b=(new Date).getTime(),C=function(e,t){return e>t?e-t:0};this.lastSampleTime||(this.lastSampleTime=b-1e3);var T=A.totalInterFrameDelay,I=A.framesDecoded,R=A.totalSquaredInterFrameDelay,w=C(I,this.totalQuality.framesDecode);this.totalQuality.framesDecode=I;var k=C(T,this.totalQuality.totalInterFrameDelay);this.totalQuality.totalInterFrameDelay=T;var O=C(R,this.totalQuality.totalSquaredInterFrameDelay);this.totalQuality.totalSquaredInterFrameDelay=R;var N=(O-Math.pow(k,2)/(w||1))/(w||1);N=N>0?N:-N;var L=parseInt((1e3/(w+1)).toString()),P=1e3*Math.sqrt(N),D=k/(w||1)*1e3||L,M=(D=parseInt((D>1e3?1e3:D).toString()))+P;M=parseInt((M>1e3?1e3:M).toString()),w>0&&0===this.player.cameraStatus&&!this.videoBreak.decodeStartTime&&(this.videoBreak.decodeStartTime=b-1e3),this.videoBreak.decodeStartTime&&S(b,w,0===this.player.cameraStatus&&this.player.playMediaStatus.video,this.videoBreak,this.videoBreakThreshold,this.videoBreakReport,D,M);var x=y.totalSamplesReceived,B=y.concealedSamples,U=y.bytesReceived,F=C(x,this.totalQuality.totalSamplesReceived);this.totalQuality.totalSamplesReceived=x;var V=C(B,this.totalQuality.concealedSamples);this.totalQuality.concealedSamples=B;var j=C(U,this.totalQuality.audioBytesReceived);this.totalQuality.audioBytesReceived=U;var G=parseInt((V/(F||1)*1e3).toString());if(j>0&&0===this.player.micStatus&&!this.audioBreak.decodeStartTime&&(this.audioBreak.decodeStartTime=b-1e3),this.audioBreak.decodeStartTime&&S(b,j,0===this.player.micStatus&&this.player.playMediaStatus.audio,this.audioBreak,this.audioBreakThreshold,this.audioBreakReport,G,G,"audio"),t&&t.result().forEach((function(e){a&&("ssrc"==e.type&&(e.names().indexOf("googBandwidthLimitedResolution")>=0&&(d.googBandwidthLimitedResolution=e.stat("googBandwidthLimitedResolution")),e.names().indexOf("codecImplementationName")>=0&&(d.codecImplementationName=e.stat("codecImplementationName")),"video"==e.stat("mediaType")&&(e.names().indexOf("googCodecName")>=0&&(d.videoCodecName=e.stat("googCodecName")),e.names().indexOf("googCurrentDelayMs")>=0&&(E=e.stat("googCurrentDelayMs"))),"audio"==e.stat("mediaType")&&(e.names().indexOf("googCodecName")>=0&&(d.audioCodecName=e.stat("googCodecName")),e.names().indexOf("googCurrentDelayMs")>=0&&(v=e.stat("googCurrentDelayMs"))),e.names().indexOf("googCpuLimitedResolution")>=0&&(d.googCpuLimitedResolution=e.stat("googCpuLimitedResolution"))),"VideoBwe"==e.type&&e.names().indexOf("googAvailableSendBandwidth")>=0&&(d.googAvailableSendBandwidth=e.stat("googAvailableSendBandwidth")))})),a){e.forEach((function(e){if(("inbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesReceived)&&("audio"==e.mediaType||e.id.indexOf("AudioStream")>=0)){0!=h&&(d.audioBitrate=8*(e.bytesReceived-n.lastPlayStats.audioBytesReceived)/(e.timestamp-h),(i=e.packetsLost-n.lastPlayStats.audioPacketsLost)>0&&(f=i/(i+e.packetsReceived-n.lastPlayStats.audioPacketsReceived))),d.audioBitrate<0&&(d.audioBitrate=0),d.audioJitter=e.jitter,e.packetsLost>0&&(d.audioPacketsLost=e.packetsLost),d.audioFractionLost=e.fractionLost;var t=e.packetsLost-n.lastPlayStats.audioPacketsLost;d.audioFPS=(e.packetsReceived-n.lastPlayStats.audioPacketsReceived)/(e.timestamp-h)*1e3,d.audioPacketsLostRate=t>0?t/(e.packetsReceived-n.lastPlayStats.audioPacketsReceived+t):0,n.lastPlayStats.audioBytesReceived=e.bytesReceived,e.packetsLost>0&&(n.lastPlayStats.audioPacketsLost=e.packetsLost),n.lastPlayStats.audioPacketsReceived=e.packetsReceived,n.lastPlayStats.audioTime=e.timestamp,n.lastPlayStats.time=e.timestamp,n.lastPlayStats.audioBitrate=d.audioBitrate,m=e.jitter}else if(("inbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesReceived)&&("video"==e.mediaType||e.id.indexOf("VideoStream")>=0)){var i;0!=h&&(d.videoBitrate=8*(e.bytesReceived-n.lastPlayStats.videoBytesReceived)/(e.timestamp-h),d.videoFPS=1e3*(e.framesDecoded-n.lastPlayStats.framesDecoded)/(e.timestamp-h),(i=e.packetsLost-n.lastPlayStats.videoPacketsLost)>0&&(g=i/(i+e.packetsReceived-n.lastPlayStats.videoPacketsReceived))),d.videoBitrate<0&&(d.videoBitrate=0),d.videoFPS<0&&(d.videoFPS=0),d.nackCount=e.nackCount,d.pliCount=e.pliCount,d.videoFractionLost=e.fractionLost,d.videoFramesDecoded=e.framesDecoded,e.packetsLost>0&&(d.videoPacketsLost=e.packetsLost),t=e.packetsLost-n.lastPlayStats.videoPacketsLost,d.videoPacketsLostRate=t>0?t/(e.packetsReceived-n.lastPlayStats.videoPacketsReceived+t):0,n.lastPlayStats.videoBytesReceived=e.bytesReceived,n.lastPlayStats.framesDecoded=e.framesDecoded,e.packetsLost>0&&(n.lastPlayStats.videoPacketsLost=e.packetsLost),n.lastPlayStats.videoPacketsReceived=e.packetsReceived,n.lastPlayStats.videoTime=e.timestamp,n.lastPlayStats.time=e.timestamp,_=e.jitter}else if("track"==e.type&&("video"==e.kind||e.id.indexOf("video")>=0)||e.frameWidth){if(d.frameHeight=e.frameHeight,d.frameWidth=e.frameWidth,0===h||n.lastPlayStats.frameHeight===e.frameHeight&&n.lastPlayStats.frameWidth===e.frameWidth)0===h&&(n.lastPlayStats.frameHeight=e.frameHeight,n.lastPlayStats.frameWidth=e.frameWidth);else{var s=r.getReportSeq();n.dataReport.newReport(s,o.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.event),n.dataReport.addMsgInfo(s,{session_id:o.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.session_id(n.sessionId),w:o.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.w(e.frameWidth),h:o.ZegoRTCLogEvent.kZegoTaskVideoPlaySize.h(e.frameHeight)}),!n.player.isProbe&&n.dataReport.uploadReport(s),n.lastPlayStats.frameHeight=e.frameHeight,n.lastPlayStats.frameWidth=e.frameWidth}0!=h&&(d.videoTransferFPS=1e3*(e.framesReceived-n.lastPlayStats.framesReceived)/(e.timestamp-h),d.videoFramesDropped=e.framesDropped-n.lastPlayStats.framesDropped),d.videoTransferFPS<0&&(d.videoTransferFPS=0),d.videoFramesDropped<0&&(d.videoFramesDropped=0),n.lastPlayStats.framesReceived=e.framesReceived,n.lastPlayStats.framesDropped=e.framesDropped}else"track"==e.type&&("audio"==e.kind||e.id.indexOf("audio")>=0)?(d.audioLevel=e.audioLevel,d.audioSendLevel=e.totalAudioEnergy,d.audioSamplingRate=e.totalSamplesDuration):"candidate-pair"==e.type&&(null!=e.totalRoundTripTime&&(d.totalRoundTripTime=e.totalRoundTripTime),null!=e.currentRoundTripTime&&(d.currentRoundTripTime=e.currentRoundTripTime,p=1e3*d.currentRoundTripTime))})),this.lastPlayStats.googCurrentDelayMs=Number(v)||Number(E)||0,g=isNaN(g)||g<0?0:g,_=isNaN(_)||_<0?0:_,f=isNaN(f)||f<0?0:f,m=isNaN(m)||m<0?0:m;var H=s.ClientUtil.getNetQuality(p,g,_),Q=s.ClientUtil.getNetQuality(p,f,m);d.audioQuality=h>0?s.ClientUtil.quality2QualityGrade(H):0,d.videoQuality=h>0?s.ClientUtil.quality2QualityGrade(Q):0;var W=Math.min(H,Q);this.netQuality=W,d.peerToPeerDelay=isNaN(this.p2pNetStats.p2pRTT)?0:parseInt((this.p2pNetStats.p2pRTT/2+this.lastPlayStats.googCurrentDelayMs).toString()),d.peerToPeerPacketLostRate=100*this.p2pNetStats.p2pLostRate/256,h>0&&W<=r.QUALITY_CONSTANT.MiddleMinQuality&&b>this.probeTime+this.probeInterval&&(this.logger.info(i.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" netQuality "+W+" start net probe"),this.probeState=r.ENUM_PROBE_STATE.tryProbe,this.player.streamCenter.startNetProbe(!1,this.player,this.player.gwNodeList),this.probeTime=b),this.uploadPlayQuality(d,b);var q={video:{videoBitrate:d.videoBitrate,videoFPS:d.videoFPS,videoTransferFPS:d.videoTransferFPS,videoFramesDecoded:d.videoFramesDecoded,videoFramesDropped:d.videoFramesDropped,videoPacketsLost:d.videoPacketsLost,videoPacketsLostRate:d.videoPacketsLostRate,videoQuality:d.videoQuality,frameHeight:d.frameHeight,frameWidth:d.frameWidth,muteState:d.videoMuteState},audio:{audioBitrate:d.audioBitrate,audioCodec:d.audioCodec,audioJitter:d.audioJitter,audioLevel:d.audioLevel,audioPacketsLost:d.audioPacketsLost,audioPacketsLostRate:d.audioPacketsLostRate,audioQuality:d.audioQuality,audioSamplingRate:d.audioSamplingRate,audioSendLevel:d.audioSendLevel,muteState:d.audioMuteState,audioFPS:d.audioFPS},nackCount:d.nackCount,pliCount:d.pliCount,totalRoundTripTime:d.totalRoundTripTime,playData:d.playData,currentRoundTripTime:d.currentRoundTripTime,peerToPeerDelay:d.peerToPeerDelay,peerToPeerPacketLostRate:d.peerToPeerPacketLostRate,sampleTimeWindow:d.sampleTimeWindow};void 0!==d.muted&&(q.muted=d.muted,q.paused=d.paused,q.volume=d.volume,q.sinkId=d.sinkId),void 0!==d.videoCodecName&&(q.video.googCodecName=d.videoCodecName,q.audio.googCodecName=d.audioCodecName,q.codecImplementationName=d.codecImplementationName,q.googAvailableSendBandwidth=d.googAvailableSendBandwidth),0!=h&&this.player.onPlayQualityUpdate(this.streamId,q)}}},e.prototype.uploadPlayQuality=function(e,t){var n=this;if(this.qualityUpload){var o=t;(0==this.qualityUploadLastTime||o-this.qualityUploadLastTime>=this.qualityUploadInterval)&&(e.stream_type="play",e.stream_id=this.streamId,e.timeStamp=parseInt((o/1e3).toString()),e.video_break_duration=this.videoBreakReport.breakDuration,e.video_break_cancel_duration=this.videoBreakReport.breakCancelDuration,e.video_decode_time=this.videoBreakReport.decodeTime,this.videoBreakReport.breakCancelDuration=0,this.videoBreakReport.breakDuration=0,this.videoBreakReport.decodeTime=0,e.audio_break_duration=this.audioBreakReport.breakDuration,e.audio_break_cancel_duration=this.audioBreakReport.breakCancelDuration,e.audio_decode_time=this.audioBreakReport.decodeTime,this.audioBreakReport.breakCancelDuration=0,this.audioBreakReport.breakDuration=0,this.audioBreakReport.decodeTime=0,e.real_sampling_interval=o-this.lastSampleTime,this.lastSampleTime=o,this.logger.info(i.ZEGO_WEBRTC_ACTION.PLAYER_UPLOAD_PLAYER_QUALITY+" "+this.streamId+" upload"+JSON.stringify(e)),this.player.streamCenter.updateQuality(1,e),this.player.signal.QualityReport(r.getSeq(),this.sessionId,e,(function(e,t,r){void 0!==r.report&&(n.qualityUpload=r.report,n.qualityUploadInterval=r.report_interval_ms)}),(function(e){n.logger.info(i.ZEGO_WEBRTC_ACTION.PLAYER_UPLOAD_PLAYER_QUALITY+" "+n.streamId+" upload failed "+e)})),this.qualityUploadLastTime=o)}},e.prototype.getP2PNetStats=function(){var e=this;this.player.signal.getP2PNetStats(r.getSeq(),this.sessionId,this.peerID,(function(t,n,r){var i=r.p2p_lost_rate,o=r.p2p_rtt;e.p2pNetStats.p2pLostRate=i||0,e.p2pNetStats.p2pRTT=o||0}),(function(e){}))},e.prototype.setPlayQualityTimer=function(){var e=this;null==this.qualityTimer&&(this.logger.info(i.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" "+this.streamId+" startTimer"),this.clearPlayQualityTimer(),this.getP2PNetStats(),this.qualityTimer=setInterval((function(){e.sampleTimes++;var t=e.player.peerConnection;if(t){var n=[t.getStats(null)];"chrome"==e.player.stateCenter.browser&&n.push(new Promise((function(e,n){t.getStats((function(t){return e(t)}),(function(e){return n(e)}))}))),Promise.all(n).then((function(t){e.getPlayStats(t[0],t[1])})).catch((function(t){e.logger.error(i.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" "+e.streamId+" getStats error "+t.toString())}))}}),1e3),this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,videoPacketsReceived:0,audioPacketsReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0,audioBitrate:0})},e.prototype.clearPlayQualityTimer=function(){if(null!=this.qualityTimer){clearInterval(this.qualityTimer),this.qualityTimer=null;var e=(new Date).getTime();this.lastSampleTime=0,this.sampleTimes=0,this.totalQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0,audioBytesReceived:0};var t=function(t,n,r,i,o){if(void 0===o&&(o="video"),r=r>1e3?1e3:r,n.breakDuration=0,n.breakCancelDuration=0,n.decodeTime=0,t.decodeStartTime){var s=e,a=s-t.decodeStartTime;if(t.decodeStartTime=void 0,t.totalDuration+=a,t.breakStartTime){var c=s-t.breakStartTime;t.breakStartTime=void 0,i?c>r&&(t.cumulativeBreakDuration+=c):t.noBreakNoDecodeDuration+=c}var l=t.cumulativeBreakDuration,u=t.totalDuration-t.cumulativeBreakDuration-t.noBreakNoDecodeDuration;return t.cumulativeDecodeDuration=u,{cumulativeBreakDuration:l,cumulativeDecodeDuration:u}}return{cumulativeBreakDuration:0,cumulativeDecodeDuration:0}},n=0===this.player.cameraStatus&&this.player.playMediaStatus.video;t(this.videoBreak,this.videoBreakReport,this.videoBreakThreshold,n);var r=0===this.player.micStatus&&this.player.playMediaStatus.audio;t(this.audioBreak,this.audioBreakReport,this.audioBreakThreshold,r,"audio")}this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,videoPacketsReceived:0,audioPacketsReceived:0,framesDecoded:0,framesDropped:0,framesReceived:0,audioBitrate:0}},e.prototype.startProbeTimeout=function(){var e=this;this.probeTimer=setTimeout((function(){e.logger.error(i.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" probe timeout"),e.player.playStateUpdateError(o.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kProbeTimeOutError)}),this.probeTimeoutInterval)},e.prototype.stopProbeTimeout=function(){this.probeTimer&&(clearTimeout(this.probeTimer),this.probeTimer=null)},e}();t.PlayStreamQuality=a},3849:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoPlayWeb=void 0;var i=n(6706),o=n(4767),s=n(608),a=n(3529),c=n(1089),l=n(5634),u=function(){function e(e,t,n,r,o,s,a){this.state=i.ENUM_PLAY_STATE.stop,this.candidateInfo=[],this.broadcasterStatus=i.ENUM_BROADCASTER_STATUS.stop,this.playQualityList=[],this.maxQualityListCount=10,this.reportSeq=NaN,this.streamReportSeq=i.getSeq(),this.videoSizeCallback=!1,this.remoteStream=null,this.playStream=null,this.playOption={},this.playMediaStatus={video:!0,audio:!0},this.closeSessionSignal=!1,this.stateNego=i.ENUM_PLAY_STATE_NEGO.stop,this.negoTimer=null,this.negoInterval=25e3,this.cameraStatus=0,this.micStatus=0,this.hasSentStreamStatus=!1,this.playEvent=!1,this.gotStreamStatus=!1,this.soundLevel=0,this.mic=null,this.script=null,this.beginTime=0,this.firstFrameTime=0,this.resourceMode=0,this.gwNode="",this.gwNodeList=[],this.gwNodeTTL=0,this.isPeer=!1,this.peerFailCount=0,this.isProbe=!1,this.peerID=0,this.isRecvClientInfo=!1,this.audioMuteState="0",this.videoMuteState="0",this.first_pkt=!0,this.next_sn=[],this.pkt_list=[],this.onDataChannelList=[],this.iceDisconnectedMaxTime=15e3,this.logger=e,this.signal=t,this.dataReport=n,this.streamCenter=o,this.ac=s,this.stateCenter=a,this.dataReport.newReport(this.streamReportSeq),this.dataReport.addMsgInfo(this.streamReportSeq,{abs_time:Date.now()}),this.qualityHandler=new l.PlayStreamQuality(r,this,this.logger,this.dataReport),this.resourceMode=this.stateCenter.settingConfig.getSetting("resource_mode")}return Object.defineProperty(e.prototype,"probeState",{get:function(){return this.qualityHandler.probeState},set:function(e){this.qualityHandler.probeState=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"netQuality",{get:function(){return this.qualityHandler.netQuality},set:function(e){this.qualityHandler.netQuality=e},enumerable:!1,configurable:!0}),e.prototype.startPlay=function(e,t,n){var r=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" called ",e),this.playEvent=!1,this.signal&&this.signal.negoInterval&&(this.negoInterval=this.signal.negoInterval),e){this.streamId=e,this.getRemoteStreamSuc=t,this.playOption=n||{},this.playMediaStatus={video:void 0===this.playOption.video||!!this.playOption.video,audio:void 0===this.playOption.audio||!!this.playOption.audio},n&&n.videoCodec&&(this.playOption.videoCodec=n.videoCodec);var i=this.stateCenter.settingConfig.getSetting("play_video_codec",!0);i&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" setting play_video_codec "+i),this.playOption.videoCodec=i),this.dataReport.addMsgInfo(this.reportSeq,{audio_activate:a.ZegoRTCLogEvent.kZegoTaskPlayStart.audio_activate(1==this.playOption.audio?1:0==this.playOption.audio?0:1),video_activate:a.ZegoRTCLogEvent.kZegoTaskPlayStart.video_activate(1==this.playOption.video?1:0==this.playOption.video?0:1)}),this.isPeer?this.createOffer():this.createSession(),this.negoTimer=setTimeout((function(){r.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" waiting timeout"),r.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNegoTimeoutError)}),this.negoInterval),this.isProbe&&this.qualityHandler.startProbeTimeout()}else this.logger.warn(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" streamId is null")},e.prototype.onCreatePlaySessionSuccess=function(e){var t=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+this.streamId+" success");var n=[];if(e.turn_server){var r=e.turn_server,i=this.stateCenter.turnOverTcpOnly,o=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);o&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" setting udp_or_tcp "+o),i="tcp"===o),i&&(r=r.replace("udp","tcp")),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" turn over tcp "+r),n.push(r)}e.stun_server&&n.push(e.stun_server);var s={iceTransportPolicy:"relay",iceServers:[{urls:n,username:e.turn_username,credential:e.turn_auth_key}]};this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+this.streamId+" username: "+e.turn_username),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+this.streamId+" credential: "+e.turn_auth_key),this.createOffer(s),this.signal.registerPushCallback("MediaDescPush",this.sessionId,(function(e,n,r){t.onRecvMediaDesc(e,n,r)})),this.signal.registerPushCallback("CandidateInfoPush",this.sessionId,(function(e,n,r){t.onRecvCandidateInfo(e,n,r)})),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,n,r){t.onRecvCloseSession(e,n,r)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,n,r){t.onRecvResetSession(e,n,r)})),this.signal.registerPushCallback("StreamStatusNotifyPush",this.sessionId,(function(e,n,r){t.gotStreamStatus=!0,t.streamStatus=r,t.playStream&&t.onRecvStreamStatus(r)})),this.signal.registerPushCallback("PlayEventPush",this.sessionId,(function(e,n,r){t.onRecvPlayEvent(e,n,r)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,n,r){t.onRecvClientInfo(e,n,r)})),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+this.streamId+" call success")},e.prototype.createOffer=function(e){var t=this;this.peerConnection=new RTCPeerConnection(e),this.peerConnection.onicecandidate=function(e){t.onIceCandidate(e)},this.peerConnection.onsignalingstatechange=function(e){t.onConnectionStateChange(e)},this.peerConnection.oniceconnectionstatechange=function(e){t.onIceConnectionStateChange(e)},this.peerConnection.ontrack=function(e){t.onGotRemoteStream(e.streams[0])},this.streamCenter.isDataChannelEnabled&&(this.dataChannel=this.peerConnection.createDataChannel(this.streamId),this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=function(e){t.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+t.streamId+" data channel open")},this.dataChannel.onmessage=function(e){if(t.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+t.streamId+" data channel onmessage"),e.data instanceof Blob){var n=new FileReader,r={};n.readAsArrayBuffer(e.data),n.onload=function(){r.data=n.result,t.onReceivedDataChannel(r)}}else t.onReceivedDataChannel(e)});var n={offerToReceiveAudio:1,offerToReceiveVideo:1};this.playOption&&!1===this.playOption.video&&(n.offerToReceiveVideo=0),this.playOption&&!1===this.playOption.audio&&(n.offerToReceiveAudio=0),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+this.streamId+" createOffer: "+JSON.stringify(n)),this.dataReport.eventStart(this.reportSeq,"CreateOffer"),this.dataReport.eventStart(this.streamReportSeq,"CreateOffer"),this.peerConnection.createOffer(n).then((function(e){t.dataReport.eventEnd(t.reportSeq,"CreateOffer"),t.dataReport.eventEnd(t.streamReportSeq,"CreateOffer"),t.onCreateOfferSuccess(e)}),(function(e){t.dataReport.eventEndWithMsg(t.reportSeq,"CreateOffer",{error:e.toString()}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"CreateOffer",{error:e.toString()}),t.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS+" "+t.streamId+" create offer error "+e.toString()),t.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kCreateOfferError,!0)}))},e.prototype.createSession=function(e){var t=this;this.sessionSeq=i.getSeq();var n=this.streamId;1==this.streamCenter.testEnvironment&&(n="zegotest-"+this.streamCenter.appid+"-"+this.streamId);var r=this.stateCenter.settingConfig.getSetting("gw_nodes");if(r&&r instanceof Array&&r.length>0&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" setting "+JSON.stringify(r)),this.gwNodeList=r,this.gwNode=this.gwNodeList[0]||this.gwNode),this.isPeer){this.dataReport.eventStart(this.reportSeq,"CreateSessionWithSdp"),this.dataReport.eventStart(this.streamReportSeq,"CreateSessionWithSdp");var o=this.stateCenter.settingConfig.getSetting("l3_play_buffer_ms");this.signal.createSessionWithSdp({seq:this.sessionSeq,type:this.isProbe?2:1,mode:0,streamId:n,strAuthParam:this.playOption&&this.playOption.streamParams||"",sdp:e.sdp,serverHost:this.gwNode,playBufLevel:2==this.resourceMode?o:void 0},(function(e,n,r){t.handleCreateSessionWithSdpResp(e,n,r)}),(function(n,r){t.dataReport.eventEndWithMsg(t.reportSeq,"CreateSession",{error:n}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"CreateSession",{error:n}),!t.isProbe&&n==i.SEND_MSG_TIMEOUT&&t.peerFailCount<2?(t.peerFailCount++,t.createSession(e)):!t.isProbe&&n==i.SEND_MSG_TIMEOUT&&t.peerFailCount>=2?(t.isPeer=!1,t.streamCenter.isPeer=!1,t.createSession()):t.playStateUpdateError(n==i.SEND_MSG_TIMEOUT?a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionTimeoutError:a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionRequestError)}))}else this.dataReport.eventStart(this.reportSeq,"CreateSession"),this.dataReport.eventStart(this.streamReportSeq,"CreateSession"),this.signal.createSession(this.sessionSeq,1,0,n,this.playOption&&this.playOption.streamParams,this.gwNode,(function(e,n,r){t.handleCreateSessionResp(e,n,r)}),(function(e,n){t.dataReport.eventEndWithMsg(t.reportSeq,"CreateSession",{error:e}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"CreateSession",{error:e}),t.playStateUpdateError(e==i.SEND_MSG_TIMEOUT?a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionTimeoutError:a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionRequestError)}));this.state=i.ENUM_PLAY_STATE.waitingSessionRsp,this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" called success"),this.stateNego=i.ENUM_PLAY_STATE_NEGO.start},e.prototype.handleCreateSessionResp=function(e,t,n){var r=n.turn_server,i=r.split("?")[0]&&r.split("?")[0].slice(5),o=this.streamCenter.server.split("?"),s=o[1]&&o[1].slice(2);this.dataReport.eventEndWithMsg(this.streamReportSeq,"CreateSession",{sessionId:n.session_id,url:"webrtc://"+i+"/"+s+"/"+this.streamId}),this.dataReport.eventEndWithMsg(this.reportSeq,"CreateSession",{sessionId:n.session_id,url:"webrtc://"+i+"/"+s+"/"+this.streamId}),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" sessionId:"+n.session_id),this.sessionSeq==e?(this.gwNodeList=n.gw_nodes&&n.gw_nodes.length>0?n.gw_nodes:this.gwNodeList,this.gwNode=n.gw_nodes&&n.gw_nodes.length>0?this.gwNodeList[0]:this.gwNode,this.gwNodeTTL=n.gw_nodes_ttl?(new Date).getTime()+1e3*n.gw_nodes_ttl:this.gwNodeTTL,this.stateCenter.clientIP=n.clientip?n.clientip:this.stateCenter.clientIP,0!==n.result?(this.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" "+this.streamId+" create error"),this.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionRequestError)):(this.sessionId=n.session_id,this.sessionToken=n.session_token,this.dataReport.addMsgInfo(this.reportSeq,{session_id:a.ZegoRTCLogEvent.kZegoTaskPlayStart.session_id(this.sessionId)}),this.onCreatePlaySessionSuccess(n))):this.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_START_PLAY+" seq is not match.")},e.prototype.handleCreateSessionWithSdpResp=function(e,t,n){var r=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" sessionId:"+t),this.sessionSeq==e?(this.gwNodeList=n.gw_nodes&&n.gw_nodes.length>0?n.gw_nodes:this.gwNodeList,this.gwNode=n.gw_nodes&&n.gw_nodes.length>0?this.gwNodeList[0]:this.gwNode,this.gwNodeTTL=n.gw_nodes_ttl?(new Date).getTime()+1e3*n.gw_nodes_ttl:this.gwNodeTTL,this.stateCenter.clientIP=n.clientip?n.clientip:this.stateCenter.clientIP,this.dataReport.eventEndWithMsg(this.streamReportSeq,"CreateSessionWithSdp",{sessionId:t}),this.dataReport.eventEndWithMsg(this.reportSeq,"CreateSessionWithSdp",{sessionId:t}),0!==n.result?(this.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" create session failed "+n.result),this.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSessionRequestError)):(this.sessionId=t,this.sessionToken=n.session_token,this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" create session success ",this.streamId),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,t,n){r.onRecvCloseSession(e,t,n)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,t,n){r.onRecvResetSession(e,t,n)})),this.signal.registerPushCallback("StreamStatusNotifyPush",this.sessionId,(function(e,t,n){r.gotStreamStatus=!0,r.streamStatus=n,r.playStream&&r.onRecvStreamStatus(n)})),this.signal.registerPushCallback("PlayEventPush",this.sessionId,(function(e,t,n){r.onRecvPlayEvent(e,t,n)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,t,n){r.onRecvClientInfo(e,t,n)})),this.signal.registerPushCallback("NetQualityProbeRsp",this.sessionId,(function(e,t,n){r.onRecvPlayEvent(e,t,n)})),this.signal.registerPushCallback("NetQualityInfoPush",this.sessionId,(function(e,t,n){r.onRecvNetQualityInfo(e,t,n)})),this.onGetRemoteOfferSuccess(n.sdp))):this.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP+" seq is not match.")},e.prototype.onCreateOfferSuccess=function(e){var t=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp1 "+e.sdp.substr(0,e.sdp.length/2)),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp2 "+e.sdp.substr(e.sdp.length/2)),e.sdp=e.sdp.replace(/sendrecv/g,"recvonly"),e.sdp=e.sdp.replace(/useinbandfec=/,"stereo=1;useinbandfec=");var n=e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)?e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)[0]:null;if(n){var r=n.replace(/recvonly/,"sendrecv");e.sdp=e.sdp.replace(n,r)}var i=e.sdp.match(/m=video(.|\r|\n)*a=rtpmap(.|\r|\n)*(a=fmtp:(102).*)/);if(null!==i){var s=i[3];e.sdp=e.sdp.replace(s,s+";sps-pps-idr-in-keyframe=1")}this.playOption.videoCodec&&(e.sdp=o.SdpUtil.getSDPByVideDecodeType(e.sdp,this.playOption.videoCodec)),this.dataReport.eventStart(this.reportSeq,"SetLocalDescription"),this.dataReport.eventStart(this.streamReportSeq,"SetLocalDescription"),this.peerConnection.setLocalDescription(e).then((function(){t.dataReport.eventEnd(t.reportSeq,"SetLocalDescription"),t.dataReport.eventEnd(t.streamReportSeq,"SetLocalDescription"),t.onSetLocalDescriptionSuccess(e)}),(function(e){t.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CREATE_OFFER_SUCCESS+" "+t.streamId+" set error "+e.toString()),t.dataReport.eventEnd(t.reportSeq,"SetLocalDescription",{error:e.toString()}),t.dataReport.eventEnd(t.streamReportSeq,"SetLocalDescription",{error:e.toString()}),t.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSetLocalDescError,!0)}))},e.prototype.onSetLocalDescriptionSuccess=function(e){var t=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" success"),this.isPeer)this.createSession(e);else{var n={sdp:e.sdp};2==this.resourceMode&&(n.min_play_buf_level_ms=500),this.answerSeq=i.getSeq(),this.dataReport.eventStart(this.reportSeq,"SendMediaDesc"),this.dataReport.eventStart(this.streamReportSeq,"SendMediaDesc"),this.signal.sendMediaDesc(this.answerSeq,this.sessionId,0,n,(function(e,n,r){t.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" sendMediaDesc resp"),t.answerSeq==e&&t.sessionId==n?(t.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" send success stateNego:waiterAnswer"),t.stateNego=i.ENUM_PLAY_STATE_NEGO.waiterAnswer,t.dataReport.eventEnd(t.reportSeq,"SendMediaDesc"),t.dataReport.eventEnd(t.streamReportSeq,"SendMediaDesc"),t.state=i.ENUM_PLAY_STATE.waitingServerAnswer):t.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" seq or sessionId is not equal "+t.answerSeq+" "+e,0+t.sessionId+" "+n)}),(function(e,n){t.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+t.streamId+" failed to send "+e),t.dataReport.eventEndWithMsg(t.reportSeq,"SendMediaDesc",{error:e}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"SendMediaDesc",{error:e}),t.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kMediaDescError)})),this.state=i.ENUM_PLAY_STATE.waitingOfferRsp}},e.prototype.onRecvMediaDesc=function(e,t,n){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received ",n),this.stateNego=i.ENUM_PLAY_STATE_NEGO.waitingCandidate,this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.state===i.ENUM_PLAY_STATE.waitingServerAnswer?(this.dataReport.addEvent(this.reportSeq,"RecvMediaDesc"),this.dataReport.addEvent(this.streamReportSeq,"RecvMediaDesc"),this.signal.sendMediaDescAck(e,this.sessionId,0),this.onGetRemoteOfferSuccess(n.sdp)):this.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onGetRemoteOfferSuccess=function(e){var t,n=this,r={type:"answer",sdp:e,toJSON:function(){}};this.dataReport.eventStart(this.reportSeq,"SetRemoteDescription"),this.dataReport.eventStart(this.streamReportSeq,"SetRemoteDescription");var o=this.stateCenter.turnOverTcpOnly,s=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);s&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" setting udp_or_tcp "+s),o="tcp"===s),o&&(null===(t=r.sdp.match(/candidate.*/g))||void 0===t||t.forEach((function(e){var t=e.replace(/udp/,"tcp");r.sdp=r.sdp.replace(e,t)}))),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" remoteSdp ",r.sdp),this.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).then((function(){n.dataReport.eventEnd(n.reportSeq,"SetRemoteDescription"),n.dataReport.eventEnd(n.streamReportSeq,"SetRemoteDescription"),n.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+n.streamId+" set success")}),(function(e){n.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+n.streamId+" set remote error "+e.toString()),n.dataReport.eventEndWithMsg(n.reportSeq,"SetRemoteDescription",{error:e.toString()}),n.dataReport.eventEndWithMsg(n.streamReportSeq,"SetRemoteDescription",{error:e.toString()}),n.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kSetRemoteDescError,!0)})),this.state=i.ENUM_PLAY_STATE.waitingServerICE,this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_MEDIA_DESC+" "+this.streamId+" call success")},e.prototype.onRecvCandidateInfo=function(e,t,n){var r=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" received "),this.state==i.ENUM_PLAY_STATE.waitingServerICE){this.dataReport.addEvent(this.reportSeq,"RecvIceCandidate"),this.dataReport.addEvent(this.streamReportSeq,"RecvIceCandidate"),this.signal.sendCandidateInfoAck(e,this.sessionId,0),this.sendCandidateInfo(this.candidateInfo),this.candidateInfo=[];for(var o=0;o<n.infos.length;o++){var s={sdpMid:n.infos[o].sdpMid,sdpMLineIndex:n.infos[o].sdpMLineIndex,candidate:n.infos[o].candidate};this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" candidate "+s.candidate),this.peerConnection.addIceCandidate(new RTCIceCandidate(s)).then((function(){r.logger.debug(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+r.streamId+" add success")}),(function(e){r.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+r.streamId+" add error "+e.toString()),r.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kCandidateError,!0)}))}this.state=i.ENUM_PLAY_STATE.connecting,this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" call success")}else this.logger.warn(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onRecvPlayEvent=function(e,t,n){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_PLAY_EVENT+" "+this.streamId+" received"),!0===this.playEvent&&0==n.event){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_PLAY_EVENT+" "+this.streamId+" retry: "+this.streamId);var r=this.streamId,o=this.playOption;this.signal.sendCloseSession(i.getSeq(),this.sessionId,1),this.resetPlay(),this.startPlay(r,this.getRemoteStreamSuc,o)}else this.playEvent=!0},e.prototype.onRecvClientInfo=function(e,t,n){this.stateCenter.clientIP!==n.clientip&&this.logger.warn(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLIENT_INFO+" client ip changed "+this.stateCenter.clientIP+" "+n.clientip),this.stateCenter.clientIP=n.clientip,this.peerID=n.peer_id,this.isProbe&&this.stateNego==i.ENUM_PLAY_STATE_NEGO.iceConnected&&this.signal.sendNetProbe(i.getSeq(),this.sessionId,this.peerID,(function(){}),(function(){})),this.isRecvClientInfo=!0},e.prototype.onRecvNetQualityInfo=function(e,t,n){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_NET_QUALITY_INFO+" call"),this.qualityHandler.stopProbeTimeout();var r=0,o=n.lossrate,a=n.rtt;this.peerID===n.peer_id&&null!=typeof o&&null!=typeof a||(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_NET_QUALITY_INFO+" local peerID:"+this.peerID+" remote peerID:"+n.peer_id+" lossrate:"+o+" rtt:"+a),r=1),this.signal.sendNetQualityInfoPushAck(i.getSeq(),this.sessionId,this.peerID,r),0==r&&"number"==typeof o&&"number"==typeof a?this.onCalNetQualityResult(0,s.ClientUtil.getNetQuality(a,o)):this.onCalNetQualityResult(1)},e.prototype.onIceCandidate=function(e){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" called"),null!=e.candidate)if(this.logger.debug(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate "+e.candidate.candidate),this.state<i.ENUM_PLAY_STATE.connecting||this.state==i.ENUM_PLAY_STATE.stop)this.logger.debug(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" cached"),this.candidateInfo.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex});else{this.logger.debug(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CANDIDATE+" "+this.streamId+" send");var t={candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex};this.sendCandidateInfo([t])}},e.prototype.onConnectionStateChange=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_CONNECTION_STATE_CHANGE+" "+this.streamId+" called "+e.target.signalingState)},e.prototype.onIceConnectionStateChange=function(e){var t=this;if(this.state!=i.ENUM_PLAY_STATE.stop&&null!=this.peerConnection)if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateChanged "+this.peerConnection.iceConnectionState),"connected"===this.peerConnection.iceConnectionState){if(this.stateNego=i.ENUM_PLAY_STATE_NEGO.iceConnected,this.isProbe&&this.isPeer&&this.isRecvClientInfo)return this.signal.sendNetProbe(i.getSeq(),this.sessionId,this.peerID,(function(){}),(function(){})),void(null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null));for(var n in null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.dataReport.addEvent(this.reportSeq,"IceConnected"),this.dataReport.addEvent(this.streamReportSeq,"IceConnected"),this.state!=i.ENUM_PLAY_STATE.playing&&(this.onPlayStateUpdate(i.ENUM_PLAY_STATE_UPDATE.start,this.streamId,{code:0,message:""},!0),this.getRemoteStreamSuc&&this.getRemoteStreamSuc(this.playStream)),this.state=i.ENUM_PLAY_STATE.playing,this.dataReport.eventStart(this.reportSeq,"PlayState"),this.dataReport.eventStart(this.streamReportSeq,"PlayState"),this.streamCenter.publisherList)if(this.streamCenter.publisherList[n].publisher.state==i.ENUM_PUBLISH_STATE.publishing&&this.broadcasterStatus==i.ENUM_BROADCASTER_STATUS.stop){this.signal&&this.signal.sendBroadcasterStatus(i.getSeq(),this.sessionId,1),this.broadcasterStatus=i.ENUM_BROADCASTER_STATUS.start;break}if(!this.isProbe&&this.qualityHandler.setPlayQualityTimer(),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateNego:iceConnected"),this.isPeer&&(this.peerFailCount=0),0==this.firstFrameTime){this.firstFrameTime=(new Date).getTime()-this.beginTime;var r=i.getReportSeq();this.dataReport.newReport(r,a.ZegoRTCLogEvent.kZegoTaskPlayDecodeFirstVideoFrame.event),this.dataReport.addMsgInfo(r,{session_id:a.ZegoRTCLogEvent.kZegoTaskPlayDecodeFirstVideoFrame.session_id(this.sessionId),fft_consumed:a.ZegoRTCLogEvent.kZegoTaskPlayDecodeFirstVideoFrame.fft_consumed(this.firstFrameTime)}),!this.isProbe&&this.dataReport.uploadReport(r)}}else"closed"===this.peerConnection.iceConnectionState?(this.dataReport.addEvent(this.reportSeq,"IceClosed"),this.stateNego=i.ENUM_PLAY_STATE_NEGO.iceClosed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)):"failed"===this.peerConnection.iceConnectionState?(this.dataReport.addEvent(this.reportSeq,"IceFailed"),this.stateNego=i.ENUM_PLAY_STATE_NEGO.iceFailed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)):"disconnected"===this.peerConnection.iceConnectionState&&(this.dataReport.addEvent(this.reportSeq,"IceDisconnected"),this.stateNego=i.ENUM_PLAY_STATE_NEGO.iceDisconnected,this.logger.warn(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+" ice disconnected"),this.iceDisconnectedTimer||(this.iceDisconnectedTimer=setTimeout((function(){t.checkPlayConnectionFailedState("disconnected")}),this.iceDisconnectedMaxTime)))},e.prototype.checkPlayConnectionFailedState=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE+"  state "+this.state+" connectionState "+e),this.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kMediaConnectionError)},e.prototype.resetPlay=function(){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_RESET_PLAY+" "+this.streamId+" call"),this.state=i.ENUM_PLAY_STATE.stop,this.playEvent=!1,this.isRecvClientInfo=!1,null!=this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.qualityHandler.stopProbeTimeout(),this.qualityHandler.clearPlayQualityTimer(),this.signal&&(this.signal.unregisterPushCallback("MediaDescPush",this.sessionId),this.signal.unregisterPushCallback("CandidateInfoPush",this.sessionId),this.signal.unregisterPushCallback("CloseSessionPush",this.sessionId),this.signal.unregisterPushCallback("SessionResetPush",this.sessionId),this.signal.unregisterPushCallback("PublishEventPush",this.sessionId),this.signal.unregisterPushCallback("ClientInfoPush",this.sessionId),this.signal.unregisterPushCallback("NetQualityProbeRsp",this.sessionId),this.signal.unregisterPushCallback("NetQualityInfoPush",this.sessionId)),this.sessionSeq=0,this.answerSeq=0,this.videoSizeCallback=!1,this.stopSoundLevel()},e.prototype.onRecvResetSession=function(e,t,n){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_RESET_SESSION+" "+this.streamId+" received "),t==this.sessionId){this.signal.sendCloseSessionAck(e,this.sessionId,0);var r=JSON.parse(JSON.stringify(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlaySessionClosedError));this.negoTimer&&clearTimeout(this.negoTimer),this.playStateUpdateError(r)}else this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_RESET_SESSION+" "+this.streamId+" cannot find session")},e.prototype.onRecvCloseSession=function(e,t,n){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_CLOSE_SESSION+" "+this.streamId+" "+JSON.stringify(n)),this.signal.sendCloseSessionAck(e,this.sessionId,0);var r=n.err_info?JSON.parse(n.err_info.toLowerCase()):{},i=r.action?r.action:null,o=1*n.reason,s=JSON.parse(JSON.stringify(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlaySessionClosedError));s.message+=" reason:"+o+" "+(i?" action:"+i:""),this.negoTimer&&clearTimeout(this.negoTimer);var l=![4,8,10,11,12,14,24,26,27,28].includes(o)&&![2,5,6].includes(i);this.playStateUpdateError(s,l)},e.prototype.onRecvStreamStatus=function(e){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" call"),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" status camera_status: "+e.camera_status+" mic_status: "+e.mic_status),(!this.hasSentStreamStatus||this.cameraStatus!==e.camera_status)&&this.onRemoteCameraStatusUpdate(this.streamId,this.getCameraMicStatus(e.camera_status),e.camera_status),(!this.hasSentStreamStatus||this.micStatus!==e.mic_status)&&this.onRemoteMicStatusUpdate(this.streamId,this.getCameraMicStatus(e.mic_status),e.mic_status),this.hasSentStreamStatus=!0,this.cameraStatus=e.camera_status,this.micStatus=e.mic_status,this.videoMuteState=0===e.camera_status?"0":"1",this.audioMuteState=0===e.mic_status?"0":"1","boolean"==typeof this.playOption.video)this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" has set video option, ignore stream status");else{var t=this.playStream;if(0!==e.camera_status&&20!==e.camera_status?t.getVideoTracks().forEach((function(e){e.enabled=!1,e.stop(),t.removeTrack(e)})):0===t.getVideoTracks().length&&t.addTrack(this.remoteStream.clone().getVideoTracks()[0]),"safari"===this.stateCenter.browser)for(var n=document.querySelectorAll("video, audio"),r=0;r<n.length;r++)n[r].srcObject===this.playStream&&(n[r].srcObject=this.playStream)}this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_RECV_STREAM_STATUS+" "+this.streamId+" call success")},e.prototype.onGotRemoteStream=function(e){var t=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_GOT_REMOTE_STREAM+" "+this.streamId+" called "+e),e?(this.playStream?(this.playStream.getTracks().forEach((function(e){return t.playStream.removeTrack(e)})),e.clone().getTracks().forEach((function(e){return t.playStream.addTrack(e)}))):this.playStream=e.clone(),this.audioMuteState=this.playStream.getAudioTracks().length>0?"0":"1",this.videoMuteState=this.playStream.getVideoTracks().length>0?"0":"1",this.remoteStream=e,this.gotStreamStatus&&this.onRecvStreamStatus(this.streamStatus),this.dataReport.addEvent(this.reportSeq,"GetRemoteStream"),this.streamCenter.soundLevelDelegate&&!this.isProbe&&this.startSoundLevel()):this.logger.warn(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_GOT_REMOTE_STREAM+" "+this.streamId+" remote stream is empty")},e.prototype.sendCandidateInfo=function(e){var t=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" called"),!(e=e.filter((function(e){return!(e.candidate.indexOf("tcp")>0)&&(!!e.candidate||void 0)})))||e.length<1?this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" cancelled"):(this.dataReport.eventStart(this.reportSeq,"SendIceCandidate"),this.dataReport.eventStart(this.streamReportSeq,"SendIceCandidate"),this.stateNego!==i.ENUM_PLAY_STATE_NEGO.iceConnected&&(this.stateNego=i.ENUM_PLAY_STATE_NEGO.sendCandidate),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+this.streamId+" stateNego:sendCandidate"),this.signal.sendCandidateInfo(i.getSeq(),this.sessionId,e,(function(e,n,r){t.logger.debug(c.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+t.streamId+" send success"),t.dataReport.eventEnd(t.reportSeq,"SendIceCandidate"),t.dataReport.eventEnd(t.streamReportSeq,"SendIceCandidate")}),(function(e,n){t.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_SEND_CANDIDATE_INFO+" "+t.streamId+" failed to send: "+e.toString()),t.dataReport.eventEndWithMsg(t.reportSeq,"SendIceCandidate",{error:e}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"SendIceCandidate",{error:e}),t.playStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kCandidateError)})))},e.prototype.shouldSendCloseSession=function(){return this.state!=i.ENUM_PLAY_STATE_UPDATE.stop&&this.state!=i.ENUM_PLAY_STATE.waitingSessionRsp},e.prototype.playStateUpdateError=function(e,t){this.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_STATE_ERROR+" call ",this.streamId,JSON.stringify(e)),this.isProbe?this.onCalNetQualityResult(1):this.streamId&&this.onPlayStateUpdate(i.ENUM_PLAY_STATE_UPDATE.error,this.streamId,e,t),this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_STATE_ERROR+" "+this.streamId+" ended")},e.prototype.getCameraMicStatus=function(e){return 0==e?"OPEN":"MUTE"},e.prototype.onPlayStateUpdate=function(e,t,n,r){},e.prototype.onPlayQualityUpdate=function(e,t){},e.prototype.onRemoteCameraStatusUpdate=function(e,t,n){},e.prototype.onRemoteMicStatusUpdate=function(e,t,n){},e.prototype.stopPlay=function(){var e;for(var t in this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_STOP_PLAY+" "+this.streamId+" called"),this.streamCenter.publisherList)if(this.streamCenter.publisherList[t].publisher.state==i.ENUM_PUBLISH_STATE.publishing&&this.broadcasterStatus==i.ENUM_BROADCASTER_STATUS.start){this.signal&&this.signal.sendBroadcasterStatus(i.getSeq(),this.sessionId,0),this.broadcasterStatus=i.ENUM_BROADCASTER_STATUS.stop;break}this.sessionId&&!this.closeSessionSignal&&this.signal.sendCloseSession(i.getSeq(),this.sessionId,0),this.dataReport.eventEndWithMsg(this.streamReportSeq,"PlayState",{state:this.state+""}),this.dataReport.addEvent(this.streamReportSeq,"StopPlay"),this.dataReport.addMsgExt(this.streamReportSeq,{stream:this.streamId,sessionId:this.sessionId}),this.resetPlay();var n=this.qualityHandler,o=n.videoBreak,s=n.audioBreak,a=2===this.resourceMode?"l3":"rtc",l=((e={})[a+"_a_break_time"]=s.cumulativeBreakDuration,e[a+"_a_decode_time"]=s.cumulativeDecodeDuration,e[a+"_v_break_time"]=o.cumulativeBreakDuration,e[a+"_v_decode_time"]=o.cumulativeDecodeDuration,e);this.dataReport.addMsgInfo(this.streamReportSeq,r({itemtype:"RTCPlayStream",cdn_a_break_time:0,cdn_a_decode_time:0,cdn_v_break_time:0,cdn_v_decode_time:0,l3_a_break_time:0,l3_a_decode_time:0,l3_v_break_time:0,l3_v_decode_time:0,rtc_a_break_time:0,rtc_a_decode_time:0,rtc_v_break_time:0,rtc_v_decode_time:0},l)),!this.isProbe&&this.dataReport.uploadReport(this.streamReportSeq,"RTCPlayStream")},e.prototype.onDisconnect=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_ON_DISCONNECT+" "+this.streamId+" call"),this.dataReport.addEvent(this.reportSeq,"OnDisconnect"),this.playStateUpdateError(e||a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kWebsocketDisconnectedError,!!e)},e.prototype.startSoundLevel=function(){var e=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" call streamID: "+this.streamId),!this.isProbe)if(this.remoteStream&&0!=this.remoteStream.getAudioTracks().length){this.script&&this.script.disconnect()&&(this.script=null),this.mic&&this.mic.disconnect()&&(this.mic=null);try{this.mic=this.ac.createMediaStreamSource(this.remoteStream),this.script=this.ac.createScriptProcessor(4096,1,1),this.mic.connect(this.script),this.script.connect(this.ac.destination),this.script.onaudioprocess=function(t){for(var n=t.inputBuffer.getChannelData(0),r=0,i=0;i<n.length;i++)r<n[i]&&(r=n[i]);e.soundLevel=100*r},this.ac.resume()}catch(e){this.logger.error(c.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" get sound level failed "+e)}}else this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_START_SOUND_LEVEL+" "+this.streamId+" remote stream no found")},e.prototype.stopSoundLevel=function(){this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_STOP_SOUND_LEVEL+" call streamID: "+this.streamId),this.script&&this.script.disconnect(),this.mic&&this.mic.disconnect(),this.script=null,this.mic=null},e.prototype.onCalNetQualityResult=function(e,t){},e.prototype.onReceivedDataChannel=function(e){var t,n,r=this,i=new Uint8Array(e.data,0,10),o=e.data.byteLength-10,s=new Uint8Array(e.data,10,o);if(1==i[0]){var a=i[1],c=i[2]<<8|i[3],l=i[4]<<8|i[5],u=(new Date).getTime();if(this.first_pkt&&(this.next_sn[0]=c==l?c:l,this.first_pkt=!1),this.pkt_list.push({sn:c,sn0:l,recv_ts:u,flags:a,payload_len:o,payloadArray:s}),this.pkt_list.sort(this.compareShort),c==this.next_sn[0]){var d=this.pkt_list.filter((function(e){return e.sn0==l}));if(d.sort(this.compareShort),null!=d.find((function(e){return 1&e.flags}))&&d.length==this.compareShort(c,l)+1){for(var h=0,p=new ArrayBuffer(65536),f=0;f<d.length;f++)new Uint8Array(p).set(d[f].payloadArray,h),h+=d[f].payload_len;null===(t=this.onDataChannelList)||void 0===t||t.forEach((function(e){e(p,h,r.streamId)})),this.pkt_list=[],this.first_pkt=!0}this.next_sn[0]++}else for(var g=function(){var e=m.pkt_list.filter((function(e){return e.sn0==r.pkt_list[0].sn0}));if(e.sort(m.compareShort),null!=e.find((function(e){return 1&e.flags}))&&e.length==m.compareShort(e[e.length-1].sn,e[0].sn0)+1){for(var t=0,i=new ArrayBuffer(65536),o=0;o<e.length;o++)new Uint8Array(i).set(e[o].payloadArray,t),t+=e[o].payload_len;m.next_sn[0]=e[0].sn0+e.length,null===(n=m.onDataChannelList)||void 0===n||n.forEach((function(e){e(i,t,r.streamId)})),m.pkt_list=[],m.first_pkt=!0}else if(u-e[0].ts<4e3){var s=e[0].sn0;for(o=0;o<e.length&&s==e[o].sn;o++)s++;return m.next_sn[0]=s,"break"}for(o=0;o<e.length;o++)m.pkt_list.shift()},m=this;this.pkt_list.length>0&&"break"!==g(););}},e.prototype.compareShort=function(e,t){var n=new Uint16Array(1);n[0]=e-t;var r=new Int16Array(1);return r[0]=n[0],r[0]},e}();t.ZegoPlayWeb=u},361:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PublishModule=void 0;var i=n(1089),o=n(6706),s=n(3529),a=n(608),c=n(2752),l=n(3770),u=n(5321),d=function(){function e(e,t,n,r,i){this.logger=e,this.dataReport=t,this.stateCenter=n,this.streamCenter=r,this.rtm=i,this.recordDevices()}return e.prototype.createStream=function(e){var t=this;return this.logger.info(i.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" call"),e&&e.camera&&e.camera.audioBitRate&&(e.camera.audioBitrate=e.camera.audioBitRate),e&&e.camera&&e.camera.bitrate&&(e.camera.bitRate=e.camera.bitrate),e&&e.screen&&"object"==typeof e.screen&&e.screen.bitrate&&(e.screen.bitRate=e.screen.bitrate),e&&e.custom&&e.custom.bitrate&&(e.custom.bitRate=e.custom.bitrate),new Promise((function(n,c){var l="camera",d=o.getReportSeq();t.dataReport.newReport(d,s.ZegoRTCLogEvent.kZegoTaskCreateStream.event);var h=function(e){var r=t.streamCenter.checkPreview(e),i=e;if(r&&navigator.userAgent){var o=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);o&&o[1]&&o[1].includes("15_1")&&(i=t.getStreamThroughCanvas(e),r.localStream=i)}if(0==i.getAudioTracks().length){var s=t.streamCenter.ac.createMediaStreamDestination(),a=s?s.stream:null,c=a?a.getAudioTracks()[0]:null;c&&(c.enabled=!1,i.addTrack(c),r&&(r.hasEmptyAudioTrack=!0))}t.dataReport.uploadReport(d),!t.stateCenter.deviceInfos&&t.recordDevices(),n(i),t.streamCenter.activeSoundLevel()},p=function(e,n){void 0===n&&(n=""),t.dataReport.addMsgInfo(d,{error:e.code,message:e.message+n}),t.dataReport.uploadReport(d),c({code:e.code,msg:e.message+n})};if("https:"!==window.location.protocol&&"file:"!==window.location.protocol&&-1==window.location.hostname.indexOf("127.0.0.1")&&-1==window.location.hostname.indexOf("localhost"))return t.logger.error(i.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" https or localhost required "),void p({code:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError.code,message:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError.message+" https or localhost required"});if(e&&e.screen){if(l="screen",!a.ClientUtil.checkScreenParams(e.screen,p))return;var f=t.stateCenter.browser,g=t.streamCenter.getScreenConstrains(e.screen);t.dataReport.addMsgInfo(d,{stream_type:s.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("screen"),screen:s.ZegoRTCLogEvent.kZegoTaskCreateStream.screen(g)});var m=function(e){t.streamCenter.createScreenPreviewer(e,g)&&h(e),e.getVideoTracks()[0].onended=function(){var n=o.getReportSeq();t.dataReport.newReport(n),t.dataReport.uploadReport(n,s.ZegoRTCLogEvent.kZegoTaskScreenSharingEnded),e&&t.stopPreview(e),t.stateCenter.actionListener("screenSharingEnded",e)}};"firefox"==f||"object"==typeof e.screen&&"firefox"==e.screen.type?t.startScreenShotFirFox("screen",g,(function(e,t,n){e?t&&m(t):n&&p(n)})):"chrome"==f&&u.ZegoWebRTC.screenShotReady||"object"==typeof e.screen&&"shot"==e.screen.type?t.startScreenShotChrome((function(n,r,o){n?(t.logger.info(i.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" using extension"),r&&m(r)):(o&&t.logger.error(i.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" extension "+o),"SS_DIALOG_CANCEL"===o||"object"==typeof e.screen&&"shot"==e.screen.type?o&&p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenCancelError):t.startScreenSharing(g,(function(e,n,r){e?n&&m(n):(t.logger.error(i.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" "+r),r&&p(r))})))})):"Electron"==f||"object"==typeof e.screen&&"Electron"==e.screen.type?t.startScreenShotElectron(g,(function(e,t,n){e?t&&m(t):n&&p(n)})):t.startScreenSharing(g,(function(e,t,n){e?t&&m(t):n&&p(n)}))}else{if(e&&"object"==typeof e.camera&&void 0!==e.camera.videoQuality&&!a.ClientUtil.checkInteger(e.camera.videoQuality))return t.logger.error(i.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" videoQuality must be integer number"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," videoQuality must be integer number");if(e&&e.camera&&e.camera.audioBitrate){if(!a.ClientUtil.checkInteger(e.camera.audioBitrate))return t.logger.error(i.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate must be integer number"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate must be integer number");if(e.camera.audioBitrate<6)return t.logger.error(i.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate cannot less 6 kbps"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot less 6 kbps");if(e.camera.audioBitrate>510)return t.logger.error(i.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" audioBitrate cannot greater than 510 kbps"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot greater than 510 kbps");t.stateCenter.audioBitRate=1e3*e.camera.audioBitrate}if(e&&e.camera&&e.camera.bitRate){if("number"!=typeof e.camera.bitRate)return t.logger.error(i.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate must be integer number"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number");if(e.camera.bitRate>10240)return t.logger.error(i.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate cannot greater than 10 Mbps"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps")}if(e&&e.camera&&void 0!==e.camera.channelCount&&!a.ClientUtil.checkInteger(e.camera.channelCount))return t.logger.error(i.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" channelCount must be integer number"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," channelCount must be integer number");if(e&&e.camera&&4===e.camera.videoQuality&&!a.ClientUtil.checkCameraParams(e.camera,p))return;if(e&&e.custom&&e.custom.bitRate){if(!a.ClientUtil.checkInteger(e.custom.bitRate))return t.logger.error(i.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate must be integer number"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number");if(e.custom.bitRate>10240)return t.logger.error(i.ZEGO_WEBRTC_ACTION.CREATE_STREAM+" bitrate cannot greater than 10 Mbps"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps")}if(e&&e.custom&&e.custom.audioBitrate){if(!a.ClientUtil.checkInteger(e.custom.audioBitrate))return t.logger.error("ze.cs.0 audioBitrate must be integer number"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate must be integer number");if(e.custom.audioBitrate<6)return t.logger.error("ze.cs.0 audioBitrate cannot less 6 kbps"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot less 6 kbps");if(e.custom.audioBitrate>510)return t.logger.error("ze.cs.0 audioBitrate cannot greater than 510 kbps"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," audioBitrate cannot greater than 510 kbps")}if(e&&e.custom&&void 0!==e.custom.channelCount&&1!==e.custom.channelCount&&2!==e.custom.channelCount)return t.logger.error("ze.cs.0 channelCount must number 1 or 2"),void p(s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," channelCount must number 1 or 2");var _={};if(e&&e.camera)l="camera",_=e.camera,t.dataReport.addMsgInfo(d,{stream_type:s.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("camera"),camera:s.ZegoRTCLogEvent.kZegoTaskCreateStream.camera(e.camera)}),"boolean"!=typeof _.video&&(_.video=!0),"boolean"!=typeof _.audio&&(_.audio=!0);else if(e&&e.custom){l="custom",_=e.custom;var v=e.custom.source instanceof MediaStream?"MediaStream":"HTMLElement";t.dataReport.addMsgInfo(d,{stream_type:s.ZegoRTCLogEvent.kZegoTaskCreateStream.stream_type("custom"),custom:s.ZegoRTCLogEvent.kZegoTaskCreateStream.custom(r(r({},e.custom),{source:v}))})}t.startPreview(_,l,h,p)}}))},e.prototype.destroyStream=function(e){this.logger.info(i.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" call");var t=o.getReportSeq();if(this.dataReport.newReport(t),!(e instanceof MediaStream))return this.logger.error(i.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" localStream is not mediaStream or tracks is null"),this.dataReport.addMsgInfo(t,s.ZegoRTCLogEvent.kZegoTaskDestroyStream.error.kLocalStreamError),void this.dataReport.uploadReport(t,s.ZegoRTCLogEvent.kZegoTaskDestroyStream.event);e instanceof MediaStream&&0==e.getTracks().length&&this.logger.info(i.ZEGO_WEBRTC_ACTION.DESTROY_STREAM+" tracks is null"),this.stopPreview(e),this.dataReport.uploadReport(t,s.ZegoRTCLogEvent.kZegoTaskDestroyStream.event)},e.prototype.startPublishingStream=function(e,t,n,r){this.logger.info(i.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" call ",e);var c,l=!0,u="",d=o.getReportSeq();if(this.stateCenter.reportSeqList.startPublish[e]=d,this.dataReport.newReport(d,s.ZegoRTCLogEvent.kZegoTaskPublishStart.event),l&&void 0===e&&(u="stream id required",this.logger.error(i.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+u),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError),!l||e&&"string"==typeof e||(u="stream id type wrong",this.logger.error(i.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+u),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError),l&&e.length>o.MAX_STREAM_ID_LENGTH&&(u="stream id length limit",this.logger.error(i.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+u),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError),l&&!a.ClientUtil.checkIllegalCharacters(e)&&(u="stream ID contains illegal characters",this.logger.error(i.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+u),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError),l&&(!t||t instanceof MediaStream&&0==t.getTracks().length)&&(u="localStream wrong",this.logger.error(i.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+u),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError),l&&!this.streamCenter.checkPreview(t)&&(u="stream is not from zego",this.logger.error(i.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+u),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNoPreviewError),l&&void 0!==n&&"object"!=typeof n&&(l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError,u="publishOption must be object"),l&&void 0!==n&&void 0!==n.streamParams&&"string"!=typeof n.streamParams&&(this.logger.error(i.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption streamParams must be string"),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError,u=" publishOption streamParams must be string"),l&&void 0!==n&&void 0!==n.extraInfo&&"string"!=typeof n.extraInfo&&(this.logger.error(i.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption extraInfo must be string"),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError,u=" publishOption extraInfo must be string"),l&&void 0!==n&&void 0!==n.videoCodec&&"string"!=typeof n.videoCodec&&(this.logger.error(i.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" publishOption videoCodec must be string"),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError,u=" publishOption videoCodec must be string"),!l||!this.stateCenter.isMultiRoom||n&&"string"==typeof n.roomID&&""!=n.roomID||(l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishParamError,u=" roomID is need if set multi room"),n&&n.videoCodec&&(n.videoCodec=n.videoCodec.toUpperCase()),l&&this.rtm.service.isDisConnect()&&(this.logger.error("zc.p.sps.1 not login"),l=!1,c=s.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNoLoginError),!l)return this.logger.error(i.ZEGO_WEBRTC_ACTION.START_PUBLISHING_STREAM+" "+u),this.dataReport.uploadReport(d,void 0,c,u),delete this.stateCenter.reportSeqList.startPublish[e],!1;n||(n={}),this.dataReport.addMsgInfo(d,{stream:s.ZegoRTCLogEvent.kZegoTaskPublishStart.stream(e),publishOption:s.ZegoRTCLogEvent.kZegoTaskPublishStart.publishOption(n)}),n.audioBitRate=this.stateCenter.audioBitRate;var h,p=n.roomID?n.roomID:this.stateCenter.roomList[0]?this.stateCenter.roomList[0].roomID:"",f=this.stateCenter.getRoomByRoomID(p);if(!f)return this.logger.error("zc.p.sps.1 room no found"),!1;if(this.dataReport.addMsgInfo(d,{publish_room_id:p,isMulti:this.stateCenter.isMultiRoom}),this.stateCenter.customUrl&&0!=this.stateCenter.customUrl.length)this.logger.info("zc.p.sps.1 customUrl "+JSON.stringify(this.stateCenter.customUrl)),h=this.stateCenter.customUrl;else{var g=this.stateCenter.settingConfig.getSetting("signal_nodes",!0);g&&g instanceof Array&&g.length>0&&(h=g,this.logger.info("zc.p.sps.1 setting config signal_nodes "+JSON.stringify(g)))}if(h)return this.stateCenter.publishStreamList[e]={state:o.ENUM_PUBLISH_STREAM_STATE.tryPublish,extra_info:n.extraInfo?n.extraInfo:null},this.streamCenter.setPublishStateStart(f,e,t,n,r)?(f.streamHandler.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.retry,e,{code:0,message:""}),this.streamCenter.publisherList[e].serverUrls=h,this.streamCenter.startPublishingStream(e)):(this.logger.info("zc.p.sps.1 cannot start publish"),!1);if(!this.streamCenter.setPublishStateStart(f,e,t,n,r))return this.logger.error("zc.p.sps.1 cannot start publish"),!1;this.stateCenter.publishStreamList[e]={state:o.ENUM_PUBLISH_STREAM_STATE.tryPublish,extra_info:n.extraInfo?n.extraInfo:null},this.logger.info("zc.p.sps.1 start publish"),f.streamHandler.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.retry,e,{code:0,message:""});var m=this.streamCenter.publisherList[e].retryDispatchHandler;return m.stopMaxTime(),m.invalid(),m.initStream(e,n,!0),m.startMaxTime(),m.active(0)},e.prototype.activateSEIInsert=function(e,t,n){return void 0===n&&(n=0),!1},e.prototype.stopPublishingStream=function(e,t){this.logger.info(i.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" call ",e+(t?t.toString():""));var n=o.getReportSeq();if(this.stateCenter.reportSeqList.stopPublish[e]=n,this.dataReport.newReport(n,s.ZegoRTCLogEvent.kZegoTaskPublishStop.event),this.dataReport.addMsgInfo(n,{streamID:s.ZegoRTCLogEvent.kZegoTaskPublishStop.stream(e)}),"string"!=typeof e||""==e)return this.logger.error(i.ZEGO_WEBRTC_ACTION.STOP_PUBLISHING_STREAM+" streamID must be string and not empty"),this.dataReport.uploadReport(n,void 0,s.ZegoRTCLogEvent.kZegoTaskPublishStop.error.kParamError,"stream id type error"),delete this.stateCenter.reportSeqList.stopPublish[e],!1;var r=this.streamCenter.publisherList[e],a=this.streamCenter.getRoomByStreamID(e),c=r&&r.publisher&&r.publisher.state!==o.ENUM_PUBLISH_STATE.stop;if(this.streamCenter.stopPublishingStream(e),this.stateCenter.publishStreamList[e]){if(this.stateCenter.publishStreamList[e].state>=o.ENUM_PUBLISH_STREAM_STATE.update_info&&a){var l;if(!t||1102018!==t.code)l="PUBLIC"===this.stateCenter.type?o.ENUM_STREAM_SUB_CMD.liveEnd:o.ENUM_STREAM_CMD_PRI.liveEnd,a.streamHandler.updateStreamInfo(e,l);for(var u=0;u<a.streamList.length;u++)if(a.streamList[u].stream_id==e){a.streamList.splice(u--,1);break}}delete this.stateCenter.publishStreamList[e]}return this.dataReport.uploadReport(n),a&&c&&a.streamHandler.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.error,e,t||{code:0,message:""}),!0},e.prototype.setCaptureVolume=function(e,t){var n=this;return new Promise((function(r){var o;n.logger.info(i.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" call");var a=function(e){n.logger.error(i.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" "+e),r({errorCode:s.ZegoRTCLogEvent.kZegoSetCaptureVolume.error.kParamError.code,extendedData:JSON.stringify({fail_reason:s.ZegoRTCLogEvent.kZegoSetCaptureVolume.error.kParamError.message+" "+e})})},c=n.streamCenter.ac,l=n.streamCenter.checkPreview(e);if(e instanceof MediaStream&&l)if(0!=e.getAudioTracks().length)if("number"!=typeof t||t<0||t>100)a(" volume must be number between 0 to 100");else{if(l.gainNode)l.gainNode.gain.value=t/100;else{var u=c.createMediaStreamSource(e),d=c.createGain(),h=c.createMediaStreamDestination();u.connect(d),d.connect(h);var p=h.stream.getAudioTracks()[0];for(var f in n.streamCenter.publisherList){var g=n.streamCenter.publisherList[f];if(g.localStream==e){var m=null===(o=g.publisher.peerConnection)||void 0===o?void 0:o.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));m&&(m.replaceTrack(p),g.localStream.removeTrack(g.publisher.localStream.getAudioTracks()[0]),g.localStream.addTrack(p));break}}e.removeTrack(e.getAudioTracks()[0]),e.addTrack(p),l.gainNode=d,l.gainNode.gain.value=t/100}c.resume(),r({errorCode:0,extendedData:""}),n.logger.info(i.ZEGO_WEBRTC_ACTION.PUBLISH_SET_CAPTURE_VOLUME+" call success")}else a(" stream audioTrack no found");else a(" stream must be created by zego")}))},e.prototype.getElectronScreenSources=function(){var e=this;return new Promise((function(t,n){var r=window.require("electron");r||(e.logger.error("zc.gess.0 Electron is not exist"),n({message:"Electron is not exist"})),r.desktopCapturer.getSources({types:["window","screen"]}).then((function(e){var n=e.map((function(e){return{id:e.id,name:e.name,thumbnail:e.thumbnail}}));t(n)})).catch((function(t){e.logger.error("zc.gess.0 "+t),n(t)}))}))},e.prototype.startScreenShotChrome=function(e){if(u.ZegoWebRTC.screenShotReady)window.postMessage({type:"SS_UI_REQUEST",text:"start"},"*"),a.ClientUtil.registerCallback("screenShare",{success:e},this.stateCenter.callbackList);else{var t='zc.b.ss Please install the extension:1. Go to chrome://extensions  2. Check: "Enable Developer mode   3. Click: "Load the unpacked extension... 4. Choose "extension" folder from the repository 5. Reload this page';this.logger.error(t),e(!1,null,{code:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+t})}},e.prototype.startScreenSharing=function(e,t){var n=this;"getDisplayMedia"in navigator.mediaDevices?navigator.mediaDevices.getDisplayMedia({audio:e.audio,video:{frameRate:e.frameRate,width:e.width,height:e.height}}).then((function(e){t(!0,e)})).catch((function(e){n.logger.error("zc.b.sss "+e),e.message&&"permission denied"==e.message.toLowerCase()?t(!1,null,s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenCancelError):t(!1,null,{code:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+e})})):(this.logger.error("zc.b.sss brower does not support getDisplayMedia"),t(!1,null,s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError))},e.prototype.startScreenShotFirFox=function(e,t,n){var r=this,i={video:{frameRate:t.frameRate,bitRate:t.bitRate,width:t.width,height:t.height,mediaSource:e},audio:t.audio};navigator.mediaDevices.getUserMedia(i).then((function(e){n(!0,e)})).catch((function(e){r.logger.error("ze.ssf.1 "+e),n(!1,null,{code:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+e})}))},e.prototype.startScreenShotElectron=function(e,t){var n=this;if(!window.require("electron"))return this.logger.error("ze.sse.1 Electron is not exist"),void t(!1,null,{code:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" Electron is not exist"});var r={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e.sourceID,maxWidth:window.screen.width,maxHeight:window.screen.height}},audio:!1};navigator.mediaDevices.getUserMedia(r).then((function(e){t(!0,e)})).catch((function(e){n.logger.error("ze.sse.1 "+e),t(!1,null,{code:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.code,message:s.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kScreenFailedError.message+" "+e})}))},e.prototype.startPreview=function(e,t,n,r){var i=this,o=null;return o=new l.ZegoPreview(this.logger,this.streamCenter.ac,this.stateCenter,this.streamCenter,t),this.streamCenter.previewStreamList.push(o),o.startPreview(e,(function(r){i.streamCenter.soundLevelDelegate&&(null==o||o.startSoundLevel()),"camera"===t&&(null==o?void 0:o.micTrack)&&(o.micTrack.enabled=i.streamCenter.isMicEnabled),(null==e?void 0:e.videoOptimizationMode)&&i.streamCenter.setVideoTrackContentHint(r,null==e?void 0:e.videoOptimizationMode),i.logger.debug("zsc.sp.0 call success"),!i.stateCenter.deviceInfos&&i.recordDevices(),n&&n(r)}),(function(e){i.streamCenter.previewStreamList=i.streamCenter.previewStreamList.filter((function(e){return e!==o})),r&&r(e)})),!0},e.prototype.stopPreview=function(e){if(!e)return this.logger.warn("zsc.sp.0 localStream null"),!1;for(var t in this.streamCenter.publisherList)this.streamCenter.publisherList[t].localStream===e&&(this.streamCenter.publisherList[t].localStream=null);var n=this.streamCenter.checkPreview(e);return n?(n.previewSuc&&(n.stopPreview(),this.streamCenter.removePreview(n)),!0):(this.logger.warn("zsc.sp.0 no preview"),!1)},e.prototype.recordDevices=function(e,t){var n,r=this;this.logger.info("zsc.rd.0 call"),a.ClientUtil.getDevices((function(t){r.stateCenter.deviceInfos={microphones:t.microphones,speakers:t.speakers,cameras:t.cameras},e&&e(t)}),(function(e){r.logger.warn("zsc.rd.0 getDevices err:",e),t&&t(e)})),void 0!==(null===(n=navigator.mediaDevices)||void 0===n?void 0:n.ondevicechange)&&(navigator.mediaDevices.ondevicechange=null,navigator.mediaDevices.ondevicechange=function(e){r.logger.info("zsc.rd.0 devicechange"),r.stateCenter.deviceChangeTimer&&(clearTimeout(r.stateCenter.deviceChangeTimer),r.stateCenter.deviceChangeTimer=null),r.stateCenter.deviceChangeTimer=setTimeout((function(){a.ClientUtil.getDevices((function(e){for(var t=[],n=function(n){var i=r.stateCenter.deviceInfos.cameras[n];e.cameras.find((function(e){return e.deviceID===i.deviceID}))||t.push(i)},i=0;i<r.stateCenter.deviceInfos.cameras.length;i++)n(i);r.stateCenter.deviceStateOut=!1;var a=!1;t.length>0&&(a=!0),t.forEach((function(e){for(var t in r.streamCenter.publisherList){var n=r.streamCenter.publisherList[t],i=n.publisher;n.localStream&&n.cameraLabel===e.deviceName&&(a=!1,i.sendStreamStatus(-6,i.mic_status),r.stateCenter.actionListener("_deviceError",c.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,e.deviceName,"camera"),r.stateCenter.actionListener("deviceError",c.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,e.deviceName)),n.localStream&&0===n.localStream.getAudioTracks().length&&(a=!1)}var l=o.getReportSeq();r.dataReport.newReport(l,s.ZegoRTCLogEvent.kZegoTaskDeviceInterrupt.event),r.dataReport.addMsgInfo(l,{interrupt:0}),r.dataReport.uploadReport(l),r.stateCenter.actionListener("videoDeviceStateChanged","DELETE",e)})),a&&(r.stateCenter.deviceStateOut=!0),r.stateCenter.deviceInfos.microphones.filter((function(t){return!e.microphones.find((function(e){return e.deviceID===t.deviceID}))})).forEach((function(e){for(var t in r.streamCenter.publisherList){var n=r.streamCenter.publisherList[t],i=n.publisher;n.localStream&&(n.microLabel===e.deviceName||n.microLabel.includes(e.deviceName))&&(i.sendStreamStatus(i.camera_status,-6),r.stateCenter.actionListener("_deviceError",c.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,r.streamCenter.publisherList[t].microLabel,"micro"),r.stateCenter.actionListener("deviceError",c.errorCodeList.DEVICE_ERROR_TYPE_UNPLUGGED.code,r.streamCenter.publisherList[t].microLabel))}var a=o.getReportSeq();r.dataReport.newReport(a,s.ZegoRTCLogEvent.kZegoTaskDeviceInterrupt.event),r.dataReport.addMsgInfo(a,{interrupt:0}),r.dataReport.uploadReport(a),r.stateCenter.actionListener("audioDeviceStateChanged","DELETE","Input",e)}));var l=r.stateCenter.deviceInfos.speakers.filter((function(t){return!e.speakers.find((function(e){return e.deviceID===t.deviceID}))})),u=e.cameras.filter((function(e){return!r.stateCenter.deviceInfos.cameras.find((function(t){return t.deviceID===e.deviceID}))})),d=e.microphones.filter((function(e){return!r.stateCenter.deviceInfos.microphones.find((function(t){return t.deviceID===e.deviceID}))})),h=e.speakers.filter((function(e){return!r.stateCenter.deviceInfos.speakers.find((function(t){return t.deviceID===e.deviceID}))}));l.forEach((function(e){var t=o.getReportSeq();r.dataReport.newReport(t,s.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.event),r.dataReport.addMsgInfo(t,{reason:s.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.reason("delete"),device:s.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e)}),r.dataReport.uploadReport(t),r.stateCenter.actionListener("audioDeviceStateChanged","DELETE","Output",e)})),u.forEach((function(e){var t=o.getReportSeq();r.dataReport.newReport(t,s.ZegoRTCLogEvent.kZegoTaskDeviceInterrupt.event),r.dataReport.addMsgInfo(t,{interrupt:1}),r.dataReport.uploadReport(t),r.stateCenter.actionListener("videoDeviceStateChanged","ADD",e)})),d.forEach((function(e){var t=o.getReportSeq();r.dataReport.newReport(t,s.ZegoRTCLogEvent.kZegoTaskDeviceInterrupt.event),r.dataReport.addMsgInfo(t,{interrupt:1}),r.dataReport.uploadReport(t),r.stateCenter.actionListener("audioDeviceStateChanged","ADD","Input",e)})),h.forEach((function(e){var t=o.getReportSeq();r.dataReport.newReport(t,s.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.event),r.dataReport.addMsgInfo(t,{reason:s.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.reason("add"),device:s.ZegoRTCLogEvent.kZegoTaskAudioOutputChanged.device(e)}),r.dataReport.uploadReport(t),r.stateCenter.actionListener("audioDeviceStateChanged","ADD","Output",e)})),r.stateCenter.deviceInfos={microphones:e.microphones,speakers:e.speakers,cameras:e.cameras}}),(function(e){r.logger.warn("zsc.rd.0 getDevices err:",e)}))}),500)})},e.prototype.getStreamThroughCanvas=function(e){if(0==e.getVideoTracks().length)return e;var t=document.createElement("video"),n=document.createElement("canvas"),r=n.getContext("2d");t.setAttribute("style","display:none"),n.setAttribute("style","display:none"),t.setAttribute("muted",""),t.muted=!0,t.setAttribute("autoplay",""),t.autoplay=!0,t.setAttribute("playsinline",""),document.body.append(t),document.body.append(n),t.srcObject=e;var i=function(){null==r||r.drawImage(t,0,0,n.width,n.height),window.requestAnimationFrame(i),t.srcObject=e};t.oncanplay=function(){n.width=t.videoWidth,n.height=t.videoHeight,t.play(),i()};var o=n.captureStream(15),s=o.getVideoTracks()[0],a=s.stop;if(s.stop=function(){a.call(s),i(),t.remove(),n.width=0,n.remove()},e instanceof MediaStream&&e.getAudioTracks().length){var c=e.getAudioTracks()[0];o.addTrack(c)}return o},e}();t.PublishModule=d},3770:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoPreview=void 0;var s=n(6706),a=n(3529),c=n(1089),l=function(){function e(e,t,n,r,i){var o=this;this.logger=e,this.ac=t,this.stateCenter=n,this.streamCenter=r,this.previewType=i,this.localStream=null,this.videoInfo={},this.previewSuc=!1,this.soundLevel=0,this.hasEmptyAudioTrack=!1,this.script=null,this.mic=null,this._audioTrack=null,this._videoTrack=null,this.originVideoTrack=null,this.activateSEIConfig=null,this.isAudioEnabled=!0,this.gainNode=null,this.cameraMaxResolution={},this.enableMicrophoneOnly=function(e,t){var n;if(!o.localStream)return o.logger.error("zp.em.2 no localStream"),!1;var r=null===(n=t.checkPublish(o.localStream))||void 0===n?void 0:n.publisher;if(r){var i=r.camera_status,s=o.isAudioEnabled&&e?0:20;r.camera_status===i&&r.mic_status===s||r.sendStreamStatus(i,s)}return o.micTrack?(o.micTrack.enabled=o.isAudioEnabled&&e,o.logger.debug("zp.emo.2 call success"),!0):(o.logger.info("zp.emo.2 no micTrack"),!0)}}return Object.defineProperty(e.prototype,"audioTrack",{get:function(){var e;return this._audioTrack||(null===(e=this.localStream)||void 0===e?void 0:e.getAudioTracks()[0])||null},set:function(e){this._audioTrack=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoTrack",{get:function(){var e;return this._videoTrack||(null===(e=this.localStream)||void 0===e?void 0:e.getVideoTracks()[0])||null},set:function(e){this._videoTrack=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"micTrack",{get:function(){return"camera"===this.previewType&&this.audioTrack||null},enumerable:!1,configurable:!0}),e.prototype.getMediaStreamConstraints=function(e,t){var n={audio:null,video:null};if(n.audio=!0,n.video={width:640,height:480,frameRate:15,bitRate:this.stateCenter.settingConfig.getSetting("camera_video_bitrate")},e.audio?void 0===e.audioInput&&void 0===e.ANS&&void 0===e.AGC&&void 0===e.AEC&&void 0===e.channelCount?(n.audio={},n.audio.noiseSuppression=this.stateCenter.settingConfig.getSetting("ANS"),n.audio.autoGainControl=this.stateCenter.settingConfig.getSetting("AGC"),n.audio.echoCancellation=this.stateCenter.settingConfig.getSetting("AEC"),n.audio.channelCount=1):(n.audio={},void 0!==e.audioInput&&null!==e.audioInput&&(n.audio.deviceId={exact:e.audioInput}),void 0!==e.ANS&&(n.audio.noiseSuppression=e.ANS),void 0!==e.AGC&&(n.audio.autoGainControl=e.AGC),void 0!==e.AEC&&(n.audio.echoCancellation=e.AEC),void 0!==e.channelCount&&(n.audio.channelCount=e.channelCount)):!1===e.audio&&(n.audio=!1),e.video){var r=640,i=480,o=15,a=this.stateCenter.settingConfig.getSetting("camera_video_bitrate");if(1===e.videoQuality?(r=s.ENUM_RESOLUTION_TYPE.LOW.width,i=s.ENUM_RESOLUTION_TYPE.LOW.height,o=s.ENUM_RESOLUTION_TYPE.LOW.frameRate,a=s.ENUM_RESOLUTION_TYPE.LOW.bitRate):2===e.videoQuality?(r=s.ENUM_RESOLUTION_TYPE.MEDIUM.width,i=s.ENUM_RESOLUTION_TYPE.MEDIUM.height,o=s.ENUM_RESOLUTION_TYPE.MEDIUM.frameRate,a=s.ENUM_RESOLUTION_TYPE.MEDIUM.bitRate):3===e.videoQuality?(r=s.ENUM_RESOLUTION_TYPE.HIGH.width,i=s.ENUM_RESOLUTION_TYPE.HIGH.height,o=s.ENUM_RESOLUTION_TYPE.HIGH.frameRate,a=s.ENUM_RESOLUTION_TYPE.HIGH.bitRate):4===e.videoQuality?(r=e.width,i=e.height,o=e.frameRate,a=e.bitRate||this.stateCenter.settingConfig.getSetting("camera_video_bitrate")):this.logger.info("zp.gmsc.2 use default"),t&&(e.width&&(r=e.width),e.height&&(i=e.height),e.frameRate&&(o=e.frameRate),e.bitRate&&(a=e.bitRate)),!1===e.horizontal){var c=i;i=r,r=c}!0===e.isSwitch&&(c=i,i=r,r=c),n.video={width:r,height:i,frameRate:o,bitRate:a},null!=e.facingMode?n.video.facingMode=e.facingMode:null!=e.videoInput&&null!=e.videoInput&&""!=e.videoInput&&(n.video.deviceId={exact:e.videoInput}),this.logger.info("zp.gmsc.2 width: "+r+" height: "+i+" rate: "+o)}else!1===e.video&&(e.audioBitrate&&(n.video={}),n.video=!1);return n},e.prototype.startPreview=function(e,t,n){return i(this,void 0,void 0,(function(){var i,s,c,l,u,d,h,p=this;return o(this,(function(o){return this.logger.debug("zp.sv.2 called"),this.mediaStreamConfig=e,void 0===navigator.mediaDevices||null==navigator.mediaDevices.getUserMedia?(n&&n(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError),[2]):e.source instanceof MediaStream?(i=e.source.getVideoTracks(),s=i.length>0?i[0].getSettings():{width:0,height:0,frameRate:0},this.logger.debug("zp.sv.2 use external media stream"),this.previewSuc=!0,this.localStream=e.source,this.initMediaTrack(e.source),this.videoInfo={width:s.width,height:s.height,frameRate:s.frameRate,bitRate:e.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),startBitrate:e.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode"),channelCount:e.channelCount||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1),audioBitrate:1e3*e.audioBitrate||48e3},t&&t(this.localStream),[2]):e.source instanceof HTMLMediaElement?((c=this.captureStream(e.source,e))?(this.videoInfo.bitRate=e.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),this.previewSuc=!0,this.initMediaTrack(c),t&&t(c)):n&&n(a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kBrowserNotSupportError),[2]):((l=this.getMediaStreamConstraints(e)).audio&&(u=this.stateCenter.settingConfig.getSetting("AEC",!0),d=this.stateCenter.settingConfig.getSetting("AGC",!0),h=this.stateCenter.settingConfig.getSetting("ANS",!0),"boolean"==typeof u&&(this.logger.info("zp.sv.2 setting AEC "+u),l.audio.echoCancellation=u),"boolean"==typeof d&&(this.logger.info("zp.sv.2 setting AGC "+d),l.audio.autoGainControl=d),"boolean"==typeof h&&(this.logger.info("zp.sv.2 setting ANS "+h),l.audio.noiseSuppression=h)),this.videoInfo=r({},l.video),this.videoInfo?(this.videoInfo.audioBitrate=1e3*e.audioBitrate||48e3,this.videoInfo.startBitrate=e.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode")):e.audioBitrate&&(this.videoInfo={audioBitrate:1e3*e.audioBitrate||48e3}),this.mediaStreamConfig.video=!!l.video,this.mediaStreamConfig.audio=!!l.audio,this.logger.info("zp.sv.2 ",JSON.stringify(l)),e.unlimitedCaptureResolution&&l.video.width&&(l.video.width={ideal:4096},l.video.height={ideal:2160},this.logger.info("zp.sv.2 ","capture max resolution of camera")),navigator.mediaDevices.getUserMedia(l).then((function(n){p.logger.info("zp.sv.2 success"),p.localStream=n,p.previewSuc=!0,p.initMediaTrack(n),p.videoInfo&&(p.videoInfo.channelCount=e.channelCount||(p.audioTrack&&p.audioTrack.getSettings?p.audioTrack.getSettings().channelCount:1)),t&&t(n)}),(function(e){if(p.logger.info("zp.sv.2 failed ",e.name," ",e.message),n){var t=a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kGetUserMediaError;t.message=t.message+" "+e.name+" "+e.message,"NotAllowedError"===e.name||"SecurityError"===e.name?(t=r({},a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceNoAllowedError)).message=e.name+": "+t.message:"NotReadableError"===e.name?(t=r({},a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceNoReadableError)).message=e.name+": "+t.message:"OverconstrainedError"===e.name&&((t=r({},a.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kDeviceOverConstrainedError)).message=e.name+": "+t.message+(e.constraint?". such as "+e.constraint:"")),n(t)}})),[2])}))}))},e.prototype.captureStream=function(e,t){if(!e)return this.logger.info("zp.cs.2 no local video"),null;var n;if(e.captureStream)n=e.captureStream(),this.logger.debug("zp.cs.2 captureStream");else{if(!e.mozCaptureStream)return this.logger.info("zp.cs.2 don't support"),null;n=e.mozCaptureStream(),this.logger.debug("zp.cs.2 mozCaptureStream")}return 0==n.getTracks().length?(this.logger.error("zp.cs.2 external capture tracks no found"),null):(this.localStream=n,this.videoInfo={width:e.videoWidth,height:e.videoHeight,frameRate:0,bitRate:t.bitRate||this.stateCenter.settingConfig.getSetting("custom_video_bitrate"),channelCount:t.channelCount||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1),audioBitrate:1e3*t.audioBitrate||48e3,startBitrate:t.startBitrate||this.stateCenter.settingConfig.getSetting("bitrate_mode")},this.logger.debug("zp.cs.2 called success"),this.localStream)},e.prototype.stopPreview=function(){var e,t,n;this.logger.info("zp.sv.2.1 called"),this.localStream&&(this.videoEffect&&(this.videoEffect.setBeautyEffectOptions(!1),this.videoEffect.destroy()),null===(e=this.originVideoTrack)||void 0===e||e.stop(),null===(t=this.videoTrack)||void 0===t||t.stop(),null===(n=this.audioTrack)||void 0===n||n.stop(),this.localStream.getTracks().reverse().forEach((function(e){return e.stop()})),this.localStream=null,this.videoInfo={})},e.prototype.enableMicrophone=function(e,t){return!1},e.prototype.enableCamera=function(e,t,n){return!1},e.prototype.startSoundLevel=function(){var e=this;if(this.localStream&&0!=this.localStream.getAudioTracks().length){this.script&&this.script.disconnect()&&(this.script=null),this.mic&&this.mic.disconnect()&&(this.mic=null);try{this.mic=this.ac.createMediaStreamSource(this.localStream),this.script=this.ac.createScriptProcessor(4096,1,1),this.mic.connect(this.script),this.script.connect(this.ac.destination),this.script.onaudioprocess=function(t){for(var n=t.inputBuffer.getChannelData(0),r=0,i=0;i<n.length;i++)r<n[i]&&(r=n[i]);e.soundLevel=100*r},this.ac.resume()}catch(e){this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" get sound level failed "+e)}}},e.prototype.stopSoundLevel=function(){this.soundLevel=0,this.script&&this.script.disconnect(),this.mic&&this.mic.disconnect(),this.script=null,this.mic=null},e.prototype.restartSoundLevel=function(){this.streamCenter.soundLevelDelegate?(this.stopSoundLevel(),this.startSoundLevel()):this.stopSoundLevel()},e.prototype.setBeautyEffect=function(e,t){return i(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},e.prototype.replacePreviewTrack=function(e,t){void 0===t&&(t=!1)},e.prototype.initMediaTrack=function(e){e.getVideoTracks().length>0&&(this.videoTrack=e.getVideoTracks()[0],this.originVideoTrack=this.videoTrack),e.getAudioTracks().length>0&&(this.audioTrack=e.getAudioTracks()[0])},e}();t.ZegoPreview=l},1547:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoPublish=void 0;var i=n(6706),o=n(4767),s=n(608),a=n(3529),c=n(1089),l=function(){function e(e,t,n,r,o,s,a,c,l){this.state=i.ENUM_PUBLISH_STATE.stop,this.sessionId=0,this.sessionToken="",this.candidateInfo=[],this.qualityTimer=null,this.publishQualityList=[],this.maxQualityListCount=10,this.lastPublishStats={},this.reportSeq=NaN,this.streamReportSeq=i.getSeq(),this.qualityUpload=!1,this.qualityUploadInterval=3e4,this.qualityUploadLastTime=0,this.qualitySeq=0,this.videoInfo={width:0,height:0,frameRate:0,bitRate:0,channelCount:1,audioBitrate:48e3},this.mediaStreamConfig=null,this.offerSeq=0,this.audioMixList=[],this.arrayBufferMap={},this.effectList=[],this.peerConnection=null,this.qualityCount=0,this.closeSessionSignal=!1,this.channelCount=1,this.localSdpOrder=[],this.remoteSdpOrder=[],this.videoCodec="H264",this.stateNego=i.ENUM_PUBLISH_STATE_NEGO.stop,this.negoInterval=25e3,this.publishEvent=!1,this.cameraState="on",this.microState="on",this.gwNode="",this.gwNodeList=[],this.gwNodeTTL=0,this.needIncMax=!1,this.probeCount=0,this.gotMax=!1,this.initFitCnt=0,this.targetRate=0,this.totalBitrateArray=[],this.totalTargetRateArray=[],this.totalRetransRateArray=[],this.isPeer=!1,this.peerFailCount=0,this.peerID=0,this.netQuality=0,this.probeTime=0,this.probeInterval=6e4,this.probeState=i.ENUM_PROBE_STATE.probed,this.iceDisconnectedMaxTime=15e3,this.isUpdateSDP=!1,this.toBeReplacedTracks={},this.send_seq=0,this.dataChannelState=0,this.first_pkt=!0,this.next_sn=[],this.pkt_list=[],this.camera_status=2,this.mic_status=2,this.streamId=e,this.logger=t,this.dataReport=n,this.qualityTimeInterval=r,this.ac=s,this.mediaEleSources=a,this.streamCenter=o,this.stateCenter=c,this.dataReport.newReport(this.streamReportSeq),this.videoCodec=this.stateCenter.settingConfig.getSetting("publish_video_codec")}return Object.defineProperty(e.prototype,"previewer",{get:function(){return this.streamCenter.checkPreview(this.localStream)},enumerable:!1,configurable:!0}),e.prototype.publishStateUpdateError=function(e,t){this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_STATE_ERROR+"  call ",this.streamId,JSON.stringify(e)),this.streamId&&this.onPublishStateUpdate(i.ENUM_PUBLISH_STATE_UPDATE.error,this.streamId,e,t),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_STATE_ERROR+"  ended")},e.prototype.resetPublish=function(){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_RESET_PUBLISH+"   "+this.streamId+" call"),this.state=i.ENUM_PUBLISH_STATE.stop,this.publishEvent=!1,null==this.peerConnection&&null==this.peerConnection||(this.peerConnection.close(),this.peerConnection=null),null!=this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.clearPublishQualityTimer(),this.signal&&(this.signal.unregisterPushCallback("CandidateInfoPush",this.sessionId),this.signal.unregisterPushCallback("MediaDescPush",this.sessionId),this.signal.unregisterPushCallback("CloseSessionPush",this.sessionId),this.signal.unregisterPushCallback("SessionResetPush",this.sessionId),this.signal.unregisterPushCallback("PublishEventPush",this.sessionId),this.signal.unregisterPushCallback("ClientInfoPush",this.sessionId)),this.sessionSeq=0,this.offerSeq=0,this.candidateInfo=[],this.publishQualityList=[],this.qualityUploadLastTime=0,this.resetEncBitrate(),this.isUpdateSDP=!1},e.prototype.clearPublishQualityTimer=function(){null!=this.qualityTimer&&(clearInterval(this.qualityTimer),this.qualityTimer=null),this.lastPublishStats={},this.qualityCount=0},e.prototype.shouldSendCloseSession=function(){return this.state!=i.ENUM_PUBLISH_STATE.stop&&this.state!=i.ENUM_PUBLISH_STATE.waitingSessionRsp},e.prototype.startPublish=function(e,t,n,r,i){var o,s=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+e+" called"),this.signal&&this.signal.negoInterval&&(this.negoInterval=this.signal.negoInterval),e){var l;this.localStream=t,this.mediaStreamConfig=r,this.channelCount=r.channelCount,this.publishOption=i||{},navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&r&&(r.externalCapture||r.externalMediaStream)&&(this.localStream.onaddtrack=function(){var e,t,n,r;s.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+s.streamId+" Track added");var i=[];(null===(e=s.previewer)||void 0===e?void 0:e.videoTrack)&&i.push(null===(t=s.previewer)||void 0===t?void 0:t.videoTrack);var o=s.localStream.getAudioTracks();if(i.length>1)null==(a=null===(n=s.peerConnection)||void 0===n?void 0:n.getSenders().find((function(e){var t;return(null===(t=e.track)||void 0===t?void 0:t.kind)===i[1].kind})))||a.replaceTrack(i[1]),s.localStream.removeTrack(i[0]);else if(o.length>1){var a;null==(a=null===(r=s.peerConnection)||void 0===r?void 0:r.getSenders().find((function(e){var t;return(null===(t=e.track)||void 0===t?void 0:t.kind)===o[1].kind})))||a.replaceTrack(o[1]),s.localStream.removeTrack(o[0])}}),n&&(this.videoInfo=n),i&&i.videoCodec&&(this.videoCodec=i.videoCodec);var u=null===(o=this.previewer)||void 0===o?void 0:o.previewType;switch(u){case"camera":l=this.stateCenter.settingConfig.getSetting("camera_video_bitrate",!0);break;case"screen":l=this.stateCenter.settingConfig.getSetting("screen_video_bitrate",!0);break;case"custom":l=this.stateCenter.settingConfig.getSetting("custom_video_bitrate",!0)}l&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting "+u+" "+l),this.videoInfo.bitRate=l);var d=this.stateCenter.settingConfig.getSetting("bitrate_mode",!0);d&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting bitrate_mode "+d),this.videoInfo.startBitrate=d);var h=this.stateCenter.settingConfig.getSetting("publish_video_codec",!0);h&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting publish_video_codec "+h),this.videoCodec=h),this.dataReport.addMsgInfo(this.reportSeq,{video_en_codec_id:a.ZegoRTCLogEvent.kZegoTaskPublishStart.video_en_codec_id("VP8"==this.videoCodec?2:0),audio_c_channel_count:a.ZegoRTCLogEvent.kZegoTaskPublishStart.audio_c_channel_count(2==this.channelCount?2:1),audio_en_bps:a.ZegoRTCLogEvent.kZegoTaskPublishStart.audio_en_bps(this.videoInfo.audioBitrate),aec_level:a.ZegoRTCLogEvent.kZegoTaskPublishStart.aec_level(1==r.AEC?2:0==r.AEC?0:2),ans_level:a.ZegoRTCLogEvent.kZegoTaskPublishStart.ans_level(1==r.ANS?2:0==r.ANS?0:2),agc:a.ZegoRTCLogEvent.kZegoTaskPublishStart.agc(1==r.AGC?2:0==r.AGC?0:2),traffic_control_min_video_bitrate:a.ZegoRTCLogEvent.kZegoTaskPublishStart.traffic_control_min_video_bitrate(this.videoInfo.bitRate)}),this.isPeer?this.createOffer():this.createSession(),this.negoTimer=setTimeout((function(){s.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" waiting timeout"),s.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishNegoTimeoutError)}),this.negoInterval)}else this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+e+" streamId is null")},e.prototype.activateSEIInsert=function(e,t){return new Promise((function(e,t){e(!1)}))},e.prototype.createSession=function(e){var t=this;this.sessionSeq=i.getSeq();var n=this.streamId;1==this.streamCenter.testEnvironment&&(n="zegotest-"+this.streamCenter.appid+"-"+this.streamId);var r=this.stateCenter.settingConfig.getSetting("gw_nodes");r&&r instanceof Array&&r.length>0&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" setting "+JSON.stringify(r)),this.gwNodeList=r,this.gwNode=this.gwNodeList[0]||this.gwNode),this.isPeer?(this.dataReport.eventStart(this.reportSeq,"CreateSessionWithSdp"),this.dataReport.eventStart(this.streamReportSeq,"CreateSessionWithSdp"),this.signal.createSessionWithSdp({seq:this.sessionSeq,type:0,mode:0,streamId:n,videoInfo:this.videoInfo,strAuthParam:this.publishOption&&this.publishOption.streamParams||"",sdp:e.sdp,serverHost:this.gwNode},(function(e,n,r){t.handleCreateSessionWithSdpResp(e,n,r)}),(function(n,r){t.dataReport.eventEndWithMsg(t.reportSeq,"CreateSession",{error:n}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"CreateSession",{error:n}),n==i.SEND_MSG_TIMEOUT&&t.peerFailCount<2?(t.peerFailCount++,t.createSession(e)):n==i.SEND_MSG_TIMEOUT&&t.peerFailCount>=2?(t.isPeer=!1,t.streamCenter.isPeer=!1,t.createSession()):t.publishStateUpdateError(n==i.SEND_MSG_TIMEOUT?a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionTimeoutError:a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionRequestError)}))):(this.dataReport.eventStart(this.reportSeq,"CreateSession"),this.dataReport.eventStart(this.streamReportSeq,"CreateSession"),this.signal.createSession(this.sessionSeq,0,0,n,this.publishOption&&this.publishOption.streamParams,this.gwNode,(function(e,n,r){t.handleCreateSessionResp(e,n,r)}),(function(e,n){t.reportSeq,t.dataReport.eventEndWithMsg(t.reportSeq,"CreateSession",{error:e}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"CreateSession",{error:e}),t.publishStateUpdateError(e==i.SEND_MSG_TIMEOUT?a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionTimeoutError:a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionRequestError)}))),this.state=i.ENUM_PUBLISH_STATE.waitingSessionRsp,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" called success"),this.stateNego=i.ENUM_PUBLISH_STATE_NEGO.start},e.prototype.handleCreateSessionResp=function(e,t,n){var r=n.turn_server,i=r.split("?")[0]&&r.split("?")[0].slice(5),o=this.streamCenter.server.split("?"),s=o[1]&&o[1].slice(2);this.dataReport.eventEndWithMsg(this.streamReportSeq,"CreateSession",{sessionId:n.session_id,url:"webrtc://"+i+"/"+s+"/"+this.streamId}),this.dataReport.eventEndWithMsg(this.reportSeq,"CreateSession",{sessionId:n.session_id,url:"webrtc://"+i+"/"+s+"/"+this.streamId}),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" sessionId:"+n.session_id),this.sessionSeq==e?(this.gwNodeList=n.gw_nodes&&n.gw_nodes.length>0?n.gw_nodes:this.gwNodeList,this.gwNode=n.gw_nodes&&n.gw_nodes.length>0?this.gwNodeList[0]:this.gwNode,this.gwNodeTTL=n.gw_nodes_ttl?(new Date).getTime()+1e3*n.gw_nodes_ttl:this.gwNodeTTL,this.stateCenter.clientIP=n.clientip?n.clientip:this.stateCenter.clientIP,0!==n.result?(this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create session failed "+n.result),this.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionRequestError)):(this.sessionId=n.session_id,this.sessionToken=n.session_token,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" create session success "+this.sessionId),this.dataReport.addMsgInfo(this.reportSeq,{session_id:a.ZegoRTCLogEvent.kZegoTaskPublishStart.session_id(this.sessionId)}),this.onCreatePublishSessionSuccess(n))):this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" "+this.streamId+" seq is not match.")},e.prototype.handleCreateSessionWithSdpResp=function(e,t,n){var r=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" sessionId:"+t),this.sessionSeq==e?(this.gwNodeList=n.gw_nodes&&n.gw_nodes.length>0?n.gw_nodes:this.gwNodeList,this.gwNode=n.gw_nodes&&n.gw_nodes.length>0?this.gwNodeList[0]:this.gwNode,this.gwNodeTTL=n.gw_nodes_ttl?(new Date).getTime()+1e3*n.gw_nodes_ttl:this.gwNodeTTL,this.stateCenter.clientIP=n.clientip?n.clientip:this.stateCenter.clientIP,this.dataReport.eventEndWithMsg(this.streamReportSeq,"CreateSessionWithSdp",{sessionId:t}),this.dataReport.eventEndWithMsg(this.reportSeq,"CreateSessionWithSdp",{sessionId:t}),0!==n.result?(this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" create session failed "+n.result),this.publishStateUpdateError({code:a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionRequestError.code,message:a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSessionRequestError.message+" result:"+n.result})):(this.sessionId=t,this.sessionToken=n.session_token,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" get remote session success "+this.streamId),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,t,n){r.onRecvCloseSession(e,t,n)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,t,n){r.onRecvResetSession(e,t,n)})),this.signal.registerPushCallback("PublishEventPush",this.sessionId,(function(e,t,n){r.onRecvPublishEvent(e,t,n)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,t,n){r.onRecvClientInfo(e,t,n)})),this.signal.registerPushCallback("MediaDescUpdatePush",this.sessionId,(function(e,t,n){r.onRecvUpdateMediaDescription(e,t,n)})),this.onGetRemoteOfferSuccess(n.sdp))):this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_PUBLISH+" seq is not match.")},e.prototype.onCreatePublishSessionSuccess=function(e){var t=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+this.streamId+" called");var n=[];if(e.turn_server){var r=e.turn_server,i=this.stateCenter.turnOverTcpOnly,o=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);o&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" setting udp_or_tcp "+o),i="tcp"===o),i&&(r=r.replace("udp","tcp")),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" over tcp "+r),n.push(r)}e.stun_server&&n.push(e.stun_server);var s={iceTransportPolicy:"relay",iceServers:[{urls:n,username:e.turn_username,credential:e.turn_auth_key}]};this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+this.streamId+" username: "+e.turn_username),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+this.streamId+" credential: "+e.turn_auth_key),this.createOffer(s),this.signal.registerPushCallback("CandidateInfoPush",this.sessionId,(function(e,n,r){t.onRecvCandidateInfo(e,n,r)})),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,(function(e,n,r){t.onRecvCloseSession(e,n,r)})),this.signal.registerPushCallback("MediaDescPush",this.sessionId,(function(e,n,r){t.onRecvMediaDescription(e,n,r)})),this.signal.registerPushCallback("SessionResetPush",this.sessionId,(function(e,n,r){t.onRecvResetSession(e,n,r)})),this.signal.registerPushCallback("PublishEventPush",this.sessionId,(function(e,n,r){t.onRecvPublishEvent(e,n,r)})),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,(function(e,n,r){t.onRecvClientInfo(e,n,r)})),this.signal.registerPushCallback("MediaDescUpdatePush",this.sessionId,(function(e,n,r){t.onRecvUpdateMediaDescription(e,n,r)})),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+this.streamId+" call success")},e.prototype.createOffer=function(e){var t,n,r=this;this.peerConnection=new RTCPeerConnection(e),this.peerConnection.onicecandidate=function(e){r.onIceCandidate(e)},this.peerConnection.onsignalingstatechange=function(e){r.onConnectionStateChange(e)},this.peerConnection.oniceconnectionstatechange=function(e){r.onIceConnectionStateChange(e)},this.streamCenter.isDataChannelEnabled&&(this.dataChannel=this.peerConnection.createDataChannel(this.streamId),this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=function(e){r.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+r.streamId+" data channel open"),r.dataChannelState=1},this.dataChannel.onclose=function(e){r.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+r.streamId+" data channel close ")});var i=[],o=[];this.localStream&&(this.localStream.getTracks().forEach((function(e){var t;null===(t=r.peerConnection)||void 0===t||t.addTrack(e,r.localStream)})),(null===(t=this.previewer)||void 0===t?void 0:t.videoTrack)&&(i=[null===(n=this.previewer)||void 0===n?void 0:n.videoTrack]),o=this.localStream.getAudioTracks(),i.length>0&&this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+this.streamId+" video device: "+i[0].label),o.length>0&&this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+this.streamId+" audio device: "+o[0].label));var s={offerToReceiveAudio:o.length>0?1:0,offerToReceiveVideo:i.length>0?1:0};this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+this.streamId+" createOffer: "+JSON.stringify(s)),this.dataReport.eventStart(this.reportSeq,"CreateOffer"),this.dataReport.eventStart(this.streamReportSeq,"CreateOffer"),this.peerConnection.createOffer(s).then((function(e){r.dataReport.eventEnd(r.reportSeq,"CreateOffer"),r.dataReport.eventEnd(r.streamReportSeq,"CreateOffer"),r.onCreateOfferSuccess(e)}),(function(e){r.dataReport.eventEndWithMsg(r.reportSeq,"CreateOffer",{error:e.toString()}),r.dataReport.eventEndWithMsg(r.streamReportSeq,"CreateOffer",{error:e.toString()}),r.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS+" "+r.streamId+" create offer error "+e.toString()),r.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kCreateOfferError,!0)}))},e.prototype.onCreateOfferSuccess=function(e,t,n,r){var i,s=this;t&&(this.isUpdateSDP=!0,r&&(this.updateSDPCallBack=r)),this.videoInfo.bitRate>0&&(e.sdp=this.updateBandwidthRestriction(e.sdp,this.videoInfo.bitRate)),e.sdp=e.sdp.replace(/sendrecv/g,"sendonly");var l=e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)?e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)[0]:null;if(l){var u=l.replace(/sendonly/,"sendrecv");e.sdp=e.sdp.replace(l,u)}e.sdp=e.sdp.replace(/useinbandfec=\d+/,(this.videoInfo.audioBitrate?"maxaveragebitrate="+this.videoInfo.audioBitrate:"")+(2===this.videoInfo.channelCount?";stereo=1":"")),this.localSdpOrder=e.sdp.match(/m=(.\w*)\s/g)||[],this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" local sdp revert "+this.localSdpOrder.join("")),e.sdp=o.SdpUtil.getSDPByVideDecodeType(e.sdp,this.videoCodec,!0),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp1 "+e.sdp.substr(0,e.sdp.length/2)),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+this.streamId+" localSdp2 "+e.sdp.substr(e.sdp.length/2)),this.dataReport.eventStart(this.reportSeq,"SetLocalDescription"),this.dataReport.eventStart(this.streamReportSeq,"SetLocalDescription"),null===(i=this.peerConnection)||void 0===i||i.setLocalDescription(e).then((function(){s.dataReport.eventEnd(s.reportSeq,"SetLocalDescription"),s.dataReport.eventEnd(s.streamReportSeq,"SetLocalDescription"),s.onSetLocalDescriptionSuccess(e,n)}),(function(e){s.dataReport.eventEndWithMsg(s.reportSeq,"SetLocalDescription",{error:e.toString()}),s.dataReport.eventEndWithMsg(s.streamReportSeq,"SetLocalDescription",{error:e.toString()}),s.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CREATE_OFFER_SUCCESS+" "+s.streamId+" error "+e.toString()),s.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSetLocalDescError,!0)}))},e.prototype.updateBandwidthRestriction=function(e,t){var n="AS";return"firefox"===this.stateCenter.browser&&(t=1e3*(t>>>0),n="TIAS"),-1===e.indexOf("b="+n+":")?e.replace(/(m=video.*\r\nc=IN.*\r\n)/g,"$1b="+n+":"+t+"\r\n"):(e=e.replace(new RegExp("b="+n+":.*\r\n","g"),"b="+n+":"+t+"\r\n")).replace("b="+n+":"+t+"\r\n","")},e.prototype.onSetLocalDescriptionSuccess=function(e,t){var n=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" success"),!this.isUpdateSDP&&(this.state=i.ENUM_PUBLISH_STATE.waitingOfferRsp),t&&(this.videoInfo=r(r({},this.videoInfo),t));var o={sdp:e.sdp,width:this.videoInfo.width,height:this.videoInfo.height,frameRate:this.videoInfo.frameRate,video_min_kpbs:this.videoInfo.bitRate,video_max_kpbs:this.videoInfo.bitRate,audio_kpbs:48,keyframe_intv:2};if(this.offerSeq=i.getSeq(),this.isUpdateSDP){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" update sdp");var s=r(r({},o),{seq:this.sessionSeq,peerID:this.peerID,type:0});return this.dataReport.eventStart(this.reportSeq,"SendMediaDescUpdate"),this.dataReport.eventStart(this.streamReportSeq,"SendMediaDescUpdate"),void this.signal.sendMediaDescUpdateReq(this.offerSeq,this.sessionId,s,(function(e,t,n){}),(function(e,t){n.dataReport.eventEndWithMsg(n.reportSeq,"SendMediaDescUpdate",{error:e}),n.dataReport.eventEndWithMsg(n.streamReportSeq,"SendMediaDescUpdate",{error:e}),n.updateSDPCallBack&&n.updateSDPCallBack(-1),n.publishStateUpdateError(e==i.SEND_MSG_TIMEOUT?a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kUpdateMediaDescriptionTimeOut:a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kUpdateMediaDescriptionError)}))}this.isPeer?this.createSession(e):(this.dataReport.eventStart(this.reportSeq,"SendMediaDesc"),this.dataReport.eventStart(this.streamReportSeq,"SendMediaDesc"),this.signal.sendMediaDesc(this.offerSeq,this.sessionId,0,o,(function(e,t,r){n.offerSeq==e&&n.sessionId==t?(n.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+n.streamId+" send success"),n.dataReport.eventEndWithMsg(n.reportSeq,"SendMediaDesc",{mediaDescription:{width:o.width,height:o.height,frameRate:o.frameRate,video_min_kpbs:o.video_min_kpbs,video_max_kpbs:o.video_max_kpbs,audio_kpbs:o.audio_kpbs,keyframe_intv:o.keyframe_intv}}),n.dataReport.eventEndWithMsg(n.streamReportSeq,"SendMediaDesc",{mediaDescription:{width:o.width,height:o.height,frameRate:o.frameRate,video_min_kpbs:o.video_min_kpbs,video_max_kpbs:o.video_max_kpbs,audio_kpbs:o.audio_kpbs,keyframe_intv:o.keyframe_intv}}),n.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+n.streamId+" send success stateNego:waiterAnswer"),n.stateNego=i.ENUM_PUBLISH_STATE_NEGO.waiterAnswer,n.state=i.ENUM_PUBLISH_STATE.waitingServerAnswer):n.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+n.streamId+" seq or sessionId is not equal")}),(function(e,t){n.dataReport.eventEndWithMsg(n.reportSeq,"SendMediaDesc",{error:e}),n.dataReport.eventEndWithMsg(n.streamReportSeq,"SendMediaDesc",{error:e}),n.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kMediaDescError)})),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS+" "+this.streamId+" call success"))},e.prototype.onRecvUpdateMediaDescription=function(e,t,n){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC+" "+this.streamId+" received"),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.dataReport.addEvent(this.reportSeq,"RecvUpdateMediaDesc"),this.dataReport.addEvent(this.streamReportSeq,"RecvUpdateMediaDesc"),this.signal.sendUpdateMediaDescAck(e,this.sessionId,0,this.peerID),1==n.type?this.onGetRemoteOfferSuccess(n.sdp):this.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kMediaDescError)},e.prototype.onRecvMediaDescription=function(e,t,n){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received"),this.state==i.ENUM_PUBLISH_STATE.waitingServerAnswer?(this.stateNego=i.ENUM_PUBLISH_STATE_NEGO.waitingCandidate,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" received stateNego:waitingCandidate"),this.dataReport.addEvent(this.reportSeq,"RecvMediaDesc"),this.dataReport.addEvent(this.streamReportSeq,"RecvMediaDesc"),this.signal.sendMediaDescAck(e,this.sessionId,0),1==n.type?this.onGetRemoteOfferSuccess(n.sdp):this.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kMediaDescError)):this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_MEDIA_DESC+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onGetRemoteOfferSuccess=function(e){var t,n,r,o,s,l,u=this;this.videoInfo.audioBitrate&&48e3!==this.videoInfo.audioBitrate&&(e=e.replace(/maxaveragebitrate=(\d+)/,"maxaveragebitrate="+this.videoInfo.audioBitrate)),this.remoteSdpOrder=e.match(/m=(.\w*)\s/g)||[],this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+NaN+this.remoteSdpOrder.join(""));var d=this.stateCenter.turnOverTcpOnly,h=this.stateCenter.settingConfig.getSetting("udp_or_tcp",!0);if(h&&(this.logger.info("zp.oro.0 setting udp_or_tcp "+h),d="tcp"===h),d&&(null===(t=e.match(/candidate.*/g))||void 0===t||t.forEach((function(t){var n=t.replace(/udp/,"tcp");e=e.replace(t,n)}))),this.logger.info("zp.oro.0 "+this.streamId+" sdp revert "+this.localSdpOrder.join("")+" "+this.remoteSdpOrder.join("")),this.localSdpOrder.join()!==this.remoteSdpOrder.join()&&this.localSdpOrder.length==this.remoteSdpOrder.length){var p=new RegExp("[\\s\\S]*"+this.remoteSdpOrder[0]).exec(e)[0].replace(this.remoteSdpOrder[0],""),f=[],g="";this.localSdpOrder.forEach((function(t){var n=u.remoteSdpOrder.findIndex((function(e){return e==t})),r=new RegExp(t+"[\\s\\S]*"+(u.remoteSdpOrder[n+1]||"")).exec(e)[0].replace(u.remoteSdpOrder[n+1],""),i=/a=mid:(\w)/.exec(r)[1];f.push(i),g+=r||""})),e=p.replace(/a=group:BUNDLE.*/,"a=group:BUNDLE "+f.join(" "))+g,this.localSdpOrder=[],this.remoteSdpOrder=[]}var m=e.match(/m=video(.|\r|\n)*a=rtpmap(.|\r|\n)*(a=fmtp:(\d+).*)/);if("chrome"==this.stateCenter.browser){var _=0;if(this.videoInfo.bitRate&&"target"===this.videoInfo.startBitrate&&(_=this.videoInfo.bitRate),null!==m&&_){var v=m[3];e=-1!==v.indexOf("apt=")?e.replace(v,"a=fmtp:96 x-google-start-bitrate="+_+"\n"+v):e.replace(v,v+";x-google-start-bitrate="+_)}}if(this.videoInfo.bitRate>0){var E=/b=AS.*(\r\n|\n)/.test(e);e=E?e.replace(/AS:(\d+)/,"AS:"+this.videoInfo.bitRate):e.replace(/m=video.*(\r\n|\n)c=.*(\r\n|\n)/,"$&b=AS:"+this.videoInfo.bitRate+"\n");var A=null===(n=this.peerConnection)||void 0===n?void 0:n.getSenders().find((function(e){return e.track&&"video"===e.track.kind}));if(A&&A.getParameters&&A.setParameters){var y=A.getParameters();y.encodings&&0!=y.encodings.length||(y.encodings=[{}]),y.encodings[0].maxBitrate=1e3*this.videoInfo.bitRate;var S=this.lastPublishStats.frameWidth,b=(null===(o=null===(r=this.previewer)||void 0===r?void 0:r.cameraMaxResolution)||void 0===o?void 0:o.maxWidth)||0,C=null===(s=this.previewer)||void 0===s?void 0:s.videoInfo.width,T=S?Math.min(b,S):b;if(b&&C){var I=Math.max(T/C,1);y.encodings[0].scaleResolutionDownBy=I}A.setParameters(y)}}this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+" remoteSdp:",e);var R={type:"answer",sdp:e,toJSON:function(){}};this.dataReport.eventStart(this.reportSeq,"SetRemoteDescription"),this.dataReport.eventStart(this.streamReportSeq,"SetRemoteDescription"),null===(l=this.peerConnection)||void 0===l||l.setRemoteDescription(new RTCSessionDescription(R)).then((function(){u.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+u.streamId+" set success"),u.dataReport.eventEnd(u.reportSeq,"SetRemoteDescription"),u.dataReport.eventEnd(u.streamReportSeq,"SetRemoteDescription"),u.stateNego==i.ENUM_PUBLISH_STATE_NEGO.iceConnected&&u.updateSDPCallBack&&(u.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+u.streamId+" update sdp success"),u.updateSDPCallBack(0),u.updateSDPCallBack=void 0,u.isUpdateSDP=!1)}),(function(e){u.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+u.streamId+" failed: "+e.toString()),u.dataReport.eventEndWithMsg(u.reportSeq,"SetRemoteDescription",{error:e.toString()}),u.dataReport.eventEndWithMsg(u.streamReportSeq,"SetRemoteDescription",{error:e.toString()}),u.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kSetRemoteDescError,!0)})),this.state=i.ENUM_PUBLISH_STATE.waitingServerICE,this.logger.debug(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_GET_REMOTE_DESCRIPTION+" "+this.streamId+" call success")},e.prototype.onIceConnectionStateChange=function(e){var t=this;this.state!=i.ENUM_PUBLISH_STATE.stop&&null!=this.peerConnection&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateChanged "+this.peerConnection.iceConnectionState),"connected"===this.peerConnection.iceConnectionState?(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" connected state "+this.state),this.dataReport.eventEnd(this.reportSeq,"IceConnected"),this.dataReport.eventEnd(this.streamReportSeq,"IceConnected"),this.stateNego=i.ENUM_PUBLISH_STATE_NEGO.iceConnected,this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" "+this.streamId+" stateNego:iceConnected"),this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),null!=this.iceDisconnectedTimer&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.publishEvent?this.publishSuccess():(this.firstGetStatsTimer&&clearTimeout(this.firstGetStatsTimer),this.firstGetStatsTimer=null,this.firstGetStatsTimer=setTimeout((function(){var e;t.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" get first stats state "+t.state),t.state!==i.ENUM_PUBLISH_STATE.publishing&&(null===(e=t.peerConnection)||void 0===e||e.getStats().then((function(e){t.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" get first stats suc"),e.size>0&&t.publishSuccess()})))}),1e3))):"closed"===this.peerConnection.iceConnectionState?(this.dataReport.addEvent(this.reportSeq,"IceClosed"),this.stateNego=i.ENUM_PUBLISH_STATE_NEGO.iceClosed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)):"failed"===this.peerConnection.iceConnectionState?(this.dataReport.addEvent(this.reportSeq,"IceFailed"),this.stateNego=i.ENUM_PUBLISH_STATE_NEGO.iceFailed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)):"disconnected"===this.peerConnection.iceConnectionState&&(this.dataReport.addEvent(this.reportSeq,"IceDisconnected"),this.logger.warn(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" ice disconnected "),this.stateNego=i.ENUM_PUBLISH_STATE_NEGO.iceDisconnected,this.iceDisconnectedTimer||(this.iceDisconnectedTimer=setTimeout((function(){t.checkPublishConnectionFailedState("disconnected")}),this.iceDisconnectedMaxTime))))},e.prototype.onIceCandidate=function(e){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate"+e.candidate),e.candidate)if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CANDIDATE+" "+this.streamId+" candidate"+e.candidate.candidate),this.state<i.ENUM_PUBLISH_STATE.connecting||this.state==i.ENUM_PUBLISH_STATE.stop)this.candidateInfo.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex});else{var t={candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex};this.sendCandidateInfo([t])}},e.prototype.sendCandidateInfo=function(e){var t=this;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" called"),!(e=e.filter((function(e){return e.candidate.indexOf("relay")>0})))||e.length<1?this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" cancelled"):(this.dataReport.eventStart(this.reportSeq,"SendIceCandidate"),this.dataReport.eventStart(this.streamReportSeq,"SendIceCandidate"),this.stateNego!==i.ENUM_PUBLISH_STATE_NEGO.iceConnected&&(this.stateNego=i.ENUM_PUBLISH_STATE_NEGO.sendCandidate),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+this.streamId+" stateNego:sendCandidate"),this.signal.sendCandidateInfo(i.getSeq(),this.sessionId,e,(function(e,n,r){t.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+t.streamId+" send success"),t.dataReport.eventEnd(t.reportSeq,"SendIceCandidate"),t.dataReport.eventEnd(t.streamReportSeq,"SendIceCandidate")}),(function(e,n){t.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SEND_CANDIDATE_INFO+" "+t.streamId+" failed to send: "+e.toString()),t.dataReport.eventEndWithMsg(t.reportSeq,"SendIceCandidate",{error:e}),t.dataReport.eventEndWithMsg(t.streamReportSeq,"SendIceCandidate",{error:e}),t.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kCandidateError)})))},e.prototype.onConnectionStateChange=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_CONNECTION_STATE_CHANGE+" "+this.streamId+" called "+e.target.signalingState)},e.prototype.onRecvCandidateInfo=function(e,t,n){var r,o=this;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" received "+JSON.stringify(n.infos)),this.state==i.ENUM_PUBLISH_STATE.waitingServerICE){this.dataReport.addEvent(this.reportSeq,"RecvIceCandidate"),this.dataReport.addEvent(this.streamReportSeq,"RecvIceCandidate"),this.signal.sendCandidateInfoAck(e,this.sessionId,0),this.sendCandidateInfo(this.candidateInfo),this.candidateInfo=[];for(var s=0;s<n.infos.length;s++){var l={sdpMid:n.infos[s].sdpMid,sdpMLineIndex:n.infos[s].sdpMLineIndex,candidate:n.infos[s].candidate};this.logger.debug(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+""+this.streamId+" candidate "+l.candidate),null===(r=this.peerConnection)||void 0===r||r.addIceCandidate(new RTCIceCandidate(l)).then((function(){o.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+o.streamId+" add success")}),(function(e){o.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+o.streamId+" add error "+e.toString()),o.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kCandidateError,!0)}))}this.state=i.ENUM_PUBLISH_STATE.connecting,this.dataReport.eventStart(this.reportSeq,"IceConnected"),this.dataReport.eventStart(this.streamReportSeq,"IceConnected")}else this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CANDIDATE_INFO+" "+this.streamId+" current state "+this.state+" not allowed")},e.prototype.onRecvCloseSession=function(e,t,n){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLOSE_SESSION+""+this.streamId+" "+JSON.stringify(n)),this.dataReport.addEvent(this.reportSeq,"RecvCloseSession"),this.signal.sendCloseSessionAck(e,this.sessionId,0);var r=n.err_info?JSON.parse(n.err_info.toLowerCase()):{},i=r.action?r.action:null,o=1*n.reason,s=JSON.parse(JSON.stringify(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishSessionClosedError));s.message+=" reason:"+o+" "+(i?" action:"+i:""),1011===r.err&&(s=a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kMediaServerForbidError),1014===r.err&&(s=a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishTokenExpiredError),this.negoTimer&&clearTimeout(this.negoTimer);var l=![4,8,10,11,12,14,26,27].includes(o)&&![2,5,6].includes(i);this.publishStateUpdateError(s,l)},e.prototype.onRecvResetSession=function(e,t,n){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_RESET_SESSION+" "+this.streamId+" received "),t==this.sessionId){this.signal.sendCloseSessionAck(e,this.sessionId,0);var r=a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kPublishSessionClosedError;this.negoTimer&&clearTimeout(this.negoTimer),this.publishStateUpdateError(r)}else this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_RESET_SESSION+" "+this.streamId+" cannot find session")},e.prototype.onRecvPublishEvent=function(e,t,n){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_PUBLISH_EVENT+" "+this.streamId+" received"),this.publishEvent=!0,this.firstGetStatsTimer&&(clearTimeout(this.firstGetStatsTimer),this.firstGetStatsTimer=null),this.stateNego===i.ENUM_PUBLISH_STATE_NEGO.iceConnected&&0==n.event&&this.publishSuccess()},e.prototype.onRecvClientInfo=function(e,t,n){this.stateCenter.clientIP!==n.clientip&&this.logger.warn(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_RECV_CLIENT_INFO+" client ip changed "+this.stateCenter.clientIP+" "+n.clientip),this.stateCenter.clientIP=n.clientip,this.peerID=n.peer_id;var r=this.previewer;if(r&&null!==r.activateSEIConfig){var i=null==r?void 0:r.activateSEIConfig,o=i.action,s=i.infoType;this.activateSEIInsert(o,s)}},e.prototype.checkPublishConnectionFailedState=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE+" streamID "+this.streamId," state "+this.state+" connectionState "+e),this.publishStateUpdateError(a.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kMediaConnectionError)},e.prototype.setPublishQualityTimer=function(){var e=this;null==this.qualityTimer&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER+" "+this.streamId+" called"),this.clearPublishQualityTimer(),this.qualityTimer=setInterval((function(){e.peerConnectionGetStats()}),this.qualityTimeInterval),this.lastPublishStats={audioPacketsLost:0,videoPacketsLost:0,videoPacketsSent:0,audioPacketsSent:0,audioRetransmittedPacketsSent:0,videoTime:(new Date).getTime(),audioTime:(new Date).getTime(),time:0,audioBytesSent:0,videoBytesSent:0,framesEncoded:0,framesSent:0,videoRetransmittedPacketsSent:0},this.qualitySeq=i.getSeq(),this.qualityCount=0)},e.prototype.peerConnectionGetStats=function(e){var t=this;if(this.peerConnection){var n=[this.peerConnection.getStats(null)];"chrome"==this.stateCenter.browser&&n.push(new Promise((function(e,n){var r;null===(r=t.peerConnection)||void 0===r||r.getStats((function(t){return e(t)}),(function(e){return n(e)}))}))),Promise.all(n).then((function(n){var r=t.getPublishStats(n[0],n[1]);e&&e(r,n[0],n[1])})).catch((function(e){t.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_SET_PLAYER_QUALITY_TIMER+" "+t.streamId+" getStats error "+e.toString())}))}},e.prototype.getPublishStats=function(e,t){var n,r=this;if(e){for(var o,l=document.querySelectorAll("video, audio"),u=0;u<l.length;u++)l[u].srcObject===this.localStream&&(o=l[u]);var d=this.streamCenter.checkPreview(this.localStream),h={audioCodec:"opus",audioTargetBitrate:this.videoInfo.audioBitrate/1e3||0,audioBitrate:0,videoTargetBitrate:this.videoInfo.bitRate||0,videoTargetFPS:this.videoInfo.frameRate||0,videoBitrate:0,audioFPS:0,audioLevel:0,audioInputLevel:0,audioPacketsLost:0,audioPacketsLostRate:0,sendLevel:0,samplingRate:0,videoFPS:0,nackCount:0,pliCount:0,audioQuality:0,videoQuality:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoPacketsLost:0,videoPacketsLostRate:0,totalRoundTripTime:0,currentRoundTripTime:0,googBandwidthLimitedResolution:void 0,videoCodecName:"",audioCodecName:"",googCpuLimitedResolution:void 0,googAvailableSendBandwidth:0,googActualEncBitrate:0,googTargetEncBitrate:0,googFrameWidthInput:0,googFrameHeightInput:0,googFrameRateInput:0,codecImplementationName:"",videoMuteState:(null===(n=null==d?void 0:d.videoTrack)||void 0===n?void 0:n.enabled)?"0":"1",audioMuteState:this.localStream.getAudioTracks().length>0&&this.localStream.getAudioTracks()[0].enabled?"0":"1",muted:o?o.muted:void 0,paused:o?o.paused:void 0,volume:o?o.volume:void 0,sinkId:o?o.sinkId:void 0},p=this.lastPublishStats.time,f=0,g=0,m=0,_=0,v=0,E=0;e.forEach((function(e){if(("outbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesSent)&&"audio"==e.mediaType)0!=p&&(h.audioBitrate=8*(e.bytesSent-r.lastPublishStats.audioBytesSent)/(e.timestamp-p),h.audioFPS=(e.packetsSent-(e.retransmittedPacketsSent-r.lastPublishStats.audioRetransmittedPacketsSent)-r.lastPublishStats.audioPacketsSent)/(e.timestamp-p)*1e3,m=(e.retransmittedPacketsSent-r.lastPublishStats.audioRetransmittedPacketsSent)/(e.packetsSent-r.lastPublishStats.audioPacketsSent)),h.audioBitrate<0&&(h.audioBitrate=0),r.lastPublishStats.audioBytesSent=e.bytesSent,r.lastPublishStats.time=e.timestamp,r.lastPublishStats.audioPacketsSentTimeStamp=e.packetsSent-r.lastPublishStats.audioPacketsSent,r.lastPublishStats.audioPacketsSent=e.packetsSent,r.lastPublishStats.audioRetransmittedPacketsSent=e.retransmittedPacketsSent;else if(("outbound-rtp"==e.type||"ssrc"==e.type&&null!=e.bytesSent)&&"video"==e.mediaType)0!=p&&(h.videoBitrate=8*(e.bytesSent-r.lastPublishStats.videoBytesSent)/(e.timestamp-p),h.videoFPS=1e3*(e.framesEncoded-r.lastPublishStats.framesEncoded)/(e.timestamp-p),_=(e.retransmittedPacketsSent-r.lastPublishStats.videoRetransmittedPacketsSent)/(e.packetsSent-r.lastPublishStats.videoPacketsSent)),h.videoBitrate<0&&(h.videoBitrate=0),h.videoFPS<0&&(h.videoFPS=0),h.nackCount=e.nackCount,h.pliCount=e.pliCount,r.lastPublishStats.videoBytesSent=e.bytesSent,r.lastPublishStats.framesEncoded=e.framesEncoded,r.lastPublishStats.time=e.timestamp,r.lastPublishStats.videoPacketsSentTimeStamp=e.packetsSent-r.lastPublishStats.videoPacketsSent,r.lastPublishStats.videoPacketsSent=e.packetsSent,r.lastPublishStats.videoRetransmittedPacketsSent=e.retransmittedPacketsSent;else if("remote-inbound-rtp"==e.type&&"video"==e.kind){e.packetsLost>0&&(h.videoPacketsLost=e.packetsLost);var t=e.packetsLost-r.lastPublishStats.videoPacketsLost;h.videoPacketsLostRate=t>0?t/r.lastPublishStats.videoPacketsSentTimeStamp:0,e.packetsLost>0&&(r.lastPublishStats.videoPacketsLost=e.packetsLost),r.lastPublishStats.videoTime=e.timestamp,g=1e3*e.roundTripTime,E=e.jitter}else if("remote-inbound-rtp"==e.type&&"audio"==e.kind){e.packetsLost>0&&(h.audioPacketsLost=e.packetsLost);var n=e.packetsLost-r.lastPublishStats.audioPacketsLost;h.audioPacketsLostRate=n>0?n/r.lastPublishStats.audioPacketsSentTimeStamp:0,e.packetsLost>0&&(r.lastPublishStats.audioPacketsLost=e.packetsLost),r.lastPublishStats.audioTime=e.timestamp,f=1e3*e.roundTripTime,v=e.jitter}else if("media-source"==e.type&&("audio"==e.kind||e.id.toLowerCase().indexOf("audio")>=0))h.audioLevel=e.audioLevel,h.sendLevel=e.totalAudioEnergy,h.audioInputLevel=32767*e.totalAudioEnergy,h.samplingRate=e.totalSamplesDuration;else if("track"==e.type&&("video"==e.kind||e.id.indexOf("video")>=0||e.frameWidth)){if(h.frameHeight=e.frameHeight,h.frameWidth=e.frameWidth,0===p||r.lastPublishStats.frameHeight===e.frameHeight&&r.lastPublishStats.frameWidth===e.frameWidth)0===p&&(r.lastPublishStats.frameHeight=e.frameHeight,r.lastPublishStats.frameWidth=e.frameWidth);else{var o=i.getReportSeq();r.dataReport.newReport(o,a.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.event),r.dataReport.addMsgInfo(o,{session_id:a.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.session_id(r.sessionId),w:a.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.w(e.frameWidth),h:a.ZegoRTCLogEvent.kZegoTaskVideoCaptureSize.h(e.frameHeight)}),r.dataReport.uploadReport(o),r.lastPublishStats.frameHeight=e.frameHeight,r.lastPublishStats.frameWidth=e.frameWidth}0!=p&&(h.videoTransferFPS=1e3*(e.framesSent-r.lastPublishStats.framesSent)/(e.timestamp-p)),h.videoTransferFPS<0&&(h.videoTransferFPS=0),r.lastPublishStats.framesSent=e.framesSent}else"candidate-pair"==e.type&&(null!=e.totalRoundTripTime&&(h.totalRoundTripTime=e.totalRoundTripTime),null!=e.currentRoundTripTime&&(h.currentRoundTripTime=e.currentRoundTripTime))})),t&&t.result().forEach((function(e){"ssrc"==e.type&&e.names().indexOf("googBandwidthLimitedResolution")>=0&&(h.googBandwidthLimitedResolution=e.stat("googBandwidthLimitedResolution")),"ssrc"==e.type&&"video"==e.stat("mediaType")&&e.names().indexOf("googCodecName")>=0&&(h.videoCodecName=e.stat("googCodecName")),"ssrc"==e.type&&"audio"==e.stat("mediaType")&&e.names().indexOf("googCodecName")>=0&&(h.audioCodecName=e.stat("googCodecName")),"ssrc"==e.type&&e.names().indexOf("googCpuLimitedResolution")>=0&&(h.googCpuLimitedResolution=e.stat("googCpuLimitedResolution")),"ssrc"==e.type&&e.names().indexOf("googFrameWidthInput")>=0&&(h.googFrameWidthInput=e.stat("googFrameWidthInput")),"ssrc"==e.type&&e.names().indexOf("googFrameHeightInput")>=0&&(h.googFrameHeightInput=e.stat("googFrameHeightInput")),"ssrc"==e.type&&e.names().indexOf("googFrameRateInput")>=0&&(h.googFrameRateInput=e.stat("googFrameRateInput")),"ssrc"==e.type&&e.names().indexOf("codecImplementationName")>=0&&(h.codecImplementationName=e.stat("codecImplementationName")),"VideoBwe"==e.type&&e.names().indexOf("googAvailableSendBandwidth")>=0&&(h.googAvailableSendBandwidth=e.stat("googAvailableSendBandwidth")),"VideoBwe"==e.type&&e.names().indexOf("googActualEncBitrate")>=0&&(h.googActualEncBitrate=e.stat("googActualEncBitrate")),"VideoBwe"==e.type&&e.names().indexOf("googTargetEncBitrate")>=0&&(h.googTargetEncBitrate=e.stat("googTargetEncBitrate")),"VideoBwe"==e.type&&e.names().indexOf("googRetransmitBitrate")>=0&&(h.googRetransmitBitrate=e.stat("googRetransmitBitrate"))})),"chrome"===this.stateCenter.browser&&this.handleEncBitrate(Number.parseInt(h.googTargetEncBitrate),Number.parseInt(h.googActualEncBitrate),Number.parseInt(h.googRetransmitBitrate)),g=isNaN(g)||g<0?0:g,_=isNaN(_)||_<0?0:_,E=isNaN(E)||E<0?0:E,f=isNaN(f)||f<0?0:f,m=isNaN(m)||m<0?0:m,v=isNaN(v)||v<0?0:v;var A=s.ClientUtil.getNetQuality(g,_,E),y=s.ClientUtil.getNetQuality(f,m,v);h.videoQuality=p>0?s.ClientUtil.quality2QualityGrade(A):0,h.audioQuality=p>0?s.ClientUtil.quality2QualityGrade(y):0;var S=Math.min(A,y);this.netQuality=S,p>0&&S<=i.QUALITY_CONSTANT.MiddleMinQuality&&(new Date).getTime()>this.probeTime+this.probeInterval&&(this.logger.info(c.ZEGO_WEBRTC_ACTION.PLAYER_SET_PLAYER_QUALITY_TIMER+" netQuality "+S+" start net probe"),this.probeState=i.ENUM_PROBE_STATE.tryProbe,this.streamCenter.startNetProbe(!0,this,this.gwNodeList),this.probeTime=(new Date).getTime());var b={video:{videoBitrate:h.videoBitrate,videoFPS:h.videoFPS,videoTransferFPS:h.videoTransferFPS,frameHeight:h.frameHeight,frameWidth:h.frameWidth,muteState:h.videoMuteState,videoQuality:h.videoQuality,videoPacketsLost:h.videoPacketsLost,videoPacketsLostRate:h.videoPacketsLostRate},audio:{audioBitrate:h.audioBitrate,audioCodec:h.audioCodec,muteState:h.audioMuteState,audioQuality:h.audioQuality,audioPacketsLost:h.audioPacketsLost,audioPacketsLostRate:h.audioPacketsLostRate,audioFPS:h.audioFPS},nackCount:h.nackCount,pliCount:h.pliCount,totalRoundTripTime:h.totalRoundTripTime,currentRoundTripTime:h.currentRoundTripTime};return void 0!==h.videoPacketsLost&&(b.video.videoPacketsLost=h.videoPacketsLost,b.video.videoPacketsLostRate=h.videoPacketsLostRate,b.audio.audioPacketsLost=h.audioPacketsLost,b.audio.audioPacketsLostRate=h.audioPacketsLostRate),void 0!==h.muted&&(b.muted=h.muted,b.paused=h.paused,b.volume=h.volume,b.sinkId=h.sinkId),void 0!==h.googBandwidthLimitedResolution&&(b.googBandwidthLimitedResolution=h.googBandwidthLimitedResolution,b.video.googCodecName=h.videoCodecName,b.audio.googCodecName=h.audioCodecName,b.googCpuLimitedResolution=h.googCpuLimitedResolution,b.googFrameWidthInput=h.googFrameWidthInput,b.googFrameHeightInput=h.googFrameHeightInput,b.googFrameRateInput=h.googFrameRateInput,b.codecImplementationName=h.codecImplementationName,b.googAvailableSendBandwidth=h.googAvailableSendBandwidth,b.googActualEncBitrate=h.googActualEncBitrate,b.googTargetEncBitrate=h.googTargetEncBitrate),0!==p&&(this.uploadPublishQuality(h),this.onPublishQualityUpdate(this.streamId,b,e,t)),b}},e.prototype.uploadPublishQuality=function(e){var t=this;if(this.qualityUpload){var n=(new Date).getTime();(0==this.qualityUploadLastTime||n-this.qualityUploadLastTime>=this.qualityUploadInterval)&&(e.stream_type="publish",e.stream_id=this.streamId,e.timeStamp=parseInt(Math.round(n/1e3).toString()),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_UPLOAD_PUBLISH_QUALITY+" "+this.streamId+" upload"+JSON.stringify(e)),this.streamCenter.updateQuality(0,e),this.signal.QualityReport(i.getSeq(),this.sessionId,e,(function(e,n,r){void 0!==r.report&&(t.qualityUpload=r.report,t.qualityUploadInterval=r.report_interval_ms)}),(function(e,n){t.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_UPLOAD_PUBLISH_QUALITY+" "+t.streamId+" upload failed "+e)})),this.qualityUploadLastTime=n)}},e.prototype.stopPublish=function(){if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_PUBLISH+"  .1 "+this.streamId+" called"),Object.keys(this.streamCenter.publisherList).length=1)for(var e in this.streamCenter.playerList){var t=this.streamCenter.playerList[e].player;t.state==i.ENUM_PLAY_STATE.playing&&t.broadcasterStatus==i.ENUM_BROADCASTER_STATUS.start&&(this.signal&&this.signal.sendBroadcasterStatus(i.getSeq(),t.sessionId,0),t.broadcasterStatus=i.ENUM_BROADCASTER_STATUS.stop)}this.stopMixingAudio(),this.stopMixingBuffer(),this.stopEffect(),this.sessionId&&!this.closeSessionSignal&&this.signal.sendCloseSession(i.getSeq(),this.sessionId,0),this.dataReport.eventEndWithMsg(this.streamReportSeq,"PublishState",{state:this.state+""}),this.dataReport.addEvent(this.streamReportSeq,"StopPublish"),this.dataReport.addMsgExt(this.streamReportSeq,{stream:this.streamId,sessionId:this.sessionId}),this.dataReport.addMsgInfo(this.streamReportSeq,{itemtype:"RTCPublishStream"}),this.dataReport.uploadReport(this.streamReportSeq,"RTCPublishStream"),this.resetPublish()},e.prototype.onPublishStateUpdate=function(e,t,n,r){},e.prototype.onPublishQualityUpdate=function(e,t,n,r){},e.prototype.onDisconnect=function(e){this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_DISCONNECT+" "+this.streamId+" call"),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_ON_DISCONNECT+" "+this.streamId+" websocket disconnect"),this.dataReport.addEvent(this.reportSeq,"OnDisconnect"),this.publishStateUpdateError(e||a.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kWebsocketDisconnectedError,!!e)},e.prototype.playEffect=function(e,t,n,r){},e.prototype.pauseEffect=function(e){},e.prototype.resumeEffect=function(e){},e.prototype.stopEffect=function(e){},e.prototype.setEffectVolume=function(e,t){},e.prototype.startMixingAudio=function(e){},e.prototype.stopMixingAudio=function(e){},e.prototype.mixingBuffer=function(e,t,n){},e.prototype.stopMixingBuffer=function(e){},e.prototype.setMixingAudioVolume=function(e,t){},e.prototype.publishSuccess=function(){var e;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" call"),this.isUpdateSDP&&this.updateSDPCallBack)return this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" "+this.streamId+" update sdp success"),this.updateSDPCallBack(0),this.updateSDPCallBack=void 0,void(this.isUpdateSDP=!1);for(var t in this.state!=i.ENUM_PUBLISH_STATE.publishing&&this.onPublishStateUpdate(i.ENUM_PUBLISH_STATE_UPDATE.start,this.streamId,{code:0,message:""},!0),this.isPeer&&(this.peerFailCount=0),this.state=i.ENUM_PUBLISH_STATE.publishing,this.dataReport.eventStart(this.reportSeq,"PublishState"),this.dataReport.eventStart(this.streamReportSeq,"PublishState"),this.streamCenter.playerList){var n=this.streamCenter.playerList[t].player;n.state==i.ENUM_PLAY_STATE.playing&&n.broadcasterStatus==i.ENUM_BROADCASTER_STATUS.stop&&(this.signal&&this.signal.sendBroadcasterStatus(i.getSeq(),n.sessionId,1),n.broadcasterStatus=i.ENUM_BROADCASTER_STATUS.start)}this.setPublishQualityTimer();var r=2,o=2,s=null===(e=this.previewer)||void 0===e?void 0:e.videoTrack,a=0!==this.localStream.getAudioTracks().length&&this.localStream.getAudioTracks()[0];s&&!0===s.enabled&&(r=0),a&&!0===a.enabled&&(o=0),this.sendStreamStatus(r,o),this.streamCenter.soundLevelDelegate&&this.previewer&&this.previewer.startSoundLevel(),this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_PUBLISH_SUCCESS+" call success")},e.prototype.startSoundLevel=function(){var e;if(this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" call streamID: "+this.streamId),this.localStream&&0!=this.localStream.getAudioTracks().length)try{null===(e=this.previewer)||void 0===e||e.startSoundLevel()}catch(e){this.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" "+this.streamId+" get sound level failed "+e)}else this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_START_SOUND_LEVEL+" "+this.streamId+" local stream no found")},e.prototype.stopSoundLevel=function(){var e;this.logger.info(c.ZEGO_WEBRTC_ACTION.PUBLISHER_STOP_SOUND_LEVEL+" call streamID: "+this.streamId),null===(e=this.previewer)||void 0===e||e.stopSoundLevel()},e.prototype.rebackMic=function(){var e,t=this;if(this.peerConnection&&this.micTrack instanceof MediaStreamTrack&&0==this.audioMixList.length&&0==Object.keys(this.arrayBufferMap).length&&0==this.effectList.length){var n=null===(e=this.peerConnection)||void 0===e?void 0:e.getSenders().find((function(e){var n,r;return(null===(n=e.track)||void 0===n?void 0:n.kind)===(null===(r=t.micTrack)||void 0===r?void 0:r.kind)}));n&&(n.replaceTrack(this.micTrack),this.localStream.removeTrack(this.localStream.getAudioTracks()[0]),this.localStream.addTrack(this.micTrack))}},e.prototype.handleEncBitrate=function(e,t,n){var r,i=this,o=1e3*this.videoInfo.bitRate,a=0;if(t>0){this.needIncMax||this.gotMax||(this.probeCount++,t>=.75*e?(this.probeCount>=10&&this.initFitCnt>=.6*this.probeCount&&(this.gotMax=!0,this.targetRate=o),this.initFitCnt++):this.probeCount>=10&&this.initFitCnt/this.probeCount<.3&&(this.needIncMax=!0));var l=s.ClientUtil.arrAvg(this.totalBitrateArray,t,10);if(this.needIncMax)if(l>=1.05*o){if(this.targetRate>o){var u=void 0;l>e?(u=l-e,this.targetRate-=u):(u=l-o,this.targetRate-=u),this.targetRate=Math.max(this.targetRate,o),this.targetRate=Math.min(this.targetRate,2*o),a=this.targetRate}}else l<.8*o&&(0===this.targetRate&&(this.targetRate=e),this.targetRate>=o?this.targetRate=this.targetRate+.08*o:this.targetRate=1.05*this.targetRate,this.targetRate=Math.min(this.targetRate,2*o),a=this.targetRate)}if(n>0&&n<o){var d=s.ClientUtil.arrAvg(this.totalRetransRateArray,n,5);this.needIncMax?d+t>1.05*o&&(u=d+t-o,this.targetRate-=u,this.targetRate=Math.max(this.targetRate,o-d),a=this.targetRate):a=this.targetRate-d}else this.targetRate<o&&(this.targetRate=o,a=this.targetRate);if(a>0){a=s.ClientUtil.arrAvg(this.totalTargetRateArray,a,5);var h=null===(r=this.peerConnection)||void 0===r?void 0:r.getSenders().find((function(e){return e.track&&"video"===e.track.kind}));if(!h)return;var p=h.getParameters();p.encodings||(p.encodings=[{}]),p.encodings[0].maxBitrate=a,h.setParameters(p).catch((function(e){i.logger.error(c.ZEGO_WEBRTC_ACTION.PUBLISHER_HANDLE_ENC_BITRATE+" "+e)}))}},e.prototype.resetEncBitrate=function(){this.needIncMax=!1,this.probeCount=0,this.gotMax=!1,this.initFitCnt=0,this.targetRate=0,this.totalBitrateArray=[],this.totalTargetRateArray=[],this.totalRetransRateArray=[]},e.prototype.replacePublishedTrack=function(e,t){return void 0===t&&(t=!1),{errorCode:-1,extendedData:"should install advanced module first"}},e.prototype.sendStreamStatus=function(e,t,n){var r=this;void 0===n&&(n=0),this.camera_status=e,this.mic_status=t,n++,this.signal.sendStreamStatus(i.getSeq(),this.sessionId,e,t,this.streamId,(function(){r.camera_status===e&&r.mic_status===t&&n<=1&&r.sendStreamStatus(e,t,n)}))},e}();t.ZegoPublish=l},5019:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSignal=void 0;var i=n(6706),o=n(1089),s=n(2752),a=function(){function e(e,t){this.sendDataMap={},this.sendDataList=new i.LinkedList,this.sendDataCheckOnceCount=100,this.signalSeq=0,this.pushCallback={},this.sessionInfos={},this.tryHeartbeatCount=0,this.heartbeatInterval=1e4,this.sendDataTimeout=5e3,this.sendDataDropTimeout=1e4,this.sendDataCheckTimer=null,this.sendDataCheckInterval=2e3,this.checkMessageList=["ActivateVideoPlayStreamReq","ActivateAudioPlayStreamReq","CreateSessionReq","CreateSessionWithSdpReq","ActivateSEIInsertReq","StreamStatusNotify","MediaDescUpdateReq"],this.tryConnectCount=1,this.tryConnectTimer=null,this.tryConnectInterval=3e3,this.state=i.ENUM_CONNECT_STATE.disconnect,this.tokenType=0,this.browser=this.getBrowserAndVersion(),this.platform=navigator.platform,this.negoInterval=25e3,this.negoTryCount=1,this.negoTryMaxCount=2,this.logger=e,this.stateCenter=t,this.stateCenter.streamConnectTime&&(this.tryConnectInterval=this.stateCenter.streamConnectTime)}return e.prototype.getBrowserAndVersion=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];return/trident/i.test(n[1])?{name:"IE",version:(e=/\brv[ :]+([\d\.]+)/g.exec(t)||[])[1]||""}:"Chrome"===n[1]&&null!=(e=t.match(/\bOPR|Edge\/([\d\.]+)/))?{name:"Opera",version:e[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/([\d+\.]+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]})},e.prototype.setSessionInfo=function(e,t){this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_SET_SESSION_INFO+" call"),this.appid=e+"",this.userid=t},e.prototype.onDisconnect=function(e,t){},e.prototype.onUpdateHeartBeatInterval=function(e){},e.prototype.resetConnectTimer=function(){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_RESET_CONNECT_TIMER+" call"),clearTimeout(this.tryConnectTimer),this.tryConnectTimer=null,this.tryConnectCount=0},e.prototype.bindWebSocketHandle=function(){var e=this;this.tryHeartbeatCount=0,this.tryConnectInterval=this.stateCenter.streamConnectTime?this.stateCenter.streamConnectTime:3e3,this.websocket.onmessage=function(t){var n=JSON.parse(t.data);e.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" signmsg= ",n.header.cmd),e.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" signmsg= "+JSON.stringify(n)),n.header.appid==e.appid&&n.header.user_id===e.userid?e.handleServerPush(n):e.logger.warn(o.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" check header failed")},this.websocket.onclose=function(t){e.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" close msg = "+JSON.stringify(t.code?t.code:t)),e.state!=i.ENUM_CONNECT_STATE.disconnect&&(e.resetConnectTimer(),e.startConnectTimer((function(t){1008===t&&e.disconnectCallback(s.errorCodeList.TOKEN_EXPIRED)})),e.resetCheckMessage())},this.websocket.onerror=function(t){e.logger.error(o.ZEGO_WEBRTC_ACTION.SIGNAL_BIND_WEBSOCKET_HANDLE+" msg = "+JSON.stringify(t))}},e.prototype.resetCheckMessage=function(){this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_RESET_CHECK_MESSAGE+" call"),clearTimeout(this.sendDataCheckTimer),this.sendDataCheckTimer=null;for(var e=this.sendDataList.getFirst();null!=e;)this.sendDataList.remove(e),e._data.error&&e._data.error(i.SEND_MSG_RESET,e._data.seq),e=this.sendDataList.getFirst();this.sendDataMap={}},e.prototype.handleServerPush=function(e){switch(e.header.cmd){case"LoginRsp":this.handleRespondData("LoginReq",e);break;case"CreateSessionRsp":this.handleRespondData("CreateSessionReq",e),0===e.body.result&&this.addSession(e.header.session_id,e.body.session_token);break;case"CreateSessionWithSdpRsp":this.handleRespondData("CreateSessionWithSdpReq",e),0===e.body.result&&this.addSession(e.header.session_id,e.body.session_token);break;case"MediaDescRsp":this.handleRespondData("MediaDescReq",e);break;case"CandidateInfoRsp":this.handleRespondData("CandidateInfoReq",e);break;case"CloseSessionRsp":this.handleRespondData("CloseSessionReq",e),this.removeSession(e.header.session_id);break;case"ClientHBRsp":this.handleRespondData("ClientHBReq",e);break;case"MediaDescPush":case"CandidateInfoPush":this.handlePushData(e);break;case"CloseSessionPush":this.handlePushData(e),this.removeSession(e.header.session_id);break;case"QualityReportRsp":this.handleRespondData("QualityReportReq",e);break;case"SessionResetPush":this.handlePushResetSessionData(e);break;case"StreamStatusNotifyPush":case"PublishEventPush":case"PlayEventPush":case"ClientInfoPush":this.handlePushData(e);break;case"ActivateVideoPlayStreamRsp":this.handleRespondData("ActivateVideoPlayStreamReq",e);break;case"ActivateAudioPlayStreamRsp":this.handleRespondData("ActivateAudioPlayStreamReq",e);break;case"NetQualityProbeRsp":this.handleRespondData("NetQualityProbeReq",e);break;case"NetQualityInfoPush":this.handlePushData(e);break;case"ActivateSEIInsertRsp":this.handleRespondData("ActivateSEIInsertReq",e);break;case"StreamStatusNotifyAck":this.handleRespondData("StreamStatusNotify",e);break;case"Peer2PeerNetStatsGetRsp":this.handleRespondData("Peer2PeerNetStatsGetReq",e);break;case"MediaDescUpdateRsp":this.handleRespondData("MediaDescUpdateReq",e);case"MediaDescUpdatePush":this.handlePushData(e)}},e.prototype.disconnectCallback=function(e){this.connectCallback&&(this.connectCallback(-1,this.server,void 0),this.connectCallback=null);var t=this.server;this.disconnectServer(),this.onDisconnect(t,e)},e.prototype.updateToken=function(){var e=this;this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_UPDATE_TOKEN+" call");var t={token:this.token,tokenType:this.tokenType,roomid:this.roomID,anchorname:this.stateCenter.anchor_info.anchor_id,sdkversion:i.PROTO_VERSION,osinfo:navigator.appVersion};if(0!=Object.keys(this.sessionInfos).length){var n=[];for(var r in this.sessionInfos){var s=parseInt(r);n.push({session_id:s,session_token:this.sessionInfos[s].token})}t.sessions=n}this.sendMessageWithCallback("LoginReq",this.stateCenter.getSeq(),0,t,(function(t,n,r){if(0==r.result){e.token=r.token,e.tokenType=r.tokenType;var i={report:r.report,report_interval:r.report_interval_ms};r.negoInterval&&(e.negoInterval=r.negoInterval),r.negoTryCount&&(e.negoTryCount=r.negoTryCount),r.negoTryMaxCount&&(e.negoTryMaxCount=r.negoTryMaxCount),null!=e.connectCallback&&(e.connectCallback(0,e.server,i),e.connectCallback=null),e.checkMessageTimeout()}else{var o={error:r.strError};null!=e.connectCallback&&(e.connectCallback(r.result,e.server,o),e.connectCallback=null)}}),(function(){null!=e.connectCallback&&(e.connectCallback(-1,e.server,void 0),e.connectCallback=null)}))},e.prototype.sendMessageWithCallback=function(e,t,n,r,s,a){if(this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" call "+e),!this.websocket||1!==this.websocket.readyState)return this.logger.error(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" connect not establish"),void(a&&a(i.SEND_MSG_TIMEOUT,t));var c={header:this.getHeader(e,t,n),body:r};null==s&&(s=null),null==a&&(a=null);var l={seq:t,deleted:!1,cmd:e,time:(new Date).getTime(),success:s,error:a},u=this.sendDataList.push(l);this.sendDataMap[l.seq]=u;var d=JSON.stringify(c);this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" "+d),this.websocket.send(d),this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE_WITH_CALLBACK+" success")},e.prototype.getHeader=function(e,t,n){return this.globalHeader={version:"1.0.1",cmd:e,appid:this.appid+"",seq:t,user_id:this.userid,session_id:n},this.globalHeader},e.prototype.connectServer=function(e,t,n,r){var s=this;if(this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" "+n),this.roomID=e,this.token=t,this.server=n,this.state=i.ENUM_CONNECT_STATE.connecting,this.connectCallback=r,this.websocket&&1===this.websocket.readyState)this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket is connected"),this.resetConnectTimer(),this.state=i.ENUM_CONNECT_STATE.connected;else{this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" need new websocket");try{this.websocket&&(this.logger.warn(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" close error websocket"),this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null),this.websocket=new WebSocket(this.server),this.websocket.onopen=function(){s.resetConnectTimer(),s.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket open call"),s.bindWebSocketHandle(),s.updateToken(),s.state=i.ENUM_CONNECT_STATE.connected},this.websocket.onclose=function(e){s.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket close call  "+JSON.stringify(e))},this.websocket.onerror=function(e){s.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket onerror call  "+JSON.stringify(e))}}catch(e){this.logger.error(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" websocket error "+e)}}this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CONNECT_SERVER+" "+this.tryConnectInterval),this.tryConnectTimer=setTimeout((function(){s.startConnectTimer(r)}),this.tryConnectInterval)},e.prototype.startConnectTimer=function(e){if(this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" call"),this.tryConnectCount>=i.MAX_TRY_CONNECT_COUNT)return this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" beyond "+this.server+"max limit"),void this.disconnectCallback();this.websocket&&1===this.websocket.readyState?(this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_START_CONNECT_TIMER+" websocket is connected"),this.resetConnectTimer()):(this.tryConnectCount+=1,this.connectServer(this.roomID,this.token,this.server,e))},e.prototype.disconnectServer=function(){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_DISCONNECT_SERVER+" call"),this.connectCallback=null,this.resetCheckMessage(),this.resetConnectTimer(),this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null),this.token="",this.sessionInfos={},this.tokenType=0,this.tryHeartbeatCount=0,this.tryConnectCount=0,this.state=i.ENUM_CONNECT_STATE.disconnect},e.prototype.isServerConnected=function(){return!(!this.websocket||1!==this.websocket.readyState)},e.prototype.createSession=function(e,t,n,r,s,a,c,l){void 0===s&&(s=""),void 0===a&&(a=""),this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION+" call: "+r);var u="";i.PROTO_VERSION.split(".").forEach((function(e,t){return 1==e.length&&1==t?u+="0"+e:u+=e}));var d={type:t,stream_id:r,platform:this.platform,browser:this.browser.name,version:this.browser.version,app_id:this.appid,negotiate_mode:n,strAuthParam:s,sdk_version:1*u,turn_server_host:"string"==typeof a?a:""};this.sendMessageWithCallback("CreateSessionReq",e,0,d,c,l)},e.prototype.createSessionWithSdp=function(e,t,n){var r=e.seq,s=e.type,a=e.streamId,c=e.strAuthParam,l=e.sdp,u=e.serverHost,d=e.playBufLevel;this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CREATE_SESSION+" call: "+a);var h="";i.PROTO_VERSION.split(".").forEach((function(e,t){return 1==e.length&&1==t?h+="0"+e:h+=e}));var p={type:s,app_id:this.appid,stream_id:a,sdp:l,user_id:this.userid,platform:this.platform,browser:this.browser.name,sdk_vers:parseInt(h),clientIp:"",media_server_host:"string"==typeof u?u:"",strAuthParam:c};d&&(p.min_play_buf_level_ms=d),this.sendMessageWithCallback("CreateSessionWithSdpReq",r,0,p,t,n)},e.prototype.sendMediaDescUpdateReq=function(e,t,n,r,i){var o={peer_id:n.peerID,type:n.type,sdp:n.sdp,width:n.width,height:n.height,framerate:n.frameRate,video_min_kpbs:n.video_min_kpbs,video_max_kpbs:n.video_max_kpbs,audio_kpbs:n.audio_kpbs,keyframe_intv:n.keyframe_intv};this.sendMessageWithCallback("MediaDescUpdateReq",e,t,o,r,i)},e.prototype.removeSession=function(e){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_REMOVE_SESSION+" call"+e),this.sessionInfos[e]&&delete this.sessionInfos[e]},e.prototype.sendCloseSession=function(e,t,n,r,i){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_REMOVE_SESSION+" call: "+t);var s={reason:n};this.removeSession(t),this.sendMessageWithCallback("CloseSessionReq",e,t,s,r,i)},e.prototype.sendMessage=function(e,t,n,r){if(this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" call "+e),this.websocket&&1===this.websocket.readyState){var i={header:this.getHeader(e,t,n),body:r},s=JSON.stringify(i);this.websocket.send(s),this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" success")}else this.logger.error(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MESSAGE+" connect not establish")},e.prototype.handleRespondData=function(e,t){this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" call");var n=this.sendDataMap[t.header.seq];if(null!=n){var r=n._data;r.cmd!==e?this.logger.error(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" command is not match"):r.success&&r.success(t.header.seq,t.header.session_id,t.body),delete this.sendDataMap[t.header.seq],this.sendDataList.remove(n)}else{if("CloseSessionRsp"==t.header.cmd)return;this.logger.error(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_RESPOND_DATA+" cannot find data "+e)}},e.prototype.addSession=function(e,t){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_ADD_SESSION+" call"+e),this.sessionInfos[e]={token:t}},e.prototype.handlePushData=function(e){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_DATA+" call "+e.header.cmd+" session "+e.header.session_id);var t=this.pushCallback[e.header.cmd+e.header.session_id];t?t.callback&&t.callback(e.header.seq,e.header.session_id,e.body):this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_DATA+" no callbackData "+e.header.cmd+" session: "+e.header.session_id)},e.prototype.handlePushResetSessionData=function(e){this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" call ");var t=[];if(0==e.body.cResetType)t=Object.keys(this.sessionInfos);else if(1==e.body.cResetType)for(var n=0;n<e.body.session_ids.length;n++)t.push(e.body.session_ids[n]);if(this.sendResetSessionAck(e.header.seq,0,0),0!=t.length)for(var r=0;r<t.length;r++){var i=this.pushCallback[e.header.cmd+t[r]];null==i?this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" no callbackData "+t[r]):i.callback&&i.callback(e.header.seq,t[r],e.body)}else this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA+" no session to callback")},e.prototype.sendMediaDesc=function(e,t,n,r,i,s){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC+" call: "+t);var a={type:n,sdp:r.sdp};null!=r.width&&(a.width=r.width),null!=r.height&&(a.height=r.height),null!=r.frameRate&&(a.framerate=r.frameRate),null!=r.video_min_kpbs&&(a.video_min_kpbs=r.video_min_kpbs),null!=r.video_max_kpbs&&(a.video_max_kpbs=r.video_max_kpbs),null!=r.audio_kpbs&&(a.audio_kpbs=r.audio_kpbs),null!=r.keyframe_intv&&(a.keyframe_intv=r.keyframe_intv),null!=r.min_play_buf_level_ms&&(a.min_play_buf_level_ms=r.min_play_buf_level_ms),this.sendMessageWithCallback("MediaDescReq",e,t,a,i,s)},e.prototype.sendCandidateInfo=function(e,t,n,r,i){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CANDIDATE_INFO+" call: "+t);for(var s=[],a=0;a<n.length;a++){var c={candidate:n[a].candidate,sdpMid:n[a].sdpMid,sdpMLineIndex:n[a].sdpMLineIndex};s.push(c)}var l={infos:s};this.sendMessageWithCallback("CandidateInfoReq",e,t,l,r,i)},e.prototype.sendMediaDescAck=function(e,t,n){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC_ACK+" call: "+t);var r={result:n};this.sendMessage("MediaDescAck",e,t,r)},e.prototype.sendUpdateMediaDescAck=function(e,t,n,r){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_MEDIA_DESC_ACK+" call: "+t);var i={peer_id:r,result:n};this.sendMessage("MediaDescUpdateAck",e,t,i)},e.prototype.sendCandidateInfoAck=function(e,t,n){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CANDIDATE_INFO_ACK+" call: "+t);var r={result:n};this.sendMessage("CandidateInfoAck",e,t,r)},e.prototype.sendCloseSessionAck=function(e,t,n){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_CLOSE_SESSION_ACK+" call: "+t);var r={result:n};this.sendMessage("CloseSessionAck",e,t,r)},e.prototype.sendResetSessionAck=function(e,t,n){this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_RESET_SESSION_ACK+" call: "+t);var r={result:n};this.sendMessage("SessionResetAck",e,t,r)},e.prototype.registerPushCallback=function(e,t,n){n&&"function"==typeof n&&(this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_REGISTER_PUSH_CALLBACK+" set callback "+t),this.pushCallback[e+t]={callback:n})},e.prototype.unregisterPushCallback=function(e,t){delete this.pushCallback[e+t]},e.prototype.checkMessageTimeout=function(){for(var e=this,t=this.sendDataList.getFirst(),n=(new Date).getTime(),r=0,s=0,a=0;null!=t&&!(t._data.time+this.sendDataTimeout>n);)if(delete this.sendDataMap[t._data.seq],this.sendDataList.remove(t),++s,-1!=this.checkMessageList.indexOf(t._data.cmd)){if(null==t._data.error||this.sendDataDropTimeout>0&&t._data.time+this.sendDataDropTimeout<n?++a:(this.logger.warn(o.ZEGO_WEBRTC_ACTION.SIGNAL_CHECK_MESSAGE_TIMEOUT+" error cmd = "+t._data.cmd),t._data.error&&t._data.error(i.SEND_MSG_TIMEOUT,t._data.seq)),++r>=this.sendDataCheckOnceCount)break;t=this.sendDataList.getFirst()}else t=this.sendDataList.getFirst();this.sendDataCheckTimer=setTimeout((function(){e.checkMessageTimeout()}),this.sendDataCheckInterval),0==s&&0==a||this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_CHECK_MESSAGE_TIMEOUT+" call success, state: timeout="+s+" drop="+a)},e.prototype.sendHeartbeat=function(){var e=this;if(this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+"call tryHeartbeatCount:"+this.tryHeartbeatCount),0!=Object.keys(this.sessionInfos).length)if(this.state===i.ENUM_CONNECT_STATE.connected){if(++this.tryHeartbeatCount>i.MAX_TRY_HEARTBEAT_COUNT)return this.logger.error(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" heartbeat try limit"),void this.disconnectCallback();var t=[];for(var n in this.sessionInfos)t.push(parseInt(n));var r={session_ids:t};this.sendMessageWithCallback("ClientHBReq",this.stateCenter.getSeq(),0,r,(function(t,n,r){e.heartbeatInterval!=r.hb_interval&&(e.heartbeatInterval=r.hb_interval,e.onUpdateHeartBeatInterval(r.hb_interval)),e.tryHeartbeatCount=0}),(function(e,t){}))}else this.logger.warn(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" state error");else this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_HEARTBEAT+" no need to heartbeat")},e.prototype.QualityReport=function(e,t,n,i,s){this.logger.debug(o.ZEGO_WEBRTC_ACTION.SIGNAL_QUALITY_REPORT+" call");var a={streams:[r(r({},n),{aid:t})]};this.sendMessageWithCallback("QualityReportReq",e,t,a,i,s)},e.prototype.sendStreamStatus=function(e,t,n,r,s,a){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_STREAM_STATUS+" call "+t);var c={mic_status:r,camera_status:n};this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_STREAM_STATUS+" stream "+(s||"")+" status "+JSON.stringify(c)),this.sendMessageWithCallback("StreamStatusNotify",e,t,c,(function(){}),(function(e){e===i.SEND_MSG_TIMEOUT&&a&&a()}))},e.prototype.ActivatePlayVideoStream=function(e,t,n,r,i){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM+" call");var s={active:n?0:1,layer:0};this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM+" activate video "+JSON.stringify(s)),this.sendMessageWithCallback("ActivateVideoPlayStreamReq",e,t,s,r,i)},e.prototype.ActivatePlayAudioStream=function(e,t,n,r,i){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM+" call");var s={active:n?0:1,layer:0};this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM+" activate audio "+JSON.stringify(s)),this.sendMessageWithCallback("ActivateAudioPlayStreamReq",e,t,s,r,i)},e.prototype.sendBroadcasterStatus=function(e,t,n){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_BROADCAST_STATUS+" call "+t);var r={status:n};this.sendMessage("BroadcasterStatusNotify",e,t,r)},e.prototype.sendNetProbe=function(e,t,n,r,i){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_NET_PROBE+" call "+t);var s={peer_id:n,action:1};this.sendMessageWithCallback("NetQualityProbeReq",e,t,s,r,i)},e.prototype.sendNetQualityInfoPushAck=function(e,t,n,r){this.logger.info(o.ZEGO_WEBRTC_ACTION.SIGNAL_SEND_NET_PROBE+" call "+t);var i={peer_id:n,result:r};this.sendMessage("NetQualityInfoAck",e,t,i)},e.prototype.activateSEIInsert=function(e,t,n,r,i,o,s){},e.prototype.getP2PNetStats=function(e,t,n,r,i){var o={peer_id:n};this.sendMessageWithCallback("Peer2PeerNetStatsGetReq",e,t,o,r,i)},e}();t.ZegoSignal=a},3409:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStreamCenterWeb=void 0;var s=n(6706),a=n(3770),c=n(1547),l=n(5740),u=n(6706),d=n(5019),h=n(3849),p=n(6014),f=n(8493),g=n(2752),m=n(3529),_=n(2990),v=function(e){function t(t,n,r,i,o,s){var a=e.call(this)||this;return a.logger=t,a.stateCenter=n,a.dataReport=r,a.rtm=i,a.ac=o,a.mediaEleSources=s,a.testEnvironment=!1,a.heartbeatTimer=null,a.heartbeatInterval=1e4,a.qualityTimerInterval=3e3,a.previewStreamList=[],a.signalList={},a.chargeInfos={itemtype:"ChargeInfos",timestamp_begin:0,timestamp_end:0,timestamp_diff_flag:0,timestamp_diff:0,infos:[]},a.chargeInfosTimer=null,a.chargeInfosInterval=6e4,a.chargeInfoSeq=0,a.soundLevelDelegate=!1,a.soundLevelInterval=1e3,a.isPeer=!0,a.probeList={},a.isMicEnabled=!0,a.isDataChannelEnabled=!1,a.publishQualityInfos=[],a.playQualityInfos=[],a.qualityUploadTimestamp=0,a.qualityHeadTimestamp=0,a.gwNode="",a.playerList={},a.publisherList={},a.playSuccessCallBackList={},a.playErrorCallBackList={},a.tryCountConnectInterval=3e3,a.checkMessageTimeout=function(){for(var e in a.signalList)a.signalList[e].signal&&a.signalList[e].signal.checkMessageTimeout()},a.getAllInUseUrl=function(){var e=[];for(var t in a.signalList)e.push(t);return e},a.onDisconnectHandle=function(e,t){if(a.logger.info("zsc.od.0 call"),a.signalList[e]){for(var n=a.signalList[e],r=0;r<n.publishConnectedList.length;r++){var i=a.publisherList[n.publishConnectedList[r]];i&&i.publisher&&i.publisher.onDisconnect(t)}for(r=0;r<n.playConnectedList.length;r++){var o=a.playerList[n.playConnectedList[r]];o&&o.player&&o.player.onDisconnect(t)}delete a.signalList[e],a.stopSignalHeartbeat(),a.stopChargeInfosUpload(),a.stopSoundLevel()}},"PRIVATE"==a.stateCenter.type&&(a.isPeer=!1),a}return i(t,e),Object.defineProperty(t.prototype,"cameraPreviewStream",{get:function(){return this.previewStreamList.find((function(e){return"camera"===e.previewType}))},enumerable:!1,configurable:!0}),t.prototype.onSignalDisconnected=function(e){},t.prototype.setQualityMonitorCycle=function(e){var t=this;return this.logger.debug("zsc.qmc.0 timeInterval "+e),0==Object.keys(this.publisherList).length?this.qualityTimerInterval=e:Object.keys(this.publisherList).forEach((function(n){t.publisherList[n].publisher.qualityTimeInterval=e,t.publisherList[n].publisher.setPublishQualityTimer()})),!0},t.prototype.setSessionInfo=function(e,t,n){this.logger.debug("zsc.ssi.0 called"),this.appid=e,this.userid=t,this.testEnvironment=n},t.prototype.onPlayStateUpdate=function(e,t,n){},t.prototype.onPlayQualityUpdate=function(e,t){},t.prototype.onPublishStateUpdate=function(e,t,n){},t.prototype.onPublishQualityUpdate=function(e,t){},t.prototype.onUpdateHeartBeatIntervalHandle=function(e){e!=this.heartbeatInterval&&(this.logger.debug("zsc.uhb.0 update "+e),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatInterval=e,this.startSignalHeartbeat())},t.prototype.setPublishStateStart=function(e,t,n,r,i){var o,a,l=this;if(this.logger.info("zsc.pss.0 call "+t),this.stateCenter.networkState==s.ENUM_NETWORK_STATE.offline)return this.logger.error("zsc.pss.0 network offline"),!1;var d=this.publisherList[t],h=this.stateCenter.reportSeqList.startPublish[t];if(this.dataReport.eventStart(h,"setPublishState"),d)return this.logger.error("zsc.pss.0 publisher already exist"),this.dataReport.eventEndWithMsgInfo(h,"setPublishState",{message:"publisher already exist"}),this.dataReport.uploadReport(h,void 0,m.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kIsPublishing),delete this.stateCenter.reportSeqList.startPublish[t],!1;var g=new c.ZegoPublish(t,this.logger,this.dataReport,this.qualityTimerInterval,this,this.ac,this.mediaEleSources,this.stateCenter,n);g.state=u.ENUM_PUBLISH_STATE.start,g.isPeer=this.isPeer,g.reportSeq=this.stateCenter.reportSeqList.startPublish[t];var _=g.previewer,v=null===(o=null==_?void 0:_.videoTrack)||void 0===o?void 0:o.label,E=n.getAudioTracks()[0]&&n.getAudioTracks()[0].label,A=null===(a=null==_?void 0:_.videoTrack)||void 0===a?void 0:a.getSettings().deviceId,y=n.getAudioTracks()[0]&&n.getAudioTracks()[0].getSettings().deviceId,S=new p.RetryStreamHandler(this.logger,this.stateCenter,this,!0);return this.publisherList[t]={seq:0,room:e,localStream:n,publisher:g,serverUrls:[],ttl:0,isCenterNode:!0,streamID:t,publishOption:r,cameraLabel:v||"",microLabel:E||"",cameraDeviceId:A||"",microDeviceId:y||"",deviceStateCount:0,retryStreamHandler:S,retryDispatchHandler:new f.RetryDispatchHandler(this.logger,this.stateCenter,this.rtm,this),isDataChannel:i},g.onPublishStateUpdate=function(e,n,r,i){var o=l.publisherList[n];o?S.publishStateHandle(e,o.streamID,r,i):l.logger.error("zsc.psuh.0 cannot find publish "+t)},g.onPublishQualityUpdate=function(e,n){var r=l.publisherList[e];r?(l.stateCenter.deviceStateOut&&0===n.audio.audioBitrate?(r.deviceStateCount++,r.deviceStateCount>=2&&(r.deviceStateCount=0,l.stateCenter.deviceStateOut=!1,l.logger.warn("zsc.pss.0 publish audio error by device"))):r.deviceStateCount=0,l.onPublishQualityUpdate(r.streamID,n)):l.logger.error("zsc.psuh.0 cannot find publish "+t)},this.dataReport.eventStart(g.reportSeq,"GetSignalUrl"),this.dataReport.eventStart(g.streamReportSeq,"GetSignalUrl"),!0},t.prototype.startPublishingStream=function(e){this.logger.info("zsc.sps.0 call");var t=this.publisherList[e];if(!t)return this.logger.error("zsc.sps.0 publisher don't exist"),!1;var n=t.publisher;if(this.dataReport.eventEndWithMsg(n.reportSeq,"GetSignalUrl",{urls:t.serverUrls,is_center:t.isCenterNode}),this.dataReport.eventEndWithMsg(n.streamReportSeq,"GetSignalUrl",{urls:t.serverUrls,is_center:t.isCenterNode}),!t.serverUrls||0===t.serverUrls.length)return t.retryStreamHandler.publishStateHandle(u.ENUM_PUBLISH_STATE_UPDATE.error,e,g.errorCodeList.DISPATCH_ERROR),this.logger.info("zsc.sps.0 server don't have signal url"),!1;var r=t.serverUrls.indexOf(this.server);-1!==r&&(t.serverUrls.splice(r,1),t.serverUrls.unshift(this.server));var i=t.retryStreamHandler;return i.invalid(),i.init(this.stateCenter.streamRetryTime),i.initStream(e,t.serverUrls),i.activePublish(0)},t.prototype.updateWaitingList=function(e,t,n,r,i){t?e.publishWaitingList.push({streamID:n,success:r,error:i}):e.playWaitingList.push({streamID:n,success:r,error:i})},t.prototype.publishStream=function(e){var t=this.publisherList[e].publisher;if(t){var n=null,r=null,i=this.publisherList[e].publishOption,o=this.checkPreview(this.publisherList[e].localStream);if(o){n=o.localStream,r=o.videoInfo;var s=this.stateCenter.reportSeqList.startPublish[e];this.dataReport.addMsgInfo(s,{cap_w:m.ZegoRTCLogEvent.kZegoTaskPublishStart.cap_w(o.videoInfo.width),cap_h:m.ZegoRTCLogEvent.kZegoTaskPublishStart.cap_h(o.videoInfo.height),w:m.ZegoRTCLogEvent.kZegoTaskPublishStart.w(o.videoInfo.width),h:m.ZegoRTCLogEvent.kZegoTaskPublishStart.h(o.videoInfo.height),video_en_fps:m.ZegoRTCLogEvent.kZegoTaskPublishStart.video_en_fps(o.videoInfo.frameRate),video_en_bps:m.ZegoRTCLogEvent.kZegoTaskPublishStart.video_en_bps(o.videoInfo.bitRate)}),n?(this.logger.info("zsc.ps.0 call success"),t.gwNodeTTL<(new Date).getTime()&&!this.gwNode?(t.gwNode="",t.gwNodeList=[],t.gwNodeTTL=0):this.gwNode&&(t.gwNode=this.gwNode),t.startPublish(e,n,r,o.mediaStreamConfig,i)):this.logger.error("zsc.ps.0 no localStream found")}else this.logger.error("zsc.ps.0 no preview found")}else this.logger.info("zsc.ps.0 publisher don't exist")},t.prototype.connectPublishServer=function(e,t){var n=this,r=this.publisherList[e];return r?(this.dataReport.eventStart(r.publisher.reportSeq,"ConnectServer"),this.dataReport.eventStart(r.publisher.streamReportSeq,"ConnectServer"),this.connectWithReuseSignalServer(e,!0,t,(function(e,t,r){var i=n.publisherList[e];if(i){var o=i.publisher;if(o){n.dataReport.eventEndWithMsg(o.reportSeq,"ConnectServer",{result:0,server:r}),n.dataReport.eventEndWithMsg(o.streamReportSeq,"ConnectServer",{result:0,server:r});var s=t.tokenInfo;n.logger.info("zsc.cps.0 update token success"),s&&s.report&&(o.qualityUpload=s.report,o.qualityUploadInterval=s.report_interval),o.signal=t.signal,n.server=r,n.publishStream(e),n.getTokenSuccess()}else n.logger.info("zsc.cps.1 check publisher don't exist")}else n.logger.info("zsc.cps.0 after connect publisher don't exist")}),(function(e,t){n.logger.error("zsc.cps.0 "+e+" connect fail "+t);var r=n.publisherList[e];if(r){var i=r.publisher;if(i){n.dataReport.eventEndWithMsg(i.reportSeq,"ConnectServer",{result:t}),n.dataReport.uploadReport(i.reportSeq),delete n.stateCenter.reportSeqList.startPublish[e];var s=o({},g.errorCodeList.CONNECT_FAILED);s.message=s.message+" "+t,1008===t&&(s=g.errorCodeList.TOKEN_EXPIRED),r.retryStreamHandler.publishStateHandle(u.ENUM_PUBLISH_STATE_UPDATE.error,e,s,1008==t)}else n.logger.info("zsc.cps.1 check publisher don't exist")}else n.logger.info("zsc.cps.0 after connect publisher don't exist")})),!0):(this.logger.error("zsc.cps.0 publisher don't exist"),!1)},t.prototype.getTokenSuccess=function(){this.logger.debug("zsc.gts.0 call")},t.prototype.stopPublishingStream=function(e){var t=this.publisherList[e];if(t){var n=t.retryStreamHandler;for(var r in n&&(n.stopMaxTime(),n.invalid()),this.signalList)this.signalList[r].publishWaitingList=this.signalList[r].publishWaitingList.filter((function(t){return t.streamID!==e}));delete this.publisherList[e],t.publisher&&(t.publisher.stopPublish(),delete t.publisher),this.removeStreamFromSignal(!0,e),this.stopSignalHeartbeat(),this.stopChargeInfosUpload(),this.stopSoundLevel(),this.logger.debug("zsc.sps.0.1 call success")}else this.logger.warn("zsc.sps.0.1 publisher don't exist")},t.prototype.connectWithReuseSignalServer=function(e,t,n,r,i){var o=this;this.logger.info("zsc.crss.0 begin "+n);var s=null;if(this.signalList[n])(s=this.signalList[n]).state==u.ENUM_SIGNAL_STATE.connected?(this.logger.info("zsc.crss.0 already connected "+n+" streamId: "+e),t?s.publishConnectedList.push(e):s.playConnectedList.push(e),r(e,s,n)):s.state==u.ENUM_SIGNAL_STATE.connecting&&(this.logger.info("zsc.crss.0 signal is connecting "+n+" streamId: "+e),this.updateWaitingList(s,t,e,r,i));else{this.logger.info("zsc.crss.0 new signal "+n+" streamId: "+e);var a=new d.ZegoSignal(this.logger,this.stateCenter);a.setSessionInfo(this.appid,this.userid),a.onUpdateHeartBeatInterval=this.onUpdateHeartBeatIntervalHandle.bind(this),a.onDisconnect=this.onDisconnectHandle;var c=this.publisherList[e]?this.publisherList[e]:this.playerList[e]?this.playerList[e]:null,l=null==c?void 0:c.retryStreamHandler;if(this.stateCenter.streamConnectTime)a.tryConnectInterval=this.stateCenter.streamConnectTime;else if(l&&l.retryActiveCount){var h=l.retryActiveCount*(l.retryActiveCount-1)/2+2;h=h>u.MAX_RETRY_CONNECT_INTERVAL?u.MAX_RETRY_CONNECT_INTERVAL:h,a.tryConnectInterval=1e3*h}this.signalList[n]={signal:a,state:u.ENUM_SIGNAL_STATE.connecting,publishWaitingList:[],playWaitingList:[],publishConnectedList:[],playConnectedList:[],tokenInfo:null},this.updateWaitingList(this.signalList[n],t,e,r,i);var p=null==c?void 0:c.room.token,f=null==c?void 0:c.room.roomID;this.logger.info("zsc.crss.0 "+p),a.connectServer(f||this.stateCenter.roomList[0].roomID,p||this.stateCenter.roomList[0].token,n,(function(e,t,r){s=o.signalList[n];var i,a,c=0;if(0!=e){for(o.logger.info("zsc.crss.0 connect failed "+t),c=0;c<s.publishWaitingList.length;c++)(i=s.publishWaitingList[c]).error&&i.error(i.streamID,e);for(c=0;c<s.playWaitingList.length;c++)(a=s.playWaitingList[c]).error&&a.error(a.streamID,e);delete o.signalList[n]}else{for(o.logger.debug("zsc.crss.0 connected success "+t),s.state=u.ENUM_SIGNAL_STATE.connected,s.tokenInfo=r,c=0;c<s.publishWaitingList.length;c++)(i=s.publishWaitingList[c]).success&&i.success(i.streamID,s,t),s.publishConnectedList.push(i.streamID);for(c=0;c<s.playWaitingList.length;c++)(a=s.playWaitingList[c]).success&&a.success(a.streamID,s,t),s.playConnectedList.push(a.streamID);s.publishWaitingList=[],s.playWaitingList=[],null==o.heartbeatTimer&&o.startSignalHeartbeat(),null==o.chargeInfosTimer&&o.startChargeInfosUpload(),o.activeSoundLevel()}}))}},t.prototype.setPlayStateStart=function(e,t,n){var r=this;if(this.logger.info("zsc.pss.1 call "+e),this.stateCenter.networkState==s.ENUM_NETWORK_STATE.offline)return this.logger.error("zsc.pss.1 network offline"),!1;var i=this.playerList[e],o=this.stateCenter.reportSeqList.startPlay[e];if(this.dataReport.eventStart(o,"setPlayState"),i)return this.logger.error("zsc.pss.1 player already exist"),this.dataReport.eventEndWithMsgInfo(o,"setPlayState",{message:"player already exist"}),this.dataReport.uploadReport(o,void 0,m.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kIsPlaying),delete this.stateCenter.reportSeqList.startPlay[e],!1;var a=this.getPlayRoom(e)||this.stateCenter.roomList[0];if(!a)return this.logger.error("zsc.pss.1 not login room"),this.dataReport.eventEndWithMsgInfo(o,"setPlayState",{message:"not login room"}),this.dataReport.uploadReport(o,void 0,m.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kPlayNoLoginError),!1;var c=new h.ZegoPlayWeb(this.logger,null,this.dataReport,this.qualityTimerInterval,this,this.ac,this.stateCenter);t&&[0,2,3].includes(t.resourceMode)&&(c.resourceMode=t.resourceMode),this.dataReport.addMsgInfo(o,{resourceMode:c.resourceMode,play_room_id:a.roomID,isMulti:this.stateCenter.isMultiRoom}),c.state=u.ENUM_PLAY_STATE.start,c.isPeer=this.isPeer,c.reportSeq=this.stateCenter.reportSeqList.startPlay[e],c.beginTime=(new Date).getTime();var l=new p.RetryStreamHandler(this.logger,this.stateCenter,this,!1);return this.playerList[e]={seq:0,room:a,player:c,signal:null,serverUrls:[],ttl:0,isCenterNode:!0,streamID:e,playOption:t,retryStreamHandler:l,retryDispatchHandler:new f.RetryDispatchHandler(this.logger,this.stateCenter,this.rtm,this),isDataChannel:n},c.onPlayStateUpdate=function(e,t,n,i){var o=r.playerList[t];o?l.playStateHandle(e,o.streamID,n,i):r.logger.error("zsc.pss.1 cannot find play "+t)},c.onPlayQualityUpdate=function(e,t){var n=r.playerList[e];n?r.onPlayQualityUpdate(n.streamID,t):r.logger.error("zsc.pss.1 cannot find play "+e)},c.onRemoteCameraStatusUpdate=function(e,t,n){var i=r.playerList[e];i?r.onRemoteCameraStatusUpdate(i.streamID,t,n):r.logger.error("zsc.pss.1 cannot find play "+e)},c.onRemoteMicStatusUpdate=function(e,t,n){var i=r.playerList[e];i?r.onRemoteMicStatusUpdate(i.streamID,t,n):r.logger.error("zsc.pss.1 cannot find play "+e)},this.dataReport.eventStart(c.reportSeq,"GetSignalUrl"),this.dataReport.eventStart(c.streamReportSeq,"GetSignalUrl"),!0},t.prototype.onRemoteMicStatusUpdate=function(e,t,n){},t.prototype.onRemoteCameraStatusUpdate=function(e,t,n){},t.prototype.startPlayingStream=function(e,t){this.logger.info("zsc.sps.1 start play called");var n=this.playerList[e];if(!n)return this.logger.error("zsc.sps.1 player don't exist"),!1;var r=n.player;if(this.dataReport.eventEndWithMsg(r.reportSeq,"GetSignalUrl",{urls:n.serverUrls}),this.dataReport.eventEndWithMsg(r.streamReportSeq,"GetSignalUrl",{urls:n.serverUrls}),0==n.serverUrls.length)return n.retryStreamHandler.playStateHandle(u.ENUM_PLAY_STATE_UPDATE.error,e,g.errorCodeList.DISPATCH_ERROR),this.logger.info("zsc.sps.1 server don't have signal url"),!1;var i=n.serverUrls.indexOf(this.server);-1!==i&&(n.serverUrls.splice(i,1),n.serverUrls.unshift(this.server));var o=n.retryStreamHandler;return o.invalid(),o.init(this.stateCenter.streamRetryTime),o.initStream(e,n.serverUrls),o.activePull(0,t)},t.prototype.connectPlayServer=function(e,t,n){var r=this,i=this.playerList[e];return i?(this.dataReport.eventStart(i.player.reportSeq,"ConnectServer"),this.dataReport.eventStart(i.player.streamReportSeq,"ConnectServer"),this.connectWithReuseSignalServer(e,!1,n,(function(e,n,i){var o=r.playerList[e];if(o){var s=o.player;if(s){r.dataReport.eventEndWithMsg(s.reportSeq,"ConnectServer",{result:0,server:i}),r.dataReport.eventEndWithMsg(s.streamReportSeq,"ConnectServer",{result:0,server:i});var a=n.tokenInfo;r.logger.info("zsc.cps.1 update token success"),a&&a.report&&(s.qualityHandler.qualityUpload=a.report,s.qualityHandler.qualityUploadInterval=a.report_interval),s.signal=n.signal,r.server=i,r.playStream(e,t),r.getTokenSuccess()}else r.logger.error("zsc.cps.1 checkplayer don't exist")}else r.logger.error("zsc.cps.1 after connect player don't exist")}),(function(t,n){var i=r.playerList[t];if(i){r.dataReport.eventEndWithMsg(i.player.reportSeq,"ConnectServer",{result:n}),!i.player.isProbe&&r.dataReport.uploadReport(i.player.reportSeq),delete r.stateCenter.reportSeqList.startPlay[e];var s=o({},g.errorCodeList.CONNECT_FAILED);s.message=s.message+" "+n,1008===n&&(s=g.errorCodeList.TOKEN_EXPIRED),i.retryStreamHandler.playStateHandle(u.ENUM_PLAY_STATE_UPDATE.error,t,s,1008==n)}else r.logger.error("zsc.cps.1 after connect player don't exist")})),!0):(this.logger.error("zsc.cps.1 player don't exist"),!1)},t.prototype.playStream=function(e,t){var n=this.playerList[e].player;n?(this.logger.info("zsc.ps.1 call success"),n.gwNodeTTL<(new Date).getTime()&&!this.gwNode?(n.gwNode="",n.gwNodeList=[],n.gwNodeTTL=0):this.gwNode&&(n.gwNode=this.gwNode),n.startPlay(e,t,this.playerList[e].playOption)):this.logger.warn("zsc.ps.1 player don't exist")},t.prototype.stopSignalHeartbeat=function(){this.logger.debug("zsc.ssh.1 call");var e=0;for(var t in this.signalList)e+=1;this.heartbeatTimer&&0==e&&(this.logger.info("zsc.ssh.1 stop"),clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},t.prototype.removeStreamFromSignal=function(e,t){var n=[];for(var r in this.signalList){var i=this.signalList[r];if(e){for(var o=0;o<i.publishConnectedList.length;o++)if(i.publishConnectedList[o]===t){this.logger.debug("zsc.rsfs.0 found from publish"),i.publishConnectedList.splice(o,1);break}for(o=0;o<i.publishWaitingList.length;o++)if(i.publishWaitingList[o].streamID===t){this.logger.debug("zsc.rsfs.0 found from publish"),i.publishWaitingList.splice(o,1);break}}else{for(var s=0;s<i.playConnectedList.length;s++)if(i.playConnectedList[s]===t){this.logger.debug("zsc.rsfs.0 found from play"),i.playConnectedList.splice(s,1);break}for(s=0;s<i.playWaitingList.length;s++)if(i.playWaitingList[s].streamID===t){this.logger.debug("zsc.rsfs.0 found from play"),i.playWaitingList.splice(s,1);break}}0==i.publishConnectedList.length&&0==i.playConnectedList.length&&0==i.publishWaitingList.length&&0==i.playWaitingList.length&&(i.signal.disconnectServer(),n.push(r))}for(var a=0;a<n.length;a++)delete this.signalList[n[a]],this.server==n[a]&&(this.server="")},t.prototype.stopPlayingStream=function(e){var t=this.playerList[e];if(t){var n=t.retryStreamHandler;for(var r in n&&(n.stopMaxTime(),n.invalid()),this.signalList)this.signalList[r].playWaitingList=this.signalList[r].playWaitingList.filter((function(t){return t.streamID!==e}));delete this.playerList[e],t.player&&(t.player.stopPlay(),delete t.player),this.removeStreamFromSignal(!1,e),this.stopSignalHeartbeat(),this.stopChargeInfosUpload(),this.stopSoundLevel(),delete this.playSuccessCallBackList[e],delete this.playErrorCallBackList[e],this.logger.debug("zsc.sps.1.1 call success")}else this.logger.info("zsc.sps.1.1 player don't exist")},t.prototype.reset=function(e){for(var t in this.publisherList)(this.publisherList[t].room.roomID==e||!e)&&this.stopPublishingStream(t);var n=function(t){var n=r.playerList[t].room;if(n.roomID!=e||!n.streamList.find((function(e){return e.stream_id==t}))&&1!=r.stateCenter.roomList.length){if(n.roomID==e&&r.stateCenter.roomList.length>1){var i=r.stateCenter.roomList.find((function(t){return t.roomID!==e}));i?r.playerList[t].room=i:r.stopPlayingStream(t)}}else r.stopPlayingStream(t)},r=this;for(var i in this.playerList)n(i);0==Object.keys(this.publisherList).length&&0==Object.keys(this.playerList).length&&(this.probeList={}),this.publishQualityInfos=[],this.playQualityInfos=[],this.qualityHeadTimestamp=0,this.qualityUploadTimestamp=0,this.qualityWebsocket&&(this.qualityWebsocket.close(),this.qualityWebsocket=void 0)},t.prototype.startSignalHeartbeat=function(){var e=this;this.logger.debug("zsc.ssh.0 call"),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatTimer=setTimeout((function(){e.checkSignalHeartbeat()}),this.heartbeatInterval)},t.prototype.startChargeInfosUpload=function(){var e=this;this.logger.debug("zsc.sciu.0 call"),this.chargeInfosTimer&&(clearTimeout(this.chargeInfosTimer),this.chargeInfosTimer=null),this.chargeInfosTimer=setTimeout((function(){e.checkChargeInfos()}),this.chargeInfosInterval)},t.prototype.checkChargeInfos=function(){this.logger.debug("zsc.cci.0 call");var e={is_publishing:0,play_max_audio_bitrate:0,play_stream_resolution_infos:[]};for(var t in this.chargeInfos.timestamp_begin=(new Date).getTime(),this.publisherList){this.publisherList[t].publisher.state===u.ENUM_PUBLISH_STATE.publishing&&(e.is_publishing=1);break}e.play_max_audio_bitrate=0;var n=function(t){var n=r.playerList[t].player.playStream,i=n&&0!==n.getVideoTracks().length?n.getVideoTracks()[0].getSettings():void 0,o={video_width:i&&i.width?i.width:0,video_height:i&&i.height?i.height:0,count:1};if(!e.play_stream_resolution_infos.find((function(e){return e.video_width==o.video_width&&e.video_height==o.video_height&&(e.count++,!0)}))&&e.play_stream_resolution_infos.push(o),0==o.video_width&&0==o.video_height){var s=1e3*r.playerList[t].player.qualityHandler.lastPlayStats.audioBitrate;s>e.play_max_audio_bitrate&&(e.play_max_audio_bitrate=s)}},r=this;for(var i in this.playerList)n(i);0!==this.chargeInfos.timestamp_end?(this.chargeInfos.timestamp_diff=this.chargeInfos.timestamp_begin-this.chargeInfos.timestamp_end,this.chargeInfos.timestamp_diff_flag=1):(this.chargeInfos.timestamp_diff=0,this.chargeInfos.timestamp_diff_flag=0),this.chargeInfos.timestamp_end=(new Date).getTime(),this.chargeInfos.infos=[e],0!==e.play_stream_resolution_infos.length&&this.logger.report(this.chargeInfos),this.chargeInfosTimer&&this.startChargeInfosUpload()},t.prototype.checkSignalHeartbeat=function(){for(var e in this.logger.debug("zsc.csh.0 call"),this.signalList)this.signalList[e].signal&&this.signalList[e].signal.sendHeartbeat();this.heartbeatTimer&&this.startSignalHeartbeat()},t.prototype.stopChargeInfosUpload=function(){this.logger.debug("zsc.sciu.0 call");var e=0;for(var t in this.signalList)e+=1;this.chargeInfosTimer&&0==e&&(this.logger.info("zsc.sciu.0 stop"),clearTimeout(this.chargeInfosTimer),this.chargeInfosTimer=null)},t.prototype.getPublisher=function(e){var t=null;return this.publisherList[e]&&this.publisherList[e].publisher&&(t=this.publisherList[e].publisher),t},t.prototype.checkPreview=function(e){for(var t=0;t<this.previewStreamList.length;t++)if(this.previewStreamList[t].localStream===e)return this.previewStreamList[t];return null},t.prototype.checkPublish=function(e){for(var t in this.publisherList)if(this.publisherList[t].localStream==e)return this.publisherList[t];return null},t.prototype.removePreview=function(e){for(var t=0;t<this.previewStreamList.length;t++)if(this.previewStreamList[t]===e){this.previewStreamList.splice(t,1);break}},t.prototype.onPlayerStreamUrlUpdate=function(e,t,n){},t.prototype.getScreenConstrains=function(e){var t={};if("boolean"==typeof e&&e)t={audio:!1,frameRate:u.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate,bitRate:this.stateCenter.settingConfig.getSetting("screen_video_bitrate")||u.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate};else if("object"==typeof e){switch(e.videoQuality){case 1:t={frameRate:u.ENUM_SCREEM_RESOLUTION_TYPE.LOW.frameRate,bitRate:u.ENUM_SCREEM_RESOLUTION_TYPE.LOW.bitRate};break;case 3:t={frameRate:u.ENUM_SCREEM_RESOLUTION_TYPE.HIGH.frameRate,bitRate:u.ENUM_SCREEM_RESOLUTION_TYPE.HIGH.bitRate};break;case 4:t={frameRate:e.frameRate,bitRate:e.bitRate,width:e.width,height:e.height};break;case 2:t={frameRate:u.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate,bitRate:u.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate};break;default:t={frameRate:u.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.frameRate,bitRate:this.stateCenter.settingConfig.getSetting("screen_video_bitrate")||u.ENUM_SCREEM_RESOLUTION_TYPE.MEDIUM.bitRate}}t.audio="boolean"==typeof e.audio&&e.audio,t=o(o({},e),t)}return t},t.prototype.createScreenPreviewer=function(e,t){var n=new a.ZegoPreview(this.logger,this.ac,this.stateCenter,this,"screen"),r=e.getVideoTracks()[0].getSettings();return this.previewStreamList.push(n),n.mediaStreamConfig=t,e.getAudioTracks().length>0&&(n.audioTrack=e.getAudioTracks()[0]),n.localStream=e,n.videoInfo={width:r.width,height:r.height,frameRate:r.frameRate||15,bitRate:(null==t?void 0:t.bitRate)||1e3,startBitrate:(null==t?void 0:t.startBitrate)||this.stateCenter.settingConfig.getSetting("bitrate_mode")},n.previewSuc=!0,n.previewType="screen",(null==t?void 0:t.videoOptimizationMode)&&this.setVideoTrackContentHint(e,null==t?void 0:t.videoOptimizationMode),n},t.prototype.setSoundLevelDelegate=function(e,t){for(var n in this.logger.info("zsc.ssd.0 call"),t&&(this.soundLevelInterval=t),this.soundLevelDelegate=e,this.previewStreamList){var r=this.previewStreamList[n];e?r.startSoundLevel():r.stopSoundLevel()}for(var n in this.playerList){var i=this.playerList[n].player;e?i.startSoundLevel():i.stopSoundLevel()}e?(this.logger.info("zsc.ssd.0 start getting sound"),this.activeSoundLevel()):(this.logger.info("zsc.ssd.0 stop getting sound"),this.soundLevelTimer&&clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null,this.soundLevelInterval=1e3)},Object.defineProperty(t.prototype,"hasRemoteStream",{get:function(){return Object.keys(this.signalList).length>0},enumerable:!1,configurable:!0}),t.prototype.activeSoundLevel=function(){!this.soundLevelTimer&&this.soundLevelDelegate&&this.startSoundLevel()},t.prototype.startSoundLevel=function(){var e=this;this.soundLevelTimer&&(clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null),this.soundLevelDelegate&&(this.hasRemoteStream&&this.checkSoundLevel(),this.checkMicSoundLevel(),this.soundLevelTimer=setTimeout((function(){e.startSoundLevel()}),this.soundLevelInterval))},t.prototype.checkSoundLevel=function(){this.logger.debug("zsc.csl.0 call");var e=[];for(var t in this.publisherList){var n=0,r=this.publisherList[t].publisher,i=r.previewer;i&&(n=i.soundLevel),e.push({streamID:this.getBackStreamId(r.streamId),soundLevel:n,type:"push"})}for(var t in this.playerList){var o=this.playerList[t].player;o.streamId&&!o.isProbe&&e.push({streamID:this.getBackStreamId(o.streamId),soundLevel:o.soundLevel,type:"pull"})}this.soundLevelDelegate&&e.length>0&&this.onSoundLevelUpdate(e)},t.prototype.checkMicSoundLevel=function(){if(this.cameraPreviewStream&&this.soundLevelDelegate){var e=this.cameraPreviewStream.soundLevel;this.onMicSoundLevelUpdate(e)}},t.prototype.getBackStreamId=function(e){return this.testEnvironment&&e?e.replace("zegotest-"+this.appid+"-",""):e},t.prototype.onSoundLevelUpdate=function(e){},t.prototype.onMicSoundLevelUpdate=function(e){},t.prototype.stopSoundLevel=function(){var e=this.previewStreamList.length;this.soundLevelTimer&&!this.hasRemoteStream&&0===e&&(this.logger.info("zsc.ssl.0 stop"),clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null)},t.prototype.startNetProbe=function(e,t,n){var r=this,i=s.getReportSeq();if(this.dataReport.newReport(i,m.ZegoRTCLogEvent.kZegoNetProbe.event),this.isPeer){var o=!0;0==n.length&&(o=!1,n=e?this.publisherList[t.streamId].serverUrls:this.playerList[t.streamId].serverUrls),n.forEach((function(n){if(!(r.probeList[n]&&r.probeList[n].timeStamp+9e5<(new Date).getTime()||t.probeState==u.ENUM_PROBE_STATE.probed)){var i="zegoprobe-"+(new Date).getTime();r.setPlayStateStart(i);var s=r.playerList[i]?r.playerList[i].player:null;s&&(s.isProbe=!0,o?(s.gwNode=n,s.signal=t.signal,s.startPlay(i,(function(){}))):r.connectPlayServer(i,(function(){}),n),s.onCalNetQualityResult=function(o,a){r.logger.info("zc.ocnqr.0 "+s.gwNode+" "+o+" "+a),r.probeList[n]={result:o,netQuality:a,timeStamp:(new Date).getTime()},t.gwNode==n||t.signal.server==n?t.netQuality=a:r.handleCalNetQualityResult(e,o,a,t,n),r.stopPlayingStream(i)})}})),this.dataReport.addMsgInfo(i,{netQuality:t.netQuality,nodeList:n}),this.dataReport.uploadReport(i)}else this.dataReport.uploadReport(i,void 0,{code:-1,message:"not support peer"})},t.prototype.handleCalNetQualityResult=function(e,t,n,r,i){if(this.logger.info("zc.hcqr.0 "+r.netQuality+" probe "+n+" "+i),0===t){var o=s.getReportSeq();this.dataReport.newReport(o,m.ZegoRTCLogEvent.kZegoNetProbeResult.event);var a=!1;if(n>Math.max(75,r.netQuality+20)&&r.probeState==u.ENUM_PROBE_STATE.tryProbe)if(a=!0,e){var c=r,l=c.streamId,d=c.localStream,h=c.videoInfo,p=c.mediaStreamConfig,f=c.publishOption;0!=c.sessionId&&c.signal&&c.shouldSendCloseSession()&&(c.signal.sendCloseSession(this.stateCenter.getSeq(),c.sessionId,1),c.signal.removeSession(c.sessionId),c.closeSessionSignal=!0),c.resetPublish(),this.publisherList[l].isCenterNode?(c.gwNode=i,c.startPublish(l,d,h,p,f)):this.connectPublishServer(l,i)}else{var g=r,_=(l=g.streamId,g.getRemoteStreamSuc),v=g.playOption;0!=g.sessionId&&g.signal&&g.shouldSendCloseSession()&&(g.signal.sendCloseSession(this.stateCenter.getSeq(),g.sessionId,1),g.signal.removeSession(g.sessionId),g.closeSessionSignal=!0),g.resetPlay(),this.playerList[l].isCenterNode?(g.gwNode=i,g.startPlay(l,_,v)):this.connectPlayServer(l,_,i)}else a=!1,this.logger.warn("zc.hcqr.0 "+r.netQuality+" probe "+n+" "+i);this.dataReport.addMsgInfo(o,{isSwitch:a,isPublish:e,streamID:r.streamId,result:t,node:i,netQuality:r.netQuality,probeNetQuality:n}),this.dataReport.uploadReport(o),r.probeState=u.ENUM_PROBE_STATE.probed}},t.prototype.getRoomByStreamID=function(e){return this.publisherList[e]?this.publisherList[e].room:this.playerList[e]?this.playerList[e].room:void 0},t.prototype.setVideoTrackContentHint=function(e,t){if("string"==typeof t){var n=t.toLowerCase();if(["default","motion","detail","text"].includes(n)){var r=e.getVideoTracks()[0];r?"contentHint"in r?(this.logger.info("zc.svtch "+n),r.contentHint="default"==n?"":n):this.logger.warn("zc.svtch mediaStreamTrack contentHint attribute not supported"):this.logger.warn("zc.svtch video track no found")}else this.logger.warn("zc.svtch videoOptimizationMode wrong")}else this.logger.warn("zc.svtch videoOptimizationMode type wrong")},t.prototype.getPlayRoom=function(e){return this.stateCenter.roomList.find((function(t){return!!t.streamList.find((function(t){return t.stream_id==e}))}))},t.prototype.getQualityHead=function(e,t){var n=new Uint8Array(12);n[0]=0,n[1]=12,n[2]=e.length>>8,n[3]=e.length-(n[2]<<8),n[4]=t.length>>24,n[5]=t.length-(n[4]<<24)>>16,n[6]=t.length-(n[4]<<24)-(n[5]<<16)>>8,n[7]=t.length-(n[4]<<24)-(n[5]<<16)-(n[6]<<8);var r=Math.ceil((new Date).getTime()/1e3);return n[8]=r>>24,n[9]=r-(n[8]<<24)>>16,n[10]=r-(n[8]<<24)-(n[9]<<16)>>8,n[11]=r-(n[8]<<24)-(n[9]<<16)-(n[10]<<8),n},t.prototype.streamQualityUpload=function(){var e=this;if(Object.keys(this.publisherList).length>0||Object.keys(this.playerList).length>0){var t={version:0,timestamp:(new Date).getTime(),event:0,app_id:this.stateCenter.appid,user_id:this.stateCenter.idName,biz_type:1},n={publish_quality_infos:this.publishQualityInfos,play_quality_infos:this.playQualityInfos},r=_.logreport.SpeedLogHead.create(t),i=_.logreport.QualityEvent.create(n),o=_.logreport.SpeedLogHead.encode(r).finish(),s=_.logreport.QualityEvent.encode(i).finish(),a=this.getQualityHead(o,s),c=new Uint8Array(12+o.length+s.length);c.set(a),c.set(o,12),c.set(s,12+o.length);var l=this.logger.url.split("/")[2];if(!l)return;if(this.qualityWebsocket&&2!=this.qualityWebsocket.readyState&&3!=this.qualityWebsocket.readyState)1==this.qualityWebsocket.readyState&&this.qualityWebsocket.send(c);else{var u=this.stateCenter.appid,d=this.stateCenter.idName,h=this.stateCenter.roomList[0].token;this.qualityWebsocket=new WebSocket("wss://"+l+"/ws/report/stream?appid="+u+"&product=rtc&token="+encodeURIComponent(h)+"&id_name="+d),this.qualityWebsocket.onopen=function(){var t;null===(t=e.qualityWebsocket)||void 0===t||t.send(c)}}}},t.prototype.updateQuality=function(e,t){var n=this,r=(new Date).getTime();0!==this.qualityUploadTimestamp&&r-this.qualityUploadTimestamp>6e4||this.publishQualityInfos.join("").length+this.playQualityInfos.join().length>8e3?(this.publishQualityInfos.forEach((function(e){return e.timestamp_offset_end=Math.round(r/1e3)-n.qualityHeadTimestamp})),this.playQualityInfos.forEach((function(e){return e.timestamp_offset_end=Math.round(r/1e3)-n.qualityHeadTimestamp})),this.streamQualityUpload(),this.publishQualityInfos=[],this.playQualityInfos=[],this.qualityHeadTimestamp=Math.round((new Date).getTime()/1e3),this.qualityUploadTimestamp=r):0==this.qualityHeadTimestamp&&(this.qualityHeadTimestamp=Math.round((new Date).getTime()/1e3),this.qualityUploadTimestamp=r),0==e?this.handlePublishQualityData(t):this.handlePlayQualityData(t)},t.prototype.handlePublishQualityData=function(e){var t=this.publishQualityInfos.find((function(t){return t.stream_id==e.stream_id&&t.video_width==e.frameWidth&&t.video_height==e.frameHeight}));if(!t){var n=this.getRoomByStreamID(e.stream_id);t={timestamp_offset_begin:Math.abs(Number(e.timeStamp-this.qualityHeadTimestamp)),timestamp_offset_end:0,stream_id:e.stream_id,session_id:n?Number(n.sessionID):0,video_width:e.frameWidth,video_height:e.frameHeight,infos:[],room_id:n?n.roomID:"",evnvironment:1,room_session_id:n?Number(n.roomSessionID):0},this.publishQualityInfos.push(t)}t.infos.push({audio_bitrate:Math.round(e.audioBitrate)||0,video_bitrate:Math.round(e.videoBitrate)||0,video_capture_fps:Math.round(10*e.videoFPS)||0,video_network_fps:Math.round(10*e.videoTransferFPS)||0,uplink_plr:e.audioPacketsLostRate,rtt:Math.round(e.currentRoundTripTime),audio_network_fps:Math.round(10*e.audioFPS),captured_sound_level:Math.round(e.audioLevel),sample_time_window:Math.round(e.timeStamp/10)})},t.prototype.handlePlayQualityData=function(e){var t=this.playQualityInfos.find((function(t){return t.stream_id==e.stream_id&&t.video_width==e.frameWidth&&t.video_height==e.frameHeight}));if(!t){var n=this.getRoomByStreamID(e.stream_id);t={timestamp_offset_begin:Math.abs(Number(e.timeStamp-this.qualityHeadTimestamp)),timestamp_offset_end:0,stream_id:e.stream_id,session_id:n?Number(n.sessionID):0,video_width:e.frameWidth,video_height:e.frameHeight,infos:[],room_id:n?n.roomID:"",room_session_id:n?Number(n.roomSessionID):0},this.playQualityInfos.push(t)}t.infos.push({audio_bitrate:Math.round(e.audioBitrate)||0,video_bitrate:Math.round(e.videoBitrate)||0,video_network_fps:Math.round(10*e.videoFPS)||0,downlink_plr:Math.round(e.audioPacketsLostRate)||0,audio_network_fps:Math.round(10*e.audioFPS)||0,audio_break_duration:Math.round(e.audio_break_duration/10),video_break_duration:Math.round(e.video_break_duration/10),rtt:e.currentRoundTripTime,rendered_sound_level:Math.round(e.audioLevel),audio_break_cancel_duration:Math.round(e.audio_break_cancel_duration/10),video_break_cancel_duration:Math.round(e.video_break_cancel_duration/10),audio_decode_time:Math.round(e.audio_decode_time/10),video_decode_time:Math.round(e.video_decode_time/10),real_sampling_interval:Math.round(e.real_sampling_interval/10),video_frames_decoded:Math.round(e.videoFramesDecoded)||0,video_frames_dropped:Math.round(e.videoFramesDropped)||0,sample_time_window:Math.round(e.timeStamp/10)})},t}(l.ZegoStreamCenter);t.ZegoStreamCenterWeb=v},2990:function(e,t,n){"use strict";var r,i=n(2100),o=i.Reader,s=i.Writer,a=i.util,c=i.roots.default||(i.roots.default={});c.logreport=((r={}).SpeedLogHead=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t,n;return e.prototype.version=0,e.prototype.signature=a.newBuffer([]),e.prototype.timestamp=0,e.prototype.event=0,e.prototype.app_id=0,e.prototype.user_id="",e.prototype.biz_type=0,e.prototype.device_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(18).bytes(e.signature),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).uint32(e.timestamp),null!=e.event&&Object.hasOwnProperty.call(e,"event")&&t.uint32(32).uint32(e.event),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(40).uint32(e.app_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(50).string(e.user_id),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(56).uint32(e.biz_type),null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(66).string(e.device_id),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.SpeedLogHead;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.version=e.uint32();break;case 2:r.signature=e.bytes();break;case 3:r.timestamp=e.uint32();break;case 4:r.event=e.uint32();break;case 5:r.app_id=e.uint32();break;case 6:r.user_id=e.string();break;case 7:r.biz_type=e.uint32();break;case 8:r.device_id=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.version&&e.hasOwnProperty("version")&&!a.isInteger(e.version)?"version: integer expected":null!=e.signature&&e.hasOwnProperty("signature")&&!(e.signature&&"number"==typeof e.signature.length||a.isString(e.signature))?"signature: buffer expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!a.isInteger(e.timestamp)?"timestamp: integer expected":null!=e.event&&e.hasOwnProperty("event")&&!a.isInteger(e.event)?"event: integer expected":null!=e.app_id&&e.hasOwnProperty("app_id")&&!a.isInteger(e.app_id)?"app_id: integer expected":null!=e.user_id&&e.hasOwnProperty("user_id")&&!a.isString(e.user_id)?"user_id: string expected":null!=e.biz_type&&e.hasOwnProperty("biz_type")&&!a.isInteger(e.biz_type)?"biz_type: integer expected":null!=e.device_id&&e.hasOwnProperty("device_id")&&!a.isString(e.device_id)?"device_id: string expected":null},e.fromObject=function(e){if(e instanceof c.logreport.SpeedLogHead)return e;var t=new c.logreport.SpeedLogHead;return null!=e.version&&(t.version=e.version>>>0),null!=e.signature&&("string"==typeof e.signature?a.base64.decode(e.signature,t.signature=a.newBuffer(a.base64.length(e.signature)),0):e.signature.length&&(t.signature=e.signature)),null!=e.timestamp&&(t.timestamp=e.timestamp>>>0),null!=e.event&&(t.event=e.event>>>0),null!=e.app_id&&(t.app_id=e.app_id>>>0),null!=e.user_id&&(t.user_id=String(e.user_id)),null!=e.biz_type&&(t.biz_type=e.biz_type>>>0),null!=e.device_id&&(t.device_id=String(e.device_id)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.version=0,t.bytes===String?n.signature="":(n.signature=[],t.bytes!==Array&&(n.signature=a.newBuffer(n.signature))),n.timestamp=0,n.event=0,n.app_id=0,n.user_id="",n.biz_type=0,n.device_id=""),null!=e.version&&e.hasOwnProperty("version")&&(n.version=e.version),null!=e.signature&&e.hasOwnProperty("signature")&&(n.signature=t.bytes===String?a.base64.encode(e.signature,0,e.signature.length):t.bytes===Array?Array.prototype.slice.call(e.signature):e.signature),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&(n.timestamp=e.timestamp),null!=e.event&&e.hasOwnProperty("event")&&(n.event=e.event),null!=e.app_id&&e.hasOwnProperty("app_id")&&(n.app_id=e.app_id),null!=e.user_id&&e.hasOwnProperty("user_id")&&(n.user_id=e.user_id),null!=e.biz_type&&e.hasOwnProperty("biz_type")&&(n.biz_type=e.biz_type),null!=e.device_id&&e.hasOwnProperty("device_id")&&(n.device_id=e.device_id),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e.ProtoVersion=(t={},(n=Object.create(t))[t[0]="PROTO_VERSION"]=0,n[t[1]="PROTO_VERSION1"]=1,n[t[2]="PROTO_VERSION2"]=2,n[t[3]="PROTO_VERSION3"]=3,n[t[4]="PROTO_VERSION4"]=4,n[t[5]="PROTO_VERSION5"]=5,n[t[6]="PROTO_VERSION6"]=6,n),e.Event=function(){var e={},t=Object.create(e);return t[e[0]="QUALITY_EVENT"]=0,t[e[100]="NO_BILLING_EVENT"]=100,t[e[300]="DETECT_QUALITY_EVENT"]=300,t}(),e.BizType=function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN"]=0,t[e[1]="LIVE"]=1,t[e[2]="RTV"]=2,t}(),e}(),r.SpeedLogRsp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.code=0,e.prototype.message="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.SpeedLogRsp;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.code=e.uint32();break;case 2:r.message=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.code&&e.hasOwnProperty("code")&&!a.isInteger(e.code)?"code: integer expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isString(e.message)?"message: string expected":null},e.fromObject=function(e){if(e instanceof c.logreport.SpeedLogRsp)return e;var t=new c.logreport.SpeedLogRsp;return null!=e.code&&(t.code=e.code>>>0),null!=e.message&&(t.message=String(e.message)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.code=0,n.message=""),null!=e.code&&e.hasOwnProperty("code")&&(n.code=e.code),null!=e.message&&e.hasOwnProperty("message")&&(n.message=e.message),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),r.QualityEvent=function(){function e(e){if(this.publish_quality_infos=[],this.play_quality_infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t,n;return e.prototype.hardware_infos=null,e.prototype.publish_quality_infos=a.emptyArray,e.prototype.play_quality_infos=a.emptyArray,e.prototype.network_type=0,e.prototype.charge_infos=null,e.prototype.client_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.hardware_infos&&Object.hasOwnProperty.call(e,"hardware_infos")&&c.logreport.HardwareInfos.encode(e.hardware_infos,t.uint32(10).fork()).ldelim(),null!=e.publish_quality_infos&&e.publish_quality_infos.length)for(var n=0;n<e.publish_quality_infos.length;++n)c.logreport.PublishQualityInfos.encode(e.publish_quality_infos[n],t.uint32(18).fork()).ldelim();if(null!=e.play_quality_infos&&e.play_quality_infos.length)for(n=0;n<e.play_quality_infos.length;++n)c.logreport.PlayQualityInfos.encode(e.play_quality_infos[n],t.uint32(26).fork()).ldelim();return null!=e.network_type&&Object.hasOwnProperty.call(e,"network_type")&&t.uint32(32).uint32(e.network_type),null!=e.charge_infos&&Object.hasOwnProperty.call(e,"charge_infos")&&c.logreport.ChargeInfos.encode(e.charge_infos,t.uint32(42).fork()).ldelim(),null!=e.client_type&&Object.hasOwnProperty.call(e,"client_type")&&t.uint32(800).uint32(e.client_type),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.QualityEvent;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.hardware_infos=c.logreport.HardwareInfos.decode(e,e.uint32());break;case 2:r.publish_quality_infos&&r.publish_quality_infos.length||(r.publish_quality_infos=[]),r.publish_quality_infos.push(c.logreport.PublishQualityInfos.decode(e,e.uint32()));break;case 3:r.play_quality_infos&&r.play_quality_infos.length||(r.play_quality_infos=[]),r.play_quality_infos.push(c.logreport.PlayQualityInfos.decode(e,e.uint32()));break;case 4:r.network_type=e.uint32();break;case 5:r.charge_infos=c.logreport.ChargeInfos.decode(e,e.uint32());break;case 100:r.client_type=e.uint32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.hardware_infos&&e.hasOwnProperty("hardware_infos")&&(n=c.logreport.HardwareInfos.verify(e.hardware_infos)))return"hardware_infos."+n;if(null!=e.publish_quality_infos&&e.hasOwnProperty("publish_quality_infos")){if(!Array.isArray(e.publish_quality_infos))return"publish_quality_infos: array expected";for(var t=0;t<e.publish_quality_infos.length;++t)if(n=c.logreport.PublishQualityInfos.verify(e.publish_quality_infos[t]))return"publish_quality_infos."+n}if(null!=e.play_quality_infos&&e.hasOwnProperty("play_quality_infos")){if(!Array.isArray(e.play_quality_infos))return"play_quality_infos: array expected";for(t=0;t<e.play_quality_infos.length;++t){var n;if(n=c.logreport.PlayQualityInfos.verify(e.play_quality_infos[t]))return"play_quality_infos."+n}}return null!=e.network_type&&e.hasOwnProperty("network_type")&&!a.isInteger(e.network_type)?"network_type: integer expected":null!=e.charge_infos&&e.hasOwnProperty("charge_infos")&&(n=c.logreport.ChargeInfos.verify(e.charge_infos))?"charge_infos."+n:null!=e.client_type&&e.hasOwnProperty("client_type")&&!a.isInteger(e.client_type)?"client_type: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.QualityEvent)return e;var t=new c.logreport.QualityEvent;if(null!=e.hardware_infos){if("object"!=typeof e.hardware_infos)throw TypeError(".logreport.QualityEvent.hardware_infos: object expected");t.hardware_infos=c.logreport.HardwareInfos.fromObject(e.hardware_infos)}if(e.publish_quality_infos){if(!Array.isArray(e.publish_quality_infos))throw TypeError(".logreport.QualityEvent.publish_quality_infos: array expected");t.publish_quality_infos=[];for(var n=0;n<e.publish_quality_infos.length;++n){if("object"!=typeof e.publish_quality_infos[n])throw TypeError(".logreport.QualityEvent.publish_quality_infos: object expected");t.publish_quality_infos[n]=c.logreport.PublishQualityInfos.fromObject(e.publish_quality_infos[n])}}if(e.play_quality_infos){if(!Array.isArray(e.play_quality_infos))throw TypeError(".logreport.QualityEvent.play_quality_infos: array expected");for(t.play_quality_infos=[],n=0;n<e.play_quality_infos.length;++n){if("object"!=typeof e.play_quality_infos[n])throw TypeError(".logreport.QualityEvent.play_quality_infos: object expected");t.play_quality_infos[n]=c.logreport.PlayQualityInfos.fromObject(e.play_quality_infos[n])}}if(null!=e.network_type&&(t.network_type=e.network_type>>>0),null!=e.charge_infos){if("object"!=typeof e.charge_infos)throw TypeError(".logreport.QualityEvent.charge_infos: object expected");t.charge_infos=c.logreport.ChargeInfos.fromObject(e.charge_infos)}return null!=e.client_type&&(t.client_type=e.client_type>>>0),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.publish_quality_infos=[],n.play_quality_infos=[]),t.defaults&&(n.hardware_infos=null,n.network_type=0,n.charge_infos=null,n.client_type=0),null!=e.hardware_infos&&e.hasOwnProperty("hardware_infos")&&(n.hardware_infos=c.logreport.HardwareInfos.toObject(e.hardware_infos,t)),e.publish_quality_infos&&e.publish_quality_infos.length){n.publish_quality_infos=[];for(var r=0;r<e.publish_quality_infos.length;++r)n.publish_quality_infos[r]=c.logreport.PublishQualityInfos.toObject(e.publish_quality_infos[r],t)}if(e.play_quality_infos&&e.play_quality_infos.length)for(n.play_quality_infos=[],r=0;r<e.play_quality_infos.length;++r)n.play_quality_infos[r]=c.logreport.PlayQualityInfos.toObject(e.play_quality_infos[r],t);return null!=e.network_type&&e.hasOwnProperty("network_type")&&(n.network_type=e.network_type),null!=e.charge_infos&&e.hasOwnProperty("charge_infos")&&(n.charge_infos=c.logreport.ChargeInfos.toObject(e.charge_infos,t)),null!=e.client_type&&e.hasOwnProperty("client_type")&&(n.client_type=e.client_type),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e.ResourceType=(t={},(n=Object.create(t))[t[0]="UNKNOWN"]=0,n[t[1]="CDN"]=1,n[t[2]="RTC"]=2,n[t[3]="L3"]=3,n),e}(),r.HardwareInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.infos=a.emptyArray,e.prototype.sys_mem_total=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.infos&&e.infos.length)for(var n=0;n<e.infos.length;++n)c.logreport.HardwareInfo.encode(e.infos[n],t.uint32(26).fork()).ldelim();return null!=e.sys_mem_total&&Object.hasOwnProperty.call(e,"sys_mem_total")&&t.uint32(32).uint32(e.sys_mem_total),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.HardwareInfos;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.timestamp_offset_begin=e.uint32();break;case 2:r.timestamp_offset_end=e.uint32();break;case 3:r.infos&&r.infos.length||(r.infos=[]),r.infos.push(c.logreport.HardwareInfo.decode(e,e.uint32()));break;case 4:r.sys_mem_total=e.uint32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&!a.isInteger(e.timestamp_offset_begin))return"timestamp_offset_begin: integer expected";if(null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&!a.isInteger(e.timestamp_offset_end))return"timestamp_offset_end: integer expected";if(null!=e.infos&&e.hasOwnProperty("infos")){if(!Array.isArray(e.infos))return"infos: array expected";for(var t=0;t<e.infos.length;++t){var n=c.logreport.HardwareInfo.verify(e.infos[t]);if(n)return"infos."+n}}return null!=e.sys_mem_total&&e.hasOwnProperty("sys_mem_total")&&!a.isInteger(e.sys_mem_total)?"sys_mem_total: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.HardwareInfos)return e;var t=new c.logreport.HardwareInfos;if(null!=e.timestamp_offset_begin&&(t.timestamp_offset_begin=e.timestamp_offset_begin>>>0),null!=e.timestamp_offset_end&&(t.timestamp_offset_end=e.timestamp_offset_end>>>0),e.infos){if(!Array.isArray(e.infos))throw TypeError(".logreport.HardwareInfos.infos: array expected");t.infos=[];for(var n=0;n<e.infos.length;++n){if("object"!=typeof e.infos[n])throw TypeError(".logreport.HardwareInfos.infos: object expected");t.infos[n]=c.logreport.HardwareInfo.fromObject(e.infos[n])}}return null!=e.sys_mem_total&&(t.sys_mem_total=e.sys_mem_total>>>0),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.infos=[]),t.defaults&&(n.timestamp_offset_begin=0,n.timestamp_offset_end=0,n.sys_mem_total=0),null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&(n.timestamp_offset_begin=e.timestamp_offset_begin),null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&(n.timestamp_offset_end=e.timestamp_offset_end),e.infos&&e.infos.length){n.infos=[];for(var r=0;r<e.infos.length;++r)n.infos[r]=c.logreport.HardwareInfo.toObject(e.infos[r],t)}return null!=e.sys_mem_total&&e.hasOwnProperty("sys_mem_total")&&(n.sys_mem_total=e.sys_mem_total),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),r.PublishQualityInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.stream_id="",e.prototype.session_id=0,e.prototype.video_width=0,e.prototype.video_height=0,e.prototype.ipv4=0,e.prototype.ipv6="",e.prototype.resource_type=0,e.prototype.infos=a.emptyArray,e.prototype.room_id="",e.prototype.evnvironment=0,e.prototype.ap="",e.prototype.session="",e.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.protocol_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).string(e.stream_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(32).uint32(e.session_id),null!=e.video_width&&Object.hasOwnProperty.call(e,"video_width")&&t.uint32(40).uint32(e.video_width),null!=e.video_height&&Object.hasOwnProperty.call(e,"video_height")&&t.uint32(48).uint32(e.video_height),null!=e.ipv4&&Object.hasOwnProperty.call(e,"ipv4")&&t.uint32(56).uint32(e.ipv4),null!=e.ipv6&&Object.hasOwnProperty.call(e,"ipv6")&&t.uint32(66).string(e.ipv6),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(72).uint32(e.resource_type),null!=e.infos&&e.infos.length)for(var n=0;n<e.infos.length;++n)c.logreport.PublishQualityInfo.encode(e.infos[n],t.uint32(82).fork()).ldelim();return null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(90).string(e.room_id),null!=e.evnvironment&&Object.hasOwnProperty.call(e,"evnvironment")&&t.uint32(104).uint32(e.evnvironment),null!=e.ap&&Object.hasOwnProperty.call(e,"ap")&&t.uint32(114).string(e.ap),null!=e.session&&Object.hasOwnProperty.call(e,"session")&&t.uint32(122).string(e.session),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(128).uint64(e.room_session_id),null!=e.protocol_type&&Object.hasOwnProperty.call(e,"protocol_type")&&t.uint32(136).uint32(e.protocol_type),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.PublishQualityInfos;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.timestamp_offset_begin=e.uint32();break;case 2:r.timestamp_offset_end=e.uint32();break;case 3:r.stream_id=e.string();break;case 4:r.session_id=e.uint32();break;case 5:r.video_width=e.uint32();break;case 6:r.video_height=e.uint32();break;case 7:r.ipv4=e.uint32();break;case 8:r.ipv6=e.string();break;case 9:r.resource_type=e.uint32();break;case 10:r.infos&&r.infos.length||(r.infos=[]),r.infos.push(c.logreport.PublishQualityInfo.decode(e,e.uint32()));break;case 11:r.room_id=e.string();break;case 13:r.evnvironment=e.uint32();break;case 14:r.ap=e.string();break;case 15:r.session=e.string();break;case 16:r.room_session_id=e.uint64();break;case 17:r.protocol_type=e.uint32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&!a.isInteger(e.timestamp_offset_begin))return"timestamp_offset_begin: integer expected";if(null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&!a.isInteger(e.timestamp_offset_end))return"timestamp_offset_end: integer expected";if(null!=e.stream_id&&e.hasOwnProperty("stream_id")&&!a.isString(e.stream_id))return"stream_id: string expected";if(null!=e.session_id&&e.hasOwnProperty("session_id")&&!a.isInteger(e.session_id))return"session_id: integer expected";if(null!=e.video_width&&e.hasOwnProperty("video_width")&&!a.isInteger(e.video_width))return"video_width: integer expected";if(null!=e.video_height&&e.hasOwnProperty("video_height")&&!a.isInteger(e.video_height))return"video_height: integer expected";if(null!=e.ipv4&&e.hasOwnProperty("ipv4")&&!a.isInteger(e.ipv4))return"ipv4: integer expected";if(null!=e.ipv6&&e.hasOwnProperty("ipv6")&&!a.isString(e.ipv6))return"ipv6: string expected";if(null!=e.resource_type&&e.hasOwnProperty("resource_type")&&!a.isInteger(e.resource_type))return"resource_type: integer expected";if(null!=e.infos&&e.hasOwnProperty("infos")){if(!Array.isArray(e.infos))return"infos: array expected";for(var t=0;t<e.infos.length;++t){var n=c.logreport.PublishQualityInfo.verify(e.infos[t]);if(n)return"infos."+n}}return null!=e.room_id&&e.hasOwnProperty("room_id")&&!a.isString(e.room_id)?"room_id: string expected":null!=e.evnvironment&&e.hasOwnProperty("evnvironment")&&!a.isInteger(e.evnvironment)?"evnvironment: integer expected":null!=e.ap&&e.hasOwnProperty("ap")&&!a.isString(e.ap)?"ap: string expected":null!=e.session&&e.hasOwnProperty("session")&&!a.isString(e.session)?"session: string expected":null!=e.room_session_id&&e.hasOwnProperty("room_session_id")&&!(a.isInteger(e.room_session_id)||e.room_session_id&&a.isInteger(e.room_session_id.low)&&a.isInteger(e.room_session_id.high))?"room_session_id: integer|Long expected":null!=e.protocol_type&&e.hasOwnProperty("protocol_type")&&!a.isInteger(e.protocol_type)?"protocol_type: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.PublishQualityInfos)return e;var t=new c.logreport.PublishQualityInfos;if(null!=e.timestamp_offset_begin&&(t.timestamp_offset_begin=e.timestamp_offset_begin>>>0),null!=e.timestamp_offset_end&&(t.timestamp_offset_end=e.timestamp_offset_end>>>0),null!=e.stream_id&&(t.stream_id=String(e.stream_id)),null!=e.session_id&&(t.session_id=e.session_id>>>0),null!=e.video_width&&(t.video_width=e.video_width>>>0),null!=e.video_height&&(t.video_height=e.video_height>>>0),null!=e.ipv4&&(t.ipv4=e.ipv4>>>0),null!=e.ipv6&&(t.ipv6=String(e.ipv6)),null!=e.resource_type&&(t.resource_type=e.resource_type>>>0),e.infos){if(!Array.isArray(e.infos))throw TypeError(".logreport.PublishQualityInfos.infos: array expected");t.infos=[];for(var n=0;n<e.infos.length;++n){if("object"!=typeof e.infos[n])throw TypeError(".logreport.PublishQualityInfos.infos: object expected");t.infos[n]=c.logreport.PublishQualityInfo.fromObject(e.infos[n])}}return null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.evnvironment&&(t.evnvironment=e.evnvironment>>>0),null!=e.ap&&(t.ap=String(e.ap)),null!=e.session&&(t.session=String(e.session)),null!=e.room_session_id&&(a.Long?(t.room_session_id=a.Long.fromValue(e.room_session_id)).unsigned=!0:"string"==typeof e.room_session_id?t.room_session_id=parseInt(e.room_session_id,10):"number"==typeof e.room_session_id?t.room_session_id=e.room_session_id:"object"==typeof e.room_session_id&&(t.room_session_id=new a.LongBits(e.room_session_id.low>>>0,e.room_session_id.high>>>0).toNumber(!0))),null!=e.protocol_type&&(t.protocol_type=e.protocol_type>>>0),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.infos=[]),t.defaults){if(n.timestamp_offset_begin=0,n.timestamp_offset_end=0,n.stream_id="",n.session_id=0,n.video_width=0,n.video_height=0,n.ipv4=0,n.ipv6="",n.resource_type=0,n.room_id="",n.evnvironment=0,n.ap="",n.session="",a.Long){var r=new a.Long(0,0,!0);n.room_session_id=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.room_session_id=t.longs===String?"0":0;n.protocol_type=0}if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&(n.timestamp_offset_begin=e.timestamp_offset_begin),null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&(n.timestamp_offset_end=e.timestamp_offset_end),null!=e.stream_id&&e.hasOwnProperty("stream_id")&&(n.stream_id=e.stream_id),null!=e.session_id&&e.hasOwnProperty("session_id")&&(n.session_id=e.session_id),null!=e.video_width&&e.hasOwnProperty("video_width")&&(n.video_width=e.video_width),null!=e.video_height&&e.hasOwnProperty("video_height")&&(n.video_height=e.video_height),null!=e.ipv4&&e.hasOwnProperty("ipv4")&&(n.ipv4=e.ipv4),null!=e.ipv6&&e.hasOwnProperty("ipv6")&&(n.ipv6=e.ipv6),null!=e.resource_type&&e.hasOwnProperty("resource_type")&&(n.resource_type=e.resource_type),e.infos&&e.infos.length){n.infos=[];for(var i=0;i<e.infos.length;++i)n.infos[i]=c.logreport.PublishQualityInfo.toObject(e.infos[i],t)}return null!=e.room_id&&e.hasOwnProperty("room_id")&&(n.room_id=e.room_id),null!=e.evnvironment&&e.hasOwnProperty("evnvironment")&&(n.evnvironment=e.evnvironment),null!=e.ap&&e.hasOwnProperty("ap")&&(n.ap=e.ap),null!=e.session&&e.hasOwnProperty("session")&&(n.session=e.session),null!=e.room_session_id&&e.hasOwnProperty("room_session_id")&&("number"==typeof e.room_session_id?n.room_session_id=t.longs===String?String(e.room_session_id):e.room_session_id:n.room_session_id=t.longs===String?a.Long.prototype.toString.call(e.room_session_id):t.longs===Number?new a.LongBits(e.room_session_id.low>>>0,e.room_session_id.high>>>0).toNumber(!0):e.room_session_id),null!=e.protocol_type&&e.hasOwnProperty("protocol_type")&&(n.protocol_type=e.protocol_type),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),r.PlayQualityInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.stream_id="",e.prototype.session_id=0,e.prototype.video_width=0,e.prototype.video_height=0,e.prototype.ipv4=0,e.prototype.ipv6="",e.prototype.resource_type=0,e.prototype.infos=a.emptyArray,e.prototype.room_id="",e.prototype.session="",e.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.protocol_type=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).string(e.stream_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(32).uint32(e.session_id),null!=e.video_width&&Object.hasOwnProperty.call(e,"video_width")&&t.uint32(40).uint32(e.video_width),null!=e.video_height&&Object.hasOwnProperty.call(e,"video_height")&&t.uint32(48).uint32(e.video_height),null!=e.ipv4&&Object.hasOwnProperty.call(e,"ipv4")&&t.uint32(56).uint32(e.ipv4),null!=e.ipv6&&Object.hasOwnProperty.call(e,"ipv6")&&t.uint32(66).string(e.ipv6),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(72).uint32(e.resource_type),null!=e.infos&&e.infos.length)for(var n=0;n<e.infos.length;++n)c.logreport.PlayQualityInfo.encode(e.infos[n],t.uint32(82).fork()).ldelim();return null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(90).string(e.room_id),null!=e.session&&Object.hasOwnProperty.call(e,"session")&&t.uint32(106).string(e.session),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(112).uint64(e.room_session_id),null!=e.protocol_type&&Object.hasOwnProperty.call(e,"protocol_type")&&t.uint32(120).uint32(e.protocol_type),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.PlayQualityInfos;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.timestamp_offset_begin=e.uint32();break;case 2:r.timestamp_offset_end=e.uint32();break;case 3:r.stream_id=e.string();break;case 4:r.session_id=e.uint32();break;case 5:r.video_width=e.uint32();break;case 6:r.video_height=e.uint32();break;case 7:r.ipv4=e.uint32();break;case 8:r.ipv6=e.string();break;case 9:r.resource_type=e.uint32();break;case 10:r.infos&&r.infos.length||(r.infos=[]),r.infos.push(c.logreport.PlayQualityInfo.decode(e,e.uint32()));break;case 11:r.room_id=e.string();break;case 13:r.session=e.string();break;case 14:r.room_session_id=e.uint64();break;case 15:r.protocol_type=e.uint32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&!a.isInteger(e.timestamp_offset_begin))return"timestamp_offset_begin: integer expected";if(null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&!a.isInteger(e.timestamp_offset_end))return"timestamp_offset_end: integer expected";if(null!=e.stream_id&&e.hasOwnProperty("stream_id")&&!a.isString(e.stream_id))return"stream_id: string expected";if(null!=e.session_id&&e.hasOwnProperty("session_id")&&!a.isInteger(e.session_id))return"session_id: integer expected";if(null!=e.video_width&&e.hasOwnProperty("video_width")&&!a.isInteger(e.video_width))return"video_width: integer expected";if(null!=e.video_height&&e.hasOwnProperty("video_height")&&!a.isInteger(e.video_height))return"video_height: integer expected";if(null!=e.ipv4&&e.hasOwnProperty("ipv4")&&!a.isInteger(e.ipv4))return"ipv4: integer expected";if(null!=e.ipv6&&e.hasOwnProperty("ipv6")&&!a.isString(e.ipv6))return"ipv6: string expected";if(null!=e.resource_type&&e.hasOwnProperty("resource_type")&&!a.isInteger(e.resource_type))return"resource_type: integer expected";if(null!=e.infos&&e.hasOwnProperty("infos")){if(!Array.isArray(e.infos))return"infos: array expected";for(var t=0;t<e.infos.length;++t){var n=c.logreport.PlayQualityInfo.verify(e.infos[t]);if(n)return"infos."+n}}return null!=e.room_id&&e.hasOwnProperty("room_id")&&!a.isString(e.room_id)?"room_id: string expected":null!=e.session&&e.hasOwnProperty("session")&&!a.isString(e.session)?"session: string expected":null!=e.room_session_id&&e.hasOwnProperty("room_session_id")&&!(a.isInteger(e.room_session_id)||e.room_session_id&&a.isInteger(e.room_session_id.low)&&a.isInteger(e.room_session_id.high))?"room_session_id: integer|Long expected":null!=e.protocol_type&&e.hasOwnProperty("protocol_type")&&!a.isInteger(e.protocol_type)?"protocol_type: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.PlayQualityInfos)return e;var t=new c.logreport.PlayQualityInfos;if(null!=e.timestamp_offset_begin&&(t.timestamp_offset_begin=e.timestamp_offset_begin>>>0),null!=e.timestamp_offset_end&&(t.timestamp_offset_end=e.timestamp_offset_end>>>0),null!=e.stream_id&&(t.stream_id=String(e.stream_id)),null!=e.session_id&&(t.session_id=e.session_id>>>0),null!=e.video_width&&(t.video_width=e.video_width>>>0),null!=e.video_height&&(t.video_height=e.video_height>>>0),null!=e.ipv4&&(t.ipv4=e.ipv4>>>0),null!=e.ipv6&&(t.ipv6=String(e.ipv6)),null!=e.resource_type&&(t.resource_type=e.resource_type>>>0),e.infos){if(!Array.isArray(e.infos))throw TypeError(".logreport.PlayQualityInfos.infos: array expected");t.infos=[];for(var n=0;n<e.infos.length;++n){if("object"!=typeof e.infos[n])throw TypeError(".logreport.PlayQualityInfos.infos: object expected");t.infos[n]=c.logreport.PlayQualityInfo.fromObject(e.infos[n])}}return null!=e.room_id&&(t.room_id=String(e.room_id)),null!=e.session&&(t.session=String(e.session)),null!=e.room_session_id&&(a.Long?(t.room_session_id=a.Long.fromValue(e.room_session_id)).unsigned=!0:"string"==typeof e.room_session_id?t.room_session_id=parseInt(e.room_session_id,10):"number"==typeof e.room_session_id?t.room_session_id=e.room_session_id:"object"==typeof e.room_session_id&&(t.room_session_id=new a.LongBits(e.room_session_id.low>>>0,e.room_session_id.high>>>0).toNumber(!0))),null!=e.protocol_type&&(t.protocol_type=e.protocol_type>>>0),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.infos=[]),t.defaults){if(n.timestamp_offset_begin=0,n.timestamp_offset_end=0,n.stream_id="",n.session_id=0,n.video_width=0,n.video_height=0,n.ipv4=0,n.ipv6="",n.resource_type=0,n.room_id="",n.session="",a.Long){var r=new a.Long(0,0,!0);n.room_session_id=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.room_session_id=t.longs===String?"0":0;n.protocol_type=0}if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&(n.timestamp_offset_begin=e.timestamp_offset_begin),null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&(n.timestamp_offset_end=e.timestamp_offset_end),null!=e.stream_id&&e.hasOwnProperty("stream_id")&&(n.stream_id=e.stream_id),null!=e.session_id&&e.hasOwnProperty("session_id")&&(n.session_id=e.session_id),null!=e.video_width&&e.hasOwnProperty("video_width")&&(n.video_width=e.video_width),null!=e.video_height&&e.hasOwnProperty("video_height")&&(n.video_height=e.video_height),null!=e.ipv4&&e.hasOwnProperty("ipv4")&&(n.ipv4=e.ipv4),null!=e.ipv6&&e.hasOwnProperty("ipv6")&&(n.ipv6=e.ipv6),null!=e.resource_type&&e.hasOwnProperty("resource_type")&&(n.resource_type=e.resource_type),e.infos&&e.infos.length){n.infos=[];for(var i=0;i<e.infos.length;++i)n.infos[i]=c.logreport.PlayQualityInfo.toObject(e.infos[i],t)}return null!=e.room_id&&e.hasOwnProperty("room_id")&&(n.room_id=e.room_id),null!=e.session&&e.hasOwnProperty("session")&&(n.session=e.session),null!=e.room_session_id&&e.hasOwnProperty("room_session_id")&&("number"==typeof e.room_session_id?n.room_session_id=t.longs===String?String(e.room_session_id):e.room_session_id:n.room_session_id=t.longs===String?a.Long.prototype.toString.call(e.room_session_id):t.longs===Number?new a.LongBits(e.room_session_id.low>>>0,e.room_session_id.high>>>0).toNumber(!0):e.room_session_id),null!=e.protocol_type&&e.hasOwnProperty("protocol_type")&&(n.protocol_type=e.protocol_type),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),r.ChargeInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.timestamp_offset_begin=0,e.prototype.timestamp_offset_end=0,e.prototype.timestamp_diff_flag=0,e.prototype.timestamp_diff=0,e.prototype.room_id="",e.prototype.infos=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint32(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint32(e.timestamp_offset_end),null!=e.timestamp_diff_flag&&Object.hasOwnProperty.call(e,"timestamp_diff_flag")&&t.uint32(24).uint32(e.timestamp_diff_flag),null!=e.timestamp_diff&&Object.hasOwnProperty.call(e,"timestamp_diff")&&t.uint32(32).uint32(e.timestamp_diff),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(42).string(e.room_id),null!=e.infos&&e.infos.length)for(var n=0;n<e.infos.length;++n)c.logreport.ChargeInfo.encode(e.infos[n],t.uint32(802).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.ChargeInfos;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.timestamp_offset_begin=e.uint32();break;case 2:r.timestamp_offset_end=e.uint32();break;case 3:r.timestamp_diff_flag=e.uint32();break;case 4:r.timestamp_diff=e.uint32();break;case 5:r.room_id=e.string();break;case 100:r.infos&&r.infos.length||(r.infos=[]),r.infos.push(c.logreport.ChargeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&!a.isInteger(e.timestamp_offset_begin))return"timestamp_offset_begin: integer expected";if(null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&!a.isInteger(e.timestamp_offset_end))return"timestamp_offset_end: integer expected";if(null!=e.timestamp_diff_flag&&e.hasOwnProperty("timestamp_diff_flag")&&!a.isInteger(e.timestamp_diff_flag))return"timestamp_diff_flag: integer expected";if(null!=e.timestamp_diff&&e.hasOwnProperty("timestamp_diff")&&!a.isInteger(e.timestamp_diff))return"timestamp_diff: integer expected";if(null!=e.room_id&&e.hasOwnProperty("room_id")&&!a.isString(e.room_id))return"room_id: string expected";if(null!=e.infos&&e.hasOwnProperty("infos")){if(!Array.isArray(e.infos))return"infos: array expected";for(var t=0;t<e.infos.length;++t){var n=c.logreport.ChargeInfo.verify(e.infos[t]);if(n)return"infos."+n}}return null},e.fromObject=function(e){if(e instanceof c.logreport.ChargeInfos)return e;var t=new c.logreport.ChargeInfos;if(null!=e.timestamp_offset_begin&&(t.timestamp_offset_begin=e.timestamp_offset_begin>>>0),null!=e.timestamp_offset_end&&(t.timestamp_offset_end=e.timestamp_offset_end>>>0),null!=e.timestamp_diff_flag&&(t.timestamp_diff_flag=e.timestamp_diff_flag>>>0),null!=e.timestamp_diff&&(t.timestamp_diff=e.timestamp_diff>>>0),null!=e.room_id&&(t.room_id=String(e.room_id)),e.infos){if(!Array.isArray(e.infos))throw TypeError(".logreport.ChargeInfos.infos: array expected");t.infos=[];for(var n=0;n<e.infos.length;++n){if("object"!=typeof e.infos[n])throw TypeError(".logreport.ChargeInfos.infos: object expected");t.infos[n]=c.logreport.ChargeInfo.fromObject(e.infos[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.infos=[]),t.defaults&&(n.timestamp_offset_begin=0,n.timestamp_offset_end=0,n.timestamp_diff_flag=0,n.timestamp_diff=0,n.room_id=""),null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&(n.timestamp_offset_begin=e.timestamp_offset_begin),null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&(n.timestamp_offset_end=e.timestamp_offset_end),null!=e.timestamp_diff_flag&&e.hasOwnProperty("timestamp_diff_flag")&&(n.timestamp_diff_flag=e.timestamp_diff_flag),null!=e.timestamp_diff&&e.hasOwnProperty("timestamp_diff")&&(n.timestamp_diff=e.timestamp_diff),null!=e.room_id&&e.hasOwnProperty("room_id")&&(n.room_id=e.room_id),e.infos&&e.infos.length){n.infos=[];for(var r=0;r<e.infos.length;++r)n.infos[r]=c.logreport.ChargeInfo.toObject(e.infos[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),r.HardwareInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sys_cpu_used=0,e.prototype.app_cpu_used=0,e.prototype.sys_mem_used=0,e.prototype.app_mem_used=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.sys_cpu_used&&Object.hasOwnProperty.call(e,"sys_cpu_used")&&t.uint32(8).uint32(e.sys_cpu_used),null!=e.app_cpu_used&&Object.hasOwnProperty.call(e,"app_cpu_used")&&t.uint32(16).uint32(e.app_cpu_used),null!=e.sys_mem_used&&Object.hasOwnProperty.call(e,"sys_mem_used")&&t.uint32(24).uint32(e.sys_mem_used),null!=e.app_mem_used&&Object.hasOwnProperty.call(e,"app_mem_used")&&t.uint32(32).uint32(e.app_mem_used),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.HardwareInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.sys_cpu_used=e.uint32();break;case 2:r.app_cpu_used=e.uint32();break;case 3:r.sys_mem_used=e.uint32();break;case 4:r.app_mem_used=e.uint32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.sys_cpu_used&&e.hasOwnProperty("sys_cpu_used")&&!a.isInteger(e.sys_cpu_used)?"sys_cpu_used: integer expected":null!=e.app_cpu_used&&e.hasOwnProperty("app_cpu_used")&&!a.isInteger(e.app_cpu_used)?"app_cpu_used: integer expected":null!=e.sys_mem_used&&e.hasOwnProperty("sys_mem_used")&&!a.isInteger(e.sys_mem_used)?"sys_mem_used: integer expected":null!=e.app_mem_used&&e.hasOwnProperty("app_mem_used")&&!a.isInteger(e.app_mem_used)?"app_mem_used: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.HardwareInfo)return e;var t=new c.logreport.HardwareInfo;return null!=e.sys_cpu_used&&(t.sys_cpu_used=e.sys_cpu_used>>>0),null!=e.app_cpu_used&&(t.app_cpu_used=e.app_cpu_used>>>0),null!=e.sys_mem_used&&(t.sys_mem_used=e.sys_mem_used>>>0),null!=e.app_mem_used&&(t.app_mem_used=e.app_mem_used>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.sys_cpu_used=0,n.app_cpu_used=0,n.sys_mem_used=0,n.app_mem_used=0),null!=e.sys_cpu_used&&e.hasOwnProperty("sys_cpu_used")&&(n.sys_cpu_used=e.sys_cpu_used),null!=e.app_cpu_used&&e.hasOwnProperty("app_cpu_used")&&(n.app_cpu_used=e.app_cpu_used),null!=e.sys_mem_used&&e.hasOwnProperty("sys_mem_used")&&(n.sys_mem_used=e.sys_mem_used),null!=e.app_mem_used&&e.hasOwnProperty("app_mem_used")&&(n.app_mem_used=e.app_mem_used),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),r.PublishQualityInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.audio_bitrate=0,e.prototype.video_bitrate=0,e.prototype.video_capture_fps=0,e.prototype.video_network_fps=0,e.prototype.uplink_plr=0,e.prototype.rtt=0,e.prototype.audio_network_fps=0,e.prototype.captured_sound_level=0,e.prototype.sample_time_window=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.audio_bitrate&&Object.hasOwnProperty.call(e,"audio_bitrate")&&t.uint32(8).uint32(e.audio_bitrate),null!=e.video_bitrate&&Object.hasOwnProperty.call(e,"video_bitrate")&&t.uint32(16).uint32(e.video_bitrate),null!=e.video_capture_fps&&Object.hasOwnProperty.call(e,"video_capture_fps")&&t.uint32(24).uint32(e.video_capture_fps),null!=e.video_network_fps&&Object.hasOwnProperty.call(e,"video_network_fps")&&t.uint32(32).uint32(e.video_network_fps),null!=e.uplink_plr&&Object.hasOwnProperty.call(e,"uplink_plr")&&t.uint32(40).uint32(e.uplink_plr),null!=e.rtt&&Object.hasOwnProperty.call(e,"rtt")&&t.uint32(48).uint32(e.rtt),null!=e.audio_network_fps&&Object.hasOwnProperty.call(e,"audio_network_fps")&&t.uint32(56).uint32(e.audio_network_fps),null!=e.captured_sound_level&&Object.hasOwnProperty.call(e,"captured_sound_level")&&t.uint32(64).uint32(e.captured_sound_level),null!=e.sample_time_window&&Object.hasOwnProperty.call(e,"sample_time_window")&&t.uint32(800).uint32(e.sample_time_window),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.PublishQualityInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.audio_bitrate=e.uint32();break;case 2:r.video_bitrate=e.uint32();break;case 3:r.video_capture_fps=e.uint32();break;case 4:r.video_network_fps=e.uint32();break;case 5:r.uplink_plr=e.uint32();break;case 6:r.rtt=e.uint32();break;case 7:r.audio_network_fps=e.uint32();break;case 8:r.captured_sound_level=e.uint32();break;case 100:r.sample_time_window=e.uint32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.audio_bitrate&&e.hasOwnProperty("audio_bitrate")&&!a.isInteger(e.audio_bitrate)?"audio_bitrate: integer expected":null!=e.video_bitrate&&e.hasOwnProperty("video_bitrate")&&!a.isInteger(e.video_bitrate)?"video_bitrate: integer expected":null!=e.video_capture_fps&&e.hasOwnProperty("video_capture_fps")&&!a.isInteger(e.video_capture_fps)?"video_capture_fps: integer expected":null!=e.video_network_fps&&e.hasOwnProperty("video_network_fps")&&!a.isInteger(e.video_network_fps)?"video_network_fps: integer expected":null!=e.uplink_plr&&e.hasOwnProperty("uplink_plr")&&!a.isInteger(e.uplink_plr)?"uplink_plr: integer expected":null!=e.rtt&&e.hasOwnProperty("rtt")&&!a.isInteger(e.rtt)?"rtt: integer expected":null!=e.audio_network_fps&&e.hasOwnProperty("audio_network_fps")&&!a.isInteger(e.audio_network_fps)?"audio_network_fps: integer expected":null!=e.captured_sound_level&&e.hasOwnProperty("captured_sound_level")&&!a.isInteger(e.captured_sound_level)?"captured_sound_level: integer expected":null!=e.sample_time_window&&e.hasOwnProperty("sample_time_window")&&!a.isInteger(e.sample_time_window)?"sample_time_window: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.PublishQualityInfo)return e;var t=new c.logreport.PublishQualityInfo;return null!=e.audio_bitrate&&(t.audio_bitrate=e.audio_bitrate>>>0),null!=e.video_bitrate&&(t.video_bitrate=e.video_bitrate>>>0),null!=e.video_capture_fps&&(t.video_capture_fps=e.video_capture_fps>>>0),null!=e.video_network_fps&&(t.video_network_fps=e.video_network_fps>>>0),null!=e.uplink_plr&&(t.uplink_plr=e.uplink_plr>>>0),null!=e.rtt&&(t.rtt=e.rtt>>>0),null!=e.audio_network_fps&&(t.audio_network_fps=e.audio_network_fps>>>0),null!=e.captured_sound_level&&(t.captured_sound_level=e.captured_sound_level>>>0),null!=e.sample_time_window&&(t.sample_time_window=e.sample_time_window>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.audio_bitrate=0,n.video_bitrate=0,n.video_capture_fps=0,n.video_network_fps=0,n.uplink_plr=0,n.rtt=0,n.audio_network_fps=0,n.captured_sound_level=0,n.sample_time_window=0),null!=e.audio_bitrate&&e.hasOwnProperty("audio_bitrate")&&(n.audio_bitrate=e.audio_bitrate),null!=e.video_bitrate&&e.hasOwnProperty("video_bitrate")&&(n.video_bitrate=e.video_bitrate),null!=e.video_capture_fps&&e.hasOwnProperty("video_capture_fps")&&(n.video_capture_fps=e.video_capture_fps),null!=e.video_network_fps&&e.hasOwnProperty("video_network_fps")&&(n.video_network_fps=e.video_network_fps),null!=e.uplink_plr&&e.hasOwnProperty("uplink_plr")&&(n.uplink_plr=e.uplink_plr),null!=e.rtt&&e.hasOwnProperty("rtt")&&(n.rtt=e.rtt),null!=e.audio_network_fps&&e.hasOwnProperty("audio_network_fps")&&(n.audio_network_fps=e.audio_network_fps),null!=e.captured_sound_level&&e.hasOwnProperty("captured_sound_level")&&(n.captured_sound_level=e.captured_sound_level),null!=e.sample_time_window&&e.hasOwnProperty("sample_time_window")&&(n.sample_time_window=e.sample_time_window),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),r.PlayQualityInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.audio_bitrate=0,e.prototype.video_bitrate=0,e.prototype.video_network_fps=0,e.prototype.audio_break_count=0,e.prototype.video_break_count=0,e.prototype.downlink_plr=0,e.prototype.peer_to_peer_plr=0,e.prototype.peer_to_peer_delay=0,e.prototype.audio_network_fps=0,e.prototype.audio_break_duration=0,e.prototype.video_break_duration=0,e.prototype.audio_break_rate=0,e.prototype.video_break_rate=0,e.prototype.audio_break_cancel=0,e.prototype.video_break_cancel=0,e.prototype.rtt=0,e.prototype.rendered_sound_level=0,e.prototype.audio_break_cancel_duration=0,e.prototype.video_break_cancel_duration=0,e.prototype.audio_decode_time=0,e.prototype.video_decode_time=0,e.prototype.real_sampling_interval=0,e.prototype.mos=0,e.prototype.audio_decode_fps=0,e.prototype.video_decode_fps=0,e.prototype.video_frames_decoded=0,e.prototype.video_frames_dropped=0,e.prototype.sample_time_window=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.audio_bitrate&&Object.hasOwnProperty.call(e,"audio_bitrate")&&t.uint32(8).uint32(e.audio_bitrate),null!=e.video_bitrate&&Object.hasOwnProperty.call(e,"video_bitrate")&&t.uint32(16).uint32(e.video_bitrate),null!=e.video_network_fps&&Object.hasOwnProperty.call(e,"video_network_fps")&&t.uint32(24).uint32(e.video_network_fps),null!=e.audio_break_count&&Object.hasOwnProperty.call(e,"audio_break_count")&&t.uint32(32).uint32(e.audio_break_count),null!=e.video_break_count&&Object.hasOwnProperty.call(e,"video_break_count")&&t.uint32(40).uint32(e.video_break_count),null!=e.downlink_plr&&Object.hasOwnProperty.call(e,"downlink_plr")&&t.uint32(48).uint32(e.downlink_plr),null!=e.peer_to_peer_plr&&Object.hasOwnProperty.call(e,"peer_to_peer_plr")&&t.uint32(56).uint32(e.peer_to_peer_plr),null!=e.peer_to_peer_delay&&Object.hasOwnProperty.call(e,"peer_to_peer_delay")&&t.uint32(64).uint32(e.peer_to_peer_delay),null!=e.audio_network_fps&&Object.hasOwnProperty.call(e,"audio_network_fps")&&t.uint32(72).uint32(e.audio_network_fps),null!=e.audio_break_duration&&Object.hasOwnProperty.call(e,"audio_break_duration")&&t.uint32(80).uint32(e.audio_break_duration),null!=e.video_break_duration&&Object.hasOwnProperty.call(e,"video_break_duration")&&t.uint32(88).uint32(e.video_break_duration),null!=e.audio_break_rate&&Object.hasOwnProperty.call(e,"audio_break_rate")&&t.uint32(96).uint32(e.audio_break_rate),null!=e.video_break_rate&&Object.hasOwnProperty.call(e,"video_break_rate")&&t.uint32(104).uint32(e.video_break_rate),null!=e.audio_break_cancel&&Object.hasOwnProperty.call(e,"audio_break_cancel")&&t.uint32(112).uint32(e.audio_break_cancel),null!=e.video_break_cancel&&Object.hasOwnProperty.call(e,"video_break_cancel")&&t.uint32(120).uint32(e.video_break_cancel),null!=e.rtt&&Object.hasOwnProperty.call(e,"rtt")&&t.uint32(128).uint32(e.rtt),null!=e.rendered_sound_level&&Object.hasOwnProperty.call(e,"rendered_sound_level")&&t.uint32(136).uint32(e.rendered_sound_level),null!=e.audio_break_cancel_duration&&Object.hasOwnProperty.call(e,"audio_break_cancel_duration")&&t.uint32(144).uint32(e.audio_break_cancel_duration),null!=e.video_break_cancel_duration&&Object.hasOwnProperty.call(e,"video_break_cancel_duration")&&t.uint32(152).uint32(e.video_break_cancel_duration),null!=e.audio_decode_time&&Object.hasOwnProperty.call(e,"audio_decode_time")&&t.uint32(160).uint32(e.audio_decode_time),null!=e.video_decode_time&&Object.hasOwnProperty.call(e,"video_decode_time")&&t.uint32(168).uint32(e.video_decode_time),null!=e.real_sampling_interval&&Object.hasOwnProperty.call(e,"real_sampling_interval")&&t.uint32(176).uint32(e.real_sampling_interval),null!=e.mos&&Object.hasOwnProperty.call(e,"mos")&&t.uint32(184).int32(e.mos),null!=e.audio_decode_fps&&Object.hasOwnProperty.call(e,"audio_decode_fps")&&t.uint32(192).uint32(e.audio_decode_fps),null!=e.video_decode_fps&&Object.hasOwnProperty.call(e,"video_decode_fps")&&t.uint32(200).uint32(e.video_decode_fps),null!=e.video_frames_decoded&&Object.hasOwnProperty.call(e,"video_frames_decoded")&&t.uint32(208).uint32(e.video_frames_decoded),null!=e.video_frames_dropped&&Object.hasOwnProperty.call(e,"video_frames_dropped")&&t.uint32(216).uint32(e.video_frames_dropped),null!=e.sample_time_window&&Object.hasOwnProperty.call(e,"sample_time_window")&&t.uint32(800).uint32(e.sample_time_window),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.PlayQualityInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.audio_bitrate=e.uint32();break;case 2:r.video_bitrate=e.uint32();break;case 3:r.video_network_fps=e.uint32();break;case 4:r.audio_break_count=e.uint32();break;case 5:r.video_break_count=e.uint32();break;case 6:r.downlink_plr=e.uint32();break;case 7:r.peer_to_peer_plr=e.uint32();break;case 8:r.peer_to_peer_delay=e.uint32();break;case 9:r.audio_network_fps=e.uint32();break;case 10:r.audio_break_duration=e.uint32();break;case 11:r.video_break_duration=e.uint32();break;case 12:r.audio_break_rate=e.uint32();break;case 13:r.video_break_rate=e.uint32();break;case 14:r.audio_break_cancel=e.uint32();break;case 15:r.video_break_cancel=e.uint32();break;case 16:r.rtt=e.uint32();break;case 17:r.rendered_sound_level=e.uint32();break;case 18:r.audio_break_cancel_duration=e.uint32();break;case 19:r.video_break_cancel_duration=e.uint32();break;case 20:r.audio_decode_time=e.uint32();break;case 21:r.video_decode_time=e.uint32();break;case 22:r.real_sampling_interval=e.uint32();break;case 23:r.mos=e.int32();break;case 24:r.audio_decode_fps=e.uint32();break;case 25:r.video_decode_fps=e.uint32();break;case 26:r.video_frames_decoded=e.uint32();break;case 27:r.video_frames_dropped=e.uint32();break;case 100:r.sample_time_window=e.uint32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.audio_bitrate&&e.hasOwnProperty("audio_bitrate")&&!a.isInteger(e.audio_bitrate)?"audio_bitrate: integer expected":null!=e.video_bitrate&&e.hasOwnProperty("video_bitrate")&&!a.isInteger(e.video_bitrate)?"video_bitrate: integer expected":null!=e.video_network_fps&&e.hasOwnProperty("video_network_fps")&&!a.isInteger(e.video_network_fps)?"video_network_fps: integer expected":null!=e.audio_break_count&&e.hasOwnProperty("audio_break_count")&&!a.isInteger(e.audio_break_count)?"audio_break_count: integer expected":null!=e.video_break_count&&e.hasOwnProperty("video_break_count")&&!a.isInteger(e.video_break_count)?"video_break_count: integer expected":null!=e.downlink_plr&&e.hasOwnProperty("downlink_plr")&&!a.isInteger(e.downlink_plr)?"downlink_plr: integer expected":null!=e.peer_to_peer_plr&&e.hasOwnProperty("peer_to_peer_plr")&&!a.isInteger(e.peer_to_peer_plr)?"peer_to_peer_plr: integer expected":null!=e.peer_to_peer_delay&&e.hasOwnProperty("peer_to_peer_delay")&&!a.isInteger(e.peer_to_peer_delay)?"peer_to_peer_delay: integer expected":null!=e.audio_network_fps&&e.hasOwnProperty("audio_network_fps")&&!a.isInteger(e.audio_network_fps)?"audio_network_fps: integer expected":null!=e.audio_break_duration&&e.hasOwnProperty("audio_break_duration")&&!a.isInteger(e.audio_break_duration)?"audio_break_duration: integer expected":null!=e.video_break_duration&&e.hasOwnProperty("video_break_duration")&&!a.isInteger(e.video_break_duration)?"video_break_duration: integer expected":null!=e.audio_break_rate&&e.hasOwnProperty("audio_break_rate")&&!a.isInteger(e.audio_break_rate)?"audio_break_rate: integer expected":null!=e.video_break_rate&&e.hasOwnProperty("video_break_rate")&&!a.isInteger(e.video_break_rate)?"video_break_rate: integer expected":null!=e.audio_break_cancel&&e.hasOwnProperty("audio_break_cancel")&&!a.isInteger(e.audio_break_cancel)?"audio_break_cancel: integer expected":null!=e.video_break_cancel&&e.hasOwnProperty("video_break_cancel")&&!a.isInteger(e.video_break_cancel)?"video_break_cancel: integer expected":null!=e.rtt&&e.hasOwnProperty("rtt")&&!a.isInteger(e.rtt)?"rtt: integer expected":null!=e.rendered_sound_level&&e.hasOwnProperty("rendered_sound_level")&&!a.isInteger(e.rendered_sound_level)?"rendered_sound_level: integer expected":null!=e.audio_break_cancel_duration&&e.hasOwnProperty("audio_break_cancel_duration")&&!a.isInteger(e.audio_break_cancel_duration)?"audio_break_cancel_duration: integer expected":null!=e.video_break_cancel_duration&&e.hasOwnProperty("video_break_cancel_duration")&&!a.isInteger(e.video_break_cancel_duration)?"video_break_cancel_duration: integer expected":null!=e.audio_decode_time&&e.hasOwnProperty("audio_decode_time")&&!a.isInteger(e.audio_decode_time)?"audio_decode_time: integer expected":null!=e.video_decode_time&&e.hasOwnProperty("video_decode_time")&&!a.isInteger(e.video_decode_time)?"video_decode_time: integer expected":null!=e.real_sampling_interval&&e.hasOwnProperty("real_sampling_interval")&&!a.isInteger(e.real_sampling_interval)?"real_sampling_interval: integer expected":null!=e.mos&&e.hasOwnProperty("mos")&&!a.isInteger(e.mos)?"mos: integer expected":null!=e.audio_decode_fps&&e.hasOwnProperty("audio_decode_fps")&&!a.isInteger(e.audio_decode_fps)?"audio_decode_fps: integer expected":null!=e.video_decode_fps&&e.hasOwnProperty("video_decode_fps")&&!a.isInteger(e.video_decode_fps)?"video_decode_fps: integer expected":null!=e.video_frames_decoded&&e.hasOwnProperty("video_frames_decoded")&&!a.isInteger(e.video_frames_decoded)?"video_frames_decoded: integer expected":null!=e.video_frames_dropped&&e.hasOwnProperty("video_frames_dropped")&&!a.isInteger(e.video_frames_dropped)?"video_frames_dropped: integer expected":null!=e.sample_time_window&&e.hasOwnProperty("sample_time_window")&&!a.isInteger(e.sample_time_window)?"sample_time_window: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.PlayQualityInfo)return e;var t=new c.logreport.PlayQualityInfo;return null!=e.audio_bitrate&&(t.audio_bitrate=e.audio_bitrate>>>0),null!=e.video_bitrate&&(t.video_bitrate=e.video_bitrate>>>0),null!=e.video_network_fps&&(t.video_network_fps=e.video_network_fps>>>0),null!=e.audio_break_count&&(t.audio_break_count=e.audio_break_count>>>0),null!=e.video_break_count&&(t.video_break_count=e.video_break_count>>>0),null!=e.downlink_plr&&(t.downlink_plr=e.downlink_plr>>>0),null!=e.peer_to_peer_plr&&(t.peer_to_peer_plr=e.peer_to_peer_plr>>>0),null!=e.peer_to_peer_delay&&(t.peer_to_peer_delay=e.peer_to_peer_delay>>>0),null!=e.audio_network_fps&&(t.audio_network_fps=e.audio_network_fps>>>0),null!=e.audio_break_duration&&(t.audio_break_duration=e.audio_break_duration>>>0),null!=e.video_break_duration&&(t.video_break_duration=e.video_break_duration>>>0),null!=e.audio_break_rate&&(t.audio_break_rate=e.audio_break_rate>>>0),null!=e.video_break_rate&&(t.video_break_rate=e.video_break_rate>>>0),null!=e.audio_break_cancel&&(t.audio_break_cancel=e.audio_break_cancel>>>0),null!=e.video_break_cancel&&(t.video_break_cancel=e.video_break_cancel>>>0),null!=e.rtt&&(t.rtt=e.rtt>>>0),null!=e.rendered_sound_level&&(t.rendered_sound_level=e.rendered_sound_level>>>0),null!=e.audio_break_cancel_duration&&(t.audio_break_cancel_duration=e.audio_break_cancel_duration>>>0),null!=e.video_break_cancel_duration&&(t.video_break_cancel_duration=e.video_break_cancel_duration>>>0),null!=e.audio_decode_time&&(t.audio_decode_time=e.audio_decode_time>>>0),null!=e.video_decode_time&&(t.video_decode_time=e.video_decode_time>>>0),null!=e.real_sampling_interval&&(t.real_sampling_interval=e.real_sampling_interval>>>0),null!=e.mos&&(t.mos=0|e.mos),null!=e.audio_decode_fps&&(t.audio_decode_fps=e.audio_decode_fps>>>0),null!=e.video_decode_fps&&(t.video_decode_fps=e.video_decode_fps>>>0),null!=e.video_frames_decoded&&(t.video_frames_decoded=e.video_frames_decoded>>>0),null!=e.video_frames_dropped&&(t.video_frames_dropped=e.video_frames_dropped>>>0),null!=e.sample_time_window&&(t.sample_time_window=e.sample_time_window>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.audio_bitrate=0,n.video_bitrate=0,n.video_network_fps=0,n.audio_break_count=0,n.video_break_count=0,n.downlink_plr=0,n.peer_to_peer_plr=0,n.peer_to_peer_delay=0,n.audio_network_fps=0,n.audio_break_duration=0,n.video_break_duration=0,n.audio_break_rate=0,n.video_break_rate=0,n.audio_break_cancel=0,n.video_break_cancel=0,n.rtt=0,n.rendered_sound_level=0,n.audio_break_cancel_duration=0,n.video_break_cancel_duration=0,n.audio_decode_time=0,n.video_decode_time=0,n.real_sampling_interval=0,n.mos=0,n.audio_decode_fps=0,n.video_decode_fps=0,n.video_frames_decoded=0,n.video_frames_dropped=0,n.sample_time_window=0),null!=e.audio_bitrate&&e.hasOwnProperty("audio_bitrate")&&(n.audio_bitrate=e.audio_bitrate),null!=e.video_bitrate&&e.hasOwnProperty("video_bitrate")&&(n.video_bitrate=e.video_bitrate),null!=e.video_network_fps&&e.hasOwnProperty("video_network_fps")&&(n.video_network_fps=e.video_network_fps),null!=e.audio_break_count&&e.hasOwnProperty("audio_break_count")&&(n.audio_break_count=e.audio_break_count),null!=e.video_break_count&&e.hasOwnProperty("video_break_count")&&(n.video_break_count=e.video_break_count),null!=e.downlink_plr&&e.hasOwnProperty("downlink_plr")&&(n.downlink_plr=e.downlink_plr),null!=e.peer_to_peer_plr&&e.hasOwnProperty("peer_to_peer_plr")&&(n.peer_to_peer_plr=e.peer_to_peer_plr),null!=e.peer_to_peer_delay&&e.hasOwnProperty("peer_to_peer_delay")&&(n.peer_to_peer_delay=e.peer_to_peer_delay),null!=e.audio_network_fps&&e.hasOwnProperty("audio_network_fps")&&(n.audio_network_fps=e.audio_network_fps),null!=e.audio_break_duration&&e.hasOwnProperty("audio_break_duration")&&(n.audio_break_duration=e.audio_break_duration),null!=e.video_break_duration&&e.hasOwnProperty("video_break_duration")&&(n.video_break_duration=e.video_break_duration),null!=e.audio_break_rate&&e.hasOwnProperty("audio_break_rate")&&(n.audio_break_rate=e.audio_break_rate),null!=e.video_break_rate&&e.hasOwnProperty("video_break_rate")&&(n.video_break_rate=e.video_break_rate),null!=e.audio_break_cancel&&e.hasOwnProperty("audio_break_cancel")&&(n.audio_break_cancel=e.audio_break_cancel),null!=e.video_break_cancel&&e.hasOwnProperty("video_break_cancel")&&(n.video_break_cancel=e.video_break_cancel),null!=e.rtt&&e.hasOwnProperty("rtt")&&(n.rtt=e.rtt),null!=e.rendered_sound_level&&e.hasOwnProperty("rendered_sound_level")&&(n.rendered_sound_level=e.rendered_sound_level),null!=e.audio_break_cancel_duration&&e.hasOwnProperty("audio_break_cancel_duration")&&(n.audio_break_cancel_duration=e.audio_break_cancel_duration),null!=e.video_break_cancel_duration&&e.hasOwnProperty("video_break_cancel_duration")&&(n.video_break_cancel_duration=e.video_break_cancel_duration),null!=e.audio_decode_time&&e.hasOwnProperty("audio_decode_time")&&(n.audio_decode_time=e.audio_decode_time),null!=e.video_decode_time&&e.hasOwnProperty("video_decode_time")&&(n.video_decode_time=e.video_decode_time),null!=e.real_sampling_interval&&e.hasOwnProperty("real_sampling_interval")&&(n.real_sampling_interval=e.real_sampling_interval),null!=e.mos&&e.hasOwnProperty("mos")&&(n.mos=e.mos),null!=e.audio_decode_fps&&e.hasOwnProperty("audio_decode_fps")&&(n.audio_decode_fps=e.audio_decode_fps),null!=e.video_decode_fps&&e.hasOwnProperty("video_decode_fps")&&(n.video_decode_fps=e.video_decode_fps),null!=e.video_frames_decoded&&e.hasOwnProperty("video_frames_decoded")&&(n.video_frames_decoded=e.video_frames_decoded),null!=e.video_frames_dropped&&e.hasOwnProperty("video_frames_dropped")&&(n.video_frames_dropped=e.video_frames_dropped),null!=e.sample_time_window&&e.hasOwnProperty("sample_time_window")&&(n.sample_time_window=e.sample_time_window),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),r.ChargeInfo=function(){function e(e){if(this.play_stream_resolution_infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.is_publishing=0,e.prototype.play_stream_resolution_infos=a.emptyArray,e.prototype.play_max_audio_bitrate=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.is_publishing&&Object.hasOwnProperty.call(e,"is_publishing")&&t.uint32(8).uint32(e.is_publishing),null!=e.play_stream_resolution_infos&&e.play_stream_resolution_infos.length)for(var n=0;n<e.play_stream_resolution_infos.length;++n)c.logreport.ResolutionInfo.encode(e.play_stream_resolution_infos[n],t.uint32(18).fork()).ldelim();return null!=e.play_max_audio_bitrate&&Object.hasOwnProperty.call(e,"play_max_audio_bitrate")&&t.uint32(24).uint32(e.play_max_audio_bitrate),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.ChargeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.is_publishing=e.uint32();break;case 2:r.play_stream_resolution_infos&&r.play_stream_resolution_infos.length||(r.play_stream_resolution_infos=[]),r.play_stream_resolution_infos.push(c.logreport.ResolutionInfo.decode(e,e.uint32()));break;case 3:r.play_max_audio_bitrate=e.uint32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.is_publishing&&e.hasOwnProperty("is_publishing")&&!a.isInteger(e.is_publishing))return"is_publishing: integer expected";if(null!=e.play_stream_resolution_infos&&e.hasOwnProperty("play_stream_resolution_infos")){if(!Array.isArray(e.play_stream_resolution_infos))return"play_stream_resolution_infos: array expected";for(var t=0;t<e.play_stream_resolution_infos.length;++t){var n=c.logreport.ResolutionInfo.verify(e.play_stream_resolution_infos[t]);if(n)return"play_stream_resolution_infos."+n}}return null!=e.play_max_audio_bitrate&&e.hasOwnProperty("play_max_audio_bitrate")&&!a.isInteger(e.play_max_audio_bitrate)?"play_max_audio_bitrate: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.ChargeInfo)return e;var t=new c.logreport.ChargeInfo;if(null!=e.is_publishing&&(t.is_publishing=e.is_publishing>>>0),e.play_stream_resolution_infos){if(!Array.isArray(e.play_stream_resolution_infos))throw TypeError(".logreport.ChargeInfo.play_stream_resolution_infos: array expected");t.play_stream_resolution_infos=[];for(var n=0;n<e.play_stream_resolution_infos.length;++n){if("object"!=typeof e.play_stream_resolution_infos[n])throw TypeError(".logreport.ChargeInfo.play_stream_resolution_infos: object expected");t.play_stream_resolution_infos[n]=c.logreport.ResolutionInfo.fromObject(e.play_stream_resolution_infos[n])}}return null!=e.play_max_audio_bitrate&&(t.play_max_audio_bitrate=e.play_max_audio_bitrate>>>0),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.play_stream_resolution_infos=[]),t.defaults&&(n.is_publishing=0,n.play_max_audio_bitrate=0),null!=e.is_publishing&&e.hasOwnProperty("is_publishing")&&(n.is_publishing=e.is_publishing),e.play_stream_resolution_infos&&e.play_stream_resolution_infos.length){n.play_stream_resolution_infos=[];for(var r=0;r<e.play_stream_resolution_infos.length;++r)n.play_stream_resolution_infos[r]=c.logreport.ResolutionInfo.toObject(e.play_stream_resolution_infos[r],t)}return null!=e.play_max_audio_bitrate&&e.hasOwnProperty("play_max_audio_bitrate")&&(n.play_max_audio_bitrate=e.play_max_audio_bitrate),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),r.ResolutionInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.video_width=0,e.prototype.video_height=0,e.prototype.count=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.video_width&&Object.hasOwnProperty.call(e,"video_width")&&t.uint32(8).uint32(e.video_width),null!=e.video_height&&Object.hasOwnProperty.call(e,"video_height")&&t.uint32(16).uint32(e.video_height),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(24).uint32(e.count),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.ResolutionInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.video_width=e.uint32();break;case 2:r.video_height=e.uint32();break;case 3:r.count=e.uint32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.video_width&&e.hasOwnProperty("video_width")&&!a.isInteger(e.video_width)?"video_width: integer expected":null!=e.video_height&&e.hasOwnProperty("video_height")&&!a.isInteger(e.video_height)?"video_height: integer expected":null!=e.count&&e.hasOwnProperty("count")&&!a.isInteger(e.count)?"count: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.ResolutionInfo)return e;var t=new c.logreport.ResolutionInfo;return null!=e.video_width&&(t.video_width=e.video_width>>>0),null!=e.video_height&&(t.video_height=e.video_height>>>0),null!=e.count&&(t.count=e.count>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.video_width=0,n.video_height=0,n.count=0),null!=e.video_width&&e.hasOwnProperty("video_width")&&(n.video_width=e.video_width),null!=e.video_height&&e.hasOwnProperty("video_height")&&(n.video_height=e.video_height),null!=e.count&&e.hasOwnProperty("count")&&(n.count=e.count),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),r.NoBillingEvent=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.platform_info="",e.prototype.room_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.platform_info&&Object.hasOwnProperty.call(e,"platform_info")&&t.uint32(10).string(e.platform_info),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).string(e.room_id),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.NoBillingEvent;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.platform_info=e.string();break;case 2:r.room_id=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.platform_info&&e.hasOwnProperty("platform_info")&&!a.isString(e.platform_info)?"platform_info: string expected":null!=e.room_id&&e.hasOwnProperty("room_id")&&!a.isString(e.room_id)?"room_id: string expected":null},e.fromObject=function(e){if(e instanceof c.logreport.NoBillingEvent)return e;var t=new c.logreport.NoBillingEvent;return null!=e.platform_info&&(t.platform_info=String(e.platform_info)),null!=e.room_id&&(t.room_id=String(e.room_id)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.platform_info="",n.room_id=""),null!=e.platform_info&&e.hasOwnProperty("platform_info")&&(n.platform_info=e.platform_info),null!=e.room_id&&e.hasOwnProperty("room_id")&&(n.room_id=e.room_id),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),r.DynQualityEvent=function(){function e(e){if(this.dyn_quality_infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq_no="",e.prototype.num=0,e.prototype.dyn_quality_infos=a.emptyArray,e.prototype.device_id="",e.prototype.latitude=0,e.prototype.longitude=0,e.prototype.country="",e.prototype.region="",e.prototype.city="",e.prototype.isp="",e.prototype.ve_mode=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.seq_no&&Object.hasOwnProperty.call(e,"seq_no")&&t.uint32(10).string(e.seq_no),null!=e.num&&Object.hasOwnProperty.call(e,"num")&&t.uint32(16).uint32(e.num),null!=e.dyn_quality_infos&&e.dyn_quality_infos.length)for(var n=0;n<e.dyn_quality_infos.length;++n)c.logreport.DynQualityInfos.encode(e.dyn_quality_infos[n],t.uint32(26).fork()).ldelim();return null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(34).string(e.device_id),null!=e.latitude&&Object.hasOwnProperty.call(e,"latitude")&&t.uint32(40).uint32(e.latitude),null!=e.longitude&&Object.hasOwnProperty.call(e,"longitude")&&t.uint32(48).uint32(e.longitude),null!=e.country&&Object.hasOwnProperty.call(e,"country")&&t.uint32(58).string(e.country),null!=e.region&&Object.hasOwnProperty.call(e,"region")&&t.uint32(66).string(e.region),null!=e.city&&Object.hasOwnProperty.call(e,"city")&&t.uint32(74).string(e.city),null!=e.isp&&Object.hasOwnProperty.call(e,"isp")&&t.uint32(82).string(e.isp),null!=e.ve_mode&&Object.hasOwnProperty.call(e,"ve_mode")&&t.uint32(88).uint32(e.ve_mode),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.DynQualityEvent;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq_no=e.string();break;case 2:r.num=e.uint32();break;case 3:r.dyn_quality_infos&&r.dyn_quality_infos.length||(r.dyn_quality_infos=[]),r.dyn_quality_infos.push(c.logreport.DynQualityInfos.decode(e,e.uint32()));break;case 4:r.device_id=e.string();break;case 5:r.latitude=e.uint32();break;case 6:r.longitude=e.uint32();break;case 7:r.country=e.string();break;case 8:r.region=e.string();break;case 9:r.city=e.string();break;case 10:r.isp=e.string();break;case 11:r.ve_mode=e.uint32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.seq_no&&e.hasOwnProperty("seq_no")&&!a.isString(e.seq_no))return"seq_no: string expected";if(null!=e.num&&e.hasOwnProperty("num")&&!a.isInteger(e.num))return"num: integer expected";if(null!=e.dyn_quality_infos&&e.hasOwnProperty("dyn_quality_infos")){if(!Array.isArray(e.dyn_quality_infos))return"dyn_quality_infos: array expected";for(var t=0;t<e.dyn_quality_infos.length;++t){var n=c.logreport.DynQualityInfos.verify(e.dyn_quality_infos[t]);if(n)return"dyn_quality_infos."+n}}return null!=e.device_id&&e.hasOwnProperty("device_id")&&!a.isString(e.device_id)?"device_id: string expected":null!=e.latitude&&e.hasOwnProperty("latitude")&&!a.isInteger(e.latitude)?"latitude: integer expected":null!=e.longitude&&e.hasOwnProperty("longitude")&&!a.isInteger(e.longitude)?"longitude: integer expected":null!=e.country&&e.hasOwnProperty("country")&&!a.isString(e.country)?"country: string expected":null!=e.region&&e.hasOwnProperty("region")&&!a.isString(e.region)?"region: string expected":null!=e.city&&e.hasOwnProperty("city")&&!a.isString(e.city)?"city: string expected":null!=e.isp&&e.hasOwnProperty("isp")&&!a.isString(e.isp)?"isp: string expected":null!=e.ve_mode&&e.hasOwnProperty("ve_mode")&&!a.isInteger(e.ve_mode)?"ve_mode: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.DynQualityEvent)return e;var t=new c.logreport.DynQualityEvent;if(null!=e.seq_no&&(t.seq_no=String(e.seq_no)),null!=e.num&&(t.num=e.num>>>0),e.dyn_quality_infos){if(!Array.isArray(e.dyn_quality_infos))throw TypeError(".logreport.DynQualityEvent.dyn_quality_infos: array expected");t.dyn_quality_infos=[];for(var n=0;n<e.dyn_quality_infos.length;++n){if("object"!=typeof e.dyn_quality_infos[n])throw TypeError(".logreport.DynQualityEvent.dyn_quality_infos: object expected");t.dyn_quality_infos[n]=c.logreport.DynQualityInfos.fromObject(e.dyn_quality_infos[n])}}return null!=e.device_id&&(t.device_id=String(e.device_id)),null!=e.latitude&&(t.latitude=e.latitude>>>0),null!=e.longitude&&(t.longitude=e.longitude>>>0),null!=e.country&&(t.country=String(e.country)),null!=e.region&&(t.region=String(e.region)),null!=e.city&&(t.city=String(e.city)),null!=e.isp&&(t.isp=String(e.isp)),null!=e.ve_mode&&(t.ve_mode=e.ve_mode>>>0),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.dyn_quality_infos=[]),t.defaults&&(n.seq_no="",n.num=0,n.device_id="",n.latitude=0,n.longitude=0,n.country="",n.region="",n.city="",n.isp="",n.ve_mode=0),null!=e.seq_no&&e.hasOwnProperty("seq_no")&&(n.seq_no=e.seq_no),null!=e.num&&e.hasOwnProperty("num")&&(n.num=e.num),e.dyn_quality_infos&&e.dyn_quality_infos.length){n.dyn_quality_infos=[];for(var r=0;r<e.dyn_quality_infos.length;++r)n.dyn_quality_infos[r]=c.logreport.DynQualityInfos.toObject(e.dyn_quality_infos[r],t)}return null!=e.device_id&&e.hasOwnProperty("device_id")&&(n.device_id=e.device_id),null!=e.latitude&&e.hasOwnProperty("latitude")&&(n.latitude=e.latitude),null!=e.longitude&&e.hasOwnProperty("longitude")&&(n.longitude=e.longitude),null!=e.country&&e.hasOwnProperty("country")&&(n.country=e.country),null!=e.region&&e.hasOwnProperty("region")&&(n.region=e.region),null!=e.city&&e.hasOwnProperty("city")&&(n.city=e.city),null!=e.isp&&e.hasOwnProperty("isp")&&(n.isp=e.isp),null!=e.ve_mode&&e.hasOwnProperty("ve_mode")&&(n.ve_mode=e.ve_mode),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),r.DynQualityInfos=function(){function e(e){if(this.infos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.timestamp_offset_begin=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.timestamp_offset_end=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.server_ip="",e.prototype.infos=a.emptyArray,e.prototype.network_type=0,e.prototype.stream_id="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=s.create()),null!=e.timestamp_offset_begin&&Object.hasOwnProperty.call(e,"timestamp_offset_begin")&&t.uint32(8).uint64(e.timestamp_offset_begin),null!=e.timestamp_offset_end&&Object.hasOwnProperty.call(e,"timestamp_offset_end")&&t.uint32(16).uint64(e.timestamp_offset_end),null!=e.server_ip&&Object.hasOwnProperty.call(e,"server_ip")&&t.uint32(26).string(e.server_ip),null!=e.infos&&e.infos.length)for(var n=0;n<e.infos.length;++n)c.logreport.DynQualityInfo.encode(e.infos[n],t.uint32(34).fork()).ldelim();return null!=e.network_type&&Object.hasOwnProperty.call(e,"network_type")&&t.uint32(40).uint32(e.network_type),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(50).string(e.stream_id),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.DynQualityInfos;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.timestamp_offset_begin=e.uint64();break;case 2:r.timestamp_offset_end=e.uint64();break;case 3:r.server_ip=e.string();break;case 4:r.infos&&r.infos.length||(r.infos=[]),r.infos.push(c.logreport.DynQualityInfo.decode(e,e.uint32()));break;case 5:r.network_type=e.uint32();break;case 6:r.stream_id=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&!(a.isInteger(e.timestamp_offset_begin)||e.timestamp_offset_begin&&a.isInteger(e.timestamp_offset_begin.low)&&a.isInteger(e.timestamp_offset_begin.high)))return"timestamp_offset_begin: integer|Long expected";if(null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&!(a.isInteger(e.timestamp_offset_end)||e.timestamp_offset_end&&a.isInteger(e.timestamp_offset_end.low)&&a.isInteger(e.timestamp_offset_end.high)))return"timestamp_offset_end: integer|Long expected";if(null!=e.server_ip&&e.hasOwnProperty("server_ip")&&!a.isString(e.server_ip))return"server_ip: string expected";if(null!=e.infos&&e.hasOwnProperty("infos")){if(!Array.isArray(e.infos))return"infos: array expected";for(var t=0;t<e.infos.length;++t){var n=c.logreport.DynQualityInfo.verify(e.infos[t]);if(n)return"infos."+n}}return null!=e.network_type&&e.hasOwnProperty("network_type")&&!a.isInteger(e.network_type)?"network_type: integer expected":null!=e.stream_id&&e.hasOwnProperty("stream_id")&&!a.isString(e.stream_id)?"stream_id: string expected":null},e.fromObject=function(e){if(e instanceof c.logreport.DynQualityInfos)return e;var t=new c.logreport.DynQualityInfos;if(null!=e.timestamp_offset_begin&&(a.Long?(t.timestamp_offset_begin=a.Long.fromValue(e.timestamp_offset_begin)).unsigned=!0:"string"==typeof e.timestamp_offset_begin?t.timestamp_offset_begin=parseInt(e.timestamp_offset_begin,10):"number"==typeof e.timestamp_offset_begin?t.timestamp_offset_begin=e.timestamp_offset_begin:"object"==typeof e.timestamp_offset_begin&&(t.timestamp_offset_begin=new a.LongBits(e.timestamp_offset_begin.low>>>0,e.timestamp_offset_begin.high>>>0).toNumber(!0))),null!=e.timestamp_offset_end&&(a.Long?(t.timestamp_offset_end=a.Long.fromValue(e.timestamp_offset_end)).unsigned=!0:"string"==typeof e.timestamp_offset_end?t.timestamp_offset_end=parseInt(e.timestamp_offset_end,10):"number"==typeof e.timestamp_offset_end?t.timestamp_offset_end=e.timestamp_offset_end:"object"==typeof e.timestamp_offset_end&&(t.timestamp_offset_end=new a.LongBits(e.timestamp_offset_end.low>>>0,e.timestamp_offset_end.high>>>0).toNumber(!0))),null!=e.server_ip&&(t.server_ip=String(e.server_ip)),e.infos){if(!Array.isArray(e.infos))throw TypeError(".logreport.DynQualityInfos.infos: array expected");t.infos=[];for(var n=0;n<e.infos.length;++n){if("object"!=typeof e.infos[n])throw TypeError(".logreport.DynQualityInfos.infos: object expected");t.infos[n]=c.logreport.DynQualityInfo.fromObject(e.infos[n])}}return null!=e.network_type&&(t.network_type=e.network_type>>>0),null!=e.stream_id&&(t.stream_id=String(e.stream_id)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.infos=[]),t.defaults){if(a.Long){var r=new a.Long(0,0,!0);n.timestamp_offset_begin=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.timestamp_offset_begin=t.longs===String?"0":0;a.Long?(r=new a.Long(0,0,!0),n.timestamp_offset_end=t.longs===String?r.toString():t.longs===Number?r.toNumber():r):n.timestamp_offset_end=t.longs===String?"0":0,n.server_ip="",n.network_type=0,n.stream_id=""}if(null!=e.timestamp_offset_begin&&e.hasOwnProperty("timestamp_offset_begin")&&("number"==typeof e.timestamp_offset_begin?n.timestamp_offset_begin=t.longs===String?String(e.timestamp_offset_begin):e.timestamp_offset_begin:n.timestamp_offset_begin=t.longs===String?a.Long.prototype.toString.call(e.timestamp_offset_begin):t.longs===Number?new a.LongBits(e.timestamp_offset_begin.low>>>0,e.timestamp_offset_begin.high>>>0).toNumber(!0):e.timestamp_offset_begin),null!=e.timestamp_offset_end&&e.hasOwnProperty("timestamp_offset_end")&&("number"==typeof e.timestamp_offset_end?n.timestamp_offset_end=t.longs===String?String(e.timestamp_offset_end):e.timestamp_offset_end:n.timestamp_offset_end=t.longs===String?a.Long.prototype.toString.call(e.timestamp_offset_end):t.longs===Number?new a.LongBits(e.timestamp_offset_end.low>>>0,e.timestamp_offset_end.high>>>0).toNumber(!0):e.timestamp_offset_end),null!=e.server_ip&&e.hasOwnProperty("server_ip")&&(n.server_ip=e.server_ip),e.infos&&e.infos.length){n.infos=[];for(var i=0;i<e.infos.length;++i)n.infos[i]=c.logreport.DynQualityInfo.toObject(e.infos[i],t)}return null!=e.network_type&&e.hasOwnProperty("network_type")&&(n.network_type=e.network_type),null!=e.stream_id&&e.hasOwnProperty("stream_id")&&(n.stream_id=e.stream_id),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),r.DynQualityInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.time=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.plr=0,e.prototype.rtt=0,e.prototype.score=0,e.prototype.sample_time=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(8).uint64(e.time),null!=e.plr&&Object.hasOwnProperty.call(e,"plr")&&t.uint32(16).uint32(e.plr),null!=e.rtt&&Object.hasOwnProperty.call(e,"rtt")&&t.uint32(24).uint32(e.rtt),null!=e.score&&Object.hasOwnProperty.call(e,"score")&&t.uint32(32).uint32(e.score),null!=e.sample_time&&Object.hasOwnProperty.call(e,"sample_time")&&t.uint32(40).uint32(e.sample_time),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new c.logreport.DynQualityInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.time=e.uint64();break;case 2:r.plr=e.uint32();break;case 3:r.rtt=e.uint32();break;case 4:r.score=e.uint32();break;case 5:r.sample_time=e.uint32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof o||(e=new o(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.time&&e.hasOwnProperty("time")&&!(a.isInteger(e.time)||e.time&&a.isInteger(e.time.low)&&a.isInteger(e.time.high))?"time: integer|Long expected":null!=e.plr&&e.hasOwnProperty("plr")&&!a.isInteger(e.plr)?"plr: integer expected":null!=e.rtt&&e.hasOwnProperty("rtt")&&!a.isInteger(e.rtt)?"rtt: integer expected":null!=e.score&&e.hasOwnProperty("score")&&!a.isInteger(e.score)?"score: integer expected":null!=e.sample_time&&e.hasOwnProperty("sample_time")&&!a.isInteger(e.sample_time)?"sample_time: integer expected":null},e.fromObject=function(e){if(e instanceof c.logreport.DynQualityInfo)return e;var t=new c.logreport.DynQualityInfo;return null!=e.time&&(a.Long?(t.time=a.Long.fromValue(e.time)).unsigned=!0:"string"==typeof e.time?t.time=parseInt(e.time,10):"number"==typeof e.time?t.time=e.time:"object"==typeof e.time&&(t.time=new a.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0))),null!=e.plr&&(t.plr=e.plr>>>0),null!=e.rtt&&(t.rtt=e.rtt>>>0),null!=e.score&&(t.score=e.score>>>0),null!=e.sample_time&&(t.sample_time=e.sample_time>>>0),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(a.Long){var r=new a.Long(0,0,!0);n.time=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.time=t.longs===String?"0":0;n.plr=0,n.rtt=0,n.score=0,n.sample_time=0}return null!=e.time&&e.hasOwnProperty("time")&&("number"==typeof e.time?n.time=t.longs===String?String(e.time):e.time:n.time=t.longs===String?a.Long.prototype.toString.call(e.time):t.longs===Number?new a.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0):e.time),null!=e.plr&&e.hasOwnProperty("plr")&&(n.plr=e.plr),null!=e.rtt&&e.hasOwnProperty("rtt")&&(n.rtt=e.rtt),null!=e.score&&e.hasOwnProperty("score")&&(n.score=e.score),null!=e.sample_time&&e.hasOwnProperty("sample_time")&&(n.sample_time=e.sample_time),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},e}(),r),e.exports=c},5515:function(e){e.exports=function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,(function(e){return i(t[s][1][e]||e)}),l,l.exports,e,t,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";var r=(0,e("./adapter_factory.js").adapterFactory)({window:window});t.exports=r},{"./adapter_factory.js":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},n=r.log,l=r.detectBrowser(e),u={browserDetails:l,commonShim:c,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(l.browser){case"chrome":if(!i||!i.shimPeerConnection||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),u;n("adapter.js shimming chrome."),u.browserShim=i,i.shimGetUserMedia(e),i.shimMediaStream(e),i.shimPeerConnection(e),i.shimOnTrack(e),i.shimAddTrackRemoveTrack(e),i.shimGetSendersWithDtmf(e),i.shimGetStats(e),i.shimSenderReceiverGetStats(e),i.fixNegotiationNeeded(e),c.shimRTCIceCandidate(e),c.shimConnectionState(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e),c.removeAllowExtmapMixed(e);break;case"firefox":if(!s||!s.shimPeerConnection||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),u;n("adapter.js shimming firefox."),u.browserShim=s,s.shimGetUserMedia(e),s.shimPeerConnection(e),s.shimOnTrack(e),s.shimRemoveStream(e),s.shimSenderGetStats(e),s.shimReceiverGetStats(e),s.shimRTCDataChannel(e),c.shimRTCIceCandidate(e),c.shimConnectionState(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e);break;case"edge":if(!o||!o.shimPeerConnection||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),u;n("adapter.js shimming edge."),u.browserShim=o,o.shimGetUserMedia(e),o.shimGetDisplayMedia(e),o.shimPeerConnection(e),o.shimReplaceTrack(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e);break;case"safari":if(!a||!t.shimSafari)return n("Safari shim is not included in this adapter release."),u;n("adapter.js shimming safari."),u.browserShim=a,a.shimRTCIceServerUrls(e),a.shimCreateOfferLegacy(e),a.shimCallbacksAPI(e),a.shimLocalStreamsAPI(e),a.shimRemoteStreamsAPI(e),a.shimTrackEventTransceiver(e),a.shimGetUserMedia(e),c.shimRTCIceCandidate(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e),c.removeAllowExtmapMixed(e);break;default:n("Unsupported browser!")}return u};var r=l(e("./utils")),i=l(e("./chrome/chrome_shim")),o=l(e("./edge/edge_shim")),s=l(e("./firefox/firefox_shim")),a=l(e("./safari/safari_shim")),c=l(e("./common_shim"));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},n.shimOnTrack=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else s.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))},n.shimGetSendersWithDtmf=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],s.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},n.shimGetStats=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,n,r){var i=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof arguments[0]))return t.apply(this,[]);var s=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},a=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){o[1](a(s(e)))};return t.apply(this,[c,arguments[0]])}return new Promise((function(e,n){t.apply(i,[function(t){e(a(s(t)))},n])})).then(n,r)}}},n.shimSenderReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],n=void 0,r=void 0,i=void 0;return this.getSenders().forEach((function(e){e.track===t&&(n?i=!0:n=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(r?i=!0:r=e),e.track===t})),i||n&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}},n.shimAddTrackRemoveTrackWithNative=a,n.shimAddTrackRemoveTrack=function(e){if(e.RTCPeerConnection){var t=s.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return a(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var r=l(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return l(e,t)}))}}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=u(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=c.get.apply(this);return""===e.type?e:l(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var n=void 0;Object.keys(this._streams).forEach((function(r){t._streams[r].getTracks().find((function(t){return e.track===t}))&&(n=t._streams[r])})),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function l(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function u(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}},n.shimPeerConnection=function(e){if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}}));var t=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},n.fixNegotiationNeeded=function(e){s.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){if("stable"===e.target.signalingState)return e}))};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils.js"));function a(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices){var n=i.detectBrowser(e),s=function(e){if("object"!==(void 0===e?"undefined":r(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===r(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var s={};"number"==typeof i.ideal?(s[o("min",n)]=i.ideal,t.optional.push(s),(s={})[o("max",n)]=i.ideal,t.optional.push(s)):(s[o("",n)]=i.ideal,t.optional.push(s))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=i.exact):["min","max"].forEach((function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=i[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,i){if(n.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===r(e.audio)){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=s(e.audio)}if(e&&"object"===r(e.video)){var c=e.video.facingMode;c=c&&("object"===(void 0===c?"undefined":r(c))?c:{ideal:c});var l=n.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||l)){delete e.video.facingMode;var u=void 0;if("environment"===c.exact||"environment"===c.ideal?u=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(u=["front"]),u)return t.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return u.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&u.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=c.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=s(e.video),o("chrome: "+JSON.stringify(e)),i(e)}))}e.video=s(e.video)}return o("chrome: "+JSON.stringify(e)),i(e)},c=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,n,r){a(e,(function(e){t.webkitGetUserMedia(e,n,(function(e){r&&r(c(e))}))}))}.bind(t),t.mediaDevices.getUserMedia){var l=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return a(e,(function(e){return l(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(c(e))}))}))}}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils.js")),o=i.log},{"../utils.js":15}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimRTCIceCandidate=function(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),i=o.default.parseCandidate(e.candidate),s=Object.assign(n,i);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,s.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}},n.shimMaxMessageSize=function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var t=s.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=o.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=o.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},a=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=o.default.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,n(arguments[0])){var e=r(arguments[0]),t=i(e),o=a(arguments[0],e),s=void 0;s=0===t&&0===o?Number.POSITIVE_INFINITY:0===t||0===o?Math.max(t,o):Math.min(t,o);var l={};Object.defineProperty(l,"maxMessageSize",{get:function(){return s}}),this._sctp=l}return c.apply(this,arguments)}}},n.shimSendThrowTypeError=function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},s.wrapPeerConnectionEvent(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}},n.shimConnectionState=function(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}},n.removeAllowExtmapMixed=function(e){if(e.RTCPeerConnection){var t=s.detectBrowser(e);if(!("chrome"===t.browser&&t.version>=71)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),n.apply(this,arguments)}}}};var i,o=(i=e("sdp"))&&i.__esModule?i:{default:i},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils"))},{"./utils":15,sdp:17}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var i=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}}),n.shimPeerConnection=function(e){var t=s.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=(0,c.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,a.filterIceServers)(e.iceServers,t.version),s.log("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype},n.shimReplaceTrack=function(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)};var o,s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils")),a=e("./filtericeservers"),c=(o=e("rtcpeerconnection-shim"))&&o.__esModule?o:{default:o}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.filterIceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var i="string"==typeof t;return i&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=i?t[0]:t,!!t.length}}))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"))},{"../utils":15}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimOnTrack=function(e){"object"===(void 0===e?"undefined":r(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimPeerConnection=function(e){var t=s.detectBrowser(e);if("object"===(void 0===e?"undefined":r(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}}));var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,n,r){return o.apply(this,[e||null]).then((function(e){if(t.version<53&&!n)try{e.forEach((function(e){e.type=i[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,n){e.set(n,Object.assign({},t,{type:i[t.type]||t.type}))}))}return e})).then(n,r)}}},n.shimSenderGetStats=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},n.shimReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},n.shimRemoveStream=function(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;s.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})},n.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"))},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimGetUserMedia=function(e){var t=i.detectBrowser(e),n=e&&e.navigator,o=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){i.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var s=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":r(e))&&"object"===r(e.audio)&&(e=JSON.parse(JSON.stringify(e)),s(e.audio,"autoGainControl","mozAutoGainControl"),s(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},o&&o.prototype.getSettings){var c=o.prototype.getSettings;o.prototype.getSettings=function(){var e=c.apply(this,arguments);return s(e,"mozAutoGainControl","autoGainControl"),s(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var l=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":r(e))&&(e=JSON.parse(JSON.stringify(e)),s(e,"autoGainControl","mozAutoGainControl"),s(e,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[e])}}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"))},{"../utils":15}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimLocalStreamsAPI=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e,n){return n&&(this._localStreams?this._localStreams.includes(n)||this._localStreams.push(n):this._localStreams=[n]),t.call(this,e,n)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}},n.shimRemoteStreamsAPI=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}},n.shimCallbacksAPI=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,o=t.setLocalDescription,s=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};var c=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=c,c=function(e,t,n){var r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=c,c=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=c}},n.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(o(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))},n.shimConstraints=o,n.shimRTCIceServerUrls=function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],o=0;o<e.iceServers.length;o++){var s=e.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(i.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,r.push(s)):r.push(e.iceServers[o])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},n.shimTrackEventTransceiver=function(e){"object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"));function o(e){return e&&void 0!==e.video?Object.assign({},e,{video:i.compactObject(e.video)}):e}},{"../utils":15}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.extractVersion=s,n.wrapPeerConnectionEvent=function(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=o,i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);var r=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},n.disableLog=function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":r(e))+". Please use a boolean."):(i=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},n.disableWarnings=function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":r(e))+". Please use a boolean."):(o=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},n.log=function(){if("object"===("undefined"==typeof window?"undefined":r(window))){if(i)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},n.deprecated=function(e,t){o&&console.warn(e+" is deprecated, please use "+t+" instead.")},n.detectBrowser=function(e){var t=e.navigator,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=s(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=s(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=s(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=s(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return n},n.compactObject=function e(t){return"object"!==(void 0===t?"undefined":r(t))?t:Object.keys(t).reduce((function(n,i){var o="object"===r(t[i]),s=o?e(t[i]):t[i],a=o&&!Object.keys(s).length;return void 0===s||a?n:Object.assign(n,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},i,s))}),{})},n.walkStats=a,n.filterStats=function(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&a(e,n,i)}))})),i};var i=!0,o=!0;function s(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function a(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?a(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){a(e,e.get(t),n)}))})))}},{}],16:[function(e,t,n){"use strict";var r=e("sdp");function i(e,t,n,i,o){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(i?i.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s}function o(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),s=r(t.parameters.apt,i);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.clockRate===s.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&!i(r,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(r.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}})),n}function s(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function a(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}t.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function l(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var u=function(n){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=i?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var s=n.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(u.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(u.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),u.prototype.onicecandidate=null,u.prototype.onaddstream=null,u.prototype.ontrack=null,u.prototype.onremovestream=null,u.prototype.onsignalingstatechange=null,u.prototype.oniceconnectionstatechange=null,u.prototype.onconnectionstatechange=null,u.prototype.onicegatheringstatechange=null,u.prototype.onnegotiationneeded=null,u.prototype.ondatachannel=null,u.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},u.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},u.prototype.getConfiguration=function(){return this._config},u.prototype.getLocalStreams=function(){return this.localStreams},u.prototype.getRemoteStreams=function(){return this.remoteStreams},u.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},u.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},u.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},u.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},u.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},u.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},u.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},u.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},u.prototype._gather=function(t,n){var i=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&n>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),a.component=1,a.ufrag=o.getLocalParameters().usernameFragment;var l=r.writeCandidate(a);s.candidate=Object.assign(s.candidate,r.parseCandidate(l)),s.candidate.candidate=l,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var u=r.getMediaSections(i._localDescription.sdp);u[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",i._localDescription.sdp=r.getDescription(i._localDescription.sdp)+u.join("");var d=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),c||i._dispatchEvent("icecandidate",s),d&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},u.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},u.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},u.prototype._transceive=function(e,n,i){var s=o(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),i&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},u.prototype.setLocalDescription=function(e){var t,n,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);i.transceivers[t].localCapabilities=n})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(i._remoteDescription.sdp),n=t.shift();var a=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var s=i.transceivers[t],c=s.iceGatherer,l=s.iceTransport,u=s.dtlsTransport,d=s.localCapabilities,h=s.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length||s.rejected)){var p=r.getIceParameters(e,n),f=r.getDtlsParameters(e,n);a&&(f.role="server"),i.usingBundle&&0!==t||(i._gather(s.mid,t),"new"===l.state&&l.start(c,p,a?"controlling":"controlled"),"new"===u.state&&u.start(f));var g=o(d,h);i._transceive(s,g.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},u.prototype.setRemoteDescription=function(i){var u=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(c("TypeError",'Unsupported type "'+i.type+'"'));if(!s("setRemoteDescription",i.type,u.signalingState)||u._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+i.type+" in state "+u.signalingState));var d={};u.remoteStreams.forEach((function(e){d[e.id]=e}));var h=[],p=r.splitSections(i.sdp),f=p.shift(),g=r.matchPrefix(f,"a=ice-lite").length>0,m=r.matchPrefix(f,"a=group:BUNDLE ").length>0;u.usingBundle=m;var _=r.matchPrefix(f,"a=ice-options:")[0];return u.canTrickleIceCandidates=!!_&&_.substr(14).split(" ").indexOf("trickle")>=0,p.forEach((function(s,c){var l=r.splitLines(s),p=r.getKind(s),_=r.isRejected(s)&&0===r.matchPrefix(s,"a=bundle-only").length,v=l[0].substr(2).split(" ")[2],E=r.getDirection(s,f),A=r.parseMsid(s),y=r.getMid(s)||r.generateIdentifier();if(_||"application"===p&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))u.transceivers[c]={mid:y,kind:p,protocol:v,rejected:!0};else{var S,b,C,T,I,R,w,k,O;!_&&u.transceivers[c]&&u.transceivers[c].rejected&&(u.transceivers[c]=u._createTransceiver(p,!0));var N,L,P=r.parseRtpParameters(s);_||(N=r.getIceParameters(s,f),(L=r.getDtlsParameters(s,f)).role="client"),w=r.parseRtpEncodingParameters(s);var D=r.parseRtcpParameters(s),M=r.matchPrefix(s,"a=end-of-candidates",f).length>0,x=r.matchPrefix(s,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!_&&m&&c>0&&u.transceivers[c]&&(u._disposeIceAndDtlsTransports(c),u.transceivers[c].iceGatherer=u.transceivers[0].iceGatherer,u.transceivers[c].iceTransport=u.transceivers[0].iceTransport,u.transceivers[c].dtlsTransport=u.transceivers[0].dtlsTransport,u.transceivers[c].rtpSender&&u.transceivers[c].rtpSender.setTransport(u.transceivers[0].dtlsTransport),u.transceivers[c].rtpReceiver&&u.transceivers[c].rtpReceiver.setTransport(u.transceivers[0].dtlsTransport)),"offer"!==i.type||_)"answer"!==i.type||_||(b=(S=u.transceivers[c]).iceGatherer,C=S.iceTransport,T=S.dtlsTransport,I=S.rtpReceiver,R=S.sendEncodingParameters,k=S.localCapabilities,u.transceivers[c].recvEncodingParameters=w,u.transceivers[c].remoteCapabilities=P,u.transceivers[c].rtcpParameters=D,x.length&&"new"===C.state&&(!g&&!M||m&&0!==c?x.forEach((function(e){a(S.iceTransport,e)})):C.setRemoteCandidates(x)),m&&0!==c||("new"===C.state&&C.start(b,N,"controlling"),"new"===T.state&&T.start(L)),!o(S.localCapabilities,S.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&S.sendEncodingParameters[0].rtx&&delete S.sendEncodingParameters[0].rtx,u._transceive(S,"sendrecv"===E||"recvonly"===E,"sendrecv"===E||"sendonly"===E),!I||"sendrecv"!==E&&"sendonly"!==E?delete S.rtpReceiver:(O=I.track,A?(d[A.stream]||(d[A.stream]=new e.MediaStream),n(O,d[A.stream]),h.push([O,I,d[A.stream]])):(d.default||(d.default=new e.MediaStream),n(O,d.default),h.push([O,I,d.default]))));else{(S=u.transceivers[c]||u._createTransceiver(p)).mid=y,S.iceGatherer||(S.iceGatherer=u._createIceGatherer(c,m)),x.length&&"new"===S.iceTransport.state&&(!M||m&&0!==c?x.forEach((function(e){a(S.iceTransport,e)})):S.iceTransport.setRemoteCandidates(x)),k=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(k.codecs=k.codecs.filter((function(e){return"rtx"!==e.name}))),R=S.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var B,U=!1;"sendrecv"===E||"sendonly"===E?(U=!S.rtpReceiver,I=S.rtpReceiver||new e.RTCRtpReceiver(S.dtlsTransport,p),U&&(O=I.track,A&&"-"===A.stream||(A?(d[A.stream]||(d[A.stream]=new e.MediaStream,Object.defineProperty(d[A.stream],"id",{get:function(){return A.stream}})),Object.defineProperty(O,"id",{get:function(){return A.track}}),B=d[A.stream]):(d.default||(d.default=new e.MediaStream),B=d.default)),B&&(n(O,B),S.associatedRemoteMediaStreams.push(B)),h.push([O,I,B]))):S.rtpReceiver&&S.rtpReceiver.track&&(S.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===S.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),S.associatedRemoteMediaStreams=[]),S.localCapabilities=k,S.remoteCapabilities=P,S.rtpReceiver=I,S.rtcpParameters=D,S.sendEncodingParameters=R,S.recvEncodingParameters=w,u._transceive(u.transceivers[c],!1,U)}}})),void 0===u._dtlsRole&&(u._dtlsRole="offer"===i.type?"active":"passive"),u._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?u._updateSignalingState("have-remote-offer"):u._updateSignalingState("stable"),Object.keys(d).forEach((function(t){var n=d[t];if(n.getTracks().length){if(-1===u.remoteStreams.indexOf(n)){u.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){u._dispatchEvent("addstream",r)}))}h.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&l(u,t,r,[n])}))}})),h.forEach((function(e){e[2]||l(u,e[0],e[1],[])})),e.setTimeout((function(){u&&u.transceivers&&u.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},u.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},u.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},u.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},u.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},u.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},u.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter((function(e){return"audio"===e.kind})).length,s=n.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(o=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)}));o>0||s>0;)o>0&&(n._createTransceiver("audio"),o--),s>0&&(n._createTransceiver("video"),s--);var l=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(i,o){var s=i.track,a=i.kind,c=i.mid||r.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(o,n.usingBundle));var l=e.RTCRtpSender.getCapabilities(a);t<15019&&(l.codecs=l.codecs.filter((function(e){return"rtx"!==e.name}))),l.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),l.headerExtensions.forEach((function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var u=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&t>=15019&&"video"===a&&!u[0].rtx&&(u[0].rtx={ssrc:u[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,a)),i.localCapabilities=l,i.sendEncodingParameters=u})),"max-compat"!==n._config.bundlePolicy&&(l+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),l+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){l+=i(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),l+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,l+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(l+="a=end-of-candidates\r\n"))}));var u=new e.RTCSessionDescription({type:"offer",sdp:l});return Promise.resolve(u)},u.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var s=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(s+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>a)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?s+="m=application 0 DTLS/SCTP 5000\r\n":s+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var l=o(e.localCapabilities,e.remoteCapabilities);!l.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=i(e,l,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}}));var l=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(l)},u.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(i,o){if(!n._remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var l=0;l<n.transceivers.length;l++)if(n.transceivers[l].mid===e.sdpMid){s=l;break}var u=n.transceivers[s];if(!u)return o(c("OperationError","Can not add ICE candidate"));if(u.rejected)return i();var d=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return i();if(d.component&&1!==d.component)return i();if((0===s||s>0&&u.iceTransport!==n.transceivers[0].iceTransport)&&!a(u.iceTransport,d))return o(c("OperationError","Can not add ICE candidate"));var h=e.candidate.trim();0===h.indexOf("a=")&&(h=h.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[s]+="a="+(d.type?h:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));p++);i()}))},u.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var d=["createOffer","createAnswer"];return d.forEach((function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),u}},{sdp:17}],17:[function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.getIceParameters=function(e,t){var n=r.splitLines(e);return{usernameFragment:(n=n.concat(r.splitLines(t))).filter((function(e){return 0===e.indexOf("a=ice-ufrag:")}))[0].substr(12),password:n.filter((function(e){return 0===e.indexOf("a=ice-pwd:")}))[0].substr(10)}},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],s=r.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=r.parseRtpMap(s),c=r.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?r.parseFmtp(c[0]):{},a.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,l=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));l.length>0&&l[0].length>1&&l[0][0]===c&&(t=l[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),o&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&c&&n.push({ssrc:c});var u=r.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=u}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"==typeof t&&(t.exports=r)},{}]},{},[1])(1)},9869:function(e){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=39)}({16:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_RTM_ACTION=void 0,function(e){e.LIVE_SEND_SIGNAL="zm.lv.ssg",e.LIVE_RESPOND_JOIN_LIVE="zm.lv.rjl",e.LIVE_PUSH_SIGNAL="zm.lv.pss",e.SERVICE_PUSH="zm.sv.ps",e.SERVICE_SEND="zm.sv.sd"}(t.ZEGO_RTM_ACTION||(t.ZEGO_RTM_ACTION={}))},17:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"}}},39:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(40);t.default={type:"live",install:function(e,t,n){for(var i in r.rtmPros)Object.defineProperty(e.prototype,i,{value:r.rtmPros[i],writable:!1});for(var i in r.servicePros)Object.defineProperty(n.prototype,i,{value:r.servicePros[i],writable:!1});for(var i in r.modulePros)Object.defineProperty(t.prototype,i,{value:r.modulePros[i],writable:!1})}}},40:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modulePros=t.servicePros=t.rtmPros=void 0;var r=n(16),i=n(17),o=n(41);t.rtmPros={requestJoinLive:function(e,t,n,r,o){var s=this.getRoomModules(o)||this.stateCenter.roomModulesList[0];return s?s.liveHandler.requestJoinLive(e,t,n,r):(n&&n(i.errorCodeList.ROOM_NOT_EXIST,0),!1)},inviteJoinLive:function(e,t,n,r,o){var s=this.getRoomModules(o)||this.stateCenter.roomModulesList[0];return s?s.liveHandler.inviteJoinLive(e,t,n,r):(n&&n(i.errorCodeList.ROOM_NOT_EXIST,0),!1)},endJoinLive:function(e,t,n,r){var o=this.getRoomModules(r)||this.stateCenter.roomModulesList[0];return o?o.liveHandler.endJoinLive(e,t,n):(n&&n(i.errorCodeList.ROOM_NOT_EXIST,0),!1)},respondJoinLive:function(e,t,n,r,o){var s=this.getRoomModules(o)||this.stateCenter.roomModulesList[0];return s?s.liveHandler.respondJoinLive(e,t,n,r):(r&&r(i.errorCodeList.ROOM_NOT_EXIST,0),!1)}},t.servicePros={handlePushSignalMsg:function(e){var t,n=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,i=this.stateCenter.roomModulesList.find((function(e){return e.roomID==n}));i?i.liveHandler.handlePushSignalMsg(e):this.logger.error(r.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}},t.modulePros={initLiveHandler:function(){this.liveHandler=new o.LiveHandler(this.logger,this.stateCenter,this.service,this.rtm,this)}}},41:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveHandler=void 0;var r=n(42),i=n(16),o=n(17),s=function(){function e(e,t,n,r,i){this.logger=e,this.stateCenter=t,this.service=n,this.rtm=r,this.room=i,this.joinLiveCallbackMap={},this.joinLiveRequestMap={}}return e.prototype.resetLiveHandler=function(){this.joinLiveCallbackMap={},this.joinLiveRequestMap={}},e.prototype.getSignalCmdContent=function(e,t,n){var r={request_id:e,room_id:this.room.roomID,from_userid:this.stateCenter.idName,from_username:this.stateCenter.nickName,to_userid:t};return null!=n&&(r.result=n),JSON.stringify(r)},e.prototype.requestJoinLive=function(e,t,n,i){var o=this.stateCenter.getRequestId(),s=this.getSignalCmdContent(o,e);return null!=i&&(this.joinLiveCallbackMap[o]=i,this.sendSignalCmd(r.ENUM_SIGNAL_SUB_CMD.joinLiveRequest,s,e,t,n),!0)},e.prototype.sendSignalCmd=function(e,t,n,r,s){var a=this;if(this.room.isLogin()){var c={sub_cmd:e,signal_msg:t,dest_id_name:[n]};this.service.sendSignalCmd(c,(function(e){r&&r(e.header.seq)}),(function(e){var t=o.errorCodeList.ROOM_INNER_ERROR;if(!e.header||!e.body)return e.code&&e.msg&&(t=e),void(s&&s(t,0));s&&s(a.rtm.getServerError(e.body.err_code),e.header.seq)}),this.room.sessionID,this.room.roomID,this.room.roomSessionID),this.logger.info(i.ZEGO_RTM_ACTION.LIVE_SEND_SIGNAL+" call success"+e)}else this.logger.error(i.ZEGO_RTM_ACTION.LIVE_SEND_SIGNAL+" state error")},e.prototype.inviteJoinLive=function(e,t,n,i){var o=this.stateCenter.getRequestId(),s=this.getSignalCmdContent(o,e);return null!=i&&(this.joinLiveCallbackMap[o]=i,this.sendSignalCmd(r.ENUM_SIGNAL_SUB_CMD.joinLiveInvite,s,e,t,n),!0)},e.prototype.endJoinLive=function(e,t,n){var i=this.stateCenter.getRequestId(),o=this.getSignalCmdContent(i,e);return this.sendSignalCmd(r.ENUM_SIGNAL_SUB_CMD.joinLiveStop,o,e,t,n),!0},e.prototype.respondJoinLive=function(e,t,n,o){var s=this.joinLiveRequestMap[e];if(!s)return this.logger.info(i.ZEGO_RTM_ACTION.LIVE_RESPOND_JOIN_LIVE+" no dest id name"),!1;var a=0;!0===t&&(a=1);var c=this.getSignalCmdContent(e,s,a);return this.sendSignalCmd(r.ENUM_SIGNAL_SUB_CMD.joinLiveResult,c,s,n,o),delete this.joinLiveRequestMap[e],!0},e.prototype.handlePushSignalMsg=function(e){var t=JSON.parse(e.body.signal_msg);switch(this.logger.info(i.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" hpsm= ",t),e.body.sub_cmd){case r.ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveRequest:this.handlePushJoinLiveRequestMsg(t);break;case r.ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveResult:this.handlePushJoinLiveResultMsg(t);break;case r.ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveInvite:this.handlePushJoinLiveInviteMsg(t);break;case r.ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveStop:this.handlePushJoinLiveStopMsg(t)}},e.prototype.handlePushJoinLiveRequestMsg=function(e){var t=e.request_id;if("string"==typeof t){var n=e.from_userid;"string"==typeof n?(this.joinLiveRequestMap[t]=n,this.onRecvJoinLiveRequest(t,e.from_userid,e.from_username,e.room_id),this.logger.info(i.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" onRecvJoinLiveRequest "+n)):this.logger.error(i.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" no from user")}else this.logger.error(i.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" no requestId")},e.prototype.onRecvJoinLiveRequest=function(e,t,n,r){this.stateCenter.actionListener("recvJoinLiveRequest",e,t,n,r)},e.prototype.handlePushJoinLiveInviteMsg=function(e){var t=e.request_id;if("string"==typeof t){var n=e.from_userid;"string"==typeof n?(this.joinLiveRequestMap[t]=n,this.onRecvInviteJoinLiveRequest(t,e.from_userid,e.from_username,e.room_id),this.logger.info(i.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" onRecvInviteJoinLiveRequest "+n)):this.logger.error(i.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" no from user")}else this.logger.error(i.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+"no requestId")},e.prototype.onRecvInviteJoinLiveRequest=function(e,t,n,r){this.stateCenter.actionListener("recvInviteJoinLiveRequest",e,t,n,r)},e.prototype.handlePushJoinLiveResultMsg=function(e){var t=e.request_id;if("string"==typeof t){var n=e.result;if(null!=n){var r=1==n;if(this.joinLiveCallbackMap[t]){var o=this.joinLiveCallbackMap[t];if(!o)return void this.logger.info(i.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" no callback");this.logger.info(i.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" joinLiveRequest/invite result "+r),delete this.joinLiveCallbackMap[t],o(r,e.from_userid,e.from_username)}}else this.logger.info(i.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" no result")}else this.logger.error(i.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" no requestId")},e.prototype.handlePushJoinLiveStopMsg=function(e){var t=e.request_id;"string"==typeof t?(this.logger.info(i.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" onRecvEndJoinLiveCommand "+e.from_userid),this.onRecvEndJoinLiveCommand(t,e.from_userid,e.from_username,e.room_id)):this.logger.error(i.ZEGO_RTM_ACTION.LIVE_PUSH_SIGNAL+" no requestId")},e.prototype.onRecvEndJoinLiveCommand=function(e,t,n,r){this.stateCenter.actionListener("recvEndJoinLiveCommand",e,t,n,r)},e}();t.LiveHandler=s},42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENUM_PUSH_SIGNAL_SUB_CMD=t.ENUM_SIGNAL_SUB_CMD=void 0,t.ENUM_SIGNAL_SUB_CMD={none:0,joinLiveRequest:1001,joinLiveResult:1002,joinLiveInvite:1003,joinLiveStop:1004},t.ENUM_PUSH_SIGNAL_SUB_CMD={none:0,pushJoinLiveRequest:11001,pushJoinLiveResult:11002,pushJoinLiveInvite:11003,pushJoinLiveStop:11004}}})},3126:function(e){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=36)}({13:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_RTM_ACTION=void 0,function(e){e.ZEGOEXPRESSWEBRTM_SEND_CUSTOM="zm.scc",e.ZEGOEXPRESSWEBRTM_SEND_BCM="zm.sbcm",e.ZEGOEXPRESSWEBRTM_SEND_RLM="zm.srlm",e.ZEGOEXPRESSWEBRTM_SEND_BRM="zm.sbrm",e.ZEGOEXPRESSWEBRTM_SEND_RAM="zm.sram",e.MESSAGE_SEND_RELIABLE="zm.msg.sdr",e.MESSAGE_FETCH_RELIABLE="zm.msg.frm",e.MESSAGE_RELIABLE_RSP="zm.msg.rlr",e.MESSAGE_RELIABLE_PUSH="zm.msg.rps",e.MESSAGE_SEND_ROOM_MSG="zm.msg.srm",e.MESSAGE_SEND_CUSTOM_MSG="zm.msg.scm",e.MESSAGE_SEND_BIG_MSG="zm.msg.sbm",e.MESSAGE_BIG_MSG_PUSH="zm.msg.bps",e.MESSAGE_SEND_RELAY_MSG="zm.msg.slm",e.SERVICE_PUSH="zm.sv.ps"}(t.ZEGO_RTM_ACTION||(t.ZEGO_RTM_ACTION={}))},14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoRTMLogEvent=void 0;var r=n(8),i=function(e){return e};t.ZegoRTMLogEvent={kZegoTaskLiveSendRoomBigIM:{event:"/liveroom/send_big_room_message",room_sid:i,error:{INPUT_PARAM:r.errorCodeList.INPUT_PARAM,IM_CONTENT_NULL:r.errorCodeList.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:r.errorCodeList.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:r.errorCodeList.ROOM_NOT_EXIST}},kZegoTaskLiveRoomSendCustomCommand:{event:"/liveroom/send_custom_command",room_sid:i,error:{INPUT_PARAM:r.errorCodeList.INPUT_PARAM,IM_CONTENT_NULL:r.errorCodeList.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:r.errorCodeList.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:r.errorCodeList.ROOM_NOT_EXIST}},kZegoTaskLiveRoomSendRoomMessage:{event:"/liveroom/send_room_message",room_sid:i,error:{INPUT_PARAM:r.errorCodeList.INPUT_PARAM,IM_CONTENT_NULL:r.errorCodeList.IM_CONTENT_NULL,IM_CONTENT_TOO_LONG:r.errorCodeList.IM_CONTENT_TOO_LONG,ROOM_NOT_EXIST:r.errorCodeList.ROOM_NOT_EXIST}},kZegoTaskLiveRoomSendReliableMessage:{event:"/liveroom/send_reliable_message",room_sid:i,error:{INPUT_PARAM:r.errorCodeList.INPUT_PARAM,TRANS_FREQUENTLY:r.errorCodeList.TRANS_FREQUENTLY,ROOM_NOT_EXIST:r.errorCodeList.ROOM_NOT_EXIST}},kZegoTaskLiveGetRoomBigIM:{event:"/liveroom/get_big_room_message"},kZegoTaskLiveRoomGetRoomMessage:{event:"/liveroom/get_room_message",room_sid:i},kZegoTaskLiveRoomGetCustomCommand:{event:"/liveroom/get_custom_command"}}},15:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_MESSAGE_LENGTH=t.MAX_TRANS_DATA_LENGTH=t.MAX_TRANS_TYPE_LENGTH=t.ERROR_CODES=void 0,t.ERROR_CODES={FETCH_TRANS_UNKNOWN_CHANNEL:1000001108,FETCH_TRANS_UNKNOWN_TYPE:1000001109,FETCH_TRANS_WRONG_SEQ:1000001110},t.MAX_TRANS_TYPE_LENGTH=128,t.MAX_TRANS_DATA_LENGTH=4096,t.MAX_MESSAGE_LENGTH=1024},36:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37);t.default={type:"message",install:function(e,t,n,i,o){for(var s in r.rtmPros)Object.defineProperty(e.prototype,s,{value:r.rtmPros[s],writable:!1});for(var s in r.servicePros)Object.defineProperty(n.prototype,s,{value:r.servicePros[s],writable:!1}),Object.defineProperty(o.prototype,s,{value:r.servicePros[s],writable:!1});for(var s in r.modulePros)Object.defineProperty(t.prototype,s,{value:r.modulePros[s],writable:!1}),Object.defineProperty(i.prototype,s,{value:r.modulePros[s],writable:!1})}}},37:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modulePros=t.initMessageHandler=t.servicePros=t.handleBigImMsgRsp=t.handlePushTransMsg=t.handlePushMergeMsg=t.handlePushCustomMsg=t.handlePushRoomMsg=t.rtmPros=void 0;var r=n(13),i=n(14),o=n(15),s=n(38),a=n(8);function c(e,t,n,s){var a=this;return void 0===n&&(n=1),void 0===s&&(s=1),new Promise((function(c,l){var u=a.getReportSeq();a.dataReport.newReport(u,i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.event);var d=a.proxyRes(a.dataReport,u,c,l),h=d.interResolve,p=d.interReject;if("string"!=typeof e||""==e)return a.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BCM+" roomid must be string and not empty"),void p(i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.error.INPUT_PARAM," param roomID error");if(void 0===t||""==t)return a.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BCM+" message is empty"),void p(i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.error.IM_CONTENT_NULL);if("string"!=typeof t)return a.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BCM+" message must be string"),void p(i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.error.INPUT_PARAM," param message error");if(t.length>o.MAX_MESSAGE_LENGTH)return a.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BCM+" message too long"),void p(i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.error.IM_CONTENT_TOO_LONG);var f="PUBLIC"==a.stateCenter.type?a.getRoomModules(e):a.stateCenter.priModules;f?(a.dataReport.addMsgInfo(u,{room_sid:i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.room_sid(f.sessionID)}),f.messageHandler.sendRoomMsg(n,s,e,t,h,p)):p(i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.error.ROOM_NOT_EXIST)}))}function l(e,t,n){var s=this;return new Promise((function(c,l){var u=s.getReportSeq();s.dataReport.newReport(u,i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendCustomCommand.event);var d=s.proxyRes(s.dataReport,u,c,l),h=d.interResolve,p=d.interReject;if("string"!=typeof e||""==e)return s.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_CUSTOM+" roomid must be string and not empty"),void p(a.errorCodeList.INPUT_PARAM," param roomID error");if(!(n instanceof Array)||n.find((function(e){return"string"!=typeof e})))return s.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_CUSTOM+" dstMembers must be string array"),void p(i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendCustomCommand.error.INPUT_PARAM," param toUserList error");if("PUBLIC"===s.stateCenter.type&&"string"!=typeof t&&"object"!=typeof t)return s.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_CUSTOM+" custom content must be a non empty string or object"),void p(i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendCustomCommand.error.INPUT_PARAM," param command error");if("PRIVATE"===s.stateCenter.type&&"string"!=typeof t)return s.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_CUSTOM+" custom content must be a not empty string"),void p(i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendCustomCommand.error.INPUT_PARAM," param command error");if("string"==typeof t&&t.length>o.MAX_MESSAGE_LENGTH)return s.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_CUSTOM+" command too long"),void p(i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendCustomCommand.error.IM_CONTENT_TOO_LONG);var f="PUBLIC"==s.stateCenter.type?s.getRoomModules(e):s.stateCenter.priModules;f?(s.dataReport.addMsgInfo(u,{room_sid:i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendCustomCommand.room_sid(f.sessionID)}),f.messageHandler.sendCustomCommand(n,t,h,p)):p(i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendCustomCommand.error.ROOM_NOT_EXIST)}))}function u(e,t,n,s){var a=this;return void 0===n&&(n=1),void 0===s&&(s=1),new Promise((function(c,l){var u=a.getReportSeq();a.dataReport.newReport(u,i.ZegoRTMLogEvent.kZegoTaskLiveSendRoomBigIM.event);var d=a.proxyRes(a.dataReport,u,c,l),h=d.interResolve,p=d.interReject;if("string"!=typeof e||""==e)return a.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BRM+"roomid must be string and not empty"),void p(i.ZegoRTMLogEvent.kZegoTaskLiveSendRoomBigIM.error.INPUT_PARAM," param roomID error");if(void 0===t||""==t)return a.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BRM+" message is empty"),void p(i.ZegoRTMLogEvent.kZegoTaskLiveSendRoomBigIM.error.IM_CONTENT_NULL);if("string"!=typeof t)return a.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BRM+" message must be string"),void p(i.ZegoRTMLogEvent.kZegoTaskLiveSendRoomBigIM.error.INPUT_PARAM," param message error");if(t.length>o.MAX_MESSAGE_LENGTH)return a.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BRM+" message too long"),void p(i.ZegoRTMLogEvent.kZegoTaskLiveSendRoomBigIM.error.IM_CONTENT_TOO_LONG);var f="PUBLIC"==a.stateCenter.type?a.getRoomModules(e):a.stateCenter.priModules;f?(a.dataReport.addMsgInfo(u,{room_sid:i.ZegoRTMLogEvent.kZegoTaskLiveSendRoomBigIM.room_sid(f.sessionID)}),f.messageHandler.sendBigRoomMessage(n,s,e,t,h,p)):p(i.ZegoRTMLogEvent.kZegoTaskLiveSendRoomBigIM.error.ROOM_NOT_EXIST)}))}function d(e,t,n){var s=this;return new Promise((function(a,c){var l=s.getReportSeq();s.dataReport.newReport(l,i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.event);var u=s.proxyRes(s.dataReport,l,a,c),d=u.interResolve,h=u.interReject;if("string"!=typeof e||""==e)return s.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_BCM+" roomid must be string and not empty"),void h(i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendRoomMessage.error.INPUT_PARAM," param roomID error");if(!t||"string"!=typeof t)return s.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_RLM+" type must be string"),void h({errorCode:i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.error.INPUT_PARAM.code});if(t.length>o.MAX_TRANS_TYPE_LENGTH)return s.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_RLM+" type is too long"),void h({errorCode:i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.error.INPUT_PARAM.code});if(!n||"string"!=typeof n)return s.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_RLM+" data must be string"),void h({errorCode:i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.error.INPUT_PARAM.code});if(n.length>o.MAX_TRANS_DATA_LENGTH)return s.logger.error(r.ZEGO_RTM_ACTION.ZEGOEXPRESSWEBRTM_SEND_RLM+" type is too long"),void h({errorCode:i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.error.INPUT_PARAM.code});var p="PUBLIC"==s.stateCenter.type?s.getRoomModules(e):s.stateCenter.priModules;p?(s.dataReport.addMsgInfo(l,{room_sid:i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.room_sid(p.sessionID)}),p.messageHandler.sendReliableMessage(t,n,d,h)):h(i.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.error.ROOM_NOT_EXIST)}))}function h(e){var t,n=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,i="PUBLIC"==this.stateCenter.type?this.rtm.getRoomModules(n):this.stateCenter.priModules;i?i.messageHandler.handlePushRoomMsg(e):this.logger.error(r.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}function p(e){var t,n=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,i="PUBLIC"==this.stateCenter.type?this.rtm.getRoomModules(n):this.stateCenter.priModules;i?i.messageHandler.handlePushCustomMsg(e):this.logger.error(r.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}function f(e){var t,n=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,i="PUBLIC"==this.stateCenter.type?this.rtm.getRoomModules(n):this.stateCenter.priModules;i?i.messageHandler.handlePushMergeMsg(e):this.logger.error(r.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}function g(e){var t,n=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,i="PUBLIC"==this.stateCenter.type?this.rtm.getRoomModules(n):this.stateCenter.priModules;i?i.messageHandler.handlePushTransMsg(e):this.logger.error(r.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}function m(e){var t,n=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,i="PUBLIC"==this.stateCenter.type?this.rtm.getRoomModules(n):this.stateCenter.priModules;i?i.messageHandler.handleBigImMsgRsp(e):this.logger.error(r.ZEGO_RTM_ACTION.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))}function _(){this.messageHandler=new s.MessageHandler(this.logger,this.stateCenter,this.dataReport,this.service,this.rtm,this)}t.rtmPros={_sendBroadcastMessage:c,sendBroadcastMessage:function(e,t){var n=this;return new Promise((function(r,i){c.call(n,e,t).then((function(e){r({errorCode:e.errorCode,messageID:e.messageID,extendedData:e.extendedData})})).catch((function(e){i(e)}))}))},_sendCustomCommand:l,sendCustomCommand:function(e,t,n){var r=this;return new Promise((function(i,o){l.call(r,e,t,n).then((function(e){i({errorCode:e.errorCode,extendedData:e.extendedData})})).catch((function(e){o(e)}))}))},_sendBarrageMessage:u,sendBarrageMessage:function(e,t){var n=this;return new Promise((function(r,i){u.call(n,e,t).then((function(e){r({errorCode:e.errorCode,messageID:e.messageID,extendedData:e.extendedData})})).catch((function(e){i(e)}))}))},_setRoomExtraInfo:d,setRoomExtraInfo:function(e,t,n){return d.call(this,e,t,n)},sendRelayMessage:function(e,t,n,r,i){var o=this.getRoomModules(i)||this.stateCenter.roomModulesList[0];o?o.messageHandler.sendRelayMessage(e,t,n,r):r&&r(a.errorCodeList.ROOM_NOT_EXIST,0)}},t.handlePushRoomMsg=h,t.handlePushCustomMsg=p,t.handlePushMergeMsg=f,t.handlePushTransMsg=g,t.handleBigImMsgRsp=m,t.servicePros={handlePushRoomMsg:h,handlePushCustomMsg:p,handlePushMergeMsg:f,handlePushTransMsg:g,handleBigImMsgRsp:m},t.initMessageHandler=_,t.modulePros={initMessageHandler:_}},38:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var r=n(8),i=n(13),o=n(14),s=n(15),a=function(){function e(e,t,n,r,i,o){var s=this;this.logger=e,this.stateCenter=t,this.dataReport=n,this.service=r,this.rtm=i,this.room=o,this.sendRoomMsgTime=0,this.sendRoomMsgInterval=500,this.bigImCallbackMap={},this.bigImLastTimeIndex=0,this.bigIMmessageList=[],this.bigImTimer=null,this.relayTimer=null,this.serverTimeOffset=0,this.datiTimeWindow=0,this.bigimTimeWindow=0,this.isReliable=!1,this.transSeqMap={},this.onRecvReliableMessage=function(e){var t=e.map((function(e){return{key:e.trans_type,value:e.trans_data,updateUser:{userID:e.trans_idname,userName:e.trans_nickname},updateTime:e.trans_send_time}}));s.stateCenter.actionListener("roomExtraInfoUpdate",s.room.roomID,t),e.forEach((function(e){s.stateCenter.actionListener("recvReliableMessage",e.trans_type,e.trans_seq,e.trans_data)}))},this.realyMessageList=[]}return e.prototype.loginRsp=function(e){var t=this;if(null!=e.body.ret_timestamp&&"string"==typeof e.body.ret_timestamp){var n=parseFloat(e.body.ret_timestamp);this.serverTimeOffset=0==n?0:e.body.ret_timestamp-(new Date).getTime()}if(e.body.bigim_time_window&&"number"==typeof e.body.bigim_time_window&&(this.bigimTimeWindow=e.body.bigim_time_window),e.body.dati_time_window&&"number"==typeof e.body.dati_time_window&&(this.datiTimeWindow=e.body.dati_time_window),e.body.trans_seqs)for(var r=0;r<e.body.trans_seqs.length;r++){var i=e.body.trans_seqs[r].trans_channel,o=e.body.trans_seqs[r].trans_seq_array;(o=o.filter((function(e){var n=e.trans_type,r=e.trans_seq;return!t.transSeqMap[n]||t.transSeqMap[n].seq<r}))).length>0&&this.fetchReliableMessage(i,o)}},e.prototype.sendReliableMessage=function(e,t,n,s){var a=this;if(this.logger.info(i.ZEGO_RTM_ACTION.MESSAGE_SEND_RELIABLE+" call"),this.isReliable)return this.logger.error(i.ZEGO_RTM_ACTION.MESSAGE_SEND_RELIABLE+" send too often"),void s(o.ZegoRTMLogEvent.kZegoTaskLiveRoomSendReliableMessage.error.TRANS_FREQUENTLY);this.transSeqMap[e]||(this.transSeqMap[e]={seq:0});var c={trans_type:e,trans_data:t,trans_local_seq:this.transSeqMap[e].seq,trans_channel:"clt"};this.isReliable=!0,this.service.sendReliableMessage(c,(function(t){a.transSeqMap[e].seq=t.body.trans_seq,a.logger.info(i.ZEGO_RTM_ACTION.MESSAGE_SEND_RELIABLE+" trans "+e+" seq "+t.body.trans_seq),a.isReliable=!1,n({seq:t.header.seq,errorCode:0})}),(function(e){var t=r.errorCodeList.ROOM_INNER_ERROR;e.body&&e.body.err_code?(t=a.rtm.getServerError(e.body.err_code),a.logger.error(i.ZEGO_RTM_ACTION.MESSAGE_SEND_ROOM_MSG+"  "+t.msg)):t=e==r.errorCodeList.TIMEOUT?r.errorCodeList.IM_SEND_FAILED:e,a.isReliable=!1,s(t)}),this.room.sessionID,this.room.roomID,this.room.roomSessionID)},e.prototype.fetchReliableMessage=function(e,t){var n=this,r={trans_channel:e,fetch_array:t},o=function(e){n.handleFetchTransRsp(e)};this.service.fetchReliableMessage(r,o,o,this.room.sessionID,this.room.roomID,this.room.roomSessionID),this.logger.info(i.ZEGO_RTM_ACTION.MESSAGE_FETCH_RELIABLE+" call success")},e.prototype.handleFetchTransRsp=function(e){if(e.body&&0!=e.body.err_code)this.logger.error(i.ZEGO_RTM_ACTION.MESSAGE_RELIABLE_RSP+" trans send error "+e.body.err_code);else if(e.header&&e.body){var t=e.body.trans_fetch_results,n=[];if(Array.isArray(t)&&t.length>0)for(var r=0;r<t.length;r++){var o=t[r];if(o.err_code!==s.ERROR_CODES.FETCH_TRANS_UNKNOWN_TYPE){var a=o.trans_type,c=o.trans_seq;o.err_code!==s.ERROR_CODES.FETCH_TRANS_WRONG_SEQ?(!this.transSeqMap[a]||this.transSeqMap[a].seq<c?(this.transSeqMap[a]={seq:c},n.push(o)):this.logger.warn(i.ZEGO_RTM_ACTION.MESSAGE_RELIABLE_RSP+" fetch trans seq wrong"),n.length>0&&this.onRecvReliableMessage(n)):(this.logger.warn(i.ZEGO_RTM_ACTION.MESSAGE_RELIABLE_RSP+" fetch trans seq is wrong "+o.err_code),this.transSeqMap[a]={seq:c})}else this.logger.warn(i.ZEGO_RTM_ACTION.MESSAGE_RELIABLE_RSP+" fetch trans unknown type "+o.err_code)}}else this.logger.error(i.ZEGO_RTM_ACTION.MESSAGE_RELIABLE_RSP+" trans send error "+e)},e.prototype.handlePushTransMsg=function(e){var t=e.body.trans_type,n=e.body.trans_seq;!this.transSeqMap[t]||this.transSeqMap[t].seq<n?(this.transSeqMap[t]={seq:n},this.onRecvReliableMessage([e.body])):this.logger.warn(i.ZEGO_RTM_ACTION.MESSAGE_RELIABLE_PUSH+" trans seq wrong"),this.logger.info(i.ZEGO_RTM_ACTION.MESSAGE_RELIABLE_PUSH+" trans "+t+" seq "+n)},e.prototype.sendRoomMsg=function(e,t,n,o,s,a){var c=this;if(!this.room.isLogin())return this.logger.error(i.ZEGO_RTM_ACTION.MESSAGE_SEND_ROOM_MSG+" state error"),!1;var l=Date.parse(new Date+"");if(this.sendRoomMsgTime>0&&this.sendRoomMsgTime+this.sendRoomMsgInterval>l)return this.logger.info(i.ZEGO_RTM_ACTION.MESSAGE_SEND_ROOM_MSG+" freq error"),a&&a(r.errorCodeList.FREQ_LIMITED,0,e,o),!1;this.sendRoomMsgTime=l;var u="PRIVATE"==this.stateCenter.type?{room_header:{room_id:this.room.roomID,room_sid:this.room.roomSid||"0",room_user_session_id:this.room.roomSessionID||"0"},msg_category:e,msg_type:1,msg_content:o}:{msg_category:e,msg_type:1,msg_content:o};return this.service.sendRoomMsg(u,(function(e){s({seq:e.header.seq,errorCode:0,messageID:e.body.msg_id})}),(function(e){var t,n,o=r.errorCodeList.ROOM_INNER_ERROR;if(!e.header||!e.body)return e.code&&e.msg&&(o=e),void a({seq:0,errorCode:o.code,messageID:0});o=(t=[c.rtm.getServerError("PRIVATE"==c.stateCenter.type?e.body.code:e.body.err_code),e.body.msg_id])[0],n=t[1],c.logger.error(i.ZEGO_RTM_ACTION.MESSAGE_SEND_ROOM_MSG+"  "+o.msg),c.logger.error(i.ZEGO_RTM_ACTION.MESSAGE_SEND_ROOM_MSG+"  "+o.msg),o==r.errorCodeList.TIMEOUT&&(o=r.errorCodeList.IM_SEND_FAILED),a({seq:e.header.seq,errorCode:o.code,messageID:n})}),this.room.sessionID,this.room.roomID,this.room.roomSessionID),this.logger.info(i.ZEGO_RTM_ACTION.MESSAGE_SEND_ROOM_MSG+"  call success"),!0},e.prototype.handlePushRoomMsg=function(e){var t=this,n=this.rtm.getReportSeq();this.dataReport.newReport(n),this.dataReport.addMsgInfo(n,{room_sid:o.ZegoRTMLogEvent.kZegoTaskLiveRoomGetRoomMessage.room_sid(e.header.session_id)});var r=[];"PRIVATE"==this.stateCenter.type?e.body.chat_data.forEach((function(e){var i={fromUser:{userID:e.user_id,userName:e.user_name},message:e.msg_content,sendTime:e.send_time,messageID:e.msg_id};r.push(i),t.dataReport.addMsgInfo(n,{from_msg_id:e.id_name})})):e.body.chat_data.forEach((function(e){var i={fromUser:{userID:e.id_name,userName:e.nick_name},message:e.msg_content,sendTime:e.send_time,messageID:e.msg_id};r.push(i),t.dataReport.addMsgInfo(n,{from_msg_id:e.id_name})})),this.dataReport.uploadReport(n,o.ZegoRTMLogEvent.kZegoTaskLiveRoomGetRoomMessage.event),this.stateCenter.actionListener("IMRecvBroadcastMessage",this.room.roomID,r),this.stateCenter.actionListener("_recvRoomMsg",e.body.chat_data,e.body.server_msg_id,e.body.ret_msg_id)},e.prototype.sendCustomCommand=function(e,t,n,o){var s=this;if(!this.room.isLogin())return this.logger.error(i.ZEGO_RTM_ACTION.MESSAGE_SEND_CUSTOM_MSG+" state error"),!1;var a={from_userid:this.stateCenter.idName,from_username:this.stateCenter.nickName,request_id:this.stateCenter.getRequestId(),custom_content:t||"",room_id:this.room.roomID},c="PRIVATE"==this.stateCenter.type?{room_header:{room_id:this.room.roomID,room_sid:this.room.roomSid||"0",room_user_session_id:this.room.roomSessionID||"0"},request_id:this.stateCenter.getRequestId(),msg:t,destids:e}:{dest_id_name:e,custom_msg:JSON.stringify(a)};return this.service.sendCustomCommand(c,(function(e){n({seq:e.header.seq,errorCode:0})}),(function(e){var t,n=s.rtm.getServerError("PRIVATE"==s.stateCenter.type?e.body.code:e.body.err_code);s.logger.error(i.ZEGO_RTM_ACTION.MESSAGE_SEND_CUSTOM_MSG+" "+n.msg),t=n==r.errorCodeList.TIMEOUT?r.errorCodeList.IM_SEND_FAILED:n,o({seq:e.header.seq,errorCode:t.code})}),this.room.sessionID,this.room.roomID,this.room.roomSessionID),this.logger.info(i.ZEGO_RTM_ACTION.MESSAGE_SEND_CUSTOM_MSG+" call success"),!0},e.prototype.handlePushCustomMsg=function(e){var t,n,r,i,s,a;if("PRIVATE"==this.stateCenter.type)r=(t=[e.body.from_user_id,e.body.from_user_name,this.room.roomID,e.body.msg])[0],i=t[1],s=t[2],a=t[3];else{var c=JSON.parse(e.body.custommsg);r=(n=[c.from_userid,c.from_username,c.room_id,c.custom_content])[0],i=n[1],s=n[2],a=n[3]}var l=this.rtm.getReportSeq();this.dataReport.newReport(l),this.dataReport.uploadReport(l,o.ZegoRTMLogEvent.kZegoTaskLiveRoomGetCustomCommand.event),this.stateCenter.actionListener("IMRecvCustomCommand",s,{userID:r,userName:i},a)},e.prototype.sendBigRoomMessage=function(e,t,n,r,i,o){var s=this,a=this.bigimTimeWindow,c=this.serverTimeOffset,l=(new Date).getTime()+c,u=this.rtm.getSeq().toString();if(this.bigImCallbackMap[u]={success:i,error:o},0==a){var d={msg_category:e,msg_type:1,msg_content:r,bigmsg_client_id:u};this.sendBigRoomMessageInternal([d],(function(e){s.handleBigImMsgRsp(e)}),(function(e){o&&o(e)}))}else{var h=Math.floor(l/a);if(this.bigImLastTimeIndex<h&&0==this.bigIMmessageList.length){this.bigImLastTimeIndex=h;var p={msg_category:e,msg_type:1,msg_content:r,bigmsg_client_id:u};this.sendBigRoomMessageInternal([p],(function(e){s.handleBigImMsgRsp(e)}),(function(e){o&&o(e)}))}else this.bigIMmessageList.push({msg_category:e,msg_type:1,msg_content:r,bigmsg_client_id:u}),1==this.bigIMmessageList.length&&this.setBigImTimer(c,a)}},e.prototype.sendBigRoomMessageInternal=function(e,t,n){var o={msgs:e};this.service.sendBigRoomMessage(o,(function(e){t(e)}),(function(e){var t=r.errorCodeList.ROOM_INNER_ERROR;e.header&&e.body||(e.code&&e.msg&&(t=e),n(t)),n(t)}),this.room.sessionID,this.room.roomID,this.room.roomSessionID),this.logger.info(i.ZEGO_RTM_ACTION.MESSAGE_SEND_BIG_MSG+" sendBigRoomMessage called")},e.prototype.handleBigImMsgRsp=function(e){this.bigimTimeWindow=e.body.bigim_time_window;for(var t=0;t<e.body.msgs.length;t++){var n=e.body.msgs[t].bigmsg_client_id,r=e.body.msgs[t].bigmsg_id;if(this.bigImCallbackMap[n]){var i=this.bigImCallbackMap[n].success;null!=i&&i({seq:e.header.seq,errorCode:0,messageID:r}),delete this.bigImCallbackMap[n]}}},e.prototype.setBigImTimer=function(e,t){var n=this,r=t-((new Date).getTime()+e)%t,i=this.rtm.generateRandumNumber(t)+r;this.bigImTimer=setTimeout((function(){n.onBigImTimer()}),i)},e.prototype.onBigImTimer=function(){var e=this,t=(new Date).getTime()+this.serverTimeOffset;this.bigImLastTimeIndex=Math.floor(t/this.bigimTimeWindow);for(var n=[],r=[],i=0;i<this.bigIMmessageList.length&&!(i>=20);i++){var o=this.bigIMmessageList[i];n.push({msg_category:o.msg_category,msg_type:o.msg_type,msg_content:o.msg_content,bigmsg_client_id:o.bigmsg_client_id}),r.push(o.bigmsg_client_id)}this.bigIMmessageList.length>20?this.bigIMmessageList.splice(0,20):this.bigIMmessageList=[],this.sendBigRoomMessageInternal(n,(function(t){e.handleBigImMsgRsp(t)}),(function(t,n){for(var i=0;i<r.length;i++){var o=r[i],s=e.bigImCallbackMap[o];s&&(null!=s.error&&s.error(t,n),delete e.bigImCallbackMap[o])}})),this.bigImTimer&&clearTimeout(this.bigImTimer),this.bigImTimer=null,this.bigIMmessageList.length>0&&this.setBigImTimer(this.serverTimeOffset,this.bigimTimeWindow)},e.prototype.handlePushMergeMsg=function(e){for(var t=0;t<e.body.messages.length;t++)14001===e.body.messages[t].sub_cmd&&this.handlePushBigRooMsg(e.body.messages[t].msg_body)},e.prototype.handlePushBigRooMsg=function(e){var t;try{t=JSON.parse(e)}catch(e){return void this.logger.warn(i.ZEGO_RTM_ACTION.MESSAGE_BIG_MSG_PUSH+"parse json error")}if(t){for(var n=t.room_id,r=[],o=0;o<t.msg_data.length;o++){var s=t.msg_data[o];s.id_name!=this.stateCenter.idName?r.push({idName:s.id_name,nickName:s.nick_name,messageId:s.bigmsg_id,category:s.msg_category,type:s.msg_type,content:s.msg_content,time:s.send_time}):this.logger.info(i.ZEGO_RTM_ACTION.MESSAGE_BIG_MSG_PUSH+" self message")}0==r.length?this.logger.info(i.ZEGO_RTM_ACTION.MESSAGE_BIG_MSG_PUSH+" no other pushData except self"):this.onRecvBigRoomMessage(r,n),this.logger.info(i.ZEGO_RTM_ACTION.MESSAGE_BIG_MSG_PUSH+"call success")}else this.logger.warn(i.ZEGO_RTM_ACTION.MESSAGE_BIG_MSG_PUSH+" cann't find message body")},e.prototype.onRecvBigRoomMessage=function(e,t){var n=this.rtm.getReportSeq();this.dataReport.newReport(n);var r=[];e.forEach((function(e){var t={fromUser:{userID:e.idName,userName:e.nickName},message:e.content,sendTime:e.time,messageID:e.messageId};r.push(t)})),this.dataReport.uploadReport(n,o.ZegoRTMLogEvent.kZegoTaskLiveGetRoomBigIM.event),this.stateCenter.actionListener("IMRecvBarrageMessage",t,r),this.stateCenter.actionListener("_recvBigRoomMessage",e,t)},e.prototype.resetMessageInfo=function(){this.transSeqMap={},this.realyMessageList=[],this.relayTimer&&(clearTimeout(this.relayTimer),this.relayTimer=null),this.bigImLastTimeIndex=0,this.bigIMmessageList=[],this.bigImCallbackMap={},this.bigImTimer&&(clearTimeout(this.bigImTimer),this.bigImTimer=null),this.serverTimeOffset=0,this.datiTimeWindow=0,this.bigimTimeWindow=0},e.prototype.sendRelayMessage=function(e,t,n,r){var i=this.datiTimeWindow,o=this.serverTimeOffset;i>0?(this.realyMessageList.push({type:e,data:t,success:n,error:r}),1==this.realyMessageList.length&&this.setRelayTimer(o,i)):this.sendRelayMessageInternal(e,t,n,r)},e.prototype.sendRelayMessageInternal=function(e,t,n,o){var s=this;this.logger.info(i.ZEGO_RTM_ACTION.MESSAGE_SEND_RELAY_MSG+" call");var a={relay_type:e,relay_data:t},c=this.room;this.service.sendRelayMessage(a,(function(e){n&&n(e.header.seq,e.body.relay_result)}),(function(e){var t=r.errorCodeList.ROOM_INNER_ERROR;if(!e.header||!e.body)return e.code&&e.msg&&(t=e),void(o&&o(t,0));o&&o(s.rtm.getServerError(e.body.err_code),e.header.seq)}),c.sessionID,c.roomID,c.roomSessionID)},e.prototype.setRelayTimer=function(e,t){var n=this,r=2*t-((new Date).getTime()+e)%t,o=this.rtm.generateRandumNumber(r);this.logger.info(i.ZEGO_RTM_ACTION.MESSAGE_SEND_RELAY_MSG+" setTimer "+o),this.relayTimer=setTimeout((function(){n.onRelayTimer()}),o)},e.prototype.onRelayTimer=function(){if(0!=this.realyMessageList.length){var e=this.realyMessageList[0];this.sendRelayMessageInternal(e.type,e.data,e.success,e.error),this.relayTimer&&clearTimeout(this.relayTimer),this.relayTimer=null,this.realyMessageList.splice(0,1),this.realyMessageList.length>0&&this.setRelayTimer(this.serverTimeOffset,this.datiTimeWindow)}else this.logger.info(i.ZEGO_RTM_ACTION.MESSAGE_SEND_RELAY_MSG+"  no relay data")},e.prototype.getRoomChatInfo=function(e,t,n,r){if(this.logger.debug("zb.mh.grc call"),this.room.isLogin()){var i={room_header:{room_id:this.room.roomID,room_sid:this.room.roomSid||"0",room_user_session_id:this.room.roomSessionID||"0"},msg_id:e,msg_count:t},o=function(e,t){if(0!==e.body.code)r({errorCode:e.body.code,extendData:e.body.message||""});else{var i=e.body.msg_data.map((function(e){return{fromUser:{userID:e.user_id,userName:e.user_name},message:e.msg_content,sendTime:e.send_time,messageID:e.msg_id}}));n({chatData:i})}};this.service.sendMessage("zegochat_js.room_im_chat_fetch",i,o,o),this.logger.info("zb.mh.grc call success")}else this.logger.error("zb.mh.srm no enter room")},e}();t.MessageHandler=a},8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},IM_CONTENT_NULL:{code:1009001,msg:"message content is empty"},IM_CONTENT_TOO_LONG:{code:1009002,msg:"message content is too long"},IM_SEND_FAILED:{code:1009010,msg:"failed to send message"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},TRANS_FREQUENTLY:{code:1102022,msg:"trans send frequently"},FREQ_LIMITED:{code:1109001,msg:"frequency limited."}}}})},4119:function(e){"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__4119__}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var __webpack_exports__=__webpack_require__(4780);return __webpack_exports__}()}))},fcd4:function(e,t,n){t.f=n("cc15")},fce3:function(e,t,n){var r=n("d039"),i=n("da84"),o=i.RegExp;e.exports=r((function(){var e=o(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},fd87:function(e,t,n){var r=n("74e8");r("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,n){var r=n("4930");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(e,t,n){var r=n("da84");e.exports=r.Promise},fed5:function(e,t){t.f=Object.getOwnPropertySymbols}}]);
//# sourceMappingURL=chunk-vendors.81159486.js.map